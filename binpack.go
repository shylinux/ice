package ice

import (
	"encoding/base64"
	ice "shylinux.com/x/icebergs"
	"shylinux.com/x/icebergs/base/nfs"
)

func init() {

	pack := ice.Maps{
        "usr/volcanos/favicon.ico": "AAABAAEAgIAAAAEAIAAoCAEAFgAAACgAAACAAAAAAAEAAAEAIAAAAAAAAAABABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAABAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAADAAAAAgAAAAIAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAAEAAAABAAAAAUAAAAGAAAABwAAAAcAAAAJAAAACQAAAAoAAAALAAAADQAAAA0AAAAOAAAADwAAABEAAAARAAAAEgAAABQAAAAVAAAAFQAAABYAAAAWAAAAFwAAABcAAAAYAAAAGQAAABkAAAAaAAAAGQAAABoAAAAaAAAAGQAAABoAAAAZAAAAGQAAABgAAAAYAAAAGAAAABgAAAAXAAAAFgAAABUAAAAVAAAAFAAAABMAAAASAAAAEgAAABIAAAARAAAAEAAAAA8AAAAOAAAADQAAAAwAAAALAAAACgAAAAoAAAAIAAAACAAAAAYAAAAGAAAABQAAAAUAAAAEAAAABAAAAAMAAAADAAAAAgAAAAIAAAABAAAAAQAAAAIAAAACAAAAAgAAAAIAAAACAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAADAAAAAgAAAAMAAAAEAAAABAAAAAYAAAAGAAAACAAAAAoAAAAMAAAADwAAABAAAAARAAAAFQAAABcAAAAaAAAAGwAAACAAAAAiAAAAJQAAACcAAAAqAAAALgAAADIAAAA0AAAANgAAADoAAAA9AAAAQAAAAEIAAABEAAAARwAAAEkAAABLAAAATAAAAE8AAABQAAAAUQAAAFMAAABUAAAAVAAAAFUAAABVAAAAVQAAAFUAAABVAAAAVAAAAFMAAABSAAAAUQAAAFAAAABOAAAATQAAAEwAAABKAAAASgAAAEgAAABFAAAAQwAAAEIAAABAAAAAPwAAADwAAAA6AAAAOAAAADUAAAAyAAAALwAAACsAAAAoAAAAJQAAACIAAAAgAAAAHAAAABkAAAAXAAAAFAAAABEAAAAPAAAADAAAAAsAAAAKAAAACAAAAAYAAAAGAAAABQAAAAUAAAADAAAAAwAAAAIAAAADAAAAAgAAAAMAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAMAAAACAAAAAwAAAAUAAAAGAAAACAAAAAoAAAANAAAAEAAAABMAAAAWAAAAGgAAAB8AAAAlAAAAKgAAAC8AAAA0AAAAPAAAAEIAAABHAAAATAAAAFAAAABVAAAAWwAAAGAAAABmAAAAbAAAAG8AAAB2AAAAfAAAAH8AAACDAAAAhgAAAIsAAACPAAAAkgAAAJQAAACYAAAAmgAAAJsAAACeAAAAnwAAAKAAAACgAAAAoQAAAKEAAACgAAAAoAAAAKAAAACfAAAAngAAAJsAAACZAAAAmAAAAJYAAACUAAAAkwAAAI4AAACMAAAAigAAAIgAAACFAAAAgQAAAH4AAAB6AAAAdwAAAHQAAABvAAAAagAAAGYAAABhAAAAXAAAAFYAAABRAAAATAAAAEYAAABBAAAAOQAAADQAAAAuAAAAKgAAACUAAAAfAAAAHAAAABcAAAAUAAAAEgAAAA8AAAANAAAACgAAAAgAAAAIAAAABwAAAAUAAAAEAAAAAwAAAAIAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAAAQAAAAEAAAABgAAAAgAAAAKAAAADAAAAA8AAAASAAAAFgAAABsAAAAgAAAAJgAAAC0AAAAyAAAAOQAAAEEAAABLAAAAUQAAAFgAAABgAAAAaAAAAG8AAAB1AAAAfQAAAIYAAACNAAAAkwAAAJkAAACfAAAApQAAAKwAAACzAAAAuAAAALwAAADBAAAAxgAAAMkAAQDNAgIC0gUGBdkJCgniDhAN6RETEe8KCQXiBQUB3goKA+MODQXoHxsP8RweGPsYGxf7GBwX+xgbGPoZHBj6GRwX+hkbF/kXGxf3FhkV8xIVEusPEQ7iCgoI0QEBAMAAAAC9AAAAuwAAALYAAACyAAAArwAAAKsAAACnAAAAogAAAJ0AAACXAAAAkQAAAIwAAACGAAAAfwAAAHgAAABwAAAAaQAAAGEAAABZAAAAUAAAAEoAAABCAAAAOwAAADQAAAAuAAAAKQAAACQAAAAfAAAAGgAAABcAAAATAAAAEQAAAA8AAAANAAAACwAAAAkAAAAIAAAABgAAAAQAAAADAAAABAAAAAMAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAgAAAAIAAAAEAAAABgAAAAgAAAALAAAADQAAAA8AAAASAAAAFwAAABwAAAAhAAAAJgAAAC4AAAA1AAAAPQAAAEQAAABMAAAAVQAAAF8AAABnAAAAcAAAAHkAAACAAAAAhwAAAI8AAACaAAAAowAAAKgAAACwAAAAuAAAAL4AAADDAAAAygAAANEAAADWAAAA2gAAAN4EBQTnCgsK7w8RD/QTFRL5FxkW/BkdGP0aHRr+KSYT/yMhCf0jIgj+JSMJ/hwZC/4jJBv/HSEc/x0gHP8dIRz/HSAc/x4hHP8eIh3/HiAd/x0hHP8dIBz/HSAb/hseGv0dHhf6FhUM6wUEAtkAAADSAAAAzgAAAMoAAADGAAAAwQAAAL0AAAC5AAAAswAAAK4AAACoAAAAogAAAJwAAACVAAAAjAAAAIMAAAB8AAAAdAAAAGwAAABjAAAAWwAAAFIAAABLAAAAQwAAADwAAAA2AAAALwAAACgAAAAjAAAAHgAAABoAAAAWAAAAFAAAABIAAAAPAAAADgAAAA0AAAALAAAACQAAAAcAAAAGAAAABQAAAAUAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAACAAAAAgAAAAQAAAAGAAAACAAAAAsAAAAOAAAAEAAAABQAAAAYAAAAHgAAACMAAAApAAAAMAAAADgAAABBAAAASAAAAFEAAABbAAAAZAAAAGwAAAB2AAAAgAAAAIcAAACNAAAAlgAAAKIAAACpAAAArwAAALYAAAC/AAAAxAAAAMsAAADSAgIC2wkJCOYPEQ7wFRkU+BodGf0cHhv+HCAb/x4hHf8fIh7/HyIe/y0nF/8qJgz/JiUI/yUkB/8bGQb/KScb/ycpJP8nKib/Jikl/ycoJP8oKSX/Jykk/ycpJP8mKCP/JSch/yQlIf8jJiH/ICQg/x8iHf8gIhz+HyAZ+BoYDu0VEQfqEw8F4QMCAM8AAADJDQsF0AYGBccAAAC7AAAAtAAAAK8AAACpAAAAogAAAJsAAACTAAAAiQAAAIEAAAB6AAAAcQAAAGkAAABfAAAAVwAAAFAAAABIAAAAQQAAADkAAAAxAAAAKwAAACYAAAAhAAAAHQAAABkAAAAVAAAAEwAAABAAAAAOAAAADQAAAAwAAAAJAAAACQAAAAcAAAAFAAAABQAAAAQAAAADAAAAAgAAAAIAAAACAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAwAAAAQAAAAGAAAACAAAAAoAAAAMAAAAEAAAABUAAAAYAAAAHQAAACIAAAAoAAAALwAAADcAAAA/AAAARgAAAFAAAABbAAAAYwAAAGsAAABzAAAAfAAAAIQAAACMAAAAlgAAAJ8AAACnAAAArQAAALUBAQG+CQoJ0hETEeYXGxf2HB8b/B4gHf4fIx7/ICQf/yEjH/8jJSH/Jigj/ykrJv8vLCP/MykS/yYkCf8lJAf/JCMH/yQfEP87ODL/PDo0/z07Nv89OzX/PTs2/z07Nv89Ojb/PDk1/zo5NP84NzL/NzYx/zU1L/8yMS3/LzAq/ywsKP8oKiT/Jigi/iUjGP0dFQn9Kx4H/TQlCvctJQz4LCQM9iMeEeEPDwzIAwMDrQAAAKEAAACcAAAAlAAAAI0AAACFAAAAfgAAAHUAAABsAAAAYwAAAFsAAABTAAAASwAAAEMAAAA8AAAANgAAAC4AAAAoAAAAIwAAAB4AAAAaAAAAFgAAABMAAAAQAAAADgAAAAwAAAALAAAACQAAAAgAAAAGAAAABQAAAAQAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAgAAAAIAAAACAAAAAgAAAAMAAAADAAAABQAAAAcAAAAIAAAACwAAAA0AAAARAAAAFQAAABkAAAAeAAAAJAAAACoAAAAwAAAAOAAAAD8AAABHAAAATQAAAFYAAABgAAAAaAAAAG0AAAB1AAAAfQAAAIUGBwaaERMQwRgcGOcdIBz6HiEc/h8jH/8iJSH/JCci/ycpJf8tLSn/MTAs/zU0MP87OTP/Pz04/z8zIP8rJQz/JiQI/yUkB/8gHgf/PTQn/1BJQv9RSkT/UElE/1NKRf9TTEb/U0xG/1NMRv9TTEb/UEpE/1BJRP9PSEP/TUdB/0pEP/9HQT3/Qj45/z46Nv85NzP/MzMu/y8tJf8eGA3/JBcC/zsnB/84Kg3/MikO/jUqFPwmIhnpFBYTxAkKCZoAAAB8AAAAdQAAAG4AAABoAAAAYAAAAFgAAABQAAAASAAAAEIAAAA6AAAANAAAAC4AAAApAAAAJAAAAB4AAAAZAAAAFAAAABEAAAAPAAAADAAAAAoAAAAJAAAACAAAAAYAAAAEAAAABAAAAAMAAAADAAAAAwAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAQAAAAEAAAABAAAAAYAAAAIAAAACgAAAA0AAAAPAAAAEgAAABcAAAAbAAAAHwAAACMAAAApAAAALwAAADUAAAA5AAAAPgICAkYOEA5tGhwYtB0gHesfIh39ISQf/iMlIP8mJyL/KCol/y4uKf80Mi3/Ozgz/0E+Of9HQz3/S0VB/09JQ/9QSUL/PzAY/ykkCf8nJAf/JyQH/yMeDP9TSUD/WlJL/1pSTP9bUkz/W1NN/1xTTf9cVE3/XFNO/1xTTf9dVE7/XFNN/1xSTf9bUkz/WVFL/1dPSv9VTkj/UktG/05IQv9LRT//RkI8/0E8NP8pIhX/JRcE/zwkBf89Kgz/NSoP/zgsE/8zKxv+ICId8xocGr4QExB4AgICSAEBAEAAAAA7AAAANAAAAC8AAAArAAAAJgAAACIAAAAdAAAAGgAAABYAAAASAAAADwAAAA0AAAALAAAACAAAAAYAAAAFAAAABQAAAAQAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAABAAAAAYAAAAGAAAACAAAAAkAAAALAAAADAAAAA4AAAAPAAAAEQkKCBkYGhZDHSAcpR4iHfMgIx//ISQf/yUmIv8qLCf/LS8p/zMzLv85ODP/Qj06/0dEPv9MR0H/T0pE/1NMRv9VTUj/V09J/1BDNP83KRL/KCUH/yglBv8oJQb/MCgZ/1xUTf9eVVD/X1ZQ/2BWUP9gVlH/YFdQ/2BWUf9hV1H/YVZQ/2FXUf9hWFL/YVdR/2FXUf9fVlD/X1VQ/11UT/9cU07/WlFM/1hPSv9UTEf/UEpF/0tFPv8wJxv/JxkG/zwlBf9AKQz/OSwR/zstFP86LBv/JCQe/x8jHvYeIR21GRwYWQcIBhwCAgEVAAAAEgAAABAAAAAOAAAADQAAAAsAAAAKAAAACAAAAAcAAAAGAAAABAAAAAQAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAQAAAAIAAAADAAAAAxUWEwgdIRwtHyMelR8jHu0fIx//Iych/yYpJP8rKyb/MDEr/zc2Mf8+PDb/Qz87/0lEP/9OSEP/UUtG/1RNSP9XUEr/WFFL/1lRS/9aUkz/Tzso/zIlDf8tJQf/LCUG/ykjBv9BNir/X1ZQ/2BXUf9hV1L/YVdR/2FXUv9iWFL/YlhT/2JYU/9iWVP/YldT/2JZU/9jWlT/YlhT/2JZUv9iWVL/YVdR/2BXUf9eVVD/W1NN/1lSS/9YUEr/VE5I/1JKRP8yKR7/KBkG/z4kBf9CKQv/PSwV/z0uGP9ALx3/KSgi/yElIP8hJCD0HyMepSIkID0UFxQLAAAABAAAAAMAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACEkIAIgJSAUICQfciEjH+EgJB//IyYi/yYpJP8rKyf/MTEu/zg3Mv8/PTj/RUI8/0pEP/9NR0L/UEpF/1VNR/9VTkn/WFBL/1lSTP9aU0z/W1JN/1xUT/9MNiH/MyUM/zImBv8yJgb/LSII/1BEOf9hWFH/YVhS/2JYU/9hWFP/YlhT/2JYUv9iWFL/YllU/2JZU/9iWFP/Y1pT/2RbVf9jWVP/Y1pU/2NaVP9jWVL/YVdS/19WUP9eVU//XVRP/1pTTf9YUEv/VU5I/1NLRP8zKR7/LRsG/0AmBP9DKQz/Qi8Y/0QzHP9IMyL/Li0n/yUpI/8gJCH/ICUg7CAkIIUgJB8gGRwZBAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhJSAKICQfRiAkH74iJSH/Iygj/ycpJP8qLSj/LzEs/zc2MP8/PTj/RUE8/0dEPv9MRkL/T0lE/1JLRf9VTkj/V1BL/1dRS/9ZUkz/W1NN/1xUT/9dVE//XVFJ/0kzHP82Jwr/OCgH/zgoBv8xJA3/WE1E/19XUv9fV1L/YFdR/2FYU/9hWFL/YVhT/2FYUv9gWFL/YVhU/2JaVP9jWlT/YlpU/2NaVP9kWlT/Y1pU/2JZU/9jWlP/YVhS/19XUf9eVlD/XVVP/1lSS/9YUUv/VU5I/1VORv8wJBr/MB0F/0InBP9GLAz/STUf/0w5I/9OOCb/NTIs/ywvKv8nKSX/JCcj/yIlIdEiJiFYIycjDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiYhFiEkH4YhJSD3IyYi/yUpJP8qLCj/Li8s/zM0MP87OTT/Qj45/0ZCPP9JRUD/TUhD/05JRP9QS0X/VE5I/1dQS/9ZUEz/WVJM/1pSTf9bVE//W1RO/1xUT/9bTUH/RzEa/zsnCf8/Kgf/PyoI/zgoFP9cUkn/XVZR/19XUf9eV1H/X1dS/2BXUv9gWFP/YFhS/2BXU/9hWFT/YFlT/2BaU/9iWlT/YVpU/2JZVP9hWVP/YllT/2FZU/9hWFL/X1dR/19WUv9fVlD/XFRO/1hRTP9XUEv/VU5J/1ZNR/8vIhb/NyAF/0cpBP9OMRD/VD4m/1ZBKv9YPyz/Ozkz/zEyLf8tLir/KCon/yYnI/8kJyOcIiYiJiUoJAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIyYhBCMmITsiJSK7Iyci/yQpJP8nKiX/Li0q/zIzL/83NzP/PTs3/0M/Ov9HQz7/SURA/01HQ/9PSkX/UUxG/1NOSP9VT0r/VlBK/1dRTP9YUkz/WlJN/1pTTv9aVE7/WlNO/1pJOv9GMBj/QSoK/0QrCf9FKwn/PS0b/1pRSv9aU0//W1RP/1xUUP9cVVD/XVZR/1xVUP9dVlH/XVVQ/11VUP9dVlH/XldR/19XUv9fV1H/YFdS/2BYUv9gWFP/YFdS/2BXUf9eVlH/XVZQ/1xVT/9aU07/WlNO/1dQTP9UT0n/VU9J/1RKQv8vIBL/RCYG/1EtBv9bOxn/Y0ky/2dMNP9fRDL/TT4z/005LP9JNCf/RjEj/0IvIP86LB/PMSohNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMnIg0jJSFjIyYi5SYpI/8mKiX/Ki0o/y4vK/81NTH/Ojkz/z88N/9CPzz/RkI+/0hFQP9LRkL/TklE/1BLR/9STUj/VE9K/1ROSv9VT0v/V1FL/1dSTP9WUkz/V1FM/1ZQTP9XUU3/XEc3/0YvGf9GLAv/SS4K/0ktCv9CMCH/WFBL/1dRTf9YUk3/WVNO/1lTTv9aVE7/WVNO/1pTTv9aU07/WlRO/1pTT/9cVE//W1RP/1tUT/9cVVD/XFZQ/1xWUP9cVFD/XFVQ/1xVT/9bVVD/WlRO/1lTTv9ZU07/VlFM/1RQSf9VUEn/V1FM/1ZJPv8zHw7/US4G/1w1B/9oRiX/cVQ8/2pJMv9kRCv/Xj0k/1g4H/9SNBv/TzMZ/1IyGf9RMBrBPiUSFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjJyMZIycjiiQnI/0nKiX/Ky0n/y0vKv8xMS7/NjYy/zw6NP8+PDj/Qj46/0VCPf9IRED/SkZC/01JRP9OSkX/UEtH/1NNSP9TTkn/VE9K/1ROSv9UT0n/VE9K/1RQS/9TT0r/VE5L/1VPS/9dRzX/RS8Y/0ouDf9NLwv/TS4L/0g1KP9UTkj/VVBL/1VQS/9UT0r/VU9L/1VQS/9WUEz/VVBL/1ZRS/9WUEz/VlBM/1dRTP9WUUz/V1JM/1ZSTf9XUUz/V1JM/1lSTv9YUk3/WFJN/1hSTf9YUk3/WFJM/1dSTP9VT0v/VVBL/1VQS/9aU07/XlZQ/15GN/9YMg//j1ET/5BSFf9/Uyn/bEQd/186Ef9XMQn/Ty0F/0YnBf9AJAT/PSEE/z4iBf9GKA/FPSQQNBUMAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJSgjIiUoJKolKSX/KCsn/ystKf8uMCz/MzQw/zc3M/86OjT/Pjw3/0E+O/9FQTz/R0Q//0lFQf9MR0P/TkhE/05KRf9PS0b/UExH/1JNSP9STkn/U01J/1FOSP9STUn/Uk1J/1JOSf9TTkr/UU1J/19JNv9FMBn/Ti8N/1AwDP9QMQ3/TDkt/1JMR/9QTUn/UU1J/1FOSf9RTUn/UU1J/1FOSf9RTkr/UU5K/1FOSv9STkr/U09K/1RQSv9UT0r/VFBL/1NPSv9UT0r/VVBL/1VQS/9UUEv/VVFL/1ZSS/9VUEv/VE9K/1NOSf9TT0r/VFBM/15RR/9wVUL/fVxF/35SKf+sYBv/p14Y/6ZdGP+RUhP/YzgI/04sBf88IAT/LhsG/ycYCf8mFwv/IxYM/yMXC/82JBbURC8jQUk9NQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUoJDIlKSXAKCsm/yksKP8rLyr/MDEt/zM0L/83NzL/Ozo1/zw7Nv9APTr/Qj87/0ZDPv9HRED/SEZC/0tIQ/9NSET/TUlF/05KRv9PSkb/UEtH/1BMR/9PTEf/T0xI/05LR/9PTEf/T0xH/05MR/9OTEf/YEs3/0kyHP9UMQ7/VjEN/1YyDv9NOi//T0tG/01LR/9NS0f/TUtH/01LRv9OS0j/TkxI/09MSP9PTEj/TktI/05LSP9PTUn/UE1I/1BNSP9QTUn/Uk5J/1JNSf9QTUn/UU5K/1JOSf9STkn/UU5J/1FOSv9RTUj/UU5J/1ZNRv9hTUD/a1JB/29TPv90Ty3/jFQe/7BkHP+tYRv/q2Ib/61gGv91QxP/NiIS/0AoG/9INiv/Sjow/0c8NP9IPTb/Qjoz/zkyK/9BODDbTkE5gjw3Lz0pLScBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmKiU5JiolzSgrJ/8rLin/LC8q/y8yLf80NS//NjYy/zk6Nf89Ozf/Pzw5/0E/O/9EQj3/RkQ//0dFQf9JR0L/S0hD/01JRP9MSUX/TUpF/01JRf9OSkb/TUtH/01KRv9MSUX/TEpG/01LRv9MSkX/TEpG/0tKRv9jTDr/SjQe/1kzEP9bMw//WjIP/089Mf9MSkX/SklF/0tJRf9LSEX/TEpG/0tJRf9MSkb/TEtG/0xKR/9MS0b/TUpH/01LR/9MSkb/TUtH/01MR/9NS0b/TkxH/09LSP9OTEj/T0xH/09MR/9PTEj/T01I/09NSP9YTEP/Zk9B/2dQQP9mSTH/Yz0Z/2c4Df91QA//nFcY/51ZGv+1Zh7/uGgd/5VbKf+BYEv/gF9K/2ROQf9CQTz/OTo2/zk5Nf80NjH/MTMv/y4xLf8tMiz/LzAr2SsuKVgpLSgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJyomPiYrJtMpLSj/Ky0p/y4wLP8wMi7/NDUx/zY2Mv85OTT/Ozs3/z49Of9APjr/QT88/0VDPf9GRED/SEZC/0hGQf9KR0P/SkhE/0pIRP9LSUT/TEpF/0xJRf9MSUb/S0hF/0lIQ/9JSUT/SkhE/0pJRf9KSkX/SUhF/2dQPf9NNh//XjUT/2A1Ef9fNBH/UEAz/0tKRf9JSUX/SUlF/0pJRf9JSUX/SklG/0pJRv9KSkb/S0lG/0tKRv9LSkX/S0lG/0tJRv9LSUb/S0pH/0tLR/9MS0f/TUtH/01LRv9NS0b/TUpH/01LRv9QS0b/X09C/2xURf9oUD7/YkAk/1kxDf9gNAz/ZjgN/10zDf9IKQ7/Sy0Y/4lLGv+3Zx7/oF8j/4NgTP9/YU//cFBB/0lBO/89PDn/OTs2/zY4NP80NjL/MjUw/zEyLv8uMCv/Ki4q5yktKF4qLikDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcqJjkmKibUKS0o/y0wK/8uMCz/MTIu/zQ1Mf81NzP/OTk1/zw8Nv88PDj/Pz47/0E+PP9BQD3/RUQ+/0VEQP9HRUL/SEVB/0hGQ/9JRkP/SEdC/0lIQ/9JSEP/SkhF/0lIRP9IR0T/SUdE/0hIRP9JSUT/SEhE/0hIRf9JSET/bFNA/1I4Iv9iNxP/ZDcS/2Q3FP9TQjb/SklG/0hIRP9ISUT/SUlF/0lJRf9ISUX/SUlF/0lJRf9KSUb/SklG/0pJRv9KSUb/SklF/0pJRv9KSkb/S0pH/0pKR/9LSUb/S0pG/0pKRf9MSkb/T0xG/2dSRv9zW0z/a1A4/2A6Gf9dMQ7/XDMN/2A0Df9KKAr/OSMR/1Y/MP9vWEz/TzUh/4VJE/96RA//b0Mc/3lcTf9zV0r/YUg7/z8+Ov88PTn/ODo1/zc5NP81ODP/MzYx/zAzL/8tMiz/Ky8p6SktKF4qLikBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoKyczKCwnzSouKf8tLyz/MDEt/zE0MP80NjL/NTYy/zk6Nf87Ozf/PDw4/z8+Ov9BQDz/QEE8/0JCP/9FQz//RURA/0ZEQf9IRUH/SEZB/0dGQv9IR0P/R0hD/0dHQ/9HR0P/R0ZD/0hHRP9JSEX/SEhE/0lJRf9ISET/R0hF/0hIRP9wVkX/Vjom/2Y5FP9oORT/aTkV/1ZCN/9LSkf/SUlG/0lKRv9ISkX/SUlG/0hKRv9JSkb/SUlG/0lJRv9KSUb/SkpH/0pKR/9JSkb/SUlF/0lJR/9KSkX/SUpG/0lKRv9ISkb/S0pH/1NMRv9uWU3/eGBR/29MNP9kNxT/YTMP/2AzDv9YMA7/Oh8J/zgmGv9cRzv/bl9V/2diW/9kVEr/SigO/2o5Df9kNQv/Z0Yq/3NZS/9qUUT/UkQ6/z0/Of88PTn/OTs3/zg6NP82NzT/MzYy/zE1MP8uMS7/LDAq5CouKVIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKCsoHyouKrwsLiz/LTAs/y8yLf8yNDD/NTcy/zY3Mv84OTb/Ojo2/z09N/8+Pjr/QEA8/0JCPP9BQj3/Q0I//0VEQP9FREH/RkVA/0hHQv9IR0H/R0dC/0hHRP9ISEP/RkZD/0hHQ/9IR0T/R0dF/0hJRP9HR0X/SEhF/0hIRv9HSEX/SUlF/3NaSv9aPir/ajoW/2w8Ff9uPBf/V0E3/01MSP9JSkf/SEpH/0pKR/9ISUb/SUpG/0pLR/9KSkj/SUtH/0lKR/9KSkj/S0tI/0lLSP9KSkf/SkpH/0lLR/9KTEj/SktH/0pLR/9XUEn/dl5T/3xhVP9xSzD/ZTYR/2U2Ef9kNRH/VS0O/zQdDv9ALiP/XkxA/1tUTv9UVE7/VlVQ/1tYUf9JNSr/Vi4M/2AzDP9dNRL/aUw7/3BUSf9nTD7/RUI7/z4/O/88PTn/Ozs2/zc6Nf82OTT/MzYx/zI0MP8vMy3/LC8q2yovKkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAbEgw3MyySMjMv/S8yLf8wMy7/MTUw/zU3M/82NzP/ODg1/zo6N/88PTj/Pj46/z9APP9BQT7/QkI//0NCP/9DQj7/RERA/0VFQf9GRkL/RkZD/0dHQ/9GR0P/RkdD/0hHRP9HSEX/RkhE/0dIRf9ISEX/SEpG/0dJRf9HSUX/SUpH/0hJRv9JSkb/d15O/15BL/9tPBj/cj4Y/3E9Gf9XQjb/TU1K/0tNSf9LTEj/S01J/0tMSf9MTEn/TE1J/0tNSf9LTEn/S01K/0tNSv9LTUn/TExL/0tNSf9LTUr/TE1J/0xNSv9MTEn/W1JL/3xiV/9/YVP/dUks/2s5FP9qOBP/ajcT/1QsD/80IBH/TDct/19RSf9TT0r/TU1K/05OS/9PUEr/UFFL/1VMRv86JBL/XTIO/1kvDP9dOx7/cFVJ/3BVSP9eSD3/QUM9/z5AOv8+Pzr/Oz04/zk8N/82OTX/NDYz/zM1MP8uMi3/LDAsziswKi0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXDAIDPTEoYUI6NO4yNDD/MTMu/zM1MP81NjL/ODk0/zk6Nf86Ozf/Oz05/z0/O/9BQD3/QEE+/0JCP/9DRED/REVA/0VFQf9FRkH/RUZC/0ZHQv9GRkP/R0hF/0ZHRP9HSEX/SEhE/0hJRv9HSUX/R0lG/0lKR/9ISkf/SEtH/0pLSP9KS0j/S01K/0tNSv96YVL/YkU0/3M+G/93QBr/dz8a/1lBNf9QUU3/TVBL/05QS/9NUE3/TlBN/01QTP9OUEz/TlBL/05QTf9OUEz/TVBM/05QTP9OT03/TVBL/05QTf9OUEz/Tk9M/15VT/+AZlv/gWJT/3hIKP9zPBb/cjsW/3A6Ff9TKxD/NyIV/1M+NP9bUUv/T1BL/0xOSP9OTkr/TU1K/0xMSP9MTEn/Tk5K/0k6Mf9HJQz/XDEN/1oxD/9lRjP/c1lN/21RRP9NRj//QUI9/z9BPf8/QDv/Oz44/zk7N/83OjX/NDgz/zM2MP8vMy7/LTAsty0wLBkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMmGzNIOC/GNjYw/zA0MP8zNTH/NDcy/zc6Nv86OTb/Ojs2/zs8Of8+QDv/QEE9/0BCPf9CQz//RERA/0VFQf9FRkH/RkZC/0ZHQ/9GR0P/RkhE/0dJRf9ISUb/SEpH/0hJRv9KSkb/SkxI/0lLSP9KS0j/S0xJ/0xOS/9KTUr/TE1K/05PTP9NT0z/TU9M/31lVf9nSjn/eUAe/35CG/9+Qhz/W0Az/1NSTv9RUk7/UVNP/1FST/9QU0//T1NP/1BTT/9RU1D/UVNP/1BTT/9QU0//UFNP/1BST/9QU0//UFJP/1FSTv9jWlL/hGtf/4RlVv99SSn/eD8Y/3c+GP92PBb/UyoQ/zklGf9XQzn/W1NN/09QTP9PT0z/TlBL/05PS/9OTkv/TU5K/01NS/9NTUn/Uk1H/zsmGf9aMAz/XDAO/183Gv9uU0j/c1hL/2NNQf9CRD//QEI+/0BBPf89QDv/Ojw4/zk8N/83Ojb/Njg0/zI2MP8uMi3/LjItkS4xLQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfEQMMRTIlmT44MfkwMi//NDYx/zU4M/83OTT/Ojw3/zs8OP88Pjn/PkA8/0BBPv9CQj//QkNA/0RGQf9ERUH/REZB/0dHQ/9HSEP/SEhE/0lKRv9ISkf/SUpH/0lLR/9JS0f/SUtI/0tNSf9NTUr/TU9L/01PS/9OTkv/TlFO/05QTf9PUE3/UFJP/1BST/9RU1D/gWpd/21SQv99QiD/hUQd/4VEHf9cPzH/WFZS/1NWU/9TVlP/VFZT/1RVUv9UVVL/VVZT/1RWUv9UVlL/VVdU/1VWUv9UVlP/VFZT/1RWU/9TVVL/Y11W/4txZf+JaVv/gkwr/31BGv98QRr/ez8Z/1UrEf89KB3/XEg+/1tVUP9SVFH/UFFO/09RTf9QU03/UFFN/09RTv9PUEz/UFBM/05QS/9NT0v/TkA5/0QlDf9fMg//XTIP/2RDL/92W0//b1ZJ/1JJQf9CREH/QUM//0BCPf89Pjr/Oz05/zo8OP82OTX/NDcz/zI2MP8wNC70LTEtXy8yLgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEIsG2hDMifmNDUx/zQ3M/82NzP/Nzk1/zk7N/87PTn/PT86/z9BPP8/Qz7/QEM//0RFQf9FR0P/RkZE/0ZHRP9HSUX/SElG/0hJR/9KS0f/S0xJ/0pMSf9KTUn/TE5L/0xOS/9NUE3/TlFO/09RTf9QUk//UFJO/1FTUP9RVFH/UVNQ/1NVUv9TVFH/VFZS/1RWUv+EbmP/dFpM/4BGI/+KRh//ikcf/14+Lv9eWVX/V1lW/1dZVv9XWlb/WFpW/1laV/9ZW1f/WVtX/1laV/9ZW1f/WVpW/1daVv9ZWlf/V1lW/2RfWf+NdGj/jW5f/4lQL/+EQxz/gkMc/4FDG/9ZLhP/Pike/19LQv9fWVT/VVdS/1VWUv9UVVL/VFVR/1NUUf9SVFD/U1RR/1FTT/9QUk//UVJO/1BRTf9SUEv/Pywf/1owD/9gMw//YjkY/25SRf91W1H/aVFG/0ZHQ/9DRkH/QkRA/z9CPv89QDz/PD45/zk8N/84Ojb/NTg0/zM1Mf8wMy7jLjItMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5JhUySC4a1jgxKv8zNjL/Njk0/zY6Nv84Ozf/Oz45/z5APP8/QD3/QEM//0NEQf9ERkL/RkhD/0dJRf9ISkb/SUtG/0pLSP9LS0n/S0xJ/0xOSv9LTkv/TE5L/05QTP9OUk3/T1JP/1BTUP9SUlD/UlVR/1JUUP9TVFL/VVZS/1RWU/9UWFT/V1hU/1dZVv9YWlb/WVpX/4JxZ/99ZFj/gkcm/49KIf+PSiH/Yj4r/2JdWP9bXVv/W11b/1xeW/9cXlv/XF5b/1xeW/9cXlv/XF5b/1teW/9cXlv/XF5b/1xeW/9mY13/kHlt/5ByZP+OVDP/i0gf/4lFHv+HRR7/YjMW/0AqHv9hTUT/YVxY/1daV/9XWlf/WFpV/1dYVP9WWFT/VlhU/1VWU/9VV1P/VFZT/1NVUf9TVVD/U1VR/1FUT/9QRT//RicR/2Q2Ef9hNBH/ZUMr/3pfVf91Wk7/Wk5G/0ZIRP9FR0L/QUVA/0BCP/8+Pzv/PD45/zo8N/83OjX/Njcz/zI2MP8wMi20LjItEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIhIDAlIyGLg+KRn8Nzcz/zY4NP83OjX/ODw4/zs+Of8+QTv/QEI9/0FEPv9CREH/RUdE/0dIRf9HSEX/SUpG/0tNSf9LTUn/TU5L/01PTP9OUEz/T1JO/1BST/9RUk//UVNQ/1JVUf9TVVL/VFZS/1VXVP9WWFT/V1hW/1ZYVv9YWlb/WlpY/1pcWf9aXVn/XF1a/1xeW/9dXlz/gnJq/4dtY/+ITCn/lkwk/5dNJP9oQCr/Zl9Z/2FhX/9hYl//YWJg/2FhYP9hY2D/YWNg/2FjYP9hY2D/YWNg/2FiYP9hY2D/Zmdh/5J8cf+Wem7/k1k7/5JLIv+SSiL/kEoh/285Gf9BKR3/YExD/2NfWv9cXlv/XF5b/1xfW/9bXVr/WlxY/1pcWf9ZXFf/WVpY/1haVv9YWlX/VVhU/1ZYVP9VV1T/VVhR/1ZVUf9DMCT/XjEQ/2Q1Ef9lOhn/cVVG/3thVv9uV0z/S0xH/0dKRf9ER0L/QkRA/z9BPv8+QDz/PD85/zk8Nv83Ojb/NDcz/zE2MPwwMi9wLzMuBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSNB16SysO+zsuJP81ODL/OTs2/zo9OP87Pjv/PkA8/0BDPv9CRUD/Q0ZB/0VHQ/9HSUX/SkxI/0lNSf9KTkr/TE9L/09QTv9PUk3/UFFO/1JTUP9RVFH/U1VS/1NVU/9UVlP/V1lV/1dZVv9YWlb/WVtX/1pbWP9bXVr/W11a/1xeW/9eXl3/XmBd/19hXf9fYV//YGFf/2FiYP+CdW3/kntw/4ZMLf+cUCX/nVAl/3NDKv9pX1r/ZWdj/2VnY/9kZmT/ZWZk/2ZnZP9mZ2T/ZGdk/2VoZP9laGX/ZWdk/2hpZv+VgHX/nYN5/5hkR/+aUSX/m1Al/5pOJf97QBz/Qigb/19JQP9nYV3/YWNf/2BiXv9fYV7/XmJd/15gXP9eX1z/Xl9c/1xfXP9bX1r/W15a/1xcWv9ZW1j/WFpW/1dZVv9XWVb/V1pV/1JIQf9HJxL/ZzcS/2U1Ev9qRS3/gGZc/3pgVv9fVUr/SUxH/0ZJRf9DRkH/Q0VB/0BCPv8+QTv/PD45/zk8Nv82OTX/Mzgz/zM2MOowNC8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2Ni8EUzopdFYzFPlCJw7/PDYv/zg7Nv86Pjn/PD87/z5BPf9CRD//RkZB/0ZIQ/9FSUX/R0tH/0pNSf9LT0r/TU9M/05QTf9QUU3/UlRR/1JWUv9TVVL/VFdT/1ZZVP9XWlb/V1lX/1pbWP9bXVj/W11Z/1xeWv9fX1v/Xl9d/19hXv9gYl7/X2Jf/2FkYP9hY2H/Y2Ri/2RmYv9lZ2P/Zmdk/311cP+jjIH/iFE1/6NVKv+mVir/hEos/25gWf9rbGj/ampo/2praP9qbGn/a2xp/2tsaf9sbWr/bG1r/21ubP9ub2v/mYd+/6mQh/+hb1f/olYs/6NWKP+jVCj/jEkj/0grGv9cRz3/bGZg/2ZpZf9lZ2T/ZWZk/2RlY/9jZWL/YWRg/2FkYP9hY2D/X2Ff/2BhXf9gYl//XmFd/11eXP9bXlv/W11a/1tcWf9ZWlb/WVpS/0YyJv9hNBL/aDgT/2g9HP92Wkv/gmle/3ZeU/9MTkn/SExH/0dJRf9GR0T/Q0ZB/0FEPv8+QDv/PD45/zg8Nv82OjT/NDcz/zI2MaQyNjALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE9AMzZZOyjpUCsK/0ApF/8+PTf/Oz05/z1APP8/Qj//QkVA/0RGQ/9HSEX/SUtH/0lNSP9LTkr/TlFN/1BRTv9RUlD/UlRR/1NWUv9WWFX/VlpW/1daVv9ZXFj/WVxY/1pdWf9cXlv/Xl9d/15gXf9fYV7/YWJf/2JkYP9iZGH/YmRh/2RnYv9kaGT/Zmll/2ZoZf9mamb/aGtn/2traP9qbGn/d3Vx/6+bkf+KWT7/rVwu/7BgL/+bVjH/c2Na/3R0cf9xcnD/cXFv/29xbf9wcm7/cnRx/3R1c/91d3T/eHt4/5qVjP+8pZv/roZv/6xfMf+vXy7/rFss/5xSJ/9RLhr/WEE3/3BoYv9rbWr/aGxo/2hsaP9pa2j/aGtn/2dqZv9naWX/ZWhl/2RnZf9kZmP/ZGVh/2RlYf9iZGH/YGJe/19hX/9fYV7/XmBb/1teW/9bX1r/VUtE/0spFP9sORX/aTgV/25KMv+HbmP/gmld/2JXT/9LTkr/SkxJ/0lLRv9GR0T/QkZA/0BDPf8+QTz/PD46/zk8OP82OTX/NTcz+DI2MEozNjECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6ODIPYkQ0mVY2H/9PKwj/QC4h/zxAO/88QDv/QEM//0NFQv9ER0P/RklG/0tLSP9LTUr/TVBL/1BRTf9RU1D/U1VS/1VWVP9XWVX/WFtX/1lcWf9aXVn/XF9c/15gXP9cX1z/XmBd/19iXv9iZGD/Y2Vi/2NnY/9lZ2X/ZWll/2hqZ/9oamf/aWpo/2lsav9rbWr/bG1q/21wbf9scG3/bnFt/29yb/90dnP/uKqf/5ZoT/+5aTT/v243/7NmN/+DbmP/pKOb/6Wjm/+jo5r/o6KY/6mnnf+qqJ7/q6me/6yrof+2sqr/y7y0/8CmmP+9cj//vW02/7hnM/+tXi//YzUd/1M6L/9xZl//cHJv/29yb/9vcW7/bm9t/25vbP9sb2v/a21q/2ttav9qa2n/aWpo/2lraP9oamb/Zmhl/2ZoZP9kZ2T/Y2Rh/2BjX/9fY17/X2Je/11hXP9cWlb/RzIl/2Y1E/9sORT/b0Af/3thVP+Lcmj/emRZ/05QTP9NTkr/Sk1I/0hKRv9ER0P/QkVA/0BCPv89QDv/Oj45/zg6Nv82ODT/NDUxwjM2MRIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE0/M0JjRTXxVjIU/0spCv9CNCr/PkE9/0BCP/9BRkH/RUhE/0hKRv9KS0j/TE9L/05QTf9RU0//U1VT/1VXVf9XW1b/WlxZ/1tdWv9bXlr/XWBb/15gXf9gYl//YWNh/2JlYf9kZmL/ZWhl/2ZpZf9pamf/amxo/2psaf9rbWr/bG9r/25vbv9ucW3/cXNu/3p7ef+DhYL/k5WR/6Oinv+wraf/vbiy/8nFvP/Lv7f/pn1n/8Z4Pv/QgUL/y31A/7iqof/b087/2M7J/9XLxf/VysT/1cnE/9fMxv/Zz8r/3tTO/97Vz//SxL3/z5Ri/8+CQ//Lf0D/w3U6/4JFJP9XQDT/t6ql/8K6tv+3sq7/r6un/6Ohnv+VlJH/hIWC/3l6eP9wcm//b3Fu/25xbP9tcG3/bW9s/2xtav9sbWn/aWxp/2lqaP9maWb/ZWhk/2VnY/9iZmH/YmVi/2FjYP9VS0T/TywU/3A7Fv9vOhb/dlI7/5J6cP+Kcmb/Y1xU/05STf9NT0v/SU1I/0dKRf9FSEP/QkVA/z9CPf89QDv/Oj04/zg6Nv81NzP8MzcyYDQ3MwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5ODMSYUY2nGBBL/9TLQr/SysP/0Q6Mf9CQz//REZB/0VJRf9JS0j/S01J/05PS/9PUk7/UVRQ/1VWU/9WWFb/WFtY/1pcWf9dYFz/XmFd/2FjYf9hZGD/Y2Vh/2VmY/9laWX/aGpm/2lsaf9rbWr/bG9r/21wbf9tcGz/cnRy/4CCf/+WlpP/rKuo/8C8uf/Mx8T/1MzI/9jOyf/Yzcn/18zH/9jLxv/Yy8b/3NLO/93Tz//OtJn/2JFP/96XTv/clEz/1cGx/+HUzv/aysL/1sG2/9O8sf/Tu7D/2MC1/93Kwf/i08z/49XO/97BkP/folX/3ZlP/9eORv/LfD//pG5Q/87Cvf/Qwrz/0MC6/8/Buv/Qwrv/0MG8/8/Bvf/Owr7/y8G9/8S9uf+0sa3/oqGd/5CQjP99fnv/cXJv/29wbf9ucG3/bW9r/2ttav9pbGj/aGpn/2dpZf9lZ2P/ZGZi/2FeWf9JMiX/bzoW/3I7Fv93RiX/h21h/5V9c/99al//UlVP/09STv9MUEv/SU1J/0dKRv9FSEP/Q0ZA/0BDPv89QDv/Ojw3/zc6Nf81ODPPNDczFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEI7NEBqSzjvWz0p/1QtCv9LLRT/Rz84/0RFQf9GSUT/SUtH/0tOSv9OUUz/UFNP/1NVUf9VV1T/VlpW/1ldWf9cX1r/XmBe/2FjX/9iZWH/ZGdi/2VnZP9naWX/aGpn/2ptaf9rbmr/bnBt/3R0cv+EhYL/oaCd/726tv/Qysb/2tLN/97Tz//g1ND/4NTP/9/Uzv/bzsj/2Me+/9W+s//QsqL/zKmW/8uijP/PpYv/2bWX/92sdP/lsF7/6sJn/+i/Zf/isGj/259l/9GOWP/He0r/wnJD/8RzQv/LfEb/1Y9S/96jYP/lvG7/6MFr/+nGa//nwWj/4atY/9aPTv/NlWf/yJZ0/8KLbP/BjnT/xZuF/8mmlf/MsaP/z7mw/9G/t//UxL//1cbA/9TFwP/TxcD/0cfB/8/EwP/Evbr/sq6r/5eXlP9/gn7/c3Vx/21vbP9rbmn/amxp/2drZ/9laGT/Zmhj/1ZKQ/9ZMRb/dD0Y/3I7F/9+W0b/nYR7/5F4bf9jXlj/U1RR/09STf9MT0v/SkxI/0dKRf9FSEL/QkZA/z9CPv88Pjr/Ojs3/zc5Nf42ODRlNjk0AwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1ODUNTz81j2tLOf9WOCH/VS4K/0otF/9JQz3/R0hE/0lMRv9MT0r/T1FN/1BTT/9TVVL/VVlU/1hbV/9aXVn/X2Fc/19iX/9iZGH/ZGZj/2ZoZf9oamf/aWxp/2xva/9vcm7/eHp2/5WVkv+4trL/zsjF/9vSzv/g1M7/4NTQ/+HUz//f0Mr/2MO6/9Kyo//Ln4n/xI1w/759XP+6bkf/t2U5/7diNP+6ZDT/wGw6/8t6Qf/YjUr/46dZ/+zMbf/t0nH/7dFw/+rEaP/gnVL/1olH/8x7Qf/HcTr/yXY9/9GDRP/bk0//5rFg/+vLb//rym7/68tv/+vLcv/oxGr/3p1S/9KFRv/Idj3/wGw4/7tmNf+4YjT/t2I0/7ViNv+1Zz3/uHJO/7x+YP/AjXP/xp6L/8ywov/SvrX/1cW+/9XFwP/Vxb//08fA/9DGv//EvLj/rKil/4uLiP9zdXP/bW9s/2lraP9naWb/YF1Z/0wwIf94Phf/dT0X/3xMLf+Tem7/noZ8/31sYv9UV1P/UVNP/09RTv9MTkr/SkxH/0dJRP9ERkL/QEQ//z1BO/87PDr/ODo2/zc4NMc2ODQPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADc5NTFcRjfjaEo6/1Y1G/9YLwz/SzAc/0tHQf9IS0j/TE1K/05RTf9SVFH/VFdT/1ZaVv9ZXFj/W19a/15hXf9hY2D/ZGVj/2ZnZP9pa2f/a21q/25ybv98fnr/np2a/8C8uP/Xz8v/3tPP/9/Szf/e0Mr/28rD/9G1pv/JoIv/v4dq/7ZvSv+zZDr/s18y/7RfMP+3YTL/umIz/7tkM/+8YzT/vGQ0/75nN//EcDr/z4BE/9qSTf/lrV3/7tJz/+/Vdv/u1HX/68lu/+CeVP/Wikr/zHpB/8ZzPf/Idj//0YRG/92WUf/ntWT/7c51/+3PdP/tz3X/7M52/+nIbv/fn1T/1IlI/8t6QP/Ebjr/vmg2/71nNf+9ZTT/vGU0/7plM/+5YzL/uGIy/7VhMP+xXzD/sF80/7BkPP+zc0//u4lu/8Sciv/LsaT/08G5/9LCuv/Swrz/0cO7/8m+uf+xrKj/kZGO/3R3c/9tb2v/VEQ7/2Q0Ff94Pxn/dj8a/4hoVv+kj4b/l39z/2FeWP9VV1P/UFNP/09QTf9MTkn/SUxH/0ZJRP9CRkL/P0M+/z5APP87PDj/ODo2/zc5NEw2OTQBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3OzYHPT02eWVLOv9oSjv/WDQX/1owDf9MMR7/TkpF/0tOSv9PUk7/UlVR/1VYVP9XW1b/W11Z/11hXP9gYl//YmRh/2ZoZf9na2b/bG9r/3l7d/+VlZP/vru3/9jQy//e087/3tHK/9vMxv/RuKv/xZ2H/7h9Xv+yaUL/r10x/7JdL/+1YTD/t2Iy/7hkM/+7ZTP/umQ0/7tkM/+8ZTX/vWM1/7tiNP+6YzX/u2Q1/79tOP/Edj7/zH9D/9WJSf/ltGL/7tJ0/+7Rdf/mtGL/xXQ+/6pdMv+ZUy3/iEko/4hJKP+uYjb/3ZVQ/+WoXP/ryW//7tB6/+fJcf/WnVf/0YtM/8l7Qf/BdD7/uGo5/7VkNf+2ZTT/uGM0/7lkNP+6ZTT/u2Uz/7xmNP+7ZTT/umQz/7llM/+3YzL/t2Ey/7RgL/+wXS7/rFot/6peNP+raUT/tYNm/8OfjP/Lsqf/0L2z/869tf/Ovrf/x7u1/6+noP98cmv/UTEd/3xBGv97QBn/hFY6/6WPhP+oj4X/fHBn/1dZVv9UVVP/UFNP/09QTf9LTUn/SEtG/0RIQ/9BRUD/PkE9/zw/Ov86PDj/Nzo1rDg7NwYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADo9OB5EPznGbE8+/2ZJOf9bMxT/XTEP/00zIf9QTkn/TlJO/1JTUf9WWFX/WFpY/1teW/9eYF3/YWRf/2NmYv9naGX/bXBs/4GBff+tq6b/0MnG/93Uzv/c0Mn/18e+/86xov++kHj/r3BO/6pcMf+uWy3/s18v/7ZiMf+4ZDL/uGUz/7plNP+7ZTP/uWQz/7hjM/+0YTL/sGAz/6NZL/+UTyr/gkYm/3I8Iv9mNx7/XzMd/1syHf9XMh//UjMi/71tQv/kqVz/5q1d/96ZU/9xRjD/WD0u/1E3K/9UPDD/bVZL/7GAYf/Zjkz/4Z5U/+WpWv/jr1//oGA4/2RBMf9dPCz/UjIj/0stHf9IKRv/SSkZ/1IuGf9cMRz/Zzge/3U/Iv+FSCb/mVIr/6hbL/+xYDL/s2Iz/7ZjM/+2YzL/t2Iz/7VhMf+1YTH/sWAw/7BdLf+qWiv/pVYq/6ReN/+tdVf/u5R+/8itof/NubH/zruw/8u6sf9xW1D/dDsZ/4NEG/+FSyT/nIJx/7Oelv+bhnv/W11Z/1ZZVf9TVVL/UVNQ/09QTP9KTUn/RkpF/0NHQv9BRD//PkE8/zw+Ov85PDfvODw2KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6PTgBOj04TUhDO/5xU0P/ZEc3/100Ef9fMg7/TzUj/1RRS/9RVFH/VVlV/1hbV/9bXln/XmFd/2JkYP9lZ2P/cXFr/4qFf/+6sKn/183G/93Qy//XycH/zrao/7uPdv+qa0j/oVQo/6lYKv+wXS3/tWAv/7hjMv+5YzL/uWQ0/7ZjMv+wXzH/q1wu/5dRKv+CRiX/bjwg/1oxG/9GJhf/PCQX/z4oHf9GLyX/Tjgu/1lDOv9kUEX/dGJY/4x5cP/Kw7//vKGN/9qUU//gmVT/2Y5O/4VhUv+emJP/l5OP/8C6tv/YysP/1JZ0/9eFSP/dklD/4JtU/79sPf97WEn/s6CW/7OtqP+kmpL/kYJ6/39vZv9yYVj/ZFBI/1pFPP9TPDL/SzMp/0MsIv87JRr/PCIW/0soF/9gMx3/dD4h/4RIJP+ZUir/p1ov/61dL/+xXi//tF8w/7BeL/+vXCz/q1os/6ZXKv+eVCf/nFUt/6hyVP+7loP/y7as/7Kdkf97RSj/kEsf/5FKHf+cdFv/vaui/7WflP97dGr/Wl1Y/1VZVf9TVVL/TlFO/0tPSv9JTEj/RUpD/0NGQf9AQz7/PT87/zs9OP84OzZ2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADw+Ow07PzqYTkY9/3dXR/9kRjb/XzQQ/2I1D/9RNSP/VlNO/1VXVP9ZW1j/XF9b/2BjXv9kZWL/bmxo/4yDfP+8raT/2MrD/9nMxP/TwLf/wZ6K/6pzVP+bUij/olMn/6pZKv+vXi7/s2Av/7djMv+1ZDL/rmEw/6NaLf+MTif/cD4h/1QvGv9BJBf/PScc/0YvJf9QOzH/YExD/3JiW/+Cdm//ioN+/5CLh/+Uko//lpaU/5WXlP+XmZb/m52a/8vBvP+xnpH/zoNM/9qKSv/Wgkf/gFQ//5WUj/+qq6j/2MvF/9Cgif/Rc0D/1X5F/9eFSf/Fd0H/aEIw/5+JgP+wsa//qaqo/6Gjn/+Zm5j/k5aT/5OVkv+Sk5D/kZKQ/5CPjP+LiYX/h4F7/4F3cf92aF//Z1RM/1ZANv9KNCr/Qiwh/z0lGf9EJxb/XDIc/3lBIv+PTib/o1cr/6lbLf+vXC3/rFws/6haK/+jVyn/nFIm/5dPJP+fYDn/s4hs/6hsR/+iViX/pVUk/6prQv+6qaH/xbOr/56OhP9gY1//W15a/1ZZVf9TVVH/TlJM/0tOSv9ITEb/RUhC/0JEQf89QT3/PUE9/zo8OMg4PDgHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPD47IT5BPNdTS0H/fFpM/2ZIOv9gNA//ZTYR/1Q2JP9aV1H/WVtX/11fW/9gY2D/aWlj/4V7c/+1opn/1MS9/9PEvf/LtKj/tYx2/5xcOf+WTST/nVMm/6VWKP+sXCz/s2Ew/7BgL/+oWy7/llIp/3RBIf9VMBv/QSYY/0AqIP9OOS//Y1BH/3ZnYP+Gfnn/joqF/5KSjf+RlJD/j5OP/5KTkP+SlJH/kpOQ/5OWk/+Vl5T/lJWT/5iZlv+Ym5f/uLKt/6+ck/+8cUb/1n1G/9R5Qv+JUzj/kIeC/9PKxv/Qtan/0XdH/9N2QP/VeUP/znZA/3hEKv91XFH/oZ6b/6Gjof+foJ3/m52Z/5iamP+XmZX/lJeT/5SVk/+Rk5D/kZKP/5CTkP+Qko//jpGO/42QjP+QkY//jY2J/4qIg/+EfXj/emxm/2lYT/9WQTj/RjAm/zslGv9FJxf/XjMc/3tCIv+UUCf/oFYq/6ZaKv+lWSr/o1Yp/6NWKf+oWSn/r18q/7ZiLP+6ZSz/t2Iq/8Gqkv/Qwrz/vayg/4aAdf9iZGD/WVtY/1VXUv9RVFD/TlFM/0tNSP9ISUb/REhC/0JFQf9AQj7/Oj859To9OTgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD1APQE9QT1NQEM+/1ZMQ/+BYFP/aE08/2U2Ef9qNxT/WDcl/2BaVP9eYVz/YmNg/3lya/+mlIj/zLuy/9HCuv/GrqD/rYFo/5RSLv+RSiH/lk0k/55TJ/+mWCr/q1os/6JXK/+OTif/azsf/00rGf88JRv/SjQr/19NRP91aWP/iIJ9/46Oif+SlJH/jpGN/4+Rjv+Qko//kZOR/5KWkf+TlpL/lZeT/5SXlP+Vl5T/lpeW/5eZlv+WmZb/l5qX/5mamP+qp6P/u6af/6pnRf/UeUL/1nhC/6FcO/+qnpj/2cfB/9aNaf/VdED/1XZB/9V4Qv+gWTL/VTsx/4+Efv+cn5v/m52a/5qbmf+ZnJn/mJuY/5aZlv+XmZb/lZeV/5WXlf+UlpL/lJWT/5OVkv+SlZH/kZSQ/5GTkP+PkY7/jZCN/4yOjP+Mjor/jI6L/4mLhv+GgHv/fHJr/2dWTf9SPTP/QSwi/zwkF/9SLhn/cDwe/49NJv+eVij/rWEu/7VmLv+9bC//y4RB/9KZSf/Kgzz/xpFi/8q5rv/AsKj/uqic/5yPf/9sa2L/VlhW/1NWUv9QU07/TVBL/0lOSf9FSUX/QkZC/0BDPv88QDv/Oj45fQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEM+CkBDPYxBRUH/WU9H/4ZoWv9uUkH/bDkT/3I8E/9hPCX/ZWBY/29sZv+Whnr/wKuh/9DBuf/Cq5//q4Bo/45OKf+NSCD/kkwh/5dOJP+eUyf/nFMm/45LJf9uOx7/TCsZ/zsmHP9OOjD/ZlZO/4B5cv+KiYT/jpGN/42PjP+PkY3/j5GP/5GTkP+RlJD/kpSR/5OVkv+UlpP/lZeV/5aYlf+XmZX/l5mW/5eZlv+am5n/mZuY/5qdmf+bnZr/m5yZ/6Cinv/Esaf/m2ZL/9N4Q//Ye0T/vWk//8Ozrf/QrJv/1nRA/9h5Q//YeUP/xG09/1k1JP95Z1//nJ6b/52fnP+dn5z/mpya/5qcmf+anJn/mZuY/5mbmP+YmZf/l5mX/5aZlf+Wl5X/lZeU/5SXk/+TlpL/k5WS/5KUkf+Rk5D/kJKP/4+Sjv+NkIz/jZCM/4yNiv+KjYn/iYyJ/4eGgv9/eHH/b2FZ/1dEO/9DLiT/PCQX/1cwGv+FRiD/rV4t/8V4OP/YpFH/3K5X/9efTP/Nhj7/wXpI/7yae/+0n5L/q5WL/6eTg/9+dGn/WFtV/1NUUf9PUk7/S09K/0hLR/9FSET/QkRB/z5CPf47QDq9O0A6AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABCREEXQkVBxkVIRP9dVEv/jW5h/3dbSv91Pxb/f0MY/25DJv+KdWn/tqSZ/8/AuP/Fsqj/r4t2/49UMf+IRh//jUcg/5JLIv+YTyT/jUoj/3g/Hv9VLxr/PCYZ/0k1K/9kVE3/gXl0/4uLh/+Ljor/i42K/42QjP+PkY3/j5KO/5GTkP+Sk5H/k5WS/5SWk/+Vl5T/lpmV/5eZlf+Ympf/mJqX/5qcmf+anJn/m5yZ/5yem/+cnpv/nZ+c/56fnP+eoJ3/nqCe/8O0rP+Ublr/0XpE/92BSP/Rd0T/x6qc/9uNY//bfkb/3H1G/9l6RP+DSSz/Yko//5iSjf+foZ7/n6Ce/5+gnf+eoJ3/np+c/52fnP+dnpv/nJ6b/5qcmf+ZnJn/mZuZ/5ial/+Xmpb/lpmV/5WYlP+Vl5T/lJaT/5SVkv+TlJL/kZSR/5CSj/+Qko//j5CO/42PjP+LjYr/io2J/4qMiP+IiYb/hoeD/354c/9yZFz/W0Y8/0syJ/9TMR7/hEkl/8iCQP/aq1P/2KJN/9SXSf/Fdjb/r1om/6VqRf+jgGv/noZ6/6SMfP+TgG//ZGBY/1FUUP9OUEv/Sk1J/0dKRv9ERUP/QURA/z1BO+07PzshAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAENGQTNER0LvSUxI/2BXT/+Ud2n/hGVU/4FFGP+QSxr/gUwo/8Kyqf/Wy8T/w6uf/6FtSv+LRx7/i0cf/4xIIP+SSyL/hEQf/2g3Gf9IKRf/PSog/1hGPf94bWj/iIaC/4mMiP+KjYn/jI6K/4yPi/+Oj43/kJKP/5GTkP+TlZL/lJaT/5aXlP+XmJX/l5mW/5ial/+Zm5j/mpyZ/5ucmf+bnZr/nJ6c/5yfnP+eoJz/nqCe/5+hnv+foZ//oKKf/6Cin/+io6H/w7ey/6GGd//RgUz/4pBR/+GMUP/emWr/4YxO/+GLTf/ghkr/wG0+/1M1Kf+HenP/oqOh/6GjoP+ho6D/oaOg/6CioP+gop//oKGf/5+hnf+eoZ3/nZ+d/52fnP+cn5z/nJ6b/5udmv+anJn/mZqX/5ialv+XmZb/lpeV/5WWlP+UlpP/k5SS/5KUkf+Rk5H/kJKP/46Qjf+Nj4z/i46L/4mMiP+Iiob/h4mG/4eKhv+LjIf/joV+/4NwZP9oTkH/Wzoo/7ZzPP/brFX/16JO/8l/Ov+zXSf/nlEh/4lIHv+MYEX/knRl/5qAdP+dgnD/cWRa/1BSTf9MT0r/SUxI/0VIRf9CRkH/QEM+/D1APF09QTwBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABER0IEREdCXEZJRP9LT0r/ZFtS/56Cc/+Uc2L/jEwf/6ZZH/+5cTr/zb2q/8q0lv+oXCz/mlAi/5FKIf+OSSH/gEId/2MzGP9DJxf/QzAm/2JTSv+Ae3X/iIqI/4eKhv+KjYn/jI+L/42OjP+PkI3/kJKO/5GTkP+TlZL/lJaT/5WXlP+WmJX/l5mW/5ial/+Zm5j/mpyZ/5udmv+dn5v/nZ+b/52fnP+foZ7/n6Ge/5+inv+hoqD/oaOg/6Gjof+ipKH/o6Wj/6eopv/Aubb/uqad/8+LVP/pqWD/66xh/+qrYf/pp1//56Ba/+GRUv97Ry3/cltS/6Khnf+kpaP/pKWj/6Slov+jpaL/o6Wi/6Kkof+ipKD/oqOh/6Cjn/+gop//n6Ge/56gnf+eoJ3/nZ+c/5yem/+cnZv/m52a/5qcmf+Ympf/l5mW/5aYlf+Vl5X/lZaT/5KVkv+Sk5D/kJKP/4+Sjv+PkY7/jI6L/4qNif+Ii4f/iIqH/4uNiv+Sk5H/nZ+c/6mlnv+ikIb/fFdA/9KWSv/Vmkv/xXU2/69cJ/+cUCH/ikce/31BG/9/TCr/i2dU/5J4bP+dfmz/eWVZ/05QTP9LTkn/SEtH/0NHQ/9AQ0D8PkI9kz9DPQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAERHQwlER0OKSUxI/1BTT/9pYlj/qIt7/6aFc/+XVSf/yn4v/9ynSv/ar17/xHUv/7JeJf+lVST/jkgg/2Q0F/9FJRb/QzAn/2VXT/9+fHf/hYiE/4eJhf+Iiof/io6J/4yPi/+OkY3/j5GO/5CSj/+Rk5H/lJWS/5WXlP+WmJX/l5mW/5ial/+ZnJn/mp2a/5udmv+cnpv/nZ+c/5+gnv+foJ7/oKGe/6GjoP+ho6D/oqOg/6Okov+jpaP/pKWj/6Wmo/+nqab/rK6r/8C8uf/UxL3/z5Rj//DCbv/yyHP/8sh0//HBb//utmv/yoNL/2RFN/+clI3/qKqn/6eppv+mqKX/pqik/6WnpP+lp6T/paak/6Smov+kpaL/o6Wi/6Klof+ho6D/oaKf/6Cin/+foZ//nqCd/56gnf+dn5z/nJ6b/5udmv+Zm5j/mJqX/5eZlv+WmJX/lJeU/5SVkv+TlZL/kZSQ/5GSkP+PkI7/jI6L/4qNif+Ji4j/io6J/4+Qjv+WmJT/oaOg/6utqv+SgXn/qF4x/8d6OP+5ZS//nFAk/3g+Gv+CQxz/fkIb/3k+GP92Pxr/gllB/4xwY/+Yd2b/fWRV/0xPS/9KTUj/RUhE/0JGQP4/Qz6/P0I9DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARklFDkZJRbpMTkv/VVhS/2toYv+vk4L/tpWC/7dvO//bnz3/3qc+/9+pQP/QiDb/uWEp/4pGH/9QLBf/RTEm/2JTS/99enb/goSC/4WHhf+Iiob/iIyI/4qOiv+Nj4v/jpGO/5CSj/+SlJH/k5SR/5OWk/+Wl5X/l5mW/5mal/+ZnJj/mpyZ/5yem/+dn5z/nZ+d/56gnv+goZ7/oaKg/6GioP+jo6L/o6Wi/6Olov+lpqT/paek/6anpf+mp6X/qKmm/6yuq/+1t7X/w8TC/+HV0f/Un3v/9dmO//jhp//44ab/99qP//HKc/+QVjn/nIJ2/7W2s/+tr6z/qquo/6mqqP+oqqf/qKmm/6epp/+nqab/pqil/6anpf+lp6T/paak/6Smov+jpKL/oqSi/6Kjov+hoqD/oKOf/6Chnv+foJ3/nZ+c/5yem/+bnZr/mpyZ/5ibmP+XmZb/l5iV/5aZlf+UlpP/k5SS/5GUkf+PkY7/jZCN/4yNi/+LjYn/jI6K/4+Sjv+Wl5b/n6Ce/5iTjf9/TjX/uGkv/7BgKv+cXzn/XUEx/0YlEv9tOBf/ej8Z/3c+GP9zOxb/e08y/4doWv+Sb2H/dl9Q/0pOSf9HSkX/REdD/0FFQORAQz4nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIS0YaSUxI3E9STv9ZW1f/gHRq/7+uoP/GtKP/zZNN/9yjPf/boj3/36hA/8l5MP9zOxr/UDUl/2lZT/+Bfnj/goOB/4OFgf+GiIT/h4qH/4mMif+KjIr/jI+M/4+Rjv+RlJD/kpSS/5OWk/+Wl5T/lpmV/5ial/+am5n/m52a/5udm/+dn5z/nqCd/5+hnv+gop//oaOg/6Kkof+jpKL/o6Wj/6SmpP+mqKT/pqik/6appv+oqab/qKqn/6iqqP+rrKv/srOx/77Avf/Nzsz/6OHe/+LStf/57N3//PHl//zx5f/77d//5bl1/5BoVf/Fwb7/vr+9/7O1s/+trqz/q62q/6qsqv+qrKn/qqyp/6mrqf+pq6j/qKqo/6iqp/+oqKf/p6mm/6anpP+lp6T/pKaj/6Slo/+jpKH/oqOh/6Gjof+goZ//n6Gd/52fnf+cn5z/nJ6a/5ucmv+ZnJj/mJqY/5eYlv+Vl5T/lJaT/5KUkf+Qko//j5GO/46PjP+Mjor/jI+L/46Pjf+SlJL/k5WS/21SRP+iWSn/p1wp/6FiOv+smI//fGxk/z0lGP9VLBL/dDwZ/3Y9F/9yPBX/dkgp/4FiU/+Lalv/a1dM/0lMSP9GSUX/Q0dB9kFGQE0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAElMSDZMT0vxUlVR/2diW/+vmYj/zr+5/8qtiP/XnkX/26E+/92jP//Ukzn/dEUk/2lRRP+Phn3/kJOO/4WIhf+EhYP/hYeD/4eKhf+IjIj/ioyK/42OjP+PkY3/kZOR/5SWkv+UlpT/lpiV/5eZlf+Ympf/m52a/5udmv+dn5z/np+d/5+hnv+gop//oaOg/6Kkof+kpqP/paek/6aopv+mqKb/qKmm/6mrqP+pq6j/qauo/6usqv+rrav/rK2r/6+xr/+4ubf/xcfF/9fX1v/z7uz/8uvn//vz6f/89On//PPp//nx5v+kfF7/1Lqr/9bX1v/Fx8X/uLq4/7Gzsf+vsa7/rrCt/66vrP+ur6z/ra6s/6utqv+rrav/q62q/6mrqf+pq6j/qaqn/6eopv+mqKb/pqel/6Smo/+kpqP/o6Wj/6Kkof+ho6D/oKKf/5+hnv+eoJz/nJ6c/5yemv+bnZn/mpuZ/5ial/+WmJX/k5WS/5KTkf+Rko//jpKO/42PjP+Mjov/i46K/4uNiv+LjYr/bV9X/4NHJf+lWSn/mU8k/6GDc//EtKz/k4V6/0EuJP9CIxD/aTcW/3U9F/9wOxb/ckMk/35gT/+FZVb/XVJH/0hMR/9GSET3QkZCdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAS09KVU9RTf1YV1L/mH1u/7+to/+8noH/w3g2/9ibPP/coD7/36hA/8iCO/+KbV7/qaeh/5yfm/+PkI7/hYiF/4aIhP+GiIb/iIuI/4uNiv+Nj4z/jpGN/5CTkP+Ul5P/lpeV/5aYlf+Ympf/mZyY/5qcmf+eoJ3/n6Ce/6Cin/+hoqD/oqSi/6Olov+kpqT/pqek/6eopf+nqab/qKqn/6qrqf+qq6n/q6yp/6yuq/+srav/ra6s/66vrf+vsK//sbOx/7u8uv/Jy8n/5uXj//r29P/68+3//PXs//z16//89Ov/9e7m/7SMev/j4uD/29za/8nLyf+7vbv/s7Wz/7Gzsf+wsq//sLGu/7Cxr/+vsK7/rrCt/62vrP+tr6z/ra+t/6utq/+rrKr/qqyp/6mrqf+pqqj/p6qo/6epp/+mqKX/pael/6Slov+ipKL/oaOg/6Cin/+foZ3/np+c/52fnP+bnZr/m5yZ/5mbmP+WmJT/lZeU/5SWkv+QlI//jpCN/4yOjP+Ljov/iYuH/4iKhv96dXD/aD8p/6RXKv+dUSX/mWhN/7ahmv++raP/hXpy/008M/85IRP/XDAT/3I8Fv9tORT/cEIj/31gUv98Xk//Tk1G/0dKRvpER0KXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABNUEt1UVNP/3pmWv+qk4b/rI96/6RdLf+/byz/2Jw8/92lQP/gq0P/x39A/5uEdv+nqqb/mpyZ/4yOi/+HiYb/h4mG/4mLiP+LjYr/jY+M/4+Sjv+RlJD/lZeT/5ealv+Zm5j/mpyZ/5udmv+dn5v/nZ+c/5+hnv+ho6D/oqSh/6Olov+kp6T/pqel/6eppv+oqaf/qaqo/6qrqf+rrKr/rK2r/6yvq/+urqz/rrCt/66xrf+wsa//sLKw/7Kzsf+1trT/vb68/8vMyv/z7uz/9e3o//z17P/99u7//fbu//327f/48er/5t/O/+jo6P/c3Nv/zM3L/76/vf+3uLX/tLWz/7K0sv+ztLL/s7Sx/7Kzsf+xs7D/sLKv/7Cyr/+vsa//rrCt/62vrf+trqz/rK6r/6utqv+rrKr/qqup/6mqqP+oqaf/p6im/6anpf+kpqP/oqWh/6Gjof+goZ//n6Ge/56fnf+dn5v/m52a/5mbmP+YmZf/lpiW/5WXkv+Rk5D/jpGO/42PjP+LjIr/iYqI/4OGgv9fRDb/mVIn/6FVKP+ZWDP/qZKI/72rov+ZkIj/bWtn/1pMRf86JBn/TigP/3A7FP9sORT/cUYp/39iU/9uVUj/SExH/EZJRLcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE9STpNgWVH/l3lp/5yBcf+PVC3/mFEf/5pTIP+MUSH/zos3/9OOOv/CcTj/jWpZ/56cl/+TlpP/i42K/4eJhv+IiYf/i42K/42PjP+QkY7/kpWR/5WXlP+XmZb/mpuY/5qdmf+cnpv/nZ+c/5+gnv+gop//oqSh/6Olo/+lpqT/paek/6eppv+oqaf/qauo/6qsqf+rrar/rK6s/62vrP+ur63/r7Gu/7Cyr/+xsrD/sbOx/7K0sf+ztLL/s7Sy/7a3tf+9vrz/2dfV//Tt6v/13sb//PLn//348f/9+PH//fjx//z27//m4c//5uXk/9ra2f/Ly8r/v7++/7i5t/+1trT/tbe0/7W2tP+1trT/tLWz/7O1sv+ztLL/s7Sy/7GzsP+xs6//sLKv/6+xr/+usK7/rq+t/62urP+srav/qqup/6mrqP+oqaf/p6im/6anpP+lp6P/o6Wj/6Kkov+go6D/oKGf/56hnf+dn5z/m52a/5qbmf+Ympj/l5mW/5SWk/+SlJH/j5GO/4yPjP+KjYr/iIuH/2VXTf+GSib/pVgq/5lQJ/+dgG//v6yi/62ck/90c3D/bG1q/2FWUf8/LCL/RSQN/206Ff9qOBP/cksx/35fT/9YTkX+R0tGzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU1RQqXxkVv+Xe2z/hFc5/4JEGv+ERRv/VjUg/39cSP+hXS//vmgu/7llL/+HWkL/kYuH/4yQjP+Ii4j/h4mH/4qLif+OkI3/kJKP/5KUkP+Vl5T/l5iW/5mamf+cnZr/nJ2b/52gnf+foJ7/oKKg/6Kkof+kpqP/paal/6eopv+oqab/qaqo/6qsqf+rrar/rK6r/62vrP+usK3/sLGu/7Cxr/+xs7D/srSx/7O0sv+ztbL/tLaz/7W2s/+1trT/t7i2/72+vP/p4t7/6tfQ//fTlf/75rr//fLo//327v/99u7//PDm/+PMpf/e29n/1dXU/8fIxv+9v73/uru5/7i5tv+3ubb/tri1/7e3tv+2t7X/tra0/7W2tP+1trP/s7Wz/7K0sf+ys7H/sbOx/7CysP+wsa//r7Gu/66wrf+trqz/q62q/6qrqf+oqaj/qKmn/6aopf+lp6T/pKaj/6Okov+io6H/oaKg/5+inv+dnpz/m5ya/5qcmf+Zm5j/lpiV/5SVkv+SlJH/kJKP/4yPi/+KjYn/dW5o/3NEKf+pWiv/n1Qn/5hsVP+3pJr/uqWb/4F9d/9sbmr/aWxp/2ZeWP9EMij/QSMO/205FP9pORX/c1M//3FVRv9KTUnbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABcV1C+i2tb/4ViTf91Phn/czwY/0coFf+BZFT/lHFh/4JOMf+vXCr/rFwq/4dSM/+CeHL/iYuI/4iKh/+KjIj/jI+L/5CSjv+SlJD/lJaT/5eZlv+Ym5j/mp2b/52fnP+eoJ3/n6Ge/6GjoP+jpKL/o6Wi/6WopP+nqab/qaqo/6qrqP+qran/rK6r/62vrP+usK3/r7Gu/7CysP+ys7H/s7Ow/7O1sv+0tbT/tbW0/7W3tP+2uLX/t7i2/7e5tv+5urj/zcvJ/+3g2//ouJz/+MqL//rYmf/74qz//OjI//znxf/74Kr/5cSJ/9HKx//Oz83/xMXD/76+vf+7vbr/ury5/7q6uP+5urj/uLq4/7i6t/+4ubb/uLm2/7a4tv+2t7X/tra0/7S1tP+ztbL/srSy/7Gzsf+xs7D/sLKv/66xrv+usK3/rK2r/6usqf+qq6n/qaqn/6eppv+np6X/paek/6Omov+jpaL/oKSg/6Chnv+cn5v/m52a/5qdmf+Ympf/lpiU/5SVkv+Sk5D/j5GO/4yOi/+FhIH/aEYz/6dZLP+oWSv/n2NA/6+akP+9qqH/j4Z//25xbf9rbWn/aGpm/2RgW/9GNCv/RCQM/2o4E/9rPx//eFhJ/1ZNReUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHBdUdCHZlj/d0cm/3A7F/9EJRP/Wk1G/4xyZf+La1z/bkg0/59TJ/+hVSf/kFAt/3NgVf+IiYb/ioyI/4yOiv+PkY7/kpSR/5SXk/+XmJb/mZuY/5qemv+dn53/n6Ge/6GjoP+ho6H/o6Wi/6WmpP+lp6X/p6mn/6mrqP+rrKr/rK2r/62vrP+vsK3/sLGu/7Cyr/+xs7D/s7Sy/7S2s/+1trP/tbe1/7e4tv+3uLb/t7m2/7m6t/+5u7j/uru5/7q7uv/h2dT/3sO3//Grdf/3wYH/+MuN//PMi//er2r/+dOS//nQkv/tuHv/uayk/8fHxv/Cw8H/vsC9/7y+vP+8vrz/vL27/7u9uv+7vbr/u7y6/7q7uf+6u7n/ubq3/7e6t/+4uLf/tre2/7a3tP+1trT/tLWz/7O1sv+ytLH/srOw/7Cyr/+vsK7/rq+t/62urP+trav/qauo/6mqp/+nqqb/pqml/6Wno/+jpaL/oqOg/56hnv+dn53/nZ6b/5qcmf+Xmpf/lpiU/5SWkv+Rk5D/jpCN/4yQjP9qU0f/m1Uq/7FiL/+kWy3/qZKG/7+tpv+klY3/dXZy/25wbP9pa2f/ZGZi/2RgWv9EMij/TCgO/2g3E/9tSTT/Z1BB8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfGBQ3XpXQv9wOxb/TSkS/05COv9xc27/g3Rq/4NlVv9pSzv/ikci/5tRJf+aUyn/bU9B/4aDf/+KjIr/jo+N/5KTkf+UlpT/l5mW/5mbmP+bnJn/nJ+d/5+in/+ipKH/o6Oi/6SlpP+mqKX/pqmm/6eqp/+prKr/rK6q/66urP+vr67/sLGu/7KzsP+ztLH/srWx/7S1sv+2trT/t7m2/7e5tf+4ubf/ubq4/7m6uf+5u7j/vLy5/7y9u/+8vrv/yMjG/+bZ0//doYP/9q1s//e5ef/5v4L/xYtX/6p7Y//yuXv/+cCC//Krb/+nh3T/v7y5/8HDwf/AwL//vsC+/7+/vv+/v73/vsC8/73AvP++vrz/vL67/729u/+7vbv/u7y6/7m7uf+5u7f/uLm3/7e4tv+3t7b/tba1/7S3tP+1tbL/srWy/7GzsP+wsa//r7Cu/66vrv+sr6z/ra2r/6qsqf+qq6n/qKmm/6enpf+jpqP/oaKh/6ChoP+goJ7/nZ+c/5mcmf+Ympf/lpiV/5SWk/+UlpP/kZSQ/3puZf+XWDL/u201/7RmMf+tkHn/w7Os/7mpn/9+fXr/cXRx/2psaP9naGX/Y2Vg/2ReWP8/KyH/Vy8Q/2g8Hf9sTTz+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB6WUf2dUco/18yEv9BMSj/aWtm/29ybv99dGz/g2dZ/2tRQ/9zPyP/mU8l/59TJ/9zSDL/gHl0/4yPi/+OkY3/k5WS/5aXlf+Ympf/mpyZ/52fm/+eoZ7/oaOh/6Olov+kp6T/p6el/6ippv+pq6j/qqup/6utq/+ur6z/r7Cu/7Cyr/+xs7D/s7Sy/7S1s/+0trP/tre1/7e4tv+4ubf/ubq3/7q7uP+7vLr/u7y6/7y9u/+9vrv/vr+9/76/vf/d1tL/28S4/+2ea//3sm//97dz//izc/94TDb/sJ6U/9uXYf/5tXX/9qls/7J8Xv+1raf/wcLA/8LCwP/Aw8D/wcK//8DBv//Bwb7/v8G+/7/Avv++wL3/vr+9/72/vf+9vbv/vL26/7u9uv+6u7r/ubq4/7i5t/+4uLb/tri2/7a4tP+0trT/tLWy/7Kzsv+ysrH/r7Gv/66wr/+usKz/ra2r/6usqv+prKn/qKmo/6WnpP+jpaL/oqOh/6Cjn/+eoJ3/m52b/5qcmv+YmZf/lpeV/5aZlv+eoJ3/nJmT/4xWOf/Hez3/xXg7/7qLZv/HuLH/yLiv/5WLgv97eXT/bnFs/2lraP9kZmL/YWVh/2JaU/87JRf/ZTUT/2A/KtsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGpELdltORb/PycY/2RkX/9sb2v/cHNv/3h1b/+GbWD/c1ZL/2U9KP+bTyb/oFQn/4pMLf91Zl3/jo+M/5GUkP+VmJT/mJmX/5qcmf+cnZv/n6Cd/6GioP+jpaL/pKek/6eopf+oqqf/qauo/6utqv+traz/rq+t/7Cxr/+xs7H/srOx/7O1s/+1trT/tre1/7a4tv+4urj/urq5/7q7uf+7vLr/vL27/76/vP++v7z/vr+9/7/Bvv+/wr7/xsbE/+TY0v/Yo4r/9qpq//m3cv/4uXT/zodT/2FEOP/Hsqr/snVQ//ivb//4rGv/04Vb/6qak//ExML/xMXC/8PEw//DxcL/wsTC/8PDwf/Cw8H/wcPB/8HCwP/AwsD/wMG//7/Avf++v73/vb+9/72+vP+8vbv/ury5/7m7uP+4ubj/uLq3/7e4tv+1t7X/tbaz/7O0sv+xtLH/sbKw/7Cxrv+usK7/ra+s/6ytrP+qq6r/qaqm/6Wno/+kpqP/pKaj/6mqqP+zs7D/vru4/8XAvf/Kw7//zsbA/9XLxv/a0c3/toxy/9KLQ//Xl0v/zZBY/9HCu//Esqv/tZuM/6iJeP+be2r/jG9h/3hpXf9mZV//YGNf/1pNRf9FJg//UzEaxQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVDAYyFMsEv9TSkP/am1p/25xbf9ydXD/dXhz/4d0av96XVL/YUIy/5NLI/+lVyv/o1ct/3BURv+LioX/lJaS/5ealv+anZn/nJ2a/56hnv+goqD/oqSi/6Wnpf+oqab/qKqn/6qrqf+rrar/ra+s/6+wrv+xsrD/srOx/7O1s/+0tbT/tre1/7e5tv+4urf/urq4/7u8uv+8vrz/vb68/72+vP++v73/wMG//8DBv//Awb7/wsPB/8LEwf/Z1ND/3szF/+ecb//6t3H/+rpz//q3cv98TTL/fWlg/8e2rf+Ua1f/+6xp//qxbv/rlV7/nYJ3/8LCvv/Gx8X/xsbF/8bHxP/FxsT/xcbE/8TFw//ExcP/xMXC/8LEwv/CxMH/wsLB/8DBv/+/wb//v8C+/76/vf+9vrz/u767/7u9uv+6u7r/ubq4/7e6t/+2uLX/tbi0/7S2tP+ztLL/srOw/7CysP+vsa7/rq+t/7K0sf++vbz/zMnG/9XOyv/a0c3/3NDK/9rMxv/Yx8L/1MG6/9C6sf/PtKn/0bOm/9a9sf/UsYX/361b/+TAZP/bpVf/y5tx/7uQcP+qgmf/nnhi/5VzYv+Qc2T/i25f/4ZmVv94X1D/Y11W/0U0Kvs/JxjCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4IRKrPy0h+mdpZP9tb2v/cHJv/3R2cv93eXb/hntz/39jWP9oTT//fkQj/6lZLf+wXS//eks0/4Z/ev+Wl5T/mZuY/5ydm/+eoJ3/oKKf/6Olo/+kpqP/p6il/6mrqP+qq6n/rK6r/62vrf+vsK7/sLGv/7K0sf+0trP/tbe1/7a4tf+4ubf/ubu4/7q8uf+7vbr/vL+8/76/vv+/wL7/v8G+/8DCv//Cw8H/w8PC/8PEw//ExcP/xsfF/+PY0//UrJj/9q1w//u/d//7wnn/4Zpe/10/Mf+roZz/yr22/5d8b//nml7/+7Vx//alZ/+neGH/vbaz/8jJx//Iycf/x8nH/8fIxv/HyMb/xsjG/8bHxf/Fx8X/xcXE/8PFxP/DxcL/wsPB/8LDwP/BwsD/wMG//7/Avv++v73/vr68/7y9u/+8vLr/uru5/7m6uP+3ubb/t7i2/7W2tP+3ubb/xcTD/9TRzf/g2dT/5tzX/+jb1f/n2NH/4czC/9q3p//TpY3/zZR4/8mHZf/Fe1X/wnNI/8R1RP/KgEv/0o5Q/9yfVv/lwWX/58ho/+O4X//Vj0j/wXI4/6xgL/+YVCr/jUwl/4ZMKv+BUDT/gFdA/39eTf99XU3/alVH9046L4wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4pHlBbVE7pamxo/25xbf9ydHD/dndz/3h7d/+BfXj/iHBl/3JXSf9rPyj/rFot/7ZiMv+aVzL/eWlf/5aXlP+anJn/nJ6c/5+hnv+ipKH/paak/6Wnpv+oqqj/qq2r/6ytq/+trqz/r7Cv/7CysP+ys7H/tLWz/7W2tP+4uLb/uLm3/7m6uP+7vLr/vL27/72+vP++v73/v8G+/8HCwP/BwsD/wcTB/8PFwv/ExsP/xcbD/8bHxP/V0tD/5dfQ/9+ddv/6vHX/+8R8//zCev+XXz3/cVpP/8TCwP/KxcH/q5KH/8B8Uf/8t3P/+7Bv/8eBW/+xpZ7/ysvJ/8rLyf/Jysn/ysrI/8nKyP/Jycf/yMnH/8fIxv/HyMb/xsbF/8XGxf/ExsP/xcTC/8PDwf/Bw8H/wMLA/8DBv/+/wL7/vr++/729vP+8vLr/ury5/7/Bv//Rzsz/39rX/+ne2v/s39n/7d7Y/+fOwv/ju6f/3aSI/9aMaf/SflL/z3dI/811Q//Lc0H/yXE//8dvO/+9ajn/tmk2/7huOP+4bTj/wHA5/9qnV//oyWj/5Lxh/9CIRP+MSSL/dDwc/245Gf9uNxj/cjsY/3Y9Gv96QRz/d0Mg/3dLMf94V0T7dFlKnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcFdLOWZpZfBrbWn/cHNv/3N2cv93eXX/enx5/35/fP+MenH/fWBS/2JCMv+dUir/vGk1/7ZlNf92VUX/k5CM/5yem/+doJ3/oKKf/6Smo/+np6b/qKmn/6qsqv+trqv/rq+s/7Cxrv+xsrD/srOx/7O2s/+2t7X/t7i3/7m6uP+5u7j/u7y7/72+vP++v73/v8C+/8DBv//BwsH/wsPC/8PFwv/FxcT/xsbE/8bHxP/Gx8b/yMjG/+Ha1v/Vu67/8qtz//zGff/8yoD/9bNx/2JAL/+dkYv/y8rJ/8zKyf+7p53/l2dN//y2c//9uXX/5ZJh/6GLgP/Ky8j/zMzL/8zNy//Ly8n/y8zJ/8vLyf/Ky8n/ycrI/8nKyP/Iycf/yMfG/8bGxf/Gx8T/xcfE/8TFw//DxML/wsPB/8HCwP/BwcD/ycjH/9fV0f/l3tr/7OHc/+/h2//r1sz/6sa0/+SpjP/glG3/3oZY/9p9Sv/YfEf/13xG/852Qf+9azz/pVwy/4ZLKP9rOyD/WTAa/08uG/9NLyD/TzMm/2JFNv92Vkb/r25H/+XDZf/jumD/zotQ/5dxXP9mSz3/Tjgs/0AqIf81IRf/NB0Q/z0fDf9TKxH/ajgV/28/H/5iQjCoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsYFlsaWtn/21wbP9ydHD/dXd0/3h7d/97fXr/f4F//4uCe/+EZ1r/bE9A/4NHKP++azf/wm85/4pSNP+Ifnb/nZ+c/6Chn/+ipKL/pael/6ippv+qqqj/ra2r/66wrf+vsa//sbKw/7K0sf+0tbP/tre0/7e5tv+6urj/u7y6/7y9u/+9vrz/v8C+/8DBv//BwsD/wsPB/8PEwv/ExcP/xcbE/8bIxf/IyMf/yMjH/8jKx//R0c7/5t3X/9mjiP/6vXj//cyD//3Ng/+6fE3/ZkxB/8G8uv/Oz83/zs/N/8W2r/+OcGD/8qZq//6+ev/2p2r/pXxo/8O+u//Ozs3/zc7M/83OzP/Nzsv/zc7L/8zNy//Kzcn/yszJ/8rKyf/Jysn/yMrH/8jIxv/HyMX/xsfE/8bHxP/LzMn/2tjW/+fh3v/v49//7+Da/+3Vyv/svqf/6KSB/+aPYv/igk3/4IJL/96DSv/Xfkb/v24+/5lYMf95RCb/WTMf/0kuH/9MNSn/W0Q5/2hRRv90XFH/fmle/414bv+djoT/rKKY/7q0sP+nfmj/1ZJM/9mYTv/Mhkz/xbSs/8Stof+VhXr/fnRs/3dpYf9tWlH/W0c+/0IwJv8wHA//SScQ/0kuHpUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhmYp9rbWr/b3Ju/3J2cv92eXX/eXx4/31/fP+Agn//h4WB/453a/94Wk3/akAs/71pNf/Jdjz/smQ3/3tiVv+bm5f/oaSg/6Wmo/+oqab/qauo/6qtqf+tr6z/sLGv/7GzsP+ztLL/tLa0/7a3tf+3ubb/ubu4/7u8uv+9vrz/vr+8/7/Avv/AwsD/wcPB/8PEwv/ExcP/xcbE/8bHxv/HyMb/yMrH/8rKyf/Kysn/yszJ/9/b2f/fz8f/6KR2//3Lgf/90of//MZ//3dMNf+NfXX/y8rJ/9DRz//Q0c//zcbB/6KKf//HglP//sF8//22df/Gg2D/uq+p/9DQz//P0M//z9DO/8/Qzv/Pz87/zs/N/83OzP/Nzsz/y8zL/8vMy//KzMn/ysrI/83Nyv/a2dX/6OTg//Dn4v/x5N7/7tXK/++8pP/toXv/6o9c/+mJUP/ni1D/44dM/9B+SP+rZDj/g00r/1s1IP9OMiP/Vj4z/2ZQRf95Ylj/i3Vs/5eFff+ekYr/oZeR/6Ocl/+joZ3/pKWh/6Wmo/+rrKn/srOx/52HeP+/dD//zoVC/8FyOP+0npD/w7Kq/6KRh/99fnv/d3l1/3N0cP9ycmz/dWxm/2tbUv9HNSz5RTAldQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaWlkoGxuav9xcm//dHZ0/3h6d/97fXn/fn99/4KEgP+GiYX/k4R7/4FiU/9lRjj/nlYt/8x5P//Hczv/glQ9/5eQjP+kpaL/pqek/6iqpv+qrKj/ra6r/7Cwrv+xsrD/s7Oy/7S1s/+2trT/uLi2/7m6uP+7vbr/vb68/76/vf++wL7/wMG//8LDwf/DxML/xMXD/8XGxP/HyMX/yMnG/8jJyP/Jysn/y8zJ/8zNy//Nzsz/6OHd/9Wyof/6uHv//dGI//7Wif/foGb/YEI0/7euqv/Q0dD/0tPR/9LS0P/Rz83/t6GX/51rT//+vnr//r56/+OTYv+nk4n/0NLP/9LT0P/Q0tD/0NHP/9DRz//P0M//0NDO/8/PzP/Pz8z/z8/N/9XW0//l4uD/7+jl//Hl4f/w3NP/8sey//Gpg//wlWL/749V/+uRVf/mj1P/zH5I/6VlOf9yRCj/VjUj/1E6Lv9mTkL/fWVb/413bf+ejIT/pJiR/6uloP+vrar/rq2r/6ytqv+oqqj/p6il/6Smov+ho6H/oqSi/6Slov+nqKb/lYqD/6ZiPP/Edjv/uGgz/6aHcv+9rKL/qJOI/4B+ev93eXX/cnRw/25wbf9qbGj/aGpn/25pY/Z2Y1ltAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABqbGiCbnBs/3J0cf92eHX/eXt4/3x+e/+Ag3//hIeD/4iJh/+Ri4b/im5i/3BUSP95Ryv/yHU9/898Qf+rYjr/hXJo/6Oiof+nqab/qayo/6ytq/+vr67/sbOw/7O0sv+1tbP/tre1/7e5tv+5urj/ury6/7y+vP++v73/wMG//8HCwP/Cw8H/xMXD/8XGxP/Gx8X/x8jG/8jJyP/Jysn/ysvJ/8vMyv/Nzsz/zs7M/9jX1P/q4dz/3qSE//3HgP/+14z//tSJ/5tmRP95Y1n/y8rH/9TU0v/U1NL/1NTT/9TU0//Fta3/jm5e//awcP/+xX//9alt/6mCb//KxcL/09TS/9PU0v/S09L/0tPR/9LS0f/R0tD/1NXT/9/e3P/s6Ob/8enl//Lm3//01cb/9bWV//WdbP/0llr/8Jlb/+mXWP/WiFH/pmg+/3JFKv9TNib/V0A0/3NbT/+GbmT/nImA/6eZkv+zrKj/t7Sx/7m4tv+1t7T/srSy/7Gyr/+vsK3/ra6s/6usqv+oqqf/pqel/6Omo/+hoqD/oKKf/6Cin/+Vk4z/jlc5/7tqNv+yYjH/n3Vd/7ejm/+vmIz/g4F8/3h7d/9zdnL/b3Ju/2tuaf9oamb/Y2Zh/GdmYbsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGttaWNvcm7/c3Zy/3d5df97fHn/fYB8/4KEgf+FiIT/iYuI/42Niv+UgHb/gmFV/2VDMv+yZjP/04FD/8pzPv+DWkb/n5uX/6mqqP+rrar/rq+t/7GxsP+ztLL/tba0/7a3tf+4ubb/ubu4/7u8uv+8vbv/vr+9/8DBv//Cw8H/w8TC/8TFw//Gx8X/x8jG/8jJx//Jysj/y8zK/8zNy//Mzcv/zc7M/8/Qzv/P0M//49/d/93Mw//wrnv//tSK//7ckf/8xX//a0Y0/6KVj//S09D/1tbV/9bX1f/W19X/1tbV/9HJxP+ki4D/x4VW///Kg//9vHv/yYpn/8C2r//W19X/1tfV/9XV1P/V1tT/29rZ/+fl4//x7On/8ufi//Ph1//4ybD/+Kp///mbX//4oWL/76Bh/9+UWf+ydEX/fk8x/1M2Jf9aQjb/dF1S/413bP+gjYX/r6Od/7u0sP/Av73/vb+8/7y9u/+7u7r/uLm4/7W4tv+0tbP/srOx/7Cyr/+usa7/rK+s/6qsqf+nqab/o6Wi/6Gjof+gop//naCb/5mal/95UDz/sWIy/7FhMP+gaUr/taCW/7Wekf+Gg33/enx5/3V3c/9wc2//bG9r/2lsaP9kZ2P7YmVgqQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbW9rRHBzb/h1d3T/eXx4/31+e/9/gn7/g4aC/4iJhf+LjYn/j5GN/5eNh/+GaFv/blFE/4pPLv/Rf0L/0n5E/6hhPP+QgXn/qquo/62urP+usK7/sbOw/7O2tP+2t7X/uLm2/7m7uP+7vLr/vb68/76/vf/AwL//wsPB/8TFw//ExsT/x8fF/8jJx//Jysn/ysvJ/8vMyv/Nzcz/zs7M/87Pzf/P0M7/0dHQ/9LU0v/r5eL/1rCc//zAff/+2pD//96T/9CSXf9lSj7/xsK+/9fY1v/X2Nf/2NjX/9jZ1//Y2df/19XS/7yonv+dcFT//siF//7Kiv/noW7/tqWc/9ra2P/c3Nr/4ODe/+vn5f/y6uf/8eXe//bYyf/5vJr/+qVv//yjZf/4qWn/66Rm/8mIU/+OXDn/XDon/1c/M/9wWE3/jXZr/6CMg/+ypZ//wbu4/8bHxP/Dw8L/w8PA/8DBv/++wL7/vb68/7y9u/+6u7n/t7i2/7W3tP+1tbP/srSx/7Cyr/+ur63/rK2r/6mqqP+mpqT/oqSi/5+joP+cn5z/mZuY/3NVRf+pWzD/sGAw/6NfPP+wmpD/uqGW/4mFf/97fnr/dnl1/3N1cf9ucW3/am1p/2ZpZPdjZWGCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxcm8jcnRx5XZ4dv96fHn/fYB8/4GCf/+EhoT/iYuG/4yOi/+Qko//lZOO/5N8c/9/YVT/akMv/8FyPP/Xh0f/y3U+/4lkUv+npKD/ra+s/6+xrv+zs7H/tbe1/7i5t/+5urj/uru5/7y9u/++v77/v8C+/8HDwP/DxML/xcbE/8bHxP/IyMb/ycrI/8rLy//LzMv/zM3L/87Pzf/Q0M7/0NDO/9DRz//S0tH/3dza/+zk4P/fp4X//s6H///glP//2I7/jl5A/4l3b//T0M7/2dnY/9jZ1//Z2tj/2tvY/9na2f/Z2dj/zr+3/55/cP/1vYH//9ef//jBjf/FppD/4Nza/+7r6P/w6eT/79/Z//fSvv/7tY3//qZq//2wb//yr27/3J1j/653S/91TDH/Ujks/2lRRf+GcWb/nYmA/6+hmv/Burb/y8rH/8rKyP/HyMb/x8jF/8PFw//DxcL/wcPB/7/BwP+/wL3/vr+8/7q9uv+4urf/t7i1/7e3tf+0tbP/srKw/6+wr/+trqz/qqyo/6aopv+kpaP/oqOg/6Cgnv+anJr/dV9T/6BYMP+yYTD/qF0x/6qTif+9pZv/kYeA/3x/e/93enb/dHZy/29xbf9sbWr/Z2pl9WRmY1wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHJ0cRF0dnPJeHt3/3t/ev+AgX7/goSA/4aIhf+Ji4j/jY+N/5GTkP+UlpP/moyG/4ZnWv9pTD//llYw/9eFSP/WhEf/q2VA/5uMhv+vr63/s7Ow/7W2tP+3ubf/ubu3/7q7uf+9vbz/v8C9/7/Avv/CwsH/xMTD/8bHxP/HyMX/yMjG/8nKyP/My8r/zczL/83NzP/Oz83/z9LO/9DSz//R09D/0tPR/9PV0//m4uD/3s7F//Cyf//+2o///+OW//rFgP9qSDf/sKag/9nb2P/a29r/3Nza/9vc2v/b3Nr/29zc/97d3P/a0c7/uqWc/9Cjaf//4rb//t21/+fDmv/t5+P/8+Xd//nTv//7t4///q1w//67eP/us3P/z5dg/5JlQf9ePyz/W0I2/3dgVP+WgXf/qZmR/7+3sv/Oy8n/ztDN/8zNy//LzMv/ysvJ/8jJx//IyMj/x8fG/8TGw//Dw8L/w8TB/8DBwf+/wL3/vr68/7u7uf+5ubf/t7m2/7W2tP+ztbL/sbOw/6+wrv+rrav/qKmn/6SnpP+ipKL/oaKf/56enP96bGP/mVQx/7NhMf+nVyz/pYx//7+pn/+ZjIP/f4B9/3l7d/91eHT/cHNu/2xvav9oa2fuZWhkNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAc3VyDHZ5dJx6fHj/fYB8/4GDgP+EhYP/h4mH/4qNi/+PkI3/k5SS/5aYlf+bl5P/kXpv/35gU/9tRC//yXlA/9uMTP/NeEL/km1b/66qp/+0tbP/tri1/7m6uP+7u7r/vL67/77Avf/Awb//wsLA/8PEwv/Fx8T/x8jF/8nKx//Ky8n/zMvK/83OzP/Oz83/0NDO/9HS0P/S09H/09TS/9TU0//V1tT/19nX/+zm5P/WtKT//cKC///glP//45f/zpNe/25TR//MyMb/3Nzb/93d2v/d3dz/3t3c/97c2//e3tz/39/e/+Dg3v/VxcD/wpl4///oy///8Nv//OfX//rl2v/917///syW//7OlP/qun3/wZFd/4BYOv9WOyz/aVBE/4lyZ/+gjIT/tqqk/8zGw//X19b/09LS/9LR0f/Q0M//z9DO/83PzP/Mzsz/y8zK/8nKyf/Kysn/x8jG/8XGxP/ExcP/w8TC/8LCwP+/v73/vLy6/7m7uP+5urj/t7i2/7W2tP+ytLH/sLGv/66urP+rqqj/p6ik/6Smov+ipKL/n6Cc/4N4c/+RUjD/tGEx/6lZK/+ef3D/vaie/5+Qhv+Agn//e356/3Z5dv9ydHH/bXFs/2ptac9na2YVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5e3YFeXp1a3t9ev9+gX7/gYWB/4aIhf+Jioj/jY6M/5CTjv+TlpL/l5mW/5udmv+djof/iWlc/2tOQP+dXDL/24xK/9mKTP+za0T/oJSM/7O2s/+3ubb/uru4/7y9u/++v7z/v8G+/8DCwP/ExML/xcXD/8bIxf/Iysj/ysvJ/8vMyv/Nzsv/zs/P/9DQ0P/R0s//0tLQ/9TT0//V1NL/1dXT/9bW1P/f3tz/7ebj/9uoif//0Yn//+WY///ckf+VY0T/kYB3/9nW0//e3dz/3t7c/9/e3f/f3t3/39/d/+Dg3v/k4+L/5+Th/+bb1//gz8f//+/g///9+f///fv///bt//3q0v/u1an/xqRr/4JZO/9YPzL/cFhM/5J8c/+omJD/wrm0/9XT0f/Y1tb/19bW/9XV1P/U1dP/09PS/9HT0P/Q0c//ztDO/87Pzf/Nzcv/y8zK/8rKyf/Iycf/xsjH/8XHxP/ExcL/w8TB/8DCwP+9v73/vLy7/7q8uf+4ubf/tre1/7W2tP+ytLL/r7Gt/6ytqf+oqaf/pael/6Olo/+fo5//jIaC/4ZOMP+0YTD/q1ss/5h0Y/+7pJv/o5GH/4ODgP98f3v/d3p3/3N1cv9ucm38a25qo2ptaQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHl8dwF5fHdDfIB7+X+Cf/+EhYP/h4mG/4qMif+Oj4z/kJWQ/5WYk/+YmZf/m52b/5+alv+TeW7/gWNX/3BGMP/MfUP/35JP/9R+Rf+acl//srCs/7i6uP+7vLr/vr+9/7/Avv/BwsD/wsPC/8XFw//GxsX/yMrH/8nLyf/LzMv/zM3M/87Pzf/P0M//0dLR/9LS0P/U09H/19TT/9bV1P/X1tX/2NjW/+bk4v/h1c7/6a1////bkf//5Zj/+smD/3FNOv+1qqX/3t3c/+Dg3//g39//4eDf/+Hg3//i4+D/5+Xj/+3o5f/17Of/8eDZ//ni1v//+fP////////////+/fz/6N68/6BtTv91VUb/hWle/52Jf/+vn5n/ycK+/9vd2f/b29r/2dnZ/9nZ2P/Z2Nb/19fU/9XW0//U1dP/09PS/9HT0f/Q0c//zs/O/87Pzf/Nzsz/y83J/8rJyP/Iycf/xsjF/8XGxP/ExMP/wMPB/77Avv+9vrz/u7y7/7m7uP+3ubb/tre1/7S1s/+vsq//rK+r/6mrqP+mqKb/pKaj/6GjoP+XlZD/f040/7RgMf+sWy7/lG1Z/7aflv+nk4n/hIWB/31/fP94e3f/dHdz/3Bybvxsb2pza25pAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHp9eR19gHzWgYN//4WHhP+IiYb/i42K/4+Rjv+SlZH/lpiV/5mcmP+cnpv/nqGf/6CQif+NbmL/blFE/51eNf/dj03/3o9O/75wSf+llo//urq4/7y+vP+/wL7/wMK//8LDwv/DxcT/xMbF/8fIxv/Jy8j/y8zK/8zNzP/Nz83/z9DO/9HT0P/T09L/09TT/9XV1P/X19b/2NjX/9jY1//b2tj/6+fl/9a8r//7voL//+OW///lmP/ZoGj/c1ZK/9DLyP/h4d//4OLg/+Hh3//h4uD/5uXk/+zo5f/t4d7/6NHG//XLtP/80LH//+nP///79P////////////37+f/eupj/t5OC/7iqo//AtK7/0s3J/+Hh3//d39v/3d7b/9zc2//b29r/29va/9ra2f/Y2df/1tjV/9bW1f/U1dX/09TS/9LS0P/R0M//z9DO/8/Pzf/Ozsz/y8zK/8rKyP/Hycb/xsfG/8XFxP/CxMH/wMG+/7/Avf+8vbz/ury5/7i6t/+2t7X/tbWz/7KzsP+vsK3/qqyp/6epp/+lpqT/oqOh/56em/94TTf/smEx/61bLf+TZ1L/sZqP/6mTiP+FhoH/f4B+/3p8eP91eHT/cXRw9W5xbDYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfH57Dn6BfqODhYH/hoiE/4iLiP+Mjov/kZKP/5SVk/+XmZf/mp2Z/56fnP+go6D/o6Cb/5h+dP+Ia17/bUYy/8yBRP/imFP/2oVJ/6N0Xf+2tLD/vr++/8HBv//CxMD/w8XE/8XHxP/Gx8f/yMrH/8rLyf/Nzcv/zs/N/8/Rzv/Q0tD/1NPR/9XU1P/V1tX/1tfW/9jZ2P/a2tj/2tva/97f3P/v6OT/16uU///LhP//5Zj//+KV/6l0Tv+QfXP/2tjV/+Lh3//i4+H/5+bj/+3p5v/w5+L/6NXL//HCq//5tor//sqP///ntf/w48X/5dyu//fz7////fn//vXr/+7b0f/b0s7/4t7d/+Xl4//i4t//4eDf/+Hf3f/f3d3/3t3c/97d2//d3dr/29zZ/9nb1//Z2df/2NnX/9bW1f/V1dT/1NTT/9PS0P/Q0c//z9DO/87Ozv/Nzsz/y8zJ/8nKyP/Hycf/xsfF/8TFwv/CwsD/wMG//72+vP+8vLr/uru4/7i5tv+2t7T/tLSy/6+xr/+rrav/qaqo/6eopf+jpaP/oKGe/3NOPP+vXi//rVwt/5FiS/+ulYr/qZOI/4aGg/+Bgn//fH56/3d5df9ydnLSb3JtCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAgn8EgIJ/Y4OGgv+HiIX/iY2K/42PjP+Rk4//lpeV/5mal/+bnZr/nqCd/6Kjof+mp6X/pJaN/5F0aP90WEz/mVw0/9+RT//illL/ynpI/6aTiv+/v73/wsPB/8PEw//Gx8T/xsfF/8jJx//Jysn/zMzL/83Qzf/P0c//0dLQ/9LU0v/U1NP/1dbU/9bY1f/X2db/2dnY/9va2//b29r/5eLh/+rg3P/gqIP//9eN///lmP//1oz/gllA/7Glnv/i4d//5uPi/+zp5//y6+f/7+Db/+7Jtv/5tIr//r16///clf/r1Jb/xKt1/51wTv+ph3T/38iX///y2///7M//99Gy/+fd2f/o6OX/5uXi/+Li4P/h4d//4eDf/+Hf3f/h39z/3t7c/93c2//c29r/29vZ/9va2f/a2df/2NjX/9fW1v/U1tP/09TS/9PT0P/Q0tD/z9DO/8/OzP/MzMv/yszK/8jLx//Hycb/xsfF/8LDwv/Awr//v8C9/76+u/+7vLn/ubu3/7a5tf+0tbT/sbKx/62urf+rq6r/qKmm/6Wmo/+ho6D/clND/6lbMP+sWy3/j15E/6iOhf+qlIn/h4iF/4GEf/99f3z/eHp2/3V3cpQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACChIAug4aC74eJhv+Kjon/jpCN/5KVkf+Wl5X/mZuY/5ufnP+fop7/o6Wj/6epp/+pp6H/nYN5/49yZf9qRjX/yH5F/+WdVf/fj1D/r3RZ/7m0sf/Cw8H/xMXD/8bHxf/Iycb/ysrI/8rLyf/Ozcz/z9DP/9HR0P/T0tL/1NTS/9XV1f/W2NX/2NjW/9nZ2P/a2tr/29zb/93d2//q5eP/2ce+//Cxf///4JT//+WY//K9ev94WEj/zcbD/+rn5v/x7Or/8+nl/+3RxP/4upb//bh9///Wjf/23ZP/vqFq/35bPv9tUED/m35v/+LY1f/PwLj/99iu///qvf/9zqD/2rur/+jl4f/m5eL/4+Pg/+Pi4P/i4uH/4eHf/+Lf3v/f39//3t/d/93e3P/d3dz/29za/9rb2f/Z2tn/19jW/9bW1f/V1tP/09XS/9LS0f/R0s//z8/O/83Nzf/MzMv/ysvI/8nLyP/Gx8X/w8XC/8LDwf/Cwr//vsC9/7u9u/+5u7j/t7m2/7S2tP+ztLH/rrCu/6usqv+oqaj/pKak/6Gkof9zWkz/pFgv/6xcLf+QXEH/poyB/6qUif+JiYX/goWA/31/fP94e3j8dXd0UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIOFgRKEh4OxiIuG/4uOiv+PkY//lJWT/5eYlf+am5j/nZ+c/6Gin/+lp6P/qaqn/6usqv+pm5T/lnlu/35hVv+MVTP/35VR/+ahWf/VgUv/p4x+/8LCwP/GxsT/x8jG/8nKyP/KzMn/y8zK/87Pzv/R0c//09LS/9PU0v/U1dP/1tfV/9jY1v/a2dj/29va/9vc2//c3tv/3t/d/+3m5P/Ttqf/+8GB///lmf//5Zj/x5Be/4lzaf/o5eL/9e3q/+7e1f/1wqj/+7aD///Nhv//5Zj/0bZ4/4VlQv9hRjb/eGBU/6WRiP/Hvbj/6+Pg/9bHwP/MoGz//+Wo///Tlv/jp4T/49rU/+bl5P/m5OP/5OXj/+Pl4//j4+L/4uLg/+Hh4P/g4d//3uDe/93e3P/d3tz/293b/9ra2f/Y2tf/19jX/9bW1f/U1dT/0tPR/9HS0f/Q0M//z8/N/87OzP/LzMr/y8vJ/8fIxv/FxcP/xMPC/8LCwf+/wb//vb+9/7u8uv+5urf/tre1/7O1s/+wsa//rK2r/6qrqP+lp6T/o6Sh/3ZgVf+gVi//rVot/49aPv+mjH7/q5WJ/4uKhv+DhYH/foF9/3p9euB3eXYTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhYeDBIeJhWiJi4j/jY6M/5GSkP+UlpP/mJqW/5udmv+en53/oqOh/6eopf+qq6n/ra2s/6+tqv+ljYX/mHtw/2hKPP+6dUH/56Ba/+SaVv/BeVH/tq6o/8fHxv/Jycj/ycrK/8vNy//Nzsz/z9HP/9LT0f/T1NP/1dbU/9bX1f/X2df/2dnY/9va2v/b3dr/3d/c/+Dg3//j4uL/7+bj/9awmP//0I///+ee///hmf+XaEn/zsK8//Xr6P/wzLr/+reM//7Df///4pb/5c6J/518Uf9mSDX/bVVJ/5WAd/++sKr/3NfV/+3s7P/t6un/49TO/6mFb//+0o///9yU//axfP/Tu63/5uXj/+bn5v/l5uX/5ebj/+Xl4//k5eL/4+Ph/+Lh4f/g4eD/3uDf/97f3f/d3dz/3Nza/9rb2v/Y2tj/1tfX/9bX1f/U1dP/0tTR/9LS0P/Q0s//zs/N/83OzP/My8r/ycrI/8fHxP/FxcP/w8PC/8HBwP++wL7/vb68/7u8uf+4ubf/tLW0/7Kzsf+ur63/qquo/6eopf+lpqP/emdd/51UL/+tWi3/jVk9/6SKff+rloz/i4yH/4WHg/+Agn//fH16mAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAh4mFKomLieOOj43/kZOQ/5SXk/+Ympf/m5ya/56hnv+ipKL/p6im/6msqf+tr63/sLKw/6+koP+cgXX/jHJl/3pMMv/dlFL/6adb/+CNT/+rf2n/xMG+/8rKyf/LzMr/zc7M/83OzP/R0tD/0tPS/9TU1P/W1tX/19jV/9ra1//a29r/3Nzb/93e3P/g4N//4uHh/+nm5f/s4t//4Lab///fpf//6qv//NaX/7CHaf/t2tH/+MCh//27gP//143//+WY/76faP9vUDf/ZU1A/4RuY/+zpJz/2dPP/+zu6//r7Ov/7Ozq/+vr6v/p4Nv/t6CV/9adZf//4Zb//sSA/9agg//m3tn/6Ono/+jn5//n5+X/5efj/+Xl5P/k4+T/4+Li/+Li4f/g4eD/3t/d/97e3P/c3dz/3Nzb/9rb2f/Y2dj/19jW/9bX1f/U1tP/09TS/9HS0P/P0M7/zs/N/8zNyv/Ky8j/x8nG/8XHxP/DxML/wsLB/7/Bv/++v73/u7y6/7m6uP+2t7X/s7Sy/6+wrf+qrKn/p6mm/6Wmo/9+bGP/mlQu/6taLv+KWD7/pIh7/6qYjv+LjYj/hYeE/4GCgPt9f3tBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACJi4cMi4yJlo+Qjv+RlJD/lZiV/5mal/+bnJr/oKGe/6Slov+nqKf/qa2p/62wrf+ws7H/tLOw/6qXjv+cf3L/dFlM/6doO//opVv/6aRc/9N/T/+vnJH/y8vJ/8zMy//Oz8z/z9DO/9LT0f/T1dP/1tXV/9fX1v/Y2dj/2trZ/9zb2v/c3dz/4ODe/+Li4f/l5eX/7uvp/+bb1v/wzrL//+zA///vwP/+2Kn/8ryd//u/mP//zIn//+Wa/93Gg/+La0X/YkY3/3lgVf+ol4//z8fD/+jn5P/u7ez/7e3s/+3u7P/t7uz/7e3s/+rn5f/PvLL/o3RX///aj///1oz/8Kl5/9jHvf/p6Ob/6Ofn/+jn5v/n6OT/5eXl/+Xl5f/j5OP/4+Pi/+Lh4P/f4N//3+Dd/97e3f/c3dz/29za/9ra2P/X2df/1tjW/9bX1f/U1dP/0tLR/9HSz//O0M3/zM7L/8vMyf/Hycf/xsjE/8PGwv/Cw8H/wMHA/77Avv+7vLr/ubq5/7e4tf+0tLL/sLCv/6uuq/+oqaj/pqej/4Jyaf+YUy3/qlks/4lZQP+kiHv/p5iQ/4yNi/+Fh4T/gYSBzXyAegsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI2PiwGNjotJj5CO95OUkv+WmJX/mZuX/52enP+hoqD/paak/6mqqP+rrav/r7Cu/7Kzsf+1t7T/ta+q/6WKgP+afnP/akg3/8+NTf/rq1//6J5Z/7t5WP/Bu7f/zM7N/8/Qzv/Q0c//09PS/9XW1P/X19b/2NjX/9na2f/b3Nv/3d3b/9/f3f/i4t//5efl/+vs6v/z8O//6t/a//zlz///9dr///TW///syP/+3LP//+Co//3mov+1lmT/bEw1/2tSRv+TfnT/xry2/+Tg3f/u7u3/7e/t/+/v7v/v7u7/7+/u/+/v7v/v7+z/7Ozr/+LUzv+kiHr/6LJz///hlf/9vHz/0qaP/+jj4P/p6en/6enn/+jo5v/n5+X/5ejl/+Xm4//k4+L/4+Li/+Hi4f/h4d//4N/e/93e3f/c3dr/29va/9na1//Y2df/19fV/9XW1P/T1NL/0dLR/87Qz//Oz83/zM3L/8rKyP/Iycb/xcfE/8PEwv/BwsD/v8G+/72+vP+6u7n/tre1/7S1s/+wsrH/ra6s/6qqqP+mqKX/g3Vt/5lTLv+pWS3/h1tE/6eJe/+lmJD/ioyJ/4eJhP+ChIFxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI2PjBaQko+1lJWS/5aYlf+am5n/naCd/6GkoP+mp6X/qquo/62trP+wsa7/s7Ox/7W3tf+4urf/sqSd/6OIfv+Ncmb/h1Q0/+ejW//trmL/4pFT/62Fcv/Kysj/0NHP/9HR0P/U09P/1tfV/9jZ1//Z2dj/2tvZ/93d3P/e3t3/4OHf/+Xk4//q6+n/8PDv//f08//x6eb///ny///99v//+u7///bf///z0f/t3rL/nXhN/2lNPv+AaV3/taef/9zW0//w8PD/7+/u//Dw7v/v8O//8PDv//Dw7//w8O//8PDv//Dw7v/v7+//6uTh/76poP+seFP//96T///QiP/no3n/39LK/+vq6f/q6+n/6ero/+jp5//n5+b/5+bl/+Xl5P/k5eL/4+Pi/+Li4f/g39//39/e/93e3P/c3Nv/2tvZ/9na2P/Y19b/1tfV/9XV0v/S09L/0NLQ/8/Qzv/Mzcz/ysvJ/8nJx//Fx8X/xMbD/8LEwP/Awb//vr+8/7u7uv+2t7b/tbaz/7K0sf+vsK3/qqyp/6eopv+FdnD/l1It/6hXK/+HXkn/p4x+/6GZkv+LjIn/iIqG54WHhB0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkZOPApKUkFyUl5P/l5mV/5qcmf+eoJ3/oqWh/6appv+qrKj/ra6r/7Gyr/+ztrL/tri1/7m7uP+7urf/rpmQ/6aKfv90WEv/tXRC/+yrYf/sq2L/1IJQ/7Simf/R0tD/09PS/9XV1P/W2Nb/2drY/9rb2f/c3Nr/3t7d/+Dg3//i4+H/5+jm/+7u7f/29vX/+vf2//n18////v3///7+///+/P///PL/6d+v/51uTP+LbFz/p5eP/9LLx//q6Of/8PDv//Dw8P/v8e//8fHw//Hx8P/x8vD/8fHw//Hx8P/x8fD/8fHw//Dw8P/u7Ov/2MjB/518av/xv33//96T//q2ev/SsJ3/6ubj/+vr6v/s6un/6eno/+jo5//n5+b/5ufm/+Xm5f/k5OP/4+Pi/+Dh4P/g4N//3t7d/93d3P/b3Nv/2tvZ/9nZ2P/X2Nb/1tbU/9PU0//S09H/0NDP/83Ozf/LzMr/ysrI/8jIxv/FxsT/w8XC/8HCv/++vrz/u7y7/7i5t/+1trT/s7Wy/7Cxrv+rrKr/qKmm/4Z4b/+YUy3/p1cq/4RfTP+tjoD/nJeT/4yPi/+JioiNhoiFAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkpSQIJSXk8WYmZb/m5yZ/56hnf+jpaP/pqmm/6msqP+tr6z/sbKw/7O1s/+2uLb/uru5/72+vP+7sq3/q5GF/6OHfP9sSTb/15VU/+6yZP/rpFz/v3tY/8XAvP/T1NL/1dbU/9fY1//a2tn/29za/9zd2//f393/4eDg/+Pk4v/p6ej/9fPy//v39v/79/b//v38///+/v///v7///7+//Hw7v+qf2j/wZ6L/9DHw//l4uD/8fHw//Dx7//x8fD/8fLw//Hy8P/y8vH/8vLx//Ly8f/y8vH/8vLx//Ly8v/y8vH/8fLx//Hx7//o39v/s5uQ/7mDV///35T//8uE/+Giff/i2NL/7ezr/+vr6v/q6un/6ero/+jp5//n6Ob/5ufl/+Xl5P/k4+P/4uPh/+Dh4P/f397/3d7d/9zd2//b3Nr/2trZ/9jZ1//W1tX/1NXT/9PU0f/S0dD/zs/N/8vMyv/Ky8n/ycnH/8bHxf/ExcP/wsLA/7++vf+8vbv/ubq4/7a3tf+0tbL/sLGv/6utqv+oqaf/hndu/5lSLf+lVir/iGVU/7KVif+YlpL/jY6M7omLiCsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUlpIDlZaUZJiZl/+bnJn/n6Ge/6Omov+nqKb/qqyq/62vrf+xsrD/tbWz/7i5tv+7vLn/vr+9/7/Avv+6qaL/rJGF/5N5bP+FVDX/7Kxi/++0Zv/ll1f/soVv/8/Ny//W19X/2tnY/9vb2v/c3Nr/3d7c/+Dg3//h4eD/5Obj//Pv7P/48e3/+e3n//748////v3///79///+/f/+/fz/5c++/+bh2//s6ef/8vHw//Py8v/y8/H/8fLw//Lz8v/z8/H/8/Pz//Pz8//09PP/8/Py//T08//z8/P/8/Py//P08//z9PL/8/Py/+/r6v/Rv7X/mHNe//bGgf//3JH/+LJ4/9K1pv/r6Ob/7Ozr/+vr6//q6+r/6erp/+jp5//n5+b/5efl/+Tm5P/j5OP/4eLg/+Dh4P/e397/3d3c/9zc2//a29n/2drY/9fY1v/V1tT/09TS/9HT0P/Pz83/zc3L/8zMyv/Jy8j/x8jG/8TFw//Cw8D/v8G+/72+vP+6vLn/uLm2/7S1sv+vsa//ra6s/6mqqP+GdGz/m1Mt/5xQJ/+ScWH/tJyR/5aVkv+Oj42MiIyIBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACVlpMgmJqWwZ2emv+goZ//pKWi/6ippv+rq6r/ra+t/7GzsP+1trT/uLq4/7q8uv+9v73/wcLA/8HAvv+2oJX/rpOH/3pfU/+vc0D/77Rm/++0Zf/ci1X/s5mM/9fY1v/a2tn/29zb/9zd2//f4N3/4OHf/+Pk4v/w6+j/8+nk//XWx//95ML///nv///+/f///v3///79//v7+v/t6t7/9fTz//j49//19fX/8/Ty//Pz8v/y8/L/9PPy//P08//09PP/9PTz//T18//19fT/9fX0//X18//19fT/9fTz//T08//09PP/9PPx/+bc1/+ulYn/vYZY///ek//+xoH/36OB/+bb1v/t7u3/7O3r/+vr6v/q6un/6eno/+jo5//m5+b/5ebl/+Tk5P/j4+H/4eHg/9/g3//f393/3d3c/9vb2v/a2tn/2NjX/9bX1f/U1tT/0tPR/8/Rzv/Nzsz/y8zL/8rKyv/IyMf/xMbD/8LDwf/Awb//vr+9/7u7uf+3ubX/tbaz/7Gysf+tr6z/qqqo/4RwZf+hVS7/i0sp/5x4aP+tnpX/kpSR54+RjSgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJealgKZm5hanZ6c96GioP+jpaP/p6mm/6utqf+vr63/srOx/7a3tP+5urj/u726/76/vP/BwsD/w8XC/8K7tf+ymY7/rJGG/2xMPf/TllT/8Ldo/+6tY//OgFj/wbaw/9ra2v/c3dv/3d7d/+Dh3v/m5uT/8Ojk/+3e1//xvJ7/+tGe//7vy//+9+L//vv0///+/P///vz/9/Ty/+vn5f/5+fj/9/f3//X19P/z8/L/8/Py//T08//18/P/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19PT/8Ovp/866sf+ac13/+ciD///Xjv/4r3f/1Leo/+zp5v/t7e3/7Ozr/+vr6v/q6ur/6eno/+jo5v/n5+X/5OXk/+Tk4v/i4+H/4eHg/9/f3v/e3tz/3N3b/9vb2v/Z2Nj/19jW/9bW1P/T1dP/0NHQ/8/Pzf/Mzcv/ysvK/8jJx//FxsT/w8TC/8DBv/++v73/u7y6/7e6tv+0trP/sbOx/66wrf+qq6j/g2pd/6dXLf9/TTP/o39u/6OdmP+TlZF6j5GNBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJmbmBWen5ynoaKf/6Slo/+nqab/q62q/6+vrv+ys7H/tre1/7m6uP+8vbv/vr+9/8HCwP/ExcP/x8fF/8Cyq/+yl4z/n4V7/3ZNM//rsGP/8blq/+ulXv/BhWX/0c3K/97f3f/f397/5ubk//Do5P/r1cz/8KyG//nFgv/95ab/7tqt/+XVlv/78Nz///nr///57f/u4rb/5eDd//j4+P/29vX/9PXz//T08//09PP/9fTz//X09P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/z9PP/5dnU/6iOgv/CiVn//9uQ//7Cfv/fpIL/5tzX/+7t7P/s7ev/6+3r/+rr6v/p6ej/6Ojn/+jo5f/m5+X/5OTj/+Pj4v/h4eD/39/e/97f3f/d3dz/29va/9nZ2P/X2Nb/19fV/9TU0//R0dD/zs/N/8zOy//KzMn/yMnH/8bHxf/DxML/wcLA/76/vf+6vbv/uLq3/7W2tP+ys7L/r7Ct/6qsqf+DY1P/qFYr/31UQP+sjn//nJuX1JOVkR8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnZ+cAZ6gnUGho6DipKaj/6ipp/+srKv/r7Cu/7K0sv+1t7X/ubq4/7y9u/+/wL7/wcPB/8XGxP/Jycf/ysnG/72pof+0mo7/inFm/5JeN//xumr/8rxt/+ehYP/DmoX/3dza/+jn5//y6uX/7NLH//GpfP/4xXz/+96P/+DBgf+DWz3/w559//zhvf/+8tP//u7R/9u6g//c1dP/9vb2//X19P/09PP/9PTz//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/v6+j/y7iv/5hwWf/3xID//9SL//itdv/Tt6j/6+nm/+3u7P/t7uv/7Ozq/+rq6f/p6ej/6Ojn/+fm5v/l5eP/4+Pi/+Li4f/g4N//39/e/93e3P/c29v/2tvZ/9jZ1//X19b/1NTU/9LR0f/Pz87/zc7M/8zNy//Jy8j/xsfF/8TFw//BwcD/vr++/7u+u/+4ubf/tba0/7Kzsf+vsK7/q6yq/4ZcR/+eUSj/g11L/62bkv+XmZdal5mVAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnp+dA6GjoH6kpqP/p6mn/6ysq/+wsK3/s7Sx/7a3tf+5urn/vb67/7/Avv/CxMH/xcbE/8jJx//LzMv/ysbC/7mimf+0mo//eV5S/7iBSv/zwnX/9MV9/+iub//Xw7n/8+3q/+3Wy//ztIT/+MyE//raif/OqGf/aUgx/7Cfmf/VvK///NOc//7rt//937D/wJVv/9nUz//09PP/9PTz//T09P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//T08//m2tX/qY6D/76EV//+1Yr//b96/92hgP/k2tX/7u7t/+3t7P/s7Ov/6+vq/+rq6P/p6Of/5+jm/+bm5f/k5OP/4uLh/+Hh4P/g4N7/3t7d/9zc3P/b29r/2dnY/9jX1v/W1tX/0tLR/8/Qzv/Nz8z/y83K/8nLyP/Hycb/xMXE/8HCwf+/wL7/vL67/7i6t/+1trT/srOx/6+wrv+rrar/j1g8/39EJf+adWP/pJ6ZppiZlhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoaKgIKSmpLioqqf/rK6q/6+wrv+ytLL/tri1/7q7uP+9vrz/wMG//8LEwv/GxsT/ycnH/8rMyv/Pz87/yL+7/7iflf+ympD/dlVE/9irZv/20o//99eW/+3Jjv/039X/9s6k//rbov/63Jz/zKVn/2VFMf+VgXn/6N/a/8umkv/7y4v//eOf//zRkP+pf2L/3dfU//T08//09PL/9fXz//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//Dr6f/Ou7H/mHFa/++4df/9z4T/96p0/9G0o//r6eb/7u7u/+7t7P/s7Or/6urp/+np5//o5+f/5ebl/+Tl4//j4+L/4eHg/+Dg3//e3t7/3d3c/9vc2v/Z2dj/19jX/9bW1P/S09H/z9DO/83PzP/Lzsr/ycvI/8fIxv/ExsP/wsPA/7/Avv+8vbv/uLu3/7S3tP+ytLH/r7Gu/6KhnP+UVDP/b0cy+qCHe7GcnpolAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACipKIBo6WkSKiqp+Ksrqr/sLGu/7O0sv+2t7T/uru3/72/vP/Awb//w8TC/8bHxP/Jysf/y8zK/8/Qzv/Q0M//xrmw/7ykmv+ynZX/kWBE/+/Tjv/757f//O7b//vq1P/76r7/+ue4/9G1cP9vTDn/nIqA/+Da1//o3tj/xZqB//rIgP/93pD/+8SA/5t2YP/i3tz/8/Py//X18//19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0/+fc1/+njoL/tX1S//zNg//7vHX/46R//+DUzv/t7ez/7e7s/+zs6//q6+r/6erp/+fo5//m5uX/5eTj/+Tj4v/h4uD/4OHf/97f3v/d3tv/3Nva/9na2P/Z2df/1dfV/9LT0f/P0M7/zs/N/83Oy//Ky8j/x8jG/8TFw//Cw8H/v8C+/72+vP+5urj/tbe0/7K0sf+vsK7/l4qB/3hFKv9lRDaXlYqDB5yemwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACkpqMBqaqndautq/yvsa//s7Oy/7e4tv+6u7n/vb+8/8DBv//ExMP/xsjF/8nLyP/Nzcz/z9DO/9LRz//R0c//xrau/8Owp/++rqH/z5Fc//zz5f/++/b//vv1//326//t25P/jmNN/7irpf/k4N7/7Orp/+TX0v/Elnr/+sV5//zYiv/6vXb/mXdk/+Xi4P/09PP/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/8O3q/9PAuP+Sblz/4adp//zJf//4qW7/0q2a/+vn5P/u7u3/7Ozr/+vr6v/q6uj/6Ono/+fn5v/l5eP/5OTi/+Lj4v/h4eD/4N/f/97d3f/c3Nr/2tvZ/9na2P/V1tT/0tPR/9HQ0P/Oz83/zM/L/8rMyf/IyMX/xcbD/8LDwf/Awb//vb68/7q6uf+2t7X/srSw/6+xrv+Ca2D+Wjws1VE8MisAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACpqqcQrK2rnrCxr/2ztbL/tri2/7u7uf++v73/wMHA/8TFw//HyMb/ycrH/8zNy//Q0c//0dLR/9TU0//V1NL/2c3H/93Qyv/m1bz//fTr//779//++/j//vr1//Pkyf/a0cz/7u3s/+zt6//t7On/4dTN/8OUd//5xHj/+9SF//i2cP+ZeWn/6Obl//T19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/6N/Z/6+YjP+kcU3/+cF6//q5cv/vpXr/2cnA/+zr6f/t7ev/7Ovq/+vq6f/o6ef/5+fm/+bm5f/k5OP/4uPh/+Hi4P/g4N//3d/d/9zd2//a29n/2NnY/9XW0//S1NL/0NHP/8/Qzv/Nz8z/yszJ/8fJxv/FxsT/w8TB/8DBvv+8vrr/ubq4/7a2tf+ytLH/ra+r/nBdU9NLMyhDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsraokr7CuwLO1sv63ubb/ury5/76/vf/Bwr//xMXD/8fIxv/Jy8j/zM3L/9DRz//R09D/1NXT/9nZ2P/q4d3/6dnT//PVqv/88OL//vr1//769v/++vP/++zf/+zWyv/r5+X/7e3s/+7r6f/e0cv/w5N1//nCeP/60YL/87Fs/5t+bv/t6+n/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/x7+z/3czE/5R2Zv/QkVn/+sB3//ekZf/Wpo7/6OLd/+3t7P/s7Ov/6+vp/+nq6P/o5+f/5eXl/+Tk4//j4+H/4eLg/+Dh3//e393/3Nzc/9rb2v/Y2Nf/1tfV/9PU0v/Q0c//ztDO/83Ozf/Ly8r/yMnH/8XGxP/DxMH/v8C+/7y9vP+6u7n/tre1/7Kzsf+op6bhdF9WQCYTCgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvsa5Cs7Wy2Le5tv+6vLr/vr+9/8HCwP/ExcP/xsjG/8nLyf/Mzcv/0dHP/9HS0P/U1dP/5N3a/+HPxv/ntZD/9dKL//rnrf/z6tL/8Ovl//z06f/76cP/9c6Q/+HArv/n4+H/7evp/9zOx//AkHL/+MB1//rOf//xrWv/nX9w/+/t7P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/r4+D/vKOZ/5RoTP/xsGz/+LZv//Ghb//VvbD/6+jm/+zs6//q6+r/6uro/+jn5//l5uX/5eXk/+Pj4v/i4uH/4eHg/9/f3v/d3dz/2tvZ/9jY1//X19X/09PT/9HR0P/P0M7/zM/M/8rMyv/IyMf/xMXD/8LEwf/Awb7/vb68/7q7uP+2t7T/sbOw/6GalJd4YVcOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACztbJXt7i25ru8uf++v77/wcLA/8TFw//Hycb/ysvJ/8zNy//Q0c//0dLQ/9nX0v/ey8P/3KWI/+utaP/0zIb/6Ml8/6BuUf+xiXf/4s55//jfov/30pL/77Bx/9mvmf/o4+D/3tDJ/7mLb//2u3D/+ct9//Craf+dgXL/7+3s//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//Tz8f/j1M3/m39z/7V3S//2tXD/9KZj/+SkgP/g1tD/6+vq/+vr6v/q6uj/5+fn/+bn5f/l5eT/4+Pi/+Li4f/h4N//39/e/9zd2//a2tn/2dnX/9fX1v/U1NP/0dHQ/8/Qzv/Nz8z/y8zK/8jIx//FxcT/w8PC/7/Avv+8vrv/ubq4/7W4tP+wsq31jn94WycUCgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC3ubdmu7y67b6/vP/BwsD/xMXD/8fIxv/Ky8n/zM3L/9DRz//U09H/28rC/9Cmkv/fjlH/7LBo/+SvaP+YYkD/0cbD/93Rzf+gd2P/0a1m//bJgv/zv3T/7J5i/9mvmv/k19H/t452//S3cP/4yX3/8q5r/6KGdv/v7u3/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0/+/r6P/PubD/imVS/9mUWP/2sWv/8Jle/9Wumf/o5N//6+zq/+np6P/o6Of/5+bm/+Xl5P/j4+L/4uHh/+Dh4P/f393/3N3a/9vb2f/Y2tf/1tjW/9TV0//R0tD/z8/P/87NzP/Ly8n/yMnH/8XGxP/Dw8H/wL++/729u/+5u7j/tbe0+KunpIennZgLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC7vLlxvsC98MHCwP/ExcP/x8jG/8rLyf/Nzsz/0NDO/9XMx//Msab/1oZZ/+WeV//moVz/mmE7/5F5bv/c0Mv/1ca//8e2sP+AXUr/xpJU//O8bv/ytmr/6Zti/961ov/Vpo3/8bZx//fLhP/2tnT/qo99//Hw7//29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0/+fb1/+ulYj/lmJD/+2lZP/ypWL/6phq/9bAtP/p6Ob/6urp/+fp5v/n5ub/5eXk/+Pj4v/i4uH/4eDg/97f3f/b3Nv/2tvZ/9ja1//X2Nb/1NXT/9DS0P/O0M//zM3M/8rLyf/Iycf/xcbE/8LDwf+/wL7/vLy6/7i6uPm2t7WYtbSxDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC+v718wcLA8sTFw//HyMX/ysvJ/83PzP/Qz87/0Lqw/8OOdP/dik3/5Z1Y/7Z1Q/9pUEP/0czI/+De3f/XysT/y7ix/7mlnP9vUUD/uYFK//G1av/ytGr/7J9m/+yqfP/1wYH/+NKU//fDhP+7ooz/8vDw//f39v/29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/8u/u/97Mxf+Qc2f/sHFE//CmYv/umFr/4p99/9/Uz//q6uf/5+jm/+fn5f/l5eT/4+Pi/+Li4f/h4eD/3t/c/9zc2v/a29n/2NnX/9fX1v/U1NP/0dHQ/8/Pzv/Mzcv/ysvJ/8jJx//FxsT/wsPB/7/Avv+7vLv5ubq3nre3tBMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBwsB3xcXD78fIxf/Ky8n/zc7N/9DFwP/Do5X/y3pQ/9+QUP/Xik3/aUMw/7msp//f397/4OHg/+Df3P/UxL3/xrKo/7SelP9tUEL/s3tF//C3bP/zvHb/9MN///fSlP/53KP/+deY/9C2l//08/L/+Pj3//f39v/29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/z9PP/7Ojk/823rf+BXk3/y4JM/++gXf/rjlP/16mS/+bh3f/n6ef/5ubm/+Xl5P/j5OL/4uLh/+Dg3//e3tz/293b/9rb2f/Y2df/19jW/9PV0v/S0tH/z8/O/8zNy//Ky8n/x8jG/8TFw//BwsD/v8C9+Lu8uZa5urcPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADFxcRux8nF6MrMyP/Nzsv/yras/7CId//MdkP/24hM/5pcNf+MenH/397d/97f3v/g4eD/4uLh/+Hf3P/Rw7z/xa+m/7egl/9yVkf/tIBK//PDff/30pL/+d6k//vqw//768b/48if//f19f/6+vn/+Pj3//b29v/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//Pz8v/y8vH/5tzX/7Wbj/+EVz7/3I5S/+uXV//kjFr/1Len/+Xj3//n5+X/5eXk/+Pk4v/i4uH/4ODf/93e3P/c3Nv/2trZ/9nZ2P/W1dP/09TS/9DS0P/Oz83/zM3L/8nKyP/GyMb/xMXD/8HCwPS+wL2PvLy5CwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADHyMZgysvJ3czNy//HraD/nnFd/892Qf/PeEL/b0w7/9HNyv/b3dv/3t/d/+Dh3//h4uD/4+Pj/+Ph3//TxL3/xbCn/7umnf+DZVb/volQ//TVkv/76sv//fXq//337v/z7eb/+vn4//v7+v/5+fj/9/f2//b29f/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fP/8/Py//Py8f/w8O//4NHJ/5+Cdf+QWTj/5JFT/+eOUv/hj2X/1cC1/+Pj4P/k5eP/4+Pi/+Li4f/f397/3t3d/9zc2//a2tn/2NjY/9XV0//U09L/0dHQ/87Ozf/LzMr/ycnI/8fHxf/ExcLtwMK/fr6/vQcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADKy8hKzM3Lxse0q/eLZlX/qlsy/7FhNf+YiYH/2drZ/9vd2//e393/4ODf/+Hh4P/k4+L/5ubl/+Tj4f/UyMH/ybOq/8a1rP+ignP/z49X//fr0v/99+7//fjx//z38P/38/D/+vr6//n5+f/39/f/9vb1//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//T18//z8/P/8fHx//Hw7//s6ef/28W8/4lsXf+cXDb/5Y9R/+SHTf/ck2z/1cW8/+Pj4f/i5OH/4eLg/9/f3P/e3dz/3Nzb/9na2f/Y2Nf/1dXU/9LU0v/R0s//zs/M/8vMyv/Jysj/xsfF3cPEwmQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzcwsy8jFbp2Ge5hbOSj0dEUu/8zJxv/Z2tj/3Nzb/97e3f/g4N//4eHg/+Pj4v/l5uT/5ufl/+Xl5P/bzsn/0sC2/9rLxf/JrJv/5cCF//z06v/99+///ffu//nu5f/v49z/9PPx//f39v/29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/8/T0//Lz8v/x8fH/8PDv/+7v7v/p5OH/0Lar/3tcTf+jXzX/5IpP/+CASf/Xkm7/18nA/+Lh4P/g4N//3t7c/93d3P/b3Nr/2drZ/9fY1v/U1dP/0tTS/9HS0P/Oz83/y8vK/8jJxr/Gx8RDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFpDOFh0Ylnb19jX/9na2P/b3Nv/3t7c/+Dg3v/h4d//4uPh/+Xl5P/m5uX/5ujm/+rp6P/i2NT/3c3H/+bZ1f/czLD/9+jB//zz5//88+b/+ufG//PNjP/jwa//59/b//b29f/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//P18//08vL/8/Lw//Lx7//w8O//7/Dv/+3u7f/m3dn/xqud/3VTQ/+gXDT/4INK/9x8Rv/RjWr/0sS7/+Dg3//e393/293b/9vb2v/Z2dj/1dbU/9XV1P/T09L/0NHP/83OzPTKy8mdyMnGJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMS+uV3W1dT/2NjX/9rc2f/d3dz/39/e/9/g3//h4uD/5OXj/+Xm5P/n5+b/6Ojn/+vr6//n4t7/5trV/9nLxv/kunL/99qP//fYkP/204v/9MeC/+6tav/doHz/2cS4//Lx8P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/09PT/8/Tz//Py8f/y8fH/8fDv/+/w7f/u7+3/7e7r/+zs6//j2dT/wKCS/3FQP/+RUS3/2X5G/9h5Qv/OhmH/zbit/9zc2v/b3dr/2tva/9fZ1//V1tT/1NXT/9HT0f/Q0c/Wzc7MasrLyQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAz87LGNbX1JPY2Nft2trZ/93d2//f3t7/3+Df/+Lh4f/j5OL/5Obj/+fm5f/n6Ob/6uvp/+zs7P/r5uT/3tHL/8Wacv/xv3X/8sJ6/+azZ//Un1v/7qtn/+ucXP/dkF//0aSO/+fi3//19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9PX0//Pz8//z8vL/8/Px//Dw8P/w7+//7+7t/+3t7f/s7Ov/6+zp/+nq6f/h19L/wKCR/3VRQf94QyX/vWs7/9R1QP/NfFT/yZ+K/9PLxv/a2dn/19fV/9XW1P/U1NP50dLQo9DQzzoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1tfUCNfY11La2tm629zb/93e3P/e4N3/4eHg/+Pk4v/k5OP/5eXl/+fo5v/p6uj/6urp/+zr6//u497/sJWC/9eUVP/sqWX/4Jpj/5tsUf+LVTD/145R/+qYV//ljFT/1pJu/9a9sf/y8e//9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X09P/09PT/9PPz//Px8v/x8e//7/Hu/+7v7f/t7e3/7O3s/+zs6//r6un/6enp/+jo6P/g2dP/yKma/4JaSP9jOSX/i0sq/7RgNf/Fazz/rG5P/6KPhe7Oyseg0dLPmdPT0mbS0dASAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANra2SHb3Np03d3c097e3f/f4d//4+Lh/+Tj4v/l5OP/5+bl/+jo5//p6ej/6+rp/+7n4//DrqP/qGxH/+aXVv/jj1b/zKaU/6GNgv9rRjH/pmc6/+WVVP/nj1H/3IhZ/9Kdg//g1M//9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9PTy//Tz8v/y8vH/8fLw//Hw8P/v8e//7u/t/+7t6//s7er/6uzp/+nq6f/p6ej/6Ojm/+Xm5f/g3Nf/07uv/6R4Zf9tQzD/XzQg/1wyG/9VMyPsZ01BeKSUig7GvrkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADd3dwy3t7dgd/g3tvh4uH/4uPi/+Xk4v/l5uX/5+jn/+no5//q6ej/6uno/+bVzv+Qb2D/xXdD/+GJTv/anX3/5s/E/8Oto/9/Zlr/b0In/6xqPf/lkVH/44tR/9eJYP/RqZX/5+Le//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/09PP/9PTz//P18v/z9PL/8vLx//Ly8P/x8u//8O/w/+7v7v/t7ez/7ezr/+vs6//q6un/6enn/+jo5v/m5+X/5OXk/+Tk4v/i4uL/2tDK/8uxpP+ogW//hF1Mq3FRQzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADe3t0F39/eNuHh4IDi4uHU4+Ph/+Tl5P/m6Of/6efm/+jo5//p6ur/6+Xg/8Wqnv+HVTz/2IJJ/9h8Sf/Ttqn/7NTL/97Gvf+xm5P/eF5S/2xAJf+qaDv/4YlN/96HUf/VjGX/0q6b/+nm4//19fT/9fX0//T08//09PP/9PTz//Tz8v/z8/L/8vPx//Ly8f/x8fD/8fDv//Hw7//u7+7/7e3s/+zs6//r6+r/6urq/+np6P/p6Of/5+fm/+bl5f/j5eP/5OPi/+Hi4P/f4N//3d7c49nW047X0swTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4eHgBeLi4S7i4+Fs5OTjuubm5f7n5uX/5+fm/+np6P/q6+j/6dnS/51+bv+NUjH/2n1G/7x5WP/k2tf/7t/Y/+vTx//bwbb/spuR/3ddUP9mPCP/llky/8d4Q//bg0//1Itk/9GmkP/i2NP/8/Py//Pz8v/z8/L/8/Lx//Ly8f/x8fD/8fHw//Dw7//v8O7/7+/v/+7u7P/s7Ov/6+vq/+rq6f/q6ej/6Ojn/+fn5v/m5uX/5eXk/+Pk4v/i4uH/4OHfyd/f3Xzd3dw229zbCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOLj4QHk5OMe5eXlSeXm5ZDm5uXU6Ojm/+jq5//p6Ob/28S6/4dlVf+GSSn/1XRD/8Sgjf/w7ez/7+jl/+3e1//r0cX/2byv/7Wbkf+FbGD/YUIw/3JBJP+fXDL/xnND/9WCV//SmHz/17yt/+ro5f/x8fD/8fHw//Dw7//w8O//7+/u/+7v7P/s7uz/7ezs/+zr6//q6un/6eno/+no6P/n5+b/5ubl/+Tl5P/j5OPg4uLhoOHi4FXg4d8k39/dBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5eblDebm5STn5+ZS6ennkunp6cvo5uT61r2x/4RhUf9cMRv/ikor/76upf/v7+7/7+7t/+/r6P/u4Nr/69PI/9u8rv/Gppb/oYR3/3pdUP9bOyv/YTYe/31EJv+iXDj/vXNP/8mRdf/TsqH/3M7F/+fi4P/t7ev/7u7s/+3t7P/r7ev/6+vp/+nq6P/o6ef/5+jm/+bn5dfl5eSf5OTkX+Pk4yzi4uETAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADp6egO6enoH+rp6T3p6OV20r60joRhUoxZPzK/X0c9y8S9udru7+3/7+/u/+/v7v/u7On/7ufj/+rb1P/jy7//0rGi/8Ofjv+qiXr/jnBj/2lQQ/9MNCj/Pygc/0IrH/1WPzT4bFdN7It5cNSzpZ6rzMK9j9HHworXz8uAyb+7gb+1sXXUz81N5OTjJeXl5BLk5OQBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOrr6Qfr6ukL6N/aA9m/tAavl40SrZ+YHuXl4m7t7eyp7u7syO7u7dzu7u3m7+/t7u3s6u/s6OXv6+Pf7+fa1O/j0cjv4M3D8tzHvuHZxLp81MC2Ks66siXItawdwbCnGL+vphHEta0Ny763C9jNxwrPxsIK0svJBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////8////////5f//0AAAAABzoIB/////8AAAAAAAAAAAAAAAAD///gAAAAAAAAAAAAAAAAAD//gAAAAAAAAAAAAAAAAAAP/4AAAAAAAAAAAAAAAAAAD/+AAAAAAAAAAAAAAAAAAAf/gAAAAAAAAAAAAAAAAAAH/4AAAAAAAAAAAAAAAAAAD/+AAAAAAAAAAAAAAAAAAA//4AAAAAAAAAAAAAAAAAAf//4AAAAAAAAAAAAAAAAB////9gAAAAAAAAAAAAAAf//////+AAAAAAAAAAAP/////////AAAAAAAAAAAP/////////gAAAAAAAAAAA/////////gAAAAAAAAAAAP////////wAAAAAAAAAAAB////////4AAAAAAAAAAAAH///////8AAAAAAAAAAAAA///////+AAAAAAAAAAAAAD///////AAAAAAAAAAAAAAf//////gAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAf/////4AAAAAAAAAAAAAAH/////8AAAAAAAAAAAAAAA/////+AAAAAAAAAAAAAAAH/////AAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAH////4AAAAAAAAAAAAAAAA////+AAAAAAAAAAAAAAAAP////AAAAAAAAAAAAAAAAB////gAAAAAAAAAAAAAAAAP///4AAAAAAAAAAAAAAAAD///4AAAAAAAAAAAAAAAAAf//+AAAAAAAAAAAAAAAAAD///AAAAAAAAAAAAAAAAAA///wAAAAAAAAAAAAAAAAAH//4AAAAAAAAAAAAAAAAAB//+AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAf/4AAAAAAAAAAAAAAAAAAH/+AAAAAAAAAAAAAAAAAAB//AAAAAAAAAAAAAAAAAAAf/wAAAAAAAAAAAAAAAAAAD/8AAAAAAAAAAAAAAAAAAA/+AAAAAAAAAAAAAAAAAAAP/gAAAAAAAAAAAAAAAAAAB/4AAAAAAAAAAAAAAAAAAAf+AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP+AAAAAAAAAAAAAAAAAAAH/gAAAAAAAAAAAAAAAAAAB/4AAAAAAAAAAAAAAAAAAA//AAAAAAAAAAAAAAAAAAAP/wAAAAAAAAAAAAAAAAAAD/8AAAAAAAAAAAAAAAAAAB//gAAAAAAAAAAAAAAAAAAf/4AAAAAAAAAAAAAAAAAAH/+AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//gAAAAAAAAAAAAAAAAAH//4AAAAAAAAAAAAAAAAAB///AAAAAAAAAAAAAAAAAA///wAAAAAAAAAAAAAAAAAP//+AAAAAAAAAAAAAAAAAH///gAAAAAAAAAAAAAAAAB///8AAAAAAAAAAAAAAAAA////gAAAAAAAAAAAAAAAAf///4AAAAAAAAAAAAAAAAH////AAAAAAAAAAAAAAAAH////4AAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAA/////4AAAAAAAAAAAAAAAf/////AAAAAAAAAAAAAAAH/////4AAAAAAAAAAAAAAD//////AAAAAAAAAAAAAAB//////4AAAAAAAAAAAAAA///////AAAAAAAAAAAAAAf//////4AAAAAAAAAAAAAP///////AAAAAAAAAAAAAH///////4AAAAAAAAAAAAH////////AAAAAAAAAAAAD////////+AAAAAAAAAAAB/////////wAAAAAAAAAAA/////////8AAAAAAAAAAA//////////gAAAAAAAAAAf/////////+AAAAAAAAAAf//////////4AAAAAAAAA////////////AAAAAAAAAf///////////8AAAAAAAAP////////////wAAAAAAAP/////////////gAAAAAAf//////////////AAAAAAf//////////////+AAAAB//////////////////////////////////////////////////8=",
        "usr/volcanos/proto.js": "dmFyIGtpdCA9IHsKCURpY3Q6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgeyByZXNbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdIH0KCQlyZXR1cm4gcmVzCgl9Cn0KdmFyIGljZSA9IHsKCVRCOiAiXHQiLCBTUDogIiAiLCBERjogIjoiLCBFUTogIj0iLCBBVDogIkAiLCBQUzogIi8iLCBQVDogIi4iLCBGUzogIiwiLCBOTDogIlxuIiwgTFQ6ICI8IiwgR1Q6ICI+IiwKCU9LOiAib2siLCBUUlVFOiAidHJ1ZSIsIEZBTFNFOiAiZmFsc2UiLCBTVUNDRVNTOiAic3VjY2VzcyIsIEZBSUxVUkU6ICJmYWlsdXJlIiwgUFJPQ0VTUzogInByb2Nlc3MiLAoKCUFVVE86ICJhdXRvIiwgTElTVDogImxpc3QiLCBCQUNLOiAiYmFjayIsIEVYRUM6ICJleGVjIiwKCVNIT1c6ICJzaG93IiwgSElERTogImhpZGUiLCBIRUxQOiAiaGVscCIsIEhUVFA6ICJodHRwIiwKCVZJRVc6ICJ2aWV3IiwgTU9ERTogIm1vZGUiLCBTSElQOiAic2hpcCIsIENPUFk6ICJjb3B5IiwKCglQT0Q6ICJwb2QiLCBDVFg6ICJjdHgiLCBDTUQ6ICJjbWQiLCBBUkc6ICJhcmciLCBSRVM6ICJyZXMiLAoJUlVOOiAicnVuIiwgRVJSOiAiZXJyIiwgT1BUOiAib3B0IiwKCUNBTjogImNhbiIsCglQV0Q6ICIuLyIsCgoJTVNHX0RFVEFJTDogImRldGFpbCIsCglNU0dfT1BUSU9OOiAib3B0aW9uIiwKCU1TR19BUFBFTkQ6ICJhcHBlbmQiLAoJTVNHX1JFU1VMVDogInJlc3VsdCIsCglNU0dfRklFTERTOiAiZmllbGRzIiwKCU1TR19TRVNTSUQ6ICJzZXNzaWQiLAoKCU1TR19TT1VSQ0U6ICJfc291cmNlIiwKCU1TR19UQVJHRVQ6ICJfdGFyZ2V0IiwKCU1TR19IQU5ETEU6ICJfaGFuZGxlIiwKCU1TR19VUExPQUQ6ICJfdXBsb2FkIiwKCU1TR19EQUVNT046ICJfZGFlbW9uIiwKCU1TR19BQ1RJT046ICJfYWN0aW9uIiwKCU1TR19TVEFUVVM6ICJfc3RhdHVzIiwKCU1TR19QUkVGSVg6ICJfcHJlZml4IiwKCglNU0dfRElTUExBWTogIl9kaXNwbGF5IiwKCU1TR19QUk9DRVNTOiAiX3Byb2Nlc3MiLAoKCU1TR19VU0VSTkFNRTogInVzZXIubmFtZSIsCglNU0dfVVNFUk5JQ0s6ICJ1c2VyLm5pY2siLAoKCU1TR19USVRMRTogInNlc3MudGl0bGUiLAoJTVNHX1RPUElDOiAic2Vzcy50b3BpYyIsCglNU0dfUklWRVI6ICJzZXNzLnJpdmVyIiwKCU1TR19TVE9STTogInNlc3Muc3Rvcm0iLAoJTVNHX1RPQVNUOiAic2Vzcy50b2FzdCIsCgoJUFJPQ0VTU19BR0FJTjogIl9hZ2FpbiIsCgoJRXJyV2FybjogIndhcm46ICIsCglFcnJOb3RMb2dpbjogIm5vdCBsb2dpbjogIiwKCUVyck5vdFJpZ2h0OiAibm90IHJpZ2h0OiAiLAoJRXJyTm90Rm91bmQ6ICJub3QgZm91bmQ6ICIsCn0KCnZhciBjdHggPSB7CglDT05URVhUOiAiY29udGV4dCIsIENPTU1BTkQ6ICJjb21tYW5kIiwgQ09ORklHOiAiY29uZmlnIiwKCUlOREVYOiAiaW5kZXgiLCBBUkdTOiAiYXJncyIsIFNUWUxFOiAic3R5bGUiLCBESVNQTEFZOiAiZGlzcGxheSIsIEFDVElPTjogImFjdGlvbiIsCglJTlBVVFM6ICJpbnB1dHMiLCBGRUFUVVJFOiAiZmVhdHVyZSIsCn0KdmFyIGNsaSA9IHsKCURBRU1PTjogImRhZW1vbiIsCglTVEFSVDogInN0YXJ0IiwgU1RPUDogInN0b3AiLCBPUEVOOiAib3BlbiIsIENMT1NFOiAiY2xvc2UiLCBCRUdJTjogImJlZ2luIiwgRU5EOiAiZW5kIiwKCglDT0xPUjogImNvbG9yIiwKCVJFRDogInJlZCIsIEdSRUVOOiAiZ3JlZW4iLCBCTFVFOiAiYmx1ZSIsCglZRUxMT1c6ICJ5ZWxsb3ciLCBDWUFOOiAiY3lhbiIsIFBVUlBMRTogInB1cnBsZSIsIE1BR0VOVEE6ICJtYWdlbnRhIiwKCVdISVRFOiAid2hpdGUiLCBCTEFDSzogImJsYWNrIiwKCglNQUtFOiAibWFrZSIsIE1BSU46ICJtYWluIiwgRVhFQzogImV4ZWMiLCBET05FOiAiZG9uZSIsCglDT0RFOiAiY29kZSIsIENPU1Q6ICJjb3N0IiwgQkFDSzogImJhY2siLCBGUk9NOiAiZnJvbSIsCglFUlJPUjogImVycm9yIiwgQ0xFQVI6ICJjbGVhciIsIFJFRlJFU0g6ICJyZWZyZXNoIiwKCVNIT1c6ICJzaG93IiwgRlVMTDogImZ1bGwiLAp9CnZhciBuZnMgPSB7CglaTUw6ICJ6bWwiLCBJTUw6ICJpbWwiLCBUWFQ6ICJ0eHQiLAoJSFRNTDogImh0bWwiLCBDU1M6ICJjc3MiLCBKUzogImpzIiwgR086ICJnbyIsIFNIOiAic2giLCBDU1Y6ICJjc3YiLCBKU09OOiAianNvbiIsCglQQVRIOiAicGF0aCIsIEZJTEU6ICJmaWxlIiwgTElORTogImxpbmUiLCBTSVpFOiAic2l6ZSIsCglTQVZFOiAic2F2ZSIsIExPQUQ6ICJsb2FkIiwgVEFHUzogInRhZ3MiLCBGSU5EOiAiZmluZCIsIEdSRVA6ICJncmVwIiwKCURJUjogImRpciIsIENBVDogImNhdCIsIERFRlM6ICJkZWZzIiwgVFJBU0g6ICJ0cmFzaCIsCglESVJfUk9PVDogImRpcl9yb290IiwKCVNDUklQVDogInNjcmlwdCIsCn0KdmFyIG1kYiA9IHsKCURJQ1Q6ICJkaWN0IiwgTUVUQTogIm1ldGEiLCBIQVNIOiAiaGFzaCIsIExJU1Q6ICJsaXN0IiwKCglJRDogImlkIiwgS0VZOiAia2V5IiwgVElNRTogInRpbWUiLCBaT05FOiAiem9uZSIsIFRZUEU6ICJ0eXBlIiwgTkFNRTogIm5hbWUiLCBURVhUOiAidGV4dCIsCglMSU5LOiAibGluayIsIFNDQU46ICJzY2FuIiwgU0hPVzogInNob3ciLCBIRUxQOiAiaGVscCIsCglTSE9SVDogInNob3J0IiwgRklFTEQ6ICJmaWVsZCIsIFRPVEFMOiAidG90YWwiLCBDT1VOVDogImNvdW50IiwgTElNSVQ6ICJsaW1pdCIsCglJTkRFWDogImluZGV4IiwgVkFMVUU6ICJ2YWx1ZSIsIEVYVFJBOiAiZXh0cmEiLCBBTElBUzogImFsaWFzIiwgRVhQSVJFOiAiZXhwaXJlIiwKCglDUkVBVEU6ICJjcmVhdGUiLCBSRU1PVkU6ICJyZW1vdmUiLCBJTlNFUlQ6ICJpbnNlcnQiLCBERUxFVEU6ICJkZWxldGUiLAoJTU9ESUZZOiAibW9kaWZ5IiwgU0VMRUNUOiAic2VsZWN0IiwKCUlOUFVUUzogImlucHV0cyIsIFBSVU5FUzogInBydW5lcyIsIEVYUE9SVDogImV4cG9ydCIsIElNUE9SVDogImltcG9ydCIsCglVUExPQUQ6ICJ1cGxvYWQiLAoKCVNFQVJDSDogInNlYXJjaCIsIEVOR0lORTogImVuZ2luZSIsIFJFTkRFUjogInJlbmRlciIsIFBMVUdJTjogInBsdWdpbiIsCglQQUdFOiAicGFnZSIsIE5FWFQ6ICJuZXh0IiwgUFJFVjogInByZXYiLCBMSU1JVDogImxpbWl0IiwgT0ZGRU5EOiAib2ZmZW5kIiwKCU1BSU46ICJtYWluIiwKCglGT1JFQUNIOiAiKiIsIFJBTkRPTVM6ICIlIiwKfQp2YXIgYWFhID0gewoJUEFTU1dPUkQ6ICJwYXNzd29yZCIsIFVTRVJOQU1FOiAidXNlcm5hbWUiLCBVU0VSTklDSzogInVzZXJuaWNrIiwgQkFDS0dST1VORDogImJhY2tncm91bmQiLCBBVkFUQVI6ICJhdmF0YXIiLAoJTEFOR1VBR0U6ICJsYW5ndWFnZSIsIEVOR0xJU0g6ICJlbmdsaXNoIiwgQ0hJTkVTRTogImNoaW5lc2UiLAoJTE9HSU46ICJsb2dpbiIsIExPR09VVDogImxvZ291dCIsIElOVklURTogImludml0ZSIsCglUT0tFTjogInRva2VuIiwKfQp2YXIgd2ViID0gewoJU1BBQ0U6ICJzcGFjZSIsIERSRUFNOiAiZHJlYW0iLCBTSEFSRTogInNoYXJlIiwKfQp2YXIgdGNwID0gewoJSE9TVDogImhvc3QiLCBQT1JUOiAicG9ydCIsCn0KdmFyIGdkYiA9IHsKCVNJR05BTDogInNpZ25hbCIsCn0KdmFyIGxleCA9IHsKCVNQTElUOiAic3BsaXQiLCBQUkVGSVg6ICJwcmVmaXgiLAp9CnZhciBzc2ggPSB7Cn0KCnZhciBjb2RlID0gewoJVklNRVI6ICJ2aW1lciIsIElOTkVSOiAiaW5uZXIiLCBGQVZPUjogImZhdm9yIiwKCUFVVE9HRU46ICJhdXRvZ2VuIiwgQ09NUElMRTogImNvbXBpbGUiLCBCSU5QQUNLOiAiYmlucGFjayIsIFdFQlBBQ0s6ICJ3ZWJwYWNrIiwgUFVCTElTSDogInB1Ymxpc2giLAoJS0VZV09SRDogImtleXdvcmQiLAp9CnZhciB3aWtpID0gewoJVElUTEU6ICJ0aXRsZSIsIEJSSUVGOiAiYnJpZWYiLCBSRUZFUjogInJlZmVyIiwgU1BBUks6ICJzcGFyayIsCglPUkRFUjogIm9yZGVyIiwgVEFCTEU6ICJ0YWJsZSIsIENIQVJUOiAiY2hhcnQiLCBJTUFHRTogImltYWdlIiwgVklERU86ICJ2aWRlbyIsCglGSUVMRDogImZpZWxkIiwgU0hFTEw6ICJzaGVsbCIsIExPQ0FMOiAibG9jYWwiLCBQQVJTRTogInBhcnNlIiwKCUNPTlRFTlQ6ICJjb250ZW50IiwKCglOQVZNRU5VOiAibmF2bWVudSIsIFBSRU1FTlU6ICJwcmVtZW51IiwKCglJVEVNOiAiLnN0b3J5IiwKCUgyOiAiaDIuc3RvcnkiLAoJSDM6ICJoMy5zdG9yeSIsCglESVZfUEFHRTogImRpdi5wYWdlIiwKfQp2YXIgY2hhdCA9IHsKCUxJQjogImxpYiIsIFBBR0U6ICJwYWdlIiwgUEFORUw6ICJwYW5lbCIsIFBMVUdJTjogInBsdWdpbiIsIE9VVFBVVDogIm91dHB1dCIsIFNUT1JZOiAic3RvcnkiLCBGTE9BVDogImZsb2F0IiwKCVRPQVNUOiAidG9hc3QiLCBDQVJURTogImNhcnRlIiwgSU5QVVQ6ICJpbnB1dCIsIFVQTE9BRDogInVwbG9hZCIsIENPTlRFWFRTOiAiY29udGV4dHMiLAoJTEFZT1VUOiAibGF5b3V0IiwgUFJPSkVDVDogInByb2plY3QiLCBDT05URU5UOiAiY29udGVudCIsIERJU1BMQVk6ICJkaXNwbGF5IiwgUFJPRklMRTogInByb2ZpbGUiLAoKCVRJVExFOiAidGl0bGUiLCBUT1BJQzogInRvcGljIiwgQkxBQ0s6ICJibGFjayIsIFdISVRFOiAid2hpdGUiLCBQUklOVDogInByaW50IiwKCVNIQVJFOiAic2hhcmUiLCBSSVZFUjogInJpdmVyIiwgU1RPUk06ICJzdG9ybSIsIEZJRUxEOiAiZmllbGQiLAoJUFVCTElDOiAicHVibGljIiwgUFJPVEVDVEVEOiAicHJvdGVjdGVkIiwgUFJJVkFURTogInByaXZhdGUiLAoJVVNFUjogInVzZXIiLCBUT09MOiAidG9vbCIsIE5PREU6ICJub2RlIiwKCglBR0VOVDogImFnZW50IiwgQ0hFQ0s6ICJjaGVjayIsIEdSQU5UOiAiZ3JhbnQiLAoJU1RBVEU6ICJzdGF0ZSIsIE1FTlVTOiAibWVudXMiLCBUUkFOUzogInRyYW5zIiwKCVNTTzogInNzbyIsIFdFQlNJVEU6ICJ3ZWJzaXRlIiwKCUxPQ0FUSU9OOiAibG9jYXRpb24iLAoKCWxpYnM6IFsiL2xpYi9iYXNlLmpzIiwgIi9saWIvY29yZS5qcyIsICIvbGliL21pc2MuanMiLCAiL2xpYi9wYWdlLmpzIiwgIi9saWIvdXNlci5qcyJdLAoJcGFuZWxfbGlzdDogWwoJCXtuYW1lOiAiSGVhZGVyIiwgaGVscDogIuagh+mimOagjyIsIHBvczogImhlYWQiLCBzdGF0ZTogWyJ0aW1lIiwgInVzZXJuaWNrIiwgImF2YXRhciJdfSwKCQl7bmFtZTogIlJpdmVyIiwgIGhlbHA6ICLnvqTogYrnu4QiLCBwb3M6ICJsZWZ0In0sCgkJe25hbWU6ICJBY3Rpb24iLCBoZWxwOiAi5bel5L2c5Y+wIiwgcG9zOiAibWFpbiJ9LAoJCXtuYW1lOiAiU2VhcmNoIiwgaGVscDogIuaQnOe0ouahhiIsIHBvczogImF1dG8ifSwKCQl7bmFtZTogIkZvb3RlciIsIGhlbHA6ICLnirbmgIHmnaEiLCBwb3M6ICJmb290Iiwgc3RhdGU6IFsibmNtZCIsICJudGlwIl19LAoJXSwKCXBsdWdpbl9saXN0OiBbCgkJIi9wbHVnaW4vc3RhdGUuanMiLAoJCSIvcGx1Z2luL2lucHV0LmpzIiwKCQkiL3BsdWdpbi90YWJsZS5qcyIsCgkJIi9wbHVnaW4vaW5wdXQva2V5LmpzIiwKCQkiL3BsdWdpbi9pbnB1dC9kYXRlLmpzIiwKCQkiL3BsdWdpbi9zdG9yeS9zcGlkZS5qcyIsCgkJIi9wbHVnaW4vc3RvcnkvdHJlbmQuanMiLAoJCSIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuanMiLAoJCSIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuanMiLAoJCSIvcGx1Z2luL2xvY2FsL2NvZGUveHRlcm0uanMiLAoJCSIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIiwKCQkiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLAoJCSIvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvdGVhbS9wbGFuLmpzIiwKCV0sCglQTFVHSU5fU1RBVEVfSlM6ICIvcGx1Z2luL3N0YXRlLmpzIiwKCVBMVUdJTl9JTlBVVF9KUzogIi9wbHVnaW4vaW5wdXQuanMiLAoJUExVR0lOX1RBQkxFX0pTOiAiL3BsdWdpbi90YWJsZS5qcyIsCgoJT05FTkdJTkU6ICJvbmVuZ2luZSIsIE9OREFFTU9OOiAib25kYWVtb24iLCBPTkFQUEVORDogIm9uYXBwZW5kIiwgT05MQVlPVVQ6ICJvbmxheW91dCIsIE9OTU9USU9OOiAib25tb3Rpb24iLCBPTktFWU1BUDogIm9ua2V5bWFwIiwKCU9OSU1QT1JUOiAib25pbXBvcnQiLCBPTlNZTlRBWDogIm9uc3ludGF4IiwgT05BQ1RJT046ICJvbmFjdGlvbiIsIE9OREVUQUlMOiAib25kZXRhaWwiLCBPTkZJR1VSRTogIm9uZmlndXJlIiwgT05FWFBPUlQ6ICJvbmV4cG9ydCIsCglPTlBMVUdJTjogIm9ucGx1Z2luIiwKCglPTk1BSU46ICJvbm1haW4iLCBPTkxPR0lOOiAib25sb2dpbiIsIE9OU0VBUkNIOiAib25zZWFyY2giLAoJT05TSVpFOiAib25zaXplIiwgT05UT0FTVDogIm9udG9hc3QiLCBPTlJFTU9URTogIm9ucmVtb3RlIiwKCU9OS0VZRE9XTjogIm9ua2V5ZG93biIsIE9OTU9VU0VFTlRFUjogIm9ubW91c2VlbnRlciIsIE9SSUVOVEFUSU9OQ0hBTkdFOiAib3JpZW50YXRpb25jaGFuZ2UiLAoJT05TVE9STV9TRUxFQ1Q6ICJvbnN0b3JtX3NlbGVjdCIsIE9OQUNUSU9OX1RPVUNIOiAib25hY3Rpb25fdG91Y2giLCBPTkFDVElPTl9OT1RPT0w6ICJvbmFjdGlvbl9ub3Rvb2wiLCBPTkFDVElPTl9DTUQ6ICJvbmFjdGlvbl9jbWQiLAoJT05PUEVOU0VBUkNIOiAib25vcGVuc2VhcmNoIiwgT05TRUFSQ0hGT0NVUzogIm9uc2VhcmNoZm9jdXMiLCBPTkNPTU1BTkRGT0NVUzogIm9uY29tbWFuZGZvY3VzIiwKCglfSU5JVDogIl9pbml0IiwgX0VOR0lORTogIl9lbmdpbmUiLCBfU0VBUkNIOiAiX3NlYXJjaCIsIF9PVVRQVVRTX0NVUlJFTlQ6ICJfb3V0cHV0cy4tMSIsCglfTkFNRVM6ICJfbmFtZXMiLCBfVE9BU1Q6ICJfdG9hc3QiLAp9CnZhciB0ZWFtID0gewoJVEFTSzogInRhc2siLCBQTEFOOiAicGxhbiIsCn0KdmFyIG1hbGwgPSB7CglBU1NFVDogImFzc2V0IiwgU0FMQVJZOiAic2FsYXJ5IiwKfQoKdmFyIHN2ZyA9IHsKCUdST1VQOiAiZ3JvdXAiLCBQSUQ6ICJwaWQiLCBHUklEOiAiZ3JpZCIsCglTSEFQRTogInNoYXBlIiwgVEVYVDogInRleHQiLCBSRUNUOiAicmVjdCIsIExJTkU6ICJsaW5lIiwgQ0lSQ0xFOiAiY2lyY2xlIiwgRUxMSVBTRTogImVsbGlwc2UiLAoJRzogImciLCBYOiAieCIsIFk6ICJ5IiwgUjogInIiLCBSWDogInJ4IiwgUlk6ICJyeSIsIENYOiAiY3giLCBDWTogImN5IiwgWDE6ICJ4MSIsIFkxOiAieTEiLCBYMjogIngyIiwgWTI6ICJ5MiIsCglQQVRIOiAicGF0aCIsIFBBVEgyVjogInBhdGgydiIsIFBBVEgySDogInBhdGgyaCIsCglNOiAiTSIsIFE6ICJRIiwgVDogIlQiLAp9CnZhciBodG1sID0gewoJLy8gRklFTERTRVQKCUZJRUxEU0VUOiAiZmllbGRzZXQiLCBMRUdFTkQ6ICJsZWdlbmQiLCBPUFRJT046ICJvcHRpb24iLCBBQ1RJT046ICJhY3Rpb24iLCBPVVRQVVQ6ICJvdXRwdXQiLCBTVEFUVVM6ICJzdGF0dXMiLAoJRk9STV9PUFRJT046ICJmb3JtLm9wdGlvbiIsIERJVl9BQ1RJT046ICJkaXYuYWN0aW9uIiwgRElWX09VVFBVVDogImRpdi5vdXRwdXQiLCBESVZfU1RBVFVTOiAiZGl2LnN0YXR1cyIsCglGSUVMRFNFVF9QQU5FTDogImZpZWxkc2V0LnBhbmVsIiwgRklFTERTRVRfUExVR0lOOiAiZmllbGRzZXQucGx1Z2luIiwgRklFTERTRVRfU1RPUlk6ICJmaWVsZHNldC5zdG9yeSIsCglGSUVMRFNFVF9IRUFEOiAiZmllbGRzZXQuaGVhZCIsIEZJRUxEU0VUX0ZPT1Q6ICJmaWVsZHNldC5mb290IiwKCUZJRUxEU0VUX0xFRlQ6ICJmaWVsZHNldC5sZWZ0IiwgRklFTERTRVRfTUFJTjogImZpZWxkc2V0Lm1haW4iLAoJRklFTERTRVRfQVVUTzogImZpZWxkc2V0LmF1dG8iLCBGSUVMRFNFVF9GTE9BVDogImZpZWxkc2V0LmZsb2F0IiwKCU9QVElPTl9BUkdTOiAic2VsZWN0LmFyZ3MsaW5wdXQuYXJncyx0ZXh0YXJlYS5hcmdzIiwKCUlOUFVUX0FSR1M6ICJpbnB1dC5hcmdzLHRleHRhcmVhLmFyZ3MiLAoJSU5QVVRfQlVUVE9OOiAiaW5wdXRbdHlwZT1idXR0b25dIiwKCgkvLyBIVE1MCglVUExPQUQ6ICJ1cGxvYWQiLCBVU0VSTkFNRTogInVzZXJuYW1lIiwgUEFTU1dPUkQ6ICJwYXNzd29yZCIsCglJTlBVVDogImlucHV0IiwgVEVYVDogInRleHQiLCBURVhUQVJFQTogInRleHRhcmVhIiwgU0VMRUNUOiAic2VsZWN0IiwgQlVUVE9OOiAiYnV0dG9uIiwKCUZPUk06ICJmb3JtIiwgRklMRTogImZpbGUiLCBTUEFDRTogInNwYWNlIiwgQ0xJQ0s6ICJjbGljayIsIFNVQk1JVDogInN1Ym1pdCIsIENBTkNFTDogImNhbmNlbCIsCglESVY6ICJkaXYiLCBJTUc6ICJpbWciLCBDT0RFOiAiY29kZSIsIFNQQU46ICJzcGFuIiwgVklERU86ICJ2aWRlbyIsCglUQUJMRTogInRhYmxlIiwgVEJPRFk6ICJ0Ym9keSIsIFRSOiAidHIiLCBUSDogInRoIiwgVEQ6ICJ0ZCIsIEJSOiAiYnIiLCBVTDogInVsIiwgTEk6ICJsaSIsCglBOiAiYSIsIExBQkVMOiAibGFiZWwiLCBJTk5FUjogImlubmVyIiwgVElUTEU6ICJ0aXRsZSIsCglIMTogImgxIiwgSDI6ICJoMiIsIEgzOiAiaDMiLAoJV1NTOiAid3NzIiwgU1ZHOiAic3ZnIiwgQ0FOVkFTOiAiY2FudmFzIiwgSUZSQU1FOiAiaWZyYW1lIiwgQ0hST01FOiAiY2hyb21lIiwKCgkvLyBDU1MKCUNMQVNTOiAiY2xhc3MiLCBGTE9BVDogImZsb2F0IiwgQ0xFQVI6ICJjbGVhciIsIEJPVEg6ICJib3RoIiwKCUJBQ0tHUk9VTkQ6ICJiYWNrZ3JvdW5kIiwgU0VMRUNUOiAic2VsZWN0IiwgSElEREVOOiAiaGlkZGVuIiwKCURJU1BMQVk6ICJkaXNwbGF5IiwgQkxPQ0s6ICJibG9jayIsIE5PTkU6ICJub25lIiwgRklYRUQ6ICJmaXhlZCIsCglPUEFDSVRZOiAib3BhY2l0eSIsCglTVFJPS0VfV0lEVEg6ICJzdHJva2Utd2lkdGgiLCBTVFJPS0U6ICJzdHJva2UiLCBGSUxMOiAiZmlsbCIsIEZPTlRfU0laRTogImZvbnQtc2l6ZSIsIEZPTlRfRkFNSUxZOiAiZm9udC1mYW1pbHkiLCBNT05PU1BBQ0U6ICJtb25vc3BhY2UiLAoJU0NST0xMOiAic2Nyb2xsIiwgSEVJR0hUOiAiaGVpZ2h0IiwgV0lEVEg6ICJ3aWR0aCIsIExFRlQ6ICJsZWZ0IiwgVE9QOiAidG9wIiwgUklHSFQ6ICJyaWdodCIsIEJPVFRPTTogImJvdHRvbSIsCglTUEVFRDogInNwZWVkIiwgUEFERElORzogInBhZGRpbmciLAoJTUlOX0hFSUdIVDogIm1pbi1oZWlnaHQiLCBNQVhfSEVJR0hUOiAibWF4LWhlaWdodCIsIE1BWF9XSURUSDogIm1heC13aWR0aCIsIE1JTl9XSURUSDogIm1pbi13aWR0aCIsIE1BUkdJTl9UT1A6ICJtYXJnaW4tdG9wIiwgTUFSR0lOX1g6ICJtYXJnaW4teCIsIE1BUkdJTl9ZOiAibWFyZ2luLXkiLAoJUExVR0lOX01BUkdJTjogMTAsIEFDVElPTl9IRUlHSFQ6IDMxLCBBQ1RJT05fTUFSR0lOOiAyMDAsCglURVhUX0FOQ0hPUjogInRleHQtYW5jaG9yIiwKCVRPR0dMRTogInRvZ2dsZSIsCgoJUEFHRTogInBhZ2UiLCBUQUJTOiAidGFicyIsCglNRU5VOiAibWVudSIsIE5PREU6ICJub2RlIiwKCVpPTkU6ICJ6b25lIiwgTkFNRTogIm5hbWUiLAoJTElTVDogImxpc3QiLCBJVEVNOiAiaXRlbSIsCglJQ09OOiAiaWNvbiIsCgoJSElERTogImhpZGUiLCBTSE9XOiAic2hvdyIsIEFVVE86ICJhdXRvIiwKCUhFQUQ6ICJoZWFkIiwgTEVGVDogImxlZnQiLCBNQUlOOiAibWFpbiIsIEZPT1Q6ICJmb290IiwKCVBMVUdJTjogInBsdWdpbiIsIExBWU9VVDogImxheW91dCIsIENPTlRFTlQ6ICJjb250ZW50IiwKCglESVZfUEFHRTogImRpdi5wYWdlIiwKCURJVl9UQUJTOiAiZGl2LnRhYnMiLAoJRElWX1pPTkU6ICJkaXYuem9uZSIsCglESVZfTElTVDogImRpdi5saXN0IiwKCURJVl9JVEVNOiAiZGl2Lml0ZW0iLAoJRElWX05BTUU6ICJkaXYubmFtZSIsCglESVZfQ09ERTogImRpdi5jb2RlIiwKCURJVl9MQVlPVVRfSEVBRDogImRpdi5sYXlvdXQuaGVhZCIsCglESVZfTEFZT1VUX0xFRlQ6ICJkaXYubGF5b3V0LmxlZnQiLAoJRElWX0xBWU9VVF9GT09UOiAiZGl2LmxheW91dC5mb290IiwKCVRBQkxFX0NPTlRFTlQ6ICJ0YWJsZS5jb250ZW50IiwKCURJVl9GTE9BVDogImRpdi5mbG9hdCIsCgoJRVNDQVBFOiAiRXNjYXBlIiwgRU5URVI6ICJFbnRlciIsIFRBQjogIlRhYiIsCglfQ1NTOiAiLmNzcyIsIF9KUzogIi5qcyIsCn0KdmFyIGxhbmcgPSB7CglVTkRFRklORUQ6ICJ1bmRlZmluZWQiLAoJU1RSSU5HOiAic3RyaW5nIiwgTlVNQkVSOiAibnVtYmVyIiwKCU9CSkVDVDogIm9iamVjdCIsIEZVTkNUSU9OOiAiZnVuY3Rpb24iLAoJRVNDQVBFOiAiRXNjYXBlIiwgRU5URVI6ICJFbnRlciIsIFRBQjogIlRhYiIsCglDT05UUk9MOiAiQ29udHJvbCIsIFNISUZUOiAiU2hpZnQiLAoJUFM6ICIvIiwKfQoKZnVuY3Rpb24gc2h5KGhlbHAsIG1ldGEsIGxpc3QsIGNiKSB7IHZhciBpbmRleCA9IDAsIGFyZ3MgPSBhcmd1bWVudHMKCWZ1bmN0aW9uIG5leHQodHlwZSkgeyBpZiAoaW5kZXggPCBhcmdzLmxlbmd0aCAmJiAoIXR5cGUgfHwgdHlwZSA9PSB0eXBlb2YgYXJnc1tpbmRleF0pKSB7IHJldHVybiBhcmdzW2luZGV4KytdIH0gfQoJcmV0dXJuIGNiID0gdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGgtMV0gPT0gbGFuZy5GVU5DVElPTj9hcmdzW2FyZ3MubGVuZ3RoLTFdOmZ1bmN0aW9uKCkge30sIGNiLmhlbHAgPSBuZXh0KGxhbmcuU1RSSU5HKXx8IiIsIGNiLm1ldGEgPSBuZXh0KGxhbmcuT0JKRUNUKXx8e30sIGNiLmxpc3QgPSBuZXh0KGxhbmcuT0JKRUNUKXx8W10sIGNiCn07IHZhciBfY2FuX25hbWUgPSAiIiwgX2Nhbl9wYXRoID0gIiIKdmFyIFZvbGNhbm9zID0gc2h5KCLngavlsbHmnrYiLCB7aWNlYmVyZzogIi9jaGF0LyIsIHZvbGNhbm86ICIvZnJhbWUuanMiLCBwYWNrOiB7fSwgY2FjaGU6IHt9fSwgZnVuY3Rpb24obmFtZSwgY2FuLCBsaWJzLCBjYikgewoJdmFyIG1ldGEgPSBhcmd1bWVudHMuY2FsbGVlLm1ldGEsIGxpc3QgPSBhcmd1bWVudHMuY2FsbGVlLmxpc3QKCWlmICh0eXBlb2YgbmFtZSA9PSBsYW5nLk9CSkVDVCkgeyB2YXIgQ29uZmlnID0gbmFtZSwgcGFuZWxzID0gQ29uZmlnLnBhbmVsc3x8Y2hhdC5wYW5lbF9saXN0CgkJbWV0YS5saWJzID0gQ29uZmlnLmxpYnN8fGNoYXQubGlicywgbWV0YS5pY2ViZXJnID0gQ29uZmlnLmljZWJlcmd8fG1ldGEuaWNlYmVyZwoKCQkvLyDpooTliqDovb0KCQlsaWJzID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgcGFuZWxzLmxlbmd0aDsgaSsrKSB7IHZhciBwID0gcGFuZWxzW2ldCgkJCXAgJiYgKGxpYnMgPSBsaWJzLmNvbmNhdChwLmxpc3QgPSBwLmxpc3R8fFsiL3BhbmVsLyIrcC5uYW1lK2h0bWwuX0NTUywgIi9wYW5lbC8iK3AubmFtZStodG1sLl9KU10pKQoJCX07IGxpYnMgPSBsaWJzLmNvbmNhdChDb25maWcucGx1Z2lufHxjaGF0LnBsdWdpbl9saXN0KQoKCQkvLyDmoLnmqKHlnZcKCQlfY2FuX25hbWUgPSAiIiwgbmFtZSA9IENvbmZpZy5uYW1lfHxpY2UuQ0FOLCBjYiA9IGNhbnx8ZnVuY3Rpb24oY2FuKSB7CgkJCWNhbi5vbmVuZ2luZS5faW5pdChjYW4sIGNhbi5Db25mKENvbmZpZyksIHBhbmVscywgQ29uZmlnLl9pbml0LCBjYW4uX3RhcmdldCkKCQl9LCBjYW4gPSB7X2ZvbGxvdzogbmFtZSwgX3RhcmdldDogQ29uZmlnLnRhcmdldHx8bWV0YS50YXJnZXQsIF9oZWlnaHQ6IENvbmZpZy5oZWlnaHR8fG1ldGEuX2hlaWdodCwgX3dpZHRoOiBDb25maWcud2lkdGh8fG1ldGEuX3dpZHRofQoJCWZvciAodmFyIGsgaW4gQ29uZmlnKSB7IGNhbltrXSA9IENvbmZpZ1trXSB9CgkJY2FuLl9yb290ID0gY2FuCgl9CgoJdmFyIHByb3RvID0ge19fcHJvdG9fXzogbWV0YSwgX3BhdGg6IF9jYW5fcGF0aCwgX25hbWU6IG5hbWUsIF9sb2FkOiBmdW5jdGlvbihuYW1lLCBlYWNoKSB7CgkJCS8vIOWKoOi9vee8k+WtmAoJCQl2YXIgY2FjaGUgPSBtZXRhLmNhY2hlW25hbWVdfHxbXTsgZm9yIChsaXN0LnJldmVyc2UoKTsgbGlzdC5sZW5ndGggPiAwOyBsaXN0KSB7CgkJCQl2YXIgc3ViID0gbGlzdC5wb3AoKTsgc3ViICE9IGNhbiAmJiBjYWNoZS5wdXNoKHN1YikKCQkJfTsgbWV0YS5jYWNoZVtuYW1lXSA9IGNhY2hlCgoJCQkvLyDliqDovb3mqKHlnZcKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZS5sZW5ndGg7IGkrKykgeyB2YXIgc3ViID0gY2FjaGVbaV0sIG5hbWUgPSBzdWIuX25hbWUKCQkJCWlmICh0eXBlb2YgZWFjaCA9PSBsYW5nLkZVTkNUSU9OICYmIGVhY2goY2FuLCBuYW1lLCBzdWIpKSB7IGNvbnRpbnVlIH0KCQkJCSFjYW5bbmFtZV0gJiYgKGNhbltuYW1lXSA9IHt9KTsgZm9yICh2YXIgayBpbiBzdWIpIHsKCQkJCQljYW5bbmFtZV0uaGFzT3duUHJvcGVydHkoaykgfHwgIXN1Yi5oYXNPd25Qcm9wZXJ0eShrKSB8fCAoY2FuW25hbWVdW2tdID0gc3ViW2tdKQoJCQkJfQoJCQl9CgkJfSwKCQlyZXF1aXJlTW9kdWxlczogZnVuY3Rpb24obGlicywgY2IsIGVhY2gpIHsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaWJzLmxlbmd0aDsgaSsrKSB7CgkJCQlpZiAobGlic1tpXS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjb250aW51ZSB9CgkJCQlpZiAobGlic1tpXS5pbmRleE9mKCIvIikgPT0gMCkgeyBjb250aW51ZSB9CgkJCQlpZiAobGlic1tpXS5pbmRleE9mKCIuY3NzIikgPT0gLTEgJiYgbGlic1tpXS5pbmRleE9mKCIuanMiKSA9PSAtMSkgeyBsaWJzW2ldID0gbGlic1tpXSsiL2xpYi8iK2xpYnNbaV0rIi5qcyIgfQoJCQkJbGlic1tpXSA9ICIvcmVxdWlyZS9ub2RlX21vZHVsZXMvIitsaWJzW2ldCgkJCX0KCQkJY2FuLnJlcXVpcmUobGlicywgY2IsIGVhY2gpCgkJfSwKCQlyZXF1aXJlOiBmdW5jdGlvbihsaWJzLCBjYiwgZWFjaCkgeyBpZiAoIWxpYnMgfHwgbGlicy5sZW5ndGggPT0gMCkgewoJCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2IoY2FuKSB9LCAxMCkKCQkJCXJldHVybiAvLyDliqDovb3lrozmiJAKCQkJfQoKCQkJLy8g5peg5pWI5Zyw5Z2ACgkJCWlmIChsaWJzWzBdID09IHVuZGVmaW5lZCkgeyByZXR1cm4gY2FuLnJlcXVpcmUobGlicy5zbGljZSgxKSwgY2IsIGVhY2gpIH0KCgkJCWlmIChsaWJzWzBdID09ICIiKSB7CgkJCQkvLyDmoLflvI/lnLDlnYAKCQkJCWxpYnNbMF0gPSBjYW4uX25hbWUucmVwbGFjZShodG1sLl9KUywgaHRtbC5fQ1NTKQoJCQl9IGVsc2UgaWYgKGxpYnNbMF1bMF0gIT0gaWNlLlBTICYmIGxpYnNbMF0uaW5kZXhPZihpY2UuSFRUUCkgIT0gMCkgewoJCQkJLy8g55u45a+55Zyw5Z2ACgkJCQlsaWJzWzBdID0gY2FuLl9uYW1lLnNsaWNlKDAsIGNhbi5fbmFtZS5sYXN0SW5kZXhPZihpY2UuUFMpKzEpK2xpYnNbMF0KCQkJfQoKCQkJLy8g5Yqg6L295qih5Z2XCgkJCWxpYnNbMF0gPSBsaWJzWzBdLnRvTG93ZXJDYXNlKCkKCQkJdmFyIG5hbWUgPSBsaWJzWzBdLmluZGV4T2YoImh0dHAiKSA9PSAwPyBsaWJzWzBdOiBsaWJzWzBdLnNwbGl0KCI/IilbMF0KCQkJZnVuY3Rpb24gbmV4dCgpIHsgY2FuLl9sb2FkKG5hbWUsIGVhY2gpLCBjYW4ucmVxdWlyZShsaWJzLnNsaWNlKDEpLCBjYiwgZWFjaCkgfQoJCQltZXRhLmNhY2hlW25hbWVdPyBuZXh0KCk6IChfY2FuX3BhdGggPSBsaWJzWzBdLCBtZXRhLl9sb2FkKG5hbWUsIG5leHQpKQoJCX0sCgkJcmVxdWVzdDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQgPSBldmVudHx8e30sIGV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoJCQl2YXIgbXNnID0gZXZlbnQuX21zZ3x8Y2FuLm1pc2MuTWVzc2FnZShldmVudCwgY2FuKTsgZXZlbnQuX21zZyA9IG1zZwoJCQlmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkgewoJCQkJdmFsdWUgPT0gIiIgfHwgbXNnLk9wdGlvbihrZXkpIHx8IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkKCQkJCS8vIHR5cGVvZiB2YWx1ZSA9PSBsYW5nLkZVTkNUSU9OIHx8IHR5cGVvZiB2YWx1ZSA9PSBsYW5nLk9CSkVDVCB8fCB2YWx1ZSA9PSAiIiB8fCBtc2cuT3B0aW9uKGtleSkgfHwgbXNnLk9wdGlvbihrZXksIHZhbHVlKQoJCQl9CgoJCQkvLyDmt7vliqDlj4LmlbAKCQkJY2FuLmNvcmUuTGlzdChhcmd1bWVudHMsIGZ1bmN0aW9uKG9wdGlvbiwgaW5kZXgpIHsgaWYgKCFvcHRpb24gfHwgaW5kZXggPT0gMCkgeyByZXR1cm4gfSAKCQkJCWNhbi5iYXNlLmlzRnVuYyhvcHRpb24uT3B0aW9uKT8gY2FuLmNvcmUuTGlzdChvcHRpb24uT3B0aW9uKCksIGZ1bmN0aW9uKGtleSkgewoJCQkJCWlmIChrZXkuaW5kZXhPZigidXNlci4iKSA9PSAwKSB7IHJldHVybiB9CgkJCQkJaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJCXNldChrZXksIG9wdGlvbi5PcHRpb24oa2V5KSkKCQkJCX0pOiBjYW4uY29yZS5JdGVtKGNhbi5iYXNlLmlzRnVuYyhvcHRpb24pPyBvcHRpb24oKTogb3B0aW9uLCBzZXQpCgkJCX0pOyByZXR1cm4gbXNnCgkJfSwKCgkJYWN0aW9uczogZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtdKSB9LAoJCXJ1bkFjdGlvbkNvbW1hbmQ6IGZ1bmN0aW9uKGV2ZW50LCBpbmRleCwgYXJncywgY2IpIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgaWNlLlJVTiwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2luZGV4XSwgYXJncyksIGNiKSB9LAoJCXJ1bkFjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGFjdGlvbiwgYXJncywgY2IpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0sIGNhbi5PcHRpb24oKSkKCQkJY2FuLnJ1bihldmVudCwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2N0eC5BQ1RJT05dLmNvbmNhdChhY3Rpb24pLCBhcmdzKSwgY2J8fGZ1bmN0aW9uKG1zZykgewoJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4uc3VwLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4uc3VwLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBhY3Rpb24pCgkJCX0sIHRydWUpCgkJfSwKCgkJc2VhcmNoOiBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJaWYgKGNtZHMgJiYgdHlwZW9mIGNtZHMgPT0gbGFuZy5PQkpFQ1QgJiYgY21kcy5sZW5ndGggPiAwICYmIHR5cGVvZiBjbWRzWzBdID09IGxhbmcuT0JKRUNUICYmIGNtZHNbMF0ubGVuZ3RoID4gMCApIHsKCQkJCWNtZHNbMF0gPSBjbWRzWzBdLmpvaW4oaWNlLlBUKQoJCQl9CgkJCXJldHVybiBjYW4ucnVuICYmIGNhbi5ydW4oZXZlbnQsIFtjaGF0Ll9TRUFSQ0hdLmNvbmNhdChjbWRzKSwgY2IsIHRydWUpCgkJfSwKCQlnZXQ6IGZ1bmN0aW9uKG5hbWUsIGtleSwgY2IpIHsgcmV0dXJuIGNhbi5zZWFyY2goe30sIFtjYW4uY29yZS5LZXlzKG5hbWUsIGNoYXQuT05FWFBPUlQsIGtleSldLCBjYikgfSwKCQlzZXQ6IGZ1bmN0aW9uKG5hbWUsIGtleSwgdmFsdWUpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9KTsgbXNnLk9wdGlvbihrZXksIHZhbHVlKQoJCQlyZXR1cm4gY2FuLnNlYXJjaChtc2csIFtbbmFtZSwgY2hhdC5PTklNUE9SVCwga2V5XV0pCgkJfSwKCQlzZXRIZWFkZXJNZW51OiBmdW5jdGlvbihsaXN0LCBjYikgeyBjYW4uX21lbnUgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl9tZW51KQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHt0cmFuczogY2FuLm9uYWN0aW9uLl90cmFuc30pCgkJCXJldHVybiBjYW4uX21lbnUgPSBjYW4uc2VhcmNoKG1zZywgW1siSGVhZGVyIiwgY2hhdC5PTklNUE9SVCwgIm1lbnUiXSwgY2FuLl9uYW1lXS5jb25jYXQobGlzdCksIGNiKQoJCX0sCgkJc2V0SGVhZGVyOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4uc2V0KCJIZWFkZXIiLCBrZXksIHZhbHVlKSB9LAoJCWdldEhlYWRlcjogZnVuY3Rpb24oa2V5LCBjYikgeyByZXR1cm4gY2FuLmdldCgiSGVhZGVyIiwga2V5LCBjYikgfSwKCQlzZXRSaXZlcjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnNldCgiUml2ZXIiLCBrZXksIHZhbHVlKSB9LAoJCXNldEFjdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnNldCgiQWN0aW9uIiwga2V5LCB2YWx1ZSkgfSwKCQlnZXRBY3Rpb246IGZ1bmN0aW9uKGtleSwgY2IpIHsgcmV0dXJuIGNhbi5nZXQoIkFjdGlvbiIsIGtleSwgY2IpIH0sCgkJZ2V0QWN0aW9uU2l6ZTogZnVuY3Rpb24oY2IpIHsgcmV0dXJuIGNhbi5nZXQoIkFjdGlvbiIsICJzaXplIiwgY2IpIH0sCgoJCWlzU2ltcGxlTW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Nb2RlKCkgPT0gInNpbXBsZSIgfSwKCQlpc0Zsb2F0TW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Nb2RlKCkgPT0gImZsb2F0IiB9LAoJCWlzRnVsbE1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJmdWxsIiB9LAoJCWlzQ21kTW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Nb2RlKCkgPT0gImNtZCIgfSwKCQlNb2RlOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gY2FuLkNvbmYoaWNlLk1PREUsIHZhbHVlKSB9LAoJCUNvbmZEZWZhdWx0OiBmdW5jdGlvbih2YWx1ZSkgeyBjYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrLCB2KSB7IGNhbi5Db25mKGspIHx8IGNhbi5Db25mKGssIHYpIH0pIH0sCgkJQ29uZkhlaWdodDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Db25mKGh0bWwuSEVJR0hULCB2YWx1ZSkgfSwKCQlDb25mV2lkdGg6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uQ29uZihodG1sLldJRFRILCB2YWx1ZSkgfSwKCQlDb25mOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHZhciByZXMgPSBjYW4uX2NvbmYKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDIpIHsKCQkJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUKSB7CgkJCQkJcmVzID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9jb25mLCBhcmd1bWVudHNbaV0pLCBpLS0KCQkJCQljb250aW51ZQoJCQkJfQoJCQkJcmVzID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9jb25mLCBhcmd1bWVudHNbaV0sIGFyZ3VtZW50c1tpKzFdKQoJCQl9CgkJCWlmIChyZXMgPT0gdW5kZWZpbmVkICYmIGtleS5pbmRleE9mKGN0eC5GRUFUVVJFK2ljZS5QVCkgPT0gLTEpIHsKCQkJCXJldHVybiBjYW4uQ29uZihjYW4uY29yZS5LZXlzKGN0eC5GRUFUVVJFLCBrZXkpKQoJCQl9CgkJCXJldHVybiByZXMKCQl9LCBfY29uZjoge30sCgl9OyBjYW4gPSBjYW58fHt9LCBjYW4uX19wcm90b19fID0gcHJvdG8KCglpZiAoX2Nhbl9uYW1lKSB7IC8vIOWKoOWFpee8k+WtmAoJCW1ldGEuY2FjaGVbX2Nhbl9uYW1lXSA9IG1ldGEuY2FjaGVbX2Nhbl9uYW1lXXx8W10sIG1ldGEuY2FjaGVbX2Nhbl9uYW1lXS5wdXNoKGNhbikKCX0gZWxzZSB7IC8vIOWKoOWFpemYn+WIlwoJCWxpc3QucHVzaChjYW4pCgl9CglfY2FuX3BhdGggPSBfY2FuX25hbWV8fF9jYW5fcGF0aAoKCWlmIChjYW4uX2ZvbGxvdykgeyBsaWJzID0gbGlicy5jb25jYXQobWV0YS5saWJzLCBtZXRhLnZvbGNhbm8pIH0KCWlmIChsaWJzICYmIGxpYnMubGVuZ3RoID4gMCkgeyAvLyDop6PmnpDlj4LmlbAKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpYnMubGVuZ3RoOyBpKyspIHsKCQkJaWYgKGxpYnNbaV0gPT0gdW5kZWZpbmVkKSB7CgoJCQl9IGVsc2UgaWYgKGxpYnNbaV0gPT0gIiIpIHsKCQkJCWxpYnNbaV0gPSBfY2FuX3BhdGgucmVwbGFjZShodG1sLl9KUywgaHRtbC5fQ1NTKQoJCQl9IGVsc2UgaWYgKGxpYnNbaV1bMF0gIT0gaWNlLlBTICYmIGxpYnNbaV0uaW5kZXhPZihpY2UuSFRUUCkgIT0gMCkgewoJCQkJbGlic1tpXSA9IF9jYW5fcGF0aC5zbGljZSgwLCBfY2FuX3BhdGgubGFzdEluZGV4T2YoaWNlLlBTKSsxKStsaWJzW2ldCgkJCX0KCQl9Cgl9CglyZXR1cm4gY2FuLnJlcXVpcmUobGlicywgY2IpLCBjYW4KfSkKZnVuY3Rpb24gY2FuKHRvb2wpIHsKCVZvbGNhbm9zKHtwYW5lbHM6IFsKCQl7bmFtZTogIkhlYWRlciIsIGhlbHA6ICLmoIfpopjmoI8iLCBwb3M6IGh0bWwuSElERSwgc3RhdGU6IFthYWEuVVNFUk5JQ0tdfSwKCQl7bmFtZTogIkFjdGlvbiIsIGhlbHA6ICLlt6XkvZzlj7AiLCBwb3M6IGh0bWwuTUFJTiwgdG9vbDogdG9vbH0sCgkJe25hbWU6ICJTZWFyY2giLCBoZWxwOiAi5pCc57Si5qGGIiwgcG9zOiBodG1sLkFVVE99LAoJXX0pCn0KCnRyeSB7IGlmICh0eXBlb2Yod2luZG93KSA9PSBsYW5nLk9CSkVDVCkgeyAvLyBub2RlanMKCVZvbGNhbm9zLm1ldGEudGFyZ2V0ID0gZG9jdW1lbnQuYm9keQoJVm9sY2Fub3MubWV0YS5fd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAoJVm9sY2Fub3MubWV0YS5faGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0CglWb2xjYW5vcy5tZXRhLl9sb2FkID0gZnVuY3Rpb24odXJsLCBjYikgewoJCXN3aXRjaCAodXJsLnNwbGl0KCI/IilbMF0uc3BsaXQoaWNlLlBUKS5wb3AoKS50b0xvd2VyQ2FzZSgpKSB7CgkJCWNhc2UgbmZzLkNTUzoKCQkJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChtZGIuTElOSykKCQkJCWl0ZW0ucmVsID0gInN0eWxlc2hlZXQiLCBpdGVtLnR5cGUgPSAidGV4dC9jc3MiCgkJCQlpdGVtLmhyZWYgPSB1cmwsIGl0ZW0ub25sb2FkID0gY2IKCQkJCXJldHVybiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGl0ZW0pLCBpdGVtCgkJCWNhc2UgbmZzLkpTOgoJCQlkZWZhdWx0OgoJCQkJdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5mcy5TQ1JJUFQpCgkJCQlpdGVtLnNyYyA9IHVybCwgaXRlbS5vbmxvYWQgPSBjYiwgaXRlbS5vbmVycm9yID0gY2IKCQkJCXJldHVybiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGl0ZW0pLCBpdGVtCgkJfQoJfQp9IGVsc2UgeyAvLyBub2RlanMKCWdsb2JhbC5raXQgPSBraXQsIGdsb2JhbC5pY2UgPSBpY2UKCWdsb2JhbC5jdHggPSBjdHgsIGdsb2JhbC5jbGkgPSBjbGksIGdsb2JhbC53ZWIgPSB3ZWIsIGdsb2JhbC5hYWEgPSBhYWEKCWdsb2JhbC5tZGIgPSBtZGIsIGdsb2JhbC5zc2ggPSBzc2gsIGdsb2JhbC5uZnMgPSBuZnMsIGdsb2JhbC50Y3AgPSB0Y3AKCWdsb2JhbC5jb2RlID0gY29kZSwgZ2xvYmFsLndpa2kgPSB3aWtpLCBnbG9iYWwuY2hhdCA9IGNoYXQsIGdsb2JhbC50ZWFtID0gdGVhbSwgZ2xvYmFsLm1hbGwgPSBtYWxsCglnbG9iYWwuc3ZnID0gc3ZnLCBnbG9iYWwuaHRtbCA9IGh0bWwsIGdsb2JhbC5sYW5nID0gbGFuZwoJZ2xvYmFsLnNoeSA9IHNoeSwgZ2xvYmFsLlZvbGNhbm9zID0gVm9sY2Fub3MsIGdsb2JhbC5jYW4gPSBjYW4KfSB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKGUpIH0K",
        "usr/volcanos/frame.js": "Vm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLmkJzntKLlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5NU0dfU0VTU0lEKSkgeyBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCkpCgkJCXJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCwgIiIpIAoJCX0KCgkJY2FuLnJlcXVpcmUoW2Nhbi52b2xjYW5vXSwgbnVsbCwgZnVuY3Rpb24oY2FuLCBrZXksIHN1YikgeyBjYW5ba2V5XSA9IHN1YiB9KQoJCWNhbi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgY21kcyA9IGNtZHN8fFtdCgkJCXJldHVybiAoY2FuLm9uZW5naW5lW2NtZHNbMF1dfHxjYW4ub25lbmdpbmUuX3JlbW90ZSkoZXZlbnQsIGNhbiwgbXNnLCBjYW4sIGNtZHMsIGNiKQoJCX0sIFZvbGNhbm9zLm1ldGEuYXJncyA9IGNhbi51c2VyLmFyZ3MoY2FuKQoJCWNhbi51c2VyLnRpdGxlKGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVElUTEUpfHxjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKXx8bG9jYXRpb24uaG9zdCkKCgkJd2luZG93Lm9udW5sb2FkID0gZnVuY3Rpb24oKSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAib251bmxvYWQiKSB9CgoJCWNhbi5jb3JlLk5leHQobGlzdCwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBpdGVtLnR5cGUgPSBjaGF0LlBBTkVMCgkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIGNhbi5iYXNlLkNvcHkoaXRlbSwgY2FuLmNvcmUuVmFsdWUoY2FuLCBbY2hhdC5SSVZFUiwgaXRlbS5uYW1lXSkpLCBpdGVtLmxpc3QsIGZ1bmN0aW9uKHBhbmVsKSB7CgkJCQlwYW5lbC5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IHBhbmVsLnJlcXVlc3QoZXZlbnQpOyBjbWRzID0gY21kc3x8W10KCQkJCQlyZXR1cm4gKGNhbi5vbmVuZ2luZVtjbWRzWzBdXXx8Y2FuLm9uZW5naW5lLl9yZW1vdGUpKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKQoJCQkJfSwgY2FuW2l0ZW0ubmFtZV0gPSBwYW5lbCwgcGFuZWwuX3Jvb3QgPSBjYW4sIHBhbmVsLl90cmFucyA9IHBhbmVsLm9uYWN0aW9uICYmIHBhbmVsLm9uYWN0aW9uLl90cmFuc3x8e30KCgkJCQljYW4uY29yZS5JdGVtKHBhbmVsLm9ucGx1Z2luLCBmdW5jdGlvbihrZXksIGNtZCkgewoJCQkJCXBhbmVsLm9ucGx1Z2luLmhhc093blByb3BlcnR5KGtleSkgJiYgY2FuLmJhc2UuaXNGdW5jKGNtZCkgJiYgY2FuLm9uZW5naW5lLnBsdWdpbihwYW5lbCwga2V5LCBjbWQpCgkJCQl9KQoJCQkJY2FuLmNvcmUuSXRlbUNCKHBhbmVsLm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7CgkJCQkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGtleSwgZnVuY3Rpb24obXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7Y2FuOiBwYW5lbCwgbXNnOiBtc2d9KSB9KQoJCQkJfSksIGNhbi5jb3JlLkNhbGxGdW5jKFtwYW5lbC5vbmFjdGlvbiwgY2hhdC5fSU5JVF0sIHtjYW46IHBhbmVsLCBjYjogbmV4dCwgdGFyZ2V0OiBwYW5lbC5fdGFyZ2V0fSkKCQkJfSwgdGFyZ2V0KQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coY2FuLnVzZXIudGl0bGUoKSwgaWNlLlJVTiwgY2FuKQoJCQljYW4ub25tb3Rpb24uX2luaXQoY2FuLCB0YXJnZXQpLCBjYW4ub25rZXltYXAuX2luaXQoY2FuKSwgY2FuLnNldEhlYWRlcihjaGF0LlRPUElDKQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk1BSU4sIGNhbi5yZXF1ZXN0KCkpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQl9KQoKCQljYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgY2hhdC5PTlNFQVJDSCwgZnVuY3Rpb24obXNnLCB3b3JkKSB7IGlmICh3b3JkWzBdID09IGN0eC5DT01NQU5EIHx8IHdvcmRbMV0gIT0gIiIpIHsgdmFyIG1ldGEgPSBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEKCQkJdmFyIGxpc3QgPSB3b3JkWzFdID09ICIiPyBtZXRhOiBtZXRhW3dvcmRbMV1dPyBraXQuRGljdCh3b3JkWzFdLCBtZXRhW3dvcmRbMV1dKToge30KCQkJY2FuLmNvcmUuSXRlbShsaXN0LCBmdW5jdGlvbihuYW1lLCBjb21tYW5kKSB7IG5hbWUgPSBjYW4uYmFzZS50cmltUHJlZml4KG5hbWUsICJjYW4uIikKCQkJCWNhbi5jb3JlLkxpc3QobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUykuc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCW1zZy5QdXNoKGl0ZW0sIGtpdC5EaWN0KGljZS5DVFgsIGNoYXQuT05FTkdJTkUsIGljZS5DTUQsIGN0eC5DT01NQU5ELAoJCQkJCQltZGIuVFlQRSwgaWNlLkNBTiwgbWRiLk5BTUUsIG5hbWUsIG1kYi5URVhULCBjb21tYW5kLmhlbHAsCgkJCQkJCWN0eC5DT05URVhULCBpY2UuQ0FOLCBjdHguQ09NTUFORCwgbmFtZQoJCQkJCSlbaXRlbV18fCIiKQoJCQkJfSkKCQkJfSkKCQl9IH0pCgl9LAoJX3NlYXJjaDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCQl2YXIgc3ViLCBtb2QgPSBjYW4sIGZ1biA9IGNhbiwga2V5ID0gIiI7IGNhbi5jb3JlLkxpc3QoY21kc1sxXS5zcGxpdChpY2UuUFQpLCBmdW5jdGlvbih2YWx1ZSkgewoJCQlmdW4gJiYgKHN1YiA9IG1vZCwgbW9kID0gZnVuLCBmdW4gPSBtb2RbdmFsdWVdLCBrZXkgPSB2YWx1ZSkKCQl9KTsgaWYgKCFzdWIgfHwgIW1vZCB8fCAhZnVuKSB7IGNhbi5taXNjLldhcm4oaWNlLkVyck5vdEZvdW5kLCBjbWRzKQoJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cuRWNobyhpY2UuRXJyV2FybiwgaWNlLkVyck5vdEZvdW5kLCBjbWRzKSkKCQl9CgoJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhmdW4sIHsKCQkJZXZlbnQ6IGV2ZW50LCBjYW46IHN1YiwgbXNnOiBtc2csIGNtZHM6IGNtZHMuc2xpY2UoMiksIGNiOiBjYiwgdGFyZ2V0OiBzdWIuX3RhcmdldCwKCQkJYnV0dG9uOiBrZXksIGNtZDoga2V5LCBhcmc6IGNtZHMuc2xpY2UoMiksIGxpc3Q6IGNtZHMuc2xpY2UoMiksCgkJfSwgbW9kKQoJfSwKCV9yZW1vdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJaWYgKHBhbmVsLm9uZW5naW5lLl9lbmdpbmUoZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpKSB7IHJldHVybiB9CgkJaWYgKHBhbmVsLm9uZW5naW5lLl9wbHVnaW4oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpKSB7IHJldHVybiB9CgoJCXZhciBrZXlzID0gY2FuLmNvcmUuS2V5cyhwYW5lbC5fbmFtZSwgY21kcy5qb2luKGljZS5GUykpCgkJaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1zZy5DbGVhcihpY2UuTVNHX0FQUEVORCkKCQkJdmFyIHJlcyA9IFZvbGNhbm9zLm1ldGEucGFja1trZXlzXTsgcmVzPyBtc2cuQ29weShyZXMpOiBjYW4udXNlci50b2FzdChjYW4sICLnvLrlpLHmlbDmja4iKQoJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfQoKCQl2YXIgdG9hc3QsIF90b2FzdCA9IG1zZy5PcHRpb24oY2hhdC5fVE9BU1QpOyBpZiAoX3RvYXN0KSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0b2FzdCA9IHRvYXN0fHxjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCBfdG9hc3QsIG1zZy5fY2FuLl9uYW1lKSB9KSB9CgkJbXNnLm9wdGlvbiA9IGNhbi5jb3JlLkxpc3QobXNnLm9wdGlvbiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4ge190b2FzdDogdHJ1ZSwgX2hhbmRsZTogdHJ1ZX1baXRlbV0gJiYgZGVsZXRlKG1zZ1tpdGVtXSk/IHVuZGVmaW5lZDogaXRlbSB9KQoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OUkVNT1RFLCBjYW4ucmVxdWVzdCh7fSwge19mb2xsb3c6IHBhbmVsLl9mb2xsb3csIF9tc2c6IG1zZywgX2NtZHM6IGNtZHN9KSkKCgkJdmFyIG5hbWVzID0gbXNnLk9wdGlvbihjaGF0Ll9OQU1FUyl8fHBhbmVsLl9uYW1lc3x8KChjYW4uQ29uZigiaWNlYmVyZyIpfHxWb2xjYW5vcy5tZXRhLmljZWJlcmcpK3BhbmVsLl9uYW1lKQoJCWNhbi5taXNjLlJ1bihldmVudCwgY2FuLCB7bmFtZXM6IG5hbWVzLCBkYWVtb246IG1zZy5fZGFlbW9ufSwgY21kcywgZnVuY3Rpb24obXNnKSB7CgkJCVZvbGNhbm9zLm1ldGEucGFja1trZXlzXSA9IG1zZywgdG9hc3QgJiYgdG9hc3QuY2xvc2UoKSwgdG9hc3QgPSB0cnVlLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQl9KQoJfSwKCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJcmV0dXJuIGZhbHNlCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCQlpZiAoY21kc1swXSA9PSBjdHguQUNUSU9OICYmIGNtZHNbMV0gPT0gaWNlLlJVTiAmJiBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1syXV0pIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtjbWRzWzJdXSwge2NhbjogcGFuZWwsIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDMpLCBjYjogY2J9KSwgdHJ1ZQoJCX0KCQl2YXIgcCA9IGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtjbWRzWzBdXSwgbiA9IDE7IGlmIChwKSB7CgkJCWlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMV1dICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTikgeyBuID0gMyB9IGVsc2UgaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1swXV0pIHsgbiA9IDIgfQoJCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMocCwge2NhbjogcC5jYW58fHBhbmVsLCBtc2c6IG1zZywgYXJnOiBjbWRzLnNsaWNlKG4pLCBjbWRzOiBjbWRzLnNsaWNlKG4pLCBjYjogY2J9KSwgdHJ1ZQoJCX0KCQlyZXR1cm4gZmFsc2UKCX0sCgoJcGx1Z2luOiBzaHkoIua3u+WKoOaPkuS7tiIsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgY29tbWFuZCkgewoJCWlmIChjYW4uYmFzZS5pc09iamVjdChuYW1lKSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuSXRlbShuYW1lLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQluYW1lLmhhc093blByb3BlcnR5KGtleSkgJiYgY2FuLmJhc2UuaXNGdW5jKHZhbHVlKSAmJiBjYW4ub25lbmdpbmUucGx1Z2luKGNhbiwga2V5LCB2YWx1ZSkgfSkKCQl9CgkJbmFtZSA9IGNhbi5iYXNlLnRyaW1QcmVmaXgobmFtZSwgImNhbi4iKQoJCXZhciB0eXBlID0gaHRtbC5URVhUOyBjb21tYW5kLmxpc3QgPSBjYW4uY29yZS5MaXN0KGNvbW1hbmQubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlzd2l0Y2ggKHR5cGVvZiBpdGVtKSB7CgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXR1cm4gY2FuLmNvcmUuU3BsaXRJbnB1dChpdGVtKQoJCQkJY2FzZSBsYW5nLk9CSkVDVDogcmV0dXJuIHR5cGUgPSBpdGVtLnR5cGV8fHR5cGUsIGl0ZW0KCQkJfQoJCX0pLCBjb21tYW5kLmNhbiA9IGNhbiwgYXJndW1lbnRzLmNhbGxlZS5tZXRhW2Nhbi5jb3JlLktleXMoaWNlLkNBTiwgbmFtZSldID0gY29tbWFuZAoJfSksCglsaXN0ZW46IHNoeSgi55uR5ZCs5LqL5Lu2IiwgZnVuY3Rpb24oY2FuLCBuYW1lLCBjYikgewoJCWFyZ3VtZW50cy5jYWxsZWUubWV0YVtuYW1lXSA9IChhcmd1bWVudHMuY2FsbGVlLm1ldGFbbmFtZV18fFtdKS5jb25jYXQoY2IpCgl9KSwKCXNpZ25hbDogc2h5KCLop6blj5Hkuovku7YiLCBmdW5jdGlvbihjYW4sIG5hbWUsIG1zZykgeyBtc2cgPSBtc2d8fGNhbi5yZXF1ZXN0KCkKCQljYW4ubWlzYy5Mb2coZ2RiLlNJR05BTCwgbmFtZSwgKG1zZy5fY21kc3x8W10pLCBuYW1lID09IGNoYXQuT05SRU1PVEU/IG1zZy5PcHRpb24oIl9tc2ciKTogbXNnKQoJCXJldHVybiBjYW4uY29yZS5MaXN0KGNhbi5vbmVuZ2luZS5saXN0ZW4ubWV0YVtuYW1lXSwgZnVuY3Rpb24oY2IpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogbXNnLl9ldmVudCwgbXNnOiBtc2d9KSB9KS5sZW5ndGgKCX0pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OREFFTU9OLCB7aGVscDogIuaOqOiNkOW8leaTjiIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG5hbWUpIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm1pc2MuV1NTKGNhbiwge3R5cGU6IGh0bWwuQ0hST01FLCBuYW1lOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBjbGkuREFFTU9OKXx8bmFtZXx8IiIsIHRleHQ6IGNhbi51c2VyLnRpdGxlKCl9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQl2YXIgc3ViID0gY2FuLm9uZGFlbW9uLl9saXN0W21zZy5PcHRpb24oaWNlLk1TR19UQVJHRVQpXQoJCQljYW4uYmFzZS5pc0Z1bmMoY2FuLm9uZGFlbW9uW2NtZF0pPyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25kYWVtb25bY21kXSwgewoJCQkJY2FuOiBjYW4sIHN1Yjogc3ViLCBtc2c6IG1zZywgY21kOiBjbWQsIGFyZzogYXJnLCBjYjogZnVuY3Rpb24oKSB7IG1zZy5SZXBseSgpIH0sCgkJCX0pOiBjYW4ub25lbmdpbmUuX3NlYXJjaCh7fSwgY2FuLCBtc2csIGNhbiwgW2NoYXQuX1NFQVJDSCwgY21kXS5jb25jYXQoYXJnKSwgZnVuY3Rpb24oKSB7IG1zZy5SZXBseSgpIH0pCgkJfSkKCX0sIF9saXN0OiBbIiJdLAoJcmVmcmVzaDogZnVuY3Rpb24oY2FuLCBtc2csIHN1YikgeyBzdWIuVXBkYXRlKCkgfSwKCWdyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBzdWIsIGFyZykgewoJCXN1Yi5vbmltcG9ydC5fZ3JvdyhzdWIsIG1zZywgY2FuLnBhZ2UuQ29sb3IoYXJnLmpvaW4oIiIpKSkKCX0sCgl0b2FzdDogZnVuY3Rpb24oY2FuLCBtc2csIGFyZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4udXNlci50b2FzdCwge2NhbjogY2FuLCBtc2c6IG1zZywgY21kczogYXJnfSkgfSwKCXB3ZDogZnVuY3Rpb24oY2FuLCBtc2csIGFyZykgewoJCWNhbi5fd3NzX25hbWUgPSBjYW4ub25kYWVtb24uX2xpc3RbMF0gPSBhcmdbMF0KCX0sCglleGl0OiBmdW5jdGlvbihjYW4sIG1zZywgc3ViKSB7IGNhbi51c2VyLmNsb3NlKCkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCBjYiwgdGFyZ2V0LCBmaWVsZCkgewoJCW1ldGEubmFtZSA9IChtZXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuU1ApWzBdLnNwbGl0KGljZS5QVCkucG9wKCkKCQlmaWVsZCA9IGZpZWxkfHxjYW4ub25hcHBlbmQuZmllbGQoY2FuLCBtZXRhLnR5cGUsIG1ldGEsIHRhcmdldCkuZmlyc3QKCQl2YXIgbGVnZW5kID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuTEVHRU5EKVswXQoJCXZhciBvcHRpb24gPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBmaWVsZCwgaHRtbC5GT1JNX09QVElPTilbMF0KCQl2YXIgYWN0aW9uID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX0FDVElPTilbMF0KCQl2YXIgb3V0cHV0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX09VVFBVVClbMF0KCQl2YXIgc3RhdHVzID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX1NUQVRVUylbMF0KCgkJdmFyIHN1YiA9IFZvbGNhbm9zKG1ldGEubmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIG1ldGEubmFtZSksIF90YXJnZXQ6IGZpZWxkLAoJCQlfbGVnZW5kOiBsZWdlbmQsIF9vcHRpb246IG9wdGlvbiwgX2FjdGlvbjogYWN0aW9uLCBfb3V0cHV0OiBvdXRwdXQsIF9zdGF0dXM6IHN0YXR1cywKCQkJX2lucHV0czoge30sIF9vdXRwdXRzOiBbXSwgX2hpc3Rvcnk6IFtdLCBfcm9vdDogY2FuLl9yb290LAoKCQkJU3RhdHVzOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShrZXksIHN1Yi5TdGF0dXMpLCBrZXkgfQoJCQkJa2V5ICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHN0YXR1cywgW1tbaHRtbC5ESVYsIGtleV0sIGh0bWwuU1BBTl1dLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJaWYgKHZhbHVlICYmIHZhbHVlLmluZGV4T2YgJiYgdmFsdWUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgdmFsdWUgPSBjYW4ucGFnZS5Gb3JtYXQoaHRtbC5BLCB2YWx1ZSkgfQoJCQkJCXJldHVybiB2YWx1ZSA9PSB1bmRlZmluZWQ/ICh2YWx1ZSA9IGl0ZW0uaW5uZXJIVE1MKTogKGl0ZW0uaW5uZXJIVE1MID0gdmFsdWUpCgkJCQl9KTsgcmV0dXJuIHZhbHVlCgkJCX0sCgkJCUFjdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGFjdGlvbiwga2V5LCB2YWx1ZSlbMF0gfSwKCQkJT3B0aW9uOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCBrZXksIHZhbHVlKVswXSB9LAoJCQlVcGRhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7IHN1Yi5vbmFwcGVuZC5fb3V0cHV0MChzdWIsIHN1Yi5Db25mKCksIGV2ZW50fHx7fSwgY21kc3x8c3ViLklucHV0KCksIGNiLCBzaWxlbnQpOyByZXR1cm4gdHJ1ZSB9LAoJCQlGb2N1czogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIG9wdGlvbiwgaHRtbC5JTlBVVF9BUkdTLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgeyBpbmRleCA9PSAwICYmIGl0ZW0uZm9jdXMoKSB9KSB9LAoJCQlJbnB1dDogZnVuY3Rpb24oY21kcywgc2lsZW50KSB7CgkJCQljbWRzID0gY21kcyAmJiBjbWRzLmxlbmd0aCA+IDA/IGNtZHM6IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiKS5jb25jYXQoY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGFjdGlvbiwgIiIpKSwgY21kcyA9IGNhbi5iYXNlLnRyaW0oY21kcykKCQkJCXNpbGVudCB8fCBjbWRzWzBdID09IGN0eC5BQ1RJT04gfHwgY2FuLmJhc2UuRXEoc3ViLl9oaXN0b3J5W3N1Yi5faGlzdG9yeS5sZW5ndGgtMV0sIGNtZHMpIHx8IHN1Yi5faGlzdG9yeS5wdXNoKGNtZHMpCgkJCQlyZXR1cm4gY21kcwoJCQl9LAoJCQlDbG9uZTogZnVuY3Rpb24oKSB7IG1ldGEuYXJncyA9IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiKQoJCQkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwgbWV0YSwgbGlzdCwgZnVuY3Rpb24oc3ViKSB7IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCB0cnVlKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBmb3IgKHZhciBrIGluIHN1Yi5faW5wdXRzKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHN1Yi5faW5wdXRzW2tdLl90YXJnZXQpOyBicmVhayB9IH0pCgkJCQl9LCB0YXJnZXQpCgkJCX0sCgkJfSwgbGlzdCwgZnVuY3Rpb24oc3ViKSB7IHN1Yi5Db25mKG1ldGEpLCBtZXRhLmZlYXR1cmUgPSBjYW4uYmFzZS5PYmoobWV0YS5mZWF0dXJlLCB7fSkKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGZpZWxkLCBtZXRhLmluZGV4PyBtZXRhLmluZGV4LnNwbGl0KGljZS5QVCkucG9wKCk6IG1ldGEubmFtZSkKCQkJdmFyIHN0eWxlID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5zdHlsZXx8bWV0YS5mZWF0dXJlLnN0eWxlKTsgc3dpdGNoICh0eXBlb2Ygc3R5bGUpIHsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgc3R5bGUpOyBicmVhawoJCQkJY2FzZSBsYW5nLk9CSkVDVDogY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwgc3R5bGUpOyBicmVhawoJCQl9CgkJCW1ldGEudHlwZSAhPSBzdWIuTW9kZSgpICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgc3ViLk1vZGUoKSkKCgkJCW1ldGEuaW5wdXRzICYmIHN1Yi5vbmFwcGVuZC5fb3B0aW9uKHN1YiwgbWV0YSwgc3ViLl9vcHRpb24sIG1ldGEubXNnKQoJCQlpZiAobWV0YS5tc2cpIHsgdmFyIG1zZyA9IHN1Yi5yZXF1ZXN0KCk7IG1zZy5Db3B5KGNhbi5iYXNlLk9iaihtZXRhLm1zZykpLCBzdWIub25hcHBlbmQuX291dHB1dChzdWIsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmZlYXR1cmUuZGlzcGxheSkgfQoKCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgc3ViLl9sZWdlbmQsIGtpdC5EaWN0KGNhbi5Db25mKCJsZWdlbmRfZXZlbnQiKXx8Y2hhdC5PTk1PVVNFRU5URVIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgc3ViLCBzdWIub25hY3Rpb24sIHN1Yi5vbmFjdGlvbi5saXN0LmNvbmNhdChbWyLmiYDmnIkiXS5jb25jYXQoY2FuLmNvcmUuSXRlbShtZXRhLmZlYXR1cmUuX3RyYW5zKSldKSwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIG1ldGEpIHsKCQkJCQl2YXIgY2IgPSBjYW4uY29yZS5WYWx1ZShzdWIsIFtjaGF0Ll9PVVRQVVRTX0NVUlJFTlQsIGNoYXQuT05BQ1RJT04sIGl0ZW1dKQoJCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHJldHVybiBjYihldmVudCwgY2FuLmNvcmUuVmFsdWUoc3ViLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpLCBpdGVtKSB9CgkJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdCgkJCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikpIHsgcmV0dXJuIGNiKGV2ZW50LCBzdWIsIGl0ZW0pIH0KCQkJCX0pCgkJCX0pKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSk7IHJldHVybiBzdWIKCX0sCglfb3B0aW9uOiBmdW5jdGlvbihjYW4sIG1ldGEsIG9wdGlvbiwgc2tpcCkgeyBtZXRhID0gbWV0YXx8e307IHZhciBpbmRleCA9IC0xLCBhcmdzID0gY2FuLmJhc2UuT2JqKG1ldGEuYXJnc3x8bWV0YS5hcmd8fG1ldGEub3B0LCBbXSksIG9wdHMgPSBjYW4uYmFzZS5PYmoobWV0YS5vcHRzLCB7fSkKCQlmdW5jdGlvbiBhZGQoaXRlbSwgbmV4dCkgeyBpdGVtID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IGl0ZW19OiBpdGVtLCBpdGVtLnR5cGUgIT0gaHRtbC5CVVRUT04gJiYgaW5kZXgrKwoJCQlyZXR1cm4gVm9sY2Fub3MoaXRlbS5uYW1lLCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgaXRlbS5uYW1lKSwgX3Jvb3Q6IGNhbi5fcm9vdCwKCQkJCV90YXJnZXQ6IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIGl0ZW0sIGFyZ3NbaW5kZXhdfHxvcHRzW2l0ZW0ubmFtZV0sIG9wdGlvbnx8Y2FuLl9vcHRpb24pLAoJCQkJX29wdGlvbjogb3B0aW9ufHxjYW4uX29wdGlvbiwgX2FjdGlvbjogY2FuLl9hY3Rpb24sIF9vdXRwdXQ6IGNhbi5fb3V0cHV0LCBfc3RhdHVzOiBjYW4uX3N0YXR1cywKCQkJCU9wdGlvbjogY2FuLk9wdGlvbiwgQWN0aW9uOiBjYW4uQWN0aW9uLCBTdGF0dXM6IGNhbi5TdGF0dXMsIENsb25lRmllbGQ6IGNhbi5DbG9uZSwKCQkJCUNsb25lSW5wdXQ6IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBhZGQoaXRlbSkuX3RhcmdldCkgfSwKCQkJfSwgW2l0ZW0uZGlzcGxheSwgY2hhdC5QTFVHSU5fSU5QVVRfSlNdLCBmdW5jdGlvbihpbnB1dCkgeyBpbnB1dC5Db25mKGl0ZW0pCgkJCQlpbnB1dC5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJaWYgKGl0ZW0uX2NiKSB7IHJldHVybiBpdGVtLl9jYihldmVudCkgfQoJCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCksIGNtZHMpKSB7IHJldHVybiB9CgkJCQkJaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIGlucHV0LCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJCXJldHVybiBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoY21kcywgc2lsZW50KSwgY2IsIHNpbGVudCkKCQkJCX0sIGNhbi5faW5wdXRzW2l0ZW0ubmFtZV0gPSBpbnB1dCwgaW5wdXQuc3VwID0gY2FuCgoJCQkJY2FuLmNvcmUuSXRlbUNCKGlucHV0Lm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7IGlucHV0Ll90YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBpbnB1dCkgfSB9KQoJCQkJY2FuLmNvcmUuSXRlbUNCKGl0ZW0sIGZ1bmN0aW9uKGtleSwgY2IpIHsgaW5wdXQuX3RhcmdldFtrZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgY2IoZXZlbnQsIGlucHV0KSB9IH0pCgkJCQlza2lwPyBuZXh0KCk6IGNhbi5jb3JlLkNhbGxGdW5jKFtpbnB1dC5vbmFjdGlvbiwgY2hhdC5fSU5JVF0sIFtpbnB1dCwgaXRlbSwgbmV4dCwgaW5wdXQuX3RhcmdldF0pOwoJCQkJKGl0ZW0uYWN0aW9ufHxjYW4uY29yZS5WYWx1ZShtZXRhLCBbY3R4LkZFQVRVUkUsIGN0eC5JTlBVVFNdKSkgJiYgY2FuLm9uYXBwZW5kLmZpZ3VyZShpbnB1dCwgaXRlbSwgaW5wdXQuX3RhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSkgewoJCQkJCWlucHV0Ll90YXJnZXQudmFsdWUgPSB2YWx1ZSwgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgaW5wdXQuX3RhcmdldCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLlVwZGF0ZSgpIH0pCgkJCQl9KQoJCQl9KQoJCX07IGNhbi5jb3JlLk5leHQoY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLmNvcmUuVmFsdWUoY2FuLCBbY2hhdC5PTklNUE9SVCwgbWRiLkxJU1RdKSwgY2FuLmJhc2UuT2JqKG1ldGEuaW5wdXRzKSkuY29uY2F0KFt7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6IGNsaS5DTE9TRX1dKSwgYWRkKQoJfSwKCV9hY3Rpb246IGZ1bmN0aW9uKGNhbiwgbGlzdCwgYWN0aW9uLCBtZXRhKSB7IGxpc3QgPSBjYW4uYmFzZS5PYmooY2FuLmJhc2UuZ2V0VmFsaWQobGlzdCwgY2FuLmNvcmUuSXRlbShtZXRhKSksIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05BQ1RJT04sIG1kYi5MSVNUXSkpOyBpZiAoIWxpc3QpIHsgcmV0dXJuIH0KCQl2YXIgX2xpc3QgPSBjYW4ucGFnZS5pbnB1dHMoY2FuLCBsaXN0KTsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgYWN0aW9uKSwgbWV0YSA9IG1ldGF8fGNhbi5vbmFjdGlvbnx8e30KCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChfbGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0gY2FuLm9uYXBwZW5kLmlucHV0KGNhbiwgaXRlbSA9PSAiIj8gLyrnqbrnmb0qLyB7dHlwZTogaHRtbC5TUEFDRX06CgkJCWNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyAvKuaMiemUriovIHt0eXBlOiBodG1sLkJVVFRPTiwgdmFsdWU6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbSksIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2IgPSBtZXRhW2l0ZW1dfHxtZXRhW2NoYXQuX0VOR0lORV07IGNiPyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgY2FuOiBjYW4sIGJ1dHRvbjogaXRlbX0pOiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgaXRlbV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgoJCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsKCQkJCQl2YXIgY2IgPSBtZXRhW2l0ZW1dfHxtZXRhW2NoYXQuX0VOR0lORV07IGNiPyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgY2FuOiBjYW4sIGJ1dHRvbjogaXRlbX0pOiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgaXRlbV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgkJCQl9CgoJCQl9fTogaXRlbS5sZW5ndGggPiAwPyAvKuWIl+ihqCovIHt0eXBlOiBodG1sLlNFTEVDVCwgbmFtZTogaXRlbVswXSwgdmFsdWVzOiBpdGVtLnNsaWNlKDEpLCBvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciB3aGljaCA9IGl0ZW1bZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXgrMV0KCQkJCWNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbd2hpY2hdLCBbZXZlbnQsIGNhbiwgd2hpY2hdKQoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YVtpdGVtWzBdXSwgW2V2ZW50LCBjYW4sIGl0ZW1bMF0sIHdoaWNoXSkKCgkJCX19OiAvKuWFtuWugyovIGl0ZW0sICIiLCBhY3Rpb24pfSksIG1ldGEKCX0sCglfb3V0cHV0MDogZnVuY3Rpb24oY2FuLCBtZXRhLCBldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBpZiAobXNnLlJ1bkFjdGlvbihldmVudCwgY2FuLCBjbWRzKSkgeyByZXR1cm4gfQoJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSAhPSBpY2UuVFJVRSAmJiBjbWRzICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBtZXRhLmZlYXR1cmVbY21kc1sxXV0pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBjbWRzWzFdfSkKCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhtZXRhLmZlYXR1cmVbY21kc1sxXV0pKSB7IHJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhtZXRhLmZlYXR1cmVbY21kc1sxXV0sIHtjYW46IGNhbiwgbXNnOiBtc2csIGNtZHM6IGNtZHMuc2xpY2UoMil9KSB9CgkJCXJldHVybiBjYW4udXNlci5pbnB1dChldmVudC5fZXZlbnR8fGV2ZW50LCBjYW4sIG1ldGEuZmVhdHVyZVtjbWRzWzFdXSwgZnVuY3Rpb24oYXJncykgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0sIGNhbi5PcHRpb24oKSkKCQkJCWNhbi5VcGRhdGUoZXZlbnQsIGNtZHMuc2xpY2UoMCwgMikuY29uY2F0KGFyZ3MpLCBjYnx8ZnVuY3Rpb24oKSB7CgkJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4uc3VwLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4uc3VwLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuUmVzdWx0KCkubGVuZ3RoID4gMCB8fCBtc2cuTGVuZ3RoKCkgPiAwKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZyksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQkJCQl9IGVsc2UgewoJCQkJCQljYW4uVXBkYXRlKCkKCQkJCQl9CgkJCQl9LCB0cnVlKQoJCQl9KQoJCX0KCgkJaWYgKG1ldGEgJiYgbWV0YS5pbmRleCAmJiBtZXRhLmluZGV4LmluZGV4T2YoImNhbi4iKSA9PSAwKSB7CgkJCWNhbi5vbmVuZ2luZS5fcGx1Z2luKGV2ZW50LCBjYW4sIG1zZywgY2FuLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbbWV0YS5pbmRleF0sIGNtZHMpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSk7IHJldHVybiB9CgkJCQkhc2lsZW50ICYmIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fG1ldGEuZGlzcGxheXx8bWV0YS5mZWF0dXJlLmRpc3BsYXkpCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKG1zZy5fZGFlbW9uKSkgewoJCQljYW4uYmFzZS5pc1VuZGVmaW5lZChjYW4uX2RhZW1vbikgJiYgY2FuLm9uZGFlbW9uLl9saXN0WzBdICYmIChjYW4uX2RhZW1vbiA9IGNhbi5vbmRhZW1vbi5fbGlzdC5wdXNoKGNhbiktMSkKCQkJaWYgKGNhbi5fZGFlbW9uKSB7IG1zZy5PcHRpb24oaWNlLk1TR19EQUVNT04sIGNhbi5jb3JlLktleXMoY2FuLm9uZGFlbW9uLl9saXN0WzBdLCBjYW4uX2RhZW1vbikpIH0KCQl9CgoJCXJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbihtc2cpIHsgdmFyIHN1YiA9IGNhbi5jb3JlLlZhbHVlKGNhbiwgY2hhdC5fT1VUUFVUU19DVVJSRU5UKXx8e30KCQkJaWYgKCFjbWRzIHx8IGNtZHNbMF0gIT0gY3R4LkFDVElPTikgeyBjYW4uX21zZyA9IG1zZywgc3ViLl9tc2cgPSBtc2csIG1zZy5fY21kcyA9IGNtZHMgfQoJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogY2FuLCBtc2c6IG1zZ30pOyByZXR1cm4gfQoJCQl2YXIgcHJvY2VzcyA9IG1zZy5fY2FuID09IGNhbiB8fCBtc2cuX2NhbiA9PSBzdWIKCQkJaWYgKHByb2Nlc3MgJiYgY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2Nhbjogc3ViLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCWlmIChwcm9jZXNzICYmIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkhc2lsZW50ICYmIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fG1ldGEuZGlzcGxheXx8bWV0YS5mZWF0dXJlLmRpc3BsYXksIGNhbi5fb3V0cHV0LCBjYW4uX2FjdGlvbikKCQl9KQoJfSwKCV9vdXRwdXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBkaXNwbGF5LCBvdXRwdXQsIGFjdGlvbiwgY2IpIHsgZGlzcGxheSA9IGRpc3BsYXl8fGNoYXQuUExVR0lOX1RBQkxFX0pTLCBvdXRwdXQgPSBvdXRwdXR8fGNhbi5fb3V0cHV0CgkJY2FuLl9kaXNwbGF5ID0gZGlzcGxheQoJCVZvbGNhbm9zKGRpc3BsYXksIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBkaXNwbGF5KSwgX3RhcmdldDogb3V0cHV0LCBfZmllbGRzOiBjYW4uX3RhcmdldCwgX2Rpc3BsYXk6IGRpc3BsYXksCgkJCV9sZWdlbmQ6IGNhbi5fbGVnZW5kLCBfb3B0aW9uOiBjYW4uX29wdGlvbiwgX2FjdGlvbjogY2FuLl9hY3Rpb24sIF9vdXRwdXQ6IGNhbi5fb3V0cHV0LCBfc3RhdHVzOiBjYW4uX3N0YXR1cywgX3Jvb3Q6IGNhbi5fcm9vdCwKCQkJVXBkYXRlOiBjYW4uVXBkYXRlLCBPcHRpb246IGNhbi5PcHRpb24sIEFjdGlvbjogY2FuLkFjdGlvbiwgU3RhdHVzOiBjYW4uU3RhdHVzLAoJCX0sIFtkaXNwbGF5LCBjaGF0LlBMVUdJTl9UQUJMRV9KU10sIGZ1bmN0aW9uKHRhYmxlKSB7IHRhYmxlLkNvbmYoY2FuLkNvbmYoKSkKCQkJdGFibGUucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIHRhYmxlLCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJcmV0dXJuIGNhbi5VcGRhdGUoZXZlbnQsIGNhbi5JbnB1dChjbWRzLCBzaWxlbnQpLCBjYiwgc2lsZW50KQoJCQl9LCBjYW4uX291dHB1dHMgJiYgY2FuLl9vdXRwdXRzLnB1c2godGFibGUpLCB0YWJsZS5zdXAgPSBjYW4sIHRhYmxlLl9tc2cgPSBtc2cKCgkJCXRhYmxlLl9pbmRleCA9IGNhbi5faW5kZXgKCQkJdGFibGUuTW9kZShjYW4uTW9kZSgpKSwgdGFibGUuQ29uZih0YWJsZS5fYXJncyA9IGNhbi5iYXNlLlBhcnNlVVJMKHRhYmxlLl9kaXNwbGF5KSkKCQkJdGFibGUuX3RyYW5zID0gY2FuLmJhc2UuQ29weSh0YWJsZS5fdHJhbnN8fHt9LCBjYW4uY29yZS5WYWx1ZSh0YWJsZSwgIm9uYWN0aW9uLl90cmFucyIpKQoJCQlpZiAodGFibGUub25pbXBvcnQgJiYgY2FuLmJhc2UuaXNBcnJheSh0YWJsZS5vbmltcG9ydC5saXN0KSAmJiB0YWJsZS5vbmltcG9ydC5saXN0Lmxlbmd0aCA+IDApIHsKCQkJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3B0aW9uKSwgY2FuLm9uYXBwZW5kLl9vcHRpb24oY2FuLCB7aW5wdXRzOiBjYW4ucGFnZS5pbnB1dHMoY2FuLCB0YWJsZS5vbmltcG9ydC5saXN0KSB9KQoJCQl9CgoJCQljYW4uY29yZS5DYWxsRnVuYyhbdGFibGUsIGNoYXQuT05JTVBPUlQsIGNoYXQuX0lOSVRdLCB7Y2FuOiB0YWJsZSwgbXNnOiBtc2csIGNiOiBmdW5jdGlvbihtc2cpIHsKCQkJCWFjdGlvbiA9PT0gZmFsc2UgfHwgdGFibGUub25hcHBlbmQuX2FjdGlvbih0YWJsZSwgbXNnLk9wdGlvbihpY2UuTVNHX0FDVElPTil8fGNhbi5Db25mKGljZS5NU0dfQUNUSU9OKSwgYWN0aW9uKQoJCQkJYWN0aW9uID09PSBmYWxzZSB8fCB0YWJsZS5vbmFwcGVuZC5fc3RhdHVzKHRhYmxlLCBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCQl9LCB0YXJnZXQ6IG91dHB1dHx8Y2FuLl9vdXRwdXR9KQoJCX0pCgl9LAoJX3N0YXR1czogZnVuY3Rpb24oY2FuLCBsaXN0LCBzdGF0dXMpIHsgc3RhdHVzID0gc3RhdHVzfHxjYW4uX3N0YXR1cywgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgc3RhdHVzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UuT2JqKGxpc3QsIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05FWFBPUlQsIG1kYi5MSVNUXSkpLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0gPSBjYW4uYmFzZS5pc09iamVjdChpdGVtKT8gaXRlbToge25hbWU6IGl0ZW19CgoJCQlpZiAoaXRlbS52YWx1ZSAmJiBpdGVtLnZhbHVlLmluZGV4T2YgJiYgaXRlbS52YWx1ZS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBpdGVtLnZhbHVlID0gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgaXRlbS52YWx1ZSkgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBzdGF0dXMsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBpdGVtLm5hbWVdKSwgdGl0bGU6IGl0ZW0ubmFtZSwgbGlzdDogWwoJCQkJe3RleHQ6IFtpdGVtLm5hbWUsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFsiOiAiLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbKGl0ZW0udmFsdWV8fCIiKSsiIiwgaHRtbC5TUEFOLCBpdGVtLm5hbWVdfSwKCQkJXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBpdGVtLnZhbHVlKSB9fV0pCgkJfSkKCX0sCgoJZmllbGQ6IGZ1bmN0aW9uKGNhbiwgdHlwZSwgaXRlbSwgdGFyZ2V0KSB7IHR5cGUgPSB0eXBlfHxodG1sLlBMVUdJTiwgaXRlbSA9IGl0ZW18fHt9CgkJdmFyIG5hbWUgPSAoaXRlbS5uaWNrfHxpdGVtLm5hbWV8fCIiKS5zcGxpdChpY2UuU1ApWzBdCgkJdmFyIHRpdGxlID0gIWl0ZW0uaGVscCB8fCBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IG5hbWU6IG5hbWUrIigiK2l0ZW0uaGVscC5zcGxpdChpY2UuU1ApWzBdKyIpIgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFt0eXBlfHwiIiwgaXRlbS5uYW1lfHwiIiwgaXRlbS5wb3N8fCIiXSksIGh0bWwuRklFTERTRVRdLCBsaXN0OiBbCgkJCW5hbWUgJiYge3RleHQ6IFt0aXRsZSwgaHRtbC5MRUdFTkRdfSwge3ZpZXc6IFtodG1sLk9QVElPTiwgaHRtbC5GT1JNXX0sIHt2aWV3OiBbaHRtbC5BQ1RJT05dfSwge3ZpZXc6IFtodG1sLk9VVFBVVF19LCB7dmlldzogW2h0bWwuU1RBVFVTXX0sCgkJXX1dKQoJfSwKCWlucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbHVlLCB0YXJnZXQsIHN0eWxlKSB7CgkJc3dpdGNoIChpdGVtLnR5cGUpIHsKCQkJY2FzZSAiIjogcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW2l0ZW1dKQoJCQljYXNlIGh0bWwuU1BBQ0U6IHJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBodG1sLlNQQUNFXSl9XSkKCQl9CgkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtLCB2YWx1ZSkKCQlpZiAoaXRlbS5yYW5nZSkgewoJCQlpbnB1dC5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtLm1vZGUgPSAic2ltcGxlIgoJCQkJY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LnZhbHVlID0gdmFsdWUsIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdKGV2ZW50LCBjYW4sIGl0ZW0ubmFtZSkKCQkJCX0pCgkJCX0KCQl9CgkJdmFyIGJyID0gaW5wdXQudHlwZSA9PSBodG1sLlRFWFRBUkVBPyBbe3R5cGU6IGh0bWwuQlIsIHN0eWxlOiB7Y2xlYXI6IGh0bWwuQk9USH19XTogW10KCQl2YXIgdGl0bGUgPSBjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGNoYXQuVElUTEUsIGl0ZW0ubmFtZV0uam9pbihpY2UuUFQpKXx8IiI7IHRpdGxlICYmIChpbnB1dC50aXRsZSA9IHRpdGxlKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIChbe3ZpZXc6IHN0eWxlfHxjYW4uYmFzZS5qb2luKFtodG1sLklURU0sIGl0ZW0udHlwZV0pLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXN3aXRjaCAoaXRlbS50eXBlKSB7CgkJCQljYXNlIGh0bWwuVEVYVDoKCQkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCQljYXNlIGxhbmcuRU5URVI6CgkJCQkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCk7CgkJCQkJCQljYW4ub25hY3Rpb24gJiYgY2FuLm9uYWN0aW9uW2l0ZW0ubmFtZV0gJiYgY2FuLm9uYWN0aW9uW2l0ZW0ubmFtZV0oZXZlbnQsIGNhbiwgaXRlbS5uYW1lKTsKCQkJCQkJCWJyZWFrCgkJCQkJfQoJCQkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKSwgY2FuLm9ubW90aW9uLnNlbGVjdEZpZWxkKGV2ZW50LCBjYW4pCgkJCQkJYnJlYWsKCQkJCWNhc2UgaHRtbC5URVhUQVJFQToKCQkJCQkvLyBzd2l0Y2ggKGV2ZW50LmtleSkgeyBjYXNlIGxhbmcuVEFCOiBjYW4ub25rZXltYXAuaW5zZXJ0VGV4dChldmVudC50YXJnZXQsIGljZS5UQik7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsgfQoJCQkJCWJyZWFrCgkJCX0KCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCX0sIGxpc3Q6IFtpbnB1dF19XSkuY29uY2F0KGJyKSlbaXRlbS5uYW1lXQoJfSwKCXRhYmxlOiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCwgc29ydCkgeyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRUYWJsZShjYW4sIG1zZywgdGFyZ2V0fHxjYW4uX291dHB1dCwgbXNnLmFwcGVuZCwgY2J8fGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgewoJCQlpZiAobXNnLmFwcGVuZC5sZW5ndGggPT0gMiAmJiBtc2cuYXBwZW5kWzBdID09IG1kYi5LRVkgJiYgbXNnLmFwcGVuZFsxXSA9PSBtZGIuVkFMVUUpIHsKCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCWxpbmUgPSB7fSwgY2FuLmNvcmUuTGlzdChhcnJheSwgZnVuY3Rpb24oaXRlbSkgeyBsaW5lW2l0ZW0ua2V5XSA9IGl0ZW0udmFsdWUgfSkKCQkJfQoKCQkJaWYgKGtleSA9PSAiZXh0cmEuY21kIikgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtjdHg6IGxpbmVbImV4dHJhLmN0eCJdLCBjbWQ6IGxpbmVbImV4dHJhLmNtZCJdLCBhcmc6IGxpbmVbImV4dHJhLmFyZyJdfSwgZnVuY3Rpb24oc3ViKSB7CgkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGxpbmUsIGNhbi5PcHRpb24oKSkKCQkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNhbi5jb3JlLktleXMobGluZVsiZXh0cmEuY3R4Il0sIGxpbmVbImV4dHJhLmNtZCJdKSwgY21kcywgY2IpCgkJCQkJfQoJCQkJfSwgdGFyZ2V0fHxjYW4uX291dHB1dCkKCQkJfQoKCQkJZnVuY3Rpb24gcnVuKGNtZHMpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwgbGluZSwgY2FuLk9wdGlvbigpKQoJCQkJcmV0dXJuIGNhbi5ydW4oZXZlbnQsIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkgIT0gIiIpIHsKCQkJCQkJY2FuLm9uYXBwZW5kLl9vdXRwdXQoY2FuLnN1cCwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpCgkJCQkJfSBlbHNlIGlmIChtc2cuTGVuZ3RoKCkgPiAwIHx8IG1zZy5SZXN1bHQoKS5sZW5ndGggPiAwICkgewoJCQkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLlVwZGF0ZSgpCgkJCQkJfQoJCQkJfSwgdHJ1ZSkKCQkJfQoKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgdGFyZ2V0KSAmJiB0YXJnZXQudHlwZSA9PSBodG1sLkJVVFRPTikgeyByZXR1cm4gcnVuKFtjdHguQUNUSU9OLCB0YXJnZXQubmFtZV0pIH0KCQkJCWlmIChrZXkgPT0gbWRiLkhBU0ggJiYgY2FuLnVzZXIubW9kLmlzRGl2KSB7IHJldHVybiBjYW4udXNlci5qdW1wcygiL2NoYXQvZGl2LyIrdmFsdWUpIH0KCQkJCWNhbi5zdXAub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBjYW4uc3VwLCBrZXksIGV2ZW50LnRhcmdldC5pbm5lclRleHQpCgoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBpZiAoW21kYi5LRVldLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiB9CgkJCQl2YXIgaXRlbSA9IGNhbi5jb3JlLkxpc3QoY2FuLkNvbmYoImZlYXR1cmUuaW5zZXJ0IiksIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0ubmFtZSA9PSBrZXkpIHsgcmV0dXJuIGl0ZW0gfSB9KVswXXx8e25hbWU6IGtleSwgdmFsdWU6IHZhbHVlfQoJCQkJaXRlbS5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgbGluZSksIGNtZHMsIGNiLCB0cnVlKSB9CgkJCQljYW4ub25tb3Rpb24ubW9kaWZ5cyhjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBvbGQpIHsgcnVuKFtjdHguQUNUSU9OLCBtZGIuTU9ESUZZLCBrZXksIHZhbHVlXSkgfSwgaXRlbSkKCQkJfX0KCQl9KTsgdGFibGUgJiYgY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIHRhYmxlLCBjaGF0LkNPTlRFTlQpCgkJaWYgKG1zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZFttc2cuYXBwZW5kLmxlbmd0aC0xXSA9PSBjdHguQUNUSU9OKSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YWJsZSwgY3R4LkFDVElPTikgfQoJCWNhbi5fdGFibGUgPSB0YWJsZSwgY2FuLnN1cCAmJiAoY2FuLnN1cC5fdGFibGUgPSB0YWJsZSkKCQlyZXR1cm4gc29ydCAmJiBjYW4ucGFnZS5SYW5nZVRhYmxlKGNhbiwgdGFibGUsIHNvcnQpLCB0YWJsZQoJfSwKCWJvYXJkOiBmdW5jdGlvbihjYW4sIHRleHQsIHRhcmdldCkgeyB0ZXh0ICYmIHRleHQuUmVzdWx0ICYmICh0ZXh0ID0gdGV4dC5SZXN1bHQoKSk7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCXZhciBjb2RlID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t0ZXh0OiBbY2FuLnBhZ2UuQ29sb3IodGV4dCksIGh0bWwuRElWLCBodG1sLkNPREVdfV0pLmNvZGUKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjb2RlLCBodG1sLklOUFVUX0JVVFRPTiwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCXRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJcmV0dXJuIGNhbi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5ydW4oKSB9KQoJCQl9CgkJfSkKCQlyZXR1cm4gKGNvZGUuc2Nyb2xsQnkgJiYgY29kZS5zY3JvbGxCeSgwLCAxMDAwMCkpLCBjb2RlCgl9LAoKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIG1ldGEsIGNiLCB0YXJnZXQsIGZpZWxkKSB7CgkJbWV0YS5mZWF0dXJlID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5mZWF0dXJlLCBjYW4uYmFzZS5PYmoodmFsdWUubWV0YSkpfHx7fQoJCW1ldGEuaW5wdXRzID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5pbnB1dHMsIGNhbi5iYXNlLk9iaih2YWx1ZS5saXN0KSl8fFtdCgkJbWV0YS5hcmdzID0gY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLmJhc2UuT2JqKG1ldGEuYXJncyksIGNhbi5iYXNlLk9iaihtZXRhLmFyZyksIGNhbi5iYXNlLk9iaih2YWx1ZS5hcmdzKSwgY2FuLmJhc2UuT2JqKHZhbHVlLmFyZykpfHxbXQoJCW1ldGEuZGlzcGxheSA9IG1ldGEuZGlzcGxheXx8dmFsdWUuZGlzcGxheQoKCQltZXRhLmhlaWdodCA9IG1ldGEuaGVpZ2h0fHxjYW4uQ29uZkhlaWdodCgpCgkJbWV0YS53aWR0aCA9IG1ldGEud2lkdGh8fGNhbi5Db25mV2lkdGgoKQoKCQltZXRhLnR5cGUgPSBtZXRhLnR5cGV8fGNoYXQuUExVR0lOCgkJbWV0YS5uYW1lID0gbWV0YS5uYW1lfHx2YWx1ZS5uYW1lCgkJbWV0YS5oZWxwID0gbWV0YS5oZWxwfHx2YWx1ZS5oZWxwCgoJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIG1ldGEsIFtjaGF0LlBMVUdJTl9TVEFURV9KU10sIGZ1bmN0aW9uKHN1Yiwgc2tpcCkgeyBzdWIuX2luZGV4ID0gdmFsdWUuaW5kZXh8fG1ldGEuaW5kZXgKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleCwgY21kcywgY2IpIH0KCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIsIG1ldGEsIHNraXApCgkJfSwgdGFyZ2V0fHxjYW4uX291dHB1dCwgZmllbGQpCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGZpZWxkKSB7IG1ldGEgPSBtZXRhfHx7fSwgbWV0YS5pbmRleCA9IG1ldGEuaW5kZXh8fGNhbi5jb3JlLktleXMobWV0YS5jdHgsIG1ldGEuY21kKQoJCXZhciBwID0gY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW21ldGEuaW5kZXhdLCByZXMgPSB7fTsgZnVuY3Rpb24gY2JzKHN1YiwgbWV0YSwgc2tpcCkgeyByZXMuX19wcm90b19fID0gc3ViLCBjYihzdWIsIG1ldGEsIHNraXApIH0KCQkobWV0YS5tZXRhIHx8IG1ldGEuaW5wdXRzICYmIG1ldGEuaW5wdXRzLmxlbmd0aCA+IDApPyAvKiDlsYDpg6jlkb3ku6QgKi8gY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB7bWV0YTogbWV0YS5tZXRhLCBsaXN0OiBtZXRhLmxpc3R9LCBtZXRhLCBjYnMsIHRhcmdldCwgZmllbGQpOgoJCQlwPyAvKiDliY3nq6/lkb3ku6QgKi8gY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB7bmFtZTogbWV0YS5pbmRleCwgaGVscDogcC5oZWxwLCBtZXRhOiBwLm1ldGEsIGxpc3Q6IHAubGlzdH0sIG1ldGEsIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgX2NiID0gcCwgbiA9IDAKCQkJCQlpZiAocC5tZXRhICYmIHAubWV0YVtjbWRzWzFdXSAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04pIHsgX2NiID0gcC5tZXRhW2NtZHNbMV1dLCBuID0gMiB9IGVsc2UgaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1swXV0pIHsgX2NiID0gcC5tZXRhW2NtZHNbMF1dLCBuID0gMSB9CgkJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoX2NiLCB7Y2FuOiBzdWIsIG1zZzogY2FuLnJlcXVlc3QoZXZlbnQpLCBjbWRzOiBjbWRzLnNsaWNlKG4pLCBjYjogY2J9KQoJCQkJfQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKHN1YiwgbWV0YSwgc2tpcCkKCQkJfSwgdGFyZ2V0LCBmaWVsZCk6IC8qIOWQjuerr+WRveS7pCAqLyBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBtZXRhKSwgY3R4LkNPTU1BTkQsIFttZXRhLmluZGV4XSwgZnVuY3Rpb24obXNnKSB7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQkJY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB2YWx1ZSwgbWV0YSwgY2JzLCB0YXJnZXQsIGZpZWxkKQoJCQl9KSB9KQoJCXJldHVybiByZXMKCX0sCglmaWd1cmU6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgdGFyZ2V0LCBjYnMpIHsgaWYgKFtodG1sLkJVVFRPTiwgaHRtbC5TRUxFQ1RdLmluZGV4T2YobWV0YS50eXBlKSA+IC0xKSB7IHJldHVybiB9CgkJdmFyIGlucHV0ID0gbWV0YS5hY3Rpb258fG1kYi5LRVk7IGlucHV0ICE9IGljZS5BVVRPICYmIGNhbi5yZXF1aXJlKFsiL3BsdWdpbi9pbnB1dC8iK2lucHV0KyIuanMiXSwgZnVuY3Rpb24oY2FuKSB7CgkJCWNhbi5jb3JlLkl0ZW1DQihjYW4ub25maWd1cmVbaW5wdXRdLCBmdW5jdGlvbihrZXksIG9uKSB7IHZhciBsYXN0ID0gdGFyZ2V0W2tleV07IHRhcmdldFtrZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgb24oZXZlbnQsIGNhbiwgbWV0YSwgZnVuY3Rpb24oY2IpIHsKCQkJCWZ1bmN0aW9uIF9jYnMoc3ViLCB2YWx1ZSwgb2xkKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYnMpPyBjYnMoc3ViLCB2YWx1ZSwgb2xkKTogdGFyZ2V0LnZhbHVlID0gdmFsdWV8fCIiLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSB9KSB9CgkJCQlpZiAodGFyZ2V0Ll9jYW4pIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCAgdGFyZ2V0Ll9jYW4uX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodGFyZ2V0Ll9jYW4sIF9jYnMpIH0KCQkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIHt0eXBlOiBodG1sLklOUFVULCBuYW1lOiBpbnB1dCwgcG9zOiBjaGF0LkZMT0FULCBtb2RlOiBtZXRhLm1vZGV9LCBbIi9wbHVnaW4vaW5wdXQvIitpbnB1dCsiLmpzIl0sIGZ1bmN0aW9uKHN1YikgeyBzdWIuQ29uZihtZXRhKQoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCQkJaWYgKG1ldGEucmFuZ2UpIHsKCQkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGZvciAodmFyIGkgPSBtZXRhLnJhbmdlWzBdOyBpIDwgbWV0YS5yYW5nZVsxXTsgaSArPSBtZXRhLnJhbmdlWzJdfHwxKSB7IG1zZy5QdXNoKCJ2YWx1ZSIsIGkpIH0gY2IobXNnKQoJCQkJCQkJcmV0dXJuCgkJCQkJCX0KCQkJCQkJKG1ldGEucnVufHxjYW4ucnVuKShzdWIucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKSwgY21kcywgY2IsIHRydWUpCgkJCQkJfQoJCQkJCWNhbi5vbmxheW91dC5maWd1cmUoe3RhcmdldDogdGFyZ2V0fSwgY2FuLCBzdWIuX3RhcmdldCksIGNhbi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl90YXJnZXQsIG1ldGEuc3R5bGUpCgkJCQkJdGFyZ2V0Ll9jYW4gPSBzdWIsIHN1Yi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBzdWIuX3RhcmdldCksIGRlbGV0ZSh0YXJnZXQuX2NhbikgfQoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCBfY2JzKSwgY2FuLmJhc2UuaXNGdW5jKG1ldGEuX2luaXQpICYmIG1ldGEuX2luaXQoc3ViLCBzdWIuX3RhcmdldCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9LCB0YXJnZXQsIGxhc3QpIH0gfSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkxBWU9VVCwge2hlbHA6ICLpobXpnaLluIPlsYAiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3Jvb3QuX3RhcmdldAoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLlBBR0UpKS5sZW5ndGggPiAwKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5GSUVMRFNFVF9MRUZULCBmdW5jdGlvbihmaWVsZCkgeyBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGZpZWxkLCAiIikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW1todG1sLkZJRUxEU0VUX0xFRlQsIGh0bWwuRElWX09VVFBVVF1dLCBmdW5jdGlvbihvdXRwdXQpIHsKCQkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgIiIpCgkJCQl9KQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTUFJTiwgZnVuY3Rpb24oZmllbGQpIHsgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgIiIpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsICIiKQoJCQkJfSkKCQkJfSkKCQkJcmV0dXJuCgkJfQoKCQl2YXIgd2lkdGggPSBjYW4uX3Jvb3QuX3dpZHRoLCBoZWlnaHQgPSBjYW4uX3Jvb3QuX2hlaWdodAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgY2FuLnBhZ2UuS2V5cyhodG1sLkZJRUxEU0VUX0hFQUQsIGh0bWwuRklFTERTRVRfRk9PVCksIGZ1bmN0aW9uKGZpZWxkKSB7CgkJCWhlaWdodCAtPSBmaWVsZC5vZmZzZXRIZWlnaHQKCQl9KQoKCQl2YXIgb2Zmc2V0ID0gY2FuLnVzZXIuaXNNb2JpbGUgJiYgIWNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDEwMDogMAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5GSUVMRFNFVF9MRUZULCBmdW5jdGlvbihmaWVsZCwgaW5kZXgpIHsKCQkJY2FuLnVzZXIuaXNNb2JpbGUgfHwgKHdpZHRoIC09IGZpZWxkLm9mZnNldFdpZHRoKQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGZpZWxkLCBoZWlnaHQtb2Zmc2V0KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9MRUZULCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgaGVpZ2h0LW9mZnNldC1odG1sLkFDVElPTl9IRUlHSFQtMikKCQkJfSkKCQl9KQoKCQljYW4udXNlci5pc01vYmlsZSB8fCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTUFJTiwgZnVuY3Rpb24oZmllbGQsIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZmllbGQsIGh0bWwuSEVJR0hULCBoZWlnaHQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQloZWlnaHQgLT0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX0FDVElPTilbMF0ub2Zmc2V0SGVpZ2h0CgkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgaGVpZ2h0KQoJCQl9KQoJCX0pCgoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OU0laRSwgY2FuLnJlcXVlc3Qoe30sIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCB1cmwsIHRhcmdldCkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0fHxjYW4uX3Jvb3QuX3RhcmdldCwgaHRtbC5CQUNLR1JPVU5ELCB1cmwgPT0gIiIgfHwgdXJsID09ICJ2b2lkIj8gIiI6ICd1cmwoIicrdXJsKyciKScpCgl9LAoJZmlndXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIHJpZ2h0KSB7IGlmICghZXZlbnQgfHwgIWV2ZW50LnRhcmdldCkgeyByZXR1cm4ge30gfSB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fZmllbGRzfHxjYW4uX3RhcmdldAoJCXZhciByZWN0ID0gZXZlbnQudGFyZ2V0ID09IGRvY3VtZW50LmJvZHk/IHtsZWZ0OiB3aW5kb3cuaW5uZXJXaWR0aC8yLCB0b3A6IDIwMCwgcmlnaHQ6IHdpbmRvdy5pbm5lcldpZHRoLzIsIGJvdHRvbTogMjAwfTogZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJdmFyIGxheW91dCA9IHJpZ2h0PyB7bGVmdDogcmVjdC5yaWdodCwgdG9wOiByZWN0LnRvcH06IHtsZWZ0OiByZWN0LmxlZnQsIHRvcDogcmVjdC5ib3R0b219CgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7IGxlZnQgPSBsZWZ0fHwwLCB0b3AgPSB0b3B8fDAKCQkJaWYgKGxheW91dC50b3ArdGFyZ2V0Lm9mZnNldEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkgewoJCQkJbGF5b3V0LnRvcCA9ICIiLCBsYXlvdXQuYm90dG9tID0gcmlnaHQ/IGh0bWwuQUNUSU9OX0hFSUdIVDogd2luZG93LmlubmVySGVpZ2h0LXJlY3QudG9wCgkJCX0KCQkJaWYgKGxheW91dC5sZWZ0K3RhcmdldC5vZmZzZXRXaWR0aCA+IGxlZnQrd2lkdGgpIHsKCQkJCWxheW91dC5sZWZ0ID0gIiIsIGxheW91dC5yaWdodCA9IDAKCQkJfQoJCX0pCgkJcmV0dXJuIGNhbi5vbm1vdGlvbi5tb3ZlKGNhbiwgdGFyZ2V0LCBsYXlvdXQpLCBsYXlvdXQKCX0sCgoJZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LkxBWU9VVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFsKCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5DT05URU5UfV19LAoJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t2aWV3OiBjaGF0LkRJU1BMQVl9XX0sCgkJXX1dKQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LkxBWU9VVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFt7dHlwZTogaHRtbC5UUiwgbGlzdDogWwoJCQl7dHlwZTogaHRtbC5URCwgbGlzdDogW3t2aWV3OiBjaGF0LlBST0pFQ1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfX1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFsKCQkJCXt2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5DT05URU5UfV19LAoJCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuRElTUExBWX1dfSwKCQkJCV19CgkJCV19CgkJXX1dIH1dKQoJfSwKCXByb2ZpbGVfYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9qZWN0LCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkuZGlzcGxheSwgaWNlLkFVVE8pCgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCX0sCglwcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fb3V0cHV0CgkJZnVuY3Rpb24gdG9nZ2xlKHZpZXcpIHsgdmFyIHNob3cgPSB2aWV3LnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB2aWV3LCBzaG93KSwgdmlldy5fdG9nZ2xlPyB2aWV3Ll90b2dnbGUoZXZlbnQsIHNob3cpOiBjYW4ub25pbXBvcnQubGF5b3V0ICYmIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQlyZXR1cm4gc2hvdwoJCX0KCgkJLy8gdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiLCBkb3duID0gIiYjNzA5OyIsIHVwID0gIiYjNzA4OyIKCQl2YXIgZ3QgPSAiJiMxMDA5NTsiLCBsdCA9ICImIzEwMDk0OyIsIGRvd24gPSBsdCwgdXAgPSBndAoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCXt2aWV3OiBbY2hhdC5QUk9KRUNULCBodG1sLlREXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5QUk9KRUNUXX1dfSwKCQkJe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFsKCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJCQl7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5URF0sIGxpc3Q6IFt7dmlldzogW2NoYXQuQ09OVEVOVF19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9KRUNUXV0sIGxpc3Q6IFt7dGV4dDogW2x0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkucHJvamVjdCk/IGx0OiBndCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9GSUxFXV0sIGxpc3Q6IFt7dGV4dDogW2x0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkucHJvZmlsZSk/IGd0OiBsdCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5ESVNQTEFZXV0sIGxpc3Q6IFt7dGV4dDogW3VwLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkuZGlzcGxheSk/IGRvd246IHVwLCBodG1sLkRJVl19XSkKCQkJCQkJfX0sCgkJCQkJXX0sCgkJCQkJe3ZpZXc6IFtjaGF0LlBST0ZJTEUsIGh0bWwuVERdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LlBST0ZJTEVdLCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0sCgkJCQldfV19LAoJCQkJe3ZpZXc6IFtjaGF0LkRJU1BMQVksIGh0bWwuVFJdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LkRJU1BMQVldLCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0KCQkJXX0KCQldIH1dKTsgcmV0dXJuIGNhbi51aSA9IHVpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OTU9USU9OLCB7aGVscDogIuWKqOaAgeeJueaViCIsIF9pbml0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGh0bWwuT1JJRU5UQVRJT05DSEFOR0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBodG1sLk9SSUVOVEFUSU9OQ0hBTkdFKSB9KQoJCWNhbi5vbm1vdGlvbi5mbG9hdC5hdXRvKGNhbiwgdGFyZ2V0KQoJfSwKCWZsb2F0OiB7X2hhc2g6IHt9LAoJCWRlbDogZnVuY3Rpb24oY2FuLCBrZXkpIHsKCQkJa2V5ID09IGNoYXQuQ0FSVEUgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGNoYXQuQ0FSVEUpLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIHRhcmdldCkKCQkJfSkKCQkJdmFyIGxhc3QgPSB0aGlzLl9oYXNoW2tleV07IGlmICghbGFzdCkgeyByZXR1cm4gfQoJCQlsYXN0LmNsb3NlPyBsYXN0LmNsb3NlKCk6IGNhbi5wYWdlLlJlbW92ZShjYW4sIGxhc3QuX3RhcmdldCkKCQl9LAoJCWFkZDogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IHJldHVybiB0aGlzLmRlbChjYW4sIGtleSksIHRoaXMuX2hhc2hba2V5XSA9IHZhbHVlIH0sCgkJYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSkgeyB2YXIgdGhhdCA9IHRoaXMKCQkJdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMikKCQkJaWYgKGxpc3QubGVuZ3RoID09IDApIHsgbGlzdCA9IFtjaGF0LkNBUlRFLCBjaGF0LklOUFVUXSB9CgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge29ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyAKCQkJCWlmIChjYW4ucGFnZS50YWdpcyhodG1sLklNRywgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXksIGluZGV4KSB7IHRoYXQuZGVsKGNhbiwga2V5KSB9KQoJCQl9fSkKCQl9LAoJfSwKCXN0b3J5OiB7CgkJX2hhc2g6IHsKCQkJc3Bhcms6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgdGFyZ2V0KSB7CgkJCQltZXRhW21kYi5OQU1FXSA9PSBodG1sLklOTkVSPyBjYW4ub25tb3Rpb24uY29weShjYW4sIHRhcmdldCk6IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5TUEFOLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLm9ubW90aW9uLmNvcHkoY2FuLCBpdGVtKQoJCQkJfSkKCQkJfSwKCQl9LAoJCWF1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciB0aGF0ID0gdGhpczsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsICIuc3RvcnkiLCBmdW5jdGlvbihpdGVtKSB7IHZhciBtZXRhID0gaXRlbS5kYXRhc2V0CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIGNhbi5iYXNlLk9iaihtZXRhLnN0eWxlKSkKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKHRoYXQuX2hhc2hbbWV0YS50eXBlXSwgW2NhbiwgbWV0YSwgdGFyZ2V0XSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS04OCwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpLTMwKQoJCQl9KQoJCX0sCgl9LAoJY29weTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHRleHQsIGNiKSB7CgkJdGFyZ2V0LnRpdGxlID0gIueCueWHu+WkjeWItiIsIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCB0ZXh0fHx0YXJnZXQuaW5uZXJUZXh0KQoJCQljYW4ucmVxdWVzdChldmVudCwga2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCkKCQl9Cgl9LAoJbGluazogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHRleHQpIHsKCQlpZiAodGFyZ2V0LmlubmVyVGV4dCA9PSAiIikgeyB0YXJnZXQuaW5uZXJUZXh0ID0gdGFyZ2V0LmhyZWYgfQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3RhcmdldDogIl9ibGFuayJ9KQoJfSwKCgljbGVhcjogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsICIiKSwgdHJ1ZSB9LAoJY2FjaGU6IGZ1bmN0aW9uKGNhbiwgbmV4dCkgeyB2YXIgbGlzdCA9IGNhbi5iYXNlLk9iaihjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMiksIFtjYW4uX291dHB1dF0pCgkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uX2NhY2hlX2tleSAmJiBjYW4ucGFnZS5DYWNoZShpdGVtLl9jYWNoZV9rZXksIGl0ZW0sIGl0ZW0uc2Nyb2xsVG9wKzEpIH0pCgkJdmFyIGtleSA9IG5leHQoY2FuLl9jYWNoZV9kYXRhID0gY2FuLl9jYWNoZV9kYXRhfHx7fSk7IGlmICgha2V5KSB7IHJldHVybiB9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgcG9zID0gY2FuLnBhZ2UuQ2FjaGUoaXRlbS5fY2FjaGVfa2V5ID0ga2V5LCBpdGVtKQoJCQlpZiAocG9zKSB7IGl0ZW0uc2Nyb2xsVG8gJiYgaXRlbS5zY3JvbGxUbygwLCBwb3MtMSk7IHJldHVybiBpdGVtIH0KCQl9KS5sZW5ndGggPiAwCgl9LAoJZGVsYXk6IGZ1bmN0aW9uKGNhbiwgY2IsIGludGVydmFsKSB7IGNhbi5jb3JlLlRpbWVyKGludGVydmFsfHwxMDAsIGNiKSB9LAoJZm9jdXM6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGlmICghdGFyZ2V0KSB7IHJldHVybiB9CgkJdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlICYmIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAtMSksIHRhcmdldC5mb2N1cygpCgl9LAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGlucHV0LCBhcmdzKSB7IHZhciBfYXJncyA9IGFyZ3MKCQlyZXR1cm4gY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgaW5wdXQsIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnNlYXJjaChjYW4ucmVxdWVzdChldmVudCwge2FyZ3M6IFttZGIuVFlQRSwgY2hhdC5GSUVMRF0uY29uY2F0KF9hcmdzfHxbXSwgYXJnc3x8W10pfSksIFtbIkhlYWRlciIsIGNoYXQuT05BQ1RJT04sIHdlYi5TSEFSRV1dKQoJCX0pCgl9LAoKCWhpZGRlbjogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHNob3cpIHsKCQljYW4ucGFnZS5zdHlsZURpc3BsYXkoY2FuLCB0YXJnZXR8fGNhbi5fdGFyZ2V0LCBzaG93PyAiIjogaHRtbC5OT05FKQoJCXJldHVybiBzaG93Cgl9LAoJdG9nZ2xlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgc2hvdywgaGlkZSkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJaWYgKHNob3cgPT09IHRydWUpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQsIHRydWUpIH0KCQlpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQsIGZhbHNlKSB9CgkJdmFyIHN0YXR1cyA9IHRhcmdldC5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORQoJCWlmICghKHN0YXR1cz8gY2FuLmJhc2UuaXNGdW5jKHNob3cpICYmIHNob3coKTogY2FuLmJhc2UuaXNGdW5jKGhpZGUpICYmIGhpZGUoKSkpIHsKCQkJY2FuLnBhZ2Uuc3R5bGVEaXNwbGF5KGNhbiwgdGFyZ2V0LCBzdGF0dXM/ICIiOiBodG1sLk5PTkUpCgkJfQoJCXJldHVybiBzdGF0dXMKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBuYW1lLCB3aGljaCkgewoJCXZhciBvbGQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIG5hbWUsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpKSB7IHJldHVybiBpbmRleCB9CgkJfSlbMF0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIG5hbWUsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCwgaXRlbSA9PSB3aGljaCB8fCB3aGljaCA9PSBpbmRleCkKCQl9KQoJCXJldHVybiBvbGQKCX0sCgltb2RpZnk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjYiwgaXRlbSkgeyB2YXIgYmFjayA9IHRhcmdldC5pbm5lckhUTUwsIHRleHQgPSB0YXJnZXQuaW5uZXJUZXh0CgkJaWYgKGJhY2subGVuZ3RoID4gMTIwIHx8IGJhY2suaW5kZXhPZihpY2UuTkwpID4gLTEpIHsKCQkJcmV0dXJuIGNhbi5vbm1vdGlvbi5tb2RpZnlzKGNhbiwgdGFyZ2V0LCBjYikKCQl9CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLklOUFVULCB2YWx1ZTogdGFyZ2V0LmlubmVyVGV4dCwgc3R5bGU6IHsKCQkJd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aCA+IDQwMD8gNDAwOiB0YXJnZXQub2Zmc2V0V2lkdGgtMjAsCgkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSBsYW5nLkVOVEVSOiB0YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnZhbHVlCgkJCQkJZXZlbnQudGFyZ2V0LnZhbHVlID09IGJhY2sgfHwgY2IoZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSwgYmFjaykKCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLkVTQ0FQRTogdGFyZ2V0LmlubmVySFRNTCA9IGJhY2s7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJfQoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgaXRlbSAmJiBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0LCBjYikKCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5jbGljaygpIH0pCgkJfX1dKQoJfSwKCW1vZGlmeXM6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjYiwgaXRlbSkgeyB2YXIgYmFjayA9IHRhcmdldC5pbm5lckhUTUwKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIHZhbHVlOiB0YXJnZXQuaW5uZXJUZXh0LCBzdHlsZTogewoJCQl3aWR0aDogdGFyZ2V0Lm9mZnNldFdpZHRoID4gNDAwPyA0MDA6IHRhcmdldC5vZmZzZXRXaWR0aC0yMCwgaGVpZ2h0OiB0YXJnZXQub2Zmc2V0SGVpZ2h0IDwgNjA/IDYwOiB0YXJnZXQub2Zmc2V0SGVpZ2h0LTIwLAoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjoKCQkJCQlpZiAoZXZlbnQuY3RybEtleSkgeyB0YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnZhbHVlCgkJCQkJCWV2ZW50LnRhcmdldC52YWx1ZSA9PSBiYWNrIHx8IGNiKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIGJhY2spCgkJCQkJfQoJCQkJCWJyZWFrCgkJCQljYXNlIGxhbmcuRVNDQVBFOiB0YXJnZXQuaW5uZXJIVE1MID0gYmFjazsgYnJlYWsKCQkJCWRlZmF1bHQ6IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKQoJCQl9CgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQlpdGVtICYmIGNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQpCgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQuY2xpY2soKSB9KQoJCX19XSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lLCB0YXJnZXQpIHsKCQljYW4ucmVxdWlyZShbImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaHRtbDJjYW52YXNAMS4wLjAtcmMuNS9kaXN0L2h0bWwyY2FudmFzLm1pbi5qcyJdLCBmdW5jdGlvbigpIHsKCQkJaHRtbDJjYW52YXModGFyZ2V0fHxjYW4uX3RhcmdldCkudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7IHZhciB1cmwgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKQoJCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3QoY2FuLCB7Y29udGVudDoge2ltZzogdXJsLCBzdHlsZTogeyJtYXgtaGVpZ2h0IjogMjQwLCBkaXNwbGF5OiBodG1sLkJMT0NLfX0sIGR1cmF0aW9uOiAtMSwKCQkJCQlhY3Rpb246IHNoeSh7fSwgW2NsaS5DTE9TRSwgImRvd25sb2FkIl0sIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IG5hbWV9XSwgZnVuY3Rpb24obGlzdCkgeyB0b2FzdC5jbG9zZSgpCgkJCQkJCQljYW4ucGFnZS5DcmVhdGUoY2FuLCBodG1sLkEsIHtocmVmOiB1cmwsIGRvd25sb2FkOiBsaXN0WzBdKyIucG5nIn0pLmNsaWNrKCkKCQkJCQkJfSkKCQkJCQl9KSwKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCgoJaGlkZTogZnVuY3Rpb24oY2FuLCB0aW1lLCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQl0aW1lID0gY2FuLmJhc2UuaXNPYmplY3QodGltZSk/IHRpbWU6IHt2YWx1ZTogMTAsIGxlbmd0aDogdGltZXx8MjB9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgMSkKCQljYW4uY29yZS5UaW1lcih0aW1lLCBmdW5jdGlvbihldmVudCwgdmFsdWUsIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk9QQUNJVFksIDEtKGluZGV4KzEpL3RpbWUubGVuZ3RoKQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCksIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkRJU1BMQVksIGh0bWwuTk9ORSkgfSkKCX0sCglzaG93OiBmdW5jdGlvbihjYW4sIHRpbWUsIGNiLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCXRpbWUgPSBjYW4uYmFzZS5pc09iamVjdCh0aW1lKT8gdGltZToge2ludGVydmFsOiAxMCwgbGVuZ3RoOiB0aW1lfHwzMH0KCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAwLCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spCgkJY2FuLmNvcmUuVGltZXIodGltZSwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAoaW5kZXgrMSkvdGltZS5sZW5ndGgpCgkJfSwgY2IpCgl9LAoJbW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGxheW91dCwgY2IpIHsgdmFyIGJlZ2luOyBsYXlvdXQgPSBsYXlvdXR8fHt9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGxheW91dCksIHRhcmdldC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWxheW91dC5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0LCBsYXlvdXQud2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGgKCQkJbGF5b3V0LmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCwgbGF5b3V0LnRvcCA9IHRhcmdldC5vZmZzZXRUb3AKCQkJYmVnaW4gPSBjYW4uYmFzZS5Db3B5KHt4OiBldmVudC54LCB5OiBldmVudC55fSwgbGF5b3V0KQoJCX0sIHRhcmdldC5vbm1vdXNldXAgPSBmdW5jdGlvbihldmVudCkgeyBiZWdpbiA9IG51bGwgfQoKCQl0YXJnZXQub25tb3VzZW1vdmUgPSBmdW5jdGlvbihldmVudCkgeyBpZiAoIWJlZ2luIHx8ICFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgkJCWlmIChldmVudC5zaGlmdEtleSkgewoJCQkJbGF5b3V0LndpZHRoID0gbGF5b3V0LndpZHRoICsgZXZlbnQueCAtIGJlZ2luLnggCgkJCQlsYXlvdXQuaGVpZ2h0ID0gbGF5b3V0LmhlaWdodCArIGV2ZW50LnkgLSBiZWdpbi55CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5IRUlHSFQsIGxheW91dC5oZWlnaHQsIGh0bWwuV0lEVEgsIGxheW91dC53aWR0aCkKCQkJfSBlbHNlIHsKCQkJCWxheW91dC50b3AgPSBiZWdpbi50b3AgKyBldmVudC55IC0gYmVnaW4ueQoJCQkJbGF5b3V0LmxlZnQgPSBiZWdpbi5sZWZ0ICsgZXZlbnQueCAtIGJlZ2luLnggCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5MRUZULCBsYXlvdXQubGVmdCwgaHRtbC5UT1AsIGxheW91dC50b3ApCgkJCX0KCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldCwgbGF5b3V0KQoJCX0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldCwgbGF5b3V0KQoJfSwKCglzZWxlY3RGaWVsZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmICghZXZlbnQuY3RybEtleSB8fCBldmVudC5rZXkgPCAiMCIgfHwgZXZlbnQua2V5ID4gIjkiKSB7IHJldHVybiB9CgkJaWYgKGV2ZW50LmtleSA9PSAiMCIpIHsgcmV0dXJuIGNhbi5vbmltcG9ydC5fYmFjayhjYW4pIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7IGlmIChpbmRleCA9PSBldmVudC5rZXkpIHsKCQkJdmFyIGhlYWQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5USCwgZnVuY3Rpb24odGgsIG9yZGVyKSB7IHJldHVybiB0aC5pbm5lclRleHQgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgeyBjYW4uT3B0aW9uKGhlYWRbaW5kZXhdLCB0ZC5pbm5lclRleHQpIH0pCgkJCWNhbi5VcGRhdGUoZXZlbnQpCgkJfSB9KQoJfSwKCXNlbGVjdElucHV0VGFibGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGNiLCB0YXJnZXQpIHsKCQkvLyBpZiAodGFyZ2V0LnZhbHVlID09ICIiKSB7IHJldHVybiBjYigpIH0KCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGxhbmcuU0hJRlQ6CgkJCWNhc2UgbGFuZy5DT05UUk9MOgoJCQkJcmV0dXJuCgkJfQoKCQlpZiAoZXZlbnQuY3RybEtleSkgewoJCQlpZiAodGFyZ2V0Ll9pbmRleCA9PSB1bmRlZmluZWQpIHsKCQkJCXRhcmdldC5faW5kZXggPSAtMSwgdGFyZ2V0Ll92YWx1ZSA9IHRhcmdldC52YWx1ZQoJCQl9CgkJCWZ1bmN0aW9uIHNlbGVjdChvcmRlcikgeyBpZiAob3JkZXIgPT0gLTEpIHsgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0Ll92YWx1ZSB9CgkJCQl2YXIgaW5kZXggPSAwOyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCBodG1sLkhJRERFTikpIHsgcmV0dXJuIH0KCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgdHIsIGh0bWwuU0VMRUNUKTsgaWYgKG9yZGVyICE9IGluZGV4KyspIHsgcmV0dXJuIHRyIH0KCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdHIsIGh0bWwuU0VMRUNUKSwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgewoJCQkJCQlpbmRleCA9PSAwICYmICh0YXJnZXQudmFsdWUgPSB0ZC5pbm5lclRleHQpCgkJCQkJfSk7IHJldHVybiB0cgoJCQkJfSkubGVuZ3RoCgkJCX0KCQkJdmFyIHRvdGFsID0gc2VsZWN0KHRhcmdldC5faW5kZXgpOyBzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSAibiI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKHRhcmdldC5faW5kZXgrMikgJSAodG90YWwrMSkgLSAxKTsgYnJlYWsKCQkJCWNhc2UgInAiOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4K3RvdGFsKzEpICUgKHRvdGFsKzEpIC0gMSk7IGJyZWFrCgkJCQlkZWZhdWx0OiByZXR1cm4KCQkJfQoJCQlyZXR1cm4gY2FuLlN0YXR1cyhtZGIuSU5ERVgsIHRhcmdldC5faW5kZXgpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQl9CgoJCXRhcmdldC5faW5kZXggPSAtMSwgdGFyZ2V0Ll92YWx1ZSA9IHRhcmdldC52YWx1ZQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyLCBpbmRleCkgewoJCQl2YXIgaGFzID0gZmFsc2U7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgewoJCQkJaGFzID0gaGFzIHx8IHRkLmlubmVyVGV4dC5pbmRleE9mKHRhcmdldC52YWx1ZSk+LTEKCQkJfSksIGNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURERU4sICFoYXMpCgkJfSkKCgkJdmFyIHRvdGFsID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsIGh0bWwuSElEREVOKSkgeyByZXR1cm4gdHIgfQoJCX0pLmxlbmd0aDsgdG90YWwgPT0gMCAmJiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQljYW4uU3RhdHVzKGtpdC5EaWN0KG1kYi5UT1RBTCwgdG90YWwsIG1kYi5JTkRFWCwgdGFyZ2V0Ll9pbmRleCkpCgl9LAoJc2VsZWN0VGFibGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY2IpIHsgaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgkJZnVuY3Rpb24gc2VsZWN0KG9yZGVyKSB7IHZhciBpbmRleCA9IDAKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgaHRtbC5ISURERU4pKSB7IHJldHVybiB9CgkJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5TRUxFQ1QsIG9yZGVyID09IGluZGV4KyspKSB7IHJldHVybiB0ciB9CgkJCQlyZXR1cm4gY2FuLlN0YXR1cyhtZGIuSU5ERVgsIGluZGV4LTEpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRyKSwgdHIKCQkJfSkubGVuZ3RoCgkJfQoJCXZhciB0b3RhbCA9IHNlbGVjdCh0YXJnZXQuX2luZGV4KTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAibiI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKCh0YXJnZXQuX2luZGV4KSsxKSAlIHRvdGFsKTsgYnJlYWsKCQkJY2FzZSAicCI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKHRhcmdldC5faW5kZXgtMSkgPCAwPyB0b3RhbC0xOiAodGFyZ2V0Ll9pbmRleC0xKSk7IGJyZWFrCgkJCWRlZmF1bHQ6IHRhcmdldC5faW5kZXggPSAwOyByZXR1cm4KCQl9IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLCBfZm9jdXM6IFtdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQlpZiAod2luZG93LndlYnZpZXcpIHsKCQkJCWlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PSAiQSIpIHsgY2FuLnVzZXIub3BlbihldmVudC50YXJnZXQuaHJlZikgfQoJCQl9CgkJCWlmIChjYW4ucGFnZS50YWdpcyhbaHRtbC5TRUxFQ1QsIGh0bWwuSU5QVVQsIGh0bWwuVEVYVEFSRUFdLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGRvY3VtZW50LmJvZHksIGNhbi5wYWdlLktleXMoImZpZWxkc2V0LmlucHV0LmtleS5mbG9hdCIpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQl9KQoJCX0KCQljYW4ub25rZXltYXAuX2J1aWxkKGNhbiksIGRvY3VtZW50LmJvZHkub25rZXlkb3duID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJaWYgKGV2ZW50Lm1ldGFLZXkpIHsgaWYgKHdpbmRvdy53ZWJ2aWV3KSB7CgkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCWNhc2UgInEiOiB3aW5kb3cudGVybWluYXRlKCk7IGJyZWFrCgkJCQkJY2FzZSAidyI6IGNhbi51c2VyLmNsb3NlKCk7IGJyZWFrCgkJCQkJY2FzZSAiciI6IGNhbi51c2VyLnJlbG9hZCgpOyBicmVhawoJCQkJCWNhc2UgImYiOiBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KHt9LCB7dHlwZTogIioifSkpOyBicmVhawoJCQkJCWNhc2UgIlsiOiBoaXN0b3J5LmJhY2soKTsgYnJlYWsKCQkJCQljYXNlICJdIjogaGlzdG9yeS5mb3J3YXJkKCk7IGJyZWFrCgkJCQl9CgkJCX0gcmV0dXJuIH0KCgkJCWlmIChjYW4ucGFnZS50YWdpcyhbaHRtbC5TRUxFQ1QsIGh0bWwuSU5QVVQsIGh0bWwuVEVYVEFSRUFdLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgeyJtb2RlbCI6ICJub3JtYWwifSk7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTktFWURPV04sIG1zZyk7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQljYW4uX2tleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sIG1zZy5PcHRpb24oIm1vZGVsIiksIGNhbi5fa2V5bGlzdCwgY2FuLl9vdXRwdXQpCgkJfQoJfSwKCV9idWlsZDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLmNvcmUuSXRlbShjYW4ub25rZXltYXAuX21vZGUsIGZ1bmN0aW9uKGl0ZW0sIHZhbHVlKSB7IHZhciBlbmdpbmUgPSB7bGlzdDoge319CgkJCWNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgdmFyIG1hcCA9IGVuZ2luZQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspIHsKCQkJCQlpZiAoIW1hcC5saXN0W2tleVtpXV0pIHsgbWFwLmxpc3Rba2V5W2ldXSA9IHtsaXN0OiB7fX0gfQoJCQkJCW1hcCA9IG1hcC5saXN0W2tleVtpXV07IGlmIChpID09IGtleS5sZW5ndGgtMSkgeyBtYXAuY2IgPSBjYiB9CgkJCQl9CgkJCX0pLCBjYW4ub25rZXltYXAuX2VuZ2luZVtpdGVtXSA9IGVuZ2luZQoJCX0pCgl9LAoJX3BhcnNlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtb2RlLCBsaXN0LCB0YXJnZXQpIHsgbGlzdCA9IGxpc3R8fFtdCgkJaWYgKFsiQ29udHJvbCIsICJTaGlmdCJdLmluZGV4T2YoZXZlbnQua2V5KSA+IC0xKSB7IHJldHVybiBsaXN0IH0KCQlsaXN0LnB1c2goZXZlbnQua2V5KTsgZm9yICh2YXIgcHJlID0gMDsgcHJlIDwgbGlzdC5sZW5ndGg7IHByZSsrKSB7CgkJCWlmICgiMCIgPD0gbGlzdFtwcmVdICYmIGxpc3RbcHJlXSA8PSAiOSIpIHsgY29udGludWUgfSBicmVhawoJCX07IHZhciBjb3VudCA9IHBhcnNlSW50KGxpc3Quc2xpY2UoMCwgcHJlKS5qb2luKCIiKSl8fDEKCgkJdmFyIG1hcCA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXQoJCWZ1bmN0aW9uIHJlcGVhdChjYiwgY291bnQpIHsgbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7IGlmIChjYihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSkgeyBicmVhayB9IH0gfQoJCXZhciBjYiA9IG1hcCAmJiBtYXBbZXZlbnQua2V5XTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgZXZlbnQua2V5Lmxlbmd0aCA+IDEpIHsgcmVwZWF0KGNiLCBjb3VudCk7IHJldHVybiBsaXN0IH0KCQl2YXIgY2IgPSBtYXAgJiYgbWFwW2V2ZW50LmtleS50b0xvd2VyQ2FzZSgpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgZXZlbnQua2V5Lmxlbmd0aCA+IDEpIHsgcmVwZWF0KGNiLCBjb3VudCk7IHJldHVybiBsaXN0IH0KCgkJdmFyIG1hcCA9IGNhbi5vbmtleW1hcC5fZW5naW5lW21vZGVdOyBpZiAoIW1hcCkgeyByZXR1cm4gW10gfQoJCWZvciAodmFyIGkgPSBwcmU7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrICkgewoJCQl2YXIgbWFwID0gbWFwLmxpc3RbbGlzdFtpXV07IGlmICghbWFwKSB7IHJldHVybiBbXSB9CgkJCWlmIChpID09IGxpc3QubGVuZ3RoLTEgJiYgY2FuLmJhc2UuaXNGdW5jKG1hcC5jYikpIHsgcmVwZWF0KG1hcC5jYiwgY291bnQpOyByZXR1cm4gW10gfQoJCX0KCQlyZXR1cm4gbGlzdAoJfSwKCV9tb2RlOiB7CgkJaW5zZXJ0OiB7CgkJCWprOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LmJsdXIoKSwgY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQtMSwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQlFc2NhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuYmx1cigpIH0sCgkJCUVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIGhpcyA9IHRhcmdldC5faGlzdG9yeXx8W10KCQkJCWhpcy5wdXNoKHRhcmdldC52YWx1ZSksIHRhcmdldC5faGlzdG9yeSA9IGhpcywgdGFyZ2V0Ll9jdXJyZW50ID0gaGlzLmxlbmd0aAoJCQkJY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSAmJiBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpCgkJCX0sCgkJfSwKCQlpbnNlcnRfY3RybDogewoJCQlwOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCXZhciBoaXMgPSB0YXJnZXQuX2hpc3Rvcnl8fFtdLCBwb3MgPSB0YXJnZXQuX2N1cnJlbnR8fDAKCQkJCXBvcyA9IC0tcG9zICUgKGhpcy5sZW5ndGgrMSk7IGlmIChwb3MgPCAwKSB7IHBvcyA9IGhpcy5sZW5ndGggfQoJCQkJdGFyZ2V0Ll9jdXJyZW50ID0gcG9zLCB0YXJnZXQudmFsdWUgPSBoaXNbcG9zXXx8IiIKCQkJfSwKCQkJbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgaGlzID0gdGFyZ2V0Ll9oaXN0b3J5fHxbXSwgcG9zID0gdGFyZ2V0Ll9jdXJyZW50fHwwCgkJCQlwb3MgPSArK3BvcyAlIChoaXMubGVuZ3RoKzEpCgkJCQl0YXJnZXQuX2N1cnJlbnQgPSBwb3MsIHRhcmdldC52YWx1ZSA9IGhpc1twb3NdfHwiIgoJCQl9LAoKCQkJdTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgMCwgdGFyZ2V0LnNlbGVjdGlvbkVuZCkgfSwKCQkJazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQloOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQtMSwgMSkgfSwKCQkJZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgMCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQl3OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIHN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTIsIGVuZCA9IHRhcmdldC5zZWxlY3Rpb25FbmQtMQoJCQkJZm9yICh2YXIgaSA9IHN0YXJ0OyBpID49IDA7IGktLSkgewoJCQkJCWlmICh0YXJnZXQudmFsdWVbZW5kXSA9PSBpY2UuU1AgJiYgdGFyZ2V0LnZhbHVlW2ldICE9IGljZS5TUCkgeyBicmVhayB9CgkJCQkJaWYgKHRhcmdldC52YWx1ZVtlbmRdICE9IGljZS5TUCAmJiB0YXJnZXQudmFsdWVbaV0gPT0gaWNlLlNQKSB7IGJyZWFrIH0KCQkJCX0gY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCBpKzEsIGVuZC1pKQoJCQl9LAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKCglpbnB1dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQubWV0YWtleSkgeyByZXR1cm4gfSB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdGFyZ2V0Ll9rZXlzID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBldmVudC5jdHJsS2V5PyAiaW5zZXJ0X2N0cmwiOiBtZGIuSU5TRVJULCB0YXJnZXQuX2tleXMsIHRhcmdldCkKCX0sCglwcmV2ZW50OiBmdW5jdGlvbihldmVudCkgeyBldmVudC5zdG9wUHJvcGFnYXRpb24oKSwgZXZlbnQucHJldmVudERlZmF1bHQoKTsgcmV0dXJuIHRydWUgfSwKCWRlbGV0ZVRleHQ6IGZ1bmN0aW9uKHRhcmdldCwgc3RhcnQsIGNvdW50KSB7IHZhciBlbmQgPSBjb3VudD8gc3RhcnQrY291bnQ6IHRhcmdldC52YWx1ZS5sZW5ndGgKCQl2YXIgY3V0ID0gdGFyZ2V0LnZhbHVlLnNsaWNlKHN0YXJ0LCBlbmQpCgkJdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnN1YnN0cmluZygwLCBzdGFydCkrdGFyZ2V0LnZhbHVlLnN1YnN0cmluZyhlbmQsIHRhcmdldC52YWx1ZS5sZW5ndGgpCgkJcmV0dXJuIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCwgc3RhcnQpLCBjdXQKCX0sCglpbnNlcnRUZXh0OiBmdW5jdGlvbih0YXJnZXQsIHRleHQpIHsgdmFyIHN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0CgkJdmFyIGJlZm9yZSA9IHRhcmdldC52YWx1ZS5zbGljZSgwLCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIGFmdGVyID0gdGFyZ2V0LnZhbHVlLnNsaWNlKHRhcmdldC5zZWxlY3Rpb25FbmQpCgkJdGFyZ2V0LnZhbHVlID0gYmVmb3JlK3RleHQrYWZ0ZXIKCQlyZXR1cm4gdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0KzEsIHN0YXJ0KzEpCgl9LAoJY3Vyc29yTW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGNvdW50LCBiZWdpbikgeyBiZWdpbiAhPSB1bmRlZmluZWQgJiYgdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKGJlZ2luLCBiZWdpbikKCQl0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UodGFyZ2V0LnNlbGVjdGlvblN0YXJ0K2NvdW50LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQrY291bnQpCgl9LAp9KQo=",
        "usr/volcanos/lib/base.js": "Vm9sY2Fub3MoImJhc2UiLCB7aGVscDogIuaVsOaNruexu+WeiyIsIEludDogZnVuY3Rpb24odmFsLCBkZWYpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCl8fGRlZnx8MCB9LAoJTWluOiBmdW5jdGlvbih2YWwsIG1pbikgeyByZXR1cm4gdmFsID4gbWluPyB2YWw6IG1pbiB9LAoJTWF4OiBmdW5jdGlvbih2YWwsIG1heCkgeyByZXR1cm4gdmFsIDwgbWF4PyB2YWw6IG1heCB9LAoJT2JqOiBmdW5jdGlvbih2YWwsIGRlZikgewoJCXRyeSB7CgkJCWlmICh0eXBlb2YgdmFsID09IGxhbmcuU1RSSU5HKSB7IGlmICh2YWwgPT0gIiIpIHsgcmV0dXJuIGRlZiB9IHZhbCA9IEpTT04ucGFyc2UodmFsKSB9CgkJCWlmICh2YWwubGVuZ3RoID4gMCkgeyByZXR1cm4gdmFsIH0gZm9yICh2YXIgayBpbiB2YWwpIHsgcmV0dXJuIHZhbCB9IHJldHVybiBkZWYKCQl9IGNhdGNoIChlKSB7IHJldHVybiB2YWwgJiYgdmFsLnNwbGl0ICYmIHZhbC5zcGxpdChpY2UuRlMpIHx8IGRlZiB9Cgl9LAoJQ29weTogZnVuY3Rpb24odG8sIGZyb20sIHNraXApIHsgaWYgKCFmcm9tKSB7IHJldHVybiB0byB9CgkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMiB8fCB0eXBlb2Ygc2tpcCA9PSAiYm9vbGVhbiIpIHsKCQkJZm9yICh2YXIgayBpbiBmcm9tKSB7CgkJCQlpZiAoc2tpcCAmJiB0b1trXSAhPSB1bmRlZmluZWQpIHsgY29udGludWUgfQoJCQkJaWYgKGZyb21ba10gPT09ICIiKSB7IGRlbGV0ZSh0b1trXSk7IGNvbnRpbnVlIH0KCQkJCXRvW2tdID0gZnJvbVtrXQoJCQl9CgkJCXJldHVybiB0bwoJCX0KCQlmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQl2YXIgayA9IGFyZ3VtZW50c1tpXTsgdG9ba10gPSBmcm9tW2tdCgkJfQoJCXJldHVybiB0bwoJfSwKCUVxOiBmdW5jdGlvbih0bywgZnJvbSkgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQlpZiAodHlwZW9mIHRvICE9IHR5cGVvZiBmcm9tKSB7IHJldHVybiBmYWxzZSB9CgkJaWYgKHR5cGVvZiB0byA9PSBsYW5nLk9CSkVDVCkgewoJCQlpZiAodG8ubGVuZ3RoICE9IGZyb20ubGVuZ3RoKSB7IHJldHVybiBmYWxzZSB9CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgdG8ubGVuZ3RoOyBpKyspIHsKCQkJCWlmICghY2FsbCh0b1tpXSwgZnJvbVtpXSkpIHsgcmV0dXJuIGZhbHNlIH0KCQkJfQoJCQlmb3IgKHZhciBrIGluIHRvKSB7CgkJCQlpZiAoIWNhbGwodG9ba10sIGZyb21ba10pKSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJcmV0dXJuIHRydWUKCQl9CgkJcmV0dXJuIHRvID09PSBmcm9tCgl9LAoKCUV4dDogZnVuY3Rpb24ocGF0aCkgeyByZXR1cm4gKHBhdGguc3BsaXQoaWNlLlBTKS5wb3AoKS5zcGxpdChpY2UuUFQpLnBvcCgpKS50b0xvd2VyQ2FzZSgpIH0sCglQYXRoOiBmdW5jdGlvbihwYXRoKSB7IHZhciByZXMgPSAiIgoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IGlmICghYXJndW1lbnRzW2ldKSB7IGNvbnRpbnVlIH0KCQkJcmVzICs9IChhcmd1bWVudHNbaV1bMF09PWljZS5QUyB8fCByZXM9PSIiIHx8IHJlc1tyZXMubGVuZ3RoLTFdPT1pY2UuUFM/ICIiOiBpY2UuUFMpICsgYXJndW1lbnRzW2ldLnRyaW0oKQoJCX0KCQlyZXR1cm4gcmVzCgl9LAoJQXJnczogZnVuY3Rpb24oKSB7IHZhciByZXMgPSBbXQoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCWlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuT0JKRUNUKSB7CgkJCQlmb3IgKHZhciBrIGluIGFyZ3VtZW50c1tpXSkgeyByZXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaV1ba10pKSB9CgkJCQlpLS07IGNvbnRpbnVlCgkJCX0gZWxzZSBpZiAoYXJndW1lbnRzW2ldKSB7IAoJCQkJcmVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tpXSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaSsxXSkpCgkJCX0KCQl9CgkJcmV0dXJuIHJlcy5qb2luKCImIikKCX0sCglNZXJnZVVSTDogZnVuY3Rpb24odXJsKSB7CgkJdmFyIGFyZ3MgPSB7fTsgKHVybC5zcGxpdCgiPyIpWzFdfHwiIikuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKCFpdGVtKSB7IHJldHVybiB9CgkJCXZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgYXJnc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQl9KQoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCXN3aXRjaCAodHlwZW9mIGFyZ3VtZW50c1tpXSkgewoJCQkJY2FzZSBsYW5nLlNUUklORzogYXJnc1thcmd1bWVudHNbaV1dID0gYXJndW1lbnRzW2krMV0sIGkrKzsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGFyZ3VtZW50c1tpXS5sZW5ndGggPiAwKSB7CgkJCQkJCWZvciAodmFyIGogPSAwOyBqIDwgYXJndW1lbnRzW2ldLmxlbmd0aDsgaiArPSAyKSB7IGFyZ3NbYXJndW1lbnRzW2ldW2pdXSA9IGFyZ3VtZW50c1tpXVtqXSB9CgkJCQkJfSBlbHNlIHsKCQkJCQkJZm9yICh2YXIgayBpbiBhcmd1bWVudHNbaV0pIHsgYXJnc1trXSA9IGFyZ3VtZW50c1tpXVtrXSB9CgkJCQkJfQoJCQkJCWJyZWFrCgkJCX0KCQl9CgkJdmFyIGxpc3QgPSBbXTsgZm9yICh2YXIgayBpbiBhcmdzKSB7IGsgJiZhcmdzW2tdICYmIGxpc3QucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmdzW2tdKSkgfQoJCXJldHVybiB1cmwuc3BsaXQoIj8iKVswXSsobGlzdC5sZW5ndGg+MD8gIj8iK2xpc3Quam9pbigiJiIpOiAiIikKCX0sCglQYXJzZVVSTDogZnVuY3Rpb24odXJsKSB7IHZhciByZXMgPSB7bGluazogdXJsfQoJCXZhciBsaXN0ID0gdXJsLnNwbGl0KCI/Iik7IHJlc1sib3JpZ2luIl0gPSBsaXN0WzBdCgkJbGlzdFsxXSAmJiBsaXN0WzFdLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCXZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgcmVzW2RlY29kZVVSSUNvbXBvbmVudChsc1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KGxzWzFdKQoJCX0pCgkJcmV0dXJuIHJlcwoJfSwKCVBhcnNlSlNPTjogZnVuY3Rpb24oc3RyKSB7IHZhciByZXMKCQlpZiAodHlwZW9mIHN0ciA9PSBsYW5nLk9CSkVDVCkgeyByZXR1cm4gc3RyIH0KCQlpZiAoc3RyLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IHZhciBscyA9IHN0ci5zcGxpdCgiPyIpCgkJCXJlcyA9IHt0eXBlOiBtZGIuTElOSywgbmFtZTogIiIsIHRleHQ6IHN0cn0KCQkJcmVzLm5hbWUgPSBsc1swXS5zcGxpdCgiOi8vIikucG9wKCkuc3BsaXQoaWNlLlBTKVswXQoJCQlsc1sxXSAmJiBsc1sxXS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyB2YXIgbHMgPSBpdGVtLnNwbGl0KCI9IikKCQkJCXJlc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQkJfSkKCQkJcmV0dXJuIHJlcwoJCX0KCQl0cnkgeyByZXMgPSBKU09OLnBhcnNlKHN0ciksIHJlcy50ZXh0ID0gcmVzLnRleHR8fHN0ciwgcmVzLnR5cGUgPSByZXMudHlwZXx8bmZzLkpTT04KCQl9IGNhdGNoIChlKSB7IHJlcyA9IHt0eXBlOiBtZGIuVEVYVCwgdGV4dDogc3RyfSB9CgkJcmV0dXJuIHJlcwoJfSwKCVBhcnNlU2l6ZTogZnVuY3Rpb24oc2l6ZSkgeyBzaXplID0gc2l6ZS50b0xvd2VyQ2FzZSgpCgkJaWYgKHNpemUuZW5kc1dpdGgoInRiIikgfHwgc2l6ZS5lbmRzV2l0aCgidCIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0ICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoImdiIikgfHwgc2l6ZS5lbmRzV2l0aCgiZyIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0ICogMTAyNAoJCX0KCQlpZiAoc2l6ZS5lbmRzV2l0aCgibWIiKSB8fCBzaXplLmVuZHNXaXRoKCJtIikpIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUpICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoImtiIikgfHwgc2l6ZS5lbmRzV2l0aCgiayIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQKCQl9CgkJcmV0dXJuIHBhcnNlSW50KHNpemUpCgl9LAoKCVNpemU6IGZ1bmN0aW9uKHNpemUpIHsgc2l6ZSA9IHBhcnNlSW50KHNpemUpCgkJaWYgKHNpemUgPiAxMDAwMDAwMDAwKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplLzEwMDAwMDAwMDApICsgaWNlLlBUICsgcGFyc2VJbnQoc2l6ZS8xMDAwMDAwMCUxMDApICsgIkciCgkJfQoJCWlmIChzaXplID4gMTAwMDAwMCkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZS8xMDAwMDAwKSArIGljZS5QVCArIHBhcnNlSW50KHNpemUvMTAwMDAlMTAwKSArICJNIgoJCX0KCQlpZiAoc2l6ZSA+IDEwMDApIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUvMTAwMCkgKyBpY2UuUFQgKyBwYXJzZUludChzaXplLzEwJTEwMCkgKyAiSyIKCQl9CgkJcmV0dXJuIHNpemUgKyAiQiIKCX0sCglOdW1iZXI6IGZ1bmN0aW9uKGQsIG4pIHsgdmFyIHJlc3VsdCA9IFtdCgkJd2hpbGUgKGQgPiAwKSB7IHJlc3VsdC5wdXNoKGQlMTApOyBkID0gcGFyc2VJbnQoZC8xMCk7IG4tLSB9CgkJd2hpbGUgKG4gPiAwKSB7IHJlc3VsdC5wdXNoKCIwIik7IG4tLSB9CgkJcmV0dXJuIHJlc3VsdC5yZXZlcnNlKCksIHJlc3VsdC5qb2luKCIiKQoJfSwKCUZvcm1hdDogZnVuY3Rpb24ob2JqKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopIH0sCglTaW1wbGU6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0gW10KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQl2YXIgYXJnID0gYXJndW1lbnRzW2ldOyBzd2l0Y2ggKHR5cGVvZiBhcmd1bWVudHNbaV0pIHsKCQkJCWNhc2UgbGFuZy5OVU1CRVI6IHJlcy5wdXNoKGFyZyk7IGJyZWFrCgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXMucHVzaChhcmcpOyBicmVhawoJCQkJY2FzZSBsYW5nLk9CSkVDVDoKCQkJCQlpZiAoYXJnLmxlbmd0aCA+IDApIHsgcmVzID0gcmVzLmNvbmNhdChhcmcpOyBicmVhayB9CgkJCQkJZm9yICh2YXIgayBpbiBhcmcpIHsgayAmJiBhcmdba10gJiYgcmVzLnB1c2goaywgYXJnW2tdKSB9CgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6IHJlcy5wdXNoKGFyZyk7IAoJCQl9CgkJfQoJCXJldHVybiByZXMKCX0sCglBZGRVbmlxOiBmdW5jdGlvbihsaXN0LCB2YWx1ZSkgeyBsaXN0ID0gbGlzdHx8W107IHJldHVybiBsaXN0LmluZGV4T2YodmFsdWUpID09IC0xICYmIGxpc3QucHVzaCh2YWx1ZSksIGxpc3QgfSwKCglEYXRlOiBmdW5jdGlvbih0aW1lKSB7IHZhciBub3cgPSBuZXcgRGF0ZSgpCgkJaWYgKHR5cGVvZiB0aW1lID09IGxhbmcuU1RSSU5HICYmIHRpbWUgIT0gIiIpIHsgdmFyIGxzID0gdGltZS5zcGxpdChpY2UuU1ApCgkJCXZhciB2cyA9IGxzWzBdLnNwbGl0KCItIikKCQkJbm93LnNldEZ1bGxZZWFyKHBhcnNlSW50KHZzWzBdKSkKCQkJbm93LnNldE1vbnRoKHBhcnNlSW50KHZzWzFdKS0xKQoJCQlub3cuc2V0RGF0ZShwYXJzZUludCh2c1syXSkpCgoJCQl2YXIgdnMgPSBsc1sxXS5zcGxpdCgiOiIpCgkJCW5vdy5zZXRIb3VycyhwYXJzZUludCh2c1swXSkpCgkJCW5vdy5zZXRNaW51dGVzKHBhcnNlSW50KHZzWzFdKSkKCQkJbm93LnNldFNlY29uZHMocGFyc2VJbnQodnNbMl0pKQoJCX0gZWxzZSBpZiAodGltZSkgewoJCQlub3cgPSB0aW1lCgkJfQoJCXJldHVybiBub3cKCX0sCglUaW1lOiBmdW5jdGlvbih0aW1lLCBmbXQpIHsgdmFyIG5vdyA9IHRoaXMuRGF0ZSh0aW1lKQoJCXZhciBsaXN0ID0gWyJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiXQoJCWZtdCA9IGZtdHx8IiVIOiVNOiVTIgoJCWZtdCA9IGZtdC5yZXBsYWNlKCIleSIsIG5vdy5nZXRGdWxsWWVhcigpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlbSIsIHRoaXMuTnVtYmVyKG5vdy5nZXRNb250aCgpKzEsIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlZCIsIHRoaXMuTnVtYmVyKG5vdy5nZXREYXRlKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIldyIsIGxpc3Rbbm93LmdldERheSgpXSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJUgiLCB0aGlzLk51bWJlcihub3cuZ2V0SG91cnMoKSwgMikpCgkJZm10ID0gZm10LnJlcGxhY2UoIiVNIiwgdGhpcy5OdW1iZXIobm93LmdldE1pbnV0ZXMoKSwgMikpCgkJZm10ID0gZm10LnJlcGxhY2UoIiVTIiwgdGhpcy5OdW1iZXIobm93LmdldFNlY29uZHMoKSwgMikpCgkJcmV0dXJuIGZtdAoJfSwKCVRpbWVBZGQ6IGZ1bmN0aW9uKHQsIGQpIHsgcmV0dXJuIG5ldyBEYXRlKHQgLSB0JSgyNCozNjAwKjEwMDApIC0gOCozNjAwKjEwMDAgKyBkKjI0KjM2MDAqMTAwMCkgfSwKCUR1cmF0aW9uOiBmdW5jdGlvbihuKSB7IHZhciByZXMgPSAiIiwgaCA9IDAKCQloID0gcGFyc2VJbnQobi8zNjAwMDAwLzI0KSwgaCA+IDAgJiYgKHJlcyArPSBoKyJkIiksIG4gPSBuICUgKDM2MDAwMDAqMjQpCgkJaCA9IHBhcnNlSW50KG4vMzYwMDAwMCksIGggPiAwICYmIChyZXMgKz0gaCsiaCIpLCBuID0gbiAlIDM2MDAwMDAKCQloID0gcGFyc2VJbnQobi82MDAwMCksIGggPiAwICYmIChyZXMgKz0gaCsibSIpLCBuID0gbiAlIDYwMDAwCgkJaCA9IHBhcnNlSW50KG4vMTAwMCksIGggPiAwICYmIChyZXMgKz0gaCksIG4gPSBuICUgMTAwMAoJCXJldHVybiByZXMgKyAobiA+IDA/IGljZS5QVCtwYXJzZUludChuLzEwKTogIiIpICsgInMiCgl9LAoKCW1vZDogZnVuY3Rpb24oaW5kZXgsIHRvdGFsKSB7CgkJcmV0dXJuIChpbmRleCt0b3RhbCkgJSB0b3RhbAoJfSwKCWdldFZhbGlkOiBmdW5jdGlvbigpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgdiA9IGFyZ3VtZW50c1tpXQoJCQlpZiAodHlwZW9mIHYgPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCWlmICh2ID09IG51bGwpIHsgY29udGludWUgfQoJCQkJZm9yICh2YXIgayBpbiB2KSB7IHJldHVybiB2IH0KCQkJCWlmICh2Lmxlbmd0aCA+IDApIHsgcmV0dXJuIHYgfQoJCQl9IGVsc2UgaWYgKHR5cGVvZiB2ID09IGxhbmcuU1RSSU5HICYmIHYpIHsKCQkJCXJldHVybiB2CgkJCX0gZWxzZSBpZiAodiA9PSB1bmRlZmluZWQpIHsKCQkJCWNvbnRpbnVlCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gdgoJCQl9CgkJfQoJfSwKCWlzTnVtYmVyOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5OVU1CRVIgfSwKCWlzU3RyaW5nOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5TVFJJTkcgfSwKCWlzT2JqZWN0OiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5PQkpFQ1QgfSwKCWlzQXJyYXk6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdHlwZW9mIHZhbCA9PSBsYW5nLk9CSkVDVCAmJiB2YWwubGVuZ3RoICE9IHVuZGVmaW5lZCB9LAoJaXNGdW5jOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5GVU5DVElPTiB9LAoJaXNGdW5jdGlvbjogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzQ2FsbGJhY2s6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGtleS5pbmRleE9mKCJvbiIpID09IDAgJiYgdHlwZW9mIHZhbHVlID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzVW5kZWZpbmVkOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbCA9PSB1bmRlZmluZWQgfSwKCWlzTnVsbDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB2YWwgPT0gbnVsbCB9LAoJcmVwbGFjZUFsbDogZnVuY3Rpb24oc3RyKSB7CgkJZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDIpIHsgaWYgKCFhcmd1bWVudHNbaV0pIHsgY29udGludWUgfQoJCQlpZiAoc3RyLnJlcGxhY2VBbGwpIHsgc3RyID0gc3RyLnJlcGxhY2VBbGwoYXJndW1lbnRzW2ldLCBhcmd1bWVudHNbaSsxXSk7IGNvbnRpbnVlIH0KCQkJaWYgKHN0ci5yZXBsYWNlKSB7IHN0ciA9IHN0ci5yZXBsYWNlKGFyZ3VtZW50c1tpXSwgYXJndW1lbnRzW2krMV0pOyBjb250aW51ZSB9CgkJfQoJCXJldHVybiBzdHIKCX0sCgoJY291bnQ6IGZ1bmN0aW9uKHN0ciwgcykgeyB2YXIgbiA9IDAKCQlmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewoJCQlpZiAoc3RyW2ldID09IHMpIHsgbisrIH0KCQl9CgkJcmV0dXJuIG4KCX0sCglyYW5kb206IGZ1bmN0aW9uKG1heCwgbWluKSB7IHJldHVybiBtaW4gPSBtaW58fDAsIHBhcnNlSW50KE1hdGgucmFuZG9tKCkqKG1heC1taW4pKSttaW4gfSwKCWlzTmlnaHQ6IGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKTsgcmV0dXJuIG5vdy5nZXRIb3VycygpIDwgNyB8fCBub3cuZ2V0SG91cnMoKSA+IDE3IH0sCgliZWdpbldpdGg6IGZ1bmN0aW9uKHN0ciwgYmVnaW4pIHsgcmV0dXJuIHN0ci50cmltKCkuaW5kZXhPZihiZWdpbikgPT0gMCB9LAoJZW5kV2l0aDogZnVuY3Rpb24oc3RyLCBlbmQpIHsgcmV0dXJuIHN0ci5sYXN0SW5kZXhPZihlbmQpICsgZW5kLmxlbmd0aCA9PSBzdHIubGVuZ3RoIH0sCgl0cmltOiBmdW5jdGlvbihhcmdzKSB7IGlmICh0aGlzLmlzU3RyaW5nKGFyZ3MpKSB7IHJldHVybiBhcmdzLnRyaW0oKSB9CgkJaWYgKHRoaXMuaXNBcnJheShhcmdzKSkgeyBmb3IgKHZhciBpID0gYXJncy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHsgaWYgKCFhcmdzW2ldKSB7IGFyZ3MucG9wKCkgfSBlbHNlIHsgYnJlYWsgfSB9IH0KCQlyZXR1cm4gYXJncwoJfSwKCXRyaW1QcmVmaXg6IGZ1bmN0aW9uKHN0ciwgcHJlKSB7IGlmIChzdHIuaW5kZXhPZihwcmUpID09IC0xKSB7IHJldHVybiBzdHIgfSByZXR1cm4gc3RyLnNsaWNlKHByZS5sZW5ndGgpIH0sCgl0cmltU3VmZml4OiBmdW5jdGlvbihzdHIsIGVuZCkgewoJCXZhciBpbmRleCA9IHN0ci5sYXN0SW5kZXhPZihlbmQpCgkJaWYgKGluZGV4ID09IC0xIHx8IGluZGV4K2VuZC5sZW5ndGggIT0gc3RyLmxlbmd0aCkgeyByZXR1cm4gc3RyIH0gcmV0dXJuIHN0ci5zbGljZSgwLCBpbmRleCkKCX0sCglqb2luOiBmdW5jdGlvbihsaXN0LCBzcCkgeyByZXR1cm4gKGxpc3R8fFtdKS5qb2luKHNwfHxpY2UuU1ApIH0sCglqb2luczogZnVuY3Rpb24obGlzdCwgaW5uZXIsIG91dGVyKSB7IAoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQlsaXN0W2ldID0gdHlwZW9mIGxpc3RbaV0gPT0gbGFuZy5TVFJJTkc/IGxpc3RbaV06IGxpc3RbaV0uam9pbihpbm5lcnx8aWNlLkZTKQoJCX0KCQlyZXR1cm4gbGlzdC5qb2luKG91dGVyfHxpY2UuU1ApCgl9LAp9KQo=",
        "usr/volcanos/lib/core.js": "Vm9sY2Fub3MoImNvcmUiLCB7aGVscDogIuaVsOaNrue7k+aehCIsCglLZXlzOiBzaHkoIui/nuaOpeWZqCIsIGZ1bmN0aW9uKCkgeyB2YXIgbGlzdCA9IFtdCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJc3dpdGNoICh0eXBlb2YgdikgewoJCQkJY2FzZSBsYW5nLk9CSkVDVDogZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7IGxpc3QucHVzaCh2W2pdKSB9IGJyZWFrCgkJCQljYXNlIGxhbmcuTlVNQkVSOiBsaXN0LnB1c2godisiIik7IGJyZWFrCgkJCQljYXNlIGxhbmcuRlVOQ1RJT046IHYgPSB2KCkKCQkJCWRlZmF1bHQ6IHYgJiYgbGlzdC5wdXNoKHYrIiIpCgkJCX0KCQl9CgkJcmV0dXJuIGxpc3Quam9pbihpY2UuUFQpCgl9KSwKCVZhbHVlOiBzaHkoIuWtmOWCqOWZqCIsIGZ1bmN0aW9uKGRhdGEsIGtleSwgdmFsdWUpIHsKCQlpZiAoZGF0YSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0KCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gZGF0YSB9CgoJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUICYmIGtleS5sZW5ndGggPiAwKSB7IGtleSA9IGtleS5qb2luKGljZS5QVCkgfQoJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUKSB7IGZvciAodmFyIGsgaW4ga2V5KSB7IGFyZ3VtZW50cy5jYWxsZWUuY2FsbCh0aGlzLCBkYXRhLCBrLCBrZXlba10pIH0gcmV0dXJuIGRhdGEgfQoKCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CgkJCXZhciBfZGF0YSA9IGRhdGEKCgkJCXZhciBscyA9IGtleS5zcGxpdChpY2UuUFQpCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbHMubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBfc3ViID0gX2RhdGFbbHNbaV1dfHx7fQoJCQkJX2RhdGFbbHNbaV1dID0gX3N1YgoJCQkJaWYgKGkgPT0gbHMubGVuZ3RoIC0gMSkgewoJCQkJCV9kYXRhW2xzW2ldXSA9IHZhbHVlCgkJCQl9IGVsc2UgewoJCQkJCV9kYXRhID0gX3N1YgoJCQkJfQoJCQl9CgkJCS8vIGRhdGFba2V5XSA9IHZhbHVlCgkJfQoJCWlmIChkYXRhW2tleV0gIT0gdW5kZWZpbmVkKSB7IHJldHVybiBkYXRhW2tleV0gfQoKCQl2YXIgcCA9IGRhdGEsIGxzID0ga2V5LnNwbGl0KGljZS5QVCk7IHdoaWxlIChwICYmIGxzLmxlbmd0aCA+IDApIHsKCQkJaWYgKGxzWzBdID09ICItMSIpIHsgbHNbMF0gPSBwLmxlbmd0aC0xIH0KCQkJcCA9IHBbbHNbMF1dLCBscyA9IGxzLnNsaWNlKDEpCgkJfSByZXR1cm4gcAoJfSksCglTcGxpdDogc2h5KCLliIbor43lmagiLCBmdW5jdGlvbihzdHIpIHsgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHsgcmV0dXJuIFtdIH0KCQl2YXIgb3B0ID0ge2RldGFpbDogZmFsc2V9LCBhcmcgPSBbXTsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVD8gb3B0ID0gYXJndW1lbnRzW2ldOiBhcmcucHVzaChhcmd1bWVudHNbaV0pCgkJfQoKCQkvLyDlrZfnrKblrprkuYkKCQlmdW5jdGlvbiBfbGlzdChzdHIpIHsgdmFyIHJlcyA9IHt9OyBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgeyByZXNbc3RyW2ldXSA9IHRydWUgfTsgcmV0dXJuIHJlcyB9CgkJdmFyIHNwYWNlID0gX2xpc3QoYXJnWzBdfHwiXHQgLDtcbiIpICAvLyDnqbrnmb3nrKYKCQl2YXIgYmxvY2sgPSBfbGlzdChhcmdbMV18fCJ7WygpXX0iKSAgIC8vIOWIhumalOespgoJCXZhciBxdW90ZSA9IF9saXN0KGFyZ1syXXx8IidcImAiKSAgICAgLy8g5byV55So56ymCgkJdmFyIHRyYW5zID0gX2xpc3QoYXJnWzNdfHwiXFwiKSAgICAgICAvLyDovazkuYnnrKYKCgkJdmFyIHJlcyA9IFtdLCBiZWdpbiA9IDA7IGZ1bmN0aW9uIHB1c2gob2JqKSB7CgkJCW9iaiAmJiByZXMucHVzaCh0eXBlb2Ygb2JqID09IGxhbmcuU1RSSU5HIHx8IG9wdC5kZXRhaWw/IG9iajogb2JqLnRleHQpLCBiZWdpbiA9IC0xCgkJfQoKCQkvLyDlvIDlp4vliIbor40KCQlmb3IgKHZhciBzID0gIiIsIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChzcGFjZVtzdHJbaV1dKSB7IC8vIOepuueZveespgoJCQkJaWYgKHMpIHsgY29udGludWUgfQoJCQkJYmVnaW4gPiAtMSAmJiBwdXNoKHN0ci5zbGljZShiZWdpbiwgaSkpCgkJCQlvcHQuZGV0YWlsICYmIHB1c2goe3R5cGU6IGh0bWwuU1BBQ0UsIHRleHQ6IHN0ci5zbGljZShpLCBpKzEpfSkKCgkJCX0gZWxzZSBpZiAoYmxvY2tbc3RyW2ldXSkgeyAvLyDliIbpmpTnrKYKCQkJCWlmIChzKSB7IGNvbnRpbnVlIH0KCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJcHVzaChzdHIuc2xpY2UoaSwgaSsxKSkKCgkJCX0gZWxzZSBpZiAocXVvdGVbc3RyW2ldXSkgeyAvLyDlvJXnlKjnrKYKCQkJCWlmIChzID09ICIiKSB7CgkJCQkJYmVnaW4gPiAtMSAmJiBwdXNoKHN0ci5zbGljZShiZWdpbiwgaSkpCgkJCQkJcyA9IHN0cltpXSwgYmVnaW4gPSBpKzEKCQkJCX0gZWxzZSBpZiAocyA9PSBzdHJbaV0pIHsKCQkJCQlwdXNoKHt0eXBlOiBsYW5nLlNUUklORywgdGV4dDogc3RyLnNsaWNlKGJlZ2luLCBpKSwgbGVmdDogcywgcmlnaHQ6IHN0cltpXX0pCgkJCQkJcyA9ICIiLCBiZWdpbiA9IC0xCgkJCQl9CgoJCQl9IGVsc2UgaWYgKHRyYW5zW3N0cltpXV0pIHsgLy8g6L2s5LmJ56ymCgkJCQliZWdpbiA9PSAtMSAmJiAoYmVnaW4gPSBpKyspCgoJCQl9IGVsc2UgeyAvLyDmma7pgJrnrKYKCQkJCWJlZ2luID09IC0xICYmIChiZWdpbiA9IGkpCgkJCX0KCQl9CgoJCS8vIOWJqeS9meWtl+espgoJCWJlZ2luID49IDAgJiYgKHM/IHB1c2goe3R5cGU6IGxhbmcuU1RSSU5HLCB0ZXh0OiBzdHIuc2xpY2UoYmVnaW4pLCBsZWZ0OiBzLCByaWdodDogIiJ9KTogcHVzaChzdHIuc2xpY2UoYmVnaW4pKSkKCQlyZXR1cm4gcmVzCgl9KSwKCUNhbGxGdW5jOiBzaHkoIuiwg+eUqOWZqCIsIGZ1bmN0aW9uKGZ1bmMsIGFyZ3MsIG1vZCkgeyBhcmdzID0gYXJnc3x8e30KCQl2YXIgZXZlbnQgPSBhcmdzWyJldmVudCJdfHx7fSwgY2FuID0gYXJnc1siY2FuIl18fGFyZ3NbMF0sIG1zZyA9IGFyZ3NbIm1zZyJdfHxhcmdzWzFdLCBjbWRzID0gYXJnc1siY21kcyJdfHxbXQoJCWV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoKCQkvLyDmn6Xmib7osIPnlKgKCQlmdW5jID0gdHlwZW9mIGZ1bmMgPT0gbGFuZy5GVU5DVElPTj8gZnVuYzogdHlwZW9mIGZ1bmMgPT0gbGFuZy5TVFJJTkc/IHRoaXMuVmFsdWUobW9kfHxjYW4sIGZ1bmMpOgoJCQl0eXBlb2YgZnVuYyA9PSBsYW5nLk9CSkVDVCAmJiBmdW5jLmxlbmd0aCA+IDA/IHRoaXMuVmFsdWUoZnVuY1swXSwgdGhpcy5LZXlzKGZ1bmMuc2xpY2UoMSkpKTogbnVsbAoJCWlmICh0eXBlb2YgZnVuYyAhPSBsYW5nLkZVTkNUSU9OKSB7IHJldHVybiB9CgoJCS8vIOino+aekOWPguaVsAoJCXZhciBsaXN0ID0gW10sIGVjaG8gPSBmYWxzZSwgY2IgPSBhcmdzWyJjYiJdCgkJdGhpcy5MaXN0KGZ1bmMudG9TdHJpbmcoKS5zcGxpdCgiKSIpWzBdLnNwbGl0KCIoIilbMV0uc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaXRlbSA9IGl0ZW0udHJpbSgpOyBpZiAoaXRlbSA9PSAiIikgeyByZXR1cm4gfQoJCQl2YXIgYXJnID0gYXJnc1tpdGVtXSB8fCBtc2cmJm1zZy5PcHRpb24mJm1zZy5PcHRpb24oaXRlbSkgfHwgY2FuJiZjYW4uQ29uZiYmY2FuLkNvbmYoaXRlbSkgfHwKCQkJCWV2ZW50JiYhKGV2ZW50IGluc3RhbmNlb2YgRXZlbnQpJiZldmVudFtpdGVtXSB8fCBhcmdzW2luZGV4XSB8fCBjbWRzW2luZGV4XSB8fCBudWxsCgkJCWlmIChpdGVtID09ICJjYiIpIHsgZWNobyA9IHRydWUgfQoJCQlsaXN0LnB1c2goYXJnKQoJCX0pCgoJCS8vIOaJp+ihjOiwg+eUqAoJCXZhciByZXMgPSBmdW5jLmFwcGx5KG1vZHx8Y2FuLCBsaXN0KQoJCWlmICghZWNobyAmJiB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTikgeyByZXMgJiYgbXNnICYmIG1zZy5FY2hvKHJlcyksIGFyZ3VtZW50cy5jYWxsZWUuYXBwbHkodGhpcywgW2NiLCB7bXNnOiBtc2csIHJlczogcmVzfV0pIH0KCQlyZXR1cm4gcmVzCgl9KSwKCglMaXN0OiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKGxpc3QsIGNiLCBpbnRlcnZhbCwgY2JzKSB7CgkJaWYgKHR5cGVvZiBsaXN0ID09IGxhbmcuU1RSSU5HKSB7IC8vIOm7mOiupOW6j+WIlwoJCQlsaXN0ID0gW2xpc3RdCgkJfSBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PSBsYW5nLk5VTUJFUikgeyAvLyDnrYnlt67luo/liJcgW2VuZCBjYiBpbnRlcnZhbF18W2JlZ2luIGVuZCBpbnRlcnZhbF0KCQkJdmFyIGJlZ2luID0gMCwgZW5kID0gbGlzdCwgc3RlcCA9IHR5cGVvZiBpbnRlcnZhbCA9PSBsYW5nLk5VTUJFUj8gaW50ZXJ2YWw6IDEKCQkJaWYgKHR5cGVvZiBjYiA9PSBsYW5nLk5VTUJFUikgeyBiZWdpbiA9IGxpc3QsIGVuZCA9IGNiLCBjYiA9IG51bGwgfQoJCQlsaXN0ID0gW107IGZvciAodmFyIGkgPSBiZWdpbjsgaSA8IGVuZDsgaSArPSBzdGVwKSB7IGxpc3QucHVzaChpKSB9CgkJfQoKCQlsaXN0ID0gbGlzdHx8W10KCQlpZiAoaW50ZXJ2YWwgPiAwKSB7IC8vIOaXtumXtOW6j+WIlwoJCQlmdW5jdGlvbiBsb29wKGkpIHsgaWYgKGkgPj0gbGlzdC5sZW5ndGgpIHsgcmV0dXJuIHR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnMobGlzdCkgfQoJCQkJY2IobGlzdFtpXSwgaSwgbGlzdCksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoaSsxKSB9LCBpbnRlcnZhbCkKCQkJfQoJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBsaXN0Lmxlbmd0aCA+IDAgJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcCgwKSB9LCBpbnRlcnZhbC80KQoJCX0gZWxzZSB7IC8vIOmAieaLqeW6j+WIlwoJCQl2YXIgc2xpY2UgPSBbXSwgcmVzCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IChyZXMgPSBjYihsaXN0W2ldLCBpLCBsaXN0KSkgIT0gdW5kZWZpbmVkICYmIHNsaWNlLnB1c2gocmVzKTogc2xpY2UucHVzaChsaXN0W2ldKQoJCQl9OyBsaXN0ID0gc2xpY2UKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJTmV4dDogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihsaXN0LCBjYiwgY2JzKSB7CgkJc3dpdGNoICh0eXBlb2YgbGlzdCkgewoJCQljYXNlIGxhbmcuT0JKRUNUOiBpZiAobGlzdCA9PSBudWxsKSB7IGxpc3QgPSBbXTsgYnJlYWsgfQoJCQkJaWYgKGxpc3QubGVuZ3RoID09IHVuZGVmaW5lZCkgeyB2YXIgbHMgPSBbXTsgZm9yICh2YXIgayBpbiBsaXN0KSB7IGxzLnB1c2goaykgfSBsaXN0ID0gbHMgfSBicmVhawoJCQlkZWZhdWx0OiBpZiAobGlzdCA9PSB1bmRlZmluZWQpIHsgbGlzdCA9IFtdOyBicmVhayB9CgkJCQlsaXN0ID0gW2xpc3RdCgkJfQoKCQlmdW5jdGlvbiBuZXh0KGkpIHsgaSA8IGxpc3QubGVuZ3RoPyAgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IobGlzdFtpXSwgZnVuY3Rpb24oKSB7IG5leHQoaSsxKSB9LCBpLCBsaXN0KToKCQkJCXR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnMobGlzdCkgfQoJCXJldHVybiBuZXh0KDApLCBsaXN0Cgl9KSwKCUl0ZW1zOiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwgY2IpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGsgaW4gb2JqKSB7CgkJCWxpc3QgPSBsaXN0LmNvbmNhdCh0aGlzLkxpc3Qob2JqW2tdLCBmdW5jdGlvbih2LCBpKSB7CgkJCQlyZXR1cm4gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IodiwgaSwgaywgb2JqKQoJCQl9KSkKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJSXRlbVNvcnQ6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24ob2JqLCBrZXksIGNiKSB7IHZhciBsaXN0ID0gW10KCQl2YXIgb3JkZXIgPSBbXSwga2V5cyA9IHt9LCB2YWxzID0ge30sIGkgPSAwCgkJZm9yICh2YXIgayBpbiBvYmopIHsgbyA9IG9ialtrXVtrZXldfHxpKysKCQkJb3JkZXIucHVzaChvKSwga2V5c1tvXSA9IGssIHZhbHNbb10gPSBvYmpba10KCQl9OyBvcmRlci5zb3J0KCkKCgkJZm9yICh2YXIgaSBpbiBvcmRlcikgeyB2YXIgayA9IG9yZGVyW2ldCgkJCXZhciByZXMgPSB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTj8gY2Ioa2V5c1trXSwgdmFsc1trXSk6IGsKCQkJcmVzICE9IHVuZGVmaW5lZCAmJiBsaXN0LnB1c2gocmVzKQoJCX0KCQlyZXR1cm4gbGlzdAoJfSksCglJdGVtOiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwgY2IpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGsgaW4gb2JqKSB7CgkJCXZhciByZXMgPSB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTj8gY2Ioaywgb2JqW2tdKTogawoJCQlyZXMgIT0gdW5kZWZpbmVkICYmIGxpc3QucHVzaChyZXMpCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCUl0ZW1DQjogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihtZXRhLCBjYiwgY2FuLCBpdGVtKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG1ldGEpIHsgKGZ1bmN0aW9uKGspIHsKCQkJaWYgKGsuaW5kZXhPZigib24iKSA9PSAwICYmIHR5cGVvZiBtZXRhW2tdID09IGxhbmcuRlVOQ1RJT04pIHsKCQkJCWlmICh0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTikgewoJCQkJCWNiKGssIG1ldGFba10pCgkJCQl9IGVsc2UgewoJCQkJCWNiW2tdID0gZnVuY3Rpb24oZXZlbnQpIHsgbWV0YVtrXShldmVudCwgY2FuLCBpdGVtKSB9CgkJCQl9CgkJCQlsaXN0LnB1c2goaykKCQkJfQoJCX0pKGspIH0KCQlyZXR1cm4gbGlzdAoJfSksCgoJU3BsaXRJbnB1dDogZnVuY3Rpb24oaXRlbSwgdHlwZSkgeyBpZiAodHlwZW9mIGl0ZW0gPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIGl0ZW0gfQoJCXR5cGUgPSB0eXBlfHxodG1sLlRFWFQ7IHN3aXRjaCAoaXRlbSkgewoJCQljYXNlIG1kYi5MSVNUOiByZXR1cm4ge3R5cGU6IHR5cGUgPSBodG1sLkJVVFRPTiwgbmFtZTogaXRlbSwgYWN0aW9uOiBpY2UuQVVUT30KCQkJY2FzZSBjbGkuQkFDSzogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5CVVRUT04sIG5hbWU6IGl0ZW19CgkJCWNhc2UgbWRiLk5BTUU6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuVEVYVCwgbmFtZTogaXRlbX0KCQkJY2FzZSBtZGIuVEVYVDogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5URVhUQVJFQSwgbmFtZTogaXRlbX0KCQkJZGVmYXVsdDogdmFyIGxzID0gdGhpcy5TcGxpdChpdGVtLCAiICIsICI6PUAiKSwgcmVzID0ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfTsgZm9yICh2YXIgaSA9IDE7IGkgPCBscy5sZW5ndGg7IGkgKz0gMikgewoJCQkJCXN3aXRjaCAobHNbaV0pIHsKCQkJCQkJY2FzZSAiOiI6IHJlc1ttZGIuVFlQRV0gPSBsc1tpKzFdOyBicmVhawoJCQkJCQljYXNlICI9IjoKCQkJCQkJCWlmIChyZXNbbWRiLlRZUEVdID09IGh0bWwuU0VMRUNUKSB7CgkJCQkJCQkJcmVzLnZhbHVlcyA9IHRoaXMuU3BsaXQobHNbaSsxXSkKCQkJCQkJCQlmb3IgKHZhciBqID0gMTsgaiA8IHJlcy52YWx1ZXMubGVuZ3RoOyBqKyspIHsKCQkJCQkJCQkJaWYgKHJlcy52YWx1ZXNbMF0gPT0gIiIgfHwgcmVzLnZhbHVlc1swXSA9PSByZXMudmFsdWVzW2pdKSB7CgkJCQkJCQkJCQlyZXMudmFsdWUgPSByZXMudmFsdWVzWzBdLCByZXMudmFsdWVzID0gcmVzLnZhbHVlcy5zbGljZSgxKQoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmVzLnZhbHVlID0gbHNbaSsxXQoJCQkJCQkJfQoJCQkJCQkJYnJlYWsKCQkJCQkJY2FzZSAiQCI6IHJlc1tjdHguQUNUSU9OXSA9IGxzW2krMV07IGJyZWFrCgkJCQkJfQoJCQkJfSByZXR1cm4gcmVzCgkJfQoJfSwKCVRpbWVyMzAwbXM6IGZ1bmN0aW9uKGNiKSB7IHRoaXMuVGltZXIoMzAwLCBjYikgfSwKCVRpbWVyMzAwOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMCwgY2IpIH0sCglUaW1lcjNzOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMDAsIGNiKSB9LAoJVGltZXI6IHNoeSgi5a6a5pe25ZmoLCB2YWx1ZSwgWzEsMiwzLDRdLCB7aW50ZXJ2YWwsIGxlbmd0aH0iLCBmdW5jdGlvbihpbnRlcnZhbCwgY2IsIGNicykgewoJCXZhciB0aW1lciA9IHtzdG9wOiBmYWxzZX07IGZ1bmN0aW9uIGxvb3AoaSkgewoJCQl0aW1lci5zdG9wIHx8IGkgPj0gaW50ZXJ2YWwubGVuZ3RoICYmIGludGVydmFsLmxlbmd0aCA+PSAwIHx8IGNiKHRpbWVyLCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbaV0sIGksIGludGVydmFsKT8KCQkJCXR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnModGltZXIsIGludGVydmFsKTogc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcChpKzEpIH0sIGludGVydmFsLmludGVydmFsfHxpbnRlcnZhbFtpKzFdKQoJCX0KCgkJaW50ZXJ2YWwgPSB0eXBlb2YgaW50ZXJ2YWwgPT0gbGFuZy5PQkpFQ1Q/IGludGVydmFsOiBbaW50ZXJ2YWxdCgkJaWYgKGludGVydmFsLmludGVydmFsID09IDApIHsgY2IoKTsgcmV0dXJuIHRpbWVyIH0KCgkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcCgwKSB9LCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbMF0pCgkJcmV0dXJuIHRpbWVyCgl9KSwKfSkK",
        "usr/volcanos/lib/misc.js": "Vm9sY2Fub3MoIm1pc2MiLCB7aGVscDogIumAmuS/oeWNj+iuriIsIE1lc3NhZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1zZyA9IHt9IAoJCXZhciBwcm90byA9IHtfZXZlbnQ6IGV2ZW50LCBfY2FuOiBjYW4sCgkJCVJ1bkFjdGlvbjogZnVuY3Rpb24oZXZlbnQsIHN1YiwgY21kcywgbWV0YSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtZXRhID0gbWV0YSB8fCBzdWImJnN1Yi5vbmFjdGlvbiB8fCB7fQoJCQkJaWYgKG1zZy5PcHRpb24oaWNlLk1TR19IQU5ETEUpID09IGljZS5UUlVFKSB7IHJldHVybiB9CgkJCQlpZiAoY21kcyAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgY2FuLmJhc2UuaXNGdW5jKG1ldGFbY21kc1sxXV0pKSB7IGV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoJCQkJCXJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSksIGNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbY21kc1sxXV0sIHtldmVudDogZXZlbnQsIGNhbjogc3ViLCBtc2c6IG1zZywgYnV0dG9uOiBjbWRzWzFdLCBjbWQ6IGNtZHNbMV19KSwgdHJ1ZQoJCQkJfQoJCQkJcmV0dXJuIGZhbHNlCgkJCX0sCgkJCURpc3BsYXk6IGZ1bmN0aW9uKGZpbGUpIHsgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVksIGZpbGUpIH0sCgkJCURpc3BsYXlTdG9yeTogZnVuY3Rpb24oZmlsZSkgeyBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSwgIi9wbHVnaW4vc3RvcnkvIitmaWxlKSB9LAoJCQlPcHRpb25TdGF0dXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykgfSwKCQkJT3B0aW9uUHJvY2VzczogZnVuY3Rpb24oKSB7IHJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfUFJPQ0VTUykgfSwKCQkJT3B0aW9uT3JTZWFyY2g6IGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwga2V5KXx8bXNnLk9wdGlvbihrZXkpIH0sCgkJCU9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWwpIHsKCQkJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnLm9wdGlvbiB8fCBbXSB9CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBjYW4uY29yZS5JdGVtKGtleSwgbXNnLk9wdGlvbikgfQoJCQkJaWYgKHZhbCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2dba2V5XSAmJiBtc2dba2V5XVswXSB8fCAiIiB9CgkJCQlyZXR1cm4gbXNnLm9wdGlvbiA9IGNhbi5iYXNlLkFkZFVuaXEobXNnLm9wdGlvbiwga2V5KSwgbXNnW2tleV0gPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMSksIHZhbAoJCQl9LAoJCQlBcHBlbmQ6IGZ1bmN0aW9uKGtleSwgdmFsKSB7CgkJCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZy5hcHBlbmQgfHwgW10gfQoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgY2FuLmNvcmUuSXRlbShrZXksIG1zZy5BcHBlbmQpIH0KCQkJCWlmICh2YWwgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnW2tleV0gJiYgbXNnW2tleV1bMF0gfHwgIiIgfQoJCQkJcmV0dXJuIG1zZy5hcHBlbmQgPSBjYW4uYmFzZS5BZGRVbmlxKG1zZy5hcHBlbmQsIGtleSksIG1zZ1trZXldID0gY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDEpLCB2YWwKCQkJfSwKCQkJUmVzdWx0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1zZy5yZXN1bHQgJiYgbXNnLnJlc3VsdC5qb2luKCIiKSB8fCAiIiB9LAoKCQkJTGVuZ3RoOiBmdW5jdGlvbigpIHsKCQkJCXZhciBtYXggPSAiIiwgbGVuID0gMDsgY2FuLmNvcmUuTGlzdChtc2cuYXBwZW5kLCBmdW5jdGlvbihrZXksIGluZGV4KSB7CgkJCQkJaWYgKG1zZ1trZXldICYmIG1zZ1trZXldLmxlbmd0aCA+IGxlbikgeyBtYXggPSBrZXksIGxlbiA9IG1zZ1trZXldLmxlbmd0aCB9CgkJCQl9KQoJCQkJcmV0dXJuIGxlbgoJCQl9LAoJCQlUYWJsZTogZnVuY3Rpb24oY2IpIHsKCQkJCXJldHVybiBjYW4uY29yZS5MaXN0KG1zZy5MZW5ndGgoKSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBhcnJheSkgeyB2YXIgb25lID0ge30sIHJlcwoJCQkJCWNhbi5jb3JlLkxpc3QobXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5KSB7IG9uZVtrZXldID0gKG1zZ1trZXldJiZtc2dba2V5XVtpbmRleF18fCIiKSB9KQoJCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIChyZXMgPSBjYihvbmUsIGluZGV4LCBhcnJheSkpICYmIHJlcyAhPSB1bmRlZmluZWQgJiYgcmVzIHx8IG9uZQoJCQkJfSkKCQkJfSwKCQkJQ2xlYXI6IGZ1bmN0aW9uKGtleSkgeyBzd2l0Y2ggKGtleXx8aWNlLk1TR19BUFBFTkQpIHsKCQkJCWNhc2UgaWNlLk1TR19BUFBFTkQ6CgkJCQljYXNlIGljZS5NU0dfT1BUSU9OOgoJCQkJCWNhbi5jb3JlLkxpc3QobXNnW2tleV0sIGZ1bmN0aW9uKGl0ZW0pIHsgZGVsZXRlKG1zZ1tpdGVtXSkgfSkKCQkJCWRlZmF1bHQ6IG1zZ1trZXldID0gW10KCQkJfSB9LAoJCQlDb3B5OiBmdW5jdGlvbihyZXMpIHsgaWYgKCFyZXMpIHsgcmV0dXJuIG1zZyB9CgkJCQlyZXMucmVzdWx0ICYmIChtc2cucmVzdWx0ID0gKG1zZy5yZXN1bHR8fFtdKS5jb25jYXQocmVzLnJlc3VsdCkpCgkJCQlyZXMuYXBwZW5kICYmIChtc2cuYXBwZW5kID0gcmVzLmFwcGVuZCkgJiYgcmVzLmFwcGVuZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQl2YXIgaSA9IG1zZy5vcHRpb24gJiYgbXNnLm9wdGlvbi5pbmRleE9mKGl0ZW0pOyBpZiAoaSA+IC0xKSB7CgkJCQkJCW1zZy5vcHRpb25baV0gPSAiIiwgZGVsZXRlKG1zZ1tpdGVtXSkKCQkJCQl9CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSAobXNnW2l0ZW1dfHxbXSkuY29uY2F0KHJlc1tpdGVtXSkpCgkJCQl9KQoJCQkJcmVzLm9wdGlvbiAmJiAobXNnLm9wdGlvbiA9IHJlcy5vcHRpb24pICYmIHJlcy5vcHRpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSByZXNbaXRlbV0pCgkJCQl9KQoJCQkJcmVzLl9vcHRpb24gJiYgKG1zZy5fb3B0aW9uID0gcmVzLl9vcHRpb24pICYmIHJlcy5fb3B0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCXJlc1tpdGVtXSAmJiAobXNnW2l0ZW1dID0gcmVzW2l0ZW1dKQoJCQkJfSkKCQkJCXJldHVybiBtc2cKCQkJfSwKCQkJUHVzaDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgZGV0YWlsKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgewoJCQkJCXZhbHVlID0gdmFsdWV8fGNhbi5jb3JlLkl0ZW0oa2V5KSwgY2FuLmNvcmUuTGlzdCh2YWx1ZSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQlkZXRhaWw/IG1zZy5QdXNoKG1kYi5LRVksIGl0ZW0pLlB1c2gobWRiLlZBTFVFLCBrZXlbaXRlbV18fCIiKTogbXNnLlB1c2goaXRlbSwga2V5W2l0ZW1dfHwiIikKCQkJCQl9KQoJCQkJCXJldHVybiBtc2cKCQkJCX0KCgkJCQltc2cuYXBwZW5kID0gY2FuLmJhc2UuQWRkVW5pcShtc2cuYXBwZW5kLCBrZXkpLCBtc2dba2V5XSA9IG1zZ1trZXldIHx8IFtdCgkJCQltc2dba2V5XS5wdXNoKGNhbi5iYXNlLmlzU3RyaW5nKHZhbHVlKXx8Y2FuLmJhc2UuaXNGdW5jdGlvbih2YWx1ZSk/IHZhbHVlOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpCgkJCQlyZXR1cm4gbXNnCgkJCX0sCgkJCVN0YXR1czogZnVuY3Rpb24ob2JqKSB7IG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMsIEpTT04uc3RyaW5naWZ5KGNhbi5jb3JlLkl0ZW0ob2JqLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiB7bmFtZToga2V5LCB2YWx1ZTogdmFsdWV9IH0pKSkgfSwKCQkJU3RhdHVzVGltZUNvdW50OiBmdW5jdGlvbihvYmopIHsgbXNnLmFwcGVuZCAmJiBtc2cuU3RhdHVzKGNhbi5iYXNlLkNvcHkoeyJ0aW1lIjogY2FuLmJhc2UuVGltZSgpLCAiY291bnQiOiBtc2cuTGVuZ3RoKCkrIngiK21zZy5hcHBlbmQubGVuZ3RofSwgb2JqKSkgfSwKCQkJRWNobzogZnVuY3Rpb24ocmVzKSB7IG1zZy5yZXN1bHQgPSBtc2cucmVzdWx0IHx8IFtdCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyBtc2cucmVzdWx0LnB1c2goYXJndW1lbnRzW2ldKSB9CgkJCQlyZXR1cm4gbXNnLl9oYW5kID0gdHJ1ZSwgbXNnCgkJCX0sCgkJCUR1bXA6IGZ1bmN0aW9uKGNhbikgewoJCQkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbikKCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQkJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQkJfSwKCQl9CgkJcmV0dXJuIGNhbi5taXNjLnByb3RvKG1zZywgcHJvdG8pCgl9LAoJR0VUOiBmdW5jdGlvbihjYW4sIHVybCwgY2IpIHsgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpCgkJeGhyLm9wZW4oIkdFVCIsIHVybCksIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7CgkJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih4aHIucmVzcG9uc2VUZXh0KQoJCQl9CgkJfQoJCXRyeSB7IHhoci5zZW5kKCkgfSBjYXRjaChlKSB7IGNhbi5taXNjLkxvZyhlKSB9Cgl9LAoJUE9TVDogZnVuY3Rpb24oY2FuLCBtc2csIHVybCwgZm9ybSwgY2IpIHsgLy8gX21ldGhvZCBfYWNjZXB0IF91cGxvYWQgX3Byb2dyZXNzCgkJdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyBtc2cuX3hociA9IHhocgoJCXhoci5vcGVuKG1zZy5fbWV0aG9kfHwiUE9TVCIsIHVybCksIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJaWYgKHhoci5yZWFkeVN0YXRlICE9IDQpIHsgcmV0dXJuIH0KCgkJCXRyeSB7IC8vIOino+aekOWTjeW6lAoJCQkJdmFyIHJlcyA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkKCQkJfSBjYXRjaCAoZSkgewoJCQkJdmFyIHJlcyA9IHtyZXN1bHQ6IFt4aHIucmVzcG9uc2VUZXh0XX0KCQkJfQoJCQlpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHsKCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZy5Db3B5KHJlcykpCgkJCX0KCQkJY2FuLnVzZXIudG9hc3QoY2FuLCByZXMsIHhoci5zdGF0dXMpCgkJfQoKCQlpZiAobXNnLl91cGxvYWQpIHsgLy8g5LiK5Lyg5paH5Lu2CgkJCXZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7IGNhbi5jb3JlLkl0ZW1zKGZvcm0sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwga2V5KSB7CgkJCQlkYXRhLmFwcGVuZChrZXksIHZhbHVlKQoJCQl9KSwgZGF0YS5hcHBlbmQoaHRtbC5VUExPQUQsIG1zZy5fdXBsb2FkKSwgZGF0YS5hcHBlbmQoaWNlLk1TR19VUExPQUQsIG1kYi5VUExPQUQpCgoJCQl4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmJhc2UuaXNGdW5jKG1zZy5fcHJvZ3Jlc3MpICYmIG1zZy5fcHJvZ3Jlc3MoZXZlbnQsIHBhcnNlSW50KGV2ZW50LmxvYWRlZCoxMDAvZXZlbnQudG90YWwpLCBldmVudC50b3RhbCwgZXZlbnQubG9hZGVkKQoJCQl9CgkJfSBlbHNlIHsgLy8g6K+35rGC5pWw5o2uCgkJCXZhciBkYXRhID0gY2FuLmNvcmUuSXRlbXMoZm9ybSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBrZXkpIHsgcmV0dXJuIGtleSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB9KS5qb2luKCImIikKCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKQoJCX0KCgkJLy8g5Y+R6YCB6K+35rGCCgkJeGhyLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsIG1zZy5fYWNjZXB0fHwiYXBwbGljYXRpb24vanNvbiIpCgkJdHJ5IHsgeGhyLnNlbmQoZGF0YSkgfSBjYXRjaChlKSB7IGNhbi5taXNjLkxvZyhlKSB9Cgl9LAoJUnVuOiBmdW5jdGlvbihldmVudCwgY2FuLCBkYXRhc2V0LCBjbWRzLCBjYikgewoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudHx8e30pLCBza2lwID0ge19oYW5kbGU6IHRydWV9CgkJdmFyIGZvcm0gPSB7Y21kczogY21kc3x8bXNnLmNtZH07IG1zZy5vcHRpb24gJiYgbXNnLm9wdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKHR5cGVvZiBtc2cuT3B0aW9uKGl0ZW0pID09IGxhbmcuT0JKRUNUKSB7IHJldHVybiB9CgkJCWlmICh0eXBlb2YgbXNnLk9wdGlvbihpdGVtKSA9PSBsYW5nLkZVTkNUSU9OKSB7IHJldHVybiB9CgkJCSFza2lwW2l0ZW1dICYmIG1zZ1tpdGVtXSAmJiAoZm9ybVtpdGVtXSA9IG1zZ1tpdGVtXSkKCQl9KQoKCQljYW4ubWlzYy5QT1NUKGNhbiwgbXNnLCBjYW4uYmFzZS5NZXJnZVVSTChkYXRhc2V0Lm5hbWVzLnRvTG93ZXJDYXNlKCksCgkJCSJfbmFtZSIsIChtc2cuX2Nhbi5zdXB8fG1zZy5fY2FuKS5fbmFtZSwgIl9pbmRleCIsIChtc2cuX2Nhbi5zdXB8fG1zZy5fY2FuKS5faW5kZXgsCgkJCWljZS5NU0dfREFFTU9OLCBtc2cuX19kYWVtb258fGRhdGFzZXQuZGFlbW9ufHwiIgoJCSksIGZvcm0sIGNiKQoJfSwKCVdTUzogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYiwgb25vcGVuLCBvbmNsb3NlLCBvbmVycm9yKSB7IGlmIChjYW4udXNlci5pc0lFKSB7IHJldHVybiB9CgkJdmFyIHVybCA9IGxvY2F0aW9uLnByb3RvY29sLnJlcGxhY2UoImh0dHAiLCAid3MiKSsiLy8iK2xvY2F0aW9uLmhvc3QrIi9zcGFjZS8iCgkJaWYgKHVybC5pbmRleE9mKCJjaHJvbWUiKSA9PSAwKSB7IHVybCA9ICJ3czovL2xvY2FsaG9zdDo5MDIwL3NwYWNlLyIgfQoKCQl2YXIgc29ja2V0ID0gbmV3IFdlYlNvY2tldChjYW4uYmFzZS5NZXJnZVVSTCh1cmwsIGFyZ3MpKQoJCXNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZyhodG1sLldTUywgY2xpLkNMT1NFLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25jbG9zZSk/IG9uY2xvc2Uoc29ja2V0KTogY2FuLmNvcmUuVGltZXIoY2FuLmJhc2UucmFuZG9tKDMwMDAsIDEwMDApLCBmdW5jdGlvbigpIHsKCQkJCWFyZ3MubmFtZSA9IGFyZ3MubmFtZXx8Y2FuLl93c3NfbmFtZQoJCQkJY2FuLm1pc2MuV1NTKGNhbiwgYXJncywgY2IsIG9ub3Blbiwgb25lcnJvciwgb25jbG9zZSkKCQkJfSkKCQl9LCBzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGNsaS5FUlJPUiwgYXJncykKCQkJY2FuLmJhc2UuaXNGdW5jKG9uZXJyb3IpPyBvbmVycm9yKHNvY2tldCk6IHNvY2tldC5jbG9zZSgpCgoJCX0sIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBjbGkuT1BFTiwgYXJncykKCQkJY2FuLmJhc2UuaXNGdW5jKG9ub3BlbikgJiYgb25vcGVuKHNvY2tldCkKCQl9CgoJCXNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyAvLyDop6PmnpDlkb3ku6QKCQkJdHJ5IHsgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpIH0gY2F0Y2ggKGUpIHsgdmFyIGRhdGEgPSB7ZGV0YWlsOiBbZXZlbnQuZGF0YV19IH0KCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1zZy5SZXBseSA9IGZ1bmN0aW9uKCkgeyAvLyDlm57lpI3lkb3ku6QKCQkJCW1zZy5PcHRpb24oe19oYW5kbGU6IHRydWUsIF9zb3VyY2U6IChtc2dbaWNlLk1TR19UQVJHRVRdfHxbXSkucmV2ZXJzZSgpLnNsaWNlKDEpLmpvaW4oaWNlLlBUKXx8IiIsIF90YXJnZXQ6IChtc2dbaWNlLk1TR19TT1VSQ0VdfHxbXSkucmV2ZXJzZSgpLmpvaW4oaWNlLlBUKX0pCgkJCQltc2cucmVzdWx0ID0gKG1zZy5yZXN1bHR8fFtdKS5jb25jYXQoY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpKSwgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBpY2UuTVNHX1JFU1VMVCwgbXNnLnJlc3VsdCwgbXNnKQoJCQkJZGVsZXRlKG1zZy5fZXZlbnQpLCBkZWxldGUobXNnLl9jYW4pLCBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKQoJCQl9LCBtc2cuZGV0YWlsID0gZGF0YS5kZXRhaWwsIG1zZy5Db3B5KGRhdGEpCgoJCQl0cnkgeyAvLyDmiafooYzlkb3ku6QKCQkJCWNhbi5taXNjLkxvZyhodG1sLldTUywgaWNlLk1TR19ERVRBSUwsIG1zZy5kZXRhaWwsIG1zZykKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIG1zZywgbXNnLmRldGFpbFswXSwgbXNnLmRldGFpbC5zbGljZSgxKSkKCQkJfSBjYXRjaCAoZSkgeyBjYW4ubWlzYy5Mb2coZSksIG1zZy5SZXBseSgpIH0KCQl9Cgl9LAoKCUNvb2tpZVNlc3NpZDogc2h5KCLkvJror53lj5jph48iLCBmdW5jdGlvbihjYW4sIHZhbHVlLCBwYXRoKSB7CgkJcmV0dXJuIGNhbi5taXNjLkNvb2tpZShjYW4sIGljZS5NU0dfU0VTU0lEKyJfIitjYW4uYmFzZS5yZXBsYWNlQWxsKGxvY2F0aW9uLmhvc3QsIGljZS5QVCwgIl8iLCBpY2UuREYsICJfIiksIHZhbHVlLCBwYXRoKQoJfSksCglDb29raWU6IHNoeSgi5Lya6K+d5Y+Y6YePIiwgZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlLCBwYXRoKSB7CgkJZnVuY3Rpb24gc2V0KGssIHYpIHsgZG9jdW1lbnQuY29va2llID0gaysiPSIrdisiO3BhdGg9IisocGF0aHx8aWNlLlBTKSB9CgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgZm9yICh2YXIgayBpbiBrZXkpIHsgc2V0KGssIGtleVtrXSkgfSBrZXkgPSB1bmRlZmluZWQgfQoKCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyB2YXIgY3MgPSB7fQoJCQlkb2N1bWVudC5jb29raWUuc3BsaXQoIjsgIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IHZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgY3NbbHNbMF1dID0gbHNbMV0gfSkKCQkJcmV0dXJuIGNzCgkJfQoKCQl2YWx1ZSAhPSB1bmRlZmluZWQgJiYgc2V0KGtleSwgdmFsdWUpCgkJdmFyIHZhbCA9IChuZXcgUmVnRXhwKGtleSsiPShbXjtdKik7PyIpKS5leGVjKGRvY3VtZW50LmNvb2tpZSkKCQlyZXR1cm4gdmFsICYmIHZhbC5sZW5ndGggPiAwPyB2YWxbMV06ICIiCgl9KSwKCVNlYXJjaE9yQ29uZjogZnVuY3Rpb24oY2FuLCBrZXksIGRlZikgeyByZXR1cm4gY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLm1pc2MuU2VhcmNoKGNhbiwga2V5KSwgY2FuLkNvbmYoa2V5KSwgZGVmKSB9LAoJU2VhcmNoSGFzaDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4uX2luZGV4ID09IGNhbi5taXNjLlNlYXJjaChjYW4sICJjbWQiKSkgewoJCQlyZXR1cm4gbG9jYXRpb24uaGFzaC5zbGljZSgxKQoJCX0KCX0sCglTZWFyY2g6IHNoeSgi6K+35rGC5Y+C5pWwIiwgZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IHZhciBhcmdzID0ge30KCQlpZiAodmFsdWUgPT0gdW5kZWZpbmVkICYmIGNhbi5iYXNlLmlzU3RyaW5nKGtleSkpIHsKCQkJdmFyIGxzID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoaWNlLlBTKTsgaWYgKGxzWzFdID09IGNoYXQuU0hBUkUpIHsgYXJnc1tjaGF0LlNIQVJFXSA9IGxzWzJdIH0KCQkJZm9yICh2YXIgaSA9IDI7IGkgPCBscy5sZW5ndGg7IGkgKz0gMikgeyBpZiAoeyJwb2QiOiB0cnVlLCAiY21kIjogdHJ1ZX1bbHNbaV1dKSB7IGFyZ3NbbHNbaV1dID0gbHNbaSsxXSB9IH0KCQl9CgkJbG9jYXRpb24uc2VhcmNoICYmIGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyB2YXIgeCA9IGl0ZW0uc3BsaXQoIj0iKQoJCQl4WzFdICE9ICIiICYmIChhcmdzW3hbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHhbMV0pKQoJCX0pCgoJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7CgkJCWNhbi5jb3JlLkl0ZW0oa2V5LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7IGFyZ3Nba2V5XSA9IHZhbHVlIH0gYXJnc1trZXldID09ICIiICYmIGRlbGV0ZShhcmdzW2tleV0pCgkJCX0pCgkJfSBlbHNlIHsKCQkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGFyZ3MgfQoJCQlpZiAodmFsdWUgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBhcmdzW2tleV0gfQoJCQlhcmdzW2tleV0gPSB2YWx1ZSwgYXJnc1trZXldID09ICIiICYmIGRlbGV0ZShhcmdzW2tleV0pCgkJfQoKCQl2YXIgc2VhcmNoID0gY2FuLmNvcmUuSXRlbShhcmdzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBrZXkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgfSkuam9pbigiJiIpCgkJcmV0dXJuIHNlYXJjaD8gbG9jYXRpb24uc2VhcmNoID0gc2VhcmNoOiBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24ucGF0aG5hbWUKCX0pLAoJTWVyZ2VVUkw6IHNoeSgi5Zyw5Z2A6ZO+5o6lIiwgZnVuY3Rpb24oY2FuLCBvYmpzLCBjbGVhcikgewoJCXZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7IG9ianMuX3BhdGggJiYgKHBhdGggPSBvYmpzLl9wYXRoKSwgZGVsZXRlKG9ianMuX3BhdGgpCgkJb2Jqcy5wb2QgJiYgKHBhdGggPSAiL2NoYXQvcG9kLyIrb2Jqcy5wb2QpLCBkZWxldGUob2Jqcy5wb2QpCgkJb2Jqcy5jbWQgJiYgKHBhdGggPSAocGF0aC5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMD8gcGF0aDogIi9jaGF0IikrIi9jbWQvIitvYmpzLmNtZCksIGRlbGV0ZShvYmpzLmNtZCkKCQlvYmpzLndlYnNpdGUgJiYgKHBhdGggPSAocGF0aC5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMD8gcGF0aDogIi9jaGF0IikrIi93ZWJzaXRlLyIrb2Jqcy53ZWJzaXRlKSwgZGVsZXRlKG9ianMud2Vic2l0ZSkKCQlyZXR1cm4gY2FuLmJhc2UuTWVyZ2VVUkwobG9jYXRpb24ub3JpZ2luK3BhdGgrKGNsZWFyPyIiOmxvY2F0aW9uLnNlYXJjaCksIG9ianMpCgl9KSwKCglydW5BY3Rpb246IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwgbGlzdCkgewoJCWlmIChjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgbGlzdFtjbWRzWzFdXSkgeyByZXR1cm4gbGlzdFtjbWRzWzFdXShjbWRzLnNsaWNlKDIpKSwgdHJ1ZSB9CgkJaWYgKGxpc3RbY21kc1swXV0pIHsgcmV0dXJuIGxpc3RbY21kc1swXV0oY21kcy5zbGljZSgxKSksIHRydWUgfQoJfSwKCWNvbmNhdDogZnVuY3Rpb24oY2FuLCB0bywgZnJvbSkgeyB0byA9IHRvfHxbXSwgZnJvbSA9IGZyb218fFtdCgkJaWYgKGZyb21bMF0gPT0gY3R4LkFDVElPTiAmJiBmcm9tWzFdID09IGljZS5SVU4gJiYgY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2Zyb21bMl1dKSB7IHJldHVybiBmcm9tIH0KCQlpZiAoY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2Zyb21bMF1dKSB7IHJldHVybiBmcm9tIH0KCQlpZiAoZnJvbVswXSA9PSAiX3NlYXJjaCIpIHsgcmV0dXJuIGZyb20gfQoJCXJldHVybiB0by5jb25jYXQoZnJvbSkKCX0sCglwcm90bzogZnVuY3Rpb24oc3ViLCBzdXApIHsgcmV0dXJuIHN1Yi5fX3Byb3RvX18gPSBzdXAsIHN1YiB9LAoKCUxvZzogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCUluZm86IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKV0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCX0sCglXYXJuOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJ3YXJuIl0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJYXJncy5wdXNoKGljZS5OTCwgdGhpcy5fZmlsZUxpbmUoKS5zcGxpdChpY2UuTkwpLnNsaWNlKDIpLmpvaW4oaWNlLk5MKSkKCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCURlYnVnOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJkZWJ1ZyJdCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWFyZ3MucHVzaCh0aGlzLmZpbGVMaW5lKDIsIDMpKQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpLCAiZGVidWciXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChKU09OLnN0cmluZ2lmeShhcmd1bWVudHNbaV0pKSB9CgkJbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNb2JpbGUiKSA+IC0xICYmIGFsZXJ0KEpTT04uc3RyaW5naWZ5KGFyZ3Muam9pbihpY2UuU1ApKSkKCX0sCglGaWxlTGluZTogZnVuY3Rpb24oZGVwdGgsIGxlbmd0aCkgewoJCXJldHVybiB0aGlzLmZpbGVMaW5lKGRlcHRoKzEpLnNwbGl0KGljZS5QUykuc2xpY2UoMykuc2xpY2UoLWxlbmd0aCkuam9pbihpY2UuUFMpLnNwbGl0KCIpIilbMF0KCX0sCglmaWxlTGluZTogZnVuY3Rpb24oZGVwdGgpIHsKCQlyZXR1cm4gKHRoaXMuX2ZpbGVMaW5lKCkuc3BsaXQoaWNlLk5MKVsxK2RlcHRoXXx8IiIpLnRyaW0oKQoJfSwKCV9maWxlTGluZTogZnVuY3Rpb24oKSB7IHZhciBvYmogPSB7fQoJCUVycm9yLmNhcHR1cmVTdGFja1RyYWNlICYmIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKG9iaiwgYXJndW1lbnRzLmNhbGxlZSkKCQlyZXR1cm4gb2JqLnN0YWNrIHx8ICIiCgl9LAoJX3RpbWU6IGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCXZhciBob3VyID0gbm93LmdldEhvdXJzKCkKCQlpZiAoaG91ciA8IDEwKSB7IGhvdXIgPSAiMCIraG91ciB9CgkJdmFyIG1pbnV0ZSA9IG5vdy5nZXRNaW51dGVzKCkKCQlpZiAobWludXRlIDwgMTApIHsgbWludXRlID0gIjAiK21pbnV0ZSB9CgkJdmFyIHNlY29uZCA9IG5vdy5nZXRTZWNvbmRzKCkKCQlpZiAoc2Vjb25kIDwgMTApIHsgc2Vjb25kID0gIjAiK3NlY29uZCB9CgkJcmV0dXJuIGhvdXIrIjoiK21pbnV0ZSsiOiIrc2Vjb25kCgl9LAp9KQo=",
        "usr/volcanos/lib/page.js": "Vm9sY2Fub3MoInBhZ2UiLCB7aGVscDogIueUqOaIt+eVjOmdoiIsIENsYXNzTGlzdDogewoJCWhhczogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJcmV0dXJuIGxpc3QuaW5kZXhPZihrZXkpID4gLTEKCQl9LAoJCWFkZDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJdmFyIHZhbHVlID0gY2FuLmJhc2UuQWRkVW5pcShsaXN0LCBrZXkpLmpvaW4oaWNlLlNQKS50cmltKCkKCQkJcmV0dXJuIHZhbHVlICE9IG9iai5jbGFzc05hbWUgJiYgKG9iai5jbGFzc05hbWUgPSB2YWx1ZSksIHZhbHVlCgkJfSwKCQlkZWw6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsgdmFyIGxpc3QgPSBvYmouY2xhc3NOYW1lPyBvYmouY2xhc3NOYW1lLnNwbGl0KGljZS5TUCk6IFtdCgkJCXJldHVybiBvYmouY2xhc3NOYW1lID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT0ga2V5PyB1bmRlZmluZWQ6IHZhbHVlIH0pLmpvaW4oaWNlLlNQKS50cmltKCkKCQl9LAoJCXNldDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSwgY29uZGl0aW9uKSB7CgkJCXJldHVybiAoY29uZGl0aW9uPyB0aGlzLmFkZChjYW4sIG9iaiwga2V5KTogdGhpcy5kZWwoY2FuLCBvYmosIGtleSkpLmluZGV4T2Yoa2V5KSA+IC0xCgkJfSwKCQluZWc6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsKCQkJcmV0dXJuICh0aGlzLmhhcyhjYW4sIG9iaiwga2V5KT8gdGhpcy5kZWwoY2FuLCBvYmosIGtleSk6IHRoaXMuYWRkKGNhbiwgb2JqLCBrZXkpKS5pbmRleE9mKGtleSkgPiAtMQoJCX0sCgl9LAoJU2VsZWN0QXJnczogZnVuY3Rpb24oY2FuLCBvcHRpb24sIGtleSwgY2IpIHsKCQlpZiAoY2FuLmJhc2UuaXNVbmRlZmluZWQoa2V5KSkgeyB2YXIgdmFsdWUgPSB7fQoJCQljYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgKHZhbHVlW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlKQoJCQl9KTsgcmV0dXJuIFt2YWx1ZV0KCQl9CgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0oa2V5LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sIGtleSwgdmFsdWUpIH0pLCBba2V5XQoJCX0KCQlpZiAoIWNhbi5iYXNlLmlzRnVuYyhjYikpIHsgdmFyIHZhbHVlID0gY2I7IGNiID0gZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbS50eXBlID09IGh0bWwuQlVUVE9OKSB7IHJldHVybiB9CgkJCXJldHVybiBpdGVtLm5hbWUgJiYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKHZhbHVlKT8gaXRlbS52YWx1ZTogKGl0ZW0udmFsdWUgPSB2YWx1ZSkpfHwiIgoJCX0gfQoJCWlmIChrZXkuaW5kZXhPZihpY2UuUFQpID4gLTEpIHsgcmV0dXJuIFsiIl19CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIG9wdGlvbiwga2V5PyAidGV4dGFyZWFbbmFtZT0iK2tleSsiXSwiKyJpbnB1dFtuYW1lPSIra2V5KyJdLCIrInNlbGVjdFtuYW1lPSIra2V5KyJdIjogIi5hcmdzIiwgY2IpCgl9LAoJU2VsZWN0QWxsOiBzaHkoIumAieaLqeiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5TZWxlY3RBbGwoY2FuLCBpdGVtLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keSwga2V5LCBjYiwgaW50ZXJ2YWwsIGNicykKCQl9KQoJCXJldHVybiBjYW4uY29yZS5MaXN0KHRhcmdldCAmJiB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChrZXkpLCBjYiwgaW50ZXJ2YWwsIGNicykKCX0pLAoJU2VsZWN0OiBzaHkoIumAieaLqeiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKSB7IGlmIChrZXkgPT0gaWNlLlBUKSB7IGNiKHRhcmdldCk7IHJldHVybiBbXSB9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QodGFyZ2V0ICYmIHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKGNhbi5wYWdlLktleXMoa2V5KSksIGNiLCBpbnRlcnZhbCwgY2JzKQoJfSksCglNb2RpZnk6IHNoeSgi5L+u5pS56IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7IHRhcmdldCA9IHRhcmdldHx8e30KCQl0YXJnZXQgPSBjYW4uYmFzZS5pc09iamVjdCh0YXJnZXQpPyB0YXJnZXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgaWYgKCF0YXJnZXQpIHsgcmV0dXJuIH0KCQljYW4uYmFzZS5pc1N0cmluZyh2YWx1ZSk/ICh0YXJnZXQuaW5uZXJIVE1MID0gdmFsdWUpOiBjYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIHZhbCkgewoJCQlrZXkgPT0gImNsYXNzTmFtZSIgJiYgY2FuLmJhc2UuaXNBcnJheSh2YWwpICYmICh2YWwgPSB2YWwuam9pbihpY2UuU1ApKQoJCQkhY2FuLmJhc2UuaXNPYmplY3QodmFsKT8gKHRhcmdldFtrZXldID0gdmFsKTogY2FuLmNvcmUuSXRlbSh2YWwsIGZ1bmN0aW9uKGssIHYpIHsKCQkJCXZhciBzaXplID0gewoJCQkJCSJoZWlnaHQiOiB0cnVlLCAibWF4LWhlaWdodCI6IHRydWUsICJtaW4taGVpZ2h0IjogdHJ1ZSwKCQkJCQkid2lkdGgiOiB0cnVlLCAibWF4LXdpZHRoIjogdHJ1ZSwgIm1pbi13aWR0aCI6IHRydWUsCgkJCQl9CgkJCQlpZiAoc2l6ZVtrXSAmJiBwYXJzZUludCh2KSA8IDApIHsgcmV0dXJuIHRhcmdldFtrZXldICYmICh0YXJnZXRba2V5XVtrXSA9ICIiKSB9CgoJCQkJdmFyIHNpemUgPSB7CgkJCQkJIm1hcmdpbi10b3AiOiB0cnVlLCAibWFyZ2luLWxlZnQiOiB0cnVlLCAiZm9udC1zaXplIjogdHJ1ZSwKCQkJCQkibGVmdCI6IHRydWUsICJyaWdodCI6IHRydWUsICJ0b3AiOiB0cnVlLCAiYm90dG9tIjogdHJ1ZSwKCQkJCQkiaGVpZ2h0IjogdHJ1ZSwgIm1heC1oZWlnaHQiOiB0cnVlLCAibWluLWhlaWdodCI6IHRydWUsCgkJCQkJIndpZHRoIjogdHJ1ZSwgIm1heC13aWR0aCI6IHRydWUsICJtaW4td2lkdGgiOiB0cnVlLAoJCQkJCSJwYWRkaW5nIjogdHJ1ZSwKCQkJCX0KCgkJCQlpZiAoc2l6ZVtrXSAmJiB2ICYmIChjYW4uYmFzZS5pc051bWJlcih2KSB8fCB2LmluZGV4T2YgJiYgdi5pbmRleE9mKCJweCIpID09IC0xKSkgeyB2ICs9ICJweCIgfQoJCQkJdGFyZ2V0W2tleV0gJiYgKHRhcmdldFtrZXldW2tdID0gdikKCQkJfSkKCQl9KQoJCXJldHVybiB0YXJnZXQKCX0pLAoJUmVtb3ZlOiBzaHkoIuWIoOmZpOiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJcmV0dXJuIHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YXJnZXQpLCB0YXJnZXQKCX0pLAoJQ3JlYXRlOiBzaHkoIuWIm+W7uuiKgueCuSIsIGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgewoJCXJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGtleSksIHZhbHVlKQoJfSksCglBcHBlbmQ6IHNoeSgi5re75Yqg6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgdmFsdWUpIHsgdmFsdWUgPSB2YWx1ZXx8e30KCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoa2V5KSkgeyB2YXIgcmVzID0gY2FuLnBhZ2UuQ3JlYXRlKGNhbiwga2V5LCB2YWx1ZSk7IHJldHVybiB0YXJnZXQuYXBwZW5kQ2hpbGQocmVzKSwgcmVzIH0KCgkJY2FuLmNvcmUuTGlzdChrZXksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGlmICghaXRlbSkgeyByZXR1cm4gfQoJCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSkpIHsgaXRlbSA9IHt2aWV3OiBbaXRlbV19IH0KCQkJaWYgKGl0ZW0ubm9kZU5hbWUpIHsgdGFyZ2V0LmFwcGVuZENoaWxkKGl0ZW0pOyByZXR1cm4gfQoKCQkJLy8g5Z+65pys57uT5p6EOiB0eXBlIG5hbWUgZGF0YSBsaXN0CgkJCXZhciB0eXBlID0gaXRlbS50eXBlfHxodG1sLkRJViwgZGF0YSA9IGl0ZW0uZGF0YXx8e30KCQkJdmFyIG5hbWUgPSBpdGVtLm5hbWV8fGRhdGEubmFtZXx8IiIKCgkJCS8vIOaVsOaNruiwg+aVtAoJCQljYW4uY29yZS5JdGVtKGl0ZW0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJCXN3aXRjaCAoa2V5KSB7CgkJCQkJY2FzZSBtZGIuVFlQRTogYnJlYWsKCQkJCQljYXNlIG1kYi5OQU1FOiBicmVhawoJCQkJCWNhc2UgbWRiLkRBVEE6IGJyZWFrCgkJCQkJY2FzZSBtZGIuTElTVDogYnJlYWsKCQkJCQljYXNlIGh0bWwuSU5ORVI6IGRhdGEuaW5uZXJIVE1MID0gaXRlbS5pbm5lcjsgYnJlYWsKCQkJCQljYXNlIGh0bWwuQ0xJQ0s6IGRhdGEub25jbGljayA9IGl0ZW0uY2xpY2s7IGJyZWFrCgkJCQkJZGVmYXVsdDoKCQkJCQkJaWYgKGl0ZW1ba2V5XSA9PSB1bmRlZmluZWQpIHsgYnJlYWsgfQoJCQkJCQlkYXRhW2tleV0gPSBpdGVtW2tleV0KCQkJCX0KCQkJfSkKCgkJCS8vIOWfuuacrOexu+WeizogdmlldyB0ZXh0IGJ1dHRvbiBzZWxlY3QgaW5wdXQgdXNlcm5hbWUgcGFzc3dvcmQKCQkJLy8g5Z+65pys57G75Z6LOiBpbWcgcm93IHRoIHRkCgkJCWlmIChpdGVtLnZpZXcpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0udmlldykKCQkJCWlmIChjYW4uYmFzZS5pc0FycmF5KGxpc3RbMF0pKSB7IGxpc3RbMF0gPSBsaXN0WzBdLmpvaW4oaWNlLlNQKSB9CgkJCQlsaXN0WzBdICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBkYXRhLCBsaXN0WzBdKQoJCQkJdHlwZSA9IGxpc3RbMV18fGh0bWwuRElWCgkJCQlkYXRhLmlubmVySFRNTCA9IGxpc3RbMl18fGRhdGEuaW5uZXJIVE1MfHwiIgoJCQkJbmFtZSA9IG5hbWV8fGxpc3RbM118fCIiCgoJCQl9IGVsc2UgaWYgKGl0ZW0udGV4dCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS50ZXh0KQoJCQkJZGF0YS5pbm5lckhUTUwgPSBsaXN0WzBdfHxkYXRhLmlubmVySFRNTHx8IiIKCQkJCXR5cGUgPSBsaXN0WzFdfHxodG1sLlNQQU4KCQkJCWxpc3RbMl0gJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGRhdGEsIGxpc3RbMl0pCgoJCQl9IGVsc2UgaWYgKGl0ZW0uYnV0dG9uKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmJ1dHRvbikKCQkJCXR5cGUgPSBodG1sLkJVVFRPTiwgbmFtZSA9IG5hbWV8fGxpc3RbMF0KCQkJCWRhdGEuaW5uZXJUZXh0ID0gY2FuLnVzZXIudHJhbnMoY2FuLCBsaXN0WzBdKSwgZGF0YS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQsIG5hbWUpCgkJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCQkJcmV0dXJuIHRydWUKCQkJCX0KCgkJCX0gZWxzZSBpZiAoaXRlbS5zZWxlY3QpIHsgdmFyIGxpc3QgPSBpdGVtLnNlbGVjdAoJCQkJdHlwZSA9IGh0bWwuU0VMRUNULCBkYXRhLm5hbWUgPSBuYW1lID0gbmFtZXx8bGlzdFswXVswXQoJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8bmFtZSkKCQkJCWRhdGEuY2xhc3NOYW1lID0gZGF0YS5jbGFzc05hbWV8fGxpc3RbMF1bMF18fCIiCgoJCQkJaXRlbS5saXN0ID0gbGlzdFswXS5zbGljZSgxKS5tYXAoZnVuY3Rpb24odmFsdWUpIHsKCQkJCQlyZXR1cm4ge3R5cGU6IGh0bWwuT1BUSU9OLCB2YWx1ZTogdmFsdWUsIGlubmVyOiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlKX0KCQkJCX0pCgkJCQlkYXRhLm9uY2hhbmdlID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSwgbmFtZSkKCQkJCX0KCgkJCX0gZWxzZSBpZiAoaXRlbS5pbnB1dCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5pbnB1dCkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8IiIsIGRhdGEubmFtZSA9IGRhdGEubmFtZXx8bmFtZQoJCQkJZGF0YS50eXBlID0gZGF0YS50eXBlfHwidGV4dCIKCQkJCWRhdGEuY2xhc3NOYW1lID0gZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSAib2ZmIgoKCQkJCWRhdGEub25mb2N1cyA9IGRhdGEub25mb2N1c3x8ZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgkJCQl9CgkJCQlkYXRhLm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jdGlvbihsaXN0WzFdKSAmJiBsaXN0WzFdKGV2ZW50KQoJCQkJfQoJCQkJZGF0YS5vbmtleXVwID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMl0pICYmIGxpc3RbMl0oZXZlbnQpCgkJCQl9CgkJCX0gZWxzZSBpZiAoaXRlbS51c2VybmFtZSkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS51c2VybmFtZSkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8aHRtbC5VU0VSTkFNRSwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGxpc3RbMV18fGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fGh0bWwuVVNFUk5BTUUKCgkJCX0gZWxzZSBpZiAoaXRlbS5wYXNzd29yZCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5wYXNzd29yZCkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8aHRtbC5QQVNTV09SRCwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGxpc3RbMV18fGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fCJjdXJyZW50LXBhc3N3b3JkIgoJCQkJZGF0YS50eXBlID0gaHRtbC5QQVNTV09SRAoKCQkJfSBlbHNlIGlmIChpdGVtLmltZykgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5pbWcpCgkJCQl0eXBlID0gaHRtbC5JTUcsIGRhdGEuc3JjID0gbGlzdFswXQoKCQkJfSBlbHNlIGlmIChpdGVtLnJvdykgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS5yb3cubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaXRlbS5zdWJ8fGh0bWwuVERdfSB9KQoJCQl9IGVsc2UgaWYgKGl0ZW0udGgpIHsgdHlwZSA9IGh0bWwuVFIKCQkJCWl0ZW0ubGlzdCA9IGl0ZW0udGgubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaHRtbC5USF19IH0pCgkJCX0gZWxzZSBpZiAoaXRlbS50ZCkgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS50ZC5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBodG1sLlREXX0gfSkKCQkJfQoKCQkJLy8g6K+t6KiA6L2s5o2iCgkJCWlmICh0eXBlID09IGh0bWwuU0VMRUNUKSAgewoJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8ZGF0YS5uYW1lKQoJCQl9CgkJCWlmICh0eXBlID09IGh0bWwuSU5QVVQpICB7IGRhdGEudHlwZSA9PSBodG1sLkJVVFRPTiAmJiAoZGF0YS52YWx1ZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS52YWx1ZSkpCgkJCQlpZiAoZGF0YS50eXBlID09IGh0bWwuVEVYVHx8ZGF0YS50eXBlID09IGh0bWwuUEFTU1dPUkR8fCFkYXRhLnR5cGUpIHsgZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8Im9mZiIKCQkJCQkvLyBkYXRhLnBsYWNlaG9sZGVyID0gY2FuLnVzZXIudHJhbnMoY2FuLCAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKSkKCQkJCQlkYXRhLnBsYWNlaG9sZGVyID0gKGRhdGEucGxhY2Vob2xkZXJ8fGRhdGEubmFtZXx8IiIpLnNwbGl0KGljZS5QVCkucG9wKCkKCQkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxkYXRhLnBsYWNlaG9sZGVyKQoJCQkJfQoJCQl9CgkJCWlmICh0eXBlID09IGh0bWwuVEVYVEFSRUEpICB7CgkJCQlkYXRhLnBsYWNlaG9sZGVyID0gY2FuLnVzZXIudHJhbnMoY2FuLCAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKSkKCQkJfQoKCQkJLy8g5Yib5bu66IqC54K5CgkJCSFkYXRhLm5hbWUgJiYgaXRlbS5uYW1lICYmIChkYXRhLm5hbWUgPSBpdGVtLm5hbWUpCgkJCXZhciBub2RlID0gY2FuLnBhZ2UuQ3JlYXRlKGNhbiwgdHlwZSwgZGF0YSkKCgkJCS8vIOWIm+W7uue0ouW8lQoJCQluYW1lID0gbmFtZXx8ZGF0YS5jbGFzc05hbWV8fHR5cGV8fCIiCgkJCXZhbHVlW25hbWV8fCIiXSA9IHZhbHVlW2RhdGEuY2xhc3NOYW1lfHwiIl0gPSB2YWx1ZVt0eXBlXSA9IG5vZGUKCQkJdmFsdWUuZmlyc3QgPSB2YWx1ZS5maXJzdHx8bm9kZSwgdmFsdWUubGFzdCA9IG5vZGUKCQkJdmFsdWUuX3RhcmdldCA9IHZhbHVlLl90YXJnZXR8fG5vZGUKCgkJCS8vIOmAkuW9kuiKgueCuQoJCQlpdGVtLmxpc3QgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgbm9kZSwgaXRlbS5saXN0LCB2YWx1ZSkKCQkJdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRDaGlsZCAmJiB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSkKCQkJY2FuLmJhc2UuaXNGdW5jKGl0ZW0uX2luaXQpICYmIGl0ZW0uX2luaXQobm9kZSwgdmFsdWUpCgkJfSkKCQlyZXR1cm4gdmFsdWUKCX0pLAoJQXBwZW5kczogc2h5KCLmt7vliqDoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkgewoJCXJldHVybiB0YXJnZXQuaW5uZXJIVE1MID0gIiIsIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkKCX0pLAoKCUFwcGVuZFRhYmxlOiBzaHkoIua3u+WKoOihqOagvCIsIGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQsIGxpc3QsIGNiKSB7CgkJaWYgKCFtc2cuYXBwZW5kfHxtc2cuYXBwZW5kLmxlbmd0aCA9PSAwKSB7cmV0dXJufQoKCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIGh0bWwuVEFCTEUpCgkJdmFyIHRoZWFkID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsICJ0aGVhZCIpCgkJdmFyIHRib2R5ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsICJ0Ym9keSIpCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGhlYWQsIFt7dHlwZTogaHRtbC5UUiwgZGF0YToge2RhdGFzZXQ6IHtpbmRleDogLTF9fSwgbGlzdDogCgkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCQlyZXR1cm4ga2V5WzBdID09ICJfIj8gdW5kZWZpbmVkOiB7dGV4dDogW2tleS50cmltKCksIGh0bWwuVEhdfQoJCQl9KQoJCX1dKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRib2R5LCBjYW4uY29yZS5MaXN0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihsaW5lLCBpbmRleCwgYXJyYXkpIHsKCQkJdmFyIF9saXN0ID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJcmV0dXJuIGNiKGNhbi5wYWdlLkNvbG9yKGxpbmVba2V5XSkudHJpbSgpLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkKCQkJfSkKCQkJcmV0dXJuIF9saXN0Lmxlbmd0aCA+IDA/IHt0eXBlOiBodG1sLlRSLCBkYXRhc2V0OiB7aW5kZXg6IGluZGV4fSwgbGlzdDogX2xpc3R9OiB1bmRlZmluZWQKCQl9KSkKCQlyZXR1cm4gY2FuLnBhZ2UuT3JkZXJUYWJsZShjYW4sIHRhYmxlKQoJfSksCglPcmRlclRhYmxlOiBmdW5jdGlvbihjYW4sIHRhYmxlKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFibGUsIGh0bWwuVEgsIGZ1bmN0aW9uKHRoLCBpbmRleCkgewoJCQl0aC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdmFyIGRhdGFzZXQgPSBldmVudC50YXJnZXQuZGF0YXNldAoJCQkJZGF0YXNldFsic29ydF9hc2MiXSA9IChkYXRhc2V0WyJzb3J0X2FzYyJdID09ICIxIikgPyAwOiAxCgkJCQljYW4ucGFnZS5SYW5nZVRhYmxlKGNhbiwgdGFibGUsIGluZGV4LCBkYXRhc2V0WyJzb3J0X2FzYyJdID09ICIxIikKCQkJfQoJCX0pCgkJcmV0dXJuIHRhYmxlCgl9LAoJUmFuZ2VUYWJsZTogZnVuY3Rpb24oY2FuLCB0YWJsZSwgaW5kZXgsIHNvcnRfYXNjKSB7CgkJdmFyIGxpc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJcmV0dXJuIHRyLnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FfHxjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsICJoaWRlIik/IG51bGw6IHRyCgkJfSkuc2xpY2UoMSkKCgkJaW5kZXggPSBjYW4uYmFzZS5pc09iamVjdChpbmRleCk/IGluZGV4OiBbaW5kZXhdCgkJaW5kZXggPSBjYW4uY29yZS5MaXN0KGluZGV4LCBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtID4gLTEpIHsgcmV0dXJuIGl0ZW19IH0pCgkJaWYgKGluZGV4Lmxlbmd0aCA9PSAwKSB7IHJldHVybiB9CgoJCXZhciBpc190aW1lID0gdHJ1ZSwgaXNfbnVtYmVyID0gdHJ1ZQoJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odHIpIHsKCQkJdmFyIHRleHQgPSB0ci5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQKCQkJaXNfdGltZSA9IGlzX3RpbWUgJiYgRGF0ZS5wYXJzZSh0ZXh0KSA+IDAKCQkJaXNfbnVtYmVyID0gaXNfbnVtYmVyICYmICFpc05hTihwYXJzZUludCh0ZXh0KSkKCQl9KQoKCQl2YXIgbnVtX2xpc3QgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHRyKSB7CgkJCXZhciB0ZXh0ID0gdHIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0CgkJCXJldHVybiBpc190aW1lPyBEYXRlLnBhcnNlKHRleHQpOgoJCQkJaXNfbnVtYmVyPyBjYW4uYmFzZS5QYXJzZVNpemUodGV4dCk6IHRleHQKCQl9KQoJCWZ1bmN0aW9uIGlzbGVzcyhhLCBiLCBpbmRleCkgewoJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXSAmJiBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dKSB7CgkJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQgPCBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCkgeyByZXR1cm4gdHJ1ZSB9CgkJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQgPiBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCkgeyByZXR1cm4gZmFsc2UgfQoJCQl9CgkJCXJldHVybiBpbmRleC5sZW5ndGggPiAxICYmIGlzbGVzcyhhLCBiLCBpbmRleC5zbGljZSgxKSkKCQl9CgoJCS8vIOmAieaLqeaOkuW6jwoJCWZvciAodmFyIGkgPSAwOyBpIDwgbnVtX2xpc3QubGVuZ3RoOyBpKyspIHsgdmFyIG1pbiA9IGkKCQkJZm9yICh2YXIgaiA9IGkrMTsgaiA8IG51bV9saXN0Lmxlbmd0aDsgaisrKSB7CgkJCQlpZiAobnVtX2xpc3RbbWluXSA9PSBudW1fbGlzdFtqXSAmJiBpbmRleC5sZW5ndGggPiAxICYmIGxpc3RbaW5kZXhbMV1dKSB7CgkJCQkJaWYgKHNvcnRfYXNjPyBpc2xlc3MobGlzdFttaW5dLCBsaXN0W2pdLCBpbmRleC5zbGljZSgxKSk6IGlzbGVzcyhsaXN0W2pdLCBsaXN0W21pbl0sIGluZGV4LnNsaWNlKDEpKSkgewoJCQkJCQltaW4gPSBqCgkJCQkJfQoJCQkJfSBlbHNlIGlmIChzb3J0X2FzYz8gbnVtX2xpc3RbbWluXSA8IG51bV9saXN0W2pdOiBudW1fbGlzdFtqXSA8IG51bV9saXN0W21pbl0pIHsKCQkJCQltaW4gPSBqCgkJCQl9CgkJCX0KCgkJCWlmIChtaW4gIT0gaSkgewoJCQkJdmFyIHRlbXAgPSBudW1fbGlzdFtpXTsgbnVtX2xpc3RbaV0gPSBudW1fbGlzdFttaW5dOyBudW1fbGlzdFttaW5dID0gdGVtcAoJCQkJdmFyIHRlbXAgPSBsaXN0W2ldOyBsaXN0W2ldID0gbGlzdFttaW5dOyBsaXN0W21pbl0gPSB0ZW1wCgkJCX0KCgkJCXZhciB0Ym9keSA9IGxpc3RbaV0ucGFyZW50RWxlbWVudAoJCQlsaXN0W2ldLnBhcmVudEVsZW1lbnQgJiYgdGJvZHkucmVtb3ZlQ2hpbGQobGlzdFtpXSkKCQkJdGJvZHkuYXBwZW5kQ2hpbGQobGlzdFtpXSkKCQl9Cgl9LAoKCUNhY2hlOiBmdW5jdGlvbihuYW1lLCBvdXRwdXQsIGRhdGEpIHsgaWYgKCFuYW1lKSB7IHJldHVybiB9CgkJdmFyIGNhY2hlID0gb3V0cHV0Ll9jYWNoZXx8e307IG91dHB1dC5fY2FjaGUgPSBjYWNoZQoJCWlmIChkYXRhKSB7IGlmIChvdXRwdXQuY2hpbGRyZW4ubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQkJdmFyIHRlbXAgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkKCQkJd2hpbGUgKG91dHB1dC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsgLy8g5YaZ57yT5a2YCgkJCQl2YXIgaXRlbSA9IG91dHB1dC5jaGlsZE5vZGVzWzBdCgkJCQlpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSksCgkJCQkJdGVtcC5hcHBlbmRDaGlsZChpdGVtKQoJCQl9CgkJCXJldHVybiBjYWNoZVtuYW1lXSA9IHtub2RlOiB0ZW1wLCBkYXRhOiBkYXRhfSwgbmFtZQoJCX0KCQlvdXRwdXQuaW5uZXJIVE1MID0gIiIKCgkJdmFyIGxpc3QgPSBjYWNoZVtuYW1lXTsgaWYgKCFsaXN0KSB7IHJldHVybiB9CgkJd2hpbGUgKGxpc3Qubm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsgLy8g6K+757yT5a2YCgkJCXZhciBpdGVtID0gbGlzdC5ub2RlLmNoaWxkTm9kZXNbMF0KCQkJaXRlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGl0ZW0pCgkJCW91dHB1dC5hcHBlbmRDaGlsZChpdGVtKQoJCX0KCQlyZXR1cm4gZGVsZXRlKGNhY2hlW25hbWVdKSwgbGlzdC5kYXRhCgl9LAoJRm9ybWF0OiBmdW5jdGlvbih0eXBlKSB7IHZhciBhcmdzID0gYXJndW1lbnRzCgkJc3dpdGNoICh0eXBlKSB7CgkJCWNhc2UgaHRtbC5BOiByZXR1cm4gIjxhIGhyZWY9JyIrYXJnc1sxXSsiJyB0YXJnZXQ9J19ibGFuayc+IisoYXJnc1syXXx8YXJnc1sxXSkrIjwvYT4iCgkJCWNhc2UgaHRtbC5JTUc6IHJldHVybiBhcmdzWzJdPyAiPGltZyBzcmM9JyIrYXJnc1sxXSsiJyBoZWlnaHQ9IithcmdzWzJdKyI+IjogIjxpbWcgc3JjPSciK2FyZ3NbMV0rIic+IgoJCX0KCX0sCglyZXBsYWNlOiBmdW5jdGlvbihjYW4sIHRleHQsIGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLmJhc2UucmVwbGFjZUFsbCh0ZXh0LCAiPCIsICImbHQ7IiwgIj4iLCAiJmd0OyIsIGtleSwgdmFsdWUpCgl9LAoJQ29sb3I6IGZ1bmN0aW9uKHRleHQpIHsgaWYgKHR5cGVvZiB0ZXh0ICE9IGxhbmcuU1RSSU5HKSB7IHJldHVybiAiIiB9CgkJaWYgKHRleHQuaW5kZXhPZigiaHR0cDovLyIpID09IDAgfHwgdGV4dC5pbmRleE9mKCJodHRwczovLyIpID09IDAgfHwgdGV4dC5pbmRleE9mKCJmdHA6Ly8iKSA9PSAwKSB7CgkJCXZhciBscyA9IHRleHQuc3BsaXQoaWNlLlNQKTsKCQkJdGV4dCA9ICI8YSBocmVmPSciK2xzWzBdKyInIHRhcmdldD0nX2JsYW5rJz4iK2xzWzBdKyI8L2E+Iitscy5zbGljZSgxKS5qb2luKGljZS5TUCkKCQl9OyB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXG4vZywgIjxicj4iKQoKCQlpZiAodGV4dC5pbmRleE9mKCJcMDMzXFsiKSA9PSAtMSkgeyByZXR1cm4gdGV4dCB9CgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2YwMCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszMm0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMGYwJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzMzbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmZjAnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzRtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzAwZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNm0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMGZmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM0OzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzAwZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNzsxbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmZmYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMW0vZywgIjxzcGFuIHN0eWxlPSdmb250LXdlaWdodDpib2xkJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzBtL2csICI8L3NwYW4+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFttL2csICI8L3NwYW4+IikKCQlyZXR1cm4gdGV4dAoJfSwKCWlucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbHVlKSB7CgkJdmFyIGlucHV0ID0ge3R5cGU6IGh0bWwuSU5QVVQsIG5hbWU6IGl0ZW0ubmFtZSwgZGF0YTogaXRlbSwgZGF0YXNldDoge30sIF9pbml0OiBpdGVtLl9pbml0LCBzdHlsZTogaXRlbS5zdHlsZXx8e319CgkJaXRlbS52YWx1ZSA9PSBpY2UuQVVUTyAmJiAoaXRlbS52YWx1ZSA9ICIiLCBpdGVtLmFjdGlvbiA9IGljZS5BVVRPKSwgaXRlbS5hY3Rpb24gPT0gaWNlLkFVVE8gJiYgKGlucHV0LmRhdGFzZXQuYWN0aW9uID0gaWNlLkFVVE8pCgoJCXN3aXRjaCAoaXRlbS50eXBlID0gaXRlbS50eXBlfHxodG1sLlRFWFQpIHsKCQkJY2FzZSBodG1sLlRFWFRBUkVBOiBpbnB1dC50eXBlID0gaHRtbC5URVhUQVJFQQoJCQkJaW5wdXQuc3R5bGUuaGVpZ2h0ID0gaW5wdXQuc3R5bGUuaGVpZ2h0fHxjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGh0bWwuVEVYVEFSRUEsIGl0ZW0ubmFtZSwgaHRtbC5IRUlHSFRdLmpvaW4oaWNlLlBUKSl8fGNhbi5Db25mKFsiZmVhdHVyZSIsIGh0bWwuVEVYVEFSRUEsIGh0bWwuSEVJR0hUXS5qb2luKGljZS5QVCkpCgkJCQlpbnB1dC5zdHlsZS53aWR0aCA9IGlucHV0LnN0eWxlLndpZHRofHxjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGh0bWwuVEVYVEFSRUEsIGl0ZW0ubmFtZSwgaHRtbC5XSURUSF0uam9pbihpY2UuUFQpKXx8Y2FuLkNvbmYoWyJmZWF0dXJlIiwgaHRtbC5URVhUQVJFQSwgaHRtbC5XSURUSF0uam9pbihpY2UuUFQpKQoJCQkJLy8gbm8gYnJlYWsKCQkJY2FzZSBodG1sLlVTRVJOQU1FOgoJCQljYXNlIGh0bWwuUEFTU1dPUkQ6CgkJCQkvLyBubyBicmVhawoJCQljYXNlIGh0bWwuVEVYVDoKCQkJCWl0ZW0uYXV0b2NvbXBsZXRlID0gIm9mZiIKCQkJCWl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS50eXBlCgkJCQlpdGVtLnZhbHVlID0gdmFsdWV8fGl0ZW0udmFsdWV8fCIiCgkJCQlpdGVtLnBsYWNlaG9sZGVyID0gaXRlbS5wbGFjZWhvbGRlcnx8aXRlbS5uYW1lfHxpdGVtLnR5cGUKCQkJCWl0ZW0udGl0bGUgPSBpdGVtLnRpdGxlfHxpdGVtLnBsYWNlaG9sZGVyfHxpdGVtLm5hbWV8fGl0ZW0udHlwZQoJCQkJaXRlbS5jbGFzc05hbWUgfHwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGN0eC5BUkdTKQoJCQkJYnJlYWsKCQkJY2FzZSBodG1sLlNFTEVDVDogaW5wdXQudHlwZSA9IGh0bWwuU0VMRUNUCgkJCQlpdGVtLnZhbHVlcyA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0udmFsdWVzKT8gY2FuLmNvcmUuU3BsaXQoaXRlbS52YWx1ZXMpOiBpdGVtLnZhbHVlcwoJCQkJaWYgKCFpdGVtLnZhbHVlcyAmJiBpdGVtLnZhbHVlKSB7IGl0ZW0udmFsdWVzID0gY2FuLmNvcmUuU3BsaXQoaXRlbS52YWx1ZSksIGl0ZW0udmFsdWUgPSBpdGVtLnZhbHVlc1swXSB9CgoJCQkJaXRlbS52YWx1ZSA9IHZhbHVlfHxpdGVtLnZhbHVlLCBpbnB1dC5saXN0ID0gaXRlbS52YWx1ZXMubWFwKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQkJcmV0dXJuIHt0eXBlOiBodG1sLk9QVElPTiwgdmFsdWU6IHZhbHVlLCBpbm5lcjogdmFsdWV9CgkJCQl9KSwgaXRlbS5jbGFzc05hbWUgfHwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGN0eC5BUkdTKQoJCQkJYnJlYWsKCQkJY2FzZSBodG1sLkJVVFRPTjogaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWV8fGl0ZW0ubmFtZXx8bWRiLkxJU1Q7IGJyZWFrCgkJCWNhc2UgInVwZmlsZSI6IGl0ZW0udHlwZSA9IGh0bWwuRklMRTsgYnJlYWsKCQkJY2FzZSBodG1sLlVQTE9BRDogaXRlbS50eXBlID0gaHRtbC5GSUxFLCBpbnB1dC5uYW1lID0gaHRtbC5VUExPQUQ7IGJyZWFrCgkJCWRlZmF1bHQ6CgkJfQoJCXJldHVybiBpbnB1dAoJfSwKCWlucHV0czogZnVuY3Rpb24oY2FuLCBsaXN0KSB7CgkJdmFyIF9saXN0ID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQlzd2l0Y2ggKGxpc3RbaV0pIHsgY2FzZSAiIjogX2xpc3QucHVzaCgiIik7IGJyZWFrCgkJCQljYXNlIGljZS5BVVRPOgoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAibGlzdCJ9KQoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAiYmFjayJ9KQoJCQkJCWJyZWFrCgkJCQljYXNlIG1kYi5QQUdFOgoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogbWRiLkxJTUlULCB2YWx1ZTogY2FuLl9tc2cuT3B0aW9uKG1kYi5MSU1JVCl9KQoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogbWRiLk9GRkVORCwgdmFsdWU6IGNhbi5fbXNnLk9wdGlvbihtZGIuT0ZGRU5EKX0pCgkJCQkJX2xpc3QucHVzaChtZGIuUFJFViwgbWRiLk5FWFQpCgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6CgkJCQkJKGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IGNhbi5jb3JlLlNwbGl0SW5wdXQobGlzdFtpXSwgaHRtbC5CVVRUT04pOwoJCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuU0VMRUNUKSB7CgkJCQkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IHRhcmdldC52YWx1ZSA9IGl0ZW0udmFsdWV8fGl0ZW0udmFsdWVzWzBdLCB0YXJnZXQub25jaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ucnVuKGV2ZW50KSB9IH0KCQkJCQkJfQoJCQkJCQlpdGVtLmFjdGlvbiAmJiAoZnVuY3Rpb24oKSB7IGl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCkgfSB9KSgpCgkJCQkJCWl0ZW0udHlwZSA9PSBodG1sLkJVVFRPTj8gX2xpc3QucHVzaChsaXN0W2ldKTogX2xpc3QucHVzaChpdGVtKQoJCQkJCX0pICgpCgkJCX0KCQl9CgkJcmV0dXJuIF9saXN0Cgl9LAoKCXN0eWxlRGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkRJU1BMQVksIHZhbHVlKSwgdGFyZ2V0LnN0eWxlLmRpc3BsYXkKCX0sCglzdHlsZUhlaWdodDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkhFSUdIVCwgdmFsdWUpLCB0YXJnZXQub2Zmc2V0SGVpZ2h0Cgl9LAoJc3R5bGVXaWR0aDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLldJRFRILCB2YWx1ZSksIHRhcmdldC5vZmZzZXRXaWR0aAoJfSwKCXN0eWxlQ2xhc3M6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgewoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge2NsYXNzTmFtZTogdmFsdWV9KQoJfSwKCXN0eWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgc3R5bGUpIHsgdmFyIHZhbHVlID0ge30KCQlmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgewoJCQlpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7c3R5bGU6IGFyZ3VtZW50c1tpLS1dfSkKCQkJfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuVU5ERUZJTkVEKSB7CgkJCQljb250aW51ZQoJCQl9IGVsc2UgewoJCQkJdmFsdWVbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdCgkJCX0KCQl9CgkJcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3N0eWxlOiB2YWx1ZX0pLCB2YWx1ZQoJfSwKCUtleXM6IGZ1bmN0aW9uKCkgeyB2YXIgbGlzdCA9IFtdIC8vIEZTIFNQIEdUIFBUCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJaWYgKHR5cGVvZiB2ID09IGxhbmcuT0JKRUNUKSB7CgkJCQlmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKyspIHsKCQkJCQlpZiAodHlwZW9mIHZbal0gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCQkJZm9yICh2YXIgayA9IDA7IGsgPCB2W2pdLmxlbmd0aDsgaysrKSB7CgkJCQkJCQlpZiAodHlwZW9mIHZbal1ba10gPT0gbGFuZy5PQkpFQ1QpIHsgdltqXVtrXSA9IHZbal1ba10uam9pbihpY2UuUFQpIH0KCQkJCQkJfQoJCQkJCQl2W2pdID0gdltqXS5qb2luKGljZS5HVCkKCQkJCQl9CgkJCQl9CgkJCQlsaXN0LnB1c2godi5qb2luKGljZS5TUCkpCgkJCX0gZWxzZSB7CgkJCQlsaXN0LnB1c2godisiIikKCQkJfQoJCX0KCQlyZXR1cm4gbGlzdC5qb2luKGljZS5GUykKCX0sCgljc3M6IGZ1bmN0aW9uKHRleHQpIHsKCQl2YXIgc3R5bGVTaGVldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIikKCQlzdHlsZVNoZWV0LnR5cGUgPSAidGV4dC9jc3MiLCBzdHlsZVNoZWV0LmlubmVyVGV4dCA9IHRleHQKCQlkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpCgl9LAoJdGFnaXM6IGZ1bmN0aW9uKHR5cGUsIHRhcmdldCkgeyB0eXBlID0gdHlwZW9mIHR5cGUgPT0gbGFuZy5PQkpFQ1Q/IHR5cGU6IFt0eXBlXQoJCWlmICh0eXBlLmluZGV4T2YodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkgeyByZXR1cm4gdHJ1ZSB9Cgl9LAoJb2Zmc2V0VG9wOiBmdW5jdGlvbihpdGVtKSB7IHZhciByZXMgPSAwCgkJd2hpbGUgKGl0ZW0pIHsgcmVzICs9IGl0ZW0ub2Zmc2V0VG9wfHwwLCBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQlyZXR1cm4gcmVzCgl9LAoJb2Zmc2V0TGVmdDogZnVuY3Rpb24oaXRlbSkgeyB2YXIgcmVzID0gMAoJCS8vIGlmIChpdGVtLm9mZnNldExlZnQpIHsgcmV0dXJuIGl0ZW0ub2Zmc2V0TGVmdCB9CgkJd2hpbGUgKGl0ZW0pIHsgcmVzICs9IGl0ZW0ub2Zmc2V0TGVmdHx8MCwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZSB9CgkJcmV0dXJuIHJlcwoJfSwKCWVkaXRhYmxlOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG9rKSB7IGl0ZW0uc2V0QXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiLCBvaykgfSwKCWRyYWdnYWJsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBvaykgeyBpdGVtLnNldEF0dHJpYnV0ZSgiZHJhZ2dhYmxlIiwgb2spIH0sCgoJQXBwZW5kVnVlOiBmdW5jdGlvbihjYW4sIG1ldGEsIGxpc3QsIHRhcmdldCkgewoJCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS92dWVAMi9kaXN0L3Z1ZS5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLnJlcXVpcmUoWyJodHRwczovL3VucGtnLmNvbS9lbGVtZW50LXVpL2xpYi9pbmRleC5qcyIsICJodHRwczovL3VucGtnLmNvbS9lbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9pbmRleC5jc3MiXSwgZnVuY3Rpb24oKSB7CgkJCQluZXcgVnVlKGNhbi5iYXNlLkNvcHkoe2VsOiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCBbe3R5cGU6ICJkaXYiLCBpbm5lcjogbGlzdH1dKS5maXJzdH0sIG1ldGEpKQoJCQl9KQoJCX0pCgl9LAoKCWluc2VydEJlZm9yZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBiZWZvcmUsIHBhcmVudCkgeyBwYXJlbnQgPSBwYXJlbnR8fGJlZm9yZS5wYXJlbnROb2RlCgkJdmFyIGl0ZW0gPSBjYW4uYmFzZS5pc0FycmF5KGxpc3QpPyBjYW4ucGFnZS5BcHBlbmQoY2FuLCBwYXJlbnQsIGxpc3QpLmZpcnN0OiBsaXN0CgkJcmV0dXJuIGJlZm9yZSAmJiBwYXJlbnQuaW5zZXJ0QmVmb3JlKGl0ZW0sIGJlZm9yZSksIGl0ZW0KCX0sCn0pCg==",
        "usr/volcanos/lib/user.js": "Vm9sY2Fub3MoInVzZXIiLCB7aGVscDogIueUqOaIt+aTjeS9nCIsIGluZm86IHt9LCBhZ2VudDogewoJCXNjYW5RUkNvZGU6IGZ1bmN0aW9uKGNiLCBjYW4pIHsKCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCBuYW1lOiAidGV4dCIsIHRleHQ6ICIifV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJCWNiKGxpc3RbMF0sIGNhbi5iYXNlLlBhcnNlSlNPTihsaXN0WzBdKSkKCQkJfSkKCQl9LAoJCWdldExvY2F0aW9uOiBmdW5jdGlvbihjYikgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJaWYgKGNhbGwuX3JlcykgeyByZXR1cm4gY2IoY2FsbC5fcmVzKSB9CgoJCQluYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGZ1bmN0aW9uKHJlcykgewoJCQkJY2IoY2FsbC5fcmVzID0ge2xhdGl0dWRlOiBwYXJzZUludChyZXMuY29vcmRzLmxhdGl0dWRlKjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQocmVzLmNvb3Jkcy5sb25naXR1ZGUqMTAwMDAwKX0pCgkJCX0sIGZ1bmN0aW9uKHNvbWUpIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKHt0eXBlOiAidW5rbm93biIsIG5hbWU6ICJ1bmtub3duIiwgbGF0aXR1ZGU6IDM5OTg0MTIsIGxvbmdpdHVkZTogMTE2MzA3NDh9KQoJCQl9ICk7CgkJfSwKCQlvcGVuTG9jYXRpb246IGZ1bmN0aW9uKG1zZykgewoJCQl3aW5kb3cub3BlbigiaHR0cHM6Ly9tYXAuYmFpZHUuY29tL3NlYXJjaC8iK2VuY29kZVVSSUNvbXBvbmVudChtc2cuT3B0aW9uKG1kYi5URVhUKSkKCQkJCSsiL0AxMjk1ODc1MC4wODUsNDgyNTc4NS41NSwxNno/cXVlcnl0eXBlPXMmZGFfc3JjPXNoYXJldXJsJndkPSIrZW5jb2RlVVJJQ29tcG9uZW50KG1zZy5PcHRpb24obWRiLlRFWFQpKSkKCQl9LAoJCWNob29zZUltYWdlOiBmdW5jdGlvbihjYikgewoJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYihbXSkKCQl9LAoJfSwKCWlzV2VpWGluOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1pY3JvTWVzc2VuZ2VyIikgPiAtMSwKCWlzSVBob25lOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoImlQaG9uZSIpID4gLTEsCglpc01vYmlsZTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNb2JpbGUiKSA+IC0xLAoJaXNNYWNPU1g6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWFjIE9TIFgiKSA+IC0xLAoJaXNXaW5kb3dzOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIldpbmRvd3MiKSA+IC0xLAoJaXNJRTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIikgPiAtMSwKCWlzRXh0ZW5zaW9uOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wcm90b2NvbCAmJiBsb2NhdGlvbi5wcm90b2NvbCA9PSAiY2hyb21lLWV4dGVuc2lvbjoiLAoJaXNMb2NhbEZpbGU6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnByb3RvY29sICYmIGxvY2F0aW9uLnByb3RvY29sID09ICJmaWxlOiIsCglpc0xhbmRzY2FwZTogZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA+IHdpbmRvdy5pbm5lckhlaWdodCB9LAoJaXNQb3J0cmFpdDogZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA8IHdpbmRvdy5pbm5lckhlaWdodCB9LAoJbW9kOiB7CgkJaXNQb2Q6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMCB8fCBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIveC8iKSA9PSAwKSwKCQlpc0RpdjogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L2Rpdi8iKSA9PSAwKSwKCQlpc0NtZDogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwICYmIGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jbWQvIikgPiAwIHx8CgkJCWxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L2NtZC8iKSA9PSAwIHx8IGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9oZWxwLyIpID09IDApLAoJCWlzV2ViOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDAgJiYgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL3dlYnNpdGUvIikgPiAwIHx8CgkJCWxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3dlYnNpdGUvIikgPT0gMCksCgl9LAoKCWFsZXJ0OiBmdW5jdGlvbih0ZXh0KSB7IGFsZXJ0KEpTT04uc3RyaW5naWZ5KHRleHQpKSB9LAoJY29uZmlybTogZnVuY3Rpb24odGV4dCkgeyByZXR1cm4gY29uZmlybShKU09OLnN0cmluZ2lmeSh0ZXh0KSkgfSwKCXByb21wdDogZnVuY3Rpb24odGlwLCBkZWYsIGNiLCBzaWxlbnQpIHsgKHRleHQgPSBzaWxlbnQ/IGRlZjogcHJvbXB0KHRpcCwgZGVmfHwiIikpICE9IHVuZGVmaW5lZCAmJiB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYih0ZXh0KTsgcmV0dXJuIHRleHQgfSwKCXJlbG9hZDogZnVuY3Rpb24oZm9yY2UpIHsgKGZvcmNlIHx8IGNvbmZpcm0oIumHjeaWsOWKoOi9vemhtemdou+8nyIpKSAmJiBsb2NhdGlvbi5yZWxvYWQoKSB9LAoJanVtcHM6IGZ1bmN0aW9uKHVybCkgeyBsb2NhdGlvbi5ocmVmID0gdXJsIH0sCglvcGVuOiBmdW5jdGlvbih1cmwpIHsgd2luZG93Lm9wZW4odXJsKSB9LAoJY2xvc2U6IGZ1bmN0aW9uKHVybCkgeyB3aW5kb3cuY2xvc2UoKSB9LAoJdGltZTogZnVuY3Rpb24oY2FuLCB0aW1lLCBmbXQpIHsgdmFyIG5vdyA9IGNhbi5iYXNlLkRhdGUodGltZSkKCQl2YXIgbGlzdCA9IGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIj8gWyJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiXTogWyLlkajml6UiLCAi5ZGo5LiAIiwgIuWRqOS6jCIsICLlkajkuIkiLCAi5ZGo5ZubIiwgIuWRqOS6lCIsICLlkajlha0iXQoJCXJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsIChmbXR8fCIleS0lbS0lZCAlSDolTTolUyIpLnJlcGxhY2UoIiV3IiwgbGlzdFtub3cuZ2V0RGF5KCldKSkKCX0sCglhcmdzOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsKCQkJcmV0dXJuIGNhbi5iYXNlLk9iaihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdHguQVJHUyksIHt9KQoJCX0KCQlyZXR1cm4ge30KCX0sCgoJdGl0bGU6IGZ1bmN0aW9uKHRleHQpIHsKCQlpZiAod2luZG93LndlYnZpZXcpIHsgcmV0dXJuIHRpdGxlKHRleHQpIH0KCQlyZXR1cm4gdGV4dCAmJiAoZG9jdW1lbnQudGl0bGUgPSBWb2xjYW5vcy5tZXRhLmFyZ3MubmFtZXx8dGV4dCksIGRvY3VtZW50LnRpdGxlCgl9LAoJdG9waWM6IGZ1bmN0aW9uKGNhbiwgbmFtZSkgeyBjYW4uYmFzZS5pc0FycmF5KG5hbWUpICYmIChuYW1lID0gY2FuLmJhc2Uuam9pbihuYW1lKSkKCQljYW4udXNlci5pc01vYmlsZSAmJiAobmFtZSArPSAiIG1vYmlsZSIpICYmIGNhbi51c2VyLmlzTGFuZHNjYXBlKCkgJiYgKG5hbWUgKz0gIiBsYW5kc2NhcGUiKQoJCWNhbi51c2VyLmxhbmd1YWdlKGNhbikgJiYgKG5hbWUgKz0gIiAiK2Nhbi51c2VyLmxhbmd1YWdlKGNhbikpCgkJY2FuLkNvbmYoImRpc3BsYXkiKSAmJiAobmFtZSArPSAiICIrY2FuLkNvbmYoImRpc3BsYXkiKSkKCQljYW4udXNlci5tb2QuaXNDbWQgJiYgKG5hbWUgKz0gIiBzaW1wbGUiKQoJCWNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgbmFtZSkKCX0sCglsYW5ndWFnZTogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCAibGFuZ3VhZ2UiKSB9LAoJdHJhbnM6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbGlzdCkgeyBpZiAoY2FuLmJhc2UuaXNPYmplY3QodGV4dCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0odGV4dCwgZnVuY3Rpb24oaywgdikgeyBjYW4uY29yZS5WYWx1ZShjYW4uX3RyYW5zLCBrLCB2KSB9KQoJCX0KCgkJaWYgKGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIikgeyByZXR1cm4gdGV4dCB9CgkJaWYgKGNhbi5iYXNlLmlzRnVuY3Rpb24odGV4dCkpIHsgdGV4dCA9IHRleHQubmFtZXx8IiIgfQoJCXJldHVybiBsaXN0JiZsaXN0W3RleHRdIHx8IGNhbi5Db25mKCJ0cmFucy4iK3RleHQpIHx8IGNhbi5Db25mKCJmZWF0dXJlLl90cmFucy4iK3RleHQpIHx8IGNhbi5fdHJhbnMmJmNhbi5fdHJhbnNbdGV4dF0gfHwgewoJCQkiY3JlYXRlIjogIuWIm+W7uiIsICJyZW1vdmUiOiAi5Yig6ZmkIiwgImluc2VydCI6ICLmt7vliqAiLCAiZGVsZXRlIjogIuWIoOmZpCIsICJtb2RpZnkiOiAi57yW6L6RIiwKCQkJImlucHV0cyI6ICLooaXlhagiLCAicHJ1bmVzIjogIua4heeQhiIsICJleHBvcnQiOiAi5a+85Ye6IiwgImltcG9ydCI6ICLlr7zlhaUiLAoJCQkibGlzdCI6ICLmn6XnnIsiLCAiYmFjayI6ICLov5Tlm54iLCAicnVuIjogIuaJp+ihjCIsICJkb25lIjogIuWujOaIkCIsICJzaGFyZSI6ICLlhbHkuqsiLAoJCQkiZWRpdCI6ICLnvJbovpEiLCAic2F2ZSI6ICLkv53lrZgiLCAiY29weSI6ICLlpI3liLYiLCAic2hvdyI6ICLmmL7npLoiLCAiaGlkZSI6ICLpmpDol48iLAoJCQkicHJvamVjdCI6ICLpobnnm64iLCAicHJvZmlsZSI6ICLor6bmg4UiLCAiYWN0aW9ucyI6ICLlj4LmlbAiLAoJCQkiZG93bmxvYWQiOiAi5LiL6L29IiwgInRvaW1hZ2UiOiAi5oiq5Zu+IiwKCQkJInBsdWdpbiI6ICLmj5Lku7YiLAoJCQkicHJldiI6ICLkuIrkuIDpobUiLCAibmV4dCI6ICLkuIvkuIDpobUiLAoKCQkJIkNsb3NlIjogIuWFs+mXrSIsCgkJCSJDbG9zZSBvdGhlcnMiOiAi5YWz6Zet5YW25a6DIiwKCQkJIkNsb3NlIGFsbCI6ICLlhbPpl63miYDmnIkiLAoKCQkJInRyYXNoIjogIuWIoOmZpCIsCgkJCSJvcGVuIjogIuaJk+W8gCIsICJjbG9zZSI6ICLlhbPpl60iLAoJCQkic3RhcnQiOiAi5ZCv5YqoIiwgInN0b3AiOiAi5YGc5q2iIiwKCQkJImJlZ2luIjogIuW8gOWniyIsICJlbmQiOiAi57uT5p2fIiwKCQkJImNsZWFyIjogIua4heepuiIsICJyZWZyZXNoIjogIuWIt+aWsCIsCgkJCSJzdWJtaXQiOiAi5o+Q5LqkIiwgImNhbmNlbCI6ICLlj5bmtogiLAoJCQkibGFiZWwiOiAi5qCH562+IiwgImV4ZWMiOiAi5omn6KGMIiwKCQl9W3RleHRdfHx0ZXh0Cgl9LAoJdG9hc3RTY3JpcHQ6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUpIHsKCQl2YXIgdWkgPSBjYW4udXNlci50b2FzdChjYW4sIHt0aXRsZTogdGl0bGUsIGR1cmF0aW9uOiAtMSwgd2lkdGg6IC0zMDAsIGNvbnRlbnQ6IGNvbnRlbnQsIGFjdGlvbjogW2NsaS5DTE9TRV19KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdWkuX3RhcmdldCkKCX0sCgl0b2FzdENvbmZpcm06IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUsIGFjdGlvbikgewoJCXJldHVybiBjYW4udXNlci50b2FzdChjYW4sIHt0aXRsZTogdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnQsIGFjdGlvbjogYWN0aW9ufHxbY2xpLkNMT1NFXSwgZHVyYXRpb246IC0xLCB3aWR0aDogLTMwMH0pCgl9LAoJdG9hc3RQcm9jZXNzOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sIGNvbnRlbnQsIHRpdGxlfHxpY2UuUFJPQ0VTUywgLTEpIH0sCgl0b2FzdFN1Y2Nlc3M6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUpIHsgcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgY29udGVudCwgdGl0bGV8fGljZS5TVUNDRVNTKSB9LAoJdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUsIGR1cmF0aW9uLCBwcm9ncmVzcykgewoJCXZhciBtZXRhID0gY2FuLmJhc2UuaXNPYmplY3QoY29udGVudCk/IGNvbnRlbnQ6IHtjb250ZW50OiBjb250ZW50LCB0aXRsZTogdGl0bGV8fGNhbi5faGVscCwgZHVyYXRpb246IGR1cmF0aW9uLCBwcm9ncmVzczogcHJvZ3Jlc3N9CgkJdmFyIHdpZHRoID0gbWV0YS53aWR0aHx8NDAwLCBoZWlnaHQgPSBtZXRhLmhlaWdodHx8MTAwOyBpZiAod2lkdGggPCAwKSB7IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggKyB3aWR0aCB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksICBbe3ZpZXc6IGNoYXQuVE9BU1QsIHN0eWxlOiB7CgkJCWxlZnQ6ICh3aW5kb3cuaW5uZXJXaWR0aC13aWR0aCkvMiwgd2lkdGg6IHdpZHRoLCBib3R0b206IDEwMCwKCQl9LCBsaXN0OiBbCgkJCXt0ZXh0OiBbbWV0YS50aXRsZXx8IiIsIGh0bWwuRElWLCBodG1sLlRJVExFXSwgdGl0bGU6ICLngrnlh7vlpI3liLYiLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBtZXRhLnRpdGxlKQoJCQl9fSwKCQkJe3ZpZXc6ICJkdXJhdGlvbiIsIHRpdGxlOiAi54K55Ye75YWz6ZetIiwgb25jbGljazogZnVuY3Rpb24oKSB7IGFjdGlvbi5jbG9zZSgpIH19LAoJCQljYW4uYmFzZS5pc09iamVjdChtZXRhLmNvbnRlbnQpPyBtZXRhLmNvbnRlbnQ6IHt0ZXh0OiBbbWV0YS5jb250ZW50fHwi5omn6KGM5oiQ5YqfIiwgaHRtbC5ESVYsICJjb250ZW50Il19LAoKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OfSwgbWV0YS5wcm9ncmVzcyAhPSB1bmRlZmluZWQgJiYge3ZpZXc6ICJwcm9ncmVzcyIsIHN0eWxlOiB7d2lkdGg6IHdpZHRofSwgbGlzdDogWwoJCQkJe3ZpZXc6ICJjdXJyZW50Iiwgc3R5bGU6IHt3aWR0aDogKG1ldGEucHJvZ3Jlc3N8fDApLzEwMCp3aWR0aH19LAoJCQldfSwKCQldIH1dKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBtZXRhLmFjdGlvbiAmJiBtZXRhLmFjdGlvbi5saXN0PyBtZXRhLmFjdGlvbi5saXN0OiBtZXRhLmFjdGlvbnx8WyIiXSwgdWkuYWN0aW9uLCB7CgkJCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCXZhciBjYiA9IG1ldGEuYWN0aW9uW2J1dHRvbl18fG1ldGEuYWN0aW9uOyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBidXR0b24pCgkJCX0sCgkJCW9wZW46IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAobWV0YS5jb250ZW50LmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IGNhbi51c2VyLm9wZW4obWV0YS5jb250ZW50KSB9CgkJCQlpZiAobWV0YS50aXRsZS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjYW4udXNlci5vcGVuKG1ldGEudGl0bGUpIH0KCQkJfSwKCQkJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIGFjdGlvbi5fdGFyZ2V0KSwgYWN0aW9uLnRpbWVyLnN0b3AgPSB0cnVlIH0sCgkJCXRpbWVyOiBjYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDEwMCwgbGVuZ3RoOiAocGFyc2VJbnQobWV0YS5kdXJhdGlvbnx8MTAwMCkpLzEwMH0sIGZ1bmN0aW9uKGV2ZW50LCBpbnRlcnZhbCwgaW5kZXgpIHsKCQkJCWlmIChpbmRleCA+IDMwKSB7IHVpLmR1cmF0aW9uLmlubmVySFRNTCA9IHBhcnNlSW50KGluZGV4LzEwKStpY2UuUFQrKGluZGV4JTEwKSsicy4uLiIgfQoJCQl9LCBmdW5jdGlvbigpIHsgYWN0aW9uLmNsb3NlKCkgfSksIF90YXJnZXQ6IHVpLl90YXJnZXQsIHVpOiB1aSwKCQl9KTsgY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuLCB1aS5fdGFyZ2V0KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlRPQVNULCBjYW4ucmVxdWVzdCh7fSwge3RpbWU6IGNhbi5iYXNlLlRpbWUoKSwgdGl0bGU6IG1ldGEudGl0bGUsIGNvbnRlbnQ6IG1ldGEuY29udGVudCwgZmlsZWxpbmU6IGNhbi5taXNjLkZpbGVMaW5lKDIsIDIpfSkpCgkJcmV0dXJuICFtZXRhLmFjdGlvbiAmJiBjYW4ub25tb3Rpb24uZmxvYXQuYWRkKGNhbiwgY2hhdC5UT0FTVCwgYWN0aW9uKSwgYWN0aW9uCgl9LAoJc2hhcmU6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWQpIHsKCQljYW4ucnVuKG1zZywgY21kfHxbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4udXNlci50b2FzdChjYW4sIHsKCQkJCXRpdGxlOiBtc2cuQXBwZW5kKG1kYi5OQU1FKSwgZHVyYXRpb246IC0xLAoJCQkJY29udGVudDogbXNnLkFwcGVuZChtZGIuVEVYVCksIGFjdGlvbjogW2NsaS5DTE9TRSwgY2xpLk9QRU5dLAoJCQl9KSwgY2FuLnVzZXIuY29weShtc2cuX2V2ZW50LCBjYW4sIG1zZy5BcHBlbmQobWRiLk5BTUUpKQoJCX0pCgl9LAoJbG9naW46IGZ1bmN0aW9uKGNhbiwgY2IsIG1ldGhvZCwgYXV0bykgeyBtZXRob2QgPSBjYW4uYmFzZS5PYmoobWV0aG9kLCBbIueZu+W9lSIsICLmiavnoIEiXSkKCQl2YXIgbGlzdCA9IHsKCQkJIueZu+W9lSI6IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIGRhdGEpIHsKCQkJCWNhbi5ydW4oe30sIFthYWEuTE9HSU4sIGRhdGFbaHRtbC5VU0VSTkFNRV0sIGRhdGFbaHRtbC5QQVNTV09SRF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX1VTRVJOQU1FKSkgewoJCQkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+vIikKCQkJCQl9CgkJCQl9KQoJCQkJcmV0dXJuIHRydWUKCQkJfSwgCgkJCSLmiavnoIEiOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgY21kOiAicHdkIn0sIGZ1bmN0aW9uKGV2ZW50LCBtc2csIGNtZCwgYXJnKSB7IGlmICghbXNnKSB7IHJldHVybiB9CgkJCQkJaWYgKGNtZCA9PSAicHdkIikgewoJCQkJCQlyZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCBhcmdbMl0sIGFyZ1sxXSwgLTEpLCBtc2cuUmVwbHkoKQoJCQkJCX0KCQkJCQlpZiAoY21kID09IGljZS5NU0dfU0VTU0lEKSB7CgkJCQkJCXJldHVybiBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBhcmdbMF0pLCBtc2cuUmVwbHkoKSwgY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJCQkJfQoJCQkJCWNhbi5zZWFyY2goZXZlbnQsIG1zZ1tpY2UuTVNHX0RFVEFJTF18fFtdLCBmdW5jdGlvbihtc2cpIHsgbXNnLlJlcGx5KCkgfSkKCQkJCX0pCgkJCX0sCgkJCSLmjojmnYMiOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgY21kOiAic3NvIiwgInVzZXIud2ViIjogbG9jYXRpb24uaHJlZn0sIGZ1bmN0aW9uKGV2ZW50LCBtc2csIGNtZCwgYXJnKSB7IGlmICghbXNnKSB7IHJldHVybiB9CgkJCQkJaWYgKGNtZCA9PSAicHdkIikgewoJCQkJCQlyZXR1cm4gbG9jYXRpb24uaHJlZiA9IGFyZ1sxXQoJCQkJCX0KCQkJCQlpZiAoY21kID09IGljZS5NU0dfU0VTU0lEKSB7CgkJCQkJCXJldHVybiBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBhcmdbMF0pLCBtc2cuUmVwbHkoKSwgY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJCQkJfQoJCQkJCWNhbi5zZWFyY2goZXZlbnQsIG1zZ1tpY2UuTVNHX0RFVEFJTF18fFtdLCBmdW5jdGlvbihtc2cpIHsgbXNnLlJlcGx5KCkgfSkKCQkJCX0pCgkJCX0sCgkJCSLpo57kuaYiOiBmdW5jdGlvbigpIHsgbG9jYXRpb24uaHJlZiA9ICIvY2hhdC9sYXJrL3NzbyIgfSwKCQl9OyBpZiAoYXV0bykgeyByZXR1cm4gbGlzdFsi5o6I5p2DIl0oKSB9IGVsc2UgaWYgKG1ldGhvZC5sZW5ndGggPT0gMSkgeyBsaXN0W21ldGhvZFswXV0oKTsgcmV0dXJuIH0KCgkJdmFyIHVpID0gY2FuLnVzZXIuaW5wdXQoe30sIGNhbiwgW3t0eXBlOiBodG1sLlVTRVJOQU1FfSwge3R5cGU6IGh0bWwuUEFTU1dPUkR9XSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgZGF0YSkgeyByZXR1cm4gbGlzdFtidXR0b25dKGV2ZW50LCBidXR0b24sIGRhdGEpIH0sIG1ldGhvZCkKCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB1aS5fdGFyZ2V0LCB7Y2xhc3NOYW1lOiAiaW5wdXQgbG9naW4iLCBzdHlsZToge2xlZnQ6ICh3aW5kb3cuaW5uZXJXaWR0aC11aS5fdGFyZ2V0Lm9mZnNldFdpZHRoKS8yLCB0b3A6IHdpbmRvdy5pbm5lckhlaWdodC82fX0pCgl9LAoJbG9nb3V0OiBmdW5jdGlvbihjYW4sIGZvcmNlKSB7IGlmIChmb3JjZXx8Y2FuLnVzZXIuY29uZmlybSgibG9nb3V0PyIpKSB7CgkJY2FuLnJ1bkFjdGlvbih7fSwgYWFhLkxPR09VVCwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlNIQVJFKT8gY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TSEFSRSwgIiIpOiBjYW4udXNlci5yZWxvYWQodHJ1ZSkKCQl9KQoJfSB9LAoKCXRvUE5HOiBmdW5jdGlvbihjYW4sIG5hbWUsIHRleHQsIGhlaWdodCwgd2lkdGgpIHsKCQlpZiAodGV4dC5pbmRleE9mKCI8c3ZnIikgIT0gMCkgewoJCQl0ZXh0ID0gJzxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4nK3RleHQrIjwvc3ZnPiIKCQl9CgkJdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaHRtbC5JTUcpCgkJaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewoJCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikKCQkJY2FudmFzLmhlaWdodCA9IGhlaWdodCwgY2FudmFzLndpZHRoID0gd2lkdGgKCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKGltZywgMCwgMCkKCgkJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpCgkJCWEuaHJlZiA9IGNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpCgkJCWEuZG93bmxvYWQgPSBuYW1lLCBhLmNsaWNrKCkKCQl9LCBpbWcuc3JjID0gImRhdGE6aW1hZ2Uvc3ZnK3htbCwiK2VuY29kZVVSSUNvbXBvbmVudCh0ZXh0KQoJfSwKCWNvcHk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRleHQpIHsgaWYgKCF0ZXh0KSB7IHJldHVybiB9CgkJaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHsgdmFyIG9rID0gZmFsc2UKCQkJbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbihmdW5jdGlvbigpIHsgb2sgPSB0cnVlIH0pOyBpZiAob2spIHsKCQkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIHRleHQsICJjb3B5IHN1Y2Nlc3MiKSwgY2FuLm1pc2MuTG9nKCJjb3B5IiwgdGV4dCkKCQkJCXJldHVybiB0ZXh0CgkJCX0KCQl9CgoJCXZhciBpbnB1dCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLCBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIHZhbHVlOiB0ZXh0fV0pLmZpcnN0CgkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgaW5wdXQpLCBkb2N1bWVudC5leGVjQ29tbWFuZCgiQ29weSIpLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCBpbnB1dCkKCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCB0ZXh0LCAiY29weSBzdWNjZXNzIiksIGNhbi5taXNjLkxvZygiY29weSIsIHRleHQpCgkJcmV0dXJuIHRleHQKCX0sCgljYXJ0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgeyAvLyBldmVudCBpdGVtIG1ldGEKCQltZXRhID0gbWV0YXx8Y2FuLm9uZGV0YWlsfHxjYW4ub25hY3Rpb258fHt9LCBsaXN0ID0gbGlzdCYmbGlzdC5sZW5ndGggPiAwPyBsaXN0OiBtZXRhLmxpc3R8fGNhbi5jb3JlLkl0ZW0obWV0YSl8fFtdOyBpZiAobGlzdC5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCWNiID0gY2J8fGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsgdmFyIGNiID0gbWV0YVtidXR0b25dfHxtZXRhWyJfZW5naW5lIl07IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGNhbiwgYnV0dG9uKSB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dmlldzogY2hhdC5DQVJURSwgc3R5bGU6IHtsZWZ0OiAwLCB0b3A6IDB9LCBvbm1vdXNlbGVhdmU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCS8vIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJfSwgbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlyZXR1cm4gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IGl0ZW0gPT0iIj8gLyogc3BhY2UgKi8ge3ZpZXc6ICJzcGFjZSJ9OiAvKiBzdHJpbmcgKi8ge3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0pLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIG1ldGEsIGluZGV4KQoJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhcnRlLl9mbG9hdCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYXJ0ZS5fZmxvYXQuX3RhcmdldCkKCQkJfSB9XSB9OiBjYW4uYmFzZS5pc0FycmF5KGl0ZW0pPyAvKiBhcnJheSAqLyB7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbVswXSkrIiAtPiAifV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciBzdWIgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBtZXRhLCBpdGVtLnNsaWNlKDEpLCBjYiwgY2FydGUpCgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpLCBjYXJ0ZS5fZmxvYXQgPSBzdWIKCQkJCWNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgc3ViLl90YXJnZXQsIHRydWUpCgkJCX0gfTogLyogb2JqZWN0ICovIHt2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogY2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtLm5hbWUpLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0ubmFtZSwgbWV0YSwgaW5kZXgpCgkJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhcnRlLl9mbG9hdCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYXJ0ZS5fZmxvYXQuX3RhcmdldCkKCQkJfSB9XSB9CgkJfSkgfV0gKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQl1aS5fdGFyZ2V0Lm9ubW91c2VvdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQl2YXIgY2FydGUgPSB7X3RhcmdldDogdWkuX3RhcmdldCwgX3BhcmVudDogcGFyZW50LCBsYXlvdXQ6IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCl9CgkJcmV0dXJuIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSwgY2FydGUKCX0sCgljYXJ0ZVJpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KSB7CgkJdmFyIGNhcnRlID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYXJ0ZS5fdGFyZ2V0LCBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIGNhcnRlLl90YXJnZXQsIHRydWUpKSwgY2FydGUKCX0sCgljYXJ0ZUNsaWVudDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgewoJCXZhciB1aSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7bGVmdDogZXZlbnQuY2xpZW50WCwgdG9wOiBldmVudC5jbGllbnRZfSkKCX0sCgoJaW5wdXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGZvcm0sIGNiLCBidXR0b24pIHsgaWYgKCFmb3JtIHx8IGZvcm0ubGVuZ3RoID09IDApIHsgcmV0dXJuIGNiKCkgfQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dmlldzogW2h0bWwuSU5QVVRdLCBzdHlsZToge2xlZnQ6IDAsIHRvcDogMH0sIGxpc3Q6IFsKCQkJe3ZpZXc6ICJjb250ZW50IiwgbGlzdDogW3t2aWV3OiBbaHRtbC5PUFRJT04sIGh0bWwuVEFCTEVdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGZvcm0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWl0ZW0gPSBjYW4uYmFzZS5pc1N0cmluZyhpdGVtKT8ge3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogaXRlbX06IGl0ZW0ubGVuZ3RoID4gMD8ge3R5cGU6IGh0bWwuU0VMRUNULCBuYW1lOiBpdGVtWzBdLCB2YWx1ZXM6IGl0ZW0uc2xpY2UoMSl9OiBpdGVtCgkJCQlpdGVtLnR5cGUgPSBpdGVtLnR5cGV8fChpdGVtLnZhbHVlcz8gaHRtbC5TRUxFQ1Q6IGl0ZW0ubmFtZSA9PSBodG1sLlRFWFQ/IGh0bWwuVEVYVEFSRUE6IGh0bWwuVEVYVCkKCgkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJaXRlbS5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCQkJdmFyIF9tc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFLCBhY3Rpb246IG1zZy5PcHRpb24oaHRtbC5BQ1RJT04pfSwgbXNnLCBjYW4uT3B0aW9uKCkpCgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLnRhYmxlLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpdGVtLm5hbWUgJiYgaXRlbS52YWx1ZSAmJiBfbXNnLk9wdGlvbihpdGVtLm5hbWUsIGl0ZW0udmFsdWUpCgkJCQkJCX0pCgkJCQkJCWNhbi5ydW4oZXZlbnQsIGNtZHMsIGNiLCB0cnVlKQoJCQkJCX0KCgkJCQkJaWYgKGl0ZW0ubmFtZSAhPSAiYWN0aW9uIiAmJiBpdGVtLm5hbWUpIHsKCQkJCQkJdGFyZ2V0LnZhbHVlID0gbXNnLk9wdGlvbihpdGVtLm5hbWUpfHxjYW4uT3B0aW9uKGl0ZW0ubmFtZSl8fHRhcmdldC52YWx1ZXx8IiIKCQkJCQl9CgkJCQkJaXRlbS5tb2RlID0gInNpbXBsZSIKCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuVVNFUk5BTUUpIHsgcmV0dXJuIH0KCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuUEFTU1dPUkQpIHsgcmV0dXJuIH0KCQkJCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KQoJCQkJfQoKCQkJCS8vIHJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRELCBsaXN0OiBbe3RleHQ6IGl0ZW0uX3RyYW5zfHxjYW4udXNlci50cmFucyhjYW4sIGl0ZW0ubmFtZSl8fCIifV19LCB7dHlwZTogaHRtbC5URCwgbGlzdDogW2Nhbi5wYWdlLmlucHV0KGNhbiwgaXRlbSldfSBdfQoJCQkJcmV0dXJuIHt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFt7dGV4dDogaXRlbS5uYW1lfHwiIn1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFtjYW4ucGFnZS5pbnB1dChjYW4sIGl0ZW0pXX0gXX0KCQkJfSl9XX0sIHt2aWV3OiBodG1sLkFDVElPTn0sCgkJXX1dKQoKCQl2YXIgbGF5b3V0ID0gY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCB1aS5fdGFyZ2V0KQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aS5fdGFyZ2V0LCBjaGF0LkZMT0FUKQoKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBidXR0b258fFtodG1sLlNVQk1JVCwgaHRtbC5DQU5DRUxdLCB1aS5hY3Rpb24sIHsKCQkJZm9jdXM6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmZpcnN0LCBodG1sLklOUFVUX0FSR1MpWzBdLmZvY3VzKCkgfSwKCQkJY2FuY2VsOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KSB9LAoJCQlfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgYWN0aW9uLnN1Ym1pdChldmVudCwgY2FuLCBidXR0b24pIH0sCgkJCXN1Ym1pdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBkYXRhID0ge30sIGFyZ3MgPSBbXSwgbGlzdCA9IFtdCgkJCQlsaXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkudGFibGUsIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQlyZXR1cm4gaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgYXJncy5wdXNoKGl0ZW0ubmFtZSwgaXRlbS52YWx1ZSksIGRhdGFbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWUKCQkJCX0pCgkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0pCgkJCQkhY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGJ1dHRvbjogYnV0dG9uLCBkYXRhOiBkYXRhLCBsaXN0OiBsaXN0LCBhcmdzOiBhcmdzfSkgJiYgYWN0aW9uLmNhbmNlbCgpCgkJCQkvLyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmICFjYihldmVudCwgYnV0dG9uLCBkYXRhLCBsaXN0LCBhcmdzKSAmJiBhY3Rpb24uY2FuY2VsKCkKCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBfdGFyZ2V0OiB1aS5fdGFyZ2V0LAoJCX0pCgkJaWYgKGJ1dHRvbiA9PT0gIHRydWUpIHsgcmV0dXJuIGFjdGlvbi5zdWJtaXQoZXZlbnQsIGNhbiwgInN1Ym1pdCIpLCBhY3Rpb24gfQoKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5fdGFyZ2V0LCBodG1sLklOUFVUX0FSR1MsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWluZGV4ID09IDAgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGl0ZW0pIH0pCgkJfSkKCQlyZXR1cm4gYWN0aW9uCgl9LAoJc2VsZWN0OiBmdW5jdGlvbihldmVudCwgY2FuLCB0eXBlLCBmaWVsZHMsIGNiLCBjYnMpIHsKCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWVsZHM6IGZpZWxkc3x8InR5cGUsbmFtZSx0ZXh0In0pCgkJY2FuLnNlYXJjaChtc2csIFsiU2VhcmNoLm9uaW1wb3J0LnNlbGVjdCIsIHR5cGUsICIiLCAiIl0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLmNvcmUuTmV4dChsaXN0LCBjYiwgY2JzfHxmdW5jdGlvbigpIHsKCQkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pCgkJCX0pCgkJfSkKCX0sCgl1cGxvYWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGJlZ2luID0gbmV3IERhdGUoKQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dmlldzogaHRtbC5VUExPQUQsIHN0eWxlOiB7bGVmdDogMCwgdG9wOiAwfSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5BQ1RJT059LCB7dmlldzogaHRtbC5PVVRQVVQsIGxpc3Q6IFt7dmlldzogInByb2dyZXNzIn1dfSwKCQkJe3ZpZXc6IGh0bWwuU1RBVFVTLCBsaXN0OiBbe3ZpZXc6IGh0bWwuU0hPV30sIHt2aWV3OiAiY29zdCJ9LCB7dmlldzogInNpemUifV19LAoJCV19XSk7IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgWwoJCQl7dHlwZTogaHRtbC5VUExPQUQsIG9uY2hhbmdlOiBmdW5jdGlvbihldmVudCkgewoJCQkJYWN0aW9uLnNob3coZXZlbnQsIDAsIGV2ZW50LnRhcmdldC5maWxlc1swXS5zaXplLCAwKQoJCQl9fSwgY2xpLkNMT1NFLAoJCV0sIHVpLmFjdGlvbiwgewoJCQljbG9zZTogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkgfSwKCQkJYmVnaW46IGZ1bmN0aW9uKGV2ZW50KSB7IGJlZ2luID0gbmV3IERhdGUoKQoJCQkJdmFyIHVwbG9hZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmFjdGlvbiwgImlucHV0W3R5cGU9ZmlsZV0iKQoJCQkJaWYgKHVwbG9hZFswXS5maWxlcy5sZW5ndGggPT0gMCkgeyByZXR1cm4gdXBsb2FkWzBdLmZvY3VzKCkgfQoKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpLCB7X2hhbmRsZTogInRydWUifSkKCQkJCW1zZy5fdXBsb2FkID0gdXBsb2FkWzBdLmZpbGVzWzBdLCBtc2cuX3Byb2dyZXNzID0gYWN0aW9uLnNob3cKCgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBodG1sLlVQTE9BRCwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pLCBjYW4uVXBkYXRlKCksIGFjdGlvbi5jbG9zZSgpCgkJCQl9KQoJCQl9LAoJCQlzaG93OiBmdW5jdGlvbiAoZXZlbnQsIHZhbHVlLCB0b3RhbCwgbG9hZGVkKSB7IG5vdyA9IG5ldyBEYXRlKCkKCQkJCXZhbHVlID09IDAgJiYgYWN0aW9uLmJlZ2luKGV2ZW50KQoKCQkJCXVpLnNob3cuaW5uZXJIVE1MID0gdmFsdWUrIiUiCgkJCQl1aS5jb3N0LmlubmVySFRNTCA9IGNhbi5iYXNlLkR1cmF0aW9uKG5vdyAtIGJlZ2luKQoJCQkJdWkuc2l6ZS5pbm5lckhUTUwgPSBjYW4uYmFzZS5TaXplKGxvYWRlZCkraWNlLlBTK2Nhbi5iYXNlLlNpemUodG90YWwpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLnByb2dyZXNzLCB7d2lkdGg6IHZhbHVlKih1aS5vdXRwdXQub2Zmc2V0V2lkdGgtMikvMTAwfSkKCQkJfSwKCQl9KTsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuYWN0aW9uLCAiaW5wdXRbdHlwZT1maWxlXSIpWzBdLmNsaWNrKCkKCgkJcmV0dXJuIGFjdGlvbgoJfSwKCWRvd25sb2FkOiBmdW5jdGlvbihjYW4sIHBhdGgsIG5hbWUsIGV4dCkgewoJCXZhciBhID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZG9jdW1lbnQuYm9keSwgW3t0eXBlOiBodG1sLkEsIGhyZWY6IHBhdGgsIGRvd25sb2FkOiBjYW4uY29yZS5LZXlzKG5hbWUsIGV4dCl8fHBhdGguc3BsaXQoaWNlLlBTKS5wb3AoKX1dKS5maXJzdAoJCWEuY2xpY2soKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgYSkKCQlyZXR1cm4gcGF0aAoJfSwKCWRvd25sb2FkczogZnVuY3Rpb24oY2FuLCB0ZXh0LCBuYW1lLCBleHQpIHsgaWYgKCF0ZXh0KSB7IHJldHVybiB9CgkJcmV0dXJuIGNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbdGV4dF0pKSwgbmFtZSwgZXh0KQoJfSwKCWNhbWVyYTogZnVuY3Rpb24oY2FuLCBtc2csIGNiKSB7CgkJbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7dmlkZW86IHRydWV9LCBjYiwgZnVuY3Rpb24oZXJyb3IpIHsKCQkJY2FuLm1pc2MuTG9nKGVycm9yKQoJCX0pCgl9LAoJbG9jYWxTdG9yYWdlOiBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsKCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKSB9CgkJcmV0dXJuIGNhbi5iYXNlLk9iaihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpLCB7fSkKCX0sCn0pCg==",
        "usr/volcanos/page/cache.css": "LyogL3BhbmVsL2FjdGlvbi5jc3MgKi8KZmllbGRzZXQuQWN0aW9uIHsgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDExNCwgMTUzLCAxNjIsIDAuNTQpOyBtaW4td2lkdGg6MTYwcHg7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2Yjsgd2lkdGg6aW5oZXJpdDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQ6IzY0OTVlZDYzOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZDojNjQ5NWVkNjM7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dD5maWVsZHNldD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4uc2VsZWN0IHsgZGlzcGxheTpibG9jazsgfQoKZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzphdXRvOyB9CgpmaWVsZHNldC5BY3Rpb24uZnJlZT5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHBvc2l0aW9uOmFic29sdXRlOyB9CmZpZWxkc2V0LkFjdGlvbi5mcmVlPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luLnNlbGVjdCB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLmZsb3c+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5wYW5lbC5jbWQ+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4geyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmZpZWxkc2V0LnBhbmVsLmNtZD5kaXYub3V0cHV0PmZpZWxkc2V0LnBsdWdpbj5sZWdlbmQgeyBwYWRkaW5nOjAgMTBweDsgbWFyZ2luLXJpZ2h0OjNweDsgZmxvYXQ6bGVmdDsgfQoKZmllbGRzZXQuQWN0aW9uPmRpdi5wcm9qZWN0LnRvZ2dsZSB7CgliYWNrZ3JvdW5kLWNvbG9yOmNvcm5zaWxrOyBvcGFjaXR5OjAuNDsgY29sb3I6dGVhbDsgZm9udC1zaXplOiAyOHB4OyBwYWRkaW5nLXRvcDogNTBweDsgaGVpZ2h0OiAxMDBweDsgd2lkdGg6MjBweDsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDMwJTsKCWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjIwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjIwcHg7Cn0KCmRpdi5oZWFkIHsgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHg7IGhlaWdodDo0MnB4OyBjbGVhcjpib3RoOyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSB7IGZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgZGl2Lm5hbWUgeyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmhlYWQgZGl2LnVzZXJuYW1lIGRpdi5pY29uIHsgZmxvYXQ6bGVmdDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgaW1nIHsgaGVpZ2h0OjQycHg7IH0KZGl2LmhlYWQgZGl2Lm1lbnUgeyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoxMHB4OyBmbG9hdDpsZWZ0OyB9CmRpdi5oZWFkPmRpdi5tZW51OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB9CmRpdi5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB3aWR0aDoxNjBweDsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmRpdi5sZWZ0IGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgfQpkaXYubGVmdCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgfQpkaXYubGVmdCBkaXYudXNlcm5hbWUgZGl2IHsgY29sb3I6d2hpdGU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmxlZnQgZGl2LnVzZXJuYW1lIGltZyB7IHdpZHRoOjEyMHB4OyB9CmRpdi5tYWluIGlmcmFtZSB7IGJvcmRlcjowOyB9CmRpdi5tYWluIGlucHV0W3R5cGU9YnV0dG9uXSB7IHBhZGRpbmc6MCAyMHB4OyB9CmRpdi5tYWluIHsgYmFja2dyb3VuZC1jb2xvcjojY2NjY2NjOyBjb2xvcjpibGFjazsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGxlZ2VuZCB7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gc2VsZWN0IHsgb3V0bGluZTpub25lOyBib3gtc2hhZG93Om5vbmU7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGZvcm0ub3B0aW9uIHsgZGlzcGxheTpibG9jazsgY2xlYXI6Ym90aDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gZm9ybS5vcHRpb24gZGl2Lml0ZW0geyBtYXJnaW46NXB4OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBkaXYuYWN0aW9uIGRpdi5pdGVtIHsgbWFyZ2luOjVweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gdGFibGUuY29udGVudCB0ciB7IGJvcmRlcjpzb2xpZCAxcHggbGlnaHRncmF5OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyBwYWRkaW5nOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmZvb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjQycHg7IGNsZWFyOmJvdGg7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIHsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMHB4OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBkaXYubmFtZSB7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuZm9vdCBkaXYudXNlcm5hbWUgZGl2Lmljb24geyBmbG9hdDpsZWZ0OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBpbWcgeyBoZWlnaHQ6NDJweDsgfQpkaXYuZm9vdCBkaXYubWVudSB7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmZvb3Q+ZGl2Lm1lbnU6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IH0KCmRpdi50YWJzOmhvdmVyIHsKCWJhY2tncm91bmQtY29sb3I6IzI3MjcyNzsKfQpkaXYudGFicyBkaXYubmFtZSB7CgloZWlnaHQ6NDZweDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKCXBvc2l0aW9uOnN0aWNreTsgdG9wOjVweDsKCXotaW5kZXg6MTsKfQpkaXYudGFicyBkaXYubmFtZSBkaXYuaXRlbSB7Cgljb2xvcjpncmF5OyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY29sb3I6d2hpdGU7CiAJYm9yZGVyLWJvdHRvbTpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzIGRpdi5wYWdlIHsKCW92ZXJmbG93OmF1dG87IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IHsKCXBhZGRpbmc6NXB4OyBwb3NpdGlvbjpzdGlja3k7IHRvcDowcHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IGlucHV0IHsKCWJhY2tncm91bmQtY29sb3I6IzIxMjEyMTsgY29sb3I6d2hpdGU7IGJvcmRlcjowOyBvdXRsaW5lOm5vbmU7IHdpZHRoOjIzMHB4Owp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5pdGVtIHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY2xlYXI6Ym90aDsgZGlzcGxheTpub25lOwp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5saXN0IHsKCXBhZGRpbmctbGVmdDoyMHB4OyBkaXNwbGF5Om5vbmU7IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lmxpc3Quc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzMyMzIzMjsgZGlzcGxheTpibG9jazsKfQpkaXYubGVmdCBkaXYubGlzdCB7CglwYWRkaW5nLWxlZnQ6MjBweDsKfQoKZGl2LnRhYnMubGVmdCBkaXYubmFtZSB7CglmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0gewoJYm9yZGVyLWJvdHRvbTpub25lOyBmbG9hdDpub25lOwp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJvcmRlci1yaWdodDpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2UgewoJd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKIAljbGVhcjpub25lOyBmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2U+ZGl2Lml0ZW0gewoJZGlzcGxheTpibG9jazsKfQoKZGl2LnRhYnMudm9pZCBkaXYubmFtZSB7CglkaXNwbGF5Om5vbmU7Cn0KZGl2LnRhYnMudm9pZCBkaXYucGFnZT5kaXYuaXRlbSB7CglkaXNwbGF5OmJsb2NrOwp9CgoKLyogL3BhbmVsL2Zvb3Rlci5jc3MgKi8KZmllbGRzZXQuRm9vdGVyIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzowIDVweDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCB7IG92ZXJmbG93OmhpZGRlbjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYgeyBwYWRkaW5nOjVweDsgaGVpZ2h0OjIxcHg7IGN1cnNvcjpwb2ludGVyOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzJlNTE1ZjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYudGl0bGUgeyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdi5zdGF0ZSB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LnRvYXN0IHsgYmFja2dyb3VuZC1jb2xvcjpkYXJrY3lhbjsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LmNtZCB7IHBhZGRpbmc6MHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGlucHV0W25hbWU9Y21kXSB7IHdpZHRoOjEyMHB4OyBib3JkZXItcmFkaXVzOjA7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgaW5wdXRbbmFtZT1jbWRdOmZvY3VzIHsgd2lkdGg6MzIwcHg7IH0KCi8qIC9wYW5lbC9oZWFkZXIuY3NzICovCmZpZWxkc2V0LkhlYWRlciB7IGZvbnQtc2l6ZToxLjFyZW07IGhlaWdodDozMXB4OyBvdmVyZmxvdzphdXRvOyBwYWRkaW5nOjAgNXB4OyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IHsgb3ZlcmZsb3c6aGlkZGVuOyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdiB7IHBhZGRpbmc6NXB4OyBoZWlnaHQ6MjFweDsgZmxvYXQ6bGVmdDsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMmU1MTVmOyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi50aXRsZSB7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlIHsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlLmF2YXRhciB7IHBhZGRpbmc6MDsgaGVpZ2h0OjMxcHg7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlLmF2YXRhcj5pbWcgeyBoZWlnaHQ6MzFweDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc2VhcmNoIHsgbWFyZ2luLWxlZnQ6MjBweDsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc2VhcmNoPmlucHV0IHsgbWFyZ2luLXRvcDotNXB4OyBib3JkZXItcmFkaXVzOjA7IH0KCgovKiAvcGFuZWwvcml2ZXIuY3NzICovCmZpZWxkc2V0LlJpdmVyIHsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5SaXZlcj5kaXYuYWN0aW9uIHsgZGlzcGxheTpibG9jazsgcGFkZGluZzowIDEycHg7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCB7IHdpZHRoOjE4MHB4OyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lml0ZW0geyBwYWRkaW5nOjNweCAxNnB4OyBib3JkZXItbGVmdDpzb2xpZCAzcHggIzAwZmZhZTsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IGRpdi5pdGVtIHsgYm9yZGVyLWxlZnQ6c29saWQgM3B4ICNjY2RjNGM7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYubGlzdCB7IHBhZGRpbmctbGVmdDo1cHg7IG1hcmdpbi1sZWZ0OjhweDsgfQoKLyogL3BhbmVsL3NlYXJjaC5jc3MgKi8KZmllbGRzZXQuU2VhcmNoIHsgYmFja2dyb3VuZDojMDQxYTI1YmQ7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MHB4OyB0b3A6MzFweDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LlNlYXJjaCBpbnB1dC53b3JkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2g+ZGl2LnN0YXR1cyB7IGJvcmRlci10b3A6MXB4IHNvbGlkIGRhcmtjeWFuOyB9CgovKiAvcGx1Z2luL2xvY2FsL2NoYXQvZGl2LmNzcyAqLwpmaWVsZHNldC5sYXlvdXQgbGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmxheW91dCBmaWVsZHNldC5wbHVnaW4geyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CgpmaWVsZHNldC5kaXYgZGl2Lm91dHB1dCB0ZCB7IHZlcnRpY2FsLWFsaWduOnRvcDsgfQpmaWVsZHNldC5kaXYgZGl2Lm91dHB1dCBmaWVsZHNldC5zcGFuPmRpdi5vdXRwdXQ+ZmllbGRzZXQgeyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5mb3JtLm9wdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXYgZGl2LnByb2plY3QgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2IGRpdi5wcm9maWxlIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5kaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CgoKLyogL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyLmNzcyAqLwpmaWVsZHNldC5pbm5lcj5mb3JtLm9wdGlvbiBpbnB1dFtuYW1lPXBhdGhdIHsgd2lkdGg6ODBweDsgfQpmaWVsZHNldC5pbm5lcj5mb3JtLm9wdGlvbiBpbnB1dFtuYW1lPWZpbGVdIHsgd2lkdGg6MTYwcHg7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LmFjdGlvbj5kaXYudGFicyB7IHBhZGRpbmc6NXB4OyBtYXJnaW46MCAxcHg7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LmFjdGlvbj5kaXYudGFiczpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5hY3Rpb24+ZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IH0KCmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudCB7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjp3aGl0ZTsgZm9udC1zaXplOjE2cHg7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgcG9zaXRpb246cmVsYXRpdmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC5saW5lIHsgcG9zaXRpb246c3RpY2t5OyBsZWZ0OjA7IHRleHQtYWxpZ246cmlnaHQ7IHBhZGRpbmc6MCA2cHg7IGJvcmRlci1yaWdodDpzb2xpZCAycHggcmVkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHRkLmxpbmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiM2NDk1ZWQ2MzsgYm9yZGVyOnNvbGlkIDFweCByZWQ7IGJvcmRlci1yaWdodDpzb2xpZCAycHggcmVkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCB7IHdoaXRlLXNwYWNlOnByZTsgcGFkZGluZy1sZWZ0OjEwcHg7IGN1cnNvcjp0ZXh0OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmNvbW1lbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IGNvbG9yOmN5YW47IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4ua2V5d29yZCB7IGNvbG9yOnllbGxvdzsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5kYXRhdHlwZSB7IGNvbG9yOmdyZWVuOyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmZ1bmN0aW9uIHsgY29sb3I6Y3lhbjsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5jb25zdGFudCB7IGNvbG9yOm1hZ2VudGE7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uc3RyaW5nIHsgY29sb3I6bWFnZW50YTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQgaWZyYW1lIHsgYm9yZGVyOjA7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5wcm9maWxlIGlmcmFtZSB7IGJvcmRlcjowOyB9CgpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi5wYXRoIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlubmVyIGRpdi5vdXRwdXQgZmllbGRzZXQudG9vbGtpdCB7IHBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MHB4OyByaWdodDowcHg7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBmaWVsZHNldC50b29sa2l0PmRpdi5vdXRwdXQ+ZmllbGRzZXQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBmaWVsZHNldC50b29sa2l0PmRpdi5vdXRwdXQ+ZmllbGRzZXQuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMGUzMzY5YjM7IGNvbG9yOndoaXRlOyBkaXNwbGF5OmJsb2NrOyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kIHsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpncmVlbjsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyB7IGhlaWdodDozMXB4OyBvdmVyZmxvdzphdXRvOyB9Cgpib2R5LndoaXRlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LmlubmVyLmZsb2F0PmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjp3aGl0ZTsgfQpib2R5LmJsYWNrIGZpZWxkc2V0LmlubmVyLmZsb2F0PmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjp3aGl0ZTsgfQoKYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBwYWRkaW5nOjBweDsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBmb250LWZhbWlseTptb25vc3BhY2U7IHBhZGRpbmc6N3B4IDIwcHg7IGhlaWdodDoxN3B4OyBmbG9hdDpsZWZ0OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicy5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYucGF0aCB7IGJhY2tncm91bmQtY29sb3I6IzFkMzM0OTsgcGFkZGluZzo0cHggMTBweDsgbWFyZ2luLWJvdHRvbTo0cHg7IGRpc3BsYXk6YmxvY2s7IGNsZWFyOmJvdGg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC5saW5lIHsgcGFkZGluZy10b3A6NHB4OyBib3JkZXItcmlnaHQ6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgeyBwYWRkaW5nLXRvcDoycHg7IGJvcmRlcjpzb2xpZCAxcHggdHJhbnNwYXJlbnQ7IH0KCmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnByb2plY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYucHJvamVjdC50b2dnbGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5wcm9qZWN0IGRpdi5pdGVtIHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IGJveC1zaGFkb3c6MHB4IDBweCA1cHggMXB4IGdyZXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi5wYXRoIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB0ZC5saW5lIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB0ZC50ZXh0IHsgYm9yZGVyOnNvbGlkIDFweCBsaWdodGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uc3RyaW5nIHsgY29sb3I6cm95YWxibHVlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmZ1bmN0aW9uIHsgY29sb3I6ZGFya3JlZDsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5rZXl3b3JkIHsgY29sb3I6Ymx1ZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZCB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyBjb2xvcjpibGFjazsgcGFkZGluZzowcHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgMnB4IHJlZDsgaGVpZ2h0OjMwcHg7IGZsb2F0OnJpZ2h0OyBib3JkZXItcmFkaXVzOjA7IGJveC1zaGFkb3c6bm9uZTsgfQoKYm9keS5tb2JpbGUgZmllbGRzZXQuaW5uZXI+Zm9ybS5vcHRpb24gaW5wdXRbbmFtZT1maWxlXSB7IHdpZHRoOjkwcHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQucGx1Z2luLmlubmVyIGRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LnBsdWdpbi5pbm5lciBkaXYuYWN0aW9uIHsgZGlzcGxheTpjb250ZW50czsgfQoKYm9keS5tb2JpbGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRibHVlOyB3aWR0aDozMHB4OyB9CmJvZHkubW9iaWxlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi50b2dnbGUuZGlzcGxheSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRibHVlOyBtYXJnaW4tdG9wOi0zM3B4OyBoZWlnaHQ6MzBweDsgd2lkdGg6MTAwcHg7IH0KCi51bnNlbGVjdGFibGUgewoJLXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7Cgktd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7Cgkta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTsKCS1tb3otdXNlci1zZWxlY3Q6bm9uZTsKCS1tcy11c2VyLXNlbGVjdDpub25lOwoJLW8tdXNlci1zZWxlY3Q6bm9uZTsKCXVzZXItc2VsZWN0Om5vbmU7Cn0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6bGlnaHRncmF5OyB9CgovKiAvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvaW5uZXIuY3NzICovCgovKiAvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuY3NzICovCmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudCB7CgliYWNrZ3JvdW5kLWNvbG9yOiMwMDAwMDAwMDsgY29sb3I6IzAwMDAwMDAwOyBmb250LXNpemU6MWVtOyBmb250LWZhbWlseTptb25vc3BhY2U7CglwYWRkaW5nOjA7IHBhZGRpbmctbGVmdDoxMnB4OyBib3JkZXI6bm9uZTsgb3V0bGluZTpub25lOyBtYXJnaW46MDsgbWFyZ2luLXRvcDotM3B4OwogCWhlaWdodDoyMnB4OyBwb3NpdGlvbjphYnNvbHV0ZTsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQubm9ybWFsIHsgY2FyZXQtY29sb3I6Z3JheTsgfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQuaW5zZXJ0IHsgY2FyZXQtY29sb3I6eWVsbG93OyB9CgpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB7CgloZWlnaHQ6MjBweDsgcG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6MzJweDsgbWFyZ2luLXRvcDoyMHB4OwoJZGlzcGxheTpub25lOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlLmluc2VydCB7CglkaXNwbGF5OmJsb2NrOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIGRpdi5wcmUgewoJZm9udC1zaXplOjEuMXJlbTsgY29sb3I6I2YwZjhmZjAwOyBtYXJnaW4tbGVmdDo1cHg7IGZsb2F0OmxlZnQ7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgdGFibGUgewoJYmFja2dyb3VuZDpsaWdodGJsdWU7IG1heC1oZWlnaHQ6NDAwcHg7IG1heC13aWR0aDo4MDBweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRoIHsKCWRpc3BsYXk6bm9uZTsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRkIHsKCWZvbnQtc2l6ZToxLjFyZW07Cn0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIGRpdi5wcmUgewoJZm9udC1zaXplOjFyZW07Cn0KYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgdGFibGUuY29udGVudCB0ZCB7Cglmb250LXNpemU6MXJlbTsKfQoKYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50IHsKIAltYXJnaW4tdG9wOjFweDsKfQpib2R5LndoaXRlIGZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5pbnNlcnQgeyBjYXJldC1jb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5ub3JtYWwgeyBjYXJldC1jb2xvcjpsaWdodGdyYXk7IH0KCmRpdi5wcm9qZWN0IGRpdi56b25lLmNyZWF0ZT5kaXYubGlzdCBkaXYuaXRlbSB7IHBhZGRpbmc6NXB4OyBmbG9hdDpsZWZ0OyBjbGVhcjpub25lOyB9CmRpdi5wcm9qZWN0IGRpdi56b25lLmNyZWF0ZT5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CgovKiAvcGx1Z2luL2xvY2FsL3RlYW0vcGxhbi5jc3MgKi8KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIHsgdmVydGljYWwtYWxpZ246dG9wOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCB0ZC5vdmVyIHsgYm9yZGVyOnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIGRpdi5kYXRlIHsgY29sb3I6Z3JheTsgfQpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgZGl2LnByZXBhcmUgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYucHJvY2VzcyB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuY2FuY2VsIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuZmluaXNoIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBjb2xvcjp3aGl0ZTsgfQoKLyogL3BsdWdpbi9sb2NhbC93aWtpL2RhdGEuY3NzICovCmZpZWxkc2V0LmRhdGEgZGl2Lm91dHB1dCB0YWJsZS5jb250ZW50IHRyLnNlbGVjdCB7CgliYWNrZ3JvdW5kLWNvbG9yOmdyYXk7Cn0KZmllbGRzZXQuZGF0YSBkaXYub3V0cHV0IHRhYmxlLmNvbnRlbnQgdHIub3ZlciB7CgliYWNrZ3JvdW5kLWNvbG9yOmdyYXk7Cn0KCi8qIC9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmNzcyAqLwpmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjViNzM4YzsgZm9udC1zaXplOjIwcHg7IH0KZmllbGRzZXQuZHJhdyBkaXYub3V0cHV0IGRpdi5jb250ZW50IHN2ZyB7IGJhY2tncm91bmQtY29sb3I6IzFiNWI3MzhjOyB9CgovKiAvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9kcmF3LmNzcyAqLwoKLyogL3BsdWdpbi9sb2NhbC93aWtpL2ZlZWwuY3NzICovCmZpZWxkc2V0LmZlZWwgZGl2Lm91dHB1dCBpbWcgeyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LmZlZWwgZGl2Lm91dHB1dCB2aWRlbyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuZmVlbC5mbG9hdCBkaXYub3V0cHV0IGltZyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0Om5vbmU7IG1hcmdpbjphdXRvOyB9CmZpZWxkc2V0LmZlZWwuZmxvYXQgZGl2Lm91dHB1dCB2aWRlbyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0Om5vbmU7IG1hcmdpbjphdXRvOyB9CgovKiAvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5jc3MgKi8KZmllbGRzZXQud29yZCBmb3JtLm9wdGlvbiBpbnB1dFtuYW1lPXBhdGhdIHsgd2lkdGg6MTI3cHg7IH0KCmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgeyBiYWNrZ3JvdW5kLWNvbG9yOmluaGVyaXQ7IG92ZXJmbG93OmF1dG87IG1pbi13aWR0aDoxMjBweDsgY2xlYXI6Ym90aDsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IGRpdi5saXN0IHsgbWFyZ2luLWxlZnQ6MjBweDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNGVtOyBmb250LXdlaWdodDpib2xkOyBmb250LWZhbWlseTpjdXJzaXZlOyBwYWRkaW5nOjRweCAyMHB4OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnU+ZGl2Lml0ZW0geyBmb250LXNpemU6MS42ZW07IH0KCmZpZWxkc2V0LndvcmQgYSB7IHdvcmQtYnJlYWs6YnJlYWstYWxsOyB9CmZpZWxkc2V0LndvcmQgYnIuc3RvcnkgeyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnkgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeSBsaS5IMiB7IGZvbnQtc2l6ZToxLjRlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5IGxpLkgzIHsgZm9udC1zaXplOjEuMmVtOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnlbZGF0YS10eXBlPXByZW1lbnVdIHsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9cHJlbWVudV0gbGk6aG92ZXIgeyBiYWNrZ3JvdW5kOmN5YW47IGNvbG9yOmJsdWU7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9ZW5kbWVudV0geyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LndvcmQgcC5zdG9yeVtkYXRhLW5hbWU9aW5uZXJdIHsgYmFja2dyb3VuZC1jb2xvcjojNGI2YzhhN2E7IHBhZGRpbmc6NHB4IDEwcHg7IGJvcmRlci1sZWZ0OnNvbGlkIDRweCBibHVlOyBtYXJnaW46MTBweCAwcHg7IH0KZmllbGRzZXQud29yZCBwLnN0b3J5W2RhdGEtbmFtZT1pbm5lcl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjMTBjOGE7IGN1cnNvcjpjb3B5OyB9CmZpZWxkc2V0LndvcmQgZmllbGRzZXQuc3RvcnkgeyBtYXJnaW46MTBweDsgfQpmaWVsZHNldC53b3JkIGZpZWxkc2V0LnN0b3J5LmZ1bGwgeyBtYXJnaW46MHB4OyB9CgpmaWVsZHNldC53b3JkLmZsb2F0IHsgcGFkZGluZzowOyBtYXJnaW46MDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MDsgdG9wOjA7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYuYWN0aW9uIHsgZGlzcGxheTpjb250ZW50czsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5zdGF0dXMgeyBjbGVhcjpub25lOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2Lm91dHB1dCB7IGJhY2tncm91bmQtY29sb3I6I2YwZjhmZjgwOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93OmF1dG87IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgYmFja2dyb3VuZDojNDY4MmI0NmI7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IHJpZ2h0OjA7IHRvcDozMXB4OyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQgZGl2LnBhZ2UgeyBtYXJnaW4tdG9wOjMxcHg7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGRpdi5jb250ZW50IGRpdi5wYWdlLnNob3cgeyBkaXNwbGF5OmJsb2NrOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQuZ3JpZCBkaXYucGFnZSB7IGJhY2tncm91bmQtY29sb3I6I2E0Y2JlY2I1OyBtYXJnaW46MTBweDsgaGVpZ2h0OjIwMHB4OyB3aWR0aDoyMDBweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGgxIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KZmllbGRzZXQud29yZC5mbG9hdCBoMiB7IHRleHQtYWxpZ246Y2VudGVyOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgaDMgeyB0ZXh0LWFsaWduOmNlbnRlcjsgfQoKZmllbGRzZXQud29yZC5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQoKZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubWVudSB7IGZsb2F0OmxlZnQ7IG92ZXJmbG93OmF1dG87IH0KZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubGlzdCB7IGZsb2F0OmxlZnQ7IG92ZXJmbG93OmF1dG87IH0KZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubWVudSBkaXYubGlzdCBkaXYuaXRlbSB7IHBhZGRpbmc6MCAyMHB4OyB9CgpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9c2hlbGxdIGxhYmVsIHsKCS1tb3otdXNlci1zZWxlY3Q6bm9uZTsgLyrngavni5AqLwoJLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOyAvKndlYmtpdOa1j+iniOWZqCovCgktbXMtdXNlci1zZWxlY3Q6bm9uZTsgLypJRTEwKi8KCS1raHRtbC11c2VyLXNlbGVjdDpub25lOyAvKuaXqeacn+a1j+iniOWZqCovCgl1c2VyLXNlbGVjdDpub25lOwp9CgoKLyogL3BsdWdpbi9zdG9yeS9mb3JtLmNzcyAqLwpkaXYub3V0cHV0LmZvcm0gZGl2Lml0ZW0gewoJcGFkZGluZzo0MHB4Owp9CgovKiAvcGx1Z2luL3N0b3J5L2pzb24uY3NzICovCmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzAwMDA7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIGRpdi5pdGVtIHsgcGFkZGluZy1sZWZ0OjE1cHg7IGJvcmRlcjpzb2xpZCAxcHggIzAwMDAwMDBkOyBib3JkZXItbGVmdDpkYXNoZWQgMXB4IGxpZ2h0Ymx1ZTsgbWFyZ2luLWxlZnQ6NXB4OyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBkaXYuaXRlbTpob3ZlciB7IGJvcmRlcjpzb2xpZCAxcHggcmVkOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6IzljYmVjYTRmOyBjdXJzb3I6cG9pbnRlcjsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5rZXkgeyBjb2xvcjp5ZWxsb3c7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4uc3RyaW5nIHsgY29sb3I6bWFnZW50YTsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5jb25zdCB7IGNvbG9yOmN5YW47IH0KCgovKiAvcGx1Z2luL3N0b3J5L3NwaWRlLmNzcyAqLwpmaWVsZHNldC5kcmF3LnNwaWRlIGRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGRpc3BsYXk6bm9uZTsgfQoKLyogL3BsdWdpbi9zdG9yeS90cmVuZC5jc3MgKi8KZmllbGRzZXQuZHJhdy50cmVuZCBkaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5Om5vbmU7IH0KCgovKiAvcmVxdWlyZS9ub2RlX21vZHVsZXMveHRlcm0vY3NzL3h0ZXJtLmNzcyAqLwovKioKICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGpqL3Rlcm0uanMKICogQGxpY2Vuc2UgTUlUCiAqCiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwogKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogKgogKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICoKICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQogKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KICogVEhFIFNPRlRXQVJFLgogKgogKiBPcmlnaW5hbGx5IGZvcmtlZCBmcm9tICh3aXRoIHRoZSBhdXRob3IncyBwZXJtaXNzaW9uKToKICogICBGYWJyaWNlIEJlbGxhcmQncyBqYXZhc2NyaXB0IHZ0MTAwIGZvciBqc2xpbnV4OgogKiAgIGh0dHA6Ly9iZWxsYXJkLm9yZy9qc2xpbnV4LwogKiAgIENvcHlyaWdodCAoYykgMjAxMSBGYWJyaWNlIEJlbGxhcmQKICogICBUaGUgb3JpZ2luYWwgZGVzaWduIHJlbWFpbnMuIFRoZSB0ZXJtaW5hbCBpdHNlbGYKICogICBoYXMgYmVlbiBleHRlbmRlZCB0byBpbmNsdWRlIHh0ZXJtIENTSSBjb2RlcywgYW1vbmcKICogICBvdGhlciBmZWF0dXJlcy4KICovCgovKioKICogIERlZmF1bHQgc3R5bGVzIGZvciB4dGVybS5qcwogKi8KCi54dGVybSB7CiAgICBjdXJzb3I6IHRleHQ7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7Cn0KCi54dGVybS5mb2N1cywKLnh0ZXJtOmZvY3VzIHsKICAgIG91dGxpbmU6IG5vbmU7Cn0KCi54dGVybSAueHRlcm0taGVscGVycyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICAvKioKICAgICAqIFRoZSB6LWluZGV4IG9mIHRoZSBoZWxwZXJzIG11c3QgYmUgaGlnaGVyIHRoYW4gdGhlIGNhbnZhc2VzIGluIG9yZGVyIGZvcgogICAgICogSU1FcyB0byBhcHBlYXIgb24gdG9wLgogICAgICovCiAgICB6LWluZGV4OiA1Owp9CgoueHRlcm0gLnh0ZXJtLWhlbHBlci10ZXh0YXJlYSB7CiAgICBwYWRkaW5nOiAwOwogICAgYm9yZGVyOiAwOwogICAgbWFyZ2luOiAwOwogICAgLyogTW92ZSB0ZXh0YXJlYSBvdXQgb2YgdGhlIHNjcmVlbiB0byB0aGUgZmFyIGxlZnQsIHNvIHRoYXQgdGhlIGN1cnNvciBpcyBub3QgdmlzaWJsZSAqLwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgb3BhY2l0eTogMDsKICAgIGxlZnQ6IC05OTk5ZW07CiAgICB0b3A6IDA7CiAgICB3aWR0aDogMDsKICAgIGhlaWdodDogMDsKICAgIHotaW5kZXg6IC01OwogICAgLyoqIFByZXZlbnQgd3JhcHBpbmcgc28gdGhlIElNRSBhcHBlYXJzIGFnYWluc3QgdGhlIHRleHRhcmVhIGF0IHRoZSBjb3JyZWN0IHBvc2l0aW9uICovCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHJlc2l6ZTogbm9uZTsKfQoKLnh0ZXJtIC5jb21wb3NpdGlvbi12aWV3IHsKICAgIC8qIFRPRE86IENvbXBvc2l0aW9uIHBvc2l0aW9uIGdvdCBtZXNzZWQgdXAgc29tZXdoZXJlICovCiAgICBiYWNrZ3JvdW5kOiAjMDAwOwogICAgY29sb3I6ICNGRkY7CiAgICBkaXNwbGF5OiBub25lOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIHotaW5kZXg6IDE7Cn0KCi54dGVybSAuY29tcG9zaXRpb24tdmlldy5hY3RpdmUgewogICAgZGlzcGxheTogYmxvY2s7Cn0KCi54dGVybSAueHRlcm0tdmlld3BvcnQgewogICAgLyogT24gT1MgWCB0aGlzIGlzIHJlcXVpcmVkIGluIG9yZGVyIGZvciB0aGUgc2Nyb2xsIGJhciB0byBhcHBlYXIgZnVsbHkgb3BhcXVlICovCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOwogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwogICAgY3Vyc29yOiBkZWZhdWx0OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDA7CiAgICBsZWZ0OiAwOwogICAgdG9wOiAwOwogICAgYm90dG9tOiAwOwp9CgoueHRlcm0gLnh0ZXJtLXNjcmVlbiB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi54dGVybSAueHRlcm0tc2NyZWVuIGNhbnZhcyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAwOwogICAgdG9wOiAwOwp9CgoueHRlcm0gLnh0ZXJtLXNjcm9sbC1hcmVhIHsKICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKfQoKLnh0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50IHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGxlZnQ6IC05OTk5ZW07CiAgICBsaW5lLWhlaWdodDogbm9ybWFsOwp9CgoueHRlcm0uZW5hYmxlLW1vdXNlLWV2ZW50cyB7CiAgICAvKiBXaGVuIG1vdXNlIGV2ZW50cyBhcmUgZW5hYmxlZCAoZWcuIHRtdXgpLCByZXZlcnQgdG8gdGhlIHN0YW5kYXJkIHBvaW50ZXIgY3Vyc29yICovCiAgICBjdXJzb3I6IGRlZmF1bHQ7Cn0KCi54dGVybS54dGVybS1jdXJzb3ItcG9pbnRlciwKLnh0ZXJtIC54dGVybS1jdXJzb3ItcG9pbnRlciB7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi54dGVybS5jb2x1bW4tc2VsZWN0LmZvY3VzIHsKICAgIC8qIENvbHVtbiBzZWxlY3Rpb24gbW9kZSAqLwogICAgY3Vyc29yOiBjcm9zc2hhaXI7Cn0KCi54dGVybSAueHRlcm0tYWNjZXNzaWJpbGl0eSwKLnh0ZXJtIC54dGVybS1tZXNzYWdlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICBib3R0b206IDA7CiAgICByaWdodDogMDsKICAgIHotaW5kZXg6IDEwOwogICAgY29sb3I6IHRyYW5zcGFyZW50Owp9CgoueHRlcm0gLmxpdmUtcmVnaW9uIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IC05OTk5cHg7CiAgICB3aWR0aDogMXB4OwogICAgaGVpZ2h0OiAxcHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9CgoueHRlcm0tZGltIHsKICAgIG9wYWNpdHk6IDAuNTsKfQoKLnh0ZXJtLXVuZGVybGluZSB7CiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKfQoKLnh0ZXJtLXN0cmlrZXRocm91Z2ggewogICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7Cn0KCi54dGVybS1zY3JlZW4gLnh0ZXJtLWRlY29yYXRpb24tY29udGFpbmVyIC54dGVybS1kZWNvcmF0aW9uIHsKCXotaW5kZXg6IDY7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cn0KCi54dGVybS1kZWNvcmF0aW9uLW92ZXJ2aWV3LXJ1bGVyIHsKICAgIHotaW5kZXg6IDc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICByaWdodDogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgoueHRlcm0tZGVjb3JhdGlvbi10b3AgewogICAgei1pbmRleDogMjsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoK",
        "usr/volcanos/page/cache.js": "Vm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL2FjdGlvbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wYW5lbC9mb290ZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGFuZWwvaGVhZGVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL3JpdmVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL3NlYXJjaC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvY2hhdC9kaXYuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvaW5uZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3RlYW0vcGxhbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvd2lraS9kYXRhLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9kcmF3LmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC93aWtpL2ZlZWwuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvZm9ybS5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvanNvbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3Rvcnkvc3BpZGUuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL3N0b3J5L3RyZW5kLmNzcyJdID0gW10KCl9jYW5fbmFtZSA9ICIvbGliL2Jhc2UuanMiClZvbGNhbm9zKCJiYXNlIiwge2hlbHA6ICLmlbDmja7nsbvlnosiLCBJbnQ6IGZ1bmN0aW9uKHZhbCwgZGVmKSB7IHJldHVybiBwYXJzZUludCh2YWwpfHxkZWZ8fDAgfSwKCU1pbjogZnVuY3Rpb24odmFsLCBtaW4pIHsgcmV0dXJuIHZhbCA+IG1pbj8gdmFsOiBtaW4gfSwKCU1heDogZnVuY3Rpb24odmFsLCBtYXgpIHsgcmV0dXJuIHZhbCA8IG1heD8gdmFsOiBtYXggfSwKCU9iajogZnVuY3Rpb24odmFsLCBkZWYpIHsKCQl0cnkgewoJCQlpZiAodHlwZW9mIHZhbCA9PSBsYW5nLlNUUklORykgeyBpZiAodmFsID09ICIiKSB7IHJldHVybiBkZWYgfSB2YWwgPSBKU09OLnBhcnNlKHZhbCkgfQoJCQlpZiAodmFsLmxlbmd0aCA+IDApIHsgcmV0dXJuIHZhbCB9IGZvciAodmFyIGsgaW4gdmFsKSB7IHJldHVybiB2YWwgfSByZXR1cm4gZGVmCgkJfSBjYXRjaCAoZSkgeyByZXR1cm4gdmFsICYmIHZhbC5zcGxpdCAmJiB2YWwuc3BsaXQoaWNlLkZTKSB8fCBkZWYgfQoJfSwKCUNvcHk6IGZ1bmN0aW9uKHRvLCBmcm9tLCBza2lwKSB7IGlmICghZnJvbSkgeyByZXR1cm4gdG8gfQoJCWlmIChhcmd1bWVudHMubGVuZ3RoID09IDIgfHwgdHlwZW9mIHNraXAgPT0gImJvb2xlYW4iKSB7CgkJCWZvciAodmFyIGsgaW4gZnJvbSkgewoJCQkJaWYgKHNraXAgJiYgdG9ba10gIT0gdW5kZWZpbmVkKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChmcm9tW2tdID09PSAiIikgeyBkZWxldGUodG9ba10pOyBjb250aW51ZSB9CgkJCQl0b1trXSA9IGZyb21ba10KCQkJfQoJCQlyZXR1cm4gdG8KCQl9CgkJZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGsgPSBhcmd1bWVudHNbaV07IHRvW2tdID0gZnJvbVtrXQoJCX0KCQlyZXR1cm4gdG8KCX0sCglFcTogZnVuY3Rpb24odG8sIGZyb20pIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJaWYgKHR5cGVvZiB0byAhPSB0eXBlb2YgZnJvbSkgeyByZXR1cm4gZmFsc2UgfQoJCWlmICh0eXBlb2YgdG8gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJaWYgKHRvLmxlbmd0aCAhPSBmcm9tLmxlbmd0aCkgeyByZXR1cm4gZmFsc2UgfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRvLmxlbmd0aDsgaSsrKSB7CgkJCQlpZiAoIWNhbGwodG9baV0sIGZyb21baV0pKSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJZm9yICh2YXIgayBpbiB0bykgewoJCQkJaWYgKCFjYWxsKHRvW2tdLCBmcm9tW2tdKSkgeyByZXR1cm4gZmFsc2UgfQoJCQl9CgkJCXJldHVybiB0cnVlCgkJfQoJCXJldHVybiB0byA9PT0gZnJvbQoJfSwKCglFeHQ6IGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIChwYXRoLnNwbGl0KGljZS5QUykucG9wKCkuc3BsaXQoaWNlLlBUKS5wb3AoKSkudG9Mb3dlckNhc2UoKSB9LAoJUGF0aDogZnVuY3Rpb24ocGF0aCkgeyB2YXIgcmVzID0gIiIKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyBpZiAoIWFyZ3VtZW50c1tpXSkgeyBjb250aW51ZSB9CgkJCXJlcyArPSAoYXJndW1lbnRzW2ldWzBdPT1pY2UuUFMgfHwgcmVzPT0iIiB8fCByZXNbcmVzLmxlbmd0aC0xXT09aWNlLlBTPyAiIjogaWNlLlBTKSArIGFyZ3VtZW50c1tpXS50cmltKCkKCQl9CgkJcmV0dXJuIHJlcwoJfSwKCUFyZ3M6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0gW10KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgewoJCQlpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJZm9yICh2YXIgayBpbiBhcmd1bWVudHNbaV0pIHsgcmVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2ldW2tdKSkgfQoJCQkJaS0tOyBjb250aW51ZQoJCQl9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSkgeyAKCQkJCXJlcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaV0pKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2krMV0pKQoJCQl9CgkJfQoJCXJldHVybiByZXMuam9pbigiJiIpCgl9LAoJTWVyZ2VVUkw6IGZ1bmN0aW9uKHVybCkgewoJCXZhciBhcmdzID0ge307ICh1cmwuc3BsaXQoIj8iKVsxXXx8IiIpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IGlmICghaXRlbSkgeyByZXR1cm4gfQoJCQl2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IGFyZ3NbZGVjb2RlVVJJQ29tcG9uZW50KGxzWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQobHNbMV0pCgkJfSkKCQlmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQlzd2l0Y2ggKHR5cGVvZiBhcmd1bWVudHNbaV0pIHsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IGFyZ3NbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdLCBpKys7IGJyZWFrCgkJCQljYXNlIGxhbmcuT0JKRUNUOgoJCQkJCWlmIChhcmd1bWVudHNbaV0ubGVuZ3RoID4gMCkgewoJCQkJCQlmb3IgKHZhciBqID0gMDsgaiA8IGFyZ3VtZW50c1tpXS5sZW5ndGg7IGogKz0gMikgeyBhcmdzW2FyZ3VtZW50c1tpXVtqXV0gPSBhcmd1bWVudHNbaV1bal0gfQoJCQkJCX0gZWxzZSB7CgkJCQkJCWZvciAodmFyIGsgaW4gYXJndW1lbnRzW2ldKSB7IGFyZ3Nba10gPSBhcmd1bWVudHNbaV1ba10gfQoJCQkJCX0KCQkJCQlicmVhawoJCQl9CgkJfQoJCXZhciBsaXN0ID0gW107IGZvciAodmFyIGsgaW4gYXJncykgeyBrICYmYXJnc1trXSAmJiBsaXN0LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJnc1trXSkpIH0KCQlyZXR1cm4gdXJsLnNwbGl0KCI/IilbMF0rKGxpc3QubGVuZ3RoPjA/ICI/IitsaXN0LmpvaW4oIiYiKTogIiIpCgl9LAoJUGFyc2VVUkw6IGZ1bmN0aW9uKHVybCkgeyB2YXIgcmVzID0ge2xpbms6IHVybH0KCQl2YXIgbGlzdCA9IHVybC5zcGxpdCgiPyIpOyByZXNbIm9yaWdpbiJdID0gbGlzdFswXQoJCWxpc3RbMV0gJiYgbGlzdFsxXS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IHJlc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQl9KQoJCXJldHVybiByZXMKCX0sCglQYXJzZUpTT046IGZ1bmN0aW9uKHN0cikgeyB2YXIgcmVzCgkJaWYgKHR5cGVvZiBzdHIgPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIHN0ciB9CgkJaWYgKHN0ci5pbmRleE9mKCJodHRwIikgPT0gMCkgeyB2YXIgbHMgPSBzdHIuc3BsaXQoIj8iKQoJCQlyZXMgPSB7dHlwZTogbWRiLkxJTkssIG5hbWU6ICIiLCB0ZXh0OiBzdHJ9CgkJCXJlcy5uYW1lID0gbHNbMF0uc3BsaXQoIjovLyIpLnBvcCgpLnNwbGl0KGljZS5QUylbMF0KCQkJbHNbMV0gJiYgbHNbMV0uc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGxzID0gaXRlbS5zcGxpdCgiPSIpCgkJCQlyZXNbZGVjb2RlVVJJQ29tcG9uZW50KGxzWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQobHNbMV0pCgkJCX0pCgkJCXJldHVybiByZXMKCQl9CgkJdHJ5IHsgcmVzID0gSlNPTi5wYXJzZShzdHIpLCByZXMudGV4dCA9IHJlcy50ZXh0fHxzdHIsIHJlcy50eXBlID0gcmVzLnR5cGV8fG5mcy5KU09OCgkJfSBjYXRjaCAoZSkgeyByZXMgPSB7dHlwZTogbWRiLlRFWFQsIHRleHQ6IHN0cn0gfQoJCXJldHVybiByZXMKCX0sCglQYXJzZVNpemU6IGZ1bmN0aW9uKHNpemUpIHsgc2l6ZSA9IHNpemUudG9Mb3dlckNhc2UoKQoJCWlmIChzaXplLmVuZHNXaXRoKCJ0YiIpIHx8IHNpemUuZW5kc1dpdGgoInQiKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0ICogMTAyNCAqIDEwMjQgKiAxMDI0CgkJfQoJCWlmIChzaXplLmVuZHNXaXRoKCJnYiIpIHx8IHNpemUuZW5kc1dpdGgoImciKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0ICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoIm1iIikgfHwgc2l6ZS5lbmRzV2l0aCgibSIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0CgkJfQoJCWlmIChzaXplLmVuZHNXaXRoKCJrYiIpIHx8IHNpemUuZW5kc1dpdGgoImsiKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0CgkJfQoJCXJldHVybiBwYXJzZUludChzaXplKQoJfSwKCglTaXplOiBmdW5jdGlvbihzaXplKSB7IHNpemUgPSBwYXJzZUludChzaXplKQoJCWlmIChzaXplID4gMTAwMDAwMDAwMCkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZS8xMDAwMDAwMDAwKSArIGljZS5QVCArIHBhcnNlSW50KHNpemUvMTAwMDAwMDAlMTAwKSArICJHIgoJCX0KCQlpZiAoc2l6ZSA+IDEwMDAwMDApIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUvMTAwMDAwMCkgKyBpY2UuUFQgKyBwYXJzZUludChzaXplLzEwMDAwJTEwMCkgKyAiTSIKCQl9CgkJaWYgKHNpemUgPiAxMDAwKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplLzEwMDApICsgaWNlLlBUICsgcGFyc2VJbnQoc2l6ZS8xMCUxMDApICsgIksiCgkJfQoJCXJldHVybiBzaXplICsgIkIiCgl9LAoJTnVtYmVyOiBmdW5jdGlvbihkLCBuKSB7IHZhciByZXN1bHQgPSBbXQoJCXdoaWxlIChkID4gMCkgeyByZXN1bHQucHVzaChkJTEwKTsgZCA9IHBhcnNlSW50KGQvMTApOyBuLS0gfQoJCXdoaWxlIChuID4gMCkgeyByZXN1bHQucHVzaCgiMCIpOyBuLS0gfQoJCXJldHVybiByZXN1bHQucmV2ZXJzZSgpLCByZXN1bHQuam9pbigiIikKCX0sCglGb3JtYXQ6IGZ1bmN0aW9uKG9iaikgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKSB9LAoJU2ltcGxlOiBmdW5jdGlvbigpIHsgdmFyIHJlcyA9IFtdCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTsgc3dpdGNoICh0eXBlb2YgYXJndW1lbnRzW2ldKSB7CgkJCQljYXNlIGxhbmcuTlVNQkVSOiByZXMucHVzaChhcmcpOyBicmVhawoJCQkJY2FzZSBsYW5nLlNUUklORzogcmVzLnB1c2goYXJnKTsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGFyZy5sZW5ndGggPiAwKSB7IHJlcyA9IHJlcy5jb25jYXQoYXJnKTsgYnJlYWsgfQoJCQkJCWZvciAodmFyIGsgaW4gYXJnKSB7IGsgJiYgYXJnW2tdICYmIHJlcy5wdXNoKGssIGFyZ1trXSkgfQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OiByZXMucHVzaChhcmcpOyAKCQkJfQoJCX0KCQlyZXR1cm4gcmVzCgl9LAoJQWRkVW5pcTogZnVuY3Rpb24obGlzdCwgdmFsdWUpIHsgbGlzdCA9IGxpc3R8fFtdOyByZXR1cm4gbGlzdC5pbmRleE9mKHZhbHVlKSA9PSAtMSAmJiBsaXN0LnB1c2godmFsdWUpLCBsaXN0IH0sCgoJRGF0ZTogZnVuY3Rpb24odGltZSkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCWlmICh0eXBlb2YgdGltZSA9PSBsYW5nLlNUUklORyAmJiB0aW1lICE9ICIiKSB7IHZhciBscyA9IHRpbWUuc3BsaXQoaWNlLlNQKQoJCQl2YXIgdnMgPSBsc1swXS5zcGxpdCgiLSIpCgkJCW5vdy5zZXRGdWxsWWVhcihwYXJzZUludCh2c1swXSkpCgkJCW5vdy5zZXRNb250aChwYXJzZUludCh2c1sxXSktMSkKCQkJbm93LnNldERhdGUocGFyc2VJbnQodnNbMl0pKQoKCQkJdmFyIHZzID0gbHNbMV0uc3BsaXQoIjoiKQoJCQlub3cuc2V0SG91cnMocGFyc2VJbnQodnNbMF0pKQoJCQlub3cuc2V0TWludXRlcyhwYXJzZUludCh2c1sxXSkpCgkJCW5vdy5zZXRTZWNvbmRzKHBhcnNlSW50KHZzWzJdKSkKCQl9IGVsc2UgaWYgKHRpbWUpIHsKCQkJbm93ID0gdGltZQoJCX0KCQlyZXR1cm4gbm93Cgl9LAoJVGltZTogZnVuY3Rpb24odGltZSwgZm10KSB7IHZhciBub3cgPSB0aGlzLkRhdGUodGltZSkKCQl2YXIgbGlzdCA9IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0KCQlmbXQgPSBmbXR8fCIlSDolTTolUyIKCQlmbXQgPSBmbXQucmVwbGFjZSgiJXkiLCBub3cuZ2V0RnVsbFllYXIoKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJW0iLCB0aGlzLk51bWJlcihub3cuZ2V0TW9udGgoKSsxLCAyKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJWQiLCB0aGlzLk51bWJlcihub3cuZ2V0RGF0ZSgpLCAyKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJXciLCBsaXN0W25vdy5nZXREYXkoKV0pCgkJZm10ID0gZm10LnJlcGxhY2UoIiVIIiwgdGhpcy5OdW1iZXIobm93LmdldEhvdXJzKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlTSIsIHRoaXMuTnVtYmVyKG5vdy5nZXRNaW51dGVzKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlUyIsIHRoaXMuTnVtYmVyKG5vdy5nZXRTZWNvbmRzKCksIDIpKQoJCXJldHVybiBmbXQKCX0sCglUaW1lQWRkOiBmdW5jdGlvbih0LCBkKSB7IHJldHVybiBuZXcgRGF0ZSh0IC0gdCUoMjQqMzYwMCoxMDAwKSAtIDgqMzYwMCoxMDAwICsgZCoyNCozNjAwKjEwMDApIH0sCglEdXJhdGlvbjogZnVuY3Rpb24obikgeyB2YXIgcmVzID0gIiIsIGggPSAwCgkJaCA9IHBhcnNlSW50KG4vMzYwMDAwMC8yNCksIGggPiAwICYmIChyZXMgKz0gaCsiZCIpLCBuID0gbiAlICgzNjAwMDAwKjI0KQoJCWggPSBwYXJzZUludChuLzM2MDAwMDApLCBoID4gMCAmJiAocmVzICs9IGgrImgiKSwgbiA9IG4gJSAzNjAwMDAwCgkJaCA9IHBhcnNlSW50KG4vNjAwMDApLCBoID4gMCAmJiAocmVzICs9IGgrIm0iKSwgbiA9IG4gJSA2MDAwMAoJCWggPSBwYXJzZUludChuLzEwMDApLCBoID4gMCAmJiAocmVzICs9IGgpLCBuID0gbiAlIDEwMDAKCQlyZXR1cm4gcmVzICsgKG4gPiAwPyBpY2UuUFQrcGFyc2VJbnQobi8xMCk6ICIiKSArICJzIgoJfSwKCgltb2Q6IGZ1bmN0aW9uKGluZGV4LCB0b3RhbCkgewoJCXJldHVybiAoaW5kZXgrdG90YWwpICUgdG90YWwKCX0sCglnZXRWYWxpZDogZnVuY3Rpb24oKSB7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJaWYgKHR5cGVvZiB2ID09IGxhbmcuT0JKRUNUKSB7CgkJCQlpZiAodiA9PSBudWxsKSB7IGNvbnRpbnVlIH0KCQkJCWZvciAodmFyIGsgaW4gdikgeyByZXR1cm4gdiB9CgkJCQlpZiAodi5sZW5ndGggPiAwKSB7IHJldHVybiB2IH0KCQkJfSBlbHNlIGlmICh0eXBlb2YgdiA9PSBsYW5nLlNUUklORyAmJiB2KSB7CgkJCQlyZXR1cm4gdgoJCQl9IGVsc2UgaWYgKHYgPT0gdW5kZWZpbmVkKSB7CgkJCQljb250aW51ZQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHYKCQkJfQoJCX0KCX0sCglpc051bWJlcjogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuTlVNQkVSIH0sCglpc1N0cmluZzogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuU1RSSU5HIH0sCglpc09iamVjdDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuT0JKRUNUIH0sCglpc0FycmF5OiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5PQkpFQ1QgJiYgdmFsLmxlbmd0aCAhPSB1bmRlZmluZWQgfSwKCWlzRnVuYzogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzRnVuY3Rpb246IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdHlwZW9mIHZhbCA9PSBsYW5nLkZVTkNUSU9OIH0sCglpc0NhbGxiYWNrOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBrZXkuaW5kZXhPZigib24iKSA9PSAwICYmIHR5cGVvZiB2YWx1ZSA9PSBsYW5nLkZVTkNUSU9OIH0sCglpc1VuZGVmaW5lZDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB2YWwgPT0gdW5kZWZpbmVkIH0sCglpc051bGw6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsID09IG51bGwgfSwKCXJlcGxhY2VBbGw6IGZ1bmN0aW9uKHN0cikgewoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7IGlmICghYXJndW1lbnRzW2ldKSB7IGNvbnRpbnVlIH0KCQkJaWYgKHN0ci5yZXBsYWNlQWxsKSB7IHN0ciA9IHN0ci5yZXBsYWNlQWxsKGFyZ3VtZW50c1tpXSwgYXJndW1lbnRzW2krMV0pOyBjb250aW51ZSB9CgkJCWlmIChzdHIucmVwbGFjZSkgeyBzdHIgPSBzdHIucmVwbGFjZShhcmd1bWVudHNbaV0sIGFyZ3VtZW50c1tpKzFdKTsgY29udGludWUgfQoJCX0KCQlyZXR1cm4gc3RyCgl9LAoKCWNvdW50OiBmdW5jdGlvbihzdHIsIHMpIHsgdmFyIG4gPSAwCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKCQkJaWYgKHN0cltpXSA9PSBzKSB7IG4rKyB9CgkJfQoJCXJldHVybiBuCgl9LAoJcmFuZG9tOiBmdW5jdGlvbihtYXgsIG1pbikgeyByZXR1cm4gbWluID0gbWlufHwwLCBwYXJzZUludChNYXRoLnJhbmRvbSgpKihtYXgtbWluKSkrbWluIH0sCglpc05pZ2h0OiBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCk7IHJldHVybiBub3cuZ2V0SG91cnMoKSA8IDcgfHwgbm93LmdldEhvdXJzKCkgPiAxNyB9LAoJYmVnaW5XaXRoOiBmdW5jdGlvbihzdHIsIGJlZ2luKSB7IHJldHVybiBzdHIudHJpbSgpLmluZGV4T2YoYmVnaW4pID09IDAgfSwKCWVuZFdpdGg6IGZ1bmN0aW9uKHN0ciwgZW5kKSB7IHJldHVybiBzdHIubGFzdEluZGV4T2YoZW5kKSArIGVuZC5sZW5ndGggPT0gc3RyLmxlbmd0aCB9LAoJdHJpbTogZnVuY3Rpb24oYXJncykgeyBpZiAodGhpcy5pc1N0cmluZyhhcmdzKSkgeyByZXR1cm4gYXJncy50cmltKCkgfQoJCWlmICh0aGlzLmlzQXJyYXkoYXJncykpIHsgZm9yICh2YXIgaSA9IGFyZ3MubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7IGlmICghYXJnc1tpXSkgeyBhcmdzLnBvcCgpIH0gZWxzZSB7IGJyZWFrIH0gfSB9CgkJcmV0dXJuIGFyZ3MKCX0sCgl0cmltUHJlZml4OiBmdW5jdGlvbihzdHIsIHByZSkgeyBpZiAoc3RyLmluZGV4T2YocHJlKSA9PSAtMSkgeyByZXR1cm4gc3RyIH0gcmV0dXJuIHN0ci5zbGljZShwcmUubGVuZ3RoKSB9LAoJdHJpbVN1ZmZpeDogZnVuY3Rpb24oc3RyLCBlbmQpIHsKCQl2YXIgaW5kZXggPSBzdHIubGFzdEluZGV4T2YoZW5kKQoJCWlmIChpbmRleCA9PSAtMSB8fCBpbmRleCtlbmQubGVuZ3RoICE9IHN0ci5sZW5ndGgpIHsgcmV0dXJuIHN0ciB9IHJldHVybiBzdHIuc2xpY2UoMCwgaW5kZXgpCgl9LAoJam9pbjogZnVuY3Rpb24obGlzdCwgc3ApIHsgcmV0dXJuIChsaXN0fHxbXSkuam9pbihzcHx8aWNlLlNQKSB9LAoJam9pbnM6IGZ1bmN0aW9uKGxpc3QsIGlubmVyLCBvdXRlcikgeyAKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJbGlzdFtpXSA9IHR5cGVvZiBsaXN0W2ldID09IGxhbmcuU1RSSU5HPyBsaXN0W2ldOiBsaXN0W2ldLmpvaW4oaW5uZXJ8fGljZS5GUykKCQl9CgkJcmV0dXJuIGxpc3Quam9pbihvdXRlcnx8aWNlLlNQKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL2NvcmUuanMiClZvbGNhbm9zKCJjb3JlIiwge2hlbHA6ICLmlbDmja7nu5PmnoQiLAoJS2V5czogc2h5KCLov57mjqXlmagiLCBmdW5jdGlvbigpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciB2ID0gYXJndW1lbnRzW2ldCgkJCXN3aXRjaCAodHlwZW9mIHYpIHsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyBsaXN0LnB1c2godltqXSkgfSBicmVhawoJCQkJY2FzZSBsYW5nLk5VTUJFUjogbGlzdC5wdXNoKHYrIiIpOyBicmVhawoJCQkJY2FzZSBsYW5nLkZVTkNUSU9OOiB2ID0gdigpCgkJCQlkZWZhdWx0OiB2ICYmIGxpc3QucHVzaCh2KyIiKQoJCQl9CgkJfQoJCXJldHVybiBsaXN0LmpvaW4oaWNlLlBUKQoJfSksCglWYWx1ZTogc2h5KCLlrZjlgqjlmagiLCBmdW5jdGlvbihkYXRhLCBrZXksIHZhbHVlKSB7CgkJaWYgKGRhdGEgPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9CgkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGRhdGEgfQoKCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCAmJiBrZXkubGVuZ3RoID4gMCkgeyBrZXkgPSBrZXkuam9pbihpY2UuUFQpIH0KCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCkgeyBmb3IgKHZhciBrIGluIGtleSkgeyBhcmd1bWVudHMuY2FsbGVlLmNhbGwodGhpcywgZGF0YSwgaywga2V5W2tdKSB9IHJldHVybiBkYXRhIH0KCgkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewoJCQl2YXIgX2RhdGEgPSBkYXRhCgoJCQl2YXIgbHMgPSBrZXkuc3BsaXQoaWNlLlBUKQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxzLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgX3N1YiA9IF9kYXRhW2xzW2ldXXx8e30KCQkJCV9kYXRhW2xzW2ldXSA9IF9zdWIKCQkJCWlmIChpID09IGxzLmxlbmd0aCAtIDEpIHsKCQkJCQlfZGF0YVtsc1tpXV0gPSB2YWx1ZQoJCQkJfSBlbHNlIHsKCQkJCQlfZGF0YSA9IF9zdWIKCQkJCX0KCQkJfQoJCQkvLyBkYXRhW2tleV0gPSB2YWx1ZQoJCX0KCQlpZiAoZGF0YVtrZXldICE9IHVuZGVmaW5lZCkgeyByZXR1cm4gZGF0YVtrZXldIH0KCgkJdmFyIHAgPSBkYXRhLCBscyA9IGtleS5zcGxpdChpY2UuUFQpOyB3aGlsZSAocCAmJiBscy5sZW5ndGggPiAwKSB7CgkJCWlmIChsc1swXSA9PSAiLTEiKSB7IGxzWzBdID0gcC5sZW5ndGgtMSB9CgkJCXAgPSBwW2xzWzBdXSwgbHMgPSBscy5zbGljZSgxKQoJCX0gcmV0dXJuIHAKCX0pLAoJU3BsaXQ6IHNoeSgi5YiG6K+N5ZmoIiwgZnVuY3Rpb24oc3RyKSB7IGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7IHJldHVybiBbXSB9CgkJdmFyIG9wdCA9IHtkZXRhaWw6IGZhbHNlfSwgYXJnID0gW107IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCXR5cGVvZiBhcmd1bWVudHNbaV0gPT0gbGFuZy5PQkpFQ1Q/IG9wdCA9IGFyZ3VtZW50c1tpXTogYXJnLnB1c2goYXJndW1lbnRzW2ldKQoJCX0KCgkJLy8g5a2X56ym5a6a5LmJCgkJZnVuY3Rpb24gX2xpc3Qoc3RyKSB7IHZhciByZXMgPSB7fTsgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsgcmVzW3N0cltpXV0gPSB0cnVlIH07IHJldHVybiByZXMgfQoJCXZhciBzcGFjZSA9IF9saXN0KGFyZ1swXXx8Ilx0ICw7XG4iKSAgLy8g56m655m956ymCgkJdmFyIGJsb2NrID0gX2xpc3QoYXJnWzFdfHwie1soKV19IikgICAvLyDliIbpmpTnrKYKCQl2YXIgcXVvdGUgPSBfbGlzdChhcmdbMl18fCInXCJgIikgICAgIC8vIOW8leeUqOespgoJCXZhciB0cmFucyA9IF9saXN0KGFyZ1szXXx8IlxcIikgICAgICAgLy8g6L2s5LmJ56ymCgoJCXZhciByZXMgPSBbXSwgYmVnaW4gPSAwOyBmdW5jdGlvbiBwdXNoKG9iaikgewoJCQlvYmogJiYgcmVzLnB1c2godHlwZW9mIG9iaiA9PSBsYW5nLlNUUklORyB8fCBvcHQuZGV0YWlsPyBvYmo6IG9iai50ZXh0KSwgYmVnaW4gPSAtMQoJCX0KCgkJLy8g5byA5aeL5YiG6K+NCgkJZm9yICh2YXIgcyA9ICIiLCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewoJCQlpZiAoc3BhY2Vbc3RyW2ldXSkgeyAvLyDnqbrnmb3nrKYKCQkJCWlmIChzKSB7IGNvbnRpbnVlIH0KCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJb3B0LmRldGFpbCAmJiBwdXNoKHt0eXBlOiBodG1sLlNQQUNFLCB0ZXh0OiBzdHIuc2xpY2UoaSwgaSsxKX0pCgoJCQl9IGVsc2UgaWYgKGJsb2NrW3N0cltpXV0pIHsgLy8g5YiG6ZqU56ymCgkJCQlpZiAocykgeyBjb250aW51ZSB9CgkJCQliZWdpbiA+IC0xICYmIHB1c2goc3RyLnNsaWNlKGJlZ2luLCBpKSkKCQkJCXB1c2goc3RyLnNsaWNlKGksIGkrMSkpCgoJCQl9IGVsc2UgaWYgKHF1b3RlW3N0cltpXV0pIHsgLy8g5byV55So56ymCgkJCQlpZiAocyA9PSAiIikgewoJCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJCXMgPSBzdHJbaV0sIGJlZ2luID0gaSsxCgkJCQl9IGVsc2UgaWYgKHMgPT0gc3RyW2ldKSB7CgkJCQkJcHVzaCh7dHlwZTogbGFuZy5TVFJJTkcsIHRleHQ6IHN0ci5zbGljZShiZWdpbiwgaSksIGxlZnQ6IHMsIHJpZ2h0OiBzdHJbaV19KQoJCQkJCXMgPSAiIiwgYmVnaW4gPSAtMQoJCQkJfQoKCQkJfSBlbHNlIGlmICh0cmFuc1tzdHJbaV1dKSB7IC8vIOi9rOS5ieespgoJCQkJYmVnaW4gPT0gLTEgJiYgKGJlZ2luID0gaSsrKQoKCQkJfSBlbHNlIHsgLy8g5pmu6YCa56ymCgkJCQliZWdpbiA9PSAtMSAmJiAoYmVnaW4gPSBpKQoJCQl9CgkJfQoKCQkvLyDliankvZnlrZfnrKYKCQliZWdpbiA+PSAwICYmIChzPyBwdXNoKHt0eXBlOiBsYW5nLlNUUklORywgdGV4dDogc3RyLnNsaWNlKGJlZ2luKSwgbGVmdDogcywgcmlnaHQ6ICIifSk6IHB1c2goc3RyLnNsaWNlKGJlZ2luKSkpCgkJcmV0dXJuIHJlcwoJfSksCglDYWxsRnVuYzogc2h5KCLosIPnlKjlmagiLCBmdW5jdGlvbihmdW5jLCBhcmdzLCBtb2QpIHsgYXJncyA9IGFyZ3N8fHt9CgkJdmFyIGV2ZW50ID0gYXJnc1siZXZlbnQiXXx8e30sIGNhbiA9IGFyZ3NbImNhbiJdfHxhcmdzWzBdLCBtc2cgPSBhcmdzWyJtc2ciXXx8YXJnc1sxXSwgY21kcyA9IGFyZ3NbImNtZHMiXXx8W10KCQlldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCgkJLy8g5p+l5om+6LCD55SoCgkJZnVuYyA9IHR5cGVvZiBmdW5jID09IGxhbmcuRlVOQ1RJT04/IGZ1bmM6IHR5cGVvZiBmdW5jID09IGxhbmcuU1RSSU5HPyB0aGlzLlZhbHVlKG1vZHx8Y2FuLCBmdW5jKToKCQkJdHlwZW9mIGZ1bmMgPT0gbGFuZy5PQkpFQ1QgJiYgZnVuYy5sZW5ndGggPiAwPyB0aGlzLlZhbHVlKGZ1bmNbMF0sIHRoaXMuS2V5cyhmdW5jLnNsaWNlKDEpKSk6IG51bGwKCQlpZiAodHlwZW9mIGZ1bmMgIT0gbGFuZy5GVU5DVElPTikgeyByZXR1cm4gfQoKCQkvLyDop6PmnpDlj4LmlbAKCQl2YXIgbGlzdCA9IFtdLCBlY2hvID0gZmFsc2UsIGNiID0gYXJnc1siY2IiXQoJCXRoaXMuTGlzdChmdW5jLnRvU3RyaW5nKCkuc3BsaXQoIikiKVswXS5zcGxpdCgiKCIpWzFdLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGl0ZW0gPSBpdGVtLnRyaW0oKTsgaWYgKGl0ZW0gPT0gIiIpIHsgcmV0dXJuIH0KCQkJdmFyIGFyZyA9IGFyZ3NbaXRlbV0gfHwgbXNnJiZtc2cuT3B0aW9uJiZtc2cuT3B0aW9uKGl0ZW0pIHx8IGNhbiYmY2FuLkNvbmYmJmNhbi5Db25mKGl0ZW0pIHx8CgkJCQlldmVudCYmIShldmVudCBpbnN0YW5jZW9mIEV2ZW50KSYmZXZlbnRbaXRlbV0gfHwgYXJnc1tpbmRleF0gfHwgY21kc1tpbmRleF0gfHwgbnVsbAoJCQlpZiAoaXRlbSA9PSAiY2IiKSB7IGVjaG8gPSB0cnVlIH0KCQkJbGlzdC5wdXNoKGFyZykKCQl9KQoKCQkvLyDmiafooYzosIPnlKgKCQl2YXIgcmVzID0gZnVuYy5hcHBseShtb2R8fGNhbiwgbGlzdCkKCQlpZiAoIWVjaG8gJiYgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04pIHsgcmVzICYmIG1zZyAmJiBtc2cuRWNobyhyZXMpLCBhcmd1bWVudHMuY2FsbGVlLmFwcGx5KHRoaXMsIFtjYiwge21zZzogbXNnLCByZXM6IHJlc31dKSB9CgkJcmV0dXJuIHJlcwoJfSksCgoJTGlzdDogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihsaXN0LCBjYiwgaW50ZXJ2YWwsIGNicykgewoJCWlmICh0eXBlb2YgbGlzdCA9PSBsYW5nLlNUUklORykgeyAvLyDpu5jorqTluo/liJcKCQkJbGlzdCA9IFtsaXN0XQoJCX0gZWxzZSBpZiAodHlwZW9mIGxpc3QgPT0gbGFuZy5OVU1CRVIpIHsgLy8g562J5beu5bqP5YiXIFtlbmQgY2IgaW50ZXJ2YWxdfFtiZWdpbiBlbmQgaW50ZXJ2YWxdCgkJCXZhciBiZWdpbiA9IDAsIGVuZCA9IGxpc3QsIHN0ZXAgPSB0eXBlb2YgaW50ZXJ2YWwgPT0gbGFuZy5OVU1CRVI/IGludGVydmFsOiAxCgkJCWlmICh0eXBlb2YgY2IgPT0gbGFuZy5OVU1CRVIpIHsgYmVnaW4gPSBsaXN0LCBlbmQgPSBjYiwgY2IgPSBudWxsIH0KCQkJbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gYmVnaW47IGkgPCBlbmQ7IGkgKz0gc3RlcCkgeyBsaXN0LnB1c2goaSkgfQoJCX0KCgkJbGlzdCA9IGxpc3R8fFtdCgkJaWYgKGludGVydmFsID4gMCkgeyAvLyDml7bpl7Tluo/liJcKCQkJZnVuY3Rpb24gbG9vcChpKSB7IGlmIChpID49IGxpc3QubGVuZ3RoKSB7IHJldHVybiB0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKGxpc3QpIH0KCQkJCWNiKGxpc3RbaV0sIGksIGxpc3QpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBsb29wKGkrMSkgfSwgaW50ZXJ2YWwpCgkJCX0KCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgbGlzdC5sZW5ndGggPiAwICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoMCkgfSwgaW50ZXJ2YWwvNCkKCQl9IGVsc2UgeyAvLyDpgInmi6nluo/liJcKCQkJdmFyIHNsaWNlID0gW10sIHJlcwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OPyAocmVzID0gY2IobGlzdFtpXSwgaSwgbGlzdCkpICE9IHVuZGVmaW5lZCAmJiBzbGljZS5wdXNoKHJlcyk6IHNsaWNlLnB1c2gobGlzdFtpXSkKCQkJfTsgbGlzdCA9IHNsaWNlCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCU5leHQ6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24obGlzdCwgY2IsIGNicykgewoJCXN3aXRjaCAodHlwZW9mIGxpc3QpIHsKCQkJY2FzZSBsYW5nLk9CSkVDVDogaWYgKGxpc3QgPT0gbnVsbCkgeyBsaXN0ID0gW107IGJyZWFrIH0KCQkJCWlmIChsaXN0Lmxlbmd0aCA9PSB1bmRlZmluZWQpIHsgdmFyIGxzID0gW107IGZvciAodmFyIGsgaW4gbGlzdCkgeyBscy5wdXNoKGspIH0gbGlzdCA9IGxzIH0gYnJlYWsKCQkJZGVmYXVsdDogaWYgKGxpc3QgPT0gdW5kZWZpbmVkKSB7IGxpc3QgPSBbXTsgYnJlYWsgfQoJCQkJbGlzdCA9IFtsaXN0XQoJCX0KCgkJZnVuY3Rpb24gbmV4dChpKSB7IGkgPCBsaXN0Lmxlbmd0aD8gIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKGxpc3RbaV0sIGZ1bmN0aW9uKCkgeyBuZXh0KGkrMSkgfSwgaSwgbGlzdCk6CgkJCQl0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKGxpc3QpIH0KCQlyZXR1cm4gbmV4dCgwKSwgbGlzdAoJfSksCglJdGVtczogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihvYmosIGNiKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG9iaikgewoJCQlsaXN0ID0gbGlzdC5jb25jYXQodGhpcy5MaXN0KG9ialtrXSwgZnVuY3Rpb24odiwgaSkgewoJCQkJcmV0dXJuIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKHYsIGksIGssIG9iaikKCQkJfSkpCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCUl0ZW1Tb3J0OiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwga2V5LCBjYikgeyB2YXIgbGlzdCA9IFtdCgkJdmFyIG9yZGVyID0gW10sIGtleXMgPSB7fSwgdmFscyA9IHt9LCBpID0gMAoJCWZvciAodmFyIGsgaW4gb2JqKSB7IG8gPSBvYmpba11ba2V5XXx8aSsrCgkJCW9yZGVyLnB1c2gobyksIGtleXNbb10gPSBrLCB2YWxzW29dID0gb2JqW2tdCgkJfTsgb3JkZXIuc29ydCgpCgoJCWZvciAodmFyIGkgaW4gb3JkZXIpIHsgdmFyIGsgPSBvcmRlcltpXQoJCQl2YXIgcmVzID0gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IGNiKGtleXNba10sIHZhbHNba10pOiBrCgkJCXJlcyAhPSB1bmRlZmluZWQgJiYgbGlzdC5wdXNoKHJlcykKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJSXRlbTogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihvYmosIGNiKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG9iaikgewoJCQl2YXIgcmVzID0gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IGNiKGssIG9ialtrXSk6IGsKCQkJcmVzICE9IHVuZGVmaW5lZCAmJiBsaXN0LnB1c2gocmVzKQoJCX0KCQlyZXR1cm4gbGlzdAoJfSksCglJdGVtQ0I6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24obWV0YSwgY2IsIGNhbiwgaXRlbSkgeyB2YXIgbGlzdCA9IFtdCgkJZm9yICh2YXIgayBpbiBtZXRhKSB7IChmdW5jdGlvbihrKSB7CgkJCWlmIChrLmluZGV4T2YoIm9uIikgPT0gMCAmJiB0eXBlb2YgbWV0YVtrXSA9PSBsYW5nLkZVTkNUSU9OKSB7CgkJCQlpZiAodHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04pIHsKCQkJCQljYihrLCBtZXRhW2tdKQoJCQkJfSBlbHNlIHsKCQkJCQljYltrXSA9IGZ1bmN0aW9uKGV2ZW50KSB7IG1ldGFba10oZXZlbnQsIGNhbiwgaXRlbSkgfQoJCQkJfQoJCQkJbGlzdC5wdXNoKGspCgkJCX0KCQl9KShrKSB9CgkJcmV0dXJuIGxpc3QKCX0pLAoKCVNwbGl0SW5wdXQ6IGZ1bmN0aW9uKGl0ZW0sIHR5cGUpIHsgaWYgKHR5cGVvZiBpdGVtID09IGxhbmcuT0JKRUNUKSB7IHJldHVybiBpdGVtIH0KCQl0eXBlID0gdHlwZXx8aHRtbC5URVhUOyBzd2l0Y2ggKGl0ZW0pIHsKCQkJY2FzZSBtZGIuTElTVDogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5CVVRUT04sIG5hbWU6IGl0ZW0sIGFjdGlvbjogaWNlLkFVVE99CgkJCWNhc2UgY2xpLkJBQ0s6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuQlVUVE9OLCBuYW1lOiBpdGVtfQoJCQljYXNlIG1kYi5OQU1FOiByZXR1cm4ge3R5cGU6IHR5cGUgPSBodG1sLlRFWFQsIG5hbWU6IGl0ZW19CgkJCWNhc2UgbWRiLlRFWFQ6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuVEVYVEFSRUEsIG5hbWU6IGl0ZW19CgkJCWRlZmF1bHQ6IHZhciBscyA9IHRoaXMuU3BsaXQoaXRlbSwgIiAiLCAiOj1AIiksIHJlcyA9IHt0eXBlOiB0eXBlLCBuYW1lOiBsc1swXX07IGZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsKCQkJCQlzd2l0Y2ggKGxzW2ldKSB7CgkJCQkJCWNhc2UgIjoiOiByZXNbbWRiLlRZUEVdID0gbHNbaSsxXTsgYnJlYWsKCQkJCQkJY2FzZSAiPSI6CgkJCQkJCQlpZiAocmVzW21kYi5UWVBFXSA9PSBodG1sLlNFTEVDVCkgewoJCQkJCQkJCXJlcy52YWx1ZXMgPSB0aGlzLlNwbGl0KGxzW2krMV0pCgkJCQkJCQkJZm9yICh2YXIgaiA9IDE7IGogPCByZXMudmFsdWVzLmxlbmd0aDsgaisrKSB7CgkJCQkJCQkJCWlmIChyZXMudmFsdWVzWzBdID09ICIiIHx8IHJlcy52YWx1ZXNbMF0gPT0gcmVzLnZhbHVlc1tqXSkgewoJCQkJCQkJCQkJcmVzLnZhbHVlID0gcmVzLnZhbHVlc1swXSwgcmVzLnZhbHVlcyA9IHJlcy52YWx1ZXMuc2xpY2UoMSkKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJlcy52YWx1ZSA9IGxzW2krMV0KCQkJCQkJCX0KCQkJCQkJCWJyZWFrCgkJCQkJCWNhc2UgIkAiOiByZXNbY3R4LkFDVElPTl0gPSBsc1tpKzFdOyBicmVhawoJCQkJCX0KCQkJCX0gcmV0dXJuIHJlcwoJCX0KCX0sCglUaW1lcjMwMG1zOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMCwgY2IpIH0sCglUaW1lcjMwMDogZnVuY3Rpb24oY2IpIHsgdGhpcy5UaW1lcigzMDAsIGNiKSB9LAoJVGltZXIzczogZnVuY3Rpb24oY2IpIHsgdGhpcy5UaW1lcigzMDAwLCBjYikgfSwKCVRpbWVyOiBzaHkoIuWumuaXtuWZqCwgdmFsdWUsIFsxLDIsMyw0XSwge2ludGVydmFsLCBsZW5ndGh9IiwgZnVuY3Rpb24oaW50ZXJ2YWwsIGNiLCBjYnMpIHsKCQl2YXIgdGltZXIgPSB7c3RvcDogZmFsc2V9OyBmdW5jdGlvbiBsb29wKGkpIHsKCQkJdGltZXIuc3RvcCB8fCBpID49IGludGVydmFsLmxlbmd0aCAmJiBpbnRlcnZhbC5sZW5ndGggPj0gMCB8fCBjYih0aW1lciwgaW50ZXJ2YWwuaW50ZXJ2YWx8fGludGVydmFsW2ldLCBpLCBpbnRlcnZhbCk/CgkJCQl0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKHRpbWVyLCBpbnRlcnZhbCk6IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoaSsxKSB9LCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbaSsxXSkKCQl9CgoJCWludGVydmFsID0gdHlwZW9mIGludGVydmFsID09IGxhbmcuT0JKRUNUPyBpbnRlcnZhbDogW2ludGVydmFsXQoJCWlmIChpbnRlcnZhbC5pbnRlcnZhbCA9PSAwKSB7IGNiKCk7IHJldHVybiB0aW1lciB9CgoJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoMCkgfSwgaW50ZXJ2YWwuaW50ZXJ2YWx8fGludGVydmFsWzBdKQoJCXJldHVybiB0aW1lcgoJfSksCn0pCgpfY2FuX25hbWUgPSAiL2xpYi9taXNjLmpzIgpWb2xjYW5vcygibWlzYyIsIHtoZWxwOiAi6YCa5L+h5Y2P6K6uIiwgTWVzc2FnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0ge30gCgkJdmFyIHByb3RvID0ge19ldmVudDogZXZlbnQsIF9jYW46IGNhbiwKCQkJUnVuQWN0aW9uOiBmdW5jdGlvbihldmVudCwgc3ViLCBjbWRzLCBtZXRhKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1ldGEgPSBtZXRhIHx8IHN1YiYmc3ViLm9uYWN0aW9uIHx8IHt9CgkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJCWlmIChjbWRzICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBjYW4uYmFzZS5pc0Z1bmMobWV0YVtjbWRzWzFdXSkpIHsgZXZlbnQgPSBldmVudC5fZXZlbnR8fGV2ZW50CgkJCQkJcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFKSwgY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YVtjbWRzWzFdXSwge2V2ZW50OiBldmVudCwgY2FuOiBzdWIsIG1zZzogbXNnLCBidXR0b246IGNtZHNbMV0sIGNtZDogY21kc1sxXX0pLCB0cnVlCgkJCQl9CgkJCQlyZXR1cm4gZmFsc2UKCQkJfSwKCQkJRGlzcGxheTogZnVuY3Rpb24oZmlsZSkgeyBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSwgZmlsZSkgfSwKCQkJRGlzcGxheVN0b3J5OiBmdW5jdGlvbihmaWxlKSB7IG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZLCAiL3BsdWdpbi9zdG9yeS8iK2ZpbGUpIH0sCgkJCU9wdGlvblN0YXR1czogZnVuY3Rpb24oKSB7IHJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSB9LAoJCQlPcHRpb25Qcm9jZXNzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19QUk9DRVNTKSB9LAoJCQlPcHRpb25PclNlYXJjaDogZnVuY3Rpb24oa2V5KSB7IHJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCBrZXkpfHxtc2cuT3B0aW9uKGtleSkgfSwKCQkJT3B0aW9uOiBmdW5jdGlvbihrZXksIHZhbCkgewoJCQkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2cub3B0aW9uIHx8IFtdIH0KCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGNhbi5jb3JlLkl0ZW0oa2V5LCBtc2cuT3B0aW9uKSB9CgkJCQlpZiAodmFsID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZ1trZXldICYmIG1zZ1trZXldWzBdIHx8ICIiIH0KCQkJCXJldHVybiBtc2cub3B0aW9uID0gY2FuLmJhc2UuQWRkVW5pcShtc2cub3B0aW9uLCBrZXkpLCBtc2dba2V5XSA9IGNhbi5jb3JlLkxpc3QoYXJndW1lbnRzKS5zbGljZSgxKSwgdmFsCgkJCX0sCgkJCUFwcGVuZDogZnVuY3Rpb24oa2V5LCB2YWwpIHsKCQkJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnLmFwcGVuZCB8fCBbXSB9CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBjYW4uY29yZS5JdGVtKGtleSwgbXNnLkFwcGVuZCkgfQoJCQkJaWYgKHZhbCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2dba2V5XSAmJiBtc2dba2V5XVswXSB8fCAiIiB9CgkJCQlyZXR1cm4gbXNnLmFwcGVuZCA9IGNhbi5iYXNlLkFkZFVuaXEobXNnLmFwcGVuZCwga2V5KSwgbXNnW2tleV0gPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMSksIHZhbAoJCQl9LAoJCQlSZXN1bHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXNnLnJlc3VsdCAmJiBtc2cucmVzdWx0LmpvaW4oIiIpIHx8ICIiIH0sCgoJCQlMZW5ndGg6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1heCA9ICIiLCBsZW4gPSAwOyBjYW4uY29yZS5MaXN0KG1zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgaW5kZXgpIHsKCQkJCQlpZiAobXNnW2tleV0gJiYgbXNnW2tleV0ubGVuZ3RoID4gbGVuKSB7IG1heCA9IGtleSwgbGVuID0gbXNnW2tleV0ubGVuZ3RoIH0KCQkJCX0pCgkJCQlyZXR1cm4gbGVuCgkJCX0sCgkJCVRhYmxlOiBmdW5jdGlvbihjYikgewoJCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobXNnLkxlbmd0aCgpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IHZhciBvbmUgPSB7fSwgcmVzCgkJCQkJY2FuLmNvcmUuTGlzdChtc2cuYXBwZW5kLCBmdW5jdGlvbihrZXkpIHsgb25lW2tleV0gPSAobXNnW2tleV0mJm1zZ1trZXldW2luZGV4XXx8IiIpIH0pCgkJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgKHJlcyA9IGNiKG9uZSwgaW5kZXgsIGFycmF5KSkgJiYgcmVzICE9IHVuZGVmaW5lZCAmJiByZXMgfHwgb25lCgkJCQl9KQoJCQl9LAoJCQlDbGVhcjogZnVuY3Rpb24oa2V5KSB7IHN3aXRjaCAoa2V5fHxpY2UuTVNHX0FQUEVORCkgewoJCQkJY2FzZSBpY2UuTVNHX0FQUEVORDoKCQkJCWNhc2UgaWNlLk1TR19PUFRJT046CgkJCQkJY2FuLmNvcmUuTGlzdChtc2dba2V5XSwgZnVuY3Rpb24oaXRlbSkgeyBkZWxldGUobXNnW2l0ZW1dKSB9KQoJCQkJZGVmYXVsdDogbXNnW2tleV0gPSBbXQoJCQl9IH0sCgkJCUNvcHk6IGZ1bmN0aW9uKHJlcykgeyBpZiAoIXJlcykgeyByZXR1cm4gbXNnIH0KCQkJCXJlcy5yZXN1bHQgJiYgKG1zZy5yZXN1bHQgPSAobXNnLnJlc3VsdHx8W10pLmNvbmNhdChyZXMucmVzdWx0KSkKCQkJCXJlcy5hcHBlbmQgJiYgKG1zZy5hcHBlbmQgPSByZXMuYXBwZW5kKSAmJiByZXMuYXBwZW5kLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCXZhciBpID0gbXNnLm9wdGlvbiAmJiBtc2cub3B0aW9uLmluZGV4T2YoaXRlbSk7IGlmIChpID4gLTEpIHsKCQkJCQkJbXNnLm9wdGlvbltpXSA9ICIiLCBkZWxldGUobXNnW2l0ZW1dKQoJCQkJCX0KCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IChtc2dbaXRlbV18fFtdKS5jb25jYXQocmVzW2l0ZW1dKSkKCQkJCX0pCgkJCQlyZXMub3B0aW9uICYmIChtc2cub3B0aW9uID0gcmVzLm9wdGlvbikgJiYgcmVzLm9wdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IHJlc1tpdGVtXSkKCQkJCX0pCgkJCQlyZXMuX29wdGlvbiAmJiAobXNnLl9vcHRpb24gPSByZXMuX29wdGlvbikgJiYgcmVzLl9vcHRpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSByZXNbaXRlbV0pCgkJCQl9KQoJCQkJcmV0dXJuIG1zZwoJCQl9LAoJCQlQdXNoOiBmdW5jdGlvbihrZXksIHZhbHVlLCBkZXRhaWwpIHsKCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7CgkJCQkJdmFsdWUgPSB2YWx1ZXx8Y2FuLmNvcmUuSXRlbShrZXkpLCBjYW4uY29yZS5MaXN0KHZhbHVlLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWRldGFpbD8gbXNnLlB1c2gobWRiLktFWSwgaXRlbSkuUHVzaChtZGIuVkFMVUUsIGtleVtpdGVtXXx8IiIpOiBtc2cuUHVzaChpdGVtLCBrZXlbaXRlbV18fCIiKQoJCQkJCX0pCgkJCQkJcmV0dXJuIG1zZwoJCQkJfQoKCQkJCW1zZy5hcHBlbmQgPSBjYW4uYmFzZS5BZGRVbmlxKG1zZy5hcHBlbmQsIGtleSksIG1zZ1trZXldID0gbXNnW2tleV0gfHwgW10KCQkJCW1zZ1trZXldLnB1c2goY2FuLmJhc2UuaXNTdHJpbmcodmFsdWUpfHxjYW4uYmFzZS5pc0Z1bmN0aW9uKHZhbHVlKT8gdmFsdWU6IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkKCQkJCXJldHVybiBtc2cKCQkJfSwKCQkJU3RhdHVzOiBmdW5jdGlvbihvYmopIHsgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUywgSlNPTi5zdHJpbmdpZnkoY2FuLmNvcmUuSXRlbShvYmosIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0gfSkpKSB9LAoJCQlTdGF0dXNUaW1lQ291bnQ6IGZ1bmN0aW9uKG9iaikgeyBtc2cuYXBwZW5kICYmIG1zZy5TdGF0dXMoY2FuLmJhc2UuQ29weSh7InRpbWUiOiBjYW4uYmFzZS5UaW1lKCksICJjb3VudCI6IG1zZy5MZW5ndGgoKSsieCIrbXNnLmFwcGVuZC5sZW5ndGh9LCBvYmopKSB9LAoJCQlFY2hvOiBmdW5jdGlvbihyZXMpIHsgbXNnLnJlc3VsdCA9IG1zZy5yZXN1bHQgfHwgW10KCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IG1zZy5yZXN1bHQucHVzaChhcmd1bWVudHNbaV0pIH0KCQkJCXJldHVybiBtc2cuX2hhbmQgPSB0cnVlLCBtc2cKCQkJfSwKCQkJRHVtcDogZnVuY3Rpb24oY2FuKSB7CgkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCQkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCQl9LAoJCX0KCQlyZXR1cm4gY2FuLm1pc2MucHJvdG8obXNnLCBwcm90bykKCX0sCglHRVQ6IGZ1bmN0aW9uKGNhbiwgdXJsLCBjYikgeyB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCkKCQl4aHIub3BlbigiR0VUIiwgdXJsKSwgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHsKCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHhoci5yZXNwb25zZVRleHQpCgkJCX0KCQl9CgkJdHJ5IHsgeGhyLnNlbmQoKSB9IGNhdGNoKGUpIHsgY2FuLm1pc2MuTG9nKGUpIH0KCX0sCglQT1NUOiBmdW5jdGlvbihjYW4sIG1zZywgdXJsLCBmb3JtLCBjYikgeyAvLyBfbWV0aG9kIF9hY2NlcHQgX3VwbG9hZCBfcHJvZ3Jlc3MKCQl2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IG1zZy5feGhyID0geGhyCgkJeGhyLm9wZW4obXNnLl9tZXRob2R8fCJQT1NUIiwgdXJsKSwgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT0gNCkgeyByZXR1cm4gfQoKCQkJdHJ5IHsgLy8g6Kej5p6Q5ZON5bqUCgkJCQl2YXIgcmVzID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KQoJCQl9IGNhdGNoIChlKSB7CgkJCQl2YXIgcmVzID0ge3Jlc3VsdDogW3hoci5yZXNwb25zZVRleHRdfQoJCQl9CgkJCWlmICh4aHIuc3RhdHVzID09IDIwMCkgewoJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnLkNvcHkocmVzKSkKCQkJfQoJCQljYW4udXNlci50b2FzdChjYW4sIHJlcywgeGhyLnN0YXR1cykKCQl9CgoJCWlmIChtc2cuX3VwbG9hZCkgeyAvLyDkuIrkvKDmlofku7YKCQkJdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsgY2FuLmNvcmUuSXRlbXMoZm9ybSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBrZXkpIHsKCQkJCWRhdGEuYXBwZW5kKGtleSwgdmFsdWUpCgkJCX0pLCBkYXRhLmFwcGVuZChodG1sLlVQTE9BRCwgbXNnLl91cGxvYWQpLCBkYXRhLmFwcGVuZChpY2UuTVNHX1VQTE9BRCwgbWRiLlVQTE9BRCkKCgkJCXhoci51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uYmFzZS5pc0Z1bmMobXNnLl9wcm9ncmVzcykgJiYgbXNnLl9wcm9ncmVzcyhldmVudCwgcGFyc2VJbnQoZXZlbnQubG9hZGVkKjEwMC9ldmVudC50b3RhbCksIGV2ZW50LnRvdGFsLCBldmVudC5sb2FkZWQpCgkJCX0KCQl9IGVsc2UgeyAvLyDor7fmsYLmlbDmja4KCQkJdmFyIGRhdGEgPSBjYW4uY29yZS5JdGVtcyhmb3JtLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGtleSkgeyByZXR1cm4ga2V5KyI9IitlbmNvZGVVUklDb21wb25lbnQodmFsdWUpIH0pLmpvaW4oIiYiKQoJCQl4aHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpCgkJfQoKCQkvLyDlj5HpgIHor7fmsYIKCQl4aHIuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IiwgbXNnLl9hY2NlcHR8fCJhcHBsaWNhdGlvbi9qc29uIikKCQl0cnkgeyB4aHIuc2VuZChkYXRhKSB9IGNhdGNoKGUpIHsgY2FuLm1pc2MuTG9nKGUpIH0KCX0sCglSdW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGRhdGFzZXQsIGNtZHMsIGNiKSB7CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50fHx7fSksIHNraXAgPSB7X2hhbmRsZTogdHJ1ZX0KCQl2YXIgZm9ybSA9IHtjbWRzOiBjbWRzfHxtc2cuY21kfTsgbXNnLm9wdGlvbiAmJiBtc2cub3B0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQlpZiAodHlwZW9mIG1zZy5PcHRpb24oaXRlbSkgPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIH0KCQkJaWYgKHR5cGVvZiBtc2cuT3B0aW9uKGl0ZW0pID09IGxhbmcuRlVOQ1RJT04pIHsgcmV0dXJuIH0KCQkJIXNraXBbaXRlbV0gJiYgbXNnW2l0ZW1dICYmIChmb3JtW2l0ZW1dID0gbXNnW2l0ZW1dKQoJCX0pCgoJCWNhbi5taXNjLlBPU1QoY2FuLCBtc2csIGNhbi5iYXNlLk1lcmdlVVJMKGRhdGFzZXQubmFtZXMudG9Mb3dlckNhc2UoKSwKCQkJIl9uYW1lIiwgKG1zZy5fY2FuLnN1cHx8bXNnLl9jYW4pLl9uYW1lLCAiX2luZGV4IiwgKG1zZy5fY2FuLnN1cHx8bXNnLl9jYW4pLl9pbmRleCwKCQkJaWNlLk1TR19EQUVNT04sIG1zZy5fX2RhZW1vbnx8ZGF0YXNldC5kYWVtb258fCIiCgkJKSwgZm9ybSwgY2IpCgl9LAoJV1NTOiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiLCBvbm9wZW4sIG9uY2xvc2UsIG9uZXJyb3IpIHsgaWYgKGNhbi51c2VyLmlzSUUpIHsgcmV0dXJuIH0KCQl2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgiaHR0cCIsICJ3cyIpKyIvLyIrbG9jYXRpb24uaG9zdCsiL3NwYWNlLyIKCQlpZiAodXJsLmluZGV4T2YoImNocm9tZSIpID09IDApIHsgdXJsID0gIndzOi8vbG9jYWxob3N0OjkwMjAvc3BhY2UvIiB9CgoJCXZhciBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGNhbi5iYXNlLk1lcmdlVVJMKHVybCwgYXJncykpCgkJc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBjbGkuQ0xPU0UsIGFyZ3MpCgkJCWNhbi5iYXNlLmlzRnVuYyhvbmNsb3NlKT8gb25jbG9zZShzb2NrZXQpOiBjYW4uY29yZS5UaW1lcihjYW4uYmFzZS5yYW5kb20oMzAwMCwgMTAwMCksIGZ1bmN0aW9uKCkgewoJCQkJYXJncy5uYW1lID0gYXJncy5uYW1lfHxjYW4uX3dzc19uYW1lCgkJCQljYW4ubWlzYy5XU1MoY2FuLCBhcmdzLCBjYiwgb25vcGVuLCBvbmVycm9yLCBvbmNsb3NlKQoJCQl9KQoJCX0sIHNvY2tldC5vbmVycm9yID0gZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZyhodG1sLldTUywgY2xpLkVSUk9SLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25lcnJvcik/IG9uZXJyb3Ioc29ja2V0KTogc29ja2V0LmNsb3NlKCkKCgkJfSwgc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGNsaS5PUEVOLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25vcGVuKSAmJiBvbm9wZW4oc29ja2V0KQoJCX0KCgkJc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIOino+aekOWRveS7pAoJCQl0cnkgeyB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgfSBjYXRjaCAoZSkgeyB2YXIgZGF0YSA9IHtkZXRhaWw6IFtldmVudC5kYXRhXX0gfQoKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgbXNnLlJlcGx5ID0gZnVuY3Rpb24oKSB7IC8vIOWbnuWkjeWRveS7pAoJCQkJbXNnLk9wdGlvbih7X2hhbmRsZTogdHJ1ZSwgX3NvdXJjZTogKG1zZ1tpY2UuTVNHX1RBUkdFVF18fFtdKS5yZXZlcnNlKCkuc2xpY2UoMSkuam9pbihpY2UuUFQpfHwiIiwgX3RhcmdldDogKG1zZ1tpY2UuTVNHX1NPVVJDRV18fFtdKS5yZXZlcnNlKCkuam9pbihpY2UuUFQpfSkKCQkJCW1zZy5yZXN1bHQgPSAobXNnLnJlc3VsdHx8W10pLmNvbmNhdChjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykpLCBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGljZS5NU0dfUkVTVUxULCBtc2cucmVzdWx0LCBtc2cpCgkJCQlkZWxldGUobXNnLl9ldmVudCksIGRlbGV0ZShtc2cuX2NhbiksIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpCgkJCX0sIG1zZy5kZXRhaWwgPSBkYXRhLmRldGFpbCwgbXNnLkNvcHkoZGF0YSkKCgkJCXRyeSB7IC8vIOaJp+ihjOWRveS7pAoJCQkJY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBpY2UuTVNHX0RFVEFJTCwgbXNnLmRldGFpbCwgbXNnKQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgbXNnLCBtc2cuZGV0YWlsWzBdLCBtc2cuZGV0YWlsLnNsaWNlKDEpKQoJCQl9IGNhdGNoIChlKSB7IGNhbi5taXNjLkxvZyhlKSwgbXNnLlJlcGx5KCkgfQoJCX0KCX0sCgoJQ29va2llU2Vzc2lkOiBzaHkoIuS8muivneWPmOmHjyIsIGZ1bmN0aW9uKGNhbiwgdmFsdWUsIHBhdGgpIHsKCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llKGNhbiwgaWNlLk1TR19TRVNTSUQrIl8iK2Nhbi5iYXNlLnJlcGxhY2VBbGwobG9jYXRpb24uaG9zdCwgaWNlLlBULCAiXyIsIGljZS5ERiwgIl8iKSwgdmFsdWUsIHBhdGgpCgl9KSwKCUNvb2tpZTogc2h5KCLkvJror53lj5jph48iLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUsIHBhdGgpIHsKCQlmdW5jdGlvbiBzZXQoaywgdikgeyBkb2N1bWVudC5jb29raWUgPSBrKyI9Iit2KyI7cGF0aD0iKyhwYXRofHxpY2UuUFMpIH0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBmb3IgKHZhciBrIGluIGtleSkgeyBzZXQoaywga2V5W2tdKSB9IGtleSA9IHVuZGVmaW5lZCB9CgoJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHZhciBjcyA9IHt9CgkJCWRvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyAiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGxzID0gaXRlbS5zcGxpdCgiPSIpOyBjc1tsc1swXV0gPSBsc1sxXSB9KQoJCQlyZXR1cm4gY3MKCQl9CgoJCXZhbHVlICE9IHVuZGVmaW5lZCAmJiBzZXQoa2V5LCB2YWx1ZSkKCQl2YXIgdmFsID0gKG5ldyBSZWdFeHAoa2V5KyI9KFteO10qKTs/IikpLmV4ZWMoZG9jdW1lbnQuY29va2llKQoJCXJldHVybiB2YWwgJiYgdmFsLmxlbmd0aCA+IDA/IHZhbFsxXTogIiIKCX0pLAoJU2VhcmNoT3JDb25mOiBmdW5jdGlvbihjYW4sIGtleSwgZGVmKSB7IHJldHVybiBjYW4uYmFzZS5nZXRWYWxpZChjYW4ubWlzYy5TZWFyY2goY2FuLCBrZXkpLCBjYW4uQ29uZihrZXkpLCBkZWYpIH0sCglTZWFyY2hIYXNoOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5faW5kZXggPT0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgImNtZCIpKSB7CgkJCXJldHVybiBsb2NhdGlvbi5oYXNoLnNsaWNlKDEpCgkJfQoJfSwKCVNlYXJjaDogc2h5KCLor7fmsYLlj4LmlbAiLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsgdmFyIGFyZ3MgPSB7fQoJCWlmICh2YWx1ZSA9PSB1bmRlZmluZWQgJiYgY2FuLmJhc2UuaXNTdHJpbmcoa2V5KSkgewoJCQl2YXIgbHMgPSBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdChpY2UuUFMpOyBpZiAobHNbMV0gPT0gY2hhdC5TSEFSRSkgeyBhcmdzW2NoYXQuU0hBUkVdID0gbHNbMl0gfQoJCQlmb3IgKHZhciBpID0gMjsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IGlmICh7InBvZCI6IHRydWUsICJjbWQiOiB0cnVlfVtsc1tpXV0pIHsgYXJnc1tsc1tpXV0gPSBsc1tpKzFdIH0gfQoJCX0KCQlsb2NhdGlvbi5zZWFyY2ggJiYgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IHZhciB4ID0gaXRlbS5zcGxpdCgiPSIpCgkJCXhbMV0gIT0gIiIgJiYgKGFyZ3NbeFswXV0gPSBkZWNvZGVVUklDb21wb25lbnQoeFsxXSkpCgkJfSkKCgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJY2FuLmNvcmUuSXRlbShrZXksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJCWlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsgYXJnc1trZXldID0gdmFsdWUgfSBhcmdzW2tleV0gPT0gIiIgJiYgZGVsZXRlKGFyZ3Nba2V5XSkKCQkJfSkKCQl9IGVsc2UgewoJCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gYXJncyB9CgkJCWlmICh2YWx1ZSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGFyZ3Nba2V5XSB9CgkJCWFyZ3Nba2V5XSA9IHZhbHVlLCBhcmdzW2tleV0gPT0gIiIgJiYgZGVsZXRlKGFyZ3Nba2V5XSkKCQl9CgoJCXZhciBzZWFyY2ggPSBjYW4uY29yZS5JdGVtKGFyZ3MsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGtleSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB9KS5qb2luKCImIikKCQlyZXR1cm4gc2VhcmNoPyBsb2NhdGlvbi5zZWFyY2ggPSBzZWFyY2g6IGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5wYXRobmFtZQoJfSksCglNZXJnZVVSTDogc2h5KCLlnLDlnYDpk77mjqUiLCBmdW5jdGlvbihjYW4sIG9ianMsIGNsZWFyKSB7CgkJdmFyIHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTsgb2Jqcy5fcGF0aCAmJiAocGF0aCA9IG9ianMuX3BhdGgpLCBkZWxldGUob2Jqcy5fcGF0aCkKCQlvYmpzLnBvZCAmJiAocGF0aCA9ICIvY2hhdC9wb2QvIitvYmpzLnBvZCksIGRlbGV0ZShvYmpzLnBvZCkKCQlvYmpzLmNtZCAmJiAocGF0aCA9IChwYXRoLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwPyBwYXRoOiAiL2NoYXQiKSsiL2NtZC8iK29ianMuY21kKSwgZGVsZXRlKG9ianMuY21kKQoJCW9ianMud2Vic2l0ZSAmJiAocGF0aCA9IChwYXRoLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwPyBwYXRoOiAiL2NoYXQiKSsiL3dlYnNpdGUvIitvYmpzLndlYnNpdGUpLCBkZWxldGUob2Jqcy53ZWJzaXRlKQoJCXJldHVybiBjYW4uYmFzZS5NZXJnZVVSTChsb2NhdGlvbi5vcmlnaW4rcGF0aCsoY2xlYXI/IiI6bG9jYXRpb24uc2VhcmNoKSwgb2JqcykKCX0pLAoKCXJ1bkFjdGlvbjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBsaXN0KSB7CgkJaWYgKGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBsaXN0W2NtZHNbMV1dKSB7IHJldHVybiBsaXN0W2NtZHNbMV1dKGNtZHMuc2xpY2UoMikpLCB0cnVlIH0KCQlpZiAobGlzdFtjbWRzWzBdXSkgeyByZXR1cm4gbGlzdFtjbWRzWzBdXShjbWRzLnNsaWNlKDEpKSwgdHJ1ZSB9Cgl9LAoJY29uY2F0OiBmdW5jdGlvbihjYW4sIHRvLCBmcm9tKSB7IHRvID0gdG98fFtdLCBmcm9tID0gZnJvbXx8W10KCQlpZiAoZnJvbVswXSA9PSBjdHguQUNUSU9OICYmIGZyb21bMV0gPT0gaWNlLlJVTiAmJiBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbZnJvbVsyXV0pIHsgcmV0dXJuIGZyb20gfQoJCWlmIChjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbZnJvbVswXV0pIHsgcmV0dXJuIGZyb20gfQoJCWlmIChmcm9tWzBdID09ICJfc2VhcmNoIikgeyByZXR1cm4gZnJvbSB9CgkJcmV0dXJuIHRvLmNvbmNhdChmcm9tKQoJfSwKCXByb3RvOiBmdW5jdGlvbihzdWIsIHN1cCkgeyByZXR1cm4gc3ViLl9fcHJvdG9fXyA9IHN1cCwgc3ViIH0sCgoJTG9nOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyldCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJSW5mbzogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCVdhcm46IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgIndhcm4iXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQlhcmdzLnB1c2goaWNlLk5MLCB0aGlzLl9maWxlTGluZSgpLnNwbGl0KGljZS5OTCkuc2xpY2UoMikuam9pbihpY2UuTkwpKQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJRGVidWc6IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgImRlYnVnIl0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJYXJncy5wdXNoKHRoaXMuZmlsZUxpbmUoMiwgMykpCgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJkZWJ1ZyJdCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKEpTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tpXSkpIH0KCQluYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1vYmlsZSIpID4gLTEgJiYgYWxlcnQoSlNPTi5zdHJpbmdpZnkoYXJncy5qb2luKGljZS5TUCkpKQoJfSwKCUZpbGVMaW5lOiBmdW5jdGlvbihkZXB0aCwgbGVuZ3RoKSB7CgkJcmV0dXJuIHRoaXMuZmlsZUxpbmUoZGVwdGgrMSkuc3BsaXQoaWNlLlBTKS5zbGljZSgzKS5zbGljZSgtbGVuZ3RoKS5qb2luKGljZS5QUykuc3BsaXQoIikiKVswXQoJfSwKCWZpbGVMaW5lOiBmdW5jdGlvbihkZXB0aCkgewoJCXJldHVybiAodGhpcy5fZmlsZUxpbmUoKS5zcGxpdChpY2UuTkwpWzErZGVwdGhdfHwiIikudHJpbSgpCgl9LAoJX2ZpbGVMaW5lOiBmdW5jdGlvbigpIHsgdmFyIG9iaiA9IHt9CgkJRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2Uob2JqLCBhcmd1bWVudHMuY2FsbGVlKQoJCXJldHVybiBvYmouc3RhY2sgfHwgIiIKCX0sCglfdGltZTogZnVuY3Rpb24oKSB7IHZhciBub3cgPSBuZXcgRGF0ZSgpCgkJdmFyIGhvdXIgPSBub3cuZ2V0SG91cnMoKQoJCWlmIChob3VyIDwgMTApIHsgaG91ciA9ICIwIitob3VyIH0KCQl2YXIgbWludXRlID0gbm93LmdldE1pbnV0ZXMoKQoJCWlmIChtaW51dGUgPCAxMCkgeyBtaW51dGUgPSAiMCIrbWludXRlIH0KCQl2YXIgc2Vjb25kID0gbm93LmdldFNlY29uZHMoKQoJCWlmIChzZWNvbmQgPCAxMCkgeyBzZWNvbmQgPSAiMCIrc2Vjb25kIH0KCQlyZXR1cm4gaG91cisiOiIrbWludXRlKyI6IitzZWNvbmQKCX0sCn0pCgpfY2FuX25hbWUgPSAiL2xpYi9wYWdlLmpzIgpWb2xjYW5vcygicGFnZSIsIHtoZWxwOiAi55So5oi355WM6Z2iIiwgQ2xhc3NMaXN0OiB7CgkJaGFzOiBmdW5jdGlvbihjYW4sIG9iaiwga2V5KSB7IHZhciBsaXN0ID0gb2JqLmNsYXNzTmFtZT8gb2JqLmNsYXNzTmFtZS5zcGxpdChpY2UuU1ApOiBbXQoJCQlyZXR1cm4gbGlzdC5pbmRleE9mKGtleSkgPiAtMQoJCX0sCgkJYWRkOiBmdW5jdGlvbihjYW4sIG9iaiwga2V5KSB7IHZhciBsaXN0ID0gb2JqLmNsYXNzTmFtZT8gb2JqLmNsYXNzTmFtZS5zcGxpdChpY2UuU1ApOiBbXQoJCQl2YXIgdmFsdWUgPSBjYW4uYmFzZS5BZGRVbmlxKGxpc3QsIGtleSkuam9pbihpY2UuU1ApLnRyaW0oKQoJCQlyZXR1cm4gdmFsdWUgIT0gb2JqLmNsYXNzTmFtZSAmJiAob2JqLmNsYXNzTmFtZSA9IHZhbHVlKSwgdmFsdWUKCQl9LAoJCWRlbDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJcmV0dXJuIG9iai5jbGFzc05hbWUgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PSBrZXk/IHVuZGVmaW5lZDogdmFsdWUgfSkuam9pbihpY2UuU1ApLnRyaW0oKQoJCX0sCgkJc2V0OiBmdW5jdGlvbihjYW4sIG9iaiwga2V5LCBjb25kaXRpb24pIHsKCQkJcmV0dXJuIChjb25kaXRpb24/IHRoaXMuYWRkKGNhbiwgb2JqLCBrZXkpOiB0aGlzLmRlbChjYW4sIG9iaiwga2V5KSkuaW5kZXhPZihrZXkpID4gLTEKCQl9LAoJCW5lZzogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgewoJCQlyZXR1cm4gKHRoaXMuaGFzKGNhbiwgb2JqLCBrZXkpPyB0aGlzLmRlbChjYW4sIG9iaiwga2V5KTogdGhpcy5hZGQoY2FuLCBvYmosIGtleSkpLmluZGV4T2Yoa2V5KSA+IC0xCgkJfSwKCX0sCglTZWxlY3RBcmdzOiBmdW5jdGlvbihjYW4sIG9wdGlvbiwga2V5LCBjYikgewoJCWlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChrZXkpKSB7IHZhciB2YWx1ZSA9IHt9CgkJCWNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpdGVtLm5hbWUgJiYgaXRlbS52YWx1ZSAmJiAodmFsdWVbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWUpCgkJCX0pOyByZXR1cm4gW3ZhbHVlXQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuSXRlbShrZXksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIG9wdGlvbiwga2V5LCB2YWx1ZSkgfSksIFtrZXldCgkJfQoJCWlmICghY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyB2YXIgdmFsdWUgPSBjYjsgY2IgPSBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtLnR5cGUgPT0gaHRtbC5CVVRUT04pIHsgcmV0dXJuIH0KCQkJcmV0dXJuIGl0ZW0ubmFtZSAmJiAoY2FuLmJhc2UuaXNVbmRlZmluZWQodmFsdWUpPyBpdGVtLnZhbHVlOiAoaXRlbS52YWx1ZSA9IHZhbHVlKSl8fCIiCgkJfSB9CgkJaWYgKGtleS5pbmRleE9mKGljZS5QVCkgPiAtMSkgeyByZXR1cm4gWyIiXX0KCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgb3B0aW9uLCBrZXk/ICJ0ZXh0YXJlYVtuYW1lPSIra2V5KyJdLCIrImlucHV0W25hbWU9IitrZXkrIl0sIisic2VsZWN0W25hbWU9IitrZXkrIl0iOiAiLmFyZ3MiLCBjYikKCX0sCglTZWxlY3RBbGw6IHNoeSgi6YCJ5oup6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgY2IsIGludGVydmFsLCBjYnMpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuSUZSQU1FLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGl0ZW0uY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKQoJCX0pCgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QodGFyZ2V0ICYmIHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKGtleSksIGNiLCBpbnRlcnZhbCwgY2JzKQoJfSksCglTZWxlY3Q6IHNoeSgi6YCJ5oup6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgY2IsIGludGVydmFsLCBjYnMpIHsgaWYgKGtleSA9PSBpY2UuUFQpIHsgY2IodGFyZ2V0KTsgcmV0dXJuIFtdIH0KCQlyZXR1cm4gY2FuLmNvcmUuTGlzdCh0YXJnZXQgJiYgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoY2FuLnBhZ2UuS2V5cyhrZXkpKSwgY2IsIGludGVydmFsLCBjYnMpCgl9KSwKCU1vZGlmeTogc2h5KCLkv67mlLnoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHx7fQoJCXRhcmdldCA9IGNhbi5iYXNlLmlzT2JqZWN0KHRhcmdldCk/IHRhcmdldDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyBpZiAoIXRhcmdldCkgeyByZXR1cm4gfQoJCWNhbi5iYXNlLmlzU3RyaW5nKHZhbHVlKT8gKHRhcmdldC5pbm5lckhUTUwgPSB2YWx1ZSk6IGNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgdmFsKSB7CgkJCWtleSA9PSAiY2xhc3NOYW1lIiAmJiBjYW4uYmFzZS5pc0FycmF5KHZhbCkgJiYgKHZhbCA9IHZhbC5qb2luKGljZS5TUCkpCgkJCSFjYW4uYmFzZS5pc09iamVjdCh2YWwpPyAodGFyZ2V0W2tleV0gPSB2YWwpOiBjYW4uY29yZS5JdGVtKHZhbCwgZnVuY3Rpb24oaywgdikgewoJCQkJdmFyIHNpemUgPSB7CgkJCQkJImhlaWdodCI6IHRydWUsICJtYXgtaGVpZ2h0IjogdHJ1ZSwgIm1pbi1oZWlnaHQiOiB0cnVlLAoJCQkJCSJ3aWR0aCI6IHRydWUsICJtYXgtd2lkdGgiOiB0cnVlLCAibWluLXdpZHRoIjogdHJ1ZSwKCQkJCX0KCQkJCWlmIChzaXplW2tdICYmIHBhcnNlSW50KHYpIDwgMCkgeyByZXR1cm4gdGFyZ2V0W2tleV0gJiYgKHRhcmdldFtrZXldW2tdID0gIiIpIH0KCgkJCQl2YXIgc2l6ZSA9IHsKCQkJCQkibWFyZ2luLXRvcCI6IHRydWUsICJtYXJnaW4tbGVmdCI6IHRydWUsICJmb250LXNpemUiOiB0cnVlLAoJCQkJCSJsZWZ0IjogdHJ1ZSwgInJpZ2h0IjogdHJ1ZSwgInRvcCI6IHRydWUsICJib3R0b20iOiB0cnVlLAoJCQkJCSJoZWlnaHQiOiB0cnVlLCAibWF4LWhlaWdodCI6IHRydWUsICJtaW4taGVpZ2h0IjogdHJ1ZSwKCQkJCQkid2lkdGgiOiB0cnVlLCAibWF4LXdpZHRoIjogdHJ1ZSwgIm1pbi13aWR0aCI6IHRydWUsCgkJCQkJInBhZGRpbmciOiB0cnVlLAoJCQkJfQoKCQkJCWlmIChzaXplW2tdICYmIHYgJiYgKGNhbi5iYXNlLmlzTnVtYmVyKHYpIHx8IHYuaW5kZXhPZiAmJiB2LmluZGV4T2YoInB4IikgPT0gLTEpKSB7IHYgKz0gInB4IiB9CgkJCQl0YXJnZXRba2V5XSAmJiAodGFyZ2V0W2tleV1ba10gPSB2KQoJCQl9KQoJCX0pCgkJcmV0dXJuIHRhcmdldAoJfSksCglSZW1vdmU6IHNoeSgi5Yig6Zmk6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0ICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRhcmdldCksIHRhcmdldAoJfSksCglDcmVhdGU6IHNoeSgi5Yib5bu66IqC54K5IiwgZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoa2V5KSwgdmFsdWUpCgl9KSwKCUFwcGVuZDogc2h5KCLmt7vliqDoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkgeyB2YWx1ZSA9IHZhbHVlfHx7fQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhrZXkpKSB7IHZhciByZXMgPSBjYW4ucGFnZS5DcmVhdGUoY2FuLCBrZXksIHZhbHVlKTsgcmV0dXJuIHRhcmdldC5hcHBlbmRDaGlsZChyZXMpLCByZXMgfQoKCQljYW4uY29yZS5MaXN0KGtleSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaWYgKCFpdGVtKSB7IHJldHVybiB9CgkJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhpdGVtKSkgeyBpdGVtID0ge3ZpZXc6IFtpdGVtXX0gfQoJCQlpZiAoaXRlbS5ub2RlTmFtZSkgeyB0YXJnZXQuYXBwZW5kQ2hpbGQoaXRlbSk7IHJldHVybiB9CgoJCQkvLyDln7rmnKznu5PmnoQ6IHR5cGUgbmFtZSBkYXRhIGxpc3QKCQkJdmFyIHR5cGUgPSBpdGVtLnR5cGV8fGh0bWwuRElWLCBkYXRhID0gaXRlbS5kYXRhfHx7fQoJCQl2YXIgbmFtZSA9IGl0ZW0ubmFtZXx8ZGF0YS5uYW1lfHwiIgoKCQkJLy8g5pWw5o2u6LCD5pW0CgkJCWNhbi5jb3JlLkl0ZW0oaXRlbSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJc3dpdGNoIChrZXkpIHsKCQkJCQljYXNlIG1kYi5UWVBFOiBicmVhawoJCQkJCWNhc2UgbWRiLk5BTUU6IGJyZWFrCgkJCQkJY2FzZSBtZGIuREFUQTogYnJlYWsKCQkJCQljYXNlIG1kYi5MSVNUOiBicmVhawoJCQkJCWNhc2UgaHRtbC5JTk5FUjogZGF0YS5pbm5lckhUTUwgPSBpdGVtLmlubmVyOyBicmVhawoJCQkJCWNhc2UgaHRtbC5DTElDSzogZGF0YS5vbmNsaWNrID0gaXRlbS5jbGljazsgYnJlYWsKCQkJCQlkZWZhdWx0OgoJCQkJCQlpZiAoaXRlbVtrZXldID09IHVuZGVmaW5lZCkgeyBicmVhayB9CgkJCQkJCWRhdGFba2V5XSA9IGl0ZW1ba2V5XQoJCQkJfQoJCQl9KQoKCQkJLy8g5Z+65pys57G75Z6LOiB2aWV3IHRleHQgYnV0dG9uIHNlbGVjdCBpbnB1dCB1c2VybmFtZSBwYXNzd29yZAoJCQkvLyDln7rmnKznsbvlnos6IGltZyByb3cgdGggdGQKCQkJaWYgKGl0ZW0udmlldykgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS52aWV3KQoJCQkJaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdFswXSkpIHsgbGlzdFswXSA9IGxpc3RbMF0uam9pbihpY2UuU1ApIH0KCQkJCWxpc3RbMF0gJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGRhdGEsIGxpc3RbMF0pCgkJCQl0eXBlID0gbGlzdFsxXXx8aHRtbC5ESVYKCQkJCWRhdGEuaW5uZXJIVE1MID0gbGlzdFsyXXx8ZGF0YS5pbm5lckhUTUx8fCIiCgkJCQluYW1lID0gbmFtZXx8bGlzdFszXXx8IiIKCgkJCX0gZWxzZSBpZiAoaXRlbS50ZXh0KSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnRleHQpCgkJCQlkYXRhLmlubmVySFRNTCA9IGxpc3RbMF18fGRhdGEuaW5uZXJIVE1MfHwiIgoJCQkJdHlwZSA9IGxpc3RbMV18fGh0bWwuU1BBTgoJCQkJbGlzdFsyXSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZGF0YSwgbGlzdFsyXSkKCgkJCX0gZWxzZSBpZiAoaXRlbS5idXR0b24pIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0uYnV0dG9uKQoJCQkJdHlwZSA9IGh0bWwuQlVUVE9OLCBuYW1lID0gbmFtZXx8bGlzdFswXQoJCQkJZGF0YS5pbm5lclRleHQgPSBjYW4udXNlci50cmFucyhjYW4sIGxpc3RbMF0pLCBkYXRhLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsxXSkgJiYgbGlzdFsxXShldmVudCwgbmFtZSkKCQkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJCQlyZXR1cm4gdHJ1ZQoJCQkJfQoKCQkJfSBlbHNlIGlmIChpdGVtLnNlbGVjdCkgeyB2YXIgbGlzdCA9IGl0ZW0uc2VsZWN0CgkJCQl0eXBlID0gaHRtbC5TRUxFQ1QsIGRhdGEubmFtZSA9IG5hbWUgPSBuYW1lfHxsaXN0WzBdWzBdCgkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxuYW1lKQoJCQkJZGF0YS5jbGFzc05hbWUgPSBkYXRhLmNsYXNzTmFtZXx8bGlzdFswXVswXXx8IiIKCgkJCQlpdGVtLmxpc3QgPSBsaXN0WzBdLnNsaWNlKDEpLm1hcChmdW5jdGlvbih2YWx1ZSkgewoJCQkJCXJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIHZhbHVlOiB2YWx1ZSwgaW5uZXI6IGNhbi51c2VyLnRyYW5zKGNhbiwgdmFsdWUpfQoJCQkJfSkKCQkJCWRhdGEub25jaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsxXSkgJiYgbGlzdFsxXShldmVudCwgZXZlbnQudGFyZ2V0LnZhbHVlLCBuYW1lKQoJCQkJfQoKCQkJfSBlbHNlIGlmIChpdGVtLmlucHV0KSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmlucHV0KQoJCQkJdHlwZSA9IGh0bWwuSU5QVVQsIG5hbWUgPSBuYW1lfHxsaXN0WzBdfHwiIiwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLnR5cGUgPSBkYXRhLnR5cGV8fCJ0ZXh0IgoJCQkJZGF0YS5jbGFzc05hbWUgPSBkYXRhLmNsYXNzTmFtZXx8ZGF0YS5uYW1lCgkJCQlkYXRhLmF1dG9jb21wbGV0ZSA9ICJvZmYiCgoJCQkJZGF0YS5vbmZvY3VzID0gZGF0YS5vbmZvY3VzfHxmdW5jdGlvbihldmVudCkgewoJCQkJCWV2ZW50LnRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAtMSkKCQkJCX0KCQkJCWRhdGEub25rZXlkb3duID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQpCgkJCQl9CgkJCQlkYXRhLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsyXSkgJiYgbGlzdFsyXShldmVudCkKCQkJCX0KCQkJfSBlbHNlIGlmIChpdGVtLnVzZXJuYW1lKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnVzZXJuYW1lKQoJCQkJdHlwZSA9IGh0bWwuSU5QVVQsIG5hbWUgPSBuYW1lfHxsaXN0WzBdfHxodG1sLlVTRVJOQU1FLCBkYXRhLm5hbWUgPSBkYXRhLm5hbWV8fG5hbWUKCQkJCWRhdGEuY2xhc3NOYW1lID0gbGlzdFsxXXx8ZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8aHRtbC5VU0VSTkFNRQoKCQkJfSBlbHNlIGlmIChpdGVtLnBhc3N3b3JkKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnBhc3N3b3JkKQoJCQkJdHlwZSA9IGh0bWwuSU5QVVQsIG5hbWUgPSBuYW1lfHxsaXN0WzBdfHxodG1sLlBBU1NXT1JELCBkYXRhLm5hbWUgPSBkYXRhLm5hbWV8fG5hbWUKCQkJCWRhdGEuY2xhc3NOYW1lID0gbGlzdFsxXXx8ZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8ImN1cnJlbnQtcGFzc3dvcmQiCgkJCQlkYXRhLnR5cGUgPSBodG1sLlBBU1NXT1JECgoJCQl9IGVsc2UgaWYgKGl0ZW0uaW1nKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmltZykKCQkJCXR5cGUgPSBodG1sLklNRywgZGF0YS5zcmMgPSBsaXN0WzBdCgoJCQl9IGVsc2UgaWYgKGl0ZW0ucm93KSB7IHR5cGUgPSBodG1sLlRSCgkJCQlpdGVtLmxpc3QgPSBpdGVtLnJvdy5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBpdGVtLnN1Ynx8aHRtbC5URF19IH0pCgkJCX0gZWxzZSBpZiAoaXRlbS50aCkgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS50aC5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBodG1sLlRIXX0gfSkKCQkJfSBlbHNlIGlmIChpdGVtLnRkKSB7IHR5cGUgPSBodG1sLlRSCgkJCQlpdGVtLmxpc3QgPSBpdGVtLnRkLm1hcChmdW5jdGlvbih0ZXh0KSB7IHJldHVybiB7dGV4dDogW3RleHQsIGh0bWwuVERdfSB9KQoJCQl9CgoJCQkvLyDor63oqIDovazmjaIKCQkJaWYgKHR5cGUgPT0gaHRtbC5TRUxFQ1QpICB7CgkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxkYXRhLm5hbWUpCgkJCX0KCQkJaWYgKHR5cGUgPT0gaHRtbC5JTlBVVCkgIHsgZGF0YS50eXBlID09IGh0bWwuQlVUVE9OICYmIChkYXRhLnZhbHVlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnZhbHVlKSkKCQkJCWlmIChkYXRhLnR5cGUgPT0gaHRtbC5URVhUfHxkYXRhLnR5cGUgPT0gaHRtbC5QQVNTV09SRHx8IWRhdGEudHlwZSkgeyBkYXRhLmF1dG9jb21wbGV0ZSA9IGRhdGEuYXV0b2NvbXBsZXRlfHwib2ZmIgoJCQkJCS8vIGRhdGEucGxhY2Vob2xkZXIgPSBjYW4udXNlci50cmFucyhjYW4sIChkYXRhLnBsYWNlaG9sZGVyfHxkYXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuUFQpLnBvcCgpKQoJCQkJCWRhdGEucGxhY2Vob2xkZXIgPSAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKQoJCQkJCWRhdGEudGl0bGUgPSBjYW4udXNlci50cmFucyhjYW4sIGRhdGEudGl0bGV8fGRhdGEucGxhY2Vob2xkZXIpCgkJCQl9CgkJCX0KCQkJaWYgKHR5cGUgPT0gaHRtbC5URVhUQVJFQSkgIHsKCQkJCWRhdGEucGxhY2Vob2xkZXIgPSBjYW4udXNlci50cmFucyhjYW4sIChkYXRhLnBsYWNlaG9sZGVyfHxkYXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuUFQpLnBvcCgpKQoJCQl9CgoJCQkvLyDliJvlu7roioLngrkKCQkJIWRhdGEubmFtZSAmJiBpdGVtLm5hbWUgJiYgKGRhdGEubmFtZSA9IGl0ZW0ubmFtZSkKCQkJdmFyIG5vZGUgPSBjYW4ucGFnZS5DcmVhdGUoY2FuLCB0eXBlLCBkYXRhKQoKCQkJLy8g5Yib5bu657Si5byVCgkJCW5hbWUgPSBuYW1lfHxkYXRhLmNsYXNzTmFtZXx8dHlwZXx8IiIKCQkJdmFsdWVbbmFtZXx8IiJdID0gdmFsdWVbZGF0YS5jbGFzc05hbWV8fCIiXSA9IHZhbHVlW3R5cGVdID0gbm9kZQoJCQl2YWx1ZS5maXJzdCA9IHZhbHVlLmZpcnN0fHxub2RlLCB2YWx1ZS5sYXN0ID0gbm9kZQoJCQl2YWx1ZS5fdGFyZ2V0ID0gdmFsdWUuX3RhcmdldHx8bm9kZQoKCQkJLy8g6YCS5b2S6IqC54K5CgkJCWl0ZW0ubGlzdCAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlLCBpdGVtLmxpc3QsIHZhbHVlKQoJCQl0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZENoaWxkICYmIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKQoJCQljYW4uYmFzZS5pc0Z1bmMoaXRlbS5faW5pdCkgJiYgaXRlbS5faW5pdChub2RlLCB2YWx1ZSkKCQl9KQoJCXJldHVybiB2YWx1ZQoJfSksCglBcHBlbmRzOiBzaHkoIua3u+WKoOiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIHZhbHVlKSB7CgkJcmV0dXJuIHRhcmdldC5pbm5lckhUTUwgPSAiIiwgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBrZXksIHZhbHVlKQoJfSksCgoJQXBwZW5kVGFibGU6IHNoeSgi5re75Yqg6KGo5qC8IiwgZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCwgbGlzdCwgY2IpIHsKCQlpZiAoIW1zZy5hcHBlbmR8fG1zZy5hcHBlbmQubGVuZ3RoID09IDApIHtyZXR1cm59CgoJCXZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgaHRtbC5UQUJMRSkKCQl2YXIgdGhlYWQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgInRoZWFkIikKCQl2YXIgdGJvZHkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgInRib2R5IikKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0aGVhZCwgW3t0eXBlOiBodG1sLlRSLCBkYXRhOiB7ZGF0YXNldDoge2luZGV4OiAtMX19LCBsaXN0OiAKCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJCXJldHVybiBrZXlbMF0gPT0gIl8iPyB1bmRlZmluZWQ6IHt0ZXh0OiBba2V5LnRyaW0oKSwgaHRtbC5USF19CgkJCX0pCgkJfV0pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGJvZHksIGNhbi5jb3JlLkxpc3QobXNnLlRhYmxlKCksIGZ1bmN0aW9uKGxpbmUsIGluZGV4LCBhcnJheSkgewoJCQl2YXIgX2xpc3QgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGtleSkgeyBpZiAoa2V5LmluZGV4T2YoIl8iKSA9PSAwKSB7IHJldHVybiB9CgkJCQlyZXR1cm4gY2IoY2FuLnBhZ2UuQ29sb3IobGluZVtrZXldKS50cmltKCksIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KQoJCQl9KQoJCQlyZXR1cm4gX2xpc3QubGVuZ3RoID4gMD8ge3R5cGU6IGh0bWwuVFIsIGRhdGFzZXQ6IHtpbmRleDogaW5kZXh9LCBsaXN0OiBfbGlzdH06IHVuZGVmaW5lZAoJCX0pKQoJCXJldHVybiBjYW4ucGFnZS5PcmRlclRhYmxlKGNhbiwgdGFibGUpCgl9KSwKCU9yZGVyVGFibGU6IGZ1bmN0aW9uKGNhbiwgdGFibGUpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgaHRtbC5USCwgZnVuY3Rpb24odGgsIGluZGV4KSB7CgkJCXRoLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyB2YXIgZGF0YXNldCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0CgkJCQlkYXRhc2V0WyJzb3J0X2FzYyJdID0gKGRhdGFzZXRbInNvcnRfYXNjIl0gPT0gIjEiKSA/IDA6IDEKCQkJCWNhbi5wYWdlLlJhbmdlVGFibGUoY2FuLCB0YWJsZSwgaW5kZXgsIGRhdGFzZXRbInNvcnRfYXNjIl0gPT0gIjEiKQoJCQl9CgkJfSkKCQlyZXR1cm4gdGFibGUKCX0sCglSYW5nZVRhYmxlOiBmdW5jdGlvbihjYW4sIHRhYmxlLCBpbmRleCwgc29ydF9hc2MpIHsKCQl2YXIgbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gdHIuc3R5bGUuZGlzcGxheSA9PSBodG1sLk5PTkV8fGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgImhpZGUiKT8gbnVsbDogdHIKCQl9KS5zbGljZSgxKQoKCQlpbmRleCA9IGNhbi5iYXNlLmlzT2JqZWN0KGluZGV4KT8gaW5kZXg6IFtpbmRleF0KCQlpbmRleCA9IGNhbi5jb3JlLkxpc3QoaW5kZXgsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0gPiAtMSkgeyByZXR1cm4gaXRlbX0gfSkKCQlpZiAoaW5kZXgubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCgkJdmFyIGlzX3RpbWUgPSB0cnVlLCBpc19udW1iZXIgPSB0cnVlCgkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0cikgewoJCQl2YXIgdGV4dCA9IHRyLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dAoJCQlpc190aW1lID0gaXNfdGltZSAmJiBEYXRlLnBhcnNlKHRleHQpID4gMAoJCQlpc19udW1iZXIgPSBpc19udW1iZXIgJiYgIWlzTmFOKHBhcnNlSW50KHRleHQpKQoJCX0pCgoJCXZhciBudW1fbGlzdCA9IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odHIpIHsKCQkJdmFyIHRleHQgPSB0ci5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQKCQkJcmV0dXJuIGlzX3RpbWU/IERhdGUucGFyc2UodGV4dCk6CgkJCQlpc19udW1iZXI/IGNhbi5iYXNlLlBhcnNlU2l6ZSh0ZXh0KTogdGV4dAoJCX0pCgkJZnVuY3Rpb24gaXNsZXNzKGEsIGIsIGluZGV4KSB7CgkJCWlmIChhLmNoaWxkTm9kZXNbaW5kZXhbMF1dICYmIGIuY2hpbGROb2Rlc1tpbmRleFswXV0pIHsKCQkJCWlmIChhLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCA8IGIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0KSB7IHJldHVybiB0cnVlIH0KCQkJCWlmIChhLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCA+IGIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0KSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJcmV0dXJuIGluZGV4Lmxlbmd0aCA+IDEgJiYgaXNsZXNzKGEsIGIsIGluZGV4LnNsaWNlKDEpKQoJCX0KCgkJLy8g6YCJ5oup5o6S5bqPCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBudW1fbGlzdC5sZW5ndGg7IGkrKykgeyB2YXIgbWluID0gaQoJCQlmb3IgKHZhciBqID0gaSsxOyBqIDwgbnVtX2xpc3QubGVuZ3RoOyBqKyspIHsKCQkJCWlmIChudW1fbGlzdFttaW5dID09IG51bV9saXN0W2pdICYmIGluZGV4Lmxlbmd0aCA+IDEgJiYgbGlzdFtpbmRleFsxXV0pIHsKCQkJCQlpZiAoc29ydF9hc2M/IGlzbGVzcyhsaXN0W21pbl0sIGxpc3Rbal0sIGluZGV4LnNsaWNlKDEpKTogaXNsZXNzKGxpc3Rbal0sIGxpc3RbbWluXSwgaW5kZXguc2xpY2UoMSkpKSB7CgkJCQkJCW1pbiA9IGoKCQkJCQl9CgkJCQl9IGVsc2UgaWYgKHNvcnRfYXNjPyBudW1fbGlzdFttaW5dIDwgbnVtX2xpc3Rbal06IG51bV9saXN0W2pdIDwgbnVtX2xpc3RbbWluXSkgewoJCQkJCW1pbiA9IGoKCQkJCX0KCQkJfQoKCQkJaWYgKG1pbiAhPSBpKSB7CgkJCQl2YXIgdGVtcCA9IG51bV9saXN0W2ldOyBudW1fbGlzdFtpXSA9IG51bV9saXN0W21pbl07IG51bV9saXN0W21pbl0gPSB0ZW1wCgkJCQl2YXIgdGVtcCA9IGxpc3RbaV07IGxpc3RbaV0gPSBsaXN0W21pbl07IGxpc3RbbWluXSA9IHRlbXAKCQkJfQoKCQkJdmFyIHRib2R5ID0gbGlzdFtpXS5wYXJlbnRFbGVtZW50CgkJCWxpc3RbaV0ucGFyZW50RWxlbWVudCAmJiB0Ym9keS5yZW1vdmVDaGlsZChsaXN0W2ldKQoJCQl0Ym9keS5hcHBlbmRDaGlsZChsaXN0W2ldKQoJCX0KCX0sCgoJQ2FjaGU6IGZ1bmN0aW9uKG5hbWUsIG91dHB1dCwgZGF0YSkgeyBpZiAoIW5hbWUpIHsgcmV0dXJuIH0KCQl2YXIgY2FjaGUgPSBvdXRwdXQuX2NhY2hlfHx7fTsgb3V0cHV0Ll9jYWNoZSA9IGNhY2hlCgkJaWYgKGRhdGEpIHsgaWYgKG91dHB1dC5jaGlsZHJlbi5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCQl2YXIgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKQoJCQl3aGlsZSAob3V0cHV0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkgeyAvLyDlhpnnvJPlrZgKCQkJCXZhciBpdGVtID0gb3V0cHV0LmNoaWxkTm9kZXNbMF0KCQkJCWl0ZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpdGVtKSwKCQkJCQl0ZW1wLmFwcGVuZENoaWxkKGl0ZW0pCgkJCX0KCQkJcmV0dXJuIGNhY2hlW25hbWVdID0ge25vZGU6IHRlbXAsIGRhdGE6IGRhdGF9LCBuYW1lCgkJfQoJCW91dHB1dC5pbm5lckhUTUwgPSAiIgoKCQl2YXIgbGlzdCA9IGNhY2hlW25hbWVdOyBpZiAoIWxpc3QpIHsgcmV0dXJuIH0KCQl3aGlsZSAobGlzdC5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkgeyAvLyDor7vnvJPlrZgKCQkJdmFyIGl0ZW0gPSBsaXN0Lm5vZGUuY2hpbGROb2Rlc1swXQoJCQlpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSkKCQkJb3V0cHV0LmFwcGVuZENoaWxkKGl0ZW0pCgkJfQoJCXJldHVybiBkZWxldGUoY2FjaGVbbmFtZV0pLCBsaXN0LmRhdGEKCX0sCglGb3JtYXQ6IGZ1bmN0aW9uKHR5cGUpIHsgdmFyIGFyZ3MgPSBhcmd1bWVudHMKCQlzd2l0Y2ggKHR5cGUpIHsKCQkJY2FzZSBodG1sLkE6IHJldHVybiAiPGEgaHJlZj0nIithcmdzWzFdKyInIHRhcmdldD0nX2JsYW5rJz4iKyhhcmdzWzJdfHxhcmdzWzFdKSsiPC9hPiIKCQkJY2FzZSBodG1sLklNRzogcmV0dXJuIGFyZ3NbMl0/ICI8aW1nIHNyYz0nIithcmdzWzFdKyInIGhlaWdodD0iK2FyZ3NbMl0rIj4iOiAiPGltZyBzcmM9JyIrYXJnc1sxXSsiJz4iCgkJfQoJfSwKCXJlcGxhY2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwga2V5LCB2YWx1ZSkgewoJCXJldHVybiBjYW4uYmFzZS5yZXBsYWNlQWxsKHRleHQsICI8IiwgIiZsdDsiLCAiPiIsICImZ3Q7Iiwga2V5LCB2YWx1ZSkKCX0sCglDb2xvcjogZnVuY3Rpb24odGV4dCkgeyBpZiAodHlwZW9mIHRleHQgIT0gbGFuZy5TVFJJTkcpIHsgcmV0dXJuICIiIH0KCQlpZiAodGV4dC5pbmRleE9mKCJodHRwOi8vIikgPT0gMCB8fCB0ZXh0LmluZGV4T2YoImh0dHBzOi8vIikgPT0gMCB8fCB0ZXh0LmluZGV4T2YoImZ0cDovLyIpID09IDApIHsKCQkJdmFyIGxzID0gdGV4dC5zcGxpdChpY2UuU1ApOwoJCQl0ZXh0ID0gIjxhIGhyZWY9JyIrbHNbMF0rIicgdGFyZ2V0PSdfYmxhbmsnPiIrbHNbMF0rIjwvYT4iK2xzLnNsaWNlKDEpLmpvaW4oaWNlLlNQKQoJCX07IHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcbi9nLCAiPGJyPiIpCgoJCWlmICh0ZXh0LmluZGV4T2YoIlwwMzNcWyIpID09IC0xKSB7IHJldHVybiB0ZXh0IH0KCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszMW0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojZjAwJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzMybS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiMwZjAnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzNtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2ZmMCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNG0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMDBmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM2bS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiMwZmYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzQ7MW0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMDBmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM3OzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2ZmZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFsxbS9nLCAiPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OmJvbGQnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMG0vZywgIjwvc3Bhbj4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcW20vZywgIjwvc3Bhbj4iKQoJCXJldHVybiB0ZXh0Cgl9LAoJaW5wdXQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdmFsdWUpIHsKCQl2YXIgaW5wdXQgPSB7dHlwZTogaHRtbC5JTlBVVCwgbmFtZTogaXRlbS5uYW1lLCBkYXRhOiBpdGVtLCBkYXRhc2V0OiB7fSwgX2luaXQ6IGl0ZW0uX2luaXQsIHN0eWxlOiBpdGVtLnN0eWxlfHx7fX0KCQlpdGVtLnZhbHVlID09IGljZS5BVVRPICYmIChpdGVtLnZhbHVlID0gIiIsIGl0ZW0uYWN0aW9uID0gaWNlLkFVVE8pLCBpdGVtLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAoaW5wdXQuZGF0YXNldC5hY3Rpb24gPSBpY2UuQVVUTykKCgkJc3dpdGNoIChpdGVtLnR5cGUgPSBpdGVtLnR5cGV8fGh0bWwuVEVYVCkgewoJCQljYXNlIGh0bWwuVEVYVEFSRUE6IGlucHV0LnR5cGUgPSBodG1sLlRFWFRBUkVBCgkJCQlpbnB1dC5zdHlsZS5oZWlnaHQgPSBpbnB1dC5zdHlsZS5oZWlnaHR8fGNhbi5Db25mKFtjdHguRkVBVFVSRSwgaHRtbC5URVhUQVJFQSwgaXRlbS5uYW1lLCBodG1sLkhFSUdIVF0uam9pbihpY2UuUFQpKXx8Y2FuLkNvbmYoWyJmZWF0dXJlIiwgaHRtbC5URVhUQVJFQSwgaHRtbC5IRUlHSFRdLmpvaW4oaWNlLlBUKSkKCQkJCWlucHV0LnN0eWxlLndpZHRoID0gaW5wdXQuc3R5bGUud2lkdGh8fGNhbi5Db25mKFtjdHguRkVBVFVSRSwgaHRtbC5URVhUQVJFQSwgaXRlbS5uYW1lLCBodG1sLldJRFRIXS5qb2luKGljZS5QVCkpfHxjYW4uQ29uZihbImZlYXR1cmUiLCBodG1sLlRFWFRBUkVBLCBodG1sLldJRFRIXS5qb2luKGljZS5QVCkpCgkJCQkvLyBubyBicmVhawoJCQljYXNlIGh0bWwuVVNFUk5BTUU6CgkJCWNhc2UgaHRtbC5QQVNTV09SRDoKCQkJCS8vIG5vIGJyZWFrCgkJCWNhc2UgaHRtbC5URVhUOgoJCQkJaXRlbS5hdXRvY29tcGxldGUgPSAib2ZmIgoJCQkJaXRlbS5uYW1lID0gaXRlbS5uYW1lfHxpdGVtLnR5cGUKCQkJCWl0ZW0udmFsdWUgPSB2YWx1ZXx8aXRlbS52YWx1ZXx8IiIKCQkJCWl0ZW0ucGxhY2Vob2xkZXIgPSBpdGVtLnBsYWNlaG9sZGVyfHxpdGVtLm5hbWV8fGl0ZW0udHlwZQoJCQkJaXRlbS50aXRsZSA9IGl0ZW0udGl0bGV8fGl0ZW0ucGxhY2Vob2xkZXJ8fGl0ZW0ubmFtZXx8aXRlbS50eXBlCgkJCQlpdGVtLmNsYXNzTmFtZSB8fCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgY3R4LkFSR1MpCgkJCQlicmVhawoJCQljYXNlIGh0bWwuU0VMRUNUOiBpbnB1dC50eXBlID0gaHRtbC5TRUxFQ1QKCQkJCWl0ZW0udmFsdWVzID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbS52YWx1ZXMpPyBjYW4uY29yZS5TcGxpdChpdGVtLnZhbHVlcyk6IGl0ZW0udmFsdWVzCgkJCQlpZiAoIWl0ZW0udmFsdWVzICYmIGl0ZW0udmFsdWUpIHsgaXRlbS52YWx1ZXMgPSBjYW4uY29yZS5TcGxpdChpdGVtLnZhbHVlKSwgaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWVzWzBdIH0KCgkJCQlpdGVtLnZhbHVlID0gdmFsdWV8fGl0ZW0udmFsdWUsIGlucHV0Lmxpc3QgPSBpdGVtLnZhbHVlcy5tYXAoZnVuY3Rpb24odmFsdWUpIHsKCQkJCQlyZXR1cm4ge3R5cGU6IGh0bWwuT1BUSU9OLCB2YWx1ZTogdmFsdWUsIGlubmVyOiB2YWx1ZX0KCQkJCX0pLCBpdGVtLmNsYXNzTmFtZSB8fCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgY3R4LkFSR1MpCgkJCQlicmVhawoJCQljYXNlIGh0bWwuQlVUVE9OOiBpdGVtLnZhbHVlID0gaXRlbS52YWx1ZXx8aXRlbS5uYW1lfHxtZGIuTElTVDsgYnJlYWsKCQkJY2FzZSAidXBmaWxlIjogaXRlbS50eXBlID0gaHRtbC5GSUxFOyBicmVhawoJCQljYXNlIGh0bWwuVVBMT0FEOiBpdGVtLnR5cGUgPSBodG1sLkZJTEUsIGlucHV0Lm5hbWUgPSBodG1sLlVQTE9BRDsgYnJlYWsKCQkJZGVmYXVsdDoKCQl9CgkJcmV0dXJuIGlucHV0Cgl9LAoJaW5wdXRzOiBmdW5jdGlvbihjYW4sIGxpc3QpIHsKCQl2YXIgX2xpc3QgPSBbXTsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgkJCXN3aXRjaCAobGlzdFtpXSkgeyBjYXNlICIiOiBfbGlzdC5wdXNoKCIiKTsgYnJlYWsKCQkJCWNhc2UgaWNlLkFVVE86CgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJsaXN0In0pCgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJiYWNrIn0pCgkJCQkJYnJlYWsKCQkJCWNhc2UgbWRiLlBBR0U6CgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuTElNSVQsIHZhbHVlOiBjYW4uX21zZy5PcHRpb24obWRiLkxJTUlUKX0pCgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuT0ZGRU5ELCB2YWx1ZTogY2FuLl9tc2cuT3B0aW9uKG1kYi5PRkZFTkQpfSkKCQkJCQlfbGlzdC5wdXNoKG1kYi5QUkVWLCBtZGIuTkVYVCkKCQkJCQlicmVhawoJCQkJZGVmYXVsdDoKCQkJCQkoZnVuY3Rpb24oKSB7IHZhciBpdGVtID0gY2FuLmNvcmUuU3BsaXRJbnB1dChsaXN0W2ldLCBodG1sLkJVVFRPTik7CgkJCQkJCWlmIChpdGVtLnR5cGUgPT0gaHRtbC5TRUxFQ1QpIHsKCQkJCQkJCWl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgdGFyZ2V0LnZhbHVlID0gaXRlbS52YWx1ZXx8aXRlbS52YWx1ZXNbMF0sIHRhcmdldC5vbmNoYW5nZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5ydW4oZXZlbnQpIH0gfQoJCQkJCQl9CgkJCQkJCWl0ZW0uYWN0aW9uICYmIChmdW5jdGlvbigpIHsgaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KSB9IH0pKCkKCQkJCQkJaXRlbS50eXBlID09IGh0bWwuQlVUVE9OPyBfbGlzdC5wdXNoKGxpc3RbaV0pOiBfbGlzdC5wdXNoKGl0ZW0pCgkJCQkJfSkgKCkKCQkJfQoJCX0KCQlyZXR1cm4gX2xpc3QKCX0sCgoJc3R5bGVEaXNwbGF5OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuRElTUExBWSwgdmFsdWUpLCB0YXJnZXQuc3R5bGUuZGlzcGxheQoJfSwKCXN0eWxlSGVpZ2h0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCB2YWx1ZSksIHRhcmdldC5vZmZzZXRIZWlnaHQKCX0sCglzdHlsZVdpZHRoOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHZhbHVlKSwgdGFyZ2V0Lm9mZnNldFdpZHRoCgl9LAoJc3R5bGVDbGFzczogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7Y2xhc3NOYW1lOiB2YWx1ZX0pCgl9LAoJc3R5bGU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBzdHlsZSkgeyB2YXIgdmFsdWUgPSB7fQoJCWZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCWlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuT0JKRUNUKSB7CgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtzdHlsZTogYXJndW1lbnRzW2ktLV19KQoJCQl9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gPT0gbGFuZy5VTkRFRklORUQpIHsKCQkJCWNvbnRpbnVlCgkJCX0gZWxzZSB7CgkJCQl2YWx1ZVthcmd1bWVudHNbaV1dID0gYXJndW1lbnRzW2krMV0KCQkJfQoJCX0KCQlyZXR1cm4gY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7c3R5bGU6IHZhbHVlfSksIHZhbHVlCgl9LAoJS2V5czogZnVuY3Rpb24oKSB7IHZhciBsaXN0ID0gW10gLy8gRlMgU1AgR1QgUFQKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgdiA9IGFyZ3VtZW50c1tpXQoJCQlpZiAodHlwZW9mIHYgPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCWZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgewoJCQkJCWlmICh0eXBlb2YgdltqXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJCQlmb3IgKHZhciBrID0gMDsgayA8IHZbal0ubGVuZ3RoOyBrKyspIHsKCQkJCQkJCWlmICh0eXBlb2YgdltqXVtrXSA9PSBsYW5nLk9CSkVDVCkgeyB2W2pdW2tdID0gdltqXVtrXS5qb2luKGljZS5QVCkgfQoJCQkJCQl9CgkJCQkJCXZbal0gPSB2W2pdLmpvaW4oaWNlLkdUKQoJCQkJCX0KCQkJCX0KCQkJCWxpc3QucHVzaCh2LmpvaW4oaWNlLlNQKSkKCQkJfSBlbHNlIHsKCQkJCWxpc3QucHVzaCh2KyIiKQoJCQl9CgkJfQoJCXJldHVybiBsaXN0LmpvaW4oaWNlLkZTKQoJfSwKCWNzczogZnVuY3Rpb24odGV4dCkgewoJCXZhciBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKQoJCXN0eWxlU2hlZXQudHlwZSA9ICJ0ZXh0L2NzcyIsIHN0eWxlU2hlZXQuaW5uZXJUZXh0ID0gdGV4dAoJCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVTaGVldCkKCX0sCgl0YWdpczogZnVuY3Rpb24odHlwZSwgdGFyZ2V0KSB7IHR5cGUgPSB0eXBlb2YgdHlwZSA9PSBsYW5nLk9CSkVDVD8gdHlwZTogW3R5cGVdCgkJaWYgKHR5cGUuaW5kZXhPZih0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7IHJldHVybiB0cnVlIH0KCX0sCglvZmZzZXRUb3A6IGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHJlcyA9IDAKCQl3aGlsZSAoaXRlbSkgeyByZXMgKz0gaXRlbS5vZmZzZXRUb3B8fDAsIGl0ZW0gPSBpdGVtLnBhcmVudE5vZGUgfQoJCXJldHVybiByZXMKCX0sCglvZmZzZXRMZWZ0OiBmdW5jdGlvbihpdGVtKSB7IHZhciByZXMgPSAwCgkJLy8gaWYgKGl0ZW0ub2Zmc2V0TGVmdCkgeyByZXR1cm4gaXRlbS5vZmZzZXRMZWZ0IH0KCQl3aGlsZSAoaXRlbSkgeyByZXMgKz0gaXRlbS5vZmZzZXRMZWZ0fHwwLCBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQlyZXR1cm4gcmVzCgl9LAoJZWRpdGFibGU6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgb2spIHsgaXRlbS5zZXRBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIsIG9rKSB9LAoJZHJhZ2dhYmxlOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG9rKSB7IGl0ZW0uc2V0QXR0cmlidXRlKCJkcmFnZ2FibGUiLCBvaykgfSwKCglBcHBlbmRWdWU6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3Z1ZUAyL2Rpc3QvdnVlLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ucmVxdWlyZShbImh0dHBzOi8vdW5wa2cuY29tL2VsZW1lbnQtdWkvbGliL2luZGV4LmpzIiwgImh0dHBzOi8vdW5wa2cuY29tL2VsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2luZGV4LmNzcyJdLCBmdW5jdGlvbigpIHsKCQkJCW5ldyBWdWUoY2FuLmJhc2UuQ29weSh7ZWw6IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIFt7dHlwZTogImRpdiIsIGlubmVyOiBsaXN0fV0pLmZpcnN0fSwgbWV0YSkpCgkJCX0pCgkJfSkKCX0sCgoJaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZm9yZSwgcGFyZW50KSB7IHBhcmVudCA9IHBhcmVudHx8YmVmb3JlLnBhcmVudE5vZGUKCQl2YXIgaXRlbSA9IGNhbi5iYXNlLmlzQXJyYXkobGlzdCk/IGNhbi5wYWdlLkFwcGVuZChjYW4sIHBhcmVudCwgbGlzdCkuZmlyc3Q6IGxpc3QKCQlyZXR1cm4gYmVmb3JlICYmIHBhcmVudC5pbnNlcnRCZWZvcmUoaXRlbSwgYmVmb3JlKSwgaXRlbQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL3VzZXIuanMiClZvbGNhbm9zKCJ1c2VyIiwge2hlbHA6ICLnlKjmiLfmk43kvZwiLCBpbmZvOiB7fSwgYWdlbnQ6IHsKCQlzY2FuUVJDb2RlOiBmdW5jdGlvbihjYiwgY2FuKSB7CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogInRleHQiLCB0ZXh0OiAiIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQljYihsaXN0WzBdLCBjYW4uYmFzZS5QYXJzZUpTT04obGlzdFswXSkpCgkJCX0pCgkJfSwKCQlnZXRMb2NhdGlvbjogZnVuY3Rpb24oY2IpIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJCWlmIChjYWxsLl9yZXMpIHsgcmV0dXJuIGNiKGNhbGwuX3JlcykgfQoKCQkJbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbihyZXMpIHsKCQkJCWNiKGNhbGwuX3JlcyA9IHtsYXRpdHVkZTogcGFyc2VJbnQocmVzLmNvb3Jkcy5sYXRpdHVkZSoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHJlcy5jb29yZHMubG9uZ2l0dWRlKjEwMDAwMCl9KQoJCQl9LCBmdW5jdGlvbihzb21lKSB7CgkJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYih7dHlwZTogInVua25vd24iLCBuYW1lOiAidW5rbm93biIsIGxhdGl0dWRlOiAzOTk4NDEyLCBsb25naXR1ZGU6IDExNjMwNzQ4fSkKCQkJfSApOwoJCX0sCgkJb3BlbkxvY2F0aW9uOiBmdW5jdGlvbihtc2cpIHsKCQkJd2luZG93Lm9wZW4oImh0dHBzOi8vbWFwLmJhaWR1LmNvbS9zZWFyY2gvIitlbmNvZGVVUklDb21wb25lbnQobXNnLk9wdGlvbihtZGIuVEVYVCkpCgkJCQkrIi9AMTI5NTg3NTAuMDg1LDQ4MjU3ODUuNTUsMTZ6P3F1ZXJ5dHlwZT1zJmRhX3NyYz1zaGFyZXVybCZ3ZD0iK2VuY29kZVVSSUNvbXBvbmVudChtc2cuT3B0aW9uKG1kYi5URVhUKSkpCgkJfSwKCQljaG9vc2VJbWFnZTogZnVuY3Rpb24oY2IpIHsKCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IoW10pCgkJfSwKCX0sCglpc1dlaVhpbjogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNaWNyb01lc3NlbmdlciIpID4gLTEsCglpc0lQaG9uZTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJpUGhvbmUiKSA+IC0xLAoJaXNNb2JpbGU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTW9iaWxlIikgPiAtMSwKCWlzTWFjT1NYOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1hYyBPUyBYIikgPiAtMSwKCWlzV2luZG93czogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJXaW5kb3dzIikgPiAtMSwKCWlzSUU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID4gLTEsCglpc0V4dGVuc2lvbjogbG9jYXRpb24gJiYgbG9jYXRpb24ucHJvdG9jb2wgJiYgbG9jYXRpb24ucHJvdG9jb2wgPT0gImNocm9tZS1leHRlbnNpb246IiwKCWlzTG9jYWxGaWxlOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wcm90b2NvbCAmJiBsb2NhdGlvbi5wcm90b2NvbCA9PSAiZmlsZToiLAoJaXNMYW5kc2NhcGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQgfSwKCWlzUG9ydHJhaXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQgfSwKCW1vZDogewoJCWlzUG9kOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDAgfHwgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL3gvIikgPT0gMCksCgkJaXNEaXY6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9kaXYvIikgPT0gMCksCgkJaXNDbWQ6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMCAmJiBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY21kLyIpID4gMCB8fAoJCQlsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9jbWQvIikgPT0gMCB8fCBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvaGVscC8iKSA9PSAwKSwKCQlpc1dlYjogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwICYmIGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi93ZWJzaXRlLyIpID4gMCB8fAoJCQlsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC93ZWJzaXRlLyIpID09IDApLAoJfSwKCglhbGVydDogZnVuY3Rpb24odGV4dCkgeyBhbGVydChKU09OLnN0cmluZ2lmeSh0ZXh0KSkgfSwKCWNvbmZpcm06IGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIGNvbmZpcm0oSlNPTi5zdHJpbmdpZnkodGV4dCkpIH0sCglwcm9tcHQ6IGZ1bmN0aW9uKHRpcCwgZGVmLCBjYiwgc2lsZW50KSB7ICh0ZXh0ID0gc2lsZW50PyBkZWY6IHByb21wdCh0aXAsIGRlZnx8IiIpKSAhPSB1bmRlZmluZWQgJiYgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IodGV4dCk7IHJldHVybiB0ZXh0IH0sCglyZWxvYWQ6IGZ1bmN0aW9uKGZvcmNlKSB7IChmb3JjZSB8fCBjb25maXJtKCLph43mlrDliqDovb3pobXpnaLvvJ8iKSkgJiYgbG9jYXRpb24ucmVsb2FkKCkgfSwKCWp1bXBzOiBmdW5jdGlvbih1cmwpIHsgbG9jYXRpb24uaHJlZiA9IHVybCB9LAoJb3BlbjogZnVuY3Rpb24odXJsKSB7IHdpbmRvdy5vcGVuKHVybCkgfSwKCWNsb3NlOiBmdW5jdGlvbih1cmwpIHsgd2luZG93LmNsb3NlKCkgfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGltZSwgZm10KSB7IHZhciBub3cgPSBjYW4uYmFzZS5EYXRlKHRpbWUpCgkJdmFyIGxpc3QgPSBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il06IFsi5ZGo5pelIiwgIuWRqOS4gCIsICLlkajkuowiLCAi5ZGo5LiJIiwgIuWRqOWbmyIsICLlkajkupQiLCAi5ZGo5YWtIl0KCQlyZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAoZm10fHwiJXktJW0tJWQgJUg6JU06JVMiKS5yZXBsYWNlKCIldyIsIGxpc3Rbbm93LmdldERheSgpXSkpCgl9LAoJYXJnczogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7CgkJCXJldHVybiBjYW4uYmFzZS5PYmoobG9jYWxTdG9yYWdlLmdldEl0ZW0oY3R4LkFSR1MpLCB7fSkKCQl9CgkJcmV0dXJuIHt9Cgl9LAoKCXRpdGxlOiBmdW5jdGlvbih0ZXh0KSB7CgkJaWYgKHdpbmRvdy53ZWJ2aWV3KSB7IHJldHVybiB0aXRsZSh0ZXh0KSB9CgkJcmV0dXJuIHRleHQgJiYgKGRvY3VtZW50LnRpdGxlID0gVm9sY2Fub3MubWV0YS5hcmdzLm5hbWV8fHRleHQpLCBkb2N1bWVudC50aXRsZQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIG5hbWUpIHsgY2FuLmJhc2UuaXNBcnJheShuYW1lKSAmJiAobmFtZSA9IGNhbi5iYXNlLmpvaW4obmFtZSkpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgKG5hbWUgKz0gIiBtb2JpbGUiKSAmJiBjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIChuYW1lICs9ICIgbGFuZHNjYXBlIikKCQljYW4udXNlci5sYW5ndWFnZShjYW4pICYmIChuYW1lICs9ICIgIitjYW4udXNlci5sYW5ndWFnZShjYW4pKQoJCWNhbi5Db25mKCJkaXNwbGF5IikgJiYgKG5hbWUgKz0gIiAiK2Nhbi5Db25mKCJkaXNwbGF5IikpCgkJY2FuLnVzZXIubW9kLmlzQ21kICYmIChuYW1lICs9ICIgc2ltcGxlIikKCQljYW4ucGFnZS5zdHlsZUNsYXNzKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIG5hbWUpCgl9LAoJbGFuZ3VhZ2U6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwgImxhbmd1YWdlIikgfSwKCXRyYW5zOiBmdW5jdGlvbihjYW4sIHRleHQsIGxpc3QpIHsgaWYgKGNhbi5iYXNlLmlzT2JqZWN0KHRleHQpKSB7CgkJCXJldHVybiBjYW4uY29yZS5JdGVtKHRleHQsIGZ1bmN0aW9uKGssIHYpIHsgY2FuLmNvcmUuVmFsdWUoY2FuLl90cmFucywgaywgdikgfSkKCQl9CgoJCWlmIChjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiIpIHsgcmV0dXJuIHRleHQgfQoJCWlmIChjYW4uYmFzZS5pc0Z1bmN0aW9uKHRleHQpKSB7IHRleHQgPSB0ZXh0Lm5hbWV8fCIiIH0KCQlyZXR1cm4gbGlzdCYmbGlzdFt0ZXh0XSB8fCBjYW4uQ29uZigidHJhbnMuIit0ZXh0KSB8fCBjYW4uQ29uZigiZmVhdHVyZS5fdHJhbnMuIit0ZXh0KSB8fCBjYW4uX3RyYW5zJiZjYW4uX3RyYW5zW3RleHRdIHx8IHsKCQkJImNyZWF0ZSI6ICLliJvlu7oiLCAicmVtb3ZlIjogIuWIoOmZpCIsICJpbnNlcnQiOiAi5re75YqgIiwgImRlbGV0ZSI6ICLliKDpmaQiLCAibW9kaWZ5IjogIue8lui+kSIsCgkJCSJpbnB1dHMiOiAi6KGl5YWoIiwgInBydW5lcyI6ICLmuIXnkIYiLCAiZXhwb3J0IjogIuWvvOWHuiIsICJpbXBvcnQiOiAi5a+85YWlIiwKCQkJImxpc3QiOiAi5p+l55yLIiwgImJhY2siOiAi6L+U5ZueIiwgInJ1biI6ICLmiafooYwiLCAiZG9uZSI6ICLlrozmiJAiLCAic2hhcmUiOiAi5YWx5LqrIiwKCQkJImVkaXQiOiAi57yW6L6RIiwgInNhdmUiOiAi5L+d5a2YIiwgImNvcHkiOiAi5aSN5Yi2IiwgInNob3ciOiAi5pi+56S6IiwgImhpZGUiOiAi6ZqQ6JePIiwKCQkJInByb2plY3QiOiAi6aG555uuIiwgInByb2ZpbGUiOiAi6K+m5oOFIiwgImFjdGlvbnMiOiAi5Y+C5pWwIiwKCQkJImRvd25sb2FkIjogIuS4i+i9vSIsICJ0b2ltYWdlIjogIuaIquWbviIsCgkJCSJwbHVnaW4iOiAi5o+S5Lu2IiwKCQkJInByZXYiOiAi5LiK5LiA6aG1IiwgIm5leHQiOiAi5LiL5LiA6aG1IiwKCgkJCSJDbG9zZSI6ICLlhbPpl60iLAoJCQkiQ2xvc2Ugb3RoZXJzIjogIuWFs+mXreWFtuWugyIsCgkJCSJDbG9zZSBhbGwiOiAi5YWz6Zet5omA5pyJIiwKCgkJCSJ0cmFzaCI6ICLliKDpmaQiLAoJCQkib3BlbiI6ICLmiZPlvIAiLCAiY2xvc2UiOiAi5YWz6ZetIiwKCQkJInN0YXJ0IjogIuWQr+WKqCIsICJzdG9wIjogIuWBnOatoiIsCgkJCSJiZWdpbiI6ICLlvIDlp4siLCAiZW5kIjogIue7k+adnyIsCgkJCSJjbGVhciI6ICLmuIXnqboiLCAicmVmcmVzaCI6ICLliLfmlrAiLAoJCQkic3VibWl0IjogIuaPkOS6pCIsICJjYW5jZWwiOiAi5Y+W5raIIiwKCQkJImxhYmVsIjogIuagh+etviIsICJleGVjIjogIuaJp+ihjCIsCgkJfVt0ZXh0XXx8dGV4dAoJfSwKCXRvYXN0U2NyaXB0OiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7CgkJdmFyIHVpID0gY2FuLnVzZXIudG9hc3QoY2FuLCB7dGl0bGU6IHRpdGxlLCBkdXJhdGlvbjogLTEsIHdpZHRoOiAtMzAwLCBjb250ZW50OiBjb250ZW50LCBhY3Rpb246IFtjbGkuQ0xPU0VdfSkKCQljYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4sIHVpLl90YXJnZXQpCgl9LAoJdG9hc3RDb25maXJtOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlLCBhY3Rpb24pIHsKCQlyZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCB7dGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50LCBhY3Rpb246IGFjdGlvbnx8W2NsaS5DTE9TRV0sIGR1cmF0aW9uOiAtMSwgd2lkdGg6IC0zMDB9KQoJfSwKCXRvYXN0UHJvY2VzczogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSkgeyByZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCBjb250ZW50LCB0aXRsZXx8aWNlLlBST0NFU1MsIC0xKSB9LAoJdG9hc3RTdWNjZXNzOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sIGNvbnRlbnQsIHRpdGxlfHxpY2UuU1VDQ0VTUykgfSwKCXRvYXN0OiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlLCBkdXJhdGlvbiwgcHJvZ3Jlc3MpIHsKCQl2YXIgbWV0YSA9IGNhbi5iYXNlLmlzT2JqZWN0KGNvbnRlbnQpPyBjb250ZW50OiB7Y29udGVudDogY29udGVudCwgdGl0bGU6IHRpdGxlfHxjYW4uX2hlbHAsIGR1cmF0aW9uOiBkdXJhdGlvbiwgcHJvZ3Jlc3M6IHByb2dyZXNzfQoJCXZhciB3aWR0aCA9IG1ldGEud2lkdGh8fDQwMCwgaGVpZ2h0ID0gbWV0YS5oZWlnaHR8fDEwMDsgaWYgKHdpZHRoIDwgMCkgeyB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICsgd2lkdGggfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCAgW3t2aWV3OiBjaGF0LlRPQVNULCBzdHlsZTogewoJCQlsZWZ0OiAod2luZG93LmlubmVyV2lkdGgtd2lkdGgpLzIsIHdpZHRoOiB3aWR0aCwgYm90dG9tOiAxMDAsCgkJfSwgbGlzdDogWwoJCQl7dGV4dDogW21ldGEudGl0bGV8fCIiLCBodG1sLkRJViwgaHRtbC5USVRMRV0sIHRpdGxlOiAi54K55Ye75aSN5Yi2Iiwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgbWV0YS50aXRsZSkKCQkJfX0sCgkJCXt2aWV3OiAiZHVyYXRpb24iLCB0aXRsZTogIueCueWHu+WFs+mXrSIsIG9uY2xpY2s6IGZ1bmN0aW9uKCkgeyBhY3Rpb24uY2xvc2UoKSB9fSwKCQkJY2FuLmJhc2UuaXNPYmplY3QobWV0YS5jb250ZW50KT8gbWV0YS5jb250ZW50OiB7dGV4dDogW21ldGEuY29udGVudHx8IuaJp+ihjOaIkOWKnyIsIGh0bWwuRElWLCAiY29udGVudCJdfSwKCgkJCXt2aWV3OiBodG1sLkFDVElPTn0sIG1ldGEucHJvZ3Jlc3MgIT0gdW5kZWZpbmVkICYmIHt2aWV3OiAicHJvZ3Jlc3MiLCBzdHlsZToge3dpZHRoOiB3aWR0aH0sIGxpc3Q6IFsKCQkJCXt2aWV3OiAiY3VycmVudCIsIHN0eWxlOiB7d2lkdGg6IChtZXRhLnByb2dyZXNzfHwwKS8xMDAqd2lkdGh9fSwKCQkJXX0sCgkJXSB9XSkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgbWV0YS5hY3Rpb24gJiYgbWV0YS5hY3Rpb24ubGlzdD8gbWV0YS5hY3Rpb24ubGlzdDogbWV0YS5hY3Rpb258fFsiIl0sIHVpLmFjdGlvbiwgewoJCQlfZW5naW5lOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCQl2YXIgY2IgPSBtZXRhLmFjdGlvbltidXR0b25dfHxtZXRhLmFjdGlvbjsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgYnV0dG9uKQoJCQl9LAoJCQlvcGVuOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKG1ldGEuY29udGVudC5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjYW4udXNlci5vcGVuKG1ldGEuY29udGVudCkgfQoJCQkJaWYgKG1ldGEudGl0bGUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgY2FuLnVzZXIub3BlbihtZXRhLnRpdGxlKSB9CgkJCX0sCgkJCWNsb3NlOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBhY3Rpb24uX3RhcmdldCksIGFjdGlvbi50aW1lci5zdG9wID0gdHJ1ZSB9LAoJCQl0aW1lcjogY2FuLmNvcmUuVGltZXIoe2ludGVydmFsOiAxMDAsIGxlbmd0aDogKHBhcnNlSW50KG1ldGEuZHVyYXRpb258fDEwMDApKS8xMDB9LCBmdW5jdGlvbihldmVudCwgaW50ZXJ2YWwsIGluZGV4KSB7CgkJCQlpZiAoaW5kZXggPiAzMCkgeyB1aS5kdXJhdGlvbi5pbm5lckhUTUwgPSBwYXJzZUludChpbmRleC8xMCkraWNlLlBUKyhpbmRleCUxMCkrInMuLi4iIH0KCQkJfSwgZnVuY3Rpb24oKSB7IGFjdGlvbi5jbG9zZSgpIH0pLCBfdGFyZ2V0OiB1aS5fdGFyZ2V0LCB1aTogdWksCgkJfSk7IGNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdWkuX3RhcmdldCkKCgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05UT0FTVCwgY2FuLnJlcXVlc3Qoe30sIHt0aW1lOiBjYW4uYmFzZS5UaW1lKCksIHRpdGxlOiBtZXRhLnRpdGxlLCBjb250ZW50OiBtZXRhLmNvbnRlbnQsIGZpbGVsaW5lOiBjYW4ubWlzYy5GaWxlTGluZSgyLCAyKX0pKQoJCXJldHVybiAhbWV0YS5hY3Rpb24gJiYgY2FuLm9ubW90aW9uLmZsb2F0LmFkZChjYW4sIGNoYXQuVE9BU1QsIGFjdGlvbiksIGFjdGlvbgoJfSwKCXNoYXJlOiBmdW5jdGlvbihjYW4sIG1zZywgY21kKSB7CgkJY2FuLnJ1bihtc2csIGNtZHx8W2N0eC5BQ1RJT04sIGNoYXQuU0hBUkVdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCB7CgkJCQl0aXRsZTogbXNnLkFwcGVuZChtZGIuTkFNRSksIGR1cmF0aW9uOiAtMSwKCQkJCWNvbnRlbnQ6IG1zZy5BcHBlbmQobWRiLlRFWFQpLCBhY3Rpb246IFtjbGkuQ0xPU0UsIGNsaS5PUEVOXSwKCQkJfSksIGNhbi51c2VyLmNvcHkobXNnLl9ldmVudCwgY2FuLCBtc2cuQXBwZW5kKG1kYi5OQU1FKSkKCQl9KQoJfSwKCWxvZ2luOiBmdW5jdGlvbihjYW4sIGNiLCBtZXRob2QsIGF1dG8pIHsgbWV0aG9kID0gY2FuLmJhc2UuT2JqKG1ldGhvZCwgWyLnmbvlvZUiLCAi5omr56CBIl0pCgkJdmFyIGxpc3QgPSB7CgkJCSLnmbvlvZUiOiBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBkYXRhKSB7CgkJCQljYW4ucnVuKHt9LCBbYWFhLkxPR0lOLCBkYXRhW2h0bWwuVVNFUk5BTUVdLCBkYXRhW2h0bWwuUEFTU1dPUkRdXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJaWYgKG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpIHsKCQkJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIueUqOaIt+WQjeaIluWvhueggemUmeivryIpCgkJCQkJfQoJCQkJfSkKCQkJCXJldHVybiB0cnVlCgkJCX0sIAoJCQki5omr56CBIjogZnVuY3Rpb24oKSB7CgkJCQljYW4ubWlzYy5XU1MoY2FuLCB7dHlwZTogaHRtbC5DSFJPTUUsIGNtZDogInB3ZCJ9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQkJCWlmIChjbWQgPT0gInB3ZCIpIHsKCQkJCQkJcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgYXJnWzJdLCBhcmdbMV0sIC0xKSwgbXNnLlJlcGx5KCkKCQkJCQl9CgkJCQkJaWYgKGNtZCA9PSBpY2UuTVNHX1NFU1NJRCkgewoJCQkJCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgYXJnWzBdKSwgbXNnLlJlcGx5KCksIGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCQkJCX0KCQkJCQljYW4uc2VhcmNoKGV2ZW50LCBtc2dbaWNlLk1TR19ERVRBSUxdfHxbXSwgZnVuY3Rpb24obXNnKSB7IG1zZy5SZXBseSgpIH0pCgkJCQl9KQoJCQl9LAoJCQki5o6I5p2DIjogZnVuY3Rpb24oKSB7CgkJCQljYW4ubWlzYy5XU1MoY2FuLCB7dHlwZTogaHRtbC5DSFJPTUUsIGNtZDogInNzbyIsICJ1c2VyLndlYiI6IGxvY2F0aW9uLmhyZWZ9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQkJCWlmIChjbWQgPT0gInB3ZCIpIHsKCQkJCQkJcmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBhcmdbMV0KCQkJCQl9CgkJCQkJaWYgKGNtZCA9PSBpY2UuTVNHX1NFU1NJRCkgewoJCQkJCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgYXJnWzBdKSwgbXNnLlJlcGx5KCksIGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCQkJCX0KCQkJCQljYW4uc2VhcmNoKGV2ZW50LCBtc2dbaWNlLk1TR19ERVRBSUxdfHxbXSwgZnVuY3Rpb24obXNnKSB7IG1zZy5SZXBseSgpIH0pCgkJCQl9KQoJCQl9LAoJCQki6aOe5LmmIjogZnVuY3Rpb24oKSB7IGxvY2F0aW9uLmhyZWYgPSAiL2NoYXQvbGFyay9zc28iIH0sCgkJfTsgaWYgKGF1dG8pIHsgcmV0dXJuIGxpc3RbIuaOiOadgyJdKCkgfSBlbHNlIGlmIChtZXRob2QubGVuZ3RoID09IDEpIHsgbGlzdFttZXRob2RbMF1dKCk7IHJldHVybiB9CgoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KHt9LCBjYW4sIFt7dHlwZTogaHRtbC5VU0VSTkFNRX0sIHt0eXBlOiBodG1sLlBBU1NXT1JEfV0sIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIGRhdGEpIHsgcmV0dXJuIGxpc3RbYnV0dG9uXShldmVudCwgYnV0dG9uLCBkYXRhKSB9LCBtZXRob2QpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdWkuX3RhcmdldCwge2NsYXNzTmFtZTogImlucHV0IGxvZ2luIiwgc3R5bGU6IHtsZWZ0OiAod2luZG93LmlubmVyV2lkdGgtdWkuX3RhcmdldC5vZmZzZXRXaWR0aCkvMiwgdG9wOiB3aW5kb3cuaW5uZXJIZWlnaHQvNn19KQoJfSwKCWxvZ291dDogZnVuY3Rpb24oY2FuLCBmb3JjZSkgeyBpZiAoZm9yY2V8fGNhbi51c2VyLmNvbmZpcm0oImxvZ291dD8iKSkgewoJCWNhbi5ydW5BY3Rpb24oe30sIGFhYS5MT0dPVVQsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TSEFSRSk/IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuU0hBUkUsICIiKTogY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJfSkKCX0gfSwKCgl0b1BORzogZnVuY3Rpb24oY2FuLCBuYW1lLCB0ZXh0LCBoZWlnaHQsIHdpZHRoKSB7CgkJaWYgKHRleHQuaW5kZXhPZigiPHN2ZyIpICE9IDApIHsKCQkJdGV4dCA9ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Jyt0ZXh0KyI8L3N2Zz4iCgkJfQoJCXZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGh0bWwuSU1HKQoJCWltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpCgkJCWNhbnZhcy5oZWlnaHQgPSBoZWlnaHQsIGNhbnZhcy53aWR0aCA9IHdpZHRoCgkJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShpbWcsIDAsIDApCgoJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKQoJCQlhLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKQoJCQlhLmRvd25sb2FkID0gbmFtZSwgYS5jbGljaygpCgkJfSwgaW1nLnNyYyA9ICJkYXRhOmltYWdlL3N2Zyt4bWwsIitlbmNvZGVVUklDb21wb25lbnQodGV4dCkKCX0sCgljb3B5OiBmdW5jdGlvbihldmVudCwgY2FuLCB0ZXh0KSB7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCWlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7IHZhciBvayA9IGZhbHNlCgkJCW5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpLnRoZW4oZnVuY3Rpb24oKSB7IG9rID0gdHJ1ZSB9KTsgaWYgKG9rKSB7CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCB0ZXh0LCAiY29weSBzdWNjZXNzIiksIGNhbi5taXNjLkxvZygiY29weSIsIHRleHQpCgkJCQlyZXR1cm4gdGV4dAoJCQl9CgkJfQoKCQl2YXIgaW5wdXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCB2YWx1ZTogdGV4dH1dKS5maXJzdAoJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGlucHV0KSwgZG9jdW1lbnQuZXhlY0NvbW1hbmQoIkNvcHkiKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaW5wdXQpCgkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgdGV4dCwgImNvcHkgc3VjY2VzcyIpLCBjYW4ubWlzYy5Mb2coImNvcHkiLCB0ZXh0KQoJCXJldHVybiB0ZXh0Cgl9LAoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsgLy8gZXZlbnQgaXRlbSBtZXRhCgkJbWV0YSA9IG1ldGF8fGNhbi5vbmRldGFpbHx8Y2FuLm9uYWN0aW9ufHx7fSwgbGlzdCA9IGxpc3QmJmxpc3QubGVuZ3RoID4gMD8gbGlzdDogbWV0YS5saXN0fHxjYW4uY29yZS5JdGVtKG1ldGEpfHxbXTsgaWYgKGxpc3QubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQljYiA9IGNifHxmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7IHZhciBjYiA9IG1ldGFbYnV0dG9uXXx8bWV0YVsiX2VuZ2luZSJdOyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBjYW4sIGJ1dHRvbikgfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IGNoYXQuQ0FSVEUsIHN0eWxlOiB7bGVmdDogMCwgdG9wOiAwfSwgb25tb3VzZWxlYXZlOiBmdW5jdGlvbihldmVudCkgewoJCQkvLyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KQoJCX0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJcmV0dXJuIGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyBpdGVtID09IiI/IC8qIHNwYWNlICovIHt2aWV3OiAic3BhY2UifTogLyogc3RyaW5nICovIHt2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogY2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkKCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpCgkJCX0gfV0gfTogY2FuLmJhc2UuaXNBcnJheShpdGVtKT8gLyogYXJyYXkgKi8ge3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW1bMF0pKyIgLT4gIn1dLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgc3ViID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgbWV0YSwgaXRlbS5zbGljZSgxKSwgY2IsIGNhcnRlKQoJCQkJY2FydGUuX2Zsb2F0ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhcnRlLl9mbG9hdC5fdGFyZ2V0KSwgY2FydGUuX2Zsb2F0ID0gc3ViCgkJCQljYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHN1Yi5fdGFyZ2V0LCB0cnVlKQoJCQl9IH06IC8qIG9iamVjdCAqLyB7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbS5uYW1lKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLm5hbWUsIG1ldGEsIGluZGV4KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpCgkJCX0gfV0gfQoJCX0pIH1dICkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJdWkuX3RhcmdldC5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSB9CgkJdmFyIGNhcnRlID0ge190YXJnZXQ6IHVpLl90YXJnZXQsIF9wYXJlbnQ6IHBhcmVudCwgbGF5b3V0OiBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpfQoJCXJldHVybiBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGNhcnRlCgl9LAoJY2FydGVSaWdodDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgewoJCXZhciBjYXJ0ZSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpCgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FydGUuX3RhcmdldCwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCBjYXJ0ZS5fdGFyZ2V0LCB0cnVlKSksIGNhcnRlCgl9LAoJY2FydGVDbGllbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsKCQl2YXIgdWkgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuX3RhcmdldCwge2xlZnQ6IGV2ZW50LmNsaWVudFgsIHRvcDogZXZlbnQuY2xpZW50WX0pCgl9LAoKCWlucHV0OiBmdW5jdGlvbihldmVudCwgY2FuLCBmb3JtLCBjYiwgYnV0dG9uKSB7IGlmICghZm9ybSB8fCBmb3JtLmxlbmd0aCA9PSAwKSB7IHJldHVybiBjYigpIH0KCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IFtodG1sLklOUFVUXSwgc3R5bGU6IHtsZWZ0OiAwLCB0b3A6IDB9LCBsaXN0OiBbCgkJCXt2aWV3OiAiY29udGVudCIsIGxpc3Q6IFt7dmlldzogW2h0bWwuT1BUSU9OLCBodG1sLlRBQkxFXSwgbGlzdDogY2FuLmNvcmUuTGlzdChmb3JtLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpdGVtID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IGl0ZW19OiBpdGVtLmxlbmd0aCA+IDA/IHt0eXBlOiBodG1sLlNFTEVDVCwgbmFtZTogaXRlbVswXSwgdmFsdWVzOiBpdGVtLnNsaWNlKDEpfTogaXRlbQoJCQkJaXRlbS50eXBlID0gaXRlbS50eXBlfHwoaXRlbS52YWx1ZXM/IGh0bWwuU0VMRUNUOiBpdGVtLm5hbWUgPT0gaHRtbC5URVhUPyBodG1sLlRFWFRBUkVBOiBodG1sLlRFWFQpCgoJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJCWl0ZW0ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQkJCXZhciBfbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRSwgYWN0aW9uOiBtc2cuT3B0aW9uKGh0bWwuQUNUSU9OKX0sIG1zZywgY2FuLk9wdGlvbigpKQoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS50YWJsZSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkJaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgX21zZy5PcHRpb24oaXRlbS5uYW1lLCBpdGVtLnZhbHVlKQoJCQkJCQl9KQoJCQkJCQljYW4ucnVuKGV2ZW50LCBjbWRzLCBjYiwgdHJ1ZSkKCQkJCQl9CgoJCQkJCWlmIChpdGVtLm5hbWUgIT0gImFjdGlvbiIgJiYgaXRlbS5uYW1lKSB7CgkJCQkJCXRhcmdldC52YWx1ZSA9IG1zZy5PcHRpb24oaXRlbS5uYW1lKXx8Y2FuLk9wdGlvbihpdGVtLm5hbWUpfHx0YXJnZXQudmFsdWV8fCIiCgkJCQkJfQoJCQkJCWl0ZW0ubW9kZSA9ICJzaW1wbGUiCgkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlVTRVJOQU1FKSB7IHJldHVybiB9CgkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlBBU1NXT1JEKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCkKCQkJCX0KCgkJCQkvLyByZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dHlwZTogaHRtbC5URCwgbGlzdDogW3t0ZXh0OiBpdGVtLl90cmFuc3x8Y2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtLm5hbWUpfHwiIn1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFtjYW4ucGFnZS5pbnB1dChjYW4sIGl0ZW0pXX0gXX0KCQkJCXJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRELCBsaXN0OiBbe3RleHQ6IGl0ZW0ubmFtZXx8IiJ9XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtKV19IF19CgkJCX0pfV19LCB7dmlldzogaHRtbC5BQ1RJT059LAoJCV19XSkKCgkJdmFyIGxheW91dCA9IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgYnV0dG9ufHxbaHRtbC5TVUJNSVQsIGh0bWwuQ0FOQ0VMXSwgdWkuYWN0aW9uLCB7CgkJCWZvY3VzOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5maXJzdCwgaHRtbC5JTlBVVF9BUkdTKVswXS5mb2N1cygpIH0sCgkJCWNhbmNlbDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkgfSwKCQkJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGFjdGlvbi5zdWJtaXQoZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQlzdWJtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgZGF0YSA9IHt9LCBhcmdzID0gW10sIGxpc3QgPSBbXQoJCQkJbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLnRhYmxlLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmV0dXJuIGl0ZW0ubmFtZSAmJiBpdGVtLnZhbHVlICYmIGFyZ3MucHVzaChpdGVtLm5hbWUsIGl0ZW0udmFsdWUpLCBkYXRhW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlCgkJCQl9KQoJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9KQoJCQkJIWNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7ZXZlbnQ6IGV2ZW50LCBidXR0b246IGJ1dHRvbiwgZGF0YTogZGF0YSwgbGlzdDogbGlzdCwgYXJnczogYXJnc30pICYmIGFjdGlvbi5jYW5jZWwoKQoJCQkJLy8gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiAhY2IoZXZlbnQsIGJ1dHRvbiwgZGF0YSwgbGlzdCwgYXJncykgJiYgYWN0aW9uLmNhbmNlbCgpCgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwgX3RhcmdldDogdWkuX3RhcmdldCwKCQl9KQoJCWlmIChidXR0b24gPT09ICB0cnVlKSB7IHJldHVybiBhY3Rpb24uc3VibWl0KGV2ZW50LCBjYW4sICJzdWJtaXQiKSwgYWN0aW9uIH0KCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuX3RhcmdldCwgaHRtbC5JTlBVVF9BUkdTLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpbmRleCA9PSAwICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBpdGVtKSB9KQoJCX0pCgkJcmV0dXJuIGFjdGlvbgoJfSwKCXNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdHlwZSwgZmllbGRzLCBjYiwgY2JzKSB7CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmllbGRzOiBmaWVsZHN8fCJ0eXBlLG5hbWUsdGV4dCJ9KQoJCWNhbi5zZWFyY2gobXNnLCBbIlNlYXJjaC5vbmltcG9ydC5zZWxlY3QiLCB0eXBlLCAiIiwgIiJdLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5jb3JlLk5leHQobGlzdCwgY2IsIGNic3x8ZnVuY3Rpb24oKSB7CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgl9LAoJdXBsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBiZWdpbiA9IG5ldyBEYXRlKCkKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IGh0bWwuVVBMT0FELCBzdHlsZToge2xlZnQ6IDAsIHRvcDogMH0sIGxpc3Q6IFsKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OfSwge3ZpZXc6IGh0bWwuT1VUUFVULCBsaXN0OiBbe3ZpZXc6ICJwcm9ncmVzcyJ9XX0sCgkJCXt2aWV3OiBodG1sLlNUQVRVUywgbGlzdDogW3t2aWV3OiBodG1sLlNIT1d9LCB7dmlldzogImNvc3QifSwge3ZpZXc6ICJzaXplIn1dfSwKCQldfV0pOyBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsKCQkJe3R5cGU6IGh0bWwuVVBMT0FELCBvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWFjdGlvbi5zaG93KGV2ZW50LCAwLCBldmVudC50YXJnZXQuZmlsZXNbMF0uc2l6ZSwgMCkKCQkJfX0sIGNsaS5DTE9TRSwKCQldLCB1aS5hY3Rpb24sIHsKCQkJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpIH0sCgkJCWJlZ2luOiBmdW5jdGlvbihldmVudCkgeyBiZWdpbiA9IG5ldyBEYXRlKCkKCQkJCXZhciB1cGxvYWQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5hY3Rpb24sICJpbnB1dFt0eXBlPWZpbGVdIikKCQkJCWlmICh1cGxvYWRbMF0uZmlsZXMubGVuZ3RoID09IDApIHsgcmV0dXJuIHVwbG9hZFswXS5mb2N1cygpIH0KCgkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSwge19oYW5kbGU6ICJ0cnVlIn0pCgkJCQltc2cuX3VwbG9hZCA9IHVwbG9hZFswXS5maWxlc1swXSwgbXNnLl9wcm9ncmVzcyA9IGFjdGlvbi5zaG93CgoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKSwgY2FuLlVwZGF0ZSgpLCBhY3Rpb24uY2xvc2UoKQoJCQkJfSkKCQkJfSwKCQkJc2hvdzogZnVuY3Rpb24gKGV2ZW50LCB2YWx1ZSwgdG90YWwsIGxvYWRlZCkgeyBub3cgPSBuZXcgRGF0ZSgpCgkJCQl2YWx1ZSA9PSAwICYmIGFjdGlvbi5iZWdpbihldmVudCkKCgkJCQl1aS5zaG93LmlubmVySFRNTCA9IHZhbHVlKyIlIgoJCQkJdWkuY29zdC5pbm5lckhUTUwgPSBjYW4uYmFzZS5EdXJhdGlvbihub3cgLSBiZWdpbikKCQkJCXVpLnNpemUuaW5uZXJIVE1MID0gY2FuLmJhc2UuU2l6ZShsb2FkZWQpK2ljZS5QUytjYW4uYmFzZS5TaXplKHRvdGFsKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wcm9ncmVzcywge3dpZHRoOiB2YWx1ZSoodWkub3V0cHV0Lm9mZnNldFdpZHRoLTIpLzEwMH0pCgkJCX0sCgkJfSk7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmFjdGlvbiwgImlucHV0W3R5cGU9ZmlsZV0iKVswXS5jbGljaygpCgoJCXJldHVybiBhY3Rpb24KCX0sCglkb3dubG9hZDogZnVuY3Rpb24oY2FuLCBwYXRoLCBuYW1lLCBleHQpIHsKCQl2YXIgYSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dHlwZTogaHRtbC5BLCBocmVmOiBwYXRoLCBkb3dubG9hZDogY2FuLmNvcmUuS2V5cyhuYW1lLCBleHQpfHxwYXRoLnNwbGl0KGljZS5QUykucG9wKCl9XSkuZmlyc3QKCQlhLmNsaWNrKCksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGEpCgkJcmV0dXJuIHBhdGgKCX0sCglkb3dubG9hZHM6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgZXh0KSB7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCXJldHVybiBjYW4udXNlci5kb3dubG9hZChjYW4sIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3RleHRdKSksIG5hbWUsIGV4dCkKCX0sCgljYW1lcmE6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgewoJCW5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB0cnVlfSwgY2IsIGZ1bmN0aW9uKGVycm9yKSB7CgkJCWNhbi5taXNjLkxvZyhlcnJvcikKCQl9KQoJfSwKCWxvY2FsU3RvcmFnZTogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7CgkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgeyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgfQoJCXJldHVybiBjYW4uYmFzZS5PYmoobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSwge30pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wYW5lbC9hY3Rpb24uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIHJpdmVyID0gY2FuLkNvbmYoY2hhdC5SSVZFUiksIHN0b3JtID0gY2FuLkNvbmYoY2hhdC5TVE9STSkKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmNvcmUuTmV4dChtc2cuVGFibGUoKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQlpdGVtLmhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSkKCQkJaXRlbS53aWR0aCA9IGNhbi5Db25mV2lkdGgoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9YKQoJCQlpdGVtLmZlYXR1cmUgPSBjYW4uYmFzZS5PYmooaXRlbS5mZWF0dXJlfHxpdGVtLm1ldGEpCgkJCWl0ZW0uaW5wdXRzID0gY2FuLmJhc2UuT2JqKGl0ZW0uaW5wdXRzfHxpdGVtLmxpc3QpCgoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgaXRlbSwgZnVuY3Rpb24oc3ViLCBtZXRhLCBza2lwKSB7CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgbWV0YS53aWR0aC0oY2FuLnVzZXIuaXNXaW5kb3dzPyAyMDogMCkpCgkJCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIHJpdmVyLCBzdG9ybSwgc3ViLCBtZXRhKSwgc2tpcCB8fCBuZXh0KCkKCQkJfSkKCQl9LCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uYWN0aW9uLmxheW91dChjYW4sIGNhbi5taXNjLlNlYXJjaE9yQ29uZihjYW4sIGNoYXQuTEFZT1VUKXx8Vm9sY2Fub3MubWV0YS5hcmdzLmxheW91dCwgdHJ1ZSkKCQkJY2FuLm9uaW1wb3J0Ll9tZW51KGNhbiwgbXNnKSwgY2FuLm9ua2V5bWFwLl9pbml0KGNhbikKCQl9KQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgcml2ZXIsIHN0b3JtLCBzdWIsIG1ldGEpIHsgc3ViLl90YXJnZXQuX21ldGEgPSBtZXRhCgkJbWV0YS5pZCAmJiAoc3ViLl9vcHRpb24uZGF0YXNldCA9IHN1Yi5fb3B0aW9uLmRhdGFzZXR8fHt9LCBzdWIuX29wdGlvbi5kYXRhc2V0LmlkID0gbWV0YS5pZCkKCgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgewoJCQlyZXR1cm4gY2FuLnJ1bihzdWIucmVxdWVzdChldmVudCksIGNhbi5taXNjLmNvbmNhdChjYW4sIFtyaXZlciwgc3Rvcm0sIG1ldGEuaWR8fG1ldGEuaW5kZXhdLCBjbWRzKSwgY2IpCgkJfSwgY2FuLl9wbHVnaW5zID0gY2FuLm1pc2MuY29uY2F0KGNhbiwgY2FuLl9wbHVnaW5zLCBbc3ViXSkKCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9hY3Rpb24sIFt7dmlldzogW2h0bWwuVEFCUywgaHRtbC5ESVYsIG1ldGEubmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5GSUVMRFNFVF9QTFVHSU4sIHN1Yi5fdGFyZ2V0KQoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9hY3Rpb24sIGh0bWwuRElWX1RBQlMsIGV2ZW50LnRhcmdldCkKCQl9LCBvbm1vdXNlZW50ZXI6IHN1Yi5fbGVnZW5kLm9ubW91c2VlbnRlciwgb25kYmxjbGljazogc3ViLl9sZWdlbmQub25jbGlja31dKQoJfSwKCV9tZW51OiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8IGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5NRU5VUyksIGNhbi5Db25mKGNoYXQuTUVOVVMpfHxjYW4ub25hY3Rpb24uX21lbnVzKSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbGlzdCkgewoJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uYWN0aW9uLCBsaXN0WzBdXSwgW2NhbiwgYnV0dG9uXSkKCQl9KQoJfSwKCV9zaGFyZTogZnVuY3Rpb24oY2FuLCBzaGFyZSkgeyBzaGFyZSAmJiBjYW4ucnVuKHt9LCBbIl9zaGFyZSIsIHNoYXJlXSwgZnVuY3Rpb24obXNnKSB7CgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fQ01EKQoJCWNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQywgbXNnLk9wdGlvbk9yU2VhcmNoKGNoYXQuVE9QSUMpKQoJCWNhbi51c2VyLnRpdGxlKG1zZy5PcHRpb25PclNlYXJjaChjaGF0LlRJVExFKSkKCgkJY2FuLkNvbmYoY2hhdC5SSVZFUiwgIl9zaGFyZSIsIGNoYXQuU1RPUk0sIHNoYXJlKQoJCW1zZy5MZW5ndGgoKSA+IDAgJiYgY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnKQoJfSkgfSwKCV9jbWQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbmV4dCkgewoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OQUNUSU9OX0NNRCkKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgY2FuLmJhc2UuQ29weShpdGVtLCB7b3B0czogY2FuLm1pc2MuU2VhcmNoKGNhbiksIG1vZGU6ICJjbWQifSksIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1kpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4udXNlci50aXRsZShtZXRhLm5hbWUpLCBza2lwIHx8IG5leHQoKQoJCX0pCgl9LAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4sIGhlaWdodCkgewoJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbi5fdGFyZ2V0LCBoZWlnaHQpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORU5HSU5FLCB7aGVscDogIuino+aekOW8leaTjiIsIF9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBwYWdlLCBtc2csIGNhbiwgY21kcywgY2IpIHsKCXZhciBzdG9ybSA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fcm9vdCwgY2FuLmNvcmUuS2V5cyhjaGF0LlJJVkVSLCBjbWRzWzBdLCBjaGF0LlNUT1JNLCBjbWRzWzFdKSkKCWlmICghc3Rvcm0gfHwgY21kcy5sZW5ndGggIT0gMikgeyByZXR1cm4gZmFsc2UgfQoKCWlmIChzdG9ybS5pbmRleCkgeyAvLyDlkb3ku6TntKLlvJUKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjdHguQ09NTUFORCwgW10uY29uY2F0KHN0b3JtLmluZGV4KSwgY2IpCgl9IGVsc2UgeyAvLyDlkb3ku6TliJfooagKCQljYW4uY29yZS5MaXN0KHN0b3JtLmxpc3QsIGZ1bmN0aW9uKHZhbHVlKSB7CgkJCW1zZy5QdXNoKG1kYi5OQU1FLCB2YWx1ZS5uYW1lfHwiIikKCQkJbXNnLlB1c2gobWRiLkhFTFAsIHZhbHVlLmhlbHB8fCIiKQoJCQltc2cuUHVzaChjdHguSU5QVVRTLCBKU09OLnN0cmluZ2lmeSh2YWx1ZS5pbnB1dHMpKQoJCQltc2cuUHVzaChjdHguRkVBVFVSRSwgSlNPTi5zdHJpbmdpZnkodmFsdWUuZmVhdHVyZSkpCgkJCW1zZy5QdXNoKGN0eC5JTkRFWCwgdmFsdWUuaW5kZXh8fCIiKQoJCQltc2cuUHVzaChjdHguQVJHUywgdmFsdWUuYXJnc3x8IltdIikKCQkJbXNnLlB1c2goY3R4LlNUWUxFLCB2YWx1ZS5zdHlsZXx8IiIpCgkJCW1zZy5QdXNoKGN0eC5ESVNQTEFZLCB2YWx1ZS5kaXNwbGF5fHwiIikKCQkJbXNnLlB1c2goaWNlLk1TR19BQ1RJT04sIHZhbHVlLl9hY3Rpb258fCIiKQoJCX0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCX0KCXJldHVybiB0cnVlCn19KQpWb2xjYW5vcyhjaGF0Lk9OUExVR0lOLCB7aGVscDogIuazqOWGjOaPkuS7tiIsCgkicGFyc2UiOiBzaHkoIuino+aekCIsIHsKCQkic2hvdyI6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7IHZhciBuYW1lID0gY21kc1sxXXx8ImNhbiIKCQkJY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLnRpdGxlKG5hbWUpCgkJCWNtZHMgJiYgY21kc1swXSAmJiBWb2xjYW5vcyhuYW1lLCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgbmFtZSl9LCBbIi9wbHVnaW4vc3RvcnkvcGFyc2UuanMiXSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gY2FuLnJ1biwgc3ViLk9wdGlvbiA9IGZ1bmN0aW9uKCkge30sIGNhbi5pc0NtZE1vZGUoKSAmJiBzdWIuQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQpCgkJCQlzdWIub25hcHBlbmQucGFyc2Uoc3ViLCBzdWIub25hcHBlbmQuX3BhcnNlKHN1YiwgY21kc1swXSwgbmFtZSwgc3ViLkNvbmZIZWlnaHQoKSksIGNhbi5fb3V0cHV0KQoJCQkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sICJtZW51IiwgZnVuY3Rpb24obXNnKSB7CgkJCQkJZGVsZXRlKG1zZy5fZXZlbnQpLCBkZWxldGUobXNnLl9jYW4pCgkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCBKU09OLnN0cmluZ2lmeShtc2cpKQoJCQkJfSkKCQkJfSkKCQl9LAoJfSwgWyJ0ZXh0IiwgIm5hbWUiLCAic2hvdzpidXR0b25AYXV0byIsICJjbGVhcjpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiKSB7CgkJY21kcyAmJiBjbWRzWzBdICYmIGNhbi5fcm9vdC5BY3Rpb24ucnVuKHt9LCBjbWRzLCBjYiwgdHJ1ZSkKCX0pLAoKCSJwbHVnaW4iOiBzaHkoIuaPkuS7tiIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJIm5mcy5zYXZlIjogc2h5KCLkv53lrZjmlofku7YiLCB7fSwgWyJmaWxlPWhpLnR4dCIsICJ0ZXh0OnRleHRhcmVhPSdoZWxsbyB3b3JsZCciLCAic2F2ZTpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiKSB7CgkJY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJCSJzYXZlIiwgZnVuY3Rpb24oY21kcykgeyBjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjbWRzWzFdLCBjbWRzWzBdKSB9CgkJKSkKCX0pLAoJInBpZSI6IHNoeSgi5q+U5L6L5Zu+Iiwge30sIFsibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkRpc3BsYXlTdG9yeSgicGllLmpzIikKCQltc2cuUHVzaCgidmFsdWUiLCAyMDApCgkJbXNnLlB1c2goInZhbHVlIiwgMzAwKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsIDQwMCkKCX0pLAoJImNhbi5jb2RlLmlubmVyLl9wbHVnaW4iOiBzaHkoIuaPkuS7tiIsIHt9LCBbe3R5cGU6ICJidXR0b24iLCBuYW1lOiAibGlzdCIsIGFjdGlvbjogImF1dG8ifSwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHt9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLCBfZm9jdXM6IFtdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25rZXltYXAuX2J1aWxkKGNhbiksIGNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBjaGF0Lk9OS0VZRE9XTiwgZnVuY3Rpb24obXNnLCBtb2RlbCkgewoJCQljYW4uX2tleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKG1zZy5fZXZlbnQsIGNhbiwgbW9kZWwsIGNhbi5fa2V5bGlzdHx8W10sIGNhbi5fb3V0cHV0KQoJCX0pCgl9LAoJX21vZGU6IHsKCQlub3JtYWw6IHsKCQkJajogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldC5zY3JvbGxCeSgwLCBldmVudC5jdHJsS2V5PyAzMDA6IDMwKSB9LAoJCQlrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LnNjcm9sbEJ5KDAsIGV2ZW50LmN0cmxLZXk/IC0zMDA6IC0zMCkgfSwKCgkJCWI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIkhlYWRlci5vbmFjdGlvbi5ibGFjayJdKSB9LAoJCQl3OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJIZWFkZXIub25hY3Rpb24ud2hpdGUiXSkgfSwKCgkJCWc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLuWIm+W7uue+pOe7hCJdKSB9LAoJCQlzOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJSaXZlci5vbmRldGFpbC7mt7vliqDlupTnlKgiXSkgfSwKCQkJdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5re75Yqg5bel5YW3Il0pIH0sCgoJCQkiICI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TRUFSQ0hGT0NVUyksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LAoJCQkiOiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05DT01NQU5ERk9DVVMpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwKCQkJRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiAiIn0pKQoJCQl9LAoJCQlFc2NhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGNhbi5wYWdlLktleXMoaHRtbC5GSUVMRFNFVF9GTE9BVCwgaHRtbC5ESVZfRkxPQVQpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJCX0pCgkJCX0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGNiLCB0YXJnZXQpIHsKCQljYW4uQ29uZihodG1sLk1BUkdJTl9ZLCA0Kmh0bWwuUExVR0lOX01BUkdJTisyKmh0bWwuQUNUSU9OX0hFSUdIVCtodG1sLkFDVElPTl9NQVJHSU4pCgkJY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCwgNCpodG1sLlBMVUdJTl9NQVJHSU4pCgoJCWlmIChjYW4udXNlci5tb2QuaXNQb2QgfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsKCQkJdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiOyBmdW5jdGlvbiB0b2dnbGUodmlldykgeyByZXR1cm4gIWNhbi5zZXRSaXZlcigiZGlzcGxheSIpIH0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPSkVDVF1dLCBsaXN0OiBbe3RleHQ6IFtndCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlldmVudC50YXJnZXQuaW5uZXJIVE1MID0gdG9nZ2xlKCk/IGd0OiBsdCwgY2FuLm9uYWN0aW9uLnJlZnJlc2goY2FuKQoJCQl9fV0pCgkJfQoKCQl0YXJnZXQub250b3VjaHN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fVE9VQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50KSkgfQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogWwoJCVtjaGF0LkxBWU9VVCwgImF1dG8iLCAidGFicyIsICJncmlkIiwgImZyZWUiLCAiZmxvdyIsICJwYWdlIiwgInRvaW1hZ2UiXSwKCQlbaWNlLkhFTFAsICJ0dXRvciIsICJtYW51YWwiLCAic2VydmljZSIsICJkZXZvcHMiLCAicmVmZXIiXSwKCV0sCglfdHJhbnM6IHsKCQkibGF5b3V0IjogIuW4g+WxgCIsCgkJImF1dG8iOiAi6buY6K6k5biD5bGAIiwKCQkiZmxvdyI6ICLmtYHliqjluIPlsYAiLAoJCSJncmlkIjogIue9keagvOW4g+WxgCIsCgkJInRhYnMiOiAi5qCH562+5biD5bGAIiwKCQkiZnJlZSI6ICLoh6rnlLHluIPlsYAiLAoJCSJwYWdlIjogIue9kemhteW4g+WxgCIsCgkJInRvaW1hZ2UiOiAi55Sf5oiQ5Zu+54mHIiwKCgkJImhlbHAiOiAi5biu5YqpIiwKCQkidHV0b3IiOiAi5YWl6Zeo566A5LuLIiwKCQkibWFudWFsIjogIuS9v+eUqOaJi+WGjCIsCgkJInNlcnZpY2UiOiAi5pyN5Yqh5omL5YaMIiwKCQkiZGV2b3BzIjogIue8lueoi+aJi+WGjCIsCgkJInJlZmVyIjogIuWPguiAg+aJi+WGjCIsCgl9LAoJb25tYWluOiBmdW5jdGlvbihjYW4pIHsgY2FuLm9uaW1wb3J0Ll9zaGFyZShjYW4sIGNhbi5taXNjLlNlYXJjaChjYW4sIHdlYi5TSEFSRSkpIH0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4pIHsgaWYgKCFjYW4udXNlci5tb2QuaXNDbWQgJiYgIWNhbi5Db25mKGNoYXQuVE9PTCkpIHsgcmV0dXJuIH0KCQljYW4uX25hbWVzID0gbG9jYXRpb24ucGF0aG5hbWUKCQljYW4uQ29uZihjaGF0LlRPT0wpPyBjYW4uY29yZS5OZXh0KGNhbi5Db25mKGNoYXQuVE9PTCksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jbWQoY2FuLCBpdGVtLCBuZXh0KQoJCX0pOiBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KCksIGN0eC5DT01NQU5ELCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5jb3JlLk5leHQobXNnLlRhYmxlKCksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jbWQoY2FuLCBpdGVtLCBuZXh0KQoJCX0pIH0pCgl9LAoJb25zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7CgkJaWYgKHdvcmRbMF0gPT0gbWRiLlBMVUdJTiB8fCB3b3JkWzBdID09IG1kYi5GT1JFQUNIKSB7IGNhbi5vbmV4cG9ydC5wbHVnaW4oY2FuLCBtc2csIHdvcmQpIH0KCX0sCglvbnNpemU6IGZ1bmN0aW9uKGNhbiwgbXNnLCBoZWlnaHQsIHdpZHRoKSB7IGNhbi5Db25mKHtoZWlnaHQ6IGhlaWdodCwgd2lkdGg6IHdpZHRofSkgfSwKCW9uc3Rvcm1fc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gY2FuLmNvcmUuS2V5cyhjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSkKCQl9LCBjYW4uX2FjdGlvbiwgY2FuLl9vdXRwdXQpKSB7CgkJCXZhciBjb25mID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9yb290LCBjYW4uY29yZS5LZXlzKGNoYXQuUklWRVIsIHJpdmVyLCBjaGF0LlNUT1JNLCBzdG9ybSkpfHx7fQoJCQlyZXR1cm4gY2FuLm9uYWN0aW9uLmxheW91dChjYW4sIGNhbi5taXNjLlNlYXJjaE9yQ29uZihjYW4sIGNoYXQuTEFZT1VUKXx8Vm9sY2Fub3MubWV0YS5hcmdzLmxheW91dHx8Y29uZi5sYXlvdXQsIHRydWUpCgkJfQoKCQljYW4ucnVuKHt9LCBbcml2ZXIsIHN0b3JtXSwgZnVuY3Rpb24obXNnKSB7IGlmIChtc2cuTGVuZ3RoKCkgPiAwKSB7IHJldHVybiBjYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2cpIH0KCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fTk9UT09MLCBjYW4ucmVxdWVzdCh7fSwge3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkpCgkJfSkKCX0sCglvbmFjdGlvbl9jbWQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLkNvbmZIZWlnaHQoY2FuLl9yb290Ll9oZWlnaHQpLCBjYW4uQ29uZldpZHRoKGNhbi5fcm9vdC5fd2lkdGgpCgkJY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCwgMCwgaHRtbC5NQVJHSU5fWSwgMipodG1sLkFDVElPTl9IRUlHSFQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCAic2ltcGxlIikgCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fdGFyZ2V0LCAiY21kIikKCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoJCWNhbi5pc0NtZE1vZGUoKQoJfSwKCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgYnV0dG9uLCBzaWxlbnQpIHsgYnV0dG9uID0gYnV0dG9ufHxpY2UuQVVUTwoJCXZhciBjYiA9IGNhbi5vbmxheW91dFtidXR0b25dOyBpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihjYW4sIHNpbGVudCkpIHsgcmV0dXJuIH0KCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgY2FuLl90YXJnZXQsIGNhbi5Db25mKGNoYXQuTEFZT1VUKSkKCQlpZiAoYnV0dG9uID09IGljZS5BVVRPKSB7IGJ1dHRvbiA9ICIiIH0KCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl90YXJnZXQsIGNhbi5Db25mKGNoYXQuTEFZT1VULCBidXR0b24pKQoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgl9LAoJaGVscDogZnVuY3Rpb24oY2FuLCBidXR0b24pIHsgY2FuLnVzZXIub3BlbigiL2hlbHAvIitidXR0b24rIi5zaHkiKSB9LAoJcmVmcmVzaDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLl9yb290Ll9oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsIGNhbi5fcm9vdC5fd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9YKQoJCWNhbi5jb3JlLkxpc3QoY2FuLl9wbHVnaW5zLCBmdW5jdGlvbihzdWIpIHsgdmFyIHRhYmxlID0gY2FuLmNvcmUuVmFsdWUoc3ViLCBjaGF0Ll9PVVRQVVRfQ1VSUkVOVCkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgod2lkdGgpLShjYW4udXNlci5pc1dpbmRvd3M/IDIwOiAwKSkKCQkJdGFibGUuQ29uZldpZHRoKHdpZHRoKQoJCQl0YWJsZS5vbmltcG9ydC5sYXlvdXQ/IHRhYmxlLm9uaW1wb3J0LmxheW91dCh0YWJsZSk6IGNhbi5vbmFwcGVuZC5fb3V0cHV0KHN1YiwgdGFibGUuX21zZywgc3ViLl9kaXNwbGF5KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OTEFZT1VULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCglncmlkOiBmdW5jdGlvbihjYW4sIHNpbGVudCkgewoJCXZhciBBQ1RJT05fTEFZT1VUX0ZNVCA9ICIgZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyB3aWR0aDpfd2lkdGg7IGhlaWdodDpfaGVpZ2h0OyB9IGZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luPmRpdi5vdXRwdXQgeyB3aWR0aDpfd2lkdGg7IGhlaWdodDpfaGVpZ2h0OyB9ICIKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6ICJtIiwgdmFsdWU6IDJ9LCB7bmFtZTogIm4iLCB2YWx1ZTogMn1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGhlaWdodCwgd2lkdGgpIHsgdmFyIG0gPSBwYXJzZUludChkYXRhLm0pfHwyLCBuID0gcGFyc2VJbnQoZGF0YS5uKXx8MgoJCQkJY2FuLnBhZ2UuY3NzKGNhbi5iYXNlLnJlcGxhY2VBbGwoQUNUSU9OX0xBWU9VVF9GTVQsICJfd2lkdGgiLCAod2lkdGgtKDQqbSsxKSpodG1sLlBMVUdJTl9NQVJHSU4pL20rInB4IiwgIl9oZWlnaHQiLCAoaGVpZ2h0LSg0Km4rMSkqaHRtbC5QTFVHSU5fTUFSR0lOKS9uKyJweCIpKQoJCQl9KQoJCX0sIHNpbGVudCkKCX0sCgl0YWJzOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9hY3Rpb24sIGh0bWwuRElWX1RBQlMsIDApCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkZJRUxEU0VUX1BMVUdJTiwgMCkKCX0sCglmcmVlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3RhcmdldCwgW1todG1sLkRJVl9PVVRQVVQsIGh0bWwuRklFTERTRVRfUExVR0lOXV0sIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwge2xlZnQ6IDQwKmluZGV4LCB0b3A6IDQwKmluZGV4fSkKCQkJY2FuLm9ubW90aW9uLm1vdmUoY2FuLCBpdGVtLCB7bGVmdDogNDAqaW5kZXgsIHRvcDogNDAqaW5kZXh9KQoJCX0pCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi5Db25mKGNoYXQuU1RPUk0pLCBjYW4uX291dHB1dCksIHRydWUKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWFyZ3M6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTmV4dChjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9QTFVHSU4sIGh0bWwuRk9STV9PUFRJT05dXSksIGZ1bmN0aW9uKGl0ZW0sIG5leHQsIGluZGV4LCBhcnJheSkgewoJCQlpdGVtLmRhdGFzZXQuYXJncyA9IEpTT04uc3RyaW5naWZ5KGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWV8fCIiIH0pKQoJCQljYihpdGVtLCBuZXh0LCBpbmRleCwgYXJyYXkpCgkJfSkKCX0sCglzaXplOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb24oaHRtbC5UT1AsIGNhbi5fb3V0cHV0Lm9mZnNldFRvcCkKCQltc2cuT3B0aW9uKGh0bWwuTEVGVCwgY2FuLl9vdXRwdXQub2Zmc2V0TGVmdCkKCQltc2cuT3B0aW9uKGh0bWwuV0lEVEgsIGNhbi5fb3V0cHV0Lm9mZnNldFdpZHRoKQoJCW1zZy5PcHRpb24oaHRtbC5IRUlHSFQsIGNhbi5fb3V0cHV0Lm9mZnNldEhlaWdodCkKCQltc2cuT3B0aW9uKGh0bWwuU0NST0xMLCBjYW4udXNlci5pc01vYmlsZT8gY2FuLl90YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnNjcm9sbFRvcDogY2FuLl9vdXRwdXQuc2Nyb2xsVG9wKQoJCW1zZy5PcHRpb24oaHRtbC5NQVJHSU5fWCwgY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCkpCgkJbXNnLk9wdGlvbihodG1sLk1BUkdJTl9ZLCBjYW4uQ29uZihodG1sLk1BUkdJTl9ZKSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IHJldHVybiBjYW4uQ29uZihjaGF0LkxBWU9VVCkgfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsgdmFyIGZpZWxkcyA9IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbW2h0bWwuRklFTERTRVRfUExVR0lOLCBodG1sLkxFR0VORF1dLCBmdW5jdGlvbihpdGVtKSB7CgkJCWlmIChpdGVtLmlubmVySFRNTC5pbmRleE9mKHdvcmRbMV0pID09IC0xKSB7IHJldHVybiB9CgoJCQl2YXIgbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0ubmV4dFNpYmxpbmcsIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWV8fCIiIH0pCgkJCXZhciBtZXRhID0gaXRlbS5wYXJlbnROb2RlLl9tZXRhOyBpZiAoIW1ldGEpIHsgcmV0dXJuIH0KCgkJCXZhciBkYXRhID0ge2N0eDogImNhbiIsIGNtZDogIkFjdGlvbiIsCgkJCQl0eXBlOiBtZGIuUExVR0lOLCBuYW1lOiBpdGVtLmlubmVySFRNTCwgdGV4dDogc2h5KCLot7PovawiLCBmdW5jdGlvbihldmVudCkgewoJCQkJCXZhciBpbnB1dCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0ucGFyZW50Tm9kZSwgaHRtbC5JTlBVVF9BUkdTKVswXTsgaW5wdXQgJiYgaW5wdXQuZm9jdXMoKQoJCQkJfSksIGFyZ3VtZW50OiBKU09OLnN0cmluZ2lmeShsaXN0KSwKCQkJfQoJCQlpZiAobWV0YS5pbmRleCkgewoJCQkJZGF0YS5jb250ZXh0ID0gIiIsIGRhdGEuY29tbWFuZCA9IG1ldGEuaW5kZXgKCQkJfSBlbHNlIGlmIChtZXRhLmNtZCkgewoJCQkJZGF0YS5jb250ZXh0ID0gbWV0YS5jdHgsIGRhdGEuY29tbWFuZCA9IG1ldGEuY21kCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4KCQkJfQoJCQltc2cuUHVzaChkYXRhLCBmaWVsZHMpCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL2Zvb3Rlci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll90aXRsZShjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fc3RhdGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3RvYXN0KGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9jb21tYW5kKGNhbiwgbXNnLCB0YXJnZXQpCgl9LAoJX3RpdGxlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QobXNnLnJlc3VsdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuVElUTEUsIGh0bWwuRElWLCBpdGVtXSwgdGl0bGU6ICLogZTns7vnq5nplb8ifV0pCgkJfSkKCX0sCglfc3RhdGU6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuU1RBVEUpfHxjYW4uQ29uZihjaGF0LlNUQVRFKSwgWyJuY21kIiwgIm50aXAiXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFtjaGF0LlNUQVRFLCBpdGVtXSksIGh0bWwuRElWLCBjYW4uQ29uZihpdGVtKV0sIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbSwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyI6ICIsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFtjYW4uQ29uZihpdGVtKXx8IiIsIGh0bWwuU1BBTiwgaXRlbV19LAoJCQldLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25leHBvcnRbaXRlbV0oY2FuKSB9fV0pCgkJfSkKCX0sCglfdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4udG9hc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2hhdC5UT0FTVCwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZXhwb3J0WyJudGlwIl0oY2FuKSB9fV0pLmZpcnN0Cgl9LAoJX2NvbW1hbmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiY21kIiwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbik7IGlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlzd2l0Y2ggKGV2ZW50LnRhcmdldC52YWx1ZSkgewoJCQkJY2FzZSBjbGkuQ0xPU0U6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJY2FzZSBjbGkuQ0xFQVI6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJZGVmYXVsdDoKCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBjYW4uY29yZS5TcGxpdChldmVudC50YXJnZXQudmFsdWUsIGljZS5TUCksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQljYW4uY2xpICYmIGNhbi5jbGkuY2xvc2UoKSwgY2FuLm9uZXhwb3J0LmZsb2F0KGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkge30sICJjbGkiLCB0cnVlKQoJCQkJCX0pCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIGNtZCIpCgl9LAoKCXRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZywgdGl0bGUsIGNvbnRlbnQsIGZpbGVsaW5lLCB0aW1lKSB7IGNhbi5fdGlwcyA9IGNhbi5fdGlwc3x8Y2FuLnJlcXVlc3QoKQoJCWNhbi5fdGlwcy5QdXNoKHt0aW1lOiB0aW1lLCBmaWxlbGluZTogZmlsZWxpbmUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudH0pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm50aXAiKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGNhbi50b2FzdCwgW3RpbWUuc3BsaXQoaWNlLlNQKS5wb3AoKSwgdGl0bGUsIGNvbnRlbnRdLmpvaW4oaWNlLlNQKSkKCX0sCgljb3VudDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5jb3JlLktleXMoaHRtbC5TUEFOLCBuYW1lKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLmlubmVySFRNTCA9IGNhbi5Db25mKG5hbWUsIHBhcnNlSW50KGNhbi5Db25mKG5hbWUpfHwiMCIpKzErIiIpKyIiCgkJfSkKCX0sCgluY21kOiBmdW5jdGlvbihjYW4sIG1zZywgX2ZvbGxvdywgX2NtZHMpIHsgY2FuLl9jbWRzID0gY2FuLl9jbWRzfHxjYW4ucmVxdWVzdCgpCgkJY2FuLl9jbWRzLlB1c2goe3RpbWU6IGNhbi5iYXNlLlRpbWUoKSwgZm9sbG93OiBfZm9sbG93LCBjbWRzOiBfY21kc30pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm5jbWQiKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbikgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl90YXJnZXQpIH0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZywgbnVsbCwgY2FuLl9vdXRwdXQpIH0pIH0sCglvbnRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25pbXBvcnQudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2d9KSB9LAoJb25yZW1vdGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmltcG9ydC5uY21kLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkgfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4pIH0sCglvbmNvbW1hbmRmb2N1czogZnVuY3Rpb24oY2FuKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbImRpdi5jbWQiLCAiaW5wdXQiXSwgZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldEhlaWdodCB9LAoJZmxvYXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgbmFtZSwgYm90dG9tKSB7IGlmIChjYW5bbmFtZV0pIHsgcmV0dXJuIGNhbltuYW1lXS5jbG9zZSgpIH0KCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCAic3RvcnkgdG9hc3QgZmxvYXQiLCB7fSwgY2FuLl9yb290Ll90YXJnZXQpCgkJdWkuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuZmlyc3QpLCBkZWxldGUoY2FuW25hbWVdKSB9CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgaGVpZ2h0LCB3aWR0aCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLmZpcnN0LCBodG1sLkxFRlQsIGxlZnQsIGh0bWwuVE9QLCB0b3ApCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkub3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC0yOCwgaHRtbC5NQVhfV0lEVEgsIHdpZHRoKQoJCX0pCgoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW2NsaS5DTE9TRSwgY2xpLlJFRlJFU0gsIHtpbnB1dDogaHRtbC5URVhULCBwbGFjZWhvbGRlcjogImZpbHRlciIsIF9pbml0OiBmdW5jdGlvbihpbnB1dCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgImtleW1hcC5mb2N1cyIsIGNhbi5yZXF1ZXN0KHt9LCB7Y2I6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyB1aS5jbG9zZSgpOyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBpY2UuU1ApIHsgaW5wdXQuZm9jdXMoKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQkJfX0pKQoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCWlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gMCkgeyByZXR1cm4gfQoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgeyBpZiAodGQuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCX0gfSkKCQkJfSkKCQl9fV0sIHVpLmFjdGlvbiwga2l0LkRpY3QoY2xpLkNMT1NFLCB1aS5jbG9zZSwgY2xpLlJFRlJFU0gsIGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmNsb3NlKCksIGNhbi50b2FzdC5jbGljaygpfSkpCgoJCWlmIChtc2cpIHsKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkgewoJCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpCgkJCQl9fQoJCQl9LCB1aS5vdXRwdXQpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cuUmVzdWx0KCksIHVpLm91dHB1dCkKCQl9CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuZmlyc3QsIGJvdHRvbT8ge2JvdHRvbTogaHRtbC5BQ1RJT05fSEVJR0hULCB0b3A6ICIifToge30pLCBjYW5bbmFtZV0gPSB1aQoJfSwKCW50aXA6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fdGlwcywgZnVuY3Rpb24oKSB7fSwgIm50aXAiKQoJfSwKCW5jbWQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fY21kcywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpIHsKCQkJdmFyIGNtZHMgPSBjYW4uYmFzZS5PYmoobGluZS5jbWRzKTsgc3dpdGNoIChsaW5lLmZvbGxvdykgewoJCQkJY2FzZSAiY2FuLkFjdGlvbiI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQkJY2FzZSAiY2FuLkZvb3RlciI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQl9CgkJCXN3aXRjaCAoY21kc1swXSkgewoJCQkJY2FzZSAid2ViLndpa2kud29yZCI6IGNtZHMgPSBjbWRzLnNsaWNlKDUpOyBicmVhawoJCQl9CgoJCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2csIHRvcCwgbGVmdCwgd2lkdGgsIGhlaWdodCkgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogY21kc1swXSwgYXJnczogY21kcy5zbGljZSgxKSwgaGVpZ2h0OiBoZWlnaHQtMTAwLCB3aWR0aDogd2lkdGh9LCBmdW5jdGlvbihzdWIpIHsKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZCwgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNtZHNbMF0sIGNtZCwgY2IpIH0KCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwge3RvcDogdG9wKzEwMCwgbGVmdDogbGVmdH0pCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX2xlZ2VuZCwge2Rpc3BsYXk6IGh0bWwuQkxPQ0t9KQoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIHsibWF4LXdpZHRoIjogd2lkdGh9KQoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBzdWIuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9KQoJCX0sICJuY21kIikKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL2hlYWRlci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5vbmltcG9ydC5fdGl0bGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3N0YXRlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9hdmF0YXIoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2JhY2tncm91bmQoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fbWVudXMoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25kYWVtb24uX2luaXQoY2FuKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCV90aXRsZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKG1zZy5yZXN1bHQsIGNhbi5Db25mKGNoYXQuVElUTEUpfHxbInNoeWxpbnV4LmNvbS94L2NvbnRleHRzIl0pLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5USVRMRSwgaHRtbC5ESVYsIGl0ZW1dLCB0aXRsZTogIui/lOWbnuS4u+mhtSIsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24udGl0bGUoZXZlbnQsIGNhbikKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCB7fSwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgfSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkgewoJCQkJCWV2ZW50LnNoaWZ0S2V5PyBjYW4udXNlci5vcGVuKGxpc3RbaW5kZXhdLnBhdGgpOiBjYW4udXNlci5qdW1wcyhsaXN0W2luZGV4XS5wYXRoKQoJCQkJfSkKCQkJfX1dKQoJCX0pCgl9LAoJX3N0YXRlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LlNUQVRFKXx8Y2FuLkNvbmYoY2hhdC5TVEFURSksIFttZGIuVElNRSwgYWFhLlVTRVJOSUNLXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0gPT0gYWFhLkFWQVRBUiApIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBsaXN0OiBbe2ltZzogaWNlLlNQfV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgW2Nhbi5wYWdlLkZvcm1hdChodG1sLklNRywgY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pLCAxNjApXSkKCQkJCX19XSk7IHJldHVybgoJCQl9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBodG1sLkRJViwgKGNhbi5Db25mKGl0ZW0pfHwiIikuc2xpY2UoMCwgMTApXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbiwgaXRlbV0sIFtldmVudCwgY2FuLCBpdGVtXSkKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtID09IG1kYi5USU1FICYmIGNhbi5vbmltcG9ydC5fdGltZShjYW4sIHRhcmdldCkgfX1dKQoJCX0pCgl9LAoJX2F2YXRhcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgImRpdi5zdGF0ZS5hdmF0YXI+aW1nIiwge3NyYzogY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pfSkKCX0sCglfYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm9ubGF5b3V0LmJhY2tncm91bmQoY2FuLCBjYW4ub25leHBvcnQuYmFja2dyb3VuZChjYW4pKQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuU0VBUkNILCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6ICJjb21tYW5kLHNwYWNlLHRleHQifHxtZGIuRk9SRUFDSCwgd29yZDogZXZlbnQudGFyZ2V0LnZhbHVlfSkpCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIHNlYXJjaCIpCgkJY2FuLm9uaW1wb3J0Lm1lbnUoY2FuLCBtZGIuU0VBUkNILCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiB1aS52YWx1ZX0pKQoJCX0pCgl9LAoJX21lbnVzOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLnVzZXIubW9kLmlzUG9kPyBbY3R4LkNPTkZJR106CgkJCWNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpfHxjYW4uQ29uZihjaGF0Lk1FTlVTKSwgY2FuLm9uYWN0aW9uLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmFjdGlvbltidXR0b25dfHxmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQkJY2FuLnJ1bihldmVudCwgW2J1dHRvbl0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBjYW4udXNlci50cmFucyhjYW4sIGJ1dHRvbikpIH0pCgkJCQl9LCB7ZXZlbnQ6IGV2ZW50LCBjYW46IGNhbiwgYnV0dG9uOiBidXR0b259KQoJCQl9KQoJfSwKCglfdGltZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDUwMH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGltZShjYW4sIHRhcmdldCkgfSkKCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge2FjdGlvbjogImRhdGUiLCBzdHlsZTogeyJtaW4td2lkdGgiOiAzMDZ9LCBfaW5pdDogZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wKSB7IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHt0b3A6IHRvcCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkgfSkKCQl9fSwgdGFyZ2V0KSwgdGFyZ2V0Lm9ubW91c2VlbnRlciA9IHRhcmdldC5jbGljawoJfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmltcG9ydC50b3BpYyhjYW4pCgkJdGFyZ2V0LmlubmVySFRNTCA9IGNhbi51c2VyLnRpbWUoY2FuLCBudWxsLCAiJXcgJUg6JU06JVMiKQoJfSwKCWF2YXRhcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXZhdGFyKSB7IGlmIChjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5BVkFUQVIsIFthdmF0YXJdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5hdmF0YXIgPSBhdmF0YXIsIGNhbi5vbmltcG9ydC5fYXZhdGFyKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIHRvcGljKSB7IHRvcGljICYmIChjYW4uX3RvcGljID0gdG9waWMpCgkJdG9waWMgPSBjYW4uX3RvcGljIHx8IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVE9QSUMpIHx8IFZvbGNhbm9zLm1ldGEuYXJncy50b3BpYyB8fCAoY2FuLmJhc2UuaXNOaWdodCgpPyBjaGF0LkJMQUNLOiBjaGF0LldISVRFKQoJCWNhbi5yZXF1aXJlKFsiL2NoYXQvdG9waWMvIit0b3BpYysiLmNzcyJdKQoJCWNhbi51c2VyLnRvcGljKGNhbiwgdG9waWMpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYmFja2dyb3VuZCkgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuQkFDS0dST1VORCwgW2JhY2tncm91bmRdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZCwgY2FuLm9uaW1wb3J0Ll9iYWNrZ3JvdW5kKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCW1lbnU6IGZ1bmN0aW9uKGNhbiwgY21kcywgY2IsIHRyYW5zKSB7IGNhbi5iYXNlLmlzU3RyaW5nKGNtZHMpICYmIChjbWRzID0gW2NtZHNdKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBjbWRzWzBdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKGNtZHMuc2xpY2UoMSksIFtjbWRzWzBdXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pKSB7CgkJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0sIHRyYW5zKV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgW2l0ZW1dKQoJCQkJCS8vIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIGNtZHMpCgkJCQl9fQoKCQkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc0FycmF5KGl0ZW0pKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHJldHVybiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlLCB0cmFucykgfSkKCQkJCXJldHVybiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIGNhbi51c2VyLnRyYW5zKGNhbiwgbGlzdFswXSwgdHJhbnMpXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LnNsaWNlKDEpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhLCBpbmRleCkgewoJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtW2luZGV4KzFdLCBpdGVtKQoJCQkJCX0sIHRyYW5zKQoJCQkJfX0KCgkJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QoaXRlbSkpIHsKCQkJCXJldHVybiBpdGVtCgkJCX0KCQl9KSB9XSkuZmlyc3QKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJ0b3BpYyI6IHNoeSgi5Li76aKYIiwgewoJCSJkZW1vIjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgY21kc1swXSkgfSwKCX0sIFsidG9waWM6c2VsZWN0PXdoaXRlLGJsYWNrIiwgInJ1bjpidXR0b24iLCAiZGVtbzpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4ub25pbXBvcnQudG9waWMoY2FuLCBjbWRzWzBdKQoJfSksCgkiY29va2llIjogc2h5KCLmj5DnpLoiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm1pc2MuQ29va2llKGNhbiksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJbXNnLlB1c2goImtleSIsIGtleSksIG1zZy5QdXNoKCJ2YWx1ZSIsIHZhbHVlKQoJCX0pCgl9KSwKCSJhbGVydCI6IHNoeSgi5o+Q56S6Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLnVzZXIuYWxlcnQoY21kc1swXSkKCX0pLAoJImluZm8iOiBzaHkoIuS/oeaBryIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJImxvZyI6IHNoeSgi5pel5b+XIiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljb25zb2xlLmxvZyhjbWRzWzBdKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogW1sic2V0dGluZyIsIGNoYXQuQkxBQ0ssIGNoYXQuV0hJVEUsIGNoYXQuUFJJTlQsIGNvZGUuV0VCUEFDSywgInRvaW1hZ2UiLCBjdHguQ09ORklHXV0sCglfdHJhbnM6IHsKCQkic2VhcmNoIjogIuaQnOe0oiIsCgoJCSJzZXR0aW5nIjogIuiuvue9riIsCgkJImJsYWNrIjogIum7keiJsuS4u+mimCIsCgkJIndoaXRlIjogIueZveiJsuS4u+mimCIsCgkJInByaW50IjogIuaJk+WNsOS4u+mimCIsCgkJIndlYnBhY2siOiAi5omT5YyF6aG16Z2iIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoJCSJjb25maWciOiAi5ouJ5Y+W6YWN572uIiwKCgkJInNoYXJldXNlciI6ICLlhbHkuqvnlKjmiLciLAoJCSJzZXRuaWNrIjogIuiuvue9ruaYteensCIsCgkJInBhc3N3b3JkIjogIuS/ruaUueWvhueggSIsCgkJImxhbmd1YWdlIjogIuivreiogOWcsOWMuiIsICJjaGluZXNlIjogIuS4reaWhyIsCgkJImNsZWFyIjogIua4hemZpOiDjOaZryIsCgkJImxvZ291dCI6ICLpgIDlh7rnmbvlvZUiLAoJfSwKCW9ubWFpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmICghY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBtc2cuT3B0aW9uKGFhYS5VU0VSTklDSyl8fG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpKSB7CgkJCQltc2cuT3B0aW9uKGNoYXQuU1NPKT8gY2FuLnVzZXIuanVtcHMobXNnLk9wdGlvbihjaGF0LlNTTykpOiBjYW4udXNlci5sb2dpbihjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OTUFJTiwgbXNnKQoJCQkJfSwgbXNnLk9wdGlvbihhYWEuTE9HSU4pLCBtc2cuT3B0aW9uKCJsb2dpbi5kZXYiKSkKCQkJCXJldHVybiAvLyDnmbvlvZXorqTor4EKCQkJfQoJCQljYW4uYmFzZS5Db3B5KGNhbi5vbmFjdGlvbi5fdHJhbnMsIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuVFJBTlMpLCB7fSkpCgkJCWNhbi51c2VyLmluZm8udXNlcm5pY2sgPSBjYW4uQ29uZihhYWEuVVNFUk5JQ0spLCBjYW4udXNlci5pbmZvLmF2YXRhciA9IG1zZy5PcHRpb24oYWFhLkFWQVRBUiksIGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9IG1zZy5PcHRpb24oYWFhLkJBQ0tHUk9VTkQpCgkJCWNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBhYWEuTEFOR1VBR0UpfHxtc2cuT3B0aW9uKGFhYS5MQU5HVUFHRSkKCQkJbXNnLk9wdGlvbihuZnMuU0NSSVBUKSAmJiBjYW4ucmVxdWlyZShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihuZnMuU0NSSVBUKSksIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25hY3Rpb24uc291cmNlKGNhbiwgbXNnKSB9KSAKCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05MT0dJTiwgbXNnKSB9LCBjYW4uX291dHB1dCkKCQl9KQoJfSwKCW9uc2VhcmNoZm9jdXM6IGZ1bmN0aW9uKGNhbikgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgWyJkaXYuc2VhcmNoIiwgaHRtbC5JTlBVVF0sIGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQuZm9jdXMoKSB9KSB9LAoJb253ZWJwYWNrOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25hY3Rpb25bY29kZS5XRUJQQUNLXShtc2cuX2V2ZW50LCBjYW4pIH0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgeyBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSB9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikgfSwKCgl0aXRsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge307IGNhbi5jb3JlLkxpc3QoW2NoYXQuVElUTEUsIGNoYXQuVE9QSUMsIGNoYXQuTEFZT1VUXSwgZnVuY3Rpb24oa2V5KSB7CgkJCXZhciB2YWx1ZSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSk7IHZhbHVlICYmIChhcmdzW2tleV0gPSB2YWx1ZSkKCQl9KQoJCWNhbi51c2VyLmp1bXBzKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncywgdHJ1ZSkpCgl9LAoKCWJsYWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXdoaXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXByaW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgW2NoYXQuV0hJVEUsIGJ1dHRvbl0pLCBjYW4uc2V0Uml2ZXIoaHRtbC5IRUlHSFQsICIiKSwgY2FuLnNldEFjdGlvbihodG1sLkhFSUdIVCwgIiIpIH0sCgl3ZWJwYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IGNhbi51c2VyLnRpdGxlKCl9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uY29yZS5JdGVtKFZvbGNhbm9zLm1ldGEucGFjaywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgCgkJCQljYW4uY29yZS5MaXN0KFsiX2V2ZW50IiwgIl9jYW4iLCAiX3hociIsIGljZS5NU0dfU0VTU0lELCAiIl0sIGZ1bmN0aW9uKGtleSkgeyBkZWxldGUobXNnW2tleV0pIH0pCgkJCX0pCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgewoJCQkJdG9waWM6IGNhbi5fdG9waWMsIGxheW91dDogIGNhbi5nZXRBY3Rpb24oY2hhdC5MQVlPVVQpLAoJCQkJcml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSksCgkJCQluYW1lOiBkYXRhLm5hbWUsIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KFZvbGNhbm9zLm1ldGEucGFjayksCgkJCQlhcmdzOiAibmFtZSx0b3BpYyxsYXlvdXQscml2ZXIsc3Rvcm0iLAoJCQl9KQoKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIuaJk+WMheS4rS4uLiIsIGNvZGUuV0VCUEFDSykKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5XRUJQQUNLLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQl0b2FzdC5jbG9zZSgpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5omT5YyF5oiQ5YqfIiwgY29kZS5XRUJQQUNLKQoJCQkJY2FuLnVzZXIuZG93bmxvYWQoY2FuLCAiL3NoYXJlL2xvY2FsLyIrbXNnLlJlc3VsdCgpLCBuYW1lLCBuZnMuSFRNTCkKCQkJfSkKCQl9KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi51c2VyLnRpdGxlKCksIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCWNvbmZpZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogInNjb3BlIiwgdmFsdWU6ICJldGMvbG9jYWwuc2h5In1dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT05GSUcsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci5qdW1wcyhtc2cuUmVzdWx0KCkpIH0pCgkJfSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBsaXN0LCBjYikKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXJncykgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0uY29uY2F0KGFyZ3N8fFtdLCBbY2hhdC5SSVZFUiwgY2FuLkNvbmYoY2hhdC5SSVZFUil8fCIiLCBjaGF0LlNUT1JNLCBjYW4uQ29uZihjaGF0LlNUT1JNKXx8IiJdKSkKCX0sCgoJdXNlcm5pY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBbInNoYXJldXNlciIsICJzZXRuaWNrIiwgYWFhLlBBU1NXT1JELCBbYWFhLkxBTkdVQUdFLCBhYWEuQ0hJTkVTRSwgYWFhLkVOR0xJU0hdLCBjbGkuQ0xFQVIsIGFhYS5MT0dPVVRdKQoJfSwKCXNoYXJldXNlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRSwgbWRiLlRZUEUsIGFhYS5MT0dJTl0pCgl9LAoJc2V0bmljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogYWFhLlVTRVJOSUNLLCB2YWx1ZTogY2FuLkNvbmYoYWFhLlVTRVJOSUNLKX1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5VU0VSTklDSywgW2xpc3RbMF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBhYWEuVVNFUk5JQ0spLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaXRlbSwgY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBsaXN0WzBdKSkKCQkJCX0pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCglwYXNzd29yZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IGh0bWwuUEFTU1dPUkQsIHR5cGU6IGh0bWwuUEFTU1dPUkQsIGFjdGlvbjogaWNlLkFVVE99LAoJCQl7bmFtZTogaHRtbC5QQVNTV09SRCwgdHlwZTogaHRtbC5QQVNTV09SRCwgYWN0aW9uOiBpY2UuQVVUT30sCgkJXSwgZnVuY3Rpb24obGlzdCkgewoJCQlpZiAobGlzdFswXSAhPSBsaXN0WzFdKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sICLlr4bnoIHkuI3kuIDoh7QiKSwgdWkuZm9jdXMoKSwgdHJ1ZSB9CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5QQVNTV09SRCwgW2xpc3RbMF1dKQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCgljaGluZXNlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIGFhYS5MQU5HVUFHRSwgInpoIikgfSwKCWVuZ2xpc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwgYWFhLkxBTkdVQUdFLCAiZW4iKSB9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmJhY2tncm91bmQoZXZlbnQsIGNhbiwgIiIpLCBjYW4ub25pbXBvcnQuYXZhdGFyKGV2ZW50LCBjYW4sICIiKSB9LAoJbG9nb3V0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmxvZ291dChjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRIZWlnaHQgfSwKCXRvcGljOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdG9waWMgfSwKCWF2YXRhcjogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYXZhdGFyID09ICJ2b2lkIikgewoJCQlyZXR1cm4gIiIKCQl9CgkJcmV0dXJuIGNhbi51c2VyLmluZm8uYXZhdGFyCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9PSAidm9pZCIpIHsKCQkJcmV0dXJuICIiCgkJfQoJCXJldHVybiBjYW4udXNlci5pbmZvLmJhY2tncm91bmQKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL3JpdmVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ucml2ZXJfbGlzdCA9IHt9LCBjYW4uc3Rvcm1fbGlzdCA9IHt9CgkJY2FuLm9uaW1wb3J0Ll9tYWluKGNhbiwgbXNnKSwgY2FuLm9uaW1wb3J0Ll9tZW51KGNhbiwgbXNnKQoKCQl2YXIgc2VsZWN0OyBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCXJldHVybiBjYW4ub25pbXBvcnQuX3JpdmVyKGNhbiwgaXRlbSwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkoaW5kZXggPT0gMCB8fCBpdGVtLmhhc2ggPT0gY2FuLl9tYWluX3JpdmVyKSAmJiAoc2VsZWN0ID0gdGFyZ2V0KQoJCQl9KQoJCX0pKSwgc2VsZWN0ICYmIHNlbGVjdC5jbGljaygpCgl9LAoJX21haW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJLy8gaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IGNhbi5fbWFpbl9yaXZlciA9ICJwcm9kdWN0IiwgY2FuLl9tYWluX3N0b3JtID0gIm9mZmljZSIgfQoJCS8vIGlmIChjYW4udXNlci5pc1dlaVhpbikgeyBjYW4uX21haW5fcml2ZXIgPSAic2VydmljZSIsIGNhbi5fbWFpbl9zdG9ybSA9ICJ3eCIgfQoJCWNhbi5fbWFpbl9yaXZlciA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuUklWRVIpfHxtc2cuT3B0aW9uKGljZS5NU0dfUklWRVIpfHxWb2xjYW5vcy5tZXRhLmFyZ3Mucml2ZXJ8fGNhbi5fbWFpbl9yaXZlcnx8InByb2plY3QiCgkJY2FuLl9tYWluX3N0b3JtID0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TVE9STSl8fG1zZy5PcHRpb24oaWNlLk1TR19TVE9STSl8fFZvbGNhbm9zLm1ldGEuYXJncy5zdG9ybXx8Y2FuLl9tYWluX3N0b3JtfHwic3R1ZGlvIgoJfSwKCV9tZW51OiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIubW9kLmlzUG9kfHxjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5zZXRIZWFkZXJNZW51KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpLCBjYW4uQ29uZihjaGF0Lk1FTlVTKXx8Y2FuLm9uZGV0YWlsLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmRldGFpbCwgYnV0dG9uXSwgW2V2ZW50LCBjYW4sIGJ1dHRvbiwgY2FuLkNvbmYoY2hhdC5SSVZFUiksIGNhbi5Db25mKGNoYXQuU1RPUk0pXSkKCQl9KQoJfSwKCV9jYXJ0ZTogZnVuY3Rpb24oY2FuLCBsaXN0LCByaXZlciwgc3Rvcm0pIHsgaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJaWYgKGNhbi5jb3JlLlZhbHVlKGNhbi5fcm9vdCwgY2FuLmNvcmUuS2V5cyhjaGF0LlJJVkVSLCByaXZlcikpKSB7IHJldHVybiB9CgoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtb2R1bGUpIHsKCQkJbW9kdWxlW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pCgkJfSkKCX0sCglfcml2ZXI6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgY2IpIHsKCQlyZXR1cm4ge3RleHQ6IFttZXRhLm5hbWUsIGh0bWwuRElWLCBodG1sLklURU1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uc3Rvcm0oZXZlbnQsIGNhbiwgbWV0YS5oYXNoKQoKCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5fY2FydGUoY2FuLCBjYW4ub25kZXRhaWwubGlzdCwgbWV0YS5oYXNoKQoKCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCWNhbi5yaXZlcl9saXN0W21ldGEuaGFzaF0gPSB0YXJnZXQsIGNiKHRhcmdldCkKCQl9fQoJfSwKCV9zdG9ybTogZnVuY3Rpb24oY2FuLCBtZXRhLCByaXZlcikgewoJCXJldHVybiB7dGV4dDogW21ldGEubmFtZSwgaHRtbC5ESVYsIGh0bWwuSVRFTV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFjdGlvbi5hY3Rpb24oZXZlbnQsIGNhbiwgcml2ZXIsIG1ldGEuaGFzaCkKCgkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25pbXBvcnQuX2NhcnRlKGNhbiwgY2FuLm9uZGV0YWlsLnN1Ymxpc3QsIHJpdmVyLCBtZXRhLmhhc2gpCgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJY2FuLnN0b3JtX2xpc3RbY2FuLmNvcmUuS2V5cyhyaXZlciwgbWV0YS5oYXNoKV0gPSB0YXJnZXQKCQl9fQoJfSwKCWRpc3BsYXk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgc2hvdyA9IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCk7IGNhbi5vbmxheW91dC5faW5pdChjYW4pOyByZXR1cm4gc2hvdwoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLop6PmnpDlvJXmk44iLCBfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJdmFyIGxpc3QgPSBjYW4uX3Jvb3Qucml2ZXIKCWNtZHMubGVuZ3RoID09IDAgJiYgY2FuLmNvcmUuSXRlbVNvcnQobGlzdCwgIm9yZGVyIiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCWlmIChjYW4uY29yZS5JdGVtKHZhbHVlLnN0b3JtKS5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCW1zZy5QdXNoKHtoYXNoOiBrZXksIG5hbWU6IGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIj8ga2V5OiB2YWx1ZS5uYW1lfSkgLy8g576k57uE5YiX6KGoCgl9KTsgaWYgKGNtZHMubGVuZ3RoICE9IDEgJiYgY21kc1sxXSAhPSBjaGF0LlNUT1JNKSB7IHJldHVybiBmYWxzZSB9CgoJdmFyIHJpdmVyID0gbGlzdFtjbWRzWzBdXTsgaWYgKCFyaXZlcikgeyByZXR1cm4gZmFsc2UgfQoJY2FuLmNvcmUuSXRlbVNvcnQocml2ZXIuc3Rvcm0sICJvcmRlciIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQltc2cuUHVzaCh7aGFzaDoga2V5LCBuYW1lOiBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IGtleTogdmFsdWUubmFtZX0pIC8vIOW6lOeUqOWIl+ihqAoJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKTsgcmV0dXJuIHRydWUKfX0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwgbGlzdDogWyJjcmVhdGUiLCAic2hhcmUiLCAicmVmcmVzaCJdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLnJ1bih7fSwgW10sIGZ1bmN0aW9uKG1zZykgeyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX1JJVkVSKSA9PSAiX3NoYXJlIikgeyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2csIG51bGwsIGNhbi5fb3V0cHV0KSwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4uQ29uZihjdHguQUNUSU9OKXx8Y2FuLm9uYWN0aW9uLmxpc3QpCgkJCWlmIChjYW4udXNlci5tb2QuaXNQb2QgfHxjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl90YXJnZXQsIHRydWUpCgkJfSkKCX0sCglvbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQlpZiAod29yZFswXSA9PSBjaGF0LlNUT1JNKSB7IGNhbi5vbmV4cG9ydC5zdG9ybShjYW4sIG1zZywgd29yZCkgfQoJfSwKCW9uc3Rvcm1fc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGN0eC5BUkdTLCBKU09OLnN0cmluZ2lmeSh7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSkgfQoJfSwKCW9uYWN0aW9uX3RvdWNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuKQoJfSwKCW9uYWN0aW9uX25vdG9vbDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5vbmRldGFpbFsi5re75Yqg5bel5YW3Il0obXNnLl9ldmVudCwgY2FuLCAi5re75Yqg5bel5YW3Iiwgcml2ZXIsIHN0b3JtKQoJfSwKCgljYXJ0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbGlzdCwgY2IpIHsKCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgbGlzdCwgY2IpCgl9LAoJc3Rvcm06IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyKSB7IGNhbi5zdWJsaXN0ID0gY2FuLnN1Ymxpc3R8fHt9CgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9JVEVNLCBjYW4ucml2ZXJfbGlzdFtyaXZlcl0pCgkJdmFyIGxpc3QgPSBjYW4uc3VibGlzdFtyaXZlcl07IGlmIChsaXN0KSB7IHJldHVybiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCkgfQoKCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuU1RPUk1dLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHNlbGVjdCA9IDA7IGxpc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IG1zZy5UYWJsZShmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQkJcml2ZXIgPT0gY2FuLl9tYWluX3JpdmVyICYmIGl0ZW0uaGFzaCA9PSBjYW4uX21haW5fc3Rvcm0gJiYgKHNlbGVjdCA9IGluZGV4KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fc3Rvcm0oY2FuLCBpdGVtLCByaXZlcikKCQkJfSkgfV0pLmZpcnN0LCBsaXN0LmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgbGlzdC5jaGlsZHJlbltzZWxlY3RdLmNsaWNrKCkKCgkJCWV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4uX291dHB1dC5pbnNlcnRCZWZvcmUobGlzdCwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCQljYW4uc3VibGlzdFtyaXZlcl0gPSBsaXN0CgkJfSkKCX0sCglhY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnN1Ymxpc3Rbcml2ZXJdLCB7ZGlzcGxheTogaHRtbC5CTE9DS30pCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9JVEVNLCBjYW4ucml2ZXJfbGlzdFtyaXZlcl0pCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfSVRFTV0sIGNhbi5zdG9ybV9saXN0W2Nhbi5jb3JlLktleXMocml2ZXIsIHN0b3JtKV0pCgoJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNUT1JNX1NFTEVDVCwgY2FuLnJlcXVlc3QoZXZlbnQsIHsKCQkJCXJpdmVyOiBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIHN0b3JtOiBjYW4uQ29uZihjaGF0LlNUT1JNLCBzdG9ybSksCgkJCX0pKQoJCX0pCgl9LAoKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnRyYW5zKGNhbiwgeyJwdWJsaWMiOiAi5YWs5byA576kIiwgInByb3RlY3RlZCI6ICLlhoXpg6jnvqQiLCAicHJpdmF0ZSI6ICLnp4HmnInnvqQifSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbCgkJCXtuYW1lOiBtZGIuVFlQRSwgdmFsdWVzOiBbY2hhdC5QVUJMSUMsIGNoYXQuUFJPVEVDVEVELCBjaGF0LlBSSVZBVEVdLCBfdHJhbnM6ICLnsbvlnosifSwKCQkJe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogImhpIiwgX3RyYW5zOiAi576k5ZCNIn0sIHtuYW1lOiBtZGIuVEVYVCwgdmFsdWU6ICJoZWxsbyIsIF90cmFuczogIueugOS7iyJ9LAoJCV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncywgZnVuY3Rpb24obXNnKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogbXNnLlJlc3VsdCgpfSkgfSkKCQl9KQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IGNhbi5Db25mKGNoYXQuU1RPUk0pfV0sIFttZGIuVFlQRSwgY2hhdC5TVE9STV0pCgl9LAoJcmVmcmVzaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge3JpdmVyOiBjYW4uQ29uZihjaGF0LlJJVkVSKSwgc3Rvcm06IGNhbi5Db25mKGNoYXQuU1RPUk0pLCB0b3BpYzogY2FuLmdldEhlYWRlcihjaGF0LlRPUElDKSwgbGF5b3V0OiBjYW4uZ2V0QWN0aW9uKGNoYXQuTEFZT1VUKX0KCQlpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY3R4LkFSR1MsIEpTT04uc3RyaW5naWZ5KGFyZ3MpKSB9CgkJY2FuLm1pc2MuU2VhcmNoKGNhbiwgYXJncykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi6I+c5Y2V5Lqk5LqSIiwKCWxpc3Q6IFsi5YWx5Lqr576k57uEIiwgIua3u+WKoOW6lOeUqCIsICLmt7vliqDorr7lpIciLCAi5re75Yqg55So5oi3IiwgIumHjeWRveWQjee+pOe7hCIsICLliKDpmaTnvqTnu4QiXSwKCXN1Ymxpc3Q6IFsi5YWx5Lqr5bqU55SoIiwgIua3u+WKoOW3peWFtyIsICLkv53lrZjlj4LmlbAiLCAi6YeN5ZG95ZCN5bqU55SoIiwgIuWIoOmZpOW6lOeUqCJdLAoJLy8gX21lbnVzOiBbCgkvLyAJWyJjcmVhdGUiLCAi5Yib5bu6576k57uEIiwgIua3u+WKoOW6lOeUqCIsICLmt7vliqDlt6XlhbciLCAi5re75Yqg6K6+5aSHIiwgIuWIm+W7uuepuumXtCJdLAoJLy8gCVsic2hhcmUiLCAi5YWx5Lqr576k57uEIiwgIuWFseS6q+W6lOeUqCIsICLlhbHkuqvlt6XlhbciLCAi5YWx5Lqr6K6+5aSHIiwgIuiuv+mXruepuumXtCJdLAoJLy8gXSwKCgki5Yib5bu6576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pIH0sCgki5YWx5Lqr576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiByaXZlcn1dLCBbbWRiLlRZUEUsIGNoYXQuUklWRVJdKQoJfSwKCSLmt7vliqDlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7IGNhbi5vbmRldGFpbC5jcmVhdGUoZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgfSwKCSLlhbHkuqvlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBzdG9ybX1dLCBbbWRiLlRZUEUsIGNoYXQuU1RPUk1dKQoJfSwKCSLmt7vliqDlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBjdHguQ09NTUFORCwgImNvbnRleHQsY29tbWFuZCIsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuSEFTSCwgc3Rvcm1dLmNvbmNhdChbaWNlLlBPRCwgIiIsIGljZS5DVFgsIGl0ZW1bMF0sIGljZS5DTUQsIGl0ZW1bMV1dKSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSB9KQoJfSwKCSLlhbHkuqvlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBtZGIuUExVR0lOLCAibmFtZSxjb250ZXh0LGNvbW1hbmQsYXJndW1lbnQiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbcml2ZXIsIGN0eC5BQ1RJT04sIGNoYXQuU0hBUkUsIG1kYi5UWVBFLCBjaGF0LkZJRUxELAoJCQkJbWRiLk5BTUUsIGl0ZW1bMl0sIG1kYi5URVhULCBpdGVtWzNdLCBjaGF0LlRJVExFLCBpdGVtWzBdLCBjaGF0LlJJVkVSLCByaXZlciwgY2hhdC5TVE9STSwgc3Rvcm0sCgkJCV0pCgkJfSkKCX0sCgoJIua3u+WKoOiuvuWkhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgd2ViLlNQQUNFLCAidHlwZSxuYW1lLHRleHQiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5OT0RFLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuVFlQRSwgaXRlbVswXSwgbWRiLk5BTUUsIGl0ZW1bMV1dLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCgki5YWx5Lqr6K6+5aSHIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuSU5WSVRFLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U2NyaXB0KGNhbiwgbXNnLlJlc3VsdCgpLCBidXR0b24pIH0pCgl9LAoJIuWIm+W7uuepuumXtCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBidXR0b259KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogIm5hbWUiLCB2YWx1ZTogImhpIn0sIHtuYW1lOiAicmVwb3MifSwge25hbWU6ICJ0ZW1wbGF0ZSJ9XSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjbGkuU1RBUlQsIGFyZ3MuY29uY2F0KGNoYXQuUklWRVIsIHJpdmVyKSwgZnVuY3Rpb24obXNnKSB7CgkJCQl2YXIgbGluayA9IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogY2FuLmNvcmUuS2V5cyhjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgbXNnLk9wdGlvbihtZGIuTkFNRSkpfSkKCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgbGluayksIGNhbi51c2VyLm9wZW4obGluaykKCQkJfSkKCQl9KQoJfSwKCSLorr/pl67nqbrpl7QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdCh7cml2ZXI6IHJpdmVyfSwgY2FuLCB3ZWIuU1BBQ0UsICJ0aW1lLHR5cGUsbmFtZSx0ZXh0IikKCX0sCgoJIua3u+WKoOeUqOaItyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgY2hhdC5VU0VSLCAidXNlcm5pY2ssdXNlcm5hbWUiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5VU0VSLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBhYWEuVVNFUk5BTUUsIGl0ZW1bMF1dLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCgki6YeN5ZG95ZCN576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHJpdmVyfSksIG1kYi5NT0RJRlksIFttZGIuTkFNRSwgZGF0YS5uYW1lXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXJ9KSB9KQoJCX0pCgl9LAoJIuWIoOmZpOe+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogcml2ZXJ9KSwgbWRiLlJFTU9WRSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6ICIiLCBzdG9ybTogIiJ9KSB9KQoJfSwKCgki5L+d5a2Y5Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4uZ2V0QWN0aW9uKGN0eC5BUkdTLCBmdW5jdGlvbihpdGVtLCBuZXh0LCBpbmRleCwgYXJyYXkpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9LCB7aGFzaDogc3Rvcm0sIGlkOiBpdGVtLmRhdGFzZXQuaWR9KQoJCQl2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdChjYW4sIChpbmRleCsxKStpY2UuUFMrYXJyYXkubGVuZ3RoLCBidXR0b24sIDEwMDAwLCAoaW5kZXgrMSkqMTAwL2FycmF5Lmxlbmd0aCkKCQkJY2FuLnJ1bihtc2csIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLk1PRElGWSwgaWNlLkFSRywgaXRlbS5kYXRhc2V0LmFyZ3NdLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCXRvYXN0LmNsb3NlKCksIG5leHQoKSwgaW5kZXggPT0gYXJyYXkubGVuZ3RoLTEgJiYgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgYnV0dG9uKQoJCQkJfSkKCQkJfSkKCQl9KQoJfSwKCSLph43lkb3lkI3lupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHN0b3JtfSksIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLk1PRElGWV0uY29uY2F0KGFyZ3MpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBzdG9ybX0pCgkJCX0pCgkJfSkKCX0sCgki5Yig6Zmk5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogc3Rvcm19KSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuUkVNT1ZFXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiAiIn0pCgkJfSkKCX0sCgoKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLnRyYW5zKGNhbiwgeyJwdWJsaWMiOiAi5YWs5byA5bqU55SoIiwgInByb3RlY3RlZCI6ICLnvqTnu4TlupTnlKgiLCAicHJpdmF0ZSI6ICLkuKrkurrlupTnlKgifSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbCgkJCXtuYW1lOiBtZGIuVFlQRSwgdmFsdWVzOiBbY2hhdC5QVUJMSUMsIGNoYXQuUFJPVEVDVEVELCBjaGF0LlBSSVZBVEVdLCBfdHJhbnM6ICLnsbvlnosifSwKCQkJe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogImhpIiwgX3RyYW5zOiAi5ZCN56ewIn0sIHtuYW1lOiBtZGIuVEVYVCwgdmFsdWU6ICJoZWxsbyIsIF90cmFuczogIueugOS7iyJ9LAoJCV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuQ1JFQVRFXS5jb25jYXQoYXJncyksIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06IG1zZy5SZXN1bHQoKX0pCgkJCX0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXdpZHRoOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldFdpZHRoIH0sCglzdG9ybTogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQl2YXIgZmllbGRzID0gKG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KCIsIikKCQljYW4uY29yZS5JdGVtKGNhbi5fcm9vdC5yaXZlciwgZnVuY3Rpb24ocml2ZXIsIHZhbHVlKSB7CgkJCWNhbi5jb3JlLkl0ZW0odmFsdWUuc3Rvcm0sIGZ1bmN0aW9uKHN0b3JtLCBpdGVtKSB7CgkJCQlpZiAod29yZFsxXSAhPSAiIiAmJiB3b3JkWzFdICE9IHN0b3JtICYmIHdvcmRbMV0gIT0gaXRlbS5uYW1lKSB7IHJldHVybiB9CgoJCQkJdmFyIGRhdGEgPSB7Y3R4OiAiY2FuIiwgY21kOiAiU3Rvcm0iLAoJCQkJCXR5cGU6IHJpdmVyLCBuYW1lOiBzdG9ybSwgdGV4dDogc2h5KCLot7PovawiLCBmdW5jdGlvbihldmVudCkgewoJCQkJCQljYW4ub25hY3Rpb24uYWN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBzdG9ybSkKCQkJCQl9KSwKCQkJCX07IGNhbi5jb3JlLkxpc3QoZmllbGRzLCBmdW5jdGlvbihrZXkpIHsgbXNnLlB1c2goa2V5LCBkYXRhW2tleV18fCIiKSB9KQoJCQl9KQoJCX0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wYW5lbC9zZWFyY2guanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBsaXN0LCBjYiwgdGFyZ2V0KSB7CgkJY2FuLl9mb3JlYWNoID0gIioiCgkJY2FuLl9mb3JlYWNoID0gImNvbW1hbmQsc3BhY2UsdGV4dCIKCQljYW4ubGlzdCA9IG1zZy5UYWJsZSgpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCkKCQl2YXIgdGFibGUgPSBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgeyBjYW4uU3RhdHVzKG1kYi5UT1RBTCwgaW5kZXgrMSkKCQkJcmV0dXJuIHt0ZXh0OiBba2V5ID09IG1kYi5URVhUICYmIGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpICYmIGxpbmUudGV4dC5oZWxwIHx8IHZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbltjYW4udHlwZSA9PSBjYW4uX2ZvcmVhY2h8fGV2ZW50LmN0cmxLZXk/IGNoYXQuUExVR0lOOiBtZGIuU0VMRUNUXShldmVudCwgY2FuLCBpbmRleCkgCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQsIGNhbi5jb3JlLkxpc3QoKG1zZy5PcHRpb24oInNvcnQiKXx8ImN0eCxjbWQsdHlwZSxuYW1lLHRleHQiKS5zcGxpdChpY2UuRlMpLCBmdW5jdGlvbihpdGVtKSB7CgkJCXJldHVybiBsaXN0LmluZGV4T2YoaXRlbSkKCQl9KSk7IHRhYmxlICYmIGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuZGlzcGxheSwgdGFibGUub2Zmc2V0V2lkdGgpCgoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkEsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIub3BlbihpdGVtLmhyZWYpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkgfQoJCX0pLCBjYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpLCBbXSkuY29uY2F0KHtuYW1lOiAic2VsZWN0ZWQiLCB2YWx1ZTogIjAifSkpCgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLnVpLnByb2ZpbGUuaW5uZXJIVE1MID09ICIiICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCBodG1sLlREKVswXS5jbGljaygpCgl9LAoJX3dvcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpIHsgY2FuLnR5cGUgPSBjbWRzWzBdCgkJdmFyIGNiID0gY2FuLm9uYWN0aW9uW2NtZHNbMV1dOyBpZiAoY2IpIHsgY2Ioe30sIGNhbik7IHJldHVybiB9CgoJCXZhciByZXMgPSBjYW4ucmVxdWVzdCh7fSwgewoJCQl3b3JkOiBjbWRzLCBmaWVsZHM6IGZpZWxkcy5qb2luKGljZS5GUyksIHNvcnQ6IG1zZy5PcHRpb24oInNvcnQiKSwKCQkJcml2ZXI6IG1zZy5PcHRpb24oY2hhdC5SSVZFUiksIGluZGV4OiBtc2cuT3B0aW9uKG1kYi5JTkRFWCksCgkJfSkKCgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TRUFSQ0gsIHJlcykKCQljYW4ucnVuKHJlcywgY21kcywgZnVuY3Rpb24ocmVzKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIHJlcywgZmllbGRzKSB9KQoJCWNhbi5vbm1vdGlvbi5zaG93KGNhbiksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBjYW4udWkud29yZCkKCQl9KQoJfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYikgeyBjYW4udWkud29yZC52YWx1ZSA9IGNtZHNbMV0KCQl2YXIgZmllbGRzID0gKGNtZHNbMl18fG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KGljZS5GUykKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dGg6IGZpZWxkc31dKSwgY2FuLmNiID0gZnVuY3Rpb24oKSB7CgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoY2FuLm9uZXhwb3J0LnNlbGVjdChjYW4pKSwgY2FuLm9ubW90aW9uLmhpZGUoY2FuKQoJCX0KCgkJY2FuLmlucHV0ID0gZnVuY3Rpb24oZXZlbnQsIHdvcmQpIHsgY21kc1sxXSA9IHdvcmR8fGNtZHNbMV0KCQkJY2FuLm9uaW1wb3J0Ll93b3JkKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpCgkJfSwgY2FuLm9uaW1wb3J0Ll93b3JkKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpCgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wLCBsZWZ0LCB3aWR0aCwgaGVpZ2h0KSB7CgkJCWNhbi5Db25mSGVpZ2h0KGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVC0yKmh0bWwuUExVR0lOX01BUkdJTikKCQkJY2FuLkNvbmZXaWR0aCh3aWR0aC0yKmh0bWwuUExVR0lOX01BUkdJTikKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwge3RvcDogdG9wLCBsZWZ0OiBsZWZ0fSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIGxpc3Q6IFtjbGkuQ0xPU0UsIGNsaS5DTEVBUiwgY2xpLkRPTkVdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJb25sb2dpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5Db25mKGh0bWwuQUNUSU9OKXx8Y2FuLm9uYWN0aW9uLmxpc3QpCgkJY2FuLnVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFsKCQkJe2lucHV0OiBbIndvcmQiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJCWlmIChldmVudC5jdHJsS2V5KSB7CgkJCQkJaWYgKGV2ZW50LmtleSA9PSAiMCIpIHsKCQkJCQkJY2FuLm9uYWN0aW9uLmNsZWFyKGV2ZW50LCBjYW4pCgkJCQkJfQoJCQkJCWlmICgiMSIgPD0gZXZlbnQua2V5ICYmIGV2ZW50LmtleSA8PSAiOSIpIHsKCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIsIGluZGV4KSB7CgkJCQkJCQlpZiAoaW5kZXgrMSA9PSBldmVudC5rZXkpIHsKCQkJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIGluZGV4KSB7CgkJCQkJCQkJCWluZGV4ID09IDAgJiYgdGQuY2xpY2soKQoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCX0KCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRlKGNhbikgfQoKCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJCQlpZiAoZXZlbnQuc2hpZnRLZXkpIHsgdmFyIGZpcnN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIpWzFdCgkJCQkJCXJldHVybiBjYW4ub25hY3Rpb25bY2FuLnR5cGUgPT0gY2FuLl9mb3JlYWNoPyBjaGF0LlBMVUdJTjogaHRtbC5TRUxFQ1RdKGV2ZW50LCBjYW4sIGZpcnN0LmRhdGFzZXQuaW5kZXgpCgkJCQkJfQoJCQkJCWlmIChldmVudC5jdHJsS2V5KSB7IHJldHVybiBjYW4ub25hY3Rpb25bY2xpLkRPTkVdKGV2ZW50LCBjYW4pIH0KCQkJCQlyZXR1cm4gY2FuLmlucHV0KGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUpCgkJCQl9CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0cikgewoJCQkJCXZhciBoYXMgPSBmYWxzZTsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7CgkJCQkJCWhhcyA9IGhhcyB8fCB0ZC5pbm5lclRleHQuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpID4gLTEKCQkJCQl9KSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLkhJRERFTiwgIWhhcykKCQkJCX0pCgkJCX1dfSwKCQkJY2hhdC5DT05URU5ULCBodG1sLlNUQVRVUywge3ZpZXc6IFtjaGF0LkRJU1BMQVksIGh0bWwuVEFCTEVdfSwgY2hhdC5QUk9GSUxFLAoJCV0pLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLmRpc3BsYXksIGNoYXQuQ09OVEVOVCkKCX0sCglvbm9wZW5zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0eXBlLCB3b3JkKSB7IGNhbi5vbmltcG9ydC5zZWxlY3QoY2FuLCBtc2csIFt0eXBlfHxjYW4uX2ZvcmVhY2gsIHdvcmR8fCIiXSkgfSwKCgljbGVhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvZmlsZSkgfSwKCWRvbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmJhc2UuaXNGdW5jKGNhbi5jYikgJiYgY2FuLmNiKCkgfSwKCWNsb3NlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5oaWRlKGNhbikgfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGluZGV4KSB7IHZhciBsaW5lID0gY2FuLmxpc3RbaW5kZXhdCgkJaWYgKGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZShjYW4pLCBsaW5lLnRleHQoZXZlbnQpIH0KCgkJdmFyIGZpZWxkcyA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRILCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmlubmVyVGV4dCB9KQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3RkOiBjYW4uY29yZS5MaXN0KGZpZWxkcywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gbGluZVtpdGVtXSB9KSwgZGF0YToge2luZGV4OiBpbmRleH0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJCQljYW4uU3RhdHVzKCJzZWxlY3RlZCIsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSKS5sZW5ndGgtMSkKCQl9fV0pLCBjYW4uU3RhdHVzKCJzZWxlY3RlZCIsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSKS5sZW5ndGgtMSkKCX0sCgoJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgY2FuLCBpbmRleCkgeyB2YXIgbGluZSA9IGNhbi5saXN0W2luZGV4XQoJCWlmIChjYW4uYmFzZS5pc0Z1bmMobGluZS50ZXh0KSkgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGUoY2FuKSwgbGluZS50ZXh0KGV2ZW50KSB9CgkJaWYgKGxpbmUuY3R4ID09ICJ3ZWIud2lraSIgJiYgbGluZS5jbWQgPT0gIndvcmQiKSB7IHJldHVybiB9CgkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuQSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoKCQl2YXIgY21kID0gbGluZS5jbWQgPT0gY3R4LkNPTU1BTkQ/IGNhbi5jb3JlLktleXMobGluZS50eXBlLCBsaW5lLm5hbWUuc3BsaXQoaWNlLlNQKVswXSk6IGNhbi5jb3JlLktleXMobGluZS5jdHgsIGxpbmUuY21kKQoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogInBsdWciLCBpbmRleDogY21kfHxtc2cuT3B0aW9uKG1kYi5JTkRFWCl9LCBmdW5jdGlvbihzdWIsIG1ldGEpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgbWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKSkKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJc3ViLkZvY3VzKCkKCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXNlbGVjdDogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7IHJldHVybiB0ZC5pbm5lckhUTUwgfSkKCQl9KS5zbGljZSgxKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0LmpzIgpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCk7IHN3aXRjaCAobWV0YS50eXBlKSB7CgkJCWNhc2UgaHRtbC5TRUxFQ1Q6IG1ldGEudmFsdWUgJiYgKHRhcmdldC52YWx1ZSA9IG1ldGEudmFsdWUpOyBicmVhawoJCQljYXNlIGh0bWwuQlVUVE9OOiBtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiB0YXJnZXQuY2xpY2soKTsgYnJlYWsKCQl9Cgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkpIH0sCglsaXN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAuQ29uZigibW9kZSIpICE9ICJzaW1wbGUiICYmIGNhbi5ydW4oZXZlbnQpIH0sCgliYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25pbXBvcnQuX2JhY2soY2FuLnN1cCkgfSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bihldmVudCkgfSwKCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAucmVxdWVzdChldmVudCwge190b2FzdDogIuaJp+ihjOS4rS4uLiJ9KQoJCWNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLkJVVFRPTiAmJiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgY2FuLkNvbmYobWRiLk5BTUUpXS5jb25jYXQoY2FuLnN1cC5JbnB1dCgpKSkKCX0sCglvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkKCQlpZiAoY2FuLkNvbmYobWRiLlRZUEUpID09IGh0bWwuU0VMRUNUKSB7IGNhbi5ydW4oZXZlbnQpIH0KCX0sCglvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAoY2FuLkNvbmYobWRiLlRZUEUpID09IGh0bWwuVEVYVEFSRUEpIHsgaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9IH0KCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsKCQkJY2FuLnJ1bihldmVudCksIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJfSBpZiAoIWV2ZW50LmN0cmxLZXkpIHsgcmV0dXJuIH0KCgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiYiI6IGNhbi5DbG9uZUlucHV0KCk7IGJyZWFrCgkJCWNhc2UgIm0iOiBjYW4uQ2xvbmVGaWVsZCgpOyBicmVhawoJCQlkZWZhdWx0OiByZXR1cm4KCQl9IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L2RhdGUuanMiClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi5o6n5Lu26K+m5oOFIiwgZGF0ZToge29uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsgY2IoZnVuY3Rpb24oY2FuLCBjYnMpIHsKCWZ1bmN0aW9uIHNldChub3cpIHsgY2JzKGNhbiwgY2FuLnVzZXIudGltZShjYW4sIG5vdyksIHRhcmdldC52YWx1ZSkgfQoKCS8vIOa3u+WKoOaOp+S7tgoJdmFyIG5vdyA9IHRhcmdldC52YWx1ZT8gbmV3IERhdGUodGFyZ2V0LnZhbHVlKTogbmV3IERhdGUoKQoJY2FuLl90cmFucyA9IGtpdC5EaWN0KCJ0b2RheSIsICLku4rlpKkiLCBtZGIuTkVYVCwgIuS4i+S4gOaciCIsIG1kYi5QUkVWLCAi5LiK5LiA5pyIIikKCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fYWN0aW9uKSwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbY2xpLkNMT1NFLAoJCVsiaG91ciJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDI0KSksIFsibWludXRlIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMCwgNjAsIDUpKSwgWyJzZWNvbmQiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgwLCA2MCwgNSkpLAoJCSJ0b2RheSIsICIiLCBtZGIuUFJFViwgWyJ5ZWFyIl0uY29uY2F0KGNhbi5jb3JlLkxpc3Qobm93LmdldEZ1bGxZZWFyKCkgLSAxMCwgbm93LmdldEZ1bGxZZWFyKCkgKyAxMCkpLAoJCVsibW9udGgiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgxLCAxMykpLCBtZGIuTkVYVCwKCV0sIGNhbi5fYWN0aW9uLCB7Y2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5jbG9zZSgpIH0sCgkJImhvdXIiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRIb3VycyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkibWludXRlIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0TWludXRlcyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkic2Vjb25kIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0U2Vjb25kcyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkidG9kYXkiOiBmdW5jdGlvbihldmVudCkgeyBub3cgPSBuZXcgRGF0ZSgpLCBzZXQoc2hvdyhub3cpKSB9LAoKCQkicHJldiI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRNb250aChub3cuZ2V0TW9udGgoKS0xKSwgc2hvdyhub3cpIH0sCgkJInllYXIiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRGdWxsWWVhcihwYXJzZUludCh2YWx1ZSkpLCBzaG93KG5vdykgfSwKCQkibW9udGgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRNb250aChwYXJzZUludCh2YWx1ZSktMSksIHNob3cobm93KSB9LAoJCSJuZXh0IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldE1vbnRoKG5vdy5nZXRNb250aCgpKzEpLCBzaG93KG5vdykgfSwKCgkJIumaj+acuiI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXREYXRlKChNYXRoLnJhbmRvbSgpICogMTAwIC0gNTApICsgbm93LmdldERhdGUoKSksIHNob3cobm93KSB9LAoJCSLliY3kuIDlubQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCktMSksIHNob3cobm93KSB9LAoJCSLlkI7kuIDlubQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCkrMSksIHNob3cobm93KSB9LAoJfSkKCgljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykKCWNhbi5fdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5UQUJMRV19XSkuZmlyc3QKCXZhciB0b2RheSA9IG5ldyBEYXRlKCk7IGZ1bmN0aW9uIHNob3cobm93KSB7CgkJLy8g6K6+572u5o6n5Lu2CgkJY2FuLkFjdGlvbigieWVhciIsIG5vdy5nZXRGdWxsWWVhcigpKQoJCWNhbi5BY3Rpb24oIm1vbnRoIiwgbm93LmdldE1vbnRoKCkrMSkKCQljYW4uQWN0aW9uKCJob3VyIiwgbm93LmdldEhvdXJzKCkpCgkJY2FuLkFjdGlvbigibWludXRlIiwgcGFyc2VJbnQobm93LmdldE1pbnV0ZXMoKS81KSo1KQoJCWNhbi5BY3Rpb24oInNlY29uZCIsIHBhcnNlSW50KG5vdy5nZXRTZWNvbmRzKCkvNSkqNSkKCgkJLy8g6K6+572u57uE5Lu2CgkJY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi5fdGFibGUsIFt7dGg6IFsi5pelIiwgIuS4gCIsICLkuowiLCAi5LiJIiwgIuWbmyIsICLkupQiLCAi5YWtIl19XSkKCQl2YXIgdHI7IGZ1bmN0aW9uIGFkZChkYXksIHR5cGUpIHsgaWYgKGRheS5nZXREYXkoKSA9PSAwKSB7IHRyID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl90YWJsZSwgW3t0eXBlOiBodG1sLlRSfV0pLmxhc3QgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0ciwgW3t0ZXh0OiBbZGF5LmdldERhdGUoKSwgaHRtbC5URCwgY2FuLmJhc2UuVGltZSh0b2RheSwgIiV5LSVtLSVkIikgPT0gY2FuLmJhc2UuVGltZShkYXksICIleS0lbS0lZCIpPyBodG1sLlNFTEVDVDogdHlwZV0sCgkJCQlkYXRhc2V0OiB7ZGF0ZTogZGF5LmdldFRpbWUoKX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJc2V0KG5vdyA9IG5ldyBEYXRlKHBhcnNlSW50KGV2ZW50LnRhcmdldC5kYXRhc2V0LmRhdGUpKSkKCQkJCX0sCgkJCX1dKQoJCX0KCgkJLy8g5pe26Ze05Yy66Ze0CgkJdmFyIG9uZSA9IG5ldyBEYXRlKG5vdyk7IG9uZS5zZXREYXRlKDEpCgkJdmFyIGVuZCA9IG5ldyBEYXRlKG5vdyk7IGVuZC5zZXRNb250aChub3cuZ2V0TW9udGgoKSsxKSwgZW5kLnNldERhdGUoMSkKCQl2YXIgaGVhZCA9IG5ldyBEYXRlKG9uZSk7IGhlYWQuc2V0RGF0ZShvbmUuZ2V0RGF0ZSgpLW9uZS5nZXREYXkoKSkKCQl2YXIgdGFpbCA9IG5ldyBEYXRlKGVuZCk7IHRhaWwuc2V0RGF0ZShlbmQuZ2V0RGF0ZSgpKzctZW5kLmdldERheSgpKQoKCQkvLyDml7bpl7Tluo/liJcKCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShoZWFkKTsgZGF5IDwgb25lOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5QUkVWKSB9CgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUob25lKTsgZGF5IDwgZW5kOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5NQUlOKSB9CgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUoZW5kKTsgZW5kLmdldERheSgpICE9IDAgJiYgZGF5IDwgdGFpbDsgZGF5LnNldERhdGUoZGF5LmdldERhdGUoKSsxKSkgeyBhZGQoZGF5LCBtZGIuTkVYVCkgfQoKCQlyZXR1cm4gbm93Cgl9IHNob3cobm93KSwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuKQp9KX19IH0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9pbnB1dC9pbnB1dC5qcyIKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L2tleS5qcyIKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBrZXk6IHsKCV9pbml0OiBmdW5jdGlvbihldmVudCwgY2FuLCBjYnMsIHRhcmdldCwgbmFtZSwgdmFsdWUpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuSU5QVVRTLCBbbmFtZSwgdmFsdWV8fHRhcmdldC52YWx1ZV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25maWd1cmUua2V5Ll9zaG93KGNhbiwgbXNnLCBjYnMsIHRhcmdldCwgbmFtZSkKCQl9KQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZywgY2JzLCB0YXJnZXQsIG5hbWUpIHsKCQlpZiAoIWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCwgbXNnLkxlbmd0aCgpICE9IDApKSB7IHJldHVybiB9CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBzdHlsZTogbXNnLmFwcGVuZCAmJiBtc2cuYXBwZW5kLmxlbmd0aCA9PSAxPyB7Im1pbi13aWR0aCI6IHRhcmdldC5vZmZzZXRXaWR0aC0xNn06IHt9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoY2FuLCB2YWx1ZSwgdGFyZ2V0LnZhbHVlKQoJCQkJbXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpID09IGljZS5QUk9DRVNTX0FHQUlOICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIGNhbiwgY2JzLCB0YXJnZXQsIG5hbWUsIHZhbHVlKQoJCQkJfSkKCQkJfX0KCQl9KSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbbWRiLlRPVEFMLCBtZGIuSU5ERVhdKSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIG1zZy5MZW5ndGgoKSkKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NYXgodG9wK2hlaWdodC1jYW4uX3RhcmdldC5vZmZzZXRUb3AsIDQwMCkpCgkJfSkKCX0sCglfbWFrZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgewoJCXZhciBzdWIgPSB0YXJnZXQuX2NhbjsgaWYgKHN1YiAmJiBzdWIuX2NicykgeyByZXR1cm4gfQoJCWNiKGZ1bmN0aW9uKHN1YiwgY2JzKSB7IHN1Yi5fY2JzID0gY2JzCgkJCWlmIChtZXRhLm1zZyAmJiBtZXRhLm1zZy5MZW5ndGgoKSA+IDApIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX3Nob3coc3ViLCBtZXRhLm1zZywgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1YiwgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfQoJCX0pCgl9LAoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgewoJCXRhcmdldC5fY2FuICYmIHRhcmdldC5fY2FuLmNsb3NlKCkKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJfSwKCW9uZm9jdXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiRXNjYXBlIjogdGFyZ2V0Ll9jYW4/IHRhcmdldC5fY2FuLmNsb3NlKCk6IHRhcmdldC5ibHVyKCk7IHJldHVybgoJCQljYXNlICJUYWIiOiB0YXJnZXQuX2NhbiAmJiB0YXJnZXQuX2Nhbi5jbG9zZSgpOyByZXR1cm4KCQkJY2FzZSAibiI6CgkJCWNhc2UgInAiOiBldmVudC5jdHJsS2V5ICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsKCQkJZGVmYXVsdDogY2FuLmJhc2UuaXNGdW5jKGxhc3QpICYmIGxhc3QoZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uZmlndXJlLmtleS5fbWFrZShldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KQoJfSwKCW9ua2V5dXA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsgdmFyIHN1YiA9IHRhcmdldC5fY2FuOyBpZiAoIXN1YikgeyByZXR1cm4gfQoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgaWNlLlBTOiBjYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBzdWIsIHN1Yi5fY2JzLCB0YXJnZXQsIG1ldGEubmFtZSwgZXZlbnQudGFyZ2V0LnZhbHVlKTsgYnJlYWsKCQl9CgkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIHN1YiwgZnVuY3Rpb24oKSB7IGNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1Yiwgc3ViLl9jYnMsIHRhcmdldCwgbWV0YS5uYW1lKSB9LCB0YXJnZXQpCgl9LAp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L3Byb3ZpbmNlLmpzIgpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuaOp+S7tuivpuaDhSIsIHByb3ZpbmNlOiB7b25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgeyBjYihmdW5jdGlvbihjYW4sIGNicykgewoJY2FuLnJlcXVpcmUoWyIvcmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCAiL3JlcXVpcmUvc2h5bGludXguY29tL3gvZWNoYXJ0cy9jaGluYS5qcyJdLCBmdW5jdGlvbigpIHsKCQl2YXIgY2hpbmFfY2hhcnQgPSBlY2hhcnRzLmluaXQoY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dHlwZTogaHRtbC5ESVYsIHN0eWxlOiB7d2lkdGg6IDYwMCwgaGVpZ2h0OiA0MDB9fV0pLmZpcnN0KQoJCWNoaW5hX2NoYXJ0LnNldE9wdGlvbih7Z2VvOiB7bWFwOiAnY2hpbmEnfX0pLCBjaGluYV9jaGFydC5vbihodG1sLkNMSUNLLCBmdW5jdGlvbiAocGFyYW1zKSB7CgkJCXRhcmdldC52YWx1ZSA9IHBhcmFtcy5uYW1lLCBjYW4uY2xvc2UoKQoJCX0pLCBjYW4uU3RhdHVzKG1kYi5UT1RBTCwgMzQpLCBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoY2FuKQoJfSkKfSkgfX0sIH0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jaGF0L2Rpdi5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgbWV0YSA9IHt9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgbWV0YVt2YWx1ZS5rZXldID0gdmFsdWUudmFsdWUgfSkKCQljYW4uX2xpc3QgPSBjYW4uYmFzZS5PYmoobWV0YS50ZXh0LCB7bWV0YToge25hbWU6IG1ldGEubmFtZXx8aHRtbC5ESVZ9LCBsaXN0OiBbXX0pCgkJY2FuLnN1cC5fa2V5cyA9IGNhbi5zdXAuX2tleXN8fGNhbi5fbGlzdC5tZXRhLm5hbWUKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiwgY2FuLl9vdXRwdXQpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwga2V5cywgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB7IHdpZHRoID0gd2lkdGh8fGl0ZW0ubWV0YS53aWR0aCwgaGVpZ2h0ID0gaGVpZ2h0fHxpdGVtLm1ldGEuaGVpZ2h0CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm1ldGEubmFtZXx8aHRtbC5ESVZdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCksIGNhbi5jdXJyZW50ID0gZXZlbnQudGFyZ2V0LCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBrZXlzLCBpdGVtLm1ldGEpCgkJfSwgX2FkZDogZnVuY3Rpb24oZGF0YSkgeyBpdGVtLmxpc3QucHVzaChkYXRhKSwgY2FuLm9uaW1wb3J0Ll9saXN0KGNhbiwga2V5cywgaXRlbSwgdWkubGlzdCwgd2lkdGgsIGhlaWdodCkgfX0sIHt2aWV3OiBodG1sLkxJU1R9XSkKCgkJdmFyIGZpZWxkID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgaXRlbS5tZXRhLmluZGV4PyBjaGF0LlBMVUdJTjogY2hhdC5MQVlPVVQsIGl0ZW0ubWV0YSwgdGFyZ2V0Ll90YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5saXN0Ll90YXJnZXQgPSBmaWVsZC5vdXRwdXQsIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkKCQlpdGVtLm1ldGEuc3R5bGUgJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLmxpc3QuX3RhcmdldCwgaXRlbS5tZXRhLnN0eWxlKQoKCQlpdGVtLm1ldGEuaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGNhbi5iYXNlLkNvcHkoe30sIGl0ZW0ubWV0YSksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVH0pCgkJfSwgdGFyZ2V0Ll90YXJnZXQsIGZpZWxkLmZpZWxkc2V0KQoKCQljYW4ub25pbXBvcnQuX2xpc3QoY2FuLCBrZXlzLCBpdGVtLCB1aS5saXN0LCB3aWR0aCwgaGVpZ2h0KQoJCWNhbi5zdXAuX2tleXMgPT0ga2V5cyAmJiB1aS5pdGVtLmNsaWNrKCkKCX0sCglfbGlzdDogZnVuY3Rpb24oY2FuLCBrZXlzLCBpdGVtLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsKCQlpZiAoaXRlbS5tZXRhLnN0eWxlID09IGh0bWwuU1BBTikgeyB3aWR0aCA9IHdpZHRoIC8gaXRlbS5saXN0Lmxlbmd0aCB9IGVsc2UgeyBoZWlnaHQgPSBoZWlnaHQgLyBpdGVtLmxpc3QubGVuZ3RoIH0KCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQuX3RhcmdldCkKCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uY29yZS5LZXlzKGtleXMsIGl0ZW0ubWV0YS5uYW1lKSwgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB9KQoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIGtleXMsIG1ldGEpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9KTsgbXNnLlB1c2gobWRiLktFWSwgImtleXMiKSwgbXNnLlB1c2gobWRiLlZBTFVFLCBrZXlzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQoIm5hbWUsaW5kZXgsYXJncyxzdHlsZSxkaXNwbGF5LGhlaWdodCx3aWR0aCIpLCBmdW5jdGlvbihrKSB7CgkJCW1zZy5QdXNoKG1kYi5LRVksIGspLCBtc2cuUHVzaChtZGIuVkFMVUUsIG1ldGFba10pCgkJfSksIGNhbi5zdXAuX2tleXMgPSBrZXlzCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlrZXkgPT0gbWRiLlZBTFVFICYmIGNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LmlubmVyVGV4dCA9IG1ldGFbbGluZS5rZXldID0gdmFsdWUsIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQkJfSwge25hbWU6IGxpbmUua2V5fSkKCQkJfX0KCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCksIGNhbi51aS5wcm9qZWN0Ll90YXJnZXQgPSBjYW4udWkuY29udGVudAoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0zMjAsIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQsIGNhbi51c2VyLnRpdGxlKGNhbi5fbGlzdC5tZXRhLm5hbWUpCgkJfSBlbHNlIGlmIChjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLCBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgZmFsc2UpCgkJfSBlbHNlIHsKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCX0KCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uX2xpc3QubWV0YS5uYW1lLCBjYW4uX2xpc3QsIGNhbi51aS5wcm9qZWN0LCB3aWR0aCwgaGVpZ2h0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUUsIGN0eC5JTkRFWCwgY3R4LkFSR1MsIGN0eC5TVFlMRSwgaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEhdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5jdXJyZW50Ll9hZGQoe21ldGE6IGRhdGEsIGxpc3Q6IFtdfSkKCQl9KQoJfSwKCSLkv53lrZgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIFttZGIuVEVYVCwgSlNPTi5zdHJpbmdpZnkoY2FuLl9saXN0KV0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC9sb2NhdGlvbi5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJIWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4uQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1Kmh0bWwuQUNUSU9OX0hFSUdIVCAtIDUqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9vcHRpb24pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fc3RhdHVzKQoKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2plY3QsIDI0MCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2plY3QsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvZmlsZSwgaWNlLkFVVE8pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLm9uZXhwb3J0Lmxpc3QpCgkJY2FuLnJlcXVpcmUoW2Nhbi5iYXNlLk1lcmdlVVJMKCJodHRwczovL21hcC5xcS5jb20vYXBpL2dsanMiLCAidiIsICIxLmV4cCIsICJsaWJyYXJpZXMiLCAic2VydmljZSIsICJrZXkiLCBjYW4uQ29uZihhYWEuVE9LRU4pKV0sIGZ1bmN0aW9uKCkgewoJCQl2YXIgcmVzID0ge3R5cGU6ICJ1bmtub3duIiwgbGF0aXR1ZGU6IDM5OTg0MTIsIGxvbmdpdHVkZTogMTE2MzA3NDh9LCBjdXJyZW50ID0gY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5MT0NBVElPTikpCgkJCWlmIChjdXJyZW50LnN0YXR1cyA9PT0gMCkgeyByZXMgPSBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjdXJyZW50LnJlc3VsdC5sb2NhdGlvbiwgY3VycmVudC5yZXN1bHQuYWRfaW5mbyksIHJlcy50eXBlID0gImlwIiwgcmVzLm5hbWUgPSBjdXJyZW50LnJlc3VsdC5pcCwgY2FuLlN0YXR1cyhyZXMpIH0KCQkJY2FuLl9jdXJyZW50ID0gcmVzLCBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pLCBjYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihyZXMpIHsgcmVzLnR5cGUgPSAiY3VycmVudCIsIGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQgPSByZXMpIH0pCgkJfSkKCX0sCglfbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSkKCgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCXtuYW1lOiAiZGlyZWN0aW9uIn0sCgkJCXtuYW1lOiAiZmF2b3IiLCBfbWVudTogc2h5KHsicGxheSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCQkJY2FuLmNvcmUuTmV4dChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZmF2b3IuX3RhcmdldCwgaHRtbC5ESVZfSVRFTSksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJCQlpdGVtLmNsaWNrKCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIG5leHQsIDIwMDApCgkJCQl9LCBmdW5jdGlvbigpIHsgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikgfSkKCQkJfX0pfSwKCQkJe25hbWU6ICJleHBsb3JlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaDAoY2FuLCBldmVudC50YXJnZXQudmFsdWUpIH0KCQkJfX0sCgkJCXtuYW1lOiAic2VhcmNoIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIGV2ZW50LnRhcmdldC52YWx1ZSkgfQoJCQl9fSwKCQkJe25hbWU6ICJkaXN0cmljdCIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5vbmltcG9ydC5fcHJvdmluY2UoY2FuLCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9jdXJyZW50KSwgY2FuLm9uaW1wb3J0Ll9tYXJrKGNhbikKCQljYW4ubWFyayAmJiBjYW4ubWFyay5hZGQoe3Bvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uX2N1cnJlbnQpLCBwcm9wZXJ0aWVzOiBjYW4uX2N1cnJlbnR9KQoJCWNhbi5fbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgaXRlbSkgfSkKCX0sCglfc2VhcmNoMDogZnVuY3Rpb24oY2FuLCBrZXl3b3JkKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ImJvdW5kYXJ5IjogIm5lYXJieSgiK2Nhbi5iYXNlLmpvaW4oW3AubGF0LCBwLmxuZywgIjUwMCJdLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJfSkKCX0sCglfc2VhcmNoOiBmdW5jdGlvbihjYW4sIGtleXdvcmQpIHsgdmFyIHAgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHsiYm91bmRhcnkiOiAicmVnaW9uKCIrY2FuLmJhc2Uuam9pbihbY2FuLlN0YXR1cygiY2l0eSIpLCBwLmxhdCwgcC5sbmddLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5zZWFyY2guX3RhcmdldCkKCQkJfSksIGNhbi5taXNjLkRlYnVnKHJlcykKCQl9KQoJfSwKCglfbGlzdF9yZXN1bHQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgeyB2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5taXNjLkRlYnVnKHJlcykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChyZXMucmVzdWx0WzBdLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS5mdWxsbmFtZTsgcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYik/IGNiKGl0ZW0pOiBpdGVtIH0pCgl9LAoJX2Rpc3RyaWN0OiBmdW5jdGlvbihjYW4sIGlkLCBjYikgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtpZDogaWR9KSwgImRpc3RyaWN0IiwgW10sIGNiKQoJfSwKCV9wcm92aW5jZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuX2Rpc3RyaWN0KGNhbiwgIiIsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnLCBmdW5jdGlvbihwcm92aW5jZSkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBwcm92aW5jZSwgZnVuY3Rpb24oZXZlbnQsIF8sIHNob3cpIHsgaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIHByb3ZpbmNlLmxvY2F0aW9uLCB7dHlwZTogInByb3ZpbmNlIiwgbmFtZTogcHJvdmluY2UubmFtZSwgdGV4dDogcHJvdmluY2UuZnVsbG5hbWV9KSkKCQkJCQljYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDgpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lfSkKCgkJCQkJc2hvdyA9PT0gdHJ1ZSB8fCBjYW4ub25pbXBvcnQuX2NpdHkoY2FuLCBwcm92aW5jZSwgZXZlbnQudGFyZ2V0KQoJCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCQl9KQoJCX0pCgl9LAoJX2NpdHk6IGZ1bmN0aW9uKGNhbiwgcHJvdmluY2UsIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5fZGlzdHJpY3QoY2FuLCBwcm92aW5jZS5pZCwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5pdGVtbGlzdChjYW4sIGNhbi5vbmltcG9ydC5fbGlzdF9yZXN1bHQoY2FuLCBtc2cpLCBmdW5jdGlvbihldmVudCwgY2l0eSwgc2hvdykgeyBpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjaXR5LmxvY2F0aW9uLCB7dHlwZTogImNpdHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNpdHkuZnVsbG5hbWV9KSkKCQkJCWNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgMTIpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lLCBjaXR5OiBjaXR5LmZ1bGxuYW1lfSkKCgkJCQlzaG93ID09PSB0cnVlIHx8IGNhbi5vbmltcG9ydC5fY291bnR5KGNhbiwgcHJvdmluY2UsIGNpdHksIGV2ZW50LnRhcmdldCkKCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCX0pCgl9LAoJX2NvdW50eTogZnVuY3Rpb24oY2FuLCBwcm92aW5jZSwgY2l0eSwgdGFyZ2V0KSB7CgkJY2FuLm9uaW1wb3J0Ll9kaXN0cmljdChjYW4sIGNpdHkuaWQsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuaXRlbWxpc3QoY2FuLCBjYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnKSwgZnVuY3Rpb24oZXZlbnQsIGNvdW50eSkgewoJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGNvdW50eS5sb2NhdGlvbiwge3R5cGU6ICJjb3VudHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNvdW50eS5mdWxsbmFtZX0pKQoJCQkJY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCAxNSkpLCBjYW4uU3RhdHVzKHtuYXRpb246ICLkuK3lm70iLCBwcm92aW5jZTogcHJvdmluY2UuZnVsbG5hbWUsIGNpdHk6IGNpdHkuZnVsbG5hbWV9KQoJCQl9LCBmdW5jdGlvbigpIHt9LCB0YXJnZXQpCgkJfSkKCX0sCgoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5tYXAgPSBuZXcgVE1hcC5NYXAoY2FuLnVpLmNvbnRlbnQsIHtjZW50ZXI6IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCB6b29tOiBjYW4uQWN0aW9uKCJ6b29tIiksIHBpdGNoOiBjYW4uQWN0aW9uKCJwaXRjaCIpLCByb3RhdGlvbjogY2FuLkFjdGlvbigicm90YXRpb24iKSwgbWFwU3R5bGVJZDogInN0eWxlMiJ9KQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCAiZGl2LmNvbnRlbnQ+ZGl2IiwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIHsiei1pbmRleCI6IDN9KSB9KQoJCWNhbi5jdXJyZW50ID0gewoJCQlsYWJlbDogbmV3IFRNYXAuTXVsdGlMYWJlbCh7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgY29udGVudDogaXRlbS5uYW1lfV19KSwKCQkJbWFya2VyOiBuZXcgVE1hcC5NdWx0aU1hcmtlcih7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKX1dfSksCgkJCWluZm86IGNhbi5vbmltcG9ydC5pbmZvKGNhbiwgaXRlbSksIGhvdmVyOiBjYW4ub25pbXBvcnQuaW5mbyhjYW4sIGl0ZW0pLAoJCQljaXJjbGU6IGNhbi5vbmltcG9ydC5jaXJjbGUoY2FuLCBpdGVtLCAxMDApLCBpdGVtOiBpdGVtLAoJCX0KCgkJY2FuLm1hcC5vbigicm90YXRlIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigicm90YXRpb24iLCBjYW4ubWFwLmdldFJvdGF0aW9uKCkpIH0pCgkJY2FuLm1hcC5vbigicGl0Y2giLCBmdW5jdGlvbihldmVudCkgeyBjYW4uQWN0aW9uKCJwaXRjaCIsIGNhbi5tYXAuZ2V0UGl0Y2goKSkgfSkKCQljYW4ubWFwLm9uKCJ6b29tIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigiem9vbSIsIGNhbi5tYXAuZ2V0Wm9vbSgpKSB9KQoJCWNhbi5tYXAub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIHBvaW50ID0gY2FuLm9uYWN0aW9uLl9wb2ludChldmVudCwgY2FuLCB7bmFtZTogZXZlbnQucG9pPyBldmVudC5wb2kubmFtZTogIiJ9KTsgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIHBvaW50KQoJCQljYW4uQWN0aW9uKCJtb2RlIikgPT0gImluc2VydCIgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7dGFyZ2V0OiB7Z2V0Qm91bmRpbmdDbGllbnRSZWN0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBvaW50IH19fSwgcG9pbnQpLCBtZGIuQ1JFQVRFLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIHBvaW50KQoJCQl9KQoJCX0pCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IGlmICghaXRlbS5sYXRpdHVkZSB8fCAhaXRlbS5sb25naXR1ZGUpIHsgcmV0dXJuIH0KCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIGl0ZW0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uaW1wb3J0LnBsdWdpbihjYW4sIGl0ZW0pCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uZXhwb3J0LmhvdmVyKGNhbiwgaXRlbSksIGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJZGlyZWN0aW9uOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uYWN0aW9uW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQkJZmF2b3I6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKSB9LAoJCQkJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKQoJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQkJCQljYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBjYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKQoJCQkJCX0pCgkJCQl9LAoJCQl9KQoJCX0sIHRhcmdldHx8Y2FuLnVpLmZhdm9yLl90YXJnZXQpCgkJY2FuLm1hcmsgJiYgY2FuLm1hcmsuYWRkKHtwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIHByb3BlcnRpZXM6IGl0ZW19KQoJCWNhbi5jbHVzdGVyICYmIGNhbi5jbHVzdGVyLmFkZCh7cG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pfSkKCX0sCglfY2x1c3RlcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uY2x1c3RlciA9IG5ldyBUTWFwLk1hcmtlckNsdXN0ZXIoe21hcDogY2FuLm1hcCwgZ2VvbWV0cmllczogW119KQoJfSwKCV9tYXJrOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5tYXJrID0gbmV3IFRNYXAuTXVsdGlNYXJrZXIoe21hcDogY2FuLm1hcH0pCgkJY2FuLm1hcmsub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFldmVudC5nZW9tZXRyeSkgeyByZXR1cm4gfSB2YXIgaXRlbSA9IGV2ZW50Lmdlb21ldHJ5LnByb3BlcnRpZXMKCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGl0ZW0pCgkJfSkKCQljYW4ubWFyay5vbigiaG92ZXIiLCBmdW5jdGlvbihldmVudCkgeyBpZiAoIWV2ZW50Lmdlb21ldHJ5KSB7IHJldHVybiB9IHZhciBpdGVtID0gZXZlbnQuZ2VvbWV0cnkucHJvcGVydGllcwoJCQljYW4ub25leHBvcnQuaG92ZXIoY2FuLCBpdGVtKQoJCX0pCgl9LAoKCV9wb2x5bGluZTogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJcmV0dXJuIG5ldyBUTWFwLk11bHRpUG9seWxpbmUoewoJCQltYXA6IGNhbi5tYXAsCgkJCXN0eWxlczogewoJCQkJJ3N0eWxlX2JsdWUnOiBuZXcgVE1hcC5Qb2x5bGluZVN0eWxlKHsKCQkJCQknY29sb3InOiAnIzM3NzdGRicsIC8v57q/5aGr5YWF6ImyCgkJCQkJJ3dpZHRoJzogNiwgLy/mipjnur/lrr3luqYKCQkJCQknYm9yZGVyV2lkdGgnOiA1LCAvL+i+uee6v+WuveW6pgoJCQkJCSdib3JkZXJDb2xvcic6ICcjRkZGJywgLy/ovrnnur/popzoibIKCQkJCQknbGluZUNhcCc6ICdidXR0JyAvL+e6v+err+WktOaWueW8jwoJCQkJfSksCgkJCQknc3R5bGVfcmVkJzogbmV3IFRNYXAuUG9seWxpbmVTdHlsZSh7CgkJCQkJJ2NvbG9yJzogJyNDQzAwMDAnLCAvL+e6v+Whq+WFheiJsgoJCQkJCSd3aWR0aCc6IDYsIC8v5oqY57q/5a695bqmCgkJCQkJJ2JvcmRlcldpZHRoJzogNSwgLy/ovrnnur/lrr3luqYKCQkJCQknYm9yZGVyQ29sb3InOiAnI0NDQycsIC8v6L6557q/6aKc6ImyCgkJCQkJJ2xpbmVDYXAnOiAncm91bmQnIC8v57q/56uv5aS05pa55byPCgkJCQl9KQoJCQl9LAoJCQlnZW9tZXRyaWVzOiBbeydzdHlsZUlkJzogJ3N0eWxlX2JsdWUnLCAncGF0aHMnOiBwYXRofV0KCQl9KQoJfSwKCV9tb3ZlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ubWFyay5hZGQoe2lkOiAnY2FyJywgc3R5bGVJZDogJ2Nhci1kb3duJywgcG9zaXRpb246IG5ldyBUTWFwLkxhdExuZygzOS45ODQ4MTUwMDY0ODMzOCwgMTE2LjMwNTcxMTI2OTM3ODY2KX0pCgkJY2FuLm1hcmsubW92ZUFsb25nKHsiY2FyIjoge3BhdGg6IFsKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk4NDgxNTAwNjQ4MzM4LCAxMTYuMzA1NzExMjY5Mzc4NjYpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMjY2NTc1MjIyMTU1LCAxMTYuMzA1OTY4NzYxNDQ0MDkpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMzQ4Nzg0MTY1ODg2LCAxMTYuMzExMTQwMDYwNDI0OCksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45Nzg4MTM3MTAyNjYwMjQsIDExNi4zMTExNDAwNjA0MjQ4KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk3ODgxMzcxMDI2NjAyNCwgMTE2LjMxNjk5ODAwNDkxMzMzKQoJCV0sIHNwZWVkOiA3MH19LCB7YXV0b1JvdGF0aW9uOnRydWV9KQoJfSwKCglwb2ludDogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJcmV0dXJuIG5ldyBUTWFwLkxhdExuZyhpdGVtLmxhdGl0dWRlLzEwMDAwMC4wLCBpdGVtLmxvbmdpdHVkZS8xMDAwMDAuMCkKCX0sCgljZW50ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyB2YXIgcG9pbnQgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKQoJCWNhbi5tYXAuc2V0Q2VudGVyKHBvaW50KSwgY2FuLlN0YXR1cygibmFtZSIsICIiKSwgY2FuLlN0YXR1cygidGV4dCIsICIiKSwgY2FuLlN0YXR1cyhpdGVtKSwgY2FuLlN0YXR1cyh7bGF0aXR1ZGU6IHBvaW50LmxhdCwgbG9uZ2l0dWRlOiBwb2ludC5sbmd9KQoJCWNhbi5jdXJyZW50LmluZm8uc2V0UG9zaXRpb24ocG9pbnQpLCBjYW4uY3VycmVudC5pbmZvLnNldENvbnRlbnQoKGl0ZW0ubmFtZXx8IiIpKyI8YnIvPiIrKGl0ZW0udGV4dHx8IiIpKQoJCWNhbi5jdXJyZW50LmxhYmVsLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogcG9pbnQsIGNvbnRlbnQ6IGl0ZW0ubmFtZX1dKQoJCWNhbi5jdXJyZW50Lm1hcmtlci51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IHBvaW50fV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IHBvaW50LCByYWRpdXM6IDMwMH1dKQoJCWNhbi5jdXJyZW50Lml0ZW0gPSBpdGVtCgkJaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCkKCX0sCglpbmZvOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlyZXR1cm4gbmV3IFRNYXAuSW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLAoJCQlwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG9mZnNldDoge3g6IDAsIHk6IC0zMn0sCgkJCWNvbnRlbnQ6IChpdGVtLm5hbWV8fCIiKSsiPGJyLz4iKyhpdGVtLnRleHR8fCIiKSwKCQl9KQoJfSwKCWNpcmNsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCByYWRpdXMpIHsKCQlyZXR1cm4gbmV3IFRNYXAuTXVsdGlDaXJjbGUoeyAKCQkJbWFwOiBjYW4ubWFwLCBzdHlsZXM6IHsKCQkJCWNpcmNsZTogbmV3IFRNYXAuQ2lyY2xlU3R5bGUoewoJCQkJCWNvbG9yOiAncmdiYSg0MSw5MSwyNTUsMC4xNiknLAoJCQkJCXNob3dCb3JkZXI6IHRydWUsCgkJCQkJYm9yZGVyQ29sb3I6ICdyZ2JhKDQxLDkxLDI1NSwxKScsCgkJCQkJYm9yZGVyV2lkdGg6IDIsCgkJCQl9KSwKCQkJfSwKCQkJZ2VvbWV0cmllczogW3tzdHlsZUlkOiAnY2lyY2xlJywgY2VudGVyOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgcmFkaXVzOiByYWRpdXN8fDMwMH1dLAoJCX0pCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpdGVtLmhhc2ggfSwgY2FuLnVpLnByb2ZpbGUpKSB7CgoJCX0gZWxzZSB7IGl0ZW0uZXh0cmEgPSBjYW4uYmFzZS5PYmooaXRlbS5leHRyYSwge30pCgkJCWl0ZW0uZXh0cmEuaW5kZXggJiYgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCB7aW5kZXg6IGl0ZW0uZXh0cmEuaW5kZXgsIGFyZ3M6IGl0ZW0uZXh0cmEuYXJnc30sIGNhbi51aS5wcm9maWxlLCBmdW5jdGlvbihzdWIpIHsgaXRlbS5fcGx1Z2luID0gc3ViCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkqMy80KSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCksIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSozLzQpKQoJCQl9KQoJCX0KCX0sCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEpIHsKCQlmdW5jdGlvbiBteUluZm9XaW5kb3cob3B0aW9ucykgeyBUTWFwLkRPTU92ZXJsYXkuY2FsbCh0aGlzLCBvcHRpb25zKSB9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZSA9IG5ldyBUTWFwLkRPTU92ZXJsYXkoKQoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUub25Jbml0ID0gZnVuY3Rpb24ob3B0aW9ucykgeyB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbiwgdGhpcy5tZXRhID0gb3B0aW9ucy5tZXRhIH0KCgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS5jcmVhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIG1ldGEgPSB0aGlzLm1ldGEsIHVpID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5GTE9BVCwge30sIGNhbi5fb3V0cHV0KQoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgbWV0YSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBpY2UuUlVOLCBbbWV0YS5pbmRleF0uY29uY2F0KGNtZHMpLCBjYikgfQoJCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHN1Yi5fdGFyZ2V0KSB9CgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkvMikpCgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkvMikpCgkJCQlpdGVtLl9wbHVnaW4gPSBzdWIKCQkJfSwgY2FuLl9vdXRwdXQsIHVpLmZpZWxkc2V0KQoJCQlyZXR1cm4gdWkuZmllbGRzZXQKCQl9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS51cGRhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIHBpeGVsID0gdGhpcy5tYXAucHJvamVjdFRvQ29udGFpbmVyKHRoaXMucG9zaXRpb24pOyBjYW4ucGFnZS5zdHlsZShjYW4sIHRoaXMuZG9tLCB7CgkJCQlsZWZ0OiBwaXhlbC5nZXRYKCksIHRvcDogcGl4ZWwuZ2V0WSgpKzIqaHRtbC5BQ1RJT05fSEVJR0hULAoJCQl9KQoJCX0KCQlyZXR1cm4gbmV3IG15SW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLCBwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG1ldGE6IG1ldGF9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbWyJtb2RlIiwgInNlbGVjdCIsICJpbnNlcnQiXSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ6b29tIiwgdmFsdWU6IDE3LCByYW5nZTogWzMsIDIxXX0sCgl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAicGl0Y2giLCB2YWx1ZTogMzAsIHJhbmdlOiBbMCwgODAsIDVdfSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJyb3RhdGlvbiIsIHZhbHVlOiAiMCIsIHJhbmdlOiBbMCwgMzYwLCAxMF19LAoJImN1cnJlbnQiLCAiZXhwbG9yZSIsICJjcmVhdGUiLCAiZGlyZWN0aW9uIl0sCglfdHJhbnM6IHtjdXJyZW50OiAi5a6a5L2NIiwgZmF2b3I6ICLmlLbol48ifSwKCgl6b29tOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIikpIH0sCglwaXRjaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFBpdGNoKGNhbi5BY3Rpb24oInBpdGNoIikpIH0sCglyb3RhdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIikpIH0sCgljdXJyZW50OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQpLCBjYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDE3KSksIGNhbi5tYXAuc2V0UGl0Y2goY2FuLkFjdGlvbigicGl0Y2giLCAzMCkpLCBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIiwgMCkpIH0sCgoJZXhwbG9yZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSk7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgeyJib3VuZGFyeSI6ICJuZWFyYnkoIitjYW4uYmFzZS5qb2luKFtwLmxhdCwgcC5sbmcsICI1MDAiXSwgaWNlLkZTKSsiKSIsICJwYWdlX2luZGV4IjogaX0pLCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCXZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLmNvcmUuTGlzdChyZXMuZGF0YSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGl0ZW0ubG9jYXRpb24sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLnRpdGxlLCB0ZXh0OiBpdGVtLmFkZHJlc3N9KSwgY2FuLnVpLmV4cGxvcmUuX3RhcmdldCkKCQkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJCX0pCgkJfQoJfSwKCWRpcmVjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm1hcC5nZXRDZW50ZXIoKTsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpcmVjdGlvbi5fdGFyZ2V0KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtbInR5cGUiLCAiZHJpdmluZyIsICJ3YWxraW5nIiwgImJpY3ljbGluZyIsICJ0cmFuc2l0Il1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBmcm9tID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLl9jdXJyZW50KSwgdG8gPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHt0eXBlOiBsaXN0WzBdLCAiZnJvbSI6IGNhbi5iYXNlLmpvaW4oW2Zyb20ubGF0LCBmcm9tLmxuZ10sIGljZS5GUyksICJ0byI6IGNhbi5iYXNlLmpvaW4oW3RvLmxhdCwgdG8ubG5nXSwgaWNlLkZTKX0pCgkJCWNhbi5ydW5BY3Rpb24obXNnLl9ldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSwgcm91dGUgPSByZXMucmVzdWx0LnJvdXRlc1swXQoJCQkJCXZhciBjb29ycyA9IHJvdXRlLnBvbHlsaW5lLCBwbCA9IFtdLCBrciA9IDEwMDAwMDAKCQkJCQlmb3IgKHZhciBpID0gMjsgaSA8IGNvb3JzLmxlbmd0aDsgaSsrKSB7IGNvb3JzW2ldID0gTnVtYmVyKGNvb3JzW2kgLSAyXSkgKyBOdW1iZXIoY29vcnNbaV0pIC8ga3IgfQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgY29vcnMubGVuZ3RoOyBpICs9IDIpIHsgcGwucHVzaChuZXcgVE1hcC5MYXRMbmcoY29vcnNbaV0sIGNvb3JzW2krMV0pKSB9CgkJCQkJY2FuLm9uaW1wb3J0Ll9wb2x5bGluZShjYW4sIHBsKQoKCQkJCQljYW4uY29yZS5MaXN0KHJvdXRlLnN0ZXBzLCBmdW5jdGlvbihpdGVtKSB7IHZhciBpID0gaXRlbS5wb2x5bGluZV9pZHhbMF0KCQkJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwge2xhdDogY29vcnNbaV0sIGxuZzogY29vcnNbaSsxXX0sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLmluc3RydWN0aW9uLCB0ZXh0OiBpdGVtLmFjdF9kZXNjfSksIGNhbi51aS5kaXJlY3Rpb24uX3RhcmdldCkKCQkJCQl9KSwgY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgImRpc3RhbmNlOiAiK3JvdXRlLmRpc3RhbmNlKyIgZHVyYXRpb246ICIrcm91dGUuZHVyYXRpb24pCgkJCX0pCgkJfSkKCX0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5jdXJyZW50Lml0ZW0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLmNvcmUuU3BsaXQoInR5cGUsbmFtZSx0ZXh0IiksIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbikKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncy5jb25jYXQoImxhdGl0dWRlIiwgcC5sYXRpdHVkZSwgImxvbmdpdHVkZSIsIHAubG9uZ2l0dWRlKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uYmFzZS5Db3B5KHAsIHtuYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgdGV4dDogbXNnLk9wdGlvbihtZGIuVEVYVCl9KSkKCQkJfSwgdHJ1ZSkKCQl9KQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaXRlbSkgeyB2YXIgcmVjdCA9IGNhbi51aS5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJcmV0dXJuIGNhbi5iYXNlLkNvcHkoe2xlZnQ6IHJlY3QubGVmdCtldmVudC5wb2ludC54LCBib3R0b206IHJlY3QudG9wK2V2ZW50LnBvaW50LnksIGxhdGl0dWRlOiBwYXJzZUludChldmVudC5sYXRMbmcubGF0KjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQoZXZlbnQubGF0TG5nLmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyJuYXRpb24iLCAicHJvdmluY2UiLCAiY2l0eSIsICJsYXRpdHVkZSIsICJsb25naXR1ZGUiLCAgInR5cGUiLCAibmFtZSIsICJ0ZXh0Il0sCglwb2ludDogZnVuY3Rpb24oY2FuLCBwb2ludCwgaXRlbSkgeyByZXR1cm4gY2FuLmJhc2UuQ29weSh7bGF0aXR1ZGU6IHBhcnNlSW50KHBvaW50LmxhdCoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHBvaW50LmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkgfSwKCWNlbnRlcjogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjYW4ubWFwLmdldENlbnRlcigpKSB9LAoJY3VycmVudDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbik7IHAubGF0aXR1ZGUgLz0gMTAwMDAwLCBwLmxvbmdpdHVkZSAvPSAxMDAwMDA7IGNhbi5TdGF0dXMocCkKCQljYW4uY3VycmVudC5tYXJrZXIudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQubGFiZWwudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IGNhbi5tYXAuZ2V0Q2VudGVyKCksIHJhZGl1czogMzAwfV0pCgl9LAoJaG92ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5jdXJyZW50LmhvdmVyLnNldFBvc2l0aW9uKGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pKQoJCWNhbi5jdXJyZW50LmhvdmVyLnNldENvbnRlbnQoaXRlbS5uYW1lKyI8YnIvPiIraXRlbS50ZXh0KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvbWVkaWEuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5kaXNwbGF5KGNhbiwgdGFyZ2V0KQoJCWNhbi51aS5jYW52YXMgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0eXBlOiAiY2FudmFzIiwgd2lkdGg6IDMyMCwgaGVpZ2h0OiAyNDAsIHN0eWxlOiB7ZGlzcGxheTogIm5vbmUifX1dKS5maXJzdAoKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgewoJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgInRkIl0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uc3VwLm9uYWN0aW9uLmNoYW5nZShldmVudCwgY2FuLnN1cCwga2V5LCB2YWx1ZSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnJ1bihldmVudCkKCQkJCX0pCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQpCgoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZy5SZXN1bHQoKSwgY2FuLnVpLmRpc3BsYXkpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJfSwKCglvcGVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7dmlkZW86IHt3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MH19LCBmdW5jdGlvbihzdHJlYW0pIHsKCQkJdmFyIHZpZGVvID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsICJ2aWRlbyIpCgkJCXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbSwgdmlkZW8ucGxheSgpCgkJCWNhbi51aS52aWRlbyA9IHZpZGVvCgkJfSwgZnVuY3Rpb24oZXJyb3IpIHsKCQkJY2FuLm1pc2MuTG9nKCJvcGVuIGNhbWVyYSIsIGVycm9yKQoJCX0pCgl9LAoJc25hcHNob3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udWkuY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKGNhbi51aS52aWRlbywgMCwgMCkKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0eXBlOiAiaW1nIiwgc3JjOiBjYW4udWkuY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2Uvd2VicCcpfV0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC90cmFucy5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5mcm9tID0gY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuRElSLCBodG1sLkxFRlQsICJmcm9tIiwgInRvIikKCQljYW4udG8gPSBjYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5ESVIsIGh0bWwuUklHSFQsICJ0byIsICJmcm9tIikKCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5UUkFTSCwgaHRtbC5MRUZULCAiZnJvbSIpCgkJY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuVFJBU0gsIGh0bWwuUklHSFQsICJ0byIpCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgcG9zLCBmcm9tLCB0bykgewoJCXJldHVybiBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuU1RPUlksIGluZGV4OiBpbmRleH0sIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCB7ZmxvYXQ6IHBvcywgY2xlYXI6IHBvc30pCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLzIpCgkJCXN1Yi5fbGVnZW5kLmlubmVySFRNTCA9IGNhbi5PcHRpb24oZnJvbSkraWNlLlNQK2luZGV4CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsICJtYXgtd2lkdGgiLCBjYW4uQ29uZldpZHRoKCkvMikKCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCWlmIChjYW4ub25hY3Rpb25bY21kc1sxXV0pIHsgcmV0dXJuIGNhbi5vbmFjdGlvbltjbWRzWzFdXShjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIH0KCgkJCQl2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIHtfcG9kOiBjYW4uT3B0aW9uKGZyb20pfSkKCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBpbmRleCwgY21kcywgY2IpCgkJCX0KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCglzZW5kOiBmdW5jdGlvbihjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIHsgdmFyIF9mcm9tID0gY2FuW2Zyb21dLCBfdG8gPSBjYW5bdG9dCgkJdmFyIHBhdGggPSBjYW4ucmVxdWVzdChldmVudCkuT3B0aW9uKG5mcy5QQVRIKQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFLAoJCQlmcm9tOiBjYW4uT3B0aW9uKGZyb20pLCBmcm9tX3BhdGg6IHBhdGgsCgkJCXRvOiBjYW4uT3B0aW9uKHRvKSwgdG9fcGF0aDogX3RvLk9wdGlvbihuZnMuUEFUSCkrcGF0aC5zcGxpdChpY2UuUFMpLnBvcCgpLAoJCX0pCgkJY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24oKSB7IF90by5VcGRhdGUoKSB9LCB0cnVlKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvd3guanMiClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtzb3VyY2U6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgljYW4ucmVxdWlyZShbImh0dHBzOi8vcmVzLnd4LnFxLmNvbS9vcGVuL2pzL2p3ZWl4aW4tMS42LjAuanMiXSwgZnVuY3Rpb24oY2FuKSB7CgkJd3guY29uZmlnKHtkZWJ1ZzogbXNnLk9wdGlvbigiZGVidWciKSA9PSBpY2UuVFJVRSwKCQkJYXBwSWQ6IG1zZy5PcHRpb24oImFwcGlkIiksIHNpZ25hdHVyZTogbXNnLk9wdGlvbigic2lnbmF0dXJlIiksCgkJCW5vbmNlU3RyOiBtc2cuT3B0aW9uKCJub25jZXN0ciIpLCB0aW1lc3RhbXA6IG1zZy5PcHRpb24oInRpbWVzdGFtcCIpLAoKCQkJanNBcGlMaXN0OiBjYW4uY29yZS5JdGVtKHsKCQkJCXNjYW5RUkNvZGU6IGZ1bmN0aW9uKGNiKSB7IHd4LnNjYW5RUkNvZGUoe25lZWRSZXN1bHQ6IGNiPyAxOiAwLCBzY2FuVHlwZTogWyJxckNvZGUiLCJiYXJDb2RlIl0sIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHJlcy5yZXN1bHRTdHIsIGNhbi5iYXNlLlBhcnNlSlNPTihyZXMucmVzdWx0U3RyKSkKCQkJCX0gfSkgfSwKCQkJCWdldExvY2F0aW9uOiBmdW5jdGlvbihjYikgeyB3eC5nZXRMb2NhdGlvbih7dHlwZTogImdjajAyIiwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioe3R5cGU6ICJnY2owMiIsIG5hbWU6ICLlvZPliY3kvY3nva4iLCB0ZXh0OiAi5b2T5YmN5L2N572uIiwgbGF0aXR1ZGU6IHBhcnNlSW50KHJlcy5sYXRpdHVkZSoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHJlcy5sb25naXR1ZGUqMTAwMDAwKSB9KQoJCQkJfSB9KSB9LAoJCQkJb3BlbkxvY2F0aW9uOiBmdW5jdGlvbihtc2cpIHsgd3gub3BlbkxvY2F0aW9uKHsKCQkJCQlsYXRpdHVkZTogcGFyc2VJbnQobXNnLk9wdGlvbigibGF0aXR1ZGUiKSkvMTAwMDAwLAoJCQkJCWxvbmdpdHVkZTogcGFyc2VJbnQobXNnLk9wdGlvbigibG9uZ2l0dWRlIikpLzEwMDAwMCwKCQkJCQluYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgYWRkcmVzczogbXNnLk9wdGlvbihtZGIuVEVYVCksCgkJCQkJc2NhbGU6IG1zZy5PcHRpb24oInNjYWxlIil8fDE0LCBpbmZvVXJsOiBtc2cuT3B0aW9uKG1kYi5MSU5LKSwKCQkJCX0pIH0sCgkJCQljaG9vc2VJbWFnZTogZnVuY3Rpb24oY2IsIGNvdW50KSB7IHd4LmNob29zZUltYWdlKHtjb3VudDogY291bnR8fDksIHNpemVUeXBlOiBbJ29yaWdpbmFsJywgJ2NvbXByZXNzZWQnXSwgc291cmNlVHlwZTogWydhbGJ1bScsICdjYW1lcmEnXSwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IocmVzLmxvY2FsSWRzKQoJCQkJfSB9KSB9LAoJCQl9LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4udXNlci5hZ2VudFtrZXldID0gdmFsdWUsIGtleSB9KSwKCQl9KQoJCXd4LmVycm9yKGZ1bmN0aW9uKGVycikgeyBjYW4udXNlci50b2FzdChlcnIsICJ3eCBsb2FkIikgfSkKCQl3eC5yZWFkeShmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKCJyZWFkeSIpIH0pCgl9KQp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJdmFyIHBhdGhzID0gY2FuLmNvcmUuU3BsaXQoY2FuLk9wdGlvbihuZnMuUEFUSCksIGljZS5GUyk7IGNhbi5PcHRpb24obmZzLlBBVEgsIHBhdGhzWzBdKQoJCXZhciBmaWxlcyA9IGNhbi5jb3JlLlNwbGl0KGNhbi5PcHRpb24obmZzLkZJTEUpLCBpY2UuRlMpOyBjYW4uT3B0aW9uKG5mcy5GSUxFLCBmaWxlc1swXSkKCQljYW4udGFidmlldyA9IGNhbi50YWJ2aWV3fHx7fSwgY2FuLmhpc3RvcnkgPSBjYW4uaGlzdG9yeXx8W10sIGNhbi50b29sa2l0ID0ge30sIGNhbi5leHRlbnRpb25zID0ge30KCQljYW4ucHJvZmlsZV9zaXplID0ge30sIGNhbi5kaXNwbGF5X3NpemUgPSB7fQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkucHJvamVjdCwgMjQwKQoJCWNhbi5vbmltcG9ydC5fcHJvamVjdChjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGNhbi51aS5wcm9maWxlKQoJCWNhbi5vbmltcG9ydC5fZGlzcGxheShjYW4sIGNhbi51aS5kaXNwbGF5KQoJCWNhbi5vbmltcG9ydC5faW5wdXQoY2FuKQoKCQljYW4udWkuX2NvbnRlbnQgPSBjYW4udWkuY29udGVudAoJCWNhbi51aS5fcHJvZmlsZV9vdXRwdXQgPSBjYW4udWkucHJvZmlsZV9vdXRwdXQKCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fc3RhdHVzKQoJCWNhbi5vbmVuZ2luZS5wbHVnaW4oY2FuLCBjYW4ub25wbHVnaW4pCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCXN3aXRjaCAoY2FuLk1vZGUoKSkgewoJCQljYXNlICJzaW1wbGUiOiBjYW4ub25pbXBvcnQuX3NpbXBsZShjYW4pOyBicmVhawoJCQljYXNlICJmbG9hdCI6IGJyZWFrCgkJCWNhc2UgImNtZCI6IGNhbi5vbmltcG9ydC5fdGFicyhjYW4pIC8vIG5vIGJyZWFrCgkJCWNhc2UgImZ1bGwiOiAvLyBubyBicmVhawoJCQlkZWZhdWx0OiBpZiAoY2FuLkNvbmZIZWlnaHQoKSA8IDMyMCkgeyBjYW4uQ29uZkhlaWdodCgzMjApIH0KCQkJCWNhbi5vbmltcG9ydC5wcm9qZWN0KGNhbiwgcGF0aHMpLCBjYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJCQljYW4ub25pbXBvcnQuX3Rvb2xraXQoY2FuLCBjYW4udWkudG9vbGtpdCksIGNhbi5vbmltcG9ydC5fc2Vzc2lvbihjYW4sIG1zZywgZnVuY3Rpb24oKSB7CgkJCQkJZmlsZXMubGVuZ3RoID4gMSAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLmNvcmUuTmV4dChmaWxlcy5zbGljZSgxKSwgZnVuY3Rpb24oZmlsZSwgbmV4dCkgewoJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSwgbmV4dCkKCQkJCQl9LCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoc1swXSwgZmlsZXNbMF0sICIiKSB9KSB9KQoJCQkJfSksIGNhbi5vbmltcG9ydC5fa2V5ZG93bihjYW4pCgkJfQoKCQl2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7IGNhbi5pc0NtZE1vZGUoKSB8fCAoY2FuLnRhYnZpZXdbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBtc2cpCgkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLkxJTkUpLCBmdW5jdGlvbigpIHsKCQkJaWYgKGNhbi5pc0NtZE1vZGUoKSAmJiBoYXNoKSB7IHZhciBhcmdzID0gY2FuLmNvcmUuU3BsaXQoZGVjb2RlVVJJQ29tcG9uZW50KGhhc2gpLnNsaWNlKDEpKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGFyZ3NbMF0sIGFyZ3NbMV0pIH0pCgkJCX0KCQl9KQoJfSwKCV9pbnB1dDogZnVuY3Rpb24oY2FuKSB7Cgl9LAoJX3Byb2plY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW2h0bWwuQUNUSU9OLCBodG1sLk9VVFBVVF0pOyBjYW4udWkucHJvZmlsZV9vdXRwdXQgPSB1aS5vdXRwdXQKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbXSwgdWkuYWN0aW9uLCBraXQuRGljdCgKCQkJY2xpLkNMT1NFLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgkJCWNsaS5DTEVBUiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdWkub3V0cHV0KSB9LAoJCQljbGkuU0hPVywgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXShldmVudCwgY2FuKSB9LAoJCQluZnMuTE9BRCwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uYWN0aW9uW25mcy5MT0FEXShldmVudCwgY2FuKSB9LAoJCQltZGIuTElOSywgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmIChbbmZzLlpNTCwgbmZzLklNTF0uaW5kZXhPZihjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKSA+IC0xKSB7CgkJCQkJY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHsKCQkJCQkJcG9kOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgd2Vic2l0ZTogY2FuLmJhc2UudHJpbVByZWZpeChjYW4uYmFzZS5QYXRoKGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSksICJzcmMvd2Vic2l0ZS8iKSwKCQkJCQl9KSkKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHsKCQkJCQkJcG9kOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgY21kOiBjYW4uYmFzZS5QYXRoKGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSkKCQkJCQl9KSkKCQkJCX0KCQkJfSwKCQkJbWRiLlBMVUdJTiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihkYXRhKSB7IGNhbi5vbmltcG9ydC5wbHVnKGNhbiwgZGF0YSwgdWkub3V0cHV0KSB9KSB9LAoJCQlodG1sLldJRFRILCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBodG1sLldJRFRILCB2YWx1ZTogY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSoxMDAvY2FuLkNvbmZXaWR0aCgpfHw1MH1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQkJY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IGNhbi5Db25mV2lkdGgoKSpwYXJzZUludChsaXN0WzBdKS8xMDAKCQkJCQljYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pCgkJCQl9KQoJCQl9CgkJKSk7IHRhcmdldC5fdG9nZ2xlID0gZnVuY3Rpb24oZXZlbnQsIHNob3cpIHsgYWN0aW9uW3Nob3c/IGNsaS5TSE9XOiBjbGkuQ0xPU0VdKGV2ZW50KSB9Cgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVULCBodG1sLlNUQVRVU10pOyBjYW4udWkuZGlzcGxheV9vdXRwdXQgPSB1aS5vdXRwdXQsIGNhbi51aS5kaXNwbGF5X3N0YXR1cyA9IHVpLnN0YXR1cwoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIGtpdC5EaWN0KAoJCQljbGkuQ0xPU0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCQkJY2xpLkNMRUFSLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB1aS5vdXRwdXQpIH0sCgkJCWNsaS5FWEVDLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bY2xpLkVYRUNdKGV2ZW50LCBjYW4pIH0sCgkJCW1kYi5QTFVHSU4sIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oZGF0YSkgeyBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIGRhdGEsIHVpLm91dHB1dCkgfSkgfSwKCQkJaHRtbC5IRUlHSFQsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuSEVJR0hULCB2YWx1ZTogY2FuLmRpc3BsYXlfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSoxMDAvY2FuLkNvbmZIZWlnaHQoKXx8NTB9XSwgZnVuY3Rpb24obGlzdCkgewoJCQkJCWNhbi5kaXNwbGF5X3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBjYW4uQ29uZkhlaWdodCgpKnBhcnNlSW50KGxpc3RbMF0pLzEwMAoJCQkJCWNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikKCQkJCX0pCgkJCX0KCQkpKTsgdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBhY3Rpb25bc2hvdz8gY2xpLkVYRUM6IGNsaS5DTE9TRV0oZXZlbnQpIH0KCX0sCglfdG9vbGtpdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4udWkudG9vbGtpdCA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sICJ0b29sa2l0Iiwge30sIGNhbi5fb3V0cHV0KQoJfSwKCV9rZXlkb3duOiBmdW5jdGlvbihjYW4pIHsgY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pCgkJY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBjaGF0Lk9OS0VZRE9XTiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLl9rZXlfbGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgbWRiLlBMVUdJTiwgY2FuLl9rZXlfbGlzdCwgY2FuLnVpLmNvbnRlbnQpCgkJfSkKCX0sCglfc2Vzc2lvbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ub25pbXBvcnQuc2VzcyhjYW4sICIiLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnNlc3MoY2FuLCB7CgkJCXBsdWc6IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb25PclNlYXJjaCgicGx1ZyIpKS5yZXZlcnNlKCksCgkJCWV4dHM6IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb25PclNlYXJjaCgiZXh0cyIpKS5yZXZlcnNlKCksCgkJCXRhYnM6IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb25PclNlYXJjaCgidGFicyIpKSwKCQl9KSB9KQoJfSwKCV9zaW1wbGU6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi50YWJ2aWV3W2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gY2FuLl9tc2cKCQljYW4uQ29uZkhlaWdodCgiIiksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsIGh0bWwuT1VUUFVUKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgInNpbXBsZSIpCgl9LAoJX3RhYnM6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi51aS5fdGFicyA9IGNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIFt7dmlldzogInRhYnMifV0sIGNhbi51aS5jb250ZW50KQoJCWNhbi51aS5fcGF0aCA9IGNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIFt7dmlldzogInBhdGgifV0sIGNhbi51aS5jb250ZW50KQoJfSwKCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgeyBpZiAoY2FuLmlzU2ltcGxlTW9kZSgpKSB7IHJldHVybiB9CgkJaWYgKGNhbi5pc0Zsb2F0TW9kZSgpKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbiksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkgfQoKCQl2YXIgd2lkdGggPSBjYW4uQ29uZldpZHRoKCkrKGNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAxNjogMCktKGNhbi51c2VyLmlzV2luZG93cyAmJiAhY2FuLmlzQ21kTW9kZSgpPyAyMDogMCkKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBjYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildfHwod2lkdGgtY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpLzIpCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5jb250ZW50LCB3aWR0aC1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aC1jYW4udWkucHJvZmlsZS5vZmZzZXRXaWR0aCkKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLmRpc3BsYXksIHdpZHRoLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoKQoKCQl2YXIgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCWlmIChjYW4udXNlci5pc01vYmlsZSAmJiBjYW4uaXNGbG9hdE1vZGUoKSkgeyBoZWlnaHQgPSBjYW4uX3Jvb3QuX2hlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCB9CgoJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsKCQkJaWYgKGNhbi51aS5kaXNwbGF5LmRpc3BsYXkgIT0gaHRtbC5OT05FKSB7CgkJCQlpZiAoY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0ID4gY2FuLmJhc2UuTWluKGNhbi5Db25mSGVpZ2h0KCkgLyAyLCAyMDApKSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheV9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLmJhc2UuTWluKGNhbi5Db25mSGVpZ2h0KCkgLyAyLCAyMDApKQoJCQkJfQoJCQl9CgkJCWlmIChjYW4uX3N0YXR1cy5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORSkgeyBoZWlnaHQgKz0gaHRtbC5BQ1RJT05fSEVJR0hUIH0KCQkJdmFyIHJlc3QgPSBjYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQrY2FuLnVpLl90YWJzLm9mZnNldEhlaWdodCtjYW4udWkuX3BhdGgub2Zmc2V0SGVpZ2h0KzQKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkuY29udGVudCwgaGVpZ2h0K2h0bWwuQUNUSU9OX0hFSUdIVC1yZXN0KQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgaGVpZ2h0LWNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvamVjdCwgaGVpZ2h0K2h0bWwuQUNUSU9OX0hFSUdIVCkKCQl9IGVsc2UgeyB2YXIgcmVzdCA9IGNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodDsgaWYgKGhlaWdodCA8IDMyMCkgeyBoZWlnaHQgPSAzMjAgfQoJCQlpZiAoIWNhbi5pc0Z1bGxNb2RlKCkpIHsKCQkJCWNhbi5fbWluX2hlaWdodCA9IGNhbi5fbWluX2hlaWdodHx8aGVpZ2h0LCBoZWlnaHQgPj0gY2FuLl9taW5faGVpZ2h0ICYmIChjYW4uX21pbl9oZWlnaHQgPSBoZWlnaHQpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLk1JTl9IRUlHSFQsIGNhbi5fbWluX2hlaWdodCkKCQkJfQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBjYW4udXNlci5pc01vYmlsZT8gaHRtbC5IRUlHSFQ6IGh0bWwuTUFYX0hFSUdIVCwgaGVpZ2h0LXJlc3QpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQtaHRtbC5BQ1RJT05fSEVJR0hUKQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9qZWN0LCBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQrcmVzdCkKCQl9CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLnByb2ZpbGUsIGh0bWwuSUZSQU1FLCBmdW5jdGlvbihpZnJhbWUpIHsKCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaWZyYW1lLCB7aGVpZ2h0OiBjYW4udWkucHJvZmlsZS5vZmZzZXRIZWlnaHQtaHRtbC5BQ1RJT05fSEVJR0hULTQsIHdpZHRoOiBjYW4udWkucHJvZmlsZS5vZmZzZXRXaWR0aH0pCgkJfSkKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsKCQljYW4ub25pbXBvcnQuem9uZShjYW4sIFsKCQkJe25hbWU6ICJzb3VyY2UiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHZhciB0b3RhbCA9IDAKCQkJCWZ1bmN0aW9uIHNob3cocGF0aCwgdGFyZ2V0KSB7IGNhbi5ydW4oY2FuLnJlcXVlc3Qoe30sIHtkaXJfcm9vdDogcGF0aCwgZGlyX2RlZXA6IHRydWV9KSwgW2ljZS5QV0RdLCBmdW5jdGlvbihtc2cpIHsgdmFyIGxpc3QgPSBtc2cuVGFibGUoKQoJCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZihpdGVtLnBhdGgpID09IDApIHsgaXRlbS5leHBhbmQgPSB0cnVlIH0gfSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGxpc3QsIG5mcy5QQVRILCBpY2UuUFMsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgaXRlbS5wYXRoKSAvLyDmmL7npLrmlofku7YKCQkJCQl9LCB0YXJnZXQpLCBjYW4uU3RhdHVzKCLmlofku7bmlbAiLCB0b3RhbCArPSBtc2cuTGVuZ3RoKCkpCgkJCQl9LCB0cnVlKSB9IGlmIChwYXRoLmxlbmd0aCA9PSAxKSB7IHJldHVybiBzaG93KHBhdGhbMF0sIHRhcmdldCkgfQoKCQkJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgY2FuLmNvcmUuTGlzdChwYXRoLCBmdW5jdGlvbihwYXRoKSB7IHJldHVybiB7bmFtZTogcGF0aCwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBzaG93KHBhdGgsIHRhcmdldCkgfX0gfSksIHRhcmdldCkKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQucHJldmlvdXNTaWJsaW5nLmlubmVySFRNTCA9ICIiIH0pCgkJCX19LAoJCQl7bmFtZTogInBsdWdpbiIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgY2FuLmNvcmUuSXRlbShjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4ge2luZGV4OiBjYW4uYmFzZS50cmltUHJlZml4KGtleSwgImNhbi4iKX0gfSksIGN0eC5JTkRFWCwgaWNlLlBULCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5jb3JlLktleXMoImNhbiIsIGl0ZW0uaW5kZXgpLCBjdHguSU5ERVgpIC8vIOaYvuekuuaPkuS7tgoJCQkJfSwgdGFyZ2V0KQoJCQl9fSwKCQldLCBjYW4udWkucHJvamVjdCkKCX0sCgloaXN0b3J5OiBmdW5jdGlvbihjYW4sIHB1c2gpIHsKCQljYW4uYmFzZS5FcShwdXNoLCBjYW4uaGlzdG9yeVtjYW4uaGlzdG9yeS5sZW5ndGgtMV0pIHx8IGNhbi5oaXN0b3J5LnB1c2gocHVzaCkKCQlyZXR1cm4gY2FuLlN0YXR1cygi6Lez6L2s5pWwIiwgY2FuLmhpc3RvcnkubGVuZ3RoKSwgcHVzaAoJfSwKCXRhYnZpZXc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgZmlsZSwgbGluZSwgY2IsIHNraXAsIHNraXAyKSB7IHZhciBrZXkgPSBjYW4ub25leHBvcnQua2V5cyhjYW4sIGZpbGUsIHBhdGgpCgkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgeyBsb2NhdGlvbi5oYXNoID0gZmlsZStpY2UuRlMrKGxpbmV8fDEpIH0KCQlpZiAoIXNraXAgJiYgY2FuLnRhYnZpZXdba2V5XSkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUocGF0aCtmaWxlKQoJCQljYW4uX21zZyAmJiBjYW4uX21zZy5PcHRpb24obmZzLkxJTkUsIGNhbi5PcHRpb24obmZzLkxJTkUpKSwgY2FuLl9tc2cgPSBjYW4udGFidmlld1trZXldCgkJCWNhbi5PcHRpb24oe3BhdGg6IHBhdGgsIGZpbGU6IGZpbGUsIGxpbmU6IGxpbmV8fGNhbi5fbXNnLk9wdGlvbihuZnMuTElORSl8fDF9KQoJCQlyZXR1cm4gY2FuLl9tc2cuT3B0aW9uKGNhbi5PcHRpb24oKSksIGNhbi5vbnN5bnRheC5faW5pdChjYW4sIGNhbi5fbXNnLCBjYiwgc2tpcDIpCgkJfQoKCQlmdW5jdGlvbiBzaG93KG1zZykgeyB2YXIgc2tpcDIgPSBza2lwOyBjYW4udGFidmlld1trZXldID0gbXNnCgkJCWNhbi5vbmltcG9ydC50YWJzKGNhbiwgW3tuYW1lOiBmaWxlLnNwbGl0KGxpbmUgPT0gY3R4LklOREVYPyBpY2UuUFQ6IGljZS5QUykucG9wKCksIHRleHQ6IGZpbGV9XSwgZnVuY3Rpb24oZXZlbnQsIG1ldGEpIHsKCQkJCWNhbi5fdGFiID0gbXNnLl90YWIgPSBldmVudC50YXJnZXQsIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgZmlsZSwgbXNnLk9wdGlvbihuZnMuTElORSksIGNiLCBmYWxzZSwgc2tpcDIpLCBjYiA9IG51bGwsIHNraXAyID0gZmFsc2UKCQkJfSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJZGVsZXRlKGNhbi50YWJ2aWV3W2tleV0pCgkJCQlkZWxldGUoY2FuLl9jYWNoZV9kYXRhW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJZGVsZXRlKGNhbi51aS5fY29udGVudC5fY2FjaGVbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLl9wcm9maWxlX291dHB1dC5fY2FjaGVbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLmRpc3BsYXlfb3V0cHV0Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCW1zZy5fY29udGVudCAhPSBjYW4udWkuX2NvbnRlbnQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgbXNnLl9jb250ZW50KQoJCQl9LCBjYW4udWkuX3RhYnMsIGZ1bmN0aW9uKGl0ZW0pIHt9KQoJCX0KCgkJY2FuLk9wdGlvbihjYW4ub25pbXBvcnQuaGlzdG9yeShjYW4sIHtwYXRoOiBwYXRoLCBmaWxlOiBmaWxlLCBsaW5lOiBsaW5lfSkpCgkJbGluZSA9PSBjdHguSU5ERVg/IHNob3coY2FuLnJlcXVlc3Qoe30sIHtpbmRleDogZmlsZSwgbGluZTogbGluZX0pKToKCQkJbGluZSA9PSB3ZWIuRFJFQU0/IHNob3coY2FuLnJlcXVlc3Qoe30sIHtpbmRleDogZmlsZSwgbGluZTogbGluZX0pKToKCQkJCWNhbi5ydW4oe30sIFtwYXRoLCBmaWxlXSwgc2hvdywgdHJ1ZSkKCX0sCglwcm9maWxlOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciB3aWR0aCA9IGNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fChjYW4uQ29uZldpZHRoKCktY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpLzIKCQlpZiAobXNnKSB7CgkJCXZhciBzdXAgPSBjYW4udGFidmlld1tjYW4ub25leHBvcnQua2V5cyhjYW4pXQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBmYWxzZSkKCQkJaWYgKG1zZy5SZXN1bHQoKS5pbmRleE9mKCI8aWZyYW1lIikgPiAtMSkgewoJCQkJaWYgKHN1cC5fcHJvZmlsZV9vdXRwdXQgIT0gY2FuLnVpLl9wcm9maWxlX291dHB1dCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBzdXAuX3Byb2ZpbGVfb3V0cHV0KSB9CgkJCQljYW4udWkucHJvZmlsZV9vdXRwdXQgPSBzdXAuX3Byb2ZpbGVfb3V0cHV0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LnBhcmVudE5vZGUsIFt7dmlldzogIm91dHB1dCIsIGlubmVyOiBtc2cuUmVzdWx0KCl9XSkub3V0cHV0CgkJCX0gZWxzZSB7CgkJCQljYW4udWkucHJvZmlsZV9vdXRwdXQgPSBzdXAuX3Byb2ZpbGVfb3V0cHV0ID0gY2FuLnVpLl9wcm9maWxlX291dHB1dAoJCQkJY2FuLm9uaW1wb3J0LnByb2Nlc3MoY2FuLCBtc2csIGNhbi51aS5fcHJvZmlsZV9vdXRwdXQsIHdpZHRoLCBjYW4udWkucHJvZmlsZS5vZmZzZXRIZWlnaHQpCgkJCX0KCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgdHJ1ZSkKCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIHRydWUpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCX0sCglkaXNwbGF5OiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWlnaHQgPSBjYW4uZGlzcGxheV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildfHx7c2g6IGNhbi5Db25mSGVpZ2h0KCkvMn1bY2FuLnBhcnNlXXx8Y2FuLkNvbmZIZWlnaHQoKS80CgkJaWYgKG1zZykgewoJCQljYW4ub25pbXBvcnQucHJvY2VzcyhjYW4sIG1zZywgY2FuLnVpLmRpc3BsYXlfb3V0cHV0LCBjYW4udWkuZGlzcGxheS5vZmZzZXRXaWR0aCwgaGVpZ2h0KQoJCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpLCBjYW4udWkuZGlzcGxheV9zdGF0dXMpCgkJfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuZGlzcGxheSwgdHJ1ZSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCXByb2Nlc3M6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpID09ICJfZmllbGQiKSB7CgkJCW1zZy5UYWJsZShmdW5jdGlvbihtZXRhKSB7IG1ldGEuZGlzcGxheSA9IG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKQoJCQkJY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBtZXRhLCB0YXJnZXQsIGZ1bmN0aW9uKHN1YikgeyB3aWR0aCAmJiBzdWIuQ29uZldpZHRoKHdpZHRoKSwgaGVpZ2h0ICYmIHN1Yi5Db25mSGVpZ2h0KGhlaWdodCksIHN1Yi5Gb2N1cygpIH0pCgkJCX0pCgkJfSBlbHNlIGlmIChtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkgIT0gIiIpIHsKCQkJY2FuLm9uYXBwZW5kLl9vdXRwdXQoY2FuLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKSwgdGFyZ2V0LCBmYWxzZSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSkgfSkKCQl9IGVsc2UgewoJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIG51bGwsIHRhcmdldCksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCX0sCgl0b29sa2l0OiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiKSB7IG1ldGEubXNnID0gdHJ1ZQoJCWNhbi5vbmltcG9ydC5wbHVnKGNhbiwgbWV0YSwgY2FuLnVpLnRvb2xraXQub3V0cHV0LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS00Kmh0bWwuQUNUSU9OX0hFSUdIVCksIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKQoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgoJCQljYW4uX3N0YXR1cy5hcHBlbmRDaGlsZChzdWIuX2xlZ2VuZCksIHN1Yi5fbGVnZW5kLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fc3RhdHVzLCBpY2UuUFQraHRtbC5TRUxFQ1QpWzBdID09IGV2ZW50LnRhcmdldCkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBldmVudC50YXJnZXQsIGh0bWwuU0VMRUNUKQoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBzdWIuX3RhcmdldCwgaHRtbC5TRUxFQ1QpCgkJCQkJcmV0dXJuCgkJCQl9CgkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLnRvb2xraXQub3V0cHV0LCBodG1sLkZJRUxEU0VULCBzdWIuX3RhcmdldCksIHN1Yi5Gb2N1cygpCgkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9zdGF0dXMsIGh0bWwuTEVHRU5ELCBldmVudC50YXJnZXQpCgkJCQlpZiAobWV0YS5tc2cgPT0gdHJ1ZSkgeyBtZXRhLm1zZyA9IGZhbHNlLCBzdWIuVXBkYXRlKCkgfQoJCQl9LCBzdWIuc2VsZWN0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBzdWIuX2xlZ2VuZC5jbGljaygpLCBzdWIgfQoJCQlzdWIub25hY3Rpb24uY2xvc2UgPSBmdW5jdGlvbigpIHsgc3ViLnNlbGVjdCgpIH0KCQkJc3ViLl9sZWdlbmQub25tb3VzZWVudGVyID0gbnVsbAoJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQl9KQoJfSwKCWV4dHM6IGZ1bmN0aW9uKGNhbiwgdXJsLCBjYikgewoJCWNhbi5yZXF1aXJlKFt1cmxdLCBmdW5jdGlvbigpIHt9LCBmdW5jdGlvbihjYW4sIG5hbWUsIHN1YikgeyBzdWIuX2luaXQoY2FuLCBjYW4uYmFzZS5QYXJzZVVSTChzdWIuX3BhdGgpLCBmdW5jdGlvbihzdWIpIHsKCQkJY2FuLmV4dGVudGlvbnNbdXJsLnNwbGl0KCI/IilbMF1dID0gc3ViLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQl9KSB9KQoJfSwKCXNlc3M6IGZ1bmN0aW9uKGNhbiwgc2VzcywgY2IpIHsgc2VzcyA9IHNlc3N8fGNhbi51c2VyLmxvY2FsU3RvcmFnZShjYW4sICJ3ZWIuY29kZS5pbm5lci5zZXNzIikKCQljYW4uY29yZS5OZXh0KHNlc3MucGx1ZywgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogaXRlbX0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFtpdGVtXSA9IHN1YiwgbmV4dCgpIH0pIH0sIGZ1bmN0aW9uKCkgewoJCQljYW4uY29yZS5OZXh0KHNlc3MuZXh0cywgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25pbXBvcnQuZXh0cyhjYW4sIGl0ZW0sIG5leHQpIH0sIGZ1bmN0aW9uKCkgewoJCQkJdmFyIHBhdGggPSBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgZmlsZSA9IGNhbi5PcHRpb24obmZzLkZJTEUpLCBsaW5lID0gY2FuLk9wdGlvbihuZnMuTElORSkKCQkJCWNhbi5iYXNlLmdldFZhbGlkKHNlc3MudGFicyk/IGNhbi5jb3JlLk5leHQoc2Vzcy50YWJzLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IHZhciBscyA9IGl0ZW0uc3BsaXQoaWNlLkRGKTsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsc1swXSwgbHNbMV0sIGxzWzJdLCBuZXh0KSB9LAoJCQkJCWZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGgsIGZpbGUsIGxpbmUsIGNiKSB9KTogY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJCX0pCgkJfSkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwgCgkiY2FuLmNvZGUuaW5uZXIua2V5bWFwIjogc2h5KCLmjInplK4iLCB7fSwgWyJtb2RlIiwgImtleSIsIGljZS5MSVNULCBpY2UuQkFDS10sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJY2FuLmNvcmUuSXRlbShjYW4ub25rZXltYXAuX21vZGUsIGZ1bmN0aW9uKG1vZGUsIHZhbHVlKSB7CgkJCSghY21kc1swXSB8fCBjbWRzWzBdID09IG1vZGUpICYmIGNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgZnVuYykgewoJCQkJaWYgKGNtZHNbMF0gPT0gbW9kZSAmJiBjbWRzWzFdID09IGtleSkgewoJCQkJCW1zZy5QdXNoKCJrZXkiLCAibW9kZSIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwgbW9kZSkKCQkJCQltc2cuUHVzaCgia2V5IiwgImtleSIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwga2V5KQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAiaGVscCIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwgZnVuYy5oZWxwKQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAiZnVuYyIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwgZnVuYy50b1N0cmluZygpKQoJCQkJfSBlbHNlIGlmICghY21kc1swXSB8fCAhY21kc1sxXSkgewoJCQkJCW1zZy5QdXNoKGtpdC5EaWN0KCJtb2RlIiwgbW9kZSwgImtleSIsIGtleSwgImhlbHAiLCBmdW5jLmhlbHB8fGZ1bmMudG9TdHJpbmcoKSkpCgkJCQl9CgkJCX0pCgkJfSksIG1zZy5TdGF0dXNUaW1lQ291bnQoKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05TWU5UQVgsIHtoZWxwOiAi6K+t5rOV6auY5LquIiwgbGlzdDogWyJrZXl3b3JkIiwgInByZWZpeCIsICJsaW5lIl0sIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHNraXApIHsKCQlpZiAoY2FuLnVpLl9wYXRoKSB7CgkJCWNhbi51aS5fcGF0aC5pbm5lckhUTUwgPSBtc2cuT3B0aW9uKGN0eC5JTkRFWCk/IG1zZy5PcHRpb24obmZzLkxJTkUpID09IHdlYi5EUkVBTT8KCQkJCS8qIGRyZWFtICovIGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogbXNnLk9wdGlvbihuZnMuRklMRSksIHRvcGljOiBjYW4ubWlzYy5TZWFyY2goY2FuLCAidG9waWMiKX0sIHRydWUpKToKCQkJCS8qIGluZGV4ICovIG1zZy5PcHRpb24obmZzLkZJTEUpOiAvKiBmaWxlICovIGNhbi5iYXNlLlBhdGgobXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpKQoJCX0KCQljYW4udWkuY3VycmVudCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmN1cnJlbnQsICFtc2cuT3B0aW9uKGN0eC5JTkRFWCkpCgoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbihjYWNoZV9kYXRhKSB7CgkJCWNhbi5maWxlICYmIChjYWNoZV9kYXRhW2Nhbi5maWxlXSA9IHtjdXJyZW50OiBjYW4uY3VycmVudCwgbWF4OiBjYW4ubWF4LAoJCQkJcHJvZmlsZV9kaXNwbGF5OiBjYW4udWkucHJvZmlsZS5zdHlsZS5kaXNwbGF5LCBkaXNwbGF5X2Rpc3BsYXk6IGNhbi51aS5kaXNwbGF5LnN0eWxlLmRpc3BsYXksCgkJCX0pCgkJCWNhbi5maWxlID0gY2FuLmJhc2UuUGF0aChtc2cuT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpCgkJCWNhbi5wYXJzZSA9IGNhbi5iYXNlLkV4dChjYW4uZmlsZSksIGNhbi5TdGF0dXMoIuaooeW8jyIsICJwbHVnaW4iKQoKCQkJdmFyIHAgPSBjYWNoZV9kYXRhW2Nhbi5maWxlXTsgcCAmJiAoY2FuLmN1cnJlbnQgPSBwLmN1cnJlbnQsIGNhbi5tYXggPSBwLm1heCkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvZmlsZSwge2Rpc3BsYXk6IHA/IHAucHJvZmlsZV9kaXNwbGF5OiBodG1sLk5PTkV9KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB7ZGlzcGxheTogcD8gcC5kaXNwbGF5X2Rpc3BsYXk6IGh0bWwuTk9ORX0pCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkuX3RhYnMsIGh0bWwuRElWX1RBQlMsIG1zZy5fdGFiKQoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9hY3Rpb24sIGh0bWwuRElWX1RBQlMsIG1zZy5fdGFiKQoJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJCQltc2cuT3B0aW9uKGN0eC5JTkRFWCkgJiYgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuT1BUSU9OX0FSR1MpWzBdKQoJCQl9KQoKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLl9jb250ZW50LnBhcmVudE5vZGUsIGNhbi5wYWdlLktleXMoImRpdi5jb250ZW50IiwgaHRtbC5JRlJBTUUpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpZiAoY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIGl0ZW0gPT0gbXNnLl9jb250ZW50KSkgeyBjYW4udWkuY29udGVudCA9IG1zZy5fY29udGVudCB9CgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5fcHJvZmlsZV9vdXRwdXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cygiZGl2Lm91dHB1dCIpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpZiAoY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIGl0ZW0gPT0gbXNnLl9wcm9maWxlX291dHB1dCkpIHsgbXNnLl9wcm9maWxlX291dHB1dCB9CgkJCX0pCgkJCXJldHVybiBjYW4uZmlsZQoJCX0sIGNhbi51aS5fY29udGVudCwgY2FuLnVpLl9wcm9maWxlX291dHB1dCwgY2FuLnVpLmRpc3BsYXlfb3V0cHV0KSAmJiAhc2tpcCkgewoJCQlyZXR1cm4gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUobnVsbCwgY2FuLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQlpZiAobXNnLk9wdGlvbihjdHguSU5ERVgpKSB7CgkJCWlmIChtc2cuT3B0aW9uKG5mcy5MSU5FKSA9PSB3ZWIuRFJFQU0pIHsKCQkJCWlmIChtc2cuX2NvbnRlbnQpIHsgcmV0dXJuIH0KCQkJCWNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t0eXBlOiBodG1sLklGUkFNRSwgc3JjOiBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IG1zZy5PcHRpb24obmZzLkZJTEUpLCB0b3BpYzogY2FuLm1pc2MuU2VhcmNoKGNhbiwgInRvcGljIil9LCB0cnVlKSwgd2lkdGg6IGNhbi51aS5jb250ZW50Lm9mZnNldFdpZHRoLCBoZWlnaHQ6IGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodH1dLCBjYW4udWkuY29udGVudCkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJfQoKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnVpLl9jb250ZW50LCB0cnVlKQoJCQlyZXR1cm4gY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCB7aW5kZXg6IG1zZy5PcHRpb24oY3R4LklOREVYKX0sIGNhbi51aS5jb250ZW50LCBmdW5jdGlvbihzdWIpIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUKSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi51aS5jb250ZW50Lm9mZnNldFdpZHRoKSkKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBzdWIuRm9jdXMoKSB9KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgoJCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5iYWNrKHt9LCBjYW4pLCBtc2cuX3RhYi5fY2xvc2UoKSB9CgkJCQlzdWIub25pbXBvcnQuX29wZW4gPSBmdW5jdGlvbihzdWIsIG1zZywgX2FyZykgeyB2YXIgdXJsID0gY2FuLmJhc2UuUGFyc2VVUkwoX2FyZyksIGxzID0gdXJsLm9yaWdpbi5zcGxpdCgiL2NoYXQvcG9kLyIpCgkJCQkJaWYgKF9hcmcuaW5kZXhPZihsb2NhdGlvbi5vcmlnaW4pID09IDAgJiYgbHMubGVuZ3RoID4gMSkgewoJCQkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbHNbMV0uc3BsaXQoIi8iKVswXSwgd2ViLkRSRUFNKSwgc3ViLlVwZGF0ZSgpIC8vIOaYvuekuuepuumXtAoJCQkJCX0KCQkJCQlyZXR1cm4gY2FuLnVzZXIub3BlbihfYXJnKSwgc3ViLlVwZGF0ZSgpCgkJCQl9CgkJCX0pCgkJfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuY29udGVudCA9IG1zZy5fY29udGVudCA9IGNhbi51aS5fY29udGVudCwgdHJ1ZSkKCgkJZnVuY3Rpb24gaW5pdChwKSB7CgkJCWNhbi5tYXggPSAwLCBjYW4uY29yZS5MaXN0KGNhbi5scyA9IG1zZy5SZXN1bHQoKS5zcGxpdChpY2UuTkwpLCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbmFjdGlvbi5hcHBlbmRMaW5lKGNhbiwgaXRlbSkgfSkKCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUobnVsbCwgY2FuLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoKCQkJbXNnLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZigid2Vic2l0ZS8iKSA9PSAwICYmIGNhbi5vbmFjdGlvbltjbGkuU0hPV10oe30sIGNhbikKCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCBjYW4uX2ZpZWxkcywgY2hhdC5QTFVHSU4pKSB7CgkJCQlwICYmIHAucmVuZGVyICYmIGNhbi5vbmFjdGlvbltjbGkuU0hPV10oe30sIGNhbikKCQkJCXAgJiYgcC5lbmdpbmUgJiYgY2FuLm9uYWN0aW9uW2NsaS5FWEVDXSh7fSwgY2FuKQoJCQl9CgkJfQoJCWNhbi5Db25mKCJwbHVnIikgJiYgKGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdID0gY2FuLkNvbmYoInBsdWciKSkKCQl2YXIgcCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdOyAhcD8gY2FuLnJ1bkFjdGlvbih7fSwgbWRiLlBMVUdJTiwgW2Nhbi5wYXJzZSwgbXNnLk9wdGlvbihuZnMuRklMRSksIG1zZy5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWluaXQocCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSkpCgkJfSk6IGluaXQocCkKCX0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgbGluZSkgeyBpZiAobGluZS5pbmRleE9mKCI8aHRtbCIpID09IDApIHsgcmV0dXJuIGxpbmUgfQoJCWxpbmUgPSBjYW4ucGFnZS5yZXBsYWNlKGNhbiwgbGluZXx8IiIpCgoJCWZ1bmN0aW9uIHdyYXAodHlwZSwgc3RyKSB7IHJldHVybiB0eXBlPyAnPHNwYW4gY2xhc3M9IicrdHlwZSsnIj4nK3N0cisnPC9zcGFuPic6IHN0ciB9CgkJdmFyIHAgPSBjYW4ub25zeW50YXhbY2FuLnBhcnNlXTsgaWYgKCFwKSB7IHJldHVybiBsaW5lIH0gcCA9IGNhbi5vbnN5bnRheFtwLmxpbmtdfHxwLCBwLnNwbGl0ID0gcC5zcGxpdHx8e30KCQlwLmtleXdvcmQgJiYgKGxpbmUgPSBjYW4uY29yZS5MaXN0KGNhbi5jb3JlLlNwbGl0KGxpbmUsIHAuc3BsaXQuc3BhY2V8fCJcdCAiLCBwLnNwbGl0Lm9wZXJhdG9yfHwie1soLiw6OyF8PD4pXX0iLCB7ZGV0YWlsOiB0cnVlfSksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnJheSkgewoJCQlpdGVtID0gY2FuLmJhc2UuaXNPYmplY3QoaXRlbSk/IGl0ZW06IHt0ZXh0OiBpdGVtfTsgdmFyIHRleHQgPSBpdGVtLnRleHQsIHR5cGUgPSBpdGVtLmtleXdvcmR8fHAua2V5d29yZFt0ZXh0XQoKCQkJc3dpdGNoIChpdGVtLnR5cGUpIHsgY2FzZSBodG1sLlNQQUNFOiByZXR1cm4gdGV4dAoJCQkJY2FzZSBsYW5nLlNUUklORzogcmV0dXJuIHdyYXAobGFuZy5TVFJJTkcsIGl0ZW0ubGVmdCt0ZXh0K2l0ZW0ucmlnaHQpCgkJCQlkZWZhdWx0OiByZXR1cm4gd3JhcCh0eXBlLCB0ZXh0KQoJCQl9CgkJfSkuam9pbigiIikpCgoJCXAucHJlZml4ICYmIGNhbi5jb3JlLkl0ZW0ocC5wcmVmaXgsIGZ1bmN0aW9uKHByZSwgdHlwZSkgeyBpZiAoY2FuLmJhc2UuYmVnaW5XaXRoKGxpbmUsIHByZSkpIHsgbGluZSA9IHdyYXAodHlwZSwgbGluZSkgfSB9KQoJCXAuc3VmZml4ICYmIGNhbi5jb3JlLkl0ZW0ocC5zdWZmaXgsIGZ1bmN0aW9uKGVuZCwgdHlwZSkgeyBpZiAoY2FuLmJhc2UuZW5kV2l0aChsaW5lLCBlbmQpKSB7IGxpbmUgPSB3cmFwKHR5cGUsIGxpbmUpIH0gfSkKCQlyZXR1cm4gbGluZQoJfSwKCWdvOiB7CgkJa2V5d29yZDogewoJCQkicGFja2FnZSI6ICJrZXl3b3JkIiwKCQkJImltcG9ydCI6ICJrZXl3b3JkIiwKCQkJInR5cGUiOiAia2V5d29yZCIsCgkJCSJzdHJ1Y3QiOiAia2V5d29yZCIsCgkJCSJpbnRlcmZhY2UiOiAia2V5d29yZCIsCgkJCSJjb25zdCI6ICJrZXl3b3JkIiwKCQkJInZhciI6ICJrZXl3b3JkIiwKCQkJImZ1bmMiOiAia2V5d29yZCIsCgoJCQkiaWYiOiAia2V5d29yZCIsCgkJCSJlbHNlIjogImtleXdvcmQiLAoJCQkiZm9yIjogImtleXdvcmQiLAoJCQkicmFuZ2UiOiAia2V5d29yZCIsCgkJCSJicmVhayI6ICJrZXl3b3JkIiwKCQkJImNvbnRpbnVlIjogImtleXdvcmQiLAoJCQkic3dpdGNoIjogImtleXdvcmQiLAoJCQkiY2FzZSI6ICJrZXl3b3JkIiwKCQkJImRlZmF1bHQiOiAia2V5d29yZCIsCgkJCSJmYWxsdGhyb3VnaCI6ICJrZXl3b3JkIiwKCQkJImdvIjogImtleXdvcmQiLAoJCQkic2VsZWN0IjogImtleXdvcmQiLAoJCQkiZGVmZXIiOiAia2V5d29yZCIsCgkJCSJyZXR1cm4iOiAia2V5d29yZCIsCgoJCQkiZmFsc2UiOiAiY29uc3RhbnQiLAoJCQkidHJ1ZSI6ICJjb25zdGFudCIsCgkJCSJuaWwiOiAiY29uc3RhbnQiLAoJCQkiaW90YSI6ICJjb25zdGFudCIsCgkJCSItMSI6ICJjb25zdGFudCIsCgkJCSIwIjogImNvbnN0YW50IiwKCQkJIjEiOiAiY29uc3RhbnQiLAoJCQkiMiI6ICJjb25zdGFudCIsCgkJCSIzIjogImNvbnN0YW50IiwKCgkJCSJpbnQiOiAiZGF0YXR5cGUiLCAiaW50OCI6ICJkYXRhdHlwZSIsICJpbnQxNiI6ICJkYXRhdHlwZSIsICJpbnQzMiI6ICJkYXRhdHlwZSIsICJpbnQ2NCI6ICJkYXRhdHlwZSIsCgkJCSJ1aW50IjogImRhdGF0eXBlIiwgInVpbnQ4IjogImRhdGF0eXBlIiwgInVpbnQxNiI6ICJkYXRhdHlwZSIsICJ1aW50MzIiOiAiZGF0YXR5cGUiLCAidWludDY0IjogImRhdGF0eXBlIiwKCQkJImZsb2F0MzIiOiAiZGF0YXR5cGUiLCAiZmxvYXQ2NCI6ICJkYXRhdHlwZSIsICJjb21wbGV4NjQiOiAiZGF0YXR5cGUiLCAiY29tcGxleDEyOCI6ICJkYXRhdHlwZSIsCgkJCSJydW5lIjogImRhdGF0eXBlIiwgInN0cmluZyI6ICJkYXRhdHlwZSIsICJieXRlIjogImRhdGF0eXBlIiwgInVpbnRwdHIiOiAiZGF0YXR5cGUiLAoJCQkiYm9vbCI6ICJkYXRhdHlwZSIsICJlcnJvciI6ICJkYXRhdHlwZSIsICJjaGFuIjogImRhdGF0eXBlIiwgIm1hcCI6ICJkYXRhdHlwZSIsCgoJCQkibXNnIjogImZ1bmN0aW9uIiwgIm0iOiAiZnVuY3Rpb24iLAoJCQkiaW5pdCI6ICJmdW5jdGlvbiIsICJtYWluIjogImZ1bmN0aW9uIiwgInByaW50IjogImZ1bmN0aW9uIiwgInByaW50bG4iOiAiZnVuY3Rpb24iLCAicGFuaWMiOiAiZnVuY3Rpb24iLCAicmVjb3ZlciI6ICJmdW5jdGlvbiIsCgkJCSJuZXciOiAiZnVuY3Rpb24iLCAibWFrZSI6ICJmdW5jdGlvbiIsICJsZW4iOiAiZnVuY3Rpb24iLCAiY2FwIjogImZ1bmN0aW9uIiwgImNvcHkiOiAiZnVuY3Rpb24iLCAiYXBwZW5kIjogImZ1bmN0aW9uIiwgImRlbGV0ZSI6ICJmdW5jdGlvbiIsICJjbG9zZSI6ICJmdW5jdGlvbiIsCgkJCSJjb21wbGV4IjogImZ1bmN0aW9uIiwgInJlYWwiOiAiZnVuY3Rpb24iLCAiaW1hZyI6ICJmdW5jdGlvbiIsCgkJfSwKCX0sCgl6bWw6IHsKCQlwcmVmaXg6IHsKCQkJIiMgIjogImNvbW1lbnQiLAoJCX0sCgkJa2V5d29yZDogewoJCQkicmV0dXJuIjogImtleXdvcmQiLAoKCQkJImhlYWQiOiAia2V5d29yZCIsCgkJCSJsZWZ0IjogImtleXdvcmQiLAoJCQkibWFpbiI6ICJrZXl3b3JkIiwKCQkJImZvb3QiOiAia2V5d29yZCIsCgkJCSJ0YWJzIjogImtleXdvcmQiLAoKCQkJImluZGV4IjogImZ1bmN0aW9uIiwKCQkJImFjdGlvbiI6ICJmdW5jdGlvbiIsCgkJCSJhcmdzIjogImZ1bmN0aW9uIiwKCQkJInR5cGUiOiAiZnVuY3Rpb24iLAoJCQkic3R5bGUiOiAiZnVuY3Rpb24iLAoJCQkid2lkdGgiOiAiZnVuY3Rpb24iLAoKCQkJImF1dG8iOiAiY29uc3RhbnQiLAoJCQkidXNlcm5hbWUiOiAiY29uc3RhbnQiLAoJCX0sCgl9LAoJY3NzOiB7CgkJa2V5d29yZDogewoJCQkiYm9keSI6ICJrZXl3b3JkIiwKCQkJImRpdiI6ICJrZXl3b3JkIiwKCQkJInNwYW4iOiAia2V5d29yZCIsCgkJCSJmb3JtIjogImtleXdvcmQiLAoJCQkiZmllbGRzZXQiOiAia2V5d29yZCIsCgkJCSJsZWdlbmQiOiAia2V5d29yZCIsCgkJCSJzZWxlY3QiOiAia2V5d29yZCIsCgkJCSJ0ZXh0YXJlYSI6ICJrZXl3b3JkIiwKCQkJImlucHV0IjogImtleXdvcmQiLAoJCQkidGFibGUiOiAia2V5d29yZCIsCgkJCSJ0ciI6ICJrZXl3b3JkIiwKCQkJInRoIjogImtleXdvcmQiLAoJCQkidGQiOiAia2V5d29yZCIsCgoJCQkiYmFja2dyb3VuZC1jb2xvciI6ICJmdW5jdGlvbiIsCgkJCSJmb250LWZhbWlseSI6ICJmdW5jdGlvbiIsCgkJCSJmb250LXdlaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJmb250LXNpemUiOiAiZnVuY3Rpb24iLAoJCQkiY29sb3IiOiAiZnVuY3Rpb24iLAoJCQkid2lkdGgiOiAiZnVuY3Rpb24iLAoJCQkiaGVpZ2h0IjogImZ1bmN0aW9uIiwKCQkJInBhZGRpbmciOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbiI6ICJmdW5jdGlvbiIsCgkJCSJwb3NpdGlvbiI6ICJmdW5jdGlvbiIsCgkJCSJsZWZ0IjogImZ1bmN0aW9uIiwKCQkJInRvcCI6ICJmdW5jdGlvbiIsCgkJCSJyaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiZGlzcGxheSI6ICJmdW5jdGlvbiIsCgkJCSJvdmVyZmxvdyI6ICJmdW5jdGlvbiIsCgkJCSJmbG9hdCI6ICJmdW5jdGlvbiIsCgkJCSJjbGVhciI6ICJmdW5jdGlvbiIsCgkJCSJjdXJzb3IiOiAiZnVuY3Rpb24iLAoKCQkJInotaW5kZXgiOiAiZnVuY3Rpb24iLAoJCQkidGFiLXNpemUiOiAiZnVuY3Rpb24iLAoJCQkid29yZC1icmVhayI6ICJmdW5jdGlvbiIsCgkJCSJ3aGl0ZS1zcGFjZSI6ICJmdW5jdGlvbiIsCgkJCSJ0ZXh0LWFsaWduIjogImZ1bmN0aW9uIiwKCQkJInZlcnRpY2FsLWFsaWduIjogImZ1bmN0aW9uIiwKCQkJIm1pbi13aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJtYXgtd2lkdGgiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZy1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJInBhZGRpbmctdG9wIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci10b3AiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1ib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXJhZGl1cyI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItc3BhY2luZyI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tbGVmdCI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tdG9wIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1yaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tYm90dG9tIjogImZ1bmN0aW9uIiwKCQkJImJveC1zaGFkb3ciOiAiZnVuY3Rpb24iLAoKCQkJIjAiOiAiY29uc3RhbnQiLAoJCQkiMTBweCI6ICJjb25zdGFudCIsCgkJCSIyMHB4IjogImNvbnN0YW50IiwKCQkJImN5YW4iOiAiY29uc3RhbnQiLAoJCQkiZ3JheSI6ICJjb25zdGFudCIsCgkJCSJ5ZWxsb3ciOiAiY29uc3RhbnQiLAoJCQkiYmxhY2siOiAiY29uc3RhbnQiLAoJCQkid2hpdGUiOiAiY29uc3RhbnQiLAoJCQkiYmx1ZSI6ICJjb25zdGFudCIsCgkJCSJyZWQiOiAiY29uc3RhbnQiLAoJCQkiZ3JlZW4iOiAiY29uc3RhbnQiLAoJCQkibWFnZW50YSI6ICJjb25zdGFudCIsCgoJCQkibW9ub3NwYWNlIjogImNvbnN0YW50IiwKCQkJImJvbGQiOiAiY29uc3RhbnQiLAoJCQkic29saWQiOiAiY29uc3RhbnQiLAoJCQkibm9uZSI6ICJjb25zdGFudCIsCgkJCSJibG9jayI6ICJjb25zdGFudCIsCgkJCSJjb250ZXh0cyI6ICJjb25zdGFudCIsCgkJCSJib3RoIjogImNvbnN0YW50IiwKCQkJImF1dG8iOiAiY29uc3RhbnQiLAoKCQkJImNlbnRlciI6ICJjb25zdGFudCIsCgkJCSJyZWxhdGl2ZSI6ICJjb25zdGFudCIsCgkJCSJhYnNvbHV0ZSI6ICJjb25zdGFudCIsCgkJCSJzdGlja3kiOiAiY29uc3RhbnQiLAoJCQkiZml4ZWQiOiAiY29uc3RhbnQiLAoJCX0sCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIuWvvOWFpeaVsOaNriIsCglfbW9kZTogewoJCXBsdWdpbjogewoJCQlFc2NhcGU6IHNoeSgi5YiH5o2i5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY2xlYXIoZXZlbnQsIGNhbikgfSksCgkJCWc6IHNoeSgi5pCc57SiIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaQnOe0oiJdKGV2ZW50LCBjYW4pIH0pLAoJCQlmOiBzaHkoIuaJk+W8gOaWh+S7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmiZPlvIAiXShldmVudCwgY2FuKSB9KSwKCQkJcjogc2h5KCLmiafooYzlkb3ku6QiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikgfSksCgkJCXY6IHNoeSgi5riy5p+T55WM6Z2iIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pIH0pLAoJCQl4OiBzaHkoIuWFs+mXreagh+etviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLl90YWIuX2Nsb3NlKCkgfSksCgoJCQloOiBzaHkoIuaJk+W8gOW3pui+ueagh+etviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG5leHQgPSBjYW4uX3RhYi5wcmV2aW91c1NpYmxpbmc7IG5leHQgJiYgbmV4dC5jbGljaygpIH0pLAoJCQlsOiBzaHkoIuaJk+W8gOWPs+i+ueagh+etviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG5leHQgPSBjYW4uX3RhYi5uZXh0U2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkgfSksCgkJCWo6IHNoeSgi5ZCR5LiL5rua5YqoIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJaWYgKGNhbi51aS5jb250ZW50ICE9IGNhbi51aS5fY29udGVudCkgewoJCQkJCWNhbi51aS5jb250ZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKz0gMTYKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLmN1cnJlbnQuc2Nyb2xsKDEpCgkJCQl9CgkJCX0pLAoJCQlrOiBzaHkoIuWQkeS4iua7muWKqCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCWlmIChjYW4udWkuY29udGVudCAhPSBjYW4udWkuX2NvbnRlbnQpIHsKCQkJCQljYW4udWkuY29udGVudC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIC09IDE2CgkJCQl9IGVsc2UgewoJCQkJCWNhbi5jdXJyZW50LnNjcm9sbCgtMSkKCQkJCX0KCQkJfSksCgkJCUo6IHNoeSgi5ZCR5LiL5rua5bGPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQud2luZG93KCktMykgfSksCgkJCUs6IHNoeSgi5ZCR5LiK5rua5bGPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uY3VycmVudC5zY3JvbGwoLWNhbi5jdXJyZW50LndpbmRvdygpKzMpIH0pLAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBsaXN0OiBbIuaQnOe0oiIsICLmiZPlvIAiXSwKCV90cmFuczoge3NvdXJjZTogIua6kOeggSIsIG1vZHVsZTogIuaooeWdlyIsIGRyZWFtczogIuepuumXtCIsIGxvYWQ6ICLliqDovb0iLCBsaW5rOiAi6ZO+5o6lIiwgd2lkdGg6ICLlrr3luqYiLCBoZWlnaHQ6ICLpq5jluqYiLCB3ZWJzaXRlOiAi572R6aG1In0sCgki5pCc57SiIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRSwgW2N0eC5BQ1RJT04sIG5mcy5UQUdTLCBuZnMuR1JFUCwgY2xpLk1BS0VdXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4udWkuc2VhcmNoLlVwZGF0ZSh7fSwgW2N0eC5BQ1RJT04sIGRhdGEuYWN0aW9uLCBkYXRhLm5hbWVdKQoJCX0pCgl9LAoJIuaJk+W8gCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbmZzLkZJTEVdLCBmdW5jdGlvbihsaXN0KSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGxpc3RbMF0pIH0pCgl9LAoJc2VzczogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25leHBvcnQuc2VzcyhjYW4pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKSB9LAoJbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBmaWxlID0gY2FuLmJhc2UuUGF0aCgiL3JlcXVpcmUvIiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCWRlbGV0ZShWb2xjYW5vcy5tZXRhLmNhY2hlW2ZpbGVdKSwgZXZhbCgiXG5fY2FuX25hbWUgPSBcIiIrZmlsZSsiXCJcbiIrY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSsiXG5fY2FuX25hbWUgPSBcIlwiXG5jb25zb2xlLmxvZyhcIm9uY2VcIikiKQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5SRU5ERVIsIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQucHJvZmlsZShjYW4sIG1zZykKCQl9KQoJfSwKCXNob3c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmuLLmn5PkuK0uLi4ifSkKCQlpZiAoY2FuLmJhc2UuZW5kV2l0aChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgIi5qcyIpKSB7CgkJCXZhciBmaWxlID0gY2FuLmJhc2UuUGF0aCgiL3JlcXVpcmUvIiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCQlkZWxldGUoVm9sY2Fub3MubWV0YS5jYWNoZVtmaWxlXSksIGV2YWwoIlxuX2Nhbl9uYW1lID0gXCIiK2ZpbGUrIlwiXG4iK2Nhbi5vbmV4cG9ydC5jb250ZW50KGNhbikrIlxuX2Nhbl9uYW1lID0gXCJcIlxuY29uc29sZS5sb2coXCJvbmNlXCIpIikKCQl9CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLlJFTkRFUiwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9maWxlKGNhbiwgbXNnKQoJCX0pCgl9LAoJZXhlYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwge190b2FzdDogIuaJp+ihjOS4rS4uLiIsICJzb21lIjogInJ1biJ9KQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5FTkdJTkUsIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuZGlzcGxheShjYW4sIG1zZykKCQl9KQoJfSwKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCAiLmlucHV0LmZsb2F0IiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkgfSkubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3N0YXR1cywgImxlZ2VuZC5zZWxlY3QiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmNsaWNrKCksIGl0ZW0gfSkubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoKCQlpZiAoY2FuLnVpLmRpc3BsYXkuc3R5bGUuZGlzcGxheSA9PSAiIikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5kaXNwbGF5KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0KCQlpZiAoY2FuLnVpLnByb2ZpbGUuc3R5bGUuZGlzcGxheSA9PSAiIikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9maWxlKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCX0sCgliYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5oaXN0b3J5LnBvcCgpOyB2YXIgbGFzdCA9IGNhbi5oaXN0b3J5LnBvcCgpCgkJbGFzdCAmJiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGxhc3QucGF0aCwgbGFzdC5maWxlLCBsYXN0LmxpbmUpCgkJY2FuLlN0YXR1cygi6Lez6L2s5pWwIiwgY2FuLmhpc3RvcnkubGVuZ3RoKQoJfSwKCglzY3JvbGxMaW5lOiBmdW5jdGlvbihjYW4sIGNvdW50KSB7IHZhciBzaXplID0gMjA7IGNhbi5jdXJyZW50LnNjcm9sbChjb3VudCpzaXplKSB9LAoJYXBwZW5kTGluZTogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJe3ZpZXc6IFsibGluZSB1bnNlbGVjdGFibGUiLCBodG1sLlRELCArK2Nhbi5tYXhdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgdWkudHIpCgkJCX0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24uZmF2b3JMaW5lKGNhbiwgdWkudGV4dC5pbm5lclRleHQpCgkJCX19LAoKCQkJe3ZpZXc6IFtodG1sLlRFWFQsIGh0bWwuVERdLCBpbm5lcjogY2FuLm9uc3ludGF4Ll9wYXJzZShjYW4sIHZhbHVlKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIHVpLnRyKQoKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciBzID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSwgc3RyID0gdWkudGV4dC5pbm5lclRleHQKCQkJCXZhciBiZWdpbiA9IHN0ci5pbmRleE9mKHMpLCBlbmQgPSBiZWdpbitzLmxlbmd0aAoKCQkJCWZvciAodmFyIGkgPSBiZWdpbjsgaSA+PSAwOyBpLS0pIHsKCQkJCQlpZiAoc3RyW2ldLm1hdGNoKC9bYS16QS1aMC05Xy5dLykpIHsgcyA9IHN0ci5zbGljZShpLCBlbmQpIH0gZWxzZSB7IGJyZWFrIH0KCQkJCX0KCgkJCQlpZiAocy5pbmRleE9mKCJraXQuIikgPT0gMCkgeyBzID0gcy5yZXBsYWNlKCJraXQuIiwgInRvb2xraXRzLiIpIH0KCQkJCWlmIChzLmluZGV4T2YoaWNlLlBUKSA9PSAwKSB7IHMgPSBzLnNsaWNlKDEpIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWFyY2hMaW5lKGV2ZW50LCBjYW4sIHMpCgkJCX19CgkJXX1dKTsgcmV0dXJuIHVpLnRyCgl9LAoJX2dldExpbmU6IGZ1bmN0aW9uKGNhbiwgbGluZSkgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSB7IHJldHVybiBpdGVtIH0gfSlbMF0KCX0sCglfZ2V0TGluZW5vOiBmdW5jdGlvbihjYW4sIGxpbmUpIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnJheSkgeyBpZiAoaXRlbSA9PSBsaW5lIHx8IGluZGV4KzEgPT0gbGluZSkgeyByZXR1cm4gaW5kZXgrMSB9IH0pWzBdCgl9LAoJc2VsZWN0TGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbGluZSkgeyBpZiAoIWxpbmUpIHsgcmV0dXJuIHBhcnNlSW50KGNhbi5jb3JlLlZhbHVlKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBbW1todG1sLlRSLCBodG1sLlNFTEVDVF0sIFtodG1sLlRELCAibGluZSJdXV0pWzBdLCAiaW5uZXJUZXh0IikpIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChsaW5lIDwgMCB8fCBsaW5lID4gYXJyYXkubGVuZ3RoKSB7IHJldHVybiB9CgkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNULCBpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSkgeyByZXR1cm4gfQoJCQl2YXIgbHMgPSBjYW4uZmlsZS5zcGxpdChpY2UuUFMpCgkJCWlmIChscy5sZW5ndGggPiA0KSB7IGxzID0gW2xzLnNsaWNlKDAsIDIpLmpvaW4oaWNlLlBTKSsiLy4uLi8iK2xzLnNsaWNlKC0yKS5qb2luKGljZS5QUyldIH0KCQkJbGluZSA9IGl0ZW0sIGNhbi5TdGF0dXMoa2l0LkRpY3QoIuaWh+S7tuWQjSIsIGxzLmpvaW4oaWNlLlBTKSwgIuino+aekOWZqCIsIGNhbi5wYXJzZSwgIuW9k+WJjeihjCIsIGNhbi5vbmV4cG9ydC5wb3NpdGlvbihjYW4sIGNhbi5PcHRpb24obmZzLkxJTkUsIGluZGV4KzEpKSkpCgkJfSkKCgkJY2FuLmJhc2UuaXNPYmplY3QobGluZSkgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgbGluZSwgInRkLnRleHQiLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5jdXJyZW50ID0gewoJCQkJd2luZG93OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBhcnNlSW50KGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodC9jYW4uY3VycmVudC5saW5lLm9mZnNldEhlaWdodCkgfSwKCQkJCXNjcm9sbDogZnVuY3Rpb24oY291bnQpIHsgaWYgKGNvdW50KSB7IGNhbi51aS5jb250ZW50LnNjcm9sbFRvcCArPSBjb3VudCpjYW4uY3VycmVudC5saW5lLm9mZnNldEhlaWdodCB9CgkJCQkJcmV0dXJuIHBhcnNlSW50KChjYW4uY3VycmVudC5saW5lLm9mZnNldFRvcC1jYW4udWkuY29udGVudC5zY3JvbGxUb3ApL2Nhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0KQoJCQkJfSwKCgkJCQlwcmV2OiBmdW5jdGlvbigpIHsgcmV0dXJuIGxpbmUucHJldmlvdXNTaWJsaW5nIH0sCgkJCQluZXh0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGxpbmUubmV4dFNpYmxpbmcgfSwKCQkJCWxpbmU6IGxpbmUsIHRleHQ6IGZ1bmN0aW9uKHRleHQpIHsKCQkJCQlyZXR1cm4gdGV4dCAhPSB1bmRlZmluZWQgJiYgY2FuLm9uYWN0aW9uLm1vZGlmeUxpbmUoY2FuLCBsaW5lLCB0ZXh0KSwgaXRlbS5pbm5lclRleHQKCQkJCX0sCgkJCX0KCgkJCWlmICghZXZlbnQpIHsKCQkJCXZhciBzY3JvbGwgPSBjYW4uY3VycmVudC5zY3JvbGwoKTsgaWYgKHNjcm9sbCA8IDUpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC01KSB9IGVsc2UgewoJCQkJCXZhciB3aW5kb3cgPSBjYW4uY3VycmVudC53aW5kb3coKTsgaWYgKHNjcm9sbCA+IHdpbmRvdy8yKSB7IGNhbi5jdXJyZW50LnNjcm9sbChzY3JvbGwtd2luZG93LzIpIH0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXZhciBzY3JvbGwgPSBjYW4uY3VycmVudC5zY3JvbGwoKTsgaWYgKHNjcm9sbCA8IDMpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC0zKSB9IGVsc2UgewoJCQkJCXZhciB3aW5kb3cgPSBjYW4uY3VycmVudC53aW5kb3coKTsgaWYgKHNjcm9sbCA+IHdpbmRvdy00KSB7IGNhbi5jdXJyZW50LnNjcm9sbChzY3JvbGwtd2luZG93KzQpIH0KCQkJCX0KCQkJfQoKCQkJdmFyIHB1c2ggPSBjYW4ub25pbXBvcnQuaGlzdG9yeShjYW4sIHtwYXRoOiBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgZmlsZTogY2FuLk9wdGlvbihuZnMuRklMRSksIGxpbmU6IGNhbi5PcHRpb24obmZzLkxJTkUpLCB0ZXh0OiBjYW4uY3VycmVudC50ZXh0KCl9KQoJCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7IGxvY2F0aW9uLmhhc2ggPSBwdXNoLmZpbGUraWNlLkZTKyhwdXNoLmxpbmV8fDEpIH0KCQkJY2FuLm9uYWN0aW9uLl9zZWxlY3RMaW5lKGV2ZW50LCBjYW4pCgkJfSkKCX0sCglfc2VsZWN0TGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB9LAoJc2VhcmNoTGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUpIHsgaWYgKCFjYW4udWkuc2VhcmNoKSB7IHJldHVybiB9CgkJY2FuLnVpLnNlYXJjaC5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBuZnMuVEFHUywgdmFsdWUudHJpbSgpXSkKCX0sCglmYXZvckxpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbIuaWh+S7tuaVsCIsICLop6PmnpDlmagiLCAi5paH5Lu25ZCNIiwgIuW9k+WJjeihjCIsICLot7PovazmlbAiLCAi5qCH562+5pWwIl0sCglzZXNzOiBmdW5jdGlvbihjYW4pIHsgY2FuLnVzZXIubG9jYWxTdG9yYWdlKGNhbiwgIndlYi5jb2RlLmlubmVyLnNlc3MiLCB7InBsdWciOiBjYW4ub25leHBvcnQucGx1ZyhjYW4pLCAiZXh0cyI6IGNhbi5vbmV4cG9ydC5leHRzKGNhbiksICJ0YWJzIjogY2FuLm9uZXhwb3J0LnRhYnMoY2FuKX0pIH0sCglrZXlzOiBmdW5jdGlvbihjYW4sIGZpbGUsIHBhdGgpIHsgcmV0dXJuIChwYXRofHxjYW4uT3B0aW9uKG5mcy5QQVRIKSkraWNlLkRGKyhmaWxlfHxjYW4uT3B0aW9uKG5mcy5GSUxFKSkgfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShjYW4udGFidmlldywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgcmV0dXJuIGtleStpY2UuREYrbXNnLk9wdGlvbihuZnMuTElORSkgfSkgfSwKCXBsdWc6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShjYW4udG9vbGtpdCkgfSwKCWV4dHM6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShjYW4ucGx1Z2lucykgfSwKCXBvc2l0aW9uOiBmdW5jdGlvbihjYW4sIGluZGV4LCB0b3RhbCkgeyB0b3RhbCA9IHRvdGFsfHxjYW4ubWF4OyByZXR1cm4gKHBhcnNlSW50KGluZGV4KSkraWNlLlBTK3BhcnNlSW50KHRvdGFsKSsiID0gIitwYXJzZUludCgoaW5kZXgpKjEwMC90b3RhbCkrIiUiIH0sCgljb250ZW50OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uaW5uZXJUZXh0IH0pLmpvaW4oaWNlLk5MKSB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9mYXZvci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgewoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS5mYXZvciJ9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJY29kZS5JTk5FUiwgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSkKCQkJCX0sCgkJCSkpKSB7IHJldHVybiB9CgoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCXN1Yi5vbm1vdGlvbi5jbGVhcihzdWIpLCBzdWIub25hcHBlbmQudGFibGUoc3ViLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCQl9CgkJCQkJaWYgKGtleSAhPSBjdHguQUNUSU9OKSB7IHZhbHVlID0gc3ViLnBhZ2UucmVwbGFjZShzdWIsIHZhbHVlLCBpY2UuUFdELCAiIikgfQoKCQkJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW3ZhbHVlLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJCQlpZiAoW21kYi5aT05FLCBtZGIuSURdLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiBzdWIub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBzdWIsIGtleSwgdmFsdWUpIH0KCgkJCQkJCWlmICh0YXJnZXQudGFnTmFtZSA9PSAiSU5QVVQiICYmIHRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwgbGluZSwgc3ViLk9wdGlvbigpKQoJCQkJCQkJcmV0dXJuIHN1Yi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IHN1Yi5ydW4oKSB9KQoJCQkJCQl9CgoJCQkJCQlsaW5lLmxpbmUgJiYgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsaW5lLnBhdGgsIGxpbmUuZmlsZS5yZXBsYWNlKGljZS5QV0QsICIiKSwgcGFyc2VJbnQobGluZS5saW5lKSkKCQkJCQl9fQoJCQkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJCQl9KQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL2lubmVyLmpzIgoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9zZWFyY2guanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsgdmFyIGhpc3RvcnkgPSBbXTsgY29uc3QgU0VBUkNIID0gImNhbi5jb2RlLmlubmVyLnNlYXJjaCIKCWZ1bmN0aW9uIHNob3cobXNnLCB3b3JkKSB7IGlmICghbXNnKSB7IHJldHVybiB9IGhpc3RvcnkucHVzaChtc2cpOyB2YXIgc3ViID0gbXNnLl9jYW47IHN1Yi5PcHRpb24oIndvcmQiLCB3b3JkfHxtc2cuX3dvcmQpCgkJIXN1Yi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX2xlZ2VuZCwgInNlbGVjdCIpICYmIGNhbi51aS5zZWFyY2guc2VsZWN0KCkKCQlzdWIub25tb3Rpb24uY2xlYXIoc3ViKSwgc3ViLm9uYXBwZW5kLnRhYmxlKHN1YiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW2Nhbi5wYWdlLnJlcGxhY2UoY2FuLCB2YWx1ZSwgaWNlLlBXRCwgIiIpLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWxpbmUubGluZSAmJiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsaW5lLmZpbGUucmVwbGFjZShpY2UuUFdELCAiIiksIHBhcnNlSW50KGxpbmUubGluZSkpCgkJCX19CgkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuYm9hcmQoc3ViLCBtc2cuUmVzdWx0KCkpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJfQoJY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIFNFQVJDSCwgc2h5KCLmkJzntKIiLCB7fSwgWwoJCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ3b3JkIiwgdmFsdWU6IGNsaS5NQUlOLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdFRhYmxlKGV2ZW50LCBjYW4uc3VwLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKHRyKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIGluZGV4KSB7IGluZGV4ID09IDAgJiYgdGQuY2xpY2soKSB9KQoJCQkJdHIuc2Nyb2xsSW50b1ZpZXcoKSwgY2FuLl9vdXRwdXQuc2Nyb2xsVG9wIC09IDYwCgkJCX0pCgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4uc3VwLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIGV2ZW50LmN0cmxLZXk/IG5mcy5HUkVQOiBuZnMuVEFHUywgY2FuLnN1cC5PcHRpb24oIndvcmQiKV0pIH0KCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyBldmVudC50YXJnZXQuYmx1cigpIH0KCQl9fSwKCQl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiZmlsdGVyIiwgdmFsdWU6ICIiLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIGNhbi5zdXAsIG51bGwsIGV2ZW50LnRhcmdldCkKCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgZXZlbnQuY3RybEtleT8gbmZzLkdSRVA6IG5mcy5UQUdTLCBjYW4uc3VwLk9wdGlvbigid29yZCIpXSkgfQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IGV2ZW50LnRhcmdldC5ibHVyKCkgfQoJCX19LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogbmZzLlRBR1N9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogbmZzLkdSRVB9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogY2xpLk1BS0V9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImhpc3RvcnkifSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJsYXN0IiwgX3RyYW5zOiAi6L+U5ZueIn0sCgldLCBmdW5jdGlvbihtc2csIGNtZHMsIGNiKSB7IGlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkiaGlzdG9yeSIsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJY2FuLmNvcmUuTGlzdChjYW4uaGlzdG9yeSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJbXNnLlB1c2gobmZzLkZJTEUsIGl0ZW0uZmlsZSkKCQkJCW1zZy5QdXNoKG5mcy5MSU5FLCBpdGVtLmxpbmUpCgkJCQltc2cuUHVzaChtZGIuVEVYVCwgaXRlbS50ZXh0KQoJCQl9KQoJCQlzaG93KG1zZykKCQl9LAoJCW5mcy5UQUdTLCBmdW5jdGlvbihjbWRzKSB7IG1zZy5PcHRpb24oa2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFLCBpY2UuTVNHX0ZJRUxEUywgImZpbGUsbGluZSx0ZXh0IikpCgkJCWNhbi5ydW5BY3Rpb24obXNnLCBtZGIuU0VBUkNILCBbY2FuLnBhcnNlLCBjbWRzWzBdLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgc3ViID0gbXNnLl9jYW4KCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS80KSwgc2hvdyhtc2csIG1zZy5fd29yZCA9IGNtZHNbMF0pCgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKSB8fCBzdWIuX2xlZ2VuZC5jbGljaygpCgkJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBtc2cuX2Nhbi5faW5wdXRzWyJ3b3JkIl0uX3RhcmdldCkKCQkJfSkKCQl9LAoJCW5mcy5HUkVQLCBmdW5jdGlvbihjbWRzKSB7IG1zZy5PcHRpb24oa2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFLCBpY2UuTVNHX0ZJRUxEUywgImZpbGUsbGluZSx0ZXh0IiwgbmZzLlBBVEgsIGNhbi5PcHRpb24obmZzLlBBVEgpKSkKCQkJY2FuLnJ1bkFjdGlvbihtc2csIG5mcy5HUkVQLCBbY21kc1swXV0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgc3ViID0gbXNnLl9jYW4KCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS80KSwgc2hvdyhtc2csIG1zZy5fd29yZCA9IGNtZHNbMF0pCgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKSB8fCBzdWIuX2xlZ2VuZC5jbGljaygpCgkJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBtc2cuX2Nhbi5faW5wdXRzWyJ3b3JkIl0uX3RhcmdldCkKCQkJfSkKCQl9LAoJCSJsYXN0IiwgZnVuY3Rpb24oY21kcykgeyBoaXN0b3J5LnBvcCgpLCBzaG93KGhpc3RvcnkucG9wKCkpIH0sCgkpKSkgeyByZXR1cm4gfSBjYW4ucnVuKG1zZywgY21kcywgZnVuY3Rpb24obXNnKSB7IHNob3cobXNnKSB9LCB0cnVlKSB9KSkKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBTRUFSQ0h9LCBmdW5jdGlvbihzdWIpIHsKCQljYW4udWkuc2VhcmNoID0gc3ViLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQljYW4udWkuc2VhcmNoLl9zaG93ID0gc2hvdwoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL3Nlc3MuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsgdmFyIFNFU1MgPSAid2ViLmNvZGUuc2VzcyIKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBTRVNTfSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCWlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJCW5mcy5TQVZFLCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIFNFU1MsIFtjdHguQUNUSU9OLCBtZGIuQ1JFQVRFLAoJCQkJCQkidG9vbCIsIEpTT04uc3RyaW5naWZ5KGNhbi5vbmV4cG9ydC50b29sKGNhbikpLAoJCQkJCQkidGFicyIsIEpTT04uc3RyaW5naWZ5KGNhbi5vbmV4cG9ydC50YWJzKGNhbikpLAoJCQkJCV0sIGNiKQoJCQkJfSwKCQkJCW5mcy5MT0FELCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnNlc3MoY2FuLCB7CgkJCQkJCXRvb2w6IEpTT04ucGFyc2UobXNnLk9wdGlvbigidG9vbCIpKSwKCQkJCQkJdGFiczogSlNPTi5wYXJzZShtc2cuT3B0aW9uKCJ0YWJzIikpLAoJCQkJCX0pCgkJCQl9LAoJCQkpKSkgeyByZXR1cm4gfQoJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgU0VTUywgY21kcywgY2IpCgkJfSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgl9KQp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvdGVtcGxhdGUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiAid2ViLmNvZGUudGVtcGxhdGUifSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJbmZzLkRFRlMsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvbigiYXJncyIpfHwiW10iKSwgZnVuY3Rpb24oZGF0YSkgewoJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBjYW4uY29yZS5JdGVtKGRhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgbXNnLk9wdGlvbihrZXksIHZhbHVlKSB9KQoJCQkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgIndlYi5jb2RlLnRlbXBsYXRlIiwgW25mcy5ERUZTXS5jb25jYXQoY21kcyksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJCQkJCQljYW4ub25pbXBvcnQucHJvamVjdChjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpKQoJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbigibWFpbiIpLCAiIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY21kc1sxXSwgMSwgZnVuY3Rpb24oKSB7fSkKCQkJCQkJCX0sIHRydWUpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCQkJKSkpIHsgcmV0dXJuIH0KCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsICJ3ZWIuY29kZS50ZW1wbGF0ZSIsIGNtZHMsIGNiKQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL3NuaXBwZXQuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbikKCQlpZiAobXNnLk9wdGlvbigiY29udGVudCIpKSB7CgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS52aW1lciIsIHN0eWxlOiAiZnVsbCJ9LCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCWlmIChjbWRzWzFdID09ICJwbHVnaW4iKSB7CgkJCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsICJ2aW1lciIsIGNtZHMsIGNiKQoJCQkJCQlyZXR1cm4KCQkJCQl9CgkJCQkJaWYgKGNtZHNbMV0gPT0gIm1haW4uZ28iKSB7IHJlcy5FY2hvKG1zZy5PcHRpb24oImNvbnRlbnQiKSkKCQkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5zdWIgJiYgY2FuLnN1Yi5vbmFjdGlvblsi6aG555uuIl0oe30sIGNhbi5zdWIpIH0pCgkJCQkJfQoJCQkJCWNiKHJlcyksIGNhbi5zdWIgPSBjYW4uY29yZS5WYWx1ZShzdWIsICJfb3V0cHV0cy4tMSIpCgkJCQl9CgkJCX0sIGNhbi5fb3V0cHV0KQoJCQlyZXR1cm4KCQl9CgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2cpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBbImdvIiwgImhpLmdvIiwgY2FuLnN1Yi5vbmV4cG9ydC5jb250ZW50KGNhbi5zdWIpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJpbm5lci5qcyJdLCBmdW5jdGlvbihjYW4pIHsgY2FuLm9uaW1wb3J0LmlubmVyX2luaXQoY2FuLCBtc2csIGZ1bmN0aW9uKCkgeyBjYW4udW5kbyA9IFtdLCBjYW4ucmVkbyA9IFtdCgkJCWNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKSwgY2FuLm9ua2V5bWFwLl9wbHVnaW4oe30sIGNhbikKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfSwgdGFyZ2V0KSB9ICwgZnVuY3Rpb24oY2FuLCBuYW1lLCBzdWIpIHsgbmFtZSA9PSBjaGF0Lk9OSU1QT1JUICYmIChjYW4ub25pbXBvcnQuaW5uZXJfaW5pdCA9IHN1Yi5faW5pdCkKCQkJaWYgKG5hbWUgPT0gY2hhdC5PTkFDVElPTikgeyBjYW4uX3RyYW5zID0gY2FuLmJhc2UuQ29weShjYW4uX3RyYW5zfHx7fSwgc3ViLl90cmFucykgfQoJCQlpZiAobmFtZSA9PSBjaGF0Lk9OS0VZTUFQKSB7IGNhbi5jb3JlLkl0ZW0oc3ViLl9tb2RlLCBmdW5jdGlvbihtb2RlLCB2YWx1ZSkgewoJCQkJdmFyIGxpc3QgPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV0gPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV18fHt9CgkJCQljYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IGxpc3Rba2V5XSA9IGxpc3Rba2V5XXx8Y2IgfSkKCQkJfSkgfQoJCX0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudC5wYXJlbnROb2RlLCBbCgkJCXt2aWV3OiBbImN1cnJlbnQiLCBodG1sLklOUFVUXSwgc3BlbGxjaGVjazogZmFsc2UsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGV2ZW50Lm1ldGFLZXkpIHsgcmV0dXJuIH0KCQkJCWlmIChldmVudC5jdHJsS2V5ICYmIGNhbi5vbmFjdGlvbi5fY29tcGxldGUoZXZlbnQsIGNhbikpIHsgcmV0dXJuIH0KCQkJCWNhbi5fa2V5bGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgY2FuLm1vZGUrKGV2ZW50LmN0cmxLZXk/ICJfY3RybCI6ICIiKSwgY2FuLl9rZXlsaXN0LCBjYW4udWkuY3VycmVudCkKCQkJCWNhbi5tb2RlID09ICJpbnNlcnQiICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlKSB9LCAxMCkKCQkJCWNhbi5tb2RlID09ICJub3JtYWwiICYmIGNhbi5TdGF0dXMoIuaMiemUriIsIGNhbi5fa2V5bGlzdC5qb2luKCIiKSkKCQkJCWNhbi5tb2RlID09ICJub3JtYWwiICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBvbmtleXVwOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb24uX2NvbXBsZXRlKGV2ZW50LCBjYW4pCgoJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKQoKCQkJfX0sIHt2aWV3OiBbImNvbXBsZXRlIl19LAoJCV0pOyBjYW4udWkuY3VycmVudCA9IHVpLmN1cnJlbnQsIGNhbi51aS5jb21wbGV0ZSA9IHVpLmNvbXBsZXRlCgl9LAoJcHJvamVjdDogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCWNhbi5pc0NtZE1vZGUoKSAmJiB7bmFtZTogImNyZWF0ZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4ub25hY3Rpb24ubGlzdCwgdGFyZ2V0KSB9fSwKCQkJe25hbWU6ICJzb3VyY2UiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciB0b3RhbCA9IDAKCQkJCWZ1bmN0aW9uIHNob3cocGF0aCwgdGFyZ2V0KSB7IGNhbi5ydW4oY2FuLnJlcXVlc3Qoe30sIHtkaXJfcm9vdDogcGF0aCwgZGlyX2RlZXA6IHRydWV9KSwgW2ljZS5QV0RdLCBmdW5jdGlvbihtc2cpIHsgdmFyIGxpc3QgPSBtc2cuVGFibGUoKQoJCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZihpdGVtLnBhdGgpID09IDApIHsgaXRlbS5leHBhbmQgPSB0cnVlIH0KCQkJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQub25tb3VzZWVudGVyID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCB7CgkJCQkJCQkidHJhc2giOiBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgbmZzLlRSQVNILCBbY2FuLmJhc2UuUGF0aChwYXRoLCBpdGVtLnBhdGgpXSkgfSwKCQkJCQkJCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb25bYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24pIH0sCgkJCQkJCX0sIFsidHJhc2giXSkgfSB9CgkJCQkJfSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGxpc3QsIG5mcy5QQVRILCBpY2UuUFMsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgaXRlbS5wYXRoKSAvLyDmmL7npLrmlofku7YKCQkJCQl9LCB0YXJnZXQpLCBjYW4uU3RhdHVzKCLmlofku7bmlbAiLCB0b3RhbCArPSBtc2cuTGVuZ3RoKCkpCgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIit0b3RhbCsiIGl0ZW0ifSkKCQkJCX0sIHRydWUpIH0gaWYgKHBhdGgubGVuZ3RoID09IDEpIHsgcmV0dXJuIHNob3cocGF0aFswXSwgdGFyZ2V0KSB9CgoJCQkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBjYW4uY29yZS5MaXN0KHBhdGgsIGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIHtuYW1lOiBwYXRoLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHNob3cocGF0aCwgdGFyZ2V0KSB9fSB9KSwgdGFyZ2V0KQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gIiIgfSkKCQkJfX0sCgkJCXtuYW1lOiAicGx1Z2luIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgdG90YWwgPSAwCgkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGNhbi5jb3JlLkl0ZW0oY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHRvdGFsKyssIHtpbmRleDogY2FuLmJhc2UudHJpbVByZWZpeChrZXksICJjYW4uIil9IH0pLCBjdHguSU5ERVgsIGljZS5QVCwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uY29yZS5LZXlzKCJjYW4iLCBpdGVtLmluZGV4KSwgY3R4LklOREVYKSAvLyDmmL7npLrmj5Lku7YKCQkJCX0sIHRhcmdldCkKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrdG90YWwrIiBpdGVtIn0pCgkJCX19LAoJCQl7bmFtZTogIm1vZHVsZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtmaWVsZHM6IGN0eC5JTkRFWH0pLCBjdHguQ09NTUFORCwgW21kYi5TRUFSQ0gsIGN0eC5DT01NQU5EXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIittc2cuTGVuZ3RoKCkrIiBpdGVtIn0pCgkJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBtc2cuVGFibGUoKSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGl0ZW0uaW5kZXgsIGN0eC5JTkRFWCkgLy8g5pi+56S65qih5Z2XCgkJCQkJfSwgdGFyZ2V0KQoJCQkJfSkKCQkJfX0sCgkJCXtuYW1lOiAiZHJlYW1zIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJCWNhbi5ydW5BY3Rpb24oe30sIGljZS5SVU4sIFt3ZWIuRFJFQU1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK21zZy5MZW5ndGgoKSsiIGl0ZW0ifSkKCQkJCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgewoJCQkJCQlmdW5jdGlvbiBjYXJ0ZShldmVudCkgewoJCQkJCQkJdmFyIGxpc3QgPSBbXTsgc3dpdGNoIChpdGVtLnN0YXR1cykgewoJCQkJCQkJCWNhc2UgInN0YXJ0IjogbGlzdCA9IFsib3BlbiIsICJzdG9wIl07IGJyZWFrCgkJCQkJCQkJY2FzZSAic3RvcCI6IGxpc3QgPSBbInN0YXJ0IiwgInRyYXNoIl07IGJyZWFrCgkJCQkJCQl9CgkJCQkJCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHt9LCBsaXN0LCBmdW5jdGlvbihldmVudCwgYWN0aW9uKSB7CgkJCQkJCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgaXRlbSksIGljZS5SVU4sIFt3ZWIuRFJFQU0sIGN0eC5BQ1RJT04sIGFjdGlvbl0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCQkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYWxsKHRhcmdldCkKCQkJCQkJCQl9KQoJCQkJCQkJfSkKCQkJCQkJfQoKCQkJCQkJdmFyIGNvbG9yID0gaXRlbS5zdGF0dXMgPT0gInN0YXJ0Ij8gIiI6ICJncmF5IgoJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IFtpdGVtLm5hbWUsIGh0bWwuRElWXSwgc3R5bGU6IHtjb2xvcjogY29sb3J9LCBvbm1vdXNlZW50ZXI6IGNhcnRlfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaXRlbS5uYW1lLCB3ZWIuRFJFQU0pIC8vIOaYvuekuuepuumXtAoJCQkJCQl9fV0pCgkJCQkJfSkKCQkJCX0pCgkJCX0sIF9tZW51OiBzaHkoIiIsIHsKCQkJCSJjcmVhdGUiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uLmRyZWFtKGV2ZW50LCBjYW4sICJkcmVhbSIpIH0sCgkJCQkicmVmcmVzaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4udWkuZHJlYW1zLnJlZnJlc2goKSB9LAoJCQkJInB1Ymxpc2giOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0Q29uZmlybShjYW4sIG1zZy5SZXN1bHQoKSwgYnV0dG9uKSB9KSB9LAoJCQl9LCBbImNyZWF0ZSIsICJyZWZyZXNoIiwgInB1Ymxpc2giXSwgZnVuY3Rpb24oKSB7fSl9LAoJCV0sIGNhbi51aS5wcm9qZWN0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLAoJX21vZGVsOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IGNhbi5TdGF0dXMoIuaooeW8jyIsIGNhbi5tb2RlID0gdmFsdWUpCgkJY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIGNhbi51aS5jdXJyZW50LCBbImN1cnJlbnQiLCBjYW4ubW9kZV0pLCB2YWx1ZQoJCWNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCBjYW4udWkuY29tcGxldGUsIFsiY29tcGxldGUiLCBjYW4ubW9kZV0pLCB2YWx1ZQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJwbHVnaW4iKQoJCWNhbi51aS5jdXJyZW50LmJsdXIoKQoJfSwKCV9ub3JtYWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJub3JtYWwiKQoJCWNhbi51aS5jdXJyZW50LmZvY3VzKCkKCX0sCglfaW5zZXJ0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbW9kZWwoY2FuLCAiaW5zZXJ0IikKCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwCgkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgl9LAoKCV9tb2RlOiB7CgkJcGx1Z2luOiB7CgkJCXQ6IHNoeSgi5re75Yqg5ZG95LukIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIua3u+WKoCJdKGV2ZW50LCBjYW4pIH0pLAoJCQlwOiBzaHkoIua3u+WKoOaPkuS7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmj5Lku7YiXShldmVudCwgY2FuKSB9KSwKCQkJZTogc2h5KCLmt7vliqDmianlsZUiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5omp5bGVIl0oZXZlbnQsIGNhbikgfSksCgoJCQlpOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikgfSksCgkJCW46IHNoeSgi5ZG95Luk5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX25vcm1hbChldmVudCwgY2FuKSB9KSwKCQkJIjoiOiBzaHkoIuW6leihjOaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJjbGkuc3lzdGVtIn0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFsiY2xpLnN5c3RlbSJdID0gc3ViLnNlbGVjdCgpIH0pIH0pLAoKCQkJczogc2h5KCLkv53lrZjmlofku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zYXZlKGV2ZW50LCBjYW4sICJzYXZlIikgfSksCgkJCWQ6IHNoeSgi5Yib5bu656m66Ze0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uZHJlYW0oZXZlbnQsIGNhbiwgImRyZWFtIikgfSksCgkJCW06IHNoeSgi5re75Yqg5qih5Z2XIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uYXV0b2dlbihldmVudCwgY2FuLCAiYXV0b2dlbiIpIH0pLAoJCQljOiBzaHkoIue8luivkemhueebriIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNvbXBpbGUoZXZlbnQsIGNhbiwgImNvbXBpbGUiKSB9KSwKCQl9LAoJCW5vcm1hbF9jdHJsOiB7CgkJCWY6IHNoeSgi5ZCR5LiL57+76aG1IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuKStjYW4uY3VycmVudC53aW5kb3coKS0zLWNhbi5jdXJyZW50LnNjcm9sbCgpCgkJCQlyZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSwgdHJ1ZQoJCQl9KSwKCQkJYjogc2h5KCLlkJHkuIrnv7vpobUiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4pLWNhbi5jdXJyZW50LndpbmRvdygpKzMKCQkJCXJldHVybiBjYW4uY3VycmVudC5zY3JvbGwobGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpLCB0cnVlCgkJCX0pLAoJCX0sCgkJbm9ybWFsOiB7CgkJCUVzY2FwZTogc2h5KCLliIfmjaLmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fcGx1Z2luKGV2ZW50LCBjYW4pIH0pLAoJCQlBcnJvd0xlZnQ6IHNoeSgi5YWJ5qCH5bem56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAtMSkgfSksCgkJCUFycm93UmlnaHQ6IHNoeSgi5YWJ5qCH5Y+z56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAxKSB9KSwKCQkJQXJyb3dEb3duOiBzaHkoIuWFieagh+S4i+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9KSwKCQkJQXJyb3dVcDogc2h5KCLlhYnmoIfkuIrnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkgfSksCgoJCQkiLiI6IHNoeSgi6YeN5aSN5pON5L2cIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBjYiA9IGNhbi5yZWRvLnBvcCgpOyBjYiAmJiBjYigpIH0pLAoJCQl1OiBzaHkoIuaSpOmUgOaTjeS9nCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB2YXIgY2IgPSBjYW4udW5kby5wb3AoKTsgY2IgJiYgY2IoKSB9KSwKCQkJSjogc2h5KCLlkIjlubbkuKTooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCXZhciBuZXh0ID0gY2FuLmN1cnJlbnQubmV4dCgpOyBpZiAoIW5leHQpIHsgcmV0dXJuIH0KCQkJCXZhciBsaW5lID0gY2FuLmN1cnJlbnQubGluZSwgdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJdmFyIHJlc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBuZXh0LCAidGQudGV4dCIpWzBdLmlubmVyVGV4dAoJCQkJY2FuLmN1cnJlbnQudGV4dCh0ZXh0LnRyaW1SaWdodCgpK2ljZS5TUCtyZXN0LnRyaW1MZWZ0KCkpLCBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIG5leHQpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24ubW9kaWZ5TGluZShjYW4sIGxpbmUsIHRleHQpLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHJlc3QsIGxpbmUubmV4dFNpYmxpbmcpIH0pCgkJCX0pLAoKCQkJSDogc2h5KCLot7PliLDooYzpppYiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIDApIH0pLAoJCQloOiBzaHkoIuWFieagh+W3puenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgLTEpIH0pLAoJCQlsOiBzaHkoIuWFieagh+WPs+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMSkgfSksCgkJCUw6IHNoeSgi6Lez5Yiw6KGM5bC+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAwLCAtMSkgfSksCgkJCWo6IHNoeSgi5YWJ5qCH5LiL56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpIH0pLAoJCQlrOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKSB9KSwKCgkJCWdnOiBzaHkoIui3s+WIsOafkOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNvdW50KSwgdHJ1ZSB9KSwKCQkJRzogc2h5KCLot7PliLDmn5DooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjb3VudCA9IGNvdW50PjE/IGNvdW50OiBjYW4ubWF4KSwgdHJ1ZSB9KSwKCQkJenQ6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5pyA5LiKIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLShjb3VudD4xPyBjb3VudDogMykpLCB0cnVlIH0pLAoJCQl6ejogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXkuK3pl7QiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktKGNvdW50ID0gY291bnQ+MT8gY291bnQ6IGNhbi5jdXJyZW50LndpbmRvdygpLzIpKSwgdHJ1ZSB9KSwKCQkJemI6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5pyA5LiLIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLWNhbi5jdXJyZW50LndpbmRvdygpKyhjb3VudD4xPyBjb3VudDogNSkpLCB0cnVlIH0pLAoKCQkJaTogc2h5KCLmj5LlhaXmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pIH0pLAoJCQlJOiBzaHkoIuaPkuWFpeihjOmmliIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIDApIH0pLAoJCQlhOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDEpIH0pLAoJCQlBOiBzaHkoIuaPkuWFpeihjOWwviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIC0xKSB9KSwKCQkJbzogc2h5KCLmj5LlhaXkuIvkuIDooYwiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpKyh0ZXh0LmVuZHNXaXRoKCJ7Iik/Ilx0IjoiIikKCQkJCWNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGNhbi5jdXJyZW50Lm5leHQoKSkpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAxMDAwKQoJCQl9KSwKCQkJTzogc2h5KCLmj5LlhaXkuIrkuIDooYwiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpKyh0ZXh0LmVuZHNXaXRoKCJ9Iik/Ilx0IjoiIikKCQkJCWNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGNhbi5jdXJyZW50LmxpbmUpKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMTAwMCkKCQkJfSksCgoJCQl5eTogc2h5KCLlpI3liLblvZPliY3ooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IGNhbi5fbGFzdF90ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpIH0pLAoJCQlkZDogc2h5KCLliarliIflvZPliY3ooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpLCBsaW5lID0gY2FuLm9uYWN0aW9uLl9nZXRMaW5lbm8oY2FuLCBjYW4uY3VycmVudC5saW5lKQoJCQkJY2FuLl9sYXN0X3RleHQgPSBjYW4uY3VycmVudC50ZXh0KCksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgY2FuLmN1cnJlbnQubGluZSkpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSB9KQoJCQkJdmFyIGNhbGxlZSA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJCWNhbi5yZWRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbGxlZShldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB9KQoJCQl9KSwKCQkJcDogc2h5KCLnspjotLQiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgY2FuLl9sYXN0X3RleHQsIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgbGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUtMSkgfSkKCQkJfSksCgkJCVA6IHNoeSgi57KY6LS0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGNhbi5fbGFzdF90ZXh0LCBjYW4uY3VycmVudC5saW5lKQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSsxKSB9KQoJCQl9KSwKCgkJCXM6IHNoeSgi5L+d5a2Y5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2F2ZShldmVudCwgY2FuLCAic2F2ZSIpIH0pLAoJCQltOiBzaHkoIua3u+WKoOaooeWdlyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmF1dG9nZW4oZXZlbnQsIGNhbiwgImF1dG9nZW4iKSB9KSwKCQkJYzogc2h5KCLnvJbor5Hpobnnm64iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jb21waWxlKGV2ZW50LCBjYW4sICJjb21waWxlIikgfSksCgkJfSwKCQlpbnNlcnQ6IHsKCQkJRXNjYXBlOiBzaHkoIumAgOWHuue8lui+kSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiRXNjYXBlIikgeyByZXR1cm4gfQoJCQkJY2FuLm9ua2V5bWFwLl9ub3JtYWwoZXZlbnQsIGNhbikKCQkJfSksCgkJCVRhYjogc2h5KCLnvKnov5siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIlRhYiIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmtleW1hcC5pbnNlcnRUZXh0KGNhbi51aS5jdXJyZW50LCBpY2UuVEIpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSksCgkJCUJhY2tzcGFjZTogc2h5KCLliKDpmaQiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgaWYgKGV2ZW50LmtleSAhPSAiQmFja3NwYWNlIikgeyByZXR1cm4gfQoJCQkJaWYgKHRhcmdldC5zZWxlY3Rpb25TdGFydCA+IDApIHsgcmV0dXJuIH0KCQkJCWlmICghY2FuLmN1cnJlbnQucHJldigpKSB7IHJldHVybiB9CgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCgkJCQl2YXIgcmVzdCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKQoJCQkJY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQl2YXIgcG9zID0gY2FuLmN1cnJlbnQudGV4dCgpLmxlbmd0aAoKCQkJCWNhbi51aS5jdXJyZW50LnZhbHVlID0gY2FuLmN1cnJlbnQudGV4dCgpK3Jlc3QKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDAsIHBvcykKCQkJfSksCgkJCUVudGVyOiBzaHkoIuaNouihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBpZiAoZXZlbnQua2V5ICE9ICJFbnRlciIpIHsgcmV0dXJuIH0KCQkJCXZhciByZXN0ID0gY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uRW5kKSwgdGV4dCA9IGNhbi51aS5jdXJyZW50LnZhbHVlCgkJCQl2YXIgbGVmdCA9IHRleHQuc3Vic3RyKDAsIHRleHQuaW5kZXhPZih0ZXh0LnRyaW1MZWZ0KCkpKXx8KHRleHQudHJpbVJpZ2h0KCkgPT0gIiI/IHRleHQ6ICIiKQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoInsiKSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrIn0iLCBjYW4uY3VycmVudC5uZXh0KCkpLCBsZWZ0ICs9IGljZS5UQiB9CgkJCQlpZiAodGV4dC5lbmRzV2l0aCgiWyIpKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsiXSIsIGNhbi5jdXJyZW50Lm5leHQoKSksIGxlZnQgKz0gaWNlLlRCIH0KCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCIoIikpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyIpIiwgY2FuLmN1cnJlbnQubmV4dCgpKSwgbGVmdCArPSBpY2UuVEIgfQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoImAiKSAmJiBjYW4uYmFzZS5jb3VudCh0ZXh0LCAiYCIpJTI9PTEpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyJgIiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9CgoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrcmVzdC50cmltTGVmdCgpLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQljYW4uY3VycmVudC50ZXh0KHRleHQudHJpbVJpZ2h0KCl8fHRleHQpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgbGVmdC5sZW5ndGgsIDApCgkJCX0pLAoJCQlBcnJvd1VwOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiQXJyb3dVcCIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkKCQkJfSksCgkJCUFycm93RG93bjogc2h5KCLlhYnmoIfkuIvnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIkFycm93RG93biIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJfSksCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFtuZnMuU0FWRSwgY29kZS5DT01QSUxFLCBjb2RlLkFVVE9HRU4sIG5mcy5TQ1JJUFQsIGNoYXQuV0VCU0lURSwgd2ViLkRSRUFNXSwKCV9ydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgYXJncywgY2IpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MsIGNifHxmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpLCBjYW4udWkuc291cmNlLnJlZnJlc2goKQoJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBidXR0b24pCgkJfSkKCX0sCglfcnVuczogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBjYikgeyB2YXIgbWV0YSA9IGNhbi5Db25mKCk7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBidXR0b259KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIG1ldGEuZmVhdHVyZVtidXR0b25dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5vbmFjdGlvbi5fcnVuKGV2ZW50LCBjYW4sIGJ1dHRvbiwgYXJncywgY2IpCgkJfSkKCX0sCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY29udGVudDogY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKX0pCgkJY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgYnV0dG9uLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldKQoJfSwKCWNvbXBpbGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi57yW6K+R5LitLi4uIikKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHRvYXN0LmNsb3NlKCkKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHZhciB0b2FzdDEgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi6YeN5ZCv5LitLi4uIikKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0b2FzdDEuY2xvc2UoKSwgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKSB9LCAzMDAwKQoJCQl9IGVsc2UgeyBjYW4udWkuc2VhcmNoLl9zaG93KG1zZykgfQoKCQl9KQoJfSwKCWF1dG9nZW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uX3J1bnMoZXZlbnQsIGNhbiwgYnV0dG9uLCBmdW5jdGlvbihtc2cpIHsKCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKGNsaS5NQUlOKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQkJY2FuLnVpLnNvdXJjZS5yZWZyZXNoKCkKCQkJfSkKCQl9LCB0cnVlKQoJfSkgfSwKCXNjcmlwdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9ydW5zKGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmlsZTogY2FuLmJhc2UudHJpbVN1ZmZpeChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSkrbmZzLkpTfSksIGNhbiwgYnV0dG9uKQoJfSwKCXdlYnNpdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fcnVucyhjYW4ucmVxdWVzdChldmVudCwge2ZpbGU6IChjYW4uYmFzZS50cmltU3VmZml4KGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKStuZnMuWk1MKS5zcGxpdCgiLyIpLnBvcCgpfSksIGNhbiwgYnV0dG9uKQoJfSwKCWRyZWFtOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX3J1bnMoY2FuLnJlcXVlc3QoZXZlbnQpLCBjYW4sIGJ1dHRvbiwgZnVuY3Rpb24obXNnKSB7IGNhbi51aS5kcmVhbXMucmVmcmVzaCgpCgkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obWRiLk5BTUUpLCB3ZWIuRFJFQU0pIC8vIOaYvuekuuepuumXtAoJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCX0pCgl9LAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWF0sIGZ1bmN0aW9uKGxpc3QpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGlzdFswXSwgY3R4LklOREVYKSB9KSB9LAoJIuaPkuS7tiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYXSwgZnVuY3Rpb24obGlzdCkgewoJCQl2YXIgc3ViID0gY2FuLnRvb2xraXRbbGlzdFswXV07IGlmIChzdWIpIHsgc3ViLnNlbGVjdCgpOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogbGlzdFswXX0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFtsaXN0WzBdXSA9IHN1Yi5zZWxlY3QoKSB9KQoJCX0pCgl9LAoJIuaJqeWxlSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbInVybCJdLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBzdWIgPSBjYW4uZXh0ZW50aW9uc1tsaXN0WzBdXTsgaWYgKHN1YikgeyBzdWIuc2VsZWN0KCk7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC5leHRzKGNhbiwgbGlzdFswXSwgZnVuY3Rpb24oc3ViKSB7IGNhbi5leHRlbnRpb25zW2xpc3RbMF1dID0gc3ViLnNlbGVjdCgpIH0pCgkJfSkKCX0sCgoJbGlzdFRhZ3M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgbGlzdCA9IFtdCgkJY2FuLmNvcmUuSXRlbShjYW4ucmVxdWVzdChldmVudCksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQlsaXN0LnB1c2goe3pvbmU6ICJtc2ciLCB0eXBlOiB0eXBlb2YgdmFsdWUsIG5hbWU6IGtleSwgdGV4dDogY2FuLmJhc2UuaXNPYmplY3QodmFsdWUpPyAiIjogKHZhbHVlKyIiKS5zcGxpdChpY2UuTkwpWzBdLAoJCQkJcGF0aDogInVzci92b2xjYW5vcy8iLCBmaWxlOiAibGliL21pc2MuanMiLCBsaW5lOiAxLAoJCQl9KQoJCX0pCgkJY2FuLmNvcmUuTGlzdChbY2FuLmJhc2UsIGNhbi5jb3JlLCBjYW4ubWlzYywgY2FuLnBhZ2UsIGNhbi51c2VyLCBjYW4ub25lbmdpbmUsIGNhbi5vbmRhZW1vbiwgY2FuLm9uYXBwZW5kLCBjYW4ub25sYXlvdXQsIGNhbi5vbm1vdGlvbiwgY2FuLm9ua2V5bWFwXSwgZnVuY3Rpb24obGliKSB7CgkJCWNhbi5jb3JlLkl0ZW0obGliLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGlmIChrZXkuaW5kZXhPZigiXyIpID09IDAgfHwgIWxpYi5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IHJldHVybiB9CgkJCQlsaXN0LnB1c2goe3pvbmU6IGxpYi5fbmFtZSwgdHlwZTogdHlwZW9mIHZhbHVlLCBuYW1lOiBrZXksIHRleHQ6IGNhbi5iYXNlLmlzT2JqZWN0KHZhbHVlKT8gIiI6ICh2YWx1ZSsiIikuc3BsaXQoaWNlLk5MKVswXSwKCQkJCQlwYXRoOiAidXNyL3ZvbGNhbm9zLyIsIGZpbGU6IGxpYi5fcGF0aCwgbGluZTogMSwKCQkJCX0pCgkJCX0pCgkJfSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7dGV4dDogY2FuLmJhc2UuRm9ybWF0KGxpc3QpfSksIGJ1dHRvbikKCX0sCglfY29tcGxldGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi51aS5jb21wbGV0ZQoJCWlmIChldmVudCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0KCQl2YXIgcHJlID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoMCwgY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIGVuZCA9IGNhbi51aS5jdXJyZW50LnZhbHVlLnNsaWNlKGNhbi51aS5jdXJyZW50LnNlbGVjdGlvblN0YXJ0KQoJCXZhciB0eXBlID0gY2FuLmNvcmUuU3BsaXQocHJlKS5wb3AoKXx8IiIKCQl2YXIgbmFtZSA9IGNhbi5jb3JlLlNwbGl0KHR5cGUsICIiLCBpY2UuUFQpLnBvcCgpfHwiIgoJCXR5cGUgPSBjYW4uYmFzZS50cmltU3VmZml4KHR5cGUsIG5hbWUpCgkJdHlwZSA9IGNhbi5iYXNlLnRyaW1TdWZmaXgodHlwZSwgaWNlLlBUKQoJCWNvbnN0IFBSRSA9ICJwcmUiCgoJCWZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHt0eXBlOiB0eXBlLCBuYW1lOiBuYW1lLCB0ZXh0OiBwcmUsIGZpbGU6IGNhbi5PcHRpb24obmZzLkZJTEUpfSkKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgImNvbXBsZXRlIiwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4udWkuY29tcGxldGUuX21zZyA9IG1zZwoJCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwICYmIGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkgPT0gbmZzLkpTKSB7CgkJCQkJbXNnLm5hbWUgPSBbXSwgbXNnLnR5cGUgPSBbXSwgbXNnLnRleHQgPSBbXQoJCQkJCWNhbi5jb3JlLkl0ZW0oY2FuLmNvcmUuVmFsdWUod2luZG93LCB0eXBlKSwgZnVuY3Rpb24oaywgdikgewoJCQkJCQltc2cuUHVzaChtZGIuTkFNRSwgayksIG1zZy5QdXNoKG1kYi5UWVBFLCB0eXBlb2YgdikKCQkJCQkJdHJ5IHsgbXNnLlB1c2gobWRiLlRFWFQsIHYpIH0gY2F0Y2ggKGUpIHsgbXNnLlB1c2gobWRiLlRFWFQsICIiKSB9CgkJCQkJfSkKCQkJCQltc2cuYXBwZW5kID0gW21kYi5OQU1FLCBtZGIuVFlQRSwgbWRiLlRFWFRdCgkJCQl9CgkJCQltc2cuTGVuZ3RoKCkgPT0gMCAmJiBwcmUudHJpbSgpID09ICIiICYmIGNhbi5jb3JlLkl0ZW0oY2FuLmNvcmUuVmFsdWUoY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0sIGNvZGUuS0VZV09SRCksIGZ1bmN0aW9uKGspIHsKCQkJCQltc2cuUHVzaChtZGIuTkFNRSwgaykKCQkJCX0pCgkJCQkKCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFt7dmlldzogW1BSRSwgaHRtbC5ESVYsIHByZV19XSkKCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgpIHsgcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCXZhciBsZWZ0ID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoMCwgY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpK3ZhbHVlCgkJCQkJY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGxlZnQrY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uRW5kKSkKCQkJCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwLCBjYW4udWkuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShsZWZ0Lmxlbmd0aCwgbGVmdC5sZW5ndGgpCgkJCQl9fSB9LCB0YXJnZXQpCgkJCX0pCgkJfQoKCQlmdW5jdGlvbiBmaWx0ZXIoKSB7CgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURFLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCQlpZiAodGQuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihjYW4uYmFzZS50cmltU3VmZml4KChuYW1lID09IGljZS5QVD8gdHlwZTogbmFtZSkudG9Mb3dlckNhc2UoKSwgIigiKSkgPT0gMCkgeyByZXR1cm4gdGQgfQoJCQkJfSkubGVuZ3RoID09IDApKSB7IHJldHVybiB0ciB9CgkJCX0pLmxlbmd0aCA+IChuYW1lID09IGljZS5QVD8gMTogMCkKCQl9CgoJCWZ1bmN0aW9uIHNlbGVjdChpbmRleCwgdG90YWwpIHsgaW5kZXggPSAoaW5kZXgrKHRvdGFsKzEpKSUodG90YWwrMSkKCQkJaWYgKGluZGV4ID09IHRvdGFsKSB7IGNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKSkgfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAidHI6bm90KC5oaWRlKSJdLCBmdW5jdGlvbih0ciwgaSkgeyBpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLlNFTEVDVCwgaSA9PSBpbmRleCkpIHsKCQkJCWNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKStjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URClbMF0uaW5uZXJUZXh0KQoJCQl9IH0pCgkJCXJldHVybiBpbmRleAoJCX0KCgkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJaWYgKGV2ZW50LnR5cGUgPT0gImtleXVwIikgewoJCQkJdmFyIHRvdGFsID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbaHRtbC5UQk9EWSwgInRyOm5vdCguaGlkZSkiXSkubGVuZ3RoCgkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCWNhc2UgIm4iOiBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gc2VsZWN0KGNhbi51aS5jb21wbGV0ZS5faW5kZXgrMSwgdG90YWwpOyBicmVhawoJCQkJCWNhc2UgInAiOiBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gc2VsZWN0KGNhbi51aS5jb21wbGV0ZS5faW5kZXgtMSwgdG90YWwpOyBicmVhawoJCQkJCWRlZmF1bHQ6IHJldHVybiBmYWxzZQoJCQkJfQoJCQkJcmV0dXJuIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9CgkJCXJldHVybgoJCX0KCgkJY2FuLmN1cnJlbnQubGluZS5hcHBlbmRDaGlsZChjYW4udWkuY29tcGxldGUpLCBjYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb21wbGV0ZSwgaHRtbC5MRUZULCBjYW4udWkuY3VycmVudC5vZmZzZXRMZWZ0LTEsIGh0bWwuTUFSR0lOX1RPUCwgY2FuLnVpLmN1cnJlbnQub2Zmc2V0SGVpZ2h0KzQpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiZGl2LnByZSIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5pbm5lclRleHQgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKXx8cHJlIH0pCgkJaWYgKHByZSA9PSAiIikgeyByZXR1cm4gdXBkYXRlKHRhcmdldCkgfQoKCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGh0bWwuRU5URVI6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGh0bWwuVEFCOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJY2FzZSBpY2UuU1A6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGljZS5QVDogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWRlZmF1bHQ6IGZpbHRlcigpIHx8IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCX0gY2FuLnVpLmNvbXBsZXRlLl9pbmRleCA9IC0xCgl9LAoKCV9zZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLmN1cnJlbnQubGluZSwgInRkLnRleHQiLCBmdW5jdGlvbih0ZCkgeyBjYW4udWkuY3VycmVudC52YWx1ZSA9IHRkLmlubmVyVGV4dAoJCQljYW4uY3VycmVudC5saW5lLmFwcGVuZENoaWxkKGNhbi51aS5jdXJyZW50KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY3VycmVudCwgaHRtbC5MRUZULCB0ZC5vZmZzZXRMZWZ0LTEsIGh0bWwuV0lEVEgsIGNhbi51aS5jb250ZW50LnN0eWxlLndpZHRoKQoJCQlpZiAoZXZlbnQpIHsKCQkJCWlmIChldmVudC50eXBlID09ICJjbGljayIgJiYgY2FuLm1vZGUgIT0gImluc2VydCIpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLl9jb21wbGV0ZShldmVudCwgY2FuKSB9KQoJCQkJfQoJCQkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKSwgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsTGVmdCAtPSAxMDAwMAoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMCwgKGV2ZW50Lm9mZnNldFgpLzEyLTEpCgkJCX0KCQl9KQoJfSwKCXJlcmFua0xpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsgY2FuLm1heCA9IDAKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJY2FuLm1heCsrLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCAidGQubGluZSIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5pbm5lclRleHQgPSBpbmRleCsxIH0pCgkJfSkKCX0sCglpbnNlcnRMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlLCBiZWZvcmUpIHsgdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uYXBwZW5kTGluZShjYW4sIHZhbHVlKQoJCWJlZm9yZSAmJiBjYW4udWkuY29udGVudC5pbnNlcnRCZWZvcmUobGluZSwgY2FuLm9uYWN0aW9uLl9nZXRMaW5lKGNhbiwgYmVmb3JlKSkKCQlyZXR1cm4gY2FuLm9uYWN0aW9uLnJlcmFua0xpbmUoY2FuKSwgY2FuLm9uYWN0aW9uLl9nZXRMaW5lbm8oY2FuLCBsaW5lKQoJfSwKCWRlbGV0ZUxpbmU6IGZ1bmN0aW9uKGNhbiwgbGluZSkgeyBsaW5lID0gY2FuLm9uYWN0aW9uLl9nZXRMaW5lKGNhbiwgbGluZSkKCQl2YXIgbmV4dCA9IGxpbmUubmV4dFNpYmxpbmd8fGxpbmUucHJldmlvdXNTaWJsaW5nCgkJcmV0dXJuIGNhbi5wYWdlLlJlbW92ZShjYW4sIGxpbmUpLCBjYW4ub25hY3Rpb24ucmVyYW5rTGluZShjYW4pLCBuZXh0Cgl9LAoJbW9kaWZ5TGluZTogZnVuY3Rpb24oY2FuLCBsaW5lLCB2YWx1ZSkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpZiAoaXRlbSAhPSBsaW5lICYmIGluZGV4KzEgIT0gbGluZSkgeyByZXR1cm4gfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWl0ZW0uaW5uZXJIVE1MID0gY2FuLm9uc3ludGF4Ll9wYXJzZShjYW4sIHZhbHVlKQoJCQl9KQoJCX0pCgl9LAoJZmF2b3JMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiem9uZSIsIHZhbHVlOiAiaGkifSwge25hbWU6ICJuYW1lIiwgdmFsdWU6ICJoZWxsbyJ9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBbY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLlpPTkUsIGRhdGEuem9uZXx8IiIsCgkJCQltZGIuVFlQRSwgY2FuLnBhcnNlLCBtZGIuTkFNRSwgZGF0YS5uYW1lfHwiIiwgbWRiLlRFWFQsICh2YWx1ZXx8IiIpLnRyaW1SaWdodCgpLAoJCQkJbmZzLlBBVEgsIGNhbi5PcHRpb24obmZzLlBBVEgpLCBuZnMuRklMRSwgY2FuLk9wdGlvbihuZnMuRklMRSksIG5mcy5MSU5FLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSwKCQkJXSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbIuaWh+S7tuaVsCIsICLmqKHlvI8iLCAi5oyJ6ZSuIiwgIuino+aekOWZqCIsICLmlofku7blkI0iLCAi5b2T5YmN6KGMIiwgIui3s+i9rOaVsCJdfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUveHRlcm0uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmxheW91dC5wcm9maWxlX2F1dG8oY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0LmxheW91dChjYW4pLCBjYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4pLCBjYW4udGVybSA9IHt9CgoJCWNhbi5yZXF1aXJlTW9kdWxlcyhbInh0ZXJtL2Nzcy94dGVybS5jc3MiLCAieHRlcm0iLCAieHRlcm0tYWRkb24tZml0IiwgInh0ZXJtLWFkZG9uLXdlYi1saW5rcyJdLCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IAoJCQlpZiAoY2FuLk9wdGlvbihtZGIuSEFTSCkgIT0gIiIpIHsKCQkJCXZhciBpdGVtID0ge2hhc2g6IGNhbi5PcHRpb24obWRiLkhBU0gpfTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7IGNhbi5jb3JlLlZhbHVlKGl0ZW0sIHZhbHVlLmtleSwgdmFsdWUudmFsdWUpIH0pCgkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9jb25uZWN0KGNhbiwgaXRlbSkKCQkJfQoKCQkJdmFyIGhhc2ggPSBjYW4uc3VwLl9oYXNofHxjYW4ubWlzYy5TZWFyY2hIYXNoKGNhbil8fHRydWUsIGxpc3QgPSBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCXZhciBpdGVtID0gY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgdmFsdWUpOyB2YWx1ZS5oYXNoID09IGhhc2ggJiYgKGl0ZW0uY2xpY2soKSwgaGFzaCA9IGZhbHNlKQoJCQl9KTsgaGFzaCAmJiBjYW4ub25pbXBvcnQuX2NyZWF0ZShjYW4sIFttZGIuVFlQRSwgIiIsIG1kYi5OQU1FLCAidGVybSJdKQoJCX0sIDUwMCkgfSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLCBodG1sLldJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJdmFyIHRlcm0gPSBjYW4udWkuY29udGVudC5fdGVybTsgaWYgKCF0ZXJtKSB7IHJldHVybiB9CgkJdGVybS5fZml0LmZpdCgpLCBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWl0ZW0uX21lbnUgPSBzaHkoY2FuLm9uZGV0YWlsLCBjYW4ub25kZXRhaWwubGlzdCwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQljYW4ucmVxdWVzdChldmVudCwgaXRlbSwgaXRlbS5leHRyYSksIG1ldGFbYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pCgkJfSkKCQlyZXR1cm4gaXRlbS5faXRlbSA9IGNhbi5vbmltcG9ydC5pdGVtKGNhbiwgaXRlbSwgZnVuY3Rpb24oZXZlbnQpIHsgCgkJCWl0ZW0uX3RhYnM/IGl0ZW0uX3RhYnMuY2xpY2soKTogaXRlbS5fdGFicyA9IGNhbi5vbmltcG9ydC50YWJzKGNhbiwgW2l0ZW1dLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uaW1wb3J0Ll9jb25uZWN0KGNhbiwgaXRlbSkKCQkJfSksIGl0ZW0uX3BsdWdpbiAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbS5fcGx1Z2luLl90YXJnZXQsIHRydWUpCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBpdGVtLl9tZW51KSB9KQoJfSwKCV9jcmVhdGU6IGZ1bmN0aW9uKGNhbiwgYXJncywgZGF0YSkgewoJCWNhbi5ydW5BY3Rpb24oe30sIG1kYi5DUkVBVEUsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgewoJCQl2YXIgY3VycmVudCA9IGNhbi5vbmltcG9ydC5faXRlbShjYW4sIHtoYXNoOiBtc2cuUmVzdWx0KCksIG5hbWU6IG1zZy5PcHRpb24obWRiLk5BTUUpLCBleHRyYTogZGF0YX0pCgkJCWNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIGN1cnJlbnQsIGNhbi51aS5wcm9qZWN0LmZpcnN0Q2hpbGQpLmNsaWNrKCkKCQl9KQoJfSwKCV9jb25uZWN0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi51aS5jb250ZW50CgkJY2FuLnN1cC5faGFzaCA9IGl0ZW0uaGFzaCwgY2FuLmlzQ21kTW9kZSgpICYmIChsb2NhdGlvbi5oYXNoID0gaXRlbS5oYXNoKQoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIGl0ZW0uaGFzaCB9LCB0YXJnZXQsIGNhbi51aS5wcm9maWxlKSkgewoJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgInNlbGVjdCIpLCBpdGVtLl90ZXJtLmZvY3VzKCkKCQkJcmV0dXJuIGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgaXRlbS5fdGVybSkKCQl9CgoJCWl0ZW0uZXh0cmEgPSBjYW4uYmFzZS5PYmooaXRlbS5leHRyYSwge30pCgkJdmFyIHRlcm0gPSBuZXcgVGVybWluYWwoe3RoZW1lOiBpdGVtLmV4dHJhLCBjdXJzb3JCbGluazogdHJ1ZSwgdGFiU3RvcFdpZHRoOiA0fSkKCQl2YXIgZml0QWRkb24gPSBuZXcgRml0QWRkb24uRml0QWRkb24oKTsgdGVybS5sb2FkQWRkb24oZml0QWRkb24pLCB0ZXJtLl9maXQgPSBmaXRBZGRvbgoJCXRlcm0ubG9hZEFkZG9uKG5ldyBXZWJMaW5rc0FkZG9uLldlYkxpbmtzQWRkb24oKSkKCgkJdGVybS5vcGVuKHRhcmdldHx8Y2FuLnVpLmNvbnRlbnQpCgkJdGVybS5vblJlc2l6ZShmdW5jdGlvbihzaXplKSB7IGNhbi5vbmltcG9ydC5fc2l6ZShjYW4sIGl0ZW0sIHNpemUpIH0pCgkJZml0QWRkb24uZml0KCkKCgkJdmFyIHN1Ym1vZGUgPSBmYWxzZSwga2V5c2tpcCA9IGZhbHNlCgkJdGVybS5vbktleShmdW5jdGlvbihlKSB7IHZhciBldmVudCA9IGUuZG9tRXZlbnQKCQkJaWYgKHN1Ym1vZGUpIHsga2V5c2tpcCA9IHRydWU7IHN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQljYXNlICJsIjogdGFyZ2V0Lm5leHRTaWJsaW5nICYmIHRhcmdldC5uZXh0U2libGluZy5fdGVybT8gdGFyZ2V0Lm5leHRTaWJsaW5nLl90ZXJtLmZvY3VzKCk6CgkJCQkJCWl0ZW0uX3RhYnMgJiYgaXRlbS5fdGFicy5uZXh0U2libGluZyAmJiBpdGVtLl90YWJzLm5leHRTaWJsaW5nLmNsaWNrKCk7CgkJCQkJYnJlYWsKCQkJCWNhc2UgImgiOiB0YXJnZXQucHJldmlvdXNTaWJsaW5nICYmIHRhcmdldC5wcmV2aW91c1NpYmxpbmcuX3Rlcm0/IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuX3Rlcm0uZm9jdXMoKToKCQkJCQkJaXRlbS5fdGFicyAmJiBpdGVtLl90YWJzLnByZXZpb3VzU2libGluZyAmJiBpdGVtLl90YWJzLnByZXZpb3VzU2libGluZy5jbGljaygpOwoJCQkJCWJyZWFrCgkJCQljYXNlICJuIjogY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKTsgYnJlYWsKCQkJCQlicmVhawoJCQkJZGVmYXVsdDoga2V5c2tpcCA9IGZhbHNlCgkJCX0gfQoJCQlzdWJtb2RlID0gZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXkgPT0gImciCgkJCWNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkKCQl9KQoJCXRlcm0ub25EYXRhKGZ1bmN0aW9uKHZhbCkgewoJCQlpZiAoc3VibW9kZSB8fCBrZXlza2lwKSB7IGtleXNraXAgPSBmYWxzZTsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0Ll9pbnB1dChjYW4sIGl0ZW0sIHZhbCkKCQl9KQoJCXRlcm0ub25UaXRsZUNoYW5nZShmdW5jdGlvbih0aXRsZSkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUodGl0bGUpIH0pCgkJdGVybS5vbkN1cnNvck1vdmUoZnVuY3Rpb24oZSkgeyBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pIH0pCgoJCWNhbi50ZXJtW2l0ZW0uaGFzaF0gPSBpdGVtLl90ZXJtID0gdGFyZ2V0Ll90ZXJtID0gdGVybSwgdGVybS5fdGFyZ2V0ID0gdGFyZ2V0LCB0ZXJtLl9pdGVtID0gaXRlbQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0pLCAic2VsZWN0IiksIGl0ZW0uX3Rlcm0uZm9jdXMoKQoJCXJldHVybiBjYW4ub25pbXBvcnQuX3BsdWcoY2FuLCBpdGVtKSwgY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKQoJfSwKCV9pbnB1dDogZnVuY3Rpb24oY2FuLCBpdGVtLCB2YWwpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBpdGVtKSwgImlucHV0IiwgW2J0b2EodmFsKV0sIGZ1bmN0aW9uKCkge30pCgl9LAoJX3NpemU6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgc2l6ZSkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHNpemUsIGl0ZW0pLCAicmVzaXplIiwgW10pCgl9LAoJX3BsdWc6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvZmlsZSkKCQljYW4ub25pbXBvcnQucGx1ZyhjYW4sIGl0ZW0uZXh0cmEsIGNhbi51aS5wcm9maWxlLCBmdW5jdGlvbihzdWIpIHsgaXRlbS5fcGx1Z2luID0gc3ViCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkqMy80KQoJCX0pCgl9LAoJZ3JvdzogZnVuY3Rpb24oY2FuLCBtc2csIHR5cGUpIHsgdmFyIHRlcm0gPSBjYW4udGVybVttc2cuT3B0aW9uKG1kYi5IQVNIKV07IGlmICghdGVybSkgeyByZXR1cm4gfQoJCXN3aXRjaCAodHlwZSkgewoJCQljYXNlICJkYXRhIjogdGVybS53cml0ZShhdG9iKG1zZy5PcHRpb24obWRiLlRFWFQpKSk7IGJyZWFrCgkJCWNhc2UgImV4aXQiOiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0ZXJtLl90YXJnZXQpOyBicmVhawoJCX0KCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogW21kYi5DUkVBVEUsIGxleC5TUExJVCwgbWRiLlBSVU5FU10sCglfdHJhbnM6IHtzcGxpdDogIuWIhuWxjyIsIHRoZW1lOiAi5Li76aKYIn0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCAiYmFja2dyb3VuZCIsIGN0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihhcmdzLCBkYXRhKSB7CgkJCWNhbi5vbmltcG9ydC5fY3JlYXRlKGNhbiwgYXJncywgZGF0YSkKCQl9KQoJfSwKCXNwbGl0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7bmFtZTogInRlcm0iLCBucm93OiAyLCBuY29sOiAyfSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCAibnJvdyIsICJuY29sIl0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbZGF0YV0sIGZ1bmN0aW9uKGV2ZW50KSB7IGlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRhdGEubmFtZSB9LCBjYW4udWkuY29udGVudCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5jb3JlLkxpc3QocGFyc2VJbnQoZGF0YS5ucm93KSwgZnVuY3Rpb24obnJvdykgeyB2YXIgcm93ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dmlldzogInJvdyIsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpL2RhdGEubnJvd319XSkuZmlyc3QKCQkJCQljYW4uY29yZS5MaXN0KHBhcnNlSW50KGRhdGEubmNvbCksIGZ1bmN0aW9uKG5jb2wpIHsgdmFyIGNvbCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHJvdywgW3t2aWV3OiAiY29sIiwgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvZGF0YS5ucm93LCB3aWR0aDogY2FuLkNvbmZXaWR0aCgpL2RhdGEubmNvbC0yfX1dKS5maXJzdAoJCQkJCQljYW4ucnVuQWN0aW9uKHt9LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsIGRhdGEudHlwZSwgbWRiLk5BTUUsIGNhbi5jb3JlLktleXMoZGF0YS5uYW1lLCBucm93LCBuY29sKV0sIGZ1bmN0aW9uKG1zZykgeyBjYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCB7aGFzaDogbXNnLlJlc3VsdCgpfSwgY29sKSB9KQoJCQkJCX0pCgkJCQl9KQoJCQl9KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFsic2hhcmUiLCAicGx1Z2luIiwgInRoZW1lIiwgInJlbmFtZSIsICJyZW1vdmUiXSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgbXNnLk9wdGlvbigiYXJncyIsICIiKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBpdGVtLm5hbWV9LCB7bmFtZTogY2hhdC5UT1BJQywgdmFsdWVzOiBbY2xpLldISVRFLCBjbGkuQkxBQ0tdfV0sIFsKCQkJbWRiLk5BTUUsIGNhbi5faW5kZXgsIG1kYi5URVhULCBKU09OLnN0cmluZ2lmeShbY2FuLnN1cC5faGFzaF0pLAoJCV0pCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgYXJncyksIGNhbi5iYXNlLkNvcHkoaXRlbS5leHRyYSwgZGF0YSksIGNhbi5vbmltcG9ydC5fcGx1ZyhjYW4sIGl0ZW0pCgkJfSkKCX0sCgl0aGVtZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWyJiYWNrZ3JvdW5kIiwgInNlbGVjdGlvbiIsICJjdXJzb3IiLCAiZm9yZWdyb3VuZCJdLCBmdW5jdGlvbihhcmdzLCBkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIGFyZ3MpLCBjYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBpdGVtLl90ZXJtLnNldE9wdGlvbigidGhlbWUiLCBkYXRhKQoJCX0pCgl9LAoJcmVuYW1lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUVdLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgYXJncyksIGl0ZW0ubmFtZSA9IGl0ZW0uX2l0ZW0uaW5uZXJUZXh0ID0gaXRlbS5fdGFicy5pbm5lclRleHQgPSBhcmdzWzFdCgkJfSkKCX0sCglyZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbikKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogW21kYi5UT1RBTCwgbWRiLlRZUEUsICJiYWNrZ3JvdW5kIiwgInJvd3MiLCAiY29scyIsICJjdXJzb3JZIiwgImN1cnNvclgiLCBjdHguSU5ERVhdLAoJdGVybTogZnVuY3Rpb24oY2FuLCB0ZXJtKSB7IGl0ZW0gPSB0ZXJtLl9pdGVtCgkJY2FuLmNvcmUuTGlzdChjYW4ub25leHBvcnQubGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCWNhbi5TdGF0dXMoa2V5LCBjYW4uYmFzZS5nZXRWYWxpZChpdGVtW2tleV0sIGl0ZW0uZXh0cmFba2V5XSwgdGVybVtrZXldLCB0ZXJtLmJ1ZmZlci5hY3RpdmVba2V5XSwgIiIpKQoJCX0pCgkJY2FuLlN0YXR1cyhtZGIuVE9UQUwsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLkRJVl9JVEVNKS5sZW5ndGgpCgkJY2FuLlN0YXR1cyhtZGIuVFlQRSwgaXRlbVttZGIuVFlQRV18fCIiKQoJCXJldHVybiB0ZXJtCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvdGVhbS9wbGFuLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5wcm9maWxlKGNhbiksIGNhbi5vbmltcG9ydFtjYW4uT3B0aW9uKCJzY2FsZSIpfHwid2VlayJdKGNhbiwgbXNnKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0KQoJCWNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQkhY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCSFjYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHRydWUpCgl9LAoJX2NvbnRlbnQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KSB7CgkJdmFyIGhhc2ggPSB7fTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgayA9IGtleShjYW4uYmFzZS5EYXRlKHZhbHVlLmJlZ2luX3RpbWUpKTsgaGFzaFtrXSA9IChoYXNoW2tdfHxbXSkuY29uY2F0KFt2YWx1ZV0pIH0pCgoJCWNhbi5zdXAudGFzayAmJiAoY2FuLnN1cC50YXNrLl90YXJnZXQgPSBudWxsKQoJCXZhciBiZWdpbl90aW1lID0gY2FuLmJhc2UuRGF0ZShjYW4uT3B0aW9uKCJiZWdpbl90aW1lIikpCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaG91ciwgcm93KSB7CgkJCXJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogY2FuLmNvcmUuTGlzdChoZWFkLCBmdW5jdGlvbih3ZWVrLCBjb2wpIHsKCQkJCWlmIChyb3cgPT0gMCkgeyByZXR1cm4ge3RleHQ6IFtjYW4udXNlci50cmFucyhjYW4sIHdlZWspLCBodG1sLlRIXX0gfQoJCQkJaWYgKGNvbCA9PSAwKSB7IHJldHVybiB7dGV4dDogW2hvdXIsIGh0bWwuVERdfSB9CgkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll90YXNrKGNhbiwgbXNnLCBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpLCBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpKQoJCQl9KX0KCQl9KSB9XSksIGNhbi5TdGF0dXMobWRiLkNPVU5ULCBtc2cuTGVuZ3RoKCkpCgoJCW1zZy5MZW5ndGgoKSA+IDAgJiYgY2FuLnN1cC50YXNrICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQl2YXIgdGFyZ2V0ID0gY2FuLnN1cC50YXNrLl90YXJnZXR8fGNhbi50YXNrLl90YXJnZXQ7IGNhbi5zdXAudGFzayA9IG51bGwsIHRhcmdldCAmJiB0YXJnZXQuY2xpY2soKQoJCX0pCgl9LAoJX3Rhc2s6IGZ1bmN0aW9uKGNhbiwgbXNnLCBsaXN0LCB0aW1lKSB7IHJldHVybiB7dGV4dDogWyIiLCBodG1sLlREXSwKCQlvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uaW5zZXJ0VGFzayhldmVudCwgY2FuLCB0aW1lK2Nhbi5iYXNlLlRpbWUobnVsbCwgIiV5LSVtLSVkICVIOiVNOiVTIikuc2xpY2UodGltZS5sZW5ndGgpKQoJCX0sCgkJb25kcm9wOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJY2FuLmRyb3AoZXZlbnQsIGV2ZW50LnRhcmdldCwgdGltZSkKCQl9LAoJCW9uZHJhZ292ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5URCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIGl0ZW0sICJvdmVyIiwgZXZlbnQudGFyZ2V0ID09IGl0ZW0pCgkJCX0pCgkJfSwKCQlsaXN0OiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHRhc2spIHsKCQkJcmV0dXJuIGNhbi5iYXNlLmlzU3RyaW5nKHRhc2spPyB7dGV4dDogW3Rhc2ssIGh0bWwuRElWLCAiZGF0ZSJdfToge3RleHQ6IFtjYW4ub25leHBvcnRbY2FuLkFjdGlvbigidmlldyIpfHwidGV4dCJdKGNhbiwgdGFzayksIGh0bWwuRElWLCBjYW4ub25leHBvcnQuc3R5bGUoY2FuLCB0YXNrKV0sCgkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDsgY2FuLmRyb3AgPSBmdW5jdGlvbihldmVudCwgdGQsIHRpbWUpIHsgdGQuYXBwZW5kKHRhcmdldCkKCQkJCQljYW4ub25hY3Rpb24ubW9kaWZ5VGFzayhldmVudCwgY2FuLCB0YXNrLCAiYmVnaW5fdGltZSIsIHRpbWUrdGFzay5iZWdpbl90aW1lLnNsaWNlKHRpbWUubGVuZ3RoKSwgdGFzay5iZWdpbl90aW1lKQoJCQkJfSB9LCBkcmFnZ2FibGU6IHRpbWUgIT0gdW5kZWZpbmVkLCB0aXRsZTogY2FuLm9uZXhwb3J0LnRpdGxlKGNhbiwgdGFzayksIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCQl2YXIgaXRlbSA9IGNhbi5vbmltcG9ydC5pdGVtKGNhbiwge25pY2s6IHRhc2submFtZSsiOiIrdGFzay50ZXh0fSwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEQsIHRhcmdldC5wYXJlbnROb2RlKSwgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgdGFzaykKCQkJCQl9KSB9LCBudWxsLCBjYW4udWkucHJvamVjdCk7IHRhc2suX3RhcmdldCA9IHRhcmdldCwgdGFyZ2V0Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyBpdGVtLmNsaWNrKCkgfQoJCQkJCWNhbi50YXNrID0gY2FuLnRhc2t8fHRhc2ssIGNhbi5zdXAudGFzayA9IGNhbi5zdXAudGFza3x8dGFzaywgY2FuLnN1cC50YXNrLnpvbmUgPT0gdGFzay56b25lICYmIGNhbi5zdXAudGFzay5pZCA9PSB0YXNrLmlkICYmIChjYW4uc3VwLnRhc2suX3RhcmdldCA9IHRhcmdldCkKCQkJCX0sCgkJCX0KCQl9KSwKCX0gfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBjYW4uc3VwLnRhc2sgPSB0YXNrLCBjYW4uU3RhdHVzKHRhc2spLCBbdGFzay5wb2QsIHRhc2suem9uZSwgdGFzay5pZF0uam9pbihpY2UuUFQpIH0sIGNhbi51aS5wcm9maWxlLCBjYW4udWkuZGlzcGxheSkpIHsgcmV0dXJuIH0KCgkJdGFzay5leHRyYSAmJiBjYW4uY29yZS5JdGVtKGNhbi5iYXNlLk9iaih0YXNrLmV4dHJhKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB0YXNrWyJleHRyYS4iK2tleV0gPSB2YWx1ZSB9KSwgZGVsZXRlKHRhc2suZXh0cmEpCgkJdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi51aS5wcm9maWxlLCBbe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbe3RoOiBbbWRiLktFWSwgbWRiLlZBTFVFXX1dfV0pLmZpcnN0CgkJY2FuLmNvcmUuSXRlbSh0YXNrLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGtleSAhPSAiX3RhcmdldCIgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsIFt7CgkJCXRkOiBba2V5LCBrZXkgPT0gaWNlLlBPRCAmJiB2YWx1ZSAhPSAiIj8gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiB2YWx1ZX0pLCB2YWx1ZSk6IHZhbHVlXSwKCQkJb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIGV2ZW50LnRhcmdldCkgJiYgZXZlbnQudGFyZ2V0LnR5cGUgPT0gaHRtbC5CVVRUT04pIHsKCQkJCWNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHRhc2spLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdLCBmdW5jdGlvbihtc2cpIHsgY2FuLlVwZGF0ZSgpIH0pCgkJCX0gfSwKCQkJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KCkKCQkJCXN3aXRjaCAoa2V5KSB7CgkJCQkJY2FzZSAiem9uZSI6CgkJCQkJY2FzZSAiaWQiOgoJCQkJCQlyZXR1cm4KCQkJCQljYXNlICJsZXZlbCI6CgkJCQkJY2FzZSAic2NvcmUiOgoJCQkJCQltc2cuUHVzaChrZXksICIxIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiMiIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjMiKQoJCQkJCQltc2cuUHVzaChrZXksICI0IikKCQkJCQkJbXNnLlB1c2goa2V5LCAiNSIpCgkJCQkJCWJyZWFrCgkJCQkJY2FzZSAic3RhdHVzIjoKCQkJCQkJbXNnLlB1c2goa2V5LCAicHJlcGFyZSIpCgkJCQkJCW1zZy5QdXNoKGtleSwgInByb2Nlc3MiKQoJCQkJCQltc2cuUHVzaChrZXksICJmaW5pc2giKQoJCQkJCQltc2cuUHVzaChrZXksICJjYW5jZWwiKQoJCQkJCQlicmVhawoJCQkJfQoJCQkJY2FuLm9ubW90aW9uLm1vZGlmeShjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSkgewoJCQkJCWNhbi5vbmFjdGlvbi5tb2RpZnlUYXNrKGV2ZW50LCBjYW4sIHRhc2ssIGtleSwgdmFsdWUpCgkJCQl9LCB7bmFtZToga2V5LCBhY3Rpb246IGtleS5pbmRleE9mKG1kYi5USU1FKSA+IDA/ICJkYXRlIjogImtleSIsIG1zZzogbXNnLCBtb2RlOiAic2ltcGxlIn0pCgkJCX0sCgkJfV0pIH0pLCBjYW4ub25pbXBvcnQuX2Rpc3BsYXkoY2FuLCB0YXNrKQoJfSwKCV9kaXNwbGF5OiBmdW5jdGlvbihjYW4sIHRhc2spIHsgaWYgKCF0YXNrWyJleHRyYS5jbWQiXSkgeyByZXR1cm4gfQoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogInBsdWciLCBjdHg6IHRhc2tbImV4dHJhLmN0eCJdLCBjbWQ6IHRhc2tbImV4dHJhLmNtZCJdLCBhcmc6IHRhc2tbImV4dHJhLmFyZyJdfSwgZnVuY3Rpb24oc3ViLCBtZXRhKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBraXQuRGljdCgidGFzay5wb2QiLCB0YXNrWyJwb2QiXSwgInRhc2suem9uZSIsIHRhc2suem9uZSwgInRhc2suaWQiLCB0YXNrLmlkKSkKCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIFt0YXNrW21kYi5aT05FXSwgdGFza1ttZGIuSURdXS5jb25jYXQoY21kcyksIGNiKQoJCQl9CgkJfSwgY2FuLnVpLmRpc3BsYXkpCgl9LAoKCWRheTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IFsiaG91ciIsICJ0YXNrIl0KCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDc7IGkgPCAyNDsgaSsrKSB7IGxpc3QucHVzaChjYW4uYmFzZS5OdW1iZXIoaSwgMikpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLk51bWJlcih0aW1lLmdldEhvdXJzKCksIDIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbbGlzdFtyb3ddXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKGJlZ2luX3RpbWUsICIleS0lbS0lZCAiKStsaXN0W3Jvd10gfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAoJd2VlazogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IGNhbi5vbmV4cG9ydC5oZWFkKGNhbiwgImhvdXIiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gNzsgaSA8IDI0OyBpKyspIHsgbGlzdC5wdXNoKGNhbi5iYXNlLk51bWJlcihpLCAyKSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gdGltZS5nZXREYXkoKSsiICIrY2FuLmJhc2UuTnVtYmVyKHRpbWUuZ2V0SG91cnMoKSwgMikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtjb2wtMSsiICIrbGlzdFtyb3ddXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLWJlZ2luX3RpbWUuZ2V0RGF5KCkrY29sLTEpLCAiJXktJW0tJWQgIikrbGlzdFtyb3ddIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCW1vbnRoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gY2FuLm9uZXhwb3J0LmhlYWQoY2FuLCAib3JkZXIiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDY7IGkrKykgeyBsaXN0LnB1c2goaSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAiJXktJW0tJWQiKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7CgkJCXZhciBiZWdpbiA9IGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLShiZWdpbl90aW1lLmdldERhdGUoKS0xKSkKCQkJdmFyIGxhc3QgPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSktYmVnaW4uZ2V0RGF5KCkpCgkJCXZhciBkYXkgPSBjYW4uYmFzZS5UaW1lQWRkKGxhc3QsIChyb3ctMSkqNytjb2wpCgkJCXJldHVybiBbZGF5LmdldERhdGUoKSsiIl0uY29uY2F0KGhhc2hba2V5KGRheSldfHxbXSkKCQl9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7CgkJCXZhciBiZWdpbiA9IGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLShiZWdpbl90aW1lLmdldERhdGUoKS0xKSkKCQkJdmFyIGxhc3QgPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSktYmVnaW4uZ2V0RGF5KCkpCgkJCXZhciBkYXkgPSBjYW4uYmFzZS5UaW1lQWRkKGxhc3QsIChyb3ctMSkqNytjb2wpCgkJCXJldHVybiBrZXkoZGF5KQoJCX0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCXllYXI6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBjYW4ub25leHBvcnQuaGVhZChjYW4sICJtb250aCIpCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSAxOyBpIDwgMTM7IGkrKykgeyBsaXN0LnB1c2goaSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAiJXktJW0gIikrdGltZS5nZXREYXkoKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2JlZ2luX3RpbWUuZ2V0RnVsbFllYXIoKSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMikrIiAiKyhjb2wtMSldIH0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsgcmV0dXJuIGJlZ2luX3RpbWUuZ2V0RnVsbFllYXIoKSsiLSIrY2FuLmJhc2UuTnVtYmVyKGxpc3Rbcm93XSwgMikgfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAoJbG9uZzogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgYmVnaW5fdGltZSA9IGNhbi5iYXNlLkRhdGUoY2FuLmJhc2UuVGltZShjYW4uT3B0aW9uKCJiZWdpbl90aW1lIiksICIleS0lbS0lZCAlSDolTTolUyIpKQoJCXZhciBiZWdpbiA9IGJlZ2luX3RpbWUuZ2V0RnVsbFllYXIoKSAtIDUKCgkJdmFyIGhlYWQgPSBbIm1vbnRoIl07IGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgeyBoZWFkLnB1c2goYmVnaW4raSkgfQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtIikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtiZWdpbitjb2wtMSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMildIH0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsgcmV0dXJuIGJlZ2luK2NvbC0xKyItIitjYW4uYmFzZS5OdW1iZXIocm93LCAyKSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu25Lqk5LqSIiwgbGlzdDogWwoJCSJpbnNlcnQiLCAiZXhwb3J0IiwgImltcG9ydCIsCgkJWyJsZXZlbCIsICJhbGwiLCAibDEiLCAibDIiLCAibDMiLCAibDQiLCAibDUiXSwKCQlbInN0YXR1cyIsICJhbGwiLCAicHJlcGFyZSIsICJwcm9jZXNzIiwgImNhbmNlbCIsICJmaW5pc2giXSwKCQlbInNjb3JlIiwgImFsbCIsICJzMSIsICJzMiIsICJzMyIsICJzNCIsICJzNSJdLAoJCVsidmlldyIsICIiLCAibmFtZSIsICJ0ZXh0IiwgImxldmVsIiwgInNjb3JlIl0sCgldLAoJX3RyYW5zOiB7InRhc2siOiAi5Lu75YqhIiwgImhvdXIiOiAi5pe26Ze0IiwgIm1vbnRoIjogIuaciOS7vSJ9LAoJaW5zZXJ0VGFzazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGltZSkgeyB2YXIgbXNnID0gY2FuLnN1cC5yZXF1ZXN0KGV2ZW50LCB7YmVnaW5fdGltZTogdGltZX0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBtZGIuSU5TRVJUXSksIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLklOU0VSVCwgWyJ6b25lIiwgYXJnc1sxXSwgImJlZ2luX3RpbWUiLCB0aW1lXS5jb25jYXQoYXJncykpCgkJfSkKCX0sCgltb2RpZnlUYXNrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXNrLCBrZXksIHZhbHVlKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwgdGFzayksIG1kYi5NT0RJRlksIFtrZXksIHZhbHVlLCB0YXNrW2tleV1dKQoJfSwKCglfZmlsdGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IHZhciBjb3VudCA9IDAKCQlpZiAodmFsdWUgPT0gImFsbCIpIHsKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuRElWX0lURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLkhJREUpLCBjb3VudCsrCgkJCX0pCgkJfSBlbHNlIHsKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuRElWX0lURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCBodG1sLkhJREUpCgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCB2YWx1ZSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLkhJREUpLCBjb3VudCsrCgkJCX0pCgkJfQoJCWNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5TdGF0dXMobWRiLkNPVU5ULCBjb3VudCkKCX0sCglsZXZlbDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJc3RhdHVzOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fZmlsdGVyKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIH0sCglzY29yZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJdmlldzogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCkKCQljYW4ub25pbXBvcnRbY2FuLk9wdGlvbigic2NhbGUiKV0oY2FuLCBjYW4uX21zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogW21kYi5DT1VOVCwgImJlZ2luX3RpbWUiLCBtZGIuWk9ORSwgbWRiLklELCBtZGIuVFlQRSwgbWRiLk5BTUUsIG1kYi5URVhUXSwKCW5hbWU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gdGFzay5uYW1lIH0sCgl0ZXh0OiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIHRhc2submFtZSsiOiAiKyh0YXNrLnRleHR8fCIiKSB9LAoJbGV2ZWw6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gImwtIisodGFzay5sZXZlbHx8MykrIjogIisodGFzay5uYW1lfHwiIikgfSwKCXNjb3JlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuICJzLSIrKHRhc2subGV2ZWx8fDMpKyI6ICIrKHRhc2submFtZXx8IiIpIH0sCgl0aXRsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiB0YXNrLnpvbmUrIjogIisodGFzay50eXBlfHwiIikgfSwKCXN0eWxlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIFtodG1sLklURU0sIHRhc2suc3RhdHVzLCBtZGIuSUQrdGFzay5pZCwgImwiKyh0YXNrLmxldmVsfHwiIiksICJzIisodGFzay5zY29yZXx8IiIpXS5qb2luKGljZS5TUCkgfSwKCWhlYWQ6IGZ1bmN0aW9uKGNhbiwgc2NhbGUpIHsKCQlzd2l0Y2ggKHNjYWxlKSB7CgkJCWNhc2UgInllYXIiOgoJCQljYXNlICJsb25nIjoKCQkJCXJldHVybgoJCX0KCQlyZXR1cm4gW3NjYWxlXS5jb25jYXQoY2FuLnVzZXIuaW5mby5sYW5ndWFnZSA9PSAiZW4iPyBbIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdOiBbIuWRqOaXpSIsICLlkajkuIAiLCAi5ZGo5LqMIiwgIuWRqOS4iSIsICLlkajlm5siLCAi5ZGo5LqUIiwgIuWRqOWFrSJdKTsKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RhdGEuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQuZGlzcGxheShjYW4pCgkJY2FuLnRhYmxlID0gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIG9uY29udGV4dG1lbnU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBmdW5jdGlvbihldiwgY21kLCBtZXRhKSB7CgkJCQkJdmFyIGNiID0gbWV0YVtjbWRdOyBjYiAmJiBjYihldmVudCwgY2FuLCBjbWQsIHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKQoJCQkJfSkKCQkJfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWtleSA9PSBuZnMuUEFUSCAmJiBjYW4ucnVuKGV2ZW50LCBbY2FuLk9wdGlvbihuZnMuUEFUSCwgdmFsdWUpXSkKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLmVkaXRhYmxlKGNhbiwgZXZlbnQudGFyZ2V0LCB0cnVlKQoJCQl9fQoJCX0sIGNhbi51aS5jb250ZW50KQoKCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIG1zZy5hcHBlbmQpCgkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIue7hOS7tuiPnOWNlSIsCgki5rGC5ZKMIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgaW5kZXgpIHsKCQlyZXNbaW5kZXhdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSArIChyZXNbaW5kZXhdfHwwKTsKCX0sCgki5pyA5aSnIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgaW5kZXgpIHsKCQkJKHJlc1tpbmRleF0gPT09IHVuZGVmaW5lZCB8fCBwYXJzZUludCh0ZC5pbm5lclRleHQpID4gcGFyc2VJbnQocmVzW2luZGV4XSkpICYmIChyZXNbaW5kZXhdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSkKCX0sCgki5pyA5bCPIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgaW5kZXgpIHsKCQkocmVzW2luZGV4XSA9PT0gdW5kZWZpbmVkIHx8IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgPCBwYXJzZUludChyZXNbaW5kZXhdKSkgJiYgKHJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpKQoJfSwKCSLlubPlnYciOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBuY29sLCBjb2xzLCByb3dzLCBucm93KSB7CgkJcmVzW25jb2xdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSArIChyZXNbbmNvbF18fDApOwoJCWlmIChucm93ID09IHJvd3MubGVuZ3RoIC0gMSkgewoJCQlyZXNbbmNvbF0gPSByZXNbbmNvbF0gLyBucm93CgkJfQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbaWNlLlNBVkUsIFtpY2UuTU9ERSwgIuWFqOmAiSIsICLlnZfpgIkiLCAi5Y+N6YCJIiwgIuWkmumAiSIsICLmi5bliqgiLCAi57yW6L6RIl0sIFtpY2UuRVhFQywgIuaxguWSjCIsICLmnIDlpKciLCAi5pyA5bCPIiwgIuW5s+WdhyJdXSwKCV9jb21wdXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIG11bCA9IGh0bWwuVFIgKyAoY2FuLkFjdGlvbihpY2UuTU9ERSkgPT0gIuWFqOmAiSI/ICIiOiAiLnNlbGVjdCIpCgkJdmFyIG1ldGhvZCA9IGNhbi5vbmZpZ3VyZVtjYW4uQWN0aW9uKGljZS5FWEVDKV0sIHJlcyA9IHt9CgoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBtdWwsIGZ1bmN0aW9uKHRyLCBucm93LCByb3dzKSB7CgkJCShtdWwgIT0gaHRtbC5UUiB8fCBucm93ID4gMCkgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBuY29sLCBjb2xzKSB7CgkJCQltZXRob2QgJiYgbWV0aG9kKGV2ZW50LCBjYW4sIHJlcywgdGQsIG5jb2wsIGNvbHMsIHJvd3MsIG5yb3cpCgkJCX0pCgkJfSkKCQljYW4uY29yZS5JdGVtKHJlcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBjYW4uU3RhdHVzKGNhbi5fbXNnLmFwcGVuZFtrZXldLCB2YWx1ZXx8IiIpIH0pCgl9LAoKCXNhdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLm9uZXhwb3J0LmZpbGUoY2FuKV0pIH0sCglleGVjOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pIH0sCgoJX2ZvcmVhY2g6IGZ1bmN0aW9uKGNhbiwgYnV0dG9uLCBjYikgewoJCWJ1dHRvbiAmJiBjYW4uQWN0aW9uKGljZS5NT0RFLCBidXR0b24pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2IoaXRlbSkKCQl9KQoJfSwKCgki5YWo6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLmVkaXRhYmxlKGNhbiwgaXRlbSwgZmFsc2UpCgkJCWNhbi5wYWdlLmRyYWdnYWJsZShjYW4sIGl0ZW0sIGZhbHNlKQoJCQlpdGVtLm9ubW91c2VlbnRlciA9IG51bGwsIGl0ZW0ub25jbGljayA9IG51bGwKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgIm92ZXIiKQoJCX0pCgkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgl9LAoJIuWdl+mAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLlj43pgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCkKCQkJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJCQl9CgkJfSkKCX0sCgki5aSa6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKSB7fQoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCkKCQkJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJCQl9CgkJfSkKCX0sCgki5ouW5YqoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uWyLlhajpgIkiXShldmVudCwgY2FuLCBidXR0b24pCgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZHJhZ2dhYmxlKGNhbiwgaXRlbSwgdHJ1ZSkKCQkJaXRlbS5vbmRyYWdzdGFydCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5kcmFnID0gaXRlbSB9CgkJCWl0ZW0ub25kcmFnb3ZlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCAib3ZlciIpfQoJCQlpdGVtLm9uZHJhZ2xlYXZlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sICJvdmVyIikgfQoJCQlpdGVtLm9uZHJvcCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCkKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRBQkxFLCBmdW5jdGlvbih0YWJsZSkgewoJCQkJCXRhYmxlLmluc2VydEJlZm9yZShjYW4uZHJhZywgaXRlbSkKCQkJCX0pCgkJCX0KCQl9KQoJfSwKCSLnvJbovpEiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBpdGVtLCB0cnVlKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIue7hOS7tuivpuaDhSIsIGxpc3Q6IFsi5aSN5Yi2IiwgIuWIoOmZpCJdLAoJIuWkjeWItiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgdmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpIHsKCQl2YXIgZW5kID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnRhYmxlLCBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLl9tc2cuYXBwZW5kLCBmdW5jdGlvbihrZXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbbGluZVtrZXldLCBodG1sLlREXX0KCQl9KX1dKS50cjsgY2FuLnRhYmxlLmluc2VydEJlZm9yZShlbmQsIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWZpbGU6IGZ1bmN0aW9uKGNhbikgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBjYW4ucGFnZS5LZXlzKGh0bWwuVEgsIGh0bWwuVEQpLCBmdW5jdGlvbih0ZCkge3JldHVybiB0ZC5pbm5lckhUTUx9KS5qb2luKGljZS5GUykKCQl9KS5qb2luKGljZS5OTCkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5vbmltcG9ydC5fc2hvdyhjYW4sIG1zZyksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQljYW4ua2V5bGlzdCA9IFtdLCBjYW4ub25rZXltYXAuX2J1aWxkKGNhbikKCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5jb3JlLkl0ZW0oa2l0LkRpY3QoCgkJCQlodG1sLlNUUk9LRV9XSURUSCwgMiwgaHRtbC5TVFJPS0UsIGNsaS5ZRUxMT1csIGh0bWwuRklMTCwgY2xpLlBVUlBMRSwKCQkJCWh0bWwuRk9OVF9TSVpFLCAyNCwgaHRtbC5GT05UX0ZBTUlMWSwgaHRtbC5NT05PU1BBQ0UsCgkJCQkiZ28iLCBpY2UuUlVOLCBzdmcuU0hBUEUsIHN2Zy5SRUNULCBzdmcuR1JJRCwgMTAsCgkJCSksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgY2FuLnN2Zy5WYWx1ZShrZXksIGNhbi5BY3Rpb24oa2V5LCBjYW4uc3ZnLlZhbHVlKGtleSl8fHZhbHVlKSkgfSkKCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuTUlOX0hFSUdIVCwgODAsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS1jYW4uc3ZnLlZhbChodG1sLkhFSUdIVCktNTIpCgkJCXZhciBwaWQgPSBjYW4uT3B0aW9uKHN2Zy5QSUQpfHxjYW4uc3ZnLlZhbHVlKHN2Zy5QSUQpOyBwaWQgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgaXRlbSksIGNhbi5vbmRldGFpbC5ydW4oe3RhcmdldDogaXRlbX0sIGNhbikKCQkJfSkgfHwgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgY2FuLnN2ZykKCQl9KSAKCX0sCglfc2hvdzogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLnBvaW50ID0gW10KCQljYW4uc3ZnID0gbnVsbCwgY2FuLmdyb3VwID0gbnVsbCwgY2FuLnRlbXAgPSBudWxsLCBjYW4uY3VycmVudCA9IG51bGwKCgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGNhbi51aS5jb250ZW50LCBtc2cuUmVzdWx0KCl8fGNhbi5vbmV4cG9ydC5jb250ZW50KGNhbikpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuU1ZHLCBmdW5jdGlvbihzdmcpIHsKCQkJY2FuLnN2ZyA9IGNhbi5ncm91cCA9IGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBzdmcpLCBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgc3ZnKS5jbGljaygpCgkJCWNhbi5jb3JlLkl0ZW1DQihjYW4ub25hY3Rpb24sIGZ1bmN0aW9uKGtleSwgY2IpIHsgc3ZnW2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuKSB9IH0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHN2ZywgbWRiLkZPUkVBQ0gsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKQoJCQkJY2FuLnBhZ2UudGFnaXMoc3ZnLkcsIGl0ZW0pICYmIGl0ZW0uVmFsdWUoaHRtbC5DTEFTUykgJiYgY2FuLm9uaW1wb3J0Ll9ncm91cChjYW4sIGl0ZW0pCgkJCX0pCgkJfSkKCX0sCglfZ3JvdXA6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciBuYW1lID0gdGFyZ2V0Lkdyb3VwcygpCgkJZnVuY3Rpb24gc2hvdyhldmVudCkgeyBjYW4uZ3JvdXAgPSB0YXJnZXQKCQkJY2FuLmNvcmUuTGlzdChbaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24oa2V5KSB7CgkJCQljYW4uQWN0aW9uKGtleSwgdGFyZ2V0LlZhbHVlKGtleSl8fGNhbi5BY3Rpb24oa2V5KSkKCQkJfSkKCQl9CgkJcmV0dXJuIChuYW1lIHx8IHRhcmdldCA9PSBjYW4uc3ZnKSAmJiBjYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuYW1lOiBuYW1lfHxodG1sLlNWR30sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXNob3coZXZlbnQpLCBjYW4ub25hY3Rpb24uc2hvdyhldmVudCwgY2FuKSwgY2FuLlN0YXR1cyhzdmcuR1JPVVAsIG5hbWV8fGh0bWwuU1ZHKQoJCX0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBjYW4ub25hY3Rpb24ubWVudV9saXN0KQoJCX0sIGNhbi51aS5wcm9qZWN0KQoJfSwKCV9ibG9jazogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl0YXJnZXQub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXZhciBjYXJ0ZSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgbnVsbCwgZnVuY3Rpb24oZXYsIGJ1dHRvbiwgbWV0YSkgewoJCQkJbWV0YVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbikKCQkJfSk7IGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FydGUuX3RhcmdldCwge2xlZnQ6IGV2ZW50LmNsaWVudFgsIHRvcDogZXZlbnQuY2xpZW50WX0pCgkJfQoJCXRhcmdldC5WYWwgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCXJldHVybiBwYXJzZUludCh0YXJnZXQuVmFsdWUoa2V5LCB2YWx1ZSA9PSB1bmRlZmluZWQ/IHZhbHVlOiBwYXJzZUludCh2YWx1ZSl8fDApKXx8MAoJCX0KCQl0YXJnZXQuVmFsdWUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChrZXkpKSB7IHJldHVybiB9CgkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGNhbi5jb3JlLkl0ZW0oa2V5LCB0YXJnZXQuVmFsdWUpOyByZXR1cm4gfQoKCQkJdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCQlrZXkgPSBmaWd1cmUgJiYgZmlndXJlLmRhdGEgJiYgZmlndXJlLmRhdGEuc2l6ZSAmJiBmaWd1cmUuZGF0YS5zaXplW2tleV0gfHwga2V5CgkJCWlmIChmaWd1cmUgJiYgZmlndXJlLmRhdGEgJiYgY2FuLmJhc2UuaXNGdW5jKGZpZ3VyZS5kYXRhW2tleV0pKSB7CgkJCQlyZXR1cm4gZmlndXJlLmRhdGFba2V5XShjYW4sIHZhbHVlLCBrZXksIHRhcmdldCkKCQkJfQoKCQkJaWYgKGtleSA9PSBodG1sLklOTkVSKSB7CgkJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmICh0YXJnZXQuaW5uZXJIVE1MID0gdmFsdWUpLCB0YXJnZXQuaW5uZXJIVE1MCgkJCX0KCQkJaWYgKGtleSA9PSBpY2UuU0hJUCkgewoJCQkJcmV0dXJuIHZhbHVlICE9IHVuZGVmaW5lZCAmJiB0YXJnZXQuc2V0QXR0cmlidXRlKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKSwgY2FuLmJhc2UuT2JqKHRhcmdldC5nZXRBdHRyaWJ1dGUoa2V5KSwgW10pCgkJCX0KCQkJcmV0dXJuIHZhbHVlICE9IHVuZGVmaW5lZCAmJiB0YXJnZXQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpLCB0YXJnZXQuZ2V0QXR0cmlidXRlKGtleXx8aHRtbC5DTEFTUykKCQkJCXx8IHRhcmdldFtrZXldJiZ0YXJnZXRba2V5XS5iYXNlVmFsJiZ0YXJnZXRba2V5XS5iYXNlVmFsLnZhbHVlIHx8IHRhcmdldFtrZXldJiZ0YXJnZXRba2V5XS5iYXNlVmFsIHx8ICIiCgkJfQoJCXRhcmdldC5Hcm91cCA9IGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IHRhcmdldAoJCQl3aGlsZSAoaXRlbSkgeyBpZiAoW2h0bWwuU1ZHLCBzdmcuR10uaW5kZXhPZihpdGVtLnRhZ05hbWUpID4gLTEpIHsgcmV0dXJuIGl0ZW0gfTsgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZSB9CgkJCXJldHVybiBjYW4uc3ZnCgkJfQoJCXRhcmdldC5Hcm91cHMgPSBmdW5jdGlvbigpIHsgdmFyIGl0ZW0gPSB0YXJnZXQKCQkJdmFyIGxpc3QgPSBbXTsgd2hpbGUgKGl0ZW0gJiYgaXRlbS50YWdOYW1lICE9IGh0bWwuU1ZHKSB7CgkJCQlpdGVtLnRhZ05hbWUgPT0gc3ZnLkcgJiYgaXRlbS5WYWx1ZShodG1sLkNMQVNTKSAmJiBsaXN0LnB1c2goaXRlbS5WYWx1ZShodG1sLkNMQVNTKSksIGl0ZW0gPSBpdGVtLnBhcmVudE5vZGUKCQkJfQoJCQlyZXR1cm4gbGlzdC5yZXZlcnNlKCkuam9pbihpY2UuUFQpCgkJfQoJCXJldHVybiB0YXJnZXQKCX0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGxpc3QpIHsgY2FuLk9wdGlvbihzdmcuUElELCBjYW4ub25maWd1cmUuX3BpZChjYW4sIHRhcmdldCkpCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpIH0sIGNhbi51aS5wcm9maWxlKSkgeyByZXR1cm4gfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkucHJvZmlsZSwgW2h0bWwuQUNUSU9OLCBodG1sLk9VVFBVVF0pCgkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4ub25kZXRhaWwubGlzdCwgdWkuYWN0aW9uLCB7X2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJCWNhbi5vbmRldGFpbFtidXR0b25dKHt0YXJnZXQ6IHRhcmdldH0sIGNhbiwgYnV0dG9uKQoJCX19KQoKCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJbGlzdCA9IChsaXN0fHxbXSkuY29uY2F0KGZpZ3VyZS5kYXRhLmNvcHksIFtzdmcuWCwgc3ZnLlksIG1kYi5JTkRFWCwgY3R4LkFSR1NdKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm91dHB1dCwgW3t0eXBlOiBodG1sLlRBQkxFLCBjbGFzc05hbWU6IGh0bWwuQ09OVEVOVCwgbGlzdDogWwoJCQl7dGg6IFttZGIuS0VZLCBtZGIuVkFMVUVdfSwge3RkOiBbbWRiLlRZUEUsIHRhcmdldC50YWdOYW1lXX0sIHt0ZDogW3N2Zy5QSUQsIHRhcmdldC5WYWx1ZShzdmcuUElEKV19LAoJCV0uY29uY2F0KGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCXJldHVybiBrZXkgPSBmaWd1cmUuZGF0YS5zaXplW2tleV18fGtleSwge3RkOiBba2V5LCB0YXJnZXQuVmFsdWUoa2V5KV0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25tb3Rpb24ubW9kaWZ5KGNhbiwgZXZlbnQudGFyZ2V0LCBmdW5jdGlvbihldmVudCwgdmFsdWUsIG9sZCkgewoJCQkJCXRhcmdldC5WYWx1ZShrZXksIHZhbHVlKSwgY2FuLm9uZmlndXJlLl9tb3ZlKGNhbiwgdGFyZ2V0KQoJCQkJfSkKCQkJfX0KCQl9KSkgfV0pCgl9LAoJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUsIGdyb3VwKSB7IC8vIHtzaGFwZSwgcG9pbnQsIHN0eWxlLCBfaW5pdH0KCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlW3ZhbHVlLnNoYXBlXSwgZGF0YSA9IGZpZ3VyZS5kcmF3KGV2ZW50LCBjYW4sIHZhbHVlLnBvaW50LCB2YWx1ZS5zdHlsZSkKCQljYW4uY29yZS5JdGVtKHZhbHVlLnN0eWxlLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGRhdGFba2V5XSA9IHZhbHVlIH0pCgkJdmFyIGl0ZW0gPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBmaWd1cmUuZGF0YS5uYW1lfHx2YWx1ZS5zaGFwZSwgZGF0YSwgZ3JvdXB8fGNhbi5zdmd8fGNhbi5ncm91cCkKCQljYW4uY29yZS5JdGVtQ0IodmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgaXRlbVtrZXldID0gY2IgfSkKCQkvLyByZXR1cm4gY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pLCBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pLCB2YWx1ZS5faW5pdCAmJiB2YWx1ZS5faW5pdChpdGVtKSwgaXRlbQoJCXJldHVybiBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSksIHZhbHVlLl9pbml0ICYmIHZhbHVlLl9pbml0KGl0ZW0pLCBpdGVtCgl9LAoJZ3JvdXA6IGZ1bmN0aW9uKGNhbiwgbmFtZSwgdmFsdWUsIGdyb3VwKSB7IGdyb3VwID0gZ3JvdXB8fGNhbi5zdmd8fGNhbi5ncm91cAoJCXZhciBnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHN2Zy5HKTsgZ3JvdXAuYXBwZW5kKGcpCgkJY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGcpLCBnLlZhbHVlKGh0bWwuQ0xBU1MsIG5hbWUpLCBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgZykuY2xpY2soKQoJCXJldHVybiB2YWx1ZSAmJiBnLlZhbHVlKHZhbHVlKSwgZwoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAoJX2dldDogZnVuY3Rpb24oY2FuLCBpdGVtLCBuYW1lKSB7CgkJcmV0dXJuIGNhbi5vbmZpZ3VyZVtuYW1lXXx8Y2FuLm9uZmlndXJlW2l0ZW0uZ2V0QXR0cmlidXRlKG1kYi5OQU1FKV18fGNhbi5vbmZpZ3VyZVtpdGVtLnRhZ05hbWVdCgl9LAoJX3BpZDogZnVuY3Rpb24oY2FuLCBpdGVtKSB7IGlmIChpdGVtLlZhbHVlKHN2Zy5QSUQpKSB7IHJldHVybiBpdGVtLlZhbHVlKHN2Zy5QSUQpIH0KCQl2YXIgcGlkID0gInAiK2Nhbi5zdmcuVmFsKG1kYi5DT1VOVCwgY2FuLnN2Zy5WYWwobWRiLkNPVU5UKSsxKQoJCWl0ZW0uVmFsdWUoaHRtbC5DTEFTUywgKGl0ZW0uVmFsdWUoaHRtbC5DTEFTUykraWNlLlNQK2l0ZW0uVmFsdWUoc3ZnLlBJRCwgcGlkKSkudHJpbSgpKQoJCXJldHVybiBwaWQKCX0sCglfcHVzaDogZnVuY3Rpb24oY2FuLCB0eXBlLCBkYXRhLCB0YXJnZXQpIHsKCQl2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCB0eXBlKQoJCXRhcmdldC5hcHBlbmRDaGlsZChjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSkpLCBpdGVtLlZhbHVlKGRhdGEpCgkJcmV0dXJuIGl0ZW0KCX0sCglfY29weTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJdmFyIGRhdGEgPSB7fSwgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpLCBzaXplID0gZmlndXJlLmRhdGEuc2l6ZQoJCWNhbi5jb3JlLkxpc3QoZmlndXJlLmRhdGEuY29weSwgZnVuY3Rpb24oaXRlbSkgeyBkYXRhW2l0ZW1dID0gdGFyZ2V0LlZhbHVlKGl0ZW0pIH0pCgkJZGF0YVtzaXplLnh8fHN2Zy5YXSA9IHRhcmdldC5WYWwoc2l6ZS54fHxzdmcuWCkrMTAKCQlkYXRhW3NpemUueXx8c3ZnLlldID0gdGFyZ2V0LlZhbChzaXplLnl8fHN2Zy5ZKSsxMAoJCXJldHVybiBjYW4ub25maWd1cmUuX3B1c2goY2FuLCB0YXJnZXQudGFnTmFtZSwgZGF0YSwgY2FuLmdyb3VwfHxjYW4uc3ZnKQoJfSwKCV9tb3ZlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbGlzdCkgewoJCWNhbi5jb3JlLkxpc3QobGlzdHx8dGFyZ2V0LlZhbHVlKGljZS5TSElQKSwgZnVuY3Rpb24oc2hpcCkgewoJCQlzaGlwLnRhcmdldCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtzaGlwLnBpZClbMF0KCQkJdmFyIHAgPSBjYW4ub25leHBvcnQuYW5jaG9yKHRhcmdldCwgc2hpcC5hbmNob3IsIHt9KSAKCQkJaWYgKHNoaXAud2hpY2ggPT0gMSkgewoJCQkJc2hpcC50YXJnZXQuVmFsKHN2Zy5YMSwgcC54KSwgc2hpcC50YXJnZXQuVmFsKHN2Zy5ZMSwgcC55KQoJCQl9IGVsc2UgaWYgKHNoaXAud2hpY2ggPT0gMikgewoJCQkJc2hpcC50YXJnZXQuVmFsKHN2Zy5YMiwgcC54KSwgc2hpcC50YXJnZXQuVmFsKHN2Zy5ZMiwgcC55KQoJCQl9CgkJfSkKCX0sCgoJc3ZnOiB7IC8vIDxzdmcgaGVpZ2h0PSIyMDAiIHdpZHRoPSI2MDAiIGNvdW50PSIwIiBncmlkPSIxMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9InllbGxvdyIgZmlsbD0icHVycGxlIiBmb250LXNpemU9IjI0Ii8+CgkJZGF0YToge3NpemU6IHt9LCBjb3B5OiBbXX0sCgkJc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyByZXR1cm4gY2FuLm9uZXhwb3J0Ll9zaXplKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCX0sCgl0ZXh0OiB7IC8vIDx0ZXh0IHg9IjYwIiB5PSIxMCI+aGk8dGV4dD4KCQlkYXRhOiB7cG9pbnRzOiAxLCBzaXplOiB7fSwgY29weTogW2h0bWwuSU5ORVJdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDEgfHwgZXZlbnQudHlwZSA9PSAibW91c2Vtb3ZlIikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgdGV4dCA9IHN0eWxlJiZzdHlsZS5pbm5lcnx8Y2FuLnVzZXIucHJvbXB0KG1kYi5URVhUKQoJCQlyZXR1cm4gdGV4dD8ge3g6IHAwLngsIHk6IHAwLnksIGlubmVyOiB0ZXh0fTogbnVsbAoJCX0sCgkJc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyByZXR1cm4gY2FuLm9uZXhwb3J0Ll9wb3NpdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB9Cgl9LAoJY2lyY2xlOiB7IC8vIDxjaXJjbGUgcj0iMjAiIGN4PSIyNSIgY3k9Ijc1Ii8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge2hlaWdodDogc3ZnLlIsIHdpZHRoOiBzdmcuUiwgeDogc3ZnLkNYLCB5OiBzdmcuQ1l9LCBjb3B5OiBbc3ZnLlJdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgcDEgPSBwb2ludFsxXQoJCQlyZXR1cm4ge3I6IHBhcnNlSW50KE1hdGguc3FydChNYXRoLnBvdyhwMC54LXAxLngsIDIpK01hdGgucG93KHAwLnktcDEueSwgMikpKSwgY3g6IHAwLngsIGN5OiBwMC55fQoJCX0sCgl9LAoJZWxsaXBzZTogeyAvLyA8ZWxsaXBzZSByeT0iNSIgcng9IjIwIiBjeD0iNzUiIGN5PSI3NSIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHNpemU6IHtoZWlnaHQ6IHN2Zy5SWSwgd2lkdGg6IHN2Zy5SWCwgeDogc3ZnLkNYLCB5OiBzdmcuQ1l9LCBjb3B5OiBbc3ZnLlJZLCBzdmcuUlhdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgcDEgPSBwb2ludFsxXQoJCQlyZXR1cm4ge3J5OiBNYXRoLmFicyhwMC55IC0gcDEueSksIHJ4OiBNYXRoLmFicyhwMC54IC0gcDEueCksIGN4OiBwMC54LCBjeTogcDAueX0KCQl9LAoJfSwKCXJlY3Q6IHsgLy8gPHJlY3QgaGVpZ2h0PSIzMCIgd2lkdGg9IjMwIiByeT0iMTAiIHJ4PSIxMCIgeD0iNjAiIHk9IjEwIi8+CgkJZGF0YToge3BvaW50czogMiwgcnk6IDQsIHJ4OiA0LCBzaXplOiB7fSwgY29weTogW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7CgkJCQloZWlnaHQ6IE1hdGguYWJzKHAwLnktcDEueSksIHdpZHRoOiBNYXRoLmFicyhwMC54LXAxLngpLCByeTogdGhpcy5kYXRhLnJ5LCByeDogdGhpcy5kYXRhLnJ4LAoJCQkJeDogcDAueCA+IHAxLng/IHAxLng6IHAwLngsIHk6IHAwLnkgPiBwMS55PyBwMS55OiBwMC55LAoJCQl9CgkJfSwKCQl0ZXh0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgeyByZXR1cm4gZGF0YS54ID0gdGFyZ2V0LlZhbChzdmcuWCkrdGFyZ2V0LlZhbChodG1sLldJRFRIKS8yLCBkYXRhLnkgPSB0YXJnZXQuVmFsKHN2Zy5ZKSt0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKS8yLCBkYXRhIH0sCgl9LAoJbGluZTogeyAvLyA8bGluZSB4MT0iMTAiIHkxPSI1MCIgeDI9IjExMCIgeTI9IjE1MCIgeHg9IjEwMCIgeXk9IjEwMCIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHNpemU6IHt4OiBzdmcuWDEsIHk6IHN2Zy5ZMX0sIGNvcHk6IFtzdmcuWDEsIHN2Zy5ZMSwgc3ZnLlgyLCBzdmcuWTJdfSwKCQlncmlkOiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgeyByZXR1cm4gfQoJCQl2YXIgcCA9IHBvaW50W3BvaW50Lmxlbmd0aC0xXSwgcG9zID0gY2FuLm9uZXhwb3J0LmN1cnNvcihldmVudCwgY2FuLCB0YXJnZXQpCgkJCXRhcmdldC5WYWwgJiYgY2FuLm9uZXhwb3J0LmFuY2hvcih0YXJnZXQsIHBvcywgcCkKCQkJcmV0dXJuIHAudGFyZ2V0ID0gdGFyZ2V0LCBwLmFuY2hvciA9IHBvcywgcG9pbnQKCQl9LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdLCBzaGlwID0gW10KCQkJcDAudGFyZ2V0ICYmIHAwLnRhcmdldC5WYWx1ZSAmJiBzaGlwLnB1c2goe3BpZDogcDAudGFyZ2V0LlZhbHVlKHN2Zy5QSUQpfSkKCQkJcDEudGFyZ2V0ICYmIHAxLnRhcmdldC5WYWx1ZSAmJiBzaGlwLnB1c2goe3BpZDogcDEudGFyZ2V0LlZhbHVlKHN2Zy5QSUQpfSkKCQkJcmV0dXJuIHt4MTogcDAueCwgeTE6IHAwLnksIHgyOiBwMS54LCB5MjogcDEueSwgc2hpcDogc2hpcC5sZW5ndGggPiAwPyBzaGlwOiB1bmRlZmluZWR9CgkJfSwKCQl0ZXh0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZGF0YSkgeyByZXR1cm4gZGF0YS54ID0gKHRhcmdldC5WYWwoc3ZnLlgxKSt0YXJnZXQuVmFsKHN2Zy5YMikpLzIsIGRhdGEueSA9ICh0YXJnZXQuVmFsKHN2Zy5ZMSkrdGFyZ2V0LlZhbChzdmcuWTIpKS8yLCBkYXRhIH0sCgkJc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyByZXR1cm4gIjwoIisodGFyZ2V0LlZhbChzdmcuWTIpLXRhcmdldC5WYWwoc3ZnLlkxKSkraWNlLkZTKyh0YXJnZXQuVmFsKHN2Zy5YMiktdGFyZ2V0LlZhbChzdmcuWDEpKSsiKSIrY2FuLm9uZXhwb3J0Ll9wb3NpdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB9LAoJfSwKCWJsb2NrOiB7IC8vIDxyZWN0IGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgcnk9IjEwIiByeD0iMTAiIHg9IjYwIiB5PSIxMCIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHJ5OiA0LCByeDogNCwgc2l6ZToge30sIGNvcHk6IFtodG1sLkhFSUdIVCwgaHRtbC5XSURUSCwgc3ZnLlJZLCBzdmcuUlhdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl0aGlzLl90ZW1wICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHRoaXMuX3RlbXApICYmIGRlbGV0ZSh0aGlzLl90ZW1wKQoJCQl0aGlzLl90ZW1wID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgc3ZnLkcsIHt9LCBjYW4uZ3JvdXB8fGNhbi5zdmcpCgoJCQl2YXIgcmVjdCA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIHN2Zy5SRUNULCBjYW4ub25maWd1cmUucmVjdC5kcmF3KGV2ZW50LCBjYW4sIHBvaW50KSwgdGhpcy5fdGVtcCkKCQkJaWYgKGV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSykgewoJCQkJY2FuLm9uZmlndXJlLl9waWQoY2FuLCByZWN0KSwgZGVsZXRlKHRoaXMuX3RlbXApCgkJCX0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IGNhbi5vbmZpZ3VyZS5yZWN0LnRleHQoY2FuLCBkYXRhLCB0YXJnZXQpIH0sCgl9LAp9LCBbXSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLAoJX21vZGU6IHsKCQlub3JtYWw6IHsKCQkJZ3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAicnVuIikgfSwKCQkJZ2E6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAiYXV0byIpIH0sCgkJCWdtOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oImdvIiwgIm1hbnVhbCIpIH0sCgoJCQlhZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJtb2RlIiwgImRyYXciKSB9LAoJCQlhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJtb2RlIiwgInJlc2l6ZSIpIH0sCgoJCQlzdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLlRFWFQpIH0sCgkJCXNyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuUkVDVCkgfSwKCQkJc2w6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5MSU5FKSB9LAoJCQlzYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkNJUkNMRSkgfSwKCQkJc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5FTExJUFNFKSB9LAoKCQkJY3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLlJFRCkgfSwKCQkJY2I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkJMVUUpIH0sCgkJCWNnOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5HUkVFTikgfSwKCQkJY3k6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLllFTExPVykgfSwKCQkJY3A6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLlBVUlBMRSkgfSwKCQkJY2M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkNZQU4pIH0sCgkJCWNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5CTEFDSykgfSwKCQkJY3c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLldISVRFKSB9LAoKCQkJZnI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5SRUQpIH0sCgkJCWZiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQkxVRSkgfSwKCQkJZmc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5HUkVFTikgfSwKCQkJZnk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5ZRUxMT1cpIH0sCgkJCWZwOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuUFVSUExFKSB9LAoJCQlmYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkNZQU4pIH0sCgkJCWZoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQkxBQ0spIH0sCgkJCWZ3OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuV0hJVEUpIH0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsKCQlbaHRtbC5TVFJPS0VfV0lEVEgsIDEsIDIsIDMsIDQsIDVdLAoJCVtodG1sLlNUUk9LRSwgY2xpLlJFRCwgY2xpLllFTExPVywgY2xpLkdSRUVOLCBjbGkuQ1lBTiwgY2xpLkJMVUUsIGNsaS5QVVJQTEUsIGNsaS5CTEFDSywgY2xpLldISVRFXSwKCQlbaHRtbC5GSUxMLCBjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRSwgY2xpLkJMQUNLLCBjbGkuV0hJVEUsICIjMDAwMCJdLAoJCVtodG1sLkZPTlRfU0laRSwgMTIsIDE2LCAxOCwgMjQsIDMyXSwKCgkJWyJnbyIsIGljZS5SVU4sIGljZS5BVVRPLCAibWFudWFsIl0sCgkJWyJtb2RlIiwgImRyYXciLCAicmVzaXplIl0sCgkJW3N2Zy5TSEFQRSwgc3ZnLlRFWFQsIHN2Zy5DSVJDTEUsIHN2Zy5FTExJUFNFLCBzdmcuUkVDVCwgc3ZnLkxJTkUsIHN2Zy5CTE9DS10sCgkJW3N2Zy5HUklELCAxLCAyLCAzLCA0LCA1LCAxMCwgMjBdLAoJXSwgbWVudV9saXN0OiBbaWNlLkhJREUsIGljZS5TSE9XLCBtZGIuQ1JFQVRFLCBjbGkuQ0xFQVIsIG1kYi5SRU1PVkVdLAoJX2NoYW5nZTogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5ncm91cC5WYWx1ZShrZXksIHZhbHVlKSB9LAoJInN0cm9rZS13aWR0aCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJc3Ryb2tlOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwga2V5LCB2YWx1ZSkgfSwKCWZpbGw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJImZvbnQtc2l6ZSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoKCWdvOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSkgfSwKCW1vZGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoJc2hhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoKCWVkaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCBjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4/IGljZS5BVVRPOiBpY2UuUlVOKSB9LAoJc2F2ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2NvbnRlbnQ6IGNhbi5vbmV4cG9ydC5jb250ZW50KGNhbiwgY2FuLnN2Zyl9KSwgYnV0dG9uLCBbY2FuLk9wdGlvbihuZnMuUEFUSCldKQoJfSwKCglwcm9qZWN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCkgfSwKCXByb2ZpbGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlKSB9LAoJc2hvdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uc2hvdyhjYW4sIHtpbnRlcnZhbDogMTAwLCBsZW5ndGg6IDEwfSwgbnVsbCwgY2FuLmdyb3VwKSB9LAoJaGlkZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uaGlkZShjYW4sIHtpbnRlcnZhbDogMTAwLCBsZW5ndGg6IDEwfSwgbnVsbCwgY2FuLmdyb3VwKSB9LAoJY3JlYXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3N2Zy5HUk9VUF0sIGZ1bmN0aW9uKGxpc3QpIHsgdmFyIG5hbWUgPSBsaXN0WzBdCgkJCXZhciBncm91cCA9IGNhbi5vbmltcG9ydC5ncm91cChjYW4sIG5hbWUpCgkJCWNhbi5jb3JlLkxpc3QoW2h0bWwuU1RST0tFX1dJRFRILCBodG1sLlNUUk9LRSwgaHRtbC5GSUxMLCBodG1sLkZPTlRfU0laRV0sIGZ1bmN0aW9uKG5hbWUpIHsKCQkJCWdyb3VwLlZhbHVlKG5hbWUsIGNhbi5BY3Rpb24obmFtZSkpCgkJCX0pCgkJfSkKCX0sCglyZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi5ncm91cCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLmdyb3VwKQoJfSwKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLmdyb3VwKSwgY2FuLnBvaW50ID0gW10sIGRlbGV0ZShjYW4udGVtcCkKCX0sCgoJX21vZGU6IHsKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewoJCQl2YXIgc2hhcGUgPSBjYW4uQWN0aW9uKHN2Zy5TSEFQRSksIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZVtzaGFwZV0KCQkJZmlndXJlLmdyaWQgJiYgZmlndXJlLmdyaWQoZXZlbnQsIGNhbiwgcG9pbnQpCgoJCQl2YXIgZGF0YSA9IGZpZ3VyZS5kcmF3ICYmIGZpZ3VyZS5kcmF3KGV2ZW50LCBjYW4sIHBvaW50KQoJCQl2YXIgaXRlbSA9IGRhdGEgJiYgY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgZmlndXJlLmRhdGEubmFtZXx8c2hhcGUsIGRhdGEsIGNhbi5ncm91cHx8Y2FuLnN2ZykKCQkJZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLICYmIHBvaW50Lmxlbmd0aCA9PT0gZmlndXJlLmRhdGEucG9pbnRzICYmIChjYW4ucG9pbnQgPSBbXSkgCgoJCQlpZiAoZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLICYmIGl0ZW0pIHsKCQkJCXZhciBwaWQgPSBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pOyBjYW4uY29yZS5MaXN0KHBvaW50LCBmdW5jdGlvbihwLCBpKSB7IGlmICghcC50YXJnZXQpIHsgcmV0dXJuIH0KCQkJCQlwLnRhcmdldC5WYWx1ZShpY2UuU0hJUCwgcC50YXJnZXQuVmFsdWUoaWNlLlNISVApLmNvbmNhdChbe3BpZDogcGlkLCB3aGljaDogaSsxLCBhbmNob3I6IHAuYW5jaG9yfV0pKQoJCQkJfSkKCQkJfQoJCQlyZXR1cm4gaXRlbQoJCX0sCgkJcmVzaXplOiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8ZXZlbnQudGFyZ2V0CgkJCWlmIChldmVudC50eXBlID09IGh0bWwuQ0xJQ0spIHsKCQkJCWlmIChwb2ludC5sZW5ndGggPT0gMSkgewoJCQkJCWNhbi5jdXJyZW50ID0ge3RhcmdldDogdGFyZ2V0LCBiZWdpbjogY2FuLmNvcmUuTGlzdChbdGFyZ2V0XSwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLnBhZ2UudGFnaXMoc3ZnLkcsIGl0ZW0pKSB7IHJldHVybiB9CgkJCQkJCXJldHVybiB7CgkJCQkJCQloZWlnaHQ6IGl0ZW0uVmFsKGh0bWwuSEVJR0hUKSwgd2lkdGg6IGl0ZW0uVmFsKGh0bWwuV0lEVEgpLCB4OiBpdGVtLlZhbChzdmcuWCksIHk6IGl0ZW0uVmFsKHN2Zy5ZKSwKCQkJCQkJCXRhcmdldDogaXRlbSwgc2hpcDogY2FuLmNvcmUuTGlzdChpdGVtLlZhbHVlKGljZS5TSElQKSwgZnVuY3Rpb24oc2hpcCkgewoJCQkJCQkJCXJldHVybiBzaGlwLnBpZCAmJiAoc2hpcC50YXJnZXQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrc2hpcC5waWQpWzBdKSAmJiBzaGlwCgkJCQkJCQl9KQoJCQkJCQl9CgkJCQkJfSksIHBvczogY2FuLm9uZXhwb3J0LmN1cnNvcihldmVudCwgY2FuLCB0YXJnZXQpfQoJCQkJCXJldHVybgoJCQkJfQoJCQkJcmV0dXJuIGNhbi5wb2ludCA9IFtdLCBkZWxldGUoY2FuLmN1cnJlbnQpCgkJCX0KCgkJCWNhbi5jdXJyZW50ICYmIGNhbi5jb3JlLkxpc3QoY2FuLmN1cnJlbnQuYmVnaW4sIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgaXRlbS50YXJnZXQpCgkJCQljYW4ub25leHBvcnQucmVzaXplKGV2ZW50LCBpdGVtLnRhcmdldCwgaXRlbSwgcG9pbnRbMF0sIHBvaW50WzFdLCBjYW4uY3VycmVudC5wb3MpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQraXRlbS50YXJnZXQuVmFsdWUobWRiLlRFWFQpLCBmdW5jdGlvbih0ZXh0KSB7CgkJCQkJdGV4dC5WYWx1ZShjYW4ub25leHBvcnQuX3RleHQoY2FuLCBpdGVtLnRhcmdldCwgZmlndXJlLCB7fSkpCgkJCQl9KSwgY2FuLm9uZmlndXJlLl9tb3ZlKGNhbiwgaXRlbS50YXJnZXQsIGl0ZW0uc2hpcCkKCQkJfSkKCQl9LAoJCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBldmVudC50YXJnZXQpIH0sCgl9LAoJX2F1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi5wb2ludC5sZW5ndGggPiAwKSB7IHJldHVybiB9CgkJaWYgKHRhcmdldC50YWdOYW1lID09IG1kYi5URVhUKSB7IHJldHVybiB9CgoJCXZhciBwb3MgPSBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAodGFyZ2V0ID09IGNhbi5zdmcpIHsKCQkJaWYgKHBvcyA9PSA1KSB7CgkJCQljYW4uQWN0aW9uKGljZS5NT0RFLCAiZHJhdyIpLCBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgaHRtbC5CTE9DSykKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCB7Y3Vyc29yOiAiY3Jvc3NoYWlyIn0pCgkJCX0gZWxzZSB7CgkJCQljYW4uQWN0aW9uKGljZS5NT0RFLCAicmVzaXplIikKCQkJfQoJCX0gZWxzZSB7CgkJCXN3aXRjaCAocG9zKSB7CgkJCQljYXNlIDU6CgkJCQljYXNlIDk6IGNhbi5BY3Rpb24oaWNlLk1PREUsICJyZXNpemUiKTsgYnJlYWsKCQkJCWRlZmF1bHQ6IGNhbi5BY3Rpb24oaWNlLk1PREUsICJkcmF3IiksIGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuTElORSkKCQkJfQoJCX0KCX0sCglfZmlndXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludHMsIHRhcmdldCkgewoJCWNhbi50ZW1wICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi50ZW1wKSAmJiBkZWxldGUoY2FuLnRlbXApCgkJY2FuLnRlbXAgPSBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uYWN0aW9uLl9tb2RlLCBjYW4uQWN0aW9uKGljZS5NT0RFKV0sIFtldmVudCwgY2FuLCBwb2ludHMsIHRhcmdldF0pCgkJY2FuLnBvaW50Lmxlbmd0aCA9PSAwICYmIGRlbGV0ZShjYW4udGVtcCkKCX0sCgoJb25tb3VzZW92ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZXhwb3J0Ll9zaG93KGNhbiwgZXZlbnQudGFyZ2V0KSB9LAoJb25tb3VzZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHBvaW50ID0gY2FuLm9uZXhwb3J0Ll9wb2ludChldmVudCwgY2FuKQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4pIHsgcmV0dXJuIH0KCQljYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAoY2FuLkFjdGlvbigiZ28iKSA9PSBpY2UuQVVUTykgeyBjYW4ub25hY3Rpb24uX2F1dG8oY2FuLCBldmVudC50YXJnZXQpIH0KCQljYW4ub25hY3Rpb24uX2ZpZ3VyZShldmVudCwgY2FuLCBjYW4ucG9pbnQuY29uY2F0KHBvaW50KSkKCX0sCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBwb2ludCA9IGNhbi5vbmV4cG9ydC5fcG9pbnQoZXZlbnQsIGNhbikKCQlpZiAoY2FuLkFjdGlvbigiZ28iKSA9PSBpY2UuUlVOKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkKCQkJcmV0dXJuIGV2ZW50LnNoaWZ0S2V5PyBjYW4ub25hY3Rpb24uX21vZGUucnVuKGV2ZW50LCBjYW4pOiBjYW4ub25kZXRhaWwucnVuKGV2ZW50LCBjYW4pCgkJfQoJCWNhbi5vbmFjdGlvbi5fZmlndXJlKGV2ZW50LCBjYW4sIGNhbi5wb2ludCA9IGNhbi5wb2ludC5jb25jYXQocG9pbnQpKQoJfSwKCW9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLmxhYmVsKGV2ZW50LCBjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26K+m5oOFIiwgbGlzdDogW2NsaS5TVEFSVCwgaWNlLlJVTiwgaWNlLkNPUFksIGh0bWwuTEFCRUwsIG1kYi5NT0RJRlksICJ0b2ltYWdlIiwgbWRiLlJFTU9WRV0sCglzdGFydDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdmFyIGxpc3QgPSBbdGFyZ2V0XSwgZGljdCA9IHt9CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7IHZhciBzaGlwID0gbGlzdFtpXS5WYWx1ZSgic2hpcCIpCgkJCWZvciAodmFyIGogPSAwOyBqIDwgc2hpcC5sZW5ndGg7IGorKykgeyB2YXIgcGlkID0gc2hpcFtqXS5waWQKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtwaWQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQl2YXIgcGlkID0gaXRlbS5WYWx1ZSgic2hpcCIpWzFdLnBpZAoJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtwaWQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJIWRpY3RbcGlkXSAmJiBsaXN0LnB1c2goaXRlbSksIGRpY3RbcGlkXSA9IHRydWUKCQkJCQl9KQoJCQkJfSkKCQkJfQoJCX0KCQljYW4uY29yZS5OZXh0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbm1vdGlvbi5zaG93KGNhbiwge2ludGVydmFsOiAzMDAsIGxlbmd0aDogMTB9LCBudWxsLCBpdGVtKSAKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCBpdGVtLlZhbHVlKCJpbmRleCIpKQoJCQljYW4ub25kZXRhaWwucnVuKHt0YXJnZXQ6IGl0ZW19LCBjYW4pLCBuZXh0KCkKCQl9KSB9KQoJfSwKCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJaWYgKCF0YXJnZXQuVmFsdWUoc3ZnLlBJRCkpIHsgY2FuLm9uZmlndXJlLl9waWQoY2FuLCB0YXJnZXQpIH0KCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkgfSwgY2FuLnVpLmRpc3BsYXkpKSB7IHJldHVybiB9CgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5kaXNwbGF5KSwgY2FuLnN2Zy5WYWx1ZShzdmcuUElELCB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkpCgkJdmFyIGluZGV4ID0gdGFyZ2V0LlZhbHVlKG1kYi5JTkRFWCk7IGluZGV4ICYmIGNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogY2hhdC5TVE9SWSwgaW5kZXg6IGluZGV4LCBhcmdzOiB0YXJnZXQuVmFsdWUoY3R4LkFSR1MpfSwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGluZGV4LCBjbWRzLCBjYikgfQoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hUKS00Kmh0bWwuQUNUSU9OX0hFSUdIVCksIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLl9sZWdlbmQpLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHRydWUpCgkJfSwgY2FuLnVpLmRpc3BsYXkpCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9pbWFnZShldmVudCwgY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKS5zcGxpdChpY2UuUFMpLnBvcCgpLnNwbGl0KGljZS5QVClbMF0sIGNhbi5zdmcpIH0sCgljb3B5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmZpZ3VyZS5fY29weShldmVudCwgY2FuLCBldmVudC50YXJnZXQpIH0sCglsYWJlbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdmFyIGRlZiA9IHRhcmdldC5WYWx1ZShtZGIuVEVYVCk7IGRlZiAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrZGVmLCBmdW5jdGlvbihpdGVtKSB7IGRlZiA9IGl0ZW0uVmFsdWUoaHRtbC5JTk5FUikgfSkKCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBodG1sLkxBQkVMLCB2YWx1ZTogZGVmfV0sIGZ1bmN0aW9uKGxpc3QpIHsgdmFyIHRleHQgPSBsaXN0WzBdCgkJCWlmICh0YXJnZXQudGFnTmFtZSA9PSBodG1sLlRFWFQpIHsgcmV0dXJuIHRhcmdldC5pbm5lckhUTUwgPSB0ZXh0IH0KCQkJaWYgKGRlZiAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrZGVmLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uVmFsdWUoaHRtbC5JTk5FUiwgdGV4dCkgfSkubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoKCQkJdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCQl2YXIgZGF0YSA9IGNhbi5vbmV4cG9ydC5fdGV4dChjYW4sIHRhcmdldCwgZmlndXJlLCB7aW5uZXI6IHRleHR9KQoJCQl2YXIgaXRlbSA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIGh0bWwuVEVYVCwgZGF0YSwgdGFyZ2V0Lkdyb3VwKCkpCgkJCXRhcmdldC5WYWx1ZShtZGIuVEVYVCwgY2FuLm9uZmlndXJlLl9waWQoY2FuLCBpdGVtKSkKCQl9KQoJfSwKCW1vZGlmeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBldmVudC50YXJnZXQpIH0sCglyZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QodGFyZ2V0LlZhbHVlKGljZS5TSElQKSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3ZhbHVlLnBpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJfSkKCQl9KQoJCXRhcmdldC5WYWx1ZShtZGIuVEVYVCkgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3RhcmdldC5WYWx1ZShtZGIuVEVYVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQl9KSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdGFyZ2V0KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbc3ZnLkdST1VQLCAiZmlndXJlIiwgImluZGV4IiwgInBvcyJdLAoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQlmdW5jdGlvbiBzaG93KCkgeyByZXR1cm4gY2FuLm9uZXhwb3J0Ll9zaXplKGNhbiwgdGFyZ2V0LCBmaWd1cmUpK2ljZS5TUCtjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCQljYW4uU3RhdHVzKCJmaWd1cmUiLCB0YXJnZXQudGFnTmFtZSsiOiIrdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpK2ljZS5TUCsoZmlndXJlPyAoZmlndXJlLnNob3d8fHNob3cpKGNhbiwgdGFyZ2V0LCBmaWd1cmUpOiAiIikpCgkJY2FuLlN0YXR1cyhzdmcuR1JPVVAsIHRhcmdldC5Hcm91cHMoKXx8Y2FuLmdyb3VwLkdyb3VwcygpfHxodG1sLlNWRykKCQljYW4uU3RhdHVzKCJpbmRleCIsIHRhcmdldC5WYWx1ZSgiaW5kZXgiKSkKCX0sCglfc2l6ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJcmV0dXJuICI8KCIrdGFyZ2V0LlZhbChzaXplW2h0bWwuSEVJR0hUXXx8aHRtbC5IRUlHSFQpK2ljZS5GUyt0YXJnZXQuVmFsKHNpemVbaHRtbC5XSURUSF18fGh0bWwuV0lEVEgpKyIpIgoJfSwKCV9wb3NpdGlvbjogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJcmV0dXJuICJAKCIrdGFyZ2V0LlZhbChzaXplW3N2Zy5YXXx8c3ZnLlgpK2ljZS5GUyt0YXJnZXQuVmFsKHNpemVbc3ZnLlldfHxzdmcuWSkrIikiCgl9LAoJX3RleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUsIGRhdGEpIHsgdmFyIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplfHx7fQoJCWlmIChmaWd1cmUudGV4dCkgeyByZXR1cm4gZmlndXJlLnRleHQoY2FuLCBkYXRhLCB0YXJnZXQpIH0KCQlyZXR1cm4gZGF0YS54ID0gdGFyZ2V0LlZhbChzaXplW3N2Zy5YXXx8c3ZnLlgpLCBkYXRhLnkgPSB0YXJnZXQuVmFsKHNpemVbc3ZnLlldfHxzdmcuWSksIGRhdGEKCX0sCglfcG9pbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgcCA9IGNhbi5zdmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKCQl2YXIgcG9pbnQgPSB7eDogZXZlbnQuY2xpZW50WC1wLngsIHk6IGV2ZW50LmNsaWVudFktcC55fQoJCXBvaW50LnggPSBwb2ludC54IC0gcG9pbnQueCAlIHBhcnNlSW50KGNhbi5BY3Rpb24oc3ZnLkdSSUQpKQoJCXBvaW50LnkgPSBwb2ludC55IC0gcG9pbnQueSAlIHBhcnNlSW50KGNhbi5BY3Rpb24oc3ZnLkdSSUQpKQoJCXJldHVybiBjYW4uU3RhdHVzKCJwb3MiLCBwb2ludC54K2ljZS5GUytwb2ludC55KSwgcG9pbnQKCX0sCgljb250ZW50OiBmdW5jdGlvbihjYW4sIHN2ZykgewoJCXJldHVybiBbJzxzdmcgdmVydGlvbj0iMS4xIiB4bWxucz0iaHR0cHM6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiddLmNvbmNhdCgKCQkJc3ZnPyBjYW4uY29yZS5MaXN0KFtodG1sLkhFSUdIVCwgaHRtbC5XSURUSCwgbWRiLkNPVU5ULCBzdmcuUElELCBzdmcuR1JJRCwgaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJcmV0dXJuIHN2Zy5WYWx1ZShpdGVtKT8gaWNlLlNQICsgaXRlbSArICc9IicgKyBzdmcuVmFsdWUoaXRlbSkgKyAnIic6ICIiCgkJCX0pOiBbIiBoZWlnaHQ9IisoKGNhbi5Db25mSGVpZ2h0KCl8fDQ1MCktNTApKyIgd2lkdGg9IisoY2FuLkNvbmZXaWR0aCgpfHw2MDApXSkuY29uY2F0KFsnPicsIHN2Zz8gc3ZnLmlubmVySFRNTDogIiIsICI8L3N2Zz4iXSkuam9pbigiIikKCX0sCgoJY3Vyc29yOiBmdW5jdGlvbihldmVudCwgY2FuLCBpdGVtLCBzaG93KSB7CgkJdmFyIHAgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJdmFyIHEgPSB7eDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WX0KCgkJdmFyIHBvcyA9IDUsIG1hcmdpbiA9IDIwCgkJdmFyIHkgPSAocS55LXAueSkvcC5oZWlnaHQKCQlpZiAoeSA8IDAuMiAmJiBxLnktcC55IDwgbWFyZ2luKSB7CgkJCXBvcyAtPSAzCgkJfSBlbHNlIGlmICh5ID4gMC44ICYmIHEueS1wLnktcC5oZWlnaHQgPiAtbWFyZ2luKSB7CgkJCXBvcyArPSAzCgkJfQoJCXZhciB4ID0gKHEueC1wLngpL3Aud2lkdGgKCQlpZiAoeCA8IDAuMiAmJiBxLngtcC54IDwgbWFyZ2luKSB7CgkJCXBvcyAtPSAxCgkJfSBlbHNlIGlmICh4ID4gMC44ICYmIHEueC1wLngtIHAud2lkdGggPiAtbWFyZ2luKSB7CgkJCXBvcyArPSAxCgkJfQoKCQlyZXR1cm4gKHNob3d8fGNhbi5zdmcpLnN0eWxlLmN1cnNvciA9IFsKCQkJIm53LXJlc2l6ZSIsICJuLXJlc2l6ZSIsICJuZS1yZXNpemUiLAoJCQkidy1yZXNpemUiLCAibW92ZSIsICJlLXJlc2l6ZSIsCgkJCSJzdy1yZXNpemUiLCAicy1yZXNpemUiLCAic2UtcmVzaXplIiwKCQldW3Bvcy0xXSwgcG9zCgl9LAoJYW5jaG9yOiBmdW5jdGlvbih0YXJnZXQsIHBvcywgcG9pbnQpIHsKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDE6CgkJCWNhc2UgMjoKCQkJY2FzZSAzOgoJCQkJcG9pbnQueSA9IHRhcmdldC5WYWwoc3ZnLlkpCgkJCQlicmVhawoJCQljYXNlIDQ6CgkJCWNhc2UgNToKCQkJY2FzZSA2OgoJCQkJcG9pbnQueSA9IHRhcmdldC5WYWwoc3ZnLlkpICsgdGFyZ2V0LlZhbChodG1sLkhFSUdIVCkgLyAyCgkJCQlicmVhawoJCQljYXNlIDc6CgkJCWNhc2UgODoKCQkJY2FzZSA5OgoJCQkJcG9pbnQueSA9IHRhcmdldC5WYWwoc3ZnLlkpICsgdGFyZ2V0LlZhbChodG1sLkhFSUdIVCkKCQkJCWJyZWFrCgkJfQoKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDE6CgkJCWNhc2UgNDoKCQkJY2FzZSA3OgoJCQkJcG9pbnQueCA9IHRhcmdldC5WYWwoc3ZnLlgpCgkJCQlicmVhawoJCQljYXNlIDI6CgkJCWNhc2UgNToKCQkJY2FzZSA4OgoJCQkJcG9pbnQueCA9IHRhcmdldC5WYWwoc3ZnLlgpICsgdGFyZ2V0LlZhbChodG1sLldJRFRIKSAvIDIKCQkJCWJyZWFrCgkJCWNhc2UgMzoKCQkJY2FzZSA2OgoJCQljYXNlIDk6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkgKyB0YXJnZXQuVmFsKGh0bWwuV0lEVEgpCgkJCQlicmVhawoJCX0KCQlyZXR1cm4gcG9pbnQKCX0sCglyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBiZWdpbiwgcDAsIHAxLCBwb3MpIHsKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDU6CgkJCQlpdGVtLlZhbHVlKHN2Zy5YLCBiZWdpbi54ICsgcDEueCAtIHAwLngpCgkJCQlpdGVtLlZhbHVlKHN2Zy5ZLCBiZWdpbi55ICsgcDEueSAtIHAwLnkpCgkJCQlyZXR1cm4KCQl9CgoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSAyOgoJCQljYXNlIDM6CgkJCQlpdGVtLlZhbHVlKHN2Zy5ZLCBiZWdpbi55ICsgcDEueSAtIHAwLnkpCgkJCQlpdGVtLlZhbHVlKGh0bWwuSEVJR0hULCBiZWdpbi5oZWlnaHQgLSBwMS55ICsgcDAueSkKCQkJCWJyZWFrCgkJfQoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSA0OgoJCQljYXNlIDc6CgkJCQlpdGVtLlZhbHVlKHN2ZS5YLCBiZWdpbi54ICsgcDEueCAtIHAwLngpCgkJCQlpdGVtLlZhbHVlKGh0bWwuV0lEVEgsIGJlZ2luLndpZHRoIC0gcDEueCArIHAwLngpCgkJCQlicmVhawoJCX0KCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDM6CgkJCWNhc2UgNjoKCQkJY2FzZSA5OgoJCQkJaXRlbS5WYWx1ZShodG1sLldJRFRILCBiZWdpbi53aWR0aCArIHAxLnggLSBwMC54KQoJCQkJYnJlYWsKCQl9CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSA3OgoJCQljYXNlIDg6CgkJCWNhc2UgOToKCQkJCWl0ZW0uVmFsdWUoaHRtbC5IRUlHSFQsIGJlZ2luLmhlaWdodCArIHAxLnkgLSBwMC55KQoJCQkJYnJlYWsKCQl9Cgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L2RyYXcuanMiCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvaGVhcnQuanMiClZvbGNhbm9zKCJoZWFydCIsIHtoZWxwOiAi5b+D5b2iIiwKICAgIGRhdGE6IHtuYW1lOiAicGF0aCIsIHNpemU6IHt9LAogICAgICAgIGNvcHk6IFsiZCIsICJuYW1lIiwgIm1ldGEiLCAidHQiLCAieHgiLCAieXkiXSwKICAgICAgICB4OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIHR0ID0gSlNPTi5wYXJzZSh0YXJnZXQuVmFsdWUoInR0Iil8fCd7InR4IjowLCAidHkiOjB9JykKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdHQudHggPSB2YWx1ZS10YXJnZXQuVmFsKCJ4eCIpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInR0IiwgSlNPTi5zdHJpbmdpZnkodHQpKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0LlZhbCgieHgiKSt0dC50eAogICAgICAgIH0sCiAgICAgICAgeTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgIHZhciB0dCA9IEpTT04ucGFyc2UodGFyZ2V0LlZhbHVlKCJ0dCIpfHwneyJ0eCI6MCwgInR5IjowfScpCiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0dCIsIEpTT04uc3RyaW5naWZ5KHR0KSkKICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiK3R0LnR4KyIsIit0dC50eSsiKSIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5WYWwoInl5IikrdHQudHkKICAgICAgICB9LAogICAgfSwgLy8gPGhlYXJ0IGN4PSIyNSIgY3k9Ijc1IiByPSIyMCIvPgogICAgZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHtyZXR1cm59CgogICAgICAgIHZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdLCBwMiA9IHBvaW50WzJdOwogICAgICAgIHBsID0ge3g6IDIqcDAueCAtIHAxLngsIHk6MipwMC55LXAxLnl9CiAgICAgICAgdmFyIHIwID0gTWF0aC5zcXJ0KE1hdGgucG93KHAwLnggLSBwMS54LCAyKSwgTWF0aC5wb3cocDAueSAtIHAxLnksIDIpKSAvIDIKICAgICAgICB2YXIgZCA9IFsKICAgICAgICAgICAgICAgICJNIiwgcGwueCwgcGwueSwKICAgICAgICAgICAgICAgICJBIiwgcjAsIHIwLCAwLCAwLCAwLCBwMC54LCBwMC55LAogICAgICAgICAgICAgICAgIkEiLCByMCwgcjAsIDAsIDAsIDAsIHAxLngsIHAxLnksCiAgICAgICAgICAgIF0KCiAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAzKSB7CiAgICAgICAgICAgIHZhciByMSA9IE1hdGguc3FydChNYXRoLnBvdyhwMi54IC0gcDEueCwgMiksIE1hdGgucG93KHAyLnkgLSBwMS55LCAyKSkKICAgICAgICAgICAgZCA9IGQuY29uY2F0KFsKICAgICAgICAgICAgICAgICJBIiwgcjEsIHIxLCAxODAsIDAsIDAsIHAyLngsIHAyLnksCiAgICAgICAgICAgICAgICAiQSIsIHIxLCByMSwgMTgwLCAwLCAwLCBwbC54LCBwbC55LAogICAgICAgICAgICBdKQogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6ICJoZWFydCIsIGQ6IGQuam9pbigiICIpLAogICAgICAgICAgICBtZXRhOiBKU09OLnN0cmluZ2lmeShwb2ludCksCiAgICAgICAgICAgIHR0OiBKU09OLnN0cmluZ2lmeSh7dHg6IDAsIHR5OiAwfSksCiAgICAgICAgICAgIHh4OiBwMC54LCB5eTpwMS55LAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGV2ZW50LnR5cGUgPT0gImNsaWNrIiAmJiBwb2ludC5sZW5ndGggPT0gMyAmJiAoY2FuLnBvaW50ID0gW10pLCBkYXRhCiAgICB9LAogICAgdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKICAgICAgICBkYXRhLnggPSB0YXJnZXQuVmFsKCJjeCIpCiAgICAgICAgZGF0YS55ID0gdGFyZ2V0LlZhbCgiY3kiKQogICAgICAgIHJldHVybiBkYXRhCiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKICAgICAgICByZXR1cm4gImhlYXJ0ICIgKyB0YXJnZXQuVmFsdWUoInR0IikKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyIKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAogICAgcGF0aDJ2OiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54LCBwMC55KyhwMS55LXAwLnkpLzNdLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDJoOiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54KyhwMS54LXAwLngpLzMsIHAwLnldLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDogeyAvLyA8cGF0aCBkPSJNMTAgMTAgSCA5MCBWIDkwIEggMTAgWiIvPgogICAgICAgIGRhdGE6IHtzaXplOiB7fSwgY29weTogWyJkIiwgInR0IiwgInh4IiwgInl5Il0sCiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR4ID0gdmFsdWUtdGFyZ2V0LlZhbCgieHgiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ5eSIpK3R0LnR5CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsKICAgICAgICAgICAgaWYgKHN0eWxlICYmIHN0eWxlLmQpIHsgcmV0dXJuIHN0eWxlIH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7IGNhbi5fdGVtcCA9IHt9IH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCiAgICAgICAgICAgIGlmIChjYW4ua2V5cyAmJiBjYW4ua2V5cy5sZW5ndGggPiAwKSB7IHZhciBrOwogICAgICAgICAgICAgICAgayA9IGNhbi5fdGVtcFtwb2ludC5sZW5ndGgtMV0gPSBjYW4ua2V5c1swXQogICAgICAgICAgICAgICAgc3dpdGNoIChrLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjogY2FuLl90ZW1wW3BvaW50Lmxlbmd0aCsxXSA9ICIsIgogICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOiBjYW4uX3RlbXBbcG9pbnQubGVuZ3RoXSA9ICIsIjsgYnJlYWsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FuLmtleXMgPSBjYW4ua2V5cy5zbGljZSgxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2tpcCA9IDAKICAgICAgICAgICAgdmFyIGVuZCA9IGZhbHNlCiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZDogY2FuLmNvcmUuTGlzdChwb2ludCwgZnVuY3Rpb24ocCwgaSkgeyB2YXIgayA9IHAuawogICAgICAgICAgICAgICAgICAgIGlmIChpIDwgc2tpcCkge3JldHVybn0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiBrID0gIk0iOyBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBrID0gY2FuLl90ZW1wW2ldIHx8IHAuayB8fCAiTCI7IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgIGsgPSBrLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6IHJldHVybiBjYW4ucG9pbnQgPSBbXSwgY2FuLl90ZW1wID0ge30sIGsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6IHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJNIjogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkgiOiByZXR1cm4gaysiICIgKyBwLngKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiViI6IHJldHVybiBrKyIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiAwIDAgMCAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyByICsgIiAiICsgciArICIgMCAwIDAgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY2FuLnBvaW50W2ldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gY2FuLnBvaW50W2ldID0gY2FuLnBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5wb2ludFtpKzFdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC55ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hcmcgPSAiIDAgMCAwICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXAgPSBpICsgMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkgKyAiIDAgMCAwICIgKyBwb2ludFtpKzFdLnggKyAiICIgKyBwb2ludFtpKzFdLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHBvaW50W2krMl0ueCArICIgIiArIHBvaW50W2krMl0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpKzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzFdID0gcG9pbnRbaSsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsyXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZG9uZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJRIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRvbmUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuam9pbigiICIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICB9LAogICAgICAgIHRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7CiAgICAgICAgICAgIGRhdGEueCA9ICh0YXJnZXQueDEuYmFzZVZhbC52YWx1ZSArIHRhcmdldC54Mi5iYXNlVmFsLnZhbHVlKSAvIDIKICAgICAgICAgICAgZGF0YS55ID0gKHRhcmdldC55MS5iYXNlVmFsLnZhbHVlICsgdGFyZ2V0LnkyLmJhc2VWYWwudmFsdWUpIC8gMgogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIH0sCiAgICAgICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIHRhcmdldC50YWdOYW1lICsgIiAiICsgdGFyZ2V0LlZhbHVlKCJkIikgfSwKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvd2Fsa190cmFzaC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLAogICAgaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBvdXRwdXQsIGFjdGlvbiwgb3B0aW9uKSB7b3V0cHV0LmlubmVySFRNTCA9ICIiOwogICAgICAgIGlmICghbXNnLnJlc3VsdCB8fCBtc2cucmVzdWx0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZFRhYmxlKGNhbiwgbXNnLCBvdXRwdXQsIG1zZy5hcHBlbmQpOwogICAgICAgICAgICB0YWJsZS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtzd2l0Y2ggKGV2ZW50LnRhcmdldC50YWdOYW1lKSB7CiAgICAgICAgICAgICAgICBjYXNlICJURCI6CiAgICAgICAgICAgICAgICAgICAgY2FuLm9uaW1wb3J0LndoaWNoKGV2ZW50LCB0YWJsZSwgbXNnLmFwcGVuZCwgZnVuY3Rpb24oaW5kZXgsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYW4uT3B0aW9uKCJmaWxlIiwgZXZlbnQudGFyZ2V0LmlubmVySFRNTC50cmltKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5ydW4oZXZlbnQsIFtldmVudC50YXJnZXQuaW5uZXJIVE1MLnRyaW0oKV0sIGZ1bmN0aW9uKG1zZykge30pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAiVEgiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUUiI6CiAgICAgICAgICAgICAgICBjYXNlICJUQUJMRSI6CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIHJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyksIHRhYmxlOwogICAgICAgIH0KCiAgICAgICAgLy8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgYWN0aW9uLCBbe3R5cGU6ICJzY3JpcHQiLCBzcmM6ICJodHRwczovL2Nkbi5ib290Y3NzLmNvbS9lY2hhcnRzLzQuMi4wLXJjLjIvZWNoYXJ0cy5qcyJ9XSk7CiAgICAgICAgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgb3V0cHV0LCBbe2luY2x1ZGU6IFsicmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjYW4ucGFnZS5BcHBlbmQoY2FuLCBvdXRwdXQsIFt7aW5jbHVkZTogWyJyZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIG91dHB1dCwgW3t0eXBlOiAiZGl2Iiwgc3R5bGU6IHt3aWR0aDogIjYwMHB4IiwgaGVpZ2h0OiAiNDAwcHgifX1dKS5sYXN0KTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbXNnLlRhYmxlKCkKCiAgICAgICAgICAgICAgICB2YXIgeURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBiYXJEYXRhID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChkYXRhLmxlbmd0aD4xMD8gMTA6IGRhdGEubGVuZ3RoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgeURhdGEucHVzaChpICsgZGF0YVtpXS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBiYXJEYXRhLnB1c2goZGF0YVtpXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogW3sKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbXNnLk9wdGlvbigidGl0bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwgcmlnaHQ6IDI1MCwgdG9wOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjMkQzRTUzJywgZm9udFNpemU6IDE4fSwKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWUgKyI6ICIrcGFyYW1zLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2aXN1YWxNYXA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnRpbnVvdXMnLAogICAgICAgICAgICAgICAgICAgICAgICBvcmllbnQ6ICdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogODAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFsn6auYJywgJ+S9jiddLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93TGFiZWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBkYXRhWzFdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjNkZDRjZBJywgJyNGRkZENjQnLCAnI0ZGNTAwMCddCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjN0I5M0E3JwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBncmlkOiB7cmlnaHQ6IDEwLCB0b3A6IDEzNSwgYm90dG9tOiAxMDAsIHdpZHRoOiAnMjAlJ30sCiAgICAgICAgICAgICAgICAgICAgeEF4aXM6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUdhcDogMTYsCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7c2hvdzogZmFsc2UsIGxpbmVTdHlsZToge2NvbG9yOiAnI2RkZCd9fSwKICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1RpY2s6IHtzaG93OiBmYWxzZSwgbGluZVN0eWxlOiB7Y29sb3I6ICcjZGRkJ319LAogICAgICAgICAgICAgICAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNDU1QTc0JywgYWxpZ246ICdsZWZ0JywgZm9udFNpemU6IDE0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpY2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGQUFBMzknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0MTk3RkQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgPCAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2F8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2J8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeURhdGEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdlbzogewogICAgICAgICAgICAgICAgICAgICAgICBtYXA6ICdjaGluYScsIGxlZnQ6ICdsZWZ0JywgcmlnaHQ6ICcxMDAnLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge2VtcGhhc2lzOiB7c2hvdzogZmFsc2V9fSwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7ZW1waGFzaXM6IHthcmVhQ29sb3I6ICcjZmZmNDY0J319LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgICAgICByb2FtOiBmYWxzZSwgdHlwZTogJ21hcCcsIG5hbWU6ICdtYXBTZXInLAogICAgICAgICAgICAgICAgICAgICAgICBnZW9JbmRleDogMCwgbGFiZWw6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvYW06IGZhbHNlLCB0eXBlOiAnYmFyJywgbmFtZTogJ2JhclNlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbE1hcDogZmFsc2UsIGJhckdhcDogMCwgYmFyTWF4V2lkdGg6IDgsCiAgICAgICAgICAgICAgICAgICAgICAgIHpsZXZlbDogMTAwLCBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYSBjb2xvciBtYXAgYXMgeW91ciBuZWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JMaXN0ID0gW3tjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyNGRkQxMTknfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyNGRkFDNEMnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX0sIHtjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyMwMEMwRkEnfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyMyRjk1RkEnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGFJbmRleCA8IDM/IGNvbG9yTGlzdFswXTogY29sb3JMaXN0WzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJCb3JkZXJSYWRpdXM6IDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJhckRhdGEKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNoaW5hX2NoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9XX1dKTsKICAgICAgICB9XX1dKTsKICAgIH0sCiAgICB3aGljaDogZnVuY3Rpb24oZXZlbnQsIHRhYmxlLCBsaXN0LCBjYikge2lmIChldmVudC50YXJnZXQgPT0gdGFibGUpIHtyZXR1cm4gY2IoLTEsICIiKX0KICAgICAgICBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgInRyIiwgZnVuY3Rpb24odHIsIGluZGV4KSB7aWYgKGV2ZW50LnRhcmdldCA9PSB0cikge3JldHVybiBjYihpbmRleC0xLCAiIil9CiAgICAgICAgICAgIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCAidGgsdGQiLCBmdW5jdGlvbih0ZCwgb3JkZXIpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGQpIHtyZXR1cm4gY2IoaW5kZXgtMSwgbGlzdFtvcmRlcl0pfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9mZWVsLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYXRoID0gY2FuLnJlcXVlc3QoKSwgY2FuLmxpc3QgPSBbXSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCWNhbi5iYXNlLmVuZFdpdGgodmFsdWUucGF0aCwgaWNlLlBTKT8gY2FuLnBhdGguUHVzaCh2YWx1ZSk6IGNhbi5saXN0LnB1c2godmFsdWUpCgkJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQuZGlzcGxheShjYW4sIHRhcmdldCkKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBjYW4ucGF0aCwgbnVsbCwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4ub25leHBvcnQubGlzdCkKCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fG1zZy5fY21kc1sxXXx8aWNlLkFVVE8pCgkJY2FuLkFjdGlvbihodG1sLlNQRUVELCBtc2cuT3B0aW9uKGh0bWwuU1BFRUQpfHxtc2cuX2NtZHNbMl18fCIxIikKCQljYW4uQWN0aW9uKG1kYi5MSU1JVCwgbXNnLk9wdGlvbihtZGIuTElNSVQpfHxtc2cuX2NtZHNbM118fCI5IikKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgoJCWNhbi5iZWdpbiA9IHBhcnNlSW50KGNhbi5iZWdpbnx8bXNnLk9wdGlvbihjbGkuQkVHSU4pfHwiMCIpCgkJY2FuLmRpcl9yb290ID0gbXNnLk9wdGlvbihuZnMuRElSX1JPT1QpCgkJY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCX0sCglfZmlsZTogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyB2YXIgcCA9IGxvY2F0aW9uLmhyZWYuaW5kZXhPZihpY2UuSFRUUCkgPT0gMD8gIiI6ICJodHRwOi8vbG9jYWxob3N0OjkwMjAiCgkJcmV0dXJuIHBhdGguaW5kZXhPZihpY2UuSFRUUCkgPT0gMD8gcGF0aDogcCtjYW4uYmFzZS5QYXRoKCIvc2hhcmUvbG9jYWwiLCBjYW4uZGlyX3Jvb3R8fCIiLCBwYXRoKQoJfSwKCWZpbGU6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcGF0aCA9IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIHBhdGgsIGluZGV4KQoJCXZhciBjYiA9IGNhbi5vbmZpZ3VyZVtjYW4uYmFzZS5FeHQocGF0aCldfHxjYW4ub25maWd1cmVbImltYWdlIl07IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW2NiKGNhbiwgcGF0aCwgaW5kZXgpXSkKCX0sCglwYWdlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZ2luLCBsaW1pdCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuZGlzcGxheSkKCQliZWdpbiA9IHBhcnNlSW50KGJlZ2lufHxjYW4uYmVnaW4pLCBsaW1pdCA9IHBhcnNlSW50KGxpbWl0fHxjYW4uQWN0aW9uKG1kYi5MSU1JVCkpCgkJZm9yICh2YXIgaSA9IGJlZ2luOyBpIDwgYmVnaW4rbGltaXQ7IGkrKykgeyBsaXN0ICYmIGxpc3RbaV0gJiYgY2FuLm9uaW1wb3J0LmZpbGUoY2FuLCBsaXN0W2ldLnBhdGgsIGkpIH0KCQljYW4uU3RhdHVzKHtiZWdpbjogYmVnaW4sIGxpbWl0OiBsaW1pdCwgdG90YWw6IGNhbi5saXN0Lmxlbmd0aH0pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIue7hOS7tuiPnOWNlSIsCglwbmc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJanBnOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWpwZWc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJaW1hZ2U6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIHtpbWc6IHBhdGgsIGhlaWdodDogY2FuLm9uZXhwb3J0LmhlaWdodChjYW4pLAoJCW9ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKSB9LAoJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmRldGFpbC5faW5pdChjYW4sIGluZGV4KSB9LAoJfSB9LAoKCXZpZGVvOiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgdmFyIGF1dG8gPSBjYW4udXNlci5pc01vYmlsZSYmY2FuLkFjdGlvbihtZGIuTElNSVQpIT0iMSI/IGZhbHNlOiB0cnVlLCBsb29wID0gdHJ1ZSwgdG90YWwgPSAwOyBmdW5jdGlvbiBjYihldmVudCkgeyB9CgkJcmV0dXJuIHt0eXBlOiBodG1sLlZJREVPLCBzdHlsZToge2hlaWdodDogY2FuLm9uZXhwb3J0LmhlaWdodChjYW4pfSwgY2xhc3NOYW1lOiAicHJldmlldyIsCgkJCWRhdGE6IHtzcmM6IHBhdGgsIGNvbnRyb2xzOiAiY29udHJvbHMiLCBhdXRvcGxheTogYXV0bywgbG9vcDogbG9vcCwgcGxheWJhY2tSYXRlOiBwYXJzZUZsb2F0KGNhbi5BY3Rpb24oaHRtbC5TUEVFRCkpfSwKCQkJb25jb250ZXh0bWVudTogY2IsIG9ucGxheTogY2IsIG9ucGF1c2U6IGNiLCBvbmVuZGVkOiBjYiwKCQkJb25tb3VzZW92ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpIH0sCgkJCW9ubG9hZGVkbWV0YWRhdGE6IGZ1bmN0aW9uKGV2ZW50KSB7IHRvdGFsID0gZXZlbnQudGltZVN0YW1wCgkJCQlldmVudC50YXJnZXQuY3VycmVudFRpbWUgPSBjYW4uX21zZy5jdXJyZW50VGltZSB8fCAwCgkJCX0sIG9ubG9hZGVkZGF0YTogY2IsIG9udGltZXVwZGF0ZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5TdGF0dXMobmZzLkZJTEUpID09IHBhdGggJiYgY2FuLlN0YXR1cygicG9zaXRpb24iLCBjYW4ub25leHBvcnQucG9zaXRpb24oY2FuLCAoY2FuLl9tc2cuY3VycmVudFRpbWU9ZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lKS0xLCBldmVudC50YXJnZXQuZHVyYXRpb24pKQoJCQl9LAoJCX0KCX0sCgltcDQ6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKCW00djogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAoJbW92OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWwoJCVtodG1sLkhFSUdIVCwgMTAwLCAyMDAsIDQwMCwgNjAwLCA4MDAsIGljZS5BVVRPXSwKCQlbaHRtbC5TUEVFRCwgMC4xLCAwLjIsIDAuNSwgMSwgMiwgMywgNSwgMTBdLAoJCVttZGIuTElNSVQsIDEsIDMsIDYsIDksIDEyLCAxNSwgMjAsIDMwLCA1MF0sCgldLAoJcHJldjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4uYmVnaW4gPiAwKSB7CgkJCWNhbi5iZWdpbiAtPSBwYXJzZUludChjYW4uQWN0aW9uKG1kYi5MSU1JVCkpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KQoJCX0gZWxzZSB7CgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+esrOS4gOmhteS6hiIpCgkJfQoJfSwKCW5leHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmJlZ2luICsgcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSA8IGNhbi5saXN0Lmxlbmd0aCkgewoJCQljYW4uYmVnaW4gKz0gcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCQl9IGVsc2UgewoJCQljYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/mnIDlkI7kuIDpobXkuoYiKQoJCX0KCX0sCgloZWlnaHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkgfSwKCXNwZWVkOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpIH0sCglsaW1pdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KSB9LAoKCWNob29zZUltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQljYW4udXNlci5hZ2VudC5jaG9vc2VJbWFnZShmdW5jdGlvbihsaXN0KSB7IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3tpbWc6IGl0ZW0sIGhlaWdodDogMjAwfV0pCgkJfSkgfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWyLlhbPpl60iLCAi5LiL6L29IiwgIuWIoOmZpCIsICLkuIrkuIDkuKoiLCAi5LiL5LiA5LiqIiwgIuiuvue9ruWktOWDjyIsICLorr7nva7og4zmma8iLCAi5aSN5Yi26ZO+5o6lIl0sIF9pbml0OiBmdW5jdGlvbihjYW4sIGluZGV4KSB7CgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwge3R5cGU6ICJzdG9yeSBmZWVsIGZsb2F0In0sIFtdLCBmdW5jdGlvbihzdWIpIHsgY2FuLnN1YiA9IHN1YgoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBjYiwgdHJ1ZSkgfQoKCQkJc3ViLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl90YXJnZXQsIHtsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pCgkJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLldJRFRILCB3aWR0aCwgaHRtbC5IRUlHSFQsIGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJCXN1Yi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLm9uZGV0YWlsLmxpc3QsIHN1Yi5fYWN0aW9uLCBjYW4ub25kZXRhaWwpCgkJCQlzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIFsiYmVnaW4iLCAiZmlsZSJdKQoKCQkJCWNhbi5vcmRlciA9IGluZGV4LCBjYW4uc2hvdyA9IGZ1bmN0aW9uKG9yZGVyKSB7IHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtvcmRlcl0ucGF0aCkKCQkJCQl2YXIgY2IgPSBjYW4ub25maWd1cmVbY2FuLmJhc2UuRXh0KHBhdGgpXXx8Y2FuLm9uZmlndXJlWyJpbWFnZSJdCgkJCQkJCgkJCQkJc3ViLnBhZ2UuQXBwZW5kcyhzdWIsIHN1Yi5fb3V0cHV0LCBbY2FuLmJhc2UuQ29weShjYihjYW4sIHBhdGgsIGluZGV4KSwge2hlaWdodDogIiIsIHN0eWxlOiBraXQuRGljdChodG1sLk1BWF9XSURUSCwgd2lkdGgsIGh0bWwuTUFYX0hFSUdIVCwgaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUKX0pXSkKCQkJCQlzdWIuU3RhdHVzKGNsaS5CRUdJTiwgb3JkZXIrMStpY2UuUFMrY2FuLmxpc3QubGVuZ3RoKSwgc3ViLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkKCQkJCX0sIGNhbi5zaG93KGNhbi5vcmRlcikKCQkJfSkKCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCX0sCgki5YWz6ZetIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uc3ViLl90YXJnZXQpIH0sCgki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5kb3dubG9hZChjYW4sIHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgbmZzLlRSQVNILCBbY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sICLliKDpmaTmiJDlip8iKSB9LCB0cnVlKSB9LAoJIuS4iuS4gOS4qiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9yZGVyID4gMD8gY2FuLnNob3coLS1jYW4ub3JkZXIpOiBjYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/nrKzkuIDlvKDllaYhIikgfSwKCSLkuIvkuIDkuKoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vcmRlciA8IGNhbi5saXN0Lmxlbmd0aC0xPyBjYW4uc2hvdygrK2Nhbi5vcmRlcik6IGNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+acgOWQjuS4gOW8oOWVpiEiKSB9LAoJIuiuvue9ruWktOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnNldEhlYWRlcigiYXZhdGFyIiwgY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLorr7nva7og4zmma8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZXRIZWFkZXIoImJhY2tncm91bmQiLCBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuWkjeWItumTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtfcGF0aDogY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKX0sIHRydWUpKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFtjbGkuQkVHSU4sIG1kYi5MSU1JVCwgbWRiLlRPVEFMLCBuZnMuRklMRSwgInBvc2l0aW9uIl0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbikgeyB2YXIgaGVpZ2h0ID0gY2FuLkFjdGlvbihodG1sLkhFSUdIVCkKCQlyZXR1cm4gcGFyc2VJbnQoaGVpZ2h0ID09IGljZS5BVVRPPyBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKS80LCAyMDApOiBoZWlnaHQpCgl9LAoJcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHRvdGFsKSB7IHRvdGFsID0gdG90YWwgfHwgY2FuLm1heAoJCXJldHVybiBwYXJzZUludCgoaW5kZXgrMSkqMTAwL3RvdGFsKSsiJSIrIiA9ICIrKHBhcnNlSW50KGluZGV4KSsxKStpY2UuUFMrcGFyc2VJbnQodG90YWwpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQlpZiAobXNnLkxlbmd0aCgpID4gMCkgeyByZXR1cm4gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSB9CgoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCBtc2cuUmVzdWx0KCkpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCB3aWtpLklURU0sIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGRhdGEgPSBpdGVtLmRhdGFzZXR8fHt9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgY2FuLmJhc2UuT2JqKGRhdGEuc3R5bGUpKQoJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uaW1wb3J0LCBkYXRhLnR5cGVdLCBbY2FuLCBkYXRhLCBpdGVtXSkKCQl9KQoJfSwKCW5hdm1lbnU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IHZhciBuYXYgPSBjYW4uc3VwLl9uYXZtZW51CgkJbmF2ID0gbmF2fHxjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX2ZpZWxkcywgW3dpa2kuTkFWTUVOVV0pLmZpcnN0CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgbmF2KSwgY2FuLl9maWVsZHMuaW5zZXJ0QmVmb3JlKG5hdiwgY2FuLl9vdXRwdXQpCgoJCWNhbi5vbmltcG9ydC5saXN0KGNhbiwgY2FuLmJhc2UuT2JqKGRhdGEuZGF0YSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCXZhciBsaW5rID0gaXRlbS5tZXRhLmxpbmssIGxpc3QgPSBjYW4uY29yZS5TcGxpdChpdGVtLm1ldGEubGluaykKCQkJaWYgKGNhbi5jb3JlLlZhbHVlKGNhbiwgbGlzdFswXSkpIHsgcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGxpc3RbMF1dLCBsaXN0LnNsaWNlKDEpKSB9CgkJCWlmICghbGluayB8fCBsaW5rID09IGNhbi5PcHRpb24obmZzLlBBVEgpKSB7IHJldHVybiBmYWxzZSB9CgoJCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShpdGVtLm1ldGEubmFtZSk7IHJldHVybiBjYW4uT3B0aW9uKG5mcy5QQVRILCBsaW5rKSB9KSkgeyByZXR1cm4gfQoJCQlyZXR1cm4gY2FuLnN1cC5VcGRhdGUoZXZlbnQsIFtsaW5rXSkKCQl9LCBuYXYpLCBjYW4uc3VwLl9uYXZtZW51ID0gbmF2CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZykgeyAKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBuYXYsIGh0bWwuSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKyhjYW4uaXNDbWRNb2RlKCk/IG1zZy5PcHRpb24oaHRtbC5NQVJHSU5fWSk6IDApKQoJCQljYW4uQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKS1uYXYub2Zmc2V0V2lkdGgtMjEpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsCgkJCQlodG1sLkhFSUdIVCwgY2FuLnN1cC5fbmF2bWVudS5vZmZzZXRIZWlnaHQtMjAsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCksCgkJCQlodG1sLkZMT0FULCBodG1sLkxFRlQsIGh0bWwuQ0xFQVIsIGh0bWwuTk9ORSwKCQkJCWh0bWwuUEFERElORywgMTAsCgkJCSkKCQl9KQoJfSwKCXByZW1lbnU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5wYWdlLktleXMod2lraS5IMiwgd2lraS5IMyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFtpdGVtLmlubmVySFRNTCwgaHRtbC5MSSwgaXRlbS50YWdOYW1lXSwgb25jbGljazogZnVuY3Rpb24oKSB7CgkJCQlpdGVtLnNjcm9sbEludG9WaWV3KCkKCQkJfX1dKSwgaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdGFyZ2V0LnNjcm9sbEludG9WaWV3KCkgfQoJCX0pCgl9LAoJdGl0bGU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLmlzQ21kTW9kZSgpICYmIHRhcmdldC50YWdOYW1lID09ICJIMSIgJiYgY2FuLnVzZXIudGl0bGUoZGF0YS50ZXh0KQoJfSwKCXJlZmVyOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5BLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsICJyZWZlciIsIG1kYi5OQU1FLCBpdGVtLmRhdGFzZXQubmFtZSwgbWRiLlRFWFQsIGl0ZW0uaHJlZl0pCgkJCX0KCQl9KQoJfSwKCXNwYXJrOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWlmIChkYXRhW21kYi5OQU1FXSA9PSBjaGF0LkZJRUxEKSB7CgkJCWZ1bmN0aW9uIGRlZXAodGV4dCkgeyB2YXIgZCA9IDAKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykgewoJCQkJCXN3aXRjaCAodGV4dFtpXSkgewoJCQkJCQljYXNlIGljZS5UQjogZCArPSA0OyBicmVhawoJCQkJCQljYXNlIGljZS5TUDogZCsrOyBicmVhawoJCQkJCQlkZWZhdWx0OiByZXR1cm4gZAoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBkCgkJCX0KCQkJdmFyIGxpc3QgPSBbXTsgY2FuLmNvcmUuTGlzdCh0YXJnZXQuaW5uZXJUZXh0LnNwbGl0KGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgdmFyIF9kZWVwID0gZGVlcChsaW5lKQoJCQkJd2hpbGUgKGxpc3QubGVuZ3RoID4gMCkgeyBpZiAoX2RlZXAgPD0gbGlzdFtsaXN0Lmxlbmd0aC0xXS5fZGVlcCkgeyBsaXN0LnBvcCgpIH0gZWxzZSB7IGJyZWFrIH0gfQoJCQkJdmFyIGxzID0gY2FuLmNvcmUuU3BsaXQobGluZSksIGl0ZW0gPSB7X2RlZXA6IF9kZWVwLCBtZXRhOiB7aW5kZXg6IGxzWzBdLCBuYW1lOiBsc1sxXSwgYXJnczogbHMuc2xpY2UoMil9LCBsaXN0OiBbXX0KCQkJCWlmIChsaXN0Lmxlbmd0aCA+IDApIHsgbGlzdFtsaXN0Lmxlbmd0aC0xXS5saXN0LnB1c2goaXRlbSkgfSBsaXN0LnB1c2goaXRlbSkKCQkJfSkKCgkJCXZhciBmaXJzdDsgZnVuY3Rpb24gc2hvdyhpdGVtLCBpbmRleCwgdGFyZ2V0LCBvdXRwdXQpIHsKCQkJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5tZXRhLm5hbWV8fGl0ZW0ubWV0YS5pbmRleF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHZpZXcubWVudSwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQkJCWlmICh1aS5saXN0LmlubmVyVGV4dCkgeyByZXR1cm4gY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIHVpLmxpc3QpIH0KCQkJCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbmRleCB9LCBvdXRwdXQpKSB7IHJldHVybiB9CgoJCQkJCWNhbi5jb3JlLkxpc3QoaXRlbS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBpdGVtLm1ldGEsIGZ1bmN0aW9uKHN1YikgewoJCQkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaXRlbS5tZXRhLmluZGV4LCBjbWRzLCBjYikgfQoJCQkJCQkJc3ViLkNvbmZIZWlnaHQoaXRlbS5tZXRhLmhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkvMiksIHN1Yi5Db25mV2lkdGgoaXRlbS5tZXRhLndpZHRoID0gY2FuLkNvbmZXaWR0aCgpLShjYW4udXNlci5pc1dpbmRvd3M/IDE4MTogMTY1KSkKCQkJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJCQkJCX0sIG91dHB1dCkKCQkJCQl9KQoJCQkJfX0sIGh0bWwuTElTVF0pCgkJCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmxpc3QubGVuZ3RoID4gMCAmJiBzaG93KGl0ZW0sIGNhbi5jb3JlLktleXMoaW5kZXgsIGl0ZW0ubWV0YS5pbmRleCksIHVpLmxpc3QsIG91dHB1dCkgfSkKCQkJCXVpLmxpc3QuaW5uZXJUZXh0ID09ICIiICYmIChmaXJzdCA9IGZpcnN0fHx1aS5pdGVtKQoJCQl9CgoJCQl2YXIgdmlldyA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFsKCQkJCXt2aWV3OiBodG1sLk1FTlUsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzIsIHdpZHRoOiAxMjB9fSwKCQkJCXt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzIsIHdpZHRoOiBjYW4uQ29uZldpZHRoKCktKGNhbi51c2VyLmlzV2luZG93cz8gMTgxOiAxNjUpfX0sCgkJCV0pCgkJCXJldHVybiBzaG93KGxpc3RbMF0sIGxpc3RbMF0uX2luZGV4LCB2aWV3Lm1lbnUsIHZpZXcubGlzdCksIGZpcnN0LmNsaWNrKCkKCQl9CgoJCWlmIChkYXRhW21kYi5OQU1FXSA9PSBodG1sLklOTkVSKSB7IHJldHVybiBjYW4ub25tb3Rpb24uY29weShjYW4sIHRhcmdldCkgfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5TUEFOLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSwgIiIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsICJzcGFyayIsIG1kYi5OQU1FLCAic2hlbGwiLCBtZGIuVEVYVCwgaXRlbS5pbm5lclRleHRdLCBmdW5jdGlvbigpIHt9KQoJCQl9KQoJCX0pCgl9LAoJY2hhcnQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJdGFyZ2V0Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbihldmVudCkgewoJCQljYW4udXNlci5jYXJ0ZUNsaWVudChldmVudCwgY2FuLCBraXQuRGljdChtZGIuRVhQT1JULCBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sICJoaSIsIHRhcmdldCkKCQkJfSksIFttZGIuRVhQT1JUXSkKCQl9Cgl9LAoJdGFibGU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuT3JkZXJUYWJsZShjYW4sIHRhcmdldCksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNoYXQuQ09OVEVOVCkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuVEQsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLmNvcHkoY2FuLCBpdGVtKSB9KQoJfSwKCWltYWdlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkvKGNhbi51c2VyLmlzTW9iaWxlPyAyOiAxKSwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCX0sCglmaWVsZDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQsIHdpZHRoKSB7IHZhciBpdGVtID0gY2FuLmJhc2UuT2JqKGRhdGEubWV0YSkKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBpdGVtLCBbY2hhdC5QTFVHSU5fU1RBVEVfSlNdLCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjaGF0LlNUT1JZLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbZGF0YS50eXBlLCBkYXRhLm5hbWUsIGRhdGEudGV4dF0sIGNtZHMpLCBjYikKCQkJfQoKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKSksIHN1Yi5Db25mV2lkdGgoaXRlbS53aWR0aCA9ICh3aWR0aHx8Y2FuLkNvbmZXaWR0aCgpKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyA0MDogMjApKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoKCQkJY2FuLmNvcmUuVmFsdWUoaXRlbSwgImF1dG8uY21kIikgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGZ1bmN0aW9uKCkgewoJCQkJc3ViLnJ1bkFjdGlvbihzdWIucmVxdWVzdCh7fSwgY2FuLmNvcmUuVmFsdWUoaXRlbSwgIm9wdHMiKSksIGNhbi5jb3JlLlZhbHVlKGl0ZW0sICJhdXRvLmNtZCIpKQoJCQl9KQoJCX0sIGNhbi5fb3V0cHV0LCB0YXJnZXQpCgl9LAoJLy8gbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCS8vIH0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwKCV9tb2RlOiB7CgkJbm9ybWFsOiB7CgkJCSJuIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubmV4dChjYW4uc3ViKSB9LAoJCQkiaiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLm5leHQoY2FuLnN1YikgfSwKCQkJIkFycm93UmlnaHQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5uZXh0KGNhbi5zdWIpIH0sCgkJCSJBcnJvd0xlZnQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5wcmV2KGNhbi5zdWIpIH0sCgkJCSJrIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwucHJldihjYW4uc3ViKSB9LAoJCQkicCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLnByZXYoY2FuLnN1YikgfSwKCgkJCSJxIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWxbIue7k+adnyJdKGV2ZW50LCBjYW4uc3ViKSB9LAoJCQkiaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsWyLpmpDol48iXShldmVudCwgY2FuLnN1YikgfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwKCV90cmFuczoge3ZpZXc6ICLop4blm74ifSwKCXBsYXk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGxpc3QgPSBbXSwgY3VycmVudCA9IFtdCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIHdpa2kuSVRFTSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS50YWdpcyhbImgxIiwgImgyIiwgImgzIl0sIGl0ZW0pICYmIGxpc3QucHVzaChjdXJyZW50ID0gW10pLCBjdXJyZW50LnB1c2goaXRlbSkKCQl9KQoKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogInN0b3J5IHdvcmQgZmxvYXQifSwgW10sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gY2FuLnJ1biwgc3ViLnN1cCA9IGNhbiwgY2FuLnN1YiA9IHN1YiwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oc3ViLCBbCgkJCQlbIuW4g+WxgCIsICLlvIDorrIiLCAi572R5qC8IiwgIuW/q+mXqiJdLCAi5aSn57qyIiwgIummlumhtSIsICLkuIrkuIDpobUiLAoJCQkJWyLoj5zljZUiXS5jb25jYXQoY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihwYWdlKSB7IHJldHVybiBwYWdlWzBdLmlubmVySFRNTCB9KSksCgkJCQki5LiL5LiA6aG1IiwgIumakOiXjyIsICLnu5PmnZ8iLAoJCQldLCBzdWIuX2FjdGlvbiwgY2FuLm9uZGV0YWlsKQoKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJrZXltYXAuZm9jdXMiLCBjYW4ucmVxdWVzdChldmVudCwge2NiOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmtleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sICJub3JtYWwiLCBjYW4ua2V5bGlzdCkKCQkJfX0pKSwgY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pCgoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCBodG1sLkJBQ0tHUk9VTkQsIGNhbi5fcm9vdC5fdGFyZ2V0LnN0eWxlLmJhY2tncm91bmQpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBjYW4uX3Jvb3QuX2hlaWdodC00Kmh0bWwuUExVR0lOX01BUkdJTi0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5XSURUSCwgY2FuLl9yb290Ll93aWR0aC00Kmh0bWwuUExVR0lOX01BUkdJTikKCgkJCXN1Yi51aSA9IHN1Yi5wYWdlLkFwcGVuZChzdWIsIHN1Yi5fb3V0cHV0LCBbe3ZpZXc6IGNoYXQuUFJPSkVDVH0sIHt2aWV3OiBjaGF0LkNPTlRFTlR9XSkKCQkJY2FuLmNvcmUuTGlzdChzdWIubGlzdCA9IGxpc3QsIGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7CgkJCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuYW1lOiBwYWdlWzBdLmlubmVySFRNTH0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9uZGV0YWlsLnNob3coc3ViLCBpbmRleCkgCgkJCQl9LCBmdW5jdGlvbihldmVudCkge30sIHN1Yi51aS5wcm9qZWN0KQoKCQkJCXN1Yi5wYWdlLkFwcGVuZChzdWIsIHN1Yi51aS5jb250ZW50LCBbe3ZpZXc6ICJwYWdlIisoaW5kZXg9PTA/ICIgZmlyc3QiOiAiIiksIGxpc3Q6IGNhbi5jb3JlLkxpc3QocGFnZSwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgZGF0YSA9IGl0ZW0uZGF0YXNldHx8e30KCQkJCQlzd2l0Y2ggKGRhdGEudHlwZSkgewoJCQkJCQljYXNlIHdpa2kuUFJFTUVOVTogaXRlbSA9IGl0ZW0uY2xvbmVOb2RlKGZhbHNlKTsgYnJlYWsKCQkJCQkJY2FzZSBjaGF0LkZJRUxEOiBpdGVtID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5TVE9SWSwgY2FuLmJhc2UuT2JqKGRhdGEubWV0YSksIHN1Yi51aS5jb250ZW50KS5maXJzdDsgYnJlYWsKCQkJCQkJZGVmYXVsdDogaXRlbSA9IGl0ZW0uY2xvbmVOb2RlKHRydWUpCgkJCQkJfQoJCQkJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uaW1wb3J0LCBkYXRhLnR5cGVdLCBbc3ViLCBkYXRhLCBpdGVtLCBjYW4uX3Jvb3QuX3dpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOXSksIGl0ZW0KCQkJCX0pLCB9XSkKCQkJfSksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIudWkucHJvamVjdCksIGNhbi5vbmRldGFpbC5zaG93KHN1YiwgMCkgCgoJCQlzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIFttZGIuUEFHRSwgY2xpLkZST00sIGNsaS5DT1NUXSksIHN1Yi5TdGF0dXMoY2xpLkZST00sIGNhbi5iYXNlLlRpbWUoKSkKCQkJdmFyIGZyb20gPSBuZXcgRGF0ZSgpOyBjYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDEwMH0sIGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCQkJc3ViLlN0YXR1cyhjbGkuQ09TVCwgY2FuLmJhc2UuRHVyYXRpb24obm93LWZyb20pKQoJCQl9KQoJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCXZpZXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLl9oZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCwgY2FuLl9oZWlnaHQpLCBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi5zdXAuX25hdm1lbnUsIGNhbi5faGVpZ2h0KSwgZGVsZXRlKGNhbi5faGVpZ2h0KQoJCX0gZWxzZSB7IGNhbi5faGVpZ2h0ID0gY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCwgIiIpLCBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi5zdXAuX25hdm1lbnUsICIiKQoJCX0KCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWyLliKDpmaQiXSwKCXNob3c6IGZ1bmN0aW9uKHN1Yiwgd2hpY2gpIHsgc3ViLnBhZ2Uuc3R5bGVDbGFzcyhzdWIsIHN1Yi51aS5jb250ZW50LCBjaGF0LkNPTlRFTlQpCgkJc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHdpa2kuRElWX1BBR0UsIGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7CgkJCWlmIChpbmRleCA9PSB3aGljaCB8fCBwYWdlID09IHdoaWNoKSB7CgkJCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBwYWdlLCBzdWIucGFnZS5LZXlzKGh0bWwuSDEsIGh0bWwuSDIsIGh0bWwuSDMpLCBmdW5jdGlvbihpdGVtKSB7IHN1Yi5BY3Rpb24oIuiPnOWNlSIsIGl0ZW0uaW5uZXJIVE1MKSB9KQoJCQkJc3ViLm9ubW90aW9uLnNlbGVjdChzdWIsIHN1Yi51aS5wcm9qZWN0LCBodG1sLkRJVl9JVEVNLCBpbmRleCkKCQkJCXN1Yi5TdGF0dXMobWRiLlBBR0UsIGluZGV4KzEraWNlLlBTK3N1Yi5saXN0Lmxlbmd0aCkKCQkJCXN1Yi5wYWdlLkNsYXNzTGlzdC5hZGQoc3ViLCBwYWdlLCBodG1sLlNIT1cpCgkJCX0gZWxzZSB7CgkJCQlzdWIucGFnZS5DbGFzc0xpc3QuZGVsKHN1YiwgcGFnZSwgaHRtbC5TSE9XKQoJCQl9CgkJfSkKCX0sCgluZXh0OiBmdW5jdGlvbihzdWIpIHsKCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgc3ViLmNvcmUuS2V5cyh3aWtpLkRJVl9QQUdFLCBpY2UuU0hPVyksIGZ1bmN0aW9uKHBhZ2UpIHsKCQkJcGFnZS5uZXh0U2libGluZz8gc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZS5uZXh0U2libGluZyk6IHN1Yi51c2VyLnRvYXN0KHN1YiwgY2xpLkVORCkKCQl9KQoJfSwKCXByZXY6IGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5wYWdlLlNlbGVjdChzdWIsIHN1Yi51aS5jb250ZW50LCBzdWIuY29yZS5LZXlzKHdpa2kuRElWX1BBR0UsIGljZS5TSE9XKSwgZnVuY3Rpb24ocGFnZSkgewoJCQlwYWdlLnByZXZpb3VzU2libGluZz8gc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZS5wcmV2aW91c1NpYmxpbmcpOiBzdWIudXNlci50b2FzdChzdWIsIGNsaS5FTkQpCgkJfSkKCX0sCglmbGFzaDogZnVuY3Rpb24oc3ViKSB7CgkJc3ViLmNvcmUuTmV4dChzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgd2lraS5ESVZfUEFHRSksIGZ1bmN0aW9uKHBhZ2UsIG5leHQpIHsKCQkJc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZSksIHN1Yi5vbm1vdGlvbi5kZWxheShzdWIsIGZ1bmN0aW9uKCkgeyBuZXh0KCkgfSkKCQl9KQoJfSwKCWdyaWQ6IGZ1bmN0aW9uKHN1YikgeyBzdWIucGFnZS5zdHlsZUNsYXNzKHN1Yiwgc3ViLnVpLmNvbnRlbnQsICJjb250ZW50IGdyaWQiKSB9LAoKCSLlvIDorrIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIDApIH0sCgki572R5qC8IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLmdyaWQoY2FuKSB9LAoJIuW/q+mXqiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5mbGFzaChjYW4pIH0sCgoJIuWkp+e6siI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSB9LAoJIummlumhtSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5zaG93KGNhbiwgMCkgfSwKCSLkuIrkuIDpobUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwucHJldihjYW4sIGNhbi51aS5jb250ZW50KSB9LAoJIuiPnOWNlSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5zaG93KGNhbiwgZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXgpIH0sCgki5LiL5LiA6aG1IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLm5leHQoY2FuLCBjYW4udWkuY29udGVudCkgfSwKCSLpmpDol48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX291dHB1dCkgfSwKCSLnu5PmnZ8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5fdGFyZ2V0KSB9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBzdWIpIHsgc3ViLnBhZ2UuUmVtb3ZlKHN1Yiwgc3ViLl90YXJnZXQpIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdGF0ZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjb25mLCBjYiwgdGFyZ2V0KSB7fSwKCV9wcm9jZXNzOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb25TdGF0dXMoKSAmJiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykgJiYgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvblN0YXR1cygpKSkKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgbXNnLk9wdGlvblByb2Nlc3MoKV0sIHtjYW46IGNhbiwgc3ViOiBjYW4sIG1zZzogbXNnfSkKCX0sCgoJX2xvY2F0aW9uOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBjYW4udXNlci5qdW1wcyhfYXJnKTsgcmV0dXJuIHRydWUgfSwKCV9yZXBsYWNlOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBsb2NhdGlvbi5yZXBsYWNlKF9hcmcpOyByZXR1cm4gdHJ1ZSB9LAoJX2hpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGhpc3RvcnkuYmFjaygpOyByZXR1cm4gdHJ1ZSB9LAoJX2NvbmZpcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7IGNhbi51c2VyLmNvbmZpcm0oX2FyZykgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbXNnKSwgImNvbmZpcm0iKTsgcmV0dXJuIHRydWUgfSwKCV9yZWZyZXNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5jb3JlLlRpbWVyKHBhcnNlSW50KG1zZy5PcHRpb24oIl9kZWxheSIpfHwiNTAwIiksIGZ1bmN0aW9uKCkgewoJCQljYW4uVXBkYXRlKGNhbi5yZXF1ZXN0KHt9LCB7X2NvdW50OiBwYXJzZUludChtc2cuT3B0aW9uKCJfY291bnQiKSktMX0pKQoJCX0pCgkJcmV0dXJuIHRydWUKCX0sCglfcmV3cml0ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5fYXJnLmxlbmd0aDsgaSArPSAyKSB7CgkJCWNhbi5PcHRpb24obXNnLl9hcmdbaV0sIG1zZy5fYXJnW2krMV0pLCBjYW4uQWN0aW9uKG1zZy5fYXJnW2ldLCBtc2cuX2FyZ1tpKzFdKQoJCX0KCQlyZXR1cm4gY2FuLlVwZGF0ZSgpCgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJcmV0dXJuIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpLCB0cnVlCgl9LAoJX2ZpZWxkOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IGl0ZW0udHlwZSA9IGNoYXQuU1RPUlksIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgaXRlbSwge3R5cGU6IGNoYXQuU1RPUlksIGFyZzogY2FuLmJhc2UuT2JqKGl0ZW1baWNlLkFSR10sIFtdKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIuQ29uZihjYW4uYmFzZS5PYmooaXRlbS5jb25mKSkKCQkJaWYgKHN1Yi5Db25mKCJtb2RlIikgPT0gInNpbXBsZSIpIHsKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdCgpOyBtc2cuRWNobyhzdWIuQ29uZigicmVzdWx0IikpCgkJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLzIpCgkJCQlyZXR1cm4gY2FuLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKXx8c3ViLkNvbmYoImZlYXR1cmUuZGlzcGxheSIpKQoJCQl9CgkJCXZhciBvcHQgPSBjYW4uYmFzZS5PYmooaXRlbVtpY2UuT1BUXSwgW10pCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsKCQkJCXZhciByZXMgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvcHQubGVuZ3RoOyBpICs9IDIpIHsgcmVzLk9wdGlvbihvcHRbaV0sIG9wdFtpKzFdKSB9CgkJCQljYW4ucnVuKGV2ZW50LCAobXNnW2ljZS5NU0dfUFJFRklYXXx8W10pLmNvbmNhdChjbWRzKSwgY2IsIHRydWUpCgkJCX0KCQl9KSB9KQoJCXJldHVybiB0cnVlCgl9LAoJX2lubmVyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRElTUExBWSwgaHRtbC5CTE9DSykKCQlyZXR1cm4gdHJ1ZQoJfSwKCglfaG9sZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIHRydWUgfSwKCV9iYWNrOiBmdW5jdGlvbihjYW4pIHsgY2FuLl9oaXN0b3J5LnBvcCgpCgkJZm9yICh2YXIgaGlzID0gY2FuLl9oaXN0b3J5LnBvcCgpOyBoaXM7IGhpcyA9IGNhbi5faGlzdG9yeS5wb3AoKSkgeyBpZiAoaGlzWzBdID09IGN0eC5BQ1RJT04pIHsgY29udGludWUgfQoJCQl2YXIgaW5kZXggPSAwCgkJCWNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS52YWx1ZSA9IGhpc1tpbmRleCsrXXx8IiIgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fYWN0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnZhbHVlID0gaGlzW2luZGV4KytdfHwiIiB9KQoJCQljYW4uVXBkYXRlKCk7IGJyZWFrCgkJfQoJCSFoaXMgJiYgY2FuLlVwZGF0ZSgpCgkJcmV0dXJuIHRydWUKCX0sCglfcmljaDogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRBQkxFX0NPTlRFTlQsIGh0bWwuVEJPRFldLCBmdW5jdGlvbih0YWJsZSkgewoJCQl2YXIgaGVhZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQUJMRV9DT05URU5ULCBodG1sLlRIXSwgZnVuY3Rpb24odGgpIHsgcmV0dXJuIHRoLmlubmVyVGV4dCB9KQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQlyZXR1cm4ge3JvdzogY2FuLmNvcmUuTGlzdChoZWFkLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV0gfSl9CgkJCX0pKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoJCXJldHVybiB0cnVlCgl9LAoJX2dyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7CgkJc3ViID0gY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpCgkJaWYgKHN1YiAmJiBzdWIub25pbXBvcnQgJiYgc3ViLm9uaW1wb3J0Lmdyb3cpIHsKCQkJc3ViLm9uaW1wb3J0Lmdyb3coc3ViLCBtc2csIF9hcmcpCgkJCXJldHVybiB0cnVlCgkJfQoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfQ09ERSwgZnVuY3Rpb24oZGl2KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZGl2LCBodG1sLk1BWF9IRUlHSFQsIDQwMCkKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZGl2LCBbe3RleHQ6IF9hcmd9XSkKCQkJZGl2LnNjcm9sbEJ5KDAsIDEwMDAwKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIF9hcmcpIH0KCQlyZXR1cm4gdHJ1ZQoJfSwKCV9vcGVuOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgewoJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBjYW4uVXBkYXRlKCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWwoJCSLliLfmlrDmlbDmja4iLCAi5YiH5o2i5YWo5bGPIiwgIuWFseS6q+W3peWFtyIsICLmiZPlvIDpk77mjqUiLCAi55Sf5oiQ6ZO+5o6lIiwgIueUn+aIkOiEmuacrCIsICLnlJ/miJDlm77niYciLCBbCgkJCSLlhbblroMiLCAi5Yi35paw6aG16Z2iIiwgIuS/neWtmOWPguaVsCIsICLmuIXnqbrlj4LmlbAiLCAi5omp5bGV5Y+C5pWwIiwgIuWkjeWItuaVsOaNriIsICLkuIvovb3mlbDmja4iLCAi5riF56m65pWw5o2uIiwgIuWIoOmZpOmFjee9riIsICLliKDpmaTlt6XlhbciLCLmkYTlg4/lpLQiLAoJCV0sCgldLAoJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBidXR0b25dLmNvbmNhdChjYW4uSW5wdXQoW10sIHRydWUpKSkgfSwKCgki5Yi35paw5pWw5o2uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKHt9LCBjYW4uSW5wdXQoW10sIHRydWUpKSB9LAoJIuWIh+aNouWFqOWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHN1YiA9IGNhbi5fb3V0cHV0c1tjYW4uX291dHB1dHMubGVuZ3RoLTFdCgkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBjYW4uX3RhcmdldCwgImZ1bGwiKSkgewoJCQl2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LShjYW4uX3N0YXR1cy5pbm5lclRleHQ/IDI6IDEpKmh0bWwuQUNUSU9OX0hFSUdIVDsgY2FuLnVzZXIuaXNNb2JpbGUgJiYgKGhlaWdodCAtPSAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJY2FuLl9tb2RlX2JhayA9IGNhbi5Nb2RlKCksIGNhbi5faGVpZ2h0X2JhayA9IHN1Yi5Db25mSGVpZ2h0KCksIGNhbi5fd2lkdGhfYmFrID0gc3ViLkNvbmZXaWR0aCgpCgkJCXN1Yi5Nb2RlKCJmdWxsIiksIGNhbi5Nb2RlKCJmdWxsIiksIGNhbi5Db25mSGVpZ2h0KGhlaWdodCksIGNhbi5Db25mV2lkdGgod2luZG93LmlubmVyV2lkdGgpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBzdWIuQ29uZkhlaWdodChoZWlnaHQpLCBodG1sLk1JTl9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aW5kb3cuaW5uZXJXaWR0aCkpCgkJfSBlbHNlIHsKCQkJY2FuLk1vZGUoY2FuLl9tb2RlX2Jha3x8IiIpLCBjYW4uQ29uZkhlaWdodChjYW4uX2hlaWdodF9iYWspLCBjYW4uQ29uZldpZHRoKGNhbi5fd2lkdGhfYmFrKQoJCQlzdWIuTW9kZShjYW4uX21vZGVfYmFrfHwiIiksIHN1Yi5Db25mSGVpZ2h0KGNhbi5faGVpZ2h0X2JhayksIHN1Yi5Db25mV2lkdGgoY2FuLl93aWR0aF9iYWspCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCAiIiwgaHRtbC5NSU5fV0lEVEgsICIiKQoJCX0KCQljYW4uY29yZS5DYWxsRnVuYyhbc3ViLCBjaGF0Lk9OSU1QT1JULCBodG1sLkxBWU9VVF0sIHtjYW46IHN1Yn0pCgl9LAoJIuWFseS6q+W3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IG1ldGEubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgbWV0YS5pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KGNhbi5JbnB1dChbXSwgdHJ1ZSkpLAoJCV0pCgl9LAoJIuaJk+W8gOmTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpLCBhcmdzID0gY2FuLk9wdGlvbigpOyBhcmdzLnJpdmVyID0gIiIsIGFyZ3Muc3Rvcm0gPSAiIgoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi51c2VyLmlzV2VpWGluPyBjYW4udXNlci5qdW1wcyhjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKTogY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKQoJfSwKCSLnlJ/miJDpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKSwgYXJncyA9IGNhbi5PcHRpb24oKQoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbXSwgW21kYi5MSU5LLCBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncykpXSkKCX0sCgki55Sf5oiQ6ISa5pysIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgY29uZiA9IGNhbi5Db25mKCkKCQl2YXIgYXJncyA9IGNhbi5JbnB1dCgiIiwgdHJ1ZSkuam9pbihpY2UuU1ApLCBsaXN0ID0gWwoJCQkiZXhwb3J0IGN0eF9kZXY9Iitsb2NhdGlvbi5vcmlnaW4rIjsgY3R4X3RlbXA9JChta3RlbXApOyBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCAkY3R4X2RldjsiKyIgc291cmNlICRjdHhfdGVtcCAiKyhjb25mLmluZGV4fHwiIikraWNlLlNQK2FyZ3MsCgkJCSJpc2hfc3lzX2Rldl9ydW5fY29tbWFuZCAiK2FyZ3MsICJpc2hfc3lzX2Rldl9ydW5fYWN0aW9uIiwgImlzaF9zeXNfZGV2X3J1bl9zb3VyY2UiLAoJCV0KCQljYW4udXNlci50b2FzdFNjcmlwdChjYW4sICc8ZGl2IGNsYXNzPSJzdG9yeSIgZGF0YS10eXBlPSJzcGFyayIsIGRhdGEtbmFtZT0ic2hlbGwiPicrCgkJCSc8bGFiZWw+JCA8L2xhYmVsPicrJzxzcGFuPicrbGlzdC5qb2luKCI8L3NwYW4+PGJyLz48bGFiZWw+JCA8L2xhYmVsPjxzcGFuPiIpKyc8L3NwYW4+JysnPC9kaXY+JywgY29uZi5pbmRleCtpY2UuU1ArYXJncykKCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGxpc3RbMF0pCgl9LAoJIueUn+aIkOWbvueJhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLl9uYW1lKSB9LAoKCSLliLfmlrDpobXpnaIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4uX291dHB1dHMsICItMSIpCgkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgIl9pbml0Il0sIHtjYW46IHN1YiwgbXNnOiBzdWIuX21zZywgY2I6IGZ1bmN0aW9uKG1zZykge30sIHRhcmdldDogY2FuLl9vdXRwdXR9KQoJfSwKCSLkv53lrZjlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5L+d5a2Y5Y+C5pWwIl0pIH0sCgki5riF56m65Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9vcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlID0gIiIgfSkgfSwKCSLmianlsZXlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX2FjdGlvbikgfSwKCSLlpI3liLbmlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbil8fGNhbi5vbmV4cG9ydC5ib2FyZChjYW4pKSB9LAoJIuS4i+i9veaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiZmlsZW5hbWUiLCB2YWx1ZTogbWV0YS5uYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbiksIGxpc3RbMF0sIG5mcy5DU1YpfHxjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjYW4ub25leHBvcnQuYm9hcmQoY2FuKSwgbWV0YS5uYW1lLCBuZnMuVFhUKQoJCX0pCgl9LAoJIua4heepuuaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki5Yig6Zmk5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaTphY3nva4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJjb25maWciLCBbInJlc2V0Il0pIH0sCgki5biu5Yqp5paH5qGjIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiaGVscCIpIH0sCgoJIuaJk+WMhemhtemdoiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJvbndlYnBhY2siLCBjYW4ucmVxdWVzdChldmVudCkpIH0sCgoJIuaRhOWDj+WktCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgY29uc3RyYWludHMgPSB7YXVkaW86IGZhbHNlLCB2aWRlbzoge3dpZHRoOiAyMDAsIGhlaWdodDogMjAwfX0KCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBjdHguQUNUSU9OfSwge3ZpZXc6ICJjYXB0dXJlIiwgbGlzdDogW3t0eXBlOiAidmlkZW8iLCBfaW5pdDogZnVuY3Rpb24oaXRlbSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKCQkJCWl0ZW0uc3JjT2JqZWN0ID0gc3RyZWFtLCBpdGVtLm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbihlKSB7CgkJCQkJaXRlbS5wbGF5KCkKCQkJCX0sIHVpLnN0cmVhbSA9IHN0cmVhbQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpOyB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsi5YWz6ZetIiwgIuaKk+aLjSJdLCB1aS5hY3Rpb24sIHsKCQkJIuaKk+aLjSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3t0eXBlOiAiY2FudmFzIiwgd2lkdGg6IHVpLnZpZGVvLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHVpLnZpZGVvLm9mZnNldEhlaWdodH1dKS5maXJzdAoJCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3tpbWc6IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpLCBzdHlsZToge3dpZHRoOiB1aS52aWRlby5vZmZzZXRXaWR0aCwgaGVpZ2h0OiB1aS52aWRlby5vZmZzZXRIZWlnaHR9fV0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW52YXMpCgkJCX0sCgkJCSLlhbPpl60iOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuTGlzdCh1aS5zdHJlYW0uZ2V0VHJhY2tzKCksIGZ1bmN0aW9uKHRyYWNrKSB7IHRyYWNrLnN0b3AoKSB9KQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuYWN0aW9uKQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkudmlkZW8pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5jYXB0dXJlKQoJCQl9LAoJCX0pCgl9LAoKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSB9LAoJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmlzRnVsbE1vZGUoKSkgewoJCQljYW4ub25hY3Rpb25bIuWIh+aNouWFqOWxjyJdKGV2ZW50LCBjYW4pCgkJfSBlbHNlIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl90YXJnZXQpCgkJfQoJfSwKCXVwbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci51cGxvYWQoZXZlbnQsIGNhbikgfSwKCWFjdGlvbnM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fYWN0aW9uKSB9LAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgbWRiLk5FWFQsIGNhbi5TdGF0dXMobWRiLlRPVEFMKXx8MCwgY2FuLk9wdGlvbihtZGIuTElNSVQpfHxjYW4uQWN0aW9uKG1kYi5MSU1JVCl8fCIiLCBjYW4uT3B0aW9uKG1kYi5PRkZFTkQpfHxjYW4uQWN0aW9uKG1kYi5PRkZFTkQpfHwiIl0pIH0sCglwcmV2OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBtZGIuUFJFViwgY2FuLlN0YXR1cyhtZGIuVE9UQUwpfHwwLCBjYW4uT3B0aW9uKG1kYi5MSU1JVCl8fGNhbi5BY3Rpb24obWRiLkxJTUlUKXx8IiIsIGNhbi5PcHRpb24obWRiLk9GRkVORCl8fGNhbi5BY3Rpb24obWRiLk9GRkVORCl8fCIiXSkgfSwKCWNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdmFsdWUsIGNiKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGlucHV0KSB7CgkJCWlmIChpbnB1dC5uYW1lID09IG5hbWUgJiYgdmFsdWUgIT0gaW5wdXQudmFsdWUpIHsgaW5wdXQudmFsdWUgPSB2YWx1ZQoJCQkJdmFyIGRhdGEgPSBpbnB1dC5kYXRhc2V0fHx7fTsgY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KCksIGNiKQoJCQkJcmV0dXJuIGlucHV0CgkJCX0KCQl9KQoJfSwKCglvcGVuTG9jYXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuYWdlbnQub3BlbkxvY2F0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSkgfSwKCWdldExvY2F0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihkYXRhKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBkYXRhKQoJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVCwgImxhdGl0dWRlIiwgImxvbmdpdHVkZSJdLCBmdW5jdGlvbihhcmdzKSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MpCgkJCX0pCgkJfSkKCX0sCglnZXRDbGlwYm9hcmREYXRhOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQlmdW5jdGlvbiBhZGQodGV4dCkgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtjYW4uYmFzZS5QYXJzZUpTT04odGV4dCldKSB9CgkJbmF2aWdhdG9yLmNsaXBib2FyZD8gbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4oYWRkKS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVycikgfSk6CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogbWRiLlRFWFR9XSwgZnVuY3Rpb24obGlzdCkgeyBhZGQobGlzdFswXSkgfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXRhYmxlOiBmdW5jdGlvbihjYW4pIHsgdmFyIG1zZyA9IGNhbi5fbXNnOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgcmVzID0gW21zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZC5qb2luKGljZS5GUyldOyBtc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgsIGFycmF5KSB7CgkJCXJlcy5wdXNoKGNhbi5jb3JlLkl0ZW0obGluZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gdmFsdWUgfSkuam9pbihpY2UuRlMpKQoJCX0pCgkJcmV0dXJuIHJlcy5qb2luKGljZS5OTCkKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuKSB7IHZhciBtc2cgPSBjYW4uX21zZzsgcmV0dXJuIG1zZy5SZXN1bHQoKSB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vc3RvcnkvZm9ybS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAiZm9ybSIpCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAibmFtZSIpCgkJbXNnLlB1c2goInZhbHVlIiwgImhhcnZleXNoYW8iKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAia2V5IikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAiYWdlIikKCQltc2cuUHVzaCgidmFsdWUiLCAiMTgiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAic2VsZWN0IikKCQltc2cuUHVzaCgibmFtZSIsICJtYWxlIikKCQltc2cuUHVzaCgidmFsdWUiLCAibWFsZSxmZW1hbGUiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dGFyZWEiKQoJCW1zZy5QdXNoKCJuYW1lIiwgImludHJvIikKCQltc2cuUHVzaCgidmFsdWUiLCAicHJvZ3JhbSIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJidXR0b24iKQoJCW1zZy5QdXNoKCJuYW1lIiwgInN1Ym1pdCIpCgkJbXNnLlB1c2goInZhbHVlIiwgIuaPkOS6pCIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQl2YXIgYWN0aW9uID0gIiI7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCXN3aXRjaCAodmFsdWUudHlwZSkgewoJCQkJY2FzZSBodG1sLkJVVFRPTjogYWN0aW9uID0gYWN0aW9ufHx2YWx1ZS5uYW1lCgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuSU5QVVQsIHN0eWxlOiB7d2lkdGg6IChjYW4uQ29uZldpZHRoKCktOTApLzJ9LCBkYXRhOiB7dHlwZTogdmFsdWUudHlwZSwgdmFsdWU6IHZhbHVlLnZhbHVlfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCXZhciBhcmdzID0gW2N0eC5BQ1RJT04sIGFjdGlvbl0KCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgIi5hcmdzIiwgZnVuY3Rpb24oaXRlbSkgeyBhcmdzLnB1c2goaXRlbS5uYW1lLCBpdGVtLnZhbHVlKX0pCgkJCQkJCQljYW4ucnVuKGV2ZW50LCBhcmdzKQoJCQkJCQl9fV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlNFTEVDVDoKCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbCgkJCQkJCXt2aWV3OiBbImxhYmVsIl0sIGxpc3Q6IFt7dGV4dDogdmFsdWUubmFtZX1dfSwKCQkJCQkJe3ZpZXc6IFsiaW5wdXQiXSwgbGlzdDogW3t0eXBlOiBodG1sLlNFTEVDVCwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LAoJCQkJCQkJZGF0YTogdmFsdWUsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodmFsdWUudmFsdWUpLCBmdW5jdGlvbih2KSB7IHJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIG5hbWU6IHYsIHZhbHVlOiB2LCBpbm5lcjogdn0gfSkgfV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlRFWFRBUkVBOgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6ICJpbnB1dCIsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQl9CgkJfSkKCX0sCn0sIFsiIl0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9qc29uLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsICJqc29uIikKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25pbXBvcnQuc2hvdyhjYW4sIGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCksIHt9KSwgdGFyZ2V0KQoJfSwKCXNob3c6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJZnVuY3Rpb24gc2hvdyhkYXRhLCB0YXJnZXQsIGluZGV4LCB0b3RhbCkgeyB2YXIgbGlzdAoJCQlzd2l0Y2ggKHR5cGVvZiBkYXRhKSB7CgkJCQljYXNlIGxhbmcuT0JKRUNUOgoJCQkJCWlmIChkYXRhID09IG51bGwpIHsKCQkJCQkJbGlzdCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiAibnVsbCJ9XSkuaXRlbQoJCQkJCQlicmVhawoJCQkJCX0KCQkJCQlmdW5jdGlvbiB3cmFwKGJlZ2luLCBlbmQsIGFkZCwgY2IpIHsKCQkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IGJlZ2lufV0pCgkJCQkJCWFkZCAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWyIuLi4iLCBodG1sLlNQQU4sICJub25jZSJdfV0pLCBjYigpCgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBlbmR9XSkKCQkJCQl9CgkJCQkJZnVuY3Rpb24gdG9nZ2xlKGxpc3QpIHsgbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCkgfQoJCQkJCWZ1bmN0aW9uIF9pdGVtKCkgewoJCQkJCQlsaXN0ID0gbGlzdCB8fCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5MSVNUfV0pLmxpc3QKCQkJCQkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIGxpc3QsIFt7dmlldzogaHRtbC5JVEVNfV0pLml0ZW0KCQkJCQl9CgoJCQkJCWlmIChjYW4uYmFzZS5pc0FycmF5KGRhdGEpKSB7IC8vIOaVsOe7hAoJCQkJCQl3cmFwKCJbIiwgIl0iLCBkYXRhLmxlbmd0aCA+IDAsIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5MaXN0KGRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgaXRlbSA9IF9pdGVtKCkKCQkJCQkJCXNob3codmFsdWUsIGl0ZW0sIGluZGV4LCBkYXRhLmxlbmd0aCkKCQkJCQkJfSkgfSkKCQkJCQl9IGVsc2UgeyAvLyDlr7nosaEKCQkJCQkJdmFyIGxlbmd0aCA9IGNhbi5jb3JlLkl0ZW0oZGF0YSkubGVuZ3RoLCBjb3VudCA9IDAKCQkJCQkJd3JhcCgieyIsICJ9IiwgbGVuZ3RoID4gMCwgZnVuY3Rpb24oKSB7IGNhbi5jb3JlLkl0ZW0oZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB2YXIgaXRlbSA9IF9pdGVtKCkKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGl0ZW0sIFt7dGV4dDogWyciJytrZXkrJyInLCBodG1sLlNQQU4sICJrZXkiXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdG9nZ2xlKHN1YikgfX0sIHt0ZXh0OiAnOiAnfV0pCgkJCQkJCQl2YXIgc3ViID0gc2hvdyh2YWx1ZSwgaXRlbSwgY291bnQrKywgbGVuZ3RoKQoJCQkJCQl9KSB9KQoJCQkJCX0KCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLlNUUklORzogLyog5a2X5LiyICovIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbJyInK2RhdGErJyInLCBodG1sLlNQQU4sIGxhbmcuU1RSSU5HXX1dKTsgYnJlYWsKCQkJCWRlZmF1bHQ6IC8qIOWFtuWugyAqLyBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWycnK2RhdGErJycsIGh0bWwuU1BBTiwgImNvbnN0Il19XSkKCQkJfQoJCQkoaW5kZXggPCB0b3RhbC0xKSAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogaWNlLkZTfV0pCgkJCXJldHVybiBsaXN0CgkJfTsgc2hvdyhkYXRhLCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5JVEVNfV0pLml0ZW0sIDAsIDApCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsi5bGV5byAIiwgIuaKmOWPoCIsICLlpI3liLYiXSwKCSLlsZXlvIAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9MSVNUXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCwgdHJ1ZSkKCQl9KQoJfSwKCSLmipjlj6AiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9MSVNUXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgbGlzdCkKCQl9KQoJfSwKCSLlpI3liLYiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4uX21zZy5SZXN1bHQoKSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9tZWRpYS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQp9fSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbIuaJk+W8gOWxj+W5lSIsICLmiZPlvIDmkYTlg48iLCAi5omT5byA5b2V6Z+zIl0sCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGNiKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogaHRtbC5BQ1RJT059LCB7dmlldzogaHRtbC5PVVRQVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNiKGl0ZW0sIHVpKSB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIHsKCQkJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uY29yZS5MaXN0KHVpLnN0cmVhbS5nZXRUcmFja3MoKSwgZnVuY3Rpb24odHJhY2spIHsgdHJhY2suc3RvcCgpIH0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5hY3Rpb24pLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5vdXRwdXQpCgkJCX0sCgkJCSLmipPmi40iOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIGNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm91dHB1dCwgW3t0eXBlOiBodG1sLkNBTlZBU31dKS5maXJzdDsgY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkub3V0cHV0LCBbe2ltZzogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyksIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKX19XSkKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCQkJfSwKCQkJIuW9leWItiI6IGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmJsb2JzID0gW10KCQkJCXVpLm1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcih1aS5zdHJlYW0sIHttaW1lVHlwZTogJ3ZpZGVvL3dlYm0nfSkKCQkJCXVpLm1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGUpID0+IHsgdWkuYmxvYnMucHVzaChlLmRhdGEpLCBjYW4ubWlzYy5Mb2codWkuYmxvYnMubGVuZ3RoKSB9CgkJCQl1aS5tZWRpYVJlY29yZGVyLnN0YXJ0KDEwMCkKCQkJfSwKCQkJIuWbnuaUviI6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBibG9icyA9IHVpLmJsb2JzOyB1aS5ibG9icyA9IFtdCgkJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5vdXRwdXQsIFt7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfX1dKS52aWRlbwoJCQkJdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihibG9icywge3R5cGUgOiAndmlkZW8vd2VibSd9KSksIHZpZGVvLnBsYXkoKQoJCQl9LAoJCQki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYih1aS5ibG9icywge3R5cGU6ICd2aWRlby93ZWJtJ30pKSwgJ3JlY29yZC53ZWJtJykKCQkJfSwKCQl9KQoJfSwKCSLmiZPlvIDlsY/luZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9uYWN0aW9uLl9hY3Rpb24oY2FuLCBmdW5jdGlvbihpdGVtLCB1aSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7IHVpLnN0cmVhbSA9IHN0cmVhbQoJCQkJaXRlbS5zcmNPYmplY3QgPSBzdHJlYW0sIGl0ZW0ub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsgaXRlbS5wbGF5KCkgfQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVyci5uYW1lICsgIjogIiArIGVyci5tZXNzYWdlKSB9KQoJCX0pCgl9LAoJIuaJk+W8gOaRhOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25hY3Rpb24uX2FjdGlvbihjYW4sIGZ1bmN0aW9uKGl0ZW0sIHVpKSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHt2aWRlbzoge3dpZHRoOiBjYW4uQ29uZldpZHRoKCl9fSkudGhlbihmdW5jdGlvbihzdHJlYW0pIHsgdWkuc3RyZWFtID0gc3RyZWFtCgkJCQlpdGVtLnNyY09iamVjdCA9IHN0cmVhbSwgaXRlbS5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyBpdGVtLnBsYXkoKSB9CgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9wYXJzZS5qcyIKVm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBsaXN0OiBbInsiLCAifSIsIGh0bWwuSEVBRCwgaHRtbC5MRUZULCBodG1sLk1BSU4sIGh0bWwuRk9PVF0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgaGVpZ2h0KSB7IHZhciBzdGFjayA9IFt7X2RlZXA6IC0xLCBsaXN0OiBbXX1dLCBmaW5pc2ggPSBmYWxzZQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodGV4dCwgaWNlLk5MLCBpY2UuTkwsIGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgaWYgKGxpbmUgPT0gIiIgfHwgZmluaXNoKSB7IHJldHVybiB9CgkJCXZhciBkZWVwID0gMDsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7IGlmIChsaW5lW2ldID09IGljZS5TUCkgeyBkZWVwKysgfSBlbHNlIGlmIChsaW5lW2ldID09IGljZS5UQikgeyBkZWVwICs9IDQgfSBlbHNlIHsgYnJlYWsgfSB9CgkJCWZvciAodmFyIGkgPSBzdGFjay5sZW5ndGgtMTsgaSA+IDA7IGktLSkgeyBpZiAoZGVlcCA8PSBzdGFja1tpXS5fZGVlcCkgeyBzdGFjay5wb3AoKSB9IH0KCgkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpOyBpZiAobHNbMF0gPT0gInJldHVybiAiKSB7IHJldHVybiBmaW5pc2ggPSB0cnVlIH0KCQkJdmFyIGl0ZW0gPSB7X2RlZXA6IGRlZXAsIGxpc3Q6IFtdfTsgdmFyIGxpc3QgPSBzdGFja1tzdGFjay5sZW5ndGgtMV07IGxpc3QubGlzdC5wdXNoKGl0ZW0pOyBpZiAoZGVlcCA+IGxpc3QuX2RlZXApIHsgc3RhY2sucHVzaChpdGVtKSB9CgkJCWNhbi5vbmFwcGVuZC5saXN0LmluZGV4T2YobHNbMF0pID4gLTEgfHwgY2FuLm9uYXBwZW5kW2xzWzBdXT8gaXRlbS50eXBlID0gbHNbMF06IGl0ZW0ubmFtZSA9IGxzWzBdCgkJCWZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgbHNbaV0sIGxzW2krMV0pIH0KCQl9KQoJCXJldHVybiB7dHlwZTogbmFtZSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKXx8d2luZG93LmlubmVySGVpZ2h0fSwgbGlzdDogc3RhY2tbMF0ubGlzdH0KCX0sCglwYXJzZTogZnVuY3Rpb24oY2FuLCBsaXN0LCB0YXJnZXQsIGtleXMsIGRhdGEsIHR5cGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dCwgZGF0YSA9IGRhdGF8fHt9CgkJaWYgKCFsaXN0KSB7IHJldHVybiB9IGVsc2UgaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24obWV0YSwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEsIHRhcmdldCwga2V5cywgZGF0YSwgdHlwZSkgfSkKCgkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc1N0cmluZyhsaXN0KSkgewoJCQl2YXIgbHMgPSBjYW4uY29yZS5TcGxpdChsaXN0LCAiIiwgIjo9QCIpOyBpZiAobHMubGVuZ3RoID09IDEpIHsKCQkJCXZhciBtZXRhID0gdHlwZT8ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfToge3R5cGU6IGxzWzBdfQoJCQl9IGVsc2UgewoJCQkJdmFyIG1ldGEgPSB7bmFtZTogbHNbMF19OyBmb3IgKHZhciBpID0gMTsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IHN3aXRjaCAobHNbaV0pIHsKCQkJCQljYXNlICJAIjogbWV0YS5hY3Rpb24gPSBsc1tpKzFdOyBicmVhawoJCQkJCWNhc2UgIj0iOiBtZXRhLnZhbHVlID0gbHNbaSsxXTsgYnJlYWsKCQkJCQljYXNlICI6IjogbWV0YS50eXBlID0gbHNbaSsxXTsgYnJlYWsKCQkJCX0gfQoJCQl9CgoJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QobGlzdCkpIHsgdmFyIG1ldGEgPSBsaXN0IH0KCgkJdmFyIGl0ZW0gPSB7dmlldzogbWV0YS50eXBlfTsgc3dpdGNoIChtZXRhLnR5cGUpIHsKCQkJY2FzZSBodG1sLkhFQUQ6IG1ldGEuc3VidHlwZSA9IGh0bWwuTUVOVQoJCQkJbWV0YS5pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGh0bWwuTEFZT1VUKSwgZGF0YS5oZWFkID0gdGFyZ2V0IH0KCQkJCWJyZWFrCgkJCWNhc2UgInsiOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTEVGVCAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTEVGVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5JVEVNCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmxlZnQgPSB0YXJnZXQKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSkKCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgIn0iOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTUFJTiAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTUFJTjoKCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSwgZGF0YS5tYWluPyAxMDogMTAwKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgd2lkdGggPSB0YXJnZXQucGFyZW50Tm9kZS5vZmZzZXRXaWR0aAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgaHRtbC5ESVZfTEFZT1VUX0xFRlQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQl3aWR0aCAtPSBpdGVtLm9mZnNldFdpZHRoIC8vIOWuveW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQkJCX0sIGRhdGEubWFpbj8gMTA6IDEwMCkKCgkJCQkJaWYgKCFkYXRhLm1haW4pIHsgZGF0YS5tYWluID0gdGFyZ2V0CgkJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBkYXRhLm1haW5faW5pdCAmJiBkYXRhLm1haW5faW5pdCgpIH0sIDMwMCkKCQkJCQl9CgkJCQl9CgkJCQlicmVhawoJCQljYXNlIGh0bWwuRk9PVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5NRU5VCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmZvb3QgPSB0YXJnZXQgfQoJCQkJYnJlYWsKCQkJZGVmYXVsdDogdmFyIGNiID0gY2FuLm9uYXBwZW5kW21ldGEudHlwZV07IGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobWV0YS5zdHlsZSkpIHsgaXRlbS5zdHlsZSA9IG1ldGEuc3R5bGUgfQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhtZXRhLnN0eWxlKSkgeyBpdGVtLmNsYXNzTmFtZSA9IG1ldGEuc3R5bGUgfQoKCQltZXRhLmtleXMgPSBtZXRhLmtleXN8fGNhbi5jb3JlLktleXMoa2V5cywgbWV0YS5uYW1lfHxtZXRhLnR5cGUpIAoJCXZhciBjYiA9IGNhbi5vbmFwcGVuZFt0eXBlXTsgIWNhbi5vbmFwcGVuZFttZXRhLnR5cGVdICYmIGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCWl0ZW0uX2luaXQgPSBpdGVtLl9pbml0fHxmdW5jdGlvbih0YXJnZXQpIHsgbWV0YS5saXN0ICYmIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEubGlzdCwgdGFyZ2V0LCBtZXRhLmtleXMsIGRhdGEsIG1ldGEuc3VidHlwZXx8dHlwZSkgfQoJCWl0ZW0udGFyZ2V0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaXRlbV0pLmZpcnN0OyBtZXRhLmluaXQgJiYgbWV0YS5pbml0KGl0ZW0udGFyZ2V0KQoJCWNhbi5jb3JlLkl0ZW1DQihtZXRhLCBmdW5jdGlvbihrZXksIGNiKSB7IGl0ZW0udGFyZ2V0W2tleV0gPSBjYW4uYmFzZS5pc0Z1bmMoY2IpPyBjYjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNiLCBjYW4ucmVxdWVzdChldmVudCwgbWV0YSkpIH0gfSkKCX0sCgl1c2VybmFtZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiBbYWFhLlVTRVJOQU1FLCBodG1sLkRJVl0sIGxpc3Q6IFt7dmlldzogW2h0bWwuTkFNRSwgaHRtbC5ESVYsIGNhbi51c2VyLmluZm8udXNlcm5pY2tdfSwge3ZpZXc6IFtodG1sLklDT04sIGh0bWwuRElWXSwgbGlzdDogW3tpbWc6IGNhbi51c2VyLmluZm8uYXZhdGFyfV19XX0pCgl9LAoJbWVudTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIG1ldGEubGlzdCAmJiBtZXRhLmxpc3QubGVuZ3RoID4gMD8ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIHt9LCBjYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5uYW1lIH0pLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgYnV0dG9uKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IGJ1dHRvbn0pKQoJCQl9KQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fToge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgbWV0YS5uYW1lKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IG1ldGEubmFtZX0pKQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fSkKCX0sCglpdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCwgZGF0YSkgeyBpdGVtLnZpZXcgPSBpdGVtLnZpZXd8fGh0bWwuTElTVAoJCWlmIChkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaCkgPT0gIiMiK21ldGEua2V5cykgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoJCWlmIChtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAhbG9jYXRpb24uaGFzaCkgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiAic29tZSIsIGxpc3Q6IFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIG1ldGEubmFtZXx8bWV0YV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCX19LCB7dmlldzogaHRtbC5MSVNULCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IG1ldGEubGlzdCAmJiBjYW4ub25hcHBlbmQucGFyc2UoY2FuLCBtZXRhLmxpc3QsIHRhcmdldCwgbWV0YS5rZXlzLCBkYXRhLCBodG1sLklURU0pIH19XSwgX2luaXQ6IGZ1bmN0aW9uKCkge319KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0KSB7CgkJaXRlbS5saXN0ID0gW3t2aWV3OiAibmFtZSJ9LCB7dmlldzogaHRtbC5QQUdFfV0sIGl0ZW0uX2luaXQgPSBmdW5jdGlvbihfdGFyZ2V0LCB1aSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5wYWdlLCBbe3ZpZXc6IGh0bWwuSU5QVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5JTlBVVCwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIF90YXJnZXQsIFtodG1sLkRJVl9QQUdFLCBodG1sLkRJVl9JVEVNXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLkhJREUsIGl0ZW0uaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA9PSAtMSkKCQkJCX0pCgkJCX19XX1dKQoJCQljYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm5hbWUsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubmFtZXx8aXRlbV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIF90YXJnZXQsIFtbaHRtbC5ESVZfUEFHRSwgaHRtbC5ESVZfTElTVF1dLCBpbmRleCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQkJdWkucGFnZS5zY3JvbGxUbygwLCAwKQoJCQkJfX1dKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkucGFnZSwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLCBodG1sLlNFTEVDVCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQl9fSwge3ZpZXc6IFtodG1sLkxJU1RdLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgaXRlbS5saXN0LCB0YXJnZXQsIGNhbi5jb3JlLktleXMobWV0YS5rZXlzLCBpdGVtLm5hbWUpLCBkYXRhLCBodG1sLklURU0pCgkJCQl9fV0pCgkJCX0pCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wYWdlLCBodG1sLkhFSUdIVCwgaGVpZ2h0LTEwLShtZXRhLnN0eWxlPyAwOiB1aS5uYW1lLm9mZnNldEhlaWdodCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIF90YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQtMTApCgkJCX0pLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNKVswXS5jbGljaygpCgkJfQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1ldGEsIGRhdGEpIHsgdmFyIHRhcmdldCA9IGRhdGEubWFpbgoJCWlmICghbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCXZhciB1cmwgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sICJwb2QiKSwgY21kOiBtZXRhLmluZGV4fSkKCQlpZiAobWV0YS5hY3Rpb24gPT0gInB1c2giKSB7IHJldHVybiBjYW4udXNlci5qdW1wcyh1cmwpIH0KCQlpZiAobWV0YS5hY3Rpb24gPT0gIm9wZW4iKSB7IHJldHVybiBjYW4udXNlci5vcGVuKHVybCkgfQoKCQlsb2NhdGlvbi5oYXNoID0gbWV0YS5rZXlzCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0YS5rZXlzIH0sIHRhcmdldCkpIHsgcmV0dXJuIH0KCgkJaWYgKGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuWk1MIHx8IGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuSU1MKSB7CgkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JRlJBTUUsIHNyYzogIi9jaGF0L2NtZC8iK21ldGEuaW5kZXgsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCwgd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aH1dKQoJCX0KCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogbWV0YS5pbmRleCwgYXJnczogY2FuLmJhc2UuT2JqKG1ldGEuYXJncyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleHx8bWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLkNvbmZIZWlnaHQodGFyZ2V0Lm9mZnNldEhlaWdodC0zKmh0bWwuQUNUSU9OX0hFSUdIVC02Kmh0bWwuUExVR0lOX01BUkdJTiksIHN1Yi5Db25mV2lkdGgodGFyZ2V0Lm9mZnNldFdpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9waWUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQl2YXIgY29sb3IgPSBbY2xpLlJFRCwgY2xpLllFTExPVywgY2xpLkdSRUVOLCBjbGkuQ1lBTiwgY2xpLkJMVUUsIGNsaS5QVVJQTEVdCgkJdmFyIGNvbG9yID0gWyIjMzMwMEZGIiwgIiMyMTk2RjMiLCAiIzRDQUY1MCIsICIjQ0REQzM5IiwgIiNGRkVCM0IiLCAiIzlDMjdCMCIsICIjNzk1NTQ4IiwgIiM2MDdEOEIiLCAiI0NDMzNGRiJdCgkJdmFyIGhlaWdodCA9IG1zZy5PcHRpb24oaHRtbC5IRUlHSFQpfHxjYW4uQ29uZkhlaWdodCgpCgoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgImRyYXciKQoJCWNhbi5yZXF1aXJlKFsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLCAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgbXNnKSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbXS5jb25jYXQobXNnLmFwcGVuZCwgWyJ3ZWlnaHQiXSkpCgkJCXZhciBtYXJnaW4gPSBoZWlnaHQvOCwgciA9IGhlaWdodC8yLW1hcmdpbjsgY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgMioocittYXJnaW4pKSwgY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIDIqKHIrbWFyZ2luKSkKCQkJY2FuLm9uaW1wb3J0Ll9kcmF3KGNhbiwgbXNnLCBjYW4uQ29uZihtZGIuRklFTEQpLCBjb2xvciwgcittYXJnaW4sIHIrbWFyZ2luLCByLCBtYXJnaW4sIDApCgoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpLWhlaWdodCkKCQkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QsIHRydWUpCgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgY2FuLnVpLnByb2plY3QpLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7CgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0ciwge29ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25pbXBvcnQuX2RyYXcoY2FuLCBtc2csIGNhbi5Db25mKG1kYi5GSUVMRCksIGNvbG9yLCByK21hcmdpbiwgcittYXJnaW4sIHIsIG1hcmdpbiwgaW5kZXgtMSkKCQkJCX19KQoJCQl9KQoJCX0pCgl9LAoJX2RyYXc6IGZ1bmN0aW9uKGNhbiwgbXNnLCBmaWVsZCwgY29sb3IsIHgsIHksIHIsIG1hcmdpbiwgd2hpY2gpIHsgZmllbGQgPSBmaWVsZHx8bWRiLlZBTFVFCgkJZnVuY3Rpb24gcG9zKHgsIHksIHIsIGFuZ2xlKSB7IGFuZ2xlIC09IDkwOyByZXR1cm4gW3ggKyByICogTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSwgeSArIHIgKiBNYXRoLnNpbihhbmdsZSAqIE1hdGguUEkgLyAxODApXSB9CgkJZnVuY3Rpb24gcGllKHgsIHksIHIsIGJlZ2luLCBzcGFuLCBjb2xvciwgY2IpIHsgY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSCwgc3R5bGU6IGtpdC5EaWN0KAoJCQlodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNvbG9yLCBodG1sLkZJTEwsIGNvbG9yLCAiZCIsIGNhbi5iYXNlLmpvaW5zKFsKCQkJCVsiTSIsIHgsIHldLCBbIkwiXS5jb25jYXQocG9zKHgsIHksIHIsIGJlZ2luKSksIFsiQSIsIHIsIHIsICIwIiwgc3Bhbj4xODA/ICIxIjogIjAiLCAiMSJdLmNvbmNhdChwb3MoeCwgeSwgciwgYmVnaW4rc3BhbikpLCBbIloiXQoJCQldLCBpY2UuU1AsIGljZS5GUyksCgkJKSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50KSB9IH0pIH0KCgkJaWYgKHdoaWNoID09IGNhbi5fbGFzdCkgeyByZXR1cm4gfSBjYW4uX2xhc3QgPSB3aGljaAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5zdmcpLCBjYW4uc3ZnLlZhbHVlKG1kYi5DT1VOVCwgMCkKCQl2YXIgdG90YWwgPSAwOyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgdG90YWwgKz0gY2FuLm9uaW1wb3J0Ll9wYXJzZUludChjYW4sIHZhbHVlW2ZpZWxkXSkgfSkKCQl2YXIgYmVnaW4gPSAwOyBtc2dbY2xpLkNPTE9SXSA9IFtdLCBtc2dbIndlaWdodCJdID0gW10sIG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIHNwYW4gPSBjYW4ub25pbXBvcnQuX3BhcnNlSW50KGNhbiwgdmFsdWVbZmllbGRdKS90b3RhbCozNjAKCQkJdmFyIHAgPSBpbmRleD09d2hpY2g/IHBvcyh4LCB5LCBtYXJnaW4sIGJlZ2luK3NwYW4vMik6IFt4LCB5XSwgYyA9IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF0KCgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMSkgewoJCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuQ0lSQ0xFLCBwb2ludDogW3t4OiB4LCB5OiB5fSwge3g6IHgsIHk6IHkrcn1dLCBzdHlsZToge2ZpbGw6IGNvbG9yWzBdfX0pCgkJCX0gZWxzZSB7CgkJCQlwaWUocFswXSwgcFsxXSwgciwgYmVnaW4sIHNwYW4sIGMsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmltcG9ydC5fZHJhdyhjYW4sIG1zZywgZmllbGQsIGNvbG9yLCB4LCB5LCByLCBtYXJnaW4sIGluZGV4KSB9KSwgYmVnaW4gKz0gc3BhbgoJCQl9CgkJCW1zZy5QdXNoKGNsaS5DT0xPUiwgJzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOicrYysnIj4gICAgIDwvc3Bhbj4nKQoJCQltc2cuUHVzaCgid2VpZ2h0IiwgcGFyc2VJbnQoc3BhbioxMDAvMzYwKSsiJSIpCgkJCWlmIChpbmRleCA9PSB3aGljaCkgeyBjYW4uU3RhdHVzKHZhbHVlKSwgY2FuLlN0YXR1cygid2VpZ2h0IiwgcGFyc2VJbnQoc3BhbioxMDAvMzYwKSsiJSIpIH0KCQl9KQoJfSwKCV9wYXJzZUludDogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgeyB2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkKCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgIm1pIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwIH0KCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgImdpIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwMDAwIH0KCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgImciKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAibSIpKSB7IHJldHVybiBwYXJzZUludCh2YWx1ZSkqMTAwMDAwMCB9CgkJcmV0dXJuIHBhcnNlSW50KHZhbHVlKQoJfQp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIF9zaG93OiBmdW5jdGlvbihjYW4pIHt9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3NwaWRlLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyk7IGlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gfQoKCQljYW4uQ29uZkRlZmF1bHQoe3Jvb3Q6ICJpY2UiLCBmaWVsZDogbXNnLmFwcGVuZFswXSwgc3BsaXQ6IGljZS5QU30pCgkJY2FuLmRpcl9yb290ID0gbXNnLk9wdGlvbihuZnMuRElSX1JPT1QpfHxjYW4uQ29uZigicm9vdCIpCgkJY2FuLl90cmVlID0gY2FuLm9uaW1wb3J0Ll90cmVlKGNhbiwgbXNnLlRhYmxlKCksIGNhbi5Db25mKG1kYi5GSUVMRCksIGNhbi5Db25mKGxleC5TUExJVCkpCgkJaWYgKCFjYW4uX3RyZWVbIiJdKSB7IHJldHVybiB9IGNhbi5fdHJlZVsiIl0ubmFtZSA9IGNhbi5Db25mKCJyb290IikKCgkJY2FuLnNpemUgPSBwYXJzZUludChjYW4uQWN0aW9uKCJzaXplIil8fDI0KQoJCWNhbi5tYXJnaW4gPSBwYXJzZUludChjYW4uQWN0aW9uKCJtYXJnaW4iKXx8MzApCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAiZHJhdyIpCgkJY2FuLnJlcXVpcmUoWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQl9KQoJfSwKCV90cmVlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGZpZWxkLCBzcGxpdCkgewoJCXZhciBub2RlID0ge307IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoIWl0ZW1bZmllbGRdKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UudHJpbVByZWZpeChpdGVtW2ZpZWxkXSwgY2FuLmRpcl9yb290K3NwbGl0KS5zcGxpdChzcGxpdCksIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsKCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpfHwiIiwgbmFtZSA9IGFycmF5LnNsaWNlKDAsIGluZGV4KzEpLmpvaW4oc3BsaXQpCgkJCQlpZiAoIXZhbHVlIHx8IG5vZGVbbmFtZV0pIHsgcmV0dXJuIH0KCgkJCQlub2RlW2xhc3RdID0gbm9kZVtsYXN0XXx8e25hbWU6IGxhc3QsIG1ldGE6IHt9LCBsaXN0OiBbXX0KCQkJCW5vZGVbbGFzdF0ubGlzdC5wdXNoKG5vZGVbbmFtZV0gPSB7CgkJCQkJbmFtZTogdmFsdWUrKGluZGV4PT1hcnJheS5sZW5ndGgtMT8gIiI6IHNwbGl0KSwKCQkJCQltZXRhOiBpdGVtLCBsaXN0OiBbXSwgbGFzdDogbm9kZVtsYXN0XSwKCQkJCQlmaWxlOiBpdGVtW2ZpZWxkXXx8aXRlbS5maWxlLCBoaWRlOiB0cnVlLAoJCQkJfSkKCQkJfSkKCQl9KQoJCXJldHVybiBub2RlCgl9LAoJX2hlaWdodDogZnVuY3Rpb24oY2FuLCB0cmVlLCBkZWVwKSB7IGlmICghdHJlZSkgeyByZXR1cm4gMCB9CgkJdHJlZS5kZWVwID0gZGVlcHx8MAoJCWlmICh0cmVlLmxpc3QubGVuZ3RoID09IDAgfHwgdHJlZS5oaWRlKSB7IHJldHVybiB0cmVlLmhlaWdodCA9IDEgfQoKCQl2YXIgaGVpZ2h0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaGVpZ2h0ICs9IGNhbi5vbmltcG9ydC5faGVpZ2h0KGNhbiwgaXRlbSwgKGRlZXB8fDApKzEpCgkJfSkKCQlyZXR1cm4gdHJlZS5oZWlnaHQgPSBoZWlnaHQKCX0sCglfd2lkdGg6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgZGVlcCkgeyBpZiAoIXRyZWUpIHsgcmV0dXJuIDAgfQoJCXRyZWUuZGVlcCA9IGRlZXB8fDAKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA9PSAwIHx8IHRyZWUuaGlkZSkgewoJCQl0cmVlLnZpZXcgPSBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IGh0bWwuVEVYVCwgcG9pbnQ6IFt7eDogMCwgeTogMH1dLCBzdHlsZToge2lubmVyOiB0cmVlLm5hbWV9fSkKCQkJcmV0dXJuIHRyZWUud2lkdGggPSB0cmVlLnZpZXcuVmFsKCJ0ZXh0TGVuZ3RoIikrY2FuLm1hcmdpbgoJCX0KCgkJdmFyIHdpZHRoID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJd2lkdGggKz0gY2FuLm9uaW1wb3J0Ll93aWR0aChjYW4sIGl0ZW0sIChkZWVwfHwwKSsxKQoJCX0pCgkJcmV0dXJuIHRyZWUud2lkdGggPSB3aWR0aAoJfSwKCV9jb2xvcjogZnVuY3Rpb24oY2FuLCB0cmVlKSB7CgkJcmV0dXJuIHRyZWUubWV0YSYmdHJlZS5tZXRhLmNvbG9yIHx8ICh0cmVlLmxpc3QgPT0gMD8gY2xpLlBVUlBMRTogY2xpLllFTExPVykKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBwID0gY2FuLkFjdGlvbihpY2UuVklFVywgY2FuLnN1cC52aWV3fHxjYW4uQWN0aW9uKGljZS5WSUVXKSkKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLnJlcXVlc3QoKSkKCQljYW4uc3ZnLlZhbChodG1sLkZPTlRfU0laRSwgY2FuLkFjdGlvbigic2l6ZSIpKQoJCWNhbi5vbmFjdGlvbltwXShldmVudCwgY2FuLCBwKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnlKjmiLfmk43kvZwiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi5qiq5ZCRIiwgIue6teWQkSJdLCBbInNpemUiLCAyNCwgMzIsIDQ4XSwgWyJtYXJnaW4iLCAzMCwgNTAsIDEwMF0sCgldLAoJc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2l6ZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNpemUiKXx8MzApLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCW1hcmdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFyZ2luID0gcGFyc2VJbnQoY2FuLkFjdGlvbigibWFyZ2luIil8fDMwKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgki5qiq5ZCRIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uaW1wb3J0Ll9oZWlnaHQoY2FuLCBjYW4uX3RyZWVbIiJdKQoJCWNhbi5zdXAudmlldyA9IGJ1dHRvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZykKCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGNhbi5fdHJlZVsiIl0uaGVpZ2h0KmNhbi5tYXJnaW4rMipjYW4ubWFyZ2luKQoJCWNhbi53aWR0aCA9IDAsIGNhbi5vbmFjdGlvbi5fZHJhd19ob3Jpem9udGFsKGNhbiwgY2FuLl90cmVlWyIiXSwgY2FuLm1hcmdpbiwgY2FuLm1hcmdpbikKCQljYW4uc3ZnLlZhbChodG1sLldJRFRILCBjYW4ud2lkdGgrY2FuLm1hcmdpbikKCX0sCgki57q15ZCRIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uaW1wb3J0Ll93aWR0aChjYW4sIGNhbi5fdHJlZVsiIl0pCgkJY2FuLnN1cC52aWV3ID0gYnV0dG9uLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uc3ZnKQoKCQljYW4uc3ZnLlZhbChodG1sLldJRFRILCBjYW4uX3RyZWVbIiJdLndpZHRoKzIqY2FuLm1hcmdpbikKCQljYW4uaGVpZ2h0ID0gMCwgY2FuLm9uYWN0aW9uLl9kcmF3X3ZlcnRpY2FsKGNhbiwgY2FuLl90cmVlWyIiXSwgY2FuLm1hcmdpbiwgY2FuLm1hcmdpbitjYW4ubWFyZ2luKQoJCWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hULCBjYW4uaGVpZ2h0K2Nhbi5tYXJnaW4pCgl9LAoJX2RyYXc6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSwgc3R5bGUpIHsgdmFyIGNvbG9yID0gY2FuLm9uaW1wb3J0Ll9jb2xvcihjYW4sIHRyZWUpCgkJdHJlZS52aWV3ID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBodG1sLlRFWFQsIHBvaW50OiBbe3g6IHgsIHk6IHl9XSwgc3R5bGU6IGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCWh0bWwuU1RST0tFLCBjb2xvciwgaHRtbC5GSUxMLCBjb2xvciwgaHRtbC5URVhUX0FOQ0hPUiwgInN0YXJ0IiwgImlubmVyIiwgdHJlZS5uYW1lfHx0cmVlLmZpbGUsCgkJKSwgc3R5bGUpLCB9KSwgY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgdHJlZS52aWV3LCBjYW4sIHRyZWUpCgl9LAoJX2RyYXdfdmVydGljYWw6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSkgeyB0cmVlLnggPSB4LCB0cmVlLnkgPSB5CgkJY2FuLm9uYWN0aW9uLl9kcmF3KGNhbiwgdHJlZSwgeCt0cmVlLndpZHRoLzIsIHksIGtpdC5EaWN0KGh0bWwuVEVYVF9BTkNIT1IsICJtaWRkbGUiKSkKCgkJdHJlZS5oZWlnaHQgPSBjYW4ubWFyZ2luCgkJaWYgKHkrdHJlZS5oZWlnaHQgPiBjYW4uaGVpZ2h0KSB7IGNhbi5oZWlnaHQgPSB5K3RyZWUuaGVpZ2h0IH0KCQlpZiAodHJlZS5oaWRlKSB7IHJldHVybiB9CgoJCXZhciBvZmZzZXQgPSAwOyBjYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRIMlYsIHBvaW50OiBbCgkJCQl7eDogeCt0cmVlLndpZHRoLzIsIHk6IHkrdHJlZS5oZWlnaHQtY2FuLm1hcmdpbi8yfSwKCQkJCXt4OiB4K29mZnNldCtpdGVtLndpZHRoLzIsIHk6IHkrdHJlZS5oZWlnaHQrY2FuLm1hcmdpbi8yfSwKCQkJXSwgc3R5bGU6IHtzdHJva2U6IGNsaS5DWUFOfX0pCgoJCQljYW4ub25hY3Rpb24uX2RyYXdfdmVydGljYWwoY2FuLCBpdGVtLCB4K29mZnNldCwgeSt0cmVlLmhlaWdodCtjYW4ubWFyZ2luKQoJCQlvZmZzZXQgKz0gaXRlbS53aWR0aAoJCX0pCgl9LAoJX2RyYXdfaG9yaXpvbnRhbDogZnVuY3Rpb24oY2FuLCB0cmVlLCB4LCB5KSB7IHRyZWUueCA9IHgsIHRyZWUueSA9IHkKCQljYW4ub25hY3Rpb24uX2RyYXcoY2FuLCB0cmVlLCB4LCB5K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMiwga2l0LkRpY3QoaHRtbC5URVhUX0FOQ0hPUiwgInN0YXJ0IikpCgoJCXRyZWUud2lkdGggPSB0cmVlLnZpZXcuVmFsKCJ0ZXh0TGVuZ3RoIil8fCh0cmVlLm5hbWV8fCIiKS5sZW5ndGgqMTAKCQlpZiAoeCt0cmVlLndpZHRoID4gY2FuLndpZHRoKSB7IGNhbi53aWR0aCA9IHgrdHJlZS53aWR0aCB9CgkJaWYgKHRyZWUuaGlkZSkgeyByZXR1cm4gfQoKCQl2YXIgb2Zmc2V0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSDJILCBwb2ludDogWwoJCQkJe3g6IHgrdHJlZS53aWR0aCtjYW4ubWFyZ2luLzgsIHk6IHkrdHJlZS5oZWlnaHQqY2FuLm1hcmdpbi8yfSwKCQkJCXt4OiB4K3RyZWUud2lkdGgrY2FuLm1hcmdpbioyLTIqY2FuLm1hcmdpbi84LCB5OiB5K29mZnNldCtpdGVtLmhlaWdodCpjYW4ubWFyZ2luLzJ9CgkJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuQ1lBTn19KQoKCQkJY2FuLm9uYWN0aW9uLl9kcmF3X2hvcml6b250YWwoY2FuLCBpdGVtLCB4K3RyZWUud2lkdGgrMipjYW4ubWFyZ2luLCB5K29mZnNldCkKCQkJb2Zmc2V0ICs9IGl0ZW0uaGVpZ2h0KmNhbi5tYXJnaW4KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0cmVlKSB7IHZhciB5ID0gdHJlZS55K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMgoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5wb3MpLCBjYW4ucG9zID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUkVDVCwgcG9pbnQ6IFsKCQkJe3g6IHRyZWUueC1jYW4ubWFyZ2luLzQsIHk6IHktY2FuLm1hcmdpbi8yfSwge3g6IHRyZWUueCt0cmVlLndpZHRoK2Nhbi5tYXJnaW4vOCwgeTogeStjYW4ubWFyZ2luLzJ9LAoJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuUkVELCBmaWxsOiBodG1sLk5PTkV9fSksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRyZWUpIHsKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA+IDAgfHwgdHJlZS50YWdzIHx8IHRyZWUubmFtZS5lbmRzV2l0aChjYW4uQ29uZihsZXguU1BMSVQpKSkgewoJCQlyZXR1cm4gdHJlZS5oaWRlID0gIXRyZWUuaGlkZSwgY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXShldmVudCwgY2FuKQoJCX0KCgkJZm9yICh2YXIgbm9kZSA9IHRyZWU7IG5vZGU7IG5vZGUgPSBub2RlLmxhc3QpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIG5vZGUubWV0YSkgfQoKCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpLCBjYW4uYmFzZS5PYmooY2FuLkNvbmYobGV4LlBSRUZJWCksIFtdKS5jb25jYXQoW2Nhbi5PcHRpb24oInJlcG9zIil8fCIiLCB0cmVlLmZpbGV8fCIiLCB0cmVlLm5hbWVdKSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gY2FuLm9uZGV0YWlsLnBsdWdpbihjYW4sICJ3ZWIuY29kZS5pbm5lciIsIFtjYW4uZGlyX3Jvb3QsIHRyZWUuZmlsZSwgdHJlZS5saW5lXSwgY29kZS5JTk5FUikgfQoJCQlpZiAobXNnLkFwcGVuZChtZGIuSU5ERVgpKSB7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyBjYW4ub25kZXRhaWwucGx1Z2luKGNhbiwgdmFsdWUuaW5kZXgsIFtdKSB9KTsgcmV0dXJuIH0KCgkJCWlmIChtc2cuT3B0aW9uKGxleC5TUExJVCkpIHsKCQkJCXRyZWUubGlzdCA9IGNhbi5vbmltcG9ydC5fdHJlZShjYW4sIG1zZy5UYWJsZSgpLCBtc2cuT3B0aW9uKG1kYi5GSUVMRCl8fG1zZy5hcHBlbmRbMF0sIG1zZy5PcHRpb24obGV4LlNQTElUKSlbIiJdLmxpc3R8fFtdCgkJCQljYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmxhc3QgPSB0cmVlIH0pCgkJCX0gZWxzZSB7CgkJCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgeyB0cmVlLmxpc3QucHVzaCh7CgkJCQkJdHlwZTogInRhZ3MiLCBuYW1lOiBpdGVtLm5hbWV8fGl0ZW0uZmlsZXx8aXRlbVttc2cuYXBwZW5kWzBdXSwKCQkJCQltZXRhOiBpdGVtLCBsaXN0OiBbXSwgbGFzdDogdHJlZSwKCQkJCQlmaWxlOiBpdGVtLmZpbGUsIGxpbmU6IGl0ZW0ubGluZSwgaGlkZTogdHJ1ZSwKCQkJCX0pIH0pCgkJCX0KCQkJdHJlZS50YWdzID0gdHJ1ZSwgdHJlZS5oaWRlID0gIXRyZWUuaGlkZSwgY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXShldmVudCwgY2FuKQoJCX0sIHRydWUpCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGluZGV4LCBhcmdzLCBwcmVmaXgpIHsKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuRkxPQVQsIGluZGV4OiBpbmRleCwgYXJnczogYXJncywgbW9kZTogImZsb2F0In0sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBwcmVmaXh8fFtpY2UuUlVOLCBpbmRleF0sIGNtZHMsIGNiKSB9CgkJCXN1Yi5Nb2RlKCJmbG9hdCIpLCBjYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsgbGVmdCA9IGxlZnR8fDAKCQkJCXZhciB0b3AgPSBjYW4uTW9kZSgpID09IHVuZGVmaW5lZD8gMTIwOiAwOyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgdG9wID0gY2FuLnVzZXIuaXNMYW5kc2NhcGUoKT8gMDogNDggfQoJCQkJc3ViLkNvbmZIZWlnaHQoaGVpZ2h0LXRvcC0yKmh0bWwuQUNUSU9OX0hFSUdIVC0oY2FuLnVzZXIuaXNNb2JpbGUmJiFjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAyKmh0bWwuQUNUSU9OX0hFSUdIVDogMCkpLCBzdWIuQ29uZldpZHRoKHdpZHRoKQoJCQkJY2FuLm9ubW90aW9uLm1vdmUoY2FuLCBzdWIuX3RhcmdldCwge3Bvc2l0aW9uOiBodG1sLkZJWEVELCBsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pCgkJCX0pCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS90cmVuZC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbigiYnJhbmNoIikpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4uZGF0YSA9IG1zZy5UYWJsZSgpLCBjYW4ub25pbXBvcnQuX3N1bShjYW4pCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgcGFyc2VJbnQobXNnLk9wdGlvbihodG1sLlNQRUVEKXx8IjEwMCIpKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJkcmF3IikKCQljYW4ucmVxdWlyZShbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIiwgIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCX0pCgl9LAoJX3N1bTogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIGJlZ2luID0gIiIsIGNvdW50ID0gMCwgcmVzdCA9IDAsIGFkZCA9IDAsIGRlbCA9IDAsIG1heCA9IDAKCQljYW4ubWF4ID0gMCwgY2FuLm1pbiA9IDAsIGNhbi5saXN0ID0gY2FuLmNvcmUuTGlzdChjYW4uZGF0YSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CgkJCXZhciBsaW5lID0gewoJCQkJZGF0ZTogdmFsdWVbY2FuLl9tc2cuYXBwZW5kWzBdXSwKCQkJCXRleHQ6IHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFs0XV0sCgkJCQlhZGQ6IHBhcnNlSW50KHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFsxXV0pLAoJCQkJZGVsOiBwYXJzZUludCh2YWx1ZVtjYW4uX21zZy5hcHBlbmRbMl1dKSwKCQkJfQoKCQkJbGluZS5iZWdpbiA9IHJlc3QKCQkJbGluZS5tYXggPSByZXN0ICsgbGluZS5hZGQKCQkJbGluZS5taW4gPSByZXN0IC0gbGluZS5kZWwKCQkJbGluZS5jbG9zZSA9IHJlc3QgKyBsaW5lLmFkZCAtIGxpbmUuZGVsCgoJCQliZWdpbiA9IGJlZ2luIHx8IHZhbHVlLmRhdGUsIGNvdW50KysKCQkJcmVzdCA9IGxpbmUuY2xvc2UsIGFkZCArPSBsaW5lLmFkZCwgZGVsICs9IGxpbmUuZGVsCgoJCQlpZiAobGluZS5tYXggLSBsaW5lLm1pbiA+IG1heCkgeyBtYXggPSBsaW5lLm1heCAtIGxpbmUubWluIH0KCQkJaWYgKGxpbmUubWF4ID4gY2FuLm1heCkgeyBjYW4ubWF4ID0gbGluZS5tYXggfQoJCQlpZiAobGluZS5taW4gPCBjYW4ubWluKSB7IGNhbi5taW4gPSBsaW5lLm1pbiB9CgkJCXJldHVybiBsaW5lCgkJfSkKCQljYW4uU3RhdHVzKHsiZnJvbSI6IGJlZ2luLCAiY29tbWl0IjogY291bnQsICJ0b3RhbCI6IGFkZCtkZWwsICJtYXgiOiBtYXh9KQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBoZWlnaHQgPSBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbikKCQl2YXIgd2lkdGggPSBwYXJzZUludChjYW4uQ29uZldpZHRoKCkpLCBzcGFjZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNwYWNlIil8fCIxMCIpCgkJdmFyIHN0ZXAgPSBwYXJzZUludCgod2lkdGgtMipzcGFjZSkgLyBjYW4ubGlzdC5sZW5ndGgpCgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9tc2cpCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGhlaWdodCksIGNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIHdpZHRoKQoJCXJldHVybiB7aGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCwgc3BhY2U6IHNwYWNlLCBzdGVwOiBzdGVwfQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXSh7fSwgY2FuKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi6LaL5Yq/5Zu+IiwgIuafseeKtuWbviIsICLmlbDmja7mupAiXSwKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJWyJzcGFjZSIsIDEwLCAyMCwgNTAsIDEwMF0sCgkJW2h0bWwuU1BFRUQsIDEwLCAyMCwgNTAsIDEwMF0sCgldLAoJIui2i+WKv+WbviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGFyZ3MgPSBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pCgkJZnVuY3Rpb24gc2NhbGUoeSkgeyByZXR1cm4gKHkgLSBjYW4ubWluKS8oY2FuLm1heCAtIGNhbi5taW4pKihhcmdzLmhlaWdodC0yKmFyZ3Muc3BhY2UpIH0KCQlmdW5jdGlvbiBvcmRlcihpbmRleCwgeCwgeSkgeyByZXR1cm4ge3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3gsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoeSl9IH0KCgkJdmFyIGJsYWNrID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLkJMQUNLLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLkJMQUNLLCBodG1sLkZJTEwsIGNsaS5CTEFDSykpCgkJdmFyIHdoaXRlID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLldISVRFLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLldISVRFLCBodG1sLkZJTEwsIGNsaS5XSElURSkpCgoJCWNhbi5jb3JlLk5leHQoY2FuLmxpc3QsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGNhbi5TdGF0dXMobGluZSkKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuTElORSwgcG9pbnQ6IFsKCQkJCW9yZGVyKGluZGV4LCBhcmdzLnN0ZXAvMiwgbGluZS5taW4pLCBvcmRlcihpbmRleCwgYXJncy5zdGVwLzIsIGxpbmUubWF4KSwKCQkJXX0sIGxpbmUuYmVnaW4gPCBsaW5lLmNsb3NlPyB3aGl0ZTogYmxhY2spCgoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5SRUNULCBwb2ludDogWwoJCQkJb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80LCBsaW5lLmNsb3NlKSwgb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80KjMsIGxpbmUuYmVnaW4pLAoJCQldLCBfaW5pdDogZnVuY3Rpb24odmlldykgewoJCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgZnVuY3Rpb24oa2V5LCBjYikgeyB2aWV3W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuLCBsaW5lKSB9IH0pCgkJCX19LCBsaW5lLmJlZ2luIDwgbGluZS5jbG9zZT8gd2hpdGU6IGJsYWNrKQoKCQkJY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJfSkKCX0sCgki5p+x54q25Zu+IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYXJncyA9IGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbikKCQl2YXIgbWF4ID0ge30sIG1pbiA9IHt9OyBjYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCB3aGljaCkgewoJCQljYW4uY29yZS5MaXN0KGNhbi5kYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKCQkJCXZhciB2ID0gcGFyc2VJbnQodmFsdWVba2V5XSl8fDA7IGlmIChpbmRleCA9PSAwKSB7CgkJCQkJcmV0dXJuIG1heFtrZXldID0gdiwgbWluW2tleV0gPSB2CgkJCQl9CgkJCQlpZiAodiA+IG1heFtrZXldKSB7IG1heFtrZXldID0gdiB9CgkJCQlpZiAodiA8IG1pbltrZXldKSB7IG1pbltrZXldID0gdiB9CgkJCX0pCgkJfSkKCgkJZnVuY3Rpb24gc2NhbGUoa2V5LCB5KSB7IHJldHVybiAoeSAtIG1pbltrZXldKS8obWF4W2tleV0gLSBtaW5ba2V5XSkqKGFyZ3MuaGVpZ2h0LTIqYXJncy5zcGFjZSkgfQoKCQl2YXIgd2lkdGggPSBhcmdzLnN0ZXAvY2FuLl9tc2cuYXBwZW5kLmxlbmd0aCwgd2hpY2ggPSAwCgkJY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgd2hpY2gpIHsgaWYgKG1heFtrZXldID09IG1pbltrZXldKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLk5leHQoY2FuLmRhdGEsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGlmIChwYXJzZUludChsaW5lW2tleV0pID09IDApIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKndoaWNoKzIsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoa2V5LCBwYXJzZUludChsaW5lW2tleV0pKX0sCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKih3aGljaCsxKSsyLCB5OiBhcmdzLmhlaWdodC1hcmdzLnNwYWNlfSwKCQkJCV0sIHN0eWxlOiBraXQuRGljdChodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNsaS5XSElURSwgaHRtbC5GSUxMLCBjbGkuV0hJVEUsIHN2Zy5SWCwgMCwgc3ZnLlJZLCAwKSwgX2luaXQ6IGZ1bmN0aW9uKHZpZXcpIHsKCQkJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCBmdW5jdGlvbihrZXksIGNiKSB7IHZpZXdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4sIGxpbmUpIH0gfSkKCQkJCX19KSwgY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJCX0pLCB3aGljaCsrCgkJfSkKCX0sCgki5pWw5o2u5rqQIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIGNhbi5fbXNnLCBudWxsLCBjYW4uX291dHB1dCkKCX0sCgoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJc3BhY2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGNhbi5TdGF0dXMobGluZSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbImZyb20iLCAiY29tbWl0IiwgInRvdGFsIiwgIm1heCIsICJkYXRlIiwgInRleHQiLCAiYWRkIiwgImRlbCJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJaWYgKGhlaWdodCA9PSBpY2UuQVVUTykgeyBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCS8vIGNhbi5pc0Z1bGxNb2RlKCkgfHwgKGhlaWdodCA9IGNhbi5iYXNlLk1heChjYW4uQ29uZkhlaWdodCgpLCA2MDApKQoJCX0KCQlpZiAoaGVpZ2h0IDwgMjAwKSB7IGhlaWdodCA9IDIwMCB9CgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodHx8Y2FuLl9yb290Ll9oZWlnaHQvMikKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS92aWRlby5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuc2VsZWN0KGNhbiwgbXNnKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5wbGF5KGV2ZW50LCBjYW4pIH0pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsICJ0ZCBhIiwgZnVuY3Rpb24oYSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBhLCB7dGFyZ2V0OiAiIn0pCgkJfSkKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLkNsZWFyKCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uT3B0aW9uKCJ0YWdzIiksIGZ1bmN0aW9uKGEsIGluZGV4KSB7CgkJCW1zZy5QdXNoKG1kYi5JTkRFWCwgaW5kZXgpCgkJCW1zZy5QdXNoKG1kYi5OQU1FLCBhLmlubmVyVGV4dCkKCQkJbXNnLlB1c2gobWRiLkxJTkssIGEuaHJlZikKCQkJYS5ocmVmID09IGxvY2F0aW9uLmhyZWYgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGkpIHsKCQkJCQlpLTEgPT0gaW5kZXggJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCAic2VsZWN0IikKCQkJCX0pCgkJCX0pCgkJfSkKCQltc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTLCBKU09OLnN0cmluZ2lmeShbCgkJCXtuYW1lOiAidGltZSIsIHZhbHVlOiBjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpfSwKCQkJe25hbWU6ICJjb3VudCIsIHZhbHVlOiBtc2cuTGVuZ3RoKCl9LAoJCV0pKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2cKCQltc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgpIHsKCQkJaWYgKGxpbmUubGluayA9PSBsb2NhdGlvbi5ocmVmKSB7CgkJCQlsb2NhdGlvbi5ocmVmID0gbXNnLmxpbmtbaW5kZXgrMV0KCQkJfQoJCX0pCgl9LAoJcGxheTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBodG1sLlZJREVPLCBmdW5jdGlvbih2aWRlbykgewoJCQl2aWRlby5wbGF5YmFja1JhdGUgPSBwYXJzZUZsb2F0KGNhbi5PcHRpb24oInJhdGUiKSkKCQkJdmlkZW8uY3VycmVudFRpbWUgPSBwYXJzZUludChjYW4uT3B0aW9uKCJza2lwIikpCgkJCXZpZGVvLm9udGltZXVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAodmlkZW8uY3VycmVudFRpbWUgPiBwYXJzZUludChjYW4uT3B0aW9uKCJuZXh0IikpKSB7CgkJCQkJY2FuLm9uYWN0aW9uLm5leHQoZXZlbnQsIGNhbikKCQkJCX0KCQkJfSwgdmlkZW8ucGxheSgpLCB2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi90YWJsZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJdmFyIGNicyA9IGNhbi5vbmltcG9ydFtjYW4uQ29uZihjdHguU1RZTEUpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYnMpKSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNhbi5fYXJnc1tjdHguU1RZTEVdKQoJCQljYW4uY29yZS5DYWxsRnVuYyhjYnMsIHsKCQkJCWNhbjogY2FuLCBtc2c6IG1zZywgdGFyZ2V0OiB0YXJnZXQsCgkJCQlsaXN0OiBtc2cuVGFibGUoKSwKCQkJfSkKCQkJcmV0dXJuIGNicyhjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdGFyZ2V0KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCgl6b25lOiBmdW5jdGlvbihjYW4sIGxpc3QsIHRhcmdldCkgeyB2YXIgY29sb3IgPSBbIiJdCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih6b25lLCBpbmRleCkgeyBjYW4uYmFzZS5pc1N0cmluZyh6b25lKSAmJiAoem9uZSA9IHtuYW1lOiB6b25lfSk7IHJldHVybiB6b25lICYmIHt2aWV3OiBodG1sLlpPTkUrIiAiK3pvbmUubmFtZSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5OQU1FLCBpbm5lcjogY2FuLnVzZXIudHJhbnMoY2FuLCB6b25lLm5hbWUpLCBzdHlsZToge2JhY2tncm91bmQ6IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF19LCBvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB6b25lLl9hY3Rpb24pLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgem9uZS5fdGFyZ2V0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl6b25lLl9tZW51PyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHpvbmUuX21lbnUubWV0YSwgem9uZS5fbWVudS5saXN0fHxjYW4uY29yZS5JdGVtKHpvbmUuX21lbnUubWV0YSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJCQkobWV0YVtidXR0b25dfHxjYW4ub25hY3Rpb25bYnV0dG9uXSkoZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQkJfSk6IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJCSLmipjlj6AiOiBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9MSVNULCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBmYWxzZSkgfSkgfSwKCQkJCQki5bGV5byAIjogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHpvbmUuX3RhcmdldCwgaHRtbC5ESVZfTElTVCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgdHJ1ZSkgfSkgfSwKCQkJCQki5Yi35pawIjogZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHpvbmUuX3RhcmdldCksIHpvbmUuX2luaXQoem9uZS5fdGFyZ2V0KSB9LAoJCQkJfSwgWyLmipjlj6AiLCAi5bGV5byAIiwgIuWIt+aWsCJdKQoJCQl9fSwKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHpvbmUuX2FjdGlvbiA9IHRhcmdldAoJCQkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbe2lucHV0OiBodG1sLlRFWFQsIHBsYWNlaG9sZGVyOiAic2VhcmNoIiwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0xJU1QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIHRydWUpIH0pCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJkaXYubmFtZSIsIGZ1bmN0aW9uKG5hbWUpIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIG5hbWUuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB9KQoJCQkJCX0pCgkJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgem9uZS5fc2VhcmNoID0gdGFyZ2V0CgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCB0YXJnZXQsIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5vZmZzZXRXaWR0aC0zMikgfSkKCQkJCQkvLyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge25hbWU6IHpvbmUubmFtZX0sIHRhcmdldCkKCQkJCX19XSwgdGFyZ2V0LCB7fSkKCQkJfX0sCgkJCXt2aWV3OiBodG1sLkxJU1QsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnVpW3pvbmUubmFtZV0gPSB6b25lCgkJCQl6b25lLl90YXJnZXQgPSB0YXJnZXQsIHpvbmUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCB6b25lLl9pbml0KHRhcmdldCkgfQoJCQkJY2FuLmJhc2UuaXNGdW5jKHpvbmUuX2luaXQpICYmIHpvbmUuX2luaXQodGFyZ2V0LCB6b25lKQoJCQl9fQoJCV19IH0pKQoJfSwKCXRyZWU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgZmllbGQsIHNwbGl0LCBjYiwgdGFyZ2V0LCBub2RlKSB7CgkJbm9kZSA9IG5vZGV8fHsiIjogdGFyZ2V0fTsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW1bZmllbGRdICYmIGNhbi5jb3JlLkxpc3QoaXRlbVtmaWVsZF0uc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IGlmICghdmFsdWUpIHsgcmV0dXJuIH0KCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpLCBuYW1lID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgrMSkuam9pbihzcGxpdCkKCQkJCWlmIChub2RlW25hbWVdKSB7IHJldHVybiB9CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlW2xhc3RdLCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogW3t2aWV3OiBbInN3aXRjaCIsICJkaXYiLCAoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiImIzg5NjM7IildfSwge3ZpZXc6IFsibmFtZSIsIGh0bWwuRElWLCB2YWx1ZSsoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiIiKV0sIF9pbml0OiBpdGVtLl9pbml0fV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaW5kZXggPCBhcnJheS5sZW5ndGggLSAxPyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbm9kZVtuYW1lXSwgZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aVsic3dpdGNoIl0sICJvcGVuIikKCQkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHVpWyJzd2l0Y2giXSwgIm9wZW4iKQoJCQkJCX0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtKQoJCQkJCWlmIChub2RlW25hbWVdLmNoaWxkRWxlbWVudENvdW50ID09IDIpIHsgbm9kZVtuYW1lXS5maXJzdENoaWxkLmNsaWNrKCkgfQoJCQkJfX0sIHt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfSwgX2luaXQ6IGZ1bmN0aW9uKGxpc3QpIHsgaXRlbS5leHBhbmQgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBsaXN0LCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spIH19XSkKCQkJCW5vZGVbbmFtZV0gPSB1aS5saXN0CgkJCX0pCgkJfSk7IHJldHVybiBub2RlCgl9LAoJbGlzdDogZnVuY3Rpb24oY2FuLCByb290LCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4uY29yZS5MaXN0KHJvb3QubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0pIHx8IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQl9fSwge3ZpZXc6IGh0bWwuTElTVH1dKTsgY2FuLm9uaW1wb3J0Lmxpc3QoY2FuLCBpdGVtLCBjYiwgdWkubGlzdCkKCQl9KQoJfSwKCWl0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgY2IsIGNicywgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8KGNhbi51aSAmJiBjYW4udWkucHJvamVjdD8gY2FuLnVpLnByb2plY3Q6IGNhbi5fb3V0cHV0KQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uaWNrfHxpdGVtLm5hbWVdLAoJCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgdWkuZmlyc3QsIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGh0bWwuSVRFTSksIHVpLmZpcnN0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhldmVudCwgdWkuZmlyc3QpIH0sCgkJfV0pOyByZXR1cm4gdWkuZmlyc3QKCX0sCglpdGVtbGlzdDogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0Ll9saXN0ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2IoZXZlbnQsIGl0ZW0sIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYnMoZXZlbnQsIGl0ZW0pIH19CgkJfSkgfV0sIHRhcmdldC5uZXh0U2libGluZywgdGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCBhY3Rpb24sIGVhY2gpIHsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBhY3Rpb24sIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odGFicykgewoJCQlyZXR1cm4ge3RleHQ6IFt0YWJzLm5hbWUsIGh0bWwuRElWLCBodG1sLlRBQlNdLCB0aXRsZTogdGFicy50ZXh0LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgdGFicykKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWZ1bmN0aW9uIGNsb3NlKGl0ZW0pIHsgdmFyIG5leHQgPSBpdGVtLm5leHRTaWJsaW5nfHxpdGVtLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkKCQkJCQlpZiAobmV4dCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoaXRlbS5fbWV0YSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pIH0KCQkJCX0KCQkJCXZhciBtZW51ID0gdGFicy5fbWVudXx8c2h5KHt9LCBbXSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgeyAobWV0YVtidXR0b25dKShldmVudCwgY2FuLCBidXR0b24pIH0pCgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpdGVtLCB7ZHJhZ2dhYmxlOiB0cnVlLCBfY2xvc2U6IGZ1bmN0aW9uKCkgeyBjbG9zZShpdGVtKSB9LCBfbWV0YTogdGFicywKCQkJCQlvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCQkJCSJDbG9zZSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNsb3NlKGl0ZW0pIH0sCgkJCQkJCSJDbG9zZSBvdGhlcnMiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGZ1bmN0aW9uKF9pdGVtKSB7IF9pdGVtID09IGl0ZW0gfHwgY2xvc2UoX2l0ZW0pIH0pIH0sCgkJCQkJCSJDbG9zZSBhbGwiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGNsb3NlKSB9LAoJCQkJCSksIG1lbnUubWV0YSksIFsiQ2xvc2UiLCAiQ2xvc2Ugb3RoZXJzIiwgIkNsb3NlIGFsbCIsICIiXS5jb25jYXQobWVudS5saXN0KSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQkJCQltZW51KGV2ZW50LCBidXR0b24sIG1ldGEpCgkJCQkJfSkgfSwKCQkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgYWN0aW9uLl9kcm9wID0gZnVuY3Rpb24oYmVmb3JlKSB7IGFjdGlvbi5pbnNlcnRCZWZvcmUoZXZlbnQudGFyZ2V0LCBiZWZvcmUpIH0gfSwKCQkJCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBhY3Rpb24uX2Ryb3AoZXZlbnQudGFyZ2V0KSB9LAoJCQkJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgYWN0aW9uLl9kcm9wKGV2ZW50LnRhcmdldCkgfSwKCQkJCX0pCgkJCQljYW4uYmFzZS5pc0Z1bmMoZWFjaCkgJiYgZWFjaChpdGVtKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGl0ZW0uY2xpY2soKSB9KQoJCQl9fQoJCX0pKS5maXJzdAoJfSwKCWNhcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt2aWV3OiBodG1sLklURU0rIiAiKyh2YWx1ZS5zdGF0dXN8fCIiKSwgbGlzdDogWwoJCQkJe3ZpZXc6IFt3aWtpLlRJVExFLCBodG1sLkRJViwgdmFsdWUubmFtZV19LAoJCQkJe3ZpZXc6IFt3aWtpLkNPTlRFTlQsIGh0bWwuRElWLCB2YWx1ZS50ZXh0XX0sCgkJCQl7dmlldzogaHRtbC5BQ1RJT04sIGlubmVyOiB2YWx1ZS5hY3Rpb24sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgdmFsdWUpLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdKQoJCQkJfX0sCgkJCV19CgkJfSkpCgl9LAoJcGx1ZzogZnVuY3Rpb24oY2FuLCBtZXRhLCB0YXJnZXQsIGNiKSB7IGlmICghbWV0YSB8fCAhbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCW1ldGEudHlwZSA9ICJwbHVnIiwgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIG1ldGEsIGZ1bmN0aW9uKHN1YikgeyBzdWIuc3VwID0gY2FuCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIG1ldGEuaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4udWkgJiYgdGFyZ2V0ID09IGNhbi51aS5wcm9maWxlPyBjYW4ub25tb3Rpb24uaGlkZGVuKHN1YiwgdGFyZ2V0KTogY2FuLm9ubW90aW9uLmhpZGRlbihzdWIsIHN1Yi5fdGFyZ2V0KSB9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvZnJhbWUuanMiClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi5pCc57Si5byV5pOOIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgY2IsIHRhcmdldCkgewoJCWlmIChjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCkpIHsgY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLk1TR19TRVNTSUQpKQoJCQlyZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLk1TR19TRVNTSUQsICIiKSAKCQl9CgoJCWNhbi5yZXF1aXJlKFtjYW4udm9sY2Fub10sIG51bGwsIGZ1bmN0aW9uKGNhbiwga2V5LCBzdWIpIHsgY2FuW2tleV0gPSBzdWIgfSkKCQljYW4ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGNtZHMgPSBjbWRzfHxbXQoJCQlyZXR1cm4gKGNhbi5vbmVuZ2luZVtjbWRzWzBdXXx8Y2FuLm9uZW5naW5lLl9yZW1vdGUpKGV2ZW50LCBjYW4sIG1zZywgY2FuLCBjbWRzLCBjYikKCQl9LCBWb2xjYW5vcy5tZXRhLmFyZ3MgPSBjYW4udXNlci5hcmdzKGNhbikKCQljYW4udXNlci50aXRsZShjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlRJVExFKXx8Y2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCl8fGxvY2F0aW9uLmhvc3QpCgoJCXdpbmRvdy5vbnVubG9hZCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgIm9udW5sb2FkIikgfQoKCQljYW4uY29yZS5OZXh0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgaXRlbS50eXBlID0gY2hhdC5QQU5FTAoJCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBjYW4uYmFzZS5Db3B5KGl0ZW0sIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuUklWRVIsIGl0ZW0ubmFtZV0pKSwgaXRlbS5saXN0LCBmdW5jdGlvbihwYW5lbCkgewoJCQkJcGFuZWwucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBwYW5lbC5yZXF1ZXN0KGV2ZW50KTsgY21kcyA9IGNtZHN8fFtdCgkJCQkJcmV0dXJuIChjYW4ub25lbmdpbmVbY21kc1swXV18fGNhbi5vbmVuZ2luZS5fcmVtb3RlKShldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikKCQkJCX0sIGNhbltpdGVtLm5hbWVdID0gcGFuZWwsIHBhbmVsLl9yb290ID0gY2FuLCBwYW5lbC5fdHJhbnMgPSBwYW5lbC5vbmFjdGlvbiAmJiBwYW5lbC5vbmFjdGlvbi5fdHJhbnN8fHt9CgoJCQkJY2FuLmNvcmUuSXRlbShwYW5lbC5vbnBsdWdpbiwgZnVuY3Rpb24oa2V5LCBjbWQpIHsKCQkJCQlwYW5lbC5vbnBsdWdpbi5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNhbi5iYXNlLmlzRnVuYyhjbWQpICYmIGNhbi5vbmVuZ2luZS5wbHVnaW4ocGFuZWwsIGtleSwgY21kKQoJCQkJfSkKCQkJCWNhbi5jb3JlLkl0ZW1DQihwYW5lbC5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgewoJCQkJCWNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBrZXksIGZ1bmN0aW9uKG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogcGFuZWwsIG1zZzogbXNnfSkgfSkKCQkJCX0pLCBjYW4uY29yZS5DYWxsRnVuYyhbcGFuZWwub25hY3Rpb24sIGNoYXQuX0lOSVRdLCB7Y2FuOiBwYW5lbCwgY2I6IG5leHQsIHRhcmdldDogcGFuZWwuX3RhcmdldH0pCgkJCX0sIHRhcmdldCkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGNhbi51c2VyLnRpdGxlKCksIGljZS5SVU4sIGNhbikKCQkJY2FuLm9ubW90aW9uLl9pbml0KGNhbiwgdGFyZ2V0KSwgY2FuLm9ua2V5bWFwLl9pbml0KGNhbiksIGNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQykKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05NQUlOLCBjYW4ucmVxdWVzdCgpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJfSkKCgkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05TRUFSQ0gsIGZ1bmN0aW9uKG1zZywgd29yZCkgeyBpZiAod29yZFswXSA9PSBjdHguQ09NTUFORCB8fCB3b3JkWzFdICE9ICIiKSB7IHZhciBtZXRhID0gY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhCgkJCXZhciBsaXN0ID0gd29yZFsxXSA9PSAiIj8gbWV0YTogbWV0YVt3b3JkWzFdXT8ga2l0LkRpY3Qod29yZFsxXSwgbWV0YVt3b3JkWzFdXSk6IHt9CgkJCWNhbi5jb3JlLkl0ZW0obGlzdCwgZnVuY3Rpb24obmFtZSwgY29tbWFuZCkgeyBuYW1lID0gY2FuLmJhc2UudHJpbVByZWZpeChuYW1lLCAiY2FuLiIpCgkJCQljYW4uY29yZS5MaXN0KG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQltc2cuUHVzaChpdGVtLCBraXQuRGljdChpY2UuQ1RYLCBjaGF0Lk9ORU5HSU5FLCBpY2UuQ01ELCBjdHguQ09NTUFORCwKCQkJCQkJbWRiLlRZUEUsIGljZS5DQU4sIG1kYi5OQU1FLCBuYW1lLCBtZGIuVEVYVCwgY29tbWFuZC5oZWxwLAoJCQkJCQljdHguQ09OVEVYVCwgaWNlLkNBTiwgY3R4LkNPTU1BTkQsIG5hbWUKCQkJCQkpW2l0ZW1dfHwiIikKCQkJCX0pCgkJCX0pCgkJfSB9KQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJdmFyIHN1YiwgbW9kID0gY2FuLCBmdW4gPSBjYW4sIGtleSA9ICIiOyBjYW4uY29yZS5MaXN0KGNtZHNbMV0uc3BsaXQoaWNlLlBUKSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJZnVuICYmIChzdWIgPSBtb2QsIG1vZCA9IGZ1biwgZnVuID0gbW9kW3ZhbHVlXSwga2V5ID0gdmFsdWUpCgkJfSk7IGlmICghc3ViIHx8ICFtb2QgfHwgIWZ1bikgeyBjYW4ubWlzYy5XYXJuKGljZS5FcnJOb3RGb3VuZCwgY21kcykKCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnLkVjaG8oaWNlLkVycldhcm4sIGljZS5FcnJOb3RGb3VuZCwgY21kcykpCgkJfQoKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoZnVuLCB7CgkJCWV2ZW50OiBldmVudCwgY2FuOiBzdWIsIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDIpLCBjYjogY2IsIHRhcmdldDogc3ViLl90YXJnZXQsCgkJCWJ1dHRvbjoga2V5LCBjbWQ6IGtleSwgYXJnOiBjbWRzLnNsaWNlKDIpLCBsaXN0OiBjbWRzLnNsaWNlKDIpLAoJCX0sIG1vZCkKCX0sCglfcmVtb3RlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJCWlmIChwYW5lbC5vbmVuZ2luZS5fZW5naW5lKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSkgeyByZXR1cm4gfQoJCWlmIChwYW5lbC5vbmVuZ2luZS5fcGx1Z2luKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSkgeyByZXR1cm4gfQoKCQl2YXIga2V5cyA9IGNhbi5jb3JlLktleXMocGFuZWwuX25hbWUsIGNtZHMuam9pbihpY2UuRlMpKQoJCWlmIChjYW4udXNlci5pc0xvY2FsRmlsZSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuQ2xlYXIoaWNlLk1TR19BUFBFTkQpCgkJCXZhciByZXMgPSBWb2xjYW5vcy5tZXRhLnBhY2tba2V5c107IHJlcz8gbXNnLkNvcHkocmVzKTogY2FuLnVzZXIudG9hc3QoY2FuLCAi57y65aSx5pWw5o2uIikKCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCX0KCgkJdmFyIHRvYXN0LCBfdG9hc3QgPSBtc2cuT3B0aW9uKGNoYXQuX1RPQVNUKTsgaWYgKF90b2FzdCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdG9hc3QgPSB0b2FzdHx8Y2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgX3RvYXN0LCBtc2cuX2Nhbi5fbmFtZSkgfSkgfQoJCW1zZy5vcHRpb24gPSBjYW4uY29yZS5MaXN0KG1zZy5vcHRpb24sIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIHtfdG9hc3Q6IHRydWUsIF9oYW5kbGU6IHRydWV9W2l0ZW1dICYmIGRlbGV0ZShtc2dbaXRlbV0pPyB1bmRlZmluZWQ6IGl0ZW0gfSkKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlJFTU9URSwgY2FuLnJlcXVlc3Qoe30sIHtfZm9sbG93OiBwYW5lbC5fZm9sbG93LCBfbXNnOiBtc2csIF9jbWRzOiBjbWRzfSkpCgoJCXZhciBuYW1lcyA9IG1zZy5PcHRpb24oY2hhdC5fTkFNRVMpfHxwYW5lbC5fbmFtZXN8fCgoY2FuLkNvbmYoImljZWJlcmciKXx8Vm9sY2Fub3MubWV0YS5pY2ViZXJnKStwYW5lbC5fbmFtZSkKCQljYW4ubWlzYy5SdW4oZXZlbnQsIGNhbiwge25hbWVzOiBuYW1lcywgZGFlbW9uOiBtc2cuX2RhZW1vbn0sIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQlWb2xjYW5vcy5tZXRhLnBhY2tba2V5c10gPSBtc2csIHRvYXN0ICYmIHRvYXN0LmNsb3NlKCksIHRvYXN0ID0gdHJ1ZSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfSkKCX0sCglfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJCXJldHVybiBmYWxzZQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJaWYgKGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBjbWRzWzFdID09IGljZS5SVU4gJiYgY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2NtZHNbMl1dKSB7CgkJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1syXV0sIHtjYW46IHBhbmVsLCBtc2c6IG1zZywgY21kczogY21kcy5zbGljZSgzKSwgY2I6IGNifSksIHRydWUKCQl9CgkJdmFyIHAgPSBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1swXV0sIG4gPSAxOyBpZiAocCkgewoJCQlpZiAocC5tZXRhICYmIHAubWV0YVtjbWRzWzFdXSAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04pIHsgbiA9IDMgfSBlbHNlIGlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMF1dKSB7IG4gPSAyIH0KCQkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKHAsIHtjYW46IHAuY2FufHxwYW5lbCwgbXNnOiBtc2csIGFyZzogY21kcy5zbGljZShuKSwgY21kczogY21kcy5zbGljZShuKSwgY2I6IGNifSksIHRydWUKCQl9CgkJcmV0dXJuIGZhbHNlCgl9LAoKCXBsdWdpbjogc2h5KCLmt7vliqDmj5Lku7YiLCBmdW5jdGlvbihjYW4sIG5hbWUsIGNvbW1hbmQpIHsKCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobmFtZSkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0obmFtZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJbmFtZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNhbi5iYXNlLmlzRnVuYyh2YWx1ZSkgJiYgY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIGtleSwgdmFsdWUpIH0pCgkJfQoJCW5hbWUgPSBjYW4uYmFzZS50cmltUHJlZml4KG5hbWUsICJjYW4uIikKCQl2YXIgdHlwZSA9IGh0bWwuVEVYVDsgY29tbWFuZC5saXN0ID0gY2FuLmNvcmUuTGlzdChjb21tYW5kLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJc3dpdGNoICh0eXBlb2YgaXRlbSkgewoJCQkJY2FzZSBsYW5nLlNUUklORzogcmV0dXJuIGNhbi5jb3JlLlNwbGl0SW5wdXQoaXRlbSkKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IHJldHVybiB0eXBlID0gaXRlbS50eXBlfHx0eXBlLCBpdGVtCgkJCX0KCQl9KSwgY29tbWFuZC5jYW4gPSBjYW4sIGFyZ3VtZW50cy5jYWxsZWUubWV0YVtjYW4uY29yZS5LZXlzKGljZS5DQU4sIG5hbWUpXSA9IGNvbW1hbmQKCX0pLAoJbGlzdGVuOiBzaHkoIuebkeWQrOS6i+S7tiIsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgY2IpIHsKCQlhcmd1bWVudHMuY2FsbGVlLm1ldGFbbmFtZV0gPSAoYXJndW1lbnRzLmNhbGxlZS5tZXRhW25hbWVdfHxbXSkuY29uY2F0KGNiKQoJfSksCglzaWduYWw6IHNoeSgi6Kem5Y+R5LqL5Lu2IiwgZnVuY3Rpb24oY2FuLCBuYW1lLCBtc2cpIHsgbXNnID0gbXNnfHxjYW4ucmVxdWVzdCgpCgkJY2FuLm1pc2MuTG9nKGdkYi5TSUdOQUwsIG5hbWUsIChtc2cuX2NtZHN8fFtdKSwgbmFtZSA9PSBjaGF0Lk9OUkVNT1RFPyBtc2cuT3B0aW9uKCJfbXNnIik6IG1zZykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChjYW4ub25lbmdpbmUubGlzdGVuLm1ldGFbbmFtZV0sIGZ1bmN0aW9uKGNiKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7ZXZlbnQ6IG1zZy5fZXZlbnQsIG1zZzogbXNnfSkgfSkubGVuZ3RoCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRBRU1PTiwge2hlbHA6ICLmjqjojZDlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7IGlmIChjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgbmFtZTogY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2xpLkRBRU1PTil8fG5hbWV8fCIiLCB0ZXh0OiBjYW4udXNlci50aXRsZSgpfSwgZnVuY3Rpb24oZXZlbnQsIG1zZywgY21kLCBhcmcpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0KCQkJdmFyIHN1YiA9IGNhbi5vbmRhZW1vbi5fbGlzdFttc2cuT3B0aW9uKGljZS5NU0dfVEFSR0VUKV0KCQkJY2FuLmJhc2UuaXNGdW5jKGNhbi5vbmRhZW1vbltjbWRdKT8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLm9uZGFlbW9uW2NtZF0sIHsKCQkJCWNhbjogY2FuLCBzdWI6IHN1YiwgbXNnOiBtc2csIGNtZDogY21kLCBhcmc6IGFyZywgY2I6IGZ1bmN0aW9uKCkgeyBtc2cuUmVwbHkoKSB9LAoJCQl9KTogY2FuLm9uZW5naW5lLl9zZWFyY2goe30sIGNhbiwgbXNnLCBjYW4sIFtjaGF0Ll9TRUFSQ0gsIGNtZF0uY29uY2F0KGFyZyksIGZ1bmN0aW9uKCkgeyBtc2cuUmVwbHkoKSB9KQoJCX0pCgl9LCBfbGlzdDogWyIiXSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCBzdWIpIHsgc3ViLlVwZGF0ZSgpIH0sCglncm93OiBmdW5jdGlvbihjYW4sIG1zZywgc3ViLCBhcmcpIHsKCQlzdWIub25pbXBvcnQuX2dyb3coc3ViLCBtc2csIGNhbi5wYWdlLkNvbG9yKGFyZy5qb2luKCIiKSkpCgl9LAoJdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBhcmcpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLnVzZXIudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2csIGNtZHM6IGFyZ30pIH0sCglwd2Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBhcmcpIHsKCQljYW4uX3dzc19uYW1lID0gY2FuLm9uZGFlbW9uLl9saXN0WzBdID0gYXJnWzBdCgl9LAoJZXhpdDogZnVuY3Rpb24oY2FuLCBtc2csIHN1YikgeyBjYW4udXNlci5jbG9zZSgpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05BUFBFTkQsIHtoZWxwOiAi5riy5p+T5byV5pOOIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgY2IsIHRhcmdldCwgZmllbGQpIHsKCQltZXRhLm5hbWUgPSAobWV0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlNQKVswXS5zcGxpdChpY2UuUFQpLnBvcCgpCgkJZmllbGQgPSBmaWVsZHx8Y2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgbWV0YS50eXBlLCBtZXRhLCB0YXJnZXQpLmZpcnN0CgkJdmFyIGxlZ2VuZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkxFR0VORClbMF0KCQl2YXIgb3B0aW9uID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRk9STV9PUFRJT04pWzBdCgkJdmFyIGFjdGlvbiA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9BQ1RJT04pWzBdCgkJdmFyIG91dHB1dCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9PVVRQVVQpWzBdCgkJdmFyIHN0YXR1cyA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9TVEFUVVMpWzBdCgoJCXZhciBzdWIgPSBWb2xjYW5vcyhtZXRhLm5hbWUsIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBtZXRhLm5hbWUpLCBfdGFyZ2V0OiBmaWVsZCwKCQkJX2xlZ2VuZDogbGVnZW5kLCBfb3B0aW9uOiBvcHRpb24sIF9hY3Rpb246IGFjdGlvbiwgX291dHB1dDogb3V0cHV0LCBfc3RhdHVzOiBzdGF0dXMsCgkJCV9pbnB1dHM6IHt9LCBfb3V0cHV0czogW10sIF9oaXN0b3J5OiBbXSwgX3Jvb3Q6IGNhbi5fcm9vdCwKCgkJCVN0YXR1czogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgcmV0dXJuIGNhbi5jb3JlLkl0ZW0oa2V5LCBzdWIuU3RhdHVzKSwga2V5IH0KCQkJCWtleSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBzdGF0dXMsIFtbW2h0bWwuRElWLCBrZXldLCBodG1sLlNQQU5dXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWlmICh2YWx1ZSAmJiB2YWx1ZS5pbmRleE9mICYmIHZhbHVlLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IHZhbHVlID0gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgdmFsdWUpIH0KCQkJCQlyZXR1cm4gdmFsdWUgPT0gdW5kZWZpbmVkPyAodmFsdWUgPSBpdGVtLmlubmVySFRNTCk6IChpdGVtLmlubmVySFRNTCA9IHZhbHVlKQoJCQkJfSk7IHJldHVybiB2YWx1ZQoJCQl9LAoJCQlBY3Rpb246IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBhY3Rpb24sIGtleSwgdmFsdWUpWzBdIH0sCgkJCU9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIG9wdGlvbiwga2V5LCB2YWx1ZSlbMF0gfSwKCQkJVXBkYXRlOiBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyBzdWIub25hcHBlbmQuX291dHB1dDAoc3ViLCBzdWIuQ29uZigpLCBldmVudHx8e30sIGNtZHN8fHN1Yi5JbnB1dCgpLCBjYiwgc2lsZW50KTsgcmV0dXJuIHRydWUgfSwKCQkJRm9jdXM6IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBvcHRpb24sIGh0bWwuSU5QVVRfQVJHUywgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaW5kZXggPT0gMCAmJiBpdGVtLmZvY3VzKCkgfSkgfSwKCQkJSW5wdXQ6IGZ1bmN0aW9uKGNtZHMsIHNpbGVudCkgewoJCQkJY21kcyA9IGNtZHMgJiYgY21kcy5sZW5ndGggPiAwPyBjbWRzOiBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIikuY29uY2F0KGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBhY3Rpb24sICIiKSksIGNtZHMgPSBjYW4uYmFzZS50cmltKGNtZHMpCgkJCQlzaWxlbnQgfHwgY21kc1swXSA9PSBjdHguQUNUSU9OIHx8IGNhbi5iYXNlLkVxKHN1Yi5faGlzdG9yeVtzdWIuX2hpc3RvcnkubGVuZ3RoLTFdLCBjbWRzKSB8fCBzdWIuX2hpc3RvcnkucHVzaChjbWRzKQoJCQkJcmV0dXJuIGNtZHMKCQkJfSwKCQkJQ2xvbmU6IGZ1bmN0aW9uKCkgeyBtZXRhLmFyZ3MgPSBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIikKCQkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIG1ldGEsIGxpc3QsIGZ1bmN0aW9uKHN1YikgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YiwgdHJ1ZSkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgZm9yICh2YXIgayBpbiBzdWIuX2lucHV0cykgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBzdWIuX2lucHV0c1trXS5fdGFyZ2V0KTsgYnJlYWsgfSB9KQoJCQkJfSwgdGFyZ2V0KQoJCQl9LAoJCX0sIGxpc3QsIGZ1bmN0aW9uKHN1YikgeyBzdWIuQ29uZihtZXRhKSwgbWV0YS5mZWF0dXJlID0gY2FuLmJhc2UuT2JqKG1ldGEuZmVhdHVyZSwge30pCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgbWV0YS5pbmRleD8gbWV0YS5pbmRleC5zcGxpdChpY2UuUFQpLnBvcCgpOiBtZXRhLm5hbWUpCgkJCXZhciBzdHlsZSA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuc3R5bGV8fG1ldGEuZmVhdHVyZS5zdHlsZSk7IHN3aXRjaCAodHlwZW9mIHN0eWxlKSB7CgkJCQljYXNlIGxhbmcuU1RSSU5HOiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZmllbGQsIHN0eWxlKTsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHN0eWxlKTsgYnJlYWsKCQkJfQoJCQltZXRhLnR5cGUgIT0gc3ViLk1vZGUoKSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZmllbGQsIHN1Yi5Nb2RlKCkpCgoJCQltZXRhLmlucHV0cyAmJiBzdWIub25hcHBlbmQuX29wdGlvbihzdWIsIG1ldGEsIHN1Yi5fb3B0aW9uLCBtZXRhLm1zZykKCQkJaWYgKG1ldGEubXNnKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdCgpOyBtc2cuQ29weShjYW4uYmFzZS5PYmoobWV0YS5tc2cpKSwgc3ViLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKXx8bWV0YS5mZWF0dXJlLmRpc3BsYXkpIH0KCgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHN1Yi5fbGVnZW5kLCBraXQuRGljdChjYW4uQ29uZigibGVnZW5kX2V2ZW50Iil8fGNoYXQuT05NT1VTRUVOVEVSLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIHN1Yiwgc3ViLm9uYWN0aW9uLCBzdWIub25hY3Rpb24ubGlzdC5jb25jYXQoW1si5omA5pyJIl0uY29uY2F0KGNhbi5jb3JlLkl0ZW0obWV0YS5mZWF0dXJlLl90cmFucykpXSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhKSB7CgkJCQkJdmFyIGNiID0gY2FuLmNvcmUuVmFsdWUoc3ViLCBbY2hhdC5fT1VUUFVUU19DVVJSRU5ULCBjaGF0Lk9OQUNUSU9OLCBpdGVtXSkKCQkJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyByZXR1cm4gY2IoZXZlbnQsIGNhbi5jb3JlLlZhbHVlKHN1YiwgY2hhdC5fT1VUUFVUU19DVVJSRU5UKSwgaXRlbSkgfQoJCQkJCXZhciBjYiA9IG1ldGFbaXRlbV18fG1ldGFbY2hhdC5fRU5HSU5FXQoJCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHJldHVybiBjYihldmVudCwgc3ViLCBpdGVtKSB9CgkJCQl9KQoJCQl9KSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pOyByZXR1cm4gc3ViCgl9LAoJX29wdGlvbjogZnVuY3Rpb24oY2FuLCBtZXRhLCBvcHRpb24sIHNraXApIHsgbWV0YSA9IG1ldGF8fHt9OyB2YXIgaW5kZXggPSAtMSwgYXJncyA9IGNhbi5iYXNlLk9iaihtZXRhLmFyZ3N8fG1ldGEuYXJnfHxtZXRhLm9wdCwgW10pLCBvcHRzID0gY2FuLmJhc2UuT2JqKG1ldGEub3B0cywge30pCgkJZnVuY3Rpb24gYWRkKGl0ZW0sIG5leHQpIHsgaXRlbSA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBpdGVtfTogaXRlbSwgaXRlbS50eXBlICE9IGh0bWwuQlVUVE9OICYmIGluZGV4KysKCQkJcmV0dXJuIFZvbGNhbm9zKGl0ZW0ubmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIGl0ZW0ubmFtZSksIF9yb290OiBjYW4uX3Jvb3QsCgkJCQlfdGFyZ2V0OiBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCBpdGVtLCBhcmdzW2luZGV4XXx8b3B0c1tpdGVtLm5hbWVdLCBvcHRpb258fGNhbi5fb3B0aW9uKSwKCQkJCV9vcHRpb246IG9wdGlvbnx8Y2FuLl9vcHRpb24sIF9hY3Rpb246IGNhbi5fYWN0aW9uLCBfb3V0cHV0OiBjYW4uX291dHB1dCwgX3N0YXR1czogY2FuLl9zdGF0dXMsCgkJCQlPcHRpb246IGNhbi5PcHRpb24sIEFjdGlvbjogY2FuLkFjdGlvbiwgU3RhdHVzOiBjYW4uU3RhdHVzLCBDbG9uZUZpZWxkOiBjYW4uQ2xvbmUsCgkJCQlDbG9uZUlucHV0OiBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgYWRkKGl0ZW0pLl90YXJnZXQpIH0sCgkJCX0sIFtpdGVtLmRpc3BsYXksIGNoYXQuUExVR0lOX0lOUFVUX0pTXSwgZnVuY3Rpb24oaW5wdXQpIHsgaW5wdXQuQ29uZihpdGVtKQoJCQkJaW5wdXQucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCWlmIChpdGVtLl9jYikgeyByZXR1cm4gaXRlbS5fY2IoZXZlbnQpIH0KCQkJCQlpZiAobXNnLlJ1bkFjdGlvbihldmVudCwgY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpLCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCBpbnB1dCwgY21kcykpIHsgcmV0dXJuIH0KCQkJCQlyZXR1cm4gY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KGNtZHMsIHNpbGVudCksIGNiLCBzaWxlbnQpCgkJCQl9LCBjYW4uX2lucHV0c1tpdGVtLm5hbWVdID0gaW5wdXQsIGlucHV0LnN1cCA9IGNhbgoKCQkJCWNhbi5jb3JlLkl0ZW1DQihpbnB1dC5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgeyBpbnB1dC5fdGFyZ2V0W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgaW5wdXQpIH0gfSkKCQkJCWNhbi5jb3JlLkl0ZW1DQihpdGVtLCBmdW5jdGlvbihrZXksIGNiKSB7IGlucHV0Ll90YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBpbnB1dCkgfSB9KQoJCQkJc2tpcD8gbmV4dCgpOiBjYW4uY29yZS5DYWxsRnVuYyhbaW5wdXQub25hY3Rpb24sIGNoYXQuX0lOSVRdLCBbaW5wdXQsIGl0ZW0sIG5leHQsIGlucHV0Ll90YXJnZXRdKTsKCQkJCShpdGVtLmFjdGlvbnx8Y2FuLmNvcmUuVmFsdWUobWV0YSwgW2N0eC5GRUFUVVJFLCBjdHguSU5QVVRTXSkpICYmIGNhbi5vbmFwcGVuZC5maWd1cmUoaW5wdXQsIGl0ZW0sIGlucHV0Ll90YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUpIHsKCQkJCQlpbnB1dC5fdGFyZ2V0LnZhbHVlID0gdmFsdWUsIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGlucHV0Ll90YXJnZXQpCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5VcGRhdGUoKSB9KQoJCQkJfSkKCQkJfSkKCQl9OyBjYW4uY29yZS5OZXh0KGNhbi5iYXNlLmdldFZhbGlkKGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05JTVBPUlQsIG1kYi5MSVNUXSksIGNhbi5iYXNlLk9iaihtZXRhLmlucHV0cykpLmNvbmNhdChbe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBjbGkuQ0xPU0V9XSksIGFkZCkKCX0sCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGxpc3QsIGFjdGlvbiwgbWV0YSkgeyBsaXN0ID0gY2FuLmJhc2UuT2JqKGNhbi5iYXNlLmdldFZhbGlkKGxpc3QsIGNhbi5jb3JlLkl0ZW0obWV0YSkpLCBjYW4uY29yZS5WYWx1ZShjYW4sIFtjaGF0Lk9OQUNUSU9OLCBtZGIuTElTVF0pKTsgaWYgKCFsaXN0KSB7IHJldHVybiB9CgkJdmFyIF9saXN0ID0gY2FuLnBhZ2UuaW5wdXRzKGNhbiwgbGlzdCk7IGFjdGlvbiA9IGFjdGlvbnx8Y2FuLl9hY3Rpb24sIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGFjdGlvbiksIG1ldGEgPSBtZXRhfHxjYW4ub25hY3Rpb258fHt9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QoX2xpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0gPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIGl0ZW0gPT0gIiI/IC8q56m655m9Ki8ge3R5cGU6IGh0bWwuU1BBQ0V9OgoJCQljYW4uYmFzZS5pc1N0cmluZyhpdGVtKT8gLyrmjInplK4qLyB7dHlwZTogaHRtbC5CVVRUT04sIHZhbHVlOiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0pLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdOyBjYj8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGl0ZW19KTogY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGl0ZW1dLmNvbmNhdChjYW4uc3VwLklucHV0KCkpKQoKCQkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7CgkJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdOyBjYj8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGl0ZW19KTogY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGl0ZW1dLmNvbmNhdChjYW4uc3VwLklucHV0KCkpKQoJCQkJfQoKCQkJfX06IGl0ZW0ubGVuZ3RoID4gMD8gLyrliJfooagqLyB7dHlwZTogaHRtbC5TRUxFQ1QsIG5hbWU6IGl0ZW1bMF0sIHZhbHVlczogaXRlbS5zbGljZSgxKSwgb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgd2hpY2ggPSBpdGVtW2V2ZW50LnRhcmdldC5zZWxlY3RlZEluZGV4KzFdCgkJCQljYW4uY29yZS5DYWxsRnVuYyhtZXRhW3doaWNoXSwgW2V2ZW50LCBjYW4sIHdoaWNoXSkKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbaXRlbVswXV0sIFtldmVudCwgY2FuLCBpdGVtWzBdLCB3aGljaF0pCgoJCQl9fTogLyrlhbblroMqLyBpdGVtLCAiIiwgYWN0aW9uKX0pLCBtZXRhCgl9LAoJX291dHB1dDA6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIGNhbiwgY21kcykpIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgIT0gaWNlLlRSVUUgJiYgY21kcyAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgbWV0YS5mZWF0dXJlW2NtZHNbMV1dKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge2FjdGlvbjogY21kc1sxXX0pCgkJCWlmIChjYW4uYmFzZS5pc0Z1bmMobWV0YS5mZWF0dXJlW2NtZHNbMV1dKSkgeyByZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YS5mZWF0dXJlW2NtZHNbMV1dLCB7Y2FuOiBjYW4sIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDIpfSkgfQoJCQlyZXR1cm4gY2FuLnVzZXIuaW5wdXQoZXZlbnQuX2V2ZW50fHxldmVudCwgY2FuLCBtZXRhLmZlYXR1cmVbY21kc1sxXV0sIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9LCBjYW4uT3B0aW9uKCkpCgkJCQljYW4uVXBkYXRlKGV2ZW50LCBjbWRzLnNsaWNlKDAsIDIpLmNvbmNhdChhcmdzKSwgY2J8fGZ1bmN0aW9uKCkgewoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCQlpZiAobXNnLlJlc3VsdCgpLmxlbmd0aCA+IDAgfHwgbXNnLkxlbmd0aCgpID4gMCkgewoJCQkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLlVwZGF0ZSgpCgkJCQkJfQoJCQkJfSwgdHJ1ZSkKCQkJfSkKCQl9CgoJCWlmIChtZXRhICYmIG1ldGEuaW5kZXggJiYgbWV0YS5pbmRleC5pbmRleE9mKCJjYW4uIikgPT0gMCkgewoJCQljYW4ub25lbmdpbmUuX3BsdWdpbihldmVudCwgY2FuLCBtc2csIGNhbiwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW21ldGEuaW5kZXhdLCBjbWRzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogY2FuLCBtc2c6IG1zZ30pOyByZXR1cm4gfQoJCQkJIXNpbGVudCAmJiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmRpc3BsYXl8fG1ldGEuZmVhdHVyZS5kaXNwbGF5KQoJCQl9KQoJCQlyZXR1cm4KCQl9CgoJCWlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChtc2cuX2RhZW1vbikpIHsKCQkJY2FuLmJhc2UuaXNVbmRlZmluZWQoY2FuLl9kYWVtb24pICYmIGNhbi5vbmRhZW1vbi5fbGlzdFswXSAmJiAoY2FuLl9kYWVtb24gPSBjYW4ub25kYWVtb24uX2xpc3QucHVzaChjYW4pLTEpCgkJCWlmIChjYW4uX2RhZW1vbikgeyBtc2cuT3B0aW9uKGljZS5NU0dfREFFTU9OLCBjYW4uY29yZS5LZXlzKGNhbi5vbmRhZW1vbi5fbGlzdFswXSwgY2FuLl9kYWVtb24pKSB9CgkJfQoKCQlyZXR1cm4gY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCl8fHt9CgkJCWlmICghY21kcyB8fCBjbWRzWzBdICE9IGN0eC5BQ1RJT04pIHsgY2FuLl9tc2cgPSBtc2csIHN1Yi5fbXNnID0gbXNnLCBtc2cuX2NtZHMgPSBjbWRzIH0KCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtjYW46IGNhbiwgbXNnOiBtc2d9KTsgcmV0dXJuIH0KCQkJdmFyIHByb2Nlc3MgPSBtc2cuX2NhbiA9PSBjYW4gfHwgbXNnLl9jYW4gPT0gc3ViCgkJCWlmIChwcm9jZXNzICYmIGNhbi5jb3JlLkNhbGxGdW5jKFtzdWIsIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IHN1YiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQlpZiAocHJvY2VzcyAmJiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJIXNpbGVudCAmJiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmRpc3BsYXl8fG1ldGEuZmVhdHVyZS5kaXNwbGF5LCBjYW4uX291dHB1dCwgY2FuLl9hY3Rpb24pCgkJfSkKCX0sCglfb3V0cHV0OiBmdW5jdGlvbihjYW4sIG1zZywgZGlzcGxheSwgb3V0cHV0LCBhY3Rpb24sIGNiKSB7IGRpc3BsYXkgPSBkaXNwbGF5fHxjaGF0LlBMVUdJTl9UQUJMRV9KUywgb3V0cHV0ID0gb3V0cHV0fHxjYW4uX291dHB1dAoJCWNhbi5fZGlzcGxheSA9IGRpc3BsYXkKCQlWb2xjYW5vcyhkaXNwbGF5LCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgZGlzcGxheSksIF90YXJnZXQ6IG91dHB1dCwgX2ZpZWxkczogY2FuLl90YXJnZXQsIF9kaXNwbGF5OiBkaXNwbGF5LAoJCQlfbGVnZW5kOiBjYW4uX2xlZ2VuZCwgX29wdGlvbjogY2FuLl9vcHRpb24sIF9hY3Rpb246IGNhbi5fYWN0aW9uLCBfb3V0cHV0OiBjYW4uX291dHB1dCwgX3N0YXR1czogY2FuLl9zdGF0dXMsIF9yb290OiBjYW4uX3Jvb3QsCgkJCVVwZGF0ZTogY2FuLlVwZGF0ZSwgT3B0aW9uOiBjYW4uT3B0aW9uLCBBY3Rpb246IGNhbi5BY3Rpb24sIFN0YXR1czogY2FuLlN0YXR1cywKCQl9LCBbZGlzcGxheSwgY2hhdC5QTFVHSU5fVEFCTEVfSlNdLCBmdW5jdGlvbih0YWJsZSkgeyB0YWJsZS5Db25mKGNhbi5Db25mKCkpCgkJCXRhYmxlLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCB0YWJsZSwgY21kcykpIHsgcmV0dXJuIH0KCQkJCXJldHVybiBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoY21kcywgc2lsZW50KSwgY2IsIHNpbGVudCkKCQkJfSwgY2FuLl9vdXRwdXRzICYmIGNhbi5fb3V0cHV0cy5wdXNoKHRhYmxlKSwgdGFibGUuc3VwID0gY2FuLCB0YWJsZS5fbXNnID0gbXNnCgoJCQl0YWJsZS5faW5kZXggPSBjYW4uX2luZGV4CgkJCXRhYmxlLk1vZGUoY2FuLk1vZGUoKSksIHRhYmxlLkNvbmYodGFibGUuX2FyZ3MgPSBjYW4uYmFzZS5QYXJzZVVSTCh0YWJsZS5fZGlzcGxheSkpCgkJCXRhYmxlLl90cmFucyA9IGNhbi5iYXNlLkNvcHkodGFibGUuX3RyYW5zfHx7fSwgY2FuLmNvcmUuVmFsdWUodGFibGUsICJvbmFjdGlvbi5fdHJhbnMiKSkKCQkJaWYgKHRhYmxlLm9uaW1wb3J0ICYmIGNhbi5iYXNlLmlzQXJyYXkodGFibGUub25pbXBvcnQubGlzdCkgJiYgdGFibGUub25pbXBvcnQubGlzdC5sZW5ndGggPiAwKSB7CgkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX29wdGlvbiksIGNhbi5vbmFwcGVuZC5fb3B0aW9uKGNhbiwge2lucHV0czogY2FuLnBhZ2UuaW5wdXRzKGNhbiwgdGFibGUub25pbXBvcnQubGlzdCkgfSkKCQkJfQoKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3RhYmxlLCBjaGF0Lk9OSU1QT1JULCBjaGF0Ll9JTklUXSwge2NhbjogdGFibGUsIG1zZzogbXNnLCBjYjogZnVuY3Rpb24obXNnKSB7CgkJCQlhY3Rpb24gPT09IGZhbHNlIHx8IHRhYmxlLm9uYXBwZW5kLl9hY3Rpb24odGFibGUsIG1zZy5PcHRpb24oaWNlLk1TR19BQ1RJT04pfHxjYW4uQ29uZihpY2UuTVNHX0FDVElPTiksIGFjdGlvbikKCQkJCWFjdGlvbiA9PT0gZmFsc2UgfHwgdGFibGUub25hcHBlbmQuX3N0YXR1cyh0YWJsZSwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQkJfSwgdGFyZ2V0OiBvdXRwdXR8fGNhbi5fb3V0cHV0fSkKCQl9KQoJfSwKCV9zdGF0dXM6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgc3RhdHVzKSB7IHN0YXR1cyA9IHN0YXR1c3x8Y2FuLl9zdGF0dXMsIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHN0YXR1cykKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihsaXN0LCBjYW4uY29yZS5WYWx1ZShjYW4sIFtjaGF0Lk9ORVhQT1JULCBtZGIuTElTVF0pKSwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtID0gY2FuLmJhc2UuaXNPYmplY3QoaXRlbSk/IGl0ZW06IHtuYW1lOiBpdGVtfQoKCQkJaWYgKGl0ZW0udmFsdWUgJiYgaXRlbS52YWx1ZS5pbmRleE9mICYmIGl0ZW0udmFsdWUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgaXRlbS52YWx1ZSA9IGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGl0ZW0udmFsdWUpIH0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgc3RhdHVzLCBbe3ZpZXc6IGNhbi5iYXNlLmpvaW4oW2h0bWwuSVRFTSwgaXRlbS5uYW1lXSksIHRpdGxlOiBpdGVtLm5hbWUsIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbS5uYW1lLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbIjogIiwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyhpdGVtLnZhbHVlfHwiIikrIiIsIGh0bWwuU1BBTiwgaXRlbS5uYW1lXX0sCgkJCV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgaXRlbS52YWx1ZSkgfX1dKQoJCX0pCgl9LAoKCWZpZWxkOiBmdW5jdGlvbihjYW4sIHR5cGUsIGl0ZW0sIHRhcmdldCkgeyB0eXBlID0gdHlwZXx8aHRtbC5QTFVHSU4sIGl0ZW0gPSBpdGVtfHx7fQoJCXZhciBuYW1lID0gKGl0ZW0ubmlja3x8aXRlbS5uYW1lfHwiIikuc3BsaXQoaWNlLlNQKVswXQoJCXZhciB0aXRsZSA9ICFpdGVtLmhlbHAgfHwgY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBuYW1lOiBuYW1lKyIoIitpdGVtLmhlbHAuc3BsaXQoaWNlLlNQKVswXSsiKSIKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbdHlwZXx8IiIsIGl0ZW0ubmFtZXx8IiIsIGl0ZW0ucG9zfHwiIl0pLCBodG1sLkZJRUxEU0VUXSwgbGlzdDogWwoJCQluYW1lICYmIHt0ZXh0OiBbdGl0bGUsIGh0bWwuTEVHRU5EXX0sIHt2aWV3OiBbaHRtbC5PUFRJT04sIGh0bWwuRk9STV19LCB7dmlldzogW2h0bWwuQUNUSU9OXX0sIHt2aWV3OiBbaHRtbC5PVVRQVVRdfSwge3ZpZXc6IFtodG1sLlNUQVRVU119LAoJCV19XSkKCX0sCglpbnB1dDogZnVuY3Rpb24oY2FuLCBpdGVtLCB2YWx1ZSwgdGFyZ2V0LCBzdHlsZSkgewoJCXN3aXRjaCAoaXRlbS50eXBlKSB7CgkJCWNhc2UgIiI6IHJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtpdGVtXSkKCQkJY2FzZSBodG1sLlNQQUNFOiByZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGNhbi5iYXNlLmpvaW4oW2h0bWwuSVRFTSwgaHRtbC5TUEFDRV0pfV0pCgkJfQoJCXZhciBpbnB1dCA9IGNhbi5wYWdlLmlucHV0KGNhbiwgaXRlbSwgdmFsdWUpCgkJaWYgKGl0ZW0ucmFuZ2UpIHsKCQkJaW5wdXQuX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgaXRlbS5tb2RlID0gInNpbXBsZSIKCQkJCWNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUsIG9sZCkgewoJCQkJCXRhcmdldC52YWx1ZSA9IHZhbHVlLCBjYW4ub25hY3Rpb25baXRlbS5uYW1lXShldmVudCwgY2FuLCBpdGVtLm5hbWUpCgkJCQl9KQoJCQl9CgkJfQoJCXZhciBiciA9IGlucHV0LnR5cGUgPT0gaHRtbC5URVhUQVJFQT8gW3t0eXBlOiBodG1sLkJSLCBzdHlsZToge2NsZWFyOiBodG1sLkJPVEh9fV06IFtdCgkJdmFyIHRpdGxlID0gY2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBjaGF0LlRJVExFLCBpdGVtLm5hbWVdLmpvaW4oaWNlLlBUKSl8fCIiOyB0aXRsZSAmJiAoaW5wdXQudGl0bGUgPSB0aXRsZSkKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCAoW3t2aWV3OiBzdHlsZXx8Y2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBpdGVtLnR5cGVdKSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQlzd2l0Y2ggKGl0ZW0udHlwZSkgewoJCQkJY2FzZSBodG1sLlRFWFQ6CgkJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQkJY2FzZSBsYW5nLkVOVEVSOgoJCQkJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpOwoJCQkJCQkJY2FuLm9uYWN0aW9uICYmIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdICYmIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdKGV2ZW50LCBjYW4sIGl0ZW0ubmFtZSk7CgkJCQkJCQlicmVhawoJCQkJCX0KCQkJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbiksIGNhbi5vbm1vdGlvbi5zZWxlY3RGaWVsZChldmVudCwgY2FuKQoJCQkJCWJyZWFrCgkJCQljYXNlIGh0bWwuVEVYVEFSRUE6CgkJCQkJLy8gc3dpdGNoIChldmVudC5rZXkpIHsgY2FzZSBsYW5nLlRBQjogY2FuLm9ua2V5bWFwLmluc2VydFRleHQoZXZlbnQudGFyZ2V0LCBpY2UuVEIpOyBjYW4ub25rZXltYXAucHJldmVudChldmVudCk7IGJyZWFrIH0KCQkJCQlicmVhawoJCQl9CgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQl9LCBsaXN0OiBbaW5wdXRdfV0pLmNvbmNhdChicikpW2l0ZW0ubmFtZV0KCX0sCgl0YWJsZTogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQsIHNvcnQpIHsgaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHJldHVybiB9CgkJdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kVGFibGUoY2FuLCBtc2csIHRhcmdldHx8Y2FuLl9vdXRwdXQsIG1zZy5hcHBlbmQsIGNifHxmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQlpZiAoa2V5ID09IG1kYi5WQUxVRSkgeyBrZXkgPSBsaW5lLmtleSB9CgkJCQlsaW5lID0ge30sIGNhbi5jb3JlLkxpc3QoYXJyYXksIGZ1bmN0aW9uKGl0ZW0pIHsgbGluZVtpdGVtLmtleV0gPSBpdGVtLnZhbHVlIH0pCgkJCX0KCgkJCWlmIChrZXkgPT0gImV4dHJhLmNtZCIpIHsKCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7Y3R4OiBsaW5lWyJleHRyYS5jdHgiXSwgY21kOiBsaW5lWyJleHRyYS5jbWQiXSwgYXJnOiBsaW5lWyJleHRyYS5hcmciXX0sIGZ1bmN0aW9uKHN1YikgewoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBsaW5lLCBjYW4uT3B0aW9uKCkpCgkJCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBjYW4uY29yZS5LZXlzKGxpbmVbImV4dHJhLmN0eCJdLCBsaW5lWyJleHRyYS5jbWQiXSksIGNtZHMsIGNiKQoJCQkJCX0KCQkJCX0sIHRhcmdldHx8Y2FuLl9vdXRwdXQpCgkJCX0KCgkJCWZ1bmN0aW9uIHJ1bihjbWRzKSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIGxpbmUsIGNhbi5PcHRpb24oKSkKCQkJCXJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlpZiAoY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5zdXAsIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbi5zdXAsIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpICE9ICIiKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbi5zdXAsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpKQoJCQkJCX0gZWxzZSBpZiAobXNnLkxlbmd0aCgpID4gMCB8fCBtc2cuUmVzdWx0KCkubGVuZ3RoID4gMCApIHsKCQkJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWNhbi5VcGRhdGUoKQoJCQkJCX0KCQkJCX0sIHRydWUpCgkJCX0KCgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIHRhcmdldCkgJiYgdGFyZ2V0LnR5cGUgPT0gaHRtbC5CVVRUT04pIHsgcmV0dXJuIHJ1bihbY3R4LkFDVElPTiwgdGFyZ2V0Lm5hbWVdKSB9CgkJCQlpZiAoa2V5ID09IG1kYi5IQVNIICYmIGNhbi51c2VyLm1vZC5pc0RpdikgeyByZXR1cm4gY2FuLnVzZXIuanVtcHMoIi9jaGF0L2Rpdi8iK3ZhbHVlKSB9CgkJCQljYW4uc3VwLm9uYWN0aW9uLmNoYW5nZShldmVudCwgY2FuLnN1cCwga2V5LCBldmVudC50YXJnZXQuaW5uZXJUZXh0KQoKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKFttZGIuS0VZXS5pbmRleE9mKGtleSkgPiAtMSkgeyByZXR1cm4gfQoJCQkJdmFyIGl0ZW0gPSBjYW4uY29yZS5MaXN0KGNhbi5Db25mKCJmZWF0dXJlLmluc2VydCIpLCBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtLm5hbWUgPT0ga2V5KSB7IHJldHVybiBpdGVtIH0gfSlbMF18fHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0KCQkJCWl0ZW0ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIGxpbmUpLCBjbWRzLCBjYiwgdHJ1ZSkgfQoJCQkJY2FuLm9ubW90aW9uLm1vZGlmeXMoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7IHJ1bihbY3R4LkFDVElPTiwgbWRiLk1PRElGWSwga2V5LCB2YWx1ZV0pIH0sIGl0ZW0pCgkJCX19CgkJfSk7IHRhYmxlICYmIGNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCB0YWJsZSwgY2hhdC5DT05URU5UKQoJCWlmIChtc2cuYXBwZW5kICYmIG1zZy5hcHBlbmRbbXNnLmFwcGVuZC5sZW5ndGgtMV0gPT0gY3R4LkFDVElPTikgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFibGUsIGN0eC5BQ1RJT04pIH0KCQljYW4uX3RhYmxlID0gdGFibGUsIGNhbi5zdXAgJiYgKGNhbi5zdXAuX3RhYmxlID0gdGFibGUpCgkJcmV0dXJuIHNvcnQgJiYgY2FuLnBhZ2UuUmFuZ2VUYWJsZShjYW4sIHRhYmxlLCBzb3J0KSwgdGFibGUKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuLCB0ZXh0LCB0YXJnZXQpIHsgdGV4dCAmJiB0ZXh0LlJlc3VsdCAmJiAodGV4dCA9IHRleHQuUmVzdWx0KCkpOyBpZiAoIXRleHQpIHsgcmV0dXJuIH0KCQl2YXIgY29kZSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIFt7dGV4dDogW2Nhbi5wYWdlLkNvbG9yKHRleHQpLCBodG1sLkRJViwgaHRtbC5DT0RFXX1dKS5jb2RlCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY29kZSwgaHRtbC5JTlBVVF9CVVRUT04sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQl0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQkJCXJldHVybiBjYW4ucnVuQWN0aW9uKGV2ZW50LCB0YXJnZXQubmFtZSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ucnVuKCkgfSkKCQkJfQoJCX0pCgkJcmV0dXJuIChjb2RlLnNjcm9sbEJ5ICYmIGNvZGUuc2Nyb2xsQnkoMCwgMTAwMDApKSwgY29kZQoJfSwKCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIHZhbHVlLCBtZXRhLCBjYiwgdGFyZ2V0LCBmaWVsZCkgewoJCW1ldGEuZmVhdHVyZSA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuZmVhdHVyZSwgY2FuLmJhc2UuT2JqKHZhbHVlLm1ldGEpKXx8e30KCQltZXRhLmlucHV0cyA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuaW5wdXRzLCBjYW4uYmFzZS5PYmoodmFsdWUubGlzdCkpfHxbXQoJCW1ldGEuYXJncyA9IGNhbi5iYXNlLmdldFZhbGlkKGNhbi5iYXNlLk9iaihtZXRhLmFyZ3MpLCBjYW4uYmFzZS5PYmoobWV0YS5hcmcpLCBjYW4uYmFzZS5PYmoodmFsdWUuYXJncyksIGNhbi5iYXNlLk9iaih2YWx1ZS5hcmcpKXx8W10KCQltZXRhLmRpc3BsYXkgPSBtZXRhLmRpc3BsYXl8fHZhbHVlLmRpc3BsYXkKCgkJbWV0YS5oZWlnaHQgPSBtZXRhLmhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKQoJCW1ldGEud2lkdGggPSBtZXRhLndpZHRofHxjYW4uQ29uZldpZHRoKCkKCgkJbWV0YS50eXBlID0gbWV0YS50eXBlfHxjaGF0LlBMVUdJTgoJCW1ldGEubmFtZSA9IG1ldGEubmFtZXx8dmFsdWUubmFtZQoJCW1ldGEuaGVscCA9IG1ldGEuaGVscHx8dmFsdWUuaGVscAoKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBtZXRhLCBbY2hhdC5QTFVHSU5fU1RBVEVfSlNdLCBmdW5jdGlvbihzdWIsIHNraXApIHsgc3ViLl9pbmRleCA9IHZhbHVlLmluZGV4fHxtZXRhLmluZGV4CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIHN1Yi5faW5kZXgsIGNtZHMsIGNiKSB9CgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCBtZXRhLCBza2lwKQoJCX0sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIGZpZWxkKQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBmaWVsZCkgeyBtZXRhID0gbWV0YXx8e30sIG1ldGEuaW5kZXggPSBtZXRhLmluZGV4fHxjYW4uY29yZS5LZXlzKG1ldGEuY3R4LCBtZXRhLmNtZCkKCQl2YXIgcCA9IGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVttZXRhLmluZGV4XSwgcmVzID0ge307IGZ1bmN0aW9uIGNicyhzdWIsIG1ldGEsIHNraXApIHsgcmVzLl9fcHJvdG9fXyA9IHN1YiwgY2Ioc3ViLCBtZXRhLCBza2lwKSB9CgkJKG1ldGEubWV0YSB8fCBtZXRhLmlucHV0cyAmJiBtZXRhLmlucHV0cy5sZW5ndGggPiAwKT8gLyog5bGA6YOo5ZG95LukICovIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwge21ldGE6IG1ldGEubWV0YSwgbGlzdDogbWV0YS5saXN0fSwgbWV0YSwgY2JzLCB0YXJnZXQsIGZpZWxkKToKCQkJcD8gLyog5YmN56uv5ZG95LukICovIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwge25hbWU6IG1ldGEuaW5kZXgsIGhlbHA6IHAuaGVscCwgbWV0YTogcC5tZXRhLCBsaXN0OiBwLmxpc3R9LCBtZXRhLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIF9jYiA9IHAsIG4gPSAwCgkJCQkJaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1sxXV0gJiYgY21kc1swXSA9PSBjdHguQUNUSU9OKSB7IF9jYiA9IHAubWV0YVtjbWRzWzFdXSwgbiA9IDIgfSBlbHNlIGlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMF1dKSB7IF9jYiA9IHAubWV0YVtjbWRzWzBdXSwgbiA9IDEgfQoJCQkJCWNhbi5jb3JlLkNhbGxGdW5jKF9jYiwge2Nhbjogc3ViLCBtc2c6IGNhbi5yZXF1ZXN0KGV2ZW50KSwgY21kczogY21kcy5zbGljZShuKSwgY2I6IGNifSkKCQkJCX0KCQkJCWNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhzdWIsIG1ldGEsIHNraXApCgkJCX0sIHRhcmdldCwgZmllbGQpOiAvKiDlkI7nq6/lkb3ku6QgKi8gY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbWV0YSksIGN0eC5DT01NQU5ELCBbbWV0YS5pbmRleF0sIGZ1bmN0aW9uKG1zZykgeyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCWNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgdmFsdWUsIG1ldGEsIGNicywgdGFyZ2V0LCBmaWVsZCkKCQkJfSkgfSkKCQlyZXR1cm4gcmVzCgl9LAoJZmlndXJlOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCwgY2JzKSB7IGlmIChbaHRtbC5CVVRUT04sIGh0bWwuU0VMRUNUXS5pbmRleE9mKG1ldGEudHlwZSkgPiAtMSkgeyByZXR1cm4gfQoJCXZhciBpbnB1dCA9IG1ldGEuYWN0aW9ufHxtZGIuS0VZOyBpbnB1dCAhPSBpY2UuQVVUTyAmJiBjYW4ucmVxdWlyZShbIi9wbHVnaW4vaW5wdXQvIitpbnB1dCsiLmpzIl0sIGZ1bmN0aW9uKGNhbikgewoJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZmlndXJlW2lucHV0XSwgZnVuY3Rpb24oa2V5LCBvbikgeyB2YXIgbGFzdCA9IHRhcmdldFtrZXldOyB0YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IG9uKGV2ZW50LCBjYW4sIG1ldGEsIGZ1bmN0aW9uKGNiKSB7CgkJCQlmdW5jdGlvbiBfY2JzKHN1YiwgdmFsdWUsIG9sZCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2JzKT8gY2JzKHN1YiwgdmFsdWUsIG9sZCk6IHRhcmdldC52YWx1ZSA9IHZhbHVlfHwiIiwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfQoJCQkJaWYgKHRhcmdldC5fY2FuKSB7IHJldHVybiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgIHRhcmdldC5fY2FuLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldC5fY2FuLCBfY2JzKSB9CgkJCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogaHRtbC5JTlBVVCwgbmFtZTogaW5wdXQsIHBvczogY2hhdC5GTE9BVCwgbW9kZTogbWV0YS5tb2RlfSwgWyIvcGx1Z2luL2lucHV0LyIraW5wdXQrIi5qcyJdLCBmdW5jdGlvbihzdWIpIHsgc3ViLkNvbmYobWV0YSkKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQkJCWlmIChtZXRhLnJhbmdlKSB7CgkJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBmb3IgKHZhciBpID0gbWV0YS5yYW5nZVswXTsgaSA8IG1ldGEucmFuZ2VbMV07IGkgKz0gbWV0YS5yYW5nZVsyXXx8MSkgeyBtc2cuUHVzaCgidmFsdWUiLCBpKSB9IGNiKG1zZykKCQkJCQkJCXJldHVybgoJCQkJCQl9CgkJCQkJCShtZXRhLnJ1bnx8Y2FuLnJ1bikoc3ViLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIGNtZHMsIGNiLCB0cnVlKQoJCQkJCX0KCQkJCQljYW4ub25sYXlvdXQuZmlndXJlKHt0YXJnZXQ6IHRhcmdldH0sIGNhbiwgc3ViLl90YXJnZXQpLCBjYW4ucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCBtZXRhLnN0eWxlKQoJCQkJCXRhcmdldC5fY2FuID0gc3ViLCBzdWIuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgc3ViLl90YXJnZXQpLCBkZWxldGUodGFyZ2V0Ll9jYW4pIH0KCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YiwgX2NicyksIGNhbi5iYXNlLmlzRnVuYyhtZXRhLl9pbml0KSAmJiBtZXRhLl9pbml0KHN1Yiwgc3ViLl90YXJnZXQpCgkJCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCQkJfSwgdGFyZ2V0LCBsYXN0KSB9IH0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05MQVlPVVQsIHtoZWxwOiAi6aG16Z2i5biD5bGAIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9yb290Ll90YXJnZXQKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBjYW4uY29yZS5LZXlzKGh0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5QQUdFKSkubGVuZ3RoID4gMCkgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTEVGVCwgZnVuY3Rpb24oZmllbGQpIHsgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgIiIpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9MRUZULCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsICIiKQoJCQkJfSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkZJRUxEU0VUX01BSU4sIGZ1bmN0aW9uKGZpZWxkKSB7IGNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgZmllbGQsICIiKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgb3V0cHV0LCAiIikKCQkJCX0pCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJdmFyIHdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5wYWdlLktleXMoaHRtbC5GSUVMRFNFVF9IRUFELCBodG1sLkZJRUxEU0VUX0ZPT1QpLCBmdW5jdGlvbihmaWVsZCkgewoJCQloZWlnaHQgLT0gZmllbGQub2Zmc2V0SGVpZ2h0CgkJfSkKCgkJdmFyIG9mZnNldCA9IGNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAxMDA6IDAKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTEVGVCwgZnVuY3Rpb24oZmllbGQsIGluZGV4KSB7CgkJCWNhbi51c2VyLmlzTW9iaWxlIHx8ICh3aWR0aCAtPSBmaWVsZC5vZmZzZXRXaWR0aCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgaGVpZ2h0LW9mZnNldCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTEVGVCwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsIGhlaWdodC1vZmZzZXQtaHRtbC5BQ1RJT05fSEVJR0hULTIpCgkJCX0pCgkJfSkKCgkJY2FuLnVzZXIuaXNNb2JpbGUgfHwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkZJRUxEU0VUX01BSU4sIGZ1bmN0aW9uKGZpZWxkLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGZpZWxkLCBodG1sLkhFSUdIVCwgaGVpZ2h0LCBodG1sLldJRFRILCB3aWR0aCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJaGVpZ2h0IC09IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9BQ1RJT04pWzBdLm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsIGhlaWdodCkKCQkJfSkKCQl9KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNJWkUsIGNhbi5yZXF1ZXN0KHt9LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodH0pKQoJfSwKCWJhY2tncm91bmQ6IGZ1bmN0aW9uKGNhbiwgdXJsLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldHx8Y2FuLl9yb290Ll90YXJnZXQsIGh0bWwuQkFDS0dST1VORCwgdXJsID09ICIiIHx8IHVybCA9PSAidm9pZCI/ICIiOiAndXJsKCInK3VybCsnIiknKQoJfSwKCWZpZ3VyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCByaWdodCkgeyBpZiAoIWV2ZW50IHx8ICFldmVudC50YXJnZXQpIHsgcmV0dXJuIHt9IH0gdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX2ZpZWxkc3x8Y2FuLl90YXJnZXQKCQl2YXIgcmVjdCA9IGV2ZW50LnRhcmdldCA9PSBkb2N1bWVudC5ib2R5PyB7bGVmdDogd2luZG93LmlubmVyV2lkdGgvMiwgdG9wOiAyMDAsIHJpZ2h0OiB3aW5kb3cuaW5uZXJXaWR0aC8yLCBib3R0b206IDIwMH06IGV2ZW50LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBsYXlvdXQgPSByaWdodD8ge2xlZnQ6IHJlY3QucmlnaHQsIHRvcDogcmVjdC50b3B9OiB7bGVmdDogcmVjdC5sZWZ0LCB0b3A6IHJlY3QuYm90dG9tfQoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkgeyBsZWZ0ID0gbGVmdHx8MCwgdG9wID0gdG9wfHwwCgkJCWlmIChsYXlvdXQudG9wK3RhcmdldC5vZmZzZXRIZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHsKCQkJCWxheW91dC50b3AgPSAiIiwgbGF5b3V0LmJvdHRvbSA9IHJpZ2h0PyBodG1sLkFDVElPTl9IRUlHSFQ6IHdpbmRvdy5pbm5lckhlaWdodC1yZWN0LnRvcAoJCQl9CgkJCWlmIChsYXlvdXQubGVmdCt0YXJnZXQub2Zmc2V0V2lkdGggPiBsZWZ0K3dpZHRoKSB7CgkJCQlsYXlvdXQubGVmdCA9ICIiLCBsYXlvdXQucmlnaHQgPSAwCgkJCX0KCQl9KQoJCXJldHVybiBjYW4ub25tb3Rpb24ubW92ZShjYW4sIHRhcmdldCwgbGF5b3V0KSwgbGF5b3V0Cgl9LAoKCWRpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuQ09OVEVOVH1dfSwKCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5ESVNQTEFZfV19LAoJCV19XSkKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFt7dmlldzogY2hhdC5QUk9KRUNULCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbCgkJCQl7dmlldzogW2NoYXQuTEFZT1VULCBodG1sLlRBQkxFXSwgbGlzdDogWwoJCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuQ09OVEVOVH1dfSwKCQkJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t2aWV3OiBjaGF0LkRJU1BMQVl9XX0sCgkJCQldfQoJCQldfQoJCV19XSB9XSkKCX0sCglwcm9maWxlX2F1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuLCB0YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvamVjdCwgaWNlLkFVVE8pCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9maWxlLCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLmRpc3BsYXksIGljZS5BVVRPKQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgl9LAoJcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCWZ1bmN0aW9uIHRvZ2dsZSh2aWV3KSB7IHZhciBzaG93ID0gdmlldy5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgdmlldywgc2hvdyksIHZpZXcuX3RvZ2dsZT8gdmlldy5fdG9nZ2xlKGV2ZW50LCBzaG93KTogY2FuLm9uaW1wb3J0LmxheW91dCAmJiBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJcmV0dXJuIHNob3cKCQl9CgoJCS8vIHZhciBndCA9ICImIzEwMDk1OyIsIGx0ID0gIiYjMTAwOTQ7IiwgZG93biA9ICImIzcwOTsiLCB1cCA9ICImIzcwODsiCgkJdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiLCBkb3duID0gbHQsIHVwID0gZ3QKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuTEFZT1VULCBodG1sLlRBQkxFXSwgbGlzdDogWwoJCQl7dmlldzogW2NoYXQuUFJPSkVDVCwgaHRtbC5URF0sIGxpc3Q6IFt7dmlldzogW2NoYXQuUFJPSkVDVF19XX0sCgkJCXt0eXBlOiBodG1sLlRELCBsaXN0OiBbCgkJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRSLCBsaXN0OiBbCgkJCQkJe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVERdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LkNPTlRFTlRdfSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPSkVDVF1dLCBsaXN0OiBbe3RleHQ6IFtsdCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLnByb2plY3QpPyBsdDogZ3QsIGh0bWwuRElWXX1dKQoJCQkJCQl9fSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPRklMRV1dLCBsaXN0OiBbe3RleHQ6IFtsdCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLnByb2ZpbGUpPyBndDogbHQsIGh0bWwuRElWXX1dKQoJCQkJCQl9fSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuRElTUExBWV1dLCBsaXN0OiBbe3RleHQ6IFt1cCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLmRpc3BsYXkpPyBkb3duOiB1cCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCV19LAoJCQkJCXt2aWV3OiBbY2hhdC5QUk9GSUxFLCBodG1sLlREXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5QUk9GSUxFXSwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9fV19LAoJCQkJXX1dfSwKCQkJCXt2aWV3OiBbY2hhdC5ESVNQTEFZLCBodG1sLlRSXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5ESVNQTEFZXSwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9fV19CgkJCV19CgkJXSB9XSk7IHJldHVybiBjYW4udWkgPSB1aQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTk1PVElPTiwge2hlbHA6ICLliqjmgIHnibnmlYgiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihodG1sLk9SSUVOVEFUSU9OQ0hBTkdFLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5PUklFTlRBVElPTkNIQU5HRSkgfSkKCQljYW4ub25tb3Rpb24uZmxvYXQuYXV0byhjYW4sIHRhcmdldCkKCX0sCglmbG9hdDoge19oYXNoOiB7fSwKCQlkZWw6IGZ1bmN0aW9uKGNhbiwga2V5KSB7CgkJCWtleSA9PSBjaGF0LkNBUlRFICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBjaGF0LkNBUlRFKSwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB0YXJnZXQpCgkJCX0pCgkJCXZhciBsYXN0ID0gdGhpcy5faGFzaFtrZXldOyBpZiAoIWxhc3QpIHsgcmV0dXJuIH0KCQkJbGFzdC5jbG9zZT8gbGFzdC5jbG9zZSgpOiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBsYXN0Ll90YXJnZXQpCgkJfSwKCQlhZGQ6IGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgeyByZXR1cm4gdGhpcy5kZWwoY2FuLCBrZXkpLCB0aGlzLl9oYXNoW2tleV0gPSB2YWx1ZSB9LAoJCWF1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXkpIHsgdmFyIHRoYXQgPSB0aGlzCgkJCXZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDIpCgkJCWlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7IGxpc3QgPSBbY2hhdC5DQVJURSwgY2hhdC5JTlBVVF0gfQoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgCgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTUcsIGV2ZW50LnRhcmdldCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5LCBpbmRleCkgeyB0aGF0LmRlbChjYW4sIGtleSkgfSkKCQkJfX0pCgkJfSwKCX0sCglzdG9yeTogewoJCV9oYXNoOiB7CgkJCXNwYXJrOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCkgewoJCQkJbWV0YVttZGIuTkFNRV0gPT0gaHRtbC5JTk5FUj8gY2FuLm9ubW90aW9uLmNvcHkoY2FuLCB0YXJnZXQpOiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuU1BBTiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSkKCQkJCX0pCgkJCX0sCgkJfSwKCQlhdXRvOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB2YXIgdGhhdCA9IHRoaXM7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiLnN0b3J5IiwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgbWV0YSA9IGl0ZW0uZGF0YXNldAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCBjYW4uYmFzZS5PYmoobWV0YS5zdHlsZSkpCgkJCQljYW4uY29yZS5DYWxsRnVuYyh0aGF0Ll9oYXNoW21ldGEudHlwZV0sIFtjYW4sIG1ldGEsIHRhcmdldF0pCgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCktODgsIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKS0zMCkKCQkJfSkKCQl9LAoJfSwKCWNvcHk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB0ZXh0LCBjYikgewoJCXRhcmdldC50aXRsZSA9ICLngrnlh7vlpI3liLYiLCB0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgdGV4dHx8dGFyZ2V0LmlubmVyVGV4dCkKCQkJY2FuLnJlcXVlc3QoZXZlbnQsIGtpdC5EaWN0KGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSkpCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQpCgkJfQoJfSwKCWxpbms6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB0ZXh0KSB7CgkJaWYgKHRhcmdldC5pbm5lclRleHQgPT0gIiIpIHsgdGFyZ2V0LmlubmVyVGV4dCA9IHRhcmdldC5ocmVmIH0KCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHt0YXJnZXQ6ICJfYmxhbmsifSkKCX0sCgoJY2xlYXI6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCAiIiksIHRydWUgfSwKCWNhY2hlOiBmdW5jdGlvbihjYW4sIG5leHQpIHsgdmFyIGxpc3QgPSBjYW4uYmFzZS5PYmooY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDIpLCBbY2FuLl9vdXRwdXRdKQoJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLl9jYWNoZV9rZXkgJiYgY2FuLnBhZ2UuQ2FjaGUoaXRlbS5fY2FjaGVfa2V5LCBpdGVtLCBpdGVtLnNjcm9sbFRvcCsxKSB9KQoJCXZhciBrZXkgPSBuZXh0KGNhbi5fY2FjaGVfZGF0YSA9IGNhbi5fY2FjaGVfZGF0YXx8e30pOyBpZiAoIWtleSkgeyByZXR1cm4gfQoJCXJldHVybiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHBvcyA9IGNhbi5wYWdlLkNhY2hlKGl0ZW0uX2NhY2hlX2tleSA9IGtleSwgaXRlbSkKCQkJaWYgKHBvcykgeyBpdGVtLnNjcm9sbFRvICYmIGl0ZW0uc2Nyb2xsVG8oMCwgcG9zLTEpOyByZXR1cm4gaXRlbSB9CgkJfSkubGVuZ3RoID4gMAoJfSwKCWRlbGF5OiBmdW5jdGlvbihjYW4sIGNiLCBpbnRlcnZhbCkgeyBjYW4uY29yZS5UaW1lcihpbnRlcnZhbHx8MTAwLCBjYikgfSwKCWZvY3VzOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyBpZiAoIXRhcmdldCkgeyByZXR1cm4gfQoJCXRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSAmJiB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpLCB0YXJnZXQuZm9jdXMoKQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBpbnB1dCwgYXJncykgeyB2YXIgX2FyZ3MgPSBhcmdzCgkJcmV0dXJuIGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGlucHV0LCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5zZWFyY2goY2FuLnJlcXVlc3QoZXZlbnQsIHthcmdzOiBbbWRiLlRZUEUsIGNoYXQuRklFTERdLmNvbmNhdChfYXJnc3x8W10sIGFyZ3N8fFtdKX0pLCBbWyJIZWFkZXIiLCBjaGF0Lk9OQUNUSU9OLCB3ZWIuU0hBUkVdXSkKCQl9KQoJfSwKCgloaWRkZW46IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBzaG93KSB7CgkJY2FuLnBhZ2Uuc3R5bGVEaXNwbGF5KGNhbiwgdGFyZ2V0fHxjYW4uX3RhcmdldCwgc2hvdz8gIiI6IGh0bWwuTk9ORSkKCQlyZXR1cm4gc2hvdwoJfSwKCXRvZ2dsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHNob3csIGhpZGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCWlmIChzaG93ID09PSB0cnVlKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0LCB0cnVlKSB9CgkJaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0LCBmYWxzZSkgfQoJCXZhciBzdGF0dXMgPSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9PSBodG1sLk5PTkUKCQlpZiAoIShzdGF0dXM/IGNhbi5iYXNlLmlzRnVuYyhzaG93KSAmJiBzaG93KCk6IGNhbi5iYXNlLmlzRnVuYyhoaWRlKSAmJiBoaWRlKCkpKSB7CgkJCWNhbi5wYWdlLnN0eWxlRGlzcGxheShjYW4sIHRhcmdldCwgc3RhdHVzPyAiIjogaHRtbC5OT05FKQoJCX0KCQlyZXR1cm4gc3RhdHVzCgl9LAoJc2VsZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbmFtZSwgd2hpY2gpIHsKCQl2YXIgb2xkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBuYW1lLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKSkgeyByZXR1cm4gaW5kZXggfQoJCX0pWzBdCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBuYW1lLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQljYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QsIGl0ZW0gPT0gd2hpY2ggfHwgd2hpY2ggPT0gaW5kZXgpCgkJfSkKCQlyZXR1cm4gb2xkCgl9LAoJbW9kaWZ5OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgY2IsIGl0ZW0pIHsgdmFyIGJhY2sgPSB0YXJnZXQuaW5uZXJIVE1MLCB0ZXh0ID0gdGFyZ2V0LmlubmVyVGV4dAoJCWlmIChiYWNrLmxlbmd0aCA+IDEyMCB8fCBiYWNrLmluZGV4T2YoaWNlLk5MKSA+IC0xKSB7CgkJCXJldHVybiBjYW4ub25tb3Rpb24ubW9kaWZ5cyhjYW4sIHRhcmdldCwgY2IpCgkJfQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JTlBVVCwgdmFsdWU6IHRhcmdldC5pbm5lclRleHQsIHN0eWxlOiB7CgkJCXdpZHRoOiB0YXJnZXQub2Zmc2V0V2lkdGggPiA0MDA/IDQwMDogdGFyZ2V0Lm9mZnNldFdpZHRoLTIwLAoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogdGFyZ2V0LmlubmVySFRNTCA9IGV2ZW50LnRhcmdldC52YWx1ZQoJCQkJCWV2ZW50LnRhcmdldC52YWx1ZSA9PSBiYWNrIHx8IGNiKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIGJhY2spCgkJCQkJYnJlYWsKCQkJCWNhc2UgbGFuZy5FU0NBUEU6IHRhcmdldC5pbm5lckhUTUwgPSBiYWNrOyBicmVhawoJCQkJZGVmYXVsdDogY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCX0KCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IGl0ZW0gJiYgY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCwgY2IpCgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQuY2xpY2soKSB9KQoJCX19XSkKCX0sCgltb2RpZnlzOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgY2IsIGl0ZW0pIHsgdmFyIGJhY2sgPSB0YXJnZXQuaW5uZXJIVE1MCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCB2YWx1ZTogdGFyZ2V0LmlubmVyVGV4dCwgc3R5bGU6IHsKCQkJd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aCA+IDQwMD8gNDAwOiB0YXJnZXQub2Zmc2V0V2lkdGgtMjAsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCA8IDYwPyA2MDogdGFyZ2V0Lm9mZnNldEhlaWdodC0yMCwKCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQljYXNlIGxhbmcuRU5URVI6CgkJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsgdGFyZ2V0LmlubmVySFRNTCA9IGV2ZW50LnRhcmdldC52YWx1ZQoJCQkJCQlldmVudC50YXJnZXQudmFsdWUgPT0gYmFjayB8fCBjYihldmVudCwgZXZlbnQudGFyZ2V0LnZhbHVlLCBiYWNrKQoJCQkJCX0KCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLkVTQ0FQRTogdGFyZ2V0LmlubmVySFRNTCA9IGJhY2s7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJfQoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJaXRlbSAmJiBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KQoJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdGFyZ2V0LmNsaWNrKCkgfSkKCQl9fV0pCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2h0bWwyY2FudmFzQDEuMC4wLXJjLjUvZGlzdC9odG1sMmNhbnZhcy5taW4uanMiXSwgZnVuY3Rpb24oKSB7CgkJCWh0bWwyY2FudmFzKHRhcmdldHx8Y2FuLl90YXJnZXQpLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgeyB2YXIgdXJsID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikKCQkJCXZhciB0b2FzdCA9IGNhbi51c2VyLnRvYXN0KGNhbiwge2NvbnRlbnQ6IHtpbWc6IHVybCwgc3R5bGU6IHsibWF4LWhlaWdodCI6IDI0MCwgZGlzcGxheTogaHRtbC5CTE9DS319LCBkdXJhdGlvbjogLTEsCgkJCQkJYWN0aW9uOiBzaHkoe30sIFtjbGkuQ0xPU0UsICJkb3dubG9hZCJdLCBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogbWRiLk5BTUUsIHZhbHVlOiBuYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsgdG9hc3QuY2xvc2UoKQoJCQkJCQkJY2FuLnBhZ2UuQ3JlYXRlKGNhbiwgaHRtbC5BLCB7aHJlZjogdXJsLCBkb3dubG9hZDogbGlzdFswXSsiLnBuZyJ9KS5jbGljaygpCgkJCQkJCX0pCgkJCQkJfSksCgkJCQl9KQoJCQl9KQoJCX0pCgl9LAoKCWhpZGU6IGZ1bmN0aW9uKGNhbiwgdGltZSwgY2IsIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJdGltZSA9IGNhbi5iYXNlLmlzT2JqZWN0KHRpbWUpPyB0aW1lOiB7dmFsdWU6IDEwLCBsZW5ndGg6IHRpbWV8fDIwfQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk9QQUNJVFksIDEpCgkJY2FuLmNvcmUuVGltZXIodGltZSwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAxLShpbmRleCsxKS90aW1lLmxlbmd0aCkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpLCBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5ESVNQTEFZLCBodG1sLk5PTkUpIH0pCgl9LAoJc2hvdzogZnVuY3Rpb24oY2FuLCB0aW1lLCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQl0aW1lID0gY2FuLmJhc2UuaXNPYmplY3QodGltZSk/IHRpbWU6IHtpbnRlcnZhbDogMTAsIGxlbmd0aDogdGltZXx8MzB9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgMCwgaHRtbC5ESVNQTEFZLCBodG1sLkJMT0NLKQoJCWNhbi5jb3JlLlRpbWVyKHRpbWUsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgaW5kZXgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgKGluZGV4KzEpL3RpbWUubGVuZ3RoKQoJCX0sIGNiKQoJfSwKCW1vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsYXlvdXQsIGNiKSB7IHZhciBiZWdpbjsgbGF5b3V0ID0gbGF5b3V0fHx7fQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBsYXlvdXQpLCB0YXJnZXQub25tb3VzZWRvd24gPSBmdW5jdGlvbihldmVudCkgewoJCQlsYXlvdXQuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCwgbGF5b3V0LndpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoCgkJCWxheW91dC5sZWZ0ID0gdGFyZ2V0Lm9mZnNldExlZnQsIGxheW91dC50b3AgPSB0YXJnZXQub2Zmc2V0VG9wCgkJCWJlZ2luID0gY2FuLmJhc2UuQ29weSh7eDogZXZlbnQueCwgeTogZXZlbnQueX0sIGxheW91dCkKCQl9LCB0YXJnZXQub25tb3VzZXVwID0gZnVuY3Rpb24oZXZlbnQpIHsgYmVnaW4gPSBudWxsIH0KCgkJdGFyZ2V0Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFiZWdpbiB8fCAhZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfQoJCQlpZiAoZXZlbnQuc2hpZnRLZXkpIHsKCQkJCWxheW91dC53aWR0aCA9IGxheW91dC53aWR0aCArIGV2ZW50LnggLSBiZWdpbi54IAoJCQkJbGF5b3V0LmhlaWdodCA9IGxheW91dC5oZWlnaHQgKyBldmVudC55IC0gYmVnaW4ueQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBsYXlvdXQuaGVpZ2h0LCBodG1sLldJRFRILCBsYXlvdXQud2lkdGgpCgkJCX0gZWxzZSB7CgkJCQlsYXlvdXQudG9wID0gYmVnaW4udG9wICsgZXZlbnQueSAtIGJlZ2luLnkKCQkJCWxheW91dC5sZWZ0ID0gYmVnaW4ubGVmdCArIGV2ZW50LnggLSBiZWdpbi54IAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuTEVGVCwgbGF5b3V0LmxlZnQsIGh0bWwuVE9QLCBsYXlvdXQudG9wKQoJCQl9CgkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0YXJnZXQsIGxheW91dCkKCQl9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0YXJnZXQsIGxheW91dCkKCX0sCgoJc2VsZWN0RmllbGQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoIWV2ZW50LmN0cmxLZXkgfHwgZXZlbnQua2V5IDwgIjAiIHx8IGV2ZW50LmtleSA+ICI5IikgeyByZXR1cm4gfQoJCWlmIChldmVudC5rZXkgPT0gIjAiKSB7IHJldHVybiBjYW4ub25pbXBvcnQuX2JhY2soY2FuKSB9CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gZXZlbnQua2V5KSB7CgkJCXZhciBoZWFkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuVEgsIGZ1bmN0aW9uKHRoLCBvcmRlcikgeyByZXR1cm4gdGguaW5uZXJUZXh0IH0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsgY2FuLk9wdGlvbihoZWFkW2luZGV4XSwgdGQuaW5uZXJUZXh0KSB9KQoJCQljYW4uVXBkYXRlKGV2ZW50KQoJCX0gfSkKCX0sCglzZWxlY3RJbnB1dFRhYmxlOiBmdW5jdGlvbihldmVudCwgY2FuLCBjYiwgdGFyZ2V0KSB7CgkJLy8gaWYgKHRhcmdldC52YWx1ZSA9PSAiIikgeyByZXR1cm4gY2IoKSB9CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSBsYW5nLlNISUZUOgoJCQljYXNlIGxhbmcuQ09OVFJPTDoKCQkJCXJldHVybgoJCX0KCgkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJaWYgKHRhcmdldC5faW5kZXggPT0gdW5kZWZpbmVkKSB7CgkJCQl0YXJnZXQuX2luZGV4ID0gLTEsIHRhcmdldC5fdmFsdWUgPSB0YXJnZXQudmFsdWUKCQkJfQoJCQlmdW5jdGlvbiBzZWxlY3Qob3JkZXIpIHsgaWYgKG9yZGVyID09IC0xKSB7IHRhcmdldC52YWx1ZSA9IHRhcmdldC5fdmFsdWUgfQoJCQkJdmFyIGluZGV4ID0gMDsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgaHRtbC5ISURERU4pKSB7IHJldHVybiB9CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLlNFTEVDVCk7IGlmIChvcmRlciAhPSBpbmRleCsrKSB7IHJldHVybiB0ciB9CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLlNFTEVDVCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsKCQkJCQkJaW5kZXggPT0gMCAmJiAodGFyZ2V0LnZhbHVlID0gdGQuaW5uZXJUZXh0KQoJCQkJCX0pOyByZXR1cm4gdHIKCQkJCX0pLmxlbmd0aAoJCQl9CgkJCXZhciB0b3RhbCA9IHNlbGVjdCh0YXJnZXQuX2luZGV4KTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgIm4iOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4KzIpICUgKHRvdGFsKzEpIC0gMSk7IGJyZWFrCgkJCQljYXNlICJwIjogc2VsZWN0KHRhcmdldC5faW5kZXggPSAodGFyZ2V0Ll9pbmRleCt0b3RhbCsxKSAlICh0b3RhbCsxKSAtIDEpOyBicmVhawoJCQkJZGVmYXVsdDogcmV0dXJuCgkJCX0KCQkJcmV0dXJuIGNhbi5TdGF0dXMobWRiLklOREVYLCB0YXJnZXQuX2luZGV4KSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJfQoKCQl0YXJnZXQuX2luZGV4ID0gLTEsIHRhcmdldC5fdmFsdWUgPSB0YXJnZXQudmFsdWUKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJdmFyIGhhcyA9IGZhbHNlOyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCWhhcyA9IGhhcyB8fCB0ZC5pbm5lclRleHQuaW5kZXhPZih0YXJnZXQudmFsdWUpPi0xCgkJCX0pLCBjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuSElEREVOLCAhaGFzKQoJCX0pCgoJCXZhciB0b3RhbCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCBodG1sLkhJRERFTikpIHsgcmV0dXJuIHRyIH0KCQl9KS5sZW5ndGg7IHRvdGFsID09IDAgJiYgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJY2FuLlN0YXR1cyhraXQuRGljdChtZGIuVE9UQUwsIHRvdGFsLCBtZGIuSU5ERVgsIHRhcmdldC5faW5kZXgpKQoJfSwKCXNlbGVjdFRhYmxlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNiKSB7IGlmICghZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfQoJCWZ1bmN0aW9uIHNlbGVjdChvcmRlcikgeyB2YXIgaW5kZXggPSAwCgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsIGh0bWwuSElEREVOKSkgeyByZXR1cm4gfQoJCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuU0VMRUNULCBvcmRlciA9PSBpbmRleCsrKSkgeyByZXR1cm4gdHIgfQoJCQkJcmV0dXJuIGNhbi5TdGF0dXMobWRiLklOREVYLCBpbmRleC0xKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0ciksIHRyCgkJCX0pLmxlbmd0aAoJCX0KCQl2YXIgdG90YWwgPSBzZWxlY3QodGFyZ2V0Ll9pbmRleCk7IHN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgIm4iOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICgodGFyZ2V0Ll9pbmRleCkrMSkgJSB0b3RhbCk7IGJyZWFrCgkJCWNhc2UgInAiOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4LTEpIDwgMD8gdG90YWwtMTogKHRhcmdldC5faW5kZXgtMSkpOyBicmVhawoJCQlkZWZhdWx0OiB0YXJnZXQuX2luZGV4ID0gMDsgcmV0dXJuCgkJfSBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwgX2ZvY3VzOiBbXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJZG9jdW1lbnQuYm9keS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJaWYgKHdpbmRvdy53ZWJ2aWV3KSB7CgkJCQlpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT0gIkEiKSB7IGNhbi51c2VyLm9wZW4oZXZlbnQudGFyZ2V0LmhyZWYpIH0KCQkJfQoJCQlpZiAoY2FuLnBhZ2UudGFnaXMoW2h0bWwuU0VMRUNULCBodG1sLklOUFVULCBodG1sLlRFWFRBUkVBXSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBkb2N1bWVudC5ib2R5LCBjYW4ucGFnZS5LZXlzKCJmaWVsZHNldC5pbnB1dC5rZXkuZmxvYXQiKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJfSkKCQl9CgkJY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pLCBkb2N1bWVudC5ib2R5Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWlmIChldmVudC5tZXRhS2V5KSB7IGlmICh3aW5kb3cud2VidmlldykgewoJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQljYXNlICJxIjogd2luZG93LnRlcm1pbmF0ZSgpOyBicmVhawoJCQkJCWNhc2UgInciOiBjYW4udXNlci5jbG9zZSgpOyBicmVhawoJCQkJCWNhc2UgInIiOiBjYW4udXNlci5yZWxvYWQoKTsgYnJlYWsKCQkJCQljYXNlICJmIjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdCh7fSwge3R5cGU6ICIqIn0pKTsgYnJlYWsKCQkJCQljYXNlICJbIjogaGlzdG9yeS5iYWNrKCk7IGJyZWFrCgkJCQkJY2FzZSAiXSI6IGhpc3RvcnkuZm9yd2FyZCgpOyBicmVhawoJCQkJfQoJCQl9IHJldHVybiB9CgoJCQlpZiAoY2FuLnBhZ2UudGFnaXMoW2h0bWwuU0VMRUNULCBodG1sLklOUFVULCBodG1sLlRFWFRBUkVBXSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHsibW9kZWwiOiAibm9ybWFsIn0pOyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05LRVlET1dOLCBtc2cpOyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJY2FuLl9rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBtc2cuT3B0aW9uKCJtb2RlbCIpLCBjYW4uX2tleWxpc3QsIGNhbi5fb3V0cHV0KQoJCX0KCX0sCglfYnVpbGQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm9ua2V5bWFwLl9tb2RlLCBmdW5jdGlvbihpdGVtLCB2YWx1ZSkgeyB2YXIgZW5naW5lID0ge2xpc3Q6IHt9fQoJCQljYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IHZhciBtYXAgPSBlbmdpbmUKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKCFtYXAubGlzdFtrZXlbaV1dKSB7IG1hcC5saXN0W2tleVtpXV0gPSB7bGlzdDoge319IH0KCQkJCQltYXAgPSBtYXAubGlzdFtrZXlbaV1dOyBpZiAoaSA9PSBrZXkubGVuZ3RoLTEpIHsgbWFwLmNiID0gY2IgfQoJCQkJfQoJCQl9KSwgY2FuLm9ua2V5bWFwLl9lbmdpbmVbaXRlbV0gPSBlbmdpbmUKCQl9KQoJfSwKCV9wYXJzZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbW9kZSwgbGlzdCwgdGFyZ2V0KSB7IGxpc3QgPSBsaXN0fHxbXQoJCWlmIChbIkNvbnRyb2wiLCAiU2hpZnQiXS5pbmRleE9mKGV2ZW50LmtleSkgPiAtMSkgeyByZXR1cm4gbGlzdCB9CgkJbGlzdC5wdXNoKGV2ZW50LmtleSk7IGZvciAodmFyIHByZSA9IDA7IHByZSA8IGxpc3QubGVuZ3RoOyBwcmUrKykgewoJCQlpZiAoIjAiIDw9IGxpc3RbcHJlXSAmJiBsaXN0W3ByZV0gPD0gIjkiKSB7IGNvbnRpbnVlIH0gYnJlYWsKCQl9OyB2YXIgY291bnQgPSBwYXJzZUludChsaXN0LnNsaWNlKDAsIHByZSkuam9pbigiIikpfHwxCgoJCXZhciBtYXAgPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV0KCQlmdW5jdGlvbiByZXBlYXQoY2IsIGNvdW50KSB7IGxpc3QgPSBbXTsgZm9yICh2YXIgaSA9IDE7IGkgPD0gY291bnQ7IGkrKykgeyBpZiAoY2IoZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkpIHsgYnJlYWsgfSB9IH0KCQl2YXIgY2IgPSBtYXAgJiYgbWFwW2V2ZW50LmtleV07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGV2ZW50LmtleS5sZW5ndGggPiAxKSB7IHJlcGVhdChjYiwgY291bnQpOyByZXR1cm4gbGlzdCB9CgkJdmFyIGNiID0gbWFwICYmIG1hcFtldmVudC5rZXkudG9Mb3dlckNhc2UoKV07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGV2ZW50LmtleS5sZW5ndGggPiAxKSB7IHJlcGVhdChjYiwgY291bnQpOyByZXR1cm4gbGlzdCB9CgoJCXZhciBtYXAgPSBjYW4ub25rZXltYXAuX2VuZ2luZVttb2RlXTsgaWYgKCFtYXApIHsgcmV0dXJuIFtdIH0KCQlmb3IgKHZhciBpID0gcHJlOyBpIDwgbGlzdC5sZW5ndGg7IGkrKyApIHsKCQkJdmFyIG1hcCA9IG1hcC5saXN0W2xpc3RbaV1dOyBpZiAoIW1hcCkgeyByZXR1cm4gW10gfQoJCQlpZiAoaSA9PSBsaXN0Lmxlbmd0aC0xICYmIGNhbi5iYXNlLmlzRnVuYyhtYXAuY2IpKSB7IHJlcGVhdChtYXAuY2IsIGNvdW50KTsgcmV0dXJuIFtdIH0KCQl9CgkJcmV0dXJuIGxpc3QKCX0sCglfbW9kZTogewoJCWluc2VydDogewoJCQlqazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldC5ibHVyKCksIGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTEsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJRXNjYXBlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LmJsdXIoKSB9LAoJCQlFbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBoaXMgPSB0YXJnZXQuX2hpc3Rvcnl8fFtdCgkJCQloaXMucHVzaCh0YXJnZXQudmFsdWUpLCB0YXJnZXQuX2hpc3RvcnkgPSBoaXMsIHRhcmdldC5fY3VycmVudCA9IGhpcy5sZW5ndGgKCQkJCWNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIGV2ZW50LnRhcmdldCkgJiYgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJCQl9LAoJCX0sCgkJaW5zZXJ0X2N0cmw6IHsKCQkJcDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgaGlzID0gdGFyZ2V0Ll9oaXN0b3J5fHxbXSwgcG9zID0gdGFyZ2V0Ll9jdXJyZW50fHwwCgkJCQlwb3MgPSAtLXBvcyAlIChoaXMubGVuZ3RoKzEpOyBpZiAocG9zIDwgMCkgeyBwb3MgPSBoaXMubGVuZ3RoIH0KCQkJCXRhcmdldC5fY3VycmVudCA9IHBvcywgdGFyZ2V0LnZhbHVlID0gaGlzW3Bvc118fCIiCgkJCX0sCgkJCW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJdmFyIGhpcyA9IHRhcmdldC5faGlzdG9yeXx8W10sIHBvcyA9IHRhcmdldC5fY3VycmVudHx8MAoJCQkJcG9zID0gKytwb3MgJSAoaGlzLmxlbmd0aCsxKQoJCQkJdGFyZ2V0Ll9jdXJyZW50ID0gcG9zLCB0YXJnZXQudmFsdWUgPSBoaXNbcG9zXXx8IiIKCQkJfSwKCgkJCXU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIDAsIHRhcmdldC5zZWxlY3Rpb25FbmQpIH0sCgkJCWs6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJaDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTEsIDEpIH0sCgkJCWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIDAsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBzdGFydCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydC0yLCBlbmQgPSB0YXJnZXQuc2VsZWN0aW9uRW5kLTEKCQkJCWZvciAodmFyIGkgPSBzdGFydDsgaSA+PSAwOyBpLS0pIHsKCQkJCQlpZiAodGFyZ2V0LnZhbHVlW2VuZF0gPT0gaWNlLlNQICYmIHRhcmdldC52YWx1ZVtpXSAhPSBpY2UuU1ApIHsgYnJlYWsgfQoJCQkJCWlmICh0YXJnZXQudmFsdWVbZW5kXSAhPSBpY2UuU1AgJiYgdGFyZ2V0LnZhbHVlW2ldID09IGljZS5TUCkgeyBicmVhayB9CgkJCQl9IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgaSsxLCBlbmQtaSkKCQkJfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCgoJaW5wdXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50Lm1ldGFrZXkpIHsgcmV0dXJuIH0gdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCXRhcmdldC5fa2V5cyA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgZXZlbnQuY3RybEtleT8gImluc2VydF9jdHJsIjogbWRiLklOU0VSVCwgdGFyZ2V0Ll9rZXlzLCB0YXJnZXQpCgl9LAoJcHJldmVudDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IHJldHVybiB0cnVlIH0sCglkZWxldGVUZXh0OiBmdW5jdGlvbih0YXJnZXQsIHN0YXJ0LCBjb3VudCkgeyB2YXIgZW5kID0gY291bnQ/IHN0YXJ0K2NvdW50OiB0YXJnZXQudmFsdWUubGVuZ3RoCgkJdmFyIGN1dCA9IHRhcmdldC52YWx1ZS5zbGljZShzdGFydCwgZW5kKQoJCXRhcmdldC52YWx1ZSA9IHRhcmdldC52YWx1ZS5zdWJzdHJpbmcoMCwgc3RhcnQpK3RhcmdldC52YWx1ZS5zdWJzdHJpbmcoZW5kLCB0YXJnZXQudmFsdWUubGVuZ3RoKQoJCXJldHVybiB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIHN0YXJ0KSwgY3V0Cgl9LAoJaW5zZXJ0VGV4dDogZnVuY3Rpb24odGFyZ2V0LCB0ZXh0KSB7IHZhciBzdGFydCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydAoJCXZhciBiZWZvcmUgPSB0YXJnZXQudmFsdWUuc2xpY2UoMCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KQoJCXZhciBhZnRlciA9IHRhcmdldC52YWx1ZS5zbGljZSh0YXJnZXQuc2VsZWN0aW9uRW5kKQoJCXRhcmdldC52YWx1ZSA9IGJlZm9yZSt0ZXh0K2FmdGVyCgkJcmV0dXJuIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCsxLCBzdGFydCsxKQoJfSwKCWN1cnNvck1vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjb3VudCwgYmVnaW4pIHsgYmVnaW4gIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShiZWdpbiwgYmVnaW4pCgkJdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHRhcmdldC5zZWxlY3Rpb25TdGFydCtjb3VudCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0K2NvdW50KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcmVxdWlyZS9ub2RlX21vZHVsZXMveHRlcm0vbGliL3h0ZXJtLmpzIgohZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHQpO2Vsc2V7dmFyIHI9dCgpO2Zvcih2YXIgaSBpbiByKSgib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czplKVtpXT1yW2ldfX0oc2VsZiwoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9ezQ1Njc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQWNjZXNzaWJpbGl0eU1hbmFnZXI9dm9pZCAwO3ZhciBvPXIoOTA0Mikscz1yKDYxMTQpLGE9cig5OTI0KSxjPXIoMzY1NiksbD1yKDg0NCksaD1yKDU1OTYpLHU9cig5NjMxKSxmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7aS5fdGVybWluYWw9dCxpLl9yZW5kZXJTZXJ2aWNlPXIsaS5fbGl2ZVJlZ2lvbkxpbmVDb3VudD0wLGkuX2NoYXJzVG9Db25zdW1lPVtdLGkuX2NoYXJzVG9Bbm5vdW5jZT0iIixpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWFjY2Vzc2liaWxpdHkiKSxpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QudGFiSW5kZXg9MCxpLl9yb3dDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksaS5fcm93Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgicm9sZSIsImxpc3QiKSxpLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0tYWNjZXNzaWJpbGl0eS10cmVlIiksaS5fcm93RWxlbWVudHM9W107Zm9yKHZhciBuPTA7bjxpLl90ZXJtaW5hbC5yb3dzO24rKylpLl9yb3dFbGVtZW50c1tuXT1pLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKSxpLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoaS5fcm93RWxlbWVudHNbbl0pO2lmKGkuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gaS5fb25Cb3VuZGFyeUZvY3VzKGUsMCl9LGkuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gaS5fb25Cb3VuZGFyeUZvY3VzKGUsMSl9LGkuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIixpLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpLGkuX3Jvd0VsZW1lbnRzW2kuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsaS5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKSxpLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKSxpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuYXBwZW5kQ2hpbGQoaS5fcm93Q29udGFpbmVyKSxpLl9yZW5kZXJSb3dzRGVib3VuY2VyPW5ldyBhLlRpbWVCYXNlZERlYm91bmNlcihpLl9yZW5kZXJSb3dzLmJpbmQoaSkpLGkuX3JlZnJlc2hSb3dzKCksaS5fbGl2ZVJlZ2lvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLl9saXZlUmVnaW9uLmNsYXNzTGlzdC5hZGQoImxpdmUtcmVnaW9uIiksaS5fbGl2ZVJlZ2lvbi5zZXRBdHRyaWJ1dGUoImFyaWEtbGl2ZSIsImFzc2VydGl2ZSIpLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZChpLl9saXZlUmVnaW9uKSwhaS5fdGVybWluYWwuZWxlbWVudCl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBlbmFibGUgYWNjZXNzaWJpbGl0eSBiZWZvcmUgVGVybWluYWwub3BlbiIpO3JldHVybiBpLl90ZXJtaW5hbC5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIsaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290KSxpLnJlZ2lzdGVyKGkuX3JlbmRlclJvd3NEZWJvdW5jZXIpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25SZXNpemUoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9vblJlc2l6ZShlLnJvd3MpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uUmVuZGVyKChmdW5jdGlvbihlKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3MoZS5zdGFydCxlLmVuZCl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25TY3JvbGwoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzKCl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25BMTF5Q2hhcigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uQ2hhcihlKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vbkxpbmVGZWVkKChmdW5jdGlvbigpe3JldHVybiBpLl9vbkNoYXIoIlxuIil9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25BMTF5VGFiKChmdW5jdGlvbihlKXtyZXR1cm4gaS5fb25UYWIoZSl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25LZXkoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9vbktleShlLmtleSl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25CbHVyKChmdW5jdGlvbigpe3JldHVybiBpLl9jbGVhckxpdmVSZWdpb24oKX0pKSksaS5yZWdpc3RlcihpLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCl9KSkpLGkuX3NjcmVlbkRwck1vbml0b3I9bmV3IGguU2NyZWVuRHByTW9uaXRvcixpLnJlZ2lzdGVyKGkuX3NjcmVlbkRwck1vbml0b3IpLGkuX3NjcmVlbkRwck1vbml0b3Iuc2V0TGlzdGVuZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfSkpLGkucmVnaXN0ZXIoKDAsYy5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHdpbmRvdywicmVzaXplIiwoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCl9KSkpLGl9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLCgwLHUucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQpKHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCksdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoPTB9LHQucHJvdG90eXBlLl9vbkJvdW5kYXJ5Rm9jdXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnRhcmdldCxpPXRoaXMuX3Jvd0VsZW1lbnRzWzA9PT10PzE6dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTJdO2lmKHIuZ2V0QXR0cmlidXRlKCJhcmlhLXBvc2luc2V0IikhPT0oMD09PXQ/IjEiOiIiK3RoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5sZW5ndGgpJiZlLnJlbGF0ZWRUYXJnZXQ9PT1pKXt2YXIgbixvO2lmKDA9PT10PyhuPXIsbz10aGlzLl9yb3dFbGVtZW50cy5wb3AoKSx0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQobykpOihuPXRoaXMuX3Jvd0VsZW1lbnRzLnNoaWZ0KCksbz1yLHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChuKSksbi5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKSxvLnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLDA9PT10KXt2YXIgcz10aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTt0aGlzLl9yb3dFbGVtZW50cy51bnNoaWZ0KHMpLHRoaXMuX3Jvd0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLHMpfWVsc2Ugcz10aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKSx0aGlzLl9yb3dFbGVtZW50cy5wdXNoKHMpLHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChzKTt0aGlzLl9yb3dFbGVtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKSx0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksdGhpcy5fdGVybWluYWwuc2Nyb2xsTGluZXMoMD09PXQ/LTE6MSksdGhpcy5fcm93RWxlbWVudHNbMD09PXQ/MTp0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMl0uZm9jdXMoKSxlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX19LHQucHJvdG90eXBlLl9vblJlc2l6ZT1mdW5jdGlvbihlKXt0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7Zm9yKHZhciB0PXRoaXMuX3Jvd0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7dDx0aGlzLl90ZXJtaW5hbC5yb3dzO3QrKyl0aGlzLl9yb3dFbGVtZW50c1t0XT10aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKSx0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm93RWxlbWVudHNbdF0pO2Zvcig7dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoPmU7KXRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSk7dGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJyb2xlIiwibGlzdGl0ZW0iKSxlLnRhYkluZGV4PS0xLHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKGUpLGV9LHQucHJvdG90eXBlLl9vblRhYj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGU7dCsrKXRoaXMuX29uQ2hhcigiICIpfSx0LnByb3RvdHlwZS5fb25DaGFyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudDwyMSYmKHRoaXMuX2NoYXJzVG9Db25zdW1lLmxlbmd0aD4wP3RoaXMuX2NoYXJzVG9Db25zdW1lLnNoaWZ0KCkhPT1lJiYodGhpcy5fY2hhcnNUb0Fubm91bmNlKz1lKTp0aGlzLl9jaGFyc1RvQW5ub3VuY2UrPWUsIlxuIj09PWUmJih0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50KyssMjE9PT10aGlzLl9saXZlUmVnaW9uTGluZUNvdW50JiYodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCs9by50b29NdWNoT3V0cHV0KSkscy5pc01hYyYmdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCYmdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudC5sZW5ndGg+MCYmIXRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSYmc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Ll9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuYXBwZW5kQ2hpbGQodC5fbGl2ZVJlZ2lvbil9KSwwKSl9LHQucHJvdG90eXBlLl9jbGVhckxpdmVSZWdpb249ZnVuY3Rpb24oKXt0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50PSIiLHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQ9MCxzLmlzTWFjJiYoMCx1LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9saXZlUmVnaW9uKX0sdC5wcm90b3R5cGUuX29uS2V5PWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpLHRoaXMuX2NoYXJzVG9Db25zdW1lLnB1c2goZSl9LHQucHJvdG90eXBlLl9yZWZyZXNoUm93cz1mdW5jdGlvbihlLHQpe3RoaXMuX3JlbmRlclJvd3NEZWJvdW5jZXIucmVmcmVzaChlLHQsdGhpcy5fdGVybWluYWwucm93cyl9LHQucHJvdG90eXBlLl9yZW5kZXJSb3dzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcixpPXIubGluZXMubGVuZ3RoLnRvU3RyaW5nKCksbj1lO248PXQ7bisrKXt2YXIgbz1yLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhyLnlkaXNwK24sITApLHM9KHIueWRpc3ArbisxKS50b1N0cmluZygpLGE9dGhpcy5fcm93RWxlbWVudHNbbl07YSYmKDA9PT1vLmxlbmd0aD9hLmlubmVyVGV4dD0iwqAiOmEudGV4dENvbnRlbnQ9byxhLnNldEF0dHJpYnV0ZSgiYXJpYS1wb3NpbnNldCIscyksYS5zZXRBdHRyaWJ1dGUoImFyaWEtc2V0c2l6ZSIsaSkpfXRoaXMuX2Fubm91bmNlQ2hhcmFjdGVycygpfSx0LnByb3RvdHlwZS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQpe3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCE9PXRoaXMuX3Rlcm1pbmFsLnJvd3MmJnRoaXMuX29uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLnJvd3MpO2Zvcih2YXIgZT0wO2U8dGhpcy5fdGVybWluYWwucm93cztlKyspdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnModGhpcy5fcm93RWxlbWVudHNbZV0pfX0sdC5wcm90b3R5cGUuX3JlZnJlc2hSb3dEaW1lbnNpb25zPWZ1bmN0aW9uKGUpe2Uuc3R5bGUuaGVpZ2h0PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCJ9LHQucHJvdG90eXBlLl9hbm5vdW5jZUNoYXJhY3RlcnM9ZnVuY3Rpb24oKXswIT09dGhpcy5fY2hhcnNUb0Fubm91bmNlLmxlbmd0aCYmKHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQrPXRoaXMuX2NoYXJzVG9Bbm5vdW5jZSx0aGlzLl9jaGFyc1RvQW5ub3VuY2U9IiIpfSx0fShsLkRpc3Bvc2FibGUpO3QuQWNjZXNzaWJpbGl0eU1hbmFnZXI9Zn0sMzYxNDooZSx0KT0+e2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUucmVwbGFjZSgvXHI/XG4vZywiXHIiKX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIHQ/IhtbMjAwfiIrZSsiG1syMDF+IjplfWZ1bmN0aW9uIG4oZSx0LG4pe2U9aShlPXIoZSksbi5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlKSxuLnRyaWdnZXJEYXRhRXZlbnQoZSwhMCksdC52YWx1ZT0iIn1mdW5jdGlvbiBvKGUsdCxyKXt2YXIgaT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ZS5jbGllbnRYLWkubGVmdC0xMCxvPWUuY2xpZW50WS1pLnRvcC0xMDt0LnN0eWxlLndpZHRoPSIyMHB4Iix0LnN0eWxlLmhlaWdodD0iMjBweCIsdC5zdHlsZS5sZWZ0PW4rInB4Iix0LnN0eWxlLnRvcD1vKyJweCIsdC5zdHlsZS56SW5kZXg9IjEwMDAiLHQuZm9jdXMoKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5yaWdodENsaWNrSGFuZGxlcj10Lm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3I9dC5wYXN0ZT10LmhhbmRsZVBhc3RlRXZlbnQ9dC5jb3B5SGFuZGxlcj10LmJyYWNrZXRUZXh0Rm9yUGFzdGU9dC5wcmVwYXJlVGV4dEZvclRlcm1pbmFsPXZvaWQgMCx0LnByZXBhcmVUZXh0Rm9yVGVybWluYWw9cix0LmJyYWNrZXRUZXh0Rm9yUGFzdGU9aSx0LmNvcHlIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7ZS5jbGlwYm9hcmREYXRhJiZlLmNsaXBib2FyZERhdGEuc2V0RGF0YSgidGV4dC9wbGFpbiIsdC5zZWxlY3Rpb25UZXh0KSxlLnByZXZlbnREZWZhdWx0KCl9LHQuaGFuZGxlUGFzdGVFdmVudD1mdW5jdGlvbihlLHQscil7ZS5zdG9wUHJvcGFnYXRpb24oKSxlLmNsaXBib2FyZERhdGEmJm4oZS5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKSx0LHIpfSx0LnBhc3RlPW4sdC5tb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yPW8sdC5yaWdodENsaWNrSGFuZGxlcj1mdW5jdGlvbihlLHQscixpLG4pe28oZSx0LHIpLG4mJmkucmlnaHRDbGlja1NlbGVjdChlKSx0LnZhbHVlPWkuc2VsZWN0aW9uVGV4dCx0LnNlbGVjdCgpfX0sNzIzOTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbG9yQ29udHJhc3RDYWNoZT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fY29sb3I9e30sdGhpcy5fcmdiYT17fX1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9jb2xvcj17fSx0aGlzLl9yZ2JhPXt9fSxlLnByb3RvdHlwZS5zZXRDc3M9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3JnYmFbZV18fCh0aGlzLl9yZ2JhW2VdPXt9KSx0aGlzLl9yZ2JhW2VdW3RdPXJ9LGUucHJvdG90eXBlLmdldENzcz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9yZ2JhW2VdP3RoaXMuX3JnYmFbZV1bdF06dm9pZCAwfSxlLnByb3RvdHlwZS5zZXRDb2xvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY29sb3JbZV18fCh0aGlzLl9jb2xvcltlXT17fSksdGhpcy5fY29sb3JbZV1bdF09cn0sZS5wcm90b3R5cGUuZ2V0Q29sb3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29sb3JbZV0/dGhpcy5fY29sb3JbZV1bdF06dm9pZCAwfSxlfSgpO3QuQ29sb3JDb250cmFzdENhY2hlPXJ9LDU2ODA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc307T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29sb3JNYW5hZ2VyPXQuREVGQVVMVF9BTlNJX0NPTE9SUz12b2lkIDA7dmFyIG49cig4MDU1KSxvPXIoNzIzOSkscz1uLmNzcy50b0NvbG9yKCIjZmZmZmZmIiksYT1uLmNzcy50b0NvbG9yKCIjMDAwMDAwIiksYz1uLmNzcy50b0NvbG9yKCIjZmZmZmZmIiksbD1uLmNzcy50b0NvbG9yKCIjMDAwMDAwIiksaD17Y3NzOiJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMykiLHJnYmE6NDI5NDk2NzExN307dC5ERUZBVUxUX0FOU0lfQ09MT1JTPU9iamVjdC5mcmVlemUoZnVuY3Rpb24oKXtmb3IodmFyIGU9W24uY3NzLnRvQ29sb3IoIiMyZTM0MzYiKSxuLmNzcy50b0NvbG9yKCIjY2MwMDAwIiksbi5jc3MudG9Db2xvcigiIzRlOWEwNiIpLG4uY3NzLnRvQ29sb3IoIiNjNGEwMDAiKSxuLmNzcy50b0NvbG9yKCIjMzQ2NWE0Iiksbi5jc3MudG9Db2xvcigiIzc1NTA3YiIpLG4uY3NzLnRvQ29sb3IoIiMwNjk4OWEiKSxuLmNzcy50b0NvbG9yKCIjZDNkN2NmIiksbi5jc3MudG9Db2xvcigiIzU1NTc1MyIpLG4uY3NzLnRvQ29sb3IoIiNlZjI5MjkiKSxuLmNzcy50b0NvbG9yKCIjOGFlMjM0Iiksbi5jc3MudG9Db2xvcigiI2ZjZTk0ZiIpLG4uY3NzLnRvQ29sb3IoIiM3MjlmY2YiKSxuLmNzcy50b0NvbG9yKCIjYWQ3ZmE4Iiksbi5jc3MudG9Db2xvcigiIzM0ZTJlMiIpLG4uY3NzLnRvQ29sb3IoIiNlZWVlZWMiKV0sdD1bMCw5NSwxMzUsMTc1LDIxNSwyNTVdLHI9MDtyPDIxNjtyKyspe3ZhciBpPXRbci8zNiU2fDBdLG89dFtyLzYlNnwwXSxzPXRbciU2XTtlLnB1c2goe2NzczpuLmNoYW5uZWxzLnRvQ3NzKGksbyxzKSxyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKGksbyxzKX0pfWZvcihyPTA7cjwyNDtyKyspe3ZhciBhPTgrMTAqcjtlLnB1c2goe2NzczpuLmNoYW5uZWxzLnRvQ3NzKGEsYSxhKSxyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKGEsYSxhKX0pfXJldHVybiBlfSgpKTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXt0aGlzLmFsbG93VHJhbnNwYXJlbmN5PXI7dmFyIGk9ZS5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtpLndpZHRoPTEsaS5oZWlnaHQ9MTt2YXIgdT1pLmdldENvbnRleHQoIjJkIik7aWYoIXUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZ2V0IHJlbmRlcmluZyBjb250ZXh0Iik7dGhpcy5fY3R4PXUsdGhpcy5fY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iY29weSIsdGhpcy5fbGl0bXVzQ29sb3I9dGhpcy5fY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCwxLDEpLHRoaXMuX2NvbnRyYXN0Q2FjaGU9bmV3IG8uQ29sb3JDb250cmFzdENhY2hlLHRoaXMuY29sb3JzPXtmb3JlZ3JvdW5kOnMsYmFja2dyb3VuZDphLGN1cnNvcjpjLGN1cnNvckFjY2VudDpsLHNlbGVjdGlvblRyYW5zcGFyZW50Omgsc2VsZWN0aW9uT3BhcXVlOm4uY29sb3IuYmxlbmQoYSxoKSxzZWxlY3Rpb25Gb3JlZ3JvdW5kOnZvaWQgMCxhbnNpOnQuREVGQVVMVF9BTlNJX0NPTE9SUy5zbGljZSgpLGNvbnRyYXN0Q2FjaGU6dGhpcy5fY29udHJhc3RDYWNoZX0sdGhpcy5fdXBkYXRlUmVzdG9yZUNvbG9ycygpfXJldHVybiBlLnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2U9ZnVuY3Rpb24oZSl7Im1pbmltdW1Db250cmFzdFJhdGlvIj09PWUmJnRoaXMuX2NvbnRyYXN0Q2FjaGUuY2xlYXIoKX0sZS5wcm90b3R5cGUuc2V0VGhlbWU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9e30pLHRoaXMuY29sb3JzLmZvcmVncm91bmQ9dGhpcy5fcGFyc2VDb2xvcihlLmZvcmVncm91bmQscyksdGhpcy5jb2xvcnMuYmFja2dyb3VuZD10aGlzLl9wYXJzZUNvbG9yKGUuYmFja2dyb3VuZCxhKSx0aGlzLmNvbG9ycy5jdXJzb3I9dGhpcy5fcGFyc2VDb2xvcihlLmN1cnNvcixjLCEwKSx0aGlzLmNvbG9ycy5jdXJzb3JBY2NlbnQ9dGhpcy5fcGFyc2VDb2xvcihlLmN1cnNvckFjY2VudCxsLCEwKSx0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudD10aGlzLl9wYXJzZUNvbG9yKGUuc2VsZWN0aW9uLGgsITApLHRoaXMuY29sb3JzLnNlbGVjdGlvbk9wYXF1ZT1uLmNvbG9yLmJsZW5kKHRoaXMuY29sb3JzLmJhY2tncm91bmQsdGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQpO3ZhciByPXtjc3M6IiIscmdiYTowfTt0aGlzLmNvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kPWUuc2VsZWN0aW9uRm9yZWdyb3VuZD90aGlzLl9wYXJzZUNvbG9yKGUuc2VsZWN0aW9uRm9yZWdyb3VuZCxyKTp2b2lkIDAsdGhpcy5jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZD09PXImJih0aGlzLmNvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kPXZvaWQgMCksbi5jb2xvci5pc09wYXF1ZSh0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudCkmJih0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudD1uLmNvbG9yLm9wYWNpdHkodGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQsLjMpKSx0aGlzLmNvbG9ycy5hbnNpWzBdPXRoaXMuX3BhcnNlQ29sb3IoZS5ibGFjayx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMF0pLHRoaXMuY29sb3JzLmFuc2lbMV09dGhpcy5fcGFyc2VDb2xvcihlLnJlZCx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMV0pLHRoaXMuY29sb3JzLmFuc2lbMl09dGhpcy5fcGFyc2VDb2xvcihlLmdyZWVuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1syXSksdGhpcy5jb2xvcnMuYW5zaVszXT10aGlzLl9wYXJzZUNvbG9yKGUueWVsbG93LHQuREVGQVVMVF9BTlNJX0NPTE9SU1szXSksdGhpcy5jb2xvcnMuYW5zaVs0XT10aGlzLl9wYXJzZUNvbG9yKGUuYmx1ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNF0pLHRoaXMuY29sb3JzLmFuc2lbNV09dGhpcy5fcGFyc2VDb2xvcihlLm1hZ2VudGEsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzVdKSx0aGlzLmNvbG9ycy5hbnNpWzZdPXRoaXMuX3BhcnNlQ29sb3IoZS5jeWFuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s2XSksdGhpcy5jb2xvcnMuYW5zaVs3XT10aGlzLl9wYXJzZUNvbG9yKGUud2hpdGUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzddKSx0aGlzLmNvbG9ycy5hbnNpWzhdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRCbGFjayx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbOF0pLHRoaXMuY29sb3JzLmFuc2lbOV09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodFJlZCx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbOV0pLHRoaXMuY29sb3JzLmFuc2lbMTBdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRHcmVlbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTBdKSx0aGlzLmNvbG9ycy5hbnNpWzExXT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0WWVsbG93LHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxMV0pLHRoaXMuY29sb3JzLmFuc2lbMTJdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRCbHVlLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxMl0pLHRoaXMuY29sb3JzLmFuc2lbMTNdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRNYWdlbnRhLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxM10pLHRoaXMuY29sb3JzLmFuc2lbMTRdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRDeWFuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxNF0pLHRoaXMuY29sb3JzLmFuc2lbMTVdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRXaGl0ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTVdKSx0aGlzLl9jb250cmFzdENhY2hlLmNsZWFyKCksdGhpcy5fdXBkYXRlUmVzdG9yZUNvbG9ycygpfSxlLnByb3RvdHlwZS5yZXN0b3JlQ29sb3I9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSlzd2l0Y2goZSl7Y2FzZSAyNTY6dGhpcy5jb2xvcnMuZm9yZWdyb3VuZD10aGlzLl9yZXN0b3JlQ29sb3JzLmZvcmVncm91bmQ7YnJlYWs7Y2FzZSAyNTc6dGhpcy5jb2xvcnMuYmFja2dyb3VuZD10aGlzLl9yZXN0b3JlQ29sb3JzLmJhY2tncm91bmQ7YnJlYWs7Y2FzZSAyNTg6dGhpcy5jb2xvcnMuY3Vyc29yPXRoaXMuX3Jlc3RvcmVDb2xvcnMuY3Vyc29yO2JyZWFrO2RlZmF1bHQ6dGhpcy5jb2xvcnMuYW5zaVtlXT10aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2lbZV19ZWxzZSBmb3IodmFyIHQ9MDt0PHRoaXMuX3Jlc3RvcmVDb2xvcnMuYW5zaS5sZW5ndGg7Kyt0KXRoaXMuY29sb3JzLmFuc2lbdF09dGhpcy5fcmVzdG9yZUNvbG9ycy5hbnNpW3RdfSxlLnByb3RvdHlwZS5fdXBkYXRlUmVzdG9yZUNvbG9ycz1mdW5jdGlvbigpe3RoaXMuX3Jlc3RvcmVDb2xvcnM9e2ZvcmVncm91bmQ6dGhpcy5jb2xvcnMuZm9yZWdyb3VuZCxiYWNrZ3JvdW5kOnRoaXMuY29sb3JzLmJhY2tncm91bmQsY3Vyc29yOnRoaXMuY29sb3JzLmN1cnNvcixhbnNpOnRoaXMuY29sb3JzLmFuc2kuc2xpY2UoKX19LGUucHJvdG90eXBlLl9wYXJzZUNvbG9yPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT1yJiYocj10aGlzLmFsbG93VHJhbnNwYXJlbmN5KSx2b2lkIDA9PT1lKXJldHVybiB0O2lmKHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fbGl0bXVzQ29sb3IsdGhpcy5fY3R4LmZpbGxTdHlsZT1lLCJzdHJpbmciIT10eXBlb2YgdGhpcy5fY3R4LmZpbGxTdHlsZSlyZXR1cm4gY29uc29sZS53YXJuKCJDb2xvcjogIitlKyIgaXMgaW52YWxpZCB1c2luZyBmYWxsYmFjayAiK3QuY3NzKSx0O3RoaXMuX2N0eC5maWxsUmVjdCgwLDAsMSwxKTt2YXIgbz10aGlzLl9jdHguZ2V0SW1hZ2VEYXRhKDAsMCwxLDEpLmRhdGE7aWYoMjU1IT09b1szXSl7aWYoIXIpcmV0dXJuIGNvbnNvbGUud2FybigiQ29sb3I6ICIrZSsiIGlzIHVzaW5nIHRyYW5zcGFyZW5jeSwgYnV0IGFsbG93VHJhbnNwYXJlbmN5IGlzIGZhbHNlLiBVc2luZyBmYWxsYmFjayAiK3QuY3NzKyIuIiksdDt2YXIgcz1pKHRoaXMuX2N0eC5maWxsU3R5bGUuc3Vic3RyaW5nKDUsdGhpcy5fY3R4LmZpbGxTdHlsZS5sZW5ndGgtMSkuc3BsaXQoIiwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSksNCksYT1zWzBdLGM9c1sxXSxsPXNbMl0saD1zWzNdLHU9TWF0aC5yb3VuZCgyNTUqaCk7cmV0dXJue3JnYmE6bi5jaGFubmVscy50b1JnYmEoYSxjLGwsdSksY3NzOmV9fXJldHVybntjc3M6dGhpcy5fY3R4LmZpbGxTdHlsZSxyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKG9bMF0sb1sxXSxvWzJdLG9bM10pfX0sZX0oKTt0LkNvbG9yTWFuYWdlcj11fSw5NjMxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50PXZvaWQgMCx0LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50PWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsaSxuPVtdLG89MDtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKW5bb109YXJndW1lbnRzW29dO3RyeXtmb3IodmFyIHM9cihuKSxhPXMubmV4dCgpOyFhLmRvbmU7YT1zLm5leHQoKSl7dmFyIGM9YS52YWx1ZTtudWxsPT09KGk9bnVsbD09Yz92b2lkIDA6Yy5wYXJlbnRFbGVtZW50KXx8dm9pZCAwPT09aXx8aS5yZW1vdmVDaGlsZChjKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKHQ9cy5yZXR1cm4pJiZ0LmNhbGwocyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX19LDM2NTY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXI9dm9pZCAwLHQuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCxyLGkpe2UuYWRkRXZlbnRMaXN0ZW5lcih0LHIsaSk7dmFyIG49ITE7cmV0dXJue2Rpc3Bvc2U6ZnVuY3Rpb24oKXtufHwobj0hMCxlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxyLGkpKX19fX0sMzU1MTpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1vdXNlWm9uZT10LkxpbmtpZmllcj12b2lkIDA7dmFyIG89cig4NDYwKSxzPXIoMjU4NSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9sb2dTZXJ2aWNlPXQsdGhpcy5fdW5pY29kZVNlcnZpY2U9cix0aGlzLl9saW5rTWF0Y2hlcnM9W10sdGhpcy5fbmV4dExpbmtNYXRjaGVySWQ9MCx0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lPW5ldyBvLkV2ZW50RW1pdHRlcix0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lPW5ldyBvLkV2ZW50RW1pdHRlcix0aGlzLl9vbkxpbmtUb29sdGlwPW5ldyBvLkV2ZW50RW1pdHRlcix0aGlzLl9yb3dzVG9MaW5raWZ5PXtzdGFydDp2b2lkIDAsZW5kOnZvaWQgMH19cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25TaG93TGlua1VuZGVybGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25IaWRlTGlua1VuZGVybGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25MaW5rVG9vbHRpcCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbmtUb29sdGlwLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmF0dGFjaFRvRG9tPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZWxlbWVudD1lLHRoaXMuX21vdXNlWm9uZU1hbmFnZXI9dH0sZS5wcm90b3R5cGUubGlua2lmeVJvd3M9ZnVuY3Rpb24odCxyKXt2YXIgaT10aGlzO3RoaXMuX21vdXNlWm9uZU1hbmFnZXImJih2b2lkIDA9PT10aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0fHx2b2lkIDA9PT10aGlzLl9yb3dzVG9MaW5raWZ5LmVuZD8odGhpcy5fcm93c1RvTGlua2lmeS5zdGFydD10LHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kPXIpOih0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0PU1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQsdCksdGhpcy5fcm93c1RvTGlua2lmeS5lbmQ9TWF0aC5tYXgodGhpcy5fcm93c1RvTGlua2lmeS5lbmQscikpLHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuY2xlYXJBbGwodCxyKSx0aGlzLl9yb3dzVGltZW91dElkJiZjbGVhclRpbWVvdXQodGhpcy5fcm93c1RpbWVvdXRJZCksdGhpcy5fcm93c1RpbWVvdXRJZD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBpLl9saW5raWZ5Um93cygpfSksZS5fdGltZUJlZm9yZUxhdGVuY3kpKX0sZS5wcm90b3R5cGUuX2xpbmtpZnlSb3dzPWZ1bmN0aW9uKCl7dGhpcy5fcm93c1RpbWVvdXRJZD12b2lkIDA7dmFyIGU9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7aWYodm9pZCAwIT09dGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCYmdm9pZCAwIT09dGhpcy5fcm93c1RvTGlua2lmeS5lbmQpe3ZhciB0PWUueWRpc3ArdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydDtpZighKHQ+PWUubGluZXMubGVuZ3RoKSl7Zm9yKHZhciByPWUueWRpc3ArTWF0aC5taW4odGhpcy5fcm93c1RvTGlua2lmeS5lbmQsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSsxLGk9TWF0aC5jZWlsKDJlMy90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLG49dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuaXRlcmF0b3IoITEsdCxyLGksaSk7bi5oYXNOZXh0KCk7KWZvcih2YXIgbz1uLm5leHQoKSxzPTA7czx0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoO3MrKyl0aGlzLl9kb0xpbmtpZnlSb3coby5yYW5nZS5maXJzdCxvLmNvbnRlbnQsdGhpcy5fbGlua01hdGNoZXJzW3NdKTt0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0PXZvaWQgMCx0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZD12b2lkIDB9fWVsc2UgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiX3Jvd1RvTGlua2lmeSB3YXMgdW5zZXQgYmVmb3JlIF9saW5raWZ5Um93cyB3YXMgY2FsbGVkIil9LGUucHJvdG90eXBlLnJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXImJihyPXt9KSwhdCl0aHJvdyBuZXcgRXJyb3IoImhhbmRsZXIgbXVzdCBiZSBkZWZpbmVkIik7dmFyIGk9e2lkOnRoaXMuX25leHRMaW5rTWF0Y2hlcklkKysscmVnZXg6ZSxoYW5kbGVyOnQsbWF0Y2hJbmRleDpyLm1hdGNoSW5kZXgsdmFsaWRhdGlvbkNhbGxiYWNrOnIudmFsaWRhdGlvbkNhbGxiYWNrLGhvdmVyVG9vbHRpcENhbGxiYWNrOnIudG9vbHRpcENhbGxiYWNrLGhvdmVyTGVhdmVDYWxsYmFjazpyLmxlYXZlQ2FsbGJhY2ssd2lsbExpbmtBY3RpdmF0ZTpyLndpbGxMaW5rQWN0aXZhdGUscHJpb3JpdHk6ci5wcmlvcml0eXx8MH07cmV0dXJuIHRoaXMuX2FkZExpbmtNYXRjaGVyVG9MaXN0KGkpLGkuaWR9LGUucHJvdG90eXBlLl9hZGRMaW5rTWF0Y2hlclRvTGlzdD1mdW5jdGlvbihlKXtpZigwIT09dGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aCl7Zm9yKHZhciB0PXRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGgtMTt0Pj0wO3QtLSlpZihlLnByaW9yaXR5PD10aGlzLl9saW5rTWF0Y2hlcnNbdF0ucHJpb3JpdHkpcmV0dXJuIHZvaWQgdGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSh0KzEsMCxlKTt0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKDAsMCxlKX1lbHNlIHRoaXMuX2xpbmtNYXRjaGVycy5wdXNoKGUpfSxlLnByb3RvdHlwZS5kZXJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDx0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoO3QrKylpZih0aGlzLl9saW5rTWF0Y2hlcnNbdF0uaWQ9PT1lKXJldHVybiB0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKHQsMSksITA7cmV0dXJuITF9LGUucHJvdG90eXBlLl9kb0xpbmtpZnlSb3c9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaSxuPXRoaXMsbz1uZXcgUmVnRXhwKHIucmVnZXguc291cmNlLChyLnJlZ2V4LmZsYWdzfHwiIikrImciKSxzPS0xLGE9ZnVuY3Rpb24oKXt2YXIgYT1pWyJudW1iZXIiIT10eXBlb2Ygci5tYXRjaEluZGV4PzA6ci5tYXRjaEluZGV4XTtpZighYSlyZXR1cm4gYy5fbG9nU2VydmljZS5kZWJ1ZygibWF0Y2ggZm91bmQgd2l0aG91dCBjb3JyZXNwb25kaW5nIG1hdGNoSW5kZXgiLGksciksImJyZWFrIjtpZihzPXQuaW5kZXhPZihhLHMrMSksby5sYXN0SW5kZXg9cythLmxlbmd0aCxzPDApcmV0dXJuImJyZWFrIjt2YXIgbD1jLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXgoZSxzKTtpZihsWzBdPDApcmV0dXJuImJyZWFrIjt2YXIgaD1jLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQobFswXSk7aWYoIWgpcmV0dXJuImJyZWFrIjt2YXIgdT1oLmdldEZnKGxbMV0pLGY9dT91Pj45JjUxMTp2b2lkIDA7ci52YWxpZGF0aW9uQ2FsbGJhY2s/ci52YWxpZGF0aW9uQ2FsbGJhY2soYSwoZnVuY3Rpb24oZSl7bi5fcm93c1RpbWVvdXRJZHx8ZSYmbi5fYWRkTGluayhsWzFdLGxbMF0tbi5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsYSxyLGYpfSkpOmMuX2FkZExpbmsobFsxXSxsWzBdLWMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLGEscixmKX0sYz10aGlzO251bGwhPT0oaT1vLmV4ZWModCkpJiYiYnJlYWsiIT09YSgpOyk7fSxlLnByb3RvdHlwZS5fYWRkTGluaz1mdW5jdGlvbihlLHQscixpLG4pe3ZhciBvPXRoaXM7aWYodGhpcy5fbW91c2Vab25lTWFuYWdlciYmdGhpcy5fZWxlbWVudCl7dmFyIHM9dGhpcy5fdW5pY29kZVNlcnZpY2UuZ2V0U3RyaW5nQ2VsbFdpZHRoKHIpLGE9ZSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsbD10K01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLGg9KGErcykldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHU9bCtNYXRoLmZsb29yKChhK3MpL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7MD09PWgmJihoPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx1LS0pLHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuYWRkKG5ldyBjKGErMSxsKzEsaCsxLHUrMSwoZnVuY3Rpb24oZSl7aWYoaS5oYW5kbGVyKXJldHVybiBpLmhhbmRsZXIoZSxyKTt2YXIgdD13aW5kb3cub3BlbigpO3Q/KHQub3BlbmVyPW51bGwsdC5sb2NhdGlvbi5ocmVmPXIpOmNvbnNvbGUud2FybigiT3BlbmluZyBsaW5rIGJsb2NrZWQgYXMgb3BlbmVyIGNvdWxkIG5vdCBiZSBjbGVhcmVkIil9KSwoZnVuY3Rpb24oKXtvLl9vblNob3dMaW5rVW5kZXJsaW5lLmZpcmUoby5fY3JlYXRlTGlua0hvdmVyRXZlbnQoYSxsLGgsdSxuKSksby5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIpfSksKGZ1bmN0aW9uKGUpe28uX29uTGlua1Rvb2x0aXAuZmlyZShvLl9jcmVhdGVMaW5rSG92ZXJFdmVudChhLGwsaCx1LG4pKSxpLmhvdmVyVG9vbHRpcENhbGxiYWNrJiZpLmhvdmVyVG9vbHRpcENhbGxiYWNrKGUscix7c3RhcnQ6e3g6YSx5Omx9LGVuZDp7eDpoLHk6dX19KX0pLChmdW5jdGlvbigpe28uX29uSGlkZUxpbmtVbmRlcmxpbmUuZmlyZShvLl9jcmVhdGVMaW5rSG92ZXJFdmVudChhLGwsaCx1LG4pKSxvLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInh0ZXJtLWN1cnNvci1wb2ludGVyIiksaS5ob3ZlckxlYXZlQ2FsbGJhY2smJmkuaG92ZXJMZWF2ZUNhbGxiYWNrKCl9KSwoZnVuY3Rpb24oZSl7cmV0dXJuIWkud2lsbExpbmtBY3RpdmF0ZXx8aS53aWxsTGlua0FjdGl2YXRlKGUscil9KSkpfX0sZS5wcm90b3R5cGUuX2NyZWF0ZUxpbmtIb3ZlckV2ZW50PWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJue3gxOmUseTE6dCx4MjpyLHkyOmksY29sczp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZmc6bn19LGUuX3RpbWVCZWZvcmVMYXRlbmN5PTIwMCxlPWkoW24oMCxzLklCdWZmZXJTZXJ2aWNlKSxuKDEscy5JTG9nU2VydmljZSksbigyLHMuSVVuaWNvZGVTZXJ2aWNlKV0sZSl9KCk7dC5MaW5raWZpZXI9YTt2YXIgYz1mdW5jdGlvbihlLHQscixpLG4sbyxzLGEsYyl7dGhpcy54MT1lLHRoaXMueTE9dCx0aGlzLngyPXIsdGhpcy55Mj1pLHRoaXMuY2xpY2tDYWxsYmFjaz1uLHRoaXMuaG92ZXJDYWxsYmFjaz1vLHRoaXMudG9vbHRpcENhbGxiYWNrPXMsdGhpcy5sZWF2ZUNhbGxiYWNrPWEsdGhpcy53aWxsTGlua0FjdGl2YXRlPWN9O3QuTW91c2Vab25lPWN9LDY0NjU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX0sYz10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkxpbmtpZmllcjI9dm9pZCAwO3ZhciBsPXIoMjU4NSksaD1yKDg0NjApLHU9cig4NDQpLGY9cigzNjU2KSxfPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLl9idWZmZXJTZXJ2aWNlPXQsci5fbGlua1Byb3ZpZGVycz1bXSxyLl9saW5rQ2FjaGVEaXNwb3NhYmxlcz1bXSxyLl9pc01vdXNlT3V0PSEwLHIuX2FjdGl2ZUxpbmU9LTEsci5fb25TaG93TGlua1VuZGVybGluZT1yLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksci5fb25IaWRlTGlua1VuZGVybGluZT1yLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksci5yZWdpc3RlcigoMCx1LmdldERpc3Bvc2VBcnJheURpc3Bvc2FibGUpKHIuX2xpbmtDYWNoZURpc3Bvc2FibGVzKSkscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiY3VycmVudExpbmsiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudExpbmt9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNob3dMaW5rVW5kZXJsaW5lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkhpZGVMaW5rVW5kZXJsaW5lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVnaXN0ZXJMaW5rUHJvdmlkZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fbGlua1Byb3ZpZGVycy5wdXNoKGUpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIHI9dC5fbGlua1Byb3ZpZGVycy5pbmRleE9mKGUpOy0xIT09ciYmdC5fbGlua1Byb3ZpZGVycy5zcGxpY2UociwxKX19fSx0LnByb3RvdHlwZS5hdHRhY2hUb0RvbT1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpczt0aGlzLl9lbGVtZW50PWUsdGhpcy5fbW91c2VTZXJ2aWNlPXQsdGhpcy5fcmVuZGVyU2VydmljZT1yLHRoaXMucmVnaXN0ZXIoKDAsZi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX2VsZW1lbnQsIm1vdXNlbGVhdmUiLChmdW5jdGlvbigpe2kuX2lzTW91c2VPdXQ9ITAsaS5fY2xlYXJDdXJyZW50TGluaygpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLGYuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl9lbGVtZW50LCJtb3VzZW1vdmUiLHRoaXMuX29uTW91c2VNb3ZlLmJpbmQodGhpcykpKSx0aGlzLnJlZ2lzdGVyKCgwLGYuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl9lbGVtZW50LCJtb3VzZWRvd24iLHRoaXMuX2hhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpKSksdGhpcy5yZWdpc3RlcigoMCxmLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCwibW91c2V1cCIsdGhpcy5faGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpKSl9LHQucHJvdG90eXBlLl9vbk1vdXNlTW92ZT1mdW5jdGlvbihlKXtpZih0aGlzLl9sYXN0TW91c2VFdmVudD1lLHRoaXMuX2VsZW1lbnQmJnRoaXMuX21vdXNlU2VydmljZSl7dmFyIHQ9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudChlLHRoaXMuX2VsZW1lbnQsdGhpcy5fbW91c2VTZXJ2aWNlKTtpZih0KXt0aGlzLl9pc01vdXNlT3V0PSExO2Zvcih2YXIgcj1lLmNvbXBvc2VkUGF0aCgpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG49cltpXTtpZihuLmNsYXNzTGlzdC5jb250YWlucygieHRlcm0iKSlicmVhaztpZihuLmNsYXNzTGlzdC5jb250YWlucygieHRlcm0taG92ZXIiKSlyZXR1cm59dGhpcy5fbGFzdEJ1ZmZlckNlbGwmJnQueD09PXRoaXMuX2xhc3RCdWZmZXJDZWxsLngmJnQueT09PXRoaXMuX2xhc3RCdWZmZXJDZWxsLnl8fCh0aGlzLl9vbkhvdmVyKHQpLHRoaXMuX2xhc3RCdWZmZXJDZWxsPXQpfX19LHQucHJvdG90eXBlLl9vbkhvdmVyPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUxpbmUhPT1lLnkpcmV0dXJuIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKSx2b2lkIHRoaXMuX2Fza0ZvckxpbmsoZSwhMSk7dGhpcy5fY3VycmVudExpbmsmJnRoaXMuX2xpbmtBdFBvc2l0aW9uKHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssZSl8fCh0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCksdGhpcy5fYXNrRm9yTGluayhlLCEwKSl9LHQucHJvdG90eXBlLl9hc2tGb3JMaW5rPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxuLG8scz10aGlzO3RoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyYmdHx8KG51bGw9PT0obj10aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpfHx2b2lkIDA9PT1ufHxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe251bGw9PWV8fGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5saW5rLmRpc3Bvc2UmJmUubGluay5kaXNwb3NlKCl9KSl9KSksdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPW5ldyBNYXAsdGhpcy5fYWN0aXZlTGluZT1lLnkpO3ZhciBsPSExLGg9ZnVuY3Rpb24ocixpKXt0PyhudWxsPT09KG89dS5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXx8dm9pZCAwPT09bz92b2lkIDA6by5nZXQocikpJiYobD11Ll9jaGVja0xpbmtQcm92aWRlclJlc3VsdChyLGUsbCkpOmkucHJvdmlkZUxpbmtzKGUueSwoZnVuY3Rpb24odCl7dmFyIGksbjtpZighcy5faXNNb3VzZU91dCl7dmFyIG89bnVsbD09dD92b2lkIDA6dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntsaW5rOmV9fSkpO251bGw9PT0oaT1zLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpfHx2b2lkIDA9PT1pfHxpLnNldChyLG8pLGw9cy5fY2hlY2tMaW5rUHJvdmlkZXJSZXN1bHQocixlLGwpLChudWxsPT09KG49cy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zaXplKT09PXMuX2xpbmtQcm92aWRlcnMubGVuZ3RoJiZzLl9yZW1vdmVJbnRlcnNlY3RpbmdMaW5rcyhlLnkscy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKX19KSl9LHU9dGhpczt0cnl7Zm9yKHZhciBmPWEodGhpcy5fbGlua1Byb3ZpZGVycy5lbnRyaWVzKCkpLF89Zi5uZXh0KCk7IV8uZG9uZTtfPWYubmV4dCgpKXt2YXIgZD1jKF8udmFsdWUsMik7aChkWzBdLGRbMV0pfX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtfJiYhXy5kb25lJiYoaT1mLnJldHVybikmJmkuY2FsbChmKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19fSx0LnByb3RvdHlwZS5fcmVtb3ZlSW50ZXJzZWN0aW5nTGlua3M9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9bmV3IFNldCxpPTA7aTx0LnNpemU7aSsrKXt2YXIgbj10LmdldChpKTtpZihuKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKWZvcih2YXIgcz1uW29dLGE9cy5saW5rLnJhbmdlLnN0YXJ0Lnk8ZT8wOnMubGluay5yYW5nZS5zdGFydC54LGM9cy5saW5rLnJhbmdlLmVuZC55PmU/dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOnMubGluay5yYW5nZS5lbmQueCxsPWE7bDw9YztsKyspe2lmKHIuaGFzKGwpKXtuLnNwbGljZShvLS0sMSk7YnJlYWt9ci5hZGQobCl9fX0sdC5wcm90b3R5cGUuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXM7aWYoIXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcylyZXR1cm4gcjtmb3IodmFyIG89dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChlKSxzPSExLGE9MDthPGU7YSsrKXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5oYXMoYSkmJiF0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KGEpfHwocz0hMCk7aWYoIXMmJm8pe3ZhciBjPW8uZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2xpbmtBdFBvc2l0aW9uKGUubGluayx0KX0pKTtjJiYocj0hMCx0aGlzLl9oYW5kbGVOZXdMaW5rKGMpKX1pZih0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuc2l6ZT09PXRoaXMuX2xpbmtQcm92aWRlcnMubGVuZ3RoJiYhcilmb3IoYT0wO2E8dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLnNpemU7YSsrKXt2YXIgbD1udWxsPT09KGk9dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChhKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2xpbmtBdFBvc2l0aW9uKGUubGluayx0KX0pKTtpZihsKXtyPSEwLHRoaXMuX2hhbmRsZU5ld0xpbmsobCk7YnJlYWt9fXJldHVybiByfSx0LnByb3RvdHlwZS5faGFuZGxlTW91c2VEb3duPWZ1bmN0aW9uKCl7dGhpcy5fbW91c2VEb3duTGluaz10aGlzLl9jdXJyZW50TGlua30sdC5wcm90b3R5cGUuX2hhbmRsZU1vdXNlVXA9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZWxlbWVudCYmdGhpcy5fbW91c2VTZXJ2aWNlJiZ0aGlzLl9jdXJyZW50TGluayl7dmFyIHQ9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudChlLHRoaXMuX2VsZW1lbnQsdGhpcy5fbW91c2VTZXJ2aWNlKTt0JiZ0aGlzLl9tb3VzZURvd25MaW5rPT09dGhpcy5fY3VycmVudExpbmsmJnRoaXMuX2xpbmtBdFBvc2l0aW9uKHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssdCkmJnRoaXMuX2N1cnJlbnRMaW5rLmxpbmsuYWN0aXZhdGUoZSx0aGlzLl9jdXJyZW50TGluay5saW5rLnRleHQpfX0sdC5wcm90b3R5cGUuX2NsZWFyQ3VycmVudExpbms9ZnVuY3Rpb24oZSx0KXt0aGlzLl9lbGVtZW50JiZ0aGlzLl9jdXJyZW50TGluayYmdGhpcy5fbGFzdE1vdXNlRXZlbnQmJighZXx8IXR8fHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsucmFuZ2Uuc3RhcnQueT49ZSYmdGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5lbmQueTw9dCkmJih0aGlzLl9saW5rTGVhdmUodGhpcy5fZWxlbWVudCx0aGlzLl9jdXJyZW50TGluay5saW5rLHRoaXMuX2xhc3RNb3VzZUV2ZW50KSx0aGlzLl9jdXJyZW50TGluaz12b2lkIDAsKDAsdS5kaXNwb3NlQXJyYXkpKHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzKSl9LHQucHJvdG90eXBlLl9oYW5kbGVOZXdMaW5rPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5fZWxlbWVudCYmdGhpcy5fbGFzdE1vdXNlRXZlbnQmJnRoaXMuX21vdXNlU2VydmljZSl7dmFyIHI9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudCh0aGlzLl9sYXN0TW91c2VFdmVudCx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7ciYmdGhpcy5fbGlua0F0UG9zaXRpb24oZS5saW5rLHIpJiYodGhpcy5fY3VycmVudExpbms9ZSx0aGlzLl9jdXJyZW50TGluay5zdGF0ZT17ZGVjb3JhdGlvbnM6e3VuZGVybGluZTp2b2lkIDA9PT1lLmxpbmsuZGVjb3JhdGlvbnN8fGUubGluay5kZWNvcmF0aW9ucy51bmRlcmxpbmUscG9pbnRlckN1cnNvcjp2b2lkIDA9PT1lLmxpbmsuZGVjb3JhdGlvbnN8fGUubGluay5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yfSxpc0hvdmVyZWQ6ITB9LHRoaXMuX2xpbmtIb3Zlcih0aGlzLl9lbGVtZW50LGUubGluayx0aGlzLl9sYXN0TW91c2VFdmVudCksZS5saW5rLmRlY29yYXRpb25zPXt9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUubGluay5kZWNvcmF0aW9ucyx7cG9pbnRlckN1cnNvcjp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUscjtyZXR1cm4gbnVsbD09PShyPW51bGw9PT0oZT10Ll9jdXJyZW50TGluayl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RhdGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3J9LHNldDpmdW5jdGlvbihlKXt2YXIgcixpOyhudWxsPT09KHI9dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnN0YXRlKSYmdC5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciE9PWUmJih0Ll9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yPWUsdC5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkJiYobnVsbD09PShpPXQuX2VsZW1lbnQpfHx2b2lkIDA9PT1pfHxpLmNsYXNzTGlzdC50b2dnbGUoInh0ZXJtLWN1cnNvci1wb2ludGVyIixlKSkpfX0sdW5kZXJsaW5lOntnZXQ6ZnVuY3Rpb24oKXt2YXIgZSxyO3JldHVybiBudWxsPT09KHI9bnVsbD09PShlPXQuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zdGF0ZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZGVjb3JhdGlvbnMudW5kZXJsaW5lfSxzZXQ6ZnVuY3Rpb24ocil7dmFyIGksbixvOyhudWxsPT09KGk9dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0YXRlKSYmKG51bGw9PT0obz1udWxsPT09KG49dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnN0YXRlKXx8dm9pZCAwPT09bz92b2lkIDA6by5kZWNvcmF0aW9ucy51bmRlcmxpbmUpIT09ciYmKHQuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZT1yLHQuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZCYmdC5fZmlyZVVuZGVybGluZUV2ZW50KGUubGluayxyKSl9fX0pLHRoaXMuX3JlbmRlclNlcnZpY2UmJnRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzLnB1c2godGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGZ1bmN0aW9uKGUpe3ZhciByPTA9PT1lLnN0YXJ0PzA6ZS5zdGFydCsxK3QuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO3QuX2NsZWFyQ3VycmVudExpbmsocixlLmVuZCsxK3QuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKX0pKSkpfX0sdC5wcm90b3R5cGUuX2xpbmtIb3Zlcj1mdW5jdGlvbihlLHQscil7dmFyIGk7KG51bGw9PT0oaT10aGlzLl9jdXJyZW50TGluayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3RhdGUpJiYodGhpcy5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkPSEwLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSYmdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KHQsITApLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3ImJmUuY2xhc3NMaXN0LmFkZCgieHRlcm0tY3Vyc29yLXBvaW50ZXIiKSksdC5ob3ZlciYmdC5ob3ZlcihyLHQudGV4dCl9LHQucHJvdG90eXBlLl9maXJlVW5kZXJsaW5lRXZlbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnJhbmdlLGk9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbj10aGlzLl9jcmVhdGVMaW5rVW5kZXJsaW5lRXZlbnQoci5zdGFydC54LTEsci5zdGFydC55LWktMSxyLmVuZC54LHIuZW5kLnktaS0xLHZvaWQgMCk7KHQ/dGhpcy5fb25TaG93TGlua1VuZGVybGluZTp0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lKS5maXJlKG4pfSx0LnByb3RvdHlwZS5fbGlua0xlYXZlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaTsobnVsbD09PShpPXRoaXMuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zdGF0ZSkmJih0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQ9ITEsdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMudW5kZXJsaW5lJiZ0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQodCwhMSksdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciYmZS5jbGFzc0xpc3QucmVtb3ZlKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIpKSx0LmxlYXZlJiZ0LmxlYXZlKHIsdC50ZXh0KX0sdC5wcm90b3R5cGUuX2xpbmtBdFBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5yYW5nZS5zdGFydC55PT09ZS5yYW5nZS5lbmQueSxpPWUucmFuZ2Uuc3RhcnQueTx0Lnksbj1lLnJhbmdlLmVuZC55PnQueTtyZXR1cm4ociYmZS5yYW5nZS5zdGFydC54PD10LngmJmUucmFuZ2UuZW5kLng+PXQueHx8aSYmZS5yYW5nZS5lbmQueD49dC54fHxuJiZlLnJhbmdlLnN0YXJ0Lng8PXQueHx8aSYmbikmJmUucmFuZ2Uuc3RhcnQueTw9dC55JiZlLnJhbmdlLmVuZC55Pj10Lnl9LHQucHJvdG90eXBlLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1yLmdldENvb3JkcyhlLHQsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7aWYoaSlyZXR1cm57eDppWzBdLHk6aVsxXSt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcH19LHQucHJvdG90eXBlLl9jcmVhdGVMaW5rVW5kZXJsaW5lRXZlbnQ9ZnVuY3Rpb24oZSx0LHIsaSxuKXtyZXR1cm57eDE6ZSx5MTp0LHgyOnIseTI6aSxjb2xzOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxmZzpufX0sbyhbcygwLGwuSUJ1ZmZlclNlcnZpY2UpXSx0KX0odS5EaXNwb3NhYmxlKTt0LkxpbmtpZmllcjI9X30sOTA0MjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnRvb011Y2hPdXRwdXQ9dC5wcm9tcHRMYWJlbD12b2lkIDAsdC5wcm9tcHRMYWJlbD0iVGVybWluYWwgaW5wdXQiLHQudG9vTXVjaE91dHB1dD0iVG9vIG11Y2ggb3V0cHV0IHRvIGFubm91bmNlLCBuYXZpZ2F0ZSB0byByb3dzIG1hbnVhbGx5IHRvIHJlYWQifSw2OTU0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1vdXNlWm9uZU1hbmFnZXI9dm9pZCAwO3ZhciBhPXIoODQ0KSxjPXIoMzY1NiksbD1yKDQ3MjUpLGg9cigyNTg1KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMpe3ZhciBhPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gYS5fZWxlbWVudD10LGEuX3NjcmVlbkVsZW1lbnQ9cixhLl9idWZmZXJTZXJ2aWNlPWksYS5fbW91c2VTZXJ2aWNlPW4sYS5fc2VsZWN0aW9uU2VydmljZT1vLGEuX29wdGlvbnNTZXJ2aWNlPXMsYS5fem9uZXM9W10sYS5fYXJlWm9uZXNBY3RpdmU9ITEsYS5fbGFzdEhvdmVyQ29vcmRzPVt2b2lkIDAsdm9pZCAwXSxhLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoPTAsYS5yZWdpc3RlcigoMCxjLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikoYS5fZWxlbWVudCwibW91c2Vkb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGEuX29uTW91c2VEb3duKGUpfSkpKSxhLl9tb3VzZU1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gYS5fb25Nb3VzZU1vdmUoZSl9LGEuX21vdXNlTGVhdmVMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gYS5fb25Nb3VzZUxlYXZlKGUpfSxhLl9jbGlja0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBhLl9vbkNsaWNrKGUpfSxhfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kZWFjdGl2YXRlKCl9LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLl96b25lcy5wdXNoKGUpLDE9PT10aGlzLl96b25lcy5sZW5ndGgmJnRoaXMuX2FjdGl2YXRlKCl9LHQucHJvdG90eXBlLmNsZWFyQWxsPWZ1bmN0aW9uKGUsdCl7aWYoMCE9PXRoaXMuX3pvbmVzLmxlbmd0aCl7ZSYmdHx8KGU9MCx0PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKTtmb3IodmFyIHI9MDtyPHRoaXMuX3pvbmVzLmxlbmd0aDtyKyspe3ZhciBpPXRoaXMuX3pvbmVzW3JdOyhpLnkxPmUmJmkueTE8PXQrMXx8aS55Mj5lJiZpLnkyPD10KzF8fGkueTE8ZSYmaS55Mj50KzEpJiYodGhpcy5fY3VycmVudFpvbmUmJnRoaXMuX2N1cnJlbnRab25lPT09aSYmKHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKSx0aGlzLl9jdXJyZW50Wm9uZT12b2lkIDApLHRoaXMuX3pvbmVzLnNwbGljZShyLS0sMSkpfTA9PT10aGlzLl96b25lcy5sZW5ndGgmJnRoaXMuX2RlYWN0aXZhdGUoKX19LHQucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2FyZVpvbmVzQWN0aXZlfHwodGhpcy5fYXJlWm9uZXNBY3RpdmU9ITAsdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lciksdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fY2xpY2tMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2FyZVpvbmVzQWN0aXZlJiYodGhpcy5fYXJlWm9uZXNBY3RpdmU9ITEsdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lciksdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fY2xpY2tMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24oZSl7dGhpcy5fbGFzdEhvdmVyQ29vcmRzWzBdPT09ZS5wYWdlWCYmdGhpcy5fbGFzdEhvdmVyQ29vcmRzWzFdPT09ZS5wYWdlWXx8KHRoaXMuX29uSG92ZXIoZSksdGhpcy5fbGFzdEhvdmVyQ29vcmRzPVtlLnBhZ2VYLGUucGFnZVldKX0sdC5wcm90b3R5cGUuX29uSG92ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtyIT09dGhpcy5fY3VycmVudFpvbmUmJih0aGlzLl9jdXJyZW50Wm9uZSYmKHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKSx0aGlzLl9jdXJyZW50Wm9uZT12b2lkIDAsdGhpcy5fdG9vbHRpcFRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCkpLHImJih0aGlzLl9jdXJyZW50Wm9uZT1yLHIuaG92ZXJDYWxsYmFjayYmci5ob3ZlckNhbGxiYWNrKGUpLHRoaXMuX3Rvb2x0aXBUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0Ll9vblRvb2x0aXAoZSl9KSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmtUb29sdGlwSG92ZXJEdXJhdGlvbikpKX0sdC5wcm90b3R5cGUuX29uVG9vbHRpcD1mdW5jdGlvbihlKXt0aGlzLl90b29sdGlwVGltZW91dD12b2lkIDA7dmFyIHQ9dGhpcy5fZmluZFpvbmVFdmVudEF0KGUpO251bGw9PXR8fHQudG9vbHRpcENhbGxiYWNrKGUpfSx0LnByb3RvdHlwZS5fb25Nb3VzZURvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aD10aGlzLl9nZXRTZWxlY3Rpb25MZW5ndGgoKSx0aGlzLl9hcmVab25lc0FjdGl2ZSl7dmFyIHQ9dGhpcy5fZmluZFpvbmVFdmVudEF0KGUpOyhudWxsPT10P3ZvaWQgMDp0LndpbGxMaW5rQWN0aXZhdGUoZSkpJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0sdC5wcm90b3R5cGUuX29uTW91c2VMZWF2ZT1mdW5jdGlvbihlKXt0aGlzLl9jdXJyZW50Wm9uZSYmKHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKSx0aGlzLl9jdXJyZW50Wm9uZT12b2lkIDAsdGhpcy5fdG9vbHRpcFRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCkpfSx0LnByb3RvdHlwZS5fb25DbGljaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9maW5kWm9uZUV2ZW50QXQoZSkscj10aGlzLl9nZXRTZWxlY3Rpb25MZW5ndGgoKTt0JiZyPT09dGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aCYmKHQuY2xpY2tDYWxsYmFjayhlKSxlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9LHQucHJvdG90eXBlLl9nZXRTZWxlY3Rpb25MZW5ndGg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ7cmV0dXJuIGU/ZS5sZW5ndGg6MH0sdC5wcm90b3R5cGUuX2ZpbmRab25lRXZlbnRBdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGUsdGhpcy5fc2NyZWVuRWxlbWVudCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtpZih0KWZvcih2YXIgcj10WzBdLGk9dFsxXSxuPTA7bjx0aGlzLl96b25lcy5sZW5ndGg7bisrKXt2YXIgbz10aGlzLl96b25lc1tuXTtpZihvLnkxPT09by55Mil7aWYoaT09PW8ueTEmJnI+PW8ueDEmJnI8by54MilyZXR1cm4gb31lbHNlIGlmKGk9PT1vLnkxJiZyPj1vLngxfHxpPT09by55MiYmcjxvLngyfHxpPm8ueTEmJmk8by55MilyZXR1cm4gb319LG8oW3MoMixoLklCdWZmZXJTZXJ2aWNlKSxzKDMsbC5JTW91c2VTZXJ2aWNlKSxzKDQsbC5JU2VsZWN0aW9uU2VydmljZSkscyg1LGguSU9wdGlvbnNTZXJ2aWNlKV0sdCl9KGEuRGlzcG9zYWJsZSk7dC5Nb3VzZVpvbmVNYW5hZ2VyPXV9LDYxOTM6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUmVuZGVyRGVib3VuY2VyPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fcmVuZGVyQ2FsbGJhY2s9ZSx0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzPVtdfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpLHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMCl9LGUucHJvdG90eXBlLmFkZFJlZnJlc2hDYWxsYmFjaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzLnB1c2goZSksdGhpcy5fYW5pbWF0aW9uRnJhbWV8fCh0aGlzLl9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiB0Ll9pbm5lclJlZnJlc2goKX0pKSksdGhpcy5fYW5pbWF0aW9uRnJhbWV9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXM7dGhpcy5fcm93Q291bnQ9cixlPXZvaWQgMCE9PWU/ZTowLHQ9dm9pZCAwIT09dD90OnRoaXMuX3Jvd0NvdW50LTEsdGhpcy5fcm93U3RhcnQ9dm9pZCAwIT09dGhpcy5fcm93U3RhcnQ/TWF0aC5taW4odGhpcy5fcm93U3RhcnQsZSk6ZSx0aGlzLl9yb3dFbmQ9dm9pZCAwIT09dGhpcy5fcm93RW5kP01hdGgubWF4KHRoaXMuX3Jvd0VuZCx0KTp0LHRoaXMuX2FuaW1hdGlvbkZyYW1lfHwodGhpcy5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtyZXR1cm4gaS5faW5uZXJSZWZyZXNoKCl9KSkpfSxlLnByb3RvdHlwZS5faW5uZXJSZWZyZXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwLHZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0JiZ2b2lkIDAhPT10aGlzLl9yb3dFbmQmJnZvaWQgMCE9PXRoaXMuX3Jvd0NvdW50KXt2YXIgZT1NYXRoLm1heCh0aGlzLl9yb3dTdGFydCwwKSx0PU1hdGgubWluKHRoaXMuX3Jvd0VuZCx0aGlzLl9yb3dDb3VudC0xKTt0aGlzLl9yb3dTdGFydD12b2lkIDAsdGhpcy5fcm93RW5kPXZvaWQgMCx0aGlzLl9yZW5kZXJDYWxsYmFjayhlLHQpLHRoaXMuX3J1blJlZnJlc2hDYWxsYmFja3MoKX1lbHNlIHRoaXMuX3J1blJlZnJlc2hDYWxsYmFja3MoKX0sZS5wcm90b3R5cGUuX3J1blJlZnJlc2hDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIGk9cih0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSkoMCxuLnZhbHVlKSgwKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fcmVmcmVzaENhbGxiYWNrcz1bXX0sZX0oKTt0LlJlbmRlckRlYm91bmNlcj1pfSw1NTk2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNjcmVlbkRwck1vbml0b3I9dm9pZCAwO3ZhciBvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHR9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5zZXRMaXN0ZW5lcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2xpc3RlbmVyJiZ0aGlzLmNsZWFyTGlzdGVuZXIoKSx0aGlzLl9saXN0ZW5lcj1lLHRoaXMuX291dGVyTGlzdGVuZXI9ZnVuY3Rpb24oKXt0Ll9saXN0ZW5lciYmKHQuX2xpc3RlbmVyKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHQuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvKSx0Ll91cGRhdGVEcHIoKSl9LHRoaXMuX3VwZGF0ZURwcigpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuY2xlYXJMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5fdXBkYXRlRHByPWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5fb3V0ZXJMaXN0ZW5lciYmKG51bGw9PT0oZT10aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QpfHx2b2lkIDA9PT1lfHxlLnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpLHRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdD13aW5kb3cubWF0Y2hNZWRpYSgic2NyZWVuIGFuZCAocmVzb2x1dGlvbjogIit3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbysiZHBweCkiKSx0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QuYWRkTGlzdGVuZXIodGhpcy5fb3V0ZXJMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5jbGVhckxpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0JiZ0aGlzLl9saXN0ZW5lciYmdGhpcy5fb3V0ZXJMaXN0ZW5lciYmKHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKSx0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3Q9dm9pZCAwLHRoaXMuX2xpc3RlbmVyPXZvaWQgMCx0aGlzLl9vdXRlckxpc3RlbmVyPXZvaWQgMCl9LHR9KHIoODQ0KS5EaXNwb3NhYmxlKTt0LlNjcmVlbkRwck1vbml0b3I9b30sMzIzNjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfSxzPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30sYT10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCxyKXtpZihyfHwyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGksbj0wLG89dC5sZW5ndGg7bjxvO24rKykhaSYmbiBpbiB0fHwoaXx8KGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLG4pKSxpW25dPXRbbl0pO3JldHVybiBlLmNvbmNhdChpfHxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlRlcm1pbmFsPXZvaWQgMDt2YXIgYz1yKDI5NTApLGw9cigxNjgwKSxoPXIoMzYxNCksdT1yKDI1ODQpLGY9cig1NDM1KSxfPXIoMzUyNSksZD1yKDM1NTEpLHA9cig5MzEyKSx2PXIoNjExNCkseT1yKDM2NTYpLGc9cig5MDQyKSxtPXIoMzU3KSxiPXIoNjk1NCksUz1yKDQ1NjcpLEM9cigxMjk2KSx3PXIoNzM5OSksTD1yKDg0NjApLEU9cig4NDM3KSx4PXIoNTY4MCksUj1yKDMyMzApLGs9cig0NzI1KSxNPXIoNDI4KSxBPXIoODkzNCksTz1yKDY0NjUpLEQ9cig1MTE0KSxUPXIoODk2OSksQj1yKDgwNTUpLFA9cig0MjY5KSxJPXIoNTk0MSksSD1yKDMxMDcpLGo9cig1NzQ0KSxGPXIoOTA3NCksVz1yKDI1ODUpLFU9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93LmRvY3VtZW50Om51bGwscT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgcj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gci5icm93c2VyPXYsci5fa2V5RG93bkhhbmRsZWQ9ITEsci5fa2V5RG93blNlZW49ITEsci5fa2V5UHJlc3NIYW5kbGVkPSExLHIuX3VucHJvY2Vzc2VkRGVhZEtleT0hMSxyLl9vbkN1cnNvck1vdmU9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uS2V5PW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vblJlbmRlcj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25TZWxlY3Rpb25DaGFuZ2U9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uVGl0bGVDaGFuZ2U9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uQmVsbD1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25Gb2N1cz1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25CbHVyPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbkExMXlDaGFyRW1pdHRlcj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25BMTF5VGFiRW1pdHRlcj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fc2V0dXAoKSxyLmxpbmtpZmllcj1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShkLkxpbmtpZmllciksci5saW5raWZpZXIyPXIucmVnaXN0ZXIoci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTy5MaW5raWZpZXIyKSksci5fZGVjb3JhdGlvblNlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoRi5EZWNvcmF0aW9uU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShXLklEZWNvcmF0aW9uU2VydmljZSxyLl9kZWNvcmF0aW9uU2VydmljZSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0QmVsbCgoZnVuY3Rpb24oKXtyZXR1cm4gci5iZWxsKCl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlZnJlc2hSb3dzKChmdW5jdGlvbihlLHQpe3JldHVybiByLnJlZnJlc2goZSx0KX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0U2VuZEZvY3VzKChmdW5jdGlvbigpe3JldHVybiByLl9yZXBvcnRGb2N1cygpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RSZXNldCgoZnVuY3Rpb24oKXtyZXR1cm4gci5yZXNldCgpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydCgoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX3JlcG9ydFdpbmRvd3NPcHRpb25zKGUpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vbkNvbG9yKChmdW5jdGlvbihlKXtyZXR1cm4gci5faGFuZGxlQ29sb3JFdmVudChlKX0pKSksci5yZWdpc3RlcigoMCxMLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uQ3Vyc29yTW92ZSxyLl9vbkN1cnNvck1vdmUpKSxyLnJlZ2lzdGVyKCgwLEwuZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25UaXRsZUNoYW5nZSxyLl9vblRpdGxlQ2hhbmdlKSksci5yZWdpc3RlcigoMCxMLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uQTExeUNoYXIsci5fb25BMTF5Q2hhckVtaXR0ZXIpKSxyLnJlZ2lzdGVyKCgwLEwuZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25BMTF5VGFiLHIuX29uQTExeVRhYkVtaXR0ZXIpKSxyLnJlZ2lzdGVyKHIuX2J1ZmZlclNlcnZpY2Uub25SZXNpemUoKGZ1bmN0aW9uKGUpe3JldHVybiByLl9hZnRlclJlc2l6ZShlLmNvbHMsZS5yb3dzKX0pKSkscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25DdXJzb3JNb3ZlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uS2V5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uS2V5LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZW5kZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZW5kZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNlbGVjdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uVGl0bGVDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25UaXRsZUNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQmVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJlbGwuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkZvY3VzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRm9jdXMuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkJsdXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CbHVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25BMTF5Q2hhciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlDaGFyRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeVRhYiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlUYWJFbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9oYW5kbGVDb2xvckV2ZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxuO2lmKHRoaXMuX2NvbG9yTWFuYWdlcil7dHJ5e2Zvcih2YXIgYz1vKGUpLGw9Yy5uZXh0KCk7IWwuZG9uZTtsPWMubmV4dCgpKXt2YXIgaD1sLnZhbHVlLGY9dm9pZCAwLF89IiI7c3dpdGNoKGguaW5kZXgpe2Nhc2UgMjU2OmY9ImZvcmVncm91bmQiLF89IjEwIjticmVhaztjYXNlIDI1NzpmPSJiYWNrZ3JvdW5kIixfPSIxMSI7YnJlYWs7Y2FzZSAyNTg6Zj0iY3Vyc29yIixfPSIxMiI7YnJlYWs7ZGVmYXVsdDpmPSJhbnNpIixfPSI0OyIraC5pbmRleH1pZihmKXN3aXRjaChoLnR5cGUpe2Nhc2UgMDp2YXIgZD1CLmNvbG9yLnRvQ29sb3JSR0IoImFuc2kiPT09Zj90aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLmFuc2lbaC5pbmRleF06dGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9yc1tmXSk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJdIitfKyI7IisoMCxJLnRvUmdiU3RyaW5nKShkKSt1LkMxX0VTQ0FQRUQuU1QpO2JyZWFrO2Nhc2UgMToiYW5zaSI9PT1mP3RoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMuYW5zaVtoLmluZGV4XT1CLnJnYmEudG9Db2xvci5hcHBseShCLnJnYmEsYShbXSxzKGguY29sb3IpLCExKSk6dGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9yc1tmXT1CLnJnYmEudG9Db2xvci5hcHBseShCLnJnYmEsYShbXSxzKGguY29sb3IpLCExKSk7YnJlYWs7Y2FzZSAyOnRoaXMuX2NvbG9yTWFuYWdlci5yZXN0b3JlQ29sb3IoaC5pbmRleCl9fX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtsJiYhbC5kb25lJiYocj1jLnJldHVybikmJnIuY2FsbChjKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19bnVsbD09PShpPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1pfHxpLnNldENvbG9ycyh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKSxudWxsPT09KG49dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PW58fG4ub25UaGVtZUNoYW5nZSh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKX19LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdCxyLGk7dGhpcy5faXNEaXNwb3NlZHx8KGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSxudWxsPT09KHQ9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PXR8fHQuZGlzcG9zZSgpLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcj12b2lkIDAsdGhpcy53cml0ZT1mdW5jdGlvbigpe30sbnVsbD09PShpPW51bGw9PT0ocj10aGlzLmVsZW1lbnQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnBhcmVudE5vZGUpfHx2b2lkIDA9PT1pfHxpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCkpfSx0LnByb3RvdHlwZS5fc2V0dXA9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5fc2V0dXAuY2FsbCh0aGlzKSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9dm9pZCAwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ1ZmZlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dGhpcy50ZXh0YXJlYSYmdGhpcy50ZXh0YXJlYS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pfSx0LnByb3RvdHlwZS5fdXBkYXRlT3B0aW9ucz1mdW5jdGlvbih0KXt2YXIgcixpLG4sbztzd2l0Y2goZS5wcm90b3R5cGUuX3VwZGF0ZU9wdGlvbnMuY2FsbCh0aGlzLHQpLHQpe2Nhc2UiZm9udEZhbWlseSI6Y2FzZSJmb250U2l6ZSI6bnVsbD09PShyPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1yfHxyLmNsZWFyKCksbnVsbD09PShpPXRoaXMuX2NoYXJTaXplU2VydmljZSl8fHZvaWQgMD09PWl8fGkubWVhc3VyZSgpO2JyZWFrO2Nhc2UiY3Vyc29yQmxpbmsiOmNhc2UiY3Vyc29yU3R5bGUiOnRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LHRoaXMuYnVmZmVyLnkpO2JyZWFrO2Nhc2UiY3VzdG9tR2x5cGhzIjpjYXNlImRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzIjpjYXNlImxldHRlclNwYWNpbmciOmNhc2UibGluZUhlaWdodCI6Y2FzZSJmb250V2VpZ2h0IjpjYXNlImZvbnRXZWlnaHRCb2xkIjpjYXNlIm1pbmltdW1Db250cmFzdFJhdGlvIjp0aGlzLl9yZW5kZXJTZXJ2aWNlJiYodGhpcy5fcmVuZGVyU2VydmljZS5jbGVhcigpLHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLHRoaXMucm93cyksdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpKTticmVhaztjYXNlInJlbmRlcmVyVHlwZSI6dGhpcy5fcmVuZGVyU2VydmljZSYmKHRoaXMuX3JlbmRlclNlcnZpY2Uuc2V0UmVuZGVyZXIodGhpcy5fY3JlYXRlUmVuZGVyZXIoKSksdGhpcy5fcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0aGlzLmNvbHMsdGhpcy5yb3dzKSk7YnJlYWs7Y2FzZSJzY3JvbGxiYWNrIjpudWxsPT09KG49dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PW58fG4uc3luY1Njcm9sbEFyZWEoKTticmVhaztjYXNlInNjcmVlblJlYWRlck1vZGUiOnRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlPyF0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciYmdGhpcy5fcmVuZGVyU2VydmljZSYmKHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyPW5ldyBTLkFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMsdGhpcy5fcmVuZGVyU2VydmljZSkpOihudWxsPT09KG89dGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIpfHx2b2lkIDA9PT1vfHxvLmRpc3Bvc2UoKSx0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcj12b2lkIDApO2JyZWFrO2Nhc2UidGFiU3RvcFdpZHRoIjp0aGlzLmJ1ZmZlcnMuc2V0dXBUYWJTdG9wcygpO2JyZWFrO2Nhc2UidGhlbWUiOnRoaXMuX3NldFRoZW1lKHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50aGVtZSl9fSx0LnByb3RvdHlwZS5fb25UZXh0QXJlYUZvY3VzPWZ1bmN0aW9uKGUpe3RoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyYmdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbSSIpLHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZSksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImZvY3VzIiksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuX29uRm9jdXMuZmlyZSgpfSx0LnByb3RvdHlwZS5ibHVyPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLnRleHRhcmVhKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5ibHVyKCl9LHQucHJvdG90eXBlLl9vblRleHRBcmVhQmx1cj1mdW5jdGlvbigpe3RoaXMudGV4dGFyZWEudmFsdWU9IiIsdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksdGhpcy5idWZmZXIueSksdGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzJiZ0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIltPIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImZvY3VzIiksdGhpcy5fb25CbHVyLmZpcmUoKX0sdC5wcm90b3R5cGUuX3N5bmNUZXh0QXJlYT1mdW5jdGlvbigpe2lmKHRoaXMudGV4dGFyZWEmJnRoaXMuYnVmZmVyLmlzQ3Vyc29ySW5WaWV3cG9ydCYmIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmlzQ29tcG9zaW5nJiZ0aGlzLl9yZW5kZXJTZXJ2aWNlKXt2YXIgZT10aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55LHQ9dGhpcy5idWZmZXIubGluZXMuZ2V0KGUpO2lmKHQpe3ZhciByPU1hdGgubWluKHRoaXMuYnVmZmVyLngsdGhpcy5jb2xzLTEpLGk9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbj10LmdldFdpZHRoKHIpLG89dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCpuLHM9dGhpcy5idWZmZXIueSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxhPXIqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aDt0aGlzLnRleHRhcmVhLnN0eWxlLmxlZnQ9YSsicHgiLHRoaXMudGV4dGFyZWEuc3R5bGUudG9wPXMrInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLndpZHRoPW8rInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLmhlaWdodD1pKyJweCIsdGhpcy50ZXh0YXJlYS5zdHlsZS5saW5lSGVpZ2h0PWkrInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLnpJbmRleD0iLTUifX19LHQucHJvdG90eXBlLl9pbml0R2xvYmFsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9iaW5kS2V5cygpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwiY29weSIsKGZ1bmN0aW9uKHQpe2UuaGFzU2VsZWN0aW9uKCkmJigwLGguY29weUhhbmRsZXIpKHQsZS5fc2VsZWN0aW9uU2VydmljZSl9KSkpO3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybigwLGguaGFuZGxlUGFzdGVFdmVudCkodCxlLnRleHRhcmVhLGUuY29yZVNlcnZpY2UpfTt0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJwYXN0ZSIsdCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwicGFzdGUiLHQpKSx2LmlzRmlyZWZveD90aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIm1vdXNlZG93biIsKGZ1bmN0aW9uKHQpezI9PT10LmJ1dHRvbiYmKDAsaC5yaWdodENsaWNrSGFuZGxlcikodCxlLnRleHRhcmVhLGUuc2NyZWVuRWxlbWVudCxlLl9zZWxlY3Rpb25TZXJ2aWNlLGUub3B0aW9ucy5yaWdodENsaWNrU2VsZWN0c1dvcmQpfSkpKTp0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsImNvbnRleHRtZW51IiwoZnVuY3Rpb24odCl7KDAsaC5yaWdodENsaWNrSGFuZGxlcikodCxlLnRleHRhcmVhLGUuc2NyZWVuRWxlbWVudCxlLl9zZWxlY3Rpb25TZXJ2aWNlLGUub3B0aW9ucy5yaWdodENsaWNrU2VsZWN0c1dvcmQpfSkpKSx2LmlzTGludXgmJnRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwiYXV4Y2xpY2siLChmdW5jdGlvbih0KXsxPT09dC5idXR0b24mJigwLGgubW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvcikodCxlLnRleHRhcmVhLGUuc2NyZWVuRWxlbWVudCl9KSkpfSx0LnByb3RvdHlwZS5fYmluZEtleXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImtleXVwIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleVVwKHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJrZXlkb3duIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleURvd24odCl9KSwhMCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImtleXByZXNzIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleVByZXNzKHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJjb21wb3NpdGlvbnN0YXJ0IiwoZnVuY3Rpb24oKXtyZXR1cm4gZS5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25zdGFydCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJjb21wb3NpdGlvbnVwZGF0ZSIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbnVwZGF0ZSh0KX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiY29tcG9zaXRpb25lbmQiLChmdW5jdGlvbigpe3JldHVybiBlLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbmVuZCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJpbnB1dCIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9pbnB1dEV2ZW50KHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NvbXBvc2l0aW9uSGVscGVyLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVuZGVyKChmdW5jdGlvbih0KXtyZXR1cm4gZS5fcXVldWVMaW5raWZpY2F0aW9uKHQuc3RhcnQsdC5lbmQpfSkpKX0sdC5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlKXRocm93IG5ldyBFcnJvcigiVGVybWluYWwgcmVxdWlyZXMgYSBwYXJlbnQgZWxlbWVudC4iKTtlLmlzQ29ubmVjdGVkfHx0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJUZXJtaW5hbC5vcGVuIHdhcyBjYWxsZWQgb24gYW4gZWxlbWVudCB0aGF0IHdhcyBub3QgYXR0YWNoZWQgdG8gdGhlIERPTSIpLHRoaXMuX2RvY3VtZW50PWUub3duZXJEb2N1bWVudCx0aGlzLmVsZW1lbnQ9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5lbGVtZW50LmRpcj0ibHRyIix0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGVybWluYWwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgieHRlcm0iKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIjAiKSxlLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7dmFyIHI9VS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dGhpcy5fdmlld3BvcnRFbGVtZW50PVUuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5fdmlld3BvcnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtLXZpZXdwb3J0Iiksci5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydEVsZW1lbnQpLHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYT1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYS5jbGFzc0xpc3QuYWRkKCJ4dGVybS1zY3JvbGwtYXJlYSIpLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEpLHRoaXMuc2NyZWVuRWxlbWVudD1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuc2NyZWVuRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1zY3JlZW4iKSx0aGlzLl9oZWxwZXJDb250YWluZXI9VS5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLl9oZWxwZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0taGVscGVycyIpLHRoaXMuc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9oZWxwZXJDb250YWluZXIpLHIuYXBwZW5kQ2hpbGQodGhpcy5zY3JlZW5FbGVtZW50KSx0aGlzLnRleHRhcmVhPVUuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKSx0aGlzLnRleHRhcmVhLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWhlbHBlci10ZXh0YXJlYSIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixnLnByb21wdExhYmVsKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgiYXJpYS1tdWx0aWxpbmUiLCJmYWxzZSIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhdXRvY29ycmVjdCIsIm9mZiIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhdXRvY2FwaXRhbGl6ZSIsIm9mZiIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJzcGVsbGNoZWNrIiwiZmFsc2UiKSx0aGlzLnRleHRhcmVhLnRhYkluZGV4PTAsdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiZm9jdXMiLChmdW5jdGlvbihlKXtyZXR1cm4gdC5fb25UZXh0QXJlYUZvY3VzKGUpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJibHVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25UZXh0QXJlYUJsdXIoKX0pKSksdGhpcy5faGVscGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudGV4dGFyZWEpO3ZhciBpPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEQuQ29yZUJyb3dzZXJTZXJ2aWNlLHRoaXMudGV4dGFyZWEpO3RoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JQ29yZUJyb3dzZXJTZXJ2aWNlLGkpLHRoaXMuX2NoYXJTaXplU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShNLkNoYXJTaXplU2VydmljZSx0aGlzLl9kb2N1bWVudCx0aGlzLl9oZWxwZXJDb250YWluZXIpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JQ2hhclNpemVTZXJ2aWNlLHRoaXMuX2NoYXJTaXplU2VydmljZSksdGhpcy5fdGhlbWU9dGhpcy5vcHRpb25zLnRoZW1lfHx0aGlzLl90aGVtZSx0aGlzLl9jb2xvck1hbmFnZXI9bmV3IHguQ29sb3JNYW5hZ2VyKFUsdGhpcy5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KSx0aGlzLnJlZ2lzdGVyKHRoaXMub3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jb2xvck1hbmFnZXIub25PcHRpb25zQ2hhbmdlKGUpfSkpKSx0aGlzLl9jb2xvck1hbmFnZXIuc2V0VGhlbWUodGhpcy5fdGhlbWUpLHRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoUC5DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSk7dmFyIG49dGhpcy5fY3JlYXRlUmVuZGVyZXIoKTt0aGlzLl9yZW5kZXJTZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoUi5SZW5kZXJTZXJ2aWNlLG4sdGhpcy5yb3dzLHRoaXMuc2NyZWVuRWxlbWVudCkpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JUmVuZGVyU2VydmljZSx0aGlzLl9yZW5kZXJTZXJ2aWNlKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fb25SZW5kZXIuZmlyZShlKX0pKSksdGhpcy5vblJlc2l6ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2UucmVzaXplKGUuY29scyxlLnJvd3MpfSkpLHRoaXMuX2NvbXBvc2l0aW9uVmlldz1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKCJjb21wb3NpdGlvbi12aWV3IiksdGhpcy5fY29tcG9zaXRpb25IZWxwZXI9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoYy5Db21wb3NpdGlvbkhlbHBlcix0aGlzLnRleHRhcmVhLHRoaXMuX2NvbXBvc2l0aW9uVmlldyksdGhpcy5faGVscGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NvbXBvc2l0aW9uVmlldyksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHIpLHRoaXMuX3NvdW5kU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShtLlNvdW5kU2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklTb3VuZFNlcnZpY2UsdGhpcy5fc291bmRTZXJ2aWNlKSx0aGlzLl9tb3VzZVNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQS5Nb3VzZVNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JTW91c2VTZXJ2aWNlLHRoaXMuX21vdXNlU2VydmljZSksdGhpcy52aWV3cG9ydD10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShsLlZpZXdwb3J0LChmdW5jdGlvbihlKXtyZXR1cm4gdC5zY3JvbGxMaW5lcyhlLCEwLDEpfSksdGhpcy5fdmlld3BvcnRFbGVtZW50LHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYSx0aGlzLmVsZW1lbnQpLHRoaXMudmlld3BvcnQub25UaGVtZUNoYW5nZSh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RTeW5jU2Nyb2xsQmFyKChmdW5jdGlvbigpe3JldHVybiB0LnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy52aWV3cG9ydCksdGhpcy5yZWdpc3Rlcih0aGlzLm9uQ3Vyc29yTW92ZSgoZnVuY3Rpb24oKXt0Ll9yZW5kZXJTZXJ2aWNlLm9uQ3Vyc29yTW92ZSgpLHQuX3N5bmNUZXh0QXJlYSgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25SZXNpemUoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodC5jb2xzLHQucm93cyl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkJsdXIoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2Uub25CbHVyKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkZvY3VzKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLm9uRm9jdXMoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpfSkpKSx0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UocC5TZWxlY3Rpb25TZXJ2aWNlLHRoaXMuZWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5saW5raWZpZXIyKSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklTZWxlY3Rpb25TZXJ2aWNlLHRoaXMuX3NlbGVjdGlvblNlcnZpY2UpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblJlcXVlc3RTY3JvbGxMaW5lcygoZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2Nyb2xsTGluZXMoZS5hbW91bnQsZS5zdXBwcmVzc1Njcm9sbEV2ZW50KX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlKChmdW5jdGlvbigpe3JldHVybiB0Ll9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblJlcXVlc3RSZWRyYXcoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlZChlLnN0YXJ0LGUuZW5kLGUuY29sdW1uU2VsZWN0TW9kZSl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vbkxpbnV4TW91c2VTZWxlY3Rpb24oKGZ1bmN0aW9uKGUpe3QudGV4dGFyZWEudmFsdWU9ZSx0LnRleHRhcmVhLmZvY3VzKCksdC50ZXh0YXJlYS5zZWxlY3QoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9vblNjcm9sbC5ldmVudCgoZnVuY3Rpb24oZSl7dC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpLHQuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl92aWV3cG9ydEVsZW1lbnQsInNjcm9sbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpfSkpKSx0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGIuTW91c2Vab25lTWFuYWdlcix0aGlzLmVsZW1lbnQsdGhpcy5zY3JlZW5FbGVtZW50KSx0aGlzLnJlZ2lzdGVyKHRoaXMuX21vdXNlWm9uZU1hbmFnZXIpLHRoaXMucmVnaXN0ZXIodGhpcy5vblNjcm9sbCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fbW91c2Vab25lTWFuYWdlci5jbGVhckFsbCgpfSkpKSx0aGlzLmxpbmtpZmllci5hdHRhY2hUb0RvbSh0aGlzLmVsZW1lbnQsdGhpcy5fbW91c2Vab25lTWFuYWdlciksdGhpcy5saW5raWZpZXIyLmF0dGFjaFRvRG9tKHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLl9tb3VzZVNlcnZpY2UsdGhpcy5fcmVuZGVyU2VydmljZSksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShILkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcix0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIm1vdXNlZG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zZWxlY3Rpb25TZXJ2aWNlLm9uTW91c2VEb3duKGUpfSkpKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmU/KHRoaXMuX3NlbGVjdGlvblNlcnZpY2UuZGlzYWJsZSgpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJlbmFibGUtbW91c2UtZXZlbnRzIikpOnRoaXMuX3NlbGVjdGlvblNlcnZpY2UuZW5hYmxlKCksdGhpcy5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUmJih0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcj1uZXcgUy5BY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzLHRoaXMuX3JlbmRlclNlcnZpY2UpKSx0aGlzLm9wdGlvbnMub3ZlcnZpZXdSdWxlcldpZHRoJiYodGhpcy5fb3ZlcnZpZXdSdWxlclJlbmRlcmVyPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGouT3ZlcnZpZXdSdWxlclJlbmRlcmVyLHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbigpeyF0Ll9vdmVydmlld1J1bGVyUmVuZGVyZXImJnQub3B0aW9ucy5vdmVydmlld1J1bGVyV2lkdGgmJnQuX3ZpZXdwb3J0RWxlbWVudCYmdC5zY3JlZW5FbGVtZW50JiYodC5fb3ZlcnZpZXdSdWxlclJlbmRlcmVyPXQuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGouT3ZlcnZpZXdSdWxlclJlbmRlcmVyLHQuX3ZpZXdwb3J0RWxlbWVudCx0LnNjcmVlbkVsZW1lbnQpKX0pKSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSx0aGlzLl9pbml0R2xvYmFsKCksdGhpcy5iaW5kTW91c2UoKX0sdC5wcm90b3R5cGUuX2NyZWF0ZVJlbmRlcmVyPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMub3B0aW9ucy5yZW5kZXJlclR5cGUpe2Nhc2UiY2FudmFzIjpyZXR1cm4gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoXy5SZW5kZXJlcix0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLmxpbmtpZmllcix0aGlzLmxpbmtpZmllcjIpO2Nhc2UiZG9tIjpyZXR1cm4gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQy5Eb21SZW5kZXJlcix0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLHRoaXMuZWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5fdmlld3BvcnRFbGVtZW50LHRoaXMubGlua2lmaWVyLHRoaXMubGlua2lmaWVyMik7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCByZW5kZXJlclR5cGUgIicrdGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZSsnIicpfX0sdC5wcm90b3R5cGUuX3NldFRoZW1lPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaTt0aGlzLl90aGVtZT1lLG51bGw9PT0odD10aGlzLl9jb2xvck1hbmFnZXIpfHx2b2lkIDA9PT10fHx0LnNldFRoZW1lKGUpLG51bGw9PT0ocj10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5zZXRDb2xvcnModGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyksbnVsbD09PShpPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1pfHxpLm9uVGhlbWVDaGFuZ2UodGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyl9LHQucHJvdG90eXBlLmJpbmRNb3VzZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLHI9dGhpcy5lbGVtZW50O2Z1bmN0aW9uIGkoZSl7dmFyIHIsaSxuPXQuX21vdXNlU2VydmljZS5nZXRSYXdCeXRlQ29vcmRzKGUsdC5zY3JlZW5FbGVtZW50LHQuY29scyx0LnJvd3MpO2lmKCFuKXJldHVybiExO3N3aXRjaChlLm92ZXJyaWRlVHlwZXx8ZS50eXBlKXtjYXNlIm1vdXNlbW92ZSI6aT0zMix2b2lkIDA9PT1lLmJ1dHRvbnM/KHI9Myx2b2lkIDAhPT1lLmJ1dHRvbiYmKHI9ZS5idXR0b248Mz9lLmJ1dHRvbjozKSk6cj0xJmUuYnV0dG9ucz8wOjQmZS5idXR0b25zPzE6MiZlLmJ1dHRvbnM/MjozO2JyZWFrO2Nhc2UibW91c2V1cCI6aT0wLHI9ZS5idXR0b248Mz9lLmJ1dHRvbjozO2JyZWFrO2Nhc2UibW91c2Vkb3duIjppPTEscj1lLmJ1dHRvbjwzP2UuYnV0dG9uOjM7YnJlYWs7Y2FzZSJ3aGVlbCI6aWYoMD09PXQudmlld3BvcnQuZ2V0TGluZXNTY3JvbGxlZChlKSlyZXR1cm4hMTtpPWUuZGVsdGFZPDA/MDoxLHI9NDticmVhaztkZWZhdWx0OnJldHVybiExfXJldHVybiEodm9pZCAwPT09aXx8dm9pZCAwPT09cnx8cj40KSYmdC5jb3JlTW91c2VTZXJ2aWNlLnRyaWdnZXJNb3VzZUV2ZW50KHtjb2w6bi54LTMzLHJvdzpuLnktMzMsYnV0dG9uOnIsYWN0aW9uOmksY3RybDplLmN0cmxLZXksYWx0OmUuYWx0S2V5LHNoaWZ0OmUuc2hpZnRLZXl9KX12YXIgbj17bW91c2V1cDpudWxsLHdoZWVsOm51bGwsbW91c2VkcmFnOm51bGwsbW91c2Vtb3ZlOm51bGx9LG89ZnVuY3Rpb24odCl7cmV0dXJuIGkodCksdC5idXR0b25zfHwoZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsbi5tb3VzZXVwKSxuLm1vdXNlZHJhZyYmZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixuLm1vdXNlZHJhZykpLGUuY2FuY2VsKHQpfSxzPWZ1bmN0aW9uKHQpe3JldHVybiBpKHQpLGUuY2FuY2VsKHQsITApfSxhPWZ1bmN0aW9uKGUpe2UuYnV0dG9ucyYmaShlKX0sYz1mdW5jdGlvbihlKXtlLmJ1dHRvbnN8fGkoZSl9O3RoaXMucmVnaXN0ZXIodGhpcy5jb3JlTW91c2VTZXJ2aWNlLm9uUHJvdG9jb2xDaGFuZ2UoKGZ1bmN0aW9uKHQpe3Q/KCJkZWJ1ZyI9PT1lLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubG9nTGV2ZWwmJmUuX2xvZ1NlcnZpY2UuZGVidWcoIkJpbmRpbmcgdG8gbW91c2UgZXZlbnRzOiIsZS5jb3JlTW91c2VTZXJ2aWNlLmV4cGxhaW5FdmVudHModCkpLGUuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJlbmFibGUtbW91c2UtZXZlbnRzIiksZS5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCkpOihlLl9sb2dTZXJ2aWNlLmRlYnVnKCJVbmJpbmRpbmcgZnJvbSBtb3VzZSBldmVudHMuIiksZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImVuYWJsZS1tb3VzZS1ldmVudHMiKSxlLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpKSw4JnQ/bi5tb3VzZW1vdmV8fChyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsYyksbi5tb3VzZW1vdmU9Yyk6KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixuLm1vdXNlbW92ZSksbi5tb3VzZW1vdmU9bnVsbCksMTYmdD9uLndoZWVsfHwoci5hZGRFdmVudExpc3RlbmVyKCJ3aGVlbCIscyx7cGFzc2l2ZTohMX0pLG4ud2hlZWw9cyk6KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2hlZWwiLG4ud2hlZWwpLG4ud2hlZWw9bnVsbCksMiZ0P24ubW91c2V1cHx8KG4ubW91c2V1cD1vKTooZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsbi5tb3VzZXVwKSxuLm1vdXNldXA9bnVsbCksNCZ0P24ubW91c2VkcmFnfHwobi5tb3VzZWRyYWc9YSk6KGUuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbi5tb3VzZWRyYWcpLG4ubW91c2VkcmFnPW51bGwpfSkpKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9dGhpcy5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHIsIm1vdXNlZG93biIsKGZ1bmN0aW9uKHQpe2lmKHQucHJldmVudERlZmF1bHQoKSxlLmZvY3VzKCksZS5jb3JlTW91c2VTZXJ2aWNlLmFyZU1vdXNlRXZlbnRzQWN0aXZlJiYhZS5fc2VsZWN0aW9uU2VydmljZS5zaG91bGRGb3JjZVNlbGVjdGlvbih0KSlyZXR1cm4gaSh0KSxuLm1vdXNldXAmJmUuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLG4ubW91c2V1cCksbi5tb3VzZWRyYWcmJmUuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbi5tb3VzZWRyYWcpLGUuY2FuY2VsKHQpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShyLCJ3aGVlbCIsKGZ1bmN0aW9uKHQpe2lmKCFuLndoZWVsKXtpZighZS5idWZmZXIuaGFzU2Nyb2xsYmFjayl7dmFyIHI9ZS52aWV3cG9ydC5nZXRMaW5lc1Njcm9sbGVkKHQpO2lmKDA9PT1yKXJldHVybjtmb3IodmFyIGk9dS5DMC5FU0MrKGUuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cz8iTyI6IlsiKSsodC5kZWx0YVk8MD8iQSI6IkIiKSxvPSIiLHM9MDtzPE1hdGguYWJzKHIpO3MrKylvKz1pO3JldHVybiBlLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQobywhMCksZS5jYW5jZWwodCwhMCl9cmV0dXJuIGUudmlld3BvcnQub25XaGVlbCh0KT9lLmNhbmNlbCh0KTp2b2lkIDB9fSkse3Bhc3NpdmU6ITF9KSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikociwidG91Y2hzdGFydCIsKGZ1bmN0aW9uKHQpe2lmKCFlLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUpcmV0dXJuIGUudmlld3BvcnQub25Ub3VjaFN0YXJ0KHQpLGUuY2FuY2VsKHQpfSkse3Bhc3NpdmU6ITB9KSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikociwidG91Y2htb3ZlIiwoZnVuY3Rpb24odCl7aWYoIWUuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSlyZXR1cm4gZS52aWV3cG9ydC5vblRvdWNoTW92ZSh0KT92b2lkIDA6ZS5jYW5jZWwodCl9KSx7cGFzc2l2ZTohMX0pKX0sdC5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlLHQpe3ZhciByO251bGw9PT0ocj10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5yZWZyZXNoUm93cyhlLHQpfSx0LnByb3RvdHlwZS5fcXVldWVMaW5raWZpY2F0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI7bnVsbD09PShyPXRoaXMubGlua2lmaWVyKXx8dm9pZCAwPT09cnx8ci5saW5raWZ5Um93cyhlLHQpfSx0LnByb3RvdHlwZS51cGRhdGVDdXJzb3JTdHlsZT1mdW5jdGlvbihlKXt2YXIgdDsobnVsbD09PSh0PXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNob3VsZENvbHVtblNlbGVjdChlKSk/dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImNvbHVtbi1zZWxlY3QiKTp0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiY29sdW1uLXNlbGVjdCIpfSx0LnByb3RvdHlwZS5fc2hvd0N1cnNvcj1mdW5jdGlvbigpe3RoaXMuY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZHx8KHRoaXMuY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZD0hMCx0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSx0aGlzLmJ1ZmZlci55KSl9LHQucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKHQscixpKXt2b2lkIDA9PT1pJiYoaT0wKSxlLnByb3RvdHlwZS5zY3JvbGxMaW5lcy5jYWxsKHRoaXMsdCxyLGkpLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKX0sdC5wcm90b3R5cGUucGFzdGU9ZnVuY3Rpb24oZSl7KDAsaC5wYXN0ZSkoZSx0aGlzLnRleHRhcmVhLHRoaXMuY29yZVNlcnZpY2UpfSx0LnByb3RvdHlwZS5hdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPWV9LHQucHJvdG90eXBlLnJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMubGlua2lmaWVyLnJlZ2lzdGVyTGlua01hdGNoZXIoZSx0LHIpO3JldHVybiB0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksaX0sdC5wcm90b3R5cGUuZGVyZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUpe3RoaXMubGlua2lmaWVyLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihlKSYmdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfSx0LnByb3RvdHlwZS5yZWdpc3RlckxpbmtQcm92aWRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5saW5raWZpZXIyLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKGUpfSx0LnByb3RvdHlwZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcj1mdW5jdGlvbihlKXtpZighdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSl0aHJvdyBuZXcgRXJyb3IoIlRlcm1pbmFsIG11c3QgYmUgb3BlbmVkIGZpcnN0Iik7dmFyIHQ9dGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5yZWdpc3RlcihlKTtyZXR1cm4gdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpLHR9LHQucHJvdG90eXBlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpdGhyb3cgbmV3IEVycm9yKCJUZXJtaW5hbCBtdXN0IGJlIG9wZW5lZCBmaXJzdCIpO3RoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UuZGVyZWdpc3RlcihlKSYmdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm1hcmtlcnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIubWFya2Vyc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5hZGRNYXJrZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy5idWZmZXI9PT10aGlzLmJ1ZmZlcnMubm9ybWFsKXJldHVybiB0aGlzLmJ1ZmZlci5hZGRNYXJrZXIodGhpcy5idWZmZXIueWJhc2UrdGhpcy5idWZmZXIueStlKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5yZWdpc3RlckRlY29yYXRpb24oZSl9LHQucHJvdG90eXBlLmhhc1NlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fc2VsZWN0aW9uU2VydmljZSYmdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb259LHQucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbihlLHQscil7dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZXRTZWxlY3Rpb24oZSx0LHIpfSx0LnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uU2VydmljZT90aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ6IiJ9LHQucHJvdG90eXBlLmdldFNlbGVjdGlvblBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2VsZWN0aW9uU2VydmljZSYmdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb24pcmV0dXJue3N0YXJ0Q29sdW1uOnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnRbMF0sc3RhcnRSb3c6dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25TdGFydFsxXSxlbmRDb2x1bW46dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25FbmRbMF0sZW5kUm93OnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uRW5kWzFdfX0sdC5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fc2VsZWN0aW9uU2VydmljZSl8fHZvaWQgMD09PWV8fGUuY2xlYXJTZWxlY3Rpb24oKX0sdC5wcm90b3R5cGUuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLnNlbGVjdEFsbCgpfSx0LnByb3RvdHlwZS5zZWxlY3RMaW5lcz1mdW5jdGlvbihlLHQpe3ZhciByO251bGw9PT0ocj10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5zZWxlY3RMaW5lcyhlLHQpfSx0LnByb3RvdHlwZS5fa2V5RG93bj1mdW5jdGlvbihlKXtpZih0aGlzLl9rZXlEb3duSGFuZGxlZD0hMSx0aGlzLl9rZXlEb3duU2Vlbj0hMCx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpKXJldHVybiExO3ZhciB0PXRoaXMuYnJvd3Nlci5pc01hYyYmdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSYmZS5hbHRLZXk7aWYoIXQmJiF0aGlzLl9jb21wb3NpdGlvbkhlbHBlci5rZXlkb3duKGUpKXJldHVybiB0aGlzLmJ1ZmZlci55YmFzZSE9PXRoaXMuYnVmZmVyLnlkaXNwJiZ0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvQm90dG9tKCksITE7dHx8IkRlYWQiIT09ZS5rZXkmJiJBbHRHcmFwaCIhPT1lLmtleXx8KHRoaXMuX3VucHJvY2Vzc2VkRGVhZEtleT0hMCk7dmFyIHI9KDAsdy5ldmFsdWF0ZUtleWJvYXJkRXZlbnQpKGUsdGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzLHRoaXMuYnJvd3Nlci5pc01hYyx0aGlzLm9wdGlvbnMubWFjT3B0aW9uSXNNZXRhKTtpZih0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGUpLDM9PT1yLnR5cGV8fDI9PT1yLnR5cGUpe3ZhciBpPXRoaXMucm93cy0xO3JldHVybiB0aGlzLnNjcm9sbExpbmVzKDI9PT1yLnR5cGU/LWk6aSksdGhpcy5jYW5jZWwoZSwhMCl9cmV0dXJuIDE9PT1yLnR5cGUmJnRoaXMuc2VsZWN0QWxsKCksISF0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsZSl8fChyLmNhbmNlbCYmdGhpcy5jYW5jZWwoZSwhMCksIXIua2V5fHwhIShlLmtleSYmIWUuY3RybEtleSYmIWUuYWx0S2V5JiYhZS5tZXRhS2V5JiYxPT09ZS5rZXkubGVuZ3RoJiZlLmtleS5jaGFyQ29kZUF0KDApPj02NSYmZS5rZXkuY2hhckNvZGVBdCgwKTw9OTApfHwodGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5Pyh0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITEsITApOihyLmtleSE9PXUuQzAuRVRYJiZyLmtleSE9PXUuQzAuQ1J8fCh0aGlzLnRleHRhcmVhLnZhbHVlPSIiKSx0aGlzLl9vbktleS5maXJlKHtrZXk6ci5rZXksZG9tRXZlbnQ6ZX0pLHRoaXMuX3Nob3dDdXJzb3IoKSx0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoci5rZXksITApLHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlP3ZvaWQodGhpcy5fa2V5RG93bkhhbmRsZWQ9ITApOnRoaXMuY2FuY2VsKGUsITApKSkpfSx0LnByb3RvdHlwZS5faXNUaGlyZExldmVsU2hpZnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmlzTWFjJiYhdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSYmdC5hbHRLZXkmJiF0LmN0cmxLZXkmJiF0Lm1ldGFLZXl8fGUuaXNXaW5kb3dzJiZ0LmFsdEtleSYmdC5jdHJsS2V5JiYhdC5tZXRhS2V5fHxlLmlzV2luZG93cyYmdC5nZXRNb2RpZmllclN0YXRlKCJBbHRHcmFwaCIpO3JldHVybiJrZXlwcmVzcyI9PT10LnR5cGU/cjpyJiYoIXQua2V5Q29kZXx8dC5rZXlDb2RlPjQ3KX0sdC5wcm90b3R5cGUuX2tleVVwPWZ1bmN0aW9uKGUpe3RoaXMuX2tleURvd25TZWVuPSExLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciYmITE9PT10aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZSl8fChmdW5jdGlvbihlKXtyZXR1cm4gMTY9PT1lLmtleUNvZGV8fDE3PT09ZS5rZXlDb2RlfHwxOD09PWUua2V5Q29kZX0oZSl8fHRoaXMuZm9jdXMoKSx0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGUpLHRoaXMuX2tleVByZXNzSGFuZGxlZD0hMSl9LHQucHJvdG90eXBlLl9rZXlQcmVzcz1mdW5jdGlvbihlKXt2YXIgdDtpZih0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITEsdGhpcy5fa2V5RG93bkhhbmRsZWQpcmV0dXJuITE7aWYodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyJiYhMT09PXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihlKSlyZXR1cm4hMTtpZih0aGlzLmNhbmNlbChlKSxlLmNoYXJDb2RlKXQ9ZS5jaGFyQ29kZTtlbHNlIGlmKG51bGw9PT1lLndoaWNofHx2b2lkIDA9PT1lLndoaWNoKXQ9ZS5rZXlDb2RlO2Vsc2V7aWYoMD09PWUud2hpY2h8fDA9PT1lLmNoYXJDb2RlKXJldHVybiExO3Q9ZS53aGljaH1yZXR1cm4hKCF0fHwoZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmIXRoaXMuX2lzVGhpcmRMZXZlbFNoaWZ0KHRoaXMuYnJvd3NlcixlKXx8KHQ9U3RyaW5nLmZyb21DaGFyQ29kZSh0KSx0aGlzLl9vbktleS5maXJlKHtrZXk6dCxkb21FdmVudDplfSksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSx0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITAsdGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExLDApKX0sdC5wcm90b3R5cGUuX2lucHV0RXZlbnQ9ZnVuY3Rpb24oZSl7aWYoZS5kYXRhJiYiaW5zZXJ0VGV4dCI9PT1lLmlucHV0VHlwZSYmKCFlLmNvbXBvc2VkfHwhdGhpcy5fa2V5RG93blNlZW4pJiYhdGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUpe2lmKHRoaXMuX2tleVByZXNzSGFuZGxlZClyZXR1cm4hMTt0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITE7dmFyIHQ9ZS5kYXRhO3JldHVybiB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodCwhMCksdGhpcy5jYW5jZWwoZSksITB9cmV0dXJuITF9LHQucHJvdG90eXBlLmJlbGw9ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLl9zb3VuZEJlbGwoKSYmKG51bGw9PT0oZT10aGlzLl9zb3VuZFNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLnBsYXlCZWxsU291bmQoKSksdGhpcy5fb25CZWxsLmZpcmUoKX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQscil7dCE9PXRoaXMuY29sc3x8ciE9PXRoaXMucm93cz9lLnByb3RvdHlwZS5yZXNpemUuY2FsbCh0aGlzLHQscik6dGhpcy5fY2hhclNpemVTZXJ2aWNlJiYhdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSYmdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKX0sdC5wcm90b3R5cGUuX2FmdGVyUmVzaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaTtudWxsPT09KHI9dGhpcy5fY2hhclNpemVTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5tZWFzdXJlKCksbnVsbD09PShpPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1pfHxpLnN5bmNTY3JvbGxBcmVhKCEwKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5idWZmZXIueWJhc2V8fDAhPT10aGlzLmJ1ZmZlci55KXt0aGlzLmJ1ZmZlci5jbGVhckFsbE1hcmtlcnMoKSx0aGlzLmJ1ZmZlci5saW5lcy5zZXQoMCx0aGlzLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5idWZmZXIueWJhc2UrdGhpcy5idWZmZXIueSkpLHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aD0xLHRoaXMuYnVmZmVyLnlkaXNwPTAsdGhpcy5idWZmZXIueWJhc2U9MCx0aGlzLmJ1ZmZlci55PTA7Zm9yKHZhciBlPTE7ZTx0aGlzLnJvd3M7ZSsrKXRoaXMuYnVmZmVyLmxpbmVzLnB1c2godGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKEUuREVGQVVMVF9BVFRSX0RBVEEpKTt0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksdGhpcy5fb25TY3JvbGwuZmlyZSh7cG9zaXRpb246dGhpcy5idWZmZXIueWRpc3Asc291cmNlOjB9KX19LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIHQscjt0aGlzLm9wdGlvbnMucm93cz10aGlzLnJvd3MsdGhpcy5vcHRpb25zLmNvbHM9dGhpcy5jb2xzO3ZhciBpPXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcjt0aGlzLl9zZXR1cCgpLGUucHJvdG90eXBlLnJlc2V0LmNhbGwodGhpcyksbnVsbD09PSh0PXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT10fHx0LnJlc2V0KCksdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UucmVzZXQoKSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9aSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksbnVsbD09PShyPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1yfHxyLnN5bmNTY3JvbGxBcmVhKCl9LHQucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLmNsZWFyVGV4dHVyZUF0bGFzKCl9LHQucHJvdG90eXBlLl9yZXBvcnRGb2N1cz1mdW5jdGlvbigpe3ZhciBlOyhudWxsPT09KGU9dGhpcy5lbGVtZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbGFzc0xpc3QuY29udGFpbnMoImZvY3VzIikpP3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiW0kiKTp0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIltPIil9LHQucHJvdG90eXBlLl9yZXBvcnRXaW5kb3dzT3B0aW9ucz1mdW5jdGlvbihlKXtpZih0aGlzLl9yZW5kZXJTZXJ2aWNlKXN3aXRjaChlKXtjYXNlIGYuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlLkdFVF9XSU5fU0laRV9QSVhFTFM6dmFyIHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoLnRvRml4ZWQoMCkscj10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0LnRvRml4ZWQoMCk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbNDsiK3IrIjsiK3QrInQiKTticmVhaztjYXNlIGYuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlLkdFVF9DRUxMX1NJWkVfUElYRUxTOnZhciBpPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgudG9GaXhlZCgwKSxuPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LnRvRml4ZWQoMCk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbNjsiK24rIjsiK2krInQiKX19LHQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbihlLHQpe2lmKHRoaXMub3B0aW9ucy5jYW5jZWxFdmVudHN8fHQpcmV0dXJuIGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLCExfSx0LnByb3RvdHlwZS5fdmlzdWFsQmVsbD1mdW5jdGlvbigpe3JldHVybiExfSx0LnByb3RvdHlwZS5fc291bmRCZWxsPWZ1bmN0aW9uKCl7cmV0dXJuInNvdW5kIj09PXRoaXMub3B0aW9ucy5iZWxsU3R5bGV9LHR9KFQuQ29yZVRlcm1pbmFsKTt0LlRlcm1pbmFsPXF9LDk5MjQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5UaW1lQmFzZWREZWJvdW5jZXI9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZvaWQgMD09PXQmJih0PTFlMyksdGhpcy5fcmVuZGVyQ2FsbGJhY2s9ZSx0aGlzLl9kZWJvdW5jZVRocmVzaG9sZE1TPXQsdGhpcy5fbGFzdFJlZnJlc2hNcz0wLHRoaXMuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkPSExfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fcmVmcmVzaFRpbWVvdXRJRCYmY2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hUaW1lb3V0SUQpfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO3RoaXMuX3Jvd0NvdW50PXIsZT12b2lkIDAhPT1lP2U6MCx0PXZvaWQgMCE9PXQ/dDp0aGlzLl9yb3dDb3VudC0xLHRoaXMuX3Jvd1N0YXJ0PXZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0P01hdGgubWluKHRoaXMuX3Jvd1N0YXJ0LGUpOmUsdGhpcy5fcm93RW5kPXZvaWQgMCE9PXRoaXMuX3Jvd0VuZD9NYXRoLm1heCh0aGlzLl9yb3dFbmQsdCk6dDt2YXIgbj1EYXRlLm5vdygpO2lmKG4tdGhpcy5fbGFzdFJlZnJlc2hNcz49dGhpcy5fZGVib3VuY2VUaHJlc2hvbGRNUyl0aGlzLl9sYXN0UmVmcmVzaE1zPW4sdGhpcy5faW5uZXJSZWZyZXNoKCk7ZWxzZSBpZighdGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQpe3ZhciBvPW4tdGhpcy5fbGFzdFJlZnJlc2hNcyxzPXRoaXMuX2RlYm91bmNlVGhyZXNob2xkTVMtbzt0aGlzLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZD0hMCx0aGlzLl9yZWZyZXNoVGltZW91dElEPXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe2kuX2xhc3RSZWZyZXNoTXM9RGF0ZS5ub3coKSxpLl9pbm5lclJlZnJlc2goKSxpLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZD0hMSxpLl9yZWZyZXNoVGltZW91dElEPXZvaWQgMH0pLHMpfX0sZS5wcm90b3R5cGUuX2lubmVyUmVmcmVzaD1mdW5jdGlvbigpe2lmKHZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0JiZ2b2lkIDAhPT10aGlzLl9yb3dFbmQmJnZvaWQgMCE9PXRoaXMuX3Jvd0NvdW50KXt2YXIgZT1NYXRoLm1heCh0aGlzLl9yb3dTdGFydCwwKSx0PU1hdGgubWluKHRoaXMuX3Jvd0VuZCx0aGlzLl9yb3dDb3VudC0xKTt0aGlzLl9yb3dTdGFydD12b2lkIDAsdGhpcy5fcm93RW5kPXZvaWQgMCx0aGlzLl9yZW5kZXJDYWxsYmFjayhlLHQpfX0sZX0oKTt0LlRpbWVCYXNlZERlYm91bmNlcj1yfSwxNjgwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlZpZXdwb3J0PXZvaWQgMDt2YXIgYT1yKDg0NCksYz1yKDM2NTYpLGw9cig0NzI1KSxoPXIoMjU4NSksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsbCl7dmFyIGg9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBoLl9zY3JvbGxMaW5lcz10LGguX3ZpZXdwb3J0RWxlbWVudD1yLGguX3Njcm9sbEFyZWE9aSxoLl9lbGVtZW50PW4saC5fYnVmZmVyU2VydmljZT1vLGguX29wdGlvbnNTZXJ2aWNlPXMsaC5fY2hhclNpemVTZXJ2aWNlPWEsaC5fcmVuZGVyU2VydmljZT1sLGguc2Nyb2xsQmFyV2lkdGg9MCxoLl9jdXJyZW50Um93SGVpZ2h0PTAsaC5fY3VycmVudFNjYWxlZENlbGxIZWlnaHQ9MCxoLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGg9MCxoLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodD0wLGguX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodD0wLGguX2xhc3RUb3VjaFk9MCxoLl9sYXN0U2Nyb2xsVG9wPTAsaC5fd2hlZWxQYXJ0aWFsU2Nyb2xsPTAsaC5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPW51bGwsaC5faWdub3JlTmV4dFNjcm9sbEV2ZW50PSExLGguc2Nyb2xsQmFyV2lkdGg9aC5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFdpZHRoLWguX3Njcm9sbEFyZWEub2Zmc2V0V2lkdGh8fDE1LGgucmVnaXN0ZXIoKDAsYy5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKGguX3ZpZXdwb3J0RWxlbWVudCwic2Nyb2xsIixoLl9vblNjcm9sbC5iaW5kKGgpKSksaC5fYWN0aXZlQnVmZmVyPWguX2J1ZmZlclNlcnZpY2UuYnVmZmVyLGgucmVnaXN0ZXIoaC5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9hY3RpdmVCdWZmZXI9ZS5hY3RpdmVCdWZmZXJ9KSkpLGguX3JlbmRlckRpbWVuc2lvbnM9aC5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLGgucmVnaXN0ZXIoaC5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9yZW5kZXJEaW1lbnNpb25zPWV9KSkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGguc3luY1Njcm9sbEFyZWEoKX0pLDApLGh9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5vblRoZW1lQ2hhbmdlPWZ1bmN0aW9uKGUpe3RoaXMuX3ZpZXdwb3J0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9ZS5iYWNrZ3JvdW5kLmNzc30sdC5wcm90b3R5cGUuX3JlZnJlc2g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihlKXJldHVybiB0aGlzLl9pbm5lclJlZnJlc2goKSx2b2lkKG51bGwhPT10aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUmJmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSkpO251bGw9PT10aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUmJih0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiB0Ll9pbm5lclJlZnJlc2goKX0pKSl9LHQucHJvdG90eXBlLl9pbm5lclJlZnJlc2g9ZnVuY3Rpb24oKXtpZih0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0PjApe3RoaXMuX2N1cnJlbnRSb3dIZWlnaHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5fY3VycmVudFNjYWxlZENlbGxIZWlnaHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ9dGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldEhlaWdodDt2YXIgZT1NYXRoLnJvdW5kKHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQqdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoKSsodGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQtdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCk7dGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0IT09ZSYmKHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodD1lLHRoaXMuX3Njcm9sbEFyZWEuc3R5bGUuaGVpZ2h0PXRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCsicHgiKX12YXIgdD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCp0aGlzLl9jdXJyZW50Um93SGVpZ2h0O3RoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AhPT10JiYodGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50PSEwLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3A9dCksdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPW51bGx9LHQucHJvdG90eXBlLnN5bmNTY3JvbGxBcmVhPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUmJihlPSExKSx0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGghPT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgpcmV0dXJuIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgsdm9pZCB0aGlzLl9yZWZyZXNoKGUpO3RoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0PT09dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCYmdGhpcy5fbGFzdFNjcm9sbFRvcD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcCp0aGlzLl9jdXJyZW50Um93SGVpZ2h0JiZ0aGlzLl9yZW5kZXJEaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ9PT10aGlzLl9jdXJyZW50U2NhbGVkQ2VsbEhlaWdodHx8dGhpcy5fcmVmcmVzaChlKX0sdC5wcm90b3R5cGUuX29uU2Nyb2xsPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2xhc3RTY3JvbGxUb3A9dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCx0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0UGFyZW50KXtpZih0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQpcmV0dXJuIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudD0hMSx2b2lkIHRoaXMuX3Njcm9sbExpbmVzKDApO3ZhciB0PU1hdGgucm91bmQodGhpcy5fbGFzdFNjcm9sbFRvcC90aGlzLl9jdXJyZW50Um93SGVpZ2h0KS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDt0aGlzLl9zY3JvbGxMaW5lcyh0KX19LHQucHJvdG90eXBlLl9idWJibGVTY3JvbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wK3RoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0O3JldHVybiEodDwwJiYwIT09dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcHx8dD4wJiZyPHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCl8fChlLmNhbmNlbGFibGUmJmUucHJldmVudERlZmF1bHQoKSwhMSl9LHQucHJvdG90eXBlLm9uV2hlZWw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0UGl4ZWxzU2Nyb2xsZWQoZSk7cmV0dXJuIDAhPT10JiYodGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCs9dCx0aGlzLl9idWJibGVTY3JvbGwoZSx0KSl9LHQucHJvdG90eXBlLl9nZXRQaXhlbHNTY3JvbGxlZD1mdW5jdGlvbihlKXtpZigwPT09ZS5kZWx0YVl8fGUuc2hpZnRLZXkpcmV0dXJuIDA7dmFyIHQ9dGhpcy5fYXBwbHlTY3JvbGxNb2RpZmllcihlLmRlbHRhWSxlKTtyZXR1cm4gZS5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FP3QqPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ6ZS5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFJiYodCo9dGhpcy5fY3VycmVudFJvd0hlaWdodCp0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHR9LHQucHJvdG90eXBlLmdldExpbmVzU2Nyb2xsZWQ9ZnVuY3Rpb24oZSl7aWYoMD09PWUuZGVsdGFZfHxlLnNoaWZ0S2V5KXJldHVybiAwO3ZhciB0PXRoaXMuX2FwcGx5U2Nyb2xsTW9kaWZpZXIoZS5kZWx0YVksZSk7cmV0dXJuIGUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUElYRUw/KHQvPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQrMCx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwrPXQsdD1NYXRoLmZsb29yKE1hdGguYWJzKHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCkpKih0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGw+MD8xOi0xKSx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwlPTEpOmUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSYmKHQqPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdH0sdC5wcm90b3R5cGUuX2FwcGx5U2Nyb2xsTW9kaWZpZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZhc3RTY3JvbGxNb2RpZmllcjtyZXR1cm4iYWx0Ij09PXImJnQuYWx0S2V5fHwiY3RybCI9PT1yJiZ0LmN0cmxLZXl8fCJzaGlmdCI9PT1yJiZ0LnNoaWZ0S2V5P2UqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mYXN0U2Nyb2xsU2Vuc2l0aXZpdHkqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxTZW5zaXRpdml0eTplKnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHl9LHQucHJvdG90eXBlLm9uVG91Y2hTdGFydD1mdW5jdGlvbihlKXt0aGlzLl9sYXN0VG91Y2hZPWUudG91Y2hlc1swXS5wYWdlWX0sdC5wcm90b3R5cGUub25Ub3VjaE1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbGFzdFRvdWNoWS1lLnRvdWNoZXNbMF0ucGFnZVk7cmV0dXJuIHRoaXMuX2xhc3RUb3VjaFk9ZS50b3VjaGVzWzBdLnBhZ2VZLDAhPT10JiYodGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCs9dCx0aGlzLl9idWJibGVTY3JvbGwoZSx0KSl9LG8oW3MoNCxoLklCdWZmZXJTZXJ2aWNlKSxzKDUsaC5JT3B0aW9uc1NlcnZpY2UpLHMoNixsLklDaGFyU2l6ZVNlcnZpY2UpLHMoNyxsLklSZW5kZXJTZXJ2aWNlKV0sdCl9KGEuRGlzcG9zYWJsZSk7dC5WaWV3cG9ydD11fSwzMTA3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj12b2lkIDA7dmFyIGM9cigzNjU2KSxsPXIoNDcyNSksaD1yKDg0NCksdT1yKDI1ODUpLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuKXt2YXIgbz1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uX3NjcmVlbkVsZW1lbnQ9dCxvLl9idWZmZXJTZXJ2aWNlPXIsby5fZGVjb3JhdGlvblNlcnZpY2U9aSxvLl9yZW5kZXJTZXJ2aWNlPW4sby5fZGVjb3JhdGlvbkVsZW1lbnRzPW5ldyBNYXAsby5fYWx0QnVmZmVySXNBY3RpdmU9ITEsby5fZGltZW5zaW9uc0NoYW5nZWQ9ITEsby5fY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLG8uX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1kZWNvcmF0aW9uLWNvbnRhaW5lciIpLG8uX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQoby5fY29udGFpbmVyKSxvLnJlZ2lzdGVyKG8uX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKChmdW5jdGlvbigpe3JldHVybiBvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcihvLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oKXtvLl9kaW1lbnNpb25zQ2hhbmdlZD0hMCxvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcigoMCxjLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikod2luZG93LCJyZXNpemUiLChmdW5jdGlvbigpe3JldHVybiBvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcihvLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oKXtvLl9hbHRCdWZmZXJJc0FjdGl2ZT1vLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcj09PW8uX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hbHR9KSkpLG8ucmVnaXN0ZXIoby5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVnaXN0ZXJlZCgoZnVuY3Rpb24oKXtyZXR1cm4gby5fcXVldWVSZWZyZXNoKCl9KSkpLG8ucmVnaXN0ZXIoby5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVtb3ZlZCgoZnVuY3Rpb24oZSl7cmV0dXJuIG8uX3JlbW92ZURlY29yYXRpb24oZSl9KSkpLG99cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5jbGVhcigpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3F1ZXVlUmVmcmVzaD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dm9pZCAwPT09dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih0aGlzLl9hbmltYXRpb25GcmFtZT10aGlzLl9yZW5kZXJTZXJ2aWNlLmFkZFJlZnJlc2hDYWxsYmFjaygoZnVuY3Rpb24oKXtlLnJlZnJlc2hEZWNvcmF0aW9ucygpLGUuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKSl9LHQucHJvdG90eXBlLnJlZnJlc2hEZWNvcmF0aW9ucz1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1hKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmRlY29yYXRpb25zKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG49aS52YWx1ZTt0aGlzLl9yZW5kZXJEZWNvcmF0aW9uKG4pfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGltZW5zaW9uc0NoYW5nZWQ9ITF9LHQucHJvdG90eXBlLl9yZW5kZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuX3JlZnJlc2hTdHlsZShlKSx0aGlzLl9kaW1lbnNpb25zQ2hhbmdlZCYmdGhpcy5fcmVmcmVzaFhQb3NpdGlvbihlKX0sdC5wcm90b3R5cGUuX2NyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWRlY29yYXRpb24iKSxyLnN0eWxlLndpZHRoPU1hdGgucm91bmQoKGUub3B0aW9ucy53aWR0aHx8MSkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCkrInB4IixyLnN0eWxlLmhlaWdodD0oZS5vcHRpb25zLmhlaWdodHx8MSkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixyLnN0eWxlLnRvcD0oZS5tYXJrZXIubGluZS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLnlkaXNwKSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLHIuc3R5bGUubGluZUhlaWdodD10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiO3ZhciBpPW51bGwhPT0odD1lLm9wdGlvbnMueCkmJnZvaWQgMCE9PXQ/dDowO3JldHVybiBpJiZpPnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmKHIuc3R5bGUuZGlzcGxheT0ibm9uZSIpLHRoaXMuX3JlZnJlc2hYUG9zaXRpb24oZSxyKSxyfSx0LnByb3RvdHlwZS5fcmVmcmVzaFN0eWxlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLm1hcmtlci5saW5lLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUueWRpc3A7aWYocjwwfHxyPj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpZS5lbGVtZW50JiYoZS5lbGVtZW50LnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUub25SZW5kZXJFbWl0dGVyLmZpcmUoZS5lbGVtZW50KSk7ZWxzZXt2YXIgaT10aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZ2V0KGUpO2l8fChlLm9uRGlzcG9zZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVtb3ZlRGVjb3JhdGlvbihlKX0pKSxpPXRoaXMuX2NyZWF0ZUVsZW1lbnQoZSksZS5lbGVtZW50PWksdGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLnNldChlLGkpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChpKSksaS5zdHlsZS50b3A9cip0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLGkuc3R5bGUuZGlzcGxheT10aGlzLl9hbHRCdWZmZXJJc0FjdGl2ZT8ibm9uZSI6ImJsb2NrIixlLm9uUmVuZGVyRW1pdHRlci5maXJlKGkpfX0sdC5wcm90b3R5cGUuX3JlZnJlc2hYUG9zaXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZih2b2lkIDA9PT10JiYodD1lLmVsZW1lbnQpLHQpe3ZhciBpPW51bGwhPT0ocj1lLm9wdGlvbnMueCkmJnZvaWQgMCE9PXI/cjowOyJyaWdodCI9PT0oZS5vcHRpb25zLmFuY2hvcnx8ImxlZnQiKT90LnN0eWxlLnJpZ2h0PWk/aSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKyJweCI6IiI6dC5zdHlsZS5sZWZ0PWk/aSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKyJweCI6IiJ9fSx0LnByb3RvdHlwZS5fcmVtb3ZlRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLmdldChlKSl8fHZvaWQgMD09PXR8fHQucmVtb3ZlKCksdGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLmRlbGV0ZShlKX0sbyhbcygxLHUuSUJ1ZmZlclNlcnZpY2UpLHMoMix1LklEZWNvcmF0aW9uU2VydmljZSkscygzLGwuSVJlbmRlclNlcnZpY2UpXSx0KX0oaC5EaXNwb3NhYmxlKTt0LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj1mfSw1ODcxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbG9yWm9uZVN0b3JlPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl96b25lcz1bXSx0aGlzLl96b25lUG9vbD1bXSx0aGlzLl96b25lUG9vbEluZGV4PTAsdGhpcy5fbGluZVBhZGRpbmc9e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH19cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiem9uZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9uZVBvb2wubGVuZ3RoPU1hdGgubWluKHRoaXMuX3pvbmVQb29sLmxlbmd0aCx0aGlzLl96b25lcy5sZW5ndGgpLHRoaXMuX3pvbmVzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fem9uZXMubGVuZ3RoPTAsdGhpcy5fem9uZVBvb2xJbmRleD0wfSxlLnByb3RvdHlwZS5hZGREZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zKXt0cnl7Zm9yKHZhciBuPXIodGhpcy5fem9uZXMpLG89bi5uZXh0KCk7IW8uZG9uZTtvPW4ubmV4dCgpKXt2YXIgcz1vLnZhbHVlO2lmKHMuY29sb3I9PT1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3ImJnMucG9zaXRpb249PT1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24pe2lmKHRoaXMuX2xpbmVJbnRlcnNlY3RzWm9uZShzLGUubWFya2VyLmxpbmUpKXJldHVybjtpZih0aGlzLl9saW5lQWRqYWNlbnRUb1pvbmUocyxlLm1hcmtlci5saW5lLGUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5fYWRkTGluZVRvWm9uZShzLGUubWFya2VyLmxpbmUpfX19Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWlmKHRoaXMuX3pvbmVQb29sSW5kZXg8dGhpcy5fem9uZVBvb2wubGVuZ3RoKXJldHVybiB0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5jb2xvcj1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3IsdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0ucG9zaXRpb249ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLnN0YXJ0QnVmZmVyTGluZT1lLm1hcmtlci5saW5lLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLmVuZEJ1ZmZlckxpbmU9ZS5tYXJrZXIubGluZSx2b2lkIHRoaXMuX3pvbmVzLnB1c2godGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleCsrXSk7dGhpcy5fem9uZXMucHVzaCh7Y29sb3I6ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLmNvbG9yLHBvc2l0aW9uOmUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbixzdGFydEJ1ZmZlckxpbmU6ZS5tYXJrZXIubGluZSxlbmRCdWZmZXJMaW5lOmUubWFya2VyLmxpbmV9KSx0aGlzLl96b25lUG9vbC5wdXNoKHRoaXMuX3pvbmVzW3RoaXMuX3pvbmVzLmxlbmd0aC0xXSksdGhpcy5fem9uZVBvb2xJbmRleCsrfX0sZS5wcm90b3R5cGUuc2V0UGFkZGluZz1mdW5jdGlvbihlKXt0aGlzLl9saW5lUGFkZGluZz1lfSxlLnByb3RvdHlwZS5fbGluZUludGVyc2VjdHNab25lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ+PWUuc3RhcnRCdWZmZXJMaW5lJiZ0PD1lLmVuZEJ1ZmZlckxpbmV9LGUucHJvdG90eXBlLl9saW5lQWRqYWNlbnRUb1pvbmU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0Pj1lLnN0YXJ0QnVmZmVyTGluZS10aGlzLl9saW5lUGFkZGluZ1tyfHwiZnVsbCJdJiZ0PD1lLmVuZEJ1ZmZlckxpbmUrdGhpcy5fbGluZVBhZGRpbmdbcnx8ImZ1bGwiXX0sZS5wcm90b3R5cGUuX2FkZExpbmVUb1pvbmU9ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0QnVmZmVyTGluZT1NYXRoLm1pbihlLnN0YXJ0QnVmZmVyTGluZSx0KSxlLmVuZEJ1ZmZlckxpbmU9TWF0aC5tYXgoZS5lbmRCdWZmZXJMaW5lLHQpfSxlfSgpO3QuQ29sb3Jab25lU3RvcmU9aX0sNTc0NDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5PdmVydmlld1J1bGVyUmVuZGVyZXI9dm9pZCAwO3ZhciBjPXIoNTg3MSksbD1yKDM2NTYpLGg9cig0NzI1KSx1PXIoODQ0KSxmPXIoMjU4NSksXz17ZnVsbDowLGxlZnQ6MCxjZW50ZXI6MCxyaWdodDowfSxkPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9LHA9e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH0sdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzKXt2YXIgYSxsPWUuY2FsbCh0aGlzKXx8dGhpcztsLl92aWV3cG9ydEVsZW1lbnQ9dCxsLl9zY3JlZW5FbGVtZW50PXIsbC5fYnVmZmVyU2VydmljZT1pLGwuX2RlY29yYXRpb25TZXJ2aWNlPW4sbC5fcmVuZGVyU2VydmljZT1vLGwuX29wdGlvbnNTZXJ2aWNlPXMsbC5fY29sb3Jab25lU3RvcmU9bmV3IGMuQ29sb3Jab25lU3RvcmUsbC5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz0hMCxsLl9zaG91bGRVcGRhdGVBbmNob3I9ITAsbC5fbGFzdEtub3duQnVmZmVyTGVuZ3RoPTAsbC5fY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLGwuX2NhbnZhcy5jbGFzc0xpc3QuYWRkKCJ4dGVybS1kZWNvcmF0aW9uLW92ZXJ2aWV3LXJ1bGVyIiksbC5fcmVmcmVzaENhbnZhc0RpbWVuc2lvbnMoKSxudWxsPT09KGE9bC5fdmlld3BvcnRFbGVtZW50LnBhcmVudEVsZW1lbnQpfHx2b2lkIDA9PT1hfHxhLmluc2VydEJlZm9yZShsLl9jYW52YXMsbC5fdmlld3BvcnRFbGVtZW50KTt2YXIgaD1sLl9jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTtpZighaCl0aHJvdyBuZXcgRXJyb3IoIkN0eCBjYW5ub3QgYmUgbnVsbCIpO3JldHVybiBsLl9jdHg9aCxsLl9yZWdpc3RlckRlY29yYXRpb25MaXN0ZW5lcnMoKSxsLl9yZWdpc3RlckJ1ZmZlckNoYW5nZUxpc3RlbmVycygpLGwuX3JlZ2lzdGVyRGltZW5zaW9uQ2hhbmdlTGlzdGVuZXJzKCksbH1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiX3dpZHRoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMub3ZlcnZpZXdSdWxlcldpZHRofHwwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9yZWdpc3RlckRlY29yYXRpb25MaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIodGhpcy5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVnaXN0ZXJlZCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fcXVldWVSZWZyZXNoKHZvaWQgMCwhMCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVtb3ZlZCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fcXVldWVSZWZyZXNoKHZvaWQgMCwhMCl9KSkpfSx0LnByb3RvdHlwZS5fcmVnaXN0ZXJCdWZmZXJDaGFuZ2VMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX3F1ZXVlUmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbigpe2UuX2NhbnZhcy5zdHlsZS5kaXNwbGF5PWUuX2J1ZmZlclNlcnZpY2UuYnVmZmVyPT09ZS5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFsdD8ibm9uZSI6ImJsb2NrIn0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9idWZmZXJTZXJ2aWNlLm9uU2Nyb2xsKChmdW5jdGlvbigpe2UuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aCE9PWUuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5ub3JtYWwubGluZXMubGVuZ3RoJiYoZS5fcmVmcmVzaERyYXdIZWlnaHRDb25zdGFudHMoKSxlLl9yZWZyZXNoQ29sb3Jab25lUGFkZGluZygpKX0pKSl9LHQucHJvdG90eXBlLl9yZWdpc3RlckRpbWVuc2lvbkNoYW5nZUxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyKChmdW5jdGlvbigpe2UuX2NvbnRhaW5lckhlaWdodCYmZS5fY29udGFpbmVySGVpZ2h0PT09ZS5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHR8fChlLl9xdWV1ZVJlZnJlc2goITApLGUuX2NvbnRhaW5lckhlaWdodD1lLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKHQpeyJvdmVydmlld1J1bGVyV2lkdGgiPT09dCYmZS5fcXVldWVSZWZyZXNoKCEwKX0pKSksdGhpcy5yZWdpc3RlcigoMCxsLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikod2luZG93LCJyZXNpemUiLChmdW5jdGlvbigpe2UuX3F1ZXVlUmVmcmVzaCghMCl9KSkpLHRoaXMuX3F1ZXVlUmVmcmVzaCghMCl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5fY2FudmFzKXx8dm9pZCAwPT09dHx8dC5yZW1vdmUoKSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl9yZWZyZXNoRHJhd0NvbnN0YW50cz1mdW5jdGlvbigpe3ZhciBlPU1hdGguZmxvb3IodGhpcy5fY2FudmFzLndpZHRoLzMpLHQ9TWF0aC5jZWlsKHRoaXMuX2NhbnZhcy53aWR0aC8zKTtkLmZ1bGw9dGhpcy5fY2FudmFzLndpZHRoLGQubGVmdD1lLGQuY2VudGVyPXQsZC5yaWdodD1lLHRoaXMuX3JlZnJlc2hEcmF3SGVpZ2h0Q29uc3RhbnRzKCkscC5mdWxsPTAscC5sZWZ0PTAscC5jZW50ZXI9ZC5sZWZ0LHAucmlnaHQ9ZC5sZWZ0K2QuY2VudGVyfSx0LnByb3RvdHlwZS5fcmVmcmVzaERyYXdIZWlnaHRDb25zdGFudHM9ZnVuY3Rpb24oKXtfLmZ1bGw9TWF0aC5yb3VuZCgyKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTt2YXIgZT10aGlzLl9jYW52YXMuaGVpZ2h0L3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aCx0PU1hdGgucm91bmQoTWF0aC5tYXgoTWF0aC5taW4oZSwxMiksNikqd2luZG93LmRldmljZVBpeGVsUmF0aW8pO18ubGVmdD10LF8uY2VudGVyPXQsXy5yaWdodD10fSx0LnByb3RvdHlwZS5fcmVmcmVzaENvbG9yWm9uZVBhZGRpbmc9ZnVuY3Rpb24oKXt0aGlzLl9jb2xvclpvbmVTdG9yZS5zZXRQYWRkaW5nKHtmdWxsOk1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqXy5mdWxsKSxsZWZ0Ok1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqXy5sZWZ0KSxjZW50ZXI6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpfLmNlbnRlcikscmlnaHQ6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpfLnJpZ2h0KX0pLHRoaXMuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMubm9ybWFsLmxpbmVzLmxlbmd0aH0sdC5wcm90b3R5cGUuX3JlZnJlc2hDYW52YXNEaW1lbnNpb25zPWZ1bmN0aW9uKCl7dGhpcy5fY2FudmFzLnN0eWxlLndpZHRoPXRoaXMuX3dpZHRoKyJweCIsdGhpcy5fY2FudmFzLndpZHRoPU1hdGgucm91bmQodGhpcy5fd2lkdGgqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuX2NhbnZhcy5zdHlsZS5oZWlnaHQ9dGhpcy5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHQrInB4Iix0aGlzLl9jYW52YXMuaGVpZ2h0PU1hdGgucm91bmQodGhpcy5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHQqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuX3JlZnJlc2hEcmF3Q29uc3RhbnRzKCksdGhpcy5fcmVmcmVzaENvbG9yWm9uZVBhZGRpbmcoKX0sdC5wcm90b3R5cGUuX3JlZnJlc2hEZWNvcmF0aW9ucz1mdW5jdGlvbigpe3ZhciBlLHQscixpLG4sbzt0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zJiZ0aGlzLl9yZWZyZXNoQ2FudmFzRGltZW5zaW9ucygpLHRoaXMuX2N0eC5jbGVhclJlY3QoMCwwLHRoaXMuX2NhbnZhcy53aWR0aCx0aGlzLl9jYW52YXMuaGVpZ2h0KSx0aGlzLl9jb2xvclpvbmVTdG9yZS5jbGVhcigpO3RyeXtmb3IodmFyIHM9YSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5kZWNvcmF0aW9ucyksYz1zLm5leHQoKTshYy5kb25lO2M9cy5uZXh0KCkpe3ZhciBsPWMudmFsdWU7dGhpcy5fY29sb3Jab25lU3RvcmUuYWRkRGVjb3JhdGlvbihsKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7YyYmIWMuZG9uZSYmKHQ9cy5yZXR1cm4pJiZ0LmNhbGwocyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2N0eC5saW5lV2lkdGg9MTt2YXIgaD10aGlzLl9jb2xvclpvbmVTdG9yZS56b25lczt0cnl7Zm9yKHZhciB1PWEoaCksZj11Lm5leHQoKTshZi5kb25lO2Y9dS5uZXh0KCkpImZ1bGwiIT09KHA9Zi52YWx1ZSkucG9zaXRpb24mJnRoaXMuX3JlbmRlckNvbG9yWm9uZShwKX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtmJiYhZi5kb25lJiYoaT11LnJldHVybikmJmkuY2FsbCh1KX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19dHJ5e2Zvcih2YXIgXz1hKGgpLGQ9Xy5uZXh0KCk7IWQuZG9uZTtkPV8ubmV4dCgpKXt2YXIgcDsiZnVsbCI9PT0ocD1kLnZhbHVlKS5wb3NpdGlvbiYmdGhpcy5fcmVuZGVyQ29sb3Jab25lKHApfX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYobz1fLnJldHVybikmJm8uY2FsbChfKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz0hMSx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3I9ITF9LHQucHJvdG90eXBlLl9yZW5kZXJDb2xvclpvbmU9ZnVuY3Rpb24oZSl7dGhpcy5fY3R4LmZpbGxTdHlsZT1lLmNvbG9yLHRoaXMuX2N0eC5maWxsUmVjdChwW2UucG9zaXRpb258fCJmdWxsIl0sTWF0aC5yb3VuZCgodGhpcy5fY2FudmFzLmhlaWdodC0xKSooZS5zdGFydEJ1ZmZlckxpbmUvdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgpLV9bZS5wb3NpdGlvbnx8ImZ1bGwiXS8yKSxkW2UucG9zaXRpb258fCJmdWxsIl0sTWF0aC5yb3VuZCgodGhpcy5fY2FudmFzLmhlaWdodC0xKSooKGUuZW5kQnVmZmVyTGluZS1lLnN0YXJ0QnVmZmVyTGluZSkvdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgpK19bZS5wb3NpdGlvbnx8ImZ1bGwiXSkpfSx0LnByb3RvdHlwZS5fcXVldWVSZWZyZXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zPWV8fHRoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnMsdGhpcy5fc2hvdWxkVXBkYXRlQW5jaG9yPXR8fHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvcix2b2lkIDA9PT10aGlzLl9hbmltYXRpb25GcmFtZSYmKHRoaXMuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7ci5fcmVmcmVzaERlY29yYXRpb25zKCksci5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwfSkpKX0sbyhbcygyLGYuSUJ1ZmZlclNlcnZpY2UpLHMoMyxmLklEZWNvcmF0aW9uU2VydmljZSkscyg0LGguSVJlbmRlclNlcnZpY2UpLHMoNSxmLklPcHRpb25zU2VydmljZSldLHQpfSh1LkRpc3Bvc2FibGUpO3QuT3ZlcnZpZXdSdWxlclJlbmRlcmVyPXZ9LDI5NTA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db21wb3NpdGlvbkhlbHBlcj12b2lkIDA7dmFyIG89cig0NzI1KSxzPXIoMjU4NSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8pe3RoaXMuX3RleHRhcmVhPWUsdGhpcy5fY29tcG9zaXRpb25WaWV3PXQsdGhpcy5fYnVmZmVyU2VydmljZT1yLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWksdGhpcy5fY29yZVNlcnZpY2U9bix0aGlzLl9yZW5kZXJTZXJ2aWNlPW8sdGhpcy5faXNDb21wb3Npbmc9ITEsdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb249ITEsdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbj17c3RhcnQ6MCxlbmQ6MH0sdGhpcy5fZGF0YUFscmVhZHlTZW50PSIifXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzQ29tcG9zaW5nIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ29tcG9zaW5nfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNvbXBvc2l0aW9uc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLl9pc0NvbXBvc2luZz0hMCx0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0PXRoaXMuX3RleHRhcmVhLnZhbHVlLmxlbmd0aCx0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQ9IiIsdGhpcy5fZGF0YUFscmVhZHlTZW50PSIiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKX0sZS5wcm90b3R5cGUuY29tcG9zaXRpb251cGRhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQ9ZS5kYXRhLHRoaXMudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQ9dC5fdGV4dGFyZWEudmFsdWUubGVuZ3RofSksMCl9LGUucHJvdG90eXBlLmNvbXBvc2l0aW9uZW5kPWZ1bmN0aW9uKCl7dGhpcy5fZmluYWxpemVDb21wb3NpdGlvbighMCl9LGUucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5faXNDb21wb3Npbmd8fHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKXtpZigyMjk9PT1lLmtleUNvZGUpcmV0dXJuITE7aWYoMTY9PT1lLmtleUNvZGV8fDE3PT09ZS5rZXlDb2RlfHwxOD09PWUua2V5Q29kZSlyZXR1cm4hMTt0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKCExKX1yZXR1cm4gMjI5IT09ZS5rZXlDb2RlfHwodGhpcy5faGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzKCksITEpfSxlLnByb3RvdHlwZS5fZmluYWxpemVDb21wb3NpdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKSx0aGlzLl9pc0NvbXBvc2luZz0hMSxlKXt2YXIgcj17c3RhcnQ6dGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCxlbmQ6dGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmR9O3RoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5faXNTZW5kaW5nQ29tcG9zaXRpb24pe3QuX2lzU2VuZGluZ0NvbXBvc2l0aW9uPSExO3ZhciBlO3Iuc3RhcnQrPXQuX2RhdGFBbHJlYWR5U2VudC5sZW5ndGgsKGU9dC5faXNDb21wb3Npbmc/dC5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKHIuc3RhcnQsci5lbmQpOnQuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhyLnN0YXJ0KSkubGVuZ3RoPjAmJnQuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoZSwhMCl9fSksMCl9ZWxzZXt0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMTt2YXIgaT10aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcodGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCx0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZCk7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpLCEwKX19LGUucHJvdG90eXBlLl9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fdGV4dGFyZWEudmFsdWU7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZighZS5faXNDb21wb3Npbmcpe3ZhciByPWUuX3RleHRhcmVhLnZhbHVlLnJlcGxhY2UodCwiIik7ci5sZW5ndGg+MCYmKGUuX2RhdGFBbHJlYWR5U2VudD1yLGUuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQociwhMCkpfX0pLDApfSxlLnByb3RvdHlwZS51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5faXNDb21wb3Npbmcpe2lmKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmlzQ3Vyc29ySW5WaWV3cG9ydCl7dmFyIHI9TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSksaT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxuPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbz1yKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGg7dGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmxlZnQ9bysicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS50b3A9bisicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5oZWlnaHQ9aSsicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5saW5lSGVpZ2h0PWkrInB4Iix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udEZhbWlseT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHksdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRTaXplPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUrInB4Ijt2YXIgcz10aGlzLl9jb21wb3NpdGlvblZpZXcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy5fdGV4dGFyZWEuc3R5bGUubGVmdD1vKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wPW4rInB4Iix0aGlzLl90ZXh0YXJlYS5zdHlsZS53aWR0aD1NYXRoLm1heChzLndpZHRoLDEpKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KHMuaGVpZ2h0LDEpKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodD1zLmhlaWdodCsicHgifWV8fHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cyghMCl9KSwwKX19LGkoW24oMixzLklCdWZmZXJTZXJ2aWNlKSxuKDMscy5JT3B0aW9uc1NlcnZpY2UpLG4oNCxzLklDb3JlU2VydmljZSksbig1LG8uSVJlbmRlclNlcnZpY2UpXSxlKX0oKTt0LkNvbXBvc2l0aW9uSGVscGVyPWF9LDk4MDY6KGUsdCk9PntmdW5jdGlvbiByKGUsdCxyKXt2YXIgaT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ZS5nZXRDb21wdXRlZFN0eWxlKHIpLG89cGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLWxlZnQiKSkscz1wYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctdG9wIikpO3JldHVyblt0LmNsaWVudFgtaS5sZWZ0LW8sdC5jbGllbnRZLWkudG9wLXNdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmdldFJhd0J5dGVDb29yZHM9dC5nZXRDb29yZHM9dC5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudD12b2lkIDAsdC5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudD1yLHQuZ2V0Q29vcmRzPWZ1bmN0aW9uKGUsdCxpLG4sbyxzLGEsYyxsKXtpZihzKXt2YXIgaD1yKGUsdCxpKTtpZihoKXJldHVybiBoWzBdPU1hdGguY2VpbCgoaFswXSsobD9hLzI6MCkpL2EpLGhbMV09TWF0aC5jZWlsKGhbMV0vYyksaFswXT1NYXRoLm1pbihNYXRoLm1heChoWzBdLDEpLG4rKGw/MTowKSksaFsxXT1NYXRoLm1pbihNYXRoLm1heChoWzFdLDEpLG8pLGh9fSx0LmdldFJhd0J5dGVDb29yZHM9ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm57eDplWzBdKzMyLHk6ZVsxXSszMn19fSw5NTA0OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5tb3ZlVG9DZWxsU2VxdWVuY2U9dm9pZCAwO3ZhciBpPXIoMjU4NCk7ZnVuY3Rpb24gbihlLHQscixpKXt2YXIgbj1lLW8ocixlKSxhPXQtbyhyLHQpLGg9TWF0aC5hYnMobi1hKS1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPTAsbj1lLW8ocixlKSxhPXQtbyhyLHQpLGM9MDtjPE1hdGguYWJzKG4tYSk7YysrKXt2YXIgbD0iQSI9PT1zKGUsdCk/LTE6MSxoPXIuYnVmZmVyLmxpbmVzLmdldChuK2wqYyk7KG51bGw9PWg/dm9pZCAwOmguaXNXcmFwcGVkKSYmaSsrfXJldHVybiBpfShlLHQscik7cmV0dXJuIGwoaCxjKHMoZSx0KSxpKSl9ZnVuY3Rpb24gbyhlLHQpe2Zvcih2YXIgcj0wLGk9ZS5idWZmZXIubGluZXMuZ2V0KHQpLG49bnVsbD09aT92b2lkIDA6aS5pc1dyYXBwZWQ7biYmdD49MCYmdDxlLnJvd3M7KXIrKyxuPW51bGw9PShpPWUuYnVmZmVyLmxpbmVzLmdldCgtLXQpKT92b2lkIDA6aS5pc1dyYXBwZWQ7cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBlPnQ/IkEiOiJCIn1mdW5jdGlvbiBhKGUsdCxyLGksbixvKXtmb3IodmFyIHM9ZSxhPXQsYz0iIjtzIT09cnx8YSE9PWk7KXMrPW4/MTotMSxuJiZzPm8uY29scy0xPyhjKz1vLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYSwhMSxlLHMpLHM9MCxlPTAsYSsrKTohbiYmczwwJiYoYys9by5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGEsITEsMCxlKzEpLGU9cz1vLmNvbHMtMSxhLS0pO3JldHVybiBjK28uYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhhLCExLGUscyl9ZnVuY3Rpb24gYyhlLHQpe3ZhciByPXQ/Ik8iOiJbIjtyZXR1cm4gaS5DMC5FU0MrcitlfWZ1bmN0aW9uIGwoZSx0KXtlPU1hdGguZmxvb3IoZSk7Zm9yKHZhciByPSIiLGk9MDtpPGU7aSsrKXIrPXQ7cmV0dXJuIHJ9dC5tb3ZlVG9DZWxsU2VxdWVuY2U9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIHMsaD1yLmJ1ZmZlci54LHU9ci5idWZmZXIueTtpZighci5idWZmZXIuaGFzU2Nyb2xsYmFjaylyZXR1cm4gZnVuY3Rpb24oZSx0LHIsaSxzLGgpe3JldHVybiAwPT09bih0LGkscyxoKS5sZW5ndGg/IiI6bChhKGUsdCxlLHQtbyhzLHQpLCExLHMpLmxlbmd0aCxjKCJEIixoKSl9KGgsdSwwLHQscixpKStuKHUsdCxyLGkpK2Z1bmN0aW9uKGUsdCxyLGkscyxoKXt2YXIgdTt1PW4odCxpLHMsaCkubGVuZ3RoPjA/aS1vKHMsaSk6dDt2YXIgZj1pLF89ZnVuY3Rpb24oZSx0LHIsaSxzLGEpe3ZhciBjO3JldHVybiBjPW4ocixpLHMsYSkubGVuZ3RoPjA/aS1vKHMsaSk6dCxlPHImJmM8PWl8fGU+PXImJmM8aT8iQyI6IkQifShlLHQscixpLHMsaCk7cmV0dXJuIGwoYShlLHUscixmLCJDIj09PV8scykubGVuZ3RoLGMoXyxoKSl9KGgsdSxlLHQscixpKTtpZih1PT09dClyZXR1cm4gcz1oPmU/IkQiOiJDIixsKE1hdGguYWJzKGgtZSksYyhzLGkpKTtzPXU+dD8iRCI6IkMiO3ZhciBmPU1hdGguYWJzKHUtdCk7cmV0dXJuIGwoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5jb2xzLWV9KHU+dD9lOmgscikrKGYtMSkqci5jb2xzKzErKCh1PnQ/aDplKS0xKSxjKHMsaSkpfX0sNDM4OTpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4gaT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9LGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5UZXJtaW5hbD12b2lkIDA7dmFyIG89cigzMjM2KSxzPXIoOTA0MiksYT1yKDc5NzUpLGM9cig3MDkwKSxsPXIoNTc0MSksaD1yKDgyODUpLHU9WyJjb2xzIiwicm93cyJdLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7dGhpcy5fY29yZT1uZXcgby5UZXJtaW5hbChlKSx0aGlzLl9hZGRvbk1hbmFnZXI9bmV3IGwuQWRkb25NYW5hZ2VyLHRoaXMuX3B1YmxpY09wdGlvbnM9aSh7fSx0aGlzLl9jb3JlLm9wdGlvbnMpO3ZhciByPWZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jb3JlLm9wdGlvbnNbZV19LG49ZnVuY3Rpb24oZSxyKXt0Ll9jaGVja1JlYWRvbmx5T3B0aW9ucyhlKSx0Ll9jb3JlLm9wdGlvbnNbZV09cn07Zm9yKHZhciBzIGluIHRoaXMuX2NvcmUub3B0aW9ucyl7dmFyIGE9e2dldDpyLmJpbmQodGhpcyxzKSxzZXQ6bi5iaW5kKHRoaXMscyl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLl9wdWJsaWNPcHRpb25zLHMsYSl9fXJldHVybiBlLnByb3RvdHlwZS5fY2hlY2tSZWFkb25seU9wdGlvbnM9ZnVuY3Rpb24oZSl7aWYodS5pbmNsdWRlcyhlKSl0aHJvdyBuZXcgRXJyb3IoJ09wdGlvbiAiJytlKyciIGNhbiBvbmx5IGJlIHNldCBpbiB0aGUgY29uc3RydWN0b3InKX0sZS5wcm90b3R5cGUuX2NoZWNrUHJvcG9zZWRBcGk9ZnVuY3Rpb24oKXtpZighdGhpcy5fY29yZS5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmFsbG93UHJvcG9zZWRBcGkpdGhyb3cgbmV3IEVycm9yKCJZb3UgbXVzdCBzZXQgdGhlIGFsbG93UHJvcG9zZWRBcGkgb3B0aW9uIHRvIHRydWUgdG8gdXNlIHByb3Bvc2VkIEFQSSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQmVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uQmVsbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQmluYXJ5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkN1cnNvck1vdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkN1cnNvck1vdmV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkRhdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkRhdGF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbktleSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uS2V5fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25MaW5lRmVlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uTGluZUZlZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblJlbmRlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uUmVuZGVyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25SZXNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vblJlc2l6ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uU2Nyb2xsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25TY3JvbGx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblNlbGVjdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uU2VsZWN0aW9uQ2hhbmdlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25UaXRsZUNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uVGl0bGVDaGFuZ2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbldyaXRlUGFyc2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25Xcml0ZVBhcnNlZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImVsZW1lbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5lbGVtZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwicGFyc2VyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9wYXJzZXJ8fCh0aGlzLl9wYXJzZXI9bmV3IGEuUGFyc2VyQXBpKHRoaXMuX2NvcmUpKSx0aGlzLl9wYXJzZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ1bmljb2RlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSxuZXcgYy5Vbmljb2RlQXBpKHRoaXMuX2NvcmUpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidGV4dGFyZWEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS50ZXh0YXJlYX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInJvd3MiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5yb3dzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY29scyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLmNvbHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJidWZmZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2J1ZmZlcnx8KHRoaXMuX2J1ZmZlcj1uZXcgaC5CdWZmZXJOYW1lc3BhY2VBcGkodGhpcy5fY29yZSkpLHRoaXMuX2J1ZmZlcn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1hcmtlcnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUubWFya2Vyc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1vZGVzIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29yZS5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMsdD0ibm9uZSI7c3dpdGNoKHRoaXMuX2NvcmUuY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCl7Y2FzZSJYMTAiOnQ9IngxMCI7YnJlYWs7Y2FzZSJWVDIwMCI6dD0idnQyMDAiO2JyZWFrO2Nhc2UiRFJBRyI6dD0iZHJhZyI7YnJlYWs7Y2FzZSJBTlkiOnQ9ImFueSJ9cmV0dXJue2FwcGxpY2F0aW9uQ3Vyc29yS2V5c01vZGU6ZS5hcHBsaWNhdGlvbkN1cnNvcktleXMsYXBwbGljYXRpb25LZXlwYWRNb2RlOmUuYXBwbGljYXRpb25LZXlwYWQsYnJhY2tldGVkUGFzdGVNb2RlOmUuYnJhY2tldGVkUGFzdGVNb2RlLGluc2VydE1vZGU6dGhpcy5fY29yZS5jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlLG1vdXNlVHJhY2tpbmdNb2RlOnQsb3JpZ2luTW9kZTplLm9yaWdpbixyZXZlcnNlV3JhcGFyb3VuZE1vZGU6ZS5yZXZlcnNlV3JhcGFyb3VuZCxzZW5kRm9jdXNNb2RlOmUuc2VuZEZvY3VzLHdyYXBhcm91bmRNb2RlOmUud3JhcGFyb3VuZH19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvcHRpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3B1YmxpY09wdGlvbnN9LHNldDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLl9wdWJsaWNPcHRpb25zW3RdPWVbdF19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuYmx1cj1mdW5jdGlvbigpe3RoaXMuX2NvcmUuYmx1cigpfSxlLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3RoaXMuX2NvcmUuZm9jdXMoKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSx0KSx0aGlzLl9jb3JlLnJlc2l6ZShlLHQpfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUub3BlbihlKX0sZS5wcm90b3R5cGUuYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUuYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpfSxlLnByb3RvdHlwZS5yZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUucmVnaXN0ZXJMaW5rTWF0Y2hlcihlLHQscil9LGUucHJvdG90eXBlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlKXt0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5kZXJlZ2lzdGVyTGlua01hdGNoZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5yZWdpc3RlckxpbmtQcm92aWRlcihlKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGUpfSxlLnByb3RvdHlwZS5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyTWFya2VyPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5hZGRNYXJrZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxyLGk7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl92ZXJpZnlQb3NpdGl2ZUludGVnZXJzKG51bGwhPT0odD1lLngpJiZ2b2lkIDAhPT10P3Q6MCxudWxsIT09KHI9ZS53aWR0aCkmJnZvaWQgMCE9PXI/cjowLG51bGwhPT0oaT1lLmhlaWdodCkmJnZvaWQgMCE9PWk/aTowKSx0aGlzLl9jb3JlLnJlZ2lzdGVyRGVjb3JhdGlvbihlKX0sZS5wcm90b3R5cGUuYWRkTWFya2VyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlZ2lzdGVyTWFya2VyKGUpfSxlLnByb3RvdHlwZS5oYXNTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5oYXNTZWxlY3Rpb24oKX0sZS5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQsciksdGhpcy5fY29yZS5zZWxlY3QoZSx0LHIpfSxlLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb24oKX0sZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpfSxlLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuX2NvcmUuY2xlYXJTZWxlY3Rpb24oKX0sZS5wcm90b3R5cGUuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5zZWxlY3RBbGwoKX0sZS5wcm90b3R5cGUuc2VsZWN0TGluZXM9ZnVuY3Rpb24oZSx0KXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQpLHRoaXMuX2NvcmUuc2VsZWN0TGluZXMoZSx0KX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2FkZG9uTWFuYWdlci5kaXNwb3NlKCksdGhpcy5fY29yZS5kaXNwb3NlKCl9LGUucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsTGluZXMoZSl9LGUucHJvdG90eXBlLnNjcm9sbFBhZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsUGFnZXMoZSl9LGUucHJvdG90eXBlLnNjcm9sbFRvVG9wPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5zY3JvbGxUb1RvcCgpfSxlLnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbT1mdW5jdGlvbigpe3RoaXMuX2NvcmUuc2Nyb2xsVG9Cb3R0b20oKX0sZS5wcm90b3R5cGUuc2Nyb2xsVG9MaW5lPWZ1bmN0aW9uKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsVG9MaW5lKGUpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2NvcmUuY2xlYXIoKX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb3JlLndyaXRlKGUsdCl9LGUucHJvdG90eXBlLndyaXRlVXRmOD1mdW5jdGlvbihlLHQpe3RoaXMuX2NvcmUud3JpdGUoZSx0KX0sZS5wcm90b3R5cGUud3JpdGVsbj1mdW5jdGlvbihlLHQpe3RoaXMuX2NvcmUud3JpdGUoZSksdGhpcy5fY29yZS53cml0ZSgiXHJcbiIsdCl9LGUucHJvdG90eXBlLnBhc3RlPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUucGFzdGUoZSl9LGUucHJvdG90eXBlLmdldE9wdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29yZS5vcHRpb25zU2VydmljZS5nZXRPcHRpb24oZSl9LGUucHJvdG90eXBlLnNldE9wdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMuX2NoZWNrUmVhZG9ubHlPcHRpb25zKGUpLHRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2Uuc2V0T3B0aW9uKGUsdCl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSx0KXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQpLHRoaXMuX2NvcmUucmVmcmVzaChlLHQpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2NvcmUucmVzZXQoKX0sZS5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmNsZWFyVGV4dHVyZUF0bGFzKCl9LGUucHJvdG90eXBlLmxvYWRBZGRvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWRkb25NYW5hZ2VyLmxvYWRBZGRvbih0aGlzLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwic3RyaW5ncyIse2dldDpmdW5jdGlvbigpe3JldHVybiBzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl92ZXJpZnlJbnRlZ2Vycz1mdW5jdGlvbigpe2Zvcih2YXIgZSx0LHI9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpXT1hcmd1bWVudHNbaV07dHJ5e2Zvcih2YXIgbz1uKHIpLHM9by5uZXh0KCk7IXMuZG9uZTtzPW8ubmV4dCgpKXt2YXIgYT1zLnZhbHVlO2lmKGE9PT0xLzB8fGlzTmFOKGEpfHxhJTEhPTApdGhyb3cgbmV3IEVycm9yKCJUaGlzIEFQSSBvbmx5IGFjY2VwdHMgaW50ZWdlcnMiKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHQ9by5yZXR1cm4pJiZ0LmNhbGwobyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sZS5wcm90b3R5cGUuX3ZlcmlmeVBvc2l0aXZlSW50ZWdlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxyPVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaV09YXJndW1lbnRzW2ldO3RyeXtmb3IodmFyIG89bihyKSxzPW8ubmV4dCgpOyFzLmRvbmU7cz1vLm5leHQoKSl7dmFyIGE9cy52YWx1ZTtpZihhJiYoYT09PTEvMHx8aXNOYU4oYSl8fGElMSE9MHx8YTwwKSl0aHJvdyBuZXcgRXJyb3IoIlRoaXMgQVBJIG9ubHkgYWNjZXB0cyBwb3NpdGl2ZSBpbnRlZ2VycyIpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYodD1vLnJldHVybikmJnQuY2FsbChvKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSxlfSgpO3QuVGVybWluYWw9Zn0sMTU0NjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJhc2VSZW5kZXJMYXllcj12b2lkIDA7dmFyIG49cig2NDMpLG89cig4ODAzKSxzPXIoMTQyMCksYT1yKDM3MzQpLGM9cigxNzUyKSxsPXIoODA1NSksaD1yKDk2MzEpLHU9cig4OTc4KSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4sbyxzLGEsYyl7dGhpcy5fY29udGFpbmVyPWUsdGhpcy5fYWxwaGE9aSx0aGlzLl9jb2xvcnM9bix0aGlzLl9yZW5kZXJlcklkPW8sdGhpcy5fYnVmZmVyU2VydmljZT1zLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWEsdGhpcy5fZGVjb3JhdGlvblNlcnZpY2U9Yyx0aGlzLl9zY2FsZWRDaGFyV2lkdGg9MCx0aGlzLl9zY2FsZWRDaGFySGVpZ2h0PTAsdGhpcy5fc2NhbGVkQ2VsbFdpZHRoPTAsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodD0wLHRoaXMuX3NjYWxlZENoYXJMZWZ0PTAsdGhpcy5fc2NhbGVkQ2hhclRvcD0wLHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9ITEsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllcj17Y2hhcnM6IiIsY29kZTowLGJnOjAsZmc6MCxib2xkOiExLGRpbTohMSxpdGFsaWM6ITF9LHRoaXMuX2NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSx0aGlzLl9jYW52YXMuY2xhc3NMaXN0LmFkZCgieHRlcm0tIit0KyItbGF5ZXIiKSx0aGlzLl9jYW52YXMuc3R5bGUuekluZGV4PXIudG9TdHJpbmcoKSx0aGlzLl9pbml0Q2FudmFzKCksdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NhbnZhcyl9cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZTsoMCxoLnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9jYW52YXMpLG51bGw9PT0oZT10aGlzLl9jaGFyQXRsYXMpfHx2b2lkIDA9PT1lfHxlLmRpc3Bvc2UoKX0sZS5wcm90b3R5cGUuX2luaXRDYW52YXM9ZnVuY3Rpb24oKXt0aGlzLl9jdHg9KDAsYy50aHJvd0lmRmFsc3kpKHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KCIyZCIse2FscGhhOnRoaXMuX2FscGhhfSkpLHRoaXMuX2FscGhhfHx0aGlzLl9jbGVhckFsbCgpfSxlLnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUub25HcmlkQ2hhbmdlZD1mdW5jdGlvbihlLHQpe30sZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5fc2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLl9zZWxlY3Rpb25FbmQ9dCx0aGlzLl9jb2x1bW5TZWxlY3RNb2RlPXJ9LGUucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKGUpfSxlLnByb3RvdHlwZS5fc2V0VHJhbnNwYXJlbmN5PWZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLl9hbHBoYSl7dmFyIHQ9dGhpcy5fY2FudmFzO3RoaXMuX2FscGhhPWUsdGhpcy5fY2FudmFzPXRoaXMuX2NhbnZhcy5jbG9uZU5vZGUoKSx0aGlzLl9pbml0Q2FudmFzKCksdGhpcy5fY29udGFpbmVyLnJlcGxhY2VDaGlsZCh0aGlzLl9jYW52YXMsdCksdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0aGlzLl9jb2xvcnMpLHRoaXMub25HcmlkQ2hhbmdlZCgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKX19LGUucHJvdG90eXBlLl9yZWZyZXNoQ2hhckF0bGFzPWZ1bmN0aW9uKGUpe3RoaXMuX3NjYWxlZENoYXJXaWR0aDw9MCYmdGhpcy5fc2NhbGVkQ2hhckhlaWdodDw9MHx8KHRoaXMuX2NoYXJBdGxhcz0oMCxzLmFjcXVpcmVDaGFyQXRsYXMpKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMsdGhpcy5fcmVuZGVyZXJJZCxlLHRoaXMuX3NjYWxlZENoYXJXaWR0aCx0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KSx0aGlzLl9jaGFyQXRsYXMud2FybVVwKCkpfSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSl7dGhpcy5fc2NhbGVkQ2VsbFdpZHRoPWUuc2NhbGVkQ2VsbFdpZHRoLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQ9ZS5zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX3NjYWxlZENoYXJXaWR0aD1lLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9zY2FsZWRDaGFySGVpZ2h0PWUuc2NhbGVkQ2hhckhlaWdodCx0aGlzLl9zY2FsZWRDaGFyTGVmdD1lLnNjYWxlZENoYXJMZWZ0LHRoaXMuX3NjYWxlZENoYXJUb3A9ZS5zY2FsZWRDaGFyVG9wLHRoaXMuX2NhbnZhcy53aWR0aD1lLnNjYWxlZENhbnZhc1dpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQ9ZS5zY2FsZWRDYW52YXNIZWlnaHQsdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoPWUuY2FudmFzV2lkdGgrInB4Iix0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0PWUuY2FudmFzSGVpZ2h0KyJweCIsdGhpcy5fYWxwaGF8fHRoaXMuX2NsZWFyQWxsKCksdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0aGlzLl9jb2xvcnMpfSxlLnByb3RvdHlwZS5jbGVhclRleHR1cmVBdGxhcz1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9jaGFyQXRsYXMpfHx2b2lkIDA9PT1lfHxlLmNsZWFyKCl9LGUucHJvdG90eXBlLl9maWxsQ2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQpfSxlLnByb3RvdHlwZS5fZmlsbE1pZGRsZUxpbmVBdENlbGxzPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0xKTt2YXIgaT1NYXRoLmNlaWwoLjUqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7dGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLCh0KzEpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQtaS13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyl9LGUucHJvdG90eXBlLl9maWxsQm90dG9tTGluZUF0Q2VsbHM9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPTEpLHRoaXMuX2N0eC5maWxsUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCwodCsxKSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLTEscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsd2luZG93LmRldmljZVBpeGVsUmF0aW8pfSxlLnByb3RvdHlwZS5fZmlsbExlZnRMaW5lQXRDZWxsPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguZmlsbFJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdCp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKnIsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCl9LGUucHJvdG90eXBlLl9zdHJva2VSZWN0QXRDZWxsPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuX2N0eC5saW5lV2lkdGg9d2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5fY3R4LnN0cm9rZVJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgrd2luZG93LmRldmljZVBpeGVsUmF0aW8vMix0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQrd2luZG93LmRldmljZVBpeGVsUmF0aW8vMixyKnRoaXMuX3NjYWxlZENlbGxXaWR0aC13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQtd2luZG93LmRldmljZVBpeGVsUmF0aW8pfSxlLnByb3RvdHlwZS5fY2xlYXJBbGw9ZnVuY3Rpb24oKXt0aGlzLl9hbHBoYT90aGlzLl9jdHguY2xlYXJSZWN0KDAsMCx0aGlzLl9jYW52YXMud2lkdGgsdGhpcy5fY2FudmFzLmhlaWdodCk6KHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzLHRoaXMuX2N0eC5maWxsUmVjdCgwLDAsdGhpcy5fY2FudmFzLndpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQpKX0sZS5wcm90b3R5cGUuX2NsZWFyQ2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fYWxwaGE/dGhpcy5fY3R4LmNsZWFyUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsaSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KToodGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3MsdGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQpKX0sZS5wcm90b3R5cGUuX2ZpbGxDaGFyVHJ1ZUNvbG9yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguZm9udD10aGlzLl9nZXRGb250KCExLCExKSx0aGlzLl9jdHgudGV4dEJhc2VsaW5lPW8uVEVYVF9CQVNFTElORSx0aGlzLl9jbGlwUm93KHIpO3ZhciBpPSExOyExIT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXN0b21HbHlwaHMmJihpPSgwLHUudHJ5RHJhd0N1c3RvbUNoYXIpKHRoaXMuX2N0eCxlLmdldENoYXJzKCksdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX3NjYWxlZENlbGxXaWR0aCx0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSksaXx8dGhpcy5fY3R4LmZpbGxUZXh0KGUuZ2V0Q2hhcnMoKSx0KnRoaXMuX3NjYWxlZENlbGxXaWR0aCt0aGlzLl9zY2FsZWRDaGFyTGVmdCxyKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQrdGhpcy5fc2NhbGVkQ2hhclRvcCt0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KX0sZS5wcm90b3R5cGUuX2RyYXdDaGFycz1mdW5jdGlvbihlLHQscil7dmFyIHMsYSxjLGw9dGhpcy5fZ2V0Q29udHJhc3RDb2xvcihlLHQscik7aWYobHx8ZS5pc0ZnUkdCKCl8fGUuaXNCZ1JHQigpKXRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKGUsdCxyLGwpO2Vsc2V7dmFyIGgsdTtlLmlzSW52ZXJzZSgpPyhoPWUuaXNCZ0RlZmF1bHQoKT9vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I6ZS5nZXRCZ0NvbG9yKCksdT1lLmlzRmdEZWZhdWx0KCk/by5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SOmUuZ2V0RmdDb2xvcigpKToodT1lLmlzQmdEZWZhdWx0KCk/bi5ERUZBVUxUX0NPTE9SOmUuZ2V0QmdDb2xvcigpLGg9ZS5pc0ZnRGVmYXVsdCgpP24uREVGQVVMVF9DT0xPUjplLmdldEZnQ29sb3IoKSksaCs9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmZS5pc0JvbGQoKSYmaDw4Pzg6MCx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNoYXJzPWUuZ2V0Q2hhcnMoKXx8bi5XSElURVNQQUNFX0NFTExfQ0hBUix0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNvZGU9ZS5nZXRDb2RlKCl8fG4uV0hJVEVTUEFDRV9DRUxMX0NPREUsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5iZz11LHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuZmc9aCx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmJvbGQ9ISFlLmlzQm9sZCgpLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuZGltPSEhZS5pc0RpbSgpLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuaXRhbGljPSEhZS5pc0l0YWxpYygpO3ZhciBmPSExO3RyeXtmb3IodmFyIF89aSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5nZXREZWNvcmF0aW9uc0F0Q2VsbCh0LHIpKSxkPV8ubmV4dCgpOyFkLmRvbmU7ZD1fLm5leHQoKSl7dmFyIHA9ZC52YWx1ZTtpZihwLmJhY2tncm91bmRDb2xvclJHQnx8cC5mb3JlZ3JvdW5kQ29sb3JSR0Ipe2Y9ITA7YnJlYWt9fX1jYXRjaChlKXtzPXtlcnJvcjplfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYoYT1fLnJldHVybikmJmEuY2FsbChfKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19IWYmJihudWxsPT09KGM9dGhpcy5fY2hhckF0bGFzKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5kcmF3KHRoaXMuX2N0eCx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoK3RoaXMuX3NjYWxlZENoYXJMZWZ0LHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCt0aGlzLl9zY2FsZWRDaGFyVG9wKSl8fHRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKGUsdCxyKX19LGUucHJvdG90eXBlLl9kcmF3VW5jYWNoZWRDaGFycz1mdW5jdGlvbihlLHQscixpKXtpZih0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5mb250PXRoaXMuX2dldEZvbnQoISFlLmlzQm9sZCgpLCEhZS5pc0l0YWxpYygpKSx0aGlzLl9jdHgudGV4dEJhc2VsaW5lPW8uVEVYVF9CQVNFTElORSxlLmlzSW52ZXJzZSgpKWlmKGkpdGhpcy5fY3R4LmZpbGxTdHlsZT1pLmNzcztlbHNlIGlmKGUuaXNCZ0RlZmF1bHQoKSl0aGlzLl9jdHguZmlsbFN0eWxlPWwuY29sb3Iub3BhcXVlKHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kKS5jc3M7ZWxzZSBpZihlLmlzQmdSR0IoKSl0aGlzLl9jdHguZmlsbFN0eWxlPSJyZ2IoIithLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEJnQ29sb3IoKSkuam9pbigiLCIpKyIpIjtlbHNle3ZhciBuPWUuZ2V0QmdDb2xvcigpO3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJm48OCYmKG4rPTgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmFuc2lbbl0uY3NzfWVsc2UgaWYoaSl0aGlzLl9jdHguZmlsbFN0eWxlPWkuY3NzO2Vsc2UgaWYoZS5pc0ZnRGVmYXVsdCgpKXRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO2Vsc2UgaWYoZS5pc0ZnUkdCKCkpdGhpcy5fY3R4LmZpbGxTdHlsZT0icmdiKCIrYS5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRGZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI7ZWxzZXt2YXIgcz1lLmdldEZnQ29sb3IoKTt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZzPDgmJihzKz04KSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5hbnNpW3NdLmNzc310aGlzLl9jbGlwUm93KHIpLGUuaXNEaW0oKSYmKHRoaXMuX2N0eC5nbG9iYWxBbHBoYT1vLkRJTV9PUEFDSVRZKTt2YXIgYz0hMTshMSE9PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3VzdG9tR2x5cGhzJiYoYz0oMCx1LnRyeURyYXdDdXN0b21DaGFyKSh0aGlzLl9jdHgsZS5nZXRDaGFycygpLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCx0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCkpLGN8fHRoaXMuX2N0eC5maWxsVGV4dChlLmdldENoYXJzKCksdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgrdGhpcy5fc2NhbGVkQ2hhckxlZnQscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0K3RoaXMuX3NjYWxlZENoYXJUb3ArdGhpcy5fc2NhbGVkQ2hhckhlaWdodCksdGhpcy5fY3R4LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX2NsaXBSb3c9ZnVuY3Rpb24oZSl7dGhpcy5fY3R4LmJlZ2luUGF0aCgpLHRoaXMuX2N0eC5yZWN0KDAsZSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCksdGhpcy5fY3R4LmNsaXAoKX0sZS5wcm90b3R5cGUuX2dldEZvbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4odD8iaXRhbGljIjoiIikrIiAiKyhlP3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodEJvbGQ6dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0KSsiICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbysicHggIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHl9LGUucHJvdG90eXBlLl9nZXRDb250cmFzdENvbG9yPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLHMsYSxoPSExO3RyeXtmb3IodmFyIHU9aSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5nZXREZWNvcmF0aW9uc0F0Q2VsbCh0LHIpKSxmPXUubmV4dCgpOyFmLmRvbmU7Zj11Lm5leHQoKSl7dmFyIF89Zi52YWx1ZTsidG9wIiE9PV8ub3B0aW9ucy5sYXllciYmaHx8KF8uYmFja2dyb3VuZENvbG9yUkdCJiYocz1fLmJhY2tncm91bmRDb2xvclJHQi5yZ2JhKSxfLmZvcmVncm91bmRDb2xvclJHQiYmKGE9Xy5mb3JlZ3JvdW5kQ29sb3JSR0IucmdiYSksaD0idG9wIj09PV8ub3B0aW9ucy5sYXllcil9fWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2YmJiFmLmRvbmUmJihvPXUucmV0dXJuKSYmby5jYWxsKHUpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1pZihofHx0aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCYmdGhpcy5faXNDZWxsSW5TZWxlY3Rpb24odCxyKSYmKGE9dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQucmdiYSksc3x8YXx8MSE9PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8mJiEoMCxjLmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHMpKGUuZ2V0Q29kZSgpKSl7aWYoIXMmJiFhKXt2YXIgZD10aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDb2xvcihlLmJnLGUuZmcpO2lmKHZvaWQgMCE9PWQpcmV0dXJuIGR8fHZvaWQgMH12YXIgcD1lLmdldEZnQ29sb3IoKSx2PWUuZ2V0RmdDb2xvck1vZGUoKSx5PWUuZ2V0QmdDb2xvcigpLGc9ZS5nZXRCZ0NvbG9yTW9kZSgpLG09ISFlLmlzSW52ZXJzZSgpLGI9ISFlLmlzSW52ZXJzZSgpO2lmKG0pe3ZhciBTPXA7cD15LHk9Uzt2YXIgQz12O3Y9ZyxnPUN9dmFyIHc9dGhpcy5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhKHZvaWQgMCE9PXM/NTAzMzE2NDg6ZyxudWxsIT1zP3M6eSxtKSxMPXRoaXMuX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYSh2LHAsbSxiKSxFPWwucmdiYS5lbnN1cmVDb250cmFzdFJhdGlvKG51bGwhPXM/czp3LG51bGwhPWE/YTpMLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8pO2lmKCFFKXtpZighYSlyZXR1cm4gdm9pZCB0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDb2xvcihlLmJnLGUuZmcsbnVsbCk7RT1hfXZhciB4PXtjc3M6bC5jaGFubmVscy50b0NzcyhFPj4yNCYyNTUsRT4+MTYmMjU1LEU+PjgmMjU1KSxyZ2JhOkV9O3JldHVybiBzfHxhfHx0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDb2xvcihlLmJnLGUuZmcseCkseH19LGUucHJvdG90eXBlLl9yZXNvbHZlQmFja2dyb3VuZFJnYmE9ZnVuY3Rpb24oZSx0LHIpe3N3aXRjaChlKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIHRoaXMuX2NvbG9ycy5hbnNpW3RdLnJnYmE7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gdDw8ODtkZWZhdWx0OnJldHVybiByP3RoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLnJnYmE6dGhpcy5fY29sb3JzLmJhY2tncm91bmQucmdiYX19LGUucHJvdG90eXBlLl9yZXNvbHZlRm9yZWdyb3VuZFJnYmE9ZnVuY3Rpb24oZSx0LHIsaSl7c3dpdGNoKGUpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmaSYmdDw4JiYodCs9OCksdGhpcy5fY29sb3JzLmFuc2lbdF0ucmdiYTtjYXNlIDUwMzMxNjQ4OnJldHVybiB0PDw4O2RlZmF1bHQ6cmV0dXJuIHI/dGhpcy5fY29sb3JzLmJhY2tncm91bmQucmdiYTp0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5yZ2JhfX0sZS5wcm90b3R5cGUuX2lzQ2VsbEluU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fc2VsZWN0aW9uU3RhcnQsaT10aGlzLl9zZWxlY3Rpb25FbmQ7cmV0dXJuISghcnx8IWkpJiYodGhpcy5fY29sdW1uU2VsZWN0TW9kZT9lPj1yWzBdJiZ0Pj1yWzFdJiZlPGlbMF0mJnQ8aVsxXTp0PnJbMV0mJnQ8aVsxXXx8clsxXT09PWlbMV0mJnQ9PT1yWzFdJiZlPj1yWzBdJiZlPGlbMF18fHJbMV08aVsxXSYmdD09PWlbMV0mJmU8aVswXXx8clsxXTxpWzFdJiZ0PT09clsxXSYmZT49clswXSl9LGV9KCk7dC5CYXNlUmVuZGVyTGF5ZXI9Zn0sMjUxMjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DdXJzb3JSZW5kZXJMYXllcj12b2lkIDA7dmFyIGE9cigxNTQ2KSxjPXIoNTExKSxsPXIoMjU4NSksaD1yKDQ3MjUpLHU9NjAwLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGwsaCx1KXt2YXIgZj1lLmNhbGwodGhpcyx0LCJjdXJzb3IiLHIsITAsaSxuLHMsYSx1KXx8dGhpcztyZXR1cm4gZi5fb25SZXF1ZXN0UmVkcmF3PW8sZi5fY29yZVNlcnZpY2U9bCxmLl9jb3JlQnJvd3NlclNlcnZpY2U9aCxmLl9jZWxsPW5ldyBjLkNlbGxEYXRhLGYuX3N0YXRlPXt4OjAseTowLGlzRm9jdXNlZDohMSxzdHlsZToiIix3aWR0aDowfSxmLl9jdXJzb3JSZW5kZXJlcnM9e2JhcjpmLl9yZW5kZXJCYXJDdXJzb3IuYmluZChmKSxibG9jazpmLl9yZW5kZXJCbG9ja0N1cnNvci5iaW5kKGYpLHVuZGVybGluZTpmLl9yZW5kZXJVbmRlcmxpbmVDdXJzb3IuYmluZChmKX0sZn1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciYmKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmRpc3Bvc2UoKSx0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj12b2lkIDApLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCksdGhpcy5fc3RhdGU9e3g6MCx5OjAsaXNGb2N1c2VkOiExLHN0eWxlOiIiLHdpZHRoOjB9fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3ZhciBlO3RoaXMuX2NsZWFyQ3Vyc29yKCksbnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKSx0aGlzLm9uT3B0aW9uc0NoYW5nZWQoKX0sdC5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5wYXVzZSgpLHRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHtzdGFydDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGVuZDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSl9LHQucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpfHx2b2lkIDA9PT1lfHxlLnJlc3VtZSgpLHRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHtzdGFydDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGVuZDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSl9LHQucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JCbGluaz90aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcnx8KHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyPW5ldyBfKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQsKGZ1bmN0aW9uKCl7dC5fcmVuZGVyKCEwKX0pKSk6KG51bGw9PT0oZT10aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcil8fHZvaWQgMD09PWV8fGUuZGlzcG9zZSgpLHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyPXZvaWQgMCksdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoe3N0YXJ0OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksZW5kOnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnl9KX0sdC5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKX0sdC5wcm90b3R5cGUub25HcmlkQ2hhbmdlZD1mdW5jdGlvbihlLHQpeyF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcnx8dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuaXNQYXVzZWQ/dGhpcy5fcmVuZGVyKCExKTp0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKX0sdC5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbihlKXtpZih0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkJiYhdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4pe3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkscj10LXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO2lmKHI8MHx8cj49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKXRoaXMuX2NsZWFyQ3Vyc29yKCk7ZWxzZXt2YXIgaT1NYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKTtpZih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodCkubG9hZENlbGwoaSx0aGlzLl9jZWxsKSx2b2lkIDAhPT10aGlzLl9jZWxsLmNvbnRlbnQpe2lmKCF0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkKXt0aGlzLl9jbGVhckN1cnNvcigpLHRoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzczt2YXIgbj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlO3JldHVybiBuJiYiYmxvY2siIT09bj90aGlzLl9jdXJzb3JSZW5kZXJlcnNbbl0oaSxyLHRoaXMuX2NlbGwpOnRoaXMuX3JlbmRlckJsdXJDdXJzb3IoaSxyLHRoaXMuX2NlbGwpLHRoaXMuX2N0eC5yZXN0b3JlKCksdGhpcy5fc3RhdGUueD1pLHRoaXMuX3N0YXRlLnk9cix0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQ9ITEsdGhpcy5fc3RhdGUuc3R5bGU9bix2b2lkKHRoaXMuX3N0YXRlLndpZHRoPXRoaXMuX2NlbGwuZ2V0V2lkdGgoKSl9aWYoIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyfHx0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc0N1cnNvclZpc2libGUpe2lmKHRoaXMuX3N0YXRlKXtpZih0aGlzLl9zdGF0ZS54PT09aSYmdGhpcy5fc3RhdGUueT09PXImJnRoaXMuX3N0YXRlLmlzRm9jdXNlZD09PXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQmJnRoaXMuX3N0YXRlLnN0eWxlPT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZSYmdGhpcy5fc3RhdGUud2lkdGg9PT10aGlzLl9jZWxsLmdldFdpZHRoKCkpcmV0dXJuO3RoaXMuX2NsZWFyQ3Vyc29yKCl9dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdXJzb3JSZW5kZXJlcnNbdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZXx8ImJsb2NrIl0oaSxyLHRoaXMuX2NlbGwpLHRoaXMuX2N0eC5yZXN0b3JlKCksdGhpcy5fc3RhdGUueD1pLHRoaXMuX3N0YXRlLnk9cix0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQ9ITEsdGhpcy5fc3RhdGUuc3R5bGU9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZSx0aGlzLl9zdGF0ZS53aWR0aD10aGlzLl9jZWxsLmdldFdpZHRoKCl9ZWxzZSB0aGlzLl9jbGVhckN1cnNvcigpfX19ZWxzZSB0aGlzLl9jbGVhckN1cnNvcigpfSx0LnByb3RvdHlwZS5fY2xlYXJDdXJzb3I9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZSYmKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvPDE/dGhpcy5fY2xlYXJBbGwoKTp0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngsdGhpcy5fc3RhdGUueSx0aGlzLl9zdGF0ZS53aWR0aCwxKSx0aGlzLl9zdGF0ZT17eDowLHk6MCxpc0ZvY3VzZWQ6ITEsc3R5bGU6IiIsd2lkdGg6MH0pfSx0LnByb3RvdHlwZS5fcmVuZGVyQmFyQ3Vyc29yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3MsdGhpcy5fZmlsbExlZnRMaW5lQXRDZWxsKGUsdCx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvcldpZHRoKSx0aGlzLl9jdHgucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fcmVuZGVyQmxvY2tDdXJzb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzcyx0aGlzLl9maWxsQ2VsbHMoZSx0LHIuZ2V0V2lkdGgoKSwxKSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzLHRoaXMuX2ZpbGxDaGFyVHJ1ZUNvbG9yKHIsZSx0KSx0aGlzLl9jdHgucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3MsdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUsdCksdGhpcy5fY3R4LnJlc3RvcmUoKX0sdC5wcm90b3R5cGUuX3JlbmRlckJsdXJDdXJzb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LnN0cm9rZVN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzLHRoaXMuX3N0cm9rZVJlY3RBdENlbGwoZSx0LHIuZ2V0V2lkdGgoKSwxKSx0aGlzLl9jdHgucmVzdG9yZSgpfSxvKFtzKDUsbC5JQnVmZmVyU2VydmljZSkscyg2LGwuSU9wdGlvbnNTZXJ2aWNlKSxzKDcsbC5JQ29yZVNlcnZpY2UpLHMoOCxoLklDb3JlQnJvd3NlclNlcnZpY2UpLHMoOSxsLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShhLkJhc2VSZW5kZXJMYXllcik7dC5DdXJzb3JSZW5kZXJMYXllcj1mO3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX3JlbmRlckNhbGxiYWNrPXQsdGhpcy5pc0N1cnNvclZpc2libGU9ITAsZSYmdGhpcy5fcmVzdGFydEludGVydmFsKCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNQYXVzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0fHx0aGlzLl9ibGlua0ludGVydmFsKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYmxpbmtJbnRlcnZhbCYmKHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpLHRoaXMuX2JsaW5rSW50ZXJ2YWw9dm9pZCAwKSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpLHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0PXZvaWQgMCksdGhpcy5fYW5pbWF0aW9uRnJhbWUmJih3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpLHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMCl9LGUucHJvdG90eXBlLnJlc3RhcnRCbGlua0FuaW1hdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5pc1BhdXNlZHx8KHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQ9RGF0ZS5ub3coKSx0aGlzLmlzQ3Vyc29yVmlzaWJsZT0hMCx0aGlzLl9hbmltYXRpb25GcmFtZXx8KHRoaXMuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7ZS5fcmVuZGVyQ2FsbGJhY2soKSxlLl9hbmltYXRpb25GcmFtZT12b2lkIDB9KSkpKX0sZS5wcm90b3R5cGUuX3Jlc3RhcnRJbnRlcnZhbD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZvaWQgMD09PWUmJihlPXUpLHRoaXMuX2JsaW5rSW50ZXJ2YWwmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKSx0aGlzLl9ibGlua0ludGVydmFsPXZvaWQgMCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCl7dmFyIGU9dS0oRGF0ZS5ub3coKS10Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkKTtpZih0Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkPXZvaWQgMCxlPjApcmV0dXJuIHZvaWQgdC5fcmVzdGFydEludGVydmFsKGUpfXQuaXNDdXJzb3JWaXNpYmxlPSExLHQuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7dC5fcmVuZGVyQ2FsbGJhY2soKSx0Ll9hbmltYXRpb25GcmFtZT12b2lkIDB9KSksdC5fYmxpbmtJbnRlcnZhbD13aW5kb3cuc2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7aWYodC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCl7dmFyIGU9dS0oRGF0ZS5ub3coKS10Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkKTtyZXR1cm4gdC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZD12b2lkIDAsdm9pZCB0Ll9yZXN0YXJ0SW50ZXJ2YWwoZSl9dC5pc0N1cnNvclZpc2libGU9IXQuaXNDdXJzb3JWaXNpYmxlLHQuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7dC5fcmVuZGVyQ2FsbGJhY2soKSx0Ll9hbmltYXRpb25GcmFtZT12b2lkIDB9KSl9KSx1KX0pLGUpfSxlLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuaXNDdXJzb3JWaXNpYmxlPSEwLHRoaXMuX2JsaW5rSW50ZXJ2YWwmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKSx0aGlzLl9ibGlua0ludGVydmFsPXZvaWQgMCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dD12b2lkIDApLHRoaXMuX2FuaW1hdGlvbkZyYW1lJiYod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSx0aGlzLl9hbmltYXRpb25GcmFtZT12b2lkIDApfSxlLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt0aGlzLnBhdXNlKCksdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZD12b2lkIDAsdGhpcy5fcmVzdGFydEludGVydmFsKCksdGhpcy5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKX0sZX0oKX0sODk3ODpmdW5jdGlvbihlLHQscil7dmFyIGksbixvLHMsYSxjLGwsaCx1LGYsXyxkLHAsdix5LGcsbSxiLFMsQyx3LEwsRSx4LFIsayxNLEEsTyxELFQsQixQLEksSCxqLEYsVyxVLHEsTix6LEssRyxWLFgsWixZLEosJCxRLGVlLHRlLHJlLGllLG5lLG9lLHNlLGFlLGNlLGxlLGhlLHVlLGZlLF9lLGRlLHBlLHZlLHllLGdlLG1lLGJlLFNlLENlLHdlLExlLEVlLHhlLFJlLGtlLE1lLEFlLE9lLERlLFRlLEJlLFBlLEllLEhlLGplLEZlLFdlLFVlLHFlLE5lLHplLEtlLEdlLFZlLFhlLFplLFllLEplLCRlLFFlLGV0LHR0LHJ0LGl0LG50LG90LHN0LGF0LGN0LGx0LGh0LHV0LGZ0LF90LGR0LHB0LHZ0LHl0LGd0LG10LGJ0LFN0LEN0LHd0PXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30sTHQ9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnRyeURyYXdDdXN0b21DaGFyPXQucG93ZXJsaW5lRGVmaW5pdGlvbnM9dC5ib3hEcmF3aW5nRGVmaW5pdGlvbnM9dC5ibG9ja0VsZW1lbnREZWZpbml0aW9ucz12b2lkIDA7dmFyIEV0PXIoMTc1Mik7dC5ibG9ja0VsZW1lbnREZWZpbml0aW9ucz17IuKWgCI6W3t4OjAseTowLHc6OCxoOjR9XSwi4paBIjpbe3g6MCx5Ojcsdzo4LGg6MX1dLCLiloIiOlt7eDowLHk6Nix3OjgsaDoyfV0sIuKWgyI6W3t4OjAseTo1LHc6OCxoOjN9XSwi4paEIjpbe3g6MCx5OjQsdzo4LGg6NH1dLCLiloUiOlt7eDowLHk6Myx3OjgsaDo1fV0sIuKWhiI6W3t4OjAseToyLHc6OCxoOjZ9XSwi4paHIjpbe3g6MCx5OjEsdzo4LGg6N31dLCLilogiOlt7eDowLHk6MCx3OjgsaDo4fV0sIuKWiSI6W3t4OjAseTowLHc6NyxoOjh9XSwi4paKIjpbe3g6MCx5OjAsdzo2LGg6OH1dLCLilosiOlt7eDowLHk6MCx3OjUsaDo4fV0sIuKWjCI6W3t4OjAseTowLHc6NCxoOjh9XSwi4paNIjpbe3g6MCx5OjAsdzozLGg6OH1dLCLilo4iOlt7eDowLHk6MCx3OjIsaDo4fV0sIuKWjyI6W3t4OjAseTowLHc6MSxoOjh9XSwi4paQIjpbe3g6NCx5OjAsdzo0LGg6OH1dLCLilpQiOlt7eDowLHk6MCx3OjksaDoxfV0sIuKWlSI6W3t4OjcseTowLHc6MSxoOjh9XSwi4paWIjpbe3g6MCx5OjQsdzo0LGg6NH1dLCLilpciOlt7eDo0LHk6NCx3OjQsaDo0fV0sIuKWmCI6W3t4OjAseTowLHc6NCxoOjR9XSwi4paZIjpbe3g6MCx5OjAsdzo0LGg6OH0se3g6MCx5OjQsdzo4LGg6NH1dLCLilpoiOlt7eDowLHk6MCx3OjQsaDo0fSx7eDo0LHk6NCx3OjQsaDo0fV0sIuKWmyI6W3t4OjAseTowLHc6NCxoOjh9LHt4OjAseTowLHc6NCxoOjh9XSwi4pacIjpbe3g6MCx5OjAsdzo4LGg6NH0se3g6NCx5OjAsdzo0LGg6OH1dLCLilp0iOlt7eDo0LHk6MCx3OjQsaDo0fV0sIuKWniI6W3t4OjQseTowLHc6NCxoOjR9LHt4OjAseTo0LHc6NCxoOjR9XSwi4pafIjpbe3g6NCx5OjAsdzo0LGg6OH0se3g6MCx5OjQsdzo4LGg6NH1dLCLwn62wIjpbe3g6MSx5OjAsdzoxLGg6OH1dLCLwn62xIjpbe3g6Mix5OjAsdzoxLGg6OH1dLCLwn62yIjpbe3g6Myx5OjAsdzoxLGg6OH1dLCLwn62zIjpbe3g6NCx5OjAsdzoxLGg6OH1dLCLwn620Ijpbe3g6NSx5OjAsdzoxLGg6OH1dLCLwn621Ijpbe3g6Nix5OjAsdzoxLGg6OH1dLCLwn622Ijpbe3g6MCx5OjEsdzo4LGg6MX1dLCLwn623Ijpbe3g6MCx5OjIsdzo4LGg6MX1dLCLwn624Ijpbe3g6MCx5OjMsdzo4LGg6MX1dLCLwn625Ijpbe3g6MCx5OjQsdzo4LGg6MX1dLCLwn626Ijpbe3g6MCx5OjUsdzo4LGg6MX1dLCLwn627Ijpbe3g6MCx5OjYsdzo4LGg6MX1dLCLwn628Ijpbe3g6MCx5OjAsdzoxLGg6OH0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn629Ijpbe3g6MCx5OjAsdzoxLGg6OH0se3g6MCx5OjAsdzo4LGg6MX1dLCLwn62+Ijpbe3g6Nyx5OjAsdzoxLGg6OH0se3g6MCx5OjAsdzo4LGg6MX1dLCLwn62/Ijpbe3g6Nyx5OjAsdzoxLGg6OH0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn66AIjpbe3g6MCx5OjAsdzo4LGg6MX0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn66BIjpbe3g6MCx5OjAsdzo4LGg6MX0se3g6MCx5OjIsdzo4LGg6MX0se3g6MCx5OjQsdzo4LGg6MX0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn66CIjpbe3g6MCx5OjAsdzo4LGg6Mn1dLCLwn66DIjpbe3g6MCx5OjAsdzo4LGg6M31dLCLwn66EIjpbe3g6MCx5OjAsdzo4LGg6NX1dLCLwn66FIjpbe3g6MCx5OjAsdzo4LGg6Nn1dLCLwn66GIjpbe3g6MCx5OjAsdzo4LGg6N31dLCLwn66HIjpbe3g6Nix5OjAsdzoyLGg6OH1dLCLwn66IIjpbe3g6NSx5OjAsdzozLGg6OH1dLCLwn66JIjpbe3g6Myx5OjAsdzo1LGg6OH1dLCLwn66KIjpbe3g6Mix5OjAsdzo2LGg6OH1dLCLwn66LIjpbe3g6MSx5OjAsdzo3LGg6OH1dLCLwn66VIjpbe3g6MCx5OjAsdzoyLGg6Mn0se3g6NCx5OjAsdzoyLGg6Mn0se3g6Mix5OjIsdzoyLGg6Mn0se3g6Nix5OjIsdzoyLGg6Mn0se3g6MCx5OjQsdzoyLGg6Mn0se3g6NCx5OjQsdzoyLGg6Mn0se3g6Mix5OjYsdzoyLGg6Mn0se3g6Nix5OjYsdzoyLGg6Mn1dLCLwn66WIjpbe3g6Mix5OjAsdzoyLGg6Mn0se3g6Nix5OjAsdzoyLGg6Mn0se3g6MCx5OjIsdzoyLGg6Mn0se3g6NCx5OjIsdzoyLGg6Mn0se3g6Mix5OjQsdzoyLGg6Mn0se3g6Nix5OjQsdzoyLGg6Mn0se3g6MCx5OjYsdzoyLGg6Mn0se3g6NCx5OjYsdzoyLGg6Mn1dLCLwn66XIjpbe3g6MCx5OjIsdzo4LGg6Mn0se3g6MCx5OjYsdzo4LGg6Mn1dfTt2YXIgeHQ9eyLilpEiOltbMSwwLDAsMF0sWzAsMCwwLDBdLFswLDAsMSwwXSxbMCwwLDAsMF1dLCLilpIiOltbMSwwXSxbMCwwXSxbMCwxXSxbMCwwXV0sIuKWkyI6W1swLDFdLFsxLDFdLFsxLDBdLFsxLDFdXX07dC5ib3hEcmF3aW5nRGVmaW5pdGlvbnM9eyLilIAiOihpPXt9LGlbMV09Ik0wLC41IEwxLC41IixpKSwi4pSBIjoobj17fSxuWzNdPSJNMCwuNSBMMSwuNSIsbiksIuKUgiI6KG89e30sb1sxXT0iTS41LDAgTC41LDEiLG8pLCLilIMiOihzPXt9LHNbM109Ik0uNSwwIEwuNSwxIixzKSwi4pSMIjooYT17fSxhWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixhKSwi4pSPIjooYz17fSxjWzNdPSJNMC41LDEgTC41LC41IEwxLC41IixjKSwi4pSQIjoobD17fSxsWzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLGwpLCLilJMiOihoPXt9LGhbM109Ik0wLC41IEwuNSwuNSBMLjUsMSIsaCksIuKUlCI6KHU9e30sdVsxXT0iTS41LDAgTC41LC41IEwxLC41Iix1KSwi4pSXIjooZj17fSxmWzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLGYpLCLilJgiOihfPXt9LF9bMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIsXyksIuKUmyI6KGQ9e30sZFszXT0iTS41LDAgTC41LC41IEwwLC41IixkKSwi4pScIjoocD17fSxwWzFdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDEsLjUiLHApLCLilKMiOih2PXt9LHZbM109Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMSwuNSIsdiksIuKUpCI6KHk9e30seVsxXT0iTS41LDAgTC41LDEgTS41LC41IEwwLC41Iix5KSwi4pSrIjooZz17fSxnWzNdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDAsLjUiLGcpLCLilKwiOihtPXt9LG1bMV09Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMSIsbSksIuKUsyI6KGI9e30sYlszXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwxIixiKSwi4pS0IjooUz17fSxTWzFdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDAiLFMpLCLilLsiOihDPXt9LENbM109Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMCIsQyksIuKUvCI6KHc9e30sd1sxXT0iTTAsLjUgTDEsLjUgTS41LDAgTC41LDEiLHcpLCLilYsiOihMPXt9LExbM109Ik0wLC41IEwxLC41IE0uNSwwIEwuNSwxIixMKSwi4pW0IjooRT17fSxFWzFdPSJNLjUsLjUgTDAsLjUiLEUpLCLilbgiOih4PXt9LHhbM109Ik0uNSwuNSBMMCwuNSIseCksIuKVtSI6KFI9e30sUlsxXT0iTS41LC41IEwuNSwwIixSKSwi4pW5Ijooaz17fSxrWzNdPSJNLjUsLjUgTC41LDAiLGspLCLilbYiOihNPXt9LE1bMV09Ik0uNSwuNSBMMSwuNSIsTSksIuKVuiI6KEE9e30sQVszXT0iTS41LC41IEwxLC41IixBKSwi4pW3IjooTz17fSxPWzFdPSJNLjUsLjUgTC41LDEiLE8pLCLilbsiOihEPXt9LERbM109Ik0uNSwuNSBMLjUsMSIsRCksIuKVkCI6KFQ9e30sVFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMMSwiKyguNSt0KX0sVCksIuKVkSI6KEI9e30sQlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUtZSkrIiwwIEwiKyguNS1lKSsiLDEgTSIrKC41K2UpKyIsMCBMIisoLjUrZSkrIiwxIn0sQiksIuKVkiI6KFA9e30sUFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMSBMLjUsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0uNSwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxQKSwi4pWTIjooST17fSxJWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNS1lKSsiLDEgTCIrKC41LWUpKyIsLjUgTDEsLjUgTSIrKC41K2UpKyIsLjUgTCIrKC41K2UpKyIsMSJ9LEkpLCLilZQiOihIPXt9LEhbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTEsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDEgTTEsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDEifSxIKSwi4pWVIjooaj17fSxqWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTC41LCIrKC41LXQpKyIgTC41LDEgTTAsIisoLjUrdCkrIiBMLjUsIisoLjUrdCl9LGopLCLilZYiOihGPXt9LEZbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41K2UpKyIsMSBMIisoLjUrZSkrIiwuNSBMMCwuNSBNIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwxIn0sRiksIuKVlyI6KFc9e30sV1sxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMCwiKyguNS10KSsiIEwiKyguNStlKSsiLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsMSJ9LFcpLCLilZgiOihVPXt9LFVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LCIrKC41K3QpKyIgTDEsIisoLjUrdCkrIiBNLjUsIisoLjUtdCkrIiBMMSwiKyguNS10KX0sVSksIuKVmSI6KHE9e30scVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMSwuNSBMIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwwIE0iKyguNStlKSsiLC41IEwiKyguNStlKSsiLDAifSxxKSwi4pWaIjooTj17fSxOWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIE0xLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwwIn0sTiksIuKVmyI6KHo9e30selsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwuNSwiKyguNSt0KSsiIEwuNSwwIE0wLCIrKC41LXQpKyIgTC41LCIrKC41LXQpfSx6KSwi4pWcIjooSz17fSxLWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwiKyguNStlKSsiLC41IEwiKyguNStlKSsiLDAgTSIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMCJ9LEspLCLilZ0iOihHPXt9LEdbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDAgTTAsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDAifSxHKSwi4pWeIjooVj17fSxWWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwxIE0uNSwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTS41LCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LFYpLCLilZ8iOihYPXt9LFhbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSBNIisoLjUrZSkrIiwuNSBMMSwuNSJ9LFgpLCLilaAiOihaPXt9LFpbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0xLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwxIE0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIn0sWiksIuKVoSI6KFk9e30sWVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMCBMLjUsMSBNMCwiKyguNS10KSsiIEwuNSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTC41LCIrKC41K3QpfSxZKSwi4pWiIjooSj17fSxKWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwiKyguNS1lKSsiLC41IE0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEifSxKKSwi4pWjIjooJD17fSwkWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSBNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMCwiKyguNS10KSsiIEwiKyguNS1lKSsiLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsMCJ9LCQpLCLilaQiOihRPXt9LFFbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCkrIiBNLjUsIisoLjUrdCkrIiBMLjUsMSJ9LFEpLCLilaUiOihlZT17fSxlZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwuNSBMMSwuNSBNIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLC41IEwiKyguNStlKSsiLDEifSxlZSksIuKVpiI6KHRlPXt9LHRlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMSwiKyguNSt0KSsiIEwiKyguNStlKSsiLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsMSJ9LHRlKSwi4pWnIjoocmU9e30scmVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LCIrKC41LXQpKyIgTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LHJlKSwi4pWoIjooaWU9e30saWVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsLjUgTDEsLjUgTSIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMCBNIisoLjUrZSkrIiwuNSBMIisoLjUrZSkrIiwwIn0saWUpLCLilakiOihuZT17fSxuZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpKyIgTTAsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDAgTTEsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwiKyguNS10KSsiIEwiKyguNStlKSsiLDAifSxuZSksIuKVqiI6KG9lPXt9LG9lWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwxIE0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxvZSksIuKVqyI6KHNlPXt9LHNlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwxLC41IE0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEifSxzZSksIuKVrCI6KGFlPXt9LGFlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwxIE0xLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwxIE0wLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwwIE0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIn0sYWUpLCLilbEiOihjZT17fSxjZVsxXT0iTTEsMCBMMCwxIixjZSksIuKVsiI6KGxlPXt9LGxlWzFdPSJNMCwwIEwxLDEiLGxlKSwi4pWzIjooaGU9e30saGVbMV09Ik0xLDAgTDAsMSBNMCwwIEwxLDEiLGhlKSwi4pW8IjoodWU9e30sdWVbMV09Ik0uNSwuNSBMMCwuNSIsdWVbM109Ik0uNSwuNSBMMSwuNSIsdWUpLCLilb0iOihmZT17fSxmZVsxXT0iTS41LC41IEwuNSwwIixmZVszXT0iTS41LC41IEwuNSwxIixmZSksIuKVviI6KF9lPXt9LF9lWzFdPSJNLjUsLjUgTDEsLjUiLF9lWzNdPSJNLjUsLjUgTDAsLjUiLF9lKSwi4pW/IjooZGU9e30sZGVbMV09Ik0uNSwuNSBMLjUsMSIsZGVbM109Ik0uNSwuNSBMLjUsMCIsZGUpLCLilI0iOihwZT17fSxwZVsxXT0iTS41LC41IEwuNSwxIixwZVszXT0iTS41LC41IEwxLC41IixwZSksIuKUjiI6KHZlPXt9LHZlWzFdPSJNLjUsLjUgTDEsLjUiLHZlWzNdPSJNLjUsLjUgTC41LDEiLHZlKSwi4pSRIjooeWU9e30seWVbMV09Ik0uNSwuNSBMLjUsMSIseWVbM109Ik0uNSwuNSBMMCwuNSIseWUpLCLilJIiOihnZT17fSxnZVsxXT0iTS41LC41IEwwLC41IixnZVszXT0iTS41LC41IEwuNSwxIixnZSksIuKUlSI6KG1lPXt9LG1lWzFdPSJNLjUsLjUgTC41LDAiLG1lWzNdPSJNLjUsLjUgTDEsLjUiLG1lKSwi4pSWIjooYmU9e30sYmVbMV09Ik0uNSwuNSBMMSwuNSIsYmVbM109Ik0uNSwuNSBMLjUsMCIsYmUpLCLilJkiOihTZT17fSxTZVsxXT0iTS41LC41IEwuNSwwIixTZVszXT0iTS41LC41IEwwLC41IixTZSksIuKUmiI6KENlPXt9LENlWzFdPSJNLjUsLjUgTDAsLjUiLENlWzNdPSJNLjUsLjUgTC41LDAiLENlKSwi4pSdIjood2U9e30sd2VbMV09Ik0uNSwwIEwuNSwxIix3ZVszXT0iTS41LC41IEwxLC41Iix3ZSksIuKUniI6KExlPXt9LExlWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixMZVszXT0iTS41LC41IEwuNSwwIixMZSksIuKUnyI6KEVlPXt9LEVlWzFdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLEVlWzNdPSJNLjUsLjUgTC41LDEiLEVlKSwi4pSgIjooeGU9e30seGVbMV09Ik0uNSwuNSBMMSwuNSIseGVbM109Ik0uNSwwIEwuNSwxIix4ZSksIuKUoSI6KFJlPXt9LFJlWzFdPSJNLjUsLjUgTC41LDEiLFJlWzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLFJlKSwi4pSiIjooa2U9e30sa2VbMV09Ik0uNSwuNSBMLjUsMCIsa2VbM109Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLGtlKSwi4pSlIjooTWU9e30sTWVbMV09Ik0uNSwwIEwuNSwxIixNZVszXT0iTS41LC41IEwwLC41IixNZSksIuKUpiI6KEFlPXt9LEFlWzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLEFlWzNdPSJNLjUsLjUgTC41LDAiLEFlKSwi4pSnIjooT2U9e30sT2VbMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIsT2VbM109Ik0uNSwuNSBMLjUsMSIsT2UpLCLilKgiOihEZT17fSxEZVsxXT0iTS41LC41IEwwLC41IixEZVszXT0iTS41LDAgTC41LDEiLERlKSwi4pSpIjooVGU9e30sVGVbMV09Ik0uNSwuNSBMLjUsMSIsVGVbM109Ik0uNSwwIEwuNSwuNSBMMCwuNSIsVGUpLCLilKoiOihCZT17fSxCZVsxXT0iTS41LC41IEwuNSwwIixCZVszXT0iTTAsLjUgTC41LC41IEwuNSwxIixCZSksIuKUrSI6KFBlPXt9LFBlWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixQZVszXT0iTS41LC41IEwwLC41IixQZSksIuKUriI6KEllPXt9LEllWzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLEllWzNdPSJNLjUsLjUgTDEsLjUiLEllKSwi4pSvIjooSGU9e30sSGVbMV09Ik0uNSwuNSBMLjUsMSIsSGVbM109Ik0wLC41IEwxLC41IixIZSksIuKUsCI6KGplPXt9LGplWzFdPSJNMCwuNSBMMSwuNSIsamVbM109Ik0uNSwuNSBMLjUsMSIsamUpLCLilLEiOihGZT17fSxGZVsxXT0iTS41LC41IEwxLC41IixGZVszXT0iTTAsLjUgTC41LC41IEwuNSwxIixGZSksIuKUsiI6KFdlPXt9LFdlWzFdPSJNLjUsLjUgTDAsLjUiLFdlWzNdPSJNMC41LDEgTC41LC41IEwxLC41IixXZSksIuKUtSI6KFVlPXt9LFVlWzFdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLFVlWzNdPSJNLjUsLjUgTDAsLjUiLFVlKSwi4pS2IjoocWU9e30scWVbMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIscWVbM109Ik0uNSwuNSBMMSwuNSIscWUpLCLilLciOihOZT17fSxOZVsxXT0iTS41LC41IEwuNSwwIixOZVszXT0iTTAsLjUgTDEsLjUiLE5lKSwi4pS4IjooemU9e30semVbMV09Ik0wLC41IEwxLC41Iix6ZVszXT0iTS41LC41IEwuNSwwIix6ZSksIuKUuSI6KEtlPXt9LEtlWzFdPSJNLjUsLjUgTDEsLjUiLEtlWzNdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLEtlKSwi4pS6IjooR2U9e30sR2VbMV09Ik0uNSwuNSBMMCwuNSIsR2VbM109Ik0uNSwwIEwuNSwuNSBMMSwuNSIsR2UpLCLilL0iOihWZT17fSxWZVsxXT0iTS41LDAgTC41LDEgTS41LC41IEwxLC41IixWZVszXT0iTS41LC41IEwwLC41IixWZSksIuKUviI6KFhlPXt9LFhlWzFdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDAsLjUiLFhlWzNdPSJNLjUsLjUgTDEsLjUiLFhlKSwi4pS/IjooWmU9e30sWmVbMV09Ik0uNSwwIEwuNSwxIixaZVszXT0iTTAsLjUgTDEsLjUiLFplKSwi4pWAIjooWWU9e30sWWVbMV09Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMSIsWWVbM109Ik0uNSwuNSBMLjUsMCIsWWUpLCLilYEiOihKZT17fSxKZVsxXT0iTS41LC41IEwuNSwwIE0wLC41IEwxLC41IixKZVszXT0iTS41LC41IEwuNSwxIixKZSksIuKVgiI6KCRlPXt9LCRlWzFdPSJNMCwuNSBMMSwuNSIsJGVbM109Ik0uNSwwIEwuNSwxIiwkZSksIuKVgyI6KFFlPXt9LFFlWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixRZVszXT0iTS41LDAgTC41LC41IEwwLC41IixRZSksIuKVhCI6KGV0PXt9LGV0WzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLGV0WzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLGV0KSwi4pWFIjoodHQ9e30sdHRbMV09Ik0uNSwwIEwuNSwuNSBMMSwuNSIsdHRbM109Ik0wLC41IEwuNSwuNSBMLjUsMSIsdHQpLCLilYYiOihydD17fSxydFsxXT0iTS41LDAgTC41LC41IEwwLC41IixydFszXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIscnQpLCLilYciOihpdD17fSxpdFsxXT0iTS41LC41IEwuNSwxIixpdFszXT0iTS41LC41IEwuNSwwIE0wLC41IEwxLC41IixpdCksIuKViCI6KG50PXt9LG50WzFdPSJNLjUsLjUgTC41LDAiLG50WzNdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDEiLG50KSwi4pWJIjoob3Q9e30sb3RbMV09Ik0uNSwuNSBMMSwuNSIsb3RbM109Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMCwuNSIsb3QpLCLilYoiOihzdD17fSxzdFsxXT0iTS41LC41IEwwLC41IixzdFszXT0iTS41LDAgTC41LDEgTS41LC41IEwxLC41IixzdCksIuKVjCI6KGF0PXt9LGF0WzFdPSJNLjEsLjUgTC40LC41IE0uNiwuNSBMLjksLjUiLGF0KSwi4pWNIjooY3Q9e30sY3RbM109Ik0uMSwuNSBMLjQsLjUgTS42LC41IEwuOSwuNSIsY3QpLCLilIQiOihsdD17fSxsdFsxXT0iTS4wNjY3LC41IEwuMjY2NywuNSBNLjQsLjUgTC42LC41IE0uNzMzMywuNSBMLjkzMzMsLjUiLGx0KSwi4pSFIjooaHQ9e30saHRbM109Ik0uMDY2NywuNSBMLjI2NjcsLjUgTS40LC41IEwuNiwuNSBNLjczMzMsLjUgTC45MzMzLC41IixodCksIuKUiCI6KHV0PXt9LHV0WzFdPSJNLjA1LC41IEwuMiwuNSBNLjMsLjUgTC40NSwuNSBNLjU1LC41IEwuNywuNSBNLjgsLjUgTC45NSwuNSIsdXQpLCLilIkiOihmdD17fSxmdFszXT0iTS4wNSwuNSBMLjIsLjUgTS4zLC41IEwuNDUsLjUgTS41NSwuNSBMLjcsLjUgTS44LC41IEwuOTUsLjUiLGZ0KSwi4pWOIjooX3Q9e30sX3RbMV09Ik0uNSwuMSBMLjUsLjQgTS41LC42IEwuNSwuOSIsX3QpLCLilY8iOihkdD17fSxkdFszXT0iTS41LC4xIEwuNSwuNCBNLjUsLjYgTC41LC45IixkdCksIuKUhiI6KHB0PXt9LHB0WzFdPSJNLjUsLjA2NjcgTC41LC4yNjY3IE0uNSwuNCBMLjUsLjYgTS41LC43MzMzIEwuNSwuOTMzMyIscHQpLCLilIciOih2dD17fSx2dFszXT0iTS41LC4wNjY3IEwuNSwuMjY2NyBNLjUsLjQgTC41LC42IE0uNSwuNzMzMyBMLjUsLjkzMzMiLHZ0KSwi4pSKIjooeXQ9e30seXRbMV09Ik0uNSwuMDUgTC41LC4yIE0uNSwuMyBMLjUsLjQ1IEwuNSwuNTUgTS41LC43IEwuNSwuOTUiLHl0KSwi4pSLIjooZ3Q9e30sZ3RbM109Ik0uNSwuMDUgTC41LC4yIE0uNSwuMyBMLjUsLjQ1IEwuNSwuNTUgTS41LC43IEwuNSwuOTUiLGd0KSwi4pWtIjoobXQ9e30sbXRbMV09IkMuNSwxLC41LC41LDEsLjUiLG10KSwi4pWuIjooYnQ9e30sYnRbMV09IkMuNSwxLC41LC41LDAsLjUiLGJ0KSwi4pWvIjooU3Q9e30sU3RbMV09IkMuNSwwLC41LC41LDAsLjUiLFN0KSwi4pWwIjooQ3Q9e30sQ3RbMV09IkMuNSwwLC41LC41LDEsLjUiLEN0KX0sdC5wb3dlcmxpbmVEZWZpbml0aW9ucz17Iu6CsCI6e2Q6Ik0wLDAgTDEsLjUgTDAsMSIsdHlwZTowfSwi7oKxIjp7ZDoiTTAsMCBMMSwuNSBMMCwxIix0eXBlOjEsaG9yaXpvbnRhbFBhZGRpbmc6LjV9LCLugrIiOntkOiJNMSwwIEwwLC41IEwxLDEiLHR5cGU6MH0sIu6CsyI6e2Q6Ik0xLDAgTDAsLjUgTDEsMSIsdHlwZToxLGhvcml6b250YWxQYWRkaW5nOi41fX0sdC50cnlEcmF3Q3VzdG9tQ2hhcj1mdW5jdGlvbihlLHIsaSxuLG8scyl7dmFyIGE9dC5ibG9ja0VsZW1lbnREZWZpbml0aW9uc1tyXTtpZihhKXJldHVybiBmdW5jdGlvbihlLHQscixpLG4sbyl7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspe3ZhciBhPXRbc10sYz1uLzgsbD1vLzg7ZS5maWxsUmVjdChyK2EueCpjLGkrYS55KmwsYS53KmMsYS5oKmwpfX0oZSxhLGksbixvLHMpLCEwO3ZhciBjPXh0W3JdO2lmKGMpcmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGksbixvKXt2YXIgcyxhPVJ0LmdldCh0KTthfHwoYT1uZXcgTWFwLFJ0LnNldCh0LGEpKTt2YXIgYz1lLmZpbGxTdHlsZTtpZigic3RyaW5nIiE9dHlwZW9mIGMpdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpbGxTdHlsZSB0eXBlICInK2MrJyInKTt2YXIgbD1hLmdldChjKTtpZighbCl7dmFyIGg9dFswXS5sZW5ndGgsdT10Lmxlbmd0aCxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO2Yud2lkdGg9aCxmLmhlaWdodD11O3ZhciBfPSgwLEV0LnRocm93SWZGYWxzeSkoZi5nZXRDb250ZXh0KCIyZCIpKSxkPW5ldyBJbWFnZURhdGEoaCx1KSxwPXZvaWQgMCx2PXZvaWQgMCx5PXZvaWQgMCxnPXZvaWQgMDtpZihjLnN0YXJ0c1dpdGgoIiMiKSlwPXBhcnNlSW50KGMuc2xpY2UoMSwzKSwxNiksdj1wYXJzZUludChjLnNsaWNlKDMsNSksMTYpLHk9cGFyc2VJbnQoYy5zbGljZSg1LDcpLDE2KSxnPWMubGVuZ3RoPjcmJnBhcnNlSW50KGMuc2xpY2UoNyw5KSwxNil8fDE7ZWxzZXtpZighYy5zdGFydHNXaXRoKCJyZ2JhIikpdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpbGxTdHlsZSBjb2xvciBmb3JtYXQgIicrYysnIiB3aGVuIGRyYXdpbmcgcGF0dGVybiBnbHlwaCcpO3A9KHM9d3QoYy5zdWJzdHJpbmcoNSxjLmxlbmd0aC0xKS5zcGxpdCgiLCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZSl9KSksNCkpWzBdLHY9c1sxXSx5PXNbMl0sZz1zWzNdfWZvcih2YXIgbT0wO208dTttKyspZm9yKHZhciBiPTA7YjxoO2IrKylkLmRhdGFbNCoobSpoK2IpXT1wLGQuZGF0YVs0KihtKmgrYikrMV09dixkLmRhdGFbNCoobSpoK2IpKzJdPXksZC5kYXRhWzQqKG0qaCtiKSszXT10W21dW2JdKigyNTUqZyk7Xy5wdXRJbWFnZURhdGEoZCwwLDApLGw9KDAsRXQudGhyb3dJZkZhbHN5KShlLmNyZWF0ZVBhdHRlcm4oZixudWxsKSksYS5zZXQoYyxsKX1lLmZpbGxTdHlsZT1sLGUuZmlsbFJlY3QocixpLG4sbyl9KGUsYyxpLG4sbyxzKSwhMDt2YXIgbD10LmJveERyYXdpbmdEZWZpbml0aW9uc1tyXTtpZihsKXJldHVybiBmdW5jdGlvbihlLHQscixpLG4sbyl7dmFyIHMsYSxjLGw7ZS5zdHJva2VTdHlsZT1lLmZpbGxTdHlsZTt0cnl7Zm9yKHZhciBoPUx0KE9iamVjdC5lbnRyaWVzKHQpKSx1PWgubmV4dCgpOyF1LmRvbmU7dT1oLm5leHQoKSl7dmFyIGY9d3QodS52YWx1ZSwyKSxfPWZbMF0sZD1mWzFdO2UuYmVnaW5QYXRoKCksZS5saW5lV2lkdGg9d2luZG93LmRldmljZVBpeGVsUmF0aW8qTnVtYmVyLnBhcnNlSW50KF8pO3ZhciBwPXZvaWQgMDtwPSJmdW5jdGlvbiI9PXR5cGVvZiBkP2QoLjE1LC4xNS9vKm4pOmQ7dHJ5e2Zvcih2YXIgdj0oYz12b2lkIDAsTHQocC5zcGxpdCgiICIpKSkseT12Lm5leHQoKTsheS5kb25lO3k9di5uZXh0KCkpe3ZhciBnPXkudmFsdWUsbT1nWzBdLGI9TXRbbV07aWYoYil7dmFyIFM9Zy5zdWJzdHJpbmcoMSkuc3BsaXQoIiwiKTtTWzBdJiZTWzFdJiZiKGUsQXQoUyxuLG8scixpKSl9ZWxzZSBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBkcmF3aW5nIGluc3RydWN0aW9ucyBmb3IgIicrbSsnIicpfX1jYXRjaChlKXtjPXtlcnJvcjplfX1maW5hbGx5e3RyeXt5JiYheS5kb25lJiYobD12LnJldHVybikmJmwuY2FsbCh2KX1maW5hbGx5e2lmKGMpdGhyb3cgYy5lcnJvcn19ZS5zdHJva2UoKSxlLmNsb3NlUGF0aCgpfX1jYXRjaChlKXtzPXtlcnJvcjplfX1maW5hbGx5e3RyeXt1JiYhdS5kb25lJiYoYT1oLnJldHVybikmJmEuY2FsbChoKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19fShlLGwsaSxuLG8scyksITA7dmFyIGg9dC5wb3dlcmxpbmVEZWZpbml0aW9uc1tyXTtyZXR1cm4hIWgmJihmdW5jdGlvbihlLHQscixpLG4sbyl7dmFyIHMsYTtlLmJlZ2luUGF0aCgpLGUubGluZVdpZHRoPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO3RyeXtmb3IodmFyIGM9THQodC5kLnNwbGl0KCIgIikpLGw9Yy5uZXh0KCk7IWwuZG9uZTtsPWMubmV4dCgpKXt2YXIgaD1sLnZhbHVlLHU9aFswXSxmPU10W3VdO2lmKGYpe3ZhciBfPWguc3Vic3RyaW5nKDEpLnNwbGl0KCIsIik7X1swXSYmX1sxXSYmZihlLEF0KF8sbixvLHIsaSx0Lmhvcml6b250YWxQYWRkaW5nKSl9ZWxzZSBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBkcmF3aW5nIGluc3RydWN0aW9ucyBmb3IgIicrdSsnIicpfX1jYXRjaChlKXtzPXtlcnJvcjplfX1maW5hbGx5e3RyeXtsJiYhbC5kb25lJiYoYT1jLnJldHVybikmJmEuY2FsbChjKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19MT09PXQudHlwZT8oZS5zdHJva2VTdHlsZT1lLmZpbGxTdHlsZSxlLnN0cm9rZSgpKTplLmZpbGwoKSxlLmNsb3NlUGF0aCgpfShlLGgsaSxuLG8scyksITApfTt2YXIgUnQ9bmV3IE1hcDtmdW5jdGlvbiBrdChlLHQscil7cmV0dXJuIHZvaWQgMD09PXImJihyPTApLE1hdGgubWF4KE1hdGgubWluKGUsdCkscil9dmFyIE10PXtDOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYmV6aWVyQ3VydmVUbyh0WzBdLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XSl9LEw6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saW5lVG8odFswXSx0WzFdKX0sTTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm1vdmVUbyh0WzBdLHRbMV0pfX07ZnVuY3Rpb24gQXQoZSx0LHIsaSxuLG8pe3ZvaWQgMD09PW8mJihvPTApO3ZhciBzPWUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChlKXx8cGFyc2VJbnQoZSl9KSk7aWYocy5sZW5ndGg8Mil0aHJvdyBuZXcgRXJyb3IoIlRvbyBmZXcgYXJndW1lbnRzIGZvciBpbnN0cnVjdGlvbiIpO2Zvcih2YXIgYT0wO2E8cy5sZW5ndGg7YSs9MilzW2FdKj10LTIqbyp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywwIT09c1thXSYmKHNbYV09a3QoTWF0aC5yb3VuZChzW2FdKy41KS0uNSx0LDApKSxzW2FdKz1pK28qd2luZG93LmRldmljZVBpeGVsUmF0aW87Zm9yKHZhciBjPTE7YzxzLmxlbmd0aDtjKz0yKXNbY10qPXIsMCE9PXNbY10mJihzW2NdPWt0KE1hdGgucm91bmQoc1tjXSsuNSktLjUsciwwKSksc1tjXSs9bjtyZXR1cm4gc319LDM3MDA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5HcmlkQ2FjaGU9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuY2FjaGU9W119cmV0dXJuIGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wO3I8ZTtyKyspe3RoaXMuY2FjaGUubGVuZ3RoPD1yJiZ0aGlzLmNhY2hlLnB1c2goW10pO2Zvcih2YXIgaT10aGlzLmNhY2hlW3JdLmxlbmd0aDtpPHQ7aSsrKXRoaXMuY2FjaGVbcl0ucHVzaCh2b2lkIDApO3RoaXMuY2FjaGVbcl0ubGVuZ3RoPXR9dGhpcy5jYWNoZS5sZW5ndGg9ZX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuY2FjaGUubGVuZ3RoO2UrKylmb3IodmFyIHQ9MDt0PHRoaXMuY2FjaGVbZV0ubGVuZ3RoO3QrKyl0aGlzLmNhY2hlW2VdW3RdPXZvaWQgMH0sZX0oKTt0LkdyaWRDYWNoZT1yfSw1MDk4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkxpbmtSZW5kZXJMYXllcj12b2lkIDA7dmFyIGE9cigxNTQ2KSxjPXIoODgwMyksbD1yKDIwNDApLGg9cigyNTg1KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxjLGwpe3ZhciBoPWUuY2FsbCh0aGlzLHQsImxpbmsiLHIsITAsaSxuLGEsYyxsKXx8dGhpcztyZXR1cm4gby5vblNob3dMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fb25TaG93TGlua1VuZGVybGluZShlKX0pKSxvLm9uSGlkZUxpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9vbkhpZGVMaW5rVW5kZXJsaW5lKGUpfSkpLHMub25TaG93TGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX29uU2hvd0xpbmtVbmRlcmxpbmUoZSl9KSkscy5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fb25IaWRlTGlua1VuZGVybGluZShlKX0pKSxofXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCksdGhpcy5fc3RhdGU9dm9pZCAwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2NsZWFyQ3VycmVudExpbmsoKX0sdC5wcm90b3R5cGUuX2NsZWFyQ3VycmVudExpbms9ZnVuY3Rpb24oKXtpZih0aGlzLl9zdGF0ZSl7dGhpcy5fY2xlYXJDZWxscyh0aGlzLl9zdGF0ZS54MSx0aGlzLl9zdGF0ZS55MSx0aGlzLl9zdGF0ZS5jb2xzLXRoaXMuX3N0YXRlLngxLDEpO3ZhciBlPXRoaXMuX3N0YXRlLnkyLXRoaXMuX3N0YXRlLnkxLTE7ZT4wJiZ0aGlzLl9jbGVhckNlbGxzKDAsdGhpcy5fc3RhdGUueTErMSx0aGlzLl9zdGF0ZS5jb2xzLGUpLHRoaXMuX2NsZWFyQ2VsbHMoMCx0aGlzLl9zdGF0ZS55Mix0aGlzLl9zdGF0ZS54MiwxKSx0aGlzLl9zdGF0ZT12b2lkIDB9fSx0LnByb3RvdHlwZS5fb25TaG93TGlua1VuZGVybGluZT1mdW5jdGlvbihlKXtpZihlLmZnPT09Yy5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SP3RoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzOmUuZmcmJigwLGwuaXMyNTZDb2xvcikoZS5mZyk/dGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYW5zaVtlLmZnXS5jc3M6dGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3MsZS55MT09PWUueTIpdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsZS55MSxlLngyLWUueDEpO2Vsc2V7dGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsZS55MSxlLmNvbHMtZS54MSk7Zm9yKHZhciB0PWUueTErMTt0PGUueTI7dCsrKXRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLHQsZS5jb2xzKTt0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoMCxlLnkyLGUueDIpfXRoaXMuX3N0YXRlPWV9LHQucHJvdG90eXBlLl9vbkhpZGVMaW5rVW5kZXJsaW5lPWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyQ3VycmVudExpbmsoKX0sbyhbcyg2LGguSUJ1ZmZlclNlcnZpY2UpLHMoNyxoLklPcHRpb25zU2VydmljZSkscyg4LGguSURlY29yYXRpb25TZXJ2aWNlKV0sdCl9KGEuQmFzZVJlbmRlckxheWVyKTt0LkxpbmtSZW5kZXJMYXllcj11fSwzNTI1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlJlbmRlcmVyPXZvaWQgMDt2YXIgYz1yKDk1OTYpLGw9cig0MTQ5KSxoPXIoMjUxMiksdT1yKDUwOTgpLGY9cig4NDQpLF89cig0NzI1KSxkPXIoMjU4NSkscD1yKDE0MjApLHY9cig4NDYwKSx5PTEsZz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsZil7dmFyIF89ZS5jYWxsKHRoaXMpfHx0aGlzO18uX2NvbG9ycz10LF8uX3NjcmVlbkVsZW1lbnQ9cixfLl9idWZmZXJTZXJ2aWNlPXMsXy5fY2hhclNpemVTZXJ2aWNlPWEsXy5fb3B0aW9uc1NlcnZpY2U9ZixfLl9pZD15KyssXy5fb25SZXF1ZXN0UmVkcmF3PW5ldyB2LkV2ZW50RW1pdHRlcjt2YXIgZD1fLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5O3JldHVybiBfLl9yZW5kZXJMYXllcnM9W28uY3JlYXRlSW5zdGFuY2UoYy5UZXh0UmVuZGVyTGF5ZXIsXy5fc2NyZWVuRWxlbWVudCwwLF8uX2NvbG9ycyxkLF8uX2lkKSxvLmNyZWF0ZUluc3RhbmNlKGwuU2VsZWN0aW9uUmVuZGVyTGF5ZXIsXy5fc2NyZWVuRWxlbWVudCwxLF8uX2NvbG9ycyxfLl9pZCksby5jcmVhdGVJbnN0YW5jZSh1LkxpbmtSZW5kZXJMYXllcixfLl9zY3JlZW5FbGVtZW50LDIsXy5fY29sb3JzLF8uX2lkLGksbiksby5jcmVhdGVJbnN0YW5jZShoLkN1cnNvclJlbmRlckxheWVyLF8uX3NjcmVlbkVsZW1lbnQsMyxfLl9jb2xvcnMsXy5faWQsXy5fb25SZXF1ZXN0UmVkcmF3KV0sXy5kaW1lbnNpb25zPXtzY2FsZWRDaGFyV2lkdGg6MCxzY2FsZWRDaGFySGVpZ2h0OjAsc2NhbGVkQ2VsbFdpZHRoOjAsc2NhbGVkQ2VsbEhlaWdodDowLHNjYWxlZENoYXJMZWZ0OjAsc2NhbGVkQ2hhclRvcDowLHNjYWxlZENhbnZhc1dpZHRoOjAsc2NhbGVkQ2FudmFzSGVpZ2h0OjAsY2FudmFzV2lkdGg6MCxjYW52YXNIZWlnaHQ6MCxhY3R1YWxDZWxsV2lkdGg6MCxhY3R1YWxDZWxsSGVpZ2h0OjB9LF8uX2RldmljZVBpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW8sXy5fdXBkYXRlRGltZW5zaW9ucygpLF8ub25PcHRpb25zQ2hhbmdlZCgpLF99cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlZHJhdyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RSZWRyYXcuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciB0LHI7dHJ5e2Zvcih2YXIgaT1hKHRoaXMuX3JlbmRlckxheWVycyksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpbi52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSwoMCxwLnJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlKSh0aGlzLl9pZCl9LHQucHJvdG90eXBlLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZT1mdW5jdGlvbigpe3RoaXMuX2RldmljZVBpeGVsUmF0aW8hPT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyYmKHRoaXMuX2RldmljZVBpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5vblJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSl9LHQucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMuX2NvbG9ycz1lO3RyeXtmb3IodmFyIGk9YSh0aGlzLl9yZW5kZXJMYXllcnMpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKXt2YXIgbz1uLnZhbHVlO28uc2V0Q29sb3JzKHRoaXMuX2NvbG9ycyksby5yZXNldCgpfX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19fSx0LnByb3RvdHlwZS5vblJlc2l6ZT1mdW5jdGlvbihlLHQpe3ZhciByLGk7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO3RyeXtmb3IodmFyIG49YSh0aGlzLl9yZW5kZXJMYXllcnMpLG89bi5uZXh0KCk7IW8uZG9uZTtvPW4ubmV4dCgpKW8udmFsdWUucmVzaXplKHRoaXMuZGltZW5zaW9ucyl9Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoKyJweCIsdGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS5oZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCsicHgifSx0LnByb3RvdHlwZS5vbkNoYXJTaXplQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMub25SZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyl9LHQucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub25CbHVyKCl9KSl9LHQucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9uRm9jdXMoKX0pKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihpKXtyZXR1cm4gaS5vblNlbGVjdGlvbkNoYW5nZWQoZSx0LHIpfSkpLHRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kJiZ0aGlzLl9vblJlcXVlc3RSZWRyYXcuZmlyZSh7c3RhcnQ6MCxlbmQ6dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTF9KX0sdC5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihlKXtyZXR1cm4gZS5vbkN1cnNvck1vdmUoKX0pKX0sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub25PcHRpb25zQ2hhbmdlZCgpfSkpfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVzZXQoKX0pKX0sdC5wcm90b3R5cGUuX3J1bk9wZXJhdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxyO3RyeXtmb3IodmFyIGk9YSh0aGlzLl9yZW5kZXJMYXllcnMpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKWUobi52YWx1ZSl9Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fX0sdC5wcm90b3R5cGUucmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe3ZhciByLGk7dHJ5e2Zvcih2YXIgbj1hKHRoaXMuX3JlbmRlckxheWVycyksbz1uLm5leHQoKTshby5kb25lO289bi5uZXh0KCkpby52YWx1ZS5vbkdyaWRDaGFuZ2VkKGUsdCl9Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fX0sdC5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9YSh0aGlzLl9yZW5kZXJMYXllcnMpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKWkudmFsdWUuY2xlYXJUZXh0dXJlQXRsYXMoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSx0LnByb3RvdHlwZS5fdXBkYXRlRGltZW5zaW9ucz1mdW5jdGlvbigpe3RoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUmJih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoPU1hdGguZmxvb3IodGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodD1NYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ9TWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmVIZWlnaHQpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wPTE9PT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmVIZWlnaHQ/MDpNYXRoLnJvdW5kKCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodC10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCkvMiksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aD10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoK01hdGgucm91bmQodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sZXR0ZXJTcGFjaW5nKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQ9TWF0aC5mbG9vcih0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxldHRlclNwYWNpbmcvMiksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodD10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MqdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyp0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0L3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGg9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGgvd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQvdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9LG8oW3MoNCxkLklJbnN0YW50aWF0aW9uU2VydmljZSkscyg1LGQuSUJ1ZmZlclNlcnZpY2UpLHMoNixfLklDaGFyU2l6ZVNlcnZpY2UpLHMoNyxkLklPcHRpb25zU2VydmljZSldLHQpfShmLkRpc3Bvc2FibGUpO3QuUmVuZGVyZXI9Z30sMTc1MjooZSx0KT0+e2Z1bmN0aW9uIHIoZSl7cmV0dXJuIDU3NTA4PD1lJiZlPD01NzU1OH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5leGNsdWRlRnJvbUNvbnRyYXN0UmF0aW9EZW1hbmRzPXQuaXNQb3dlcmxpbmVHbHlwaD10LnRocm93SWZGYWxzeT12b2lkIDAsdC50aHJvd0lmRmFsc3k9ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJ2YWx1ZSBtdXN0IG5vdCBiZSBmYWxzeSIpO3JldHVybiBlfSx0LmlzUG93ZXJsaW5lR2x5cGg9cix0LmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSl8fGZ1bmN0aW9uKGUpe3JldHVybiA5NDcyPD1lJiZlPD05NjMxfShlKX19LDQxNDk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uUmVuZGVyTGF5ZXI9dm9pZCAwO3ZhciBhPXIoMTU0NiksYz1yKDI1ODUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhKXt2YXIgYz1lLmNhbGwodGhpcyx0LCJzZWxlY3Rpb24iLHIsITAsaSxuLG8scyxhKXx8dGhpcztyZXR1cm4gYy5fY2xlYXJTdGF0ZSgpLGN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5fY2xlYXJTdGF0ZT1mdW5jdGlvbigpe3RoaXMuX3N0YXRlPXtzdGFydDp2b2lkIDAsZW5kOnZvaWQgMCxjb2x1bW5TZWxlY3RNb2RlOnZvaWQgMCx5ZGlzcDp2b2lkIDB9fSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0KSx0aGlzLl9jbGVhclN0YXRlKCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUuc3RhcnQmJnRoaXMuX3N0YXRlLmVuZCYmKHRoaXMuX2NsZWFyU3RhdGUoKSx0aGlzLl9jbGVhckFsbCgpKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKHQscixpKXtpZihlLnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQuY2FsbCh0aGlzLHQscixpKSx0aGlzLl9kaWRTdGF0ZUNoYW5nZSh0LHIsaSx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCkpaWYodGhpcy5fY2xlYXJBbGwoKSx0JiZyKXt2YXIgbj10WzFdLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG89clsxXS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxzPU1hdGgubWF4KG4sMCksYT1NYXRoLm1pbihvLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKTtpZihzPj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N8fGE8MCl0aGlzLl9zdGF0ZS55ZGlzcD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtlbHNle2lmKHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50LmNzcyxpKXt2YXIgYz10WzBdLGw9clswXS1jLGg9YS1zKzE7dGhpcy5fZmlsbENlbGxzKGMscyxsLGgpfWVsc2V7Yz1uPT09cz90WzBdOjA7dmFyIHU9cz09PW8/clswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7dGhpcy5fZmlsbENlbGxzKGMscyx1LWMsMSk7dmFyIGY9TWF0aC5tYXgoYS1zLTEsMCk7aWYodGhpcy5fZmlsbENlbGxzKDAscysxLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxmKSxzIT09YSl7dmFyIF89bz09PWE/clswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7dGhpcy5fZmlsbENlbGxzKDAsYSxfLDEpfX10aGlzLl9zdGF0ZS5zdGFydD1bdFswXSx0WzFdXSx0aGlzLl9zdGF0ZS5lbmQ9W3JbMF0sclsxXV0sdGhpcy5fc3RhdGUuY29sdW1uU2VsZWN0TW9kZT1pLHRoaXMuX3N0YXRlLnlkaXNwPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwfX1lbHNlIHRoaXMuX2NsZWFyU3RhdGUoKX0sdC5wcm90b3R5cGUuX2RpZFN0YXRlQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiF0aGlzLl9hcmVDb29yZGluYXRlc0VxdWFsKGUsdGhpcy5fc3RhdGUuc3RhcnQpfHwhdGhpcy5fYXJlQ29vcmRpbmF0ZXNFcXVhbCh0LHRoaXMuX3N0YXRlLmVuZCl8fHIhPT10aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlfHxpIT09dGhpcy5fc3RhdGUueWRpc3B9LHQucHJvdG90eXBlLl9hcmVDb29yZGluYXRlc0VxdWFsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuISghZXx8IXQpJiZlWzBdPT09dFswXSYmZVsxXT09PXRbMV19LG8oW3MoNCxjLklCdWZmZXJTZXJ2aWNlKSxzKDUsYy5JT3B0aW9uc1NlcnZpY2UpLHMoNixjLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShhLkJhc2VSZW5kZXJMYXllcik7dC5TZWxlY3Rpb25SZW5kZXJMYXllcj1sfSw5NTk2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlRleHRSZW5kZXJMYXllcj12b2lkIDA7dmFyIGM9cigzNzAwKSxsPXIoMTU0NiksaD1yKDM3MzQpLHU9cig2NDMpLGY9cig1MTEpLF89cigyNTg1KSxkPXIoNDcyNSkscD1yKDQyNjkpLHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGwsaCl7dmFyIHU9ZS5jYWxsKHRoaXMsdCwidGV4dCIscixuLGksbyxzLGEsaCl8fHRoaXM7cmV0dXJuIHUuX2NoYXJhY3RlckpvaW5lclNlcnZpY2U9bCx1Ll9jaGFyYWN0ZXJXaWR0aD0wLHUuX2NoYXJhY3RlckZvbnQ9IiIsdS5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlPXt9LHUuX3dvcmtDZWxsPW5ldyBmLkNlbGxEYXRhLHUuX3N0YXRlPW5ldyBjLkdyaWRDYWNoZSx1fXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCk7dmFyIHI9dGhpcy5fZ2V0Rm9udCghMSwhMSk7dGhpcy5fY2hhcmFjdGVyV2lkdGg9PT10LnNjYWxlZENoYXJXaWR0aCYmdGhpcy5fY2hhcmFjdGVyRm9udD09PXJ8fCh0aGlzLl9jaGFyYWN0ZXJXaWR0aD10LnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jaGFyYWN0ZXJGb250PXIsdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlPXt9KSx0aGlzLl9zdGF0ZS5jbGVhcigpLHRoaXMuX3N0YXRlLnJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZS5jbGVhcigpLHRoaXMuX2NsZWFyQWxsKCl9LHQucHJvdG90eXBlLl9mb3JFYWNoQ2VsbD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPWU7aTw9dDtpKyspZm9yKHZhciBuPWkrdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbz10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQobikscz10aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmdldEpvaW5lZENoYXJhY3RlcnMobiksYT0wO2E8dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2ErKyl7by5sb2FkQ2VsbChhLHRoaXMuX3dvcmtDZWxsKTt2YXIgYz10aGlzLl93b3JrQ2VsbCxsPSExLGg9YTtpZigwIT09Yy5nZXRXaWR0aCgpKXtpZihzLmxlbmd0aD4wJiZhPT09c1swXVswXSl7bD0hMDt2YXIgZj1zLnNoaWZ0KCk7Yz1uZXcgcC5Kb2luZWRDZWxsRGF0YSh0aGlzLl93b3JrQ2VsbCxvLnRyYW5zbGF0ZVRvU3RyaW5nKCEwLGZbMF0sZlsxXSksZlsxXS1mWzBdKSxoPWZbMV0tMX0hbCYmdGhpcy5faXNPdmVybGFwcGluZyhjKSYmaDxvLmxlbmd0aC0xJiZvLmdldENvZGVQb2ludChoKzEpPT09dS5OVUxMX0NFTExfQ09ERSYmKGMuY29udGVudCY9LTEyNTgyOTEzLGMuY29udGVudHw9Mjw8MjIpLHIoYyxhLGkpLGE9aH19fSx0LnByb3RvdHlwZS5fZHJhd0JhY2tncm91bmQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9dGhpcy5fY3R4LG49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLG89MCxzPTAsYz1udWxsO2kuc2F2ZSgpLHRoaXMuX2ZvckVhY2hDZWxsKGUsdCwoZnVuY3Rpb24oZSx0LGwpe3ZhciB1LGYsXz1udWxsO2UuaXNJbnZlcnNlKCk/Xz1lLmlzRmdEZWZhdWx0KCk/ci5fY29sb3JzLmZvcmVncm91bmQuY3NzOmUuaXNGZ1JHQigpPyJyZ2IoIitoLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEZnQ29sb3IoKSkuam9pbigiLCIpKyIpIjpyLl9jb2xvcnMuYW5zaVtlLmdldEZnQ29sb3IoKV0uY3NzOmUuaXNCZ1JHQigpP189InJnYigiK2guQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0QmdDb2xvcigpKS5qb2luKCIsIikrIikiOmUuaXNCZ1BhbGV0dGUoKSYmKF89ci5fY29sb3JzLmFuc2lbZS5nZXRCZ0NvbG9yKCldLmNzcyk7dmFyIGQ9ITE7dHJ5e2Zvcih2YXIgcD1hKHIuX2RlY29yYXRpb25TZXJ2aWNlLmdldERlY29yYXRpb25zQXRDZWxsKHQsci5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ArbCkpLHY9cC5uZXh0KCk7IXYuZG9uZTt2PXAubmV4dCgpKXt2YXIgeT12LnZhbHVlOyJ0b3AiIT09eS5vcHRpb25zLmxheWVyJiZkfHwoeS5iYWNrZ3JvdW5kQ29sb3JSR0ImJihfPXkuYmFja2dyb3VuZENvbG9yUkdCLmNzcyksZD0idG9wIj09PXkub3B0aW9ucy5sYXllcil9fWNhdGNoKGUpe3U9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e3YmJiF2LmRvbmUmJihmPXAucmV0dXJuKSYmZi5jYWxsKHApfWZpbmFsbHl7aWYodSl0aHJvdyB1LmVycm9yfX1udWxsPT09YyYmKG89dCxzPWwpLGwhPT1zPyhpLmZpbGxTdHlsZT1jfHwiIixyLl9maWxsQ2VsbHMobyxzLG4tbywxKSxvPXQscz1sKTpjIT09XyYmKGkuZmlsbFN0eWxlPWN8fCIiLHIuX2ZpbGxDZWxscyhvLHMsdC1vLDEpLG89dCxzPWwpLGM9X30pKSxudWxsIT09YyYmKGkuZmlsbFN0eWxlPWMsdGhpcy5fZmlsbENlbGxzKG8scyxuLW8sMSkpLGkucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fZHJhd0ZvcmVncm91bmQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RoaXMuX2ZvckVhY2hDZWxsKGUsdCwoZnVuY3Rpb24oZSx0LGkpe2lmKCFlLmlzSW52aXNpYmxlKCkmJihyLl9kcmF3Q2hhcnMoZSx0LGkpLGUuaXNVbmRlcmxpbmUoKXx8ZS5pc1N0cmlrZXRocm91Z2goKSkpe2lmKHIuX2N0eC5zYXZlKCksZS5pc0ludmVyc2UoKSlpZihlLmlzQmdEZWZhdWx0KCkpci5fY3R4LmZpbGxTdHlsZT1yLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7ZWxzZSBpZihlLmlzQmdSR0IoKSlyLl9jdHguZmlsbFN0eWxlPSJyZ2IoIitoLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEJnQ29sb3IoKSkuam9pbigiLCIpKyIpIjtlbHNle3ZhciBuPWUuZ2V0QmdDb2xvcigpO3IuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJm48OCYmKG4rPTgpLHIuX2N0eC5maWxsU3R5bGU9ci5fY29sb3JzLmFuc2lbbl0uY3NzfWVsc2UgaWYoZS5pc0ZnRGVmYXVsdCgpKXIuX2N0eC5maWxsU3R5bGU9ci5fY29sb3JzLmZvcmVncm91bmQuY3NzO2Vsc2UgaWYoZS5pc0ZnUkdCKCkpci5fY3R4LmZpbGxTdHlsZT0icmdiKCIraC5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRGZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI7ZWxzZXt2YXIgbz1lLmdldEZnQ29sb3IoKTtyLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZvPDgmJihvKz04KSxyLl9jdHguZmlsbFN0eWxlPXIuX2NvbG9ycy5hbnNpW29dLmNzc31lLmlzU3RyaWtldGhyb3VnaCgpJiZyLl9maWxsTWlkZGxlTGluZUF0Q2VsbHModCxpLGUuZ2V0V2lkdGgoKSksZS5pc1VuZGVybGluZSgpJiZyLl9maWxsQm90dG9tTGluZUF0Q2VsbHModCxpLGUuZ2V0V2lkdGgoKSksci5fY3R4LnJlc3RvcmUoKX19KSl9LHQucHJvdG90eXBlLm9uR3JpZENoYW5nZWQ9ZnVuY3Rpb24oZSx0KXswIT09dGhpcy5fc3RhdGUuY2FjaGUubGVuZ3RoJiYodGhpcy5fY2hhckF0bGFzJiZ0aGlzLl9jaGFyQXRsYXMuYmVnaW5GcmFtZSgpLHRoaXMuX2NsZWFyQ2VsbHMoMCxlLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0LWUrMSksdGhpcy5fZHJhd0JhY2tncm91bmQoZSx0KSx0aGlzLl9kcmF3Rm9yZWdyb3VuZChlLHQpKX0sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3NldFRyYW5zcGFyZW5jeSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KX0sdC5wcm90b3R5cGUuX2lzT3ZlcmxhcHBpbmc9ZnVuY3Rpb24oZSl7aWYoMSE9PWUuZ2V0V2lkdGgoKSlyZXR1cm4hMTtpZihlLmdldENvZGUoKTwyNTYpcmV0dXJuITE7dmFyIHQ9ZS5nZXRDaGFycygpO2lmKHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZS5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4gdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW3RdO3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZvbnQ9dGhpcy5fY2hhcmFjdGVyRm9udDt2YXIgcj1NYXRoLmZsb29yKHRoaXMuX2N0eC5tZWFzdXJlVGV4dCh0KS53aWR0aCk+dGhpcy5fY2hhcmFjdGVyV2lkdGg7cmV0dXJuIHRoaXMuX2N0eC5yZXN0b3JlKCksdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW3RdPXIscn0sbyhbcyg1LF8uSUJ1ZmZlclNlcnZpY2UpLHMoNixfLklPcHRpb25zU2VydmljZSkscyg3LGQuSUNoYXJhY3RlckpvaW5lclNlcnZpY2UpLHMoOCxfLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShsLkJhc2VSZW5kZXJMYXllcik7dC5UZXh0UmVuZGVyTGF5ZXI9dn0sOTYxNjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJhc2VDaGFyQXRsYXM9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2RpZFdhcm1VcD0hMX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUud2FybVVwPWZ1bmN0aW9uKCl7dGhpcy5fZGlkV2FybVVwfHwodGhpcy5fZG9XYXJtVXAoKSx0aGlzLl9kaWRXYXJtVXA9ITApfSxlLnByb3RvdHlwZS5fZG9XYXJtVXA9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5iZWdpbkZyYW1lPWZ1bmN0aW9uKCl7fSxlfSgpO3QuQmFzZUNoYXJBdGxhcz1yfSwxNDIwOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5yZW1vdmVUZXJtaW5hbEZyb21DYWNoZT10LmFjcXVpcmVDaGFyQXRsYXM9dm9pZCAwO3ZhciBpPXIoMjA0MCksbj1yKDE5MDYpLG89W107dC5hY3F1aXJlQ2hhckF0bGFzPWZ1bmN0aW9uKGUsdCxyLHMsYSl7Zm9yKHZhciBjPSgwLGkuZ2VuZXJhdGVDb25maWcpKHMsYSxlLHIpLGw9MDtsPG8ubGVuZ3RoO2wrKyl7dmFyIGg9KHU9b1tsXSkub3duZWRCeS5pbmRleE9mKHQpO2lmKGg+PTApe2lmKCgwLGkuY29uZmlnRXF1YWxzKSh1LmNvbmZpZyxjKSlyZXR1cm4gdS5hdGxhczsxPT09dS5vd25lZEJ5Lmxlbmd0aD8odS5hdGxhcy5kaXNwb3NlKCksby5zcGxpY2UobCwxKSk6dS5vd25lZEJ5LnNwbGljZShoLDEpO2JyZWFrfX1mb3IobD0wO2w8by5sZW5ndGg7bCsrKXt2YXIgdT1vW2xdO2lmKCgwLGkuY29uZmlnRXF1YWxzKSh1LmNvbmZpZyxjKSlyZXR1cm4gdS5vd25lZEJ5LnB1c2godCksdS5hdGxhc312YXIgZj17YXRsYXM6bmV3IG4uRHluYW1pY0NoYXJBdGxhcyhkb2N1bWVudCxjKSxjb25maWc6Yyxvd25lZEJ5Olt0XX07cmV0dXJuIG8ucHVzaChmKSxmLmF0bGFzfSx0LnJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8by5sZW5ndGg7dCsrKXt2YXIgcj1vW3RdLm93bmVkQnkuaW5kZXhPZihlKTtpZigtMSE9PXIpezE9PT1vW3RdLm93bmVkQnkubGVuZ3RoPyhvW3RdLmF0bGFzLmRpc3Bvc2UoKSxvLnNwbGljZSh0LDEpKTpvW3RdLm93bmVkQnkuc3BsaWNlKHIsMSk7YnJlYWt9fX19LDIwNDA6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmlzMjU2Q29sb3I9dC5jb25maWdFcXVhbHM9dC5nZW5lcmF0ZUNvbmZpZz12b2lkIDA7dmFyIGk9cig2NDMpO3QuZ2VuZXJhdGVDb25maWc9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49e2ZvcmVncm91bmQ6aS5mb3JlZ3JvdW5kLGJhY2tncm91bmQ6aS5iYWNrZ3JvdW5kLGN1cnNvcjp2b2lkIDAsY3Vyc29yQWNjZW50OnZvaWQgMCxzZWxlY3Rpb246dm9pZCAwLGFuc2k6aS5hbnNpLnNsaWNlKCl9O3JldHVybntkZXZpY2VQaXhlbFJhdGlvOndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHNjYWxlZENoYXJXaWR0aDplLHNjYWxlZENoYXJIZWlnaHQ6dCxmb250RmFtaWx5OnIuZm9udEZhbWlseSxmb250U2l6ZTpyLmZvbnRTaXplLGZvbnRXZWlnaHQ6ci5mb250V2VpZ2h0LGZvbnRXZWlnaHRCb2xkOnIuZm9udFdlaWdodEJvbGQsYWxsb3dUcmFuc3BhcmVuY3k6ci5hbGxvd1RyYW5zcGFyZW5jeSxjb2xvcnM6bn19LHQuY29uZmlnRXF1YWxzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTA7cjxlLmNvbG9ycy5hbnNpLmxlbmd0aDtyKyspaWYoZS5jb2xvcnMuYW5zaVtyXS5yZ2JhIT09dC5jb2xvcnMuYW5zaVtyXS5yZ2JhKXJldHVybiExO3JldHVybiBlLmRldmljZVBpeGVsUmF0aW89PT10LmRldmljZVBpeGVsUmF0aW8mJmUuZm9udEZhbWlseT09PXQuZm9udEZhbWlseSYmZS5mb250U2l6ZT09PXQuZm9udFNpemUmJmUuZm9udFdlaWdodD09PXQuZm9udFdlaWdodCYmZS5mb250V2VpZ2h0Qm9sZD09PXQuZm9udFdlaWdodEJvbGQmJmUuYWxsb3dUcmFuc3BhcmVuY3k9PT10LmFsbG93VHJhbnNwYXJlbmN5JiZlLnNjYWxlZENoYXJXaWR0aD09PXQuc2NhbGVkQ2hhcldpZHRoJiZlLnNjYWxlZENoYXJIZWlnaHQ9PT10LnNjYWxlZENoYXJIZWlnaHQmJmUuY29sb3JzLmZvcmVncm91bmQ9PT10LmNvbG9ycy5mb3JlZ3JvdW5kJiZlLmNvbG9ycy5iYWNrZ3JvdW5kPT09dC5jb2xvcnMuYmFja2dyb3VuZH0sdC5pczI1NkNvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiBlPGkuREVGQVVMVF9DT0xPUn19LDg4MDM6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNIQVJfQVRMQVNfQ0VMTF9TUEFDSU5HPXQuVEVYVF9CQVNFTElORT10LkRJTV9PUEFDSVRZPXQuSU5WRVJURURfREVGQVVMVF9DT0xPUj12b2lkIDA7dmFyIGk9cig2MTE0KTt0LklOVkVSVEVEX0RFRkFVTFRfQ09MT1I9MjU3LHQuRElNX09QQUNJVFk9LjUsdC5URVhUX0JBU0VMSU5FPWkuaXNGaXJlZm94fHxpLmlzTGVnYWN5RWRnZT8iYm90dG9tIjoiaWRlb2dyYXBoaWMiLHQuQ0hBUl9BVExBU19DRUxMX1NQQUNJTkc9MX0sMTkwNjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Ob25lQ2hhckF0bGFzPXQuRHluYW1pY0NoYXJBdGxhcz10LmdldEdseXBoQ2FjaGVLZXk9dm9pZCAwO3ZhciBvPXIoODgwMykscz1yKDk2MTYpLGE9cig1NjgwKSxjPXIoNzAwMSksbD1yKDYxMTQpLGg9cigxNzUyKSx1PXIoODA1NSksZj0xMDI0LF89MTAyNCxkPXtjc3M6InJnYmEoMCwgMCwgMCwgMCkiLHJnYmE6MH07ZnVuY3Rpb24gcChlKXtyZXR1cm4gZS5jb2RlPDwyMXxlLmJnPDwxMnxlLmZnPDwzfChlLmJvbGQ/MDo0KSsoZS5kaW0/MDoyKSsoZS5pdGFsaWM/MDoxKX10LmdldEdseXBoQ2FjaGVLZXk9cDt2YXIgdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO2kuX2NvbmZpZz1yLGkuX2RyYXdUb0NhY2hlQ291bnQ9MCxpLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA9W10saS5fYml0bWFwQ29tbWl0VGltZW91dD1udWxsLGkuX2JpdG1hcD1udWxsLGkuX2NhY2hlQ2FudmFzPXQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksaS5fY2FjaGVDYW52YXMud2lkdGg9ZixpLl9jYWNoZUNhbnZhcy5oZWlnaHQ9XyxpLl9jYWNoZUN0eD0oMCxoLnRocm93SWZGYWxzeSkoaS5fY2FjaGVDYW52YXMuZ2V0Q29udGV4dCgiMmQiLHthbHBoYTohMH0pKTt2YXIgbj10LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO24ud2lkdGg9aS5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCxuLmhlaWdodD1pLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCxpLl90bXBDdHg9KDAsaC50aHJvd0lmRmFsc3kpKG4uZ2V0Q29udGV4dCgiMmQiLHthbHBoYTppLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3l9KSksaS5fd2lkdGg9TWF0aC5mbG9vcihmL2kuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgpLGkuX2hlaWdodD1NYXRoLmZsb29yKF8vaS5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO3ZhciBvPWkuX3dpZHRoKmkuX2hlaWdodDtyZXR1cm4gaS5fY2FjaGVNYXA9bmV3IGMuTFJVTWFwKG8pLGkuX2NhY2hlTWFwLnByZWFsbG9jKG8pLGl9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQpLHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQ9bnVsbCl9LHQucHJvdG90eXBlLmJlZ2luRnJhbWU9ZnVuY3Rpb24oKXt0aGlzLl9kcmF3VG9DYWNoZUNvdW50PTB9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7aWYodGhpcy5fY2FjaGVNYXAuc2l6ZT4wKXt2YXIgZT10aGlzLl93aWR0aCp0aGlzLl9oZWlnaHQ7dGhpcy5fY2FjaGVNYXA9bmV3IGMuTFJVTWFwKGUpLHRoaXMuX2NhY2hlTWFwLnByZWFsbG9jKGUpfXRoaXMuX2NhY2hlQ3R4LmNsZWFyUmVjdCgwLDAsZixfKSx0aGlzLl90bXBDdHguY2xlYXJSZWN0KDAsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KX0sdC5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbihlLHQscixpKXtpZigzMj09PXQuY29kZSlyZXR1cm4hMDtpZighdGhpcy5fY2FuQ2FjaGUodCkpcmV0dXJuITE7dmFyIG49cCh0KSxvPXRoaXMuX2NhY2hlTWFwLmdldChuKTtpZihudWxsIT1vKXJldHVybiB0aGlzLl9kcmF3RnJvbUNhY2hlKGUsbyxyLGkpLCEwO2lmKHRoaXMuX2RyYXdUb0NhY2hlQ291bnQ8MTAwKXt2YXIgcztzPXRoaXMuX2NhY2hlTWFwLnNpemU8dGhpcy5fY2FjaGVNYXAuY2FwYWNpdHk/dGhpcy5fY2FjaGVNYXAuc2l6ZTp0aGlzLl9jYWNoZU1hcC5wZWVrKCkuaW5kZXg7dmFyIGE9dGhpcy5fZHJhd1RvQ2FjaGUodCxzKTtyZXR1cm4gdGhpcy5fY2FjaGVNYXAuc2V0KG4sYSksdGhpcy5fZHJhd0Zyb21DYWNoZShlLGEscixpKSwhMH1yZXR1cm4hMX0sdC5wcm90b3R5cGUuX2NhbkNhY2hlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNvZGU8MjU2fSx0LnByb3RvdHlwZS5fdG9Db29yZGluYXRlWD1mdW5jdGlvbihlKXtyZXR1cm4gZSV0aGlzLl93aWR0aCp0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRofSx0LnByb3RvdHlwZS5fdG9Db29yZGluYXRlWT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5mbG9vcihlL3RoaXMuX3dpZHRoKSp0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodH0sdC5wcm90b3R5cGUuX2RyYXdGcm9tQ2FjaGU9ZnVuY3Rpb24oZSx0LHIsaSl7aWYoIXQuaXNFbXB0eSl7dmFyIG49dGhpcy5fdG9Db29yZGluYXRlWCh0LmluZGV4KSxvPXRoaXMuX3RvQ29vcmRpbmF0ZVkodC5pbmRleCk7ZS5kcmF3SW1hZ2UodC5pbkJpdG1hcD90aGlzLl9iaXRtYXA6dGhpcy5fY2FjaGVDYW52YXMsbixvLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQscixpLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpfX0sdC5wcm90b3R5cGUuX2dldENvbG9yRnJvbUFuc2lJbmRleD1mdW5jdGlvbihlKXtyZXR1cm4gZTx0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoP3RoaXMuX2NvbmZpZy5jb2xvcnMuYW5zaVtlXTphLkRFRkFVTFRfQU5TSV9DT0xPUlNbZV19LHQucHJvdG90eXBlLl9nZXRCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeT9kOmUuYmc9PT1vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I/dGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kOmUuYmc8MjU2P3RoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChlLmJnKTp0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmR9LHQucHJvdG90eXBlLl9nZXRGb3JlZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmc9PT1vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I/dS5jb2xvci5vcGFxdWUodGhpcy5fY29uZmlnLmNvbG9ycy5iYWNrZ3JvdW5kKTplLmZnPDI1Nj90aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgoZS5mZyk6dGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kfSx0LnByb3RvdHlwZS5fZHJhd1RvQ2FjaGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kcmF3VG9DYWNoZUNvdW50KyssdGhpcy5fdG1wQ3R4LnNhdmUoKTt2YXIgcj10aGlzLl9nZXRCYWNrZ3JvdW5kQ29sb3IoZSk7dGhpcy5fdG1wQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iY29weSIsdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZT1yLmNzcyx0aGlzLl90bXBDdHguZmlsbFJlY3QoMCwwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpLHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1vdmVyIjt2YXIgaT1lLmJvbGQ/dGhpcy5fY29uZmlnLmZvbnRXZWlnaHRCb2xkOnRoaXMuX2NvbmZpZy5mb250V2VpZ2h0LG49ZS5pdGFsaWM/Iml0YWxpYyI6IiI7dGhpcy5fdG1wQ3R4LmZvbnQ9bisiICIraSsiICIrdGhpcy5fY29uZmlnLmZvbnRTaXplKnRoaXMuX2NvbmZpZy5kZXZpY2VQaXhlbFJhdGlvKyJweCAiK3RoaXMuX2NvbmZpZy5mb250RmFtaWx5LHRoaXMuX3RtcEN0eC50ZXh0QmFzZWxpbmU9by5URVhUX0JBU0VMSU5FLHRoaXMuX3RtcEN0eC5maWxsU3R5bGU9dGhpcy5fZ2V0Rm9yZWdyb3VuZENvbG9yKGUpLmNzcyxlLmRpbSYmKHRoaXMuX3RtcEN0eC5nbG9iYWxBbHBoYT1vLkRJTV9PUEFDSVRZKSx0aGlzLl90bXBDdHguZmlsbFRleHQoZS5jaGFycywwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KTt2YXIgcz10aGlzLl90bXBDdHguZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KSxhPSExO2lmKHRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeXx8KGE9ZyhzLHIpKSxhJiYiXyI9PT1lLmNoYXJzJiYhdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KWZvcih2YXIgYz0xO2M8PTUmJih0aGlzLl90bXBDdHguZmlsbFRleHQoZS5jaGFycywwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0LWMpLGE9ZyhzPXRoaXMuX3RtcEN0eC5nZXRJbWFnZURhdGEoMCwwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpLHIpKTtjKyspO3RoaXMuX3RtcEN0eC5yZXN0b3JlKCk7dmFyIGw9dGhpcy5fdG9Db29yZGluYXRlWCh0KSxoPXRoaXMuX3RvQ29vcmRpbmF0ZVkodCk7dGhpcy5fY2FjaGVDdHgucHV0SW1hZ2VEYXRhKHMsbCxoKTt2YXIgdT17aW5kZXg6dCxpc0VtcHR5OmEsaW5CaXRtYXA6ITF9O3JldHVybiB0aGlzLl9hZGRHbHlwaFRvQml0bWFwKHUpLHV9LHQucHJvdG90eXBlLl9hZGRHbHlwaFRvQml0bWFwPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ISgiY3JlYXRlSW1hZ2VCaXRtYXAiaW4gd2luZG93KXx8bC5pc0ZpcmVmb3h8fGwuaXNTYWZhcml8fCh0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXAucHVzaChlKSxudWxsPT09dGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCYmKHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2dlbmVyYXRlQml0bWFwKCl9KSwxMDApKSl9LHQucHJvdG90eXBlLl9nZW5lcmF0ZUJpdG1hcD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA7dGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwPVtdLHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcCh0aGlzLl9jYWNoZUNhbnZhcykudGhlbigoZnVuY3Rpb24ocil7ZS5fYml0bWFwPXI7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXS5pbkJpdG1hcD0hMH0pKSx0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0PW51bGx9LHR9KHMuQmFzZUNoYXJBdGxhcyk7dC5EeW5hbWljQ2hhckF0bGFzPXY7dmFyIHk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3JldHVybiBlLmNhbGwodGhpcyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiExfSx0fShzLkJhc2VDaGFyQXRsYXMpO2Z1bmN0aW9uIGcoZSx0KXtmb3IodmFyIHI9ITAsaT10LnJnYmE+Pj4yNCxuPXQucmdiYT4+PjE2JjI1NSxvPXQucmdiYT4+PjgmMjU1LHM9MDtzPGUuZGF0YS5sZW5ndGg7cys9NCllLmRhdGFbc109PT1pJiZlLmRhdGFbcysxXT09PW4mJmUuZGF0YVtzKzJdPT09bz9lLmRhdGFbcyszXT0wOnI9ITE7cmV0dXJuIHJ9dC5Ob25lQ2hhckF0bGFzPXl9LDcwMDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MUlVNYXA9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNhcGFjaXR5PWUsdGhpcy5fbWFwPXt9LHRoaXMuX2hlYWQ9bnVsbCx0aGlzLl90YWlsPW51bGwsdGhpcy5fbm9kZVBvb2w9W10sdGhpcy5zaXplPTB9cmV0dXJuIGUucHJvdG90eXBlLl91bmxpbmtOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucHJldixyPWUubmV4dDtlPT09dGhpcy5faGVhZCYmKHRoaXMuX2hlYWQ9ciksZT09PXRoaXMuX3RhaWwmJih0aGlzLl90YWlsPXQpLG51bGwhPT10JiYodC5uZXh0PXIpLG51bGwhPT1yJiYoci5wcmV2PXQpfSxlLnByb3RvdHlwZS5fYXBwZW5kTm9kZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl90YWlsO251bGwhPT10JiYodC5uZXh0PWUpLGUucHJldj10LGUubmV4dD1udWxsLHRoaXMuX3RhaWw9ZSxudWxsPT09dGhpcy5faGVhZCYmKHRoaXMuX2hlYWQ9ZSl9LGUucHJvdG90eXBlLnByZWFsbG9jPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLl9ub2RlUG9vbCxyPTA7cjxlO3IrKyl0LnB1c2goe3ByZXY6bnVsbCxuZXh0Om51bGwsa2V5Om51bGwsdmFsdWU6bnVsbH0pfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbWFwW2VdO3JldHVybiB2b2lkIDAhPT10Pyh0aGlzLl91bmxpbmtOb2RlKHQpLHRoaXMuX2FwcGVuZE5vZGUodCksdC52YWx1ZSk6bnVsbH0sZS5wcm90b3R5cGUucGVla1ZhbHVlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21hcFtlXTtyZXR1cm4gdm9pZCAwIT09dD90LnZhbHVlOm51bGx9LGUucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9oZWFkO3JldHVybiBudWxsPT09ZT9udWxsOmUudmFsdWV9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX21hcFtlXTtpZih2b2lkIDAhPT1yKXI9dGhpcy5fbWFwW2VdLHRoaXMuX3VubGlua05vZGUociksci52YWx1ZT10O2Vsc2UgaWYodGhpcy5zaXplPj10aGlzLmNhcGFjaXR5KXI9dGhpcy5faGVhZCx0aGlzLl91bmxpbmtOb2RlKHIpLGRlbGV0ZSB0aGlzLl9tYXBbci5rZXldLHIua2V5PWUsci52YWx1ZT10LHRoaXMuX21hcFtlXT1yO2Vsc2V7dmFyIGk9dGhpcy5fbm9kZVBvb2w7aS5sZW5ndGg+MD8oKHI9aS5wb3AoKSkua2V5PWUsci52YWx1ZT10KTpyPXtwcmV2Om51bGwsbmV4dDpudWxsLGtleTplLHZhbHVlOnR9LHRoaXMuX21hcFtlXT1yLHRoaXMuc2l6ZSsrfXRoaXMuX2FwcGVuZE5vZGUocil9LGV9KCk7dC5MUlVNYXA9cn0sMTI5NjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Eb21SZW5kZXJlcj12b2lkIDA7dmFyIGM9cigzNzg3KSxsPXIoODgwMyksaD1yKDg0NCksdT1yKDQ3MjUpLGY9cigyNTg1KSxfPXIoODQ2MCksZD1yKDgwNTUpLHA9cig5NjMxKSx2PSJ4dGVybS1kb20tcmVuZGVyZXItb3duZXItIix5PSJ4dGVybS1mZy0iLGc9Inh0ZXJtLWJnLSIsbT0ieHRlcm0tZm9jdXMiLGI9MSxTPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxsLGgsdSl7dmFyIGY9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBmLl9jb2xvcnM9dCxmLl9lbGVtZW50PXIsZi5fc2NyZWVuRWxlbWVudD1pLGYuX3ZpZXdwb3J0RWxlbWVudD1uLGYuX2xpbmtpZmllcj1vLGYuX2xpbmtpZmllcjI9cyxmLl9jaGFyU2l6ZVNlcnZpY2U9bCxmLl9vcHRpb25zU2VydmljZT1oLGYuX2J1ZmZlclNlcnZpY2U9dSxmLl90ZXJtaW5hbENsYXNzPWIrKyxmLl9yb3dFbGVtZW50cz1bXSxmLl9yb3dDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZi5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLXJvd3MiKSxmLl9yb3dDb250YWluZXIuc3R5bGUubGluZUhlaWdodD0ibm9ybWFsIixmLl9yb3dDb250YWluZXIuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKSxmLl9yZWZyZXNoUm93RWxlbWVudHMoZi5fYnVmZmVyU2VydmljZS5jb2xzLGYuX2J1ZmZlclNlcnZpY2Uucm93cyksZi5fc2VsZWN0aW9uQ29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGYuX3NlbGVjdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1zZWxlY3Rpb24iKSxmLl9zZWxlY3Rpb25Db250YWluZXIuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKSxmLmRpbWVuc2lvbnM9e3NjYWxlZENoYXJXaWR0aDowLHNjYWxlZENoYXJIZWlnaHQ6MCxzY2FsZWRDZWxsV2lkdGg6MCxzY2FsZWRDZWxsSGVpZ2h0OjAsc2NhbGVkQ2hhckxlZnQ6MCxzY2FsZWRDaGFyVG9wOjAsc2NhbGVkQ2FudmFzV2lkdGg6MCxzY2FsZWRDYW52YXNIZWlnaHQ6MCxjYW52YXNXaWR0aDowLGNhbnZhc0hlaWdodDowLGFjdHVhbENlbGxXaWR0aDowLGFjdHVhbENlbGxIZWlnaHQ6MH0sZi5fdXBkYXRlRGltZW5zaW9ucygpLGYuX2luamVjdENzcygpLGYuX3Jvd0ZhY3Rvcnk9YS5jcmVhdGVJbnN0YW5jZShjLkRvbVJlbmRlcmVyUm93RmFjdG9yeSxkb2N1bWVudCxmLl9jb2xvcnMpLGYuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCh2K2YuX3Rlcm1pbmFsQ2xhc3MpLGYuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZi5fcm93Q29udGFpbmVyKSxmLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKGYuX3NlbGVjdGlvbkNvbnRhaW5lciksZi5yZWdpc3RlcihmLl9saW5raWZpZXIub25TaG93TGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTGlua0hvdmVyKGUpfSkpKSxmLnJlZ2lzdGVyKGYuX2xpbmtpZmllci5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rTGVhdmUoZSl9KSkpLGYucmVnaXN0ZXIoZi5fbGlua2lmaWVyMi5vblNob3dMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rSG92ZXIoZSl9KSkpLGYucmVnaXN0ZXIoZi5fbGlua2lmaWVyMi5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rTGVhdmUoZSl9KSkpLGZ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlZHJhdyIse2dldDpmdW5jdGlvbigpe3JldHVybihuZXcgXy5FdmVudEVtaXR0ZXIpLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodit0aGlzLl90ZXJtaW5hbENsYXNzKSwoMCxwLnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9yb3dDb250YWluZXIsdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50LHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3VwZGF0ZURpbWVuc2lvbnM9ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGg9dGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0PU1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoPXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGgrTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxldHRlclNwYWNpbmcpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0PU1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5saW5lSGVpZ2h0KSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQ9MCx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcD0wLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aD10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoKnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0KnRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyx0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGg9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGgvd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0L3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aC90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodC90aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7dHJ5e2Zvcih2YXIgcj1hKHRoaXMuX3Jvd0VsZW1lbnRzKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG49aS52YWx1ZTtuLnN0eWxlLndpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCsicHgiLG4uc3R5bGUuaGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS5saW5lSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIn19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnR8fCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KSk7dmFyIG89dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIHNwYW4geyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGhlaWdodDogMTAwJTsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6ICIrdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCsicHh9Ijt0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50LnRleHRDb250ZW50PW8sdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodD10aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuaGVpZ2h0LHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoKyJweCIsdGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS5oZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCsicHgifSx0LnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dGhpcy5fY29sb3JzPWUsdGhpcy5faW5qZWN0Q3NzKCl9LHQucHJvdG90eXBlLl9pbmplY3RDc3M9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3RoZW1lU3R5bGVFbGVtZW50fHwodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSx0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50KSk7dmFyIHQ9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIHsgY29sb3I6ICIrdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzKyI7IGZvbnQtZmFtaWx5OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSsiOyBmb250LXNpemU6ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSsicHg7fSI7dCs9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIHNwYW46bm90KC4iK2MuQk9MRF9DTEFTUysiKSB7IGZvbnQtd2VpZ2h0OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodCsiO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiBzcGFuLiIrYy5CT0xEX0NMQVNTKyIgeyBmb250LXdlaWdodDogIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHRCb2xkKyI7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIHNwYW4uIitjLklUQUxJQ19DTEFTUysiIHsgZm9udC1zdHlsZTogaXRhbGljO30iLHQrPSJAa2V5ZnJhbWVzIGJsaW5rX2JveF9zaGFkb3dfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgeyA1MCUgeyAgYm94LXNoYWRvdzogbm9uZTsgfX0iLHQrPSJAa2V5ZnJhbWVzIGJsaW5rX2Jsb2NrXyIrdGhpcy5fdGVybWluYWxDbGFzcysiIHsgMCUgeyAgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiOyAgY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3MrIjsgfSA1MCUgeyAgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcysiOyAgY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIjsgfX0iLHQrPXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93czpub3QoLnh0ZXJtLWZvY3VzKSAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIiB7IG91dGxpbmU6IDFweCBzb2xpZCAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyI7IG91dGxpbmUtb2Zmc2V0OiAtMXB4O30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cy54dGVybS1mb2N1cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfQkxJTktfQ0xBU1MrIjpub3QoLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIikgeyBhbmltYXRpb246IGJsaW5rX2JveF9zaGFkb3dfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgMXMgc3RlcC1lbmQgaW5maW5pdGU7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzLnh0ZXJtLWZvY3VzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9CTElOS19DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIiB7IGFuaW1hdGlvbjogYmxpbmtfYmxvY2tfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgMXMgc3RlcC1lbmQgaW5maW5pdGU7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzLnh0ZXJtLWZvY3VzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUysiIHsgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiOyBjb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcysiO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTKyIgeyBib3gtc2hhZG93OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yV2lkdGgrInB4IDAgMCAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyIgaW5zZXQ7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MrIiB7IGJveC1zaGFkb3c6IDAgLTFweCAwICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIiBpbnNldDt9Iix0Kz10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXNlbGVjdGlvbiB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB6LWluZGV4OiAxOyBwb2ludGVyLWV2ZW50czogbm9uZTt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXNlbGVjdGlvbiBkaXYgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5fY29sb3JzLnNlbGVjdGlvbk9wYXF1ZS5jc3MrIjt9Iix0aGlzLl9jb2xvcnMuYW5zaS5mb3JFYWNoKChmdW5jdGlvbihyLGkpe3QrPWUuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIit5K2krIiB7IGNvbG9yOiAiK3IuY3NzKyI7IH0iK2UuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIitnK2krIiB7IGJhY2tncm91bmQtY29sb3I6ICIrci5jc3MrIjsgfSJ9KSksdCs9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC4iK3krbC5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SKyIgeyBjb2xvcjogIitkLmNvbG9yLm9wYXF1ZSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCkuY3NzKyI7IH0iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIitnK2wuSU5WRVJURURfREVGQVVMVF9DT0xPUisiIHsgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3MrIjsgfSIsdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQudGV4dENvbnRlbnQ9dH0sdC5wcm90b3R5cGUub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5fcmVmcmVzaFJvd0VsZW1lbnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aDtyPD10O3IrKyl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKGkpLHRoaXMuX3Jvd0VsZW1lbnRzLnB1c2goaSl9Zm9yKDt0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGg+dDspdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpKX0sdC5wcm90b3R5cGUub25SZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZWZyZXNoUm93RWxlbWVudHMoZSx0KSx0aGlzLl91cGRhdGVEaW1lbnNpb25zKCl9LHQucHJvdG90eXBlLm9uQ2hhclNpemVDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShtKX0sdC5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe3RoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKG0pfSx0LnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZSx0LHIpe2Zvcig7dGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aDspdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlblswXSk7aWYodGhpcy5fcm93RmFjdG9yeS5vblNlbGVjdGlvbkNoYW5nZWQoZSx0LHIpLHRoaXMucmVuZGVyUm93cygwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSxlJiZ0KXt2YXIgaT1lWzFdLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG49dFsxXS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxvPU1hdGgubWF4KGksMCkscz1NYXRoLm1pbihuLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKTtpZighKG8+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c3x8czwwKSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKHIpe3ZhciBjPWVbMF0+dFswXTthLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQobyxjP3RbMF06ZVswXSxjP2VbMF06dFswXSxzLW8rMSkpfWVsc2V7dmFyIGw9aT09PW8/ZVswXTowLGg9bz09PW4/dFswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7YS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KG8sbCxoKSk7dmFyIHU9cy1vLTE7aWYoYS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KG8rMSwwLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx1KSksbyE9PXMpe3ZhciBmPW49PT1zP3RbMF06dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2EuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChzLDAsZikpfX10aGlzLl9zZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoYSl9fX0sdC5wcm90b3R5cGUuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQ9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09aSYmKGk9MSk7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uc3R5bGUuaGVpZ2h0PWkqdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixuLnN0eWxlLnRvcD1lKnRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS5sZWZ0PXQqdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCsicHgiLG4uc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCooci10KSsicHgiLG59LHQucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKSx0aGlzLl9pbmplY3RDc3MoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9YSh0aGlzLl9yb3dFbGVtZW50cyksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpaS52YWx1ZS5pbm5lclRleHQ9IiJ9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sdC5wcm90b3R5cGUucmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGk9TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSksbj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rLG89ZTtvPD10O28rKyl7dmFyIHM9dGhpcy5fcm93RWxlbWVudHNbb107cy5pbm5lclRleHQ9IiI7dmFyIGE9byt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxjPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChhKSxsPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGU7cy5hcHBlbmRDaGlsZCh0aGlzLl9yb3dGYWN0b3J5LmNyZWF0ZVJvdyhjLGEsYT09PXIsbCxpLG4sdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiX3Rlcm1pbmFsU2VsZWN0b3IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iLiIrdit0aGlzLl90ZXJtaW5hbENsYXNzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9vbkxpbmtIb3Zlcj1mdW5jdGlvbihlKXt0aGlzLl9zZXRDZWxsVW5kZXJsaW5lKGUueDEsZS54MixlLnkxLGUueTIsZS5jb2xzLCEwKX0sdC5wcm90b3R5cGUuX29uTGlua0xlYXZlPWZ1bmN0aW9uKGUpe3RoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSxlLngyLGUueTEsZS55MixlLmNvbHMsITEpfSx0LnByb3RvdHlwZS5fc2V0Q2VsbFVuZGVybGluZT1mdW5jdGlvbihlLHQscixpLG4sbyl7Zm9yKDtlIT09dHx8ciE9PWk7KXt2YXIgcz10aGlzLl9yb3dFbGVtZW50c1tyXTtpZighcylyZXR1cm47dmFyIGE9cy5jaGlsZHJlbltlXTthJiYoYS5zdHlsZS50ZXh0RGVjb3JhdGlvbj1vPyJ1bmRlcmxpbmUiOiJub25lIiksKytlPj1uJiYoZT0wLHIrKyl9fSxvKFtzKDYsZi5JSW5zdGFudGlhdGlvblNlcnZpY2UpLHMoNyx1LklDaGFyU2l6ZVNlcnZpY2UpLHMoOCxmLklPcHRpb25zU2VydmljZSkscyg5LGYuSUJ1ZmZlclNlcnZpY2UpXSx0KX0oaC5EaXNwb3NhYmxlKTt0LkRvbVJlbmRlcmVyPVN9LDM3ODc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Eb21SZW5kZXJlclJvd0ZhY3Rvcnk9dC5DVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTPXQuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUz10LkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUz10LkNVUlNPUl9CTElOS19DTEFTUz10LkNVUlNPUl9DTEFTUz10LlNUUklLRVRIUk9VR0hfQ0xBU1M9dC5VTkRFUkxJTkVfQ0xBU1M9dC5JVEFMSUNfQ0xBU1M9dC5ESU1fQ0xBU1M9dC5CT0xEX0NMQVNTPXZvaWQgMDt2YXIgcz1yKDg4MDMpLGE9cig2NDMpLGM9cig1MTEpLGw9cigyNTg1KSxoPXIoODA1NSksdT1yKDQ3MjUpLGY9cig0MjY5KSxfPXIoMTc1Mik7dC5CT0xEX0NMQVNTPSJ4dGVybS1ib2xkIix0LkRJTV9DTEFTUz0ieHRlcm0tZGltIix0LklUQUxJQ19DTEFTUz0ieHRlcm0taXRhbGljIix0LlVOREVSTElORV9DTEFTUz0ieHRlcm0tdW5kZXJsaW5lIix0LlNUUklLRVRIUk9VR0hfQ0xBU1M9Inh0ZXJtLXN0cmlrZXRocm91Z2giLHQuQ1VSU09SX0NMQVNTPSJ4dGVybS1jdXJzb3IiLHQuQ1VSU09SX0JMSU5LX0NMQVNTPSJ4dGVybS1jdXJzb3ItYmxpbmsiLHQuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTPSJ4dGVybS1jdXJzb3ItYmxvY2siLHQuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUz0ieHRlcm0tY3Vyc29yLWJhciIsdC5DVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTPSJ4dGVybS1jdXJzb3ItdW5kZXJsaW5lIjt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8pe3RoaXMuX2RvY3VtZW50PWUsdGhpcy5fY29sb3JzPXQsdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZT1yLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWksdGhpcy5fY29yZVNlcnZpY2U9bix0aGlzLl9kZWNvcmF0aW9uU2VydmljZT1vLHRoaXMuX3dvcmtDZWxsPW5ldyBjLkNlbGxEYXRhLHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9ITF9cmV0dXJuIGUucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt0aGlzLl9jb2xvcnM9ZX0sZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zZWxlY3Rpb25TdGFydD1lLHRoaXMuX3NlbGVjdGlvbkVuZD10LHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9cn0sZS5wcm90b3R5cGUuY3JlYXRlUm93PWZ1bmN0aW9uKGUscixpLG4sYyxsLHUsXyl7Zm9yKHZhciBkLHYseT10aGlzLl9kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZz10aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmdldEpvaW5lZENoYXJhY3RlcnMociksbT0wLGI9TWF0aC5taW4oZS5sZW5ndGgsXyktMTtiPj0wO2ItLSlpZihlLmxvYWRDZWxsKGIsdGhpcy5fd29ya0NlbGwpLmdldENvZGUoKSE9PWEuTlVMTF9DRUxMX0NPREV8fGkmJmI9PT1jKXttPWIrMTticmVha31mb3IoYj0wO2I8bTtiKyspe2UubG9hZENlbGwoYix0aGlzLl93b3JrQ2VsbCk7dmFyIFM9dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKTtpZigwIT09Uyl7dmFyIEM9ITEsdz1iLEw9dGhpcy5fd29ya0NlbGw7aWYoZy5sZW5ndGg+MCYmYj09PWdbMF1bMF0pe0M9ITA7dmFyIEU9Zy5zaGlmdCgpO0w9bmV3IGYuSm9pbmVkQ2VsbERhdGEodGhpcy5fd29ya0NlbGwsZS50cmFuc2xhdGVUb1N0cmluZyghMCxFWzBdLEVbMV0pLEVbMV0tRVswXSksdz1FWzFdLTEsUz1MLmdldFdpZHRoKCl9dmFyIHg9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2lmKFM+MSYmKHguc3R5bGUud2lkdGg9dSpTKyJweCIpLEMmJih4LnN0eWxlLmRpc3BsYXk9ImlubGluZSIsYz49YiYmYzw9dyYmKGM9YikpLCF0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbiYmaSYmYj09PWMpc3dpdGNoKHguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9DTEFTUyksbCYmeC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX0JMSU5LX0NMQVNTKSxuKXtjYXNlImJhciI6eC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUyk7YnJlYWs7Y2FzZSJ1bmRlcmxpbmUiOnguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MpO2JyZWFrO2RlZmF1bHQ6eC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKX1MLmlzQm9sZCgpJiZ4LmNsYXNzTGlzdC5hZGQodC5CT0xEX0NMQVNTKSxMLmlzSXRhbGljKCkmJnguY2xhc3NMaXN0LmFkZCh0LklUQUxJQ19DTEFTUyksTC5pc0RpbSgpJiZ4LmNsYXNzTGlzdC5hZGQodC5ESU1fQ0xBU1MpLEwuaXNVbmRlcmxpbmUoKSYmeC5jbGFzc0xpc3QuYWRkKHQuVU5ERVJMSU5FX0NMQVNTKSxMLmlzSW52aXNpYmxlKCk/eC50ZXh0Q29udGVudD1hLldISVRFU1BBQ0VfQ0VMTF9DSEFSOngudGV4dENvbnRlbnQ9TC5nZXRDaGFycygpfHxhLldISVRFU1BBQ0VfQ0VMTF9DSEFSLEwuaXNTdHJpa2V0aHJvdWdoKCkmJnguY2xhc3NMaXN0LmFkZCh0LlNUUklLRVRIUk9VR0hfQ0xBU1MpO3ZhciBSPUwuZ2V0RmdDb2xvcigpLGs9TC5nZXRGZ0NvbG9yTW9kZSgpLE09TC5nZXRCZ0NvbG9yKCksQT1MLmdldEJnQ29sb3JNb2RlKCksTz0hIUwuaXNJbnZlcnNlKCk7aWYoTyl7dmFyIEQ9UjtSPU0sTT1EO3ZhciBUPWs7az1BLEE9VH12YXIgQj12b2lkIDAsUD12b2lkIDAsST0hMTt0cnl7Zm9yKHZhciBIPShkPXZvaWQgMCxvKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmdldERlY29yYXRpb25zQXRDZWxsKGIscikpKSxqPUgubmV4dCgpOyFqLmRvbmU7aj1ILm5leHQoKSl7dmFyIEY9ai52YWx1ZTsidG9wIiE9PUYub3B0aW9ucy5sYXllciYmSXx8KEYuYmFja2dyb3VuZENvbG9yUkdCJiYoQT01MDMzMTY0OCxNPUYuYmFja2dyb3VuZENvbG9yUkdCLnJnYmE+PjgmMTY3NzcyMTUsQj1GLmJhY2tncm91bmRDb2xvclJHQiksRi5mb3JlZ3JvdW5kQ29sb3JSR0ImJihrPTUwMzMxNjQ4LFI9Ri5mb3JlZ3JvdW5kQ29sb3JSR0IucmdiYT4+OCYxNjc3NzIxNSxQPUYuZm9yZWdyb3VuZENvbG9yUkdCKSxJPSJ0b3AiPT09Ri5vcHRpb25zLmxheWVyKX19Y2F0Y2goZSl7ZD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aiYmIWouZG9uZSYmKHY9SC5yZXR1cm4pJiZ2LmNhbGwoSCl9ZmluYWxseXtpZihkKXRocm93IGQuZXJyb3J9fXZhciBXPXRoaXMuX2lzQ2VsbEluU2VsZWN0aW9uKGIscik7SXx8dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQmJlcmJihrPTUwMzMxNjQ4LFI9dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQucmdiYT4+OCYxNjc3NzIxNSxQPXRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kKSxXJiYoQj10aGlzLl9jb2xvcnMuc2VsZWN0aW9uT3BhcXVlLEk9ITApLEkmJnguY2xhc3NMaXN0LmFkZCgieHRlcm0tZGVjb3JhdGlvbi10b3AiKTt2YXIgVT12b2lkIDA7c3dpdGNoKEEpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpVPXRoaXMuX2NvbG9ycy5hbnNpW01dLHguY2xhc3NMaXN0LmFkZCgieHRlcm0tYmctIitNKTticmVhaztjYXNlIDUwMzMxNjQ4OlU9aC5yZ2JhLnRvQ29sb3IoTT4+MTYsTT4+OCYyNTUsMjU1Jk0pLHRoaXMuX2FkZFN0eWxlKHgsImJhY2tncm91bmQtY29sb3I6IyIrcCgoTT4+PjApLnRvU3RyaW5nKDE2KSwiMCIsNikpO2JyZWFrO2RlZmF1bHQ6Tz8oVT10aGlzLl9jb2xvcnMuZm9yZWdyb3VuZCx4LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWJnLSIrcy5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSk6VT10aGlzLl9jb2xvcnMuYmFja2dyb3VuZH1zd2l0Y2goayl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOkwuaXNCb2xkKCkmJlI8OCYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmKFIrPTgpLHRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KHgsVSx0aGlzLl9jb2xvcnMuYW5zaVtSXSxMLEIsdm9pZCAwKXx8eC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1mZy0iK1IpO2JyZWFrO2Nhc2UgNTAzMzE2NDg6dmFyIHE9aC5yZ2JhLnRvQ29sb3IoUj4+MTYmMjU1LFI+PjgmMjU1LDI1NSZSKTt0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdCh4LFUscSxMLEIsUCl8fHRoaXMuX2FkZFN0eWxlKHgsImNvbG9yOiMiK3AoUi50b1N0cmluZygxNiksIjAiLDYpKTticmVhaztkZWZhdWx0OnRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KHgsVSx0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZCxMLEIsdm9pZCAwKXx8TyYmeC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1mZy0iK3MuSU5WRVJURURfREVGQVVMVF9DT0xPUil9eS5hcHBlbmRDaGlsZCh4KSxiPXd9fXJldHVybiB5fSxlLnByb3RvdHlwZS5fYXBwbHlNaW5pbXVtQ29udHJhc3Q9ZnVuY3Rpb24oZSx0LHIsaSxuLG8pe2lmKDE9PT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvfHwoMCxfLmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHMpKGkuZ2V0Q29kZSgpKSlyZXR1cm4hMTt2YXIgcz12b2lkIDA7cmV0dXJuIG58fG98fChzPXRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLmdldENvbG9yKHQucmdiYSxyLnJnYmEpKSx2b2lkIDA9PT1zJiYocz1oLmNvbG9yLmVuc3VyZUNvbnRyYXN0UmF0aW8obnx8dCxvfHxyLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8pLHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKChufHx0KS5yZ2JhLChvfHxyKS5yZ2JhLG51bGwhPXM/czpudWxsKSksISFzJiYodGhpcy5fYWRkU3R5bGUoZSwiY29sb3I6IitzLmNzcyksITApfSxlLnByb3RvdHlwZS5fYWRkU3R5bGU9ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSgic3R5bGUiLCIiKyhlLmdldEF0dHJpYnV0ZSgic3R5bGUiKXx8IiIpK3QrIjsiKX0sZS5wcm90b3R5cGUuX2lzQ2VsbEluU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fc2VsZWN0aW9uU3RhcnQsaT10aGlzLl9zZWxlY3Rpb25FbmQ7cmV0dXJuISghcnx8IWkpJiYodGhpcy5fY29sdW1uU2VsZWN0TW9kZT9yWzBdPD1pWzBdP2U+PXJbMF0mJnQ+PXJbMV0mJmU8aVswXSYmdDw9aVsxXTplPHJbMF0mJnQ+PXJbMV0mJmU+PWlbMF0mJnQ8PWlbMV06dD5yWzFdJiZ0PGlbMV18fHJbMV09PT1pWzFdJiZ0PT09clsxXSYmZT49clswXSYmZTxpWzBdfHxyWzFdPGlbMV0mJnQ9PT1pWzFdJiZlPGlbMF18fHJbMV08aVsxXSYmdD09PXJbMV0mJmU+PXJbMF0pfSxpKFtuKDIsdS5JQ2hhcmFjdGVySm9pbmVyU2VydmljZSksbigzLGwuSU9wdGlvbnNTZXJ2aWNlKSxuKDQsbC5JQ29yZVNlcnZpY2UpLG4oNSxsLklEZWNvcmF0aW9uU2VydmljZSldLGUpfSgpO2Z1bmN0aW9uIHAoZSx0LHIpe2Zvcig7ZS5sZW5ndGg8cjspZT10K2U7cmV0dXJuIGV9dC5Eb21SZW5kZXJlclJvd0ZhY3Rvcnk9ZH0sNDU2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uTW9kZWw9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZT0hMSx0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPTB9cmV0dXJuIGUucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb25TdGFydD12b2lkIDAsdGhpcy5zZWxlY3Rpb25FbmQ9dm9pZCAwLHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aD0wfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImZpbmFsU2VsZWN0aW9uU3RhcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZT9bMCwwXTp0aGlzLnNlbGVjdGlvbkVuZCYmdGhpcy5zZWxlY3Rpb25TdGFydCYmdGhpcy5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpP3RoaXMuc2VsZWN0aW9uRW5kOnRoaXMuc2VsZWN0aW9uU3RhcnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJmaW5hbFNlbGVjdGlvbkVuZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzU2VsZWN0QWxsQWN0aXZlP1t0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UrdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTFdOnRoaXMuc2VsZWN0aW9uU3RhcnQ/IXRoaXMuc2VsZWN0aW9uRW5kfHx0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk/KGU9dGhpcy5zZWxlY3Rpb25TdGFydFswXSt0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKT50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM/ZSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM9PTA/W3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdK01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLTFdOltlJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdK01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpXTpbZSx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdXTp0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoJiZ0aGlzLnNlbGVjdGlvbkVuZFsxXT09PXRoaXMuc2VsZWN0aW9uU3RhcnRbMV0/KGU9dGhpcy5zZWxlY3Rpb25TdGFydFswXSt0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKT50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM/W2UldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0rTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyldOltNYXRoLm1heChlLHRoaXMuc2VsZWN0aW9uRW5kWzBdKSx0aGlzLnNlbGVjdGlvbkVuZFsxXV06dGhpcy5zZWxlY3Rpb25FbmQ6dm9pZCAwO3ZhciBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxlY3Rpb25TdGFydCx0PXRoaXMuc2VsZWN0aW9uRW5kO3JldHVybiEoIWV8fCF0KSYmKGVbMV0+dFsxXXx8ZVsxXT09PXRbMV0mJmVbMF0+dFswXSl9LGUucHJvdG90eXBlLm9uVHJpbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb25TdGFydCYmKHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0tPWUpLHRoaXMuc2VsZWN0aW9uRW5kJiYodGhpcy5zZWxlY3Rpb25FbmRbMV0tPWUpLHRoaXMuc2VsZWN0aW9uRW5kJiZ0aGlzLnNlbGVjdGlvbkVuZFsxXTwwPyh0aGlzLmNsZWFyU2VsZWN0aW9uKCksITApOih0aGlzLnNlbGVjdGlvblN0YXJ0JiZ0aGlzLnNlbGVjdGlvblN0YXJ0WzFdPDAmJih0aGlzLnNlbGVjdGlvblN0YXJ0WzFdPTApLCExKX0sZX0oKTt0LlNlbGVjdGlvbk1vZGVsPXJ9LDQyODpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNoYXJTaXplU2VydmljZT12b2lkIDA7dmFyIG89cigyNTg1KSxzPXIoODQ2MCksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX29wdGlvbnNTZXJ2aWNlPXIsdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5fb25DaGFyU2l6ZUNoYW5nZT1uZXcgcy5FdmVudEVtaXR0ZXIsdGhpcy5fbWVhc3VyZVN0cmF0ZWd5PW5ldyBjKGUsdCx0aGlzLl9vcHRpb25zU2VydmljZSl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaGFzVmFsaWRTaXplIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGg+MCYmdGhpcy5oZWlnaHQ+MH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQ2hhclNpemVDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DaGFyU2l6ZUNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbWVhc3VyZVN0cmF0ZWd5Lm1lYXN1cmUoKTtlLndpZHRoPT09dGhpcy53aWR0aCYmZS5oZWlnaHQ9PT10aGlzLmhlaWdodHx8KHRoaXMud2lkdGg9ZS53aWR0aCx0aGlzLmhlaWdodD1lLmhlaWdodCx0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmZpcmUoKSl9LGkoW24oMixvLklPcHRpb25zU2VydmljZSldLGUpfSgpO3QuQ2hhclNpemVTZXJ2aWNlPWE7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9kb2N1bWVudD1lLHRoaXMuX3BhcmVudEVsZW1lbnQ9dCx0aGlzLl9vcHRpb25zU2VydmljZT1yLHRoaXMuX3Jlc3VsdD17d2lkdGg6MCxoZWlnaHQ6MH0sdGhpcy5fbWVhc3VyZUVsZW1lbnQ9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLHRoaXMuX21lYXN1cmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50IiksdGhpcy5fbWVhc3VyZUVsZW1lbnQudGV4dENvbnRlbnQ9IlciLHRoaXMuX21lYXN1cmVFbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIiksdGhpcy5fcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9tZWFzdXJlRWxlbWVudCl9cmV0dXJuIGUucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oKXt0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250RmFtaWx5PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSx0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250U2l6ZT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplKyJweCI7dmFyIGU9dGhpcy5fbWVhc3VyZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIDAhPT1lLndpZHRoJiYwIT09ZS5oZWlnaHQmJih0aGlzLl9yZXN1bHQud2lkdGg9ZS53aWR0aCx0aGlzLl9yZXN1bHQuaGVpZ2h0PU1hdGguY2VpbChlLmhlaWdodCkpLHRoaXMuX3Jlc3VsdH0sZX0oKX0sNDI2OTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPXQuSm9pbmVkQ2VsbERhdGE9dm9pZCAwO3ZhciBhPXIoMzczNCksYz1yKDY0MyksbD1yKDUxMSksaD1yKDI1ODUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSl7dmFyIG49ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmNvbnRlbnQ9MCxuLmNvbWJpbmVkRGF0YT0iIixuLmZnPXQuZmcsbi5iZz10LmJnLG4uY29tYmluZWREYXRhPXIsbi5fd2lkdGg9aSxufXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuaXNDb21iaW5lZD1mdW5jdGlvbigpe3JldHVybiAyMDk3MTUyfSx0LnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aH0sdC5wcm90b3R5cGUuZ2V0Q2hhcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21iaW5lZERhdGF9LHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm4gMjA5NzE1MX0sdC5wcm90b3R5cGUuc2V0RnJvbUNoYXJEYXRhPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9LHQucHJvdG90eXBlLmdldEFzQ2hhckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5mZyx0aGlzLmdldENoYXJzKCksdGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0Q29kZSgpXX0sdH0oYS5BdHRyaWJ1dGVEYXRhKTt0LkpvaW5lZENlbGxEYXRhPXU7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9jaGFyYWN0ZXJKb2luZXJzPVtdLHRoaXMuX25leHRDaGFyYWN0ZXJKb2luZXJJZD0wLHRoaXMuX3dvcmtDZWxsPW5ldyBsLkNlbGxEYXRhfXJldHVybiBlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihlKXt2YXIgdD17aWQ6dGhpcy5fbmV4dENoYXJhY3RlckpvaW5lcklkKyssaGFuZGxlcjplfTtyZXR1cm4gdGhpcy5fY2hhcmFjdGVySm9pbmVycy5wdXNoKHQpLHQuaWR9LGUucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDx0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDt0KyspaWYodGhpcy5fY2hhcmFjdGVySm9pbmVyc1t0XS5pZD09PWUpcmV0dXJuIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMuc3BsaWNlKHQsMSksITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmdldEpvaW5lZENoYXJhY3RlcnM9ZnVuY3Rpb24oZSl7aWYoMD09PXRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoKXJldHVybltdO3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChlKTtpZighdHx8MD09PXQubGVuZ3RoKXJldHVybltdO2Zvcih2YXIgcj1bXSxpPXQudHJhbnNsYXRlVG9TdHJpbmcoITApLG49MCxvPTAscz0wLGE9dC5nZXRGZygwKSxsPXQuZ2V0QmcoMCksaD0wO2g8dC5nZXRUcmltbWVkTGVuZ3RoKCk7aCsrKWlmKHQubG9hZENlbGwoaCx0aGlzLl93b3JrQ2VsbCksMCE9PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkpe2lmKHRoaXMuX3dvcmtDZWxsLmZnIT09YXx8dGhpcy5fd29ya0NlbGwuYmchPT1sKXtpZihoLW4+MSlmb3IodmFyIHU9dGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKGkscyxvLHQsbiksZj0wO2Y8dS5sZW5ndGg7ZisrKXIucHVzaCh1W2ZdKTtuPWgscz1vLGE9dGhpcy5fd29ya0NlbGwuZmcsbD10aGlzLl93b3JrQ2VsbC5iZ31vKz10aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aHx8Yy5XSElURVNQQUNFX0NFTExfQ0hBUi5sZW5ndGh9aWYodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLW4+MSlmb3IodT10aGlzLl9nZXRKb2luZWRSYW5nZXMoaSxzLG8sdCxuKSxmPTA7Zjx1Lmxlbmd0aDtmKyspci5wdXNoKHVbZl0pO3JldHVybiByfSxlLnByb3RvdHlwZS5fZ2V0Sm9pbmVkUmFuZ2VzPWZ1bmN0aW9uKHQscixpLG4sbyl7dmFyIHM9dC5zdWJzdHJpbmcocixpKSxhPVtdO3RyeXthPXRoaXMuX2NoYXJhY3RlckpvaW5lcnNbMF0uaGFuZGxlcihzKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpfWZvcih2YXIgYz0xO2M8dGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7YysrKXRyeXtmb3IodmFyIGw9dGhpcy5fY2hhcmFjdGVySm9pbmVyc1tjXS5oYW5kbGVyKHMpLGg9MDtoPGwubGVuZ3RoO2grKyllLl9tZXJnZVJhbmdlcyhhLGxbaF0pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9cmV0dXJuIHRoaXMuX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhhLG4sbyksYX0sZS5wcm90b3R5cGUuX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcz1mdW5jdGlvbihlLHQscil7dmFyIGk9MCxuPSExLG89MCxzPWVbaV07aWYocyl7Zm9yKHZhciBhPXI7YTx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7YSsrKXt2YXIgbD10LmdldFdpZHRoKGEpLGg9dC5nZXRTdHJpbmcoYSkubGVuZ3RofHxjLldISVRFU1BBQ0VfQ0VMTF9DSEFSLmxlbmd0aDtpZigwIT09bCl7aWYoIW4mJnNbMF08PW8mJihzWzBdPWEsbj0hMCksc1sxXTw9byl7aWYoc1sxXT1hLCEocz1lWysraV0pKWJyZWFrO3NbMF08PW8/KHNbMF09YSxuPSEwKTpuPSExfW8rPWh9fXMmJihzWzFdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9fSxlLl9tZXJnZVJhbmdlcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0hMSxpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPWVbaV07aWYocil7aWYodFsxXTw9blswXSlyZXR1cm4gZVtpLTFdWzFdPXRbMV0sZTtpZih0WzFdPD1uWzFdKXJldHVybiBlW2ktMV1bMV09TWF0aC5tYXgodFsxXSxuWzFdKSxlLnNwbGljZShpLDEpLGU7ZS5zcGxpY2UoaSwxKSxpLS19ZWxzZXtpZih0WzFdPD1uWzBdKXJldHVybiBlLnNwbGljZShpLDAsdCksZTtpZih0WzFdPD1uWzFdKXJldHVybiBuWzBdPU1hdGgubWluKHRbMF0sblswXSksZTt0WzBdPG5bMV0mJihuWzBdPU1hdGgubWluKHRbMF0sblswXSkscj0hMCl9fXJldHVybiByP2VbZS5sZW5ndGgtMV1bMV09dFsxXTplLnB1c2godCksZX0sZT1vKFtzKDAsaC5JQnVmZmVyU2VydmljZSldLGUpfSgpO3QuQ2hhcmFjdGVySm9pbmVyU2VydmljZT1mfSw1MTE0OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZUJyb3dzZXJTZXJ2aWNlPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fdGV4dGFyZWE9ZX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0ZvY3VzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fdGV4dGFyZWEuZ2V0Um9vdE5vZGU/dGhpcy5fdGV4dGFyZWEuZ2V0Um9vdE5vZGUoKTpkb2N1bWVudCkuYWN0aXZlRWxlbWVudD09PXRoaXMuX3RleHRhcmVhJiZkb2N1bWVudC5oYXNGb2N1cygpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGV9KCk7dC5Db3JlQnJvd3NlclNlcnZpY2U9cn0sODkzNDpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1vdXNlU2VydmljZT12b2lkIDA7dmFyIG89cig0NzI1KSxzPXIoOTgwNiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9yZW5kZXJTZXJ2aWNlPWUsdGhpcy5fY2hhclNpemVTZXJ2aWNlPXR9cmV0dXJuIGUucHJvdG90eXBlLmdldENvb3Jkcz1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybigwLHMuZ2V0Q29vcmRzKSh3aW5kb3csZSx0LHIsaSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplLHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgsdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbil9LGUucHJvdG90eXBlLmdldFJhd0J5dGVDb29yZHM9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49dGhpcy5nZXRDb29yZHMoZSx0LHIsaSk7cmV0dXJuKDAscy5nZXRSYXdCeXRlQ29vcmRzKShuKX0saShbbigwLG8uSVJlbmRlclNlcnZpY2UpLG4oMSxvLklDaGFyU2l6ZVNlcnZpY2UpXSxlKX0oKTt0Lk1vdXNlU2VydmljZT1hfSwzMjMwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlJlbmRlclNlcnZpY2U9dm9pZCAwO3ZhciBhPXIoNjE5MyksYz1yKDg0NjApLGw9cig4NDQpLGg9cig1NTk2KSx1PXIoMzY1NiksZj1yKDI1ODUpLF89cig0NzI1KSxkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsbCl7dmFyIGY9ZS5jYWxsKHRoaXMpfHx0aGlzO2lmKGYuX3JlbmRlcmVyPXQsZi5fcm93Q291bnQ9cixmLl9jaGFyU2l6ZVNlcnZpY2U9byxmLl9pc1BhdXNlZD0hMSxmLl9uZWVkc0Z1bGxSZWZyZXNoPSExLGYuX2lzTmV4dFJlbmRlclJlZHJhd09ubHk9ITAsZi5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoPSExLGYuX2NhbnZhc1dpZHRoPTAsZi5fY2FudmFzSGVpZ2h0PTAsZi5fc2VsZWN0aW9uU3RhdGU9e3N0YXJ0OnZvaWQgMCxlbmQ6dm9pZCAwLGNvbHVtblNlbGVjdE1vZGU6ITF9LGYuX29uRGltZW5zaW9uc0NoYW5nZT1uZXcgYy5FdmVudEVtaXR0ZXIsZi5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlPW5ldyBjLkV2ZW50RW1pdHRlcixmLl9vblJlbmRlcj1uZXcgYy5FdmVudEVtaXR0ZXIsZi5fb25SZWZyZXNoUmVxdWVzdD1uZXcgYy5FdmVudEVtaXR0ZXIsZi5yZWdpc3Rlcih7ZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBmLl9yZW5kZXJlci5kaXNwb3NlKCl9fSksZi5fcmVuZGVyRGVib3VuY2VyPW5ldyBhLlJlbmRlckRlYm91bmNlcigoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZi5fcmVuZGVyUm93cyhlLHQpfSkpLGYucmVnaXN0ZXIoZi5fcmVuZGVyRGVib3VuY2VyKSxmLl9zY3JlZW5EcHJNb25pdG9yPW5ldyBoLlNjcmVlbkRwck1vbml0b3IsZi5fc2NyZWVuRHByTW9uaXRvci5zZXRMaXN0ZW5lcigoZnVuY3Rpb24oKXtyZXR1cm4gZi5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKX0pKSxmLnJlZ2lzdGVyKGYuX3NjcmVlbkRwck1vbml0b3IpLGYucmVnaXN0ZXIobC5vblJlc2l6ZSgoZnVuY3Rpb24oKXtyZXR1cm4gZi5fZnVsbFJlZnJlc2goKX0pKSksZi5yZWdpc3RlcihsLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPWYuX3JlbmRlcmVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbGVhcigpfSkpKSxmLnJlZ2lzdGVyKG4ub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGYuX2hhbmRsZU9wdGlvbnNDaGFuZ2VkKCl9KSkpLGYucmVnaXN0ZXIoZi5fY2hhclNpemVTZXJ2aWNlLm9uQ2hhclNpemVDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGYub25DaGFyU2l6ZUNoYW5nZWQoKX0pKSksZi5yZWdpc3RlcihzLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIGYuX2Z1bGxSZWZyZXNoKCl9KSkpLGYucmVnaXN0ZXIocy5vbkRlY29yYXRpb25SZW1vdmVkKChmdW5jdGlvbigpe3JldHVybiBmLl9mdWxsUmVmcmVzaCgpfSkpKSxmLl9yZW5kZXJlci5vblJlcXVlc3RSZWRyYXcoKGZ1bmN0aW9uKGUpe3JldHVybiBmLnJlZnJlc2hSb3dzKGUuc3RhcnQsZS5lbmQsITApfSkpLGYucmVnaXN0ZXIoKDAsdS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHdpbmRvdywicmVzaXplIiwoZnVuY3Rpb24oKXtyZXR1cm4gZi5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKX0pKSksIkludGVyc2VjdGlvbk9ic2VydmVyImluIHdpbmRvdyl7dmFyIF89bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25JbnRlcnNlY3Rpb25DaGFuZ2UoZVtlLmxlbmd0aC0xXSl9KSx7dGhyZXNob2xkOjB9KTtfLm9ic2VydmUoaSksZi5yZWdpc3Rlcih7ZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBfLmRpc2Nvbm5lY3QoKX19KX1yZXR1cm4gZn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EaW1lbnNpb25zQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlbmRlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlbmRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVmcmVzaFJlcXVlc3QiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZWZyZXNoUmVxdWVzdC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImRpbWVuc2lvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9uc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5fb25JbnRlcnNlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5faXNQYXVzZWQ9dm9pZCAwPT09ZS5pc0ludGVyc2VjdGluZz8wPT09ZS5pbnRlcnNlY3Rpb25SYXRpbzohZS5pc0ludGVyc2VjdGluZyx0aGlzLl9pc1BhdXNlZHx8dGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZXx8dGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSwhdGhpcy5faXNQYXVzZWQmJnRoaXMuX25lZWRzRnVsbFJlZnJlc2gmJih0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSksdGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMSl9LHQucHJvdG90eXBlLnJlZnJlc2hSb3dzPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5faXNQYXVzZWQ/dGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMDoocnx8KHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHk9ITEpLHRoaXMuX3JlbmRlckRlYm91bmNlci5yZWZyZXNoKGUsdCx0aGlzLl9yb3dDb3VudCkpfSx0LnByb3RvdHlwZS5fcmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe3RoaXMuX3JlbmRlcmVyLnJlbmRlclJvd3MoZSx0KSx0aGlzLl9uZWVkc1NlbGVjdGlvblJlZnJlc2gmJih0aGlzLl9yZW5kZXJlci5vblNlbGVjdGlvbkNoYW5nZWQodGhpcy5fc2VsZWN0aW9uU3RhdGUuc3RhcnQsdGhpcy5fc2VsZWN0aW9uU3RhdGUuZW5kLHRoaXMuX3NlbGVjdGlvblN0YXRlLmNvbHVtblNlbGVjdE1vZGUpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaD0hMSksdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seXx8dGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmZpcmUoe3N0YXJ0OmUsZW5kOnR9KSx0aGlzLl9vblJlbmRlci5maXJlKHtzdGFydDplLGVuZDp0fSksdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seT0hMH0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcm93Q291bnQ9dCx0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKX0sdC5wcm90b3R5cGUuX2hhbmRsZU9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIub25PcHRpb25zQ2hhbmdlZCgpLHRoaXMucmVmcmVzaFJvd3MoMCx0aGlzLl9yb3dDb3VudC0xKSx0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKX0sdC5wcm90b3R5cGUuX2ZpcmVPbkNhbnZhc1Jlc2l6ZT1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzV2lkdGg9PT10aGlzLl9jYW52YXNXaWR0aCYmdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ9PT10aGlzLl9jYW52YXNIZWlnaHR8fHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5maXJlKHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5zZXRSZW5kZXJlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3JlbmRlcmVyLmRpc3Bvc2UoKSx0aGlzLl9yZW5kZXJlcj1lLHRoaXMuX3JlbmRlcmVyLm9uUmVxdWVzdFJlZHJhdygoZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVmcmVzaFJvd3MoZS5zdGFydCxlLmVuZCwhMCl9KSksdGhpcy5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoPSEwLHRoaXMuX2Z1bGxSZWZyZXNoKCl9LHQucHJvdG90eXBlLmFkZFJlZnJlc2hDYWxsYmFjaz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcmVuZGVyRGVib3VuY2VyLmFkZFJlZnJlc2hDYWxsYmFjayhlKX0sdC5wcm90b3R5cGUuX2Z1bGxSZWZyZXNoPWZ1bmN0aW9uKCl7dGhpcy5faXNQYXVzZWQ/dGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMDp0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSl9LHQucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dmFyIGUsdDtudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuX3JlbmRlcmVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbGVhclRleHR1cmVBdGxhcyl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSx0aGlzLl9mdWxsUmVmcmVzaCgpfSx0LnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVuZGVyZXIuc2V0Q29sb3JzKGUpLHRoaXMuX2Z1bGxSZWZyZXNoKCl9LHQucHJvdG90eXBlLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZT1mdW5jdGlvbigpe3RoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCksdGhpcy5fcmVuZGVyZXIub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCksdGhpcy5yZWZyZXNoUm93cygwLHRoaXMuX3Jvd0NvdW50LTEpfSx0LnByb3RvdHlwZS5vblJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3JlbmRlcmVyLm9uUmVzaXplKGUsdCksdGhpcy5fZnVsbFJlZnJlc2goKX0sdC5wcm90b3R5cGUub25DaGFyU2l6ZUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkNoYXJTaXplQ2hhbmdlZCgpfSx0LnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkJsdXIoKX0sdC5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLm9uRm9jdXMoKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydD1lLHRoaXMuX3NlbGVjdGlvblN0YXRlLmVuZD10LHRoaXMuX3NlbGVjdGlvblN0YXRlLmNvbHVtblNlbGVjdE1vZGU9cix0aGlzLl9yZW5kZXJlci5vblNlbGVjdGlvbkNoYW5nZWQoZSx0LHIpfSx0LnByb3RvdHlwZS5vbkN1cnNvck1vdmU9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkN1cnNvck1vdmUoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5jbGVhcigpfSxvKFtzKDMsZi5JT3B0aW9uc1NlcnZpY2UpLHMoNCxfLklDaGFyU2l6ZVNlcnZpY2UpLHMoNSxmLklEZWNvcmF0aW9uU2VydmljZSkscyg2LGYuSUJ1ZmZlclNlcnZpY2UpXSx0KX0obC5EaXNwb3NhYmxlKTt0LlJlbmRlclNlcnZpY2U9ZH0sOTMxMjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TZWxlY3Rpb25TZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDYxMTQpLGM9cig0NTYpLGw9cig1MTEpLGg9cig4NDYwKSx1PXIoNDcyNSksZj1yKDI1ODUpLF89cig5ODA2KSxkPXIoOTUwNCkscD1yKDg0NCksdj1yKDQ4NDEpLHk9U3RyaW5nLmZyb21DaGFyQ29kZSgxNjApLGc9bmV3IFJlZ0V4cCh5LCJnIiksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsdSl7dmFyIGY9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBmLl9lbGVtZW50PXQsZi5fc2NyZWVuRWxlbWVudD1yLGYuX2xpbmtpZmllcj1pLGYuX2J1ZmZlclNlcnZpY2U9bixmLl9jb3JlU2VydmljZT1vLGYuX21vdXNlU2VydmljZT1zLGYuX29wdGlvbnNTZXJ2aWNlPWEsZi5fcmVuZGVyU2VydmljZT11LGYuX2RyYWdTY3JvbGxBbW91bnQ9MCxmLl9lbmFibGVkPSEwLGYuX3dvcmtDZWxsPW5ldyBsLkNlbGxEYXRhLGYuX21vdXNlRG93blRpbWVTdGFtcD0wLGYuX29sZEhhc1NlbGVjdGlvbj0hMSxmLl9vbGRTZWxlY3Rpb25TdGFydD12b2lkIDAsZi5fb2xkU2VsZWN0aW9uRW5kPXZvaWQgMCxmLl9vbkxpbnV4TW91c2VTZWxlY3Rpb249Zi5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLGYuX29uUmVkcmF3UmVxdWVzdD1mLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksZi5fb25TZWxlY3Rpb25DaGFuZ2U9Zi5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLGYuX29uUmVxdWVzdFNjcm9sbExpbmVzPWYucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxmLl9tb3VzZU1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gZi5fb25Nb3VzZU1vdmUoZSl9LGYuX21vdXNlVXBMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gZi5fb25Nb3VzZVVwKGUpfSxmLl9jb3JlU2VydmljZS5vblVzZXJJbnB1dCgoZnVuY3Rpb24oKXtmLmhhc1NlbGVjdGlvbiYmZi5jbGVhclNlbGVjdGlvbigpfSkpLGYuX3RyaW1MaXN0ZW5lcj1mLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5vblRyaW0oKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vblRyaW0oZSl9KSksZi5yZWdpc3RlcihmLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uQnVmZmVyQWN0aXZhdGUoZSl9KSkpLGYuZW5hYmxlKCksZi5fbW9kZWw9bmV3IGMuU2VsZWN0aW9uTW9kZWwoZi5fYnVmZmVyU2VydmljZSksZi5fYWN0aXZlU2VsZWN0aW9uTW9kZT0wLGZ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uTGludXhNb3VzZVNlbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZWRyYXciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZWRyYXdSZXF1ZXN0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TZWxlY3Rpb25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RTY3JvbGxMaW5lcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RTY3JvbGxMaW5lcy5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhclNlbGVjdGlvbigpfSx0LnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuX2VuYWJsZWQ9ITF9LHQucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuX2VuYWJsZWQ9ITB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2VsZWN0aW9uU3RhcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInNlbGVjdGlvbkVuZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImhhc1NlbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsdD10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtyZXR1cm4hKCFlfHwhdHx8ZVswXT09PXRbMF0mJmVbMV09PT10WzFdKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInNlbGVjdGlvblRleHQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7aWYoIWV8fCF0KXJldHVybiIiO3ZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLGk9W107aWYoMz09PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUpe2lmKGVbMF09PT10WzBdKXJldHVybiIiO2Zvcih2YXIgbj1lWzBdPHRbMF0/ZVswXTp0WzBdLG89ZVswXTx0WzBdP3RbMF06ZVswXSxzPWVbMV07czw9dFsxXTtzKyspe3ZhciBjPXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHMsITAsbixvKTtpLnB1c2goYyl9fWVsc2V7dmFyIGw9ZVsxXT09PXRbMV0/dFswXTp2b2lkIDA7Zm9yKGkucHVzaChyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlWzFdLCEwLGVbMF0sbCkpLHM9ZVsxXSsxO3M8PXRbMV0tMTtzKyspe3ZhciBoPXIubGluZXMuZ2V0KHMpO2M9ci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcocywhMCksKG51bGw9PWg/dm9pZCAwOmguaXNXcmFwcGVkKT9pW2kubGVuZ3RoLTFdKz1jOmkucHVzaChjKX1lWzFdIT09dFsxXSYmKGg9ci5saW5lcy5nZXQodFsxXSksYz1yLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyh0WzFdLCEwLDAsdFswXSksaCYmaC5pc1dyYXBwZWQ/aVtpLmxlbmd0aC0xXSs9YzppLnB1c2goYykpfXJldHVybiBpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShnLCIgIil9KSkuam9pbihhLmlzV2luZG93cz8iXHJcbiI6IlxuIil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpLHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMucmVmcmVzaCgpLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0sdC5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZXx8KHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZWZyZXNoKCl9KSkpLGEuaXNMaW51eCYmZSYmdGhpcy5zZWxlY3Rpb25UZXh0Lmxlbmd0aCYmdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uLmZpcmUodGhpcy5zZWxlY3Rpb25UZXh0KX0sdC5wcm90b3R5cGUuX3JlZnJlc2g9ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9dm9pZCAwLHRoaXMuX29uUmVkcmF3UmVxdWVzdC5maXJlKHtzdGFydDp0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LGVuZDp0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZCxjb2x1bW5TZWxlY3RNb2RlOjM9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlfSl9LHQucHJvdG90eXBlLl9pc0NsaWNrSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSkscj10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LGk9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7cmV0dXJuISEociYmaSYmdCkmJnRoaXMuX2FyZUNvb3Jkc0luU2VsZWN0aW9uKHQscixpKX0sdC5wcm90b3R5cGUuaXNDZWxsSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LGk9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7cmV0dXJuISghcnx8IWkpJiZ0aGlzLl9hcmVDb29yZHNJblNlbGVjdGlvbihbZSx0XSxyLGkpfSx0LnByb3RvdHlwZS5fYXJlQ29vcmRzSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlWzFdPnRbMV0mJmVbMV08clsxXXx8dFsxXT09PXJbMV0mJmVbMV09PT10WzFdJiZlWzBdPj10WzBdJiZlWzBdPHJbMF18fHRbMV08clsxXSYmZVsxXT09PXJbMV0mJmVbMF08clswXXx8dFsxXTxyWzFdJiZlWzFdPT09dFsxXSYmZVswXT49dFswXX0sdC5wcm90b3R5cGUuX3NlbGVjdFdvcmRBdEN1cnNvcj1mdW5jdGlvbihlLHQpe3ZhciByLGksbj1udWxsPT09KGk9bnVsbD09PShyPXRoaXMuX2xpbmtpZmllci5jdXJyZW50TGluayl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGluayl8fHZvaWQgMD09PWk/dm9pZCAwOmkucmFuZ2U7aWYobilyZXR1cm4gdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9W24uc3RhcnQueC0xLG4uc3RhcnQueS0xXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0oMCx2LmdldFJhbmdlTGVuZ3RoKShuLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCwhMDt2YXIgbz10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKTtyZXR1cm4hIW8mJih0aGlzLl9zZWxlY3RXb3JkQXQobyx0KSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwLCEwKX0sdC5wcm90b3R5cGUuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmU9ITAsdGhpcy5yZWZyZXNoKCksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSx0LnByb3RvdHlwZS5zZWxlY3RMaW5lcz1mdW5jdGlvbihlLHQpe3RoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCksZT1NYXRoLm1heChlLDApLHQ9TWF0aC5taW4odCx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgtMSksdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9WzAsZV0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPVt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdF0sdGhpcy5yZWZyZXNoKCksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSx0LnByb3RvdHlwZS5fb25UcmltPWZ1bmN0aW9uKGUpe3RoaXMuX21vZGVsLm9uVHJpbShlKSYmdGhpcy5yZWZyZXNoKCl9LHQucHJvdG90eXBlLl9nZXRNb3VzZUJ1ZmZlckNvb3Jkcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGUsdGhpcy5fc2NyZWVuRWxlbWVudCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLCEwKTtpZih0KXJldHVybiB0WzBdLS0sdFsxXS0tLHRbMV0rPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHR9LHQucHJvdG90eXBlLl9nZXRNb3VzZUV2ZW50U2Nyb2xsQW1vdW50PWZ1bmN0aW9uKGUpe3ZhciB0PSgwLF8uZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQpKHdpbmRvdyxlLHRoaXMuX3NjcmVlbkVsZW1lbnQpWzFdLHI9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodDtyZXR1cm4gdD49MCYmdDw9cj8wOih0PnImJih0LT1yKSx0PU1hdGgubWluKE1hdGgubWF4KHQsLTUwKSw1MCksKHQvPTUwKS9NYXRoLmFicyh0KStNYXRoLnJvdW5kKDE0KnQpKX0sdC5wcm90b3R5cGUuc2hvdWxkRm9yY2VTZWxlY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGEuaXNNYWM/ZS5hbHRLZXkmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb246ZS5zaGlmdEtleX0sdC5wcm90b3R5cGUub25Nb3VzZURvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5fbW91c2VEb3duVGltZVN0YW1wPWUudGltZVN0YW1wLCgyIT09ZS5idXR0b258fCF0aGlzLmhhc1NlbGVjdGlvbikmJjA9PT1lLmJ1dHRvbil7aWYoIXRoaXMuX2VuYWJsZWQpe2lmKCF0aGlzLnNob3VsZEZvcmNlU2VsZWN0aW9uKGUpKXJldHVybjtlLnN0b3BQcm9wYWdhdGlvbigpfWUucHJldmVudERlZmF1bHQoKSx0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PTAsdGhpcy5fZW5hYmxlZCYmZS5zaGlmdEtleT90aGlzLl9vbkluY3JlbWVudGFsQ2xpY2soZSk6MT09PWUuZGV0YWlsP3RoaXMuX29uU2luZ2xlQ2xpY2soZSk6Mj09PWUuZGV0YWlsP3RoaXMuX29uRG91YmxlQ2xpY2soZSk6Mz09PWUuZGV0YWlsJiZ0aGlzLl9vblRyaXBsZUNsaWNrKGUpLHRoaXMuX2FkZE1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMucmVmcmVzaCghMCl9fSx0LnByb3RvdHlwZS5fYWRkTW91c2VEb3duTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQmJih0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciksdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMuX21vdXNlVXBMaXN0ZW5lcikpLHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fZHJhZ1Njcm9sbCgpfSksNTApfSx0LnByb3RvdHlwZS5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50JiYodGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpLHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLl9tb3VzZVVwTGlzdGVuZXIpKSxjbGVhckludGVydmFsKHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyKSx0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lcj12b2lkIDB9LHQucHJvdG90eXBlLl9vbkluY3JlbWVudGFsQ2xpY2s9ZnVuY3Rpb24oZSl7dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSkpfSx0LnByb3RvdHlwZS5fb25TaW5nbGVDbGljaz1mdW5jdGlvbihlKXtpZih0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0wLHRoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlPSExLHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9dGhpcy5zaG91bGRDb2x1bW5TZWxlY3QoZSk/MzowLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KXt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwO3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFsxXSk7dCYmdC5sZW5ndGghPT10aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSYmMD09PXQuaGFzV2lkdGgodGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0pJiZ0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSsrfX0sdC5wcm90b3R5cGUuX29uRG91YmxlQ2xpY2s9ZnVuY3Rpb24oZSl7dGhpcy5fc2VsZWN0V29yZEF0Q3Vyc29yKGUsITApJiYodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT0xKX0sdC5wcm90b3R5cGUuX29uVHJpcGxlQ2xpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSk7dCYmKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9Mix0aGlzLl9zZWxlY3RMaW5lQXQodFsxXSkpfSx0LnByb3RvdHlwZS5zaG91bGRDb2x1bW5TZWxlY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWx0S2V5JiYhKGEuaXNNYWMmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24pfSx0LnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24oZSl7aWYoZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCl7dmFyIHQ9dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kP1t0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdXTpudWxsO2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQpezI9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlP3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXTx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFsxXT90aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09MDp0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOjE9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlJiZ0aGlzLl9zZWxlY3RUb1dvcmRBdCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQpLHRoaXMuX2RyYWdTY3JvbGxBbW91bnQ9dGhpcy5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChlKSwzIT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQ+MD90aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOnRoaXMuX2RyYWdTY3JvbGxBbW91bnQ8MCYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT0wKSk7dmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdPHIubGluZXMubGVuZ3RoKXt2YXIgaT1yLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pO2kmJjA9PT1pLmhhc1dpZHRoKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSkmJnRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSsrfXQmJnRbMF09PT10aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0mJnRbMV09PT10aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV18fHRoaXMucmVmcmVzaCghMCl9ZWxzZSB0aGlzLnJlZnJlc2goITApfX0sdC5wcm90b3R5cGUuX2RyYWdTY3JvbGw9ZnVuY3Rpb24oKXtpZih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQmJnRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0JiZ0aGlzLl9kcmFnU2Nyb2xsQW1vdW50KXt0aGlzLl9vblJlcXVlc3RTY3JvbGxMaW5lcy5maXJlKHthbW91bnQ6dGhpcy5fZHJhZ1Njcm9sbEFtb3VudCxzdXBwcmVzc1Njcm9sbEV2ZW50OiExfSk7dmFyIGU9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7dGhpcy5fZHJhZ1Njcm9sbEFtb3VudD4wPygzIT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXT1NYXRoLm1pbihlLnlkaXNwK3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyxlLmxpbmVzLmxlbmd0aC0xKSk6KDMhPT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlJiYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPTApLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXT1lLnlkaXNwKSx0aGlzLnJlZnJlc2goKX19LHQucHJvdG90eXBlLl9vbk1vdXNlVXA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50aW1lU3RhbXAtdGhpcy5fbW91c2VEb3duVGltZVN0YW1wO2lmKHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMuc2VsZWN0aW9uVGV4dC5sZW5ndGg8PTEmJnQ8NTAwJiZlLmFsdEtleSYmdGhpcy5fb3B0aW9uc1NlcnZpY2UuZ2V0T3B0aW9uKCJhbHRDbGlja01vdmVzQ3Vyc29yIikpe2lmKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlPT09dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Ape3ZhciByPXRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSx0aGlzLl9lbGVtZW50LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsITEpO2lmKHImJnZvaWQgMCE9PXJbMF0mJnZvaWQgMCE9PXJbMV0pe3ZhciBpPSgwLGQubW92ZVRvQ2VsbFNlcXVlbmNlKShyWzBdLTEsclsxXS0xLHRoaXMuX2J1ZmZlclNlcnZpY2UsdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyk7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpLCEwKX19fWVsc2UgdGhpcy5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCl9LHQucHJvdG90eXBlLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQscj0hKCFlfHwhdHx8ZVswXT09PXRbMF0mJmVbMV09PT10WzFdKTtyP2UmJnQmJih0aGlzLl9vbGRTZWxlY3Rpb25TdGFydCYmdGhpcy5fb2xkU2VsZWN0aW9uRW5kJiZlWzBdPT09dGhpcy5fb2xkU2VsZWN0aW9uU3RhcnRbMF0mJmVbMV09PT10aGlzLl9vbGRTZWxlY3Rpb25TdGFydFsxXSYmdFswXT09PXRoaXMuX29sZFNlbGVjdGlvbkVuZFswXSYmdFsxXT09PXRoaXMuX29sZFNlbGVjdGlvbkVuZFsxXXx8dGhpcy5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKGUsdCxyKSk6dGhpcy5fb2xkSGFzU2VsZWN0aW9uJiZ0aGlzLl9maXJlT25TZWxlY3Rpb25DaGFuZ2UoZSx0LHIpfSx0LnByb3RvdHlwZS5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9vbGRTZWxlY3Rpb25TdGFydD1lLHRoaXMuX29sZFNlbGVjdGlvbkVuZD10LHRoaXMuX29sZEhhc1NlbGVjdGlvbj1yLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0sdC5wcm90b3R5cGUuX29uQnVmZmVyQWN0aXZhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5fdHJpbUxpc3RlbmVyLmRpc3Bvc2UoKSx0aGlzLl90cmltTGlzdGVuZXI9ZS5hY3RpdmVCdWZmZXIubGluZXMub25UcmltKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fb25UcmltKGUpfSkpfSx0LnByb3RvdHlwZS5fY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10WzBdLGk9MDt0WzBdPj1pO2krKyl7dmFyIG49ZS5sb2FkQ2VsbChpLHRoaXMuX3dvcmtDZWxsKS5nZXRDaGFycygpLmxlbmd0aDswPT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKT9yLS06bj4xJiZ0WzBdIT09aSYmKHIrPW4tMSl9cmV0dXJuIHJ9LHQucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbihlLHQscil7dGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bZSx0XSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD1yLHRoaXMucmVmcmVzaCgpLHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpfSx0LnByb3RvdHlwZS5yaWdodENsaWNrU2VsZWN0PWZ1bmN0aW9uKGUpe3RoaXMuX2lzQ2xpY2tJblNlbGVjdGlvbihlKXx8KHRoaXMuX3NlbGVjdFdvcmRBdEN1cnNvcihlLCExKSYmdGhpcy5yZWZyZXNoKCEwKSx0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKSl9LHQucHJvdG90eXBlLl9nZXRXb3JkQXQ9ZnVuY3Rpb24oZSx0LHIsaSl7aWYodm9pZCAwPT09ciYmKHI9ITApLHZvaWQgMD09PWkmJihpPSEwKSwhKGVbMF0+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykpe3ZhciBuPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLG89bi5saW5lcy5nZXQoZVsxXSk7aWYobyl7dmFyIHM9bi50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoZVsxXSwhMSksYT10aGlzLl9jb252ZXJ0Vmlld3BvcnRDb2xUb0NoYXJhY3RlckluZGV4KG8sZSksYz1hLGw9ZVswXS1hLGg9MCx1PTAsZj0wLF89MDtpZigiICI9PT1zLmNoYXJBdChhKSl7Zm9yKDthPjAmJiIgIj09PXMuY2hhckF0KGEtMSk7KWEtLTtmb3IoO2M8cy5sZW5ndGgmJiIgIj09PXMuY2hhckF0KGMrMSk7KWMrK31lbHNle3ZhciBkPWVbMF0scD1lWzBdOzA9PT1vLmdldFdpZHRoKGQpJiYoaCsrLGQtLSksMj09PW8uZ2V0V2lkdGgocCkmJih1KysscCsrKTt2YXIgdj1vLmdldFN0cmluZyhwKS5sZW5ndGg7Zm9yKHY+MSYmKF8rPXYtMSxjKz12LTEpO2Q+MCYmYT4wJiYhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihvLmxvYWRDZWxsKGQtMSx0aGlzLl93b3JrQ2VsbCkpOyl7by5sb2FkQ2VsbChkLTEsdGhpcy5fd29ya0NlbGwpO3ZhciB5PXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoOzA9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpPyhoKyssZC0tKTp5PjEmJihmKz15LTEsYS09eS0xKSxhLS0sZC0tfWZvcig7cDxvLmxlbmd0aCYmYysxPHMubGVuZ3RoJiYhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihvLmxvYWRDZWxsKHArMSx0aGlzLl93b3JrQ2VsbCkpOyl7by5sb2FkQ2VsbChwKzEsdGhpcy5fd29ya0NlbGwpO3ZhciBnPXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoOzI9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpPyh1KysscCsrKTpnPjEmJihfKz1nLTEsYys9Zy0xKSxjKysscCsrfX1jKys7dmFyIG09YStsLWgrZixiPU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxjLWEraCt1LWYtXyk7aWYodHx8IiIhPT1zLnNsaWNlKGEsYykudHJpbSgpKXtpZihyJiYwPT09bSYmMzIhPT1vLmdldENvZGVQb2ludCgwKSl7dmFyIFM9bi5saW5lcy5nZXQoZVsxXS0xKTtpZihTJiZvLmlzV3JhcHBlZCYmMzIhPT1TLmdldENvZGVQb2ludCh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSkpe3ZhciBDPXRoaXMuX2dldFdvcmRBdChbdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEsZVsxXS0xXSwhMSwhMCwhMSk7aWYoQyl7dmFyIHc9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLUMuc3RhcnQ7bS09dyxiKz13fX19aWYoaSYmbStiPT09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiYzMiE9PW8uZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKSl7dmFyIEw9bi5saW5lcy5nZXQoZVsxXSsxKTtpZigobnVsbD09TD92b2lkIDA6TC5pc1dyYXBwZWQpJiYzMiE9PUwuZ2V0Q29kZVBvaW50KDApKXt2YXIgRT10aGlzLl9nZXRXb3JkQXQoWzAsZVsxXSsxXSwhMSwhMSwhMCk7RSYmKGIrPUUubGVuZ3RoKX19cmV0dXJue3N0YXJ0Om0sbGVuZ3RoOmJ9fX19fSx0LnByb3RvdHlwZS5fc2VsZWN0V29yZEF0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZ2V0V29yZEF0KGUsdCk7aWYocil7Zm9yKDtyLnN0YXJ0PDA7KXIuc3RhcnQrPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxlWzFdLS07dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9W3Iuc3RhcnQsZVsxXV0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGg9ci5sZW5ndGh9fSx0LnByb3RvdHlwZS5fc2VsZWN0VG9Xb3JkQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0V29yZEF0KGUsITApO2lmKHQpe2Zvcih2YXIgcj1lWzFdO3Quc3RhcnQ8MDspdC5zdGFydCs9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHItLTtpZighdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSlmb3IoO3Quc3RhcnQrdC5sZW5ndGg+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyl0Lmxlbmd0aC09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHIrKzt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9W3RoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk/dC5zdGFydDp0LnN0YXJ0K3QubGVuZ3RoLHJdfX0sdC5wcm90b3R5cGUuX2lzQ2hhcldvcmRTZXBhcmF0b3I9ZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT1lLmdldFdpZHRoKCkmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud29yZFNlcGFyYXRvci5pbmRleE9mKGUuZ2V0Q2hhcnMoKSk+PTB9LHQucHJvdG90eXBlLl9zZWxlY3RMaW5lQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZShlKSxyPXtzdGFydDp7eDowLHk6dC5maXJzdH0sZW5kOnt4OnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xLHk6dC5sYXN0fX07dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9WzAsdC5maXJzdF0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0oMCx2LmdldFJhbmdlTGVuZ3RoKShyLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9LG8oW3MoMyxmLklCdWZmZXJTZXJ2aWNlKSxzKDQsZi5JQ29yZVNlcnZpY2UpLHMoNSx1LklNb3VzZVNlcnZpY2UpLHMoNixmLklPcHRpb25zU2VydmljZSkscyg3LHUuSVJlbmRlclNlcnZpY2UpXSx0KX0ocC5EaXNwb3NhYmxlKTt0LlNlbGVjdGlvblNlcnZpY2U9bX0sNDcyNTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuSUNoYXJhY3RlckpvaW5lclNlcnZpY2U9dC5JU291bmRTZXJ2aWNlPXQuSVNlbGVjdGlvblNlcnZpY2U9dC5JUmVuZGVyU2VydmljZT10LklNb3VzZVNlcnZpY2U9dC5JQ29yZUJyb3dzZXJTZXJ2aWNlPXQuSUNoYXJTaXplU2VydmljZT12b2lkIDA7dmFyIGk9cig4MzQzKTt0LklDaGFyU2l6ZVNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJDaGFyU2l6ZVNlcnZpY2UiKSx0LklDb3JlQnJvd3NlclNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJDb3JlQnJvd3NlclNlcnZpY2UiKSx0LklNb3VzZVNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJNb3VzZVNlcnZpY2UiKSx0LklSZW5kZXJTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiUmVuZGVyU2VydmljZSIpLHQuSVNlbGVjdGlvblNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJTZWxlY3Rpb25TZXJ2aWNlIiksdC5JU291bmRTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiU291bmRTZXJ2aWNlIiksdC5JQ2hhcmFjdGVySm9pbmVyU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIkNoYXJhY3RlckpvaW5lclNlcnZpY2UiKX0sMzU3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU291bmRTZXJ2aWNlPXZvaWQgMDt2YXIgbz1yKDI1ODUpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX29wdGlvbnNTZXJ2aWNlPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJhdWRpb0NvbnRleHQiLHtnZXQ6ZnVuY3Rpb24oKXtpZighZS5fYXVkaW9Db250ZXh0KXt2YXIgdD13aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O2lmKCF0KXJldHVybiBjb25zb2xlLndhcm4oIldlYiBBdWRpbyBBUEkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIENvbnNpZGVyIHVwZ3JhZGluZyB0byB0aGUgbGF0ZXN0IHZlcnNpb24iKSxudWxsO2UuX2F1ZGlvQ29udGV4dD1uZXcgdH1yZXR1cm4gZS5fYXVkaW9Db250ZXh0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnBsYXlCZWxsU291bmQ9ZnVuY3Rpb24oKXt2YXIgdD1lLmF1ZGlvQ29udGV4dDtpZih0KXt2YXIgcj10LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3QuZGVjb2RlQXVkaW9EYXRhKHRoaXMuX2Jhc2U2NFRvQXJyYXlCdWZmZXIodGhpcy5fcmVtb3ZlTWltZVR5cGUodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5iZWxsU291bmQpKSwoZnVuY3Rpb24oZSl7ci5idWZmZXI9ZSxyLmNvbm5lY3QodC5kZXN0aW5hdGlvbiksci5zdGFydCgwKX0pKX19LGUucHJvdG90eXBlLl9iYXNlNjRUb0FycmF5QnVmZmVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD13aW5kb3cuYXRvYihlKSxyPXQubGVuZ3RoLGk9bmV3IFVpbnQ4QXJyYXkociksbj0wO248cjtuKyspaVtuXT10LmNoYXJDb2RlQXQobik7cmV0dXJuIGkuYnVmZmVyfSxlLnByb3RvdHlwZS5fcmVtb3ZlTWltZVR5cGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoIiwiKVsxXX0sZT1pKFtuKDAsby5JT3B0aW9uc1NlcnZpY2UpXSxlKX0oKTt0LlNvdW5kU2VydmljZT1zfSw2MzQ5OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DaXJjdWxhckxpc3Q9dm9pZCAwO3ZhciBpPXIoODQ2MCksbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fbWF4TGVuZ3RoPWUsdGhpcy5vbkRlbGV0ZUVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLHRoaXMub25JbnNlcnRFbWl0dGVyPW5ldyBpLkV2ZW50RW1pdHRlcix0aGlzLm9uVHJpbUVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLHRoaXMuX2FycmF5PW5ldyBBcnJheSh0aGlzLl9tYXhMZW5ndGgpLHRoaXMuX3N0YXJ0SW5kZXg9MCx0aGlzLl9sZW5ndGg9MH1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkRlbGV0ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uRGVsZXRlRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uSW5zZXJ0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub25JbnNlcnRFbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25UcmltIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub25UcmltRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1heExlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhMZW5ndGh9LHNldDpmdW5jdGlvbihlKXtpZih0aGlzLl9tYXhMZW5ndGghPT1lKXtmb3IodmFyIHQ9bmV3IEFycmF5KGUpLHI9MDtyPE1hdGgubWluKGUsdGhpcy5sZW5ndGgpO3IrKyl0W3JdPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHIpXTt0aGlzLl9hcnJheT10LHRoaXMuX21heExlbmd0aD1lLHRoaXMuX3N0YXJ0SW5kZXg9MH19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVuZ3RofSxzZXQ6ZnVuY3Rpb24oZSl7aWYoZT50aGlzLl9sZW5ndGgpZm9yKHZhciB0PXRoaXMuX2xlbmd0aDt0PGU7dCsrKXRoaXMuX2FycmF5W3RdPXZvaWQgMDt0aGlzLl9sZW5ndGg9ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGUpXX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoZSldPXR9LGUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSl7dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoKV09ZSx0aGlzLl9sZW5ndGg9PT10aGlzLl9tYXhMZW5ndGg/KHRoaXMuX3N0YXJ0SW5kZXg9Kyt0aGlzLl9zdGFydEluZGV4JXRoaXMuX21heExlbmd0aCx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKSk6dGhpcy5fbGVuZ3RoKyt9LGUucHJvdG90eXBlLnJlY3ljbGU9ZnVuY3Rpb24oKXtpZih0aGlzLl9sZW5ndGghPT10aGlzLl9tYXhMZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJDYW4gb25seSByZWN5Y2xlIHdoZW4gdGhlIGJ1ZmZlciBpcyBmdWxsIik7cmV0dXJuIHRoaXMuX3N0YXJ0SW5kZXg9Kyt0aGlzLl9zdGFydEluZGV4JXRoaXMuX21heExlbmd0aCx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKSx0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgtMSldfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzRnVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGg9PT10aGlzLl9tYXhMZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aC0tLTEpXX0sZS5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0yXT1hcmd1bWVudHNbaV07aWYodCl7Zm9yKHZhciBuPWU7bjx0aGlzLl9sZW5ndGgtdDtuKyspdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgobildPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KG4rdCldO3RoaXMuX2xlbmd0aC09dCx0aGlzLm9uRGVsZXRlRW1pdHRlci5maXJlKHtpbmRleDplLGFtb3VudDp0fSl9Zm9yKG49dGhpcy5fbGVuZ3RoLTE7bj49ZTtuLS0pdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgobityLmxlbmd0aCldPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KG4pXTtmb3Iobj0wO248ci5sZW5ndGg7bisrKXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGUrbildPXJbbl07aWYoci5sZW5ndGgmJnRoaXMub25JbnNlcnRFbWl0dGVyLmZpcmUoe2luZGV4OmUsYW1vdW50OnIubGVuZ3RofSksdGhpcy5fbGVuZ3RoK3IubGVuZ3RoPnRoaXMuX21heExlbmd0aCl7dmFyIG89dGhpcy5fbGVuZ3RoK3IubGVuZ3RoLXRoaXMuX21heExlbmd0aDt0aGlzLl9zdGFydEluZGV4Kz1vLHRoaXMuX2xlbmd0aD10aGlzLl9tYXhMZW5ndGgsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUobyl9ZWxzZSB0aGlzLl9sZW5ndGgrPXIubGVuZ3RofSxlLnByb3RvdHlwZS50cmltU3RhcnQ9ZnVuY3Rpb24oZSl7ZT50aGlzLl9sZW5ndGgmJihlPXRoaXMuX2xlbmd0aCksdGhpcy5fc3RhcnRJbmRleCs9ZSx0aGlzLl9sZW5ndGgtPWUsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoZSl9LGUucHJvdG90eXBlLnNoaWZ0RWxlbWVudHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEodDw9MCkpe2lmKGU8MHx8ZT49dGhpcy5fbGVuZ3RoKXRocm93IG5ldyBFcnJvcigic3RhcnQgYXJndW1lbnQgb3V0IG9mIHJhbmdlIik7aWYoZStyPDApdGhyb3cgbmV3IEVycm9yKCJDYW5ub3Qgc2hpZnQgZWxlbWVudHMgaW4gbGlzdCBiZXlvbmQgaW5kZXggMCIpO2lmKHI+MCl7Zm9yKHZhciBpPXQtMTtpPj0wO2ktLSl0aGlzLnNldChlK2krcix0aGlzLmdldChlK2kpKTt2YXIgbj1lK3Qrci10aGlzLl9sZW5ndGg7aWYobj4wKWZvcih0aGlzLl9sZW5ndGgrPW47dGhpcy5fbGVuZ3RoPnRoaXMuX21heExlbmd0aDspdGhpcy5fbGVuZ3RoLS0sdGhpcy5fc3RhcnRJbmRleCsrLHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpfWVsc2UgZm9yKGk9MDtpPHQ7aSsrKXRoaXMuc2V0KGUraStyLHRoaXMuZ2V0KGUraSkpfX0sZS5wcm90b3R5cGUuX2dldEN5Y2xpY0luZGV4PWZ1bmN0aW9uKGUpe3JldHVybih0aGlzLl9zdGFydEluZGV4K2UpJXRoaXMuX21heExlbmd0aH0sZX0oKTt0LkNpcmN1bGFyTGlzdD1ufSwxNDM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuY2xvbmU9dm9pZCAwLHQuY2xvbmU9ZnVuY3Rpb24gZSh0LHIpe2lmKHZvaWQgMD09PXImJihyPTUpLCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4gdDt2YXIgaT1BcnJheS5pc0FycmF5KHQpP1tdOnt9O2Zvcih2YXIgbiBpbiB0KWlbbl09cjw9MT90W25dOnRbbl0mJmUodFtuXSxyLTEpO3JldHVybiBpfX0sODA1NTpmdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfTtmdW5jdGlvbiBhKGUpe3ZhciB0PWUudG9TdHJpbmcoMTYpO3JldHVybiB0Lmxlbmd0aDwyPyIwIit0OnR9ZnVuY3Rpb24gYyhlLHQpe3JldHVybiBlPHQ/KHQrLjA1KS8oZSsuMDUpOihlKy4wNSkvKHQrLjA1KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5jb250cmFzdFJhdGlvPXQudG9QYWRkZWRIZXg9dC5yZ2JhPXQucmdiPXQuY3NzPXQuY29sb3I9dC5jaGFubmVscz12b2lkIDAsZnVuY3Rpb24oZSl7ZS50b0Nzcz1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gdm9pZCAwIT09aT8iIyIrYShlKSthKHQpK2EocikrYShpKToiIyIrYShlKSthKHQpK2Eocil9LGUudG9SZ2JhPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0yNTUpLChlPDwyNHx0PDwxNnxyPDw4fGkpPj4+MH19KHI9dC5jaGFubmVsc3x8KHQuY2hhbm5lbHM9e30pKSwoaT10LmNvbG9yfHwodC5jb2xvcj17fSkpLmJsZW5kPWZ1bmN0aW9uKGUsdCl7dmFyIGk9KDI1NSZ0LnJnYmEpLzI1NTtpZigxPT09aSlyZXR1cm57Y3NzOnQuY3NzLHJnYmE6dC5yZ2JhfTt2YXIgbj10LnJnYmE+PjI0JjI1NSxvPXQucmdiYT4+MTYmMjU1LHM9dC5yZ2JhPj44JjI1NSxhPWUucmdiYT4+MjQmMjU1LGM9ZS5yZ2JhPj4xNiYyNTUsbD1lLnJnYmE+PjgmMjU1LGg9YStNYXRoLnJvdW5kKChuLWEpKmkpLHU9YytNYXRoLnJvdW5kKChvLWMpKmkpLGY9bCtNYXRoLnJvdW5kKChzLWwpKmkpO3JldHVybntjc3M6ci50b0NzcyhoLHUsZikscmdiYTpyLnRvUmdiYShoLHUsZil9fSxpLmlzT3BhcXVlPWZ1bmN0aW9uKGUpe3JldHVybiAyNTU9PSgyNTUmZS5yZ2JhKX0saS5lbnN1cmVDb250cmFzdFJhdGlvPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1vLmVuc3VyZUNvbnRyYXN0UmF0aW8oZS5yZ2JhLHQucmdiYSxyKTtpZihpKXJldHVybiBvLnRvQ29sb3IoaT4+MjQmMjU1LGk+PjE2JjI1NSxpPj44JjI1NSl9LGkub3BhcXVlPWZ1bmN0aW9uKGUpe3ZhciB0PSgyNTV8ZS5yZ2JhKT4+PjAsaT1zKG8udG9DaGFubmVscyh0KSwzKSxuPWlbMF0sYT1pWzFdLGM9aVsyXTtyZXR1cm57Y3NzOnIudG9Dc3MobixhLGMpLHJnYmE6dH19LGkub3BhY2l0eT1mdW5jdGlvbihlLHQpe3ZhciBpPU1hdGgucm91bmQoMjU1KnQpLG49cyhvLnRvQ2hhbm5lbHMoZS5yZ2JhKSwzKSxhPW5bMF0sYz1uWzFdLGw9blsyXTtyZXR1cm57Y3NzOnIudG9Dc3MoYSxjLGwsaSkscmdiYTpyLnRvUmdiYShhLGMsbCxpKX19LGkudG9Db2xvclJHQj1mdW5jdGlvbihlKXtyZXR1cm5bZS5yZ2JhPj4yNCYyNTUsZS5yZ2JhPj4xNiYyNTUsZS5yZ2JhPj44JjI1NV19LCh0LmNzc3x8KHQuY3NzPXt9KSkudG9Db2xvcj1mdW5jdGlvbihlKXtpZihlLm1hdGNoKC8jWzAtOWEtZl17Myw4fS9pKSlzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgNDp2YXIgdD1wYXJzZUludChlLnNsaWNlKDEsMikucmVwZWF0KDIpLDE2KSxyPXBhcnNlSW50KGUuc2xpY2UoMiwzKS5yZXBlYXQoMiksMTYpLGk9cGFyc2VJbnQoZS5zbGljZSgzLDQpLnJlcGVhdCgyKSwxNik7cmV0dXJuIG8udG9Db2xvcih0LHIsaSk7Y2FzZSA1OnQ9cGFyc2VJbnQoZS5zbGljZSgxLDIpLnJlcGVhdCgyKSwxNikscj1wYXJzZUludChlLnNsaWNlKDIsMykucmVwZWF0KDIpLDE2KSxpPXBhcnNlSW50KGUuc2xpY2UoMyw0KS5yZXBlYXQoMiksMTYpO3ZhciBuPXBhcnNlSW50KGUuc2xpY2UoNCw1KS5yZXBlYXQoMiksMTYpO3JldHVybiBvLnRvQ29sb3IodCxyLGksbik7Y2FzZSA3OnJldHVybntjc3M6ZSxyZ2JhOihwYXJzZUludChlLnNsaWNlKDEpLDE2KTw8OHwyNTUpPj4+MH07Y2FzZSA5OnJldHVybntjc3M6ZSxyZ2JhOnBhcnNlSW50KGUuc2xpY2UoMSksMTYpPj4+MH19dmFyIHM9ZS5tYXRjaCgvcmdiYT9cKFxzKihcZHsxLDN9KVxzKixccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqKCxccyooMHwxfFxkP1wuKFxkKykpXHMqKT9cKS8pO2lmKHMpcmV0dXJuIHQ9cGFyc2VJbnQoc1sxXSkscj1wYXJzZUludChzWzJdKSxpPXBhcnNlSW50KHNbM10pLG49TWF0aC5yb3VuZCgyNTUqKHZvaWQgMD09PXNbNV0/MTpwYXJzZUZsb2F0KHNbNV0pKSksby50b0NvbG9yKHQscixpLG4pO3Rocm93IG5ldyBFcnJvcigiY3NzLnRvQ29sb3I6IFVuc3VwcG9ydGVkIGNzcyBmb3JtYXQiKX0sZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQscil7dmFyIGk9ZS8yNTUsbj10LzI1NSxvPXIvMjU1O3JldHVybi4yMTI2KihpPD0uMDM5Mjg/aS8xMi45MjpNYXRoLnBvdygoaSsuMDU1KS8xLjA1NSwyLjQpKSsuNzE1Mioobjw9LjAzOTI4P24vMTIuOTI6TWF0aC5wb3coKG4rLjA1NSkvMS4wNTUsMi40KSkrLjA3MjIqKG88PS4wMzkyOD9vLzEyLjkyOk1hdGgucG93KChvKy4wNTUpLzEuMDU1LDIuNCkpfWUucmVsYXRpdmVMdW1pbmFuY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlKX0sZS5yZWxhdGl2ZUx1bWluYW5jZTI9dH0obj10LnJnYnx8KHQucmdiPXt9KSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQscil7Zm9yKHZhciBpPWU+PjI0JjI1NSxvPWU+PjE2JjI1NSxzPWU+PjgmMjU1LGE9dD4+MjQmMjU1LGw9dD4+MTYmMjU1LGg9dD4+OCYyNTUsdT1jKG4ucmVsYXRpdmVMdW1pbmFuY2UyKGEsbCxoKSxuLnJlbGF0aXZlTHVtaW5hbmNlMihpLG8scykpO3U8ciYmKGE+MHx8bD4wfHxoPjApOylhLT1NYXRoLm1heCgwLE1hdGguY2VpbCguMSphKSksbC09TWF0aC5tYXgoMCxNYXRoLmNlaWwoLjEqbCkpLGgtPU1hdGgubWF4KDAsTWF0aC5jZWlsKC4xKmgpKSx1PWMobi5yZWxhdGl2ZUx1bWluYW5jZTIoYSxsLGgpLG4ucmVsYXRpdmVMdW1pbmFuY2UyKGksbyxzKSk7cmV0dXJuKGE8PDI0fGw8PDE2fGg8PDh8MjU1KT4+PjB9ZnVuY3Rpb24gaShlLHQscil7Zm9yKHZhciBpPWU+PjI0JjI1NSxvPWU+PjE2JjI1NSxzPWU+PjgmMjU1LGE9dD4+MjQmMjU1LGw9dD4+MTYmMjU1LGg9dD4+OCYyNTUsdT1jKG4ucmVsYXRpdmVMdW1pbmFuY2UyKGEsbCxoKSxuLnJlbGF0aXZlTHVtaW5hbmNlMihpLG8scykpO3U8ciYmKGE8MjU1fHxsPDI1NXx8aDwyNTUpOylhPU1hdGgubWluKDI1NSxhK01hdGguY2VpbCguMSooMjU1LWEpKSksbD1NYXRoLm1pbigyNTUsbCtNYXRoLmNlaWwoLjEqKDI1NS1sKSkpLGg9TWF0aC5taW4oMjU1LGgrTWF0aC5jZWlsKC4xKigyNTUtaCkpKSx1PWMobi5yZWxhdGl2ZUx1bWluYW5jZTIoYSxsLGgpLG4ucmVsYXRpdmVMdW1pbmFuY2UyKGksbyxzKSk7cmV0dXJuKGE8PDI0fGw8PDE2fGg8PDh8MjU1KT4+PjB9ZS5lbnN1cmVDb250cmFzdFJhdGlvPWZ1bmN0aW9uKGUscixvKXt2YXIgcz1uLnJlbGF0aXZlTHVtaW5hbmNlKGU+PjgpLGE9bi5yZWxhdGl2ZUx1bWluYW5jZShyPj44KTtpZihjKHMsYSk8byl7aWYoYTxzKXt2YXIgbD10KGUscixvKSxoPWMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKGw+PjgpKTtpZihoPG8pe3ZhciB1PWkoZSxlLG8pO3JldHVybiBoPmMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKHU+PjgpKT9sOnV9cmV0dXJuIGx9dmFyIGY9aShlLHIsbyksXz1jKHMsbi5yZWxhdGl2ZUx1bWluYW5jZShmPj44KSk7cmV0dXJuIF88bz8odT10KGUsZSxvKSxfPmMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKHU+PjgpKT9mOnUpOmZ9fSxlLnJlZHVjZUx1bWluYW5jZT10LGUuaW5jcmVhc2VMdW1pbmFuY2U9aSxlLnRvQ2hhbm5lbHM9ZnVuY3Rpb24oZSl7cmV0dXJuW2U+PjI0JjI1NSxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdfSxlLnRvQ29sb3I9ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJue2NzczpyLnRvQ3NzKGUsdCxpLG4pLHJnYmE6ci50b1JnYmEoZSx0LGksbil9fX0obz10LnJnYmF8fCh0LnJnYmE9e30pKSx0LnRvUGFkZGVkSGV4PWEsdC5jb250cmFzdFJhdGlvPWN9LDg5Njk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZVRlcm1pbmFsPXZvaWQgMDt2YXIgcz1yKDg0NCksYT1yKDI1ODUpLGM9cig0MzQ4KSxsPXIoNzg2NiksaD1yKDc0NCksdT1yKDczMDIpLGY9cig2OTc1KSxfPXIoODQ2MCksZD1yKDE3NTMpLHA9cigzNzMwKSx2PXIoMTQ4MCkseT1yKDc5OTQpLGc9cig5MjgyKSxtPXIoNTQzNSksYj1yKDU5ODEpLFM9ITEsQz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fb25CaW5hcnk9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uRGF0YT1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25MaW5lRmVlZD1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25SZXNpemU9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uU2Nyb2xsPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9vbldyaXRlUGFyc2VkPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9pbnN0YW50aWF0aW9uU2VydmljZT1uZXcgYy5JbnN0YW50aWF0aW9uU2VydmljZSxyLm9wdGlvbnNTZXJ2aWNlPW5ldyB1Lk9wdGlvbnNTZXJ2aWNlKHQpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JT3B0aW9uc1NlcnZpY2Usci5vcHRpb25zU2VydmljZSksci5fYnVmZmVyU2VydmljZT1yLnJlZ2lzdGVyKHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGguQnVmZmVyU2VydmljZSkpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JQnVmZmVyU2VydmljZSxyLl9idWZmZXJTZXJ2aWNlKSxyLl9sb2dTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGwuTG9nU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklMb2dTZXJ2aWNlLHIuX2xvZ1NlcnZpY2UpLHIuY29yZVNlcnZpY2U9ci5yZWdpc3RlcihyLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShmLkNvcmVTZXJ2aWNlLChmdW5jdGlvbigpe3JldHVybiByLnNjcm9sbFRvQm90dG9tKCl9KSkpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JQ29yZVNlcnZpY2Usci5jb3JlU2VydmljZSksci5jb3JlTW91c2VTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGQuQ29yZU1vdXNlU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklDb3JlTW91c2VTZXJ2aWNlLHIuY29yZU1vdXNlU2VydmljZSksci5fZGlydHlSb3dTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHAuRGlydHlSb3dTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSURpcnR5Um93U2VydmljZSxyLl9kaXJ0eVJvd1NlcnZpY2UpLHIudW5pY29kZVNlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2Uodi5Vbmljb2RlU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklVbmljb2RlU2VydmljZSxyLnVuaWNvZGVTZXJ2aWNlKSxyLl9jaGFyc2V0U2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZSh5LkNoYXJzZXRTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSUNoYXJzZXRTZXJ2aWNlLHIuX2NoYXJzZXRTZXJ2aWNlKSxyLl9pbnB1dEhhbmRsZXI9bmV3IG0uSW5wdXRIYW5kbGVyKHIuX2J1ZmZlclNlcnZpY2Usci5fY2hhcnNldFNlcnZpY2Usci5jb3JlU2VydmljZSxyLl9kaXJ0eVJvd1NlcnZpY2Usci5fbG9nU2VydmljZSxyLm9wdGlvbnNTZXJ2aWNlLHIuY29yZU1vdXNlU2VydmljZSxyLnVuaWNvZGVTZXJ2aWNlKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25MaW5lRmVlZCxyLl9vbkxpbmVGZWVkKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIpLHIucmVnaXN0ZXIoKDAsXy5mb3J3YXJkRXZlbnQpKHIuX2J1ZmZlclNlcnZpY2Uub25SZXNpemUsci5fb25SZXNpemUpKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLmNvcmVTZXJ2aWNlLm9uRGF0YSxyLl9vbkRhdGEpKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLmNvcmVTZXJ2aWNlLm9uQmluYXJ5LHIuX29uQmluYXJ5KSksci5yZWdpc3RlcihyLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbihlKXtyZXR1cm4gci5fdXBkYXRlT3B0aW9ucyhlKX0pKSksci5yZWdpc3RlcihyLl9idWZmZXJTZXJ2aWNlLm9uU2Nyb2xsKChmdW5jdGlvbihlKXtyLl9vblNjcm9sbC5maXJlKHtwb3NpdGlvbjpyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxzb3VyY2U6MH0pLHIuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3Asci5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tKX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25TY3JvbGwoKGZ1bmN0aW9uKGUpe3IuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSksci5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCxyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20pfSkpKSxyLl93cml0ZUJ1ZmZlcj1uZXcgYi5Xcml0ZUJ1ZmZlcigoZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5faW5wdXRIYW5kbGVyLnBhcnNlKGUsdCl9KSksci5yZWdpc3RlcigoMCxfLmZvcndhcmRFdmVudCkoci5fd3JpdGVCdWZmZXIub25Xcml0ZVBhcnNlZCxyLl9vbldyaXRlUGFyc2VkKSkscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CaW5hcnkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CaW5hcnkuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRhdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EYXRhLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25MaW5lRmVlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXNpemUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbldyaXRlUGFyc2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uV3JpdGVQYXJzZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNjcm9sbCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX29uU2Nyb2xsQXBpfHwodGhpcy5fb25TY3JvbGxBcGk9bmV3IF8uRXZlbnRFbWl0dGVyLHRoaXMucmVnaXN0ZXIodGhpcy5fb25TY3JvbGwuZXZlbnQoKGZ1bmN0aW9uKHQpe3ZhciByO251bGw9PT0ocj1lLl9vblNjcm9sbEFwaSl8fHZvaWQgMD09PXJ8fHIuZmlyZSh0LnBvc2l0aW9uKX0pKSkpLHRoaXMuX29uU2Nyb2xsQXBpLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiY29scyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJyb3dzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ1ZmZlcnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib3B0aW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnN9LHNldDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnNbdF09ZVt0XX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy5faXNEaXNwb3NlZHx8KGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSxudWxsPT09KHQ9dGhpcy5fd2luZG93c01vZGUpfHx2b2lkIDA9PT10fHx0LmRpc3Bvc2UoKSx0aGlzLl93aW5kb3dzTW9kZT12b2lkIDApfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3dyaXRlQnVmZmVyLndyaXRlKGUsdCl9LHQucHJvdG90eXBlLndyaXRlU3luYz1mdW5jdGlvbihlLHQpe3RoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLldBUk4mJiFTJiYodGhpcy5fbG9nU2VydmljZS53YXJuKCJ3cml0ZVN5bmMgaXMgdW5yZWxpYWJsZSBhbmQgd2lsbCBiZSByZW1vdmVkIHNvb24uIiksUz0hMCksdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTeW5jKGUsdCl9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe2lzTmFOKGUpfHxpc05hTih0KXx8KGU9TWF0aC5tYXgoZSxoLk1JTklNVU1fQ09MUyksdD1NYXRoLm1heCh0LGguTUlOSU1VTV9ST1dTKSx0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZShlLHQpKX0sdC5wcm90b3R5cGUuc2Nyb2xsPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKGUsdCl9LHQucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbExpbmVzKGUsdCxyKX0sdC5wcm90b3R5cGUuc2Nyb2xsUGFnZXM9ZnVuY3Rpb24oZSl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxQYWdlcyhlKX0sdC5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvVG9wKCl9LHQucHJvdG90eXBlLnNjcm9sbFRvQm90dG9tPWZ1bmN0aW9uKCl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb0JvdHRvbSgpfSx0LnByb3RvdHlwZS5zY3JvbGxUb0xpbmU9ZnVuY3Rpb24oZSl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb0xpbmUoZSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRXNjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRGNzSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLl9zZXR1cD1mdW5jdGlvbigpe3RoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZSYmdGhpcy5fZW5hYmxlV2luZG93c01vZGUoKX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9pbnB1dEhhbmRsZXIucmVzZXQoKSx0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2V0KCksdGhpcy5fY2hhcnNldFNlcnZpY2UucmVzZXQoKSx0aGlzLmNvcmVTZXJ2aWNlLnJlc2V0KCksdGhpcy5jb3JlTW91c2VTZXJ2aWNlLnJlc2V0KCl9LHQucHJvdG90eXBlLl91cGRhdGVPcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0O3N3aXRjaChlKXtjYXNlInNjcm9sbGJhY2siOnRoaXMuYnVmZmVycy5yZXNpemUodGhpcy5jb2xzLHRoaXMucm93cyk7YnJlYWs7Y2FzZSJ3aW5kb3dzTW9kZSI6dGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlP3RoaXMuX2VuYWJsZVdpbmRvd3NNb2RlKCk6KG51bGw9PT0odD10aGlzLl93aW5kb3dzTW9kZSl8fHZvaWQgMD09PXR8fHQuZGlzcG9zZSgpLHRoaXMuX3dpbmRvd3NNb2RlPXZvaWQgMCl9fSx0LnByb3RvdHlwZS5fZW5hYmxlV2luZG93c01vZGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF0aGlzLl93aW5kb3dzTW9kZSl7dmFyIHQ9W107dC5wdXNoKHRoaXMub25MaW5lRmVlZChnLnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlLmJpbmQobnVsbCx0aGlzLl9idWZmZXJTZXJ2aWNlKSkpLHQucHVzaCh0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkgifSwoZnVuY3Rpb24oKXtyZXR1cm4oMCxnLnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlKShlLl9idWZmZXJTZXJ2aWNlKSwhMX0pKSksdGhpcy5fd2luZG93c01vZGU9e2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZSxyO3RyeXtmb3IodmFyIGk9byh0KSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSluLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fX19fSx0fShzLkRpc3Bvc2FibGUpO3QuQ29yZVRlcm1pbmFsPUN9LDg0NjA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5mb3J3YXJkRXZlbnQ9dC5FdmVudEVtaXR0ZXI9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2xpc3RlbmVycz1bXSx0aGlzLl9kaXNwb3NlZD0hMX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJldmVudCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2V2ZW50fHwodGhpcy5fZXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuX2xpc3RlbmVycy5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7aWYoIWUuX2Rpc3Bvc2VkKWZvcih2YXIgcj0wO3I8ZS5fbGlzdGVuZXJzLmxlbmd0aDtyKyspaWYoZS5fbGlzdGVuZXJzW3JdPT09dClyZXR1cm4gdm9pZCBlLl9saXN0ZW5lcnMuc3BsaWNlKHIsMSl9fX0pLHRoaXMuX2V2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10saT0wO2k8dGhpcy5fbGlzdGVuZXJzLmxlbmd0aDtpKyspci5wdXNoKHRoaXMuX2xpc3RlbmVyc1tpXSk7Zm9yKGk9MDtpPHIubGVuZ3RoO2krKylyW2ldLmNhbGwodm9pZCAwLGUsdCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnMubGVuZ3RoPTApLHRoaXMuX2Rpc3Bvc2VkPSEwfSxlfSgpO3QuRXZlbnRFbWl0dGVyPXIsdC5mb3J3YXJkRXZlbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZmlyZShlKX0pKX19LDU0MzU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuSW5wdXRIYW5kbGVyPXQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlPXZvaWQgMDt2YXIgbyxzPXIoMjU4NCksYT1yKDcxMTYpLGM9cigyMDE1KSxsPXIoODQ0KSxoPXIoODI3MyksdT1yKDQ4MiksZj1yKDg0MzcpLF89cig4NDYwKSxkPXIoNjQzKSxwPXIoNTExKSx2PXIoMzczNCkseT1yKDI1ODUpLGc9cig2MjQyKSxtPXIoNjM1MSksYj1yKDU5NDEpLFM9eyIoIjowLCIpIjoxLCIqIjoyLCIrIjozLCItIjoxLCIuIjoyfSxDPTEzMTA3MjtmdW5jdGlvbiB3KGUsdCl7aWYoZT4yNClyZXR1cm4gdC5zZXRXaW5MaW5lc3x8ITE7c3dpdGNoKGUpe2Nhc2UgMTpyZXR1cm4hIXQucmVzdG9yZVdpbjtjYXNlIDI6cmV0dXJuISF0Lm1pbmltaXplV2luO2Nhc2UgMzpyZXR1cm4hIXQuc2V0V2luUG9zaXRpb247Y2FzZSA0OnJldHVybiEhdC5zZXRXaW5TaXplUGl4ZWxzO2Nhc2UgNTpyZXR1cm4hIXQucmFpc2VXaW47Y2FzZSA2OnJldHVybiEhdC5sb3dlcldpbjtjYXNlIDc6cmV0dXJuISF0LnJlZnJlc2hXaW47Y2FzZSA4OnJldHVybiEhdC5zZXRXaW5TaXplQ2hhcnM7Y2FzZSA5OnJldHVybiEhdC5tYXhpbWl6ZVdpbjtjYXNlIDEwOnJldHVybiEhdC5mdWxsc2NyZWVuV2luO2Nhc2UgMTE6cmV0dXJuISF0LmdldFdpblN0YXRlO2Nhc2UgMTM6cmV0dXJuISF0LmdldFdpblBvc2l0aW9uO2Nhc2UgMTQ6cmV0dXJuISF0LmdldFdpblNpemVQaXhlbHM7Y2FzZSAxNTpyZXR1cm4hIXQuZ2V0U2NyZWVuU2l6ZVBpeGVscztjYXNlIDE2OnJldHVybiEhdC5nZXRDZWxsU2l6ZVBpeGVscztjYXNlIDE4OnJldHVybiEhdC5nZXRXaW5TaXplQ2hhcnM7Y2FzZSAxOTpyZXR1cm4hIXQuZ2V0U2NyZWVuU2l6ZUNoYXJzO2Nhc2UgMjA6cmV0dXJuISF0LmdldEljb25UaXRsZTtjYXNlIDIxOnJldHVybiEhdC5nZXRXaW5UaXRsZTtjYXNlIDIyOnJldHVybiEhdC5wdXNoVGl0bGU7Y2FzZSAyMzpyZXR1cm4hIXQucG9wVGl0bGU7Y2FzZSAyNDpyZXR1cm4hIXQuc2V0V2luTGluZXN9cmV0dXJuITF9IWZ1bmN0aW9uKGUpe2VbZS5HRVRfV0lOX1NJWkVfUElYRUxTPTBdPSJHRVRfV0lOX1NJWkVfUElYRUxTIixlW2UuR0VUX0NFTExfU0laRV9QSVhFTFM9MV09IkdFVF9DRUxMX1NJWkVfUElYRUxTIn0obz10LldpbmRvd3NPcHRpb25zUmVwb3J0VHlwZXx8KHQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlPXt9KSk7dmFyIEw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGkpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9jb3JlU2VydmljZT10LHRoaXMuX2xvZ1NlcnZpY2U9cix0aGlzLl9vcHRpb25zU2VydmljZT1pLHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApfXJldHVybiBlLnByb3RvdHlwZS5ob29rPWZ1bmN0aW9uKGUpe3RoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2RhdGE9KDAsaC5jb25jYXQpKHRoaXMuX2RhdGEsZS5zdWJhcnJheSh0LHIpKX0sZS5wcm90b3R5cGUudW5ob29rPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKSwhMDt2YXIgdD0oMCx1LnV0ZjMyVG9TdHJpbmcpKHRoaXMuX2RhdGEpO3N3aXRjaCh0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKSx0KXtjYXNlJyJxJzp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKydQMSRyMCJxJytzLkMwLkVTQysiXFwiKTticmVhaztjYXNlJyJwJzp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKydQMSRyNjE7MSJwJytzLkMwLkVTQysiXFwiKTticmVhaztjYXNlInIiOnZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCsxKyI7IisodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tKzEpKyJyIjt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJQMSRyIityK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2Nhc2UibSI6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiUDEkcjBtIitzLkMwLkVTQysiXFwiKTticmVhaztjYXNlIiBxIjp2YXIgaT17YmxvY2s6Mix1bmRlcmxpbmU6NCxiYXI6Nn1bdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZV07aS09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JCbGluaz8xOjAsdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiUDEkciIraSsiIHEiK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBEQ1MgJHEgJXMiLHQpLHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlAwJHIiK3MuQzAuRVNDKyJcXCIpfXJldHVybiEwfSxlfSgpLEU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8sbCxoLGQsdil7dm9pZCAwPT09diYmKHY9bmV3IGMuRXNjYXBlU2VxdWVuY2VQYXJzZXIpO3ZhciB5PWUuY2FsbCh0aGlzKXx8dGhpczt5Ll9idWZmZXJTZXJ2aWNlPXQseS5fY2hhcnNldFNlcnZpY2U9cix5Ll9jb3JlU2VydmljZT1pLHkuX2RpcnR5Um93U2VydmljZT1uLHkuX2xvZ1NlcnZpY2U9byx5Ll9vcHRpb25zU2VydmljZT1sLHkuX2NvcmVNb3VzZVNlcnZpY2U9aCx5Ll91bmljb2RlU2VydmljZT1kLHkuX3BhcnNlcj12LHkuX3BhcnNlQnVmZmVyPW5ldyBVaW50MzJBcnJheSg0MDk2KSx5Ll9zdHJpbmdEZWNvZGVyPW5ldyB1LlN0cmluZ1RvVXRmMzIseS5fdXRmOERlY29kZXI9bmV3IHUuVXRmOFRvVXRmMzIseS5fd29ya0NlbGw9bmV3IHAuQ2VsbERhdGEseS5fd2luZG93VGl0bGU9IiIseS5faWNvbk5hbWU9IiIseS5fd2luZG93VGl0bGVTdGFjaz1bXSx5Ll9pY29uTmFtZVN0YWNrPVtdLHkuX2N1ckF0dHJEYXRhPWYuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx5Ll9lcmFzZUF0dHJEYXRhSW50ZXJuYWw9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHkuX29uUmVxdWVzdEJlbGw9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uUmVxdWVzdFJlZnJlc2hSb3dzPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RSZXNldD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25SZXF1ZXN0U2VuZEZvY3VzPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25BMTF5Q2hhcj1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25BMTF5VGFiPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkN1cnNvck1vdmU9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uTGluZUZlZWQ9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uU2Nyb2xsPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblRpdGxlQ2hhbmdlPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkNvbG9yPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9wYXJzZVN0YWNrPXtwYXVzZWQ6ITEsY3Vyc29yU3RhcnRYOjAsY3Vyc29yU3RhcnRZOjAsZGVjb2RlZExlbmd0aDowLHBvc2l0aW9uOjB9LHkuX3NwZWNpYWxDb2xvcnM9WzI1NiwyNTcsMjU4XSx5LnJlZ2lzdGVyKHkuX3BhcnNlcikseS5fYWN0aXZlQnVmZmVyPXkuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLHkucmVnaXN0ZXIoeS5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKGUpe3JldHVybiB5Ll9hY3RpdmVCdWZmZXI9ZS5hY3RpdmVCdWZmZXJ9KSkpLHkuX3BhcnNlci5zZXRDc2lIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUsdCl7eS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBDU0kgY29kZTogIix7aWRlbnRpZmllcjp5Ll9wYXJzZXIuaWRlbnRUb1N0cmluZyhlKSxwYXJhbXM6dC50b0FycmF5KCl9KX0pKSx5Ll9wYXJzZXIuc2V0RXNjSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlKXt5Ll9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIEVTQyBjb2RlOiAiLHtpZGVudGlmaWVyOnkuX3BhcnNlci5pZGVudFRvU3RyaW5nKGUpfSl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUpe3kuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gRVhFQ1VURSBjb2RlOiAiLHtjb2RlOmV9KX0pKSx5Ll9wYXJzZXIuc2V0T3NjSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlLHQscil7eS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBPU0MgY29kZTogIix7aWRlbnRpZmllcjplLGFjdGlvbjp0LGRhdGE6cn0pfSkpLHkuX3BhcnNlci5zZXREY3NIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUsdCxyKXsiSE9PSyI9PT10JiYocj1yLnRvQXJyYXkoKSkseS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBEQ1MgY29kZTogIix7aWRlbnRpZmllcjp5Ll9wYXJzZXIuaWRlbnRUb1N0cmluZyhlKSxhY3Rpb246dCxwYXlsb2FkOnJ9KX0pKSx5Ll9wYXJzZXIuc2V0UHJpbnRIYW5kbGVyKChmdW5jdGlvbihlLHQscil7cmV0dXJuIHkucHJpbnQoZSx0LHIpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJAIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5Lmluc2VydENoYXJzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiAiLGZpbmFsOiJAIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbExlZnQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yVXAoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiICIsZmluYWw6IkEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2Nyb2xsUmlnaHQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkIifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yRG93bihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiQyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JGb3J3YXJkKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJEIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckJhY2t3YXJkKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJFIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvck5leHRMaW5lKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJGIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvclByZWNlZGluZ0xpbmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkcifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yQ2hhckFic29sdXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJIIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvclBvc2l0aW9uKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJJIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckZvcndhcmRUYWIoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkoifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VJbkRpc3BsYXkoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoiSiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUluRGlzcGxheShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiSyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUluTGluZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJLIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmVyYXNlSW5MaW5lKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJMIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5Lmluc2VydExpbmVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJNIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRlbGV0ZUxpbmVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJQIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRlbGV0ZUNoYXJzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJTIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbFVwKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJUIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbERvd24oZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IlgifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VDaGFycyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiWiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JCYWNrd2FyZFRhYihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiYCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jaGFyUG9zQWJzb2x1dGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuaFBvc2l0aW9uUmVsYXRpdmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImIifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJjIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNlbmREZXZpY2VBdHRyaWJ1dGVzUHJpbWFyeShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij4iLGZpbmFsOiJjIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJkIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmxpbmVQb3NBYnNvbHV0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiZSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS52UG9zaXRpb25SZWxhdGl2ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiZiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5oVlBvc2l0aW9uKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJnIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnRhYkNsZWFyKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJoIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE1vZGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoiaCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRNb2RlUHJpdmF0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoibCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXNldE1vZGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoibCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXNldE1vZGVQcml2YXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJtIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmNoYXJBdHRyaWJ1dGVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJuIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRldmljZVN0YXR1cyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJuIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRldmljZVN0YXR1c1ByaXZhdGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiISIsZmluYWw6InAifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc29mdFJlc2V0KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiAiLGZpbmFsOiJxIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldEN1cnNvclN0eWxlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJyIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldFNjcm9sbFJlZ2lvbihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoicyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zYXZlQ3Vyc29yKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJ0In0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LndpbmRvd09wdGlvbnMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6InUifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUN1cnNvcihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiInIixmaW5hbDoifSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5pbnNlcnRDb2x1bW5zKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiciLGZpbmFsOiJ+In0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRlbGV0ZUNvbHVtbnMoZSl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuQkVMLChmdW5jdGlvbigpe3JldHVybiB5LmJlbGwoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5MRiwoZnVuY3Rpb24oKXtyZXR1cm4geS5saW5lRmVlZCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLlZULChmdW5jdGlvbigpe3JldHVybiB5LmxpbmVGZWVkKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuRkYsKGZ1bmN0aW9uKCl7cmV0dXJuIHkubGluZUZlZWQoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5DUiwoZnVuY3Rpb24oKXtyZXR1cm4geS5jYXJyaWFnZVJldHVybigpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkJTLChmdW5jdGlvbigpe3JldHVybiB5LmJhY2tzcGFjZSgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkhULChmdW5jdGlvbigpe3JldHVybiB5LnRhYigpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLlNPLChmdW5jdGlvbigpe3JldHVybiB5LnNoaWZ0T3V0KCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuU0ksKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2hpZnRJbigpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMxLklORCwoZnVuY3Rpb24oKXtyZXR1cm4geS5pbmRleCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMxLk5FTCwoZnVuY3Rpb24oKXtyZXR1cm4geS5uZXh0TGluZSgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMxLkhUUywoZnVuY3Rpb24oKXtyZXR1cm4geS50YWJTZXQoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDAsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0VGl0bGUoZSkseS5zZXRJY29uTmFtZShlKSwhMH0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldEljb25OYW1lKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDIsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0VGl0bGUoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoNCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRPclJlcG9ydEluZGV4ZWRDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRPclJlcG9ydEZnQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTEsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0T3JSZXBvcnRCZ0NvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEyLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE9yUmVwb3J0Q3Vyc29yQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTA0LG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVJbmRleGVkQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTEwLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVGZ0NvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMSxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXN0b3JlQmdDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTIsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUN1cnNvckNvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiNyJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNhdmVDdXJzb3IoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiOCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnJlc3RvcmVDdXJzb3IoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiRCJ9LChmdW5jdGlvbigpe3JldHVybiB5LmluZGV4KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IkUifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5uZXh0TGluZSgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJIIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkudGFiU2V0KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6Ik0ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5yZXZlcnNlSW5kZXgoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiPSJ9LChmdW5jdGlvbigpe3JldHVybiB5LmtleXBhZEFwcGxpY2F0aW9uTW9kZSgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiI+In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkua2V5cGFkTnVtZXJpY01vZGUoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiYyJ9LChmdW5jdGlvbigpe3JldHVybiB5LmZ1bGxSZXNldCgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJuIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDIpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJvIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDMpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJ8In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDMpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJ9In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDIpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJ+In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDEpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiUiLGZpbmFsOiJAIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0RGVmYXVsdENoYXJzZXQoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIlIixmaW5hbDoiRyJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdERlZmF1bHRDaGFyc2V0KCl9KSk7dmFyIG09ZnVuY3Rpb24oZSl7Yi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKCIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKCIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKSIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKSIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKiIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKiIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKyIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKyIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiLSIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiLSIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiLiIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiLiIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiLyIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiLyIrZSl9KSl9LGI9dGhpcztmb3IodmFyIFMgaW4gYS5DSEFSU0VUUyltKFMpO3JldHVybiB5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIjIixmaW5hbDoiOCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNjcmVlbkFsaWdubWVudFBhdHRlcm4oKX0pKSx5Ll9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5fbG9nU2VydmljZS5lcnJvcigiUGFyc2luZyBlcnJvcjogIixlKSxlfSkpLHkuX3BhcnNlci5yZWdpc3RlckRjc0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiQiLGZpbmFsOiJxIn0sbmV3IEwoeS5fYnVmZmVyU2VydmljZSx5Ll9jb3JlU2VydmljZSx5Ll9sb2dTZXJ2aWNlLHkuX29wdGlvbnNTZXJ2aWNlKSkseX1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0QmVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RCZWxsLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0UmVmcmVzaFJvd3MiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZXNldCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RSZXNldC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFNlbmRGb2N1cyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RTZW5kRm9jdXMuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RTeW5jU2Nyb2xsQmFyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeUNoYXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BMTF5Q2hhci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeVRhYiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlUYWIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkN1cnNvck1vdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25MaW5lRmVlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TY3JvbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TY3JvbGwuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblRpdGxlQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uVGl0bGVDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkNvbG9yIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3ByZXNlcnZlU3RhY2s9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ9ITAsdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFg9ZSx0aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WT10LHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aD1yLHRoaXMuX3BhcnNlU3RhY2sucG9zaXRpb249aX0sdC5wcm90b3R5cGUuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYz1mdW5jdGlvbihlKXt0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD15LkxvZ0xldmVsRW51bS5XQVJOJiZQcm9taXNlLnJhY2UoW2UsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQoIiNTTE9XX1RJTUVPVVQiKX0pLDVlMyl9KSldKS5jYXRjaCgoZnVuY3Rpb24oZSl7aWYoIiNTTE9XX1RJTUVPVVQiIT09ZSl0aHJvdyBlO2NvbnNvbGUud2FybigiYXN5bmMgcGFyc2VyIGhhbmRsZXIgdGFraW5nIGxvbmdlciB0aGFuIDUwMDAgbXMiKX0pKX0sdC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSx0KXt2YXIgcixpPXRoaXMuX2FjdGl2ZUJ1ZmZlci54LG49dGhpcy5fYWN0aXZlQnVmZmVyLnksbz0wLHM9dGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ7aWYocyl7aWYocj10aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsdGhpcy5fcGFyc2VTdGFjay5kZWNvZGVkTGVuZ3RoLHQpKXJldHVybiB0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocikscjtpPXRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYLG49dGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFksdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ9ITEsZS5sZW5ndGg+QyYmKG89dGhpcy5fcGFyc2VTdGFjay5wb3NpdGlvbitDKX1pZih0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD15LkxvZ0xldmVsRW51bS5ERUJVRyYmdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygicGFyc2luZyBkYXRhIisoInN0cmluZyI9PXR5cGVvZiBlPycgIicrZSsnIic6JyAiJytBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSl9KSkuam9pbigiIikrJyInKSwic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApfSkpOmUpLHRoaXMuX3BhcnNlQnVmZmVyLmxlbmd0aDxlLmxlbmd0aCYmdGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoPEMmJih0aGlzLl9wYXJzZUJ1ZmZlcj1uZXcgVWludDMyQXJyYXkoTWF0aC5taW4oZS5sZW5ndGgsQykpKSxzfHx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UuY2xlYXJSYW5nZSgpLGUubGVuZ3RoPkMpZm9yKHZhciBhPW87YTxlLmxlbmd0aDthKz1DKXt2YXIgYz1hK0M8ZS5sZW5ndGg/YStDOmUubGVuZ3RoLGw9InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGUuc3Vic3RyaW5nKGEsYyksdGhpcy5fcGFyc2VCdWZmZXIpOnRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShlLnN1YmFycmF5KGEsYyksdGhpcy5fcGFyc2VCdWZmZXIpO2lmKHI9dGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLGwpKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKGksbixsLGEpLHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyKSxyfWVsc2UgaWYoIXMmJihsPSJzdHJpbmciPT10eXBlb2YgZT90aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShlLHRoaXMuX3BhcnNlQnVmZmVyKTp0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUoZSx0aGlzLl9wYXJzZUJ1ZmZlcikscj10aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsbCkpKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKGksbixsLDApLHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyKSxyO3RoaXMuX2FjdGl2ZUJ1ZmZlci54PT09aSYmdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT1ufHx0aGlzLl9vbkN1cnNvck1vdmUuZmlyZSgpLHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUodGhpcy5fZGlydHlSb3dTZXJ2aWNlLnN0YXJ0LHRoaXMuX2RpcnR5Um93U2VydmljZS5lbmQpfSx0LnByb3RvdHlwZS5wcmludD1mdW5jdGlvbihlLHQscil7dmFyIGksbixvPXRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQscz10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUsYT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsYz10aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZCxsPXRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUsaD10aGlzLl9jdXJBdHRyRGF0YSxmPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9hY3RpdmVCdWZmZXIueCYmci10PjAmJjI9PT1mLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEpJiZmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEsMCwxLGguZmcsaC5iZyxoLmV4dGVuZGVkKTtmb3IodmFyIF89dDtfPHI7KytfKXtpZihpPWVbX10sbj10aGlzLl91bmljb2RlU2VydmljZS53Y3dpZHRoKGkpLGk8MTI3JiZvKXt2YXIgcD1vW1N0cmluZy5mcm9tQ2hhckNvZGUoaSldO3AmJihpPXAuY2hhckNvZGVBdCgwKSl9aWYocyYmdGhpcy5fb25BMTF5Q2hhci5maXJlKCgwLHUuc3RyaW5nRnJvbUNvZGVQb2ludCkoaSkpLG58fCF0aGlzLl9hY3RpdmVCdWZmZXIueCl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLngrbi0xPj1hKWlmKGMpe2Zvcig7dGhpcy5fYWN0aXZlQnVmZmVyLng8YTspZi5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCsrLDAsMSxoLmZnLGguYmcsaC5leHRlbmRlZCk7dGhpcy5fYWN0aXZlQnVmZmVyLng9MCx0aGlzLl9hY3RpdmVCdWZmZXIueSsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSsxPyh0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSwhMCkpOih0aGlzLl9hY3RpdmVCdWZmZXIueT49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzJiYodGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KS5pc1dyYXBwZWQ9ITApLGY9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpfWVsc2UgaWYodGhpcy5fYWN0aXZlQnVmZmVyLng9YS0xLDI9PT1uKWNvbnRpbnVlO2lmKGwmJihmLmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LG4sdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKGgpLGgpLDI9PT1mLmdldFdpZHRoKGEtMSkmJmYuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYS0xLGQuTlVMTF9DRUxMX0NPREUsZC5OVUxMX0NFTExfV0lEVEgsaC5mZyxoLmJnLGguZXh0ZW5kZWQpKSxmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssaSxuLGguZmcsaC5iZyxoLmV4dGVuZGVkKSxuPjApZm9yKDstLW47KWYuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKywwLDAsaC5mZyxoLmJnLGguZXh0ZW5kZWQpfWVsc2UgZi5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xKT9mLmFkZENvZGVwb2ludFRvQ2VsbCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xLGkpOmYuYWRkQ29kZXBvaW50VG9DZWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTIsaSl9ci10PjAmJihmLmxvYWRDZWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEsdGhpcy5fd29ya0NlbGwpLDI9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpfHx0aGlzLl93b3JrQ2VsbC5nZXRDb2RlKCk+NjU1MzU/dGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludD0wOnRoaXMuX3dvcmtDZWxsLmlzQ29tYmluZWQoKT90aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50PXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkuY2hhckNvZGVBdCgwKTp0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50PXRoaXMuX3dvcmtDZWxsLmNvbnRlbnQpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PGEmJnItdD4wJiYwPT09Zi5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJiFmLmhhc0NvbnRlbnQodGhpcy5fYWN0aXZlQnVmZmVyLngpJiZmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LDAsMSxoLmZnLGguYmcsaC5leHRlbmRlZCksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuInQiIT09ZS5maW5hbHx8ZS5wcmVmaXh8fGUuaW50ZXJtZWRpYXRlcz90aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCk6dGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLChmdW5jdGlvbihlKXtyZXR1cm4hdyhlLnBhcmFtc1swXSxyLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpfHx0KGUpfSkpfSx0LnByb3RvdHlwZS5yZWdpc3RlckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcihlLG5ldyBtLkRjc0hhbmRsZXIodCkpfSx0LnByb3RvdHlwZS5yZWdpc3RlckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfSx0LnByb3RvdHlwZS5yZWdpc3Rlck9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcihlLG5ldyBnLk9zY0hhbmRsZXIodCkpfSx0LnByb3RvdHlwZS5iZWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdEJlbGwuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5saW5lRmVlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmNvbnZlcnRFb2wmJih0aGlzLl9hY3RpdmVCdWZmZXIueD0wKSx0aGlzLl9hY3RpdmVCdWZmZXIueSsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSsxPyh0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpOnRoaXMuX2FjdGl2ZUJ1ZmZlci55Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MmJih0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksdGhpcy5fYWN0aXZlQnVmZmVyLng+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmdGhpcy5fYWN0aXZlQnVmZmVyLngtLSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9vbkxpbmVGZWVkLmZpcmUoKSwhMH0sdC5wcm90b3R5cGUuY2FycmlhZ2VSZXR1cm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuYmFja3NwYWNlPWZ1bmN0aW9uKCl7dmFyIGU7aWYoIXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZClyZXR1cm4gdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9hY3RpdmVCdWZmZXIueD4wJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tLCEwO2lmKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fYWN0aXZlQnVmZmVyLng+MCl0aGlzLl9hY3RpdmVCdWZmZXIueC0tO2Vsc2UgaWYoMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54JiZ0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wJiZ0aGlzLl9hY3RpdmVCdWZmZXIueTw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSYmKG51bGw9PT0oZT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmlzV3JhcHBlZCkpe3RoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KS5pc1dyYXBwZWQ9ITEsdGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMTt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7dC5oYXNXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJiF0Lmhhc0NvbnRlbnQodGhpcy5fYWN0aXZlQnVmZmVyLngpJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tfXJldHVybiB0aGlzLl9yZXN0cmljdEN1cnNvcigpLCEwfSx0LnByb3RvdHlwZS50YWI9ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO3ZhciBlPXRoaXMuX2FjdGl2ZUJ1ZmZlci54O3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUmJnRoaXMuX29uQTExeVRhYi5maXJlKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LWUpLCEwfSx0LnByb3RvdHlwZS5zaGlmdE91dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoMSksITB9LHQucHJvdG90eXBlLnNoaWZ0SW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDApLCEwfSx0LnByb3RvdHlwZS5fcmVzdHJpY3RDdXJzb3I9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PU1hdGgubWluKGUsTWF0aC5tYXgoMCx0aGlzLl9hY3RpdmVCdWZmZXIueCkpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW4/TWF0aC5taW4odGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSxNYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSk6TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEsTWF0aC5tYXgoMCx0aGlzLl9hY3RpdmVCdWZmZXIueSkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpfSx0LnByb3RvdHlwZS5fc2V0Q3Vyc29yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj8odGhpcy5fYWN0aXZlQnVmZmVyLng9ZSx0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wK3QpOih0aGlzLl9hY3RpdmVCdWZmZXIueD1lLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXQpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSl9LHQucHJvdG90eXBlLl9tb3ZlQ3Vyc29yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLngrZSx0aGlzLl9hY3RpdmVCdWZmZXIueSt0KX0sdC5wcm90b3R5cGUuY3Vyc29yVXA9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnktdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyZXR1cm4gdD49MD90aGlzLl9tb3ZlQ3Vyc29yKDAsLU1hdGgubWluKHQsZS5wYXJhbXNbMF18fDEpKTp0aGlzLl9tb3ZlQ3Vyc29yKDAsLShlLnBhcmFtc1swXXx8MSkpLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JEb3duPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20tdGhpcy5fYWN0aXZlQnVmZmVyLnk7cmV0dXJuIHQ+PTA/dGhpcy5fbW92ZUN1cnNvcigwLE1hdGgubWluKHQsZS5wYXJhbXNbMF18fDEpKTp0aGlzLl9tb3ZlQ3Vyc29yKDAsZS5wYXJhbXNbMF18fDEpLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JGb3J3YXJkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb3ZlQ3Vyc29yKGUucGFyYW1zWzBdfHwxLDApLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JCYWNrd2FyZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcigtKGUucGFyYW1zWzBdfHwxKSwwKSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yTmV4dExpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3Vyc29yRG93bihlKSx0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JQcmVjZWRpbmdMaW5lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnNvclVwKGUpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9LHQucHJvdG90eXBlLmN1cnNvckNoYXJBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKChlLnBhcmFtc1swXXx8MSktMSx0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9LHQucHJvdG90eXBlLmN1cnNvclBvc2l0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IoZS5sZW5ndGg+PTI/KGUucGFyYW1zWzFdfHwxKS0xOjAsKGUucGFyYW1zWzBdfHwxKS0xKSwhMH0sdC5wcm90b3R5cGUuY2hhclBvc0Fic29sdXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IoKGUucGFyYW1zWzBdfHwxKS0xLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSwhMH0sdC5wcm90b3R5cGUuaFBvc2l0aW9uUmVsYXRpdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vdmVDdXJzb3IoZS5wYXJhbXNbMF18fDEsMCksITB9LHQucHJvdG90eXBlLmxpbmVQb3NBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LChlLnBhcmFtc1swXXx8MSktMSksITB9LHQucHJvdG90eXBlLnZQb3NpdGlvblJlbGF0aXZlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb3ZlQ3Vyc29yKDAsZS5wYXJhbXNbMF18fDEpLCEwfSx0LnByb3RvdHlwZS5oVlBvc2l0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnNvclBvc2l0aW9uKGUpLCEwfSx0LnByb3RvdHlwZS50YWJDbGVhcj1mdW5jdGlvbihlKXt2YXIgdD1lLnBhcmFtc1swXTtyZXR1cm4gMD09PXQ/ZGVsZXRlIHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzW3RoaXMuX2FjdGl2ZUJ1ZmZlci54XTozPT09dCYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzPXt9KSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yRm9yd2FyZFRhYj1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2FjdGl2ZUJ1ZmZlci5uZXh0U3RvcCgpO3JldHVybiEwfSx0LnByb3RvdHlwZS5jdXJzb3JCYWNrd2FyZFRhYj1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2FjdGl2ZUJ1ZmZlci5wcmV2U3RvcCgpO3JldHVybiEwfSx0LnByb3RvdHlwZS5fZXJhc2VJbkJ1ZmZlckxpbmU9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09aSYmKGk9ITEpO3ZhciBuPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpO24ucmVwbGFjZUNlbGxzKHQscix0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLGkmJihuLmlzV3JhcHBlZD0hMSl9LHQucHJvdG90eXBlLl9yZXNldEJ1ZmZlckxpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrZSk7dC5maWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKSx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5jbGVhck1hcmtlcnModGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpLHQuaXNXcmFwcGVkPSExfSx0LnByb3RvdHlwZS5lcmFzZUluRGlzcGxheT1mdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2godGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSxlLnBhcmFtc1swXSl7Y2FzZSAwOmZvcih0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodCksdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodCsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywwPT09dGhpcy5fYWN0aXZlQnVmZmVyLngpO3Q8dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO3QrKyl0aGlzLl9yZXNldEJ1ZmZlckxpbmUodCk7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0KTticmVhaztjYXNlIDE6Zm9yKHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0KSx0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0LDAsdGhpcy5fYWN0aXZlQnVmZmVyLngrMSwhMCksdGhpcy5fYWN0aXZlQnVmZmVyLngrMT49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiYodGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0KzEpLmlzV3JhcHBlZD0hMSk7dC0tOyl0aGlzLl9yZXNldEJ1ZmZlckxpbmUodCk7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSgwKTticmVhaztjYXNlIDI6Zm9yKHQ9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodC0xKTt0LS07KXRoaXMuX3Jlc2V0QnVmZmVyTGluZSh0KTt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KDApO2JyZWFrO2Nhc2UgMzp2YXIgcj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMubGVuZ3RoLXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztyPjAmJih0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMudHJpbVN0YXJ0KHIpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZT1NYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UtciwwKSx0aGlzLl9hY3RpdmVCdWZmZXIueWRpc3A9TWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnlkaXNwLXIsMCksdGhpcy5fb25TY3JvbGwuZmlyZSgwKSl9cmV0dXJuITB9LHQucHJvdG90eXBlLmVyYXNlSW5MaW5lPWZ1bmN0aW9uKGUpe3N3aXRjaCh0aGlzLl9yZXN0cmljdEN1cnNvcih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLGUucGFyYW1zWzBdKXtjYXNlIDA6dGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLDA9PT10aGlzLl9hY3RpdmVCdWZmZXIueCk7YnJlYWs7Y2FzZSAxOnRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LDAsdGhpcy5fYWN0aXZlQnVmZmVyLngrMSwhMSk7YnJlYWs7Y2FzZSAyOnRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LDAsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCEwKX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9LHQucHJvdG90eXBlLmluc2VydExpbmVzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9ZS5wYXJhbXNbMF18fDE7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtmb3IodmFyIHI9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LGk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEtdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSxuPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xK3RoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZS1pKzE7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKG4tMSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHIsMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuZGVsZXRlTGluZXM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD1lLnBhcmFtc1swXXx8MTtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO3ZhciByLGk9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55O2ZvcihyPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xLXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20scj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSt0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Utcjt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UoaSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHIsMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuaW5zZXJ0Q2hhcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7cmV0dXJuIHQmJih0Lmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LGUucGFyYW1zWzBdfHwxLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSkpLCEwfSx0LnByb3RvdHlwZS5kZWxldGVDaGFycz1mdW5jdGlvbihlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTtyZXR1cm4gdCYmKHQuZGVsZXRlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsZS5wYXJhbXNbMF18fDEsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksITB9LHQucHJvdG90eXBlLnNjcm9sbFVwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5zY3JvbGxEb3duPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUoZi5ERUZBVUxUX0FUVFJfREFUQSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuc2Nyb2xsTGVmdD1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cjw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsrK3Ipe3ZhciBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3IpO2kuZGVsZXRlQ2VsbHMoMCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5zY3JvbGxSaWdodD1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cjw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsrK3Ipe3ZhciBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3IpO2kuaW5zZXJ0Q2VsbHMoMCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5pbnNlcnRDb2x1bW5zPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrcil7dmFyIGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Urcik7aS5pbnNlcnRDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5kZWxldGVDb2x1bW5zPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrcil7dmFyIGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Urcik7aS5kZWxldGVDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5lcmFzZUNoYXJzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3JldHVybiB0JiYodC5yZXBsYWNlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYWN0aXZlQnVmZmVyLngrKGUucGFyYW1zWzBdfHwxKSx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpKSwhMH0sdC5wcm90b3R5cGUucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50KXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPW5ldyBVaW50MzJBcnJheSh0KSxpPTA7aTx0OysraSlyW2ldPXRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQ7cmV0dXJuIHRoaXMucHJpbnQociwwLHIubGVuZ3RoKSwhMH0sdC5wcm90b3R5cGUuc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5PWZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmFtc1swXT4wfHwodGhpcy5faXMoInh0ZXJtIil8fHRoaXMuX2lzKCJyeHZ0LXVuaWNvZGUiKXx8dGhpcy5faXMoInNjcmVlbiIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls/MTsyYyIpOnRoaXMuX2lzKCJsaW51eCIpJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPzZjIikpLCEwfSx0LnByb3RvdHlwZS5zZW5kRGV2aWNlQXR0cmlidXRlc1NlY29uZGFyeT1mdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJhbXNbMF0+MHx8KHRoaXMuX2lzKCJ4dGVybSIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls+MDsyNzY7MGMiKTp0aGlzLl9pcygicnh2dC11bmljb2RlIik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz44NTs5NTswYyIpOnRoaXMuX2lzKCJsaW51eCIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoZS5wYXJhbXNbMF0rImMiKTp0aGlzLl9pcygic2NyZWVuIikmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls+ODM7NDAwMDM7MGMiKSksITB9LHQucHJvdG90eXBlLl9pcz1mdW5jdGlvbihlKXtyZXR1cm4gMD09PSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRlcm1OYW1lKyIiKS5pbmRleE9mKGUpfSx0LnByb3RvdHlwZS5zZXRNb2RlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKTQ9PT1lLnBhcmFtc1t0XSYmKHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGU9ITApO3JldHVybiEwfSx0LnByb3RvdHlwZS5zZXRNb2RlUHJpdmF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylzd2l0Y2goZS5wYXJhbXNbdF0pe2Nhc2UgMTp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzPSEwO2JyZWFrO2Nhc2UgMjp0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLGEuREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgxLGEuREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgyLGEuREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgzLGEuREVGQVVMVF9DSEFSU0VUKTticmVhaztjYXNlIDM6dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzJiYodGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoMTMyLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpKTticmVhaztjYXNlIDY6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMCx0aGlzLl9zZXRDdXJzb3IoMCwwKTticmVhaztjYXNlIDc6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ9ITA7YnJlYWs7Y2FzZSAxMjpicmVhaztjYXNlIDQ1OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZD0hMDticmVhaztjYXNlIDY2OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlNlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSEwLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgOTp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPSJYMTAiO2JyZWFrO2Nhc2UgMWUzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9IlZUMjAwIjticmVhaztjYXNlIDEwMDI6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD0iRFJBRyI7YnJlYWs7Y2FzZSAxMDAzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9IkFOWSI7YnJlYWs7Y2FzZSAxMDA0OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXM9ITAsdGhpcy5fb25SZXF1ZXN0U2VuZEZvY3VzLmZpcmUoKTticmVhaztjYXNlIDEwMDU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiREVDU0VUIDEwMDUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KSIpO2JyZWFrO2Nhc2UgMTAwNjp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nPSJTR1IiO2JyZWFrO2Nhc2UgMTAxNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNTRVQgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAyNTp0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMTticmVhaztjYXNlIDEwNDg6dGhpcy5zYXZlQ3Vyc29yKCk7YnJlYWs7Y2FzZSAxMDQ5OnRoaXMuc2F2ZUN1cnNvcigpO2Nhc2UgNDc6Y2FzZSAxMDQ3OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZUFsdEJ1ZmZlcih0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITAsdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDIwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZT0hMH1yZXR1cm4hMH0sdC5wcm90b3R5cGUucmVzZXRNb2RlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKTQ9PT1lLnBhcmFtc1t0XSYmKHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGU9ITEpO3JldHVybiEwfSx0LnByb3RvdHlwZS5yZXNldE1vZGVQcml2YXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXN3aXRjaChlLnBhcmFtc1t0XSl7Y2FzZSAxOnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXM9ITE7YnJlYWs7Y2FzZSAzOnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucy5zZXRXaW5MaW5lcyYmKHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpKTticmVhaztjYXNlIDY6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMSx0aGlzLl9zZXRDdXJzb3IoMCwwKTticmVhaztjYXNlIDc6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ9ITE7YnJlYWs7Y2FzZSAxMjpicmVhaztjYXNlIDQ1OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZD0hMTticmVhaztjYXNlIDY2OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlN3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSExLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgOTpjYXNlIDFlMzpjYXNlIDEwMDI6Y2FzZSAxMDAzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9Ik5PTkUiO2JyZWFrO2Nhc2UgMTAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzPSExO2JyZWFrO2Nhc2UgMTAwNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNSU1QgMTAwNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAxMDA2OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2Rpbmc9IkRFRkFVTFQiO2JyZWFrO2Nhc2UgMTAxNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNSU1QgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAyNTp0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMDticmVhaztjYXNlIDEwNDg6dGhpcy5yZXN0b3JlQ3Vyc29yKCk7YnJlYWs7Y2FzZSAxMDQ5OmNhc2UgNDc6Y2FzZSAxMDQ3OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZU5vcm1hbEJ1ZmZlcigpLDEwNDk9PT1lLnBhcmFtc1t0XSYmdGhpcy5yZXN0b3JlQ3Vyc29yKCksdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZD0hMCx0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKDAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgMjAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlPSExfXJldHVybiEwfSx0LnByb3RvdHlwZS5fdXBkYXRlQXR0ckNvbG9yPWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJuIDI9PT10PyhlfD01MDMzMTY0OCxlJj0tMTY3NzcyMTYsZXw9di5BdHRyaWJ1dGVEYXRhLmZyb21Db2xvclJHQihbcixpLG5dKSk6NT09PXQmJihlJj0tNTAzMzE5MDQsZXw9MzM1NTQ0MzJ8MjU1JnIpLGV9LHQucHJvdG90eXBlLl9leHRyYWN0Q29sb3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPVswLDAsLTEsMCwwLDBdLG49MCxvPTA7ZG97aWYoaVtvK25dPWUucGFyYW1zW3Qrb10sZS5oYXNTdWJQYXJhbXModCtvKSl7dmFyIHM9ZS5nZXRTdWJQYXJhbXModCtvKSxhPTA7ZG97NT09PWlbMV0mJihuPTEpLGlbbythKzErbl09c1thXX13aGlsZSgrK2E8cy5sZW5ndGgmJmErbysxK248aS5sZW5ndGgpO2JyZWFrfWlmKDU9PT1pWzFdJiZvK24+PTJ8fDI9PT1pWzFdJiZvK24+PTUpYnJlYWs7aVsxXSYmKG49MSl9d2hpbGUoKytvK3Q8ZS5sZW5ndGgmJm8rbjxpLmxlbmd0aCk7Zm9yKGE9MjthPGkubGVuZ3RoOysrYSktMT09PWlbYV0mJihpW2FdPTApO3N3aXRjaChpWzBdKXtjYXNlIDM4OnIuZmc9dGhpcy5fdXBkYXRlQXR0ckNvbG9yKHIuZmcsaVsxXSxpWzNdLGlbNF0saVs1XSk7YnJlYWs7Y2FzZSA0ODpyLmJnPXRoaXMuX3VwZGF0ZUF0dHJDb2xvcihyLmJnLGlbMV0saVszXSxpWzRdLGlbNV0pO2JyZWFrO2Nhc2UgNTg6ci5leHRlbmRlZD1yLmV4dGVuZGVkLmNsb25lKCksci5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj10aGlzLl91cGRhdGVBdHRyQ29sb3Ioci5leHRlbmRlZC51bmRlcmxpbmVDb2xvcixpWzFdLGlbM10saVs0XSxpWzVdKX1yZXR1cm4gb30sdC5wcm90b3R5cGUuX3Byb2Nlc3NVbmRlcmxpbmU9ZnVuY3Rpb24oZSx0KXt0LmV4dGVuZGVkPXQuZXh0ZW5kZWQuY2xvbmUoKSwoIX5lfHxlPjUpJiYoZT0xKSx0LmV4dGVuZGVkLnVuZGVybGluZVN0eWxlPWUsdC5mZ3w9MjY4NDM1NDU2LDA9PT1lJiYodC5mZyY9LTI2ODQzNTQ1NyksdC51cGRhdGVFeHRlbmRlZCgpfSx0LnByb3RvdHlwZS5jaGFyQXR0cmlidXRlcz1mdW5jdGlvbihlKXtpZigxPT09ZS5sZW5ndGgmJjA9PT1lLnBhcmFtc1swXSlyZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGEuZmc9Zi5ERUZBVUxUX0FUVFJfREFUQS5mZyx0aGlzLl9jdXJBdHRyRGF0YS5iZz1mLkRFRkFVTFRfQVRUUl9EQVRBLmJnLCEwO2Zvcih2YXIgdCxyPWUubGVuZ3RoLGk9dGhpcy5fY3VyQXR0ckRhdGEsbj0wO248cjtuKyspKHQ9ZS5wYXJhbXNbbl0pPj0zMCYmdDw9Mzc/KGkuZmcmPS01MDMzMTkwNCxpLmZnfD0xNjc3NzIxNnx0LTMwKTp0Pj00MCYmdDw9NDc/KGkuYmcmPS01MDMzMTkwNCxpLmJnfD0xNjc3NzIxNnx0LTQwKTp0Pj05MCYmdDw9OTc/KGkuZmcmPS01MDMzMTkwNCxpLmZnfD0xNjc3NzIyNHx0LTkwKTp0Pj0xMDAmJnQ8PTEwNz8oaS5iZyY9LTUwMzMxOTA0LGkuYmd8PTE2Nzc3MjI0fHQtMTAwKTowPT09dD8oaS5mZz1mLkRFRkFVTFRfQVRUUl9EQVRBLmZnLGkuYmc9Zi5ERUZBVUxUX0FUVFJfREFUQS5iZyk6MT09PXQ/aS5mZ3w9MTM0MjE3NzI4OjM9PT10P2kuYmd8PTY3MTA4ODY0OjQ9PT10PyhpLmZnfD0yNjg0MzU0NTYsdGhpcy5fcHJvY2Vzc1VuZGVybGluZShlLmhhc1N1YlBhcmFtcyhuKT9lLmdldFN1YlBhcmFtcyhuKVswXToxLGkpKTo1PT09dD9pLmZnfD01MzY4NzA5MTI6Nz09PXQ/aS5mZ3w9NjcxMDg4NjQ6OD09PXQ/aS5mZ3w9MTA3Mzc0MTgyNDo5PT09dD9pLmZnfD0yMTQ3NDgzNjQ4OjI9PT10P2kuYmd8PTEzNDIxNzcyODoyMT09PXQ/dGhpcy5fcHJvY2Vzc1VuZGVybGluZSgyLGkpOjIyPT09dD8oaS5mZyY9LTEzNDIxNzcyOSxpLmJnJj0tMTM0MjE3NzI5KToyMz09PXQ/aS5iZyY9LTY3MTA4ODY1OjI0PT09dD9pLmZnJj0tMjY4NDM1NDU3OjI1PT09dD9pLmZnJj0tNTM2ODcwOTEzOjI3PT09dD9pLmZnJj0tNjcxMDg4NjU6Mjg9PT10P2kuZmcmPS0xMDczNzQxODI1OjI5PT09dD9pLmZnJj0yMTQ3NDgzNjQ3OjM5PT09dD8oaS5mZyY9LTY3MTA4ODY0LGkuZmd8PTE2Nzc3MjE1JmYuREVGQVVMVF9BVFRSX0RBVEEuZmcpOjQ5PT09dD8oaS5iZyY9LTY3MTA4ODY0LGkuYmd8PTE2Nzc3MjE1JmYuREVGQVVMVF9BVFRSX0RBVEEuYmcpOjM4PT09dHx8NDg9PT10fHw1OD09PXQ/bis9dGhpcy5fZXh0cmFjdENvbG9yKGUsbixpKTo1OT09PXQ/KGkuZXh0ZW5kZWQ9aS5leHRlbmRlZC5jbG9uZSgpLGkuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I9LTEsaS51cGRhdGVFeHRlbmRlZCgpKToxMDA9PT10PyhpLmZnJj0tNjcxMDg4NjQsaS5mZ3w9MTY3NzcyMTUmZi5ERUZBVUxUX0FUVFJfREFUQS5mZyxpLmJnJj0tNjcxMDg4NjQsaS5iZ3w9MTY3NzcyMTUmZi5ERUZBVUxUX0FUVFJfREFUQS5iZyk6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBTR1IgYXR0cmlidXRlOiAlZC4iLHQpO3JldHVybiEwfSx0LnByb3RvdHlwZS5kZXZpY2VTdGF0dXM9ZnVuY3Rpb24oZSl7c3dpdGNoKGUucGFyYW1zWzBdKXtjYXNlIDU6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWzBuIik7YnJlYWs7Y2FzZSA2OnZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55KzEscj10aGlzLl9hY3RpdmVCdWZmZXIueCsxO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlsiK3QrIjsiK3IrIlIiKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuZGV2aWNlU3RhdHVzUHJpdmF0ZT1mdW5jdGlvbihlKXtpZig2PT09ZS5wYXJhbXNbMF0pe3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55KzEscj10aGlzLl9hY3RpdmVCdWZmZXIueCsxO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls/Iit0KyI7IityKyJSIil9cmV0dXJuITB9LHQucHJvdG90eXBlLnNvZnRSZXNldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW49ITEsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcD0wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b209dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEsdGhpcy5fY3VyQXR0ckRhdGE9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuX2NvcmVTZXJ2aWNlLnJlc2V0KCksdGhpcy5fY2hhcnNldFNlcnZpY2UucmVzZXQoKSx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYPTAsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc9dGhpcy5fY3VyQXR0ckRhdGEuZmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmc9dGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldD10aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0LHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW49ITEsITB9LHQucHJvdG90eXBlLnNldEN1cnNvclN0eWxlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyYW1zWzBdfHwxO3N3aXRjaCh0KXtjYXNlIDE6Y2FzZSAyOnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU9ImJsb2NrIjticmVhaztjYXNlIDM6Y2FzZSA0OnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU9InVuZGVybGluZSI7YnJlYWs7Y2FzZSA1OmNhc2UgNjp0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlPSJiYXIifXZhciByPXQlMj09MTtyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JCbGluaz1yLCEwfSx0LnByb3RvdHlwZS5zZXRTY3JvbGxSZWdpb249ZnVuY3Rpb24oZSl7dmFyIHQscj1lLnBhcmFtc1swXXx8MTtyZXR1cm4oZS5sZW5ndGg8Mnx8KHQ9ZS5wYXJhbXNbMV0pPnRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c3x8MD09PXQpJiYodD10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHQ+ciYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A9ci0xLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b209dC0xLHRoaXMuX3NldEN1cnNvcigwLDApKSwhMH0sdC5wcm90b3R5cGUud2luZG93T3B0aW9ucz1mdW5jdGlvbihlKXtpZighdyhlLnBhcmFtc1swXSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpKXJldHVybiEwO3ZhciB0PWUubGVuZ3RoPjE/ZS5wYXJhbXNbMV06MDtzd2l0Y2goZS5wYXJhbXNbMF0pe2Nhc2UgMTQ6MiE9PXQmJnRoaXMuX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0LmZpcmUoby5HRVRfV0lOX1NJWkVfUElYRUxTKTticmVhaztjYXNlIDE2OnRoaXMuX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0LmZpcmUoby5HRVRfQ0VMTF9TSVpFX1BJWEVMUyk7YnJlYWs7Y2FzZSAxODp0aGlzLl9idWZmZXJTZXJ2aWNlJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbODsiK3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93cysiOyIrdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKyJ0Iik7YnJlYWs7Y2FzZSAyMjowIT09dCYmMiE9PXR8fCh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnB1c2godGhpcy5fd2luZG93VGl0bGUpLHRoaXMuX3dpbmRvd1RpdGxlU3RhY2subGVuZ3RoPjEwJiZ0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnNoaWZ0KCkpLDAhPT10JiYxIT09dHx8KHRoaXMuX2ljb25OYW1lU3RhY2sucHVzaCh0aGlzLl9pY29uTmFtZSksdGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGg+MTAmJnRoaXMuX2ljb25OYW1lU3RhY2suc2hpZnQoKSk7YnJlYWs7Y2FzZSAyMzowIT09dCYmMiE9PXR8fHRoaXMuX3dpbmRvd1RpdGxlU3RhY2subGVuZ3RoJiZ0aGlzLnNldFRpdGxlKHRoaXMuX3dpbmRvd1RpdGxlU3RhY2sucG9wKCkpLDAhPT10JiYxIT09dHx8dGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGgmJnRoaXMuc2V0SWNvbk5hbWUodGhpcy5faWNvbk5hbWVTdGFjay5wb3AoKSl9cmV0dXJuITB9LHQucHJvdG90eXBlLnNhdmVDdXJzb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFg9dGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc9dGhpcy5fY3VyQXR0ckRhdGEuZmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmc9dGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldD10aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0LCEwfSx0LnByb3RvdHlwZS5yZXN0b3JlQ3Vyc29yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYfHwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PU1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFktdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLDApLHRoaXMuX2N1ckF0dHJEYXRhLmZnPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnLHRoaXMuX2N1ckF0dHJEYXRhLmJnPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ9dGhpcy5fc2F2ZWRDaGFyc2V0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQmJih0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9LHQucHJvdG90eXBlLnNldFRpdGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl93aW5kb3dUaXRsZT1lLHRoaXMuX29uVGl0bGVDaGFuZ2UuZmlyZShlKSwhMH0sdC5wcm90b3R5cGUuc2V0SWNvbk5hbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ljb25OYW1lPWUsITB9LHQucHJvdG90eXBlLnNldE9yUmVwb3J0SW5kZXhlZENvbG9yPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPWUuc3BsaXQoIjsiKTtyLmxlbmd0aD4xOyl7dmFyIGk9ci5zaGlmdCgpLG49ci5zaGlmdCgpO2lmKC9eXGQrJC8uZXhlYyhpKSl7dmFyIG89cGFyc2VJbnQoaSk7aWYoMDw9byYmbzwyNTYpaWYoIj8iPT09bil0LnB1c2goe3R5cGU6MCxpbmRleDpvfSk7ZWxzZXt2YXIgcz0oMCxiLnBhcnNlQ29sb3IpKG4pO3MmJnQucHVzaCh7dHlwZToxLGluZGV4Om8sY29sb3I6c30pfX19cmV0dXJuIHQubGVuZ3RoJiZ0aGlzLl9vbkNvbG9yLmZpcmUodCksITB9LHQucHJvdG90eXBlLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lLnNwbGl0KCI7IiksaT0wO2k8ci5sZW5ndGgmJiEodD49dGhpcy5fc3BlY2lhbENvbG9ycy5sZW5ndGgpOysraSwrK3QpaWYoIj8iPT09cltpXSl0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjAsaW5kZXg6dGhpcy5fc3BlY2lhbENvbG9yc1t0XX1dKTtlbHNle3ZhciBuPSgwLGIucGFyc2VDb2xvcikocltpXSk7biYmdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToxLGluZGV4OnRoaXMuX3NwZWNpYWxDb2xvcnNbdF0sY29sb3I6bn1dKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuc2V0T3JSZXBvcnRGZ0NvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihlLDApfSx0LnByb3RvdHlwZS5zZXRPclJlcG9ydEJnQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsMSl9LHQucHJvdG90eXBlLnNldE9yUmVwb3J0Q3Vyc29yQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsMil9LHQucHJvdG90eXBlLnJlc3RvcmVJbmRleGVkQ29sb3I9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6Mn1dKSwhMDtmb3IodmFyIHQ9W10scj1lLnNwbGl0KCI7IiksaT0wO2k8ci5sZW5ndGg7KytpKWlmKC9eXGQrJC8uZXhlYyhyW2ldKSl7dmFyIG49cGFyc2VJbnQocltpXSk7MDw9biYmbjwyNTYmJnQucHVzaCh7dHlwZToyLGluZGV4Om59KX1yZXR1cm4gdC5sZW5ndGgmJnRoaXMuX29uQ29sb3IuZmlyZSh0KSwhMH0sdC5wcm90b3R5cGUucmVzdG9yZUZnQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MixpbmRleDoyNTZ9XSksITB9LHQucHJvdG90eXBlLnJlc3RvcmVCZ0NvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjIsaW5kZXg6MjU3fV0pLCEwfSx0LnByb3RvdHlwZS5yZXN0b3JlQ3Vyc29yQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MixpbmRleDoyNTh9XSksITB9LHQucHJvdG90eXBlLm5leHRMaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsdGhpcy5pbmRleCgpLCEwfSx0LnByb3RvdHlwZS5rZXlwYWRBcHBsaWNhdGlvbk1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiU2VyaWFsIHBvcnQgcmVxdWVzdGVkIGFwcGxpY2F0aW9uIGtleXBhZC4iKSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQ9ITAsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCksITB9LHQucHJvdG90eXBlLmtleXBhZE51bWVyaWNNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlN3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSExLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5zZWxlY3REZWZhdWx0Q2hhcnNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoMCksdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMCxhLkRFRkFVTFRfQ0hBUlNFVCksITB9LHQucHJvdG90eXBlLnNlbGVjdENoYXJzZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDIhPT1lLmxlbmd0aD8odGhpcy5zZWxlY3REZWZhdWx0Q2hhcnNldCgpLCEwKTooIi8iPT09ZVswXXx8dGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoU1tlWzBdXSxhLkNIQVJTRVRTW2VbMV1dfHxhLkRFRkFVTFRfQ0hBUlNFVCksITApfSx0LnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KyssdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKzE/KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk6dGhpcy5fYWN0aXZlQnVmZmVyLnk+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9yZXN0cmljdEN1cnNvcigpLCEwfSx0LnByb3RvdHlwZS50YWJTZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLnRhYnNbdGhpcy5fYWN0aXZlQnVmZmVyLnhdPSEwLCEwfSx0LnByb3RvdHlwZS5yZXZlcnNlSW5kZXg9ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCl7dmFyIGU9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbS10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3RoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSxlLDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSl9ZWxzZSB0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7cmV0dXJuITB9LHQucHJvdG90eXBlLmZ1bGxSZXNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJzZXIucmVzZXQoKSx0aGlzLl9vblJlcXVlc3RSZXNldC5maXJlKCksITB9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fY3VyQXR0ckRhdGE9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbD1mLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCl9LHQucHJvdG90eXBlLl9lcmFzZUF0dHJEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZyY9LTY3MTA4ODY0LHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZ3w9NjcxMDg4NjMmdGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsfSx0LnByb3RvdHlwZS5zZXRnTGV2ZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbChlKSwhMH0sdC5wcm90b3R5cGUuc2NyZWVuQWxpZ25tZW50UGF0dGVybj1mdW5jdGlvbigpe3ZhciBlPW5ldyBwLkNlbGxEYXRhO2UuY29udGVudD0xPDwyMnwiRSIuY2hhckNvZGVBdCgwKSxlLmZnPXRoaXMuX2N1ckF0dHJEYXRhLmZnLGUuYmc9dGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fc2V0Q3Vyc29yKDAsMCk7Zm9yKHZhciB0PTA7dDx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7Kyt0KXt2YXIgcj10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkrdCxpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQocik7aSYmKGkuZmlsbChlKSxpLmlzV3JhcHBlZD0hMSl9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrQWxsRGlydHkoKSx0aGlzLl9zZXRDdXJzb3IoMCwwKSwhMH0sdH0obC5EaXNwb3NhYmxlKTt0LklucHV0SGFuZGxlcj1FfSw4NDQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZ2V0RGlzcG9zZUFycmF5RGlzcG9zYWJsZT10LmRpc3Bvc2VBcnJheT10LkRpc3Bvc2FibGU9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2Rpc3Bvc2FibGVzPVtdLHRoaXMuX2lzRGlzcG9zZWQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuX2lzRGlzcG9zZWQ9ITA7dHJ5e2Zvcih2YXIgaT1yKHRoaXMuX2Rpc3Bvc2FibGVzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSluLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoPTB9LGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGUpLGV9LGUucHJvdG90eXBlLnVucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGlzcG9zYWJsZXMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuX2Rpc3Bvc2FibGVzLnNwbGljZSh0LDEpfSxlfSgpO2Z1bmN0aW9uIG4oZSl7dmFyIHQsaTt0cnl7Zm9yKHZhciBuPXIoZSksbz1uLm5leHQoKTshby5kb25lO289bi5uZXh0KCkpby52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWUubGVuZ3RoPTB9dC5EaXNwb3NhYmxlPWksdC5kaXNwb3NlQXJyYXk9bix0LmdldERpc3Bvc2VBcnJheURpc3Bvc2FibGU9ZnVuY3Rpb24oZSl7cmV0dXJue2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gbihlKX19fX0sNjExNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmlzTGludXg9dC5pc1dpbmRvd3M9dC5pc0lwaG9uZT10LmlzSXBhZD10LmlzTWFjPXQuaXNTYWZhcmk9dC5pc0xlZ2FjeUVkZ2U9dC5pc0ZpcmVmb3g9dm9pZCAwO3ZhciByPSJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yLGk9cj8ibm9kZSI6bmF2aWdhdG9yLnVzZXJBZ2VudCxuPXI/Im5vZGUiOm5hdmlnYXRvci5wbGF0Zm9ybTt0LmlzRmlyZWZveD1pLmluY2x1ZGVzKCJGaXJlZm94IiksdC5pc0xlZ2FjeUVkZ2U9aS5pbmNsdWRlcygiRWRnZSIpLHQuaXNTYWZhcmk9L14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChpKSx0LmlzTWFjPVsiTWFjaW50b3NoIiwiTWFjSW50ZWwiLCJNYWNQUEMiLCJNYWM2OEsiXS5pbmNsdWRlcyhuKSx0LmlzSXBhZD0iaVBhZCI9PT1uLHQuaXNJcGhvbmU9ImlQaG9uZSI9PT1uLHQuaXNXaW5kb3dzPVsiV2luZG93cyIsIldpbjE2IiwiV2luMzIiLCJXaW5DRSJdLmluY2x1ZGVzKG4pLHQuaXNMaW51eD1uLmluZGV4T2YoIkxpbnV4Iik+PTB9LDYxMDY6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYob1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxvO2Z1bmN0aW9uIGEobyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihvKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZihyPTEsaSYmKG49MiZvWzBdP2kucmV0dXJuOm9bMF0/aS50aHJvd3x8KChuPWkucmV0dXJuKSYmbi5jYWxsKGkpLDApOmkubmV4dCkmJiEobj1uLmNhbGwoaSxvWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2goaT0wLG4mJihvPVsyJm9bMF0sbi52YWx1ZV0pLG9bMF0pe2Nhc2UgMDpjYXNlIDE6bj1vO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTpvWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssaT1vWzFdLG89WzBdO2NvbnRpbnVlO2Nhc2UgNzpvPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoKG49KG49cy50cnlzKS5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSl8fDYhPT1vWzBdJiYyIT09b1swXSkpe3M9MDtjb250aW51ZX1pZigzPT09b1swXSYmKCFufHxvWzFdPm5bMF0mJm9bMV08blszXSkpe3MubGFiZWw9b1sxXTticmVha31pZig2PT09b1swXSYmcy5sYWJlbDxuWzFdKXtzLmxhYmVsPW5bMV0sbj1vO2JyZWFrfWlmKG4mJnMubGFiZWw8blsyXSl7cy5sYWJlbD1uWzJdLHMub3BzLnB1c2gobyk7YnJlYWt9blsyXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfW89dC5jYWxsKGUscyl9Y2F0Y2goZSl7bz1bNixlXSxpPTB9ZmluYWxseXtyPW49MH1pZig1Jm9bMF0pdGhyb3cgb1sxXTtyZXR1cm57dmFsdWU6b1swXT9vWzFdOnZvaWQgMCxkb25lOiEwfX0oW28sYV0pfX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNvcnRlZExpc3Q9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9nZXRLZXk9ZSx0aGlzLl9hcnJheT1bXX1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9hcnJheS5sZW5ndGg9MH0sZS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKGUpe2lmKDAhPT10aGlzLl9hcnJheS5sZW5ndGgpe3ZhciB0PXRoaXMuX3NlYXJjaCh0aGlzLl9nZXRLZXkoZSksMCx0aGlzLl9hcnJheS5sZW5ndGgtMSk7dGhpcy5fYXJyYXkuc3BsaWNlKHQsMCxlKX1lbHNlIHRoaXMuX2FycmF5LnB1c2goZSl9LGUucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXtpZigwPT09dGhpcy5fYXJyYXkubGVuZ3RoKXJldHVybiExO3ZhciB0PXRoaXMuX2dldEtleShlKSxyPXRoaXMuX3NlYXJjaCh0LDAsdGhpcy5fYXJyYXkubGVuZ3RoLTEpO2lmKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtyXSkhPT10KXJldHVybiExO2Rve2lmKHRoaXMuX2FycmF5W3JdPT09ZSlyZXR1cm4gdGhpcy5fYXJyYXkuc3BsaWNlKHIsMSksITB9d2hpbGUoKytyPHRoaXMuX2FycmF5Lmxlbmd0aCYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W3JdKT09PXQpO3JldHVybiExfSxlLnByb3RvdHlwZS5nZXRLZXlJdGVyYXRvcj1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOmlmKDA9PT10aGlzLl9hcnJheS5sZW5ndGgpcmV0dXJuWzJdO2lmKCh0PXRoaXMuX3NlYXJjaChlLDAsdGhpcy5fYXJyYXkubGVuZ3RoLTEpKTwwfHx0Pj10aGlzLl9hcnJheS5sZW5ndGgpcmV0dXJuWzJdO2lmKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVt0XSkhPT1lKXJldHVyblsyXTtyLmxhYmVsPTE7Y2FzZSAxOnJldHVybls0LHRoaXMuX2FycmF5W3RdXTtjYXNlIDI6ci5zZW50KCksci5sYWJlbD0zO2Nhc2UgMzppZigrK3Q8dGhpcy5fYXJyYXkubGVuZ3RoJiZ0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbdF0pPT09ZSlyZXR1cm5bMywxXTtyLmxhYmVsPTQ7Y2FzZSA0OnJldHVyblsyXX19KSl9LGUucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcnJheS52YWx1ZXMoKX0sZS5wcm90b3R5cGUuX3NlYXJjaD1mdW5jdGlvbihlLHQscil7aWYocjx0KXJldHVybiB0O3ZhciBpPU1hdGguZmxvb3IoKHQrcikvMik7aWYodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKT5lKXJldHVybiB0aGlzLl9zZWFyY2goZSx0LGktMSk7aWYodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKTxlKXJldHVybiB0aGlzLl9zZWFyY2goZSxpKzEscik7Zm9yKDtpPjAmJnRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpLTFdKT09PWU7KWktLTtyZXR1cm4gaX0sZX0oKTt0LlNvcnRlZExpc3Q9aX0sODI3MzooZSx0KT0+e2Z1bmN0aW9uIHIoZSx0LHIsaSl7aWYodm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09aSYmKGk9ZS5sZW5ndGgpLHI+PWUubGVuZ3RoKXJldHVybiBlO3I9KGUubGVuZ3RoK3IpJWUubGVuZ3RoLGk9aT49ZS5sZW5ndGg/ZS5sZW5ndGg6KGUubGVuZ3RoK2kpJWUubGVuZ3RoO2Zvcih2YXIgbj1yO248aTsrK24pZVtuXT10O3JldHVybiBlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmNvbmNhdD10LmZpbGxGYWxsYmFjaz10LmZpbGw9dm9pZCAwLHQuZmlsbD1mdW5jdGlvbihlLHQsaSxuKXtyZXR1cm4gZS5maWxsP2UuZmlsbCh0LGksbik6cihlLHQsaSxuKX0sdC5maWxsRmFsbGJhY2s9cix0LmNvbmNhdD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBlLmNvbnN0cnVjdG9yKGUubGVuZ3RoK3QubGVuZ3RoKTtyZXR1cm4gci5zZXQoZSksci5zZXQodCxlLmxlbmd0aCkscn19LDkyODI6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlPXZvaWQgMDt2YXIgaT1yKDY0Myk7dC51cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLmJ1ZmZlci5saW5lcy5nZXQoZS5idWZmZXIueWJhc2UrZS5idWZmZXIueS0xKSxyPW51bGw9PXQ/dm9pZCAwOnQuZ2V0KGUuY29scy0xKSxuPWUuYnVmZmVyLmxpbmVzLmdldChlLmJ1ZmZlci55YmFzZStlLmJ1ZmZlci55KTtuJiZyJiYobi5pc1dyYXBwZWQ9cltpLkNIQVJfREFUQV9DT0RFX0lOREVYXSE9PWkuTlVMTF9DRUxMX0NPREUmJnJbaS5DSEFSX0RBVEFfQ09ERV9JTkRFWF0hPT1pLldISVRFU1BBQ0VfQ0VMTF9DT0RFKX19LDM3MzQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5FeHRlbmRlZEF0dHJzPXQuQXR0cmlidXRlRGF0YT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5mZz0wLHRoaXMuYmc9MCx0aGlzLmV4dGVuZGVkPW5ldyBpfXJldHVybiBlLnRvQ29sb3JSR0I9ZnVuY3Rpb24oZSl7cmV0dXJuW2U+Pj4xNiYyNTUsZT4+PjgmMjU1LDI1NSZlXX0sZS5mcm9tQ29sb3JSR0I9ZnVuY3Rpb24oZSl7cmV0dXJuKDI1NSZlWzBdKTw8MTZ8KDI1NSZlWzFdKTw8OHwyNTUmZVsyXX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdC5mZz10aGlzLmZnLHQuYmc9dGhpcy5iZyx0LmV4dGVuZGVkPXRoaXMuZXh0ZW5kZWQuY2xvbmUoKSx0fSxlLnByb3RvdHlwZS5pc0ludmVyc2U9ZnVuY3Rpb24oKXtyZXR1cm4gNjcxMDg4NjQmdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNCb2xkPWZ1bmN0aW9uKCl7cmV0dXJuIDEzNDIxNzcyOCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNCbGluaz1mdW5jdGlvbigpe3JldHVybiA1MzY4NzA5MTImdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNJbnZpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4gMTA3Mzc0MTgyNCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc0l0YWxpYz1mdW5jdGlvbigpe3JldHVybiA2NzEwODg2NCZ0aGlzLmJnfSxlLnByb3RvdHlwZS5pc0RpbT1mdW5jdGlvbigpe3JldHVybiAxMzQyMTc3MjgmdGhpcy5iZ30sZS5wcm90b3R5cGUuaXNTdHJpa2V0aHJvdWdoPWZ1bmN0aW9uKCl7cmV0dXJuIDIxNDc0ODM2NDgmdGhpcy5mZ30sZS5wcm90b3R5cGUuZ2V0RmdDb2xvck1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gNTAzMzE2NDgmdGhpcy5mZ30sZS5wcm90b3R5cGUuZ2V0QmdDb2xvck1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gNTAzMzE2NDgmdGhpcy5iZ30sZS5wcm90b3R5cGUuaXNGZ1JHQj1mdW5jdGlvbigpe3JldHVybiA1MDMzMTY0OD09KDUwMzMxNjQ4JnRoaXMuZmcpfSxlLnByb3RvdHlwZS5pc0JnUkdCPWZ1bmN0aW9uKCl7cmV0dXJuIDUwMzMxNjQ4PT0oNTAzMzE2NDgmdGhpcy5iZyl9LGUucHJvdG90eXBlLmlzRmdQYWxldHRlPWZ1bmN0aW9uKCl7cmV0dXJuIDE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5mZyl8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5mZyl9LGUucHJvdG90eXBlLmlzQmdQYWxldHRlPWZ1bmN0aW9uKCl7cmV0dXJuIDE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5iZyl8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5iZyl9LGUucHJvdG90eXBlLmlzRmdEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSg1MDMzMTY0OCZ0aGlzLmZnKX0sZS5wcm90b3R5cGUuaXNCZ0RlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMD09KDUwMzMxNjQ4JnRoaXMuYmcpfSxlLnByb3RvdHlwZS5pc0F0dHJpYnV0ZURlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuZmcmJjA9PT10aGlzLmJnfSxlLnByb3RvdHlwZS5nZXRGZ0NvbG9yPWZ1bmN0aW9uKCl7c3dpdGNoKDUwMzMxNjQ4JnRoaXMuZmcpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gMjU1JnRoaXMuZmc7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gMTY3NzcyMTUmdGhpcy5mZztkZWZhdWx0OnJldHVybi0xfX0sZS5wcm90b3R5cGUuZ2V0QmdDb2xvcj1mdW5jdGlvbigpe3N3aXRjaCg1MDMzMTY0OCZ0aGlzLmJnKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIDI1NSZ0aGlzLmJnO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIDE2Nzc3MjE1JnRoaXMuYmc7ZGVmYXVsdDpyZXR1cm4tMX19LGUucHJvdG90eXBlLmhhc0V4dGVuZGVkQXR0cnM9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmd9LGUucHJvdG90eXBlLnVwZGF0ZUV4dGVuZGVkPWZ1bmN0aW9uKCl7dGhpcy5leHRlbmRlZC5pc0VtcHR5KCk/dGhpcy5iZyY9LTI2ODQzNTQ1Nzp0aGlzLmJnfD0yNjg0MzU0NTZ9LGUucHJvdG90eXBlLmdldFVuZGVybGluZUNvbG9yPWZ1bmN0aW9uKCl7aWYoMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKXN3aXRjaCg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIDI1NSZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIDE2Nzc3MjE1JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I7ZGVmYXVsdDpyZXR1cm4gdGhpcy5nZXRGZ0NvbG9yKCl9cmV0dXJuIHRoaXMuZ2V0RmdDb2xvcigpfSxlLnByb3RvdHlwZS5nZXRVbmRlcmxpbmVDb2xvck1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I6dGhpcy5nZXRGZ0NvbG9yTW9kZSgpfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZUNvbG9yUkdCPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj81MDMzMTY0OD09KDUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IpOnRoaXMuaXNGZ1JHQigpfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZUNvbG9yUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5iZyYmfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I/MTY3NzcyMTY9PSg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKXx8MzM1NTQ0MzI9PSg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKTp0aGlzLmlzRmdQYWxldHRlKCl9LGUucHJvdG90eXBlLmlzVW5kZXJsaW5lQ29sb3JEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj8wPT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnRGVmYXVsdCgpfSxlLnByb3RvdHlwZS5nZXRVbmRlcmxpbmVTdHlsZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5mZz8yNjg0MzU0NTYmdGhpcy5iZz90aGlzLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlOjE6MH0sZX0oKTt0LkF0dHJpYnV0ZURhdGE9cjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD0tMSksdGhpcy51bmRlcmxpbmVTdHlsZT1lLHRoaXMudW5kZXJsaW5lQ29sb3I9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy51bmRlcmxpbmVTdHlsZSx0aGlzLnVuZGVybGluZUNvbG9yKX0sZS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy51bmRlcmxpbmVTdHlsZX0sZX0oKTt0LkV4dGVuZGVkQXR0cnM9aX0sOTA5MjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfSxuPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24oZSx0LHIpe2lmKHJ8fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaSxuPTAsbz10Lmxlbmd0aDtuPG87bisrKSFpJiZuIGluIHR8fChpfHwoaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAsbikpLGlbbl09dFtuXSk7cmV0dXJuIGUuY29uY2F0KGl8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyU3RyaW5nSXRlcmF0b3I9dC5CdWZmZXI9dC5NQVhfQlVGRkVSX1NJWkU9dm9pZCAwO3ZhciBvPXIoNjM0OSkscz1yKDg0MzcpLGE9cig1MTEpLGM9cig2NDMpLGw9cig0NjM0KSxoPXIoNDg2MyksdT1yKDcxMTYpLGY9cigzNzM0KTt0Lk1BWF9CVUZGRVJfU0laRT00Mjk0OTY3Mjk1O3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5faGFzU2Nyb2xsYmFjaz1lLHRoaXMuX29wdGlvbnNTZXJ2aWNlPXQsdGhpcy5fYnVmZmVyU2VydmljZT1yLHRoaXMueWRpc3A9MCx0aGlzLnliYXNlPTAsdGhpcy55PTAsdGhpcy54PTAsdGhpcy5zYXZlZFk9MCx0aGlzLnNhdmVkWD0wLHRoaXMuc2F2ZWRDdXJBdHRyRGF0YT1zLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCksdGhpcy5zYXZlZENoYXJzZXQ9dS5ERUZBVUxUX0NIQVJTRVQsdGhpcy5tYXJrZXJzPVtdLHRoaXMuX251bGxDZWxsPWEuQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLGMuTlVMTF9DRUxMX0NIQVIsYy5OVUxMX0NFTExfV0lEVEgsYy5OVUxMX0NFTExfQ09ERV0pLHRoaXMuX3doaXRlc3BhY2VDZWxsPWEuQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLGMuV0hJVEVTUEFDRV9DRUxMX0NIQVIsYy5XSElURVNQQUNFX0NFTExfV0lEVEgsYy5XSElURVNQQUNFX0NFTExfQ09ERV0pLHRoaXMuX2lzQ2xlYXJpbmc9ITEsdGhpcy5fY29scz10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fcm93cz10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsdGhpcy5saW5lcz1uZXcgby5DaXJjdWxhckxpc3QodGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSksdGhpcy5zY3JvbGxUb3A9MCx0aGlzLnNjcm9sbEJvdHRvbT10aGlzLl9yb3dzLTEsdGhpcy5zZXR1cFRhYlN0b3BzKCl9cmV0dXJuIGUucHJvdG90eXBlLmdldE51bGxDZWxsPWZ1bmN0aW9uKGUpe3JldHVybiBlPyh0aGlzLl9udWxsQ2VsbC5mZz1lLmZnLHRoaXMuX251bGxDZWxsLmJnPWUuYmcsdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQ9ZS5leHRlbmRlZCk6KHRoaXMuX251bGxDZWxsLmZnPTAsdGhpcy5fbnVsbENlbGwuYmc9MCx0aGlzLl9udWxsQ2VsbC5leHRlbmRlZD1uZXcgZi5FeHRlbmRlZEF0dHJzKSx0aGlzLl9udWxsQ2VsbH0sZS5wcm90b3R5cGUuZ2V0V2hpdGVzcGFjZUNlbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KHRoaXMuX3doaXRlc3BhY2VDZWxsLmZnPWUuZmcsdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmc9ZS5iZyx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5leHRlbmRlZD1lLmV4dGVuZGVkKToodGhpcy5fd2hpdGVzcGFjZUNlbGwuZmc9MCx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZz0wLHRoaXMuX3doaXRlc3BhY2VDZWxsLmV4dGVuZGVkPW5ldyBmLkV4dGVuZGVkQXR0cnMpLHRoaXMuX3doaXRlc3BhY2VDZWxsfSxlLnByb3RvdHlwZS5nZXRCbGFua0xpbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHMuQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5nZXROdWxsQ2VsbChlKSx0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJoYXNTY3JvbGxiYWNrIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2smJnRoaXMubGluZXMubWF4TGVuZ3RoPnRoaXMuX3Jvd3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0N1cnNvckluVmlld3BvcnQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnliYXNlK3RoaXMueS10aGlzLnlkaXNwO3JldHVybiBlPj0wJiZlPHRoaXMuX3Jvd3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldENvcnJlY3RCdWZmZXJMZW5ndGg9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2hhc1Njcm9sbGJhY2spcmV0dXJuIGU7dmFyIHI9ZSt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbGJhY2s7cmV0dXJuIHI+dC5NQVhfQlVGRkVSX1NJWkU/dC5NQVhfQlVGRkVSX1NJWkU6cn0sZS5wcm90b3R5cGUuZmlsbFZpZXdwb3J0Um93cz1mdW5jdGlvbihlKXtpZigwPT09dGhpcy5saW5lcy5sZW5ndGgpe3ZvaWQgMD09PWUmJihlPXMuREVGQVVMVF9BVFRSX0RBVEEpO2Zvcih2YXIgdD10aGlzLl9yb3dzO3QtLTspdGhpcy5saW5lcy5wdXNoKHRoaXMuZ2V0QmxhbmtMaW5lKGUpKX19LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy55ZGlzcD0wLHRoaXMueWJhc2U9MCx0aGlzLnk9MCx0aGlzLng9MCx0aGlzLmxpbmVzPW5ldyBvLkNpcmN1bGFyTGlzdCh0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHRoaXMuX3Jvd3MpKSx0aGlzLnNjcm9sbFRvcD0wLHRoaXMuc2Nyb2xsQm90dG9tPXRoaXMuX3Jvd3MtMSx0aGlzLnNldHVwVGFiU3RvcHMoKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5nZXROdWxsQ2VsbChzLkRFRkFVTFRfQVRUUl9EQVRBKSxpPXRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodCk7aWYoaT50aGlzLmxpbmVzLm1heExlbmd0aCYmKHRoaXMubGluZXMubWF4TGVuZ3RoPWkpLHRoaXMubGluZXMubGVuZ3RoPjApe2lmKHRoaXMuX2NvbHM8ZSlmb3IodmFyIG49MDtuPHRoaXMubGluZXMubGVuZ3RoO24rKyl0aGlzLmxpbmVzLmdldChuKS5yZXNpemUoZSxyKTt2YXIgbz0wO2lmKHRoaXMuX3Jvd3M8dClmb3IodmFyIGE9dGhpcy5fcm93czthPHQ7YSsrKXRoaXMubGluZXMubGVuZ3RoPHQrdGhpcy55YmFzZSYmKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c01vZGU/dGhpcy5saW5lcy5wdXNoKG5ldyBzLkJ1ZmZlckxpbmUoZSxyKSk6dGhpcy55YmFzZT4wJiZ0aGlzLmxpbmVzLmxlbmd0aDw9dGhpcy55YmFzZSt0aGlzLnkrbysxPyh0aGlzLnliYXNlLS0sbysrLHRoaXMueWRpc3A+MCYmdGhpcy55ZGlzcC0tKTp0aGlzLmxpbmVzLnB1c2gobmV3IHMuQnVmZmVyTGluZShlLHIpKSk7ZWxzZSBmb3IoYT10aGlzLl9yb3dzO2E+dDthLS0pdGhpcy5saW5lcy5sZW5ndGg+dCt0aGlzLnliYXNlJiYodGhpcy5saW5lcy5sZW5ndGg+dGhpcy55YmFzZSt0aGlzLnkrMT90aGlzLmxpbmVzLnBvcCgpOih0aGlzLnliYXNlKyssdGhpcy55ZGlzcCsrKSk7aWYoaTx0aGlzLmxpbmVzLm1heExlbmd0aCl7dmFyIGM9dGhpcy5saW5lcy5sZW5ndGgtaTtjPjAmJih0aGlzLmxpbmVzLnRyaW1TdGFydChjKSx0aGlzLnliYXNlPU1hdGgubWF4KHRoaXMueWJhc2UtYywwKSx0aGlzLnlkaXNwPU1hdGgubWF4KHRoaXMueWRpc3AtYywwKSx0aGlzLnNhdmVkWT1NYXRoLm1heCh0aGlzLnNhdmVkWS1jLDApKSx0aGlzLmxpbmVzLm1heExlbmd0aD1pfXRoaXMueD1NYXRoLm1pbih0aGlzLngsZS0xKSx0aGlzLnk9TWF0aC5taW4odGhpcy55LHQtMSksbyYmKHRoaXMueSs9byksdGhpcy5zYXZlZFg9TWF0aC5taW4odGhpcy5zYXZlZFgsZS0xKSx0aGlzLnNjcm9sbFRvcD0wfWlmKHRoaXMuc2Nyb2xsQm90dG9tPXQtMSx0aGlzLl9pc1JlZmxvd0VuYWJsZWQmJih0aGlzLl9yZWZsb3coZSx0KSx0aGlzLl9jb2xzPmUpKWZvcihuPTA7bjx0aGlzLmxpbmVzLmxlbmd0aDtuKyspdGhpcy5saW5lcy5nZXQobikucmVzaXplKGUscik7dGhpcy5fY29scz1lLHRoaXMuX3Jvd3M9dH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJfaXNSZWZsb3dFbmFibGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2smJiF0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9yZWZsb3c9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb2xzIT09ZSYmKGU+dGhpcy5fY29scz90aGlzLl9yZWZsb3dMYXJnZXIoZSx0KTp0aGlzLl9yZWZsb3dTbWFsbGVyKGUsdCkpfSxlLnByb3RvdHlwZS5fcmVmbG93TGFyZ2VyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KDAsbC5yZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlKSh0aGlzLmxpbmVzLHRoaXMuX2NvbHMsZSx0aGlzLnliYXNlK3RoaXMueSx0aGlzLmdldE51bGxDZWxsKHMuREVGQVVMVF9BVFRSX0RBVEEpKTtpZihyLmxlbmd0aD4wKXt2YXIgaT0oMCxsLnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dCkodGhpcy5saW5lcyxyKTsoMCxsLnJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KSh0aGlzLmxpbmVzLGkubGF5b3V0KSx0aGlzLl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChlLHQsaS5jb3VudFJlbW92ZWQpfX0sZS5wcm90b3R5cGUuX3JlZmxvd0xhcmdlckFkanVzdFZpZXdwb3J0PWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGk9dGhpcy5nZXROdWxsQ2VsbChzLkRFRkFVTFRfQVRUUl9EQVRBKSxuPXI7bi0tID4wOykwPT09dGhpcy55YmFzZT8odGhpcy55PjAmJnRoaXMueS0tLHRoaXMubGluZXMubGVuZ3RoPHQmJnRoaXMubGluZXMucHVzaChuZXcgcy5CdWZmZXJMaW5lKGUsaSkpKToodGhpcy55ZGlzcD09PXRoaXMueWJhc2UmJnRoaXMueWRpc3AtLSx0aGlzLnliYXNlLS0pO3RoaXMuc2F2ZWRZPU1hdGgubWF4KHRoaXMuc2F2ZWRZLXIsMCl9LGUucHJvdG90eXBlLl9yZWZsb3dTbWFsbGVyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuZ2V0TnVsbENlbGwocy5ERUZBVUxUX0FUVFJfREFUQSksbz1bXSxhPTAsYz10aGlzLmxpbmVzLmxlbmd0aC0xO2M+PTA7Yy0tKXt2YXIgaD10aGlzLmxpbmVzLmdldChjKTtpZighKCFofHwhaC5pc1dyYXBwZWQmJmguZ2V0VHJpbW1lZExlbmd0aCgpPD1lKSl7Zm9yKHZhciB1PVtoXTtoLmlzV3JhcHBlZCYmYz4wOyloPXRoaXMubGluZXMuZ2V0KC0tYyksdS51bnNoaWZ0KGgpO3ZhciBmPXRoaXMueWJhc2UrdGhpcy55O2lmKCEoZj49YyYmZjxjK3UubGVuZ3RoKSl7dmFyIF8sZD11W3UubGVuZ3RoLTFdLmdldFRyaW1tZWRMZW5ndGgoKSxwPSgwLGwucmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKSh1LHRoaXMuX2NvbHMsZSksdj1wLmxlbmd0aC11Lmxlbmd0aDtfPTA9PT10aGlzLnliYXNlJiZ0aGlzLnkhPT10aGlzLmxpbmVzLmxlbmd0aC0xP01hdGgubWF4KDAsdGhpcy55LXRoaXMubGluZXMubWF4TGVuZ3RoK3YpOk1hdGgubWF4KDAsdGhpcy5saW5lcy5sZW5ndGgtdGhpcy5saW5lcy5tYXhMZW5ndGgrdik7Zm9yKHZhciB5PVtdLGc9MDtnPHY7ZysrKXt2YXIgbT10aGlzLmdldEJsYW5rTGluZShzLkRFRkFVTFRfQVRUUl9EQVRBLCEwKTt5LnB1c2gobSl9eS5sZW5ndGg+MCYmKG8ucHVzaCh7c3RhcnQ6Yyt1Lmxlbmd0aCthLG5ld0xpbmVzOnl9KSxhKz15Lmxlbmd0aCksdS5wdXNoLmFwcGx5KHUsbihbXSxpKHkpLCExKSk7dmFyIGI9cC5sZW5ndGgtMSxTPXBbYl07MD09PVMmJihTPXBbLS1iXSk7Zm9yKHZhciBDPXUubGVuZ3RoLXYtMSx3PWQ7Qz49MDspe3ZhciBMPU1hdGgubWluKHcsUyk7aWYodm9pZCAwPT09dVtiXSlicmVhaztpZih1W2JdLmNvcHlDZWxsc0Zyb20odVtDXSx3LUwsUy1MLEwsITApLDA9PShTLT1MKSYmKFM9cFstLWJdKSwwPT0ody09TCkpe0MtLTt2YXIgRT1NYXRoLm1heChDLDApO3c9KDAsbC5nZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgpKHUsRSx0aGlzLl9jb2xzKX19Zm9yKGc9MDtnPHUubGVuZ3RoO2crKylwW2ddPGUmJnVbZ10uc2V0Q2VsbChwW2ddLHIpO2Zvcih2YXIgeD12LV87eC0tID4wOykwPT09dGhpcy55YmFzZT90aGlzLnk8dC0xPyh0aGlzLnkrKyx0aGlzLmxpbmVzLnBvcCgpKToodGhpcy55YmFzZSsrLHRoaXMueWRpc3ArKyk6dGhpcy55YmFzZTxNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCx0aGlzLmxpbmVzLmxlbmd0aCthKS10JiYodGhpcy55YmFzZT09PXRoaXMueWRpc3AmJnRoaXMueWRpc3ArKyx0aGlzLnliYXNlKyspO3RoaXMuc2F2ZWRZPU1hdGgubWluKHRoaXMuc2F2ZWRZK3YsdGhpcy55YmFzZSt0LTEpfX19aWYoby5sZW5ndGg+MCl7dmFyIFI9W10saz1bXTtmb3IoZz0wO2c8dGhpcy5saW5lcy5sZW5ndGg7ZysrKWsucHVzaCh0aGlzLmxpbmVzLmdldChnKSk7dmFyIE09dGhpcy5saW5lcy5sZW5ndGgsQT1NLTEsTz0wLEQ9b1tPXTt0aGlzLmxpbmVzLmxlbmd0aD1NYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCx0aGlzLmxpbmVzLmxlbmd0aCthKTt2YXIgVD0wO2ZvcihnPU1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLTEsTSthLTEpO2c+PTA7Zy0tKWlmKEQmJkQuc3RhcnQ+QStUKXtmb3IodmFyIEI9RC5uZXdMaW5lcy5sZW5ndGgtMTtCPj0wO0ItLSl0aGlzLmxpbmVzLnNldChnLS0sRC5uZXdMaW5lc1tCXSk7ZysrLFIucHVzaCh7aW5kZXg6QSsxLGFtb3VudDpELm5ld0xpbmVzLmxlbmd0aH0pLFQrPUQubmV3TGluZXMubGVuZ3RoLEQ9b1srK09dfWVsc2UgdGhpcy5saW5lcy5zZXQoZyxrW0EtLV0pO3ZhciBQPTA7Zm9yKGc9Ui5sZW5ndGgtMTtnPj0wO2ctLSlSW2ddLmluZGV4Kz1QLHRoaXMubGluZXMub25JbnNlcnRFbWl0dGVyLmZpcmUoUltnXSksUCs9UltnXS5hbW91bnQ7dmFyIEk9TWF0aC5tYXgoMCxNK2EtdGhpcy5saW5lcy5tYXhMZW5ndGgpO0k+MCYmdGhpcy5saW5lcy5vblRyaW1FbWl0dGVyLmZpcmUoSSl9fSxlLnByb3RvdHlwZS5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXg9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2b2lkIDA9PT1yJiYocj0hMSk7dDspe3ZhciBpPXRoaXMubGluZXMuZ2V0KGUpO2lmKCFpKXJldHVyblstMSwtMV07Zm9yKHZhciBuPXI/aS5nZXRUcmltbWVkTGVuZ3RoKCk6aS5sZW5ndGgsbz0wO288bjsrK28paWYoaS5nZXQobylbYy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdJiYodC09aS5nZXQobylbYy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RofHwxKSx0PDApcmV0dXJuW2Usb107ZSsrfXJldHVybltlLDBdfSxlLnByb3RvdHlwZS50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09ciYmKHI9MCk7dmFyIG49dGhpcy5saW5lcy5nZXQoZSk7cmV0dXJuIG4/bi50cmFuc2xhdGVUb1N0cmluZyh0LHIsaSk6IiJ9LGUucHJvdG90eXBlLmdldFdyYXBwZWRSYW5nZUZvckxpbmU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUscj1lO3Q+MCYmdGhpcy5saW5lcy5nZXQodCkuaXNXcmFwcGVkOyl0LS07Zm9yKDtyKzE8dGhpcy5saW5lcy5sZW5ndGgmJnRoaXMubGluZXMuZ2V0KHIrMSkuaXNXcmFwcGVkOylyKys7cmV0dXJue2ZpcnN0OnQsbGFzdDpyfX0sZS5wcm90b3R5cGUuc2V0dXBUYWJTdG9wcz1mdW5jdGlvbihlKXtmb3IobnVsbCE9ZT90aGlzLnRhYnNbZV18fChlPXRoaXMucHJldlN0b3AoZSkpOih0aGlzLnRhYnM9e30sZT0wKTtlPHRoaXMuX2NvbHM7ZSs9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50YWJTdG9wV2lkdGgpdGhpcy50YWJzW2VdPSEwfSxlLnByb3RvdHlwZS5wcmV2U3RvcD1mdW5jdGlvbihlKXtmb3IobnVsbD09ZSYmKGU9dGhpcy54KTshdGhpcy50YWJzWy0tZV0mJmU+MDspO3JldHVybiBlPj10aGlzLl9jb2xzP3RoaXMuX2NvbHMtMTplPDA/MDplfSxlLnByb3RvdHlwZS5uZXh0U3RvcD1mdW5jdGlvbihlKXtmb3IobnVsbD09ZSYmKGU9dGhpcy54KTshdGhpcy50YWJzWysrZV0mJmU8dGhpcy5fY29sczspO3JldHVybiBlPj10aGlzLl9jb2xzP3RoaXMuX2NvbHMtMTplPDA/MDplfSxlLnByb3RvdHlwZS5jbGVhck1hcmtlcnM9ZnVuY3Rpb24oZSl7dGhpcy5faXNDbGVhcmluZz0hMDtmb3IodmFyIHQ9MDt0PHRoaXMubWFya2Vycy5sZW5ndGg7dCsrKXRoaXMubWFya2Vyc1t0XS5saW5lPT09ZSYmKHRoaXMubWFya2Vyc1t0XS5kaXNwb3NlKCksdGhpcy5tYXJrZXJzLnNwbGljZSh0LS0sMSkpO3RoaXMuX2lzQ2xlYXJpbmc9ITF9LGUucHJvdG90eXBlLmNsZWFyQWxsTWFya2Vycz1mdW5jdGlvbigpe3RoaXMuX2lzQ2xlYXJpbmc9ITA7Zm9yKHZhciBlPTA7ZTx0aGlzLm1hcmtlcnMubGVuZ3RoO2UrKyl0aGlzLm1hcmtlcnNbZV0uZGlzcG9zZSgpLHRoaXMubWFya2Vycy5zcGxpY2UoZS0tLDEpO3RoaXMuX2lzQ2xlYXJpbmc9ITF9LGUucHJvdG90eXBlLmFkZE1hcmtlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9bmV3IGguTWFya2VyKGUpO3JldHVybiB0aGlzLm1hcmtlcnMucHVzaChyKSxyLnJlZ2lzdGVyKHRoaXMubGluZXMub25UcmltKChmdW5jdGlvbihlKXtyLmxpbmUtPWUsci5saW5lPDAmJnIuZGlzcG9zZSgpfSkpKSxyLnJlZ2lzdGVyKHRoaXMubGluZXMub25JbnNlcnQoKGZ1bmN0aW9uKGUpe3IubGluZT49ZS5pbmRleCYmKHIubGluZSs9ZS5hbW91bnQpfSkpKSxyLnJlZ2lzdGVyKHRoaXMubGluZXMub25EZWxldGUoKGZ1bmN0aW9uKGUpe3IubGluZT49ZS5pbmRleCYmci5saW5lPGUuaW5kZXgrZS5hbW91bnQmJnIuZGlzcG9zZSgpLHIubGluZT5lLmluZGV4JiYoci5saW5lLT1lLmFtb3VudCl9KSkpLHIucmVnaXN0ZXIoci5vbkRpc3Bvc2UoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbW92ZU1hcmtlcihyKX0pKSkscn0sZS5wcm90b3R5cGUuX3JlbW92ZU1hcmtlcj1mdW5jdGlvbihlKXt0aGlzLl9pc0NsZWFyaW5nfHx0aGlzLm1hcmtlcnMuc3BsaWNlKHRoaXMubWFya2Vycy5pbmRleE9mKGUpLDEpfSxlLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybiBuZXcgZCh0aGlzLGUsdCxyLGksbil9LGV9KCk7dC5CdWZmZXI9Xzt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8pe3ZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PWkmJihpPWUubGluZXMubGVuZ3RoKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1vJiYobz0wKSx0aGlzLl9idWZmZXI9ZSx0aGlzLl90cmltUmlnaHQ9dCx0aGlzLl9zdGFydEluZGV4PXIsdGhpcy5fZW5kSW5kZXg9aSx0aGlzLl9zdGFydE92ZXJzY2FuPW4sdGhpcy5fZW5kT3ZlcnNjYW49byx0aGlzLl9zdGFydEluZGV4PDAmJih0aGlzLl9zdGFydEluZGV4PTApLHRoaXMuX2VuZEluZGV4PnRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgmJih0aGlzLl9lbmRJbmRleD10aGlzLl9idWZmZXIubGluZXMubGVuZ3RoKSx0aGlzLl9jdXJyZW50PXRoaXMuX3N0YXJ0SW5kZXh9cmV0dXJuIGUucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudDx0aGlzLl9lbmRJbmRleH0sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2J1ZmZlci5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHRoaXMuX2N1cnJlbnQpO2UuZmlyc3Q8dGhpcy5fc3RhcnRJbmRleC10aGlzLl9zdGFydE92ZXJzY2FuJiYoZS5maXJzdD10aGlzLl9zdGFydEluZGV4LXRoaXMuX3N0YXJ0T3ZlcnNjYW4pLGUubGFzdD50aGlzLl9lbmRJbmRleCt0aGlzLl9lbmRPdmVyc2NhbiYmKGUubGFzdD10aGlzLl9lbmRJbmRleCt0aGlzLl9lbmRPdmVyc2NhbiksZS5maXJzdD1NYXRoLm1heChlLmZpcnN0LDApLGUubGFzdD1NYXRoLm1pbihlLmxhc3QsdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aCk7Zm9yKHZhciB0PSIiLHI9ZS5maXJzdDtyPD1lLmxhc3Q7KytyKXQrPXRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcocix0aGlzLl90cmltUmlnaHQpO3JldHVybiB0aGlzLl9jdXJyZW50PWUubGFzdCsxLHtyYW5nZTplLGNvbnRlbnQ6dH19LGV9KCk7dC5CdWZmZXJTdHJpbmdJdGVyYXRvcj1kfSw4NDM3OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJMaW5lPXQuREVGQVVMVF9BVFRSX0RBVEE9dm9pZCAwO3ZhciBpPXIoNDgyKSxuPXIoNjQzKSxvPXIoNTExKSxzPXIoMzczNCk7dC5ERUZBVUxUX0FUVFJfREFUQT1PYmplY3QuZnJlZXplKG5ldyBzLkF0dHJpYnV0ZURhdGEpO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dm9pZCAwPT09ciYmKHI9ITEpLHRoaXMuaXNXcmFwcGVkPXIsdGhpcy5fY29tYmluZWQ9e30sdGhpcy5fZXh0ZW5kZWRBdHRycz17fSx0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgzKmUpO2Zvcih2YXIgaT10fHxvLkNlbGxEYXRhLmZyb21DaGFyRGF0YShbMCxuLk5VTExfQ0VMTF9DSEFSLG4uTlVMTF9DRUxMX1dJRFRILG4uTlVMTF9DRUxMX0NPREVdKSxzPTA7czxlOysrcyl0aGlzLnNldENlbGwocyxpKTt0aGlzLmxlbmd0aD1lfXJldHVybiBlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YVszKmUrMF0scj0yMDk3MTUxJnQ7cmV0dXJuW3RoaXMuX2RhdGFbMyplKzFdLDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXTpyPygwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkocik6IiIsdD4+MjIsMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbZV0ubGVuZ3RoLTEpOnJdfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhWzMqZSsxXT10W24uQ0hBUl9EQVRBX0FUVFJfSU5ERVhdLHRbbi5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoPjE/KHRoaXMuX2NvbWJpbmVkW2VdPXRbMV0sdGhpcy5fZGF0YVszKmUrMF09MjA5NzE1MnxlfHRbbi5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMik6dGhpcy5fZGF0YVszKmUrMF09dFtuLkNIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApfHRbbi5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMn0sZS5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFbMyplKzBdPj4yMn0sZS5wcm90b3R5cGUuaGFzV2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIDEyNTgyOTEyJnRoaXMuX2RhdGFbMyplKzBdfSxlLnByb3RvdHlwZS5nZXRGZz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YVszKmUrMV19LGUucHJvdG90eXBlLmdldEJnPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXRhWzMqZSsyXX0sZS5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbihlKXtyZXR1cm4gNDE5NDMwMyZ0aGlzLl9kYXRhWzMqZSswXX0sZS5wcm90b3R5cGUuZ2V0Q29kZVBvaW50PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGFbMyplKzBdO3JldHVybiAyMDk3MTUyJnQ/dGhpcy5fY29tYmluZWRbZV0uY2hhckNvZGVBdCh0aGlzLl9jb21iaW5lZFtlXS5sZW5ndGgtMSk6MjA5NzE1MSZ0fSxlLnByb3RvdHlwZS5pc0NvbWJpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiAyMDk3MTUyJnRoaXMuX2RhdGFbMyplKzBdfSxlLnByb3RvdHlwZS5nZXRTdHJpbmc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YVszKmUrMF07cmV0dXJuIDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXToyMDk3MTUxJnQ/KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KSgyMDk3MTUxJnQpOiIifSxlLnByb3RvdHlwZS5sb2FkQ2VsbD1mdW5jdGlvbihlLHQpe3ZhciByPTMqZTtyZXR1cm4gdC5jb250ZW50PXRoaXMuX2RhdGFbciswXSx0LmZnPXRoaXMuX2RhdGFbcisxXSx0LmJnPXRoaXMuX2RhdGFbcisyXSwyMDk3MTUyJnQuY29udGVudCYmKHQuY29tYmluZWREYXRhPXRoaXMuX2NvbWJpbmVkW2VdKSwyNjg0MzU0NTYmdC5iZyYmKHQuZXh0ZW5kZWQ9dGhpcy5fZXh0ZW5kZWRBdHRyc1tlXSksdH0sZS5wcm90b3R5cGUuc2V0Q2VsbD1mdW5jdGlvbihlLHQpezIwOTcxNTImdC5jb250ZW50JiYodGhpcy5fY29tYmluZWRbZV09dC5jb21iaW5lZERhdGEpLDI2ODQzNTQ1NiZ0LmJnJiYodGhpcy5fZXh0ZW5kZWRBdHRyc1tlXT10LmV4dGVuZGVkKSx0aGlzLl9kYXRhWzMqZSswXT10LmNvbnRlbnQsdGhpcy5fZGF0YVszKmUrMV09dC5mZyx0aGlzLl9kYXRhWzMqZSsyXT10LmJnfSxlLnByb3RvdHlwZS5zZXRDZWxsRnJvbUNvZGVQb2ludD1mdW5jdGlvbihlLHQscixpLG4sbyl7MjY4NDM1NDU2Jm4mJih0aGlzLl9leHRlbmRlZEF0dHJzW2VdPW8pLHRoaXMuX2RhdGFbMyplKzBdPXR8cjw8MjIsdGhpcy5fZGF0YVszKmUrMV09aSx0aGlzLl9kYXRhWzMqZSsyXT1ufSxlLnByb3RvdHlwZS5hZGRDb2RlcG9pbnRUb0NlbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9kYXRhWzMqZSswXTsyMDk3MTUyJnI/dGhpcy5fY29tYmluZWRbZV0rPSgwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkodCk6KDIwOTcxNTEmcj8odGhpcy5fY29tYmluZWRbZV09KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KSgyMDk3MTUxJnIpKygwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkodCksciY9LTIwOTcxNTIscnw9MjA5NzE1Mik6cj10fDE8PDIyLHRoaXMuX2RhdGFbMyplKzBdPXIpfSxlLnByb3RvdHlwZS5pbnNlcnRDZWxscz1mdW5jdGlvbihlLHQscixpKXtpZigoZSU9dGhpcy5sZW5ndGgpJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpLHQ8dGhpcy5sZW5ndGgtZSl7Zm9yKHZhciBuPW5ldyBvLkNlbGxEYXRhLGE9dGhpcy5sZW5ndGgtZS10LTE7YT49MDstLWEpdGhpcy5zZXRDZWxsKGUrdCthLHRoaXMubG9hZENlbGwoZSthLG4pKTtmb3IoYT0wO2E8dDsrK2EpdGhpcy5zZXRDZWxsKGUrYSxyKX1lbHNlIGZvcihhPWU7YTx0aGlzLmxlbmd0aDsrK2EpdGhpcy5zZXRDZWxsKGEscik7Mj09PXRoaXMuZ2V0V2lkdGgodGhpcy5sZW5ndGgtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5sZW5ndGgtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpfSxlLnByb3RvdHlwZS5kZWxldGVDZWxscz1mdW5jdGlvbihlLHQscixpKXtpZihlJT10aGlzLmxlbmd0aCx0PHRoaXMubGVuZ3RoLWUpe2Zvcih2YXIgbj1uZXcgby5DZWxsRGF0YSxhPTA7YTx0aGlzLmxlbmd0aC1lLXQ7KythKXRoaXMuc2V0Q2VsbChlK2EsdGhpcy5sb2FkQ2VsbChlK3QrYSxuKSk7Zm9yKGE9dGhpcy5sZW5ndGgtdDthPHRoaXMubGVuZ3RoOysrYSl0aGlzLnNldENlbGwoYSxyKX1lbHNlIGZvcihhPWU7YTx0aGlzLmxlbmd0aDsrK2EpdGhpcy5zZXRDZWxsKGEscik7ZSYmMj09PXRoaXMuZ2V0V2lkdGgoZS0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChlLTEsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKSwwIT09dGhpcy5nZXRXaWR0aChlKXx8dGhpcy5oYXNDb250ZW50KGUpfHx0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKX0sZS5wcm90b3R5cGUucmVwbGFjZUNlbGxzPWZ1bmN0aW9uKGUsdCxyLGkpe2ZvcihlJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpLHQ8dGhpcy5sZW5ndGgmJjI9PT10aGlzLmdldFdpZHRoKHQtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQodCwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpO2U8dCYmZTx0aGlzLmxlbmd0aDspdGhpcy5zZXRDZWxsKGUrKyxyKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7aWYoZSE9PXRoaXMubGVuZ3RoKXtpZihlPnRoaXMubGVuZ3RoKXt2YXIgcj1uZXcgVWludDMyQXJyYXkoMyplKTt0aGlzLmxlbmd0aCYmKDMqZTx0aGlzLl9kYXRhLmxlbmd0aD9yLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KDAsMyplKSk6ci5zZXQodGhpcy5fZGF0YSkpLHRoaXMuX2RhdGE9cjtmb3IodmFyIGk9dGhpcy5sZW5ndGg7aTxlOysraSl0aGlzLnNldENlbGwoaSx0KX1lbHNlIGlmKGUpeyhyPW5ldyBVaW50MzJBcnJheSgzKmUpKS5zZXQodGhpcy5fZGF0YS5zdWJhcnJheSgwLDMqZSkpLHRoaXMuX2RhdGE9cjt2YXIgbj1PYmplY3Qua2V5cyh0aGlzLl9jb21iaW5lZCk7Zm9yKGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89cGFyc2VJbnQobltpXSwxMCk7bz49ZSYmZGVsZXRlIHRoaXMuX2NvbWJpbmVkW29dfX1lbHNlIHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApLHRoaXMuX2NvbWJpbmVkPXt9O3RoaXMubGVuZ3RoPWV9fSxlLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbWJpbmVkPXt9LHRoaXMuX2V4dGVuZGVkQXR0cnM9e307Zm9yKHZhciB0PTA7dDx0aGlzLmxlbmd0aDsrK3QpdGhpcy5zZXRDZWxsKHQsZSl9LGUucHJvdG90eXBlLmNvcHlGcm9tPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzLmxlbmd0aCE9PWUubGVuZ3RoP3RoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KGUuX2RhdGEpOnRoaXMuX2RhdGEuc2V0KGUuX2RhdGEpLHRoaXMubGVuZ3RoPWUubGVuZ3RoLHRoaXMuX2NvbWJpbmVkPXt9LGUuX2NvbWJpbmVkKXRoaXMuX2NvbWJpbmVkW3RdPWUuX2NvbWJpbmVkW3RdO2Zvcih2YXIgdCBpbiB0aGlzLl9leHRlbmRlZEF0dHJzPXt9LGUuX2V4dGVuZGVkQXR0cnMpdGhpcy5fZXh0ZW5kZWRBdHRyc1t0XT1lLl9leHRlbmRlZEF0dHJzW3RdO3RoaXMuaXNXcmFwcGVkPWUuaXNXcmFwcGVkfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBlKDApO2Zvcih2YXIgciBpbiB0Ll9kYXRhPW5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhKSx0Lmxlbmd0aD10aGlzLmxlbmd0aCx0aGlzLl9jb21iaW5lZCl0Ll9jb21iaW5lZFtyXT10aGlzLl9jb21iaW5lZFtyXTtmb3IodmFyIHIgaW4gdGhpcy5fZXh0ZW5kZWRBdHRycyl0Ll9leHRlbmRlZEF0dHJzW3JdPXRoaXMuX2V4dGVuZGVkQXR0cnNbcl07cmV0dXJuIHQuaXNXcmFwcGVkPXRoaXMuaXNXcmFwcGVkLHR9LGUucHJvdG90eXBlLmdldFRyaW1tZWRMZW5ndGg9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGgtMTtlPj0wOy0tZSlpZig0MTk0MzAzJnRoaXMuX2RhdGFbMyplKzBdKXJldHVybiBlKyh0aGlzLl9kYXRhWzMqZSswXT4+MjIpO3JldHVybiAwfSxlLnByb3RvdHlwZS5jb3B5Q2VsbHNGcm9tPWZ1bmN0aW9uKGUsdCxyLGksbil7dmFyIG89ZS5fZGF0YTtpZihuKWZvcih2YXIgcz1pLTE7cz49MDtzLS0pZm9yKHZhciBhPTA7YTwzO2ErKyl0aGlzLl9kYXRhWzMqKHIrcykrYV09b1szKih0K3MpK2FdO2Vsc2UgZm9yKHM9MDtzPGk7cysrKWZvcihhPTA7YTwzO2ErKyl0aGlzLl9kYXRhWzMqKHIrcykrYV09b1szKih0K3MpK2FdO3ZhciBjPU9iamVjdC5rZXlzKGUuX2NvbWJpbmVkKTtmb3IoYT0wO2E8Yy5sZW5ndGg7YSsrKXt2YXIgbD1wYXJzZUludChjW2FdLDEwKTtsPj10JiYodGhpcy5fY29tYmluZWRbbC10K3JdPWUuX2NvbWJpbmVkW2xdKX19LGUucHJvdG90eXBlLnRyYW5zbGF0ZVRvU3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ciYmKHI9dGhpcy5sZW5ndGgpLGUmJihyPU1hdGgubWluKHIsdGhpcy5nZXRUcmltbWVkTGVuZ3RoKCkpKTtmb3IodmFyIG89IiI7dDxyOyl7dmFyIHM9dGhpcy5fZGF0YVszKnQrMF0sYT0yMDk3MTUxJnM7bys9MjA5NzE1MiZzP3RoaXMuX2NvbWJpbmVkW3RdOmE/KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KShhKTpuLldISVRFU1BBQ0VfQ0VMTF9DSEFSLHQrPXM+PjIyfHwxfXJldHVybiBvfSxlfSgpO3QuQnVmZmVyTGluZT1hfSw0ODQxOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZ2V0UmFuZ2VMZW5ndGg9dm9pZCAwLHQuZ2V0UmFuZ2VMZW5ndGg9ZnVuY3Rpb24oZSx0KXtpZihlLnN0YXJ0Lnk+ZS5lbmQueSl0aHJvdyBuZXcgRXJyb3IoIkJ1ZmZlciByYW5nZSBlbmQgKCIrZS5lbmQueCsiLCAiK2UuZW5kLnkrIikgY2Fubm90IGJlIGJlZm9yZSBzdGFydCAoIitlLnN0YXJ0LngrIiwgIitlLnN0YXJ0LnkrIikiKTtyZXR1cm4gdCooZS5lbmQueS1lLnN0YXJ0LnkpKyhlLmVuZC54LWUuc3RhcnQueCsxKX19LDQ2MzQ6KGUsdCk9PntmdW5jdGlvbiByKGUsdCxyKXtpZih0PT09ZS5sZW5ndGgtMSlyZXR1cm4gZVt0XS5nZXRUcmltbWVkTGVuZ3RoKCk7dmFyIGk9IWVbdF0uaGFzQ29udGVudChyLTEpJiYxPT09ZVt0XS5nZXRXaWR0aChyLTEpLG49Mj09PWVbdCsxXS5nZXRXaWR0aCgwKTtyZXR1cm4gaSYmbj9yLTE6cn1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5nZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGg9dC5yZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHM9dC5yZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dD10LnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dD10LnJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmU9dm9pZCAwLHQucmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZT1mdW5jdGlvbihlLHQsaSxuLG8pe2Zvcih2YXIgcz1bXSxhPTA7YTxlLmxlbmd0aC0xO2ErKyl7dmFyIGM9YSxsPWUuZ2V0KCsrYyk7aWYobC5pc1dyYXBwZWQpe2Zvcih2YXIgaD1bZS5nZXQoYSldO2M8ZS5sZW5ndGgmJmwuaXNXcmFwcGVkOyloLnB1c2gobCksbD1lLmdldCgrK2MpO2lmKG4+PWEmJm48YylhKz1oLmxlbmd0aC0xO2Vsc2V7Zm9yKHZhciB1PTAsZj1yKGgsdSx0KSxfPTEsZD0wO188aC5sZW5ndGg7KXt2YXIgcD1yKGgsXyx0KSx2PXAtZCx5PWktZixnPU1hdGgubWluKHYseSk7aFt1XS5jb3B5Q2VsbHNGcm9tKGhbX10sZCxmLGcsITEpLChmKz1nKT09PWkmJih1KyssZj0wKSwoZCs9Zyk9PT1wJiYoXysrLGQ9MCksMD09PWYmJjAhPT11JiYyPT09aFt1LTFdLmdldFdpZHRoKGktMSkmJihoW3VdLmNvcHlDZWxsc0Zyb20oaFt1LTFdLGktMSxmKyssMSwhMSksaFt1LTFdLnNldENlbGwoaS0xLG8pKX1oW3VdLnJlcGxhY2VDZWxscyhmLGksbyk7Zm9yKHZhciBtPTAsYj1oLmxlbmd0aC0xO2I+MCYmKGI+dXx8MD09PWhbYl0uZ2V0VHJpbW1lZExlbmd0aCgpKTtiLS0pbSsrO20+MCYmKHMucHVzaChhK2gubGVuZ3RoLW0pLHMucHVzaChtKSksYSs9aC5sZW5ndGgtMX19fXJldHVybiBzfSx0LnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxpPTAsbj10W2ldLG89MCxzPTA7czxlLmxlbmd0aDtzKyspaWYobj09PXMpe3ZhciBhPXRbKytpXTtlLm9uRGVsZXRlRW1pdHRlci5maXJlKHtpbmRleDpzLW8sYW1vdW50OmF9KSxzKz1hLTEsbys9YSxuPXRbKytpXX1lbHNlIHIucHVzaChzKTtyZXR1cm57bGF5b3V0OnIsY291bnRSZW1vdmVkOm99fSx0LnJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MDtpPHQubGVuZ3RoO2krKylyLnB1c2goZS5nZXQodFtpXSkpO2ZvcihpPTA7aTxyLmxlbmd0aDtpKyspZS5zZXQoaSxyW2ldKTtlLmxlbmd0aD10Lmxlbmd0aH0sdC5yZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHM9ZnVuY3Rpb24oZSx0LGkpe2Zvcih2YXIgbj1bXSxvPWUubWFwKChmdW5jdGlvbihpLG4pe3JldHVybiByKGUsbix0KX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdH0pKSxzPTAsYT0wLGM9MDtjPG87KXtpZihvLWM8aSl7bi5wdXNoKG8tYyk7YnJlYWt9cys9aTt2YXIgbD1yKGUsYSx0KTtzPmwmJihzLT1sLGErKyk7dmFyIGg9Mj09PWVbYV0uZ2V0V2lkdGgocy0xKTtoJiZzLS07dmFyIHU9aD9pLTE6aTtuLnB1c2godSksYys9dX1yZXR1cm4gbn0sdC5nZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGg9cn0sNTI5NTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJTZXQ9dm9pZCAwO3ZhciBvPXIoOTA5Mikscz1yKDg0NjApLGE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fb3B0aW9uc1NlcnZpY2U9dCxpLl9idWZmZXJTZXJ2aWNlPXIsaS5fb25CdWZmZXJBY3RpdmF0ZT1pLnJlZ2lzdGVyKG5ldyBzLkV2ZW50RW1pdHRlciksaS5yZXNldCgpLGl9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQnVmZmVyQWN0aXZhdGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX25vcm1hbD1uZXcgby5CdWZmZXIoITAsdGhpcy5fb3B0aW9uc1NlcnZpY2UsdGhpcy5fYnVmZmVyU2VydmljZSksdGhpcy5fbm9ybWFsLmZpbGxWaWV3cG9ydFJvd3MoKSx0aGlzLl9hbHQ9bmV3IG8uQnVmZmVyKCExLHRoaXMuX29wdGlvbnNTZXJ2aWNlLHRoaXMuX2J1ZmZlclNlcnZpY2UpLHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9ub3JtYWwsdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHthY3RpdmVCdWZmZXI6dGhpcy5fbm9ybWFsLGluYWN0aXZlQnVmZmVyOnRoaXMuX2FsdH0pLHRoaXMuc2V0dXBUYWJTdG9wcygpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImFsdCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJhY3RpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibm9ybWFsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcm1hbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5hY3RpdmF0ZU5vcm1hbEJ1ZmZlcj1mdW5jdGlvbigpe3RoaXMuX2FjdGl2ZUJ1ZmZlciE9PXRoaXMuX25vcm1hbCYmKHRoaXMuX25vcm1hbC54PXRoaXMuX2FsdC54LHRoaXMuX25vcm1hbC55PXRoaXMuX2FsdC55LHRoaXMuX2FsdC5jbGVhcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9ub3JtYWwsdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHthY3RpdmVCdWZmZXI6dGhpcy5fbm9ybWFsLGluYWN0aXZlQnVmZmVyOnRoaXMuX2FsdH0pKX0sdC5wcm90b3R5cGUuYWN0aXZhdGVBbHRCdWZmZXI9ZnVuY3Rpb24oZSl7dGhpcy5fYWN0aXZlQnVmZmVyIT09dGhpcy5fYWx0JiYodGhpcy5fYWx0LmZpbGxWaWV3cG9ydFJvd3MoZSksdGhpcy5fYWx0Lng9dGhpcy5fbm9ybWFsLngsdGhpcy5fYWx0Lnk9dGhpcy5fbm9ybWFsLnksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX2FsdCx0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe2FjdGl2ZUJ1ZmZlcjp0aGlzLl9hbHQsaW5hY3RpdmVCdWZmZXI6dGhpcy5fbm9ybWFsfSkpfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9ub3JtYWwucmVzaXplKGUsdCksdGhpcy5fYWx0LnJlc2l6ZShlLHQpfSx0LnByb3RvdHlwZS5zZXR1cFRhYlN0b3BzPWZ1bmN0aW9uKGUpe3RoaXMuX25vcm1hbC5zZXR1cFRhYlN0b3BzKGUpLHRoaXMuX2FsdC5zZXR1cFRhYlN0b3BzKGUpfSx0fShyKDg0NCkuRGlzcG9zYWJsZSk7dC5CdWZmZXJTZXQ9YX0sNTExOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNlbGxEYXRhPXZvaWQgMDt2YXIgbz1yKDQ4Mikscz1yKDY0MyksYT1yKDM3MzQpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5jb250ZW50PTAsdC5mZz0wLHQuYmc9MCx0LmV4dGVuZGVkPW5ldyBhLkV4dGVuZGVkQXR0cnMsdC5jb21iaW5lZERhdGE9IiIsdH1yZXR1cm4gbih0LGUpLHQuZnJvbUNoYXJEYXRhPWZ1bmN0aW9uKGUpe3ZhciByPW5ldyB0O3JldHVybiByLnNldEZyb21DaGFyRGF0YShlKSxyfSx0LnByb3RvdHlwZS5pc0NvbWJpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIDIwOTcxNTImdGhpcy5jb250ZW50fSx0LnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQ+PjIyfSx0LnByb3RvdHlwZS5nZXRDaGFycz1mdW5jdGlvbigpe3JldHVybiAyMDk3MTUyJnRoaXMuY29udGVudD90aGlzLmNvbWJpbmVkRGF0YToyMDk3MTUxJnRoaXMuY29udGVudD8oMCxvLnN0cmluZ0Zyb21Db2RlUG9pbnQpKDIwOTcxNTEmdGhpcy5jb250ZW50KToiIn0sdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ29tYmluZWQoKT90aGlzLmNvbWJpbmVkRGF0YS5jaGFyQ29kZUF0KHRoaXMuY29tYmluZWREYXRhLmxlbmd0aC0xKToyMDk3MTUxJnRoaXMuY29udGVudH0sdC5wcm90b3R5cGUuc2V0RnJvbUNoYXJEYXRhPWZ1bmN0aW9uKGUpe3RoaXMuZmc9ZVtzLkNIQVJfREFUQV9BVFRSX0lOREVYXSx0aGlzLmJnPTA7dmFyIHQ9ITE7aWYoZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGg+Mil0PSEwO2Vsc2UgaWYoMj09PWVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoKXt2YXIgcj1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCk7aWYoNTUyOTY8PXImJnI8PTU2MzE5KXt2YXIgaT1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMSk7NTYzMjA8PWkmJmk8PTU3MzQzP3RoaXMuY29udGVudD0xMDI0KihyLTU1Mjk2KStpLTU2MzIwKzY1NTM2fGVbcy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMjp0PSEwfWVsc2UgdD0hMH1lbHNlIHRoaXMuY29udGVudD1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCl8ZVtzLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyO3QmJih0aGlzLmNvbWJpbmVkRGF0YT1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLHRoaXMuY29udGVudD0yMDk3MTUyfGVbcy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMil9LHQucHJvdG90eXBlLmdldEFzQ2hhckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5mZyx0aGlzLmdldENoYXJzKCksdGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0Q29kZSgpXX0sdH0oYS5BdHRyaWJ1dGVEYXRhKTt0LkNlbGxEYXRhPWN9LDY0MzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LldISVRFU1BBQ0VfQ0VMTF9DT0RFPXQuV0hJVEVTUEFDRV9DRUxMX1dJRFRIPXQuV0hJVEVTUEFDRV9DRUxMX0NIQVI9dC5OVUxMX0NFTExfQ09ERT10Lk5VTExfQ0VMTF9XSURUSD10Lk5VTExfQ0VMTF9DSEFSPXQuQ0hBUl9EQVRBX0NPREVfSU5ERVg9dC5DSEFSX0RBVEFfV0lEVEhfSU5ERVg9dC5DSEFSX0RBVEFfQ0hBUl9JTkRFWD10LkNIQVJfREFUQV9BVFRSX0lOREVYPXQuREVGQVVMVF9BVFRSPXQuREVGQVVMVF9DT0xPUj12b2lkIDAsdC5ERUZBVUxUX0NPTE9SPTI1Nix0LkRFRkFVTFRfQVRUUj0yNTZ8dC5ERUZBVUxUX0NPTE9SPDw5LHQuQ0hBUl9EQVRBX0FUVFJfSU5ERVg9MCx0LkNIQVJfREFUQV9DSEFSX0lOREVYPTEsdC5DSEFSX0RBVEFfV0lEVEhfSU5ERVg9Mix0LkNIQVJfREFUQV9DT0RFX0lOREVYPTMsdC5OVUxMX0NFTExfQ0hBUj0iIix0Lk5VTExfQ0VMTF9XSURUSD0xLHQuTlVMTF9DRUxMX0NPREU9MCx0LldISVRFU1BBQ0VfQ0VMTF9DSEFSPSIgIix0LldISVRFU1BBQ0VfQ0VMTF9XSURUSD0xLHQuV0hJVEVTUEFDRV9DRUxMX0NPREU9MzJ9LDQ4NjM6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTWFya2VyPXZvaWQgMDt2YXIgbz1yKDg0NjApLHM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkubGluZT1yLGkuX2lkPXQuX25leHRJZCsrLGkuaXNEaXNwb3NlZD0hMSxpLl9vbkRpc3Bvc2U9bmV3IG8uRXZlbnRFbWl0dGVyLGl9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImlkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EaXNwb3NlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGlzcG9zZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc0Rpc3Bvc2VkfHwodGhpcy5pc0Rpc3Bvc2VkPSEwLHRoaXMubGluZT0tMSx0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSl9LHQuX25leHRJZD0xLHR9KHIoODQ0KS5EaXNwb3NhYmxlKTt0Lk1hcmtlcj1zfSw3MTE2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuREVGQVVMVF9DSEFSU0VUPXQuQ0hBUlNFVFM9dm9pZCAwLHQuQ0hBUlNFVFM9e30sdC5ERUZBVUxUX0NIQVJTRVQ9dC5DSEFSU0VUUy5CLHQuQ0hBUlNFVFNbMF09eyJgIjoi4peGIixhOiLilpIiLGI6IuKQiSIsYzoi4pCMIixkOiLikI0iLGU6IuKQiiIsZjoiwrAiLGc6IsKxIixoOiLikKQiLGk6IuKQiyIsajoi4pSYIixrOiLilJAiLGw6IuKUjCIsbToi4pSUIixuOiLilLwiLG86IuKOuiIscDoi4o67IixxOiLilIAiLHI6IuKOvCIsczoi4o69Iix0OiLilJwiLHU6IuKUpCIsdjoi4pS0Iix3OiLilKwiLHg6IuKUgiIseToi4omkIix6OiLiiaUiLCJ7Ijoiz4AiLCJ8Ijoi4omgIiwifSI6IsKjIiwifiI6IsK3In0sdC5DSEFSU0VUUy5BPXsiIyI6IsKjIn0sdC5DSEFSU0VUUy5CPXZvaWQgMCx0LkNIQVJTRVRTWzRdPXsiIyI6IsKjIiwiQCI6IsK+IiwiWyI6ImlqIiwiXFwiOiLCvSIsIl0iOiJ8IiwieyI6IsKoIiwifCI6ImYiLCJ9IjoiwrwiLCJ+IjoiwrQifSx0LkNIQVJTRVRTLkM9dC5DSEFSU0VUU1s1XT17IlsiOiLDhCIsIlxcIjoiw5YiLCJdIjoiw4UiLCJeIjoiw5wiLCJgIjoiw6kiLCJ7Ijoiw6QiLCJ8Ijoiw7YiLCJ9Ijoiw6UiLCJ+Ijoiw7wifSx0LkNIQVJTRVRTLlI9eyIjIjoiwqMiLCJAIjoiw6AiLCJbIjoiwrAiLCJcXCI6IsOnIiwiXSI6IsKnIiwieyI6IsOpIiwifCI6IsO5IiwifSI6IsOoIiwifiI6IsKoIn0sdC5DSEFSU0VUUy5RPXsiQCI6IsOgIiwiWyI6IsOiIiwiXFwiOiLDpyIsIl0iOiLDqiIsIl4iOiLDriIsImAiOiLDtCIsInsiOiLDqSIsInwiOiLDuSIsIn0iOiLDqCIsIn4iOiLDuyJ9LHQuQ0hBUlNFVFMuSz17IkAiOiLCpyIsIlsiOiLDhCIsIlxcIjoiw5YiLCJdIjoiw5wiLCJ7Ijoiw6QiLCJ8Ijoiw7YiLCJ9Ijoiw7wiLCJ+Ijoiw58ifSx0LkNIQVJTRVRTLlk9eyIjIjoiwqMiLCJAIjoiwqciLCJbIjoiwrAiLCJcXCI6IsOnIiwiXSI6IsOpIiwiYCI6IsO5IiwieyI6IsOgIiwifCI6IsOyIiwifSI6IsOoIiwifiI6IsOsIn0sdC5DSEFSU0VUUy5FPXQuQ0hBUlNFVFNbNl09eyJAIjoiw4QiLCJbIjoiw4YiLCJcXCI6IsOYIiwiXSI6IsOFIiwiXiI6IsOcIiwiYCI6IsOkIiwieyI6IsOmIiwifCI6IsO4IiwifSI6IsOlIiwifiI6IsO8In0sdC5DSEFSU0VUUy5aPXsiIyI6IsKjIiwiQCI6IsKnIiwiWyI6IsKhIiwiXFwiOiLDkSIsIl0iOiLCvyIsInsiOiLCsCIsInwiOiLDsSIsIn0iOiLDpyJ9LHQuQ0hBUlNFVFMuSD10LkNIQVJTRVRTWzddPXsiQCI6IsOJIiwiWyI6IsOEIiwiXFwiOiLDliIsIl0iOiLDhSIsIl4iOiLDnCIsImAiOiLDqSIsInsiOiLDpCIsInwiOiLDtiIsIn0iOiLDpSIsIn4iOiLDvCJ9LHQuQ0hBUlNFVFNbIj0iXT17IiMiOiLDuSIsIkAiOiLDoCIsIlsiOiLDqSIsIlxcIjoiw6ciLCJdIjoiw6oiLCJeIjoiw64iLF86IsOoIiwiYCI6IsO0IiwieyI6IsOkIiwifCI6IsO2IiwifSI6IsO8IiwifiI6IsO7In19LDI1ODQ6KGUsdCk9Pnt2YXIgcixpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkMxX0VTQ0FQRUQ9dC5DMT10LkMwPXZvaWQgMCxmdW5jdGlvbihlKXtlLk5VTD0iXDAiLGUuU09IPSIBIixlLlNUWD0iAiIsZS5FVFg9IgMiLGUuRU9UPSIEIixlLkVOUT0iBSIsZS5BQ0s9IgYiLGUuQkVMPSIHIixlLkJTPSJcYiIsZS5IVD0iXHQiLGUuTEY9IlxuIixlLlZUPSJcdiIsZS5GRj0iXGYiLGUuQ1I9IlxyIixlLlNPPSIOIixlLlNJPSIPIixlLkRMRT0iECIsZS5EQzE9IhEiLGUuREMyPSISIixlLkRDMz0iEyIsZS5EQzQ9IhQiLGUuTkFLPSIVIixlLlNZTj0iFiIsZS5FVEI9IhciLGUuQ0FOPSIYIixlLkVNPSIZIixlLlNVQj0iGiIsZS5FU0M9IhsiLGUuRlM9IhwiLGUuR1M9Ih0iLGUuUlM9Ih4iLGUuVVM9Ih8iLGUuU1A9IiAiLGUuREVMPSJ/In0ocj10LkMwfHwodC5DMD17fSkpLChpPXQuQzF8fCh0LkMxPXt9KSkuUEFEPSLCgCIsaS5IT1A9IsKBIixpLkJQSD0iwoIiLGkuTkJIPSLCgyIsaS5JTkQ9IsKEIixpLk5FTD0iwoUiLGkuU1NBPSLChiIsaS5FU0E9IsKHIixpLkhUUz0iwogiLGkuSFRKPSLCiSIsaS5WVFM9IsKKIixpLlBMRD0iwosiLGkuUExVPSLCjCIsaS5SST0iwo0iLGkuU1MyPSLCjiIsaS5TUzM9IsKPIixpLkRDUz0iwpAiLGkuUFUxPSLCkSIsaS5QVTI9IsKSIixpLlNUUz0iwpMiLGkuQ0NIPSLClCIsaS5NVz0iwpUiLGkuU1BBPSLCliIsaS5FUEE9IsKXIixpLlNPUz0iwpgiLGkuU0dDST0iwpkiLGkuU0NJPSLCmiIsaS5DU0k9IsKbIixpLlNUPSLCnCIsaS5PU0M9IsKdIixpLlBNPSLCniIsaS5BUEM9IsKfIiwodC5DMV9FU0NBUEVEfHwodC5DMV9FU0NBUEVEPXt9KSkuU1Q9ci5FU0MrIlxcIn0sNzM5OTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZXZhbHVhdGVLZXlib2FyZEV2ZW50PXZvaWQgMDt2YXIgaT1yKDI1ODQpLG49ezQ4OlsiMCIsIikiXSw0OTpbIjEiLCIhIl0sNTA6WyIyIiwiQCJdLDUxOlsiMyIsIiMiXSw1MjpbIjQiLCIkIl0sNTM6WyI1IiwiJSJdLDU0OlsiNiIsIl4iXSw1NTpbIjciLCImIl0sNTY6WyI4IiwiKiJdLDU3OlsiOSIsIigiXSwxODY6WyI7IiwiOiJdLDE4NzpbIj0iLCIrIl0sMTg4OlsiLCIsIjwiXSwxODk6WyItIiwiXyJdLDE5MDpbIi4iLCI+Il0sMTkxOlsiLyIsIj8iXSwxOTI6WyJgIiwifiJdLDIxOTpbIlsiLCJ7Il0sMjIwOlsiXFwiLCJ8Il0sMjIxOlsiXSIsIn0iXSwyMjI6WyInIiwnIiddfTt0LmV2YWx1YXRlS2V5Ym9hcmRFdmVudD1mdW5jdGlvbihlLHQscixvKXt2YXIgcz17dHlwZTowLGNhbmNlbDohMSxrZXk6dm9pZCAwfSxhPShlLnNoaWZ0S2V5PzE6MCl8KGUuYWx0S2V5PzI6MCl8KGUuY3RybEtleT80OjApfChlLm1ldGFLZXk/ODowKTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDA6IlVJS2V5SW5wdXRVcEFycm93Ij09PWUua2V5P3Mua2V5PXQ/aS5DMC5FU0MrIk9BIjppLkMwLkVTQysiW0EiOiJVSUtleUlucHV0TGVmdEFycm93Ij09PWUua2V5P3Mua2V5PXQ/aS5DMC5FU0MrIk9EIjppLkMwLkVTQysiW0QiOiJVSUtleUlucHV0UmlnaHRBcnJvdyI9PT1lLmtleT9zLmtleT10P2kuQzAuRVNDKyJPQyI6aS5DMC5FU0MrIltDIjoiVUlLZXlJbnB1dERvd25BcnJvdyI9PT1lLmtleSYmKHMua2V5PXQ/aS5DMC5FU0MrIk9CIjppLkMwLkVTQysiW0IiKTticmVhaztjYXNlIDg6aWYoZS5zaGlmdEtleSl7cy5rZXk9aS5DMC5CUzticmVha31pZihlLmFsdEtleSl7cy5rZXk9aS5DMC5FU0MraS5DMC5ERUw7YnJlYWt9cy5rZXk9aS5DMC5ERUw7YnJlYWs7Y2FzZSA5OmlmKGUuc2hpZnRLZXkpe3Mua2V5PWkuQzAuRVNDKyJbWiI7YnJlYWt9cy5rZXk9aS5DMC5IVCxzLmNhbmNlbD0hMDticmVhaztjYXNlIDEzOnMua2V5PWUuYWx0S2V5P2kuQzAuRVNDK2kuQzAuQ1I6aS5DMC5DUixzLmNhbmNlbD0hMDticmVhaztjYXNlIDI3OnMua2V5PWkuQzAuRVNDLGUuYWx0S2V5JiYocy5rZXk9aS5DMC5FU0MraS5DMC5FU0MpLHMuY2FuY2VsPSEwO2JyZWFrO2Nhc2UgMzc6aWYoZS5tZXRhS2V5KWJyZWFrO2E/KHMua2V5PWkuQzAuRVNDKyJbMTsiKyhhKzEpKyJEIixzLmtleT09PWkuQzAuRVNDKyJbMTszRCImJihzLmtleT1pLkMwLkVTQysocj8iYiI6IlsxOzVEIikpKTpzLmtleT10P2kuQzAuRVNDKyJPRCI6aS5DMC5FU0MrIltEIjticmVhaztjYXNlIDM5OmlmKGUubWV0YUtleSlicmVhazthPyhzLmtleT1pLkMwLkVTQysiWzE7IisoYSsxKSsiQyIscy5rZXk9PT1pLkMwLkVTQysiWzE7M0MiJiYocy5rZXk9aS5DMC5FU0MrKHI/ImYiOiJbMTs1QyIpKSk6cy5rZXk9dD9pLkMwLkVTQysiT0MiOmkuQzAuRVNDKyJbQyI7YnJlYWs7Y2FzZSAzODppZihlLm1ldGFLZXkpYnJlYWs7YT8ocy5rZXk9aS5DMC5FU0MrIlsxOyIrKGErMSkrIkEiLHJ8fHMua2V5IT09aS5DMC5FU0MrIlsxOzNBInx8KHMua2V5PWkuQzAuRVNDKyJbMTs1QSIpKTpzLmtleT10P2kuQzAuRVNDKyJPQSI6aS5DMC5FU0MrIltBIjticmVhaztjYXNlIDQwOmlmKGUubWV0YUtleSlicmVhazthPyhzLmtleT1pLkMwLkVTQysiWzE7IisoYSsxKSsiQiIscnx8cy5rZXkhPT1pLkMwLkVTQysiWzE7M0IifHwocy5rZXk9aS5DMC5FU0MrIlsxOzVCIikpOnMua2V5PXQ/aS5DMC5FU0MrIk9CIjppLkMwLkVTQysiW0IiO2JyZWFrO2Nhc2UgNDU6ZS5zaGlmdEtleXx8ZS5jdHJsS2V5fHwocy5rZXk9aS5DMC5FU0MrIlsyfiIpO2JyZWFrO2Nhc2UgNDY6cy5rZXk9YT9pLkMwLkVTQysiWzM7IisoYSsxKSsifiI6aS5DMC5FU0MrIlszfiI7YnJlYWs7Y2FzZSAzNjpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJIIjp0P2kuQzAuRVNDKyJPSCI6aS5DMC5FU0MrIltIIjticmVhaztjYXNlIDM1OnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIkYiOnQ/aS5DMC5FU0MrIk9GIjppLkMwLkVTQysiW0YiO2JyZWFrO2Nhc2UgMzM6ZS5zaGlmdEtleT9zLnR5cGU9MjplLmN0cmxLZXk/cy5rZXk9aS5DMC5FU0MrIls1OyIrKGErMSkrIn4iOnMua2V5PWkuQzAuRVNDKyJbNX4iO2JyZWFrO2Nhc2UgMzQ6ZS5zaGlmdEtleT9zLnR5cGU9MzplLmN0cmxLZXk/cy5rZXk9aS5DMC5FU0MrIls2OyIrKGErMSkrIn4iOnMua2V5PWkuQzAuRVNDKyJbNn4iO2JyZWFrO2Nhc2UgMTEyOnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIlAiOmkuQzAuRVNDKyJPUCI7YnJlYWs7Y2FzZSAxMTM6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiUSI6aS5DMC5FU0MrIk9RIjticmVhaztjYXNlIDExNDpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJSIjppLkMwLkVTQysiT1IiO2JyZWFrO2Nhc2UgMTE1OnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIlMiOmkuQzAuRVNDKyJPUyI7YnJlYWs7Y2FzZSAxMTY6cy5rZXk9YT9pLkMwLkVTQysiWzE1OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMTV+IjticmVhaztjYXNlIDExNzpzLmtleT1hP2kuQzAuRVNDKyJbMTc7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsxN34iO2JyZWFrO2Nhc2UgMTE4OnMua2V5PWE/aS5DMC5FU0MrIlsxODsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzE4fiI7YnJlYWs7Y2FzZSAxMTk6cy5rZXk9YT9pLkMwLkVTQysiWzE5OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMTl+IjticmVhaztjYXNlIDEyMDpzLmtleT1hP2kuQzAuRVNDKyJbMjA7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsyMH4iO2JyZWFrO2Nhc2UgMTIxOnMua2V5PWE/aS5DMC5FU0MrIlsyMTsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzIxfiI7YnJlYWs7Y2FzZSAxMjI6cy5rZXk9YT9pLkMwLkVTQysiWzIzOyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMjN+IjticmVhaztjYXNlIDEyMzpzLmtleT1hP2kuQzAuRVNDKyJbMjQ7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsyNH4iO2JyZWFrO2RlZmF1bHQ6aWYoIWUuY3RybEtleXx8ZS5zaGlmdEtleXx8ZS5hbHRLZXl8fGUubWV0YUtleSlpZihyJiYhb3x8IWUuYWx0S2V5fHxlLm1ldGFLZXkpIXJ8fGUuYWx0S2V5fHxlLmN0cmxLZXl8fGUuc2hpZnRLZXl8fCFlLm1ldGFLZXk/ZS5rZXkmJiFlLmN0cmxLZXkmJiFlLmFsdEtleSYmIWUubWV0YUtleSYmZS5rZXlDb2RlPj00OCYmMT09PWUua2V5Lmxlbmd0aD9zLmtleT1lLmtleTplLmtleSYmZS5jdHJsS2V5JiYoIl8iPT09ZS5rZXkmJihzLmtleT1pLkMwLlVTKSwiQCI9PT1lLmtleSYmKHMua2V5PWkuQzAuTlVMKSk6NjU9PT1lLmtleUNvZGUmJihzLnR5cGU9MSk7ZWxzZXt2YXIgYz1uW2Uua2V5Q29kZV0sbD1udWxsPT1jP3ZvaWQgMDpjW2Uuc2hpZnRLZXk/MTowXTtpZihsKXMua2V5PWkuQzAuRVNDK2w7ZWxzZSBpZihlLmtleUNvZGU+PTY1JiZlLmtleUNvZGU8PTkwKXt2YXIgaD1lLmN0cmxLZXk/ZS5rZXlDb2RlLTY0OmUua2V5Q29kZSszMix1PVN0cmluZy5mcm9tQ2hhckNvZGUoaCk7ZS5zaGlmdEtleSYmKHU9dS50b1VwcGVyQ2FzZSgpKSxzLmtleT1pLkMwLkVTQyt1fWVsc2UiRGVhZCI9PT1lLmtleSYmZS5jb2RlLnN0YXJ0c1dpdGgoIktleSIpJiYodT1lLmNvZGUuc2xpY2UoMyw0KSxlLnNoaWZ0S2V5fHwodT11LnRvTG93ZXJDYXNlKCkpLHMua2V5PWkuQzAuRVNDK3Uscy5jYW5jZWw9ITApfWVsc2UgZS5rZXlDb2RlPj02NSYmZS5rZXlDb2RlPD05MD9zLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZS02NCk6MzI9PT1lLmtleUNvZGU/cy5rZXk9aS5DMC5OVUw6ZS5rZXlDb2RlPj01MSYmZS5rZXlDb2RlPD01NT9zLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZS01MSsyNyk6NTY9PT1lLmtleUNvZGU/cy5rZXk9aS5DMC5ERUw6MjE5PT09ZS5rZXlDb2RlP3Mua2V5PWkuQzAuRVNDOjIyMD09PWUua2V5Q29kZT9zLmtleT1pLkMwLkZTOjIyMT09PWUua2V5Q29kZSYmKHMua2V5PWkuQzAuR1MpfXJldHVybiBzfX0sNDgyOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVXRmOFRvVXRmMzI9dC5TdHJpbmdUb1V0ZjMyPXQudXRmMzJUb1N0cmluZz10LnN0cmluZ0Zyb21Db2RlUG9pbnQ9dm9pZCAwLHQuc3RyaW5nRnJvbUNvZGVQb2ludD1mdW5jdGlvbihlKXtyZXR1cm4gZT42NTUzNT8oZS09NjU1MzYsU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NisoZT4+MTApKStTdHJpbmcuZnJvbUNoYXJDb2RlKGUlMTAyNCs1NjMyMCkpOlN0cmluZy5mcm9tQ2hhckNvZGUoZSl9LHQudXRmMzJUb1N0cmluZz1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ciYmKHI9ZS5sZW5ndGgpO2Zvcih2YXIgaT0iIixuPXQ7bjxyOysrbil7dmFyIG89ZVtuXTtvPjY1NTM1PyhvLT02NTUzNixpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhvPj4xMCkpK1N0cmluZy5mcm9tQ2hhckNvZGUobyUxMDI0KzU2MzIwKSk6aSs9U3RyaW5nLmZyb21DaGFyQ29kZShvKX1yZXR1cm4gaX07dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5faW50ZXJpbT0wfXJldHVybiBlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2ludGVyaW09MH0sZS5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5sZW5ndGg7aWYoIXIpcmV0dXJuIDA7dmFyIGk9MCxuPTA7dGhpcy5faW50ZXJpbSYmKDU2MzIwPD0oYT1lLmNoYXJDb2RlQXQobisrKSkmJmE8PTU3MzQzP3RbaSsrXT0xMDI0Kih0aGlzLl9pbnRlcmltLTU1Mjk2KSthLTU2MzIwKzY1NTM2Oih0W2krK109dGhpcy5faW50ZXJpbSx0W2krK109YSksdGhpcy5faW50ZXJpbT0wKTtmb3IodmFyIG89bjtvPHI7KytvKXt2YXIgcz1lLmNoYXJDb2RlQXQobyk7aWYoNTUyOTY8PXMmJnM8PTU2MzE5KXtpZigrK28+PXIpcmV0dXJuIHRoaXMuX2ludGVyaW09cyxpO3ZhciBhOzU2MzIwPD0oYT1lLmNoYXJDb2RlQXQobykpJiZhPD01NzM0Mz90W2krK109MTAyNCoocy01NTI5NikrYS01NjMyMCs2NTUzNjoodFtpKytdPXMsdFtpKytdPWEpfWVsc2UgNjUyNzkhPT1zJiYodFtpKytdPXMpfXJldHVybiBpfSxlfSgpO3QuU3RyaW5nVG9VdGYzMj1yO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuaW50ZXJpbT1uZXcgVWludDhBcnJheSgzKX1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmludGVyaW0uZmlsbCgwKX0sZS5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5sZW5ndGg7aWYoIXIpcmV0dXJuIDA7dmFyIGksbixvLHMsYT0wLGM9MCxsPTA7aWYodGhpcy5pbnRlcmltWzBdKXt2YXIgaD0hMSx1PXRoaXMuaW50ZXJpbVswXTt1Jj0xOTI9PSgyMjQmdSk/MzE6MjI0PT0oMjQwJnUpPzE1Ojc7Zm9yKHZhciBmPTAsXz12b2lkIDA7KF89NjMmdGhpcy5pbnRlcmltWysrZl0pJiZmPDQ7KXU8PD02LHV8PV87Zm9yKHZhciBkPTE5Mj09KDIyNCZ0aGlzLmludGVyaW1bMF0pPzI6MjI0PT0oMjQwJnRoaXMuaW50ZXJpbVswXSk/Mzo0LHA9ZC1mO2w8cDspe2lmKGw+PXIpcmV0dXJuIDA7aWYoMTI4IT0oMTkyJihfPWVbbCsrXSkpKXtsLS0saD0hMDticmVha310aGlzLmludGVyaW1bZisrXT1fLHU8PD02LHV8PTYzJl99aHx8KDI9PT1kP3U8MTI4P2wtLTp0W2ErK109dTozPT09ZD91PDIwNDh8fHU+PTU1Mjk2JiZ1PD01NzM0M3x8NjUyNzk9PT11fHwodFthKytdPXUpOnU8NjU1MzZ8fHU+MTExNDExMXx8KHRbYSsrXT11KSksdGhpcy5pbnRlcmltLmZpbGwoMCl9Zm9yKHZhciB2PXItNCx5PWw7eTxyOyl7Zm9yKDshKCEoeTx2KXx8MTI4JihpPWVbeV0pfHwxMjgmKG49ZVt5KzFdKXx8MTI4JihvPWVbeSsyXSl8fDEyOCYocz1lW3krM10pKTspdFthKytdPWksdFthKytdPW4sdFthKytdPW8sdFthKytdPXMseSs9NDtpZigoaT1lW3krK10pPDEyOCl0W2ErK109aTtlbHNlIGlmKDE5Mj09KDIyNCZpKSl7aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksYTtpZigxMjghPSgxOTImKG49ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZigoYz0oMzEmaSk8PDZ8NjMmbik8MTI4KXt5LS07Y29udGludWV9dFthKytdPWN9ZWxzZSBpZigyMjQ9PSgyNDAmaSkpe2lmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLGE7aWYoMTI4IT0oMTkyJihuPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksdGhpcy5pbnRlcmltWzFdPW4sYTtpZigxMjghPSgxOTImKG89ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZigoYz0oMTUmaSk8PDEyfCg2MyZuKTw8Nnw2MyZvKTwyMDQ4fHxjPj01NTI5NiYmYzw9NTczNDN8fDY1Mjc5PT09Yyljb250aW51ZTt0W2ErK109Y31lbHNlIGlmKDI0MD09KDI0OCZpKSl7aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksYTtpZigxMjghPSgxOTImKG49ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSx0aGlzLmludGVyaW1bMV09bixhO2lmKDEyOCE9KDE5MiYobz1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLHRoaXMuaW50ZXJpbVsxXT1uLHRoaXMuaW50ZXJpbVsyXT1vLGE7aWYoMTI4IT0oMTkyJihzPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoKGM9KDcmaSk8PDE4fCg2MyZuKTw8MTJ8KDYzJm8pPDw2fDYzJnMpPDY1NTM2fHxjPjExMTQxMTEpY29udGludWU7dFthKytdPWN9fXJldHVybiBhfSxlfSgpO3QuVXRmOFRvVXRmMzI9aX0sMjI1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Vbmljb2RlVjY9dm9pZCAwO3ZhciBpLG49cig4MjczKSxvPVtbNzY4LDg3OV0sWzExNTUsMTE1OF0sWzExNjAsMTE2MV0sWzE0MjUsMTQ2OV0sWzE0NzEsMTQ3MV0sWzE0NzMsMTQ3NF0sWzE0NzYsMTQ3N10sWzE0NzksMTQ3OV0sWzE1MzYsMTUzOV0sWzE1NTIsMTU1N10sWzE2MTEsMTYzMF0sWzE2NDgsMTY0OF0sWzE3NTAsMTc2NF0sWzE3NjcsMTc2OF0sWzE3NzAsMTc3M10sWzE4MDcsMTgwN10sWzE4MDksMTgwOV0sWzE4NDAsMTg2Nl0sWzE5NTgsMTk2OF0sWzIwMjcsMjAzNV0sWzIzMDUsMjMwNl0sWzIzNjQsMjM2NF0sWzIzNjksMjM3Nl0sWzIzODEsMjM4MV0sWzIzODUsMjM4OF0sWzI0MDIsMjQwM10sWzI0MzMsMjQzM10sWzI0OTIsMjQ5Ml0sWzI0OTcsMjUwMF0sWzI1MDksMjUwOV0sWzI1MzAsMjUzMV0sWzI1NjEsMjU2Ml0sWzI2MjAsMjYyMF0sWzI2MjUsMjYyNl0sWzI2MzEsMjYzMl0sWzI2MzUsMjYzN10sWzI2NzIsMjY3M10sWzI2ODksMjY5MF0sWzI3NDgsMjc0OF0sWzI3NTMsMjc1N10sWzI3NTksMjc2MF0sWzI3NjUsMjc2NV0sWzI3ODYsMjc4N10sWzI4MTcsMjgxN10sWzI4NzYsMjg3Nl0sWzI4NzksMjg3OV0sWzI4ODEsMjg4M10sWzI4OTMsMjg5M10sWzI5MDIsMjkwMl0sWzI5NDYsMjk0Nl0sWzMwMDgsMzAwOF0sWzMwMjEsMzAyMV0sWzMxMzQsMzEzNl0sWzMxNDIsMzE0NF0sWzMxNDYsMzE0OV0sWzMxNTcsMzE1OF0sWzMyNjAsMzI2MF0sWzMyNjMsMzI2M10sWzMyNzAsMzI3MF0sWzMyNzYsMzI3N10sWzMyOTgsMzI5OV0sWzMzOTMsMzM5NV0sWzM0MDUsMzQwNV0sWzM1MzAsMzUzMF0sWzM1MzgsMzU0MF0sWzM1NDIsMzU0Ml0sWzM2MzMsMzYzM10sWzM2MzYsMzY0Ml0sWzM2NTUsMzY2Ml0sWzM3NjEsMzc2MV0sWzM3NjQsMzc2OV0sWzM3NzEsMzc3Ml0sWzM3ODQsMzc4OV0sWzM4NjQsMzg2NV0sWzM4OTMsMzg5M10sWzM4OTUsMzg5NV0sWzM4OTcsMzg5N10sWzM5NTMsMzk2Nl0sWzM5NjgsMzk3Ml0sWzM5NzQsMzk3NV0sWzM5ODQsMzk5MV0sWzM5OTMsNDAyOF0sWzQwMzgsNDAzOF0sWzQxNDEsNDE0NF0sWzQxNDYsNDE0Nl0sWzQxNTAsNDE1MV0sWzQxNTMsNDE1M10sWzQxODQsNDE4NV0sWzQ0NDgsNDYwN10sWzQ5NTksNDk1OV0sWzU5MDYsNTkwOF0sWzU5MzgsNTk0MF0sWzU5NzAsNTk3MV0sWzYwMDIsNjAwM10sWzYwNjgsNjA2OV0sWzYwNzEsNjA3N10sWzYwODYsNjA4Nl0sWzYwODksNjA5OV0sWzYxMDksNjEwOV0sWzYxNTUsNjE1N10sWzYzMTMsNjMxM10sWzY0MzIsNjQzNF0sWzY0MzksNjQ0MF0sWzY0NTAsNjQ1MF0sWzY0NTcsNjQ1OV0sWzY2NzksNjY4MF0sWzY5MTIsNjkxNV0sWzY5NjQsNjk2NF0sWzY5NjYsNjk3MF0sWzY5NzIsNjk3Ml0sWzY5NzgsNjk3OF0sWzcwMTksNzAyN10sWzc2MTYsNzYyNl0sWzc2NzgsNzY3OV0sWzgyMDMsODIwN10sWzgyMzQsODIzOF0sWzgyODgsODI5MV0sWzgyOTgsODMwM10sWzg0MDAsODQzMV0sWzEyMzMwLDEyMzM1XSxbMTI0NDEsMTI0NDJdLFs0MzAxNCw0MzAxNF0sWzQzMDE5LDQzMDE5XSxbNDMwNDUsNDMwNDZdLFs2NDI4Niw2NDI4Nl0sWzY1MDI0LDY1MDM5XSxbNjUwNTYsNjUwNTldLFs2NTI3OSw2NTI3OV0sWzY1NTI5LDY1NTMxXV0scz1bWzY4MDk3LDY4MDk5XSxbNjgxMDEsNjgxMDJdLFs2ODEwOCw2ODExMV0sWzY4MTUyLDY4MTU0XSxbNjgxNTksNjgxNTldLFsxMTkxNDMsMTE5MTQ1XSxbMTE5MTU1LDExOTE3MF0sWzExOTE3MywxMTkxNzldLFsxMTkyMTAsMTE5MjEzXSxbMTE5MzYyLDExOTM2NF0sWzkxNzUwNSw5MTc1MDVdLFs5MTc1MzYsOTE3NjMxXSxbOTE3NzYwLDkxNzk5OV1dLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7aWYodGhpcy52ZXJzaW9uPSI2IiwhaSl7aT1uZXcgVWludDhBcnJheSg2NTUzNiksKDAsbi5maWxsKShpLDEpLGlbMF09MCwoMCxuLmZpbGwpKGksMCwxLDMyKSwoMCxuLmZpbGwpKGksMCwxMjcsMTYwKSwoMCxuLmZpbGwpKGksMiw0MzUyLDQ0NDgpLGlbOTAwMV09MixpWzkwMDJdPTIsKDAsbi5maWxsKShpLDIsMTE5MDQsNDIxOTIpLGlbMTIzNTFdPTEsKDAsbi5maWxsKShpLDIsNDQwMzIsNTUyMDQpLCgwLG4uZmlsbCkoaSwyLDYzNzQ0LDY0MjU2KSwoMCxuLmZpbGwpKGksMiw2NTA0MCw2NTA1MCksKDAsbi5maWxsKShpLDIsNjUwNzIsNjUxMzYpLCgwLG4uZmlsbCkoaSwyLDY1MjgwLDY1Mzc3KSwoMCxuLmZpbGwpKGksMiw2NTUwNCw2NTUxMSk7Zm9yKHZhciBlPTA7ZTxvLmxlbmd0aDsrK2UpKDAsbi5maWxsKShpLDAsb1tlXVswXSxvW2VdWzFdKzEpfX1yZXR1cm4gZS5wcm90b3R5cGUud2N3aWR0aD1mdW5jdGlvbihlKXtyZXR1cm4gZTwzMj8wOmU8MTI3PzE6ZTw2NTUzNj9pW2VdOmZ1bmN0aW9uKGUsdCl7dmFyIHIsaT0wLG49dC5sZW5ndGgtMTtpZihlPHRbMF1bMF18fGU+dFtuXVsxXSlyZXR1cm4hMTtmb3IoO24+PWk7KWlmKGU+dFtyPWkrbj4+MV1bMV0paT1yKzE7ZWxzZXtpZighKGU8dFtyXVswXSkpcmV0dXJuITA7bj1yLTF9cmV0dXJuITF9KGUscyk/MDplPj0xMzEwNzImJmU8PTE5NjYwNXx8ZT49MTk2NjA4JiZlPD0yNjIxNDE/MjoxfSxlfSgpO3QuVW5pY29kZVY2PWF9LDU5ODE6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LldyaXRlQnVmZmVyPXZvaWQgMDt2YXIgaT1yKDg0NjApLG49InVuZGVmaW5lZCI9PXR5cGVvZiBxdWV1ZU1pY3JvdGFzaz9mdW5jdGlvbihlKXtQcm9taXNlLnJlc29sdmUoKS50aGVuKGUpfTpxdWV1ZU1pY3JvdGFzayxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9hY3Rpb249ZSx0aGlzLl93cml0ZUJ1ZmZlcj1bXSx0aGlzLl9jYWxsYmFja3M9W10sdGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MCx0aGlzLl9pc1N5bmNXcml0aW5nPSExLHRoaXMuX3N5bmNDYWxscz0wLHRoaXMuX29uV3JpdGVQYXJzZWQ9bmV3IGkuRXZlbnRFbWl0dGVyfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uV3JpdGVQYXJzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Xcml0ZVBhcnNlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS53cml0ZVN5bmM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10JiZ0aGlzLl9zeW5jQ2FsbHM+dCl0aGlzLl9zeW5jQ2FsbHM9MDtlbHNlIGlmKHRoaXMuX3BlbmRpbmdEYXRhKz1lLmxlbmd0aCx0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGUpLHRoaXMuX2NhbGxiYWNrcy5wdXNoKHZvaWQgMCksdGhpcy5fc3luY0NhbGxzKyssIXRoaXMuX2lzU3luY1dyaXRpbmcpe3ZhciByO2Zvcih0aGlzLl9pc1N5bmNXcml0aW5nPSEwO3I9dGhpcy5fd3JpdGVCdWZmZXIuc2hpZnQoKTspe3RoaXMuX2FjdGlvbihyKTt2YXIgaT10aGlzLl9jYWxsYmFja3Muc2hpZnQoKTtpJiZpKCl9dGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MjE0NzQ4MzY0Nyx0aGlzLl9pc1N5bmNXcml0aW5nPSExLHRoaXMuX3N5bmNDYWxscz0wfX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHRoaXMuX3BlbmRpbmdEYXRhPjVlNyl0aHJvdyBuZXcgRXJyb3IoIndyaXRlIGRhdGEgZGlzY2FyZGVkLCB1c2UgZmxvdyBjb250cm9sIHRvIGF2b2lkIGxvc2luZyBkYXRhIik7dGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RofHwodGhpcy5fYnVmZmVyT2Zmc2V0PTAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gci5faW5uZXJXcml0ZSgpfSkpKSx0aGlzLl9wZW5kaW5nRGF0YSs9ZS5sZW5ndGgsdGhpcy5fd3JpdGVCdWZmZXIucHVzaChlKSx0aGlzLl9jYWxsYmFja3MucHVzaCh0KX0sZS5wcm90b3R5cGUuX2lubmVyV3JpdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PXQmJih0PSEwKTtmb3IodmFyIGk9ZXx8RGF0ZS5ub3coKTt0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg+dGhpcy5fYnVmZmVyT2Zmc2V0Oyl7dmFyIG89dGhpcy5fd3JpdGVCdWZmZXJbdGhpcy5fYnVmZmVyT2Zmc2V0XSxzPXRoaXMuX2FjdGlvbihvLHQpO2lmKHMpcmV0dXJuIHZvaWQgcy5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4oKGZ1bmN0aW9uKCl7dGhyb3cgZX0pKSxQcm9taXNlLnJlc29sdmUoITEpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBEYXRlLm5vdygpLWk+PTEyP3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2lubmVyV3JpdGUoMCxlKX0pKTpyLl9pbm5lcldyaXRlKGksZSl9KSk7dmFyIGE9dGhpcy5fY2FsbGJhY2tzW3RoaXMuX2J1ZmZlck9mZnNldF07aWYoYSYmYSgpLHRoaXMuX2J1ZmZlck9mZnNldCsrLHRoaXMuX3BlbmRpbmdEYXRhLT1vLmxlbmd0aCxEYXRlLm5vdygpLWk+PTEyKWJyZWFrfXRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aD50aGlzLl9idWZmZXJPZmZzZXQ/KHRoaXMuX2J1ZmZlck9mZnNldD41MCYmKHRoaXMuX3dyaXRlQnVmZmVyPXRoaXMuX3dyaXRlQnVmZmVyLnNsaWNlKHRoaXMuX2J1ZmZlck9mZnNldCksdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrcy5zbGljZSh0aGlzLl9idWZmZXJPZmZzZXQpLHRoaXMuX2J1ZmZlck9mZnNldD0wKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiByLl9pbm5lcldyaXRlKCl9KSkpOih0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg9MCx0aGlzLl9jYWxsYmFja3MubGVuZ3RoPTAsdGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MCksdGhpcy5fb25Xcml0ZVBhcnNlZC5maXJlKCl9LGV9KCk7dC5Xcml0ZUJ1ZmZlcj1vfSw1OTQxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC50b1JnYlN0cmluZz10LnBhcnNlQ29sb3I9dm9pZCAwO3ZhciBpPS9eKFtcZGEtZl0pXC8oW1xkYS1mXSlcLyhbXGRhLWZdKSR8XihbXGRhLWZdezJ9KVwvKFtcZGEtZl17Mn0pXC8oW1xkYS1mXXsyfSkkfF4oW1xkYS1mXXszfSlcLyhbXGRhLWZdezN9KVwvKFtcZGEtZl17M30pJHxeKFtcZGEtZl17NH0pXC8oW1xkYS1mXXs0fSlcLyhbXGRhLWZdezR9KSQvLG49L15bXGRhLWZdKyQvO2Z1bmN0aW9uIG8oZSx0KXt2YXIgcj1lLnRvU3RyaW5nKDE2KSxpPXIubGVuZ3RoPDI/IjAiK3I6cjtzd2l0Y2godCl7Y2FzZSA0OnJldHVybiByWzBdO2Nhc2UgODpyZXR1cm4gaTtjYXNlIDEyOnJldHVybihpK2kpLnNsaWNlKDAsMyk7ZGVmYXVsdDpyZXR1cm4gaStpfX10LnBhcnNlQ29sb3I9ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9ZS50b0xvd2VyQ2FzZSgpO2lmKDA9PT10LmluZGV4T2YoInJnYjoiKSl7dD10LnNsaWNlKDQpO3ZhciByPWkuZXhlYyh0KTtpZihyKXt2YXIgbz1yWzFdPzE1OnJbNF0/MjU1OnJbN10/NDA5NTo2NTUzNTtyZXR1cm5bTWF0aC5yb3VuZChwYXJzZUludChyWzFdfHxyWzRdfHxyWzddfHxyWzEwXSwxNikvbyoyNTUpLE1hdGgucm91bmQocGFyc2VJbnQoclsyXXx8cls1XXx8cls4XXx8clsxMV0sMTYpL28qMjU1KSxNYXRoLnJvdW5kKHBhcnNlSW50KHJbM118fHJbNl18fHJbOV18fHJbMTJdLDE2KS9vKjI1NSldfX1lbHNlIGlmKDA9PT10LmluZGV4T2YoIiMiKSYmKHQ9dC5zbGljZSgxKSxuLmV4ZWModCkmJlszLDYsOSwxMl0uaW5jbHVkZXModC5sZW5ndGgpKSl7Zm9yKHZhciBzPXQubGVuZ3RoLzMsYT1bMCwwLDBdLGM9MDtjPDM7KytjKXt2YXIgbD1wYXJzZUludCh0LnNsaWNlKHMqYyxzKmMrcyksMTYpO2FbY109MT09PXM/bDw8NDoyPT09cz9sOjM9PT1zP2w+PjQ6bD4+OH1yZXR1cm4gYX19fSx0LnRvUmdiU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MTYpO3ZhciBpPXIoZSwzKSxuPWlbMF0scz1pWzFdLGE9aVsyXTtyZXR1cm4icmdiOiIrbyhuLHQpKyIvIitvKHMsdCkrIi8iK28oYSx0KX19LDU3NzA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5QQVlMT0FEX0xJTUlUPXZvaWQgMCx0LlBBWUxPQURfTElNSVQ9MWU3fSw2MzUxOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5EY3NIYW5kbGVyPXQuRGNzUGFyc2VyPXZvaWQgMDt2YXIgaT1yKDQ4Miksbj1yKDg3NDIpLG89cig1NzcwKSxzPVtdLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9hY3RpdmU9cyx0aGlzLl9pZGVudD0wLHRoaXMuX2hhbmRsZXJGYj1mdW5jdGlvbigpe30sdGhpcy5fc3RhY2s9e3BhdXNlZDohMSxsb29wUG9zaXRpb246MCxmYWxsVGhyb3VnaDohMX19cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9oYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2hhbmRsZXJGYj1mdW5jdGlvbigpe30sdGhpcy5fYWN0aXZlPXN9LGUucHJvdG90eXBlLnJlZ2lzdGVySGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXRoaXMuX2hhbmRsZXJzW2VdJiYodGhpcy5faGFuZGxlcnNbZV09W10pO3ZhciByPXRoaXMuX2hhbmRsZXJzW2VdO3JldHVybiByLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZT1yLmluZGV4T2YodCk7LTEhPT1lJiZyLnNwbGljZShlLDEpfX19LGUucHJvdG90eXBlLmNsZWFySGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyc1tlXSYmZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2VdfSxlLnByb3RvdHlwZS5zZXRIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlckZiPWV9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYWN0aXZlLmxlbmd0aClmb3IodmFyIGU9dGhpcy5fc3RhY2sucGF1c2VkP3RoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xOnRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzLl9hY3RpdmVbZV0udW5ob29rKCExKTt0aGlzLl9zdGFjay5wYXVzZWQ9ITEsdGhpcy5fYWN0aXZlPXMsdGhpcy5faWRlbnQ9MH0sZS5wcm90b3R5cGUuaG9vaz1mdW5jdGlvbihlLHQpe2lmKHRoaXMucmVzZXQoKSx0aGlzLl9pZGVudD1lLHRoaXMuX2FjdGl2ZT10aGlzLl9oYW5kbGVyc1tlXXx8cyx0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgcj10aGlzLl9hY3RpdmUubGVuZ3RoLTE7cj49MDtyLS0pdGhpcy5fYWN0aXZlW3JdLmhvb2sodCk7ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsIkhPT0siLHQpfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciBuPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtuPj0wO24tLSl0aGlzLl9hY3RpdmVbbl0ucHV0KGUsdCxyKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwiUFVUIiwoMCxpLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSl9LGUucHJvdG90eXBlLnVuaG9vaz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PSEwKSx0aGlzLl9hY3RpdmUubGVuZ3RoKXt2YXIgcj0hMSxpPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMSxuPSExO2lmKHRoaXMuX3N0YWNrLnBhdXNlZCYmKGk9dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTEscj10LG49dGhpcy5fc3RhY2suZmFsbFRocm91Z2gsdGhpcy5fc3RhY2sucGF1c2VkPSExKSwhbiYmITE9PT1yKXtmb3IoO2k+PTAmJiEwIT09KHI9dGhpcy5fYWN0aXZlW2ldLnVuaG9vayhlKSk7aS0tKWlmKHIgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9zdGFjay5wYXVzZWQ9ITAsdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uPWksdGhpcy5fc3RhY2suZmFsbFRocm91Z2g9ITEscjtpLS19Zm9yKDtpPj0wO2ktLSlpZigocj10aGlzLl9hY3RpdmVbaV0udW5ob29rKCExKSlpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249aSx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMCxyfWVsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCJVTkhPT0siLGUpO3RoaXMuX2FjdGl2ZT1zLHRoaXMuX2lkZW50PTB9LGV9KCk7dC5EY3NQYXJzZXI9YTt2YXIgYz1uZXcgbi5QYXJhbXM7Yy5hZGRQYXJhbSgwKTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5faGFuZGxlcj1lLHRoaXMuX2RhdGE9IiIsdGhpcy5fcGFyYW1zPWMsdGhpcy5faGl0TGltaXQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLmhvb2s9ZnVuY3Rpb24oZSl7dGhpcy5fcGFyYW1zPWUubGVuZ3RoPjF8fGUucGFyYW1zWzBdP2UuY2xvbmUoKTpjLHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITF9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7dGhpcy5faGl0TGltaXR8fCh0aGlzLl9kYXRhKz0oMCxpLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSx0aGlzLl9kYXRhLmxlbmd0aD5vLlBBWUxPQURfTElNSVQmJih0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSEwKSl9LGUucHJvdG90eXBlLnVuaG9vaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ITE7aWYodGhpcy5faGl0TGltaXQpcj0hMTtlbHNlIGlmKGUmJihyPXRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSx0aGlzLl9wYXJhbXMpKWluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gci50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fcGFyYW1zPWMsdC5fZGF0YT0iIix0Ll9oaXRMaW1pdD0hMSxlfSkpO3JldHVybiB0aGlzLl9wYXJhbXM9Yyx0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExLHJ9LGV9KCk7dC5EY3NIYW5kbGVyPWx9LDIwMTU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRXNjYXBlU2VxdWVuY2VQYXJzZXI9dC5WVDUwMF9UUkFOU0lUSU9OX1RBQkxFPXQuVHJhbnNpdGlvblRhYmxlPXZvaWQgMDt2YXIgbz1yKDg0NCkscz1yKDgyNzMpLGE9cig4NzQyKSxjPXIoNjI0MiksbD1yKDYzNTEpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMudGFibGU9bmV3IFVpbnQ4QXJyYXkoZSl9cmV0dXJuIGUucHJvdG90eXBlLnNldERlZmF1bHQ9ZnVuY3Rpb24oZSx0KXsoMCxzLmZpbGwpKHRoaXMudGFibGUsZTw8NHx0KX0sZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMudGFibGVbdDw8OHxlXT1yPDw0fGl9LGUucHJvdG90eXBlLmFkZE1hbnk9ZnVuY3Rpb24oZSx0LHIsaSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy50YWJsZVt0PDw4fGVbbl1dPXI8PDR8aX0sZX0oKTt0LlRyYW5zaXRpb25UYWJsZT1oO3ZhciB1PTE2MDt0LlZUNTAwX1RSQU5TSVRJT05fVEFCTEU9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgaCg0MDk1KSx0PUFycmF5LmFwcGx5KG51bGwsQXJyYXkoMjU2KSkubWFwKChmdW5jdGlvbihlLHQpe3JldHVybiB0fSkpLHI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5zbGljZShlLHIpfSxpPXIoMzIsMTI3KSxuPXIoMCwyNCk7bi5wdXNoKDI1KSxuLnB1c2guYXBwbHkobixyKDI4LDMyKSk7dmFyIG8scz1yKDAsMTQpO2ZvcihvIGluIGUuc2V0RGVmYXVsdCgxLDApLGUuYWRkTWFueShpLDAsMiwwKSxzKWUuYWRkTWFueShbMjQsMjYsMTUzLDE1NF0sbywzLDApLGUuYWRkTWFueShyKDEyOCwxNDQpLG8sMywwKSxlLmFkZE1hbnkocigxNDQsMTUyKSxvLDMsMCksZS5hZGQoMTU2LG8sMCwwKSxlLmFkZCgyNyxvLDExLDEpLGUuYWRkKDE1NyxvLDQsOCksZS5hZGRNYW55KFsxNTIsMTU4LDE1OV0sbywwLDcpLGUuYWRkKDE1NSxvLDExLDMpLGUuYWRkKDE0NCxvLDExLDkpO3JldHVybiBlLmFkZE1hbnkobiwwLDMsMCksZS5hZGRNYW55KG4sMSwzLDEpLGUuYWRkKDEyNywxLDAsMSksZS5hZGRNYW55KG4sOCwwLDgpLGUuYWRkTWFueShuLDMsMywzKSxlLmFkZCgxMjcsMywwLDMpLGUuYWRkTWFueShuLDQsMyw0KSxlLmFkZCgxMjcsNCwwLDQpLGUuYWRkTWFueShuLDYsMyw2KSxlLmFkZE1hbnkobiw1LDMsNSksZS5hZGQoMTI3LDUsMCw1KSxlLmFkZE1hbnkobiwyLDMsMiksZS5hZGQoMTI3LDIsMCwyKSxlLmFkZCg5MywxLDQsOCksZS5hZGRNYW55KGksOCw1LDgpLGUuYWRkKDEyNyw4LDUsOCksZS5hZGRNYW55KFsxNTYsMjcsMjQsMjYsN10sOCw2LDApLGUuYWRkTWFueShyKDI4LDMyKSw4LDAsOCksZS5hZGRNYW55KFs4OCw5NCw5NV0sMSwwLDcpLGUuYWRkTWFueShpLDcsMCw3KSxlLmFkZE1hbnkobiw3LDAsNyksZS5hZGQoMTU2LDcsMCwwKSxlLmFkZCgxMjcsNywwLDcpLGUuYWRkKDkxLDEsMTEsMyksZS5hZGRNYW55KHIoNjQsMTI3KSwzLDcsMCksZS5hZGRNYW55KHIoNDgsNjApLDMsOCw0KSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSwzLDksNCksZS5hZGRNYW55KHIoNDgsNjApLDQsOCw0KSxlLmFkZE1hbnkocig2NCwxMjcpLDQsNywwKSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSw0LDAsNiksZS5hZGRNYW55KHIoMzIsNjQpLDYsMCw2KSxlLmFkZCgxMjcsNiwwLDYpLGUuYWRkTWFueShyKDY0LDEyNyksNiwwLDApLGUuYWRkTWFueShyKDMyLDQ4KSwzLDksNSksZS5hZGRNYW55KHIoMzIsNDgpLDUsOSw1KSxlLmFkZE1hbnkocig0OCw2NCksNSwwLDYpLGUuYWRkTWFueShyKDY0LDEyNyksNSw3LDApLGUuYWRkTWFueShyKDMyLDQ4KSw0LDksNSksZS5hZGRNYW55KHIoMzIsNDgpLDEsOSwyKSxlLmFkZE1hbnkocigzMiw0OCksMiw5LDIpLGUuYWRkTWFueShyKDQ4LDEyNyksMiwxMCwwKSxlLmFkZE1hbnkocig0OCw4MCksMSwxMCwwKSxlLmFkZE1hbnkocig4MSw4OCksMSwxMCwwKSxlLmFkZE1hbnkoWzg5LDkwLDkyXSwxLDEwLDApLGUuYWRkTWFueShyKDk2LDEyNyksMSwxMCwwKSxlLmFkZCg4MCwxLDExLDkpLGUuYWRkTWFueShuLDksMCw5KSxlLmFkZCgxMjcsOSwwLDkpLGUuYWRkTWFueShyKDI4LDMyKSw5LDAsOSksZS5hZGRNYW55KHIoMzIsNDgpLDksOSwxMiksZS5hZGRNYW55KHIoNDgsNjApLDksOCwxMCksZS5hZGRNYW55KFs2MCw2MSw2Miw2M10sOSw5LDEwKSxlLmFkZE1hbnkobiwxMSwwLDExKSxlLmFkZE1hbnkocigzMiwxMjgpLDExLDAsMTEpLGUuYWRkTWFueShyKDI4LDMyKSwxMSwwLDExKSxlLmFkZE1hbnkobiwxMCwwLDEwKSxlLmFkZCgxMjcsMTAsMCwxMCksZS5hZGRNYW55KHIoMjgsMzIpLDEwLDAsMTApLGUuYWRkTWFueShyKDQ4LDYwKSwxMCw4LDEwKSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSwxMCwwLDExKSxlLmFkZE1hbnkocigzMiw0OCksMTAsOSwxMiksZS5hZGRNYW55KG4sMTIsMCwxMiksZS5hZGQoMTI3LDEyLDAsMTIpLGUuYWRkTWFueShyKDI4LDMyKSwxMiwwLDEyKSxlLmFkZE1hbnkocigzMiw0OCksMTIsOSwxMiksZS5hZGRNYW55KHIoNDgsNjQpLDEyLDAsMTEpLGUuYWRkTWFueShyKDY0LDEyNyksMTIsMTIsMTMpLGUuYWRkTWFueShyKDY0LDEyNyksMTAsMTIsMTMpLGUuYWRkTWFueShyKDY0LDEyNyksOSwxMiwxMyksZS5hZGRNYW55KG4sMTMsMTMsMTMpLGUuYWRkTWFueShpLDEzLDEzLDEzKSxlLmFkZCgxMjcsMTMsMCwxMyksZS5hZGRNYW55KFsyNywxNTYsMjQsMjZdLDEzLDE0LDApLGUuYWRkKHUsMCwyLDApLGUuYWRkKHUsOCw1LDgpLGUuYWRkKHUsNiwwLDYpLGUuYWRkKHUsMTEsMCwxMSksZS5hZGQodSwxMywxMywxMyksZX0oKTt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHIpe3ZvaWQgMD09PXImJihyPXQuVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSk7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl90cmFuc2l0aW9ucz1yLGkuX3BhcnNlU3RhY2s9e3N0YXRlOjAsaGFuZGxlcnM6W10saGFuZGxlclBvczowLHRyYW5zaXRpb246MCxjaHVua1BvczowfSxpLmluaXRpYWxTdGF0ZT0wLGkuY3VycmVudFN0YXRlPWkuaW5pdGlhbFN0YXRlLGkuX3BhcmFtcz1uZXcgYS5QYXJhbXMsaS5fcGFyYW1zLmFkZFBhcmFtKDApLGkuX2NvbGxlY3Q9MCxpLnByZWNlZGluZ0NvZGVwb2ludD0wLGkuX3ByaW50SGFuZGxlckZiPWZ1bmN0aW9uKGUsdCxyKXt9LGkuX2V4ZWN1dGVIYW5kbGVyRmI9ZnVuY3Rpb24oZSl7fSxpLl9jc2lIYW5kbGVyRmI9ZnVuY3Rpb24oZSx0KXt9LGkuX2VzY0hhbmRsZXJGYj1mdW5jdGlvbihlKXt9LGkuX2Vycm9ySGFuZGxlckZiPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxpLl9wcmludEhhbmRsZXI9aS5fcHJpbnRIYW5kbGVyRmIsaS5fZXhlY3V0ZUhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksaS5fY3NpSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSxpLl9lc2NIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGkuX29zY1BhcnNlcj1uZXcgYy5Pc2NQYXJzZXIsaS5fZGNzUGFyc2VyPW5ldyBsLkRjc1BhcnNlcixpLl9lcnJvckhhbmRsZXI9aS5fZXJyb3JIYW5kbGVyRmIsaS5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJcXCJ9LChmdW5jdGlvbigpe3JldHVybiEwfSkpLGl9cmV0dXJuIG4ocixlKSxyLnByb3RvdHlwZS5faWRlbnRpZmllcj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PVs2NCwxMjZdKTt2YXIgcj0wO2lmKGUucHJlZml4KXtpZihlLnByZWZpeC5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoIm9ubHkgb25lIGJ5dGUgYXMgcHJlZml4IHN1cHBvcnRlZCIpO2lmKChyPWUucHJlZml4LmNoYXJDb2RlQXQoMCkpJiY2MD5yfHxyPjYzKXRocm93IG5ldyBFcnJvcigicHJlZml4IG11c3QgYmUgaW4gcmFuZ2UgMHgzYyAuLiAweDNmIil9aWYoZS5pbnRlcm1lZGlhdGVzKXtpZihlLmludGVybWVkaWF0ZXMubGVuZ3RoPjIpdGhyb3cgbmV3IEVycm9yKCJvbmx5IHR3byBieXRlcyBhcyBpbnRlcm1lZGlhdGVzIGFyZSBzdXBwb3J0ZWQiKTtmb3IodmFyIGk9MDtpPGUuaW50ZXJtZWRpYXRlcy5sZW5ndGg7KytpKXt2YXIgbj1lLmludGVybWVkaWF0ZXMuY2hhckNvZGVBdChpKTtpZigzMj5ufHxuPjQ3KXRocm93IG5ldyBFcnJvcigiaW50ZXJtZWRpYXRlIG11c3QgYmUgaW4gcmFuZ2UgMHgyMCAuLiAweDJmIik7cjw8PTgscnw9bn19aWYoMSE9PWUuZmluYWwubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiZmluYWwgbXVzdCBiZSBhIHNpbmdsZSBieXRlIik7dmFyIG89ZS5maW5hbC5jaGFyQ29kZUF0KDApO2lmKHRbMF0+b3x8bz50WzFdKXRocm93IG5ldyBFcnJvcigiZmluYWwgbXVzdCBiZSBpbiByYW5nZSAiK3RbMF0rIiAuLiAiK3RbMV0pO3JldHVybihyPDw9OCl8b30sci5wcm90b3R5cGUuaWRlbnRUb1N0cmluZz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W107ZTspdC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpKSxlPj49ODtyZXR1cm4gdC5yZXZlcnNlKCkuam9pbigiIil9LHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jc2lIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V4ZWN1dGVIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2VzY0hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fb3NjUGFyc2VyLmRpc3Bvc2UoKSx0aGlzLl9kY3NQYXJzZXIuZGlzcG9zZSgpfSxyLnByb3RvdHlwZS5zZXRQcmludEhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fcHJpbnRIYW5kbGVyPWV9LHIucHJvdG90eXBlLmNsZWFyUHJpbnRIYW5kbGVyPWZ1bmN0aW9uKCl7dGhpcy5fcHJpbnRIYW5kbGVyPXRoaXMuX3ByaW50SGFuZGxlckZifSxyLnByb3RvdHlwZS5yZWdpc3RlckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pO3ZvaWQgMD09PXRoaXMuX2VzY0hhbmRsZXJzW3JdJiYodGhpcy5fZXNjSGFuZGxlcnNbcl09W10pO3ZhciBpPXRoaXMuX2VzY0hhbmRsZXJzW3JdO3JldHVybiBpLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZT1pLmluZGV4T2YodCk7LTEhPT1lJiZpLnNwbGljZShlLDEpfX19LHIucHJvdG90eXBlLmNsZWFyRXNjSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pXSYmZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoZSxbNDgsMTI2XSldfSxyLnByb3RvdHlwZS5zZXRFc2NIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fZXNjSGFuZGxlckZiPWV9LHIucHJvdG90eXBlLnNldEV4ZWN1dGVIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2UuY2hhckNvZGVBdCgwKV09dH0sci5wcm90b3R5cGUuY2xlYXJFeGVjdXRlSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9leGVjdXRlSGFuZGxlcnNbZS5jaGFyQ29kZUF0KDApXSYmZGVsZXRlIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tlLmNoYXJDb2RlQXQoMCldfSxyLnByb3RvdHlwZS5zZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2V4ZWN1dGVIYW5kbGVyRmI9ZX0sci5wcm90b3R5cGUucmVnaXN0ZXJDc2lIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5faWRlbnRpZmllcihlKTt2b2lkIDA9PT10aGlzLl9jc2lIYW5kbGVyc1tyXSYmKHRoaXMuX2NzaUhhbmRsZXJzW3JdPVtdKTt2YXIgaT10aGlzLl9jc2lIYW5kbGVyc1tyXTtyZXR1cm4gaS5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9aS5pbmRleE9mKHQpOy0xIT09ZSYmaS5zcGxpY2UoZSwxKX19fSxyLnByb3RvdHlwZS5jbGVhckNzaUhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihlKV0mJmRlbGV0ZSB0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUpXX0sci5wcm90b3R5cGUuc2V0Q3NpSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2NzaUhhbmRsZXJGYj1lfSxyLnByb3RvdHlwZS5yZWdpc3RlckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGNzUGFyc2VyLnJlZ2lzdGVySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGUpLHQpfSxyLnByb3RvdHlwZS5jbGVhckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fZGNzUGFyc2VyLmNsZWFySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGUpKX0sci5wcm90b3R5cGUuc2V0RGNzSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2Rjc1BhcnNlci5zZXRIYW5kbGVyRmFsbGJhY2soZSl9LHIucHJvdG90eXBlLnJlZ2lzdGVyT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9vc2NQYXJzZXIucmVnaXN0ZXJIYW5kbGVyKGUsdCl9LHIucHJvdG90eXBlLmNsZWFyT3NjSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9vc2NQYXJzZXIuY2xlYXJIYW5kbGVyKGUpfSxyLnByb3RvdHlwZS5zZXRPc2NIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fb3NjUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhlKX0sci5wcm90b3R5cGUuc2V0RXJyb3JIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2Vycm9ySGFuZGxlcj1lfSxyLnByb3RvdHlwZS5jbGVhckVycm9ySGFuZGxlcj1mdW5jdGlvbigpe3RoaXMuX2Vycm9ySGFuZGxlcj10aGlzLl9lcnJvckhhbmRsZXJGYn0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTdGF0ZT10aGlzLmluaXRpYWxTdGF0ZSx0aGlzLl9vc2NQYXJzZXIucmVzZXQoKSx0aGlzLl9kY3NQYXJzZXIucmVzZXQoKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTAsMCE9PXRoaXMuX3BhcnNlU3RhY2suc3RhdGUmJih0aGlzLl9wYXJzZVN0YWNrLnN0YXRlPTIsdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz1bXSl9LHIucHJvdG90eXBlLl9wcmVzZXJ2ZVN0YWNrPWZ1bmN0aW9uKGUsdCxyLGksbil7dGhpcy5fcGFyc2VTdGFjay5zdGF0ZT1lLHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM9dCx0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3M9cix0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb249aSx0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zPW59LHIucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPTAsbz0wLHM9MDtpZih0aGlzLl9wYXJzZVN0YWNrLnN0YXRlKWlmKDI9PT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MCxzPXRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MrMTtlbHNle2lmKHZvaWQgMD09PXJ8fDE9PT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXRocm93IHRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MSxuZXcgRXJyb3IoImltcHJvcGVyIGNvbnRpbnVhdGlvbiBkdWUgdG8gcHJldmlvdXMgYXN5bmMgaGFuZGxlciwgZ2l2aW5nIHVwIHBhcnNpbmciKTt2YXIgYT10aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzLGM9dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zLTE7c3dpdGNoKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUpe2Nhc2UgMzppZighMT09PXImJmM+LTEpZm9yKDtjPj0wJiYhMCE9PShpPWFbY10odGhpcy5fcGFyYW1zKSk7Yy0tKWlmKGkgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3M9YyxpO3RoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM9W107YnJlYWs7Y2FzZSA0OmlmKCExPT09ciYmYz4tMSlmb3IoO2M+PTAmJiEwIT09KGk9YVtjXSgpKTtjLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcz1jLGk7dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz1bXTticmVhaztjYXNlIDY6aWYobj1lW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdLGk9dGhpcy5fZGNzUGFyc2VyLnVuaG9vaygyNCE9PW4mJjI2IT09bixyKSlyZXR1cm4gaTsyNz09PW4mJih0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb258PTEpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTA7YnJlYWs7Y2FzZSA1OmlmKG49ZVt0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zXSxpPXRoaXMuX29zY1BhcnNlci5lbmQoMjQhPT1uJiYyNiE9PW4scikpcmV0dXJuIGk7Mjc9PT1uJiYodGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9ufD0xKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wfXRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MCxzPXRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MrMSx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wLHRoaXMuY3VycmVudFN0YXRlPTE1JnRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbn1mb3IodmFyIGw9cztsPHQ7KytsKXtzd2l0Y2gobj1lW2xdLChvPXRoaXMuX3RyYW5zaXRpb25zLnRhYmxlW3RoaXMuY3VycmVudFN0YXRlPDw4fChuPDE2MD9uOnUpXSk+PjQpe2Nhc2UgMjpmb3IodmFyIGg9bCsxOzsrK2gpe2lmKGg+PXR8fChuPWVbaF0pPDMyfHxuPjEyNiYmbjx1KXt0aGlzLl9wcmludEhhbmRsZXIoZSxsLGgpLGw9aC0xO2JyZWFrfWlmKCsraD49dHx8KG49ZVtoXSk8MzJ8fG4+MTI2JiZuPHUpe3RoaXMuX3ByaW50SGFuZGxlcihlLGwsaCksbD1oLTE7YnJlYWt9aWYoKytoPj10fHwobj1lW2hdKTwzMnx8bj4xMjYmJm48dSl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsbCxoKSxsPWgtMTticmVha31pZigrK2g+PXR8fChuPWVbaF0pPDMyfHxuPjEyNiYmbjx1KXt0aGlzLl9wcmludEhhbmRsZXIoZSxsLGgpLGw9aC0xO2JyZWFrfX1icmVhaztjYXNlIDM6dGhpcy5fZXhlY3V0ZUhhbmRsZXJzW25dP3RoaXMuX2V4ZWN1dGVIYW5kbGVyc1tuXSgpOnRoaXMuX2V4ZWN1dGVIYW5kbGVyRmIobiksdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MDticmVhaztjYXNlIDA6YnJlYWs7Y2FzZSAxOmlmKHRoaXMuX2Vycm9ySGFuZGxlcih7cG9zaXRpb246bCxjb2RlOm4sY3VycmVudFN0YXRlOnRoaXMuY3VycmVudFN0YXRlLGNvbGxlY3Q6dGhpcy5fY29sbGVjdCxwYXJhbXM6dGhpcy5fcGFyYW1zLGFib3J0OiExfSkuYWJvcnQpcmV0dXJuO2JyZWFrO2Nhc2UgNzpmb3IodmFyIGY9KGE9dGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5fY29sbGVjdDw8OHxuXSk/YS5sZW5ndGgtMTotMTtmPj0wJiYhMCE9PShpPWFbZl0odGhpcy5fcGFyYW1zKSk7Zi0tKWlmKGkgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDMsYSxmLG8sbCksaTtmPDAmJnRoaXMuX2NzaUhhbmRsZXJGYih0aGlzLl9jb2xsZWN0PDw4fG4sdGhpcy5fcGFyYW1zKSx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wO2JyZWFrO2Nhc2UgODpkb3tzd2l0Y2gobil7Y2FzZSA1OTp0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7YnJlYWs7Y2FzZSA1ODp0aGlzLl9wYXJhbXMuYWRkU3ViUGFyYW0oLTEpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fcGFyYW1zLmFkZERpZ2l0KG4tNDgpfX13aGlsZSgrK2w8dCYmKG49ZVtsXSk+NDcmJm48NjApO2wtLTticmVhaztjYXNlIDk6dGhpcy5fY29sbGVjdDw8PTgsdGhpcy5fY29sbGVjdHw9bjticmVhaztjYXNlIDEwOmZvcih2YXIgXz10aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9jb2xsZWN0PDw4fG5dLGQ9Xz9fLmxlbmd0aC0xOi0xO2Q+PTAmJiEwIT09KGk9X1tkXSgpKTtkLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soNCxfLGQsbyxsKSxpO2Q8MCYmdGhpcy5fZXNjSGFuZGxlckZiKHRoaXMuX2NvbGxlY3Q8PDh8biksdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MDticmVhaztjYXNlIDExOnRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTA7YnJlYWs7Y2FzZSAxMjp0aGlzLl9kY3NQYXJzZXIuaG9vayh0aGlzLl9jb2xsZWN0PDw4fG4sdGhpcy5fcGFyYW1zKTticmVhaztjYXNlIDEzOmZvcih2YXIgcD1sKzE7OysrcClpZihwPj10fHwyND09PShuPWVbcF0pfHwyNj09PW58fDI3PT09bnx8bj4xMjcmJm48dSl7dGhpcy5fZGNzUGFyc2VyLnB1dChlLGwscCksbD1wLTE7YnJlYWt9YnJlYWs7Y2FzZSAxNDppZihpPXRoaXMuX2Rjc1BhcnNlci51bmhvb2soMjQhPT1uJiYyNiE9PW4pKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDYsW10sMCxvLGwpLGk7Mjc9PT1uJiYob3w9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MCx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wO2JyZWFrO2Nhc2UgNDp0aGlzLl9vc2NQYXJzZXIuc3RhcnQoKTticmVhaztjYXNlIDU6Zm9yKHZhciB2PWwrMTs7disrKWlmKHY+PXR8fChuPWVbdl0pPDMyfHxuPjEyNyYmbjx1KXt0aGlzLl9vc2NQYXJzZXIucHV0KGUsbCx2KSxsPXYtMTticmVha31icmVhaztjYXNlIDY6aWYoaT10aGlzLl9vc2NQYXJzZXIuZW5kKDI0IT09biYmMjYhPT1uKSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjayg1LFtdLDAsbyxsKSxpOzI3PT09biYmKG98PTEpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTAsdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MH10aGlzLmN1cnJlbnRTdGF0ZT0xNSZvfX0scn0oby5EaXNwb3NhYmxlKTt0LkVzY2FwZVNlcXVlbmNlUGFyc2VyPWZ9LDYyNDI6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk9zY0hhbmRsZXI9dC5Pc2NQYXJzZXI9dm9pZCAwO3ZhciBpPXIoNTc3MCksbj1yKDQ4Miksbz1bXSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3N0YXRlPTAsdGhpcy5fYWN0aXZlPW8sdGhpcy5faWQ9LTEsdGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9oYW5kbGVyRmI9ZnVuY3Rpb24oKXt9LHRoaXMuX3N0YWNrPXtwYXVzZWQ6ITEsbG9vcFBvc2l0aW9uOjAsZmFsbFRocm91Z2g6ITF9fXJldHVybiBlLnByb3RvdHlwZS5yZWdpc3RlckhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10aGlzLl9oYW5kbGVyc1tlXSYmKHRoaXMuX2hhbmRsZXJzW2VdPVtdKTt2YXIgcj10aGlzLl9oYW5kbGVyc1tlXTtyZXR1cm4gci5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9ci5pbmRleE9mKHQpOy0xIT09ZSYmci5zcGxpY2UoZSwxKX19fSxlLnByb3RvdHlwZS5jbGVhckhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlcnNbZV0mJmRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tlXX0sZS5wcm90b3R5cGUuc2V0SGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXJGYj1lfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9oYW5kbGVyRmI9ZnVuY3Rpb24oKXt9LHRoaXMuX2FjdGl2ZT1vfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2lmKDI9PT10aGlzLl9zdGF0ZSlmb3IodmFyIGU9dGhpcy5fc3RhY2sucGF1c2VkP3RoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xOnRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzLl9hY3RpdmVbZV0uZW5kKCExKTt0aGlzLl9zdGFjay5wYXVzZWQ9ITEsdGhpcy5fYWN0aXZlPW8sdGhpcy5faWQ9LTEsdGhpcy5fc3RhdGU9MH0sZS5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYWN0aXZlPXRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXXx8byx0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgZT10aGlzLl9hY3RpdmUubGVuZ3RoLTE7ZT49MDtlLS0pdGhpcy5fYWN0aXZlW2VdLnN0YXJ0KCk7ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsIlNUQVJUIil9LGUucHJvdG90eXBlLl9wdXQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciBpPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtpPj0wO2ktLSl0aGlzLl9hY3RpdmVbaV0ucHV0KGUsdCxyKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwiUFVUIiwoMCxuLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSl9LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5yZXNldCgpLHRoaXMuX3N0YXRlPTF9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7aWYoMyE9PXRoaXMuX3N0YXRlKXtpZigxPT09dGhpcy5fc3RhdGUpZm9yKDt0PHI7KXt2YXIgaT1lW3QrK107aWYoNTk9PT1pKXt0aGlzLl9zdGF0ZT0yLHRoaXMuX3N0YXJ0KCk7YnJlYWt9aWYoaTw0OHx8NTc8aSlyZXR1cm4gdm9pZCh0aGlzLl9zdGF0ZT0zKTstMT09PXRoaXMuX2lkJiYodGhpcy5faWQ9MCksdGhpcy5faWQ9MTAqdGhpcy5faWQraS00OH0yPT09dGhpcy5fc3RhdGUmJnItdD4wJiZ0aGlzLl9wdXQoZSx0LHIpfX0sZS5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ITApLDAhPT10aGlzLl9zdGF0ZSl7aWYoMyE9PXRoaXMuX3N0YXRlKWlmKDE9PT10aGlzLl9zdGF0ZSYmdGhpcy5fc3RhcnQoKSx0aGlzLl9hY3RpdmUubGVuZ3RoKXt2YXIgcj0hMSxpPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMSxuPSExO2lmKHRoaXMuX3N0YWNrLnBhdXNlZCYmKGk9dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTEscj10LG49dGhpcy5fc3RhY2suZmFsbFRocm91Z2gsdGhpcy5fc3RhY2sucGF1c2VkPSExKSwhbiYmITE9PT1yKXtmb3IoO2k+PTAmJiEwIT09KHI9dGhpcy5fYWN0aXZlW2ldLmVuZChlKSk7aS0tKWlmKHIgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9zdGFjay5wYXVzZWQ9ITAsdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uPWksdGhpcy5fc3RhY2suZmFsbFRocm91Z2g9ITEscjtpLS19Zm9yKDtpPj0wO2ktLSlpZigocj10aGlzLl9hY3RpdmVbaV0uZW5kKCExKSlpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249aSx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMCxyfWVsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCJFTkQiLGUpO3RoaXMuX2FjdGl2ZT1vLHRoaXMuX2lkPS0xLHRoaXMuX3N0YXRlPTB9fSxlfSgpO3QuT3NjUGFyc2VyPXM7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2hhbmRsZXI9ZSx0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExfXJldHVybiBlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITF9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7dGhpcy5faGl0TGltaXR8fCh0aGlzLl9kYXRhKz0oMCxuLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSx0aGlzLl9kYXRhLmxlbmd0aD5pLlBBWUxPQURfTElNSVQmJih0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSEwKSl9LGUucHJvdG90eXBlLmVuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ITE7aWYodGhpcy5faGl0TGltaXQpcj0hMTtlbHNlIGlmKGUmJihyPXRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSkpaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiByLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9kYXRhPSIiLHQuX2hpdExpbWl0PSExLGV9KSk7cmV0dXJuIHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITEscn0sZX0oKTt0Lk9zY0hhbmRsZXI9YX0sODc0MjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlBhcmFtcz12b2lkIDA7dmFyIHI9MjE0NzQ4MzY0NyxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2lmKHZvaWQgMD09PWUmJihlPTMyKSx2b2lkIDA9PT10JiYodD0zMiksdGhpcy5tYXhMZW5ndGg9ZSx0aGlzLm1heFN1YlBhcmFtc0xlbmd0aD10LHQ+MjU2KXRocm93IG5ldyBFcnJvcigibWF4U3ViUGFyYW1zTGVuZ3RoIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAyNTYiKTt0aGlzLnBhcmFtcz1uZXcgSW50MzJBcnJheShlKSx0aGlzLmxlbmd0aD0wLHRoaXMuX3N1YlBhcmFtcz1uZXcgSW50MzJBcnJheSh0KSx0aGlzLl9zdWJQYXJhbXNMZW5ndGg9MCx0aGlzLl9zdWJQYXJhbXNJZHg9bmV3IFVpbnQxNkFycmF5KGUpLHRoaXMuX3JlamVjdERpZ2l0cz0hMSx0aGlzLl9yZWplY3RTdWJEaWdpdHM9ITEsdGhpcy5fZGlnaXRJc1N1Yj0hMX1yZXR1cm4gZS5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7dmFyIHI9bmV3IGU7aWYoIXQubGVuZ3RoKXJldHVybiByO2Zvcih2YXIgaT1BcnJheS5pc0FycmF5KHRbMF0pPzE6MDtpPHQubGVuZ3RoOysraSl7dmFyIG49dFtpXTtpZihBcnJheS5pc0FycmF5KG4pKWZvcih2YXIgbz0wO288bi5sZW5ndGg7KytvKXIuYWRkU3ViUGFyYW0obltvXSk7ZWxzZSByLmFkZFBhcmFtKG4pfXJldHVybiByfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBlKHRoaXMubWF4TGVuZ3RoLHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKTtyZXR1cm4gdC5wYXJhbXMuc2V0KHRoaXMucGFyYW1zKSx0Lmxlbmd0aD10aGlzLmxlbmd0aCx0Ll9zdWJQYXJhbXMuc2V0KHRoaXMuX3N1YlBhcmFtcyksdC5fc3ViUGFyYW1zTGVuZ3RoPXRoaXMuX3N1YlBhcmFtc0xlbmd0aCx0Ll9zdWJQYXJhbXNJZHguc2V0KHRoaXMuX3N1YlBhcmFtc0lkeCksdC5fcmVqZWN0RGlnaXRzPXRoaXMuX3JlamVjdERpZ2l0cyx0Ll9yZWplY3RTdWJEaWdpdHM9dGhpcy5fcmVqZWN0U3ViRGlnaXRzLHQuX2RpZ2l0SXNTdWI9dGhpcy5fZGlnaXRJc1N1Yix0fSxlLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PHRoaXMubGVuZ3RoOysrdCl7ZS5wdXNoKHRoaXMucGFyYW1zW3RdKTt2YXIgcj10aGlzLl9zdWJQYXJhbXNJZHhbdF0+PjgsaT0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W3RdO2ktcj4wJiZlLnB1c2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fc3ViUGFyYW1zLHIsaSkpfXJldHVybiBlfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMubGVuZ3RoPTAsdGhpcy5fc3ViUGFyYW1zTGVuZ3RoPTAsdGhpcy5fcmVqZWN0RGlnaXRzPSExLHRoaXMuX3JlamVjdFN1YkRpZ2l0cz0hMSx0aGlzLl9kaWdpdElzU3ViPSExfSxlLnByb3RvdHlwZS5hZGRQYXJhbT1mdW5jdGlvbihlKXtpZih0aGlzLl9kaWdpdElzU3ViPSExLHRoaXMubGVuZ3RoPj10aGlzLm1heExlbmd0aCl0aGlzLl9yZWplY3REaWdpdHM9ITA7ZWxzZXtpZihlPC0xKXRocm93IG5ldyBFcnJvcigidmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMuX3N1YlBhcmFtc0lkeFt0aGlzLmxlbmd0aF09dGhpcy5fc3ViUGFyYW1zTGVuZ3RoPDw4fHRoaXMuX3N1YlBhcmFtc0xlbmd0aCx0aGlzLnBhcmFtc1t0aGlzLmxlbmd0aCsrXT1lPnI/cjplfX0sZS5wcm90b3R5cGUuYWRkU3ViUGFyYW09ZnVuY3Rpb24oZSl7aWYodGhpcy5fZGlnaXRJc1N1Yj0hMCx0aGlzLmxlbmd0aClpZih0aGlzLl9yZWplY3REaWdpdHN8fHRoaXMuX3N1YlBhcmFtc0xlbmd0aD49dGhpcy5tYXhTdWJQYXJhbXNMZW5ndGgpdGhpcy5fcmVqZWN0U3ViRGlnaXRzPSEwO2Vsc2V7aWYoZTwtMSl0aHJvdyBuZXcgRXJyb3IoInZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLl9zdWJQYXJhbXNbdGhpcy5fc3ViUGFyYW1zTGVuZ3RoKytdPWU+cj9yOmUsdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoLTFdKyt9fSxlLnByb3RvdHlwZS5oYXNTdWJQYXJhbXM9ZnVuY3Rpb24oZSl7cmV0dXJuKDI1NSZ0aGlzLl9zdWJQYXJhbXNJZHhbZV0pLSh0aGlzLl9zdWJQYXJhbXNJZHhbZV0+PjgpPjB9LGUucHJvdG90eXBlLmdldFN1YlBhcmFtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdWJQYXJhbXNJZHhbZV0+Pjgscj0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W2VdO3JldHVybiByLXQ+MD90aGlzLl9zdWJQYXJhbXMuc3ViYXJyYXkodCxyKTpudWxsfSxlLnByb3RvdHlwZS5nZXRTdWJQYXJhbXNBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30sdD0wO3Q8dGhpcy5sZW5ndGg7Kyt0KXt2YXIgcj10aGlzLl9zdWJQYXJhbXNJZHhbdF0+PjgsaT0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W3RdO2ktcj4wJiYoZVt0XT10aGlzLl9zdWJQYXJhbXMuc2xpY2UocixpKSl9cmV0dXJuIGV9LGUucHJvdG90eXBlLmFkZERpZ2l0PWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCEodGhpcy5fcmVqZWN0RGlnaXRzfHwhKHQ9dGhpcy5fZGlnaXRJc1N1Yj90aGlzLl9zdWJQYXJhbXNMZW5ndGg6dGhpcy5sZW5ndGgpfHx0aGlzLl9kaWdpdElzU3ViJiZ0aGlzLl9yZWplY3RTdWJEaWdpdHMpKXt2YXIgaT10aGlzLl9kaWdpdElzU3ViP3RoaXMuX3N1YlBhcmFtczp0aGlzLnBhcmFtcyxuPWlbdC0xXTtpW3QtMV09fm4/TWF0aC5taW4oMTAqbitlLHIpOmV9fSxlfSgpO3QuUGFyYW1zPWl9LDU3NDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5BZGRvbk1hbmFnZXI9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2FkZG9ucz1bXX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9hZGRvbnMubGVuZ3RoLTE7ZT49MDtlLS0pdGhpcy5fYWRkb25zW2VdLmluc3RhbmNlLmRpc3Bvc2UoKX0sZS5wcm90b3R5cGUubG9hZEFkZG9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPXtpbnN0YW5jZTp0LGRpc3Bvc2U6dC5kaXNwb3NlLGlzRGlzcG9zZWQ6ITF9O3RoaXMuX2FkZG9ucy5wdXNoKGkpLHQuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiByLl93cmFwcGVkQWRkb25EaXNwb3NlKGkpfSx0LmFjdGl2YXRlKGUpfSxlLnByb3RvdHlwZS5fd3JhcHBlZEFkZG9uRGlzcG9zZT1mdW5jdGlvbihlKXtpZighZS5pc0Rpc3Bvc2VkKXtmb3IodmFyIHQ9LTEscj0wO3I8dGhpcy5fYWRkb25zLmxlbmd0aDtyKyspaWYodGhpcy5fYWRkb25zW3JdPT09ZSl7dD1yO2JyZWFrfWlmKC0xPT09dCl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBkaXNwb3NlIGFuIGFkZG9uIHRoYXQgaGFzIG5vdCBiZWVuIGxvYWRlZCIpO2UuaXNEaXNwb3NlZD0hMCxlLmRpc3Bvc2UuYXBwbHkoZS5pbnN0YW5jZSksdGhpcy5fYWRkb25zLnNwbGljZSh0LDEpfX0sZX0oKTt0LkFkZG9uTWFuYWdlcj1yfSw4NzcxOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJBcGlWaWV3PXZvaWQgMDt2YXIgaT1yKDM3ODUpLG49cig1MTEpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fYnVmZmVyPWUsdGhpcy50eXBlPXR9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2J1ZmZlcj1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY3Vyc29yWSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIueX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImN1cnNvclgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2aWV3cG9ydFkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnlkaXNwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYmFzZVkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnliYXNlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0TGluZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9idWZmZXIubGluZXMuZ2V0KGUpO2lmKHQpcmV0dXJuIG5ldyBpLkJ1ZmZlckxpbmVBcGlWaWV3KHQpfSxlLnByb3RvdHlwZS5nZXROdWxsQ2VsbD1mdW5jdGlvbigpe3JldHVybiBuZXcgbi5DZWxsRGF0YX0sZX0oKTt0LkJ1ZmZlckFwaVZpZXc9b30sMzc4NTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyTGluZUFwaVZpZXc9dm9pZCAwO3ZhciBpPXIoNTExKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9saW5lPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNXcmFwcGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmUuaXNXcmFwcGVkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmUubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldENlbGw9ZnVuY3Rpb24oZSx0KXtpZighKGU8MHx8ZT49dGhpcy5fbGluZS5sZW5ndGgpKXJldHVybiB0Pyh0aGlzLl9saW5lLmxvYWRDZWxsKGUsdCksdCk6dGhpcy5fbGluZS5sb2FkQ2VsbChlLG5ldyBpLkNlbGxEYXRhKX0sZS5wcm90b3R5cGUudHJhbnNsYXRlVG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9saW5lLnRyYW5zbGF0ZVRvU3RyaW5nKGUsdCxyKX0sZX0oKTt0LkJ1ZmZlckxpbmVBcGlWaWV3PW59LDgyODU6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlck5hbWVzcGFjZUFwaT12b2lkIDA7dmFyIGk9cig4NzcxKSxuPXIoODQ2MCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9dGhpczt0aGlzLl9jb3JlPWUsdGhpcy5fb25CdWZmZXJDaGFuZ2U9bmV3IG4uRXZlbnRFbWl0dGVyLHRoaXMuX25vcm1hbD1uZXcgaS5CdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwsIm5vcm1hbCIpLHRoaXMuX2FsdGVybmF0ZT1uZXcgaS5CdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5hbHQsImFsdGVybmF0ZSIpLHRoaXMuX2NvcmUuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbigpe3JldHVybiB0Ll9vbkJ1ZmZlckNoYW5nZS5maXJlKHQuYWN0aXZlKX0pKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkJ1ZmZlckNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJ1ZmZlckNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZSIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX2NvcmUuYnVmZmVycy5hY3RpdmU9PT10aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKXJldHVybiB0aGlzLm5vcm1hbDtpZih0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlPT09dGhpcy5fY29yZS5idWZmZXJzLmFsdClyZXR1cm4gdGhpcy5hbHRlcm5hdGU7dGhyb3cgbmV3IEVycm9yKCJBY3RpdmUgYnVmZmVyIGlzIG5laXRoZXIgbm9ybWFsIG5vciBhbHRlcm5hdGUiKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm5vcm1hbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3JtYWwuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFsdGVybmF0ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHRlcm5hdGUuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlfSgpO3QuQnVmZmVyTmFtZXNwYWNlQXBpPW99LDc5NzU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5QYXJzZXJBcGk9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb3JlPWV9cmV0dXJuIGUucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLChmdW5jdGlvbihlKXtyZXR1cm4gdChlLnRvQXJyYXkoKSl9KSl9LGUucHJvdG90eXBlLmFkZENzaUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckNzaUhhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUucmVnaXN0ZXJEY3NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJEY3NIYW5kbGVyKGUsKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQoZSxyLnRvQXJyYXkoKSl9KSl9LGUucHJvdG90eXBlLmFkZERjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckRjc0hhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUucmVnaXN0ZXJFc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLmFkZEVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckVzY0hhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUucmVnaXN0ZXJPc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLmFkZE9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KX0sZX0oKTt0LlBhcnNlckFwaT1yfSw3MDkwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVW5pY29kZUFwaT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NvcmU9ZX1yZXR1cm4gZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY29yZS51bmljb2RlU2VydmljZS5yZWdpc3RlcihlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2ZXJzaW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnZlcnNpb25zfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlVmVyc2lvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb259LHNldDpmdW5jdGlvbihlKXt0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb249ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlfSgpO3QuVW5pY29kZUFwaT1yfSw3NDQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyU2VydmljZT10Lk1JTklNVU1fUk9XUz10Lk1JTklNVU1fQ09MUz12b2lkIDA7dmFyIGE9cigyNTg1KSxjPXIoNTI5NSksbD1yKDg0NjApLGg9cig4NDQpO3QuTUlOSU1VTV9DT0xTPTIsdC5NSU5JTVVNX1JPV1M9MTt2YXIgdT1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fb3B0aW9uc1NlcnZpY2U9cixpLmlzVXNlclNjcm9sbGluZz0hMSxpLl9vblJlc2l6ZT1uZXcgbC5FdmVudEVtaXR0ZXIsaS5fb25TY3JvbGw9bmV3IGwuRXZlbnRFbWl0dGVyLGkuY29scz1NYXRoLm1heChyLnJhd09wdGlvbnMuY29sc3x8MCx0Lk1JTklNVU1fQ09MUyksaS5yb3dzPU1hdGgubWF4KHIucmF3T3B0aW9ucy5yb3dzfHwwLHQuTUlOSU1VTV9ST1dTKSxpLmJ1ZmZlcnM9bmV3IGMuQnVmZmVyU2V0KHIsaSksaX1yZXR1cm4gbihyLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSwib25SZXNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXNpemUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLCJvblNjcm9sbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNjcm9sbC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsImJ1ZmZlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5idWZmZXJzLmRpc3Bvc2UoKX0sci5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5jb2xzPWUsdGhpcy5yb3dzPXQsdGhpcy5idWZmZXJzLnJlc2l6ZShlLHQpLHRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKHRoaXMuY29scyksdGhpcy5fb25SZXNpemUuZmlyZSh7Y29sczplLHJvd3M6dH0pfSxyLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuYnVmZmVycy5yZXNldCgpLHRoaXMuaXNVc2VyU2Nyb2xsaW5nPSExfSxyLnByb3RvdHlwZS5zY3JvbGw9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0hMSk7dmFyIHIsaT10aGlzLmJ1ZmZlcjsocj10aGlzLl9jYWNoZWRCbGFua0xpbmUpJiZyLmxlbmd0aD09PXRoaXMuY29scyYmci5nZXRGZygwKT09PWUuZmcmJnIuZ2V0QmcoMCk9PT1lLmJnfHwocj1pLmdldEJsYW5rTGluZShlLHQpLHRoaXMuX2NhY2hlZEJsYW5rTGluZT1yKSxyLmlzV3JhcHBlZD10O3ZhciBuPWkueWJhc2UraS5zY3JvbGxUb3Asbz1pLnliYXNlK2kuc2Nyb2xsQm90dG9tO2lmKDA9PT1pLnNjcm9sbFRvcCl7dmFyIHM9aS5saW5lcy5pc0Z1bGw7bz09PWkubGluZXMubGVuZ3RoLTE/cz9pLmxpbmVzLnJlY3ljbGUoKS5jb3B5RnJvbShyKTppLmxpbmVzLnB1c2goci5jbG9uZSgpKTppLmxpbmVzLnNwbGljZShvKzEsMCxyLmNsb25lKCkpLHM/dGhpcy5pc1VzZXJTY3JvbGxpbmcmJihpLnlkaXNwPU1hdGgubWF4KGkueWRpc3AtMSwwKSk6KGkueWJhc2UrKyx0aGlzLmlzVXNlclNjcm9sbGluZ3x8aS55ZGlzcCsrKX1lbHNle3ZhciBhPW8tbisxO2kubGluZXMuc2hpZnRFbGVtZW50cyhuKzEsYS0xLC0xKSxpLmxpbmVzLnNldChvLHIuY2xvbmUoKSl9dGhpcy5pc1VzZXJTY3JvbGxpbmd8fChpLnlkaXNwPWkueWJhc2UpLHRoaXMuX29uU2Nyb2xsLmZpcmUoaS55ZGlzcCl9LHIucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLmJ1ZmZlcjtpZihlPDApe2lmKDA9PT1pLnlkaXNwKXJldHVybjt0aGlzLmlzVXNlclNjcm9sbGluZz0hMH1lbHNlIGUraS55ZGlzcD49aS55YmFzZSYmKHRoaXMuaXNVc2VyU2Nyb2xsaW5nPSExKTt2YXIgbj1pLnlkaXNwO2kueWRpc3A9TWF0aC5tYXgoTWF0aC5taW4oaS55ZGlzcCtlLGkueWJhc2UpLDApLG4hPT1pLnlkaXNwJiYodHx8dGhpcy5fb25TY3JvbGwuZmlyZShpLnlkaXNwKSl9LHIucHJvdG90eXBlLnNjcm9sbFBhZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsTGluZXMoZSoodGhpcy5yb3dzLTEpKX0sci5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbExpbmVzKC10aGlzLmJ1ZmZlci55ZGlzcCl9LHIucHJvdG90eXBlLnNjcm9sbFRvQm90dG9tPWZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxMaW5lcyh0aGlzLmJ1ZmZlci55YmFzZS10aGlzLmJ1ZmZlci55ZGlzcCl9LHIucHJvdG90eXBlLnNjcm9sbFRvTGluZT1mdW5jdGlvbihlKXt2YXIgdD1lLXRoaXMuYnVmZmVyLnlkaXNwOzAhPT10JiZ0aGlzLnNjcm9sbExpbmVzKHQpfSxvKFtzKDAsYS5JT3B0aW9uc1NlcnZpY2UpXSxyKX0oaC5EaXNwb3NhYmxlKTt0LkJ1ZmZlclNlcnZpY2U9dX0sNzk5NDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNoYXJzZXRTZXJ2aWNlPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmdsZXZlbD0wLHRoaXMuX2NoYXJzZXRzPVtdfXJldHVybiBlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuY2hhcnNldD12b2lkIDAsdGhpcy5fY2hhcnNldHM9W10sdGhpcy5nbGV2ZWw9MH0sZS5wcm90b3R5cGUuc2V0Z0xldmVsPWZ1bmN0aW9uKGUpe3RoaXMuZ2xldmVsPWUsdGhpcy5jaGFyc2V0PXRoaXMuX2NoYXJzZXRzW2VdfSxlLnByb3RvdHlwZS5zZXRnQ2hhcnNldD1mdW5jdGlvbihlLHQpe3RoaXMuX2NoYXJzZXRzW2VdPXQsdGhpcy5nbGV2ZWw9PT1lJiYodGhpcy5jaGFyc2V0PXQpfSxlfSgpO3QuQ2hhcnNldFNlcnZpY2U9cn0sMTc1MzpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvcmVNb3VzZVNlcnZpY2U9dm9pZCAwO3ZhciBzPXIoMjU4NSksYT1yKDg0NjApLGM9e05PTkU6e2V2ZW50czowLHJlc3RyaWN0OmZ1bmN0aW9uKCl7cmV0dXJuITF9fSxYMTA6e2V2ZW50czoxLHJlc3RyaWN0OmZ1bmN0aW9uKGUpe3JldHVybiA0IT09ZS5idXR0b24mJjE9PT1lLmFjdGlvbiYmKGUuY3RybD0hMSxlLmFsdD0hMSxlLnNoaWZ0PSExLCEwKX19LFZUMjAwOntldmVudHM6MTkscmVzdHJpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIDMyIT09ZS5hY3Rpb259fSxEUkFHOntldmVudHM6MjMscmVzdHJpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIDMyIT09ZS5hY3Rpb258fDMhPT1lLmJ1dHRvbn19LEFOWTp7ZXZlbnRzOjMxLHJlc3RyaWN0OmZ1bmN0aW9uKGUpe3JldHVybiEwfX19O2Z1bmN0aW9uIGwoZSx0KXt2YXIgcj0oZS5jdHJsPzE2OjApfChlLnNoaWZ0PzQ6MCl8KGUuYWx0Pzg6MCk7cmV0dXJuIDQ9PT1lLmJ1dHRvbj8ocnw9NjQscnw9ZS5hY3Rpb24pOihyfD0zJmUuYnV0dG9uLDQmZS5idXR0b24mJihyfD02NCksOCZlLmJ1dHRvbiYmKHJ8PTEyOCksMzI9PT1lLmFjdGlvbj9yfD0zMjowIT09ZS5hY3Rpb258fHR8fChyfD0zKSkscn12YXIgaD1TdHJpbmcuZnJvbUNoYXJDb2RlLHU9e0RFRkFVTFQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W2woZSwhMSkrMzIsZS5jb2wrMzIsZS5yb3crMzJdO3JldHVybiB0WzBdPjI1NXx8dFsxXT4yNTV8fHRbMl0+MjU1PyIiOiIbW00iK2godFswXSkraCh0WzFdKStoKHRbMl0pfSxTR1I6ZnVuY3Rpb24oZSl7dmFyIHQ9MD09PWUuYWN0aW9uJiY0IT09ZS5idXR0b24/Im0iOiJNIjtyZXR1cm4iG1s8IitsKGUsITApKyI7IitlLmNvbCsiOyIrZS5yb3crdH19LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIHIsaSxuLHM7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2NvcmVTZXJ2aWNlPXQsdGhpcy5fcHJvdG9jb2xzPXt9LHRoaXMuX2VuY29kaW5ncz17fSx0aGlzLl9hY3RpdmVQcm90b2NvbD0iIix0aGlzLl9hY3RpdmVFbmNvZGluZz0iIix0aGlzLl9vblByb3RvY29sQ2hhbmdlPW5ldyBhLkV2ZW50RW1pdHRlcix0aGlzLl9sYXN0RXZlbnQ9bnVsbDt0cnl7Zm9yKHZhciBsPW8oT2JqZWN0LmtleXMoYykpLGg9bC5uZXh0KCk7IWguZG9uZTtoPWwubmV4dCgpKXt2YXIgZj1oLnZhbHVlO3RoaXMuYWRkUHJvdG9jb2woZixjW2ZdKX19Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aCYmIWguZG9uZSYmKGk9bC5yZXR1cm4pJiZpLmNhbGwobCl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXRyeXtmb3IodmFyIF89byhPYmplY3Qua2V5cyh1KSksZD1fLm5leHQoKTshZC5kb25lO2Q9Xy5uZXh0KCkpe3ZhciBwPWQudmFsdWU7dGhpcy5hZGRFbmNvZGluZyhwLHVbcF0pfX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYocz1fLnJldHVybikmJnMuY2FsbChfKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19dGhpcy5yZXNldCgpfXJldHVybiBlLnByb3RvdHlwZS5hZGRQcm90b2NvbD1mdW5jdGlvbihlLHQpe3RoaXMuX3Byb3RvY29sc1tlXT10fSxlLnByb3RvdHlwZS5hZGRFbmNvZGluZz1mdW5jdGlvbihlLHQpe3RoaXMuX2VuY29kaW5nc1tlXT10fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZVByb3RvY29sIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZVByb3RvY29sfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3Byb3RvY29sc1tlXSl0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gcHJvdG9jb2wgIicrZSsnIicpO3RoaXMuX2FjdGl2ZVByb3RvY29sPWUsdGhpcy5fb25Qcm90b2NvbENoYW5nZS5maXJlKHRoaXMuX3Byb3RvY29sc1tlXS5ldmVudHMpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYXJlTW91c2VFdmVudHNBY3RpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0uZXZlbnRzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlRW5jb2RpbmciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlRW5jb2Rpbmd9LHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5fZW5jb2RpbmdzW2VdKXRocm93IG5ldyBFcnJvcigndW5rbm93biBlbmNvZGluZyAiJytlKyciJyk7dGhpcy5fYWN0aXZlRW5jb2Rpbmc9ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuYWN0aXZlUHJvdG9jb2w9Ik5PTkUiLHRoaXMuYWN0aXZlRW5jb2Rpbmc9IkRFRkFVTFQiLHRoaXMuX2xhc3RFdmVudD1udWxsfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uUHJvdG9jb2xDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Qcm90b2NvbENoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50cmlnZ2VyTW91c2VFdmVudD1mdW5jdGlvbihlKXtpZihlLmNvbDwwfHxlLmNvbD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfHxlLnJvdzwwfHxlLnJvdz49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKXJldHVybiExO2lmKDQ9PT1lLmJ1dHRvbiYmMzI9PT1lLmFjdGlvbilyZXR1cm4hMTtpZigzPT09ZS5idXR0b24mJjMyIT09ZS5hY3Rpb24pcmV0dXJuITE7aWYoNCE9PWUuYnV0dG9uJiYoMj09PWUuYWN0aW9ufHwzPT09ZS5hY3Rpb24pKXJldHVybiExO2lmKGUuY29sKyssZS5yb3crKywzMj09PWUuYWN0aW9uJiZ0aGlzLl9sYXN0RXZlbnQmJnRoaXMuX2NvbXBhcmVFdmVudHModGhpcy5fbGFzdEV2ZW50LGUpKXJldHVybiExO2lmKCF0aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLnJlc3RyaWN0KGUpKXJldHVybiExO3ZhciB0PXRoaXMuX2VuY29kaW5nc1t0aGlzLl9hY3RpdmVFbmNvZGluZ10oZSk7cmV0dXJuIHQmJigiREVGQVVMVCI9PT10aGlzLl9hY3RpdmVFbmNvZGluZz90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyQmluYXJ5RXZlbnQodCk6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSksdGhpcy5fbGFzdEV2ZW50PWUsITB9LGUucHJvdG90eXBlLmV4cGxhaW5FdmVudHM9ZnVuY3Rpb24oZSl7cmV0dXJue2Rvd246ISEoMSZlKSx1cDohISgyJmUpLGRyYWc6ISEoNCZlKSxtb3ZlOiEhKDgmZSksd2hlZWw6ISEoMTYmZSl9fSxlLnByb3RvdHlwZS5fY29tcGFyZUV2ZW50cz1mdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbD09PXQuY29sJiZlLnJvdz09PXQucm93JiZlLmJ1dHRvbj09PXQuYnV0dG9uJiZlLmFjdGlvbj09PXQuYWN0aW9uJiZlLmN0cmw9PT10LmN0cmwmJmUuYWx0PT09dC5hbHQmJmUuc2hpZnQ9PT10LnNoaWZ0fSxpKFtuKDAscy5JQnVmZmVyU2VydmljZSksbigxLHMuSUNvcmVTZXJ2aWNlKV0sZSl9KCk7dC5Db3JlTW91c2VTZXJ2aWNlPWZ9LDY5NzU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZVNlcnZpY2U9dm9pZCAwO3ZhciBhPXIoMjU4NSksYz1yKDg0NjApLGw9cigxNDM5KSxoPXIoODQ0KSx1PU9iamVjdC5mcmVlemUoe2luc2VydE1vZGU6ITF9KSxmPU9iamVjdC5mcmVlemUoe2FwcGxpY2F0aW9uQ3Vyc29yS2V5czohMSxhcHBsaWNhdGlvbktleXBhZDohMSxicmFja2V0ZWRQYXN0ZU1vZGU6ITEsb3JpZ2luOiExLHJldmVyc2VXcmFwYXJvdW5kOiExLHNlbmRGb2N1czohMSx3cmFwYXJvdW5kOiEwfSksXz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4pe3ZhciBvPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5fYnVmZmVyU2VydmljZT1yLG8uX2xvZ1NlcnZpY2U9aSxvLl9vcHRpb25zU2VydmljZT1uLG8uaXNDdXJzb3JJbml0aWFsaXplZD0hMSxvLmlzQ3Vyc29ySGlkZGVuPSExLG8uX29uRGF0YT1vLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksby5fb25Vc2VySW5wdXQ9by5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLG8uX29uQmluYXJ5PW8ucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxvLl9zY3JvbGxUb0JvdHRvbT10LG8ucmVnaXN0ZXIoe2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gby5fc2Nyb2xsVG9Cb3R0b209dm9pZCAwfX0pLG8ubW9kZXM9KDAsbC5jbG9uZSkodSksby5kZWNQcml2YXRlTW9kZXM9KDAsbC5jbG9uZSkoZiksb31yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EYXRhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGF0YS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uVXNlcklucHV0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uVXNlcklucHV0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CaW5hcnkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CaW5hcnkuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm1vZGVzPSgwLGwuY2xvbmUpKHUpLHRoaXMuZGVjUHJpdmF0ZU1vZGVzPSgwLGwuY2xvbmUpKGYpfSx0LnByb3RvdHlwZS50cmlnZ2VyRGF0YUV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ITEpLCF0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRpc2FibGVTdGRpbil7dmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7ci55YmFzZSE9PXIueWRpc3AmJnRoaXMuX3Njcm9sbFRvQm90dG9tKCksdCYmdGhpcy5fb25Vc2VySW5wdXQuZmlyZSgpLHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ3NlbmRpbmcgZGF0YSAiJytlKyciJywoZnVuY3Rpb24oKXtyZXR1cm4gZS5zcGxpdCgiIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApfSkpfSkpLHRoaXMuX29uRGF0YS5maXJlKGUpfX0sdC5wcm90b3R5cGUudHJpZ2dlckJpbmFyeUV2ZW50PWZ1bmN0aW9uKGUpe3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZGlzYWJsZVN0ZGlufHwodGhpcy5fbG9nU2VydmljZS5kZWJ1Zygnc2VuZGluZyBiaW5hcnkgIicrZSsnIicsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuc3BsaXQoIiIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKX0pKX0pKSx0aGlzLl9vbkJpbmFyeS5maXJlKGUpKX0sbyhbcygxLGEuSUJ1ZmZlclNlcnZpY2UpLHMoMixhLklMb2dTZXJ2aWNlKSxzKDMsYS5JT3B0aW9uc1NlcnZpY2UpXSx0KX0oaC5EaXNwb3NhYmxlKTt0LkNvcmVTZXJ2aWNlPV99LDkwNzQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYob1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxvO2Z1bmN0aW9uIGEobyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihvKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZihyPTEsaSYmKG49MiZvWzBdP2kucmV0dXJuOm9bMF0/aS50aHJvd3x8KChuPWkucmV0dXJuKSYmbi5jYWxsKGkpLDApOmkubmV4dCkmJiEobj1uLmNhbGwoaSxvWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2goaT0wLG4mJihvPVsyJm9bMF0sbi52YWx1ZV0pLG9bMF0pe2Nhc2UgMDpjYXNlIDE6bj1vO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTpvWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssaT1vWzFdLG89WzBdO2NvbnRpbnVlO2Nhc2UgNzpvPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoKG49KG49cy50cnlzKS5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSl8fDYhPT1vWzBdJiYyIT09b1swXSkpe3M9MDtjb250aW51ZX1pZigzPT09b1swXSYmKCFufHxvWzFdPm5bMF0mJm9bMV08blszXSkpe3MubGFiZWw9b1sxXTticmVha31pZig2PT09b1swXSYmcy5sYWJlbDxuWzFdKXtzLmxhYmVsPW5bMV0sbj1vO2JyZWFrfWlmKG4mJnMubGFiZWw8blsyXSl7cy5sYWJlbD1uWzJdLHMub3BzLnB1c2gobyk7YnJlYWt9blsyXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfW89dC5jYWxsKGUscyl9Y2F0Y2goZSl7bz1bNixlXSxpPTB9ZmluYWxseXtyPW49MH1pZig1Jm9bMF0pdGhyb3cgb1sxXTtyZXR1cm57dmFsdWU6b1swXT9vWzFdOnZvaWQgMCxkb25lOiEwfX0oW28sYV0pfX19LHM9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRlY29yYXRpb25TZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDgwNTUpLGM9cig4NDYwKSxsPXIoODQ0KSxoPXIoNjEwNiksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0Ll9kZWNvcmF0aW9ucz1uZXcgaC5Tb3J0ZWRMaXN0KChmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXJrZXIubGluZX0pKSx0Ll9vbkRlY29yYXRpb25SZWdpc3RlcmVkPXQucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSx0Ll9vbkRlY29yYXRpb25SZW1vdmVkPXQucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSx0fXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRlY29yYXRpb25SZWdpc3RlcmVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGVjb3JhdGlvblJlZ2lzdGVyZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRlY29yYXRpb25SZW1vdmVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGVjb3JhdGlvblJlbW92ZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJkZWNvcmF0aW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZWdpc3RlckRlY29yYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5tYXJrZXIuaXNEaXNwb3NlZCl7dmFyIHI9bmV3IGYoZSk7aWYocil7dmFyIGk9ci5tYXJrZXIub25EaXNwb3NlKChmdW5jdGlvbigpe3JldHVybiByLmRpc3Bvc2UoKX0pKTtyLm9uRGlzcG9zZSgoZnVuY3Rpb24oKXtyJiYodC5fZGVjb3JhdGlvbnMuZGVsZXRlKHIpJiZ0Ll9vbkRlY29yYXRpb25SZW1vdmVkLmZpcmUociksaS5kaXNwb3NlKCkpfSkpLHRoaXMuX2RlY29yYXRpb25zLmluc2VydChyKSx0aGlzLl9vbkRlY29yYXRpb25SZWdpc3RlcmVkLmZpcmUocil9cmV0dXJuIHJ9fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1zKHRoaXMuX2RlY29yYXRpb25zLnZhbHVlcygpKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSlpLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGVjb3JhdGlvbnMuY2xlYXIoKX0sdC5wcm90b3R5cGUuZ2V0RGVjb3JhdGlvbnNBdExpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZGVjb3JhdGlvbnMuZ2V0S2V5SXRlcmF0b3IoZSldfSkpfSx0LnByb3RvdHlwZS5nZXREZWNvcmF0aW9uc0F0Q2VsbD1mdW5jdGlvbihlLHQscil7dmFyIGksbixhLGMsbCxoLHUsZixfLGQscDtyZXR1cm4gbyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOmk9MCxuPTAsby5sYWJlbD0xO2Nhc2UgMTpvLnRyeXMucHVzaChbMSw2LDcsOF0pLGE9cyh0aGlzLl9kZWNvcmF0aW9ucy5nZXRLZXlJdGVyYXRvcih0KSksYz1hLm5leHQoKSxvLmxhYmVsPTI7Y2FzZSAyOnJldHVybiBjLmRvbmU/WzMsNV06KGw9Yy52YWx1ZSxpPW51bGwhPT0oXz1sLm9wdGlvbnMueCkmJnZvaWQgMCE9PV8/XzowLG49aSsobnVsbCE9PShkPWwub3B0aW9ucy53aWR0aCkmJnZvaWQgMCE9PWQ/ZDoxKSwhKGU+PWkmJmU8bil8fHImJihudWxsIT09KHA9bC5vcHRpb25zLmxheWVyKSYmdm9pZCAwIT09cD9wOiJib3R0b20iKSE9PXI/WzMsNF06WzQsbF0pO2Nhc2UgMzpvLnNlbnQoKSxvLmxhYmVsPTQ7Y2FzZSA0OnJldHVybiBjPWEubmV4dCgpLFszLDJdO2Nhc2UgNTpyZXR1cm5bMyw4XTtjYXNlIDY6cmV0dXJuIGg9by5zZW50KCksdT17ZXJyb3I6aH0sWzMsOF07Y2FzZSA3OnRyeXtjJiYhYy5kb25lJiYoZj1hLnJldHVybikmJmYuY2FsbChhKX1maW5hbGx5e2lmKHUpdGhyb3cgdS5lcnJvcn1yZXR1cm5bN107Y2FzZSA4OnJldHVyblsyXX19KSl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9cyh0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKSksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpe3ZhciBuPWkudmFsdWU7dGhpcy5fb25EZWNvcmF0aW9uUmVtb3ZlZC5maXJlKG4pfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5yZXNldCgpfSx0fShsLkRpc3Bvc2FibGUpO3QuRGVjb3JhdGlvblNlcnZpY2U9dTt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5vcHRpb25zPXQsci5pc0Rpc3Bvc2VkPSExLHIub25SZW5kZXJFbWl0dGVyPXIucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxyLm9uUmVuZGVyPXIub25SZW5kZXJFbWl0dGVyLmV2ZW50LHIuX29uRGlzcG9zZT1yLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksci5vbkRpc3Bvc2U9ci5fb25EaXNwb3NlLmV2ZW50LHIuX2NhY2hlZEJnPW51bGwsci5fY2FjaGVkRmc9bnVsbCxyLm1hcmtlcj10Lm1hcmtlcixyLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMmJiFyLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24mJihyLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb249ImZ1bGwiKSxyfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJiYWNrZ3JvdW5kQ29sb3JSR0IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2NhY2hlZEJnJiYodGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvcj90aGlzLl9jYWNoZWRCZz1hLmNzcy50b0NvbG9yKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpOnRoaXMuX2NhY2hlZEJnPXZvaWQgMCksdGhpcy5fY2FjaGVkQmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJmb3JlZ3JvdW5kQ29sb3JSR0IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2NhY2hlZEZnJiYodGhpcy5vcHRpb25zLmZvcmVncm91bmRDb2xvcj90aGlzLl9jYWNoZWRGZz1hLmNzcy50b0NvbG9yKHRoaXMub3B0aW9ucy5mb3JlZ3JvdW5kQ29sb3IpOnRoaXMuX2NhY2hlZEZnPXZvaWQgMCksdGhpcy5fY2FjaGVkRmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2lzRGlzcG9zZWR8fCh0aGlzLl9pc0Rpc3Bvc2VkPSEwLHRoaXMuX29uRGlzcG9zZS5maXJlKCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpKX0sdH0obC5EaXNwb3NhYmxlKX0sMzczMDpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRpcnR5Um93U2VydmljZT12b2lkIDA7dmFyIG89cigyNTg1KSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5jbGVhclJhbmdlKCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwic3RhcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJlbmQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5kfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNsZWFyUmFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9zdGFydD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LHRoaXMuX2VuZD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSxlLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24oZSl7ZTx0aGlzLl9zdGFydD90aGlzLl9zdGFydD1lOmU+dGhpcy5fZW5kJiYodGhpcy5fZW5kPWUpfSxlLnByb3RvdHlwZS5tYXJrUmFuZ2VEaXJ0eT1mdW5jdGlvbihlLHQpe2lmKGU+dCl7dmFyIHI9ZTtlPXQsdD1yfWU8dGhpcy5fc3RhcnQmJih0aGlzLl9zdGFydD1lKSx0PnRoaXMuX2VuZCYmKHRoaXMuX2VuZD10KX0sZS5wcm90b3R5cGUubWFya0FsbERpcnR5PWZ1bmN0aW9uKCl7dGhpcy5tYXJrUmFuZ2VEaXJ0eSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKX0saShbbigwLG8uSUJ1ZmZlclNlcnZpY2UpXSxlKX0oKTt0LkRpcnR5Um93U2VydmljZT1zfSw0MzQ4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX0sbj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LG89dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQscil7aWYocnx8Mj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpLG49MCxvPXQubGVuZ3RoO248bztuKyspIWkmJm4gaW4gdHx8KGl8fChpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCxuKSksaVtuXT10W25dKTtyZXR1cm4gZS5jb25jYXQoaXx8QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5JbnN0YW50aWF0aW9uU2VydmljZT10LlNlcnZpY2VDb2xsZWN0aW9uPXZvaWQgMDt2YXIgcz1yKDI1ODUpLGE9cig4MzQzKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZSx0LHI9W10sbz0wO288YXJndW1lbnRzLmxlbmd0aDtvKyspcltvXT1hcmd1bWVudHNbb107dGhpcy5fZW50cmllcz1uZXcgTWFwO3RyeXtmb3IodmFyIHM9aShyKSxhPXMubmV4dCgpOyFhLmRvbmU7YT1zLm5leHQoKSl7dmFyIGM9bihhLnZhbHVlLDIpLGw9Y1swXSxoPWNbMV07dGhpcy5zZXQobCxoKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKHQ9cy5yZXR1cm4pJiZ0LmNhbGwocyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX1yZXR1cm4gZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZW50cmllcy5nZXQoZSk7cmV0dXJuIHRoaXMuX2VudHJpZXMuc2V0KGUsdCkscn0sZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXt0aGlzLl9lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIGUocix0KX0pKX0sZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnRyaWVzLmhhcyhlKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnRyaWVzLmdldChlKX0sZX0oKTt0LlNlcnZpY2VDb2xsZWN0aW9uPWM7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fc2VydmljZXM9bmV3IGMsdGhpcy5fc2VydmljZXMuc2V0KHMuSUluc3RhbnRpYXRpb25TZXJ2aWNlLHRoaXMpfXJldHVybiBlLnByb3RvdHlwZS5zZXRTZXJ2aWNlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fc2VydmljZXMuc2V0KGUsdCl9LGUucHJvdG90eXBlLmdldFNlcnZpY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NlcnZpY2VzLmdldChlKX0sZS5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2U9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIscz1bXSxjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylzW2MtMV09YXJndW1lbnRzW2NdO3ZhciBsPSgwLGEuZ2V0U2VydmljZURlcGVuZGVuY2llcykoZSkuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pbmRleC10LmluZGV4fSkpLGg9W107dHJ5e2Zvcih2YXIgdT1pKGwpLGY9dS5uZXh0KCk7IWYuZG9uZTtmPXUubmV4dCgpKXt2YXIgXz1mLnZhbHVlLGQ9dGhpcy5fc2VydmljZXMuZ2V0KF8uaWQpO2lmKCFkKXRocm93IG5ldyBFcnJvcigiW2NyZWF0ZUluc3RhbmNlXSAiK2UubmFtZSsiIGRlcGVuZHMgb24gVU5LTk9XTiBzZXJ2aWNlICIrXy5pZCsiLiIpO2gucHVzaChkKX19Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKHI9dS5yZXR1cm4pJiZyLmNhbGwodSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fXZhciBwPWwubGVuZ3RoPjA/bFswXS5pbmRleDpzLmxlbmd0aDtpZihzLmxlbmd0aCE9PXApdGhyb3cgbmV3IEVycm9yKCJbY3JlYXRlSW5zdGFuY2VdIEZpcnN0IHNlcnZpY2UgZGVwZW5kZW5jeSBvZiAiK2UubmFtZSsiIGF0IHBvc2l0aW9uICIrKHArMSkrIiBjb25mbGljdHMgd2l0aCAiK3MubGVuZ3RoKyIgc3RhdGljIGFyZ3VtZW50cyIpO3JldHVybiBuZXcoZS5iaW5kLmFwcGx5KGUsbyhbdm9pZCAwXSxuKG8obyhbXSxuKHMpLCExKSxuKGgpLCExKSksITEpKSl9LGV9KCk7dC5JbnN0YW50aWF0aW9uU2VydmljZT1sfSw3ODY2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sbz10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LHM9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQscil7aWYocnx8Mj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpLG49MCxvPXQubGVuZ3RoO248bztuKyspIWkmJm4gaW4gdHx8KGl8fChpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCxuKSksaVtuXT10W25dKTtyZXR1cm4gZS5jb25jYXQoaXx8QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Mb2dTZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDI1ODUpLGM9e2RlYnVnOmEuTG9nTGV2ZWxFbnVtLkRFQlVHLGluZm86YS5Mb2dMZXZlbEVudW0uSU5GTyx3YXJuOmEuTG9nTGV2ZWxFbnVtLldBUk4sZXJyb3I6YS5Mb2dMZXZlbEVudW0uRVJST1Isb2ZmOmEuTG9nTGV2ZWxFbnVtLk9GRn0sbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9dGhpczt0aGlzLl9vcHRpb25zU2VydmljZT1lLHRoaXMubG9nTGV2ZWw9YS5Mb2dMZXZlbEVudW0uT0ZGLHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCksdGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKGUpeyJsb2dMZXZlbCI9PT1lJiZ0Ll91cGRhdGVMb2dMZXZlbCgpfSkpfXJldHVybiBlLnByb3RvdHlwZS5fdXBkYXRlTG9nTGV2ZWw9ZnVuY3Rpb24oKXt0aGlzLmxvZ0xldmVsPWNbdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sb2dMZXZlbF19LGUucHJvdG90eXBlLl9ldmFsTGF6eU9wdGlvbmFsUGFyYW1zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKSJmdW5jdGlvbiI9PXR5cGVvZiBlW3RdJiYoZVt0XT1lW3RdKCkpfSxlLnByb3RvdHlwZS5fbG9nPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9ldmFsTGF6eU9wdGlvbmFsUGFyYW1zKHIpLGUuY2FsbC5hcHBseShlLHMoW2NvbnNvbGUsInh0ZXJtLmpzOiAiK3RdLG8ociksITEpKX0sZS5wcm90b3R5cGUuZGVidWc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5sb2dMZXZlbDw9YS5Mb2dMZXZlbEVudW0uREVCVUcmJnRoaXMuX2xvZyhjb25zb2xlLmxvZyxlLHQpfSxlLnByb3RvdHlwZS5pbmZvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO3RoaXMubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLklORk8mJnRoaXMuX2xvZyhjb25zb2xlLmluZm8sZSx0KX0sZS5wcm90b3R5cGUud2Fybj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLmxvZ0xldmVsPD1hLkxvZ0xldmVsRW51bS5XQVJOJiZ0aGlzLl9sb2coY29uc29sZS53YXJuLGUsdCl9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO3RoaXMubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLkVSUk9SJiZ0aGlzLl9sb2coY29uc29sZS5lcnJvcixlLHQpfSxpKFtuKDAsYS5JT3B0aW9uc1NlcnZpY2UpXSxlKX0oKTt0LkxvZ1NlcnZpY2U9bH0sNzMwMjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4gaT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9LGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5PcHRpb25zU2VydmljZT10LkRFRkFVTFRfT1BUSU9OUz10LkRFRkFVTFRfQkVMTF9TT1VORD12b2lkIDA7dmFyIG49cig4NDYwKSxvPXIoNjExNCk7dC5ERUZBVUxUX0JFTExfU09VTkQ9ImRhdGE6YXVkaW8vbXAzO2Jhc2U2NCxTVVF6QkFBQUFBQUFJMVJUVTBVQUFBQVBBQUFEVEdGMlpqVTRMak15TGpFd05BQUFBQUFBQUFBQUFBQUEvL3RReEFBREI4QWhTbXhoSUlFVkNTaUpyRENRQlRjdTNVckFJd1Vka1JnUWJGQVpDMUNRRXdUSjltalJ2QkE0VU9MRDhuS1ZPV2ZoK1VsSzN6LzE3N09YcmZPZEtsN3B5bjNYZi8vV3JleVRSVW9BV2dCZ2tPQUdiWkhCZ0cxT0Y2ek04MkRXYlphVW1NQnB0Z1FoR2pzeVlxYzlhZTlYRnoyODA5NDhOTUJXSW5sanl6c05SRkxQV2RuWkdXcmRkRHNqSzF1bnVTclZOOWpKc0s4S3VRdFFDdE1CakNFdEltSVNkTktKT29wSXBCRnBOU01iSUhDU1JwUlI1aWFralRpeXpMaGNoVVVCd0NneUtpd2VCdi83VXNRYmc4aXNWTm9NUE1qQUFBQTBnQUFBQkVWRkdtZ3FLLy8vLzliUC82WEN5a3hCVFVVekxqRXdNS3FxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxIix0LkRFRkFVTFRfT1BUSU9OUz17Y29sczo4MCxyb3dzOjI0LGN1cnNvckJsaW5rOiExLGN1cnNvclN0eWxlOiJibG9jayIsY3Vyc29yV2lkdGg6MSxjdXN0b21HbHlwaHM6ITAsYmVsbFNvdW5kOnQuREVGQVVMVF9CRUxMX1NPVU5ELGJlbGxTdHlsZToibm9uZSIsZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6ITAsZmFzdFNjcm9sbE1vZGlmaWVyOiJhbHQiLGZhc3RTY3JvbGxTZW5zaXRpdml0eTo1LGZvbnRGYW1pbHk6ImNvdXJpZXItbmV3LCBjb3VyaWVyLCBtb25vc3BhY2UiLGZvbnRTaXplOjE1LGZvbnRXZWlnaHQ6Im5vcm1hbCIsZm9udFdlaWdodEJvbGQ6ImJvbGQiLGxpbmVIZWlnaHQ6MSxsaW5rVG9vbHRpcEhvdmVyRHVyYXRpb246NTAwLGxldHRlclNwYWNpbmc6MCxsb2dMZXZlbDoiaW5mbyIsc2Nyb2xsYmFjazoxZTMsc2Nyb2xsU2Vuc2l0aXZpdHk6MSxzY3JlZW5SZWFkZXJNb2RlOiExLG1hY09wdGlvbklzTWV0YTohMSxtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjohMSxtaW5pbXVtQ29udHJhc3RSYXRpbzoxLGRpc2FibGVTdGRpbjohMSxhbGxvd1Byb3Bvc2VkQXBpOiEwLGFsbG93VHJhbnNwYXJlbmN5OiExLHRhYlN0b3BXaWR0aDo4LHRoZW1lOnt9LHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDpvLmlzTWFjLHJlbmRlcmVyVHlwZToiY2FudmFzIix3aW5kb3dPcHRpb25zOnt9LHdpbmRvd3NNb2RlOiExLHdvcmRTZXBhcmF0b3I6IiAoKVtde30nLFwiYCIsYWx0Q2xpY2tNb3Zlc0N1cnNvcjohMCxjb252ZXJ0RW9sOiExLHRlcm1OYW1lOiJ4dGVybSIsY2FuY2VsRXZlbnRzOiExLG92ZXJ2aWV3UnVsZXJXaWR0aDp2b2lkIDB9O3ZhciBzPVsibm9ybWFsIiwiYm9sZCIsIjEwMCIsIjIwMCIsIjMwMCIsIjQwMCIsIjUwMCIsIjYwMCIsIjcwMCIsIjgwMCIsIjkwMCJdLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX29uT3B0aW9uQ2hhbmdlPW5ldyBuLkV2ZW50RW1pdHRlcjt2YXIgcj1pKHt9LHQuREVGQVVMVF9PUFRJT05TKTtmb3IodmFyIG8gaW4gZSlpZihvIGluIHIpdHJ5e3ZhciBzPWVbb107cltvXT10aGlzLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKG8scyl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX10aGlzLnJhd09wdGlvbnM9cix0aGlzLm9wdGlvbnM9aSh7fSxyKSx0aGlzLl9zZXR1cE9wdGlvbnMoKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbk9wdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbk9wdGlvbkNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0dXBPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPWZ1bmN0aW9uKHIpe2lmKCEociBpbiB0LkRFRkFVTFRfT1BUSU9OUykpdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb24gd2l0aCBrZXkgIicrcisnIicpO3JldHVybiBlLnJhd09wdGlvbnNbcl19LGk9ZnVuY3Rpb24ocixpKXtpZighKHIgaW4gdC5ERUZBVUxUX09QVElPTlMpKXRocm93IG5ldyBFcnJvcignTm8gb3B0aW9uIHdpdGgga2V5ICInK3IrJyInKTtpPWUuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24ocixpKSxlLnJhd09wdGlvbnNbcl0hPT1pJiYoZS5yYXdPcHRpb25zW3JdPWksZS5fb25PcHRpb25DaGFuZ2UuZmlyZShyKSl9O2Zvcih2YXIgbiBpbiB0aGlzLnJhd09wdGlvbnMpe3ZhciBvPXtnZXQ6ci5iaW5kKHRoaXMsbiksc2V0OmkuYmluZCh0aGlzLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vcHRpb25zLG4sbyl9fSxlLnByb3RvdHlwZS5zZXRPcHRpb249ZnVuY3Rpb24oZSx0KXt0aGlzLm9wdGlvbnNbZV09dH0sZS5wcm90b3R5cGUuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb249ZnVuY3Rpb24oZSxyKXtzd2l0Y2goZSl7Y2FzZSJiZWxsU3R5bGUiOmNhc2UiY3Vyc29yU3R5bGUiOmNhc2UicmVuZGVyZXJUeXBlIjpjYXNlIndvcmRTZXBhcmF0b3IiOnJ8fChyPXQuREVGQVVMVF9PUFRJT05TW2VdKTticmVhaztjYXNlImZvbnRXZWlnaHQiOmNhc2UiZm9udFdlaWdodEJvbGQiOmlmKCJudW1iZXIiPT10eXBlb2YgciYmMTw9ciYmcjw9MWUzKWJyZWFrO3I9cy5pbmNsdWRlcyhyKT9yOnQuREVGQVVMVF9PUFRJT05TW2VdO2JyZWFrO2Nhc2UiY3Vyc29yV2lkdGgiOnI9TWF0aC5mbG9vcihyKTtjYXNlImxpbmVIZWlnaHQiOmNhc2UidGFiU3RvcFdpZHRoIjppZihyPDEpdGhyb3cgbmV3IEVycm9yKGUrIiBjYW5ub3QgYmUgbGVzcyB0aGFuIDEsIHZhbHVlOiAiK3IpO2JyZWFrO2Nhc2UibWluaW11bUNvbnRyYXN0UmF0aW8iOnI9TWF0aC5tYXgoMSxNYXRoLm1pbigyMSxNYXRoLnJvdW5kKDEwKnIpLzEwKSk7YnJlYWs7Y2FzZSJzY3JvbGxiYWNrIjppZigocj1NYXRoLm1pbihyLDQyOTQ5NjcyOTUpKTwwKXRocm93IG5ldyBFcnJvcihlKyIgY2Fubm90IGJlIGxlc3MgdGhhbiAwLCB2YWx1ZTogIityKTticmVhaztjYXNlImZhc3RTY3JvbGxTZW5zaXRpdml0eSI6Y2FzZSJzY3JvbGxTZW5zaXRpdml0eSI6aWYocjw9MCl0aHJvdyBuZXcgRXJyb3IoZSsiIGNhbm5vdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMCwgdmFsdWU6ICIrcik7Y2FzZSJyb3dzIjpjYXNlImNvbHMiOmlmKCFyJiYwIT09cil0aHJvdyBuZXcgRXJyb3IoZSsiIG11c3QgYmUgbnVtZXJpYywgdmFsdWU6ICIrcil9cmV0dXJuIHJ9LGUucHJvdG90eXBlLmdldE9wdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zW2VdfSxlfSgpO3QuT3B0aW9uc1NlcnZpY2U9YX0sODM0MzooZSx0KT0+e2Z1bmN0aW9uIHIoZSx0LHIpe3QuZGkkdGFyZ2V0PT09dD90LmRpJGRlcGVuZGVuY2llcy5wdXNoKHtpZDplLGluZGV4OnJ9KToodC5kaSRkZXBlbmRlbmNpZXM9W3tpZDplLGluZGV4OnJ9XSx0LmRpJHRhcmdldD10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5jcmVhdGVEZWNvcmF0b3I9dC5nZXRTZXJ2aWNlRGVwZW5kZW5jaWVzPXQuc2VydmljZVJlZ2lzdHJ5PXZvaWQgMCx0LnNlcnZpY2VSZWdpc3RyeT1uZXcgTWFwLHQuZ2V0U2VydmljZURlcGVuZGVuY2llcz1mdW5jdGlvbihlKXtyZXR1cm4gZS5kaSRkZXBlbmRlbmNpZXN8fFtdfSx0LmNyZWF0ZURlY29yYXRvcj1mdW5jdGlvbihlKXtpZih0LnNlcnZpY2VSZWdpc3RyeS5oYXMoZSkpcmV0dXJuIHQuc2VydmljZVJlZ2lzdHJ5LmdldChlKTt2YXIgaT1mdW5jdGlvbihlLHQsbil7aWYoMyE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJASVNlcnZpY2VOYW1lLWRlY29yYXRvciBjYW4gb25seSBiZSB1c2VkIHRvIGRlY29yYXRlIGEgcGFyYW1ldGVyIik7cihpLGUsbil9O3JldHVybiBpLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LHQuc2VydmljZVJlZ2lzdHJ5LnNldChlLGkpLGl9fSwyNTg1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5JRGVjb3JhdGlvblNlcnZpY2U9dC5JVW5pY29kZVNlcnZpY2U9dC5JT3B0aW9uc1NlcnZpY2U9dC5JTG9nU2VydmljZT10LkxvZ0xldmVsRW51bT10LklJbnN0YW50aWF0aW9uU2VydmljZT10LklEaXJ0eVJvd1NlcnZpY2U9dC5JQ2hhcnNldFNlcnZpY2U9dC5JQ29yZVNlcnZpY2U9dC5JQ29yZU1vdXNlU2VydmljZT10LklCdWZmZXJTZXJ2aWNlPXZvaWQgMDt2YXIgaSxuPXIoODM0Myk7dC5JQnVmZmVyU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkJ1ZmZlclNlcnZpY2UiKSx0LklDb3JlTW91c2VTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiQ29yZU1vdXNlU2VydmljZSIpLHQuSUNvcmVTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiQ29yZVNlcnZpY2UiKSx0LklDaGFyc2V0U2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkNoYXJzZXRTZXJ2aWNlIiksdC5JRGlydHlSb3dTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiRGlydHlSb3dTZXJ2aWNlIiksdC5JSW5zdGFudGlhdGlvblNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJJbnN0YW50aWF0aW9uU2VydmljZSIpLChpPXQuTG9nTGV2ZWxFbnVtfHwodC5Mb2dMZXZlbEVudW09e30pKVtpLkRFQlVHPTBdPSJERUJVRyIsaVtpLklORk89MV09IklORk8iLGlbaS5XQVJOPTJdPSJXQVJOIixpW2kuRVJST1I9M109IkVSUk9SIixpW2kuT0ZGPTRdPSJPRkYiLHQuSUxvZ1NlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJMb2dTZXJ2aWNlIiksdC5JT3B0aW9uc1NlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJPcHRpb25zU2VydmljZSIpLHQuSVVuaWNvZGVTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiVW5pY29kZVNlcnZpY2UiKSx0LklEZWNvcmF0aW9uU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkRlY29yYXRpb25TZXJ2aWNlIil9LDE0ODA6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlVuaWNvZGVTZXJ2aWNlPXZvaWQgMDt2YXIgaT1yKDg0NjApLG49cigyMjUpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fcHJvdmlkZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fYWN0aXZlPSIiLHRoaXMuX29uQ2hhbmdlPW5ldyBpLkV2ZW50RW1pdHRlcjt2YXIgZT1uZXcgbi5Vbmljb2RlVjY7dGhpcy5yZWdpc3RlcihlKSx0aGlzLl9hY3RpdmU9ZS52ZXJzaW9uLHRoaXMuX2FjdGl2ZVByb3ZpZGVyPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2ZXJzaW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9wcm92aWRlcnMpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlVmVyc2lvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmV9LHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5fcHJvdmlkZXJzW2VdKXRocm93IG5ldyBFcnJvcigndW5rbm93biBVbmljb2RlIHZlcnNpb24gIicrZSsnIicpO3RoaXMuX2FjdGl2ZT1lLHRoaXMuX2FjdGl2ZVByb3ZpZGVyPXRoaXMuX3Byb3ZpZGVyc1tlXSx0aGlzLl9vbkNoYW5nZS5maXJlKGUpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3RoaXMuX3Byb3ZpZGVyc1tlLnZlcnNpb25dPWV9LGUucHJvdG90eXBlLndjd2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FjdGl2ZVByb3ZpZGVyLndjd2lkdGgoZSl9LGUucHJvdG90eXBlLmdldFN0cmluZ0NlbGxXaWR0aD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWUubGVuZ3RoLGk9MDtpPHI7KytpKXt2YXIgbj1lLmNoYXJDb2RlQXQoaSk7aWYoNTUyOTY8PW4mJm48PTU2MzE5KXtpZigrK2k+PXIpcmV0dXJuIHQrdGhpcy53Y3dpZHRoKG4pO3ZhciBvPWUuY2hhckNvZGVBdChpKTs1NjMyMDw9byYmbzw9NTczNDM/bj0xMDI0KihuLTU1Mjk2KStvLTU2MzIwKzY1NTM2OnQrPXRoaXMud2N3aWR0aChvKX10Kz10aGlzLndjd2lkdGgobil9cmV0dXJuIHR9LGV9KCk7dC5Vbmljb2RlU2VydmljZT1vfX0sdD17fTtyZXR1cm4gZnVuY3Rpb24gcihpKXt2YXIgbj10W2ldO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgbz10W2ldPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxyKSxvLmV4cG9ydHN9KDQzODkpfSkoKX0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9eHRlcm0uanMubWFwClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9yZXF1aXJlL25vZGVfbW9kdWxlcy94dGVybS9saWIveHRlcm0uanMiXSA9IFtdCgpfY2FuX25hbWUgPSAiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLWZpdC9saWIveHRlcm0tYWRkb24tZml0LmpzIgohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5GaXRBZGRvbj10KCk6ZS5GaXRBZGRvbj10KCl9KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57InVzZSBzdHJpY3QiO3ZhciBlPXs3NzU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5GaXRBZGRvbj12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLl90ZXJtaW5hbD1lfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5maXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3Bvc2VEaW1lbnNpb25zKCk7aWYoZSYmdGhpcy5fdGVybWluYWwpe3ZhciB0PXRoaXMuX3Rlcm1pbmFsLl9jb3JlO3RoaXMuX3Rlcm1pbmFsLnJvd3M9PT1lLnJvd3MmJnRoaXMuX3Rlcm1pbmFsLmNvbHM9PT1lLmNvbHN8fCh0Ll9yZW5kZXJTZXJ2aWNlLmNsZWFyKCksdGhpcy5fdGVybWluYWwucmVzaXplKGUuY29scyxlLnJvd3MpKX19LGUucHJvdG90eXBlLnByb3Bvc2VEaW1lbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5fdGVybWluYWwmJnRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQmJnRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucGFyZW50RWxlbWVudCl7dmFyIGU9dGhpcy5fdGVybWluYWwuX2NvcmU7aWYoMCE9PWUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgmJjAhPT1lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCl7dmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KSxyPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZSgiaGVpZ2h0IikpLGk9TWF0aC5tYXgoMCxwYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoIndpZHRoIikpKSxuPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQpLG89ci0ocGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXRvcCIpKStwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctYm90dG9tIikpKSxhPWktKHBhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1yaWdodCIpKStwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctbGVmdCIpKSktZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aDtyZXR1cm57Y29sczpNYXRoLm1heCgyLE1hdGguZmxvb3IoYS9lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKSkscm93czpNYXRoLm1heCgxLE1hdGguZmxvb3Ioby9lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkpfX19fSxlfSgpO3QuRml0QWRkb249cn19LHQ9e307cmV0dXJuIGZ1bmN0aW9uIHIoaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciBuPXRbaV09e2V4cG9ydHM6e319O3JldHVybiBlW2ldKG4sbi5leHBvcnRzLHIpLG4uZXhwb3J0c30oNzc1KX0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLWFkZG9uLWZpdC5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLWZpdC9saWIveHRlcm0tYWRkb24tZml0LmpzIl0gPSBbXQoKX2Nhbl9uYW1lID0gIi9yZXF1aXJlL25vZGVfbW9kdWxlcy94dGVybS1hZGRvbi13ZWItbGlua3MvbGliL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy5qcyIKIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuV2ViTGlua3NBZGRvbj10KCk6ZS5XZWJMaW5rc0FkZG9uPXQoKX0oc2VsZiwoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9ezY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MaW5rQ29tcHV0ZXI9dC5XZWJMaW5rUHJvdmlkZXI9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsaSxyKXt2b2lkIDA9PT1yJiYocj17fSksdGhpcy5fdGVybWluYWw9ZSx0aGlzLl9yZWdleD10LHRoaXMuX2hhbmRsZXI9aSx0aGlzLl9vcHRpb25zPXJ9cmV0dXJuIGUucHJvdG90eXBlLnByb3ZpZGVMaW5rcz1mdW5jdGlvbihlLHQpe3ZhciBpPXIuY29tcHV0ZUxpbmsoZSx0aGlzLl9yZWdleCx0aGlzLl90ZXJtaW5hbCx0aGlzLl9oYW5kbGVyKTt0KHRoaXMuX2FkZENhbGxiYWNrcyhpKSl9LGUucHJvdG90eXBlLl9hZGRDYWxsYmFja3M9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlYXZlPXQuX29wdGlvbnMubGVhdmUsZS5ob3Zlcj1mdW5jdGlvbihpLHIpe2lmKHQuX29wdGlvbnMuaG92ZXIpe3ZhciBuPWUucmFuZ2U7dC5fb3B0aW9ucy5ob3ZlcihpLHIsbil9fSxlfSkpfSxlfSgpO3QuV2ViTGlua1Byb3ZpZGVyPWk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmNvbXB1dGVMaW5rPWZ1bmN0aW9uKHQsaSxyLG4pe2Zvcih2YXIgbyxhPW5ldyBSZWdFeHAoaS5zb3VyY2UsKGkuZmxhZ3N8fCIiKSsiZyIpLHM9ZS5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAodC0xLCExLHIpLGQ9c1swXSxsPXNbMV0sYz0tMSx1PVtdO251bGwhPT0obz1hLmV4ZWMoZCkpOyl7dmFyIGg9b1sxXTtpZighaCl7Y29uc29sZS5sb2coIm1hdGNoIGZvdW5kIHdpdGhvdXQgY29ycmVzcG9uZGluZyBtYXRjaEluZGV4Iik7YnJlYWt9aWYoYz1kLmluZGV4T2YoaCxjKzEpLGEubGFzdEluZGV4PWMraC5sZW5ndGgsYzwwKWJyZWFrO2Zvcih2YXIgdj1jK2gubGVuZ3RoLGY9bCsxO3Y+ci5jb2xzOyl2LT1yLmNvbHMsZisrO2Zvcih2YXIgcD1jKzEsXz1sKzE7cD5yLmNvbHM7KXAtPXIuY29scyxfKys7dmFyIGs9e3N0YXJ0Ont4OnAseTpffSxlbmQ6e3g6dix5OmZ9fTt1LnB1c2goe3JhbmdlOmssdGV4dDpoLGFjdGl2YXRlOm59KX1yZXR1cm4gdX0sZS5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXA9ZnVuY3Rpb24oZSx0LGkpe3ZhciByLG4sbz0iIjtkb3tpZighKHM9aS5idWZmZXIuYWN0aXZlLmdldExpbmUoZSkpKWJyZWFrO3MuaXNXcmFwcGVkJiZlLS0sbj1zLmlzV3JhcHBlZH13aGlsZShuKTt2YXIgYT1lO2Rve3ZhciBzLGQ9aS5idWZmZXIuYWN0aXZlLmdldExpbmUoZSsxKTtpZihyPSEhZCYmZC5pc1dyYXBwZWQsIShzPWkuYnVmZmVyLmFjdGl2ZS5nZXRMaW5lKGUpKSlicmVhaztvKz1zLnRyYW5zbGF0ZVRvU3RyaW5nKCFyJiZ0KS5zdWJzdHJpbmcoMCxpLmNvbHMpLGUrK313aGlsZShyKTtyZXR1cm5bbyxhXX0sZX0oKTt0LkxpbmtDb21wdXRlcj1yfX0sdD17fTtmdW5jdGlvbiBpKHIpe3ZhciBuPXRbcl07aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBvPXRbcl09e2V4cG9ydHM6e319O3JldHVybiBlW3JdKG8sby5leHBvcnRzLGkpLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4oKCk9Pnt2YXIgZT1yO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLldlYkxpbmtzQWRkb249dm9pZCAwO3ZhciB0PWkoNiksbj1uZXcgUmVnRXhwKCIoPzpefFteXFxkYS16XFwuLV0rKSgoaHR0cHM/OlxcL1xcLykoKChbXFxkYS16XFwuLV0rKVxcLihbYS16XFwuXXsyLDE4fSkpfCgoXFxkezEsM31cXC4pezN9XFxkezEsM30pfChsb2NhbGhvc3QpKSg6XFxkezEsNX0pPygoXFwvW1xcL1xcd1xcLlxcLSV+OitAXSopKihbXjpcIidcXHNdKSk/KFxcP1swLTlcXHdcXFtcXF1cXChcXClcXC9cXD9cXCEjQCQlJicqKyw6O35cXD1cXC5cXC1dKik/KCNbMC05XFx3XFxbXFxdXFwoXFwpXFwvXFw/XFwhI0AkJSYnKissOjt+XFw9XFwuXFwtXSopPykoJHxbXlxcL1xcd1xcLlxcLSVdKykiKTtmdW5jdGlvbiBvKGUsdCl7dmFyIGk9d2luZG93Lm9wZW4oKTtpZihpKXt0cnl7aS5vcGVuZXI9bnVsbH1jYXRjaChlKXt9aS5sb2NhdGlvbi5ocmVmPXR9ZWxzZSBjb25zb2xlLndhcm4oIk9wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCIpfXZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsaSl7dm9pZCAwPT09ZSYmKGU9byksdm9pZCAwPT09dCYmKHQ9e30pLHZvaWQgMD09PWkmJihpPSExKSx0aGlzLl9oYW5kbGVyPWUsdGhpcy5fb3B0aW9ucz10LHRoaXMuX3VzZUxpbmtQcm92aWRlcj1pfXJldHVybiBlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXtpZih0aGlzLl90ZXJtaW5hbD1lLHRoaXMuX3VzZUxpbmtQcm92aWRlciYmInJlZ2lzdGVyTGlua1Byb3ZpZGVyImluIHRoaXMuX3Rlcm1pbmFsKXt2YXIgaT0ocj10aGlzLl9vcHRpb25zKS51cmxSZWdleHx8bjt0aGlzLl9saW5rUHJvdmlkZXI9dGhpcy5fdGVybWluYWwucmVnaXN0ZXJMaW5rUHJvdmlkZXIobmV3IHQuV2ViTGlua1Byb3ZpZGVyKHRoaXMuX3Rlcm1pbmFsLGksdGhpcy5faGFuZGxlcixyKSl9ZWxzZXt2YXIgcjsocj10aGlzLl9vcHRpb25zKS5tYXRjaEluZGV4PTEsdGhpcy5fbGlua01hdGNoZXJJZD10aGlzLl90ZXJtaW5hbC5yZWdpc3RlckxpbmtNYXRjaGVyKG4sdGhpcy5faGFuZGxlcixyKX19LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZTt2b2lkIDAhPT10aGlzLl9saW5rTWF0Y2hlcklkJiZ2b2lkIDAhPT10aGlzLl90ZXJtaW5hbCYmdGhpcy5fdGVybWluYWwuZGVyZWdpc3RlckxpbmtNYXRjaGVyKHRoaXMuX2xpbmtNYXRjaGVySWQpLG51bGw9PT0oZT10aGlzLl9saW5rUHJvdmlkZXIpfHx2b2lkIDA9PT1lfHxlLmRpc3Bvc2UoKX0sZX0oKTtlLldlYkxpbmtzQWRkb249YX0pKCkscn0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLWFkZG9uLXdlYi1saW5rcy5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9saWIveHRlcm0tYWRkb24td2ViLWxpbmtzLmpzIl0gPSBbXQoKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtL2Nzcy94dGVybS5jc3MiXSA9IFtdCgpfY2FuX25hbWUgPSAiIgo=",
        "usr/volcanos/page/can.css": "Ym9keSwgZmllbGRzZXQsIHRhYmxlLCB0ciwgdGgsIHRkIHsgcGFkZGluZzowOyBib3JkZXI6MDsgbWFyZ2luOjA7IH0KYm9keSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGZvbnQtc2l6ZToxNnB4OyB9CmxlZ2VuZCB7IGJhY2tncm91bmQtY29sb3I6Y2FkZXRibHVlOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzowIDIwcHg7IH0Kc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6Y3lhbjsgcGFkZGluZzowIDEwcHg7IGJvcmRlcjowOyB9CnRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB3aWR0aDo0MDBweDsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyBjb2xvcjpibGFjazsgcGFkZGluZzowIDVweDsgYm9yZGVyOjA7IHdpZHRoOjkwcHg7IH0KaW5wdXRbdHlwZT10ZXh0XSB7IGJhY2tncm91bmQtY29sb3I6Y3lhbjsgY29sb3I6YmxhY2s7IHBhZGRpbmc6MCA1cHg7IGJvcmRlcjowOyB3aWR0aDo5MHB4OyB9CmlucHV0W25hbWU9Y21kXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOndoaXRlOyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXVybF0geyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXRleHRdIHsgd2lkdGg6MTYwcHg7IH0KaW5wdXRbbmFtZT1kYXRlXSB7IHdpZHRoOjE1MHB4OyB9CmlucHV0W25hbWU9cGF0aF0geyB3aWR0aDoxNjBweDsgfQppbnB1dFtuYW1lPWxpbmVdIHsgd2lkdGg6NDBweDsgfQppbnB1dFtuYW1lPWxpbWl0XSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1vZmZlbmRdIHsgd2lkdGg6NDhweDsgfQppbnB1dFtuYW1lPWlkXSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1JRF0geyB3aWR0aDo0OHB4OyB9CmlucHV0W3R5cGU9YnV0dG9uXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9b3Blbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9c3RvcF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1kZWxldGVdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9cmVtb3ZlXSB7IGJhY2tncm91bmQtY29sb3I6cmVkOyB9Cgp0YWJsZS5sYXlvdXQgeyBib3JkZXItc3BhY2luZzowOyB9CnRhYmxlLmxheW91dCB0ZCB7IHZlcnRpY2FsLWFsaWduOnRvcDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IGNvbG9yOndoaXRlOyBmb250LXNpemU6MjRweDsgcG9zaXRpb246YWJzb2x1dGU7IHotaW5kZXg6MTA7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZT5kaXYgeyBkaXNwbGF5OnRhYmxlLWNlbGw7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9qZWN0IHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgbGVmdDowcHg7IGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjEwcHg7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9maWxlIHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgcmlnaHQ6MHB4OyBib3JkZXItdG9wLWxlZnQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXkgeyBtYXJnaW4tdG9wOi0xNXB4OyBoZWlnaHQ6MTVweDsgd2lkdGg6MTAwcHg7IHBvc2l0aW9uOnN0aWNreTsgbGVmdDo0MCU7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6MTBweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXk+ZGl2IHsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjEwMHB4OyB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZSg1cHgsIDBweCk7IH0KdGFibGUuY29udGVudCB0aGVhZCB7IHBvc2l0aW9uOnN0aWNreTsgdG9wOjJweDsgfQp0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IHBhZGRpbmc6MnB4IDZweDsgfQp0YWJsZS5jb250ZW50IHRkIHsgcGFkZGluZzoycHggNnB4OyB9CnRhYmxlLmNvbnRlbnQuYWN0aW9uIHRoOmxhc3QtY2hpbGQgeyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KdGFibGUuY29udGVudC5hY3Rpb24gdGQ6bGFzdC1jaGlsZCB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KZGl2LmNvZGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzNDNhMzQ0NTsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGJhY2tncm91bmQtY29sb3I6IzIxNjlhOWE2OyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgNXB4IGJsdWU7IG1hcmdpbjoxMHB4OyB9Cgpmb3JtLm9wdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2LmFjdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2Lm91dHB1dCB7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lml0ZW0geyBwYWRkaW5nOjJweCAxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lmxpc3QgeyBtYXJnaW4tbGVmdDoxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaCB7IHdpZHRoOjEycHg7IGZsb2F0OmxlZnQ7IHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSB0cmFuc2xhdGUoMXB4LCAwcHgpOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaC5vcGVuIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKSB0cmFuc2xhdGUoLTRweCwgNHB4KTsgfQpkaXYub3V0cHV0IGRpdi5wcm9qZWN0IGRpdi56b25lPmRpdi5uYW1lIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IGNvbG9yOndoaXRlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo1cHg7IGNsZWFyOmJvdGg7IH0KZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuaXRlbT5kaXYubmFtZSB7IHBhZGRpbmctbGVmdDoyMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSB7IGZsb2F0OnJpZ2h0OyBjbGVhcjpub25lOyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSBpbnB1dFt0eXBlPXRleHRdIHsgYmFja2dyb3VuZC1jb2xvcjojZmYwMDAwMDA7IHBhZGRpbmctbGVmdDoxMHB4OyBjb2xvcjp3aGl0ZTsgfQoKZmllbGRzZXQucGx1Z2luIHsgYmFja2dyb3VuZC1jb2xvcjojMDYxYzNjOWU7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZmllbGRzZXQuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgcG9zaXRpb246YWJzb2x1dGU7IH0KZmllbGRzZXQuZnVsbCB7IGJhY2tncm91bmQtY29sb3I6IzA3Mzk0N2YyOyBwYWRkaW5nOjA7IG1hcmdpbjowOyBsZWZ0OjA7IHRvcDowOyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LnN0b3J5PmxlZ2VuZCB7IG1hcmdpbjoxMHB4IDA7IH0KZmllbGRzZXQucGx1Zz5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmZpZWxkc2V0LmZsb2F0PmxlZ2VuZCB7IGZsb2F0OmxlZnQ7IG1hcmdpbi1yaWdodDo1cHg7IH0KZmllbGRzZXQuZnVsbD5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW46MDsgbWFyZ2luLXJpZ2h0OjVweDsgfQpmaWVsZHNldC5mbG9hdCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQucGx1Zz5mb3JtLm9wdGlvbiBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuZnVsbCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQgaW5wdXRbdHlwZT1idXR0b25dW25hbWU9Y2xvc2VdeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luIGRpdi5zdGF0dXMgeyBib3JkZXItdG9wOjFweCBzb2xpZCBkYXJrY3lhbjsgfQpmaWVsZHNldC5zdG9yeSBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgZGFya2N5YW47IH0KZmllbGRzZXQub3V0cHV0PmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgpmaWVsZHNldC5pbnB1dC5rZXkgeyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LmlucHV0LmtleSBkaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbnB1dC5rZXkuc2ltcGxlIHRoIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgdGQgeyBtaW4td2lkdGg6NDBweDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5hY3Rpb24gZGl2LnNwYWNlIHsgd2lkdGg6MDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5vdXRwdXQgdGQucHJldiB7IGNvbG9yOmdyYXk7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSBkaXYub3V0cHV0IHRkLm5leHQgeyBjb2xvcjpncmF5OyB9CmZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6MnB4IDEwcHg7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSB0YWJsZSB7IHRleHQtYWxpZ246Y2VudGVyOyB3aWR0aDoyODBweDsgfQoKYm9keT5kaXYuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NXB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi50aXRsZSB7IGNvbG9yOnllbGxvdzsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi50b2FzdCBkaXYuZHVyYXRpb24geyBjb2xvcjpncmF5OyBmbG9hdDpyaWdodDsgfQpib2R5PmRpdi50b2FzdCBkaXYuY29udGVudCB7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjp5ZWxsb3c7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIHsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgbWFyZ2luLWxlZnQ6LTJweDsgaGVpZ2h0OjEwcHg7IGNsZWFyOmJvdGg7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIGRpdi5jdXJyZW50IHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyB9CmJvZHk+ZGl2LmNhcnRlIHsgcGFkZGluZzowOyB9CmJvZHk+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMGUzMzY5YjM7IHBhZGRpbmc6M3B4IDEycHg7IH0KYm9keT5kaXYuY2FydGUgZGl2LnNwYWNlIHsgYm9yZGVyLWJvdHRvbTpzb2xpZCAxcHggZ3JheTsgfQpib2R5PmRpdi5pbnB1dCBkaXYuY29udGVudCB7IG92ZXJmbG93OmF1dG87IH0KYm9keT5kaXYuaW5wdXQgdGQgeyBwYWRkaW5nOjVweDsgfQpib2R5PmRpdi5pbnB1dCBzZWxlY3QgeyB3aWR0aDoxODFweDsgfQpib2R5PmRpdi5pbnB1dCBpbnB1dFt0eXBlPXRleHRdIHsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQgaW5wdXRbbmFtZT1wYXNzd29yZF0geyBwYWRkaW5nOjVweDsgYm9yZGVyOjA7IHdpZHRoOjE3MXB4OyBiYWNrZ3JvdW5kOndoaXRlOyB9CmJvZHk+ZGl2LmlucHV0IGlucHV0W25hbWU9dXNlcm5hbWVdIHsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB3aWR0aDoxNzFweDsgfQpib2R5PmRpdi5pbnB1dCB0ZXh0YXJlYSB7IGhlaWdodDoxMjBweDsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQubG9naW4geyBwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6c3RlZWxibHVlOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuaXRlbSB7IGZsb2F0OmxlZnQ7IH0KYm9keT5kaXYudXBsb2FkIGRpdi5vdXRwdXQgeyBib3JkZXI6c29saWQgMXB4IHJlZDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnByb2dyZXNzIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB3aWR0aDowOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5jb3N0IHsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnN0YXR1cyBkaXYuc2hvdyB7IGZsb2F0OnJpZ2h0OyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5zaXplIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KYm9keT5kaXYudXBsb2FkIGlucHV0W3R5cGU9ZmlsZV0geyB3aWR0aDozMjBweDsgfQoKLyogZm9udCAqLwoqIHsgdGFiLXNpemU6NDsgfQp0ZXh0YXJlYSB7IHRhYi1zaXplOjI7IGhlaWdodDo2MHB4OyB9CmxlZ2VuZCB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozMXB4OyB9CnNlbGVjdCB7IGZvbnQtc2l6ZToxLjFyZW07IGhlaWdodDozMXB4OyB9CmlucHV0IHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IH0KdGFibGUuY29udGVudCB0aCwgdGFibGUuY29udGVudCB0ZCwgZGl2LnpvbmU+ZGl2Lm5hbWUsIGRpdi5pdGVtLCBkaXYuY29kZSwgY29kZS5zdG9yeSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBmb250LXNpemU6MS4xcmVtOyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZGl2LnN0YXR1cz5kaXYuaXRlbT5sYWJlbCB7IGZvbnQtc2l6ZTowLjZyZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgfQpkaXYuc3RhdHVzPmRpdi5pdGVtIHsgcGFkZGluZzo0cHg7IGhlaWdodDoyMnB4OyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnMgeyBwYWRkaW5nOjVweCAxMHB4OyBoZWlnaHQ6MjFweDsgfQpzdmcgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KCi8qIGRpc3BsYXkgKi8KZm9ybS5vcHRpb24sIGRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9Ci5oaWRlLCAuaGlkZGVuLCBmb3JtLm9wdGlvbj5kaXYuaXRlbT5sYWJlbCwgZGl2LmFjdGlvbj5kaXYuaXRlbT5sYWJlbCwgZmllbGRzZXQucGFuZWw+bGVnZW5kLCBmaWVsZHNldC5vdXRwdXQ+bGVnZW5kLCBmaWVsZHNldC5pbnB1dD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZGl2Lm91dHB1dCwgZGl2LnN0YXR1cywgZGl2LmNvbnRlbnQsIGRpdi5wcm9qZWN0IGRpdi5pdGVtLCBkaXYuaXRlbS50ZXh0YXJlYSwgZGl2LmNvZGUsIGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdLCBwLnN0b3J5LCBoMSwgaDIsIGgzIHsgY2xlYXI6Ym90aDsgfQpmb3JtLm9wdGlvbiwgZm9ybS5vcHRpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24sIGRpdi5hY3Rpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24+ZGl2LnRhYnMsIGRpdi5wcm9qZWN0LCBkaXYuc3RhdHVzPmRpdi5pdGVtIHsgZmxvYXQ6bGVmdDsgfQpkaXYuY29kZSwgZGl2LnN0b3J5LCBkaXYuYWN0aW9uLCBkaXYub3V0cHV0LCBkaXYuc3RhdHVzLCBkaXYucHJvamVjdCwgZGl2LmNvbnRlbnQsIGRpdi5wcm9maWxlLCBkaXYuZGlzcGxheSwgdGFibGUuY29udGVudCwgdGFibGUuY29udGVudCB0ZCwgYm9keT5kaXYudG9hc3QgeyBvdmVyZmxvdzphdXRvOyB9CmRpdi5jb2RlLCBkaXYuc3RvcnksIGRpdi5pdGVtLCBkaXYuY29udGVudCwgdGFibGUuY29udGVudCwgdGV4dGFyZWEgeyB3aGl0ZS1zcGFjZTpwcmU7IH0KZGl2LmNvZGUsIGRpdi5zdG9yeSwgZGl2Lml0ZW0geyB0ZXh0LWFsaWduOmxlZnQ7IH0KCi8qIHBvc2l0aW9uIGN1cnNvciAqLwpmaWVsZHNldC5hdXRvLCBmaWVsZHNldC5mdWxsLCBmaWVsZHNldC5mbG9hdCwgZmllbGRzZXQuaW5wdXQsIGJvZHk+ZGl2LnRvYXN0LCBib2R5PmRpdi5jYXJ0ZSwgYm9keT5kaXYuaW5wdXQsIGJvZHk+ZGl2LnVwbG9hZCB7IHBvc2l0aW9uOmZpeGVkOyB6LWluZGV4OjEwOyB9CmxlZ2VuZCwgc2VsZWN0LCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGRpdi5pdGVtLCBkaXYudGFicywgdGgsIHRkLCBoMSwgaDIsIGgzIHsgY3Vyc29yOnBvaW50ZXI7IH0KZGl2LnRpdGxlLCBkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGN1cnNvcjpjb3B5OyB9CgovKiBib3gtc2hhZG93ICovCmZpZWxkc2V0LnBsdWdpbiB7IGJveC1zaGFkb3c6MnB4IDJweCAxMHB4IDRweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnBsdWdpbjpob3ZlciB7IGJveC1zaGFkb3c6NHB4IDRweCAxMnB4IDZweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnN0b3J5IHsgYm94LXNoYWRvdzo0cHggNHB4IDEwcHggMXB4ICM2MjZiZDA7IH0KZmllbGRzZXQuc3Rvcnk6aG92ZXIgeyBib3gtc2hhZG93OjEycHggMTJweCAxMnB4IDZweCAjNTc2NGVmZDE7IH0KbGVnZW5kLCBzZWxlY3QsIHRleHRhcmVhLCBpbnB1dFt0eXBlPXRleHRdLCBkaXYuY29kZSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBib3gtc2hhZG93OjRweCA0cHggMjBweCA0cHggIzYyNmJkMDsgfQoKLyogaG92ZXIgKi8KbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CnNlbGVjdDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgY29sb3I6Y3lhbjsgfQppbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQppbnB1dFtuYW1lPWNtZF06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmN5YW47IGNvbG9yOmJsYWNrOyB9CmlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSBzcGFuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpkZWVwc2t5Ymx1ZTsgYm94LXNoYWRvdzo0cHggNHB4IDIwcHggNHB4ICMyOTMxOGU7IH0KdGFibGUuY29udGVudCB0ci5zZWxlY3QsIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIsIGgxOmhvdmVyLCBoMjpob3ZlciwgaDM6aG92ZXIsIGRpdi5pdGVtLnNlbGVjdCwgZGl2Lml0ZW06aG92ZXIsIGRpdi50YWJzLnNlbGVjdCwgZGl2LnRhYnM6aG92ZXIsIC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQp0YWJsZS5jb250ZW50IHRoOmhvdmVyLCB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCwgdGFibGUuY29udGVudCB0ZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Y29ybmZsb3dlcmJsdWU7IH0KYm9keT5kaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQoKLyogc2Nyb2xsYmFyICovCmJvZHkgeyBvdmVyZmxvdzotbW96LXNjcm9sbGJhcnMtbm9uZTsgLW1zLW92ZXJmbG93LXN0eWxlOm5vbmU7IH0KYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZmllbGRzZXQucGFuZWwuQWN0aW9uPmRpdi5vdXRwdXQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOjAgIWltcG9ydGFudDsgaGVpZ2h0OjAgIWltcG9ydGFudDsgfQpkaXYucHJvamVjdDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZGl2LmNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CgovKiB0YWJsZSBjYXJkICovCmRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDFweCAjZTdlN2U3OyBtYXJnaW46MTBweDsgd2lkdGg6MjQwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGZvbnQtc2l6ZToxLjJyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICNlN2U3ZTc7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi5jb250ZW50IHsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6NDVweDsgfQpib2R5LndoaXRlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAwMDsgfQpkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0uc3RvcCB7IGNvbG9yOmdyYXk7IH0KCi8qIHdoaXRlICovCmJvZHkud2hpdGUgeyBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoNSwzNCw1NiwwLjc1KTsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBzZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnllbGxvd2dyZWVuOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIHRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9dGV4dF0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdIHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1vcGVuXSB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0b3BdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPWRlbGV0ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXJlbW92ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5BY3Rpb24geyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LnBhbmVsLkFjdGlvbiBkaXYuYWN0aW9uIHsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmZhMTsgfQpib2R5LndoaXRlIGZpZWxkc2V0LmZ1bGwgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjY2UwZjRlYjsgY29sb3I6d2hpdGU7IH0KCi8qIHdoaXRlIGhvdmVyICovCmJvZHkud2hpdGUgbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CmJvZHkud2hpdGUgc2VsZWN0OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojOTljYzY2N2Q7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjdhY2M4YzsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQuYWN0aW9uIHRkOmxhc3QtY2hpbGQgeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBoMTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmJvZHkud2hpdGUgaDI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGgzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRoOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzY0OTVlZDYzOyB9CmJvZHkud2hpdGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CiAKLyogcHJpbnQgKi8KYm9keS5wcmludCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkucHJpbnQgbGVnZW5kLCBib2R5LnByaW50IHNlbGVjdCwgYm9keS5wcmludCBpbnB1dCwgYm9keS5wcmludCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IGJveC1zaGFkb3c6MHB4IDBweCAwcHggMHB4ICM2MjZiZDA7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50LmFjdGlvbiB0ZDpsYXN0LWNoaWxkIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYubmFtZSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYuaXRlbS5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQpib2R5LnByaW50IGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LnByaW50IGZpZWxkc2V0LnBhbmVsIHsgYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgc3ZnIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQoKYm9keS5tb2JpbGUgbGVnZW5kIHsgZm9udC1zaXplOjEuNnJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgc2VsZWN0IHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IGJvcmRlci1yYWRpdXM6MDsgbWFyZ2luLXJpZ2h0OjEwOyB9CmJvZHkubW9iaWxlIHRleHRhcmVhIHsgZm9udC1zaXplOjEuMnJlbTsgYm9yZGVyLXJhZGl1czowOyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9dGV4dF0geyBmb250LXNpemU6MS4ycmVtOyBoZWlnaHQ6MzhweDsgYm9yZGVyLXJhZGl1czowOyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9YnV0dG9uXSB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozOHB4OyBib3JkZXItcmFkaXVzOjA7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuZmxvYXQgaW5wdXRbdHlwZT1idXR0b25dIHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgdGFibGUubGF5b3V0IGRpdi50b2dnbGUgeyBmb250LXNpemU6NDhweDsgfQpib2R5Lm1vYmlsZSB0YWJsZS5jb250ZW50IHRoIHsgcGFkZGluZzo2cHggNnB4OyB9Cgpib2R5Lm1vYmlsZSB0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLnByb2plY3QgeyB3aWR0aDozMHB4OyB9CmJvZHkubW9iaWxlIHRhYmxlLmxheW91dCB0ZC5jb250ZW50IGRpdi50b2dnbGUucHJvZmlsZSB7IHdpZHRoOjMwcHg7IH0KCmJvZHkubW9iaWxlIGZvcm0ub3B0aW9uPmRpdi5pdGVtIHsgbWFyZ2luOjA7IGhlaWdodDozOHB4OyB9CmJvZHkubW9iaWxlIGRpdi5hY3Rpb24+ZGl2Lml0ZW0geyBtYXJnaW46MDsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgdG9wOjM4cHg7IH0KYm9keS5tb2JpbGU+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZT5kaXYuaW5wdXQubG9naW4gaW5wdXQgeyBmb250LXNpemU6MS40cmVtOyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXVzZXJuYW1lXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXBhc3N3b3JkXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6OHB4IDIwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IHRvcDowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc3RhdGUudGltZSB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuSGVhZGVyLmhlYWQgZGl2Lm91dHB1dCBkaXYgeyBoZWlnaHQ6MzhweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlci5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMjQzOTUwYmY7IGZvbnQtc2l6ZToxLjZyZW07IG1pbi13aWR0aDoyNDBweDsgcG9zaXRpb246Zml4ZWQ7IHRvcDozcmVtOyB6LWluZGV4OjEwOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyB3aWR0aDozMjBweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5BY3Rpb24ubWFpbiB7IG1hcmdpbi10b3A6M3JlbTsgbWFyZ2luLWJvdHRvbTozcmVtOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkFjdGlvbi5tYWluLmNtZCB7IG1hcmdpbi10b3A6MDsgbWFyZ2luLWJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCBkaXYub3V0cHV0IGRpdiB7IGhlaWdodDoyLjZyZW07IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgaGVpZ2h0OjM4cHg7IH0KCmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IHBvc2l0aW9uOnVuc2V0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgd2lkdGg6MjQwcHg7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5zdGF0ZS50aW1lIHsgZGlzcGxheTpibG9jazsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuQWN0aW9uLm1haW4geyBtYXJnaW4tdG9wOjA7IG1hcmdpbi1ib3R0b206MDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgeyBwb3NpdGlvbjp1bnNldDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgd2lkdGg6MjQwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5kcmF3LnRyZW5kIGRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcudHJlbmQgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgaGVpZ2h0OjE2MHB4OyBmbG9hdDpub25lOyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0geyB3aWR0aDphdXRvOyBmbG9hdDpsZWZ0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6YXV0bzsgZmxvYXQ6bGVmdDsgfQoKLyogbWlzYyAqLwpib2R5Lm1vYmlsZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2ggZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBwYWRkaW5nOjBweDsgbWFyZ2luOjBweDsgfQpmaWVsZHNldC5wYW5lbC5BY3Rpb24uY21kPmRpdi50b2dnbGUucHJvamVjdCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wbHVnaW4uY29uZmlnIGZvcm0ub3B0aW9uIGlucHV0W25hbWU9a2V5XSB7IHdpZHRoOjI0MHB4OyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luLnBhcnNlLmNtZD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5wbGFuPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5TZWFyY2ggYSB7IGNvbG9yOnllbGxvdzsgfQpib2R5LmJsYWNrIGEgeyBjb2xvcjp5ZWxsb3c7IH0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LkhlYWRlciB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IGhlaWdodDo2MHB4OyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyIHsgYm9yZGVyLXJpZ2h0OnNvbGlkIDFweCAjZTdlN2U3OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyBwYWRkaW5nOjEwcHggMTBweDsgd2lkdGg6MjAwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IGNvbG9yOmJsYWNrOyBwYWRkaW5nOjEwcHggNDBweDsgYm9yZGVyLWxlZnQ6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzAxNTJkOTsgY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYubGlzdCBkaXYuaXRlbSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyBib3JkZXItbGVmdDpub25lOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQoKYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206IHNvbGlkIDFweCByZWQ7IGhlaWdodDozOHB4OyB3aWR0aDo2MDBweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2LmFjdGlvbiBkaXYudGFicyB7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCB7IG1hcmdpbi10b3A6NThweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXIgeyBib3gtc2hhZG93Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXI+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KCmJvZHkuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IG1pbi13aWR0aDoyNDBweDsgYm9yZGVyLXJhZGl1czo1cHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgYm94LXNoYWRvdzo1cHggNXB4IDEwcHggNXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuZmVlbC5mbG9hdCB7IHRvcDowOyB9CgpkaXYub3V0cHV0IGRpdi5yb3cgZGl2LmNvbCB7IGZsb2F0OmxlZnQ7IGJvcmRlcjpzb2xpZCAxcHggZ3JlZW47IH0KCmJvZHkud2hpdGUuc2ltcGxlIGRpdi5wcm9maWxlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5kaXNwbGF5IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5jb2RlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IGJvcmRlcjpub25lOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LnBsdWdpbiBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgbGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlPmRpdi5jYXJ0ZSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGJvcmRlcjpzb2xpZCAxcHggI2U3ZTdlNzsgfQpib2R5LndoaXRlLnNpbXBsZT5kaXYuY2FydGUgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBkaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNlM2U2ZjE7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuIHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOmJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6bGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiMwMTUyZDk7IGZvbnQtc2l6ZTowLjhyZW07IHBhZGRpbmc6NXB4IDEwcHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJveC1zaGFkb3c6MnB4IDJweCA4cHggMnB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYuYWN0aW9uPmRpdi5pdGVtIGlucHV0W3R5cGU9dGV4dF0geyBjb2xvcjpibGFjazsgfQoKYm9keS53aGl0ZSBkaXYucHJvamVjdC5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUgZGl2LnByb2ZpbGUuYXV0byB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LmJsYWNrIGRpdi5wcm9qZWN0LmF1dG8geyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5ibGFjayBkaXYucHJvZmlsZS5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmRpdi5wcm9qZWN0LmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDowOyB6LWluZGV4OjEwOyB9CmRpdi5wcm9maWxlLmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6MDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC5wbHVnaW4ubG9jYXRpb24+ZGl2LmFjdGlvbiBpbnB1dFt0eXBlPXRleHRdIHsKCXdpZHRoOjQwcHg7Cn0KCmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrOyB9CmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQpmaWVsZHNldC54dGVybT5kaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQovKiAvcGFuZWwvYWN0aW9uLmNzcyAqLwpmaWVsZHNldC5BY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMTE0LCAxNTMsIDE2MiwgMC41NCk7IG1pbi13aWR0aDoxNjBweDsgfQpmaWVsZHNldC5BY3Rpb24+ZGl2LmFjdGlvbiB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB3aWR0aDppbmhlcml0OyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24gZGl2LnRhYnMgeyBmb250LXNpemU6MS4xcmVtOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjIxcHg7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24gZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZDojNjQ5NWVkNjM7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24gZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kOiM2NDk1ZWQ2MzsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYuYWN0aW9uIHsgZGlzcGxheTpibG9jazsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYub3V0cHV0PmZpZWxkc2V0PmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbi5zZWxlY3QgeyBkaXNwbGF5OmJsb2NrOyB9CgpmaWVsZHNldC5BY3Rpb24uZ3JpZD5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IG92ZXJmbG93OmF1dG87IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4+ZGl2Lm91dHB1dCB7IG92ZXJmbG93OmF1dG87IH0KCmZpZWxkc2V0LkFjdGlvbi5mcmVlPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luIHsgcG9zaXRpb246YWJzb2x1dGU7IH0KZmllbGRzZXQuQWN0aW9uLmZyZWU+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4uc2VsZWN0IHsgZGlzcGxheTpibG9jazsgfQpmaWVsZHNldC5BY3Rpb24uZmxvdz5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IGZsb2F0OmxlZnQ7IH0KCmZpZWxkc2V0LnBhbmVsLmNtZD5kaXYub3V0cHV0PmZpZWxkc2V0LnBsdWdpbiB7IHBhZGRpbmc6MDsgbWFyZ2luOjA7IH0KZmllbGRzZXQucGFuZWwuY21kPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luPmxlZ2VuZCB7IHBhZGRpbmc6MCAxMHB4OyBtYXJnaW4tcmlnaHQ6M3B4OyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5BY3Rpb24+ZGl2LnByb2plY3QudG9nZ2xlIHsKCWJhY2tncm91bmQtY29sb3I6Y29ybnNpbGs7IG9wYWNpdHk6MC40OyBjb2xvcjp0ZWFsOyBmb250LXNpemU6IDI4cHg7IHBhZGRpbmctdG9wOiA1MHB4OyBoZWlnaHQ6IDEwMHB4OyB3aWR0aDoyMHB4OyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMzAlOwoJYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MjBweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MjBweDsKfQoKZGl2LmhlYWQgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjQycHg7IGNsZWFyOmJvdGg7IH0KZGl2LmhlYWQgZGl2LnVzZXJuYW1lIHsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMHB4OyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSBkaXYubmFtZSB7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgZGl2Lmljb24geyBmbG9hdDpsZWZ0OyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSBpbWcgeyBoZWlnaHQ6NDJweDsgfQpkaXYuaGVhZCBkaXYubWVudSB7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmhlYWQ+ZGl2Lm1lbnU6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IH0KZGl2LmxlZnQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IHdpZHRoOjE2MHB4OyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93OmF1dG87IGZsb2F0OmxlZnQ7IH0KZGl2LmxlZnQgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweCAxMHB4OyB9CmRpdi5sZWZ0IGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyB9CmRpdi5sZWZ0IGRpdi51c2VybmFtZSBkaXYgeyBjb2xvcjp3aGl0ZTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTBweDsgfQpkaXYubGVmdCBkaXYudXNlcm5hbWUgaW1nIHsgd2lkdGg6MTIwcHg7IH0KZGl2Lm1haW4gaWZyYW1lIHsgYm9yZGVyOjA7IH0KZGl2Lm1haW4gaW5wdXRbdHlwZT1idXR0b25dIHsgcGFkZGluZzowIDIwcHg7IH0KZGl2Lm1haW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNjY2NjY2M7IGNvbG9yOmJsYWNrOyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB7IGJhY2tncm91bmQtY29sb3I6I2Y4ZjhmODsgcGFkZGluZzoxMHB4OyBtYXJnaW46MTBweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gbGVnZW5kIHsgbWFyZ2luLWJvdHRvbToxMHB4OyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBzZWxlY3QgeyBvdXRsaW5lOm5vbmU7IGJveC1zaGFkb3c6bm9uZTsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gZm9ybS5vcHRpb24geyBkaXNwbGF5OmJsb2NrOyBjbGVhcjpib3RoOyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBmb3JtLm9wdGlvbiBkaXYuaXRlbSB7IG1hcmdpbjo1cHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGRpdi5hY3Rpb24gZGl2Lml0ZW0geyBtYXJnaW46NXB4OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRyIHsgYm9yZGVyOnNvbGlkIDFweCBsaWdodGdyYXk7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IHBhZGRpbmc6MTBweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gdGFibGUuY29udGVudCB0ZCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgfQpkaXYuZm9vdCB7IGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NXB4OyBoZWlnaHQ6NDJweDsgY2xlYXI6Ym90aDsgfQpkaXYuZm9vdCBkaXYudXNlcm5hbWUgeyBmbG9hdDpyaWdodDsgbWFyZ2luLXJpZ2h0OjEwcHg7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIGRpdi5uYW1lIHsgcGFkZGluZzoxMHB4OyBmbG9hdDpsZWZ0OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBkaXYuaWNvbiB7IGZsb2F0OmxlZnQ7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIGltZyB7IGhlaWdodDo0MnB4OyB9CmRpdi5mb290IGRpdi5tZW51IHsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuZm9vdD5kaXYubWVudTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzMyMzIzMjsgfQoKZGl2LnRhYnM6aG92ZXIgewoJYmFja2dyb3VuZC1jb2xvcjojMjcyNzI3Owp9CmRpdi50YWJzIGRpdi5uYW1lIHsKCWhlaWdodDo0NnB4OyB3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOwoJcG9zaXRpb246c3RpY2t5OyB0b3A6NXB4OwoJei1pbmRleDoxOwp9CmRpdi50YWJzIGRpdi5uYW1lIGRpdi5pdGVtIHsKCWNvbG9yOmdyYXk7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsKfQpkaXYudGFicyBkaXYubmFtZSBkaXYuaXRlbS5zZWxlY3QgewoJYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjb2xvcjp3aGl0ZTsKIAlib3JkZXItYm90dG9tOnNvbGlkIHJlZCAycHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2UgewoJb3ZlcmZsb3c6YXV0bzsgY2xlYXI6Ym90aDsKfQpkaXYudGFicyBkaXYucGFnZT5kaXYuaW5wdXQgewoJcGFkZGluZzo1cHg7IHBvc2l0aW9uOnN0aWNreTsgdG9wOjBweDsKfQpkaXYudGFicyBkaXYucGFnZT5kaXYuaW5wdXQgaW5wdXQgewoJYmFja2dyb3VuZC1jb2xvcjojMjEyMTIxOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOjA7IG91dGxpbmU6bm9uZTsgd2lkdGg6MjMwcHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lml0ZW0gewoJYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjbGVhcjpib3RoOyBkaXNwbGF5Om5vbmU7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lmxpc3QgewoJcGFkZGluZy1sZWZ0OjIwcHg7IGRpc3BsYXk6bm9uZTsgY2xlYXI6Ym90aDsKfQpkaXYudGFicyBkaXYucGFnZT5kaXYubGlzdC5zZWxlY3QgewoJYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyBkaXNwbGF5OmJsb2NrOwp9CmRpdi5sZWZ0IGRpdi5saXN0IHsKCXBhZGRpbmctbGVmdDoyMHB4Owp9CgpkaXYudGFicy5sZWZ0IGRpdi5uYW1lIHsKCWZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMubGVmdCBkaXYubmFtZSBkaXYuaXRlbSB7Cglib3JkZXItYm90dG9tOm5vbmU7IGZsb2F0Om5vbmU7Cn0KZGl2LnRhYnMubGVmdCBkaXYubmFtZSBkaXYuaXRlbS5zZWxlY3QgewoJYm9yZGVyLXJpZ2h0OnNvbGlkIHJlZCAycHg7Cn0KZGl2LnRhYnMubGVmdCBkaXYucGFnZSB7Cgl3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOwogCWNsZWFyOm5vbmU7IGZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMubGVmdCBkaXYucGFnZT5kaXYuaXRlbSB7CglkaXNwbGF5OmJsb2NrOwp9CgpkaXYudGFicy52b2lkIGRpdi5uYW1lIHsKCWRpc3BsYXk6bm9uZTsKfQpkaXYudGFicy52b2lkIGRpdi5wYWdlPmRpdi5pdGVtIHsKCWRpc3BsYXk6YmxvY2s7Cn0KCgovKiAvcGFuZWwvZm9vdGVyLmNzcyAqLwpmaWVsZHNldC5Gb290ZXIgeyBmb250LXNpemU6MS4xcmVtOyBwYWRkaW5nOjAgNXB4OyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IHsgb3ZlcmZsb3c6aGlkZGVuOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdiB7IHBhZGRpbmc6NXB4OyBoZWlnaHQ6MjFweDsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMmU1MTVmOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdi50aXRsZSB7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlIHsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYudG9hc3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmRhcmtjeWFuOyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYuY21kIHsgcGFkZGluZzowcHg7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgaW5wdXRbbmFtZT1jbWRdIHsgd2lkdGg6MTIwcHg7IGJvcmRlci1yYWRpdXM6MDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBpbnB1dFtuYW1lPWNtZF06Zm9jdXMgeyB3aWR0aDozMjBweDsgfQoKLyogL3BhbmVsL2hlYWRlci5jc3MgKi8KZmllbGRzZXQuSGVhZGVyIHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IHBhZGRpbmc6MCA1cHg7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzpoaWRkZW47IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2IHsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyBmbG9hdDpsZWZ0OyBjdXJzb3I6cG9pbnRlcjsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXY6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMyZTUxNWY7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnRpdGxlIHsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUgeyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyIHsgcGFkZGluZzowOyBoZWlnaHQ6MzFweDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyPmltZyB7IGhlaWdodDozMXB4OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2ggeyBtYXJnaW4tbGVmdDoyMHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2g+aW5wdXQgeyBtYXJnaW4tdG9wOi01cHg7IGJvcmRlci1yYWRpdXM6MDsgfQoKCi8qIC9wYW5lbC9yaXZlci5jc3MgKi8KZmllbGRzZXQuUml2ZXIgeyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyBwYWRkaW5nOjAgMTJweDsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IHsgd2lkdGg6MTgwcHg7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IHBhZGRpbmc6M3B4IDE2cHg7IGJvcmRlci1sZWZ0OnNvbGlkIDNweCAjMDBmZmFlOyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBib3JkZXItbGVmdDpzb2xpZCAzcHggI2NjZGM0YzsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IHsgcGFkZGluZy1sZWZ0OjVweDsgbWFyZ2luLWxlZnQ6OHB4OyB9CgovKiAvcGFuZWwvc2VhcmNoLmNzcyAqLwpmaWVsZHNldC5TZWFyY2ggeyBiYWNrZ3JvdW5kOiMwNDFhMjViZDsgcGFkZGluZzoxMHB4OyBwb3NpdGlvbjpmaXhlZDsgbGVmdDowcHg7IHRvcDozMXB4OyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuU2VhcmNoIGlucHV0LndvcmQgeyB3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOyB9CmZpZWxkc2V0LnBhbmVsLlNlYXJjaD5kaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgZGFya2N5YW47IH0KCi8qIC9wbHVnaW4vbG9jYWwvY2hhdC9kaXYuY3NzICovCmZpZWxkc2V0LmxheW91dCBsZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQubGF5b3V0IGZpZWxkc2V0LnBsdWdpbiB7IHBhZGRpbmc6MDsgbWFyZ2luOjA7IH0KCmZpZWxkc2V0LmRpdiBkaXYub3V0cHV0IHRkIHsgdmVydGljYWwtYWxpZ246dG9wOyB9CmZpZWxkc2V0LmRpdiBkaXYub3V0cHV0IGZpZWxkc2V0LnNwYW4+ZGl2Lm91dHB1dD5maWVsZHNldCB7IG92ZXJmbG93OmF1dG87IGZsb2F0OmxlZnQ7IH0KCmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdiBkaXYucHJvamVjdCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXYgZGl2LnByb2ZpbGUgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmRpdi5zdGF0dXMgeyBkaXNwbGF5Om5vbmU7IH0KCgovKiAvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuY3NzICovCmZpZWxkc2V0LmlubmVyPmZvcm0ub3B0aW9uIGlucHV0W25hbWU9cGF0aF0geyB3aWR0aDo4MHB4OyB9CmZpZWxkc2V0LmlubmVyPmZvcm0ub3B0aW9uIGlucHV0W25hbWU9ZmlsZV0geyB3aWR0aDoxNjBweDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuYWN0aW9uPmRpdi50YWJzIHsgcGFkZGluZzo1cHg7IG1hcmdpbjowIDFweDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuYWN0aW9uPmRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LmFjdGlvbj5kaXYudGFicy5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQoKZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50IHsgcG9zaXRpb246cmVsYXRpdmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOndoaXRlOyBmb250LXNpemU6MTZweDsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBwb3NpdGlvbjpyZWxhdGl2ZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLmxpbmUgeyBwb3NpdGlvbjpzdGlja3k7IGxlZnQ6MDsgdGV4dC1hbGlnbjpyaWdodDsgcGFkZGluZzowIDZweDsgYm9yZGVyLXJpZ2h0OnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0cjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgdGQubGluZSB7IGJhY2tncm91bmQtY29sb3I6IzY0OTVlZDYzOyBib3JkZXI6c29saWQgMXB4IHJlZDsgYm9yZGVyLXJpZ2h0OnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHsgd2hpdGUtc3BhY2U6cHJlOyBwYWRkaW5nLWxlZnQ6MTBweDsgY3Vyc29yOnRleHQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uY29tbWVudCB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgY29sb3I6Y3lhbjsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5rZXl3b3JkIHsgY29sb3I6eWVsbG93OyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmRhdGF0eXBlIHsgY29sb3I6Z3JlZW47IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uZnVuY3Rpb24geyBjb2xvcjpjeWFuOyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmNvbnN0YW50IHsgY29sb3I6bWFnZW50YTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5zdHJpbmcgeyBjb2xvcjptYWdlbnRhOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudCBpZnJhbWUgeyBib3JkZXI6MDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLnByb2ZpbGUgaWZyYW1lIHsgYm9yZGVyOjA7IH0KCmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnBhdGggeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuaW5uZXIgZGl2Lm91dHB1dCBmaWVsZHNldC50b29sa2l0IHsgcG9zaXRpb246YWJzb2x1dGU7IGJvdHRvbTowcHg7IHJpZ2h0OjBweDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGZpZWxkc2V0LnRvb2xraXQ+ZGl2Lm91dHB1dD5maWVsZHNldCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGZpZWxkc2V0LnRvb2xraXQ+ZGl2Lm91dHB1dD5maWVsZHNldC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgY29sb3I6d2hpdGU7IGRpc3BsYXk6YmxvY2s7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQgeyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyZWVuOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpncmVlbjsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIHsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IH0KCmJvZHkud2hpdGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUgZmllbGRzZXQuaW5uZXIuZmxvYXQ+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOndoaXRlOyB9CmJvZHkuYmxhY2sgZmllbGRzZXQuaW5uZXIuZmxvYXQ+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOndoaXRlOyB9Cgpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyYXk7IHBhZGRpbmc6MHB4OyBoZWlnaHQ6MzFweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyYXk7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgcGFkZGluZzo3cHggMjBweDsgaGVpZ2h0OjE3cHg7IGZsb2F0OmxlZnQ7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzFkMzM0OTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi5wYXRoIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyBwYWRkaW5nOjRweCAxMHB4OyBtYXJnaW4tYm90dG9tOjRweDsgZGlzcGxheTpibG9jazsgY2xlYXI6Ym90aDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLmxpbmUgeyBwYWRkaW5nLXRvcDo0cHg7IGJvcmRlci1yaWdodDpub25lOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCB7IHBhZGRpbmctdG9wOjJweDsgYm9yZGVyOnNvbGlkIDFweCB0cmFuc3BhcmVudDsgfQoKYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYucHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5wcm9qZWN0LnRvZ2dsZSB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lml0ZW0geyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicy5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgYm94LXNoYWRvdzowcHggMHB4IDVweCAxcHggZ3JleTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnBhdGggeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHRkLmxpbmUgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgY29sb3I6d2hpdGU7IGJvcmRlcjpub25lOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHRkLnRleHQgeyBib3JkZXI6c29saWQgMXB4IGxpZ2h0Z3JheTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5zdHJpbmcgeyBjb2xvcjpyb3lhbGJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uZnVuY3Rpb24geyBjb2xvcjpkYXJrcmVkOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmtleXdvcmQgeyBjb2xvcjpibHVlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IGNvbG9yOmJsYWNrOyBwYWRkaW5nOjBweCAxMHB4OyBib3JkZXItbGVmdDpzb2xpZCAycHggcmVkOyBoZWlnaHQ6MzBweDsgZmxvYXQ6cmlnaHQ7IGJvcmRlci1yYWRpdXM6MDsgYm94LXNoYWRvdzpub25lOyB9Cgpib2R5Lm1vYmlsZSBmaWVsZHNldC5pbm5lcj5mb3JtLm9wdGlvbiBpbnB1dFtuYW1lPWZpbGVdIHsgd2lkdGg6OTBweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5wbHVnaW4uaW5uZXIgZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQucGx1Z2luLmlubmVyIGRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9Cgpib2R5Lm1vYmlsZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpibG9jazsgfQpib2R5Lm1vYmlsZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGJsdWU7IHdpZHRoOjMwcHg7IH0KYm9keS5tb2JpbGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnRvZ2dsZS5kaXNwbGF5IHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGJsdWU7IG1hcmdpbi10b3A6LTMzcHg7IGhlaWdodDozMHB4OyB3aWR0aDoxMDBweDsgfQoKLnVuc2VsZWN0YWJsZSB7Cgktd2Via2l0LXRvdWNoLWNhbGxvdXQ6bm9uZTsKCS13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsKCS1raHRtbC11c2VyLXNlbGVjdDpub25lOwoJLW1vei11c2VyLXNlbGVjdDpub25lOwoJLW1zLXVzZXItc2VsZWN0Om5vbmU7Cgktby11c2VyLXNlbGVjdDpub25lOwoJdXNlci1zZWxlY3Q6bm9uZTsKfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5wbHVnaW4gZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ubm9uY2UgeyBjb2xvcjpsaWdodGdyYXk7IH0KCi8qIC9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9pbm5lci5jc3MgKi8KCi8qIC9wbHVnaW4vbG9jYWwvY29kZS92aW1lci5jc3MgKi8KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50IHsKCWJhY2tncm91bmQtY29sb3I6IzAwMDAwMDAwOyBjb2xvcjojMDAwMDAwMDA7IGZvbnQtc2l6ZToxZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsKCXBhZGRpbmc6MDsgcGFkZGluZy1sZWZ0OjEycHg7IGJvcmRlcjpub25lOyBvdXRsaW5lOm5vbmU7IG1hcmdpbjowOyBtYXJnaW4tdG9wOi0zcHg7CiAJaGVpZ2h0OjIycHg7IHBvc2l0aW9uOmFic29sdXRlOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5ub3JtYWwgeyBjYXJldC1jb2xvcjpncmF5OyB9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5pbnNlcnQgeyBjYXJldC1jb2xvcjp5ZWxsb3c7IH0KCmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHsKCWhlaWdodDoyMHB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDozMnB4OyBtYXJnaW4tdG9wOjIwcHg7CglkaXNwbGF5Om5vbmU7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUuaW5zZXJ0IHsKCWRpc3BsYXk6YmxvY2s7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MS4xcmVtOyBjb2xvcjojZjBmOGZmMDA7IG1hcmdpbi1sZWZ0OjVweDsgZmxvYXQ6bGVmdDsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZSB7CgliYWNrZ3JvdW5kOmxpZ2h0Ymx1ZTsgbWF4LWhlaWdodDo0MDBweDsgbWF4LXdpZHRoOjgwMHB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0Owp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGggewoJZGlzcGxheTpub25lOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGQgewoJZm9udC1zaXplOjEuMXJlbTsKfQoKYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MXJlbTsKfQpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRkIHsKCWZvbnQtc2l6ZToxcmVtOwp9Cgpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQgewogCW1hcmdpbi10b3A6MXB4Owp9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lmluc2VydCB7IGNhcmV0LWNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lm5vcm1hbCB7IGNhcmV0LWNvbG9yOmxpZ2h0Z3JheTsgfQoKZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5saXN0IGRpdi5pdGVtIHsgcGFkZGluZzo1cHg7IGZsb2F0OmxlZnQ7IGNsZWFyOm5vbmU7IH0KZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KCi8qIC9wbHVnaW4vbG9jYWwvdGVhbS9wbGFuLmNzcyAqLwpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgdGQgeyB2ZXJ0aWNhbC1hbGlnbjp0b3A7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkLm92ZXIgeyBib3JkZXI6c29saWQgMnB4IHJlZDsgfQpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgdGQgZGl2LmRhdGUgeyBjb2xvcjpncmF5OyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYucHJlcGFyZSB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgY29sb3I6d2hpdGU7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IGRpdi5wcm9jZXNzIHsgYmFja2dyb3VuZC1jb2xvcjpncmVlbjsgY29sb3I6d2hpdGU7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IGRpdi5jYW5jZWwgeyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgY29sb3I6d2hpdGU7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IGRpdi5maW5pc2ggeyBiYWNrZ3JvdW5kLWNvbG9yOmdyYXk7IGNvbG9yOndoaXRlOyB9CgovKiAvcGx1Z2luL2xvY2FsL3dpa2kvZGF0YS5jc3MgKi8KZmllbGRzZXQuZGF0YSBkaXYub3V0cHV0IHRhYmxlLmNvbnRlbnQgdHIuc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQpmaWVsZHNldC5kYXRhIGRpdi5vdXRwdXQgdGFibGUuY29udGVudCB0ci5vdmVyIHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQoKLyogL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuY3NzICovCmZpZWxkc2V0LmRyYXcgZGl2Lm91dHB1dCB7IGJhY2tncm91bmQtY29sb3I6IzFiNWI3MzhjOyBmb250LXNpemU6MjBweDsgfQpmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgc3ZnIHsgYmFja2dyb3VuZC1jb2xvcjojMWI1YjczOGM7IH0KCi8qIC9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L2RyYXcuY3NzICovCgovKiAvcGx1Z2luL2xvY2FsL3dpa2kvZmVlbC5jc3MgKi8KZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IGltZyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5mZWVsLmZsb2F0IGRpdi5vdXRwdXQgaW1nIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0KZmllbGRzZXQuZmVlbC5mbG9hdCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0KCi8qIC9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmNzcyAqLwpmaWVsZHNldC53b3JkIGZvcm0ub3B0aW9uIGlucHV0W25hbWU9cGF0aF0geyB3aWR0aDoxMjdweDsgfQoKZmllbGRzZXQud29yZD5kaXYubmF2bWVudSB7IGJhY2tncm91bmQtY29sb3I6aW5oZXJpdDsgb3ZlcmZsb3c6YXV0bzsgbWluLXdpZHRoOjEyMHB4OyBjbGVhcjpib3RoOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgZGl2Lmxpc3QgeyBtYXJnaW4tbGVmdDoyMHB4OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgZGl2Lml0ZW0geyBmb250LXNpemU6MS40ZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtZmFtaWx5OmN1cnNpdmU7IHBhZGRpbmc6NHB4IDIwcHg7IH0KZmllbGRzZXQud29yZD5kaXYubmF2bWVudT5kaXYuaXRlbSB7IGZvbnQtc2l6ZToxLjZlbTsgfQoKZmllbGRzZXQud29yZCBhIHsgd29yZC1icmVhazpicmVhay1hbGw7IH0KZmllbGRzZXQud29yZCBici5zdG9yeSB7IGNsZWFyOmJvdGg7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeSB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5IGxpLkgyIHsgZm9udC1zaXplOjEuNGVtOyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnkgbGkuSDMgeyBmb250LXNpemU6MS4yZW07IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9cHJlbWVudV0geyBjdXJzb3I6cG9pbnRlcjsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5W2RhdGEtdHlwZT1wcmVtZW51XSBsaTpob3ZlciB7IGJhY2tncm91bmQ6Y3lhbjsgY29sb3I6Ymx1ZTsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5W2RhdGEtdHlwZT1lbmRtZW51XSB7IGNsZWFyOmJvdGg7IH0KZmllbGRzZXQud29yZCBwLnN0b3J5W2RhdGEtbmFtZT1pbm5lcl0geyBiYWNrZ3JvdW5kLWNvbG9yOiM0YjZjOGE3YTsgcGFkZGluZzo0cHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgNHB4IGJsdWU7IG1hcmdpbjoxMHB4IDBweDsgfQpmaWVsZHNldC53b3JkIHAuc3RvcnlbZGF0YS1uYW1lPWlubmVyXTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6I2MxMGM4YTsgY3Vyc29yOmNvcHk7IH0KZmllbGRzZXQud29yZCBmaWVsZHNldC5zdG9yeSB7IG1hcmdpbjoxMHB4OyB9CmZpZWxkc2V0LndvcmQgZmllbGRzZXQuc3RvcnkuZnVsbCB7IG1hcmdpbjowcHg7IH0KCmZpZWxkc2V0LndvcmQuZmxvYXQgeyBwYWRkaW5nOjA7IG1hcmdpbjowOyB3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOyBwb3NpdGlvbjpmaXhlZDsgbGVmdDowOyB0b3A6MDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2LnN0YXR1cyB7IGNsZWFyOm5vbmU7IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjojZjBmOGZmODA7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3c6YXV0bzsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5vdXRwdXQ+ZGl2LnByb2plY3QgeyBiYWNrZ3JvdW5kOiM0NjgyYjQ2YjsgcGFkZGluZzoxMHB4OyBwb3NpdGlvbjpmaXhlZDsgcmlnaHQ6MDsgdG9wOjMxcHg7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQud29yZC5mbG9hdCBkaXYuY29udGVudCBkaXYucGFnZSB7IG1hcmdpbi10b3A6MzFweDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQgZGl2LnBhZ2Uuc2hvdyB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQud29yZC5mbG9hdCBkaXYuY29udGVudC5ncmlkIGRpdi5wYWdlIHsgYmFja2dyb3VuZC1jb2xvcjojYTRjYmVjYjU7IG1hcmdpbjoxMHB4OyBoZWlnaHQ6MjAwcHg7IHdpZHRoOjIwMHB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgaDEgeyB0ZXh0LWFsaWduOmNlbnRlcjsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGgyIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KZmllbGRzZXQud29yZC5mbG9hdCBoMyB7IHRleHQtYWxpZ246Y2VudGVyOyB9CgpmaWVsZHNldC53b3JkLmNtZD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmNtZD5kaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CgpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9ZmllbGRdPmRpdi5tZW51IHsgZmxvYXQ6bGVmdDsgb3ZlcmZsb3c6YXV0bzsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9ZmllbGRdPmRpdi5saXN0IHsgZmxvYXQ6bGVmdDsgb3ZlcmZsb3c6YXV0bzsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9ZmllbGRdPmRpdi5tZW51IGRpdi5saXN0IGRpdi5pdGVtIHsgcGFkZGluZzowIDIwcHg7IH0KCmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdW2RhdGEtbmFtZT1zaGVsbF0gbGFiZWwgewoJLW1vei11c2VyLXNlbGVjdDpub25lOyAvKueBq+eLkCovCgktd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7IC8qd2Via2l05rWP6KeI5ZmoKi8KCS1tcy11c2VyLXNlbGVjdDpub25lOyAvKklFMTAqLwoJLWtodG1sLXVzZXItc2VsZWN0Om5vbmU7IC8q5pep5pyf5rWP6KeI5ZmoKi8KCXVzZXItc2VsZWN0Om5vbmU7Cn0KCgovKiAvcGx1Z2luL3N0b3J5L2Zvcm0uY3NzICovCmRpdi5vdXRwdXQuZm9ybSBkaXYuaXRlbSB7CglwYWRkaW5nOjQwcHg7Cn0KCi8qIC9wbHVnaW4vc3RvcnkvanNvbi5jc3MgKi8KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDAwMDsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gZGl2Lml0ZW0geyBwYWRkaW5nLWxlZnQ6MTVweDsgYm9yZGVyOnNvbGlkIDFweCAjMDAwMDAwMGQ7IGJvcmRlci1sZWZ0OmRhc2hlZCAxcHggbGlnaHRibHVlOyBtYXJnaW4tbGVmdDo1cHg7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIGRpdi5pdGVtOmhvdmVyIHsgYm9yZGVyOnNvbGlkIDFweCByZWQ7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ubm9uY2UgeyBjb2xvcjojOWNiZWNhNGY7IGN1cnNvcjpwb2ludGVyOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOnllbGxvdzsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5zdHJpbmcgeyBjb2xvcjptYWdlbnRhOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmNvbnN0IHsgY29sb3I6Y3lhbjsgfQoKCi8qIC9wbHVnaW4vc3Rvcnkvc3BpZGUuY3NzICovCmZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgovKiAvcGx1Z2luL3N0b3J5L3RyZW5kLmNzcyAqLwpmaWVsZHNldC5kcmF3LnRyZW5kIGRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGRpc3BsYXk6bm9uZTsgfQoKCi8qIC9yZXF1aXJlL25vZGVfbW9kdWxlcy94dGVybS9jc3MveHRlcm0uY3NzICovCi8qKgogKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIHh0ZXJtLmpzIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIENvcHlyaWdodCAoYykgMjAxMi0yMDEzLCBDaHJpc3RvcGhlciBKZWZmcmV5IChNSVQgTGljZW5zZSkKICogaHR0cHM6Ly9naXRodWIuY29tL2NoamovdGVybS5qcwogKiBAbGljZW5zZSBNSVQKICoKICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weQogKiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSAiU29mdHdhcmUiKSwgdG8gZGVhbAogKiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzCiAqIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzCiAqIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6CiAqCiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluCiAqIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogKgogKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgogKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKICogRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCiAqIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKICogT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTgogKiBUSEUgU09GVFdBUkUuCiAqCiAqIE9yaWdpbmFsbHkgZm9ya2VkIGZyb20gKHdpdGggdGhlIGF1dGhvcidzIHBlcm1pc3Npb24pOgogKiAgIEZhYnJpY2UgQmVsbGFyZCdzIGphdmFzY3JpcHQgdnQxMDAgZm9yIGpzbGludXg6CiAqICAgaHR0cDovL2JlbGxhcmQub3JnL2pzbGludXgvCiAqICAgQ29weXJpZ2h0IChjKSAyMDExIEZhYnJpY2UgQmVsbGFyZAogKiAgIFRoZSBvcmlnaW5hbCBkZXNpZ24gcmVtYWlucy4gVGhlIHRlcm1pbmFsIGl0c2VsZgogKiAgIGhhcyBiZWVuIGV4dGVuZGVkIHRvIGluY2x1ZGUgeHRlcm0gQ1NJIGNvZGVzLCBhbW9uZwogKiAgIG90aGVyIGZlYXR1cmVzLgogKi8KCi8qKgogKiAgRGVmYXVsdCBzdHlsZXMgZm9yIHh0ZXJtLmpzCiAqLwoKLnh0ZXJtIHsKICAgIGN1cnNvcjogdGV4dDsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgIHVzZXItc2VsZWN0OiBub25lOwogICAgLW1zLXVzZXItc2VsZWN0OiBub25lOwogICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTsKfQoKLnh0ZXJtLmZvY3VzLAoueHRlcm06Zm9jdXMgewogICAgb3V0bGluZTogbm9uZTsKfQoKLnh0ZXJtIC54dGVybS1oZWxwZXJzIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIC8qKgogICAgICogVGhlIHotaW5kZXggb2YgdGhlIGhlbHBlcnMgbXVzdCBiZSBoaWdoZXIgdGhhbiB0aGUgY2FudmFzZXMgaW4gb3JkZXIgZm9yCiAgICAgKiBJTUVzIHRvIGFwcGVhciBvbiB0b3AuCiAgICAgKi8KICAgIHotaW5kZXg6IDU7Cn0KCi54dGVybSAueHRlcm0taGVscGVyLXRleHRhcmVhIHsKICAgIHBhZGRpbmc6IDA7CiAgICBib3JkZXI6IDA7CiAgICBtYXJnaW46IDA7CiAgICAvKiBNb3ZlIHRleHRhcmVhIG91dCBvZiB0aGUgc2NyZWVuIHRvIHRoZSBmYXIgbGVmdCwgc28gdGhhdCB0aGUgY3Vyc29yIGlzIG5vdCB2aXNpYmxlICovCiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBvcGFjaXR5OiAwOwogICAgbGVmdDogLTk5OTllbTsKICAgIHRvcDogMDsKICAgIHdpZHRoOiAwOwogICAgaGVpZ2h0OiAwOwogICAgei1pbmRleDogLTU7CiAgICAvKiogUHJldmVudCB3cmFwcGluZyBzbyB0aGUgSU1FIGFwcGVhcnMgYWdhaW5zdCB0aGUgdGV4dGFyZWEgYXQgdGhlIGNvcnJlY3QgcG9zaXRpb24gKi8KICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgcmVzaXplOiBub25lOwp9CgoueHRlcm0gLmNvbXBvc2l0aW9uLXZpZXcgewogICAgLyogVE9ETzogQ29tcG9zaXRpb24gcG9zaXRpb24gZ290IG1lc3NlZCB1cCBzb21ld2hlcmUgKi8KICAgIGJhY2tncm91bmQ6ICMwMDA7CiAgICBjb2xvcjogI0ZGRjsKICAgIGRpc3BsYXk6IG5vbmU7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgei1pbmRleDogMTsKfQoKLnh0ZXJtIC5jb21wb3NpdGlvbi12aWV3LmFjdGl2ZSB7CiAgICBkaXNwbGF5OiBibG9jazsKfQoKLnh0ZXJtIC54dGVybS12aWV3cG9ydCB7CiAgICAvKiBPbiBPUyBYIHRoaXMgaXMgcmVxdWlyZWQgaW4gb3JkZXIgZm9yIHRoZSBzY3JvbGwgYmFyIHRvIGFwcGVhciBmdWxseSBvcGFxdWUgKi8KICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDA7CiAgICBvdmVyZmxvdy15OiBzY3JvbGw7CiAgICBjdXJzb3I6IGRlZmF1bHQ7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMDsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICBib3R0b206IDA7Cn0KCi54dGVybSAueHRlcm0tc2NyZWVuIHsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoKLnh0ZXJtIC54dGVybS1zY3JlZW4gY2FudmFzIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7Cn0KCi54dGVybSAueHRlcm0tc2Nyb2xsLWFyZWEgewogICAgdmlzaWJpbGl0eTogaGlkZGVuOwp9CgoueHRlcm0tY2hhci1tZWFzdXJlLWVsZW1lbnQgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgdmlzaWJpbGl0eTogaGlkZGVuOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgbGVmdDogLTk5OTllbTsKICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7Cn0KCi54dGVybS5lbmFibGUtbW91c2UtZXZlbnRzIHsKICAgIC8qIFdoZW4gbW91c2UgZXZlbnRzIGFyZSBlbmFibGVkIChlZy4gdG11eCksIHJldmVydCB0byB0aGUgc3RhbmRhcmQgcG9pbnRlciBjdXJzb3IgKi8KICAgIGN1cnNvcjogZGVmYXVsdDsKfQoKLnh0ZXJtLnh0ZXJtLWN1cnNvci1wb2ludGVyLAoueHRlcm0gLnh0ZXJtLWN1cnNvci1wb2ludGVyIHsKICAgIGN1cnNvcjogcG9pbnRlcjsKfQoKLnh0ZXJtLmNvbHVtbi1zZWxlY3QuZm9jdXMgewogICAgLyogQ29sdW1uIHNlbGVjdGlvbiBtb2RlICovCiAgICBjdXJzb3I6IGNyb3NzaGFpcjsKfQoKLnh0ZXJtIC54dGVybS1hY2Nlc3NpYmlsaXR5LAoueHRlcm0gLnh0ZXJtLW1lc3NhZ2UgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogMDsKICAgIHRvcDogMDsKICAgIGJvdHRvbTogMDsKICAgIHJpZ2h0OiAwOwogICAgei1pbmRleDogMTA7CiAgICBjb2xvcjogdHJhbnNwYXJlbnQ7Cn0KCi54dGVybSAubGl2ZS1yZWdpb24gewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogLTk5OTlweDsKICAgIHdpZHRoOiAxcHg7CiAgICBoZWlnaHQ6IDFweDsKICAgIG92ZXJmbG93OiBoaWRkZW47Cn0KCi54dGVybS1kaW0gewogICAgb3BhY2l0eTogMC41Owp9CgoueHRlcm0tdW5kZXJsaW5lIHsKICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwp9CgoueHRlcm0tc3RyaWtldGhyb3VnaCB7CiAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDsKfQoKLnh0ZXJtLXNjcmVlbiAueHRlcm0tZGVjb3JhdGlvbi1jb250YWluZXIgLnh0ZXJtLWRlY29yYXRpb24gewoJei1pbmRleDogNjsKCXBvc2l0aW9uOiBhYnNvbHV0ZTsKfQoKLnh0ZXJtLWRlY29yYXRpb24tb3ZlcnZpZXctcnVsZXIgewogICAgei1pbmRleDogNzsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIHJpZ2h0OiAwOwogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Cn0KCi54dGVybS1kZWNvcmF0aW9uLXRvcCB7CiAgICB6LWluZGV4OiAyOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9Cgo=",
        "usr/volcanos/page/can.js": "dmFyIGtpdCA9IHsKCURpY3Q6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgeyByZXNbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdIH0KCQlyZXR1cm4gcmVzCgl9Cn0KdmFyIGljZSA9IHsKCVRCOiAiXHQiLCBTUDogIiAiLCBERjogIjoiLCBFUTogIj0iLCBBVDogIkAiLCBQUzogIi8iLCBQVDogIi4iLCBGUzogIiwiLCBOTDogIlxuIiwgTFQ6ICI8IiwgR1Q6ICI+IiwKCU9LOiAib2siLCBUUlVFOiAidHJ1ZSIsIEZBTFNFOiAiZmFsc2UiLCBTVUNDRVNTOiAic3VjY2VzcyIsIEZBSUxVUkU6ICJmYWlsdXJlIiwgUFJPQ0VTUzogInByb2Nlc3MiLAoKCUFVVE86ICJhdXRvIiwgTElTVDogImxpc3QiLCBCQUNLOiAiYmFjayIsIEVYRUM6ICJleGVjIiwKCVNIT1c6ICJzaG93IiwgSElERTogImhpZGUiLCBIRUxQOiAiaGVscCIsIEhUVFA6ICJodHRwIiwKCVZJRVc6ICJ2aWV3IiwgTU9ERTogIm1vZGUiLCBTSElQOiAic2hpcCIsIENPUFk6ICJjb3B5IiwKCglQT0Q6ICJwb2QiLCBDVFg6ICJjdHgiLCBDTUQ6ICJjbWQiLCBBUkc6ICJhcmciLCBSRVM6ICJyZXMiLAoJUlVOOiAicnVuIiwgRVJSOiAiZXJyIiwgT1BUOiAib3B0IiwKCUNBTjogImNhbiIsCglQV0Q6ICIuLyIsCgoJTVNHX0RFVEFJTDogImRldGFpbCIsCglNU0dfT1BUSU9OOiAib3B0aW9uIiwKCU1TR19BUFBFTkQ6ICJhcHBlbmQiLAoJTVNHX1JFU1VMVDogInJlc3VsdCIsCglNU0dfRklFTERTOiAiZmllbGRzIiwKCU1TR19TRVNTSUQ6ICJzZXNzaWQiLAoKCU1TR19TT1VSQ0U6ICJfc291cmNlIiwKCU1TR19UQVJHRVQ6ICJfdGFyZ2V0IiwKCU1TR19IQU5ETEU6ICJfaGFuZGxlIiwKCU1TR19VUExPQUQ6ICJfdXBsb2FkIiwKCU1TR19EQUVNT046ICJfZGFlbW9uIiwKCU1TR19BQ1RJT046ICJfYWN0aW9uIiwKCU1TR19TVEFUVVM6ICJfc3RhdHVzIiwKCU1TR19QUkVGSVg6ICJfcHJlZml4IiwKCglNU0dfRElTUExBWTogIl9kaXNwbGF5IiwKCU1TR19QUk9DRVNTOiAiX3Byb2Nlc3MiLAoKCU1TR19VU0VSTkFNRTogInVzZXIubmFtZSIsCglNU0dfVVNFUk5JQ0s6ICJ1c2VyLm5pY2siLAoKCU1TR19USVRMRTogInNlc3MudGl0bGUiLAoJTVNHX1RPUElDOiAic2Vzcy50b3BpYyIsCglNU0dfUklWRVI6ICJzZXNzLnJpdmVyIiwKCU1TR19TVE9STTogInNlc3Muc3Rvcm0iLAoJTVNHX1RPQVNUOiAic2Vzcy50b2FzdCIsCgoJUFJPQ0VTU19BR0FJTjogIl9hZ2FpbiIsCgoJRXJyV2FybjogIndhcm46ICIsCglFcnJOb3RMb2dpbjogIm5vdCBsb2dpbjogIiwKCUVyck5vdFJpZ2h0OiAibm90IHJpZ2h0OiAiLAoJRXJyTm90Rm91bmQ6ICJub3QgZm91bmQ6ICIsCn0KCnZhciBjdHggPSB7CglDT05URVhUOiAiY29udGV4dCIsIENPTU1BTkQ6ICJjb21tYW5kIiwgQ09ORklHOiAiY29uZmlnIiwKCUlOREVYOiAiaW5kZXgiLCBBUkdTOiAiYXJncyIsIFNUWUxFOiAic3R5bGUiLCBESVNQTEFZOiAiZGlzcGxheSIsIEFDVElPTjogImFjdGlvbiIsCglJTlBVVFM6ICJpbnB1dHMiLCBGRUFUVVJFOiAiZmVhdHVyZSIsCn0KdmFyIGNsaSA9IHsKCURBRU1PTjogImRhZW1vbiIsCglTVEFSVDogInN0YXJ0IiwgU1RPUDogInN0b3AiLCBPUEVOOiAib3BlbiIsIENMT1NFOiAiY2xvc2UiLCBCRUdJTjogImJlZ2luIiwgRU5EOiAiZW5kIiwKCglDT0xPUjogImNvbG9yIiwKCVJFRDogInJlZCIsIEdSRUVOOiAiZ3JlZW4iLCBCTFVFOiAiYmx1ZSIsCglZRUxMT1c6ICJ5ZWxsb3ciLCBDWUFOOiAiY3lhbiIsIFBVUlBMRTogInB1cnBsZSIsIE1BR0VOVEE6ICJtYWdlbnRhIiwKCVdISVRFOiAid2hpdGUiLCBCTEFDSzogImJsYWNrIiwKCglNQUtFOiAibWFrZSIsIE1BSU46ICJtYWluIiwgRVhFQzogImV4ZWMiLCBET05FOiAiZG9uZSIsCglDT0RFOiAiY29kZSIsIENPU1Q6ICJjb3N0IiwgQkFDSzogImJhY2siLCBGUk9NOiAiZnJvbSIsCglFUlJPUjogImVycm9yIiwgQ0xFQVI6ICJjbGVhciIsIFJFRlJFU0g6ICJyZWZyZXNoIiwKCVNIT1c6ICJzaG93IiwgRlVMTDogImZ1bGwiLAp9CnZhciBuZnMgPSB7CglaTUw6ICJ6bWwiLCBJTUw6ICJpbWwiLCBUWFQ6ICJ0eHQiLAoJSFRNTDogImh0bWwiLCBDU1M6ICJjc3MiLCBKUzogImpzIiwgR086ICJnbyIsIFNIOiAic2giLCBDU1Y6ICJjc3YiLCBKU09OOiAianNvbiIsCglQQVRIOiAicGF0aCIsIEZJTEU6ICJmaWxlIiwgTElORTogImxpbmUiLCBTSVpFOiAic2l6ZSIsCglTQVZFOiAic2F2ZSIsIExPQUQ6ICJsb2FkIiwgVEFHUzogInRhZ3MiLCBGSU5EOiAiZmluZCIsIEdSRVA6ICJncmVwIiwKCURJUjogImRpciIsIENBVDogImNhdCIsIERFRlM6ICJkZWZzIiwgVFJBU0g6ICJ0cmFzaCIsCglESVJfUk9PVDogImRpcl9yb290IiwKCVNDUklQVDogInNjcmlwdCIsCn0KdmFyIG1kYiA9IHsKCURJQ1Q6ICJkaWN0IiwgTUVUQTogIm1ldGEiLCBIQVNIOiAiaGFzaCIsIExJU1Q6ICJsaXN0IiwKCglJRDogImlkIiwgS0VZOiAia2V5IiwgVElNRTogInRpbWUiLCBaT05FOiAiem9uZSIsIFRZUEU6ICJ0eXBlIiwgTkFNRTogIm5hbWUiLCBURVhUOiAidGV4dCIsCglMSU5LOiAibGluayIsIFNDQU46ICJzY2FuIiwgU0hPVzogInNob3ciLCBIRUxQOiAiaGVscCIsCglTSE9SVDogInNob3J0IiwgRklFTEQ6ICJmaWVsZCIsIFRPVEFMOiAidG90YWwiLCBDT1VOVDogImNvdW50IiwgTElNSVQ6ICJsaW1pdCIsCglJTkRFWDogImluZGV4IiwgVkFMVUU6ICJ2YWx1ZSIsIEVYVFJBOiAiZXh0cmEiLCBBTElBUzogImFsaWFzIiwgRVhQSVJFOiAiZXhwaXJlIiwKCglDUkVBVEU6ICJjcmVhdGUiLCBSRU1PVkU6ICJyZW1vdmUiLCBJTlNFUlQ6ICJpbnNlcnQiLCBERUxFVEU6ICJkZWxldGUiLAoJTU9ESUZZOiAibW9kaWZ5IiwgU0VMRUNUOiAic2VsZWN0IiwKCUlOUFVUUzogImlucHV0cyIsIFBSVU5FUzogInBydW5lcyIsIEVYUE9SVDogImV4cG9ydCIsIElNUE9SVDogImltcG9ydCIsCglVUExPQUQ6ICJ1cGxvYWQiLAoKCVNFQVJDSDogInNlYXJjaCIsIEVOR0lORTogImVuZ2luZSIsIFJFTkRFUjogInJlbmRlciIsIFBMVUdJTjogInBsdWdpbiIsCglQQUdFOiAicGFnZSIsIE5FWFQ6ICJuZXh0IiwgUFJFVjogInByZXYiLCBMSU1JVDogImxpbWl0IiwgT0ZGRU5EOiAib2ZmZW5kIiwKCU1BSU46ICJtYWluIiwKCglGT1JFQUNIOiAiKiIsIFJBTkRPTVM6ICIlIiwKfQp2YXIgYWFhID0gewoJUEFTU1dPUkQ6ICJwYXNzd29yZCIsIFVTRVJOQU1FOiAidXNlcm5hbWUiLCBVU0VSTklDSzogInVzZXJuaWNrIiwgQkFDS0dST1VORDogImJhY2tncm91bmQiLCBBVkFUQVI6ICJhdmF0YXIiLAoJTEFOR1VBR0U6ICJsYW5ndWFnZSIsIEVOR0xJU0g6ICJlbmdsaXNoIiwgQ0hJTkVTRTogImNoaW5lc2UiLAoJTE9HSU46ICJsb2dpbiIsIExPR09VVDogImxvZ291dCIsIElOVklURTogImludml0ZSIsCglUT0tFTjogInRva2VuIiwKfQp2YXIgd2ViID0gewoJU1BBQ0U6ICJzcGFjZSIsIERSRUFNOiAiZHJlYW0iLCBTSEFSRTogInNoYXJlIiwKfQp2YXIgdGNwID0gewoJSE9TVDogImhvc3QiLCBQT1JUOiAicG9ydCIsCn0KdmFyIGdkYiA9IHsKCVNJR05BTDogInNpZ25hbCIsCn0KdmFyIGxleCA9IHsKCVNQTElUOiAic3BsaXQiLCBQUkVGSVg6ICJwcmVmaXgiLAp9CnZhciBzc2ggPSB7Cn0KCnZhciBjb2RlID0gewoJVklNRVI6ICJ2aW1lciIsIElOTkVSOiAiaW5uZXIiLCBGQVZPUjogImZhdm9yIiwKCUFVVE9HRU46ICJhdXRvZ2VuIiwgQ09NUElMRTogImNvbXBpbGUiLCBCSU5QQUNLOiAiYmlucGFjayIsIFdFQlBBQ0s6ICJ3ZWJwYWNrIiwgUFVCTElTSDogInB1Ymxpc2giLAoJS0VZV09SRDogImtleXdvcmQiLAp9CnZhciB3aWtpID0gewoJVElUTEU6ICJ0aXRsZSIsIEJSSUVGOiAiYnJpZWYiLCBSRUZFUjogInJlZmVyIiwgU1BBUks6ICJzcGFyayIsCglPUkRFUjogIm9yZGVyIiwgVEFCTEU6ICJ0YWJsZSIsIENIQVJUOiAiY2hhcnQiLCBJTUFHRTogImltYWdlIiwgVklERU86ICJ2aWRlbyIsCglGSUVMRDogImZpZWxkIiwgU0hFTEw6ICJzaGVsbCIsIExPQ0FMOiAibG9jYWwiLCBQQVJTRTogInBhcnNlIiwKCUNPTlRFTlQ6ICJjb250ZW50IiwKCglOQVZNRU5VOiAibmF2bWVudSIsIFBSRU1FTlU6ICJwcmVtZW51IiwKCglJVEVNOiAiLnN0b3J5IiwKCUgyOiAiaDIuc3RvcnkiLAoJSDM6ICJoMy5zdG9yeSIsCglESVZfUEFHRTogImRpdi5wYWdlIiwKfQp2YXIgY2hhdCA9IHsKCUxJQjogImxpYiIsIFBBR0U6ICJwYWdlIiwgUEFORUw6ICJwYW5lbCIsIFBMVUdJTjogInBsdWdpbiIsIE9VVFBVVDogIm91dHB1dCIsIFNUT1JZOiAic3RvcnkiLCBGTE9BVDogImZsb2F0IiwKCVRPQVNUOiAidG9hc3QiLCBDQVJURTogImNhcnRlIiwgSU5QVVQ6ICJpbnB1dCIsIFVQTE9BRDogInVwbG9hZCIsIENPTlRFWFRTOiAiY29udGV4dHMiLAoJTEFZT1VUOiAibGF5b3V0IiwgUFJPSkVDVDogInByb2plY3QiLCBDT05URU5UOiAiY29udGVudCIsIERJU1BMQVk6ICJkaXNwbGF5IiwgUFJPRklMRTogInByb2ZpbGUiLAoKCVRJVExFOiAidGl0bGUiLCBUT1BJQzogInRvcGljIiwgQkxBQ0s6ICJibGFjayIsIFdISVRFOiAid2hpdGUiLCBQUklOVDogInByaW50IiwKCVNIQVJFOiAic2hhcmUiLCBSSVZFUjogInJpdmVyIiwgU1RPUk06ICJzdG9ybSIsIEZJRUxEOiAiZmllbGQiLAoJUFVCTElDOiAicHVibGljIiwgUFJPVEVDVEVEOiAicHJvdGVjdGVkIiwgUFJJVkFURTogInByaXZhdGUiLAoJVVNFUjogInVzZXIiLCBUT09MOiAidG9vbCIsIE5PREU6ICJub2RlIiwKCglBR0VOVDogImFnZW50IiwgQ0hFQ0s6ICJjaGVjayIsIEdSQU5UOiAiZ3JhbnQiLAoJU1RBVEU6ICJzdGF0ZSIsIE1FTlVTOiAibWVudXMiLCBUUkFOUzogInRyYW5zIiwKCVNTTzogInNzbyIsIFdFQlNJVEU6ICJ3ZWJzaXRlIiwKCUxPQ0FUSU9OOiAibG9jYXRpb24iLAoKCWxpYnM6IFsiL2xpYi9iYXNlLmpzIiwgIi9saWIvY29yZS5qcyIsICIvbGliL21pc2MuanMiLCAiL2xpYi9wYWdlLmpzIiwgIi9saWIvdXNlci5qcyJdLAoJcGFuZWxfbGlzdDogWwoJCXtuYW1lOiAiSGVhZGVyIiwgaGVscDogIuagh+mimOagjyIsIHBvczogImhlYWQiLCBzdGF0ZTogWyJ0aW1lIiwgInVzZXJuaWNrIiwgImF2YXRhciJdfSwKCQl7bmFtZTogIlJpdmVyIiwgIGhlbHA6ICLnvqTogYrnu4QiLCBwb3M6ICJsZWZ0In0sCgkJe25hbWU6ICJBY3Rpb24iLCBoZWxwOiAi5bel5L2c5Y+wIiwgcG9zOiAibWFpbiJ9LAoJCXtuYW1lOiAiU2VhcmNoIiwgaGVscDogIuaQnOe0ouahhiIsIHBvczogImF1dG8ifSwKCQl7bmFtZTogIkZvb3RlciIsIGhlbHA6ICLnirbmgIHmnaEiLCBwb3M6ICJmb290Iiwgc3RhdGU6IFsibmNtZCIsICJudGlwIl19LAoJXSwKCXBsdWdpbl9saXN0OiBbCgkJIi9wbHVnaW4vc3RhdGUuanMiLAoJCSIvcGx1Z2luL2lucHV0LmpzIiwKCQkiL3BsdWdpbi90YWJsZS5qcyIsCgkJIi9wbHVnaW4vaW5wdXQva2V5LmpzIiwKCQkiL3BsdWdpbi9pbnB1dC9kYXRlLmpzIiwKCQkiL3BsdWdpbi9zdG9yeS9zcGlkZS5qcyIsCgkJIi9wbHVnaW4vc3RvcnkvdHJlbmQuanMiLAoJCSIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuanMiLAoJCSIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuanMiLAoJCSIvcGx1Z2luL2xvY2FsL2NvZGUveHRlcm0uanMiLAoJCSIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIiwKCQkiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLAoJCSIvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvdGVhbS9wbGFuLmpzIiwKCV0sCglQTFVHSU5fU1RBVEVfSlM6ICIvcGx1Z2luL3N0YXRlLmpzIiwKCVBMVUdJTl9JTlBVVF9KUzogIi9wbHVnaW4vaW5wdXQuanMiLAoJUExVR0lOX1RBQkxFX0pTOiAiL3BsdWdpbi90YWJsZS5qcyIsCgoJT05FTkdJTkU6ICJvbmVuZ2luZSIsIE9OREFFTU9OOiAib25kYWVtb24iLCBPTkFQUEVORDogIm9uYXBwZW5kIiwgT05MQVlPVVQ6ICJvbmxheW91dCIsIE9OTU9USU9OOiAib25tb3Rpb24iLCBPTktFWU1BUDogIm9ua2V5bWFwIiwKCU9OSU1QT1JUOiAib25pbXBvcnQiLCBPTlNZTlRBWDogIm9uc3ludGF4IiwgT05BQ1RJT046ICJvbmFjdGlvbiIsIE9OREVUQUlMOiAib25kZXRhaWwiLCBPTkZJR1VSRTogIm9uZmlndXJlIiwgT05FWFBPUlQ6ICJvbmV4cG9ydCIsCglPTlBMVUdJTjogIm9ucGx1Z2luIiwKCglPTk1BSU46ICJvbm1haW4iLCBPTkxPR0lOOiAib25sb2dpbiIsIE9OU0VBUkNIOiAib25zZWFyY2giLAoJT05TSVpFOiAib25zaXplIiwgT05UT0FTVDogIm9udG9hc3QiLCBPTlJFTU9URTogIm9ucmVtb3RlIiwKCU9OS0VZRE9XTjogIm9ua2V5ZG93biIsIE9OTU9VU0VFTlRFUjogIm9ubW91c2VlbnRlciIsIE9SSUVOVEFUSU9OQ0hBTkdFOiAib3JpZW50YXRpb25jaGFuZ2UiLAoJT05TVE9STV9TRUxFQ1Q6ICJvbnN0b3JtX3NlbGVjdCIsIE9OQUNUSU9OX1RPVUNIOiAib25hY3Rpb25fdG91Y2giLCBPTkFDVElPTl9OT1RPT0w6ICJvbmFjdGlvbl9ub3Rvb2wiLCBPTkFDVElPTl9DTUQ6ICJvbmFjdGlvbl9jbWQiLAoJT05PUEVOU0VBUkNIOiAib25vcGVuc2VhcmNoIiwgT05TRUFSQ0hGT0NVUzogIm9uc2VhcmNoZm9jdXMiLCBPTkNPTU1BTkRGT0NVUzogIm9uY29tbWFuZGZvY3VzIiwKCglfSU5JVDogIl9pbml0IiwgX0VOR0lORTogIl9lbmdpbmUiLCBfU0VBUkNIOiAiX3NlYXJjaCIsIF9PVVRQVVRTX0NVUlJFTlQ6ICJfb3V0cHV0cy4tMSIsCglfTkFNRVM6ICJfbmFtZXMiLCBfVE9BU1Q6ICJfdG9hc3QiLAp9CnZhciB0ZWFtID0gewoJVEFTSzogInRhc2siLCBQTEFOOiAicGxhbiIsCn0KdmFyIG1hbGwgPSB7CglBU1NFVDogImFzc2V0IiwgU0FMQVJZOiAic2FsYXJ5IiwKfQoKdmFyIHN2ZyA9IHsKCUdST1VQOiAiZ3JvdXAiLCBQSUQ6ICJwaWQiLCBHUklEOiAiZ3JpZCIsCglTSEFQRTogInNoYXBlIiwgVEVYVDogInRleHQiLCBSRUNUOiAicmVjdCIsIExJTkU6ICJsaW5lIiwgQ0lSQ0xFOiAiY2lyY2xlIiwgRUxMSVBTRTogImVsbGlwc2UiLAoJRzogImciLCBYOiAieCIsIFk6ICJ5IiwgUjogInIiLCBSWDogInJ4IiwgUlk6ICJyeSIsIENYOiAiY3giLCBDWTogImN5IiwgWDE6ICJ4MSIsIFkxOiAieTEiLCBYMjogIngyIiwgWTI6ICJ5MiIsCglQQVRIOiAicGF0aCIsIFBBVEgyVjogInBhdGgydiIsIFBBVEgySDogInBhdGgyaCIsCglNOiAiTSIsIFE6ICJRIiwgVDogIlQiLAp9CnZhciBodG1sID0gewoJLy8gRklFTERTRVQKCUZJRUxEU0VUOiAiZmllbGRzZXQiLCBMRUdFTkQ6ICJsZWdlbmQiLCBPUFRJT046ICJvcHRpb24iLCBBQ1RJT046ICJhY3Rpb24iLCBPVVRQVVQ6ICJvdXRwdXQiLCBTVEFUVVM6ICJzdGF0dXMiLAoJRk9STV9PUFRJT046ICJmb3JtLm9wdGlvbiIsIERJVl9BQ1RJT046ICJkaXYuYWN0aW9uIiwgRElWX09VVFBVVDogImRpdi5vdXRwdXQiLCBESVZfU1RBVFVTOiAiZGl2LnN0YXR1cyIsCglGSUVMRFNFVF9QQU5FTDogImZpZWxkc2V0LnBhbmVsIiwgRklFTERTRVRfUExVR0lOOiAiZmllbGRzZXQucGx1Z2luIiwgRklFTERTRVRfU1RPUlk6ICJmaWVsZHNldC5zdG9yeSIsCglGSUVMRFNFVF9IRUFEOiAiZmllbGRzZXQuaGVhZCIsIEZJRUxEU0VUX0ZPT1Q6ICJmaWVsZHNldC5mb290IiwKCUZJRUxEU0VUX0xFRlQ6ICJmaWVsZHNldC5sZWZ0IiwgRklFTERTRVRfTUFJTjogImZpZWxkc2V0Lm1haW4iLAoJRklFTERTRVRfQVVUTzogImZpZWxkc2V0LmF1dG8iLCBGSUVMRFNFVF9GTE9BVDogImZpZWxkc2V0LmZsb2F0IiwKCU9QVElPTl9BUkdTOiAic2VsZWN0LmFyZ3MsaW5wdXQuYXJncyx0ZXh0YXJlYS5hcmdzIiwKCUlOUFVUX0FSR1M6ICJpbnB1dC5hcmdzLHRleHRhcmVhLmFyZ3MiLAoJSU5QVVRfQlVUVE9OOiAiaW5wdXRbdHlwZT1idXR0b25dIiwKCgkvLyBIVE1MCglVUExPQUQ6ICJ1cGxvYWQiLCBVU0VSTkFNRTogInVzZXJuYW1lIiwgUEFTU1dPUkQ6ICJwYXNzd29yZCIsCglJTlBVVDogImlucHV0IiwgVEVYVDogInRleHQiLCBURVhUQVJFQTogInRleHRhcmVhIiwgU0VMRUNUOiAic2VsZWN0IiwgQlVUVE9OOiAiYnV0dG9uIiwKCUZPUk06ICJmb3JtIiwgRklMRTogImZpbGUiLCBTUEFDRTogInNwYWNlIiwgQ0xJQ0s6ICJjbGljayIsIFNVQk1JVDogInN1Ym1pdCIsIENBTkNFTDogImNhbmNlbCIsCglESVY6ICJkaXYiLCBJTUc6ICJpbWciLCBDT0RFOiAiY29kZSIsIFNQQU46ICJzcGFuIiwgVklERU86ICJ2aWRlbyIsCglUQUJMRTogInRhYmxlIiwgVEJPRFk6ICJ0Ym9keSIsIFRSOiAidHIiLCBUSDogInRoIiwgVEQ6ICJ0ZCIsIEJSOiAiYnIiLCBVTDogInVsIiwgTEk6ICJsaSIsCglBOiAiYSIsIExBQkVMOiAibGFiZWwiLCBJTk5FUjogImlubmVyIiwgVElUTEU6ICJ0aXRsZSIsCglIMTogImgxIiwgSDI6ICJoMiIsIEgzOiAiaDMiLAoJV1NTOiAid3NzIiwgU1ZHOiAic3ZnIiwgQ0FOVkFTOiAiY2FudmFzIiwgSUZSQU1FOiAiaWZyYW1lIiwgQ0hST01FOiAiY2hyb21lIiwKCgkvLyBDU1MKCUNMQVNTOiAiY2xhc3MiLCBGTE9BVDogImZsb2F0IiwgQ0xFQVI6ICJjbGVhciIsIEJPVEg6ICJib3RoIiwKCUJBQ0tHUk9VTkQ6ICJiYWNrZ3JvdW5kIiwgU0VMRUNUOiAic2VsZWN0IiwgSElEREVOOiAiaGlkZGVuIiwKCURJU1BMQVk6ICJkaXNwbGF5IiwgQkxPQ0s6ICJibG9jayIsIE5PTkU6ICJub25lIiwgRklYRUQ6ICJmaXhlZCIsCglPUEFDSVRZOiAib3BhY2l0eSIsCglTVFJPS0VfV0lEVEg6ICJzdHJva2Utd2lkdGgiLCBTVFJPS0U6ICJzdHJva2UiLCBGSUxMOiAiZmlsbCIsIEZPTlRfU0laRTogImZvbnQtc2l6ZSIsIEZPTlRfRkFNSUxZOiAiZm9udC1mYW1pbHkiLCBNT05PU1BBQ0U6ICJtb25vc3BhY2UiLAoJU0NST0xMOiAic2Nyb2xsIiwgSEVJR0hUOiAiaGVpZ2h0IiwgV0lEVEg6ICJ3aWR0aCIsIExFRlQ6ICJsZWZ0IiwgVE9QOiAidG9wIiwgUklHSFQ6ICJyaWdodCIsIEJPVFRPTTogImJvdHRvbSIsCglTUEVFRDogInNwZWVkIiwgUEFERElORzogInBhZGRpbmciLAoJTUlOX0hFSUdIVDogIm1pbi1oZWlnaHQiLCBNQVhfSEVJR0hUOiAibWF4LWhlaWdodCIsIE1BWF9XSURUSDogIm1heC13aWR0aCIsIE1JTl9XSURUSDogIm1pbi13aWR0aCIsIE1BUkdJTl9UT1A6ICJtYXJnaW4tdG9wIiwgTUFSR0lOX1g6ICJtYXJnaW4teCIsIE1BUkdJTl9ZOiAibWFyZ2luLXkiLAoJUExVR0lOX01BUkdJTjogMTAsIEFDVElPTl9IRUlHSFQ6IDMxLCBBQ1RJT05fTUFSR0lOOiAyMDAsCglURVhUX0FOQ0hPUjogInRleHQtYW5jaG9yIiwKCVRPR0dMRTogInRvZ2dsZSIsCgoJUEFHRTogInBhZ2UiLCBUQUJTOiAidGFicyIsCglNRU5VOiAibWVudSIsIE5PREU6ICJub2RlIiwKCVpPTkU6ICJ6b25lIiwgTkFNRTogIm5hbWUiLAoJTElTVDogImxpc3QiLCBJVEVNOiAiaXRlbSIsCglJQ09OOiAiaWNvbiIsCgoJSElERTogImhpZGUiLCBTSE9XOiAic2hvdyIsIEFVVE86ICJhdXRvIiwKCUhFQUQ6ICJoZWFkIiwgTEVGVDogImxlZnQiLCBNQUlOOiAibWFpbiIsIEZPT1Q6ICJmb290IiwKCVBMVUdJTjogInBsdWdpbiIsIExBWU9VVDogImxheW91dCIsIENPTlRFTlQ6ICJjb250ZW50IiwKCglESVZfUEFHRTogImRpdi5wYWdlIiwKCURJVl9UQUJTOiAiZGl2LnRhYnMiLAoJRElWX1pPTkU6ICJkaXYuem9uZSIsCglESVZfTElTVDogImRpdi5saXN0IiwKCURJVl9JVEVNOiAiZGl2Lml0ZW0iLAoJRElWX05BTUU6ICJkaXYubmFtZSIsCglESVZfQ09ERTogImRpdi5jb2RlIiwKCURJVl9MQVlPVVRfSEVBRDogImRpdi5sYXlvdXQuaGVhZCIsCglESVZfTEFZT1VUX0xFRlQ6ICJkaXYubGF5b3V0LmxlZnQiLAoJRElWX0xBWU9VVF9GT09UOiAiZGl2LmxheW91dC5mb290IiwKCVRBQkxFX0NPTlRFTlQ6ICJ0YWJsZS5jb250ZW50IiwKCURJVl9GTE9BVDogImRpdi5mbG9hdCIsCgoJRVNDQVBFOiAiRXNjYXBlIiwgRU5URVI6ICJFbnRlciIsIFRBQjogIlRhYiIsCglfQ1NTOiAiLmNzcyIsIF9KUzogIi5qcyIsCn0KdmFyIGxhbmcgPSB7CglVTkRFRklORUQ6ICJ1bmRlZmluZWQiLAoJU1RSSU5HOiAic3RyaW5nIiwgTlVNQkVSOiAibnVtYmVyIiwKCU9CSkVDVDogIm9iamVjdCIsIEZVTkNUSU9OOiAiZnVuY3Rpb24iLAoJRVNDQVBFOiAiRXNjYXBlIiwgRU5URVI6ICJFbnRlciIsIFRBQjogIlRhYiIsCglDT05UUk9MOiAiQ29udHJvbCIsIFNISUZUOiAiU2hpZnQiLAoJUFM6ICIvIiwKfQoKZnVuY3Rpb24gc2h5KGhlbHAsIG1ldGEsIGxpc3QsIGNiKSB7IHZhciBpbmRleCA9IDAsIGFyZ3MgPSBhcmd1bWVudHMKCWZ1bmN0aW9uIG5leHQodHlwZSkgeyBpZiAoaW5kZXggPCBhcmdzLmxlbmd0aCAmJiAoIXR5cGUgfHwgdHlwZSA9PSB0eXBlb2YgYXJnc1tpbmRleF0pKSB7IHJldHVybiBhcmdzW2luZGV4KytdIH0gfQoJcmV0dXJuIGNiID0gdHlwZW9mIGFyZ3NbYXJncy5sZW5ndGgtMV0gPT0gbGFuZy5GVU5DVElPTj9hcmdzW2FyZ3MubGVuZ3RoLTFdOmZ1bmN0aW9uKCkge30sIGNiLmhlbHAgPSBuZXh0KGxhbmcuU1RSSU5HKXx8IiIsIGNiLm1ldGEgPSBuZXh0KGxhbmcuT0JKRUNUKXx8e30sIGNiLmxpc3QgPSBuZXh0KGxhbmcuT0JKRUNUKXx8W10sIGNiCn07IHZhciBfY2FuX25hbWUgPSAiIiwgX2Nhbl9wYXRoID0gIiIKdmFyIFZvbGNhbm9zID0gc2h5KCLngavlsbHmnrYiLCB7aWNlYmVyZzogIi9jaGF0LyIsIHZvbGNhbm86ICIvZnJhbWUuanMiLCBwYWNrOiB7fSwgY2FjaGU6IHt9fSwgZnVuY3Rpb24obmFtZSwgY2FuLCBsaWJzLCBjYikgewoJdmFyIG1ldGEgPSBhcmd1bWVudHMuY2FsbGVlLm1ldGEsIGxpc3QgPSBhcmd1bWVudHMuY2FsbGVlLmxpc3QKCWlmICh0eXBlb2YgbmFtZSA9PSBsYW5nLk9CSkVDVCkgeyB2YXIgQ29uZmlnID0gbmFtZSwgcGFuZWxzID0gQ29uZmlnLnBhbmVsc3x8Y2hhdC5wYW5lbF9saXN0CgkJbWV0YS5saWJzID0gQ29uZmlnLmxpYnN8fGNoYXQubGlicywgbWV0YS5pY2ViZXJnID0gQ29uZmlnLmljZWJlcmd8fG1ldGEuaWNlYmVyZwoKCQkvLyDpooTliqDovb0KCQlsaWJzID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgcGFuZWxzLmxlbmd0aDsgaSsrKSB7IHZhciBwID0gcGFuZWxzW2ldCgkJCXAgJiYgKGxpYnMgPSBsaWJzLmNvbmNhdChwLmxpc3QgPSBwLmxpc3R8fFsiL3BhbmVsLyIrcC5uYW1lK2h0bWwuX0NTUywgIi9wYW5lbC8iK3AubmFtZStodG1sLl9KU10pKQoJCX07IGxpYnMgPSBsaWJzLmNvbmNhdChDb25maWcucGx1Z2lufHxjaGF0LnBsdWdpbl9saXN0KQoKCQkvLyDmoLnmqKHlnZcKCQlfY2FuX25hbWUgPSAiIiwgbmFtZSA9IENvbmZpZy5uYW1lfHxpY2UuQ0FOLCBjYiA9IGNhbnx8ZnVuY3Rpb24oY2FuKSB7CgkJCWNhbi5vbmVuZ2luZS5faW5pdChjYW4sIGNhbi5Db25mKENvbmZpZyksIHBhbmVscywgQ29uZmlnLl9pbml0LCBjYW4uX3RhcmdldCkKCQl9LCBjYW4gPSB7X2ZvbGxvdzogbmFtZSwgX3RhcmdldDogQ29uZmlnLnRhcmdldHx8bWV0YS50YXJnZXQsIF9oZWlnaHQ6IENvbmZpZy5oZWlnaHR8fG1ldGEuX2hlaWdodCwgX3dpZHRoOiBDb25maWcud2lkdGh8fG1ldGEuX3dpZHRofQoJCWZvciAodmFyIGsgaW4gQ29uZmlnKSB7IGNhbltrXSA9IENvbmZpZ1trXSB9CgkJY2FuLl9yb290ID0gY2FuCgl9CgoJdmFyIHByb3RvID0ge19fcHJvdG9fXzogbWV0YSwgX3BhdGg6IF9jYW5fcGF0aCwgX25hbWU6IG5hbWUsIF9sb2FkOiBmdW5jdGlvbihuYW1lLCBlYWNoKSB7CgkJCS8vIOWKoOi9vee8k+WtmAoJCQl2YXIgY2FjaGUgPSBtZXRhLmNhY2hlW25hbWVdfHxbXTsgZm9yIChsaXN0LnJldmVyc2UoKTsgbGlzdC5sZW5ndGggPiAwOyBsaXN0KSB7CgkJCQl2YXIgc3ViID0gbGlzdC5wb3AoKTsgc3ViICE9IGNhbiAmJiBjYWNoZS5wdXNoKHN1YikKCQkJfTsgbWV0YS5jYWNoZVtuYW1lXSA9IGNhY2hlCgoJCQkvLyDliqDovb3mqKHlnZcKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjYWNoZS5sZW5ndGg7IGkrKykgeyB2YXIgc3ViID0gY2FjaGVbaV0sIG5hbWUgPSBzdWIuX25hbWUKCQkJCWlmICh0eXBlb2YgZWFjaCA9PSBsYW5nLkZVTkNUSU9OICYmIGVhY2goY2FuLCBuYW1lLCBzdWIpKSB7IGNvbnRpbnVlIH0KCQkJCSFjYW5bbmFtZV0gJiYgKGNhbltuYW1lXSA9IHt9KTsgZm9yICh2YXIgayBpbiBzdWIpIHsKCQkJCQljYW5bbmFtZV0uaGFzT3duUHJvcGVydHkoaykgfHwgIXN1Yi5oYXNPd25Qcm9wZXJ0eShrKSB8fCAoY2FuW25hbWVdW2tdID0gc3ViW2tdKQoJCQkJfQoJCQl9CgkJfSwKCQlyZXF1aXJlTW9kdWxlczogZnVuY3Rpb24obGlicywgY2IsIGVhY2gpIHsKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaWJzLmxlbmd0aDsgaSsrKSB7CgkJCQlpZiAobGlic1tpXS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjb250aW51ZSB9CgkJCQlpZiAobGlic1tpXS5pbmRleE9mKCIvIikgPT0gMCkgeyBjb250aW51ZSB9CgkJCQlpZiAobGlic1tpXS5pbmRleE9mKCIuY3NzIikgPT0gLTEgJiYgbGlic1tpXS5pbmRleE9mKCIuanMiKSA9PSAtMSkgeyBsaWJzW2ldID0gbGlic1tpXSsiL2xpYi8iK2xpYnNbaV0rIi5qcyIgfQoJCQkJbGlic1tpXSA9ICIvcmVxdWlyZS9ub2RlX21vZHVsZXMvIitsaWJzW2ldCgkJCX0KCQkJY2FuLnJlcXVpcmUobGlicywgY2IsIGVhY2gpCgkJfSwKCQlyZXF1aXJlOiBmdW5jdGlvbihsaWJzLCBjYiwgZWFjaCkgeyBpZiAoIWxpYnMgfHwgbGlicy5sZW5ndGggPT0gMCkgewoJCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2IoY2FuKSB9LCAxMCkKCQkJCXJldHVybiAvLyDliqDovb3lrozmiJAKCQkJfQoKCQkJLy8g5peg5pWI5Zyw5Z2ACgkJCWlmIChsaWJzWzBdID09IHVuZGVmaW5lZCkgeyByZXR1cm4gY2FuLnJlcXVpcmUobGlicy5zbGljZSgxKSwgY2IsIGVhY2gpIH0KCgkJCWlmIChsaWJzWzBdID09ICIiKSB7CgkJCQkvLyDmoLflvI/lnLDlnYAKCQkJCWxpYnNbMF0gPSBjYW4uX25hbWUucmVwbGFjZShodG1sLl9KUywgaHRtbC5fQ1NTKQoJCQl9IGVsc2UgaWYgKGxpYnNbMF1bMF0gIT0gaWNlLlBTICYmIGxpYnNbMF0uaW5kZXhPZihpY2UuSFRUUCkgIT0gMCkgewoJCQkJLy8g55u45a+55Zyw5Z2ACgkJCQlsaWJzWzBdID0gY2FuLl9uYW1lLnNsaWNlKDAsIGNhbi5fbmFtZS5sYXN0SW5kZXhPZihpY2UuUFMpKzEpK2xpYnNbMF0KCQkJfQoKCQkJLy8g5Yqg6L295qih5Z2XCgkJCWxpYnNbMF0gPSBsaWJzWzBdLnRvTG93ZXJDYXNlKCkKCQkJdmFyIG5hbWUgPSBsaWJzWzBdLmluZGV4T2YoImh0dHAiKSA9PSAwPyBsaWJzWzBdOiBsaWJzWzBdLnNwbGl0KCI/IilbMF0KCQkJZnVuY3Rpb24gbmV4dCgpIHsgY2FuLl9sb2FkKG5hbWUsIGVhY2gpLCBjYW4ucmVxdWlyZShsaWJzLnNsaWNlKDEpLCBjYiwgZWFjaCkgfQoJCQltZXRhLmNhY2hlW25hbWVdPyBuZXh0KCk6IChfY2FuX3BhdGggPSBsaWJzWzBdLCBtZXRhLl9sb2FkKG5hbWUsIG5leHQpKQoJCX0sCgkJcmVxdWVzdDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQgPSBldmVudHx8e30sIGV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoJCQl2YXIgbXNnID0gZXZlbnQuX21zZ3x8Y2FuLm1pc2MuTWVzc2FnZShldmVudCwgY2FuKTsgZXZlbnQuX21zZyA9IG1zZwoJCQlmdW5jdGlvbiBzZXQoa2V5LCB2YWx1ZSkgewoJCQkJdmFsdWUgPT0gIiIgfHwgbXNnLk9wdGlvbihrZXkpIHx8IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkKCQkJCS8vIHR5cGVvZiB2YWx1ZSA9PSBsYW5nLkZVTkNUSU9OIHx8IHR5cGVvZiB2YWx1ZSA9PSBsYW5nLk9CSkVDVCB8fCB2YWx1ZSA9PSAiIiB8fCBtc2cuT3B0aW9uKGtleSkgfHwgbXNnLk9wdGlvbihrZXksIHZhbHVlKQoJCQl9CgoJCQkvLyDmt7vliqDlj4LmlbAKCQkJY2FuLmNvcmUuTGlzdChhcmd1bWVudHMsIGZ1bmN0aW9uKG9wdGlvbiwgaW5kZXgpIHsgaWYgKCFvcHRpb24gfHwgaW5kZXggPT0gMCkgeyByZXR1cm4gfSAKCQkJCWNhbi5iYXNlLmlzRnVuYyhvcHRpb24uT3B0aW9uKT8gY2FuLmNvcmUuTGlzdChvcHRpb24uT3B0aW9uKCksIGZ1bmN0aW9uKGtleSkgewoJCQkJCWlmIChrZXkuaW5kZXhPZigidXNlci4iKSA9PSAwKSB7IHJldHVybiB9CgkJCQkJaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJCXNldChrZXksIG9wdGlvbi5PcHRpb24oa2V5KSkKCQkJCX0pOiBjYW4uY29yZS5JdGVtKGNhbi5iYXNlLmlzRnVuYyhvcHRpb24pPyBvcHRpb24oKTogb3B0aW9uLCBzZXQpCgkJCX0pOyByZXR1cm4gbXNnCgkJfSwKCgkJYWN0aW9uczogZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtdKSB9LAoJCXJ1bkFjdGlvbkNvbW1hbmQ6IGZ1bmN0aW9uKGV2ZW50LCBpbmRleCwgYXJncywgY2IpIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgaWNlLlJVTiwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2luZGV4XSwgYXJncyksIGNiKSB9LAoJCXJ1bkFjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGFjdGlvbiwgYXJncywgY2IpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0sIGNhbi5PcHRpb24oKSkKCQkJY2FuLnJ1bihldmVudCwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2N0eC5BQ1RJT05dLmNvbmNhdChhY3Rpb24pLCBhcmdzKSwgY2J8fGZ1bmN0aW9uKG1zZykgewoJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4uc3VwLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4uc3VwLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBhY3Rpb24pCgkJCX0sIHRydWUpCgkJfSwKCgkJc2VhcmNoOiBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJaWYgKGNtZHMgJiYgdHlwZW9mIGNtZHMgPT0gbGFuZy5PQkpFQ1QgJiYgY21kcy5sZW5ndGggPiAwICYmIHR5cGVvZiBjbWRzWzBdID09IGxhbmcuT0JKRUNUICYmIGNtZHNbMF0ubGVuZ3RoID4gMCApIHsKCQkJCWNtZHNbMF0gPSBjbWRzWzBdLmpvaW4oaWNlLlBUKQoJCQl9CgkJCXJldHVybiBjYW4ucnVuICYmIGNhbi5ydW4oZXZlbnQsIFtjaGF0Ll9TRUFSQ0hdLmNvbmNhdChjbWRzKSwgY2IsIHRydWUpCgkJfSwKCQlnZXQ6IGZ1bmN0aW9uKG5hbWUsIGtleSwgY2IpIHsgcmV0dXJuIGNhbi5zZWFyY2goe30sIFtjYW4uY29yZS5LZXlzKG5hbWUsIGNoYXQuT05FWFBPUlQsIGtleSldLCBjYikgfSwKCQlzZXQ6IGZ1bmN0aW9uKG5hbWUsIGtleSwgdmFsdWUpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9KTsgbXNnLk9wdGlvbihrZXksIHZhbHVlKQoJCQlyZXR1cm4gY2FuLnNlYXJjaChtc2csIFtbbmFtZSwgY2hhdC5PTklNUE9SVCwga2V5XV0pCgkJfSwKCQlzZXRIZWFkZXJNZW51OiBmdW5jdGlvbihsaXN0LCBjYikgeyBjYW4uX21lbnUgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl9tZW51KQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHt0cmFuczogY2FuLm9uYWN0aW9uLl90cmFuc30pCgkJCXJldHVybiBjYW4uX21lbnUgPSBjYW4uc2VhcmNoKG1zZywgW1siSGVhZGVyIiwgY2hhdC5PTklNUE9SVCwgIm1lbnUiXSwgY2FuLl9uYW1lXS5jb25jYXQobGlzdCksIGNiKQoJCX0sCgkJc2V0SGVhZGVyOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4uc2V0KCJIZWFkZXIiLCBrZXksIHZhbHVlKSB9LAoJCWdldEhlYWRlcjogZnVuY3Rpb24oa2V5LCBjYikgeyByZXR1cm4gY2FuLmdldCgiSGVhZGVyIiwga2V5LCBjYikgfSwKCQlzZXRSaXZlcjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnNldCgiUml2ZXIiLCBrZXksIHZhbHVlKSB9LAoJCXNldEFjdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnNldCgiQWN0aW9uIiwga2V5LCB2YWx1ZSkgfSwKCQlnZXRBY3Rpb246IGZ1bmN0aW9uKGtleSwgY2IpIHsgcmV0dXJuIGNhbi5nZXQoIkFjdGlvbiIsIGtleSwgY2IpIH0sCgkJZ2V0QWN0aW9uU2l6ZTogZnVuY3Rpb24oY2IpIHsgcmV0dXJuIGNhbi5nZXQoIkFjdGlvbiIsICJzaXplIiwgY2IpIH0sCgoJCWlzU2ltcGxlTW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Nb2RlKCkgPT0gInNpbXBsZSIgfSwKCQlpc0Zsb2F0TW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Nb2RlKCkgPT0gImZsb2F0IiB9LAoJCWlzRnVsbE1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJmdWxsIiB9LAoJCWlzQ21kTW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Nb2RlKCkgPT0gImNtZCIgfSwKCQlNb2RlOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gY2FuLkNvbmYoaWNlLk1PREUsIHZhbHVlKSB9LAoJCUNvbmZEZWZhdWx0OiBmdW5jdGlvbih2YWx1ZSkgeyBjYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrLCB2KSB7IGNhbi5Db25mKGspIHx8IGNhbi5Db25mKGssIHYpIH0pIH0sCgkJQ29uZkhlaWdodDogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Db25mKGh0bWwuSEVJR0hULCB2YWx1ZSkgfSwKCQlDb25mV2lkdGg6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uQ29uZihodG1sLldJRFRILCB2YWx1ZSkgfSwKCQlDb25mOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHZhciByZXMgPSBjYW4uX2NvbmYKCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDIpIHsKCQkJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUKSB7CgkJCQkJcmVzID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9jb25mLCBhcmd1bWVudHNbaV0pLCBpLS0KCQkJCQljb250aW51ZQoJCQkJfQoJCQkJcmVzID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9jb25mLCBhcmd1bWVudHNbaV0sIGFyZ3VtZW50c1tpKzFdKQoJCQl9CgkJCWlmIChyZXMgPT0gdW5kZWZpbmVkICYmIGtleS5pbmRleE9mKGN0eC5GRUFUVVJFK2ljZS5QVCkgPT0gLTEpIHsKCQkJCXJldHVybiBjYW4uQ29uZihjYW4uY29yZS5LZXlzKGN0eC5GRUFUVVJFLCBrZXkpKQoJCQl9CgkJCXJldHVybiByZXMKCQl9LCBfY29uZjoge30sCgl9OyBjYW4gPSBjYW58fHt9LCBjYW4uX19wcm90b19fID0gcHJvdG8KCglpZiAoX2Nhbl9uYW1lKSB7IC8vIOWKoOWFpee8k+WtmAoJCW1ldGEuY2FjaGVbX2Nhbl9uYW1lXSA9IG1ldGEuY2FjaGVbX2Nhbl9uYW1lXXx8W10sIG1ldGEuY2FjaGVbX2Nhbl9uYW1lXS5wdXNoKGNhbikKCX0gZWxzZSB7IC8vIOWKoOWFpemYn+WIlwoJCWxpc3QucHVzaChjYW4pCgl9CglfY2FuX3BhdGggPSBfY2FuX25hbWV8fF9jYW5fcGF0aAoKCWlmIChjYW4uX2ZvbGxvdykgeyBsaWJzID0gbGlicy5jb25jYXQobWV0YS5saWJzLCBtZXRhLnZvbGNhbm8pIH0KCWlmIChsaWJzICYmIGxpYnMubGVuZ3RoID4gMCkgeyAvLyDop6PmnpDlj4LmlbAKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpYnMubGVuZ3RoOyBpKyspIHsKCQkJaWYgKGxpYnNbaV0gPT0gdW5kZWZpbmVkKSB7CgoJCQl9IGVsc2UgaWYgKGxpYnNbaV0gPT0gIiIpIHsKCQkJCWxpYnNbaV0gPSBfY2FuX3BhdGgucmVwbGFjZShodG1sLl9KUywgaHRtbC5fQ1NTKQoJCQl9IGVsc2UgaWYgKGxpYnNbaV1bMF0gIT0gaWNlLlBTICYmIGxpYnNbaV0uaW5kZXhPZihpY2UuSFRUUCkgIT0gMCkgewoJCQkJbGlic1tpXSA9IF9jYW5fcGF0aC5zbGljZSgwLCBfY2FuX3BhdGgubGFzdEluZGV4T2YoaWNlLlBTKSsxKStsaWJzW2ldCgkJCX0KCQl9Cgl9CglyZXR1cm4gY2FuLnJlcXVpcmUobGlicywgY2IpLCBjYW4KfSkKZnVuY3Rpb24gY2FuKHRvb2wpIHsKCVZvbGNhbm9zKHtwYW5lbHM6IFsKCQl7bmFtZTogIkhlYWRlciIsIGhlbHA6ICLmoIfpopjmoI8iLCBwb3M6IGh0bWwuSElERSwgc3RhdGU6IFthYWEuVVNFUk5JQ0tdfSwKCQl7bmFtZTogIkFjdGlvbiIsIGhlbHA6ICLlt6XkvZzlj7AiLCBwb3M6IGh0bWwuTUFJTiwgdG9vbDogdG9vbH0sCgkJe25hbWU6ICJTZWFyY2giLCBoZWxwOiAi5pCc57Si5qGGIiwgcG9zOiBodG1sLkFVVE99LAoJXX0pCn0KCnRyeSB7IGlmICh0eXBlb2Yod2luZG93KSA9PSBsYW5nLk9CSkVDVCkgeyAvLyBub2RlanMKCVZvbGNhbm9zLm1ldGEudGFyZ2V0ID0gZG9jdW1lbnQuYm9keQoJVm9sY2Fub3MubWV0YS5fd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAoJVm9sY2Fub3MubWV0YS5faGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0CglWb2xjYW5vcy5tZXRhLl9sb2FkID0gZnVuY3Rpb24odXJsLCBjYikgewoJCXN3aXRjaCAodXJsLnNwbGl0KCI/IilbMF0uc3BsaXQoaWNlLlBUKS5wb3AoKS50b0xvd2VyQ2FzZSgpKSB7CgkJCWNhc2UgbmZzLkNTUzoKCQkJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChtZGIuTElOSykKCQkJCWl0ZW0ucmVsID0gInN0eWxlc2hlZXQiLCBpdGVtLnR5cGUgPSAidGV4dC9jc3MiCgkJCQlpdGVtLmhyZWYgPSB1cmwsIGl0ZW0ub25sb2FkID0gY2IKCQkJCXJldHVybiBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGl0ZW0pLCBpdGVtCgkJCWNhc2UgbmZzLkpTOgoJCQlkZWZhdWx0OgoJCQkJdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5mcy5TQ1JJUFQpCgkJCQlpdGVtLnNyYyA9IHVybCwgaXRlbS5vbmxvYWQgPSBjYiwgaXRlbS5vbmVycm9yID0gY2IKCQkJCXJldHVybiBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGl0ZW0pLCBpdGVtCgkJfQoJfQp9IGVsc2UgeyAvLyBub2RlanMKCWdsb2JhbC5raXQgPSBraXQsIGdsb2JhbC5pY2UgPSBpY2UKCWdsb2JhbC5jdHggPSBjdHgsIGdsb2JhbC5jbGkgPSBjbGksIGdsb2JhbC53ZWIgPSB3ZWIsIGdsb2JhbC5hYWEgPSBhYWEKCWdsb2JhbC5tZGIgPSBtZGIsIGdsb2JhbC5zc2ggPSBzc2gsIGdsb2JhbC5uZnMgPSBuZnMsIGdsb2JhbC50Y3AgPSB0Y3AKCWdsb2JhbC5jb2RlID0gY29kZSwgZ2xvYmFsLndpa2kgPSB3aWtpLCBnbG9iYWwuY2hhdCA9IGNoYXQsIGdsb2JhbC50ZWFtID0gdGVhbSwgZ2xvYmFsLm1hbGwgPSBtYWxsCglnbG9iYWwuc3ZnID0gc3ZnLCBnbG9iYWwuaHRtbCA9IGh0bWwsIGdsb2JhbC5sYW5nID0gbGFuZwoJZ2xvYmFsLnNoeSA9IHNoeSwgZ2xvYmFsLlZvbGNhbm9zID0gVm9sY2Fub3MsIGdsb2JhbC5jYW4gPSBjYW4KfSB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKGUpIH0KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL2FjdGlvbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wYW5lbC9mb290ZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGFuZWwvaGVhZGVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL3JpdmVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL3NlYXJjaC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvY2hhdC9kaXYuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvaW5uZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3RlYW0vcGxhbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvd2lraS9kYXRhLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9kcmF3LmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC93aWtpL2ZlZWwuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvZm9ybS5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvanNvbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3Rvcnkvc3BpZGUuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL3N0b3J5L3RyZW5kLmNzcyJdID0gW10KCl9jYW5fbmFtZSA9ICIvbGliL2Jhc2UuanMiClZvbGNhbm9zKCJiYXNlIiwge2hlbHA6ICLmlbDmja7nsbvlnosiLCBJbnQ6IGZ1bmN0aW9uKHZhbCwgZGVmKSB7IHJldHVybiBwYXJzZUludCh2YWwpfHxkZWZ8fDAgfSwKCU1pbjogZnVuY3Rpb24odmFsLCBtaW4pIHsgcmV0dXJuIHZhbCA+IG1pbj8gdmFsOiBtaW4gfSwKCU1heDogZnVuY3Rpb24odmFsLCBtYXgpIHsgcmV0dXJuIHZhbCA8IG1heD8gdmFsOiBtYXggfSwKCU9iajogZnVuY3Rpb24odmFsLCBkZWYpIHsKCQl0cnkgewoJCQlpZiAodHlwZW9mIHZhbCA9PSBsYW5nLlNUUklORykgeyBpZiAodmFsID09ICIiKSB7IHJldHVybiBkZWYgfSB2YWwgPSBKU09OLnBhcnNlKHZhbCkgfQoJCQlpZiAodmFsLmxlbmd0aCA+IDApIHsgcmV0dXJuIHZhbCB9IGZvciAodmFyIGsgaW4gdmFsKSB7IHJldHVybiB2YWwgfSByZXR1cm4gZGVmCgkJfSBjYXRjaCAoZSkgeyByZXR1cm4gdmFsICYmIHZhbC5zcGxpdCAmJiB2YWwuc3BsaXQoaWNlLkZTKSB8fCBkZWYgfQoJfSwKCUNvcHk6IGZ1bmN0aW9uKHRvLCBmcm9tLCBza2lwKSB7IGlmICghZnJvbSkgeyByZXR1cm4gdG8gfQoJCWlmIChhcmd1bWVudHMubGVuZ3RoID09IDIgfHwgdHlwZW9mIHNraXAgPT0gImJvb2xlYW4iKSB7CgkJCWZvciAodmFyIGsgaW4gZnJvbSkgewoJCQkJaWYgKHNraXAgJiYgdG9ba10gIT0gdW5kZWZpbmVkKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChmcm9tW2tdID09PSAiIikgeyBkZWxldGUodG9ba10pOyBjb250aW51ZSB9CgkJCQl0b1trXSA9IGZyb21ba10KCQkJfQoJCQlyZXR1cm4gdG8KCQl9CgkJZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGsgPSBhcmd1bWVudHNbaV07IHRvW2tdID0gZnJvbVtrXQoJCX0KCQlyZXR1cm4gdG8KCX0sCglFcTogZnVuY3Rpb24odG8sIGZyb20pIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJaWYgKHR5cGVvZiB0byAhPSB0eXBlb2YgZnJvbSkgeyByZXR1cm4gZmFsc2UgfQoJCWlmICh0eXBlb2YgdG8gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJaWYgKHRvLmxlbmd0aCAhPSBmcm9tLmxlbmd0aCkgeyByZXR1cm4gZmFsc2UgfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRvLmxlbmd0aDsgaSsrKSB7CgkJCQlpZiAoIWNhbGwodG9baV0sIGZyb21baV0pKSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJZm9yICh2YXIgayBpbiB0bykgewoJCQkJaWYgKCFjYWxsKHRvW2tdLCBmcm9tW2tdKSkgeyByZXR1cm4gZmFsc2UgfQoJCQl9CgkJCXJldHVybiB0cnVlCgkJfQoJCXJldHVybiB0byA9PT0gZnJvbQoJfSwKCglFeHQ6IGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIChwYXRoLnNwbGl0KGljZS5QUykucG9wKCkuc3BsaXQoaWNlLlBUKS5wb3AoKSkudG9Mb3dlckNhc2UoKSB9LAoJUGF0aDogZnVuY3Rpb24ocGF0aCkgeyB2YXIgcmVzID0gIiIKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyBpZiAoIWFyZ3VtZW50c1tpXSkgeyBjb250aW51ZSB9CgkJCXJlcyArPSAoYXJndW1lbnRzW2ldWzBdPT1pY2UuUFMgfHwgcmVzPT0iIiB8fCByZXNbcmVzLmxlbmd0aC0xXT09aWNlLlBTPyAiIjogaWNlLlBTKSArIGFyZ3VtZW50c1tpXS50cmltKCkKCQl9CgkJcmV0dXJuIHJlcwoJfSwKCUFyZ3M6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0gW10KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgewoJCQlpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJZm9yICh2YXIgayBpbiBhcmd1bWVudHNbaV0pIHsgcmVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2ldW2tdKSkgfQoJCQkJaS0tOyBjb250aW51ZQoJCQl9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSkgeyAKCQkJCXJlcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaV0pKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2krMV0pKQoJCQl9CgkJfQoJCXJldHVybiByZXMuam9pbigiJiIpCgl9LAoJTWVyZ2VVUkw6IGZ1bmN0aW9uKHVybCkgewoJCXZhciBhcmdzID0ge307ICh1cmwuc3BsaXQoIj8iKVsxXXx8IiIpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IGlmICghaXRlbSkgeyByZXR1cm4gfQoJCQl2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IGFyZ3NbZGVjb2RlVVJJQ29tcG9uZW50KGxzWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQobHNbMV0pCgkJfSkKCQlmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQlzd2l0Y2ggKHR5cGVvZiBhcmd1bWVudHNbaV0pIHsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IGFyZ3NbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdLCBpKys7IGJyZWFrCgkJCQljYXNlIGxhbmcuT0JKRUNUOgoJCQkJCWlmIChhcmd1bWVudHNbaV0ubGVuZ3RoID4gMCkgewoJCQkJCQlmb3IgKHZhciBqID0gMDsgaiA8IGFyZ3VtZW50c1tpXS5sZW5ndGg7IGogKz0gMikgeyBhcmdzW2FyZ3VtZW50c1tpXVtqXV0gPSBhcmd1bWVudHNbaV1bal0gfQoJCQkJCX0gZWxzZSB7CgkJCQkJCWZvciAodmFyIGsgaW4gYXJndW1lbnRzW2ldKSB7IGFyZ3Nba10gPSBhcmd1bWVudHNbaV1ba10gfQoJCQkJCX0KCQkJCQlicmVhawoJCQl9CgkJfQoJCXZhciBsaXN0ID0gW107IGZvciAodmFyIGsgaW4gYXJncykgeyBrICYmYXJnc1trXSAmJiBsaXN0LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJnc1trXSkpIH0KCQlyZXR1cm4gdXJsLnNwbGl0KCI/IilbMF0rKGxpc3QubGVuZ3RoPjA/ICI/IitsaXN0LmpvaW4oIiYiKTogIiIpCgl9LAoJUGFyc2VVUkw6IGZ1bmN0aW9uKHVybCkgeyB2YXIgcmVzID0ge2xpbms6IHVybH0KCQl2YXIgbGlzdCA9IHVybC5zcGxpdCgiPyIpOyByZXNbIm9yaWdpbiJdID0gbGlzdFswXQoJCWxpc3RbMV0gJiYgbGlzdFsxXS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IHJlc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQl9KQoJCXJldHVybiByZXMKCX0sCglQYXJzZUpTT046IGZ1bmN0aW9uKHN0cikgeyB2YXIgcmVzCgkJaWYgKHR5cGVvZiBzdHIgPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIHN0ciB9CgkJaWYgKHN0ci5pbmRleE9mKCJodHRwIikgPT0gMCkgeyB2YXIgbHMgPSBzdHIuc3BsaXQoIj8iKQoJCQlyZXMgPSB7dHlwZTogbWRiLkxJTkssIG5hbWU6ICIiLCB0ZXh0OiBzdHJ9CgkJCXJlcy5uYW1lID0gbHNbMF0uc3BsaXQoIjovLyIpLnBvcCgpLnNwbGl0KGljZS5QUylbMF0KCQkJbHNbMV0gJiYgbHNbMV0uc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGxzID0gaXRlbS5zcGxpdCgiPSIpCgkJCQlyZXNbZGVjb2RlVVJJQ29tcG9uZW50KGxzWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQobHNbMV0pCgkJCX0pCgkJCXJldHVybiByZXMKCQl9CgkJdHJ5IHsgcmVzID0gSlNPTi5wYXJzZShzdHIpLCByZXMudGV4dCA9IHJlcy50ZXh0fHxzdHIsIHJlcy50eXBlID0gcmVzLnR5cGV8fG5mcy5KU09OCgkJfSBjYXRjaCAoZSkgeyByZXMgPSB7dHlwZTogbWRiLlRFWFQsIHRleHQ6IHN0cn0gfQoJCXJldHVybiByZXMKCX0sCglQYXJzZVNpemU6IGZ1bmN0aW9uKHNpemUpIHsgc2l6ZSA9IHNpemUudG9Mb3dlckNhc2UoKQoJCWlmIChzaXplLmVuZHNXaXRoKCJ0YiIpIHx8IHNpemUuZW5kc1dpdGgoInQiKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0ICogMTAyNCAqIDEwMjQgKiAxMDI0CgkJfQoJCWlmIChzaXplLmVuZHNXaXRoKCJnYiIpIHx8IHNpemUuZW5kc1dpdGgoImciKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0ICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoIm1iIikgfHwgc2l6ZS5lbmRzV2l0aCgibSIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0CgkJfQoJCWlmIChzaXplLmVuZHNXaXRoKCJrYiIpIHx8IHNpemUuZW5kc1dpdGgoImsiKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0CgkJfQoJCXJldHVybiBwYXJzZUludChzaXplKQoJfSwKCglTaXplOiBmdW5jdGlvbihzaXplKSB7IHNpemUgPSBwYXJzZUludChzaXplKQoJCWlmIChzaXplID4gMTAwMDAwMDAwMCkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZS8xMDAwMDAwMDAwKSArIGljZS5QVCArIHBhcnNlSW50KHNpemUvMTAwMDAwMDAlMTAwKSArICJHIgoJCX0KCQlpZiAoc2l6ZSA+IDEwMDAwMDApIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUvMTAwMDAwMCkgKyBpY2UuUFQgKyBwYXJzZUludChzaXplLzEwMDAwJTEwMCkgKyAiTSIKCQl9CgkJaWYgKHNpemUgPiAxMDAwKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplLzEwMDApICsgaWNlLlBUICsgcGFyc2VJbnQoc2l6ZS8xMCUxMDApICsgIksiCgkJfQoJCXJldHVybiBzaXplICsgIkIiCgl9LAoJTnVtYmVyOiBmdW5jdGlvbihkLCBuKSB7IHZhciByZXN1bHQgPSBbXQoJCXdoaWxlIChkID4gMCkgeyByZXN1bHQucHVzaChkJTEwKTsgZCA9IHBhcnNlSW50KGQvMTApOyBuLS0gfQoJCXdoaWxlIChuID4gMCkgeyByZXN1bHQucHVzaCgiMCIpOyBuLS0gfQoJCXJldHVybiByZXN1bHQucmV2ZXJzZSgpLCByZXN1bHQuam9pbigiIikKCX0sCglGb3JtYXQ6IGZ1bmN0aW9uKG9iaikgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKSB9LAoJU2ltcGxlOiBmdW5jdGlvbigpIHsgdmFyIHJlcyA9IFtdCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTsgc3dpdGNoICh0eXBlb2YgYXJndW1lbnRzW2ldKSB7CgkJCQljYXNlIGxhbmcuTlVNQkVSOiByZXMucHVzaChhcmcpOyBicmVhawoJCQkJY2FzZSBsYW5nLlNUUklORzogcmVzLnB1c2goYXJnKTsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGFyZy5sZW5ndGggPiAwKSB7IHJlcyA9IHJlcy5jb25jYXQoYXJnKTsgYnJlYWsgfQoJCQkJCWZvciAodmFyIGsgaW4gYXJnKSB7IGsgJiYgYXJnW2tdICYmIHJlcy5wdXNoKGssIGFyZ1trXSkgfQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OiByZXMucHVzaChhcmcpOyAKCQkJfQoJCX0KCQlyZXR1cm4gcmVzCgl9LAoJQWRkVW5pcTogZnVuY3Rpb24obGlzdCwgdmFsdWUpIHsgbGlzdCA9IGxpc3R8fFtdOyByZXR1cm4gbGlzdC5pbmRleE9mKHZhbHVlKSA9PSAtMSAmJiBsaXN0LnB1c2godmFsdWUpLCBsaXN0IH0sCgoJRGF0ZTogZnVuY3Rpb24odGltZSkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCWlmICh0eXBlb2YgdGltZSA9PSBsYW5nLlNUUklORyAmJiB0aW1lICE9ICIiKSB7IHZhciBscyA9IHRpbWUuc3BsaXQoaWNlLlNQKQoJCQl2YXIgdnMgPSBsc1swXS5zcGxpdCgiLSIpCgkJCW5vdy5zZXRGdWxsWWVhcihwYXJzZUludCh2c1swXSkpCgkJCW5vdy5zZXRNb250aChwYXJzZUludCh2c1sxXSktMSkKCQkJbm93LnNldERhdGUocGFyc2VJbnQodnNbMl0pKQoKCQkJdmFyIHZzID0gbHNbMV0uc3BsaXQoIjoiKQoJCQlub3cuc2V0SG91cnMocGFyc2VJbnQodnNbMF0pKQoJCQlub3cuc2V0TWludXRlcyhwYXJzZUludCh2c1sxXSkpCgkJCW5vdy5zZXRTZWNvbmRzKHBhcnNlSW50KHZzWzJdKSkKCQl9IGVsc2UgaWYgKHRpbWUpIHsKCQkJbm93ID0gdGltZQoJCX0KCQlyZXR1cm4gbm93Cgl9LAoJVGltZTogZnVuY3Rpb24odGltZSwgZm10KSB7IHZhciBub3cgPSB0aGlzLkRhdGUodGltZSkKCQl2YXIgbGlzdCA9IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0KCQlmbXQgPSBmbXR8fCIlSDolTTolUyIKCQlmbXQgPSBmbXQucmVwbGFjZSgiJXkiLCBub3cuZ2V0RnVsbFllYXIoKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJW0iLCB0aGlzLk51bWJlcihub3cuZ2V0TW9udGgoKSsxLCAyKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJWQiLCB0aGlzLk51bWJlcihub3cuZ2V0RGF0ZSgpLCAyKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJXciLCBsaXN0W25vdy5nZXREYXkoKV0pCgkJZm10ID0gZm10LnJlcGxhY2UoIiVIIiwgdGhpcy5OdW1iZXIobm93LmdldEhvdXJzKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlTSIsIHRoaXMuTnVtYmVyKG5vdy5nZXRNaW51dGVzKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlUyIsIHRoaXMuTnVtYmVyKG5vdy5nZXRTZWNvbmRzKCksIDIpKQoJCXJldHVybiBmbXQKCX0sCglUaW1lQWRkOiBmdW5jdGlvbih0LCBkKSB7IHJldHVybiBuZXcgRGF0ZSh0IC0gdCUoMjQqMzYwMCoxMDAwKSAtIDgqMzYwMCoxMDAwICsgZCoyNCozNjAwKjEwMDApIH0sCglEdXJhdGlvbjogZnVuY3Rpb24obikgeyB2YXIgcmVzID0gIiIsIGggPSAwCgkJaCA9IHBhcnNlSW50KG4vMzYwMDAwMC8yNCksIGggPiAwICYmIChyZXMgKz0gaCsiZCIpLCBuID0gbiAlICgzNjAwMDAwKjI0KQoJCWggPSBwYXJzZUludChuLzM2MDAwMDApLCBoID4gMCAmJiAocmVzICs9IGgrImgiKSwgbiA9IG4gJSAzNjAwMDAwCgkJaCA9IHBhcnNlSW50KG4vNjAwMDApLCBoID4gMCAmJiAocmVzICs9IGgrIm0iKSwgbiA9IG4gJSA2MDAwMAoJCWggPSBwYXJzZUludChuLzEwMDApLCBoID4gMCAmJiAocmVzICs9IGgpLCBuID0gbiAlIDEwMDAKCQlyZXR1cm4gcmVzICsgKG4gPiAwPyBpY2UuUFQrcGFyc2VJbnQobi8xMCk6ICIiKSArICJzIgoJfSwKCgltb2Q6IGZ1bmN0aW9uKGluZGV4LCB0b3RhbCkgewoJCXJldHVybiAoaW5kZXgrdG90YWwpICUgdG90YWwKCX0sCglnZXRWYWxpZDogZnVuY3Rpb24oKSB7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJaWYgKHR5cGVvZiB2ID09IGxhbmcuT0JKRUNUKSB7CgkJCQlpZiAodiA9PSBudWxsKSB7IGNvbnRpbnVlIH0KCQkJCWZvciAodmFyIGsgaW4gdikgeyByZXR1cm4gdiB9CgkJCQlpZiAodi5sZW5ndGggPiAwKSB7IHJldHVybiB2IH0KCQkJfSBlbHNlIGlmICh0eXBlb2YgdiA9PSBsYW5nLlNUUklORyAmJiB2KSB7CgkJCQlyZXR1cm4gdgoJCQl9IGVsc2UgaWYgKHYgPT0gdW5kZWZpbmVkKSB7CgkJCQljb250aW51ZQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHYKCQkJfQoJCX0KCX0sCglpc051bWJlcjogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuTlVNQkVSIH0sCglpc1N0cmluZzogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuU1RSSU5HIH0sCglpc09iamVjdDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuT0JKRUNUIH0sCglpc0FycmF5OiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5PQkpFQ1QgJiYgdmFsLmxlbmd0aCAhPSB1bmRlZmluZWQgfSwKCWlzRnVuYzogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzRnVuY3Rpb246IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdHlwZW9mIHZhbCA9PSBsYW5nLkZVTkNUSU9OIH0sCglpc0NhbGxiYWNrOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBrZXkuaW5kZXhPZigib24iKSA9PSAwICYmIHR5cGVvZiB2YWx1ZSA9PSBsYW5nLkZVTkNUSU9OIH0sCglpc1VuZGVmaW5lZDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB2YWwgPT0gdW5kZWZpbmVkIH0sCglpc051bGw6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsID09IG51bGwgfSwKCXJlcGxhY2VBbGw6IGZ1bmN0aW9uKHN0cikgewoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7IGlmICghYXJndW1lbnRzW2ldKSB7IGNvbnRpbnVlIH0KCQkJaWYgKHN0ci5yZXBsYWNlQWxsKSB7IHN0ciA9IHN0ci5yZXBsYWNlQWxsKGFyZ3VtZW50c1tpXSwgYXJndW1lbnRzW2krMV0pOyBjb250aW51ZSB9CgkJCWlmIChzdHIucmVwbGFjZSkgeyBzdHIgPSBzdHIucmVwbGFjZShhcmd1bWVudHNbaV0sIGFyZ3VtZW50c1tpKzFdKTsgY29udGludWUgfQoJCX0KCQlyZXR1cm4gc3RyCgl9LAoKCWNvdW50OiBmdW5jdGlvbihzdHIsIHMpIHsgdmFyIG4gPSAwCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKCQkJaWYgKHN0cltpXSA9PSBzKSB7IG4rKyB9CgkJfQoJCXJldHVybiBuCgl9LAoJcmFuZG9tOiBmdW5jdGlvbihtYXgsIG1pbikgeyByZXR1cm4gbWluID0gbWlufHwwLCBwYXJzZUludChNYXRoLnJhbmRvbSgpKihtYXgtbWluKSkrbWluIH0sCglpc05pZ2h0OiBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCk7IHJldHVybiBub3cuZ2V0SG91cnMoKSA8IDcgfHwgbm93LmdldEhvdXJzKCkgPiAxNyB9LAoJYmVnaW5XaXRoOiBmdW5jdGlvbihzdHIsIGJlZ2luKSB7IHJldHVybiBzdHIudHJpbSgpLmluZGV4T2YoYmVnaW4pID09IDAgfSwKCWVuZFdpdGg6IGZ1bmN0aW9uKHN0ciwgZW5kKSB7IHJldHVybiBzdHIubGFzdEluZGV4T2YoZW5kKSArIGVuZC5sZW5ndGggPT0gc3RyLmxlbmd0aCB9LAoJdHJpbTogZnVuY3Rpb24oYXJncykgeyBpZiAodGhpcy5pc1N0cmluZyhhcmdzKSkgeyByZXR1cm4gYXJncy50cmltKCkgfQoJCWlmICh0aGlzLmlzQXJyYXkoYXJncykpIHsgZm9yICh2YXIgaSA9IGFyZ3MubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7IGlmICghYXJnc1tpXSkgeyBhcmdzLnBvcCgpIH0gZWxzZSB7IGJyZWFrIH0gfSB9CgkJcmV0dXJuIGFyZ3MKCX0sCgl0cmltUHJlZml4OiBmdW5jdGlvbihzdHIsIHByZSkgeyBpZiAoc3RyLmluZGV4T2YocHJlKSA9PSAtMSkgeyByZXR1cm4gc3RyIH0gcmV0dXJuIHN0ci5zbGljZShwcmUubGVuZ3RoKSB9LAoJdHJpbVN1ZmZpeDogZnVuY3Rpb24oc3RyLCBlbmQpIHsKCQl2YXIgaW5kZXggPSBzdHIubGFzdEluZGV4T2YoZW5kKQoJCWlmIChpbmRleCA9PSAtMSB8fCBpbmRleCtlbmQubGVuZ3RoICE9IHN0ci5sZW5ndGgpIHsgcmV0dXJuIHN0ciB9IHJldHVybiBzdHIuc2xpY2UoMCwgaW5kZXgpCgl9LAoJam9pbjogZnVuY3Rpb24obGlzdCwgc3ApIHsgcmV0dXJuIChsaXN0fHxbXSkuam9pbihzcHx8aWNlLlNQKSB9LAoJam9pbnM6IGZ1bmN0aW9uKGxpc3QsIGlubmVyLCBvdXRlcikgeyAKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJbGlzdFtpXSA9IHR5cGVvZiBsaXN0W2ldID09IGxhbmcuU1RSSU5HPyBsaXN0W2ldOiBsaXN0W2ldLmpvaW4oaW5uZXJ8fGljZS5GUykKCQl9CgkJcmV0dXJuIGxpc3Quam9pbihvdXRlcnx8aWNlLlNQKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL2NvcmUuanMiClZvbGNhbm9zKCJjb3JlIiwge2hlbHA6ICLmlbDmja7nu5PmnoQiLAoJS2V5czogc2h5KCLov57mjqXlmagiLCBmdW5jdGlvbigpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciB2ID0gYXJndW1lbnRzW2ldCgkJCXN3aXRjaCAodHlwZW9mIHYpIHsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyBsaXN0LnB1c2godltqXSkgfSBicmVhawoJCQkJY2FzZSBsYW5nLk5VTUJFUjogbGlzdC5wdXNoKHYrIiIpOyBicmVhawoJCQkJY2FzZSBsYW5nLkZVTkNUSU9OOiB2ID0gdigpCgkJCQlkZWZhdWx0OiB2ICYmIGxpc3QucHVzaCh2KyIiKQoJCQl9CgkJfQoJCXJldHVybiBsaXN0LmpvaW4oaWNlLlBUKQoJfSksCglWYWx1ZTogc2h5KCLlrZjlgqjlmagiLCBmdW5jdGlvbihkYXRhLCBrZXksIHZhbHVlKSB7CgkJaWYgKGRhdGEgPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9CgkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGRhdGEgfQoKCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCAmJiBrZXkubGVuZ3RoID4gMCkgeyBrZXkgPSBrZXkuam9pbihpY2UuUFQpIH0KCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCkgeyBmb3IgKHZhciBrIGluIGtleSkgeyBhcmd1bWVudHMuY2FsbGVlLmNhbGwodGhpcywgZGF0YSwgaywga2V5W2tdKSB9IHJldHVybiBkYXRhIH0KCgkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewoJCQl2YXIgX2RhdGEgPSBkYXRhCgoJCQl2YXIgbHMgPSBrZXkuc3BsaXQoaWNlLlBUKQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxzLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgX3N1YiA9IF9kYXRhW2xzW2ldXXx8e30KCQkJCV9kYXRhW2xzW2ldXSA9IF9zdWIKCQkJCWlmIChpID09IGxzLmxlbmd0aCAtIDEpIHsKCQkJCQlfZGF0YVtsc1tpXV0gPSB2YWx1ZQoJCQkJfSBlbHNlIHsKCQkJCQlfZGF0YSA9IF9zdWIKCQkJCX0KCQkJfQoJCQkvLyBkYXRhW2tleV0gPSB2YWx1ZQoJCX0KCQlpZiAoZGF0YVtrZXldICE9IHVuZGVmaW5lZCkgeyByZXR1cm4gZGF0YVtrZXldIH0KCgkJdmFyIHAgPSBkYXRhLCBscyA9IGtleS5zcGxpdChpY2UuUFQpOyB3aGlsZSAocCAmJiBscy5sZW5ndGggPiAwKSB7CgkJCWlmIChsc1swXSA9PSAiLTEiKSB7IGxzWzBdID0gcC5sZW5ndGgtMSB9CgkJCXAgPSBwW2xzWzBdXSwgbHMgPSBscy5zbGljZSgxKQoJCX0gcmV0dXJuIHAKCX0pLAoJU3BsaXQ6IHNoeSgi5YiG6K+N5ZmoIiwgZnVuY3Rpb24oc3RyKSB7IGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7IHJldHVybiBbXSB9CgkJdmFyIG9wdCA9IHtkZXRhaWw6IGZhbHNlfSwgYXJnID0gW107IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCXR5cGVvZiBhcmd1bWVudHNbaV0gPT0gbGFuZy5PQkpFQ1Q/IG9wdCA9IGFyZ3VtZW50c1tpXTogYXJnLnB1c2goYXJndW1lbnRzW2ldKQoJCX0KCgkJLy8g5a2X56ym5a6a5LmJCgkJZnVuY3Rpb24gX2xpc3Qoc3RyKSB7IHZhciByZXMgPSB7fTsgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsgcmVzW3N0cltpXV0gPSB0cnVlIH07IHJldHVybiByZXMgfQoJCXZhciBzcGFjZSA9IF9saXN0KGFyZ1swXXx8Ilx0ICw7XG4iKSAgLy8g56m655m956ymCgkJdmFyIGJsb2NrID0gX2xpc3QoYXJnWzFdfHwie1soKV19IikgICAvLyDliIbpmpTnrKYKCQl2YXIgcXVvdGUgPSBfbGlzdChhcmdbMl18fCInXCJgIikgICAgIC8vIOW8leeUqOespgoJCXZhciB0cmFucyA9IF9saXN0KGFyZ1szXXx8IlxcIikgICAgICAgLy8g6L2s5LmJ56ymCgoJCXZhciByZXMgPSBbXSwgYmVnaW4gPSAwOyBmdW5jdGlvbiBwdXNoKG9iaikgewoJCQlvYmogJiYgcmVzLnB1c2godHlwZW9mIG9iaiA9PSBsYW5nLlNUUklORyB8fCBvcHQuZGV0YWlsPyBvYmo6IG9iai50ZXh0KSwgYmVnaW4gPSAtMQoJCX0KCgkJLy8g5byA5aeL5YiG6K+NCgkJZm9yICh2YXIgcyA9ICIiLCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewoJCQlpZiAoc3BhY2Vbc3RyW2ldXSkgeyAvLyDnqbrnmb3nrKYKCQkJCWlmIChzKSB7IGNvbnRpbnVlIH0KCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJb3B0LmRldGFpbCAmJiBwdXNoKHt0eXBlOiBodG1sLlNQQUNFLCB0ZXh0OiBzdHIuc2xpY2UoaSwgaSsxKX0pCgoJCQl9IGVsc2UgaWYgKGJsb2NrW3N0cltpXV0pIHsgLy8g5YiG6ZqU56ymCgkJCQlpZiAocykgeyBjb250aW51ZSB9CgkJCQliZWdpbiA+IC0xICYmIHB1c2goc3RyLnNsaWNlKGJlZ2luLCBpKSkKCQkJCXB1c2goc3RyLnNsaWNlKGksIGkrMSkpCgoJCQl9IGVsc2UgaWYgKHF1b3RlW3N0cltpXV0pIHsgLy8g5byV55So56ymCgkJCQlpZiAocyA9PSAiIikgewoJCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJCXMgPSBzdHJbaV0sIGJlZ2luID0gaSsxCgkJCQl9IGVsc2UgaWYgKHMgPT0gc3RyW2ldKSB7CgkJCQkJcHVzaCh7dHlwZTogbGFuZy5TVFJJTkcsIHRleHQ6IHN0ci5zbGljZShiZWdpbiwgaSksIGxlZnQ6IHMsIHJpZ2h0OiBzdHJbaV19KQoJCQkJCXMgPSAiIiwgYmVnaW4gPSAtMQoJCQkJfQoKCQkJfSBlbHNlIGlmICh0cmFuc1tzdHJbaV1dKSB7IC8vIOi9rOS5ieespgoJCQkJYmVnaW4gPT0gLTEgJiYgKGJlZ2luID0gaSsrKQoKCQkJfSBlbHNlIHsgLy8g5pmu6YCa56ymCgkJCQliZWdpbiA9PSAtMSAmJiAoYmVnaW4gPSBpKQoJCQl9CgkJfQoKCQkvLyDliankvZnlrZfnrKYKCQliZWdpbiA+PSAwICYmIChzPyBwdXNoKHt0eXBlOiBsYW5nLlNUUklORywgdGV4dDogc3RyLnNsaWNlKGJlZ2luKSwgbGVmdDogcywgcmlnaHQ6ICIifSk6IHB1c2goc3RyLnNsaWNlKGJlZ2luKSkpCgkJcmV0dXJuIHJlcwoJfSksCglDYWxsRnVuYzogc2h5KCLosIPnlKjlmagiLCBmdW5jdGlvbihmdW5jLCBhcmdzLCBtb2QpIHsgYXJncyA9IGFyZ3N8fHt9CgkJdmFyIGV2ZW50ID0gYXJnc1siZXZlbnQiXXx8e30sIGNhbiA9IGFyZ3NbImNhbiJdfHxhcmdzWzBdLCBtc2cgPSBhcmdzWyJtc2ciXXx8YXJnc1sxXSwgY21kcyA9IGFyZ3NbImNtZHMiXXx8W10KCQlldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCgkJLy8g5p+l5om+6LCD55SoCgkJZnVuYyA9IHR5cGVvZiBmdW5jID09IGxhbmcuRlVOQ1RJT04/IGZ1bmM6IHR5cGVvZiBmdW5jID09IGxhbmcuU1RSSU5HPyB0aGlzLlZhbHVlKG1vZHx8Y2FuLCBmdW5jKToKCQkJdHlwZW9mIGZ1bmMgPT0gbGFuZy5PQkpFQ1QgJiYgZnVuYy5sZW5ndGggPiAwPyB0aGlzLlZhbHVlKGZ1bmNbMF0sIHRoaXMuS2V5cyhmdW5jLnNsaWNlKDEpKSk6IG51bGwKCQlpZiAodHlwZW9mIGZ1bmMgIT0gbGFuZy5GVU5DVElPTikgeyByZXR1cm4gfQoKCQkvLyDop6PmnpDlj4LmlbAKCQl2YXIgbGlzdCA9IFtdLCBlY2hvID0gZmFsc2UsIGNiID0gYXJnc1siY2IiXQoJCXRoaXMuTGlzdChmdW5jLnRvU3RyaW5nKCkuc3BsaXQoIikiKVswXS5zcGxpdCgiKCIpWzFdLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGl0ZW0gPSBpdGVtLnRyaW0oKTsgaWYgKGl0ZW0gPT0gIiIpIHsgcmV0dXJuIH0KCQkJdmFyIGFyZyA9IGFyZ3NbaXRlbV0gfHwgbXNnJiZtc2cuT3B0aW9uJiZtc2cuT3B0aW9uKGl0ZW0pIHx8IGNhbiYmY2FuLkNvbmYmJmNhbi5Db25mKGl0ZW0pIHx8CgkJCQlldmVudCYmIShldmVudCBpbnN0YW5jZW9mIEV2ZW50KSYmZXZlbnRbaXRlbV0gfHwgYXJnc1tpbmRleF0gfHwgY21kc1tpbmRleF0gfHwgbnVsbAoJCQlpZiAoaXRlbSA9PSAiY2IiKSB7IGVjaG8gPSB0cnVlIH0KCQkJbGlzdC5wdXNoKGFyZykKCQl9KQoKCQkvLyDmiafooYzosIPnlKgKCQl2YXIgcmVzID0gZnVuYy5hcHBseShtb2R8fGNhbiwgbGlzdCkKCQlpZiAoIWVjaG8gJiYgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04pIHsgcmVzICYmIG1zZyAmJiBtc2cuRWNobyhyZXMpLCBhcmd1bWVudHMuY2FsbGVlLmFwcGx5KHRoaXMsIFtjYiwge21zZzogbXNnLCByZXM6IHJlc31dKSB9CgkJcmV0dXJuIHJlcwoJfSksCgoJTGlzdDogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihsaXN0LCBjYiwgaW50ZXJ2YWwsIGNicykgewoJCWlmICh0eXBlb2YgbGlzdCA9PSBsYW5nLlNUUklORykgeyAvLyDpu5jorqTluo/liJcKCQkJbGlzdCA9IFtsaXN0XQoJCX0gZWxzZSBpZiAodHlwZW9mIGxpc3QgPT0gbGFuZy5OVU1CRVIpIHsgLy8g562J5beu5bqP5YiXIFtlbmQgY2IgaW50ZXJ2YWxdfFtiZWdpbiBlbmQgaW50ZXJ2YWxdCgkJCXZhciBiZWdpbiA9IDAsIGVuZCA9IGxpc3QsIHN0ZXAgPSB0eXBlb2YgaW50ZXJ2YWwgPT0gbGFuZy5OVU1CRVI/IGludGVydmFsOiAxCgkJCWlmICh0eXBlb2YgY2IgPT0gbGFuZy5OVU1CRVIpIHsgYmVnaW4gPSBsaXN0LCBlbmQgPSBjYiwgY2IgPSBudWxsIH0KCQkJbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gYmVnaW47IGkgPCBlbmQ7IGkgKz0gc3RlcCkgeyBsaXN0LnB1c2goaSkgfQoJCX0KCgkJbGlzdCA9IGxpc3R8fFtdCgkJaWYgKGludGVydmFsID4gMCkgeyAvLyDml7bpl7Tluo/liJcKCQkJZnVuY3Rpb24gbG9vcChpKSB7IGlmIChpID49IGxpc3QubGVuZ3RoKSB7IHJldHVybiB0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKGxpc3QpIH0KCQkJCWNiKGxpc3RbaV0sIGksIGxpc3QpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBsb29wKGkrMSkgfSwgaW50ZXJ2YWwpCgkJCX0KCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgbGlzdC5sZW5ndGggPiAwICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoMCkgfSwgaW50ZXJ2YWwvNCkKCQl9IGVsc2UgeyAvLyDpgInmi6nluo/liJcKCQkJdmFyIHNsaWNlID0gW10sIHJlcwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OPyAocmVzID0gY2IobGlzdFtpXSwgaSwgbGlzdCkpICE9IHVuZGVmaW5lZCAmJiBzbGljZS5wdXNoKHJlcyk6IHNsaWNlLnB1c2gobGlzdFtpXSkKCQkJfTsgbGlzdCA9IHNsaWNlCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCU5leHQ6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24obGlzdCwgY2IsIGNicykgewoJCXN3aXRjaCAodHlwZW9mIGxpc3QpIHsKCQkJY2FzZSBsYW5nLk9CSkVDVDogaWYgKGxpc3QgPT0gbnVsbCkgeyBsaXN0ID0gW107IGJyZWFrIH0KCQkJCWlmIChsaXN0Lmxlbmd0aCA9PSB1bmRlZmluZWQpIHsgdmFyIGxzID0gW107IGZvciAodmFyIGsgaW4gbGlzdCkgeyBscy5wdXNoKGspIH0gbGlzdCA9IGxzIH0gYnJlYWsKCQkJZGVmYXVsdDogaWYgKGxpc3QgPT0gdW5kZWZpbmVkKSB7IGxpc3QgPSBbXTsgYnJlYWsgfQoJCQkJbGlzdCA9IFtsaXN0XQoJCX0KCgkJZnVuY3Rpb24gbmV4dChpKSB7IGkgPCBsaXN0Lmxlbmd0aD8gIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKGxpc3RbaV0sIGZ1bmN0aW9uKCkgeyBuZXh0KGkrMSkgfSwgaSwgbGlzdCk6CgkJCQl0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKGxpc3QpIH0KCQlyZXR1cm4gbmV4dCgwKSwgbGlzdAoJfSksCglJdGVtczogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihvYmosIGNiKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG9iaikgewoJCQlsaXN0ID0gbGlzdC5jb25jYXQodGhpcy5MaXN0KG9ialtrXSwgZnVuY3Rpb24odiwgaSkgewoJCQkJcmV0dXJuIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKHYsIGksIGssIG9iaikKCQkJfSkpCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCUl0ZW1Tb3J0OiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwga2V5LCBjYikgeyB2YXIgbGlzdCA9IFtdCgkJdmFyIG9yZGVyID0gW10sIGtleXMgPSB7fSwgdmFscyA9IHt9LCBpID0gMAoJCWZvciAodmFyIGsgaW4gb2JqKSB7IG8gPSBvYmpba11ba2V5XXx8aSsrCgkJCW9yZGVyLnB1c2gobyksIGtleXNbb10gPSBrLCB2YWxzW29dID0gb2JqW2tdCgkJfTsgb3JkZXIuc29ydCgpCgoJCWZvciAodmFyIGkgaW4gb3JkZXIpIHsgdmFyIGsgPSBvcmRlcltpXQoJCQl2YXIgcmVzID0gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IGNiKGtleXNba10sIHZhbHNba10pOiBrCgkJCXJlcyAhPSB1bmRlZmluZWQgJiYgbGlzdC5wdXNoKHJlcykKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJSXRlbTogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihvYmosIGNiKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG9iaikgewoJCQl2YXIgcmVzID0gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IGNiKGssIG9ialtrXSk6IGsKCQkJcmVzICE9IHVuZGVmaW5lZCAmJiBsaXN0LnB1c2gocmVzKQoJCX0KCQlyZXR1cm4gbGlzdAoJfSksCglJdGVtQ0I6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24obWV0YSwgY2IsIGNhbiwgaXRlbSkgeyB2YXIgbGlzdCA9IFtdCgkJZm9yICh2YXIgayBpbiBtZXRhKSB7IChmdW5jdGlvbihrKSB7CgkJCWlmIChrLmluZGV4T2YoIm9uIikgPT0gMCAmJiB0eXBlb2YgbWV0YVtrXSA9PSBsYW5nLkZVTkNUSU9OKSB7CgkJCQlpZiAodHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04pIHsKCQkJCQljYihrLCBtZXRhW2tdKQoJCQkJfSBlbHNlIHsKCQkJCQljYltrXSA9IGZ1bmN0aW9uKGV2ZW50KSB7IG1ldGFba10oZXZlbnQsIGNhbiwgaXRlbSkgfQoJCQkJfQoJCQkJbGlzdC5wdXNoKGspCgkJCX0KCQl9KShrKSB9CgkJcmV0dXJuIGxpc3QKCX0pLAoKCVNwbGl0SW5wdXQ6IGZ1bmN0aW9uKGl0ZW0sIHR5cGUpIHsgaWYgKHR5cGVvZiBpdGVtID09IGxhbmcuT0JKRUNUKSB7IHJldHVybiBpdGVtIH0KCQl0eXBlID0gdHlwZXx8aHRtbC5URVhUOyBzd2l0Y2ggKGl0ZW0pIHsKCQkJY2FzZSBtZGIuTElTVDogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5CVVRUT04sIG5hbWU6IGl0ZW0sIGFjdGlvbjogaWNlLkFVVE99CgkJCWNhc2UgY2xpLkJBQ0s6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuQlVUVE9OLCBuYW1lOiBpdGVtfQoJCQljYXNlIG1kYi5OQU1FOiByZXR1cm4ge3R5cGU6IHR5cGUgPSBodG1sLlRFWFQsIG5hbWU6IGl0ZW19CgkJCWNhc2UgbWRiLlRFWFQ6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuVEVYVEFSRUEsIG5hbWU6IGl0ZW19CgkJCWRlZmF1bHQ6IHZhciBscyA9IHRoaXMuU3BsaXQoaXRlbSwgIiAiLCAiOj1AIiksIHJlcyA9IHt0eXBlOiB0eXBlLCBuYW1lOiBsc1swXX07IGZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsKCQkJCQlzd2l0Y2ggKGxzW2ldKSB7CgkJCQkJCWNhc2UgIjoiOiByZXNbbWRiLlRZUEVdID0gbHNbaSsxXTsgYnJlYWsKCQkJCQkJY2FzZSAiPSI6CgkJCQkJCQlpZiAocmVzW21kYi5UWVBFXSA9PSBodG1sLlNFTEVDVCkgewoJCQkJCQkJCXJlcy52YWx1ZXMgPSB0aGlzLlNwbGl0KGxzW2krMV0pCgkJCQkJCQkJZm9yICh2YXIgaiA9IDE7IGogPCByZXMudmFsdWVzLmxlbmd0aDsgaisrKSB7CgkJCQkJCQkJCWlmIChyZXMudmFsdWVzWzBdID09ICIiIHx8IHJlcy52YWx1ZXNbMF0gPT0gcmVzLnZhbHVlc1tqXSkgewoJCQkJCQkJCQkJcmVzLnZhbHVlID0gcmVzLnZhbHVlc1swXSwgcmVzLnZhbHVlcyA9IHJlcy52YWx1ZXMuc2xpY2UoMSkKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJlcy52YWx1ZSA9IGxzW2krMV0KCQkJCQkJCX0KCQkJCQkJCWJyZWFrCgkJCQkJCWNhc2UgIkAiOiByZXNbY3R4LkFDVElPTl0gPSBsc1tpKzFdOyBicmVhawoJCQkJCX0KCQkJCX0gcmV0dXJuIHJlcwoJCX0KCX0sCglUaW1lcjMwMG1zOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMCwgY2IpIH0sCglUaW1lcjMwMDogZnVuY3Rpb24oY2IpIHsgdGhpcy5UaW1lcigzMDAsIGNiKSB9LAoJVGltZXIzczogZnVuY3Rpb24oY2IpIHsgdGhpcy5UaW1lcigzMDAwLCBjYikgfSwKCVRpbWVyOiBzaHkoIuWumuaXtuWZqCwgdmFsdWUsIFsxLDIsMyw0XSwge2ludGVydmFsLCBsZW5ndGh9IiwgZnVuY3Rpb24oaW50ZXJ2YWwsIGNiLCBjYnMpIHsKCQl2YXIgdGltZXIgPSB7c3RvcDogZmFsc2V9OyBmdW5jdGlvbiBsb29wKGkpIHsKCQkJdGltZXIuc3RvcCB8fCBpID49IGludGVydmFsLmxlbmd0aCAmJiBpbnRlcnZhbC5sZW5ndGggPj0gMCB8fCBjYih0aW1lciwgaW50ZXJ2YWwuaW50ZXJ2YWx8fGludGVydmFsW2ldLCBpLCBpbnRlcnZhbCk/CgkJCQl0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKHRpbWVyLCBpbnRlcnZhbCk6IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoaSsxKSB9LCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbaSsxXSkKCQl9CgoJCWludGVydmFsID0gdHlwZW9mIGludGVydmFsID09IGxhbmcuT0JKRUNUPyBpbnRlcnZhbDogW2ludGVydmFsXQoJCWlmIChpbnRlcnZhbC5pbnRlcnZhbCA9PSAwKSB7IGNiKCk7IHJldHVybiB0aW1lciB9CgoJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoMCkgfSwgaW50ZXJ2YWwuaW50ZXJ2YWx8fGludGVydmFsWzBdKQoJCXJldHVybiB0aW1lcgoJfSksCn0pCgpfY2FuX25hbWUgPSAiL2xpYi9taXNjLmpzIgpWb2xjYW5vcygibWlzYyIsIHtoZWxwOiAi6YCa5L+h5Y2P6K6uIiwgTWVzc2FnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0ge30gCgkJdmFyIHByb3RvID0ge19ldmVudDogZXZlbnQsIF9jYW46IGNhbiwKCQkJUnVuQWN0aW9uOiBmdW5jdGlvbihldmVudCwgc3ViLCBjbWRzLCBtZXRhKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1ldGEgPSBtZXRhIHx8IHN1YiYmc3ViLm9uYWN0aW9uIHx8IHt9CgkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJCWlmIChjbWRzICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBjYW4uYmFzZS5pc0Z1bmMobWV0YVtjbWRzWzFdXSkpIHsgZXZlbnQgPSBldmVudC5fZXZlbnR8fGV2ZW50CgkJCQkJcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFKSwgY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YVtjbWRzWzFdXSwge2V2ZW50OiBldmVudCwgY2FuOiBzdWIsIG1zZzogbXNnLCBidXR0b246IGNtZHNbMV0sIGNtZDogY21kc1sxXX0pLCB0cnVlCgkJCQl9CgkJCQlyZXR1cm4gZmFsc2UKCQkJfSwKCQkJRGlzcGxheTogZnVuY3Rpb24oZmlsZSkgeyBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSwgZmlsZSkgfSwKCQkJRGlzcGxheVN0b3J5OiBmdW5jdGlvbihmaWxlKSB7IG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZLCAiL3BsdWdpbi9zdG9yeS8iK2ZpbGUpIH0sCgkJCU9wdGlvblN0YXR1czogZnVuY3Rpb24oKSB7IHJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSB9LAoJCQlPcHRpb25Qcm9jZXNzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19QUk9DRVNTKSB9LAoJCQlPcHRpb25PclNlYXJjaDogZnVuY3Rpb24oa2V5KSB7IHJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCBrZXkpfHxtc2cuT3B0aW9uKGtleSkgfSwKCQkJT3B0aW9uOiBmdW5jdGlvbihrZXksIHZhbCkgewoJCQkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2cub3B0aW9uIHx8IFtdIH0KCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGNhbi5jb3JlLkl0ZW0oa2V5LCBtc2cuT3B0aW9uKSB9CgkJCQlpZiAodmFsID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZ1trZXldICYmIG1zZ1trZXldWzBdIHx8ICIiIH0KCQkJCXJldHVybiBtc2cub3B0aW9uID0gY2FuLmJhc2UuQWRkVW5pcShtc2cub3B0aW9uLCBrZXkpLCBtc2dba2V5XSA9IGNhbi5jb3JlLkxpc3QoYXJndW1lbnRzKS5zbGljZSgxKSwgdmFsCgkJCX0sCgkJCUFwcGVuZDogZnVuY3Rpb24oa2V5LCB2YWwpIHsKCQkJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnLmFwcGVuZCB8fCBbXSB9CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBjYW4uY29yZS5JdGVtKGtleSwgbXNnLkFwcGVuZCkgfQoJCQkJaWYgKHZhbCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2dba2V5XSAmJiBtc2dba2V5XVswXSB8fCAiIiB9CgkJCQlyZXR1cm4gbXNnLmFwcGVuZCA9IGNhbi5iYXNlLkFkZFVuaXEobXNnLmFwcGVuZCwga2V5KSwgbXNnW2tleV0gPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMSksIHZhbAoJCQl9LAoJCQlSZXN1bHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXNnLnJlc3VsdCAmJiBtc2cucmVzdWx0LmpvaW4oIiIpIHx8ICIiIH0sCgoJCQlMZW5ndGg6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1heCA9ICIiLCBsZW4gPSAwOyBjYW4uY29yZS5MaXN0KG1zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgaW5kZXgpIHsKCQkJCQlpZiAobXNnW2tleV0gJiYgbXNnW2tleV0ubGVuZ3RoID4gbGVuKSB7IG1heCA9IGtleSwgbGVuID0gbXNnW2tleV0ubGVuZ3RoIH0KCQkJCX0pCgkJCQlyZXR1cm4gbGVuCgkJCX0sCgkJCVRhYmxlOiBmdW5jdGlvbihjYikgewoJCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobXNnLkxlbmd0aCgpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IHZhciBvbmUgPSB7fSwgcmVzCgkJCQkJY2FuLmNvcmUuTGlzdChtc2cuYXBwZW5kLCBmdW5jdGlvbihrZXkpIHsgb25lW2tleV0gPSAobXNnW2tleV0mJm1zZ1trZXldW2luZGV4XXx8IiIpIH0pCgkJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgKHJlcyA9IGNiKG9uZSwgaW5kZXgsIGFycmF5KSkgJiYgcmVzICE9IHVuZGVmaW5lZCAmJiByZXMgfHwgb25lCgkJCQl9KQoJCQl9LAoJCQlDbGVhcjogZnVuY3Rpb24oa2V5KSB7IHN3aXRjaCAoa2V5fHxpY2UuTVNHX0FQUEVORCkgewoJCQkJY2FzZSBpY2UuTVNHX0FQUEVORDoKCQkJCWNhc2UgaWNlLk1TR19PUFRJT046CgkJCQkJY2FuLmNvcmUuTGlzdChtc2dba2V5XSwgZnVuY3Rpb24oaXRlbSkgeyBkZWxldGUobXNnW2l0ZW1dKSB9KQoJCQkJZGVmYXVsdDogbXNnW2tleV0gPSBbXQoJCQl9IH0sCgkJCUNvcHk6IGZ1bmN0aW9uKHJlcykgeyBpZiAoIXJlcykgeyByZXR1cm4gbXNnIH0KCQkJCXJlcy5yZXN1bHQgJiYgKG1zZy5yZXN1bHQgPSAobXNnLnJlc3VsdHx8W10pLmNvbmNhdChyZXMucmVzdWx0KSkKCQkJCXJlcy5hcHBlbmQgJiYgKG1zZy5hcHBlbmQgPSByZXMuYXBwZW5kKSAmJiByZXMuYXBwZW5kLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCXZhciBpID0gbXNnLm9wdGlvbiAmJiBtc2cub3B0aW9uLmluZGV4T2YoaXRlbSk7IGlmIChpID4gLTEpIHsKCQkJCQkJbXNnLm9wdGlvbltpXSA9ICIiLCBkZWxldGUobXNnW2l0ZW1dKQoJCQkJCX0KCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IChtc2dbaXRlbV18fFtdKS5jb25jYXQocmVzW2l0ZW1dKSkKCQkJCX0pCgkJCQlyZXMub3B0aW9uICYmIChtc2cub3B0aW9uID0gcmVzLm9wdGlvbikgJiYgcmVzLm9wdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IHJlc1tpdGVtXSkKCQkJCX0pCgkJCQlyZXMuX29wdGlvbiAmJiAobXNnLl9vcHRpb24gPSByZXMuX29wdGlvbikgJiYgcmVzLl9vcHRpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSByZXNbaXRlbV0pCgkJCQl9KQoJCQkJcmV0dXJuIG1zZwoJCQl9LAoJCQlQdXNoOiBmdW5jdGlvbihrZXksIHZhbHVlLCBkZXRhaWwpIHsKCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7CgkJCQkJdmFsdWUgPSB2YWx1ZXx8Y2FuLmNvcmUuSXRlbShrZXkpLCBjYW4uY29yZS5MaXN0KHZhbHVlLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWRldGFpbD8gbXNnLlB1c2gobWRiLktFWSwgaXRlbSkuUHVzaChtZGIuVkFMVUUsIGtleVtpdGVtXXx8IiIpOiBtc2cuUHVzaChpdGVtLCBrZXlbaXRlbV18fCIiKQoJCQkJCX0pCgkJCQkJcmV0dXJuIG1zZwoJCQkJfQoKCQkJCW1zZy5hcHBlbmQgPSBjYW4uYmFzZS5BZGRVbmlxKG1zZy5hcHBlbmQsIGtleSksIG1zZ1trZXldID0gbXNnW2tleV0gfHwgW10KCQkJCW1zZ1trZXldLnB1c2goY2FuLmJhc2UuaXNTdHJpbmcodmFsdWUpfHxjYW4uYmFzZS5pc0Z1bmN0aW9uKHZhbHVlKT8gdmFsdWU6IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkKCQkJCXJldHVybiBtc2cKCQkJfSwKCQkJU3RhdHVzOiBmdW5jdGlvbihvYmopIHsgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUywgSlNPTi5zdHJpbmdpZnkoY2FuLmNvcmUuSXRlbShvYmosIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0gfSkpKSB9LAoJCQlTdGF0dXNUaW1lQ291bnQ6IGZ1bmN0aW9uKG9iaikgeyBtc2cuYXBwZW5kICYmIG1zZy5TdGF0dXMoY2FuLmJhc2UuQ29weSh7InRpbWUiOiBjYW4uYmFzZS5UaW1lKCksICJjb3VudCI6IG1zZy5MZW5ndGgoKSsieCIrbXNnLmFwcGVuZC5sZW5ndGh9LCBvYmopKSB9LAoJCQlFY2hvOiBmdW5jdGlvbihyZXMpIHsgbXNnLnJlc3VsdCA9IG1zZy5yZXN1bHQgfHwgW10KCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IG1zZy5yZXN1bHQucHVzaChhcmd1bWVudHNbaV0pIH0KCQkJCXJldHVybiBtc2cuX2hhbmQgPSB0cnVlLCBtc2cKCQkJfSwKCQkJRHVtcDogZnVuY3Rpb24oY2FuKSB7CgkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCQkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCQl9LAoJCX0KCQlyZXR1cm4gY2FuLm1pc2MucHJvdG8obXNnLCBwcm90bykKCX0sCglHRVQ6IGZ1bmN0aW9uKGNhbiwgdXJsLCBjYikgeyB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCkKCQl4aHIub3BlbigiR0VUIiwgdXJsKSwgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHsKCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHhoci5yZXNwb25zZVRleHQpCgkJCX0KCQl9CgkJdHJ5IHsgeGhyLnNlbmQoKSB9IGNhdGNoKGUpIHsgY2FuLm1pc2MuTG9nKGUpIH0KCX0sCglQT1NUOiBmdW5jdGlvbihjYW4sIG1zZywgdXJsLCBmb3JtLCBjYikgeyAvLyBfbWV0aG9kIF9hY2NlcHQgX3VwbG9hZCBfcHJvZ3Jlc3MKCQl2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IG1zZy5feGhyID0geGhyCgkJeGhyLm9wZW4obXNnLl9tZXRob2R8fCJQT1NUIiwgdXJsKSwgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT0gNCkgeyByZXR1cm4gfQoKCQkJdHJ5IHsgLy8g6Kej5p6Q5ZON5bqUCgkJCQl2YXIgcmVzID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KQoJCQl9IGNhdGNoIChlKSB7CgkJCQl2YXIgcmVzID0ge3Jlc3VsdDogW3hoci5yZXNwb25zZVRleHRdfQoJCQl9CgkJCWlmICh4aHIuc3RhdHVzID09IDIwMCkgewoJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnLkNvcHkocmVzKSkKCQkJfQoJCQljYW4udXNlci50b2FzdChjYW4sIHJlcywgeGhyLnN0YXR1cykKCQl9CgoJCWlmIChtc2cuX3VwbG9hZCkgeyAvLyDkuIrkvKDmlofku7YKCQkJdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsgY2FuLmNvcmUuSXRlbXMoZm9ybSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBrZXkpIHsKCQkJCWRhdGEuYXBwZW5kKGtleSwgdmFsdWUpCgkJCX0pLCBkYXRhLmFwcGVuZChodG1sLlVQTE9BRCwgbXNnLl91cGxvYWQpLCBkYXRhLmFwcGVuZChpY2UuTVNHX1VQTE9BRCwgbWRiLlVQTE9BRCkKCgkJCXhoci51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uYmFzZS5pc0Z1bmMobXNnLl9wcm9ncmVzcykgJiYgbXNnLl9wcm9ncmVzcyhldmVudCwgcGFyc2VJbnQoZXZlbnQubG9hZGVkKjEwMC9ldmVudC50b3RhbCksIGV2ZW50LnRvdGFsLCBldmVudC5sb2FkZWQpCgkJCX0KCQl9IGVsc2UgeyAvLyDor7fmsYLmlbDmja4KCQkJdmFyIGRhdGEgPSBjYW4uY29yZS5JdGVtcyhmb3JtLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGtleSkgeyByZXR1cm4ga2V5KyI9IitlbmNvZGVVUklDb21wb25lbnQodmFsdWUpIH0pLmpvaW4oIiYiKQoJCQl4aHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpCgkJfQoKCQkvLyDlj5HpgIHor7fmsYIKCQl4aHIuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IiwgbXNnLl9hY2NlcHR8fCJhcHBsaWNhdGlvbi9qc29uIikKCQl0cnkgeyB4aHIuc2VuZChkYXRhKSB9IGNhdGNoKGUpIHsgY2FuLm1pc2MuTG9nKGUpIH0KCX0sCglSdW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGRhdGFzZXQsIGNtZHMsIGNiKSB7CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50fHx7fSksIHNraXAgPSB7X2hhbmRsZTogdHJ1ZX0KCQl2YXIgZm9ybSA9IHtjbWRzOiBjbWRzfHxtc2cuY21kfTsgbXNnLm9wdGlvbiAmJiBtc2cub3B0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQlpZiAodHlwZW9mIG1zZy5PcHRpb24oaXRlbSkgPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIH0KCQkJaWYgKHR5cGVvZiBtc2cuT3B0aW9uKGl0ZW0pID09IGxhbmcuRlVOQ1RJT04pIHsgcmV0dXJuIH0KCQkJIXNraXBbaXRlbV0gJiYgbXNnW2l0ZW1dICYmIChmb3JtW2l0ZW1dID0gbXNnW2l0ZW1dKQoJCX0pCgoJCWNhbi5taXNjLlBPU1QoY2FuLCBtc2csIGNhbi5iYXNlLk1lcmdlVVJMKGRhdGFzZXQubmFtZXMudG9Mb3dlckNhc2UoKSwKCQkJIl9uYW1lIiwgKG1zZy5fY2FuLnN1cHx8bXNnLl9jYW4pLl9uYW1lLCAiX2luZGV4IiwgKG1zZy5fY2FuLnN1cHx8bXNnLl9jYW4pLl9pbmRleCwKCQkJaWNlLk1TR19EQUVNT04sIG1zZy5fX2RhZW1vbnx8ZGF0YXNldC5kYWVtb258fCIiCgkJKSwgZm9ybSwgY2IpCgl9LAoJV1NTOiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiLCBvbm9wZW4sIG9uY2xvc2UsIG9uZXJyb3IpIHsgaWYgKGNhbi51c2VyLmlzSUUpIHsgcmV0dXJuIH0KCQl2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgiaHR0cCIsICJ3cyIpKyIvLyIrbG9jYXRpb24uaG9zdCsiL3NwYWNlLyIKCQlpZiAodXJsLmluZGV4T2YoImNocm9tZSIpID09IDApIHsgdXJsID0gIndzOi8vbG9jYWxob3N0OjkwMjAvc3BhY2UvIiB9CgoJCXZhciBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGNhbi5iYXNlLk1lcmdlVVJMKHVybCwgYXJncykpCgkJc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBjbGkuQ0xPU0UsIGFyZ3MpCgkJCWNhbi5iYXNlLmlzRnVuYyhvbmNsb3NlKT8gb25jbG9zZShzb2NrZXQpOiBjYW4uY29yZS5UaW1lcihjYW4uYmFzZS5yYW5kb20oMzAwMCwgMTAwMCksIGZ1bmN0aW9uKCkgewoJCQkJYXJncy5uYW1lID0gYXJncy5uYW1lfHxjYW4uX3dzc19uYW1lCgkJCQljYW4ubWlzYy5XU1MoY2FuLCBhcmdzLCBjYiwgb25vcGVuLCBvbmVycm9yLCBvbmNsb3NlKQoJCQl9KQoJCX0sIHNvY2tldC5vbmVycm9yID0gZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZyhodG1sLldTUywgY2xpLkVSUk9SLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25lcnJvcik/IG9uZXJyb3Ioc29ja2V0KTogc29ja2V0LmNsb3NlKCkKCgkJfSwgc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGNsaS5PUEVOLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25vcGVuKSAmJiBvbm9wZW4oc29ja2V0KQoJCX0KCgkJc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIOino+aekOWRveS7pAoJCQl0cnkgeyB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgfSBjYXRjaCAoZSkgeyB2YXIgZGF0YSA9IHtkZXRhaWw6IFtldmVudC5kYXRhXX0gfQoKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgbXNnLlJlcGx5ID0gZnVuY3Rpb24oKSB7IC8vIOWbnuWkjeWRveS7pAoJCQkJbXNnLk9wdGlvbih7X2hhbmRsZTogdHJ1ZSwgX3NvdXJjZTogKG1zZ1tpY2UuTVNHX1RBUkdFVF18fFtdKS5yZXZlcnNlKCkuc2xpY2UoMSkuam9pbihpY2UuUFQpfHwiIiwgX3RhcmdldDogKG1zZ1tpY2UuTVNHX1NPVVJDRV18fFtdKS5yZXZlcnNlKCkuam9pbihpY2UuUFQpfSkKCQkJCW1zZy5yZXN1bHQgPSAobXNnLnJlc3VsdHx8W10pLmNvbmNhdChjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykpLCBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGljZS5NU0dfUkVTVUxULCBtc2cucmVzdWx0LCBtc2cpCgkJCQlkZWxldGUobXNnLl9ldmVudCksIGRlbGV0ZShtc2cuX2NhbiksIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpCgkJCX0sIG1zZy5kZXRhaWwgPSBkYXRhLmRldGFpbCwgbXNnLkNvcHkoZGF0YSkKCgkJCXRyeSB7IC8vIOaJp+ihjOWRveS7pAoJCQkJY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBpY2UuTVNHX0RFVEFJTCwgbXNnLmRldGFpbCwgbXNnKQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgbXNnLCBtc2cuZGV0YWlsWzBdLCBtc2cuZGV0YWlsLnNsaWNlKDEpKQoJCQl9IGNhdGNoIChlKSB7IGNhbi5taXNjLkxvZyhlKSwgbXNnLlJlcGx5KCkgfQoJCX0KCX0sCgoJQ29va2llU2Vzc2lkOiBzaHkoIuS8muivneWPmOmHjyIsIGZ1bmN0aW9uKGNhbiwgdmFsdWUsIHBhdGgpIHsKCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llKGNhbiwgaWNlLk1TR19TRVNTSUQrIl8iK2Nhbi5iYXNlLnJlcGxhY2VBbGwobG9jYXRpb24uaG9zdCwgaWNlLlBULCAiXyIsIGljZS5ERiwgIl8iKSwgdmFsdWUsIHBhdGgpCgl9KSwKCUNvb2tpZTogc2h5KCLkvJror53lj5jph48iLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUsIHBhdGgpIHsKCQlmdW5jdGlvbiBzZXQoaywgdikgeyBkb2N1bWVudC5jb29raWUgPSBrKyI9Iit2KyI7cGF0aD0iKyhwYXRofHxpY2UuUFMpIH0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBmb3IgKHZhciBrIGluIGtleSkgeyBzZXQoaywga2V5W2tdKSB9IGtleSA9IHVuZGVmaW5lZCB9CgoJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHZhciBjcyA9IHt9CgkJCWRvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyAiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGxzID0gaXRlbS5zcGxpdCgiPSIpOyBjc1tsc1swXV0gPSBsc1sxXSB9KQoJCQlyZXR1cm4gY3MKCQl9CgoJCXZhbHVlICE9IHVuZGVmaW5lZCAmJiBzZXQoa2V5LCB2YWx1ZSkKCQl2YXIgdmFsID0gKG5ldyBSZWdFeHAoa2V5KyI9KFteO10qKTs/IikpLmV4ZWMoZG9jdW1lbnQuY29va2llKQoJCXJldHVybiB2YWwgJiYgdmFsLmxlbmd0aCA+IDA/IHZhbFsxXTogIiIKCX0pLAoJU2VhcmNoT3JDb25mOiBmdW5jdGlvbihjYW4sIGtleSwgZGVmKSB7IHJldHVybiBjYW4uYmFzZS5nZXRWYWxpZChjYW4ubWlzYy5TZWFyY2goY2FuLCBrZXkpLCBjYW4uQ29uZihrZXkpLCBkZWYpIH0sCglTZWFyY2hIYXNoOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5faW5kZXggPT0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgImNtZCIpKSB7CgkJCXJldHVybiBsb2NhdGlvbi5oYXNoLnNsaWNlKDEpCgkJfQoJfSwKCVNlYXJjaDogc2h5KCLor7fmsYLlj4LmlbAiLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsgdmFyIGFyZ3MgPSB7fQoJCWlmICh2YWx1ZSA9PSB1bmRlZmluZWQgJiYgY2FuLmJhc2UuaXNTdHJpbmcoa2V5KSkgewoJCQl2YXIgbHMgPSBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdChpY2UuUFMpOyBpZiAobHNbMV0gPT0gY2hhdC5TSEFSRSkgeyBhcmdzW2NoYXQuU0hBUkVdID0gbHNbMl0gfQoJCQlmb3IgKHZhciBpID0gMjsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IGlmICh7InBvZCI6IHRydWUsICJjbWQiOiB0cnVlfVtsc1tpXV0pIHsgYXJnc1tsc1tpXV0gPSBsc1tpKzFdIH0gfQoJCX0KCQlsb2NhdGlvbi5zZWFyY2ggJiYgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IHZhciB4ID0gaXRlbS5zcGxpdCgiPSIpCgkJCXhbMV0gIT0gIiIgJiYgKGFyZ3NbeFswXV0gPSBkZWNvZGVVUklDb21wb25lbnQoeFsxXSkpCgkJfSkKCgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJY2FuLmNvcmUuSXRlbShrZXksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJCWlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsgYXJnc1trZXldID0gdmFsdWUgfSBhcmdzW2tleV0gPT0gIiIgJiYgZGVsZXRlKGFyZ3Nba2V5XSkKCQkJfSkKCQl9IGVsc2UgewoJCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gYXJncyB9CgkJCWlmICh2YWx1ZSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGFyZ3Nba2V5XSB9CgkJCWFyZ3Nba2V5XSA9IHZhbHVlLCBhcmdzW2tleV0gPT0gIiIgJiYgZGVsZXRlKGFyZ3Nba2V5XSkKCQl9CgoJCXZhciBzZWFyY2ggPSBjYW4uY29yZS5JdGVtKGFyZ3MsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGtleSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB9KS5qb2luKCImIikKCQlyZXR1cm4gc2VhcmNoPyBsb2NhdGlvbi5zZWFyY2ggPSBzZWFyY2g6IGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5wYXRobmFtZQoJfSksCglNZXJnZVVSTDogc2h5KCLlnLDlnYDpk77mjqUiLCBmdW5jdGlvbihjYW4sIG9ianMsIGNsZWFyKSB7CgkJdmFyIHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTsgb2Jqcy5fcGF0aCAmJiAocGF0aCA9IG9ianMuX3BhdGgpLCBkZWxldGUob2Jqcy5fcGF0aCkKCQlvYmpzLnBvZCAmJiAocGF0aCA9ICIvY2hhdC9wb2QvIitvYmpzLnBvZCksIGRlbGV0ZShvYmpzLnBvZCkKCQlvYmpzLmNtZCAmJiAocGF0aCA9IChwYXRoLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwPyBwYXRoOiAiL2NoYXQiKSsiL2NtZC8iK29ianMuY21kKSwgZGVsZXRlKG9ianMuY21kKQoJCW9ianMud2Vic2l0ZSAmJiAocGF0aCA9IChwYXRoLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwPyBwYXRoOiAiL2NoYXQiKSsiL3dlYnNpdGUvIitvYmpzLndlYnNpdGUpLCBkZWxldGUob2Jqcy53ZWJzaXRlKQoJCXJldHVybiBjYW4uYmFzZS5NZXJnZVVSTChsb2NhdGlvbi5vcmlnaW4rcGF0aCsoY2xlYXI/IiI6bG9jYXRpb24uc2VhcmNoKSwgb2JqcykKCX0pLAoKCXJ1bkFjdGlvbjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBsaXN0KSB7CgkJaWYgKGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBsaXN0W2NtZHNbMV1dKSB7IHJldHVybiBsaXN0W2NtZHNbMV1dKGNtZHMuc2xpY2UoMikpLCB0cnVlIH0KCQlpZiAobGlzdFtjbWRzWzBdXSkgeyByZXR1cm4gbGlzdFtjbWRzWzBdXShjbWRzLnNsaWNlKDEpKSwgdHJ1ZSB9Cgl9LAoJY29uY2F0OiBmdW5jdGlvbihjYW4sIHRvLCBmcm9tKSB7IHRvID0gdG98fFtdLCBmcm9tID0gZnJvbXx8W10KCQlpZiAoZnJvbVswXSA9PSBjdHguQUNUSU9OICYmIGZyb21bMV0gPT0gaWNlLlJVTiAmJiBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbZnJvbVsyXV0pIHsgcmV0dXJuIGZyb20gfQoJCWlmIChjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbZnJvbVswXV0pIHsgcmV0dXJuIGZyb20gfQoJCWlmIChmcm9tWzBdID09ICJfc2VhcmNoIikgeyByZXR1cm4gZnJvbSB9CgkJcmV0dXJuIHRvLmNvbmNhdChmcm9tKQoJfSwKCXByb3RvOiBmdW5jdGlvbihzdWIsIHN1cCkgeyByZXR1cm4gc3ViLl9fcHJvdG9fXyA9IHN1cCwgc3ViIH0sCgoJTG9nOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyldCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJSW5mbzogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCVdhcm46IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgIndhcm4iXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQlhcmdzLnB1c2goaWNlLk5MLCB0aGlzLl9maWxlTGluZSgpLnNwbGl0KGljZS5OTCkuc2xpY2UoMikuam9pbihpY2UuTkwpKQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJRGVidWc6IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgImRlYnVnIl0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJYXJncy5wdXNoKHRoaXMuZmlsZUxpbmUoMiwgMykpCgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJkZWJ1ZyJdCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKEpTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tpXSkpIH0KCQluYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1vYmlsZSIpID4gLTEgJiYgYWxlcnQoSlNPTi5zdHJpbmdpZnkoYXJncy5qb2luKGljZS5TUCkpKQoJfSwKCUZpbGVMaW5lOiBmdW5jdGlvbihkZXB0aCwgbGVuZ3RoKSB7CgkJcmV0dXJuIHRoaXMuZmlsZUxpbmUoZGVwdGgrMSkuc3BsaXQoaWNlLlBTKS5zbGljZSgzKS5zbGljZSgtbGVuZ3RoKS5qb2luKGljZS5QUykuc3BsaXQoIikiKVswXQoJfSwKCWZpbGVMaW5lOiBmdW5jdGlvbihkZXB0aCkgewoJCXJldHVybiAodGhpcy5fZmlsZUxpbmUoKS5zcGxpdChpY2UuTkwpWzErZGVwdGhdfHwiIikudHJpbSgpCgl9LAoJX2ZpbGVMaW5lOiBmdW5jdGlvbigpIHsgdmFyIG9iaiA9IHt9CgkJRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2Uob2JqLCBhcmd1bWVudHMuY2FsbGVlKQoJCXJldHVybiBvYmouc3RhY2sgfHwgIiIKCX0sCglfdGltZTogZnVuY3Rpb24oKSB7IHZhciBub3cgPSBuZXcgRGF0ZSgpCgkJdmFyIGhvdXIgPSBub3cuZ2V0SG91cnMoKQoJCWlmIChob3VyIDwgMTApIHsgaG91ciA9ICIwIitob3VyIH0KCQl2YXIgbWludXRlID0gbm93LmdldE1pbnV0ZXMoKQoJCWlmIChtaW51dGUgPCAxMCkgeyBtaW51dGUgPSAiMCIrbWludXRlIH0KCQl2YXIgc2Vjb25kID0gbm93LmdldFNlY29uZHMoKQoJCWlmIChzZWNvbmQgPCAxMCkgeyBzZWNvbmQgPSAiMCIrc2Vjb25kIH0KCQlyZXR1cm4gaG91cisiOiIrbWludXRlKyI6IitzZWNvbmQKCX0sCn0pCgpfY2FuX25hbWUgPSAiL2xpYi9wYWdlLmpzIgpWb2xjYW5vcygicGFnZSIsIHtoZWxwOiAi55So5oi355WM6Z2iIiwgQ2xhc3NMaXN0OiB7CgkJaGFzOiBmdW5jdGlvbihjYW4sIG9iaiwga2V5KSB7IHZhciBsaXN0ID0gb2JqLmNsYXNzTmFtZT8gb2JqLmNsYXNzTmFtZS5zcGxpdChpY2UuU1ApOiBbXQoJCQlyZXR1cm4gbGlzdC5pbmRleE9mKGtleSkgPiAtMQoJCX0sCgkJYWRkOiBmdW5jdGlvbihjYW4sIG9iaiwga2V5KSB7IHZhciBsaXN0ID0gb2JqLmNsYXNzTmFtZT8gb2JqLmNsYXNzTmFtZS5zcGxpdChpY2UuU1ApOiBbXQoJCQl2YXIgdmFsdWUgPSBjYW4uYmFzZS5BZGRVbmlxKGxpc3QsIGtleSkuam9pbihpY2UuU1ApLnRyaW0oKQoJCQlyZXR1cm4gdmFsdWUgIT0gb2JqLmNsYXNzTmFtZSAmJiAob2JqLmNsYXNzTmFtZSA9IHZhbHVlKSwgdmFsdWUKCQl9LAoJCWRlbDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJcmV0dXJuIG9iai5jbGFzc05hbWUgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PSBrZXk/IHVuZGVmaW5lZDogdmFsdWUgfSkuam9pbihpY2UuU1ApLnRyaW0oKQoJCX0sCgkJc2V0OiBmdW5jdGlvbihjYW4sIG9iaiwga2V5LCBjb25kaXRpb24pIHsKCQkJcmV0dXJuIChjb25kaXRpb24/IHRoaXMuYWRkKGNhbiwgb2JqLCBrZXkpOiB0aGlzLmRlbChjYW4sIG9iaiwga2V5KSkuaW5kZXhPZihrZXkpID4gLTEKCQl9LAoJCW5lZzogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgewoJCQlyZXR1cm4gKHRoaXMuaGFzKGNhbiwgb2JqLCBrZXkpPyB0aGlzLmRlbChjYW4sIG9iaiwga2V5KTogdGhpcy5hZGQoY2FuLCBvYmosIGtleSkpLmluZGV4T2Yoa2V5KSA+IC0xCgkJfSwKCX0sCglTZWxlY3RBcmdzOiBmdW5jdGlvbihjYW4sIG9wdGlvbiwga2V5LCBjYikgewoJCWlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChrZXkpKSB7IHZhciB2YWx1ZSA9IHt9CgkJCWNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpdGVtLm5hbWUgJiYgaXRlbS52YWx1ZSAmJiAodmFsdWVbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWUpCgkJCX0pOyByZXR1cm4gW3ZhbHVlXQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuSXRlbShrZXksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIG9wdGlvbiwga2V5LCB2YWx1ZSkgfSksIFtrZXldCgkJfQoJCWlmICghY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyB2YXIgdmFsdWUgPSBjYjsgY2IgPSBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtLnR5cGUgPT0gaHRtbC5CVVRUT04pIHsgcmV0dXJuIH0KCQkJcmV0dXJuIGl0ZW0ubmFtZSAmJiAoY2FuLmJhc2UuaXNVbmRlZmluZWQodmFsdWUpPyBpdGVtLnZhbHVlOiAoaXRlbS52YWx1ZSA9IHZhbHVlKSl8fCIiCgkJfSB9CgkJaWYgKGtleS5pbmRleE9mKGljZS5QVCkgPiAtMSkgeyByZXR1cm4gWyIiXX0KCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgb3B0aW9uLCBrZXk/ICJ0ZXh0YXJlYVtuYW1lPSIra2V5KyJdLCIrImlucHV0W25hbWU9IitrZXkrIl0sIisic2VsZWN0W25hbWU9IitrZXkrIl0iOiAiLmFyZ3MiLCBjYikKCX0sCglTZWxlY3RBbGw6IHNoeSgi6YCJ5oup6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgY2IsIGludGVydmFsLCBjYnMpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuSUZSQU1FLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGl0ZW0uY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKQoJCX0pCgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QodGFyZ2V0ICYmIHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKGtleSksIGNiLCBpbnRlcnZhbCwgY2JzKQoJfSksCglTZWxlY3Q6IHNoeSgi6YCJ5oup6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgY2IsIGludGVydmFsLCBjYnMpIHsgaWYgKGtleSA9PSBpY2UuUFQpIHsgY2IodGFyZ2V0KTsgcmV0dXJuIFtdIH0KCQlyZXR1cm4gY2FuLmNvcmUuTGlzdCh0YXJnZXQgJiYgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoY2FuLnBhZ2UuS2V5cyhrZXkpKSwgY2IsIGludGVydmFsLCBjYnMpCgl9KSwKCU1vZGlmeTogc2h5KCLkv67mlLnoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHx7fQoJCXRhcmdldCA9IGNhbi5iYXNlLmlzT2JqZWN0KHRhcmdldCk/IHRhcmdldDogZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyBpZiAoIXRhcmdldCkgeyByZXR1cm4gfQoJCWNhbi5iYXNlLmlzU3RyaW5nKHZhbHVlKT8gKHRhcmdldC5pbm5lckhUTUwgPSB2YWx1ZSk6IGNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgdmFsKSB7CgkJCWtleSA9PSAiY2xhc3NOYW1lIiAmJiBjYW4uYmFzZS5pc0FycmF5KHZhbCkgJiYgKHZhbCA9IHZhbC5qb2luKGljZS5TUCkpCgkJCSFjYW4uYmFzZS5pc09iamVjdCh2YWwpPyAodGFyZ2V0W2tleV0gPSB2YWwpOiBjYW4uY29yZS5JdGVtKHZhbCwgZnVuY3Rpb24oaywgdikgewoJCQkJdmFyIHNpemUgPSB7CgkJCQkJImhlaWdodCI6IHRydWUsICJtYXgtaGVpZ2h0IjogdHJ1ZSwgIm1pbi1oZWlnaHQiOiB0cnVlLAoJCQkJCSJ3aWR0aCI6IHRydWUsICJtYXgtd2lkdGgiOiB0cnVlLCAibWluLXdpZHRoIjogdHJ1ZSwKCQkJCX0KCQkJCWlmIChzaXplW2tdICYmIHBhcnNlSW50KHYpIDwgMCkgeyByZXR1cm4gdGFyZ2V0W2tleV0gJiYgKHRhcmdldFtrZXldW2tdID0gIiIpIH0KCgkJCQl2YXIgc2l6ZSA9IHsKCQkJCQkibWFyZ2luLXRvcCI6IHRydWUsICJtYXJnaW4tbGVmdCI6IHRydWUsICJmb250LXNpemUiOiB0cnVlLAoJCQkJCSJsZWZ0IjogdHJ1ZSwgInJpZ2h0IjogdHJ1ZSwgInRvcCI6IHRydWUsICJib3R0b20iOiB0cnVlLAoJCQkJCSJoZWlnaHQiOiB0cnVlLCAibWF4LWhlaWdodCI6IHRydWUsICJtaW4taGVpZ2h0IjogdHJ1ZSwKCQkJCQkid2lkdGgiOiB0cnVlLCAibWF4LXdpZHRoIjogdHJ1ZSwgIm1pbi13aWR0aCI6IHRydWUsCgkJCQkJInBhZGRpbmciOiB0cnVlLAoJCQkJfQoKCQkJCWlmIChzaXplW2tdICYmIHYgJiYgKGNhbi5iYXNlLmlzTnVtYmVyKHYpIHx8IHYuaW5kZXhPZiAmJiB2LmluZGV4T2YoInB4IikgPT0gLTEpKSB7IHYgKz0gInB4IiB9CgkJCQl0YXJnZXRba2V5XSAmJiAodGFyZ2V0W2tleV1ba10gPSB2KQoJCQl9KQoJCX0pCgkJcmV0dXJuIHRhcmdldAoJfSksCglSZW1vdmU6IHNoeSgi5Yig6Zmk6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0ICYmIHRhcmdldC5wYXJlbnROb2RlICYmIHRhcmdldC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRhcmdldCksIHRhcmdldAoJfSksCglDcmVhdGU6IHNoeSgi5Yib5bu66IqC54K5IiwgZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoa2V5KSwgdmFsdWUpCgl9KSwKCUFwcGVuZDogc2h5KCLmt7vliqDoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkgeyB2YWx1ZSA9IHZhbHVlfHx7fQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhrZXkpKSB7IHZhciByZXMgPSBjYW4ucGFnZS5DcmVhdGUoY2FuLCBrZXksIHZhbHVlKTsgcmV0dXJuIHRhcmdldC5hcHBlbmRDaGlsZChyZXMpLCByZXMgfQoKCQljYW4uY29yZS5MaXN0KGtleSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaWYgKCFpdGVtKSB7IHJldHVybiB9CgkJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhpdGVtKSkgeyBpdGVtID0ge3ZpZXc6IFtpdGVtXX0gfQoJCQlpZiAoaXRlbS5ub2RlTmFtZSkgeyB0YXJnZXQuYXBwZW5kQ2hpbGQoaXRlbSk7IHJldHVybiB9CgoJCQkvLyDln7rmnKznu5PmnoQ6IHR5cGUgbmFtZSBkYXRhIGxpc3QKCQkJdmFyIHR5cGUgPSBpdGVtLnR5cGV8fGh0bWwuRElWLCBkYXRhID0gaXRlbS5kYXRhfHx7fQoJCQl2YXIgbmFtZSA9IGl0ZW0ubmFtZXx8ZGF0YS5uYW1lfHwiIgoKCQkJLy8g5pWw5o2u6LCD5pW0CgkJCWNhbi5jb3JlLkl0ZW0oaXRlbSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJc3dpdGNoIChrZXkpIHsKCQkJCQljYXNlIG1kYi5UWVBFOiBicmVhawoJCQkJCWNhc2UgbWRiLk5BTUU6IGJyZWFrCgkJCQkJY2FzZSBtZGIuREFUQTogYnJlYWsKCQkJCQljYXNlIG1kYi5MSVNUOiBicmVhawoJCQkJCWNhc2UgaHRtbC5JTk5FUjogZGF0YS5pbm5lckhUTUwgPSBpdGVtLmlubmVyOyBicmVhawoJCQkJCWNhc2UgaHRtbC5DTElDSzogZGF0YS5vbmNsaWNrID0gaXRlbS5jbGljazsgYnJlYWsKCQkJCQlkZWZhdWx0OgoJCQkJCQlpZiAoaXRlbVtrZXldID09IHVuZGVmaW5lZCkgeyBicmVhayB9CgkJCQkJCWRhdGFba2V5XSA9IGl0ZW1ba2V5XQoJCQkJfQoJCQl9KQoKCQkJLy8g5Z+65pys57G75Z6LOiB2aWV3IHRleHQgYnV0dG9uIHNlbGVjdCBpbnB1dCB1c2VybmFtZSBwYXNzd29yZAoJCQkvLyDln7rmnKznsbvlnos6IGltZyByb3cgdGggdGQKCQkJaWYgKGl0ZW0udmlldykgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS52aWV3KQoJCQkJaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdFswXSkpIHsgbGlzdFswXSA9IGxpc3RbMF0uam9pbihpY2UuU1ApIH0KCQkJCWxpc3RbMF0gJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGRhdGEsIGxpc3RbMF0pCgkJCQl0eXBlID0gbGlzdFsxXXx8aHRtbC5ESVYKCQkJCWRhdGEuaW5uZXJIVE1MID0gbGlzdFsyXXx8ZGF0YS5pbm5lckhUTUx8fCIiCgkJCQluYW1lID0gbmFtZXx8bGlzdFszXXx8IiIKCgkJCX0gZWxzZSBpZiAoaXRlbS50ZXh0KSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnRleHQpCgkJCQlkYXRhLmlubmVySFRNTCA9IGxpc3RbMF18fGRhdGEuaW5uZXJIVE1MfHwiIgoJCQkJdHlwZSA9IGxpc3RbMV18fGh0bWwuU1BBTgoJCQkJbGlzdFsyXSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZGF0YSwgbGlzdFsyXSkKCgkJCX0gZWxzZSBpZiAoaXRlbS5idXR0b24pIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0uYnV0dG9uKQoJCQkJdHlwZSA9IGh0bWwuQlVUVE9OLCBuYW1lID0gbmFtZXx8bGlzdFswXQoJCQkJZGF0YS5pbm5lclRleHQgPSBjYW4udXNlci50cmFucyhjYW4sIGxpc3RbMF0pLCBkYXRhLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsxXSkgJiYgbGlzdFsxXShldmVudCwgbmFtZSkKCQkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJCQlyZXR1cm4gdHJ1ZQoJCQkJfQoKCQkJfSBlbHNlIGlmIChpdGVtLnNlbGVjdCkgeyB2YXIgbGlzdCA9IGl0ZW0uc2VsZWN0CgkJCQl0eXBlID0gaHRtbC5TRUxFQ1QsIGRhdGEubmFtZSA9IG5hbWUgPSBuYW1lfHxsaXN0WzBdWzBdCgkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxuYW1lKQoJCQkJZGF0YS5jbGFzc05hbWUgPSBkYXRhLmNsYXNzTmFtZXx8bGlzdFswXVswXXx8IiIKCgkJCQlpdGVtLmxpc3QgPSBsaXN0WzBdLnNsaWNlKDEpLm1hcChmdW5jdGlvbih2YWx1ZSkgewoJCQkJCXJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIHZhbHVlOiB2YWx1ZSwgaW5uZXI6IGNhbi51c2VyLnRyYW5zKGNhbiwgdmFsdWUpfQoJCQkJfSkKCQkJCWRhdGEub25jaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsxXSkgJiYgbGlzdFsxXShldmVudCwgZXZlbnQudGFyZ2V0LnZhbHVlLCBuYW1lKQoJCQkJfQoKCQkJfSBlbHNlIGlmIChpdGVtLmlucHV0KSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmlucHV0KQoJCQkJdHlwZSA9IGh0bWwuSU5QVVQsIG5hbWUgPSBuYW1lfHxsaXN0WzBdfHwiIiwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLnR5cGUgPSBkYXRhLnR5cGV8fCJ0ZXh0IgoJCQkJZGF0YS5jbGFzc05hbWUgPSBkYXRhLmNsYXNzTmFtZXx8ZGF0YS5uYW1lCgkJCQlkYXRhLmF1dG9jb21wbGV0ZSA9ICJvZmYiCgoJCQkJZGF0YS5vbmZvY3VzID0gZGF0YS5vbmZvY3VzfHxmdW5jdGlvbihldmVudCkgewoJCQkJCWV2ZW50LnRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAtMSkKCQkJCX0KCQkJCWRhdGEub25rZXlkb3duID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQpCgkJCQl9CgkJCQlkYXRhLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsyXSkgJiYgbGlzdFsyXShldmVudCkKCQkJCX0KCQkJfSBlbHNlIGlmIChpdGVtLnVzZXJuYW1lKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnVzZXJuYW1lKQoJCQkJdHlwZSA9IGh0bWwuSU5QVVQsIG5hbWUgPSBuYW1lfHxsaXN0WzBdfHxodG1sLlVTRVJOQU1FLCBkYXRhLm5hbWUgPSBkYXRhLm5hbWV8fG5hbWUKCQkJCWRhdGEuY2xhc3NOYW1lID0gbGlzdFsxXXx8ZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8aHRtbC5VU0VSTkFNRQoKCQkJfSBlbHNlIGlmIChpdGVtLnBhc3N3b3JkKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnBhc3N3b3JkKQoJCQkJdHlwZSA9IGh0bWwuSU5QVVQsIG5hbWUgPSBuYW1lfHxsaXN0WzBdfHxodG1sLlBBU1NXT1JELCBkYXRhLm5hbWUgPSBkYXRhLm5hbWV8fG5hbWUKCQkJCWRhdGEuY2xhc3NOYW1lID0gbGlzdFsxXXx8ZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8ImN1cnJlbnQtcGFzc3dvcmQiCgkJCQlkYXRhLnR5cGUgPSBodG1sLlBBU1NXT1JECgoJCQl9IGVsc2UgaWYgKGl0ZW0uaW1nKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmltZykKCQkJCXR5cGUgPSBodG1sLklNRywgZGF0YS5zcmMgPSBsaXN0WzBdCgoJCQl9IGVsc2UgaWYgKGl0ZW0ucm93KSB7IHR5cGUgPSBodG1sLlRSCgkJCQlpdGVtLmxpc3QgPSBpdGVtLnJvdy5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBpdGVtLnN1Ynx8aHRtbC5URF19IH0pCgkJCX0gZWxzZSBpZiAoaXRlbS50aCkgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS50aC5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBodG1sLlRIXX0gfSkKCQkJfSBlbHNlIGlmIChpdGVtLnRkKSB7IHR5cGUgPSBodG1sLlRSCgkJCQlpdGVtLmxpc3QgPSBpdGVtLnRkLm1hcChmdW5jdGlvbih0ZXh0KSB7IHJldHVybiB7dGV4dDogW3RleHQsIGh0bWwuVERdfSB9KQoJCQl9CgoJCQkvLyDor63oqIDovazmjaIKCQkJaWYgKHR5cGUgPT0gaHRtbC5TRUxFQ1QpICB7CgkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxkYXRhLm5hbWUpCgkJCX0KCQkJaWYgKHR5cGUgPT0gaHRtbC5JTlBVVCkgIHsgZGF0YS50eXBlID09IGh0bWwuQlVUVE9OICYmIChkYXRhLnZhbHVlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnZhbHVlKSkKCQkJCWlmIChkYXRhLnR5cGUgPT0gaHRtbC5URVhUfHxkYXRhLnR5cGUgPT0gaHRtbC5QQVNTV09SRHx8IWRhdGEudHlwZSkgeyBkYXRhLmF1dG9jb21wbGV0ZSA9IGRhdGEuYXV0b2NvbXBsZXRlfHwib2ZmIgoJCQkJCS8vIGRhdGEucGxhY2Vob2xkZXIgPSBjYW4udXNlci50cmFucyhjYW4sIChkYXRhLnBsYWNlaG9sZGVyfHxkYXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuUFQpLnBvcCgpKQoJCQkJCWRhdGEucGxhY2Vob2xkZXIgPSAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKQoJCQkJCWRhdGEudGl0bGUgPSBjYW4udXNlci50cmFucyhjYW4sIGRhdGEudGl0bGV8fGRhdGEucGxhY2Vob2xkZXIpCgkJCQl9CgkJCX0KCQkJaWYgKHR5cGUgPT0gaHRtbC5URVhUQVJFQSkgIHsKCQkJCWRhdGEucGxhY2Vob2xkZXIgPSBjYW4udXNlci50cmFucyhjYW4sIChkYXRhLnBsYWNlaG9sZGVyfHxkYXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuUFQpLnBvcCgpKQoJCQl9CgoJCQkvLyDliJvlu7roioLngrkKCQkJIWRhdGEubmFtZSAmJiBpdGVtLm5hbWUgJiYgKGRhdGEubmFtZSA9IGl0ZW0ubmFtZSkKCQkJdmFyIG5vZGUgPSBjYW4ucGFnZS5DcmVhdGUoY2FuLCB0eXBlLCBkYXRhKQoKCQkJLy8g5Yib5bu657Si5byVCgkJCW5hbWUgPSBuYW1lfHxkYXRhLmNsYXNzTmFtZXx8dHlwZXx8IiIKCQkJdmFsdWVbbmFtZXx8IiJdID0gdmFsdWVbZGF0YS5jbGFzc05hbWV8fCIiXSA9IHZhbHVlW3R5cGVdID0gbm9kZQoJCQl2YWx1ZS5maXJzdCA9IHZhbHVlLmZpcnN0fHxub2RlLCB2YWx1ZS5sYXN0ID0gbm9kZQoJCQl2YWx1ZS5fdGFyZ2V0ID0gdmFsdWUuX3RhcmdldHx8bm9kZQoKCQkJLy8g6YCS5b2S6IqC54K5CgkJCWl0ZW0ubGlzdCAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlLCBpdGVtLmxpc3QsIHZhbHVlKQoJCQl0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZENoaWxkICYmIHRhcmdldC5hcHBlbmRDaGlsZChub2RlKQoJCQljYW4uYmFzZS5pc0Z1bmMoaXRlbS5faW5pdCkgJiYgaXRlbS5faW5pdChub2RlLCB2YWx1ZSkKCQl9KQoJCXJldHVybiB2YWx1ZQoJfSksCglBcHBlbmRzOiBzaHkoIua3u+WKoOiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIHZhbHVlKSB7CgkJcmV0dXJuIHRhcmdldC5pbm5lckhUTUwgPSAiIiwgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBrZXksIHZhbHVlKQoJfSksCgoJQXBwZW5kVGFibGU6IHNoeSgi5re75Yqg6KGo5qC8IiwgZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCwgbGlzdCwgY2IpIHsKCQlpZiAoIW1zZy5hcHBlbmR8fG1zZy5hcHBlbmQubGVuZ3RoID09IDApIHtyZXR1cm59CgoJCXZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgaHRtbC5UQUJMRSkKCQl2YXIgdGhlYWQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgInRoZWFkIikKCQl2YXIgdGJvZHkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgInRib2R5IikKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0aGVhZCwgW3t0eXBlOiBodG1sLlRSLCBkYXRhOiB7ZGF0YXNldDoge2luZGV4OiAtMX19LCBsaXN0OiAKCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJCXJldHVybiBrZXlbMF0gPT0gIl8iPyB1bmRlZmluZWQ6IHt0ZXh0OiBba2V5LnRyaW0oKSwgaHRtbC5USF19CgkJCX0pCgkJfV0pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGJvZHksIGNhbi5jb3JlLkxpc3QobXNnLlRhYmxlKCksIGZ1bmN0aW9uKGxpbmUsIGluZGV4LCBhcnJheSkgewoJCQl2YXIgX2xpc3QgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGtleSkgeyBpZiAoa2V5LmluZGV4T2YoIl8iKSA9PSAwKSB7IHJldHVybiB9CgkJCQlyZXR1cm4gY2IoY2FuLnBhZ2UuQ29sb3IobGluZVtrZXldKS50cmltKCksIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KQoJCQl9KQoJCQlyZXR1cm4gX2xpc3QubGVuZ3RoID4gMD8ge3R5cGU6IGh0bWwuVFIsIGRhdGFzZXQ6IHtpbmRleDogaW5kZXh9LCBsaXN0OiBfbGlzdH06IHVuZGVmaW5lZAoJCX0pKQoJCXJldHVybiBjYW4ucGFnZS5PcmRlclRhYmxlKGNhbiwgdGFibGUpCgl9KSwKCU9yZGVyVGFibGU6IGZ1bmN0aW9uKGNhbiwgdGFibGUpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgaHRtbC5USCwgZnVuY3Rpb24odGgsIGluZGV4KSB7CgkJCXRoLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyB2YXIgZGF0YXNldCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0CgkJCQlkYXRhc2V0WyJzb3J0X2FzYyJdID0gKGRhdGFzZXRbInNvcnRfYXNjIl0gPT0gIjEiKSA/IDA6IDEKCQkJCWNhbi5wYWdlLlJhbmdlVGFibGUoY2FuLCB0YWJsZSwgaW5kZXgsIGRhdGFzZXRbInNvcnRfYXNjIl0gPT0gIjEiKQoJCQl9CgkJfSkKCQlyZXR1cm4gdGFibGUKCX0sCglSYW5nZVRhYmxlOiBmdW5jdGlvbihjYW4sIHRhYmxlLCBpbmRleCwgc29ydF9hc2MpIHsKCQl2YXIgbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gdHIuc3R5bGUuZGlzcGxheSA9PSBodG1sLk5PTkV8fGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgImhpZGUiKT8gbnVsbDogdHIKCQl9KS5zbGljZSgxKQoKCQlpbmRleCA9IGNhbi5iYXNlLmlzT2JqZWN0KGluZGV4KT8gaW5kZXg6IFtpbmRleF0KCQlpbmRleCA9IGNhbi5jb3JlLkxpc3QoaW5kZXgsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0gPiAtMSkgeyByZXR1cm4gaXRlbX0gfSkKCQlpZiAoaW5kZXgubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCgkJdmFyIGlzX3RpbWUgPSB0cnVlLCBpc19udW1iZXIgPSB0cnVlCgkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0cikgewoJCQl2YXIgdGV4dCA9IHRyLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dAoJCQlpc190aW1lID0gaXNfdGltZSAmJiBEYXRlLnBhcnNlKHRleHQpID4gMAoJCQlpc19udW1iZXIgPSBpc19udW1iZXIgJiYgIWlzTmFOKHBhcnNlSW50KHRleHQpKQoJCX0pCgoJCXZhciBudW1fbGlzdCA9IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odHIpIHsKCQkJdmFyIHRleHQgPSB0ci5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQKCQkJcmV0dXJuIGlzX3RpbWU/IERhdGUucGFyc2UodGV4dCk6CgkJCQlpc19udW1iZXI/IGNhbi5iYXNlLlBhcnNlU2l6ZSh0ZXh0KTogdGV4dAoJCX0pCgkJZnVuY3Rpb24gaXNsZXNzKGEsIGIsIGluZGV4KSB7CgkJCWlmIChhLmNoaWxkTm9kZXNbaW5kZXhbMF1dICYmIGIuY2hpbGROb2Rlc1tpbmRleFswXV0pIHsKCQkJCWlmIChhLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCA8IGIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0KSB7IHJldHVybiB0cnVlIH0KCQkJCWlmIChhLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCA+IGIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0KSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJcmV0dXJuIGluZGV4Lmxlbmd0aCA+IDEgJiYgaXNsZXNzKGEsIGIsIGluZGV4LnNsaWNlKDEpKQoJCX0KCgkJLy8g6YCJ5oup5o6S5bqPCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBudW1fbGlzdC5sZW5ndGg7IGkrKykgeyB2YXIgbWluID0gaQoJCQlmb3IgKHZhciBqID0gaSsxOyBqIDwgbnVtX2xpc3QubGVuZ3RoOyBqKyspIHsKCQkJCWlmIChudW1fbGlzdFttaW5dID09IG51bV9saXN0W2pdICYmIGluZGV4Lmxlbmd0aCA+IDEgJiYgbGlzdFtpbmRleFsxXV0pIHsKCQkJCQlpZiAoc29ydF9hc2M/IGlzbGVzcyhsaXN0W21pbl0sIGxpc3Rbal0sIGluZGV4LnNsaWNlKDEpKTogaXNsZXNzKGxpc3Rbal0sIGxpc3RbbWluXSwgaW5kZXguc2xpY2UoMSkpKSB7CgkJCQkJCW1pbiA9IGoKCQkJCQl9CgkJCQl9IGVsc2UgaWYgKHNvcnRfYXNjPyBudW1fbGlzdFttaW5dIDwgbnVtX2xpc3Rbal06IG51bV9saXN0W2pdIDwgbnVtX2xpc3RbbWluXSkgewoJCQkJCW1pbiA9IGoKCQkJCX0KCQkJfQoKCQkJaWYgKG1pbiAhPSBpKSB7CgkJCQl2YXIgdGVtcCA9IG51bV9saXN0W2ldOyBudW1fbGlzdFtpXSA9IG51bV9saXN0W21pbl07IG51bV9saXN0W21pbl0gPSB0ZW1wCgkJCQl2YXIgdGVtcCA9IGxpc3RbaV07IGxpc3RbaV0gPSBsaXN0W21pbl07IGxpc3RbbWluXSA9IHRlbXAKCQkJfQoKCQkJdmFyIHRib2R5ID0gbGlzdFtpXS5wYXJlbnRFbGVtZW50CgkJCWxpc3RbaV0ucGFyZW50RWxlbWVudCAmJiB0Ym9keS5yZW1vdmVDaGlsZChsaXN0W2ldKQoJCQl0Ym9keS5hcHBlbmRDaGlsZChsaXN0W2ldKQoJCX0KCX0sCgoJQ2FjaGU6IGZ1bmN0aW9uKG5hbWUsIG91dHB1dCwgZGF0YSkgeyBpZiAoIW5hbWUpIHsgcmV0dXJuIH0KCQl2YXIgY2FjaGUgPSBvdXRwdXQuX2NhY2hlfHx7fTsgb3V0cHV0Ll9jYWNoZSA9IGNhY2hlCgkJaWYgKGRhdGEpIHsgaWYgKG91dHB1dC5jaGlsZHJlbi5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCQl2YXIgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKQoJCQl3aGlsZSAob3V0cHV0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkgeyAvLyDlhpnnvJPlrZgKCQkJCXZhciBpdGVtID0gb3V0cHV0LmNoaWxkTm9kZXNbMF0KCQkJCWl0ZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpdGVtKSwKCQkJCQl0ZW1wLmFwcGVuZENoaWxkKGl0ZW0pCgkJCX0KCQkJcmV0dXJuIGNhY2hlW25hbWVdID0ge25vZGU6IHRlbXAsIGRhdGE6IGRhdGF9LCBuYW1lCgkJfQoJCW91dHB1dC5pbm5lckhUTUwgPSAiIgoKCQl2YXIgbGlzdCA9IGNhY2hlW25hbWVdOyBpZiAoIWxpc3QpIHsgcmV0dXJuIH0KCQl3aGlsZSAobGlzdC5ub2RlLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkgeyAvLyDor7vnvJPlrZgKCQkJdmFyIGl0ZW0gPSBsaXN0Lm5vZGUuY2hpbGROb2Rlc1swXQoJCQlpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSkKCQkJb3V0cHV0LmFwcGVuZENoaWxkKGl0ZW0pCgkJfQoJCXJldHVybiBkZWxldGUoY2FjaGVbbmFtZV0pLCBsaXN0LmRhdGEKCX0sCglGb3JtYXQ6IGZ1bmN0aW9uKHR5cGUpIHsgdmFyIGFyZ3MgPSBhcmd1bWVudHMKCQlzd2l0Y2ggKHR5cGUpIHsKCQkJY2FzZSBodG1sLkE6IHJldHVybiAiPGEgaHJlZj0nIithcmdzWzFdKyInIHRhcmdldD0nX2JsYW5rJz4iKyhhcmdzWzJdfHxhcmdzWzFdKSsiPC9hPiIKCQkJY2FzZSBodG1sLklNRzogcmV0dXJuIGFyZ3NbMl0/ICI8aW1nIHNyYz0nIithcmdzWzFdKyInIGhlaWdodD0iK2FyZ3NbMl0rIj4iOiAiPGltZyBzcmM9JyIrYXJnc1sxXSsiJz4iCgkJfQoJfSwKCXJlcGxhY2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwga2V5LCB2YWx1ZSkgewoJCXJldHVybiBjYW4uYmFzZS5yZXBsYWNlQWxsKHRleHQsICI8IiwgIiZsdDsiLCAiPiIsICImZ3Q7Iiwga2V5LCB2YWx1ZSkKCX0sCglDb2xvcjogZnVuY3Rpb24odGV4dCkgeyBpZiAodHlwZW9mIHRleHQgIT0gbGFuZy5TVFJJTkcpIHsgcmV0dXJuICIiIH0KCQlpZiAodGV4dC5pbmRleE9mKCJodHRwOi8vIikgPT0gMCB8fCB0ZXh0LmluZGV4T2YoImh0dHBzOi8vIikgPT0gMCB8fCB0ZXh0LmluZGV4T2YoImZ0cDovLyIpID09IDApIHsKCQkJdmFyIGxzID0gdGV4dC5zcGxpdChpY2UuU1ApOwoJCQl0ZXh0ID0gIjxhIGhyZWY9JyIrbHNbMF0rIicgdGFyZ2V0PSdfYmxhbmsnPiIrbHNbMF0rIjwvYT4iK2xzLnNsaWNlKDEpLmpvaW4oaWNlLlNQKQoJCX07IHRleHQgPSB0ZXh0LnJlcGxhY2UoL1xcbi9nLCAiPGJyPiIpCgoJCWlmICh0ZXh0LmluZGV4T2YoIlwwMzNcWyIpID09IC0xKSB7IHJldHVybiB0ZXh0IH0KCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszMW0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojZjAwJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzMybS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiMwZjAnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzNtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2ZmMCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNG0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMDBmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM2bS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiMwZmYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzQ7MW0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMDBmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM3OzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2ZmZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFsxbS9nLCAiPHNwYW4gc3R5bGU9J2ZvbnQtd2VpZ2h0OmJvbGQnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMG0vZywgIjwvc3Bhbj4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcW20vZywgIjwvc3Bhbj4iKQoJCXJldHVybiB0ZXh0Cgl9LAoJaW5wdXQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdmFsdWUpIHsKCQl2YXIgaW5wdXQgPSB7dHlwZTogaHRtbC5JTlBVVCwgbmFtZTogaXRlbS5uYW1lLCBkYXRhOiBpdGVtLCBkYXRhc2V0OiB7fSwgX2luaXQ6IGl0ZW0uX2luaXQsIHN0eWxlOiBpdGVtLnN0eWxlfHx7fX0KCQlpdGVtLnZhbHVlID09IGljZS5BVVRPICYmIChpdGVtLnZhbHVlID0gIiIsIGl0ZW0uYWN0aW9uID0gaWNlLkFVVE8pLCBpdGVtLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAoaW5wdXQuZGF0YXNldC5hY3Rpb24gPSBpY2UuQVVUTykKCgkJc3dpdGNoIChpdGVtLnR5cGUgPSBpdGVtLnR5cGV8fGh0bWwuVEVYVCkgewoJCQljYXNlIGh0bWwuVEVYVEFSRUE6IGlucHV0LnR5cGUgPSBodG1sLlRFWFRBUkVBCgkJCQlpbnB1dC5zdHlsZS5oZWlnaHQgPSBpbnB1dC5zdHlsZS5oZWlnaHR8fGNhbi5Db25mKFtjdHguRkVBVFVSRSwgaHRtbC5URVhUQVJFQSwgaXRlbS5uYW1lLCBodG1sLkhFSUdIVF0uam9pbihpY2UuUFQpKXx8Y2FuLkNvbmYoWyJmZWF0dXJlIiwgaHRtbC5URVhUQVJFQSwgaHRtbC5IRUlHSFRdLmpvaW4oaWNlLlBUKSkKCQkJCWlucHV0LnN0eWxlLndpZHRoID0gaW5wdXQuc3R5bGUud2lkdGh8fGNhbi5Db25mKFtjdHguRkVBVFVSRSwgaHRtbC5URVhUQVJFQSwgaXRlbS5uYW1lLCBodG1sLldJRFRIXS5qb2luKGljZS5QVCkpfHxjYW4uQ29uZihbImZlYXR1cmUiLCBodG1sLlRFWFRBUkVBLCBodG1sLldJRFRIXS5qb2luKGljZS5QVCkpCgkJCQkvLyBubyBicmVhawoJCQljYXNlIGh0bWwuVVNFUk5BTUU6CgkJCWNhc2UgaHRtbC5QQVNTV09SRDoKCQkJCS8vIG5vIGJyZWFrCgkJCWNhc2UgaHRtbC5URVhUOgoJCQkJaXRlbS5hdXRvY29tcGxldGUgPSAib2ZmIgoJCQkJaXRlbS5uYW1lID0gaXRlbS5uYW1lfHxpdGVtLnR5cGUKCQkJCWl0ZW0udmFsdWUgPSB2YWx1ZXx8aXRlbS52YWx1ZXx8IiIKCQkJCWl0ZW0ucGxhY2Vob2xkZXIgPSBpdGVtLnBsYWNlaG9sZGVyfHxpdGVtLm5hbWV8fGl0ZW0udHlwZQoJCQkJaXRlbS50aXRsZSA9IGl0ZW0udGl0bGV8fGl0ZW0ucGxhY2Vob2xkZXJ8fGl0ZW0ubmFtZXx8aXRlbS50eXBlCgkJCQlpdGVtLmNsYXNzTmFtZSB8fCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgY3R4LkFSR1MpCgkJCQlicmVhawoJCQljYXNlIGh0bWwuU0VMRUNUOiBpbnB1dC50eXBlID0gaHRtbC5TRUxFQ1QKCQkJCWl0ZW0udmFsdWVzID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbS52YWx1ZXMpPyBjYW4uY29yZS5TcGxpdChpdGVtLnZhbHVlcyk6IGl0ZW0udmFsdWVzCgkJCQlpZiAoIWl0ZW0udmFsdWVzICYmIGl0ZW0udmFsdWUpIHsgaXRlbS52YWx1ZXMgPSBjYW4uY29yZS5TcGxpdChpdGVtLnZhbHVlKSwgaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWVzWzBdIH0KCgkJCQlpdGVtLnZhbHVlID0gdmFsdWV8fGl0ZW0udmFsdWUsIGlucHV0Lmxpc3QgPSBpdGVtLnZhbHVlcy5tYXAoZnVuY3Rpb24odmFsdWUpIHsKCQkJCQlyZXR1cm4ge3R5cGU6IGh0bWwuT1BUSU9OLCB2YWx1ZTogdmFsdWUsIGlubmVyOiB2YWx1ZX0KCQkJCX0pLCBpdGVtLmNsYXNzTmFtZSB8fCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgY3R4LkFSR1MpCgkJCQlicmVhawoJCQljYXNlIGh0bWwuQlVUVE9OOiBpdGVtLnZhbHVlID0gaXRlbS52YWx1ZXx8aXRlbS5uYW1lfHxtZGIuTElTVDsgYnJlYWsKCQkJY2FzZSAidXBmaWxlIjogaXRlbS50eXBlID0gaHRtbC5GSUxFOyBicmVhawoJCQljYXNlIGh0bWwuVVBMT0FEOiBpdGVtLnR5cGUgPSBodG1sLkZJTEUsIGlucHV0Lm5hbWUgPSBodG1sLlVQTE9BRDsgYnJlYWsKCQkJZGVmYXVsdDoKCQl9CgkJcmV0dXJuIGlucHV0Cgl9LAoJaW5wdXRzOiBmdW5jdGlvbihjYW4sIGxpc3QpIHsKCQl2YXIgX2xpc3QgPSBbXTsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7CgkJCXN3aXRjaCAobGlzdFtpXSkgeyBjYXNlICIiOiBfbGlzdC5wdXNoKCIiKTsgYnJlYWsKCQkJCWNhc2UgaWNlLkFVVE86CgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJsaXN0In0pCgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJiYWNrIn0pCgkJCQkJYnJlYWsKCQkJCWNhc2UgbWRiLlBBR0U6CgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuTElNSVQsIHZhbHVlOiBjYW4uX21zZy5PcHRpb24obWRiLkxJTUlUKX0pCgkJCQkJX2xpc3QucHVzaCh7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuT0ZGRU5ELCB2YWx1ZTogY2FuLl9tc2cuT3B0aW9uKG1kYi5PRkZFTkQpfSkKCQkJCQlfbGlzdC5wdXNoKG1kYi5QUkVWLCBtZGIuTkVYVCkKCQkJCQlicmVhawoJCQkJZGVmYXVsdDoKCQkJCQkoZnVuY3Rpb24oKSB7IHZhciBpdGVtID0gY2FuLmNvcmUuU3BsaXRJbnB1dChsaXN0W2ldLCBodG1sLkJVVFRPTik7CgkJCQkJCWlmIChpdGVtLnR5cGUgPT0gaHRtbC5TRUxFQ1QpIHsKCQkJCQkJCWl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgdGFyZ2V0LnZhbHVlID0gaXRlbS52YWx1ZXx8aXRlbS52YWx1ZXNbMF0sIHRhcmdldC5vbmNoYW5nZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5ydW4oZXZlbnQpIH0gfQoJCQkJCQl9CgkJCQkJCWl0ZW0uYWN0aW9uICYmIChmdW5jdGlvbigpIHsgaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KSB9IH0pKCkKCQkJCQkJaXRlbS50eXBlID09IGh0bWwuQlVUVE9OPyBfbGlzdC5wdXNoKGxpc3RbaV0pOiBfbGlzdC5wdXNoKGl0ZW0pCgkJCQkJfSkgKCkKCQkJfQoJCX0KCQlyZXR1cm4gX2xpc3QKCX0sCgoJc3R5bGVEaXNwbGF5OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuRElTUExBWSwgdmFsdWUpLCB0YXJnZXQuc3R5bGUuZGlzcGxheQoJfSwKCXN0eWxlSGVpZ2h0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCB2YWx1ZSksIHRhcmdldC5vZmZzZXRIZWlnaHQKCX0sCglzdHlsZVdpZHRoOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHZhbHVlKSwgdGFyZ2V0Lm9mZnNldFdpZHRoCgl9LAoJc3R5bGVDbGFzczogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7Y2xhc3NOYW1lOiB2YWx1ZX0pCgl9LAoJc3R5bGU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBzdHlsZSkgeyB2YXIgdmFsdWUgPSB7fQoJCWZvciAodmFyIGkgPSAyOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCWlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuT0JKRUNUKSB7CgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtzdHlsZTogYXJndW1lbnRzW2ktLV19KQoJCQl9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gPT0gbGFuZy5VTkRFRklORUQpIHsKCQkJCWNvbnRpbnVlCgkJCX0gZWxzZSB7CgkJCQl2YWx1ZVthcmd1bWVudHNbaV1dID0gYXJndW1lbnRzW2krMV0KCQkJfQoJCX0KCQlyZXR1cm4gY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7c3R5bGU6IHZhbHVlfSksIHZhbHVlCgl9LAoJS2V5czogZnVuY3Rpb24oKSB7IHZhciBsaXN0ID0gW10gLy8gRlMgU1AgR1QgUFQKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgdiA9IGFyZ3VtZW50c1tpXQoJCQlpZiAodHlwZW9mIHYgPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCWZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgewoJCQkJCWlmICh0eXBlb2YgdltqXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJCQlmb3IgKHZhciBrID0gMDsgayA8IHZbal0ubGVuZ3RoOyBrKyspIHsKCQkJCQkJCWlmICh0eXBlb2YgdltqXVtrXSA9PSBsYW5nLk9CSkVDVCkgeyB2W2pdW2tdID0gdltqXVtrXS5qb2luKGljZS5QVCkgfQoJCQkJCQl9CgkJCQkJCXZbal0gPSB2W2pdLmpvaW4oaWNlLkdUKQoJCQkJCX0KCQkJCX0KCQkJCWxpc3QucHVzaCh2LmpvaW4oaWNlLlNQKSkKCQkJfSBlbHNlIHsKCQkJCWxpc3QucHVzaCh2KyIiKQoJCQl9CgkJfQoJCXJldHVybiBsaXN0LmpvaW4oaWNlLkZTKQoJfSwKCWNzczogZnVuY3Rpb24odGV4dCkgewoJCXZhciBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKQoJCXN0eWxlU2hlZXQudHlwZSA9ICJ0ZXh0L2NzcyIsIHN0eWxlU2hlZXQuaW5uZXJUZXh0ID0gdGV4dAoJCWRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVTaGVldCkKCX0sCgl0YWdpczogZnVuY3Rpb24odHlwZSwgdGFyZ2V0KSB7IHR5cGUgPSB0eXBlb2YgdHlwZSA9PSBsYW5nLk9CSkVDVD8gdHlwZTogW3R5cGVdCgkJaWYgKHR5cGUuaW5kZXhPZih0YXJnZXQudGFnTmFtZS50b0xvd2VyQ2FzZSgpKSA+IC0xKSB7IHJldHVybiB0cnVlIH0KCX0sCglvZmZzZXRUb3A6IGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHJlcyA9IDAKCQl3aGlsZSAoaXRlbSkgeyByZXMgKz0gaXRlbS5vZmZzZXRUb3B8fDAsIGl0ZW0gPSBpdGVtLnBhcmVudE5vZGUgfQoJCXJldHVybiByZXMKCX0sCglvZmZzZXRMZWZ0OiBmdW5jdGlvbihpdGVtKSB7IHZhciByZXMgPSAwCgkJLy8gaWYgKGl0ZW0ub2Zmc2V0TGVmdCkgeyByZXR1cm4gaXRlbS5vZmZzZXRMZWZ0IH0KCQl3aGlsZSAoaXRlbSkgeyByZXMgKz0gaXRlbS5vZmZzZXRMZWZ0fHwwLCBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQlyZXR1cm4gcmVzCgl9LAoJZWRpdGFibGU6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgb2spIHsgaXRlbS5zZXRBdHRyaWJ1dGUoImNvbnRlbnRlZGl0YWJsZSIsIG9rKSB9LAoJZHJhZ2dhYmxlOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG9rKSB7IGl0ZW0uc2V0QXR0cmlidXRlKCJkcmFnZ2FibGUiLCBvaykgfSwKCglBcHBlbmRWdWU6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3Z1ZUAyL2Rpc3QvdnVlLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ucmVxdWlyZShbImh0dHBzOi8vdW5wa2cuY29tL2VsZW1lbnQtdWkvbGliL2luZGV4LmpzIiwgImh0dHBzOi8vdW5wa2cuY29tL2VsZW1lbnQtdWkvbGliL3RoZW1lLWNoYWxrL2luZGV4LmNzcyJdLCBmdW5jdGlvbigpIHsKCQkJCW5ldyBWdWUoY2FuLmJhc2UuQ29weSh7ZWw6IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIFt7dHlwZTogImRpdiIsIGlubmVyOiBsaXN0fV0pLmZpcnN0fSwgbWV0YSkpCgkJCX0pCgkJfSkKCX0sCgoJaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZm9yZSwgcGFyZW50KSB7IHBhcmVudCA9IHBhcmVudHx8YmVmb3JlLnBhcmVudE5vZGUKCQl2YXIgaXRlbSA9IGNhbi5iYXNlLmlzQXJyYXkobGlzdCk/IGNhbi5wYWdlLkFwcGVuZChjYW4sIHBhcmVudCwgbGlzdCkuZmlyc3Q6IGxpc3QKCQlyZXR1cm4gYmVmb3JlICYmIHBhcmVudC5pbnNlcnRCZWZvcmUoaXRlbSwgYmVmb3JlKSwgaXRlbQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL3VzZXIuanMiClZvbGNhbm9zKCJ1c2VyIiwge2hlbHA6ICLnlKjmiLfmk43kvZwiLCBpbmZvOiB7fSwgYWdlbnQ6IHsKCQlzY2FuUVJDb2RlOiBmdW5jdGlvbihjYiwgY2FuKSB7CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogInRleHQiLCB0ZXh0OiAiIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQljYihsaXN0WzBdLCBjYW4uYmFzZS5QYXJzZUpTT04obGlzdFswXSkpCgkJCX0pCgkJfSwKCQlnZXRMb2NhdGlvbjogZnVuY3Rpb24oY2IpIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJCWlmIChjYWxsLl9yZXMpIHsgcmV0dXJuIGNiKGNhbGwuX3JlcykgfQoKCQkJbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbihyZXMpIHsKCQkJCWNiKGNhbGwuX3JlcyA9IHtsYXRpdHVkZTogcGFyc2VJbnQocmVzLmNvb3Jkcy5sYXRpdHVkZSoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHJlcy5jb29yZHMubG9uZ2l0dWRlKjEwMDAwMCl9KQoJCQl9LCBmdW5jdGlvbihzb21lKSB7CgkJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYih7dHlwZTogInVua25vd24iLCBuYW1lOiAidW5rbm93biIsIGxhdGl0dWRlOiAzOTk4NDEyLCBsb25naXR1ZGU6IDExNjMwNzQ4fSkKCQkJfSApOwoJCX0sCgkJb3BlbkxvY2F0aW9uOiBmdW5jdGlvbihtc2cpIHsKCQkJd2luZG93Lm9wZW4oImh0dHBzOi8vbWFwLmJhaWR1LmNvbS9zZWFyY2gvIitlbmNvZGVVUklDb21wb25lbnQobXNnLk9wdGlvbihtZGIuVEVYVCkpCgkJCQkrIi9AMTI5NTg3NTAuMDg1LDQ4MjU3ODUuNTUsMTZ6P3F1ZXJ5dHlwZT1zJmRhX3NyYz1zaGFyZXVybCZ3ZD0iK2VuY29kZVVSSUNvbXBvbmVudChtc2cuT3B0aW9uKG1kYi5URVhUKSkpCgkJfSwKCQljaG9vc2VJbWFnZTogZnVuY3Rpb24oY2IpIHsKCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IoW10pCgkJfSwKCX0sCglpc1dlaVhpbjogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNaWNyb01lc3NlbmdlciIpID4gLTEsCglpc0lQaG9uZTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJpUGhvbmUiKSA+IC0xLAoJaXNNb2JpbGU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTW9iaWxlIikgPiAtMSwKCWlzTWFjT1NYOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1hYyBPUyBYIikgPiAtMSwKCWlzV2luZG93czogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJXaW5kb3dzIikgPiAtMSwKCWlzSUU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID4gLTEsCglpc0V4dGVuc2lvbjogbG9jYXRpb24gJiYgbG9jYXRpb24ucHJvdG9jb2wgJiYgbG9jYXRpb24ucHJvdG9jb2wgPT0gImNocm9tZS1leHRlbnNpb246IiwKCWlzTG9jYWxGaWxlOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wcm90b2NvbCAmJiBsb2NhdGlvbi5wcm90b2NvbCA9PSAiZmlsZToiLAoJaXNMYW5kc2NhcGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQgfSwKCWlzUG9ydHJhaXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQgfSwKCW1vZDogewoJCWlzUG9kOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDAgfHwgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL3gvIikgPT0gMCksCgkJaXNEaXY6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9kaXYvIikgPT0gMCksCgkJaXNDbWQ6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMCAmJiBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY21kLyIpID4gMCB8fAoJCQlsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9jbWQvIikgPT0gMCB8fCBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvaGVscC8iKSA9PSAwKSwKCQlpc1dlYjogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwICYmIGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi93ZWJzaXRlLyIpID4gMCB8fAoJCQlsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC93ZWJzaXRlLyIpID09IDApLAoJfSwKCglhbGVydDogZnVuY3Rpb24odGV4dCkgeyBhbGVydChKU09OLnN0cmluZ2lmeSh0ZXh0KSkgfSwKCWNvbmZpcm06IGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIGNvbmZpcm0oSlNPTi5zdHJpbmdpZnkodGV4dCkpIH0sCglwcm9tcHQ6IGZ1bmN0aW9uKHRpcCwgZGVmLCBjYiwgc2lsZW50KSB7ICh0ZXh0ID0gc2lsZW50PyBkZWY6IHByb21wdCh0aXAsIGRlZnx8IiIpKSAhPSB1bmRlZmluZWQgJiYgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IodGV4dCk7IHJldHVybiB0ZXh0IH0sCglyZWxvYWQ6IGZ1bmN0aW9uKGZvcmNlKSB7IChmb3JjZSB8fCBjb25maXJtKCLph43mlrDliqDovb3pobXpnaLvvJ8iKSkgJiYgbG9jYXRpb24ucmVsb2FkKCkgfSwKCWp1bXBzOiBmdW5jdGlvbih1cmwpIHsgbG9jYXRpb24uaHJlZiA9IHVybCB9LAoJb3BlbjogZnVuY3Rpb24odXJsKSB7IHdpbmRvdy5vcGVuKHVybCkgfSwKCWNsb3NlOiBmdW5jdGlvbih1cmwpIHsgd2luZG93LmNsb3NlKCkgfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGltZSwgZm10KSB7IHZhciBub3cgPSBjYW4uYmFzZS5EYXRlKHRpbWUpCgkJdmFyIGxpc3QgPSBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il06IFsi5ZGo5pelIiwgIuWRqOS4gCIsICLlkajkuowiLCAi5ZGo5LiJIiwgIuWRqOWbmyIsICLlkajkupQiLCAi5ZGo5YWtIl0KCQlyZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAoZm10fHwiJXktJW0tJWQgJUg6JU06JVMiKS5yZXBsYWNlKCIldyIsIGxpc3Rbbm93LmdldERheSgpXSkpCgl9LAoJYXJnczogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7CgkJCXJldHVybiBjYW4uYmFzZS5PYmoobG9jYWxTdG9yYWdlLmdldEl0ZW0oY3R4LkFSR1MpLCB7fSkKCQl9CgkJcmV0dXJuIHt9Cgl9LAoKCXRpdGxlOiBmdW5jdGlvbih0ZXh0KSB7CgkJaWYgKHdpbmRvdy53ZWJ2aWV3KSB7IHJldHVybiB0aXRsZSh0ZXh0KSB9CgkJcmV0dXJuIHRleHQgJiYgKGRvY3VtZW50LnRpdGxlID0gVm9sY2Fub3MubWV0YS5hcmdzLm5hbWV8fHRleHQpLCBkb2N1bWVudC50aXRsZQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIG5hbWUpIHsgY2FuLmJhc2UuaXNBcnJheShuYW1lKSAmJiAobmFtZSA9IGNhbi5iYXNlLmpvaW4obmFtZSkpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgKG5hbWUgKz0gIiBtb2JpbGUiKSAmJiBjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIChuYW1lICs9ICIgbGFuZHNjYXBlIikKCQljYW4udXNlci5sYW5ndWFnZShjYW4pICYmIChuYW1lICs9ICIgIitjYW4udXNlci5sYW5ndWFnZShjYW4pKQoJCWNhbi5Db25mKCJkaXNwbGF5IikgJiYgKG5hbWUgKz0gIiAiK2Nhbi5Db25mKCJkaXNwbGF5IikpCgkJY2FuLnVzZXIubW9kLmlzQ21kICYmIChuYW1lICs9ICIgc2ltcGxlIikKCQljYW4ucGFnZS5zdHlsZUNsYXNzKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIG5hbWUpCgl9LAoJbGFuZ3VhZ2U6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwgImxhbmd1YWdlIikgfSwKCXRyYW5zOiBmdW5jdGlvbihjYW4sIHRleHQsIGxpc3QpIHsgaWYgKGNhbi5iYXNlLmlzT2JqZWN0KHRleHQpKSB7CgkJCXJldHVybiBjYW4uY29yZS5JdGVtKHRleHQsIGZ1bmN0aW9uKGssIHYpIHsgY2FuLmNvcmUuVmFsdWUoY2FuLl90cmFucywgaywgdikgfSkKCQl9CgoJCWlmIChjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiIpIHsgcmV0dXJuIHRleHQgfQoJCWlmIChjYW4uYmFzZS5pc0Z1bmN0aW9uKHRleHQpKSB7IHRleHQgPSB0ZXh0Lm5hbWV8fCIiIH0KCQlyZXR1cm4gbGlzdCYmbGlzdFt0ZXh0XSB8fCBjYW4uQ29uZigidHJhbnMuIit0ZXh0KSB8fCBjYW4uQ29uZigiZmVhdHVyZS5fdHJhbnMuIit0ZXh0KSB8fCBjYW4uX3RyYW5zJiZjYW4uX3RyYW5zW3RleHRdIHx8IHsKCQkJImNyZWF0ZSI6ICLliJvlu7oiLCAicmVtb3ZlIjogIuWIoOmZpCIsICJpbnNlcnQiOiAi5re75YqgIiwgImRlbGV0ZSI6ICLliKDpmaQiLCAibW9kaWZ5IjogIue8lui+kSIsCgkJCSJpbnB1dHMiOiAi6KGl5YWoIiwgInBydW5lcyI6ICLmuIXnkIYiLCAiZXhwb3J0IjogIuWvvOWHuiIsICJpbXBvcnQiOiAi5a+85YWlIiwKCQkJImxpc3QiOiAi5p+l55yLIiwgImJhY2siOiAi6L+U5ZueIiwgInJ1biI6ICLmiafooYwiLCAiZG9uZSI6ICLlrozmiJAiLCAic2hhcmUiOiAi5YWx5LqrIiwKCQkJImVkaXQiOiAi57yW6L6RIiwgInNhdmUiOiAi5L+d5a2YIiwgImNvcHkiOiAi5aSN5Yi2IiwgInNob3ciOiAi5pi+56S6IiwgImhpZGUiOiAi6ZqQ6JePIiwKCQkJInByb2plY3QiOiAi6aG555uuIiwgInByb2ZpbGUiOiAi6K+m5oOFIiwgImFjdGlvbnMiOiAi5Y+C5pWwIiwKCQkJImRvd25sb2FkIjogIuS4i+i9vSIsICJ0b2ltYWdlIjogIuaIquWbviIsCgkJCSJwbHVnaW4iOiAi5o+S5Lu2IiwKCQkJInByZXYiOiAi5LiK5LiA6aG1IiwgIm5leHQiOiAi5LiL5LiA6aG1IiwKCgkJCSJDbG9zZSI6ICLlhbPpl60iLAoJCQkiQ2xvc2Ugb3RoZXJzIjogIuWFs+mXreWFtuWugyIsCgkJCSJDbG9zZSBhbGwiOiAi5YWz6Zet5omA5pyJIiwKCgkJCSJ0cmFzaCI6ICLliKDpmaQiLAoJCQkib3BlbiI6ICLmiZPlvIAiLCAiY2xvc2UiOiAi5YWz6ZetIiwKCQkJInN0YXJ0IjogIuWQr+WKqCIsICJzdG9wIjogIuWBnOatoiIsCgkJCSJiZWdpbiI6ICLlvIDlp4siLCAiZW5kIjogIue7k+adnyIsCgkJCSJjbGVhciI6ICLmuIXnqboiLCAicmVmcmVzaCI6ICLliLfmlrAiLAoJCQkic3VibWl0IjogIuaPkOS6pCIsICJjYW5jZWwiOiAi5Y+W5raIIiwKCQkJImxhYmVsIjogIuagh+etviIsICJleGVjIjogIuaJp+ihjCIsCgkJfVt0ZXh0XXx8dGV4dAoJfSwKCXRvYXN0U2NyaXB0OiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7CgkJdmFyIHVpID0gY2FuLnVzZXIudG9hc3QoY2FuLCB7dGl0bGU6IHRpdGxlLCBkdXJhdGlvbjogLTEsIHdpZHRoOiAtMzAwLCBjb250ZW50OiBjb250ZW50LCBhY3Rpb246IFtjbGkuQ0xPU0VdfSkKCQljYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4sIHVpLl90YXJnZXQpCgl9LAoJdG9hc3RDb25maXJtOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlLCBhY3Rpb24pIHsKCQlyZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCB7dGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50LCBhY3Rpb246IGFjdGlvbnx8W2NsaS5DTE9TRV0sIGR1cmF0aW9uOiAtMSwgd2lkdGg6IC0zMDB9KQoJfSwKCXRvYXN0UHJvY2VzczogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSkgeyByZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCBjb250ZW50LCB0aXRsZXx8aWNlLlBST0NFU1MsIC0xKSB9LAoJdG9hc3RTdWNjZXNzOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sIGNvbnRlbnQsIHRpdGxlfHxpY2UuU1VDQ0VTUykgfSwKCXRvYXN0OiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlLCBkdXJhdGlvbiwgcHJvZ3Jlc3MpIHsKCQl2YXIgbWV0YSA9IGNhbi5iYXNlLmlzT2JqZWN0KGNvbnRlbnQpPyBjb250ZW50OiB7Y29udGVudDogY29udGVudCwgdGl0bGU6IHRpdGxlfHxjYW4uX2hlbHAsIGR1cmF0aW9uOiBkdXJhdGlvbiwgcHJvZ3Jlc3M6IHByb2dyZXNzfQoJCXZhciB3aWR0aCA9IG1ldGEud2lkdGh8fDQwMCwgaGVpZ2h0ID0gbWV0YS5oZWlnaHR8fDEwMDsgaWYgKHdpZHRoIDwgMCkgeyB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICsgd2lkdGggfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCAgW3t2aWV3OiBjaGF0LlRPQVNULCBzdHlsZTogewoJCQlsZWZ0OiAod2luZG93LmlubmVyV2lkdGgtd2lkdGgpLzIsIHdpZHRoOiB3aWR0aCwgYm90dG9tOiAxMDAsCgkJfSwgbGlzdDogWwoJCQl7dGV4dDogW21ldGEudGl0bGV8fCIiLCBodG1sLkRJViwgaHRtbC5USVRMRV0sIHRpdGxlOiAi54K55Ye75aSN5Yi2Iiwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgbWV0YS50aXRsZSkKCQkJfX0sCgkJCXt2aWV3OiAiZHVyYXRpb24iLCB0aXRsZTogIueCueWHu+WFs+mXrSIsIG9uY2xpY2s6IGZ1bmN0aW9uKCkgeyBhY3Rpb24uY2xvc2UoKSB9fSwKCQkJY2FuLmJhc2UuaXNPYmplY3QobWV0YS5jb250ZW50KT8gbWV0YS5jb250ZW50OiB7dGV4dDogW21ldGEuY29udGVudHx8IuaJp+ihjOaIkOWKnyIsIGh0bWwuRElWLCAiY29udGVudCJdfSwKCgkJCXt2aWV3OiBodG1sLkFDVElPTn0sIG1ldGEucHJvZ3Jlc3MgIT0gdW5kZWZpbmVkICYmIHt2aWV3OiAicHJvZ3Jlc3MiLCBzdHlsZToge3dpZHRoOiB3aWR0aH0sIGxpc3Q6IFsKCQkJCXt2aWV3OiAiY3VycmVudCIsIHN0eWxlOiB7d2lkdGg6IChtZXRhLnByb2dyZXNzfHwwKS8xMDAqd2lkdGh9fSwKCQkJXX0sCgkJXSB9XSkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgbWV0YS5hY3Rpb24gJiYgbWV0YS5hY3Rpb24ubGlzdD8gbWV0YS5hY3Rpb24ubGlzdDogbWV0YS5hY3Rpb258fFsiIl0sIHVpLmFjdGlvbiwgewoJCQlfZW5naW5lOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCQl2YXIgY2IgPSBtZXRhLmFjdGlvbltidXR0b25dfHxtZXRhLmFjdGlvbjsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgYnV0dG9uKQoJCQl9LAoJCQlvcGVuOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKG1ldGEuY29udGVudC5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjYW4udXNlci5vcGVuKG1ldGEuY29udGVudCkgfQoJCQkJaWYgKG1ldGEudGl0bGUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgY2FuLnVzZXIub3BlbihtZXRhLnRpdGxlKSB9CgkJCX0sCgkJCWNsb3NlOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBhY3Rpb24uX3RhcmdldCksIGFjdGlvbi50aW1lci5zdG9wID0gdHJ1ZSB9LAoJCQl0aW1lcjogY2FuLmNvcmUuVGltZXIoe2ludGVydmFsOiAxMDAsIGxlbmd0aDogKHBhcnNlSW50KG1ldGEuZHVyYXRpb258fDEwMDApKS8xMDB9LCBmdW5jdGlvbihldmVudCwgaW50ZXJ2YWwsIGluZGV4KSB7CgkJCQlpZiAoaW5kZXggPiAzMCkgeyB1aS5kdXJhdGlvbi5pbm5lckhUTUwgPSBwYXJzZUludChpbmRleC8xMCkraWNlLlBUKyhpbmRleCUxMCkrInMuLi4iIH0KCQkJfSwgZnVuY3Rpb24oKSB7IGFjdGlvbi5jbG9zZSgpIH0pLCBfdGFyZ2V0OiB1aS5fdGFyZ2V0LCB1aTogdWksCgkJfSk7IGNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdWkuX3RhcmdldCkKCgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05UT0FTVCwgY2FuLnJlcXVlc3Qoe30sIHt0aW1lOiBjYW4uYmFzZS5UaW1lKCksIHRpdGxlOiBtZXRhLnRpdGxlLCBjb250ZW50OiBtZXRhLmNvbnRlbnQsIGZpbGVsaW5lOiBjYW4ubWlzYy5GaWxlTGluZSgyLCAyKX0pKQoJCXJldHVybiAhbWV0YS5hY3Rpb24gJiYgY2FuLm9ubW90aW9uLmZsb2F0LmFkZChjYW4sIGNoYXQuVE9BU1QsIGFjdGlvbiksIGFjdGlvbgoJfSwKCXNoYXJlOiBmdW5jdGlvbihjYW4sIG1zZywgY21kKSB7CgkJY2FuLnJ1bihtc2csIGNtZHx8W2N0eC5BQ1RJT04sIGNoYXQuU0hBUkVdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCB7CgkJCQl0aXRsZTogbXNnLkFwcGVuZChtZGIuTkFNRSksIGR1cmF0aW9uOiAtMSwKCQkJCWNvbnRlbnQ6IG1zZy5BcHBlbmQobWRiLlRFWFQpLCBhY3Rpb246IFtjbGkuQ0xPU0UsIGNsaS5PUEVOXSwKCQkJfSksIGNhbi51c2VyLmNvcHkobXNnLl9ldmVudCwgY2FuLCBtc2cuQXBwZW5kKG1kYi5OQU1FKSkKCQl9KQoJfSwKCWxvZ2luOiBmdW5jdGlvbihjYW4sIGNiLCBtZXRob2QsIGF1dG8pIHsgbWV0aG9kID0gY2FuLmJhc2UuT2JqKG1ldGhvZCwgWyLnmbvlvZUiLCAi5omr56CBIl0pCgkJdmFyIGxpc3QgPSB7CgkJCSLnmbvlvZUiOiBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBkYXRhKSB7CgkJCQljYW4ucnVuKHt9LCBbYWFhLkxPR0lOLCBkYXRhW2h0bWwuVVNFUk5BTUVdLCBkYXRhW2h0bWwuUEFTU1dPUkRdXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJaWYgKG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpIHsKCQkJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIueUqOaIt+WQjeaIluWvhueggemUmeivryIpCgkJCQkJfQoJCQkJfSkKCQkJCXJldHVybiB0cnVlCgkJCX0sIAoJCQki5omr56CBIjogZnVuY3Rpb24oKSB7CgkJCQljYW4ubWlzYy5XU1MoY2FuLCB7dHlwZTogaHRtbC5DSFJPTUUsIGNtZDogInB3ZCJ9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQkJCWlmIChjbWQgPT0gInB3ZCIpIHsKCQkJCQkJcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgYXJnWzJdLCBhcmdbMV0sIC0xKSwgbXNnLlJlcGx5KCkKCQkJCQl9CgkJCQkJaWYgKGNtZCA9PSBpY2UuTVNHX1NFU1NJRCkgewoJCQkJCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgYXJnWzBdKSwgbXNnLlJlcGx5KCksIGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCQkJCX0KCQkJCQljYW4uc2VhcmNoKGV2ZW50LCBtc2dbaWNlLk1TR19ERVRBSUxdfHxbXSwgZnVuY3Rpb24obXNnKSB7IG1zZy5SZXBseSgpIH0pCgkJCQl9KQoJCQl9LAoJCQki5o6I5p2DIjogZnVuY3Rpb24oKSB7CgkJCQljYW4ubWlzYy5XU1MoY2FuLCB7dHlwZTogaHRtbC5DSFJPTUUsIGNtZDogInNzbyIsICJ1c2VyLndlYiI6IGxvY2F0aW9uLmhyZWZ9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQkJCWlmIChjbWQgPT0gInB3ZCIpIHsKCQkJCQkJcmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBhcmdbMV0KCQkJCQl9CgkJCQkJaWYgKGNtZCA9PSBpY2UuTVNHX1NFU1NJRCkgewoJCQkJCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgYXJnWzBdKSwgbXNnLlJlcGx5KCksIGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCQkJCX0KCQkJCQljYW4uc2VhcmNoKGV2ZW50LCBtc2dbaWNlLk1TR19ERVRBSUxdfHxbXSwgZnVuY3Rpb24obXNnKSB7IG1zZy5SZXBseSgpIH0pCgkJCQl9KQoJCQl9LAoJCQki6aOe5LmmIjogZnVuY3Rpb24oKSB7IGxvY2F0aW9uLmhyZWYgPSAiL2NoYXQvbGFyay9zc28iIH0sCgkJfTsgaWYgKGF1dG8pIHsgcmV0dXJuIGxpc3RbIuaOiOadgyJdKCkgfSBlbHNlIGlmIChtZXRob2QubGVuZ3RoID09IDEpIHsgbGlzdFttZXRob2RbMF1dKCk7IHJldHVybiB9CgoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KHt9LCBjYW4sIFt7dHlwZTogaHRtbC5VU0VSTkFNRX0sIHt0eXBlOiBodG1sLlBBU1NXT1JEfV0sIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIGRhdGEpIHsgcmV0dXJuIGxpc3RbYnV0dG9uXShldmVudCwgYnV0dG9uLCBkYXRhKSB9LCBtZXRob2QpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdWkuX3RhcmdldCwge2NsYXNzTmFtZTogImlucHV0IGxvZ2luIiwgc3R5bGU6IHtsZWZ0OiAod2luZG93LmlubmVyV2lkdGgtdWkuX3RhcmdldC5vZmZzZXRXaWR0aCkvMiwgdG9wOiB3aW5kb3cuaW5uZXJIZWlnaHQvNn19KQoJfSwKCWxvZ291dDogZnVuY3Rpb24oY2FuLCBmb3JjZSkgeyBpZiAoZm9yY2V8fGNhbi51c2VyLmNvbmZpcm0oImxvZ291dD8iKSkgewoJCWNhbi5ydW5BY3Rpb24oe30sIGFhYS5MT0dPVVQsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TSEFSRSk/IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuU0hBUkUsICIiKTogY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJfSkKCX0gfSwKCgl0b1BORzogZnVuY3Rpb24oY2FuLCBuYW1lLCB0ZXh0LCBoZWlnaHQsIHdpZHRoKSB7CgkJaWYgKHRleHQuaW5kZXhPZigiPHN2ZyIpICE9IDApIHsKCQkJdGV4dCA9ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Jyt0ZXh0KyI8L3N2Zz4iCgkJfQoJCXZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGh0bWwuSU1HKQoJCWltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpCgkJCWNhbnZhcy5oZWlnaHQgPSBoZWlnaHQsIGNhbnZhcy53aWR0aCA9IHdpZHRoCgkJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShpbWcsIDAsIDApCgoJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKQoJCQlhLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKQoJCQlhLmRvd25sb2FkID0gbmFtZSwgYS5jbGljaygpCgkJfSwgaW1nLnNyYyA9ICJkYXRhOmltYWdlL3N2Zyt4bWwsIitlbmNvZGVVUklDb21wb25lbnQodGV4dCkKCX0sCgljb3B5OiBmdW5jdGlvbihldmVudCwgY2FuLCB0ZXh0KSB7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCWlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7IHZhciBvayA9IGZhbHNlCgkJCW5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpLnRoZW4oZnVuY3Rpb24oKSB7IG9rID0gdHJ1ZSB9KTsgaWYgKG9rKSB7CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCB0ZXh0LCAiY29weSBzdWNjZXNzIiksIGNhbi5taXNjLkxvZygiY29weSIsIHRleHQpCgkJCQlyZXR1cm4gdGV4dAoJCQl9CgkJfQoKCQl2YXIgaW5wdXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCB2YWx1ZTogdGV4dH1dKS5maXJzdAoJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGlucHV0KSwgZG9jdW1lbnQuZXhlY0NvbW1hbmQoIkNvcHkiKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaW5wdXQpCgkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgdGV4dCwgImNvcHkgc3VjY2VzcyIpLCBjYW4ubWlzYy5Mb2coImNvcHkiLCB0ZXh0KQoJCXJldHVybiB0ZXh0Cgl9LAoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsgLy8gZXZlbnQgaXRlbSBtZXRhCgkJbWV0YSA9IG1ldGF8fGNhbi5vbmRldGFpbHx8Y2FuLm9uYWN0aW9ufHx7fSwgbGlzdCA9IGxpc3QmJmxpc3QubGVuZ3RoID4gMD8gbGlzdDogbWV0YS5saXN0fHxjYW4uY29yZS5JdGVtKG1ldGEpfHxbXTsgaWYgKGxpc3QubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQljYiA9IGNifHxmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7IHZhciBjYiA9IG1ldGFbYnV0dG9uXXx8bWV0YVsiX2VuZ2luZSJdOyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBjYW4sIGJ1dHRvbikgfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IGNoYXQuQ0FSVEUsIHN0eWxlOiB7bGVmdDogMCwgdG9wOiAwfSwgb25tb3VzZWxlYXZlOiBmdW5jdGlvbihldmVudCkgewoJCQkvLyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KQoJCX0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJcmV0dXJuIGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyBpdGVtID09IiI/IC8qIHNwYWNlICovIHt2aWV3OiAic3BhY2UifTogLyogc3RyaW5nICovIHt2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogY2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkKCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpCgkJCX0gfV0gfTogY2FuLmJhc2UuaXNBcnJheShpdGVtKT8gLyogYXJyYXkgKi8ge3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW1bMF0pKyIgLT4gIn1dLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgc3ViID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgbWV0YSwgaXRlbS5zbGljZSgxKSwgY2IsIGNhcnRlKQoJCQkJY2FydGUuX2Zsb2F0ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhcnRlLl9mbG9hdC5fdGFyZ2V0KSwgY2FydGUuX2Zsb2F0ID0gc3ViCgkJCQljYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHN1Yi5fdGFyZ2V0LCB0cnVlKQoJCQl9IH06IC8qIG9iamVjdCAqLyB7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbS5uYW1lKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLm5hbWUsIG1ldGEsIGluZGV4KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpCgkJCX0gfV0gfQoJCX0pIH1dICkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJdWkuX3RhcmdldC5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSB9CgkJdmFyIGNhcnRlID0ge190YXJnZXQ6IHVpLl90YXJnZXQsIF9wYXJlbnQ6IHBhcmVudCwgbGF5b3V0OiBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpfQoJCXJldHVybiBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGNhcnRlCgl9LAoJY2FydGVSaWdodDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgewoJCXZhciBjYXJ0ZSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpCgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FydGUuX3RhcmdldCwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCBjYXJ0ZS5fdGFyZ2V0LCB0cnVlKSksIGNhcnRlCgl9LAoJY2FydGVDbGllbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsKCQl2YXIgdWkgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuX3RhcmdldCwge2xlZnQ6IGV2ZW50LmNsaWVudFgsIHRvcDogZXZlbnQuY2xpZW50WX0pCgl9LAoKCWlucHV0OiBmdW5jdGlvbihldmVudCwgY2FuLCBmb3JtLCBjYiwgYnV0dG9uKSB7IGlmICghZm9ybSB8fCBmb3JtLmxlbmd0aCA9PSAwKSB7IHJldHVybiBjYigpIH0KCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IFtodG1sLklOUFVUXSwgc3R5bGU6IHtsZWZ0OiAwLCB0b3A6IDB9LCBsaXN0OiBbCgkJCXt2aWV3OiAiY29udGVudCIsIGxpc3Q6IFt7dmlldzogW2h0bWwuT1BUSU9OLCBodG1sLlRBQkxFXSwgbGlzdDogY2FuLmNvcmUuTGlzdChmb3JtLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpdGVtID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IGl0ZW19OiBpdGVtLmxlbmd0aCA+IDA/IHt0eXBlOiBodG1sLlNFTEVDVCwgbmFtZTogaXRlbVswXSwgdmFsdWVzOiBpdGVtLnNsaWNlKDEpfTogaXRlbQoJCQkJaXRlbS50eXBlID0gaXRlbS50eXBlfHwoaXRlbS52YWx1ZXM/IGh0bWwuU0VMRUNUOiBpdGVtLm5hbWUgPT0gaHRtbC5URVhUPyBodG1sLlRFWFRBUkVBOiBodG1sLlRFWFQpCgoJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJCWl0ZW0ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQkJCXZhciBfbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRSwgYWN0aW9uOiBtc2cuT3B0aW9uKGh0bWwuQUNUSU9OKX0sIG1zZywgY2FuLk9wdGlvbigpKQoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS50YWJsZSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkJaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgX21zZy5PcHRpb24oaXRlbS5uYW1lLCBpdGVtLnZhbHVlKQoJCQkJCQl9KQoJCQkJCQljYW4ucnVuKGV2ZW50LCBjbWRzLCBjYiwgdHJ1ZSkKCQkJCQl9CgoJCQkJCWlmIChpdGVtLm5hbWUgIT0gImFjdGlvbiIgJiYgaXRlbS5uYW1lKSB7CgkJCQkJCXRhcmdldC52YWx1ZSA9IG1zZy5PcHRpb24oaXRlbS5uYW1lKXx8Y2FuLk9wdGlvbihpdGVtLm5hbWUpfHx0YXJnZXQudmFsdWV8fCIiCgkJCQkJfQoJCQkJCWl0ZW0ubW9kZSA9ICJzaW1wbGUiCgkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlVTRVJOQU1FKSB7IHJldHVybiB9CgkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlBBU1NXT1JEKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCkKCQkJCX0KCgkJCQkvLyByZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dHlwZTogaHRtbC5URCwgbGlzdDogW3t0ZXh0OiBpdGVtLl90cmFuc3x8Y2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtLm5hbWUpfHwiIn1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFtjYW4ucGFnZS5pbnB1dChjYW4sIGl0ZW0pXX0gXX0KCQkJCXJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRELCBsaXN0OiBbe3RleHQ6IGl0ZW0ubmFtZXx8IiJ9XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtKV19IF19CgkJCX0pfV19LCB7dmlldzogaHRtbC5BQ1RJT059LAoJCV19XSkKCgkJdmFyIGxheW91dCA9IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgYnV0dG9ufHxbaHRtbC5TVUJNSVQsIGh0bWwuQ0FOQ0VMXSwgdWkuYWN0aW9uLCB7CgkJCWZvY3VzOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5maXJzdCwgaHRtbC5JTlBVVF9BUkdTKVswXS5mb2N1cygpIH0sCgkJCWNhbmNlbDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkgfSwKCQkJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGFjdGlvbi5zdWJtaXQoZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQlzdWJtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgZGF0YSA9IHt9LCBhcmdzID0gW10sIGxpc3QgPSBbXQoJCQkJbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLnRhYmxlLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmV0dXJuIGl0ZW0ubmFtZSAmJiBpdGVtLnZhbHVlICYmIGFyZ3MucHVzaChpdGVtLm5hbWUsIGl0ZW0udmFsdWUpLCBkYXRhW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlCgkJCQl9KQoJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9KQoJCQkJIWNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7ZXZlbnQ6IGV2ZW50LCBidXR0b246IGJ1dHRvbiwgZGF0YTogZGF0YSwgbGlzdDogbGlzdCwgYXJnczogYXJnc30pICYmIGFjdGlvbi5jYW5jZWwoKQoJCQkJLy8gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiAhY2IoZXZlbnQsIGJ1dHRvbiwgZGF0YSwgbGlzdCwgYXJncykgJiYgYWN0aW9uLmNhbmNlbCgpCgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwgX3RhcmdldDogdWkuX3RhcmdldCwKCQl9KQoJCWlmIChidXR0b24gPT09ICB0cnVlKSB7IHJldHVybiBhY3Rpb24uc3VibWl0KGV2ZW50LCBjYW4sICJzdWJtaXQiKSwgYWN0aW9uIH0KCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuX3RhcmdldCwgaHRtbC5JTlBVVF9BUkdTLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpbmRleCA9PSAwICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBpdGVtKSB9KQoJCX0pCgkJcmV0dXJuIGFjdGlvbgoJfSwKCXNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdHlwZSwgZmllbGRzLCBjYiwgY2JzKSB7CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmllbGRzOiBmaWVsZHN8fCJ0eXBlLG5hbWUsdGV4dCJ9KQoJCWNhbi5zZWFyY2gobXNnLCBbIlNlYXJjaC5vbmltcG9ydC5zZWxlY3QiLCB0eXBlLCAiIiwgIiJdLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5jb3JlLk5leHQobGlzdCwgY2IsIGNic3x8ZnVuY3Rpb24oKSB7CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgl9LAoJdXBsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBiZWdpbiA9IG5ldyBEYXRlKCkKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IGh0bWwuVVBMT0FELCBzdHlsZToge2xlZnQ6IDAsIHRvcDogMH0sIGxpc3Q6IFsKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OfSwge3ZpZXc6IGh0bWwuT1VUUFVULCBsaXN0OiBbe3ZpZXc6ICJwcm9ncmVzcyJ9XX0sCgkJCXt2aWV3OiBodG1sLlNUQVRVUywgbGlzdDogW3t2aWV3OiBodG1sLlNIT1d9LCB7dmlldzogImNvc3QifSwge3ZpZXc6ICJzaXplIn1dfSwKCQldfV0pOyBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsKCQkJe3R5cGU6IGh0bWwuVVBMT0FELCBvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWFjdGlvbi5zaG93KGV2ZW50LCAwLCBldmVudC50YXJnZXQuZmlsZXNbMF0uc2l6ZSwgMCkKCQkJfX0sIGNsaS5DTE9TRSwKCQldLCB1aS5hY3Rpb24sIHsKCQkJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpIH0sCgkJCWJlZ2luOiBmdW5jdGlvbihldmVudCkgeyBiZWdpbiA9IG5ldyBEYXRlKCkKCQkJCXZhciB1cGxvYWQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5hY3Rpb24sICJpbnB1dFt0eXBlPWZpbGVdIikKCQkJCWlmICh1cGxvYWRbMF0uZmlsZXMubGVuZ3RoID09IDApIHsgcmV0dXJuIHVwbG9hZFswXS5mb2N1cygpIH0KCgkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSwge19oYW5kbGU6ICJ0cnVlIn0pCgkJCQltc2cuX3VwbG9hZCA9IHVwbG9hZFswXS5maWxlc1swXSwgbXNnLl9wcm9ncmVzcyA9IGFjdGlvbi5zaG93CgoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKSwgY2FuLlVwZGF0ZSgpLCBhY3Rpb24uY2xvc2UoKQoJCQkJfSkKCQkJfSwKCQkJc2hvdzogZnVuY3Rpb24gKGV2ZW50LCB2YWx1ZSwgdG90YWwsIGxvYWRlZCkgeyBub3cgPSBuZXcgRGF0ZSgpCgkJCQl2YWx1ZSA9PSAwICYmIGFjdGlvbi5iZWdpbihldmVudCkKCgkJCQl1aS5zaG93LmlubmVySFRNTCA9IHZhbHVlKyIlIgoJCQkJdWkuY29zdC5pbm5lckhUTUwgPSBjYW4uYmFzZS5EdXJhdGlvbihub3cgLSBiZWdpbikKCQkJCXVpLnNpemUuaW5uZXJIVE1MID0gY2FuLmJhc2UuU2l6ZShsb2FkZWQpK2ljZS5QUytjYW4uYmFzZS5TaXplKHRvdGFsKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wcm9ncmVzcywge3dpZHRoOiB2YWx1ZSoodWkub3V0cHV0Lm9mZnNldFdpZHRoLTIpLzEwMH0pCgkJCX0sCgkJfSk7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmFjdGlvbiwgImlucHV0W3R5cGU9ZmlsZV0iKVswXS5jbGljaygpCgoJCXJldHVybiBhY3Rpb24KCX0sCglkb3dubG9hZDogZnVuY3Rpb24oY2FuLCBwYXRoLCBuYW1lLCBleHQpIHsKCQl2YXIgYSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dHlwZTogaHRtbC5BLCBocmVmOiBwYXRoLCBkb3dubG9hZDogY2FuLmNvcmUuS2V5cyhuYW1lLCBleHQpfHxwYXRoLnNwbGl0KGljZS5QUykucG9wKCl9XSkuZmlyc3QKCQlhLmNsaWNrKCksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGEpCgkJcmV0dXJuIHBhdGgKCX0sCglkb3dubG9hZHM6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgZXh0KSB7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCXJldHVybiBjYW4udXNlci5kb3dubG9hZChjYW4sIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3RleHRdKSksIG5hbWUsIGV4dCkKCX0sCgljYW1lcmE6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgewoJCW5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB0cnVlfSwgY2IsIGZ1bmN0aW9uKGVycm9yKSB7CgkJCWNhbi5taXNjLkxvZyhlcnJvcikKCQl9KQoJfSwKCWxvY2FsU3RvcmFnZTogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7CgkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgeyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgfQoJCXJldHVybiBjYW4uYmFzZS5PYmoobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSwge30pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wYW5lbC9hY3Rpb24uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIHJpdmVyID0gY2FuLkNvbmYoY2hhdC5SSVZFUiksIHN0b3JtID0gY2FuLkNvbmYoY2hhdC5TVE9STSkKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmNvcmUuTmV4dChtc2cuVGFibGUoKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQlpdGVtLmhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSkKCQkJaXRlbS53aWR0aCA9IGNhbi5Db25mV2lkdGgoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9YKQoJCQlpdGVtLmZlYXR1cmUgPSBjYW4uYmFzZS5PYmooaXRlbS5mZWF0dXJlfHxpdGVtLm1ldGEpCgkJCWl0ZW0uaW5wdXRzID0gY2FuLmJhc2UuT2JqKGl0ZW0uaW5wdXRzfHxpdGVtLmxpc3QpCgoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgaXRlbSwgZnVuY3Rpb24oc3ViLCBtZXRhLCBza2lwKSB7CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgbWV0YS53aWR0aC0oY2FuLnVzZXIuaXNXaW5kb3dzPyAyMDogMCkpCgkJCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIHJpdmVyLCBzdG9ybSwgc3ViLCBtZXRhKSwgc2tpcCB8fCBuZXh0KCkKCQkJfSkKCQl9LCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uYWN0aW9uLmxheW91dChjYW4sIGNhbi5taXNjLlNlYXJjaE9yQ29uZihjYW4sIGNoYXQuTEFZT1VUKXx8Vm9sY2Fub3MubWV0YS5hcmdzLmxheW91dCwgdHJ1ZSkKCQkJY2FuLm9uaW1wb3J0Ll9tZW51KGNhbiwgbXNnKSwgY2FuLm9ua2V5bWFwLl9pbml0KGNhbikKCQl9KQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgcml2ZXIsIHN0b3JtLCBzdWIsIG1ldGEpIHsgc3ViLl90YXJnZXQuX21ldGEgPSBtZXRhCgkJbWV0YS5pZCAmJiAoc3ViLl9vcHRpb24uZGF0YXNldCA9IHN1Yi5fb3B0aW9uLmRhdGFzZXR8fHt9LCBzdWIuX29wdGlvbi5kYXRhc2V0LmlkID0gbWV0YS5pZCkKCgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgewoJCQlyZXR1cm4gY2FuLnJ1bihzdWIucmVxdWVzdChldmVudCksIGNhbi5taXNjLmNvbmNhdChjYW4sIFtyaXZlciwgc3Rvcm0sIG1ldGEuaWR8fG1ldGEuaW5kZXhdLCBjbWRzKSwgY2IpCgkJfSwgY2FuLl9wbHVnaW5zID0gY2FuLm1pc2MuY29uY2F0KGNhbiwgY2FuLl9wbHVnaW5zLCBbc3ViXSkKCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9hY3Rpb24sIFt7dmlldzogW2h0bWwuVEFCUywgaHRtbC5ESVYsIG1ldGEubmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5GSUVMRFNFVF9QTFVHSU4sIHN1Yi5fdGFyZ2V0KQoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9hY3Rpb24sIGh0bWwuRElWX1RBQlMsIGV2ZW50LnRhcmdldCkKCQl9LCBvbm1vdXNlZW50ZXI6IHN1Yi5fbGVnZW5kLm9ubW91c2VlbnRlciwgb25kYmxjbGljazogc3ViLl9sZWdlbmQub25jbGlja31dKQoJfSwKCV9tZW51OiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8IGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5NRU5VUyksIGNhbi5Db25mKGNoYXQuTUVOVVMpfHxjYW4ub25hY3Rpb24uX21lbnVzKSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbGlzdCkgewoJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uYWN0aW9uLCBsaXN0WzBdXSwgW2NhbiwgYnV0dG9uXSkKCQl9KQoJfSwKCV9zaGFyZTogZnVuY3Rpb24oY2FuLCBzaGFyZSkgeyBzaGFyZSAmJiBjYW4ucnVuKHt9LCBbIl9zaGFyZSIsIHNoYXJlXSwgZnVuY3Rpb24obXNnKSB7CgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fQ01EKQoJCWNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQywgbXNnLk9wdGlvbk9yU2VhcmNoKGNoYXQuVE9QSUMpKQoJCWNhbi51c2VyLnRpdGxlKG1zZy5PcHRpb25PclNlYXJjaChjaGF0LlRJVExFKSkKCgkJY2FuLkNvbmYoY2hhdC5SSVZFUiwgIl9zaGFyZSIsIGNoYXQuU1RPUk0sIHNoYXJlKQoJCW1zZy5MZW5ndGgoKSA+IDAgJiYgY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnKQoJfSkgfSwKCV9jbWQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbmV4dCkgewoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OQUNUSU9OX0NNRCkKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgY2FuLmJhc2UuQ29weShpdGVtLCB7b3B0czogY2FuLm1pc2MuU2VhcmNoKGNhbiksIG1vZGU6ICJjbWQifSksIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1kpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4udXNlci50aXRsZShtZXRhLm5hbWUpLCBza2lwIHx8IG5leHQoKQoJCX0pCgl9LAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4sIGhlaWdodCkgewoJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbi5fdGFyZ2V0LCBoZWlnaHQpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORU5HSU5FLCB7aGVscDogIuino+aekOW8leaTjiIsIF9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBwYWdlLCBtc2csIGNhbiwgY21kcywgY2IpIHsKCXZhciBzdG9ybSA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fcm9vdCwgY2FuLmNvcmUuS2V5cyhjaGF0LlJJVkVSLCBjbWRzWzBdLCBjaGF0LlNUT1JNLCBjbWRzWzFdKSkKCWlmICghc3Rvcm0gfHwgY21kcy5sZW5ndGggIT0gMikgeyByZXR1cm4gZmFsc2UgfQoKCWlmIChzdG9ybS5pbmRleCkgeyAvLyDlkb3ku6TntKLlvJUKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjdHguQ09NTUFORCwgW10uY29uY2F0KHN0b3JtLmluZGV4KSwgY2IpCgl9IGVsc2UgeyAvLyDlkb3ku6TliJfooagKCQljYW4uY29yZS5MaXN0KHN0b3JtLmxpc3QsIGZ1bmN0aW9uKHZhbHVlKSB7CgkJCW1zZy5QdXNoKG1kYi5OQU1FLCB2YWx1ZS5uYW1lfHwiIikKCQkJbXNnLlB1c2gobWRiLkhFTFAsIHZhbHVlLmhlbHB8fCIiKQoJCQltc2cuUHVzaChjdHguSU5QVVRTLCBKU09OLnN0cmluZ2lmeSh2YWx1ZS5pbnB1dHMpKQoJCQltc2cuUHVzaChjdHguRkVBVFVSRSwgSlNPTi5zdHJpbmdpZnkodmFsdWUuZmVhdHVyZSkpCgkJCW1zZy5QdXNoKGN0eC5JTkRFWCwgdmFsdWUuaW5kZXh8fCIiKQoJCQltc2cuUHVzaChjdHguQVJHUywgdmFsdWUuYXJnc3x8IltdIikKCQkJbXNnLlB1c2goY3R4LlNUWUxFLCB2YWx1ZS5zdHlsZXx8IiIpCgkJCW1zZy5QdXNoKGN0eC5ESVNQTEFZLCB2YWx1ZS5kaXNwbGF5fHwiIikKCQkJbXNnLlB1c2goaWNlLk1TR19BQ1RJT04sIHZhbHVlLl9hY3Rpb258fCIiKQoJCX0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCX0KCXJldHVybiB0cnVlCn19KQpWb2xjYW5vcyhjaGF0Lk9OUExVR0lOLCB7aGVscDogIuazqOWGjOaPkuS7tiIsCgkicGFyc2UiOiBzaHkoIuino+aekCIsIHsKCQkic2hvdyI6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7IHZhciBuYW1lID0gY21kc1sxXXx8ImNhbiIKCQkJY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLnRpdGxlKG5hbWUpCgkJCWNtZHMgJiYgY21kc1swXSAmJiBWb2xjYW5vcyhuYW1lLCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgbmFtZSl9LCBbIi9wbHVnaW4vc3RvcnkvcGFyc2UuanMiXSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gY2FuLnJ1biwgc3ViLk9wdGlvbiA9IGZ1bmN0aW9uKCkge30sIGNhbi5pc0NtZE1vZGUoKSAmJiBzdWIuQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQpCgkJCQlzdWIub25hcHBlbmQucGFyc2Uoc3ViLCBzdWIub25hcHBlbmQuX3BhcnNlKHN1YiwgY21kc1swXSwgbmFtZSwgc3ViLkNvbmZIZWlnaHQoKSksIGNhbi5fb3V0cHV0KQoJCQkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sICJtZW51IiwgZnVuY3Rpb24obXNnKSB7CgkJCQkJZGVsZXRlKG1zZy5fZXZlbnQpLCBkZWxldGUobXNnLl9jYW4pCgkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCBKU09OLnN0cmluZ2lmeShtc2cpKQoJCQkJfSkKCQkJfSkKCQl9LAoJfSwgWyJ0ZXh0IiwgIm5hbWUiLCAic2hvdzpidXR0b25AYXV0byIsICJjbGVhcjpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiKSB7CgkJY21kcyAmJiBjbWRzWzBdICYmIGNhbi5fcm9vdC5BY3Rpb24ucnVuKHt9LCBjbWRzLCBjYiwgdHJ1ZSkKCX0pLAoKCSJwbHVnaW4iOiBzaHkoIuaPkuS7tiIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJIm5mcy5zYXZlIjogc2h5KCLkv53lrZjmlofku7YiLCB7fSwgWyJmaWxlPWhpLnR4dCIsICJ0ZXh0OnRleHRhcmVhPSdoZWxsbyB3b3JsZCciLCAic2F2ZTpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiKSB7CgkJY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJCSJzYXZlIiwgZnVuY3Rpb24oY21kcykgeyBjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjbWRzWzFdLCBjbWRzWzBdKSB9CgkJKSkKCX0pLAoJInBpZSI6IHNoeSgi5q+U5L6L5Zu+Iiwge30sIFsibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkRpc3BsYXlTdG9yeSgicGllLmpzIikKCQltc2cuUHVzaCgidmFsdWUiLCAyMDApCgkJbXNnLlB1c2goInZhbHVlIiwgMzAwKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsIDQwMCkKCX0pLAoJImNhbi5jb2RlLmlubmVyLl9wbHVnaW4iOiBzaHkoIuaPkuS7tiIsIHt9LCBbe3R5cGU6ICJidXR0b24iLCBuYW1lOiAibGlzdCIsIGFjdGlvbjogImF1dG8ifSwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHt9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLCBfZm9jdXM6IFtdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25rZXltYXAuX2J1aWxkKGNhbiksIGNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBjaGF0Lk9OS0VZRE9XTiwgZnVuY3Rpb24obXNnLCBtb2RlbCkgewoJCQljYW4uX2tleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKG1zZy5fZXZlbnQsIGNhbiwgbW9kZWwsIGNhbi5fa2V5bGlzdHx8W10sIGNhbi5fb3V0cHV0KQoJCX0pCgl9LAoJX21vZGU6IHsKCQlub3JtYWw6IHsKCQkJajogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldC5zY3JvbGxCeSgwLCBldmVudC5jdHJsS2V5PyAzMDA6IDMwKSB9LAoJCQlrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LnNjcm9sbEJ5KDAsIGV2ZW50LmN0cmxLZXk/IC0zMDA6IC0zMCkgfSwKCgkJCWI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIkhlYWRlci5vbmFjdGlvbi5ibGFjayJdKSB9LAoJCQl3OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJIZWFkZXIub25hY3Rpb24ud2hpdGUiXSkgfSwKCgkJCWc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLuWIm+W7uue+pOe7hCJdKSB9LAoJCQlzOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJSaXZlci5vbmRldGFpbC7mt7vliqDlupTnlKgiXSkgfSwKCQkJdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5re75Yqg5bel5YW3Il0pIH0sCgoJCQkiICI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TRUFSQ0hGT0NVUyksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LAoJCQkiOiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05DT01NQU5ERk9DVVMpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwKCQkJRW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiAiIn0pKQoJCQl9LAoJCQlFc2NhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGNhbi5wYWdlLktleXMoaHRtbC5GSUVMRFNFVF9GTE9BVCwgaHRtbC5ESVZfRkxPQVQpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJCX0pCgkJCX0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGNiLCB0YXJnZXQpIHsKCQljYW4uQ29uZihodG1sLk1BUkdJTl9ZLCA0Kmh0bWwuUExVR0lOX01BUkdJTisyKmh0bWwuQUNUSU9OX0hFSUdIVCtodG1sLkFDVElPTl9NQVJHSU4pCgkJY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCwgNCpodG1sLlBMVUdJTl9NQVJHSU4pCgoJCWlmIChjYW4udXNlci5tb2QuaXNQb2QgfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsKCQkJdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiOyBmdW5jdGlvbiB0b2dnbGUodmlldykgeyByZXR1cm4gIWNhbi5zZXRSaXZlcigiZGlzcGxheSIpIH0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPSkVDVF1dLCBsaXN0OiBbe3RleHQ6IFtndCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlldmVudC50YXJnZXQuaW5uZXJIVE1MID0gdG9nZ2xlKCk/IGd0OiBsdCwgY2FuLm9uYWN0aW9uLnJlZnJlc2goY2FuKQoJCQl9fV0pCgkJfQoKCQl0YXJnZXQub250b3VjaHN0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fVE9VQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50KSkgfQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogWwoJCVtjaGF0LkxBWU9VVCwgImF1dG8iLCAidGFicyIsICJncmlkIiwgImZyZWUiLCAiZmxvdyIsICJwYWdlIiwgInRvaW1hZ2UiXSwKCQlbaWNlLkhFTFAsICJ0dXRvciIsICJtYW51YWwiLCAic2VydmljZSIsICJkZXZvcHMiLCAicmVmZXIiXSwKCV0sCglfdHJhbnM6IHsKCQkibGF5b3V0IjogIuW4g+WxgCIsCgkJImF1dG8iOiAi6buY6K6k5biD5bGAIiwKCQkiZmxvdyI6ICLmtYHliqjluIPlsYAiLAoJCSJncmlkIjogIue9keagvOW4g+WxgCIsCgkJInRhYnMiOiAi5qCH562+5biD5bGAIiwKCQkiZnJlZSI6ICLoh6rnlLHluIPlsYAiLAoJCSJwYWdlIjogIue9kemhteW4g+WxgCIsCgkJInRvaW1hZ2UiOiAi55Sf5oiQ5Zu+54mHIiwKCgkJImhlbHAiOiAi5biu5YqpIiwKCQkidHV0b3IiOiAi5YWl6Zeo566A5LuLIiwKCQkibWFudWFsIjogIuS9v+eUqOaJi+WGjCIsCgkJInNlcnZpY2UiOiAi5pyN5Yqh5omL5YaMIiwKCQkiZGV2b3BzIjogIue8lueoi+aJi+WGjCIsCgkJInJlZmVyIjogIuWPguiAg+aJi+WGjCIsCgl9LAoJb25tYWluOiBmdW5jdGlvbihjYW4pIHsgY2FuLm9uaW1wb3J0Ll9zaGFyZShjYW4sIGNhbi5taXNjLlNlYXJjaChjYW4sIHdlYi5TSEFSRSkpIH0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4pIHsgaWYgKCFjYW4udXNlci5tb2QuaXNDbWQgJiYgIWNhbi5Db25mKGNoYXQuVE9PTCkpIHsgcmV0dXJuIH0KCQljYW4uX25hbWVzID0gbG9jYXRpb24ucGF0aG5hbWUKCQljYW4uQ29uZihjaGF0LlRPT0wpPyBjYW4uY29yZS5OZXh0KGNhbi5Db25mKGNoYXQuVE9PTCksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jbWQoY2FuLCBpdGVtLCBuZXh0KQoJCX0pOiBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KCksIGN0eC5DT01NQU5ELCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5jb3JlLk5leHQobXNnLlRhYmxlKCksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jbWQoY2FuLCBpdGVtLCBuZXh0KQoJCX0pIH0pCgl9LAoJb25zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7CgkJaWYgKHdvcmRbMF0gPT0gbWRiLlBMVUdJTiB8fCB3b3JkWzBdID09IG1kYi5GT1JFQUNIKSB7IGNhbi5vbmV4cG9ydC5wbHVnaW4oY2FuLCBtc2csIHdvcmQpIH0KCX0sCglvbnNpemU6IGZ1bmN0aW9uKGNhbiwgbXNnLCBoZWlnaHQsIHdpZHRoKSB7IGNhbi5Db25mKHtoZWlnaHQ6IGhlaWdodCwgd2lkdGg6IHdpZHRofSkgfSwKCW9uc3Rvcm1fc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgewoJCQlyZXR1cm4gY2FuLmNvcmUuS2V5cyhjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSkKCQl9LCBjYW4uX2FjdGlvbiwgY2FuLl9vdXRwdXQpKSB7CgkJCXZhciBjb25mID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9yb290LCBjYW4uY29yZS5LZXlzKGNoYXQuUklWRVIsIHJpdmVyLCBjaGF0LlNUT1JNLCBzdG9ybSkpfHx7fQoJCQlyZXR1cm4gY2FuLm9uYWN0aW9uLmxheW91dChjYW4sIGNhbi5taXNjLlNlYXJjaE9yQ29uZihjYW4sIGNoYXQuTEFZT1VUKXx8Vm9sY2Fub3MubWV0YS5hcmdzLmxheW91dHx8Y29uZi5sYXlvdXQsIHRydWUpCgkJfQoKCQljYW4ucnVuKHt9LCBbcml2ZXIsIHN0b3JtXSwgZnVuY3Rpb24obXNnKSB7IGlmIChtc2cuTGVuZ3RoKCkgPiAwKSB7IHJldHVybiBjYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2cpIH0KCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fTk9UT09MLCBjYW4ucmVxdWVzdCh7fSwge3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkpCgkJfSkKCX0sCglvbmFjdGlvbl9jbWQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLkNvbmZIZWlnaHQoY2FuLl9yb290Ll9oZWlnaHQpLCBjYW4uQ29uZldpZHRoKGNhbi5fcm9vdC5fd2lkdGgpCgkJY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCwgMCwgaHRtbC5NQVJHSU5fWSwgMipodG1sLkFDVElPTl9IRUlHSFQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCAic2ltcGxlIikgCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fdGFyZ2V0LCAiY21kIikKCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoJCWNhbi5pc0NtZE1vZGUoKQoJfSwKCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgYnV0dG9uLCBzaWxlbnQpIHsgYnV0dG9uID0gYnV0dG9ufHxpY2UuQVVUTwoJCXZhciBjYiA9IGNhbi5vbmxheW91dFtidXR0b25dOyBpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihjYW4sIHNpbGVudCkpIHsgcmV0dXJuIH0KCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgY2FuLl90YXJnZXQsIGNhbi5Db25mKGNoYXQuTEFZT1VUKSkKCQlpZiAoYnV0dG9uID09IGljZS5BVVRPKSB7IGJ1dHRvbiA9ICIiIH0KCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl90YXJnZXQsIGNhbi5Db25mKGNoYXQuTEFZT1VULCBidXR0b24pKQoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgl9LAoJaGVscDogZnVuY3Rpb24oY2FuLCBidXR0b24pIHsgY2FuLnVzZXIub3BlbigiL2hlbHAvIitidXR0b24rIi5zaHkiKSB9LAoJcmVmcmVzaDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLl9yb290Ll9oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsIGNhbi5fcm9vdC5fd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9YKQoJCWNhbi5jb3JlLkxpc3QoY2FuLl9wbHVnaW5zLCBmdW5jdGlvbihzdWIpIHsgdmFyIHRhYmxlID0gY2FuLmNvcmUuVmFsdWUoc3ViLCBjaGF0Ll9PVVRQVVRfQ1VSUkVOVCkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgod2lkdGgpLShjYW4udXNlci5pc1dpbmRvd3M/IDIwOiAwKSkKCQkJdGFibGUuQ29uZldpZHRoKHdpZHRoKQoJCQl0YWJsZS5vbmltcG9ydC5sYXlvdXQ/IHRhYmxlLm9uaW1wb3J0LmxheW91dCh0YWJsZSk6IGNhbi5vbmFwcGVuZC5fb3V0cHV0KHN1YiwgdGFibGUuX21zZywgc3ViLl9kaXNwbGF5KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OTEFZT1VULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCglncmlkOiBmdW5jdGlvbihjYW4sIHNpbGVudCkgewoJCXZhciBBQ1RJT05fTEFZT1VUX0ZNVCA9ICIgZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyB3aWR0aDpfd2lkdGg7IGhlaWdodDpfaGVpZ2h0OyB9IGZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luPmRpdi5vdXRwdXQgeyB3aWR0aDpfd2lkdGg7IGhlaWdodDpfaGVpZ2h0OyB9ICIKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6ICJtIiwgdmFsdWU6IDJ9LCB7bmFtZTogIm4iLCB2YWx1ZTogMn1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGhlaWdodCwgd2lkdGgpIHsgdmFyIG0gPSBwYXJzZUludChkYXRhLm0pfHwyLCBuID0gcGFyc2VJbnQoZGF0YS5uKXx8MgoJCQkJY2FuLnBhZ2UuY3NzKGNhbi5iYXNlLnJlcGxhY2VBbGwoQUNUSU9OX0xBWU9VVF9GTVQsICJfd2lkdGgiLCAod2lkdGgtKDQqbSsxKSpodG1sLlBMVUdJTl9NQVJHSU4pL20rInB4IiwgIl9oZWlnaHQiLCAoaGVpZ2h0LSg0Km4rMSkqaHRtbC5QTFVHSU5fTUFSR0lOKS9uKyJweCIpKQoJCQl9KQoJCX0sIHNpbGVudCkKCX0sCgl0YWJzOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9hY3Rpb24sIGh0bWwuRElWX1RBQlMsIDApCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkZJRUxEU0VUX1BMVUdJTiwgMCkKCX0sCglmcmVlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3RhcmdldCwgW1todG1sLkRJVl9PVVRQVVQsIGh0bWwuRklFTERTRVRfUExVR0lOXV0sIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwge2xlZnQ6IDQwKmluZGV4LCB0b3A6IDQwKmluZGV4fSkKCQkJY2FuLm9ubW90aW9uLm1vdmUoY2FuLCBpdGVtLCB7bGVmdDogNDAqaW5kZXgsIHRvcDogNDAqaW5kZXh9KQoJCX0pCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi5Db25mKGNoYXQuU1RPUk0pLCBjYW4uX291dHB1dCksIHRydWUKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWFyZ3M6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTmV4dChjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9QTFVHSU4sIGh0bWwuRk9STV9PUFRJT05dXSksIGZ1bmN0aW9uKGl0ZW0sIG5leHQsIGluZGV4LCBhcnJheSkgewoJCQlpdGVtLmRhdGFzZXQuYXJncyA9IEpTT04uc3RyaW5naWZ5KGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWV8fCIiIH0pKQoJCQljYihpdGVtLCBuZXh0LCBpbmRleCwgYXJyYXkpCgkJfSkKCX0sCglzaXplOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb24oaHRtbC5UT1AsIGNhbi5fb3V0cHV0Lm9mZnNldFRvcCkKCQltc2cuT3B0aW9uKGh0bWwuTEVGVCwgY2FuLl9vdXRwdXQub2Zmc2V0TGVmdCkKCQltc2cuT3B0aW9uKGh0bWwuV0lEVEgsIGNhbi5fb3V0cHV0Lm9mZnNldFdpZHRoKQoJCW1zZy5PcHRpb24oaHRtbC5IRUlHSFQsIGNhbi5fb3V0cHV0Lm9mZnNldEhlaWdodCkKCQltc2cuT3B0aW9uKGh0bWwuU0NST0xMLCBjYW4udXNlci5pc01vYmlsZT8gY2FuLl90YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnNjcm9sbFRvcDogY2FuLl9vdXRwdXQuc2Nyb2xsVG9wKQoJCW1zZy5PcHRpb24oaHRtbC5NQVJHSU5fWCwgY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCkpCgkJbXNnLk9wdGlvbihodG1sLk1BUkdJTl9ZLCBjYW4uQ29uZihodG1sLk1BUkdJTl9ZKSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IHJldHVybiBjYW4uQ29uZihjaGF0LkxBWU9VVCkgfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsgdmFyIGZpZWxkcyA9IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbW2h0bWwuRklFTERTRVRfUExVR0lOLCBodG1sLkxFR0VORF1dLCBmdW5jdGlvbihpdGVtKSB7CgkJCWlmIChpdGVtLmlubmVySFRNTC5pbmRleE9mKHdvcmRbMV0pID09IC0xKSB7IHJldHVybiB9CgoJCQl2YXIgbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0ubmV4dFNpYmxpbmcsIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udmFsdWV8fCIiIH0pCgkJCXZhciBtZXRhID0gaXRlbS5wYXJlbnROb2RlLl9tZXRhOyBpZiAoIW1ldGEpIHsgcmV0dXJuIH0KCgkJCXZhciBkYXRhID0ge2N0eDogImNhbiIsIGNtZDogIkFjdGlvbiIsCgkJCQl0eXBlOiBtZGIuUExVR0lOLCBuYW1lOiBpdGVtLmlubmVySFRNTCwgdGV4dDogc2h5KCLot7PovawiLCBmdW5jdGlvbihldmVudCkgewoJCQkJCXZhciBpbnB1dCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0ucGFyZW50Tm9kZSwgaHRtbC5JTlBVVF9BUkdTKVswXTsgaW5wdXQgJiYgaW5wdXQuZm9jdXMoKQoJCQkJfSksIGFyZ3VtZW50OiBKU09OLnN0cmluZ2lmeShsaXN0KSwKCQkJfQoJCQlpZiAobWV0YS5pbmRleCkgewoJCQkJZGF0YS5jb250ZXh0ID0gIiIsIGRhdGEuY29tbWFuZCA9IG1ldGEuaW5kZXgKCQkJfSBlbHNlIGlmIChtZXRhLmNtZCkgewoJCQkJZGF0YS5jb250ZXh0ID0gbWV0YS5jdHgsIGRhdGEuY29tbWFuZCA9IG1ldGEuY21kCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4KCQkJfQoJCQltc2cuUHVzaChkYXRhLCBmaWVsZHMpCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL2Zvb3Rlci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll90aXRsZShjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fc3RhdGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3RvYXN0KGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9jb21tYW5kKGNhbiwgbXNnLCB0YXJnZXQpCgl9LAoJX3RpdGxlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QobXNnLnJlc3VsdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuVElUTEUsIGh0bWwuRElWLCBpdGVtXSwgdGl0bGU6ICLogZTns7vnq5nplb8ifV0pCgkJfSkKCX0sCglfc3RhdGU6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuU1RBVEUpfHxjYW4uQ29uZihjaGF0LlNUQVRFKSwgWyJuY21kIiwgIm50aXAiXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFtjaGF0LlNUQVRFLCBpdGVtXSksIGh0bWwuRElWLCBjYW4uQ29uZihpdGVtKV0sIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbSwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyI6ICIsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFtjYW4uQ29uZihpdGVtKXx8IiIsIGh0bWwuU1BBTiwgaXRlbV19LAoJCQldLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25leHBvcnRbaXRlbV0oY2FuKSB9fV0pCgkJfSkKCX0sCglfdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4udG9hc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2hhdC5UT0FTVCwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZXhwb3J0WyJudGlwIl0oY2FuKSB9fV0pLmZpcnN0Cgl9LAoJX2NvbW1hbmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiY21kIiwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbik7IGlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlzd2l0Y2ggKGV2ZW50LnRhcmdldC52YWx1ZSkgewoJCQkJY2FzZSBjbGkuQ0xPU0U6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJY2FzZSBjbGkuQ0xFQVI6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJZGVmYXVsdDoKCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBjYW4uY29yZS5TcGxpdChldmVudC50YXJnZXQudmFsdWUsIGljZS5TUCksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQljYW4uY2xpICYmIGNhbi5jbGkuY2xvc2UoKSwgY2FuLm9uZXhwb3J0LmZsb2F0KGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkge30sICJjbGkiLCB0cnVlKQoJCQkJCX0pCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIGNtZCIpCgl9LAoKCXRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZywgdGl0bGUsIGNvbnRlbnQsIGZpbGVsaW5lLCB0aW1lKSB7IGNhbi5fdGlwcyA9IGNhbi5fdGlwc3x8Y2FuLnJlcXVlc3QoKQoJCWNhbi5fdGlwcy5QdXNoKHt0aW1lOiB0aW1lLCBmaWxlbGluZTogZmlsZWxpbmUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudH0pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm50aXAiKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGNhbi50b2FzdCwgW3RpbWUuc3BsaXQoaWNlLlNQKS5wb3AoKSwgdGl0bGUsIGNvbnRlbnRdLmpvaW4oaWNlLlNQKSkKCX0sCgljb3VudDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5jb3JlLktleXMoaHRtbC5TUEFOLCBuYW1lKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLmlubmVySFRNTCA9IGNhbi5Db25mKG5hbWUsIHBhcnNlSW50KGNhbi5Db25mKG5hbWUpfHwiMCIpKzErIiIpKyIiCgkJfSkKCX0sCgluY21kOiBmdW5jdGlvbihjYW4sIG1zZywgX2ZvbGxvdywgX2NtZHMpIHsgY2FuLl9jbWRzID0gY2FuLl9jbWRzfHxjYW4ucmVxdWVzdCgpCgkJY2FuLl9jbWRzLlB1c2goe3RpbWU6IGNhbi5iYXNlLlRpbWUoKSwgZm9sbG93OiBfZm9sbG93LCBjbWRzOiBfY21kc30pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm5jbWQiKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbikgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl90YXJnZXQpIH0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZywgbnVsbCwgY2FuLl9vdXRwdXQpIH0pIH0sCglvbnRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25pbXBvcnQudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2d9KSB9LAoJb25yZW1vdGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmltcG9ydC5uY21kLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkgfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4pIH0sCglvbmNvbW1hbmRmb2N1czogZnVuY3Rpb24oY2FuKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbImRpdi5jbWQiLCAiaW5wdXQiXSwgZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldEhlaWdodCB9LAoJZmxvYXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgbmFtZSwgYm90dG9tKSB7IGlmIChjYW5bbmFtZV0pIHsgcmV0dXJuIGNhbltuYW1lXS5jbG9zZSgpIH0KCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCAic3RvcnkgdG9hc3QgZmxvYXQiLCB7fSwgY2FuLl9yb290Ll90YXJnZXQpCgkJdWkuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuZmlyc3QpLCBkZWxldGUoY2FuW25hbWVdKSB9CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgaGVpZ2h0LCB3aWR0aCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLmZpcnN0LCBodG1sLkxFRlQsIGxlZnQsIGh0bWwuVE9QLCB0b3ApCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkub3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC0yOCwgaHRtbC5NQVhfV0lEVEgsIHdpZHRoKQoJCX0pCgoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW2NsaS5DTE9TRSwgY2xpLlJFRlJFU0gsIHtpbnB1dDogaHRtbC5URVhULCBwbGFjZWhvbGRlcjogImZpbHRlciIsIF9pbml0OiBmdW5jdGlvbihpbnB1dCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgImtleW1hcC5mb2N1cyIsIGNhbi5yZXF1ZXN0KHt9LCB7Y2I6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyB1aS5jbG9zZSgpOyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBpY2UuU1ApIHsgaW5wdXQuZm9jdXMoKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQkJfX0pKQoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCWlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gMCkgeyByZXR1cm4gfQoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgeyBpZiAodGQuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCX0gfSkKCQkJfSkKCQl9fV0sIHVpLmFjdGlvbiwga2l0LkRpY3QoY2xpLkNMT1NFLCB1aS5jbG9zZSwgY2xpLlJFRlJFU0gsIGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmNsb3NlKCksIGNhbi50b2FzdC5jbGljaygpfSkpCgoJCWlmIChtc2cpIHsKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkgewoJCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpCgkJCQl9fQoJCQl9LCB1aS5vdXRwdXQpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cuUmVzdWx0KCksIHVpLm91dHB1dCkKCQl9CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuZmlyc3QsIGJvdHRvbT8ge2JvdHRvbTogaHRtbC5BQ1RJT05fSEVJR0hULCB0b3A6ICIifToge30pLCBjYW5bbmFtZV0gPSB1aQoJfSwKCW50aXA6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fdGlwcywgZnVuY3Rpb24oKSB7fSwgIm50aXAiKQoJfSwKCW5jbWQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fY21kcywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpIHsKCQkJdmFyIGNtZHMgPSBjYW4uYmFzZS5PYmoobGluZS5jbWRzKTsgc3dpdGNoIChsaW5lLmZvbGxvdykgewoJCQkJY2FzZSAiY2FuLkFjdGlvbiI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQkJY2FzZSAiY2FuLkZvb3RlciI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQl9CgkJCXN3aXRjaCAoY21kc1swXSkgewoJCQkJY2FzZSAid2ViLndpa2kud29yZCI6IGNtZHMgPSBjbWRzLnNsaWNlKDUpOyBicmVhawoJCQl9CgoJCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2csIHRvcCwgbGVmdCwgd2lkdGgsIGhlaWdodCkgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogY21kc1swXSwgYXJnczogY21kcy5zbGljZSgxKSwgaGVpZ2h0OiBoZWlnaHQtMTAwLCB3aWR0aDogd2lkdGh9LCBmdW5jdGlvbihzdWIpIHsKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZCwgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNtZHNbMF0sIGNtZCwgY2IpIH0KCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwge3RvcDogdG9wKzEwMCwgbGVmdDogbGVmdH0pCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX2xlZ2VuZCwge2Rpc3BsYXk6IGh0bWwuQkxPQ0t9KQoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIHsibWF4LXdpZHRoIjogd2lkdGh9KQoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBzdWIuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9KQoJCX0sICJuY21kIikKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL2hlYWRlci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5vbmltcG9ydC5fdGl0bGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3N0YXRlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9hdmF0YXIoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2JhY2tncm91bmQoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fbWVudXMoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25kYWVtb24uX2luaXQoY2FuKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCV90aXRsZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKG1zZy5yZXN1bHQsIGNhbi5Db25mKGNoYXQuVElUTEUpfHxbInNoeWxpbnV4LmNvbS94L2NvbnRleHRzIl0pLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5USVRMRSwgaHRtbC5ESVYsIGl0ZW1dLCB0aXRsZTogIui/lOWbnuS4u+mhtSIsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24udGl0bGUoZXZlbnQsIGNhbikKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCB7fSwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgfSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkgewoJCQkJCWV2ZW50LnNoaWZ0S2V5PyBjYW4udXNlci5vcGVuKGxpc3RbaW5kZXhdLnBhdGgpOiBjYW4udXNlci5qdW1wcyhsaXN0W2luZGV4XS5wYXRoKQoJCQkJfSkKCQkJfX1dKQoJCX0pCgl9LAoJX3N0YXRlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LlNUQVRFKXx8Y2FuLkNvbmYoY2hhdC5TVEFURSksIFttZGIuVElNRSwgYWFhLlVTRVJOSUNLXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0gPT0gYWFhLkFWQVRBUiApIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBsaXN0OiBbe2ltZzogaWNlLlNQfV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgW2Nhbi5wYWdlLkZvcm1hdChodG1sLklNRywgY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pLCAxNjApXSkKCQkJCX19XSk7IHJldHVybgoJCQl9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBodG1sLkRJViwgKGNhbi5Db25mKGl0ZW0pfHwiIikuc2xpY2UoMCwgMTApXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbiwgaXRlbV0sIFtldmVudCwgY2FuLCBpdGVtXSkKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtID09IG1kYi5USU1FICYmIGNhbi5vbmltcG9ydC5fdGltZShjYW4sIHRhcmdldCkgfX1dKQoJCX0pCgl9LAoJX2F2YXRhcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgImRpdi5zdGF0ZS5hdmF0YXI+aW1nIiwge3NyYzogY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pfSkKCX0sCglfYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm9ubGF5b3V0LmJhY2tncm91bmQoY2FuLCBjYW4ub25leHBvcnQuYmFja2dyb3VuZChjYW4pKQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuU0VBUkNILCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6ICJjb21tYW5kLHNwYWNlLHRleHQifHxtZGIuRk9SRUFDSCwgd29yZDogZXZlbnQudGFyZ2V0LnZhbHVlfSkpCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIHNlYXJjaCIpCgkJY2FuLm9uaW1wb3J0Lm1lbnUoY2FuLCBtZGIuU0VBUkNILCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiB1aS52YWx1ZX0pKQoJCX0pCgl9LAoJX21lbnVzOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLnVzZXIubW9kLmlzUG9kPyBbY3R4LkNPTkZJR106CgkJCWNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpfHxjYW4uQ29uZihjaGF0Lk1FTlVTKSwgY2FuLm9uYWN0aW9uLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmFjdGlvbltidXR0b25dfHxmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQkJY2FuLnJ1bihldmVudCwgW2J1dHRvbl0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBjYW4udXNlci50cmFucyhjYW4sIGJ1dHRvbikpIH0pCgkJCQl9LCB7ZXZlbnQ6IGV2ZW50LCBjYW46IGNhbiwgYnV0dG9uOiBidXR0b259KQoJCQl9KQoJfSwKCglfdGltZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDUwMH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGltZShjYW4sIHRhcmdldCkgfSkKCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge2FjdGlvbjogImRhdGUiLCBzdHlsZTogeyJtaW4td2lkdGgiOiAzMDZ9LCBfaW5pdDogZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wKSB7IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHt0b3A6IHRvcCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkgfSkKCQl9fSwgdGFyZ2V0KSwgdGFyZ2V0Lm9ubW91c2VlbnRlciA9IHRhcmdldC5jbGljawoJfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmltcG9ydC50b3BpYyhjYW4pCgkJdGFyZ2V0LmlubmVySFRNTCA9IGNhbi51c2VyLnRpbWUoY2FuLCBudWxsLCAiJXcgJUg6JU06JVMiKQoJfSwKCWF2YXRhcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXZhdGFyKSB7IGlmIChjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5BVkFUQVIsIFthdmF0YXJdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5hdmF0YXIgPSBhdmF0YXIsIGNhbi5vbmltcG9ydC5fYXZhdGFyKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIHRvcGljKSB7IHRvcGljICYmIChjYW4uX3RvcGljID0gdG9waWMpCgkJdG9waWMgPSBjYW4uX3RvcGljIHx8IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVE9QSUMpIHx8IFZvbGNhbm9zLm1ldGEuYXJncy50b3BpYyB8fCAoY2FuLmJhc2UuaXNOaWdodCgpPyBjaGF0LkJMQUNLOiBjaGF0LldISVRFKQoJCWNhbi5yZXF1aXJlKFsiL2NoYXQvdG9waWMvIit0b3BpYysiLmNzcyJdKQoJCWNhbi51c2VyLnRvcGljKGNhbiwgdG9waWMpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYmFja2dyb3VuZCkgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuQkFDS0dST1VORCwgW2JhY2tncm91bmRdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZCwgY2FuLm9uaW1wb3J0Ll9iYWNrZ3JvdW5kKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCW1lbnU6IGZ1bmN0aW9uKGNhbiwgY21kcywgY2IsIHRyYW5zKSB7IGNhbi5iYXNlLmlzU3RyaW5nKGNtZHMpICYmIChjbWRzID0gW2NtZHNdKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBjbWRzWzBdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKGNtZHMuc2xpY2UoMSksIFtjbWRzWzBdXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pKSB7CgkJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0sIHRyYW5zKV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgW2l0ZW1dKQoJCQkJCS8vIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIGNtZHMpCgkJCQl9fQoKCQkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc0FycmF5KGl0ZW0pKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHJldHVybiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlLCB0cmFucykgfSkKCQkJCXJldHVybiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIGNhbi51c2VyLnRyYW5zKGNhbiwgbGlzdFswXSwgdHJhbnMpXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LnNsaWNlKDEpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhLCBpbmRleCkgewoJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtW2luZGV4KzFdLCBpdGVtKQoJCQkJCX0sIHRyYW5zKQoJCQkJfX0KCgkJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QoaXRlbSkpIHsKCQkJCXJldHVybiBpdGVtCgkJCX0KCQl9KSB9XSkuZmlyc3QKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJ0b3BpYyI6IHNoeSgi5Li76aKYIiwgewoJCSJkZW1vIjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgY21kc1swXSkgfSwKCX0sIFsidG9waWM6c2VsZWN0PXdoaXRlLGJsYWNrIiwgInJ1bjpidXR0b24iLCAiZGVtbzpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4ub25pbXBvcnQudG9waWMoY2FuLCBjbWRzWzBdKQoJfSksCgkiY29va2llIjogc2h5KCLmj5DnpLoiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm1pc2MuQ29va2llKGNhbiksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJbXNnLlB1c2goImtleSIsIGtleSksIG1zZy5QdXNoKCJ2YWx1ZSIsIHZhbHVlKQoJCX0pCgl9KSwKCSJhbGVydCI6IHNoeSgi5o+Q56S6Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLnVzZXIuYWxlcnQoY21kc1swXSkKCX0pLAoJImluZm8iOiBzaHkoIuS/oeaBryIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJImxvZyI6IHNoeSgi5pel5b+XIiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljb25zb2xlLmxvZyhjbWRzWzBdKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogW1sic2V0dGluZyIsIGNoYXQuQkxBQ0ssIGNoYXQuV0hJVEUsIGNoYXQuUFJJTlQsIGNvZGUuV0VCUEFDSywgInRvaW1hZ2UiLCBjdHguQ09ORklHXV0sCglfdHJhbnM6IHsKCQkic2VhcmNoIjogIuaQnOe0oiIsCgoJCSJzZXR0aW5nIjogIuiuvue9riIsCgkJImJsYWNrIjogIum7keiJsuS4u+mimCIsCgkJIndoaXRlIjogIueZveiJsuS4u+mimCIsCgkJInByaW50IjogIuaJk+WNsOS4u+mimCIsCgkJIndlYnBhY2siOiAi5omT5YyF6aG16Z2iIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoJCSJjb25maWciOiAi5ouJ5Y+W6YWN572uIiwKCgkJInNoYXJldXNlciI6ICLlhbHkuqvnlKjmiLciLAoJCSJzZXRuaWNrIjogIuiuvue9ruaYteensCIsCgkJInBhc3N3b3JkIjogIuS/ruaUueWvhueggSIsCgkJImxhbmd1YWdlIjogIuivreiogOWcsOWMuiIsICJjaGluZXNlIjogIuS4reaWhyIsCgkJImNsZWFyIjogIua4hemZpOiDjOaZryIsCgkJImxvZ291dCI6ICLpgIDlh7rnmbvlvZUiLAoJfSwKCW9ubWFpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmICghY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBtc2cuT3B0aW9uKGFhYS5VU0VSTklDSyl8fG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpKSB7CgkJCQltc2cuT3B0aW9uKGNoYXQuU1NPKT8gY2FuLnVzZXIuanVtcHMobXNnLk9wdGlvbihjaGF0LlNTTykpOiBjYW4udXNlci5sb2dpbihjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OTUFJTiwgbXNnKQoJCQkJfSwgbXNnLk9wdGlvbihhYWEuTE9HSU4pLCBtc2cuT3B0aW9uKCJsb2dpbi5kZXYiKSkKCQkJCXJldHVybiAvLyDnmbvlvZXorqTor4EKCQkJfQoJCQljYW4uYmFzZS5Db3B5KGNhbi5vbmFjdGlvbi5fdHJhbnMsIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuVFJBTlMpLCB7fSkpCgkJCWNhbi51c2VyLmluZm8udXNlcm5pY2sgPSBjYW4uQ29uZihhYWEuVVNFUk5JQ0spLCBjYW4udXNlci5pbmZvLmF2YXRhciA9IG1zZy5PcHRpb24oYWFhLkFWQVRBUiksIGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9IG1zZy5PcHRpb24oYWFhLkJBQ0tHUk9VTkQpCgkJCWNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBhYWEuTEFOR1VBR0UpfHxtc2cuT3B0aW9uKGFhYS5MQU5HVUFHRSkKCQkJbXNnLk9wdGlvbihuZnMuU0NSSVBUKSAmJiBjYW4ucmVxdWlyZShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihuZnMuU0NSSVBUKSksIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25hY3Rpb24uc291cmNlKGNhbiwgbXNnKSB9KSAKCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05MT0dJTiwgbXNnKSB9LCBjYW4uX291dHB1dCkKCQl9KQoJfSwKCW9uc2VhcmNoZm9jdXM6IGZ1bmN0aW9uKGNhbikgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgWyJkaXYuc2VhcmNoIiwgaHRtbC5JTlBVVF0sIGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQuZm9jdXMoKSB9KSB9LAoJb253ZWJwYWNrOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25hY3Rpb25bY29kZS5XRUJQQUNLXShtc2cuX2V2ZW50LCBjYW4pIH0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgeyBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSB9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikgfSwKCgl0aXRsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge307IGNhbi5jb3JlLkxpc3QoW2NoYXQuVElUTEUsIGNoYXQuVE9QSUMsIGNoYXQuTEFZT1VUXSwgZnVuY3Rpb24oa2V5KSB7CgkJCXZhciB2YWx1ZSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSk7IHZhbHVlICYmIChhcmdzW2tleV0gPSB2YWx1ZSkKCQl9KQoJCWNhbi51c2VyLmp1bXBzKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncywgdHJ1ZSkpCgl9LAoKCWJsYWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXdoaXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXByaW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgW2NoYXQuV0hJVEUsIGJ1dHRvbl0pLCBjYW4uc2V0Uml2ZXIoaHRtbC5IRUlHSFQsICIiKSwgY2FuLnNldEFjdGlvbihodG1sLkhFSUdIVCwgIiIpIH0sCgl3ZWJwYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IGNhbi51c2VyLnRpdGxlKCl9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uY29yZS5JdGVtKFZvbGNhbm9zLm1ldGEucGFjaywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgCgkJCQljYW4uY29yZS5MaXN0KFsiX2V2ZW50IiwgIl9jYW4iLCAiX3hociIsIGljZS5NU0dfU0VTU0lELCAiIl0sIGZ1bmN0aW9uKGtleSkgeyBkZWxldGUobXNnW2tleV0pIH0pCgkJCX0pCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgewoJCQkJdG9waWM6IGNhbi5fdG9waWMsIGxheW91dDogIGNhbi5nZXRBY3Rpb24oY2hhdC5MQVlPVVQpLAoJCQkJcml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSksCgkJCQluYW1lOiBkYXRhLm5hbWUsIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KFZvbGNhbm9zLm1ldGEucGFjayksCgkJCQlhcmdzOiAibmFtZSx0b3BpYyxsYXlvdXQscml2ZXIsc3Rvcm0iLAoJCQl9KQoKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIuaJk+WMheS4rS4uLiIsIGNvZGUuV0VCUEFDSykKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5XRUJQQUNLLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQl0b2FzdC5jbG9zZSgpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5omT5YyF5oiQ5YqfIiwgY29kZS5XRUJQQUNLKQoJCQkJY2FuLnVzZXIuZG93bmxvYWQoY2FuLCAiL3NoYXJlL2xvY2FsLyIrbXNnLlJlc3VsdCgpLCBuYW1lLCBuZnMuSFRNTCkKCQkJfSkKCQl9KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi51c2VyLnRpdGxlKCksIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCWNvbmZpZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogInNjb3BlIiwgdmFsdWU6ICJldGMvbG9jYWwuc2h5In1dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT05GSUcsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci5qdW1wcyhtc2cuUmVzdWx0KCkpIH0pCgkJfSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBsaXN0LCBjYikKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXJncykgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0uY29uY2F0KGFyZ3N8fFtdLCBbY2hhdC5SSVZFUiwgY2FuLkNvbmYoY2hhdC5SSVZFUil8fCIiLCBjaGF0LlNUT1JNLCBjYW4uQ29uZihjaGF0LlNUT1JNKXx8IiJdKSkKCX0sCgoJdXNlcm5pY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBbInNoYXJldXNlciIsICJzZXRuaWNrIiwgYWFhLlBBU1NXT1JELCBbYWFhLkxBTkdVQUdFLCBhYWEuQ0hJTkVTRSwgYWFhLkVOR0xJU0hdLCBjbGkuQ0xFQVIsIGFhYS5MT0dPVVRdKQoJfSwKCXNoYXJldXNlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRSwgbWRiLlRZUEUsIGFhYS5MT0dJTl0pCgl9LAoJc2V0bmljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogYWFhLlVTRVJOSUNLLCB2YWx1ZTogY2FuLkNvbmYoYWFhLlVTRVJOSUNLKX1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5VU0VSTklDSywgW2xpc3RbMF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBhYWEuVVNFUk5JQ0spLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaXRlbSwgY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBsaXN0WzBdKSkKCQkJCX0pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCglwYXNzd29yZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IGh0bWwuUEFTU1dPUkQsIHR5cGU6IGh0bWwuUEFTU1dPUkQsIGFjdGlvbjogaWNlLkFVVE99LAoJCQl7bmFtZTogaHRtbC5QQVNTV09SRCwgdHlwZTogaHRtbC5QQVNTV09SRCwgYWN0aW9uOiBpY2UuQVVUT30sCgkJXSwgZnVuY3Rpb24obGlzdCkgewoJCQlpZiAobGlzdFswXSAhPSBsaXN0WzFdKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sICLlr4bnoIHkuI3kuIDoh7QiKSwgdWkuZm9jdXMoKSwgdHJ1ZSB9CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5QQVNTV09SRCwgW2xpc3RbMF1dKQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCgljaGluZXNlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIGFhYS5MQU5HVUFHRSwgInpoIikgfSwKCWVuZ2xpc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwgYWFhLkxBTkdVQUdFLCAiZW4iKSB9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmJhY2tncm91bmQoZXZlbnQsIGNhbiwgIiIpLCBjYW4ub25pbXBvcnQuYXZhdGFyKGV2ZW50LCBjYW4sICIiKSB9LAoJbG9nb3V0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmxvZ291dChjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRIZWlnaHQgfSwKCXRvcGljOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdG9waWMgfSwKCWF2YXRhcjogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYXZhdGFyID09ICJ2b2lkIikgewoJCQlyZXR1cm4gIiIKCQl9CgkJcmV0dXJuIGNhbi51c2VyLmluZm8uYXZhdGFyCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9PSAidm9pZCIpIHsKCQkJcmV0dXJuICIiCgkJfQoJCXJldHVybiBjYW4udXNlci5pbmZvLmJhY2tncm91bmQKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL3JpdmVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ucml2ZXJfbGlzdCA9IHt9LCBjYW4uc3Rvcm1fbGlzdCA9IHt9CgkJY2FuLm9uaW1wb3J0Ll9tYWluKGNhbiwgbXNnKSwgY2FuLm9uaW1wb3J0Ll9tZW51KGNhbiwgbXNnKQoKCQl2YXIgc2VsZWN0OyBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCXJldHVybiBjYW4ub25pbXBvcnQuX3JpdmVyKGNhbiwgaXRlbSwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkoaW5kZXggPT0gMCB8fCBpdGVtLmhhc2ggPT0gY2FuLl9tYWluX3JpdmVyKSAmJiAoc2VsZWN0ID0gdGFyZ2V0KQoJCQl9KQoJCX0pKSwgc2VsZWN0ICYmIHNlbGVjdC5jbGljaygpCgl9LAoJX21haW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJLy8gaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IGNhbi5fbWFpbl9yaXZlciA9ICJwcm9kdWN0IiwgY2FuLl9tYWluX3N0b3JtID0gIm9mZmljZSIgfQoJCS8vIGlmIChjYW4udXNlci5pc1dlaVhpbikgeyBjYW4uX21haW5fcml2ZXIgPSAic2VydmljZSIsIGNhbi5fbWFpbl9zdG9ybSA9ICJ3eCIgfQoJCWNhbi5fbWFpbl9yaXZlciA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuUklWRVIpfHxtc2cuT3B0aW9uKGljZS5NU0dfUklWRVIpfHxWb2xjYW5vcy5tZXRhLmFyZ3Mucml2ZXJ8fGNhbi5fbWFpbl9yaXZlcnx8InByb2plY3QiCgkJY2FuLl9tYWluX3N0b3JtID0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TVE9STSl8fG1zZy5PcHRpb24oaWNlLk1TR19TVE9STSl8fFZvbGNhbm9zLm1ldGEuYXJncy5zdG9ybXx8Y2FuLl9tYWluX3N0b3JtfHwic3R1ZGlvIgoJfSwKCV9tZW51OiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIubW9kLmlzUG9kfHxjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5zZXRIZWFkZXJNZW51KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpLCBjYW4uQ29uZihjaGF0Lk1FTlVTKXx8Y2FuLm9uZGV0YWlsLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmRldGFpbCwgYnV0dG9uXSwgW2V2ZW50LCBjYW4sIGJ1dHRvbiwgY2FuLkNvbmYoY2hhdC5SSVZFUiksIGNhbi5Db25mKGNoYXQuU1RPUk0pXSkKCQl9KQoJfSwKCV9jYXJ0ZTogZnVuY3Rpb24oY2FuLCBsaXN0LCByaXZlciwgc3Rvcm0pIHsgaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJaWYgKGNhbi5jb3JlLlZhbHVlKGNhbi5fcm9vdCwgY2FuLmNvcmUuS2V5cyhjaGF0LlJJVkVSLCByaXZlcikpKSB7IHJldHVybiB9CgoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtb2R1bGUpIHsKCQkJbW9kdWxlW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pCgkJfSkKCX0sCglfcml2ZXI6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgY2IpIHsKCQlyZXR1cm4ge3RleHQ6IFttZXRhLm5hbWUsIGh0bWwuRElWLCBodG1sLklURU1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uc3Rvcm0oZXZlbnQsIGNhbiwgbWV0YS5oYXNoKQoKCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5fY2FydGUoY2FuLCBjYW4ub25kZXRhaWwubGlzdCwgbWV0YS5oYXNoKQoKCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCWNhbi5yaXZlcl9saXN0W21ldGEuaGFzaF0gPSB0YXJnZXQsIGNiKHRhcmdldCkKCQl9fQoJfSwKCV9zdG9ybTogZnVuY3Rpb24oY2FuLCBtZXRhLCByaXZlcikgewoJCXJldHVybiB7dGV4dDogW21ldGEubmFtZSwgaHRtbC5ESVYsIGh0bWwuSVRFTV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFjdGlvbi5hY3Rpb24oZXZlbnQsIGNhbiwgcml2ZXIsIG1ldGEuaGFzaCkKCgkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25pbXBvcnQuX2NhcnRlKGNhbiwgY2FuLm9uZGV0YWlsLnN1Ymxpc3QsIHJpdmVyLCBtZXRhLmhhc2gpCgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJY2FuLnN0b3JtX2xpc3RbY2FuLmNvcmUuS2V5cyhyaXZlciwgbWV0YS5oYXNoKV0gPSB0YXJnZXQKCQl9fQoJfSwKCWRpc3BsYXk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgc2hvdyA9IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCk7IGNhbi5vbmxheW91dC5faW5pdChjYW4pOyByZXR1cm4gc2hvdwoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLop6PmnpDlvJXmk44iLCBfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJdmFyIGxpc3QgPSBjYW4uX3Jvb3Qucml2ZXIKCWNtZHMubGVuZ3RoID09IDAgJiYgY2FuLmNvcmUuSXRlbVNvcnQobGlzdCwgIm9yZGVyIiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCWlmIChjYW4uY29yZS5JdGVtKHZhbHVlLnN0b3JtKS5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCW1zZy5QdXNoKHtoYXNoOiBrZXksIG5hbWU6IGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIj8ga2V5OiB2YWx1ZS5uYW1lfSkgLy8g576k57uE5YiX6KGoCgl9KTsgaWYgKGNtZHMubGVuZ3RoICE9IDEgJiYgY21kc1sxXSAhPSBjaGF0LlNUT1JNKSB7IHJldHVybiBmYWxzZSB9CgoJdmFyIHJpdmVyID0gbGlzdFtjbWRzWzBdXTsgaWYgKCFyaXZlcikgeyByZXR1cm4gZmFsc2UgfQoJY2FuLmNvcmUuSXRlbVNvcnQocml2ZXIuc3Rvcm0sICJvcmRlciIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQltc2cuUHVzaCh7aGFzaDoga2V5LCBuYW1lOiBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IGtleTogdmFsdWUubmFtZX0pIC8vIOW6lOeUqOWIl+ihqAoJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKTsgcmV0dXJuIHRydWUKfX0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwgbGlzdDogWyJjcmVhdGUiLCAic2hhcmUiLCAicmVmcmVzaCJdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLnJ1bih7fSwgW10sIGZ1bmN0aW9uKG1zZykgeyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX1JJVkVSKSA9PSAiX3NoYXJlIikgeyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2csIG51bGwsIGNhbi5fb3V0cHV0KSwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4uQ29uZihjdHguQUNUSU9OKXx8Y2FuLm9uYWN0aW9uLmxpc3QpCgkJCWlmIChjYW4udXNlci5tb2QuaXNQb2QgfHxjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl90YXJnZXQsIHRydWUpCgkJfSkKCX0sCglvbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQlpZiAod29yZFswXSA9PSBjaGF0LlNUT1JNKSB7IGNhbi5vbmV4cG9ydC5zdG9ybShjYW4sIG1zZywgd29yZCkgfQoJfSwKCW9uc3Rvcm1fc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGN0eC5BUkdTLCBKU09OLnN0cmluZ2lmeSh7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSkgfQoJfSwKCW9uYWN0aW9uX3RvdWNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuKQoJfSwKCW9uYWN0aW9uX25vdG9vbDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5vbmRldGFpbFsi5re75Yqg5bel5YW3Il0obXNnLl9ldmVudCwgY2FuLCAi5re75Yqg5bel5YW3Iiwgcml2ZXIsIHN0b3JtKQoJfSwKCgljYXJ0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbGlzdCwgY2IpIHsKCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgbGlzdCwgY2IpCgl9LAoJc3Rvcm06IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyKSB7IGNhbi5zdWJsaXN0ID0gY2FuLnN1Ymxpc3R8fHt9CgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9JVEVNLCBjYW4ucml2ZXJfbGlzdFtyaXZlcl0pCgkJdmFyIGxpc3QgPSBjYW4uc3VibGlzdFtyaXZlcl07IGlmIChsaXN0KSB7IHJldHVybiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCkgfQoKCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuU1RPUk1dLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHNlbGVjdCA9IDA7IGxpc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IG1zZy5UYWJsZShmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQkJcml2ZXIgPT0gY2FuLl9tYWluX3JpdmVyICYmIGl0ZW0uaGFzaCA9PSBjYW4uX21haW5fc3Rvcm0gJiYgKHNlbGVjdCA9IGluZGV4KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fc3Rvcm0oY2FuLCBpdGVtLCByaXZlcikKCQkJfSkgfV0pLmZpcnN0LCBsaXN0LmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgbGlzdC5jaGlsZHJlbltzZWxlY3RdLmNsaWNrKCkKCgkJCWV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4uX291dHB1dC5pbnNlcnRCZWZvcmUobGlzdCwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCQljYW4uc3VibGlzdFtyaXZlcl0gPSBsaXN0CgkJfSkKCX0sCglhY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnN1Ymxpc3Rbcml2ZXJdLCB7ZGlzcGxheTogaHRtbC5CTE9DS30pCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9JVEVNLCBjYW4ucml2ZXJfbGlzdFtyaXZlcl0pCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfSVRFTV0sIGNhbi5zdG9ybV9saXN0W2Nhbi5jb3JlLktleXMocml2ZXIsIHN0b3JtKV0pCgoJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNUT1JNX1NFTEVDVCwgY2FuLnJlcXVlc3QoZXZlbnQsIHsKCQkJCXJpdmVyOiBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIHN0b3JtOiBjYW4uQ29uZihjaGF0LlNUT1JNLCBzdG9ybSksCgkJCX0pKQoJCX0pCgl9LAoKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnRyYW5zKGNhbiwgeyJwdWJsaWMiOiAi5YWs5byA576kIiwgInByb3RlY3RlZCI6ICLlhoXpg6jnvqQiLCAicHJpdmF0ZSI6ICLnp4HmnInnvqQifSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbCgkJCXtuYW1lOiBtZGIuVFlQRSwgdmFsdWVzOiBbY2hhdC5QVUJMSUMsIGNoYXQuUFJPVEVDVEVELCBjaGF0LlBSSVZBVEVdLCBfdHJhbnM6ICLnsbvlnosifSwKCQkJe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogImhpIiwgX3RyYW5zOiAi576k5ZCNIn0sIHtuYW1lOiBtZGIuVEVYVCwgdmFsdWU6ICJoZWxsbyIsIF90cmFuczogIueugOS7iyJ9LAoJCV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncywgZnVuY3Rpb24obXNnKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogbXNnLlJlc3VsdCgpfSkgfSkKCQl9KQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IGNhbi5Db25mKGNoYXQuU1RPUk0pfV0sIFttZGIuVFlQRSwgY2hhdC5TVE9STV0pCgl9LAoJcmVmcmVzaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge3JpdmVyOiBjYW4uQ29uZihjaGF0LlJJVkVSKSwgc3Rvcm06IGNhbi5Db25mKGNoYXQuU1RPUk0pLCB0b3BpYzogY2FuLmdldEhlYWRlcihjaGF0LlRPUElDKSwgbGF5b3V0OiBjYW4uZ2V0QWN0aW9uKGNoYXQuTEFZT1VUKX0KCQlpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY3R4LkFSR1MsIEpTT04uc3RyaW5naWZ5KGFyZ3MpKSB9CgkJY2FuLm1pc2MuU2VhcmNoKGNhbiwgYXJncykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi6I+c5Y2V5Lqk5LqSIiwKCWxpc3Q6IFsi5YWx5Lqr576k57uEIiwgIua3u+WKoOW6lOeUqCIsICLmt7vliqDorr7lpIciLCAi5re75Yqg55So5oi3IiwgIumHjeWRveWQjee+pOe7hCIsICLliKDpmaTnvqTnu4QiXSwKCXN1Ymxpc3Q6IFsi5YWx5Lqr5bqU55SoIiwgIua3u+WKoOW3peWFtyIsICLkv53lrZjlj4LmlbAiLCAi6YeN5ZG95ZCN5bqU55SoIiwgIuWIoOmZpOW6lOeUqCJdLAoJLy8gX21lbnVzOiBbCgkvLyAJWyJjcmVhdGUiLCAi5Yib5bu6576k57uEIiwgIua3u+WKoOW6lOeUqCIsICLmt7vliqDlt6XlhbciLCAi5re75Yqg6K6+5aSHIiwgIuWIm+W7uuepuumXtCJdLAoJLy8gCVsic2hhcmUiLCAi5YWx5Lqr576k57uEIiwgIuWFseS6q+W6lOeUqCIsICLlhbHkuqvlt6XlhbciLCAi5YWx5Lqr6K6+5aSHIiwgIuiuv+mXruepuumXtCJdLAoJLy8gXSwKCgki5Yib5bu6576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pIH0sCgki5YWx5Lqr576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiByaXZlcn1dLCBbbWRiLlRZUEUsIGNoYXQuUklWRVJdKQoJfSwKCSLmt7vliqDlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7IGNhbi5vbmRldGFpbC5jcmVhdGUoZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgfSwKCSLlhbHkuqvlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBzdG9ybX1dLCBbbWRiLlRZUEUsIGNoYXQuU1RPUk1dKQoJfSwKCSLmt7vliqDlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBjdHguQ09NTUFORCwgImNvbnRleHQsY29tbWFuZCIsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuSEFTSCwgc3Rvcm1dLmNvbmNhdChbaWNlLlBPRCwgIiIsIGljZS5DVFgsIGl0ZW1bMF0sIGljZS5DTUQsIGl0ZW1bMV1dKSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSB9KQoJfSwKCSLlhbHkuqvlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBtZGIuUExVR0lOLCAibmFtZSxjb250ZXh0LGNvbW1hbmQsYXJndW1lbnQiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbcml2ZXIsIGN0eC5BQ1RJT04sIGNoYXQuU0hBUkUsIG1kYi5UWVBFLCBjaGF0LkZJRUxELAoJCQkJbWRiLk5BTUUsIGl0ZW1bMl0sIG1kYi5URVhULCBpdGVtWzNdLCBjaGF0LlRJVExFLCBpdGVtWzBdLCBjaGF0LlJJVkVSLCByaXZlciwgY2hhdC5TVE9STSwgc3Rvcm0sCgkJCV0pCgkJfSkKCX0sCgoJIua3u+WKoOiuvuWkhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgd2ViLlNQQUNFLCAidHlwZSxuYW1lLHRleHQiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5OT0RFLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuVFlQRSwgaXRlbVswXSwgbWRiLk5BTUUsIGl0ZW1bMV1dLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCgki5YWx5Lqr6K6+5aSHIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuSU5WSVRFLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U2NyaXB0KGNhbiwgbXNnLlJlc3VsdCgpLCBidXR0b24pIH0pCgl9LAoJIuWIm+W7uuepuumXtCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBidXR0b259KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogIm5hbWUiLCB2YWx1ZTogImhpIn0sIHtuYW1lOiAicmVwb3MifSwge25hbWU6ICJ0ZW1wbGF0ZSJ9XSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjbGkuU1RBUlQsIGFyZ3MuY29uY2F0KGNoYXQuUklWRVIsIHJpdmVyKSwgZnVuY3Rpb24obXNnKSB7CgkJCQl2YXIgbGluayA9IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogY2FuLmNvcmUuS2V5cyhjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgbXNnLk9wdGlvbihtZGIuTkFNRSkpfSkKCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgbGluayksIGNhbi51c2VyLm9wZW4obGluaykKCQkJfSkKCQl9KQoJfSwKCSLorr/pl67nqbrpl7QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdCh7cml2ZXI6IHJpdmVyfSwgY2FuLCB3ZWIuU1BBQ0UsICJ0aW1lLHR5cGUsbmFtZSx0ZXh0IikKCX0sCgoJIua3u+WKoOeUqOaItyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgY2hhdC5VU0VSLCAidXNlcm5pY2ssdXNlcm5hbWUiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5VU0VSLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBhYWEuVVNFUk5BTUUsIGl0ZW1bMF1dLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCgki6YeN5ZG95ZCN576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHJpdmVyfSksIG1kYi5NT0RJRlksIFttZGIuTkFNRSwgZGF0YS5uYW1lXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXJ9KSB9KQoJCX0pCgl9LAoJIuWIoOmZpOe+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogcml2ZXJ9KSwgbWRiLlJFTU9WRSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6ICIiLCBzdG9ybTogIiJ9KSB9KQoJfSwKCgki5L+d5a2Y5Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4uZ2V0QWN0aW9uKGN0eC5BUkdTLCBmdW5jdGlvbihpdGVtLCBuZXh0LCBpbmRleCwgYXJyYXkpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9LCB7aGFzaDogc3Rvcm0sIGlkOiBpdGVtLmRhdGFzZXQuaWR9KQoJCQl2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdChjYW4sIChpbmRleCsxKStpY2UuUFMrYXJyYXkubGVuZ3RoLCBidXR0b24sIDEwMDAwLCAoaW5kZXgrMSkqMTAwL2FycmF5Lmxlbmd0aCkKCQkJY2FuLnJ1bihtc2csIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLk1PRElGWSwgaWNlLkFSRywgaXRlbS5kYXRhc2V0LmFyZ3NdLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCXRvYXN0LmNsb3NlKCksIG5leHQoKSwgaW5kZXggPT0gYXJyYXkubGVuZ3RoLTEgJiYgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgYnV0dG9uKQoJCQkJfSkKCQkJfSkKCQl9KQoJfSwKCSLph43lkb3lkI3lupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHN0b3JtfSksIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLk1PRElGWV0uY29uY2F0KGFyZ3MpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBzdG9ybX0pCgkJCX0pCgkJfSkKCX0sCgki5Yig6Zmk5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogc3Rvcm19KSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuUkVNT1ZFXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiAiIn0pCgkJfSkKCX0sCgoKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLnRyYW5zKGNhbiwgeyJwdWJsaWMiOiAi5YWs5byA5bqU55SoIiwgInByb3RlY3RlZCI6ICLnvqTnu4TlupTnlKgiLCAicHJpdmF0ZSI6ICLkuKrkurrlupTnlKgifSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbCgkJCXtuYW1lOiBtZGIuVFlQRSwgdmFsdWVzOiBbY2hhdC5QVUJMSUMsIGNoYXQuUFJPVEVDVEVELCBjaGF0LlBSSVZBVEVdLCBfdHJhbnM6ICLnsbvlnosifSwKCQkJe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogImhpIiwgX3RyYW5zOiAi5ZCN56ewIn0sIHtuYW1lOiBtZGIuVEVYVCwgdmFsdWU6ICJoZWxsbyIsIF90cmFuczogIueugOS7iyJ9LAoJCV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuQ1JFQVRFXS5jb25jYXQoYXJncyksIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06IG1zZy5SZXN1bHQoKX0pCgkJCX0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXdpZHRoOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldFdpZHRoIH0sCglzdG9ybTogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQl2YXIgZmllbGRzID0gKG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KCIsIikKCQljYW4uY29yZS5JdGVtKGNhbi5fcm9vdC5yaXZlciwgZnVuY3Rpb24ocml2ZXIsIHZhbHVlKSB7CgkJCWNhbi5jb3JlLkl0ZW0odmFsdWUuc3Rvcm0sIGZ1bmN0aW9uKHN0b3JtLCBpdGVtKSB7CgkJCQlpZiAod29yZFsxXSAhPSAiIiAmJiB3b3JkWzFdICE9IHN0b3JtICYmIHdvcmRbMV0gIT0gaXRlbS5uYW1lKSB7IHJldHVybiB9CgoJCQkJdmFyIGRhdGEgPSB7Y3R4OiAiY2FuIiwgY21kOiAiU3Rvcm0iLAoJCQkJCXR5cGU6IHJpdmVyLCBuYW1lOiBzdG9ybSwgdGV4dDogc2h5KCLot7PovawiLCBmdW5jdGlvbihldmVudCkgewoJCQkJCQljYW4ub25hY3Rpb24uYWN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBzdG9ybSkKCQkJCQl9KSwKCQkJCX07IGNhbi5jb3JlLkxpc3QoZmllbGRzLCBmdW5jdGlvbihrZXkpIHsgbXNnLlB1c2goa2V5LCBkYXRhW2tleV18fCIiKSB9KQoJCQl9KQoJCX0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wYW5lbC9zZWFyY2guanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBsaXN0LCBjYiwgdGFyZ2V0KSB7CgkJY2FuLl9mb3JlYWNoID0gIioiCgkJY2FuLl9mb3JlYWNoID0gImNvbW1hbmQsc3BhY2UsdGV4dCIKCQljYW4ubGlzdCA9IG1zZy5UYWJsZSgpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCkKCQl2YXIgdGFibGUgPSBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgeyBjYW4uU3RhdHVzKG1kYi5UT1RBTCwgaW5kZXgrMSkKCQkJcmV0dXJuIHt0ZXh0OiBba2V5ID09IG1kYi5URVhUICYmIGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpICYmIGxpbmUudGV4dC5oZWxwIHx8IHZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbltjYW4udHlwZSA9PSBjYW4uX2ZvcmVhY2h8fGV2ZW50LmN0cmxLZXk/IGNoYXQuUExVR0lOOiBtZGIuU0VMRUNUXShldmVudCwgY2FuLCBpbmRleCkgCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQsIGNhbi5jb3JlLkxpc3QoKG1zZy5PcHRpb24oInNvcnQiKXx8ImN0eCxjbWQsdHlwZSxuYW1lLHRleHQiKS5zcGxpdChpY2UuRlMpLCBmdW5jdGlvbihpdGVtKSB7CgkJCXJldHVybiBsaXN0LmluZGV4T2YoaXRlbSkKCQl9KSk7IHRhYmxlICYmIGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuZGlzcGxheSwgdGFibGUub2Zmc2V0V2lkdGgpCgoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkEsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIub3BlbihpdGVtLmhyZWYpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkgfQoJCX0pLCBjYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpLCBbXSkuY29uY2F0KHtuYW1lOiAic2VsZWN0ZWQiLCB2YWx1ZTogIjAifSkpCgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLnVpLnByb2ZpbGUuaW5uZXJIVE1MID09ICIiICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCBodG1sLlREKVswXS5jbGljaygpCgl9LAoJX3dvcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpIHsgY2FuLnR5cGUgPSBjbWRzWzBdCgkJdmFyIGNiID0gY2FuLm9uYWN0aW9uW2NtZHNbMV1dOyBpZiAoY2IpIHsgY2Ioe30sIGNhbik7IHJldHVybiB9CgoJCXZhciByZXMgPSBjYW4ucmVxdWVzdCh7fSwgewoJCQl3b3JkOiBjbWRzLCBmaWVsZHM6IGZpZWxkcy5qb2luKGljZS5GUyksIHNvcnQ6IG1zZy5PcHRpb24oInNvcnQiKSwKCQkJcml2ZXI6IG1zZy5PcHRpb24oY2hhdC5SSVZFUiksIGluZGV4OiBtc2cuT3B0aW9uKG1kYi5JTkRFWCksCgkJfSkKCgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TRUFSQ0gsIHJlcykKCQljYW4ucnVuKHJlcywgY21kcywgZnVuY3Rpb24ocmVzKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIHJlcywgZmllbGRzKSB9KQoJCWNhbi5vbm1vdGlvbi5zaG93KGNhbiksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBjYW4udWkud29yZCkKCQl9KQoJfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYikgeyBjYW4udWkud29yZC52YWx1ZSA9IGNtZHNbMV0KCQl2YXIgZmllbGRzID0gKGNtZHNbMl18fG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KGljZS5GUykKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dGg6IGZpZWxkc31dKSwgY2FuLmNiID0gZnVuY3Rpb24oKSB7CgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoY2FuLm9uZXhwb3J0LnNlbGVjdChjYW4pKSwgY2FuLm9ubW90aW9uLmhpZGUoY2FuKQoJCX0KCgkJY2FuLmlucHV0ID0gZnVuY3Rpb24oZXZlbnQsIHdvcmQpIHsgY21kc1sxXSA9IHdvcmR8fGNtZHNbMV0KCQkJY2FuLm9uaW1wb3J0Ll93b3JkKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpCgkJfSwgY2FuLm9uaW1wb3J0Ll93b3JkKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpCgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wLCBsZWZ0LCB3aWR0aCwgaGVpZ2h0KSB7CgkJCWNhbi5Db25mSGVpZ2h0KGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVC0yKmh0bWwuUExVR0lOX01BUkdJTikKCQkJY2FuLkNvbmZXaWR0aCh3aWR0aC0yKmh0bWwuUExVR0lOX01BUkdJTikKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwge3RvcDogdG9wLCBsZWZ0OiBsZWZ0fSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIGxpc3Q6IFtjbGkuQ0xPU0UsIGNsaS5DTEVBUiwgY2xpLkRPTkVdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJb25sb2dpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5Db25mKGh0bWwuQUNUSU9OKXx8Y2FuLm9uYWN0aW9uLmxpc3QpCgkJY2FuLnVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFsKCQkJe2lucHV0OiBbIndvcmQiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJCWlmIChldmVudC5jdHJsS2V5KSB7CgkJCQkJaWYgKGV2ZW50LmtleSA9PSAiMCIpIHsKCQkJCQkJY2FuLm9uYWN0aW9uLmNsZWFyKGV2ZW50LCBjYW4pCgkJCQkJfQoJCQkJCWlmICgiMSIgPD0gZXZlbnQua2V5ICYmIGV2ZW50LmtleSA8PSAiOSIpIHsKCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIsIGluZGV4KSB7CgkJCQkJCQlpZiAoaW5kZXgrMSA9PSBldmVudC5rZXkpIHsKCQkJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIGluZGV4KSB7CgkJCQkJCQkJCWluZGV4ID09IDAgJiYgdGQuY2xpY2soKQoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCX0KCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRlKGNhbikgfQoKCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJCQlpZiAoZXZlbnQuc2hpZnRLZXkpIHsgdmFyIGZpcnN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIpWzFdCgkJCQkJCXJldHVybiBjYW4ub25hY3Rpb25bY2FuLnR5cGUgPT0gY2FuLl9mb3JlYWNoPyBjaGF0LlBMVUdJTjogaHRtbC5TRUxFQ1RdKGV2ZW50LCBjYW4sIGZpcnN0LmRhdGFzZXQuaW5kZXgpCgkJCQkJfQoJCQkJCWlmIChldmVudC5jdHJsS2V5KSB7IHJldHVybiBjYW4ub25hY3Rpb25bY2xpLkRPTkVdKGV2ZW50LCBjYW4pIH0KCQkJCQlyZXR1cm4gY2FuLmlucHV0KGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUpCgkJCQl9CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0cikgewoJCQkJCXZhciBoYXMgPSBmYWxzZTsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7CgkJCQkJCWhhcyA9IGhhcyB8fCB0ZC5pbm5lclRleHQuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpID4gLTEKCQkJCQl9KSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLkhJRERFTiwgIWhhcykKCQkJCX0pCgkJCX1dfSwKCQkJY2hhdC5DT05URU5ULCBodG1sLlNUQVRVUywge3ZpZXc6IFtjaGF0LkRJU1BMQVksIGh0bWwuVEFCTEVdfSwgY2hhdC5QUk9GSUxFLAoJCV0pLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLmRpc3BsYXksIGNoYXQuQ09OVEVOVCkKCX0sCglvbm9wZW5zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0eXBlLCB3b3JkKSB7IGNhbi5vbmltcG9ydC5zZWxlY3QoY2FuLCBtc2csIFt0eXBlfHxjYW4uX2ZvcmVhY2gsIHdvcmR8fCIiXSkgfSwKCgljbGVhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvZmlsZSkgfSwKCWRvbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmJhc2UuaXNGdW5jKGNhbi5jYikgJiYgY2FuLmNiKCkgfSwKCWNsb3NlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5oaWRlKGNhbikgfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGluZGV4KSB7IHZhciBsaW5lID0gY2FuLmxpc3RbaW5kZXhdCgkJaWYgKGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZShjYW4pLCBsaW5lLnRleHQoZXZlbnQpIH0KCgkJdmFyIGZpZWxkcyA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRILCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmlubmVyVGV4dCB9KQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3RkOiBjYW4uY29yZS5MaXN0KGZpZWxkcywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gbGluZVtpdGVtXSB9KSwgZGF0YToge2luZGV4OiBpbmRleH0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJCQljYW4uU3RhdHVzKCJzZWxlY3RlZCIsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSKS5sZW5ndGgtMSkKCQl9fV0pLCBjYW4uU3RhdHVzKCJzZWxlY3RlZCIsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSKS5sZW5ndGgtMSkKCX0sCgoJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgY2FuLCBpbmRleCkgeyB2YXIgbGluZSA9IGNhbi5saXN0W2luZGV4XQoJCWlmIChjYW4uYmFzZS5pc0Z1bmMobGluZS50ZXh0KSkgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGUoY2FuKSwgbGluZS50ZXh0KGV2ZW50KSB9CgkJaWYgKGxpbmUuY3R4ID09ICJ3ZWIud2lraSIgJiYgbGluZS5jbWQgPT0gIndvcmQiKSB7IHJldHVybiB9CgkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuQSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoKCQl2YXIgY21kID0gbGluZS5jbWQgPT0gY3R4LkNPTU1BTkQ/IGNhbi5jb3JlLktleXMobGluZS50eXBlLCBsaW5lLm5hbWUuc3BsaXQoaWNlLlNQKVswXSk6IGNhbi5jb3JlLktleXMobGluZS5jdHgsIGxpbmUuY21kKQoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogInBsdWciLCBpbmRleDogY21kfHxtc2cuT3B0aW9uKG1kYi5JTkRFWCl9LCBmdW5jdGlvbihzdWIsIG1ldGEpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgbWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKSkKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJc3ViLkZvY3VzKCkKCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXNlbGVjdDogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7IHJldHVybiB0ZC5pbm5lckhUTUwgfSkKCQl9KS5zbGljZSgxKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0LmpzIgpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCk7IHN3aXRjaCAobWV0YS50eXBlKSB7CgkJCWNhc2UgaHRtbC5TRUxFQ1Q6IG1ldGEudmFsdWUgJiYgKHRhcmdldC52YWx1ZSA9IG1ldGEudmFsdWUpOyBicmVhawoJCQljYXNlIGh0bWwuQlVUVE9OOiBtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiB0YXJnZXQuY2xpY2soKTsgYnJlYWsKCQl9Cgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkpIH0sCglsaXN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAuQ29uZigibW9kZSIpICE9ICJzaW1wbGUiICYmIGNhbi5ydW4oZXZlbnQpIH0sCgliYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25pbXBvcnQuX2JhY2soY2FuLnN1cCkgfSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bihldmVudCkgfSwKCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAucmVxdWVzdChldmVudCwge190b2FzdDogIuaJp+ihjOS4rS4uLiJ9KQoJCWNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLkJVVFRPTiAmJiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgY2FuLkNvbmYobWRiLk5BTUUpXS5jb25jYXQoY2FuLnN1cC5JbnB1dCgpKSkKCX0sCglvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkKCQlpZiAoY2FuLkNvbmYobWRiLlRZUEUpID09IGh0bWwuU0VMRUNUKSB7IGNhbi5ydW4oZXZlbnQpIH0KCX0sCglvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAoY2FuLkNvbmYobWRiLlRZUEUpID09IGh0bWwuVEVYVEFSRUEpIHsgaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9IH0KCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsKCQkJY2FuLnJ1bihldmVudCksIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJfSBpZiAoIWV2ZW50LmN0cmxLZXkpIHsgcmV0dXJuIH0KCgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiYiI6IGNhbi5DbG9uZUlucHV0KCk7IGJyZWFrCgkJCWNhc2UgIm0iOiBjYW4uQ2xvbmVGaWVsZCgpOyBicmVhawoJCQlkZWZhdWx0OiByZXR1cm4KCQl9IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L2RhdGUuanMiClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi5o6n5Lu26K+m5oOFIiwgZGF0ZToge29uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsgY2IoZnVuY3Rpb24oY2FuLCBjYnMpIHsKCWZ1bmN0aW9uIHNldChub3cpIHsgY2JzKGNhbiwgY2FuLnVzZXIudGltZShjYW4sIG5vdyksIHRhcmdldC52YWx1ZSkgfQoKCS8vIOa3u+WKoOaOp+S7tgoJdmFyIG5vdyA9IHRhcmdldC52YWx1ZT8gbmV3IERhdGUodGFyZ2V0LnZhbHVlKTogbmV3IERhdGUoKQoJY2FuLl90cmFucyA9IGtpdC5EaWN0KCJ0b2RheSIsICLku4rlpKkiLCBtZGIuTkVYVCwgIuS4i+S4gOaciCIsIG1kYi5QUkVWLCAi5LiK5LiA5pyIIikKCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fYWN0aW9uKSwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbY2xpLkNMT1NFLAoJCVsiaG91ciJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDI0KSksIFsibWludXRlIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMCwgNjAsIDUpKSwgWyJzZWNvbmQiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgwLCA2MCwgNSkpLAoJCSJ0b2RheSIsICIiLCBtZGIuUFJFViwgWyJ5ZWFyIl0uY29uY2F0KGNhbi5jb3JlLkxpc3Qobm93LmdldEZ1bGxZZWFyKCkgLSAxMCwgbm93LmdldEZ1bGxZZWFyKCkgKyAxMCkpLAoJCVsibW9udGgiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgxLCAxMykpLCBtZGIuTkVYVCwKCV0sIGNhbi5fYWN0aW9uLCB7Y2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5jbG9zZSgpIH0sCgkJImhvdXIiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRIb3VycyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkibWludXRlIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0TWludXRlcyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkic2Vjb25kIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0U2Vjb25kcyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkidG9kYXkiOiBmdW5jdGlvbihldmVudCkgeyBub3cgPSBuZXcgRGF0ZSgpLCBzZXQoc2hvdyhub3cpKSB9LAoKCQkicHJldiI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRNb250aChub3cuZ2V0TW9udGgoKS0xKSwgc2hvdyhub3cpIH0sCgkJInllYXIiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRGdWxsWWVhcihwYXJzZUludCh2YWx1ZSkpLCBzaG93KG5vdykgfSwKCQkibW9udGgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRNb250aChwYXJzZUludCh2YWx1ZSktMSksIHNob3cobm93KSB9LAoJCSJuZXh0IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldE1vbnRoKG5vdy5nZXRNb250aCgpKzEpLCBzaG93KG5vdykgfSwKCgkJIumaj+acuiI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXREYXRlKChNYXRoLnJhbmRvbSgpICogMTAwIC0gNTApICsgbm93LmdldERhdGUoKSksIHNob3cobm93KSB9LAoJCSLliY3kuIDlubQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCktMSksIHNob3cobm93KSB9LAoJCSLlkI7kuIDlubQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCkrMSksIHNob3cobm93KSB9LAoJfSkKCgljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykKCWNhbi5fdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5UQUJMRV19XSkuZmlyc3QKCXZhciB0b2RheSA9IG5ldyBEYXRlKCk7IGZ1bmN0aW9uIHNob3cobm93KSB7CgkJLy8g6K6+572u5o6n5Lu2CgkJY2FuLkFjdGlvbigieWVhciIsIG5vdy5nZXRGdWxsWWVhcigpKQoJCWNhbi5BY3Rpb24oIm1vbnRoIiwgbm93LmdldE1vbnRoKCkrMSkKCQljYW4uQWN0aW9uKCJob3VyIiwgbm93LmdldEhvdXJzKCkpCgkJY2FuLkFjdGlvbigibWludXRlIiwgcGFyc2VJbnQobm93LmdldE1pbnV0ZXMoKS81KSo1KQoJCWNhbi5BY3Rpb24oInNlY29uZCIsIHBhcnNlSW50KG5vdy5nZXRTZWNvbmRzKCkvNSkqNSkKCgkJLy8g6K6+572u57uE5Lu2CgkJY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi5fdGFibGUsIFt7dGg6IFsi5pelIiwgIuS4gCIsICLkuowiLCAi5LiJIiwgIuWbmyIsICLkupQiLCAi5YWtIl19XSkKCQl2YXIgdHI7IGZ1bmN0aW9uIGFkZChkYXksIHR5cGUpIHsgaWYgKGRheS5nZXREYXkoKSA9PSAwKSB7IHRyID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl90YWJsZSwgW3t0eXBlOiBodG1sLlRSfV0pLmxhc3QgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0ciwgW3t0ZXh0OiBbZGF5LmdldERhdGUoKSwgaHRtbC5URCwgY2FuLmJhc2UuVGltZSh0b2RheSwgIiV5LSVtLSVkIikgPT0gY2FuLmJhc2UuVGltZShkYXksICIleS0lbS0lZCIpPyBodG1sLlNFTEVDVDogdHlwZV0sCgkJCQlkYXRhc2V0OiB7ZGF0ZTogZGF5LmdldFRpbWUoKX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJc2V0KG5vdyA9IG5ldyBEYXRlKHBhcnNlSW50KGV2ZW50LnRhcmdldC5kYXRhc2V0LmRhdGUpKSkKCQkJCX0sCgkJCX1dKQoJCX0KCgkJLy8g5pe26Ze05Yy66Ze0CgkJdmFyIG9uZSA9IG5ldyBEYXRlKG5vdyk7IG9uZS5zZXREYXRlKDEpCgkJdmFyIGVuZCA9IG5ldyBEYXRlKG5vdyk7IGVuZC5zZXRNb250aChub3cuZ2V0TW9udGgoKSsxKSwgZW5kLnNldERhdGUoMSkKCQl2YXIgaGVhZCA9IG5ldyBEYXRlKG9uZSk7IGhlYWQuc2V0RGF0ZShvbmUuZ2V0RGF0ZSgpLW9uZS5nZXREYXkoKSkKCQl2YXIgdGFpbCA9IG5ldyBEYXRlKGVuZCk7IHRhaWwuc2V0RGF0ZShlbmQuZ2V0RGF0ZSgpKzctZW5kLmdldERheSgpKQoKCQkvLyDml7bpl7Tluo/liJcKCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShoZWFkKTsgZGF5IDwgb25lOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5QUkVWKSB9CgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUob25lKTsgZGF5IDwgZW5kOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5NQUlOKSB9CgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUoZW5kKTsgZW5kLmdldERheSgpICE9IDAgJiYgZGF5IDwgdGFpbDsgZGF5LnNldERhdGUoZGF5LmdldERhdGUoKSsxKSkgeyBhZGQoZGF5LCBtZGIuTkVYVCkgfQoKCQlyZXR1cm4gbm93Cgl9IHNob3cobm93KSwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuKQp9KX19IH0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9pbnB1dC9pbnB1dC5qcyIKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L2tleS5qcyIKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBrZXk6IHsKCV9pbml0OiBmdW5jdGlvbihldmVudCwgY2FuLCBjYnMsIHRhcmdldCwgbmFtZSwgdmFsdWUpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuSU5QVVRTLCBbbmFtZSwgdmFsdWV8fHRhcmdldC52YWx1ZV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25maWd1cmUua2V5Ll9zaG93KGNhbiwgbXNnLCBjYnMsIHRhcmdldCwgbmFtZSkKCQl9KQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZywgY2JzLCB0YXJnZXQsIG5hbWUpIHsKCQlpZiAoIWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCwgbXNnLkxlbmd0aCgpICE9IDApKSB7IHJldHVybiB9CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBzdHlsZTogbXNnLmFwcGVuZCAmJiBtc2cuYXBwZW5kLmxlbmd0aCA9PSAxPyB7Im1pbi13aWR0aCI6IHRhcmdldC5vZmZzZXRXaWR0aC0xNn06IHt9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoY2FuLCB2YWx1ZSwgdGFyZ2V0LnZhbHVlKQoJCQkJbXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpID09IGljZS5QUk9DRVNTX0FHQUlOICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIGNhbiwgY2JzLCB0YXJnZXQsIG5hbWUsIHZhbHVlKQoJCQkJfSkKCQkJfX0KCQl9KSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbbWRiLlRPVEFMLCBtZGIuSU5ERVhdKSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIG1zZy5MZW5ndGgoKSkKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NYXgodG9wK2hlaWdodC1jYW4uX3RhcmdldC5vZmZzZXRUb3AsIDQwMCkpCgkJfSkKCX0sCglfbWFrZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgewoJCXZhciBzdWIgPSB0YXJnZXQuX2NhbjsgaWYgKHN1YiAmJiBzdWIuX2NicykgeyByZXR1cm4gfQoJCWNiKGZ1bmN0aW9uKHN1YiwgY2JzKSB7IHN1Yi5fY2JzID0gY2JzCgkJCWlmIChtZXRhLm1zZyAmJiBtZXRhLm1zZy5MZW5ndGgoKSA+IDApIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX3Nob3coc3ViLCBtZXRhLm1zZywgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1YiwgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfQoJCX0pCgl9LAoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgewoJCXRhcmdldC5fY2FuICYmIHRhcmdldC5fY2FuLmNsb3NlKCkKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJfSwKCW9uZm9jdXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiRXNjYXBlIjogdGFyZ2V0Ll9jYW4/IHRhcmdldC5fY2FuLmNsb3NlKCk6IHRhcmdldC5ibHVyKCk7IHJldHVybgoJCQljYXNlICJUYWIiOiB0YXJnZXQuX2NhbiAmJiB0YXJnZXQuX2Nhbi5jbG9zZSgpOyByZXR1cm4KCQkJY2FzZSAibiI6CgkJCWNhc2UgInAiOiBldmVudC5jdHJsS2V5ICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsKCQkJZGVmYXVsdDogY2FuLmJhc2UuaXNGdW5jKGxhc3QpICYmIGxhc3QoZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uZmlndXJlLmtleS5fbWFrZShldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KQoJfSwKCW9ua2V5dXA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsgdmFyIHN1YiA9IHRhcmdldC5fY2FuOyBpZiAoIXN1YikgeyByZXR1cm4gfQoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgaWNlLlBTOiBjYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBzdWIsIHN1Yi5fY2JzLCB0YXJnZXQsIG1ldGEubmFtZSwgZXZlbnQudGFyZ2V0LnZhbHVlKTsgYnJlYWsKCQl9CgkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIHN1YiwgZnVuY3Rpb24oKSB7IGNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1Yiwgc3ViLl9jYnMsIHRhcmdldCwgbWV0YS5uYW1lKSB9LCB0YXJnZXQpCgl9LAp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L3Byb3ZpbmNlLmpzIgpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuaOp+S7tuivpuaDhSIsIHByb3ZpbmNlOiB7b25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgeyBjYihmdW5jdGlvbihjYW4sIGNicykgewoJY2FuLnJlcXVpcmUoWyIvcmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCAiL3JlcXVpcmUvc2h5bGludXguY29tL3gvZWNoYXJ0cy9jaGluYS5qcyJdLCBmdW5jdGlvbigpIHsKCQl2YXIgY2hpbmFfY2hhcnQgPSBlY2hhcnRzLmluaXQoY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dHlwZTogaHRtbC5ESVYsIHN0eWxlOiB7d2lkdGg6IDYwMCwgaGVpZ2h0OiA0MDB9fV0pLmZpcnN0KQoJCWNoaW5hX2NoYXJ0LnNldE9wdGlvbih7Z2VvOiB7bWFwOiAnY2hpbmEnfX0pLCBjaGluYV9jaGFydC5vbihodG1sLkNMSUNLLCBmdW5jdGlvbiAocGFyYW1zKSB7CgkJCXRhcmdldC52YWx1ZSA9IHBhcmFtcy5uYW1lLCBjYW4uY2xvc2UoKQoJCX0pLCBjYW4uU3RhdHVzKG1kYi5UT1RBTCwgMzQpLCBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoY2FuKQoJfSkKfSkgfX0sIH0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jaGF0L2Rpdi5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgbWV0YSA9IHt9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgbWV0YVt2YWx1ZS5rZXldID0gdmFsdWUudmFsdWUgfSkKCQljYW4uX2xpc3QgPSBjYW4uYmFzZS5PYmoobWV0YS50ZXh0LCB7bWV0YToge25hbWU6IG1ldGEubmFtZXx8aHRtbC5ESVZ9LCBsaXN0OiBbXX0pCgkJY2FuLnN1cC5fa2V5cyA9IGNhbi5zdXAuX2tleXN8fGNhbi5fbGlzdC5tZXRhLm5hbWUKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiwgY2FuLl9vdXRwdXQpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwga2V5cywgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB7IHdpZHRoID0gd2lkdGh8fGl0ZW0ubWV0YS53aWR0aCwgaGVpZ2h0ID0gaGVpZ2h0fHxpdGVtLm1ldGEuaGVpZ2h0CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm1ldGEubmFtZXx8aHRtbC5ESVZdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCksIGNhbi5jdXJyZW50ID0gZXZlbnQudGFyZ2V0LCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBrZXlzLCBpdGVtLm1ldGEpCgkJfSwgX2FkZDogZnVuY3Rpb24oZGF0YSkgeyBpdGVtLmxpc3QucHVzaChkYXRhKSwgY2FuLm9uaW1wb3J0Ll9saXN0KGNhbiwga2V5cywgaXRlbSwgdWkubGlzdCwgd2lkdGgsIGhlaWdodCkgfX0sIHt2aWV3OiBodG1sLkxJU1R9XSkKCgkJdmFyIGZpZWxkID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgaXRlbS5tZXRhLmluZGV4PyBjaGF0LlBMVUdJTjogY2hhdC5MQVlPVVQsIGl0ZW0ubWV0YSwgdGFyZ2V0Ll90YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5saXN0Ll90YXJnZXQgPSBmaWVsZC5vdXRwdXQsIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkKCQlpdGVtLm1ldGEuc3R5bGUgJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLmxpc3QuX3RhcmdldCwgaXRlbS5tZXRhLnN0eWxlKQoKCQlpdGVtLm1ldGEuaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGNhbi5iYXNlLkNvcHkoe30sIGl0ZW0ubWV0YSksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVH0pCgkJfSwgdGFyZ2V0Ll90YXJnZXQsIGZpZWxkLmZpZWxkc2V0KQoKCQljYW4ub25pbXBvcnQuX2xpc3QoY2FuLCBrZXlzLCBpdGVtLCB1aS5saXN0LCB3aWR0aCwgaGVpZ2h0KQoJCWNhbi5zdXAuX2tleXMgPT0ga2V5cyAmJiB1aS5pdGVtLmNsaWNrKCkKCX0sCglfbGlzdDogZnVuY3Rpb24oY2FuLCBrZXlzLCBpdGVtLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsKCQlpZiAoaXRlbS5tZXRhLnN0eWxlID09IGh0bWwuU1BBTikgeyB3aWR0aCA9IHdpZHRoIC8gaXRlbS5saXN0Lmxlbmd0aCB9IGVsc2UgeyBoZWlnaHQgPSBoZWlnaHQgLyBpdGVtLmxpc3QubGVuZ3RoIH0KCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQuX3RhcmdldCkKCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uY29yZS5LZXlzKGtleXMsIGl0ZW0ubWV0YS5uYW1lKSwgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB9KQoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIGtleXMsIG1ldGEpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9KTsgbXNnLlB1c2gobWRiLktFWSwgImtleXMiKSwgbXNnLlB1c2gobWRiLlZBTFVFLCBrZXlzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQoIm5hbWUsaW5kZXgsYXJncyxzdHlsZSxkaXNwbGF5LGhlaWdodCx3aWR0aCIpLCBmdW5jdGlvbihrKSB7CgkJCW1zZy5QdXNoKG1kYi5LRVksIGspLCBtc2cuUHVzaChtZGIuVkFMVUUsIG1ldGFba10pCgkJfSksIGNhbi5zdXAuX2tleXMgPSBrZXlzCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlrZXkgPT0gbWRiLlZBTFVFICYmIGNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LmlubmVyVGV4dCA9IG1ldGFbbGluZS5rZXldID0gdmFsdWUsIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQkJfSwge25hbWU6IGxpbmUua2V5fSkKCQkJfX0KCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCksIGNhbi51aS5wcm9qZWN0Ll90YXJnZXQgPSBjYW4udWkuY29udGVudAoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0zMjAsIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQsIGNhbi51c2VyLnRpdGxlKGNhbi5fbGlzdC5tZXRhLm5hbWUpCgkJfSBlbHNlIGlmIChjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLCBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgZmFsc2UpCgkJfSBlbHNlIHsKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCX0KCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uX2xpc3QubWV0YS5uYW1lLCBjYW4uX2xpc3QsIGNhbi51aS5wcm9qZWN0LCB3aWR0aCwgaGVpZ2h0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUUsIGN0eC5JTkRFWCwgY3R4LkFSR1MsIGN0eC5TVFlMRSwgaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEhdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5jdXJyZW50Ll9hZGQoe21ldGE6IGRhdGEsIGxpc3Q6IFtdfSkKCQl9KQoJfSwKCSLkv53lrZgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIFttZGIuVEVYVCwgSlNPTi5zdHJpbmdpZnkoY2FuLl9saXN0KV0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC9sb2NhdGlvbi5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJIWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4uQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1Kmh0bWwuQUNUSU9OX0hFSUdIVCAtIDUqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9vcHRpb24pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fc3RhdHVzKQoKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2plY3QsIDI0MCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2plY3QsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvZmlsZSwgaWNlLkFVVE8pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLm9uZXhwb3J0Lmxpc3QpCgkJY2FuLnJlcXVpcmUoW2Nhbi5iYXNlLk1lcmdlVVJMKCJodHRwczovL21hcC5xcS5jb20vYXBpL2dsanMiLCAidiIsICIxLmV4cCIsICJsaWJyYXJpZXMiLCAic2VydmljZSIsICJrZXkiLCBjYW4uQ29uZihhYWEuVE9LRU4pKV0sIGZ1bmN0aW9uKCkgewoJCQl2YXIgcmVzID0ge3R5cGU6ICJ1bmtub3duIiwgbGF0aXR1ZGU6IDM5OTg0MTIsIGxvbmdpdHVkZTogMTE2MzA3NDh9LCBjdXJyZW50ID0gY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5MT0NBVElPTikpCgkJCWlmIChjdXJyZW50LnN0YXR1cyA9PT0gMCkgeyByZXMgPSBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjdXJyZW50LnJlc3VsdC5sb2NhdGlvbiwgY3VycmVudC5yZXN1bHQuYWRfaW5mbyksIHJlcy50eXBlID0gImlwIiwgcmVzLm5hbWUgPSBjdXJyZW50LnJlc3VsdC5pcCwgY2FuLlN0YXR1cyhyZXMpIH0KCQkJY2FuLl9jdXJyZW50ID0gcmVzLCBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pLCBjYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihyZXMpIHsgcmVzLnR5cGUgPSAiY3VycmVudCIsIGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQgPSByZXMpIH0pCgkJfSkKCX0sCglfbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSkKCgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCXtuYW1lOiAiZGlyZWN0aW9uIn0sCgkJCXtuYW1lOiAiZmF2b3IiLCBfbWVudTogc2h5KHsicGxheSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCQkJY2FuLmNvcmUuTmV4dChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZmF2b3IuX3RhcmdldCwgaHRtbC5ESVZfSVRFTSksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJCQlpdGVtLmNsaWNrKCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIG5leHQsIDIwMDApCgkJCQl9LCBmdW5jdGlvbigpIHsgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikgfSkKCQkJfX0pfSwKCQkJe25hbWU6ICJleHBsb3JlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaDAoY2FuLCBldmVudC50YXJnZXQudmFsdWUpIH0KCQkJfX0sCgkJCXtuYW1lOiAic2VhcmNoIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIGV2ZW50LnRhcmdldC52YWx1ZSkgfQoJCQl9fSwKCQkJe25hbWU6ICJkaXN0cmljdCIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5vbmltcG9ydC5fcHJvdmluY2UoY2FuLCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9jdXJyZW50KSwgY2FuLm9uaW1wb3J0Ll9tYXJrKGNhbikKCQljYW4ubWFyayAmJiBjYW4ubWFyay5hZGQoe3Bvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uX2N1cnJlbnQpLCBwcm9wZXJ0aWVzOiBjYW4uX2N1cnJlbnR9KQoJCWNhbi5fbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgaXRlbSkgfSkKCX0sCglfc2VhcmNoMDogZnVuY3Rpb24oY2FuLCBrZXl3b3JkKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ImJvdW5kYXJ5IjogIm5lYXJieSgiK2Nhbi5iYXNlLmpvaW4oW3AubGF0LCBwLmxuZywgIjUwMCJdLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJfSkKCX0sCglfc2VhcmNoOiBmdW5jdGlvbihjYW4sIGtleXdvcmQpIHsgdmFyIHAgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHsiYm91bmRhcnkiOiAicmVnaW9uKCIrY2FuLmJhc2Uuam9pbihbY2FuLlN0YXR1cygiY2l0eSIpLCBwLmxhdCwgcC5sbmddLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5zZWFyY2guX3RhcmdldCkKCQkJfSksIGNhbi5taXNjLkRlYnVnKHJlcykKCQl9KQoJfSwKCglfbGlzdF9yZXN1bHQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgeyB2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5taXNjLkRlYnVnKHJlcykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChyZXMucmVzdWx0WzBdLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS5mdWxsbmFtZTsgcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYik/IGNiKGl0ZW0pOiBpdGVtIH0pCgl9LAoJX2Rpc3RyaWN0OiBmdW5jdGlvbihjYW4sIGlkLCBjYikgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtpZDogaWR9KSwgImRpc3RyaWN0IiwgW10sIGNiKQoJfSwKCV9wcm92aW5jZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuX2Rpc3RyaWN0KGNhbiwgIiIsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnLCBmdW5jdGlvbihwcm92aW5jZSkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBwcm92aW5jZSwgZnVuY3Rpb24oZXZlbnQsIF8sIHNob3cpIHsgaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIHByb3ZpbmNlLmxvY2F0aW9uLCB7dHlwZTogInByb3ZpbmNlIiwgbmFtZTogcHJvdmluY2UubmFtZSwgdGV4dDogcHJvdmluY2UuZnVsbG5hbWV9KSkKCQkJCQljYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDgpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lfSkKCgkJCQkJc2hvdyA9PT0gdHJ1ZSB8fCBjYW4ub25pbXBvcnQuX2NpdHkoY2FuLCBwcm92aW5jZSwgZXZlbnQudGFyZ2V0KQoJCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCQl9KQoJCX0pCgl9LAoJX2NpdHk6IGZ1bmN0aW9uKGNhbiwgcHJvdmluY2UsIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5fZGlzdHJpY3QoY2FuLCBwcm92aW5jZS5pZCwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5pdGVtbGlzdChjYW4sIGNhbi5vbmltcG9ydC5fbGlzdF9yZXN1bHQoY2FuLCBtc2cpLCBmdW5jdGlvbihldmVudCwgY2l0eSwgc2hvdykgeyBpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjaXR5LmxvY2F0aW9uLCB7dHlwZTogImNpdHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNpdHkuZnVsbG5hbWV9KSkKCQkJCWNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgMTIpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lLCBjaXR5OiBjaXR5LmZ1bGxuYW1lfSkKCgkJCQlzaG93ID09PSB0cnVlIHx8IGNhbi5vbmltcG9ydC5fY291bnR5KGNhbiwgcHJvdmluY2UsIGNpdHksIGV2ZW50LnRhcmdldCkKCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCX0pCgl9LAoJX2NvdW50eTogZnVuY3Rpb24oY2FuLCBwcm92aW5jZSwgY2l0eSwgdGFyZ2V0KSB7CgkJY2FuLm9uaW1wb3J0Ll9kaXN0cmljdChjYW4sIGNpdHkuaWQsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuaXRlbWxpc3QoY2FuLCBjYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnKSwgZnVuY3Rpb24oZXZlbnQsIGNvdW50eSkgewoJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGNvdW50eS5sb2NhdGlvbiwge3R5cGU6ICJjb3VudHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNvdW50eS5mdWxsbmFtZX0pKQoJCQkJY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCAxNSkpLCBjYW4uU3RhdHVzKHtuYXRpb246ICLkuK3lm70iLCBwcm92aW5jZTogcHJvdmluY2UuZnVsbG5hbWUsIGNpdHk6IGNpdHkuZnVsbG5hbWV9KQoJCQl9LCBmdW5jdGlvbigpIHt9LCB0YXJnZXQpCgkJfSkKCX0sCgoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5tYXAgPSBuZXcgVE1hcC5NYXAoY2FuLnVpLmNvbnRlbnQsIHtjZW50ZXI6IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCB6b29tOiBjYW4uQWN0aW9uKCJ6b29tIiksIHBpdGNoOiBjYW4uQWN0aW9uKCJwaXRjaCIpLCByb3RhdGlvbjogY2FuLkFjdGlvbigicm90YXRpb24iKSwgbWFwU3R5bGVJZDogInN0eWxlMiJ9KQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCAiZGl2LmNvbnRlbnQ+ZGl2IiwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIHsiei1pbmRleCI6IDN9KSB9KQoJCWNhbi5jdXJyZW50ID0gewoJCQlsYWJlbDogbmV3IFRNYXAuTXVsdGlMYWJlbCh7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgY29udGVudDogaXRlbS5uYW1lfV19KSwKCQkJbWFya2VyOiBuZXcgVE1hcC5NdWx0aU1hcmtlcih7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKX1dfSksCgkJCWluZm86IGNhbi5vbmltcG9ydC5pbmZvKGNhbiwgaXRlbSksIGhvdmVyOiBjYW4ub25pbXBvcnQuaW5mbyhjYW4sIGl0ZW0pLAoJCQljaXJjbGU6IGNhbi5vbmltcG9ydC5jaXJjbGUoY2FuLCBpdGVtLCAxMDApLCBpdGVtOiBpdGVtLAoJCX0KCgkJY2FuLm1hcC5vbigicm90YXRlIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigicm90YXRpb24iLCBjYW4ubWFwLmdldFJvdGF0aW9uKCkpIH0pCgkJY2FuLm1hcC5vbigicGl0Y2giLCBmdW5jdGlvbihldmVudCkgeyBjYW4uQWN0aW9uKCJwaXRjaCIsIGNhbi5tYXAuZ2V0UGl0Y2goKSkgfSkKCQljYW4ubWFwLm9uKCJ6b29tIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigiem9vbSIsIGNhbi5tYXAuZ2V0Wm9vbSgpKSB9KQoJCWNhbi5tYXAub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIHBvaW50ID0gY2FuLm9uYWN0aW9uLl9wb2ludChldmVudCwgY2FuLCB7bmFtZTogZXZlbnQucG9pPyBldmVudC5wb2kubmFtZTogIiJ9KTsgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIHBvaW50KQoJCQljYW4uQWN0aW9uKCJtb2RlIikgPT0gImluc2VydCIgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7dGFyZ2V0OiB7Z2V0Qm91bmRpbmdDbGllbnRSZWN0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBvaW50IH19fSwgcG9pbnQpLCBtZGIuQ1JFQVRFLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIHBvaW50KQoJCQl9KQoJCX0pCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IGlmICghaXRlbS5sYXRpdHVkZSB8fCAhaXRlbS5sb25naXR1ZGUpIHsgcmV0dXJuIH0KCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIGl0ZW0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uaW1wb3J0LnBsdWdpbihjYW4sIGl0ZW0pCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uZXhwb3J0LmhvdmVyKGNhbiwgaXRlbSksIGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJZGlyZWN0aW9uOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uYWN0aW9uW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQkJZmF2b3I6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKSB9LAoJCQkJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKQoJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQkJCQljYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBjYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKQoJCQkJCX0pCgkJCQl9LAoJCQl9KQoJCX0sIHRhcmdldHx8Y2FuLnVpLmZhdm9yLl90YXJnZXQpCgkJY2FuLm1hcmsgJiYgY2FuLm1hcmsuYWRkKHtwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIHByb3BlcnRpZXM6IGl0ZW19KQoJCWNhbi5jbHVzdGVyICYmIGNhbi5jbHVzdGVyLmFkZCh7cG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pfSkKCX0sCglfY2x1c3RlcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uY2x1c3RlciA9IG5ldyBUTWFwLk1hcmtlckNsdXN0ZXIoe21hcDogY2FuLm1hcCwgZ2VvbWV0cmllczogW119KQoJfSwKCV9tYXJrOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5tYXJrID0gbmV3IFRNYXAuTXVsdGlNYXJrZXIoe21hcDogY2FuLm1hcH0pCgkJY2FuLm1hcmsub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFldmVudC5nZW9tZXRyeSkgeyByZXR1cm4gfSB2YXIgaXRlbSA9IGV2ZW50Lmdlb21ldHJ5LnByb3BlcnRpZXMKCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGl0ZW0pCgkJfSkKCQljYW4ubWFyay5vbigiaG92ZXIiLCBmdW5jdGlvbihldmVudCkgeyBpZiAoIWV2ZW50Lmdlb21ldHJ5KSB7IHJldHVybiB9IHZhciBpdGVtID0gZXZlbnQuZ2VvbWV0cnkucHJvcGVydGllcwoJCQljYW4ub25leHBvcnQuaG92ZXIoY2FuLCBpdGVtKQoJCX0pCgl9LAoKCV9wb2x5bGluZTogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJcmV0dXJuIG5ldyBUTWFwLk11bHRpUG9seWxpbmUoewoJCQltYXA6IGNhbi5tYXAsCgkJCXN0eWxlczogewoJCQkJJ3N0eWxlX2JsdWUnOiBuZXcgVE1hcC5Qb2x5bGluZVN0eWxlKHsKCQkJCQknY29sb3InOiAnIzM3NzdGRicsIC8v57q/5aGr5YWF6ImyCgkJCQkJJ3dpZHRoJzogNiwgLy/mipjnur/lrr3luqYKCQkJCQknYm9yZGVyV2lkdGgnOiA1LCAvL+i+uee6v+WuveW6pgoJCQkJCSdib3JkZXJDb2xvcic6ICcjRkZGJywgLy/ovrnnur/popzoibIKCQkJCQknbGluZUNhcCc6ICdidXR0JyAvL+e6v+err+WktOaWueW8jwoJCQkJfSksCgkJCQknc3R5bGVfcmVkJzogbmV3IFRNYXAuUG9seWxpbmVTdHlsZSh7CgkJCQkJJ2NvbG9yJzogJyNDQzAwMDAnLCAvL+e6v+Whq+WFheiJsgoJCQkJCSd3aWR0aCc6IDYsIC8v5oqY57q/5a695bqmCgkJCQkJJ2JvcmRlcldpZHRoJzogNSwgLy/ovrnnur/lrr3luqYKCQkJCQknYm9yZGVyQ29sb3InOiAnI0NDQycsIC8v6L6557q/6aKc6ImyCgkJCQkJJ2xpbmVDYXAnOiAncm91bmQnIC8v57q/56uv5aS05pa55byPCgkJCQl9KQoJCQl9LAoJCQlnZW9tZXRyaWVzOiBbeydzdHlsZUlkJzogJ3N0eWxlX2JsdWUnLCAncGF0aHMnOiBwYXRofV0KCQl9KQoJfSwKCV9tb3ZlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ubWFyay5hZGQoe2lkOiAnY2FyJywgc3R5bGVJZDogJ2Nhci1kb3duJywgcG9zaXRpb246IG5ldyBUTWFwLkxhdExuZygzOS45ODQ4MTUwMDY0ODMzOCwgMTE2LjMwNTcxMTI2OTM3ODY2KX0pCgkJY2FuLm1hcmsubW92ZUFsb25nKHsiY2FyIjoge3BhdGg6IFsKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk4NDgxNTAwNjQ4MzM4LCAxMTYuMzA1NzExMjY5Mzc4NjYpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMjY2NTc1MjIyMTU1LCAxMTYuMzA1OTY4NzYxNDQ0MDkpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMzQ4Nzg0MTY1ODg2LCAxMTYuMzExMTQwMDYwNDI0OCksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45Nzg4MTM3MTAyNjYwMjQsIDExNi4zMTExNDAwNjA0MjQ4KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk3ODgxMzcxMDI2NjAyNCwgMTE2LjMxNjk5ODAwNDkxMzMzKQoJCV0sIHNwZWVkOiA3MH19LCB7YXV0b1JvdGF0aW9uOnRydWV9KQoJfSwKCglwb2ludDogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJcmV0dXJuIG5ldyBUTWFwLkxhdExuZyhpdGVtLmxhdGl0dWRlLzEwMDAwMC4wLCBpdGVtLmxvbmdpdHVkZS8xMDAwMDAuMCkKCX0sCgljZW50ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyB2YXIgcG9pbnQgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKQoJCWNhbi5tYXAuc2V0Q2VudGVyKHBvaW50KSwgY2FuLlN0YXR1cygibmFtZSIsICIiKSwgY2FuLlN0YXR1cygidGV4dCIsICIiKSwgY2FuLlN0YXR1cyhpdGVtKSwgY2FuLlN0YXR1cyh7bGF0aXR1ZGU6IHBvaW50LmxhdCwgbG9uZ2l0dWRlOiBwb2ludC5sbmd9KQoJCWNhbi5jdXJyZW50LmluZm8uc2V0UG9zaXRpb24ocG9pbnQpLCBjYW4uY3VycmVudC5pbmZvLnNldENvbnRlbnQoKGl0ZW0ubmFtZXx8IiIpKyI8YnIvPiIrKGl0ZW0udGV4dHx8IiIpKQoJCWNhbi5jdXJyZW50LmxhYmVsLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogcG9pbnQsIGNvbnRlbnQ6IGl0ZW0ubmFtZX1dKQoJCWNhbi5jdXJyZW50Lm1hcmtlci51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IHBvaW50fV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IHBvaW50LCByYWRpdXM6IDMwMH1dKQoJCWNhbi5jdXJyZW50Lml0ZW0gPSBpdGVtCgkJaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCkKCX0sCglpbmZvOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlyZXR1cm4gbmV3IFRNYXAuSW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLAoJCQlwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG9mZnNldDoge3g6IDAsIHk6IC0zMn0sCgkJCWNvbnRlbnQ6IChpdGVtLm5hbWV8fCIiKSsiPGJyLz4iKyhpdGVtLnRleHR8fCIiKSwKCQl9KQoJfSwKCWNpcmNsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCByYWRpdXMpIHsKCQlyZXR1cm4gbmV3IFRNYXAuTXVsdGlDaXJjbGUoeyAKCQkJbWFwOiBjYW4ubWFwLCBzdHlsZXM6IHsKCQkJCWNpcmNsZTogbmV3IFRNYXAuQ2lyY2xlU3R5bGUoewoJCQkJCWNvbG9yOiAncmdiYSg0MSw5MSwyNTUsMC4xNiknLAoJCQkJCXNob3dCb3JkZXI6IHRydWUsCgkJCQkJYm9yZGVyQ29sb3I6ICdyZ2JhKDQxLDkxLDI1NSwxKScsCgkJCQkJYm9yZGVyV2lkdGg6IDIsCgkJCQl9KSwKCQkJfSwKCQkJZ2VvbWV0cmllczogW3tzdHlsZUlkOiAnY2lyY2xlJywgY2VudGVyOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgcmFkaXVzOiByYWRpdXN8fDMwMH1dLAoJCX0pCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpdGVtLmhhc2ggfSwgY2FuLnVpLnByb2ZpbGUpKSB7CgoJCX0gZWxzZSB7IGl0ZW0uZXh0cmEgPSBjYW4uYmFzZS5PYmooaXRlbS5leHRyYSwge30pCgkJCWl0ZW0uZXh0cmEuaW5kZXggJiYgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCB7aW5kZXg6IGl0ZW0uZXh0cmEuaW5kZXgsIGFyZ3M6IGl0ZW0uZXh0cmEuYXJnc30sIGNhbi51aS5wcm9maWxlLCBmdW5jdGlvbihzdWIpIHsgaXRlbS5fcGx1Z2luID0gc3ViCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkqMy80KSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCksIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSozLzQpKQoJCQl9KQoJCX0KCX0sCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEpIHsKCQlmdW5jdGlvbiBteUluZm9XaW5kb3cob3B0aW9ucykgeyBUTWFwLkRPTU92ZXJsYXkuY2FsbCh0aGlzLCBvcHRpb25zKSB9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZSA9IG5ldyBUTWFwLkRPTU92ZXJsYXkoKQoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUub25Jbml0ID0gZnVuY3Rpb24ob3B0aW9ucykgeyB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbiwgdGhpcy5tZXRhID0gb3B0aW9ucy5tZXRhIH0KCgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS5jcmVhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIG1ldGEgPSB0aGlzLm1ldGEsIHVpID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5GTE9BVCwge30sIGNhbi5fb3V0cHV0KQoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgbWV0YSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBpY2UuUlVOLCBbbWV0YS5pbmRleF0uY29uY2F0KGNtZHMpLCBjYikgfQoJCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHN1Yi5fdGFyZ2V0KSB9CgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkvMikpCgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkvMikpCgkJCQlpdGVtLl9wbHVnaW4gPSBzdWIKCQkJfSwgY2FuLl9vdXRwdXQsIHVpLmZpZWxkc2V0KQoJCQlyZXR1cm4gdWkuZmllbGRzZXQKCQl9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS51cGRhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIHBpeGVsID0gdGhpcy5tYXAucHJvamVjdFRvQ29udGFpbmVyKHRoaXMucG9zaXRpb24pOyBjYW4ucGFnZS5zdHlsZShjYW4sIHRoaXMuZG9tLCB7CgkJCQlsZWZ0OiBwaXhlbC5nZXRYKCksIHRvcDogcGl4ZWwuZ2V0WSgpKzIqaHRtbC5BQ1RJT05fSEVJR0hULAoJCQl9KQoJCX0KCQlyZXR1cm4gbmV3IG15SW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLCBwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG1ldGE6IG1ldGF9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbWyJtb2RlIiwgInNlbGVjdCIsICJpbnNlcnQiXSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ6b29tIiwgdmFsdWU6IDE3LCByYW5nZTogWzMsIDIxXX0sCgl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAicGl0Y2giLCB2YWx1ZTogMzAsIHJhbmdlOiBbMCwgODAsIDVdfSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJyb3RhdGlvbiIsIHZhbHVlOiAiMCIsIHJhbmdlOiBbMCwgMzYwLCAxMF19LAoJImN1cnJlbnQiLCAiZXhwbG9yZSIsICJjcmVhdGUiLCAiZGlyZWN0aW9uIl0sCglfdHJhbnM6IHtjdXJyZW50OiAi5a6a5L2NIiwgZmF2b3I6ICLmlLbol48ifSwKCgl6b29tOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIikpIH0sCglwaXRjaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFBpdGNoKGNhbi5BY3Rpb24oInBpdGNoIikpIH0sCglyb3RhdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIikpIH0sCgljdXJyZW50OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQpLCBjYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDE3KSksIGNhbi5tYXAuc2V0UGl0Y2goY2FuLkFjdGlvbigicGl0Y2giLCAzMCkpLCBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIiwgMCkpIH0sCgoJZXhwbG9yZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSk7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgeyJib3VuZGFyeSI6ICJuZWFyYnkoIitjYW4uYmFzZS5qb2luKFtwLmxhdCwgcC5sbmcsICI1MDAiXSwgaWNlLkZTKSsiKSIsICJwYWdlX2luZGV4IjogaX0pLCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCXZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLmNvcmUuTGlzdChyZXMuZGF0YSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGl0ZW0ubG9jYXRpb24sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLnRpdGxlLCB0ZXh0OiBpdGVtLmFkZHJlc3N9KSwgY2FuLnVpLmV4cGxvcmUuX3RhcmdldCkKCQkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJCX0pCgkJfQoJfSwKCWRpcmVjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm1hcC5nZXRDZW50ZXIoKTsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpcmVjdGlvbi5fdGFyZ2V0KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtbInR5cGUiLCAiZHJpdmluZyIsICJ3YWxraW5nIiwgImJpY3ljbGluZyIsICJ0cmFuc2l0Il1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBmcm9tID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLl9jdXJyZW50KSwgdG8gPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHt0eXBlOiBsaXN0WzBdLCAiZnJvbSI6IGNhbi5iYXNlLmpvaW4oW2Zyb20ubGF0LCBmcm9tLmxuZ10sIGljZS5GUyksICJ0byI6IGNhbi5iYXNlLmpvaW4oW3RvLmxhdCwgdG8ubG5nXSwgaWNlLkZTKX0pCgkJCWNhbi5ydW5BY3Rpb24obXNnLl9ldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSwgcm91dGUgPSByZXMucmVzdWx0LnJvdXRlc1swXQoJCQkJCXZhciBjb29ycyA9IHJvdXRlLnBvbHlsaW5lLCBwbCA9IFtdLCBrciA9IDEwMDAwMDAKCQkJCQlmb3IgKHZhciBpID0gMjsgaSA8IGNvb3JzLmxlbmd0aDsgaSsrKSB7IGNvb3JzW2ldID0gTnVtYmVyKGNvb3JzW2kgLSAyXSkgKyBOdW1iZXIoY29vcnNbaV0pIC8ga3IgfQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgY29vcnMubGVuZ3RoOyBpICs9IDIpIHsgcGwucHVzaChuZXcgVE1hcC5MYXRMbmcoY29vcnNbaV0sIGNvb3JzW2krMV0pKSB9CgkJCQkJY2FuLm9uaW1wb3J0Ll9wb2x5bGluZShjYW4sIHBsKQoKCQkJCQljYW4uY29yZS5MaXN0KHJvdXRlLnN0ZXBzLCBmdW5jdGlvbihpdGVtKSB7IHZhciBpID0gaXRlbS5wb2x5bGluZV9pZHhbMF0KCQkJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwge2xhdDogY29vcnNbaV0sIGxuZzogY29vcnNbaSsxXX0sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLmluc3RydWN0aW9uLCB0ZXh0OiBpdGVtLmFjdF9kZXNjfSksIGNhbi51aS5kaXJlY3Rpb24uX3RhcmdldCkKCQkJCQl9KSwgY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgImRpc3RhbmNlOiAiK3JvdXRlLmRpc3RhbmNlKyIgZHVyYXRpb246ICIrcm91dGUuZHVyYXRpb24pCgkJCX0pCgkJfSkKCX0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5jdXJyZW50Lml0ZW0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLmNvcmUuU3BsaXQoInR5cGUsbmFtZSx0ZXh0IiksIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbikKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncy5jb25jYXQoImxhdGl0dWRlIiwgcC5sYXRpdHVkZSwgImxvbmdpdHVkZSIsIHAubG9uZ2l0dWRlKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uYmFzZS5Db3B5KHAsIHtuYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgdGV4dDogbXNnLk9wdGlvbihtZGIuVEVYVCl9KSkKCQkJfSwgdHJ1ZSkKCQl9KQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaXRlbSkgeyB2YXIgcmVjdCA9IGNhbi51aS5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJcmV0dXJuIGNhbi5iYXNlLkNvcHkoe2xlZnQ6IHJlY3QubGVmdCtldmVudC5wb2ludC54LCBib3R0b206IHJlY3QudG9wK2V2ZW50LnBvaW50LnksIGxhdGl0dWRlOiBwYXJzZUludChldmVudC5sYXRMbmcubGF0KjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQoZXZlbnQubGF0TG5nLmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyJuYXRpb24iLCAicHJvdmluY2UiLCAiY2l0eSIsICJsYXRpdHVkZSIsICJsb25naXR1ZGUiLCAgInR5cGUiLCAibmFtZSIsICJ0ZXh0Il0sCglwb2ludDogZnVuY3Rpb24oY2FuLCBwb2ludCwgaXRlbSkgeyByZXR1cm4gY2FuLmJhc2UuQ29weSh7bGF0aXR1ZGU6IHBhcnNlSW50KHBvaW50LmxhdCoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHBvaW50LmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkgfSwKCWNlbnRlcjogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjYW4ubWFwLmdldENlbnRlcigpKSB9LAoJY3VycmVudDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbik7IHAubGF0aXR1ZGUgLz0gMTAwMDAwLCBwLmxvbmdpdHVkZSAvPSAxMDAwMDA7IGNhbi5TdGF0dXMocCkKCQljYW4uY3VycmVudC5tYXJrZXIudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQubGFiZWwudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IGNhbi5tYXAuZ2V0Q2VudGVyKCksIHJhZGl1czogMzAwfV0pCgl9LAoJaG92ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5jdXJyZW50LmhvdmVyLnNldFBvc2l0aW9uKGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pKQoJCWNhbi5jdXJyZW50LmhvdmVyLnNldENvbnRlbnQoaXRlbS5uYW1lKyI8YnIvPiIraXRlbS50ZXh0KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvbWVkaWEuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5kaXNwbGF5KGNhbiwgdGFyZ2V0KQoJCWNhbi51aS5jYW52YXMgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0eXBlOiAiY2FudmFzIiwgd2lkdGg6IDMyMCwgaGVpZ2h0OiAyNDAsIHN0eWxlOiB7ZGlzcGxheTogIm5vbmUifX1dKS5maXJzdAoKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgewoJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgInRkIl0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uc3VwLm9uYWN0aW9uLmNoYW5nZShldmVudCwgY2FuLnN1cCwga2V5LCB2YWx1ZSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnJ1bihldmVudCkKCQkJCX0pCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQpCgoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZy5SZXN1bHQoKSwgY2FuLnVpLmRpc3BsYXkpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJfSwKCglvcGVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7dmlkZW86IHt3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MH19LCBmdW5jdGlvbihzdHJlYW0pIHsKCQkJdmFyIHZpZGVvID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsICJ2aWRlbyIpCgkJCXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbSwgdmlkZW8ucGxheSgpCgkJCWNhbi51aS52aWRlbyA9IHZpZGVvCgkJfSwgZnVuY3Rpb24oZXJyb3IpIHsKCQkJY2FuLm1pc2MuTG9nKCJvcGVuIGNhbWVyYSIsIGVycm9yKQoJCX0pCgl9LAoJc25hcHNob3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udWkuY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKGNhbi51aS52aWRlbywgMCwgMCkKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0eXBlOiAiaW1nIiwgc3JjOiBjYW4udWkuY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2Uvd2VicCcpfV0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC90cmFucy5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5mcm9tID0gY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuRElSLCBodG1sLkxFRlQsICJmcm9tIiwgInRvIikKCQljYW4udG8gPSBjYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5ESVIsIGh0bWwuUklHSFQsICJ0byIsICJmcm9tIikKCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5UUkFTSCwgaHRtbC5MRUZULCAiZnJvbSIpCgkJY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuVFJBU0gsIGh0bWwuUklHSFQsICJ0byIpCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgcG9zLCBmcm9tLCB0bykgewoJCXJldHVybiBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuU1RPUlksIGluZGV4OiBpbmRleH0sIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCB7ZmxvYXQ6IHBvcywgY2xlYXI6IHBvc30pCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLzIpCgkJCXN1Yi5fbGVnZW5kLmlubmVySFRNTCA9IGNhbi5PcHRpb24oZnJvbSkraWNlLlNQK2luZGV4CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsICJtYXgtd2lkdGgiLCBjYW4uQ29uZldpZHRoKCkvMikKCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCWlmIChjYW4ub25hY3Rpb25bY21kc1sxXV0pIHsgcmV0dXJuIGNhbi5vbmFjdGlvbltjbWRzWzFdXShjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIH0KCgkJCQl2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIHtfcG9kOiBjYW4uT3B0aW9uKGZyb20pfSkKCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBpbmRleCwgY21kcywgY2IpCgkJCX0KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCglzZW5kOiBmdW5jdGlvbihjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIHsgdmFyIF9mcm9tID0gY2FuW2Zyb21dLCBfdG8gPSBjYW5bdG9dCgkJdmFyIHBhdGggPSBjYW4ucmVxdWVzdChldmVudCkuT3B0aW9uKG5mcy5QQVRIKQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFLAoJCQlmcm9tOiBjYW4uT3B0aW9uKGZyb20pLCBmcm9tX3BhdGg6IHBhdGgsCgkJCXRvOiBjYW4uT3B0aW9uKHRvKSwgdG9fcGF0aDogX3RvLk9wdGlvbihuZnMuUEFUSCkrcGF0aC5zcGxpdChpY2UuUFMpLnBvcCgpLAoJCX0pCgkJY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24oKSB7IF90by5VcGRhdGUoKSB9LCB0cnVlKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvd3guanMiClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtzb3VyY2U6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgljYW4ucmVxdWlyZShbImh0dHBzOi8vcmVzLnd4LnFxLmNvbS9vcGVuL2pzL2p3ZWl4aW4tMS42LjAuanMiXSwgZnVuY3Rpb24oY2FuKSB7CgkJd3guY29uZmlnKHtkZWJ1ZzogbXNnLk9wdGlvbigiZGVidWciKSA9PSBpY2UuVFJVRSwKCQkJYXBwSWQ6IG1zZy5PcHRpb24oImFwcGlkIiksIHNpZ25hdHVyZTogbXNnLk9wdGlvbigic2lnbmF0dXJlIiksCgkJCW5vbmNlU3RyOiBtc2cuT3B0aW9uKCJub25jZXN0ciIpLCB0aW1lc3RhbXA6IG1zZy5PcHRpb24oInRpbWVzdGFtcCIpLAoKCQkJanNBcGlMaXN0OiBjYW4uY29yZS5JdGVtKHsKCQkJCXNjYW5RUkNvZGU6IGZ1bmN0aW9uKGNiKSB7IHd4LnNjYW5RUkNvZGUoe25lZWRSZXN1bHQ6IGNiPyAxOiAwLCBzY2FuVHlwZTogWyJxckNvZGUiLCJiYXJDb2RlIl0sIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHJlcy5yZXN1bHRTdHIsIGNhbi5iYXNlLlBhcnNlSlNPTihyZXMucmVzdWx0U3RyKSkKCQkJCX0gfSkgfSwKCQkJCWdldExvY2F0aW9uOiBmdW5jdGlvbihjYikgeyB3eC5nZXRMb2NhdGlvbih7dHlwZTogImdjajAyIiwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioe3R5cGU6ICJnY2owMiIsIG5hbWU6ICLlvZPliY3kvY3nva4iLCB0ZXh0OiAi5b2T5YmN5L2N572uIiwgbGF0aXR1ZGU6IHBhcnNlSW50KHJlcy5sYXRpdHVkZSoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHJlcy5sb25naXR1ZGUqMTAwMDAwKSB9KQoJCQkJfSB9KSB9LAoJCQkJb3BlbkxvY2F0aW9uOiBmdW5jdGlvbihtc2cpIHsgd3gub3BlbkxvY2F0aW9uKHsKCQkJCQlsYXRpdHVkZTogcGFyc2VJbnQobXNnLk9wdGlvbigibGF0aXR1ZGUiKSkvMTAwMDAwLAoJCQkJCWxvbmdpdHVkZTogcGFyc2VJbnQobXNnLk9wdGlvbigibG9uZ2l0dWRlIikpLzEwMDAwMCwKCQkJCQluYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgYWRkcmVzczogbXNnLk9wdGlvbihtZGIuVEVYVCksCgkJCQkJc2NhbGU6IG1zZy5PcHRpb24oInNjYWxlIil8fDE0LCBpbmZvVXJsOiBtc2cuT3B0aW9uKG1kYi5MSU5LKSwKCQkJCX0pIH0sCgkJCQljaG9vc2VJbWFnZTogZnVuY3Rpb24oY2IsIGNvdW50KSB7IHd4LmNob29zZUltYWdlKHtjb3VudDogY291bnR8fDksIHNpemVUeXBlOiBbJ29yaWdpbmFsJywgJ2NvbXByZXNzZWQnXSwgc291cmNlVHlwZTogWydhbGJ1bScsICdjYW1lcmEnXSwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IocmVzLmxvY2FsSWRzKQoJCQkJfSB9KSB9LAoJCQl9LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4udXNlci5hZ2VudFtrZXldID0gdmFsdWUsIGtleSB9KSwKCQl9KQoJCXd4LmVycm9yKGZ1bmN0aW9uKGVycikgeyBjYW4udXNlci50b2FzdChlcnIsICJ3eCBsb2FkIikgfSkKCQl3eC5yZWFkeShmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKCJyZWFkeSIpIH0pCgl9KQp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJdmFyIHBhdGhzID0gY2FuLmNvcmUuU3BsaXQoY2FuLk9wdGlvbihuZnMuUEFUSCksIGljZS5GUyk7IGNhbi5PcHRpb24obmZzLlBBVEgsIHBhdGhzWzBdKQoJCXZhciBmaWxlcyA9IGNhbi5jb3JlLlNwbGl0KGNhbi5PcHRpb24obmZzLkZJTEUpLCBpY2UuRlMpOyBjYW4uT3B0aW9uKG5mcy5GSUxFLCBmaWxlc1swXSkKCQljYW4udGFidmlldyA9IGNhbi50YWJ2aWV3fHx7fSwgY2FuLmhpc3RvcnkgPSBjYW4uaGlzdG9yeXx8W10sIGNhbi50b29sa2l0ID0ge30sIGNhbi5leHRlbnRpb25zID0ge30KCQljYW4ucHJvZmlsZV9zaXplID0ge30sIGNhbi5kaXNwbGF5X3NpemUgPSB7fQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkucHJvamVjdCwgMjQwKQoJCWNhbi5vbmltcG9ydC5fcHJvamVjdChjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGNhbi51aS5wcm9maWxlKQoJCWNhbi5vbmltcG9ydC5fZGlzcGxheShjYW4sIGNhbi51aS5kaXNwbGF5KQoJCWNhbi5vbmltcG9ydC5faW5wdXQoY2FuKQoKCQljYW4udWkuX2NvbnRlbnQgPSBjYW4udWkuY29udGVudAoJCWNhbi51aS5fcHJvZmlsZV9vdXRwdXQgPSBjYW4udWkucHJvZmlsZV9vdXRwdXQKCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fc3RhdHVzKQoJCWNhbi5vbmVuZ2luZS5wbHVnaW4oY2FuLCBjYW4ub25wbHVnaW4pCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCXN3aXRjaCAoY2FuLk1vZGUoKSkgewoJCQljYXNlICJzaW1wbGUiOiBjYW4ub25pbXBvcnQuX3NpbXBsZShjYW4pOyBicmVhawoJCQljYXNlICJmbG9hdCI6IGJyZWFrCgkJCWNhc2UgImNtZCI6IGNhbi5vbmltcG9ydC5fdGFicyhjYW4pIC8vIG5vIGJyZWFrCgkJCWNhc2UgImZ1bGwiOiAvLyBubyBicmVhawoJCQlkZWZhdWx0OiBpZiAoY2FuLkNvbmZIZWlnaHQoKSA8IDMyMCkgeyBjYW4uQ29uZkhlaWdodCgzMjApIH0KCQkJCWNhbi5vbmltcG9ydC5wcm9qZWN0KGNhbiwgcGF0aHMpLCBjYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJCQljYW4ub25pbXBvcnQuX3Rvb2xraXQoY2FuLCBjYW4udWkudG9vbGtpdCksIGNhbi5vbmltcG9ydC5fc2Vzc2lvbihjYW4sIG1zZywgZnVuY3Rpb24oKSB7CgkJCQkJZmlsZXMubGVuZ3RoID4gMSAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLmNvcmUuTmV4dChmaWxlcy5zbGljZSgxKSwgZnVuY3Rpb24oZmlsZSwgbmV4dCkgewoJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSwgbmV4dCkKCQkJCQl9LCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoc1swXSwgZmlsZXNbMF0sICIiKSB9KSB9KQoJCQkJfSksIGNhbi5vbmltcG9ydC5fa2V5ZG93bihjYW4pCgkJfQoKCQl2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7IGNhbi5pc0NtZE1vZGUoKSB8fCAoY2FuLnRhYnZpZXdbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBtc2cpCgkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLkxJTkUpLCBmdW5jdGlvbigpIHsKCQkJaWYgKGNhbi5pc0NtZE1vZGUoKSAmJiBoYXNoKSB7IHZhciBhcmdzID0gY2FuLmNvcmUuU3BsaXQoZGVjb2RlVVJJQ29tcG9uZW50KGhhc2gpLnNsaWNlKDEpKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGFyZ3NbMF0sIGFyZ3NbMV0pIH0pCgkJCX0KCQl9KQoJfSwKCV9pbnB1dDogZnVuY3Rpb24oY2FuKSB7Cgl9LAoJX3Byb2plY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW2h0bWwuQUNUSU9OLCBodG1sLk9VVFBVVF0pOyBjYW4udWkucHJvZmlsZV9vdXRwdXQgPSB1aS5vdXRwdXQKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbXSwgdWkuYWN0aW9uLCBraXQuRGljdCgKCQkJY2xpLkNMT1NFLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgkJCWNsaS5DTEVBUiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdWkub3V0cHV0KSB9LAoJCQljbGkuU0hPVywgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXShldmVudCwgY2FuKSB9LAoJCQluZnMuTE9BRCwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uYWN0aW9uW25mcy5MT0FEXShldmVudCwgY2FuKSB9LAoJCQltZGIuTElOSywgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmIChbbmZzLlpNTCwgbmZzLklNTF0uaW5kZXhPZihjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKSA+IC0xKSB7CgkJCQkJY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHsKCQkJCQkJcG9kOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgd2Vic2l0ZTogY2FuLmJhc2UudHJpbVByZWZpeChjYW4uYmFzZS5QYXRoKGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSksICJzcmMvd2Vic2l0ZS8iKSwKCQkJCQl9KSkKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHsKCQkJCQkJcG9kOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgY21kOiBjYW4uYmFzZS5QYXRoKGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSkKCQkJCQl9KSkKCQkJCX0KCQkJfSwKCQkJbWRiLlBMVUdJTiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihkYXRhKSB7IGNhbi5vbmltcG9ydC5wbHVnKGNhbiwgZGF0YSwgdWkub3V0cHV0KSB9KSB9LAoJCQlodG1sLldJRFRILCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBodG1sLldJRFRILCB2YWx1ZTogY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSoxMDAvY2FuLkNvbmZXaWR0aCgpfHw1MH1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQkJY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IGNhbi5Db25mV2lkdGgoKSpwYXJzZUludChsaXN0WzBdKS8xMDAKCQkJCQljYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pCgkJCQl9KQoJCQl9CgkJKSk7IHRhcmdldC5fdG9nZ2xlID0gZnVuY3Rpb24oZXZlbnQsIHNob3cpIHsgYWN0aW9uW3Nob3c/IGNsaS5TSE9XOiBjbGkuQ0xPU0VdKGV2ZW50KSB9Cgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVULCBodG1sLlNUQVRVU10pOyBjYW4udWkuZGlzcGxheV9vdXRwdXQgPSB1aS5vdXRwdXQsIGNhbi51aS5kaXNwbGF5X3N0YXR1cyA9IHVpLnN0YXR1cwoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIGtpdC5EaWN0KAoJCQljbGkuQ0xPU0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCQkJY2xpLkNMRUFSLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB1aS5vdXRwdXQpIH0sCgkJCWNsaS5FWEVDLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bY2xpLkVYRUNdKGV2ZW50LCBjYW4pIH0sCgkJCW1kYi5QTFVHSU4sIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oZGF0YSkgeyBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIGRhdGEsIHVpLm91dHB1dCkgfSkgfSwKCQkJaHRtbC5IRUlHSFQsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuSEVJR0hULCB2YWx1ZTogY2FuLmRpc3BsYXlfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSoxMDAvY2FuLkNvbmZIZWlnaHQoKXx8NTB9XSwgZnVuY3Rpb24obGlzdCkgewoJCQkJCWNhbi5kaXNwbGF5X3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBjYW4uQ29uZkhlaWdodCgpKnBhcnNlSW50KGxpc3RbMF0pLzEwMAoJCQkJCWNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikKCQkJCX0pCgkJCX0KCQkpKTsgdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBhY3Rpb25bc2hvdz8gY2xpLkVYRUM6IGNsaS5DTE9TRV0oZXZlbnQpIH0KCX0sCglfdG9vbGtpdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4udWkudG9vbGtpdCA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sICJ0b29sa2l0Iiwge30sIGNhbi5fb3V0cHV0KQoJfSwKCV9rZXlkb3duOiBmdW5jdGlvbihjYW4pIHsgY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pCgkJY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBjaGF0Lk9OS0VZRE9XTiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLl9rZXlfbGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgbWRiLlBMVUdJTiwgY2FuLl9rZXlfbGlzdCwgY2FuLnVpLmNvbnRlbnQpCgkJfSkKCX0sCglfc2Vzc2lvbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ub25pbXBvcnQuc2VzcyhjYW4sICIiLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnNlc3MoY2FuLCB7CgkJCXBsdWc6IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb25PclNlYXJjaCgicGx1ZyIpKS5yZXZlcnNlKCksCgkJCWV4dHM6IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb25PclNlYXJjaCgiZXh0cyIpKS5yZXZlcnNlKCksCgkJCXRhYnM6IGNhbi5jb3JlLlNwbGl0KG1zZy5PcHRpb25PclNlYXJjaCgidGFicyIpKSwKCQl9KSB9KQoJfSwKCV9zaW1wbGU6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi50YWJ2aWV3W2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gY2FuLl9tc2cKCQljYW4uQ29uZkhlaWdodCgiIiksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsIGh0bWwuT1VUUFVUKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgInNpbXBsZSIpCgl9LAoJX3RhYnM6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi51aS5fdGFicyA9IGNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIFt7dmlldzogInRhYnMifV0sIGNhbi51aS5jb250ZW50KQoJCWNhbi51aS5fcGF0aCA9IGNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIFt7dmlldzogInBhdGgifV0sIGNhbi51aS5jb250ZW50KQoJfSwKCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgeyBpZiAoY2FuLmlzU2ltcGxlTW9kZSgpKSB7IHJldHVybiB9CgkJaWYgKGNhbi5pc0Zsb2F0TW9kZSgpKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbiksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkgfQoKCQl2YXIgd2lkdGggPSBjYW4uQ29uZldpZHRoKCkrKGNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAxNjogMCktKGNhbi51c2VyLmlzV2luZG93cyAmJiAhY2FuLmlzQ21kTW9kZSgpPyAyMDogMCkKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBjYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildfHwod2lkdGgtY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpLzIpCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5jb250ZW50LCB3aWR0aC1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aC1jYW4udWkucHJvZmlsZS5vZmZzZXRXaWR0aCkKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLmRpc3BsYXksIHdpZHRoLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoKQoKCQl2YXIgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCWlmIChjYW4udXNlci5pc01vYmlsZSAmJiBjYW4uaXNGbG9hdE1vZGUoKSkgeyBoZWlnaHQgPSBjYW4uX3Jvb3QuX2hlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCB9CgoJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsKCQkJaWYgKGNhbi51aS5kaXNwbGF5LmRpc3BsYXkgIT0gaHRtbC5OT05FKSB7CgkJCQlpZiAoY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0ID4gY2FuLmJhc2UuTWluKGNhbi5Db25mSGVpZ2h0KCkgLyAyLCAyMDApKSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheV9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLmJhc2UuTWluKGNhbi5Db25mSGVpZ2h0KCkgLyAyLCAyMDApKQoJCQkJfQoJCQl9CgkJCWlmIChjYW4uX3N0YXR1cy5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORSkgeyBoZWlnaHQgKz0gaHRtbC5BQ1RJT05fSEVJR0hUIH0KCQkJdmFyIHJlc3QgPSBjYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQrY2FuLnVpLl90YWJzLm9mZnNldEhlaWdodCtjYW4udWkuX3BhdGgub2Zmc2V0SGVpZ2h0KzQKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkuY29udGVudCwgaGVpZ2h0K2h0bWwuQUNUSU9OX0hFSUdIVC1yZXN0KQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgaGVpZ2h0LWNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvamVjdCwgaGVpZ2h0K2h0bWwuQUNUSU9OX0hFSUdIVCkKCQl9IGVsc2UgeyB2YXIgcmVzdCA9IGNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodDsgaWYgKGhlaWdodCA8IDMyMCkgeyBoZWlnaHQgPSAzMjAgfQoJCQlpZiAoIWNhbi5pc0Z1bGxNb2RlKCkpIHsKCQkJCWNhbi5fbWluX2hlaWdodCA9IGNhbi5fbWluX2hlaWdodHx8aGVpZ2h0LCBoZWlnaHQgPj0gY2FuLl9taW5faGVpZ2h0ICYmIChjYW4uX21pbl9oZWlnaHQgPSBoZWlnaHQpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLk1JTl9IRUlHSFQsIGNhbi5fbWluX2hlaWdodCkKCQkJfQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBjYW4udXNlci5pc01vYmlsZT8gaHRtbC5IRUlHSFQ6IGh0bWwuTUFYX0hFSUdIVCwgaGVpZ2h0LXJlc3QpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQtaHRtbC5BQ1RJT05fSEVJR0hUKQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9qZWN0LCBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQrcmVzdCkKCQl9CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLnByb2ZpbGUsIGh0bWwuSUZSQU1FLCBmdW5jdGlvbihpZnJhbWUpIHsKCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaWZyYW1lLCB7aGVpZ2h0OiBjYW4udWkucHJvZmlsZS5vZmZzZXRIZWlnaHQtaHRtbC5BQ1RJT05fSEVJR0hULTQsIHdpZHRoOiBjYW4udWkucHJvZmlsZS5vZmZzZXRXaWR0aH0pCgkJfSkKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsKCQljYW4ub25pbXBvcnQuem9uZShjYW4sIFsKCQkJe25hbWU6ICJzb3VyY2UiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHZhciB0b3RhbCA9IDAKCQkJCWZ1bmN0aW9uIHNob3cocGF0aCwgdGFyZ2V0KSB7IGNhbi5ydW4oY2FuLnJlcXVlc3Qoe30sIHtkaXJfcm9vdDogcGF0aCwgZGlyX2RlZXA6IHRydWV9KSwgW2ljZS5QV0RdLCBmdW5jdGlvbihtc2cpIHsgdmFyIGxpc3QgPSBtc2cuVGFibGUoKQoJCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZihpdGVtLnBhdGgpID09IDApIHsgaXRlbS5leHBhbmQgPSB0cnVlIH0gfSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGxpc3QsIG5mcy5QQVRILCBpY2UuUFMsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgaXRlbS5wYXRoKSAvLyDmmL7npLrmlofku7YKCQkJCQl9LCB0YXJnZXQpLCBjYW4uU3RhdHVzKCLmlofku7bmlbAiLCB0b3RhbCArPSBtc2cuTGVuZ3RoKCkpCgkJCQl9LCB0cnVlKSB9IGlmIChwYXRoLmxlbmd0aCA9PSAxKSB7IHJldHVybiBzaG93KHBhdGhbMF0sIHRhcmdldCkgfQoKCQkJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgY2FuLmNvcmUuTGlzdChwYXRoLCBmdW5jdGlvbihwYXRoKSB7IHJldHVybiB7bmFtZTogcGF0aCwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBzaG93KHBhdGgsIHRhcmdldCkgfX0gfSksIHRhcmdldCkKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQucHJldmlvdXNTaWJsaW5nLmlubmVySFRNTCA9ICIiIH0pCgkJCX19LAoJCQl7bmFtZTogInBsdWdpbiIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgY2FuLmNvcmUuSXRlbShjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4ge2luZGV4OiBjYW4uYmFzZS50cmltUHJlZml4KGtleSwgImNhbi4iKX0gfSksIGN0eC5JTkRFWCwgaWNlLlBULCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5jb3JlLktleXMoImNhbiIsIGl0ZW0uaW5kZXgpLCBjdHguSU5ERVgpIC8vIOaYvuekuuaPkuS7tgoJCQkJfSwgdGFyZ2V0KQoJCQl9fSwKCQldLCBjYW4udWkucHJvamVjdCkKCX0sCgloaXN0b3J5OiBmdW5jdGlvbihjYW4sIHB1c2gpIHsKCQljYW4uYmFzZS5FcShwdXNoLCBjYW4uaGlzdG9yeVtjYW4uaGlzdG9yeS5sZW5ndGgtMV0pIHx8IGNhbi5oaXN0b3J5LnB1c2gocHVzaCkKCQlyZXR1cm4gY2FuLlN0YXR1cygi6Lez6L2s5pWwIiwgY2FuLmhpc3RvcnkubGVuZ3RoKSwgcHVzaAoJfSwKCXRhYnZpZXc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgZmlsZSwgbGluZSwgY2IsIHNraXAsIHNraXAyKSB7IHZhciBrZXkgPSBjYW4ub25leHBvcnQua2V5cyhjYW4sIGZpbGUsIHBhdGgpCgkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgeyBsb2NhdGlvbi5oYXNoID0gZmlsZStpY2UuRlMrKGxpbmV8fDEpIH0KCQlpZiAoIXNraXAgJiYgY2FuLnRhYnZpZXdba2V5XSkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUocGF0aCtmaWxlKQoJCQljYW4uX21zZyAmJiBjYW4uX21zZy5PcHRpb24obmZzLkxJTkUsIGNhbi5PcHRpb24obmZzLkxJTkUpKSwgY2FuLl9tc2cgPSBjYW4udGFidmlld1trZXldCgkJCWNhbi5PcHRpb24oe3BhdGg6IHBhdGgsIGZpbGU6IGZpbGUsIGxpbmU6IGxpbmV8fGNhbi5fbXNnLk9wdGlvbihuZnMuTElORSl8fDF9KQoJCQlyZXR1cm4gY2FuLl9tc2cuT3B0aW9uKGNhbi5PcHRpb24oKSksIGNhbi5vbnN5bnRheC5faW5pdChjYW4sIGNhbi5fbXNnLCBjYiwgc2tpcDIpCgkJfQoKCQlmdW5jdGlvbiBzaG93KG1zZykgeyB2YXIgc2tpcDIgPSBza2lwOyBjYW4udGFidmlld1trZXldID0gbXNnCgkJCWNhbi5vbmltcG9ydC50YWJzKGNhbiwgW3tuYW1lOiBmaWxlLnNwbGl0KGxpbmUgPT0gY3R4LklOREVYPyBpY2UuUFQ6IGljZS5QUykucG9wKCksIHRleHQ6IGZpbGV9XSwgZnVuY3Rpb24oZXZlbnQsIG1ldGEpIHsKCQkJCWNhbi5fdGFiID0gbXNnLl90YWIgPSBldmVudC50YXJnZXQsIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgZmlsZSwgbXNnLk9wdGlvbihuZnMuTElORSksIGNiLCBmYWxzZSwgc2tpcDIpLCBjYiA9IG51bGwsIHNraXAyID0gZmFsc2UKCQkJfSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJZGVsZXRlKGNhbi50YWJ2aWV3W2tleV0pCgkJCQlkZWxldGUoY2FuLl9jYWNoZV9kYXRhW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJZGVsZXRlKGNhbi51aS5fY29udGVudC5fY2FjaGVbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLl9wcm9maWxlX291dHB1dC5fY2FjaGVbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLmRpc3BsYXlfb3V0cHV0Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCW1zZy5fY29udGVudCAhPSBjYW4udWkuX2NvbnRlbnQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgbXNnLl9jb250ZW50KQoJCQl9LCBjYW4udWkuX3RhYnMsIGZ1bmN0aW9uKGl0ZW0pIHt9KQoJCX0KCgkJY2FuLk9wdGlvbihjYW4ub25pbXBvcnQuaGlzdG9yeShjYW4sIHtwYXRoOiBwYXRoLCBmaWxlOiBmaWxlLCBsaW5lOiBsaW5lfSkpCgkJbGluZSA9PSBjdHguSU5ERVg/IHNob3coY2FuLnJlcXVlc3Qoe30sIHtpbmRleDogZmlsZSwgbGluZTogbGluZX0pKToKCQkJbGluZSA9PSB3ZWIuRFJFQU0/IHNob3coY2FuLnJlcXVlc3Qoe30sIHtpbmRleDogZmlsZSwgbGluZTogbGluZX0pKToKCQkJCWNhbi5ydW4oe30sIFtwYXRoLCBmaWxlXSwgc2hvdywgdHJ1ZSkKCX0sCglwcm9maWxlOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciB3aWR0aCA9IGNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fChjYW4uQ29uZldpZHRoKCktY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpLzIKCQlpZiAobXNnKSB7CgkJCXZhciBzdXAgPSBjYW4udGFidmlld1tjYW4ub25leHBvcnQua2V5cyhjYW4pXQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBmYWxzZSkKCQkJaWYgKG1zZy5SZXN1bHQoKS5pbmRleE9mKCI8aWZyYW1lIikgPiAtMSkgewoJCQkJaWYgKHN1cC5fcHJvZmlsZV9vdXRwdXQgIT0gY2FuLnVpLl9wcm9maWxlX291dHB1dCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBzdXAuX3Byb2ZpbGVfb3V0cHV0KSB9CgkJCQljYW4udWkucHJvZmlsZV9vdXRwdXQgPSBzdXAuX3Byb2ZpbGVfb3V0cHV0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LnBhcmVudE5vZGUsIFt7dmlldzogIm91dHB1dCIsIGlubmVyOiBtc2cuUmVzdWx0KCl9XSkub3V0cHV0CgkJCX0gZWxzZSB7CgkJCQljYW4udWkucHJvZmlsZV9vdXRwdXQgPSBzdXAuX3Byb2ZpbGVfb3V0cHV0ID0gY2FuLnVpLl9wcm9maWxlX291dHB1dAoJCQkJY2FuLm9uaW1wb3J0LnByb2Nlc3MoY2FuLCBtc2csIGNhbi51aS5fcHJvZmlsZV9vdXRwdXQsIHdpZHRoLCBjYW4udWkucHJvZmlsZS5vZmZzZXRIZWlnaHQpCgkJCX0KCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgdHJ1ZSkKCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIHRydWUpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCX0sCglkaXNwbGF5OiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWlnaHQgPSBjYW4uZGlzcGxheV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildfHx7c2g6IGNhbi5Db25mSGVpZ2h0KCkvMn1bY2FuLnBhcnNlXXx8Y2FuLkNvbmZIZWlnaHQoKS80CgkJaWYgKG1zZykgewoJCQljYW4ub25pbXBvcnQucHJvY2VzcyhjYW4sIG1zZywgY2FuLnVpLmRpc3BsYXlfb3V0cHV0LCBjYW4udWkuZGlzcGxheS5vZmZzZXRXaWR0aCwgaGVpZ2h0KQoJCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpLCBjYW4udWkuZGlzcGxheV9zdGF0dXMpCgkJfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuZGlzcGxheSwgdHJ1ZSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCXByb2Nlc3M6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpID09ICJfZmllbGQiKSB7CgkJCW1zZy5UYWJsZShmdW5jdGlvbihtZXRhKSB7IG1ldGEuZGlzcGxheSA9IG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKQoJCQkJY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBtZXRhLCB0YXJnZXQsIGZ1bmN0aW9uKHN1YikgeyB3aWR0aCAmJiBzdWIuQ29uZldpZHRoKHdpZHRoKSwgaGVpZ2h0ICYmIHN1Yi5Db25mSGVpZ2h0KGhlaWdodCksIHN1Yi5Gb2N1cygpIH0pCgkJCX0pCgkJfSBlbHNlIGlmIChtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkgIT0gIiIpIHsKCQkJY2FuLm9uYXBwZW5kLl9vdXRwdXQoY2FuLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKSwgdGFyZ2V0LCBmYWxzZSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSkgfSkKCQl9IGVsc2UgewoJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIG51bGwsIHRhcmdldCksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCX0sCgl0b29sa2l0OiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiKSB7IG1ldGEubXNnID0gdHJ1ZQoJCWNhbi5vbmltcG9ydC5wbHVnKGNhbiwgbWV0YSwgY2FuLnVpLnRvb2xraXQub3V0cHV0LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS00Kmh0bWwuQUNUSU9OX0hFSUdIVCksIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKQoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgoJCQljYW4uX3N0YXR1cy5hcHBlbmRDaGlsZChzdWIuX2xlZ2VuZCksIHN1Yi5fbGVnZW5kLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fc3RhdHVzLCBpY2UuUFQraHRtbC5TRUxFQ1QpWzBdID09IGV2ZW50LnRhcmdldCkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBldmVudC50YXJnZXQsIGh0bWwuU0VMRUNUKQoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBzdWIuX3RhcmdldCwgaHRtbC5TRUxFQ1QpCgkJCQkJcmV0dXJuCgkJCQl9CgkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLnRvb2xraXQub3V0cHV0LCBodG1sLkZJRUxEU0VULCBzdWIuX3RhcmdldCksIHN1Yi5Gb2N1cygpCgkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9zdGF0dXMsIGh0bWwuTEVHRU5ELCBldmVudC50YXJnZXQpCgkJCQlpZiAobWV0YS5tc2cgPT0gdHJ1ZSkgeyBtZXRhLm1zZyA9IGZhbHNlLCBzdWIuVXBkYXRlKCkgfQoJCQl9LCBzdWIuc2VsZWN0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBzdWIuX2xlZ2VuZC5jbGljaygpLCBzdWIgfQoJCQlzdWIub25hY3Rpb24uY2xvc2UgPSBmdW5jdGlvbigpIHsgc3ViLnNlbGVjdCgpIH0KCQkJc3ViLl9sZWdlbmQub25tb3VzZWVudGVyID0gbnVsbAoJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQl9KQoJfSwKCWV4dHM6IGZ1bmN0aW9uKGNhbiwgdXJsLCBjYikgewoJCWNhbi5yZXF1aXJlKFt1cmxdLCBmdW5jdGlvbigpIHt9LCBmdW5jdGlvbihjYW4sIG5hbWUsIHN1YikgeyBzdWIuX2luaXQoY2FuLCBjYW4uYmFzZS5QYXJzZVVSTChzdWIuX3BhdGgpLCBmdW5jdGlvbihzdWIpIHsKCQkJY2FuLmV4dGVudGlvbnNbdXJsLnNwbGl0KCI/IilbMF1dID0gc3ViLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQl9KSB9KQoJfSwKCXNlc3M6IGZ1bmN0aW9uKGNhbiwgc2VzcywgY2IpIHsgc2VzcyA9IHNlc3N8fGNhbi51c2VyLmxvY2FsU3RvcmFnZShjYW4sICJ3ZWIuY29kZS5pbm5lci5zZXNzIikKCQljYW4uY29yZS5OZXh0KHNlc3MucGx1ZywgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogaXRlbX0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFtpdGVtXSA9IHN1YiwgbmV4dCgpIH0pIH0sIGZ1bmN0aW9uKCkgewoJCQljYW4uY29yZS5OZXh0KHNlc3MuZXh0cywgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25pbXBvcnQuZXh0cyhjYW4sIGl0ZW0sIG5leHQpIH0sIGZ1bmN0aW9uKCkgewoJCQkJdmFyIHBhdGggPSBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgZmlsZSA9IGNhbi5PcHRpb24obmZzLkZJTEUpLCBsaW5lID0gY2FuLk9wdGlvbihuZnMuTElORSkKCQkJCWNhbi5iYXNlLmdldFZhbGlkKHNlc3MudGFicyk/IGNhbi5jb3JlLk5leHQoc2Vzcy50YWJzLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IHZhciBscyA9IGl0ZW0uc3BsaXQoaWNlLkRGKTsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsc1swXSwgbHNbMV0sIGxzWzJdLCBuZXh0KSB9LAoJCQkJCWZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGgsIGZpbGUsIGxpbmUsIGNiKSB9KTogY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJCX0pCgkJfSkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwgCgkiY2FuLmNvZGUuaW5uZXIua2V5bWFwIjogc2h5KCLmjInplK4iLCB7fSwgWyJtb2RlIiwgImtleSIsIGljZS5MSVNULCBpY2UuQkFDS10sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJY2FuLmNvcmUuSXRlbShjYW4ub25rZXltYXAuX21vZGUsIGZ1bmN0aW9uKG1vZGUsIHZhbHVlKSB7CgkJCSghY21kc1swXSB8fCBjbWRzWzBdID09IG1vZGUpICYmIGNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgZnVuYykgewoJCQkJaWYgKGNtZHNbMF0gPT0gbW9kZSAmJiBjbWRzWzFdID09IGtleSkgewoJCQkJCW1zZy5QdXNoKCJrZXkiLCAibW9kZSIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwgbW9kZSkKCQkJCQltc2cuUHVzaCgia2V5IiwgImtleSIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwga2V5KQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAiaGVscCIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwgZnVuYy5oZWxwKQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAiZnVuYyIpCgkJCQkJbXNnLlB1c2goInZhbHVlIiwgZnVuYy50b1N0cmluZygpKQoJCQkJfSBlbHNlIGlmICghY21kc1swXSB8fCAhY21kc1sxXSkgewoJCQkJCW1zZy5QdXNoKGtpdC5EaWN0KCJtb2RlIiwgbW9kZSwgImtleSIsIGtleSwgImhlbHAiLCBmdW5jLmhlbHB8fGZ1bmMudG9TdHJpbmcoKSkpCgkJCQl9CgkJCX0pCgkJfSksIG1zZy5TdGF0dXNUaW1lQ291bnQoKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05TWU5UQVgsIHtoZWxwOiAi6K+t5rOV6auY5LquIiwgbGlzdDogWyJrZXl3b3JkIiwgInByZWZpeCIsICJsaW5lIl0sIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHNraXApIHsKCQlpZiAoY2FuLnVpLl9wYXRoKSB7CgkJCWNhbi51aS5fcGF0aC5pbm5lckhUTUwgPSBtc2cuT3B0aW9uKGN0eC5JTkRFWCk/IG1zZy5PcHRpb24obmZzLkxJTkUpID09IHdlYi5EUkVBTT8KCQkJCS8qIGRyZWFtICovIGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogbXNnLk9wdGlvbihuZnMuRklMRSksIHRvcGljOiBjYW4ubWlzYy5TZWFyY2goY2FuLCAidG9waWMiKX0sIHRydWUpKToKCQkJCS8qIGluZGV4ICovIG1zZy5PcHRpb24obmZzLkZJTEUpOiAvKiBmaWxlICovIGNhbi5iYXNlLlBhdGgobXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpKQoJCX0KCQljYW4udWkuY3VycmVudCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmN1cnJlbnQsICFtc2cuT3B0aW9uKGN0eC5JTkRFWCkpCgoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbihjYWNoZV9kYXRhKSB7CgkJCWNhbi5maWxlICYmIChjYWNoZV9kYXRhW2Nhbi5maWxlXSA9IHtjdXJyZW50OiBjYW4uY3VycmVudCwgbWF4OiBjYW4ubWF4LAoJCQkJcHJvZmlsZV9kaXNwbGF5OiBjYW4udWkucHJvZmlsZS5zdHlsZS5kaXNwbGF5LCBkaXNwbGF5X2Rpc3BsYXk6IGNhbi51aS5kaXNwbGF5LnN0eWxlLmRpc3BsYXksCgkJCX0pCgkJCWNhbi5maWxlID0gY2FuLmJhc2UuUGF0aChtc2cuT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpCgkJCWNhbi5wYXJzZSA9IGNhbi5iYXNlLkV4dChjYW4uZmlsZSksIGNhbi5TdGF0dXMoIuaooeW8jyIsICJwbHVnaW4iKQoKCQkJdmFyIHAgPSBjYWNoZV9kYXRhW2Nhbi5maWxlXTsgcCAmJiAoY2FuLmN1cnJlbnQgPSBwLmN1cnJlbnQsIGNhbi5tYXggPSBwLm1heCkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvZmlsZSwge2Rpc3BsYXk6IHA/IHAucHJvZmlsZV9kaXNwbGF5OiBodG1sLk5PTkV9KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB7ZGlzcGxheTogcD8gcC5kaXNwbGF5X2Rpc3BsYXk6IGh0bWwuTk9ORX0pCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkuX3RhYnMsIGh0bWwuRElWX1RBQlMsIG1zZy5fdGFiKQoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9hY3Rpb24sIGh0bWwuRElWX1RBQlMsIG1zZy5fdGFiKQoJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJCQltc2cuT3B0aW9uKGN0eC5JTkRFWCkgJiYgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuT1BUSU9OX0FSR1MpWzBdKQoJCQl9KQoKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLl9jb250ZW50LnBhcmVudE5vZGUsIGNhbi5wYWdlLktleXMoImRpdi5jb250ZW50IiwgaHRtbC5JRlJBTUUpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpZiAoY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIGl0ZW0gPT0gbXNnLl9jb250ZW50KSkgeyBjYW4udWkuY29udGVudCA9IG1zZy5fY29udGVudCB9CgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5fcHJvZmlsZV9vdXRwdXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cygiZGl2Lm91dHB1dCIpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpZiAoY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIGl0ZW0gPT0gbXNnLl9wcm9maWxlX291dHB1dCkpIHsgbXNnLl9wcm9maWxlX291dHB1dCB9CgkJCX0pCgkJCXJldHVybiBjYW4uZmlsZQoJCX0sIGNhbi51aS5fY29udGVudCwgY2FuLnVpLl9wcm9maWxlX291dHB1dCwgY2FuLnVpLmRpc3BsYXlfb3V0cHV0KSAmJiAhc2tpcCkgewoJCQlyZXR1cm4gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUobnVsbCwgY2FuLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQlpZiAobXNnLk9wdGlvbihjdHguSU5ERVgpKSB7CgkJCWlmIChtc2cuT3B0aW9uKG5mcy5MSU5FKSA9PSB3ZWIuRFJFQU0pIHsKCQkJCWlmIChtc2cuX2NvbnRlbnQpIHsgcmV0dXJuIH0KCQkJCWNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t0eXBlOiBodG1sLklGUkFNRSwgc3JjOiBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IG1zZy5PcHRpb24obmZzLkZJTEUpLCB0b3BpYzogY2FuLm1pc2MuU2VhcmNoKGNhbiwgInRvcGljIil9LCB0cnVlKSwgd2lkdGg6IGNhbi51aS5jb250ZW50Lm9mZnNldFdpZHRoLCBoZWlnaHQ6IGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodH1dLCBjYW4udWkuY29udGVudCkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJfQoKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnVpLl9jb250ZW50LCB0cnVlKQoJCQlyZXR1cm4gY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCB7aW5kZXg6IG1zZy5PcHRpb24oY3R4LklOREVYKX0sIGNhbi51aS5jb250ZW50LCBmdW5jdGlvbihzdWIpIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUKSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi51aS5jb250ZW50Lm9mZnNldFdpZHRoKSkKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBzdWIuRm9jdXMoKSB9KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgoJCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5iYWNrKHt9LCBjYW4pLCBtc2cuX3RhYi5fY2xvc2UoKSB9CgkJCQlzdWIub25pbXBvcnQuX29wZW4gPSBmdW5jdGlvbihzdWIsIG1zZywgX2FyZykgeyB2YXIgdXJsID0gY2FuLmJhc2UuUGFyc2VVUkwoX2FyZyksIGxzID0gdXJsLm9yaWdpbi5zcGxpdCgiL2NoYXQvcG9kLyIpCgkJCQkJaWYgKF9hcmcuaW5kZXhPZihsb2NhdGlvbi5vcmlnaW4pID09IDAgJiYgbHMubGVuZ3RoID4gMSkgewoJCQkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbHNbMV0uc3BsaXQoIi8iKVswXSwgd2ViLkRSRUFNKSwgc3ViLlVwZGF0ZSgpIC8vIOaYvuekuuepuumXtAoJCQkJCX0KCQkJCQlyZXR1cm4gY2FuLnVzZXIub3BlbihfYXJnKSwgc3ViLlVwZGF0ZSgpCgkJCQl9CgkJCX0pCgkJfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuY29udGVudCA9IG1zZy5fY29udGVudCA9IGNhbi51aS5fY29udGVudCwgdHJ1ZSkKCgkJZnVuY3Rpb24gaW5pdChwKSB7CgkJCWNhbi5tYXggPSAwLCBjYW4uY29yZS5MaXN0KGNhbi5scyA9IG1zZy5SZXN1bHQoKS5zcGxpdChpY2UuTkwpLCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbmFjdGlvbi5hcHBlbmRMaW5lKGNhbiwgaXRlbSkgfSkKCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUobnVsbCwgY2FuLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoKCQkJbXNnLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZigid2Vic2l0ZS8iKSA9PSAwICYmIGNhbi5vbmFjdGlvbltjbGkuU0hPV10oe30sIGNhbikKCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCBjYW4uX2ZpZWxkcywgY2hhdC5QTFVHSU4pKSB7CgkJCQlwICYmIHAucmVuZGVyICYmIGNhbi5vbmFjdGlvbltjbGkuU0hPV10oe30sIGNhbikKCQkJCXAgJiYgcC5lbmdpbmUgJiYgY2FuLm9uYWN0aW9uW2NsaS5FWEVDXSh7fSwgY2FuKQoJCQl9CgkJfQoJCWNhbi5Db25mKCJwbHVnIikgJiYgKGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdID0gY2FuLkNvbmYoInBsdWciKSkKCQl2YXIgcCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdOyAhcD8gY2FuLnJ1bkFjdGlvbih7fSwgbWRiLlBMVUdJTiwgW2Nhbi5wYXJzZSwgbXNnLk9wdGlvbihuZnMuRklMRSksIG1zZy5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWluaXQocCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSkpCgkJfSk6IGluaXQocCkKCX0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgbGluZSkgeyBpZiAobGluZS5pbmRleE9mKCI8aHRtbCIpID09IDApIHsgcmV0dXJuIGxpbmUgfQoJCWxpbmUgPSBjYW4ucGFnZS5yZXBsYWNlKGNhbiwgbGluZXx8IiIpCgoJCWZ1bmN0aW9uIHdyYXAodHlwZSwgc3RyKSB7IHJldHVybiB0eXBlPyAnPHNwYW4gY2xhc3M9IicrdHlwZSsnIj4nK3N0cisnPC9zcGFuPic6IHN0ciB9CgkJdmFyIHAgPSBjYW4ub25zeW50YXhbY2FuLnBhcnNlXTsgaWYgKCFwKSB7IHJldHVybiBsaW5lIH0gcCA9IGNhbi5vbnN5bnRheFtwLmxpbmtdfHxwLCBwLnNwbGl0ID0gcC5zcGxpdHx8e30KCQlwLmtleXdvcmQgJiYgKGxpbmUgPSBjYW4uY29yZS5MaXN0KGNhbi5jb3JlLlNwbGl0KGxpbmUsIHAuc3BsaXQuc3BhY2V8fCJcdCAiLCBwLnNwbGl0Lm9wZXJhdG9yfHwie1soLiw6OyF8PD4pXX0iLCB7ZGV0YWlsOiB0cnVlfSksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnJheSkgewoJCQlpdGVtID0gY2FuLmJhc2UuaXNPYmplY3QoaXRlbSk/IGl0ZW06IHt0ZXh0OiBpdGVtfTsgdmFyIHRleHQgPSBpdGVtLnRleHQsIHR5cGUgPSBpdGVtLmtleXdvcmR8fHAua2V5d29yZFt0ZXh0XQoKCQkJc3dpdGNoIChpdGVtLnR5cGUpIHsgY2FzZSBodG1sLlNQQUNFOiByZXR1cm4gdGV4dAoJCQkJY2FzZSBsYW5nLlNUUklORzogcmV0dXJuIHdyYXAobGFuZy5TVFJJTkcsIGl0ZW0ubGVmdCt0ZXh0K2l0ZW0ucmlnaHQpCgkJCQlkZWZhdWx0OiByZXR1cm4gd3JhcCh0eXBlLCB0ZXh0KQoJCQl9CgkJfSkuam9pbigiIikpCgoJCXAucHJlZml4ICYmIGNhbi5jb3JlLkl0ZW0ocC5wcmVmaXgsIGZ1bmN0aW9uKHByZSwgdHlwZSkgeyBpZiAoY2FuLmJhc2UuYmVnaW5XaXRoKGxpbmUsIHByZSkpIHsgbGluZSA9IHdyYXAodHlwZSwgbGluZSkgfSB9KQoJCXAuc3VmZml4ICYmIGNhbi5jb3JlLkl0ZW0ocC5zdWZmaXgsIGZ1bmN0aW9uKGVuZCwgdHlwZSkgeyBpZiAoY2FuLmJhc2UuZW5kV2l0aChsaW5lLCBlbmQpKSB7IGxpbmUgPSB3cmFwKHR5cGUsIGxpbmUpIH0gfSkKCQlyZXR1cm4gbGluZQoJfSwKCWdvOiB7CgkJa2V5d29yZDogewoJCQkicGFja2FnZSI6ICJrZXl3b3JkIiwKCQkJImltcG9ydCI6ICJrZXl3b3JkIiwKCQkJInR5cGUiOiAia2V5d29yZCIsCgkJCSJzdHJ1Y3QiOiAia2V5d29yZCIsCgkJCSJpbnRlcmZhY2UiOiAia2V5d29yZCIsCgkJCSJjb25zdCI6ICJrZXl3b3JkIiwKCQkJInZhciI6ICJrZXl3b3JkIiwKCQkJImZ1bmMiOiAia2V5d29yZCIsCgoJCQkiaWYiOiAia2V5d29yZCIsCgkJCSJlbHNlIjogImtleXdvcmQiLAoJCQkiZm9yIjogImtleXdvcmQiLAoJCQkicmFuZ2UiOiAia2V5d29yZCIsCgkJCSJicmVhayI6ICJrZXl3b3JkIiwKCQkJImNvbnRpbnVlIjogImtleXdvcmQiLAoJCQkic3dpdGNoIjogImtleXdvcmQiLAoJCQkiY2FzZSI6ICJrZXl3b3JkIiwKCQkJImRlZmF1bHQiOiAia2V5d29yZCIsCgkJCSJmYWxsdGhyb3VnaCI6ICJrZXl3b3JkIiwKCQkJImdvIjogImtleXdvcmQiLAoJCQkic2VsZWN0IjogImtleXdvcmQiLAoJCQkiZGVmZXIiOiAia2V5d29yZCIsCgkJCSJyZXR1cm4iOiAia2V5d29yZCIsCgoJCQkiZmFsc2UiOiAiY29uc3RhbnQiLAoJCQkidHJ1ZSI6ICJjb25zdGFudCIsCgkJCSJuaWwiOiAiY29uc3RhbnQiLAoJCQkiaW90YSI6ICJjb25zdGFudCIsCgkJCSItMSI6ICJjb25zdGFudCIsCgkJCSIwIjogImNvbnN0YW50IiwKCQkJIjEiOiAiY29uc3RhbnQiLAoJCQkiMiI6ICJjb25zdGFudCIsCgkJCSIzIjogImNvbnN0YW50IiwKCgkJCSJpbnQiOiAiZGF0YXR5cGUiLCAiaW50OCI6ICJkYXRhdHlwZSIsICJpbnQxNiI6ICJkYXRhdHlwZSIsICJpbnQzMiI6ICJkYXRhdHlwZSIsICJpbnQ2NCI6ICJkYXRhdHlwZSIsCgkJCSJ1aW50IjogImRhdGF0eXBlIiwgInVpbnQ4IjogImRhdGF0eXBlIiwgInVpbnQxNiI6ICJkYXRhdHlwZSIsICJ1aW50MzIiOiAiZGF0YXR5cGUiLCAidWludDY0IjogImRhdGF0eXBlIiwKCQkJImZsb2F0MzIiOiAiZGF0YXR5cGUiLCAiZmxvYXQ2NCI6ICJkYXRhdHlwZSIsICJjb21wbGV4NjQiOiAiZGF0YXR5cGUiLCAiY29tcGxleDEyOCI6ICJkYXRhdHlwZSIsCgkJCSJydW5lIjogImRhdGF0eXBlIiwgInN0cmluZyI6ICJkYXRhdHlwZSIsICJieXRlIjogImRhdGF0eXBlIiwgInVpbnRwdHIiOiAiZGF0YXR5cGUiLAoJCQkiYm9vbCI6ICJkYXRhdHlwZSIsICJlcnJvciI6ICJkYXRhdHlwZSIsICJjaGFuIjogImRhdGF0eXBlIiwgIm1hcCI6ICJkYXRhdHlwZSIsCgoJCQkibXNnIjogImZ1bmN0aW9uIiwgIm0iOiAiZnVuY3Rpb24iLAoJCQkiaW5pdCI6ICJmdW5jdGlvbiIsICJtYWluIjogImZ1bmN0aW9uIiwgInByaW50IjogImZ1bmN0aW9uIiwgInByaW50bG4iOiAiZnVuY3Rpb24iLCAicGFuaWMiOiAiZnVuY3Rpb24iLCAicmVjb3ZlciI6ICJmdW5jdGlvbiIsCgkJCSJuZXciOiAiZnVuY3Rpb24iLCAibWFrZSI6ICJmdW5jdGlvbiIsICJsZW4iOiAiZnVuY3Rpb24iLCAiY2FwIjogImZ1bmN0aW9uIiwgImNvcHkiOiAiZnVuY3Rpb24iLCAiYXBwZW5kIjogImZ1bmN0aW9uIiwgImRlbGV0ZSI6ICJmdW5jdGlvbiIsICJjbG9zZSI6ICJmdW5jdGlvbiIsCgkJCSJjb21wbGV4IjogImZ1bmN0aW9uIiwgInJlYWwiOiAiZnVuY3Rpb24iLCAiaW1hZyI6ICJmdW5jdGlvbiIsCgkJfSwKCX0sCgl6bWw6IHsKCQlwcmVmaXg6IHsKCQkJIiMgIjogImNvbW1lbnQiLAoJCX0sCgkJa2V5d29yZDogewoJCQkicmV0dXJuIjogImtleXdvcmQiLAoKCQkJImhlYWQiOiAia2V5d29yZCIsCgkJCSJsZWZ0IjogImtleXdvcmQiLAoJCQkibWFpbiI6ICJrZXl3b3JkIiwKCQkJImZvb3QiOiAia2V5d29yZCIsCgkJCSJ0YWJzIjogImtleXdvcmQiLAoKCQkJImluZGV4IjogImZ1bmN0aW9uIiwKCQkJImFjdGlvbiI6ICJmdW5jdGlvbiIsCgkJCSJhcmdzIjogImZ1bmN0aW9uIiwKCQkJInR5cGUiOiAiZnVuY3Rpb24iLAoJCQkic3R5bGUiOiAiZnVuY3Rpb24iLAoJCQkid2lkdGgiOiAiZnVuY3Rpb24iLAoKCQkJImF1dG8iOiAiY29uc3RhbnQiLAoJCQkidXNlcm5hbWUiOiAiY29uc3RhbnQiLAoJCX0sCgl9LAoJY3NzOiB7CgkJa2V5d29yZDogewoJCQkiYm9keSI6ICJrZXl3b3JkIiwKCQkJImRpdiI6ICJrZXl3b3JkIiwKCQkJInNwYW4iOiAia2V5d29yZCIsCgkJCSJmb3JtIjogImtleXdvcmQiLAoJCQkiZmllbGRzZXQiOiAia2V5d29yZCIsCgkJCSJsZWdlbmQiOiAia2V5d29yZCIsCgkJCSJzZWxlY3QiOiAia2V5d29yZCIsCgkJCSJ0ZXh0YXJlYSI6ICJrZXl3b3JkIiwKCQkJImlucHV0IjogImtleXdvcmQiLAoJCQkidGFibGUiOiAia2V5d29yZCIsCgkJCSJ0ciI6ICJrZXl3b3JkIiwKCQkJInRoIjogImtleXdvcmQiLAoJCQkidGQiOiAia2V5d29yZCIsCgoJCQkiYmFja2dyb3VuZC1jb2xvciI6ICJmdW5jdGlvbiIsCgkJCSJmb250LWZhbWlseSI6ICJmdW5jdGlvbiIsCgkJCSJmb250LXdlaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJmb250LXNpemUiOiAiZnVuY3Rpb24iLAoJCQkiY29sb3IiOiAiZnVuY3Rpb24iLAoJCQkid2lkdGgiOiAiZnVuY3Rpb24iLAoJCQkiaGVpZ2h0IjogImZ1bmN0aW9uIiwKCQkJInBhZGRpbmciOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbiI6ICJmdW5jdGlvbiIsCgkJCSJwb3NpdGlvbiI6ICJmdW5jdGlvbiIsCgkJCSJsZWZ0IjogImZ1bmN0aW9uIiwKCQkJInRvcCI6ICJmdW5jdGlvbiIsCgkJCSJyaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiZGlzcGxheSI6ICJmdW5jdGlvbiIsCgkJCSJvdmVyZmxvdyI6ICJmdW5jdGlvbiIsCgkJCSJmbG9hdCI6ICJmdW5jdGlvbiIsCgkJCSJjbGVhciI6ICJmdW5jdGlvbiIsCgkJCSJjdXJzb3IiOiAiZnVuY3Rpb24iLAoKCQkJInotaW5kZXgiOiAiZnVuY3Rpb24iLAoJCQkidGFiLXNpemUiOiAiZnVuY3Rpb24iLAoJCQkid29yZC1icmVhayI6ICJmdW5jdGlvbiIsCgkJCSJ3aGl0ZS1zcGFjZSI6ICJmdW5jdGlvbiIsCgkJCSJ0ZXh0LWFsaWduIjogImZ1bmN0aW9uIiwKCQkJInZlcnRpY2FsLWFsaWduIjogImZ1bmN0aW9uIiwKCQkJIm1pbi13aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJtYXgtd2lkdGgiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZy1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJInBhZGRpbmctdG9wIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci10b3AiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1ib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXJhZGl1cyI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItc3BhY2luZyI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tbGVmdCI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tdG9wIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1yaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tYm90dG9tIjogImZ1bmN0aW9uIiwKCQkJImJveC1zaGFkb3ciOiAiZnVuY3Rpb24iLAoKCQkJIjAiOiAiY29uc3RhbnQiLAoJCQkiMTBweCI6ICJjb25zdGFudCIsCgkJCSIyMHB4IjogImNvbnN0YW50IiwKCQkJImN5YW4iOiAiY29uc3RhbnQiLAoJCQkiZ3JheSI6ICJjb25zdGFudCIsCgkJCSJ5ZWxsb3ciOiAiY29uc3RhbnQiLAoJCQkiYmxhY2siOiAiY29uc3RhbnQiLAoJCQkid2hpdGUiOiAiY29uc3RhbnQiLAoJCQkiYmx1ZSI6ICJjb25zdGFudCIsCgkJCSJyZWQiOiAiY29uc3RhbnQiLAoJCQkiZ3JlZW4iOiAiY29uc3RhbnQiLAoJCQkibWFnZW50YSI6ICJjb25zdGFudCIsCgoJCQkibW9ub3NwYWNlIjogImNvbnN0YW50IiwKCQkJImJvbGQiOiAiY29uc3RhbnQiLAoJCQkic29saWQiOiAiY29uc3RhbnQiLAoJCQkibm9uZSI6ICJjb25zdGFudCIsCgkJCSJibG9jayI6ICJjb25zdGFudCIsCgkJCSJjb250ZXh0cyI6ICJjb25zdGFudCIsCgkJCSJib3RoIjogImNvbnN0YW50IiwKCQkJImF1dG8iOiAiY29uc3RhbnQiLAoKCQkJImNlbnRlciI6ICJjb25zdGFudCIsCgkJCSJyZWxhdGl2ZSI6ICJjb25zdGFudCIsCgkJCSJhYnNvbHV0ZSI6ICJjb25zdGFudCIsCgkJCSJzdGlja3kiOiAiY29uc3RhbnQiLAoJCQkiZml4ZWQiOiAiY29uc3RhbnQiLAoJCX0sCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIuWvvOWFpeaVsOaNriIsCglfbW9kZTogewoJCXBsdWdpbjogewoJCQlFc2NhcGU6IHNoeSgi5YiH5o2i5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY2xlYXIoZXZlbnQsIGNhbikgfSksCgkJCWc6IHNoeSgi5pCc57SiIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaQnOe0oiJdKGV2ZW50LCBjYW4pIH0pLAoJCQlmOiBzaHkoIuaJk+W8gOaWh+S7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmiZPlvIAiXShldmVudCwgY2FuKSB9KSwKCQkJcjogc2h5KCLmiafooYzlkb3ku6QiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikgfSksCgkJCXY6IHNoeSgi5riy5p+T55WM6Z2iIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pIH0pLAoJCQl4OiBzaHkoIuWFs+mXreagh+etviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLl90YWIuX2Nsb3NlKCkgfSksCgoJCQloOiBzaHkoIuaJk+W8gOW3pui+ueagh+etviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG5leHQgPSBjYW4uX3RhYi5wcmV2aW91c1NpYmxpbmc7IG5leHQgJiYgbmV4dC5jbGljaygpIH0pLAoJCQlsOiBzaHkoIuaJk+W8gOWPs+i+ueagh+etviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG5leHQgPSBjYW4uX3RhYi5uZXh0U2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkgfSksCgkJCWo6IHNoeSgi5ZCR5LiL5rua5YqoIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJaWYgKGNhbi51aS5jb250ZW50ICE9IGNhbi51aS5fY29udGVudCkgewoJCQkJCWNhbi51aS5jb250ZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgKz0gMTYKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLmN1cnJlbnQuc2Nyb2xsKDEpCgkJCQl9CgkJCX0pLAoJCQlrOiBzaHkoIuWQkeS4iua7muWKqCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCWlmIChjYW4udWkuY29udGVudCAhPSBjYW4udWkuX2NvbnRlbnQpIHsKCQkJCQljYW4udWkuY29udGVudC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIC09IDE2CgkJCQl9IGVsc2UgewoJCQkJCWNhbi5jdXJyZW50LnNjcm9sbCgtMSkKCQkJCX0KCQkJfSksCgkJCUo6IHNoeSgi5ZCR5LiL5rua5bGPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQud2luZG93KCktMykgfSksCgkJCUs6IHNoeSgi5ZCR5LiK5rua5bGPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uY3VycmVudC5zY3JvbGwoLWNhbi5jdXJyZW50LndpbmRvdygpKzMpIH0pLAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBsaXN0OiBbIuaQnOe0oiIsICLmiZPlvIAiXSwKCV90cmFuczoge3NvdXJjZTogIua6kOeggSIsIG1vZHVsZTogIuaooeWdlyIsIGRyZWFtczogIuepuumXtCIsIGxvYWQ6ICLliqDovb0iLCBsaW5rOiAi6ZO+5o6lIiwgd2lkdGg6ICLlrr3luqYiLCBoZWlnaHQ6ICLpq5jluqYiLCB3ZWJzaXRlOiAi572R6aG1In0sCgki5pCc57SiIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRSwgW2N0eC5BQ1RJT04sIG5mcy5UQUdTLCBuZnMuR1JFUCwgY2xpLk1BS0VdXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4udWkuc2VhcmNoLlVwZGF0ZSh7fSwgW2N0eC5BQ1RJT04sIGRhdGEuYWN0aW9uLCBkYXRhLm5hbWVdKQoJCX0pCgl9LAoJIuaJk+W8gCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbmZzLkZJTEVdLCBmdW5jdGlvbihsaXN0KSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGxpc3RbMF0pIH0pCgl9LAoJc2VzczogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25leHBvcnQuc2VzcyhjYW4pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKSB9LAoJbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBmaWxlID0gY2FuLmJhc2UuUGF0aCgiL3JlcXVpcmUvIiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCWRlbGV0ZShWb2xjYW5vcy5tZXRhLmNhY2hlW2ZpbGVdKSwgZXZhbCgiXG5fY2FuX25hbWUgPSBcIiIrZmlsZSsiXCJcbiIrY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSsiXG5fY2FuX25hbWUgPSBcIlwiXG5jb25zb2xlLmxvZyhcIm9uY2VcIikiKQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5SRU5ERVIsIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQucHJvZmlsZShjYW4sIG1zZykKCQl9KQoJfSwKCXNob3c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmuLLmn5PkuK0uLi4ifSkKCQlpZiAoY2FuLmJhc2UuZW5kV2l0aChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgIi5qcyIpKSB7CgkJCXZhciBmaWxlID0gY2FuLmJhc2UuUGF0aCgiL3JlcXVpcmUvIiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCQlkZWxldGUoVm9sY2Fub3MubWV0YS5jYWNoZVtmaWxlXSksIGV2YWwoIlxuX2Nhbl9uYW1lID0gXCIiK2ZpbGUrIlwiXG4iK2Nhbi5vbmV4cG9ydC5jb250ZW50KGNhbikrIlxuX2Nhbl9uYW1lID0gXCJcIlxuY29uc29sZS5sb2coXCJvbmNlXCIpIikKCQl9CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLlJFTkRFUiwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9maWxlKGNhbiwgbXNnKQoJCX0pCgl9LAoJZXhlYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwge190b2FzdDogIuaJp+ihjOS4rS4uLiIsICJzb21lIjogInJ1biJ9KQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5FTkdJTkUsIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuZGlzcGxheShjYW4sIG1zZykKCQl9KQoJfSwKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCAiLmlucHV0LmZsb2F0IiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkgfSkubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3N0YXR1cywgImxlZ2VuZC5zZWxlY3QiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmNsaWNrKCksIGl0ZW0gfSkubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoKCQlpZiAoY2FuLnVpLmRpc3BsYXkuc3R5bGUuZGlzcGxheSA9PSAiIikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5kaXNwbGF5KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0KCQlpZiAoY2FuLnVpLnByb2ZpbGUuc3R5bGUuZGlzcGxheSA9PSAiIikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9maWxlKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCX0sCgliYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5oaXN0b3J5LnBvcCgpOyB2YXIgbGFzdCA9IGNhbi5oaXN0b3J5LnBvcCgpCgkJbGFzdCAmJiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGxhc3QucGF0aCwgbGFzdC5maWxlLCBsYXN0LmxpbmUpCgkJY2FuLlN0YXR1cygi6Lez6L2s5pWwIiwgY2FuLmhpc3RvcnkubGVuZ3RoKQoJfSwKCglzY3JvbGxMaW5lOiBmdW5jdGlvbihjYW4sIGNvdW50KSB7IHZhciBzaXplID0gMjA7IGNhbi5jdXJyZW50LnNjcm9sbChjb3VudCpzaXplKSB9LAoJYXBwZW5kTGluZTogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJe3ZpZXc6IFsibGluZSB1bnNlbGVjdGFibGUiLCBodG1sLlRELCArK2Nhbi5tYXhdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgdWkudHIpCgkJCX0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24uZmF2b3JMaW5lKGNhbiwgdWkudGV4dC5pbm5lclRleHQpCgkJCX19LAoKCQkJe3ZpZXc6IFtodG1sLlRFWFQsIGh0bWwuVERdLCBpbm5lcjogY2FuLm9uc3ludGF4Ll9wYXJzZShjYW4sIHZhbHVlKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIHVpLnRyKQoKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciBzID0gZG9jdW1lbnQuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSwgc3RyID0gdWkudGV4dC5pbm5lclRleHQKCQkJCXZhciBiZWdpbiA9IHN0ci5pbmRleE9mKHMpLCBlbmQgPSBiZWdpbitzLmxlbmd0aAoKCQkJCWZvciAodmFyIGkgPSBiZWdpbjsgaSA+PSAwOyBpLS0pIHsKCQkJCQlpZiAoc3RyW2ldLm1hdGNoKC9bYS16QS1aMC05Xy5dLykpIHsgcyA9IHN0ci5zbGljZShpLCBlbmQpIH0gZWxzZSB7IGJyZWFrIH0KCQkJCX0KCgkJCQlpZiAocy5pbmRleE9mKCJraXQuIikgPT0gMCkgeyBzID0gcy5yZXBsYWNlKCJraXQuIiwgInRvb2xraXRzLiIpIH0KCQkJCWlmIChzLmluZGV4T2YoaWNlLlBUKSA9PSAwKSB7IHMgPSBzLnNsaWNlKDEpIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWFyY2hMaW5lKGV2ZW50LCBjYW4sIHMpCgkJCX19CgkJXX1dKTsgcmV0dXJuIHVpLnRyCgl9LAoJX2dldExpbmU6IGZ1bmN0aW9uKGNhbiwgbGluZSkgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSB7IHJldHVybiBpdGVtIH0gfSlbMF0KCX0sCglfZ2V0TGluZW5vOiBmdW5jdGlvbihjYW4sIGxpbmUpIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnJheSkgeyBpZiAoaXRlbSA9PSBsaW5lIHx8IGluZGV4KzEgPT0gbGluZSkgeyByZXR1cm4gaW5kZXgrMSB9IH0pWzBdCgl9LAoJc2VsZWN0TGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbGluZSkgeyBpZiAoIWxpbmUpIHsgcmV0dXJuIHBhcnNlSW50KGNhbi5jb3JlLlZhbHVlKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBbW1todG1sLlRSLCBodG1sLlNFTEVDVF0sIFtodG1sLlRELCAibGluZSJdXV0pWzBdLCAiaW5uZXJUZXh0IikpIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChsaW5lIDwgMCB8fCBsaW5lID4gYXJyYXkubGVuZ3RoKSB7IHJldHVybiB9CgkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNULCBpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSkgeyByZXR1cm4gfQoJCQl2YXIgbHMgPSBjYW4uZmlsZS5zcGxpdChpY2UuUFMpCgkJCWlmIChscy5sZW5ndGggPiA0KSB7IGxzID0gW2xzLnNsaWNlKDAsIDIpLmpvaW4oaWNlLlBTKSsiLy4uLi8iK2xzLnNsaWNlKC0yKS5qb2luKGljZS5QUyldIH0KCQkJbGluZSA9IGl0ZW0sIGNhbi5TdGF0dXMoa2l0LkRpY3QoIuaWh+S7tuWQjSIsIGxzLmpvaW4oaWNlLlBTKSwgIuino+aekOWZqCIsIGNhbi5wYXJzZSwgIuW9k+WJjeihjCIsIGNhbi5vbmV4cG9ydC5wb3NpdGlvbihjYW4sIGNhbi5PcHRpb24obmZzLkxJTkUsIGluZGV4KzEpKSkpCgkJfSkKCgkJY2FuLmJhc2UuaXNPYmplY3QobGluZSkgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgbGluZSwgInRkLnRleHQiLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5jdXJyZW50ID0gewoJCQkJd2luZG93OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBhcnNlSW50KGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodC9jYW4uY3VycmVudC5saW5lLm9mZnNldEhlaWdodCkgfSwKCQkJCXNjcm9sbDogZnVuY3Rpb24oY291bnQpIHsgaWYgKGNvdW50KSB7IGNhbi51aS5jb250ZW50LnNjcm9sbFRvcCArPSBjb3VudCpjYW4uY3VycmVudC5saW5lLm9mZnNldEhlaWdodCB9CgkJCQkJcmV0dXJuIHBhcnNlSW50KChjYW4uY3VycmVudC5saW5lLm9mZnNldFRvcC1jYW4udWkuY29udGVudC5zY3JvbGxUb3ApL2Nhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0KQoJCQkJfSwKCgkJCQlwcmV2OiBmdW5jdGlvbigpIHsgcmV0dXJuIGxpbmUucHJldmlvdXNTaWJsaW5nIH0sCgkJCQluZXh0OiBmdW5jdGlvbigpIHsgcmV0dXJuIGxpbmUubmV4dFNpYmxpbmcgfSwKCQkJCWxpbmU6IGxpbmUsIHRleHQ6IGZ1bmN0aW9uKHRleHQpIHsKCQkJCQlyZXR1cm4gdGV4dCAhPSB1bmRlZmluZWQgJiYgY2FuLm9uYWN0aW9uLm1vZGlmeUxpbmUoY2FuLCBsaW5lLCB0ZXh0KSwgaXRlbS5pbm5lclRleHQKCQkJCX0sCgkJCX0KCgkJCWlmICghZXZlbnQpIHsKCQkJCXZhciBzY3JvbGwgPSBjYW4uY3VycmVudC5zY3JvbGwoKTsgaWYgKHNjcm9sbCA8IDUpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC01KSB9IGVsc2UgewoJCQkJCXZhciB3aW5kb3cgPSBjYW4uY3VycmVudC53aW5kb3coKTsgaWYgKHNjcm9sbCA+IHdpbmRvdy8yKSB7IGNhbi5jdXJyZW50LnNjcm9sbChzY3JvbGwtd2luZG93LzIpIH0KCQkJCX0KCQkJfSBlbHNlIHsKCQkJCXZhciBzY3JvbGwgPSBjYW4uY3VycmVudC5zY3JvbGwoKTsgaWYgKHNjcm9sbCA8IDMpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC0zKSB9IGVsc2UgewoJCQkJCXZhciB3aW5kb3cgPSBjYW4uY3VycmVudC53aW5kb3coKTsgaWYgKHNjcm9sbCA+IHdpbmRvdy00KSB7IGNhbi5jdXJyZW50LnNjcm9sbChzY3JvbGwtd2luZG93KzQpIH0KCQkJCX0KCQkJfQoKCQkJdmFyIHB1c2ggPSBjYW4ub25pbXBvcnQuaGlzdG9yeShjYW4sIHtwYXRoOiBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgZmlsZTogY2FuLk9wdGlvbihuZnMuRklMRSksIGxpbmU6IGNhbi5PcHRpb24obmZzLkxJTkUpLCB0ZXh0OiBjYW4uY3VycmVudC50ZXh0KCl9KQoJCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7IGxvY2F0aW9uLmhhc2ggPSBwdXNoLmZpbGUraWNlLkZTKyhwdXNoLmxpbmV8fDEpIH0KCQkJY2FuLm9uYWN0aW9uLl9zZWxlY3RMaW5lKGV2ZW50LCBjYW4pCgkJfSkKCX0sCglfc2VsZWN0TGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB9LAoJc2VhcmNoTGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUpIHsgaWYgKCFjYW4udWkuc2VhcmNoKSB7IHJldHVybiB9CgkJY2FuLnVpLnNlYXJjaC5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBuZnMuVEFHUywgdmFsdWUudHJpbSgpXSkKCX0sCglmYXZvckxpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbIuaWh+S7tuaVsCIsICLop6PmnpDlmagiLCAi5paH5Lu25ZCNIiwgIuW9k+WJjeihjCIsICLot7PovazmlbAiLCAi5qCH562+5pWwIl0sCglzZXNzOiBmdW5jdGlvbihjYW4pIHsgY2FuLnVzZXIubG9jYWxTdG9yYWdlKGNhbiwgIndlYi5jb2RlLmlubmVyLnNlc3MiLCB7InBsdWciOiBjYW4ub25leHBvcnQucGx1ZyhjYW4pLCAiZXh0cyI6IGNhbi5vbmV4cG9ydC5leHRzKGNhbiksICJ0YWJzIjogY2FuLm9uZXhwb3J0LnRhYnMoY2FuKX0pIH0sCglrZXlzOiBmdW5jdGlvbihjYW4sIGZpbGUsIHBhdGgpIHsgcmV0dXJuIChwYXRofHxjYW4uT3B0aW9uKG5mcy5QQVRIKSkraWNlLkRGKyhmaWxlfHxjYW4uT3B0aW9uKG5mcy5GSUxFKSkgfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShjYW4udGFidmlldywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgcmV0dXJuIGtleStpY2UuREYrbXNnLk9wdGlvbihuZnMuTElORSkgfSkgfSwKCXBsdWc6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShjYW4udG9vbGtpdCkgfSwKCWV4dHM6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShjYW4ucGx1Z2lucykgfSwKCXBvc2l0aW9uOiBmdW5jdGlvbihjYW4sIGluZGV4LCB0b3RhbCkgeyB0b3RhbCA9IHRvdGFsfHxjYW4ubWF4OyByZXR1cm4gKHBhcnNlSW50KGluZGV4KSkraWNlLlBTK3BhcnNlSW50KHRvdGFsKSsiID0gIitwYXJzZUludCgoaW5kZXgpKjEwMC90b3RhbCkrIiUiIH0sCgljb250ZW50OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uaW5uZXJUZXh0IH0pLmpvaW4oaWNlLk5MKSB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9mYXZvci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgewoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS5mYXZvciJ9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJY29kZS5JTk5FUiwgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSkKCQkJCX0sCgkJCSkpKSB7IHJldHVybiB9CgoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCXN1Yi5vbm1vdGlvbi5jbGVhcihzdWIpLCBzdWIub25hcHBlbmQudGFibGUoc3ViLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCQl9CgkJCQkJaWYgKGtleSAhPSBjdHguQUNUSU9OKSB7IHZhbHVlID0gc3ViLnBhZ2UucmVwbGFjZShzdWIsIHZhbHVlLCBpY2UuUFdELCAiIikgfQoKCQkJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW3ZhbHVlLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJCQlpZiAoW21kYi5aT05FLCBtZGIuSURdLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiBzdWIub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBzdWIsIGtleSwgdmFsdWUpIH0KCgkJCQkJCWlmICh0YXJnZXQudGFnTmFtZSA9PSAiSU5QVVQiICYmIHRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwgbGluZSwgc3ViLk9wdGlvbigpKQoJCQkJCQkJcmV0dXJuIHN1Yi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IHN1Yi5ydW4oKSB9KQoJCQkJCQl9CgoJCQkJCQlsaW5lLmxpbmUgJiYgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsaW5lLnBhdGgsIGxpbmUuZmlsZS5yZXBsYWNlKGljZS5QV0QsICIiKSwgcGFyc2VJbnQobGluZS5saW5lKSkKCQkJCQl9fQoJCQkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJCQl9KQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL2lubmVyLmpzIgoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9zZWFyY2guanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsgdmFyIGhpc3RvcnkgPSBbXTsgY29uc3QgU0VBUkNIID0gImNhbi5jb2RlLmlubmVyLnNlYXJjaCIKCWZ1bmN0aW9uIHNob3cobXNnLCB3b3JkKSB7IGlmICghbXNnKSB7IHJldHVybiB9IGhpc3RvcnkucHVzaChtc2cpOyB2YXIgc3ViID0gbXNnLl9jYW47IHN1Yi5PcHRpb24oIndvcmQiLCB3b3JkfHxtc2cuX3dvcmQpCgkJIXN1Yi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX2xlZ2VuZCwgInNlbGVjdCIpICYmIGNhbi51aS5zZWFyY2guc2VsZWN0KCkKCQlzdWIub25tb3Rpb24uY2xlYXIoc3ViKSwgc3ViLm9uYXBwZW5kLnRhYmxlKHN1YiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW2Nhbi5wYWdlLnJlcGxhY2UoY2FuLCB2YWx1ZSwgaWNlLlBXRCwgIiIpLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWxpbmUubGluZSAmJiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsaW5lLmZpbGUucmVwbGFjZShpY2UuUFdELCAiIiksIHBhcnNlSW50KGxpbmUubGluZSkpCgkJCX19CgkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuYm9hcmQoc3ViLCBtc2cuUmVzdWx0KCkpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJfQoJY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIFNFQVJDSCwgc2h5KCLmkJzntKIiLCB7fSwgWwoJCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ3b3JkIiwgdmFsdWU6IGNsaS5NQUlOLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdFRhYmxlKGV2ZW50LCBjYW4uc3VwLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKHRyKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIGluZGV4KSB7IGluZGV4ID09IDAgJiYgdGQuY2xpY2soKSB9KQoJCQkJdHIuc2Nyb2xsSW50b1ZpZXcoKSwgY2FuLl9vdXRwdXQuc2Nyb2xsVG9wIC09IDYwCgkJCX0pCgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4uc3VwLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIGV2ZW50LmN0cmxLZXk/IG5mcy5HUkVQOiBuZnMuVEFHUywgY2FuLnN1cC5PcHRpb24oIndvcmQiKV0pIH0KCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyBldmVudC50YXJnZXQuYmx1cigpIH0KCQl9fSwKCQl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiZmlsdGVyIiwgdmFsdWU6ICIiLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIGNhbi5zdXAsIG51bGwsIGV2ZW50LnRhcmdldCkKCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgZXZlbnQuY3RybEtleT8gbmZzLkdSRVA6IG5mcy5UQUdTLCBjYW4uc3VwLk9wdGlvbigid29yZCIpXSkgfQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IGV2ZW50LnRhcmdldC5ibHVyKCkgfQoJCX19LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogbmZzLlRBR1N9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogbmZzLkdSRVB9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogY2xpLk1BS0V9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImhpc3RvcnkifSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJsYXN0IiwgX3RyYW5zOiAi6L+U5ZueIn0sCgldLCBmdW5jdGlvbihtc2csIGNtZHMsIGNiKSB7IGlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkiaGlzdG9yeSIsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJY2FuLmNvcmUuTGlzdChjYW4uaGlzdG9yeSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJbXNnLlB1c2gobmZzLkZJTEUsIGl0ZW0uZmlsZSkKCQkJCW1zZy5QdXNoKG5mcy5MSU5FLCBpdGVtLmxpbmUpCgkJCQltc2cuUHVzaChtZGIuVEVYVCwgaXRlbS50ZXh0KQoJCQl9KQoJCQlzaG93KG1zZykKCQl9LAoJCW5mcy5UQUdTLCBmdW5jdGlvbihjbWRzKSB7IG1zZy5PcHRpb24oa2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFLCBpY2UuTVNHX0ZJRUxEUywgImZpbGUsbGluZSx0ZXh0IikpCgkJCWNhbi5ydW5BY3Rpb24obXNnLCBtZGIuU0VBUkNILCBbY2FuLnBhcnNlLCBjbWRzWzBdLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgc3ViID0gbXNnLl9jYW4KCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS80KSwgc2hvdyhtc2csIG1zZy5fd29yZCA9IGNtZHNbMF0pCgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKSB8fCBzdWIuX2xlZ2VuZC5jbGljaygpCgkJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBtc2cuX2Nhbi5faW5wdXRzWyJ3b3JkIl0uX3RhcmdldCkKCQkJfSkKCQl9LAoJCW5mcy5HUkVQLCBmdW5jdGlvbihjbWRzKSB7IG1zZy5PcHRpb24oa2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFLCBpY2UuTVNHX0ZJRUxEUywgImZpbGUsbGluZSx0ZXh0IiwgbmZzLlBBVEgsIGNhbi5PcHRpb24obmZzLlBBVEgpKSkKCQkJY2FuLnJ1bkFjdGlvbihtc2csIG5mcy5HUkVQLCBbY21kc1swXV0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgc3ViID0gbXNnLl9jYW4KCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS80KSwgc2hvdyhtc2csIG1zZy5fd29yZCA9IGNtZHNbMF0pCgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKSB8fCBzdWIuX2xlZ2VuZC5jbGljaygpCgkJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBtc2cuX2Nhbi5faW5wdXRzWyJ3b3JkIl0uX3RhcmdldCkKCQkJfSkKCQl9LAoJCSJsYXN0IiwgZnVuY3Rpb24oY21kcykgeyBoaXN0b3J5LnBvcCgpLCBzaG93KGhpc3RvcnkucG9wKCkpIH0sCgkpKSkgeyByZXR1cm4gfSBjYW4ucnVuKG1zZywgY21kcywgZnVuY3Rpb24obXNnKSB7IHNob3cobXNnKSB9LCB0cnVlKSB9KSkKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBTRUFSQ0h9LCBmdW5jdGlvbihzdWIpIHsKCQljYW4udWkuc2VhcmNoID0gc3ViLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQljYW4udWkuc2VhcmNoLl9zaG93ID0gc2hvdwoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL3Nlc3MuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsgdmFyIFNFU1MgPSAid2ViLmNvZGUuc2VzcyIKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBTRVNTfSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCWlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJCW5mcy5TQVZFLCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIFNFU1MsIFtjdHguQUNUSU9OLCBtZGIuQ1JFQVRFLAoJCQkJCQkidG9vbCIsIEpTT04uc3RyaW5naWZ5KGNhbi5vbmV4cG9ydC50b29sKGNhbikpLAoJCQkJCQkidGFicyIsIEpTT04uc3RyaW5naWZ5KGNhbi5vbmV4cG9ydC50YWJzKGNhbikpLAoJCQkJCV0sIGNiKQoJCQkJfSwKCQkJCW5mcy5MT0FELCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnNlc3MoY2FuLCB7CgkJCQkJCXRvb2w6IEpTT04ucGFyc2UobXNnLk9wdGlvbigidG9vbCIpKSwKCQkJCQkJdGFiczogSlNPTi5wYXJzZShtc2cuT3B0aW9uKCJ0YWJzIikpLAoJCQkJCX0pCgkJCQl9LAoJCQkpKSkgeyByZXR1cm4gfQoJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgU0VTUywgY21kcywgY2IpCgkJfSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgl9KQp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvdGVtcGxhdGUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiAid2ViLmNvZGUudGVtcGxhdGUifSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJbmZzLkRFRlMsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvbigiYXJncyIpfHwiW10iKSwgZnVuY3Rpb24oZGF0YSkgewoJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBjYW4uY29yZS5JdGVtKGRhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgbXNnLk9wdGlvbihrZXksIHZhbHVlKSB9KQoJCQkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgIndlYi5jb2RlLnRlbXBsYXRlIiwgW25mcy5ERUZTXS5jb25jYXQoY21kcyksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJCQkJCQljYW4ub25pbXBvcnQucHJvamVjdChjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpKQoJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbigibWFpbiIpLCAiIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY21kc1sxXSwgMSwgZnVuY3Rpb24oKSB7fSkKCQkJCQkJCX0sIHRydWUpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCQkJKSkpIHsgcmV0dXJuIH0KCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsICJ3ZWIuY29kZS50ZW1wbGF0ZSIsIGNtZHMsIGNiKQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL3NuaXBwZXQuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbikKCQlpZiAobXNnLk9wdGlvbigiY29udGVudCIpKSB7CgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS52aW1lciIsIHN0eWxlOiAiZnVsbCJ9LCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCWlmIChjbWRzWzFdID09ICJwbHVnaW4iKSB7CgkJCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsICJ2aW1lciIsIGNtZHMsIGNiKQoJCQkJCQlyZXR1cm4KCQkJCQl9CgkJCQkJaWYgKGNtZHNbMV0gPT0gIm1haW4uZ28iKSB7IHJlcy5FY2hvKG1zZy5PcHRpb24oImNvbnRlbnQiKSkKCQkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5zdWIgJiYgY2FuLnN1Yi5vbmFjdGlvblsi6aG555uuIl0oe30sIGNhbi5zdWIpIH0pCgkJCQkJfQoJCQkJCWNiKHJlcyksIGNhbi5zdWIgPSBjYW4uY29yZS5WYWx1ZShzdWIsICJfb3V0cHV0cy4tMSIpCgkJCQl9CgkJCX0sIGNhbi5fb3V0cHV0KQoJCQlyZXR1cm4KCQl9CgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2cpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBbImdvIiwgImhpLmdvIiwgY2FuLnN1Yi5vbmV4cG9ydC5jb250ZW50KGNhbi5zdWIpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJpbm5lci5qcyJdLCBmdW5jdGlvbihjYW4pIHsgY2FuLm9uaW1wb3J0LmlubmVyX2luaXQoY2FuLCBtc2csIGZ1bmN0aW9uKCkgeyBjYW4udW5kbyA9IFtdLCBjYW4ucmVkbyA9IFtdCgkJCWNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKSwgY2FuLm9ua2V5bWFwLl9wbHVnaW4oe30sIGNhbikKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfSwgdGFyZ2V0KSB9ICwgZnVuY3Rpb24oY2FuLCBuYW1lLCBzdWIpIHsgbmFtZSA9PSBjaGF0Lk9OSU1QT1JUICYmIChjYW4ub25pbXBvcnQuaW5uZXJfaW5pdCA9IHN1Yi5faW5pdCkKCQkJaWYgKG5hbWUgPT0gY2hhdC5PTkFDVElPTikgeyBjYW4uX3RyYW5zID0gY2FuLmJhc2UuQ29weShjYW4uX3RyYW5zfHx7fSwgc3ViLl90cmFucykgfQoJCQlpZiAobmFtZSA9PSBjaGF0Lk9OS0VZTUFQKSB7IGNhbi5jb3JlLkl0ZW0oc3ViLl9tb2RlLCBmdW5jdGlvbihtb2RlLCB2YWx1ZSkgewoJCQkJdmFyIGxpc3QgPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV0gPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV18fHt9CgkJCQljYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IGxpc3Rba2V5XSA9IGxpc3Rba2V5XXx8Y2IgfSkKCQkJfSkgfQoJCX0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudC5wYXJlbnROb2RlLCBbCgkJCXt2aWV3OiBbImN1cnJlbnQiLCBodG1sLklOUFVUXSwgc3BlbGxjaGVjazogZmFsc2UsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGV2ZW50Lm1ldGFLZXkpIHsgcmV0dXJuIH0KCQkJCWlmIChldmVudC5jdHJsS2V5ICYmIGNhbi5vbmFjdGlvbi5fY29tcGxldGUoZXZlbnQsIGNhbikpIHsgcmV0dXJuIH0KCQkJCWNhbi5fa2V5bGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgY2FuLm1vZGUrKGV2ZW50LmN0cmxLZXk/ICJfY3RybCI6ICIiKSwgY2FuLl9rZXlsaXN0LCBjYW4udWkuY3VycmVudCkKCQkJCWNhbi5tb2RlID09ICJpbnNlcnQiICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlKSB9LCAxMCkKCQkJCWNhbi5tb2RlID09ICJub3JtYWwiICYmIGNhbi5TdGF0dXMoIuaMiemUriIsIGNhbi5fa2V5bGlzdC5qb2luKCIiKSkKCQkJCWNhbi5tb2RlID09ICJub3JtYWwiICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBvbmtleXVwOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb24uX2NvbXBsZXRlKGV2ZW50LCBjYW4pCgoJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKQoKCQkJfX0sIHt2aWV3OiBbImNvbXBsZXRlIl19LAoJCV0pOyBjYW4udWkuY3VycmVudCA9IHVpLmN1cnJlbnQsIGNhbi51aS5jb21wbGV0ZSA9IHVpLmNvbXBsZXRlCgl9LAoJcHJvamVjdDogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCWNhbi5pc0NtZE1vZGUoKSAmJiB7bmFtZTogImNyZWF0ZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4ub25hY3Rpb24ubGlzdCwgdGFyZ2V0KSB9fSwKCQkJe25hbWU6ICJzb3VyY2UiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciB0b3RhbCA9IDAKCQkJCWZ1bmN0aW9uIHNob3cocGF0aCwgdGFyZ2V0KSB7IGNhbi5ydW4oY2FuLnJlcXVlc3Qoe30sIHtkaXJfcm9vdDogcGF0aCwgZGlyX2RlZXA6IHRydWV9KSwgW2ljZS5QV0RdLCBmdW5jdGlvbihtc2cpIHsgdmFyIGxpc3QgPSBtc2cuVGFibGUoKQoJCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZihpdGVtLnBhdGgpID09IDApIHsgaXRlbS5leHBhbmQgPSB0cnVlIH0KCQkJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQub25tb3VzZWVudGVyID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCB7CgkJCQkJCQkidHJhc2giOiBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgbmZzLlRSQVNILCBbY2FuLmJhc2UuUGF0aChwYXRoLCBpdGVtLnBhdGgpXSkgfSwKCQkJCQkJCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb25bYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24pIH0sCgkJCQkJCX0sIFsidHJhc2giXSkgfSB9CgkJCQkJfSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGxpc3QsIG5mcy5QQVRILCBpY2UuUFMsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgaXRlbS5wYXRoKSAvLyDmmL7npLrmlofku7YKCQkJCQl9LCB0YXJnZXQpLCBjYW4uU3RhdHVzKCLmlofku7bmlbAiLCB0b3RhbCArPSBtc2cuTGVuZ3RoKCkpCgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIit0b3RhbCsiIGl0ZW0ifSkKCQkJCX0sIHRydWUpIH0gaWYgKHBhdGgubGVuZ3RoID09IDEpIHsgcmV0dXJuIHNob3cocGF0aFswXSwgdGFyZ2V0KSB9CgoJCQkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBjYW4uY29yZS5MaXN0KHBhdGgsIGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIHtuYW1lOiBwYXRoLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHNob3cocGF0aCwgdGFyZ2V0KSB9fSB9KSwgdGFyZ2V0KQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gIiIgfSkKCQkJfX0sCgkJCXtuYW1lOiAicGx1Z2luIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgdG90YWwgPSAwCgkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGNhbi5jb3JlLkl0ZW0oY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHRvdGFsKyssIHtpbmRleDogY2FuLmJhc2UudHJpbVByZWZpeChrZXksICJjYW4uIil9IH0pLCBjdHguSU5ERVgsIGljZS5QVCwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uY29yZS5LZXlzKCJjYW4iLCBpdGVtLmluZGV4KSwgY3R4LklOREVYKSAvLyDmmL7npLrmj5Lku7YKCQkJCX0sIHRhcmdldCkKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrdG90YWwrIiBpdGVtIn0pCgkJCX19LAoJCQl7bmFtZTogIm1vZHVsZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtmaWVsZHM6IGN0eC5JTkRFWH0pLCBjdHguQ09NTUFORCwgW21kYi5TRUFSQ0gsIGN0eC5DT01NQU5EXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIittc2cuTGVuZ3RoKCkrIiBpdGVtIn0pCgkJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBtc2cuVGFibGUoKSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGl0ZW0uaW5kZXgsIGN0eC5JTkRFWCkgLy8g5pi+56S65qih5Z2XCgkJCQkJfSwgdGFyZ2V0KQoJCQkJfSkKCQkJfX0sCgkJCXtuYW1lOiAiZHJlYW1zIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJCWNhbi5ydW5BY3Rpb24oe30sIGljZS5SVU4sIFt3ZWIuRFJFQU1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK21zZy5MZW5ndGgoKSsiIGl0ZW0ifSkKCQkJCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgewoJCQkJCQlmdW5jdGlvbiBjYXJ0ZShldmVudCkgewoJCQkJCQkJdmFyIGxpc3QgPSBbXTsgc3dpdGNoIChpdGVtLnN0YXR1cykgewoJCQkJCQkJCWNhc2UgInN0YXJ0IjogbGlzdCA9IFsib3BlbiIsICJzdG9wIl07IGJyZWFrCgkJCQkJCQkJY2FzZSAic3RvcCI6IGxpc3QgPSBbInN0YXJ0IiwgInRyYXNoIl07IGJyZWFrCgkJCQkJCQl9CgkJCQkJCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHt9LCBsaXN0LCBmdW5jdGlvbihldmVudCwgYWN0aW9uKSB7CgkJCQkJCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgaXRlbSksIGljZS5SVU4sIFt3ZWIuRFJFQU0sIGN0eC5BQ1RJT04sIGFjdGlvbl0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCQkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYWxsKHRhcmdldCkKCQkJCQkJCQl9KQoJCQkJCQkJfSkKCQkJCQkJfQoKCQkJCQkJdmFyIGNvbG9yID0gaXRlbS5zdGF0dXMgPT0gInN0YXJ0Ij8gIiI6ICJncmF5IgoJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IFtpdGVtLm5hbWUsIGh0bWwuRElWXSwgc3R5bGU6IHtjb2xvcjogY29sb3J9LCBvbm1vdXNlZW50ZXI6IGNhcnRlfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaXRlbS5uYW1lLCB3ZWIuRFJFQU0pIC8vIOaYvuekuuepuumXtAoJCQkJCQl9fV0pCgkJCQkJfSkKCQkJCX0pCgkJCX0sIF9tZW51OiBzaHkoIiIsIHsKCQkJCSJjcmVhdGUiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uLmRyZWFtKGV2ZW50LCBjYW4sICJkcmVhbSIpIH0sCgkJCQkicmVmcmVzaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4udWkuZHJlYW1zLnJlZnJlc2goKSB9LAoJCQkJInB1Ymxpc2giOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0Q29uZmlybShjYW4sIG1zZy5SZXN1bHQoKSwgYnV0dG9uKSB9KSB9LAoJCQl9LCBbImNyZWF0ZSIsICJyZWZyZXNoIiwgInB1Ymxpc2giXSwgZnVuY3Rpb24oKSB7fSl9LAoJCV0sIGNhbi51aS5wcm9qZWN0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLAoJX21vZGVsOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IGNhbi5TdGF0dXMoIuaooeW8jyIsIGNhbi5tb2RlID0gdmFsdWUpCgkJY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIGNhbi51aS5jdXJyZW50LCBbImN1cnJlbnQiLCBjYW4ubW9kZV0pLCB2YWx1ZQoJCWNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCBjYW4udWkuY29tcGxldGUsIFsiY29tcGxldGUiLCBjYW4ubW9kZV0pLCB2YWx1ZQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJwbHVnaW4iKQoJCWNhbi51aS5jdXJyZW50LmJsdXIoKQoJfSwKCV9ub3JtYWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJub3JtYWwiKQoJCWNhbi51aS5jdXJyZW50LmZvY3VzKCkKCX0sCglfaW5zZXJ0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbW9kZWwoY2FuLCAiaW5zZXJ0IikKCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwCgkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgl9LAoKCV9tb2RlOiB7CgkJcGx1Z2luOiB7CgkJCXQ6IHNoeSgi5re75Yqg5ZG95LukIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIua3u+WKoCJdKGV2ZW50LCBjYW4pIH0pLAoJCQlwOiBzaHkoIua3u+WKoOaPkuS7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmj5Lku7YiXShldmVudCwgY2FuKSB9KSwKCQkJZTogc2h5KCLmt7vliqDmianlsZUiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5omp5bGVIl0oZXZlbnQsIGNhbikgfSksCgoJCQlpOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikgfSksCgkJCW46IHNoeSgi5ZG95Luk5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX25vcm1hbChldmVudCwgY2FuKSB9KSwKCQkJIjoiOiBzaHkoIuW6leihjOaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJjbGkuc3lzdGVtIn0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFsiY2xpLnN5c3RlbSJdID0gc3ViLnNlbGVjdCgpIH0pIH0pLAoKCQkJczogc2h5KCLkv53lrZjmlofku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zYXZlKGV2ZW50LCBjYW4sICJzYXZlIikgfSksCgkJCWQ6IHNoeSgi5Yib5bu656m66Ze0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uZHJlYW0oZXZlbnQsIGNhbiwgImRyZWFtIikgfSksCgkJCW06IHNoeSgi5re75Yqg5qih5Z2XIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uYXV0b2dlbihldmVudCwgY2FuLCAiYXV0b2dlbiIpIH0pLAoJCQljOiBzaHkoIue8luivkemhueebriIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNvbXBpbGUoZXZlbnQsIGNhbiwgImNvbXBpbGUiKSB9KSwKCQl9LAoJCW5vcm1hbF9jdHJsOiB7CgkJCWY6IHNoeSgi5ZCR5LiL57+76aG1IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuKStjYW4uY3VycmVudC53aW5kb3coKS0zLWNhbi5jdXJyZW50LnNjcm9sbCgpCgkJCQlyZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSwgdHJ1ZQoJCQl9KSwKCQkJYjogc2h5KCLlkJHkuIrnv7vpobUiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4pLWNhbi5jdXJyZW50LndpbmRvdygpKzMKCQkJCXJldHVybiBjYW4uY3VycmVudC5zY3JvbGwobGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpLCB0cnVlCgkJCX0pLAoJCX0sCgkJbm9ybWFsOiB7CgkJCUVzY2FwZTogc2h5KCLliIfmjaLmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fcGx1Z2luKGV2ZW50LCBjYW4pIH0pLAoJCQlBcnJvd0xlZnQ6IHNoeSgi5YWJ5qCH5bem56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAtMSkgfSksCgkJCUFycm93UmlnaHQ6IHNoeSgi5YWJ5qCH5Y+z56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAxKSB9KSwKCQkJQXJyb3dEb3duOiBzaHkoIuWFieagh+S4i+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9KSwKCQkJQXJyb3dVcDogc2h5KCLlhYnmoIfkuIrnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkgfSksCgoJCQkiLiI6IHNoeSgi6YeN5aSN5pON5L2cIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBjYiA9IGNhbi5yZWRvLnBvcCgpOyBjYiAmJiBjYigpIH0pLAoJCQl1OiBzaHkoIuaSpOmUgOaTjeS9nCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB2YXIgY2IgPSBjYW4udW5kby5wb3AoKTsgY2IgJiYgY2IoKSB9KSwKCQkJSjogc2h5KCLlkIjlubbkuKTooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCXZhciBuZXh0ID0gY2FuLmN1cnJlbnQubmV4dCgpOyBpZiAoIW5leHQpIHsgcmV0dXJuIH0KCQkJCXZhciBsaW5lID0gY2FuLmN1cnJlbnQubGluZSwgdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJdmFyIHJlc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBuZXh0LCAidGQudGV4dCIpWzBdLmlubmVyVGV4dAoJCQkJY2FuLmN1cnJlbnQudGV4dCh0ZXh0LnRyaW1SaWdodCgpK2ljZS5TUCtyZXN0LnRyaW1MZWZ0KCkpLCBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIG5leHQpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24ubW9kaWZ5TGluZShjYW4sIGxpbmUsIHRleHQpLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHJlc3QsIGxpbmUubmV4dFNpYmxpbmcpIH0pCgkJCX0pLAoKCQkJSDogc2h5KCLot7PliLDooYzpppYiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIDApIH0pLAoJCQloOiBzaHkoIuWFieagh+W3puenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgLTEpIH0pLAoJCQlsOiBzaHkoIuWFieagh+WPs+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMSkgfSksCgkJCUw6IHNoeSgi6Lez5Yiw6KGM5bC+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAwLCAtMSkgfSksCgkJCWo6IHNoeSgi5YWJ5qCH5LiL56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpIH0pLAoJCQlrOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKSB9KSwKCgkJCWdnOiBzaHkoIui3s+WIsOafkOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNvdW50KSwgdHJ1ZSB9KSwKCQkJRzogc2h5KCLot7PliLDmn5DooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjb3VudCA9IGNvdW50PjE/IGNvdW50OiBjYW4ubWF4KSwgdHJ1ZSB9KSwKCQkJenQ6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5pyA5LiKIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLShjb3VudD4xPyBjb3VudDogMykpLCB0cnVlIH0pLAoJCQl6ejogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXkuK3pl7QiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktKGNvdW50ID0gY291bnQ+MT8gY291bnQ6IGNhbi5jdXJyZW50LndpbmRvdygpLzIpKSwgdHJ1ZSB9KSwKCQkJemI6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5pyA5LiLIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLWNhbi5jdXJyZW50LndpbmRvdygpKyhjb3VudD4xPyBjb3VudDogNSkpLCB0cnVlIH0pLAoKCQkJaTogc2h5KCLmj5LlhaXmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pIH0pLAoJCQlJOiBzaHkoIuaPkuWFpeihjOmmliIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIDApIH0pLAoJCQlhOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDEpIH0pLAoJCQlBOiBzaHkoIuaPkuWFpeihjOWwviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIC0xKSB9KSwKCQkJbzogc2h5KCLmj5LlhaXkuIvkuIDooYwiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpKyh0ZXh0LmVuZHNXaXRoKCJ7Iik/Ilx0IjoiIikKCQkJCWNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGNhbi5jdXJyZW50Lm5leHQoKSkpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAxMDAwKQoJCQl9KSwKCQkJTzogc2h5KCLmj5LlhaXkuIrkuIDooYwiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpKyh0ZXh0LmVuZHNXaXRoKCJ9Iik/Ilx0IjoiIikKCQkJCWNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGNhbi5jdXJyZW50LmxpbmUpKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMTAwMCkKCQkJfSksCgoJCQl5eTogc2h5KCLlpI3liLblvZPliY3ooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IGNhbi5fbGFzdF90ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpIH0pLAoJCQlkZDogc2h5KCLliarliIflvZPliY3ooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpLCBsaW5lID0gY2FuLm9uYWN0aW9uLl9nZXRMaW5lbm8oY2FuLCBjYW4uY3VycmVudC5saW5lKQoJCQkJY2FuLl9sYXN0X3RleHQgPSBjYW4uY3VycmVudC50ZXh0KCksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgY2FuLmN1cnJlbnQubGluZSkpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSB9KQoJCQkJdmFyIGNhbGxlZSA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJCWNhbi5yZWRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbGxlZShldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB9KQoJCQl9KSwKCQkJcDogc2h5KCLnspjotLQiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgY2FuLl9sYXN0X3RleHQsIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgbGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUtMSkgfSkKCQkJfSksCgkJCVA6IHNoeSgi57KY6LS0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGNhbi5fbGFzdF90ZXh0LCBjYW4uY3VycmVudC5saW5lKQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSsxKSB9KQoJCQl9KSwKCgkJCXM6IHNoeSgi5L+d5a2Y5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2F2ZShldmVudCwgY2FuLCAic2F2ZSIpIH0pLAoJCQltOiBzaHkoIua3u+WKoOaooeWdlyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmF1dG9nZW4oZXZlbnQsIGNhbiwgImF1dG9nZW4iKSB9KSwKCQkJYzogc2h5KCLnvJbor5Hpobnnm64iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jb21waWxlKGV2ZW50LCBjYW4sICJjb21waWxlIikgfSksCgkJfSwKCQlpbnNlcnQ6IHsKCQkJRXNjYXBlOiBzaHkoIumAgOWHuue8lui+kSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiRXNjYXBlIikgeyByZXR1cm4gfQoJCQkJY2FuLm9ua2V5bWFwLl9ub3JtYWwoZXZlbnQsIGNhbikKCQkJfSksCgkJCVRhYjogc2h5KCLnvKnov5siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIlRhYiIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmtleW1hcC5pbnNlcnRUZXh0KGNhbi51aS5jdXJyZW50LCBpY2UuVEIpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSksCgkJCUJhY2tzcGFjZTogc2h5KCLliKDpmaQiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgaWYgKGV2ZW50LmtleSAhPSAiQmFja3NwYWNlIikgeyByZXR1cm4gfQoJCQkJaWYgKHRhcmdldC5zZWxlY3Rpb25TdGFydCA+IDApIHsgcmV0dXJuIH0KCQkJCWlmICghY2FuLmN1cnJlbnQucHJldigpKSB7IHJldHVybiB9CgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCgkJCQl2YXIgcmVzdCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKQoJCQkJY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQl2YXIgcG9zID0gY2FuLmN1cnJlbnQudGV4dCgpLmxlbmd0aAoKCQkJCWNhbi51aS5jdXJyZW50LnZhbHVlID0gY2FuLmN1cnJlbnQudGV4dCgpK3Jlc3QKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDAsIHBvcykKCQkJfSksCgkJCUVudGVyOiBzaHkoIuaNouihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBpZiAoZXZlbnQua2V5ICE9ICJFbnRlciIpIHsgcmV0dXJuIH0KCQkJCXZhciByZXN0ID0gY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uRW5kKSwgdGV4dCA9IGNhbi51aS5jdXJyZW50LnZhbHVlCgkJCQl2YXIgbGVmdCA9IHRleHQuc3Vic3RyKDAsIHRleHQuaW5kZXhPZih0ZXh0LnRyaW1MZWZ0KCkpKXx8KHRleHQudHJpbVJpZ2h0KCkgPT0gIiI/IHRleHQ6ICIiKQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoInsiKSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrIn0iLCBjYW4uY3VycmVudC5uZXh0KCkpLCBsZWZ0ICs9IGljZS5UQiB9CgkJCQlpZiAodGV4dC5lbmRzV2l0aCgiWyIpKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsiXSIsIGNhbi5jdXJyZW50Lm5leHQoKSksIGxlZnQgKz0gaWNlLlRCIH0KCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCIoIikpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyIpIiwgY2FuLmN1cnJlbnQubmV4dCgpKSwgbGVmdCArPSBpY2UuVEIgfQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoImAiKSAmJiBjYW4uYmFzZS5jb3VudCh0ZXh0LCAiYCIpJTI9PTEpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyJgIiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9CgoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrcmVzdC50cmltTGVmdCgpLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQljYW4uY3VycmVudC50ZXh0KHRleHQudHJpbVJpZ2h0KCl8fHRleHQpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgbGVmdC5sZW5ndGgsIDApCgkJCX0pLAoJCQlBcnJvd1VwOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiQXJyb3dVcCIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkKCQkJfSksCgkJCUFycm93RG93bjogc2h5KCLlhYnmoIfkuIvnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIkFycm93RG93biIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJfSksCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFtuZnMuU0FWRSwgY29kZS5DT01QSUxFLCBjb2RlLkFVVE9HRU4sIG5mcy5TQ1JJUFQsIGNoYXQuV0VCU0lURSwgd2ViLkRSRUFNXSwKCV9ydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgYXJncywgY2IpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MsIGNifHxmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpLCBjYW4udWkuc291cmNlLnJlZnJlc2goKQoJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBidXR0b24pCgkJfSkKCX0sCglfcnVuczogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBjYikgeyB2YXIgbWV0YSA9IGNhbi5Db25mKCk7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBidXR0b259KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIG1ldGEuZmVhdHVyZVtidXR0b25dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5vbmFjdGlvbi5fcnVuKGV2ZW50LCBjYW4sIGJ1dHRvbiwgYXJncywgY2IpCgkJfSkKCX0sCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY29udGVudDogY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKX0pCgkJY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgYnV0dG9uLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldKQoJfSwKCWNvbXBpbGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi57yW6K+R5LitLi4uIikKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHRvYXN0LmNsb3NlKCkKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHZhciB0b2FzdDEgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi6YeN5ZCv5LitLi4uIikKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0b2FzdDEuY2xvc2UoKSwgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKSB9LCAzMDAwKQoJCQl9IGVsc2UgeyBjYW4udWkuc2VhcmNoLl9zaG93KG1zZykgfQoKCQl9KQoJfSwKCWF1dG9nZW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uX3J1bnMoZXZlbnQsIGNhbiwgYnV0dG9uLCBmdW5jdGlvbihtc2cpIHsKCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKGNsaS5NQUlOKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQkJY2FuLnVpLnNvdXJjZS5yZWZyZXNoKCkKCQkJfSkKCQl9LCB0cnVlKQoJfSkgfSwKCXNjcmlwdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9ydW5zKGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmlsZTogY2FuLmJhc2UudHJpbVN1ZmZpeChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSkrbmZzLkpTfSksIGNhbiwgYnV0dG9uKQoJfSwKCXdlYnNpdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fcnVucyhjYW4ucmVxdWVzdChldmVudCwge2ZpbGU6IChjYW4uYmFzZS50cmltU3VmZml4KGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKStuZnMuWk1MKS5zcGxpdCgiLyIpLnBvcCgpfSksIGNhbiwgYnV0dG9uKQoJfSwKCWRyZWFtOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX3J1bnMoY2FuLnJlcXVlc3QoZXZlbnQpLCBjYW4sIGJ1dHRvbiwgZnVuY3Rpb24obXNnKSB7IGNhbi51aS5kcmVhbXMucmVmcmVzaCgpCgkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obWRiLk5BTUUpLCB3ZWIuRFJFQU0pIC8vIOaYvuekuuepuumXtAoJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCX0pCgl9LAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWF0sIGZ1bmN0aW9uKGxpc3QpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGlzdFswXSwgY3R4LklOREVYKSB9KSB9LAoJIuaPkuS7tiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYXSwgZnVuY3Rpb24obGlzdCkgewoJCQl2YXIgc3ViID0gY2FuLnRvb2xraXRbbGlzdFswXV07IGlmIChzdWIpIHsgc3ViLnNlbGVjdCgpOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogbGlzdFswXX0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFtsaXN0WzBdXSA9IHN1Yi5zZWxlY3QoKSB9KQoJCX0pCgl9LAoJIuaJqeWxlSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbInVybCJdLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBzdWIgPSBjYW4uZXh0ZW50aW9uc1tsaXN0WzBdXTsgaWYgKHN1YikgeyBzdWIuc2VsZWN0KCk7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC5leHRzKGNhbiwgbGlzdFswXSwgZnVuY3Rpb24oc3ViKSB7IGNhbi5leHRlbnRpb25zW2xpc3RbMF1dID0gc3ViLnNlbGVjdCgpIH0pCgkJfSkKCX0sCgoJbGlzdFRhZ3M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgbGlzdCA9IFtdCgkJY2FuLmNvcmUuSXRlbShjYW4ucmVxdWVzdChldmVudCksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQlsaXN0LnB1c2goe3pvbmU6ICJtc2ciLCB0eXBlOiB0eXBlb2YgdmFsdWUsIG5hbWU6IGtleSwgdGV4dDogY2FuLmJhc2UuaXNPYmplY3QodmFsdWUpPyAiIjogKHZhbHVlKyIiKS5zcGxpdChpY2UuTkwpWzBdLAoJCQkJcGF0aDogInVzci92b2xjYW5vcy8iLCBmaWxlOiAibGliL21pc2MuanMiLCBsaW5lOiAxLAoJCQl9KQoJCX0pCgkJY2FuLmNvcmUuTGlzdChbY2FuLmJhc2UsIGNhbi5jb3JlLCBjYW4ubWlzYywgY2FuLnBhZ2UsIGNhbi51c2VyLCBjYW4ub25lbmdpbmUsIGNhbi5vbmRhZW1vbiwgY2FuLm9uYXBwZW5kLCBjYW4ub25sYXlvdXQsIGNhbi5vbm1vdGlvbiwgY2FuLm9ua2V5bWFwXSwgZnVuY3Rpb24obGliKSB7CgkJCWNhbi5jb3JlLkl0ZW0obGliLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGlmIChrZXkuaW5kZXhPZigiXyIpID09IDAgfHwgIWxpYi5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IHJldHVybiB9CgkJCQlsaXN0LnB1c2goe3pvbmU6IGxpYi5fbmFtZSwgdHlwZTogdHlwZW9mIHZhbHVlLCBuYW1lOiBrZXksIHRleHQ6IGNhbi5iYXNlLmlzT2JqZWN0KHZhbHVlKT8gIiI6ICh2YWx1ZSsiIikuc3BsaXQoaWNlLk5MKVswXSwKCQkJCQlwYXRoOiAidXNyL3ZvbGNhbm9zLyIsIGZpbGU6IGxpYi5fcGF0aCwgbGluZTogMSwKCQkJCX0pCgkJCX0pCgkJfSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7dGV4dDogY2FuLmJhc2UuRm9ybWF0KGxpc3QpfSksIGJ1dHRvbikKCX0sCglfY29tcGxldGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi51aS5jb21wbGV0ZQoJCWlmIChldmVudCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0KCQl2YXIgcHJlID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoMCwgY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIGVuZCA9IGNhbi51aS5jdXJyZW50LnZhbHVlLnNsaWNlKGNhbi51aS5jdXJyZW50LnNlbGVjdGlvblN0YXJ0KQoJCXZhciB0eXBlID0gY2FuLmNvcmUuU3BsaXQocHJlKS5wb3AoKXx8IiIKCQl2YXIgbmFtZSA9IGNhbi5jb3JlLlNwbGl0KHR5cGUsICIiLCBpY2UuUFQpLnBvcCgpfHwiIgoJCXR5cGUgPSBjYW4uYmFzZS50cmltU3VmZml4KHR5cGUsIG5hbWUpCgkJdHlwZSA9IGNhbi5iYXNlLnRyaW1TdWZmaXgodHlwZSwgaWNlLlBUKQoJCWNvbnN0IFBSRSA9ICJwcmUiCgoJCWZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHt0eXBlOiB0eXBlLCBuYW1lOiBuYW1lLCB0ZXh0OiBwcmUsIGZpbGU6IGNhbi5PcHRpb24obmZzLkZJTEUpfSkKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgImNvbXBsZXRlIiwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4udWkuY29tcGxldGUuX21zZyA9IG1zZwoJCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwICYmIGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkgPT0gbmZzLkpTKSB7CgkJCQkJbXNnLm5hbWUgPSBbXSwgbXNnLnR5cGUgPSBbXSwgbXNnLnRleHQgPSBbXQoJCQkJCWNhbi5jb3JlLkl0ZW0oY2FuLmNvcmUuVmFsdWUod2luZG93LCB0eXBlKSwgZnVuY3Rpb24oaywgdikgewoJCQkJCQltc2cuUHVzaChtZGIuTkFNRSwgayksIG1zZy5QdXNoKG1kYi5UWVBFLCB0eXBlb2YgdikKCQkJCQkJdHJ5IHsgbXNnLlB1c2gobWRiLlRFWFQsIHYpIH0gY2F0Y2ggKGUpIHsgbXNnLlB1c2gobWRiLlRFWFQsICIiKSB9CgkJCQkJfSkKCQkJCQltc2cuYXBwZW5kID0gW21kYi5OQU1FLCBtZGIuVFlQRSwgbWRiLlRFWFRdCgkJCQl9CgkJCQltc2cuTGVuZ3RoKCkgPT0gMCAmJiBwcmUudHJpbSgpID09ICIiICYmIGNhbi5jb3JlLkl0ZW0oY2FuLmNvcmUuVmFsdWUoY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0sIGNvZGUuS0VZV09SRCksIGZ1bmN0aW9uKGspIHsKCQkJCQltc2cuUHVzaChtZGIuTkFNRSwgaykKCQkJCX0pCgkJCQkKCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFt7dmlldzogW1BSRSwgaHRtbC5ESVYsIHByZV19XSkKCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgpIHsgcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCXZhciBsZWZ0ID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoMCwgY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpK3ZhbHVlCgkJCQkJY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGxlZnQrY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uRW5kKSkKCQkJCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwLCBjYW4udWkuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShsZWZ0Lmxlbmd0aCwgbGVmdC5sZW5ndGgpCgkJCQl9fSB9LCB0YXJnZXQpCgkJCX0pCgkJfQoKCQlmdW5jdGlvbiBmaWx0ZXIoKSB7CgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURFLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCQlpZiAodGQuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihjYW4uYmFzZS50cmltU3VmZml4KChuYW1lID09IGljZS5QVD8gdHlwZTogbmFtZSkudG9Mb3dlckNhc2UoKSwgIigiKSkgPT0gMCkgeyByZXR1cm4gdGQgfQoJCQkJfSkubGVuZ3RoID09IDApKSB7IHJldHVybiB0ciB9CgkJCX0pLmxlbmd0aCA+IChuYW1lID09IGljZS5QVD8gMTogMCkKCQl9CgoJCWZ1bmN0aW9uIHNlbGVjdChpbmRleCwgdG90YWwpIHsgaW5kZXggPSAoaW5kZXgrKHRvdGFsKzEpKSUodG90YWwrMSkKCQkJaWYgKGluZGV4ID09IHRvdGFsKSB7IGNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKSkgfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAidHI6bm90KC5oaWRlKSJdLCBmdW5jdGlvbih0ciwgaSkgeyBpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLlNFTEVDVCwgaSA9PSBpbmRleCkpIHsKCQkJCWNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKStjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URClbMF0uaW5uZXJUZXh0KQoJCQl9IH0pCgkJCXJldHVybiBpbmRleAoJCX0KCgkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJaWYgKGV2ZW50LnR5cGUgPT0gImtleXVwIikgewoJCQkJdmFyIHRvdGFsID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbaHRtbC5UQk9EWSwgInRyOm5vdCguaGlkZSkiXSkubGVuZ3RoCgkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCWNhc2UgIm4iOiBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gc2VsZWN0KGNhbi51aS5jb21wbGV0ZS5faW5kZXgrMSwgdG90YWwpOyBicmVhawoJCQkJCWNhc2UgInAiOiBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gc2VsZWN0KGNhbi51aS5jb21wbGV0ZS5faW5kZXgtMSwgdG90YWwpOyBicmVhawoJCQkJCWRlZmF1bHQ6IHJldHVybiBmYWxzZQoJCQkJfQoJCQkJcmV0dXJuIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9CgkJCXJldHVybgoJCX0KCgkJY2FuLmN1cnJlbnQubGluZS5hcHBlbmRDaGlsZChjYW4udWkuY29tcGxldGUpLCBjYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb21wbGV0ZSwgaHRtbC5MRUZULCBjYW4udWkuY3VycmVudC5vZmZzZXRMZWZ0LTEsIGh0bWwuTUFSR0lOX1RPUCwgY2FuLnVpLmN1cnJlbnQub2Zmc2V0SGVpZ2h0KzQpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiZGl2LnByZSIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5pbm5lclRleHQgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKXx8cHJlIH0pCgkJaWYgKHByZSA9PSAiIikgeyByZXR1cm4gdXBkYXRlKHRhcmdldCkgfQoKCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGh0bWwuRU5URVI6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGh0bWwuVEFCOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJY2FzZSBpY2UuU1A6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGljZS5QVDogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWRlZmF1bHQ6IGZpbHRlcigpIHx8IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCX0gY2FuLnVpLmNvbXBsZXRlLl9pbmRleCA9IC0xCgl9LAoKCV9zZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLmN1cnJlbnQubGluZSwgInRkLnRleHQiLCBmdW5jdGlvbih0ZCkgeyBjYW4udWkuY3VycmVudC52YWx1ZSA9IHRkLmlubmVyVGV4dAoJCQljYW4uY3VycmVudC5saW5lLmFwcGVuZENoaWxkKGNhbi51aS5jdXJyZW50KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY3VycmVudCwgaHRtbC5MRUZULCB0ZC5vZmZzZXRMZWZ0LTEsIGh0bWwuV0lEVEgsIGNhbi51aS5jb250ZW50LnN0eWxlLndpZHRoKQoJCQlpZiAoZXZlbnQpIHsKCQkJCWlmIChldmVudC50eXBlID09ICJjbGljayIgJiYgY2FuLm1vZGUgIT0gImluc2VydCIpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLl9jb21wbGV0ZShldmVudCwgY2FuKSB9KQoJCQkJfQoJCQkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKSwgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsTGVmdCAtPSAxMDAwMAoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMCwgKGV2ZW50Lm9mZnNldFgpLzEyLTEpCgkJCX0KCQl9KQoJfSwKCXJlcmFua0xpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsgY2FuLm1heCA9IDAKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJY2FuLm1heCsrLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCAidGQubGluZSIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5pbm5lclRleHQgPSBpbmRleCsxIH0pCgkJfSkKCX0sCglpbnNlcnRMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlLCBiZWZvcmUpIHsgdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uYXBwZW5kTGluZShjYW4sIHZhbHVlKQoJCWJlZm9yZSAmJiBjYW4udWkuY29udGVudC5pbnNlcnRCZWZvcmUobGluZSwgY2FuLm9uYWN0aW9uLl9nZXRMaW5lKGNhbiwgYmVmb3JlKSkKCQlyZXR1cm4gY2FuLm9uYWN0aW9uLnJlcmFua0xpbmUoY2FuKSwgY2FuLm9uYWN0aW9uLl9nZXRMaW5lbm8oY2FuLCBsaW5lKQoJfSwKCWRlbGV0ZUxpbmU6IGZ1bmN0aW9uKGNhbiwgbGluZSkgeyBsaW5lID0gY2FuLm9uYWN0aW9uLl9nZXRMaW5lKGNhbiwgbGluZSkKCQl2YXIgbmV4dCA9IGxpbmUubmV4dFNpYmxpbmd8fGxpbmUucHJldmlvdXNTaWJsaW5nCgkJcmV0dXJuIGNhbi5wYWdlLlJlbW92ZShjYW4sIGxpbmUpLCBjYW4ub25hY3Rpb24ucmVyYW5rTGluZShjYW4pLCBuZXh0Cgl9LAoJbW9kaWZ5TGluZTogZnVuY3Rpb24oY2FuLCBsaW5lLCB2YWx1ZSkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpZiAoaXRlbSAhPSBsaW5lICYmIGluZGV4KzEgIT0gbGluZSkgeyByZXR1cm4gfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWl0ZW0uaW5uZXJIVE1MID0gY2FuLm9uc3ludGF4Ll9wYXJzZShjYW4sIHZhbHVlKQoJCQl9KQoJCX0pCgl9LAoJZmF2b3JMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiem9uZSIsIHZhbHVlOiAiaGkifSwge25hbWU6ICJuYW1lIiwgdmFsdWU6ICJoZWxsbyJ9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBbY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLlpPTkUsIGRhdGEuem9uZXx8IiIsCgkJCQltZGIuVFlQRSwgY2FuLnBhcnNlLCBtZGIuTkFNRSwgZGF0YS5uYW1lfHwiIiwgbWRiLlRFWFQsICh2YWx1ZXx8IiIpLnRyaW1SaWdodCgpLAoJCQkJbmZzLlBBVEgsIGNhbi5PcHRpb24obmZzLlBBVEgpLCBuZnMuRklMRSwgY2FuLk9wdGlvbihuZnMuRklMRSksIG5mcy5MSU5FLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSwKCQkJXSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbIuaWh+S7tuaVsCIsICLmqKHlvI8iLCAi5oyJ6ZSuIiwgIuino+aekOWZqCIsICLmlofku7blkI0iLCAi5b2T5YmN6KGMIiwgIui3s+i9rOaVsCJdfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUveHRlcm0uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmxheW91dC5wcm9maWxlX2F1dG8oY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0LmxheW91dChjYW4pLCBjYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4pLCBjYW4udGVybSA9IHt9CgoJCWNhbi5yZXF1aXJlTW9kdWxlcyhbInh0ZXJtL2Nzcy94dGVybS5jc3MiLCAieHRlcm0iLCAieHRlcm0tYWRkb24tZml0IiwgInh0ZXJtLWFkZG9uLXdlYi1saW5rcyJdLCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IAoJCQlpZiAoY2FuLk9wdGlvbihtZGIuSEFTSCkgIT0gIiIpIHsKCQkJCXZhciBpdGVtID0ge2hhc2g6IGNhbi5PcHRpb24obWRiLkhBU0gpfTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7IGNhbi5jb3JlLlZhbHVlKGl0ZW0sIHZhbHVlLmtleSwgdmFsdWUudmFsdWUpIH0pCgkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9jb25uZWN0KGNhbiwgaXRlbSkKCQkJfQoKCQkJdmFyIGhhc2ggPSBjYW4uc3VwLl9oYXNofHxjYW4ubWlzYy5TZWFyY2hIYXNoKGNhbil8fHRydWUsIGxpc3QgPSBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCXZhciBpdGVtID0gY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgdmFsdWUpOyB2YWx1ZS5oYXNoID09IGhhc2ggJiYgKGl0ZW0uY2xpY2soKSwgaGFzaCA9IGZhbHNlKQoJCQl9KTsgaGFzaCAmJiBjYW4ub25pbXBvcnQuX2NyZWF0ZShjYW4sIFttZGIuVFlQRSwgIiIsIG1kYi5OQU1FLCAidGVybSJdKQoJCX0sIDUwMCkgfSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLCBodG1sLldJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJdmFyIHRlcm0gPSBjYW4udWkuY29udGVudC5fdGVybTsgaWYgKCF0ZXJtKSB7IHJldHVybiB9CgkJdGVybS5fZml0LmZpdCgpLCBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWl0ZW0uX21lbnUgPSBzaHkoY2FuLm9uZGV0YWlsLCBjYW4ub25kZXRhaWwubGlzdCwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQljYW4ucmVxdWVzdChldmVudCwgaXRlbSwgaXRlbS5leHRyYSksIG1ldGFbYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pCgkJfSkKCQlyZXR1cm4gaXRlbS5faXRlbSA9IGNhbi5vbmltcG9ydC5pdGVtKGNhbiwgaXRlbSwgZnVuY3Rpb24oZXZlbnQpIHsgCgkJCWl0ZW0uX3RhYnM/IGl0ZW0uX3RhYnMuY2xpY2soKTogaXRlbS5fdGFicyA9IGNhbi5vbmltcG9ydC50YWJzKGNhbiwgW2l0ZW1dLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uaW1wb3J0Ll9jb25uZWN0KGNhbiwgaXRlbSkKCQkJfSksIGl0ZW0uX3BsdWdpbiAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbS5fcGx1Z2luLl90YXJnZXQsIHRydWUpCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBpdGVtLl9tZW51KSB9KQoJfSwKCV9jcmVhdGU6IGZ1bmN0aW9uKGNhbiwgYXJncywgZGF0YSkgewoJCWNhbi5ydW5BY3Rpb24oe30sIG1kYi5DUkVBVEUsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgewoJCQl2YXIgY3VycmVudCA9IGNhbi5vbmltcG9ydC5faXRlbShjYW4sIHtoYXNoOiBtc2cuUmVzdWx0KCksIG5hbWU6IG1zZy5PcHRpb24obWRiLk5BTUUpLCBleHRyYTogZGF0YX0pCgkJCWNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIGN1cnJlbnQsIGNhbi51aS5wcm9qZWN0LmZpcnN0Q2hpbGQpLmNsaWNrKCkKCQl9KQoJfSwKCV9jb25uZWN0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi51aS5jb250ZW50CgkJY2FuLnN1cC5faGFzaCA9IGl0ZW0uaGFzaCwgY2FuLmlzQ21kTW9kZSgpICYmIChsb2NhdGlvbi5oYXNoID0gaXRlbS5oYXNoKQoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIGl0ZW0uaGFzaCB9LCB0YXJnZXQsIGNhbi51aS5wcm9maWxlKSkgewoJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgInNlbGVjdCIpLCBpdGVtLl90ZXJtLmZvY3VzKCkKCQkJcmV0dXJuIGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgaXRlbS5fdGVybSkKCQl9CgoJCWl0ZW0uZXh0cmEgPSBjYW4uYmFzZS5PYmooaXRlbS5leHRyYSwge30pCgkJdmFyIHRlcm0gPSBuZXcgVGVybWluYWwoe3RoZW1lOiBpdGVtLmV4dHJhLCBjdXJzb3JCbGluazogdHJ1ZSwgdGFiU3RvcFdpZHRoOiA0fSkKCQl2YXIgZml0QWRkb24gPSBuZXcgRml0QWRkb24uRml0QWRkb24oKTsgdGVybS5sb2FkQWRkb24oZml0QWRkb24pLCB0ZXJtLl9maXQgPSBmaXRBZGRvbgoJCXRlcm0ubG9hZEFkZG9uKG5ldyBXZWJMaW5rc0FkZG9uLldlYkxpbmtzQWRkb24oKSkKCgkJdGVybS5vcGVuKHRhcmdldHx8Y2FuLnVpLmNvbnRlbnQpCgkJdGVybS5vblJlc2l6ZShmdW5jdGlvbihzaXplKSB7IGNhbi5vbmltcG9ydC5fc2l6ZShjYW4sIGl0ZW0sIHNpemUpIH0pCgkJZml0QWRkb24uZml0KCkKCgkJdmFyIHN1Ym1vZGUgPSBmYWxzZSwga2V5c2tpcCA9IGZhbHNlCgkJdGVybS5vbktleShmdW5jdGlvbihlKSB7IHZhciBldmVudCA9IGUuZG9tRXZlbnQKCQkJaWYgKHN1Ym1vZGUpIHsga2V5c2tpcCA9IHRydWU7IHN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQljYXNlICJsIjogdGFyZ2V0Lm5leHRTaWJsaW5nICYmIHRhcmdldC5uZXh0U2libGluZy5fdGVybT8gdGFyZ2V0Lm5leHRTaWJsaW5nLl90ZXJtLmZvY3VzKCk6CgkJCQkJCWl0ZW0uX3RhYnMgJiYgaXRlbS5fdGFicy5uZXh0U2libGluZyAmJiBpdGVtLl90YWJzLm5leHRTaWJsaW5nLmNsaWNrKCk7CgkJCQkJYnJlYWsKCQkJCWNhc2UgImgiOiB0YXJnZXQucHJldmlvdXNTaWJsaW5nICYmIHRhcmdldC5wcmV2aW91c1NpYmxpbmcuX3Rlcm0/IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuX3Rlcm0uZm9jdXMoKToKCQkJCQkJaXRlbS5fdGFicyAmJiBpdGVtLl90YWJzLnByZXZpb3VzU2libGluZyAmJiBpdGVtLl90YWJzLnByZXZpb3VzU2libGluZy5jbGljaygpOwoJCQkJCWJyZWFrCgkJCQljYXNlICJuIjogY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKTsgYnJlYWsKCQkJCQlicmVhawoJCQkJZGVmYXVsdDoga2V5c2tpcCA9IGZhbHNlCgkJCX0gfQoJCQlzdWJtb2RlID0gZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXkgPT0gImciCgkJCWNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkKCQl9KQoJCXRlcm0ub25EYXRhKGZ1bmN0aW9uKHZhbCkgewoJCQlpZiAoc3VibW9kZSB8fCBrZXlza2lwKSB7IGtleXNraXAgPSBmYWxzZTsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0Ll9pbnB1dChjYW4sIGl0ZW0sIHZhbCkKCQl9KQoJCXRlcm0ub25UaXRsZUNoYW5nZShmdW5jdGlvbih0aXRsZSkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUodGl0bGUpIH0pCgkJdGVybS5vbkN1cnNvck1vdmUoZnVuY3Rpb24oZSkgeyBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pIH0pCgoJCWNhbi50ZXJtW2l0ZW0uaGFzaF0gPSBpdGVtLl90ZXJtID0gdGFyZ2V0Ll90ZXJtID0gdGVybSwgdGVybS5fdGFyZ2V0ID0gdGFyZ2V0LCB0ZXJtLl9pdGVtID0gaXRlbQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0pLCAic2VsZWN0IiksIGl0ZW0uX3Rlcm0uZm9jdXMoKQoJCXJldHVybiBjYW4ub25pbXBvcnQuX3BsdWcoY2FuLCBpdGVtKSwgY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKQoJfSwKCV9pbnB1dDogZnVuY3Rpb24oY2FuLCBpdGVtLCB2YWwpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBpdGVtKSwgImlucHV0IiwgW2J0b2EodmFsKV0sIGZ1bmN0aW9uKCkge30pCgl9LAoJX3NpemU6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgc2l6ZSkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHNpemUsIGl0ZW0pLCAicmVzaXplIiwgW10pCgl9LAoJX3BsdWc6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvZmlsZSkKCQljYW4ub25pbXBvcnQucGx1ZyhjYW4sIGl0ZW0uZXh0cmEsIGNhbi51aS5wcm9maWxlLCBmdW5jdGlvbihzdWIpIHsgaXRlbS5fcGx1Z2luID0gc3ViCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkqMy80KQoJCX0pCgl9LAoJZ3JvdzogZnVuY3Rpb24oY2FuLCBtc2csIHR5cGUpIHsgdmFyIHRlcm0gPSBjYW4udGVybVttc2cuT3B0aW9uKG1kYi5IQVNIKV07IGlmICghdGVybSkgeyByZXR1cm4gfQoJCXN3aXRjaCAodHlwZSkgewoJCQljYXNlICJkYXRhIjogdGVybS53cml0ZShhdG9iKG1zZy5PcHRpb24obWRiLlRFWFQpKSk7IGJyZWFrCgkJCWNhc2UgImV4aXQiOiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0ZXJtLl90YXJnZXQpOyBicmVhawoJCX0KCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogW21kYi5DUkVBVEUsIGxleC5TUExJVCwgbWRiLlBSVU5FU10sCglfdHJhbnM6IHtzcGxpdDogIuWIhuWxjyIsIHRoZW1lOiAi5Li76aKYIn0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCAiYmFja2dyb3VuZCIsIGN0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihhcmdzLCBkYXRhKSB7CgkJCWNhbi5vbmltcG9ydC5fY3JlYXRlKGNhbiwgYXJncywgZGF0YSkKCQl9KQoJfSwKCXNwbGl0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7bmFtZTogInRlcm0iLCBucm93OiAyLCBuY29sOiAyfSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCAibnJvdyIsICJuY29sIl0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbZGF0YV0sIGZ1bmN0aW9uKGV2ZW50KSB7IGlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIGRhdGEubmFtZSB9LCBjYW4udWkuY29udGVudCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5jb3JlLkxpc3QocGFyc2VJbnQoZGF0YS5ucm93KSwgZnVuY3Rpb24obnJvdykgeyB2YXIgcm93ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dmlldzogInJvdyIsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpL2RhdGEubnJvd319XSkuZmlyc3QKCQkJCQljYW4uY29yZS5MaXN0KHBhcnNlSW50KGRhdGEubmNvbCksIGZ1bmN0aW9uKG5jb2wpIHsgdmFyIGNvbCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHJvdywgW3t2aWV3OiAiY29sIiwgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvZGF0YS5ucm93LCB3aWR0aDogY2FuLkNvbmZXaWR0aCgpL2RhdGEubmNvbC0yfX1dKS5maXJzdAoJCQkJCQljYW4ucnVuQWN0aW9uKHt9LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsIGRhdGEudHlwZSwgbWRiLk5BTUUsIGNhbi5jb3JlLktleXMoZGF0YS5uYW1lLCBucm93LCBuY29sKV0sIGZ1bmN0aW9uKG1zZykgeyBjYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCB7aGFzaDogbXNnLlJlc3VsdCgpfSwgY29sKSB9KQoJCQkJCX0pCgkJCQl9KQoJCQl9KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFsic2hhcmUiLCAicGx1Z2luIiwgInRoZW1lIiwgInJlbmFtZSIsICJyZW1vdmUiXSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgbXNnLk9wdGlvbigiYXJncyIsICIiKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBpdGVtLm5hbWV9LCB7bmFtZTogY2hhdC5UT1BJQywgdmFsdWVzOiBbY2xpLldISVRFLCBjbGkuQkxBQ0tdfV0sIFsKCQkJbWRiLk5BTUUsIGNhbi5faW5kZXgsIG1kYi5URVhULCBKU09OLnN0cmluZ2lmeShbY2FuLnN1cC5faGFzaF0pLAoJCV0pCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgYXJncyksIGNhbi5iYXNlLkNvcHkoaXRlbS5leHRyYSwgZGF0YSksIGNhbi5vbmltcG9ydC5fcGx1ZyhjYW4sIGl0ZW0pCgkJfSkKCX0sCgl0aGVtZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWyJiYWNrZ3JvdW5kIiwgInNlbGVjdGlvbiIsICJjdXJzb3IiLCAiZm9yZWdyb3VuZCJdLCBmdW5jdGlvbihhcmdzLCBkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIGFyZ3MpLCBjYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBpdGVtLl90ZXJtLnNldE9wdGlvbigidGhlbWUiLCBkYXRhKQoJCX0pCgl9LAoJcmVuYW1lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUVdLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgYXJncyksIGl0ZW0ubmFtZSA9IGl0ZW0uX2l0ZW0uaW5uZXJUZXh0ID0gaXRlbS5fdGFicy5pbm5lclRleHQgPSBhcmdzWzFdCgkJfSkKCX0sCglyZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbikKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogW21kYi5UT1RBTCwgbWRiLlRZUEUsICJiYWNrZ3JvdW5kIiwgInJvd3MiLCAiY29scyIsICJjdXJzb3JZIiwgImN1cnNvclgiLCBjdHguSU5ERVhdLAoJdGVybTogZnVuY3Rpb24oY2FuLCB0ZXJtKSB7IGl0ZW0gPSB0ZXJtLl9pdGVtCgkJY2FuLmNvcmUuTGlzdChjYW4ub25leHBvcnQubGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCWNhbi5TdGF0dXMoa2V5LCBjYW4uYmFzZS5nZXRWYWxpZChpdGVtW2tleV0sIGl0ZW0uZXh0cmFba2V5XSwgdGVybVtrZXldLCB0ZXJtLmJ1ZmZlci5hY3RpdmVba2V5XSwgIiIpKQoJCX0pCgkJY2FuLlN0YXR1cyhtZGIuVE9UQUwsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLkRJVl9JVEVNKS5sZW5ndGgpCgkJY2FuLlN0YXR1cyhtZGIuVFlQRSwgaXRlbVttZGIuVFlQRV18fCIiKQoJCXJldHVybiB0ZXJtCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvdGVhbS9wbGFuLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5wcm9maWxlKGNhbiksIGNhbi5vbmltcG9ydFtjYW4uT3B0aW9uKCJzY2FsZSIpfHwid2VlayJdKGNhbiwgbXNnKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0KQoJCWNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQkhY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCSFjYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHRydWUpCgl9LAoJX2NvbnRlbnQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KSB7CgkJdmFyIGhhc2ggPSB7fTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgayA9IGtleShjYW4uYmFzZS5EYXRlKHZhbHVlLmJlZ2luX3RpbWUpKTsgaGFzaFtrXSA9IChoYXNoW2tdfHxbXSkuY29uY2F0KFt2YWx1ZV0pIH0pCgoJCWNhbi5zdXAudGFzayAmJiAoY2FuLnN1cC50YXNrLl90YXJnZXQgPSBudWxsKQoJCXZhciBiZWdpbl90aW1lID0gY2FuLmJhc2UuRGF0ZShjYW4uT3B0aW9uKCJiZWdpbl90aW1lIikpCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaG91ciwgcm93KSB7CgkJCXJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogY2FuLmNvcmUuTGlzdChoZWFkLCBmdW5jdGlvbih3ZWVrLCBjb2wpIHsKCQkJCWlmIChyb3cgPT0gMCkgeyByZXR1cm4ge3RleHQ6IFtjYW4udXNlci50cmFucyhjYW4sIHdlZWspLCBodG1sLlRIXX0gfQoJCQkJaWYgKGNvbCA9PSAwKSB7IHJldHVybiB7dGV4dDogW2hvdXIsIGh0bWwuVERdfSB9CgkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll90YXNrKGNhbiwgbXNnLCBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpLCBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpKQoJCQl9KX0KCQl9KSB9XSksIGNhbi5TdGF0dXMobWRiLkNPVU5ULCBtc2cuTGVuZ3RoKCkpCgoJCW1zZy5MZW5ndGgoKSA+IDAgJiYgY2FuLnN1cC50YXNrICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQl2YXIgdGFyZ2V0ID0gY2FuLnN1cC50YXNrLl90YXJnZXR8fGNhbi50YXNrLl90YXJnZXQ7IGNhbi5zdXAudGFzayA9IG51bGwsIHRhcmdldCAmJiB0YXJnZXQuY2xpY2soKQoJCX0pCgl9LAoJX3Rhc2s6IGZ1bmN0aW9uKGNhbiwgbXNnLCBsaXN0LCB0aW1lKSB7IHJldHVybiB7dGV4dDogWyIiLCBodG1sLlREXSwKCQlvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uaW5zZXJ0VGFzayhldmVudCwgY2FuLCB0aW1lK2Nhbi5iYXNlLlRpbWUobnVsbCwgIiV5LSVtLSVkICVIOiVNOiVTIikuc2xpY2UodGltZS5sZW5ndGgpKQoJCX0sCgkJb25kcm9wOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJY2FuLmRyb3AoZXZlbnQsIGV2ZW50LnRhcmdldCwgdGltZSkKCQl9LAoJCW9uZHJhZ292ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5URCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIGl0ZW0sICJvdmVyIiwgZXZlbnQudGFyZ2V0ID09IGl0ZW0pCgkJCX0pCgkJfSwKCQlsaXN0OiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHRhc2spIHsKCQkJcmV0dXJuIGNhbi5iYXNlLmlzU3RyaW5nKHRhc2spPyB7dGV4dDogW3Rhc2ssIGh0bWwuRElWLCAiZGF0ZSJdfToge3RleHQ6IFtjYW4ub25leHBvcnRbY2FuLkFjdGlvbigidmlldyIpfHwidGV4dCJdKGNhbiwgdGFzayksIGh0bWwuRElWLCBjYW4ub25leHBvcnQuc3R5bGUoY2FuLCB0YXNrKV0sCgkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDsgY2FuLmRyb3AgPSBmdW5jdGlvbihldmVudCwgdGQsIHRpbWUpIHsgdGQuYXBwZW5kKHRhcmdldCkKCQkJCQljYW4ub25hY3Rpb24ubW9kaWZ5VGFzayhldmVudCwgY2FuLCB0YXNrLCAiYmVnaW5fdGltZSIsIHRpbWUrdGFzay5iZWdpbl90aW1lLnNsaWNlKHRpbWUubGVuZ3RoKSwgdGFzay5iZWdpbl90aW1lKQoJCQkJfSB9LCBkcmFnZ2FibGU6IHRpbWUgIT0gdW5kZWZpbmVkLCB0aXRsZTogY2FuLm9uZXhwb3J0LnRpdGxlKGNhbiwgdGFzayksIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCQl2YXIgaXRlbSA9IGNhbi5vbmltcG9ydC5pdGVtKGNhbiwge25pY2s6IHRhc2submFtZSsiOiIrdGFzay50ZXh0fSwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEQsIHRhcmdldC5wYXJlbnROb2RlKSwgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgdGFzaykKCQkJCQl9KSB9LCBudWxsLCBjYW4udWkucHJvamVjdCk7IHRhc2suX3RhcmdldCA9IHRhcmdldCwgdGFyZ2V0Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyBpdGVtLmNsaWNrKCkgfQoJCQkJCWNhbi50YXNrID0gY2FuLnRhc2t8fHRhc2ssIGNhbi5zdXAudGFzayA9IGNhbi5zdXAudGFza3x8dGFzaywgY2FuLnN1cC50YXNrLnpvbmUgPT0gdGFzay56b25lICYmIGNhbi5zdXAudGFzay5pZCA9PSB0YXNrLmlkICYmIChjYW4uc3VwLnRhc2suX3RhcmdldCA9IHRhcmdldCkKCQkJCX0sCgkJCX0KCQl9KSwKCX0gfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBjYW4uc3VwLnRhc2sgPSB0YXNrLCBjYW4uU3RhdHVzKHRhc2spLCBbdGFzay5wb2QsIHRhc2suem9uZSwgdGFzay5pZF0uam9pbihpY2UuUFQpIH0sIGNhbi51aS5wcm9maWxlLCBjYW4udWkuZGlzcGxheSkpIHsgcmV0dXJuIH0KCgkJdGFzay5leHRyYSAmJiBjYW4uY29yZS5JdGVtKGNhbi5iYXNlLk9iaih0YXNrLmV4dHJhKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB0YXNrWyJleHRyYS4iK2tleV0gPSB2YWx1ZSB9KSwgZGVsZXRlKHRhc2suZXh0cmEpCgkJdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi51aS5wcm9maWxlLCBbe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbe3RoOiBbbWRiLktFWSwgbWRiLlZBTFVFXX1dfV0pLmZpcnN0CgkJY2FuLmNvcmUuSXRlbSh0YXNrLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGtleSAhPSAiX3RhcmdldCIgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsIFt7CgkJCXRkOiBba2V5LCBrZXkgPT0gaWNlLlBPRCAmJiB2YWx1ZSAhPSAiIj8gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiB2YWx1ZX0pLCB2YWx1ZSk6IHZhbHVlXSwKCQkJb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIGV2ZW50LnRhcmdldCkgJiYgZXZlbnQudGFyZ2V0LnR5cGUgPT0gaHRtbC5CVVRUT04pIHsKCQkJCWNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHRhc2spLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdLCBmdW5jdGlvbihtc2cpIHsgY2FuLlVwZGF0ZSgpIH0pCgkJCX0gfSwKCQkJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KCkKCQkJCXN3aXRjaCAoa2V5KSB7CgkJCQkJY2FzZSAiem9uZSI6CgkJCQkJY2FzZSAiaWQiOgoJCQkJCQlyZXR1cm4KCQkJCQljYXNlICJsZXZlbCI6CgkJCQkJY2FzZSAic2NvcmUiOgoJCQkJCQltc2cuUHVzaChrZXksICIxIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiMiIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjMiKQoJCQkJCQltc2cuUHVzaChrZXksICI0IikKCQkJCQkJbXNnLlB1c2goa2V5LCAiNSIpCgkJCQkJCWJyZWFrCgkJCQkJY2FzZSAic3RhdHVzIjoKCQkJCQkJbXNnLlB1c2goa2V5LCAicHJlcGFyZSIpCgkJCQkJCW1zZy5QdXNoKGtleSwgInByb2Nlc3MiKQoJCQkJCQltc2cuUHVzaChrZXksICJmaW5pc2giKQoJCQkJCQltc2cuUHVzaChrZXksICJjYW5jZWwiKQoJCQkJCQlicmVhawoJCQkJfQoJCQkJY2FuLm9ubW90aW9uLm1vZGlmeShjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSkgewoJCQkJCWNhbi5vbmFjdGlvbi5tb2RpZnlUYXNrKGV2ZW50LCBjYW4sIHRhc2ssIGtleSwgdmFsdWUpCgkJCQl9LCB7bmFtZToga2V5LCBhY3Rpb246IGtleS5pbmRleE9mKG1kYi5USU1FKSA+IDA/ICJkYXRlIjogImtleSIsIG1zZzogbXNnLCBtb2RlOiAic2ltcGxlIn0pCgkJCX0sCgkJfV0pIH0pLCBjYW4ub25pbXBvcnQuX2Rpc3BsYXkoY2FuLCB0YXNrKQoJfSwKCV9kaXNwbGF5OiBmdW5jdGlvbihjYW4sIHRhc2spIHsgaWYgKCF0YXNrWyJleHRyYS5jbWQiXSkgeyByZXR1cm4gfQoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogInBsdWciLCBjdHg6IHRhc2tbImV4dHJhLmN0eCJdLCBjbWQ6IHRhc2tbImV4dHJhLmNtZCJdLCBhcmc6IHRhc2tbImV4dHJhLmFyZyJdfSwgZnVuY3Rpb24oc3ViLCBtZXRhKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBraXQuRGljdCgidGFzay5wb2QiLCB0YXNrWyJwb2QiXSwgInRhc2suem9uZSIsIHRhc2suem9uZSwgInRhc2suaWQiLCB0YXNrLmlkKSkKCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIFt0YXNrW21kYi5aT05FXSwgdGFza1ttZGIuSURdXS5jb25jYXQoY21kcyksIGNiKQoJCQl9CgkJfSwgY2FuLnVpLmRpc3BsYXkpCgl9LAoKCWRheTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IFsiaG91ciIsICJ0YXNrIl0KCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDc7IGkgPCAyNDsgaSsrKSB7IGxpc3QucHVzaChjYW4uYmFzZS5OdW1iZXIoaSwgMikpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLk51bWJlcih0aW1lLmdldEhvdXJzKCksIDIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbbGlzdFtyb3ddXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKGJlZ2luX3RpbWUsICIleS0lbS0lZCAiKStsaXN0W3Jvd10gfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAoJd2VlazogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IGNhbi5vbmV4cG9ydC5oZWFkKGNhbiwgImhvdXIiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gNzsgaSA8IDI0OyBpKyspIHsgbGlzdC5wdXNoKGNhbi5iYXNlLk51bWJlcihpLCAyKSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gdGltZS5nZXREYXkoKSsiICIrY2FuLmJhc2UuTnVtYmVyKHRpbWUuZ2V0SG91cnMoKSwgMikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtjb2wtMSsiICIrbGlzdFtyb3ddXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLWJlZ2luX3RpbWUuZ2V0RGF5KCkrY29sLTEpLCAiJXktJW0tJWQgIikrbGlzdFtyb3ddIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCW1vbnRoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gY2FuLm9uZXhwb3J0LmhlYWQoY2FuLCAib3JkZXIiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDY7IGkrKykgeyBsaXN0LnB1c2goaSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAiJXktJW0tJWQiKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7CgkJCXZhciBiZWdpbiA9IGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLShiZWdpbl90aW1lLmdldERhdGUoKS0xKSkKCQkJdmFyIGxhc3QgPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSktYmVnaW4uZ2V0RGF5KCkpCgkJCXZhciBkYXkgPSBjYW4uYmFzZS5UaW1lQWRkKGxhc3QsIChyb3ctMSkqNytjb2wpCgkJCXJldHVybiBbZGF5LmdldERhdGUoKSsiIl0uY29uY2F0KGhhc2hba2V5KGRheSldfHxbXSkKCQl9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7CgkJCXZhciBiZWdpbiA9IGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLShiZWdpbl90aW1lLmdldERhdGUoKS0xKSkKCQkJdmFyIGxhc3QgPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSktYmVnaW4uZ2V0RGF5KCkpCgkJCXZhciBkYXkgPSBjYW4uYmFzZS5UaW1lQWRkKGxhc3QsIChyb3ctMSkqNytjb2wpCgkJCXJldHVybiBrZXkoZGF5KQoJCX0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCXllYXI6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBjYW4ub25leHBvcnQuaGVhZChjYW4sICJtb250aCIpCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSAxOyBpIDwgMTM7IGkrKykgeyBsaXN0LnB1c2goaSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAiJXktJW0gIikrdGltZS5nZXREYXkoKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2JlZ2luX3RpbWUuZ2V0RnVsbFllYXIoKSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMikrIiAiKyhjb2wtMSldIH0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsgcmV0dXJuIGJlZ2luX3RpbWUuZ2V0RnVsbFllYXIoKSsiLSIrY2FuLmJhc2UuTnVtYmVyKGxpc3Rbcm93XSwgMikgfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAoJbG9uZzogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgYmVnaW5fdGltZSA9IGNhbi5iYXNlLkRhdGUoY2FuLmJhc2UuVGltZShjYW4uT3B0aW9uKCJiZWdpbl90aW1lIiksICIleS0lbS0lZCAlSDolTTolUyIpKQoJCXZhciBiZWdpbiA9IGJlZ2luX3RpbWUuZ2V0RnVsbFllYXIoKSAtIDUKCgkJdmFyIGhlYWQgPSBbIm1vbnRoIl07IGZvciAodmFyIGkgPSAwOyBpIDwgMTA7IGkrKykgeyBoZWFkLnB1c2goYmVnaW4raSkgfQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtIikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtiZWdpbitjb2wtMSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMildIH0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsgcmV0dXJuIGJlZ2luK2NvbC0xKyItIitjYW4uYmFzZS5OdW1iZXIocm93LCAyKSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu25Lqk5LqSIiwgbGlzdDogWwoJCSJpbnNlcnQiLCAiZXhwb3J0IiwgImltcG9ydCIsCgkJWyJsZXZlbCIsICJhbGwiLCAibDEiLCAibDIiLCAibDMiLCAibDQiLCAibDUiXSwKCQlbInN0YXR1cyIsICJhbGwiLCAicHJlcGFyZSIsICJwcm9jZXNzIiwgImNhbmNlbCIsICJmaW5pc2giXSwKCQlbInNjb3JlIiwgImFsbCIsICJzMSIsICJzMiIsICJzMyIsICJzNCIsICJzNSJdLAoJCVsidmlldyIsICIiLCAibmFtZSIsICJ0ZXh0IiwgImxldmVsIiwgInNjb3JlIl0sCgldLAoJX3RyYW5zOiB7InRhc2siOiAi5Lu75YqhIiwgImhvdXIiOiAi5pe26Ze0IiwgIm1vbnRoIjogIuaciOS7vSJ9LAoJaW5zZXJ0VGFzazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGltZSkgeyB2YXIgbXNnID0gY2FuLnN1cC5yZXF1ZXN0KGV2ZW50LCB7YmVnaW5fdGltZTogdGltZX0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBtZGIuSU5TRVJUXSksIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLklOU0VSVCwgWyJ6b25lIiwgYXJnc1sxXSwgImJlZ2luX3RpbWUiLCB0aW1lXS5jb25jYXQoYXJncykpCgkJfSkKCX0sCgltb2RpZnlUYXNrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXNrLCBrZXksIHZhbHVlKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwgdGFzayksIG1kYi5NT0RJRlksIFtrZXksIHZhbHVlLCB0YXNrW2tleV1dKQoJfSwKCglfZmlsdGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IHZhciBjb3VudCA9IDAKCQlpZiAodmFsdWUgPT0gImFsbCIpIHsKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuRElWX0lURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLkhJREUpLCBjb3VudCsrCgkJCX0pCgkJfSBlbHNlIHsKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuRElWX0lURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCBodG1sLkhJREUpCgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCB2YWx1ZSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLkhJREUpLCBjb3VudCsrCgkJCX0pCgkJfQoJCWNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5TdGF0dXMobWRiLkNPVU5ULCBjb3VudCkKCX0sCglsZXZlbDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJc3RhdHVzOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fZmlsdGVyKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIH0sCglzY29yZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJdmlldzogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCkKCQljYW4ub25pbXBvcnRbY2FuLk9wdGlvbigic2NhbGUiKV0oY2FuLCBjYW4uX21zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogW21kYi5DT1VOVCwgImJlZ2luX3RpbWUiLCBtZGIuWk9ORSwgbWRiLklELCBtZGIuVFlQRSwgbWRiLk5BTUUsIG1kYi5URVhUXSwKCW5hbWU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gdGFzay5uYW1lIH0sCgl0ZXh0OiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIHRhc2submFtZSsiOiAiKyh0YXNrLnRleHR8fCIiKSB9LAoJbGV2ZWw6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gImwtIisodGFzay5sZXZlbHx8MykrIjogIisodGFzay5uYW1lfHwiIikgfSwKCXNjb3JlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuICJzLSIrKHRhc2subGV2ZWx8fDMpKyI6ICIrKHRhc2submFtZXx8IiIpIH0sCgl0aXRsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiB0YXNrLnpvbmUrIjogIisodGFzay50eXBlfHwiIikgfSwKCXN0eWxlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIFtodG1sLklURU0sIHRhc2suc3RhdHVzLCBtZGIuSUQrdGFzay5pZCwgImwiKyh0YXNrLmxldmVsfHwiIiksICJzIisodGFzay5zY29yZXx8IiIpXS5qb2luKGljZS5TUCkgfSwKCWhlYWQ6IGZ1bmN0aW9uKGNhbiwgc2NhbGUpIHsKCQlzd2l0Y2ggKHNjYWxlKSB7CgkJCWNhc2UgInllYXIiOgoJCQljYXNlICJsb25nIjoKCQkJCXJldHVybgoJCX0KCQlyZXR1cm4gW3NjYWxlXS5jb25jYXQoY2FuLnVzZXIuaW5mby5sYW5ndWFnZSA9PSAiZW4iPyBbIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0IiwgIlN1biJdOiBbIuWRqOaXpSIsICLlkajkuIAiLCAi5ZGo5LqMIiwgIuWRqOS4iSIsICLlkajlm5siLCAi5ZGo5LqUIiwgIuWRqOWFrSJdKTsKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RhdGEuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQuZGlzcGxheShjYW4pCgkJY2FuLnRhYmxlID0gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIG9uY29udGV4dG1lbnU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBmdW5jdGlvbihldiwgY21kLCBtZXRhKSB7CgkJCQkJdmFyIGNiID0gbWV0YVtjbWRdOyBjYiAmJiBjYihldmVudCwgY2FuLCBjbWQsIHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKQoJCQkJfSkKCQkJfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWtleSA9PSBuZnMuUEFUSCAmJiBjYW4ucnVuKGV2ZW50LCBbY2FuLk9wdGlvbihuZnMuUEFUSCwgdmFsdWUpXSkKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLmVkaXRhYmxlKGNhbiwgZXZlbnQudGFyZ2V0LCB0cnVlKQoJCQl9fQoJCX0sIGNhbi51aS5jb250ZW50KQoKCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIG1zZy5hcHBlbmQpCgkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIue7hOS7tuiPnOWNlSIsCgki5rGC5ZKMIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgaW5kZXgpIHsKCQlyZXNbaW5kZXhdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSArIChyZXNbaW5kZXhdfHwwKTsKCX0sCgki5pyA5aSnIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgaW5kZXgpIHsKCQkJKHJlc1tpbmRleF0gPT09IHVuZGVmaW5lZCB8fCBwYXJzZUludCh0ZC5pbm5lclRleHQpID4gcGFyc2VJbnQocmVzW2luZGV4XSkpICYmIChyZXNbaW5kZXhdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSkKCX0sCgki5pyA5bCPIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgaW5kZXgpIHsKCQkocmVzW2luZGV4XSA9PT0gdW5kZWZpbmVkIHx8IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgPCBwYXJzZUludChyZXNbaW5kZXhdKSkgJiYgKHJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpKQoJfSwKCSLlubPlnYciOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBuY29sLCBjb2xzLCByb3dzLCBucm93KSB7CgkJcmVzW25jb2xdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSArIChyZXNbbmNvbF18fDApOwoJCWlmIChucm93ID09IHJvd3MubGVuZ3RoIC0gMSkgewoJCQlyZXNbbmNvbF0gPSByZXNbbmNvbF0gLyBucm93CgkJfQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbaWNlLlNBVkUsIFtpY2UuTU9ERSwgIuWFqOmAiSIsICLlnZfpgIkiLCAi5Y+N6YCJIiwgIuWkmumAiSIsICLmi5bliqgiLCAi57yW6L6RIl0sIFtpY2UuRVhFQywgIuaxguWSjCIsICLmnIDlpKciLCAi5pyA5bCPIiwgIuW5s+WdhyJdXSwKCV9jb21wdXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIG11bCA9IGh0bWwuVFIgKyAoY2FuLkFjdGlvbihpY2UuTU9ERSkgPT0gIuWFqOmAiSI/ICIiOiAiLnNlbGVjdCIpCgkJdmFyIG1ldGhvZCA9IGNhbi5vbmZpZ3VyZVtjYW4uQWN0aW9uKGljZS5FWEVDKV0sIHJlcyA9IHt9CgoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBtdWwsIGZ1bmN0aW9uKHRyLCBucm93LCByb3dzKSB7CgkJCShtdWwgIT0gaHRtbC5UUiB8fCBucm93ID4gMCkgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBuY29sLCBjb2xzKSB7CgkJCQltZXRob2QgJiYgbWV0aG9kKGV2ZW50LCBjYW4sIHJlcywgdGQsIG5jb2wsIGNvbHMsIHJvd3MsIG5yb3cpCgkJCX0pCgkJfSkKCQljYW4uY29yZS5JdGVtKHJlcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBjYW4uU3RhdHVzKGNhbi5fbXNnLmFwcGVuZFtrZXldLCB2YWx1ZXx8IiIpIH0pCgl9LAoKCXNhdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLm9uZXhwb3J0LmZpbGUoY2FuKV0pIH0sCglleGVjOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pIH0sCgoJX2ZvcmVhY2g6IGZ1bmN0aW9uKGNhbiwgYnV0dG9uLCBjYikgewoJCWJ1dHRvbiAmJiBjYW4uQWN0aW9uKGljZS5NT0RFLCBidXR0b24pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2IoaXRlbSkKCQl9KQoJfSwKCgki5YWo6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLmVkaXRhYmxlKGNhbiwgaXRlbSwgZmFsc2UpCgkJCWNhbi5wYWdlLmRyYWdnYWJsZShjYW4sIGl0ZW0sIGZhbHNlKQoJCQlpdGVtLm9ubW91c2VlbnRlciA9IG51bGwsIGl0ZW0ub25jbGljayA9IG51bGwKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgIm92ZXIiKQoJCX0pCgkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgl9LAoJIuWdl+mAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLlj43pgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCkKCQkJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJCQl9CgkJfSkKCX0sCgki5aSa6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKSB7fQoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbigpIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCkKCQkJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJCQl9CgkJfSkKCX0sCgki5ouW5YqoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uWyLlhajpgIkiXShldmVudCwgY2FuLCBidXR0b24pCgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZHJhZ2dhYmxlKGNhbiwgaXRlbSwgdHJ1ZSkKCQkJaXRlbS5vbmRyYWdzdGFydCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5kcmFnID0gaXRlbSB9CgkJCWl0ZW0ub25kcmFnb3ZlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCAib3ZlciIpfQoJCQlpdGVtLm9uZHJhZ2xlYXZlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sICJvdmVyIikgfQoJCQlpdGVtLm9uZHJvcCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCkKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRBQkxFLCBmdW5jdGlvbih0YWJsZSkgewoJCQkJCXRhYmxlLmluc2VydEJlZm9yZShjYW4uZHJhZywgaXRlbSkKCQkJCX0pCgkJCX0KCQl9KQoJfSwKCSLnvJbovpEiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBpdGVtLCB0cnVlKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIue7hOS7tuivpuaDhSIsIGxpc3Q6IFsi5aSN5Yi2IiwgIuWIoOmZpCJdLAoJIuWkjeWItiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgdmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpIHsKCQl2YXIgZW5kID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnRhYmxlLCBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLl9tc2cuYXBwZW5kLCBmdW5jdGlvbihrZXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbbGluZVtrZXldLCBodG1sLlREXX0KCQl9KX1dKS50cjsgY2FuLnRhYmxlLmluc2VydEJlZm9yZShlbmQsIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWZpbGU6IGZ1bmN0aW9uKGNhbikgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBjYW4ucGFnZS5LZXlzKGh0bWwuVEgsIGh0bWwuVEQpLCBmdW5jdGlvbih0ZCkge3JldHVybiB0ZC5pbm5lckhUTUx9KS5qb2luKGljZS5GUykKCQl9KS5qb2luKGljZS5OTCkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5vbmltcG9ydC5fc2hvdyhjYW4sIG1zZyksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQljYW4ua2V5bGlzdCA9IFtdLCBjYW4ub25rZXltYXAuX2J1aWxkKGNhbikKCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5jb3JlLkl0ZW0oa2l0LkRpY3QoCgkJCQlodG1sLlNUUk9LRV9XSURUSCwgMiwgaHRtbC5TVFJPS0UsIGNsaS5ZRUxMT1csIGh0bWwuRklMTCwgY2xpLlBVUlBMRSwKCQkJCWh0bWwuRk9OVF9TSVpFLCAyNCwgaHRtbC5GT05UX0ZBTUlMWSwgaHRtbC5NT05PU1BBQ0UsCgkJCQkiZ28iLCBpY2UuUlVOLCBzdmcuU0hBUEUsIHN2Zy5SRUNULCBzdmcuR1JJRCwgMTAsCgkJCSksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgY2FuLnN2Zy5WYWx1ZShrZXksIGNhbi5BY3Rpb24oa2V5LCBjYW4uc3ZnLlZhbHVlKGtleSl8fHZhbHVlKSkgfSkKCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuTUlOX0hFSUdIVCwgODAsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS1jYW4uc3ZnLlZhbChodG1sLkhFSUdIVCktNTIpCgkJCXZhciBwaWQgPSBjYW4uT3B0aW9uKHN2Zy5QSUQpfHxjYW4uc3ZnLlZhbHVlKHN2Zy5QSUQpOyBwaWQgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgaXRlbSksIGNhbi5vbmRldGFpbC5ydW4oe3RhcmdldDogaXRlbX0sIGNhbikKCQkJfSkgfHwgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgY2FuLnN2ZykKCQl9KSAKCX0sCglfc2hvdzogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLnBvaW50ID0gW10KCQljYW4uc3ZnID0gbnVsbCwgY2FuLmdyb3VwID0gbnVsbCwgY2FuLnRlbXAgPSBudWxsLCBjYW4uY3VycmVudCA9IG51bGwKCgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGNhbi51aS5jb250ZW50LCBtc2cuUmVzdWx0KCl8fGNhbi5vbmV4cG9ydC5jb250ZW50KGNhbikpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuU1ZHLCBmdW5jdGlvbihzdmcpIHsKCQkJY2FuLnN2ZyA9IGNhbi5ncm91cCA9IGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBzdmcpLCBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgc3ZnKS5jbGljaygpCgkJCWNhbi5jb3JlLkl0ZW1DQihjYW4ub25hY3Rpb24sIGZ1bmN0aW9uKGtleSwgY2IpIHsgc3ZnW2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuKSB9IH0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHN2ZywgbWRiLkZPUkVBQ0gsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKQoJCQkJY2FuLnBhZ2UudGFnaXMoc3ZnLkcsIGl0ZW0pICYmIGl0ZW0uVmFsdWUoaHRtbC5DTEFTUykgJiYgY2FuLm9uaW1wb3J0Ll9ncm91cChjYW4sIGl0ZW0pCgkJCX0pCgkJfSkKCX0sCglfZ3JvdXA6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciBuYW1lID0gdGFyZ2V0Lkdyb3VwcygpCgkJZnVuY3Rpb24gc2hvdyhldmVudCkgeyBjYW4uZ3JvdXAgPSB0YXJnZXQKCQkJY2FuLmNvcmUuTGlzdChbaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24oa2V5KSB7CgkJCQljYW4uQWN0aW9uKGtleSwgdGFyZ2V0LlZhbHVlKGtleSl8fGNhbi5BY3Rpb24oa2V5KSkKCQkJfSkKCQl9CgkJcmV0dXJuIChuYW1lIHx8IHRhcmdldCA9PSBjYW4uc3ZnKSAmJiBjYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuYW1lOiBuYW1lfHxodG1sLlNWR30sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXNob3coZXZlbnQpLCBjYW4ub25hY3Rpb24uc2hvdyhldmVudCwgY2FuKSwgY2FuLlN0YXR1cyhzdmcuR1JPVVAsIG5hbWV8fGh0bWwuU1ZHKQoJCX0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBjYW4ub25hY3Rpb24ubWVudV9saXN0KQoJCX0sIGNhbi51aS5wcm9qZWN0KQoJfSwKCV9ibG9jazogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl0YXJnZXQub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXZhciBjYXJ0ZSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgbnVsbCwgZnVuY3Rpb24oZXYsIGJ1dHRvbiwgbWV0YSkgewoJCQkJbWV0YVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbikKCQkJfSk7IGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FydGUuX3RhcmdldCwge2xlZnQ6IGV2ZW50LmNsaWVudFgsIHRvcDogZXZlbnQuY2xpZW50WX0pCgkJfQoJCXRhcmdldC5WYWwgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCXJldHVybiBwYXJzZUludCh0YXJnZXQuVmFsdWUoa2V5LCB2YWx1ZSA9PSB1bmRlZmluZWQ/IHZhbHVlOiBwYXJzZUludCh2YWx1ZSl8fDApKXx8MAoJCX0KCQl0YXJnZXQuVmFsdWUgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChrZXkpKSB7IHJldHVybiB9CgkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGNhbi5jb3JlLkl0ZW0oa2V5LCB0YXJnZXQuVmFsdWUpOyByZXR1cm4gfQoKCQkJdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCQlrZXkgPSBmaWd1cmUgJiYgZmlndXJlLmRhdGEgJiYgZmlndXJlLmRhdGEuc2l6ZSAmJiBmaWd1cmUuZGF0YS5zaXplW2tleV0gfHwga2V5CgkJCWlmIChmaWd1cmUgJiYgZmlndXJlLmRhdGEgJiYgY2FuLmJhc2UuaXNGdW5jKGZpZ3VyZS5kYXRhW2tleV0pKSB7CgkJCQlyZXR1cm4gZmlndXJlLmRhdGFba2V5XShjYW4sIHZhbHVlLCBrZXksIHRhcmdldCkKCQkJfQoKCQkJaWYgKGtleSA9PSBodG1sLklOTkVSKSB7CgkJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmICh0YXJnZXQuaW5uZXJIVE1MID0gdmFsdWUpLCB0YXJnZXQuaW5uZXJIVE1MCgkJCX0KCQkJaWYgKGtleSA9PSBpY2UuU0hJUCkgewoJCQkJcmV0dXJuIHZhbHVlICE9IHVuZGVmaW5lZCAmJiB0YXJnZXQuc2V0QXR0cmlidXRlKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKSwgY2FuLmJhc2UuT2JqKHRhcmdldC5nZXRBdHRyaWJ1dGUoa2V5KSwgW10pCgkJCX0KCQkJcmV0dXJuIHZhbHVlICE9IHVuZGVmaW5lZCAmJiB0YXJnZXQuc2V0QXR0cmlidXRlKGtleSwgdmFsdWUpLCB0YXJnZXQuZ2V0QXR0cmlidXRlKGtleXx8aHRtbC5DTEFTUykKCQkJCXx8IHRhcmdldFtrZXldJiZ0YXJnZXRba2V5XS5iYXNlVmFsJiZ0YXJnZXRba2V5XS5iYXNlVmFsLnZhbHVlIHx8IHRhcmdldFtrZXldJiZ0YXJnZXRba2V5XS5iYXNlVmFsIHx8ICIiCgkJfQoJCXRhcmdldC5Hcm91cCA9IGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IHRhcmdldAoJCQl3aGlsZSAoaXRlbSkgeyBpZiAoW2h0bWwuU1ZHLCBzdmcuR10uaW5kZXhPZihpdGVtLnRhZ05hbWUpID4gLTEpIHsgcmV0dXJuIGl0ZW0gfTsgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZSB9CgkJCXJldHVybiBjYW4uc3ZnCgkJfQoJCXRhcmdldC5Hcm91cHMgPSBmdW5jdGlvbigpIHsgdmFyIGl0ZW0gPSB0YXJnZXQKCQkJdmFyIGxpc3QgPSBbXTsgd2hpbGUgKGl0ZW0gJiYgaXRlbS50YWdOYW1lICE9IGh0bWwuU1ZHKSB7CgkJCQlpdGVtLnRhZ05hbWUgPT0gc3ZnLkcgJiYgaXRlbS5WYWx1ZShodG1sLkNMQVNTKSAmJiBsaXN0LnB1c2goaXRlbS5WYWx1ZShodG1sLkNMQVNTKSksIGl0ZW0gPSBpdGVtLnBhcmVudE5vZGUKCQkJfQoJCQlyZXR1cm4gbGlzdC5yZXZlcnNlKCkuam9pbihpY2UuUFQpCgkJfQoJCXJldHVybiB0YXJnZXQKCX0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGxpc3QpIHsgY2FuLk9wdGlvbihzdmcuUElELCBjYW4ub25maWd1cmUuX3BpZChjYW4sIHRhcmdldCkpCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpIH0sIGNhbi51aS5wcm9maWxlKSkgeyByZXR1cm4gfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkucHJvZmlsZSwgW2h0bWwuQUNUSU9OLCBodG1sLk9VVFBVVF0pCgkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4ub25kZXRhaWwubGlzdCwgdWkuYWN0aW9uLCB7X2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJCWNhbi5vbmRldGFpbFtidXR0b25dKHt0YXJnZXQ6IHRhcmdldH0sIGNhbiwgYnV0dG9uKQoJCX19KQoKCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJbGlzdCA9IChsaXN0fHxbXSkuY29uY2F0KGZpZ3VyZS5kYXRhLmNvcHksIFtzdmcuWCwgc3ZnLlksIG1kYi5JTkRFWCwgY3R4LkFSR1NdKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm91dHB1dCwgW3t0eXBlOiBodG1sLlRBQkxFLCBjbGFzc05hbWU6IGh0bWwuQ09OVEVOVCwgbGlzdDogWwoJCQl7dGg6IFttZGIuS0VZLCBtZGIuVkFMVUVdfSwge3RkOiBbbWRiLlRZUEUsIHRhcmdldC50YWdOYW1lXX0sIHt0ZDogW3N2Zy5QSUQsIHRhcmdldC5WYWx1ZShzdmcuUElEKV19LAoJCV0uY29uY2F0KGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCXJldHVybiBrZXkgPSBmaWd1cmUuZGF0YS5zaXplW2tleV18fGtleSwge3RkOiBba2V5LCB0YXJnZXQuVmFsdWUoa2V5KV0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25tb3Rpb24ubW9kaWZ5KGNhbiwgZXZlbnQudGFyZ2V0LCBmdW5jdGlvbihldmVudCwgdmFsdWUsIG9sZCkgewoJCQkJCXRhcmdldC5WYWx1ZShrZXksIHZhbHVlKSwgY2FuLm9uZmlndXJlLl9tb3ZlKGNhbiwgdGFyZ2V0KQoJCQkJfSkKCQkJfX0KCQl9KSkgfV0pCgl9LAoJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUsIGdyb3VwKSB7IC8vIHtzaGFwZSwgcG9pbnQsIHN0eWxlLCBfaW5pdH0KCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlW3ZhbHVlLnNoYXBlXSwgZGF0YSA9IGZpZ3VyZS5kcmF3KGV2ZW50LCBjYW4sIHZhbHVlLnBvaW50LCB2YWx1ZS5zdHlsZSkKCQljYW4uY29yZS5JdGVtKHZhbHVlLnN0eWxlLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGRhdGFba2V5XSA9IHZhbHVlIH0pCgkJdmFyIGl0ZW0gPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBmaWd1cmUuZGF0YS5uYW1lfHx2YWx1ZS5zaGFwZSwgZGF0YSwgZ3JvdXB8fGNhbi5zdmd8fGNhbi5ncm91cCkKCQljYW4uY29yZS5JdGVtQ0IodmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgaXRlbVtrZXldID0gY2IgfSkKCQkvLyByZXR1cm4gY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pLCBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pLCB2YWx1ZS5faW5pdCAmJiB2YWx1ZS5faW5pdChpdGVtKSwgaXRlbQoJCXJldHVybiBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSksIHZhbHVlLl9pbml0ICYmIHZhbHVlLl9pbml0KGl0ZW0pLCBpdGVtCgl9LAoJZ3JvdXA6IGZ1bmN0aW9uKGNhbiwgbmFtZSwgdmFsdWUsIGdyb3VwKSB7IGdyb3VwID0gZ3JvdXB8fGNhbi5zdmd8fGNhbi5ncm91cAoJCXZhciBnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsIHN2Zy5HKTsgZ3JvdXAuYXBwZW5kKGcpCgkJY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGcpLCBnLlZhbHVlKGh0bWwuQ0xBU1MsIG5hbWUpLCBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgZykuY2xpY2soKQoJCXJldHVybiB2YWx1ZSAmJiBnLlZhbHVlKHZhbHVlKSwgZwoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAoJX2dldDogZnVuY3Rpb24oY2FuLCBpdGVtLCBuYW1lKSB7CgkJcmV0dXJuIGNhbi5vbmZpZ3VyZVtuYW1lXXx8Y2FuLm9uZmlndXJlW2l0ZW0uZ2V0QXR0cmlidXRlKG1kYi5OQU1FKV18fGNhbi5vbmZpZ3VyZVtpdGVtLnRhZ05hbWVdCgl9LAoJX3BpZDogZnVuY3Rpb24oY2FuLCBpdGVtKSB7IGlmIChpdGVtLlZhbHVlKHN2Zy5QSUQpKSB7IHJldHVybiBpdGVtLlZhbHVlKHN2Zy5QSUQpIH0KCQl2YXIgcGlkID0gInAiK2Nhbi5zdmcuVmFsKG1kYi5DT1VOVCwgY2FuLnN2Zy5WYWwobWRiLkNPVU5UKSsxKQoJCWl0ZW0uVmFsdWUoaHRtbC5DTEFTUywgKGl0ZW0uVmFsdWUoaHRtbC5DTEFTUykraWNlLlNQK2l0ZW0uVmFsdWUoc3ZnLlBJRCwgcGlkKSkudHJpbSgpKQoJCXJldHVybiBwaWQKCX0sCglfcHVzaDogZnVuY3Rpb24oY2FuLCB0eXBlLCBkYXRhLCB0YXJnZXQpIHsKCQl2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLCB0eXBlKQoJCXRhcmdldC5hcHBlbmRDaGlsZChjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSkpLCBpdGVtLlZhbHVlKGRhdGEpCgkJcmV0dXJuIGl0ZW0KCX0sCglfY29weTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJdmFyIGRhdGEgPSB7fSwgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpLCBzaXplID0gZmlndXJlLmRhdGEuc2l6ZQoJCWNhbi5jb3JlLkxpc3QoZmlndXJlLmRhdGEuY29weSwgZnVuY3Rpb24oaXRlbSkgeyBkYXRhW2l0ZW1dID0gdGFyZ2V0LlZhbHVlKGl0ZW0pIH0pCgkJZGF0YVtzaXplLnh8fHN2Zy5YXSA9IHRhcmdldC5WYWwoc2l6ZS54fHxzdmcuWCkrMTAKCQlkYXRhW3NpemUueXx8c3ZnLlldID0gdGFyZ2V0LlZhbChzaXplLnl8fHN2Zy5ZKSsxMAoJCXJldHVybiBjYW4ub25maWd1cmUuX3B1c2goY2FuLCB0YXJnZXQudGFnTmFtZSwgZGF0YSwgY2FuLmdyb3VwfHxjYW4uc3ZnKQoJfSwKCV9tb3ZlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbGlzdCkgewoJCWNhbi5jb3JlLkxpc3QobGlzdHx8dGFyZ2V0LlZhbHVlKGljZS5TSElQKSwgZnVuY3Rpb24oc2hpcCkgewoJCQlzaGlwLnRhcmdldCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtzaGlwLnBpZClbMF0KCQkJdmFyIHAgPSBjYW4ub25leHBvcnQuYW5jaG9yKHRhcmdldCwgc2hpcC5hbmNob3IsIHt9KSAKCQkJaWYgKHNoaXAud2hpY2ggPT0gMSkgewoJCQkJc2hpcC50YXJnZXQuVmFsKHN2Zy5YMSwgcC54KSwgc2hpcC50YXJnZXQuVmFsKHN2Zy5ZMSwgcC55KQoJCQl9IGVsc2UgaWYgKHNoaXAud2hpY2ggPT0gMikgewoJCQkJc2hpcC50YXJnZXQuVmFsKHN2Zy5YMiwgcC54KSwgc2hpcC50YXJnZXQuVmFsKHN2Zy5ZMiwgcC55KQoJCQl9CgkJfSkKCX0sCgoJc3ZnOiB7IC8vIDxzdmcgaGVpZ2h0PSIyMDAiIHdpZHRoPSI2MDAiIGNvdW50PSIwIiBncmlkPSIxMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9InllbGxvdyIgZmlsbD0icHVycGxlIiBmb250LXNpemU9IjI0Ii8+CgkJZGF0YToge3NpemU6IHt9LCBjb3B5OiBbXX0sCgkJc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyByZXR1cm4gY2FuLm9uZXhwb3J0Ll9zaXplKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCX0sCgl0ZXh0OiB7IC8vIDx0ZXh0IHg9IjYwIiB5PSIxMCI+aGk8dGV4dD4KCQlkYXRhOiB7cG9pbnRzOiAxLCBzaXplOiB7fSwgY29weTogW2h0bWwuSU5ORVJdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDEgfHwgZXZlbnQudHlwZSA9PSAibW91c2Vtb3ZlIikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgdGV4dCA9IHN0eWxlJiZzdHlsZS5pbm5lcnx8Y2FuLnVzZXIucHJvbXB0KG1kYi5URVhUKQoJCQlyZXR1cm4gdGV4dD8ge3g6IHAwLngsIHk6IHAwLnksIGlubmVyOiB0ZXh0fTogbnVsbAoJCX0sCgkJc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyByZXR1cm4gY2FuLm9uZXhwb3J0Ll9wb3NpdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB9Cgl9LAoJY2lyY2xlOiB7IC8vIDxjaXJjbGUgcj0iMjAiIGN4PSIyNSIgY3k9Ijc1Ii8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge2hlaWdodDogc3ZnLlIsIHdpZHRoOiBzdmcuUiwgeDogc3ZnLkNYLCB5OiBzdmcuQ1l9LCBjb3B5OiBbc3ZnLlJdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgcDEgPSBwb2ludFsxXQoJCQlyZXR1cm4ge3I6IHBhcnNlSW50KE1hdGguc3FydChNYXRoLnBvdyhwMC54LXAxLngsIDIpK01hdGgucG93KHAwLnktcDEueSwgMikpKSwgY3g6IHAwLngsIGN5OiBwMC55fQoJCX0sCgl9LAoJZWxsaXBzZTogeyAvLyA8ZWxsaXBzZSByeT0iNSIgcng9IjIwIiBjeD0iNzUiIGN5PSI3NSIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHNpemU6IHtoZWlnaHQ6IHN2Zy5SWSwgd2lkdGg6IHN2Zy5SWCwgeDogc3ZnLkNYLCB5OiBzdmcuQ1l9LCBjb3B5OiBbc3ZnLlJZLCBzdmcuUlhdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgcDEgPSBwb2ludFsxXQoJCQlyZXR1cm4ge3J5OiBNYXRoLmFicyhwMC55IC0gcDEueSksIHJ4OiBNYXRoLmFicyhwMC54IC0gcDEueCksIGN4OiBwMC54LCBjeTogcDAueX0KCQl9LAoJfSwKCXJlY3Q6IHsgLy8gPHJlY3QgaGVpZ2h0PSIzMCIgd2lkdGg9IjMwIiByeT0iMTAiIHJ4PSIxMCIgeD0iNjAiIHk9IjEwIi8+CgkJZGF0YToge3BvaW50czogMiwgcnk6IDQsIHJ4OiA0LCBzaXplOiB7fSwgY29weTogW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7CgkJCQloZWlnaHQ6IE1hdGguYWJzKHAwLnktcDEueSksIHdpZHRoOiBNYXRoLmFicyhwMC54LXAxLngpLCByeTogdGhpcy5kYXRhLnJ5LCByeDogdGhpcy5kYXRhLnJ4LAoJCQkJeDogcDAueCA+IHAxLng/IHAxLng6IHAwLngsIHk6IHAwLnkgPiBwMS55PyBwMS55OiBwMC55LAoJCQl9CgkJfSwKCQl0ZXh0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgeyByZXR1cm4gZGF0YS54ID0gdGFyZ2V0LlZhbChzdmcuWCkrdGFyZ2V0LlZhbChodG1sLldJRFRIKS8yLCBkYXRhLnkgPSB0YXJnZXQuVmFsKHN2Zy5ZKSt0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKS8yLCBkYXRhIH0sCgl9LAoJbGluZTogeyAvLyA8bGluZSB4MT0iMTAiIHkxPSI1MCIgeDI9IjExMCIgeTI9IjE1MCIgeHg9IjEwMCIgeXk9IjEwMCIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHNpemU6IHt4OiBzdmcuWDEsIHk6IHN2Zy5ZMX0sIGNvcHk6IFtzdmcuWDEsIHN2Zy5ZMSwgc3ZnLlgyLCBzdmcuWTJdfSwKCQlncmlkOiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgeyByZXR1cm4gfQoJCQl2YXIgcCA9IHBvaW50W3BvaW50Lmxlbmd0aC0xXSwgcG9zID0gY2FuLm9uZXhwb3J0LmN1cnNvcihldmVudCwgY2FuLCB0YXJnZXQpCgkJCXRhcmdldC5WYWwgJiYgY2FuLm9uZXhwb3J0LmFuY2hvcih0YXJnZXQsIHBvcywgcCkKCQkJcmV0dXJuIHAudGFyZ2V0ID0gdGFyZ2V0LCBwLmFuY2hvciA9IHBvcywgcG9pbnQKCQl9LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdLCBzaGlwID0gW10KCQkJcDAudGFyZ2V0ICYmIHAwLnRhcmdldC5WYWx1ZSAmJiBzaGlwLnB1c2goe3BpZDogcDAudGFyZ2V0LlZhbHVlKHN2Zy5QSUQpfSkKCQkJcDEudGFyZ2V0ICYmIHAxLnRhcmdldC5WYWx1ZSAmJiBzaGlwLnB1c2goe3BpZDogcDEudGFyZ2V0LlZhbHVlKHN2Zy5QSUQpfSkKCQkJcmV0dXJuIHt4MTogcDAueCwgeTE6IHAwLnksIHgyOiBwMS54LCB5MjogcDEueSwgc2hpcDogc2hpcC5sZW5ndGggPiAwPyBzaGlwOiB1bmRlZmluZWR9CgkJfSwKCQl0ZXh0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZGF0YSkgeyByZXR1cm4gZGF0YS54ID0gKHRhcmdldC5WYWwoc3ZnLlgxKSt0YXJnZXQuVmFsKHN2Zy5YMikpLzIsIGRhdGEueSA9ICh0YXJnZXQuVmFsKHN2Zy5ZMSkrdGFyZ2V0LlZhbChzdmcuWTIpKS8yLCBkYXRhIH0sCgkJc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyByZXR1cm4gIjwoIisodGFyZ2V0LlZhbChzdmcuWTIpLXRhcmdldC5WYWwoc3ZnLlkxKSkraWNlLkZTKyh0YXJnZXQuVmFsKHN2Zy5YMiktdGFyZ2V0LlZhbChzdmcuWDEpKSsiKSIrY2FuLm9uZXhwb3J0Ll9wb3NpdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB9LAoJfSwKCWJsb2NrOiB7IC8vIDxyZWN0IGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgcnk9IjEwIiByeD0iMTAiIHg9IjYwIiB5PSIxMCIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHJ5OiA0LCByeDogNCwgc2l6ZToge30sIGNvcHk6IFtodG1sLkhFSUdIVCwgaHRtbC5XSURUSCwgc3ZnLlJZLCBzdmcuUlhdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl0aGlzLl90ZW1wICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHRoaXMuX3RlbXApICYmIGRlbGV0ZSh0aGlzLl90ZW1wKQoJCQl0aGlzLl90ZW1wID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgc3ZnLkcsIHt9LCBjYW4uZ3JvdXB8fGNhbi5zdmcpCgoJCQl2YXIgcmVjdCA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIHN2Zy5SRUNULCBjYW4ub25maWd1cmUucmVjdC5kcmF3KGV2ZW50LCBjYW4sIHBvaW50KSwgdGhpcy5fdGVtcCkKCQkJaWYgKGV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSykgewoJCQkJY2FuLm9uZmlndXJlLl9waWQoY2FuLCByZWN0KSwgZGVsZXRlKHRoaXMuX3RlbXApCgkJCX0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IGNhbi5vbmZpZ3VyZS5yZWN0LnRleHQoY2FuLCBkYXRhLCB0YXJnZXQpIH0sCgl9LAp9LCBbXSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLAoJX21vZGU6IHsKCQlub3JtYWw6IHsKCQkJZ3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAicnVuIikgfSwKCQkJZ2E6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAiYXV0byIpIH0sCgkJCWdtOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oImdvIiwgIm1hbnVhbCIpIH0sCgoJCQlhZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJtb2RlIiwgImRyYXciKSB9LAoJCQlhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJtb2RlIiwgInJlc2l6ZSIpIH0sCgoJCQlzdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLlRFWFQpIH0sCgkJCXNyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuUkVDVCkgfSwKCQkJc2w6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5MSU5FKSB9LAoJCQlzYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkNJUkNMRSkgfSwKCQkJc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5FTExJUFNFKSB9LAoKCQkJY3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLlJFRCkgfSwKCQkJY2I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkJMVUUpIH0sCgkJCWNnOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5HUkVFTikgfSwKCQkJY3k6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLllFTExPVykgfSwKCQkJY3A6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLlBVUlBMRSkgfSwKCQkJY2M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkNZQU4pIH0sCgkJCWNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5CTEFDSykgfSwKCQkJY3c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLldISVRFKSB9LAoKCQkJZnI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5SRUQpIH0sCgkJCWZiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQkxVRSkgfSwKCQkJZmc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5HUkVFTikgfSwKCQkJZnk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5ZRUxMT1cpIH0sCgkJCWZwOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuUFVSUExFKSB9LAoJCQlmYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkNZQU4pIH0sCgkJCWZoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQkxBQ0spIH0sCgkJCWZ3OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuV0hJVEUpIH0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsKCQlbaHRtbC5TVFJPS0VfV0lEVEgsIDEsIDIsIDMsIDQsIDVdLAoJCVtodG1sLlNUUk9LRSwgY2xpLlJFRCwgY2xpLllFTExPVywgY2xpLkdSRUVOLCBjbGkuQ1lBTiwgY2xpLkJMVUUsIGNsaS5QVVJQTEUsIGNsaS5CTEFDSywgY2xpLldISVRFXSwKCQlbaHRtbC5GSUxMLCBjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRSwgY2xpLkJMQUNLLCBjbGkuV0hJVEUsICIjMDAwMCJdLAoJCVtodG1sLkZPTlRfU0laRSwgMTIsIDE2LCAxOCwgMjQsIDMyXSwKCgkJWyJnbyIsIGljZS5SVU4sIGljZS5BVVRPLCAibWFudWFsIl0sCgkJWyJtb2RlIiwgImRyYXciLCAicmVzaXplIl0sCgkJW3N2Zy5TSEFQRSwgc3ZnLlRFWFQsIHN2Zy5DSVJDTEUsIHN2Zy5FTExJUFNFLCBzdmcuUkVDVCwgc3ZnLkxJTkUsIHN2Zy5CTE9DS10sCgkJW3N2Zy5HUklELCAxLCAyLCAzLCA0LCA1LCAxMCwgMjBdLAoJXSwgbWVudV9saXN0OiBbaWNlLkhJREUsIGljZS5TSE9XLCBtZGIuQ1JFQVRFLCBjbGkuQ0xFQVIsIG1kYi5SRU1PVkVdLAoJX2NoYW5nZTogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5ncm91cC5WYWx1ZShrZXksIHZhbHVlKSB9LAoJInN0cm9rZS13aWR0aCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJc3Ryb2tlOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwga2V5LCB2YWx1ZSkgfSwKCWZpbGw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJImZvbnQtc2l6ZSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoKCWdvOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSkgfSwKCW1vZGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoJc2hhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoKCWVkaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCBjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4/IGljZS5BVVRPOiBpY2UuUlVOKSB9LAoJc2F2ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2NvbnRlbnQ6IGNhbi5vbmV4cG9ydC5jb250ZW50KGNhbiwgY2FuLnN2Zyl9KSwgYnV0dG9uLCBbY2FuLk9wdGlvbihuZnMuUEFUSCldKQoJfSwKCglwcm9qZWN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCkgfSwKCXByb2ZpbGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlKSB9LAoJc2hvdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uc2hvdyhjYW4sIHtpbnRlcnZhbDogMTAwLCBsZW5ndGg6IDEwfSwgbnVsbCwgY2FuLmdyb3VwKSB9LAoJaGlkZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uaGlkZShjYW4sIHtpbnRlcnZhbDogMTAwLCBsZW5ndGg6IDEwfSwgbnVsbCwgY2FuLmdyb3VwKSB9LAoJY3JlYXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3N2Zy5HUk9VUF0sIGZ1bmN0aW9uKGxpc3QpIHsgdmFyIG5hbWUgPSBsaXN0WzBdCgkJCXZhciBncm91cCA9IGNhbi5vbmltcG9ydC5ncm91cChjYW4sIG5hbWUpCgkJCWNhbi5jb3JlLkxpc3QoW2h0bWwuU1RST0tFX1dJRFRILCBodG1sLlNUUk9LRSwgaHRtbC5GSUxMLCBodG1sLkZPTlRfU0laRV0sIGZ1bmN0aW9uKG5hbWUpIHsKCQkJCWdyb3VwLlZhbHVlKG5hbWUsIGNhbi5BY3Rpb24obmFtZSkpCgkJCX0pCgkJfSkKCX0sCglyZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi5ncm91cCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLmdyb3VwKQoJfSwKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLmdyb3VwKSwgY2FuLnBvaW50ID0gW10sIGRlbGV0ZShjYW4udGVtcCkKCX0sCgoJX21vZGU6IHsKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewoJCQl2YXIgc2hhcGUgPSBjYW4uQWN0aW9uKHN2Zy5TSEFQRSksIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZVtzaGFwZV0KCQkJZmlndXJlLmdyaWQgJiYgZmlndXJlLmdyaWQoZXZlbnQsIGNhbiwgcG9pbnQpCgoJCQl2YXIgZGF0YSA9IGZpZ3VyZS5kcmF3ICYmIGZpZ3VyZS5kcmF3KGV2ZW50LCBjYW4sIHBvaW50KQoJCQl2YXIgaXRlbSA9IGRhdGEgJiYgY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgZmlndXJlLmRhdGEubmFtZXx8c2hhcGUsIGRhdGEsIGNhbi5ncm91cHx8Y2FuLnN2ZykKCQkJZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLICYmIHBvaW50Lmxlbmd0aCA9PT0gZmlndXJlLmRhdGEucG9pbnRzICYmIChjYW4ucG9pbnQgPSBbXSkgCgoJCQlpZiAoZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLICYmIGl0ZW0pIHsKCQkJCXZhciBwaWQgPSBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pOyBjYW4uY29yZS5MaXN0KHBvaW50LCBmdW5jdGlvbihwLCBpKSB7IGlmICghcC50YXJnZXQpIHsgcmV0dXJuIH0KCQkJCQlwLnRhcmdldC5WYWx1ZShpY2UuU0hJUCwgcC50YXJnZXQuVmFsdWUoaWNlLlNISVApLmNvbmNhdChbe3BpZDogcGlkLCB3aGljaDogaSsxLCBhbmNob3I6IHAuYW5jaG9yfV0pKQoJCQkJfSkKCQkJfQoJCQlyZXR1cm4gaXRlbQoJCX0sCgkJcmVzaXplOiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8ZXZlbnQudGFyZ2V0CgkJCWlmIChldmVudC50eXBlID09IGh0bWwuQ0xJQ0spIHsKCQkJCWlmIChwb2ludC5sZW5ndGggPT0gMSkgewoJCQkJCWNhbi5jdXJyZW50ID0ge3RhcmdldDogdGFyZ2V0LCBiZWdpbjogY2FuLmNvcmUuTGlzdChbdGFyZ2V0XSwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLnBhZ2UudGFnaXMoc3ZnLkcsIGl0ZW0pKSB7IHJldHVybiB9CgkJCQkJCXJldHVybiB7CgkJCQkJCQloZWlnaHQ6IGl0ZW0uVmFsKGh0bWwuSEVJR0hUKSwgd2lkdGg6IGl0ZW0uVmFsKGh0bWwuV0lEVEgpLCB4OiBpdGVtLlZhbChzdmcuWCksIHk6IGl0ZW0uVmFsKHN2Zy5ZKSwKCQkJCQkJCXRhcmdldDogaXRlbSwgc2hpcDogY2FuLmNvcmUuTGlzdChpdGVtLlZhbHVlKGljZS5TSElQKSwgZnVuY3Rpb24oc2hpcCkgewoJCQkJCQkJCXJldHVybiBzaGlwLnBpZCAmJiAoc2hpcC50YXJnZXQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrc2hpcC5waWQpWzBdKSAmJiBzaGlwCgkJCQkJCQl9KQoJCQkJCQl9CgkJCQkJfSksIHBvczogY2FuLm9uZXhwb3J0LmN1cnNvcihldmVudCwgY2FuLCB0YXJnZXQpfQoJCQkJCXJldHVybgoJCQkJfQoJCQkJcmV0dXJuIGNhbi5wb2ludCA9IFtdLCBkZWxldGUoY2FuLmN1cnJlbnQpCgkJCX0KCgkJCWNhbi5jdXJyZW50ICYmIGNhbi5jb3JlLkxpc3QoY2FuLmN1cnJlbnQuYmVnaW4sIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgaXRlbS50YXJnZXQpCgkJCQljYW4ub25leHBvcnQucmVzaXplKGV2ZW50LCBpdGVtLnRhcmdldCwgaXRlbSwgcG9pbnRbMF0sIHBvaW50WzFdLCBjYW4uY3VycmVudC5wb3MpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQraXRlbS50YXJnZXQuVmFsdWUobWRiLlRFWFQpLCBmdW5jdGlvbih0ZXh0KSB7CgkJCQkJdGV4dC5WYWx1ZShjYW4ub25leHBvcnQuX3RleHQoY2FuLCBpdGVtLnRhcmdldCwgZmlndXJlLCB7fSkpCgkJCQl9KSwgY2FuLm9uZmlndXJlLl9tb3ZlKGNhbiwgaXRlbS50YXJnZXQsIGl0ZW0uc2hpcCkKCQkJfSkKCQl9LAoJCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBldmVudC50YXJnZXQpIH0sCgl9LAoJX2F1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi5wb2ludC5sZW5ndGggPiAwKSB7IHJldHVybiB9CgkJaWYgKHRhcmdldC50YWdOYW1lID09IG1kYi5URVhUKSB7IHJldHVybiB9CgoJCXZhciBwb3MgPSBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAodGFyZ2V0ID09IGNhbi5zdmcpIHsKCQkJaWYgKHBvcyA9PSA1KSB7CgkJCQljYW4uQWN0aW9uKGljZS5NT0RFLCAiZHJhdyIpLCBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgaHRtbC5CTE9DSykKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCB7Y3Vyc29yOiAiY3Jvc3NoYWlyIn0pCgkJCX0gZWxzZSB7CgkJCQljYW4uQWN0aW9uKGljZS5NT0RFLCAicmVzaXplIikKCQkJfQoJCX0gZWxzZSB7CgkJCXN3aXRjaCAocG9zKSB7CgkJCQljYXNlIDU6CgkJCQljYXNlIDk6IGNhbi5BY3Rpb24oaWNlLk1PREUsICJyZXNpemUiKTsgYnJlYWsKCQkJCWRlZmF1bHQ6IGNhbi5BY3Rpb24oaWNlLk1PREUsICJkcmF3IiksIGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuTElORSkKCQkJfQoJCX0KCX0sCglfZmlndXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludHMsIHRhcmdldCkgewoJCWNhbi50ZW1wICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi50ZW1wKSAmJiBkZWxldGUoY2FuLnRlbXApCgkJY2FuLnRlbXAgPSBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uYWN0aW9uLl9tb2RlLCBjYW4uQWN0aW9uKGljZS5NT0RFKV0sIFtldmVudCwgY2FuLCBwb2ludHMsIHRhcmdldF0pCgkJY2FuLnBvaW50Lmxlbmd0aCA9PSAwICYmIGRlbGV0ZShjYW4udGVtcCkKCX0sCgoJb25tb3VzZW92ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZXhwb3J0Ll9zaG93KGNhbiwgZXZlbnQudGFyZ2V0KSB9LAoJb25tb3VzZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHBvaW50ID0gY2FuLm9uZXhwb3J0Ll9wb2ludChldmVudCwgY2FuKQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4pIHsgcmV0dXJuIH0KCQljYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAoY2FuLkFjdGlvbigiZ28iKSA9PSBpY2UuQVVUTykgeyBjYW4ub25hY3Rpb24uX2F1dG8oY2FuLCBldmVudC50YXJnZXQpIH0KCQljYW4ub25hY3Rpb24uX2ZpZ3VyZShldmVudCwgY2FuLCBjYW4ucG9pbnQuY29uY2F0KHBvaW50KSkKCX0sCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBwb2ludCA9IGNhbi5vbmV4cG9ydC5fcG9pbnQoZXZlbnQsIGNhbikKCQlpZiAoY2FuLkFjdGlvbigiZ28iKSA9PSBpY2UuUlVOKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkKCQkJcmV0dXJuIGV2ZW50LnNoaWZ0S2V5PyBjYW4ub25hY3Rpb24uX21vZGUucnVuKGV2ZW50LCBjYW4pOiBjYW4ub25kZXRhaWwucnVuKGV2ZW50LCBjYW4pCgkJfQoJCWNhbi5vbmFjdGlvbi5fZmlndXJlKGV2ZW50LCBjYW4sIGNhbi5wb2ludCA9IGNhbi5wb2ludC5jb25jYXQocG9pbnQpKQoJfSwKCW9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLmxhYmVsKGV2ZW50LCBjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26K+m5oOFIiwgbGlzdDogW2NsaS5TVEFSVCwgaWNlLlJVTiwgaWNlLkNPUFksIGh0bWwuTEFCRUwsIG1kYi5NT0RJRlksICJ0b2ltYWdlIiwgbWRiLlJFTU9WRV0sCglzdGFydDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdmFyIGxpc3QgPSBbdGFyZ2V0XSwgZGljdCA9IHt9CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7IHZhciBzaGlwID0gbGlzdFtpXS5WYWx1ZSgic2hpcCIpCgkJCWZvciAodmFyIGogPSAwOyBqIDwgc2hpcC5sZW5ndGg7IGorKykgeyB2YXIgcGlkID0gc2hpcFtqXS5waWQKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtwaWQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQl2YXIgcGlkID0gaXRlbS5WYWx1ZSgic2hpcCIpWzFdLnBpZAoJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtwaWQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJIWRpY3RbcGlkXSAmJiBsaXN0LnB1c2goaXRlbSksIGRpY3RbcGlkXSA9IHRydWUKCQkJCQl9KQoJCQkJfSkKCQkJfQoJCX0KCQljYW4uY29yZS5OZXh0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbm1vdGlvbi5zaG93KGNhbiwge2ludGVydmFsOiAzMDAsIGxlbmd0aDogMTB9LCBudWxsLCBpdGVtKSAKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCBpdGVtLlZhbHVlKCJpbmRleCIpKQoJCQljYW4ub25kZXRhaWwucnVuKHt0YXJnZXQ6IGl0ZW19LCBjYW4pLCBuZXh0KCkKCQl9KSB9KQoJfSwKCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJaWYgKCF0YXJnZXQuVmFsdWUoc3ZnLlBJRCkpIHsgY2FuLm9uZmlndXJlLl9waWQoY2FuLCB0YXJnZXQpIH0KCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkgfSwgY2FuLnVpLmRpc3BsYXkpKSB7IHJldHVybiB9CgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5kaXNwbGF5KSwgY2FuLnN2Zy5WYWx1ZShzdmcuUElELCB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkpCgkJdmFyIGluZGV4ID0gdGFyZ2V0LlZhbHVlKG1kYi5JTkRFWCk7IGluZGV4ICYmIGNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogY2hhdC5TVE9SWSwgaW5kZXg6IGluZGV4LCBhcmdzOiB0YXJnZXQuVmFsdWUoY3R4LkFSR1MpfSwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGluZGV4LCBjbWRzLCBjYikgfQoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hUKS00Kmh0bWwuQUNUSU9OX0hFSUdIVCksIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLl9sZWdlbmQpLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHRydWUpCgkJfSwgY2FuLnVpLmRpc3BsYXkpCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9pbWFnZShldmVudCwgY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKS5zcGxpdChpY2UuUFMpLnBvcCgpLnNwbGl0KGljZS5QVClbMF0sIGNhbi5zdmcpIH0sCgljb3B5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmZpZ3VyZS5fY29weShldmVudCwgY2FuLCBldmVudC50YXJnZXQpIH0sCglsYWJlbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdmFyIGRlZiA9IHRhcmdldC5WYWx1ZShtZGIuVEVYVCk7IGRlZiAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrZGVmLCBmdW5jdGlvbihpdGVtKSB7IGRlZiA9IGl0ZW0uVmFsdWUoaHRtbC5JTk5FUikgfSkKCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBodG1sLkxBQkVMLCB2YWx1ZTogZGVmfV0sIGZ1bmN0aW9uKGxpc3QpIHsgdmFyIHRleHQgPSBsaXN0WzBdCgkJCWlmICh0YXJnZXQudGFnTmFtZSA9PSBodG1sLlRFWFQpIHsgcmV0dXJuIHRhcmdldC5pbm5lckhUTUwgPSB0ZXh0IH0KCQkJaWYgKGRlZiAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrZGVmLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uVmFsdWUoaHRtbC5JTk5FUiwgdGV4dCkgfSkubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoKCQkJdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCQl2YXIgZGF0YSA9IGNhbi5vbmV4cG9ydC5fdGV4dChjYW4sIHRhcmdldCwgZmlndXJlLCB7aW5uZXI6IHRleHR9KQoJCQl2YXIgaXRlbSA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIGh0bWwuVEVYVCwgZGF0YSwgdGFyZ2V0Lkdyb3VwKCkpCgkJCXRhcmdldC5WYWx1ZShtZGIuVEVYVCwgY2FuLm9uZmlndXJlLl9waWQoY2FuLCBpdGVtKSkKCQl9KQoJfSwKCW1vZGlmeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBldmVudC50YXJnZXQpIH0sCglyZW1vdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QodGFyZ2V0LlZhbHVlKGljZS5TSElQKSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3ZhbHVlLnBpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJfSkKCQl9KQoJCXRhcmdldC5WYWx1ZShtZGIuVEVYVCkgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3RhcmdldC5WYWx1ZShtZGIuVEVYVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQl9KSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdGFyZ2V0KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbc3ZnLkdST1VQLCAiZmlndXJlIiwgImluZGV4IiwgInBvcyJdLAoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQlmdW5jdGlvbiBzaG93KCkgeyByZXR1cm4gY2FuLm9uZXhwb3J0Ll9zaXplKGNhbiwgdGFyZ2V0LCBmaWd1cmUpK2ljZS5TUCtjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCQljYW4uU3RhdHVzKCJmaWd1cmUiLCB0YXJnZXQudGFnTmFtZSsiOiIrdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpK2ljZS5TUCsoZmlndXJlPyAoZmlndXJlLnNob3d8fHNob3cpKGNhbiwgdGFyZ2V0LCBmaWd1cmUpOiAiIikpCgkJY2FuLlN0YXR1cyhzdmcuR1JPVVAsIHRhcmdldC5Hcm91cHMoKXx8Y2FuLmdyb3VwLkdyb3VwcygpfHxodG1sLlNWRykKCQljYW4uU3RhdHVzKCJpbmRleCIsIHRhcmdldC5WYWx1ZSgiaW5kZXgiKSkKCX0sCglfc2l6ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJcmV0dXJuICI8KCIrdGFyZ2V0LlZhbChzaXplW2h0bWwuSEVJR0hUXXx8aHRtbC5IRUlHSFQpK2ljZS5GUyt0YXJnZXQuVmFsKHNpemVbaHRtbC5XSURUSF18fGh0bWwuV0lEVEgpKyIpIgoJfSwKCV9wb3NpdGlvbjogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJcmV0dXJuICJAKCIrdGFyZ2V0LlZhbChzaXplW3N2Zy5YXXx8c3ZnLlgpK2ljZS5GUyt0YXJnZXQuVmFsKHNpemVbc3ZnLlldfHxzdmcuWSkrIikiCgl9LAoJX3RleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUsIGRhdGEpIHsgdmFyIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplfHx7fQoJCWlmIChmaWd1cmUudGV4dCkgeyByZXR1cm4gZmlndXJlLnRleHQoY2FuLCBkYXRhLCB0YXJnZXQpIH0KCQlyZXR1cm4gZGF0YS54ID0gdGFyZ2V0LlZhbChzaXplW3N2Zy5YXXx8c3ZnLlgpLCBkYXRhLnkgPSB0YXJnZXQuVmFsKHNpemVbc3ZnLlldfHxzdmcuWSksIGRhdGEKCX0sCglfcG9pbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgcCA9IGNhbi5zdmcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKCQl2YXIgcG9pbnQgPSB7eDogZXZlbnQuY2xpZW50WC1wLngsIHk6IGV2ZW50LmNsaWVudFktcC55fQoJCXBvaW50LnggPSBwb2ludC54IC0gcG9pbnQueCAlIHBhcnNlSW50KGNhbi5BY3Rpb24oc3ZnLkdSSUQpKQoJCXBvaW50LnkgPSBwb2ludC55IC0gcG9pbnQueSAlIHBhcnNlSW50KGNhbi5BY3Rpb24oc3ZnLkdSSUQpKQoJCXJldHVybiBjYW4uU3RhdHVzKCJwb3MiLCBwb2ludC54K2ljZS5GUytwb2ludC55KSwgcG9pbnQKCX0sCgljb250ZW50OiBmdW5jdGlvbihjYW4sIHN2ZykgewoJCXJldHVybiBbJzxzdmcgdmVydGlvbj0iMS4xIiB4bWxucz0iaHR0cHM6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiddLmNvbmNhdCgKCQkJc3ZnPyBjYW4uY29yZS5MaXN0KFtodG1sLkhFSUdIVCwgaHRtbC5XSURUSCwgbWRiLkNPVU5ULCBzdmcuUElELCBzdmcuR1JJRCwgaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJcmV0dXJuIHN2Zy5WYWx1ZShpdGVtKT8gaWNlLlNQICsgaXRlbSArICc9IicgKyBzdmcuVmFsdWUoaXRlbSkgKyAnIic6ICIiCgkJCX0pOiBbIiBoZWlnaHQ9IisoKGNhbi5Db25mSGVpZ2h0KCl8fDQ1MCktNTApKyIgd2lkdGg9IisoY2FuLkNvbmZXaWR0aCgpfHw2MDApXSkuY29uY2F0KFsnPicsIHN2Zz8gc3ZnLmlubmVySFRNTDogIiIsICI8L3N2Zz4iXSkuam9pbigiIikKCX0sCgoJY3Vyc29yOiBmdW5jdGlvbihldmVudCwgY2FuLCBpdGVtLCBzaG93KSB7CgkJdmFyIHAgPSBpdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJdmFyIHEgPSB7eDogZXZlbnQuY2xpZW50WCwgeTogZXZlbnQuY2xpZW50WX0KCgkJdmFyIHBvcyA9IDUsIG1hcmdpbiA9IDIwCgkJdmFyIHkgPSAocS55LXAueSkvcC5oZWlnaHQKCQlpZiAoeSA8IDAuMiAmJiBxLnktcC55IDwgbWFyZ2luKSB7CgkJCXBvcyAtPSAzCgkJfSBlbHNlIGlmICh5ID4gMC44ICYmIHEueS1wLnktcC5oZWlnaHQgPiAtbWFyZ2luKSB7CgkJCXBvcyArPSAzCgkJfQoJCXZhciB4ID0gKHEueC1wLngpL3Aud2lkdGgKCQlpZiAoeCA8IDAuMiAmJiBxLngtcC54IDwgbWFyZ2luKSB7CgkJCXBvcyAtPSAxCgkJfSBlbHNlIGlmICh4ID4gMC44ICYmIHEueC1wLngtIHAud2lkdGggPiAtbWFyZ2luKSB7CgkJCXBvcyArPSAxCgkJfQoKCQlyZXR1cm4gKHNob3d8fGNhbi5zdmcpLnN0eWxlLmN1cnNvciA9IFsKCQkJIm53LXJlc2l6ZSIsICJuLXJlc2l6ZSIsICJuZS1yZXNpemUiLAoJCQkidy1yZXNpemUiLCAibW92ZSIsICJlLXJlc2l6ZSIsCgkJCSJzdy1yZXNpemUiLCAicy1yZXNpemUiLCAic2UtcmVzaXplIiwKCQldW3Bvcy0xXSwgcG9zCgl9LAoJYW5jaG9yOiBmdW5jdGlvbih0YXJnZXQsIHBvcywgcG9pbnQpIHsKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDE6CgkJCWNhc2UgMjoKCQkJY2FzZSAzOgoJCQkJcG9pbnQueSA9IHRhcmdldC5WYWwoc3ZnLlkpCgkJCQlicmVhawoJCQljYXNlIDQ6CgkJCWNhc2UgNToKCQkJY2FzZSA2OgoJCQkJcG9pbnQueSA9IHRhcmdldC5WYWwoc3ZnLlkpICsgdGFyZ2V0LlZhbChodG1sLkhFSUdIVCkgLyAyCgkJCQlicmVhawoJCQljYXNlIDc6CgkJCWNhc2UgODoKCQkJY2FzZSA5OgoJCQkJcG9pbnQueSA9IHRhcmdldC5WYWwoc3ZnLlkpICsgdGFyZ2V0LlZhbChodG1sLkhFSUdIVCkKCQkJCWJyZWFrCgkJfQoKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDE6CgkJCWNhc2UgNDoKCQkJY2FzZSA3OgoJCQkJcG9pbnQueCA9IHRhcmdldC5WYWwoc3ZnLlgpCgkJCQlicmVhawoJCQljYXNlIDI6CgkJCWNhc2UgNToKCQkJY2FzZSA4OgoJCQkJcG9pbnQueCA9IHRhcmdldC5WYWwoc3ZnLlgpICsgdGFyZ2V0LlZhbChodG1sLldJRFRIKSAvIDIKCQkJCWJyZWFrCgkJCWNhc2UgMzoKCQkJY2FzZSA2OgoJCQljYXNlIDk6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkgKyB0YXJnZXQuVmFsKGh0bWwuV0lEVEgpCgkJCQlicmVhawoJCX0KCQlyZXR1cm4gcG9pbnQKCX0sCglyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBiZWdpbiwgcDAsIHAxLCBwb3MpIHsKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDU6CgkJCQlpdGVtLlZhbHVlKHN2Zy5YLCBiZWdpbi54ICsgcDEueCAtIHAwLngpCgkJCQlpdGVtLlZhbHVlKHN2Zy5ZLCBiZWdpbi55ICsgcDEueSAtIHAwLnkpCgkJCQlyZXR1cm4KCQl9CgoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSAyOgoJCQljYXNlIDM6CgkJCQlpdGVtLlZhbHVlKHN2Zy5ZLCBiZWdpbi55ICsgcDEueSAtIHAwLnkpCgkJCQlpdGVtLlZhbHVlKGh0bWwuSEVJR0hULCBiZWdpbi5oZWlnaHQgLSBwMS55ICsgcDAueSkKCQkJCWJyZWFrCgkJfQoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSA0OgoJCQljYXNlIDc6CgkJCQlpdGVtLlZhbHVlKHN2ZS5YLCBiZWdpbi54ICsgcDEueCAtIHAwLngpCgkJCQlpdGVtLlZhbHVlKGh0bWwuV0lEVEgsIGJlZ2luLndpZHRoIC0gcDEueCArIHAwLngpCgkJCQlicmVhawoJCX0KCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDM6CgkJCWNhc2UgNjoKCQkJY2FzZSA5OgoJCQkJaXRlbS5WYWx1ZShodG1sLldJRFRILCBiZWdpbi53aWR0aCArIHAxLnggLSBwMC54KQoJCQkJYnJlYWsKCQl9CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSA3OgoJCQljYXNlIDg6CgkJCWNhc2UgOToKCQkJCWl0ZW0uVmFsdWUoaHRtbC5IRUlHSFQsIGJlZ2luLmhlaWdodCArIHAxLnkgLSBwMC55KQoJCQkJYnJlYWsKCQl9Cgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L2RyYXcuanMiCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvaGVhcnQuanMiClZvbGNhbm9zKCJoZWFydCIsIHtoZWxwOiAi5b+D5b2iIiwKICAgIGRhdGE6IHtuYW1lOiAicGF0aCIsIHNpemU6IHt9LAogICAgICAgIGNvcHk6IFsiZCIsICJuYW1lIiwgIm1ldGEiLCAidHQiLCAieHgiLCAieXkiXSwKICAgICAgICB4OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIHR0ID0gSlNPTi5wYXJzZSh0YXJnZXQuVmFsdWUoInR0Iil8fCd7InR4IjowLCAidHkiOjB9JykKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdHQudHggPSB2YWx1ZS10YXJnZXQuVmFsKCJ4eCIpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInR0IiwgSlNPTi5zdHJpbmdpZnkodHQpKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0LlZhbCgieHgiKSt0dC50eAogICAgICAgIH0sCiAgICAgICAgeTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgIHZhciB0dCA9IEpTT04ucGFyc2UodGFyZ2V0LlZhbHVlKCJ0dCIpfHwneyJ0eCI6MCwgInR5IjowfScpCiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0dCIsIEpTT04uc3RyaW5naWZ5KHR0KSkKICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiK3R0LnR4KyIsIit0dC50eSsiKSIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5WYWwoInl5IikrdHQudHkKICAgICAgICB9LAogICAgfSwgLy8gPGhlYXJ0IGN4PSIyNSIgY3k9Ijc1IiByPSIyMCIvPgogICAgZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHtyZXR1cm59CgogICAgICAgIHZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdLCBwMiA9IHBvaW50WzJdOwogICAgICAgIHBsID0ge3g6IDIqcDAueCAtIHAxLngsIHk6MipwMC55LXAxLnl9CiAgICAgICAgdmFyIHIwID0gTWF0aC5zcXJ0KE1hdGgucG93KHAwLnggLSBwMS54LCAyKSwgTWF0aC5wb3cocDAueSAtIHAxLnksIDIpKSAvIDIKICAgICAgICB2YXIgZCA9IFsKICAgICAgICAgICAgICAgICJNIiwgcGwueCwgcGwueSwKICAgICAgICAgICAgICAgICJBIiwgcjAsIHIwLCAwLCAwLCAwLCBwMC54LCBwMC55LAogICAgICAgICAgICAgICAgIkEiLCByMCwgcjAsIDAsIDAsIDAsIHAxLngsIHAxLnksCiAgICAgICAgICAgIF0KCiAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAzKSB7CiAgICAgICAgICAgIHZhciByMSA9IE1hdGguc3FydChNYXRoLnBvdyhwMi54IC0gcDEueCwgMiksIE1hdGgucG93KHAyLnkgLSBwMS55LCAyKSkKICAgICAgICAgICAgZCA9IGQuY29uY2F0KFsKICAgICAgICAgICAgICAgICJBIiwgcjEsIHIxLCAxODAsIDAsIDAsIHAyLngsIHAyLnksCiAgICAgICAgICAgICAgICAiQSIsIHIxLCByMSwgMTgwLCAwLCAwLCBwbC54LCBwbC55LAogICAgICAgICAgICBdKQogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6ICJoZWFydCIsIGQ6IGQuam9pbigiICIpLAogICAgICAgICAgICBtZXRhOiBKU09OLnN0cmluZ2lmeShwb2ludCksCiAgICAgICAgICAgIHR0OiBKU09OLnN0cmluZ2lmeSh7dHg6IDAsIHR5OiAwfSksCiAgICAgICAgICAgIHh4OiBwMC54LCB5eTpwMS55LAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGV2ZW50LnR5cGUgPT0gImNsaWNrIiAmJiBwb2ludC5sZW5ndGggPT0gMyAmJiAoY2FuLnBvaW50ID0gW10pLCBkYXRhCiAgICB9LAogICAgdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKICAgICAgICBkYXRhLnggPSB0YXJnZXQuVmFsKCJjeCIpCiAgICAgICAgZGF0YS55ID0gdGFyZ2V0LlZhbCgiY3kiKQogICAgICAgIHJldHVybiBkYXRhCiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKICAgICAgICByZXR1cm4gImhlYXJ0ICIgKyB0YXJnZXQuVmFsdWUoInR0IikKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyIKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAogICAgcGF0aDJ2OiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54LCBwMC55KyhwMS55LXAwLnkpLzNdLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDJoOiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54KyhwMS54LXAwLngpLzMsIHAwLnldLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDogeyAvLyA8cGF0aCBkPSJNMTAgMTAgSCA5MCBWIDkwIEggMTAgWiIvPgogICAgICAgIGRhdGE6IHtzaXplOiB7fSwgY29weTogWyJkIiwgInR0IiwgInh4IiwgInl5Il0sCiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR4ID0gdmFsdWUtdGFyZ2V0LlZhbCgieHgiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ5eSIpK3R0LnR5CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsKICAgICAgICAgICAgaWYgKHN0eWxlICYmIHN0eWxlLmQpIHsgcmV0dXJuIHN0eWxlIH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7IGNhbi5fdGVtcCA9IHt9IH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCiAgICAgICAgICAgIGlmIChjYW4ua2V5cyAmJiBjYW4ua2V5cy5sZW5ndGggPiAwKSB7IHZhciBrOwogICAgICAgICAgICAgICAgayA9IGNhbi5fdGVtcFtwb2ludC5sZW5ndGgtMV0gPSBjYW4ua2V5c1swXQogICAgICAgICAgICAgICAgc3dpdGNoIChrLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjogY2FuLl90ZW1wW3BvaW50Lmxlbmd0aCsxXSA9ICIsIgogICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOiBjYW4uX3RlbXBbcG9pbnQubGVuZ3RoXSA9ICIsIjsgYnJlYWsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FuLmtleXMgPSBjYW4ua2V5cy5zbGljZSgxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2tpcCA9IDAKICAgICAgICAgICAgdmFyIGVuZCA9IGZhbHNlCiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZDogY2FuLmNvcmUuTGlzdChwb2ludCwgZnVuY3Rpb24ocCwgaSkgeyB2YXIgayA9IHAuawogICAgICAgICAgICAgICAgICAgIGlmIChpIDwgc2tpcCkge3JldHVybn0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiBrID0gIk0iOyBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBrID0gY2FuLl90ZW1wW2ldIHx8IHAuayB8fCAiTCI7IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgIGsgPSBrLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6IHJldHVybiBjYW4ucG9pbnQgPSBbXSwgY2FuLl90ZW1wID0ge30sIGsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6IHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJNIjogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkgiOiByZXR1cm4gaysiICIgKyBwLngKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiViI6IHJldHVybiBrKyIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiAwIDAgMCAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyByICsgIiAiICsgciArICIgMCAwIDAgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY2FuLnBvaW50W2ldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gY2FuLnBvaW50W2ldID0gY2FuLnBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5wb2ludFtpKzFdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC55ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hcmcgPSAiIDAgMCAwICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXAgPSBpICsgMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkgKyAiIDAgMCAwICIgKyBwb2ludFtpKzFdLnggKyAiICIgKyBwb2ludFtpKzFdLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHBvaW50W2krMl0ueCArICIgIiArIHBvaW50W2krMl0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpKzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzFdID0gcG9pbnRbaSsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsyXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZG9uZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJRIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRvbmUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuam9pbigiICIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICB9LAogICAgICAgIHRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7CiAgICAgICAgICAgIGRhdGEueCA9ICh0YXJnZXQueDEuYmFzZVZhbC52YWx1ZSArIHRhcmdldC54Mi5iYXNlVmFsLnZhbHVlKSAvIDIKICAgICAgICAgICAgZGF0YS55ID0gKHRhcmdldC55MS5iYXNlVmFsLnZhbHVlICsgdGFyZ2V0LnkyLmJhc2VWYWwudmFsdWUpIC8gMgogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIH0sCiAgICAgICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIHRhcmdldC50YWdOYW1lICsgIiAiICsgdGFyZ2V0LlZhbHVlKCJkIikgfSwKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvd2Fsa190cmFzaC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLAogICAgaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBvdXRwdXQsIGFjdGlvbiwgb3B0aW9uKSB7b3V0cHV0LmlubmVySFRNTCA9ICIiOwogICAgICAgIGlmICghbXNnLnJlc3VsdCB8fCBtc2cucmVzdWx0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZFRhYmxlKGNhbiwgbXNnLCBvdXRwdXQsIG1zZy5hcHBlbmQpOwogICAgICAgICAgICB0YWJsZS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtzd2l0Y2ggKGV2ZW50LnRhcmdldC50YWdOYW1lKSB7CiAgICAgICAgICAgICAgICBjYXNlICJURCI6CiAgICAgICAgICAgICAgICAgICAgY2FuLm9uaW1wb3J0LndoaWNoKGV2ZW50LCB0YWJsZSwgbXNnLmFwcGVuZCwgZnVuY3Rpb24oaW5kZXgsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYW4uT3B0aW9uKCJmaWxlIiwgZXZlbnQudGFyZ2V0LmlubmVySFRNTC50cmltKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5ydW4oZXZlbnQsIFtldmVudC50YXJnZXQuaW5uZXJIVE1MLnRyaW0oKV0sIGZ1bmN0aW9uKG1zZykge30pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAiVEgiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUUiI6CiAgICAgICAgICAgICAgICBjYXNlICJUQUJMRSI6CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIHJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyksIHRhYmxlOwogICAgICAgIH0KCiAgICAgICAgLy8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgYWN0aW9uLCBbe3R5cGU6ICJzY3JpcHQiLCBzcmM6ICJodHRwczovL2Nkbi5ib290Y3NzLmNvbS9lY2hhcnRzLzQuMi4wLXJjLjIvZWNoYXJ0cy5qcyJ9XSk7CiAgICAgICAgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgb3V0cHV0LCBbe2luY2x1ZGU6IFsicmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjYW4ucGFnZS5BcHBlbmQoY2FuLCBvdXRwdXQsIFt7aW5jbHVkZTogWyJyZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIG91dHB1dCwgW3t0eXBlOiAiZGl2Iiwgc3R5bGU6IHt3aWR0aDogIjYwMHB4IiwgaGVpZ2h0OiAiNDAwcHgifX1dKS5sYXN0KTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbXNnLlRhYmxlKCkKCiAgICAgICAgICAgICAgICB2YXIgeURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBiYXJEYXRhID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChkYXRhLmxlbmd0aD4xMD8gMTA6IGRhdGEubGVuZ3RoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgeURhdGEucHVzaChpICsgZGF0YVtpXS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBiYXJEYXRhLnB1c2goZGF0YVtpXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogW3sKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbXNnLk9wdGlvbigidGl0bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwgcmlnaHQ6IDI1MCwgdG9wOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjMkQzRTUzJywgZm9udFNpemU6IDE4fSwKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWUgKyI6ICIrcGFyYW1zLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2aXN1YWxNYXA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnRpbnVvdXMnLAogICAgICAgICAgICAgICAgICAgICAgICBvcmllbnQ6ICdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogODAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFsn6auYJywgJ+S9jiddLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93TGFiZWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBkYXRhWzFdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjNkZDRjZBJywgJyNGRkZENjQnLCAnI0ZGNTAwMCddCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjN0I5M0E3JwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBncmlkOiB7cmlnaHQ6IDEwLCB0b3A6IDEzNSwgYm90dG9tOiAxMDAsIHdpZHRoOiAnMjAlJ30sCiAgICAgICAgICAgICAgICAgICAgeEF4aXM6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUdhcDogMTYsCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7c2hvdzogZmFsc2UsIGxpbmVTdHlsZToge2NvbG9yOiAnI2RkZCd9fSwKICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1RpY2s6IHtzaG93OiBmYWxzZSwgbGluZVN0eWxlOiB7Y29sb3I6ICcjZGRkJ319LAogICAgICAgICAgICAgICAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNDU1QTc0JywgYWxpZ246ICdsZWZ0JywgZm9udFNpemU6IDE0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpY2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGQUFBMzknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0MTk3RkQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgPCAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2F8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2J8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeURhdGEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdlbzogewogICAgICAgICAgICAgICAgICAgICAgICBtYXA6ICdjaGluYScsIGxlZnQ6ICdsZWZ0JywgcmlnaHQ6ICcxMDAnLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge2VtcGhhc2lzOiB7c2hvdzogZmFsc2V9fSwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7ZW1waGFzaXM6IHthcmVhQ29sb3I6ICcjZmZmNDY0J319LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgICAgICByb2FtOiBmYWxzZSwgdHlwZTogJ21hcCcsIG5hbWU6ICdtYXBTZXInLAogICAgICAgICAgICAgICAgICAgICAgICBnZW9JbmRleDogMCwgbGFiZWw6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvYW06IGZhbHNlLCB0eXBlOiAnYmFyJywgbmFtZTogJ2JhclNlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbE1hcDogZmFsc2UsIGJhckdhcDogMCwgYmFyTWF4V2lkdGg6IDgsCiAgICAgICAgICAgICAgICAgICAgICAgIHpsZXZlbDogMTAwLCBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYSBjb2xvciBtYXAgYXMgeW91ciBuZWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JMaXN0ID0gW3tjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyNGRkQxMTknfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyNGRkFDNEMnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX0sIHtjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyMwMEMwRkEnfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyMyRjk1RkEnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGFJbmRleCA8IDM/IGNvbG9yTGlzdFswXTogY29sb3JMaXN0WzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJCb3JkZXJSYWRpdXM6IDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJhckRhdGEKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNoaW5hX2NoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9XX1dKTsKICAgICAgICB9XX1dKTsKICAgIH0sCiAgICB3aGljaDogZnVuY3Rpb24oZXZlbnQsIHRhYmxlLCBsaXN0LCBjYikge2lmIChldmVudC50YXJnZXQgPT0gdGFibGUpIHtyZXR1cm4gY2IoLTEsICIiKX0KICAgICAgICBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgInRyIiwgZnVuY3Rpb24odHIsIGluZGV4KSB7aWYgKGV2ZW50LnRhcmdldCA9PSB0cikge3JldHVybiBjYihpbmRleC0xLCAiIil9CiAgICAgICAgICAgIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCAidGgsdGQiLCBmdW5jdGlvbih0ZCwgb3JkZXIpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGQpIHtyZXR1cm4gY2IoaW5kZXgtMSwgbGlzdFtvcmRlcl0pfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9mZWVsLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYXRoID0gY2FuLnJlcXVlc3QoKSwgY2FuLmxpc3QgPSBbXSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCWNhbi5iYXNlLmVuZFdpdGgodmFsdWUucGF0aCwgaWNlLlBTKT8gY2FuLnBhdGguUHVzaCh2YWx1ZSk6IGNhbi5saXN0LnB1c2godmFsdWUpCgkJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQuZGlzcGxheShjYW4sIHRhcmdldCkKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBjYW4ucGF0aCwgbnVsbCwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4ub25leHBvcnQubGlzdCkKCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fG1zZy5fY21kc1sxXXx8aWNlLkFVVE8pCgkJY2FuLkFjdGlvbihodG1sLlNQRUVELCBtc2cuT3B0aW9uKGh0bWwuU1BFRUQpfHxtc2cuX2NtZHNbMl18fCIxIikKCQljYW4uQWN0aW9uKG1kYi5MSU1JVCwgbXNnLk9wdGlvbihtZGIuTElNSVQpfHxtc2cuX2NtZHNbM118fCI5IikKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgoJCWNhbi5iZWdpbiA9IHBhcnNlSW50KGNhbi5iZWdpbnx8bXNnLk9wdGlvbihjbGkuQkVHSU4pfHwiMCIpCgkJY2FuLmRpcl9yb290ID0gbXNnLk9wdGlvbihuZnMuRElSX1JPT1QpCgkJY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCX0sCglfZmlsZTogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyB2YXIgcCA9IGxvY2F0aW9uLmhyZWYuaW5kZXhPZihpY2UuSFRUUCkgPT0gMD8gIiI6ICJodHRwOi8vbG9jYWxob3N0OjkwMjAiCgkJcmV0dXJuIHBhdGguaW5kZXhPZihpY2UuSFRUUCkgPT0gMD8gcGF0aDogcCtjYW4uYmFzZS5QYXRoKCIvc2hhcmUvbG9jYWwiLCBjYW4uZGlyX3Jvb3R8fCIiLCBwYXRoKQoJfSwKCWZpbGU6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcGF0aCA9IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIHBhdGgsIGluZGV4KQoJCXZhciBjYiA9IGNhbi5vbmZpZ3VyZVtjYW4uYmFzZS5FeHQocGF0aCldfHxjYW4ub25maWd1cmVbImltYWdlIl07IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW2NiKGNhbiwgcGF0aCwgaW5kZXgpXSkKCX0sCglwYWdlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZ2luLCBsaW1pdCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuZGlzcGxheSkKCQliZWdpbiA9IHBhcnNlSW50KGJlZ2lufHxjYW4uYmVnaW4pLCBsaW1pdCA9IHBhcnNlSW50KGxpbWl0fHxjYW4uQWN0aW9uKG1kYi5MSU1JVCkpCgkJZm9yICh2YXIgaSA9IGJlZ2luOyBpIDwgYmVnaW4rbGltaXQ7IGkrKykgeyBsaXN0ICYmIGxpc3RbaV0gJiYgY2FuLm9uaW1wb3J0LmZpbGUoY2FuLCBsaXN0W2ldLnBhdGgsIGkpIH0KCQljYW4uU3RhdHVzKHtiZWdpbjogYmVnaW4sIGxpbWl0OiBsaW1pdCwgdG90YWw6IGNhbi5saXN0Lmxlbmd0aH0pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIue7hOS7tuiPnOWNlSIsCglwbmc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJanBnOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWpwZWc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJaW1hZ2U6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIHtpbWc6IHBhdGgsIGhlaWdodDogY2FuLm9uZXhwb3J0LmhlaWdodChjYW4pLAoJCW9ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKSB9LAoJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmRldGFpbC5faW5pdChjYW4sIGluZGV4KSB9LAoJfSB9LAoKCXZpZGVvOiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgdmFyIGF1dG8gPSBjYW4udXNlci5pc01vYmlsZSYmY2FuLkFjdGlvbihtZGIuTElNSVQpIT0iMSI/IGZhbHNlOiB0cnVlLCBsb29wID0gdHJ1ZSwgdG90YWwgPSAwOyBmdW5jdGlvbiBjYihldmVudCkgeyB9CgkJcmV0dXJuIHt0eXBlOiBodG1sLlZJREVPLCBzdHlsZToge2hlaWdodDogY2FuLm9uZXhwb3J0LmhlaWdodChjYW4pfSwgY2xhc3NOYW1lOiAicHJldmlldyIsCgkJCWRhdGE6IHtzcmM6IHBhdGgsIGNvbnRyb2xzOiAiY29udHJvbHMiLCBhdXRvcGxheTogYXV0bywgbG9vcDogbG9vcCwgcGxheWJhY2tSYXRlOiBwYXJzZUZsb2F0KGNhbi5BY3Rpb24oaHRtbC5TUEVFRCkpfSwKCQkJb25jb250ZXh0bWVudTogY2IsIG9ucGxheTogY2IsIG9ucGF1c2U6IGNiLCBvbmVuZGVkOiBjYiwKCQkJb25tb3VzZW92ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpIH0sCgkJCW9ubG9hZGVkbWV0YWRhdGE6IGZ1bmN0aW9uKGV2ZW50KSB7IHRvdGFsID0gZXZlbnQudGltZVN0YW1wCgkJCQlldmVudC50YXJnZXQuY3VycmVudFRpbWUgPSBjYW4uX21zZy5jdXJyZW50VGltZSB8fCAwCgkJCX0sIG9ubG9hZGVkZGF0YTogY2IsIG9udGltZXVwZGF0ZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5TdGF0dXMobmZzLkZJTEUpID09IHBhdGggJiYgY2FuLlN0YXR1cygicG9zaXRpb24iLCBjYW4ub25leHBvcnQucG9zaXRpb24oY2FuLCAoY2FuLl9tc2cuY3VycmVudFRpbWU9ZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lKS0xLCBldmVudC50YXJnZXQuZHVyYXRpb24pKQoJCQl9LAoJCX0KCX0sCgltcDQ6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKCW00djogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAoJbW92OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWwoJCVtodG1sLkhFSUdIVCwgMTAwLCAyMDAsIDQwMCwgNjAwLCA4MDAsIGljZS5BVVRPXSwKCQlbaHRtbC5TUEVFRCwgMC4xLCAwLjIsIDAuNSwgMSwgMiwgMywgNSwgMTBdLAoJCVttZGIuTElNSVQsIDEsIDMsIDYsIDksIDEyLCAxNSwgMjAsIDMwLCA1MF0sCgldLAoJcHJldjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4uYmVnaW4gPiAwKSB7CgkJCWNhbi5iZWdpbiAtPSBwYXJzZUludChjYW4uQWN0aW9uKG1kYi5MSU1JVCkpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KQoJCX0gZWxzZSB7CgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+esrOS4gOmhteS6hiIpCgkJfQoJfSwKCW5leHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmJlZ2luICsgcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSA8IGNhbi5saXN0Lmxlbmd0aCkgewoJCQljYW4uYmVnaW4gKz0gcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCQl9IGVsc2UgewoJCQljYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/mnIDlkI7kuIDpobXkuoYiKQoJCX0KCX0sCgloZWlnaHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkgfSwKCXNwZWVkOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpIH0sCglsaW1pdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KSB9LAoKCWNob29zZUltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQljYW4udXNlci5hZ2VudC5jaG9vc2VJbWFnZShmdW5jdGlvbihsaXN0KSB7IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3tpbWc6IGl0ZW0sIGhlaWdodDogMjAwfV0pCgkJfSkgfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWyLlhbPpl60iLCAi5LiL6L29IiwgIuWIoOmZpCIsICLkuIrkuIDkuKoiLCAi5LiL5LiA5LiqIiwgIuiuvue9ruWktOWDjyIsICLorr7nva7og4zmma8iLCAi5aSN5Yi26ZO+5o6lIl0sIF9pbml0OiBmdW5jdGlvbihjYW4sIGluZGV4KSB7CgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwge3R5cGU6ICJzdG9yeSBmZWVsIGZsb2F0In0sIFtdLCBmdW5jdGlvbihzdWIpIHsgY2FuLnN1YiA9IHN1YgoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBjYiwgdHJ1ZSkgfQoKCQkJc3ViLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl90YXJnZXQsIHtsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pCgkJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLldJRFRILCB3aWR0aCwgaHRtbC5IRUlHSFQsIGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJCXN1Yi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLm9uZGV0YWlsLmxpc3QsIHN1Yi5fYWN0aW9uLCBjYW4ub25kZXRhaWwpCgkJCQlzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIFsiYmVnaW4iLCAiZmlsZSJdKQoKCQkJCWNhbi5vcmRlciA9IGluZGV4LCBjYW4uc2hvdyA9IGZ1bmN0aW9uKG9yZGVyKSB7IHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtvcmRlcl0ucGF0aCkKCQkJCQl2YXIgY2IgPSBjYW4ub25maWd1cmVbY2FuLmJhc2UuRXh0KHBhdGgpXXx8Y2FuLm9uZmlndXJlWyJpbWFnZSJdCgkJCQkJCgkJCQkJc3ViLnBhZ2UuQXBwZW5kcyhzdWIsIHN1Yi5fb3V0cHV0LCBbY2FuLmJhc2UuQ29weShjYihjYW4sIHBhdGgsIGluZGV4KSwge2hlaWdodDogIiIsIHN0eWxlOiBraXQuRGljdChodG1sLk1BWF9XSURUSCwgd2lkdGgsIGh0bWwuTUFYX0hFSUdIVCwgaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUKX0pXSkKCQkJCQlzdWIuU3RhdHVzKGNsaS5CRUdJTiwgb3JkZXIrMStpY2UuUFMrY2FuLmxpc3QubGVuZ3RoKSwgc3ViLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkKCQkJCX0sIGNhbi5zaG93KGNhbi5vcmRlcikKCQkJfSkKCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCX0sCgki5YWz6ZetIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uc3ViLl90YXJnZXQpIH0sCgki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5kb3dubG9hZChjYW4sIHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgbmZzLlRSQVNILCBbY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sICLliKDpmaTmiJDlip8iKSB9LCB0cnVlKSB9LAoJIuS4iuS4gOS4qiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9yZGVyID4gMD8gY2FuLnNob3coLS1jYW4ub3JkZXIpOiBjYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/nrKzkuIDlvKDllaYhIikgfSwKCSLkuIvkuIDkuKoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vcmRlciA8IGNhbi5saXN0Lmxlbmd0aC0xPyBjYW4uc2hvdygrK2Nhbi5vcmRlcik6IGNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+acgOWQjuS4gOW8oOWVpiEiKSB9LAoJIuiuvue9ruWktOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnNldEhlYWRlcigiYXZhdGFyIiwgY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLorr7nva7og4zmma8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZXRIZWFkZXIoImJhY2tncm91bmQiLCBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuWkjeWItumTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtfcGF0aDogY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKX0sIHRydWUpKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFtjbGkuQkVHSU4sIG1kYi5MSU1JVCwgbWRiLlRPVEFMLCBuZnMuRklMRSwgInBvc2l0aW9uIl0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbikgeyB2YXIgaGVpZ2h0ID0gY2FuLkFjdGlvbihodG1sLkhFSUdIVCkKCQlyZXR1cm4gcGFyc2VJbnQoaGVpZ2h0ID09IGljZS5BVVRPPyBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKS80LCAyMDApOiBoZWlnaHQpCgl9LAoJcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHRvdGFsKSB7IHRvdGFsID0gdG90YWwgfHwgY2FuLm1heAoJCXJldHVybiBwYXJzZUludCgoaW5kZXgrMSkqMTAwL3RvdGFsKSsiJSIrIiA9ICIrKHBhcnNlSW50KGluZGV4KSsxKStpY2UuUFMrcGFyc2VJbnQodG90YWwpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQlpZiAobXNnLkxlbmd0aCgpID4gMCkgeyByZXR1cm4gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSB9CgoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCBtc2cuUmVzdWx0KCkpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCB3aWtpLklURU0sIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGRhdGEgPSBpdGVtLmRhdGFzZXR8fHt9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgY2FuLmJhc2UuT2JqKGRhdGEuc3R5bGUpKQoJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uaW1wb3J0LCBkYXRhLnR5cGVdLCBbY2FuLCBkYXRhLCBpdGVtXSkKCQl9KQoJfSwKCW5hdm1lbnU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IHZhciBuYXYgPSBjYW4uc3VwLl9uYXZtZW51CgkJbmF2ID0gbmF2fHxjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX2ZpZWxkcywgW3dpa2kuTkFWTUVOVV0pLmZpcnN0CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgbmF2KSwgY2FuLl9maWVsZHMuaW5zZXJ0QmVmb3JlKG5hdiwgY2FuLl9vdXRwdXQpCgoJCWNhbi5vbmltcG9ydC5saXN0KGNhbiwgY2FuLmJhc2UuT2JqKGRhdGEuZGF0YSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCXZhciBsaW5rID0gaXRlbS5tZXRhLmxpbmssIGxpc3QgPSBjYW4uY29yZS5TcGxpdChpdGVtLm1ldGEubGluaykKCQkJaWYgKGNhbi5jb3JlLlZhbHVlKGNhbiwgbGlzdFswXSkpIHsgcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGxpc3RbMF1dLCBsaXN0LnNsaWNlKDEpKSB9CgkJCWlmICghbGluayB8fCBsaW5rID09IGNhbi5PcHRpb24obmZzLlBBVEgpKSB7IHJldHVybiBmYWxzZSB9CgoJCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShpdGVtLm1ldGEubmFtZSk7IHJldHVybiBjYW4uT3B0aW9uKG5mcy5QQVRILCBsaW5rKSB9KSkgeyByZXR1cm4gfQoJCQlyZXR1cm4gY2FuLnN1cC5VcGRhdGUoZXZlbnQsIFtsaW5rXSkKCQl9LCBuYXYpLCBjYW4uc3VwLl9uYXZtZW51ID0gbmF2CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZykgeyAKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBuYXYsIGh0bWwuSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKyhjYW4uaXNDbWRNb2RlKCk/IG1zZy5PcHRpb24oaHRtbC5NQVJHSU5fWSk6IDApKQoJCQljYW4uQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKS1uYXYub2Zmc2V0V2lkdGgtMjEpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsCgkJCQlodG1sLkhFSUdIVCwgY2FuLnN1cC5fbmF2bWVudS5vZmZzZXRIZWlnaHQtMjAsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCksCgkJCQlodG1sLkZMT0FULCBodG1sLkxFRlQsIGh0bWwuQ0xFQVIsIGh0bWwuTk9ORSwKCQkJCWh0bWwuUEFERElORywgMTAsCgkJCSkKCQl9KQoJfSwKCXByZW1lbnU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5wYWdlLktleXMod2lraS5IMiwgd2lraS5IMyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFtpdGVtLmlubmVySFRNTCwgaHRtbC5MSSwgaXRlbS50YWdOYW1lXSwgb25jbGljazogZnVuY3Rpb24oKSB7CgkJCQlpdGVtLnNjcm9sbEludG9WaWV3KCkKCQkJfX1dKSwgaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdGFyZ2V0LnNjcm9sbEludG9WaWV3KCkgfQoJCX0pCgl9LAoJdGl0bGU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLmlzQ21kTW9kZSgpICYmIHRhcmdldC50YWdOYW1lID09ICJIMSIgJiYgY2FuLnVzZXIudGl0bGUoZGF0YS50ZXh0KQoJfSwKCXJlZmVyOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5BLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsICJyZWZlciIsIG1kYi5OQU1FLCBpdGVtLmRhdGFzZXQubmFtZSwgbWRiLlRFWFQsIGl0ZW0uaHJlZl0pCgkJCX0KCQl9KQoJfSwKCXNwYXJrOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWlmIChkYXRhW21kYi5OQU1FXSA9PSBjaGF0LkZJRUxEKSB7CgkJCWZ1bmN0aW9uIGRlZXAodGV4dCkgeyB2YXIgZCA9IDAKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykgewoJCQkJCXN3aXRjaCAodGV4dFtpXSkgewoJCQkJCQljYXNlIGljZS5UQjogZCArPSA0OyBicmVhawoJCQkJCQljYXNlIGljZS5TUDogZCsrOyBicmVhawoJCQkJCQlkZWZhdWx0OiByZXR1cm4gZAoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBkCgkJCX0KCQkJdmFyIGxpc3QgPSBbXTsgY2FuLmNvcmUuTGlzdCh0YXJnZXQuaW5uZXJUZXh0LnNwbGl0KGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgdmFyIF9kZWVwID0gZGVlcChsaW5lKQoJCQkJd2hpbGUgKGxpc3QubGVuZ3RoID4gMCkgeyBpZiAoX2RlZXAgPD0gbGlzdFtsaXN0Lmxlbmd0aC0xXS5fZGVlcCkgeyBsaXN0LnBvcCgpIH0gZWxzZSB7IGJyZWFrIH0gfQoJCQkJdmFyIGxzID0gY2FuLmNvcmUuU3BsaXQobGluZSksIGl0ZW0gPSB7X2RlZXA6IF9kZWVwLCBtZXRhOiB7aW5kZXg6IGxzWzBdLCBuYW1lOiBsc1sxXSwgYXJnczogbHMuc2xpY2UoMil9LCBsaXN0OiBbXX0KCQkJCWlmIChsaXN0Lmxlbmd0aCA+IDApIHsgbGlzdFtsaXN0Lmxlbmd0aC0xXS5saXN0LnB1c2goaXRlbSkgfSBsaXN0LnB1c2goaXRlbSkKCQkJfSkKCgkJCXZhciBmaXJzdDsgZnVuY3Rpb24gc2hvdyhpdGVtLCBpbmRleCwgdGFyZ2V0LCBvdXRwdXQpIHsKCQkJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5tZXRhLm5hbWV8fGl0ZW0ubWV0YS5pbmRleF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHZpZXcubWVudSwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQkJCWlmICh1aS5saXN0LmlubmVyVGV4dCkgeyByZXR1cm4gY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIHVpLmxpc3QpIH0KCQkJCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbmRleCB9LCBvdXRwdXQpKSB7IHJldHVybiB9CgoJCQkJCWNhbi5jb3JlLkxpc3QoaXRlbS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBpdGVtLm1ldGEsIGZ1bmN0aW9uKHN1YikgewoJCQkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaXRlbS5tZXRhLmluZGV4LCBjbWRzLCBjYikgfQoJCQkJCQkJc3ViLkNvbmZIZWlnaHQoaXRlbS5tZXRhLmhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkvMiksIHN1Yi5Db25mV2lkdGgoaXRlbS5tZXRhLndpZHRoID0gY2FuLkNvbmZXaWR0aCgpLShjYW4udXNlci5pc1dpbmRvd3M/IDE4MTogMTY1KSkKCQkJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJCQkJCX0sIG91dHB1dCkKCQkJCQl9KQoJCQkJfX0sIGh0bWwuTElTVF0pCgkJCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmxpc3QubGVuZ3RoID4gMCAmJiBzaG93KGl0ZW0sIGNhbi5jb3JlLktleXMoaW5kZXgsIGl0ZW0ubWV0YS5pbmRleCksIHVpLmxpc3QsIG91dHB1dCkgfSkKCQkJCXVpLmxpc3QuaW5uZXJUZXh0ID09ICIiICYmIChmaXJzdCA9IGZpcnN0fHx1aS5pdGVtKQoJCQl9CgoJCQl2YXIgdmlldyA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFsKCQkJCXt2aWV3OiBodG1sLk1FTlUsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzIsIHdpZHRoOiAxMjB9fSwKCQkJCXt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzIsIHdpZHRoOiBjYW4uQ29uZldpZHRoKCktKGNhbi51c2VyLmlzV2luZG93cz8gMTgxOiAxNjUpfX0sCgkJCV0pCgkJCXJldHVybiBzaG93KGxpc3RbMF0sIGxpc3RbMF0uX2luZGV4LCB2aWV3Lm1lbnUsIHZpZXcubGlzdCksIGZpcnN0LmNsaWNrKCkKCQl9CgoJCWlmIChkYXRhW21kYi5OQU1FXSA9PSBodG1sLklOTkVSKSB7IHJldHVybiBjYW4ub25tb3Rpb24uY29weShjYW4sIHRhcmdldCkgfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5TUEFOLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSwgIiIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsICJzcGFyayIsIG1kYi5OQU1FLCAic2hlbGwiLCBtZGIuVEVYVCwgaXRlbS5pbm5lclRleHRdLCBmdW5jdGlvbigpIHt9KQoJCQl9KQoJCX0pCgl9LAoJY2hhcnQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJdGFyZ2V0Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbihldmVudCkgewoJCQljYW4udXNlci5jYXJ0ZUNsaWVudChldmVudCwgY2FuLCBraXQuRGljdChtZGIuRVhQT1JULCBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sICJoaSIsIHRhcmdldCkKCQkJfSksIFttZGIuRVhQT1JUXSkKCQl9Cgl9LAoJdGFibGU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuT3JkZXJUYWJsZShjYW4sIHRhcmdldCksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNoYXQuQ09OVEVOVCkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuVEQsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLmNvcHkoY2FuLCBpdGVtKSB9KQoJfSwKCWltYWdlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkvKGNhbi51c2VyLmlzTW9iaWxlPyAyOiAxKSwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCX0sCglmaWVsZDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQsIHdpZHRoKSB7IHZhciBpdGVtID0gY2FuLmJhc2UuT2JqKGRhdGEubWV0YSkKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBpdGVtLCBbY2hhdC5QTFVHSU5fU1RBVEVfSlNdLCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjaGF0LlNUT1JZLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbZGF0YS50eXBlLCBkYXRhLm5hbWUsIGRhdGEudGV4dF0sIGNtZHMpLCBjYikKCQkJfQoKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKSksIHN1Yi5Db25mV2lkdGgoaXRlbS53aWR0aCA9ICh3aWR0aHx8Y2FuLkNvbmZXaWR0aCgpKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyA0MDogMjApKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoKCQkJY2FuLmNvcmUuVmFsdWUoaXRlbSwgImF1dG8uY21kIikgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGZ1bmN0aW9uKCkgewoJCQkJc3ViLnJ1bkFjdGlvbihzdWIucmVxdWVzdCh7fSwgY2FuLmNvcmUuVmFsdWUoaXRlbSwgIm9wdHMiKSksIGNhbi5jb3JlLlZhbHVlKGl0ZW0sICJhdXRvLmNtZCIpKQoJCQl9KQoJCX0sIGNhbi5fb3V0cHV0LCB0YXJnZXQpCgl9LAoJLy8gbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCS8vIH0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwKCV9tb2RlOiB7CgkJbm9ybWFsOiB7CgkJCSJuIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubmV4dChjYW4uc3ViKSB9LAoJCQkiaiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLm5leHQoY2FuLnN1YikgfSwKCQkJIkFycm93UmlnaHQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5uZXh0KGNhbi5zdWIpIH0sCgkJCSJBcnJvd0xlZnQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5wcmV2KGNhbi5zdWIpIH0sCgkJCSJrIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwucHJldihjYW4uc3ViKSB9LAoJCQkicCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLnByZXYoY2FuLnN1YikgfSwKCgkJCSJxIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWxbIue7k+adnyJdKGV2ZW50LCBjYW4uc3ViKSB9LAoJCQkiaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsWyLpmpDol48iXShldmVudCwgY2FuLnN1YikgfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwKCV90cmFuczoge3ZpZXc6ICLop4blm74ifSwKCXBsYXk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGxpc3QgPSBbXSwgY3VycmVudCA9IFtdCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIHdpa2kuSVRFTSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS50YWdpcyhbImgxIiwgImgyIiwgImgzIl0sIGl0ZW0pICYmIGxpc3QucHVzaChjdXJyZW50ID0gW10pLCBjdXJyZW50LnB1c2goaXRlbSkKCQl9KQoKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogInN0b3J5IHdvcmQgZmxvYXQifSwgW10sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gY2FuLnJ1biwgc3ViLnN1cCA9IGNhbiwgY2FuLnN1YiA9IHN1YiwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oc3ViLCBbCgkJCQlbIuW4g+WxgCIsICLlvIDorrIiLCAi572R5qC8IiwgIuW/q+mXqiJdLCAi5aSn57qyIiwgIummlumhtSIsICLkuIrkuIDpobUiLAoJCQkJWyLoj5zljZUiXS5jb25jYXQoY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihwYWdlKSB7IHJldHVybiBwYWdlWzBdLmlubmVySFRNTCB9KSksCgkJCQki5LiL5LiA6aG1IiwgIumakOiXjyIsICLnu5PmnZ8iLAoJCQldLCBzdWIuX2FjdGlvbiwgY2FuLm9uZGV0YWlsKQoKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJrZXltYXAuZm9jdXMiLCBjYW4ucmVxdWVzdChldmVudCwge2NiOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmtleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sICJub3JtYWwiLCBjYW4ua2V5bGlzdCkKCQkJfX0pKSwgY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pCgoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCBodG1sLkJBQ0tHUk9VTkQsIGNhbi5fcm9vdC5fdGFyZ2V0LnN0eWxlLmJhY2tncm91bmQpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBjYW4uX3Jvb3QuX2hlaWdodC00Kmh0bWwuUExVR0lOX01BUkdJTi0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5XSURUSCwgY2FuLl9yb290Ll93aWR0aC00Kmh0bWwuUExVR0lOX01BUkdJTikKCgkJCXN1Yi51aSA9IHN1Yi5wYWdlLkFwcGVuZChzdWIsIHN1Yi5fb3V0cHV0LCBbe3ZpZXc6IGNoYXQuUFJPSkVDVH0sIHt2aWV3OiBjaGF0LkNPTlRFTlR9XSkKCQkJY2FuLmNvcmUuTGlzdChzdWIubGlzdCA9IGxpc3QsIGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7CgkJCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuYW1lOiBwYWdlWzBdLmlubmVySFRNTH0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9uZGV0YWlsLnNob3coc3ViLCBpbmRleCkgCgkJCQl9LCBmdW5jdGlvbihldmVudCkge30sIHN1Yi51aS5wcm9qZWN0KQoKCQkJCXN1Yi5wYWdlLkFwcGVuZChzdWIsIHN1Yi51aS5jb250ZW50LCBbe3ZpZXc6ICJwYWdlIisoaW5kZXg9PTA/ICIgZmlyc3QiOiAiIiksIGxpc3Q6IGNhbi5jb3JlLkxpc3QocGFnZSwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgZGF0YSA9IGl0ZW0uZGF0YXNldHx8e30KCQkJCQlzd2l0Y2ggKGRhdGEudHlwZSkgewoJCQkJCQljYXNlIHdpa2kuUFJFTUVOVTogaXRlbSA9IGl0ZW0uY2xvbmVOb2RlKGZhbHNlKTsgYnJlYWsKCQkJCQkJY2FzZSBjaGF0LkZJRUxEOiBpdGVtID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5TVE9SWSwgY2FuLmJhc2UuT2JqKGRhdGEubWV0YSksIHN1Yi51aS5jb250ZW50KS5maXJzdDsgYnJlYWsKCQkJCQkJZGVmYXVsdDogaXRlbSA9IGl0ZW0uY2xvbmVOb2RlKHRydWUpCgkJCQkJfQoJCQkJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uaW1wb3J0LCBkYXRhLnR5cGVdLCBbc3ViLCBkYXRhLCBpdGVtLCBjYW4uX3Jvb3QuX3dpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOXSksIGl0ZW0KCQkJCX0pLCB9XSkKCQkJfSksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIudWkucHJvamVjdCksIGNhbi5vbmRldGFpbC5zaG93KHN1YiwgMCkgCgoJCQlzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIFttZGIuUEFHRSwgY2xpLkZST00sIGNsaS5DT1NUXSksIHN1Yi5TdGF0dXMoY2xpLkZST00sIGNhbi5iYXNlLlRpbWUoKSkKCQkJdmFyIGZyb20gPSBuZXcgRGF0ZSgpOyBjYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDEwMH0sIGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCQkJc3ViLlN0YXR1cyhjbGkuQ09TVCwgY2FuLmJhc2UuRHVyYXRpb24obm93LWZyb20pKQoJCQl9KQoJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCXZpZXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLl9oZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCwgY2FuLl9oZWlnaHQpLCBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi5zdXAuX25hdm1lbnUsIGNhbi5faGVpZ2h0KSwgZGVsZXRlKGNhbi5faGVpZ2h0KQoJCX0gZWxzZSB7IGNhbi5faGVpZ2h0ID0gY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCwgIiIpLCBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi5zdXAuX25hdm1lbnUsICIiKQoJCX0KCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWyLliKDpmaQiXSwKCXNob3c6IGZ1bmN0aW9uKHN1Yiwgd2hpY2gpIHsgc3ViLnBhZ2Uuc3R5bGVDbGFzcyhzdWIsIHN1Yi51aS5jb250ZW50LCBjaGF0LkNPTlRFTlQpCgkJc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHdpa2kuRElWX1BBR0UsIGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7CgkJCWlmIChpbmRleCA9PSB3aGljaCB8fCBwYWdlID09IHdoaWNoKSB7CgkJCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBwYWdlLCBzdWIucGFnZS5LZXlzKGh0bWwuSDEsIGh0bWwuSDIsIGh0bWwuSDMpLCBmdW5jdGlvbihpdGVtKSB7IHN1Yi5BY3Rpb24oIuiPnOWNlSIsIGl0ZW0uaW5uZXJIVE1MKSB9KQoJCQkJc3ViLm9ubW90aW9uLnNlbGVjdChzdWIsIHN1Yi51aS5wcm9qZWN0LCBodG1sLkRJVl9JVEVNLCBpbmRleCkKCQkJCXN1Yi5TdGF0dXMobWRiLlBBR0UsIGluZGV4KzEraWNlLlBTK3N1Yi5saXN0Lmxlbmd0aCkKCQkJCXN1Yi5wYWdlLkNsYXNzTGlzdC5hZGQoc3ViLCBwYWdlLCBodG1sLlNIT1cpCgkJCX0gZWxzZSB7CgkJCQlzdWIucGFnZS5DbGFzc0xpc3QuZGVsKHN1YiwgcGFnZSwgaHRtbC5TSE9XKQoJCQl9CgkJfSkKCX0sCgluZXh0OiBmdW5jdGlvbihzdWIpIHsKCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgc3ViLmNvcmUuS2V5cyh3aWtpLkRJVl9QQUdFLCBpY2UuU0hPVyksIGZ1bmN0aW9uKHBhZ2UpIHsKCQkJcGFnZS5uZXh0U2libGluZz8gc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZS5uZXh0U2libGluZyk6IHN1Yi51c2VyLnRvYXN0KHN1YiwgY2xpLkVORCkKCQl9KQoJfSwKCXByZXY6IGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5wYWdlLlNlbGVjdChzdWIsIHN1Yi51aS5jb250ZW50LCBzdWIuY29yZS5LZXlzKHdpa2kuRElWX1BBR0UsIGljZS5TSE9XKSwgZnVuY3Rpb24ocGFnZSkgewoJCQlwYWdlLnByZXZpb3VzU2libGluZz8gc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZS5wcmV2aW91c1NpYmxpbmcpOiBzdWIudXNlci50b2FzdChzdWIsIGNsaS5FTkQpCgkJfSkKCX0sCglmbGFzaDogZnVuY3Rpb24oc3ViKSB7CgkJc3ViLmNvcmUuTmV4dChzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgd2lraS5ESVZfUEFHRSksIGZ1bmN0aW9uKHBhZ2UsIG5leHQpIHsKCQkJc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZSksIHN1Yi5vbm1vdGlvbi5kZWxheShzdWIsIGZ1bmN0aW9uKCkgeyBuZXh0KCkgfSkKCQl9KQoJfSwKCWdyaWQ6IGZ1bmN0aW9uKHN1YikgeyBzdWIucGFnZS5zdHlsZUNsYXNzKHN1Yiwgc3ViLnVpLmNvbnRlbnQsICJjb250ZW50IGdyaWQiKSB9LAoKCSLlvIDorrIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIDApIH0sCgki572R5qC8IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLmdyaWQoY2FuKSB9LAoJIuW/q+mXqiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5mbGFzaChjYW4pIH0sCgoJIuWkp+e6siI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSB9LAoJIummlumhtSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5zaG93KGNhbiwgMCkgfSwKCSLkuIrkuIDpobUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwucHJldihjYW4sIGNhbi51aS5jb250ZW50KSB9LAoJIuiPnOWNlSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5zaG93KGNhbiwgZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXgpIH0sCgki5LiL5LiA6aG1IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLm5leHQoY2FuLCBjYW4udWkuY29udGVudCkgfSwKCSLpmpDol48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX291dHB1dCkgfSwKCSLnu5PmnZ8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5fdGFyZ2V0KSB9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBzdWIpIHsgc3ViLnBhZ2UuUmVtb3ZlKHN1Yiwgc3ViLl90YXJnZXQpIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdGF0ZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjb25mLCBjYiwgdGFyZ2V0KSB7fSwKCV9wcm9jZXNzOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb25TdGF0dXMoKSAmJiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykgJiYgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvblN0YXR1cygpKSkKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgbXNnLk9wdGlvblByb2Nlc3MoKV0sIHtjYW46IGNhbiwgc3ViOiBjYW4sIG1zZzogbXNnfSkKCX0sCgoJX2xvY2F0aW9uOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBjYW4udXNlci5qdW1wcyhfYXJnKTsgcmV0dXJuIHRydWUgfSwKCV9yZXBsYWNlOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBsb2NhdGlvbi5yZXBsYWNlKF9hcmcpOyByZXR1cm4gdHJ1ZSB9LAoJX2hpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGhpc3RvcnkuYmFjaygpOyByZXR1cm4gdHJ1ZSB9LAoJX2NvbmZpcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7IGNhbi51c2VyLmNvbmZpcm0oX2FyZykgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbXNnKSwgImNvbmZpcm0iKTsgcmV0dXJuIHRydWUgfSwKCV9yZWZyZXNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5jb3JlLlRpbWVyKHBhcnNlSW50KG1zZy5PcHRpb24oIl9kZWxheSIpfHwiNTAwIiksIGZ1bmN0aW9uKCkgewoJCQljYW4uVXBkYXRlKGNhbi5yZXF1ZXN0KHt9LCB7X2NvdW50OiBwYXJzZUludChtc2cuT3B0aW9uKCJfY291bnQiKSktMX0pKQoJCX0pCgkJcmV0dXJuIHRydWUKCX0sCglfcmV3cml0ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5fYXJnLmxlbmd0aDsgaSArPSAyKSB7CgkJCWNhbi5PcHRpb24obXNnLl9hcmdbaV0sIG1zZy5fYXJnW2krMV0pLCBjYW4uQWN0aW9uKG1zZy5fYXJnW2ldLCBtc2cuX2FyZ1tpKzFdKQoJCX0KCQlyZXR1cm4gY2FuLlVwZGF0ZSgpCgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJcmV0dXJuIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpLCB0cnVlCgl9LAoJX2ZpZWxkOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IGl0ZW0udHlwZSA9IGNoYXQuU1RPUlksIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgaXRlbSwge3R5cGU6IGNoYXQuU1RPUlksIGFyZzogY2FuLmJhc2UuT2JqKGl0ZW1baWNlLkFSR10sIFtdKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIuQ29uZihjYW4uYmFzZS5PYmooaXRlbS5jb25mKSkKCQkJaWYgKHN1Yi5Db25mKCJtb2RlIikgPT0gInNpbXBsZSIpIHsKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdCgpOyBtc2cuRWNobyhzdWIuQ29uZigicmVzdWx0IikpCgkJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLzIpCgkJCQlyZXR1cm4gY2FuLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKXx8c3ViLkNvbmYoImZlYXR1cmUuZGlzcGxheSIpKQoJCQl9CgkJCXZhciBvcHQgPSBjYW4uYmFzZS5PYmooaXRlbVtpY2UuT1BUXSwgW10pCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsKCQkJCXZhciByZXMgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvcHQubGVuZ3RoOyBpICs9IDIpIHsgcmVzLk9wdGlvbihvcHRbaV0sIG9wdFtpKzFdKSB9CgkJCQljYW4ucnVuKGV2ZW50LCAobXNnW2ljZS5NU0dfUFJFRklYXXx8W10pLmNvbmNhdChjbWRzKSwgY2IsIHRydWUpCgkJCX0KCQl9KSB9KQoJCXJldHVybiB0cnVlCgl9LAoJX2lubmVyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRElTUExBWSwgaHRtbC5CTE9DSykKCQlyZXR1cm4gdHJ1ZQoJfSwKCglfaG9sZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIHRydWUgfSwKCV9iYWNrOiBmdW5jdGlvbihjYW4pIHsgY2FuLl9oaXN0b3J5LnBvcCgpCgkJZm9yICh2YXIgaGlzID0gY2FuLl9oaXN0b3J5LnBvcCgpOyBoaXM7IGhpcyA9IGNhbi5faGlzdG9yeS5wb3AoKSkgeyBpZiAoaGlzWzBdID09IGN0eC5BQ1RJT04pIHsgY29udGludWUgfQoJCQl2YXIgaW5kZXggPSAwCgkJCWNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS52YWx1ZSA9IGhpc1tpbmRleCsrXXx8IiIgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fYWN0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnZhbHVlID0gaGlzW2luZGV4KytdfHwiIiB9KQoJCQljYW4uVXBkYXRlKCk7IGJyZWFrCgkJfQoJCSFoaXMgJiYgY2FuLlVwZGF0ZSgpCgkJcmV0dXJuIHRydWUKCX0sCglfcmljaDogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRBQkxFX0NPTlRFTlQsIGh0bWwuVEJPRFldLCBmdW5jdGlvbih0YWJsZSkgewoJCQl2YXIgaGVhZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQUJMRV9DT05URU5ULCBodG1sLlRIXSwgZnVuY3Rpb24odGgpIHsgcmV0dXJuIHRoLmlubmVyVGV4dCB9KQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQlyZXR1cm4ge3JvdzogY2FuLmNvcmUuTGlzdChoZWFkLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV0gfSl9CgkJCX0pKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoJCXJldHVybiB0cnVlCgl9LAoJX2dyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7CgkJc3ViID0gY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpCgkJaWYgKHN1YiAmJiBzdWIub25pbXBvcnQgJiYgc3ViLm9uaW1wb3J0Lmdyb3cpIHsKCQkJc3ViLm9uaW1wb3J0Lmdyb3coc3ViLCBtc2csIF9hcmcpCgkJCXJldHVybiB0cnVlCgkJfQoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfQ09ERSwgZnVuY3Rpb24oZGl2KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZGl2LCBodG1sLk1BWF9IRUlHSFQsIDQwMCkKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZGl2LCBbe3RleHQ6IF9hcmd9XSkKCQkJZGl2LnNjcm9sbEJ5KDAsIDEwMDAwKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIF9hcmcpIH0KCQlyZXR1cm4gdHJ1ZQoJfSwKCV9vcGVuOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgewoJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBjYW4uVXBkYXRlKCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWwoJCSLliLfmlrDmlbDmja4iLCAi5YiH5o2i5YWo5bGPIiwgIuWFseS6q+W3peWFtyIsICLmiZPlvIDpk77mjqUiLCAi55Sf5oiQ6ZO+5o6lIiwgIueUn+aIkOiEmuacrCIsICLnlJ/miJDlm77niYciLCBbCgkJCSLlhbblroMiLCAi5Yi35paw6aG16Z2iIiwgIuS/neWtmOWPguaVsCIsICLmuIXnqbrlj4LmlbAiLCAi5omp5bGV5Y+C5pWwIiwgIuWkjeWItuaVsOaNriIsICLkuIvovb3mlbDmja4iLCAi5riF56m65pWw5o2uIiwgIuWIoOmZpOmFjee9riIsICLliKDpmaTlt6XlhbciLCLmkYTlg4/lpLQiLAoJCV0sCgldLAoJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBidXR0b25dLmNvbmNhdChjYW4uSW5wdXQoW10sIHRydWUpKSkgfSwKCgki5Yi35paw5pWw5o2uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKHt9LCBjYW4uSW5wdXQoW10sIHRydWUpKSB9LAoJIuWIh+aNouWFqOWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHN1YiA9IGNhbi5fb3V0cHV0c1tjYW4uX291dHB1dHMubGVuZ3RoLTFdCgkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBjYW4uX3RhcmdldCwgImZ1bGwiKSkgewoJCQl2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LShjYW4uX3N0YXR1cy5pbm5lclRleHQ/IDI6IDEpKmh0bWwuQUNUSU9OX0hFSUdIVDsgY2FuLnVzZXIuaXNNb2JpbGUgJiYgKGhlaWdodCAtPSAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJY2FuLl9tb2RlX2JhayA9IGNhbi5Nb2RlKCksIGNhbi5faGVpZ2h0X2JhayA9IHN1Yi5Db25mSGVpZ2h0KCksIGNhbi5fd2lkdGhfYmFrID0gc3ViLkNvbmZXaWR0aCgpCgkJCXN1Yi5Nb2RlKCJmdWxsIiksIGNhbi5Nb2RlKCJmdWxsIiksIGNhbi5Db25mSGVpZ2h0KGhlaWdodCksIGNhbi5Db25mV2lkdGgod2luZG93LmlubmVyV2lkdGgpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBzdWIuQ29uZkhlaWdodChoZWlnaHQpLCBodG1sLk1JTl9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aW5kb3cuaW5uZXJXaWR0aCkpCgkJfSBlbHNlIHsKCQkJY2FuLk1vZGUoY2FuLl9tb2RlX2Jha3x8IiIpLCBjYW4uQ29uZkhlaWdodChjYW4uX2hlaWdodF9iYWspLCBjYW4uQ29uZldpZHRoKGNhbi5fd2lkdGhfYmFrKQoJCQlzdWIuTW9kZShjYW4uX21vZGVfYmFrfHwiIiksIHN1Yi5Db25mSGVpZ2h0KGNhbi5faGVpZ2h0X2JhayksIHN1Yi5Db25mV2lkdGgoY2FuLl93aWR0aF9iYWspCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCAiIiwgaHRtbC5NSU5fV0lEVEgsICIiKQoJCX0KCQljYW4uY29yZS5DYWxsRnVuYyhbc3ViLCBjaGF0Lk9OSU1QT1JULCBodG1sLkxBWU9VVF0sIHtjYW46IHN1Yn0pCgl9LAoJIuWFseS6q+W3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IG1ldGEubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgbWV0YS5pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KGNhbi5JbnB1dChbXSwgdHJ1ZSkpLAoJCV0pCgl9LAoJIuaJk+W8gOmTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpLCBhcmdzID0gY2FuLk9wdGlvbigpOyBhcmdzLnJpdmVyID0gIiIsIGFyZ3Muc3Rvcm0gPSAiIgoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi51c2VyLmlzV2VpWGluPyBjYW4udXNlci5qdW1wcyhjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKTogY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKQoJfSwKCSLnlJ/miJDpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKSwgYXJncyA9IGNhbi5PcHRpb24oKQoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbXSwgW21kYi5MSU5LLCBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncykpXSkKCX0sCgki55Sf5oiQ6ISa5pysIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgY29uZiA9IGNhbi5Db25mKCkKCQl2YXIgYXJncyA9IGNhbi5JbnB1dCgiIiwgdHJ1ZSkuam9pbihpY2UuU1ApLCBsaXN0ID0gWwoJCQkiZXhwb3J0IGN0eF9kZXY9Iitsb2NhdGlvbi5vcmlnaW4rIjsgY3R4X3RlbXA9JChta3RlbXApOyBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCAkY3R4X2RldjsiKyIgc291cmNlICRjdHhfdGVtcCAiKyhjb25mLmluZGV4fHwiIikraWNlLlNQK2FyZ3MsCgkJCSJpc2hfc3lzX2Rldl9ydW5fY29tbWFuZCAiK2FyZ3MsICJpc2hfc3lzX2Rldl9ydW5fYWN0aW9uIiwgImlzaF9zeXNfZGV2X3J1bl9zb3VyY2UiLAoJCV0KCQljYW4udXNlci50b2FzdFNjcmlwdChjYW4sICc8ZGl2IGNsYXNzPSJzdG9yeSIgZGF0YS10eXBlPSJzcGFyayIsIGRhdGEtbmFtZT0ic2hlbGwiPicrCgkJCSc8bGFiZWw+JCA8L2xhYmVsPicrJzxzcGFuPicrbGlzdC5qb2luKCI8L3NwYW4+PGJyLz48bGFiZWw+JCA8L2xhYmVsPjxzcGFuPiIpKyc8L3NwYW4+JysnPC9kaXY+JywgY29uZi5pbmRleCtpY2UuU1ArYXJncykKCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGxpc3RbMF0pCgl9LAoJIueUn+aIkOWbvueJhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLl9uYW1lKSB9LAoKCSLliLfmlrDpobXpnaIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4uX291dHB1dHMsICItMSIpCgkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgIl9pbml0Il0sIHtjYW46IHN1YiwgbXNnOiBzdWIuX21zZywgY2I6IGZ1bmN0aW9uKG1zZykge30sIHRhcmdldDogY2FuLl9vdXRwdXR9KQoJfSwKCSLkv53lrZjlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5L+d5a2Y5Y+C5pWwIl0pIH0sCgki5riF56m65Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9vcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlID0gIiIgfSkgfSwKCSLmianlsZXlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX2FjdGlvbikgfSwKCSLlpI3liLbmlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbil8fGNhbi5vbmV4cG9ydC5ib2FyZChjYW4pKSB9LAoJIuS4i+i9veaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiZmlsZW5hbWUiLCB2YWx1ZTogbWV0YS5uYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbiksIGxpc3RbMF0sIG5mcy5DU1YpfHxjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjYW4ub25leHBvcnQuYm9hcmQoY2FuKSwgbWV0YS5uYW1lLCBuZnMuVFhUKQoJCX0pCgl9LAoJIua4heepuuaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki5Yig6Zmk5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaTphY3nva4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJjb25maWciLCBbInJlc2V0Il0pIH0sCgki5biu5Yqp5paH5qGjIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiaGVscCIpIH0sCgoJIuaJk+WMhemhtemdoiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJvbndlYnBhY2siLCBjYW4ucmVxdWVzdChldmVudCkpIH0sCgoJIuaRhOWDj+WktCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgY29uc3RyYWludHMgPSB7YXVkaW86IGZhbHNlLCB2aWRlbzoge3dpZHRoOiAyMDAsIGhlaWdodDogMjAwfX0KCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBjdHguQUNUSU9OfSwge3ZpZXc6ICJjYXB0dXJlIiwgbGlzdDogW3t0eXBlOiAidmlkZW8iLCBfaW5pdDogZnVuY3Rpb24oaXRlbSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKCQkJCWl0ZW0uc3JjT2JqZWN0ID0gc3RyZWFtLCBpdGVtLm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbihlKSB7CgkJCQkJaXRlbS5wbGF5KCkKCQkJCX0sIHVpLnN0cmVhbSA9IHN0cmVhbQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpOyB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsi5YWz6ZetIiwgIuaKk+aLjSJdLCB1aS5hY3Rpb24sIHsKCQkJIuaKk+aLjSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3t0eXBlOiAiY2FudmFzIiwgd2lkdGg6IHVpLnZpZGVvLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHVpLnZpZGVvLm9mZnNldEhlaWdodH1dKS5maXJzdAoJCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3tpbWc6IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpLCBzdHlsZToge3dpZHRoOiB1aS52aWRlby5vZmZzZXRXaWR0aCwgaGVpZ2h0OiB1aS52aWRlby5vZmZzZXRIZWlnaHR9fV0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW52YXMpCgkJCX0sCgkJCSLlhbPpl60iOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuTGlzdCh1aS5zdHJlYW0uZ2V0VHJhY2tzKCksIGZ1bmN0aW9uKHRyYWNrKSB7IHRyYWNrLnN0b3AoKSB9KQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuYWN0aW9uKQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkudmlkZW8pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5jYXB0dXJlKQoJCQl9LAoJCX0pCgl9LAoKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSB9LAoJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmlzRnVsbE1vZGUoKSkgewoJCQljYW4ub25hY3Rpb25bIuWIh+aNouWFqOWxjyJdKGV2ZW50LCBjYW4pCgkJfSBlbHNlIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl90YXJnZXQpCgkJfQoJfSwKCXVwbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci51cGxvYWQoZXZlbnQsIGNhbikgfSwKCWFjdGlvbnM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fYWN0aW9uKSB9LAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgbWRiLk5FWFQsIGNhbi5TdGF0dXMobWRiLlRPVEFMKXx8MCwgY2FuLk9wdGlvbihtZGIuTElNSVQpfHxjYW4uQWN0aW9uKG1kYi5MSU1JVCl8fCIiLCBjYW4uT3B0aW9uKG1kYi5PRkZFTkQpfHxjYW4uQWN0aW9uKG1kYi5PRkZFTkQpfHwiIl0pIH0sCglwcmV2OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBtZGIuUFJFViwgY2FuLlN0YXR1cyhtZGIuVE9UQUwpfHwwLCBjYW4uT3B0aW9uKG1kYi5MSU1JVCl8fGNhbi5BY3Rpb24obWRiLkxJTUlUKXx8IiIsIGNhbi5PcHRpb24obWRiLk9GRkVORCl8fGNhbi5BY3Rpb24obWRiLk9GRkVORCl8fCIiXSkgfSwKCWNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdmFsdWUsIGNiKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGlucHV0KSB7CgkJCWlmIChpbnB1dC5uYW1lID09IG5hbWUgJiYgdmFsdWUgIT0gaW5wdXQudmFsdWUpIHsgaW5wdXQudmFsdWUgPSB2YWx1ZQoJCQkJdmFyIGRhdGEgPSBpbnB1dC5kYXRhc2V0fHx7fTsgY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KCksIGNiKQoJCQkJcmV0dXJuIGlucHV0CgkJCX0KCQl9KQoJfSwKCglvcGVuTG9jYXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuYWdlbnQub3BlbkxvY2F0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSkgfSwKCWdldExvY2F0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihkYXRhKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBkYXRhKQoJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVCwgImxhdGl0dWRlIiwgImxvbmdpdHVkZSJdLCBmdW5jdGlvbihhcmdzKSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MpCgkJCX0pCgkJfSkKCX0sCglnZXRDbGlwYm9hcmREYXRhOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQlmdW5jdGlvbiBhZGQodGV4dCkgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtjYW4uYmFzZS5QYXJzZUpTT04odGV4dCldKSB9CgkJbmF2aWdhdG9yLmNsaXBib2FyZD8gbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4oYWRkKS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVycikgfSk6CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogbWRiLlRFWFR9XSwgZnVuY3Rpb24obGlzdCkgeyBhZGQobGlzdFswXSkgfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXRhYmxlOiBmdW5jdGlvbihjYW4pIHsgdmFyIG1zZyA9IGNhbi5fbXNnOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgcmVzID0gW21zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZC5qb2luKGljZS5GUyldOyBtc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgsIGFycmF5KSB7CgkJCXJlcy5wdXNoKGNhbi5jb3JlLkl0ZW0obGluZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gdmFsdWUgfSkuam9pbihpY2UuRlMpKQoJCX0pCgkJcmV0dXJuIHJlcy5qb2luKGljZS5OTCkKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuKSB7IHZhciBtc2cgPSBjYW4uX21zZzsgcmV0dXJuIG1zZy5SZXN1bHQoKSB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vc3RvcnkvZm9ybS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAiZm9ybSIpCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAibmFtZSIpCgkJbXNnLlB1c2goInZhbHVlIiwgImhhcnZleXNoYW8iKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAia2V5IikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAiYWdlIikKCQltc2cuUHVzaCgidmFsdWUiLCAiMTgiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAic2VsZWN0IikKCQltc2cuUHVzaCgibmFtZSIsICJtYWxlIikKCQltc2cuUHVzaCgidmFsdWUiLCAibWFsZSxmZW1hbGUiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dGFyZWEiKQoJCW1zZy5QdXNoKCJuYW1lIiwgImludHJvIikKCQltc2cuUHVzaCgidmFsdWUiLCAicHJvZ3JhbSIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJidXR0b24iKQoJCW1zZy5QdXNoKCJuYW1lIiwgInN1Ym1pdCIpCgkJbXNnLlB1c2goInZhbHVlIiwgIuaPkOS6pCIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQl2YXIgYWN0aW9uID0gIiI7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCXN3aXRjaCAodmFsdWUudHlwZSkgewoJCQkJY2FzZSBodG1sLkJVVFRPTjogYWN0aW9uID0gYWN0aW9ufHx2YWx1ZS5uYW1lCgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuSU5QVVQsIHN0eWxlOiB7d2lkdGg6IChjYW4uQ29uZldpZHRoKCktOTApLzJ9LCBkYXRhOiB7dHlwZTogdmFsdWUudHlwZSwgdmFsdWU6IHZhbHVlLnZhbHVlfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCXZhciBhcmdzID0gW2N0eC5BQ1RJT04sIGFjdGlvbl0KCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgIi5hcmdzIiwgZnVuY3Rpb24oaXRlbSkgeyBhcmdzLnB1c2goaXRlbS5uYW1lLCBpdGVtLnZhbHVlKX0pCgkJCQkJCQljYW4ucnVuKGV2ZW50LCBhcmdzKQoJCQkJCQl9fV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlNFTEVDVDoKCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbCgkJCQkJCXt2aWV3OiBbImxhYmVsIl0sIGxpc3Q6IFt7dGV4dDogdmFsdWUubmFtZX1dfSwKCQkJCQkJe3ZpZXc6IFsiaW5wdXQiXSwgbGlzdDogW3t0eXBlOiBodG1sLlNFTEVDVCwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LAoJCQkJCQkJZGF0YTogdmFsdWUsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodmFsdWUudmFsdWUpLCBmdW5jdGlvbih2KSB7IHJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIG5hbWU6IHYsIHZhbHVlOiB2LCBpbm5lcjogdn0gfSkgfV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlRFWFRBUkVBOgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6ICJpbnB1dCIsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQl9CgkJfSkKCX0sCn0sIFsiIl0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9qc29uLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsICJqc29uIikKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25pbXBvcnQuc2hvdyhjYW4sIGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCksIHt9KSwgdGFyZ2V0KQoJfSwKCXNob3c6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJZnVuY3Rpb24gc2hvdyhkYXRhLCB0YXJnZXQsIGluZGV4LCB0b3RhbCkgeyB2YXIgbGlzdAoJCQlzd2l0Y2ggKHR5cGVvZiBkYXRhKSB7CgkJCQljYXNlIGxhbmcuT0JKRUNUOgoJCQkJCWlmIChkYXRhID09IG51bGwpIHsKCQkJCQkJbGlzdCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiAibnVsbCJ9XSkuaXRlbQoJCQkJCQlicmVhawoJCQkJCX0KCQkJCQlmdW5jdGlvbiB3cmFwKGJlZ2luLCBlbmQsIGFkZCwgY2IpIHsKCQkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IGJlZ2lufV0pCgkJCQkJCWFkZCAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWyIuLi4iLCBodG1sLlNQQU4sICJub25jZSJdfV0pLCBjYigpCgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBlbmR9XSkKCQkJCQl9CgkJCQkJZnVuY3Rpb24gdG9nZ2xlKGxpc3QpIHsgbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCkgfQoJCQkJCWZ1bmN0aW9uIF9pdGVtKCkgewoJCQkJCQlsaXN0ID0gbGlzdCB8fCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5MSVNUfV0pLmxpc3QKCQkJCQkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIGxpc3QsIFt7dmlldzogaHRtbC5JVEVNfV0pLml0ZW0KCQkJCQl9CgoJCQkJCWlmIChjYW4uYmFzZS5pc0FycmF5KGRhdGEpKSB7IC8vIOaVsOe7hAoJCQkJCQl3cmFwKCJbIiwgIl0iLCBkYXRhLmxlbmd0aCA+IDAsIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5MaXN0KGRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgaXRlbSA9IF9pdGVtKCkKCQkJCQkJCXNob3codmFsdWUsIGl0ZW0sIGluZGV4LCBkYXRhLmxlbmd0aCkKCQkJCQkJfSkgfSkKCQkJCQl9IGVsc2UgeyAvLyDlr7nosaEKCQkJCQkJdmFyIGxlbmd0aCA9IGNhbi5jb3JlLkl0ZW0oZGF0YSkubGVuZ3RoLCBjb3VudCA9IDAKCQkJCQkJd3JhcCgieyIsICJ9IiwgbGVuZ3RoID4gMCwgZnVuY3Rpb24oKSB7IGNhbi5jb3JlLkl0ZW0oZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB2YXIgaXRlbSA9IF9pdGVtKCkKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGl0ZW0sIFt7dGV4dDogWyciJytrZXkrJyInLCBodG1sLlNQQU4sICJrZXkiXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdG9nZ2xlKHN1YikgfX0sIHt0ZXh0OiAnOiAnfV0pCgkJCQkJCQl2YXIgc3ViID0gc2hvdyh2YWx1ZSwgaXRlbSwgY291bnQrKywgbGVuZ3RoKQoJCQkJCQl9KSB9KQoJCQkJCX0KCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLlNUUklORzogLyog5a2X5LiyICovIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbJyInK2RhdGErJyInLCBodG1sLlNQQU4sIGxhbmcuU1RSSU5HXX1dKTsgYnJlYWsKCQkJCWRlZmF1bHQ6IC8qIOWFtuWugyAqLyBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWycnK2RhdGErJycsIGh0bWwuU1BBTiwgImNvbnN0Il19XSkKCQkJfQoJCQkoaW5kZXggPCB0b3RhbC0xKSAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogaWNlLkZTfV0pCgkJCXJldHVybiBsaXN0CgkJfTsgc2hvdyhkYXRhLCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5JVEVNfV0pLml0ZW0sIDAsIDApCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsi5bGV5byAIiwgIuaKmOWPoCIsICLlpI3liLYiXSwKCSLlsZXlvIAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9MSVNUXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCwgdHJ1ZSkKCQl9KQoJfSwKCSLmipjlj6AiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9MSVNUXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgbGlzdCkKCQl9KQoJfSwKCSLlpI3liLYiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4uX21zZy5SZXN1bHQoKSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9tZWRpYS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQp9fSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbIuaJk+W8gOWxj+W5lSIsICLmiZPlvIDmkYTlg48iLCAi5omT5byA5b2V6Z+zIl0sCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGNiKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogaHRtbC5BQ1RJT059LCB7dmlldzogaHRtbC5PVVRQVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNiKGl0ZW0sIHVpKSB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIHsKCQkJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uY29yZS5MaXN0KHVpLnN0cmVhbS5nZXRUcmFja3MoKSwgZnVuY3Rpb24odHJhY2spIHsgdHJhY2suc3RvcCgpIH0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5hY3Rpb24pLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5vdXRwdXQpCgkJCX0sCgkJCSLmipPmi40iOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIGNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm91dHB1dCwgW3t0eXBlOiBodG1sLkNBTlZBU31dKS5maXJzdDsgY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkub3V0cHV0LCBbe2ltZzogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyksIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKX19XSkKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCQkJfSwKCQkJIuW9leWItiI6IGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmJsb2JzID0gW10KCQkJCXVpLm1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcih1aS5zdHJlYW0sIHttaW1lVHlwZTogJ3ZpZGVvL3dlYm0nfSkKCQkJCXVpLm1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGUpID0+IHsgdWkuYmxvYnMucHVzaChlLmRhdGEpLCBjYW4ubWlzYy5Mb2codWkuYmxvYnMubGVuZ3RoKSB9CgkJCQl1aS5tZWRpYVJlY29yZGVyLnN0YXJ0KDEwMCkKCQkJfSwKCQkJIuWbnuaUviI6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBibG9icyA9IHVpLmJsb2JzOyB1aS5ibG9icyA9IFtdCgkJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5vdXRwdXQsIFt7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfX1dKS52aWRlbwoJCQkJdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihibG9icywge3R5cGUgOiAndmlkZW8vd2VibSd9KSksIHZpZGVvLnBsYXkoKQoJCQl9LAoJCQki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYih1aS5ibG9icywge3R5cGU6ICd2aWRlby93ZWJtJ30pKSwgJ3JlY29yZC53ZWJtJykKCQkJfSwKCQl9KQoJfSwKCSLmiZPlvIDlsY/luZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9uYWN0aW9uLl9hY3Rpb24oY2FuLCBmdW5jdGlvbihpdGVtLCB1aSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7IHVpLnN0cmVhbSA9IHN0cmVhbQoJCQkJaXRlbS5zcmNPYmplY3QgPSBzdHJlYW0sIGl0ZW0ub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsgaXRlbS5wbGF5KCkgfQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVyci5uYW1lICsgIjogIiArIGVyci5tZXNzYWdlKSB9KQoJCX0pCgl9LAoJIuaJk+W8gOaRhOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25hY3Rpb24uX2FjdGlvbihjYW4sIGZ1bmN0aW9uKGl0ZW0sIHVpKSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHt2aWRlbzoge3dpZHRoOiBjYW4uQ29uZldpZHRoKCl9fSkudGhlbihmdW5jdGlvbihzdHJlYW0pIHsgdWkuc3RyZWFtID0gc3RyZWFtCgkJCQlpdGVtLnNyY09iamVjdCA9IHN0cmVhbSwgaXRlbS5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyBpdGVtLnBsYXkoKSB9CgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9wYXJzZS5qcyIKVm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBsaXN0OiBbInsiLCAifSIsIGh0bWwuSEVBRCwgaHRtbC5MRUZULCBodG1sLk1BSU4sIGh0bWwuRk9PVF0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgaGVpZ2h0KSB7IHZhciBzdGFjayA9IFt7X2RlZXA6IC0xLCBsaXN0OiBbXX1dLCBmaW5pc2ggPSBmYWxzZQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodGV4dCwgaWNlLk5MLCBpY2UuTkwsIGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgaWYgKGxpbmUgPT0gIiIgfHwgZmluaXNoKSB7IHJldHVybiB9CgkJCXZhciBkZWVwID0gMDsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7IGlmIChsaW5lW2ldID09IGljZS5TUCkgeyBkZWVwKysgfSBlbHNlIGlmIChsaW5lW2ldID09IGljZS5UQikgeyBkZWVwICs9IDQgfSBlbHNlIHsgYnJlYWsgfSB9CgkJCWZvciAodmFyIGkgPSBzdGFjay5sZW5ndGgtMTsgaSA+IDA7IGktLSkgeyBpZiAoZGVlcCA8PSBzdGFja1tpXS5fZGVlcCkgeyBzdGFjay5wb3AoKSB9IH0KCgkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpOyBpZiAobHNbMF0gPT0gInJldHVybiAiKSB7IHJldHVybiBmaW5pc2ggPSB0cnVlIH0KCQkJdmFyIGl0ZW0gPSB7X2RlZXA6IGRlZXAsIGxpc3Q6IFtdfTsgdmFyIGxpc3QgPSBzdGFja1tzdGFjay5sZW5ndGgtMV07IGxpc3QubGlzdC5wdXNoKGl0ZW0pOyBpZiAoZGVlcCA+IGxpc3QuX2RlZXApIHsgc3RhY2sucHVzaChpdGVtKSB9CgkJCWNhbi5vbmFwcGVuZC5saXN0LmluZGV4T2YobHNbMF0pID4gLTEgfHwgY2FuLm9uYXBwZW5kW2xzWzBdXT8gaXRlbS50eXBlID0gbHNbMF06IGl0ZW0ubmFtZSA9IGxzWzBdCgkJCWZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgbHNbaV0sIGxzW2krMV0pIH0KCQl9KQoJCXJldHVybiB7dHlwZTogbmFtZSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKXx8d2luZG93LmlubmVySGVpZ2h0fSwgbGlzdDogc3RhY2tbMF0ubGlzdH0KCX0sCglwYXJzZTogZnVuY3Rpb24oY2FuLCBsaXN0LCB0YXJnZXQsIGtleXMsIGRhdGEsIHR5cGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dCwgZGF0YSA9IGRhdGF8fHt9CgkJaWYgKCFsaXN0KSB7IHJldHVybiB9IGVsc2UgaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24obWV0YSwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEsIHRhcmdldCwga2V5cywgZGF0YSwgdHlwZSkgfSkKCgkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc1N0cmluZyhsaXN0KSkgewoJCQl2YXIgbHMgPSBjYW4uY29yZS5TcGxpdChsaXN0LCAiIiwgIjo9QCIpOyBpZiAobHMubGVuZ3RoID09IDEpIHsKCQkJCXZhciBtZXRhID0gdHlwZT8ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfToge3R5cGU6IGxzWzBdfQoJCQl9IGVsc2UgewoJCQkJdmFyIG1ldGEgPSB7bmFtZTogbHNbMF19OyBmb3IgKHZhciBpID0gMTsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IHN3aXRjaCAobHNbaV0pIHsKCQkJCQljYXNlICJAIjogbWV0YS5hY3Rpb24gPSBsc1tpKzFdOyBicmVhawoJCQkJCWNhc2UgIj0iOiBtZXRhLnZhbHVlID0gbHNbaSsxXTsgYnJlYWsKCQkJCQljYXNlICI6IjogbWV0YS50eXBlID0gbHNbaSsxXTsgYnJlYWsKCQkJCX0gfQoJCQl9CgoJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QobGlzdCkpIHsgdmFyIG1ldGEgPSBsaXN0IH0KCgkJdmFyIGl0ZW0gPSB7dmlldzogbWV0YS50eXBlfTsgc3dpdGNoIChtZXRhLnR5cGUpIHsKCQkJY2FzZSBodG1sLkhFQUQ6IG1ldGEuc3VidHlwZSA9IGh0bWwuTUVOVQoJCQkJbWV0YS5pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGh0bWwuTEFZT1VUKSwgZGF0YS5oZWFkID0gdGFyZ2V0IH0KCQkJCWJyZWFrCgkJCWNhc2UgInsiOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTEVGVCAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTEVGVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5JVEVNCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmxlZnQgPSB0YXJnZXQKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSkKCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgIn0iOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTUFJTiAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTUFJTjoKCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSwgZGF0YS5tYWluPyAxMDogMTAwKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgd2lkdGggPSB0YXJnZXQucGFyZW50Tm9kZS5vZmZzZXRXaWR0aAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgaHRtbC5ESVZfTEFZT1VUX0xFRlQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQl3aWR0aCAtPSBpdGVtLm9mZnNldFdpZHRoIC8vIOWuveW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQkJCX0sIGRhdGEubWFpbj8gMTA6IDEwMCkKCgkJCQkJaWYgKCFkYXRhLm1haW4pIHsgZGF0YS5tYWluID0gdGFyZ2V0CgkJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBkYXRhLm1haW5faW5pdCAmJiBkYXRhLm1haW5faW5pdCgpIH0sIDMwMCkKCQkJCQl9CgkJCQl9CgkJCQlicmVhawoJCQljYXNlIGh0bWwuRk9PVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5NRU5VCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmZvb3QgPSB0YXJnZXQgfQoJCQkJYnJlYWsKCQkJZGVmYXVsdDogdmFyIGNiID0gY2FuLm9uYXBwZW5kW21ldGEudHlwZV07IGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobWV0YS5zdHlsZSkpIHsgaXRlbS5zdHlsZSA9IG1ldGEuc3R5bGUgfQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhtZXRhLnN0eWxlKSkgeyBpdGVtLmNsYXNzTmFtZSA9IG1ldGEuc3R5bGUgfQoKCQltZXRhLmtleXMgPSBtZXRhLmtleXN8fGNhbi5jb3JlLktleXMoa2V5cywgbWV0YS5uYW1lfHxtZXRhLnR5cGUpIAoJCXZhciBjYiA9IGNhbi5vbmFwcGVuZFt0eXBlXTsgIWNhbi5vbmFwcGVuZFttZXRhLnR5cGVdICYmIGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCWl0ZW0uX2luaXQgPSBpdGVtLl9pbml0fHxmdW5jdGlvbih0YXJnZXQpIHsgbWV0YS5saXN0ICYmIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEubGlzdCwgdGFyZ2V0LCBtZXRhLmtleXMsIGRhdGEsIG1ldGEuc3VidHlwZXx8dHlwZSkgfQoJCWl0ZW0udGFyZ2V0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaXRlbV0pLmZpcnN0OyBtZXRhLmluaXQgJiYgbWV0YS5pbml0KGl0ZW0udGFyZ2V0KQoJCWNhbi5jb3JlLkl0ZW1DQihtZXRhLCBmdW5jdGlvbihrZXksIGNiKSB7IGl0ZW0udGFyZ2V0W2tleV0gPSBjYW4uYmFzZS5pc0Z1bmMoY2IpPyBjYjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNiLCBjYW4ucmVxdWVzdChldmVudCwgbWV0YSkpIH0gfSkKCX0sCgl1c2VybmFtZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiBbYWFhLlVTRVJOQU1FLCBodG1sLkRJVl0sIGxpc3Q6IFt7dmlldzogW2h0bWwuTkFNRSwgaHRtbC5ESVYsIGNhbi51c2VyLmluZm8udXNlcm5pY2tdfSwge3ZpZXc6IFtodG1sLklDT04sIGh0bWwuRElWXSwgbGlzdDogW3tpbWc6IGNhbi51c2VyLmluZm8uYXZhdGFyfV19XX0pCgl9LAoJbWVudTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIG1ldGEubGlzdCAmJiBtZXRhLmxpc3QubGVuZ3RoID4gMD8ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIHt9LCBjYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5uYW1lIH0pLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgYnV0dG9uKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IGJ1dHRvbn0pKQoJCQl9KQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fToge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgbWV0YS5uYW1lKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IG1ldGEubmFtZX0pKQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fSkKCX0sCglpdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCwgZGF0YSkgeyBpdGVtLnZpZXcgPSBpdGVtLnZpZXd8fGh0bWwuTElTVAoJCWlmIChkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaCkgPT0gIiMiK21ldGEua2V5cykgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoJCWlmIChtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAhbG9jYXRpb24uaGFzaCkgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiAic29tZSIsIGxpc3Q6IFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIG1ldGEubmFtZXx8bWV0YV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCX19LCB7dmlldzogaHRtbC5MSVNULCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IG1ldGEubGlzdCAmJiBjYW4ub25hcHBlbmQucGFyc2UoY2FuLCBtZXRhLmxpc3QsIHRhcmdldCwgbWV0YS5rZXlzLCBkYXRhLCBodG1sLklURU0pIH19XSwgX2luaXQ6IGZ1bmN0aW9uKCkge319KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0KSB7CgkJaXRlbS5saXN0ID0gW3t2aWV3OiAibmFtZSJ9LCB7dmlldzogaHRtbC5QQUdFfV0sIGl0ZW0uX2luaXQgPSBmdW5jdGlvbihfdGFyZ2V0LCB1aSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5wYWdlLCBbe3ZpZXc6IGh0bWwuSU5QVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5JTlBVVCwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIF90YXJnZXQsIFtodG1sLkRJVl9QQUdFLCBodG1sLkRJVl9JVEVNXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLkhJREUsIGl0ZW0uaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA9PSAtMSkKCQkJCX0pCgkJCX19XX1dKQoJCQljYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm5hbWUsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubmFtZXx8aXRlbV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIF90YXJnZXQsIFtbaHRtbC5ESVZfUEFHRSwgaHRtbC5ESVZfTElTVF1dLCBpbmRleCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQkJdWkucGFnZS5zY3JvbGxUbygwLCAwKQoJCQkJfX1dKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkucGFnZSwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLCBodG1sLlNFTEVDVCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQl9fSwge3ZpZXc6IFtodG1sLkxJU1RdLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgaXRlbS5saXN0LCB0YXJnZXQsIGNhbi5jb3JlLktleXMobWV0YS5rZXlzLCBpdGVtLm5hbWUpLCBkYXRhLCBodG1sLklURU0pCgkJCQl9fV0pCgkJCX0pCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wYWdlLCBodG1sLkhFSUdIVCwgaGVpZ2h0LTEwLShtZXRhLnN0eWxlPyAwOiB1aS5uYW1lLm9mZnNldEhlaWdodCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIF90YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQtMTApCgkJCX0pLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNKVswXS5jbGljaygpCgkJfQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1ldGEsIGRhdGEpIHsgdmFyIHRhcmdldCA9IGRhdGEubWFpbgoJCWlmICghbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCXZhciB1cmwgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sICJwb2QiKSwgY21kOiBtZXRhLmluZGV4fSkKCQlpZiAobWV0YS5hY3Rpb24gPT0gInB1c2giKSB7IHJldHVybiBjYW4udXNlci5qdW1wcyh1cmwpIH0KCQlpZiAobWV0YS5hY3Rpb24gPT0gIm9wZW4iKSB7IHJldHVybiBjYW4udXNlci5vcGVuKHVybCkgfQoKCQlsb2NhdGlvbi5oYXNoID0gbWV0YS5rZXlzCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0YS5rZXlzIH0sIHRhcmdldCkpIHsgcmV0dXJuIH0KCgkJaWYgKGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuWk1MIHx8IGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuSU1MKSB7CgkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JRlJBTUUsIHNyYzogIi9jaGF0L2NtZC8iK21ldGEuaW5kZXgsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCwgd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aH1dKQoJCX0KCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogbWV0YS5pbmRleCwgYXJnczogY2FuLmJhc2UuT2JqKG1ldGEuYXJncyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleHx8bWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLkNvbmZIZWlnaHQodGFyZ2V0Lm9mZnNldEhlaWdodC0zKmh0bWwuQUNUSU9OX0hFSUdIVC02Kmh0bWwuUExVR0lOX01BUkdJTiksIHN1Yi5Db25mV2lkdGgodGFyZ2V0Lm9mZnNldFdpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9waWUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQl2YXIgY29sb3IgPSBbY2xpLlJFRCwgY2xpLllFTExPVywgY2xpLkdSRUVOLCBjbGkuQ1lBTiwgY2xpLkJMVUUsIGNsaS5QVVJQTEVdCgkJdmFyIGNvbG9yID0gWyIjMzMwMEZGIiwgIiMyMTk2RjMiLCAiIzRDQUY1MCIsICIjQ0REQzM5IiwgIiNGRkVCM0IiLCAiIzlDMjdCMCIsICIjNzk1NTQ4IiwgIiM2MDdEOEIiLCAiI0NDMzNGRiJdCgkJdmFyIGhlaWdodCA9IG1zZy5PcHRpb24oaHRtbC5IRUlHSFQpfHxjYW4uQ29uZkhlaWdodCgpCgoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgImRyYXciKQoJCWNhbi5yZXF1aXJlKFsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLCAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgbXNnKSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbXS5jb25jYXQobXNnLmFwcGVuZCwgWyJ3ZWlnaHQiXSkpCgkJCXZhciBtYXJnaW4gPSBoZWlnaHQvOCwgciA9IGhlaWdodC8yLW1hcmdpbjsgY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgMioocittYXJnaW4pKSwgY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIDIqKHIrbWFyZ2luKSkKCQkJY2FuLm9uaW1wb3J0Ll9kcmF3KGNhbiwgbXNnLCBjYW4uQ29uZihtZGIuRklFTEQpLCBjb2xvciwgcittYXJnaW4sIHIrbWFyZ2luLCByLCBtYXJnaW4sIDApCgoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpLWhlaWdodCkKCQkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QsIHRydWUpCgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgY2FuLnVpLnByb2plY3QpLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7CgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0ciwge29ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25pbXBvcnQuX2RyYXcoY2FuLCBtc2csIGNhbi5Db25mKG1kYi5GSUVMRCksIGNvbG9yLCByK21hcmdpbiwgcittYXJnaW4sIHIsIG1hcmdpbiwgaW5kZXgtMSkKCQkJCX19KQoJCQl9KQoJCX0pCgl9LAoJX2RyYXc6IGZ1bmN0aW9uKGNhbiwgbXNnLCBmaWVsZCwgY29sb3IsIHgsIHksIHIsIG1hcmdpbiwgd2hpY2gpIHsgZmllbGQgPSBmaWVsZHx8bWRiLlZBTFVFCgkJZnVuY3Rpb24gcG9zKHgsIHksIHIsIGFuZ2xlKSB7IGFuZ2xlIC09IDkwOyByZXR1cm4gW3ggKyByICogTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSwgeSArIHIgKiBNYXRoLnNpbihhbmdsZSAqIE1hdGguUEkgLyAxODApXSB9CgkJZnVuY3Rpb24gcGllKHgsIHksIHIsIGJlZ2luLCBzcGFuLCBjb2xvciwgY2IpIHsgY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSCwgc3R5bGU6IGtpdC5EaWN0KAoJCQlodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNvbG9yLCBodG1sLkZJTEwsIGNvbG9yLCAiZCIsIGNhbi5iYXNlLmpvaW5zKFsKCQkJCVsiTSIsIHgsIHldLCBbIkwiXS5jb25jYXQocG9zKHgsIHksIHIsIGJlZ2luKSksIFsiQSIsIHIsIHIsICIwIiwgc3Bhbj4xODA/ICIxIjogIjAiLCAiMSJdLmNvbmNhdChwb3MoeCwgeSwgciwgYmVnaW4rc3BhbikpLCBbIloiXQoJCQldLCBpY2UuU1AsIGljZS5GUyksCgkJKSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50KSB9IH0pIH0KCgkJaWYgKHdoaWNoID09IGNhbi5fbGFzdCkgeyByZXR1cm4gfSBjYW4uX2xhc3QgPSB3aGljaAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5zdmcpLCBjYW4uc3ZnLlZhbHVlKG1kYi5DT1VOVCwgMCkKCQl2YXIgdG90YWwgPSAwOyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgdG90YWwgKz0gY2FuLm9uaW1wb3J0Ll9wYXJzZUludChjYW4sIHZhbHVlW2ZpZWxkXSkgfSkKCQl2YXIgYmVnaW4gPSAwOyBtc2dbY2xpLkNPTE9SXSA9IFtdLCBtc2dbIndlaWdodCJdID0gW10sIG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIHNwYW4gPSBjYW4ub25pbXBvcnQuX3BhcnNlSW50KGNhbiwgdmFsdWVbZmllbGRdKS90b3RhbCozNjAKCQkJdmFyIHAgPSBpbmRleD09d2hpY2g/IHBvcyh4LCB5LCBtYXJnaW4sIGJlZ2luK3NwYW4vMik6IFt4LCB5XSwgYyA9IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF0KCgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMSkgewoJCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuQ0lSQ0xFLCBwb2ludDogW3t4OiB4LCB5OiB5fSwge3g6IHgsIHk6IHkrcn1dLCBzdHlsZToge2ZpbGw6IGNvbG9yWzBdfX0pCgkJCX0gZWxzZSB7CgkJCQlwaWUocFswXSwgcFsxXSwgciwgYmVnaW4sIHNwYW4sIGMsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmltcG9ydC5fZHJhdyhjYW4sIG1zZywgZmllbGQsIGNvbG9yLCB4LCB5LCByLCBtYXJnaW4sIGluZGV4KSB9KSwgYmVnaW4gKz0gc3BhbgoJCQl9CgkJCW1zZy5QdXNoKGNsaS5DT0xPUiwgJzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOicrYysnIj4gICAgIDwvc3Bhbj4nKQoJCQltc2cuUHVzaCgid2VpZ2h0IiwgcGFyc2VJbnQoc3BhbioxMDAvMzYwKSsiJSIpCgkJCWlmIChpbmRleCA9PSB3aGljaCkgeyBjYW4uU3RhdHVzKHZhbHVlKSwgY2FuLlN0YXR1cygid2VpZ2h0IiwgcGFyc2VJbnQoc3BhbioxMDAvMzYwKSsiJSIpIH0KCQl9KQoJfSwKCV9wYXJzZUludDogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgeyB2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkKCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgIm1pIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwIH0KCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgImdpIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwMDAwIH0KCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgImciKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAibSIpKSB7IHJldHVybiBwYXJzZUludCh2YWx1ZSkqMTAwMDAwMCB9CgkJcmV0dXJuIHBhcnNlSW50KHZhbHVlKQoJfQp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIF9zaG93OiBmdW5jdGlvbihjYW4pIHt9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3NwaWRlLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyk7IGlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gfQoKCQljYW4uQ29uZkRlZmF1bHQoe3Jvb3Q6ICJpY2UiLCBmaWVsZDogbXNnLmFwcGVuZFswXSwgc3BsaXQ6IGljZS5QU30pCgkJY2FuLmRpcl9yb290ID0gbXNnLk9wdGlvbihuZnMuRElSX1JPT1QpfHxjYW4uQ29uZigicm9vdCIpCgkJY2FuLl90cmVlID0gY2FuLm9uaW1wb3J0Ll90cmVlKGNhbiwgbXNnLlRhYmxlKCksIGNhbi5Db25mKG1kYi5GSUVMRCksIGNhbi5Db25mKGxleC5TUExJVCkpCgkJaWYgKCFjYW4uX3RyZWVbIiJdKSB7IHJldHVybiB9IGNhbi5fdHJlZVsiIl0ubmFtZSA9IGNhbi5Db25mKCJyb290IikKCgkJY2FuLnNpemUgPSBwYXJzZUludChjYW4uQWN0aW9uKCJzaXplIil8fDI0KQoJCWNhbi5tYXJnaW4gPSBwYXJzZUludChjYW4uQWN0aW9uKCJtYXJnaW4iKXx8MzApCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAiZHJhdyIpCgkJY2FuLnJlcXVpcmUoWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQl9KQoJfSwKCV90cmVlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGZpZWxkLCBzcGxpdCkgewoJCXZhciBub2RlID0ge307IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoIWl0ZW1bZmllbGRdKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UudHJpbVByZWZpeChpdGVtW2ZpZWxkXSwgY2FuLmRpcl9yb290K3NwbGl0KS5zcGxpdChzcGxpdCksIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsKCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpfHwiIiwgbmFtZSA9IGFycmF5LnNsaWNlKDAsIGluZGV4KzEpLmpvaW4oc3BsaXQpCgkJCQlpZiAoIXZhbHVlIHx8IG5vZGVbbmFtZV0pIHsgcmV0dXJuIH0KCgkJCQlub2RlW2xhc3RdID0gbm9kZVtsYXN0XXx8e25hbWU6IGxhc3QsIG1ldGE6IHt9LCBsaXN0OiBbXX0KCQkJCW5vZGVbbGFzdF0ubGlzdC5wdXNoKG5vZGVbbmFtZV0gPSB7CgkJCQkJbmFtZTogdmFsdWUrKGluZGV4PT1hcnJheS5sZW5ndGgtMT8gIiI6IHNwbGl0KSwKCQkJCQltZXRhOiBpdGVtLCBsaXN0OiBbXSwgbGFzdDogbm9kZVtsYXN0XSwKCQkJCQlmaWxlOiBpdGVtW2ZpZWxkXXx8aXRlbS5maWxlLCBoaWRlOiB0cnVlLAoJCQkJfSkKCQkJfSkKCQl9KQoJCXJldHVybiBub2RlCgl9LAoJX2hlaWdodDogZnVuY3Rpb24oY2FuLCB0cmVlLCBkZWVwKSB7IGlmICghdHJlZSkgeyByZXR1cm4gMCB9CgkJdHJlZS5kZWVwID0gZGVlcHx8MAoJCWlmICh0cmVlLmxpc3QubGVuZ3RoID09IDAgfHwgdHJlZS5oaWRlKSB7IHJldHVybiB0cmVlLmhlaWdodCA9IDEgfQoKCQl2YXIgaGVpZ2h0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaGVpZ2h0ICs9IGNhbi5vbmltcG9ydC5faGVpZ2h0KGNhbiwgaXRlbSwgKGRlZXB8fDApKzEpCgkJfSkKCQlyZXR1cm4gdHJlZS5oZWlnaHQgPSBoZWlnaHQKCX0sCglfd2lkdGg6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgZGVlcCkgeyBpZiAoIXRyZWUpIHsgcmV0dXJuIDAgfQoJCXRyZWUuZGVlcCA9IGRlZXB8fDAKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA9PSAwIHx8IHRyZWUuaGlkZSkgewoJCQl0cmVlLnZpZXcgPSBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IGh0bWwuVEVYVCwgcG9pbnQ6IFt7eDogMCwgeTogMH1dLCBzdHlsZToge2lubmVyOiB0cmVlLm5hbWV9fSkKCQkJcmV0dXJuIHRyZWUud2lkdGggPSB0cmVlLnZpZXcuVmFsKCJ0ZXh0TGVuZ3RoIikrY2FuLm1hcmdpbgoJCX0KCgkJdmFyIHdpZHRoID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJd2lkdGggKz0gY2FuLm9uaW1wb3J0Ll93aWR0aChjYW4sIGl0ZW0sIChkZWVwfHwwKSsxKQoJCX0pCgkJcmV0dXJuIHRyZWUud2lkdGggPSB3aWR0aAoJfSwKCV9jb2xvcjogZnVuY3Rpb24oY2FuLCB0cmVlKSB7CgkJcmV0dXJuIHRyZWUubWV0YSYmdHJlZS5tZXRhLmNvbG9yIHx8ICh0cmVlLmxpc3QgPT0gMD8gY2xpLlBVUlBMRTogY2xpLllFTExPVykKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBwID0gY2FuLkFjdGlvbihpY2UuVklFVywgY2FuLnN1cC52aWV3fHxjYW4uQWN0aW9uKGljZS5WSUVXKSkKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLnJlcXVlc3QoKSkKCQljYW4uc3ZnLlZhbChodG1sLkZPTlRfU0laRSwgY2FuLkFjdGlvbigic2l6ZSIpKQoJCWNhbi5vbmFjdGlvbltwXShldmVudCwgY2FuLCBwKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnlKjmiLfmk43kvZwiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi5qiq5ZCRIiwgIue6teWQkSJdLCBbInNpemUiLCAyNCwgMzIsIDQ4XSwgWyJtYXJnaW4iLCAzMCwgNTAsIDEwMF0sCgldLAoJc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2l6ZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNpemUiKXx8MzApLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCW1hcmdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFyZ2luID0gcGFyc2VJbnQoY2FuLkFjdGlvbigibWFyZ2luIil8fDMwKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgki5qiq5ZCRIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uaW1wb3J0Ll9oZWlnaHQoY2FuLCBjYW4uX3RyZWVbIiJdKQoJCWNhbi5zdXAudmlldyA9IGJ1dHRvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZykKCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGNhbi5fdHJlZVsiIl0uaGVpZ2h0KmNhbi5tYXJnaW4rMipjYW4ubWFyZ2luKQoJCWNhbi53aWR0aCA9IDAsIGNhbi5vbmFjdGlvbi5fZHJhd19ob3Jpem9udGFsKGNhbiwgY2FuLl90cmVlWyIiXSwgY2FuLm1hcmdpbiwgY2FuLm1hcmdpbikKCQljYW4uc3ZnLlZhbChodG1sLldJRFRILCBjYW4ud2lkdGgrY2FuLm1hcmdpbikKCX0sCgki57q15ZCRIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uaW1wb3J0Ll93aWR0aChjYW4sIGNhbi5fdHJlZVsiIl0pCgkJY2FuLnN1cC52aWV3ID0gYnV0dG9uLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uc3ZnKQoKCQljYW4uc3ZnLlZhbChodG1sLldJRFRILCBjYW4uX3RyZWVbIiJdLndpZHRoKzIqY2FuLm1hcmdpbikKCQljYW4uaGVpZ2h0ID0gMCwgY2FuLm9uYWN0aW9uLl9kcmF3X3ZlcnRpY2FsKGNhbiwgY2FuLl90cmVlWyIiXSwgY2FuLm1hcmdpbiwgY2FuLm1hcmdpbitjYW4ubWFyZ2luKQoJCWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hULCBjYW4uaGVpZ2h0K2Nhbi5tYXJnaW4pCgl9LAoJX2RyYXc6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSwgc3R5bGUpIHsgdmFyIGNvbG9yID0gY2FuLm9uaW1wb3J0Ll9jb2xvcihjYW4sIHRyZWUpCgkJdHJlZS52aWV3ID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBodG1sLlRFWFQsIHBvaW50OiBbe3g6IHgsIHk6IHl9XSwgc3R5bGU6IGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCWh0bWwuU1RST0tFLCBjb2xvciwgaHRtbC5GSUxMLCBjb2xvciwgaHRtbC5URVhUX0FOQ0hPUiwgInN0YXJ0IiwgImlubmVyIiwgdHJlZS5uYW1lfHx0cmVlLmZpbGUsCgkJKSwgc3R5bGUpLCB9KSwgY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgdHJlZS52aWV3LCBjYW4sIHRyZWUpCgl9LAoJX2RyYXdfdmVydGljYWw6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSkgeyB0cmVlLnggPSB4LCB0cmVlLnkgPSB5CgkJY2FuLm9uYWN0aW9uLl9kcmF3KGNhbiwgdHJlZSwgeCt0cmVlLndpZHRoLzIsIHksIGtpdC5EaWN0KGh0bWwuVEVYVF9BTkNIT1IsICJtaWRkbGUiKSkKCgkJdHJlZS5oZWlnaHQgPSBjYW4ubWFyZ2luCgkJaWYgKHkrdHJlZS5oZWlnaHQgPiBjYW4uaGVpZ2h0KSB7IGNhbi5oZWlnaHQgPSB5K3RyZWUuaGVpZ2h0IH0KCQlpZiAodHJlZS5oaWRlKSB7IHJldHVybiB9CgoJCXZhciBvZmZzZXQgPSAwOyBjYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRIMlYsIHBvaW50OiBbCgkJCQl7eDogeCt0cmVlLndpZHRoLzIsIHk6IHkrdHJlZS5oZWlnaHQtY2FuLm1hcmdpbi8yfSwKCQkJCXt4OiB4K29mZnNldCtpdGVtLndpZHRoLzIsIHk6IHkrdHJlZS5oZWlnaHQrY2FuLm1hcmdpbi8yfSwKCQkJXSwgc3R5bGU6IHtzdHJva2U6IGNsaS5DWUFOfX0pCgoJCQljYW4ub25hY3Rpb24uX2RyYXdfdmVydGljYWwoY2FuLCBpdGVtLCB4K29mZnNldCwgeSt0cmVlLmhlaWdodCtjYW4ubWFyZ2luKQoJCQlvZmZzZXQgKz0gaXRlbS53aWR0aAoJCX0pCgl9LAoJX2RyYXdfaG9yaXpvbnRhbDogZnVuY3Rpb24oY2FuLCB0cmVlLCB4LCB5KSB7IHRyZWUueCA9IHgsIHRyZWUueSA9IHkKCQljYW4ub25hY3Rpb24uX2RyYXcoY2FuLCB0cmVlLCB4LCB5K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMiwga2l0LkRpY3QoaHRtbC5URVhUX0FOQ0hPUiwgInN0YXJ0IikpCgoJCXRyZWUud2lkdGggPSB0cmVlLnZpZXcuVmFsKCJ0ZXh0TGVuZ3RoIil8fCh0cmVlLm5hbWV8fCIiKS5sZW5ndGgqMTAKCQlpZiAoeCt0cmVlLndpZHRoID4gY2FuLndpZHRoKSB7IGNhbi53aWR0aCA9IHgrdHJlZS53aWR0aCB9CgkJaWYgKHRyZWUuaGlkZSkgeyByZXR1cm4gfQoKCQl2YXIgb2Zmc2V0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSDJILCBwb2ludDogWwoJCQkJe3g6IHgrdHJlZS53aWR0aCtjYW4ubWFyZ2luLzgsIHk6IHkrdHJlZS5oZWlnaHQqY2FuLm1hcmdpbi8yfSwKCQkJCXt4OiB4K3RyZWUud2lkdGgrY2FuLm1hcmdpbioyLTIqY2FuLm1hcmdpbi84LCB5OiB5K29mZnNldCtpdGVtLmhlaWdodCpjYW4ubWFyZ2luLzJ9CgkJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuQ1lBTn19KQoKCQkJY2FuLm9uYWN0aW9uLl9kcmF3X2hvcml6b250YWwoY2FuLCBpdGVtLCB4K3RyZWUud2lkdGgrMipjYW4ubWFyZ2luLCB5K29mZnNldCkKCQkJb2Zmc2V0ICs9IGl0ZW0uaGVpZ2h0KmNhbi5tYXJnaW4KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0cmVlKSB7IHZhciB5ID0gdHJlZS55K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMgoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5wb3MpLCBjYW4ucG9zID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUkVDVCwgcG9pbnQ6IFsKCQkJe3g6IHRyZWUueC1jYW4ubWFyZ2luLzQsIHk6IHktY2FuLm1hcmdpbi8yfSwge3g6IHRyZWUueCt0cmVlLndpZHRoK2Nhbi5tYXJnaW4vOCwgeTogeStjYW4ubWFyZ2luLzJ9LAoJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuUkVELCBmaWxsOiBodG1sLk5PTkV9fSksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRyZWUpIHsKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA+IDAgfHwgdHJlZS50YWdzIHx8IHRyZWUubmFtZS5lbmRzV2l0aChjYW4uQ29uZihsZXguU1BMSVQpKSkgewoJCQlyZXR1cm4gdHJlZS5oaWRlID0gIXRyZWUuaGlkZSwgY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXShldmVudCwgY2FuKQoJCX0KCgkJZm9yICh2YXIgbm9kZSA9IHRyZWU7IG5vZGU7IG5vZGUgPSBub2RlLmxhc3QpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIG5vZGUubWV0YSkgfQoKCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpLCBjYW4uYmFzZS5PYmooY2FuLkNvbmYobGV4LlBSRUZJWCksIFtdKS5jb25jYXQoW2Nhbi5PcHRpb24oInJlcG9zIil8fCIiLCB0cmVlLmZpbGV8fCIiLCB0cmVlLm5hbWVdKSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gY2FuLm9uZGV0YWlsLnBsdWdpbihjYW4sICJ3ZWIuY29kZS5pbm5lciIsIFtjYW4uZGlyX3Jvb3QsIHRyZWUuZmlsZSwgdHJlZS5saW5lXSwgY29kZS5JTk5FUikgfQoJCQlpZiAobXNnLkFwcGVuZChtZGIuSU5ERVgpKSB7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyBjYW4ub25kZXRhaWwucGx1Z2luKGNhbiwgdmFsdWUuaW5kZXgsIFtdKSB9KTsgcmV0dXJuIH0KCgkJCWlmIChtc2cuT3B0aW9uKGxleC5TUExJVCkpIHsKCQkJCXRyZWUubGlzdCA9IGNhbi5vbmltcG9ydC5fdHJlZShjYW4sIG1zZy5UYWJsZSgpLCBtc2cuT3B0aW9uKG1kYi5GSUVMRCl8fG1zZy5hcHBlbmRbMF0sIG1zZy5PcHRpb24obGV4LlNQTElUKSlbIiJdLmxpc3R8fFtdCgkJCQljYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmxhc3QgPSB0cmVlIH0pCgkJCX0gZWxzZSB7CgkJCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgeyB0cmVlLmxpc3QucHVzaCh7CgkJCQkJdHlwZTogInRhZ3MiLCBuYW1lOiBpdGVtLm5hbWV8fGl0ZW0uZmlsZXx8aXRlbVttc2cuYXBwZW5kWzBdXSwKCQkJCQltZXRhOiBpdGVtLCBsaXN0OiBbXSwgbGFzdDogdHJlZSwKCQkJCQlmaWxlOiBpdGVtLmZpbGUsIGxpbmU6IGl0ZW0ubGluZSwgaGlkZTogdHJ1ZSwKCQkJCX0pIH0pCgkJCX0KCQkJdHJlZS50YWdzID0gdHJ1ZSwgdHJlZS5oaWRlID0gIXRyZWUuaGlkZSwgY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXShldmVudCwgY2FuKQoJCX0sIHRydWUpCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGluZGV4LCBhcmdzLCBwcmVmaXgpIHsKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuRkxPQVQsIGluZGV4OiBpbmRleCwgYXJnczogYXJncywgbW9kZTogImZsb2F0In0sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBwcmVmaXh8fFtpY2UuUlVOLCBpbmRleF0sIGNtZHMsIGNiKSB9CgkJCXN1Yi5Nb2RlKCJmbG9hdCIpLCBjYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsgbGVmdCA9IGxlZnR8fDAKCQkJCXZhciB0b3AgPSBjYW4uTW9kZSgpID09IHVuZGVmaW5lZD8gMTIwOiAwOyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgdG9wID0gY2FuLnVzZXIuaXNMYW5kc2NhcGUoKT8gMDogNDggfQoJCQkJc3ViLkNvbmZIZWlnaHQoaGVpZ2h0LXRvcC0yKmh0bWwuQUNUSU9OX0hFSUdIVC0oY2FuLnVzZXIuaXNNb2JpbGUmJiFjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAyKmh0bWwuQUNUSU9OX0hFSUdIVDogMCkpLCBzdWIuQ29uZldpZHRoKHdpZHRoKQoJCQkJY2FuLm9ubW90aW9uLm1vdmUoY2FuLCBzdWIuX3RhcmdldCwge3Bvc2l0aW9uOiBodG1sLkZJWEVELCBsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pCgkJCX0pCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS90cmVuZC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbigiYnJhbmNoIikpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4uZGF0YSA9IG1zZy5UYWJsZSgpLCBjYW4ub25pbXBvcnQuX3N1bShjYW4pCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgcGFyc2VJbnQobXNnLk9wdGlvbihodG1sLlNQRUVEKXx8IjEwMCIpKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJkcmF3IikKCQljYW4ucmVxdWlyZShbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIiwgIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCX0pCgl9LAoJX3N1bTogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIGJlZ2luID0gIiIsIGNvdW50ID0gMCwgcmVzdCA9IDAsIGFkZCA9IDAsIGRlbCA9IDAsIG1heCA9IDAKCQljYW4ubWF4ID0gMCwgY2FuLm1pbiA9IDAsIGNhbi5saXN0ID0gY2FuLmNvcmUuTGlzdChjYW4uZGF0YSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CgkJCXZhciBsaW5lID0gewoJCQkJZGF0ZTogdmFsdWVbY2FuLl9tc2cuYXBwZW5kWzBdXSwKCQkJCXRleHQ6IHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFs0XV0sCgkJCQlhZGQ6IHBhcnNlSW50KHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFsxXV0pLAoJCQkJZGVsOiBwYXJzZUludCh2YWx1ZVtjYW4uX21zZy5hcHBlbmRbMl1dKSwKCQkJfQoKCQkJbGluZS5iZWdpbiA9IHJlc3QKCQkJbGluZS5tYXggPSByZXN0ICsgbGluZS5hZGQKCQkJbGluZS5taW4gPSByZXN0IC0gbGluZS5kZWwKCQkJbGluZS5jbG9zZSA9IHJlc3QgKyBsaW5lLmFkZCAtIGxpbmUuZGVsCgoJCQliZWdpbiA9IGJlZ2luIHx8IHZhbHVlLmRhdGUsIGNvdW50KysKCQkJcmVzdCA9IGxpbmUuY2xvc2UsIGFkZCArPSBsaW5lLmFkZCwgZGVsICs9IGxpbmUuZGVsCgoJCQlpZiAobGluZS5tYXggLSBsaW5lLm1pbiA+IG1heCkgeyBtYXggPSBsaW5lLm1heCAtIGxpbmUubWluIH0KCQkJaWYgKGxpbmUubWF4ID4gY2FuLm1heCkgeyBjYW4ubWF4ID0gbGluZS5tYXggfQoJCQlpZiAobGluZS5taW4gPCBjYW4ubWluKSB7IGNhbi5taW4gPSBsaW5lLm1pbiB9CgkJCXJldHVybiBsaW5lCgkJfSkKCQljYW4uU3RhdHVzKHsiZnJvbSI6IGJlZ2luLCAiY29tbWl0IjogY291bnQsICJ0b3RhbCI6IGFkZCtkZWwsICJtYXgiOiBtYXh9KQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBoZWlnaHQgPSBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbikKCQl2YXIgd2lkdGggPSBwYXJzZUludChjYW4uQ29uZldpZHRoKCkpLCBzcGFjZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNwYWNlIil8fCIxMCIpCgkJdmFyIHN0ZXAgPSBwYXJzZUludCgod2lkdGgtMipzcGFjZSkgLyBjYW4ubGlzdC5sZW5ndGgpCgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9tc2cpCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGhlaWdodCksIGNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIHdpZHRoKQoJCXJldHVybiB7aGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCwgc3BhY2U6IHNwYWNlLCBzdGVwOiBzdGVwfQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXSh7fSwgY2FuKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi6LaL5Yq/5Zu+IiwgIuafseeKtuWbviIsICLmlbDmja7mupAiXSwKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJWyJzcGFjZSIsIDEwLCAyMCwgNTAsIDEwMF0sCgkJW2h0bWwuU1BFRUQsIDEwLCAyMCwgNTAsIDEwMF0sCgldLAoJIui2i+WKv+WbviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGFyZ3MgPSBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pCgkJZnVuY3Rpb24gc2NhbGUoeSkgeyByZXR1cm4gKHkgLSBjYW4ubWluKS8oY2FuLm1heCAtIGNhbi5taW4pKihhcmdzLmhlaWdodC0yKmFyZ3Muc3BhY2UpIH0KCQlmdW5jdGlvbiBvcmRlcihpbmRleCwgeCwgeSkgeyByZXR1cm4ge3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3gsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoeSl9IH0KCgkJdmFyIGJsYWNrID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLkJMQUNLLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLkJMQUNLLCBodG1sLkZJTEwsIGNsaS5CTEFDSykpCgkJdmFyIHdoaXRlID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLldISVRFLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLldISVRFLCBodG1sLkZJTEwsIGNsaS5XSElURSkpCgoJCWNhbi5jb3JlLk5leHQoY2FuLmxpc3QsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGNhbi5TdGF0dXMobGluZSkKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuTElORSwgcG9pbnQ6IFsKCQkJCW9yZGVyKGluZGV4LCBhcmdzLnN0ZXAvMiwgbGluZS5taW4pLCBvcmRlcihpbmRleCwgYXJncy5zdGVwLzIsIGxpbmUubWF4KSwKCQkJXX0sIGxpbmUuYmVnaW4gPCBsaW5lLmNsb3NlPyB3aGl0ZTogYmxhY2spCgoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5SRUNULCBwb2ludDogWwoJCQkJb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80LCBsaW5lLmNsb3NlKSwgb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80KjMsIGxpbmUuYmVnaW4pLAoJCQldLCBfaW5pdDogZnVuY3Rpb24odmlldykgewoJCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgZnVuY3Rpb24oa2V5LCBjYikgeyB2aWV3W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuLCBsaW5lKSB9IH0pCgkJCX19LCBsaW5lLmJlZ2luIDwgbGluZS5jbG9zZT8gd2hpdGU6IGJsYWNrKQoKCQkJY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJfSkKCX0sCgki5p+x54q25Zu+IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYXJncyA9IGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbikKCQl2YXIgbWF4ID0ge30sIG1pbiA9IHt9OyBjYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCB3aGljaCkgewoJCQljYW4uY29yZS5MaXN0KGNhbi5kYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKCQkJCXZhciB2ID0gcGFyc2VJbnQodmFsdWVba2V5XSl8fDA7IGlmIChpbmRleCA9PSAwKSB7CgkJCQkJcmV0dXJuIG1heFtrZXldID0gdiwgbWluW2tleV0gPSB2CgkJCQl9CgkJCQlpZiAodiA+IG1heFtrZXldKSB7IG1heFtrZXldID0gdiB9CgkJCQlpZiAodiA8IG1pbltrZXldKSB7IG1pbltrZXldID0gdiB9CgkJCX0pCgkJfSkKCgkJZnVuY3Rpb24gc2NhbGUoa2V5LCB5KSB7IHJldHVybiAoeSAtIG1pbltrZXldKS8obWF4W2tleV0gLSBtaW5ba2V5XSkqKGFyZ3MuaGVpZ2h0LTIqYXJncy5zcGFjZSkgfQoKCQl2YXIgd2lkdGggPSBhcmdzLnN0ZXAvY2FuLl9tc2cuYXBwZW5kLmxlbmd0aCwgd2hpY2ggPSAwCgkJY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgd2hpY2gpIHsgaWYgKG1heFtrZXldID09IG1pbltrZXldKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLk5leHQoY2FuLmRhdGEsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGlmIChwYXJzZUludChsaW5lW2tleV0pID09IDApIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKndoaWNoKzIsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoa2V5LCBwYXJzZUludChsaW5lW2tleV0pKX0sCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKih3aGljaCsxKSsyLCB5OiBhcmdzLmhlaWdodC1hcmdzLnNwYWNlfSwKCQkJCV0sIHN0eWxlOiBraXQuRGljdChodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNsaS5XSElURSwgaHRtbC5GSUxMLCBjbGkuV0hJVEUsIHN2Zy5SWCwgMCwgc3ZnLlJZLCAwKSwgX2luaXQ6IGZ1bmN0aW9uKHZpZXcpIHsKCQkJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCBmdW5jdGlvbihrZXksIGNiKSB7IHZpZXdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4sIGxpbmUpIH0gfSkKCQkJCX19KSwgY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJCX0pLCB3aGljaCsrCgkJfSkKCX0sCgki5pWw5o2u5rqQIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIGNhbi5fbXNnLCBudWxsLCBjYW4uX291dHB1dCkKCX0sCgoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJc3BhY2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGNhbi5TdGF0dXMobGluZSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbImZyb20iLCAiY29tbWl0IiwgInRvdGFsIiwgIm1heCIsICJkYXRlIiwgInRleHQiLCAiYWRkIiwgImRlbCJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJaWYgKGhlaWdodCA9PSBpY2UuQVVUTykgeyBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCS8vIGNhbi5pc0Z1bGxNb2RlKCkgfHwgKGhlaWdodCA9IGNhbi5iYXNlLk1heChjYW4uQ29uZkhlaWdodCgpLCA2MDApKQoJCX0KCQlpZiAoaGVpZ2h0IDwgMjAwKSB7IGhlaWdodCA9IDIwMCB9CgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodHx8Y2FuLl9yb290Ll9oZWlnaHQvMikKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS92aWRlby5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuc2VsZWN0KGNhbiwgbXNnKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5wbGF5KGV2ZW50LCBjYW4pIH0pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsICJ0ZCBhIiwgZnVuY3Rpb24oYSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBhLCB7dGFyZ2V0OiAiIn0pCgkJfSkKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLkNsZWFyKCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uT3B0aW9uKCJ0YWdzIiksIGZ1bmN0aW9uKGEsIGluZGV4KSB7CgkJCW1zZy5QdXNoKG1kYi5JTkRFWCwgaW5kZXgpCgkJCW1zZy5QdXNoKG1kYi5OQU1FLCBhLmlubmVyVGV4dCkKCQkJbXNnLlB1c2gobWRiLkxJTkssIGEuaHJlZikKCQkJYS5ocmVmID09IGxvY2F0aW9uLmhyZWYgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGkpIHsKCQkJCQlpLTEgPT0gaW5kZXggJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCAic2VsZWN0IikKCQkJCX0pCgkJCX0pCgkJfSkKCQltc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTLCBKU09OLnN0cmluZ2lmeShbCgkJCXtuYW1lOiAidGltZSIsIHZhbHVlOiBjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpfSwKCQkJe25hbWU6ICJjb3VudCIsIHZhbHVlOiBtc2cuTGVuZ3RoKCl9LAoJCV0pKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2cKCQltc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgpIHsKCQkJaWYgKGxpbmUubGluayA9PSBsb2NhdGlvbi5ocmVmKSB7CgkJCQlsb2NhdGlvbi5ocmVmID0gbXNnLmxpbmtbaW5kZXgrMV0KCQkJfQoJCX0pCgl9LAoJcGxheTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBodG1sLlZJREVPLCBmdW5jdGlvbih2aWRlbykgewoJCQl2aWRlby5wbGF5YmFja1JhdGUgPSBwYXJzZUZsb2F0KGNhbi5PcHRpb24oInJhdGUiKSkKCQkJdmlkZW8uY3VycmVudFRpbWUgPSBwYXJzZUludChjYW4uT3B0aW9uKCJza2lwIikpCgkJCXZpZGVvLm9udGltZXVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAodmlkZW8uY3VycmVudFRpbWUgPiBwYXJzZUludChjYW4uT3B0aW9uKCJuZXh0IikpKSB7CgkJCQkJY2FuLm9uYWN0aW9uLm5leHQoZXZlbnQsIGNhbikKCQkJCX0KCQkJfSwgdmlkZW8ucGxheSgpLCB2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi90YWJsZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJdmFyIGNicyA9IGNhbi5vbmltcG9ydFtjYW4uQ29uZihjdHguU1RZTEUpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYnMpKSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNhbi5fYXJnc1tjdHguU1RZTEVdKQoJCQljYW4uY29yZS5DYWxsRnVuYyhjYnMsIHsKCQkJCWNhbjogY2FuLCBtc2c6IG1zZywgdGFyZ2V0OiB0YXJnZXQsCgkJCQlsaXN0OiBtc2cuVGFibGUoKSwKCQkJfSkKCQkJcmV0dXJuIGNicyhjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdGFyZ2V0KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCgl6b25lOiBmdW5jdGlvbihjYW4sIGxpc3QsIHRhcmdldCkgeyB2YXIgY29sb3IgPSBbIiJdCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih6b25lLCBpbmRleCkgeyBjYW4uYmFzZS5pc1N0cmluZyh6b25lKSAmJiAoem9uZSA9IHtuYW1lOiB6b25lfSk7IHJldHVybiB6b25lICYmIHt2aWV3OiBodG1sLlpPTkUrIiAiK3pvbmUubmFtZSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5OQU1FLCBpbm5lcjogY2FuLnVzZXIudHJhbnMoY2FuLCB6b25lLm5hbWUpLCBzdHlsZToge2JhY2tncm91bmQ6IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF19LCBvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB6b25lLl9hY3Rpb24pLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgem9uZS5fdGFyZ2V0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl6b25lLl9tZW51PyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHpvbmUuX21lbnUubWV0YSwgem9uZS5fbWVudS5saXN0fHxjYW4uY29yZS5JdGVtKHpvbmUuX21lbnUubWV0YSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJCQkobWV0YVtidXR0b25dfHxjYW4ub25hY3Rpb25bYnV0dG9uXSkoZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQkJfSk6IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJCSLmipjlj6AiOiBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9MSVNULCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBmYWxzZSkgfSkgfSwKCQkJCQki5bGV5byAIjogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHpvbmUuX3RhcmdldCwgaHRtbC5ESVZfTElTVCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgdHJ1ZSkgfSkgfSwKCQkJCQki5Yi35pawIjogZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHpvbmUuX3RhcmdldCksIHpvbmUuX2luaXQoem9uZS5fdGFyZ2V0KSB9LAoJCQkJfSwgWyLmipjlj6AiLCAi5bGV5byAIiwgIuWIt+aWsCJdKQoJCQl9fSwKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHpvbmUuX2FjdGlvbiA9IHRhcmdldAoJCQkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbe2lucHV0OiBodG1sLlRFWFQsIHBsYWNlaG9sZGVyOiAic2VhcmNoIiwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0xJU1QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIHRydWUpIH0pCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJkaXYubmFtZSIsIGZ1bmN0aW9uKG5hbWUpIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIG5hbWUuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB9KQoJCQkJCX0pCgkJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgem9uZS5fc2VhcmNoID0gdGFyZ2V0CgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCB0YXJnZXQsIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5vZmZzZXRXaWR0aC0zMikgfSkKCQkJCQkvLyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge25hbWU6IHpvbmUubmFtZX0sIHRhcmdldCkKCQkJCX19XSwgdGFyZ2V0LCB7fSkKCQkJfX0sCgkJCXt2aWV3OiBodG1sLkxJU1QsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnVpW3pvbmUubmFtZV0gPSB6b25lCgkJCQl6b25lLl90YXJnZXQgPSB0YXJnZXQsIHpvbmUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCB6b25lLl9pbml0KHRhcmdldCkgfQoJCQkJY2FuLmJhc2UuaXNGdW5jKHpvbmUuX2luaXQpICYmIHpvbmUuX2luaXQodGFyZ2V0LCB6b25lKQoJCQl9fQoJCV19IH0pKQoJfSwKCXRyZWU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgZmllbGQsIHNwbGl0LCBjYiwgdGFyZ2V0LCBub2RlKSB7CgkJbm9kZSA9IG5vZGV8fHsiIjogdGFyZ2V0fTsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW1bZmllbGRdICYmIGNhbi5jb3JlLkxpc3QoaXRlbVtmaWVsZF0uc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IGlmICghdmFsdWUpIHsgcmV0dXJuIH0KCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpLCBuYW1lID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgrMSkuam9pbihzcGxpdCkKCQkJCWlmIChub2RlW25hbWVdKSB7IHJldHVybiB9CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlW2xhc3RdLCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogW3t2aWV3OiBbInN3aXRjaCIsICJkaXYiLCAoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiImIzg5NjM7IildfSwge3ZpZXc6IFsibmFtZSIsIGh0bWwuRElWLCB2YWx1ZSsoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiIiKV0sIF9pbml0OiBpdGVtLl9pbml0fV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaW5kZXggPCBhcnJheS5sZW5ndGggLSAxPyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbm9kZVtuYW1lXSwgZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aVsic3dpdGNoIl0sICJvcGVuIikKCQkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHVpWyJzd2l0Y2giXSwgIm9wZW4iKQoJCQkJCX0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtKQoJCQkJCWlmIChub2RlW25hbWVdLmNoaWxkRWxlbWVudENvdW50ID09IDIpIHsgbm9kZVtuYW1lXS5maXJzdENoaWxkLmNsaWNrKCkgfQoJCQkJfX0sIHt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfSwgX2luaXQ6IGZ1bmN0aW9uKGxpc3QpIHsgaXRlbS5leHBhbmQgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBsaXN0LCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spIH19XSkKCQkJCW5vZGVbbmFtZV0gPSB1aS5saXN0CgkJCX0pCgkJfSk7IHJldHVybiBub2RlCgl9LAoJbGlzdDogZnVuY3Rpb24oY2FuLCByb290LCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4uY29yZS5MaXN0KHJvb3QubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0pIHx8IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQl9fSwge3ZpZXc6IGh0bWwuTElTVH1dKTsgY2FuLm9uaW1wb3J0Lmxpc3QoY2FuLCBpdGVtLCBjYiwgdWkubGlzdCkKCQl9KQoJfSwKCWl0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgY2IsIGNicywgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8KGNhbi51aSAmJiBjYW4udWkucHJvamVjdD8gY2FuLnVpLnByb2plY3Q6IGNhbi5fb3V0cHV0KQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uaWNrfHxpdGVtLm5hbWVdLAoJCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgdWkuZmlyc3QsIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGh0bWwuSVRFTSksIHVpLmZpcnN0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhldmVudCwgdWkuZmlyc3QpIH0sCgkJfV0pOyByZXR1cm4gdWkuZmlyc3QKCX0sCglpdGVtbGlzdDogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0Ll9saXN0ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2IoZXZlbnQsIGl0ZW0sIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYnMoZXZlbnQsIGl0ZW0pIH19CgkJfSkgfV0sIHRhcmdldC5uZXh0U2libGluZywgdGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCBhY3Rpb24sIGVhY2gpIHsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBhY3Rpb24sIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odGFicykgewoJCQlyZXR1cm4ge3RleHQ6IFt0YWJzLm5hbWUsIGh0bWwuRElWLCBodG1sLlRBQlNdLCB0aXRsZTogdGFicy50ZXh0LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgdGFicykKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWZ1bmN0aW9uIGNsb3NlKGl0ZW0pIHsgdmFyIG5leHQgPSBpdGVtLm5leHRTaWJsaW5nfHxpdGVtLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkKCQkJCQlpZiAobmV4dCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoaXRlbS5fbWV0YSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pIH0KCQkJCX0KCQkJCXZhciBtZW51ID0gdGFicy5fbWVudXx8c2h5KHt9LCBbXSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgeyAobWV0YVtidXR0b25dKShldmVudCwgY2FuLCBidXR0b24pIH0pCgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpdGVtLCB7ZHJhZ2dhYmxlOiB0cnVlLCBfY2xvc2U6IGZ1bmN0aW9uKCkgeyBjbG9zZShpdGVtKSB9LCBfbWV0YTogdGFicywKCQkJCQlvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCQkJCSJDbG9zZSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNsb3NlKGl0ZW0pIH0sCgkJCQkJCSJDbG9zZSBvdGhlcnMiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGZ1bmN0aW9uKF9pdGVtKSB7IF9pdGVtID09IGl0ZW0gfHwgY2xvc2UoX2l0ZW0pIH0pIH0sCgkJCQkJCSJDbG9zZSBhbGwiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGNsb3NlKSB9LAoJCQkJCSksIG1lbnUubWV0YSksIFsiQ2xvc2UiLCAiQ2xvc2Ugb3RoZXJzIiwgIkNsb3NlIGFsbCIsICIiXS5jb25jYXQobWVudS5saXN0KSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQkJCQltZW51KGV2ZW50LCBidXR0b24sIG1ldGEpCgkJCQkJfSkgfSwKCQkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgYWN0aW9uLl9kcm9wID0gZnVuY3Rpb24oYmVmb3JlKSB7IGFjdGlvbi5pbnNlcnRCZWZvcmUoZXZlbnQudGFyZ2V0LCBiZWZvcmUpIH0gfSwKCQkJCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBhY3Rpb24uX2Ryb3AoZXZlbnQudGFyZ2V0KSB9LAoJCQkJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgYWN0aW9uLl9kcm9wKGV2ZW50LnRhcmdldCkgfSwKCQkJCX0pCgkJCQljYW4uYmFzZS5pc0Z1bmMoZWFjaCkgJiYgZWFjaChpdGVtKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGl0ZW0uY2xpY2soKSB9KQoJCQl9fQoJCX0pKS5maXJzdAoJfSwKCWNhcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt2aWV3OiBodG1sLklURU0rIiAiKyh2YWx1ZS5zdGF0dXN8fCIiKSwgbGlzdDogWwoJCQkJe3ZpZXc6IFt3aWtpLlRJVExFLCBodG1sLkRJViwgdmFsdWUubmFtZV19LAoJCQkJe3ZpZXc6IFt3aWtpLkNPTlRFTlQsIGh0bWwuRElWLCB2YWx1ZS50ZXh0XX0sCgkJCQl7dmlldzogaHRtbC5BQ1RJT04sIGlubmVyOiB2YWx1ZS5hY3Rpb24sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgdmFsdWUpLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdKQoJCQkJfX0sCgkJCV19CgkJfSkpCgl9LAoJcGx1ZzogZnVuY3Rpb24oY2FuLCBtZXRhLCB0YXJnZXQsIGNiKSB7IGlmICghbWV0YSB8fCAhbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCW1ldGEudHlwZSA9ICJwbHVnIiwgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIG1ldGEsIGZ1bmN0aW9uKHN1YikgeyBzdWIuc3VwID0gY2FuCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIG1ldGEuaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4udWkgJiYgdGFyZ2V0ID09IGNhbi51aS5wcm9maWxlPyBjYW4ub25tb3Rpb24uaGlkZGVuKHN1YiwgdGFyZ2V0KTogY2FuLm9ubW90aW9uLmhpZGRlbihzdWIsIHN1Yi5fdGFyZ2V0KSB9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvZnJhbWUuanMiClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi5pCc57Si5byV5pOOIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgY2IsIHRhcmdldCkgewoJCWlmIChjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCkpIHsgY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLk1TR19TRVNTSUQpKQoJCQlyZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLk1TR19TRVNTSUQsICIiKSAKCQl9CgoJCWNhbi5yZXF1aXJlKFtjYW4udm9sY2Fub10sIG51bGwsIGZ1bmN0aW9uKGNhbiwga2V5LCBzdWIpIHsgY2FuW2tleV0gPSBzdWIgfSkKCQljYW4ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGNtZHMgPSBjbWRzfHxbXQoJCQlyZXR1cm4gKGNhbi5vbmVuZ2luZVtjbWRzWzBdXXx8Y2FuLm9uZW5naW5lLl9yZW1vdGUpKGV2ZW50LCBjYW4sIG1zZywgY2FuLCBjbWRzLCBjYikKCQl9LCBWb2xjYW5vcy5tZXRhLmFyZ3MgPSBjYW4udXNlci5hcmdzKGNhbikKCQljYW4udXNlci50aXRsZShjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlRJVExFKXx8Y2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCl8fGxvY2F0aW9uLmhvc3QpCgoJCXdpbmRvdy5vbnVubG9hZCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgIm9udW5sb2FkIikgfQoKCQljYW4uY29yZS5OZXh0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgaXRlbS50eXBlID0gY2hhdC5QQU5FTAoJCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBjYW4uYmFzZS5Db3B5KGl0ZW0sIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuUklWRVIsIGl0ZW0ubmFtZV0pKSwgaXRlbS5saXN0LCBmdW5jdGlvbihwYW5lbCkgewoJCQkJcGFuZWwucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBwYW5lbC5yZXF1ZXN0KGV2ZW50KTsgY21kcyA9IGNtZHN8fFtdCgkJCQkJcmV0dXJuIChjYW4ub25lbmdpbmVbY21kc1swXV18fGNhbi5vbmVuZ2luZS5fcmVtb3RlKShldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikKCQkJCX0sIGNhbltpdGVtLm5hbWVdID0gcGFuZWwsIHBhbmVsLl9yb290ID0gY2FuLCBwYW5lbC5fdHJhbnMgPSBwYW5lbC5vbmFjdGlvbiAmJiBwYW5lbC5vbmFjdGlvbi5fdHJhbnN8fHt9CgoJCQkJY2FuLmNvcmUuSXRlbShwYW5lbC5vbnBsdWdpbiwgZnVuY3Rpb24oa2V5LCBjbWQpIHsKCQkJCQlwYW5lbC5vbnBsdWdpbi5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNhbi5iYXNlLmlzRnVuYyhjbWQpICYmIGNhbi5vbmVuZ2luZS5wbHVnaW4ocGFuZWwsIGtleSwgY21kKQoJCQkJfSkKCQkJCWNhbi5jb3JlLkl0ZW1DQihwYW5lbC5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgewoJCQkJCWNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBrZXksIGZ1bmN0aW9uKG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogcGFuZWwsIG1zZzogbXNnfSkgfSkKCQkJCX0pLCBjYW4uY29yZS5DYWxsRnVuYyhbcGFuZWwub25hY3Rpb24sIGNoYXQuX0lOSVRdLCB7Y2FuOiBwYW5lbCwgY2I6IG5leHQsIHRhcmdldDogcGFuZWwuX3RhcmdldH0pCgkJCX0sIHRhcmdldCkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGNhbi51c2VyLnRpdGxlKCksIGljZS5SVU4sIGNhbikKCQkJY2FuLm9ubW90aW9uLl9pbml0KGNhbiwgdGFyZ2V0KSwgY2FuLm9ua2V5bWFwLl9pbml0KGNhbiksIGNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQykKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05NQUlOLCBjYW4ucmVxdWVzdCgpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJfSkKCgkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05TRUFSQ0gsIGZ1bmN0aW9uKG1zZywgd29yZCkgeyBpZiAod29yZFswXSA9PSBjdHguQ09NTUFORCB8fCB3b3JkWzFdICE9ICIiKSB7IHZhciBtZXRhID0gY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhCgkJCXZhciBsaXN0ID0gd29yZFsxXSA9PSAiIj8gbWV0YTogbWV0YVt3b3JkWzFdXT8ga2l0LkRpY3Qod29yZFsxXSwgbWV0YVt3b3JkWzFdXSk6IHt9CgkJCWNhbi5jb3JlLkl0ZW0obGlzdCwgZnVuY3Rpb24obmFtZSwgY29tbWFuZCkgeyBuYW1lID0gY2FuLmJhc2UudHJpbVByZWZpeChuYW1lLCAiY2FuLiIpCgkJCQljYW4uY29yZS5MaXN0KG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQltc2cuUHVzaChpdGVtLCBraXQuRGljdChpY2UuQ1RYLCBjaGF0Lk9ORU5HSU5FLCBpY2UuQ01ELCBjdHguQ09NTUFORCwKCQkJCQkJbWRiLlRZUEUsIGljZS5DQU4sIG1kYi5OQU1FLCBuYW1lLCBtZGIuVEVYVCwgY29tbWFuZC5oZWxwLAoJCQkJCQljdHguQ09OVEVYVCwgaWNlLkNBTiwgY3R4LkNPTU1BTkQsIG5hbWUKCQkJCQkpW2l0ZW1dfHwiIikKCQkJCX0pCgkJCX0pCgkJfSB9KQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJdmFyIHN1YiwgbW9kID0gY2FuLCBmdW4gPSBjYW4sIGtleSA9ICIiOyBjYW4uY29yZS5MaXN0KGNtZHNbMV0uc3BsaXQoaWNlLlBUKSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJZnVuICYmIChzdWIgPSBtb2QsIG1vZCA9IGZ1biwgZnVuID0gbW9kW3ZhbHVlXSwga2V5ID0gdmFsdWUpCgkJfSk7IGlmICghc3ViIHx8ICFtb2QgfHwgIWZ1bikgeyBjYW4ubWlzYy5XYXJuKGljZS5FcnJOb3RGb3VuZCwgY21kcykKCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnLkVjaG8oaWNlLkVycldhcm4sIGljZS5FcnJOb3RGb3VuZCwgY21kcykpCgkJfQoKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoZnVuLCB7CgkJCWV2ZW50OiBldmVudCwgY2FuOiBzdWIsIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDIpLCBjYjogY2IsIHRhcmdldDogc3ViLl90YXJnZXQsCgkJCWJ1dHRvbjoga2V5LCBjbWQ6IGtleSwgYXJnOiBjbWRzLnNsaWNlKDIpLCBsaXN0OiBjbWRzLnNsaWNlKDIpLAoJCX0sIG1vZCkKCX0sCglfcmVtb3RlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJCWlmIChwYW5lbC5vbmVuZ2luZS5fZW5naW5lKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSkgeyByZXR1cm4gfQoJCWlmIChwYW5lbC5vbmVuZ2luZS5fcGx1Z2luKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSkgeyByZXR1cm4gfQoKCQl2YXIga2V5cyA9IGNhbi5jb3JlLktleXMocGFuZWwuX25hbWUsIGNtZHMuam9pbihpY2UuRlMpKQoJCWlmIChjYW4udXNlci5pc0xvY2FsRmlsZSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuQ2xlYXIoaWNlLk1TR19BUFBFTkQpCgkJCXZhciByZXMgPSBWb2xjYW5vcy5tZXRhLnBhY2tba2V5c107IHJlcz8gbXNnLkNvcHkocmVzKTogY2FuLnVzZXIudG9hc3QoY2FuLCAi57y65aSx5pWw5o2uIikKCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCX0KCgkJdmFyIHRvYXN0LCBfdG9hc3QgPSBtc2cuT3B0aW9uKGNoYXQuX1RPQVNUKTsgaWYgKF90b2FzdCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdG9hc3QgPSB0b2FzdHx8Y2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgX3RvYXN0LCBtc2cuX2Nhbi5fbmFtZSkgfSkgfQoJCW1zZy5vcHRpb24gPSBjYW4uY29yZS5MaXN0KG1zZy5vcHRpb24sIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIHtfdG9hc3Q6IHRydWUsIF9oYW5kbGU6IHRydWV9W2l0ZW1dICYmIGRlbGV0ZShtc2dbaXRlbV0pPyB1bmRlZmluZWQ6IGl0ZW0gfSkKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlJFTU9URSwgY2FuLnJlcXVlc3Qoe30sIHtfZm9sbG93OiBwYW5lbC5fZm9sbG93LCBfbXNnOiBtc2csIF9jbWRzOiBjbWRzfSkpCgoJCXZhciBuYW1lcyA9IG1zZy5PcHRpb24oY2hhdC5fTkFNRVMpfHxwYW5lbC5fbmFtZXN8fCgoY2FuLkNvbmYoImljZWJlcmciKXx8Vm9sY2Fub3MubWV0YS5pY2ViZXJnKStwYW5lbC5fbmFtZSkKCQljYW4ubWlzYy5SdW4oZXZlbnQsIGNhbiwge25hbWVzOiBuYW1lcywgZGFlbW9uOiBtc2cuX2RhZW1vbn0sIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQlWb2xjYW5vcy5tZXRhLnBhY2tba2V5c10gPSBtc2csIHRvYXN0ICYmIHRvYXN0LmNsb3NlKCksIHRvYXN0ID0gdHJ1ZSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfSkKCX0sCglfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJCXJldHVybiBmYWxzZQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJaWYgKGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBjbWRzWzFdID09IGljZS5SVU4gJiYgY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2NtZHNbMl1dKSB7CgkJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1syXV0sIHtjYW46IHBhbmVsLCBtc2c6IG1zZywgY21kczogY21kcy5zbGljZSgzKSwgY2I6IGNifSksIHRydWUKCQl9CgkJdmFyIHAgPSBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1swXV0sIG4gPSAxOyBpZiAocCkgewoJCQlpZiAocC5tZXRhICYmIHAubWV0YVtjbWRzWzFdXSAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04pIHsgbiA9IDMgfSBlbHNlIGlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMF1dKSB7IG4gPSAyIH0KCQkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKHAsIHtjYW46IHAuY2FufHxwYW5lbCwgbXNnOiBtc2csIGFyZzogY21kcy5zbGljZShuKSwgY21kczogY21kcy5zbGljZShuKSwgY2I6IGNifSksIHRydWUKCQl9CgkJcmV0dXJuIGZhbHNlCgl9LAoKCXBsdWdpbjogc2h5KCLmt7vliqDmj5Lku7YiLCBmdW5jdGlvbihjYW4sIG5hbWUsIGNvbW1hbmQpIHsKCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobmFtZSkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0obmFtZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJbmFtZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNhbi5iYXNlLmlzRnVuYyh2YWx1ZSkgJiYgY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIGtleSwgdmFsdWUpIH0pCgkJfQoJCW5hbWUgPSBjYW4uYmFzZS50cmltUHJlZml4KG5hbWUsICJjYW4uIikKCQl2YXIgdHlwZSA9IGh0bWwuVEVYVDsgY29tbWFuZC5saXN0ID0gY2FuLmNvcmUuTGlzdChjb21tYW5kLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJc3dpdGNoICh0eXBlb2YgaXRlbSkgewoJCQkJY2FzZSBsYW5nLlNUUklORzogcmV0dXJuIGNhbi5jb3JlLlNwbGl0SW5wdXQoaXRlbSkKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IHJldHVybiB0eXBlID0gaXRlbS50eXBlfHx0eXBlLCBpdGVtCgkJCX0KCQl9KSwgY29tbWFuZC5jYW4gPSBjYW4sIGFyZ3VtZW50cy5jYWxsZWUubWV0YVtjYW4uY29yZS5LZXlzKGljZS5DQU4sIG5hbWUpXSA9IGNvbW1hbmQKCX0pLAoJbGlzdGVuOiBzaHkoIuebkeWQrOS6i+S7tiIsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgY2IpIHsKCQlhcmd1bWVudHMuY2FsbGVlLm1ldGFbbmFtZV0gPSAoYXJndW1lbnRzLmNhbGxlZS5tZXRhW25hbWVdfHxbXSkuY29uY2F0KGNiKQoJfSksCglzaWduYWw6IHNoeSgi6Kem5Y+R5LqL5Lu2IiwgZnVuY3Rpb24oY2FuLCBuYW1lLCBtc2cpIHsgbXNnID0gbXNnfHxjYW4ucmVxdWVzdCgpCgkJY2FuLm1pc2MuTG9nKGdkYi5TSUdOQUwsIG5hbWUsIChtc2cuX2NtZHN8fFtdKSwgbmFtZSA9PSBjaGF0Lk9OUkVNT1RFPyBtc2cuT3B0aW9uKCJfbXNnIik6IG1zZykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChjYW4ub25lbmdpbmUubGlzdGVuLm1ldGFbbmFtZV0sIGZ1bmN0aW9uKGNiKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7ZXZlbnQ6IG1zZy5fZXZlbnQsIG1zZzogbXNnfSkgfSkubGVuZ3RoCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRBRU1PTiwge2hlbHA6ICLmjqjojZDlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7IGlmIChjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgbmFtZTogY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2xpLkRBRU1PTil8fG5hbWV8fCIiLCB0ZXh0OiBjYW4udXNlci50aXRsZSgpfSwgZnVuY3Rpb24oZXZlbnQsIG1zZywgY21kLCBhcmcpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0KCQkJdmFyIHN1YiA9IGNhbi5vbmRhZW1vbi5fbGlzdFttc2cuT3B0aW9uKGljZS5NU0dfVEFSR0VUKV0KCQkJY2FuLmJhc2UuaXNGdW5jKGNhbi5vbmRhZW1vbltjbWRdKT8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLm9uZGFlbW9uW2NtZF0sIHsKCQkJCWNhbjogY2FuLCBzdWI6IHN1YiwgbXNnOiBtc2csIGNtZDogY21kLCBhcmc6IGFyZywgY2I6IGZ1bmN0aW9uKCkgeyBtc2cuUmVwbHkoKSB9LAoJCQl9KTogY2FuLm9uZW5naW5lLl9zZWFyY2goe30sIGNhbiwgbXNnLCBjYW4sIFtjaGF0Ll9TRUFSQ0gsIGNtZF0uY29uY2F0KGFyZyksIGZ1bmN0aW9uKCkgeyBtc2cuUmVwbHkoKSB9KQoJCX0pCgl9LCBfbGlzdDogWyIiXSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCBzdWIpIHsgc3ViLlVwZGF0ZSgpIH0sCglncm93OiBmdW5jdGlvbihjYW4sIG1zZywgc3ViLCBhcmcpIHsKCQlzdWIub25pbXBvcnQuX2dyb3coc3ViLCBtc2csIGNhbi5wYWdlLkNvbG9yKGFyZy5qb2luKCIiKSkpCgl9LAoJdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBhcmcpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLnVzZXIudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2csIGNtZHM6IGFyZ30pIH0sCglwd2Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBhcmcpIHsKCQljYW4uX3dzc19uYW1lID0gY2FuLm9uZGFlbW9uLl9saXN0WzBdID0gYXJnWzBdCgl9LAoJZXhpdDogZnVuY3Rpb24oY2FuLCBtc2csIHN1YikgeyBjYW4udXNlci5jbG9zZSgpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05BUFBFTkQsIHtoZWxwOiAi5riy5p+T5byV5pOOIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgY2IsIHRhcmdldCwgZmllbGQpIHsKCQltZXRhLm5hbWUgPSAobWV0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlNQKVswXS5zcGxpdChpY2UuUFQpLnBvcCgpCgkJZmllbGQgPSBmaWVsZHx8Y2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgbWV0YS50eXBlLCBtZXRhLCB0YXJnZXQpLmZpcnN0CgkJdmFyIGxlZ2VuZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkxFR0VORClbMF0KCQl2YXIgb3B0aW9uID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRk9STV9PUFRJT04pWzBdCgkJdmFyIGFjdGlvbiA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9BQ1RJT04pWzBdCgkJdmFyIG91dHB1dCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9PVVRQVVQpWzBdCgkJdmFyIHN0YXR1cyA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9TVEFUVVMpWzBdCgoJCXZhciBzdWIgPSBWb2xjYW5vcyhtZXRhLm5hbWUsIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBtZXRhLm5hbWUpLCBfdGFyZ2V0OiBmaWVsZCwKCQkJX2xlZ2VuZDogbGVnZW5kLCBfb3B0aW9uOiBvcHRpb24sIF9hY3Rpb246IGFjdGlvbiwgX291dHB1dDogb3V0cHV0LCBfc3RhdHVzOiBzdGF0dXMsCgkJCV9pbnB1dHM6IHt9LCBfb3V0cHV0czogW10sIF9oaXN0b3J5OiBbXSwgX3Jvb3Q6IGNhbi5fcm9vdCwKCgkJCVN0YXR1czogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgcmV0dXJuIGNhbi5jb3JlLkl0ZW0oa2V5LCBzdWIuU3RhdHVzKSwga2V5IH0KCQkJCWtleSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBzdGF0dXMsIFtbW2h0bWwuRElWLCBrZXldLCBodG1sLlNQQU5dXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWlmICh2YWx1ZSAmJiB2YWx1ZS5pbmRleE9mICYmIHZhbHVlLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IHZhbHVlID0gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgdmFsdWUpIH0KCQkJCQlyZXR1cm4gdmFsdWUgPT0gdW5kZWZpbmVkPyAodmFsdWUgPSBpdGVtLmlubmVySFRNTCk6IChpdGVtLmlubmVySFRNTCA9IHZhbHVlKQoJCQkJfSk7IHJldHVybiB2YWx1ZQoJCQl9LAoJCQlBY3Rpb246IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBhY3Rpb24sIGtleSwgdmFsdWUpWzBdIH0sCgkJCU9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIG9wdGlvbiwga2V5LCB2YWx1ZSlbMF0gfSwKCQkJVXBkYXRlOiBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyBzdWIub25hcHBlbmQuX291dHB1dDAoc3ViLCBzdWIuQ29uZigpLCBldmVudHx8e30sIGNtZHN8fHN1Yi5JbnB1dCgpLCBjYiwgc2lsZW50KTsgcmV0dXJuIHRydWUgfSwKCQkJRm9jdXM6IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBvcHRpb24sIGh0bWwuSU5QVVRfQVJHUywgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaW5kZXggPT0gMCAmJiBpdGVtLmZvY3VzKCkgfSkgfSwKCQkJSW5wdXQ6IGZ1bmN0aW9uKGNtZHMsIHNpbGVudCkgewoJCQkJY21kcyA9IGNtZHMgJiYgY21kcy5sZW5ndGggPiAwPyBjbWRzOiBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIikuY29uY2F0KGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBhY3Rpb24sICIiKSksIGNtZHMgPSBjYW4uYmFzZS50cmltKGNtZHMpCgkJCQlzaWxlbnQgfHwgY21kc1swXSA9PSBjdHguQUNUSU9OIHx8IGNhbi5iYXNlLkVxKHN1Yi5faGlzdG9yeVtzdWIuX2hpc3RvcnkubGVuZ3RoLTFdLCBjbWRzKSB8fCBzdWIuX2hpc3RvcnkucHVzaChjbWRzKQoJCQkJcmV0dXJuIGNtZHMKCQkJfSwKCQkJQ2xvbmU6IGZ1bmN0aW9uKCkgeyBtZXRhLmFyZ3MgPSBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIikKCQkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIG1ldGEsIGxpc3QsIGZ1bmN0aW9uKHN1YikgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YiwgdHJ1ZSkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgZm9yICh2YXIgayBpbiBzdWIuX2lucHV0cykgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBzdWIuX2lucHV0c1trXS5fdGFyZ2V0KTsgYnJlYWsgfSB9KQoJCQkJfSwgdGFyZ2V0KQoJCQl9LAoJCX0sIGxpc3QsIGZ1bmN0aW9uKHN1YikgeyBzdWIuQ29uZihtZXRhKSwgbWV0YS5mZWF0dXJlID0gY2FuLmJhc2UuT2JqKG1ldGEuZmVhdHVyZSwge30pCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgbWV0YS5pbmRleD8gbWV0YS5pbmRleC5zcGxpdChpY2UuUFQpLnBvcCgpOiBtZXRhLm5hbWUpCgkJCXZhciBzdHlsZSA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuc3R5bGV8fG1ldGEuZmVhdHVyZS5zdHlsZSk7IHN3aXRjaCAodHlwZW9mIHN0eWxlKSB7CgkJCQljYXNlIGxhbmcuU1RSSU5HOiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZmllbGQsIHN0eWxlKTsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHN0eWxlKTsgYnJlYWsKCQkJfQoJCQltZXRhLnR5cGUgIT0gc3ViLk1vZGUoKSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZmllbGQsIHN1Yi5Nb2RlKCkpCgoJCQltZXRhLmlucHV0cyAmJiBzdWIub25hcHBlbmQuX29wdGlvbihzdWIsIG1ldGEsIHN1Yi5fb3B0aW9uLCBtZXRhLm1zZykKCQkJaWYgKG1ldGEubXNnKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdCgpOyBtc2cuQ29weShjYW4uYmFzZS5PYmoobWV0YS5tc2cpKSwgc3ViLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKXx8bWV0YS5mZWF0dXJlLmRpc3BsYXkpIH0KCgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHN1Yi5fbGVnZW5kLCBraXQuRGljdChjYW4uQ29uZigibGVnZW5kX2V2ZW50Iil8fGNoYXQuT05NT1VTRUVOVEVSLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIHN1Yiwgc3ViLm9uYWN0aW9uLCBzdWIub25hY3Rpb24ubGlzdC5jb25jYXQoW1si5omA5pyJIl0uY29uY2F0KGNhbi5jb3JlLkl0ZW0obWV0YS5mZWF0dXJlLl90cmFucykpXSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhKSB7CgkJCQkJdmFyIGNiID0gY2FuLmNvcmUuVmFsdWUoc3ViLCBbY2hhdC5fT1VUUFVUU19DVVJSRU5ULCBjaGF0Lk9OQUNUSU9OLCBpdGVtXSkKCQkJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyByZXR1cm4gY2IoZXZlbnQsIGNhbi5jb3JlLlZhbHVlKHN1YiwgY2hhdC5fT1VUUFVUU19DVVJSRU5UKSwgaXRlbSkgfQoJCQkJCXZhciBjYiA9IG1ldGFbaXRlbV18fG1ldGFbY2hhdC5fRU5HSU5FXQoJCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHJldHVybiBjYihldmVudCwgc3ViLCBpdGVtKSB9CgkJCQl9KQoJCQl9KSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pOyByZXR1cm4gc3ViCgl9LAoJX29wdGlvbjogZnVuY3Rpb24oY2FuLCBtZXRhLCBvcHRpb24sIHNraXApIHsgbWV0YSA9IG1ldGF8fHt9OyB2YXIgaW5kZXggPSAtMSwgYXJncyA9IGNhbi5iYXNlLk9iaihtZXRhLmFyZ3N8fG1ldGEuYXJnfHxtZXRhLm9wdCwgW10pLCBvcHRzID0gY2FuLmJhc2UuT2JqKG1ldGEub3B0cywge30pCgkJZnVuY3Rpb24gYWRkKGl0ZW0sIG5leHQpIHsgaXRlbSA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBpdGVtfTogaXRlbSwgaXRlbS50eXBlICE9IGh0bWwuQlVUVE9OICYmIGluZGV4KysKCQkJcmV0dXJuIFZvbGNhbm9zKGl0ZW0ubmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIGl0ZW0ubmFtZSksIF9yb290OiBjYW4uX3Jvb3QsCgkJCQlfdGFyZ2V0OiBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCBpdGVtLCBhcmdzW2luZGV4XXx8b3B0c1tpdGVtLm5hbWVdLCBvcHRpb258fGNhbi5fb3B0aW9uKSwKCQkJCV9vcHRpb246IG9wdGlvbnx8Y2FuLl9vcHRpb24sIF9hY3Rpb246IGNhbi5fYWN0aW9uLCBfb3V0cHV0OiBjYW4uX291dHB1dCwgX3N0YXR1czogY2FuLl9zdGF0dXMsCgkJCQlPcHRpb246IGNhbi5PcHRpb24sIEFjdGlvbjogY2FuLkFjdGlvbiwgU3RhdHVzOiBjYW4uU3RhdHVzLCBDbG9uZUZpZWxkOiBjYW4uQ2xvbmUsCgkJCQlDbG9uZUlucHV0OiBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgYWRkKGl0ZW0pLl90YXJnZXQpIH0sCgkJCX0sIFtpdGVtLmRpc3BsYXksIGNoYXQuUExVR0lOX0lOUFVUX0pTXSwgZnVuY3Rpb24oaW5wdXQpIHsgaW5wdXQuQ29uZihpdGVtKQoJCQkJaW5wdXQucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCWlmIChpdGVtLl9jYikgeyByZXR1cm4gaXRlbS5fY2IoZXZlbnQpIH0KCQkJCQlpZiAobXNnLlJ1bkFjdGlvbihldmVudCwgY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpLCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCBpbnB1dCwgY21kcykpIHsgcmV0dXJuIH0KCQkJCQlyZXR1cm4gY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KGNtZHMsIHNpbGVudCksIGNiLCBzaWxlbnQpCgkJCQl9LCBjYW4uX2lucHV0c1tpdGVtLm5hbWVdID0gaW5wdXQsIGlucHV0LnN1cCA9IGNhbgoKCQkJCWNhbi5jb3JlLkl0ZW1DQihpbnB1dC5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgeyBpbnB1dC5fdGFyZ2V0W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgaW5wdXQpIH0gfSkKCQkJCWNhbi5jb3JlLkl0ZW1DQihpdGVtLCBmdW5jdGlvbihrZXksIGNiKSB7IGlucHV0Ll90YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBpbnB1dCkgfSB9KQoJCQkJc2tpcD8gbmV4dCgpOiBjYW4uY29yZS5DYWxsRnVuYyhbaW5wdXQub25hY3Rpb24sIGNoYXQuX0lOSVRdLCBbaW5wdXQsIGl0ZW0sIG5leHQsIGlucHV0Ll90YXJnZXRdKTsKCQkJCShpdGVtLmFjdGlvbnx8Y2FuLmNvcmUuVmFsdWUobWV0YSwgW2N0eC5GRUFUVVJFLCBjdHguSU5QVVRTXSkpICYmIGNhbi5vbmFwcGVuZC5maWd1cmUoaW5wdXQsIGl0ZW0sIGlucHV0Ll90YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUpIHsKCQkJCQlpbnB1dC5fdGFyZ2V0LnZhbHVlID0gdmFsdWUsIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGlucHV0Ll90YXJnZXQpCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5VcGRhdGUoKSB9KQoJCQkJfSkKCQkJfSkKCQl9OyBjYW4uY29yZS5OZXh0KGNhbi5iYXNlLmdldFZhbGlkKGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05JTVBPUlQsIG1kYi5MSVNUXSksIGNhbi5iYXNlLk9iaihtZXRhLmlucHV0cykpLmNvbmNhdChbe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBjbGkuQ0xPU0V9XSksIGFkZCkKCX0sCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGxpc3QsIGFjdGlvbiwgbWV0YSkgeyBsaXN0ID0gY2FuLmJhc2UuT2JqKGNhbi5iYXNlLmdldFZhbGlkKGxpc3QsIGNhbi5jb3JlLkl0ZW0obWV0YSkpLCBjYW4uY29yZS5WYWx1ZShjYW4sIFtjaGF0Lk9OQUNUSU9OLCBtZGIuTElTVF0pKTsgaWYgKCFsaXN0KSB7IHJldHVybiB9CgkJdmFyIF9saXN0ID0gY2FuLnBhZ2UuaW5wdXRzKGNhbiwgbGlzdCk7IGFjdGlvbiA9IGFjdGlvbnx8Y2FuLl9hY3Rpb24sIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGFjdGlvbiksIG1ldGEgPSBtZXRhfHxjYW4ub25hY3Rpb258fHt9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QoX2xpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0gPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIGl0ZW0gPT0gIiI/IC8q56m655m9Ki8ge3R5cGU6IGh0bWwuU1BBQ0V9OgoJCQljYW4uYmFzZS5pc1N0cmluZyhpdGVtKT8gLyrmjInplK4qLyB7dHlwZTogaHRtbC5CVVRUT04sIHZhbHVlOiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0pLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdOyBjYj8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGl0ZW19KTogY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGl0ZW1dLmNvbmNhdChjYW4uc3VwLklucHV0KCkpKQoKCQkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7CgkJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdOyBjYj8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGl0ZW19KTogY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGl0ZW1dLmNvbmNhdChjYW4uc3VwLklucHV0KCkpKQoJCQkJfQoKCQkJfX06IGl0ZW0ubGVuZ3RoID4gMD8gLyrliJfooagqLyB7dHlwZTogaHRtbC5TRUxFQ1QsIG5hbWU6IGl0ZW1bMF0sIHZhbHVlczogaXRlbS5zbGljZSgxKSwgb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgd2hpY2ggPSBpdGVtW2V2ZW50LnRhcmdldC5zZWxlY3RlZEluZGV4KzFdCgkJCQljYW4uY29yZS5DYWxsRnVuYyhtZXRhW3doaWNoXSwgW2V2ZW50LCBjYW4sIHdoaWNoXSkKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbaXRlbVswXV0sIFtldmVudCwgY2FuLCBpdGVtWzBdLCB3aGljaF0pCgoJCQl9fTogLyrlhbblroMqLyBpdGVtLCAiIiwgYWN0aW9uKX0pLCBtZXRhCgl9LAoJX291dHB1dDA6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIGNhbiwgY21kcykpIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgIT0gaWNlLlRSVUUgJiYgY21kcyAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgbWV0YS5mZWF0dXJlW2NtZHNbMV1dKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge2FjdGlvbjogY21kc1sxXX0pCgkJCWlmIChjYW4uYmFzZS5pc0Z1bmMobWV0YS5mZWF0dXJlW2NtZHNbMV1dKSkgeyByZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YS5mZWF0dXJlW2NtZHNbMV1dLCB7Y2FuOiBjYW4sIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDIpfSkgfQoJCQlyZXR1cm4gY2FuLnVzZXIuaW5wdXQoZXZlbnQuX2V2ZW50fHxldmVudCwgY2FuLCBtZXRhLmZlYXR1cmVbY21kc1sxXV0sIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9LCBjYW4uT3B0aW9uKCkpCgkJCQljYW4uVXBkYXRlKGV2ZW50LCBjbWRzLnNsaWNlKDAsIDIpLmNvbmNhdChhcmdzKSwgY2J8fGZ1bmN0aW9uKCkgewoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCQlpZiAobXNnLlJlc3VsdCgpLmxlbmd0aCA+IDAgfHwgbXNnLkxlbmd0aCgpID4gMCkgewoJCQkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLlVwZGF0ZSgpCgkJCQkJfQoJCQkJfSwgdHJ1ZSkKCQkJfSkKCQl9CgoJCWlmIChtZXRhICYmIG1ldGEuaW5kZXggJiYgbWV0YS5pbmRleC5pbmRleE9mKCJjYW4uIikgPT0gMCkgewoJCQljYW4ub25lbmdpbmUuX3BsdWdpbihldmVudCwgY2FuLCBtc2csIGNhbiwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW21ldGEuaW5kZXhdLCBjbWRzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogY2FuLCBtc2c6IG1zZ30pOyByZXR1cm4gfQoJCQkJIXNpbGVudCAmJiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmRpc3BsYXl8fG1ldGEuZmVhdHVyZS5kaXNwbGF5KQoJCQl9KQoJCQlyZXR1cm4KCQl9CgoJCWlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChtc2cuX2RhZW1vbikpIHsKCQkJY2FuLmJhc2UuaXNVbmRlZmluZWQoY2FuLl9kYWVtb24pICYmIGNhbi5vbmRhZW1vbi5fbGlzdFswXSAmJiAoY2FuLl9kYWVtb24gPSBjYW4ub25kYWVtb24uX2xpc3QucHVzaChjYW4pLTEpCgkJCWlmIChjYW4uX2RhZW1vbikgeyBtc2cuT3B0aW9uKGljZS5NU0dfREFFTU9OLCBjYW4uY29yZS5LZXlzKGNhbi5vbmRhZW1vbi5fbGlzdFswXSwgY2FuLl9kYWVtb24pKSB9CgkJfQoKCQlyZXR1cm4gY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCl8fHt9CgkJCWlmICghY21kcyB8fCBjbWRzWzBdICE9IGN0eC5BQ1RJT04pIHsgY2FuLl9tc2cgPSBtc2csIHN1Yi5fbXNnID0gbXNnLCBtc2cuX2NtZHMgPSBjbWRzIH0KCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtjYW46IGNhbiwgbXNnOiBtc2d9KTsgcmV0dXJuIH0KCQkJdmFyIHByb2Nlc3MgPSBtc2cuX2NhbiA9PSBjYW4gfHwgbXNnLl9jYW4gPT0gc3ViCgkJCWlmIChwcm9jZXNzICYmIGNhbi5jb3JlLkNhbGxGdW5jKFtzdWIsIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IHN1YiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQlpZiAocHJvY2VzcyAmJiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJIXNpbGVudCAmJiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmRpc3BsYXl8fG1ldGEuZmVhdHVyZS5kaXNwbGF5LCBjYW4uX291dHB1dCwgY2FuLl9hY3Rpb24pCgkJfSkKCX0sCglfb3V0cHV0OiBmdW5jdGlvbihjYW4sIG1zZywgZGlzcGxheSwgb3V0cHV0LCBhY3Rpb24sIGNiKSB7IGRpc3BsYXkgPSBkaXNwbGF5fHxjaGF0LlBMVUdJTl9UQUJMRV9KUywgb3V0cHV0ID0gb3V0cHV0fHxjYW4uX291dHB1dAoJCWNhbi5fZGlzcGxheSA9IGRpc3BsYXkKCQlWb2xjYW5vcyhkaXNwbGF5LCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgZGlzcGxheSksIF90YXJnZXQ6IG91dHB1dCwgX2ZpZWxkczogY2FuLl90YXJnZXQsIF9kaXNwbGF5OiBkaXNwbGF5LAoJCQlfbGVnZW5kOiBjYW4uX2xlZ2VuZCwgX29wdGlvbjogY2FuLl9vcHRpb24sIF9hY3Rpb246IGNhbi5fYWN0aW9uLCBfb3V0cHV0OiBjYW4uX291dHB1dCwgX3N0YXR1czogY2FuLl9zdGF0dXMsIF9yb290OiBjYW4uX3Jvb3QsCgkJCVVwZGF0ZTogY2FuLlVwZGF0ZSwgT3B0aW9uOiBjYW4uT3B0aW9uLCBBY3Rpb246IGNhbi5BY3Rpb24sIFN0YXR1czogY2FuLlN0YXR1cywKCQl9LCBbZGlzcGxheSwgY2hhdC5QTFVHSU5fVEFCTEVfSlNdLCBmdW5jdGlvbih0YWJsZSkgeyB0YWJsZS5Db25mKGNhbi5Db25mKCkpCgkJCXRhYmxlLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCB0YWJsZSwgY21kcykpIHsgcmV0dXJuIH0KCQkJCXJldHVybiBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoY21kcywgc2lsZW50KSwgY2IsIHNpbGVudCkKCQkJfSwgY2FuLl9vdXRwdXRzICYmIGNhbi5fb3V0cHV0cy5wdXNoKHRhYmxlKSwgdGFibGUuc3VwID0gY2FuLCB0YWJsZS5fbXNnID0gbXNnCgoJCQl0YWJsZS5faW5kZXggPSBjYW4uX2luZGV4CgkJCXRhYmxlLk1vZGUoY2FuLk1vZGUoKSksIHRhYmxlLkNvbmYodGFibGUuX2FyZ3MgPSBjYW4uYmFzZS5QYXJzZVVSTCh0YWJsZS5fZGlzcGxheSkpCgkJCXRhYmxlLl90cmFucyA9IGNhbi5iYXNlLkNvcHkodGFibGUuX3RyYW5zfHx7fSwgY2FuLmNvcmUuVmFsdWUodGFibGUsICJvbmFjdGlvbi5fdHJhbnMiKSkKCQkJaWYgKHRhYmxlLm9uaW1wb3J0ICYmIGNhbi5iYXNlLmlzQXJyYXkodGFibGUub25pbXBvcnQubGlzdCkgJiYgdGFibGUub25pbXBvcnQubGlzdC5sZW5ndGggPiAwKSB7CgkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX29wdGlvbiksIGNhbi5vbmFwcGVuZC5fb3B0aW9uKGNhbiwge2lucHV0czogY2FuLnBhZ2UuaW5wdXRzKGNhbiwgdGFibGUub25pbXBvcnQubGlzdCkgfSkKCQkJfQoKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3RhYmxlLCBjaGF0Lk9OSU1QT1JULCBjaGF0Ll9JTklUXSwge2NhbjogdGFibGUsIG1zZzogbXNnLCBjYjogZnVuY3Rpb24obXNnKSB7CgkJCQlhY3Rpb24gPT09IGZhbHNlIHx8IHRhYmxlLm9uYXBwZW5kLl9hY3Rpb24odGFibGUsIG1zZy5PcHRpb24oaWNlLk1TR19BQ1RJT04pfHxjYW4uQ29uZihpY2UuTVNHX0FDVElPTiksIGFjdGlvbikKCQkJCWFjdGlvbiA9PT0gZmFsc2UgfHwgdGFibGUub25hcHBlbmQuX3N0YXR1cyh0YWJsZSwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQkJfSwgdGFyZ2V0OiBvdXRwdXR8fGNhbi5fb3V0cHV0fSkKCQl9KQoJfSwKCV9zdGF0dXM6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgc3RhdHVzKSB7IHN0YXR1cyA9IHN0YXR1c3x8Y2FuLl9zdGF0dXMsIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHN0YXR1cykKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihsaXN0LCBjYW4uY29yZS5WYWx1ZShjYW4sIFtjaGF0Lk9ORVhQT1JULCBtZGIuTElTVF0pKSwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtID0gY2FuLmJhc2UuaXNPYmplY3QoaXRlbSk/IGl0ZW06IHtuYW1lOiBpdGVtfQoKCQkJaWYgKGl0ZW0udmFsdWUgJiYgaXRlbS52YWx1ZS5pbmRleE9mICYmIGl0ZW0udmFsdWUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgaXRlbS52YWx1ZSA9IGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGl0ZW0udmFsdWUpIH0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgc3RhdHVzLCBbe3ZpZXc6IGNhbi5iYXNlLmpvaW4oW2h0bWwuSVRFTSwgaXRlbS5uYW1lXSksIHRpdGxlOiBpdGVtLm5hbWUsIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbS5uYW1lLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbIjogIiwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyhpdGVtLnZhbHVlfHwiIikrIiIsIGh0bWwuU1BBTiwgaXRlbS5uYW1lXX0sCgkJCV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgaXRlbS52YWx1ZSkgfX1dKQoJCX0pCgl9LAoKCWZpZWxkOiBmdW5jdGlvbihjYW4sIHR5cGUsIGl0ZW0sIHRhcmdldCkgeyB0eXBlID0gdHlwZXx8aHRtbC5QTFVHSU4sIGl0ZW0gPSBpdGVtfHx7fQoJCXZhciBuYW1lID0gKGl0ZW0ubmlja3x8aXRlbS5uYW1lfHwiIikuc3BsaXQoaWNlLlNQKVswXQoJCXZhciB0aXRsZSA9ICFpdGVtLmhlbHAgfHwgY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBuYW1lOiBuYW1lKyIoIitpdGVtLmhlbHAuc3BsaXQoaWNlLlNQKVswXSsiKSIKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbdHlwZXx8IiIsIGl0ZW0ubmFtZXx8IiIsIGl0ZW0ucG9zfHwiIl0pLCBodG1sLkZJRUxEU0VUXSwgbGlzdDogWwoJCQluYW1lICYmIHt0ZXh0OiBbdGl0bGUsIGh0bWwuTEVHRU5EXX0sIHt2aWV3OiBbaHRtbC5PUFRJT04sIGh0bWwuRk9STV19LCB7dmlldzogW2h0bWwuQUNUSU9OXX0sIHt2aWV3OiBbaHRtbC5PVVRQVVRdfSwge3ZpZXc6IFtodG1sLlNUQVRVU119LAoJCV19XSkKCX0sCglpbnB1dDogZnVuY3Rpb24oY2FuLCBpdGVtLCB2YWx1ZSwgdGFyZ2V0LCBzdHlsZSkgewoJCXN3aXRjaCAoaXRlbS50eXBlKSB7CgkJCWNhc2UgIiI6IHJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtpdGVtXSkKCQkJY2FzZSBodG1sLlNQQUNFOiByZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGNhbi5iYXNlLmpvaW4oW2h0bWwuSVRFTSwgaHRtbC5TUEFDRV0pfV0pCgkJfQoJCXZhciBpbnB1dCA9IGNhbi5wYWdlLmlucHV0KGNhbiwgaXRlbSwgdmFsdWUpCgkJaWYgKGl0ZW0ucmFuZ2UpIHsKCQkJaW5wdXQuX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgaXRlbS5tb2RlID0gInNpbXBsZSIKCQkJCWNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUsIG9sZCkgewoJCQkJCXRhcmdldC52YWx1ZSA9IHZhbHVlLCBjYW4ub25hY3Rpb25baXRlbS5uYW1lXShldmVudCwgY2FuLCBpdGVtLm5hbWUpCgkJCQl9KQoJCQl9CgkJfQoJCXZhciBiciA9IGlucHV0LnR5cGUgPT0gaHRtbC5URVhUQVJFQT8gW3t0eXBlOiBodG1sLkJSLCBzdHlsZToge2NsZWFyOiBodG1sLkJPVEh9fV06IFtdCgkJdmFyIHRpdGxlID0gY2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBjaGF0LlRJVExFLCBpdGVtLm5hbWVdLmpvaW4oaWNlLlBUKSl8fCIiOyB0aXRsZSAmJiAoaW5wdXQudGl0bGUgPSB0aXRsZSkKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCAoW3t2aWV3OiBzdHlsZXx8Y2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBpdGVtLnR5cGVdKSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQlzd2l0Y2ggKGl0ZW0udHlwZSkgewoJCQkJY2FzZSBodG1sLlRFWFQ6CgkJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQkJY2FzZSBsYW5nLkVOVEVSOgoJCQkJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpOwoJCQkJCQkJY2FuLm9uYWN0aW9uICYmIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdICYmIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdKGV2ZW50LCBjYW4sIGl0ZW0ubmFtZSk7CgkJCQkJCQlicmVhawoJCQkJCX0KCQkJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbiksIGNhbi5vbm1vdGlvbi5zZWxlY3RGaWVsZChldmVudCwgY2FuKQoJCQkJCWJyZWFrCgkJCQljYXNlIGh0bWwuVEVYVEFSRUE6CgkJCQkJLy8gc3dpdGNoIChldmVudC5rZXkpIHsgY2FzZSBsYW5nLlRBQjogY2FuLm9ua2V5bWFwLmluc2VydFRleHQoZXZlbnQudGFyZ2V0LCBpY2UuVEIpOyBjYW4ub25rZXltYXAucHJldmVudChldmVudCk7IGJyZWFrIH0KCQkJCQlicmVhawoJCQl9CgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQl9LCBsaXN0OiBbaW5wdXRdfV0pLmNvbmNhdChicikpW2l0ZW0ubmFtZV0KCX0sCgl0YWJsZTogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQsIHNvcnQpIHsgaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHJldHVybiB9CgkJdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kVGFibGUoY2FuLCBtc2csIHRhcmdldHx8Y2FuLl9vdXRwdXQsIG1zZy5hcHBlbmQsIGNifHxmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQlpZiAoa2V5ID09IG1kYi5WQUxVRSkgeyBrZXkgPSBsaW5lLmtleSB9CgkJCQlsaW5lID0ge30sIGNhbi5jb3JlLkxpc3QoYXJyYXksIGZ1bmN0aW9uKGl0ZW0pIHsgbGluZVtpdGVtLmtleV0gPSBpdGVtLnZhbHVlIH0pCgkJCX0KCgkJCWlmIChrZXkgPT0gImV4dHJhLmNtZCIpIHsKCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7Y3R4OiBsaW5lWyJleHRyYS5jdHgiXSwgY21kOiBsaW5lWyJleHRyYS5jbWQiXSwgYXJnOiBsaW5lWyJleHRyYS5hcmciXX0sIGZ1bmN0aW9uKHN1YikgewoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBsaW5lLCBjYW4uT3B0aW9uKCkpCgkJCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBjYW4uY29yZS5LZXlzKGxpbmVbImV4dHJhLmN0eCJdLCBsaW5lWyJleHRyYS5jbWQiXSksIGNtZHMsIGNiKQoJCQkJCX0KCQkJCX0sIHRhcmdldHx8Y2FuLl9vdXRwdXQpCgkJCX0KCgkJCWZ1bmN0aW9uIHJ1bihjbWRzKSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIGxpbmUsIGNhbi5PcHRpb24oKSkKCQkJCXJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlpZiAoY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5zdXAsIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbi5zdXAsIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpICE9ICIiKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbi5zdXAsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpKQoJCQkJCX0gZWxzZSBpZiAobXNnLkxlbmd0aCgpID4gMCB8fCBtc2cuUmVzdWx0KCkubGVuZ3RoID4gMCApIHsKCQkJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWNhbi5VcGRhdGUoKQoJCQkJCX0KCQkJCX0sIHRydWUpCgkJCX0KCgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIHRhcmdldCkgJiYgdGFyZ2V0LnR5cGUgPT0gaHRtbC5CVVRUT04pIHsgcmV0dXJuIHJ1bihbY3R4LkFDVElPTiwgdGFyZ2V0Lm5hbWVdKSB9CgkJCQlpZiAoa2V5ID09IG1kYi5IQVNIICYmIGNhbi51c2VyLm1vZC5pc0RpdikgeyByZXR1cm4gY2FuLnVzZXIuanVtcHMoIi9jaGF0L2Rpdi8iK3ZhbHVlKSB9CgkJCQljYW4uc3VwLm9uYWN0aW9uLmNoYW5nZShldmVudCwgY2FuLnN1cCwga2V5LCBldmVudC50YXJnZXQuaW5uZXJUZXh0KQoKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKFttZGIuS0VZXS5pbmRleE9mKGtleSkgPiAtMSkgeyByZXR1cm4gfQoJCQkJdmFyIGl0ZW0gPSBjYW4uY29yZS5MaXN0KGNhbi5Db25mKCJmZWF0dXJlLmluc2VydCIpLCBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtLm5hbWUgPT0ga2V5KSB7IHJldHVybiBpdGVtIH0gfSlbMF18fHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0KCQkJCWl0ZW0ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIGxpbmUpLCBjbWRzLCBjYiwgdHJ1ZSkgfQoJCQkJY2FuLm9ubW90aW9uLm1vZGlmeXMoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7IHJ1bihbY3R4LkFDVElPTiwgbWRiLk1PRElGWSwga2V5LCB2YWx1ZV0pIH0sIGl0ZW0pCgkJCX19CgkJfSk7IHRhYmxlICYmIGNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCB0YWJsZSwgY2hhdC5DT05URU5UKQoJCWlmIChtc2cuYXBwZW5kICYmIG1zZy5hcHBlbmRbbXNnLmFwcGVuZC5sZW5ndGgtMV0gPT0gY3R4LkFDVElPTikgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFibGUsIGN0eC5BQ1RJT04pIH0KCQljYW4uX3RhYmxlID0gdGFibGUsIGNhbi5zdXAgJiYgKGNhbi5zdXAuX3RhYmxlID0gdGFibGUpCgkJcmV0dXJuIHNvcnQgJiYgY2FuLnBhZ2UuUmFuZ2VUYWJsZShjYW4sIHRhYmxlLCBzb3J0KSwgdGFibGUKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuLCB0ZXh0LCB0YXJnZXQpIHsgdGV4dCAmJiB0ZXh0LlJlc3VsdCAmJiAodGV4dCA9IHRleHQuUmVzdWx0KCkpOyBpZiAoIXRleHQpIHsgcmV0dXJuIH0KCQl2YXIgY29kZSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIFt7dGV4dDogW2Nhbi5wYWdlLkNvbG9yKHRleHQpLCBodG1sLkRJViwgaHRtbC5DT0RFXX1dKS5jb2RlCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY29kZSwgaHRtbC5JTlBVVF9CVVRUT04sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQl0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQkJCXJldHVybiBjYW4ucnVuQWN0aW9uKGV2ZW50LCB0YXJnZXQubmFtZSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ucnVuKCkgfSkKCQkJfQoJCX0pCgkJcmV0dXJuIChjb2RlLnNjcm9sbEJ5ICYmIGNvZGUuc2Nyb2xsQnkoMCwgMTAwMDApKSwgY29kZQoJfSwKCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIHZhbHVlLCBtZXRhLCBjYiwgdGFyZ2V0LCBmaWVsZCkgewoJCW1ldGEuZmVhdHVyZSA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuZmVhdHVyZSwgY2FuLmJhc2UuT2JqKHZhbHVlLm1ldGEpKXx8e30KCQltZXRhLmlucHV0cyA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuaW5wdXRzLCBjYW4uYmFzZS5PYmoodmFsdWUubGlzdCkpfHxbXQoJCW1ldGEuYXJncyA9IGNhbi5iYXNlLmdldFZhbGlkKGNhbi5iYXNlLk9iaihtZXRhLmFyZ3MpLCBjYW4uYmFzZS5PYmoobWV0YS5hcmcpLCBjYW4uYmFzZS5PYmoodmFsdWUuYXJncyksIGNhbi5iYXNlLk9iaih2YWx1ZS5hcmcpKXx8W10KCQltZXRhLmRpc3BsYXkgPSBtZXRhLmRpc3BsYXl8fHZhbHVlLmRpc3BsYXkKCgkJbWV0YS5oZWlnaHQgPSBtZXRhLmhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKQoJCW1ldGEud2lkdGggPSBtZXRhLndpZHRofHxjYW4uQ29uZldpZHRoKCkKCgkJbWV0YS50eXBlID0gbWV0YS50eXBlfHxjaGF0LlBMVUdJTgoJCW1ldGEubmFtZSA9IG1ldGEubmFtZXx8dmFsdWUubmFtZQoJCW1ldGEuaGVscCA9IG1ldGEuaGVscHx8dmFsdWUuaGVscAoKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBtZXRhLCBbY2hhdC5QTFVHSU5fU1RBVEVfSlNdLCBmdW5jdGlvbihzdWIsIHNraXApIHsgc3ViLl9pbmRleCA9IHZhbHVlLmluZGV4fHxtZXRhLmluZGV4CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIHN1Yi5faW5kZXgsIGNtZHMsIGNiKSB9CgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCBtZXRhLCBza2lwKQoJCX0sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIGZpZWxkKQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBmaWVsZCkgeyBtZXRhID0gbWV0YXx8e30sIG1ldGEuaW5kZXggPSBtZXRhLmluZGV4fHxjYW4uY29yZS5LZXlzKG1ldGEuY3R4LCBtZXRhLmNtZCkKCQl2YXIgcCA9IGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVttZXRhLmluZGV4XSwgcmVzID0ge307IGZ1bmN0aW9uIGNicyhzdWIsIG1ldGEsIHNraXApIHsgcmVzLl9fcHJvdG9fXyA9IHN1YiwgY2Ioc3ViLCBtZXRhLCBza2lwKSB9CgkJKG1ldGEubWV0YSB8fCBtZXRhLmlucHV0cyAmJiBtZXRhLmlucHV0cy5sZW5ndGggPiAwKT8gLyog5bGA6YOo5ZG95LukICovIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwge21ldGE6IG1ldGEubWV0YSwgbGlzdDogbWV0YS5saXN0fSwgbWV0YSwgY2JzLCB0YXJnZXQsIGZpZWxkKToKCQkJcD8gLyog5YmN56uv5ZG95LukICovIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwge25hbWU6IG1ldGEuaW5kZXgsIGhlbHA6IHAuaGVscCwgbWV0YTogcC5tZXRhLCBsaXN0OiBwLmxpc3R9LCBtZXRhLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIF9jYiA9IHAsIG4gPSAwCgkJCQkJaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1sxXV0gJiYgY21kc1swXSA9PSBjdHguQUNUSU9OKSB7IF9jYiA9IHAubWV0YVtjbWRzWzFdXSwgbiA9IDIgfSBlbHNlIGlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMF1dKSB7IF9jYiA9IHAubWV0YVtjbWRzWzBdXSwgbiA9IDEgfQoJCQkJCWNhbi5jb3JlLkNhbGxGdW5jKF9jYiwge2Nhbjogc3ViLCBtc2c6IGNhbi5yZXF1ZXN0KGV2ZW50KSwgY21kczogY21kcy5zbGljZShuKSwgY2I6IGNifSkKCQkJCX0KCQkJCWNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhzdWIsIG1ldGEsIHNraXApCgkJCX0sIHRhcmdldCwgZmllbGQpOiAvKiDlkI7nq6/lkb3ku6QgKi8gY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbWV0YSksIGN0eC5DT01NQU5ELCBbbWV0YS5pbmRleF0sIGZ1bmN0aW9uKG1zZykgeyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCWNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgdmFsdWUsIG1ldGEsIGNicywgdGFyZ2V0LCBmaWVsZCkKCQkJfSkgfSkKCQlyZXR1cm4gcmVzCgl9LAoJZmlndXJlOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCwgY2JzKSB7IGlmIChbaHRtbC5CVVRUT04sIGh0bWwuU0VMRUNUXS5pbmRleE9mKG1ldGEudHlwZSkgPiAtMSkgeyByZXR1cm4gfQoJCXZhciBpbnB1dCA9IG1ldGEuYWN0aW9ufHxtZGIuS0VZOyBpbnB1dCAhPSBpY2UuQVVUTyAmJiBjYW4ucmVxdWlyZShbIi9wbHVnaW4vaW5wdXQvIitpbnB1dCsiLmpzIl0sIGZ1bmN0aW9uKGNhbikgewoJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZmlndXJlW2lucHV0XSwgZnVuY3Rpb24oa2V5LCBvbikgeyB2YXIgbGFzdCA9IHRhcmdldFtrZXldOyB0YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IG9uKGV2ZW50LCBjYW4sIG1ldGEsIGZ1bmN0aW9uKGNiKSB7CgkJCQlmdW5jdGlvbiBfY2JzKHN1YiwgdmFsdWUsIG9sZCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2JzKT8gY2JzKHN1YiwgdmFsdWUsIG9sZCk6IHRhcmdldC52YWx1ZSA9IHZhbHVlfHwiIiwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfQoJCQkJaWYgKHRhcmdldC5fY2FuKSB7IHJldHVybiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgIHRhcmdldC5fY2FuLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldC5fY2FuLCBfY2JzKSB9CgkJCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogaHRtbC5JTlBVVCwgbmFtZTogaW5wdXQsIHBvczogY2hhdC5GTE9BVCwgbW9kZTogbWV0YS5tb2RlfSwgWyIvcGx1Z2luL2lucHV0LyIraW5wdXQrIi5qcyJdLCBmdW5jdGlvbihzdWIpIHsgc3ViLkNvbmYobWV0YSkKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQkJCWlmIChtZXRhLnJhbmdlKSB7CgkJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBmb3IgKHZhciBpID0gbWV0YS5yYW5nZVswXTsgaSA8IG1ldGEucmFuZ2VbMV07IGkgKz0gbWV0YS5yYW5nZVsyXXx8MSkgeyBtc2cuUHVzaCgidmFsdWUiLCBpKSB9IGNiKG1zZykKCQkJCQkJCXJldHVybgoJCQkJCQl9CgkJCQkJCShtZXRhLnJ1bnx8Y2FuLnJ1bikoc3ViLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIGNtZHMsIGNiLCB0cnVlKQoJCQkJCX0KCQkJCQljYW4ub25sYXlvdXQuZmlndXJlKHt0YXJnZXQ6IHRhcmdldH0sIGNhbiwgc3ViLl90YXJnZXQpLCBjYW4ucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCBtZXRhLnN0eWxlKQoJCQkJCXRhcmdldC5fY2FuID0gc3ViLCBzdWIuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgc3ViLl90YXJnZXQpLCBkZWxldGUodGFyZ2V0Ll9jYW4pIH0KCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YiwgX2NicyksIGNhbi5iYXNlLmlzRnVuYyhtZXRhLl9pbml0KSAmJiBtZXRhLl9pbml0KHN1Yiwgc3ViLl90YXJnZXQpCgkJCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCQkJfSwgdGFyZ2V0LCBsYXN0KSB9IH0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05MQVlPVVQsIHtoZWxwOiAi6aG16Z2i5biD5bGAIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9yb290Ll90YXJnZXQKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBjYW4uY29yZS5LZXlzKGh0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5QQUdFKSkubGVuZ3RoID4gMCkgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTEVGVCwgZnVuY3Rpb24oZmllbGQpIHsgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgIiIpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9MRUZULCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsICIiKQoJCQkJfSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkZJRUxEU0VUX01BSU4sIGZ1bmN0aW9uKGZpZWxkKSB7IGNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgZmllbGQsICIiKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgb3V0cHV0LCAiIikKCQkJCX0pCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJdmFyIHdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5wYWdlLktleXMoaHRtbC5GSUVMRFNFVF9IRUFELCBodG1sLkZJRUxEU0VUX0ZPT1QpLCBmdW5jdGlvbihmaWVsZCkgewoJCQloZWlnaHQgLT0gZmllbGQub2Zmc2V0SGVpZ2h0CgkJfSkKCgkJdmFyIG9mZnNldCA9IGNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAxMDA6IDAKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTEVGVCwgZnVuY3Rpb24oZmllbGQsIGluZGV4KSB7CgkJCWNhbi51c2VyLmlzTW9iaWxlIHx8ICh3aWR0aCAtPSBmaWVsZC5vZmZzZXRXaWR0aCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgaGVpZ2h0LW9mZnNldCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTEVGVCwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsIGhlaWdodC1vZmZzZXQtaHRtbC5BQ1RJT05fSEVJR0hULTIpCgkJCX0pCgkJfSkKCgkJY2FuLnVzZXIuaXNNb2JpbGUgfHwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkZJRUxEU0VUX01BSU4sIGZ1bmN0aW9uKGZpZWxkLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGZpZWxkLCBodG1sLkhFSUdIVCwgaGVpZ2h0LCBodG1sLldJRFRILCB3aWR0aCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJaGVpZ2h0IC09IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9BQ1RJT04pWzBdLm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsIGhlaWdodCkKCQkJfSkKCQl9KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNJWkUsIGNhbi5yZXF1ZXN0KHt9LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodH0pKQoJfSwKCWJhY2tncm91bmQ6IGZ1bmN0aW9uKGNhbiwgdXJsLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldHx8Y2FuLl9yb290Ll90YXJnZXQsIGh0bWwuQkFDS0dST1VORCwgdXJsID09ICIiIHx8IHVybCA9PSAidm9pZCI/ICIiOiAndXJsKCInK3VybCsnIiknKQoJfSwKCWZpZ3VyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCByaWdodCkgeyBpZiAoIWV2ZW50IHx8ICFldmVudC50YXJnZXQpIHsgcmV0dXJuIHt9IH0gdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX2ZpZWxkc3x8Y2FuLl90YXJnZXQKCQl2YXIgcmVjdCA9IGV2ZW50LnRhcmdldCA9PSBkb2N1bWVudC5ib2R5PyB7bGVmdDogd2luZG93LmlubmVyV2lkdGgvMiwgdG9wOiAyMDAsIHJpZ2h0OiB3aW5kb3cuaW5uZXJXaWR0aC8yLCBib3R0b206IDIwMH06IGV2ZW50LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBsYXlvdXQgPSByaWdodD8ge2xlZnQ6IHJlY3QucmlnaHQsIHRvcDogcmVjdC50b3B9OiB7bGVmdDogcmVjdC5sZWZ0LCB0b3A6IHJlY3QuYm90dG9tfQoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkgeyBsZWZ0ID0gbGVmdHx8MCwgdG9wID0gdG9wfHwwCgkJCWlmIChsYXlvdXQudG9wK3RhcmdldC5vZmZzZXRIZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHsKCQkJCWxheW91dC50b3AgPSAiIiwgbGF5b3V0LmJvdHRvbSA9IHJpZ2h0PyBodG1sLkFDVElPTl9IRUlHSFQ6IHdpbmRvdy5pbm5lckhlaWdodC1yZWN0LnRvcAoJCQl9CgkJCWlmIChsYXlvdXQubGVmdCt0YXJnZXQub2Zmc2V0V2lkdGggPiBsZWZ0K3dpZHRoKSB7CgkJCQlsYXlvdXQubGVmdCA9ICIiLCBsYXlvdXQucmlnaHQgPSAwCgkJCX0KCQl9KQoJCXJldHVybiBjYW4ub25tb3Rpb24ubW92ZShjYW4sIHRhcmdldCwgbGF5b3V0KSwgbGF5b3V0Cgl9LAoKCWRpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuQ09OVEVOVH1dfSwKCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5ESVNQTEFZfV19LAoJCV19XSkKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFt7dmlldzogY2hhdC5QUk9KRUNULCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbCgkJCQl7dmlldzogW2NoYXQuTEFZT1VULCBodG1sLlRBQkxFXSwgbGlzdDogWwoJCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuQ09OVEVOVH1dfSwKCQkJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t2aWV3OiBjaGF0LkRJU1BMQVl9XX0sCgkJCQldfQoJCQldfQoJCV19XSB9XSkKCX0sCglwcm9maWxlX2F1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuLCB0YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvamVjdCwgaWNlLkFVVE8pCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9maWxlLCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLmRpc3BsYXksIGljZS5BVVRPKQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgl9LAoJcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCWZ1bmN0aW9uIHRvZ2dsZSh2aWV3KSB7IHZhciBzaG93ID0gdmlldy5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgdmlldywgc2hvdyksIHZpZXcuX3RvZ2dsZT8gdmlldy5fdG9nZ2xlKGV2ZW50LCBzaG93KTogY2FuLm9uaW1wb3J0LmxheW91dCAmJiBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJcmV0dXJuIHNob3cKCQl9CgoJCS8vIHZhciBndCA9ICImIzEwMDk1OyIsIGx0ID0gIiYjMTAwOTQ7IiwgZG93biA9ICImIzcwOTsiLCB1cCA9ICImIzcwODsiCgkJdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiLCBkb3duID0gbHQsIHVwID0gZ3QKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuTEFZT1VULCBodG1sLlRBQkxFXSwgbGlzdDogWwoJCQl7dmlldzogW2NoYXQuUFJPSkVDVCwgaHRtbC5URF0sIGxpc3Q6IFt7dmlldzogW2NoYXQuUFJPSkVDVF19XX0sCgkJCXt0eXBlOiBodG1sLlRELCBsaXN0OiBbCgkJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRSLCBsaXN0OiBbCgkJCQkJe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVERdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LkNPTlRFTlRdfSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPSkVDVF1dLCBsaXN0OiBbe3RleHQ6IFtsdCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLnByb2plY3QpPyBsdDogZ3QsIGh0bWwuRElWXX1dKQoJCQkJCQl9fSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPRklMRV1dLCBsaXN0OiBbe3RleHQ6IFtsdCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLnByb2ZpbGUpPyBndDogbHQsIGh0bWwuRElWXX1dKQoJCQkJCQl9fSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuRElTUExBWV1dLCBsaXN0OiBbe3RleHQ6IFt1cCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLmRpc3BsYXkpPyBkb3duOiB1cCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCV19LAoJCQkJCXt2aWV3OiBbY2hhdC5QUk9GSUxFLCBodG1sLlREXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5QUk9GSUxFXSwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9fV19LAoJCQkJXX1dfSwKCQkJCXt2aWV3OiBbY2hhdC5ESVNQTEFZLCBodG1sLlRSXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5ESVNQTEFZXSwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9fV19CgkJCV19CgkJXSB9XSk7IHJldHVybiBjYW4udWkgPSB1aQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTk1PVElPTiwge2hlbHA6ICLliqjmgIHnibnmlYgiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihodG1sLk9SSUVOVEFUSU9OQ0hBTkdFLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5PUklFTlRBVElPTkNIQU5HRSkgfSkKCQljYW4ub25tb3Rpb24uZmxvYXQuYXV0byhjYW4sIHRhcmdldCkKCX0sCglmbG9hdDoge19oYXNoOiB7fSwKCQlkZWw6IGZ1bmN0aW9uKGNhbiwga2V5KSB7CgkJCWtleSA9PSBjaGF0LkNBUlRFICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBjaGF0LkNBUlRFKSwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB0YXJnZXQpCgkJCX0pCgkJCXZhciBsYXN0ID0gdGhpcy5faGFzaFtrZXldOyBpZiAoIWxhc3QpIHsgcmV0dXJuIH0KCQkJbGFzdC5jbG9zZT8gbGFzdC5jbG9zZSgpOiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBsYXN0Ll90YXJnZXQpCgkJfSwKCQlhZGQ6IGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgeyByZXR1cm4gdGhpcy5kZWwoY2FuLCBrZXkpLCB0aGlzLl9oYXNoW2tleV0gPSB2YWx1ZSB9LAoJCWF1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXkpIHsgdmFyIHRoYXQgPSB0aGlzCgkJCXZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDIpCgkJCWlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7IGxpc3QgPSBbY2hhdC5DQVJURSwgY2hhdC5JTlBVVF0gfQoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgCgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTUcsIGV2ZW50LnRhcmdldCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5LCBpbmRleCkgeyB0aGF0LmRlbChjYW4sIGtleSkgfSkKCQkJfX0pCgkJfSwKCX0sCglzdG9yeTogewoJCV9oYXNoOiB7CgkJCXNwYXJrOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCkgewoJCQkJbWV0YVttZGIuTkFNRV0gPT0gaHRtbC5JTk5FUj8gY2FuLm9ubW90aW9uLmNvcHkoY2FuLCB0YXJnZXQpOiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuU1BBTiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSkKCQkJCX0pCgkJCX0sCgkJfSwKCQlhdXRvOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB2YXIgdGhhdCA9IHRoaXM7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiLnN0b3J5IiwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgbWV0YSA9IGl0ZW0uZGF0YXNldAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCBjYW4uYmFzZS5PYmoobWV0YS5zdHlsZSkpCgkJCQljYW4uY29yZS5DYWxsRnVuYyh0aGF0Ll9oYXNoW21ldGEudHlwZV0sIFtjYW4sIG1ldGEsIHRhcmdldF0pCgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCktODgsIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKS0zMCkKCQkJfSkKCQl9LAoJfSwKCWNvcHk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB0ZXh0LCBjYikgewoJCXRhcmdldC50aXRsZSA9ICLngrnlh7vlpI3liLYiLCB0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgdGV4dHx8dGFyZ2V0LmlubmVyVGV4dCkKCQkJY2FuLnJlcXVlc3QoZXZlbnQsIGtpdC5EaWN0KGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSkpCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQpCgkJfQoJfSwKCWxpbms6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB0ZXh0KSB7CgkJaWYgKHRhcmdldC5pbm5lclRleHQgPT0gIiIpIHsgdGFyZ2V0LmlubmVyVGV4dCA9IHRhcmdldC5ocmVmIH0KCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHt0YXJnZXQ6ICJfYmxhbmsifSkKCX0sCgoJY2xlYXI6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCAiIiksIHRydWUgfSwKCWNhY2hlOiBmdW5jdGlvbihjYW4sIG5leHQpIHsgdmFyIGxpc3QgPSBjYW4uYmFzZS5PYmooY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDIpLCBbY2FuLl9vdXRwdXRdKQoJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLl9jYWNoZV9rZXkgJiYgY2FuLnBhZ2UuQ2FjaGUoaXRlbS5fY2FjaGVfa2V5LCBpdGVtLCBpdGVtLnNjcm9sbFRvcCsxKSB9KQoJCXZhciBrZXkgPSBuZXh0KGNhbi5fY2FjaGVfZGF0YSA9IGNhbi5fY2FjaGVfZGF0YXx8e30pOyBpZiAoIWtleSkgeyByZXR1cm4gfQoJCXJldHVybiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHBvcyA9IGNhbi5wYWdlLkNhY2hlKGl0ZW0uX2NhY2hlX2tleSA9IGtleSwgaXRlbSkKCQkJaWYgKHBvcykgeyBpdGVtLnNjcm9sbFRvICYmIGl0ZW0uc2Nyb2xsVG8oMCwgcG9zLTEpOyByZXR1cm4gaXRlbSB9CgkJfSkubGVuZ3RoID4gMAoJfSwKCWRlbGF5OiBmdW5jdGlvbihjYW4sIGNiLCBpbnRlcnZhbCkgeyBjYW4uY29yZS5UaW1lcihpbnRlcnZhbHx8MTAwLCBjYikgfSwKCWZvY3VzOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyBpZiAoIXRhcmdldCkgeyByZXR1cm4gfQoJCXRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSAmJiB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpLCB0YXJnZXQuZm9jdXMoKQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBpbnB1dCwgYXJncykgeyB2YXIgX2FyZ3MgPSBhcmdzCgkJcmV0dXJuIGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGlucHV0LCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5zZWFyY2goY2FuLnJlcXVlc3QoZXZlbnQsIHthcmdzOiBbbWRiLlRZUEUsIGNoYXQuRklFTERdLmNvbmNhdChfYXJnc3x8W10sIGFyZ3N8fFtdKX0pLCBbWyJIZWFkZXIiLCBjaGF0Lk9OQUNUSU9OLCB3ZWIuU0hBUkVdXSkKCQl9KQoJfSwKCgloaWRkZW46IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBzaG93KSB7CgkJY2FuLnBhZ2Uuc3R5bGVEaXNwbGF5KGNhbiwgdGFyZ2V0fHxjYW4uX3RhcmdldCwgc2hvdz8gIiI6IGh0bWwuTk9ORSkKCQlyZXR1cm4gc2hvdwoJfSwKCXRvZ2dsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHNob3csIGhpZGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCWlmIChzaG93ID09PSB0cnVlKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0LCB0cnVlKSB9CgkJaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0LCBmYWxzZSkgfQoJCXZhciBzdGF0dXMgPSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9PSBodG1sLk5PTkUKCQlpZiAoIShzdGF0dXM/IGNhbi5iYXNlLmlzRnVuYyhzaG93KSAmJiBzaG93KCk6IGNhbi5iYXNlLmlzRnVuYyhoaWRlKSAmJiBoaWRlKCkpKSB7CgkJCWNhbi5wYWdlLnN0eWxlRGlzcGxheShjYW4sIHRhcmdldCwgc3RhdHVzPyAiIjogaHRtbC5OT05FKQoJCX0KCQlyZXR1cm4gc3RhdHVzCgl9LAoJc2VsZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbmFtZSwgd2hpY2gpIHsKCQl2YXIgb2xkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBuYW1lLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKSkgeyByZXR1cm4gaW5kZXggfQoJCX0pWzBdCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBuYW1lLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQljYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QsIGl0ZW0gPT0gd2hpY2ggfHwgd2hpY2ggPT0gaW5kZXgpCgkJfSkKCQlyZXR1cm4gb2xkCgl9LAoJbW9kaWZ5OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgY2IsIGl0ZW0pIHsgdmFyIGJhY2sgPSB0YXJnZXQuaW5uZXJIVE1MLCB0ZXh0ID0gdGFyZ2V0LmlubmVyVGV4dAoJCWlmIChiYWNrLmxlbmd0aCA+IDEyMCB8fCBiYWNrLmluZGV4T2YoaWNlLk5MKSA+IC0xKSB7CgkJCXJldHVybiBjYW4ub25tb3Rpb24ubW9kaWZ5cyhjYW4sIHRhcmdldCwgY2IpCgkJfQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JTlBVVCwgdmFsdWU6IHRhcmdldC5pbm5lclRleHQsIHN0eWxlOiB7CgkJCXdpZHRoOiB0YXJnZXQub2Zmc2V0V2lkdGggPiA0MDA/IDQwMDogdGFyZ2V0Lm9mZnNldFdpZHRoLTIwLAoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogdGFyZ2V0LmlubmVySFRNTCA9IGV2ZW50LnRhcmdldC52YWx1ZQoJCQkJCWV2ZW50LnRhcmdldC52YWx1ZSA9PSBiYWNrIHx8IGNiKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIGJhY2spCgkJCQkJYnJlYWsKCQkJCWNhc2UgbGFuZy5FU0NBUEU6IHRhcmdldC5pbm5lckhUTUwgPSBiYWNrOyBicmVhawoJCQkJZGVmYXVsdDogY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCX0KCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IGl0ZW0gJiYgY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCwgY2IpCgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQuY2xpY2soKSB9KQoJCX19XSkKCX0sCgltb2RpZnlzOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgY2IsIGl0ZW0pIHsgdmFyIGJhY2sgPSB0YXJnZXQuaW5uZXJIVE1MCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCB2YWx1ZTogdGFyZ2V0LmlubmVyVGV4dCwgc3R5bGU6IHsKCQkJd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aCA+IDQwMD8gNDAwOiB0YXJnZXQub2Zmc2V0V2lkdGgtMjAsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCA8IDYwPyA2MDogdGFyZ2V0Lm9mZnNldEhlaWdodC0yMCwKCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQljYXNlIGxhbmcuRU5URVI6CgkJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsgdGFyZ2V0LmlubmVySFRNTCA9IGV2ZW50LnRhcmdldC52YWx1ZQoJCQkJCQlldmVudC50YXJnZXQudmFsdWUgPT0gYmFjayB8fCBjYihldmVudCwgZXZlbnQudGFyZ2V0LnZhbHVlLCBiYWNrKQoJCQkJCX0KCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLkVTQ0FQRTogdGFyZ2V0LmlubmVySFRNTCA9IGJhY2s7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJfQoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJaXRlbSAmJiBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KQoJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdGFyZ2V0LmNsaWNrKCkgfSkKCQl9fV0pCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2h0bWwyY2FudmFzQDEuMC4wLXJjLjUvZGlzdC9odG1sMmNhbnZhcy5taW4uanMiXSwgZnVuY3Rpb24oKSB7CgkJCWh0bWwyY2FudmFzKHRhcmdldHx8Y2FuLl90YXJnZXQpLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgeyB2YXIgdXJsID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikKCQkJCXZhciB0b2FzdCA9IGNhbi51c2VyLnRvYXN0KGNhbiwge2NvbnRlbnQ6IHtpbWc6IHVybCwgc3R5bGU6IHsibWF4LWhlaWdodCI6IDI0MCwgZGlzcGxheTogaHRtbC5CTE9DS319LCBkdXJhdGlvbjogLTEsCgkJCQkJYWN0aW9uOiBzaHkoe30sIFtjbGkuQ0xPU0UsICJkb3dubG9hZCJdLCBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogbWRiLk5BTUUsIHZhbHVlOiBuYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsgdG9hc3QuY2xvc2UoKQoJCQkJCQkJY2FuLnBhZ2UuQ3JlYXRlKGNhbiwgaHRtbC5BLCB7aHJlZjogdXJsLCBkb3dubG9hZDogbGlzdFswXSsiLnBuZyJ9KS5jbGljaygpCgkJCQkJCX0pCgkJCQkJfSksCgkJCQl9KQoJCQl9KQoJCX0pCgl9LAoKCWhpZGU6IGZ1bmN0aW9uKGNhbiwgdGltZSwgY2IsIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJdGltZSA9IGNhbi5iYXNlLmlzT2JqZWN0KHRpbWUpPyB0aW1lOiB7dmFsdWU6IDEwLCBsZW5ndGg6IHRpbWV8fDIwfQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk9QQUNJVFksIDEpCgkJY2FuLmNvcmUuVGltZXIodGltZSwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAxLShpbmRleCsxKS90aW1lLmxlbmd0aCkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpLCBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5ESVNQTEFZLCBodG1sLk5PTkUpIH0pCgl9LAoJc2hvdzogZnVuY3Rpb24oY2FuLCB0aW1lLCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQl0aW1lID0gY2FuLmJhc2UuaXNPYmplY3QodGltZSk/IHRpbWU6IHtpbnRlcnZhbDogMTAsIGxlbmd0aDogdGltZXx8MzB9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgMCwgaHRtbC5ESVNQTEFZLCBodG1sLkJMT0NLKQoJCWNhbi5jb3JlLlRpbWVyKHRpbWUsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgaW5kZXgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgKGluZGV4KzEpL3RpbWUubGVuZ3RoKQoJCX0sIGNiKQoJfSwKCW1vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsYXlvdXQsIGNiKSB7IHZhciBiZWdpbjsgbGF5b3V0ID0gbGF5b3V0fHx7fQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBsYXlvdXQpLCB0YXJnZXQub25tb3VzZWRvd24gPSBmdW5jdGlvbihldmVudCkgewoJCQlsYXlvdXQuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCwgbGF5b3V0LndpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoCgkJCWxheW91dC5sZWZ0ID0gdGFyZ2V0Lm9mZnNldExlZnQsIGxheW91dC50b3AgPSB0YXJnZXQub2Zmc2V0VG9wCgkJCWJlZ2luID0gY2FuLmJhc2UuQ29weSh7eDogZXZlbnQueCwgeTogZXZlbnQueX0sIGxheW91dCkKCQl9LCB0YXJnZXQub25tb3VzZXVwID0gZnVuY3Rpb24oZXZlbnQpIHsgYmVnaW4gPSBudWxsIH0KCgkJdGFyZ2V0Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFiZWdpbiB8fCAhZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfQoJCQlpZiAoZXZlbnQuc2hpZnRLZXkpIHsKCQkJCWxheW91dC53aWR0aCA9IGxheW91dC53aWR0aCArIGV2ZW50LnggLSBiZWdpbi54IAoJCQkJbGF5b3V0LmhlaWdodCA9IGxheW91dC5oZWlnaHQgKyBldmVudC55IC0gYmVnaW4ueQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBsYXlvdXQuaGVpZ2h0LCBodG1sLldJRFRILCBsYXlvdXQud2lkdGgpCgkJCX0gZWxzZSB7CgkJCQlsYXlvdXQudG9wID0gYmVnaW4udG9wICsgZXZlbnQueSAtIGJlZ2luLnkKCQkJCWxheW91dC5sZWZ0ID0gYmVnaW4ubGVmdCArIGV2ZW50LnggLSBiZWdpbi54IAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuTEVGVCwgbGF5b3V0LmxlZnQsIGh0bWwuVE9QLCBsYXlvdXQudG9wKQoJCQl9CgkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0YXJnZXQsIGxheW91dCkKCQl9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0YXJnZXQsIGxheW91dCkKCX0sCgoJc2VsZWN0RmllbGQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoIWV2ZW50LmN0cmxLZXkgfHwgZXZlbnQua2V5IDwgIjAiIHx8IGV2ZW50LmtleSA+ICI5IikgeyByZXR1cm4gfQoJCWlmIChldmVudC5rZXkgPT0gIjAiKSB7IHJldHVybiBjYW4ub25pbXBvcnQuX2JhY2soY2FuKSB9CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gZXZlbnQua2V5KSB7CgkJCXZhciBoZWFkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuVEgsIGZ1bmN0aW9uKHRoLCBvcmRlcikgeyByZXR1cm4gdGguaW5uZXJUZXh0IH0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsgY2FuLk9wdGlvbihoZWFkW2luZGV4XSwgdGQuaW5uZXJUZXh0KSB9KQoJCQljYW4uVXBkYXRlKGV2ZW50KQoJCX0gfSkKCX0sCglzZWxlY3RJbnB1dFRhYmxlOiBmdW5jdGlvbihldmVudCwgY2FuLCBjYiwgdGFyZ2V0KSB7CgkJLy8gaWYgKHRhcmdldC52YWx1ZSA9PSAiIikgeyByZXR1cm4gY2IoKSB9CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSBsYW5nLlNISUZUOgoJCQljYXNlIGxhbmcuQ09OVFJPTDoKCQkJCXJldHVybgoJCX0KCgkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJaWYgKHRhcmdldC5faW5kZXggPT0gdW5kZWZpbmVkKSB7CgkJCQl0YXJnZXQuX2luZGV4ID0gLTEsIHRhcmdldC5fdmFsdWUgPSB0YXJnZXQudmFsdWUKCQkJfQoJCQlmdW5jdGlvbiBzZWxlY3Qob3JkZXIpIHsgaWYgKG9yZGVyID09IC0xKSB7IHRhcmdldC52YWx1ZSA9IHRhcmdldC5fdmFsdWUgfQoJCQkJdmFyIGluZGV4ID0gMDsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgaHRtbC5ISURERU4pKSB7IHJldHVybiB9CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLlNFTEVDVCk7IGlmIChvcmRlciAhPSBpbmRleCsrKSB7IHJldHVybiB0ciB9CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLlNFTEVDVCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsKCQkJCQkJaW5kZXggPT0gMCAmJiAodGFyZ2V0LnZhbHVlID0gdGQuaW5uZXJUZXh0KQoJCQkJCX0pOyByZXR1cm4gdHIKCQkJCX0pLmxlbmd0aAoJCQl9CgkJCXZhciB0b3RhbCA9IHNlbGVjdCh0YXJnZXQuX2luZGV4KTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgIm4iOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4KzIpICUgKHRvdGFsKzEpIC0gMSk7IGJyZWFrCgkJCQljYXNlICJwIjogc2VsZWN0KHRhcmdldC5faW5kZXggPSAodGFyZ2V0Ll9pbmRleCt0b3RhbCsxKSAlICh0b3RhbCsxKSAtIDEpOyBicmVhawoJCQkJZGVmYXVsdDogcmV0dXJuCgkJCX0KCQkJcmV0dXJuIGNhbi5TdGF0dXMobWRiLklOREVYLCB0YXJnZXQuX2luZGV4KSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJfQoKCQl0YXJnZXQuX2luZGV4ID0gLTEsIHRhcmdldC5fdmFsdWUgPSB0YXJnZXQudmFsdWUKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJdmFyIGhhcyA9IGZhbHNlOyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCWhhcyA9IGhhcyB8fCB0ZC5pbm5lclRleHQuaW5kZXhPZih0YXJnZXQudmFsdWUpPi0xCgkJCX0pLCBjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuSElEREVOLCAhaGFzKQoJCX0pCgoJCXZhciB0b3RhbCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCBodG1sLkhJRERFTikpIHsgcmV0dXJuIHRyIH0KCQl9KS5sZW5ndGg7IHRvdGFsID09IDAgJiYgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJY2FuLlN0YXR1cyhraXQuRGljdChtZGIuVE9UQUwsIHRvdGFsLCBtZGIuSU5ERVgsIHRhcmdldC5faW5kZXgpKQoJfSwKCXNlbGVjdFRhYmxlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNiKSB7IGlmICghZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfQoJCWZ1bmN0aW9uIHNlbGVjdChvcmRlcikgeyB2YXIgaW5kZXggPSAwCgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsIGh0bWwuSElEREVOKSkgeyByZXR1cm4gfQoJCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuU0VMRUNULCBvcmRlciA9PSBpbmRleCsrKSkgeyByZXR1cm4gdHIgfQoJCQkJcmV0dXJuIGNhbi5TdGF0dXMobWRiLklOREVYLCBpbmRleC0xKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0ciksIHRyCgkJCX0pLmxlbmd0aAoJCX0KCQl2YXIgdG90YWwgPSBzZWxlY3QodGFyZ2V0Ll9pbmRleCk7IHN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgIm4iOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICgodGFyZ2V0Ll9pbmRleCkrMSkgJSB0b3RhbCk7IGJyZWFrCgkJCWNhc2UgInAiOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4LTEpIDwgMD8gdG90YWwtMTogKHRhcmdldC5faW5kZXgtMSkpOyBicmVhawoJCQlkZWZhdWx0OiB0YXJnZXQuX2luZGV4ID0gMDsgcmV0dXJuCgkJfSBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwgX2ZvY3VzOiBbXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJZG9jdW1lbnQuYm9keS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJaWYgKHdpbmRvdy53ZWJ2aWV3KSB7CgkJCQlpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT0gIkEiKSB7IGNhbi51c2VyLm9wZW4oZXZlbnQudGFyZ2V0LmhyZWYpIH0KCQkJfQoJCQlpZiAoY2FuLnBhZ2UudGFnaXMoW2h0bWwuU0VMRUNULCBodG1sLklOUFVULCBodG1sLlRFWFRBUkVBXSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBkb2N1bWVudC5ib2R5LCBjYW4ucGFnZS5LZXlzKCJmaWVsZHNldC5pbnB1dC5rZXkuZmxvYXQiKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJfSkKCQl9CgkJY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pLCBkb2N1bWVudC5ib2R5Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWlmIChldmVudC5tZXRhS2V5KSB7IGlmICh3aW5kb3cud2VidmlldykgewoJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQljYXNlICJxIjogd2luZG93LnRlcm1pbmF0ZSgpOyBicmVhawoJCQkJCWNhc2UgInciOiBjYW4udXNlci5jbG9zZSgpOyBicmVhawoJCQkJCWNhc2UgInIiOiBjYW4udXNlci5yZWxvYWQoKTsgYnJlYWsKCQkJCQljYXNlICJmIjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdCh7fSwge3R5cGU6ICIqIn0pKTsgYnJlYWsKCQkJCQljYXNlICJbIjogaGlzdG9yeS5iYWNrKCk7IGJyZWFrCgkJCQkJY2FzZSAiXSI6IGhpc3RvcnkuZm9yd2FyZCgpOyBicmVhawoJCQkJfQoJCQl9IHJldHVybiB9CgoJCQlpZiAoY2FuLnBhZ2UudGFnaXMoW2h0bWwuU0VMRUNULCBodG1sLklOUFVULCBodG1sLlRFWFRBUkVBXSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHsibW9kZWwiOiAibm9ybWFsIn0pOyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05LRVlET1dOLCBtc2cpOyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJY2FuLl9rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBtc2cuT3B0aW9uKCJtb2RlbCIpLCBjYW4uX2tleWxpc3QsIGNhbi5fb3V0cHV0KQoJCX0KCX0sCglfYnVpbGQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm9ua2V5bWFwLl9tb2RlLCBmdW5jdGlvbihpdGVtLCB2YWx1ZSkgeyB2YXIgZW5naW5lID0ge2xpc3Q6IHt9fQoJCQljYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IHZhciBtYXAgPSBlbmdpbmUKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKCFtYXAubGlzdFtrZXlbaV1dKSB7IG1hcC5saXN0W2tleVtpXV0gPSB7bGlzdDoge319IH0KCQkJCQltYXAgPSBtYXAubGlzdFtrZXlbaV1dOyBpZiAoaSA9PSBrZXkubGVuZ3RoLTEpIHsgbWFwLmNiID0gY2IgfQoJCQkJfQoJCQl9KSwgY2FuLm9ua2V5bWFwLl9lbmdpbmVbaXRlbV0gPSBlbmdpbmUKCQl9KQoJfSwKCV9wYXJzZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbW9kZSwgbGlzdCwgdGFyZ2V0KSB7IGxpc3QgPSBsaXN0fHxbXQoJCWlmIChbIkNvbnRyb2wiLCAiU2hpZnQiXS5pbmRleE9mKGV2ZW50LmtleSkgPiAtMSkgeyByZXR1cm4gbGlzdCB9CgkJbGlzdC5wdXNoKGV2ZW50LmtleSk7IGZvciAodmFyIHByZSA9IDA7IHByZSA8IGxpc3QubGVuZ3RoOyBwcmUrKykgewoJCQlpZiAoIjAiIDw9IGxpc3RbcHJlXSAmJiBsaXN0W3ByZV0gPD0gIjkiKSB7IGNvbnRpbnVlIH0gYnJlYWsKCQl9OyB2YXIgY291bnQgPSBwYXJzZUludChsaXN0LnNsaWNlKDAsIHByZSkuam9pbigiIikpfHwxCgoJCXZhciBtYXAgPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV0KCQlmdW5jdGlvbiByZXBlYXQoY2IsIGNvdW50KSB7IGxpc3QgPSBbXTsgZm9yICh2YXIgaSA9IDE7IGkgPD0gY291bnQ7IGkrKykgeyBpZiAoY2IoZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkpIHsgYnJlYWsgfSB9IH0KCQl2YXIgY2IgPSBtYXAgJiYgbWFwW2V2ZW50LmtleV07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGV2ZW50LmtleS5sZW5ndGggPiAxKSB7IHJlcGVhdChjYiwgY291bnQpOyByZXR1cm4gbGlzdCB9CgkJdmFyIGNiID0gbWFwICYmIG1hcFtldmVudC5rZXkudG9Mb3dlckNhc2UoKV07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGV2ZW50LmtleS5sZW5ndGggPiAxKSB7IHJlcGVhdChjYiwgY291bnQpOyByZXR1cm4gbGlzdCB9CgoJCXZhciBtYXAgPSBjYW4ub25rZXltYXAuX2VuZ2luZVttb2RlXTsgaWYgKCFtYXApIHsgcmV0dXJuIFtdIH0KCQlmb3IgKHZhciBpID0gcHJlOyBpIDwgbGlzdC5sZW5ndGg7IGkrKyApIHsKCQkJdmFyIG1hcCA9IG1hcC5saXN0W2xpc3RbaV1dOyBpZiAoIW1hcCkgeyByZXR1cm4gW10gfQoJCQlpZiAoaSA9PSBsaXN0Lmxlbmd0aC0xICYmIGNhbi5iYXNlLmlzRnVuYyhtYXAuY2IpKSB7IHJlcGVhdChtYXAuY2IsIGNvdW50KTsgcmV0dXJuIFtdIH0KCQl9CgkJcmV0dXJuIGxpc3QKCX0sCglfbW9kZTogewoJCWluc2VydDogewoJCQlqazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldC5ibHVyKCksIGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTEsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJRXNjYXBlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LmJsdXIoKSB9LAoJCQlFbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBoaXMgPSB0YXJnZXQuX2hpc3Rvcnl8fFtdCgkJCQloaXMucHVzaCh0YXJnZXQudmFsdWUpLCB0YXJnZXQuX2hpc3RvcnkgPSBoaXMsIHRhcmdldC5fY3VycmVudCA9IGhpcy5sZW5ndGgKCQkJCWNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIGV2ZW50LnRhcmdldCkgJiYgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJCQl9LAoJCX0sCgkJaW5zZXJ0X2N0cmw6IHsKCQkJcDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgaGlzID0gdGFyZ2V0Ll9oaXN0b3J5fHxbXSwgcG9zID0gdGFyZ2V0Ll9jdXJyZW50fHwwCgkJCQlwb3MgPSAtLXBvcyAlIChoaXMubGVuZ3RoKzEpOyBpZiAocG9zIDwgMCkgeyBwb3MgPSBoaXMubGVuZ3RoIH0KCQkJCXRhcmdldC5fY3VycmVudCA9IHBvcywgdGFyZ2V0LnZhbHVlID0gaGlzW3Bvc118fCIiCgkJCX0sCgkJCW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJdmFyIGhpcyA9IHRhcmdldC5faGlzdG9yeXx8W10sIHBvcyA9IHRhcmdldC5fY3VycmVudHx8MAoJCQkJcG9zID0gKytwb3MgJSAoaGlzLmxlbmd0aCsxKQoJCQkJdGFyZ2V0Ll9jdXJyZW50ID0gcG9zLCB0YXJnZXQudmFsdWUgPSBoaXNbcG9zXXx8IiIKCQkJfSwKCgkJCXU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIDAsIHRhcmdldC5zZWxlY3Rpb25FbmQpIH0sCgkJCWs6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJaDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTEsIDEpIH0sCgkJCWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIDAsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBzdGFydCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydC0yLCBlbmQgPSB0YXJnZXQuc2VsZWN0aW9uRW5kLTEKCQkJCWZvciAodmFyIGkgPSBzdGFydDsgaSA+PSAwOyBpLS0pIHsKCQkJCQlpZiAodGFyZ2V0LnZhbHVlW2VuZF0gPT0gaWNlLlNQICYmIHRhcmdldC52YWx1ZVtpXSAhPSBpY2UuU1ApIHsgYnJlYWsgfQoJCQkJCWlmICh0YXJnZXQudmFsdWVbZW5kXSAhPSBpY2UuU1AgJiYgdGFyZ2V0LnZhbHVlW2ldID09IGljZS5TUCkgeyBicmVhayB9CgkJCQl9IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgaSsxLCBlbmQtaSkKCQkJfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCgoJaW5wdXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50Lm1ldGFrZXkpIHsgcmV0dXJuIH0gdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCXRhcmdldC5fa2V5cyA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgZXZlbnQuY3RybEtleT8gImluc2VydF9jdHJsIjogbWRiLklOU0VSVCwgdGFyZ2V0Ll9rZXlzLCB0YXJnZXQpCgl9LAoJcHJldmVudDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IHJldHVybiB0cnVlIH0sCglkZWxldGVUZXh0OiBmdW5jdGlvbih0YXJnZXQsIHN0YXJ0LCBjb3VudCkgeyB2YXIgZW5kID0gY291bnQ/IHN0YXJ0K2NvdW50OiB0YXJnZXQudmFsdWUubGVuZ3RoCgkJdmFyIGN1dCA9IHRhcmdldC52YWx1ZS5zbGljZShzdGFydCwgZW5kKQoJCXRhcmdldC52YWx1ZSA9IHRhcmdldC52YWx1ZS5zdWJzdHJpbmcoMCwgc3RhcnQpK3RhcmdldC52YWx1ZS5zdWJzdHJpbmcoZW5kLCB0YXJnZXQudmFsdWUubGVuZ3RoKQoJCXJldHVybiB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIHN0YXJ0KSwgY3V0Cgl9LAoJaW5zZXJ0VGV4dDogZnVuY3Rpb24odGFyZ2V0LCB0ZXh0KSB7IHZhciBzdGFydCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydAoJCXZhciBiZWZvcmUgPSB0YXJnZXQudmFsdWUuc2xpY2UoMCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KQoJCXZhciBhZnRlciA9IHRhcmdldC52YWx1ZS5zbGljZSh0YXJnZXQuc2VsZWN0aW9uRW5kKQoJCXRhcmdldC52YWx1ZSA9IGJlZm9yZSt0ZXh0K2FmdGVyCgkJcmV0dXJuIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCsxLCBzdGFydCsxKQoJfSwKCWN1cnNvck1vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjb3VudCwgYmVnaW4pIHsgYmVnaW4gIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShiZWdpbiwgYmVnaW4pCgkJdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHRhcmdldC5zZWxlY3Rpb25TdGFydCtjb3VudCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0K2NvdW50KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcmVxdWlyZS9ub2RlX21vZHVsZXMveHRlcm0vbGliL3h0ZXJtLmpzIgohZnVuY3Rpb24oZSx0KXtpZigib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlKW1vZHVsZS5leHBvcnRzPXQoKTtlbHNlIGlmKCJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQpZGVmaW5lKFtdLHQpO2Vsc2V7dmFyIHI9dCgpO2Zvcih2YXIgaSBpbiByKSgib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0czplKVtpXT1yW2ldfX0oc2VsZiwoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9ezQ1Njc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQWNjZXNzaWJpbGl0eU1hbmFnZXI9dm9pZCAwO3ZhciBvPXIoOTA0Mikscz1yKDYxMTQpLGE9cig5OTI0KSxjPXIoMzY1NiksbD1yKDg0NCksaD1yKDU1OTYpLHU9cig5NjMxKSxmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7aS5fdGVybWluYWw9dCxpLl9yZW5kZXJTZXJ2aWNlPXIsaS5fbGl2ZVJlZ2lvbkxpbmVDb3VudD0wLGkuX2NoYXJzVG9Db25zdW1lPVtdLGkuX2NoYXJzVG9Bbm5vdW5jZT0iIixpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWFjY2Vzc2liaWxpdHkiKSxpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QudGFiSW5kZXg9MCxpLl9yb3dDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksaS5fcm93Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgicm9sZSIsImxpc3QiKSxpLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0tYWNjZXNzaWJpbGl0eS10cmVlIiksaS5fcm93RWxlbWVudHM9W107Zm9yKHZhciBuPTA7bjxpLl90ZXJtaW5hbC5yb3dzO24rKylpLl9yb3dFbGVtZW50c1tuXT1pLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKSxpLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoaS5fcm93RWxlbWVudHNbbl0pO2lmKGkuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gaS5fb25Cb3VuZGFyeUZvY3VzKGUsMCl9LGkuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gaS5fb25Cb3VuZGFyeUZvY3VzKGUsMSl9LGkuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIixpLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpLGkuX3Jvd0VsZW1lbnRzW2kuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsaS5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKSxpLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKSxpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuYXBwZW5kQ2hpbGQoaS5fcm93Q29udGFpbmVyKSxpLl9yZW5kZXJSb3dzRGVib3VuY2VyPW5ldyBhLlRpbWVCYXNlZERlYm91bmNlcihpLl9yZW5kZXJSb3dzLmJpbmQoaSkpLGkuX3JlZnJlc2hSb3dzKCksaS5fbGl2ZVJlZ2lvbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLl9saXZlUmVnaW9uLmNsYXNzTGlzdC5hZGQoImxpdmUtcmVnaW9uIiksaS5fbGl2ZVJlZ2lvbi5zZXRBdHRyaWJ1dGUoImFyaWEtbGl2ZSIsImFzc2VydGl2ZSIpLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZChpLl9saXZlUmVnaW9uKSwhaS5fdGVybWluYWwuZWxlbWVudCl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBlbmFibGUgYWNjZXNzaWJpbGl0eSBiZWZvcmUgVGVybWluYWwub3BlbiIpO3JldHVybiBpLl90ZXJtaW5hbC5lbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIsaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290KSxpLnJlZ2lzdGVyKGkuX3JlbmRlclJvd3NEZWJvdW5jZXIpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25SZXNpemUoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9vblJlc2l6ZShlLnJvd3MpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uUmVuZGVyKChmdW5jdGlvbihlKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3MoZS5zdGFydCxlLmVuZCl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25TY3JvbGwoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzKCl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25BMTF5Q2hhcigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uQ2hhcihlKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vbkxpbmVGZWVkKChmdW5jdGlvbigpe3JldHVybiBpLl9vbkNoYXIoIlxuIil9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25BMTF5VGFiKChmdW5jdGlvbihlKXtyZXR1cm4gaS5fb25UYWIoZSl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25LZXkoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9vbktleShlLmtleSl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25CbHVyKChmdW5jdGlvbigpe3JldHVybiBpLl9jbGVhckxpdmVSZWdpb24oKX0pKSksaS5yZWdpc3RlcihpLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCl9KSkpLGkuX3NjcmVlbkRwck1vbml0b3I9bmV3IGguU2NyZWVuRHByTW9uaXRvcixpLnJlZ2lzdGVyKGkuX3NjcmVlbkRwck1vbml0b3IpLGkuX3NjcmVlbkRwck1vbml0b3Iuc2V0TGlzdGVuZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfSkpLGkucmVnaXN0ZXIoKDAsYy5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHdpbmRvdywicmVzaXplIiwoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCl9KSkpLGl9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLCgwLHUucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQpKHRoaXMuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCksdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoPTB9LHQucHJvdG90eXBlLl9vbkJvdW5kYXJ5Rm9jdXM9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnRhcmdldCxpPXRoaXMuX3Jvd0VsZW1lbnRzWzA9PT10PzE6dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTJdO2lmKHIuZ2V0QXR0cmlidXRlKCJhcmlhLXBvc2luc2V0IikhPT0oMD09PXQ/IjEiOiIiK3RoaXMuX3Rlcm1pbmFsLmJ1ZmZlci5saW5lcy5sZW5ndGgpJiZlLnJlbGF0ZWRUYXJnZXQ9PT1pKXt2YXIgbixvO2lmKDA9PT10PyhuPXIsbz10aGlzLl9yb3dFbGVtZW50cy5wb3AoKSx0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQobykpOihuPXRoaXMuX3Jvd0VsZW1lbnRzLnNoaWZ0KCksbz1yLHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChuKSksbi5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKSxvLnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLDA9PT10KXt2YXIgcz10aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKTt0aGlzLl9yb3dFbGVtZW50cy51bnNoaWZ0KHMpLHRoaXMuX3Jvd0NvbnRhaW5lci5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLHMpfWVsc2Ugcz10aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKSx0aGlzLl9yb3dFbGVtZW50cy5wdXNoKHMpLHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChzKTt0aGlzLl9yb3dFbGVtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKSx0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksdGhpcy5fdGVybWluYWwuc2Nyb2xsTGluZXMoMD09PXQ/LTE6MSksdGhpcy5fcm93RWxlbWVudHNbMD09PXQ/MTp0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMl0uZm9jdXMoKSxlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX19LHQucHJvdG90eXBlLl9vblJlc2l6ZT1mdW5jdGlvbihlKXt0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lcik7Zm9yKHZhciB0PXRoaXMuX3Jvd0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7dDx0aGlzLl90ZXJtaW5hbC5yb3dzO3QrKyl0aGlzLl9yb3dFbGVtZW50c1t0XT10aGlzLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGUoKSx0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fcm93RWxlbWVudHNbdF0pO2Zvcig7dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoPmU7KXRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSk7dGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLHRoaXMuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlPWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIGUuc2V0QXR0cmlidXRlKCJyb2xlIiwibGlzdGl0ZW0iKSxlLnRhYkluZGV4PS0xLHRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKGUpLGV9LHQucHJvdG90eXBlLl9vblRhYj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGU7dCsrKXRoaXMuX29uQ2hhcigiICIpfSx0LnByb3RvdHlwZS5fb25DaGFyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudDwyMSYmKHRoaXMuX2NoYXJzVG9Db25zdW1lLmxlbmd0aD4wP3RoaXMuX2NoYXJzVG9Db25zdW1lLnNoaWZ0KCkhPT1lJiYodGhpcy5fY2hhcnNUb0Fubm91bmNlKz1lKTp0aGlzLl9jaGFyc1RvQW5ub3VuY2UrPWUsIlxuIj09PWUmJih0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50KyssMjE9PT10aGlzLl9saXZlUmVnaW9uTGluZUNvdW50JiYodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCs9by50b29NdWNoT3V0cHV0KSkscy5pc01hYyYmdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCYmdGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudC5sZW5ndGg+MCYmIXRoaXMuX2xpdmVSZWdpb24ucGFyZW50Tm9kZSYmc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Ll9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuYXBwZW5kQ2hpbGQodC5fbGl2ZVJlZ2lvbil9KSwwKSl9LHQucHJvdG90eXBlLl9jbGVhckxpdmVSZWdpb249ZnVuY3Rpb24oKXt0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50PSIiLHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQ9MCxzLmlzTWFjJiYoMCx1LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9saXZlUmVnaW9uKX0sdC5wcm90b3R5cGUuX29uS2V5PWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyTGl2ZVJlZ2lvbigpLHRoaXMuX2NoYXJzVG9Db25zdW1lLnB1c2goZSl9LHQucHJvdG90eXBlLl9yZWZyZXNoUm93cz1mdW5jdGlvbihlLHQpe3RoaXMuX3JlbmRlclJvd3NEZWJvdW5jZXIucmVmcmVzaChlLHQsdGhpcy5fdGVybWluYWwucm93cyl9LHQucHJvdG90eXBlLl9yZW5kZXJSb3dzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuX3Rlcm1pbmFsLmJ1ZmZlcixpPXIubGluZXMubGVuZ3RoLnRvU3RyaW5nKCksbj1lO248PXQ7bisrKXt2YXIgbz1yLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhyLnlkaXNwK24sITApLHM9KHIueWRpc3ArbisxKS50b1N0cmluZygpLGE9dGhpcy5fcm93RWxlbWVudHNbbl07YSYmKDA9PT1vLmxlbmd0aD9hLmlubmVyVGV4dD0iwqAiOmEudGV4dENvbnRlbnQ9byxhLnNldEF0dHJpYnV0ZSgiYXJpYS1wb3NpbnNldCIscyksYS5zZXRBdHRyaWJ1dGUoImFyaWEtc2V0c2l6ZSIsaSkpfXRoaXMuX2Fubm91bmNlQ2hhcmFjdGVycygpfSx0LnByb3RvdHlwZS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQpe3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aCE9PXRoaXMuX3Rlcm1pbmFsLnJvd3MmJnRoaXMuX29uUmVzaXplKHRoaXMuX3Rlcm1pbmFsLnJvd3MpO2Zvcih2YXIgZT0wO2U8dGhpcy5fdGVybWluYWwucm93cztlKyspdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnModGhpcy5fcm93RWxlbWVudHNbZV0pfX0sdC5wcm90b3R5cGUuX3JlZnJlc2hSb3dEaW1lbnNpb25zPWZ1bmN0aW9uKGUpe2Uuc3R5bGUuaGVpZ2h0PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCJ9LHQucHJvdG90eXBlLl9hbm5vdW5jZUNoYXJhY3RlcnM9ZnVuY3Rpb24oKXswIT09dGhpcy5fY2hhcnNUb0Fubm91bmNlLmxlbmd0aCYmKHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQrPXRoaXMuX2NoYXJzVG9Bbm5vdW5jZSx0aGlzLl9jaGFyc1RvQW5ub3VuY2U9IiIpfSx0fShsLkRpc3Bvc2FibGUpO3QuQWNjZXNzaWJpbGl0eU1hbmFnZXI9Zn0sMzYxNDooZSx0KT0+e2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUucmVwbGFjZSgvXHI/XG4vZywiXHIiKX1mdW5jdGlvbiBpKGUsdCl7cmV0dXJuIHQ/IhtbMjAwfiIrZSsiG1syMDF+IjplfWZ1bmN0aW9uIG4oZSx0LG4pe2U9aShlPXIoZSksbi5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlKSxuLnRyaWdnZXJEYXRhRXZlbnQoZSwhMCksdC52YWx1ZT0iIn1mdW5jdGlvbiBvKGUsdCxyKXt2YXIgaT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ZS5jbGllbnRYLWkubGVmdC0xMCxvPWUuY2xpZW50WS1pLnRvcC0xMDt0LnN0eWxlLndpZHRoPSIyMHB4Iix0LnN0eWxlLmhlaWdodD0iMjBweCIsdC5zdHlsZS5sZWZ0PW4rInB4Iix0LnN0eWxlLnRvcD1vKyJweCIsdC5zdHlsZS56SW5kZXg9IjEwMDAiLHQuZm9jdXMoKX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5yaWdodENsaWNrSGFuZGxlcj10Lm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3I9dC5wYXN0ZT10LmhhbmRsZVBhc3RlRXZlbnQ9dC5jb3B5SGFuZGxlcj10LmJyYWNrZXRUZXh0Rm9yUGFzdGU9dC5wcmVwYXJlVGV4dEZvclRlcm1pbmFsPXZvaWQgMCx0LnByZXBhcmVUZXh0Rm9yVGVybWluYWw9cix0LmJyYWNrZXRUZXh0Rm9yUGFzdGU9aSx0LmNvcHlIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7ZS5jbGlwYm9hcmREYXRhJiZlLmNsaXBib2FyZERhdGEuc2V0RGF0YSgidGV4dC9wbGFpbiIsdC5zZWxlY3Rpb25UZXh0KSxlLnByZXZlbnREZWZhdWx0KCl9LHQuaGFuZGxlUGFzdGVFdmVudD1mdW5jdGlvbihlLHQscil7ZS5zdG9wUHJvcGFnYXRpb24oKSxlLmNsaXBib2FyZERhdGEmJm4oZS5jbGlwYm9hcmREYXRhLmdldERhdGEoInRleHQvcGxhaW4iKSx0LHIpfSx0LnBhc3RlPW4sdC5tb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yPW8sdC5yaWdodENsaWNrSGFuZGxlcj1mdW5jdGlvbihlLHQscixpLG4pe28oZSx0LHIpLG4mJmkucmlnaHRDbGlja1NlbGVjdChlKSx0LnZhbHVlPWkuc2VsZWN0aW9uVGV4dCx0LnNlbGVjdCgpfX0sNzIzOTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbG9yQ29udHJhc3RDYWNoZT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fY29sb3I9e30sdGhpcy5fcmdiYT17fX1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9jb2xvcj17fSx0aGlzLl9yZ2JhPXt9fSxlLnByb3RvdHlwZS5zZXRDc3M9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3JnYmFbZV18fCh0aGlzLl9yZ2JhW2VdPXt9KSx0aGlzLl9yZ2JhW2VdW3RdPXJ9LGUucHJvdG90eXBlLmdldENzcz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9yZ2JhW2VdP3RoaXMuX3JnYmFbZV1bdF06dm9pZCAwfSxlLnByb3RvdHlwZS5zZXRDb2xvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY29sb3JbZV18fCh0aGlzLl9jb2xvcltlXT17fSksdGhpcy5fY29sb3JbZV1bdF09cn0sZS5wcm90b3R5cGUuZ2V0Q29sb3I9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29sb3JbZV0/dGhpcy5fY29sb3JbZV1bdF06dm9pZCAwfSxlfSgpO3QuQ29sb3JDb250cmFzdENhY2hlPXJ9LDU2ODA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc307T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29sb3JNYW5hZ2VyPXQuREVGQVVMVF9BTlNJX0NPTE9SUz12b2lkIDA7dmFyIG49cig4MDU1KSxvPXIoNzIzOSkscz1uLmNzcy50b0NvbG9yKCIjZmZmZmZmIiksYT1uLmNzcy50b0NvbG9yKCIjMDAwMDAwIiksYz1uLmNzcy50b0NvbG9yKCIjZmZmZmZmIiksbD1uLmNzcy50b0NvbG9yKCIjMDAwMDAwIiksaD17Y3NzOiJyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMykiLHJnYmE6NDI5NDk2NzExN307dC5ERUZBVUxUX0FOU0lfQ09MT1JTPU9iamVjdC5mcmVlemUoZnVuY3Rpb24oKXtmb3IodmFyIGU9W24uY3NzLnRvQ29sb3IoIiMyZTM0MzYiKSxuLmNzcy50b0NvbG9yKCIjY2MwMDAwIiksbi5jc3MudG9Db2xvcigiIzRlOWEwNiIpLG4uY3NzLnRvQ29sb3IoIiNjNGEwMDAiKSxuLmNzcy50b0NvbG9yKCIjMzQ2NWE0Iiksbi5jc3MudG9Db2xvcigiIzc1NTA3YiIpLG4uY3NzLnRvQ29sb3IoIiMwNjk4OWEiKSxuLmNzcy50b0NvbG9yKCIjZDNkN2NmIiksbi5jc3MudG9Db2xvcigiIzU1NTc1MyIpLG4uY3NzLnRvQ29sb3IoIiNlZjI5MjkiKSxuLmNzcy50b0NvbG9yKCIjOGFlMjM0Iiksbi5jc3MudG9Db2xvcigiI2ZjZTk0ZiIpLG4uY3NzLnRvQ29sb3IoIiM3MjlmY2YiKSxuLmNzcy50b0NvbG9yKCIjYWQ3ZmE4Iiksbi5jc3MudG9Db2xvcigiIzM0ZTJlMiIpLG4uY3NzLnRvQ29sb3IoIiNlZWVlZWMiKV0sdD1bMCw5NSwxMzUsMTc1LDIxNSwyNTVdLHI9MDtyPDIxNjtyKyspe3ZhciBpPXRbci8zNiU2fDBdLG89dFtyLzYlNnwwXSxzPXRbciU2XTtlLnB1c2goe2NzczpuLmNoYW5uZWxzLnRvQ3NzKGksbyxzKSxyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKGksbyxzKX0pfWZvcihyPTA7cjwyNDtyKyspe3ZhciBhPTgrMTAqcjtlLnB1c2goe2NzczpuLmNoYW5uZWxzLnRvQ3NzKGEsYSxhKSxyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKGEsYSxhKX0pfXJldHVybiBlfSgpKTt2YXIgdT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSxyKXt0aGlzLmFsbG93VHJhbnNwYXJlbmN5PXI7dmFyIGk9ZS5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtpLndpZHRoPTEsaS5oZWlnaHQ9MTt2YXIgdT1pLmdldENvbnRleHQoIjJkIik7aWYoIXUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZ2V0IHJlbmRlcmluZyBjb250ZXh0Iik7dGhpcy5fY3R4PXUsdGhpcy5fY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iY29weSIsdGhpcy5fbGl0bXVzQ29sb3I9dGhpcy5fY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCwxLDEpLHRoaXMuX2NvbnRyYXN0Q2FjaGU9bmV3IG8uQ29sb3JDb250cmFzdENhY2hlLHRoaXMuY29sb3JzPXtmb3JlZ3JvdW5kOnMsYmFja2dyb3VuZDphLGN1cnNvcjpjLGN1cnNvckFjY2VudDpsLHNlbGVjdGlvblRyYW5zcGFyZW50Omgsc2VsZWN0aW9uT3BhcXVlOm4uY29sb3IuYmxlbmQoYSxoKSxzZWxlY3Rpb25Gb3JlZ3JvdW5kOnZvaWQgMCxhbnNpOnQuREVGQVVMVF9BTlNJX0NPTE9SUy5zbGljZSgpLGNvbnRyYXN0Q2FjaGU6dGhpcy5fY29udHJhc3RDYWNoZX0sdGhpcy5fdXBkYXRlUmVzdG9yZUNvbG9ycygpfXJldHVybiBlLnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2U9ZnVuY3Rpb24oZSl7Im1pbmltdW1Db250cmFzdFJhdGlvIj09PWUmJnRoaXMuX2NvbnRyYXN0Q2FjaGUuY2xlYXIoKX0sZS5wcm90b3R5cGUuc2V0VGhlbWU9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9e30pLHRoaXMuY29sb3JzLmZvcmVncm91bmQ9dGhpcy5fcGFyc2VDb2xvcihlLmZvcmVncm91bmQscyksdGhpcy5jb2xvcnMuYmFja2dyb3VuZD10aGlzLl9wYXJzZUNvbG9yKGUuYmFja2dyb3VuZCxhKSx0aGlzLmNvbG9ycy5jdXJzb3I9dGhpcy5fcGFyc2VDb2xvcihlLmN1cnNvcixjLCEwKSx0aGlzLmNvbG9ycy5jdXJzb3JBY2NlbnQ9dGhpcy5fcGFyc2VDb2xvcihlLmN1cnNvckFjY2VudCxsLCEwKSx0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudD10aGlzLl9wYXJzZUNvbG9yKGUuc2VsZWN0aW9uLGgsITApLHRoaXMuY29sb3JzLnNlbGVjdGlvbk9wYXF1ZT1uLmNvbG9yLmJsZW5kKHRoaXMuY29sb3JzLmJhY2tncm91bmQsdGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQpO3ZhciByPXtjc3M6IiIscmdiYTowfTt0aGlzLmNvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kPWUuc2VsZWN0aW9uRm9yZWdyb3VuZD90aGlzLl9wYXJzZUNvbG9yKGUuc2VsZWN0aW9uRm9yZWdyb3VuZCxyKTp2b2lkIDAsdGhpcy5jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZD09PXImJih0aGlzLmNvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kPXZvaWQgMCksbi5jb2xvci5pc09wYXF1ZSh0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudCkmJih0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudD1uLmNvbG9yLm9wYWNpdHkodGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQsLjMpKSx0aGlzLmNvbG9ycy5hbnNpWzBdPXRoaXMuX3BhcnNlQ29sb3IoZS5ibGFjayx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMF0pLHRoaXMuY29sb3JzLmFuc2lbMV09dGhpcy5fcGFyc2VDb2xvcihlLnJlZCx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMV0pLHRoaXMuY29sb3JzLmFuc2lbMl09dGhpcy5fcGFyc2VDb2xvcihlLmdyZWVuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1syXSksdGhpcy5jb2xvcnMuYW5zaVszXT10aGlzLl9wYXJzZUNvbG9yKGUueWVsbG93LHQuREVGQVVMVF9BTlNJX0NPTE9SU1szXSksdGhpcy5jb2xvcnMuYW5zaVs0XT10aGlzLl9wYXJzZUNvbG9yKGUuYmx1ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNF0pLHRoaXMuY29sb3JzLmFuc2lbNV09dGhpcy5fcGFyc2VDb2xvcihlLm1hZ2VudGEsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzVdKSx0aGlzLmNvbG9ycy5hbnNpWzZdPXRoaXMuX3BhcnNlQ29sb3IoZS5jeWFuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s2XSksdGhpcy5jb2xvcnMuYW5zaVs3XT10aGlzLl9wYXJzZUNvbG9yKGUud2hpdGUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzddKSx0aGlzLmNvbG9ycy5hbnNpWzhdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRCbGFjayx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbOF0pLHRoaXMuY29sb3JzLmFuc2lbOV09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodFJlZCx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbOV0pLHRoaXMuY29sb3JzLmFuc2lbMTBdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRHcmVlbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTBdKSx0aGlzLmNvbG9ycy5hbnNpWzExXT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0WWVsbG93LHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxMV0pLHRoaXMuY29sb3JzLmFuc2lbMTJdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRCbHVlLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxMl0pLHRoaXMuY29sb3JzLmFuc2lbMTNdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRNYWdlbnRhLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxM10pLHRoaXMuY29sb3JzLmFuc2lbMTRdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRDeWFuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxNF0pLHRoaXMuY29sb3JzLmFuc2lbMTVdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRXaGl0ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTVdKSx0aGlzLl9jb250cmFzdENhY2hlLmNsZWFyKCksdGhpcy5fdXBkYXRlUmVzdG9yZUNvbG9ycygpfSxlLnByb3RvdHlwZS5yZXN0b3JlQ29sb3I9ZnVuY3Rpb24oZSl7aWYodm9pZCAwIT09ZSlzd2l0Y2goZSl7Y2FzZSAyNTY6dGhpcy5jb2xvcnMuZm9yZWdyb3VuZD10aGlzLl9yZXN0b3JlQ29sb3JzLmZvcmVncm91bmQ7YnJlYWs7Y2FzZSAyNTc6dGhpcy5jb2xvcnMuYmFja2dyb3VuZD10aGlzLl9yZXN0b3JlQ29sb3JzLmJhY2tncm91bmQ7YnJlYWs7Y2FzZSAyNTg6dGhpcy5jb2xvcnMuY3Vyc29yPXRoaXMuX3Jlc3RvcmVDb2xvcnMuY3Vyc29yO2JyZWFrO2RlZmF1bHQ6dGhpcy5jb2xvcnMuYW5zaVtlXT10aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2lbZV19ZWxzZSBmb3IodmFyIHQ9MDt0PHRoaXMuX3Jlc3RvcmVDb2xvcnMuYW5zaS5sZW5ndGg7Kyt0KXRoaXMuY29sb3JzLmFuc2lbdF09dGhpcy5fcmVzdG9yZUNvbG9ycy5hbnNpW3RdfSxlLnByb3RvdHlwZS5fdXBkYXRlUmVzdG9yZUNvbG9ycz1mdW5jdGlvbigpe3RoaXMuX3Jlc3RvcmVDb2xvcnM9e2ZvcmVncm91bmQ6dGhpcy5jb2xvcnMuZm9yZWdyb3VuZCxiYWNrZ3JvdW5kOnRoaXMuY29sb3JzLmJhY2tncm91bmQsY3Vyc29yOnRoaXMuY29sb3JzLmN1cnNvcixhbnNpOnRoaXMuY29sb3JzLmFuc2kuc2xpY2UoKX19LGUucHJvdG90eXBlLl9wYXJzZUNvbG9yPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT1yJiYocj10aGlzLmFsbG93VHJhbnNwYXJlbmN5KSx2b2lkIDA9PT1lKXJldHVybiB0O2lmKHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fbGl0bXVzQ29sb3IsdGhpcy5fY3R4LmZpbGxTdHlsZT1lLCJzdHJpbmciIT10eXBlb2YgdGhpcy5fY3R4LmZpbGxTdHlsZSlyZXR1cm4gY29uc29sZS53YXJuKCJDb2xvcjogIitlKyIgaXMgaW52YWxpZCB1c2luZyBmYWxsYmFjayAiK3QuY3NzKSx0O3RoaXMuX2N0eC5maWxsUmVjdCgwLDAsMSwxKTt2YXIgbz10aGlzLl9jdHguZ2V0SW1hZ2VEYXRhKDAsMCwxLDEpLmRhdGE7aWYoMjU1IT09b1szXSl7aWYoIXIpcmV0dXJuIGNvbnNvbGUud2FybigiQ29sb3I6ICIrZSsiIGlzIHVzaW5nIHRyYW5zcGFyZW5jeSwgYnV0IGFsbG93VHJhbnNwYXJlbmN5IGlzIGZhbHNlLiBVc2luZyBmYWxsYmFjayAiK3QuY3NzKyIuIiksdDt2YXIgcz1pKHRoaXMuX2N0eC5maWxsU3R5bGUuc3Vic3RyaW5nKDUsdGhpcy5fY3R4LmZpbGxTdHlsZS5sZW5ndGgtMSkuc3BsaXQoIiwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBOdW1iZXIoZSl9KSksNCksYT1zWzBdLGM9c1sxXSxsPXNbMl0saD1zWzNdLHU9TWF0aC5yb3VuZCgyNTUqaCk7cmV0dXJue3JnYmE6bi5jaGFubmVscy50b1JnYmEoYSxjLGwsdSksY3NzOmV9fXJldHVybntjc3M6dGhpcy5fY3R4LmZpbGxTdHlsZSxyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKG9bMF0sb1sxXSxvWzJdLG9bM10pfX0sZX0oKTt0LkNvbG9yTWFuYWdlcj11fSw5NjMxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50PXZvaWQgMCx0LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50PWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQsaSxuPVtdLG89MDtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKW5bb109YXJndW1lbnRzW29dO3RyeXtmb3IodmFyIHM9cihuKSxhPXMubmV4dCgpOyFhLmRvbmU7YT1zLm5leHQoKSl7dmFyIGM9YS52YWx1ZTtudWxsPT09KGk9bnVsbD09Yz92b2lkIDA6Yy5wYXJlbnRFbGVtZW50KXx8dm9pZCAwPT09aXx8aS5yZW1vdmVDaGlsZChjKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKHQ9cy5yZXR1cm4pJiZ0LmNhbGwocyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX19LDM2NTY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXI9dm9pZCAwLHQuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCxyLGkpe2UuYWRkRXZlbnRMaXN0ZW5lcih0LHIsaSk7dmFyIG49ITE7cmV0dXJue2Rpc3Bvc2U6ZnVuY3Rpb24oKXtufHwobj0hMCxlLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxyLGkpKX19fX0sMzU1MTpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1vdXNlWm9uZT10LkxpbmtpZmllcj12b2lkIDA7dmFyIG89cig4NDYwKSxzPXIoMjU4NSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9sb2dTZXJ2aWNlPXQsdGhpcy5fdW5pY29kZVNlcnZpY2U9cix0aGlzLl9saW5rTWF0Y2hlcnM9W10sdGhpcy5fbmV4dExpbmtNYXRjaGVySWQ9MCx0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lPW5ldyBvLkV2ZW50RW1pdHRlcix0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lPW5ldyBvLkV2ZW50RW1pdHRlcix0aGlzLl9vbkxpbmtUb29sdGlwPW5ldyBvLkV2ZW50RW1pdHRlcix0aGlzLl9yb3dzVG9MaW5raWZ5PXtzdGFydDp2b2lkIDAsZW5kOnZvaWQgMH19cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25TaG93TGlua1VuZGVybGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25IaWRlTGlua1VuZGVybGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25MaW5rVG9vbHRpcCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbmtUb29sdGlwLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmF0dGFjaFRvRG9tPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZWxlbWVudD1lLHRoaXMuX21vdXNlWm9uZU1hbmFnZXI9dH0sZS5wcm90b3R5cGUubGlua2lmeVJvd3M9ZnVuY3Rpb24odCxyKXt2YXIgaT10aGlzO3RoaXMuX21vdXNlWm9uZU1hbmFnZXImJih2b2lkIDA9PT10aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0fHx2b2lkIDA9PT10aGlzLl9yb3dzVG9MaW5raWZ5LmVuZD8odGhpcy5fcm93c1RvTGlua2lmeS5zdGFydD10LHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kPXIpOih0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0PU1hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQsdCksdGhpcy5fcm93c1RvTGlua2lmeS5lbmQ9TWF0aC5tYXgodGhpcy5fcm93c1RvTGlua2lmeS5lbmQscikpLHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuY2xlYXJBbGwodCxyKSx0aGlzLl9yb3dzVGltZW91dElkJiZjbGVhclRpbWVvdXQodGhpcy5fcm93c1RpbWVvdXRJZCksdGhpcy5fcm93c1RpbWVvdXRJZD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBpLl9saW5raWZ5Um93cygpfSksZS5fdGltZUJlZm9yZUxhdGVuY3kpKX0sZS5wcm90b3R5cGUuX2xpbmtpZnlSb3dzPWZ1bmN0aW9uKCl7dGhpcy5fcm93c1RpbWVvdXRJZD12b2lkIDA7dmFyIGU9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7aWYodm9pZCAwIT09dGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCYmdm9pZCAwIT09dGhpcy5fcm93c1RvTGlua2lmeS5lbmQpe3ZhciB0PWUueWRpc3ArdGhpcy5fcm93c1RvTGlua2lmeS5zdGFydDtpZighKHQ+PWUubGluZXMubGVuZ3RoKSl7Zm9yKHZhciByPWUueWRpc3ArTWF0aC5taW4odGhpcy5fcm93c1RvTGlua2lmeS5lbmQsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSsxLGk9TWF0aC5jZWlsKDJlMy90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLG49dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuaXRlcmF0b3IoITEsdCxyLGksaSk7bi5oYXNOZXh0KCk7KWZvcih2YXIgbz1uLm5leHQoKSxzPTA7czx0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoO3MrKyl0aGlzLl9kb0xpbmtpZnlSb3coby5yYW5nZS5maXJzdCxvLmNvbnRlbnQsdGhpcy5fbGlua01hdGNoZXJzW3NdKTt0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0PXZvaWQgMCx0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZD12b2lkIDB9fWVsc2UgdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiX3Jvd1RvTGlua2lmeSB3YXMgdW5zZXQgYmVmb3JlIF9saW5raWZ5Um93cyB3YXMgY2FsbGVkIil9LGUucHJvdG90eXBlLnJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXImJihyPXt9KSwhdCl0aHJvdyBuZXcgRXJyb3IoImhhbmRsZXIgbXVzdCBiZSBkZWZpbmVkIik7dmFyIGk9e2lkOnRoaXMuX25leHRMaW5rTWF0Y2hlcklkKysscmVnZXg6ZSxoYW5kbGVyOnQsbWF0Y2hJbmRleDpyLm1hdGNoSW5kZXgsdmFsaWRhdGlvbkNhbGxiYWNrOnIudmFsaWRhdGlvbkNhbGxiYWNrLGhvdmVyVG9vbHRpcENhbGxiYWNrOnIudG9vbHRpcENhbGxiYWNrLGhvdmVyTGVhdmVDYWxsYmFjazpyLmxlYXZlQ2FsbGJhY2ssd2lsbExpbmtBY3RpdmF0ZTpyLndpbGxMaW5rQWN0aXZhdGUscHJpb3JpdHk6ci5wcmlvcml0eXx8MH07cmV0dXJuIHRoaXMuX2FkZExpbmtNYXRjaGVyVG9MaXN0KGkpLGkuaWR9LGUucHJvdG90eXBlLl9hZGRMaW5rTWF0Y2hlclRvTGlzdD1mdW5jdGlvbihlKXtpZigwIT09dGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aCl7Zm9yKHZhciB0PXRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGgtMTt0Pj0wO3QtLSlpZihlLnByaW9yaXR5PD10aGlzLl9saW5rTWF0Y2hlcnNbdF0ucHJpb3JpdHkpcmV0dXJuIHZvaWQgdGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSh0KzEsMCxlKTt0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKDAsMCxlKX1lbHNlIHRoaXMuX2xpbmtNYXRjaGVycy5wdXNoKGUpfSxlLnByb3RvdHlwZS5kZXJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDx0aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoO3QrKylpZih0aGlzLl9saW5rTWF0Y2hlcnNbdF0uaWQ9PT1lKXJldHVybiB0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKHQsMSksITA7cmV0dXJuITF9LGUucHJvdG90eXBlLl9kb0xpbmtpZnlSb3c9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaSxuPXRoaXMsbz1uZXcgUmVnRXhwKHIucmVnZXguc291cmNlLChyLnJlZ2V4LmZsYWdzfHwiIikrImciKSxzPS0xLGE9ZnVuY3Rpb24oKXt2YXIgYT1pWyJudW1iZXIiIT10eXBlb2Ygci5tYXRjaEluZGV4PzA6ci5tYXRjaEluZGV4XTtpZighYSlyZXR1cm4gYy5fbG9nU2VydmljZS5kZWJ1ZygibWF0Y2ggZm91bmQgd2l0aG91dCBjb3JyZXNwb25kaW5nIG1hdGNoSW5kZXgiLGksciksImJyZWFrIjtpZihzPXQuaW5kZXhPZihhLHMrMSksby5sYXN0SW5kZXg9cythLmxlbmd0aCxzPDApcmV0dXJuImJyZWFrIjt2YXIgbD1jLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXgoZSxzKTtpZihsWzBdPDApcmV0dXJuImJyZWFrIjt2YXIgaD1jLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQobFswXSk7aWYoIWgpcmV0dXJuImJyZWFrIjt2YXIgdT1oLmdldEZnKGxbMV0pLGY9dT91Pj45JjUxMTp2b2lkIDA7ci52YWxpZGF0aW9uQ2FsbGJhY2s/ci52YWxpZGF0aW9uQ2FsbGJhY2soYSwoZnVuY3Rpb24oZSl7bi5fcm93c1RpbWVvdXRJZHx8ZSYmbi5fYWRkTGluayhsWzFdLGxbMF0tbi5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsYSxyLGYpfSkpOmMuX2FkZExpbmsobFsxXSxsWzBdLWMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLGEscixmKX0sYz10aGlzO251bGwhPT0oaT1vLmV4ZWModCkpJiYiYnJlYWsiIT09YSgpOyk7fSxlLnByb3RvdHlwZS5fYWRkTGluaz1mdW5jdGlvbihlLHQscixpLG4pe3ZhciBvPXRoaXM7aWYodGhpcy5fbW91c2Vab25lTWFuYWdlciYmdGhpcy5fZWxlbWVudCl7dmFyIHM9dGhpcy5fdW5pY29kZVNlcnZpY2UuZ2V0U3RyaW5nQ2VsbFdpZHRoKHIpLGE9ZSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsbD10K01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLGg9KGErcykldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHU9bCtNYXRoLmZsb29yKChhK3MpL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyk7MD09PWgmJihoPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx1LS0pLHRoaXMuX21vdXNlWm9uZU1hbmFnZXIuYWRkKG5ldyBjKGErMSxsKzEsaCsxLHUrMSwoZnVuY3Rpb24oZSl7aWYoaS5oYW5kbGVyKXJldHVybiBpLmhhbmRsZXIoZSxyKTt2YXIgdD13aW5kb3cub3BlbigpO3Q/KHQub3BlbmVyPW51bGwsdC5sb2NhdGlvbi5ocmVmPXIpOmNvbnNvbGUud2FybigiT3BlbmluZyBsaW5rIGJsb2NrZWQgYXMgb3BlbmVyIGNvdWxkIG5vdCBiZSBjbGVhcmVkIil9KSwoZnVuY3Rpb24oKXtvLl9vblNob3dMaW5rVW5kZXJsaW5lLmZpcmUoby5fY3JlYXRlTGlua0hvdmVyRXZlbnQoYSxsLGgsdSxuKSksby5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIpfSksKGZ1bmN0aW9uKGUpe28uX29uTGlua1Rvb2x0aXAuZmlyZShvLl9jcmVhdGVMaW5rSG92ZXJFdmVudChhLGwsaCx1LG4pKSxpLmhvdmVyVG9vbHRpcENhbGxiYWNrJiZpLmhvdmVyVG9vbHRpcENhbGxiYWNrKGUscix7c3RhcnQ6e3g6YSx5Omx9LGVuZDp7eDpoLHk6dX19KX0pLChmdW5jdGlvbigpe28uX29uSGlkZUxpbmtVbmRlcmxpbmUuZmlyZShvLl9jcmVhdGVMaW5rSG92ZXJFdmVudChhLGwsaCx1LG4pKSxvLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoInh0ZXJtLWN1cnNvci1wb2ludGVyIiksaS5ob3ZlckxlYXZlQ2FsbGJhY2smJmkuaG92ZXJMZWF2ZUNhbGxiYWNrKCl9KSwoZnVuY3Rpb24oZSl7cmV0dXJuIWkud2lsbExpbmtBY3RpdmF0ZXx8aS53aWxsTGlua0FjdGl2YXRlKGUscil9KSkpfX0sZS5wcm90b3R5cGUuX2NyZWF0ZUxpbmtIb3ZlckV2ZW50PWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJue3gxOmUseTE6dCx4MjpyLHkyOmksY29sczp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZmc6bn19LGUuX3RpbWVCZWZvcmVMYXRlbmN5PTIwMCxlPWkoW24oMCxzLklCdWZmZXJTZXJ2aWNlKSxuKDEscy5JTG9nU2VydmljZSksbigyLHMuSVVuaWNvZGVTZXJ2aWNlKV0sZSl9KCk7dC5MaW5raWZpZXI9YTt2YXIgYz1mdW5jdGlvbihlLHQscixpLG4sbyxzLGEsYyl7dGhpcy54MT1lLHRoaXMueTE9dCx0aGlzLngyPXIsdGhpcy55Mj1pLHRoaXMuY2xpY2tDYWxsYmFjaz1uLHRoaXMuaG92ZXJDYWxsYmFjaz1vLHRoaXMudG9vbHRpcENhbGxiYWNrPXMsdGhpcy5sZWF2ZUNhbGxiYWNrPWEsdGhpcy53aWxsTGlua0FjdGl2YXRlPWN9O3QuTW91c2Vab25lPWN9LDY0NjU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX0sYz10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkxpbmtpZmllcjI9dm9pZCAwO3ZhciBsPXIoMjU4NSksaD1yKDg0NjApLHU9cig4NDQpLGY9cigzNjU2KSxfPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLl9idWZmZXJTZXJ2aWNlPXQsci5fbGlua1Byb3ZpZGVycz1bXSxyLl9saW5rQ2FjaGVEaXNwb3NhYmxlcz1bXSxyLl9pc01vdXNlT3V0PSEwLHIuX2FjdGl2ZUxpbmU9LTEsci5fb25TaG93TGlua1VuZGVybGluZT1yLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksci5fb25IaWRlTGlua1VuZGVybGluZT1yLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksci5yZWdpc3RlcigoMCx1LmdldERpc3Bvc2VBcnJheURpc3Bvc2FibGUpKHIuX2xpbmtDYWNoZURpc3Bvc2FibGVzKSkscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiY3VycmVudExpbmsiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudExpbmt9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNob3dMaW5rVW5kZXJsaW5lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkhpZGVMaW5rVW5kZXJsaW5lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVnaXN0ZXJMaW5rUHJvdmlkZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fbGlua1Byb3ZpZGVycy5wdXNoKGUpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIHI9dC5fbGlua1Byb3ZpZGVycy5pbmRleE9mKGUpOy0xIT09ciYmdC5fbGlua1Byb3ZpZGVycy5zcGxpY2UociwxKX19fSx0LnByb3RvdHlwZS5hdHRhY2hUb0RvbT1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpczt0aGlzLl9lbGVtZW50PWUsdGhpcy5fbW91c2VTZXJ2aWNlPXQsdGhpcy5fcmVuZGVyU2VydmljZT1yLHRoaXMucmVnaXN0ZXIoKDAsZi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX2VsZW1lbnQsIm1vdXNlbGVhdmUiLChmdW5jdGlvbigpe2kuX2lzTW91c2VPdXQ9ITAsaS5fY2xlYXJDdXJyZW50TGluaygpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLGYuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl9lbGVtZW50LCJtb3VzZW1vdmUiLHRoaXMuX29uTW91c2VNb3ZlLmJpbmQodGhpcykpKSx0aGlzLnJlZ2lzdGVyKCgwLGYuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl9lbGVtZW50LCJtb3VzZWRvd24iLHRoaXMuX2hhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpKSksdGhpcy5yZWdpc3RlcigoMCxmLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCwibW91c2V1cCIsdGhpcy5faGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpKSl9LHQucHJvdG90eXBlLl9vbk1vdXNlTW92ZT1mdW5jdGlvbihlKXtpZih0aGlzLl9sYXN0TW91c2VFdmVudD1lLHRoaXMuX2VsZW1lbnQmJnRoaXMuX21vdXNlU2VydmljZSl7dmFyIHQ9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudChlLHRoaXMuX2VsZW1lbnQsdGhpcy5fbW91c2VTZXJ2aWNlKTtpZih0KXt0aGlzLl9pc01vdXNlT3V0PSExO2Zvcih2YXIgcj1lLmNvbXBvc2VkUGF0aCgpLGk9MDtpPHIubGVuZ3RoO2krKyl7dmFyIG49cltpXTtpZihuLmNsYXNzTGlzdC5jb250YWlucygieHRlcm0iKSlicmVhaztpZihuLmNsYXNzTGlzdC5jb250YWlucygieHRlcm0taG92ZXIiKSlyZXR1cm59dGhpcy5fbGFzdEJ1ZmZlckNlbGwmJnQueD09PXRoaXMuX2xhc3RCdWZmZXJDZWxsLngmJnQueT09PXRoaXMuX2xhc3RCdWZmZXJDZWxsLnl8fCh0aGlzLl9vbkhvdmVyKHQpLHRoaXMuX2xhc3RCdWZmZXJDZWxsPXQpfX19LHQucHJvdG90eXBlLl9vbkhvdmVyPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUxpbmUhPT1lLnkpcmV0dXJuIHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKSx2b2lkIHRoaXMuX2Fza0ZvckxpbmsoZSwhMSk7dGhpcy5fY3VycmVudExpbmsmJnRoaXMuX2xpbmtBdFBvc2l0aW9uKHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssZSl8fCh0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCksdGhpcy5fYXNrRm9yTGluayhlLCEwKSl9LHQucHJvdG90eXBlLl9hc2tGb3JMaW5rPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxuLG8scz10aGlzO3RoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyYmdHx8KG51bGw9PT0obj10aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpfHx2b2lkIDA9PT1ufHxuLmZvckVhY2goKGZ1bmN0aW9uKGUpe251bGw9PWV8fGUuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZS5saW5rLmRpc3Bvc2UmJmUubGluay5kaXNwb3NlKCl9KSl9KSksdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzPW5ldyBNYXAsdGhpcy5fYWN0aXZlTGluZT1lLnkpO3ZhciBsPSExLGg9ZnVuY3Rpb24ocixpKXt0PyhudWxsPT09KG89dS5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXx8dm9pZCAwPT09bz92b2lkIDA6by5nZXQocikpJiYobD11Ll9jaGVja0xpbmtQcm92aWRlclJlc3VsdChyLGUsbCkpOmkucHJvdmlkZUxpbmtzKGUueSwoZnVuY3Rpb24odCl7dmFyIGksbjtpZighcy5faXNNb3VzZU91dCl7dmFyIG89bnVsbD09dD92b2lkIDA6dC5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybntsaW5rOmV9fSkpO251bGw9PT0oaT1zLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpfHx2b2lkIDA9PT1pfHxpLnNldChyLG8pLGw9cy5fY2hlY2tMaW5rUHJvdmlkZXJSZXN1bHQocixlLGwpLChudWxsPT09KG49cy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zaXplKT09PXMuX2xpbmtQcm92aWRlcnMubGVuZ3RoJiZzLl9yZW1vdmVJbnRlcnNlY3RpbmdMaW5rcyhlLnkscy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKX19KSl9LHU9dGhpczt0cnl7Zm9yKHZhciBmPWEodGhpcy5fbGlua1Byb3ZpZGVycy5lbnRyaWVzKCkpLF89Zi5uZXh0KCk7IV8uZG9uZTtfPWYubmV4dCgpKXt2YXIgZD1jKF8udmFsdWUsMik7aChkWzBdLGRbMV0pfX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtfJiYhXy5kb25lJiYoaT1mLnJldHVybikmJmkuY2FsbChmKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19fSx0LnByb3RvdHlwZS5fcmVtb3ZlSW50ZXJzZWN0aW5nTGlua3M9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9bmV3IFNldCxpPTA7aTx0LnNpemU7aSsrKXt2YXIgbj10LmdldChpKTtpZihuKWZvcih2YXIgbz0wO288bi5sZW5ndGg7bysrKWZvcih2YXIgcz1uW29dLGE9cy5saW5rLnJhbmdlLnN0YXJ0Lnk8ZT8wOnMubGluay5yYW5nZS5zdGFydC54LGM9cy5saW5rLnJhbmdlLmVuZC55PmU/dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOnMubGluay5yYW5nZS5lbmQueCxsPWE7bDw9YztsKyspe2lmKHIuaGFzKGwpKXtuLnNwbGljZShvLS0sMSk7YnJlYWt9ci5hZGQobCl9fX0sdC5wcm90b3R5cGUuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXM7aWYoIXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcylyZXR1cm4gcjtmb3IodmFyIG89dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChlKSxzPSExLGE9MDthPGU7YSsrKXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5oYXMoYSkmJiF0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KGEpfHwocz0hMCk7aWYoIXMmJm8pe3ZhciBjPW8uZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2xpbmtBdFBvc2l0aW9uKGUubGluayx0KX0pKTtjJiYocj0hMCx0aGlzLl9oYW5kbGVOZXdMaW5rKGMpKX1pZih0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuc2l6ZT09PXRoaXMuX2xpbmtQcm92aWRlcnMubGVuZ3RoJiYhcilmb3IoYT0wO2E8dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLnNpemU7YSsrKXt2YXIgbD1udWxsPT09KGk9dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChhKSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4uX2xpbmtBdFBvc2l0aW9uKGUubGluayx0KX0pKTtpZihsKXtyPSEwLHRoaXMuX2hhbmRsZU5ld0xpbmsobCk7YnJlYWt9fXJldHVybiByfSx0LnByb3RvdHlwZS5faGFuZGxlTW91c2VEb3duPWZ1bmN0aW9uKCl7dGhpcy5fbW91c2VEb3duTGluaz10aGlzLl9jdXJyZW50TGlua30sdC5wcm90b3R5cGUuX2hhbmRsZU1vdXNlVXA9ZnVuY3Rpb24oZSl7aWYodGhpcy5fZWxlbWVudCYmdGhpcy5fbW91c2VTZXJ2aWNlJiZ0aGlzLl9jdXJyZW50TGluayl7dmFyIHQ9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudChlLHRoaXMuX2VsZW1lbnQsdGhpcy5fbW91c2VTZXJ2aWNlKTt0JiZ0aGlzLl9tb3VzZURvd25MaW5rPT09dGhpcy5fY3VycmVudExpbmsmJnRoaXMuX2xpbmtBdFBvc2l0aW9uKHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssdCkmJnRoaXMuX2N1cnJlbnRMaW5rLmxpbmsuYWN0aXZhdGUoZSx0aGlzLl9jdXJyZW50TGluay5saW5rLnRleHQpfX0sdC5wcm90b3R5cGUuX2NsZWFyQ3VycmVudExpbms9ZnVuY3Rpb24oZSx0KXt0aGlzLl9lbGVtZW50JiZ0aGlzLl9jdXJyZW50TGluayYmdGhpcy5fbGFzdE1vdXNlRXZlbnQmJighZXx8IXR8fHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsucmFuZ2Uuc3RhcnQueT49ZSYmdGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5lbmQueTw9dCkmJih0aGlzLl9saW5rTGVhdmUodGhpcy5fZWxlbWVudCx0aGlzLl9jdXJyZW50TGluay5saW5rLHRoaXMuX2xhc3RNb3VzZUV2ZW50KSx0aGlzLl9jdXJyZW50TGluaz12b2lkIDAsKDAsdS5kaXNwb3NlQXJyYXkpKHRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzKSl9LHQucHJvdG90eXBlLl9oYW5kbGVOZXdMaW5rPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5fZWxlbWVudCYmdGhpcy5fbGFzdE1vdXNlRXZlbnQmJnRoaXMuX21vdXNlU2VydmljZSl7dmFyIHI9dGhpcy5fcG9zaXRpb25Gcm9tTW91c2VFdmVudCh0aGlzLl9sYXN0TW91c2VFdmVudCx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7ciYmdGhpcy5fbGlua0F0UG9zaXRpb24oZS5saW5rLHIpJiYodGhpcy5fY3VycmVudExpbms9ZSx0aGlzLl9jdXJyZW50TGluay5zdGF0ZT17ZGVjb3JhdGlvbnM6e3VuZGVybGluZTp2b2lkIDA9PT1lLmxpbmsuZGVjb3JhdGlvbnN8fGUubGluay5kZWNvcmF0aW9ucy51bmRlcmxpbmUscG9pbnRlckN1cnNvcjp2b2lkIDA9PT1lLmxpbmsuZGVjb3JhdGlvbnN8fGUubGluay5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yfSxpc0hvdmVyZWQ6ITB9LHRoaXMuX2xpbmtIb3Zlcih0aGlzLl9lbGVtZW50LGUubGluayx0aGlzLl9sYXN0TW91c2VFdmVudCksZS5saW5rLmRlY29yYXRpb25zPXt9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUubGluay5kZWNvcmF0aW9ucyx7cG9pbnRlckN1cnNvcjp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUscjtyZXR1cm4gbnVsbD09PShyPW51bGw9PT0oZT10Ll9jdXJyZW50TGluayl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RhdGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3J9LHNldDpmdW5jdGlvbihlKXt2YXIgcixpOyhudWxsPT09KHI9dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnN0YXRlKSYmdC5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciE9PWUmJih0Ll9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yPWUsdC5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkJiYobnVsbD09PShpPXQuX2VsZW1lbnQpfHx2b2lkIDA9PT1pfHxpLmNsYXNzTGlzdC50b2dnbGUoInh0ZXJtLWN1cnNvci1wb2ludGVyIixlKSkpfX0sdW5kZXJsaW5lOntnZXQ6ZnVuY3Rpb24oKXt2YXIgZSxyO3JldHVybiBudWxsPT09KHI9bnVsbD09PShlPXQuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zdGF0ZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZGVjb3JhdGlvbnMudW5kZXJsaW5lfSxzZXQ6ZnVuY3Rpb24ocil7dmFyIGksbixvOyhudWxsPT09KGk9dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0YXRlKSYmKG51bGw9PT0obz1udWxsPT09KG49dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnN0YXRlKXx8dm9pZCAwPT09bz92b2lkIDA6by5kZWNvcmF0aW9ucy51bmRlcmxpbmUpIT09ciYmKHQuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZT1yLHQuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZCYmdC5fZmlyZVVuZGVybGluZUV2ZW50KGUubGluayxyKSl9fX0pLHRoaXMuX3JlbmRlclNlcnZpY2UmJnRoaXMuX2xpbmtDYWNoZURpc3Bvc2FibGVzLnB1c2godGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGZ1bmN0aW9uKGUpe3ZhciByPTA9PT1lLnN0YXJ0PzA6ZS5zdGFydCsxK3QuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO3QuX2NsZWFyQ3VycmVudExpbmsocixlLmVuZCsxK3QuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKX0pKSkpfX0sdC5wcm90b3R5cGUuX2xpbmtIb3Zlcj1mdW5jdGlvbihlLHQscil7dmFyIGk7KG51bGw9PT0oaT10aGlzLl9jdXJyZW50TGluayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3RhdGUpJiYodGhpcy5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkPSEwLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSYmdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KHQsITApLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3ImJmUuY2xhc3NMaXN0LmFkZCgieHRlcm0tY3Vyc29yLXBvaW50ZXIiKSksdC5ob3ZlciYmdC5ob3ZlcihyLHQudGV4dCl9LHQucHJvdG90eXBlLl9maXJlVW5kZXJsaW5lRXZlbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnJhbmdlLGk9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbj10aGlzLl9jcmVhdGVMaW5rVW5kZXJsaW5lRXZlbnQoci5zdGFydC54LTEsci5zdGFydC55LWktMSxyLmVuZC54LHIuZW5kLnktaS0xLHZvaWQgMCk7KHQ/dGhpcy5fb25TaG93TGlua1VuZGVybGluZTp0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lKS5maXJlKG4pfSx0LnByb3RvdHlwZS5fbGlua0xlYXZlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaTsobnVsbD09PShpPXRoaXMuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zdGF0ZSkmJih0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQ9ITEsdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMudW5kZXJsaW5lJiZ0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQodCwhMSksdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciYmZS5jbGFzc0xpc3QucmVtb3ZlKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIpKSx0LmxlYXZlJiZ0LmxlYXZlKHIsdC50ZXh0KX0sdC5wcm90b3R5cGUuX2xpbmtBdFBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5yYW5nZS5zdGFydC55PT09ZS5yYW5nZS5lbmQueSxpPWUucmFuZ2Uuc3RhcnQueTx0Lnksbj1lLnJhbmdlLmVuZC55PnQueTtyZXR1cm4ociYmZS5yYW5nZS5zdGFydC54PD10LngmJmUucmFuZ2UuZW5kLng+PXQueHx8aSYmZS5yYW5nZS5lbmQueD49dC54fHxuJiZlLnJhbmdlLnN0YXJ0Lng8PXQueHx8aSYmbikmJmUucmFuZ2Uuc3RhcnQueTw9dC55JiZlLnJhbmdlLmVuZC55Pj10Lnl9LHQucHJvdG90eXBlLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1yLmdldENvb3JkcyhlLHQsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7aWYoaSlyZXR1cm57eDppWzBdLHk6aVsxXSt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcH19LHQucHJvdG90eXBlLl9jcmVhdGVMaW5rVW5kZXJsaW5lRXZlbnQ9ZnVuY3Rpb24oZSx0LHIsaSxuKXtyZXR1cm57eDE6ZSx5MTp0LHgyOnIseTI6aSxjb2xzOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxmZzpufX0sbyhbcygwLGwuSUJ1ZmZlclNlcnZpY2UpXSx0KX0odS5EaXNwb3NhYmxlKTt0LkxpbmtpZmllcjI9X30sOTA0MjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnRvb011Y2hPdXRwdXQ9dC5wcm9tcHRMYWJlbD12b2lkIDAsdC5wcm9tcHRMYWJlbD0iVGVybWluYWwgaW5wdXQiLHQudG9vTXVjaE91dHB1dD0iVG9vIG11Y2ggb3V0cHV0IHRvIGFubm91bmNlLCBuYXZpZ2F0ZSB0byByb3dzIG1hbnVhbGx5IHRvIHJlYWQifSw2OTU0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1vdXNlWm9uZU1hbmFnZXI9dm9pZCAwO3ZhciBhPXIoODQ0KSxjPXIoMzY1NiksbD1yKDQ3MjUpLGg9cigyNTg1KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMpe3ZhciBhPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gYS5fZWxlbWVudD10LGEuX3NjcmVlbkVsZW1lbnQ9cixhLl9idWZmZXJTZXJ2aWNlPWksYS5fbW91c2VTZXJ2aWNlPW4sYS5fc2VsZWN0aW9uU2VydmljZT1vLGEuX29wdGlvbnNTZXJ2aWNlPXMsYS5fem9uZXM9W10sYS5fYXJlWm9uZXNBY3RpdmU9ITEsYS5fbGFzdEhvdmVyQ29vcmRzPVt2b2lkIDAsdm9pZCAwXSxhLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoPTAsYS5yZWdpc3RlcigoMCxjLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikoYS5fZWxlbWVudCwibW91c2Vkb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIGEuX29uTW91c2VEb3duKGUpfSkpKSxhLl9tb3VzZU1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gYS5fb25Nb3VzZU1vdmUoZSl9LGEuX21vdXNlTGVhdmVMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gYS5fb25Nb3VzZUxlYXZlKGUpfSxhLl9jbGlja0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBhLl9vbkNsaWNrKGUpfSxhfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLl9kZWFjdGl2YXRlKCl9LHQucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt0aGlzLl96b25lcy5wdXNoKGUpLDE9PT10aGlzLl96b25lcy5sZW5ndGgmJnRoaXMuX2FjdGl2YXRlKCl9LHQucHJvdG90eXBlLmNsZWFyQWxsPWZ1bmN0aW9uKGUsdCl7aWYoMCE9PXRoaXMuX3pvbmVzLmxlbmd0aCl7ZSYmdHx8KGU9MCx0PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKTtmb3IodmFyIHI9MDtyPHRoaXMuX3pvbmVzLmxlbmd0aDtyKyspe3ZhciBpPXRoaXMuX3pvbmVzW3JdOyhpLnkxPmUmJmkueTE8PXQrMXx8aS55Mj5lJiZpLnkyPD10KzF8fGkueTE8ZSYmaS55Mj50KzEpJiYodGhpcy5fY3VycmVudFpvbmUmJnRoaXMuX2N1cnJlbnRab25lPT09aSYmKHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKSx0aGlzLl9jdXJyZW50Wm9uZT12b2lkIDApLHRoaXMuX3pvbmVzLnNwbGljZShyLS0sMSkpfTA9PT10aGlzLl96b25lcy5sZW5ndGgmJnRoaXMuX2RlYWN0aXZhdGUoKX19LHQucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2FyZVpvbmVzQWN0aXZlfHwodGhpcy5fYXJlWm9uZXNBY3RpdmU9ITAsdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lciksdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fY2xpY2tMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5fZGVhY3RpdmF0ZT1mdW5jdGlvbigpe3RoaXMuX2FyZVpvbmVzQWN0aXZlJiYodGhpcy5fYXJlWm9uZXNBY3RpdmU9ITEsdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbGVhdmUiLHRoaXMuX21vdXNlTGVhdmVMaXN0ZW5lciksdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJjbGljayIsdGhpcy5fY2xpY2tMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24oZSl7dGhpcy5fbGFzdEhvdmVyQ29vcmRzWzBdPT09ZS5wYWdlWCYmdGhpcy5fbGFzdEhvdmVyQ29vcmRzWzFdPT09ZS5wYWdlWXx8KHRoaXMuX29uSG92ZXIoZSksdGhpcy5fbGFzdEhvdmVyQ29vcmRzPVtlLnBhZ2VYLGUucGFnZVldKX0sdC5wcm90b3R5cGUuX29uSG92ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPXRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtyIT09dGhpcy5fY3VycmVudFpvbmUmJih0aGlzLl9jdXJyZW50Wm9uZSYmKHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKSx0aGlzLl9jdXJyZW50Wm9uZT12b2lkIDAsdGhpcy5fdG9vbHRpcFRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCkpLHImJih0aGlzLl9jdXJyZW50Wm9uZT1yLHIuaG92ZXJDYWxsYmFjayYmci5ob3ZlckNhbGxiYWNrKGUpLHRoaXMuX3Rvb2x0aXBUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0Ll9vblRvb2x0aXAoZSl9KSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmtUb29sdGlwSG92ZXJEdXJhdGlvbikpKX0sdC5wcm90b3R5cGUuX29uVG9vbHRpcD1mdW5jdGlvbihlKXt0aGlzLl90b29sdGlwVGltZW91dD12b2lkIDA7dmFyIHQ9dGhpcy5fZmluZFpvbmVFdmVudEF0KGUpO251bGw9PXR8fHQudG9vbHRpcENhbGxiYWNrKGUpfSx0LnByb3RvdHlwZS5fb25Nb3VzZURvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aD10aGlzLl9nZXRTZWxlY3Rpb25MZW5ndGgoKSx0aGlzLl9hcmVab25lc0FjdGl2ZSl7dmFyIHQ9dGhpcy5fZmluZFpvbmVFdmVudEF0KGUpOyhudWxsPT10P3ZvaWQgMDp0LndpbGxMaW5rQWN0aXZhdGUoZSkpJiYoZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfX0sdC5wcm90b3R5cGUuX29uTW91c2VMZWF2ZT1mdW5jdGlvbihlKXt0aGlzLl9jdXJyZW50Wm9uZSYmKHRoaXMuX2N1cnJlbnRab25lLmxlYXZlQ2FsbGJhY2soKSx0aGlzLl9jdXJyZW50Wm9uZT12b2lkIDAsdGhpcy5fdG9vbHRpcFRpbWVvdXQmJmNsZWFyVGltZW91dCh0aGlzLl90b29sdGlwVGltZW91dCkpfSx0LnByb3RvdHlwZS5fb25DbGljaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9maW5kWm9uZUV2ZW50QXQoZSkscj10aGlzLl9nZXRTZWxlY3Rpb25MZW5ndGgoKTt0JiZyPT09dGhpcy5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aCYmKHQuY2xpY2tDYWxsYmFjayhlKSxlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9LHQucHJvdG90eXBlLl9nZXRTZWxlY3Rpb25MZW5ndGg9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ7cmV0dXJuIGU/ZS5sZW5ndGg6MH0sdC5wcm90b3R5cGUuX2ZpbmRab25lRXZlbnRBdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGUsdGhpcy5fc2NyZWVuRWxlbWVudCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtpZih0KWZvcih2YXIgcj10WzBdLGk9dFsxXSxuPTA7bjx0aGlzLl96b25lcy5sZW5ndGg7bisrKXt2YXIgbz10aGlzLl96b25lc1tuXTtpZihvLnkxPT09by55Mil7aWYoaT09PW8ueTEmJnI+PW8ueDEmJnI8by54MilyZXR1cm4gb31lbHNlIGlmKGk9PT1vLnkxJiZyPj1vLngxfHxpPT09by55MiYmcjxvLngyfHxpPm8ueTEmJmk8by55MilyZXR1cm4gb319LG8oW3MoMixoLklCdWZmZXJTZXJ2aWNlKSxzKDMsbC5JTW91c2VTZXJ2aWNlKSxzKDQsbC5JU2VsZWN0aW9uU2VydmljZSkscyg1LGguSU9wdGlvbnNTZXJ2aWNlKV0sdCl9KGEuRGlzcG9zYWJsZSk7dC5Nb3VzZVpvbmVNYW5hZ2VyPXV9LDYxOTM6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUmVuZGVyRGVib3VuY2VyPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fcmVuZGVyQ2FsbGJhY2s9ZSx0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzPVtdfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpLHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMCl9LGUucHJvdG90eXBlLmFkZFJlZnJlc2hDYWxsYmFjaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzLnB1c2goZSksdGhpcy5fYW5pbWF0aW9uRnJhbWV8fCh0aGlzLl9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiB0Ll9pbm5lclJlZnJlc2goKX0pKSksdGhpcy5fYW5pbWF0aW9uRnJhbWV9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXM7dGhpcy5fcm93Q291bnQ9cixlPXZvaWQgMCE9PWU/ZTowLHQ9dm9pZCAwIT09dD90OnRoaXMuX3Jvd0NvdW50LTEsdGhpcy5fcm93U3RhcnQ9dm9pZCAwIT09dGhpcy5fcm93U3RhcnQ/TWF0aC5taW4odGhpcy5fcm93U3RhcnQsZSk6ZSx0aGlzLl9yb3dFbmQ9dm9pZCAwIT09dGhpcy5fcm93RW5kP01hdGgubWF4KHRoaXMuX3Jvd0VuZCx0KTp0LHRoaXMuX2FuaW1hdGlvbkZyYW1lfHwodGhpcy5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtyZXR1cm4gaS5faW5uZXJSZWZyZXNoKCl9KSkpfSxlLnByb3RvdHlwZS5faW5uZXJSZWZyZXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwLHZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0JiZ2b2lkIDAhPT10aGlzLl9yb3dFbmQmJnZvaWQgMCE9PXRoaXMuX3Jvd0NvdW50KXt2YXIgZT1NYXRoLm1heCh0aGlzLl9yb3dTdGFydCwwKSx0PU1hdGgubWluKHRoaXMuX3Jvd0VuZCx0aGlzLl9yb3dDb3VudC0xKTt0aGlzLl9yb3dTdGFydD12b2lkIDAsdGhpcy5fcm93RW5kPXZvaWQgMCx0aGlzLl9yZW5kZXJDYWxsYmFjayhlLHQpLHRoaXMuX3J1blJlZnJlc2hDYWxsYmFja3MoKX1lbHNlIHRoaXMuX3J1blJlZnJlc2hDYWxsYmFja3MoKX0sZS5wcm90b3R5cGUuX3J1blJlZnJlc2hDYWxsYmFja3M9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIGk9cih0aGlzLl9yZWZyZXNoQ2FsbGJhY2tzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSkoMCxuLnZhbHVlKSgwKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fcmVmcmVzaENhbGxiYWNrcz1bXX0sZX0oKTt0LlJlbmRlckRlYm91bmNlcj1pfSw1NTk2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNjcmVlbkRwck1vbml0b3I9dm9pZCAwO3ZhciBvPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHR9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5zZXRMaXN0ZW5lcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2xpc3RlbmVyJiZ0aGlzLmNsZWFyTGlzdGVuZXIoKSx0aGlzLl9saXN0ZW5lcj1lLHRoaXMuX291dGVyTGlzdGVuZXI9ZnVuY3Rpb24oKXt0Ll9saXN0ZW5lciYmKHQuX2xpc3RlbmVyKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHQuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvKSx0Ll91cGRhdGVEcHIoKSl9LHRoaXMuX3VwZGF0ZURwcigpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuY2xlYXJMaXN0ZW5lcigpfSx0LnByb3RvdHlwZS5fdXBkYXRlRHByPWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5fb3V0ZXJMaXN0ZW5lciYmKG51bGw9PT0oZT10aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QpfHx2b2lkIDA9PT1lfHxlLnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpLHRoaXMuX2N1cnJlbnREZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdD13aW5kb3cubWF0Y2hNZWRpYSgic2NyZWVuIGFuZCAocmVzb2x1dGlvbjogIit3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbysiZHBweCkiKSx0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QuYWRkTGlzdGVuZXIodGhpcy5fb3V0ZXJMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5jbGVhckxpc3RlbmVyPWZ1bmN0aW9uKCl7dGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0JiZ0aGlzLl9saXN0ZW5lciYmdGhpcy5fb3V0ZXJMaXN0ZW5lciYmKHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKSx0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3Q9dm9pZCAwLHRoaXMuX2xpc3RlbmVyPXZvaWQgMCx0aGlzLl9vdXRlckxpc3RlbmVyPXZvaWQgMCl9LHR9KHIoODQ0KS5EaXNwb3NhYmxlKTt0LlNjcmVlbkRwck1vbml0b3I9b30sMzIzNjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfSxzPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30sYT10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCxyKXtpZihyfHwyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGksbj0wLG89dC5sZW5ndGg7bjxvO24rKykhaSYmbiBpbiB0fHwoaXx8KGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLG4pKSxpW25dPXRbbl0pO3JldHVybiBlLmNvbmNhdChpfHxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlRlcm1pbmFsPXZvaWQgMDt2YXIgYz1yKDI5NTApLGw9cigxNjgwKSxoPXIoMzYxNCksdT1yKDI1ODQpLGY9cig1NDM1KSxfPXIoMzUyNSksZD1yKDM1NTEpLHA9cig5MzEyKSx2PXIoNjExNCkseT1yKDM2NTYpLGc9cig5MDQyKSxtPXIoMzU3KSxiPXIoNjk1NCksUz1yKDQ1NjcpLEM9cigxMjk2KSx3PXIoNzM5OSksTD1yKDg0NjApLEU9cig4NDM3KSx4PXIoNTY4MCksUj1yKDMyMzApLGs9cig0NzI1KSxNPXIoNDI4KSxBPXIoODkzNCksTz1yKDY0NjUpLEQ9cig1MTE0KSxUPXIoODk2OSksQj1yKDgwNTUpLFA9cig0MjY5KSxJPXIoNTk0MSksSD1yKDMxMDcpLGo9cig1NzQ0KSxGPXIoOTA3NCksVz1yKDI1ODUpLFU9InVuZGVmaW5lZCIhPXR5cGVvZiB3aW5kb3c/d2luZG93LmRvY3VtZW50Om51bGwscT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PXt9KTt2YXIgcj1lLmNhbGwodGhpcyx0KXx8dGhpcztyZXR1cm4gci5icm93c2VyPXYsci5fa2V5RG93bkhhbmRsZWQ9ITEsci5fa2V5RG93blNlZW49ITEsci5fa2V5UHJlc3NIYW5kbGVkPSExLHIuX3VucHJvY2Vzc2VkRGVhZEtleT0hMSxyLl9vbkN1cnNvck1vdmU9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uS2V5PW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vblJlbmRlcj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25TZWxlY3Rpb25DaGFuZ2U9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uVGl0bGVDaGFuZ2U9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uQmVsbD1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25Gb2N1cz1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25CbHVyPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbkExMXlDaGFyRW1pdHRlcj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25BMTF5VGFiRW1pdHRlcj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fc2V0dXAoKSxyLmxpbmtpZmllcj1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShkLkxpbmtpZmllciksci5saW5raWZpZXIyPXIucmVnaXN0ZXIoci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTy5MaW5raWZpZXIyKSksci5fZGVjb3JhdGlvblNlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoRi5EZWNvcmF0aW9uU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShXLklEZWNvcmF0aW9uU2VydmljZSxyLl9kZWNvcmF0aW9uU2VydmljZSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0QmVsbCgoZnVuY3Rpb24oKXtyZXR1cm4gci5iZWxsKCl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlZnJlc2hSb3dzKChmdW5jdGlvbihlLHQpe3JldHVybiByLnJlZnJlc2goZSx0KX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0U2VuZEZvY3VzKChmdW5jdGlvbigpe3JldHVybiByLl9yZXBvcnRGb2N1cygpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RSZXNldCgoZnVuY3Rpb24oKXtyZXR1cm4gci5yZXNldCgpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydCgoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX3JlcG9ydFdpbmRvd3NPcHRpb25zKGUpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vbkNvbG9yKChmdW5jdGlvbihlKXtyZXR1cm4gci5faGFuZGxlQ29sb3JFdmVudChlKX0pKSksci5yZWdpc3RlcigoMCxMLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uQ3Vyc29yTW92ZSxyLl9vbkN1cnNvck1vdmUpKSxyLnJlZ2lzdGVyKCgwLEwuZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25UaXRsZUNoYW5nZSxyLl9vblRpdGxlQ2hhbmdlKSksci5yZWdpc3RlcigoMCxMLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uQTExeUNoYXIsci5fb25BMTF5Q2hhckVtaXR0ZXIpKSxyLnJlZ2lzdGVyKCgwLEwuZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25BMTF5VGFiLHIuX29uQTExeVRhYkVtaXR0ZXIpKSxyLnJlZ2lzdGVyKHIuX2J1ZmZlclNlcnZpY2Uub25SZXNpemUoKGZ1bmN0aW9uKGUpe3JldHVybiByLl9hZnRlclJlc2l6ZShlLmNvbHMsZS5yb3dzKX0pKSkscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25DdXJzb3JNb3ZlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uS2V5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uS2V5LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZW5kZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZW5kZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNlbGVjdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uVGl0bGVDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25UaXRsZUNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQmVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJlbGwuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkZvY3VzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRm9jdXMuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkJsdXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CbHVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25BMTF5Q2hhciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlDaGFyRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeVRhYiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlUYWJFbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9oYW5kbGVDb2xvckV2ZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHIsaSxuO2lmKHRoaXMuX2NvbG9yTWFuYWdlcil7dHJ5e2Zvcih2YXIgYz1vKGUpLGw9Yy5uZXh0KCk7IWwuZG9uZTtsPWMubmV4dCgpKXt2YXIgaD1sLnZhbHVlLGY9dm9pZCAwLF89IiI7c3dpdGNoKGguaW5kZXgpe2Nhc2UgMjU2OmY9ImZvcmVncm91bmQiLF89IjEwIjticmVhaztjYXNlIDI1NzpmPSJiYWNrZ3JvdW5kIixfPSIxMSI7YnJlYWs7Y2FzZSAyNTg6Zj0iY3Vyc29yIixfPSIxMiI7YnJlYWs7ZGVmYXVsdDpmPSJhbnNpIixfPSI0OyIraC5pbmRleH1pZihmKXN3aXRjaChoLnR5cGUpe2Nhc2UgMDp2YXIgZD1CLmNvbG9yLnRvQ29sb3JSR0IoImFuc2kiPT09Zj90aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLmFuc2lbaC5pbmRleF06dGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9yc1tmXSk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJdIitfKyI7IisoMCxJLnRvUmdiU3RyaW5nKShkKSt1LkMxX0VTQ0FQRUQuU1QpO2JyZWFrO2Nhc2UgMToiYW5zaSI9PT1mP3RoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMuYW5zaVtoLmluZGV4XT1CLnJnYmEudG9Db2xvci5hcHBseShCLnJnYmEsYShbXSxzKGguY29sb3IpLCExKSk6dGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9yc1tmXT1CLnJnYmEudG9Db2xvci5hcHBseShCLnJnYmEsYShbXSxzKGguY29sb3IpLCExKSk7YnJlYWs7Y2FzZSAyOnRoaXMuX2NvbG9yTWFuYWdlci5yZXN0b3JlQ29sb3IoaC5pbmRleCl9fX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtsJiYhbC5kb25lJiYocj1jLnJldHVybikmJnIuY2FsbChjKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19bnVsbD09PShpPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1pfHxpLnNldENvbG9ycyh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKSxudWxsPT09KG49dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PW58fG4ub25UaGVtZUNoYW5nZSh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKX19LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdCxyLGk7dGhpcy5faXNEaXNwb3NlZHx8KGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSxudWxsPT09KHQ9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PXR8fHQuZGlzcG9zZSgpLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcj12b2lkIDAsdGhpcy53cml0ZT1mdW5jdGlvbigpe30sbnVsbD09PShpPW51bGw9PT0ocj10aGlzLmVsZW1lbnQpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnBhcmVudE5vZGUpfHx2b2lkIDA9PT1pfHxpLnJlbW92ZUNoaWxkKHRoaXMuZWxlbWVudCkpfSx0LnByb3RvdHlwZS5fc2V0dXA9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5fc2V0dXAuY2FsbCh0aGlzKSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9dm9pZCAwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ1ZmZlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dGhpcy50ZXh0YXJlYSYmdGhpcy50ZXh0YXJlYS5mb2N1cyh7cHJldmVudFNjcm9sbDohMH0pfSx0LnByb3RvdHlwZS5fdXBkYXRlT3B0aW9ucz1mdW5jdGlvbih0KXt2YXIgcixpLG4sbztzd2l0Y2goZS5wcm90b3R5cGUuX3VwZGF0ZU9wdGlvbnMuY2FsbCh0aGlzLHQpLHQpe2Nhc2UiZm9udEZhbWlseSI6Y2FzZSJmb250U2l6ZSI6bnVsbD09PShyPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1yfHxyLmNsZWFyKCksbnVsbD09PShpPXRoaXMuX2NoYXJTaXplU2VydmljZSl8fHZvaWQgMD09PWl8fGkubWVhc3VyZSgpO2JyZWFrO2Nhc2UiY3Vyc29yQmxpbmsiOmNhc2UiY3Vyc29yU3R5bGUiOnRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LHRoaXMuYnVmZmVyLnkpO2JyZWFrO2Nhc2UiY3VzdG9tR2x5cGhzIjpjYXNlImRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzIjpjYXNlImxldHRlclNwYWNpbmciOmNhc2UibGluZUhlaWdodCI6Y2FzZSJmb250V2VpZ2h0IjpjYXNlImZvbnRXZWlnaHRCb2xkIjpjYXNlIm1pbmltdW1Db250cmFzdFJhdGlvIjp0aGlzLl9yZW5kZXJTZXJ2aWNlJiYodGhpcy5fcmVuZGVyU2VydmljZS5jbGVhcigpLHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLHRoaXMucm93cyksdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpKTticmVhaztjYXNlInJlbmRlcmVyVHlwZSI6dGhpcy5fcmVuZGVyU2VydmljZSYmKHRoaXMuX3JlbmRlclNlcnZpY2Uuc2V0UmVuZGVyZXIodGhpcy5fY3JlYXRlUmVuZGVyZXIoKSksdGhpcy5fcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0aGlzLmNvbHMsdGhpcy5yb3dzKSk7YnJlYWs7Y2FzZSJzY3JvbGxiYWNrIjpudWxsPT09KG49dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PW58fG4uc3luY1Njcm9sbEFyZWEoKTticmVhaztjYXNlInNjcmVlblJlYWRlck1vZGUiOnRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlPyF0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlciYmdGhpcy5fcmVuZGVyU2VydmljZSYmKHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyPW5ldyBTLkFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMsdGhpcy5fcmVuZGVyU2VydmljZSkpOihudWxsPT09KG89dGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXIpfHx2b2lkIDA9PT1vfHxvLmRpc3Bvc2UoKSx0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcj12b2lkIDApO2JyZWFrO2Nhc2UidGFiU3RvcFdpZHRoIjp0aGlzLmJ1ZmZlcnMuc2V0dXBUYWJTdG9wcygpO2JyZWFrO2Nhc2UidGhlbWUiOnRoaXMuX3NldFRoZW1lKHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50aGVtZSl9fSx0LnByb3RvdHlwZS5fb25UZXh0QXJlYUZvY3VzPWZ1bmN0aW9uKGUpe3RoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyYmdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbSSIpLHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZSksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImZvY3VzIiksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuX29uRm9jdXMuZmlyZSgpfSx0LnByb3RvdHlwZS5ibHVyPWZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT10aGlzLnRleHRhcmVhKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5ibHVyKCl9LHQucHJvdG90eXBlLl9vblRleHRBcmVhQmx1cj1mdW5jdGlvbigpe3RoaXMudGV4dGFyZWEudmFsdWU9IiIsdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksdGhpcy5idWZmZXIueSksdGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzJiZ0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIltPIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImZvY3VzIiksdGhpcy5fb25CbHVyLmZpcmUoKX0sdC5wcm90b3R5cGUuX3N5bmNUZXh0QXJlYT1mdW5jdGlvbigpe2lmKHRoaXMudGV4dGFyZWEmJnRoaXMuYnVmZmVyLmlzQ3Vyc29ySW5WaWV3cG9ydCYmIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmlzQ29tcG9zaW5nJiZ0aGlzLl9yZW5kZXJTZXJ2aWNlKXt2YXIgZT10aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55LHQ9dGhpcy5idWZmZXIubGluZXMuZ2V0KGUpO2lmKHQpe3ZhciByPU1hdGgubWluKHRoaXMuYnVmZmVyLngsdGhpcy5jb2xzLTEpLGk9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbj10LmdldFdpZHRoKHIpLG89dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCpuLHM9dGhpcy5idWZmZXIueSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxhPXIqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aDt0aGlzLnRleHRhcmVhLnN0eWxlLmxlZnQ9YSsicHgiLHRoaXMudGV4dGFyZWEuc3R5bGUudG9wPXMrInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLndpZHRoPW8rInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLmhlaWdodD1pKyJweCIsdGhpcy50ZXh0YXJlYS5zdHlsZS5saW5lSGVpZ2h0PWkrInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLnpJbmRleD0iLTUifX19LHQucHJvdG90eXBlLl9pbml0R2xvYmFsPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9iaW5kS2V5cygpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwiY29weSIsKGZ1bmN0aW9uKHQpe2UuaGFzU2VsZWN0aW9uKCkmJigwLGguY29weUhhbmRsZXIpKHQsZS5fc2VsZWN0aW9uU2VydmljZSl9KSkpO3ZhciB0PWZ1bmN0aW9uKHQpe3JldHVybigwLGguaGFuZGxlUGFzdGVFdmVudCkodCxlLnRleHRhcmVhLGUuY29yZVNlcnZpY2UpfTt0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJwYXN0ZSIsdCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwicGFzdGUiLHQpKSx2LmlzRmlyZWZveD90aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIm1vdXNlZG93biIsKGZ1bmN0aW9uKHQpezI9PT10LmJ1dHRvbiYmKDAsaC5yaWdodENsaWNrSGFuZGxlcikodCxlLnRleHRhcmVhLGUuc2NyZWVuRWxlbWVudCxlLl9zZWxlY3Rpb25TZXJ2aWNlLGUub3B0aW9ucy5yaWdodENsaWNrU2VsZWN0c1dvcmQpfSkpKTp0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsImNvbnRleHRtZW51IiwoZnVuY3Rpb24odCl7KDAsaC5yaWdodENsaWNrSGFuZGxlcikodCxlLnRleHRhcmVhLGUuc2NyZWVuRWxlbWVudCxlLl9zZWxlY3Rpb25TZXJ2aWNlLGUub3B0aW9ucy5yaWdodENsaWNrU2VsZWN0c1dvcmQpfSkpKSx2LmlzTGludXgmJnRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwiYXV4Y2xpY2siLChmdW5jdGlvbih0KXsxPT09dC5idXR0b24mJigwLGgubW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvcikodCxlLnRleHRhcmVhLGUuc2NyZWVuRWxlbWVudCl9KSkpfSx0LnByb3RvdHlwZS5fYmluZEtleXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImtleXVwIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleVVwKHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJrZXlkb3duIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleURvd24odCl9KSwhMCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImtleXByZXNzIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2tleVByZXNzKHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJjb21wb3NpdGlvbnN0YXJ0IiwoZnVuY3Rpb24oKXtyZXR1cm4gZS5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25zdGFydCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJjb21wb3NpdGlvbnVwZGF0ZSIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbnVwZGF0ZSh0KX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiY29tcG9zaXRpb25lbmQiLChmdW5jdGlvbigpe3JldHVybiBlLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbmVuZCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJpbnB1dCIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9pbnB1dEV2ZW50KHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NvbXBvc2l0aW9uSGVscGVyLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVuZGVyKChmdW5jdGlvbih0KXtyZXR1cm4gZS5fcXVldWVMaW5raWZpY2F0aW9uKHQuc3RhcnQsdC5lbmQpfSkpKX0sdC5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlKXRocm93IG5ldyBFcnJvcigiVGVybWluYWwgcmVxdWlyZXMgYSBwYXJlbnQgZWxlbWVudC4iKTtlLmlzQ29ubmVjdGVkfHx0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJUZXJtaW5hbC5vcGVuIHdhcyBjYWxsZWQgb24gYW4gZWxlbWVudCB0aGF0IHdhcyBub3QgYXR0YWNoZWQgdG8gdGhlIERPTSIpLHRoaXMuX2RvY3VtZW50PWUub3duZXJEb2N1bWVudCx0aGlzLmVsZW1lbnQ9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5lbGVtZW50LmRpcj0ibHRyIix0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgidGVybWluYWwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgieHRlcm0iKSx0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKCJ0YWJpbmRleCIsIjAiKSxlLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCk7dmFyIHI9VS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7dGhpcy5fdmlld3BvcnRFbGVtZW50PVUuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5fdmlld3BvcnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtLXZpZXdwb3J0Iiksci5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydEVsZW1lbnQpLHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYT1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYS5jbGFzc0xpc3QuYWRkKCJ4dGVybS1zY3JvbGwtYXJlYSIpLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEpLHRoaXMuc2NyZWVuRWxlbWVudD1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuc2NyZWVuRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1zY3JlZW4iKSx0aGlzLl9oZWxwZXJDb250YWluZXI9VS5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLl9oZWxwZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0taGVscGVycyIpLHRoaXMuc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9oZWxwZXJDb250YWluZXIpLHIuYXBwZW5kQ2hpbGQodGhpcy5zY3JlZW5FbGVtZW50KSx0aGlzLnRleHRhcmVhPVUuY3JlYXRlRWxlbWVudCgidGV4dGFyZWEiKSx0aGlzLnRleHRhcmVhLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWhlbHBlci10ZXh0YXJlYSIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhcmlhLWxhYmVsIixnLnByb21wdExhYmVsKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgiYXJpYS1tdWx0aWxpbmUiLCJmYWxzZSIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhdXRvY29ycmVjdCIsIm9mZiIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhdXRvY2FwaXRhbGl6ZSIsIm9mZiIpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJzcGVsbGNoZWNrIiwiZmFsc2UiKSx0aGlzLnRleHRhcmVhLnRhYkluZGV4PTAsdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiZm9jdXMiLChmdW5jdGlvbihlKXtyZXR1cm4gdC5fb25UZXh0QXJlYUZvY3VzKGUpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJibHVyIiwoZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25UZXh0QXJlYUJsdXIoKX0pKSksdGhpcy5faGVscGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMudGV4dGFyZWEpO3ZhciBpPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEQuQ29yZUJyb3dzZXJTZXJ2aWNlLHRoaXMudGV4dGFyZWEpO3RoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JQ29yZUJyb3dzZXJTZXJ2aWNlLGkpLHRoaXMuX2NoYXJTaXplU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShNLkNoYXJTaXplU2VydmljZSx0aGlzLl9kb2N1bWVudCx0aGlzLl9oZWxwZXJDb250YWluZXIpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JQ2hhclNpemVTZXJ2aWNlLHRoaXMuX2NoYXJTaXplU2VydmljZSksdGhpcy5fdGhlbWU9dGhpcy5vcHRpb25zLnRoZW1lfHx0aGlzLl90aGVtZSx0aGlzLl9jb2xvck1hbmFnZXI9bmV3IHguQ29sb3JNYW5hZ2VyKFUsdGhpcy5vcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KSx0aGlzLnJlZ2lzdGVyKHRoaXMub3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jb2xvck1hbmFnZXIub25PcHRpb25zQ2hhbmdlKGUpfSkpKSx0aGlzLl9jb2xvck1hbmFnZXIuc2V0VGhlbWUodGhpcy5fdGhlbWUpLHRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoUC5DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSUNoYXJhY3RlckpvaW5lclNlcnZpY2UsdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSk7dmFyIG49dGhpcy5fY3JlYXRlUmVuZGVyZXIoKTt0aGlzLl9yZW5kZXJTZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoUi5SZW5kZXJTZXJ2aWNlLG4sdGhpcy5yb3dzLHRoaXMuc2NyZWVuRWxlbWVudCkpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JUmVuZGVyU2VydmljZSx0aGlzLl9yZW5kZXJTZXJ2aWNlKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fb25SZW5kZXIuZmlyZShlKX0pKSksdGhpcy5vblJlc2l6ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2UucmVzaXplKGUuY29scyxlLnJvd3MpfSkpLHRoaXMuX2NvbXBvc2l0aW9uVmlldz1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKCJjb21wb3NpdGlvbi12aWV3IiksdGhpcy5fY29tcG9zaXRpb25IZWxwZXI9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoYy5Db21wb3NpdGlvbkhlbHBlcix0aGlzLnRleHRhcmVhLHRoaXMuX2NvbXBvc2l0aW9uVmlldyksdGhpcy5faGVscGVyQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NvbXBvc2l0aW9uVmlldyksdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKHIpLHRoaXMuX3NvdW5kU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShtLlNvdW5kU2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklTb3VuZFNlcnZpY2UsdGhpcy5fc291bmRTZXJ2aWNlKSx0aGlzLl9tb3VzZVNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQS5Nb3VzZVNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JTW91c2VTZXJ2aWNlLHRoaXMuX21vdXNlU2VydmljZSksdGhpcy52aWV3cG9ydD10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShsLlZpZXdwb3J0LChmdW5jdGlvbihlKXtyZXR1cm4gdC5zY3JvbGxMaW5lcyhlLCEwLDEpfSksdGhpcy5fdmlld3BvcnRFbGVtZW50LHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYSx0aGlzLmVsZW1lbnQpLHRoaXMudmlld3BvcnQub25UaGVtZUNoYW5nZSh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2lucHV0SGFuZGxlci5vblJlcXVlc3RTeW5jU2Nyb2xsQmFyKChmdW5jdGlvbigpe3JldHVybiB0LnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy52aWV3cG9ydCksdGhpcy5yZWdpc3Rlcih0aGlzLm9uQ3Vyc29yTW92ZSgoZnVuY3Rpb24oKXt0Ll9yZW5kZXJTZXJ2aWNlLm9uQ3Vyc29yTW92ZSgpLHQuX3N5bmNUZXh0QXJlYSgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25SZXNpemUoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodC5jb2xzLHQucm93cyl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkJsdXIoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2Uub25CbHVyKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkZvY3VzKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLm9uRm9jdXMoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpfSkpKSx0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlPXRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UocC5TZWxlY3Rpb25TZXJ2aWNlLHRoaXMuZWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5saW5raWZpZXIyKSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklTZWxlY3Rpb25TZXJ2aWNlLHRoaXMuX3NlbGVjdGlvblNlcnZpY2UpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblJlcXVlc3RTY3JvbGxMaW5lcygoZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2Nyb2xsTGluZXMoZS5hbW91bnQsZS5zdXBwcmVzc1Njcm9sbEV2ZW50KX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlKChmdW5jdGlvbigpe3JldHVybiB0Ll9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblJlcXVlc3RSZWRyYXcoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLm9uU2VsZWN0aW9uQ2hhbmdlZChlLnN0YXJ0LGUuZW5kLGUuY29sdW1uU2VsZWN0TW9kZSl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vbkxpbnV4TW91c2VTZWxlY3Rpb24oKGZ1bmN0aW9uKGUpe3QudGV4dGFyZWEudmFsdWU9ZSx0LnRleHRhcmVhLmZvY3VzKCksdC50ZXh0YXJlYS5zZWxlY3QoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9vblNjcm9sbC5ldmVudCgoZnVuY3Rpb24oZSl7dC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpLHQuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl92aWV3cG9ydEVsZW1lbnQsInNjcm9sbCIsKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3NlbGVjdGlvblNlcnZpY2UucmVmcmVzaCgpfSkpKSx0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGIuTW91c2Vab25lTWFuYWdlcix0aGlzLmVsZW1lbnQsdGhpcy5zY3JlZW5FbGVtZW50KSx0aGlzLnJlZ2lzdGVyKHRoaXMuX21vdXNlWm9uZU1hbmFnZXIpLHRoaXMucmVnaXN0ZXIodGhpcy5vblNjcm9sbCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fbW91c2Vab25lTWFuYWdlci5jbGVhckFsbCgpfSkpKSx0aGlzLmxpbmtpZmllci5hdHRhY2hUb0RvbSh0aGlzLmVsZW1lbnQsdGhpcy5fbW91c2Vab25lTWFuYWdlciksdGhpcy5saW5raWZpZXIyLmF0dGFjaFRvRG9tKHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLl9tb3VzZVNlcnZpY2UsdGhpcy5fcmVuZGVyU2VydmljZSksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShILkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcix0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsIm1vdXNlZG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9zZWxlY3Rpb25TZXJ2aWNlLm9uTW91c2VEb3duKGUpfSkpKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmU/KHRoaXMuX3NlbGVjdGlvblNlcnZpY2UuZGlzYWJsZSgpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJlbmFibGUtbW91c2UtZXZlbnRzIikpOnRoaXMuX3NlbGVjdGlvblNlcnZpY2UuZW5hYmxlKCksdGhpcy5vcHRpb25zLnNjcmVlblJlYWRlck1vZGUmJih0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcj1uZXcgUy5BY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzLHRoaXMuX3JlbmRlclNlcnZpY2UpKSx0aGlzLm9wdGlvbnMub3ZlcnZpZXdSdWxlcldpZHRoJiYodGhpcy5fb3ZlcnZpZXdSdWxlclJlbmRlcmVyPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGouT3ZlcnZpZXdSdWxlclJlbmRlcmVyLHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbigpeyF0Ll9vdmVydmlld1J1bGVyUmVuZGVyZXImJnQub3B0aW9ucy5vdmVydmlld1J1bGVyV2lkdGgmJnQuX3ZpZXdwb3J0RWxlbWVudCYmdC5zY3JlZW5FbGVtZW50JiYodC5fb3ZlcnZpZXdSdWxlclJlbmRlcmVyPXQuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGouT3ZlcnZpZXdSdWxlclJlbmRlcmVyLHQuX3ZpZXdwb3J0RWxlbWVudCx0LnNjcmVlbkVsZW1lbnQpKX0pKSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSx0aGlzLl9pbml0R2xvYmFsKCksdGhpcy5iaW5kTW91c2UoKX0sdC5wcm90b3R5cGUuX2NyZWF0ZVJlbmRlcmVyPWZ1bmN0aW9uKCl7c3dpdGNoKHRoaXMub3B0aW9ucy5yZW5kZXJlclR5cGUpe2Nhc2UiY2FudmFzIjpyZXR1cm4gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoXy5SZW5kZXJlcix0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLmxpbmtpZmllcix0aGlzLmxpbmtpZmllcjIpO2Nhc2UiZG9tIjpyZXR1cm4gdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoQy5Eb21SZW5kZXJlcix0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLHRoaXMuZWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5fdmlld3BvcnRFbGVtZW50LHRoaXMubGlua2lmaWVyLHRoaXMubGlua2lmaWVyMik7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCByZW5kZXJlclR5cGUgIicrdGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZSsnIicpfX0sdC5wcm90b3R5cGUuX3NldFRoZW1lPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaTt0aGlzLl90aGVtZT1lLG51bGw9PT0odD10aGlzLl9jb2xvck1hbmFnZXIpfHx2b2lkIDA9PT10fHx0LnNldFRoZW1lKGUpLG51bGw9PT0ocj10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5zZXRDb2xvcnModGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyksbnVsbD09PShpPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1pfHxpLm9uVGhlbWVDaGFuZ2UodGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyl9LHQucHJvdG90eXBlLmJpbmRNb3VzZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLHI9dGhpcy5lbGVtZW50O2Z1bmN0aW9uIGkoZSl7dmFyIHIsaSxuPXQuX21vdXNlU2VydmljZS5nZXRSYXdCeXRlQ29vcmRzKGUsdC5zY3JlZW5FbGVtZW50LHQuY29scyx0LnJvd3MpO2lmKCFuKXJldHVybiExO3N3aXRjaChlLm92ZXJyaWRlVHlwZXx8ZS50eXBlKXtjYXNlIm1vdXNlbW92ZSI6aT0zMix2b2lkIDA9PT1lLmJ1dHRvbnM/KHI9Myx2b2lkIDAhPT1lLmJ1dHRvbiYmKHI9ZS5idXR0b248Mz9lLmJ1dHRvbjozKSk6cj0xJmUuYnV0dG9ucz8wOjQmZS5idXR0b25zPzE6MiZlLmJ1dHRvbnM/MjozO2JyZWFrO2Nhc2UibW91c2V1cCI6aT0wLHI9ZS5idXR0b248Mz9lLmJ1dHRvbjozO2JyZWFrO2Nhc2UibW91c2Vkb3duIjppPTEscj1lLmJ1dHRvbjwzP2UuYnV0dG9uOjM7YnJlYWs7Y2FzZSJ3aGVlbCI6aWYoMD09PXQudmlld3BvcnQuZ2V0TGluZXNTY3JvbGxlZChlKSlyZXR1cm4hMTtpPWUuZGVsdGFZPDA/MDoxLHI9NDticmVhaztkZWZhdWx0OnJldHVybiExfXJldHVybiEodm9pZCAwPT09aXx8dm9pZCAwPT09cnx8cj40KSYmdC5jb3JlTW91c2VTZXJ2aWNlLnRyaWdnZXJNb3VzZUV2ZW50KHtjb2w6bi54LTMzLHJvdzpuLnktMzMsYnV0dG9uOnIsYWN0aW9uOmksY3RybDplLmN0cmxLZXksYWx0OmUuYWx0S2V5LHNoaWZ0OmUuc2hpZnRLZXl9KX12YXIgbj17bW91c2V1cDpudWxsLHdoZWVsOm51bGwsbW91c2VkcmFnOm51bGwsbW91c2Vtb3ZlOm51bGx9LG89ZnVuY3Rpb24odCl7cmV0dXJuIGkodCksdC5idXR0b25zfHwoZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsbi5tb3VzZXVwKSxuLm1vdXNlZHJhZyYmZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixuLm1vdXNlZHJhZykpLGUuY2FuY2VsKHQpfSxzPWZ1bmN0aW9uKHQpe3JldHVybiBpKHQpLGUuY2FuY2VsKHQsITApfSxhPWZ1bmN0aW9uKGUpe2UuYnV0dG9ucyYmaShlKX0sYz1mdW5jdGlvbihlKXtlLmJ1dHRvbnN8fGkoZSl9O3RoaXMucmVnaXN0ZXIodGhpcy5jb3JlTW91c2VTZXJ2aWNlLm9uUHJvdG9jb2xDaGFuZ2UoKGZ1bmN0aW9uKHQpe3Q/KCJkZWJ1ZyI9PT1lLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubG9nTGV2ZWwmJmUuX2xvZ1NlcnZpY2UuZGVidWcoIkJpbmRpbmcgdG8gbW91c2UgZXZlbnRzOiIsZS5jb3JlTW91c2VTZXJ2aWNlLmV4cGxhaW5FdmVudHModCkpLGUuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJlbmFibGUtbW91c2UtZXZlbnRzIiksZS5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCkpOihlLl9sb2dTZXJ2aWNlLmRlYnVnKCJVbmJpbmRpbmcgZnJvbSBtb3VzZSBldmVudHMuIiksZS5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImVuYWJsZS1tb3VzZS1ldmVudHMiKSxlLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpKSw4JnQ/bi5tb3VzZW1vdmV8fChyLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsYyksbi5tb3VzZW1vdmU9Yyk6KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixuLm1vdXNlbW92ZSksbi5tb3VzZW1vdmU9bnVsbCksMTYmdD9uLndoZWVsfHwoci5hZGRFdmVudExpc3RlbmVyKCJ3aGVlbCIscyx7cGFzc2l2ZTohMX0pLG4ud2hlZWw9cyk6KHIucmVtb3ZlRXZlbnRMaXN0ZW5lcigid2hlZWwiLG4ud2hlZWwpLG4ud2hlZWw9bnVsbCksMiZ0P24ubW91c2V1cHx8KG4ubW91c2V1cD1vKTooZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsbi5tb3VzZXVwKSxuLm1vdXNldXA9bnVsbCksNCZ0P24ubW91c2VkcmFnfHwobi5tb3VzZWRyYWc9YSk6KGUuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbi5tb3VzZWRyYWcpLG4ubW91c2VkcmFnPW51bGwpfSkpKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9dGhpcy5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHIsIm1vdXNlZG93biIsKGZ1bmN0aW9uKHQpe2lmKHQucHJldmVudERlZmF1bHQoKSxlLmZvY3VzKCksZS5jb3JlTW91c2VTZXJ2aWNlLmFyZU1vdXNlRXZlbnRzQWN0aXZlJiYhZS5fc2VsZWN0aW9uU2VydmljZS5zaG91bGRGb3JjZVNlbGVjdGlvbih0KSlyZXR1cm4gaSh0KSxuLm1vdXNldXAmJmUuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLG4ubW91c2V1cCksbi5tb3VzZWRyYWcmJmUuX2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbi5tb3VzZWRyYWcpLGUuY2FuY2VsKHQpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShyLCJ3aGVlbCIsKGZ1bmN0aW9uKHQpe2lmKCFuLndoZWVsKXtpZighZS5idWZmZXIuaGFzU2Nyb2xsYmFjayl7dmFyIHI9ZS52aWV3cG9ydC5nZXRMaW5lc1Njcm9sbGVkKHQpO2lmKDA9PT1yKXJldHVybjtmb3IodmFyIGk9dS5DMC5FU0MrKGUuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cz8iTyI6IlsiKSsodC5kZWx0YVk8MD8iQSI6IkIiKSxvPSIiLHM9MDtzPE1hdGguYWJzKHIpO3MrKylvKz1pO3JldHVybiBlLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQobywhMCksZS5jYW5jZWwodCwhMCl9cmV0dXJuIGUudmlld3BvcnQub25XaGVlbCh0KT9lLmNhbmNlbCh0KTp2b2lkIDB9fSkse3Bhc3NpdmU6ITF9KSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikociwidG91Y2hzdGFydCIsKGZ1bmN0aW9uKHQpe2lmKCFlLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUpcmV0dXJuIGUudmlld3BvcnQub25Ub3VjaFN0YXJ0KHQpLGUuY2FuY2VsKHQpfSkse3Bhc3NpdmU6ITB9KSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikociwidG91Y2htb3ZlIiwoZnVuY3Rpb24odCl7aWYoIWUuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSlyZXR1cm4gZS52aWV3cG9ydC5vblRvdWNoTW92ZSh0KT92b2lkIDA6ZS5jYW5jZWwodCl9KSx7cGFzc2l2ZTohMX0pKX0sdC5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlLHQpe3ZhciByO251bGw9PT0ocj10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5yZWZyZXNoUm93cyhlLHQpfSx0LnByb3RvdHlwZS5fcXVldWVMaW5raWZpY2F0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI7bnVsbD09PShyPXRoaXMubGlua2lmaWVyKXx8dm9pZCAwPT09cnx8ci5saW5raWZ5Um93cyhlLHQpfSx0LnByb3RvdHlwZS51cGRhdGVDdXJzb3JTdHlsZT1mdW5jdGlvbihlKXt2YXIgdDsobnVsbD09PSh0PXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LnNob3VsZENvbHVtblNlbGVjdChlKSk/dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImNvbHVtbi1zZWxlY3QiKTp0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiY29sdW1uLXNlbGVjdCIpfSx0LnByb3RvdHlwZS5fc2hvd0N1cnNvcj1mdW5jdGlvbigpe3RoaXMuY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZHx8KHRoaXMuY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZD0hMCx0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSx0aGlzLmJ1ZmZlci55KSl9LHQucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKHQscixpKXt2b2lkIDA9PT1pJiYoaT0wKSxlLnByb3RvdHlwZS5zY3JvbGxMaW5lcy5jYWxsKHRoaXMsdCxyLGkpLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKX0sdC5wcm90b3R5cGUucGFzdGU9ZnVuY3Rpb24oZSl7KDAsaC5wYXN0ZSkoZSx0aGlzLnRleHRhcmVhLHRoaXMuY29yZVNlcnZpY2UpfSx0LnByb3RvdHlwZS5hdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPWV9LHQucHJvdG90eXBlLnJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMubGlua2lmaWVyLnJlZ2lzdGVyTGlua01hdGNoZXIoZSx0LHIpO3JldHVybiB0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksaX0sdC5wcm90b3R5cGUuZGVyZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUpe3RoaXMubGlua2lmaWVyLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihlKSYmdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfSx0LnByb3RvdHlwZS5yZWdpc3RlckxpbmtQcm92aWRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5saW5raWZpZXIyLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKGUpfSx0LnByb3RvdHlwZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcj1mdW5jdGlvbihlKXtpZighdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSl0aHJvdyBuZXcgRXJyb3IoIlRlcm1pbmFsIG11c3QgYmUgb3BlbmVkIGZpcnN0Iik7dmFyIHQ9dGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5yZWdpc3RlcihlKTtyZXR1cm4gdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpLHR9LHQucHJvdG90eXBlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpdGhyb3cgbmV3IEVycm9yKCJUZXJtaW5hbCBtdXN0IGJlIG9wZW5lZCBmaXJzdCIpO3RoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UuZGVyZWdpc3RlcihlKSYmdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm1hcmtlcnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIubWFya2Vyc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5hZGRNYXJrZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy5idWZmZXI9PT10aGlzLmJ1ZmZlcnMubm9ybWFsKXJldHVybiB0aGlzLmJ1ZmZlci5hZGRNYXJrZXIodGhpcy5idWZmZXIueWJhc2UrdGhpcy5idWZmZXIueStlKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5yZWdpc3RlckRlY29yYXRpb24oZSl9LHQucHJvdG90eXBlLmhhc1NlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiEhdGhpcy5fc2VsZWN0aW9uU2VydmljZSYmdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb259LHQucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbihlLHQscil7dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZXRTZWxlY3Rpb24oZSx0LHIpfSx0LnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc2VsZWN0aW9uU2VydmljZT90aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblRleHQ6IiJ9LHQucHJvdG90eXBlLmdldFNlbGVjdGlvblBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2VsZWN0aW9uU2VydmljZSYmdGhpcy5fc2VsZWN0aW9uU2VydmljZS5oYXNTZWxlY3Rpb24pcmV0dXJue3N0YXJ0Q29sdW1uOnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnRbMF0sc3RhcnRSb3c6dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25TdGFydFsxXSxlbmRDb2x1bW46dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25FbmRbMF0sZW5kUm93OnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uRW5kWzFdfX0sdC5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fc2VsZWN0aW9uU2VydmljZSl8fHZvaWQgMD09PWV8fGUuY2xlYXJTZWxlY3Rpb24oKX0sdC5wcm90b3R5cGUuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLnNlbGVjdEFsbCgpfSx0LnByb3RvdHlwZS5zZWxlY3RMaW5lcz1mdW5jdGlvbihlLHQpe3ZhciByO251bGw9PT0ocj10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5zZWxlY3RMaW5lcyhlLHQpfSx0LnByb3RvdHlwZS5fa2V5RG93bj1mdW5jdGlvbihlKXtpZih0aGlzLl9rZXlEb3duSGFuZGxlZD0hMSx0aGlzLl9rZXlEb3duU2Vlbj0hMCx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpKXJldHVybiExO3ZhciB0PXRoaXMuYnJvd3Nlci5pc01hYyYmdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSYmZS5hbHRLZXk7aWYoIXQmJiF0aGlzLl9jb21wb3NpdGlvbkhlbHBlci5rZXlkb3duKGUpKXJldHVybiB0aGlzLmJ1ZmZlci55YmFzZSE9PXRoaXMuYnVmZmVyLnlkaXNwJiZ0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvQm90dG9tKCksITE7dHx8IkRlYWQiIT09ZS5rZXkmJiJBbHRHcmFwaCIhPT1lLmtleXx8KHRoaXMuX3VucHJvY2Vzc2VkRGVhZEtleT0hMCk7dmFyIHI9KDAsdy5ldmFsdWF0ZUtleWJvYXJkRXZlbnQpKGUsdGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzLHRoaXMuYnJvd3Nlci5pc01hYyx0aGlzLm9wdGlvbnMubWFjT3B0aW9uSXNNZXRhKTtpZih0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGUpLDM9PT1yLnR5cGV8fDI9PT1yLnR5cGUpe3ZhciBpPXRoaXMucm93cy0xO3JldHVybiB0aGlzLnNjcm9sbExpbmVzKDI9PT1yLnR5cGU/LWk6aSksdGhpcy5jYW5jZWwoZSwhMCl9cmV0dXJuIDE9PT1yLnR5cGUmJnRoaXMuc2VsZWN0QWxsKCksISF0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsZSl8fChyLmNhbmNlbCYmdGhpcy5jYW5jZWwoZSwhMCksIXIua2V5fHwhIShlLmtleSYmIWUuY3RybEtleSYmIWUuYWx0S2V5JiYhZS5tZXRhS2V5JiYxPT09ZS5rZXkubGVuZ3RoJiZlLmtleS5jaGFyQ29kZUF0KDApPj02NSYmZS5rZXkuY2hhckNvZGVBdCgwKTw9OTApfHwodGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5Pyh0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITEsITApOihyLmtleSE9PXUuQzAuRVRYJiZyLmtleSE9PXUuQzAuQ1J8fCh0aGlzLnRleHRhcmVhLnZhbHVlPSIiKSx0aGlzLl9vbktleS5maXJlKHtrZXk6ci5rZXksZG9tRXZlbnQ6ZX0pLHRoaXMuX3Nob3dDdXJzb3IoKSx0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoci5rZXksITApLHRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlP3ZvaWQodGhpcy5fa2V5RG93bkhhbmRsZWQ9ITApOnRoaXMuY2FuY2VsKGUsITApKSkpfSx0LnByb3RvdHlwZS5faXNUaGlyZExldmVsU2hpZnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmlzTWFjJiYhdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSYmdC5hbHRLZXkmJiF0LmN0cmxLZXkmJiF0Lm1ldGFLZXl8fGUuaXNXaW5kb3dzJiZ0LmFsdEtleSYmdC5jdHJsS2V5JiYhdC5tZXRhS2V5fHxlLmlzV2luZG93cyYmdC5nZXRNb2RpZmllclN0YXRlKCJBbHRHcmFwaCIpO3JldHVybiJrZXlwcmVzcyI9PT10LnR5cGU/cjpyJiYoIXQua2V5Q29kZXx8dC5rZXlDb2RlPjQ3KX0sdC5wcm90b3R5cGUuX2tleVVwPWZ1bmN0aW9uKGUpe3RoaXMuX2tleURvd25TZWVuPSExLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciYmITE9PT10aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZSl8fChmdW5jdGlvbihlKXtyZXR1cm4gMTY9PT1lLmtleUNvZGV8fDE3PT09ZS5rZXlDb2RlfHwxOD09PWUua2V5Q29kZX0oZSl8fHRoaXMuZm9jdXMoKSx0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGUpLHRoaXMuX2tleVByZXNzSGFuZGxlZD0hMSl9LHQucHJvdG90eXBlLl9rZXlQcmVzcz1mdW5jdGlvbihlKXt2YXIgdDtpZih0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITEsdGhpcy5fa2V5RG93bkhhbmRsZWQpcmV0dXJuITE7aWYodGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyJiYhMT09PXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihlKSlyZXR1cm4hMTtpZih0aGlzLmNhbmNlbChlKSxlLmNoYXJDb2RlKXQ9ZS5jaGFyQ29kZTtlbHNlIGlmKG51bGw9PT1lLndoaWNofHx2b2lkIDA9PT1lLndoaWNoKXQ9ZS5rZXlDb2RlO2Vsc2V7aWYoMD09PWUud2hpY2h8fDA9PT1lLmNoYXJDb2RlKXJldHVybiExO3Q9ZS53aGljaH1yZXR1cm4hKCF0fHwoZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5tZXRhS2V5KSYmIXRoaXMuX2lzVGhpcmRMZXZlbFNoaWZ0KHRoaXMuYnJvd3NlcixlKXx8KHQ9U3RyaW5nLmZyb21DaGFyQ29kZSh0KSx0aGlzLl9vbktleS5maXJlKHtrZXk6dCxkb21FdmVudDplfSksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSx0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITAsdGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExLDApKX0sdC5wcm90b3R5cGUuX2lucHV0RXZlbnQ9ZnVuY3Rpb24oZSl7aWYoZS5kYXRhJiYiaW5zZXJ0VGV4dCI9PT1lLmlucHV0VHlwZSYmKCFlLmNvbXBvc2VkfHwhdGhpcy5fa2V5RG93blNlZW4pJiYhdGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUpe2lmKHRoaXMuX2tleVByZXNzSGFuZGxlZClyZXR1cm4hMTt0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITE7dmFyIHQ9ZS5kYXRhO3JldHVybiB0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodCwhMCksdGhpcy5jYW5jZWwoZSksITB9cmV0dXJuITF9LHQucHJvdG90eXBlLmJlbGw9ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLl9zb3VuZEJlbGwoKSYmKG51bGw9PT0oZT10aGlzLl9zb3VuZFNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLnBsYXlCZWxsU291bmQoKSksdGhpcy5fb25CZWxsLmZpcmUoKX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQscil7dCE9PXRoaXMuY29sc3x8ciE9PXRoaXMucm93cz9lLnByb3RvdHlwZS5yZXNpemUuY2FsbCh0aGlzLHQscik6dGhpcy5fY2hhclNpemVTZXJ2aWNlJiYhdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSYmdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKX0sdC5wcm90b3R5cGUuX2FmdGVyUmVzaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaTtudWxsPT09KHI9dGhpcy5fY2hhclNpemVTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5tZWFzdXJlKCksbnVsbD09PShpPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1pfHxpLnN5bmNTY3JvbGxBcmVhKCEwKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtpZigwIT09dGhpcy5idWZmZXIueWJhc2V8fDAhPT10aGlzLmJ1ZmZlci55KXt0aGlzLmJ1ZmZlci5jbGVhckFsbE1hcmtlcnMoKSx0aGlzLmJ1ZmZlci5saW5lcy5zZXQoMCx0aGlzLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5idWZmZXIueWJhc2UrdGhpcy5idWZmZXIueSkpLHRoaXMuYnVmZmVyLmxpbmVzLmxlbmd0aD0xLHRoaXMuYnVmZmVyLnlkaXNwPTAsdGhpcy5idWZmZXIueWJhc2U9MCx0aGlzLmJ1ZmZlci55PTA7Zm9yKHZhciBlPTE7ZTx0aGlzLnJvd3M7ZSsrKXRoaXMuYnVmZmVyLmxpbmVzLnB1c2godGhpcy5idWZmZXIuZ2V0QmxhbmtMaW5lKEUuREVGQVVMVF9BVFRSX0RBVEEpKTt0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksdGhpcy5fb25TY3JvbGwuZmlyZSh7cG9zaXRpb246dGhpcy5idWZmZXIueWRpc3Asc291cmNlOjB9KX19LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIHQscjt0aGlzLm9wdGlvbnMucm93cz10aGlzLnJvd3MsdGhpcy5vcHRpb25zLmNvbHM9dGhpcy5jb2xzO3ZhciBpPXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcjt0aGlzLl9zZXR1cCgpLGUucHJvdG90eXBlLnJlc2V0LmNhbGwodGhpcyksbnVsbD09PSh0PXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT10fHx0LnJlc2V0KCksdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UucmVzZXQoKSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9aSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksbnVsbD09PShyPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1yfHxyLnN5bmNTY3JvbGxBcmVhKCl9LHQucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLmNsZWFyVGV4dHVyZUF0bGFzKCl9LHQucHJvdG90eXBlLl9yZXBvcnRGb2N1cz1mdW5jdGlvbigpe3ZhciBlOyhudWxsPT09KGU9dGhpcy5lbGVtZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbGFzc0xpc3QuY29udGFpbnMoImZvY3VzIikpP3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiW0kiKTp0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIltPIil9LHQucHJvdG90eXBlLl9yZXBvcnRXaW5kb3dzT3B0aW9ucz1mdW5jdGlvbihlKXtpZih0aGlzLl9yZW5kZXJTZXJ2aWNlKXN3aXRjaChlKXtjYXNlIGYuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlLkdFVF9XSU5fU0laRV9QSVhFTFM6dmFyIHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoLnRvRml4ZWQoMCkscj10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0LnRvRml4ZWQoMCk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbNDsiK3IrIjsiK3QrInQiKTticmVhaztjYXNlIGYuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlLkdFVF9DRUxMX1NJWkVfUElYRUxTOnZhciBpPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgudG9GaXhlZCgwKSxuPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LnRvRml4ZWQoMCk7dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbNjsiK24rIjsiK2krInQiKX19LHQucHJvdG90eXBlLmNhbmNlbD1mdW5jdGlvbihlLHQpe2lmKHRoaXMub3B0aW9ucy5jYW5jZWxFdmVudHN8fHQpcmV0dXJuIGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BQcm9wYWdhdGlvbigpLCExfSx0LnByb3RvdHlwZS5fdmlzdWFsQmVsbD1mdW5jdGlvbigpe3JldHVybiExfSx0LnByb3RvdHlwZS5fc291bmRCZWxsPWZ1bmN0aW9uKCl7cmV0dXJuInNvdW5kIj09PXRoaXMub3B0aW9ucy5iZWxsU3R5bGV9LHR9KFQuQ29yZVRlcm1pbmFsKTt0LlRlcm1pbmFsPXF9LDk5MjQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5UaW1lQmFzZWREZWJvdW5jZXI9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZvaWQgMD09PXQmJih0PTFlMyksdGhpcy5fcmVuZGVyQ2FsbGJhY2s9ZSx0aGlzLl9kZWJvdW5jZVRocmVzaG9sZE1TPXQsdGhpcy5fbGFzdFJlZnJlc2hNcz0wLHRoaXMuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkPSExfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fcmVmcmVzaFRpbWVvdXRJRCYmY2xlYXJUaW1lb3V0KHRoaXMuX3JlZnJlc2hUaW1lb3V0SUQpfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO3RoaXMuX3Jvd0NvdW50PXIsZT12b2lkIDAhPT1lP2U6MCx0PXZvaWQgMCE9PXQ/dDp0aGlzLl9yb3dDb3VudC0xLHRoaXMuX3Jvd1N0YXJ0PXZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0P01hdGgubWluKHRoaXMuX3Jvd1N0YXJ0LGUpOmUsdGhpcy5fcm93RW5kPXZvaWQgMCE9PXRoaXMuX3Jvd0VuZD9NYXRoLm1heCh0aGlzLl9yb3dFbmQsdCk6dDt2YXIgbj1EYXRlLm5vdygpO2lmKG4tdGhpcy5fbGFzdFJlZnJlc2hNcz49dGhpcy5fZGVib3VuY2VUaHJlc2hvbGRNUyl0aGlzLl9sYXN0UmVmcmVzaE1zPW4sdGhpcy5faW5uZXJSZWZyZXNoKCk7ZWxzZSBpZighdGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQpe3ZhciBvPW4tdGhpcy5fbGFzdFJlZnJlc2hNcyxzPXRoaXMuX2RlYm91bmNlVGhyZXNob2xkTVMtbzt0aGlzLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZD0hMCx0aGlzLl9yZWZyZXNoVGltZW91dElEPXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe2kuX2xhc3RSZWZyZXNoTXM9RGF0ZS5ub3coKSxpLl9pbm5lclJlZnJlc2goKSxpLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZD0hMSxpLl9yZWZyZXNoVGltZW91dElEPXZvaWQgMH0pLHMpfX0sZS5wcm90b3R5cGUuX2lubmVyUmVmcmVzaD1mdW5jdGlvbigpe2lmKHZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0JiZ2b2lkIDAhPT10aGlzLl9yb3dFbmQmJnZvaWQgMCE9PXRoaXMuX3Jvd0NvdW50KXt2YXIgZT1NYXRoLm1heCh0aGlzLl9yb3dTdGFydCwwKSx0PU1hdGgubWluKHRoaXMuX3Jvd0VuZCx0aGlzLl9yb3dDb3VudC0xKTt0aGlzLl9yb3dTdGFydD12b2lkIDAsdGhpcy5fcm93RW5kPXZvaWQgMCx0aGlzLl9yZW5kZXJDYWxsYmFjayhlLHQpfX0sZX0oKTt0LlRpbWVCYXNlZERlYm91bmNlcj1yfSwxNjgwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlZpZXdwb3J0PXZvaWQgMDt2YXIgYT1yKDg0NCksYz1yKDM2NTYpLGw9cig0NzI1KSxoPXIoMjU4NSksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsbCl7dmFyIGg9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBoLl9zY3JvbGxMaW5lcz10LGguX3ZpZXdwb3J0RWxlbWVudD1yLGguX3Njcm9sbEFyZWE9aSxoLl9lbGVtZW50PW4saC5fYnVmZmVyU2VydmljZT1vLGguX29wdGlvbnNTZXJ2aWNlPXMsaC5fY2hhclNpemVTZXJ2aWNlPWEsaC5fcmVuZGVyU2VydmljZT1sLGguc2Nyb2xsQmFyV2lkdGg9MCxoLl9jdXJyZW50Um93SGVpZ2h0PTAsaC5fY3VycmVudFNjYWxlZENlbGxIZWlnaHQ9MCxoLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGg9MCxoLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodD0wLGguX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodD0wLGguX2xhc3RUb3VjaFk9MCxoLl9sYXN0U2Nyb2xsVG9wPTAsaC5fd2hlZWxQYXJ0aWFsU2Nyb2xsPTAsaC5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPW51bGwsaC5faWdub3JlTmV4dFNjcm9sbEV2ZW50PSExLGguc2Nyb2xsQmFyV2lkdGg9aC5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFdpZHRoLWguX3Njcm9sbEFyZWEub2Zmc2V0V2lkdGh8fDE1LGgucmVnaXN0ZXIoKDAsYy5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKGguX3ZpZXdwb3J0RWxlbWVudCwic2Nyb2xsIixoLl9vblNjcm9sbC5iaW5kKGgpKSksaC5fYWN0aXZlQnVmZmVyPWguX2J1ZmZlclNlcnZpY2UuYnVmZmVyLGgucmVnaXN0ZXIoaC5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9hY3RpdmVCdWZmZXI9ZS5hY3RpdmVCdWZmZXJ9KSkpLGguX3JlbmRlckRpbWVuc2lvbnM9aC5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLGgucmVnaXN0ZXIoaC5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9yZW5kZXJEaW1lbnNpb25zPWV9KSkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGguc3luY1Njcm9sbEFyZWEoKX0pLDApLGh9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5vblRoZW1lQ2hhbmdlPWZ1bmN0aW9uKGUpe3RoaXMuX3ZpZXdwb3J0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9ZS5iYWNrZ3JvdW5kLmNzc30sdC5wcm90b3R5cGUuX3JlZnJlc2g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZihlKXJldHVybiB0aGlzLl9pbm5lclJlZnJlc2goKSx2b2lkKG51bGwhPT10aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUmJmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSkpO251bGw9PT10aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUmJih0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiB0Ll9pbm5lclJlZnJlc2goKX0pKSl9LHQucHJvdG90eXBlLl9pbm5lclJlZnJlc2g9ZnVuY3Rpb24oKXtpZih0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0PjApe3RoaXMuX2N1cnJlbnRSb3dIZWlnaHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5fY3VycmVudFNjYWxlZENlbGxIZWlnaHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ9dGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldEhlaWdodDt2YXIgZT1NYXRoLnJvdW5kKHRoaXMuX2N1cnJlbnRSb3dIZWlnaHQqdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoKSsodGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQtdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCk7dGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0IT09ZSYmKHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodD1lLHRoaXMuX3Njcm9sbEFyZWEuc3R5bGUuaGVpZ2h0PXRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCsicHgiKX12YXIgdD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCp0aGlzLl9jdXJyZW50Um93SGVpZ2h0O3RoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AhPT10JiYodGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50PSEwLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3A9dCksdGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPW51bGx9LHQucHJvdG90eXBlLnN5bmNTY3JvbGxBcmVhPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMD09PWUmJihlPSExKSx0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGghPT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgpcmV0dXJuIHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgsdm9pZCB0aGlzLl9yZWZyZXNoKGUpO3RoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0PT09dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCYmdGhpcy5fbGFzdFNjcm9sbFRvcD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcCp0aGlzLl9jdXJyZW50Um93SGVpZ2h0JiZ0aGlzLl9yZW5kZXJEaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ9PT10aGlzLl9jdXJyZW50U2NhbGVkQ2VsbEhlaWdodHx8dGhpcy5fcmVmcmVzaChlKX0sdC5wcm90b3R5cGUuX29uU2Nyb2xsPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2xhc3RTY3JvbGxUb3A9dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCx0aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0UGFyZW50KXtpZih0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQpcmV0dXJuIHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudD0hMSx2b2lkIHRoaXMuX3Njcm9sbExpbmVzKDApO3ZhciB0PU1hdGgucm91bmQodGhpcy5fbGFzdFNjcm9sbFRvcC90aGlzLl9jdXJyZW50Um93SGVpZ2h0KS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDt0aGlzLl9zY3JvbGxMaW5lcyh0KX19LHQucHJvdG90eXBlLl9idWJibGVTY3JvbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wK3RoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0O3JldHVybiEodDwwJiYwIT09dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcHx8dD4wJiZyPHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCl8fChlLmNhbmNlbGFibGUmJmUucHJldmVudERlZmF1bHQoKSwhMSl9LHQucHJvdG90eXBlLm9uV2hlZWw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0UGl4ZWxzU2Nyb2xsZWQoZSk7cmV0dXJuIDAhPT10JiYodGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCs9dCx0aGlzLl9idWJibGVTY3JvbGwoZSx0KSl9LHQucHJvdG90eXBlLl9nZXRQaXhlbHNTY3JvbGxlZD1mdW5jdGlvbihlKXtpZigwPT09ZS5kZWx0YVl8fGUuc2hpZnRLZXkpcmV0dXJuIDA7dmFyIHQ9dGhpcy5fYXBwbHlTY3JvbGxNb2RpZmllcihlLmRlbHRhWSxlKTtyZXR1cm4gZS5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FP3QqPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ6ZS5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFJiYodCo9dGhpcy5fY3VycmVudFJvd0hlaWdodCp0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHR9LHQucHJvdG90eXBlLmdldExpbmVzU2Nyb2xsZWQ9ZnVuY3Rpb24oZSl7aWYoMD09PWUuZGVsdGFZfHxlLnNoaWZ0S2V5KXJldHVybiAwO3ZhciB0PXRoaXMuX2FwcGx5U2Nyb2xsTW9kaWZpZXIoZS5kZWx0YVksZSk7cmV0dXJuIGUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUElYRUw/KHQvPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQrMCx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwrPXQsdD1NYXRoLmZsb29yKE1hdGguYWJzKHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCkpKih0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGw+MD8xOi0xKSx0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwlPTEpOmUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSYmKHQqPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdH0sdC5wcm90b3R5cGUuX2FwcGx5U2Nyb2xsTW9kaWZpZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZhc3RTY3JvbGxNb2RpZmllcjtyZXR1cm4iYWx0Ij09PXImJnQuYWx0S2V5fHwiY3RybCI9PT1yJiZ0LmN0cmxLZXl8fCJzaGlmdCI9PT1yJiZ0LnNoaWZ0S2V5P2UqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mYXN0U2Nyb2xsU2Vuc2l0aXZpdHkqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxTZW5zaXRpdml0eTplKnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHl9LHQucHJvdG90eXBlLm9uVG91Y2hTdGFydD1mdW5jdGlvbihlKXt0aGlzLl9sYXN0VG91Y2hZPWUudG91Y2hlc1swXS5wYWdlWX0sdC5wcm90b3R5cGUub25Ub3VjaE1vdmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbGFzdFRvdWNoWS1lLnRvdWNoZXNbMF0ucGFnZVk7cmV0dXJuIHRoaXMuX2xhc3RUb3VjaFk9ZS50b3VjaGVzWzBdLnBhZ2VZLDAhPT10JiYodGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCs9dCx0aGlzLl9idWJibGVTY3JvbGwoZSx0KSl9LG8oW3MoNCxoLklCdWZmZXJTZXJ2aWNlKSxzKDUsaC5JT3B0aW9uc1NlcnZpY2UpLHMoNixsLklDaGFyU2l6ZVNlcnZpY2UpLHMoNyxsLklSZW5kZXJTZXJ2aWNlKV0sdCl9KGEuRGlzcG9zYWJsZSk7dC5WaWV3cG9ydD11fSwzMTA3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj12b2lkIDA7dmFyIGM9cigzNjU2KSxsPXIoNDcyNSksaD1yKDg0NCksdT1yKDI1ODUpLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuKXt2YXIgbz1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uX3NjcmVlbkVsZW1lbnQ9dCxvLl9idWZmZXJTZXJ2aWNlPXIsby5fZGVjb3JhdGlvblNlcnZpY2U9aSxvLl9yZW5kZXJTZXJ2aWNlPW4sby5fZGVjb3JhdGlvbkVsZW1lbnRzPW5ldyBNYXAsby5fYWx0QnVmZmVySXNBY3RpdmU9ITEsby5fZGltZW5zaW9uc0NoYW5nZWQ9ITEsby5fY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLG8uX2NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1kZWNvcmF0aW9uLWNvbnRhaW5lciIpLG8uX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQoby5fY29udGFpbmVyKSxvLnJlZ2lzdGVyKG8uX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKChmdW5jdGlvbigpe3JldHVybiBvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcihvLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oKXtvLl9kaW1lbnNpb25zQ2hhbmdlZD0hMCxvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcigoMCxjLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikod2luZG93LCJyZXNpemUiLChmdW5jdGlvbigpe3JldHVybiBvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcihvLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oKXtvLl9hbHRCdWZmZXJJc0FjdGl2ZT1vLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcj09PW8uX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hbHR9KSkpLG8ucmVnaXN0ZXIoby5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVnaXN0ZXJlZCgoZnVuY3Rpb24oKXtyZXR1cm4gby5fcXVldWVSZWZyZXNoKCl9KSkpLG8ucmVnaXN0ZXIoby5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVtb3ZlZCgoZnVuY3Rpb24oZSl7cmV0dXJuIG8uX3JlbW92ZURlY29yYXRpb24oZSl9KSkpLG99cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY29udGFpbmVyLnJlbW92ZSgpLHRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5jbGVhcigpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3F1ZXVlUmVmcmVzaD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dm9pZCAwPT09dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih0aGlzLl9hbmltYXRpb25GcmFtZT10aGlzLl9yZW5kZXJTZXJ2aWNlLmFkZFJlZnJlc2hDYWxsYmFjaygoZnVuY3Rpb24oKXtlLnJlZnJlc2hEZWNvcmF0aW9ucygpLGUuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKSl9LHQucHJvdG90eXBlLnJlZnJlc2hEZWNvcmF0aW9ucz1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1hKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmRlY29yYXRpb25zKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG49aS52YWx1ZTt0aGlzLl9yZW5kZXJEZWNvcmF0aW9uKG4pfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGltZW5zaW9uc0NoYW5nZWQ9ITF9LHQucHJvdG90eXBlLl9yZW5kZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3RoaXMuX3JlZnJlc2hTdHlsZShlKSx0aGlzLl9kaW1lbnNpb25zQ2hhbmdlZCYmdGhpcy5fcmVmcmVzaFhQb3NpdGlvbihlKX0sdC5wcm90b3R5cGUuX2NyZWF0ZUVsZW1lbnQ9ZnVuY3Rpb24oZSl7dmFyIHQscj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWRlY29yYXRpb24iKSxyLnN0eWxlLndpZHRoPU1hdGgucm91bmQoKGUub3B0aW9ucy53aWR0aHx8MSkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCkrInB4IixyLnN0eWxlLmhlaWdodD0oZS5vcHRpb25zLmhlaWdodHx8MSkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixyLnN0eWxlLnRvcD0oZS5tYXJrZXIubGluZS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLnlkaXNwKSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLHIuc3R5bGUubGluZUhlaWdodD10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiO3ZhciBpPW51bGwhPT0odD1lLm9wdGlvbnMueCkmJnZvaWQgMCE9PXQ/dDowO3JldHVybiBpJiZpPnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmKHIuc3R5bGUuZGlzcGxheT0ibm9uZSIpLHRoaXMuX3JlZnJlc2hYUG9zaXRpb24oZSxyKSxyfSx0LnByb3RvdHlwZS5fcmVmcmVzaFN0eWxlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1lLm1hcmtlci5saW5lLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUueWRpc3A7aWYocjwwfHxyPj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpZS5lbGVtZW50JiYoZS5lbGVtZW50LnN0eWxlLmRpc3BsYXk9Im5vbmUiLGUub25SZW5kZXJFbWl0dGVyLmZpcmUoZS5lbGVtZW50KSk7ZWxzZXt2YXIgaT10aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZ2V0KGUpO2l8fChlLm9uRGlzcG9zZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVtb3ZlRGVjb3JhdGlvbihlKX0pKSxpPXRoaXMuX2NyZWF0ZUVsZW1lbnQoZSksZS5lbGVtZW50PWksdGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLnNldChlLGkpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZChpKSksaS5zdHlsZS50b3A9cip0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLGkuc3R5bGUuZGlzcGxheT10aGlzLl9hbHRCdWZmZXJJc0FjdGl2ZT8ibm9uZSI6ImJsb2NrIixlLm9uUmVuZGVyRW1pdHRlci5maXJlKGkpfX0sdC5wcm90b3R5cGUuX3JlZnJlc2hYUG9zaXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZih2b2lkIDA9PT10JiYodD1lLmVsZW1lbnQpLHQpe3ZhciBpPW51bGwhPT0ocj1lLm9wdGlvbnMueCkmJnZvaWQgMCE9PXI/cjowOyJyaWdodCI9PT0oZS5vcHRpb25zLmFuY2hvcnx8ImxlZnQiKT90LnN0eWxlLnJpZ2h0PWk/aSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKyJweCI6IiI6dC5zdHlsZS5sZWZ0PWk/aSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKyJweCI6IiJ9fSx0LnByb3RvdHlwZS5fcmVtb3ZlRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLmdldChlKSl8fHZvaWQgMD09PXR8fHQucmVtb3ZlKCksdGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLmRlbGV0ZShlKX0sbyhbcygxLHUuSUJ1ZmZlclNlcnZpY2UpLHMoMix1LklEZWNvcmF0aW9uU2VydmljZSkscygzLGwuSVJlbmRlclNlcnZpY2UpXSx0KX0oaC5EaXNwb3NhYmxlKTt0LkJ1ZmZlckRlY29yYXRpb25SZW5kZXJlcj1mfSw1ODcxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbG9yWm9uZVN0b3JlPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl96b25lcz1bXSx0aGlzLl96b25lUG9vbD1bXSx0aGlzLl96b25lUG9vbEluZGV4PTAsdGhpcy5fbGluZVBhZGRpbmc9e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH19cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiem9uZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fem9uZVBvb2wubGVuZ3RoPU1hdGgubWluKHRoaXMuX3pvbmVQb29sLmxlbmd0aCx0aGlzLl96b25lcy5sZW5ndGgpLHRoaXMuX3pvbmVzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fem9uZXMubGVuZ3RoPTAsdGhpcy5fem9uZVBvb2xJbmRleD0wfSxlLnByb3RvdHlwZS5hZGREZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LGk7aWYoZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zKXt0cnl7Zm9yKHZhciBuPXIodGhpcy5fem9uZXMpLG89bi5uZXh0KCk7IW8uZG9uZTtvPW4ubmV4dCgpKXt2YXIgcz1vLnZhbHVlO2lmKHMuY29sb3I9PT1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3ImJnMucG9zaXRpb249PT1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24pe2lmKHRoaXMuX2xpbmVJbnRlcnNlY3RzWm9uZShzLGUubWFya2VyLmxpbmUpKXJldHVybjtpZih0aGlzLl9saW5lQWRqYWNlbnRUb1pvbmUocyxlLm1hcmtlci5saW5lLGUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbikpcmV0dXJuIHZvaWQgdGhpcy5fYWRkTGluZVRvWm9uZShzLGUubWFya2VyLmxpbmUpfX19Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWlmKHRoaXMuX3pvbmVQb29sSW5kZXg8dGhpcy5fem9uZVBvb2wubGVuZ3RoKXJldHVybiB0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5jb2xvcj1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3IsdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0ucG9zaXRpb249ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLnN0YXJ0QnVmZmVyTGluZT1lLm1hcmtlci5saW5lLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLmVuZEJ1ZmZlckxpbmU9ZS5tYXJrZXIubGluZSx2b2lkIHRoaXMuX3pvbmVzLnB1c2godGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleCsrXSk7dGhpcy5fem9uZXMucHVzaCh7Y29sb3I6ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLmNvbG9yLHBvc2l0aW9uOmUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbixzdGFydEJ1ZmZlckxpbmU6ZS5tYXJrZXIubGluZSxlbmRCdWZmZXJMaW5lOmUubWFya2VyLmxpbmV9KSx0aGlzLl96b25lUG9vbC5wdXNoKHRoaXMuX3pvbmVzW3RoaXMuX3pvbmVzLmxlbmd0aC0xXSksdGhpcy5fem9uZVBvb2xJbmRleCsrfX0sZS5wcm90b3R5cGUuc2V0UGFkZGluZz1mdW5jdGlvbihlKXt0aGlzLl9saW5lUGFkZGluZz1lfSxlLnByb3RvdHlwZS5fbGluZUludGVyc2VjdHNab25lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ+PWUuc3RhcnRCdWZmZXJMaW5lJiZ0PD1lLmVuZEJ1ZmZlckxpbmV9LGUucHJvdG90eXBlLl9saW5lQWRqYWNlbnRUb1pvbmU9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0Pj1lLnN0YXJ0QnVmZmVyTGluZS10aGlzLl9saW5lUGFkZGluZ1tyfHwiZnVsbCJdJiZ0PD1lLmVuZEJ1ZmZlckxpbmUrdGhpcy5fbGluZVBhZGRpbmdbcnx8ImZ1bGwiXX0sZS5wcm90b3R5cGUuX2FkZExpbmVUb1pvbmU9ZnVuY3Rpb24oZSx0KXtlLnN0YXJ0QnVmZmVyTGluZT1NYXRoLm1pbihlLnN0YXJ0QnVmZmVyTGluZSx0KSxlLmVuZEJ1ZmZlckxpbmU9TWF0aC5tYXgoZS5lbmRCdWZmZXJMaW5lLHQpfSxlfSgpO3QuQ29sb3Jab25lU3RvcmU9aX0sNTc0NDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5PdmVydmlld1J1bGVyUmVuZGVyZXI9dm9pZCAwO3ZhciBjPXIoNTg3MSksbD1yKDM2NTYpLGg9cig0NzI1KSx1PXIoODQ0KSxmPXIoMjU4NSksXz17ZnVsbDowLGxlZnQ6MCxjZW50ZXI6MCxyaWdodDowfSxkPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9LHA9e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH0sdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzKXt2YXIgYSxsPWUuY2FsbCh0aGlzKXx8dGhpcztsLl92aWV3cG9ydEVsZW1lbnQ9dCxsLl9zY3JlZW5FbGVtZW50PXIsbC5fYnVmZmVyU2VydmljZT1pLGwuX2RlY29yYXRpb25TZXJ2aWNlPW4sbC5fcmVuZGVyU2VydmljZT1vLGwuX29wdGlvbnNTZXJ2aWNlPXMsbC5fY29sb3Jab25lU3RvcmU9bmV3IGMuQ29sb3Jab25lU3RvcmUsbC5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz0hMCxsLl9zaG91bGRVcGRhdGVBbmNob3I9ITAsbC5fbGFzdEtub3duQnVmZmVyTGVuZ3RoPTAsbC5fY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLGwuX2NhbnZhcy5jbGFzc0xpc3QuYWRkKCJ4dGVybS1kZWNvcmF0aW9uLW92ZXJ2aWV3LXJ1bGVyIiksbC5fcmVmcmVzaENhbnZhc0RpbWVuc2lvbnMoKSxudWxsPT09KGE9bC5fdmlld3BvcnRFbGVtZW50LnBhcmVudEVsZW1lbnQpfHx2b2lkIDA9PT1hfHxhLmluc2VydEJlZm9yZShsLl9jYW52YXMsbC5fdmlld3BvcnRFbGVtZW50KTt2YXIgaD1sLl9jYW52YXMuZ2V0Q29udGV4dCgiMmQiKTtpZighaCl0aHJvdyBuZXcgRXJyb3IoIkN0eCBjYW5ub3QgYmUgbnVsbCIpO3JldHVybiBsLl9jdHg9aCxsLl9yZWdpc3RlckRlY29yYXRpb25MaXN0ZW5lcnMoKSxsLl9yZWdpc3RlckJ1ZmZlckNoYW5nZUxpc3RlbmVycygpLGwuX3JlZ2lzdGVyRGltZW5zaW9uQ2hhbmdlTGlzdGVuZXJzKCksbH1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiX3dpZHRoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMub3ZlcnZpZXdSdWxlcldpZHRofHwwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9yZWdpc3RlckRlY29yYXRpb25MaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIodGhpcy5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVnaXN0ZXJlZCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fcXVldWVSZWZyZXNoKHZvaWQgMCwhMCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fZGVjb3JhdGlvblNlcnZpY2Uub25EZWNvcmF0aW9uUmVtb3ZlZCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fcXVldWVSZWZyZXNoKHZvaWQgMCwhMCl9KSkpfSx0LnByb3RvdHlwZS5fcmVnaXN0ZXJCdWZmZXJDaGFuZ2VMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX3F1ZXVlUmVmcmVzaCgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbigpe2UuX2NhbnZhcy5zdHlsZS5kaXNwbGF5PWUuX2J1ZmZlclNlcnZpY2UuYnVmZmVyPT09ZS5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFsdD8ibm9uZSI6ImJsb2NrIn0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9idWZmZXJTZXJ2aWNlLm9uU2Nyb2xsKChmdW5jdGlvbigpe2UuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aCE9PWUuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5ub3JtYWwubGluZXMubGVuZ3RoJiYoZS5fcmVmcmVzaERyYXdIZWlnaHRDb25zdGFudHMoKSxlLl9yZWZyZXNoQ29sb3Jab25lUGFkZGluZygpKX0pKSl9LHQucHJvdG90eXBlLl9yZWdpc3RlckRpbWVuc2lvbkNoYW5nZUxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyKChmdW5jdGlvbigpe2UuX2NvbnRhaW5lckhlaWdodCYmZS5fY29udGFpbmVySGVpZ2h0PT09ZS5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHR8fChlLl9xdWV1ZVJlZnJlc2goITApLGUuX2NvbnRhaW5lckhlaWdodD1lLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKHQpeyJvdmVydmlld1J1bGVyV2lkdGgiPT09dCYmZS5fcXVldWVSZWZyZXNoKCEwKX0pKSksdGhpcy5yZWdpc3RlcigoMCxsLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikod2luZG93LCJyZXNpemUiLChmdW5jdGlvbigpe2UuX3F1ZXVlUmVmcmVzaCghMCl9KSkpLHRoaXMuX3F1ZXVlUmVmcmVzaCghMCl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdDtudWxsPT09KHQ9dGhpcy5fY2FudmFzKXx8dm9pZCAwPT09dHx8dC5yZW1vdmUoKSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl9yZWZyZXNoRHJhd0NvbnN0YW50cz1mdW5jdGlvbigpe3ZhciBlPU1hdGguZmxvb3IodGhpcy5fY2FudmFzLndpZHRoLzMpLHQ9TWF0aC5jZWlsKHRoaXMuX2NhbnZhcy53aWR0aC8zKTtkLmZ1bGw9dGhpcy5fY2FudmFzLndpZHRoLGQubGVmdD1lLGQuY2VudGVyPXQsZC5yaWdodD1lLHRoaXMuX3JlZnJlc2hEcmF3SGVpZ2h0Q29uc3RhbnRzKCkscC5mdWxsPTAscC5sZWZ0PTAscC5jZW50ZXI9ZC5sZWZ0LHAucmlnaHQ9ZC5sZWZ0K2QuY2VudGVyfSx0LnByb3RvdHlwZS5fcmVmcmVzaERyYXdIZWlnaHRDb25zdGFudHM9ZnVuY3Rpb24oKXtfLmZ1bGw9TWF0aC5yb3VuZCgyKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTt2YXIgZT10aGlzLl9jYW52YXMuaGVpZ2h0L3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aCx0PU1hdGgucm91bmQoTWF0aC5tYXgoTWF0aC5taW4oZSwxMiksNikqd2luZG93LmRldmljZVBpeGVsUmF0aW8pO18ubGVmdD10LF8uY2VudGVyPXQsXy5yaWdodD10fSx0LnByb3RvdHlwZS5fcmVmcmVzaENvbG9yWm9uZVBhZGRpbmc9ZnVuY3Rpb24oKXt0aGlzLl9jb2xvclpvbmVTdG9yZS5zZXRQYWRkaW5nKHtmdWxsOk1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqXy5mdWxsKSxsZWZ0Ok1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqXy5sZWZ0KSxjZW50ZXI6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpfLmNlbnRlcikscmlnaHQ6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpfLnJpZ2h0KX0pLHRoaXMuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMubm9ybWFsLmxpbmVzLmxlbmd0aH0sdC5wcm90b3R5cGUuX3JlZnJlc2hDYW52YXNEaW1lbnNpb25zPWZ1bmN0aW9uKCl7dGhpcy5fY2FudmFzLnN0eWxlLndpZHRoPXRoaXMuX3dpZHRoKyJweCIsdGhpcy5fY2FudmFzLndpZHRoPU1hdGgucm91bmQodGhpcy5fd2lkdGgqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuX2NhbnZhcy5zdHlsZS5oZWlnaHQ9dGhpcy5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHQrInB4Iix0aGlzLl9jYW52YXMuaGVpZ2h0PU1hdGgucm91bmQodGhpcy5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHQqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuX3JlZnJlc2hEcmF3Q29uc3RhbnRzKCksdGhpcy5fcmVmcmVzaENvbG9yWm9uZVBhZGRpbmcoKX0sdC5wcm90b3R5cGUuX3JlZnJlc2hEZWNvcmF0aW9ucz1mdW5jdGlvbigpe3ZhciBlLHQscixpLG4sbzt0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zJiZ0aGlzLl9yZWZyZXNoQ2FudmFzRGltZW5zaW9ucygpLHRoaXMuX2N0eC5jbGVhclJlY3QoMCwwLHRoaXMuX2NhbnZhcy53aWR0aCx0aGlzLl9jYW52YXMuaGVpZ2h0KSx0aGlzLl9jb2xvclpvbmVTdG9yZS5jbGVhcigpO3RyeXtmb3IodmFyIHM9YSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5kZWNvcmF0aW9ucyksYz1zLm5leHQoKTshYy5kb25lO2M9cy5uZXh0KCkpe3ZhciBsPWMudmFsdWU7dGhpcy5fY29sb3Jab25lU3RvcmUuYWRkRGVjb3JhdGlvbihsKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7YyYmIWMuZG9uZSYmKHQ9cy5yZXR1cm4pJiZ0LmNhbGwocyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2N0eC5saW5lV2lkdGg9MTt2YXIgaD10aGlzLl9jb2xvclpvbmVTdG9yZS56b25lczt0cnl7Zm9yKHZhciB1PWEoaCksZj11Lm5leHQoKTshZi5kb25lO2Y9dS5uZXh0KCkpImZ1bGwiIT09KHA9Zi52YWx1ZSkucG9zaXRpb24mJnRoaXMuX3JlbmRlckNvbG9yWm9uZShwKX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtmJiYhZi5kb25lJiYoaT11LnJldHVybikmJmkuY2FsbCh1KX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19dHJ5e2Zvcih2YXIgXz1hKGgpLGQ9Xy5uZXh0KCk7IWQuZG9uZTtkPV8ubmV4dCgpKXt2YXIgcDsiZnVsbCI9PT0ocD1kLnZhbHVlKS5wb3NpdGlvbiYmdGhpcy5fcmVuZGVyQ29sb3Jab25lKHApfX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYobz1fLnJldHVybikmJm8uY2FsbChfKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz0hMSx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3I9ITF9LHQucHJvdG90eXBlLl9yZW5kZXJDb2xvclpvbmU9ZnVuY3Rpb24oZSl7dGhpcy5fY3R4LmZpbGxTdHlsZT1lLmNvbG9yLHRoaXMuX2N0eC5maWxsUmVjdChwW2UucG9zaXRpb258fCJmdWxsIl0sTWF0aC5yb3VuZCgodGhpcy5fY2FudmFzLmhlaWdodC0xKSooZS5zdGFydEJ1ZmZlckxpbmUvdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgpLV9bZS5wb3NpdGlvbnx8ImZ1bGwiXS8yKSxkW2UucG9zaXRpb258fCJmdWxsIl0sTWF0aC5yb3VuZCgodGhpcy5fY2FudmFzLmhlaWdodC0xKSooKGUuZW5kQnVmZmVyTGluZS1lLnN0YXJ0QnVmZmVyTGluZSkvdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgpK19bZS5wb3NpdGlvbnx8ImZ1bGwiXSkpfSx0LnByb3RvdHlwZS5fcXVldWVSZWZyZXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zPWV8fHRoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnMsdGhpcy5fc2hvdWxkVXBkYXRlQW5jaG9yPXR8fHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvcix2b2lkIDA9PT10aGlzLl9hbmltYXRpb25GcmFtZSYmKHRoaXMuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7ci5fcmVmcmVzaERlY29yYXRpb25zKCksci5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwfSkpKX0sbyhbcygyLGYuSUJ1ZmZlclNlcnZpY2UpLHMoMyxmLklEZWNvcmF0aW9uU2VydmljZSkscyg0LGguSVJlbmRlclNlcnZpY2UpLHMoNSxmLklPcHRpb25zU2VydmljZSldLHQpfSh1LkRpc3Bvc2FibGUpO3QuT3ZlcnZpZXdSdWxlclJlbmRlcmVyPXZ9LDI5NTA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db21wb3NpdGlvbkhlbHBlcj12b2lkIDA7dmFyIG89cig0NzI1KSxzPXIoMjU4NSksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8pe3RoaXMuX3RleHRhcmVhPWUsdGhpcy5fY29tcG9zaXRpb25WaWV3PXQsdGhpcy5fYnVmZmVyU2VydmljZT1yLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWksdGhpcy5fY29yZVNlcnZpY2U9bix0aGlzLl9yZW5kZXJTZXJ2aWNlPW8sdGhpcy5faXNDb21wb3Npbmc9ITEsdGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb249ITEsdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbj17c3RhcnQ6MCxlbmQ6MH0sdGhpcy5fZGF0YUFscmVhZHlTZW50PSIifXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzQ29tcG9zaW5nIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzQ29tcG9zaW5nfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNvbXBvc2l0aW9uc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLl9pc0NvbXBvc2luZz0hMCx0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0PXRoaXMuX3RleHRhcmVhLnZhbHVlLmxlbmd0aCx0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQ9IiIsdGhpcy5fZGF0YUFscmVhZHlTZW50PSIiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QuYWRkKCJhY3RpdmUiKX0sZS5wcm90b3R5cGUuY29tcG9zaXRpb251cGRhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9jb21wb3NpdGlvblZpZXcudGV4dENvbnRlbnQ9ZS5kYXRhLHRoaXMudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cygpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQ9dC5fdGV4dGFyZWEudmFsdWUubGVuZ3RofSksMCl9LGUucHJvdG90eXBlLmNvbXBvc2l0aW9uZW5kPWZ1bmN0aW9uKCl7dGhpcy5fZmluYWxpemVDb21wb3NpdGlvbighMCl9LGUucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5faXNDb21wb3Npbmd8fHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKXtpZigyMjk9PT1lLmtleUNvZGUpcmV0dXJuITE7aWYoMTY9PT1lLmtleUNvZGV8fDE3PT09ZS5rZXlDb2RlfHwxOD09PWUua2V5Q29kZSlyZXR1cm4hMTt0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKCExKX1yZXR1cm4gMjI5IT09ZS5rZXlDb2RlfHwodGhpcy5faGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzKCksITEpfSxlLnByb3RvdHlwZS5fZmluYWxpemVDb21wb3NpdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX2NvbXBvc2l0aW9uVmlldy5jbGFzc0xpc3QucmVtb3ZlKCJhY3RpdmUiKSx0aGlzLl9pc0NvbXBvc2luZz0hMSxlKXt2YXIgcj17c3RhcnQ6dGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCxlbmQ6dGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmR9O3RoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uPSEwLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5faXNTZW5kaW5nQ29tcG9zaXRpb24pe3QuX2lzU2VuZGluZ0NvbXBvc2l0aW9uPSExO3ZhciBlO3Iuc3RhcnQrPXQuX2RhdGFBbHJlYWR5U2VudC5sZW5ndGgsKGU9dC5faXNDb21wb3Npbmc/dC5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKHIuc3RhcnQsci5lbmQpOnQuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhyLnN0YXJ0KSkubGVuZ3RoPjAmJnQuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoZSwhMCl9fSksMCl9ZWxzZXt0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMTt2YXIgaT10aGlzLl90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcodGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydCx0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZCk7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpLCEwKX19LGUucHJvdG90eXBlLl9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fdGV4dGFyZWEudmFsdWU7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZighZS5faXNDb21wb3Npbmcpe3ZhciByPWUuX3RleHRhcmVhLnZhbHVlLnJlcGxhY2UodCwiIik7ci5sZW5ndGg+MCYmKGUuX2RhdGFBbHJlYWR5U2VudD1yLGUuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQociwhMCkpfX0pLDApfSxlLnByb3RvdHlwZS51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5faXNDb21wb3Npbmcpe2lmKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmlzQ3Vyc29ySW5WaWV3cG9ydCl7dmFyIHI9TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSksaT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxuPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbz1yKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGg7dGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmxlZnQ9bysicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS50b3A9bisicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5oZWlnaHQ9aSsicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5saW5lSGVpZ2h0PWkrInB4Iix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udEZhbWlseT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHksdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRTaXplPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUrInB4Ijt2YXIgcz10aGlzLl9jb21wb3NpdGlvblZpZXcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy5fdGV4dGFyZWEuc3R5bGUubGVmdD1vKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUudG9wPW4rInB4Iix0aGlzLl90ZXh0YXJlYS5zdHlsZS53aWR0aD1NYXRoLm1heChzLndpZHRoLDEpKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUuaGVpZ2h0PU1hdGgubWF4KHMuaGVpZ2h0LDEpKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUubGluZUhlaWdodD1zLmhlaWdodCsicHgifWV8fHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cyghMCl9KSwwKX19LGkoW24oMixzLklCdWZmZXJTZXJ2aWNlKSxuKDMscy5JT3B0aW9uc1NlcnZpY2UpLG4oNCxzLklDb3JlU2VydmljZSksbig1LG8uSVJlbmRlclNlcnZpY2UpXSxlKX0oKTt0LkNvbXBvc2l0aW9uSGVscGVyPWF9LDk4MDY6KGUsdCk9PntmdW5jdGlvbiByKGUsdCxyKXt2YXIgaT1yLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49ZS5nZXRDb21wdXRlZFN0eWxlKHIpLG89cGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLWxlZnQiKSkscz1wYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctdG9wIikpO3JldHVyblt0LmNsaWVudFgtaS5sZWZ0LW8sdC5jbGllbnRZLWkudG9wLXNdfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmdldFJhd0J5dGVDb29yZHM9dC5nZXRDb29yZHM9dC5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudD12b2lkIDAsdC5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudD1yLHQuZ2V0Q29vcmRzPWZ1bmN0aW9uKGUsdCxpLG4sbyxzLGEsYyxsKXtpZihzKXt2YXIgaD1yKGUsdCxpKTtpZihoKXJldHVybiBoWzBdPU1hdGguY2VpbCgoaFswXSsobD9hLzI6MCkpL2EpLGhbMV09TWF0aC5jZWlsKGhbMV0vYyksaFswXT1NYXRoLm1pbihNYXRoLm1heChoWzBdLDEpLG4rKGw/MTowKSksaFsxXT1NYXRoLm1pbihNYXRoLm1heChoWzFdLDEpLG8pLGh9fSx0LmdldFJhd0J5dGVDb29yZHM9ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm57eDplWzBdKzMyLHk6ZVsxXSszMn19fSw5NTA0OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5tb3ZlVG9DZWxsU2VxdWVuY2U9dm9pZCAwO3ZhciBpPXIoMjU4NCk7ZnVuY3Rpb24gbihlLHQscixpKXt2YXIgbj1lLW8ocixlKSxhPXQtbyhyLHQpLGg9TWF0aC5hYnMobi1hKS1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPTAsbj1lLW8ocixlKSxhPXQtbyhyLHQpLGM9MDtjPE1hdGguYWJzKG4tYSk7YysrKXt2YXIgbD0iQSI9PT1zKGUsdCk/LTE6MSxoPXIuYnVmZmVyLmxpbmVzLmdldChuK2wqYyk7KG51bGw9PWg/dm9pZCAwOmguaXNXcmFwcGVkKSYmaSsrfXJldHVybiBpfShlLHQscik7cmV0dXJuIGwoaCxjKHMoZSx0KSxpKSl9ZnVuY3Rpb24gbyhlLHQpe2Zvcih2YXIgcj0wLGk9ZS5idWZmZXIubGluZXMuZ2V0KHQpLG49bnVsbD09aT92b2lkIDA6aS5pc1dyYXBwZWQ7biYmdD49MCYmdDxlLnJvd3M7KXIrKyxuPW51bGw9PShpPWUuYnVmZmVyLmxpbmVzLmdldCgtLXQpKT92b2lkIDA6aS5pc1dyYXBwZWQ7cmV0dXJuIHJ9ZnVuY3Rpb24gcyhlLHQpe3JldHVybiBlPnQ/IkEiOiJCIn1mdW5jdGlvbiBhKGUsdCxyLGksbixvKXtmb3IodmFyIHM9ZSxhPXQsYz0iIjtzIT09cnx8YSE9PWk7KXMrPW4/MTotMSxuJiZzPm8uY29scy0xPyhjKz1vLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYSwhMSxlLHMpLHM9MCxlPTAsYSsrKTohbiYmczwwJiYoYys9by5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGEsITEsMCxlKzEpLGU9cz1vLmNvbHMtMSxhLS0pO3JldHVybiBjK28uYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhhLCExLGUscyl9ZnVuY3Rpb24gYyhlLHQpe3ZhciByPXQ/Ik8iOiJbIjtyZXR1cm4gaS5DMC5FU0MrcitlfWZ1bmN0aW9uIGwoZSx0KXtlPU1hdGguZmxvb3IoZSk7Zm9yKHZhciByPSIiLGk9MDtpPGU7aSsrKXIrPXQ7cmV0dXJuIHJ9dC5tb3ZlVG9DZWxsU2VxdWVuY2U9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIHMsaD1yLmJ1ZmZlci54LHU9ci5idWZmZXIueTtpZighci5idWZmZXIuaGFzU2Nyb2xsYmFjaylyZXR1cm4gZnVuY3Rpb24oZSx0LHIsaSxzLGgpe3JldHVybiAwPT09bih0LGkscyxoKS5sZW5ndGg/IiI6bChhKGUsdCxlLHQtbyhzLHQpLCExLHMpLmxlbmd0aCxjKCJEIixoKSl9KGgsdSwwLHQscixpKStuKHUsdCxyLGkpK2Z1bmN0aW9uKGUsdCxyLGkscyxoKXt2YXIgdTt1PW4odCxpLHMsaCkubGVuZ3RoPjA/aS1vKHMsaSk6dDt2YXIgZj1pLF89ZnVuY3Rpb24oZSx0LHIsaSxzLGEpe3ZhciBjO3JldHVybiBjPW4ocixpLHMsYSkubGVuZ3RoPjA/aS1vKHMsaSk6dCxlPHImJmM8PWl8fGU+PXImJmM8aT8iQyI6IkQifShlLHQscixpLHMsaCk7cmV0dXJuIGwoYShlLHUscixmLCJDIj09PV8scykubGVuZ3RoLGMoXyxoKSl9KGgsdSxlLHQscixpKTtpZih1PT09dClyZXR1cm4gcz1oPmU/IkQiOiJDIixsKE1hdGguYWJzKGgtZSksYyhzLGkpKTtzPXU+dD8iRCI6IkMiO3ZhciBmPU1hdGguYWJzKHUtdCk7cmV0dXJuIGwoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5jb2xzLWV9KHU+dD9lOmgscikrKGYtMSkqci5jb2xzKzErKCh1PnQ/aDplKS0xKSxjKHMsaSkpfX0sNDM4OTpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4gaT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9LGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxuPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5UZXJtaW5hbD12b2lkIDA7dmFyIG89cigzMjM2KSxzPXIoOTA0MiksYT1yKDc5NzUpLGM9cig3MDkwKSxsPXIoNTc0MSksaD1yKDgyODUpLHU9WyJjb2xzIiwicm93cyJdLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7dGhpcy5fY29yZT1uZXcgby5UZXJtaW5hbChlKSx0aGlzLl9hZGRvbk1hbmFnZXI9bmV3IGwuQWRkb25NYW5hZ2VyLHRoaXMuX3B1YmxpY09wdGlvbnM9aSh7fSx0aGlzLl9jb3JlLm9wdGlvbnMpO3ZhciByPWZ1bmN0aW9uKGUpe3JldHVybiB0Ll9jb3JlLm9wdGlvbnNbZV19LG49ZnVuY3Rpb24oZSxyKXt0Ll9jaGVja1JlYWRvbmx5T3B0aW9ucyhlKSx0Ll9jb3JlLm9wdGlvbnNbZV09cn07Zm9yKHZhciBzIGluIHRoaXMuX2NvcmUub3B0aW9ucyl7dmFyIGE9e2dldDpyLmJpbmQodGhpcyxzKSxzZXQ6bi5iaW5kKHRoaXMscyl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLl9wdWJsaWNPcHRpb25zLHMsYSl9fXJldHVybiBlLnByb3RvdHlwZS5fY2hlY2tSZWFkb25seU9wdGlvbnM9ZnVuY3Rpb24oZSl7aWYodS5pbmNsdWRlcyhlKSl0aHJvdyBuZXcgRXJyb3IoJ09wdGlvbiAiJytlKyciIGNhbiBvbmx5IGJlIHNldCBpbiB0aGUgY29uc3RydWN0b3InKX0sZS5wcm90b3R5cGUuX2NoZWNrUHJvcG9zZWRBcGk9ZnVuY3Rpb24oKXtpZighdGhpcy5fY29yZS5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmFsbG93UHJvcG9zZWRBcGkpdGhyb3cgbmV3IEVycm9yKCJZb3UgbXVzdCBzZXQgdGhlIGFsbG93UHJvcG9zZWRBcGkgb3B0aW9uIHRvIHRydWUgdG8gdXNlIHByb3Bvc2VkIEFQSSIpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQmVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uQmVsbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQmluYXJ5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25CaW5hcnl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkN1cnNvck1vdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkN1cnNvck1vdmV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkRhdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkRhdGF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbktleSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uS2V5fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25MaW5lRmVlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uTGluZUZlZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblJlbmRlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uUmVuZGVyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25SZXNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vblJlc2l6ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uU2Nyb2xsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25TY3JvbGx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblNlbGVjdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uU2VsZWN0aW9uQ2hhbmdlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25UaXRsZUNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uVGl0bGVDaGFuZ2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbldyaXRlUGFyc2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25Xcml0ZVBhcnNlZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImVsZW1lbnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5lbGVtZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwicGFyc2VyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9wYXJzZXJ8fCh0aGlzLl9wYXJzZXI9bmV3IGEuUGFyc2VyQXBpKHRoaXMuX2NvcmUpKSx0aGlzLl9wYXJzZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ1bmljb2RlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSxuZXcgYy5Vbmljb2RlQXBpKHRoaXMuX2NvcmUpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidGV4dGFyZWEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS50ZXh0YXJlYX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInJvd3MiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5yb3dzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY29scyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLmNvbHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJidWZmZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2J1ZmZlcnx8KHRoaXMuX2J1ZmZlcj1uZXcgaC5CdWZmZXJOYW1lc3BhY2VBcGkodGhpcy5fY29yZSkpLHRoaXMuX2J1ZmZlcn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1hcmtlcnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUubWFya2Vyc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1vZGVzIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fY29yZS5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMsdD0ibm9uZSI7c3dpdGNoKHRoaXMuX2NvcmUuY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCl7Y2FzZSJYMTAiOnQ9IngxMCI7YnJlYWs7Y2FzZSJWVDIwMCI6dD0idnQyMDAiO2JyZWFrO2Nhc2UiRFJBRyI6dD0iZHJhZyI7YnJlYWs7Y2FzZSJBTlkiOnQ9ImFueSJ9cmV0dXJue2FwcGxpY2F0aW9uQ3Vyc29yS2V5c01vZGU6ZS5hcHBsaWNhdGlvbkN1cnNvcktleXMsYXBwbGljYXRpb25LZXlwYWRNb2RlOmUuYXBwbGljYXRpb25LZXlwYWQsYnJhY2tldGVkUGFzdGVNb2RlOmUuYnJhY2tldGVkUGFzdGVNb2RlLGluc2VydE1vZGU6dGhpcy5fY29yZS5jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlLG1vdXNlVHJhY2tpbmdNb2RlOnQsb3JpZ2luTW9kZTplLm9yaWdpbixyZXZlcnNlV3JhcGFyb3VuZE1vZGU6ZS5yZXZlcnNlV3JhcGFyb3VuZCxzZW5kRm9jdXNNb2RlOmUuc2VuZEZvY3VzLHdyYXBhcm91bmRNb2RlOmUud3JhcGFyb3VuZH19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvcHRpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3B1YmxpY09wdGlvbnN9LHNldDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLl9wdWJsaWNPcHRpb25zW3RdPWVbdF19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuYmx1cj1mdW5jdGlvbigpe3RoaXMuX2NvcmUuYmx1cigpfSxlLnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3RoaXMuX2NvcmUuZm9jdXMoKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSx0KSx0aGlzLl9jb3JlLnJlc2l6ZShlLHQpfSxlLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUub3BlbihlKX0sZS5wcm90b3R5cGUuYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUuYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpfSxlLnByb3RvdHlwZS5yZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUucmVnaXN0ZXJMaW5rTWF0Y2hlcihlLHQscil9LGUucHJvdG90eXBlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlKXt0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5kZXJlZ2lzdGVyTGlua01hdGNoZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5yZWdpc3RlckxpbmtQcm92aWRlcihlKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGUpfSxlLnByb3RvdHlwZS5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyTWFya2VyPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5hZGRNYXJrZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxyLGk7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl92ZXJpZnlQb3NpdGl2ZUludGVnZXJzKG51bGwhPT0odD1lLngpJiZ2b2lkIDAhPT10P3Q6MCxudWxsIT09KHI9ZS53aWR0aCkmJnZvaWQgMCE9PXI/cjowLG51bGwhPT0oaT1lLmhlaWdodCkmJnZvaWQgMCE9PWk/aTowKSx0aGlzLl9jb3JlLnJlZ2lzdGVyRGVjb3JhdGlvbihlKX0sZS5wcm90b3R5cGUuYWRkTWFya2VyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnJlZ2lzdGVyTWFya2VyKGUpfSxlLnByb3RvdHlwZS5oYXNTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5oYXNTZWxlY3Rpb24oKX0sZS5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQsciksdGhpcy5fY29yZS5zZWxlY3QoZSx0LHIpfSxlLnByb3RvdHlwZS5nZXRTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb24oKX0sZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5nZXRTZWxlY3Rpb25Qb3NpdGlvbigpfSxlLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuX2NvcmUuY2xlYXJTZWxlY3Rpb24oKX0sZS5wcm90b3R5cGUuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5zZWxlY3RBbGwoKX0sZS5wcm90b3R5cGUuc2VsZWN0TGluZXM9ZnVuY3Rpb24oZSx0KXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQpLHRoaXMuX2NvcmUuc2VsZWN0TGluZXMoZSx0KX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2FkZG9uTWFuYWdlci5kaXNwb3NlKCksdGhpcy5fY29yZS5kaXNwb3NlKCl9LGUucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsTGluZXMoZSl9LGUucHJvdG90eXBlLnNjcm9sbFBhZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsUGFnZXMoZSl9LGUucHJvdG90eXBlLnNjcm9sbFRvVG9wPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5zY3JvbGxUb1RvcCgpfSxlLnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbT1mdW5jdGlvbigpe3RoaXMuX2NvcmUuc2Nyb2xsVG9Cb3R0b20oKX0sZS5wcm90b3R5cGUuc2Nyb2xsVG9MaW5lPWZ1bmN0aW9uKGUpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuc2Nyb2xsVG9MaW5lKGUpfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2NvcmUuY2xlYXIoKX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb3JlLndyaXRlKGUsdCl9LGUucHJvdG90eXBlLndyaXRlVXRmOD1mdW5jdGlvbihlLHQpe3RoaXMuX2NvcmUud3JpdGUoZSx0KX0sZS5wcm90b3R5cGUud3JpdGVsbj1mdW5jdGlvbihlLHQpe3RoaXMuX2NvcmUud3JpdGUoZSksdGhpcy5fY29yZS53cml0ZSgiXHJcbiIsdCl9LGUucHJvdG90eXBlLnBhc3RlPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUucGFzdGUoZSl9LGUucHJvdG90eXBlLmdldE9wdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29yZS5vcHRpb25zU2VydmljZS5nZXRPcHRpb24oZSl9LGUucHJvdG90eXBlLnNldE9wdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMuX2NoZWNrUmVhZG9ubHlPcHRpb25zKGUpLHRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2Uuc2V0T3B0aW9uKGUsdCl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSx0KXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQpLHRoaXMuX2NvcmUucmVmcmVzaChlLHQpfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2NvcmUucmVzZXQoKX0sZS5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmNsZWFyVGV4dHVyZUF0bGFzKCl9LGUucHJvdG90eXBlLmxvYWRBZGRvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWRkb25NYW5hZ2VyLmxvYWRBZGRvbih0aGlzLGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwic3RyaW5ncyIse2dldDpmdW5jdGlvbigpe3JldHVybiBzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl92ZXJpZnlJbnRlZ2Vycz1mdW5jdGlvbigpe2Zvcih2YXIgZSx0LHI9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpXT1hcmd1bWVudHNbaV07dHJ5e2Zvcih2YXIgbz1uKHIpLHM9by5uZXh0KCk7IXMuZG9uZTtzPW8ubmV4dCgpKXt2YXIgYT1zLnZhbHVlO2lmKGE9PT0xLzB8fGlzTmFOKGEpfHxhJTEhPTApdGhyb3cgbmV3IEVycm9yKCJUaGlzIEFQSSBvbmx5IGFjY2VwdHMgaW50ZWdlcnMiKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHQ9by5yZXR1cm4pJiZ0LmNhbGwobyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sZS5wcm90b3R5cGUuX3ZlcmlmeVBvc2l0aXZlSW50ZWdlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxyPVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaV09YXJndW1lbnRzW2ldO3RyeXtmb3IodmFyIG89bihyKSxzPW8ubmV4dCgpOyFzLmRvbmU7cz1vLm5leHQoKSl7dmFyIGE9cy52YWx1ZTtpZihhJiYoYT09PTEvMHx8aXNOYU4oYSl8fGElMSE9MHx8YTwwKSl0aHJvdyBuZXcgRXJyb3IoIlRoaXMgQVBJIG9ubHkgYWNjZXB0cyBwb3NpdGl2ZSBpbnRlZ2VycyIpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYodD1vLnJldHVybikmJnQuY2FsbChvKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSxlfSgpO3QuVGVybWluYWw9Zn0sMTU0NjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJhc2VSZW5kZXJMYXllcj12b2lkIDA7dmFyIG49cig2NDMpLG89cig4ODAzKSxzPXIoMTQyMCksYT1yKDM3MzQpLGM9cigxNzUyKSxsPXIoODA1NSksaD1yKDk2MzEpLHU9cig4OTc4KSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4sbyxzLGEsYyl7dGhpcy5fY29udGFpbmVyPWUsdGhpcy5fYWxwaGE9aSx0aGlzLl9jb2xvcnM9bix0aGlzLl9yZW5kZXJlcklkPW8sdGhpcy5fYnVmZmVyU2VydmljZT1zLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWEsdGhpcy5fZGVjb3JhdGlvblNlcnZpY2U9Yyx0aGlzLl9zY2FsZWRDaGFyV2lkdGg9MCx0aGlzLl9zY2FsZWRDaGFySGVpZ2h0PTAsdGhpcy5fc2NhbGVkQ2VsbFdpZHRoPTAsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodD0wLHRoaXMuX3NjYWxlZENoYXJMZWZ0PTAsdGhpcy5fc2NhbGVkQ2hhclRvcD0wLHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9ITEsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllcj17Y2hhcnM6IiIsY29kZTowLGJnOjAsZmc6MCxib2xkOiExLGRpbTohMSxpdGFsaWM6ITF9LHRoaXMuX2NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSx0aGlzLl9jYW52YXMuY2xhc3NMaXN0LmFkZCgieHRlcm0tIit0KyItbGF5ZXIiKSx0aGlzLl9jYW52YXMuc3R5bGUuekluZGV4PXIudG9TdHJpbmcoKSx0aGlzLl9pbml0Q2FudmFzKCksdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX2NhbnZhcyl9cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZTsoMCxoLnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9jYW52YXMpLG51bGw9PT0oZT10aGlzLl9jaGFyQXRsYXMpfHx2b2lkIDA9PT1lfHxlLmRpc3Bvc2UoKX0sZS5wcm90b3R5cGUuX2luaXRDYW52YXM9ZnVuY3Rpb24oKXt0aGlzLl9jdHg9KDAsYy50aHJvd0lmRmFsc3kpKHRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KCIyZCIse2FscGhhOnRoaXMuX2FscGhhfSkpLHRoaXMuX2FscGhhfHx0aGlzLl9jbGVhckFsbCgpfSxlLnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUub25HcmlkQ2hhbmdlZD1mdW5jdGlvbihlLHQpe30sZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5fc2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLl9zZWxlY3Rpb25FbmQ9dCx0aGlzLl9jb2x1bW5TZWxlY3RNb2RlPXJ9LGUucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKGUpfSxlLnByb3RvdHlwZS5fc2V0VHJhbnNwYXJlbmN5PWZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLl9hbHBoYSl7dmFyIHQ9dGhpcy5fY2FudmFzO3RoaXMuX2FscGhhPWUsdGhpcy5fY2FudmFzPXRoaXMuX2NhbnZhcy5jbG9uZU5vZGUoKSx0aGlzLl9pbml0Q2FudmFzKCksdGhpcy5fY29udGFpbmVyLnJlcGxhY2VDaGlsZCh0aGlzLl9jYW52YXMsdCksdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0aGlzLl9jb2xvcnMpLHRoaXMub25HcmlkQ2hhbmdlZCgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKX19LGUucHJvdG90eXBlLl9yZWZyZXNoQ2hhckF0bGFzPWZ1bmN0aW9uKGUpe3RoaXMuX3NjYWxlZENoYXJXaWR0aDw9MCYmdGhpcy5fc2NhbGVkQ2hhckhlaWdodDw9MHx8KHRoaXMuX2NoYXJBdGxhcz0oMCxzLmFjcXVpcmVDaGFyQXRsYXMpKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMsdGhpcy5fcmVuZGVyZXJJZCxlLHRoaXMuX3NjYWxlZENoYXJXaWR0aCx0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KSx0aGlzLl9jaGFyQXRsYXMud2FybVVwKCkpfSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSl7dGhpcy5fc2NhbGVkQ2VsbFdpZHRoPWUuc2NhbGVkQ2VsbFdpZHRoLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQ9ZS5zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX3NjYWxlZENoYXJXaWR0aD1lLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9zY2FsZWRDaGFySGVpZ2h0PWUuc2NhbGVkQ2hhckhlaWdodCx0aGlzLl9zY2FsZWRDaGFyTGVmdD1lLnNjYWxlZENoYXJMZWZ0LHRoaXMuX3NjYWxlZENoYXJUb3A9ZS5zY2FsZWRDaGFyVG9wLHRoaXMuX2NhbnZhcy53aWR0aD1lLnNjYWxlZENhbnZhc1dpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQ9ZS5zY2FsZWRDYW52YXNIZWlnaHQsdGhpcy5fY2FudmFzLnN0eWxlLndpZHRoPWUuY2FudmFzV2lkdGgrInB4Iix0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0PWUuY2FudmFzSGVpZ2h0KyJweCIsdGhpcy5fYWxwaGF8fHRoaXMuX2NsZWFyQWxsKCksdGhpcy5fcmVmcmVzaENoYXJBdGxhcyh0aGlzLl9jb2xvcnMpfSxlLnByb3RvdHlwZS5jbGVhclRleHR1cmVBdGxhcz1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9jaGFyQXRsYXMpfHx2b2lkIDA9PT1lfHxlLmNsZWFyKCl9LGUucHJvdG90eXBlLl9maWxsQ2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQpfSxlLnByb3RvdHlwZS5fZmlsbE1pZGRsZUxpbmVBdENlbGxzPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0xKTt2YXIgaT1NYXRoLmNlaWwoLjUqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk7dGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLCh0KzEpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQtaS13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyl9LGUucHJvdG90eXBlLl9maWxsQm90dG9tTGluZUF0Q2VsbHM9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPTEpLHRoaXMuX2N0eC5maWxsUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCwodCsxKSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLTEscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsd2luZG93LmRldmljZVBpeGVsUmF0aW8pfSxlLnByb3RvdHlwZS5fZmlsbExlZnRMaW5lQXRDZWxsPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguZmlsbFJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdCp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKnIsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCl9LGUucHJvdG90eXBlLl9zdHJva2VSZWN0QXRDZWxsPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuX2N0eC5saW5lV2lkdGg9d2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5fY3R4LnN0cm9rZVJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgrd2luZG93LmRldmljZVBpeGVsUmF0aW8vMix0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQrd2luZG93LmRldmljZVBpeGVsUmF0aW8vMixyKnRoaXMuX3NjYWxlZENlbGxXaWR0aC13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQtd2luZG93LmRldmljZVBpeGVsUmF0aW8pfSxlLnByb3RvdHlwZS5fY2xlYXJBbGw9ZnVuY3Rpb24oKXt0aGlzLl9hbHBoYT90aGlzLl9jdHguY2xlYXJSZWN0KDAsMCx0aGlzLl9jYW52YXMud2lkdGgsdGhpcy5fY2FudmFzLmhlaWdodCk6KHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzLHRoaXMuX2N0eC5maWxsUmVjdCgwLDAsdGhpcy5fY2FudmFzLndpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQpKX0sZS5wcm90b3R5cGUuX2NsZWFyQ2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fYWxwaGE/dGhpcy5fY3R4LmNsZWFyUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsaSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KToodGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3MsdGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQpKX0sZS5wcm90b3R5cGUuX2ZpbGxDaGFyVHJ1ZUNvbG9yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguZm9udD10aGlzLl9nZXRGb250KCExLCExKSx0aGlzLl9jdHgudGV4dEJhc2VsaW5lPW8uVEVYVF9CQVNFTElORSx0aGlzLl9jbGlwUm93KHIpO3ZhciBpPSExOyExIT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXN0b21HbHlwaHMmJihpPSgwLHUudHJ5RHJhd0N1c3RvbUNoYXIpKHRoaXMuX2N0eCxlLmdldENoYXJzKCksdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX3NjYWxlZENlbGxXaWR0aCx0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSksaXx8dGhpcy5fY3R4LmZpbGxUZXh0KGUuZ2V0Q2hhcnMoKSx0KnRoaXMuX3NjYWxlZENlbGxXaWR0aCt0aGlzLl9zY2FsZWRDaGFyTGVmdCxyKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQrdGhpcy5fc2NhbGVkQ2hhclRvcCt0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KX0sZS5wcm90b3R5cGUuX2RyYXdDaGFycz1mdW5jdGlvbihlLHQscil7dmFyIHMsYSxjLGw9dGhpcy5fZ2V0Q29udHJhc3RDb2xvcihlLHQscik7aWYobHx8ZS5pc0ZnUkdCKCl8fGUuaXNCZ1JHQigpKXRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKGUsdCxyLGwpO2Vsc2V7dmFyIGgsdTtlLmlzSW52ZXJzZSgpPyhoPWUuaXNCZ0RlZmF1bHQoKT9vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I6ZS5nZXRCZ0NvbG9yKCksdT1lLmlzRmdEZWZhdWx0KCk/by5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SOmUuZ2V0RmdDb2xvcigpKToodT1lLmlzQmdEZWZhdWx0KCk/bi5ERUZBVUxUX0NPTE9SOmUuZ2V0QmdDb2xvcigpLGg9ZS5pc0ZnRGVmYXVsdCgpP24uREVGQVVMVF9DT0xPUjplLmdldEZnQ29sb3IoKSksaCs9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmZS5pc0JvbGQoKSYmaDw4Pzg6MCx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNoYXJzPWUuZ2V0Q2hhcnMoKXx8bi5XSElURVNQQUNFX0NFTExfQ0hBUix0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmNvZGU9ZS5nZXRDb2RlKCl8fG4uV0hJVEVTUEFDRV9DRUxMX0NPREUsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5iZz11LHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuZmc9aCx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmJvbGQ9ISFlLmlzQm9sZCgpLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuZGltPSEhZS5pc0RpbSgpLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuaXRhbGljPSEhZS5pc0l0YWxpYygpO3ZhciBmPSExO3RyeXtmb3IodmFyIF89aSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5nZXREZWNvcmF0aW9uc0F0Q2VsbCh0LHIpKSxkPV8ubmV4dCgpOyFkLmRvbmU7ZD1fLm5leHQoKSl7dmFyIHA9ZC52YWx1ZTtpZihwLmJhY2tncm91bmRDb2xvclJHQnx8cC5mb3JlZ3JvdW5kQ29sb3JSR0Ipe2Y9ITA7YnJlYWt9fX1jYXRjaChlKXtzPXtlcnJvcjplfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYoYT1fLnJldHVybikmJmEuY2FsbChfKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19IWYmJihudWxsPT09KGM9dGhpcy5fY2hhckF0bGFzKXx8dm9pZCAwPT09Yz92b2lkIDA6Yy5kcmF3KHRoaXMuX2N0eCx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoK3RoaXMuX3NjYWxlZENoYXJMZWZ0LHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCt0aGlzLl9zY2FsZWRDaGFyVG9wKSl8fHRoaXMuX2RyYXdVbmNhY2hlZENoYXJzKGUsdCxyKX19LGUucHJvdG90eXBlLl9kcmF3VW5jYWNoZWRDaGFycz1mdW5jdGlvbihlLHQscixpKXtpZih0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5mb250PXRoaXMuX2dldEZvbnQoISFlLmlzQm9sZCgpLCEhZS5pc0l0YWxpYygpKSx0aGlzLl9jdHgudGV4dEJhc2VsaW5lPW8uVEVYVF9CQVNFTElORSxlLmlzSW52ZXJzZSgpKWlmKGkpdGhpcy5fY3R4LmZpbGxTdHlsZT1pLmNzcztlbHNlIGlmKGUuaXNCZ0RlZmF1bHQoKSl0aGlzLl9jdHguZmlsbFN0eWxlPWwuY29sb3Iub3BhcXVlKHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kKS5jc3M7ZWxzZSBpZihlLmlzQmdSR0IoKSl0aGlzLl9jdHguZmlsbFN0eWxlPSJyZ2IoIithLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEJnQ29sb3IoKSkuam9pbigiLCIpKyIpIjtlbHNle3ZhciBuPWUuZ2V0QmdDb2xvcigpO3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJm48OCYmKG4rPTgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmFuc2lbbl0uY3NzfWVsc2UgaWYoaSl0aGlzLl9jdHguZmlsbFN0eWxlPWkuY3NzO2Vsc2UgaWYoZS5pc0ZnRGVmYXVsdCgpKXRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzO2Vsc2UgaWYoZS5pc0ZnUkdCKCkpdGhpcy5fY3R4LmZpbGxTdHlsZT0icmdiKCIrYS5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRGZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI7ZWxzZXt2YXIgcz1lLmdldEZnQ29sb3IoKTt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZzPDgmJihzKz04KSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5hbnNpW3NdLmNzc310aGlzLl9jbGlwUm93KHIpLGUuaXNEaW0oKSYmKHRoaXMuX2N0eC5nbG9iYWxBbHBoYT1vLkRJTV9PUEFDSVRZKTt2YXIgYz0hMTshMSE9PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3VzdG9tR2x5cGhzJiYoYz0oMCx1LnRyeURyYXdDdXN0b21DaGFyKSh0aGlzLl9jdHgsZS5nZXRDaGFycygpLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCx0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCkpLGN8fHRoaXMuX2N0eC5maWxsVGV4dChlLmdldENoYXJzKCksdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgrdGhpcy5fc2NhbGVkQ2hhckxlZnQscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0K3RoaXMuX3NjYWxlZENoYXJUb3ArdGhpcy5fc2NhbGVkQ2hhckhlaWdodCksdGhpcy5fY3R4LnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX2NsaXBSb3c9ZnVuY3Rpb24oZSl7dGhpcy5fY3R4LmJlZ2luUGF0aCgpLHRoaXMuX2N0eC5yZWN0KDAsZSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCksdGhpcy5fY3R4LmNsaXAoKX0sZS5wcm90b3R5cGUuX2dldEZvbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4odD8iaXRhbGljIjoiIikrIiAiKyhlP3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodEJvbGQ6dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0KSsiICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbysicHggIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHl9LGUucHJvdG90eXBlLl9nZXRDb250cmFzdENvbG9yPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixvLHMsYSxoPSExO3RyeXtmb3IodmFyIHU9aSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5nZXREZWNvcmF0aW9uc0F0Q2VsbCh0LHIpKSxmPXUubmV4dCgpOyFmLmRvbmU7Zj11Lm5leHQoKSl7dmFyIF89Zi52YWx1ZTsidG9wIiE9PV8ub3B0aW9ucy5sYXllciYmaHx8KF8uYmFja2dyb3VuZENvbG9yUkdCJiYocz1fLmJhY2tncm91bmRDb2xvclJHQi5yZ2JhKSxfLmZvcmVncm91bmRDb2xvclJHQiYmKGE9Xy5mb3JlZ3JvdW5kQ29sb3JSR0IucmdiYSksaD0idG9wIj09PV8ub3B0aW9ucy5sYXllcil9fWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2YmJiFmLmRvbmUmJihvPXUucmV0dXJuKSYmby5jYWxsKHUpfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1pZihofHx0aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCYmdGhpcy5faXNDZWxsSW5TZWxlY3Rpb24odCxyKSYmKGE9dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQucmdiYSksc3x8YXx8MSE9PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8mJiEoMCxjLmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHMpKGUuZ2V0Q29kZSgpKSl7aWYoIXMmJiFhKXt2YXIgZD10aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDb2xvcihlLmJnLGUuZmcpO2lmKHZvaWQgMCE9PWQpcmV0dXJuIGR8fHZvaWQgMH12YXIgcD1lLmdldEZnQ29sb3IoKSx2PWUuZ2V0RmdDb2xvck1vZGUoKSx5PWUuZ2V0QmdDb2xvcigpLGc9ZS5nZXRCZ0NvbG9yTW9kZSgpLG09ISFlLmlzSW52ZXJzZSgpLGI9ISFlLmlzSW52ZXJzZSgpO2lmKG0pe3ZhciBTPXA7cD15LHk9Uzt2YXIgQz12O3Y9ZyxnPUN9dmFyIHc9dGhpcy5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhKHZvaWQgMCE9PXM/NTAzMzE2NDg6ZyxudWxsIT1zP3M6eSxtKSxMPXRoaXMuX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYSh2LHAsbSxiKSxFPWwucmdiYS5lbnN1cmVDb250cmFzdFJhdGlvKG51bGwhPXM/czp3LG51bGwhPWE/YTpMLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8pO2lmKCFFKXtpZighYSlyZXR1cm4gdm9pZCB0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDb2xvcihlLmJnLGUuZmcsbnVsbCk7RT1hfXZhciB4PXtjc3M6bC5jaGFubmVscy50b0NzcyhFPj4yNCYyNTUsRT4+MTYmMjU1LEU+PjgmMjU1KSxyZ2JhOkV9O3JldHVybiBzfHxhfHx0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDb2xvcihlLmJnLGUuZmcseCkseH19LGUucHJvdG90eXBlLl9yZXNvbHZlQmFja2dyb3VuZFJnYmE9ZnVuY3Rpb24oZSx0LHIpe3N3aXRjaChlKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIHRoaXMuX2NvbG9ycy5hbnNpW3RdLnJnYmE7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gdDw8ODtkZWZhdWx0OnJldHVybiByP3RoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLnJnYmE6dGhpcy5fY29sb3JzLmJhY2tncm91bmQucmdiYX19LGUucHJvdG90eXBlLl9yZXNvbHZlRm9yZWdyb3VuZFJnYmE9ZnVuY3Rpb24oZSx0LHIsaSl7c3dpdGNoKGUpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmaSYmdDw4JiYodCs9OCksdGhpcy5fY29sb3JzLmFuc2lbdF0ucmdiYTtjYXNlIDUwMzMxNjQ4OnJldHVybiB0PDw4O2RlZmF1bHQ6cmV0dXJuIHI/dGhpcy5fY29sb3JzLmJhY2tncm91bmQucmdiYTp0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5yZ2JhfX0sZS5wcm90b3R5cGUuX2lzQ2VsbEluU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fc2VsZWN0aW9uU3RhcnQsaT10aGlzLl9zZWxlY3Rpb25FbmQ7cmV0dXJuISghcnx8IWkpJiYodGhpcy5fY29sdW1uU2VsZWN0TW9kZT9lPj1yWzBdJiZ0Pj1yWzFdJiZlPGlbMF0mJnQ8aVsxXTp0PnJbMV0mJnQ8aVsxXXx8clsxXT09PWlbMV0mJnQ9PT1yWzFdJiZlPj1yWzBdJiZlPGlbMF18fHJbMV08aVsxXSYmdD09PWlbMV0mJmU8aVswXXx8clsxXTxpWzFdJiZ0PT09clsxXSYmZT49clswXSl9LGV9KCk7dC5CYXNlUmVuZGVyTGF5ZXI9Zn0sMjUxMjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DdXJzb3JSZW5kZXJMYXllcj12b2lkIDA7dmFyIGE9cigxNTQ2KSxjPXIoNTExKSxsPXIoMjU4NSksaD1yKDQ3MjUpLHU9NjAwLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGwsaCx1KXt2YXIgZj1lLmNhbGwodGhpcyx0LCJjdXJzb3IiLHIsITAsaSxuLHMsYSx1KXx8dGhpcztyZXR1cm4gZi5fb25SZXF1ZXN0UmVkcmF3PW8sZi5fY29yZVNlcnZpY2U9bCxmLl9jb3JlQnJvd3NlclNlcnZpY2U9aCxmLl9jZWxsPW5ldyBjLkNlbGxEYXRhLGYuX3N0YXRlPXt4OjAseTowLGlzRm9jdXNlZDohMSxzdHlsZToiIix3aWR0aDowfSxmLl9jdXJzb3JSZW5kZXJlcnM9e2JhcjpmLl9yZW5kZXJCYXJDdXJzb3IuYmluZChmKSxibG9jazpmLl9yZW5kZXJCbG9ja0N1cnNvci5iaW5kKGYpLHVuZGVybGluZTpmLl9yZW5kZXJVbmRlcmxpbmVDdXJzb3IuYmluZChmKX0sZn1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlciYmKHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmRpc3Bvc2UoKSx0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj12b2lkIDApLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCksdGhpcy5fc3RhdGU9e3g6MCx5OjAsaXNGb2N1c2VkOiExLHN0eWxlOiIiLHdpZHRoOjB9fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3ZhciBlO3RoaXMuX2NsZWFyQ3Vyc29yKCksbnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKSx0aGlzLm9uT3B0aW9uc0NoYW5nZWQoKX0sdC5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5wYXVzZSgpLHRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHtzdGFydDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGVuZDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSl9LHQucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpfHx2b2lkIDA9PT1lfHxlLnJlc3VtZSgpLHRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHtzdGFydDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGVuZDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSl9LHQucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZSx0PXRoaXM7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JCbGluaz90aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcnx8KHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyPW5ldyBfKHRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQsKGZ1bmN0aW9uKCl7dC5fcmVuZGVyKCEwKX0pKSk6KG51bGw9PT0oZT10aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcil8fHZvaWQgMD09PWV8fGUuZGlzcG9zZSgpLHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyPXZvaWQgMCksdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoe3N0YXJ0OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksZW5kOnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnl9KX0sdC5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKX0sdC5wcm90b3R5cGUub25HcmlkQ2hhbmdlZD1mdW5jdGlvbihlLHQpeyF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcnx8dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuaXNQYXVzZWQ/dGhpcy5fcmVuZGVyKCExKTp0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKX0sdC5wcm90b3R5cGUuX3JlbmRlcj1mdW5jdGlvbihlKXtpZih0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkJiYhdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4pe3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnkscj10LXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO2lmKHI8MHx8cj49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKXRoaXMuX2NsZWFyQ3Vyc29yKCk7ZWxzZXt2YXIgaT1NYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKTtpZih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodCkubG9hZENlbGwoaSx0aGlzLl9jZWxsKSx2b2lkIDAhPT10aGlzLl9jZWxsLmNvbnRlbnQpe2lmKCF0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkKXt0aGlzLl9jbGVhckN1cnNvcigpLHRoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzczt2YXIgbj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlO3JldHVybiBuJiYiYmxvY2siIT09bj90aGlzLl9jdXJzb3JSZW5kZXJlcnNbbl0oaSxyLHRoaXMuX2NlbGwpOnRoaXMuX3JlbmRlckJsdXJDdXJzb3IoaSxyLHRoaXMuX2NlbGwpLHRoaXMuX2N0eC5yZXN0b3JlKCksdGhpcy5fc3RhdGUueD1pLHRoaXMuX3N0YXRlLnk9cix0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQ9ITEsdGhpcy5fc3RhdGUuc3R5bGU9bix2b2lkKHRoaXMuX3N0YXRlLndpZHRoPXRoaXMuX2NlbGwuZ2V0V2lkdGgoKSl9aWYoIXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyfHx0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc0N1cnNvclZpc2libGUpe2lmKHRoaXMuX3N0YXRlKXtpZih0aGlzLl9zdGF0ZS54PT09aSYmdGhpcy5fc3RhdGUueT09PXImJnRoaXMuX3N0YXRlLmlzRm9jdXNlZD09PXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQmJnRoaXMuX3N0YXRlLnN0eWxlPT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZSYmdGhpcy5fc3RhdGUud2lkdGg9PT10aGlzLl9jZWxsLmdldFdpZHRoKCkpcmV0dXJuO3RoaXMuX2NsZWFyQ3Vyc29yKCl9dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdXJzb3JSZW5kZXJlcnNbdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZXx8ImJsb2NrIl0oaSxyLHRoaXMuX2NlbGwpLHRoaXMuX2N0eC5yZXN0b3JlKCksdGhpcy5fc3RhdGUueD1pLHRoaXMuX3N0YXRlLnk9cix0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQ9ITEsdGhpcy5fc3RhdGUuc3R5bGU9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZSx0aGlzLl9zdGF0ZS53aWR0aD10aGlzLl9jZWxsLmdldFdpZHRoKCl9ZWxzZSB0aGlzLl9jbGVhckN1cnNvcigpfX19ZWxzZSB0aGlzLl9jbGVhckN1cnNvcigpfSx0LnByb3RvdHlwZS5fY2xlYXJDdXJzb3I9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZSYmKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvPDE/dGhpcy5fY2xlYXJBbGwoKTp0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngsdGhpcy5fc3RhdGUueSx0aGlzLl9zdGF0ZS53aWR0aCwxKSx0aGlzLl9zdGF0ZT17eDowLHk6MCxpc0ZvY3VzZWQ6ITEsc3R5bGU6IiIsd2lkdGg6MH0pfSx0LnByb3RvdHlwZS5fcmVuZGVyQmFyQ3Vyc29yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3MsdGhpcy5fZmlsbExlZnRMaW5lQXRDZWxsKGUsdCx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvcldpZHRoKSx0aGlzLl9jdHgucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fcmVuZGVyQmxvY2tDdXJzb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzcyx0aGlzLl9maWxsQ2VsbHMoZSx0LHIuZ2V0V2lkdGgoKSwxKSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzLHRoaXMuX2ZpbGxDaGFyVHJ1ZUNvbG9yKHIsZSx0KSx0aGlzLl9jdHgucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3MsdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUsdCksdGhpcy5fY3R4LnJlc3RvcmUoKX0sdC5wcm90b3R5cGUuX3JlbmRlckJsdXJDdXJzb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LnN0cm9rZVN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzLHRoaXMuX3N0cm9rZVJlY3RBdENlbGwoZSx0LHIuZ2V0V2lkdGgoKSwxKSx0aGlzLl9jdHgucmVzdG9yZSgpfSxvKFtzKDUsbC5JQnVmZmVyU2VydmljZSkscyg2LGwuSU9wdGlvbnNTZXJ2aWNlKSxzKDcsbC5JQ29yZVNlcnZpY2UpLHMoOCxoLklDb3JlQnJvd3NlclNlcnZpY2UpLHMoOSxsLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShhLkJhc2VSZW5kZXJMYXllcik7dC5DdXJzb3JSZW5kZXJMYXllcj1mO3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX3JlbmRlckNhbGxiYWNrPXQsdGhpcy5pc0N1cnNvclZpc2libGU9ITAsZSYmdGhpcy5fcmVzdGFydEludGVydmFsKCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNQYXVzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hKHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0fHx0aGlzLl9ibGlua0ludGVydmFsKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYmxpbmtJbnRlcnZhbCYmKHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpLHRoaXMuX2JsaW5rSW50ZXJ2YWw9dm9pZCAwKSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpLHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0PXZvaWQgMCksdGhpcy5fYW5pbWF0aW9uRnJhbWUmJih3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpLHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMCl9LGUucHJvdG90eXBlLnJlc3RhcnRCbGlua0FuaW1hdGlvbj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5pc1BhdXNlZHx8KHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQ9RGF0ZS5ub3coKSx0aGlzLmlzQ3Vyc29yVmlzaWJsZT0hMCx0aGlzLl9hbmltYXRpb25GcmFtZXx8KHRoaXMuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7ZS5fcmVuZGVyQ2FsbGJhY2soKSxlLl9hbmltYXRpb25GcmFtZT12b2lkIDB9KSkpKX0sZS5wcm90b3R5cGUuX3Jlc3RhcnRJbnRlcnZhbD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3ZvaWQgMD09PWUmJihlPXUpLHRoaXMuX2JsaW5rSW50ZXJ2YWwmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKSx0aGlzLl9ibGlua0ludGVydmFsPXZvaWQgMCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYodC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCl7dmFyIGU9dS0oRGF0ZS5ub3coKS10Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkKTtpZih0Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkPXZvaWQgMCxlPjApcmV0dXJuIHZvaWQgdC5fcmVzdGFydEludGVydmFsKGUpfXQuaXNDdXJzb3JWaXNpYmxlPSExLHQuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7dC5fcmVuZGVyQ2FsbGJhY2soKSx0Ll9hbmltYXRpb25GcmFtZT12b2lkIDB9KSksdC5fYmxpbmtJbnRlcnZhbD13aW5kb3cuc2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7aWYodC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCl7dmFyIGU9dS0oRGF0ZS5ub3coKS10Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkKTtyZXR1cm4gdC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZD12b2lkIDAsdm9pZCB0Ll9yZXN0YXJ0SW50ZXJ2YWwoZSl9dC5pc0N1cnNvclZpc2libGU9IXQuaXNDdXJzb3JWaXNpYmxlLHQuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7dC5fcmVuZGVyQ2FsbGJhY2soKSx0Ll9hbmltYXRpb25GcmFtZT12b2lkIDB9KSl9KSx1KX0pLGUpfSxlLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuaXNDdXJzb3JWaXNpYmxlPSEwLHRoaXMuX2JsaW5rSW50ZXJ2YWwmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKSx0aGlzLl9ibGlua0ludGVydmFsPXZvaWQgMCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dD12b2lkIDApLHRoaXMuX2FuaW1hdGlvbkZyYW1lJiYod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSx0aGlzLl9hbmltYXRpb25GcmFtZT12b2lkIDApfSxlLnByb3RvdHlwZS5yZXN1bWU9ZnVuY3Rpb24oKXt0aGlzLnBhdXNlKCksdGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZD12b2lkIDAsdGhpcy5fcmVzdGFydEludGVydmFsKCksdGhpcy5yZXN0YXJ0QmxpbmtBbmltYXRpb24oKX0sZX0oKX0sODk3ODpmdW5jdGlvbihlLHQscil7dmFyIGksbixvLHMsYSxjLGwsaCx1LGYsXyxkLHAsdix5LGcsbSxiLFMsQyx3LEwsRSx4LFIsayxNLEEsTyxELFQsQixQLEksSCxqLEYsVyxVLHEsTix6LEssRyxWLFgsWixZLEosJCxRLGVlLHRlLHJlLGllLG5lLG9lLHNlLGFlLGNlLGxlLGhlLHVlLGZlLF9lLGRlLHBlLHZlLHllLGdlLG1lLGJlLFNlLENlLHdlLExlLEVlLHhlLFJlLGtlLE1lLEFlLE9lLERlLFRlLEJlLFBlLEllLEhlLGplLEZlLFdlLFVlLHFlLE5lLHplLEtlLEdlLFZlLFhlLFplLFllLEplLCRlLFFlLGV0LHR0LHJ0LGl0LG50LG90LHN0LGF0LGN0LGx0LGh0LHV0LGZ0LF90LGR0LHB0LHZ0LHl0LGd0LG10LGJ0LFN0LEN0LHd0PXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30sTHQ9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnRyeURyYXdDdXN0b21DaGFyPXQucG93ZXJsaW5lRGVmaW5pdGlvbnM9dC5ib3hEcmF3aW5nRGVmaW5pdGlvbnM9dC5ibG9ja0VsZW1lbnREZWZpbml0aW9ucz12b2lkIDA7dmFyIEV0PXIoMTc1Mik7dC5ibG9ja0VsZW1lbnREZWZpbml0aW9ucz17IuKWgCI6W3t4OjAseTowLHc6OCxoOjR9XSwi4paBIjpbe3g6MCx5Ojcsdzo4LGg6MX1dLCLiloIiOlt7eDowLHk6Nix3OjgsaDoyfV0sIuKWgyI6W3t4OjAseTo1LHc6OCxoOjN9XSwi4paEIjpbe3g6MCx5OjQsdzo4LGg6NH1dLCLiloUiOlt7eDowLHk6Myx3OjgsaDo1fV0sIuKWhiI6W3t4OjAseToyLHc6OCxoOjZ9XSwi4paHIjpbe3g6MCx5OjEsdzo4LGg6N31dLCLilogiOlt7eDowLHk6MCx3OjgsaDo4fV0sIuKWiSI6W3t4OjAseTowLHc6NyxoOjh9XSwi4paKIjpbe3g6MCx5OjAsdzo2LGg6OH1dLCLilosiOlt7eDowLHk6MCx3OjUsaDo4fV0sIuKWjCI6W3t4OjAseTowLHc6NCxoOjh9XSwi4paNIjpbe3g6MCx5OjAsdzozLGg6OH1dLCLilo4iOlt7eDowLHk6MCx3OjIsaDo4fV0sIuKWjyI6W3t4OjAseTowLHc6MSxoOjh9XSwi4paQIjpbe3g6NCx5OjAsdzo0LGg6OH1dLCLilpQiOlt7eDowLHk6MCx3OjksaDoxfV0sIuKWlSI6W3t4OjcseTowLHc6MSxoOjh9XSwi4paWIjpbe3g6MCx5OjQsdzo0LGg6NH1dLCLilpciOlt7eDo0LHk6NCx3OjQsaDo0fV0sIuKWmCI6W3t4OjAseTowLHc6NCxoOjR9XSwi4paZIjpbe3g6MCx5OjAsdzo0LGg6OH0se3g6MCx5OjQsdzo4LGg6NH1dLCLilpoiOlt7eDowLHk6MCx3OjQsaDo0fSx7eDo0LHk6NCx3OjQsaDo0fV0sIuKWmyI6W3t4OjAseTowLHc6NCxoOjh9LHt4OjAseTowLHc6NCxoOjh9XSwi4pacIjpbe3g6MCx5OjAsdzo4LGg6NH0se3g6NCx5OjAsdzo0LGg6OH1dLCLilp0iOlt7eDo0LHk6MCx3OjQsaDo0fV0sIuKWniI6W3t4OjQseTowLHc6NCxoOjR9LHt4OjAseTo0LHc6NCxoOjR9XSwi4pafIjpbe3g6NCx5OjAsdzo0LGg6OH0se3g6MCx5OjQsdzo4LGg6NH1dLCLwn62wIjpbe3g6MSx5OjAsdzoxLGg6OH1dLCLwn62xIjpbe3g6Mix5OjAsdzoxLGg6OH1dLCLwn62yIjpbe3g6Myx5OjAsdzoxLGg6OH1dLCLwn62zIjpbe3g6NCx5OjAsdzoxLGg6OH1dLCLwn620Ijpbe3g6NSx5OjAsdzoxLGg6OH1dLCLwn621Ijpbe3g6Nix5OjAsdzoxLGg6OH1dLCLwn622Ijpbe3g6MCx5OjEsdzo4LGg6MX1dLCLwn623Ijpbe3g6MCx5OjIsdzo4LGg6MX1dLCLwn624Ijpbe3g6MCx5OjMsdzo4LGg6MX1dLCLwn625Ijpbe3g6MCx5OjQsdzo4LGg6MX1dLCLwn626Ijpbe3g6MCx5OjUsdzo4LGg6MX1dLCLwn627Ijpbe3g6MCx5OjYsdzo4LGg6MX1dLCLwn628Ijpbe3g6MCx5OjAsdzoxLGg6OH0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn629Ijpbe3g6MCx5OjAsdzoxLGg6OH0se3g6MCx5OjAsdzo4LGg6MX1dLCLwn62+Ijpbe3g6Nyx5OjAsdzoxLGg6OH0se3g6MCx5OjAsdzo4LGg6MX1dLCLwn62/Ijpbe3g6Nyx5OjAsdzoxLGg6OH0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn66AIjpbe3g6MCx5OjAsdzo4LGg6MX0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn66BIjpbe3g6MCx5OjAsdzo4LGg6MX0se3g6MCx5OjIsdzo4LGg6MX0se3g6MCx5OjQsdzo4LGg6MX0se3g6MCx5Ojcsdzo4LGg6MX1dLCLwn66CIjpbe3g6MCx5OjAsdzo4LGg6Mn1dLCLwn66DIjpbe3g6MCx5OjAsdzo4LGg6M31dLCLwn66EIjpbe3g6MCx5OjAsdzo4LGg6NX1dLCLwn66FIjpbe3g6MCx5OjAsdzo4LGg6Nn1dLCLwn66GIjpbe3g6MCx5OjAsdzo4LGg6N31dLCLwn66HIjpbe3g6Nix5OjAsdzoyLGg6OH1dLCLwn66IIjpbe3g6NSx5OjAsdzozLGg6OH1dLCLwn66JIjpbe3g6Myx5OjAsdzo1LGg6OH1dLCLwn66KIjpbe3g6Mix5OjAsdzo2LGg6OH1dLCLwn66LIjpbe3g6MSx5OjAsdzo3LGg6OH1dLCLwn66VIjpbe3g6MCx5OjAsdzoyLGg6Mn0se3g6NCx5OjAsdzoyLGg6Mn0se3g6Mix5OjIsdzoyLGg6Mn0se3g6Nix5OjIsdzoyLGg6Mn0se3g6MCx5OjQsdzoyLGg6Mn0se3g6NCx5OjQsdzoyLGg6Mn0se3g6Mix5OjYsdzoyLGg6Mn0se3g6Nix5OjYsdzoyLGg6Mn1dLCLwn66WIjpbe3g6Mix5OjAsdzoyLGg6Mn0se3g6Nix5OjAsdzoyLGg6Mn0se3g6MCx5OjIsdzoyLGg6Mn0se3g6NCx5OjIsdzoyLGg6Mn0se3g6Mix5OjQsdzoyLGg6Mn0se3g6Nix5OjQsdzoyLGg6Mn0se3g6MCx5OjYsdzoyLGg6Mn0se3g6NCx5OjYsdzoyLGg6Mn1dLCLwn66XIjpbe3g6MCx5OjIsdzo4LGg6Mn0se3g6MCx5OjYsdzo4LGg6Mn1dfTt2YXIgeHQ9eyLilpEiOltbMSwwLDAsMF0sWzAsMCwwLDBdLFswLDAsMSwwXSxbMCwwLDAsMF1dLCLilpIiOltbMSwwXSxbMCwwXSxbMCwxXSxbMCwwXV0sIuKWkyI6W1swLDFdLFsxLDFdLFsxLDBdLFsxLDFdXX07dC5ib3hEcmF3aW5nRGVmaW5pdGlvbnM9eyLilIAiOihpPXt9LGlbMV09Ik0wLC41IEwxLC41IixpKSwi4pSBIjoobj17fSxuWzNdPSJNMCwuNSBMMSwuNSIsbiksIuKUgiI6KG89e30sb1sxXT0iTS41LDAgTC41LDEiLG8pLCLilIMiOihzPXt9LHNbM109Ik0uNSwwIEwuNSwxIixzKSwi4pSMIjooYT17fSxhWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixhKSwi4pSPIjooYz17fSxjWzNdPSJNMC41LDEgTC41LC41IEwxLC41IixjKSwi4pSQIjoobD17fSxsWzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLGwpLCLilJMiOihoPXt9LGhbM109Ik0wLC41IEwuNSwuNSBMLjUsMSIsaCksIuKUlCI6KHU9e30sdVsxXT0iTS41LDAgTC41LC41IEwxLC41Iix1KSwi4pSXIjooZj17fSxmWzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLGYpLCLilJgiOihfPXt9LF9bMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIsXyksIuKUmyI6KGQ9e30sZFszXT0iTS41LDAgTC41LC41IEwwLC41IixkKSwi4pScIjoocD17fSxwWzFdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDEsLjUiLHApLCLilKMiOih2PXt9LHZbM109Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMSwuNSIsdiksIuKUpCI6KHk9e30seVsxXT0iTS41LDAgTC41LDEgTS41LC41IEwwLC41Iix5KSwi4pSrIjooZz17fSxnWzNdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDAsLjUiLGcpLCLilKwiOihtPXt9LG1bMV09Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMSIsbSksIuKUsyI6KGI9e30sYlszXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwxIixiKSwi4pS0IjooUz17fSxTWzFdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDAiLFMpLCLilLsiOihDPXt9LENbM109Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMCIsQyksIuKUvCI6KHc9e30sd1sxXT0iTTAsLjUgTDEsLjUgTS41LDAgTC41LDEiLHcpLCLilYsiOihMPXt9LExbM109Ik0wLC41IEwxLC41IE0uNSwwIEwuNSwxIixMKSwi4pW0IjooRT17fSxFWzFdPSJNLjUsLjUgTDAsLjUiLEUpLCLilbgiOih4PXt9LHhbM109Ik0uNSwuNSBMMCwuNSIseCksIuKVtSI6KFI9e30sUlsxXT0iTS41LC41IEwuNSwwIixSKSwi4pW5Ijooaz17fSxrWzNdPSJNLjUsLjUgTC41LDAiLGspLCLilbYiOihNPXt9LE1bMV09Ik0uNSwuNSBMMSwuNSIsTSksIuKVuiI6KEE9e30sQVszXT0iTS41LC41IEwxLC41IixBKSwi4pW3IjooTz17fSxPWzFdPSJNLjUsLjUgTC41LDEiLE8pLCLilbsiOihEPXt9LERbM109Ik0uNSwuNSBMLjUsMSIsRCksIuKVkCI6KFQ9e30sVFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMMSwiKyguNSt0KX0sVCksIuKVkSI6KEI9e30sQlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUtZSkrIiwwIEwiKyguNS1lKSsiLDEgTSIrKC41K2UpKyIsMCBMIisoLjUrZSkrIiwxIn0sQiksIuKVkiI6KFA9e30sUFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMSBMLjUsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0uNSwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxQKSwi4pWTIjooST17fSxJWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNS1lKSsiLDEgTCIrKC41LWUpKyIsLjUgTDEsLjUgTSIrKC41K2UpKyIsLjUgTCIrKC41K2UpKyIsMSJ9LEkpLCLilZQiOihIPXt9LEhbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTEsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDEgTTEsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDEifSxIKSwi4pWVIjooaj17fSxqWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTC41LCIrKC41LXQpKyIgTC41LDEgTTAsIisoLjUrdCkrIiBMLjUsIisoLjUrdCl9LGopLCLilZYiOihGPXt9LEZbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41K2UpKyIsMSBMIisoLjUrZSkrIiwuNSBMMCwuNSBNIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwxIn0sRiksIuKVlyI6KFc9e30sV1sxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMCwiKyguNS10KSsiIEwiKyguNStlKSsiLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsMSJ9LFcpLCLilZgiOihVPXt9LFVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LCIrKC41K3QpKyIgTDEsIisoLjUrdCkrIiBNLjUsIisoLjUtdCkrIiBMMSwiKyguNS10KX0sVSksIuKVmSI6KHE9e30scVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMSwuNSBMIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwwIE0iKyguNStlKSsiLC41IEwiKyguNStlKSsiLDAifSxxKSwi4pWaIjooTj17fSxOWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIE0xLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwwIn0sTiksIuKVmyI6KHo9e30selsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwuNSwiKyguNSt0KSsiIEwuNSwwIE0wLCIrKC41LXQpKyIgTC41LCIrKC41LXQpfSx6KSwi4pWcIjooSz17fSxLWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwiKyguNStlKSsiLC41IEwiKyguNStlKSsiLDAgTSIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMCJ9LEspLCLilZ0iOihHPXt9LEdbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDAgTTAsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDAifSxHKSwi4pWeIjooVj17fSxWWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwxIE0uNSwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTS41LCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LFYpLCLilZ8iOihYPXt9LFhbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSBNIisoLjUrZSkrIiwuNSBMMSwuNSJ9LFgpLCLilaAiOihaPXt9LFpbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0xLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwxIE0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIn0sWiksIuKVoSI6KFk9e30sWVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMCBMLjUsMSBNMCwiKyguNS10KSsiIEwuNSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTC41LCIrKC41K3QpfSxZKSwi4pWiIjooSj17fSxKWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwiKyguNS1lKSsiLC41IE0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEifSxKKSwi4pWjIjooJD17fSwkWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSBNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMCwiKyguNS10KSsiIEwiKyguNS1lKSsiLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsMCJ9LCQpLCLilaQiOihRPXt9LFFbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCkrIiBNLjUsIisoLjUrdCkrIiBMLjUsMSJ9LFEpLCLilaUiOihlZT17fSxlZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwuNSBMMSwuNSBNIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLC41IEwiKyguNStlKSsiLDEifSxlZSksIuKVpiI6KHRlPXt9LHRlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMSwiKyguNSt0KSsiIEwiKyguNStlKSsiLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsMSJ9LHRlKSwi4pWnIjoocmU9e30scmVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LCIrKC41LXQpKyIgTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LHJlKSwi4pWoIjooaWU9e30saWVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsLjUgTDEsLjUgTSIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMCBNIisoLjUrZSkrIiwuNSBMIisoLjUrZSkrIiwwIn0saWUpLCLilakiOihuZT17fSxuZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpKyIgTTAsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDAgTTEsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwiKyguNS10KSsiIEwiKyguNStlKSsiLDAifSxuZSksIuKVqiI6KG9lPXt9LG9lWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwxIE0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxvZSksIuKVqyI6KHNlPXt9LHNlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwxLC41IE0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEifSxzZSksIuKVrCI6KGFlPXt9LGFlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwxIE0xLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwxIE0wLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwwIE0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIn0sYWUpLCLilbEiOihjZT17fSxjZVsxXT0iTTEsMCBMMCwxIixjZSksIuKVsiI6KGxlPXt9LGxlWzFdPSJNMCwwIEwxLDEiLGxlKSwi4pWzIjooaGU9e30saGVbMV09Ik0xLDAgTDAsMSBNMCwwIEwxLDEiLGhlKSwi4pW8IjoodWU9e30sdWVbMV09Ik0uNSwuNSBMMCwuNSIsdWVbM109Ik0uNSwuNSBMMSwuNSIsdWUpLCLilb0iOihmZT17fSxmZVsxXT0iTS41LC41IEwuNSwwIixmZVszXT0iTS41LC41IEwuNSwxIixmZSksIuKVviI6KF9lPXt9LF9lWzFdPSJNLjUsLjUgTDEsLjUiLF9lWzNdPSJNLjUsLjUgTDAsLjUiLF9lKSwi4pW/IjooZGU9e30sZGVbMV09Ik0uNSwuNSBMLjUsMSIsZGVbM109Ik0uNSwuNSBMLjUsMCIsZGUpLCLilI0iOihwZT17fSxwZVsxXT0iTS41LC41IEwuNSwxIixwZVszXT0iTS41LC41IEwxLC41IixwZSksIuKUjiI6KHZlPXt9LHZlWzFdPSJNLjUsLjUgTDEsLjUiLHZlWzNdPSJNLjUsLjUgTC41LDEiLHZlKSwi4pSRIjooeWU9e30seWVbMV09Ik0uNSwuNSBMLjUsMSIseWVbM109Ik0uNSwuNSBMMCwuNSIseWUpLCLilJIiOihnZT17fSxnZVsxXT0iTS41LC41IEwwLC41IixnZVszXT0iTS41LC41IEwuNSwxIixnZSksIuKUlSI6KG1lPXt9LG1lWzFdPSJNLjUsLjUgTC41LDAiLG1lWzNdPSJNLjUsLjUgTDEsLjUiLG1lKSwi4pSWIjooYmU9e30sYmVbMV09Ik0uNSwuNSBMMSwuNSIsYmVbM109Ik0uNSwuNSBMLjUsMCIsYmUpLCLilJkiOihTZT17fSxTZVsxXT0iTS41LC41IEwuNSwwIixTZVszXT0iTS41LC41IEwwLC41IixTZSksIuKUmiI6KENlPXt9LENlWzFdPSJNLjUsLjUgTDAsLjUiLENlWzNdPSJNLjUsLjUgTC41LDAiLENlKSwi4pSdIjood2U9e30sd2VbMV09Ik0uNSwwIEwuNSwxIix3ZVszXT0iTS41LC41IEwxLC41Iix3ZSksIuKUniI6KExlPXt9LExlWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixMZVszXT0iTS41LC41IEwuNSwwIixMZSksIuKUnyI6KEVlPXt9LEVlWzFdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLEVlWzNdPSJNLjUsLjUgTC41LDEiLEVlKSwi4pSgIjooeGU9e30seGVbMV09Ik0uNSwuNSBMMSwuNSIseGVbM109Ik0uNSwwIEwuNSwxIix4ZSksIuKUoSI6KFJlPXt9LFJlWzFdPSJNLjUsLjUgTC41LDEiLFJlWzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLFJlKSwi4pSiIjooa2U9e30sa2VbMV09Ik0uNSwuNSBMLjUsMCIsa2VbM109Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLGtlKSwi4pSlIjooTWU9e30sTWVbMV09Ik0uNSwwIEwuNSwxIixNZVszXT0iTS41LC41IEwwLC41IixNZSksIuKUpiI6KEFlPXt9LEFlWzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLEFlWzNdPSJNLjUsLjUgTC41LDAiLEFlKSwi4pSnIjooT2U9e30sT2VbMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIsT2VbM109Ik0uNSwuNSBMLjUsMSIsT2UpLCLilKgiOihEZT17fSxEZVsxXT0iTS41LC41IEwwLC41IixEZVszXT0iTS41LDAgTC41LDEiLERlKSwi4pSpIjooVGU9e30sVGVbMV09Ik0uNSwuNSBMLjUsMSIsVGVbM109Ik0uNSwwIEwuNSwuNSBMMCwuNSIsVGUpLCLilKoiOihCZT17fSxCZVsxXT0iTS41LC41IEwuNSwwIixCZVszXT0iTTAsLjUgTC41LC41IEwuNSwxIixCZSksIuKUrSI6KFBlPXt9LFBlWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixQZVszXT0iTS41LC41IEwwLC41IixQZSksIuKUriI6KEllPXt9LEllWzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLEllWzNdPSJNLjUsLjUgTDEsLjUiLEllKSwi4pSvIjooSGU9e30sSGVbMV09Ik0uNSwuNSBMLjUsMSIsSGVbM109Ik0wLC41IEwxLC41IixIZSksIuKUsCI6KGplPXt9LGplWzFdPSJNMCwuNSBMMSwuNSIsamVbM109Ik0uNSwuNSBMLjUsMSIsamUpLCLilLEiOihGZT17fSxGZVsxXT0iTS41LC41IEwxLC41IixGZVszXT0iTTAsLjUgTC41LC41IEwuNSwxIixGZSksIuKUsiI6KFdlPXt9LFdlWzFdPSJNLjUsLjUgTDAsLjUiLFdlWzNdPSJNMC41LDEgTC41LC41IEwxLC41IixXZSksIuKUtSI6KFVlPXt9LFVlWzFdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLFVlWzNdPSJNLjUsLjUgTDAsLjUiLFVlKSwi4pS2IjoocWU9e30scWVbMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIscWVbM109Ik0uNSwuNSBMMSwuNSIscWUpLCLilLciOihOZT17fSxOZVsxXT0iTS41LC41IEwuNSwwIixOZVszXT0iTTAsLjUgTDEsLjUiLE5lKSwi4pS4IjooemU9e30semVbMV09Ik0wLC41IEwxLC41Iix6ZVszXT0iTS41LC41IEwuNSwwIix6ZSksIuKUuSI6KEtlPXt9LEtlWzFdPSJNLjUsLjUgTDEsLjUiLEtlWzNdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLEtlKSwi4pS6IjooR2U9e30sR2VbMV09Ik0uNSwuNSBMMCwuNSIsR2VbM109Ik0uNSwwIEwuNSwuNSBMMSwuNSIsR2UpLCLilL0iOihWZT17fSxWZVsxXT0iTS41LDAgTC41LDEgTS41LC41IEwxLC41IixWZVszXT0iTS41LC41IEwwLC41IixWZSksIuKUviI6KFhlPXt9LFhlWzFdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDAsLjUiLFhlWzNdPSJNLjUsLjUgTDEsLjUiLFhlKSwi4pS/IjooWmU9e30sWmVbMV09Ik0uNSwwIEwuNSwxIixaZVszXT0iTTAsLjUgTDEsLjUiLFplKSwi4pWAIjooWWU9e30sWWVbMV09Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMSIsWWVbM109Ik0uNSwuNSBMLjUsMCIsWWUpLCLilYEiOihKZT17fSxKZVsxXT0iTS41LC41IEwuNSwwIE0wLC41IEwxLC41IixKZVszXT0iTS41LC41IEwuNSwxIixKZSksIuKVgiI6KCRlPXt9LCRlWzFdPSJNMCwuNSBMMSwuNSIsJGVbM109Ik0uNSwwIEwuNSwxIiwkZSksIuKVgyI6KFFlPXt9LFFlWzFdPSJNMC41LDEgTC41LC41IEwxLC41IixRZVszXT0iTS41LDAgTC41LC41IEwwLC41IixRZSksIuKVhCI6KGV0PXt9LGV0WzFdPSJNMCwuNSBMLjUsLjUgTC41LDEiLGV0WzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLGV0KSwi4pWFIjoodHQ9e30sdHRbMV09Ik0uNSwwIEwuNSwuNSBMMSwuNSIsdHRbM109Ik0wLC41IEwuNSwuNSBMLjUsMSIsdHQpLCLilYYiOihydD17fSxydFsxXT0iTS41LDAgTC41LC41IEwwLC41IixydFszXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIscnQpLCLilYciOihpdD17fSxpdFsxXT0iTS41LC41IEwuNSwxIixpdFszXT0iTS41LC41IEwuNSwwIE0wLC41IEwxLC41IixpdCksIuKViCI6KG50PXt9LG50WzFdPSJNLjUsLjUgTC41LDAiLG50WzNdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDEiLG50KSwi4pWJIjoob3Q9e30sb3RbMV09Ik0uNSwuNSBMMSwuNSIsb3RbM109Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMCwuNSIsb3QpLCLilYoiOihzdD17fSxzdFsxXT0iTS41LC41IEwwLC41IixzdFszXT0iTS41LDAgTC41LDEgTS41LC41IEwxLC41IixzdCksIuKVjCI6KGF0PXt9LGF0WzFdPSJNLjEsLjUgTC40LC41IE0uNiwuNSBMLjksLjUiLGF0KSwi4pWNIjooY3Q9e30sY3RbM109Ik0uMSwuNSBMLjQsLjUgTS42LC41IEwuOSwuNSIsY3QpLCLilIQiOihsdD17fSxsdFsxXT0iTS4wNjY3LC41IEwuMjY2NywuNSBNLjQsLjUgTC42LC41IE0uNzMzMywuNSBMLjkzMzMsLjUiLGx0KSwi4pSFIjooaHQ9e30saHRbM109Ik0uMDY2NywuNSBMLjI2NjcsLjUgTS40LC41IEwuNiwuNSBNLjczMzMsLjUgTC45MzMzLC41IixodCksIuKUiCI6KHV0PXt9LHV0WzFdPSJNLjA1LC41IEwuMiwuNSBNLjMsLjUgTC40NSwuNSBNLjU1LC41IEwuNywuNSBNLjgsLjUgTC45NSwuNSIsdXQpLCLilIkiOihmdD17fSxmdFszXT0iTS4wNSwuNSBMLjIsLjUgTS4zLC41IEwuNDUsLjUgTS41NSwuNSBMLjcsLjUgTS44LC41IEwuOTUsLjUiLGZ0KSwi4pWOIjooX3Q9e30sX3RbMV09Ik0uNSwuMSBMLjUsLjQgTS41LC42IEwuNSwuOSIsX3QpLCLilY8iOihkdD17fSxkdFszXT0iTS41LC4xIEwuNSwuNCBNLjUsLjYgTC41LC45IixkdCksIuKUhiI6KHB0PXt9LHB0WzFdPSJNLjUsLjA2NjcgTC41LC4yNjY3IE0uNSwuNCBMLjUsLjYgTS41LC43MzMzIEwuNSwuOTMzMyIscHQpLCLilIciOih2dD17fSx2dFszXT0iTS41LC4wNjY3IEwuNSwuMjY2NyBNLjUsLjQgTC41LC42IE0uNSwuNzMzMyBMLjUsLjkzMzMiLHZ0KSwi4pSKIjooeXQ9e30seXRbMV09Ik0uNSwuMDUgTC41LC4yIE0uNSwuMyBMLjUsLjQ1IEwuNSwuNTUgTS41LC43IEwuNSwuOTUiLHl0KSwi4pSLIjooZ3Q9e30sZ3RbM109Ik0uNSwuMDUgTC41LC4yIE0uNSwuMyBMLjUsLjQ1IEwuNSwuNTUgTS41LC43IEwuNSwuOTUiLGd0KSwi4pWtIjoobXQ9e30sbXRbMV09IkMuNSwxLC41LC41LDEsLjUiLG10KSwi4pWuIjooYnQ9e30sYnRbMV09IkMuNSwxLC41LC41LDAsLjUiLGJ0KSwi4pWvIjooU3Q9e30sU3RbMV09IkMuNSwwLC41LC41LDAsLjUiLFN0KSwi4pWwIjooQ3Q9e30sQ3RbMV09IkMuNSwwLC41LC41LDEsLjUiLEN0KX0sdC5wb3dlcmxpbmVEZWZpbml0aW9ucz17Iu6CsCI6e2Q6Ik0wLDAgTDEsLjUgTDAsMSIsdHlwZTowfSwi7oKxIjp7ZDoiTTAsMCBMMSwuNSBMMCwxIix0eXBlOjEsaG9yaXpvbnRhbFBhZGRpbmc6LjV9LCLugrIiOntkOiJNMSwwIEwwLC41IEwxLDEiLHR5cGU6MH0sIu6CsyI6e2Q6Ik0xLDAgTDAsLjUgTDEsMSIsdHlwZToxLGhvcml6b250YWxQYWRkaW5nOi41fX0sdC50cnlEcmF3Q3VzdG9tQ2hhcj1mdW5jdGlvbihlLHIsaSxuLG8scyl7dmFyIGE9dC5ibG9ja0VsZW1lbnREZWZpbml0aW9uc1tyXTtpZihhKXJldHVybiBmdW5jdGlvbihlLHQscixpLG4sbyl7Zm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspe3ZhciBhPXRbc10sYz1uLzgsbD1vLzg7ZS5maWxsUmVjdChyK2EueCpjLGkrYS55KmwsYS53KmMsYS5oKmwpfX0oZSxhLGksbixvLHMpLCEwO3ZhciBjPXh0W3JdO2lmKGMpcmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGksbixvKXt2YXIgcyxhPVJ0LmdldCh0KTthfHwoYT1uZXcgTWFwLFJ0LnNldCh0LGEpKTt2YXIgYz1lLmZpbGxTdHlsZTtpZigic3RyaW5nIiE9dHlwZW9mIGMpdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpbGxTdHlsZSB0eXBlICInK2MrJyInKTt2YXIgbD1hLmdldChjKTtpZighbCl7dmFyIGg9dFswXS5sZW5ndGgsdT10Lmxlbmd0aCxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO2Yud2lkdGg9aCxmLmhlaWdodD11O3ZhciBfPSgwLEV0LnRocm93SWZGYWxzeSkoZi5nZXRDb250ZXh0KCIyZCIpKSxkPW5ldyBJbWFnZURhdGEoaCx1KSxwPXZvaWQgMCx2PXZvaWQgMCx5PXZvaWQgMCxnPXZvaWQgMDtpZihjLnN0YXJ0c1dpdGgoIiMiKSlwPXBhcnNlSW50KGMuc2xpY2UoMSwzKSwxNiksdj1wYXJzZUludChjLnNsaWNlKDMsNSksMTYpLHk9cGFyc2VJbnQoYy5zbGljZSg1LDcpLDE2KSxnPWMubGVuZ3RoPjcmJnBhcnNlSW50KGMuc2xpY2UoNyw5KSwxNil8fDE7ZWxzZXtpZighYy5zdGFydHNXaXRoKCJyZ2JhIikpdGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGZpbGxTdHlsZSBjb2xvciBmb3JtYXQgIicrYysnIiB3aGVuIGRyYXdpbmcgcGF0dGVybiBnbHlwaCcpO3A9KHM9d3QoYy5zdWJzdHJpbmcoNSxjLmxlbmd0aC0xKS5zcGxpdCgiLCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZSl9KSksNCkpWzBdLHY9c1sxXSx5PXNbMl0sZz1zWzNdfWZvcih2YXIgbT0wO208dTttKyspZm9yKHZhciBiPTA7YjxoO2IrKylkLmRhdGFbNCoobSpoK2IpXT1wLGQuZGF0YVs0KihtKmgrYikrMV09dixkLmRhdGFbNCoobSpoK2IpKzJdPXksZC5kYXRhWzQqKG0qaCtiKSszXT10W21dW2JdKigyNTUqZyk7Xy5wdXRJbWFnZURhdGEoZCwwLDApLGw9KDAsRXQudGhyb3dJZkZhbHN5KShlLmNyZWF0ZVBhdHRlcm4oZixudWxsKSksYS5zZXQoYyxsKX1lLmZpbGxTdHlsZT1sLGUuZmlsbFJlY3QocixpLG4sbyl9KGUsYyxpLG4sbyxzKSwhMDt2YXIgbD10LmJveERyYXdpbmdEZWZpbml0aW9uc1tyXTtpZihsKXJldHVybiBmdW5jdGlvbihlLHQscixpLG4sbyl7dmFyIHMsYSxjLGw7ZS5zdHJva2VTdHlsZT1lLmZpbGxTdHlsZTt0cnl7Zm9yKHZhciBoPUx0KE9iamVjdC5lbnRyaWVzKHQpKSx1PWgubmV4dCgpOyF1LmRvbmU7dT1oLm5leHQoKSl7dmFyIGY9d3QodS52YWx1ZSwyKSxfPWZbMF0sZD1mWzFdO2UuYmVnaW5QYXRoKCksZS5saW5lV2lkdGg9d2luZG93LmRldmljZVBpeGVsUmF0aW8qTnVtYmVyLnBhcnNlSW50KF8pO3ZhciBwPXZvaWQgMDtwPSJmdW5jdGlvbiI9PXR5cGVvZiBkP2QoLjE1LC4xNS9vKm4pOmQ7dHJ5e2Zvcih2YXIgdj0oYz12b2lkIDAsTHQocC5zcGxpdCgiICIpKSkseT12Lm5leHQoKTsheS5kb25lO3k9di5uZXh0KCkpe3ZhciBnPXkudmFsdWUsbT1nWzBdLGI9TXRbbV07aWYoYil7dmFyIFM9Zy5zdWJzdHJpbmcoMSkuc3BsaXQoIiwiKTtTWzBdJiZTWzFdJiZiKGUsQXQoUyxuLG8scixpKSl9ZWxzZSBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBkcmF3aW5nIGluc3RydWN0aW9ucyBmb3IgIicrbSsnIicpfX1jYXRjaChlKXtjPXtlcnJvcjplfX1maW5hbGx5e3RyeXt5JiYheS5kb25lJiYobD12LnJldHVybikmJmwuY2FsbCh2KX1maW5hbGx5e2lmKGMpdGhyb3cgYy5lcnJvcn19ZS5zdHJva2UoKSxlLmNsb3NlUGF0aCgpfX1jYXRjaChlKXtzPXtlcnJvcjplfX1maW5hbGx5e3RyeXt1JiYhdS5kb25lJiYoYT1oLnJldHVybikmJmEuY2FsbChoKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19fShlLGwsaSxuLG8scyksITA7dmFyIGg9dC5wb3dlcmxpbmVEZWZpbml0aW9uc1tyXTtyZXR1cm4hIWgmJihmdW5jdGlvbihlLHQscixpLG4sbyl7dmFyIHMsYTtlLmJlZ2luUGF0aCgpLGUubGluZVdpZHRoPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO3RyeXtmb3IodmFyIGM9THQodC5kLnNwbGl0KCIgIikpLGw9Yy5uZXh0KCk7IWwuZG9uZTtsPWMubmV4dCgpKXt2YXIgaD1sLnZhbHVlLHU9aFswXSxmPU10W3VdO2lmKGYpe3ZhciBfPWguc3Vic3RyaW5nKDEpLnNwbGl0KCIsIik7X1swXSYmX1sxXSYmZihlLEF0KF8sbixvLHIsaSx0Lmhvcml6b250YWxQYWRkaW5nKSl9ZWxzZSBjb25zb2xlLmVycm9yKCdDb3VsZCBub3QgZmluZCBkcmF3aW5nIGluc3RydWN0aW9ucyBmb3IgIicrdSsnIicpfX1jYXRjaChlKXtzPXtlcnJvcjplfX1maW5hbGx5e3RyeXtsJiYhbC5kb25lJiYoYT1jLnJldHVybikmJmEuY2FsbChjKX1maW5hbGx5e2lmKHMpdGhyb3cgcy5lcnJvcn19MT09PXQudHlwZT8oZS5zdHJva2VTdHlsZT1lLmZpbGxTdHlsZSxlLnN0cm9rZSgpKTplLmZpbGwoKSxlLmNsb3NlUGF0aCgpfShlLGgsaSxuLG8scyksITApfTt2YXIgUnQ9bmV3IE1hcDtmdW5jdGlvbiBrdChlLHQscil7cmV0dXJuIHZvaWQgMD09PXImJihyPTApLE1hdGgubWF4KE1hdGgubWluKGUsdCkscil9dmFyIE10PXtDOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuYmV6aWVyQ3VydmVUbyh0WzBdLHRbMV0sdFsyXSx0WzNdLHRbNF0sdFs1XSl9LEw6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5saW5lVG8odFswXSx0WzFdKX0sTTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm1vdmVUbyh0WzBdLHRbMV0pfX07ZnVuY3Rpb24gQXQoZSx0LHIsaSxuLG8pe3ZvaWQgMD09PW8mJihvPTApO3ZhciBzPWUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChlKXx8cGFyc2VJbnQoZSl9KSk7aWYocy5sZW5ndGg8Mil0aHJvdyBuZXcgRXJyb3IoIlRvbyBmZXcgYXJndW1lbnRzIGZvciBpbnN0cnVjdGlvbiIpO2Zvcih2YXIgYT0wO2E8cy5sZW5ndGg7YSs9MilzW2FdKj10LTIqbyp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywwIT09c1thXSYmKHNbYV09a3QoTWF0aC5yb3VuZChzW2FdKy41KS0uNSx0LDApKSxzW2FdKz1pK28qd2luZG93LmRldmljZVBpeGVsUmF0aW87Zm9yKHZhciBjPTE7YzxzLmxlbmd0aDtjKz0yKXNbY10qPXIsMCE9PXNbY10mJihzW2NdPWt0KE1hdGgucm91bmQoc1tjXSsuNSktLjUsciwwKSksc1tjXSs9bjtyZXR1cm4gc319LDM3MDA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5HcmlkQ2FjaGU9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuY2FjaGU9W119cmV0dXJuIGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wO3I8ZTtyKyspe3RoaXMuY2FjaGUubGVuZ3RoPD1yJiZ0aGlzLmNhY2hlLnB1c2goW10pO2Zvcih2YXIgaT10aGlzLmNhY2hlW3JdLmxlbmd0aDtpPHQ7aSsrKXRoaXMuY2FjaGVbcl0ucHVzaCh2b2lkIDApO3RoaXMuY2FjaGVbcl0ubGVuZ3RoPXR9dGhpcy5jYWNoZS5sZW5ndGg9ZX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtmb3IodmFyIGU9MDtlPHRoaXMuY2FjaGUubGVuZ3RoO2UrKylmb3IodmFyIHQ9MDt0PHRoaXMuY2FjaGVbZV0ubGVuZ3RoO3QrKyl0aGlzLmNhY2hlW2VdW3RdPXZvaWQgMH0sZX0oKTt0LkdyaWRDYWNoZT1yfSw1MDk4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkxpbmtSZW5kZXJMYXllcj12b2lkIDA7dmFyIGE9cigxNTQ2KSxjPXIoODgwMyksbD1yKDIwNDApLGg9cigyNTg1KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxjLGwpe3ZhciBoPWUuY2FsbCh0aGlzLHQsImxpbmsiLHIsITAsaSxuLGEsYyxsKXx8dGhpcztyZXR1cm4gby5vblNob3dMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fb25TaG93TGlua1VuZGVybGluZShlKX0pKSxvLm9uSGlkZUxpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9vbkhpZGVMaW5rVW5kZXJsaW5lKGUpfSkpLHMub25TaG93TGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX29uU2hvd0xpbmtVbmRlcmxpbmUoZSl9KSkscy5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fb25IaWRlTGlua1VuZGVybGluZShlKX0pKSxofXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCksdGhpcy5fc3RhdGU9dm9pZCAwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2NsZWFyQ3VycmVudExpbmsoKX0sdC5wcm90b3R5cGUuX2NsZWFyQ3VycmVudExpbms9ZnVuY3Rpb24oKXtpZih0aGlzLl9zdGF0ZSl7dGhpcy5fY2xlYXJDZWxscyh0aGlzLl9zdGF0ZS54MSx0aGlzLl9zdGF0ZS55MSx0aGlzLl9zdGF0ZS5jb2xzLXRoaXMuX3N0YXRlLngxLDEpO3ZhciBlPXRoaXMuX3N0YXRlLnkyLXRoaXMuX3N0YXRlLnkxLTE7ZT4wJiZ0aGlzLl9jbGVhckNlbGxzKDAsdGhpcy5fc3RhdGUueTErMSx0aGlzLl9zdGF0ZS5jb2xzLGUpLHRoaXMuX2NsZWFyQ2VsbHMoMCx0aGlzLl9zdGF0ZS55Mix0aGlzLl9zdGF0ZS54MiwxKSx0aGlzLl9zdGF0ZT12b2lkIDB9fSx0LnByb3RvdHlwZS5fb25TaG93TGlua1VuZGVybGluZT1mdW5jdGlvbihlKXtpZihlLmZnPT09Yy5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SP3RoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzOmUuZmcmJigwLGwuaXMyNTZDb2xvcikoZS5mZyk/dGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYW5zaVtlLmZnXS5jc3M6dGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3MsZS55MT09PWUueTIpdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsZS55MSxlLngyLWUueDEpO2Vsc2V7dGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKGUueDEsZS55MSxlLmNvbHMtZS54MSk7Zm9yKHZhciB0PWUueTErMTt0PGUueTI7dCsrKXRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLHQsZS5jb2xzKTt0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoMCxlLnkyLGUueDIpfXRoaXMuX3N0YXRlPWV9LHQucHJvdG90eXBlLl9vbkhpZGVMaW5rVW5kZXJsaW5lPWZ1bmN0aW9uKGUpe3RoaXMuX2NsZWFyQ3VycmVudExpbmsoKX0sbyhbcyg2LGguSUJ1ZmZlclNlcnZpY2UpLHMoNyxoLklPcHRpb25zU2VydmljZSkscyg4LGguSURlY29yYXRpb25TZXJ2aWNlKV0sdCl9KGEuQmFzZVJlbmRlckxheWVyKTt0LkxpbmtSZW5kZXJMYXllcj11fSwzNTI1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlJlbmRlcmVyPXZvaWQgMDt2YXIgYz1yKDk1OTYpLGw9cig0MTQ5KSxoPXIoMjUxMiksdT1yKDUwOTgpLGY9cig4NDQpLF89cig0NzI1KSxkPXIoMjU4NSkscD1yKDE0MjApLHY9cig4NDYwKSx5PTEsZz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsZil7dmFyIF89ZS5jYWxsKHRoaXMpfHx0aGlzO18uX2NvbG9ycz10LF8uX3NjcmVlbkVsZW1lbnQ9cixfLl9idWZmZXJTZXJ2aWNlPXMsXy5fY2hhclNpemVTZXJ2aWNlPWEsXy5fb3B0aW9uc1NlcnZpY2U9ZixfLl9pZD15KyssXy5fb25SZXF1ZXN0UmVkcmF3PW5ldyB2LkV2ZW50RW1pdHRlcjt2YXIgZD1fLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5O3JldHVybiBfLl9yZW5kZXJMYXllcnM9W28uY3JlYXRlSW5zdGFuY2UoYy5UZXh0UmVuZGVyTGF5ZXIsXy5fc2NyZWVuRWxlbWVudCwwLF8uX2NvbG9ycyxkLF8uX2lkKSxvLmNyZWF0ZUluc3RhbmNlKGwuU2VsZWN0aW9uUmVuZGVyTGF5ZXIsXy5fc2NyZWVuRWxlbWVudCwxLF8uX2NvbG9ycyxfLl9pZCksby5jcmVhdGVJbnN0YW5jZSh1LkxpbmtSZW5kZXJMYXllcixfLl9zY3JlZW5FbGVtZW50LDIsXy5fY29sb3JzLF8uX2lkLGksbiksby5jcmVhdGVJbnN0YW5jZShoLkN1cnNvclJlbmRlckxheWVyLF8uX3NjcmVlbkVsZW1lbnQsMyxfLl9jb2xvcnMsXy5faWQsXy5fb25SZXF1ZXN0UmVkcmF3KV0sXy5kaW1lbnNpb25zPXtzY2FsZWRDaGFyV2lkdGg6MCxzY2FsZWRDaGFySGVpZ2h0OjAsc2NhbGVkQ2VsbFdpZHRoOjAsc2NhbGVkQ2VsbEhlaWdodDowLHNjYWxlZENoYXJMZWZ0OjAsc2NhbGVkQ2hhclRvcDowLHNjYWxlZENhbnZhc1dpZHRoOjAsc2NhbGVkQ2FudmFzSGVpZ2h0OjAsY2FudmFzV2lkdGg6MCxjYW52YXNIZWlnaHQ6MCxhY3R1YWxDZWxsV2lkdGg6MCxhY3R1YWxDZWxsSGVpZ2h0OjB9LF8uX2RldmljZVBpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW8sXy5fdXBkYXRlRGltZW5zaW9ucygpLF8ub25PcHRpb25zQ2hhbmdlZCgpLF99cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlZHJhdyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RSZWRyYXcuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciB0LHI7dHJ5e2Zvcih2YXIgaT1hKHRoaXMuX3JlbmRlckxheWVycyksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpbi52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSwoMCxwLnJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlKSh0aGlzLl9pZCl9LHQucHJvdG90eXBlLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZT1mdW5jdGlvbigpe3RoaXMuX2RldmljZVBpeGVsUmF0aW8hPT13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyYmKHRoaXMuX2RldmljZVBpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5vblJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSl9LHQucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt2YXIgdCxyO3RoaXMuX2NvbG9ycz1lO3RyeXtmb3IodmFyIGk9YSh0aGlzLl9yZW5kZXJMYXllcnMpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKXt2YXIgbz1uLnZhbHVlO28uc2V0Q29sb3JzKHRoaXMuX2NvbG9ycyksby5yZXNldCgpfX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19fSx0LnByb3RvdHlwZS5vblJlc2l6ZT1mdW5jdGlvbihlLHQpe3ZhciByLGk7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpO3RyeXtmb3IodmFyIG49YSh0aGlzLl9yZW5kZXJMYXllcnMpLG89bi5uZXh0KCk7IW8uZG9uZTtvPW4ubmV4dCgpKW8udmFsdWUucmVzaXplKHRoaXMuZGltZW5zaW9ucyl9Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoKyJweCIsdGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS5oZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCsicHgifSx0LnByb3RvdHlwZS5vbkNoYXJTaXplQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMub25SZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyl9LHQucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub25CbHVyKCl9KSl9LHQucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9uRm9jdXMoKX0pKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihpKXtyZXR1cm4gaS5vblNlbGVjdGlvbkNoYW5nZWQoZSx0LHIpfSkpLHRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kJiZ0aGlzLl9vblJlcXVlc3RSZWRyYXcuZmlyZSh7c3RhcnQ6MCxlbmQ6dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTF9KX0sdC5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihlKXtyZXR1cm4gZS5vbkN1cnNvck1vdmUoKX0pKX0sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub25PcHRpb25zQ2hhbmdlZCgpfSkpfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVzZXQoKX0pKX0sdC5wcm90b3R5cGUuX3J1bk9wZXJhdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxyO3RyeXtmb3IodmFyIGk9YSh0aGlzLl9yZW5kZXJMYXllcnMpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKWUobi52YWx1ZSl9Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fX0sdC5wcm90b3R5cGUucmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe3ZhciByLGk7dHJ5e2Zvcih2YXIgbj1hKHRoaXMuX3JlbmRlckxheWVycyksbz1uLm5leHQoKTshby5kb25lO289bi5uZXh0KCkpby52YWx1ZS5vbkdyaWRDaGFuZ2VkKGUsdCl9Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fX0sdC5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9YSh0aGlzLl9yZW5kZXJMYXllcnMpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKWkudmFsdWUuY2xlYXJUZXh0dXJlQXRsYXMoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSx0LnByb3RvdHlwZS5fdXBkYXRlRGltZW5zaW9ucz1mdW5jdGlvbigpe3RoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUmJih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoPU1hdGguZmxvb3IodGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodD1NYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ9TWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmVIZWlnaHQpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wPTE9PT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmVIZWlnaHQ/MDpNYXRoLnJvdW5kKCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodC10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCkvMiksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aD10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoK01hdGgucm91bmQodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sZXR0ZXJTcGFjaW5nKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQ9TWF0aC5mbG9vcih0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxldHRlclNwYWNpbmcvMiksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodD10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MqdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQsdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyp0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0L3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGg9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGgvd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQvdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9LG8oW3MoNCxkLklJbnN0YW50aWF0aW9uU2VydmljZSkscyg1LGQuSUJ1ZmZlclNlcnZpY2UpLHMoNixfLklDaGFyU2l6ZVNlcnZpY2UpLHMoNyxkLklPcHRpb25zU2VydmljZSldLHQpfShmLkRpc3Bvc2FibGUpO3QuUmVuZGVyZXI9Z30sMTc1MjooZSx0KT0+e2Z1bmN0aW9uIHIoZSl7cmV0dXJuIDU3NTA4PD1lJiZlPD01NzU1OH1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5leGNsdWRlRnJvbUNvbnRyYXN0UmF0aW9EZW1hbmRzPXQuaXNQb3dlcmxpbmVHbHlwaD10LnRocm93SWZGYWxzeT12b2lkIDAsdC50aHJvd0lmRmFsc3k9ZnVuY3Rpb24oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJ2YWx1ZSBtdXN0IG5vdCBiZSBmYWxzeSIpO3JldHVybiBlfSx0LmlzUG93ZXJsaW5lR2x5cGg9cix0LmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHM9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZSl8fGZ1bmN0aW9uKGUpe3JldHVybiA5NDcyPD1lJiZlPD05NjMxfShlKX19LDQxNDk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uUmVuZGVyTGF5ZXI9dm9pZCAwO3ZhciBhPXIoMTU0NiksYz1yKDI1ODUpLGw9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhKXt2YXIgYz1lLmNhbGwodGhpcyx0LCJzZWxlY3Rpb24iLHIsITAsaSxuLG8scyxhKXx8dGhpcztyZXR1cm4gYy5fY2xlYXJTdGF0ZSgpLGN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5fY2xlYXJTdGF0ZT1mdW5jdGlvbigpe3RoaXMuX3N0YXRlPXtzdGFydDp2b2lkIDAsZW5kOnZvaWQgMCxjb2x1bW5TZWxlY3RNb2RlOnZvaWQgMCx5ZGlzcDp2b2lkIDB9fSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0KSx0aGlzLl9jbGVhclN0YXRlKCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUuc3RhcnQmJnRoaXMuX3N0YXRlLmVuZCYmKHRoaXMuX2NsZWFyU3RhdGUoKSx0aGlzLl9jbGVhckFsbCgpKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKHQscixpKXtpZihlLnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQuY2FsbCh0aGlzLHQscixpKSx0aGlzLl9kaWRTdGF0ZUNoYW5nZSh0LHIsaSx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCkpaWYodGhpcy5fY2xlYXJBbGwoKSx0JiZyKXt2YXIgbj10WzFdLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG89clsxXS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxzPU1hdGgubWF4KG4sMCksYT1NYXRoLm1pbihvLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKTtpZihzPj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N8fGE8MCl0aGlzLl9zdGF0ZS55ZGlzcD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtlbHNle2lmKHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50LmNzcyxpKXt2YXIgYz10WzBdLGw9clswXS1jLGg9YS1zKzE7dGhpcy5fZmlsbENlbGxzKGMscyxsLGgpfWVsc2V7Yz1uPT09cz90WzBdOjA7dmFyIHU9cz09PW8/clswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7dGhpcy5fZmlsbENlbGxzKGMscyx1LWMsMSk7dmFyIGY9TWF0aC5tYXgoYS1zLTEsMCk7aWYodGhpcy5fZmlsbENlbGxzKDAscysxLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxmKSxzIT09YSl7dmFyIF89bz09PWE/clswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7dGhpcy5fZmlsbENlbGxzKDAsYSxfLDEpfX10aGlzLl9zdGF0ZS5zdGFydD1bdFswXSx0WzFdXSx0aGlzLl9zdGF0ZS5lbmQ9W3JbMF0sclsxXV0sdGhpcy5fc3RhdGUuY29sdW1uU2VsZWN0TW9kZT1pLHRoaXMuX3N0YXRlLnlkaXNwPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwfX1lbHNlIHRoaXMuX2NsZWFyU3RhdGUoKX0sdC5wcm90b3R5cGUuX2RpZFN0YXRlQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiF0aGlzLl9hcmVDb29yZGluYXRlc0VxdWFsKGUsdGhpcy5fc3RhdGUuc3RhcnQpfHwhdGhpcy5fYXJlQ29vcmRpbmF0ZXNFcXVhbCh0LHRoaXMuX3N0YXRlLmVuZCl8fHIhPT10aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlfHxpIT09dGhpcy5fc3RhdGUueWRpc3B9LHQucHJvdG90eXBlLl9hcmVDb29yZGluYXRlc0VxdWFsPWZ1bmN0aW9uKGUsdCl7cmV0dXJuISghZXx8IXQpJiZlWzBdPT09dFswXSYmZVsxXT09PXRbMV19LG8oW3MoNCxjLklCdWZmZXJTZXJ2aWNlKSxzKDUsYy5JT3B0aW9uc1NlcnZpY2UpLHMoNixjLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShhLkJhc2VSZW5kZXJMYXllcik7dC5TZWxlY3Rpb25SZW5kZXJMYXllcj1sfSw5NTk2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlRleHRSZW5kZXJMYXllcj12b2lkIDA7dmFyIGM9cigzNzAwKSxsPXIoMTU0NiksaD1yKDM3MzQpLHU9cig2NDMpLGY9cig1MTEpLF89cigyNTg1KSxkPXIoNDcyNSkscD1yKDQyNjkpLHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGwsaCl7dmFyIHU9ZS5jYWxsKHRoaXMsdCwidGV4dCIscixuLGksbyxzLGEsaCl8fHRoaXM7cmV0dXJuIHUuX2NoYXJhY3RlckpvaW5lclNlcnZpY2U9bCx1Ll9jaGFyYWN0ZXJXaWR0aD0wLHUuX2NoYXJhY3RlckZvbnQ9IiIsdS5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlPXt9LHUuX3dvcmtDZWxsPW5ldyBmLkNlbGxEYXRhLHUuX3N0YXRlPW5ldyBjLkdyaWRDYWNoZSx1fXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCk7dmFyIHI9dGhpcy5fZ2V0Rm9udCghMSwhMSk7dGhpcy5fY2hhcmFjdGVyV2lkdGg9PT10LnNjYWxlZENoYXJXaWR0aCYmdGhpcy5fY2hhcmFjdGVyRm9udD09PXJ8fCh0aGlzLl9jaGFyYWN0ZXJXaWR0aD10LnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jaGFyYWN0ZXJGb250PXIsdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlPXt9KSx0aGlzLl9zdGF0ZS5jbGVhcigpLHRoaXMuX3N0YXRlLnJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZS5jbGVhcigpLHRoaXMuX2NsZWFyQWxsKCl9LHQucHJvdG90eXBlLl9mb3JFYWNoQ2VsbD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPWU7aTw9dDtpKyspZm9yKHZhciBuPWkrdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbz10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQobikscz10aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmdldEpvaW5lZENoYXJhY3RlcnMobiksYT0wO2E8dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2ErKyl7by5sb2FkQ2VsbChhLHRoaXMuX3dvcmtDZWxsKTt2YXIgYz10aGlzLl93b3JrQ2VsbCxsPSExLGg9YTtpZigwIT09Yy5nZXRXaWR0aCgpKXtpZihzLmxlbmd0aD4wJiZhPT09c1swXVswXSl7bD0hMDt2YXIgZj1zLnNoaWZ0KCk7Yz1uZXcgcC5Kb2luZWRDZWxsRGF0YSh0aGlzLl93b3JrQ2VsbCxvLnRyYW5zbGF0ZVRvU3RyaW5nKCEwLGZbMF0sZlsxXSksZlsxXS1mWzBdKSxoPWZbMV0tMX0hbCYmdGhpcy5faXNPdmVybGFwcGluZyhjKSYmaDxvLmxlbmd0aC0xJiZvLmdldENvZGVQb2ludChoKzEpPT09dS5OVUxMX0NFTExfQ09ERSYmKGMuY29udGVudCY9LTEyNTgyOTEzLGMuY29udGVudHw9Mjw8MjIpLHIoYyxhLGkpLGE9aH19fSx0LnByb3RvdHlwZS5fZHJhd0JhY2tncm91bmQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9dGhpcy5fY3R4LG49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLG89MCxzPTAsYz1udWxsO2kuc2F2ZSgpLHRoaXMuX2ZvckVhY2hDZWxsKGUsdCwoZnVuY3Rpb24oZSx0LGwpe3ZhciB1LGYsXz1udWxsO2UuaXNJbnZlcnNlKCk/Xz1lLmlzRmdEZWZhdWx0KCk/ci5fY29sb3JzLmZvcmVncm91bmQuY3NzOmUuaXNGZ1JHQigpPyJyZ2IoIitoLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEZnQ29sb3IoKSkuam9pbigiLCIpKyIpIjpyLl9jb2xvcnMuYW5zaVtlLmdldEZnQ29sb3IoKV0uY3NzOmUuaXNCZ1JHQigpP189InJnYigiK2guQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0QmdDb2xvcigpKS5qb2luKCIsIikrIikiOmUuaXNCZ1BhbGV0dGUoKSYmKF89ci5fY29sb3JzLmFuc2lbZS5nZXRCZ0NvbG9yKCldLmNzcyk7dmFyIGQ9ITE7dHJ5e2Zvcih2YXIgcD1hKHIuX2RlY29yYXRpb25TZXJ2aWNlLmdldERlY29yYXRpb25zQXRDZWxsKHQsci5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ArbCkpLHY9cC5uZXh0KCk7IXYuZG9uZTt2PXAubmV4dCgpKXt2YXIgeT12LnZhbHVlOyJ0b3AiIT09eS5vcHRpb25zLmxheWVyJiZkfHwoeS5iYWNrZ3JvdW5kQ29sb3JSR0ImJihfPXkuYmFja2dyb3VuZENvbG9yUkdCLmNzcyksZD0idG9wIj09PXkub3B0aW9ucy5sYXllcil9fWNhdGNoKGUpe3U9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e3YmJiF2LmRvbmUmJihmPXAucmV0dXJuKSYmZi5jYWxsKHApfWZpbmFsbHl7aWYodSl0aHJvdyB1LmVycm9yfX1udWxsPT09YyYmKG89dCxzPWwpLGwhPT1zPyhpLmZpbGxTdHlsZT1jfHwiIixyLl9maWxsQ2VsbHMobyxzLG4tbywxKSxvPXQscz1sKTpjIT09XyYmKGkuZmlsbFN0eWxlPWN8fCIiLHIuX2ZpbGxDZWxscyhvLHMsdC1vLDEpLG89dCxzPWwpLGM9X30pKSxudWxsIT09YyYmKGkuZmlsbFN0eWxlPWMsdGhpcy5fZmlsbENlbGxzKG8scyxuLW8sMSkpLGkucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fZHJhd0ZvcmVncm91bmQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RoaXMuX2ZvckVhY2hDZWxsKGUsdCwoZnVuY3Rpb24oZSx0LGkpe2lmKCFlLmlzSW52aXNpYmxlKCkmJihyLl9kcmF3Q2hhcnMoZSx0LGkpLGUuaXNVbmRlcmxpbmUoKXx8ZS5pc1N0cmlrZXRocm91Z2goKSkpe2lmKHIuX2N0eC5zYXZlKCksZS5pc0ludmVyc2UoKSlpZihlLmlzQmdEZWZhdWx0KCkpci5fY3R4LmZpbGxTdHlsZT1yLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M7ZWxzZSBpZihlLmlzQmdSR0IoKSlyLl9jdHguZmlsbFN0eWxlPSJyZ2IoIitoLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEJnQ29sb3IoKSkuam9pbigiLCIpKyIpIjtlbHNle3ZhciBuPWUuZ2V0QmdDb2xvcigpO3IuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJm48OCYmKG4rPTgpLHIuX2N0eC5maWxsU3R5bGU9ci5fY29sb3JzLmFuc2lbbl0uY3NzfWVsc2UgaWYoZS5pc0ZnRGVmYXVsdCgpKXIuX2N0eC5maWxsU3R5bGU9ci5fY29sb3JzLmZvcmVncm91bmQuY3NzO2Vsc2UgaWYoZS5pc0ZnUkdCKCkpci5fY3R4LmZpbGxTdHlsZT0icmdiKCIraC5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRGZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI7ZWxzZXt2YXIgbz1lLmdldEZnQ29sb3IoKTtyLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZvPDgmJihvKz04KSxyLl9jdHguZmlsbFN0eWxlPXIuX2NvbG9ycy5hbnNpW29dLmNzc31lLmlzU3RyaWtldGhyb3VnaCgpJiZyLl9maWxsTWlkZGxlTGluZUF0Q2VsbHModCxpLGUuZ2V0V2lkdGgoKSksZS5pc1VuZGVybGluZSgpJiZyLl9maWxsQm90dG9tTGluZUF0Q2VsbHModCxpLGUuZ2V0V2lkdGgoKSksci5fY3R4LnJlc3RvcmUoKX19KSl9LHQucHJvdG90eXBlLm9uR3JpZENoYW5nZWQ9ZnVuY3Rpb24oZSx0KXswIT09dGhpcy5fc3RhdGUuY2FjaGUubGVuZ3RoJiYodGhpcy5fY2hhckF0bGFzJiZ0aGlzLl9jaGFyQXRsYXMuYmVnaW5GcmFtZSgpLHRoaXMuX2NsZWFyQ2VsbHMoMCxlLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0LWUrMSksdGhpcy5fZHJhd0JhY2tncm91bmQoZSx0KSx0aGlzLl9kcmF3Rm9yZWdyb3VuZChlLHQpKX0sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3NldFRyYW5zcGFyZW5jeSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmFsbG93VHJhbnNwYXJlbmN5KX0sdC5wcm90b3R5cGUuX2lzT3ZlcmxhcHBpbmc9ZnVuY3Rpb24oZSl7aWYoMSE9PWUuZ2V0V2lkdGgoKSlyZXR1cm4hMTtpZihlLmdldENvZGUoKTwyNTYpcmV0dXJuITE7dmFyIHQ9ZS5nZXRDaGFycygpO2lmKHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZS5oYXNPd25Qcm9wZXJ0eSh0KSlyZXR1cm4gdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW3RdO3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZvbnQ9dGhpcy5fY2hhcmFjdGVyRm9udDt2YXIgcj1NYXRoLmZsb29yKHRoaXMuX2N0eC5tZWFzdXJlVGV4dCh0KS53aWR0aCk+dGhpcy5fY2hhcmFjdGVyV2lkdGg7cmV0dXJuIHRoaXMuX2N0eC5yZXN0b3JlKCksdGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlW3RdPXIscn0sbyhbcyg1LF8uSUJ1ZmZlclNlcnZpY2UpLHMoNixfLklPcHRpb25zU2VydmljZSkscyg3LGQuSUNoYXJhY3RlckpvaW5lclNlcnZpY2UpLHMoOCxfLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShsLkJhc2VSZW5kZXJMYXllcik7dC5UZXh0UmVuZGVyTGF5ZXI9dn0sOTYxNjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJhc2VDaGFyQXRsYXM9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2RpZFdhcm1VcD0hMX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUud2FybVVwPWZ1bmN0aW9uKCl7dGhpcy5fZGlkV2FybVVwfHwodGhpcy5fZG9XYXJtVXAoKSx0aGlzLl9kaWRXYXJtVXA9ITApfSxlLnByb3RvdHlwZS5fZG9XYXJtVXA9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5iZWdpbkZyYW1lPWZ1bmN0aW9uKCl7fSxlfSgpO3QuQmFzZUNoYXJBdGxhcz1yfSwxNDIwOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5yZW1vdmVUZXJtaW5hbEZyb21DYWNoZT10LmFjcXVpcmVDaGFyQXRsYXM9dm9pZCAwO3ZhciBpPXIoMjA0MCksbj1yKDE5MDYpLG89W107dC5hY3F1aXJlQ2hhckF0bGFzPWZ1bmN0aW9uKGUsdCxyLHMsYSl7Zm9yKHZhciBjPSgwLGkuZ2VuZXJhdGVDb25maWcpKHMsYSxlLHIpLGw9MDtsPG8ubGVuZ3RoO2wrKyl7dmFyIGg9KHU9b1tsXSkub3duZWRCeS5pbmRleE9mKHQpO2lmKGg+PTApe2lmKCgwLGkuY29uZmlnRXF1YWxzKSh1LmNvbmZpZyxjKSlyZXR1cm4gdS5hdGxhczsxPT09dS5vd25lZEJ5Lmxlbmd0aD8odS5hdGxhcy5kaXNwb3NlKCksby5zcGxpY2UobCwxKSk6dS5vd25lZEJ5LnNwbGljZShoLDEpO2JyZWFrfX1mb3IobD0wO2w8by5sZW5ndGg7bCsrKXt2YXIgdT1vW2xdO2lmKCgwLGkuY29uZmlnRXF1YWxzKSh1LmNvbmZpZyxjKSlyZXR1cm4gdS5vd25lZEJ5LnB1c2godCksdS5hdGxhc312YXIgZj17YXRsYXM6bmV3IG4uRHluYW1pY0NoYXJBdGxhcyhkb2N1bWVudCxjKSxjb25maWc6Yyxvd25lZEJ5Olt0XX07cmV0dXJuIG8ucHVzaChmKSxmLmF0bGFzfSx0LnJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8by5sZW5ndGg7dCsrKXt2YXIgcj1vW3RdLm93bmVkQnkuaW5kZXhPZihlKTtpZigtMSE9PXIpezE9PT1vW3RdLm93bmVkQnkubGVuZ3RoPyhvW3RdLmF0bGFzLmRpc3Bvc2UoKSxvLnNwbGljZSh0LDEpKTpvW3RdLm93bmVkQnkuc3BsaWNlKHIsMSk7YnJlYWt9fX19LDIwNDA6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmlzMjU2Q29sb3I9dC5jb25maWdFcXVhbHM9dC5nZW5lcmF0ZUNvbmZpZz12b2lkIDA7dmFyIGk9cig2NDMpO3QuZ2VuZXJhdGVDb25maWc9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49e2ZvcmVncm91bmQ6aS5mb3JlZ3JvdW5kLGJhY2tncm91bmQ6aS5iYWNrZ3JvdW5kLGN1cnNvcjp2b2lkIDAsY3Vyc29yQWNjZW50OnZvaWQgMCxzZWxlY3Rpb246dm9pZCAwLGFuc2k6aS5hbnNpLnNsaWNlKCl9O3JldHVybntkZXZpY2VQaXhlbFJhdGlvOndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHNjYWxlZENoYXJXaWR0aDplLHNjYWxlZENoYXJIZWlnaHQ6dCxmb250RmFtaWx5OnIuZm9udEZhbWlseSxmb250U2l6ZTpyLmZvbnRTaXplLGZvbnRXZWlnaHQ6ci5mb250V2VpZ2h0LGZvbnRXZWlnaHRCb2xkOnIuZm9udFdlaWdodEJvbGQsYWxsb3dUcmFuc3BhcmVuY3k6ci5hbGxvd1RyYW5zcGFyZW5jeSxjb2xvcnM6bn19LHQuY29uZmlnRXF1YWxzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTA7cjxlLmNvbG9ycy5hbnNpLmxlbmd0aDtyKyspaWYoZS5jb2xvcnMuYW5zaVtyXS5yZ2JhIT09dC5jb2xvcnMuYW5zaVtyXS5yZ2JhKXJldHVybiExO3JldHVybiBlLmRldmljZVBpeGVsUmF0aW89PT10LmRldmljZVBpeGVsUmF0aW8mJmUuZm9udEZhbWlseT09PXQuZm9udEZhbWlseSYmZS5mb250U2l6ZT09PXQuZm9udFNpemUmJmUuZm9udFdlaWdodD09PXQuZm9udFdlaWdodCYmZS5mb250V2VpZ2h0Qm9sZD09PXQuZm9udFdlaWdodEJvbGQmJmUuYWxsb3dUcmFuc3BhcmVuY3k9PT10LmFsbG93VHJhbnNwYXJlbmN5JiZlLnNjYWxlZENoYXJXaWR0aD09PXQuc2NhbGVkQ2hhcldpZHRoJiZlLnNjYWxlZENoYXJIZWlnaHQ9PT10LnNjYWxlZENoYXJIZWlnaHQmJmUuY29sb3JzLmZvcmVncm91bmQ9PT10LmNvbG9ycy5mb3JlZ3JvdW5kJiZlLmNvbG9ycy5iYWNrZ3JvdW5kPT09dC5jb2xvcnMuYmFja2dyb3VuZH0sdC5pczI1NkNvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiBlPGkuREVGQVVMVF9DT0xPUn19LDg4MDM6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNIQVJfQVRMQVNfQ0VMTF9TUEFDSU5HPXQuVEVYVF9CQVNFTElORT10LkRJTV9PUEFDSVRZPXQuSU5WRVJURURfREVGQVVMVF9DT0xPUj12b2lkIDA7dmFyIGk9cig2MTE0KTt0LklOVkVSVEVEX0RFRkFVTFRfQ09MT1I9MjU3LHQuRElNX09QQUNJVFk9LjUsdC5URVhUX0JBU0VMSU5FPWkuaXNGaXJlZm94fHxpLmlzTGVnYWN5RWRnZT8iYm90dG9tIjoiaWRlb2dyYXBoaWMiLHQuQ0hBUl9BVExBU19DRUxMX1NQQUNJTkc9MX0sMTkwNjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Ob25lQ2hhckF0bGFzPXQuRHluYW1pY0NoYXJBdGxhcz10LmdldEdseXBoQ2FjaGVLZXk9dm9pZCAwO3ZhciBvPXIoODgwMykscz1yKDk2MTYpLGE9cig1NjgwKSxjPXIoNzAwMSksbD1yKDYxMTQpLGg9cigxNzUyKSx1PXIoODA1NSksZj0xMDI0LF89MTAyNCxkPXtjc3M6InJnYmEoMCwgMCwgMCwgMCkiLHJnYmE6MH07ZnVuY3Rpb24gcChlKXtyZXR1cm4gZS5jb2RlPDwyMXxlLmJnPDwxMnxlLmZnPDwzfChlLmJvbGQ/MDo0KSsoZS5kaW0/MDoyKSsoZS5pdGFsaWM/MDoxKX10LmdldEdseXBoQ2FjaGVLZXk9cDt2YXIgdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO2kuX2NvbmZpZz1yLGkuX2RyYXdUb0NhY2hlQ291bnQ9MCxpLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA9W10saS5fYml0bWFwQ29tbWl0VGltZW91dD1udWxsLGkuX2JpdG1hcD1udWxsLGkuX2NhY2hlQ2FudmFzPXQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksaS5fY2FjaGVDYW52YXMud2lkdGg9ZixpLl9jYWNoZUNhbnZhcy5oZWlnaHQ9XyxpLl9jYWNoZUN0eD0oMCxoLnRocm93SWZGYWxzeSkoaS5fY2FjaGVDYW52YXMuZ2V0Q29udGV4dCgiMmQiLHthbHBoYTohMH0pKTt2YXIgbj10LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO24ud2lkdGg9aS5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCxuLmhlaWdodD1pLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCxpLl90bXBDdHg9KDAsaC50aHJvd0lmRmFsc3kpKG4uZ2V0Q29udGV4dCgiMmQiLHthbHBoYTppLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3l9KSksaS5fd2lkdGg9TWF0aC5mbG9vcihmL2kuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgpLGkuX2hlaWdodD1NYXRoLmZsb29yKF8vaS5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO3ZhciBvPWkuX3dpZHRoKmkuX2hlaWdodDtyZXR1cm4gaS5fY2FjaGVNYXA9bmV3IGMuTFJVTWFwKG8pLGkuX2NhY2hlTWFwLnByZWFsbG9jKG8pLGl9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7bnVsbCE9PXRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQpLHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQ9bnVsbCl9LHQucHJvdG90eXBlLmJlZ2luRnJhbWU9ZnVuY3Rpb24oKXt0aGlzLl9kcmF3VG9DYWNoZUNvdW50PTB9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7aWYodGhpcy5fY2FjaGVNYXAuc2l6ZT4wKXt2YXIgZT10aGlzLl93aWR0aCp0aGlzLl9oZWlnaHQ7dGhpcy5fY2FjaGVNYXA9bmV3IGMuTFJVTWFwKGUpLHRoaXMuX2NhY2hlTWFwLnByZWFsbG9jKGUpfXRoaXMuX2NhY2hlQ3R4LmNsZWFyUmVjdCgwLDAsZixfKSx0aGlzLl90bXBDdHguY2xlYXJSZWN0KDAsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KX0sdC5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbihlLHQscixpKXtpZigzMj09PXQuY29kZSlyZXR1cm4hMDtpZighdGhpcy5fY2FuQ2FjaGUodCkpcmV0dXJuITE7dmFyIG49cCh0KSxvPXRoaXMuX2NhY2hlTWFwLmdldChuKTtpZihudWxsIT1vKXJldHVybiB0aGlzLl9kcmF3RnJvbUNhY2hlKGUsbyxyLGkpLCEwO2lmKHRoaXMuX2RyYXdUb0NhY2hlQ291bnQ8MTAwKXt2YXIgcztzPXRoaXMuX2NhY2hlTWFwLnNpemU8dGhpcy5fY2FjaGVNYXAuY2FwYWNpdHk/dGhpcy5fY2FjaGVNYXAuc2l6ZTp0aGlzLl9jYWNoZU1hcC5wZWVrKCkuaW5kZXg7dmFyIGE9dGhpcy5fZHJhd1RvQ2FjaGUodCxzKTtyZXR1cm4gdGhpcy5fY2FjaGVNYXAuc2V0KG4sYSksdGhpcy5fZHJhd0Zyb21DYWNoZShlLGEscixpKSwhMH1yZXR1cm4hMX0sdC5wcm90b3R5cGUuX2NhbkNhY2hlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNvZGU8MjU2fSx0LnByb3RvdHlwZS5fdG9Db29yZGluYXRlWD1mdW5jdGlvbihlKXtyZXR1cm4gZSV0aGlzLl93aWR0aCp0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRofSx0LnByb3RvdHlwZS5fdG9Db29yZGluYXRlWT1mdW5jdGlvbihlKXtyZXR1cm4gTWF0aC5mbG9vcihlL3RoaXMuX3dpZHRoKSp0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodH0sdC5wcm90b3R5cGUuX2RyYXdGcm9tQ2FjaGU9ZnVuY3Rpb24oZSx0LHIsaSl7aWYoIXQuaXNFbXB0eSl7dmFyIG49dGhpcy5fdG9Db29yZGluYXRlWCh0LmluZGV4KSxvPXRoaXMuX3RvQ29vcmRpbmF0ZVkodC5pbmRleCk7ZS5kcmF3SW1hZ2UodC5pbkJpdG1hcD90aGlzLl9iaXRtYXA6dGhpcy5fY2FjaGVDYW52YXMsbixvLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQscixpLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpfX0sdC5wcm90b3R5cGUuX2dldENvbG9yRnJvbUFuc2lJbmRleD1mdW5jdGlvbihlKXtyZXR1cm4gZTx0aGlzLl9jb25maWcuY29sb3JzLmFuc2kubGVuZ3RoP3RoaXMuX2NvbmZpZy5jb2xvcnMuYW5zaVtlXTphLkRFRkFVTFRfQU5TSV9DT0xPUlNbZV19LHQucHJvdG90eXBlLl9nZXRCYWNrZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeT9kOmUuYmc9PT1vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I/dGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kOmUuYmc8MjU2P3RoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChlLmJnKTp0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmR9LHQucHJvdG90eXBlLl9nZXRGb3JlZ3JvdW5kQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZmc9PT1vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I/dS5jb2xvci5vcGFxdWUodGhpcy5fY29uZmlnLmNvbG9ycy5iYWNrZ3JvdW5kKTplLmZnPDI1Nj90aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgoZS5mZyk6dGhpcy5fY29uZmlnLmNvbG9ycy5mb3JlZ3JvdW5kfSx0LnByb3RvdHlwZS5fZHJhd1RvQ2FjaGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kcmF3VG9DYWNoZUNvdW50KyssdGhpcy5fdG1wQ3R4LnNhdmUoKTt2YXIgcj10aGlzLl9nZXRCYWNrZ3JvdW5kQ29sb3IoZSk7dGhpcy5fdG1wQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0iY29weSIsdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZT1yLmNzcyx0aGlzLl90bXBDdHguZmlsbFJlY3QoMCwwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpLHRoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249InNvdXJjZS1vdmVyIjt2YXIgaT1lLmJvbGQ/dGhpcy5fY29uZmlnLmZvbnRXZWlnaHRCb2xkOnRoaXMuX2NvbmZpZy5mb250V2VpZ2h0LG49ZS5pdGFsaWM/Iml0YWxpYyI6IiI7dGhpcy5fdG1wQ3R4LmZvbnQ9bisiICIraSsiICIrdGhpcy5fY29uZmlnLmZvbnRTaXplKnRoaXMuX2NvbmZpZy5kZXZpY2VQaXhlbFJhdGlvKyJweCAiK3RoaXMuX2NvbmZpZy5mb250RmFtaWx5LHRoaXMuX3RtcEN0eC50ZXh0QmFzZWxpbmU9by5URVhUX0JBU0VMSU5FLHRoaXMuX3RtcEN0eC5maWxsU3R5bGU9dGhpcy5fZ2V0Rm9yZWdyb3VuZENvbG9yKGUpLmNzcyxlLmRpbSYmKHRoaXMuX3RtcEN0eC5nbG9iYWxBbHBoYT1vLkRJTV9PUEFDSVRZKSx0aGlzLl90bXBDdHguZmlsbFRleHQoZS5jaGFycywwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KTt2YXIgcz10aGlzLl90bXBDdHguZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KSxhPSExO2lmKHRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeXx8KGE9ZyhzLHIpKSxhJiYiXyI9PT1lLmNoYXJzJiYhdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5KWZvcih2YXIgYz0xO2M8PTUmJih0aGlzLl90bXBDdHguZmlsbFRleHQoZS5jaGFycywwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0LWMpLGE9ZyhzPXRoaXMuX3RtcEN0eC5nZXRJbWFnZURhdGEoMCwwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpLHIpKTtjKyspO3RoaXMuX3RtcEN0eC5yZXN0b3JlKCk7dmFyIGw9dGhpcy5fdG9Db29yZGluYXRlWCh0KSxoPXRoaXMuX3RvQ29vcmRpbmF0ZVkodCk7dGhpcy5fY2FjaGVDdHgucHV0SW1hZ2VEYXRhKHMsbCxoKTt2YXIgdT17aW5kZXg6dCxpc0VtcHR5OmEsaW5CaXRtYXA6ITF9O3JldHVybiB0aGlzLl9hZGRHbHlwaFRvQml0bWFwKHUpLHV9LHQucHJvdG90eXBlLl9hZGRHbHlwaFRvQml0bWFwPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7ISgiY3JlYXRlSW1hZ2VCaXRtYXAiaW4gd2luZG93KXx8bC5pc0ZpcmVmb3h8fGwuaXNTYWZhcml8fCh0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXAucHVzaChlKSxudWxsPT09dGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCYmKHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2dlbmVyYXRlQml0bWFwKCl9KSwxMDApKSl9LHQucHJvdG90eXBlLl9nZW5lcmF0ZUJpdG1hcD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA7dGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwPVtdLHdpbmRvdy5jcmVhdGVJbWFnZUJpdG1hcCh0aGlzLl9jYWNoZUNhbnZhcykudGhlbigoZnVuY3Rpb24ocil7ZS5fYml0bWFwPXI7Zm9yKHZhciBpPTA7aTx0Lmxlbmd0aDtpKyspdFtpXS5pbkJpdG1hcD0hMH0pKSx0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0PW51bGx9LHR9KHMuQmFzZUNoYXJBdGxhcyk7dC5EeW5hbWljQ2hhckF0bGFzPXY7dmFyIHk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3JldHVybiBlLmNhbGwodGhpcyl8fHRoaXN9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiExfSx0fShzLkJhc2VDaGFyQXRsYXMpO2Z1bmN0aW9uIGcoZSx0KXtmb3IodmFyIHI9ITAsaT10LnJnYmE+Pj4yNCxuPXQucmdiYT4+PjE2JjI1NSxvPXQucmdiYT4+PjgmMjU1LHM9MDtzPGUuZGF0YS5sZW5ndGg7cys9NCllLmRhdGFbc109PT1pJiZlLmRhdGFbcysxXT09PW4mJmUuZGF0YVtzKzJdPT09bz9lLmRhdGFbcyszXT0wOnI9ITE7cmV0dXJuIHJ9dC5Ob25lQ2hhckF0bGFzPXl9LDcwMDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MUlVNYXA9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLmNhcGFjaXR5PWUsdGhpcy5fbWFwPXt9LHRoaXMuX2hlYWQ9bnVsbCx0aGlzLl90YWlsPW51bGwsdGhpcy5fbm9kZVBvb2w9W10sdGhpcy5zaXplPTB9cmV0dXJuIGUucHJvdG90eXBlLl91bmxpbmtOb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucHJldixyPWUubmV4dDtlPT09dGhpcy5faGVhZCYmKHRoaXMuX2hlYWQ9ciksZT09PXRoaXMuX3RhaWwmJih0aGlzLl90YWlsPXQpLG51bGwhPT10JiYodC5uZXh0PXIpLG51bGwhPT1yJiYoci5wcmV2PXQpfSxlLnByb3RvdHlwZS5fYXBwZW5kTm9kZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl90YWlsO251bGwhPT10JiYodC5uZXh0PWUpLGUucHJldj10LGUubmV4dD1udWxsLHRoaXMuX3RhaWw9ZSxudWxsPT09dGhpcy5faGVhZCYmKHRoaXMuX2hlYWQ9ZSl9LGUucHJvdG90eXBlLnByZWFsbG9jPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLl9ub2RlUG9vbCxyPTA7cjxlO3IrKyl0LnB1c2goe3ByZXY6bnVsbCxuZXh0Om51bGwsa2V5Om51bGwsdmFsdWU6bnVsbH0pfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbWFwW2VdO3JldHVybiB2b2lkIDAhPT10Pyh0aGlzLl91bmxpbmtOb2RlKHQpLHRoaXMuX2FwcGVuZE5vZGUodCksdC52YWx1ZSk6bnVsbH0sZS5wcm90b3R5cGUucGVla1ZhbHVlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21hcFtlXTtyZXR1cm4gdm9pZCAwIT09dD90LnZhbHVlOm51bGx9LGUucHJvdG90eXBlLnBlZWs9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9oZWFkO3JldHVybiBudWxsPT09ZT9udWxsOmUudmFsdWV9LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX21hcFtlXTtpZih2b2lkIDAhPT1yKXI9dGhpcy5fbWFwW2VdLHRoaXMuX3VubGlua05vZGUociksci52YWx1ZT10O2Vsc2UgaWYodGhpcy5zaXplPj10aGlzLmNhcGFjaXR5KXI9dGhpcy5faGVhZCx0aGlzLl91bmxpbmtOb2RlKHIpLGRlbGV0ZSB0aGlzLl9tYXBbci5rZXldLHIua2V5PWUsci52YWx1ZT10LHRoaXMuX21hcFtlXT1yO2Vsc2V7dmFyIGk9dGhpcy5fbm9kZVBvb2w7aS5sZW5ndGg+MD8oKHI9aS5wb3AoKSkua2V5PWUsci52YWx1ZT10KTpyPXtwcmV2Om51bGwsbmV4dDpudWxsLGtleTplLHZhbHVlOnR9LHRoaXMuX21hcFtlXT1yLHRoaXMuc2l6ZSsrfXRoaXMuX2FwcGVuZE5vZGUocil9LGV9KCk7dC5MUlVNYXA9cn0sMTI5NjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Eb21SZW5kZXJlcj12b2lkIDA7dmFyIGM9cigzNzg3KSxsPXIoODgwMyksaD1yKDg0NCksdT1yKDQ3MjUpLGY9cigyNTg1KSxfPXIoODQ2MCksZD1yKDgwNTUpLHA9cig5NjMxKSx2PSJ4dGVybS1kb20tcmVuZGVyZXItb3duZXItIix5PSJ4dGVybS1mZy0iLGc9Inh0ZXJtLWJnLSIsbT0ieHRlcm0tZm9jdXMiLGI9MSxTPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxsLGgsdSl7dmFyIGY9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBmLl9jb2xvcnM9dCxmLl9lbGVtZW50PXIsZi5fc2NyZWVuRWxlbWVudD1pLGYuX3ZpZXdwb3J0RWxlbWVudD1uLGYuX2xpbmtpZmllcj1vLGYuX2xpbmtpZmllcjI9cyxmLl9jaGFyU2l6ZVNlcnZpY2U9bCxmLl9vcHRpb25zU2VydmljZT1oLGYuX2J1ZmZlclNlcnZpY2U9dSxmLl90ZXJtaW5hbENsYXNzPWIrKyxmLl9yb3dFbGVtZW50cz1bXSxmLl9yb3dDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZi5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLXJvd3MiKSxmLl9yb3dDb250YWluZXIuc3R5bGUubGluZUhlaWdodD0ibm9ybWFsIixmLl9yb3dDb250YWluZXIuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKSxmLl9yZWZyZXNoUm93RWxlbWVudHMoZi5fYnVmZmVyU2VydmljZS5jb2xzLGYuX2J1ZmZlclNlcnZpY2Uucm93cyksZi5fc2VsZWN0aW9uQ29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGYuX3NlbGVjdGlvbkNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1zZWxlY3Rpb24iKSxmLl9zZWxlY3Rpb25Db250YWluZXIuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKSxmLmRpbWVuc2lvbnM9e3NjYWxlZENoYXJXaWR0aDowLHNjYWxlZENoYXJIZWlnaHQ6MCxzY2FsZWRDZWxsV2lkdGg6MCxzY2FsZWRDZWxsSGVpZ2h0OjAsc2NhbGVkQ2hhckxlZnQ6MCxzY2FsZWRDaGFyVG9wOjAsc2NhbGVkQ2FudmFzV2lkdGg6MCxzY2FsZWRDYW52YXNIZWlnaHQ6MCxjYW52YXNXaWR0aDowLGNhbnZhc0hlaWdodDowLGFjdHVhbENlbGxXaWR0aDowLGFjdHVhbENlbGxIZWlnaHQ6MH0sZi5fdXBkYXRlRGltZW5zaW9ucygpLGYuX2luamVjdENzcygpLGYuX3Jvd0ZhY3Rvcnk9YS5jcmVhdGVJbnN0YW5jZShjLkRvbVJlbmRlcmVyUm93RmFjdG9yeSxkb2N1bWVudCxmLl9jb2xvcnMpLGYuX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCh2K2YuX3Rlcm1pbmFsQ2xhc3MpLGYuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZi5fcm93Q29udGFpbmVyKSxmLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKGYuX3NlbGVjdGlvbkNvbnRhaW5lciksZi5yZWdpc3RlcihmLl9saW5raWZpZXIub25TaG93TGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTGlua0hvdmVyKGUpfSkpKSxmLnJlZ2lzdGVyKGYuX2xpbmtpZmllci5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rTGVhdmUoZSl9KSkpLGYucmVnaXN0ZXIoZi5fbGlua2lmaWVyMi5vblNob3dMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rSG92ZXIoZSl9KSkpLGYucmVnaXN0ZXIoZi5fbGlua2lmaWVyMi5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rTGVhdmUoZSl9KSkpLGZ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlZHJhdyIse2dldDpmdW5jdGlvbigpe3JldHVybihuZXcgXy5FdmVudEVtaXR0ZXIpLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodit0aGlzLl90ZXJtaW5hbENsYXNzKSwoMCxwLnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9yb3dDb250YWluZXIsdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50LHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3VwZGF0ZURpbWVuc2lvbnM9ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGg9dGhpcy5fY2hhclNpemVTZXJ2aWNlLndpZHRoKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0PU1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoPXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGgrTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxldHRlclNwYWNpbmcpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0PU1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5saW5lSGVpZ2h0KSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckxlZnQ9MCx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcD0wLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aD10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoKnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0KnRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyx0aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGg9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGgvd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0L3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aC90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodC90aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7dHJ5e2Zvcih2YXIgcj1hKHRoaXMuX3Jvd0VsZW1lbnRzKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG49aS52YWx1ZTtuLnN0eWxlLndpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCsicHgiLG4uc3R5bGUuaGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS5saW5lSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS5vdmVyZmxvdz0iaGlkZGVuIn19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnR8fCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KSk7dmFyIG89dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIHNwYW4geyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGhlaWdodDogMTAwJTsgdmVydGljYWwtYWxpZ246IHRvcDsgd2lkdGg6ICIrdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCsicHh9Ijt0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50LnRleHRDb250ZW50PW8sdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnN0eWxlLmhlaWdodD10aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuaGVpZ2h0LHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoKyJweCIsdGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS5oZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodCsicHgifSx0LnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dGhpcy5fY29sb3JzPWUsdGhpcy5faW5qZWN0Q3NzKCl9LHQucHJvdG90eXBlLl9pbmplY3RDc3M9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3RoZW1lU3R5bGVFbGVtZW50fHwodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSx0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50KSk7dmFyIHQ9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIHsgY29sb3I6ICIrdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzKyI7IGZvbnQtZmFtaWx5OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSsiOyBmb250LXNpemU6ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSsicHg7fSI7dCs9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIHNwYW46bm90KC4iK2MuQk9MRF9DTEFTUysiKSB7IGZvbnQtd2VpZ2h0OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodCsiO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiBzcGFuLiIrYy5CT0xEX0NMQVNTKyIgeyBmb250LXdlaWdodDogIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHRCb2xkKyI7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIHNwYW4uIitjLklUQUxJQ19DTEFTUysiIHsgZm9udC1zdHlsZTogaXRhbGljO30iLHQrPSJAa2V5ZnJhbWVzIGJsaW5rX2JveF9zaGFkb3dfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgeyA1MCUgeyAgYm94LXNoYWRvdzogbm9uZTsgfX0iLHQrPSJAa2V5ZnJhbWVzIGJsaW5rX2Jsb2NrXyIrdGhpcy5fdGVybWluYWxDbGFzcysiIHsgMCUgeyAgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiOyAgY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3MrIjsgfSA1MCUgeyAgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcysiOyAgY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIjsgfX0iLHQrPXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93czpub3QoLnh0ZXJtLWZvY3VzKSAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIiB7IG91dGxpbmU6IDFweCBzb2xpZCAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyI7IG91dGxpbmUtb2Zmc2V0OiAtMXB4O30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cy54dGVybS1mb2N1cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfQkxJTktfQ0xBU1MrIjpub3QoLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIikgeyBhbmltYXRpb246IGJsaW5rX2JveF9zaGFkb3dfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgMXMgc3RlcC1lbmQgaW5maW5pdGU7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzLnh0ZXJtLWZvY3VzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9CTElOS19DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIiB7IGFuaW1hdGlvbjogYmxpbmtfYmxvY2tfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgMXMgc3RlcC1lbmQgaW5maW5pdGU7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzLnh0ZXJtLWZvY3VzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUysiIHsgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiOyBjb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcysiO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTKyIgeyBib3gtc2hhZG93OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yV2lkdGgrInB4IDAgMCAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyIgaW5zZXQ7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MrIiB7IGJveC1zaGFkb3c6IDAgLTFweCAwICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIiBpbnNldDt9Iix0Kz10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXNlbGVjdGlvbiB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB6LWluZGV4OiAxOyBwb2ludGVyLWV2ZW50czogbm9uZTt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXNlbGVjdGlvbiBkaXYgeyBwb3NpdGlvbjogYWJzb2x1dGU7IGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5fY29sb3JzLnNlbGVjdGlvbk9wYXF1ZS5jc3MrIjt9Iix0aGlzLl9jb2xvcnMuYW5zaS5mb3JFYWNoKChmdW5jdGlvbihyLGkpe3QrPWUuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIit5K2krIiB7IGNvbG9yOiAiK3IuY3NzKyI7IH0iK2UuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIitnK2krIiB7IGJhY2tncm91bmQtY29sb3I6ICIrci5jc3MrIjsgfSJ9KSksdCs9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC4iK3krbC5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SKyIgeyBjb2xvcjogIitkLmNvbG9yLm9wYXF1ZSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCkuY3NzKyI7IH0iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIitnK2wuSU5WRVJURURfREVGQVVMVF9DT0xPUisiIHsgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3MrIjsgfSIsdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQudGV4dENvbnRlbnQ9dH0sdC5wcm90b3R5cGUub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5fcmVmcmVzaFJvd0VsZW1lbnRzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aDtyPD10O3IrKyl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7dGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKGkpLHRoaXMuX3Jvd0VsZW1lbnRzLnB1c2goaSl9Zm9yKDt0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGg+dDspdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpKX0sdC5wcm90b3R5cGUub25SZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZWZyZXNoUm93RWxlbWVudHMoZSx0KSx0aGlzLl91cGRhdGVEaW1lbnNpb25zKCl9LHQucHJvdG90eXBlLm9uQ2hhclNpemVDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShtKX0sdC5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe3RoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKG0pfSx0LnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZSx0LHIpe2Zvcig7dGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aDspdGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlblswXSk7aWYodGhpcy5fcm93RmFjdG9yeS5vblNlbGVjdGlvbkNoYW5nZWQoZSx0LHIpLHRoaXMucmVuZGVyUm93cygwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSxlJiZ0KXt2YXIgaT1lWzFdLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG49dFsxXS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxvPU1hdGgubWF4KGksMCkscz1NYXRoLm1pbihuLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKTtpZighKG8+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c3x8czwwKSl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2lmKHIpe3ZhciBjPWVbMF0+dFswXTthLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQobyxjP3RbMF06ZVswXSxjP2VbMF06dFswXSxzLW8rMSkpfWVsc2V7dmFyIGw9aT09PW8/ZVswXTowLGg9bz09PW4/dFswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7YS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KG8sbCxoKSk7dmFyIHU9cy1vLTE7aWYoYS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KG8rMSwwLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx1KSksbyE9PXMpe3ZhciBmPW49PT1zP3RbMF06dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2EuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChzLDAsZikpfX10aGlzLl9zZWxlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoYSl9fX0sdC5wcm90b3R5cGUuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQ9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09aSYmKGk9MSk7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7cmV0dXJuIG4uc3R5bGUuaGVpZ2h0PWkqdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixuLnN0eWxlLnRvcD1lKnRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS5sZWZ0PXQqdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCsicHgiLG4uc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCooci10KSsicHgiLG59LHQucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKSx0aGlzLl9pbmplY3RDc3MoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9YSh0aGlzLl9yb3dFbGVtZW50cyksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpaS52YWx1ZS5pbm5lclRleHQ9IiJ9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sdC5wcm90b3R5cGUucmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGk9TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSksbj10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rLG89ZTtvPD10O28rKyl7dmFyIHM9dGhpcy5fcm93RWxlbWVudHNbb107cy5pbm5lclRleHQ9IiI7dmFyIGE9byt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxjPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChhKSxsPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGU7cy5hcHBlbmRDaGlsZCh0aGlzLl9yb3dGYWN0b3J5LmNyZWF0ZVJvdyhjLGEsYT09PXIsbCxpLG4sdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpKX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiX3Rlcm1pbmFsU2VsZWN0b3IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4iLiIrdit0aGlzLl90ZXJtaW5hbENsYXNzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9vbkxpbmtIb3Zlcj1mdW5jdGlvbihlKXt0aGlzLl9zZXRDZWxsVW5kZXJsaW5lKGUueDEsZS54MixlLnkxLGUueTIsZS5jb2xzLCEwKX0sdC5wcm90b3R5cGUuX29uTGlua0xlYXZlPWZ1bmN0aW9uKGUpe3RoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSxlLngyLGUueTEsZS55MixlLmNvbHMsITEpfSx0LnByb3RvdHlwZS5fc2V0Q2VsbFVuZGVybGluZT1mdW5jdGlvbihlLHQscixpLG4sbyl7Zm9yKDtlIT09dHx8ciE9PWk7KXt2YXIgcz10aGlzLl9yb3dFbGVtZW50c1tyXTtpZighcylyZXR1cm47dmFyIGE9cy5jaGlsZHJlbltlXTthJiYoYS5zdHlsZS50ZXh0RGVjb3JhdGlvbj1vPyJ1bmRlcmxpbmUiOiJub25lIiksKytlPj1uJiYoZT0wLHIrKyl9fSxvKFtzKDYsZi5JSW5zdGFudGlhdGlvblNlcnZpY2UpLHMoNyx1LklDaGFyU2l6ZVNlcnZpY2UpLHMoOCxmLklPcHRpb25zU2VydmljZSkscyg5LGYuSUJ1ZmZlclNlcnZpY2UpXSx0KX0oaC5EaXNwb3NhYmxlKTt0LkRvbVJlbmRlcmVyPVN9LDM3ODc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Eb21SZW5kZXJlclJvd0ZhY3Rvcnk9dC5DVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTPXQuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUz10LkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUz10LkNVUlNPUl9CTElOS19DTEFTUz10LkNVUlNPUl9DTEFTUz10LlNUUklLRVRIUk9VR0hfQ0xBU1M9dC5VTkRFUkxJTkVfQ0xBU1M9dC5JVEFMSUNfQ0xBU1M9dC5ESU1fQ0xBU1M9dC5CT0xEX0NMQVNTPXZvaWQgMDt2YXIgcz1yKDg4MDMpLGE9cig2NDMpLGM9cig1MTEpLGw9cigyNTg1KSxoPXIoODA1NSksdT1yKDQ3MjUpLGY9cig0MjY5KSxfPXIoMTc1Mik7dC5CT0xEX0NMQVNTPSJ4dGVybS1ib2xkIix0LkRJTV9DTEFTUz0ieHRlcm0tZGltIix0LklUQUxJQ19DTEFTUz0ieHRlcm0taXRhbGljIix0LlVOREVSTElORV9DTEFTUz0ieHRlcm0tdW5kZXJsaW5lIix0LlNUUklLRVRIUk9VR0hfQ0xBU1M9Inh0ZXJtLXN0cmlrZXRocm91Z2giLHQuQ1VSU09SX0NMQVNTPSJ4dGVybS1jdXJzb3IiLHQuQ1VSU09SX0JMSU5LX0NMQVNTPSJ4dGVybS1jdXJzb3ItYmxpbmsiLHQuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTPSJ4dGVybS1jdXJzb3ItYmxvY2siLHQuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUz0ieHRlcm0tY3Vyc29yLWJhciIsdC5DVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTPSJ4dGVybS1jdXJzb3ItdW5kZXJsaW5lIjt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8pe3RoaXMuX2RvY3VtZW50PWUsdGhpcy5fY29sb3JzPXQsdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZT1yLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWksdGhpcy5fY29yZVNlcnZpY2U9bix0aGlzLl9kZWNvcmF0aW9uU2VydmljZT1vLHRoaXMuX3dvcmtDZWxsPW5ldyBjLkNlbGxEYXRhLHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9ITF9cmV0dXJuIGUucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt0aGlzLl9jb2xvcnM9ZX0sZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zZWxlY3Rpb25TdGFydD1lLHRoaXMuX3NlbGVjdGlvbkVuZD10LHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9cn0sZS5wcm90b3R5cGUuY3JlYXRlUm93PWZ1bmN0aW9uKGUscixpLG4sYyxsLHUsXyl7Zm9yKHZhciBkLHYseT10aGlzLl9kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZz10aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmdldEpvaW5lZENoYXJhY3RlcnMociksbT0wLGI9TWF0aC5taW4oZS5sZW5ndGgsXyktMTtiPj0wO2ItLSlpZihlLmxvYWRDZWxsKGIsdGhpcy5fd29ya0NlbGwpLmdldENvZGUoKSE9PWEuTlVMTF9DRUxMX0NPREV8fGkmJmI9PT1jKXttPWIrMTticmVha31mb3IoYj0wO2I8bTtiKyspe2UubG9hZENlbGwoYix0aGlzLl93b3JrQ2VsbCk7dmFyIFM9dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKTtpZigwIT09Uyl7dmFyIEM9ITEsdz1iLEw9dGhpcy5fd29ya0NlbGw7aWYoZy5sZW5ndGg+MCYmYj09PWdbMF1bMF0pe0M9ITA7dmFyIEU9Zy5zaGlmdCgpO0w9bmV3IGYuSm9pbmVkQ2VsbERhdGEodGhpcy5fd29ya0NlbGwsZS50cmFuc2xhdGVUb1N0cmluZyghMCxFWzBdLEVbMV0pLEVbMV0tRVswXSksdz1FWzFdLTEsUz1MLmdldFdpZHRoKCl9dmFyIHg9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpO2lmKFM+MSYmKHguc3R5bGUud2lkdGg9dSpTKyJweCIpLEMmJih4LnN0eWxlLmRpc3BsYXk9ImlubGluZSIsYz49YiYmYzw9dyYmKGM9YikpLCF0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbiYmaSYmYj09PWMpc3dpdGNoKHguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9DTEFTUyksbCYmeC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX0JMSU5LX0NMQVNTKSxuKXtjYXNlImJhciI6eC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUyk7YnJlYWs7Y2FzZSJ1bmRlcmxpbmUiOnguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1MpO2JyZWFrO2RlZmF1bHQ6eC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKX1MLmlzQm9sZCgpJiZ4LmNsYXNzTGlzdC5hZGQodC5CT0xEX0NMQVNTKSxMLmlzSXRhbGljKCkmJnguY2xhc3NMaXN0LmFkZCh0LklUQUxJQ19DTEFTUyksTC5pc0RpbSgpJiZ4LmNsYXNzTGlzdC5hZGQodC5ESU1fQ0xBU1MpLEwuaXNVbmRlcmxpbmUoKSYmeC5jbGFzc0xpc3QuYWRkKHQuVU5ERVJMSU5FX0NMQVNTKSxMLmlzSW52aXNpYmxlKCk/eC50ZXh0Q29udGVudD1hLldISVRFU1BBQ0VfQ0VMTF9DSEFSOngudGV4dENvbnRlbnQ9TC5nZXRDaGFycygpfHxhLldISVRFU1BBQ0VfQ0VMTF9DSEFSLEwuaXNTdHJpa2V0aHJvdWdoKCkmJnguY2xhc3NMaXN0LmFkZCh0LlNUUklLRVRIUk9VR0hfQ0xBU1MpO3ZhciBSPUwuZ2V0RmdDb2xvcigpLGs9TC5nZXRGZ0NvbG9yTW9kZSgpLE09TC5nZXRCZ0NvbG9yKCksQT1MLmdldEJnQ29sb3JNb2RlKCksTz0hIUwuaXNJbnZlcnNlKCk7aWYoTyl7dmFyIEQ9UjtSPU0sTT1EO3ZhciBUPWs7az1BLEE9VH12YXIgQj12b2lkIDAsUD12b2lkIDAsST0hMTt0cnl7Zm9yKHZhciBIPShkPXZvaWQgMCxvKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmdldERlY29yYXRpb25zQXRDZWxsKGIscikpKSxqPUgubmV4dCgpOyFqLmRvbmU7aj1ILm5leHQoKSl7dmFyIEY9ai52YWx1ZTsidG9wIiE9PUYub3B0aW9ucy5sYXllciYmSXx8KEYuYmFja2dyb3VuZENvbG9yUkdCJiYoQT01MDMzMTY0OCxNPUYuYmFja2dyb3VuZENvbG9yUkdCLnJnYmE+PjgmMTY3NzcyMTUsQj1GLmJhY2tncm91bmRDb2xvclJHQiksRi5mb3JlZ3JvdW5kQ29sb3JSR0ImJihrPTUwMzMxNjQ4LFI9Ri5mb3JlZ3JvdW5kQ29sb3JSR0IucmdiYT4+OCYxNjc3NzIxNSxQPUYuZm9yZWdyb3VuZENvbG9yUkdCKSxJPSJ0b3AiPT09Ri5vcHRpb25zLmxheWVyKX19Y2F0Y2goZSl7ZD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aiYmIWouZG9uZSYmKHY9SC5yZXR1cm4pJiZ2LmNhbGwoSCl9ZmluYWxseXtpZihkKXRocm93IGQuZXJyb3J9fXZhciBXPXRoaXMuX2lzQ2VsbEluU2VsZWN0aW9uKGIscik7SXx8dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQmJlcmJihrPTUwMzMxNjQ4LFI9dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQucmdiYT4+OCYxNjc3NzIxNSxQPXRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kKSxXJiYoQj10aGlzLl9jb2xvcnMuc2VsZWN0aW9uT3BhcXVlLEk9ITApLEkmJnguY2xhc3NMaXN0LmFkZCgieHRlcm0tZGVjb3JhdGlvbi10b3AiKTt2YXIgVT12b2lkIDA7c3dpdGNoKEEpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpVPXRoaXMuX2NvbG9ycy5hbnNpW01dLHguY2xhc3NMaXN0LmFkZCgieHRlcm0tYmctIitNKTticmVhaztjYXNlIDUwMzMxNjQ4OlU9aC5yZ2JhLnRvQ29sb3IoTT4+MTYsTT4+OCYyNTUsMjU1Jk0pLHRoaXMuX2FkZFN0eWxlKHgsImJhY2tncm91bmQtY29sb3I6IyIrcCgoTT4+PjApLnRvU3RyaW5nKDE2KSwiMCIsNikpO2JyZWFrO2RlZmF1bHQ6Tz8oVT10aGlzLl9jb2xvcnMuZm9yZWdyb3VuZCx4LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWJnLSIrcy5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SKSk6VT10aGlzLl9jb2xvcnMuYmFja2dyb3VuZH1zd2l0Y2goayl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOkwuaXNCb2xkKCkmJlI8OCYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmKFIrPTgpLHRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KHgsVSx0aGlzLl9jb2xvcnMuYW5zaVtSXSxMLEIsdm9pZCAwKXx8eC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1mZy0iK1IpO2JyZWFrO2Nhc2UgNTAzMzE2NDg6dmFyIHE9aC5yZ2JhLnRvQ29sb3IoUj4+MTYmMjU1LFI+PjgmMjU1LDI1NSZSKTt0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdCh4LFUscSxMLEIsUCl8fHRoaXMuX2FkZFN0eWxlKHgsImNvbG9yOiMiK3AoUi50b1N0cmluZygxNiksIjAiLDYpKTticmVhaztkZWZhdWx0OnRoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KHgsVSx0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZCxMLEIsdm9pZCAwKXx8TyYmeC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1mZy0iK3MuSU5WRVJURURfREVGQVVMVF9DT0xPUil9eS5hcHBlbmRDaGlsZCh4KSxiPXd9fXJldHVybiB5fSxlLnByb3RvdHlwZS5fYXBwbHlNaW5pbXVtQ29udHJhc3Q9ZnVuY3Rpb24oZSx0LHIsaSxuLG8pe2lmKDE9PT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvfHwoMCxfLmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHMpKGkuZ2V0Q29kZSgpKSlyZXR1cm4hMTt2YXIgcz12b2lkIDA7cmV0dXJuIG58fG98fChzPXRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLmdldENvbG9yKHQucmdiYSxyLnJnYmEpKSx2b2lkIDA9PT1zJiYocz1oLmNvbG9yLmVuc3VyZUNvbnRyYXN0UmF0aW8obnx8dCxvfHxyLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW8pLHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKChufHx0KS5yZ2JhLChvfHxyKS5yZ2JhLG51bGwhPXM/czpudWxsKSksISFzJiYodGhpcy5fYWRkU3R5bGUoZSwiY29sb3I6IitzLmNzcyksITApfSxlLnByb3RvdHlwZS5fYWRkU3R5bGU9ZnVuY3Rpb24oZSx0KXtlLnNldEF0dHJpYnV0ZSgic3R5bGUiLCIiKyhlLmdldEF0dHJpYnV0ZSgic3R5bGUiKXx8IiIpK3QrIjsiKX0sZS5wcm90b3R5cGUuX2lzQ2VsbEluU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fc2VsZWN0aW9uU3RhcnQsaT10aGlzLl9zZWxlY3Rpb25FbmQ7cmV0dXJuISghcnx8IWkpJiYodGhpcy5fY29sdW1uU2VsZWN0TW9kZT9yWzBdPD1pWzBdP2U+PXJbMF0mJnQ+PXJbMV0mJmU8aVswXSYmdDw9aVsxXTplPHJbMF0mJnQ+PXJbMV0mJmU+PWlbMF0mJnQ8PWlbMV06dD5yWzFdJiZ0PGlbMV18fHJbMV09PT1pWzFdJiZ0PT09clsxXSYmZT49clswXSYmZTxpWzBdfHxyWzFdPGlbMV0mJnQ9PT1pWzFdJiZlPGlbMF18fHJbMV08aVsxXSYmdD09PXJbMV0mJmU+PXJbMF0pfSxpKFtuKDIsdS5JQ2hhcmFjdGVySm9pbmVyU2VydmljZSksbigzLGwuSU9wdGlvbnNTZXJ2aWNlKSxuKDQsbC5JQ29yZVNlcnZpY2UpLG4oNSxsLklEZWNvcmF0aW9uU2VydmljZSldLGUpfSgpO2Z1bmN0aW9uIHAoZSx0LHIpe2Zvcig7ZS5sZW5ndGg8cjspZT10K2U7cmV0dXJuIGV9dC5Eb21SZW5kZXJlclJvd0ZhY3Rvcnk9ZH0sNDU2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uTW9kZWw9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZT0hMSx0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPTB9cmV0dXJuIGUucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5zZWxlY3Rpb25TdGFydD12b2lkIDAsdGhpcy5zZWxlY3Rpb25FbmQ9dm9pZCAwLHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aD0wfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImZpbmFsU2VsZWN0aW9uU3RhcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZT9bMCwwXTp0aGlzLnNlbGVjdGlvbkVuZCYmdGhpcy5zZWxlY3Rpb25TdGFydCYmdGhpcy5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpP3RoaXMuc2VsZWN0aW9uRW5kOnRoaXMuc2VsZWN0aW9uU3RhcnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJmaW5hbFNlbGVjdGlvbkVuZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzU2VsZWN0QWxsQWN0aXZlP1t0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UrdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTFdOnRoaXMuc2VsZWN0aW9uU3RhcnQ/IXRoaXMuc2VsZWN0aW9uRW5kfHx0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk/KGU9dGhpcy5zZWxlY3Rpb25TdGFydFswXSt0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKT50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM/ZSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM9PTA/W3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdK01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLTFdOltlJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdK01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpXTpbZSx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdXTp0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoJiZ0aGlzLnNlbGVjdGlvbkVuZFsxXT09PXRoaXMuc2VsZWN0aW9uU3RhcnRbMV0/KGU9dGhpcy5zZWxlY3Rpb25TdGFydFswXSt0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoKT50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM/W2UldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0rTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyldOltNYXRoLm1heChlLHRoaXMuc2VsZWN0aW9uRW5kWzBdKSx0aGlzLnNlbGVjdGlvbkVuZFsxXV06dGhpcy5zZWxlY3Rpb25FbmQ6dm9pZCAwO3ZhciBlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5zZWxlY3Rpb25TdGFydCx0PXRoaXMuc2VsZWN0aW9uRW5kO3JldHVybiEoIWV8fCF0KSYmKGVbMV0+dFsxXXx8ZVsxXT09PXRbMV0mJmVbMF0+dFswXSl9LGUucHJvdG90eXBlLm9uVHJpbT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zZWxlY3Rpb25TdGFydCYmKHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0tPWUpLHRoaXMuc2VsZWN0aW9uRW5kJiYodGhpcy5zZWxlY3Rpb25FbmRbMV0tPWUpLHRoaXMuc2VsZWN0aW9uRW5kJiZ0aGlzLnNlbGVjdGlvbkVuZFsxXTwwPyh0aGlzLmNsZWFyU2VsZWN0aW9uKCksITApOih0aGlzLnNlbGVjdGlvblN0YXJ0JiZ0aGlzLnNlbGVjdGlvblN0YXJ0WzFdPDAmJih0aGlzLnNlbGVjdGlvblN0YXJ0WzFdPTApLCExKX0sZX0oKTt0LlNlbGVjdGlvbk1vZGVsPXJ9LDQyODpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNoYXJTaXplU2VydmljZT12b2lkIDA7dmFyIG89cigyNTg1KSxzPXIoODQ2MCksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX29wdGlvbnNTZXJ2aWNlPXIsdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5fb25DaGFyU2l6ZUNoYW5nZT1uZXcgcy5FdmVudEVtaXR0ZXIsdGhpcy5fbWVhc3VyZVN0cmF0ZWd5PW5ldyBjKGUsdCx0aGlzLl9vcHRpb25zU2VydmljZSl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaGFzVmFsaWRTaXplIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2lkdGg+MCYmdGhpcy5oZWlnaHQ+MH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQ2hhclNpemVDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DaGFyU2l6ZUNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbWVhc3VyZVN0cmF0ZWd5Lm1lYXN1cmUoKTtlLndpZHRoPT09dGhpcy53aWR0aCYmZS5oZWlnaHQ9PT10aGlzLmhlaWdodHx8KHRoaXMud2lkdGg9ZS53aWR0aCx0aGlzLmhlaWdodD1lLmhlaWdodCx0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmZpcmUoKSl9LGkoW24oMixvLklPcHRpb25zU2VydmljZSldLGUpfSgpO3QuQ2hhclNpemVTZXJ2aWNlPWE7dmFyIGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9kb2N1bWVudD1lLHRoaXMuX3BhcmVudEVsZW1lbnQ9dCx0aGlzLl9vcHRpb25zU2VydmljZT1yLHRoaXMuX3Jlc3VsdD17d2lkdGg6MCxoZWlnaHQ6MH0sdGhpcy5fbWVhc3VyZUVsZW1lbnQ9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3BhbiIpLHRoaXMuX21lYXN1cmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50IiksdGhpcy5fbWVhc3VyZUVsZW1lbnQudGV4dENvbnRlbnQ9IlciLHRoaXMuX21lYXN1cmVFbGVtZW50LnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIiksdGhpcy5fcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9tZWFzdXJlRWxlbWVudCl9cmV0dXJuIGUucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oKXt0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250RmFtaWx5PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSx0aGlzLl9tZWFzdXJlRWxlbWVudC5zdHlsZS5mb250U2l6ZT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplKyJweCI7dmFyIGU9dGhpcy5fbWVhc3VyZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJuIDAhPT1lLndpZHRoJiYwIT09ZS5oZWlnaHQmJih0aGlzLl9yZXN1bHQud2lkdGg9ZS53aWR0aCx0aGlzLl9yZXN1bHQuaGVpZ2h0PU1hdGguY2VpbChlLmhlaWdodCkpLHRoaXMuX3Jlc3VsdH0sZX0oKX0sNDI2OTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPXQuSm9pbmVkQ2VsbERhdGE9dm9pZCAwO3ZhciBhPXIoMzczNCksYz1yKDY0MyksbD1yKDUxMSksaD1yKDI1ODUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSl7dmFyIG49ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmNvbnRlbnQ9MCxuLmNvbWJpbmVkRGF0YT0iIixuLmZnPXQuZmcsbi5iZz10LmJnLG4uY29tYmluZWREYXRhPXIsbi5fd2lkdGg9aSxufXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuaXNDb21iaW5lZD1mdW5jdGlvbigpe3JldHVybiAyMDk3MTUyfSx0LnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl93aWR0aH0sdC5wcm90b3R5cGUuZ2V0Q2hhcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb21iaW5lZERhdGF9LHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm4gMjA5NzE1MX0sdC5wcm90b3R5cGUuc2V0RnJvbUNoYXJEYXRhPWZ1bmN0aW9uKGUpe3Rocm93IG5ldyBFcnJvcigibm90IGltcGxlbWVudGVkIil9LHQucHJvdG90eXBlLmdldEFzQ2hhckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5mZyx0aGlzLmdldENoYXJzKCksdGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0Q29kZSgpXX0sdH0oYS5BdHRyaWJ1dGVEYXRhKTt0LkpvaW5lZENlbGxEYXRhPXU7dmFyIGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9jaGFyYWN0ZXJKb2luZXJzPVtdLHRoaXMuX25leHRDaGFyYWN0ZXJKb2luZXJJZD0wLHRoaXMuX3dvcmtDZWxsPW5ldyBsLkNlbGxEYXRhfXJldHVybiBlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihlKXt2YXIgdD17aWQ6dGhpcy5fbmV4dENoYXJhY3RlckpvaW5lcklkKyssaGFuZGxlcjplfTtyZXR1cm4gdGhpcy5fY2hhcmFjdGVySm9pbmVycy5wdXNoKHQpLHQuaWR9LGUucHJvdG90eXBlLmRlcmVnaXN0ZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDx0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDt0KyspaWYodGhpcy5fY2hhcmFjdGVySm9pbmVyc1t0XS5pZD09PWUpcmV0dXJuIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMuc3BsaWNlKHQsMSksITA7cmV0dXJuITF9LGUucHJvdG90eXBlLmdldEpvaW5lZENoYXJhY3RlcnM9ZnVuY3Rpb24oZSl7aWYoMD09PXRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoKXJldHVybltdO3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChlKTtpZighdHx8MD09PXQubGVuZ3RoKXJldHVybltdO2Zvcih2YXIgcj1bXSxpPXQudHJhbnNsYXRlVG9TdHJpbmcoITApLG49MCxvPTAscz0wLGE9dC5nZXRGZygwKSxsPXQuZ2V0QmcoMCksaD0wO2g8dC5nZXRUcmltbWVkTGVuZ3RoKCk7aCsrKWlmKHQubG9hZENlbGwoaCx0aGlzLl93b3JrQ2VsbCksMCE9PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCkpe2lmKHRoaXMuX3dvcmtDZWxsLmZnIT09YXx8dGhpcy5fd29ya0NlbGwuYmchPT1sKXtpZihoLW4+MSlmb3IodmFyIHU9dGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKGkscyxvLHQsbiksZj0wO2Y8dS5sZW5ndGg7ZisrKXIucHVzaCh1W2ZdKTtuPWgscz1vLGE9dGhpcy5fd29ya0NlbGwuZmcsbD10aGlzLl93b3JrQ2VsbC5iZ31vKz10aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aHx8Yy5XSElURVNQQUNFX0NFTExfQ0hBUi5sZW5ndGh9aWYodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLW4+MSlmb3IodT10aGlzLl9nZXRKb2luZWRSYW5nZXMoaSxzLG8sdCxuKSxmPTA7Zjx1Lmxlbmd0aDtmKyspci5wdXNoKHVbZl0pO3JldHVybiByfSxlLnByb3RvdHlwZS5fZ2V0Sm9pbmVkUmFuZ2VzPWZ1bmN0aW9uKHQscixpLG4sbyl7dmFyIHM9dC5zdWJzdHJpbmcocixpKSxhPVtdO3RyeXthPXRoaXMuX2NoYXJhY3RlckpvaW5lcnNbMF0uaGFuZGxlcihzKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpfWZvcih2YXIgYz0xO2M8dGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7YysrKXRyeXtmb3IodmFyIGw9dGhpcy5fY2hhcmFjdGVySm9pbmVyc1tjXS5oYW5kbGVyKHMpLGg9MDtoPGwubGVuZ3RoO2grKyllLl9tZXJnZVJhbmdlcyhhLGxbaF0pfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9cmV0dXJuIHRoaXMuX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcyhhLG4sbyksYX0sZS5wcm90b3R5cGUuX3N0cmluZ1Jhbmdlc1RvQ2VsbFJhbmdlcz1mdW5jdGlvbihlLHQscil7dmFyIGk9MCxuPSExLG89MCxzPWVbaV07aWYocyl7Zm9yKHZhciBhPXI7YTx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7YSsrKXt2YXIgbD10LmdldFdpZHRoKGEpLGg9dC5nZXRTdHJpbmcoYSkubGVuZ3RofHxjLldISVRFU1BBQ0VfQ0VMTF9DSEFSLmxlbmd0aDtpZigwIT09bCl7aWYoIW4mJnNbMF08PW8mJihzWzBdPWEsbj0hMCksc1sxXTw9byl7aWYoc1sxXT1hLCEocz1lWysraV0pKWJyZWFrO3NbMF08PW8/KHNbMF09YSxuPSEwKTpuPSExfW8rPWh9fXMmJihzWzFdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9fSxlLl9tZXJnZVJhbmdlcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0hMSxpPTA7aTxlLmxlbmd0aDtpKyspe3ZhciBuPWVbaV07aWYocil7aWYodFsxXTw9blswXSlyZXR1cm4gZVtpLTFdWzFdPXRbMV0sZTtpZih0WzFdPD1uWzFdKXJldHVybiBlW2ktMV1bMV09TWF0aC5tYXgodFsxXSxuWzFdKSxlLnNwbGljZShpLDEpLGU7ZS5zcGxpY2UoaSwxKSxpLS19ZWxzZXtpZih0WzFdPD1uWzBdKXJldHVybiBlLnNwbGljZShpLDAsdCksZTtpZih0WzFdPD1uWzFdKXJldHVybiBuWzBdPU1hdGgubWluKHRbMF0sblswXSksZTt0WzBdPG5bMV0mJihuWzBdPU1hdGgubWluKHRbMF0sblswXSkscj0hMCl9fXJldHVybiByP2VbZS5sZW5ndGgtMV1bMV09dFsxXTplLnB1c2godCksZX0sZT1vKFtzKDAsaC5JQnVmZmVyU2VydmljZSldLGUpfSgpO3QuQ2hhcmFjdGVySm9pbmVyU2VydmljZT1mfSw1MTE0OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZUJyb3dzZXJTZXJ2aWNlPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fdGV4dGFyZWE9ZX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0ZvY3VzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5fdGV4dGFyZWEuZ2V0Um9vdE5vZGU/dGhpcy5fdGV4dGFyZWEuZ2V0Um9vdE5vZGUoKTpkb2N1bWVudCkuYWN0aXZlRWxlbWVudD09PXRoaXMuX3RleHRhcmVhJiZkb2N1bWVudC5oYXNGb2N1cygpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGV9KCk7dC5Db3JlQnJvd3NlclNlcnZpY2U9cn0sODkzNDpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1vdXNlU2VydmljZT12b2lkIDA7dmFyIG89cig0NzI1KSxzPXIoOTgwNiksYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9yZW5kZXJTZXJ2aWNlPWUsdGhpcy5fY2hhclNpemVTZXJ2aWNlPXR9cmV0dXJuIGUucHJvdG90eXBlLmdldENvb3Jkcz1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybigwLHMuZ2V0Q29vcmRzKSh3aW5kb3csZSx0LHIsaSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplLHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgsdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbil9LGUucHJvdG90eXBlLmdldFJhd0J5dGVDb29yZHM9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG49dGhpcy5nZXRDb29yZHMoZSx0LHIsaSk7cmV0dXJuKDAscy5nZXRSYXdCeXRlQ29vcmRzKShuKX0saShbbigwLG8uSVJlbmRlclNlcnZpY2UpLG4oMSxvLklDaGFyU2l6ZVNlcnZpY2UpXSxlKX0oKTt0Lk1vdXNlU2VydmljZT1hfSwzMjMwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlJlbmRlclNlcnZpY2U9dm9pZCAwO3ZhciBhPXIoNjE5MyksYz1yKDg0NjApLGw9cig4NDQpLGg9cig1NTk2KSx1PXIoMzY1NiksZj1yKDI1ODUpLF89cig0NzI1KSxkPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsbCl7dmFyIGY9ZS5jYWxsKHRoaXMpfHx0aGlzO2lmKGYuX3JlbmRlcmVyPXQsZi5fcm93Q291bnQ9cixmLl9jaGFyU2l6ZVNlcnZpY2U9byxmLl9pc1BhdXNlZD0hMSxmLl9uZWVkc0Z1bGxSZWZyZXNoPSExLGYuX2lzTmV4dFJlbmRlclJlZHJhd09ubHk9ITAsZi5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoPSExLGYuX2NhbnZhc1dpZHRoPTAsZi5fY2FudmFzSGVpZ2h0PTAsZi5fc2VsZWN0aW9uU3RhdGU9e3N0YXJ0OnZvaWQgMCxlbmQ6dm9pZCAwLGNvbHVtblNlbGVjdE1vZGU6ITF9LGYuX29uRGltZW5zaW9uc0NoYW5nZT1uZXcgYy5FdmVudEVtaXR0ZXIsZi5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlPW5ldyBjLkV2ZW50RW1pdHRlcixmLl9vblJlbmRlcj1uZXcgYy5FdmVudEVtaXR0ZXIsZi5fb25SZWZyZXNoUmVxdWVzdD1uZXcgYy5FdmVudEVtaXR0ZXIsZi5yZWdpc3Rlcih7ZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBmLl9yZW5kZXJlci5kaXNwb3NlKCl9fSksZi5fcmVuZGVyRGVib3VuY2VyPW5ldyBhLlJlbmRlckRlYm91bmNlcigoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZi5fcmVuZGVyUm93cyhlLHQpfSkpLGYucmVnaXN0ZXIoZi5fcmVuZGVyRGVib3VuY2VyKSxmLl9zY3JlZW5EcHJNb25pdG9yPW5ldyBoLlNjcmVlbkRwck1vbml0b3IsZi5fc2NyZWVuRHByTW9uaXRvci5zZXRMaXN0ZW5lcigoZnVuY3Rpb24oKXtyZXR1cm4gZi5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKX0pKSxmLnJlZ2lzdGVyKGYuX3NjcmVlbkRwck1vbml0b3IpLGYucmVnaXN0ZXIobC5vblJlc2l6ZSgoZnVuY3Rpb24oKXtyZXR1cm4gZi5fZnVsbFJlZnJlc2goKX0pKSksZi5yZWdpc3RlcihsLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPWYuX3JlbmRlcmVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbGVhcigpfSkpKSxmLnJlZ2lzdGVyKG4ub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGYuX2hhbmRsZU9wdGlvbnNDaGFuZ2VkKCl9KSkpLGYucmVnaXN0ZXIoZi5fY2hhclNpemVTZXJ2aWNlLm9uQ2hhclNpemVDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGYub25DaGFyU2l6ZUNoYW5nZWQoKX0pKSksZi5yZWdpc3RlcihzLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIGYuX2Z1bGxSZWZyZXNoKCl9KSkpLGYucmVnaXN0ZXIocy5vbkRlY29yYXRpb25SZW1vdmVkKChmdW5jdGlvbigpe3JldHVybiBmLl9mdWxsUmVmcmVzaCgpfSkpKSxmLl9yZW5kZXJlci5vblJlcXVlc3RSZWRyYXcoKGZ1bmN0aW9uKGUpe3JldHVybiBmLnJlZnJlc2hSb3dzKGUuc3RhcnQsZS5lbmQsITApfSkpLGYucmVnaXN0ZXIoKDAsdS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHdpbmRvdywicmVzaXplIiwoZnVuY3Rpb24oKXtyZXR1cm4gZi5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKX0pKSksIkludGVyc2VjdGlvbk9ic2VydmVyImluIHdpbmRvdyl7dmFyIF89bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25JbnRlcnNlY3Rpb25DaGFuZ2UoZVtlLmxlbmd0aC0xXSl9KSx7dGhyZXNob2xkOjB9KTtfLm9ic2VydmUoaSksZi5yZWdpc3Rlcih7ZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBfLmRpc2Nvbm5lY3QoKX19KX1yZXR1cm4gZn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EaW1lbnNpb25zQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlbmRlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlbmRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVmcmVzaFJlcXVlc3QiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZWZyZXNoUmVxdWVzdC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImRpbWVuc2lvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9uc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5fb25JbnRlcnNlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5faXNQYXVzZWQ9dm9pZCAwPT09ZS5pc0ludGVyc2VjdGluZz8wPT09ZS5pbnRlcnNlY3Rpb25SYXRpbzohZS5pc0ludGVyc2VjdGluZyx0aGlzLl9pc1BhdXNlZHx8dGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZXx8dGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSwhdGhpcy5faXNQYXVzZWQmJnRoaXMuX25lZWRzRnVsbFJlZnJlc2gmJih0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSksdGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMSl9LHQucHJvdG90eXBlLnJlZnJlc2hSb3dzPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5faXNQYXVzZWQ/dGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMDoocnx8KHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHk9ITEpLHRoaXMuX3JlbmRlckRlYm91bmNlci5yZWZyZXNoKGUsdCx0aGlzLl9yb3dDb3VudCkpfSx0LnByb3RvdHlwZS5fcmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe3RoaXMuX3JlbmRlcmVyLnJlbmRlclJvd3MoZSx0KSx0aGlzLl9uZWVkc1NlbGVjdGlvblJlZnJlc2gmJih0aGlzLl9yZW5kZXJlci5vblNlbGVjdGlvbkNoYW5nZWQodGhpcy5fc2VsZWN0aW9uU3RhdGUuc3RhcnQsdGhpcy5fc2VsZWN0aW9uU3RhdGUuZW5kLHRoaXMuX3NlbGVjdGlvblN0YXRlLmNvbHVtblNlbGVjdE1vZGUpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaD0hMSksdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seXx8dGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmZpcmUoe3N0YXJ0OmUsZW5kOnR9KSx0aGlzLl9vblJlbmRlci5maXJlKHtzdGFydDplLGVuZDp0fSksdGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seT0hMH0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcm93Q291bnQ9dCx0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKX0sdC5wcm90b3R5cGUuX2hhbmRsZU9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIub25PcHRpb25zQ2hhbmdlZCgpLHRoaXMucmVmcmVzaFJvd3MoMCx0aGlzLl9yb3dDb3VudC0xKSx0aGlzLl9maXJlT25DYW52YXNSZXNpemUoKX0sdC5wcm90b3R5cGUuX2ZpcmVPbkNhbnZhc1Jlc2l6ZT1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzV2lkdGg9PT10aGlzLl9jYW52YXNXaWR0aCYmdGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ9PT10aGlzLl9jYW52YXNIZWlnaHR8fHRoaXMuX29uRGltZW5zaW9uc0NoYW5nZS5maXJlKHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5zZXRSZW5kZXJlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3JlbmRlcmVyLmRpc3Bvc2UoKSx0aGlzLl9yZW5kZXJlcj1lLHRoaXMuX3JlbmRlcmVyLm9uUmVxdWVzdFJlZHJhdygoZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVmcmVzaFJvd3MoZS5zdGFydCxlLmVuZCwhMCl9KSksdGhpcy5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoPSEwLHRoaXMuX2Z1bGxSZWZyZXNoKCl9LHQucHJvdG90eXBlLmFkZFJlZnJlc2hDYWxsYmFjaz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fcmVuZGVyRGVib3VuY2VyLmFkZFJlZnJlc2hDYWxsYmFjayhlKX0sdC5wcm90b3R5cGUuX2Z1bGxSZWZyZXNoPWZ1bmN0aW9uKCl7dGhpcy5faXNQYXVzZWQ/dGhpcy5fbmVlZHNGdWxsUmVmcmVzaD0hMDp0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSl9LHQucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dmFyIGUsdDtudWxsPT09KHQ9bnVsbD09PShlPXRoaXMuX3JlbmRlcmVyKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jbGVhclRleHR1cmVBdGxhcyl8fHZvaWQgMD09PXR8fHQuY2FsbChlKSx0aGlzLl9mdWxsUmVmcmVzaCgpfSx0LnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVuZGVyZXIuc2V0Q29sb3JzKGUpLHRoaXMuX2Z1bGxSZWZyZXNoKCl9LHQucHJvdG90eXBlLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZT1mdW5jdGlvbigpe3RoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCksdGhpcy5fcmVuZGVyZXIub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCksdGhpcy5yZWZyZXNoUm93cygwLHRoaXMuX3Jvd0NvdW50LTEpfSx0LnByb3RvdHlwZS5vblJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3JlbmRlcmVyLm9uUmVzaXplKGUsdCksdGhpcy5fZnVsbFJlZnJlc2goKX0sdC5wcm90b3R5cGUub25DaGFyU2l6ZUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkNoYXJTaXplQ2hhbmdlZCgpfSx0LnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkJsdXIoKX0sdC5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLm9uRm9jdXMoKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydD1lLHRoaXMuX3NlbGVjdGlvblN0YXRlLmVuZD10LHRoaXMuX3NlbGVjdGlvblN0YXRlLmNvbHVtblNlbGVjdE1vZGU9cix0aGlzLl9yZW5kZXJlci5vblNlbGVjdGlvbkNoYW5nZWQoZSx0LHIpfSx0LnByb3RvdHlwZS5vbkN1cnNvck1vdmU9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkN1cnNvck1vdmUoKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5jbGVhcigpfSxvKFtzKDMsZi5JT3B0aW9uc1NlcnZpY2UpLHMoNCxfLklDaGFyU2l6ZVNlcnZpY2UpLHMoNSxmLklEZWNvcmF0aW9uU2VydmljZSkscyg2LGYuSUJ1ZmZlclNlcnZpY2UpXSx0KX0obC5EaXNwb3NhYmxlKTt0LlJlbmRlclNlcnZpY2U9ZH0sOTMxMjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TZWxlY3Rpb25TZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDYxMTQpLGM9cig0NTYpLGw9cig1MTEpLGg9cig4NDYwKSx1PXIoNDcyNSksZj1yKDI1ODUpLF89cig5ODA2KSxkPXIoOTUwNCkscD1yKDg0NCksdj1yKDQ4NDEpLHk9U3RyaW5nLmZyb21DaGFyQ29kZSgxNjApLGc9bmV3IFJlZ0V4cCh5LCJnIiksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsdSl7dmFyIGY9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBmLl9lbGVtZW50PXQsZi5fc2NyZWVuRWxlbWVudD1yLGYuX2xpbmtpZmllcj1pLGYuX2J1ZmZlclNlcnZpY2U9bixmLl9jb3JlU2VydmljZT1vLGYuX21vdXNlU2VydmljZT1zLGYuX29wdGlvbnNTZXJ2aWNlPWEsZi5fcmVuZGVyU2VydmljZT11LGYuX2RyYWdTY3JvbGxBbW91bnQ9MCxmLl9lbmFibGVkPSEwLGYuX3dvcmtDZWxsPW5ldyBsLkNlbGxEYXRhLGYuX21vdXNlRG93blRpbWVTdGFtcD0wLGYuX29sZEhhc1NlbGVjdGlvbj0hMSxmLl9vbGRTZWxlY3Rpb25TdGFydD12b2lkIDAsZi5fb2xkU2VsZWN0aW9uRW5kPXZvaWQgMCxmLl9vbkxpbnV4TW91c2VTZWxlY3Rpb249Zi5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLGYuX29uUmVkcmF3UmVxdWVzdD1mLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksZi5fb25TZWxlY3Rpb25DaGFuZ2U9Zi5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLGYuX29uUmVxdWVzdFNjcm9sbExpbmVzPWYucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxmLl9tb3VzZU1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gZi5fb25Nb3VzZU1vdmUoZSl9LGYuX21vdXNlVXBMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gZi5fb25Nb3VzZVVwKGUpfSxmLl9jb3JlU2VydmljZS5vblVzZXJJbnB1dCgoZnVuY3Rpb24oKXtmLmhhc1NlbGVjdGlvbiYmZi5jbGVhclNlbGVjdGlvbigpfSkpLGYuX3RyaW1MaXN0ZW5lcj1mLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5vblRyaW0oKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vblRyaW0oZSl9KSksZi5yZWdpc3RlcihmLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uQnVmZmVyQWN0aXZhdGUoZSl9KSkpLGYuZW5hYmxlKCksZi5fbW9kZWw9bmV3IGMuU2VsZWN0aW9uTW9kZWwoZi5fYnVmZmVyU2VydmljZSksZi5fYWN0aXZlU2VsZWN0aW9uTW9kZT0wLGZ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uTGludXhNb3VzZVNlbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZWRyYXciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZWRyYXdSZXF1ZXN0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TZWxlY3Rpb25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RTY3JvbGxMaW5lcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RTY3JvbGxMaW5lcy5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5jbGVhclNlbGVjdGlvbigpfSx0LnByb3RvdHlwZS5kaXNhYmxlPWZ1bmN0aW9uKCl7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuX2VuYWJsZWQ9ITF9LHQucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuX2VuYWJsZWQ9ITB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2VsZWN0aW9uU3RhcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInNlbGVjdGlvbkVuZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImhhc1NlbGVjdGlvbiIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsdD10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtyZXR1cm4hKCFlfHwhdHx8ZVswXT09PXRbMF0mJmVbMV09PT10WzFdKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInNlbGVjdGlvblRleHQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7aWYoIWV8fCF0KXJldHVybiIiO3ZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLGk9W107aWYoMz09PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUpe2lmKGVbMF09PT10WzBdKXJldHVybiIiO2Zvcih2YXIgbj1lWzBdPHRbMF0/ZVswXTp0WzBdLG89ZVswXTx0WzBdP3RbMF06ZVswXSxzPWVbMV07czw9dFsxXTtzKyspe3ZhciBjPXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHMsITAsbixvKTtpLnB1c2goYyl9fWVsc2V7dmFyIGw9ZVsxXT09PXRbMV0/dFswXTp2b2lkIDA7Zm9yKGkucHVzaChyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlWzFdLCEwLGVbMF0sbCkpLHM9ZVsxXSsxO3M8PXRbMV0tMTtzKyspe3ZhciBoPXIubGluZXMuZ2V0KHMpO2M9ci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcocywhMCksKG51bGw9PWg/dm9pZCAwOmguaXNXcmFwcGVkKT9pW2kubGVuZ3RoLTFdKz1jOmkucHVzaChjKX1lWzFdIT09dFsxXSYmKGg9ci5saW5lcy5nZXQodFsxXSksYz1yLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyh0WzFdLCEwLDAsdFswXSksaCYmaC5pc1dyYXBwZWQ/aVtpLmxlbmd0aC0xXSs9YzppLnB1c2goYykpfXJldHVybiBpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShnLCIgIil9KSkuam9pbihhLmlzV2luZG93cz8iXHJcbiI6IlxuIil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpLHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMucmVmcmVzaCgpLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0sdC5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZXx8KHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZWZyZXNoKCl9KSkpLGEuaXNMaW51eCYmZSYmdGhpcy5zZWxlY3Rpb25UZXh0Lmxlbmd0aCYmdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uLmZpcmUodGhpcy5zZWxlY3Rpb25UZXh0KX0sdC5wcm90b3R5cGUuX3JlZnJlc2g9ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9dm9pZCAwLHRoaXMuX29uUmVkcmF3UmVxdWVzdC5maXJlKHtzdGFydDp0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LGVuZDp0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZCxjb2x1bW5TZWxlY3RNb2RlOjM9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlfSl9LHQucHJvdG90eXBlLl9pc0NsaWNrSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSkscj10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LGk9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7cmV0dXJuISEociYmaSYmdCkmJnRoaXMuX2FyZUNvb3Jkc0luU2VsZWN0aW9uKHQscixpKX0sdC5wcm90b3R5cGUuaXNDZWxsSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LGk9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7cmV0dXJuISghcnx8IWkpJiZ0aGlzLl9hcmVDb29yZHNJblNlbGVjdGlvbihbZSx0XSxyLGkpfSx0LnByb3RvdHlwZS5fYXJlQ29vcmRzSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0LHIpe3JldHVybiBlWzFdPnRbMV0mJmVbMV08clsxXXx8dFsxXT09PXJbMV0mJmVbMV09PT10WzFdJiZlWzBdPj10WzBdJiZlWzBdPHJbMF18fHRbMV08clsxXSYmZVsxXT09PXJbMV0mJmVbMF08clswXXx8dFsxXTxyWzFdJiZlWzFdPT09dFsxXSYmZVswXT49dFswXX0sdC5wcm90b3R5cGUuX3NlbGVjdFdvcmRBdEN1cnNvcj1mdW5jdGlvbihlLHQpe3ZhciByLGksbj1udWxsPT09KGk9bnVsbD09PShyPXRoaXMuX2xpbmtpZmllci5jdXJyZW50TGluayl8fHZvaWQgMD09PXI/dm9pZCAwOnIubGluayl8fHZvaWQgMD09PWk/dm9pZCAwOmkucmFuZ2U7aWYobilyZXR1cm4gdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9W24uc3RhcnQueC0xLG4uc3RhcnQueS0xXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0oMCx2LmdldFJhbmdlTGVuZ3RoKShuLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCwhMDt2YXIgbz10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKTtyZXR1cm4hIW8mJih0aGlzLl9zZWxlY3RXb3JkQXQobyx0KSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwLCEwKX0sdC5wcm90b3R5cGUuc2VsZWN0QWxsPWZ1bmN0aW9uKCl7dGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmU9ITAsdGhpcy5yZWZyZXNoKCksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSx0LnByb3RvdHlwZS5zZWxlY3RMaW5lcz1mdW5jdGlvbihlLHQpe3RoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCksZT1NYXRoLm1heChlLDApLHQ9TWF0aC5taW4odCx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgtMSksdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9WzAsZV0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPVt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdF0sdGhpcy5yZWZyZXNoKCksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSx0LnByb3RvdHlwZS5fb25UcmltPWZ1bmN0aW9uKGUpe3RoaXMuX21vZGVsLm9uVHJpbShlKSYmdGhpcy5yZWZyZXNoKCl9LHQucHJvdG90eXBlLl9nZXRNb3VzZUJ1ZmZlckNvb3Jkcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGUsdGhpcy5fc2NyZWVuRWxlbWVudCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLCEwKTtpZih0KXJldHVybiB0WzBdLS0sdFsxXS0tLHRbMV0rPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHR9LHQucHJvdG90eXBlLl9nZXRNb3VzZUV2ZW50U2Nyb2xsQW1vdW50PWZ1bmN0aW9uKGUpe3ZhciB0PSgwLF8uZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQpKHdpbmRvdyxlLHRoaXMuX3NjcmVlbkVsZW1lbnQpWzFdLHI9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmNhbnZhc0hlaWdodDtyZXR1cm4gdD49MCYmdDw9cj8wOih0PnImJih0LT1yKSx0PU1hdGgubWluKE1hdGgubWF4KHQsLTUwKSw1MCksKHQvPTUwKS9NYXRoLmFicyh0KStNYXRoLnJvdW5kKDE0KnQpKX0sdC5wcm90b3R5cGUuc2hvdWxkRm9yY2VTZWxlY3Rpb249ZnVuY3Rpb24oZSl7cmV0dXJuIGEuaXNNYWM/ZS5hbHRLZXkmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb246ZS5zaGlmdEtleX0sdC5wcm90b3R5cGUub25Nb3VzZURvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5fbW91c2VEb3duVGltZVN0YW1wPWUudGltZVN0YW1wLCgyIT09ZS5idXR0b258fCF0aGlzLmhhc1NlbGVjdGlvbikmJjA9PT1lLmJ1dHRvbil7aWYoIXRoaXMuX2VuYWJsZWQpe2lmKCF0aGlzLnNob3VsZEZvcmNlU2VsZWN0aW9uKGUpKXJldHVybjtlLnN0b3BQcm9wYWdhdGlvbigpfWUucHJldmVudERlZmF1bHQoKSx0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PTAsdGhpcy5fZW5hYmxlZCYmZS5zaGlmdEtleT90aGlzLl9vbkluY3JlbWVudGFsQ2xpY2soZSk6MT09PWUuZGV0YWlsP3RoaXMuX29uU2luZ2xlQ2xpY2soZSk6Mj09PWUuZGV0YWlsP3RoaXMuX29uRG91YmxlQ2xpY2soZSk6Mz09PWUuZGV0YWlsJiZ0aGlzLl9vblRyaXBsZUNsaWNrKGUpLHRoaXMuX2FkZE1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMucmVmcmVzaCghMCl9fSx0LnByb3RvdHlwZS5fYWRkTW91c2VEb3duTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQmJih0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciksdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMuX21vdXNlVXBMaXN0ZW5lcikpLHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fZHJhZ1Njcm9sbCgpfSksNTApfSx0LnByb3RvdHlwZS5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50JiYodGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpLHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLl9tb3VzZVVwTGlzdGVuZXIpKSxjbGVhckludGVydmFsKHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyKSx0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lcj12b2lkIDB9LHQucHJvdG90eXBlLl9vbkluY3JlbWVudGFsQ2xpY2s9ZnVuY3Rpb24oZSl7dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSkpfSx0LnByb3RvdHlwZS5fb25TaW5nbGVDbGljaz1mdW5jdGlvbihlKXtpZih0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0wLHRoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlPSExLHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9dGhpcy5zaG91bGRDb2x1bW5TZWxlY3QoZSk/MzowLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KXt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwO3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFsxXSk7dCYmdC5sZW5ndGghPT10aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSYmMD09PXQuaGFzV2lkdGgodGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0pJiZ0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSsrfX0sdC5wcm90b3R5cGUuX29uRG91YmxlQ2xpY2s9ZnVuY3Rpb24oZSl7dGhpcy5fc2VsZWN0V29yZEF0Q3Vyc29yKGUsITApJiYodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT0xKX0sdC5wcm90b3R5cGUuX29uVHJpcGxlQ2xpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSk7dCYmKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9Mix0aGlzLl9zZWxlY3RMaW5lQXQodFsxXSkpfSx0LnByb3RvdHlwZS5zaG91bGRDb2x1bW5TZWxlY3Q9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuYWx0S2V5JiYhKGEuaXNNYWMmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb24pfSx0LnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24oZSl7aWYoZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCl7dmFyIHQ9dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kP1t0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdXTpudWxsO2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQpezI9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlP3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXTx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFsxXT90aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09MDp0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOjE9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlJiZ0aGlzLl9zZWxlY3RUb1dvcmRBdCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQpLHRoaXMuX2RyYWdTY3JvbGxBbW91bnQ9dGhpcy5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudChlKSwzIT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmKHRoaXMuX2RyYWdTY3JvbGxBbW91bnQ+MD90aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOnRoaXMuX2RyYWdTY3JvbGxBbW91bnQ8MCYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT0wKSk7dmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdPHIubGluZXMubGVuZ3RoKXt2YXIgaT1yLmxpbmVzLmdldCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV0pO2kmJjA9PT1pLmhhc1dpZHRoKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSkmJnRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSsrfXQmJnRbMF09PT10aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0mJnRbMV09PT10aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV18fHRoaXMucmVmcmVzaCghMCl9ZWxzZSB0aGlzLnJlZnJlc2goITApfX0sdC5wcm90b3R5cGUuX2RyYWdTY3JvbGw9ZnVuY3Rpb24oKXtpZih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQmJnRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0JiZ0aGlzLl9kcmFnU2Nyb2xsQW1vdW50KXt0aGlzLl9vblJlcXVlc3RTY3JvbGxMaW5lcy5maXJlKHthbW91bnQ6dGhpcy5fZHJhZ1Njcm9sbEFtb3VudCxzdXBwcmVzc1Njcm9sbEV2ZW50OiExfSk7dmFyIGU9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7dGhpcy5fZHJhZ1Njcm9sbEFtb3VudD4wPygzIT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXT1NYXRoLm1pbihlLnlkaXNwK3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyxlLmxpbmVzLmxlbmd0aC0xKSk6KDMhPT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlJiYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPTApLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXT1lLnlkaXNwKSx0aGlzLnJlZnJlc2goKX19LHQucHJvdG90eXBlLl9vbk1vdXNlVXA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50aW1lU3RhbXAtdGhpcy5fbW91c2VEb3duVGltZVN0YW1wO2lmKHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMuc2VsZWN0aW9uVGV4dC5sZW5ndGg8PTEmJnQ8NTAwJiZlLmFsdEtleSYmdGhpcy5fb3B0aW9uc1NlcnZpY2UuZ2V0T3B0aW9uKCJhbHRDbGlja01vdmVzQ3Vyc29yIikpe2lmKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlPT09dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Ape3ZhciByPXRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSx0aGlzLl9lbGVtZW50LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsITEpO2lmKHImJnZvaWQgMCE9PXJbMF0mJnZvaWQgMCE9PXJbMV0pe3ZhciBpPSgwLGQubW92ZVRvQ2VsbFNlcXVlbmNlKShyWzBdLTEsclsxXS0xLHRoaXMuX2J1ZmZlclNlcnZpY2UsdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyk7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChpLCEwKX19fWVsc2UgdGhpcy5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCl9LHQucHJvdG90eXBlLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQscj0hKCFlfHwhdHx8ZVswXT09PXRbMF0mJmVbMV09PT10WzFdKTtyP2UmJnQmJih0aGlzLl9vbGRTZWxlY3Rpb25TdGFydCYmdGhpcy5fb2xkU2VsZWN0aW9uRW5kJiZlWzBdPT09dGhpcy5fb2xkU2VsZWN0aW9uU3RhcnRbMF0mJmVbMV09PT10aGlzLl9vbGRTZWxlY3Rpb25TdGFydFsxXSYmdFswXT09PXRoaXMuX29sZFNlbGVjdGlvbkVuZFswXSYmdFsxXT09PXRoaXMuX29sZFNlbGVjdGlvbkVuZFsxXXx8dGhpcy5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKGUsdCxyKSk6dGhpcy5fb2xkSGFzU2VsZWN0aW9uJiZ0aGlzLl9maXJlT25TZWxlY3Rpb25DaGFuZ2UoZSx0LHIpfSx0LnByb3RvdHlwZS5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9vbGRTZWxlY3Rpb25TdGFydD1lLHRoaXMuX29sZFNlbGVjdGlvbkVuZD10LHRoaXMuX29sZEhhc1NlbGVjdGlvbj1yLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0sdC5wcm90b3R5cGUuX29uQnVmZmVyQWN0aXZhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5fdHJpbUxpc3RlbmVyLmRpc3Bvc2UoKSx0aGlzLl90cmltTGlzdGVuZXI9ZS5hY3RpdmVCdWZmZXIubGluZXMub25UcmltKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fb25UcmltKGUpfSkpfSx0LnByb3RvdHlwZS5fY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10WzBdLGk9MDt0WzBdPj1pO2krKyl7dmFyIG49ZS5sb2FkQ2VsbChpLHRoaXMuX3dvcmtDZWxsKS5nZXRDaGFycygpLmxlbmd0aDswPT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKT9yLS06bj4xJiZ0WzBdIT09aSYmKHIrPW4tMSl9cmV0dXJuIHJ9LHQucHJvdG90eXBlLnNldFNlbGVjdGlvbj1mdW5jdGlvbihlLHQscil7dGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bZSx0XSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD1yLHRoaXMucmVmcmVzaCgpLHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpfSx0LnByb3RvdHlwZS5yaWdodENsaWNrU2VsZWN0PWZ1bmN0aW9uKGUpe3RoaXMuX2lzQ2xpY2tJblNlbGVjdGlvbihlKXx8KHRoaXMuX3NlbGVjdFdvcmRBdEN1cnNvcihlLCExKSYmdGhpcy5yZWZyZXNoKCEwKSx0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKSl9LHQucHJvdG90eXBlLl9nZXRXb3JkQXQ9ZnVuY3Rpb24oZSx0LHIsaSl7aWYodm9pZCAwPT09ciYmKHI9ITApLHZvaWQgMD09PWkmJihpPSEwKSwhKGVbMF0+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykpe3ZhciBuPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLG89bi5saW5lcy5nZXQoZVsxXSk7aWYobyl7dmFyIHM9bi50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoZVsxXSwhMSksYT10aGlzLl9jb252ZXJ0Vmlld3BvcnRDb2xUb0NoYXJhY3RlckluZGV4KG8sZSksYz1hLGw9ZVswXS1hLGg9MCx1PTAsZj0wLF89MDtpZigiICI9PT1zLmNoYXJBdChhKSl7Zm9yKDthPjAmJiIgIj09PXMuY2hhckF0KGEtMSk7KWEtLTtmb3IoO2M8cy5sZW5ndGgmJiIgIj09PXMuY2hhckF0KGMrMSk7KWMrK31lbHNle3ZhciBkPWVbMF0scD1lWzBdOzA9PT1vLmdldFdpZHRoKGQpJiYoaCsrLGQtLSksMj09PW8uZ2V0V2lkdGgocCkmJih1KysscCsrKTt2YXIgdj1vLmdldFN0cmluZyhwKS5sZW5ndGg7Zm9yKHY+MSYmKF8rPXYtMSxjKz12LTEpO2Q+MCYmYT4wJiYhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihvLmxvYWRDZWxsKGQtMSx0aGlzLl93b3JrQ2VsbCkpOyl7by5sb2FkQ2VsbChkLTEsdGhpcy5fd29ya0NlbGwpO3ZhciB5PXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoOzA9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpPyhoKyssZC0tKTp5PjEmJihmKz15LTEsYS09eS0xKSxhLS0sZC0tfWZvcig7cDxvLmxlbmd0aCYmYysxPHMubGVuZ3RoJiYhdGhpcy5faXNDaGFyV29yZFNlcGFyYXRvcihvLmxvYWRDZWxsKHArMSx0aGlzLl93b3JrQ2VsbCkpOyl7by5sb2FkQ2VsbChwKzEsdGhpcy5fd29ya0NlbGwpO3ZhciBnPXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RoOzI9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpPyh1KysscCsrKTpnPjEmJihfKz1nLTEsYys9Zy0xKSxjKysscCsrfX1jKys7dmFyIG09YStsLWgrZixiPU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxjLWEraCt1LWYtXyk7aWYodHx8IiIhPT1zLnNsaWNlKGEsYykudHJpbSgpKXtpZihyJiYwPT09bSYmMzIhPT1vLmdldENvZGVQb2ludCgwKSl7dmFyIFM9bi5saW5lcy5nZXQoZVsxXS0xKTtpZihTJiZvLmlzV3JhcHBlZCYmMzIhPT1TLmdldENvZGVQb2ludCh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSkpe3ZhciBDPXRoaXMuX2dldFdvcmRBdChbdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEsZVsxXS0xXSwhMSwhMCwhMSk7aWYoQyl7dmFyIHc9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLUMuc3RhcnQ7bS09dyxiKz13fX19aWYoaSYmbStiPT09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiYzMiE9PW8uZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKSl7dmFyIEw9bi5saW5lcy5nZXQoZVsxXSsxKTtpZigobnVsbD09TD92b2lkIDA6TC5pc1dyYXBwZWQpJiYzMiE9PUwuZ2V0Q29kZVBvaW50KDApKXt2YXIgRT10aGlzLl9nZXRXb3JkQXQoWzAsZVsxXSsxXSwhMSwhMSwhMCk7RSYmKGIrPUUubGVuZ3RoKX19cmV0dXJue3N0YXJ0Om0sbGVuZ3RoOmJ9fX19fSx0LnByb3RvdHlwZS5fc2VsZWN0V29yZEF0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZ2V0V29yZEF0KGUsdCk7aWYocil7Zm9yKDtyLnN0YXJ0PDA7KXIuc3RhcnQrPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxlWzFdLS07dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9W3Iuc3RhcnQsZVsxXV0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGg9ci5sZW5ndGh9fSx0LnByb3RvdHlwZS5fc2VsZWN0VG9Xb3JkQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZ2V0V29yZEF0KGUsITApO2lmKHQpe2Zvcih2YXIgcj1lWzFdO3Quc3RhcnQ8MDspdC5zdGFydCs9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHItLTtpZighdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKSlmb3IoO3Quc3RhcnQrdC5sZW5ndGg+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzOyl0Lmxlbmd0aC09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHIrKzt0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9W3RoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk/dC5zdGFydDp0LnN0YXJ0K3QubGVuZ3RoLHJdfX0sdC5wcm90b3R5cGUuX2lzQ2hhcldvcmRTZXBhcmF0b3I9ZnVuY3Rpb24oZSl7cmV0dXJuIDAhPT1lLmdldFdpZHRoKCkmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud29yZFNlcGFyYXRvci5pbmRleE9mKGUuZ2V0Q2hhcnMoKSk+PTB9LHQucHJvdG90eXBlLl9zZWxlY3RMaW5lQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZShlKSxyPXtzdGFydDp7eDowLHk6dC5maXJzdH0sZW5kOnt4OnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xLHk6dC5sYXN0fX07dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9WzAsdC5maXJzdF0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD0oMCx2LmdldFJhbmdlTGVuZ3RoKShyLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyl9LG8oW3MoMyxmLklCdWZmZXJTZXJ2aWNlKSxzKDQsZi5JQ29yZVNlcnZpY2UpLHMoNSx1LklNb3VzZVNlcnZpY2UpLHMoNixmLklPcHRpb25zU2VydmljZSkscyg3LHUuSVJlbmRlclNlcnZpY2UpXSx0KX0ocC5EaXNwb3NhYmxlKTt0LlNlbGVjdGlvblNlcnZpY2U9bX0sNDcyNTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuSUNoYXJhY3RlckpvaW5lclNlcnZpY2U9dC5JU291bmRTZXJ2aWNlPXQuSVNlbGVjdGlvblNlcnZpY2U9dC5JUmVuZGVyU2VydmljZT10LklNb3VzZVNlcnZpY2U9dC5JQ29yZUJyb3dzZXJTZXJ2aWNlPXQuSUNoYXJTaXplU2VydmljZT12b2lkIDA7dmFyIGk9cig4MzQzKTt0LklDaGFyU2l6ZVNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJDaGFyU2l6ZVNlcnZpY2UiKSx0LklDb3JlQnJvd3NlclNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJDb3JlQnJvd3NlclNlcnZpY2UiKSx0LklNb3VzZVNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJNb3VzZVNlcnZpY2UiKSx0LklSZW5kZXJTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiUmVuZGVyU2VydmljZSIpLHQuSVNlbGVjdGlvblNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJTZWxlY3Rpb25TZXJ2aWNlIiksdC5JU291bmRTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiU291bmRTZXJ2aWNlIiksdC5JQ2hhcmFjdGVySm9pbmVyU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIkNoYXJhY3RlckpvaW5lclNlcnZpY2UiKX0sMzU3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU291bmRTZXJ2aWNlPXZvaWQgMDt2YXIgbz1yKDI1ODUpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX29wdGlvbnNTZXJ2aWNlPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJhdWRpb0NvbnRleHQiLHtnZXQ6ZnVuY3Rpb24oKXtpZighZS5fYXVkaW9Db250ZXh0KXt2YXIgdD13aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0O2lmKCF0KXJldHVybiBjb25zb2xlLndhcm4oIldlYiBBdWRpbyBBUEkgaXMgbm90IHN1cHBvcnRlZCBieSB0aGlzIGJyb3dzZXIuIENvbnNpZGVyIHVwZ3JhZGluZyB0byB0aGUgbGF0ZXN0IHZlcnNpb24iKSxudWxsO2UuX2F1ZGlvQ29udGV4dD1uZXcgdH1yZXR1cm4gZS5fYXVkaW9Db250ZXh0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnBsYXlCZWxsU291bmQ9ZnVuY3Rpb24oKXt2YXIgdD1lLmF1ZGlvQ29udGV4dDtpZih0KXt2YXIgcj10LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO3QuZGVjb2RlQXVkaW9EYXRhKHRoaXMuX2Jhc2U2NFRvQXJyYXlCdWZmZXIodGhpcy5fcmVtb3ZlTWltZVR5cGUodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5iZWxsU291bmQpKSwoZnVuY3Rpb24oZSl7ci5idWZmZXI9ZSxyLmNvbm5lY3QodC5kZXN0aW5hdGlvbiksci5zdGFydCgwKX0pKX19LGUucHJvdG90eXBlLl9iYXNlNjRUb0FycmF5QnVmZmVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD13aW5kb3cuYXRvYihlKSxyPXQubGVuZ3RoLGk9bmV3IFVpbnQ4QXJyYXkociksbj0wO248cjtuKyspaVtuXT10LmNoYXJDb2RlQXQobik7cmV0dXJuIGkuYnVmZmVyfSxlLnByb3RvdHlwZS5fcmVtb3ZlTWltZVR5cGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3BsaXQoIiwiKVsxXX0sZT1pKFtuKDAsby5JT3B0aW9uc1NlcnZpY2UpXSxlKX0oKTt0LlNvdW5kU2VydmljZT1zfSw2MzQ5OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DaXJjdWxhckxpc3Q9dm9pZCAwO3ZhciBpPXIoODQ2MCksbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fbWF4TGVuZ3RoPWUsdGhpcy5vbkRlbGV0ZUVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLHRoaXMub25JbnNlcnRFbWl0dGVyPW5ldyBpLkV2ZW50RW1pdHRlcix0aGlzLm9uVHJpbUVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLHRoaXMuX2FycmF5PW5ldyBBcnJheSh0aGlzLl9tYXhMZW5ndGgpLHRoaXMuX3N0YXJ0SW5kZXg9MCx0aGlzLl9sZW5ndGg9MH1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkRlbGV0ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uRGVsZXRlRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uSW5zZXJ0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub25JbnNlcnRFbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25UcmltIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub25UcmltRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm1heExlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXhMZW5ndGh9LHNldDpmdW5jdGlvbihlKXtpZih0aGlzLl9tYXhMZW5ndGghPT1lKXtmb3IodmFyIHQ9bmV3IEFycmF5KGUpLHI9MDtyPE1hdGgubWluKGUsdGhpcy5sZW5ndGgpO3IrKyl0W3JdPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHIpXTt0aGlzLl9hcnJheT10LHRoaXMuX21heExlbmd0aD1lLHRoaXMuX3N0YXJ0SW5kZXg9MH19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVuZ3RofSxzZXQ6ZnVuY3Rpb24oZSl7aWYoZT50aGlzLl9sZW5ndGgpZm9yKHZhciB0PXRoaXMuX2xlbmd0aDt0PGU7dCsrKXRoaXMuX2FycmF5W3RdPXZvaWQgMDt0aGlzLl9sZW5ndGg9ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGUpXX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoZSldPXR9LGUucHJvdG90eXBlLnB1c2g9ZnVuY3Rpb24oZSl7dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoKV09ZSx0aGlzLl9sZW5ndGg9PT10aGlzLl9tYXhMZW5ndGg/KHRoaXMuX3N0YXJ0SW5kZXg9Kyt0aGlzLl9zdGFydEluZGV4JXRoaXMuX21heExlbmd0aCx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKSk6dGhpcy5fbGVuZ3RoKyt9LGUucHJvdG90eXBlLnJlY3ljbGU9ZnVuY3Rpb24oKXtpZih0aGlzLl9sZW5ndGghPT10aGlzLl9tYXhMZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJDYW4gb25seSByZWN5Y2xlIHdoZW4gdGhlIGJ1ZmZlciBpcyBmdWxsIik7cmV0dXJuIHRoaXMuX3N0YXJ0SW5kZXg9Kyt0aGlzLl9zdGFydEluZGV4JXRoaXMuX21heExlbmd0aCx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKSx0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgtMSldfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzRnVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGg9PT10aGlzLl9tYXhMZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aC0tLTEpXX0sZS5wcm90b3R5cGUuc3BsaWNlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MjtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaS0yXT1hcmd1bWVudHNbaV07aWYodCl7Zm9yKHZhciBuPWU7bjx0aGlzLl9sZW5ndGgtdDtuKyspdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgobildPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KG4rdCldO3RoaXMuX2xlbmd0aC09dCx0aGlzLm9uRGVsZXRlRW1pdHRlci5maXJlKHtpbmRleDplLGFtb3VudDp0fSl9Zm9yKG49dGhpcy5fbGVuZ3RoLTE7bj49ZTtuLS0pdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgobityLmxlbmd0aCldPXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KG4pXTtmb3Iobj0wO248ci5sZW5ndGg7bisrKXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGUrbildPXJbbl07aWYoci5sZW5ndGgmJnRoaXMub25JbnNlcnRFbWl0dGVyLmZpcmUoe2luZGV4OmUsYW1vdW50OnIubGVuZ3RofSksdGhpcy5fbGVuZ3RoK3IubGVuZ3RoPnRoaXMuX21heExlbmd0aCl7dmFyIG89dGhpcy5fbGVuZ3RoK3IubGVuZ3RoLXRoaXMuX21heExlbmd0aDt0aGlzLl9zdGFydEluZGV4Kz1vLHRoaXMuX2xlbmd0aD10aGlzLl9tYXhMZW5ndGgsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUobyl9ZWxzZSB0aGlzLl9sZW5ndGgrPXIubGVuZ3RofSxlLnByb3RvdHlwZS50cmltU3RhcnQ9ZnVuY3Rpb24oZSl7ZT50aGlzLl9sZW5ndGgmJihlPXRoaXMuX2xlbmd0aCksdGhpcy5fc3RhcnRJbmRleCs9ZSx0aGlzLl9sZW5ndGgtPWUsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoZSl9LGUucHJvdG90eXBlLnNoaWZ0RWxlbWVudHM9ZnVuY3Rpb24oZSx0LHIpe2lmKCEodDw9MCkpe2lmKGU8MHx8ZT49dGhpcy5fbGVuZ3RoKXRocm93IG5ldyBFcnJvcigic3RhcnQgYXJndW1lbnQgb3V0IG9mIHJhbmdlIik7aWYoZStyPDApdGhyb3cgbmV3IEVycm9yKCJDYW5ub3Qgc2hpZnQgZWxlbWVudHMgaW4gbGlzdCBiZXlvbmQgaW5kZXggMCIpO2lmKHI+MCl7Zm9yKHZhciBpPXQtMTtpPj0wO2ktLSl0aGlzLnNldChlK2krcix0aGlzLmdldChlK2kpKTt2YXIgbj1lK3Qrci10aGlzLl9sZW5ndGg7aWYobj4wKWZvcih0aGlzLl9sZW5ndGgrPW47dGhpcy5fbGVuZ3RoPnRoaXMuX21heExlbmd0aDspdGhpcy5fbGVuZ3RoLS0sdGhpcy5fc3RhcnRJbmRleCsrLHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpfWVsc2UgZm9yKGk9MDtpPHQ7aSsrKXRoaXMuc2V0KGUraStyLHRoaXMuZ2V0KGUraSkpfX0sZS5wcm90b3R5cGUuX2dldEN5Y2xpY0luZGV4PWZ1bmN0aW9uKGUpe3JldHVybih0aGlzLl9zdGFydEluZGV4K2UpJXRoaXMuX21heExlbmd0aH0sZX0oKTt0LkNpcmN1bGFyTGlzdD1ufSwxNDM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuY2xvbmU9dm9pZCAwLHQuY2xvbmU9ZnVuY3Rpb24gZSh0LHIpe2lmKHZvaWQgMD09PXImJihyPTUpLCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4gdDt2YXIgaT1BcnJheS5pc0FycmF5KHQpP1tdOnt9O2Zvcih2YXIgbiBpbiB0KWlbbl09cjw9MT90W25dOnRbbl0mJmUodFtuXSxyLTEpO3JldHVybiBpfX0sODA1NTpmdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfTtmdW5jdGlvbiBhKGUpe3ZhciB0PWUudG9TdHJpbmcoMTYpO3JldHVybiB0Lmxlbmd0aDwyPyIwIit0OnR9ZnVuY3Rpb24gYyhlLHQpe3JldHVybiBlPHQ/KHQrLjA1KS8oZSsuMDUpOihlKy4wNSkvKHQrLjA1KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5jb250cmFzdFJhdGlvPXQudG9QYWRkZWRIZXg9dC5yZ2JhPXQucmdiPXQuY3NzPXQuY29sb3I9dC5jaGFubmVscz12b2lkIDAsZnVuY3Rpb24oZSl7ZS50b0Nzcz1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gdm9pZCAwIT09aT8iIyIrYShlKSthKHQpK2EocikrYShpKToiIyIrYShlKSthKHQpK2Eocil9LGUudG9SZ2JhPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiB2b2lkIDA9PT1pJiYoaT0yNTUpLChlPDwyNHx0PDwxNnxyPDw4fGkpPj4+MH19KHI9dC5jaGFubmVsc3x8KHQuY2hhbm5lbHM9e30pKSwoaT10LmNvbG9yfHwodC5jb2xvcj17fSkpLmJsZW5kPWZ1bmN0aW9uKGUsdCl7dmFyIGk9KDI1NSZ0LnJnYmEpLzI1NTtpZigxPT09aSlyZXR1cm57Y3NzOnQuY3NzLHJnYmE6dC5yZ2JhfTt2YXIgbj10LnJnYmE+PjI0JjI1NSxvPXQucmdiYT4+MTYmMjU1LHM9dC5yZ2JhPj44JjI1NSxhPWUucmdiYT4+MjQmMjU1LGM9ZS5yZ2JhPj4xNiYyNTUsbD1lLnJnYmE+PjgmMjU1LGg9YStNYXRoLnJvdW5kKChuLWEpKmkpLHU9YytNYXRoLnJvdW5kKChvLWMpKmkpLGY9bCtNYXRoLnJvdW5kKChzLWwpKmkpO3JldHVybntjc3M6ci50b0NzcyhoLHUsZikscmdiYTpyLnRvUmdiYShoLHUsZil9fSxpLmlzT3BhcXVlPWZ1bmN0aW9uKGUpe3JldHVybiAyNTU9PSgyNTUmZS5yZ2JhKX0saS5lbnN1cmVDb250cmFzdFJhdGlvPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1vLmVuc3VyZUNvbnRyYXN0UmF0aW8oZS5yZ2JhLHQucmdiYSxyKTtpZihpKXJldHVybiBvLnRvQ29sb3IoaT4+MjQmMjU1LGk+PjE2JjI1NSxpPj44JjI1NSl9LGkub3BhcXVlPWZ1bmN0aW9uKGUpe3ZhciB0PSgyNTV8ZS5yZ2JhKT4+PjAsaT1zKG8udG9DaGFubmVscyh0KSwzKSxuPWlbMF0sYT1pWzFdLGM9aVsyXTtyZXR1cm57Y3NzOnIudG9Dc3MobixhLGMpLHJnYmE6dH19LGkub3BhY2l0eT1mdW5jdGlvbihlLHQpe3ZhciBpPU1hdGgucm91bmQoMjU1KnQpLG49cyhvLnRvQ2hhbm5lbHMoZS5yZ2JhKSwzKSxhPW5bMF0sYz1uWzFdLGw9blsyXTtyZXR1cm57Y3NzOnIudG9Dc3MoYSxjLGwsaSkscmdiYTpyLnRvUmdiYShhLGMsbCxpKX19LGkudG9Db2xvclJHQj1mdW5jdGlvbihlKXtyZXR1cm5bZS5yZ2JhPj4yNCYyNTUsZS5yZ2JhPj4xNiYyNTUsZS5yZ2JhPj44JjI1NV19LCh0LmNzc3x8KHQuY3NzPXt9KSkudG9Db2xvcj1mdW5jdGlvbihlKXtpZihlLm1hdGNoKC8jWzAtOWEtZl17Myw4fS9pKSlzd2l0Y2goZS5sZW5ndGgpe2Nhc2UgNDp2YXIgdD1wYXJzZUludChlLnNsaWNlKDEsMikucmVwZWF0KDIpLDE2KSxyPXBhcnNlSW50KGUuc2xpY2UoMiwzKS5yZXBlYXQoMiksMTYpLGk9cGFyc2VJbnQoZS5zbGljZSgzLDQpLnJlcGVhdCgyKSwxNik7cmV0dXJuIG8udG9Db2xvcih0LHIsaSk7Y2FzZSA1OnQ9cGFyc2VJbnQoZS5zbGljZSgxLDIpLnJlcGVhdCgyKSwxNikscj1wYXJzZUludChlLnNsaWNlKDIsMykucmVwZWF0KDIpLDE2KSxpPXBhcnNlSW50KGUuc2xpY2UoMyw0KS5yZXBlYXQoMiksMTYpO3ZhciBuPXBhcnNlSW50KGUuc2xpY2UoNCw1KS5yZXBlYXQoMiksMTYpO3JldHVybiBvLnRvQ29sb3IodCxyLGksbik7Y2FzZSA3OnJldHVybntjc3M6ZSxyZ2JhOihwYXJzZUludChlLnNsaWNlKDEpLDE2KTw8OHwyNTUpPj4+MH07Y2FzZSA5OnJldHVybntjc3M6ZSxyZ2JhOnBhcnNlSW50KGUuc2xpY2UoMSksMTYpPj4+MH19dmFyIHM9ZS5tYXRjaCgvcmdiYT9cKFxzKihcZHsxLDN9KVxzKixccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqKCxccyooMHwxfFxkP1wuKFxkKykpXHMqKT9cKS8pO2lmKHMpcmV0dXJuIHQ9cGFyc2VJbnQoc1sxXSkscj1wYXJzZUludChzWzJdKSxpPXBhcnNlSW50KHNbM10pLG49TWF0aC5yb3VuZCgyNTUqKHZvaWQgMD09PXNbNV0/MTpwYXJzZUZsb2F0KHNbNV0pKSksby50b0NvbG9yKHQscixpLG4pO3Rocm93IG5ldyBFcnJvcigiY3NzLnRvQ29sb3I6IFVuc3VwcG9ydGVkIGNzcyBmb3JtYXQiKX0sZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQscil7dmFyIGk9ZS8yNTUsbj10LzI1NSxvPXIvMjU1O3JldHVybi4yMTI2KihpPD0uMDM5Mjg/aS8xMi45MjpNYXRoLnBvdygoaSsuMDU1KS8xLjA1NSwyLjQpKSsuNzE1Mioobjw9LjAzOTI4P24vMTIuOTI6TWF0aC5wb3coKG4rLjA1NSkvMS4wNTUsMi40KSkrLjA3MjIqKG88PS4wMzkyOD9vLzEyLjkyOk1hdGgucG93KChvKy4wNTUpLzEuMDU1LDIuNCkpfWUucmVsYXRpdmVMdW1pbmFuY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlKX0sZS5yZWxhdGl2ZUx1bWluYW5jZTI9dH0obj10LnJnYnx8KHQucmdiPXt9KSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQscil7Zm9yKHZhciBpPWU+PjI0JjI1NSxvPWU+PjE2JjI1NSxzPWU+PjgmMjU1LGE9dD4+MjQmMjU1LGw9dD4+MTYmMjU1LGg9dD4+OCYyNTUsdT1jKG4ucmVsYXRpdmVMdW1pbmFuY2UyKGEsbCxoKSxuLnJlbGF0aXZlTHVtaW5hbmNlMihpLG8scykpO3U8ciYmKGE+MHx8bD4wfHxoPjApOylhLT1NYXRoLm1heCgwLE1hdGguY2VpbCguMSphKSksbC09TWF0aC5tYXgoMCxNYXRoLmNlaWwoLjEqbCkpLGgtPU1hdGgubWF4KDAsTWF0aC5jZWlsKC4xKmgpKSx1PWMobi5yZWxhdGl2ZUx1bWluYW5jZTIoYSxsLGgpLG4ucmVsYXRpdmVMdW1pbmFuY2UyKGksbyxzKSk7cmV0dXJuKGE8PDI0fGw8PDE2fGg8PDh8MjU1KT4+PjB9ZnVuY3Rpb24gaShlLHQscil7Zm9yKHZhciBpPWU+PjI0JjI1NSxvPWU+PjE2JjI1NSxzPWU+PjgmMjU1LGE9dD4+MjQmMjU1LGw9dD4+MTYmMjU1LGg9dD4+OCYyNTUsdT1jKG4ucmVsYXRpdmVMdW1pbmFuY2UyKGEsbCxoKSxuLnJlbGF0aXZlTHVtaW5hbmNlMihpLG8scykpO3U8ciYmKGE8MjU1fHxsPDI1NXx8aDwyNTUpOylhPU1hdGgubWluKDI1NSxhK01hdGguY2VpbCguMSooMjU1LWEpKSksbD1NYXRoLm1pbigyNTUsbCtNYXRoLmNlaWwoLjEqKDI1NS1sKSkpLGg9TWF0aC5taW4oMjU1LGgrTWF0aC5jZWlsKC4xKigyNTUtaCkpKSx1PWMobi5yZWxhdGl2ZUx1bWluYW5jZTIoYSxsLGgpLG4ucmVsYXRpdmVMdW1pbmFuY2UyKGksbyxzKSk7cmV0dXJuKGE8PDI0fGw8PDE2fGg8PDh8MjU1KT4+PjB9ZS5lbnN1cmVDb250cmFzdFJhdGlvPWZ1bmN0aW9uKGUscixvKXt2YXIgcz1uLnJlbGF0aXZlTHVtaW5hbmNlKGU+PjgpLGE9bi5yZWxhdGl2ZUx1bWluYW5jZShyPj44KTtpZihjKHMsYSk8byl7aWYoYTxzKXt2YXIgbD10KGUscixvKSxoPWMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKGw+PjgpKTtpZihoPG8pe3ZhciB1PWkoZSxlLG8pO3JldHVybiBoPmMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKHU+PjgpKT9sOnV9cmV0dXJuIGx9dmFyIGY9aShlLHIsbyksXz1jKHMsbi5yZWxhdGl2ZUx1bWluYW5jZShmPj44KSk7cmV0dXJuIF88bz8odT10KGUsZSxvKSxfPmMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKHU+PjgpKT9mOnUpOmZ9fSxlLnJlZHVjZUx1bWluYW5jZT10LGUuaW5jcmVhc2VMdW1pbmFuY2U9aSxlLnRvQ2hhbm5lbHM9ZnVuY3Rpb24oZSl7cmV0dXJuW2U+PjI0JjI1NSxlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmVdfSxlLnRvQ29sb3I9ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJue2NzczpyLnRvQ3NzKGUsdCxpLG4pLHJnYmE6ci50b1JnYmEoZSx0LGksbil9fX0obz10LnJnYmF8fCh0LnJnYmE9e30pKSx0LnRvUGFkZGVkSGV4PWEsdC5jb250cmFzdFJhdGlvPWN9LDg5Njk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZVRlcm1pbmFsPXZvaWQgMDt2YXIgcz1yKDg0NCksYT1yKDI1ODUpLGM9cig0MzQ4KSxsPXIoNzg2NiksaD1yKDc0NCksdT1yKDczMDIpLGY9cig2OTc1KSxfPXIoODQ2MCksZD1yKDE3NTMpLHA9cigzNzMwKSx2PXIoMTQ4MCkseT1yKDc5OTQpLGc9cig5MjgyKSxtPXIoNTQzNSksYj1yKDU5ODEpLFM9ITEsQz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fb25CaW5hcnk9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uRGF0YT1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25MaW5lRmVlZD1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25SZXNpemU9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uU2Nyb2xsPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9vbldyaXRlUGFyc2VkPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9pbnN0YW50aWF0aW9uU2VydmljZT1uZXcgYy5JbnN0YW50aWF0aW9uU2VydmljZSxyLm9wdGlvbnNTZXJ2aWNlPW5ldyB1Lk9wdGlvbnNTZXJ2aWNlKHQpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JT3B0aW9uc1NlcnZpY2Usci5vcHRpb25zU2VydmljZSksci5fYnVmZmVyU2VydmljZT1yLnJlZ2lzdGVyKHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGguQnVmZmVyU2VydmljZSkpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JQnVmZmVyU2VydmljZSxyLl9idWZmZXJTZXJ2aWNlKSxyLl9sb2dTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGwuTG9nU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklMb2dTZXJ2aWNlLHIuX2xvZ1NlcnZpY2UpLHIuY29yZVNlcnZpY2U9ci5yZWdpc3RlcihyLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShmLkNvcmVTZXJ2aWNlLChmdW5jdGlvbigpe3JldHVybiByLnNjcm9sbFRvQm90dG9tKCl9KSkpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JQ29yZVNlcnZpY2Usci5jb3JlU2VydmljZSksci5jb3JlTW91c2VTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGQuQ29yZU1vdXNlU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklDb3JlTW91c2VTZXJ2aWNlLHIuY29yZU1vdXNlU2VydmljZSksci5fZGlydHlSb3dTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHAuRGlydHlSb3dTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSURpcnR5Um93U2VydmljZSxyLl9kaXJ0eVJvd1NlcnZpY2UpLHIudW5pY29kZVNlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2Uodi5Vbmljb2RlU2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklVbmljb2RlU2VydmljZSxyLnVuaWNvZGVTZXJ2aWNlKSxyLl9jaGFyc2V0U2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZSh5LkNoYXJzZXRTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSUNoYXJzZXRTZXJ2aWNlLHIuX2NoYXJzZXRTZXJ2aWNlKSxyLl9pbnB1dEhhbmRsZXI9bmV3IG0uSW5wdXRIYW5kbGVyKHIuX2J1ZmZlclNlcnZpY2Usci5fY2hhcnNldFNlcnZpY2Usci5jb3JlU2VydmljZSxyLl9kaXJ0eVJvd1NlcnZpY2Usci5fbG9nU2VydmljZSxyLm9wdGlvbnNTZXJ2aWNlLHIuY29yZU1vdXNlU2VydmljZSxyLnVuaWNvZGVTZXJ2aWNlKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25MaW5lRmVlZCxyLl9vbkxpbmVGZWVkKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIpLHIucmVnaXN0ZXIoKDAsXy5mb3J3YXJkRXZlbnQpKHIuX2J1ZmZlclNlcnZpY2Uub25SZXNpemUsci5fb25SZXNpemUpKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLmNvcmVTZXJ2aWNlLm9uRGF0YSxyLl9vbkRhdGEpKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLmNvcmVTZXJ2aWNlLm9uQmluYXJ5LHIuX29uQmluYXJ5KSksci5yZWdpc3RlcihyLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbihlKXtyZXR1cm4gci5fdXBkYXRlT3B0aW9ucyhlKX0pKSksci5yZWdpc3RlcihyLl9idWZmZXJTZXJ2aWNlLm9uU2Nyb2xsKChmdW5jdGlvbihlKXtyLl9vblNjcm9sbC5maXJlKHtwb3NpdGlvbjpyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxzb3VyY2U6MH0pLHIuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3Asci5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tKX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25TY3JvbGwoKGZ1bmN0aW9uKGUpe3IuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSksci5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCxyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20pfSkpKSxyLl93cml0ZUJ1ZmZlcj1uZXcgYi5Xcml0ZUJ1ZmZlcigoZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5faW5wdXRIYW5kbGVyLnBhcnNlKGUsdCl9KSksci5yZWdpc3RlcigoMCxfLmZvcndhcmRFdmVudCkoci5fd3JpdGVCdWZmZXIub25Xcml0ZVBhcnNlZCxyLl9vbldyaXRlUGFyc2VkKSkscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CaW5hcnkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CaW5hcnkuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRhdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EYXRhLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25MaW5lRmVlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXNpemUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbldyaXRlUGFyc2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uV3JpdGVQYXJzZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNjcm9sbCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX29uU2Nyb2xsQXBpfHwodGhpcy5fb25TY3JvbGxBcGk9bmV3IF8uRXZlbnRFbWl0dGVyLHRoaXMucmVnaXN0ZXIodGhpcy5fb25TY3JvbGwuZXZlbnQoKGZ1bmN0aW9uKHQpe3ZhciByO251bGw9PT0ocj1lLl9vblNjcm9sbEFwaSl8fHZvaWQgMD09PXJ8fHIuZmlyZSh0LnBvc2l0aW9uKX0pKSkpLHRoaXMuX29uU2Nyb2xsQXBpLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiY29scyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJyb3dzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJ1ZmZlcnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib3B0aW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnN9LHNldDpmdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gZSl0aGlzLm9wdGlvbnNTZXJ2aWNlLm9wdGlvbnNbdF09ZVt0XX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQ7dGhpcy5faXNEaXNwb3NlZHx8KGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSxudWxsPT09KHQ9dGhpcy5fd2luZG93c01vZGUpfHx2b2lkIDA9PT10fHx0LmRpc3Bvc2UoKSx0aGlzLl93aW5kb3dzTW9kZT12b2lkIDApfSx0LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3dyaXRlQnVmZmVyLndyaXRlKGUsdCl9LHQucHJvdG90eXBlLndyaXRlU3luYz1mdW5jdGlvbihlLHQpe3RoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLldBUk4mJiFTJiYodGhpcy5fbG9nU2VydmljZS53YXJuKCJ3cml0ZVN5bmMgaXMgdW5yZWxpYWJsZSBhbmQgd2lsbCBiZSByZW1vdmVkIHNvb24uIiksUz0hMCksdGhpcy5fd3JpdGVCdWZmZXIud3JpdGVTeW5jKGUsdCl9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe2lzTmFOKGUpfHxpc05hTih0KXx8KGU9TWF0aC5tYXgoZSxoLk1JTklNVU1fQ09MUyksdD1NYXRoLm1heCh0LGguTUlOSU1VTV9ST1dTKSx0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZShlLHQpKX0sdC5wcm90b3R5cGUuc2Nyb2xsPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKGUsdCl9LHQucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbExpbmVzKGUsdCxyKX0sdC5wcm90b3R5cGUuc2Nyb2xsUGFnZXM9ZnVuY3Rpb24oZSl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxQYWdlcyhlKX0sdC5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvVG9wKCl9LHQucHJvdG90eXBlLnNjcm9sbFRvQm90dG9tPWZ1bmN0aW9uKCl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb0JvdHRvbSgpfSx0LnByb3RvdHlwZS5zY3JvbGxUb0xpbmU9ZnVuY3Rpb24oZSl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb0xpbmUoZSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRXNjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRGNzSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9pbnB1dEhhbmRsZXIucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLl9zZXR1cD1mdW5jdGlvbigpe3RoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZSYmdGhpcy5fZW5hYmxlV2luZG93c01vZGUoKX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9pbnB1dEhhbmRsZXIucmVzZXQoKSx0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2V0KCksdGhpcy5fY2hhcnNldFNlcnZpY2UucmVzZXQoKSx0aGlzLmNvcmVTZXJ2aWNlLnJlc2V0KCksdGhpcy5jb3JlTW91c2VTZXJ2aWNlLnJlc2V0KCl9LHQucHJvdG90eXBlLl91cGRhdGVPcHRpb25zPWZ1bmN0aW9uKGUpe3ZhciB0O3N3aXRjaChlKXtjYXNlInNjcm9sbGJhY2siOnRoaXMuYnVmZmVycy5yZXNpemUodGhpcy5jb2xzLHRoaXMucm93cyk7YnJlYWs7Y2FzZSJ3aW5kb3dzTW9kZSI6dGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlP3RoaXMuX2VuYWJsZVdpbmRvd3NNb2RlKCk6KG51bGw9PT0odD10aGlzLl93aW5kb3dzTW9kZSl8fHZvaWQgMD09PXR8fHQuZGlzcG9zZSgpLHRoaXMuX3dpbmRvd3NNb2RlPXZvaWQgMCl9fSx0LnByb3RvdHlwZS5fZW5hYmxlV2luZG93c01vZGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKCF0aGlzLl93aW5kb3dzTW9kZSl7dmFyIHQ9W107dC5wdXNoKHRoaXMub25MaW5lRmVlZChnLnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlLmJpbmQobnVsbCx0aGlzLl9idWZmZXJTZXJ2aWNlKSkpLHQucHVzaCh0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkgifSwoZnVuY3Rpb24oKXtyZXR1cm4oMCxnLnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlKShlLl9idWZmZXJTZXJ2aWNlKSwhMX0pKSksdGhpcy5fd2luZG93c01vZGU9e2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZSxyO3RyeXtmb3IodmFyIGk9byh0KSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSluLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fX19fSx0fShzLkRpc3Bvc2FibGUpO3QuQ29yZVRlcm1pbmFsPUN9LDg0NjA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5mb3J3YXJkRXZlbnQ9dC5FdmVudEVtaXR0ZXI9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2xpc3RlbmVycz1bXSx0aGlzLl9kaXNwb3NlZD0hMX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJldmVudCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX2V2ZW50fHwodGhpcy5fZXZlbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIGUuX2xpc3RlbmVycy5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7aWYoIWUuX2Rpc3Bvc2VkKWZvcih2YXIgcj0wO3I8ZS5fbGlzdGVuZXJzLmxlbmd0aDtyKyspaWYoZS5fbGlzdGVuZXJzW3JdPT09dClyZXR1cm4gdm9pZCBlLl9saXN0ZW5lcnMuc3BsaWNlKHIsMSl9fX0pLHRoaXMuX2V2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmZpcmU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10saT0wO2k8dGhpcy5fbGlzdGVuZXJzLmxlbmd0aDtpKyspci5wdXNoKHRoaXMuX2xpc3RlbmVyc1tpXSk7Zm9yKGk9MDtpPHIubGVuZ3RoO2krKylyW2ldLmNhbGwodm9pZCAwLGUsdCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9saXN0ZW5lcnMmJih0aGlzLl9saXN0ZW5lcnMubGVuZ3RoPTApLHRoaXMuX2Rpc3Bvc2VkPSEwfSxlfSgpO3QuRXZlbnRFbWl0dGVyPXIsdC5mb3J3YXJkRXZlbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuZmlyZShlKX0pKX19LDU0MzU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuSW5wdXRIYW5kbGVyPXQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlPXZvaWQgMDt2YXIgbyxzPXIoMjU4NCksYT1yKDcxMTYpLGM9cigyMDE1KSxsPXIoODQ0KSxoPXIoODI3MyksdT1yKDQ4MiksZj1yKDg0MzcpLF89cig4NDYwKSxkPXIoNjQzKSxwPXIoNTExKSx2PXIoMzczNCkseT1yKDI1ODUpLGc9cig2MjQyKSxtPXIoNjM1MSksYj1yKDU5NDEpLFM9eyIoIjowLCIpIjoxLCIqIjoyLCIrIjozLCItIjoxLCIuIjoyfSxDPTEzMTA3MjtmdW5jdGlvbiB3KGUsdCl7aWYoZT4yNClyZXR1cm4gdC5zZXRXaW5MaW5lc3x8ITE7c3dpdGNoKGUpe2Nhc2UgMTpyZXR1cm4hIXQucmVzdG9yZVdpbjtjYXNlIDI6cmV0dXJuISF0Lm1pbmltaXplV2luO2Nhc2UgMzpyZXR1cm4hIXQuc2V0V2luUG9zaXRpb247Y2FzZSA0OnJldHVybiEhdC5zZXRXaW5TaXplUGl4ZWxzO2Nhc2UgNTpyZXR1cm4hIXQucmFpc2VXaW47Y2FzZSA2OnJldHVybiEhdC5sb3dlcldpbjtjYXNlIDc6cmV0dXJuISF0LnJlZnJlc2hXaW47Y2FzZSA4OnJldHVybiEhdC5zZXRXaW5TaXplQ2hhcnM7Y2FzZSA5OnJldHVybiEhdC5tYXhpbWl6ZVdpbjtjYXNlIDEwOnJldHVybiEhdC5mdWxsc2NyZWVuV2luO2Nhc2UgMTE6cmV0dXJuISF0LmdldFdpblN0YXRlO2Nhc2UgMTM6cmV0dXJuISF0LmdldFdpblBvc2l0aW9uO2Nhc2UgMTQ6cmV0dXJuISF0LmdldFdpblNpemVQaXhlbHM7Y2FzZSAxNTpyZXR1cm4hIXQuZ2V0U2NyZWVuU2l6ZVBpeGVscztjYXNlIDE2OnJldHVybiEhdC5nZXRDZWxsU2l6ZVBpeGVscztjYXNlIDE4OnJldHVybiEhdC5nZXRXaW5TaXplQ2hhcnM7Y2FzZSAxOTpyZXR1cm4hIXQuZ2V0U2NyZWVuU2l6ZUNoYXJzO2Nhc2UgMjA6cmV0dXJuISF0LmdldEljb25UaXRsZTtjYXNlIDIxOnJldHVybiEhdC5nZXRXaW5UaXRsZTtjYXNlIDIyOnJldHVybiEhdC5wdXNoVGl0bGU7Y2FzZSAyMzpyZXR1cm4hIXQucG9wVGl0bGU7Y2FzZSAyNDpyZXR1cm4hIXQuc2V0V2luTGluZXN9cmV0dXJuITF9IWZ1bmN0aW9uKGUpe2VbZS5HRVRfV0lOX1NJWkVfUElYRUxTPTBdPSJHRVRfV0lOX1NJWkVfUElYRUxTIixlW2UuR0VUX0NFTExfU0laRV9QSVhFTFM9MV09IkdFVF9DRUxMX1NJWkVfUElYRUxTIn0obz10LldpbmRvd3NPcHRpb25zUmVwb3J0VHlwZXx8KHQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlPXt9KSk7dmFyIEw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGkpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9jb3JlU2VydmljZT10LHRoaXMuX2xvZ1NlcnZpY2U9cix0aGlzLl9vcHRpb25zU2VydmljZT1pLHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApfXJldHVybiBlLnByb3RvdHlwZS5ob29rPWZ1bmN0aW9uKGUpe3RoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2RhdGE9KDAsaC5jb25jYXQpKHRoaXMuX2RhdGEsZS5zdWJhcnJheSh0LHIpKX0sZS5wcm90b3R5cGUudW5ob29rPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKSwhMDt2YXIgdD0oMCx1LnV0ZjMyVG9TdHJpbmcpKHRoaXMuX2RhdGEpO3N3aXRjaCh0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKSx0KXtjYXNlJyJxJzp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKydQMSRyMCJxJytzLkMwLkVTQysiXFwiKTticmVhaztjYXNlJyJwJzp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKydQMSRyNjE7MSJwJytzLkMwLkVTQysiXFwiKTticmVhaztjYXNlInIiOnZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCsxKyI7IisodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tKzEpKyJyIjt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJQMSRyIityK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2Nhc2UibSI6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiUDEkcjBtIitzLkMwLkVTQysiXFwiKTticmVhaztjYXNlIiBxIjp2YXIgaT17YmxvY2s6Mix1bmRlcmxpbmU6NCxiYXI6Nn1bdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZV07aS09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JCbGluaz8xOjAsdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiUDEkciIraSsiIHEiK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBEQ1MgJHEgJXMiLHQpLHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlAwJHIiK3MuQzAuRVNDKyJcXCIpfXJldHVybiEwfSxlfSgpLEU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8sbCxoLGQsdil7dm9pZCAwPT09diYmKHY9bmV3IGMuRXNjYXBlU2VxdWVuY2VQYXJzZXIpO3ZhciB5PWUuY2FsbCh0aGlzKXx8dGhpczt5Ll9idWZmZXJTZXJ2aWNlPXQseS5fY2hhcnNldFNlcnZpY2U9cix5Ll9jb3JlU2VydmljZT1pLHkuX2RpcnR5Um93U2VydmljZT1uLHkuX2xvZ1NlcnZpY2U9byx5Ll9vcHRpb25zU2VydmljZT1sLHkuX2NvcmVNb3VzZVNlcnZpY2U9aCx5Ll91bmljb2RlU2VydmljZT1kLHkuX3BhcnNlcj12LHkuX3BhcnNlQnVmZmVyPW5ldyBVaW50MzJBcnJheSg0MDk2KSx5Ll9zdHJpbmdEZWNvZGVyPW5ldyB1LlN0cmluZ1RvVXRmMzIseS5fdXRmOERlY29kZXI9bmV3IHUuVXRmOFRvVXRmMzIseS5fd29ya0NlbGw9bmV3IHAuQ2VsbERhdGEseS5fd2luZG93VGl0bGU9IiIseS5faWNvbk5hbWU9IiIseS5fd2luZG93VGl0bGVTdGFjaz1bXSx5Ll9pY29uTmFtZVN0YWNrPVtdLHkuX2N1ckF0dHJEYXRhPWYuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx5Ll9lcmFzZUF0dHJEYXRhSW50ZXJuYWw9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHkuX29uUmVxdWVzdEJlbGw9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uUmVxdWVzdFJlZnJlc2hSb3dzPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RSZXNldD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25SZXF1ZXN0U2VuZEZvY3VzPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25BMTF5Q2hhcj1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25BMTF5VGFiPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkN1cnNvck1vdmU9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uTGluZUZlZWQ9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uU2Nyb2xsPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblRpdGxlQ2hhbmdlPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkNvbG9yPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9wYXJzZVN0YWNrPXtwYXVzZWQ6ITEsY3Vyc29yU3RhcnRYOjAsY3Vyc29yU3RhcnRZOjAsZGVjb2RlZExlbmd0aDowLHBvc2l0aW9uOjB9LHkuX3NwZWNpYWxDb2xvcnM9WzI1NiwyNTcsMjU4XSx5LnJlZ2lzdGVyKHkuX3BhcnNlcikseS5fYWN0aXZlQnVmZmVyPXkuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLHkucmVnaXN0ZXIoeS5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKGUpe3JldHVybiB5Ll9hY3RpdmVCdWZmZXI9ZS5hY3RpdmVCdWZmZXJ9KSkpLHkuX3BhcnNlci5zZXRDc2lIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUsdCl7eS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBDU0kgY29kZTogIix7aWRlbnRpZmllcjp5Ll9wYXJzZXIuaWRlbnRUb1N0cmluZyhlKSxwYXJhbXM6dC50b0FycmF5KCl9KX0pKSx5Ll9wYXJzZXIuc2V0RXNjSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlKXt5Ll9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIEVTQyBjb2RlOiAiLHtpZGVudGlmaWVyOnkuX3BhcnNlci5pZGVudFRvU3RyaW5nKGUpfSl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUpe3kuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gRVhFQ1VURSBjb2RlOiAiLHtjb2RlOmV9KX0pKSx5Ll9wYXJzZXIuc2V0T3NjSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlLHQscil7eS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBPU0MgY29kZTogIix7aWRlbnRpZmllcjplLGFjdGlvbjp0LGRhdGE6cn0pfSkpLHkuX3BhcnNlci5zZXREY3NIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUsdCxyKXsiSE9PSyI9PT10JiYocj1yLnRvQXJyYXkoKSkseS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBEQ1MgY29kZTogIix7aWRlbnRpZmllcjp5Ll9wYXJzZXIuaWRlbnRUb1N0cmluZyhlKSxhY3Rpb246dCxwYXlsb2FkOnJ9KX0pKSx5Ll9wYXJzZXIuc2V0UHJpbnRIYW5kbGVyKChmdW5jdGlvbihlLHQscil7cmV0dXJuIHkucHJpbnQoZSx0LHIpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJAIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5Lmluc2VydENoYXJzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiAiLGZpbmFsOiJAIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbExlZnQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yVXAoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiICIsZmluYWw6IkEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2Nyb2xsUmlnaHQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkIifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yRG93bihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiQyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JGb3J3YXJkKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJEIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckJhY2t3YXJkKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJFIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvck5leHRMaW5lKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJGIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvclByZWNlZGluZ0xpbmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkcifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yQ2hhckFic29sdXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJIIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvclBvc2l0aW9uKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJJIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckZvcndhcmRUYWIoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkoifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VJbkRpc3BsYXkoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoiSiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUluRGlzcGxheShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiSyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUluTGluZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJLIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmVyYXNlSW5MaW5lKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJMIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5Lmluc2VydExpbmVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJNIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRlbGV0ZUxpbmVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJQIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRlbGV0ZUNoYXJzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJTIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbFVwKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJUIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbERvd24oZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IlgifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VDaGFycyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiWiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JCYWNrd2FyZFRhYihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiYCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jaGFyUG9zQWJzb2x1dGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuaFBvc2l0aW9uUmVsYXRpdmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImIifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJjIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNlbmREZXZpY2VBdHRyaWJ1dGVzUHJpbWFyeShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij4iLGZpbmFsOiJjIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJkIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmxpbmVQb3NBYnNvbHV0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiZSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS52UG9zaXRpb25SZWxhdGl2ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiZiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5oVlBvc2l0aW9uKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJnIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnRhYkNsZWFyKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJoIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE1vZGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoiaCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRNb2RlUHJpdmF0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoibCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXNldE1vZGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoibCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXNldE1vZGVQcml2YXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJtIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmNoYXJBdHRyaWJ1dGVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJuIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRldmljZVN0YXR1cyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJuIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRldmljZVN0YXR1c1ByaXZhdGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiISIsZmluYWw6InAifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc29mdFJlc2V0KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiAiLGZpbmFsOiJxIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldEN1cnNvclN0eWxlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJyIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldFNjcm9sbFJlZ2lvbihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoicyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zYXZlQ3Vyc29yKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJ0In0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LndpbmRvd09wdGlvbnMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6InUifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUN1cnNvcihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiInIixmaW5hbDoifSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5pbnNlcnRDb2x1bW5zKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiciLGZpbmFsOiJ+In0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmRlbGV0ZUNvbHVtbnMoZSl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuQkVMLChmdW5jdGlvbigpe3JldHVybiB5LmJlbGwoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5MRiwoZnVuY3Rpb24oKXtyZXR1cm4geS5saW5lRmVlZCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLlZULChmdW5jdGlvbigpe3JldHVybiB5LmxpbmVGZWVkKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuRkYsKGZ1bmN0aW9uKCl7cmV0dXJuIHkubGluZUZlZWQoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5DUiwoZnVuY3Rpb24oKXtyZXR1cm4geS5jYXJyaWFnZVJldHVybigpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkJTLChmdW5jdGlvbigpe3JldHVybiB5LmJhY2tzcGFjZSgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkhULChmdW5jdGlvbigpe3JldHVybiB5LnRhYigpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLlNPLChmdW5jdGlvbigpe3JldHVybiB5LnNoaWZ0T3V0KCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuU0ksKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2hpZnRJbigpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMxLklORCwoZnVuY3Rpb24oKXtyZXR1cm4geS5pbmRleCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMxLk5FTCwoZnVuY3Rpb24oKXtyZXR1cm4geS5uZXh0TGluZSgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMxLkhUUywoZnVuY3Rpb24oKXtyZXR1cm4geS50YWJTZXQoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDAsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0VGl0bGUoZSkseS5zZXRJY29uTmFtZShlKSwhMH0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldEljb25OYW1lKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDIsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0VGl0bGUoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoNCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRPclJlcG9ydEluZGV4ZWRDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRPclJlcG9ydEZnQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTEsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0T3JSZXBvcnRCZ0NvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEyLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE9yUmVwb3J0Q3Vyc29yQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTA0LG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVJbmRleGVkQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTEwLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVGZ0NvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMSxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXN0b3JlQmdDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTIsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUN1cnNvckNvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiNyJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNhdmVDdXJzb3IoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiOCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnJlc3RvcmVDdXJzb3IoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiRCJ9LChmdW5jdGlvbigpe3JldHVybiB5LmluZGV4KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IkUifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5uZXh0TGluZSgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJIIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkudGFiU2V0KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6Ik0ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5yZXZlcnNlSW5kZXgoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiPSJ9LChmdW5jdGlvbigpe3JldHVybiB5LmtleXBhZEFwcGxpY2F0aW9uTW9kZSgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiI+In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkua2V5cGFkTnVtZXJpY01vZGUoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiYyJ9LChmdW5jdGlvbigpe3JldHVybiB5LmZ1bGxSZXNldCgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJuIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDIpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJvIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDMpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJ8In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDMpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJ9In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDIpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJ+In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2V0Z0xldmVsKDEpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiUiLGZpbmFsOiJAIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0RGVmYXVsdENoYXJzZXQoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIlIixmaW5hbDoiRyJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdERlZmF1bHRDaGFyc2V0KCl9KSk7dmFyIG09ZnVuY3Rpb24oZSl7Yi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKCIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKCIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKSIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKSIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKiIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKiIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiKyIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiKyIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiLSIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiLSIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiLiIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiLiIrZSl9KSksYi5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiLyIsZmluYWw6ZX0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0Q2hhcnNldCgiLyIrZSl9KSl9LGI9dGhpcztmb3IodmFyIFMgaW4gYS5DSEFSU0VUUyltKFMpO3JldHVybiB5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIjIixmaW5hbDoiOCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNjcmVlbkFsaWdubWVudFBhdHRlcm4oKX0pKSx5Ll9wYXJzZXIuc2V0RXJyb3JIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5fbG9nU2VydmljZS5lcnJvcigiUGFyc2luZyBlcnJvcjogIixlKSxlfSkpLHkuX3BhcnNlci5yZWdpc3RlckRjc0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiQiLGZpbmFsOiJxIn0sbmV3IEwoeS5fYnVmZmVyU2VydmljZSx5Ll9jb3JlU2VydmljZSx5Ll9sb2dTZXJ2aWNlLHkuX29wdGlvbnNTZXJ2aWNlKSkseX1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0QmVsbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RCZWxsLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0UmVmcmVzaFJvd3MiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZXNldCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RSZXNldC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFNlbmRGb2N1cyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RTZW5kRm9jdXMuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RTeW5jU2Nyb2xsQmFyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeUNoYXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BMTF5Q2hhci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeVRhYiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlUYWIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkN1cnNvck1vdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25MaW5lRmVlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkxpbmVGZWVkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TY3JvbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TY3JvbGwuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblRpdGxlQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uVGl0bGVDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkNvbG9yIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3ByZXNlcnZlU3RhY2s9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ9ITAsdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFg9ZSx0aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WT10LHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aD1yLHRoaXMuX3BhcnNlU3RhY2sucG9zaXRpb249aX0sdC5wcm90b3R5cGUuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYz1mdW5jdGlvbihlKXt0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD15LkxvZ0xldmVsRW51bS5XQVJOJiZQcm9taXNlLnJhY2UoW2UsbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQoIiNTTE9XX1RJTUVPVVQiKX0pLDVlMyl9KSldKS5jYXRjaCgoZnVuY3Rpb24oZSl7aWYoIiNTTE9XX1RJTUVPVVQiIT09ZSl0aHJvdyBlO2NvbnNvbGUud2FybigiYXN5bmMgcGFyc2VyIGhhbmRsZXIgdGFraW5nIGxvbmdlciB0aGFuIDUwMDAgbXMiKX0pKX0sdC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSx0KXt2YXIgcixpPXRoaXMuX2FjdGl2ZUJ1ZmZlci54LG49dGhpcy5fYWN0aXZlQnVmZmVyLnksbz0wLHM9dGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ7aWYocyl7aWYocj10aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsdGhpcy5fcGFyc2VTdGFjay5kZWNvZGVkTGVuZ3RoLHQpKXJldHVybiB0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocikscjtpPXRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYLG49dGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFksdGhpcy5fcGFyc2VTdGFjay5wYXVzZWQ9ITEsZS5sZW5ndGg+QyYmKG89dGhpcy5fcGFyc2VTdGFjay5wb3NpdGlvbitDKX1pZih0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD15LkxvZ0xldmVsRW51bS5ERUJVRyYmdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygicGFyc2luZyBkYXRhIisoInN0cmluZyI9PXR5cGVvZiBlPycgIicrZSsnIic6JyAiJytBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoZSl9KSkuam9pbigiIikrJyInKSwic3RyaW5nIj09dHlwZW9mIGU/ZS5zcGxpdCgiIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApfSkpOmUpLHRoaXMuX3BhcnNlQnVmZmVyLmxlbmd0aDxlLmxlbmd0aCYmdGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoPEMmJih0aGlzLl9wYXJzZUJ1ZmZlcj1uZXcgVWludDMyQXJyYXkoTWF0aC5taW4oZS5sZW5ndGgsQykpKSxzfHx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UuY2xlYXJSYW5nZSgpLGUubGVuZ3RoPkMpZm9yKHZhciBhPW87YTxlLmxlbmd0aDthKz1DKXt2YXIgYz1hK0M8ZS5sZW5ndGg/YStDOmUubGVuZ3RoLGw9InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGUuc3Vic3RyaW5nKGEsYyksdGhpcy5fcGFyc2VCdWZmZXIpOnRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShlLnN1YmFycmF5KGEsYyksdGhpcy5fcGFyc2VCdWZmZXIpO2lmKHI9dGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLGwpKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKGksbixsLGEpLHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyKSxyfWVsc2UgaWYoIXMmJihsPSJzdHJpbmciPT10eXBlb2YgZT90aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShlLHRoaXMuX3BhcnNlQnVmZmVyKTp0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUoZSx0aGlzLl9wYXJzZUJ1ZmZlcikscj10aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsbCkpKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKGksbixsLDApLHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyKSxyO3RoaXMuX2FjdGl2ZUJ1ZmZlci54PT09aSYmdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT1ufHx0aGlzLl9vbkN1cnNvck1vdmUuZmlyZSgpLHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUodGhpcy5fZGlydHlSb3dTZXJ2aWNlLnN0YXJ0LHRoaXMuX2RpcnR5Um93U2VydmljZS5lbmQpfSx0LnByb3RvdHlwZS5wcmludD1mdW5jdGlvbihlLHQscil7dmFyIGksbixvPXRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQscz10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUsYT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsYz10aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZCxsPXRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUsaD10aGlzLl9jdXJBdHRyRGF0YSxmPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9hY3RpdmVCdWZmZXIueCYmci10PjAmJjI9PT1mLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEpJiZmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEsMCwxLGguZmcsaC5iZyxoLmV4dGVuZGVkKTtmb3IodmFyIF89dDtfPHI7KytfKXtpZihpPWVbX10sbj10aGlzLl91bmljb2RlU2VydmljZS53Y3dpZHRoKGkpLGk8MTI3JiZvKXt2YXIgcD1vW1N0cmluZy5mcm9tQ2hhckNvZGUoaSldO3AmJihpPXAuY2hhckNvZGVBdCgwKSl9aWYocyYmdGhpcy5fb25BMTF5Q2hhci5maXJlKCgwLHUuc3RyaW5nRnJvbUNvZGVQb2ludCkoaSkpLG58fCF0aGlzLl9hY3RpdmVCdWZmZXIueCl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLngrbi0xPj1hKWlmKGMpe2Zvcig7dGhpcy5fYWN0aXZlQnVmZmVyLng8YTspZi5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCsrLDAsMSxoLmZnLGguYmcsaC5leHRlbmRlZCk7dGhpcy5fYWN0aXZlQnVmZmVyLng9MCx0aGlzLl9hY3RpdmVCdWZmZXIueSsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSsxPyh0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSwhMCkpOih0aGlzLl9hY3RpdmVCdWZmZXIueT49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzJiYodGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KS5pc1dyYXBwZWQ9ITApLGY9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpfWVsc2UgaWYodGhpcy5fYWN0aXZlQnVmZmVyLng9YS0xLDI9PT1uKWNvbnRpbnVlO2lmKGwmJihmLmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LG4sdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKGgpLGgpLDI9PT1mLmdldFdpZHRoKGEtMSkmJmYuc2V0Q2VsbEZyb21Db2RlUG9pbnQoYS0xLGQuTlVMTF9DRUxMX0NPREUsZC5OVUxMX0NFTExfV0lEVEgsaC5mZyxoLmJnLGguZXh0ZW5kZWQpKSxmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssaSxuLGguZmcsaC5iZyxoLmV4dGVuZGVkKSxuPjApZm9yKDstLW47KWYuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKywwLDAsaC5mZyxoLmJnLGguZXh0ZW5kZWQpfWVsc2UgZi5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xKT9mLmFkZENvZGVwb2ludFRvQ2VsbCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xLGkpOmYuYWRkQ29kZXBvaW50VG9DZWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTIsaSl9ci10PjAmJihmLmxvYWRDZWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEsdGhpcy5fd29ya0NlbGwpLDI9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpfHx0aGlzLl93b3JrQ2VsbC5nZXRDb2RlKCk+NjU1MzU/dGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludD0wOnRoaXMuX3dvcmtDZWxsLmlzQ29tYmluZWQoKT90aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50PXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkuY2hhckNvZGVBdCgwKTp0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50PXRoaXMuX3dvcmtDZWxsLmNvbnRlbnQpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PGEmJnItdD4wJiYwPT09Zi5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJiFmLmhhc0NvbnRlbnQodGhpcy5fYWN0aXZlQnVmZmVyLngpJiZmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54LDAsMSxoLmZnLGguYmcsaC5leHRlbmRlZCksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7cmV0dXJuInQiIT09ZS5maW5hbHx8ZS5wcmVmaXh8fGUuaW50ZXJtZWRpYXRlcz90aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCk6dGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLChmdW5jdGlvbihlKXtyZXR1cm4hdyhlLnBhcmFtc1swXSxyLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpfHx0KGUpfSkpfSx0LnByb3RvdHlwZS5yZWdpc3RlckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcihlLG5ldyBtLkRjc0hhbmRsZXIodCkpfSx0LnByb3RvdHlwZS5yZWdpc3RlckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfSx0LnByb3RvdHlwZS5yZWdpc3Rlck9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcihlLG5ldyBnLk9zY0hhbmRsZXIodCkpfSx0LnByb3RvdHlwZS5iZWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdEJlbGwuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5saW5lRmVlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmNvbnZlcnRFb2wmJih0aGlzLl9hY3RpdmVCdWZmZXIueD0wKSx0aGlzLl9hY3RpdmVCdWZmZXIueSsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSsxPyh0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpOnRoaXMuX2FjdGl2ZUJ1ZmZlci55Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MmJih0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksdGhpcy5fYWN0aXZlQnVmZmVyLng+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmdGhpcy5fYWN0aXZlQnVmZmVyLngtLSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9vbkxpbmVGZWVkLmZpcmUoKSwhMH0sdC5wcm90b3R5cGUuY2FycmlhZ2VSZXR1cm49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuYmFja3NwYWNlPWZ1bmN0aW9uKCl7dmFyIGU7aWYoIXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZClyZXR1cm4gdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9hY3RpdmVCdWZmZXIueD4wJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tLCEwO2lmKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fYWN0aXZlQnVmZmVyLng+MCl0aGlzLl9hY3RpdmVCdWZmZXIueC0tO2Vsc2UgaWYoMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54JiZ0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wJiZ0aGlzLl9hY3RpdmVCdWZmZXIueTw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSYmKG51bGw9PT0oZT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSkpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmlzV3JhcHBlZCkpe3RoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KS5pc1dyYXBwZWQ9ITEsdGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMTt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7dC5oYXNXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJiF0Lmhhc0NvbnRlbnQodGhpcy5fYWN0aXZlQnVmZmVyLngpJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tfXJldHVybiB0aGlzLl9yZXN0cmljdEN1cnNvcigpLCEwfSx0LnByb3RvdHlwZS50YWI9ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO3ZhciBlPXRoaXMuX2FjdGl2ZUJ1ZmZlci54O3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGUmJnRoaXMuX29uQTExeVRhYi5maXJlKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LWUpLCEwfSx0LnByb3RvdHlwZS5zaGlmdE91dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoMSksITB9LHQucHJvdG90eXBlLnNoaWZ0SW49ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDApLCEwfSx0LnByb3RvdHlwZS5fcmVzdHJpY3RDdXJzb3I9ZnVuY3Rpb24oZSl7dm9pZCAwPT09ZSYmKGU9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PU1hdGgubWluKGUsTWF0aC5tYXgoMCx0aGlzLl9hY3RpdmVCdWZmZXIueCkpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW4/TWF0aC5taW4odGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSxNYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSk6TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEsTWF0aC5tYXgoMCx0aGlzLl9hY3RpdmVCdWZmZXIueSkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpfSx0LnByb3RvdHlwZS5fc2V0Q3Vyc29yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj8odGhpcy5fYWN0aXZlQnVmZmVyLng9ZSx0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wK3QpOih0aGlzLl9hY3RpdmVCdWZmZXIueD1lLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXQpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSl9LHQucHJvdG90eXBlLl9tb3ZlQ3Vyc29yPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLngrZSx0aGlzLl9hY3RpdmVCdWZmZXIueSt0KX0sdC5wcm90b3R5cGUuY3Vyc29yVXA9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnktdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyZXR1cm4gdD49MD90aGlzLl9tb3ZlQ3Vyc29yKDAsLU1hdGgubWluKHQsZS5wYXJhbXNbMF18fDEpKTp0aGlzLl9tb3ZlQ3Vyc29yKDAsLShlLnBhcmFtc1swXXx8MSkpLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JEb3duPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20tdGhpcy5fYWN0aXZlQnVmZmVyLnk7cmV0dXJuIHQ+PTA/dGhpcy5fbW92ZUN1cnNvcigwLE1hdGgubWluKHQsZS5wYXJhbXNbMF18fDEpKTp0aGlzLl9tb3ZlQ3Vyc29yKDAsZS5wYXJhbXNbMF18fDEpLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JGb3J3YXJkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb3ZlQ3Vyc29yKGUucGFyYW1zWzBdfHwxLDApLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JCYWNrd2FyZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcigtKGUucGFyYW1zWzBdfHwxKSwwKSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yTmV4dExpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3Vyc29yRG93bihlKSx0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JQcmVjZWRpbmdMaW5lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnNvclVwKGUpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9LHQucHJvdG90eXBlLmN1cnNvckNoYXJBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKChlLnBhcmFtc1swXXx8MSktMSx0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9LHQucHJvdG90eXBlLmN1cnNvclBvc2l0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IoZS5sZW5ndGg+PTI/KGUucGFyYW1zWzFdfHwxKS0xOjAsKGUucGFyYW1zWzBdfHwxKS0xKSwhMH0sdC5wcm90b3R5cGUuY2hhclBvc0Fic29sdXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IoKGUucGFyYW1zWzBdfHwxKS0xLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSwhMH0sdC5wcm90b3R5cGUuaFBvc2l0aW9uUmVsYXRpdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vdmVDdXJzb3IoZS5wYXJhbXNbMF18fDEsMCksITB9LHQucHJvdG90eXBlLmxpbmVQb3NBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LChlLnBhcmFtc1swXXx8MSktMSksITB9LHQucHJvdG90eXBlLnZQb3NpdGlvblJlbGF0aXZlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb3ZlQ3Vyc29yKDAsZS5wYXJhbXNbMF18fDEpLCEwfSx0LnByb3RvdHlwZS5oVlBvc2l0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnNvclBvc2l0aW9uKGUpLCEwfSx0LnByb3RvdHlwZS50YWJDbGVhcj1mdW5jdGlvbihlKXt2YXIgdD1lLnBhcmFtc1swXTtyZXR1cm4gMD09PXQ/ZGVsZXRlIHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzW3RoaXMuX2FjdGl2ZUJ1ZmZlci54XTozPT09dCYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzPXt9KSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yRm9yd2FyZFRhYj1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2FjdGl2ZUJ1ZmZlci5uZXh0U3RvcCgpO3JldHVybiEwfSx0LnByb3RvdHlwZS5jdXJzb3JCYWNrd2FyZFRhYj1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2FjdGl2ZUJ1ZmZlci5wcmV2U3RvcCgpO3JldHVybiEwfSx0LnByb3RvdHlwZS5fZXJhc2VJbkJ1ZmZlckxpbmU9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09aSYmKGk9ITEpO3ZhciBuPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpO24ucmVwbGFjZUNlbGxzKHQscix0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLGkmJihuLmlzV3JhcHBlZD0hMSl9LHQucHJvdG90eXBlLl9yZXNldEJ1ZmZlckxpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrZSk7dC5maWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKSx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5jbGVhck1hcmtlcnModGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpLHQuaXNXcmFwcGVkPSExfSx0LnByb3RvdHlwZS5lcmFzZUluRGlzcGxheT1mdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2godGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSxlLnBhcmFtc1swXSl7Y2FzZSAwOmZvcih0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodCksdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodCsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywwPT09dGhpcy5fYWN0aXZlQnVmZmVyLngpO3Q8dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO3QrKyl0aGlzLl9yZXNldEJ1ZmZlckxpbmUodCk7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0KTticmVhaztjYXNlIDE6Zm9yKHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0KSx0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0LDAsdGhpcy5fYWN0aXZlQnVmZmVyLngrMSwhMCksdGhpcy5fYWN0aXZlQnVmZmVyLngrMT49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiYodGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0KzEpLmlzV3JhcHBlZD0hMSk7dC0tOyl0aGlzLl9yZXNldEJ1ZmZlckxpbmUodCk7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSgwKTticmVhaztjYXNlIDI6Zm9yKHQ9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodC0xKTt0LS07KXRoaXMuX3Jlc2V0QnVmZmVyTGluZSh0KTt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KDApO2JyZWFrO2Nhc2UgMzp2YXIgcj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMubGVuZ3RoLXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cztyPjAmJih0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMudHJpbVN0YXJ0KHIpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZT1NYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UtciwwKSx0aGlzLl9hY3RpdmVCdWZmZXIueWRpc3A9TWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnlkaXNwLXIsMCksdGhpcy5fb25TY3JvbGwuZmlyZSgwKSl9cmV0dXJuITB9LHQucHJvdG90eXBlLmVyYXNlSW5MaW5lPWZ1bmN0aW9uKGUpe3N3aXRjaCh0aGlzLl9yZXN0cmljdEN1cnNvcih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLGUucGFyYW1zWzBdKXtjYXNlIDA6dGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLDA9PT10aGlzLl9hY3RpdmVCdWZmZXIueCk7YnJlYWs7Y2FzZSAxOnRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LDAsdGhpcy5fYWN0aXZlQnVmZmVyLngrMSwhMSk7YnJlYWs7Y2FzZSAyOnRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LDAsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLCEwKX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9LHQucHJvdG90eXBlLmluc2VydExpbmVzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9ZS5wYXJhbXNbMF18fDE7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtmb3IodmFyIHI9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LGk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEtdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSxuPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xK3RoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZS1pKzE7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKG4tMSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHIsMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuZGVsZXRlTGluZXM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD1lLnBhcmFtc1swXXx8MTtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO3ZhciByLGk9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55O2ZvcihyPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xLXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20scj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSt0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Utcjt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UoaSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHIsMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuaW5zZXJ0Q2hhcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7cmV0dXJuIHQmJih0Lmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LGUucGFyYW1zWzBdfHwxLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSkpLCEwfSx0LnByb3RvdHlwZS5kZWxldGVDaGFycz1mdW5jdGlvbihlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTtyZXR1cm4gdCYmKHQuZGVsZXRlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsZS5wYXJhbXNbMF18fDEsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksITB9LHQucHJvdG90eXBlLnNjcm9sbFVwPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5zY3JvbGxEb3duPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUoZi5ERUZBVUxUX0FUVFJfREFUQSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuc2Nyb2xsTGVmdD1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cjw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsrK3Ipe3ZhciBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3IpO2kuZGVsZXRlQ2VsbHMoMCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5zY3JvbGxSaWdodD1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cjw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsrK3Ipe3ZhciBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3IpO2kuaW5zZXJ0Q2VsbHMoMCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5pbnNlcnRDb2x1bW5zPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrcil7dmFyIGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Urcik7aS5pbnNlcnRDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5kZWxldGVDb2x1bW5zPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrcil7dmFyIGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Urcik7aS5kZWxldGVDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCx0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaS5pc1dyYXBwZWQ9ITF9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5lcmFzZUNoYXJzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3JldHVybiB0JiYodC5yZXBsYWNlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYWN0aXZlQnVmZmVyLngrKGUucGFyYW1zWzBdfHwxKSx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpKSwhMH0sdC5wcm90b3R5cGUucmVwZWF0UHJlY2VkaW5nQ2hhcmFjdGVyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50KXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPW5ldyBVaW50MzJBcnJheSh0KSxpPTA7aTx0OysraSlyW2ldPXRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQ7cmV0dXJuIHRoaXMucHJpbnQociwwLHIubGVuZ3RoKSwhMH0sdC5wcm90b3R5cGUuc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5PWZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmFtc1swXT4wfHwodGhpcy5faXMoInh0ZXJtIil8fHRoaXMuX2lzKCJyeHZ0LXVuaWNvZGUiKXx8dGhpcy5faXMoInNjcmVlbiIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls/MTsyYyIpOnRoaXMuX2lzKCJsaW51eCIpJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPzZjIikpLCEwfSx0LnByb3RvdHlwZS5zZW5kRGV2aWNlQXR0cmlidXRlc1NlY29uZGFyeT1mdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJhbXNbMF0+MHx8KHRoaXMuX2lzKCJ4dGVybSIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls+MDsyNzY7MGMiKTp0aGlzLl9pcygicnh2dC11bmljb2RlIik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz44NTs5NTswYyIpOnRoaXMuX2lzKCJsaW51eCIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoZS5wYXJhbXNbMF0rImMiKTp0aGlzLl9pcygic2NyZWVuIikmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls+ODM7NDAwMDM7MGMiKSksITB9LHQucHJvdG90eXBlLl9pcz1mdW5jdGlvbihlKXtyZXR1cm4gMD09PSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRlcm1OYW1lKyIiKS5pbmRleE9mKGUpfSx0LnByb3RvdHlwZS5zZXRNb2RlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKTQ9PT1lLnBhcmFtc1t0XSYmKHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGU9ITApO3JldHVybiEwfSx0LnByb3RvdHlwZS5zZXRNb2RlUHJpdmF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylzd2l0Y2goZS5wYXJhbXNbdF0pe2Nhc2UgMTp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzPSEwO2JyZWFrO2Nhc2UgMjp0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLGEuREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgxLGEuREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgyLGEuREVGQVVMVF9DSEFSU0VUKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgzLGEuREVGQVVMVF9DSEFSU0VUKTticmVhaztjYXNlIDM6dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzJiYodGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoMTMyLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpKTticmVhaztjYXNlIDY6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMCx0aGlzLl9zZXRDdXJzb3IoMCwwKTticmVhaztjYXNlIDc6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ9ITA7YnJlYWs7Y2FzZSAxMjpicmVhaztjYXNlIDQ1OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZD0hMDticmVhaztjYXNlIDY2OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlNlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSEwLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgOTp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPSJYMTAiO2JyZWFrO2Nhc2UgMWUzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9IlZUMjAwIjticmVhaztjYXNlIDEwMDI6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD0iRFJBRyI7YnJlYWs7Y2FzZSAxMDAzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9IkFOWSI7YnJlYWs7Y2FzZSAxMDA0OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXM9ITAsdGhpcy5fb25SZXF1ZXN0U2VuZEZvY3VzLmZpcmUoKTticmVhaztjYXNlIDEwMDU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiREVDU0VUIDEwMDUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KSIpO2JyZWFrO2Nhc2UgMTAwNjp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nPSJTR1IiO2JyZWFrO2Nhc2UgMTAxNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNTRVQgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAyNTp0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMTticmVhaztjYXNlIDEwNDg6dGhpcy5zYXZlQ3Vyc29yKCk7YnJlYWs7Y2FzZSAxMDQ5OnRoaXMuc2F2ZUN1cnNvcigpO2Nhc2UgNDc6Y2FzZSAxMDQ3OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZUFsdEJ1ZmZlcih0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITAsdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDIwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZT0hMH1yZXR1cm4hMH0sdC5wcm90b3R5cGUucmVzZXRNb2RlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKTQ9PT1lLnBhcmFtc1t0XSYmKHRoaXMuX2NvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGU9ITEpO3JldHVybiEwfSx0LnByb3RvdHlwZS5yZXNldE1vZGVQcml2YXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXN3aXRjaChlLnBhcmFtc1t0XSl7Y2FzZSAxOnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXM9ITE7YnJlYWs7Y2FzZSAzOnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucy5zZXRXaW5MaW5lcyYmKHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpKTticmVhaztjYXNlIDY6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMSx0aGlzLl9zZXRDdXJzb3IoMCwwKTticmVhaztjYXNlIDc6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQ9ITE7YnJlYWs7Y2FzZSAxMjpicmVhaztjYXNlIDQ1OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5yZXZlcnNlV3JhcGFyb3VuZD0hMTticmVhaztjYXNlIDY2OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlN3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSExLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgOTpjYXNlIDFlMzpjYXNlIDEwMDI6Y2FzZSAxMDAzOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9Ik5PTkUiO2JyZWFrO2Nhc2UgMTAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzPSExO2JyZWFrO2Nhc2UgMTAwNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNSU1QgMTAwNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAxMDA2OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2Rpbmc9IkRFRkFVTFQiO2JyZWFrO2Nhc2UgMTAxNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNSU1QgMTAxNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAyNTp0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMDticmVhaztjYXNlIDEwNDg6dGhpcy5yZXN0b3JlQ3Vyc29yKCk7YnJlYWs7Y2FzZSAxMDQ5OmNhc2UgNDc6Y2FzZSAxMDQ3OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmF0ZU5vcm1hbEJ1ZmZlcigpLDEwNDk9PT1lLnBhcmFtc1t0XSYmdGhpcy5yZXN0b3JlQ3Vyc29yKCksdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZD0hMCx0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKDAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgMjAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlPSExfXJldHVybiEwfSx0LnByb3RvdHlwZS5fdXBkYXRlQXR0ckNvbG9yPWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJuIDI9PT10PyhlfD01MDMzMTY0OCxlJj0tMTY3NzcyMTYsZXw9di5BdHRyaWJ1dGVEYXRhLmZyb21Db2xvclJHQihbcixpLG5dKSk6NT09PXQmJihlJj0tNTAzMzE5MDQsZXw9MzM1NTQ0MzJ8MjU1JnIpLGV9LHQucHJvdG90eXBlLl9leHRyYWN0Q29sb3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPVswLDAsLTEsMCwwLDBdLG49MCxvPTA7ZG97aWYoaVtvK25dPWUucGFyYW1zW3Qrb10sZS5oYXNTdWJQYXJhbXModCtvKSl7dmFyIHM9ZS5nZXRTdWJQYXJhbXModCtvKSxhPTA7ZG97NT09PWlbMV0mJihuPTEpLGlbbythKzErbl09c1thXX13aGlsZSgrK2E8cy5sZW5ndGgmJmErbysxK248aS5sZW5ndGgpO2JyZWFrfWlmKDU9PT1pWzFdJiZvK24+PTJ8fDI9PT1pWzFdJiZvK24+PTUpYnJlYWs7aVsxXSYmKG49MSl9d2hpbGUoKytvK3Q8ZS5sZW5ndGgmJm8rbjxpLmxlbmd0aCk7Zm9yKGE9MjthPGkubGVuZ3RoOysrYSktMT09PWlbYV0mJihpW2FdPTApO3N3aXRjaChpWzBdKXtjYXNlIDM4OnIuZmc9dGhpcy5fdXBkYXRlQXR0ckNvbG9yKHIuZmcsaVsxXSxpWzNdLGlbNF0saVs1XSk7YnJlYWs7Y2FzZSA0ODpyLmJnPXRoaXMuX3VwZGF0ZUF0dHJDb2xvcihyLmJnLGlbMV0saVszXSxpWzRdLGlbNV0pO2JyZWFrO2Nhc2UgNTg6ci5leHRlbmRlZD1yLmV4dGVuZGVkLmNsb25lKCksci5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj10aGlzLl91cGRhdGVBdHRyQ29sb3Ioci5leHRlbmRlZC51bmRlcmxpbmVDb2xvcixpWzFdLGlbM10saVs0XSxpWzVdKX1yZXR1cm4gb30sdC5wcm90b3R5cGUuX3Byb2Nlc3NVbmRlcmxpbmU9ZnVuY3Rpb24oZSx0KXt0LmV4dGVuZGVkPXQuZXh0ZW5kZWQuY2xvbmUoKSwoIX5lfHxlPjUpJiYoZT0xKSx0LmV4dGVuZGVkLnVuZGVybGluZVN0eWxlPWUsdC5mZ3w9MjY4NDM1NDU2LDA9PT1lJiYodC5mZyY9LTI2ODQzNTQ1NyksdC51cGRhdGVFeHRlbmRlZCgpfSx0LnByb3RvdHlwZS5jaGFyQXR0cmlidXRlcz1mdW5jdGlvbihlKXtpZigxPT09ZS5sZW5ndGgmJjA9PT1lLnBhcmFtc1swXSlyZXR1cm4gdGhpcy5fY3VyQXR0ckRhdGEuZmc9Zi5ERUZBVUxUX0FUVFJfREFUQS5mZyx0aGlzLl9jdXJBdHRyRGF0YS5iZz1mLkRFRkFVTFRfQVRUUl9EQVRBLmJnLCEwO2Zvcih2YXIgdCxyPWUubGVuZ3RoLGk9dGhpcy5fY3VyQXR0ckRhdGEsbj0wO248cjtuKyspKHQ9ZS5wYXJhbXNbbl0pPj0zMCYmdDw9Mzc/KGkuZmcmPS01MDMzMTkwNCxpLmZnfD0xNjc3NzIxNnx0LTMwKTp0Pj00MCYmdDw9NDc/KGkuYmcmPS01MDMzMTkwNCxpLmJnfD0xNjc3NzIxNnx0LTQwKTp0Pj05MCYmdDw9OTc/KGkuZmcmPS01MDMzMTkwNCxpLmZnfD0xNjc3NzIyNHx0LTkwKTp0Pj0xMDAmJnQ8PTEwNz8oaS5iZyY9LTUwMzMxOTA0LGkuYmd8PTE2Nzc3MjI0fHQtMTAwKTowPT09dD8oaS5mZz1mLkRFRkFVTFRfQVRUUl9EQVRBLmZnLGkuYmc9Zi5ERUZBVUxUX0FUVFJfREFUQS5iZyk6MT09PXQ/aS5mZ3w9MTM0MjE3NzI4OjM9PT10P2kuYmd8PTY3MTA4ODY0OjQ9PT10PyhpLmZnfD0yNjg0MzU0NTYsdGhpcy5fcHJvY2Vzc1VuZGVybGluZShlLmhhc1N1YlBhcmFtcyhuKT9lLmdldFN1YlBhcmFtcyhuKVswXToxLGkpKTo1PT09dD9pLmZnfD01MzY4NzA5MTI6Nz09PXQ/aS5mZ3w9NjcxMDg4NjQ6OD09PXQ/aS5mZ3w9MTA3Mzc0MTgyNDo5PT09dD9pLmZnfD0yMTQ3NDgzNjQ4OjI9PT10P2kuYmd8PTEzNDIxNzcyODoyMT09PXQ/dGhpcy5fcHJvY2Vzc1VuZGVybGluZSgyLGkpOjIyPT09dD8oaS5mZyY9LTEzNDIxNzcyOSxpLmJnJj0tMTM0MjE3NzI5KToyMz09PXQ/aS5iZyY9LTY3MTA4ODY1OjI0PT09dD9pLmZnJj0tMjY4NDM1NDU3OjI1PT09dD9pLmZnJj0tNTM2ODcwOTEzOjI3PT09dD9pLmZnJj0tNjcxMDg4NjU6Mjg9PT10P2kuZmcmPS0xMDczNzQxODI1OjI5PT09dD9pLmZnJj0yMTQ3NDgzNjQ3OjM5PT09dD8oaS5mZyY9LTY3MTA4ODY0LGkuZmd8PTE2Nzc3MjE1JmYuREVGQVVMVF9BVFRSX0RBVEEuZmcpOjQ5PT09dD8oaS5iZyY9LTY3MTA4ODY0LGkuYmd8PTE2Nzc3MjE1JmYuREVGQVVMVF9BVFRSX0RBVEEuYmcpOjM4PT09dHx8NDg9PT10fHw1OD09PXQ/bis9dGhpcy5fZXh0cmFjdENvbG9yKGUsbixpKTo1OT09PXQ/KGkuZXh0ZW5kZWQ9aS5leHRlbmRlZC5jbG9uZSgpLGkuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I9LTEsaS51cGRhdGVFeHRlbmRlZCgpKToxMDA9PT10PyhpLmZnJj0tNjcxMDg4NjQsaS5mZ3w9MTY3NzcyMTUmZi5ERUZBVUxUX0FUVFJfREFUQS5mZyxpLmJnJj0tNjcxMDg4NjQsaS5iZ3w9MTY3NzcyMTUmZi5ERUZBVUxUX0FUVFJfREFUQS5iZyk6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBTR1IgYXR0cmlidXRlOiAlZC4iLHQpO3JldHVybiEwfSx0LnByb3RvdHlwZS5kZXZpY2VTdGF0dXM9ZnVuY3Rpb24oZSl7c3dpdGNoKGUucGFyYW1zWzBdKXtjYXNlIDU6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWzBuIik7YnJlYWs7Y2FzZSA2OnZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55KzEscj10aGlzLl9hY3RpdmVCdWZmZXIueCsxO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlsiK3QrIjsiK3IrIlIiKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuZGV2aWNlU3RhdHVzUHJpdmF0ZT1mdW5jdGlvbihlKXtpZig2PT09ZS5wYXJhbXNbMF0pe3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55KzEscj10aGlzLl9hY3RpdmVCdWZmZXIueCsxO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls/Iit0KyI7IityKyJSIil9cmV0dXJuITB9LHQucHJvdG90eXBlLnNvZnRSZXNldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW49ITEsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCksdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcD0wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b209dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEsdGhpcy5fY3VyQXR0ckRhdGE9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuX2NvcmVTZXJ2aWNlLnJlc2V0KCksdGhpcy5fY2hhcnNldFNlcnZpY2UucmVzZXQoKSx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYPTAsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc9dGhpcy5fY3VyQXR0ckRhdGEuZmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmc9dGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldD10aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0LHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW49ITEsITB9LHQucHJvdG90eXBlLnNldEN1cnNvclN0eWxlPWZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyYW1zWzBdfHwxO3N3aXRjaCh0KXtjYXNlIDE6Y2FzZSAyOnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU9ImJsb2NrIjticmVhaztjYXNlIDM6Y2FzZSA0OnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU9InVuZGVybGluZSI7YnJlYWs7Y2FzZSA1OmNhc2UgNjp0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlPSJiYXIifXZhciByPXQlMj09MTtyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JCbGluaz1yLCEwfSx0LnByb3RvdHlwZS5zZXRTY3JvbGxSZWdpb249ZnVuY3Rpb24oZSl7dmFyIHQscj1lLnBhcmFtc1swXXx8MTtyZXR1cm4oZS5sZW5ndGg8Mnx8KHQ9ZS5wYXJhbXNbMV0pPnRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c3x8MD09PXQpJiYodD10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHQ+ciYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A9ci0xLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b209dC0xLHRoaXMuX3NldEN1cnNvcigwLDApKSwhMH0sdC5wcm90b3R5cGUud2luZG93T3B0aW9ucz1mdW5jdGlvbihlKXtpZighdyhlLnBhcmFtc1swXSx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMpKXJldHVybiEwO3ZhciB0PWUubGVuZ3RoPjE/ZS5wYXJhbXNbMV06MDtzd2l0Y2goZS5wYXJhbXNbMF0pe2Nhc2UgMTQ6MiE9PXQmJnRoaXMuX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0LmZpcmUoby5HRVRfV0lOX1NJWkVfUElYRUxTKTticmVhaztjYXNlIDE2OnRoaXMuX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0LmZpcmUoby5HRVRfQ0VMTF9TSVpFX1BJWEVMUyk7YnJlYWs7Y2FzZSAxODp0aGlzLl9idWZmZXJTZXJ2aWNlJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbODsiK3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93cysiOyIrdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKyJ0Iik7YnJlYWs7Y2FzZSAyMjowIT09dCYmMiE9PXR8fCh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnB1c2godGhpcy5fd2luZG93VGl0bGUpLHRoaXMuX3dpbmRvd1RpdGxlU3RhY2subGVuZ3RoPjEwJiZ0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnNoaWZ0KCkpLDAhPT10JiYxIT09dHx8KHRoaXMuX2ljb25OYW1lU3RhY2sucHVzaCh0aGlzLl9pY29uTmFtZSksdGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGg+MTAmJnRoaXMuX2ljb25OYW1lU3RhY2suc2hpZnQoKSk7YnJlYWs7Y2FzZSAyMzowIT09dCYmMiE9PXR8fHRoaXMuX3dpbmRvd1RpdGxlU3RhY2subGVuZ3RoJiZ0aGlzLnNldFRpdGxlKHRoaXMuX3dpbmRvd1RpdGxlU3RhY2sucG9wKCkpLDAhPT10JiYxIT09dHx8dGhpcy5faWNvbk5hbWVTdGFjay5sZW5ndGgmJnRoaXMuc2V0SWNvbk5hbWUodGhpcy5faWNvbk5hbWVTdGFjay5wb3AoKSl9cmV0dXJuITB9LHQucHJvdG90eXBlLnNhdmVDdXJzb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFg9dGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmc9dGhpcy5fY3VyQXR0ckRhdGEuZmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmc9dGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldD10aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0LCEwfSx0LnByb3RvdHlwZS5yZXN0b3JlQ3Vyc29yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYfHwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PU1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFktdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLDApLHRoaXMuX2N1ckF0dHJEYXRhLmZnPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnLHRoaXMuX2N1ckF0dHJEYXRhLmJnPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ9dGhpcy5fc2F2ZWRDaGFyc2V0LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQmJih0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9LHQucHJvdG90eXBlLnNldFRpdGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl93aW5kb3dUaXRsZT1lLHRoaXMuX29uVGl0bGVDaGFuZ2UuZmlyZShlKSwhMH0sdC5wcm90b3R5cGUuc2V0SWNvbk5hbWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ljb25OYW1lPWUsITB9LHQucHJvdG90eXBlLnNldE9yUmVwb3J0SW5kZXhlZENvbG9yPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPWUuc3BsaXQoIjsiKTtyLmxlbmd0aD4xOyl7dmFyIGk9ci5zaGlmdCgpLG49ci5zaGlmdCgpO2lmKC9eXGQrJC8uZXhlYyhpKSl7dmFyIG89cGFyc2VJbnQoaSk7aWYoMDw9byYmbzwyNTYpaWYoIj8iPT09bil0LnB1c2goe3R5cGU6MCxpbmRleDpvfSk7ZWxzZXt2YXIgcz0oMCxiLnBhcnNlQ29sb3IpKG4pO3MmJnQucHVzaCh7dHlwZToxLGluZGV4Om8sY29sb3I6c30pfX19cmV0dXJuIHQubGVuZ3RoJiZ0aGlzLl9vbkNvbG9yLmZpcmUodCksITB9LHQucHJvdG90eXBlLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1lLnNwbGl0KCI7IiksaT0wO2k8ci5sZW5ndGgmJiEodD49dGhpcy5fc3BlY2lhbENvbG9ycy5sZW5ndGgpOysraSwrK3QpaWYoIj8iPT09cltpXSl0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjAsaW5kZXg6dGhpcy5fc3BlY2lhbENvbG9yc1t0XX1dKTtlbHNle3ZhciBuPSgwLGIucGFyc2VDb2xvcikocltpXSk7biYmdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToxLGluZGV4OnRoaXMuX3NwZWNpYWxDb2xvcnNbdF0sY29sb3I6bn1dKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuc2V0T3JSZXBvcnRGZ0NvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihlLDApfSx0LnByb3RvdHlwZS5zZXRPclJlcG9ydEJnQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsMSl9LHQucHJvdG90eXBlLnNldE9yUmVwb3J0Q3Vyc29yQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsMil9LHQucHJvdG90eXBlLnJlc3RvcmVJbmRleGVkQ29sb3I9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6Mn1dKSwhMDtmb3IodmFyIHQ9W10scj1lLnNwbGl0KCI7IiksaT0wO2k8ci5sZW5ndGg7KytpKWlmKC9eXGQrJC8uZXhlYyhyW2ldKSl7dmFyIG49cGFyc2VJbnQocltpXSk7MDw9biYmbjwyNTYmJnQucHVzaCh7dHlwZToyLGluZGV4Om59KX1yZXR1cm4gdC5sZW5ndGgmJnRoaXMuX29uQ29sb3IuZmlyZSh0KSwhMH0sdC5wcm90b3R5cGUucmVzdG9yZUZnQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MixpbmRleDoyNTZ9XSksITB9LHQucHJvdG90eXBlLnJlc3RvcmVCZ0NvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjIsaW5kZXg6MjU3fV0pLCEwfSx0LnByb3RvdHlwZS5yZXN0b3JlQ3Vyc29yQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MixpbmRleDoyNTh9XSksITB9LHQucHJvdG90eXBlLm5leHRMaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsdGhpcy5pbmRleCgpLCEwfSx0LnByb3RvdHlwZS5rZXlwYWRBcHBsaWNhdGlvbk1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiU2VyaWFsIHBvcnQgcmVxdWVzdGVkIGFwcGxpY2F0aW9uIGtleXBhZC4iKSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQ9ITAsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCksITB9LHQucHJvdG90eXBlLmtleXBhZE51bWVyaWNNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlN3aXRjaGluZyBiYWNrIHRvIG5vcm1hbCBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSExLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5zZWxlY3REZWZhdWx0Q2hhcnNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoMCksdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMCxhLkRFRkFVTFRfQ0hBUlNFVCksITB9LHQucHJvdG90eXBlLnNlbGVjdENoYXJzZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDIhPT1lLmxlbmd0aD8odGhpcy5zZWxlY3REZWZhdWx0Q2hhcnNldCgpLCEwKTooIi8iPT09ZVswXXx8dGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoU1tlWzBdXSxhLkNIQVJTRVRTW2VbMV1dfHxhLkRFRkFVTFRfQ0hBUlNFVCksITApfSx0LnByb3RvdHlwZS5pbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KyssdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKzE/KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk6dGhpcy5fYWN0aXZlQnVmZmVyLnk+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9yZXN0cmljdEN1cnNvcigpLCEwfSx0LnByb3RvdHlwZS50YWJTZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLnRhYnNbdGhpcy5fYWN0aXZlQnVmZmVyLnhdPSEwLCEwfSx0LnByb3RvdHlwZS5yZXZlcnNlSW5kZXg9ZnVuY3Rpb24oKXtpZih0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCl7dmFyIGU9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbS10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3RoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zaGlmdEVsZW1lbnRzKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSxlLDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSl9ZWxzZSB0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7cmV0dXJuITB9LHQucHJvdG90eXBlLmZ1bGxSZXNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYXJzZXIucmVzZXQoKSx0aGlzLl9vblJlcXVlc3RSZXNldC5maXJlKCksITB9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fY3VyQXR0ckRhdGE9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbD1mLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCl9LHQucHJvdG90eXBlLl9lcmFzZUF0dHJEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZyY9LTY3MTA4ODY0LHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbC5iZ3w9NjcxMDg4NjMmdGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsfSx0LnByb3RvdHlwZS5zZXRnTGV2ZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbChlKSwhMH0sdC5wcm90b3R5cGUuc2NyZWVuQWxpZ25tZW50UGF0dGVybj1mdW5jdGlvbigpe3ZhciBlPW5ldyBwLkNlbGxEYXRhO2UuY29udGVudD0xPDwyMnwiRSIuY2hhckNvZGVBdCgwKSxlLmZnPXRoaXMuX2N1ckF0dHJEYXRhLmZnLGUuYmc9dGhpcy5fY3VyQXR0ckRhdGEuYmcsdGhpcy5fc2V0Q3Vyc29yKDAsMCk7Zm9yKHZhciB0PTA7dDx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7Kyt0KXt2YXIgcj10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkrdCxpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQocik7aSYmKGkuZmlsbChlKSxpLmlzV3JhcHBlZD0hMSl9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrQWxsRGlydHkoKSx0aGlzLl9zZXRDdXJzb3IoMCwwKSwhMH0sdH0obC5EaXNwb3NhYmxlKTt0LklucHV0SGFuZGxlcj1FfSw4NDQ6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZ2V0RGlzcG9zZUFycmF5RGlzcG9zYWJsZT10LmRpc3Bvc2VBcnJheT10LkRpc3Bvc2FibGU9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2Rpc3Bvc2FibGVzPVtdLHRoaXMuX2lzRGlzcG9zZWQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZSx0O3RoaXMuX2lzRGlzcG9zZWQ9ITA7dHJ5e2Zvcih2YXIgaT1yKHRoaXMuX2Rpc3Bvc2FibGVzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSluLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYodD1pLnJldHVybikmJnQuY2FsbChpKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoPTB9LGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKGUpLGV9LGUucHJvdG90eXBlLnVucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGlzcG9zYWJsZXMuaW5kZXhPZihlKTstMSE9PXQmJnRoaXMuX2Rpc3Bvc2FibGVzLnNwbGljZSh0LDEpfSxlfSgpO2Z1bmN0aW9uIG4oZSl7dmFyIHQsaTt0cnl7Zm9yKHZhciBuPXIoZSksbz1uLm5leHQoKTshby5kb25lO289bi5uZXh0KCkpby52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7byYmIW8uZG9uZSYmKGk9bi5yZXR1cm4pJiZpLmNhbGwobil9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fWUubGVuZ3RoPTB9dC5EaXNwb3NhYmxlPWksdC5kaXNwb3NlQXJyYXk9bix0LmdldERpc3Bvc2VBcnJheURpc3Bvc2FibGU9ZnVuY3Rpb24oZSl7cmV0dXJue2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gbihlKX19fX0sNjExNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmlzTGludXg9dC5pc1dpbmRvd3M9dC5pc0lwaG9uZT10LmlzSXBhZD10LmlzTWFjPXQuaXNTYWZhcmk9dC5pc0xlZ2FjeUVkZ2U9dC5pc0ZpcmVmb3g9dm9pZCAwO3ZhciByPSJ1bmRlZmluZWQiPT10eXBlb2YgbmF2aWdhdG9yLGk9cj8ibm9kZSI6bmF2aWdhdG9yLnVzZXJBZ2VudCxuPXI/Im5vZGUiOm5hdmlnYXRvci5wbGF0Zm9ybTt0LmlzRmlyZWZveD1pLmluY2x1ZGVzKCJGaXJlZm94IiksdC5pc0xlZ2FjeUVkZ2U9aS5pbmNsdWRlcygiRWRnZSIpLHQuaXNTYWZhcmk9L14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdChpKSx0LmlzTWFjPVsiTWFjaW50b3NoIiwiTWFjSW50ZWwiLCJNYWNQUEMiLCJNYWM2OEsiXS5pbmNsdWRlcyhuKSx0LmlzSXBhZD0iaVBhZCI9PT1uLHQuaXNJcGhvbmU9ImlQaG9uZSI9PT1uLHQuaXNXaW5kb3dzPVsiV2luZG93cyIsIldpbjE2IiwiV2luMzIiLCJXaW5DRSJdLmluY2x1ZGVzKG4pLHQuaXNMaW51eD1uLmluZGV4T2YoIkxpbnV4Iik+PTB9LDYxMDY6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYob1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxvO2Z1bmN0aW9uIGEobyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihvKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZihyPTEsaSYmKG49MiZvWzBdP2kucmV0dXJuOm9bMF0/aS50aHJvd3x8KChuPWkucmV0dXJuKSYmbi5jYWxsKGkpLDApOmkubmV4dCkmJiEobj1uLmNhbGwoaSxvWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2goaT0wLG4mJihvPVsyJm9bMF0sbi52YWx1ZV0pLG9bMF0pe2Nhc2UgMDpjYXNlIDE6bj1vO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTpvWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssaT1vWzFdLG89WzBdO2NvbnRpbnVlO2Nhc2UgNzpvPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoKG49KG49cy50cnlzKS5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSl8fDYhPT1vWzBdJiYyIT09b1swXSkpe3M9MDtjb250aW51ZX1pZigzPT09b1swXSYmKCFufHxvWzFdPm5bMF0mJm9bMV08blszXSkpe3MubGFiZWw9b1sxXTticmVha31pZig2PT09b1swXSYmcy5sYWJlbDxuWzFdKXtzLmxhYmVsPW5bMV0sbj1vO2JyZWFrfWlmKG4mJnMubGFiZWw8blsyXSl7cy5sYWJlbD1uWzJdLHMub3BzLnB1c2gobyk7YnJlYWt9blsyXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfW89dC5jYWxsKGUscyl9Y2F0Y2goZSl7bz1bNixlXSxpPTB9ZmluYWxseXtyPW49MH1pZig1Jm9bMF0pdGhyb3cgb1sxXTtyZXR1cm57dmFsdWU6b1swXT9vWzFdOnZvaWQgMCxkb25lOiEwfX0oW28sYV0pfX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNvcnRlZExpc3Q9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9nZXRLZXk9ZSx0aGlzLl9hcnJheT1bXX1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9hcnJheS5sZW5ndGg9MH0sZS5wcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKGUpe2lmKDAhPT10aGlzLl9hcnJheS5sZW5ndGgpe3ZhciB0PXRoaXMuX3NlYXJjaCh0aGlzLl9nZXRLZXkoZSksMCx0aGlzLl9hcnJheS5sZW5ndGgtMSk7dGhpcy5fYXJyYXkuc3BsaWNlKHQsMCxlKX1lbHNlIHRoaXMuX2FycmF5LnB1c2goZSl9LGUucHJvdG90eXBlLmRlbGV0ZT1mdW5jdGlvbihlKXtpZigwPT09dGhpcy5fYXJyYXkubGVuZ3RoKXJldHVybiExO3ZhciB0PXRoaXMuX2dldEtleShlKSxyPXRoaXMuX3NlYXJjaCh0LDAsdGhpcy5fYXJyYXkubGVuZ3RoLTEpO2lmKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtyXSkhPT10KXJldHVybiExO2Rve2lmKHRoaXMuX2FycmF5W3JdPT09ZSlyZXR1cm4gdGhpcy5fYXJyYXkuc3BsaWNlKHIsMSksITB9d2hpbGUoKytyPHRoaXMuX2FycmF5Lmxlbmd0aCYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W3JdKT09PXQpO3JldHVybiExfSxlLnByb3RvdHlwZS5nZXRLZXlJdGVyYXRvcj1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gcih0aGlzLChmdW5jdGlvbihyKXtzd2l0Y2goci5sYWJlbCl7Y2FzZSAwOmlmKDA9PT10aGlzLl9hcnJheS5sZW5ndGgpcmV0dXJuWzJdO2lmKCh0PXRoaXMuX3NlYXJjaChlLDAsdGhpcy5fYXJyYXkubGVuZ3RoLTEpKTwwfHx0Pj10aGlzLl9hcnJheS5sZW5ndGgpcmV0dXJuWzJdO2lmKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVt0XSkhPT1lKXJldHVyblsyXTtyLmxhYmVsPTE7Y2FzZSAxOnJldHVybls0LHRoaXMuX2FycmF5W3RdXTtjYXNlIDI6ci5zZW50KCksci5sYWJlbD0zO2Nhc2UgMzppZigrK3Q8dGhpcy5fYXJyYXkubGVuZ3RoJiZ0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbdF0pPT09ZSlyZXR1cm5bMywxXTtyLmxhYmVsPTQ7Y2FzZSA0OnJldHVyblsyXX19KSl9LGUucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcnJheS52YWx1ZXMoKX0sZS5wcm90b3R5cGUuX3NlYXJjaD1mdW5jdGlvbihlLHQscil7aWYocjx0KXJldHVybiB0O3ZhciBpPU1hdGguZmxvb3IoKHQrcikvMik7aWYodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKT5lKXJldHVybiB0aGlzLl9zZWFyY2goZSx0LGktMSk7aWYodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ldKTxlKXJldHVybiB0aGlzLl9zZWFyY2goZSxpKzEscik7Zm9yKDtpPjAmJnRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpLTFdKT09PWU7KWktLTtyZXR1cm4gaX0sZX0oKTt0LlNvcnRlZExpc3Q9aX0sODI3MzooZSx0KT0+e2Z1bmN0aW9uIHIoZSx0LHIsaSl7aWYodm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09aSYmKGk9ZS5sZW5ndGgpLHI+PWUubGVuZ3RoKXJldHVybiBlO3I9KGUubGVuZ3RoK3IpJWUubGVuZ3RoLGk9aT49ZS5sZW5ndGg/ZS5sZW5ndGg6KGUubGVuZ3RoK2kpJWUubGVuZ3RoO2Zvcih2YXIgbj1yO248aTsrK24pZVtuXT10O3JldHVybiBlfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmNvbmNhdD10LmZpbGxGYWxsYmFjaz10LmZpbGw9dm9pZCAwLHQuZmlsbD1mdW5jdGlvbihlLHQsaSxuKXtyZXR1cm4gZS5maWxsP2UuZmlsbCh0LGksbik6cihlLHQsaSxuKX0sdC5maWxsRmFsbGJhY2s9cix0LmNvbmNhdD1mdW5jdGlvbihlLHQpe3ZhciByPW5ldyBlLmNvbnN0cnVjdG9yKGUubGVuZ3RoK3QubGVuZ3RoKTtyZXR1cm4gci5zZXQoZSksci5zZXQodCxlLmxlbmd0aCkscn19LDkyODI6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlPXZvaWQgMDt2YXIgaT1yKDY0Myk7dC51cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLmJ1ZmZlci5saW5lcy5nZXQoZS5idWZmZXIueWJhc2UrZS5idWZmZXIueS0xKSxyPW51bGw9PXQ/dm9pZCAwOnQuZ2V0KGUuY29scy0xKSxuPWUuYnVmZmVyLmxpbmVzLmdldChlLmJ1ZmZlci55YmFzZStlLmJ1ZmZlci55KTtuJiZyJiYobi5pc1dyYXBwZWQ9cltpLkNIQVJfREFUQV9DT0RFX0lOREVYXSE9PWkuTlVMTF9DRUxMX0NPREUmJnJbaS5DSEFSX0RBVEFfQ09ERV9JTkRFWF0hPT1pLldISVRFU1BBQ0VfQ0VMTF9DT0RFKX19LDM3MzQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5FeHRlbmRlZEF0dHJzPXQuQXR0cmlidXRlRGF0YT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5mZz0wLHRoaXMuYmc9MCx0aGlzLmV4dGVuZGVkPW5ldyBpfXJldHVybiBlLnRvQ29sb3JSR0I9ZnVuY3Rpb24oZSl7cmV0dXJuW2U+Pj4xNiYyNTUsZT4+PjgmMjU1LDI1NSZlXX0sZS5mcm9tQ29sb3JSR0I9ZnVuY3Rpb24oZSl7cmV0dXJuKDI1NSZlWzBdKTw8MTZ8KDI1NSZlWzFdKTw8OHwyNTUmZVsyXX0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZTtyZXR1cm4gdC5mZz10aGlzLmZnLHQuYmc9dGhpcy5iZyx0LmV4dGVuZGVkPXRoaXMuZXh0ZW5kZWQuY2xvbmUoKSx0fSxlLnByb3RvdHlwZS5pc0ludmVyc2U9ZnVuY3Rpb24oKXtyZXR1cm4gNjcxMDg4NjQmdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNCb2xkPWZ1bmN0aW9uKCl7cmV0dXJuIDEzNDIxNzcyOCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNCbGluaz1mdW5jdGlvbigpe3JldHVybiA1MzY4NzA5MTImdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNJbnZpc2libGU9ZnVuY3Rpb24oKXtyZXR1cm4gMTA3Mzc0MTgyNCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc0l0YWxpYz1mdW5jdGlvbigpe3JldHVybiA2NzEwODg2NCZ0aGlzLmJnfSxlLnByb3RvdHlwZS5pc0RpbT1mdW5jdGlvbigpe3JldHVybiAxMzQyMTc3MjgmdGhpcy5iZ30sZS5wcm90b3R5cGUuaXNTdHJpa2V0aHJvdWdoPWZ1bmN0aW9uKCl7cmV0dXJuIDIxNDc0ODM2NDgmdGhpcy5mZ30sZS5wcm90b3R5cGUuZ2V0RmdDb2xvck1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gNTAzMzE2NDgmdGhpcy5mZ30sZS5wcm90b3R5cGUuZ2V0QmdDb2xvck1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gNTAzMzE2NDgmdGhpcy5iZ30sZS5wcm90b3R5cGUuaXNGZ1JHQj1mdW5jdGlvbigpe3JldHVybiA1MDMzMTY0OD09KDUwMzMxNjQ4JnRoaXMuZmcpfSxlLnByb3RvdHlwZS5pc0JnUkdCPWZ1bmN0aW9uKCl7cmV0dXJuIDUwMzMxNjQ4PT0oNTAzMzE2NDgmdGhpcy5iZyl9LGUucHJvdG90eXBlLmlzRmdQYWxldHRlPWZ1bmN0aW9uKCl7cmV0dXJuIDE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5mZyl8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5mZyl9LGUucHJvdG90eXBlLmlzQmdQYWxldHRlPWZ1bmN0aW9uKCl7cmV0dXJuIDE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5iZyl8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5iZyl9LGUucHJvdG90eXBlLmlzRmdEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSg1MDMzMTY0OCZ0aGlzLmZnKX0sZS5wcm90b3R5cGUuaXNCZ0RlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMD09KDUwMzMxNjQ4JnRoaXMuYmcpfSxlLnByb3RvdHlwZS5pc0F0dHJpYnV0ZURlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMuZmcmJjA9PT10aGlzLmJnfSxlLnByb3RvdHlwZS5nZXRGZ0NvbG9yPWZ1bmN0aW9uKCl7c3dpdGNoKDUwMzMxNjQ4JnRoaXMuZmcpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gMjU1JnRoaXMuZmc7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gMTY3NzcyMTUmdGhpcy5mZztkZWZhdWx0OnJldHVybi0xfX0sZS5wcm90b3R5cGUuZ2V0QmdDb2xvcj1mdW5jdGlvbigpe3N3aXRjaCg1MDMzMTY0OCZ0aGlzLmJnKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIDI1NSZ0aGlzLmJnO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIDE2Nzc3MjE1JnRoaXMuYmc7ZGVmYXVsdDpyZXR1cm4tMX19LGUucHJvdG90eXBlLmhhc0V4dGVuZGVkQXR0cnM9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmd9LGUucHJvdG90eXBlLnVwZGF0ZUV4dGVuZGVkPWZ1bmN0aW9uKCl7dGhpcy5leHRlbmRlZC5pc0VtcHR5KCk/dGhpcy5iZyY9LTI2ODQzNTQ1Nzp0aGlzLmJnfD0yNjg0MzU0NTZ9LGUucHJvdG90eXBlLmdldFVuZGVybGluZUNvbG9yPWZ1bmN0aW9uKCl7aWYoMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKXN3aXRjaCg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIDI1NSZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIDE2Nzc3MjE1JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I7ZGVmYXVsdDpyZXR1cm4gdGhpcy5nZXRGZ0NvbG9yKCl9cmV0dXJuIHRoaXMuZ2V0RmdDb2xvcigpfSxlLnByb3RvdHlwZS5nZXRVbmRlcmxpbmVDb2xvck1vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I6dGhpcy5nZXRGZ0NvbG9yTW9kZSgpfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZUNvbG9yUkdCPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj81MDMzMTY0OD09KDUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IpOnRoaXMuaXNGZ1JHQigpfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZUNvbG9yUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5iZyYmfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I/MTY3NzcyMTY9PSg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKXx8MzM1NTQ0MzI9PSg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKTp0aGlzLmlzRmdQYWxldHRlKCl9LGUucHJvdG90eXBlLmlzVW5kZXJsaW5lQ29sb3JEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj8wPT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnRGVmYXVsdCgpfSxlLnByb3RvdHlwZS5nZXRVbmRlcmxpbmVTdHlsZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5mZz8yNjg0MzU0NTYmdGhpcy5iZz90aGlzLmV4dGVuZGVkLnVuZGVybGluZVN0eWxlOjE6MH0sZX0oKTt0LkF0dHJpYnV0ZURhdGE9cjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD0tMSksdGhpcy51bmRlcmxpbmVTdHlsZT1lLHRoaXMudW5kZXJsaW5lQ29sb3I9dH1yZXR1cm4gZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGUodGhpcy51bmRlcmxpbmVTdHlsZSx0aGlzLnVuZGVybGluZUNvbG9yKX0sZS5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy51bmRlcmxpbmVTdHlsZX0sZX0oKTt0LkV4dGVuZGVkQXR0cnM9aX0sOTA5MjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfSxuPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24oZSx0LHIpe2lmKHJ8fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaSxuPTAsbz10Lmxlbmd0aDtuPG87bisrKSFpJiZuIGluIHR8fChpfHwoaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAsbikpLGlbbl09dFtuXSk7cmV0dXJuIGUuY29uY2F0KGl8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyU3RyaW5nSXRlcmF0b3I9dC5CdWZmZXI9dC5NQVhfQlVGRkVSX1NJWkU9dm9pZCAwO3ZhciBvPXIoNjM0OSkscz1yKDg0MzcpLGE9cig1MTEpLGM9cig2NDMpLGw9cig0NjM0KSxoPXIoNDg2MyksdT1yKDcxMTYpLGY9cigzNzM0KTt0Lk1BWF9CVUZGRVJfU0laRT00Mjk0OTY3Mjk1O3ZhciBfPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5faGFzU2Nyb2xsYmFjaz1lLHRoaXMuX29wdGlvbnNTZXJ2aWNlPXQsdGhpcy5fYnVmZmVyU2VydmljZT1yLHRoaXMueWRpc3A9MCx0aGlzLnliYXNlPTAsdGhpcy55PTAsdGhpcy54PTAsdGhpcy5zYXZlZFk9MCx0aGlzLnNhdmVkWD0wLHRoaXMuc2F2ZWRDdXJBdHRyRGF0YT1zLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCksdGhpcy5zYXZlZENoYXJzZXQ9dS5ERUZBVUxUX0NIQVJTRVQsdGhpcy5tYXJrZXJzPVtdLHRoaXMuX251bGxDZWxsPWEuQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLGMuTlVMTF9DRUxMX0NIQVIsYy5OVUxMX0NFTExfV0lEVEgsYy5OVUxMX0NFTExfQ09ERV0pLHRoaXMuX3doaXRlc3BhY2VDZWxsPWEuQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLGMuV0hJVEVTUEFDRV9DRUxMX0NIQVIsYy5XSElURVNQQUNFX0NFTExfV0lEVEgsYy5XSElURVNQQUNFX0NFTExfQ09ERV0pLHRoaXMuX2lzQ2xlYXJpbmc9ITEsdGhpcy5fY29scz10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fcm93cz10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsdGhpcy5saW5lcz1uZXcgby5DaXJjdWxhckxpc3QodGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSksdGhpcy5zY3JvbGxUb3A9MCx0aGlzLnNjcm9sbEJvdHRvbT10aGlzLl9yb3dzLTEsdGhpcy5zZXR1cFRhYlN0b3BzKCl9cmV0dXJuIGUucHJvdG90eXBlLmdldE51bGxDZWxsPWZ1bmN0aW9uKGUpe3JldHVybiBlPyh0aGlzLl9udWxsQ2VsbC5mZz1lLmZnLHRoaXMuX251bGxDZWxsLmJnPWUuYmcsdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQ9ZS5leHRlbmRlZCk6KHRoaXMuX251bGxDZWxsLmZnPTAsdGhpcy5fbnVsbENlbGwuYmc9MCx0aGlzLl9udWxsQ2VsbC5leHRlbmRlZD1uZXcgZi5FeHRlbmRlZEF0dHJzKSx0aGlzLl9udWxsQ2VsbH0sZS5wcm90b3R5cGUuZ2V0V2hpdGVzcGFjZUNlbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KHRoaXMuX3doaXRlc3BhY2VDZWxsLmZnPWUuZmcsdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmc9ZS5iZyx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5leHRlbmRlZD1lLmV4dGVuZGVkKToodGhpcy5fd2hpdGVzcGFjZUNlbGwuZmc9MCx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZz0wLHRoaXMuX3doaXRlc3BhY2VDZWxsLmV4dGVuZGVkPW5ldyBmLkV4dGVuZGVkQXR0cnMpLHRoaXMuX3doaXRlc3BhY2VDZWxsfSxlLnByb3RvdHlwZS5nZXRCbGFua0xpbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbmV3IHMuQnVmZmVyTGluZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5nZXROdWxsQ2VsbChlKSx0KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJoYXNTY3JvbGxiYWNrIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2smJnRoaXMubGluZXMubWF4TGVuZ3RoPnRoaXMuX3Jvd3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0N1cnNvckluVmlld3BvcnQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnliYXNlK3RoaXMueS10aGlzLnlkaXNwO3JldHVybiBlPj0wJiZlPHRoaXMuX3Jvd3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2dldENvcnJlY3RCdWZmZXJMZW5ndGg9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2hhc1Njcm9sbGJhY2spcmV0dXJuIGU7dmFyIHI9ZSt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbGJhY2s7cmV0dXJuIHI+dC5NQVhfQlVGRkVSX1NJWkU/dC5NQVhfQlVGRkVSX1NJWkU6cn0sZS5wcm90b3R5cGUuZmlsbFZpZXdwb3J0Um93cz1mdW5jdGlvbihlKXtpZigwPT09dGhpcy5saW5lcy5sZW5ndGgpe3ZvaWQgMD09PWUmJihlPXMuREVGQVVMVF9BVFRSX0RBVEEpO2Zvcih2YXIgdD10aGlzLl9yb3dzO3QtLTspdGhpcy5saW5lcy5wdXNoKHRoaXMuZ2V0QmxhbmtMaW5lKGUpKX19LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy55ZGlzcD0wLHRoaXMueWJhc2U9MCx0aGlzLnk9MCx0aGlzLng9MCx0aGlzLmxpbmVzPW5ldyBvLkNpcmN1bGFyTGlzdCh0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHRoaXMuX3Jvd3MpKSx0aGlzLnNjcm9sbFRvcD0wLHRoaXMuc2Nyb2xsQm90dG9tPXRoaXMuX3Jvd3MtMSx0aGlzLnNldHVwVGFiU3RvcHMoKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5nZXROdWxsQ2VsbChzLkRFRkFVTFRfQVRUUl9EQVRBKSxpPXRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodCk7aWYoaT50aGlzLmxpbmVzLm1heExlbmd0aCYmKHRoaXMubGluZXMubWF4TGVuZ3RoPWkpLHRoaXMubGluZXMubGVuZ3RoPjApe2lmKHRoaXMuX2NvbHM8ZSlmb3IodmFyIG49MDtuPHRoaXMubGluZXMubGVuZ3RoO24rKyl0aGlzLmxpbmVzLmdldChuKS5yZXNpemUoZSxyKTt2YXIgbz0wO2lmKHRoaXMuX3Jvd3M8dClmb3IodmFyIGE9dGhpcy5fcm93czthPHQ7YSsrKXRoaXMubGluZXMubGVuZ3RoPHQrdGhpcy55YmFzZSYmKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c01vZGU/dGhpcy5saW5lcy5wdXNoKG5ldyBzLkJ1ZmZlckxpbmUoZSxyKSk6dGhpcy55YmFzZT4wJiZ0aGlzLmxpbmVzLmxlbmd0aDw9dGhpcy55YmFzZSt0aGlzLnkrbysxPyh0aGlzLnliYXNlLS0sbysrLHRoaXMueWRpc3A+MCYmdGhpcy55ZGlzcC0tKTp0aGlzLmxpbmVzLnB1c2gobmV3IHMuQnVmZmVyTGluZShlLHIpKSk7ZWxzZSBmb3IoYT10aGlzLl9yb3dzO2E+dDthLS0pdGhpcy5saW5lcy5sZW5ndGg+dCt0aGlzLnliYXNlJiYodGhpcy5saW5lcy5sZW5ndGg+dGhpcy55YmFzZSt0aGlzLnkrMT90aGlzLmxpbmVzLnBvcCgpOih0aGlzLnliYXNlKyssdGhpcy55ZGlzcCsrKSk7aWYoaTx0aGlzLmxpbmVzLm1heExlbmd0aCl7dmFyIGM9dGhpcy5saW5lcy5sZW5ndGgtaTtjPjAmJih0aGlzLmxpbmVzLnRyaW1TdGFydChjKSx0aGlzLnliYXNlPU1hdGgubWF4KHRoaXMueWJhc2UtYywwKSx0aGlzLnlkaXNwPU1hdGgubWF4KHRoaXMueWRpc3AtYywwKSx0aGlzLnNhdmVkWT1NYXRoLm1heCh0aGlzLnNhdmVkWS1jLDApKSx0aGlzLmxpbmVzLm1heExlbmd0aD1pfXRoaXMueD1NYXRoLm1pbih0aGlzLngsZS0xKSx0aGlzLnk9TWF0aC5taW4odGhpcy55LHQtMSksbyYmKHRoaXMueSs9byksdGhpcy5zYXZlZFg9TWF0aC5taW4odGhpcy5zYXZlZFgsZS0xKSx0aGlzLnNjcm9sbFRvcD0wfWlmKHRoaXMuc2Nyb2xsQm90dG9tPXQtMSx0aGlzLl9pc1JlZmxvd0VuYWJsZWQmJih0aGlzLl9yZWZsb3coZSx0KSx0aGlzLl9jb2xzPmUpKWZvcihuPTA7bjx0aGlzLmxpbmVzLmxlbmd0aDtuKyspdGhpcy5saW5lcy5nZXQobikucmVzaXplKGUscik7dGhpcy5fY29scz1lLHRoaXMuX3Jvd3M9dH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJfaXNSZWZsb3dFbmFibGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc1Njcm9sbGJhY2smJiF0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9yZWZsb3c9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb2xzIT09ZSYmKGU+dGhpcy5fY29scz90aGlzLl9yZWZsb3dMYXJnZXIoZSx0KTp0aGlzLl9yZWZsb3dTbWFsbGVyKGUsdCkpfSxlLnByb3RvdHlwZS5fcmVmbG93TGFyZ2VyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9KDAsbC5yZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlKSh0aGlzLmxpbmVzLHRoaXMuX2NvbHMsZSx0aGlzLnliYXNlK3RoaXMueSx0aGlzLmdldE51bGxDZWxsKHMuREVGQVVMVF9BVFRSX0RBVEEpKTtpZihyLmxlbmd0aD4wKXt2YXIgaT0oMCxsLnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dCkodGhpcy5saW5lcyxyKTsoMCxsLnJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0KSh0aGlzLmxpbmVzLGkubGF5b3V0KSx0aGlzLl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydChlLHQsaS5jb3VudFJlbW92ZWQpfX0sZS5wcm90b3R5cGUuX3JlZmxvd0xhcmdlckFkanVzdFZpZXdwb3J0PWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGk9dGhpcy5nZXROdWxsQ2VsbChzLkRFRkFVTFRfQVRUUl9EQVRBKSxuPXI7bi0tID4wOykwPT09dGhpcy55YmFzZT8odGhpcy55PjAmJnRoaXMueS0tLHRoaXMubGluZXMubGVuZ3RoPHQmJnRoaXMubGluZXMucHVzaChuZXcgcy5CdWZmZXJMaW5lKGUsaSkpKToodGhpcy55ZGlzcD09PXRoaXMueWJhc2UmJnRoaXMueWRpc3AtLSx0aGlzLnliYXNlLS0pO3RoaXMuc2F2ZWRZPU1hdGgubWF4KHRoaXMuc2F2ZWRZLXIsMCl9LGUucHJvdG90eXBlLl9yZWZsb3dTbWFsbGVyPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuZ2V0TnVsbENlbGwocy5ERUZBVUxUX0FUVFJfREFUQSksbz1bXSxhPTAsYz10aGlzLmxpbmVzLmxlbmd0aC0xO2M+PTA7Yy0tKXt2YXIgaD10aGlzLmxpbmVzLmdldChjKTtpZighKCFofHwhaC5pc1dyYXBwZWQmJmguZ2V0VHJpbW1lZExlbmd0aCgpPD1lKSl7Zm9yKHZhciB1PVtoXTtoLmlzV3JhcHBlZCYmYz4wOyloPXRoaXMubGluZXMuZ2V0KC0tYyksdS51bnNoaWZ0KGgpO3ZhciBmPXRoaXMueWJhc2UrdGhpcy55O2lmKCEoZj49YyYmZjxjK3UubGVuZ3RoKSl7dmFyIF8sZD11W3UubGVuZ3RoLTFdLmdldFRyaW1tZWRMZW5ndGgoKSxwPSgwLGwucmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzKSh1LHRoaXMuX2NvbHMsZSksdj1wLmxlbmd0aC11Lmxlbmd0aDtfPTA9PT10aGlzLnliYXNlJiZ0aGlzLnkhPT10aGlzLmxpbmVzLmxlbmd0aC0xP01hdGgubWF4KDAsdGhpcy55LXRoaXMubGluZXMubWF4TGVuZ3RoK3YpOk1hdGgubWF4KDAsdGhpcy5saW5lcy5sZW5ndGgtdGhpcy5saW5lcy5tYXhMZW5ndGgrdik7Zm9yKHZhciB5PVtdLGc9MDtnPHY7ZysrKXt2YXIgbT10aGlzLmdldEJsYW5rTGluZShzLkRFRkFVTFRfQVRUUl9EQVRBLCEwKTt5LnB1c2gobSl9eS5sZW5ndGg+MCYmKG8ucHVzaCh7c3RhcnQ6Yyt1Lmxlbmd0aCthLG5ld0xpbmVzOnl9KSxhKz15Lmxlbmd0aCksdS5wdXNoLmFwcGx5KHUsbihbXSxpKHkpLCExKSk7dmFyIGI9cC5sZW5ndGgtMSxTPXBbYl07MD09PVMmJihTPXBbLS1iXSk7Zm9yKHZhciBDPXUubGVuZ3RoLXYtMSx3PWQ7Qz49MDspe3ZhciBMPU1hdGgubWluKHcsUyk7aWYodm9pZCAwPT09dVtiXSlicmVhaztpZih1W2JdLmNvcHlDZWxsc0Zyb20odVtDXSx3LUwsUy1MLEwsITApLDA9PShTLT1MKSYmKFM9cFstLWJdKSwwPT0ody09TCkpe0MtLTt2YXIgRT1NYXRoLm1heChDLDApO3c9KDAsbC5nZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGgpKHUsRSx0aGlzLl9jb2xzKX19Zm9yKGc9MDtnPHUubGVuZ3RoO2crKylwW2ddPGUmJnVbZ10uc2V0Q2VsbChwW2ddLHIpO2Zvcih2YXIgeD12LV87eC0tID4wOykwPT09dGhpcy55YmFzZT90aGlzLnk8dC0xPyh0aGlzLnkrKyx0aGlzLmxpbmVzLnBvcCgpKToodGhpcy55YmFzZSsrLHRoaXMueWRpc3ArKyk6dGhpcy55YmFzZTxNYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCx0aGlzLmxpbmVzLmxlbmd0aCthKS10JiYodGhpcy55YmFzZT09PXRoaXMueWRpc3AmJnRoaXMueWRpc3ArKyx0aGlzLnliYXNlKyspO3RoaXMuc2F2ZWRZPU1hdGgubWluKHRoaXMuc2F2ZWRZK3YsdGhpcy55YmFzZSt0LTEpfX19aWYoby5sZW5ndGg+MCl7dmFyIFI9W10saz1bXTtmb3IoZz0wO2c8dGhpcy5saW5lcy5sZW5ndGg7ZysrKWsucHVzaCh0aGlzLmxpbmVzLmdldChnKSk7dmFyIE09dGhpcy5saW5lcy5sZW5ndGgsQT1NLTEsTz0wLEQ9b1tPXTt0aGlzLmxpbmVzLmxlbmd0aD1NYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aCx0aGlzLmxpbmVzLmxlbmd0aCthKTt2YXIgVD0wO2ZvcihnPU1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLTEsTSthLTEpO2c+PTA7Zy0tKWlmKEQmJkQuc3RhcnQ+QStUKXtmb3IodmFyIEI9RC5uZXdMaW5lcy5sZW5ndGgtMTtCPj0wO0ItLSl0aGlzLmxpbmVzLnNldChnLS0sRC5uZXdMaW5lc1tCXSk7ZysrLFIucHVzaCh7aW5kZXg6QSsxLGFtb3VudDpELm5ld0xpbmVzLmxlbmd0aH0pLFQrPUQubmV3TGluZXMubGVuZ3RoLEQ9b1srK09dfWVsc2UgdGhpcy5saW5lcy5zZXQoZyxrW0EtLV0pO3ZhciBQPTA7Zm9yKGc9Ui5sZW5ndGgtMTtnPj0wO2ctLSlSW2ddLmluZGV4Kz1QLHRoaXMubGluZXMub25JbnNlcnRFbWl0dGVyLmZpcmUoUltnXSksUCs9UltnXS5hbW91bnQ7dmFyIEk9TWF0aC5tYXgoMCxNK2EtdGhpcy5saW5lcy5tYXhMZW5ndGgpO0k+MCYmdGhpcy5saW5lcy5vblRyaW1FbWl0dGVyLmZpcmUoSSl9fSxlLnByb3RvdHlwZS5zdHJpbmdJbmRleFRvQnVmZmVySW5kZXg9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2b2lkIDA9PT1yJiYocj0hMSk7dDspe3ZhciBpPXRoaXMubGluZXMuZ2V0KGUpO2lmKCFpKXJldHVyblstMSwtMV07Zm9yKHZhciBuPXI/aS5nZXRUcmltbWVkTGVuZ3RoKCk6aS5sZW5ndGgsbz0wO288bjsrK28paWYoaS5nZXQobylbYy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdJiYodC09aS5nZXQobylbYy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RofHwxKSx0PDApcmV0dXJuW2Usb107ZSsrfXJldHVybltlLDBdfSxlLnByb3RvdHlwZS50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIsaSl7dm9pZCAwPT09ciYmKHI9MCk7dmFyIG49dGhpcy5saW5lcy5nZXQoZSk7cmV0dXJuIG4/bi50cmFuc2xhdGVUb1N0cmluZyh0LHIsaSk6IiJ9LGUucHJvdG90eXBlLmdldFdyYXBwZWRSYW5nZUZvckxpbmU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUscj1lO3Q+MCYmdGhpcy5saW5lcy5nZXQodCkuaXNXcmFwcGVkOyl0LS07Zm9yKDtyKzE8dGhpcy5saW5lcy5sZW5ndGgmJnRoaXMubGluZXMuZ2V0KHIrMSkuaXNXcmFwcGVkOylyKys7cmV0dXJue2ZpcnN0OnQsbGFzdDpyfX0sZS5wcm90b3R5cGUuc2V0dXBUYWJTdG9wcz1mdW5jdGlvbihlKXtmb3IobnVsbCE9ZT90aGlzLnRhYnNbZV18fChlPXRoaXMucHJldlN0b3AoZSkpOih0aGlzLnRhYnM9e30sZT0wKTtlPHRoaXMuX2NvbHM7ZSs9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50YWJTdG9wV2lkdGgpdGhpcy50YWJzW2VdPSEwfSxlLnByb3RvdHlwZS5wcmV2U3RvcD1mdW5jdGlvbihlKXtmb3IobnVsbD09ZSYmKGU9dGhpcy54KTshdGhpcy50YWJzWy0tZV0mJmU+MDspO3JldHVybiBlPj10aGlzLl9jb2xzP3RoaXMuX2NvbHMtMTplPDA/MDplfSxlLnByb3RvdHlwZS5uZXh0U3RvcD1mdW5jdGlvbihlKXtmb3IobnVsbD09ZSYmKGU9dGhpcy54KTshdGhpcy50YWJzWysrZV0mJmU8dGhpcy5fY29sczspO3JldHVybiBlPj10aGlzLl9jb2xzP3RoaXMuX2NvbHMtMTplPDA/MDplfSxlLnByb3RvdHlwZS5jbGVhck1hcmtlcnM9ZnVuY3Rpb24oZSl7dGhpcy5faXNDbGVhcmluZz0hMDtmb3IodmFyIHQ9MDt0PHRoaXMubWFya2Vycy5sZW5ndGg7dCsrKXRoaXMubWFya2Vyc1t0XS5saW5lPT09ZSYmKHRoaXMubWFya2Vyc1t0XS5kaXNwb3NlKCksdGhpcy5tYXJrZXJzLnNwbGljZSh0LS0sMSkpO3RoaXMuX2lzQ2xlYXJpbmc9ITF9LGUucHJvdG90eXBlLmNsZWFyQWxsTWFya2Vycz1mdW5jdGlvbigpe3RoaXMuX2lzQ2xlYXJpbmc9ITA7Zm9yKHZhciBlPTA7ZTx0aGlzLm1hcmtlcnMubGVuZ3RoO2UrKyl0aGlzLm1hcmtlcnNbZV0uZGlzcG9zZSgpLHRoaXMubWFya2Vycy5zcGxpY2UoZS0tLDEpO3RoaXMuX2lzQ2xlYXJpbmc9ITF9LGUucHJvdG90eXBlLmFkZE1hcmtlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9bmV3IGguTWFya2VyKGUpO3JldHVybiB0aGlzLm1hcmtlcnMucHVzaChyKSxyLnJlZ2lzdGVyKHRoaXMubGluZXMub25UcmltKChmdW5jdGlvbihlKXtyLmxpbmUtPWUsci5saW5lPDAmJnIuZGlzcG9zZSgpfSkpKSxyLnJlZ2lzdGVyKHRoaXMubGluZXMub25JbnNlcnQoKGZ1bmN0aW9uKGUpe3IubGluZT49ZS5pbmRleCYmKHIubGluZSs9ZS5hbW91bnQpfSkpKSxyLnJlZ2lzdGVyKHRoaXMubGluZXMub25EZWxldGUoKGZ1bmN0aW9uKGUpe3IubGluZT49ZS5pbmRleCYmci5saW5lPGUuaW5kZXgrZS5hbW91bnQmJnIuZGlzcG9zZSgpLHIubGluZT5lLmluZGV4JiYoci5saW5lLT1lLmFtb3VudCl9KSkpLHIucmVnaXN0ZXIoci5vbkRpc3Bvc2UoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbW92ZU1hcmtlcihyKX0pKSkscn0sZS5wcm90b3R5cGUuX3JlbW92ZU1hcmtlcj1mdW5jdGlvbihlKXt0aGlzLl9pc0NsZWFyaW5nfHx0aGlzLm1hcmtlcnMuc3BsaWNlKHRoaXMubWFya2Vycy5pbmRleE9mKGUpLDEpfSxlLnByb3RvdHlwZS5pdGVyYXRvcj1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybiBuZXcgZCh0aGlzLGUsdCxyLGksbil9LGV9KCk7dC5CdWZmZXI9Xzt2YXIgZD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8pe3ZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PWkmJihpPWUubGluZXMubGVuZ3RoKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1vJiYobz0wKSx0aGlzLl9idWZmZXI9ZSx0aGlzLl90cmltUmlnaHQ9dCx0aGlzLl9zdGFydEluZGV4PXIsdGhpcy5fZW5kSW5kZXg9aSx0aGlzLl9zdGFydE92ZXJzY2FuPW4sdGhpcy5fZW5kT3ZlcnNjYW49byx0aGlzLl9zdGFydEluZGV4PDAmJih0aGlzLl9zdGFydEluZGV4PTApLHRoaXMuX2VuZEluZGV4PnRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgmJih0aGlzLl9lbmRJbmRleD10aGlzLl9idWZmZXIubGluZXMubGVuZ3RoKSx0aGlzLl9jdXJyZW50PXRoaXMuX3N0YXJ0SW5kZXh9cmV0dXJuIGUucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY3VycmVudDx0aGlzLl9lbmRJbmRleH0sZS5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2J1ZmZlci5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKHRoaXMuX2N1cnJlbnQpO2UuZmlyc3Q8dGhpcy5fc3RhcnRJbmRleC10aGlzLl9zdGFydE92ZXJzY2FuJiYoZS5maXJzdD10aGlzLl9zdGFydEluZGV4LXRoaXMuX3N0YXJ0T3ZlcnNjYW4pLGUubGFzdD50aGlzLl9lbmRJbmRleCt0aGlzLl9lbmRPdmVyc2NhbiYmKGUubGFzdD10aGlzLl9lbmRJbmRleCt0aGlzLl9lbmRPdmVyc2NhbiksZS5maXJzdD1NYXRoLm1heChlLmZpcnN0LDApLGUubGFzdD1NYXRoLm1pbihlLmxhc3QsdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aCk7Zm9yKHZhciB0PSIiLHI9ZS5maXJzdDtyPD1lLmxhc3Q7KytyKXQrPXRoaXMuX2J1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcocix0aGlzLl90cmltUmlnaHQpO3JldHVybiB0aGlzLl9jdXJyZW50PWUubGFzdCsxLHtyYW5nZTplLGNvbnRlbnQ6dH19LGV9KCk7dC5CdWZmZXJTdHJpbmdJdGVyYXRvcj1kfSw4NDM3OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJMaW5lPXQuREVGQVVMVF9BVFRSX0RBVEE9dm9pZCAwO3ZhciBpPXIoNDgyKSxuPXIoNjQzKSxvPXIoNTExKSxzPXIoMzczNCk7dC5ERUZBVUxUX0FUVFJfREFUQT1PYmplY3QuZnJlZXplKG5ldyBzLkF0dHJpYnV0ZURhdGEpO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dm9pZCAwPT09ciYmKHI9ITEpLHRoaXMuaXNXcmFwcGVkPXIsdGhpcy5fY29tYmluZWQ9e30sdGhpcy5fZXh0ZW5kZWRBdHRycz17fSx0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgzKmUpO2Zvcih2YXIgaT10fHxvLkNlbGxEYXRhLmZyb21DaGFyRGF0YShbMCxuLk5VTExfQ0VMTF9DSEFSLG4uTlVMTF9DRUxMX1dJRFRILG4uTlVMTF9DRUxMX0NPREVdKSxzPTA7czxlOysrcyl0aGlzLnNldENlbGwocyxpKTt0aGlzLmxlbmd0aD1lfXJldHVybiBlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YVszKmUrMF0scj0yMDk3MTUxJnQ7cmV0dXJuW3RoaXMuX2RhdGFbMyplKzFdLDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXTpyPygwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkocik6IiIsdD4+MjIsMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbZV0ubGVuZ3RoLTEpOnJdfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kYXRhWzMqZSsxXT10W24uQ0hBUl9EQVRBX0FUVFJfSU5ERVhdLHRbbi5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoPjE/KHRoaXMuX2NvbWJpbmVkW2VdPXRbMV0sdGhpcy5fZGF0YVszKmUrMF09MjA5NzE1MnxlfHRbbi5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMik6dGhpcy5fZGF0YVszKmUrMF09dFtuLkNIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApfHRbbi5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMn0sZS5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFbMyplKzBdPj4yMn0sZS5wcm90b3R5cGUuaGFzV2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIDEyNTgyOTEyJnRoaXMuX2RhdGFbMyplKzBdfSxlLnByb3RvdHlwZS5nZXRGZz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YVszKmUrMV19LGUucHJvdG90eXBlLmdldEJnPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXRhWzMqZSsyXX0sZS5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbihlKXtyZXR1cm4gNDE5NDMwMyZ0aGlzLl9kYXRhWzMqZSswXX0sZS5wcm90b3R5cGUuZ2V0Q29kZVBvaW50PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGFbMyplKzBdO3JldHVybiAyMDk3MTUyJnQ/dGhpcy5fY29tYmluZWRbZV0uY2hhckNvZGVBdCh0aGlzLl9jb21iaW5lZFtlXS5sZW5ndGgtMSk6MjA5NzE1MSZ0fSxlLnByb3RvdHlwZS5pc0NvbWJpbmVkPWZ1bmN0aW9uKGUpe3JldHVybiAyMDk3MTUyJnRoaXMuX2RhdGFbMyplKzBdfSxlLnByb3RvdHlwZS5nZXRTdHJpbmc9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YVszKmUrMF07cmV0dXJuIDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXToyMDk3MTUxJnQ/KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KSgyMDk3MTUxJnQpOiIifSxlLnByb3RvdHlwZS5sb2FkQ2VsbD1mdW5jdGlvbihlLHQpe3ZhciByPTMqZTtyZXR1cm4gdC5jb250ZW50PXRoaXMuX2RhdGFbciswXSx0LmZnPXRoaXMuX2RhdGFbcisxXSx0LmJnPXRoaXMuX2RhdGFbcisyXSwyMDk3MTUyJnQuY29udGVudCYmKHQuY29tYmluZWREYXRhPXRoaXMuX2NvbWJpbmVkW2VdKSwyNjg0MzU0NTYmdC5iZyYmKHQuZXh0ZW5kZWQ9dGhpcy5fZXh0ZW5kZWRBdHRyc1tlXSksdH0sZS5wcm90b3R5cGUuc2V0Q2VsbD1mdW5jdGlvbihlLHQpezIwOTcxNTImdC5jb250ZW50JiYodGhpcy5fY29tYmluZWRbZV09dC5jb21iaW5lZERhdGEpLDI2ODQzNTQ1NiZ0LmJnJiYodGhpcy5fZXh0ZW5kZWRBdHRyc1tlXT10LmV4dGVuZGVkKSx0aGlzLl9kYXRhWzMqZSswXT10LmNvbnRlbnQsdGhpcy5fZGF0YVszKmUrMV09dC5mZyx0aGlzLl9kYXRhWzMqZSsyXT10LmJnfSxlLnByb3RvdHlwZS5zZXRDZWxsRnJvbUNvZGVQb2ludD1mdW5jdGlvbihlLHQscixpLG4sbyl7MjY4NDM1NDU2Jm4mJih0aGlzLl9leHRlbmRlZEF0dHJzW2VdPW8pLHRoaXMuX2RhdGFbMyplKzBdPXR8cjw8MjIsdGhpcy5fZGF0YVszKmUrMV09aSx0aGlzLl9kYXRhWzMqZSsyXT1ufSxlLnByb3RvdHlwZS5hZGRDb2RlcG9pbnRUb0NlbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9kYXRhWzMqZSswXTsyMDk3MTUyJnI/dGhpcy5fY29tYmluZWRbZV0rPSgwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkodCk6KDIwOTcxNTEmcj8odGhpcy5fY29tYmluZWRbZV09KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KSgyMDk3MTUxJnIpKygwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkodCksciY9LTIwOTcxNTIscnw9MjA5NzE1Mik6cj10fDE8PDIyLHRoaXMuX2RhdGFbMyplKzBdPXIpfSxlLnByb3RvdHlwZS5pbnNlcnRDZWxscz1mdW5jdGlvbihlLHQscixpKXtpZigoZSU9dGhpcy5sZW5ndGgpJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpLHQ8dGhpcy5sZW5ndGgtZSl7Zm9yKHZhciBuPW5ldyBvLkNlbGxEYXRhLGE9dGhpcy5sZW5ndGgtZS10LTE7YT49MDstLWEpdGhpcy5zZXRDZWxsKGUrdCthLHRoaXMubG9hZENlbGwoZSthLG4pKTtmb3IoYT0wO2E8dDsrK2EpdGhpcy5zZXRDZWxsKGUrYSxyKX1lbHNlIGZvcihhPWU7YTx0aGlzLmxlbmd0aDsrK2EpdGhpcy5zZXRDZWxsKGEscik7Mj09PXRoaXMuZ2V0V2lkdGgodGhpcy5sZW5ndGgtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5sZW5ndGgtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpfSxlLnByb3RvdHlwZS5kZWxldGVDZWxscz1mdW5jdGlvbihlLHQscixpKXtpZihlJT10aGlzLmxlbmd0aCx0PHRoaXMubGVuZ3RoLWUpe2Zvcih2YXIgbj1uZXcgby5DZWxsRGF0YSxhPTA7YTx0aGlzLmxlbmd0aC1lLXQ7KythKXRoaXMuc2V0Q2VsbChlK2EsdGhpcy5sb2FkQ2VsbChlK3QrYSxuKSk7Zm9yKGE9dGhpcy5sZW5ndGgtdDthPHRoaXMubGVuZ3RoOysrYSl0aGlzLnNldENlbGwoYSxyKX1lbHNlIGZvcihhPWU7YTx0aGlzLmxlbmd0aDsrK2EpdGhpcy5zZXRDZWxsKGEscik7ZSYmMj09PXRoaXMuZ2V0V2lkdGgoZS0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChlLTEsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKSwwIT09dGhpcy5nZXRXaWR0aChlKXx8dGhpcy5oYXNDb250ZW50KGUpfHx0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKX0sZS5wcm90b3R5cGUucmVwbGFjZUNlbGxzPWZ1bmN0aW9uKGUsdCxyLGkpe2ZvcihlJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpLHQ8dGhpcy5sZW5ndGgmJjI9PT10aGlzLmdldFdpZHRoKHQtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQodCwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpO2U8dCYmZTx0aGlzLmxlbmd0aDspdGhpcy5zZXRDZWxsKGUrKyxyKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7aWYoZSE9PXRoaXMubGVuZ3RoKXtpZihlPnRoaXMubGVuZ3RoKXt2YXIgcj1uZXcgVWludDMyQXJyYXkoMyplKTt0aGlzLmxlbmd0aCYmKDMqZTx0aGlzLl9kYXRhLmxlbmd0aD9yLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KDAsMyplKSk6ci5zZXQodGhpcy5fZGF0YSkpLHRoaXMuX2RhdGE9cjtmb3IodmFyIGk9dGhpcy5sZW5ndGg7aTxlOysraSl0aGlzLnNldENlbGwoaSx0KX1lbHNlIGlmKGUpeyhyPW5ldyBVaW50MzJBcnJheSgzKmUpKS5zZXQodGhpcy5fZGF0YS5zdWJhcnJheSgwLDMqZSkpLHRoaXMuX2RhdGE9cjt2YXIgbj1PYmplY3Qua2V5cyh0aGlzLl9jb21iaW5lZCk7Zm9yKGk9MDtpPG4ubGVuZ3RoO2krKyl7dmFyIG89cGFyc2VJbnQobltpXSwxMCk7bz49ZSYmZGVsZXRlIHRoaXMuX2NvbWJpbmVkW29dfX1lbHNlIHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApLHRoaXMuX2NvbWJpbmVkPXt9O3RoaXMubGVuZ3RoPWV9fSxlLnByb3RvdHlwZS5maWxsPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbWJpbmVkPXt9LHRoaXMuX2V4dGVuZGVkQXR0cnM9e307Zm9yKHZhciB0PTA7dDx0aGlzLmxlbmd0aDsrK3QpdGhpcy5zZXRDZWxsKHQsZSl9LGUucHJvdG90eXBlLmNvcHlGcm9tPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiB0aGlzLmxlbmd0aCE9PWUubGVuZ3RoP3RoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KGUuX2RhdGEpOnRoaXMuX2RhdGEuc2V0KGUuX2RhdGEpLHRoaXMubGVuZ3RoPWUubGVuZ3RoLHRoaXMuX2NvbWJpbmVkPXt9LGUuX2NvbWJpbmVkKXRoaXMuX2NvbWJpbmVkW3RdPWUuX2NvbWJpbmVkW3RdO2Zvcih2YXIgdCBpbiB0aGlzLl9leHRlbmRlZEF0dHJzPXt9LGUuX2V4dGVuZGVkQXR0cnMpdGhpcy5fZXh0ZW5kZWRBdHRyc1t0XT1lLl9leHRlbmRlZEF0dHJzW3RdO3RoaXMuaXNXcmFwcGVkPWUuaXNXcmFwcGVkfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBlKDApO2Zvcih2YXIgciBpbiB0Ll9kYXRhPW5ldyBVaW50MzJBcnJheSh0aGlzLl9kYXRhKSx0Lmxlbmd0aD10aGlzLmxlbmd0aCx0aGlzLl9jb21iaW5lZCl0Ll9jb21iaW5lZFtyXT10aGlzLl9jb21iaW5lZFtyXTtmb3IodmFyIHIgaW4gdGhpcy5fZXh0ZW5kZWRBdHRycyl0Ll9leHRlbmRlZEF0dHJzW3JdPXRoaXMuX2V4dGVuZGVkQXR0cnNbcl07cmV0dXJuIHQuaXNXcmFwcGVkPXRoaXMuaXNXcmFwcGVkLHR9LGUucHJvdG90eXBlLmdldFRyaW1tZWRMZW5ndGg9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5sZW5ndGgtMTtlPj0wOy0tZSlpZig0MTk0MzAzJnRoaXMuX2RhdGFbMyplKzBdKXJldHVybiBlKyh0aGlzLl9kYXRhWzMqZSswXT4+MjIpO3JldHVybiAwfSxlLnByb3RvdHlwZS5jb3B5Q2VsbHNGcm9tPWZ1bmN0aW9uKGUsdCxyLGksbil7dmFyIG89ZS5fZGF0YTtpZihuKWZvcih2YXIgcz1pLTE7cz49MDtzLS0pZm9yKHZhciBhPTA7YTwzO2ErKyl0aGlzLl9kYXRhWzMqKHIrcykrYV09b1szKih0K3MpK2FdO2Vsc2UgZm9yKHM9MDtzPGk7cysrKWZvcihhPTA7YTwzO2ErKyl0aGlzLl9kYXRhWzMqKHIrcykrYV09b1szKih0K3MpK2FdO3ZhciBjPU9iamVjdC5rZXlzKGUuX2NvbWJpbmVkKTtmb3IoYT0wO2E8Yy5sZW5ndGg7YSsrKXt2YXIgbD1wYXJzZUludChjW2FdLDEwKTtsPj10JiYodGhpcy5fY29tYmluZWRbbC10K3JdPWUuX2NvbWJpbmVkW2xdKX19LGUucHJvdG90eXBlLnRyYW5zbGF0ZVRvU3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ciYmKHI9dGhpcy5sZW5ndGgpLGUmJihyPU1hdGgubWluKHIsdGhpcy5nZXRUcmltbWVkTGVuZ3RoKCkpKTtmb3IodmFyIG89IiI7dDxyOyl7dmFyIHM9dGhpcy5fZGF0YVszKnQrMF0sYT0yMDk3MTUxJnM7bys9MjA5NzE1MiZzP3RoaXMuX2NvbWJpbmVkW3RdOmE/KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KShhKTpuLldISVRFU1BBQ0VfQ0VMTF9DSEFSLHQrPXM+PjIyfHwxfXJldHVybiBvfSxlfSgpO3QuQnVmZmVyTGluZT1hfSw0ODQxOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZ2V0UmFuZ2VMZW5ndGg9dm9pZCAwLHQuZ2V0UmFuZ2VMZW5ndGg9ZnVuY3Rpb24oZSx0KXtpZihlLnN0YXJ0Lnk+ZS5lbmQueSl0aHJvdyBuZXcgRXJyb3IoIkJ1ZmZlciByYW5nZSBlbmQgKCIrZS5lbmQueCsiLCAiK2UuZW5kLnkrIikgY2Fubm90IGJlIGJlZm9yZSBzdGFydCAoIitlLnN0YXJ0LngrIiwgIitlLnN0YXJ0LnkrIikiKTtyZXR1cm4gdCooZS5lbmQueS1lLnN0YXJ0LnkpKyhlLmVuZC54LWUuc3RhcnQueCsxKX19LDQ2MzQ6KGUsdCk9PntmdW5jdGlvbiByKGUsdCxyKXtpZih0PT09ZS5sZW5ndGgtMSlyZXR1cm4gZVt0XS5nZXRUcmltbWVkTGVuZ3RoKCk7dmFyIGk9IWVbdF0uaGFzQ29udGVudChyLTEpJiYxPT09ZVt0XS5nZXRXaWR0aChyLTEpLG49Mj09PWVbdCsxXS5nZXRXaWR0aCgwKTtyZXR1cm4gaSYmbj9yLTE6cn1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5nZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGg9dC5yZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHM9dC5yZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dD10LnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dD10LnJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmU9dm9pZCAwLHQucmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZT1mdW5jdGlvbihlLHQsaSxuLG8pe2Zvcih2YXIgcz1bXSxhPTA7YTxlLmxlbmd0aC0xO2ErKyl7dmFyIGM9YSxsPWUuZ2V0KCsrYyk7aWYobC5pc1dyYXBwZWQpe2Zvcih2YXIgaD1bZS5nZXQoYSldO2M8ZS5sZW5ndGgmJmwuaXNXcmFwcGVkOyloLnB1c2gobCksbD1lLmdldCgrK2MpO2lmKG4+PWEmJm48YylhKz1oLmxlbmd0aC0xO2Vsc2V7Zm9yKHZhciB1PTAsZj1yKGgsdSx0KSxfPTEsZD0wO188aC5sZW5ndGg7KXt2YXIgcD1yKGgsXyx0KSx2PXAtZCx5PWktZixnPU1hdGgubWluKHYseSk7aFt1XS5jb3B5Q2VsbHNGcm9tKGhbX10sZCxmLGcsITEpLChmKz1nKT09PWkmJih1KyssZj0wKSwoZCs9Zyk9PT1wJiYoXysrLGQ9MCksMD09PWYmJjAhPT11JiYyPT09aFt1LTFdLmdldFdpZHRoKGktMSkmJihoW3VdLmNvcHlDZWxsc0Zyb20oaFt1LTFdLGktMSxmKyssMSwhMSksaFt1LTFdLnNldENlbGwoaS0xLG8pKX1oW3VdLnJlcGxhY2VDZWxscyhmLGksbyk7Zm9yKHZhciBtPTAsYj1oLmxlbmd0aC0xO2I+MCYmKGI+dXx8MD09PWhbYl0uZ2V0VHJpbW1lZExlbmd0aCgpKTtiLS0pbSsrO20+MCYmKHMucHVzaChhK2gubGVuZ3RoLW0pLHMucHVzaChtKSksYSs9aC5sZW5ndGgtMX19fXJldHVybiBzfSx0LnJlZmxvd0xhcmdlckNyZWF0ZU5ld0xheW91dD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxpPTAsbj10W2ldLG89MCxzPTA7czxlLmxlbmd0aDtzKyspaWYobj09PXMpe3ZhciBhPXRbKytpXTtlLm9uRGVsZXRlRW1pdHRlci5maXJlKHtpbmRleDpzLW8sYW1vdW50OmF9KSxzKz1hLTEsbys9YSxuPXRbKytpXX1lbHNlIHIucHVzaChzKTtyZXR1cm57bGF5b3V0OnIsY291bnRSZW1vdmVkOm99fSx0LnJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MDtpPHQubGVuZ3RoO2krKylyLnB1c2goZS5nZXQodFtpXSkpO2ZvcihpPTA7aTxyLmxlbmd0aDtpKyspZS5zZXQoaSxyW2ldKTtlLmxlbmd0aD10Lmxlbmd0aH0sdC5yZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHM9ZnVuY3Rpb24oZSx0LGkpe2Zvcih2YXIgbj1bXSxvPWUubWFwKChmdW5jdGlvbihpLG4pe3JldHVybiByKGUsbix0KX0pKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUrdH0pKSxzPTAsYT0wLGM9MDtjPG87KXtpZihvLWM8aSl7bi5wdXNoKG8tYyk7YnJlYWt9cys9aTt2YXIgbD1yKGUsYSx0KTtzPmwmJihzLT1sLGErKyk7dmFyIGg9Mj09PWVbYV0uZ2V0V2lkdGgocy0xKTtoJiZzLS07dmFyIHU9aD9pLTE6aTtuLnB1c2godSksYys9dX1yZXR1cm4gbn0sdC5nZXRXcmFwcGVkTGluZVRyaW1tZWRMZW5ndGg9cn0sNTI5NTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJTZXQ9dm9pZCAwO3ZhciBvPXIoOTA5Mikscz1yKDg0NjApLGE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fb3B0aW9uc1NlcnZpY2U9dCxpLl9idWZmZXJTZXJ2aWNlPXIsaS5fb25CdWZmZXJBY3RpdmF0ZT1pLnJlZ2lzdGVyKG5ldyBzLkV2ZW50RW1pdHRlciksaS5yZXNldCgpLGl9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQnVmZmVyQWN0aXZhdGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX25vcm1hbD1uZXcgby5CdWZmZXIoITAsdGhpcy5fb3B0aW9uc1NlcnZpY2UsdGhpcy5fYnVmZmVyU2VydmljZSksdGhpcy5fbm9ybWFsLmZpbGxWaWV3cG9ydFJvd3MoKSx0aGlzLl9hbHQ9bmV3IG8uQnVmZmVyKCExLHRoaXMuX29wdGlvbnNTZXJ2aWNlLHRoaXMuX2J1ZmZlclNlcnZpY2UpLHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9ub3JtYWwsdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHthY3RpdmVCdWZmZXI6dGhpcy5fbm9ybWFsLGluYWN0aXZlQnVmZmVyOnRoaXMuX2FsdH0pLHRoaXMuc2V0dXBUYWJTdG9wcygpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImFsdCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJhY3RpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibm9ybWFsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcm1hbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5hY3RpdmF0ZU5vcm1hbEJ1ZmZlcj1mdW5jdGlvbigpe3RoaXMuX2FjdGl2ZUJ1ZmZlciE9PXRoaXMuX25vcm1hbCYmKHRoaXMuX25vcm1hbC54PXRoaXMuX2FsdC54LHRoaXMuX25vcm1hbC55PXRoaXMuX2FsdC55LHRoaXMuX2FsdC5jbGVhcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9ub3JtYWwsdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHthY3RpdmVCdWZmZXI6dGhpcy5fbm9ybWFsLGluYWN0aXZlQnVmZmVyOnRoaXMuX2FsdH0pKX0sdC5wcm90b3R5cGUuYWN0aXZhdGVBbHRCdWZmZXI9ZnVuY3Rpb24oZSl7dGhpcy5fYWN0aXZlQnVmZmVyIT09dGhpcy5fYWx0JiYodGhpcy5fYWx0LmZpbGxWaWV3cG9ydFJvd3MoZSksdGhpcy5fYWx0Lng9dGhpcy5fbm9ybWFsLngsdGhpcy5fYWx0Lnk9dGhpcy5fbm9ybWFsLnksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX2FsdCx0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe2FjdGl2ZUJ1ZmZlcjp0aGlzLl9hbHQsaW5hY3RpdmVCdWZmZXI6dGhpcy5fbm9ybWFsfSkpfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9ub3JtYWwucmVzaXplKGUsdCksdGhpcy5fYWx0LnJlc2l6ZShlLHQpfSx0LnByb3RvdHlwZS5zZXR1cFRhYlN0b3BzPWZ1bmN0aW9uKGUpe3RoaXMuX25vcm1hbC5zZXR1cFRhYlN0b3BzKGUpLHRoaXMuX2FsdC5zZXR1cFRhYlN0b3BzKGUpfSx0fShyKDg0NCkuRGlzcG9zYWJsZSk7dC5CdWZmZXJTZXQ9YX0sNTExOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNlbGxEYXRhPXZvaWQgMDt2YXIgbz1yKDQ4Mikscz1yKDY0MyksYT1yKDM3MzQpLGM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5jb250ZW50PTAsdC5mZz0wLHQuYmc9MCx0LmV4dGVuZGVkPW5ldyBhLkV4dGVuZGVkQXR0cnMsdC5jb21iaW5lZERhdGE9IiIsdH1yZXR1cm4gbih0LGUpLHQuZnJvbUNoYXJEYXRhPWZ1bmN0aW9uKGUpe3ZhciByPW5ldyB0O3JldHVybiByLnNldEZyb21DaGFyRGF0YShlKSxyfSx0LnByb3RvdHlwZS5pc0NvbWJpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIDIwOTcxNTImdGhpcy5jb250ZW50fSx0LnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbnRlbnQ+PjIyfSx0LnByb3RvdHlwZS5nZXRDaGFycz1mdW5jdGlvbigpe3JldHVybiAyMDk3MTUyJnRoaXMuY29udGVudD90aGlzLmNvbWJpbmVkRGF0YToyMDk3MTUxJnRoaXMuY29udGVudD8oMCxvLnN0cmluZ0Zyb21Db2RlUG9pbnQpKDIwOTcxNTEmdGhpcy5jb250ZW50KToiIn0sdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmlzQ29tYmluZWQoKT90aGlzLmNvbWJpbmVkRGF0YS5jaGFyQ29kZUF0KHRoaXMuY29tYmluZWREYXRhLmxlbmd0aC0xKToyMDk3MTUxJnRoaXMuY29udGVudH0sdC5wcm90b3R5cGUuc2V0RnJvbUNoYXJEYXRhPWZ1bmN0aW9uKGUpe3RoaXMuZmc9ZVtzLkNIQVJfREFUQV9BVFRSX0lOREVYXSx0aGlzLmJnPTA7dmFyIHQ9ITE7aWYoZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGg+Mil0PSEwO2Vsc2UgaWYoMj09PWVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoKXt2YXIgcj1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCk7aWYoNTUyOTY8PXImJnI8PTU2MzE5KXt2YXIgaT1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMSk7NTYzMjA8PWkmJmk8PTU3MzQzP3RoaXMuY29udGVudD0xMDI0KihyLTU1Mjk2KStpLTU2MzIwKzY1NTM2fGVbcy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMjp0PSEwfWVsc2UgdD0hMH1lbHNlIHRoaXMuY29udGVudD1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCl8ZVtzLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyO3QmJih0aGlzLmNvbWJpbmVkRGF0YT1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLHRoaXMuY29udGVudD0yMDk3MTUyfGVbcy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMil9LHQucHJvdG90eXBlLmdldEFzQ2hhckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5mZyx0aGlzLmdldENoYXJzKCksdGhpcy5nZXRXaWR0aCgpLHRoaXMuZ2V0Q29kZSgpXX0sdH0oYS5BdHRyaWJ1dGVEYXRhKTt0LkNlbGxEYXRhPWN9LDY0MzooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LldISVRFU1BBQ0VfQ0VMTF9DT0RFPXQuV0hJVEVTUEFDRV9DRUxMX1dJRFRIPXQuV0hJVEVTUEFDRV9DRUxMX0NIQVI9dC5OVUxMX0NFTExfQ09ERT10Lk5VTExfQ0VMTF9XSURUSD10Lk5VTExfQ0VMTF9DSEFSPXQuQ0hBUl9EQVRBX0NPREVfSU5ERVg9dC5DSEFSX0RBVEFfV0lEVEhfSU5ERVg9dC5DSEFSX0RBVEFfQ0hBUl9JTkRFWD10LkNIQVJfREFUQV9BVFRSX0lOREVYPXQuREVGQVVMVF9BVFRSPXQuREVGQVVMVF9DT0xPUj12b2lkIDAsdC5ERUZBVUxUX0NPTE9SPTI1Nix0LkRFRkFVTFRfQVRUUj0yNTZ8dC5ERUZBVUxUX0NPTE9SPDw5LHQuQ0hBUl9EQVRBX0FUVFJfSU5ERVg9MCx0LkNIQVJfREFUQV9DSEFSX0lOREVYPTEsdC5DSEFSX0RBVEFfV0lEVEhfSU5ERVg9Mix0LkNIQVJfREFUQV9DT0RFX0lOREVYPTMsdC5OVUxMX0NFTExfQ0hBUj0iIix0Lk5VTExfQ0VMTF9XSURUSD0xLHQuTlVMTF9DRUxMX0NPREU9MCx0LldISVRFU1BBQ0VfQ0VMTF9DSEFSPSIgIix0LldISVRFU1BBQ0VfQ0VMTF9XSURUSD0xLHQuV0hJVEVTUEFDRV9DRUxMX0NPREU9MzJ9LDQ4NjM6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTWFya2VyPXZvaWQgMDt2YXIgbz1yKDg0NjApLHM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkubGluZT1yLGkuX2lkPXQuX25leHRJZCsrLGkuaXNEaXNwb3NlZD0hMSxpLl9vbkRpc3Bvc2U9bmV3IG8uRXZlbnRFbWl0dGVyLGl9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImlkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EaXNwb3NlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGlzcG9zZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5pc0Rpc3Bvc2VkfHwodGhpcy5pc0Rpc3Bvc2VkPSEwLHRoaXMubGluZT0tMSx0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSl9LHQuX25leHRJZD0xLHR9KHIoODQ0KS5EaXNwb3NhYmxlKTt0Lk1hcmtlcj1zfSw3MTE2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuREVGQVVMVF9DSEFSU0VUPXQuQ0hBUlNFVFM9dm9pZCAwLHQuQ0hBUlNFVFM9e30sdC5ERUZBVUxUX0NIQVJTRVQ9dC5DSEFSU0VUUy5CLHQuQ0hBUlNFVFNbMF09eyJgIjoi4peGIixhOiLilpIiLGI6IuKQiSIsYzoi4pCMIixkOiLikI0iLGU6IuKQiiIsZjoiwrAiLGc6IsKxIixoOiLikKQiLGk6IuKQiyIsajoi4pSYIixrOiLilJAiLGw6IuKUjCIsbToi4pSUIixuOiLilLwiLG86IuKOuiIscDoi4o67IixxOiLilIAiLHI6IuKOvCIsczoi4o69Iix0OiLilJwiLHU6IuKUpCIsdjoi4pS0Iix3OiLilKwiLHg6IuKUgiIseToi4omkIix6OiLiiaUiLCJ7Ijoiz4AiLCJ8Ijoi4omgIiwifSI6IsKjIiwifiI6IsK3In0sdC5DSEFSU0VUUy5BPXsiIyI6IsKjIn0sdC5DSEFSU0VUUy5CPXZvaWQgMCx0LkNIQVJTRVRTWzRdPXsiIyI6IsKjIiwiQCI6IsK+IiwiWyI6ImlqIiwiXFwiOiLCvSIsIl0iOiJ8IiwieyI6IsKoIiwifCI6ImYiLCJ9IjoiwrwiLCJ+IjoiwrQifSx0LkNIQVJTRVRTLkM9dC5DSEFSU0VUU1s1XT17IlsiOiLDhCIsIlxcIjoiw5YiLCJdIjoiw4UiLCJeIjoiw5wiLCJgIjoiw6kiLCJ7Ijoiw6QiLCJ8Ijoiw7YiLCJ9Ijoiw6UiLCJ+Ijoiw7wifSx0LkNIQVJTRVRTLlI9eyIjIjoiwqMiLCJAIjoiw6AiLCJbIjoiwrAiLCJcXCI6IsOnIiwiXSI6IsKnIiwieyI6IsOpIiwifCI6IsO5IiwifSI6IsOoIiwifiI6IsKoIn0sdC5DSEFSU0VUUy5RPXsiQCI6IsOgIiwiWyI6IsOiIiwiXFwiOiLDpyIsIl0iOiLDqiIsIl4iOiLDriIsImAiOiLDtCIsInsiOiLDqSIsInwiOiLDuSIsIn0iOiLDqCIsIn4iOiLDuyJ9LHQuQ0hBUlNFVFMuSz17IkAiOiLCpyIsIlsiOiLDhCIsIlxcIjoiw5YiLCJdIjoiw5wiLCJ7Ijoiw6QiLCJ8Ijoiw7YiLCJ9Ijoiw7wiLCJ+Ijoiw58ifSx0LkNIQVJTRVRTLlk9eyIjIjoiwqMiLCJAIjoiwqciLCJbIjoiwrAiLCJcXCI6IsOnIiwiXSI6IsOpIiwiYCI6IsO5IiwieyI6IsOgIiwifCI6IsOyIiwifSI6IsOoIiwifiI6IsOsIn0sdC5DSEFSU0VUUy5FPXQuQ0hBUlNFVFNbNl09eyJAIjoiw4QiLCJbIjoiw4YiLCJcXCI6IsOYIiwiXSI6IsOFIiwiXiI6IsOcIiwiYCI6IsOkIiwieyI6IsOmIiwifCI6IsO4IiwifSI6IsOlIiwifiI6IsO8In0sdC5DSEFSU0VUUy5aPXsiIyI6IsKjIiwiQCI6IsKnIiwiWyI6IsKhIiwiXFwiOiLDkSIsIl0iOiLCvyIsInsiOiLCsCIsInwiOiLDsSIsIn0iOiLDpyJ9LHQuQ0hBUlNFVFMuSD10LkNIQVJTRVRTWzddPXsiQCI6IsOJIiwiWyI6IsOEIiwiXFwiOiLDliIsIl0iOiLDhSIsIl4iOiLDnCIsImAiOiLDqSIsInsiOiLDpCIsInwiOiLDtiIsIn0iOiLDpSIsIn4iOiLDvCJ9LHQuQ0hBUlNFVFNbIj0iXT17IiMiOiLDuSIsIkAiOiLDoCIsIlsiOiLDqSIsIlxcIjoiw6ciLCJdIjoiw6oiLCJeIjoiw64iLF86IsOoIiwiYCI6IsO0IiwieyI6IsOkIiwifCI6IsO2IiwifSI6IsO8IiwifiI6IsO7In19LDI1ODQ6KGUsdCk9Pnt2YXIgcixpO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkMxX0VTQ0FQRUQ9dC5DMT10LkMwPXZvaWQgMCxmdW5jdGlvbihlKXtlLk5VTD0iXDAiLGUuU09IPSIBIixlLlNUWD0iAiIsZS5FVFg9IgMiLGUuRU9UPSIEIixlLkVOUT0iBSIsZS5BQ0s9IgYiLGUuQkVMPSIHIixlLkJTPSJcYiIsZS5IVD0iXHQiLGUuTEY9IlxuIixlLlZUPSJcdiIsZS5GRj0iXGYiLGUuQ1I9IlxyIixlLlNPPSIOIixlLlNJPSIPIixlLkRMRT0iECIsZS5EQzE9IhEiLGUuREMyPSISIixlLkRDMz0iEyIsZS5EQzQ9IhQiLGUuTkFLPSIVIixlLlNZTj0iFiIsZS5FVEI9IhciLGUuQ0FOPSIYIixlLkVNPSIZIixlLlNVQj0iGiIsZS5FU0M9IhsiLGUuRlM9IhwiLGUuR1M9Ih0iLGUuUlM9Ih4iLGUuVVM9Ih8iLGUuU1A9IiAiLGUuREVMPSJ/In0ocj10LkMwfHwodC5DMD17fSkpLChpPXQuQzF8fCh0LkMxPXt9KSkuUEFEPSLCgCIsaS5IT1A9IsKBIixpLkJQSD0iwoIiLGkuTkJIPSLCgyIsaS5JTkQ9IsKEIixpLk5FTD0iwoUiLGkuU1NBPSLChiIsaS5FU0E9IsKHIixpLkhUUz0iwogiLGkuSFRKPSLCiSIsaS5WVFM9IsKKIixpLlBMRD0iwosiLGkuUExVPSLCjCIsaS5SST0iwo0iLGkuU1MyPSLCjiIsaS5TUzM9IsKPIixpLkRDUz0iwpAiLGkuUFUxPSLCkSIsaS5QVTI9IsKSIixpLlNUUz0iwpMiLGkuQ0NIPSLClCIsaS5NVz0iwpUiLGkuU1BBPSLCliIsaS5FUEE9IsKXIixpLlNPUz0iwpgiLGkuU0dDST0iwpkiLGkuU0NJPSLCmiIsaS5DU0k9IsKbIixpLlNUPSLCnCIsaS5PU0M9IsKdIixpLlBNPSLCniIsaS5BUEM9IsKfIiwodC5DMV9FU0NBUEVEfHwodC5DMV9FU0NBUEVEPXt9KSkuU1Q9ci5FU0MrIlxcIn0sNzM5OTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZXZhbHVhdGVLZXlib2FyZEV2ZW50PXZvaWQgMDt2YXIgaT1yKDI1ODQpLG49ezQ4OlsiMCIsIikiXSw0OTpbIjEiLCIhIl0sNTA6WyIyIiwiQCJdLDUxOlsiMyIsIiMiXSw1MjpbIjQiLCIkIl0sNTM6WyI1IiwiJSJdLDU0OlsiNiIsIl4iXSw1NTpbIjciLCImIl0sNTY6WyI4IiwiKiJdLDU3OlsiOSIsIigiXSwxODY6WyI7IiwiOiJdLDE4NzpbIj0iLCIrIl0sMTg4OlsiLCIsIjwiXSwxODk6WyItIiwiXyJdLDE5MDpbIi4iLCI+Il0sMTkxOlsiLyIsIj8iXSwxOTI6WyJgIiwifiJdLDIxOTpbIlsiLCJ7Il0sMjIwOlsiXFwiLCJ8Il0sMjIxOlsiXSIsIn0iXSwyMjI6WyInIiwnIiddfTt0LmV2YWx1YXRlS2V5Ym9hcmRFdmVudD1mdW5jdGlvbihlLHQscixvKXt2YXIgcz17dHlwZTowLGNhbmNlbDohMSxrZXk6dm9pZCAwfSxhPShlLnNoaWZ0S2V5PzE6MCl8KGUuYWx0S2V5PzI6MCl8KGUuY3RybEtleT80OjApfChlLm1ldGFLZXk/ODowKTtzd2l0Y2goZS5rZXlDb2RlKXtjYXNlIDA6IlVJS2V5SW5wdXRVcEFycm93Ij09PWUua2V5P3Mua2V5PXQ/aS5DMC5FU0MrIk9BIjppLkMwLkVTQysiW0EiOiJVSUtleUlucHV0TGVmdEFycm93Ij09PWUua2V5P3Mua2V5PXQ/aS5DMC5FU0MrIk9EIjppLkMwLkVTQysiW0QiOiJVSUtleUlucHV0UmlnaHRBcnJvdyI9PT1lLmtleT9zLmtleT10P2kuQzAuRVNDKyJPQyI6aS5DMC5FU0MrIltDIjoiVUlLZXlJbnB1dERvd25BcnJvdyI9PT1lLmtleSYmKHMua2V5PXQ/aS5DMC5FU0MrIk9CIjppLkMwLkVTQysiW0IiKTticmVhaztjYXNlIDg6aWYoZS5zaGlmdEtleSl7cy5rZXk9aS5DMC5CUzticmVha31pZihlLmFsdEtleSl7cy5rZXk9aS5DMC5FU0MraS5DMC5ERUw7YnJlYWt9cy5rZXk9aS5DMC5ERUw7YnJlYWs7Y2FzZSA5OmlmKGUuc2hpZnRLZXkpe3Mua2V5PWkuQzAuRVNDKyJbWiI7YnJlYWt9cy5rZXk9aS5DMC5IVCxzLmNhbmNlbD0hMDticmVhaztjYXNlIDEzOnMua2V5PWUuYWx0S2V5P2kuQzAuRVNDK2kuQzAuQ1I6aS5DMC5DUixzLmNhbmNlbD0hMDticmVhaztjYXNlIDI3OnMua2V5PWkuQzAuRVNDLGUuYWx0S2V5JiYocy5rZXk9aS5DMC5FU0MraS5DMC5FU0MpLHMuY2FuY2VsPSEwO2JyZWFrO2Nhc2UgMzc6aWYoZS5tZXRhS2V5KWJyZWFrO2E/KHMua2V5PWkuQzAuRVNDKyJbMTsiKyhhKzEpKyJEIixzLmtleT09PWkuQzAuRVNDKyJbMTszRCImJihzLmtleT1pLkMwLkVTQysocj8iYiI6IlsxOzVEIikpKTpzLmtleT10P2kuQzAuRVNDKyJPRCI6aS5DMC5FU0MrIltEIjticmVhaztjYXNlIDM5OmlmKGUubWV0YUtleSlicmVhazthPyhzLmtleT1pLkMwLkVTQysiWzE7IisoYSsxKSsiQyIscy5rZXk9PT1pLkMwLkVTQysiWzE7M0MiJiYocy5rZXk9aS5DMC5FU0MrKHI/ImYiOiJbMTs1QyIpKSk6cy5rZXk9dD9pLkMwLkVTQysiT0MiOmkuQzAuRVNDKyJbQyI7YnJlYWs7Y2FzZSAzODppZihlLm1ldGFLZXkpYnJlYWs7YT8ocy5rZXk9aS5DMC5FU0MrIlsxOyIrKGErMSkrIkEiLHJ8fHMua2V5IT09aS5DMC5FU0MrIlsxOzNBInx8KHMua2V5PWkuQzAuRVNDKyJbMTs1QSIpKTpzLmtleT10P2kuQzAuRVNDKyJPQSI6aS5DMC5FU0MrIltBIjticmVhaztjYXNlIDQwOmlmKGUubWV0YUtleSlicmVhazthPyhzLmtleT1pLkMwLkVTQysiWzE7IisoYSsxKSsiQiIscnx8cy5rZXkhPT1pLkMwLkVTQysiWzE7M0IifHwocy5rZXk9aS5DMC5FU0MrIlsxOzVCIikpOnMua2V5PXQ/aS5DMC5FU0MrIk9CIjppLkMwLkVTQysiW0IiO2JyZWFrO2Nhc2UgNDU6ZS5zaGlmdEtleXx8ZS5jdHJsS2V5fHwocy5rZXk9aS5DMC5FU0MrIlsyfiIpO2JyZWFrO2Nhc2UgNDY6cy5rZXk9YT9pLkMwLkVTQysiWzM7IisoYSsxKSsifiI6aS5DMC5FU0MrIlszfiI7YnJlYWs7Y2FzZSAzNjpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJIIjp0P2kuQzAuRVNDKyJPSCI6aS5DMC5FU0MrIltIIjticmVhaztjYXNlIDM1OnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIkYiOnQ/aS5DMC5FU0MrIk9GIjppLkMwLkVTQysiW0YiO2JyZWFrO2Nhc2UgMzM6ZS5zaGlmdEtleT9zLnR5cGU9MjplLmN0cmxLZXk/cy5rZXk9aS5DMC5FU0MrIls1OyIrKGErMSkrIn4iOnMua2V5PWkuQzAuRVNDKyJbNX4iO2JyZWFrO2Nhc2UgMzQ6ZS5zaGlmdEtleT9zLnR5cGU9MzplLmN0cmxLZXk/cy5rZXk9aS5DMC5FU0MrIls2OyIrKGErMSkrIn4iOnMua2V5PWkuQzAuRVNDKyJbNn4iO2JyZWFrO2Nhc2UgMTEyOnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIlAiOmkuQzAuRVNDKyJPUCI7YnJlYWs7Y2FzZSAxMTM6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiUSI6aS5DMC5FU0MrIk9RIjticmVhaztjYXNlIDExNDpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJSIjppLkMwLkVTQysiT1IiO2JyZWFrO2Nhc2UgMTE1OnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIlMiOmkuQzAuRVNDKyJPUyI7YnJlYWs7Y2FzZSAxMTY6cy5rZXk9YT9pLkMwLkVTQysiWzE1OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMTV+IjticmVhaztjYXNlIDExNzpzLmtleT1hP2kuQzAuRVNDKyJbMTc7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsxN34iO2JyZWFrO2Nhc2UgMTE4OnMua2V5PWE/aS5DMC5FU0MrIlsxODsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzE4fiI7YnJlYWs7Y2FzZSAxMTk6cy5rZXk9YT9pLkMwLkVTQysiWzE5OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMTl+IjticmVhaztjYXNlIDEyMDpzLmtleT1hP2kuQzAuRVNDKyJbMjA7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsyMH4iO2JyZWFrO2Nhc2UgMTIxOnMua2V5PWE/aS5DMC5FU0MrIlsyMTsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzIxfiI7YnJlYWs7Y2FzZSAxMjI6cy5rZXk9YT9pLkMwLkVTQysiWzIzOyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMjN+IjticmVhaztjYXNlIDEyMzpzLmtleT1hP2kuQzAuRVNDKyJbMjQ7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsyNH4iO2JyZWFrO2RlZmF1bHQ6aWYoIWUuY3RybEtleXx8ZS5zaGlmdEtleXx8ZS5hbHRLZXl8fGUubWV0YUtleSlpZihyJiYhb3x8IWUuYWx0S2V5fHxlLm1ldGFLZXkpIXJ8fGUuYWx0S2V5fHxlLmN0cmxLZXl8fGUuc2hpZnRLZXl8fCFlLm1ldGFLZXk/ZS5rZXkmJiFlLmN0cmxLZXkmJiFlLmFsdEtleSYmIWUubWV0YUtleSYmZS5rZXlDb2RlPj00OCYmMT09PWUua2V5Lmxlbmd0aD9zLmtleT1lLmtleTplLmtleSYmZS5jdHJsS2V5JiYoIl8iPT09ZS5rZXkmJihzLmtleT1pLkMwLlVTKSwiQCI9PT1lLmtleSYmKHMua2V5PWkuQzAuTlVMKSk6NjU9PT1lLmtleUNvZGUmJihzLnR5cGU9MSk7ZWxzZXt2YXIgYz1uW2Uua2V5Q29kZV0sbD1udWxsPT1jP3ZvaWQgMDpjW2Uuc2hpZnRLZXk/MTowXTtpZihsKXMua2V5PWkuQzAuRVNDK2w7ZWxzZSBpZihlLmtleUNvZGU+PTY1JiZlLmtleUNvZGU8PTkwKXt2YXIgaD1lLmN0cmxLZXk/ZS5rZXlDb2RlLTY0OmUua2V5Q29kZSszMix1PVN0cmluZy5mcm9tQ2hhckNvZGUoaCk7ZS5zaGlmdEtleSYmKHU9dS50b1VwcGVyQ2FzZSgpKSxzLmtleT1pLkMwLkVTQyt1fWVsc2UiRGVhZCI9PT1lLmtleSYmZS5jb2RlLnN0YXJ0c1dpdGgoIktleSIpJiYodT1lLmNvZGUuc2xpY2UoMyw0KSxlLnNoaWZ0S2V5fHwodT11LnRvTG93ZXJDYXNlKCkpLHMua2V5PWkuQzAuRVNDK3Uscy5jYW5jZWw9ITApfWVsc2UgZS5rZXlDb2RlPj02NSYmZS5rZXlDb2RlPD05MD9zLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZS02NCk6MzI9PT1lLmtleUNvZGU/cy5rZXk9aS5DMC5OVUw6ZS5rZXlDb2RlPj01MSYmZS5rZXlDb2RlPD01NT9zLmtleT1TdHJpbmcuZnJvbUNoYXJDb2RlKGUua2V5Q29kZS01MSsyNyk6NTY9PT1lLmtleUNvZGU/cy5rZXk9aS5DMC5ERUw6MjE5PT09ZS5rZXlDb2RlP3Mua2V5PWkuQzAuRVNDOjIyMD09PWUua2V5Q29kZT9zLmtleT1pLkMwLkZTOjIyMT09PWUua2V5Q29kZSYmKHMua2V5PWkuQzAuR1MpfXJldHVybiBzfX0sNDgyOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVXRmOFRvVXRmMzI9dC5TdHJpbmdUb1V0ZjMyPXQudXRmMzJUb1N0cmluZz10LnN0cmluZ0Zyb21Db2RlUG9pbnQ9dm9pZCAwLHQuc3RyaW5nRnJvbUNvZGVQb2ludD1mdW5jdGlvbihlKXtyZXR1cm4gZT42NTUzNT8oZS09NjU1MzYsU3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NisoZT4+MTApKStTdHJpbmcuZnJvbUNoYXJDb2RlKGUlMTAyNCs1NjMyMCkpOlN0cmluZy5mcm9tQ2hhckNvZGUoZSl9LHQudXRmMzJUb1N0cmluZz1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09dCYmKHQ9MCksdm9pZCAwPT09ciYmKHI9ZS5sZW5ndGgpO2Zvcih2YXIgaT0iIixuPXQ7bjxyOysrbil7dmFyIG89ZVtuXTtvPjY1NTM1PyhvLT02NTUzNixpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhvPj4xMCkpK1N0cmluZy5mcm9tQ2hhckNvZGUobyUxMDI0KzU2MzIwKSk6aSs9U3RyaW5nLmZyb21DaGFyQ29kZShvKX1yZXR1cm4gaX07dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5faW50ZXJpbT0wfXJldHVybiBlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2ludGVyaW09MH0sZS5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5sZW5ndGg7aWYoIXIpcmV0dXJuIDA7dmFyIGk9MCxuPTA7dGhpcy5faW50ZXJpbSYmKDU2MzIwPD0oYT1lLmNoYXJDb2RlQXQobisrKSkmJmE8PTU3MzQzP3RbaSsrXT0xMDI0Kih0aGlzLl9pbnRlcmltLTU1Mjk2KSthLTU2MzIwKzY1NTM2Oih0W2krK109dGhpcy5faW50ZXJpbSx0W2krK109YSksdGhpcy5faW50ZXJpbT0wKTtmb3IodmFyIG89bjtvPHI7KytvKXt2YXIgcz1lLmNoYXJDb2RlQXQobyk7aWYoNTUyOTY8PXMmJnM8PTU2MzE5KXtpZigrK28+PXIpcmV0dXJuIHRoaXMuX2ludGVyaW09cyxpO3ZhciBhOzU2MzIwPD0oYT1lLmNoYXJDb2RlQXQobykpJiZhPD01NzM0Mz90W2krK109MTAyNCoocy01NTI5NikrYS01NjMyMCs2NTUzNjoodFtpKytdPXMsdFtpKytdPWEpfWVsc2UgNjUyNzkhPT1zJiYodFtpKytdPXMpfXJldHVybiBpfSxlfSgpO3QuU3RyaW5nVG9VdGYzMj1yO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuaW50ZXJpbT1uZXcgVWludDhBcnJheSgzKX1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmludGVyaW0uZmlsbCgwKX0sZS5wcm90b3R5cGUuZGVjb2RlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5sZW5ndGg7aWYoIXIpcmV0dXJuIDA7dmFyIGksbixvLHMsYT0wLGM9MCxsPTA7aWYodGhpcy5pbnRlcmltWzBdKXt2YXIgaD0hMSx1PXRoaXMuaW50ZXJpbVswXTt1Jj0xOTI9PSgyMjQmdSk/MzE6MjI0PT0oMjQwJnUpPzE1Ojc7Zm9yKHZhciBmPTAsXz12b2lkIDA7KF89NjMmdGhpcy5pbnRlcmltWysrZl0pJiZmPDQ7KXU8PD02LHV8PV87Zm9yKHZhciBkPTE5Mj09KDIyNCZ0aGlzLmludGVyaW1bMF0pPzI6MjI0PT0oMjQwJnRoaXMuaW50ZXJpbVswXSk/Mzo0LHA9ZC1mO2w8cDspe2lmKGw+PXIpcmV0dXJuIDA7aWYoMTI4IT0oMTkyJihfPWVbbCsrXSkpKXtsLS0saD0hMDticmVha310aGlzLmludGVyaW1bZisrXT1fLHU8PD02LHV8PTYzJl99aHx8KDI9PT1kP3U8MTI4P2wtLTp0W2ErK109dTozPT09ZD91PDIwNDh8fHU+PTU1Mjk2JiZ1PD01NzM0M3x8NjUyNzk9PT11fHwodFthKytdPXUpOnU8NjU1MzZ8fHU+MTExNDExMXx8KHRbYSsrXT11KSksdGhpcy5pbnRlcmltLmZpbGwoMCl9Zm9yKHZhciB2PXItNCx5PWw7eTxyOyl7Zm9yKDshKCEoeTx2KXx8MTI4JihpPWVbeV0pfHwxMjgmKG49ZVt5KzFdKXx8MTI4JihvPWVbeSsyXSl8fDEyOCYocz1lW3krM10pKTspdFthKytdPWksdFthKytdPW4sdFthKytdPW8sdFthKytdPXMseSs9NDtpZigoaT1lW3krK10pPDEyOCl0W2ErK109aTtlbHNlIGlmKDE5Mj09KDIyNCZpKSl7aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksYTtpZigxMjghPSgxOTImKG49ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZigoYz0oMzEmaSk8PDZ8NjMmbik8MTI4KXt5LS07Y29udGludWV9dFthKytdPWN9ZWxzZSBpZigyMjQ9PSgyNDAmaSkpe2lmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLGE7aWYoMTI4IT0oMTkyJihuPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksdGhpcy5pbnRlcmltWzFdPW4sYTtpZigxMjghPSgxOTImKG89ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZigoYz0oMTUmaSk8PDEyfCg2MyZuKTw8Nnw2MyZvKTwyMDQ4fHxjPj01NTI5NiYmYzw9NTczNDN8fDY1Mjc5PT09Yyljb250aW51ZTt0W2ErK109Y31lbHNlIGlmKDI0MD09KDI0OCZpKSl7aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksYTtpZigxMjghPSgxOTImKG49ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSx0aGlzLmludGVyaW1bMV09bixhO2lmKDEyOCE9KDE5MiYobz1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLHRoaXMuaW50ZXJpbVsxXT1uLHRoaXMuaW50ZXJpbVsyXT1vLGE7aWYoMTI4IT0oMTkyJihzPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoKGM9KDcmaSk8PDE4fCg2MyZuKTw8MTJ8KDYzJm8pPDw2fDYzJnMpPDY1NTM2fHxjPjExMTQxMTEpY29udGludWU7dFthKytdPWN9fXJldHVybiBhfSxlfSgpO3QuVXRmOFRvVXRmMzI9aX0sMjI1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Vbmljb2RlVjY9dm9pZCAwO3ZhciBpLG49cig4MjczKSxvPVtbNzY4LDg3OV0sWzExNTUsMTE1OF0sWzExNjAsMTE2MV0sWzE0MjUsMTQ2OV0sWzE0NzEsMTQ3MV0sWzE0NzMsMTQ3NF0sWzE0NzYsMTQ3N10sWzE0NzksMTQ3OV0sWzE1MzYsMTUzOV0sWzE1NTIsMTU1N10sWzE2MTEsMTYzMF0sWzE2NDgsMTY0OF0sWzE3NTAsMTc2NF0sWzE3NjcsMTc2OF0sWzE3NzAsMTc3M10sWzE4MDcsMTgwN10sWzE4MDksMTgwOV0sWzE4NDAsMTg2Nl0sWzE5NTgsMTk2OF0sWzIwMjcsMjAzNV0sWzIzMDUsMjMwNl0sWzIzNjQsMjM2NF0sWzIzNjksMjM3Nl0sWzIzODEsMjM4MV0sWzIzODUsMjM4OF0sWzI0MDIsMjQwM10sWzI0MzMsMjQzM10sWzI0OTIsMjQ5Ml0sWzI0OTcsMjUwMF0sWzI1MDksMjUwOV0sWzI1MzAsMjUzMV0sWzI1NjEsMjU2Ml0sWzI2MjAsMjYyMF0sWzI2MjUsMjYyNl0sWzI2MzEsMjYzMl0sWzI2MzUsMjYzN10sWzI2NzIsMjY3M10sWzI2ODksMjY5MF0sWzI3NDgsMjc0OF0sWzI3NTMsMjc1N10sWzI3NTksMjc2MF0sWzI3NjUsMjc2NV0sWzI3ODYsMjc4N10sWzI4MTcsMjgxN10sWzI4NzYsMjg3Nl0sWzI4NzksMjg3OV0sWzI4ODEsMjg4M10sWzI4OTMsMjg5M10sWzI5MDIsMjkwMl0sWzI5NDYsMjk0Nl0sWzMwMDgsMzAwOF0sWzMwMjEsMzAyMV0sWzMxMzQsMzEzNl0sWzMxNDIsMzE0NF0sWzMxNDYsMzE0OV0sWzMxNTcsMzE1OF0sWzMyNjAsMzI2MF0sWzMyNjMsMzI2M10sWzMyNzAsMzI3MF0sWzMyNzYsMzI3N10sWzMyOTgsMzI5OV0sWzMzOTMsMzM5NV0sWzM0MDUsMzQwNV0sWzM1MzAsMzUzMF0sWzM1MzgsMzU0MF0sWzM1NDIsMzU0Ml0sWzM2MzMsMzYzM10sWzM2MzYsMzY0Ml0sWzM2NTUsMzY2Ml0sWzM3NjEsMzc2MV0sWzM3NjQsMzc2OV0sWzM3NzEsMzc3Ml0sWzM3ODQsMzc4OV0sWzM4NjQsMzg2NV0sWzM4OTMsMzg5M10sWzM4OTUsMzg5NV0sWzM4OTcsMzg5N10sWzM5NTMsMzk2Nl0sWzM5NjgsMzk3Ml0sWzM5NzQsMzk3NV0sWzM5ODQsMzk5MV0sWzM5OTMsNDAyOF0sWzQwMzgsNDAzOF0sWzQxNDEsNDE0NF0sWzQxNDYsNDE0Nl0sWzQxNTAsNDE1MV0sWzQxNTMsNDE1M10sWzQxODQsNDE4NV0sWzQ0NDgsNDYwN10sWzQ5NTksNDk1OV0sWzU5MDYsNTkwOF0sWzU5MzgsNTk0MF0sWzU5NzAsNTk3MV0sWzYwMDIsNjAwM10sWzYwNjgsNjA2OV0sWzYwNzEsNjA3N10sWzYwODYsNjA4Nl0sWzYwODksNjA5OV0sWzYxMDksNjEwOV0sWzYxNTUsNjE1N10sWzYzMTMsNjMxM10sWzY0MzIsNjQzNF0sWzY0MzksNjQ0MF0sWzY0NTAsNjQ1MF0sWzY0NTcsNjQ1OV0sWzY2NzksNjY4MF0sWzY5MTIsNjkxNV0sWzY5NjQsNjk2NF0sWzY5NjYsNjk3MF0sWzY5NzIsNjk3Ml0sWzY5NzgsNjk3OF0sWzcwMTksNzAyN10sWzc2MTYsNzYyNl0sWzc2NzgsNzY3OV0sWzgyMDMsODIwN10sWzgyMzQsODIzOF0sWzgyODgsODI5MV0sWzgyOTgsODMwM10sWzg0MDAsODQzMV0sWzEyMzMwLDEyMzM1XSxbMTI0NDEsMTI0NDJdLFs0MzAxNCw0MzAxNF0sWzQzMDE5LDQzMDE5XSxbNDMwNDUsNDMwNDZdLFs2NDI4Niw2NDI4Nl0sWzY1MDI0LDY1MDM5XSxbNjUwNTYsNjUwNTldLFs2NTI3OSw2NTI3OV0sWzY1NTI5LDY1NTMxXV0scz1bWzY4MDk3LDY4MDk5XSxbNjgxMDEsNjgxMDJdLFs2ODEwOCw2ODExMV0sWzY4MTUyLDY4MTU0XSxbNjgxNTksNjgxNTldLFsxMTkxNDMsMTE5MTQ1XSxbMTE5MTU1LDExOTE3MF0sWzExOTE3MywxMTkxNzldLFsxMTkyMTAsMTE5MjEzXSxbMTE5MzYyLDExOTM2NF0sWzkxNzUwNSw5MTc1MDVdLFs5MTc1MzYsOTE3NjMxXSxbOTE3NzYwLDkxNzk5OV1dLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7aWYodGhpcy52ZXJzaW9uPSI2IiwhaSl7aT1uZXcgVWludDhBcnJheSg2NTUzNiksKDAsbi5maWxsKShpLDEpLGlbMF09MCwoMCxuLmZpbGwpKGksMCwxLDMyKSwoMCxuLmZpbGwpKGksMCwxMjcsMTYwKSwoMCxuLmZpbGwpKGksMiw0MzUyLDQ0NDgpLGlbOTAwMV09MixpWzkwMDJdPTIsKDAsbi5maWxsKShpLDIsMTE5MDQsNDIxOTIpLGlbMTIzNTFdPTEsKDAsbi5maWxsKShpLDIsNDQwMzIsNTUyMDQpLCgwLG4uZmlsbCkoaSwyLDYzNzQ0LDY0MjU2KSwoMCxuLmZpbGwpKGksMiw2NTA0MCw2NTA1MCksKDAsbi5maWxsKShpLDIsNjUwNzIsNjUxMzYpLCgwLG4uZmlsbCkoaSwyLDY1MjgwLDY1Mzc3KSwoMCxuLmZpbGwpKGksMiw2NTUwNCw2NTUxMSk7Zm9yKHZhciBlPTA7ZTxvLmxlbmd0aDsrK2UpKDAsbi5maWxsKShpLDAsb1tlXVswXSxvW2VdWzFdKzEpfX1yZXR1cm4gZS5wcm90b3R5cGUud2N3aWR0aD1mdW5jdGlvbihlKXtyZXR1cm4gZTwzMj8wOmU8MTI3PzE6ZTw2NTUzNj9pW2VdOmZ1bmN0aW9uKGUsdCl7dmFyIHIsaT0wLG49dC5sZW5ndGgtMTtpZihlPHRbMF1bMF18fGU+dFtuXVsxXSlyZXR1cm4hMTtmb3IoO24+PWk7KWlmKGU+dFtyPWkrbj4+MV1bMV0paT1yKzE7ZWxzZXtpZighKGU8dFtyXVswXSkpcmV0dXJuITA7bj1yLTF9cmV0dXJuITF9KGUscyk/MDplPj0xMzEwNzImJmU8PTE5NjYwNXx8ZT49MTk2NjA4JiZlPD0yNjIxNDE/MjoxfSxlfSgpO3QuVW5pY29kZVY2PWF9LDU5ODE6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LldyaXRlQnVmZmVyPXZvaWQgMDt2YXIgaT1yKDg0NjApLG49InVuZGVmaW5lZCI9PXR5cGVvZiBxdWV1ZU1pY3JvdGFzaz9mdW5jdGlvbihlKXtQcm9taXNlLnJlc29sdmUoKS50aGVuKGUpfTpxdWV1ZU1pY3JvdGFzayxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9hY3Rpb249ZSx0aGlzLl93cml0ZUJ1ZmZlcj1bXSx0aGlzLl9jYWxsYmFja3M9W10sdGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MCx0aGlzLl9pc1N5bmNXcml0aW5nPSExLHRoaXMuX3N5bmNDYWxscz0wLHRoaXMuX29uV3JpdGVQYXJzZWQ9bmV3IGkuRXZlbnRFbWl0dGVyfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uV3JpdGVQYXJzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Xcml0ZVBhcnNlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS53cml0ZVN5bmM9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDAhPT10JiZ0aGlzLl9zeW5jQ2FsbHM+dCl0aGlzLl9zeW5jQ2FsbHM9MDtlbHNlIGlmKHRoaXMuX3BlbmRpbmdEYXRhKz1lLmxlbmd0aCx0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGUpLHRoaXMuX2NhbGxiYWNrcy5wdXNoKHZvaWQgMCksdGhpcy5fc3luY0NhbGxzKyssIXRoaXMuX2lzU3luY1dyaXRpbmcpe3ZhciByO2Zvcih0aGlzLl9pc1N5bmNXcml0aW5nPSEwO3I9dGhpcy5fd3JpdGVCdWZmZXIuc2hpZnQoKTspe3RoaXMuX2FjdGlvbihyKTt2YXIgaT10aGlzLl9jYWxsYmFja3Muc2hpZnQoKTtpJiZpKCl9dGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MjE0NzQ4MzY0Nyx0aGlzLl9pc1N5bmNXcml0aW5nPSExLHRoaXMuX3N5bmNDYWxscz0wfX0sZS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO2lmKHRoaXMuX3BlbmRpbmdEYXRhPjVlNyl0aHJvdyBuZXcgRXJyb3IoIndyaXRlIGRhdGEgZGlzY2FyZGVkLCB1c2UgZmxvdyBjb250cm9sIHRvIGF2b2lkIGxvc2luZyBkYXRhIik7dGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RofHwodGhpcy5fYnVmZmVyT2Zmc2V0PTAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gci5faW5uZXJXcml0ZSgpfSkpKSx0aGlzLl9wZW5kaW5nRGF0YSs9ZS5sZW5ndGgsdGhpcy5fd3JpdGVCdWZmZXIucHVzaChlKSx0aGlzLl9jYWxsYmFja3MucHVzaCh0KX0sZS5wcm90b3R5cGUuX2lubmVyV3JpdGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PXQmJih0PSEwKTtmb3IodmFyIGk9ZXx8RGF0ZS5ub3coKTt0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg+dGhpcy5fYnVmZmVyT2Zmc2V0Oyl7dmFyIG89dGhpcy5fd3JpdGVCdWZmZXJbdGhpcy5fYnVmZmVyT2Zmc2V0XSxzPXRoaXMuX2FjdGlvbihvLHQpO2lmKHMpcmV0dXJuIHZvaWQgcy5jYXRjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIG4oKGZ1bmN0aW9uKCl7dGhyb3cgZX0pKSxQcm9taXNlLnJlc29sdmUoITEpfSkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBEYXRlLm5vdygpLWk+PTEyP3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2lubmVyV3JpdGUoMCxlKX0pKTpyLl9pbm5lcldyaXRlKGksZSl9KSk7dmFyIGE9dGhpcy5fY2FsbGJhY2tzW3RoaXMuX2J1ZmZlck9mZnNldF07aWYoYSYmYSgpLHRoaXMuX2J1ZmZlck9mZnNldCsrLHRoaXMuX3BlbmRpbmdEYXRhLT1vLmxlbmd0aCxEYXRlLm5vdygpLWk+PTEyKWJyZWFrfXRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aD50aGlzLl9idWZmZXJPZmZzZXQ/KHRoaXMuX2J1ZmZlck9mZnNldD41MCYmKHRoaXMuX3dyaXRlQnVmZmVyPXRoaXMuX3dyaXRlQnVmZmVyLnNsaWNlKHRoaXMuX2J1ZmZlck9mZnNldCksdGhpcy5fY2FsbGJhY2tzPXRoaXMuX2NhbGxiYWNrcy5zbGljZSh0aGlzLl9idWZmZXJPZmZzZXQpLHRoaXMuX2J1ZmZlck9mZnNldD0wKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiByLl9pbm5lcldyaXRlKCl9KSkpOih0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg9MCx0aGlzLl9jYWxsYmFja3MubGVuZ3RoPTAsdGhpcy5fcGVuZGluZ0RhdGE9MCx0aGlzLl9idWZmZXJPZmZzZXQ9MCksdGhpcy5fb25Xcml0ZVBhcnNlZC5maXJlKCl9LGV9KCk7dC5Xcml0ZUJ1ZmZlcj1vfSw1OTQxOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC50b1JnYlN0cmluZz10LnBhcnNlQ29sb3I9dm9pZCAwO3ZhciBpPS9eKFtcZGEtZl0pXC8oW1xkYS1mXSlcLyhbXGRhLWZdKSR8XihbXGRhLWZdezJ9KVwvKFtcZGEtZl17Mn0pXC8oW1xkYS1mXXsyfSkkfF4oW1xkYS1mXXszfSlcLyhbXGRhLWZdezN9KVwvKFtcZGEtZl17M30pJHxeKFtcZGEtZl17NH0pXC8oW1xkYS1mXXs0fSlcLyhbXGRhLWZdezR9KSQvLG49L15bXGRhLWZdKyQvO2Z1bmN0aW9uIG8oZSx0KXt2YXIgcj1lLnRvU3RyaW5nKDE2KSxpPXIubGVuZ3RoPDI/IjAiK3I6cjtzd2l0Y2godCl7Y2FzZSA0OnJldHVybiByWzBdO2Nhc2UgODpyZXR1cm4gaTtjYXNlIDEyOnJldHVybihpK2kpLnNsaWNlKDAsMyk7ZGVmYXVsdDpyZXR1cm4gaStpfX10LnBhcnNlQ29sb3I9ZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9ZS50b0xvd2VyQ2FzZSgpO2lmKDA9PT10LmluZGV4T2YoInJnYjoiKSl7dD10LnNsaWNlKDQpO3ZhciByPWkuZXhlYyh0KTtpZihyKXt2YXIgbz1yWzFdPzE1OnJbNF0/MjU1OnJbN10/NDA5NTo2NTUzNTtyZXR1cm5bTWF0aC5yb3VuZChwYXJzZUludChyWzFdfHxyWzRdfHxyWzddfHxyWzEwXSwxNikvbyoyNTUpLE1hdGgucm91bmQocGFyc2VJbnQoclsyXXx8cls1XXx8cls4XXx8clsxMV0sMTYpL28qMjU1KSxNYXRoLnJvdW5kKHBhcnNlSW50KHJbM118fHJbNl18fHJbOV18fHJbMTJdLDE2KS9vKjI1NSldfX1lbHNlIGlmKDA9PT10LmluZGV4T2YoIiMiKSYmKHQ9dC5zbGljZSgxKSxuLmV4ZWModCkmJlszLDYsOSwxMl0uaW5jbHVkZXModC5sZW5ndGgpKSl7Zm9yKHZhciBzPXQubGVuZ3RoLzMsYT1bMCwwLDBdLGM9MDtjPDM7KytjKXt2YXIgbD1wYXJzZUludCh0LnNsaWNlKHMqYyxzKmMrcyksMTYpO2FbY109MT09PXM/bDw8NDoyPT09cz9sOjM9PT1zP2w+PjQ6bD4+OH1yZXR1cm4gYX19fSx0LnRvUmdiU3RyaW5nPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9MTYpO3ZhciBpPXIoZSwzKSxuPWlbMF0scz1pWzFdLGE9aVsyXTtyZXR1cm4icmdiOiIrbyhuLHQpKyIvIitvKHMsdCkrIi8iK28oYSx0KX19LDU3NzA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5QQVlMT0FEX0xJTUlUPXZvaWQgMCx0LlBBWUxPQURfTElNSVQ9MWU3fSw2MzUxOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5EY3NIYW5kbGVyPXQuRGNzUGFyc2VyPXZvaWQgMDt2YXIgaT1yKDQ4Miksbj1yKDg3NDIpLG89cig1NzcwKSxzPVtdLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9hY3RpdmU9cyx0aGlzLl9pZGVudD0wLHRoaXMuX2hhbmRsZXJGYj1mdW5jdGlvbigpe30sdGhpcy5fc3RhY2s9e3BhdXNlZDohMSxsb29wUG9zaXRpb246MCxmYWxsVGhyb3VnaDohMX19cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9oYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2hhbmRsZXJGYj1mdW5jdGlvbigpe30sdGhpcy5fYWN0aXZlPXN9LGUucHJvdG90eXBlLnJlZ2lzdGVySGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXRoaXMuX2hhbmRsZXJzW2VdJiYodGhpcy5faGFuZGxlcnNbZV09W10pO3ZhciByPXRoaXMuX2hhbmRsZXJzW2VdO3JldHVybiByLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZT1yLmluZGV4T2YodCk7LTEhPT1lJiZyLnNwbGljZShlLDEpfX19LGUucHJvdG90eXBlLmNsZWFySGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyc1tlXSYmZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2VdfSxlLnByb3RvdHlwZS5zZXRIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlckZiPWV9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYWN0aXZlLmxlbmd0aClmb3IodmFyIGU9dGhpcy5fc3RhY2sucGF1c2VkP3RoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xOnRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzLl9hY3RpdmVbZV0udW5ob29rKCExKTt0aGlzLl9zdGFjay5wYXVzZWQ9ITEsdGhpcy5fYWN0aXZlPXMsdGhpcy5faWRlbnQ9MH0sZS5wcm90b3R5cGUuaG9vaz1mdW5jdGlvbihlLHQpe2lmKHRoaXMucmVzZXQoKSx0aGlzLl9pZGVudD1lLHRoaXMuX2FjdGl2ZT10aGlzLl9oYW5kbGVyc1tlXXx8cyx0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgcj10aGlzLl9hY3RpdmUubGVuZ3RoLTE7cj49MDtyLS0pdGhpcy5fYWN0aXZlW3JdLmhvb2sodCk7ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsIkhPT0siLHQpfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciBuPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtuPj0wO24tLSl0aGlzLl9hY3RpdmVbbl0ucHV0KGUsdCxyKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwiUFVUIiwoMCxpLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSl9LGUucHJvdG90eXBlLnVuaG9vaz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PSEwKSx0aGlzLl9hY3RpdmUubGVuZ3RoKXt2YXIgcj0hMSxpPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMSxuPSExO2lmKHRoaXMuX3N0YWNrLnBhdXNlZCYmKGk9dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTEscj10LG49dGhpcy5fc3RhY2suZmFsbFRocm91Z2gsdGhpcy5fc3RhY2sucGF1c2VkPSExKSwhbiYmITE9PT1yKXtmb3IoO2k+PTAmJiEwIT09KHI9dGhpcy5fYWN0aXZlW2ldLnVuaG9vayhlKSk7aS0tKWlmKHIgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9zdGFjay5wYXVzZWQ9ITAsdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uPWksdGhpcy5fc3RhY2suZmFsbFRocm91Z2g9ITEscjtpLS19Zm9yKDtpPj0wO2ktLSlpZigocj10aGlzLl9hY3RpdmVbaV0udW5ob29rKCExKSlpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249aSx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMCxyfWVsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCJVTkhPT0siLGUpO3RoaXMuX2FjdGl2ZT1zLHRoaXMuX2lkZW50PTB9LGV9KCk7dC5EY3NQYXJzZXI9YTt2YXIgYz1uZXcgbi5QYXJhbXM7Yy5hZGRQYXJhbSgwKTt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5faGFuZGxlcj1lLHRoaXMuX2RhdGE9IiIsdGhpcy5fcGFyYW1zPWMsdGhpcy5faGl0TGltaXQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLmhvb2s9ZnVuY3Rpb24oZSl7dGhpcy5fcGFyYW1zPWUubGVuZ3RoPjF8fGUucGFyYW1zWzBdP2UuY2xvbmUoKTpjLHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITF9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7dGhpcy5faGl0TGltaXR8fCh0aGlzLl9kYXRhKz0oMCxpLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSx0aGlzLl9kYXRhLmxlbmd0aD5vLlBBWUxPQURfTElNSVQmJih0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSEwKSl9LGUucHJvdG90eXBlLnVuaG9vaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ITE7aWYodGhpcy5faGl0TGltaXQpcj0hMTtlbHNlIGlmKGUmJihyPXRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSx0aGlzLl9wYXJhbXMpKWluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gci50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fcGFyYW1zPWMsdC5fZGF0YT0iIix0Ll9oaXRMaW1pdD0hMSxlfSkpO3JldHVybiB0aGlzLl9wYXJhbXM9Yyx0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExLHJ9LGV9KCk7dC5EY3NIYW5kbGVyPWx9LDIwMTU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRXNjYXBlU2VxdWVuY2VQYXJzZXI9dC5WVDUwMF9UUkFOU0lUSU9OX1RBQkxFPXQuVHJhbnNpdGlvblRhYmxlPXZvaWQgMDt2YXIgbz1yKDg0NCkscz1yKDgyNzMpLGE9cig4NzQyKSxjPXIoNjI0MiksbD1yKDYzNTEpLGg9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMudGFibGU9bmV3IFVpbnQ4QXJyYXkoZSl9cmV0dXJuIGUucHJvdG90eXBlLnNldERlZmF1bHQ9ZnVuY3Rpb24oZSx0KXsoMCxzLmZpbGwpKHRoaXMudGFibGUsZTw8NHx0KX0sZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMudGFibGVbdDw8OHxlXT1yPDw0fGl9LGUucHJvdG90eXBlLmFkZE1hbnk9ZnVuY3Rpb24oZSx0LHIsaSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspdGhpcy50YWJsZVt0PDw4fGVbbl1dPXI8PDR8aX0sZX0oKTt0LlRyYW5zaXRpb25UYWJsZT1oO3ZhciB1PTE2MDt0LlZUNTAwX1RSQU5TSVRJT05fVEFCTEU9ZnVuY3Rpb24oKXt2YXIgZT1uZXcgaCg0MDk1KSx0PUFycmF5LmFwcGx5KG51bGwsQXJyYXkoMjU2KSkubWFwKChmdW5jdGlvbihlLHQpe3JldHVybiB0fSkpLHI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gdC5zbGljZShlLHIpfSxpPXIoMzIsMTI3KSxuPXIoMCwyNCk7bi5wdXNoKDI1KSxuLnB1c2guYXBwbHkobixyKDI4LDMyKSk7dmFyIG8scz1yKDAsMTQpO2ZvcihvIGluIGUuc2V0RGVmYXVsdCgxLDApLGUuYWRkTWFueShpLDAsMiwwKSxzKWUuYWRkTWFueShbMjQsMjYsMTUzLDE1NF0sbywzLDApLGUuYWRkTWFueShyKDEyOCwxNDQpLG8sMywwKSxlLmFkZE1hbnkocigxNDQsMTUyKSxvLDMsMCksZS5hZGQoMTU2LG8sMCwwKSxlLmFkZCgyNyxvLDExLDEpLGUuYWRkKDE1NyxvLDQsOCksZS5hZGRNYW55KFsxNTIsMTU4LDE1OV0sbywwLDcpLGUuYWRkKDE1NSxvLDExLDMpLGUuYWRkKDE0NCxvLDExLDkpO3JldHVybiBlLmFkZE1hbnkobiwwLDMsMCksZS5hZGRNYW55KG4sMSwzLDEpLGUuYWRkKDEyNywxLDAsMSksZS5hZGRNYW55KG4sOCwwLDgpLGUuYWRkTWFueShuLDMsMywzKSxlLmFkZCgxMjcsMywwLDMpLGUuYWRkTWFueShuLDQsMyw0KSxlLmFkZCgxMjcsNCwwLDQpLGUuYWRkTWFueShuLDYsMyw2KSxlLmFkZE1hbnkobiw1LDMsNSksZS5hZGQoMTI3LDUsMCw1KSxlLmFkZE1hbnkobiwyLDMsMiksZS5hZGQoMTI3LDIsMCwyKSxlLmFkZCg5MywxLDQsOCksZS5hZGRNYW55KGksOCw1LDgpLGUuYWRkKDEyNyw4LDUsOCksZS5hZGRNYW55KFsxNTYsMjcsMjQsMjYsN10sOCw2LDApLGUuYWRkTWFueShyKDI4LDMyKSw4LDAsOCksZS5hZGRNYW55KFs4OCw5NCw5NV0sMSwwLDcpLGUuYWRkTWFueShpLDcsMCw3KSxlLmFkZE1hbnkobiw3LDAsNyksZS5hZGQoMTU2LDcsMCwwKSxlLmFkZCgxMjcsNywwLDcpLGUuYWRkKDkxLDEsMTEsMyksZS5hZGRNYW55KHIoNjQsMTI3KSwzLDcsMCksZS5hZGRNYW55KHIoNDgsNjApLDMsOCw0KSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSwzLDksNCksZS5hZGRNYW55KHIoNDgsNjApLDQsOCw0KSxlLmFkZE1hbnkocig2NCwxMjcpLDQsNywwKSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSw0LDAsNiksZS5hZGRNYW55KHIoMzIsNjQpLDYsMCw2KSxlLmFkZCgxMjcsNiwwLDYpLGUuYWRkTWFueShyKDY0LDEyNyksNiwwLDApLGUuYWRkTWFueShyKDMyLDQ4KSwzLDksNSksZS5hZGRNYW55KHIoMzIsNDgpLDUsOSw1KSxlLmFkZE1hbnkocig0OCw2NCksNSwwLDYpLGUuYWRkTWFueShyKDY0LDEyNyksNSw3LDApLGUuYWRkTWFueShyKDMyLDQ4KSw0LDksNSksZS5hZGRNYW55KHIoMzIsNDgpLDEsOSwyKSxlLmFkZE1hbnkocigzMiw0OCksMiw5LDIpLGUuYWRkTWFueShyKDQ4LDEyNyksMiwxMCwwKSxlLmFkZE1hbnkocig0OCw4MCksMSwxMCwwKSxlLmFkZE1hbnkocig4MSw4OCksMSwxMCwwKSxlLmFkZE1hbnkoWzg5LDkwLDkyXSwxLDEwLDApLGUuYWRkTWFueShyKDk2LDEyNyksMSwxMCwwKSxlLmFkZCg4MCwxLDExLDkpLGUuYWRkTWFueShuLDksMCw5KSxlLmFkZCgxMjcsOSwwLDkpLGUuYWRkTWFueShyKDI4LDMyKSw5LDAsOSksZS5hZGRNYW55KHIoMzIsNDgpLDksOSwxMiksZS5hZGRNYW55KHIoNDgsNjApLDksOCwxMCksZS5hZGRNYW55KFs2MCw2MSw2Miw2M10sOSw5LDEwKSxlLmFkZE1hbnkobiwxMSwwLDExKSxlLmFkZE1hbnkocigzMiwxMjgpLDExLDAsMTEpLGUuYWRkTWFueShyKDI4LDMyKSwxMSwwLDExKSxlLmFkZE1hbnkobiwxMCwwLDEwKSxlLmFkZCgxMjcsMTAsMCwxMCksZS5hZGRNYW55KHIoMjgsMzIpLDEwLDAsMTApLGUuYWRkTWFueShyKDQ4LDYwKSwxMCw4LDEwKSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSwxMCwwLDExKSxlLmFkZE1hbnkocigzMiw0OCksMTAsOSwxMiksZS5hZGRNYW55KG4sMTIsMCwxMiksZS5hZGQoMTI3LDEyLDAsMTIpLGUuYWRkTWFueShyKDI4LDMyKSwxMiwwLDEyKSxlLmFkZE1hbnkocigzMiw0OCksMTIsOSwxMiksZS5hZGRNYW55KHIoNDgsNjQpLDEyLDAsMTEpLGUuYWRkTWFueShyKDY0LDEyNyksMTIsMTIsMTMpLGUuYWRkTWFueShyKDY0LDEyNyksMTAsMTIsMTMpLGUuYWRkTWFueShyKDY0LDEyNyksOSwxMiwxMyksZS5hZGRNYW55KG4sMTMsMTMsMTMpLGUuYWRkTWFueShpLDEzLDEzLDEzKSxlLmFkZCgxMjcsMTMsMCwxMyksZS5hZGRNYW55KFsyNywxNTYsMjQsMjZdLDEzLDE0LDApLGUuYWRkKHUsMCwyLDApLGUuYWRkKHUsOCw1LDgpLGUuYWRkKHUsNiwwLDYpLGUuYWRkKHUsMTEsMCwxMSksZS5hZGQodSwxMywxMywxMyksZX0oKTt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHIpe3ZvaWQgMD09PXImJihyPXQuVlQ1MDBfVFJBTlNJVElPTl9UQUJMRSk7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl90cmFuc2l0aW9ucz1yLGkuX3BhcnNlU3RhY2s9e3N0YXRlOjAsaGFuZGxlcnM6W10saGFuZGxlclBvczowLHRyYW5zaXRpb246MCxjaHVua1BvczowfSxpLmluaXRpYWxTdGF0ZT0wLGkuY3VycmVudFN0YXRlPWkuaW5pdGlhbFN0YXRlLGkuX3BhcmFtcz1uZXcgYS5QYXJhbXMsaS5fcGFyYW1zLmFkZFBhcmFtKDApLGkuX2NvbGxlY3Q9MCxpLnByZWNlZGluZ0NvZGVwb2ludD0wLGkuX3ByaW50SGFuZGxlckZiPWZ1bmN0aW9uKGUsdCxyKXt9LGkuX2V4ZWN1dGVIYW5kbGVyRmI9ZnVuY3Rpb24oZSl7fSxpLl9jc2lIYW5kbGVyRmI9ZnVuY3Rpb24oZSx0KXt9LGkuX2VzY0hhbmRsZXJGYj1mdW5jdGlvbihlKXt9LGkuX2Vycm9ySGFuZGxlckZiPWZ1bmN0aW9uKGUpe3JldHVybiBlfSxpLl9wcmludEhhbmRsZXI9aS5fcHJpbnRIYW5kbGVyRmIsaS5fZXhlY3V0ZUhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksaS5fY3NpSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSxpLl9lc2NIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGkuX29zY1BhcnNlcj1uZXcgYy5Pc2NQYXJzZXIsaS5fZGNzUGFyc2VyPW5ldyBsLkRjc1BhcnNlcixpLl9lcnJvckhhbmRsZXI9aS5fZXJyb3JIYW5kbGVyRmIsaS5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJcXCJ9LChmdW5jdGlvbigpe3JldHVybiEwfSkpLGl9cmV0dXJuIG4ocixlKSxyLnByb3RvdHlwZS5faWRlbnRpZmllcj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PVs2NCwxMjZdKTt2YXIgcj0wO2lmKGUucHJlZml4KXtpZihlLnByZWZpeC5sZW5ndGg+MSl0aHJvdyBuZXcgRXJyb3IoIm9ubHkgb25lIGJ5dGUgYXMgcHJlZml4IHN1cHBvcnRlZCIpO2lmKChyPWUucHJlZml4LmNoYXJDb2RlQXQoMCkpJiY2MD5yfHxyPjYzKXRocm93IG5ldyBFcnJvcigicHJlZml4IG11c3QgYmUgaW4gcmFuZ2UgMHgzYyAuLiAweDNmIil9aWYoZS5pbnRlcm1lZGlhdGVzKXtpZihlLmludGVybWVkaWF0ZXMubGVuZ3RoPjIpdGhyb3cgbmV3IEVycm9yKCJvbmx5IHR3byBieXRlcyBhcyBpbnRlcm1lZGlhdGVzIGFyZSBzdXBwb3J0ZWQiKTtmb3IodmFyIGk9MDtpPGUuaW50ZXJtZWRpYXRlcy5sZW5ndGg7KytpKXt2YXIgbj1lLmludGVybWVkaWF0ZXMuY2hhckNvZGVBdChpKTtpZigzMj5ufHxuPjQ3KXRocm93IG5ldyBFcnJvcigiaW50ZXJtZWRpYXRlIG11c3QgYmUgaW4gcmFuZ2UgMHgyMCAuLiAweDJmIik7cjw8PTgscnw9bn19aWYoMSE9PWUuZmluYWwubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiZmluYWwgbXVzdCBiZSBhIHNpbmdsZSBieXRlIik7dmFyIG89ZS5maW5hbC5jaGFyQ29kZUF0KDApO2lmKHRbMF0+b3x8bz50WzFdKXRocm93IG5ldyBFcnJvcigiZmluYWwgbXVzdCBiZSBpbiByYW5nZSAiK3RbMF0rIiAuLiAiK3RbMV0pO3JldHVybihyPDw9OCl8b30sci5wcm90b3R5cGUuaWRlbnRUb1N0cmluZz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W107ZTspdC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpKSxlPj49ODtyZXR1cm4gdC5yZXZlcnNlKCkuam9pbigiIil9LHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jc2lIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2V4ZWN1dGVIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2VzY0hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fb3NjUGFyc2VyLmRpc3Bvc2UoKSx0aGlzLl9kY3NQYXJzZXIuZGlzcG9zZSgpfSxyLnByb3RvdHlwZS5zZXRQcmludEhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fcHJpbnRIYW5kbGVyPWV9LHIucHJvdG90eXBlLmNsZWFyUHJpbnRIYW5kbGVyPWZ1bmN0aW9uKCl7dGhpcy5fcHJpbnRIYW5kbGVyPXRoaXMuX3ByaW50SGFuZGxlckZifSxyLnByb3RvdHlwZS5yZWdpc3RlckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pO3ZvaWQgMD09PXRoaXMuX2VzY0hhbmRsZXJzW3JdJiYodGhpcy5fZXNjSGFuZGxlcnNbcl09W10pO3ZhciBpPXRoaXMuX2VzY0hhbmRsZXJzW3JdO3JldHVybiBpLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZT1pLmluZGV4T2YodCk7LTEhPT1lJiZpLnNwbGljZShlLDEpfX19LHIucHJvdG90eXBlLmNsZWFyRXNjSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pXSYmZGVsZXRlIHRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoZSxbNDgsMTI2XSldfSxyLnByb3RvdHlwZS5zZXRFc2NIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fZXNjSGFuZGxlckZiPWV9LHIucHJvdG90eXBlLnNldEV4ZWN1dGVIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2UuY2hhckNvZGVBdCgwKV09dH0sci5wcm90b3R5cGUuY2xlYXJFeGVjdXRlSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9leGVjdXRlSGFuZGxlcnNbZS5jaGFyQ29kZUF0KDApXSYmZGVsZXRlIHRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tlLmNoYXJDb2RlQXQoMCldfSxyLnByb3RvdHlwZS5zZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2V4ZWN1dGVIYW5kbGVyRmI9ZX0sci5wcm90b3R5cGUucmVnaXN0ZXJDc2lIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5faWRlbnRpZmllcihlKTt2b2lkIDA9PT10aGlzLl9jc2lIYW5kbGVyc1tyXSYmKHRoaXMuX2NzaUhhbmRsZXJzW3JdPVtdKTt2YXIgaT10aGlzLl9jc2lIYW5kbGVyc1tyXTtyZXR1cm4gaS5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9aS5pbmRleE9mKHQpOy0xIT09ZSYmaS5zcGxpY2UoZSwxKX19fSxyLnByb3RvdHlwZS5jbGVhckNzaUhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihlKV0mJmRlbGV0ZSB0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUpXX0sci5wcm90b3R5cGUuc2V0Q3NpSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2NzaUhhbmRsZXJGYj1lfSxyLnByb3RvdHlwZS5yZWdpc3RlckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fZGNzUGFyc2VyLnJlZ2lzdGVySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGUpLHQpfSxyLnByb3RvdHlwZS5jbGVhckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fZGNzUGFyc2VyLmNsZWFySGFuZGxlcih0aGlzLl9pZGVudGlmaWVyKGUpKX0sci5wcm90b3R5cGUuc2V0RGNzSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2Rjc1BhcnNlci5zZXRIYW5kbGVyRmFsbGJhY2soZSl9LHIucHJvdG90eXBlLnJlZ2lzdGVyT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9vc2NQYXJzZXIucmVnaXN0ZXJIYW5kbGVyKGUsdCl9LHIucHJvdG90eXBlLmNsZWFyT3NjSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9vc2NQYXJzZXIuY2xlYXJIYW5kbGVyKGUpfSxyLnByb3RvdHlwZS5zZXRPc2NIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fb3NjUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhlKX0sci5wcm90b3R5cGUuc2V0RXJyb3JIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2Vycm9ySGFuZGxlcj1lfSxyLnByb3RvdHlwZS5jbGVhckVycm9ySGFuZGxlcj1mdW5jdGlvbigpe3RoaXMuX2Vycm9ySGFuZGxlcj10aGlzLl9lcnJvckhhbmRsZXJGYn0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRTdGF0ZT10aGlzLmluaXRpYWxTdGF0ZSx0aGlzLl9vc2NQYXJzZXIucmVzZXQoKSx0aGlzLl9kY3NQYXJzZXIucmVzZXQoKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTAsMCE9PXRoaXMuX3BhcnNlU3RhY2suc3RhdGUmJih0aGlzLl9wYXJzZVN0YWNrLnN0YXRlPTIsdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz1bXSl9LHIucHJvdG90eXBlLl9wcmVzZXJ2ZVN0YWNrPWZ1bmN0aW9uKGUsdCxyLGksbil7dGhpcy5fcGFyc2VTdGFjay5zdGF0ZT1lLHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM9dCx0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3M9cix0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb249aSx0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zPW59LHIucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPTAsbz0wLHM9MDtpZih0aGlzLl9wYXJzZVN0YWNrLnN0YXRlKWlmKDI9PT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MCxzPXRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MrMTtlbHNle2lmKHZvaWQgMD09PXJ8fDE9PT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXRocm93IHRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MSxuZXcgRXJyb3IoImltcHJvcGVyIGNvbnRpbnVhdGlvbiBkdWUgdG8gcHJldmlvdXMgYXN5bmMgaGFuZGxlciwgZ2l2aW5nIHVwIHBhcnNpbmciKTt2YXIgYT10aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzLGM9dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zLTE7c3dpdGNoKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUpe2Nhc2UgMzppZighMT09PXImJmM+LTEpZm9yKDtjPj0wJiYhMCE9PShpPWFbY10odGhpcy5fcGFyYW1zKSk7Yy0tKWlmKGkgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3M9YyxpO3RoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM9W107YnJlYWs7Y2FzZSA0OmlmKCExPT09ciYmYz4tMSlmb3IoO2M+PTAmJiEwIT09KGk9YVtjXSgpKTtjLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcz1jLGk7dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz1bXTticmVhaztjYXNlIDY6aWYobj1lW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdLGk9dGhpcy5fZGNzUGFyc2VyLnVuaG9vaygyNCE9PW4mJjI2IT09bixyKSlyZXR1cm4gaTsyNz09PW4mJih0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb258PTEpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTA7YnJlYWs7Y2FzZSA1OmlmKG49ZVt0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zXSxpPXRoaXMuX29zY1BhcnNlci5lbmQoMjQhPT1uJiYyNiE9PW4scikpcmV0dXJuIGk7Mjc9PT1uJiYodGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9ufD0xKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wfXRoaXMuX3BhcnNlU3RhY2suc3RhdGU9MCxzPXRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3MrMSx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wLHRoaXMuY3VycmVudFN0YXRlPTE1JnRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbn1mb3IodmFyIGw9cztsPHQ7KytsKXtzd2l0Y2gobj1lW2xdLChvPXRoaXMuX3RyYW5zaXRpb25zLnRhYmxlW3RoaXMuY3VycmVudFN0YXRlPDw4fChuPDE2MD9uOnUpXSk+PjQpe2Nhc2UgMjpmb3IodmFyIGg9bCsxOzsrK2gpe2lmKGg+PXR8fChuPWVbaF0pPDMyfHxuPjEyNiYmbjx1KXt0aGlzLl9wcmludEhhbmRsZXIoZSxsLGgpLGw9aC0xO2JyZWFrfWlmKCsraD49dHx8KG49ZVtoXSk8MzJ8fG4+MTI2JiZuPHUpe3RoaXMuX3ByaW50SGFuZGxlcihlLGwsaCksbD1oLTE7YnJlYWt9aWYoKytoPj10fHwobj1lW2hdKTwzMnx8bj4xMjYmJm48dSl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsbCxoKSxsPWgtMTticmVha31pZigrK2g+PXR8fChuPWVbaF0pPDMyfHxuPjEyNiYmbjx1KXt0aGlzLl9wcmludEhhbmRsZXIoZSxsLGgpLGw9aC0xO2JyZWFrfX1icmVhaztjYXNlIDM6dGhpcy5fZXhlY3V0ZUhhbmRsZXJzW25dP3RoaXMuX2V4ZWN1dGVIYW5kbGVyc1tuXSgpOnRoaXMuX2V4ZWN1dGVIYW5kbGVyRmIobiksdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MDticmVhaztjYXNlIDA6YnJlYWs7Y2FzZSAxOmlmKHRoaXMuX2Vycm9ySGFuZGxlcih7cG9zaXRpb246bCxjb2RlOm4sY3VycmVudFN0YXRlOnRoaXMuY3VycmVudFN0YXRlLGNvbGxlY3Q6dGhpcy5fY29sbGVjdCxwYXJhbXM6dGhpcy5fcGFyYW1zLGFib3J0OiExfSkuYWJvcnQpcmV0dXJuO2JyZWFrO2Nhc2UgNzpmb3IodmFyIGY9KGE9dGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5fY29sbGVjdDw8OHxuXSk/YS5sZW5ndGgtMTotMTtmPj0wJiYhMCE9PShpPWFbZl0odGhpcy5fcGFyYW1zKSk7Zi0tKWlmKGkgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDMsYSxmLG8sbCksaTtmPDAmJnRoaXMuX2NzaUhhbmRsZXJGYih0aGlzLl9jb2xsZWN0PDw4fG4sdGhpcy5fcGFyYW1zKSx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wO2JyZWFrO2Nhc2UgODpkb3tzd2l0Y2gobil7Y2FzZSA1OTp0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCk7YnJlYWs7Y2FzZSA1ODp0aGlzLl9wYXJhbXMuYWRkU3ViUGFyYW0oLTEpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fcGFyYW1zLmFkZERpZ2l0KG4tNDgpfX13aGlsZSgrK2w8dCYmKG49ZVtsXSk+NDcmJm48NjApO2wtLTticmVhaztjYXNlIDk6dGhpcy5fY29sbGVjdDw8PTgsdGhpcy5fY29sbGVjdHw9bjticmVhaztjYXNlIDEwOmZvcih2YXIgXz10aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9jb2xsZWN0PDw4fG5dLGQ9Xz9fLmxlbmd0aC0xOi0xO2Q+PTAmJiEwIT09KGk9X1tkXSgpKTtkLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soNCxfLGQsbyxsKSxpO2Q8MCYmdGhpcy5fZXNjSGFuZGxlckZiKHRoaXMuX2NvbGxlY3Q8PDh8biksdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MDticmVhaztjYXNlIDExOnRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTA7YnJlYWs7Y2FzZSAxMjp0aGlzLl9kY3NQYXJzZXIuaG9vayh0aGlzLl9jb2xsZWN0PDw4fG4sdGhpcy5fcGFyYW1zKTticmVhaztjYXNlIDEzOmZvcih2YXIgcD1sKzE7OysrcClpZihwPj10fHwyND09PShuPWVbcF0pfHwyNj09PW58fDI3PT09bnx8bj4xMjcmJm48dSl7dGhpcy5fZGNzUGFyc2VyLnB1dChlLGwscCksbD1wLTE7YnJlYWt9YnJlYWs7Y2FzZSAxNDppZihpPXRoaXMuX2Rjc1BhcnNlci51bmhvb2soMjQhPT1uJiYyNiE9PW4pKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDYsW10sMCxvLGwpLGk7Mjc9PT1uJiYob3w9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MCx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wO2JyZWFrO2Nhc2UgNDp0aGlzLl9vc2NQYXJzZXIuc3RhcnQoKTticmVhaztjYXNlIDU6Zm9yKHZhciB2PWwrMTs7disrKWlmKHY+PXR8fChuPWVbdl0pPDMyfHxuPjEyNyYmbjx1KXt0aGlzLl9vc2NQYXJzZXIucHV0KGUsbCx2KSxsPXYtMTticmVha31icmVhaztjYXNlIDY6aWYoaT10aGlzLl9vc2NQYXJzZXIuZW5kKDI0IT09biYmMjYhPT1uKSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjayg1LFtdLDAsbyxsKSxpOzI3PT09biYmKG98PTEpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTAsdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MH10aGlzLmN1cnJlbnRTdGF0ZT0xNSZvfX0scn0oby5EaXNwb3NhYmxlKTt0LkVzY2FwZVNlcXVlbmNlUGFyc2VyPWZ9LDYyNDI6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk9zY0hhbmRsZXI9dC5Pc2NQYXJzZXI9dm9pZCAwO3ZhciBpPXIoNTc3MCksbj1yKDQ4Miksbz1bXSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3N0YXRlPTAsdGhpcy5fYWN0aXZlPW8sdGhpcy5faWQ9LTEsdGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9oYW5kbGVyRmI9ZnVuY3Rpb24oKXt9LHRoaXMuX3N0YWNrPXtwYXVzZWQ6ITEsbG9vcFBvc2l0aW9uOjAsZmFsbFRocm91Z2g6ITF9fXJldHVybiBlLnByb3RvdHlwZS5yZWdpc3RlckhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10aGlzLl9oYW5kbGVyc1tlXSYmKHRoaXMuX2hhbmRsZXJzW2VdPVtdKTt2YXIgcj10aGlzLl9oYW5kbGVyc1tlXTtyZXR1cm4gci5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9ci5pbmRleE9mKHQpOy0xIT09ZSYmci5zcGxpY2UoZSwxKX19fSxlLnByb3RvdHlwZS5jbGVhckhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlcnNbZV0mJmRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tlXX0sZS5wcm90b3R5cGUuc2V0SGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXJGYj1lfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9oYW5kbGVyRmI9ZnVuY3Rpb24oKXt9LHRoaXMuX2FjdGl2ZT1vfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2lmKDI9PT10aGlzLl9zdGF0ZSlmb3IodmFyIGU9dGhpcy5fc3RhY2sucGF1c2VkP3RoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xOnRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wOy0tZSl0aGlzLl9hY3RpdmVbZV0uZW5kKCExKTt0aGlzLl9zdGFjay5wYXVzZWQ9ITEsdGhpcy5fYWN0aXZlPW8sdGhpcy5faWQ9LTEsdGhpcy5fc3RhdGU9MH0sZS5wcm90b3R5cGUuX3N0YXJ0PWZ1bmN0aW9uKCl7aWYodGhpcy5fYWN0aXZlPXRoaXMuX2hhbmRsZXJzW3RoaXMuX2lkXXx8byx0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgZT10aGlzLl9hY3RpdmUubGVuZ3RoLTE7ZT49MDtlLS0pdGhpcy5fYWN0aXZlW2VdLnN0YXJ0KCk7ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsIlNUQVJUIil9LGUucHJvdG90eXBlLl9wdXQ9ZnVuY3Rpb24oZSx0LHIpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciBpPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtpPj0wO2ktLSl0aGlzLl9hY3RpdmVbaV0ucHV0KGUsdCxyKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwiUFVUIiwoMCxuLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSl9LGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5yZXNldCgpLHRoaXMuX3N0YXRlPTF9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7aWYoMyE9PXRoaXMuX3N0YXRlKXtpZigxPT09dGhpcy5fc3RhdGUpZm9yKDt0PHI7KXt2YXIgaT1lW3QrK107aWYoNTk9PT1pKXt0aGlzLl9zdGF0ZT0yLHRoaXMuX3N0YXJ0KCk7YnJlYWt9aWYoaTw0OHx8NTc8aSlyZXR1cm4gdm9pZCh0aGlzLl9zdGF0ZT0zKTstMT09PXRoaXMuX2lkJiYodGhpcy5faWQ9MCksdGhpcy5faWQ9MTAqdGhpcy5faWQraS00OH0yPT09dGhpcy5fc3RhdGUmJnItdD4wJiZ0aGlzLl9wdXQoZSx0LHIpfX0sZS5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ITApLDAhPT10aGlzLl9zdGF0ZSl7aWYoMyE9PXRoaXMuX3N0YXRlKWlmKDE9PT10aGlzLl9zdGF0ZSYmdGhpcy5fc3RhcnQoKSx0aGlzLl9hY3RpdmUubGVuZ3RoKXt2YXIgcj0hMSxpPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMSxuPSExO2lmKHRoaXMuX3N0YWNrLnBhdXNlZCYmKGk9dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTEscj10LG49dGhpcy5fc3RhY2suZmFsbFRocm91Z2gsdGhpcy5fc3RhY2sucGF1c2VkPSExKSwhbiYmITE9PT1yKXtmb3IoO2k+PTAmJiEwIT09KHI9dGhpcy5fYWN0aXZlW2ldLmVuZChlKSk7aS0tKWlmKHIgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9zdGFjay5wYXVzZWQ9ITAsdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uPWksdGhpcy5fc3RhY2suZmFsbFRocm91Z2g9ITEscjtpLS19Zm9yKDtpPj0wO2ktLSlpZigocj10aGlzLl9hY3RpdmVbaV0uZW5kKCExKSlpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249aSx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMCxyfWVsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCJFTkQiLGUpO3RoaXMuX2FjdGl2ZT1vLHRoaXMuX2lkPS0xLHRoaXMuX3N0YXRlPTB9fSxlfSgpO3QuT3NjUGFyc2VyPXM7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2hhbmRsZXI9ZSx0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExfXJldHVybiBlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITF9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7dGhpcy5faGl0TGltaXR8fCh0aGlzLl9kYXRhKz0oMCxuLnV0ZjMyVG9TdHJpbmcpKGUsdCxyKSx0aGlzLl9kYXRhLmxlbmd0aD5pLlBBWUxPQURfTElNSVQmJih0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSEwKSl9LGUucHJvdG90eXBlLmVuZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ITE7aWYodGhpcy5faGl0TGltaXQpcj0hMTtlbHNlIGlmKGUmJihyPXRoaXMuX2hhbmRsZXIodGhpcy5fZGF0YSkpaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiByLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9kYXRhPSIiLHQuX2hpdExpbWl0PSExLGV9KSk7cmV0dXJuIHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITEscn0sZX0oKTt0Lk9zY0hhbmRsZXI9YX0sODc0MjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlBhcmFtcz12b2lkIDA7dmFyIHI9MjE0NzQ4MzY0NyxpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe2lmKHZvaWQgMD09PWUmJihlPTMyKSx2b2lkIDA9PT10JiYodD0zMiksdGhpcy5tYXhMZW5ndGg9ZSx0aGlzLm1heFN1YlBhcmFtc0xlbmd0aD10LHQ+MjU2KXRocm93IG5ldyBFcnJvcigibWF4U3ViUGFyYW1zTGVuZ3RoIG11c3Qgbm90IGJlIGdyZWF0ZXIgdGhhbiAyNTYiKTt0aGlzLnBhcmFtcz1uZXcgSW50MzJBcnJheShlKSx0aGlzLmxlbmd0aD0wLHRoaXMuX3N1YlBhcmFtcz1uZXcgSW50MzJBcnJheSh0KSx0aGlzLl9zdWJQYXJhbXNMZW5ndGg9MCx0aGlzLl9zdWJQYXJhbXNJZHg9bmV3IFVpbnQxNkFycmF5KGUpLHRoaXMuX3JlamVjdERpZ2l0cz0hMSx0aGlzLl9yZWplY3RTdWJEaWdpdHM9ITEsdGhpcy5fZGlnaXRJc1N1Yj0hMX1yZXR1cm4gZS5mcm9tQXJyYXk9ZnVuY3Rpb24odCl7dmFyIHI9bmV3IGU7aWYoIXQubGVuZ3RoKXJldHVybiByO2Zvcih2YXIgaT1BcnJheS5pc0FycmF5KHRbMF0pPzE6MDtpPHQubGVuZ3RoOysraSl7dmFyIG49dFtpXTtpZihBcnJheS5pc0FycmF5KG4pKWZvcih2YXIgbz0wO288bi5sZW5ndGg7KytvKXIuYWRkU3ViUGFyYW0obltvXSk7ZWxzZSByLmFkZFBhcmFtKG4pfXJldHVybiByfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBlKHRoaXMubWF4TGVuZ3RoLHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKTtyZXR1cm4gdC5wYXJhbXMuc2V0KHRoaXMucGFyYW1zKSx0Lmxlbmd0aD10aGlzLmxlbmd0aCx0Ll9zdWJQYXJhbXMuc2V0KHRoaXMuX3N1YlBhcmFtcyksdC5fc3ViUGFyYW1zTGVuZ3RoPXRoaXMuX3N1YlBhcmFtc0xlbmd0aCx0Ll9zdWJQYXJhbXNJZHguc2V0KHRoaXMuX3N1YlBhcmFtc0lkeCksdC5fcmVqZWN0RGlnaXRzPXRoaXMuX3JlamVjdERpZ2l0cyx0Ll9yZWplY3RTdWJEaWdpdHM9dGhpcy5fcmVqZWN0U3ViRGlnaXRzLHQuX2RpZ2l0SXNTdWI9dGhpcy5fZGlnaXRJc1N1Yix0fSxlLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PHRoaXMubGVuZ3RoOysrdCl7ZS5wdXNoKHRoaXMucGFyYW1zW3RdKTt2YXIgcj10aGlzLl9zdWJQYXJhbXNJZHhbdF0+PjgsaT0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W3RdO2ktcj4wJiZlLnB1c2goQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fc3ViUGFyYW1zLHIsaSkpfXJldHVybiBlfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMubGVuZ3RoPTAsdGhpcy5fc3ViUGFyYW1zTGVuZ3RoPTAsdGhpcy5fcmVqZWN0RGlnaXRzPSExLHRoaXMuX3JlamVjdFN1YkRpZ2l0cz0hMSx0aGlzLl9kaWdpdElzU3ViPSExfSxlLnByb3RvdHlwZS5hZGRQYXJhbT1mdW5jdGlvbihlKXtpZih0aGlzLl9kaWdpdElzU3ViPSExLHRoaXMubGVuZ3RoPj10aGlzLm1heExlbmd0aCl0aGlzLl9yZWplY3REaWdpdHM9ITA7ZWxzZXtpZihlPC0xKXRocm93IG5ldyBFcnJvcigidmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMuX3N1YlBhcmFtc0lkeFt0aGlzLmxlbmd0aF09dGhpcy5fc3ViUGFyYW1zTGVuZ3RoPDw4fHRoaXMuX3N1YlBhcmFtc0xlbmd0aCx0aGlzLnBhcmFtc1t0aGlzLmxlbmd0aCsrXT1lPnI/cjplfX0sZS5wcm90b3R5cGUuYWRkU3ViUGFyYW09ZnVuY3Rpb24oZSl7aWYodGhpcy5fZGlnaXRJc1N1Yj0hMCx0aGlzLmxlbmd0aClpZih0aGlzLl9yZWplY3REaWdpdHN8fHRoaXMuX3N1YlBhcmFtc0xlbmd0aD49dGhpcy5tYXhTdWJQYXJhbXNMZW5ndGgpdGhpcy5fcmVqZWN0U3ViRGlnaXRzPSEwO2Vsc2V7aWYoZTwtMSl0aHJvdyBuZXcgRXJyb3IoInZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLl9zdWJQYXJhbXNbdGhpcy5fc3ViUGFyYW1zTGVuZ3RoKytdPWU+cj9yOmUsdGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoLTFdKyt9fSxlLnByb3RvdHlwZS5oYXNTdWJQYXJhbXM9ZnVuY3Rpb24oZSl7cmV0dXJuKDI1NSZ0aGlzLl9zdWJQYXJhbXNJZHhbZV0pLSh0aGlzLl9zdWJQYXJhbXNJZHhbZV0+PjgpPjB9LGUucHJvdG90eXBlLmdldFN1YlBhcmFtcz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9zdWJQYXJhbXNJZHhbZV0+Pjgscj0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W2VdO3JldHVybiByLXQ+MD90aGlzLl9zdWJQYXJhbXMuc3ViYXJyYXkodCxyKTpudWxsfSxlLnByb3RvdHlwZS5nZXRTdWJQYXJhbXNBbGw9ZnVuY3Rpb24oKXtmb3IodmFyIGU9e30sdD0wO3Q8dGhpcy5sZW5ndGg7Kyt0KXt2YXIgcj10aGlzLl9zdWJQYXJhbXNJZHhbdF0+PjgsaT0yNTUmdGhpcy5fc3ViUGFyYW1zSWR4W3RdO2ktcj4wJiYoZVt0XT10aGlzLl9zdWJQYXJhbXMuc2xpY2UocixpKSl9cmV0dXJuIGV9LGUucHJvdG90eXBlLmFkZERpZ2l0PWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCEodGhpcy5fcmVqZWN0RGlnaXRzfHwhKHQ9dGhpcy5fZGlnaXRJc1N1Yj90aGlzLl9zdWJQYXJhbXNMZW5ndGg6dGhpcy5sZW5ndGgpfHx0aGlzLl9kaWdpdElzU3ViJiZ0aGlzLl9yZWplY3RTdWJEaWdpdHMpKXt2YXIgaT10aGlzLl9kaWdpdElzU3ViP3RoaXMuX3N1YlBhcmFtczp0aGlzLnBhcmFtcyxuPWlbdC0xXTtpW3QtMV09fm4/TWF0aC5taW4oMTAqbitlLHIpOmV9fSxlfSgpO3QuUGFyYW1zPWl9LDU3NDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5BZGRvbk1hbmFnZXI9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2FkZG9ucz1bXX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLl9hZGRvbnMubGVuZ3RoLTE7ZT49MDtlLS0pdGhpcy5fYWRkb25zW2VdLmluc3RhbmNlLmRpc3Bvc2UoKX0sZS5wcm90b3R5cGUubG9hZEFkZG9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPXtpbnN0YW5jZTp0LGRpc3Bvc2U6dC5kaXNwb3NlLGlzRGlzcG9zZWQ6ITF9O3RoaXMuX2FkZG9ucy5wdXNoKGkpLHQuZGlzcG9zZT1mdW5jdGlvbigpe3JldHVybiByLl93cmFwcGVkQWRkb25EaXNwb3NlKGkpfSx0LmFjdGl2YXRlKGUpfSxlLnByb3RvdHlwZS5fd3JhcHBlZEFkZG9uRGlzcG9zZT1mdW5jdGlvbihlKXtpZighZS5pc0Rpc3Bvc2VkKXtmb3IodmFyIHQ9LTEscj0wO3I8dGhpcy5fYWRkb25zLmxlbmd0aDtyKyspaWYodGhpcy5fYWRkb25zW3JdPT09ZSl7dD1yO2JyZWFrfWlmKC0xPT09dCl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBkaXNwb3NlIGFuIGFkZG9uIHRoYXQgaGFzIG5vdCBiZWVuIGxvYWRlZCIpO2UuaXNEaXNwb3NlZD0hMCxlLmRpc3Bvc2UuYXBwbHkoZS5pbnN0YW5jZSksdGhpcy5fYWRkb25zLnNwbGljZSh0LDEpfX0sZX0oKTt0LkFkZG9uTWFuYWdlcj1yfSw4NzcxOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJBcGlWaWV3PXZvaWQgMDt2YXIgaT1yKDM3ODUpLG49cig1MTEpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fYnVmZmVyPWUsdGhpcy50eXBlPXR9cmV0dXJuIGUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2J1ZmZlcj1lLHRoaXN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY3Vyc29yWSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIueX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImN1cnNvclgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2aWV3cG9ydFkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnlkaXNwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYmFzZVkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnliYXNlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0TGluZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9idWZmZXIubGluZXMuZ2V0KGUpO2lmKHQpcmV0dXJuIG5ldyBpLkJ1ZmZlckxpbmVBcGlWaWV3KHQpfSxlLnByb3RvdHlwZS5nZXROdWxsQ2VsbD1mdW5jdGlvbigpe3JldHVybiBuZXcgbi5DZWxsRGF0YX0sZX0oKTt0LkJ1ZmZlckFwaVZpZXc9b30sMzc4NTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyTGluZUFwaVZpZXc9dm9pZCAwO3ZhciBpPXIoNTExKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9saW5lPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNXcmFwcGVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmUuaXNXcmFwcGVkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xpbmUubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldENlbGw9ZnVuY3Rpb24oZSx0KXtpZighKGU8MHx8ZT49dGhpcy5fbGluZS5sZW5ndGgpKXJldHVybiB0Pyh0aGlzLl9saW5lLmxvYWRDZWxsKGUsdCksdCk6dGhpcy5fbGluZS5sb2FkQ2VsbChlLG5ldyBpLkNlbGxEYXRhKX0sZS5wcm90b3R5cGUudHJhbnNsYXRlVG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9saW5lLnRyYW5zbGF0ZVRvU3RyaW5nKGUsdCxyKX0sZX0oKTt0LkJ1ZmZlckxpbmVBcGlWaWV3PW59LDgyODU6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlck5hbWVzcGFjZUFwaT12b2lkIDA7dmFyIGk9cig4NzcxKSxuPXIoODQ2MCksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9dGhpczt0aGlzLl9jb3JlPWUsdGhpcy5fb25CdWZmZXJDaGFuZ2U9bmV3IG4uRXZlbnRFbWl0dGVyLHRoaXMuX25vcm1hbD1uZXcgaS5CdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwsIm5vcm1hbCIpLHRoaXMuX2FsdGVybmF0ZT1uZXcgaS5CdWZmZXJBcGlWaWV3KHRoaXMuX2NvcmUuYnVmZmVycy5hbHQsImFsdGVybmF0ZSIpLHRoaXMuX2NvcmUuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbigpe3JldHVybiB0Ll9vbkJ1ZmZlckNoYW5nZS5maXJlKHQuYWN0aXZlKX0pKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkJ1ZmZlckNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJ1ZmZlckNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZSIse2dldDpmdW5jdGlvbigpe2lmKHRoaXMuX2NvcmUuYnVmZmVycy5hY3RpdmU9PT10aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKXJldHVybiB0aGlzLm5vcm1hbDtpZih0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlPT09dGhpcy5fY29yZS5idWZmZXJzLmFsdClyZXR1cm4gdGhpcy5hbHRlcm5hdGU7dGhyb3cgbmV3IEVycm9yKCJBY3RpdmUgYnVmZmVyIGlzIG5laXRoZXIgbm9ybWFsIG5vciBhbHRlcm5hdGUiKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm5vcm1hbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3JtYWwuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFsdGVybmF0ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hbHRlcm5hdGUuaW5pdCh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlfSgpO3QuQnVmZmVyTmFtZXNwYWNlQXBpPW99LDc5NzU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5QYXJzZXJBcGk9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb3JlPWV9cmV0dXJuIGUucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLChmdW5jdGlvbihlKXtyZXR1cm4gdChlLnRvQXJyYXkoKSl9KSl9LGUucHJvdG90eXBlLmFkZENzaUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckNzaUhhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUucmVnaXN0ZXJEY3NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJEY3NIYW5kbGVyKGUsKGZ1bmN0aW9uKGUscil7cmV0dXJuIHQoZSxyLnRvQXJyYXkoKSl9KSl9LGUucHJvdG90eXBlLmFkZERjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckRjc0hhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUucmVnaXN0ZXJFc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLmFkZEVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3RlckVzY0hhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUucmVnaXN0ZXJPc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLmFkZE9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KX0sZX0oKTt0LlBhcnNlckFwaT1yfSw3MDkwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVW5pY29kZUFwaT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NvcmU9ZX1yZXR1cm4gZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY29yZS51bmljb2RlU2VydmljZS5yZWdpc3RlcihlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2ZXJzaW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnZlcnNpb25zfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlVmVyc2lvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb259LHNldDpmdW5jdGlvbihlKXt0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLmFjdGl2ZVZlcnNpb249ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlfSgpO3QuVW5pY29kZUFwaT1yfSw3NDQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyU2VydmljZT10Lk1JTklNVU1fUk9XUz10Lk1JTklNVU1fQ09MUz12b2lkIDA7dmFyIGE9cigyNTg1KSxjPXIoNTI5NSksbD1yKDg0NjApLGg9cig4NDQpO3QuTUlOSU1VTV9DT0xTPTIsdC5NSU5JTVVNX1JPV1M9MTt2YXIgdT1mdW5jdGlvbihlKXtmdW5jdGlvbiByKHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fb3B0aW9uc1NlcnZpY2U9cixpLmlzVXNlclNjcm9sbGluZz0hMSxpLl9vblJlc2l6ZT1uZXcgbC5FdmVudEVtaXR0ZXIsaS5fb25TY3JvbGw9bmV3IGwuRXZlbnRFbWl0dGVyLGkuY29scz1NYXRoLm1heChyLnJhd09wdGlvbnMuY29sc3x8MCx0Lk1JTklNVU1fQ09MUyksaS5yb3dzPU1hdGgubWF4KHIucmF3T3B0aW9ucy5yb3dzfHwwLHQuTUlOSU1VTV9ST1dTKSxpLmJ1ZmZlcnM9bmV3IGMuQnVmZmVyU2V0KHIsaSksaX1yZXR1cm4gbihyLGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSwib25SZXNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXNpemUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLCJvblNjcm9sbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNjcm9sbC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsImJ1ZmZlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlcnMuYWN0aXZlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHIucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5idWZmZXJzLmRpc3Bvc2UoKX0sci5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5jb2xzPWUsdGhpcy5yb3dzPXQsdGhpcy5idWZmZXJzLnJlc2l6ZShlLHQpLHRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKHRoaXMuY29scyksdGhpcy5fb25SZXNpemUuZmlyZSh7Y29sczplLHJvd3M6dH0pfSxyLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuYnVmZmVycy5yZXNldCgpLHRoaXMuaXNVc2VyU2Nyb2xsaW5nPSExfSxyLnByb3RvdHlwZS5zY3JvbGw9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0hMSk7dmFyIHIsaT10aGlzLmJ1ZmZlcjsocj10aGlzLl9jYWNoZWRCbGFua0xpbmUpJiZyLmxlbmd0aD09PXRoaXMuY29scyYmci5nZXRGZygwKT09PWUuZmcmJnIuZ2V0QmcoMCk9PT1lLmJnfHwocj1pLmdldEJsYW5rTGluZShlLHQpLHRoaXMuX2NhY2hlZEJsYW5rTGluZT1yKSxyLmlzV3JhcHBlZD10O3ZhciBuPWkueWJhc2UraS5zY3JvbGxUb3Asbz1pLnliYXNlK2kuc2Nyb2xsQm90dG9tO2lmKDA9PT1pLnNjcm9sbFRvcCl7dmFyIHM9aS5saW5lcy5pc0Z1bGw7bz09PWkubGluZXMubGVuZ3RoLTE/cz9pLmxpbmVzLnJlY3ljbGUoKS5jb3B5RnJvbShyKTppLmxpbmVzLnB1c2goci5jbG9uZSgpKTppLmxpbmVzLnNwbGljZShvKzEsMCxyLmNsb25lKCkpLHM/dGhpcy5pc1VzZXJTY3JvbGxpbmcmJihpLnlkaXNwPU1hdGgubWF4KGkueWRpc3AtMSwwKSk6KGkueWJhc2UrKyx0aGlzLmlzVXNlclNjcm9sbGluZ3x8aS55ZGlzcCsrKX1lbHNle3ZhciBhPW8tbisxO2kubGluZXMuc2hpZnRFbGVtZW50cyhuKzEsYS0xLC0xKSxpLmxpbmVzLnNldChvLHIuY2xvbmUoKSl9dGhpcy5pc1VzZXJTY3JvbGxpbmd8fChpLnlkaXNwPWkueWJhc2UpLHRoaXMuX29uU2Nyb2xsLmZpcmUoaS55ZGlzcCl9LHIucHJvdG90eXBlLnNjcm9sbExpbmVzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLmJ1ZmZlcjtpZihlPDApe2lmKDA9PT1pLnlkaXNwKXJldHVybjt0aGlzLmlzVXNlclNjcm9sbGluZz0hMH1lbHNlIGUraS55ZGlzcD49aS55YmFzZSYmKHRoaXMuaXNVc2VyU2Nyb2xsaW5nPSExKTt2YXIgbj1pLnlkaXNwO2kueWRpc3A9TWF0aC5tYXgoTWF0aC5taW4oaS55ZGlzcCtlLGkueWJhc2UpLDApLG4hPT1pLnlkaXNwJiYodHx8dGhpcy5fb25TY3JvbGwuZmlyZShpLnlkaXNwKSl9LHIucHJvdG90eXBlLnNjcm9sbFBhZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuc2Nyb2xsTGluZXMoZSoodGhpcy5yb3dzLTEpKX0sci5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbExpbmVzKC10aGlzLmJ1ZmZlci55ZGlzcCl9LHIucHJvdG90eXBlLnNjcm9sbFRvQm90dG9tPWZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxMaW5lcyh0aGlzLmJ1ZmZlci55YmFzZS10aGlzLmJ1ZmZlci55ZGlzcCl9LHIucHJvdG90eXBlLnNjcm9sbFRvTGluZT1mdW5jdGlvbihlKXt2YXIgdD1lLXRoaXMuYnVmZmVyLnlkaXNwOzAhPT10JiZ0aGlzLnNjcm9sbExpbmVzKHQpfSxvKFtzKDAsYS5JT3B0aW9uc1NlcnZpY2UpXSxyKX0oaC5EaXNwb3NhYmxlKTt0LkJ1ZmZlclNlcnZpY2U9dX0sNzk5NDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNoYXJzZXRTZXJ2aWNlPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmdsZXZlbD0wLHRoaXMuX2NoYXJzZXRzPVtdfXJldHVybiBlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuY2hhcnNldD12b2lkIDAsdGhpcy5fY2hhcnNldHM9W10sdGhpcy5nbGV2ZWw9MH0sZS5wcm90b3R5cGUuc2V0Z0xldmVsPWZ1bmN0aW9uKGUpe3RoaXMuZ2xldmVsPWUsdGhpcy5jaGFyc2V0PXRoaXMuX2NoYXJzZXRzW2VdfSxlLnByb3RvdHlwZS5zZXRnQ2hhcnNldD1mdW5jdGlvbihlLHQpe3RoaXMuX2NoYXJzZXRzW2VdPXQsdGhpcy5nbGV2ZWw9PT1lJiYodGhpcy5jaGFyc2V0PXQpfSxlfSgpO3QuQ2hhcnNldFNlcnZpY2U9cn0sMTc1MzpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvcmVNb3VzZVNlcnZpY2U9dm9pZCAwO3ZhciBzPXIoMjU4NSksYT1yKDg0NjApLGM9e05PTkU6e2V2ZW50czowLHJlc3RyaWN0OmZ1bmN0aW9uKCl7cmV0dXJuITF9fSxYMTA6e2V2ZW50czoxLHJlc3RyaWN0OmZ1bmN0aW9uKGUpe3JldHVybiA0IT09ZS5idXR0b24mJjE9PT1lLmFjdGlvbiYmKGUuY3RybD0hMSxlLmFsdD0hMSxlLnNoaWZ0PSExLCEwKX19LFZUMjAwOntldmVudHM6MTkscmVzdHJpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIDMyIT09ZS5hY3Rpb259fSxEUkFHOntldmVudHM6MjMscmVzdHJpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIDMyIT09ZS5hY3Rpb258fDMhPT1lLmJ1dHRvbn19LEFOWTp7ZXZlbnRzOjMxLHJlc3RyaWN0OmZ1bmN0aW9uKGUpe3JldHVybiEwfX19O2Z1bmN0aW9uIGwoZSx0KXt2YXIgcj0oZS5jdHJsPzE2OjApfChlLnNoaWZ0PzQ6MCl8KGUuYWx0Pzg6MCk7cmV0dXJuIDQ9PT1lLmJ1dHRvbj8ocnw9NjQscnw9ZS5hY3Rpb24pOihyfD0zJmUuYnV0dG9uLDQmZS5idXR0b24mJihyfD02NCksOCZlLmJ1dHRvbiYmKHJ8PTEyOCksMzI9PT1lLmFjdGlvbj9yfD0zMjowIT09ZS5hY3Rpb258fHR8fChyfD0zKSkscn12YXIgaD1TdHJpbmcuZnJvbUNoYXJDb2RlLHU9e0RFRkFVTFQ6ZnVuY3Rpb24oZSl7dmFyIHQ9W2woZSwhMSkrMzIsZS5jb2wrMzIsZS5yb3crMzJdO3JldHVybiB0WzBdPjI1NXx8dFsxXT4yNTV8fHRbMl0+MjU1PyIiOiIbW00iK2godFswXSkraCh0WzFdKStoKHRbMl0pfSxTR1I6ZnVuY3Rpb24oZSl7dmFyIHQ9MD09PWUuYWN0aW9uJiY0IT09ZS5idXR0b24/Im0iOiJNIjtyZXR1cm4iG1s8IitsKGUsITApKyI7IitlLmNvbCsiOyIrZS5yb3crdH19LGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dmFyIHIsaSxuLHM7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2NvcmVTZXJ2aWNlPXQsdGhpcy5fcHJvdG9jb2xzPXt9LHRoaXMuX2VuY29kaW5ncz17fSx0aGlzLl9hY3RpdmVQcm90b2NvbD0iIix0aGlzLl9hY3RpdmVFbmNvZGluZz0iIix0aGlzLl9vblByb3RvY29sQ2hhbmdlPW5ldyBhLkV2ZW50RW1pdHRlcix0aGlzLl9sYXN0RXZlbnQ9bnVsbDt0cnl7Zm9yKHZhciBsPW8oT2JqZWN0LmtleXMoYykpLGg9bC5uZXh0KCk7IWguZG9uZTtoPWwubmV4dCgpKXt2YXIgZj1oLnZhbHVlO3RoaXMuYWRkUHJvdG9jb2woZixjW2ZdKX19Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aCYmIWguZG9uZSYmKGk9bC5yZXR1cm4pJiZpLmNhbGwobCl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXRyeXtmb3IodmFyIF89byhPYmplY3Qua2V5cyh1KSksZD1fLm5leHQoKTshZC5kb25lO2Q9Xy5uZXh0KCkpe3ZhciBwPWQudmFsdWU7dGhpcy5hZGRFbmNvZGluZyhwLHVbcF0pfX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtkJiYhZC5kb25lJiYocz1fLnJldHVybikmJnMuY2FsbChfKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19dGhpcy5yZXNldCgpfXJldHVybiBlLnByb3RvdHlwZS5hZGRQcm90b2NvbD1mdW5jdGlvbihlLHQpe3RoaXMuX3Byb3RvY29sc1tlXT10fSxlLnByb3RvdHlwZS5hZGRFbmNvZGluZz1mdW5jdGlvbihlLHQpe3RoaXMuX2VuY29kaW5nc1tlXT10fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZVByb3RvY29sIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZVByb3RvY29sfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3Byb3RvY29sc1tlXSl0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gcHJvdG9jb2wgIicrZSsnIicpO3RoaXMuX2FjdGl2ZVByb3RvY29sPWUsdGhpcy5fb25Qcm90b2NvbENoYW5nZS5maXJlKHRoaXMuX3Byb3RvY29sc1tlXS5ldmVudHMpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYXJlTW91c2VFdmVudHNBY3RpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0uZXZlbnRzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlRW5jb2RpbmciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlRW5jb2Rpbmd9LHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5fZW5jb2RpbmdzW2VdKXRocm93IG5ldyBFcnJvcigndW5rbm93biBlbmNvZGluZyAiJytlKyciJyk7dGhpcy5fYWN0aXZlRW5jb2Rpbmc9ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuYWN0aXZlUHJvdG9jb2w9Ik5PTkUiLHRoaXMuYWN0aXZlRW5jb2Rpbmc9IkRFRkFVTFQiLHRoaXMuX2xhc3RFdmVudD1udWxsfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uUHJvdG9jb2xDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Qcm90b2NvbENoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS50cmlnZ2VyTW91c2VFdmVudD1mdW5jdGlvbihlKXtpZihlLmNvbDwwfHxlLmNvbD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfHxlLnJvdzwwfHxlLnJvdz49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKXJldHVybiExO2lmKDQ9PT1lLmJ1dHRvbiYmMzI9PT1lLmFjdGlvbilyZXR1cm4hMTtpZigzPT09ZS5idXR0b24mJjMyIT09ZS5hY3Rpb24pcmV0dXJuITE7aWYoNCE9PWUuYnV0dG9uJiYoMj09PWUuYWN0aW9ufHwzPT09ZS5hY3Rpb24pKXJldHVybiExO2lmKGUuY29sKyssZS5yb3crKywzMj09PWUuYWN0aW9uJiZ0aGlzLl9sYXN0RXZlbnQmJnRoaXMuX2NvbXBhcmVFdmVudHModGhpcy5fbGFzdEV2ZW50LGUpKXJldHVybiExO2lmKCF0aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLnJlc3RyaWN0KGUpKXJldHVybiExO3ZhciB0PXRoaXMuX2VuY29kaW5nc1t0aGlzLl9hY3RpdmVFbmNvZGluZ10oZSk7cmV0dXJuIHQmJigiREVGQVVMVCI9PT10aGlzLl9hY3RpdmVFbmNvZGluZz90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyQmluYXJ5RXZlbnQodCk6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSksdGhpcy5fbGFzdEV2ZW50PWUsITB9LGUucHJvdG90eXBlLmV4cGxhaW5FdmVudHM9ZnVuY3Rpb24oZSl7cmV0dXJue2Rvd246ISEoMSZlKSx1cDohISgyJmUpLGRyYWc6ISEoNCZlKSxtb3ZlOiEhKDgmZSksd2hlZWw6ISEoMTYmZSl9fSxlLnByb3RvdHlwZS5fY29tcGFyZUV2ZW50cz1mdW5jdGlvbihlLHQpe3JldHVybiBlLmNvbD09PXQuY29sJiZlLnJvdz09PXQucm93JiZlLmJ1dHRvbj09PXQuYnV0dG9uJiZlLmFjdGlvbj09PXQuYWN0aW9uJiZlLmN0cmw9PT10LmN0cmwmJmUuYWx0PT09dC5hbHQmJmUuc2hpZnQ9PT10LnNoaWZ0fSxpKFtuKDAscy5JQnVmZmVyU2VydmljZSksbigxLHMuSUNvcmVTZXJ2aWNlKV0sZSl9KCk7dC5Db3JlTW91c2VTZXJ2aWNlPWZ9LDY5NzU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZVNlcnZpY2U9dm9pZCAwO3ZhciBhPXIoMjU4NSksYz1yKDg0NjApLGw9cigxNDM5KSxoPXIoODQ0KSx1PU9iamVjdC5mcmVlemUoe2luc2VydE1vZGU6ITF9KSxmPU9iamVjdC5mcmVlemUoe2FwcGxpY2F0aW9uQ3Vyc29yS2V5czohMSxhcHBsaWNhdGlvbktleXBhZDohMSxicmFja2V0ZWRQYXN0ZU1vZGU6ITEsb3JpZ2luOiExLHJldmVyc2VXcmFwYXJvdW5kOiExLHNlbmRGb2N1czohMSx3cmFwYXJvdW5kOiEwfSksXz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4pe3ZhciBvPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5fYnVmZmVyU2VydmljZT1yLG8uX2xvZ1NlcnZpY2U9aSxvLl9vcHRpb25zU2VydmljZT1uLG8uaXNDdXJzb3JJbml0aWFsaXplZD0hMSxvLmlzQ3Vyc29ySGlkZGVuPSExLG8uX29uRGF0YT1vLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksby5fb25Vc2VySW5wdXQ9by5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLG8uX29uQmluYXJ5PW8ucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxvLl9zY3JvbGxUb0JvdHRvbT10LG8ucmVnaXN0ZXIoe2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gby5fc2Nyb2xsVG9Cb3R0b209dm9pZCAwfX0pLG8ubW9kZXM9KDAsbC5jbG9uZSkodSksby5kZWNQcml2YXRlTW9kZXM9KDAsbC5jbG9uZSkoZiksb31yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EYXRhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGF0YS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uVXNlcklucHV0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uVXNlcklucHV0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CaW5hcnkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CaW5hcnkuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLm1vZGVzPSgwLGwuY2xvbmUpKHUpLHRoaXMuZGVjUHJpdmF0ZU1vZGVzPSgwLGwuY2xvbmUpKGYpfSx0LnByb3RvdHlwZS50cmlnZ2VyRGF0YUV2ZW50PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ITEpLCF0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRpc2FibGVTdGRpbil7dmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXI7ci55YmFzZSE9PXIueWRpc3AmJnRoaXMuX3Njcm9sbFRvQm90dG9tKCksdCYmdGhpcy5fb25Vc2VySW5wdXQuZmlyZSgpLHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ3NlbmRpbmcgZGF0YSAiJytlKyciJywoZnVuY3Rpb24oKXtyZXR1cm4gZS5zcGxpdCgiIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApfSkpfSkpLHRoaXMuX29uRGF0YS5maXJlKGUpfX0sdC5wcm90b3R5cGUudHJpZ2dlckJpbmFyeUV2ZW50PWZ1bmN0aW9uKGUpe3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZGlzYWJsZVN0ZGlufHwodGhpcy5fbG9nU2VydmljZS5kZWJ1Zygnc2VuZGluZyBiaW5hcnkgIicrZSsnIicsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuc3BsaXQoIiIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKX0pKX0pKSx0aGlzLl9vbkJpbmFyeS5maXJlKGUpKX0sbyhbcygxLGEuSUJ1ZmZlclNlcnZpY2UpLHMoMixhLklMb2dTZXJ2aWNlKSxzKDMsYS5JT3B0aW9uc1NlcnZpY2UpXSx0KX0oaC5EaXNwb3NhYmxlKTt0LkNvcmVTZXJ2aWNlPV99LDkwNzQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmblswXSl0aHJvdyBuWzFdO3JldHVybiBuWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6YSgwKSx0aHJvdzphKDEpLHJldHVybjphKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYob1tTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxvO2Z1bmN0aW9uIGEobyl7cmV0dXJuIGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihvKXtpZihyKXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZihyPTEsaSYmKG49MiZvWzBdP2kucmV0dXJuOm9bMF0/aS50aHJvd3x8KChuPWkucmV0dXJuKSYmbi5jYWxsKGkpLDApOmkubmV4dCkmJiEobj1uLmNhbGwoaSxvWzFdKSkuZG9uZSlyZXR1cm4gbjtzd2l0Y2goaT0wLG4mJihvPVsyJm9bMF0sbi52YWx1ZV0pLG9bMF0pe2Nhc2UgMDpjYXNlIDE6bj1vO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTpvWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssaT1vWzFdLG89WzBdO2NvbnRpbnVlO2Nhc2UgNzpvPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoKG49KG49cy50cnlzKS5sZW5ndGg+MCYmbltuLmxlbmd0aC0xXSl8fDYhPT1vWzBdJiYyIT09b1swXSkpe3M9MDtjb250aW51ZX1pZigzPT09b1swXSYmKCFufHxvWzFdPm5bMF0mJm9bMV08blszXSkpe3MubGFiZWw9b1sxXTticmVha31pZig2PT09b1swXSYmcy5sYWJlbDxuWzFdKXtzLmxhYmVsPW5bMV0sbj1vO2JyZWFrfWlmKG4mJnMubGFiZWw8blsyXSl7cy5sYWJlbD1uWzJdLHMub3BzLnB1c2gobyk7YnJlYWt9blsyXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfW89dC5jYWxsKGUscyl9Y2F0Y2goZSl7bz1bNixlXSxpPTB9ZmluYWxseXtyPW49MH1pZig1Jm9bMF0pdGhyb3cgb1sxXTtyZXR1cm57dmFsdWU6b1swXT9vWzFdOnZvaWQgMCxkb25lOiEwfX0oW28sYV0pfX19LHM9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRlY29yYXRpb25TZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDgwNTUpLGM9cig4NDYwKSxsPXIoODQ0KSxoPXIoNjEwNiksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiB0Ll9kZWNvcmF0aW9ucz1uZXcgaC5Tb3J0ZWRMaXN0KChmdW5jdGlvbihlKXtyZXR1cm4gZS5tYXJrZXIubGluZX0pKSx0Ll9vbkRlY29yYXRpb25SZWdpc3RlcmVkPXQucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSx0Ll9vbkRlY29yYXRpb25SZW1vdmVkPXQucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSx0fXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRlY29yYXRpb25SZWdpc3RlcmVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGVjb3JhdGlvblJlZ2lzdGVyZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRlY29yYXRpb25SZW1vdmVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGVjb3JhdGlvblJlbW92ZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJkZWNvcmF0aW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZWdpc3RlckRlY29yYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZS5tYXJrZXIuaXNEaXNwb3NlZCl7dmFyIHI9bmV3IGYoZSk7aWYocil7dmFyIGk9ci5tYXJrZXIub25EaXNwb3NlKChmdW5jdGlvbigpe3JldHVybiByLmRpc3Bvc2UoKX0pKTtyLm9uRGlzcG9zZSgoZnVuY3Rpb24oKXtyJiYodC5fZGVjb3JhdGlvbnMuZGVsZXRlKHIpJiZ0Ll9vbkRlY29yYXRpb25SZW1vdmVkLmZpcmUociksaS5kaXNwb3NlKCkpfSkpLHRoaXMuX2RlY29yYXRpb25zLmluc2VydChyKSx0aGlzLl9vbkRlY29yYXRpb25SZWdpc3RlcmVkLmZpcmUocil9cmV0dXJuIHJ9fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1zKHRoaXMuX2RlY29yYXRpb25zLnZhbHVlcygpKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSlpLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGVjb3JhdGlvbnMuY2xlYXIoKX0sdC5wcm90b3R5cGUuZ2V0RGVjb3JhdGlvbnNBdExpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIG8odGhpcywoZnVuY3Rpb24odCl7cmV0dXJuWzIsdGhpcy5fZGVjb3JhdGlvbnMuZ2V0S2V5SXRlcmF0b3IoZSldfSkpfSx0LnByb3RvdHlwZS5nZXREZWNvcmF0aW9uc0F0Q2VsbD1mdW5jdGlvbihlLHQscil7dmFyIGksbixhLGMsbCxoLHUsZixfLGQscDtyZXR1cm4gbyh0aGlzLChmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOmk9MCxuPTAsby5sYWJlbD0xO2Nhc2UgMTpvLnRyeXMucHVzaChbMSw2LDcsOF0pLGE9cyh0aGlzLl9kZWNvcmF0aW9ucy5nZXRLZXlJdGVyYXRvcih0KSksYz1hLm5leHQoKSxvLmxhYmVsPTI7Y2FzZSAyOnJldHVybiBjLmRvbmU/WzMsNV06KGw9Yy52YWx1ZSxpPW51bGwhPT0oXz1sLm9wdGlvbnMueCkmJnZvaWQgMCE9PV8/XzowLG49aSsobnVsbCE9PShkPWwub3B0aW9ucy53aWR0aCkmJnZvaWQgMCE9PWQ/ZDoxKSwhKGU+PWkmJmU8bil8fHImJihudWxsIT09KHA9bC5vcHRpb25zLmxheWVyKSYmdm9pZCAwIT09cD9wOiJib3R0b20iKSE9PXI/WzMsNF06WzQsbF0pO2Nhc2UgMzpvLnNlbnQoKSxvLmxhYmVsPTQ7Y2FzZSA0OnJldHVybiBjPWEubmV4dCgpLFszLDJdO2Nhc2UgNTpyZXR1cm5bMyw4XTtjYXNlIDY6cmV0dXJuIGg9by5zZW50KCksdT17ZXJyb3I6aH0sWzMsOF07Y2FzZSA3OnRyeXtjJiYhYy5kb25lJiYoZj1hLnJldHVybikmJmYuY2FsbChhKX1maW5hbGx5e2lmKHUpdGhyb3cgdS5lcnJvcn1yZXR1cm5bN107Y2FzZSA4OnJldHVyblsyXX19KSl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9cyh0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKSksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpe3ZhciBuPWkudmFsdWU7dGhpcy5fb25EZWNvcmF0aW9uUmVtb3ZlZC5maXJlKG4pfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5yZXNldCgpfSx0fShsLkRpc3Bvc2FibGUpO3QuRGVjb3JhdGlvblNlcnZpY2U9dTt2YXIgZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5vcHRpb25zPXQsci5pc0Rpc3Bvc2VkPSExLHIub25SZW5kZXJFbWl0dGVyPXIucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxyLm9uUmVuZGVyPXIub25SZW5kZXJFbWl0dGVyLmV2ZW50LHIuX29uRGlzcG9zZT1yLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksci5vbkRpc3Bvc2U9ci5fb25EaXNwb3NlLmV2ZW50LHIuX2NhY2hlZEJnPW51bGwsci5fY2FjaGVkRmc9bnVsbCxyLm1hcmtlcj10Lm1hcmtlcixyLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMmJiFyLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24mJihyLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb249ImZ1bGwiKSxyfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJiYWNrZ3JvdW5kQ29sb3JSR0IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2NhY2hlZEJnJiYodGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvcj90aGlzLl9jYWNoZWRCZz1hLmNzcy50b0NvbG9yKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3IpOnRoaXMuX2NhY2hlZEJnPXZvaWQgMCksdGhpcy5fY2FjaGVkQmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJmb3JlZ3JvdW5kQ29sb3JSR0IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2NhY2hlZEZnJiYodGhpcy5vcHRpb25zLmZvcmVncm91bmRDb2xvcj90aGlzLl9jYWNoZWRGZz1hLmNzcy50b0NvbG9yKHRoaXMub3B0aW9ucy5mb3JlZ3JvdW5kQ29sb3IpOnRoaXMuX2NhY2hlZEZnPXZvaWQgMCksdGhpcy5fY2FjaGVkRmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2lzRGlzcG9zZWR8fCh0aGlzLl9pc0Rpc3Bvc2VkPSEwLHRoaXMuX29uRGlzcG9zZS5maXJlKCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpKX0sdH0obC5EaXNwb3NhYmxlKX0sMzczMDpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRpcnR5Um93U2VydmljZT12b2lkIDA7dmFyIG89cigyNTg1KSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5jbGVhclJhbmdlKCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwic3RhcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhcnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJlbmQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5kfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmNsZWFyUmFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9zdGFydD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LHRoaXMuX2VuZD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSxlLnByb3RvdHlwZS5tYXJrRGlydHk9ZnVuY3Rpb24oZSl7ZTx0aGlzLl9zdGFydD90aGlzLl9zdGFydD1lOmU+dGhpcy5fZW5kJiYodGhpcy5fZW5kPWUpfSxlLnByb3RvdHlwZS5tYXJrUmFuZ2VEaXJ0eT1mdW5jdGlvbihlLHQpe2lmKGU+dCl7dmFyIHI9ZTtlPXQsdD1yfWU8dGhpcy5fc3RhcnQmJih0aGlzLl9zdGFydD1lKSx0PnRoaXMuX2VuZCYmKHRoaXMuX2VuZD10KX0sZS5wcm90b3R5cGUubWFya0FsbERpcnR5PWZ1bmN0aW9uKCl7dGhpcy5tYXJrUmFuZ2VEaXJ0eSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKX0saShbbigwLG8uSUJ1ZmZlclNlcnZpY2UpXSxlKX0oKTt0LkRpcnR5Um93U2VydmljZT1zfSw0MzQ4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX0sbj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LG89dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQscil7aWYocnx8Mj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpLG49MCxvPXQubGVuZ3RoO248bztuKyspIWkmJm4gaW4gdHx8KGl8fChpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCxuKSksaVtuXT10W25dKTtyZXR1cm4gZS5jb25jYXQoaXx8QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5JbnN0YW50aWF0aW9uU2VydmljZT10LlNlcnZpY2VDb2xsZWN0aW9uPXZvaWQgMDt2YXIgcz1yKDI1ODUpLGE9cig4MzQzKSxjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZSx0LHI9W10sbz0wO288YXJndW1lbnRzLmxlbmd0aDtvKyspcltvXT1hcmd1bWVudHNbb107dGhpcy5fZW50cmllcz1uZXcgTWFwO3RyeXtmb3IodmFyIHM9aShyKSxhPXMubmV4dCgpOyFhLmRvbmU7YT1zLm5leHQoKSl7dmFyIGM9bihhLnZhbHVlLDIpLGw9Y1swXSxoPWNbMV07dGhpcy5zZXQobCxoKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7YSYmIWEuZG9uZSYmKHQ9cy5yZXR1cm4pJiZ0LmNhbGwocyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX1yZXR1cm4gZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZW50cmllcy5nZXQoZSk7cmV0dXJuIHRoaXMuX2VudHJpZXMuc2V0KGUsdCkscn0sZS5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlKXt0aGlzLl9lbnRyaWVzLmZvckVhY2goKGZ1bmN0aW9uKHQscil7cmV0dXJuIGUocix0KX0pKX0sZS5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnRyaWVzLmhhcyhlKX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9lbnRyaWVzLmdldChlKX0sZX0oKTt0LlNlcnZpY2VDb2xsZWN0aW9uPWM7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fc2VydmljZXM9bmV3IGMsdGhpcy5fc2VydmljZXMuc2V0KHMuSUluc3RhbnRpYXRpb25TZXJ2aWNlLHRoaXMpfXJldHVybiBlLnByb3RvdHlwZS5zZXRTZXJ2aWNlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fc2VydmljZXMuc2V0KGUsdCl9LGUucHJvdG90eXBlLmdldFNlcnZpY2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NlcnZpY2VzLmdldChlKX0sZS5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2U9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHIscz1bXSxjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylzW2MtMV09YXJndW1lbnRzW2NdO3ZhciBsPSgwLGEuZ2V0U2VydmljZURlcGVuZGVuY2llcykoZSkuc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5pbmRleC10LmluZGV4fSkpLGg9W107dHJ5e2Zvcih2YXIgdT1pKGwpLGY9dS5uZXh0KCk7IWYuZG9uZTtmPXUubmV4dCgpKXt2YXIgXz1mLnZhbHVlLGQ9dGhpcy5fc2VydmljZXMuZ2V0KF8uaWQpO2lmKCFkKXRocm93IG5ldyBFcnJvcigiW2NyZWF0ZUluc3RhbmNlXSAiK2UubmFtZSsiIGRlcGVuZHMgb24gVU5LTk9XTiBzZXJ2aWNlICIrXy5pZCsiLiIpO2gucHVzaChkKX19Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKHI9dS5yZXR1cm4pJiZyLmNhbGwodSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fXZhciBwPWwubGVuZ3RoPjA/bFswXS5pbmRleDpzLmxlbmd0aDtpZihzLmxlbmd0aCE9PXApdGhyb3cgbmV3IEVycm9yKCJbY3JlYXRlSW5zdGFuY2VdIEZpcnN0IHNlcnZpY2UgZGVwZW5kZW5jeSBvZiAiK2UubmFtZSsiIGF0IHBvc2l0aW9uICIrKHArMSkrIiBjb25mbGljdHMgd2l0aCAiK3MubGVuZ3RoKyIgc3RhdGljIGFyZ3VtZW50cyIpO3JldHVybiBuZXcoZS5iaW5kLmFwcGx5KGUsbyhbdm9pZCAwXSxuKG8obyhbXSxuKHMpLCExKSxuKGgpLCExKSksITEpKSl9LGV9KCk7dC5JbnN0YW50aWF0aW9uU2VydmljZT1sfSw3ODY2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sbz10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LHM9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQscil7aWYocnx8Mj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpLG49MCxvPXQubGVuZ3RoO248bztuKyspIWkmJm4gaW4gdHx8KGl8fChpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCxuKSksaVtuXT10W25dKTtyZXR1cm4gZS5jb25jYXQoaXx8QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Mb2dTZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDI1ODUpLGM9e2RlYnVnOmEuTG9nTGV2ZWxFbnVtLkRFQlVHLGluZm86YS5Mb2dMZXZlbEVudW0uSU5GTyx3YXJuOmEuTG9nTGV2ZWxFbnVtLldBUk4sZXJyb3I6YS5Mb2dMZXZlbEVudW0uRVJST1Isb2ZmOmEuTG9nTGV2ZWxFbnVtLk9GRn0sbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9dGhpczt0aGlzLl9vcHRpb25zU2VydmljZT1lLHRoaXMubG9nTGV2ZWw9YS5Mb2dMZXZlbEVudW0uT0ZGLHRoaXMuX3VwZGF0ZUxvZ0xldmVsKCksdGhpcy5fb3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKGUpeyJsb2dMZXZlbCI9PT1lJiZ0Ll91cGRhdGVMb2dMZXZlbCgpfSkpfXJldHVybiBlLnByb3RvdHlwZS5fdXBkYXRlTG9nTGV2ZWw9ZnVuY3Rpb24oKXt0aGlzLmxvZ0xldmVsPWNbdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sb2dMZXZlbF19LGUucHJvdG90eXBlLl9ldmFsTGF6eU9wdGlvbmFsUGFyYW1zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKSJmdW5jdGlvbiI9PXR5cGVvZiBlW3RdJiYoZVt0XT1lW3RdKCkpfSxlLnByb3RvdHlwZS5fbG9nPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9ldmFsTGF6eU9wdGlvbmFsUGFyYW1zKHIpLGUuY2FsbC5hcHBseShlLHMoW2NvbnNvbGUsInh0ZXJtLmpzOiAiK3RdLG8ociksITEpKX0sZS5wcm90b3R5cGUuZGVidWc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5sb2dMZXZlbDw9YS5Mb2dMZXZlbEVudW0uREVCVUcmJnRoaXMuX2xvZyhjb25zb2xlLmxvZyxlLHQpfSxlLnByb3RvdHlwZS5pbmZvPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO3RoaXMubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLklORk8mJnRoaXMuX2xvZyhjb25zb2xlLmluZm8sZSx0KX0sZS5wcm90b3R5cGUud2Fybj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLmxvZ0xldmVsPD1hLkxvZ0xldmVsRW51bS5XQVJOJiZ0aGlzLl9sb2coY29uc29sZS53YXJuLGUsdCl9LGUucHJvdG90eXBlLmVycm9yPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO3RoaXMubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLkVSUk9SJiZ0aGlzLl9sb2coY29uc29sZS5lcnJvcixlLHQpfSxpKFtuKDAsYS5JT3B0aW9uc1NlcnZpY2UpXSxlKX0oKTt0LkxvZ1NlcnZpY2U9bH0sNzMwMjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2Fzc2lnbnx8ZnVuY3Rpb24oKXtyZXR1cm4gaT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQscj0xLGk9YXJndW1lbnRzLmxlbmd0aDtyPGk7cisrKWZvcih2YXIgbiBpbiB0PWFyZ3VtZW50c1tyXSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSk7cmV0dXJuIGV9LGkuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5PcHRpb25zU2VydmljZT10LkRFRkFVTFRfT1BUSU9OUz10LkRFRkFVTFRfQkVMTF9TT1VORD12b2lkIDA7dmFyIG49cig4NDYwKSxvPXIoNjExNCk7dC5ERUZBVUxUX0JFTExfU09VTkQ9ImRhdGE6YXVkaW8vbXAzO2Jhc2U2NCxTVVF6QkFBQUFBQUFJMVJUVTBVQUFBQVBBQUFEVEdGMlpqVTRMak15TGpFd05BQUFBQUFBQUFBQUFBQUEvL3RReEFBREI4QWhTbXhoSUlFVkNTaUpyRENRQlRjdTNVckFJd1Vka1JnUWJGQVpDMUNRRXdUSjltalJ2QkE0VU9MRDhuS1ZPV2ZoK1VsSzN6LzE3N09YcmZPZEtsN3B5bjNYZi8vV3JleVRSVW9BV2dCZ2tPQUdiWkhCZ0cxT0Y2ek04MkRXYlphVW1NQnB0Z1FoR2pzeVlxYzlhZTlYRnoyODA5NDhOTUJXSW5sanl6c05SRkxQV2RuWkdXcmRkRHNqSzF1bnVTclZOOWpKc0s4S3VRdFFDdE1CakNFdEltSVNkTktKT29wSXBCRnBOU01iSUhDU1JwUlI1aWFralRpeXpMaGNoVVVCd0NneUtpd2VCdi83VXNRYmc4aXNWTm9NUE1qQUFBQTBnQUFBQkVWRkdtZ3FLLy8vLzliUC82WEN5a3hCVFVVekxqRXdNS3FxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxIix0LkRFRkFVTFRfT1BUSU9OUz17Y29sczo4MCxyb3dzOjI0LGN1cnNvckJsaW5rOiExLGN1cnNvclN0eWxlOiJibG9jayIsY3Vyc29yV2lkdGg6MSxjdXN0b21HbHlwaHM6ITAsYmVsbFNvdW5kOnQuREVGQVVMVF9CRUxMX1NPVU5ELGJlbGxTdHlsZToibm9uZSIsZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnM6ITAsZmFzdFNjcm9sbE1vZGlmaWVyOiJhbHQiLGZhc3RTY3JvbGxTZW5zaXRpdml0eTo1LGZvbnRGYW1pbHk6ImNvdXJpZXItbmV3LCBjb3VyaWVyLCBtb25vc3BhY2UiLGZvbnRTaXplOjE1LGZvbnRXZWlnaHQ6Im5vcm1hbCIsZm9udFdlaWdodEJvbGQ6ImJvbGQiLGxpbmVIZWlnaHQ6MSxsaW5rVG9vbHRpcEhvdmVyRHVyYXRpb246NTAwLGxldHRlclNwYWNpbmc6MCxsb2dMZXZlbDoiaW5mbyIsc2Nyb2xsYmFjazoxZTMsc2Nyb2xsU2Vuc2l0aXZpdHk6MSxzY3JlZW5SZWFkZXJNb2RlOiExLG1hY09wdGlvbklzTWV0YTohMSxtYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjohMSxtaW5pbXVtQ29udHJhc3RSYXRpbzoxLGRpc2FibGVTdGRpbjohMSxhbGxvd1Byb3Bvc2VkQXBpOiEwLGFsbG93VHJhbnNwYXJlbmN5OiExLHRhYlN0b3BXaWR0aDo4LHRoZW1lOnt9LHJpZ2h0Q2xpY2tTZWxlY3RzV29yZDpvLmlzTWFjLHJlbmRlcmVyVHlwZToiY2FudmFzIix3aW5kb3dPcHRpb25zOnt9LHdpbmRvd3NNb2RlOiExLHdvcmRTZXBhcmF0b3I6IiAoKVtde30nLFwiYCIsYWx0Q2xpY2tNb3Zlc0N1cnNvcjohMCxjb252ZXJ0RW9sOiExLHRlcm1OYW1lOiJ4dGVybSIsY2FuY2VsRXZlbnRzOiExLG92ZXJ2aWV3UnVsZXJXaWR0aDp2b2lkIDB9O3ZhciBzPVsibm9ybWFsIiwiYm9sZCIsIjEwMCIsIjIwMCIsIjMwMCIsIjQwMCIsIjUwMCIsIjYwMCIsIjcwMCIsIjgwMCIsIjkwMCJdLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX29uT3B0aW9uQ2hhbmdlPW5ldyBuLkV2ZW50RW1pdHRlcjt2YXIgcj1pKHt9LHQuREVGQVVMVF9PUFRJT05TKTtmb3IodmFyIG8gaW4gZSlpZihvIGluIHIpdHJ5e3ZhciBzPWVbb107cltvXT10aGlzLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKG8scyl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX10aGlzLnJhd09wdGlvbnM9cix0aGlzLm9wdGlvbnM9aSh7fSxyKSx0aGlzLl9zZXR1cE9wdGlvbnMoKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbk9wdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbk9wdGlvbkNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fc2V0dXBPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyxyPWZ1bmN0aW9uKHIpe2lmKCEociBpbiB0LkRFRkFVTFRfT1BUSU9OUykpdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb24gd2l0aCBrZXkgIicrcisnIicpO3JldHVybiBlLnJhd09wdGlvbnNbcl19LGk9ZnVuY3Rpb24ocixpKXtpZighKHIgaW4gdC5ERUZBVUxUX09QVElPTlMpKXRocm93IG5ldyBFcnJvcignTm8gb3B0aW9uIHdpdGgga2V5ICInK3IrJyInKTtpPWUuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24ocixpKSxlLnJhd09wdGlvbnNbcl0hPT1pJiYoZS5yYXdPcHRpb25zW3JdPWksZS5fb25PcHRpb25DaGFuZ2UuZmlyZShyKSl9O2Zvcih2YXIgbiBpbiB0aGlzLnJhd09wdGlvbnMpe3ZhciBvPXtnZXQ6ci5iaW5kKHRoaXMsbiksc2V0OmkuYmluZCh0aGlzLG4pfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vcHRpb25zLG4sbyl9fSxlLnByb3RvdHlwZS5zZXRPcHRpb249ZnVuY3Rpb24oZSx0KXt0aGlzLm9wdGlvbnNbZV09dH0sZS5wcm90b3R5cGUuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb249ZnVuY3Rpb24oZSxyKXtzd2l0Y2goZSl7Y2FzZSJiZWxsU3R5bGUiOmNhc2UiY3Vyc29yU3R5bGUiOmNhc2UicmVuZGVyZXJUeXBlIjpjYXNlIndvcmRTZXBhcmF0b3IiOnJ8fChyPXQuREVGQVVMVF9PUFRJT05TW2VdKTticmVhaztjYXNlImZvbnRXZWlnaHQiOmNhc2UiZm9udFdlaWdodEJvbGQiOmlmKCJudW1iZXIiPT10eXBlb2YgciYmMTw9ciYmcjw9MWUzKWJyZWFrO3I9cy5pbmNsdWRlcyhyKT9yOnQuREVGQVVMVF9PUFRJT05TW2VdO2JyZWFrO2Nhc2UiY3Vyc29yV2lkdGgiOnI9TWF0aC5mbG9vcihyKTtjYXNlImxpbmVIZWlnaHQiOmNhc2UidGFiU3RvcFdpZHRoIjppZihyPDEpdGhyb3cgbmV3IEVycm9yKGUrIiBjYW5ub3QgYmUgbGVzcyB0aGFuIDEsIHZhbHVlOiAiK3IpO2JyZWFrO2Nhc2UibWluaW11bUNvbnRyYXN0UmF0aW8iOnI9TWF0aC5tYXgoMSxNYXRoLm1pbigyMSxNYXRoLnJvdW5kKDEwKnIpLzEwKSk7YnJlYWs7Y2FzZSJzY3JvbGxiYWNrIjppZigocj1NYXRoLm1pbihyLDQyOTQ5NjcyOTUpKTwwKXRocm93IG5ldyBFcnJvcihlKyIgY2Fubm90IGJlIGxlc3MgdGhhbiAwLCB2YWx1ZTogIityKTticmVhaztjYXNlImZhc3RTY3JvbGxTZW5zaXRpdml0eSI6Y2FzZSJzY3JvbGxTZW5zaXRpdml0eSI6aWYocjw9MCl0aHJvdyBuZXcgRXJyb3IoZSsiIGNhbm5vdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gMCwgdmFsdWU6ICIrcik7Y2FzZSJyb3dzIjpjYXNlImNvbHMiOmlmKCFyJiYwIT09cil0aHJvdyBuZXcgRXJyb3IoZSsiIG11c3QgYmUgbnVtZXJpYywgdmFsdWU6ICIrcil9cmV0dXJuIHJ9LGUucHJvdG90eXBlLmdldE9wdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5vcHRpb25zW2VdfSxlfSgpO3QuT3B0aW9uc1NlcnZpY2U9YX0sODM0MzooZSx0KT0+e2Z1bmN0aW9uIHIoZSx0LHIpe3QuZGkkdGFyZ2V0PT09dD90LmRpJGRlcGVuZGVuY2llcy5wdXNoKHtpZDplLGluZGV4OnJ9KToodC5kaSRkZXBlbmRlbmNpZXM9W3tpZDplLGluZGV4OnJ9XSx0LmRpJHRhcmdldD10KX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5jcmVhdGVEZWNvcmF0b3I9dC5nZXRTZXJ2aWNlRGVwZW5kZW5jaWVzPXQuc2VydmljZVJlZ2lzdHJ5PXZvaWQgMCx0LnNlcnZpY2VSZWdpc3RyeT1uZXcgTWFwLHQuZ2V0U2VydmljZURlcGVuZGVuY2llcz1mdW5jdGlvbihlKXtyZXR1cm4gZS5kaSRkZXBlbmRlbmNpZXN8fFtdfSx0LmNyZWF0ZURlY29yYXRvcj1mdW5jdGlvbihlKXtpZih0LnNlcnZpY2VSZWdpc3RyeS5oYXMoZSkpcmV0dXJuIHQuc2VydmljZVJlZ2lzdHJ5LmdldChlKTt2YXIgaT1mdW5jdGlvbihlLHQsbil7aWYoMyE9PWFyZ3VtZW50cy5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJASVNlcnZpY2VOYW1lLWRlY29yYXRvciBjYW4gb25seSBiZSB1c2VkIHRvIGRlY29yYXRlIGEgcGFyYW1ldGVyIik7cihpLGUsbil9O3JldHVybiBpLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGV9LHQuc2VydmljZVJlZ2lzdHJ5LnNldChlLGkpLGl9fSwyNTg1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5JRGVjb3JhdGlvblNlcnZpY2U9dC5JVW5pY29kZVNlcnZpY2U9dC5JT3B0aW9uc1NlcnZpY2U9dC5JTG9nU2VydmljZT10LkxvZ0xldmVsRW51bT10LklJbnN0YW50aWF0aW9uU2VydmljZT10LklEaXJ0eVJvd1NlcnZpY2U9dC5JQ2hhcnNldFNlcnZpY2U9dC5JQ29yZVNlcnZpY2U9dC5JQ29yZU1vdXNlU2VydmljZT10LklCdWZmZXJTZXJ2aWNlPXZvaWQgMDt2YXIgaSxuPXIoODM0Myk7dC5JQnVmZmVyU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkJ1ZmZlclNlcnZpY2UiKSx0LklDb3JlTW91c2VTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiQ29yZU1vdXNlU2VydmljZSIpLHQuSUNvcmVTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiQ29yZVNlcnZpY2UiKSx0LklDaGFyc2V0U2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkNoYXJzZXRTZXJ2aWNlIiksdC5JRGlydHlSb3dTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiRGlydHlSb3dTZXJ2aWNlIiksdC5JSW5zdGFudGlhdGlvblNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJJbnN0YW50aWF0aW9uU2VydmljZSIpLChpPXQuTG9nTGV2ZWxFbnVtfHwodC5Mb2dMZXZlbEVudW09e30pKVtpLkRFQlVHPTBdPSJERUJVRyIsaVtpLklORk89MV09IklORk8iLGlbaS5XQVJOPTJdPSJXQVJOIixpW2kuRVJST1I9M109IkVSUk9SIixpW2kuT0ZGPTRdPSJPRkYiLHQuSUxvZ1NlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJMb2dTZXJ2aWNlIiksdC5JT3B0aW9uc1NlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJPcHRpb25zU2VydmljZSIpLHQuSVVuaWNvZGVTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiVW5pY29kZVNlcnZpY2UiKSx0LklEZWNvcmF0aW9uU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkRlY29yYXRpb25TZXJ2aWNlIil9LDE0ODA6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlVuaWNvZGVTZXJ2aWNlPXZvaWQgMDt2YXIgaT1yKDg0NjApLG49cigyMjUpLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fcHJvdmlkZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fYWN0aXZlPSIiLHRoaXMuX29uQ2hhbmdlPW5ldyBpLkV2ZW50RW1pdHRlcjt2YXIgZT1uZXcgbi5Vbmljb2RlVjY7dGhpcy5yZWdpc3RlcihlKSx0aGlzLl9hY3RpdmU9ZS52ZXJzaW9uLHRoaXMuX2FjdGl2ZVByb3ZpZGVyPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ2ZXJzaW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9wcm92aWRlcnMpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlVmVyc2lvbiIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmV9LHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5fcHJvdmlkZXJzW2VdKXRocm93IG5ldyBFcnJvcigndW5rbm93biBVbmljb2RlIHZlcnNpb24gIicrZSsnIicpO3RoaXMuX2FjdGl2ZT1lLHRoaXMuX2FjdGl2ZVByb3ZpZGVyPXRoaXMuX3Byb3ZpZGVyc1tlXSx0aGlzLl9vbkNoYW5nZS5maXJlKGUpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3RoaXMuX3Byb3ZpZGVyc1tlLnZlcnNpb25dPWV9LGUucHJvdG90eXBlLndjd2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FjdGl2ZVByb3ZpZGVyLndjd2lkdGgoZSl9LGUucHJvdG90eXBlLmdldFN0cmluZ0NlbGxXaWR0aD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MCxyPWUubGVuZ3RoLGk9MDtpPHI7KytpKXt2YXIgbj1lLmNoYXJDb2RlQXQoaSk7aWYoNTUyOTY8PW4mJm48PTU2MzE5KXtpZigrK2k+PXIpcmV0dXJuIHQrdGhpcy53Y3dpZHRoKG4pO3ZhciBvPWUuY2hhckNvZGVBdChpKTs1NjMyMDw9byYmbzw9NTczNDM/bj0xMDI0KihuLTU1Mjk2KStvLTU2MzIwKzY1NTM2OnQrPXRoaXMud2N3aWR0aChvKX10Kz10aGlzLndjd2lkdGgobil9cmV0dXJuIHR9LGV9KCk7dC5Vbmljb2RlU2VydmljZT1vfX0sdD17fTtyZXR1cm4gZnVuY3Rpb24gcihpKXt2YXIgbj10W2ldO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgbz10W2ldPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtpXS5jYWxsKG8uZXhwb3J0cyxvLG8uZXhwb3J0cyxyKSxvLmV4cG9ydHN9KDQzODkpfSkoKX0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9eHRlcm0uanMubWFwClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9yZXF1aXJlL25vZGVfbW9kdWxlcy94dGVybS9saWIveHRlcm0uanMiXSA9IFtdCgpfY2FuX25hbWUgPSAiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLWZpdC9saWIveHRlcm0tYWRkb24tZml0LmpzIgohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5GaXRBZGRvbj10KCk6ZS5GaXRBZGRvbj10KCl9KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57InVzZSBzdHJpY3QiO3ZhciBlPXs3NzU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5GaXRBZGRvbj12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLl90ZXJtaW5hbD1lfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5maXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3Bvc2VEaW1lbnNpb25zKCk7aWYoZSYmdGhpcy5fdGVybWluYWwpe3ZhciB0PXRoaXMuX3Rlcm1pbmFsLl9jb3JlO3RoaXMuX3Rlcm1pbmFsLnJvd3M9PT1lLnJvd3MmJnRoaXMuX3Rlcm1pbmFsLmNvbHM9PT1lLmNvbHN8fCh0Ll9yZW5kZXJTZXJ2aWNlLmNsZWFyKCksdGhpcy5fdGVybWluYWwucmVzaXplKGUuY29scyxlLnJvd3MpKX19LGUucHJvdG90eXBlLnByb3Bvc2VEaW1lbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5fdGVybWluYWwmJnRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQmJnRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucGFyZW50RWxlbWVudCl7dmFyIGU9dGhpcy5fdGVybWluYWwuX2NvcmU7aWYoMCE9PWUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgmJjAhPT1lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCl7dmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KSxyPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZSgiaGVpZ2h0IikpLGk9TWF0aC5tYXgoMCxwYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoIndpZHRoIikpKSxuPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQpLG89ci0ocGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXRvcCIpKStwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctYm90dG9tIikpKSxhPWktKHBhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1yaWdodCIpKStwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctbGVmdCIpKSktZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aDtyZXR1cm57Y29sczpNYXRoLm1heCgyLE1hdGguZmxvb3IoYS9lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKSkscm93czpNYXRoLm1heCgxLE1hdGguZmxvb3Ioby9lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkpfX19fSxlfSgpO3QuRml0QWRkb249cn19LHQ9e307cmV0dXJuIGZ1bmN0aW9uIHIoaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciBuPXRbaV09e2V4cG9ydHM6e319O3JldHVybiBlW2ldKG4sbi5leHBvcnRzLHIpLG4uZXhwb3J0c30oNzc1KX0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLWFkZG9uLWZpdC5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLWZpdC9saWIveHRlcm0tYWRkb24tZml0LmpzIl0gPSBbXQoKX2Nhbl9uYW1lID0gIi9yZXF1aXJlL25vZGVfbW9kdWxlcy94dGVybS1hZGRvbi13ZWItbGlua3MvbGliL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy5qcyIKIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuV2ViTGlua3NBZGRvbj10KCk6ZS5XZWJMaW5rc0FkZG9uPXQoKX0oc2VsZiwoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9ezY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MaW5rQ29tcHV0ZXI9dC5XZWJMaW5rUHJvdmlkZXI9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsaSxyKXt2b2lkIDA9PT1yJiYocj17fSksdGhpcy5fdGVybWluYWw9ZSx0aGlzLl9yZWdleD10LHRoaXMuX2hhbmRsZXI9aSx0aGlzLl9vcHRpb25zPXJ9cmV0dXJuIGUucHJvdG90eXBlLnByb3ZpZGVMaW5rcz1mdW5jdGlvbihlLHQpe3ZhciBpPXIuY29tcHV0ZUxpbmsoZSx0aGlzLl9yZWdleCx0aGlzLl90ZXJtaW5hbCx0aGlzLl9oYW5kbGVyKTt0KHRoaXMuX2FkZENhbGxiYWNrcyhpKSl9LGUucHJvdG90eXBlLl9hZGRDYWxsYmFja3M9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlYXZlPXQuX29wdGlvbnMubGVhdmUsZS5ob3Zlcj1mdW5jdGlvbihpLHIpe2lmKHQuX29wdGlvbnMuaG92ZXIpe3ZhciBuPWUucmFuZ2U7dC5fb3B0aW9ucy5ob3ZlcihpLHIsbil9fSxlfSkpfSxlfSgpO3QuV2ViTGlua1Byb3ZpZGVyPWk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmNvbXB1dGVMaW5rPWZ1bmN0aW9uKHQsaSxyLG4pe2Zvcih2YXIgbyxhPW5ldyBSZWdFeHAoaS5zb3VyY2UsKGkuZmxhZ3N8fCIiKSsiZyIpLHM9ZS5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAodC0xLCExLHIpLGQ9c1swXSxsPXNbMV0sYz0tMSx1PVtdO251bGwhPT0obz1hLmV4ZWMoZCkpOyl7dmFyIGg9b1sxXTtpZighaCl7Y29uc29sZS5sb2coIm1hdGNoIGZvdW5kIHdpdGhvdXQgY29ycmVzcG9uZGluZyBtYXRjaEluZGV4Iik7YnJlYWt9aWYoYz1kLmluZGV4T2YoaCxjKzEpLGEubGFzdEluZGV4PWMraC5sZW5ndGgsYzwwKWJyZWFrO2Zvcih2YXIgdj1jK2gubGVuZ3RoLGY9bCsxO3Y+ci5jb2xzOyl2LT1yLmNvbHMsZisrO2Zvcih2YXIgcD1jKzEsXz1sKzE7cD5yLmNvbHM7KXAtPXIuY29scyxfKys7dmFyIGs9e3N0YXJ0Ont4OnAseTpffSxlbmQ6e3g6dix5OmZ9fTt1LnB1c2goe3JhbmdlOmssdGV4dDpoLGFjdGl2YXRlOm59KX1yZXR1cm4gdX0sZS5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXA9ZnVuY3Rpb24oZSx0LGkpe3ZhciByLG4sbz0iIjtkb3tpZighKHM9aS5idWZmZXIuYWN0aXZlLmdldExpbmUoZSkpKWJyZWFrO3MuaXNXcmFwcGVkJiZlLS0sbj1zLmlzV3JhcHBlZH13aGlsZShuKTt2YXIgYT1lO2Rve3ZhciBzLGQ9aS5idWZmZXIuYWN0aXZlLmdldExpbmUoZSsxKTtpZihyPSEhZCYmZC5pc1dyYXBwZWQsIShzPWkuYnVmZmVyLmFjdGl2ZS5nZXRMaW5lKGUpKSlicmVhaztvKz1zLnRyYW5zbGF0ZVRvU3RyaW5nKCFyJiZ0KS5zdWJzdHJpbmcoMCxpLmNvbHMpLGUrK313aGlsZShyKTtyZXR1cm5bbyxhXX0sZX0oKTt0LkxpbmtDb21wdXRlcj1yfX0sdD17fTtmdW5jdGlvbiBpKHIpe3ZhciBuPXRbcl07aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBvPXRbcl09e2V4cG9ydHM6e319O3JldHVybiBlW3JdKG8sby5leHBvcnRzLGkpLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4oKCk9Pnt2YXIgZT1yO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLldlYkxpbmtzQWRkb249dm9pZCAwO3ZhciB0PWkoNiksbj1uZXcgUmVnRXhwKCIoPzpefFteXFxkYS16XFwuLV0rKSgoaHR0cHM/OlxcL1xcLykoKChbXFxkYS16XFwuLV0rKVxcLihbYS16XFwuXXsyLDE4fSkpfCgoXFxkezEsM31cXC4pezN9XFxkezEsM30pfChsb2NhbGhvc3QpKSg6XFxkezEsNX0pPygoXFwvW1xcL1xcd1xcLlxcLSV+OitAXSopKihbXjpcIidcXHNdKSk/KFxcP1swLTlcXHdcXFtcXF1cXChcXClcXC9cXD9cXCEjQCQlJicqKyw6O35cXD1cXC5cXC1dKik/KCNbMC05XFx3XFxbXFxdXFwoXFwpXFwvXFw/XFwhI0AkJSYnKissOjt+XFw9XFwuXFwtXSopPykoJHxbXlxcL1xcd1xcLlxcLSVdKykiKTtmdW5jdGlvbiBvKGUsdCl7dmFyIGk9d2luZG93Lm9wZW4oKTtpZihpKXt0cnl7aS5vcGVuZXI9bnVsbH1jYXRjaChlKXt9aS5sb2NhdGlvbi5ocmVmPXR9ZWxzZSBjb25zb2xlLndhcm4oIk9wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCIpfXZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsaSl7dm9pZCAwPT09ZSYmKGU9byksdm9pZCAwPT09dCYmKHQ9e30pLHZvaWQgMD09PWkmJihpPSExKSx0aGlzLl9oYW5kbGVyPWUsdGhpcy5fb3B0aW9ucz10LHRoaXMuX3VzZUxpbmtQcm92aWRlcj1pfXJldHVybiBlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXtpZih0aGlzLl90ZXJtaW5hbD1lLHRoaXMuX3VzZUxpbmtQcm92aWRlciYmInJlZ2lzdGVyTGlua1Byb3ZpZGVyImluIHRoaXMuX3Rlcm1pbmFsKXt2YXIgaT0ocj10aGlzLl9vcHRpb25zKS51cmxSZWdleHx8bjt0aGlzLl9saW5rUHJvdmlkZXI9dGhpcy5fdGVybWluYWwucmVnaXN0ZXJMaW5rUHJvdmlkZXIobmV3IHQuV2ViTGlua1Byb3ZpZGVyKHRoaXMuX3Rlcm1pbmFsLGksdGhpcy5faGFuZGxlcixyKSl9ZWxzZXt2YXIgcjsocj10aGlzLl9vcHRpb25zKS5tYXRjaEluZGV4PTEsdGhpcy5fbGlua01hdGNoZXJJZD10aGlzLl90ZXJtaW5hbC5yZWdpc3RlckxpbmtNYXRjaGVyKG4sdGhpcy5faGFuZGxlcixyKX19LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZTt2b2lkIDAhPT10aGlzLl9saW5rTWF0Y2hlcklkJiZ2b2lkIDAhPT10aGlzLl90ZXJtaW5hbCYmdGhpcy5fdGVybWluYWwuZGVyZWdpc3RlckxpbmtNYXRjaGVyKHRoaXMuX2xpbmtNYXRjaGVySWQpLG51bGw9PT0oZT10aGlzLl9saW5rUHJvdmlkZXIpfHx2b2lkIDA9PT1lfHxlLmRpc3Bvc2UoKX0sZX0oKTtlLldlYkxpbmtzQWRkb249YX0pKCkscn0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLWFkZG9uLXdlYi1saW5rcy5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9saWIveHRlcm0tYWRkb24td2ViLWxpbmtzLmpzIl0gPSBbXQoKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvbm9kZV9tb2R1bGVzL3h0ZXJtL2Nzcy94dGVybS5jc3MiXSA9IFtdCgo=",
        "usr/volcanos/page/index.css": "Ym9keSwgZmllbGRzZXQsIHRhYmxlLCB0ciwgdGgsIHRkIHsgcGFkZGluZzowOyBib3JkZXI6MDsgbWFyZ2luOjA7IH0KYm9keSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGZvbnQtc2l6ZToxNnB4OyB9CmxlZ2VuZCB7IGJhY2tncm91bmQtY29sb3I6Y2FkZXRibHVlOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzowIDIwcHg7IH0Kc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6Y3lhbjsgcGFkZGluZzowIDEwcHg7IGJvcmRlcjowOyB9CnRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB3aWR0aDo0MDBweDsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyBjb2xvcjpibGFjazsgcGFkZGluZzowIDVweDsgYm9yZGVyOjA7IHdpZHRoOjkwcHg7IH0KaW5wdXRbdHlwZT10ZXh0XSB7IGJhY2tncm91bmQtY29sb3I6Y3lhbjsgY29sb3I6YmxhY2s7IHBhZGRpbmc6MCA1cHg7IGJvcmRlcjowOyB3aWR0aDo5MHB4OyB9CmlucHV0W25hbWU9Y21kXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOndoaXRlOyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXVybF0geyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXRleHRdIHsgd2lkdGg6MTYwcHg7IH0KaW5wdXRbbmFtZT1kYXRlXSB7IHdpZHRoOjE1MHB4OyB9CmlucHV0W25hbWU9cGF0aF0geyB3aWR0aDoxNjBweDsgfQppbnB1dFtuYW1lPWxpbmVdIHsgd2lkdGg6NDBweDsgfQppbnB1dFtuYW1lPWxpbWl0XSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1vZmZlbmRdIHsgd2lkdGg6NDhweDsgfQppbnB1dFtuYW1lPWlkXSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1JRF0geyB3aWR0aDo0OHB4OyB9CmlucHV0W3R5cGU9YnV0dG9uXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9b3Blbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9c3RvcF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1kZWxldGVdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9cmVtb3ZlXSB7IGJhY2tncm91bmQtY29sb3I6cmVkOyB9Cgp0YWJsZS5sYXlvdXQgeyBib3JkZXItc3BhY2luZzowOyB9CnRhYmxlLmxheW91dCB0ZCB7IHZlcnRpY2FsLWFsaWduOnRvcDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IGNvbG9yOndoaXRlOyBmb250LXNpemU6MjRweDsgcG9zaXRpb246YWJzb2x1dGU7IHotaW5kZXg6MTA7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZT5kaXYgeyBkaXNwbGF5OnRhYmxlLWNlbGw7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9qZWN0IHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgbGVmdDowcHg7IGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjEwcHg7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9maWxlIHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgcmlnaHQ6MHB4OyBib3JkZXItdG9wLWxlZnQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXkgeyBtYXJnaW4tdG9wOi0xNXB4OyBoZWlnaHQ6MTVweDsgd2lkdGg6MTAwcHg7IHBvc2l0aW9uOnN0aWNreTsgbGVmdDo0MCU7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6MTBweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXk+ZGl2IHsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjEwMHB4OyB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZSg1cHgsIDBweCk7IH0KdGFibGUuY29udGVudCB0aGVhZCB7IHBvc2l0aW9uOnN0aWNreTsgdG9wOjJweDsgfQp0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IHBhZGRpbmc6MnB4IDZweDsgfQp0YWJsZS5jb250ZW50IHRkIHsgcGFkZGluZzoycHggNnB4OyB9CnRhYmxlLmNvbnRlbnQuYWN0aW9uIHRoOmxhc3QtY2hpbGQgeyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KdGFibGUuY29udGVudC5hY3Rpb24gdGQ6bGFzdC1jaGlsZCB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KZGl2LmNvZGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzNDNhMzQ0NTsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGJhY2tncm91bmQtY29sb3I6IzIxNjlhOWE2OyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgNXB4IGJsdWU7IG1hcmdpbjoxMHB4OyB9Cgpmb3JtLm9wdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2LmFjdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2Lm91dHB1dCB7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lml0ZW0geyBwYWRkaW5nOjJweCAxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lmxpc3QgeyBtYXJnaW4tbGVmdDoxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaCB7IHdpZHRoOjEycHg7IGZsb2F0OmxlZnQ7IHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSB0cmFuc2xhdGUoMXB4LCAwcHgpOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaC5vcGVuIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKSB0cmFuc2xhdGUoLTRweCwgNHB4KTsgfQpkaXYub3V0cHV0IGRpdi5wcm9qZWN0IGRpdi56b25lPmRpdi5uYW1lIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IGNvbG9yOndoaXRlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo1cHg7IGNsZWFyOmJvdGg7IH0KZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuaXRlbT5kaXYubmFtZSB7IHBhZGRpbmctbGVmdDoyMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSB7IGZsb2F0OnJpZ2h0OyBjbGVhcjpub25lOyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSBpbnB1dFt0eXBlPXRleHRdIHsgYmFja2dyb3VuZC1jb2xvcjojZmYwMDAwMDA7IHBhZGRpbmctbGVmdDoxMHB4OyBjb2xvcjp3aGl0ZTsgfQoKZmllbGRzZXQucGx1Z2luIHsgYmFja2dyb3VuZC1jb2xvcjojMDYxYzNjOWU7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZmllbGRzZXQuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgcG9zaXRpb246YWJzb2x1dGU7IH0KZmllbGRzZXQuZnVsbCB7IGJhY2tncm91bmQtY29sb3I6IzA3Mzk0N2YyOyBwYWRkaW5nOjA7IG1hcmdpbjowOyBsZWZ0OjA7IHRvcDowOyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LnN0b3J5PmxlZ2VuZCB7IG1hcmdpbjoxMHB4IDA7IH0KZmllbGRzZXQucGx1Zz5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmZpZWxkc2V0LmZsb2F0PmxlZ2VuZCB7IGZsb2F0OmxlZnQ7IG1hcmdpbi1yaWdodDo1cHg7IH0KZmllbGRzZXQuZnVsbD5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW46MDsgbWFyZ2luLXJpZ2h0OjVweDsgfQpmaWVsZHNldC5mbG9hdCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQucGx1Zz5mb3JtLm9wdGlvbiBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuZnVsbCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQgaW5wdXRbdHlwZT1idXR0b25dW25hbWU9Y2xvc2VdeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luIGRpdi5zdGF0dXMgeyBib3JkZXItdG9wOjFweCBzb2xpZCBkYXJrY3lhbjsgfQpmaWVsZHNldC5zdG9yeSBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgZGFya2N5YW47IH0KZmllbGRzZXQub3V0cHV0PmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgpmaWVsZHNldC5pbnB1dC5rZXkgeyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LmlucHV0LmtleSBkaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbnB1dC5rZXkuc2ltcGxlIHRoIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgdGQgeyBtaW4td2lkdGg6NDBweDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5hY3Rpb24gZGl2LnNwYWNlIHsgd2lkdGg6MDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5vdXRwdXQgdGQucHJldiB7IGNvbG9yOmdyYXk7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSBkaXYub3V0cHV0IHRkLm5leHQgeyBjb2xvcjpncmF5OyB9CmZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6MnB4IDEwcHg7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSB0YWJsZSB7IHRleHQtYWxpZ246Y2VudGVyOyB3aWR0aDoyODBweDsgfQoKYm9keT5kaXYuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NXB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi50aXRsZSB7IGNvbG9yOnllbGxvdzsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi50b2FzdCBkaXYuZHVyYXRpb24geyBjb2xvcjpncmF5OyBmbG9hdDpyaWdodDsgfQpib2R5PmRpdi50b2FzdCBkaXYuY29udGVudCB7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjp5ZWxsb3c7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIHsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgbWFyZ2luLWxlZnQ6LTJweDsgaGVpZ2h0OjEwcHg7IGNsZWFyOmJvdGg7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIGRpdi5jdXJyZW50IHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyB9CmJvZHk+ZGl2LmNhcnRlIHsgcGFkZGluZzowOyB9CmJvZHk+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMGUzMzY5YjM7IHBhZGRpbmc6M3B4IDEycHg7IH0KYm9keT5kaXYuY2FydGUgZGl2LnNwYWNlIHsgYm9yZGVyLWJvdHRvbTpzb2xpZCAxcHggZ3JheTsgfQpib2R5PmRpdi5pbnB1dCBkaXYuY29udGVudCB7IG92ZXJmbG93OmF1dG87IH0KYm9keT5kaXYuaW5wdXQgdGQgeyBwYWRkaW5nOjVweDsgfQpib2R5PmRpdi5pbnB1dCBzZWxlY3QgeyB3aWR0aDoxODFweDsgfQpib2R5PmRpdi5pbnB1dCBpbnB1dFt0eXBlPXRleHRdIHsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQgaW5wdXRbbmFtZT1wYXNzd29yZF0geyBwYWRkaW5nOjVweDsgYm9yZGVyOjA7IHdpZHRoOjE3MXB4OyBiYWNrZ3JvdW5kOndoaXRlOyB9CmJvZHk+ZGl2LmlucHV0IGlucHV0W25hbWU9dXNlcm5hbWVdIHsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB3aWR0aDoxNzFweDsgfQpib2R5PmRpdi5pbnB1dCB0ZXh0YXJlYSB7IGhlaWdodDoxMjBweDsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQubG9naW4geyBwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6c3RlZWxibHVlOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuaXRlbSB7IGZsb2F0OmxlZnQ7IH0KYm9keT5kaXYudXBsb2FkIGRpdi5vdXRwdXQgeyBib3JkZXI6c29saWQgMXB4IHJlZDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnByb2dyZXNzIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB3aWR0aDowOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5jb3N0IHsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnN0YXR1cyBkaXYuc2hvdyB7IGZsb2F0OnJpZ2h0OyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5zaXplIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KYm9keT5kaXYudXBsb2FkIGlucHV0W3R5cGU9ZmlsZV0geyB3aWR0aDozMjBweDsgfQoKLyogZm9udCAqLwoqIHsgdGFiLXNpemU6NDsgfQp0ZXh0YXJlYSB7IHRhYi1zaXplOjI7IGhlaWdodDo2MHB4OyB9CmxlZ2VuZCB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozMXB4OyB9CnNlbGVjdCB7IGZvbnQtc2l6ZToxLjFyZW07IGhlaWdodDozMXB4OyB9CmlucHV0IHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IH0KdGFibGUuY29udGVudCB0aCwgdGFibGUuY29udGVudCB0ZCwgZGl2LnpvbmU+ZGl2Lm5hbWUsIGRpdi5pdGVtLCBkaXYuY29kZSwgY29kZS5zdG9yeSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBmb250LXNpemU6MS4xcmVtOyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZGl2LnN0YXR1cz5kaXYuaXRlbT5sYWJlbCB7IGZvbnQtc2l6ZTowLjZyZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgfQpkaXYuc3RhdHVzPmRpdi5pdGVtIHsgcGFkZGluZzo0cHg7IGhlaWdodDoyMnB4OyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnMgeyBwYWRkaW5nOjVweCAxMHB4OyBoZWlnaHQ6MjFweDsgfQpzdmcgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KCi8qIGRpc3BsYXkgKi8KZm9ybS5vcHRpb24sIGRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9Ci5oaWRlLCAuaGlkZGVuLCBmb3JtLm9wdGlvbj5kaXYuaXRlbT5sYWJlbCwgZGl2LmFjdGlvbj5kaXYuaXRlbT5sYWJlbCwgZmllbGRzZXQucGFuZWw+bGVnZW5kLCBmaWVsZHNldC5vdXRwdXQ+bGVnZW5kLCBmaWVsZHNldC5pbnB1dD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZGl2Lm91dHB1dCwgZGl2LnN0YXR1cywgZGl2LmNvbnRlbnQsIGRpdi5wcm9qZWN0IGRpdi5pdGVtLCBkaXYuaXRlbS50ZXh0YXJlYSwgZGl2LmNvZGUsIGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdLCBwLnN0b3J5LCBoMSwgaDIsIGgzIHsgY2xlYXI6Ym90aDsgfQpmb3JtLm9wdGlvbiwgZm9ybS5vcHRpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24sIGRpdi5hY3Rpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24+ZGl2LnRhYnMsIGRpdi5wcm9qZWN0LCBkaXYuc3RhdHVzPmRpdi5pdGVtIHsgZmxvYXQ6bGVmdDsgfQpkaXYuY29kZSwgZGl2LnN0b3J5LCBkaXYuYWN0aW9uLCBkaXYub3V0cHV0LCBkaXYuc3RhdHVzLCBkaXYucHJvamVjdCwgZGl2LmNvbnRlbnQsIGRpdi5wcm9maWxlLCBkaXYuZGlzcGxheSwgdGFibGUuY29udGVudCwgdGFibGUuY29udGVudCB0ZCwgYm9keT5kaXYudG9hc3QgeyBvdmVyZmxvdzphdXRvOyB9CmRpdi5jb2RlLCBkaXYuc3RvcnksIGRpdi5pdGVtLCBkaXYuY29udGVudCwgdGFibGUuY29udGVudCwgdGV4dGFyZWEgeyB3aGl0ZS1zcGFjZTpwcmU7IH0KZGl2LmNvZGUsIGRpdi5zdG9yeSwgZGl2Lml0ZW0geyB0ZXh0LWFsaWduOmxlZnQ7IH0KCi8qIHBvc2l0aW9uIGN1cnNvciAqLwpmaWVsZHNldC5hdXRvLCBmaWVsZHNldC5mdWxsLCBmaWVsZHNldC5mbG9hdCwgZmllbGRzZXQuaW5wdXQsIGJvZHk+ZGl2LnRvYXN0LCBib2R5PmRpdi5jYXJ0ZSwgYm9keT5kaXYuaW5wdXQsIGJvZHk+ZGl2LnVwbG9hZCB7IHBvc2l0aW9uOmZpeGVkOyB6LWluZGV4OjEwOyB9CmxlZ2VuZCwgc2VsZWN0LCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGRpdi5pdGVtLCBkaXYudGFicywgdGgsIHRkLCBoMSwgaDIsIGgzIHsgY3Vyc29yOnBvaW50ZXI7IH0KZGl2LnRpdGxlLCBkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGN1cnNvcjpjb3B5OyB9CgovKiBib3gtc2hhZG93ICovCmZpZWxkc2V0LnBsdWdpbiB7IGJveC1zaGFkb3c6MnB4IDJweCAxMHB4IDRweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnBsdWdpbjpob3ZlciB7IGJveC1zaGFkb3c6NHB4IDRweCAxMnB4IDZweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnN0b3J5IHsgYm94LXNoYWRvdzo0cHggNHB4IDEwcHggMXB4ICM2MjZiZDA7IH0KZmllbGRzZXQuc3Rvcnk6aG92ZXIgeyBib3gtc2hhZG93OjEycHggMTJweCAxMnB4IDZweCAjNTc2NGVmZDE7IH0KbGVnZW5kLCBzZWxlY3QsIHRleHRhcmVhLCBpbnB1dFt0eXBlPXRleHRdLCBkaXYuY29kZSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBib3gtc2hhZG93OjRweCA0cHggMjBweCA0cHggIzYyNmJkMDsgfQoKLyogaG92ZXIgKi8KbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CnNlbGVjdDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgY29sb3I6Y3lhbjsgfQppbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQppbnB1dFtuYW1lPWNtZF06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmN5YW47IGNvbG9yOmJsYWNrOyB9CmlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSBzcGFuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpkZWVwc2t5Ymx1ZTsgYm94LXNoYWRvdzo0cHggNHB4IDIwcHggNHB4ICMyOTMxOGU7IH0KdGFibGUuY29udGVudCB0ci5zZWxlY3QsIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIsIGgxOmhvdmVyLCBoMjpob3ZlciwgaDM6aG92ZXIsIGRpdi5pdGVtLnNlbGVjdCwgZGl2Lml0ZW06aG92ZXIsIGRpdi50YWJzLnNlbGVjdCwgZGl2LnRhYnM6aG92ZXIsIC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQp0YWJsZS5jb250ZW50IHRoOmhvdmVyLCB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCwgdGFibGUuY29udGVudCB0ZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Y29ybmZsb3dlcmJsdWU7IH0KYm9keT5kaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQoKLyogc2Nyb2xsYmFyICovCmJvZHkgeyBvdmVyZmxvdzotbW96LXNjcm9sbGJhcnMtbm9uZTsgLW1zLW92ZXJmbG93LXN0eWxlOm5vbmU7IH0KYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZmllbGRzZXQucGFuZWwuQWN0aW9uPmRpdi5vdXRwdXQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOjAgIWltcG9ydGFudDsgaGVpZ2h0OjAgIWltcG9ydGFudDsgfQpkaXYucHJvamVjdDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZGl2LmNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CgovKiB0YWJsZSBjYXJkICovCmRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDFweCAjZTdlN2U3OyBtYXJnaW46MTBweDsgd2lkdGg6MjQwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGZvbnQtc2l6ZToxLjJyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICNlN2U3ZTc7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi5jb250ZW50IHsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6NDVweDsgfQpib2R5LndoaXRlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAwMDsgfQpkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0uc3RvcCB7IGNvbG9yOmdyYXk7IH0KCi8qIHdoaXRlICovCmJvZHkud2hpdGUgeyBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoNSwzNCw1NiwwLjc1KTsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBzZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnllbGxvd2dyZWVuOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIHRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9dGV4dF0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdIHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1vcGVuXSB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0b3BdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPWRlbGV0ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXJlbW92ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5BY3Rpb24geyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LnBhbmVsLkFjdGlvbiBkaXYuYWN0aW9uIHsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmZhMTsgfQpib2R5LndoaXRlIGZpZWxkc2V0LmZ1bGwgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjY2UwZjRlYjsgY29sb3I6d2hpdGU7IH0KCi8qIHdoaXRlIGhvdmVyICovCmJvZHkud2hpdGUgbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CmJvZHkud2hpdGUgc2VsZWN0OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojOTljYzY2N2Q7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjdhY2M4YzsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQuYWN0aW9uIHRkOmxhc3QtY2hpbGQgeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBoMTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmJvZHkud2hpdGUgaDI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGgzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRoOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzY0OTVlZDYzOyB9CmJvZHkud2hpdGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CiAKLyogcHJpbnQgKi8KYm9keS5wcmludCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkucHJpbnQgbGVnZW5kLCBib2R5LnByaW50IHNlbGVjdCwgYm9keS5wcmludCBpbnB1dCwgYm9keS5wcmludCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IGJveC1zaGFkb3c6MHB4IDBweCAwcHggMHB4ICM2MjZiZDA7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50LmFjdGlvbiB0ZDpsYXN0LWNoaWxkIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYubmFtZSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYuaXRlbS5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQpib2R5LnByaW50IGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LnByaW50IGZpZWxkc2V0LnBhbmVsIHsgYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgc3ZnIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQoKYm9keS5tb2JpbGUgbGVnZW5kIHsgZm9udC1zaXplOjEuNnJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgc2VsZWN0IHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IGJvcmRlci1yYWRpdXM6MDsgbWFyZ2luLXJpZ2h0OjEwOyB9CmJvZHkubW9iaWxlIHRleHRhcmVhIHsgZm9udC1zaXplOjEuMnJlbTsgYm9yZGVyLXJhZGl1czowOyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9dGV4dF0geyBmb250LXNpemU6MS4ycmVtOyBoZWlnaHQ6MzhweDsgYm9yZGVyLXJhZGl1czowOyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9YnV0dG9uXSB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozOHB4OyBib3JkZXItcmFkaXVzOjA7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuZmxvYXQgaW5wdXRbdHlwZT1idXR0b25dIHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgdGFibGUubGF5b3V0IGRpdi50b2dnbGUgeyBmb250LXNpemU6NDhweDsgfQpib2R5Lm1vYmlsZSB0YWJsZS5jb250ZW50IHRoIHsgcGFkZGluZzo2cHggNnB4OyB9Cgpib2R5Lm1vYmlsZSB0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLnByb2plY3QgeyB3aWR0aDozMHB4OyB9CmJvZHkubW9iaWxlIHRhYmxlLmxheW91dCB0ZC5jb250ZW50IGRpdi50b2dnbGUucHJvZmlsZSB7IHdpZHRoOjMwcHg7IH0KCmJvZHkubW9iaWxlIGZvcm0ub3B0aW9uPmRpdi5pdGVtIHsgbWFyZ2luOjA7IGhlaWdodDozOHB4OyB9CmJvZHkubW9iaWxlIGRpdi5hY3Rpb24+ZGl2Lml0ZW0geyBtYXJnaW46MDsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgdG9wOjM4cHg7IH0KYm9keS5tb2JpbGU+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZT5kaXYuaW5wdXQubG9naW4gaW5wdXQgeyBmb250LXNpemU6MS40cmVtOyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXVzZXJuYW1lXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXBhc3N3b3JkXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6OHB4IDIwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IHRvcDowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc3RhdGUudGltZSB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuSGVhZGVyLmhlYWQgZGl2Lm91dHB1dCBkaXYgeyBoZWlnaHQ6MzhweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlci5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMjQzOTUwYmY7IGZvbnQtc2l6ZToxLjZyZW07IG1pbi13aWR0aDoyNDBweDsgcG9zaXRpb246Zml4ZWQ7IHRvcDozcmVtOyB6LWluZGV4OjEwOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyB3aWR0aDozMjBweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5BY3Rpb24ubWFpbiB7IG1hcmdpbi10b3A6M3JlbTsgbWFyZ2luLWJvdHRvbTozcmVtOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkFjdGlvbi5tYWluLmNtZCB7IG1hcmdpbi10b3A6MDsgbWFyZ2luLWJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCBkaXYub3V0cHV0IGRpdiB7IGhlaWdodDoyLjZyZW07IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgaGVpZ2h0OjM4cHg7IH0KCmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IHBvc2l0aW9uOnVuc2V0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgd2lkdGg6MjQwcHg7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5zdGF0ZS50aW1lIHsgZGlzcGxheTpibG9jazsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuQWN0aW9uLm1haW4geyBtYXJnaW4tdG9wOjA7IG1hcmdpbi1ib3R0b206MDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgeyBwb3NpdGlvbjp1bnNldDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgd2lkdGg6MjQwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5kcmF3LnRyZW5kIGRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcudHJlbmQgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgaGVpZ2h0OjE2MHB4OyBmbG9hdDpub25lOyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0geyB3aWR0aDphdXRvOyBmbG9hdDpsZWZ0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6YXV0bzsgZmxvYXQ6bGVmdDsgfQoKLyogbWlzYyAqLwpib2R5Lm1vYmlsZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2ggZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBwYWRkaW5nOjBweDsgbWFyZ2luOjBweDsgfQpmaWVsZHNldC5wYW5lbC5BY3Rpb24uY21kPmRpdi50b2dnbGUucHJvamVjdCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wbHVnaW4uY29uZmlnIGZvcm0ub3B0aW9uIGlucHV0W25hbWU9a2V5XSB7IHdpZHRoOjI0MHB4OyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luLnBhcnNlLmNtZD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5wbGFuPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5TZWFyY2ggYSB7IGNvbG9yOnllbGxvdzsgfQpib2R5LmJsYWNrIGEgeyBjb2xvcjp5ZWxsb3c7IH0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LkhlYWRlciB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IGhlaWdodDo2MHB4OyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyIHsgYm9yZGVyLXJpZ2h0OnNvbGlkIDFweCAjZTdlN2U3OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyBwYWRkaW5nOjEwcHggMTBweDsgd2lkdGg6MjAwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IGNvbG9yOmJsYWNrOyBwYWRkaW5nOjEwcHggNDBweDsgYm9yZGVyLWxlZnQ6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzAxNTJkOTsgY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYubGlzdCBkaXYuaXRlbSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyBib3JkZXItbGVmdDpub25lOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQoKYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206IHNvbGlkIDFweCByZWQ7IGhlaWdodDozOHB4OyB3aWR0aDo2MDBweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2LmFjdGlvbiBkaXYudGFicyB7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCB7IG1hcmdpbi10b3A6NThweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXIgeyBib3gtc2hhZG93Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXI+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KCmJvZHkuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IG1pbi13aWR0aDoyNDBweDsgYm9yZGVyLXJhZGl1czo1cHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgYm94LXNoYWRvdzo1cHggNXB4IDEwcHggNXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuZmVlbC5mbG9hdCB7IHRvcDowOyB9CgpkaXYub3V0cHV0IGRpdi5yb3cgZGl2LmNvbCB7IGZsb2F0OmxlZnQ7IGJvcmRlcjpzb2xpZCAxcHggZ3JlZW47IH0KCmJvZHkud2hpdGUuc2ltcGxlIGRpdi5wcm9maWxlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5kaXNwbGF5IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5jb2RlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IGJvcmRlcjpub25lOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LnBsdWdpbiBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgbGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlPmRpdi5jYXJ0ZSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGJvcmRlcjpzb2xpZCAxcHggI2U3ZTdlNzsgfQpib2R5LndoaXRlLnNpbXBsZT5kaXYuY2FydGUgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBkaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNlM2U2ZjE7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuIHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOmJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6bGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiMwMTUyZDk7IGZvbnQtc2l6ZTowLjhyZW07IHBhZGRpbmc6NXB4IDEwcHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJveC1zaGFkb3c6MnB4IDJweCA4cHggMnB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYuYWN0aW9uPmRpdi5pdGVtIGlucHV0W3R5cGU9dGV4dF0geyBjb2xvcjpibGFjazsgfQoKYm9keS53aGl0ZSBkaXYucHJvamVjdC5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUgZGl2LnByb2ZpbGUuYXV0byB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LmJsYWNrIGRpdi5wcm9qZWN0LmF1dG8geyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5ibGFjayBkaXYucHJvZmlsZS5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmRpdi5wcm9qZWN0LmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDowOyB6LWluZGV4OjEwOyB9CmRpdi5wcm9maWxlLmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6MDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC5wbHVnaW4ubG9jYXRpb24+ZGl2LmFjdGlvbiBpbnB1dFt0eXBlPXRleHRdIHsKCXdpZHRoOjQwcHg7Cn0KCmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrOyB9CmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQpmaWVsZHNldC54dGVybT5kaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQo=",
        "usr/volcanos/page/index.html": "PCFET0NUWVBFIGh0bWw+CjxoZWFkPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTAuOCxtYXhpbXVtLXNjYWxlPTAuOCx1c2VyLXNjYWxhYmxlPTAiPgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPjx0aXRsZT52b2xjYW5vczwvdGl0bGU+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvcGFnZS9pbmRleC5jc3MiPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL3BhZ2UvY2FjaGUuY3NzIj4KICAgIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgdHlwZT0iaW1hZ2UvaWNvIiBocmVmPSIvZmF2aWNvbi5pY28iPgo8L2hlYWQ+Cjxib2R5PgogICAgPHNjcmlwdCBzcmM9Ii9wcm90by5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iL3BhZ2UvY2FjaGUuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Ii9wYWdlL2luZGV4LmpzIj48L3NjcmlwdD4KPC9ib2R5PgoK",
        "usr/volcanos/page/index.js": "Vm9sY2Fub3Moe25hbWU6ICJjaGF0Iiwgcml2ZXI6IHsKCXByb2R1Y3Q6IHtuYW1lOiAi5Lqn5ZOB576kIiwgc3Rvcm06IHsKCQlvZmZpY2U6IHtuYW1lOiAi5Yqe5YWsIG9mZmljZSIsICBsaXN0OiBbCgkJCXtuYW1lOiAiZmVlbCIsIGhlbHA6ICLlvbHpn7PlqpLkvZMiLCBpbmRleDogIndlYi53aWtpLmZlZWwifSwKCQkJe25hbWU6ICJkcmF3IiwgaGVscDogIuaAnee7tOWvvOWbviIsIGluZGV4OiAid2ViLndpa2kuZHJhdyJ9LAoJCQl7bmFtZTogImRhdGEiLCBoZWxwOiAi5pWw5o2u6KGo5qC8IiwgaW5kZXg6ICJ3ZWIud2lraS5kYXRhIn0sCgkJCXtuYW1lOiAicGxhbiIsIGhlbHA6ICLorqHliJLku7vliqEiLCBpbmRleDogIndlYi50ZWFtLnBsYW4ifSwKCQkJe25hbWU6ICJjb250ZXh0IiwgaGVscDogIue8lueoiyIsIGluZGV4OiAid2ViLndpa2kud29yZCIsIGFyZ3M6IFsic3JjL21haW4uc2h5Il19LAoJCV19LAoJfX0sCglwcm9qZWN0OiB7bmFtZTogIueglOWPkee+pCIsIHN0b3JtOiB7CgkJc3R1ZGlvOiB7bmFtZTogIueglOWPkSBzdHVkaW8iLCBsaXN0OiBbCgkJCXtuYW1lOiAidmltZXIiLCBoZWxwOiAi57yW6L6R5ZmoIiwgaW5kZXg6ICJ3ZWIuY29kZS52aW1lciJ9LAoJCQl7bmFtZTogInJlcG9zIiwgaGVscDogIuS7o+eggeW6kyIsIGluZGV4OiAid2ViLmNvZGUuZ2l0LnN0YXR1cyJ9LAoJCQl7bmFtZTogInBsYW4iLCBoZWxwOiAi5Lu75Yqh6KGoIiwgaW5kZXg6ICJ3ZWIudGVhbS5wbGFuIn0sCgkJCXtuYW1lOiAidG9kbyIsIGhlbHA6ICLlvoXlip7pobkiLCBpbmRleDogIndlYi50ZWFtLnRvZG8ifSwKCQkJe25hbWU6ICJjdHgiLCBoZWxwOiAi5LiK5LiL5paHIiwgaW5kZXg6ICJ3ZWIud2lraS53b3JkIn0sCgkJXX0sCgl9fSwKCXByb2ZpbGU6IHtuYW1lOiAi5rWL6K+V576kIiwgc3Rvcm06IHsKCQl3ZWJzaXRlOiB7bmFtZTogIuWumuWItiB3ZWJzaXRlIiwgaW5kZXg6IFsKCQkJIndlYi5jaGF0LndlYnNpdGUiLAoJCQkid2ViLmNoYXQuZGl2IiwKCQkJIndlYi5jb2RlLnZpbWVyIiwKCQkJIndlYi5kcmVhbSIsCgkJXX0sCgkJcmVsZWFzZToge25hbWU6ICLlj5HluIMgcmVsZWFzZSIsIGluZGV4OiBbCgkJCSJ3ZWIuY29kZS5pbnN0YWxsIiwgIndlYi5jb2RlLnVwZ3JhZGUiLCAid2ViLmNvZGUucHVibGlzaCIsICJ3ZWIuY29kZS5jb21waWxlIiwgIndlYi5jb2RlLmF1dG9nZW4iLCAid2ViLmNvZGUuYmlucGFjayIsICJ3ZWIuY29kZS53ZWJwYWNrIiwKCQkJIndlYi5jb2RlLmdpdC5zdGF0dXMiLCAid2ViLmNvZGUuZ2l0LnNlcnZlciIsCgkJXX0sCgkJcmVzZWFyY2g6IHtuYW1lOiAi5rWL6K+VIHJlc2VhcmNoIiwgaW5kZXg6IFsKCQkJIndlYi5jb2RlLmZhdm9yIiwgIndlYi5jb2RlLmJlbmNoIiwgIndlYi5jb2RlLnBwcm9mIiwKCQkJIndlYi5jb2RlLmNhc2UiLAoJCV19LAoJfX0sCglvcGVyYXRlOiB7bmFtZTogIui/kOe7tOe+pCIsIHN0b3JtOiB7CgkJYWFhOiB7bmFtZTogIuadg+mZkCBhYWEiLCBpbmRleDogWwoJCQkidXNlciIsICJ0b3RwIiwgInNlc3MiLCAicm9sZSIsCgkJXX0sCgkJd2ViOiB7bmFtZTogIuW6lOeUqCB3ZWIiLCBpbmRleDogWwoJCQkic2VydmUiLCAic3BhY2UiLCAiZHJlYW0iLCAicm91dGUiLAoJCQkic2hhcmUiLCAic3BpZGUiLCAiY2FjaGUiLCAic3RvcnkiLAoJCV19LAoJCWNsaToge25hbWU6ICLns7vnu58gY2xpIiwgaW5kZXg6IFsKCQkJInFyY29kZSIsICJkYWVtb24iLCAic3lzdGVtIiwgInJ1bnRpbWUiLCAibWlycm9ycyIsICJmb3JldmVyIiwKCQldfSwKCQluZnM6IHtuYW1lOiAi5paH5Lu2IG5mcyIsIGluZGV4OiBbCgkJCSJjYXQiLCAiZGlyIiwgInBvcnQiLCAidGFpbCIsICJ0cmFzaCIsCgkJXX0sCgl9fSwKfX0pCg==",
        "usr/volcanos/panel/action.css": "ZmllbGRzZXQuQWN0aW9uIHsgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDExNCwgMTUzLCAxNjIsIDAuNTQpOyBtaW4td2lkdGg6MTYwcHg7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2Yjsgd2lkdGg6aW5oZXJpdDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQ6IzY0OTVlZDYzOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZDojNjQ5NWVkNjM7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dD5maWVsZHNldD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4uc2VsZWN0IHsgZGlzcGxheTpibG9jazsgfQoKZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzphdXRvOyB9CgpmaWVsZHNldC5BY3Rpb24uZnJlZT5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHBvc2l0aW9uOmFic29sdXRlOyB9CmZpZWxkc2V0LkFjdGlvbi5mcmVlPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luLnNlbGVjdCB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLmZsb3c+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5wYW5lbC5jbWQ+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4geyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmZpZWxkc2V0LnBhbmVsLmNtZD5kaXYub3V0cHV0PmZpZWxkc2V0LnBsdWdpbj5sZWdlbmQgeyBwYWRkaW5nOjAgMTBweDsgbWFyZ2luLXJpZ2h0OjNweDsgZmxvYXQ6bGVmdDsgfQoKZmllbGRzZXQuQWN0aW9uPmRpdi5wcm9qZWN0LnRvZ2dsZSB7CgliYWNrZ3JvdW5kLWNvbG9yOmNvcm5zaWxrOyBvcGFjaXR5OjAuNDsgY29sb3I6dGVhbDsgZm9udC1zaXplOiAyOHB4OyBwYWRkaW5nLXRvcDogNTBweDsgaGVpZ2h0OiAxMDBweDsgd2lkdGg6MjBweDsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDMwJTsKCWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjIwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjIwcHg7Cn0KCmRpdi5oZWFkIHsgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHg7IGhlaWdodDo0MnB4OyBjbGVhcjpib3RoOyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSB7IGZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgZGl2Lm5hbWUgeyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmhlYWQgZGl2LnVzZXJuYW1lIGRpdi5pY29uIHsgZmxvYXQ6bGVmdDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgaW1nIHsgaGVpZ2h0OjQycHg7IH0KZGl2LmhlYWQgZGl2Lm1lbnUgeyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoxMHB4OyBmbG9hdDpsZWZ0OyB9CmRpdi5oZWFkPmRpdi5tZW51OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB9CmRpdi5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB3aWR0aDoxNjBweDsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmRpdi5sZWZ0IGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgfQpkaXYubGVmdCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgfQpkaXYubGVmdCBkaXYudXNlcm5hbWUgZGl2IHsgY29sb3I6d2hpdGU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmxlZnQgZGl2LnVzZXJuYW1lIGltZyB7IHdpZHRoOjEyMHB4OyB9CmRpdi5tYWluIGlmcmFtZSB7IGJvcmRlcjowOyB9CmRpdi5tYWluIGlucHV0W3R5cGU9YnV0dG9uXSB7IHBhZGRpbmc6MCAyMHB4OyB9CmRpdi5tYWluIHsgYmFja2dyb3VuZC1jb2xvcjojY2NjY2NjOyBjb2xvcjpibGFjazsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGxlZ2VuZCB7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gc2VsZWN0IHsgb3V0bGluZTpub25lOyBib3gtc2hhZG93Om5vbmU7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGZvcm0ub3B0aW9uIHsgZGlzcGxheTpibG9jazsgY2xlYXI6Ym90aDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gZm9ybS5vcHRpb24gZGl2Lml0ZW0geyBtYXJnaW46NXB4OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBkaXYuYWN0aW9uIGRpdi5pdGVtIHsgbWFyZ2luOjVweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gdGFibGUuY29udGVudCB0ciB7IGJvcmRlcjpzb2xpZCAxcHggbGlnaHRncmF5OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyBwYWRkaW5nOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmZvb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjQycHg7IGNsZWFyOmJvdGg7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIHsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMHB4OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBkaXYubmFtZSB7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuZm9vdCBkaXYudXNlcm5hbWUgZGl2Lmljb24geyBmbG9hdDpsZWZ0OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBpbWcgeyBoZWlnaHQ6NDJweDsgfQpkaXYuZm9vdCBkaXYubWVudSB7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmZvb3Q+ZGl2Lm1lbnU6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IH0KCmRpdi50YWJzOmhvdmVyIHsKCWJhY2tncm91bmQtY29sb3I6IzI3MjcyNzsKfQpkaXYudGFicyBkaXYubmFtZSB7CgloZWlnaHQ6NDZweDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKCXBvc2l0aW9uOnN0aWNreTsgdG9wOjVweDsKCXotaW5kZXg6MTsKfQpkaXYudGFicyBkaXYubmFtZSBkaXYuaXRlbSB7Cgljb2xvcjpncmF5OyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY29sb3I6d2hpdGU7CiAJYm9yZGVyLWJvdHRvbTpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzIGRpdi5wYWdlIHsKCW92ZXJmbG93OmF1dG87IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IHsKCXBhZGRpbmc6NXB4OyBwb3NpdGlvbjpzdGlja3k7IHRvcDowcHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IGlucHV0IHsKCWJhY2tncm91bmQtY29sb3I6IzIxMjEyMTsgY29sb3I6d2hpdGU7IGJvcmRlcjowOyBvdXRsaW5lOm5vbmU7IHdpZHRoOjIzMHB4Owp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5pdGVtIHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY2xlYXI6Ym90aDsgZGlzcGxheTpub25lOwp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5saXN0IHsKCXBhZGRpbmctbGVmdDoyMHB4OyBkaXNwbGF5Om5vbmU7IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lmxpc3Quc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzMyMzIzMjsgZGlzcGxheTpibG9jazsKfQpkaXYubGVmdCBkaXYubGlzdCB7CglwYWRkaW5nLWxlZnQ6MjBweDsKfQoKZGl2LnRhYnMubGVmdCBkaXYubmFtZSB7CglmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0gewoJYm9yZGVyLWJvdHRvbTpub25lOyBmbG9hdDpub25lOwp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJvcmRlci1yaWdodDpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2UgewoJd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKIAljbGVhcjpub25lOyBmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2U+ZGl2Lml0ZW0gewoJZGlzcGxheTpibG9jazsKfQoKZGl2LnRhYnMudm9pZCBkaXYubmFtZSB7CglkaXNwbGF5Om5vbmU7Cn0KZGl2LnRhYnMudm9pZCBkaXYucGFnZT5kaXYuaXRlbSB7CglkaXNwbGF5OmJsb2NrOwp9Cgo=",
        "usr/volcanos/panel/action.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgcml2ZXIgPSBjYW4uQ29uZihjaGF0LlJJVkVSKSwgc3Rvcm0gPSBjYW4uQ29uZihjaGF0LlNUT1JNKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uY29yZS5OZXh0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWl0ZW0uaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9ZKQoJCQlpdGVtLndpZHRoID0gY2FuLkNvbmZXaWR0aCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1gpCgkJCWl0ZW0uZmVhdHVyZSA9IGNhbi5iYXNlLk9iaihpdGVtLmZlYXR1cmV8fGl0ZW0ubWV0YSkKCQkJaXRlbS5pbnB1dHMgPSBjYW4uYmFzZS5PYmooaXRlbS5pbnB1dHN8fGl0ZW0ubGlzdCkKCgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBpdGVtLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBtZXRhLndpZHRoLShjYW4udXNlci5pc1dpbmRvd3M/IDIwOiAwKSkKCQkJCWNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgcml2ZXIsIHN0b3JtLCBzdWIsIG1ldGEpLCBza2lwIHx8IG5leHQoKQoJCQl9KQoJCX0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25hY3Rpb24ubGF5b3V0KGNhbiwgY2FuLm1pc2MuU2VhcmNoT3JDb25mKGNhbiwgY2hhdC5MQVlPVVQpfHxWb2xjYW5vcy5tZXRhLmFyZ3MubGF5b3V0LCB0cnVlKQoJCQljYW4ub25pbXBvcnQuX21lbnUoY2FuLCBtc2cpLCBjYW4ub25rZXltYXAuX2luaXQoY2FuKQoJCX0pCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCByaXZlciwgc3Rvcm0sIHN1YiwgbWV0YSkgeyBzdWIuX3RhcmdldC5fbWV0YSA9IG1ldGEKCQltZXRhLmlkICYmIChzdWIuX29wdGlvbi5kYXRhc2V0ID0gc3ViLl9vcHRpb24uZGF0YXNldHx8e30sIHN1Yi5fb3B0aW9uLmRhdGFzZXQuaWQgPSBtZXRhLmlkKQoKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCXJldHVybiBjYW4ucnVuKHN1Yi5yZXF1ZXN0KGV2ZW50KSwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW3JpdmVyLCBzdG9ybSwgbWV0YS5pZHx8bWV0YS5pbmRleF0sIGNtZHMpLCBjYikKCQl9LCBjYW4uX3BsdWdpbnMgPSBjYW4ubWlzYy5jb25jYXQoY2FuLCBjYW4uX3BsdWdpbnMsIFtzdWJdKQoKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX2FjdGlvbiwgW3t2aWV3OiBbaHRtbC5UQUJTLCBodG1sLkRJViwgbWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkZJRUxEU0VUX1BMVUdJTiwgc3ViLl90YXJnZXQpCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KQoJCX0sIG9ubW91c2VlbnRlcjogc3ViLl9sZWdlbmQub25tb3VzZWVudGVyLCBvbmRibGNsaWNrOiBzdWIuX2xlZ2VuZC5vbmNsaWNrfV0pCgl9LAoJX21lbnU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGlmIChjYW4udXNlci5tb2QuaXNQb2QgfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uc2V0SGVhZGVyTWVudShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0Lk1FTlVTKSwgY2FuLkNvbmYoY2hhdC5NRU5VUyl8fGNhbi5vbmFjdGlvbi5fbWVudXMpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBsaXN0KSB7CgkJCWNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25hY3Rpb24sIGxpc3RbMF1dLCBbY2FuLCBidXR0b25dKQoJCX0pCgl9LAoJX3NoYXJlOiBmdW5jdGlvbihjYW4sIHNoYXJlKSB7IHNoYXJlICYmIGNhbi5ydW4oe30sIFsiX3NoYXJlIiwgc2hhcmVdLCBmdW5jdGlvbihtc2cpIHsKCQltc2cuTGVuZ3RoKCkgPT0gMSAmJiBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9DTUQpCgkJY2FuLnNldEhlYWRlcihjaGF0LlRPUElDLCBtc2cuT3B0aW9uT3JTZWFyY2goY2hhdC5UT1BJQykpCgkJY2FuLnVzZXIudGl0bGUobXNnLk9wdGlvbk9yU2VhcmNoKGNoYXQuVElUTEUpKQoKCQljYW4uQ29uZihjaGF0LlJJVkVSLCAiX3NoYXJlIiwgY2hhdC5TVE9STSwgc2hhcmUpCgkJbXNnLkxlbmd0aCgpID4gMCAmJiBjYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2cpCgl9KSB9LAoJX2NtZDogZnVuY3Rpb24oY2FuLCBpdGVtLCBuZXh0KSB7CgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fQ01EKQoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBjYW4uYmFzZS5Db3B5KGl0ZW0sIHtvcHRzOiBjYW4ubWlzYy5TZWFyY2goY2FuKSwgbW9kZTogImNtZCJ9KSwgZnVuY3Rpb24oc3ViLCBtZXRhLCBza2lwKSB7CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi51c2VyLnRpdGxlKG1ldGEubmFtZSksIHNraXAgfHwgbmV4dCgpCgkJfSkKCX0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbiwgaGVpZ2h0KSB7CgkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLl90YXJnZXQsIGhlaWdodCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi6Kej5p6Q5byV5pOOIiwgX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIHBhZ2UsIG1zZywgY2FuLCBjbWRzLCBjYikgewoJdmFyIHN0b3JtID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9yb290LCBjYW4uY29yZS5LZXlzKGNoYXQuUklWRVIsIGNtZHNbMF0sIGNoYXQuU1RPUk0sIGNtZHNbMV0pKQoJaWYgKCFzdG9ybSB8fCBjbWRzLmxlbmd0aCAhPSAyKSB7IHJldHVybiBmYWxzZSB9CgoJaWYgKHN0b3JtLmluZGV4KSB7IC8vIOWRveS7pOe0ouW8lQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT01NQU5ELCBbXS5jb25jYXQoc3Rvcm0uaW5kZXgpLCBjYikKCX0gZWxzZSB7IC8vIOWRveS7pOWIl+ihqAoJCWNhbi5jb3JlLkxpc3Qoc3Rvcm0ubGlzdCwgZnVuY3Rpb24odmFsdWUpIHsKCQkJbXNnLlB1c2gobWRiLk5BTUUsIHZhbHVlLm5hbWV8fCIiKQoJCQltc2cuUHVzaChtZGIuSEVMUCwgdmFsdWUuaGVscHx8IiIpCgkJCW1zZy5QdXNoKGN0eC5JTlBVVFMsIEpTT04uc3RyaW5naWZ5KHZhbHVlLmlucHV0cykpCgkJCW1zZy5QdXNoKGN0eC5GRUFUVVJFLCBKU09OLnN0cmluZ2lmeSh2YWx1ZS5mZWF0dXJlKSkKCQkJbXNnLlB1c2goY3R4LklOREVYLCB2YWx1ZS5pbmRleHx8IiIpCgkJCW1zZy5QdXNoKGN0eC5BUkdTLCB2YWx1ZS5hcmdzfHwiW10iKQoJCQltc2cuUHVzaChjdHguU1RZTEUsIHZhbHVlLnN0eWxlfHwiIikKCQkJbXNnLlB1c2goY3R4LkRJU1BMQVksIHZhbHVlLmRpc3BsYXl8fCIiKQoJCQltc2cuUHVzaChpY2UuTVNHX0FDVElPTiwgdmFsdWUuX2FjdGlvbnx8IiIpCgkJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfQoJcmV0dXJuIHRydWUKfX0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJwYXJzZSI6IHNoeSgi6Kej5p6QIiwgewoJCSJzaG93IjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgdmFyIG5hbWUgPSBjbWRzWzFdfHwiY2FuIgoJCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUobmFtZSkKCQkJY21kcyAmJiBjbWRzWzBdICYmIFZvbGNhbm9zKG5hbWUsIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBuYW1lKX0sIFsiL3BsdWdpbi9zdG9yeS9wYXJzZS5qcyJdLCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBjYW4ucnVuLCBzdWIuT3B0aW9uID0gZnVuY3Rpb24oKSB7fSwgY2FuLmlzQ21kTW9kZSgpICYmIHN1Yi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCkKCQkJCXN1Yi5vbmFwcGVuZC5wYXJzZShzdWIsIHN1Yi5vbmFwcGVuZC5fcGFyc2Uoc3ViLCBjbWRzWzBdLCBuYW1lLCBzdWIuQ29uZkhlaWdodCgpKSwgY2FuLl9vdXRwdXQpCgkJCQljYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgIm1lbnUiLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlkZWxldGUobXNnLl9ldmVudCksIGRlbGV0ZShtc2cuX2NhbikKCQkJCQljYW4udXNlci50b2FzdChjYW4sIEpTT04uc3RyaW5naWZ5KG1zZykpCgkJCQl9KQoJCQl9KQoJCX0sCgl9LCBbInRleHQiLCAibmFtZSIsICJzaG93OmJ1dHRvbkBhdXRvIiwgImNsZWFyOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLl9yb290LkFjdGlvbi5ydW4oe30sIGNtZHMsIGNiLCB0cnVlKQoJfSksCgoJInBsdWdpbiI6IHNoeSgi5o+S5Lu2Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJfSksCgkibmZzLnNhdmUiOiBzaHkoIuS/neWtmOaWh+S7tiIsIHt9LCBbImZpbGU9aGkudHh0IiwgInRleHQ6dGV4dGFyZWE9J2hlbGxvIHdvcmxkJyIsICJzYXZlOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsKCQljYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJInNhdmUiLCBmdW5jdGlvbihjbWRzKSB7IGNhbi51c2VyLmRvd25sb2FkcyhjYW4sIGNtZHNbMV0sIGNtZHNbMF0pIH0KCQkpKQoJfSksCgkicGllIjogc2h5KCLmr5Tkvovlm74iLCB7fSwgWyJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRGlzcGxheVN0b3J5KCJwaWUuanMiKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsIDIwMCkKCQltc2cuUHVzaCgidmFsdWUiLCAzMDApCgkJbXNnLlB1c2goInZhbHVlIiwgNDAwKQoJfSksCgkiY2FuLmNvZGUuaW5uZXIuX3BsdWdpbiI6IHNoeSgi5o+S5Lu2Iiwge30sIFt7dHlwZTogImJ1dHRvbiIsIG5hbWU6ICJsaXN0IiwgYWN0aW9uOiAiYXV0byJ9LCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykge30pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsIF9mb2N1czogW10sIF9pbml0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKSwgY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05LRVlET1dOLCBmdW5jdGlvbihtc2csIG1vZGVsKSB7CgkJCWNhbi5fa2V5bGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UobXNnLl9ldmVudCwgY2FuLCBtb2RlbCwgY2FuLl9rZXlsaXN0fHxbXSwgY2FuLl9vdXRwdXQpCgkJfSkKCX0sCglfbW9kZTogewoJCW5vcm1hbDogewoJCQlqOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LnNjcm9sbEJ5KDAsIGV2ZW50LmN0cmxLZXk/IDMwMDogMzApIH0sCgkJCWs6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuc2Nyb2xsQnkoMCwgZXZlbnQuY3RybEtleT8gLTMwMDogLTMwKSB9LAoKCQkJYjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiSGVhZGVyLm9uYWN0aW9uLmJsYWNrIl0pIH0sCgkJCXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIkhlYWRlci5vbmFjdGlvbi53aGl0ZSJdKSB9LAoKCQkJZzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5Yib5bu6576k57uEIl0pIH0sCgkJCXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLua3u+WKoOW6lOeUqCJdKSB9LAoJCQl0OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJSaXZlci5vbmRldGFpbC7mt7vliqDlt6XlhbciXSkgfSwKCgkJCSIgIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNFQVJDSEZPQ1VTKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sCgkJCSI6IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkNPTU1BTkRGT0NVUyksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LAoJCQlFbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7dHlwZTogbWRiLkZPUkVBQ0gsIHdvcmQ6ICIifSkpCgkJCX0sCgkJCUVzY2FwZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgY2FuLnBhZ2UuS2V5cyhodG1sLkZJRUxEU0VUX0ZMT0FULCBodG1sLkRJVl9GTE9BVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQkJfSkKCQkJfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5Db25mKGh0bWwuTUFSR0lOX1ksIDQqaHRtbC5QTFVHSU5fTUFSR0lOKzIqaHRtbC5BQ1RJT05fSEVJR0hUK2h0bWwuQUNUSU9OX01BUkdJTikKCQljYW4uQ29uZihodG1sLk1BUkdJTl9YLCA0Kmh0bWwuUExVR0lOX01BUkdJTikKCgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc01vYmlsZSkgewoJCQl2YXIgZ3QgPSAiJiMxMDA5NTsiLCBsdCA9ICImIzEwMDk0OyI7IGZ1bmN0aW9uIHRvZ2dsZSh2aWV3KSB7IHJldHVybiAhY2FuLnNldFJpdmVyKCJkaXNwbGF5IikgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9KRUNUXV0sIGxpc3Q6IFt7dGV4dDogW2d0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSB0b2dnbGUoKT8gZ3Q6IGx0LCBjYW4ub25hY3Rpb24ucmVmcmVzaChjYW4pCgkJCX19XSkKCQl9CgoJCXRhcmdldC5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9UT1VDSCwgY2FuLnJlcXVlc3QoZXZlbnQpKSB9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJX21lbnVzOiBbCgkJW2NoYXQuTEFZT1VULCAiYXV0byIsICJ0YWJzIiwgImdyaWQiLCAiZnJlZSIsICJmbG93IiwgInBhZ2UiLCAidG9pbWFnZSJdLAoJCVtpY2UuSEVMUCwgInR1dG9yIiwgIm1hbnVhbCIsICJzZXJ2aWNlIiwgImRldm9wcyIsICJyZWZlciJdLAoJXSwKCV90cmFuczogewoJCSJsYXlvdXQiOiAi5biD5bGAIiwKCQkiYXV0byI6ICLpu5jorqTluIPlsYAiLAoJCSJmbG93IjogIua1geWKqOW4g+WxgCIsCgkJImdyaWQiOiAi572R5qC85biD5bGAIiwKCQkidGFicyI6ICLmoIfnrb7luIPlsYAiLAoJCSJmcmVlIjogIuiHqueUseW4g+WxgCIsCgkJInBhZ2UiOiAi572R6aG15biD5bGAIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoKCQkiaGVscCI6ICLluK7liqkiLAoJCSJ0dXRvciI6ICLlhaXpl6jnroDku4siLAoJCSJtYW51YWwiOiAi5L2/55So5omL5YaMIiwKCQkic2VydmljZSI6ICLmnI3liqHmiYvlhowiLAoJCSJkZXZvcHMiOiAi57yW56iL5omL5YaMIiwKCQkicmVmZXIiOiAi5Y+C6ICD5omL5YaMIiwKCX0sCglvbm1haW46IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25pbXBvcnQuX3NoYXJlKGNhbiwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgd2ViLlNIQVJFKSkgfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbikgeyBpZiAoIWNhbi51c2VyLm1vZC5pc0NtZCAmJiAhY2FuLkNvbmYoY2hhdC5UT09MKSkgeyByZXR1cm4gfQoJCWNhbi5fbmFtZXMgPSBsb2NhdGlvbi5wYXRobmFtZQoJCWNhbi5Db25mKGNoYXQuVE9PTCk/IGNhbi5jb3JlLk5leHQoY2FuLkNvbmYoY2hhdC5UT09MKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ub25pbXBvcnQuX2NtZChjYW4sIGl0ZW0sIG5leHQpCgkJfSk6IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoKSwgY3R4LkNPTU1BTkQsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLmNvcmUuTmV4dChtc2cuVGFibGUoKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ub25pbXBvcnQuX2NtZChjYW4sIGl0ZW0sIG5leHQpCgkJfSkgfSkKCX0sCglvbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQlpZiAod29yZFswXSA9PSBtZGIuUExVR0lOIHx8IHdvcmRbMF0gPT0gbWRiLkZPUkVBQ0gpIHsgY2FuLm9uZXhwb3J0LnBsdWdpbihjYW4sIG1zZywgd29yZCkgfQoJfSwKCW9uc2l6ZTogZnVuY3Rpb24oY2FuLCBtc2csIGhlaWdodCwgd2lkdGgpIHsgY2FuLkNvbmYoe2hlaWdodDogaGVpZ2h0LCB3aWR0aDogd2lkdGh9KSB9LAoJb25zdG9ybV9zZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCByaXZlciwgc3Rvcm0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7CgkJCXJldHVybiBjYW4uY29yZS5LZXlzKGNhbi5Db25mKGNoYXQuUklWRVIsIHJpdmVyKSwgY2FuLkNvbmYoY2hhdC5TVE9STSwgc3Rvcm0pKQoJCX0sIGNhbi5fYWN0aW9uLCBjYW4uX291dHB1dCkpIHsKCQkJdmFyIGNvbmYgPSBjYW4uY29yZS5WYWx1ZShjYW4uX3Jvb3QsIGNhbi5jb3JlLktleXMoY2hhdC5SSVZFUiwgcml2ZXIsIGNoYXQuU1RPUk0sIHN0b3JtKSl8fHt9CgkJCXJldHVybiBjYW4ub25hY3Rpb24ubGF5b3V0KGNhbiwgY2FuLm1pc2MuU2VhcmNoT3JDb25mKGNhbiwgY2hhdC5MQVlPVVQpfHxWb2xjYW5vcy5tZXRhLmFyZ3MubGF5b3V0fHxjb25mLmxheW91dCwgdHJ1ZSkKCQl9CgoJCWNhbi5ydW4oe30sIFtyaXZlciwgc3Rvcm1dLCBmdW5jdGlvbihtc2cpIHsgaWYgKG1zZy5MZW5ndGgoKSA+IDApIHsgcmV0dXJuIGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZykgfQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9OT1RPT0wsIGNhbi5yZXF1ZXN0KHt9LCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSkKCQl9KQoJfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uQ29uZkhlaWdodChjYW4uX3Jvb3QuX2hlaWdodCksIGNhbi5Db25mV2lkdGgoY2FuLl9yb290Ll93aWR0aCkKCQljYW4uQ29uZihodG1sLk1BUkdJTl9YLCAwLCBodG1sLk1BUkdJTl9ZLCAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsICJzaW1wbGUiKSAKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl90YXJnZXQsICJjbWQiKQoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgkJY2FuLmlzQ21kTW9kZSgpCgl9LAoKCWxheW91dDogZnVuY3Rpb24oY2FuLCBidXR0b24sIHNpbGVudCkgeyBidXR0b24gPSBidXR0b258fGljZS5BVVRPCgkJdmFyIGNiID0gY2FuLm9ubGF5b3V0W2J1dHRvbl07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGNhbiwgc2lsZW50KSkgeyByZXR1cm4gfQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBjYW4uX3RhcmdldCwgY2FuLkNvbmYoY2hhdC5MQVlPVVQpKQoJCWlmIChidXR0b24gPT0gaWNlLkFVVE8pIHsgYnV0dG9uID0gIiIgfQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX3RhcmdldCwgY2FuLkNvbmYoY2hhdC5MQVlPVVQsIGJ1dHRvbikpCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCX0sCgloZWxwOiBmdW5jdGlvbihjYW4sIGJ1dHRvbikgeyBjYW4udXNlci5vcGVuKCIvaGVscC8iK2J1dHRvbisiLnNoeSIpIH0sCglyZWZyZXNoOiBmdW5jdGlvbihjYW4pIHsKCQljYW4uX3Jvb3QuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCwgY2FuLl9yb290Ll93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCgkJdmFyIHdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1gpCgkJY2FuLmNvcmUuTGlzdChjYW4uX3BsdWdpbnMsIGZ1bmN0aW9uKHN1YikgeyB2YXIgdGFibGUgPSBjYW4uY29yZS5WYWx1ZShzdWIsIGNoYXQuX09VVFBVVF9DVVJSRU5UKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aWR0aCktKGNhbi51c2VyLmlzV2luZG93cz8gMjA6IDApKQoJCQl0YWJsZS5Db25mV2lkdGgod2lkdGgpCgkJCXRhYmxlLm9uaW1wb3J0LmxheW91dD8gdGFibGUub25pbXBvcnQubGF5b3V0KHRhYmxlKTogY2FuLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCB0YWJsZS5fbXNnLCBzdWIuX2Rpc3BsYXkpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05MQVlPVVQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWdyaWQ6IGZ1bmN0aW9uKGNhbiwgc2lsZW50KSB7CgkJdmFyIEFDVElPTl9MQVlPVVRfRk1UID0gIiBmaWVsZHNldC5BY3Rpb24uZ3JpZD5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHdpZHRoOl93aWR0aDsgaGVpZ2h0Ol9oZWlnaHQ7IH0gZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4+ZGl2Lm91dHB1dCB7IHdpZHRoOl93aWR0aDsgaGVpZ2h0Ol9oZWlnaHQ7IH0gIgoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogIm0iLCB2YWx1ZTogMn0sIHtuYW1lOiAibiIsIHZhbHVlOiAyfV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24oaGVpZ2h0LCB3aWR0aCkgeyB2YXIgbSA9IHBhcnNlSW50KGRhdGEubSl8fDIsIG4gPSBwYXJzZUludChkYXRhLm4pfHwyCgkJCQljYW4ucGFnZS5jc3MoY2FuLmJhc2UucmVwbGFjZUFsbChBQ1RJT05fTEFZT1VUX0ZNVCwgIl93aWR0aCIsICh3aWR0aC0oNCptKzEpKmh0bWwuUExVR0lOX01BUkdJTikvbSsicHgiLCAiX2hlaWdodCIsIChoZWlnaHQtKDQqbisxKSpodG1sLlBMVUdJTl9NQVJHSU4pL24rInB4IikpCgkJCX0pCgkJfSwgc2lsZW50KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgMCkKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRklFTERTRVRfUExVR0lOLCAwKQoJfSwKCWZyZWU6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCBbW2h0bWwuRElWX09VVFBVVCwgaHRtbC5GSUVMRFNFVF9QTFVHSU5dXSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCB7bGVmdDogNDAqaW5kZXgsIHRvcDogNDAqaW5kZXh9KQoJCQljYW4ub25tb3Rpb24ubW92ZShjYW4sIGl0ZW0sIHtsZWZ0OiA0MCppbmRleCwgdG9wOiA0MCppbmRleH0pCgkJfSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihjYW4pIHsKCQlyZXR1cm4gY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLkNvbmYoY2hhdC5TVE9STSksIGNhbi5fb3V0cHV0KSwgdHJ1ZQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJYXJnczogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4uY29yZS5OZXh0KGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW1todG1sLkZJRUxEU0VUX1BMVUdJTiwgaHRtbC5GT1JNX09QVElPTl1dKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCwgaW5kZXgsIGFycmF5KSB7CgkJCWl0ZW0uZGF0YXNldC5hcmdzID0gSlNPTi5zdHJpbmdpZnkoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZXx8IiIgfSkpCgkJCWNiKGl0ZW0sIG5leHQsIGluZGV4LCBhcnJheSkKCQl9KQoJfSwKCXNpemU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLk9wdGlvbihodG1sLlRPUCwgY2FuLl9vdXRwdXQub2Zmc2V0VG9wKQoJCW1zZy5PcHRpb24oaHRtbC5MRUZULCBjYW4uX291dHB1dC5vZmZzZXRMZWZ0KQoJCW1zZy5PcHRpb24oaHRtbC5XSURUSCwgY2FuLl9vdXRwdXQub2Zmc2V0V2lkdGgpCgkJbXNnLk9wdGlvbihodG1sLkhFSUdIVCwgY2FuLl9vdXRwdXQub2Zmc2V0SGVpZ2h0KQoJCW1zZy5PcHRpb24oaHRtbC5TQ1JPTEwsIGNhbi51c2VyLmlzTW9iaWxlPyBjYW4uX3RhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2Nyb2xsVG9wOiBjYW4uX291dHB1dC5zY3JvbGxUb3ApCgkJbXNnLk9wdGlvbihodG1sLk1BUkdJTl9YLCBjYW4uQ29uZihodG1sLk1BUkdJTl9YKSkKCQltc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1ksIGNhbi5Db25mKGh0bWwuTUFSR0lOX1kpKQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIGNhbi5Db25mKGNoYXQuTEFZT1VUKSB9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIG1zZywgd29yZCkgeyB2YXIgZmllbGRzID0gY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUykpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtbaHRtbC5GSUVMRFNFVF9QTFVHSU4sIGh0bWwuTEVHRU5EXV0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0uaW5uZXJIVE1MLmluZGV4T2Yod29yZFsxXSkgPT0gLTEpIHsgcmV0dXJuIH0KCgkJCXZhciBsaXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbS5uZXh0U2libGluZywgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZXx8IiIgfSkKCQkJdmFyIG1ldGEgPSBpdGVtLnBhcmVudE5vZGUuX21ldGE7IGlmICghbWV0YSkgeyByZXR1cm4gfQoKCQkJdmFyIGRhdGEgPSB7Y3R4OiAiY2FuIiwgY21kOiAiQWN0aW9uIiwKCQkJCXR5cGU6IG1kYi5QTFVHSU4sIG5hbWU6IGl0ZW0uaW5uZXJIVE1MLCB0ZXh0OiBzaHkoIui3s+i9rCIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbS5wYXJlbnROb2RlLCBodG1sLklOUFVUX0FSR1MpWzBdOyBpbnB1dCAmJiBpbnB1dC5mb2N1cygpCgkJCQl9KSwgYXJndW1lbnQ6IEpTT04uc3RyaW5naWZ5KGxpc3QpLAoJCQl9CgkJCWlmIChtZXRhLmluZGV4KSB7CgkJCQlkYXRhLmNvbnRleHQgPSAiIiwgZGF0YS5jb21tYW5kID0gbWV0YS5pbmRleAoJCQl9IGVsc2UgaWYgKG1ldGEuY21kKSB7CgkJCQlkYXRhLmNvbnRleHQgPSBtZXRhLmN0eCwgZGF0YS5jb21tYW5kID0gbWV0YS5jbWQKCQkJfSBlbHNlIHsKCQkJCXJldHVybgoJCQl9CgkJCW1zZy5QdXNoKGRhdGEsIGZpZWxkcykKCQl9KQoJfSwKfSkK",
        "usr/volcanos/panel/footer.css": "ZmllbGRzZXQuRm9vdGVyIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzowIDVweDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCB7IG92ZXJmbG93OmhpZGRlbjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYgeyBwYWRkaW5nOjVweDsgaGVpZ2h0OjIxcHg7IGN1cnNvcjpwb2ludGVyOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzJlNTE1ZjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYudGl0bGUgeyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdi5zdGF0ZSB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LnRvYXN0IHsgYmFja2dyb3VuZC1jb2xvcjpkYXJrY3lhbjsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LmNtZCB7IHBhZGRpbmc6MHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGlucHV0W25hbWU9Y21kXSB7IHdpZHRoOjEyMHB4OyBib3JkZXItcmFkaXVzOjA7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgaW5wdXRbbmFtZT1jbWRdOmZvY3VzIHsgd2lkdGg6MzIwcHg7IH0K",
        "usr/volcanos/panel/footer.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll90aXRsZShjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fc3RhdGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3RvYXN0KGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9jb21tYW5kKGNhbiwgbXNnLCB0YXJnZXQpCgl9LAoJX3RpdGxlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QobXNnLnJlc3VsdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuVElUTEUsIGh0bWwuRElWLCBpdGVtXSwgdGl0bGU6ICLogZTns7vnq5nplb8ifV0pCgkJfSkKCX0sCglfc3RhdGU6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuU1RBVEUpfHxjYW4uQ29uZihjaGF0LlNUQVRFKSwgWyJuY21kIiwgIm50aXAiXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFtjaGF0LlNUQVRFLCBpdGVtXSksIGh0bWwuRElWLCBjYW4uQ29uZihpdGVtKV0sIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbSwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyI6ICIsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFtjYW4uQ29uZihpdGVtKXx8IiIsIGh0bWwuU1BBTiwgaXRlbV19LAoJCQldLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25leHBvcnRbaXRlbV0oY2FuKSB9fV0pCgkJfSkKCX0sCglfdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4udG9hc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2hhdC5UT0FTVCwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZXhwb3J0WyJudGlwIl0oY2FuKSB9fV0pLmZpcnN0Cgl9LAoJX2NvbW1hbmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiY21kIiwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbik7IGlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlzd2l0Y2ggKGV2ZW50LnRhcmdldC52YWx1ZSkgewoJCQkJY2FzZSBjbGkuQ0xPU0U6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJY2FzZSBjbGkuQ0xFQVI6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJZGVmYXVsdDoKCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBjYW4uY29yZS5TcGxpdChldmVudC50YXJnZXQudmFsdWUsIGljZS5TUCksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQljYW4uY2xpICYmIGNhbi5jbGkuY2xvc2UoKSwgY2FuLm9uZXhwb3J0LmZsb2F0KGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkge30sICJjbGkiLCB0cnVlKQoJCQkJCX0pCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIGNtZCIpCgl9LAoKCXRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZywgdGl0bGUsIGNvbnRlbnQsIGZpbGVsaW5lLCB0aW1lKSB7IGNhbi5fdGlwcyA9IGNhbi5fdGlwc3x8Y2FuLnJlcXVlc3QoKQoJCWNhbi5fdGlwcy5QdXNoKHt0aW1lOiB0aW1lLCBmaWxlbGluZTogZmlsZWxpbmUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudH0pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm50aXAiKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGNhbi50b2FzdCwgW3RpbWUuc3BsaXQoaWNlLlNQKS5wb3AoKSwgdGl0bGUsIGNvbnRlbnRdLmpvaW4oaWNlLlNQKSkKCX0sCgljb3VudDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5jb3JlLktleXMoaHRtbC5TUEFOLCBuYW1lKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLmlubmVySFRNTCA9IGNhbi5Db25mKG5hbWUsIHBhcnNlSW50KGNhbi5Db25mKG5hbWUpfHwiMCIpKzErIiIpKyIiCgkJfSkKCX0sCgluY21kOiBmdW5jdGlvbihjYW4sIG1zZywgX2ZvbGxvdywgX2NtZHMpIHsgY2FuLl9jbWRzID0gY2FuLl9jbWRzfHxjYW4ucmVxdWVzdCgpCgkJY2FuLl9jbWRzLlB1c2goe3RpbWU6IGNhbi5iYXNlLlRpbWUoKSwgZm9sbG93OiBfZm9sbG93LCBjbWRzOiBfY21kc30pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm5jbWQiKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbikgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl90YXJnZXQpIH0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZywgbnVsbCwgY2FuLl9vdXRwdXQpIH0pIH0sCglvbnRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25pbXBvcnQudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2d9KSB9LAoJb25yZW1vdGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmltcG9ydC5uY21kLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkgfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4pIH0sCglvbmNvbW1hbmRmb2N1czogZnVuY3Rpb24oY2FuKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbImRpdi5jbWQiLCAiaW5wdXQiXSwgZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldEhlaWdodCB9LAoJZmxvYXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgbmFtZSwgYm90dG9tKSB7IGlmIChjYW5bbmFtZV0pIHsgcmV0dXJuIGNhbltuYW1lXS5jbG9zZSgpIH0KCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCAic3RvcnkgdG9hc3QgZmxvYXQiLCB7fSwgY2FuLl9yb290Ll90YXJnZXQpCgkJdWkuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuZmlyc3QpLCBkZWxldGUoY2FuW25hbWVdKSB9CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgaGVpZ2h0LCB3aWR0aCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLmZpcnN0LCBodG1sLkxFRlQsIGxlZnQsIGh0bWwuVE9QLCB0b3ApCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkub3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC0yOCwgaHRtbC5NQVhfV0lEVEgsIHdpZHRoKQoJCX0pCgoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW2NsaS5DTE9TRSwgY2xpLlJFRlJFU0gsIHtpbnB1dDogaHRtbC5URVhULCBwbGFjZWhvbGRlcjogImZpbHRlciIsIF9pbml0OiBmdW5jdGlvbihpbnB1dCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgImtleW1hcC5mb2N1cyIsIGNhbi5yZXF1ZXN0KHt9LCB7Y2I6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyB1aS5jbG9zZSgpOyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBpY2UuU1ApIHsgaW5wdXQuZm9jdXMoKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQkJfX0pKQoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCWlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gMCkgeyByZXR1cm4gfQoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgeyBpZiAodGQuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCX0gfSkKCQkJfSkKCQl9fV0sIHVpLmFjdGlvbiwga2l0LkRpY3QoY2xpLkNMT1NFLCB1aS5jbG9zZSwgY2xpLlJFRlJFU0gsIGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmNsb3NlKCksIGNhbi50b2FzdC5jbGljaygpfSkpCgoJCWlmIChtc2cpIHsKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkgewoJCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpCgkJCQl9fQoJCQl9LCB1aS5vdXRwdXQpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cuUmVzdWx0KCksIHVpLm91dHB1dCkKCQl9CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuZmlyc3QsIGJvdHRvbT8ge2JvdHRvbTogaHRtbC5BQ1RJT05fSEVJR0hULCB0b3A6ICIifToge30pLCBjYW5bbmFtZV0gPSB1aQoJfSwKCW50aXA6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fdGlwcywgZnVuY3Rpb24oKSB7fSwgIm50aXAiKQoJfSwKCW5jbWQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fY21kcywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpIHsKCQkJdmFyIGNtZHMgPSBjYW4uYmFzZS5PYmoobGluZS5jbWRzKTsgc3dpdGNoIChsaW5lLmZvbGxvdykgewoJCQkJY2FzZSAiY2FuLkFjdGlvbiI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQkJY2FzZSAiY2FuLkZvb3RlciI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQl9CgkJCXN3aXRjaCAoY21kc1swXSkgewoJCQkJY2FzZSAid2ViLndpa2kud29yZCI6IGNtZHMgPSBjbWRzLnNsaWNlKDUpOyBicmVhawoJCQl9CgoJCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2csIHRvcCwgbGVmdCwgd2lkdGgsIGhlaWdodCkgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogY21kc1swXSwgYXJnczogY21kcy5zbGljZSgxKSwgaGVpZ2h0OiBoZWlnaHQtMTAwLCB3aWR0aDogd2lkdGh9LCBmdW5jdGlvbihzdWIpIHsKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZCwgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNtZHNbMF0sIGNtZCwgY2IpIH0KCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwge3RvcDogdG9wKzEwMCwgbGVmdDogbGVmdH0pCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX2xlZ2VuZCwge2Rpc3BsYXk6IGh0bWwuQkxPQ0t9KQoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIHsibWF4LXdpZHRoIjogd2lkdGh9KQoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBzdWIuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9KQoJCX0sICJuY21kIikKCX0sCn0pCg==",
        "usr/volcanos/panel/header.css": "ZmllbGRzZXQuSGVhZGVyIHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IHBhZGRpbmc6MCA1cHg7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzpoaWRkZW47IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2IHsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyBmbG9hdDpsZWZ0OyBjdXJzb3I6cG9pbnRlcjsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXY6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMyZTUxNWY7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnRpdGxlIHsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUgeyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyIHsgcGFkZGluZzowOyBoZWlnaHQ6MzFweDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyPmltZyB7IGhlaWdodDozMXB4OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2ggeyBtYXJnaW4tbGVmdDoyMHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2g+aW5wdXQgeyBtYXJnaW4tdG9wOi01cHg7IGJvcmRlci1yYWRpdXM6MDsgfQoK",
        "usr/volcanos/panel/header.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5vbmltcG9ydC5fdGl0bGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3N0YXRlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9hdmF0YXIoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2JhY2tncm91bmQoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fbWVudXMoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25kYWVtb24uX2luaXQoY2FuKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCV90aXRsZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKG1zZy5yZXN1bHQsIGNhbi5Db25mKGNoYXQuVElUTEUpfHxbInNoeWxpbnV4LmNvbS94L2NvbnRleHRzIl0pLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5USVRMRSwgaHRtbC5ESVYsIGl0ZW1dLCB0aXRsZTogIui/lOWbnuS4u+mhtSIsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24udGl0bGUoZXZlbnQsIGNhbikKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCB7fSwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgfSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkgewoJCQkJCWV2ZW50LnNoaWZ0S2V5PyBjYW4udXNlci5vcGVuKGxpc3RbaW5kZXhdLnBhdGgpOiBjYW4udXNlci5qdW1wcyhsaXN0W2luZGV4XS5wYXRoKQoJCQkJfSkKCQkJfX1dKQoJCX0pCgl9LAoJX3N0YXRlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LlNUQVRFKXx8Y2FuLkNvbmYoY2hhdC5TVEFURSksIFttZGIuVElNRSwgYWFhLlVTRVJOSUNLXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0gPT0gYWFhLkFWQVRBUiApIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBsaXN0OiBbe2ltZzogaWNlLlNQfV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgW2Nhbi5wYWdlLkZvcm1hdChodG1sLklNRywgY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pLCAxNjApXSkKCQkJCX19XSk7IHJldHVybgoJCQl9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBodG1sLkRJViwgKGNhbi5Db25mKGl0ZW0pfHwiIikuc2xpY2UoMCwgMTApXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbiwgaXRlbV0sIFtldmVudCwgY2FuLCBpdGVtXSkKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtID09IG1kYi5USU1FICYmIGNhbi5vbmltcG9ydC5fdGltZShjYW4sIHRhcmdldCkgfX1dKQoJCX0pCgl9LAoJX2F2YXRhcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgImRpdi5zdGF0ZS5hdmF0YXI+aW1nIiwge3NyYzogY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pfSkKCX0sCglfYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm9ubGF5b3V0LmJhY2tncm91bmQoY2FuLCBjYW4ub25leHBvcnQuYmFja2dyb3VuZChjYW4pKQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuU0VBUkNILCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6ICJjb21tYW5kLHNwYWNlLHRleHQifHxtZGIuRk9SRUFDSCwgd29yZDogZXZlbnQudGFyZ2V0LnZhbHVlfSkpCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIHNlYXJjaCIpCgkJY2FuLm9uaW1wb3J0Lm1lbnUoY2FuLCBtZGIuU0VBUkNILCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiB1aS52YWx1ZX0pKQoJCX0pCgl9LAoJX21lbnVzOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLnVzZXIubW9kLmlzUG9kPyBbY3R4LkNPTkZJR106CgkJCWNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpfHxjYW4uQ29uZihjaGF0Lk1FTlVTKSwgY2FuLm9uYWN0aW9uLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmFjdGlvbltidXR0b25dfHxmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQkJY2FuLnJ1bihldmVudCwgW2J1dHRvbl0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBjYW4udXNlci50cmFucyhjYW4sIGJ1dHRvbikpIH0pCgkJCQl9LCB7ZXZlbnQ6IGV2ZW50LCBjYW46IGNhbiwgYnV0dG9uOiBidXR0b259KQoJCQl9KQoJfSwKCglfdGltZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDUwMH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGltZShjYW4sIHRhcmdldCkgfSkKCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge2FjdGlvbjogImRhdGUiLCBzdHlsZTogeyJtaW4td2lkdGgiOiAzMDZ9LCBfaW5pdDogZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wKSB7IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHt0b3A6IHRvcCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkgfSkKCQl9fSwgdGFyZ2V0KSwgdGFyZ2V0Lm9ubW91c2VlbnRlciA9IHRhcmdldC5jbGljawoJfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmltcG9ydC50b3BpYyhjYW4pCgkJdGFyZ2V0LmlubmVySFRNTCA9IGNhbi51c2VyLnRpbWUoY2FuLCBudWxsLCAiJXcgJUg6JU06JVMiKQoJfSwKCWF2YXRhcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXZhdGFyKSB7IGlmIChjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5BVkFUQVIsIFthdmF0YXJdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5hdmF0YXIgPSBhdmF0YXIsIGNhbi5vbmltcG9ydC5fYXZhdGFyKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIHRvcGljKSB7IHRvcGljICYmIChjYW4uX3RvcGljID0gdG9waWMpCgkJdG9waWMgPSBjYW4uX3RvcGljIHx8IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVE9QSUMpIHx8IFZvbGNhbm9zLm1ldGEuYXJncy50b3BpYyB8fCAoY2FuLmJhc2UuaXNOaWdodCgpPyBjaGF0LkJMQUNLOiBjaGF0LldISVRFKQoJCWNhbi5yZXF1aXJlKFsiL2NoYXQvdG9waWMvIit0b3BpYysiLmNzcyJdKQoJCWNhbi51c2VyLnRvcGljKGNhbiwgdG9waWMpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYmFja2dyb3VuZCkgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuQkFDS0dST1VORCwgW2JhY2tncm91bmRdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZCwgY2FuLm9uaW1wb3J0Ll9iYWNrZ3JvdW5kKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCW1lbnU6IGZ1bmN0aW9uKGNhbiwgY21kcywgY2IsIHRyYW5zKSB7IGNhbi5iYXNlLmlzU3RyaW5nKGNtZHMpICYmIChjbWRzID0gW2NtZHNdKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBjbWRzWzBdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKGNtZHMuc2xpY2UoMSksIFtjbWRzWzBdXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pKSB7CgkJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0sIHRyYW5zKV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgW2l0ZW1dKQoJCQkJCS8vIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIGNtZHMpCgkJCQl9fQoKCQkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc0FycmF5KGl0ZW0pKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHJldHVybiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlLCB0cmFucykgfSkKCQkJCXJldHVybiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIGNhbi51c2VyLnRyYW5zKGNhbiwgbGlzdFswXSwgdHJhbnMpXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LnNsaWNlKDEpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhLCBpbmRleCkgewoJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtW2luZGV4KzFdLCBpdGVtKQoJCQkJCX0sIHRyYW5zKQoJCQkJfX0KCgkJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QoaXRlbSkpIHsKCQkJCXJldHVybiBpdGVtCgkJCX0KCQl9KSB9XSkuZmlyc3QKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJ0b3BpYyI6IHNoeSgi5Li76aKYIiwgewoJCSJkZW1vIjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgY21kc1swXSkgfSwKCX0sIFsidG9waWM6c2VsZWN0PXdoaXRlLGJsYWNrIiwgInJ1bjpidXR0b24iLCAiZGVtbzpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4ub25pbXBvcnQudG9waWMoY2FuLCBjbWRzWzBdKQoJfSksCgkiY29va2llIjogc2h5KCLmj5DnpLoiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm1pc2MuQ29va2llKGNhbiksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJbXNnLlB1c2goImtleSIsIGtleSksIG1zZy5QdXNoKCJ2YWx1ZSIsIHZhbHVlKQoJCX0pCgl9KSwKCSJhbGVydCI6IHNoeSgi5o+Q56S6Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLnVzZXIuYWxlcnQoY21kc1swXSkKCX0pLAoJImluZm8iOiBzaHkoIuS/oeaBryIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJImxvZyI6IHNoeSgi5pel5b+XIiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljb25zb2xlLmxvZyhjbWRzWzBdKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogW1sic2V0dGluZyIsIGNoYXQuQkxBQ0ssIGNoYXQuV0hJVEUsIGNoYXQuUFJJTlQsIGNvZGUuV0VCUEFDSywgInRvaW1hZ2UiLCBjdHguQ09ORklHXV0sCglfdHJhbnM6IHsKCQkic2VhcmNoIjogIuaQnOe0oiIsCgoJCSJzZXR0aW5nIjogIuiuvue9riIsCgkJImJsYWNrIjogIum7keiJsuS4u+mimCIsCgkJIndoaXRlIjogIueZveiJsuS4u+mimCIsCgkJInByaW50IjogIuaJk+WNsOS4u+mimCIsCgkJIndlYnBhY2siOiAi5omT5YyF6aG16Z2iIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoJCSJjb25maWciOiAi5ouJ5Y+W6YWN572uIiwKCgkJInNoYXJldXNlciI6ICLlhbHkuqvnlKjmiLciLAoJCSJzZXRuaWNrIjogIuiuvue9ruaYteensCIsCgkJInBhc3N3b3JkIjogIuS/ruaUueWvhueggSIsCgkJImxhbmd1YWdlIjogIuivreiogOWcsOWMuiIsICJjaGluZXNlIjogIuS4reaWhyIsCgkJImNsZWFyIjogIua4hemZpOiDjOaZryIsCgkJImxvZ291dCI6ICLpgIDlh7rnmbvlvZUiLAoJfSwKCW9ubWFpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmICghY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBtc2cuT3B0aW9uKGFhYS5VU0VSTklDSyl8fG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpKSB7CgkJCQltc2cuT3B0aW9uKGNoYXQuU1NPKT8gY2FuLnVzZXIuanVtcHMobXNnLk9wdGlvbihjaGF0LlNTTykpOiBjYW4udXNlci5sb2dpbihjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OTUFJTiwgbXNnKQoJCQkJfSwgbXNnLk9wdGlvbihhYWEuTE9HSU4pLCBtc2cuT3B0aW9uKCJsb2dpbi5kZXYiKSkKCQkJCXJldHVybiAvLyDnmbvlvZXorqTor4EKCQkJfQoJCQljYW4uYmFzZS5Db3B5KGNhbi5vbmFjdGlvbi5fdHJhbnMsIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuVFJBTlMpLCB7fSkpCgkJCWNhbi51c2VyLmluZm8udXNlcm5pY2sgPSBjYW4uQ29uZihhYWEuVVNFUk5JQ0spLCBjYW4udXNlci5pbmZvLmF2YXRhciA9IG1zZy5PcHRpb24oYWFhLkFWQVRBUiksIGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9IG1zZy5PcHRpb24oYWFhLkJBQ0tHUk9VTkQpCgkJCWNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBhYWEuTEFOR1VBR0UpfHxtc2cuT3B0aW9uKGFhYS5MQU5HVUFHRSkKCQkJbXNnLk9wdGlvbihuZnMuU0NSSVBUKSAmJiBjYW4ucmVxdWlyZShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihuZnMuU0NSSVBUKSksIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25hY3Rpb24uc291cmNlKGNhbiwgbXNnKSB9KSAKCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05MT0dJTiwgbXNnKSB9LCBjYW4uX291dHB1dCkKCQl9KQoJfSwKCW9uc2VhcmNoZm9jdXM6IGZ1bmN0aW9uKGNhbikgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgWyJkaXYuc2VhcmNoIiwgaHRtbC5JTlBVVF0sIGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQuZm9jdXMoKSB9KSB9LAoJb253ZWJwYWNrOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25hY3Rpb25bY29kZS5XRUJQQUNLXShtc2cuX2V2ZW50LCBjYW4pIH0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgeyBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSB9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikgfSwKCgl0aXRsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge307IGNhbi5jb3JlLkxpc3QoW2NoYXQuVElUTEUsIGNoYXQuVE9QSUMsIGNoYXQuTEFZT1VUXSwgZnVuY3Rpb24oa2V5KSB7CgkJCXZhciB2YWx1ZSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSk7IHZhbHVlICYmIChhcmdzW2tleV0gPSB2YWx1ZSkKCQl9KQoJCWNhbi51c2VyLmp1bXBzKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncywgdHJ1ZSkpCgl9LAoKCWJsYWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXdoaXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXByaW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgW2NoYXQuV0hJVEUsIGJ1dHRvbl0pLCBjYW4uc2V0Uml2ZXIoaHRtbC5IRUlHSFQsICIiKSwgY2FuLnNldEFjdGlvbihodG1sLkhFSUdIVCwgIiIpIH0sCgl3ZWJwYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IGNhbi51c2VyLnRpdGxlKCl9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uY29yZS5JdGVtKFZvbGNhbm9zLm1ldGEucGFjaywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgCgkJCQljYW4uY29yZS5MaXN0KFsiX2V2ZW50IiwgIl9jYW4iLCAiX3hociIsIGljZS5NU0dfU0VTU0lELCAiIl0sIGZ1bmN0aW9uKGtleSkgeyBkZWxldGUobXNnW2tleV0pIH0pCgkJCX0pCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgewoJCQkJdG9waWM6IGNhbi5fdG9waWMsIGxheW91dDogIGNhbi5nZXRBY3Rpb24oY2hhdC5MQVlPVVQpLAoJCQkJcml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSksCgkJCQluYW1lOiBkYXRhLm5hbWUsIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KFZvbGNhbm9zLm1ldGEucGFjayksCgkJCQlhcmdzOiAibmFtZSx0b3BpYyxsYXlvdXQscml2ZXIsc3Rvcm0iLAoJCQl9KQoKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIuaJk+WMheS4rS4uLiIsIGNvZGUuV0VCUEFDSykKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5XRUJQQUNLLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQl0b2FzdC5jbG9zZSgpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5omT5YyF5oiQ5YqfIiwgY29kZS5XRUJQQUNLKQoJCQkJY2FuLnVzZXIuZG93bmxvYWQoY2FuLCAiL3NoYXJlL2xvY2FsLyIrbXNnLlJlc3VsdCgpLCBuYW1lLCBuZnMuSFRNTCkKCQkJfSkKCQl9KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi51c2VyLnRpdGxlKCksIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCWNvbmZpZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogInNjb3BlIiwgdmFsdWU6ICJldGMvbG9jYWwuc2h5In1dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT05GSUcsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci5qdW1wcyhtc2cuUmVzdWx0KCkpIH0pCgkJfSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBsaXN0LCBjYikKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXJncykgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0uY29uY2F0KGFyZ3N8fFtdLCBbY2hhdC5SSVZFUiwgY2FuLkNvbmYoY2hhdC5SSVZFUil8fCIiLCBjaGF0LlNUT1JNLCBjYW4uQ29uZihjaGF0LlNUT1JNKXx8IiJdKSkKCX0sCgoJdXNlcm5pY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBbInNoYXJldXNlciIsICJzZXRuaWNrIiwgYWFhLlBBU1NXT1JELCBbYWFhLkxBTkdVQUdFLCBhYWEuQ0hJTkVTRSwgYWFhLkVOR0xJU0hdLCBjbGkuQ0xFQVIsIGFhYS5MT0dPVVRdKQoJfSwKCXNoYXJldXNlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRSwgbWRiLlRZUEUsIGFhYS5MT0dJTl0pCgl9LAoJc2V0bmljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogYWFhLlVTRVJOSUNLLCB2YWx1ZTogY2FuLkNvbmYoYWFhLlVTRVJOSUNLKX1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5VU0VSTklDSywgW2xpc3RbMF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBhYWEuVVNFUk5JQ0spLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaXRlbSwgY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBsaXN0WzBdKSkKCQkJCX0pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCglwYXNzd29yZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IGh0bWwuUEFTU1dPUkQsIHR5cGU6IGh0bWwuUEFTU1dPUkQsIGFjdGlvbjogaWNlLkFVVE99LAoJCQl7bmFtZTogaHRtbC5QQVNTV09SRCwgdHlwZTogaHRtbC5QQVNTV09SRCwgYWN0aW9uOiBpY2UuQVVUT30sCgkJXSwgZnVuY3Rpb24obGlzdCkgewoJCQlpZiAobGlzdFswXSAhPSBsaXN0WzFdKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sICLlr4bnoIHkuI3kuIDoh7QiKSwgdWkuZm9jdXMoKSwgdHJ1ZSB9CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5QQVNTV09SRCwgW2xpc3RbMF1dKQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCgljaGluZXNlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIGFhYS5MQU5HVUFHRSwgInpoIikgfSwKCWVuZ2xpc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwgYWFhLkxBTkdVQUdFLCAiZW4iKSB9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmJhY2tncm91bmQoZXZlbnQsIGNhbiwgIiIpLCBjYW4ub25pbXBvcnQuYXZhdGFyKGV2ZW50LCBjYW4sICIiKSB9LAoJbG9nb3V0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmxvZ291dChjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRIZWlnaHQgfSwKCXRvcGljOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdG9waWMgfSwKCWF2YXRhcjogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYXZhdGFyID09ICJ2b2lkIikgewoJCQlyZXR1cm4gIiIKCQl9CgkJcmV0dXJuIGNhbi51c2VyLmluZm8uYXZhdGFyCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9PSAidm9pZCIpIHsKCQkJcmV0dXJuICIiCgkJfQoJCXJldHVybiBjYW4udXNlci5pbmZvLmJhY2tncm91bmQKCX0sCn0pCg==",
        "usr/volcanos/panel/river.css": "ZmllbGRzZXQuUml2ZXIgeyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyBwYWRkaW5nOjAgMTJweDsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IHsgd2lkdGg6MTgwcHg7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IHBhZGRpbmc6M3B4IDE2cHg7IGJvcmRlci1sZWZ0OnNvbGlkIDNweCAjMDBmZmFlOyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBib3JkZXItbGVmdDpzb2xpZCAzcHggI2NjZGM0YzsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IHsgcGFkZGluZy1sZWZ0OjVweDsgbWFyZ2luLWxlZnQ6OHB4OyB9Cg==",
        "usr/volcanos/panel/river.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLnJpdmVyX2xpc3QgPSB7fSwgY2FuLnN0b3JtX2xpc3QgPSB7fQoJCWNhbi5vbmltcG9ydC5fbWFpbihjYW4sIG1zZyksIGNhbi5vbmltcG9ydC5fbWVudShjYW4sIG1zZykKCgkJdmFyIHNlbGVjdDsgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIG1zZy5UYWJsZShmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9yaXZlcihjYW4sIGl0ZW0sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJKGluZGV4ID09IDAgfHwgaXRlbS5oYXNoID09IGNhbi5fbWFpbl9yaXZlcikgJiYgKHNlbGVjdCA9IHRhcmdldCkKCQkJfSkKCQl9KSksIHNlbGVjdCAmJiBzZWxlY3QuY2xpY2soKQoJfSwKCV9tYWluOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCS8vIGlmIChjYW4udXNlci5pc01vYmlsZSkgeyBjYW4uX21haW5fcml2ZXIgPSAicHJvZHVjdCIsIGNhbi5fbWFpbl9zdG9ybSA9ICJvZmZpY2UiIH0KCQkvLyBpZiAoY2FuLnVzZXIuaXNXZWlYaW4pIHsgY2FuLl9tYWluX3JpdmVyID0gInNlcnZpY2UiLCBjYW4uX21haW5fc3Rvcm0gPSAid3giIH0KCQljYW4uX21haW5fcml2ZXIgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlJJVkVSKXx8bXNnLk9wdGlvbihpY2UuTVNHX1JJVkVSKXx8Vm9sY2Fub3MubWV0YS5hcmdzLnJpdmVyfHxjYW4uX21haW5fcml2ZXJ8fCJwcm9qZWN0IgoJCWNhbi5fbWFpbl9zdG9ybSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuU1RPUk0pfHxtc2cuT3B0aW9uKGljZS5NU0dfU1RPUk0pfHxWb2xjYW5vcy5tZXRhLmFyZ3Muc3Rvcm18fGNhbi5fbWFpbl9zdG9ybXx8InN0dWRpbyIKCX0sCglfbWVudTogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZHx8Y2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uc2V0SGVhZGVyTWVudShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0Lk1FTlVTKSwgY2FuLkNvbmYoY2hhdC5NRU5VUyl8fGNhbi5vbmRldGFpbC5fbWVudXMpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCWNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25kZXRhaWwsIGJ1dHRvbl0sIFtldmVudCwgY2FuLCBidXR0b24sIGNhbi5Db25mKGNoYXQuUklWRVIpLCBjYW4uQ29uZihjaGF0LlNUT1JNKV0pCgkJfSkKCX0sCglfY2FydGU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgcml2ZXIsIHN0b3JtKSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWlmIChjYW4uY29yZS5WYWx1ZShjYW4uX3Jvb3QsIGNhbi5jb3JlLktleXMoY2hhdC5SSVZFUiwgcml2ZXIpKSkgeyByZXR1cm4gfQoKCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgbGlzdCwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbW9kdWxlKSB7CgkJCW1vZHVsZVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKQoJCX0pCgl9LAoJX3JpdmVyOiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiKSB7CgkJcmV0dXJuIHt0ZXh0OiBbbWV0YS5uYW1lLCBodG1sLkRJViwgaHRtbC5JVEVNXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYWN0aW9uLnN0b3JtKGV2ZW50LCBjYW4sIG1ldGEuaGFzaCkKCgkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25pbXBvcnQuX2NhcnRlKGNhbiwgY2FuLm9uZGV0YWlsLmxpc3QsIG1ldGEuaGFzaCkKCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQljYW4ucml2ZXJfbGlzdFttZXRhLmhhc2hdID0gdGFyZ2V0LCBjYih0YXJnZXQpCgkJfX0KCX0sCglfc3Rvcm06IGZ1bmN0aW9uKGNhbiwgbWV0YSwgcml2ZXIpIHsKCQlyZXR1cm4ge3RleHQ6IFttZXRhLm5hbWUsIGh0bWwuRElWLCBodG1sLklURU1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uYWN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBtZXRhLmhhc2gpCgoJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jYXJ0ZShjYW4sIGNhbi5vbmRldGFpbC5zdWJsaXN0LCByaXZlciwgbWV0YS5oYXNoKQoKCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCWNhbi5zdG9ybV9saXN0W2Nhbi5jb3JlLktleXMocml2ZXIsIG1ldGEuaGFzaCldID0gdGFyZ2V0CgkJfX0KCX0sCglkaXNwbGF5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHNob3cgPSBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl90YXJnZXQpOyBjYW4ub25sYXlvdXQuX2luaXQoY2FuKTsgcmV0dXJuIHNob3cKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi6Kej5p6Q5byV5pOOIiwgX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCXZhciBsaXN0ID0gY2FuLl9yb290LnJpdmVyCgljbWRzLmxlbmd0aCA9PSAwICYmIGNhbi5jb3JlLkl0ZW1Tb3J0KGxpc3QsICJvcmRlciIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQlpZiAoY2FuLmNvcmUuSXRlbSh2YWx1ZS5zdG9ybSkubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQltc2cuUHVzaCh7aGFzaDoga2V5LCBuYW1lOiBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IGtleTogdmFsdWUubmFtZX0pIC8vIOe+pOe7hOWIl+ihqAoJfSk7IGlmIChjbWRzLmxlbmd0aCAhPSAxICYmIGNtZHNbMV0gIT0gY2hhdC5TVE9STSkgeyByZXR1cm4gZmFsc2UgfQoKCXZhciByaXZlciA9IGxpc3RbY21kc1swXV07IGlmICghcml2ZXIpIHsgcmV0dXJuIGZhbHNlIH0KCWNhbi5jb3JlLkl0ZW1Tb3J0KHJpdmVyLnN0b3JtLCAib3JkZXIiLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJbXNnLlB1c2goe2hhc2g6IGtleSwgbmFtZTogY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBrZXk6IHZhbHVlLm5hbWV9KSAvLyDlupTnlKjliJfooagKCX0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyk7IHJldHVybiB0cnVlCn19KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFsiY3JlYXRlIiwgInNoYXJlIiwgInJlZnJlc2giXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5ydW4oe30sIFtdLCBmdW5jdGlvbihtc2cpIHsgaWYgKG1zZy5PcHRpb24oaWNlLk1TR19SSVZFUikgPT0gIl9zaGFyZSIpIHsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBudWxsLCBjYW4uX291dHB1dCksIGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLkNvbmYoY3R4LkFDVElPTil8fGNhbi5vbmFjdGlvbi5saXN0KQoJCQlpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8Y2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fdGFyZ2V0LCB0cnVlKQoJCX0pCgl9LAoJb25zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7CgkJaWYgKHdvcmRbMF0gPT0gY2hhdC5TVE9STSkgeyBjYW4ub25leHBvcnQuc3Rvcm0oY2FuLCBtc2csIHdvcmQpIH0KCX0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgewoJCWlmIChjYW4udXNlci5pc0V4dGVuc2lvbikgeyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdHguQVJHUywgSlNPTi5zdHJpbmdpZnkoe3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkpIH0KCX0sCglvbmFjdGlvbl90b3VjaDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikKCX0sCglvbmFjdGlvbl9ub3Rvb2w6IGZ1bmN0aW9uKGNhbiwgbXNnLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ub25kZXRhaWxbIua3u+WKoOW3peWFtyJdKG1zZy5fZXZlbnQsIGNhbiwgIua3u+WKoOW3peWFtyIsIHJpdmVyLCBzdG9ybSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIGxpc3QsIGNiKQoJfSwKCXN0b3JtOiBmdW5jdGlvbihldmVudCwgY2FuLCByaXZlcikgeyBjYW4uc3VibGlzdCA9IGNhbi5zdWJsaXN0fHx7fQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfSVRFTSwgY2FuLnJpdmVyX2xpc3Rbcml2ZXJdKQoJCXZhciBsaXN0ID0gY2FuLnN1Ymxpc3Rbcml2ZXJdOyBpZiAobGlzdCkgeyByZXR1cm4gY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGxpc3QpIH0KCgkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNXSwgZnVuY3Rpb24obXNnKSB7CgkJCXZhciBzZWxlY3QgPSAwOyBsaXN0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogaHRtbC5MSVNULCBsaXN0OiBtc2cuVGFibGUoZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCXJpdmVyID09IGNhbi5fbWFpbl9yaXZlciAmJiBpdGVtLmhhc2ggPT0gY2FuLl9tYWluX3N0b3JtICYmIChzZWxlY3QgPSBpbmRleCkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQuX3N0b3JtKGNhbiwgaXRlbSwgcml2ZXIpCgkJCX0pIH1dKS5maXJzdCwgbGlzdC5jaGlsZHJlbi5sZW5ndGggPiAwICYmIGxpc3QuY2hpbGRyZW5bc2VsZWN0XS5jbGljaygpCgoJCQlldmVudC50YXJnZXQubmV4dFNpYmxpbmcgJiYgY2FuLl9vdXRwdXQuaW5zZXJ0QmVmb3JlKGxpc3QsIGV2ZW50LnRhcmdldC5uZXh0U2libGluZykKCQkJY2FuLnN1Ymxpc3Rbcml2ZXJdID0gbGlzdAoJCX0pCgl9LAoJYWN0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5zdWJsaXN0W3JpdmVyXSwge2Rpc3BsYXk6IGh0bWwuQkxPQ0t9KQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfSVRFTSwgY2FuLnJpdmVyX2xpc3Rbcml2ZXJdKQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuRElWX0xJU1QsIGh0bWwuRElWX0lURU1dLCBjYW4uc3Rvcm1fbGlzdFtjYW4uY29yZS5LZXlzKHJpdmVyLCBzdG9ybSldKQoKCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TVE9STV9TRUxFQ1QsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7CgkJCQlyaXZlcjogY2FuLkNvbmYoY2hhdC5SSVZFUiwgcml2ZXIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSwgc3Rvcm0pLAoJCQl9KSkKCQl9KQoJfSwKCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci50cmFucyhjYW4sIHsicHVibGljIjogIuWFrOW8gOe+pCIsICJwcm90ZWN0ZWQiOiAi5YaF6YOo576kIiwgInByaXZhdGUiOiAi56eB5pyJ576kIn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWwoJCQl7bmFtZTogbWRiLlRZUEUsIHZhbHVlczogW2NoYXQuUFVCTElDLCBjaGF0LlBST1RFQ1RFRCwgY2hhdC5QUklWQVRFXSwgX3RyYW5zOiAi57G75Z6LIn0sCgkJCXtuYW1lOiBtZGIuTkFNRSwgdmFsdWU6ICJoaSIsIF90cmFuczogIue+pOWQjSJ9LCB7bmFtZTogbWRiLlRFWFQsIHZhbHVlOiAiaGVsbG8iLCBfdHJhbnM6ICLnroDku4sifSwKCQldLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5DUkVBVEUsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IG1zZy5SZXN1bHQoKX0pIH0pCgkJfSkKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBjYW4uQ29uZihjaGF0LlNUT1JNKX1dLCBbbWRiLlRZUEUsIGNoYXQuU1RPUk1dKQoJfSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgYXJncyA9IHtyaXZlcjogY2FuLkNvbmYoY2hhdC5SSVZFUiksIHN0b3JtOiBjYW4uQ29uZihjaGF0LlNUT1JNKSwgdG9waWM6IGNhbi5nZXRIZWFkZXIoY2hhdC5UT1BJQyksIGxheW91dDogY2FuLmdldEFjdGlvbihjaGF0LkxBWU9VVCl9CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGN0eC5BUkdTLCBKU09OLnN0cmluZ2lmeShhcmdzKSkgfQoJCWNhbi5taXNjLlNlYXJjaChjYW4sIGFyZ3MpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuiPnOWNleS6pOS6kiIsCglsaXN0OiBbIuWFseS6q+e+pOe7hCIsICLmt7vliqDlupTnlKgiLCAi5re75Yqg6K6+5aSHIiwgIua3u+WKoOeUqOaItyIsICLph43lkb3lkI3nvqTnu4QiLCAi5Yig6Zmk576k57uEIl0sCglzdWJsaXN0OiBbIuWFseS6q+W6lOeUqCIsICLmt7vliqDlt6XlhbciLCAi5L+d5a2Y5Y+C5pWwIiwgIumHjeWRveWQjeW6lOeUqCIsICLliKDpmaTlupTnlKgiXSwKCS8vIF9tZW51czogWwoJLy8gCVsiY3JlYXRlIiwgIuWIm+W7uue+pOe7hCIsICLmt7vliqDlupTnlKgiLCAi5re75Yqg5bel5YW3IiwgIua3u+WKoOiuvuWkhyIsICLliJvlu7rnqbrpl7QiXSwKCS8vIAlbInNoYXJlIiwgIuWFseS6q+e+pOe7hCIsICLlhbHkuqvlupTnlKgiLCAi5YWx5Lqr5bel5YW3IiwgIuWFseS6q+iuvuWkhyIsICLorr/pl67nqbrpl7QiXSwKCS8vIF0sCgoJIuWIm+W7uue+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKSB9LAoJIuWFseS6q+e+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW3tuYW1lOiBjaGF0LlRJVExFLCB2YWx1ZTogcml2ZXJ9XSwgW21kYi5UWVBFLCBjaGF0LlJJVkVSXSkKCX0sCgki5re75Yqg5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgeyBjYW4ub25kZXRhaWwuY3JlYXRlKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIH0sCgki5YWx5Lqr5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW3tuYW1lOiBjaGF0LlRJVExFLCB2YWx1ZTogc3Rvcm19XSwgW21kYi5UWVBFLCBjaGF0LlNUT1JNXSkKCX0sCgki5re75Yqg5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgY3R4LkNPTU1BTkQsICJjb250ZXh0LGNvbW1hbmQiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLkhBU0gsIHN0b3JtXS5jb25jYXQoW2ljZS5QT0QsICIiLCBpY2UuQ1RYLCBpdGVtWzBdLCBpY2UuQ01ELCBpdGVtWzFdXSksIGZ1bmN0aW9uKG1zZykgeyBuZXh0KCkgfSkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkgfSkKCX0sCgki5YWx5Lqr5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgbWRiLlBMVUdJTiwgIm5hbWUsY29udGV4dCxjb21tYW5kLGFyZ3VtZW50IiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4udXNlci5zaGFyZShjYW4sIGNhbi5yZXF1ZXN0KGV2ZW50KSwgW3JpdmVyLCBjdHguQUNUSU9OLCBjaGF0LlNIQVJFLCBtZGIuVFlQRSwgY2hhdC5GSUVMRCwKCQkJCW1kYi5OQU1FLCBpdGVtWzJdLCBtZGIuVEVYVCwgaXRlbVszXSwgY2hhdC5USVRMRSwgaXRlbVswXSwgY2hhdC5SSVZFUiwgcml2ZXIsIGNoYXQuU1RPUk0sIHN0b3JtLAoJCQldKQoJCX0pCgl9LAoKCSLmt7vliqDorr7lpIciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnVzZXIuc2VsZWN0KGV2ZW50LCBjYW4sIHdlYi5TUEFDRSwgInR5cGUsbmFtZSx0ZXh0IiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuTk9ERSwgY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLlRZUEUsIGl0ZW1bMF0sIG1kYi5OQU1FLCBpdGVtWzFdXSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0pCgl9LAoJIuWFseS6q+iuvuWkhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYWFhLklOVklURSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFNjcmlwdChjYW4sIG1zZy5SZXN1bHQoKSwgYnV0dG9uKSB9KQoJfSwKCSLliJvlu7rnqbrpl7QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgeyBjYW4ucmVxdWVzdChldmVudCwge2FjdGlvbjogYnV0dG9ufSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6ICJuYW1lIiwgdmFsdWU6ICJoaSJ9LCB7bmFtZTogInJlcG9zIn0sIHtuYW1lOiAidGVtcGxhdGUifV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY2xpLlNUQVJULCBhcmdzLmNvbmNhdChjaGF0LlJJVkVSLCByaXZlciksIGZ1bmN0aW9uKG1zZykgewoJCQkJdmFyIGxpbmsgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5jb3JlLktleXMoY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCksIG1zZy5PcHRpb24obWRiLk5BTUUpKX0pCgkJCQljYW4udXNlci50b2FzdChjYW4sIGxpbmspLCBjYW4udXNlci5vcGVuKGxpbmspCgkJCX0pCgkJfSkKCX0sCgki6K6/6Zeu56m66Ze0IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5zZWxlY3Qoe3JpdmVyOiByaXZlcn0sIGNhbiwgd2ViLlNQQUNFLCAidGltZSx0eXBlLG5hbWUsdGV4dCIpCgl9LAoKCSLmt7vliqDnlKjmiLciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnVzZXIuc2VsZWN0KGV2ZW50LCBjYW4sIGNoYXQuVVNFUiwgInVzZXJuaWNrLHVzZXJuYW1lIiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuVVNFUiwgY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgYWFhLlVTRVJOQU1FLCBpdGVtWzBdXSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0pCgl9LAoJIumHjeWRveWQjee+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUVdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHtoYXNoOiByaXZlcn0pLCBtZGIuTU9ESUZZLCBbbWRiLk5BTUUsIGRhdGEubmFtZV0sIGZ1bmN0aW9uKG1zZykgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyfSkgfSkKCQl9KQoJfSwKCSLliKDpmaTnvqTnu4QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHJpdmVyfSksIG1kYi5SRU1PVkUsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiAiIiwgc3Rvcm06ICIifSkgfSkKCX0sCgoJIuS/neWtmOWPguaVsCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLmdldEFjdGlvbihjdHguQVJHUywgZnVuY3Rpb24oaXRlbSwgbmV4dCwgaW5kZXgsIGFycmF5KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCh7fSwge2hhc2g6IHN0b3JtLCBpZDogaXRlbS5kYXRhc2V0LmlkfSkKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3QoY2FuLCAoaW5kZXgrMSkraWNlLlBTK2FycmF5Lmxlbmd0aCwgYnV0dG9uLCAxMDAwMCwgKGluZGV4KzEpKjEwMC9hcnJheS5sZW5ndGgpCgkJCWNhbi5ydW4obXNnLCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5NT0RJRlksIGljZS5BUkcsIGl0ZW0uZGF0YXNldC5hcmdzXSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQl0b2FzdC5jbG9zZSgpLCBuZXh0KCksIGluZGV4ID09IGFycmF5Lmxlbmd0aC0xICYmIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIGJ1dHRvbikKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCgki6YeN5ZG95ZCN5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUVdLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHtoYXNoOiBzdG9ybX0pLCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5NT0RJRlldLmNvbmNhdChhcmdzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KQoJCQl9KQoJCX0pCgl9LAoJIuWIoOmZpOW6lOeUqCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHN0b3JtfSksIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLlJFTU9WRV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogIiJ9KQoJCX0pCgl9LAoKCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci50cmFucyhjYW4sIHsicHVibGljIjogIuWFrOW8gOW6lOeUqCIsICJwcm90ZWN0ZWQiOiAi576k57uE5bqU55SoIiwgInByaXZhdGUiOiAi5Liq5Lq65bqU55SoIn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWwoJCQl7bmFtZTogbWRiLlRZUEUsIHZhbHVlczogW2NoYXQuUFVCTElDLCBjaGF0LlBST1RFQ1RFRCwgY2hhdC5QUklWQVRFXSwgX3RyYW5zOiAi57G75Z6LIn0sCgkJCXtuYW1lOiBtZGIuTkFNRSwgdmFsdWU6ICJoaSIsIF90cmFuczogIuWQjeensCJ9LCB7bmFtZTogbWRiLlRFWFQsIHZhbHVlOiAiaGVsbG8iLCBfdHJhbnM6ICLnroDku4sifSwKCQldLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLkNSRUFURV0uY29uY2F0KGFyZ3MpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBtc2cuUmVzdWx0KCl9KQoJCQl9KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCgl3aWR0aDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRXaWR0aCB9LAoJc3Rvcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7CgkJdmFyIGZpZWxkcyA9IChtc2cuT3B0aW9uKGljZS5NU0dfRklFTERTKXx8ImN0eCxjbWQsdHlwZSxuYW1lLHRleHQiKS5zcGxpdCgiLCIpCgkJY2FuLmNvcmUuSXRlbShjYW4uX3Jvb3Qucml2ZXIsIGZ1bmN0aW9uKHJpdmVyLCB2YWx1ZSkgewoJCQljYW4uY29yZS5JdGVtKHZhbHVlLnN0b3JtLCBmdW5jdGlvbihzdG9ybSwgaXRlbSkgewoJCQkJaWYgKHdvcmRbMV0gIT0gIiIgJiYgd29yZFsxXSAhPSBzdG9ybSAmJiB3b3JkWzFdICE9IGl0ZW0ubmFtZSkgeyByZXR1cm4gfQoKCQkJCXZhciBkYXRhID0ge2N0eDogImNhbiIsIGNtZDogIlN0b3JtIiwKCQkJCQl0eXBlOiByaXZlciwgbmFtZTogc3Rvcm0sIHRleHQ6IHNoeSgi6Lez6L2sIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJY2FuLm9uYWN0aW9uLmFjdGlvbihldmVudCwgY2FuLCByaXZlciwgc3Rvcm0pCgkJCQkJfSksCgkJCQl9OyBjYW4uY29yZS5MaXN0KGZpZWxkcywgZnVuY3Rpb24oa2V5KSB7IG1zZy5QdXNoKGtleSwgZGF0YVtrZXldfHwiIikgfSkKCQkJfSkKCQl9KQoJfSwKfSkK",
        "usr/volcanos/panel/search.css": "ZmllbGRzZXQuU2VhcmNoIHsgYmFja2dyb3VuZDojMDQxYTI1YmQ7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MHB4OyB0b3A6MzFweDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LlNlYXJjaCBpbnB1dC53b3JkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2g+ZGl2LnN0YXR1cyB7IGJvcmRlci10b3A6MXB4IHNvbGlkIGRhcmtjeWFuOyB9Cg==",
        "usr/volcanos/panel/search.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGxpc3QsIGNiLCB0YXJnZXQpIHsKCQljYW4uX2ZvcmVhY2ggPSAiKiIKCQljYW4uX2ZvcmVhY2ggPSAiY29tbWFuZCxzcGFjZSx0ZXh0IgoJCWNhbi5saXN0ID0gbXNnLlRhYmxlKCksIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5jb250ZW50KQoJCXZhciB0YWJsZSA9IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KSB7IGNhbi5TdGF0dXMobWRiLlRPVEFMLCBpbmRleCsxKQoJCQlyZXR1cm4ge3RleHQ6IFtrZXkgPT0gbWRiLlRFWFQgJiYgY2FuLmJhc2UuaXNGdW5jKGxpbmUudGV4dCkgJiYgbGluZS50ZXh0LmhlbHAgfHwgdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uW2Nhbi50eXBlID09IGNhbi5fZm9yZWFjaHx8ZXZlbnQuY3RybEtleT8gY2hhdC5QTFVHSU46IG1kYi5TRUxFQ1RdKGV2ZW50LCBjYW4sIGluZGV4KSAKCQkJfX0KCQl9LCBjYW4udWkuY29udGVudCwgY2FuLmNvcmUuTGlzdCgobXNnLk9wdGlvbigic29ydCIpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJcmV0dXJuIGxpc3QuaW5kZXhPZihpdGVtKQoJCX0pKTsgdGFibGUgJiYgY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5kaXNwbGF5LCB0YWJsZS5vZmZzZXRXaWR0aCkKCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuQSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5vcGVuKGl0ZW0uaHJlZiksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSB9CgkJfSksIGNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbikKCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUyksIFtdKS5jb25jYXQoe25hbWU6ICJzZWxlY3RlZCIsIHZhbHVlOiAiMCJ9KSkKCQltc2cuTGVuZ3RoKCkgPT0gMSAmJiBjYW4udWkucHJvZmlsZS5pbm5lckhUTUwgPT0gIiIgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFibGUsIGh0bWwuVEQpWzBdLmNsaWNrKCkKCX0sCglfd29yZDogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGZpZWxkcykgeyBjYW4udHlwZSA9IGNtZHNbMF0KCQl2YXIgY2IgPSBjYW4ub25hY3Rpb25bY21kc1sxXV07IGlmIChjYikgeyBjYih7fSwgY2FuKTsgcmV0dXJuIH0KCgkJdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KHt9LCB7CgkJCXdvcmQ6IGNtZHMsIGZpZWxkczogZmllbGRzLmpvaW4oaWNlLkZTKSwgc29ydDogbXNnLk9wdGlvbigic29ydCIpLAoJCQlyaXZlcjogbXNnLk9wdGlvbihjaGF0LlJJVkVSKSwgaW5kZXg6IG1zZy5PcHRpb24obWRiLklOREVYKSwKCQl9KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNFQVJDSCwgcmVzKQoJCWNhbi5ydW4ocmVzLCBjbWRzLCBmdW5jdGlvbihyZXMpIHsgY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgcmVzLCBmaWVsZHMpIH0pCgkJY2FuLm9ubW90aW9uLnNob3coY2FuKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGNhbi51aS53b3JkKQoJCX0pCgl9LAoKCXNlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiKSB7IGNhbi51aS53b3JkLnZhbHVlID0gY21kc1sxXQoJCXZhciBmaWVsZHMgPSAoY21kc1syXXx8bXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUyl8fCJjdHgsY21kLHR5cGUsbmFtZSx0ZXh0Iikuc3BsaXQoaWNlLkZTKQoJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0aDogZmllbGRzfV0pLCBjYW4uY2IgPSBmdW5jdGlvbigpIHsKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihjYW4ub25leHBvcnQuc2VsZWN0KGNhbikpLCBjYW4ub25tb3Rpb24uaGlkZShjYW4pCgkJfQoKCQljYW4uaW5wdXQgPSBmdW5jdGlvbihldmVudCwgd29yZCkgeyBjbWRzWzFdID0gd29yZHx8Y21kc1sxXQoJCQljYW4ub25pbXBvcnQuX3dvcmQoY2FuLCBtc2csIGNtZHMsIGZpZWxkcykKCQl9LCBjYW4ub25pbXBvcnQuX3dvcmQoY2FuLCBtc2csIGNtZHMsIGZpZWxkcykKCgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCB0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHQpIHsKCQkJY2FuLkNvbmZIZWlnaHQoaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hULTIqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4uQ29uZldpZHRoKHdpZHRoLTIqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fdGFyZ2V0LCB7dG9wOiB0b3AsIGxlZnQ6IGxlZnR9KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogW2NsaS5DTE9TRSwgY2xpLkNMRUFSLCBjbGkuRE9ORV0sIF9pbml0OiBmdW5jdGlvbihjYW4sIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLkNvbmYoaHRtbC5BQ1RJT04pfHxjYW4ub25hY3Rpb24ubGlzdCkKCQljYW4udWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgWwoJCQl7aW5wdXQ6IFsid29yZCIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKQoJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJCQlpZiAoZXZlbnQua2V5ID09ICIwIikgewoJCQkJCQljYW4ub25hY3Rpb24uY2xlYXIoZXZlbnQsIGNhbikKCQkJCQl9CgkJCQkJaWYgKCIxIiA8PSBldmVudC5rZXkgJiYgZXZlbnQua2V5IDw9ICI5IikgewoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJCQkJCWlmIChpbmRleCsxID09IGV2ZW50LmtleSkgewoJCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsKCQkJCQkJCQkJaW5kZXggPT0gMCAmJiB0ZC5jbGljaygpCgkJCQkJCQkJfSkKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQkJcmV0dXJuCgkJCQkJfQoJCQkJfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGUoY2FuKSB9CgoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQkJCWlmIChldmVudC5zaGlmdEtleSkgeyB2YXIgZmlyc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUilbMV0KCQkJCQkJcmV0dXJuIGNhbi5vbmFjdGlvbltjYW4udHlwZSA9PSBjYW4uX2ZvcmVhY2g/IGNoYXQuUExVR0lOOiBodG1sLlNFTEVDVF0oZXZlbnQsIGNhbiwgZmlyc3QuZGF0YXNldC5pbmRleCkKCQkJCQl9CgkJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbltjbGkuRE9ORV0oZXZlbnQsIGNhbikgfQoJCQkJCXJldHVybiBjYW4uaW5wdXQoZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSkKCQkJCX0KCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQkJdmFyIGhhcyA9IGZhbHNlOyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCQkJaGFzID0gaGFzIHx8IHRkLmlubmVyVGV4dC5pbmRleE9mKGV2ZW50LnRhcmdldC52YWx1ZSkgPiAtMQoJCQkJCX0pLCBjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuSElEREVOLCAhaGFzKQoJCQkJfSkKCQkJfV19LAoJCQljaGF0LkNPTlRFTlQsIGh0bWwuU1RBVFVTLCB7dmlldzogW2NoYXQuRElTUExBWSwgaHRtbC5UQUJMRV19LCBjaGF0LlBST0ZJTEUsCgkJXSksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkuZGlzcGxheSwgY2hhdC5DT05URU5UKQoJfSwKCW9ub3BlbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHR5cGUsIHdvcmQpIHsgY2FuLm9uaW1wb3J0LnNlbGVjdChjYW4sIG1zZywgW3R5cGV8fGNhbi5fZm9yZWFjaCwgd29yZHx8IiJdKSB9LAoKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9maWxlKSB9LAoJZG9uZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uYmFzZS5pc0Z1bmMoY2FuLmNiKSAmJiBjYW4uY2IoKSB9LAoJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmhpZGUoY2FuKSB9LAoKCXNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaW5kZXgpIHsgdmFyIGxpbmUgPSBjYW4ubGlzdFtpbmRleF0KCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGxpbmUudGV4dCkpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRlKGNhbiksIGxpbmUudGV4dChldmVudCkgfQoKCQl2YXIgZmllbGRzID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVEgsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uaW5uZXJUZXh0IH0pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dGQ6IGNhbi5jb3JlLkxpc3QoZmllbGRzLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBsaW5lW2l0ZW1dIH0pLCBkYXRhOiB7aW5kZXg6IGluZGV4fSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpCgkJCWNhbi5TdGF0dXMoInNlbGVjdGVkIiwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVFIpLmxlbmd0aC0xKQoJCX19XSksIGNhbi5TdGF0dXMoInNlbGVjdGVkIiwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVFIpLmxlbmd0aC0xKQoJfSwKCglwbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGluZGV4KSB7IHZhciBsaW5lID0gY2FuLmxpc3RbaW5kZXhdCgkJaWYgKGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZShjYW4pLCBsaW5lLnRleHQoZXZlbnQpIH0KCQlpZiAobGluZS5jdHggPT0gIndlYi53aWtpIiAmJiBsaW5lLmNtZCA9PSAid29yZCIpIHsgcmV0dXJuIH0KCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5BLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgoJCXZhciBjbWQgPSBsaW5lLmNtZCA9PSBjdHguQ09NTUFORD8gY2FuLmNvcmUuS2V5cyhsaW5lLnR5cGUsIGxpbmUubmFtZS5zcGxpdChpY2UuU1ApWzBdKTogY2FuLmNvcmUuS2V5cyhsaW5lLmN0eCwgbGluZS5jbWQpCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiAicGx1ZyIsIGluZGV4OiBjbWR8fG1zZy5PcHRpb24obWRiLklOREVYKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBtZXRhLmluZGV4LCBjbWRzLCBjYikgfQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpKQoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLTIqaHRtbC5BQ1RJT05fSEVJR0hUKQoJCQlzdWIuRm9jdXMoKQoJCX0sIGNhbi51aS5wcm9maWxlKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJc2VsZWN0OiBmdW5jdGlvbihjYW4pIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVFIsIGZ1bmN0aW9uKHRyKSB7CgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsgcmV0dXJuIHRkLmlubmVySFRNTCB9KQoJCX0pLnNsaWNlKDEpCgl9LAp9KQo=",
        "usr/volcanos/plugin/input.js": "Vm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpOyBzd2l0Y2ggKG1ldGEudHlwZSkgewoJCQljYXNlIGh0bWwuU0VMRUNUOiBtZXRhLnZhbHVlICYmICh0YXJnZXQudmFsdWUgPSBtZXRhLnZhbHVlKTsgYnJlYWsKCQkJY2FzZSBodG1sLkJVVFRPTjogbWV0YS5hY3Rpb24gPT0gaWNlLkFVVE8gJiYgdGFyZ2V0LmNsaWNrKCk7IGJyZWFrCgkJfQoJfSwKCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIn0pKSB9LAoJbGlzdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLkNvbmYoIm1vZGUiKSAhPSAic2ltcGxlIiAmJiBjYW4ucnVuKGV2ZW50KSB9LAoJYmFjazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uaW1wb3J0Ll9iYWNrKGNhbi5zdXApIH0sCglyZWZyZXNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW4oZXZlbnQpIH0sCgoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkKCQljYW4uQ29uZihtZGIuVFlQRSkgPT0gaHRtbC5CVVRUT04gJiYgY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGNhbi5Db25mKG1kYi5OQU1FKV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgl9LAoJb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIn0pCgkJaWYgKGNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLlNFTEVDVCkgeyBjYW4ucnVuKGV2ZW50KSB9Cgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuLCBldmVudC50YXJnZXQpCgkJaWYgKGNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLlRFWFRBUkVBKSB7IGlmICghZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfSB9CgkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7CgkJCWNhbi5ydW4oZXZlbnQpLCBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBldmVudC50YXJnZXQpCgkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCX0gaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgImIiOiBjYW4uQ2xvbmVJbnB1dCgpOyBicmVhawoJCQljYXNlICJtIjogY2FuLkNsb25lRmllbGQoKTsgYnJlYWsKCQkJZGVmYXVsdDogcmV0dXJuCgkJfSBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCn0pCg==",
        "usr/volcanos/plugin/input/date.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBkYXRlOiB7b25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgeyBjYihmdW5jdGlvbihjYW4sIGNicykgewoJZnVuY3Rpb24gc2V0KG5vdykgeyBjYnMoY2FuLCBjYW4udXNlci50aW1lKGNhbiwgbm93KSwgdGFyZ2V0LnZhbHVlKSB9CgoJLy8g5re75Yqg5o6n5Lu2Cgl2YXIgbm93ID0gdGFyZ2V0LnZhbHVlPyBuZXcgRGF0ZSh0YXJnZXQudmFsdWUpOiBuZXcgRGF0ZSgpCgljYW4uX3RyYW5zID0ga2l0LkRpY3QoInRvZGF5IiwgIuS7iuWkqSIsIG1kYi5ORVhULCAi5LiL5LiA5pyIIiwgbWRiLlBSRVYsICLkuIrkuIDmnIgiKQoJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9hY3Rpb24pLCBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtjbGkuQ0xPU0UsCgkJWyJob3VyIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMjQpKSwgWyJtaW51dGUiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgwLCA2MCwgNSkpLCBbInNlY29uZCJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDAsIDYwLCA1KSksCgkJInRvZGF5IiwgIiIsIG1kYi5QUkVWLCBbInllYXIiXS5jb25jYXQoY2FuLmNvcmUuTGlzdChub3cuZ2V0RnVsbFllYXIoKSAtIDEwLCBub3cuZ2V0RnVsbFllYXIoKSArIDEwKSksCgkJWyJtb250aCJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDEsIDEzKSksIG1kYi5ORVhULAoJXSwgY2FuLl9hY3Rpb24sIHtjbG9zZTogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmNsb3NlKCkgfSwKCQkiaG91ciI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldEhvdXJzKHBhcnNlSW50KHZhbHVlKXx8MCksIHNob3cobm93KSB9LAoJCSJtaW51dGUiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRNaW51dGVzKHBhcnNlSW50KHZhbHVlKXx8MCksIHNob3cobm93KSB9LAoJCSJzZWNvbmQiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRTZWNvbmRzKHBhcnNlSW50KHZhbHVlKXx8MCksIHNob3cobm93KSB9LAoJCSJ0b2RheSI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdyA9IG5ldyBEYXRlKCksIHNldChzaG93KG5vdykpIH0sCgoJCSJwcmV2IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldE1vbnRoKG5vdy5nZXRNb250aCgpLTEpLCBzaG93KG5vdykgfSwKCQkieWVhciI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldEZ1bGxZZWFyKHBhcnNlSW50KHZhbHVlKSksIHNob3cobm93KSB9LAoJCSJtb250aCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldE1vbnRoKHBhcnNlSW50KHZhbHVlKS0xKSwgc2hvdyhub3cpIH0sCgkJIm5leHQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0TW9udGgobm93LmdldE1vbnRoKCkrMSksIHNob3cobm93KSB9LAoKCQki6ZqP5py6IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldERhdGUoKE1hdGgucmFuZG9tKCkgKiAxMDAgLSA1MCkgKyBub3cuZ2V0RGF0ZSgpKSwgc2hvdyhub3cpIH0sCgkJIuWJjeS4gOW5tCI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKS0xKSwgc2hvdyhub3cpIH0sCgkJIuWQjuS4gOW5tCI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKSsxKSwgc2hvdyhub3cpIH0sCgl9KQoKCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fc3RhdHVzKQoJY2FuLl90YWJsZSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBbY2hhdC5DT05URU5ULCBodG1sLlRBQkxFXX1dKS5maXJzdAoJdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsgZnVuY3Rpb24gc2hvdyhub3cpIHsKCQkvLyDorr7nva7mjqfku7YKCQljYW4uQWN0aW9uKCJ5ZWFyIiwgbm93LmdldEZ1bGxZZWFyKCkpCgkJY2FuLkFjdGlvbigibW9udGgiLCBub3cuZ2V0TW9udGgoKSsxKQoJCWNhbi5BY3Rpb24oImhvdXIiLCBub3cuZ2V0SG91cnMoKSkKCQljYW4uQWN0aW9uKCJtaW51dGUiLCBwYXJzZUludChub3cuZ2V0TWludXRlcygpLzUpKjUpCgkJY2FuLkFjdGlvbigic2Vjb25kIiwgcGFyc2VJbnQobm93LmdldFNlY29uZHMoKS81KSo1KQoKCQkvLyDorr7nva7nu4Tku7YKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLl90YWJsZSwgW3t0aDogWyLml6UiLCAi5LiAIiwgIuS6jCIsICLkuIkiLCAi5ZubIiwgIuS6lCIsICLlha0iXX1dKQoJCXZhciB0cjsgZnVuY3Rpb24gYWRkKGRheSwgdHlwZSkgeyBpZiAoZGF5LmdldERheSgpID09IDApIHsgdHIgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX3RhYmxlLCBbe3R5cGU6IGh0bWwuVFJ9XSkubGFzdCB9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRyLCBbe3RleHQ6IFtkYXkuZ2V0RGF0ZSgpLCBodG1sLlRELCBjYW4uYmFzZS5UaW1lKHRvZGF5LCAiJXktJW0tJWQiKSA9PSBjYW4uYmFzZS5UaW1lKGRheSwgIiV5LSVtLSVkIik/IGh0bWwuU0VMRUNUOiB0eXBlXSwKCQkJCWRhdGFzZXQ6IHtkYXRlOiBkYXkuZ2V0VGltZSgpfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlzZXQobm93ID0gbmV3IERhdGUocGFyc2VJbnQoZXZlbnQudGFyZ2V0LmRhdGFzZXQuZGF0ZSkpKQoJCQkJfSwKCQkJfV0pCgkJfQoKCQkvLyDml7bpl7TljLrpl7QKCQl2YXIgb25lID0gbmV3IERhdGUobm93KTsgb25lLnNldERhdGUoMSkKCQl2YXIgZW5kID0gbmV3IERhdGUobm93KTsgZW5kLnNldE1vbnRoKG5vdy5nZXRNb250aCgpKzEpLCBlbmQuc2V0RGF0ZSgxKQoJCXZhciBoZWFkID0gbmV3IERhdGUob25lKTsgaGVhZC5zZXREYXRlKG9uZS5nZXREYXRlKCktb25lLmdldERheSgpKQoJCXZhciB0YWlsID0gbmV3IERhdGUoZW5kKTsgdGFpbC5zZXREYXRlKGVuZC5nZXREYXRlKCkrNy1lbmQuZ2V0RGF5KCkpCgoJCS8vIOaXtumXtOW6j+WIlwoJCWZvciAodmFyIGRheSA9IG5ldyBEYXRlKGhlYWQpOyBkYXkgPCBvbmU7IGRheS5zZXREYXRlKGRheS5nZXREYXRlKCkrMSkpIHsgYWRkKGRheSwgbWRiLlBSRVYpIH0KCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShvbmUpOyBkYXkgPCBlbmQ7IGRheS5zZXREYXRlKGRheS5nZXREYXRlKCkrMSkpIHsgYWRkKGRheSwgbWRiLk1BSU4pIH0KCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShlbmQpOyBlbmQuZ2V0RGF5KCkgIT0gMCAmJiBkYXkgPCB0YWlsOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5ORVhUKSB9CgoJCXJldHVybiBub3cKCX0gc2hvdyhub3cpLCBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4pCn0pfX0gfSkK",
        // "usr/volcanos/plugin/input/input.js": "",
        "usr/volcanos/plugin/input/key.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBrZXk6IHsKCV9pbml0OiBmdW5jdGlvbihldmVudCwgY2FuLCBjYnMsIHRhcmdldCwgbmFtZSwgdmFsdWUpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuSU5QVVRTLCBbbmFtZSwgdmFsdWV8fHRhcmdldC52YWx1ZV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25maWd1cmUua2V5Ll9zaG93KGNhbiwgbXNnLCBjYnMsIHRhcmdldCwgbmFtZSkKCQl9KQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZywgY2JzLCB0YXJnZXQsIG5hbWUpIHsKCQlpZiAoIWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCwgbXNnLkxlbmd0aCgpICE9IDApKSB7IHJldHVybiB9CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBzdHlsZTogbXNnLmFwcGVuZCAmJiBtc2cuYXBwZW5kLmxlbmd0aCA9PSAxPyB7Im1pbi13aWR0aCI6IHRhcmdldC5vZmZzZXRXaWR0aC0xNn06IHt9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoY2FuLCB2YWx1ZSwgdGFyZ2V0LnZhbHVlKQoJCQkJbXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpID09IGljZS5QUk9DRVNTX0FHQUlOICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIGNhbiwgY2JzLCB0YXJnZXQsIG5hbWUsIHZhbHVlKQoJCQkJfSkKCQkJfX0KCQl9KSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbbWRiLlRPVEFMLCBtZGIuSU5ERVhdKSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIG1zZy5MZW5ndGgoKSkKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NYXgodG9wK2hlaWdodC1jYW4uX3RhcmdldC5vZmZzZXRUb3AsIDQwMCkpCgkJfSkKCX0sCglfbWFrZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgewoJCXZhciBzdWIgPSB0YXJnZXQuX2NhbjsgaWYgKHN1YiAmJiBzdWIuX2NicykgeyByZXR1cm4gfQoJCWNiKGZ1bmN0aW9uKHN1YiwgY2JzKSB7IHN1Yi5fY2JzID0gY2JzCgkJCWlmIChtZXRhLm1zZyAmJiBtZXRhLm1zZy5MZW5ndGgoKSA+IDApIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX3Nob3coc3ViLCBtZXRhLm1zZywgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1YiwgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfQoJCX0pCgl9LAoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgewoJCXRhcmdldC5fY2FuICYmIHRhcmdldC5fY2FuLmNsb3NlKCkKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJfSwKCW9uZm9jdXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiRXNjYXBlIjogdGFyZ2V0Ll9jYW4/IHRhcmdldC5fY2FuLmNsb3NlKCk6IHRhcmdldC5ibHVyKCk7IHJldHVybgoJCQljYXNlICJUYWIiOiB0YXJnZXQuX2NhbiAmJiB0YXJnZXQuX2Nhbi5jbG9zZSgpOyByZXR1cm4KCQkJY2FzZSAibiI6CgkJCWNhc2UgInAiOiBldmVudC5jdHJsS2V5ICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsKCQkJZGVmYXVsdDogY2FuLmJhc2UuaXNGdW5jKGxhc3QpICYmIGxhc3QoZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uZmlndXJlLmtleS5fbWFrZShldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KQoJfSwKCW9ua2V5dXA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsgdmFyIHN1YiA9IHRhcmdldC5fY2FuOyBpZiAoIXN1YikgeyByZXR1cm4gfQoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgaWNlLlBTOiBjYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBzdWIsIHN1Yi5fY2JzLCB0YXJnZXQsIG1ldGEubmFtZSwgZXZlbnQudGFyZ2V0LnZhbHVlKTsgYnJlYWsKCQl9CgkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIHN1YiwgZnVuY3Rpb24oKSB7IGNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1Yiwgc3ViLl9jYnMsIHRhcmdldCwgbWV0YS5uYW1lKSB9LCB0YXJnZXQpCgl9LAp9fSkK",
        "usr/volcanos/plugin/input/province.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBwcm92aW5jZToge29uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsgY2IoZnVuY3Rpb24oY2FuLCBjYnMpIHsKCWNhbi5yZXF1aXJlKFsiL3JlcXVpcmUvc2h5bGludXguY29tL3gvZWNoYXJ0cy9lY2hhcnRzLmpzIiwgIi9yZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiXSwgZnVuY3Rpb24oKSB7CgkJdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3R5cGU6IGh0bWwuRElWLCBzdHlsZToge3dpZHRoOiA2MDAsIGhlaWdodDogNDAwfX1dKS5maXJzdCkKCQljaGluYV9jaGFydC5zZXRPcHRpb24oe2dlbzoge21hcDogJ2NoaW5hJ319KSwgY2hpbmFfY2hhcnQub24oaHRtbC5DTElDSywgZnVuY3Rpb24gKHBhcmFtcykgewoJCQl0YXJnZXQudmFsdWUgPSBwYXJhbXMubmFtZSwgY2FuLmNsb3NlKCkKCQl9KSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIDM0KSwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKGNhbikKCX0pCn0pIH19LCB9KQo=",
        "usr/volcanos/plugin/local/chat/div.css": "ZmllbGRzZXQubGF5b3V0IGxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5sYXlvdXQgZmllbGRzZXQucGx1Z2luIHsgcGFkZGluZzowOyBtYXJnaW46MDsgfQoKZmllbGRzZXQuZGl2IGRpdi5vdXRwdXQgdGQgeyB2ZXJ0aWNhbC1hbGlnbjp0b3A7IH0KZmllbGRzZXQuZGl2IGRpdi5vdXRwdXQgZmllbGRzZXQuc3Bhbj5kaXYub3V0cHV0PmZpZWxkc2V0IHsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQoKZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2IGRpdi5wcm9qZWN0IHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdiBkaXYucHJvZmlsZSB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQoK",
        "usr/volcanos/plugin/local/chat/div.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgbWV0YSA9IHt9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgbWV0YVt2YWx1ZS5rZXldID0gdmFsdWUudmFsdWUgfSkKCQljYW4uX2xpc3QgPSBjYW4uYmFzZS5PYmoobWV0YS50ZXh0LCB7bWV0YToge25hbWU6IG1ldGEubmFtZXx8aHRtbC5ESVZ9LCBsaXN0OiBbXX0pCgkJY2FuLnN1cC5fa2V5cyA9IGNhbi5zdXAuX2tleXN8fGNhbi5fbGlzdC5tZXRhLm5hbWUKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiwgY2FuLl9vdXRwdXQpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwga2V5cywgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB7IHdpZHRoID0gd2lkdGh8fGl0ZW0ubWV0YS53aWR0aCwgaGVpZ2h0ID0gaGVpZ2h0fHxpdGVtLm1ldGEuaGVpZ2h0CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm1ldGEubmFtZXx8aHRtbC5ESVZdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCksIGNhbi5jdXJyZW50ID0gZXZlbnQudGFyZ2V0LCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBrZXlzLCBpdGVtLm1ldGEpCgkJfSwgX2FkZDogZnVuY3Rpb24oZGF0YSkgeyBpdGVtLmxpc3QucHVzaChkYXRhKSwgY2FuLm9uaW1wb3J0Ll9saXN0KGNhbiwga2V5cywgaXRlbSwgdWkubGlzdCwgd2lkdGgsIGhlaWdodCkgfX0sIHt2aWV3OiBodG1sLkxJU1R9XSkKCgkJdmFyIGZpZWxkID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgaXRlbS5tZXRhLmluZGV4PyBjaGF0LlBMVUdJTjogY2hhdC5MQVlPVVQsIGl0ZW0ubWV0YSwgdGFyZ2V0Ll90YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5saXN0Ll90YXJnZXQgPSBmaWVsZC5vdXRwdXQsIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkKCQlpdGVtLm1ldGEuc3R5bGUgJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLmxpc3QuX3RhcmdldCwgaXRlbS5tZXRhLnN0eWxlKQoKCQlpdGVtLm1ldGEuaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGNhbi5iYXNlLkNvcHkoe30sIGl0ZW0ubWV0YSksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVH0pCgkJfSwgdGFyZ2V0Ll90YXJnZXQsIGZpZWxkLmZpZWxkc2V0KQoKCQljYW4ub25pbXBvcnQuX2xpc3QoY2FuLCBrZXlzLCBpdGVtLCB1aS5saXN0LCB3aWR0aCwgaGVpZ2h0KQoJCWNhbi5zdXAuX2tleXMgPT0ga2V5cyAmJiB1aS5pdGVtLmNsaWNrKCkKCX0sCglfbGlzdDogZnVuY3Rpb24oY2FuLCBrZXlzLCBpdGVtLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsKCQlpZiAoaXRlbS5tZXRhLnN0eWxlID09IGh0bWwuU1BBTikgeyB3aWR0aCA9IHdpZHRoIC8gaXRlbS5saXN0Lmxlbmd0aCB9IGVsc2UgeyBoZWlnaHQgPSBoZWlnaHQgLyBpdGVtLmxpc3QubGVuZ3RoIH0KCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQuX3RhcmdldCkKCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uY29yZS5LZXlzKGtleXMsIGl0ZW0ubWV0YS5uYW1lKSwgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB9KQoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIGtleXMsIG1ldGEpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9KTsgbXNnLlB1c2gobWRiLktFWSwgImtleXMiKSwgbXNnLlB1c2gobWRiLlZBTFVFLCBrZXlzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQoIm5hbWUsaW5kZXgsYXJncyxzdHlsZSxkaXNwbGF5LGhlaWdodCx3aWR0aCIpLCBmdW5jdGlvbihrKSB7CgkJCW1zZy5QdXNoKG1kYi5LRVksIGspLCBtc2cuUHVzaChtZGIuVkFMVUUsIG1ldGFba10pCgkJfSksIGNhbi5zdXAuX2tleXMgPSBrZXlzCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlrZXkgPT0gbWRiLlZBTFVFICYmIGNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LmlubmVyVGV4dCA9IG1ldGFbbGluZS5rZXldID0gdmFsdWUsIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQkJfSwge25hbWU6IGxpbmUua2V5fSkKCQkJfX0KCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCksIGNhbi51aS5wcm9qZWN0Ll90YXJnZXQgPSBjYW4udWkuY29udGVudAoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0zMjAsIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQsIGNhbi51c2VyLnRpdGxlKGNhbi5fbGlzdC5tZXRhLm5hbWUpCgkJfSBlbHNlIGlmIChjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLCBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgZmFsc2UpCgkJfSBlbHNlIHsKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCX0KCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uX2xpc3QubWV0YS5uYW1lLCBjYW4uX2xpc3QsIGNhbi51aS5wcm9qZWN0LCB3aWR0aCwgaGVpZ2h0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUUsIGN0eC5JTkRFWCwgY3R4LkFSR1MsIGN0eC5TVFlMRSwgaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEhdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5jdXJyZW50Ll9hZGQoe21ldGE6IGRhdGEsIGxpc3Q6IFtdfSkKCQl9KQoJfSwKCSLkv53lrZgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIFttZGIuVEVYVCwgSlNPTi5zdHJpbmdpZnkoY2FuLl9saXN0KV0pCgl9LAp9KQo=",
        "usr/volcanos/plugin/local/chat/location.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJIWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4uQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1Kmh0bWwuQUNUSU9OX0hFSUdIVCAtIDUqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9vcHRpb24pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fc3RhdHVzKQoKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2plY3QsIDI0MCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2plY3QsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvZmlsZSwgaWNlLkFVVE8pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLm9uZXhwb3J0Lmxpc3QpCgkJY2FuLnJlcXVpcmUoW2Nhbi5iYXNlLk1lcmdlVVJMKCJodHRwczovL21hcC5xcS5jb20vYXBpL2dsanMiLCAidiIsICIxLmV4cCIsICJsaWJyYXJpZXMiLCAic2VydmljZSIsICJrZXkiLCBjYW4uQ29uZihhYWEuVE9LRU4pKV0sIGZ1bmN0aW9uKCkgewoJCQl2YXIgcmVzID0ge3R5cGU6ICJ1bmtub3duIiwgbGF0aXR1ZGU6IDM5OTg0MTIsIGxvbmdpdHVkZTogMTE2MzA3NDh9LCBjdXJyZW50ID0gY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5MT0NBVElPTikpCgkJCWlmIChjdXJyZW50LnN0YXR1cyA9PT0gMCkgeyByZXMgPSBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjdXJyZW50LnJlc3VsdC5sb2NhdGlvbiwgY3VycmVudC5yZXN1bHQuYWRfaW5mbyksIHJlcy50eXBlID0gImlwIiwgcmVzLm5hbWUgPSBjdXJyZW50LnJlc3VsdC5pcCwgY2FuLlN0YXR1cyhyZXMpIH0KCQkJY2FuLl9jdXJyZW50ID0gcmVzLCBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pLCBjYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihyZXMpIHsgcmVzLnR5cGUgPSAiY3VycmVudCIsIGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQgPSByZXMpIH0pCgkJfSkKCX0sCglfbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSkKCgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCXtuYW1lOiAiZGlyZWN0aW9uIn0sCgkJCXtuYW1lOiAiZmF2b3IiLCBfbWVudTogc2h5KHsicGxheSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCQkJY2FuLmNvcmUuTmV4dChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZmF2b3IuX3RhcmdldCwgaHRtbC5ESVZfSVRFTSksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJCQlpdGVtLmNsaWNrKCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIG5leHQsIDIwMDApCgkJCQl9LCBmdW5jdGlvbigpIHsgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikgfSkKCQkJfX0pfSwKCQkJe25hbWU6ICJleHBsb3JlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaDAoY2FuLCBldmVudC50YXJnZXQudmFsdWUpIH0KCQkJfX0sCgkJCXtuYW1lOiAic2VhcmNoIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIGV2ZW50LnRhcmdldC52YWx1ZSkgfQoJCQl9fSwKCQkJe25hbWU6ICJkaXN0cmljdCIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5vbmltcG9ydC5fcHJvdmluY2UoY2FuLCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9jdXJyZW50KSwgY2FuLm9uaW1wb3J0Ll9tYXJrKGNhbikKCQljYW4ubWFyayAmJiBjYW4ubWFyay5hZGQoe3Bvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uX2N1cnJlbnQpLCBwcm9wZXJ0aWVzOiBjYW4uX2N1cnJlbnR9KQoJCWNhbi5fbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgaXRlbSkgfSkKCX0sCglfc2VhcmNoMDogZnVuY3Rpb24oY2FuLCBrZXl3b3JkKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ImJvdW5kYXJ5IjogIm5lYXJieSgiK2Nhbi5iYXNlLmpvaW4oW3AubGF0LCBwLmxuZywgIjUwMCJdLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJfSkKCX0sCglfc2VhcmNoOiBmdW5jdGlvbihjYW4sIGtleXdvcmQpIHsgdmFyIHAgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHsiYm91bmRhcnkiOiAicmVnaW9uKCIrY2FuLmJhc2Uuam9pbihbY2FuLlN0YXR1cygiY2l0eSIpLCBwLmxhdCwgcC5sbmddLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5zZWFyY2guX3RhcmdldCkKCQkJfSksIGNhbi5taXNjLkRlYnVnKHJlcykKCQl9KQoJfSwKCglfbGlzdF9yZXN1bHQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgeyB2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5taXNjLkRlYnVnKHJlcykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChyZXMucmVzdWx0WzBdLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS5mdWxsbmFtZTsgcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYik/IGNiKGl0ZW0pOiBpdGVtIH0pCgl9LAoJX2Rpc3RyaWN0OiBmdW5jdGlvbihjYW4sIGlkLCBjYikgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtpZDogaWR9KSwgImRpc3RyaWN0IiwgW10sIGNiKQoJfSwKCV9wcm92aW5jZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuX2Rpc3RyaWN0KGNhbiwgIiIsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnLCBmdW5jdGlvbihwcm92aW5jZSkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBwcm92aW5jZSwgZnVuY3Rpb24oZXZlbnQsIF8sIHNob3cpIHsgaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIHByb3ZpbmNlLmxvY2F0aW9uLCB7dHlwZTogInByb3ZpbmNlIiwgbmFtZTogcHJvdmluY2UubmFtZSwgdGV4dDogcHJvdmluY2UuZnVsbG5hbWV9KSkKCQkJCQljYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDgpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lfSkKCgkJCQkJc2hvdyA9PT0gdHJ1ZSB8fCBjYW4ub25pbXBvcnQuX2NpdHkoY2FuLCBwcm92aW5jZSwgZXZlbnQudGFyZ2V0KQoJCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCQl9KQoJCX0pCgl9LAoJX2NpdHk6IGZ1bmN0aW9uKGNhbiwgcHJvdmluY2UsIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5fZGlzdHJpY3QoY2FuLCBwcm92aW5jZS5pZCwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5pdGVtbGlzdChjYW4sIGNhbi5vbmltcG9ydC5fbGlzdF9yZXN1bHQoY2FuLCBtc2cpLCBmdW5jdGlvbihldmVudCwgY2l0eSwgc2hvdykgeyBpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjaXR5LmxvY2F0aW9uLCB7dHlwZTogImNpdHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNpdHkuZnVsbG5hbWV9KSkKCQkJCWNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgMTIpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lLCBjaXR5OiBjaXR5LmZ1bGxuYW1lfSkKCgkJCQlzaG93ID09PSB0cnVlIHx8IGNhbi5vbmltcG9ydC5fY291bnR5KGNhbiwgcHJvdmluY2UsIGNpdHksIGV2ZW50LnRhcmdldCkKCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCX0pCgl9LAoJX2NvdW50eTogZnVuY3Rpb24oY2FuLCBwcm92aW5jZSwgY2l0eSwgdGFyZ2V0KSB7CgkJY2FuLm9uaW1wb3J0Ll9kaXN0cmljdChjYW4sIGNpdHkuaWQsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuaXRlbWxpc3QoY2FuLCBjYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnKSwgZnVuY3Rpb24oZXZlbnQsIGNvdW50eSkgewoJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGNvdW50eS5sb2NhdGlvbiwge3R5cGU6ICJjb3VudHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNvdW50eS5mdWxsbmFtZX0pKQoJCQkJY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCAxNSkpLCBjYW4uU3RhdHVzKHtuYXRpb246ICLkuK3lm70iLCBwcm92aW5jZTogcHJvdmluY2UuZnVsbG5hbWUsIGNpdHk6IGNpdHkuZnVsbG5hbWV9KQoJCQl9LCBmdW5jdGlvbigpIHt9LCB0YXJnZXQpCgkJfSkKCX0sCgoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5tYXAgPSBuZXcgVE1hcC5NYXAoY2FuLnVpLmNvbnRlbnQsIHtjZW50ZXI6IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCB6b29tOiBjYW4uQWN0aW9uKCJ6b29tIiksIHBpdGNoOiBjYW4uQWN0aW9uKCJwaXRjaCIpLCByb3RhdGlvbjogY2FuLkFjdGlvbigicm90YXRpb24iKSwgbWFwU3R5bGVJZDogInN0eWxlMiJ9KQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCAiZGl2LmNvbnRlbnQ+ZGl2IiwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIHsiei1pbmRleCI6IDN9KSB9KQoJCWNhbi5jdXJyZW50ID0gewoJCQlsYWJlbDogbmV3IFRNYXAuTXVsdGlMYWJlbCh7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgY29udGVudDogaXRlbS5uYW1lfV19KSwKCQkJbWFya2VyOiBuZXcgVE1hcC5NdWx0aU1hcmtlcih7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKX1dfSksCgkJCWluZm86IGNhbi5vbmltcG9ydC5pbmZvKGNhbiwgaXRlbSksIGhvdmVyOiBjYW4ub25pbXBvcnQuaW5mbyhjYW4sIGl0ZW0pLAoJCQljaXJjbGU6IGNhbi5vbmltcG9ydC5jaXJjbGUoY2FuLCBpdGVtLCAxMDApLCBpdGVtOiBpdGVtLAoJCX0KCgkJY2FuLm1hcC5vbigicm90YXRlIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigicm90YXRpb24iLCBjYW4ubWFwLmdldFJvdGF0aW9uKCkpIH0pCgkJY2FuLm1hcC5vbigicGl0Y2giLCBmdW5jdGlvbihldmVudCkgeyBjYW4uQWN0aW9uKCJwaXRjaCIsIGNhbi5tYXAuZ2V0UGl0Y2goKSkgfSkKCQljYW4ubWFwLm9uKCJ6b29tIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigiem9vbSIsIGNhbi5tYXAuZ2V0Wm9vbSgpKSB9KQoJCWNhbi5tYXAub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIHBvaW50ID0gY2FuLm9uYWN0aW9uLl9wb2ludChldmVudCwgY2FuLCB7bmFtZTogZXZlbnQucG9pPyBldmVudC5wb2kubmFtZTogIiJ9KTsgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIHBvaW50KQoJCQljYW4uQWN0aW9uKCJtb2RlIikgPT0gImluc2VydCIgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7dGFyZ2V0OiB7Z2V0Qm91bmRpbmdDbGllbnRSZWN0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBvaW50IH19fSwgcG9pbnQpLCBtZGIuQ1JFQVRFLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIHBvaW50KQoJCQl9KQoJCX0pCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IGlmICghaXRlbS5sYXRpdHVkZSB8fCAhaXRlbS5sb25naXR1ZGUpIHsgcmV0dXJuIH0KCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIGl0ZW0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uaW1wb3J0LnBsdWdpbihjYW4sIGl0ZW0pCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uZXhwb3J0LmhvdmVyKGNhbiwgaXRlbSksIGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJZGlyZWN0aW9uOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uYWN0aW9uW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQkJZmF2b3I6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKSB9LAoJCQkJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKQoJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQkJCQljYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBjYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKQoJCQkJCX0pCgkJCQl9LAoJCQl9KQoJCX0sIHRhcmdldHx8Y2FuLnVpLmZhdm9yLl90YXJnZXQpCgkJY2FuLm1hcmsgJiYgY2FuLm1hcmsuYWRkKHtwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIHByb3BlcnRpZXM6IGl0ZW19KQoJCWNhbi5jbHVzdGVyICYmIGNhbi5jbHVzdGVyLmFkZCh7cG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pfSkKCX0sCglfY2x1c3RlcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uY2x1c3RlciA9IG5ldyBUTWFwLk1hcmtlckNsdXN0ZXIoe21hcDogY2FuLm1hcCwgZ2VvbWV0cmllczogW119KQoJfSwKCV9tYXJrOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5tYXJrID0gbmV3IFRNYXAuTXVsdGlNYXJrZXIoe21hcDogY2FuLm1hcH0pCgkJY2FuLm1hcmsub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFldmVudC5nZW9tZXRyeSkgeyByZXR1cm4gfSB2YXIgaXRlbSA9IGV2ZW50Lmdlb21ldHJ5LnByb3BlcnRpZXMKCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGl0ZW0pCgkJfSkKCQljYW4ubWFyay5vbigiaG92ZXIiLCBmdW5jdGlvbihldmVudCkgeyBpZiAoIWV2ZW50Lmdlb21ldHJ5KSB7IHJldHVybiB9IHZhciBpdGVtID0gZXZlbnQuZ2VvbWV0cnkucHJvcGVydGllcwoJCQljYW4ub25leHBvcnQuaG92ZXIoY2FuLCBpdGVtKQoJCX0pCgl9LAoKCV9wb2x5bGluZTogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJcmV0dXJuIG5ldyBUTWFwLk11bHRpUG9seWxpbmUoewoJCQltYXA6IGNhbi5tYXAsCgkJCXN0eWxlczogewoJCQkJJ3N0eWxlX2JsdWUnOiBuZXcgVE1hcC5Qb2x5bGluZVN0eWxlKHsKCQkJCQknY29sb3InOiAnIzM3NzdGRicsIC8v57q/5aGr5YWF6ImyCgkJCQkJJ3dpZHRoJzogNiwgLy/mipjnur/lrr3luqYKCQkJCQknYm9yZGVyV2lkdGgnOiA1LCAvL+i+uee6v+WuveW6pgoJCQkJCSdib3JkZXJDb2xvcic6ICcjRkZGJywgLy/ovrnnur/popzoibIKCQkJCQknbGluZUNhcCc6ICdidXR0JyAvL+e6v+err+WktOaWueW8jwoJCQkJfSksCgkJCQknc3R5bGVfcmVkJzogbmV3IFRNYXAuUG9seWxpbmVTdHlsZSh7CgkJCQkJJ2NvbG9yJzogJyNDQzAwMDAnLCAvL+e6v+Whq+WFheiJsgoJCQkJCSd3aWR0aCc6IDYsIC8v5oqY57q/5a695bqmCgkJCQkJJ2JvcmRlcldpZHRoJzogNSwgLy/ovrnnur/lrr3luqYKCQkJCQknYm9yZGVyQ29sb3InOiAnI0NDQycsIC8v6L6557q/6aKc6ImyCgkJCQkJJ2xpbmVDYXAnOiAncm91bmQnIC8v57q/56uv5aS05pa55byPCgkJCQl9KQoJCQl9LAoJCQlnZW9tZXRyaWVzOiBbeydzdHlsZUlkJzogJ3N0eWxlX2JsdWUnLCAncGF0aHMnOiBwYXRofV0KCQl9KQoJfSwKCV9tb3ZlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ubWFyay5hZGQoe2lkOiAnY2FyJywgc3R5bGVJZDogJ2Nhci1kb3duJywgcG9zaXRpb246IG5ldyBUTWFwLkxhdExuZygzOS45ODQ4MTUwMDY0ODMzOCwgMTE2LjMwNTcxMTI2OTM3ODY2KX0pCgkJY2FuLm1hcmsubW92ZUFsb25nKHsiY2FyIjoge3BhdGg6IFsKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk4NDgxNTAwNjQ4MzM4LCAxMTYuMzA1NzExMjY5Mzc4NjYpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMjY2NTc1MjIyMTU1LCAxMTYuMzA1OTY4NzYxNDQ0MDkpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMzQ4Nzg0MTY1ODg2LCAxMTYuMzExMTQwMDYwNDI0OCksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45Nzg4MTM3MTAyNjYwMjQsIDExNi4zMTExNDAwNjA0MjQ4KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk3ODgxMzcxMDI2NjAyNCwgMTE2LjMxNjk5ODAwNDkxMzMzKQoJCV0sIHNwZWVkOiA3MH19LCB7YXV0b1JvdGF0aW9uOnRydWV9KQoJfSwKCglwb2ludDogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJcmV0dXJuIG5ldyBUTWFwLkxhdExuZyhpdGVtLmxhdGl0dWRlLzEwMDAwMC4wLCBpdGVtLmxvbmdpdHVkZS8xMDAwMDAuMCkKCX0sCgljZW50ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyB2YXIgcG9pbnQgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKQoJCWNhbi5tYXAuc2V0Q2VudGVyKHBvaW50KSwgY2FuLlN0YXR1cygibmFtZSIsICIiKSwgY2FuLlN0YXR1cygidGV4dCIsICIiKSwgY2FuLlN0YXR1cyhpdGVtKSwgY2FuLlN0YXR1cyh7bGF0aXR1ZGU6IHBvaW50LmxhdCwgbG9uZ2l0dWRlOiBwb2ludC5sbmd9KQoJCWNhbi5jdXJyZW50LmluZm8uc2V0UG9zaXRpb24ocG9pbnQpLCBjYW4uY3VycmVudC5pbmZvLnNldENvbnRlbnQoKGl0ZW0ubmFtZXx8IiIpKyI8YnIvPiIrKGl0ZW0udGV4dHx8IiIpKQoJCWNhbi5jdXJyZW50LmxhYmVsLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogcG9pbnQsIGNvbnRlbnQ6IGl0ZW0ubmFtZX1dKQoJCWNhbi5jdXJyZW50Lm1hcmtlci51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IHBvaW50fV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IHBvaW50LCByYWRpdXM6IDMwMH1dKQoJCWNhbi5jdXJyZW50Lml0ZW0gPSBpdGVtCgkJaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCkKCX0sCglpbmZvOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlyZXR1cm4gbmV3IFRNYXAuSW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLAoJCQlwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG9mZnNldDoge3g6IDAsIHk6IC0zMn0sCgkJCWNvbnRlbnQ6IChpdGVtLm5hbWV8fCIiKSsiPGJyLz4iKyhpdGVtLnRleHR8fCIiKSwKCQl9KQoJfSwKCWNpcmNsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCByYWRpdXMpIHsKCQlyZXR1cm4gbmV3IFRNYXAuTXVsdGlDaXJjbGUoeyAKCQkJbWFwOiBjYW4ubWFwLCBzdHlsZXM6IHsKCQkJCWNpcmNsZTogbmV3IFRNYXAuQ2lyY2xlU3R5bGUoewoJCQkJCWNvbG9yOiAncmdiYSg0MSw5MSwyNTUsMC4xNiknLAoJCQkJCXNob3dCb3JkZXI6IHRydWUsCgkJCQkJYm9yZGVyQ29sb3I6ICdyZ2JhKDQxLDkxLDI1NSwxKScsCgkJCQkJYm9yZGVyV2lkdGg6IDIsCgkJCQl9KSwKCQkJfSwKCQkJZ2VvbWV0cmllczogW3tzdHlsZUlkOiAnY2lyY2xlJywgY2VudGVyOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgcmFkaXVzOiByYWRpdXN8fDMwMH1dLAoJCX0pCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpdGVtLmhhc2ggfSwgY2FuLnVpLnByb2ZpbGUpKSB7CgoJCX0gZWxzZSB7IGl0ZW0uZXh0cmEgPSBjYW4uYmFzZS5PYmooaXRlbS5leHRyYSwge30pCgkJCWl0ZW0uZXh0cmEuaW5kZXggJiYgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCB7aW5kZXg6IGl0ZW0uZXh0cmEuaW5kZXgsIGFyZ3M6IGl0ZW0uZXh0cmEuYXJnc30sIGNhbi51aS5wcm9maWxlLCBmdW5jdGlvbihzdWIpIHsgaXRlbS5fcGx1Z2luID0gc3ViCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkqMy80KSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCksIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSozLzQpKQoJCQl9KQoJCX0KCX0sCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEpIHsKCQlmdW5jdGlvbiBteUluZm9XaW5kb3cob3B0aW9ucykgeyBUTWFwLkRPTU92ZXJsYXkuY2FsbCh0aGlzLCBvcHRpb25zKSB9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZSA9IG5ldyBUTWFwLkRPTU92ZXJsYXkoKQoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUub25Jbml0ID0gZnVuY3Rpb24ob3B0aW9ucykgeyB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbiwgdGhpcy5tZXRhID0gb3B0aW9ucy5tZXRhIH0KCgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS5jcmVhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIG1ldGEgPSB0aGlzLm1ldGEsIHVpID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5GTE9BVCwge30sIGNhbi5fb3V0cHV0KQoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgbWV0YSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBpY2UuUlVOLCBbbWV0YS5pbmRleF0uY29uY2F0KGNtZHMpLCBjYikgfQoJCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHN1Yi5fdGFyZ2V0KSB9CgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkvMikpCgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkvMikpCgkJCQlpdGVtLl9wbHVnaW4gPSBzdWIKCQkJfSwgY2FuLl9vdXRwdXQsIHVpLmZpZWxkc2V0KQoJCQlyZXR1cm4gdWkuZmllbGRzZXQKCQl9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS51cGRhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIHBpeGVsID0gdGhpcy5tYXAucHJvamVjdFRvQ29udGFpbmVyKHRoaXMucG9zaXRpb24pOyBjYW4ucGFnZS5zdHlsZShjYW4sIHRoaXMuZG9tLCB7CgkJCQlsZWZ0OiBwaXhlbC5nZXRYKCksIHRvcDogcGl4ZWwuZ2V0WSgpKzIqaHRtbC5BQ1RJT05fSEVJR0hULAoJCQl9KQoJCX0KCQlyZXR1cm4gbmV3IG15SW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLCBwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG1ldGE6IG1ldGF9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbWyJtb2RlIiwgInNlbGVjdCIsICJpbnNlcnQiXSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ6b29tIiwgdmFsdWU6IDE3LCByYW5nZTogWzMsIDIxXX0sCgl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAicGl0Y2giLCB2YWx1ZTogMzAsIHJhbmdlOiBbMCwgODAsIDVdfSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJyb3RhdGlvbiIsIHZhbHVlOiAiMCIsIHJhbmdlOiBbMCwgMzYwLCAxMF19LAoJImN1cnJlbnQiLCAiZXhwbG9yZSIsICJjcmVhdGUiLCAiZGlyZWN0aW9uIl0sCglfdHJhbnM6IHtjdXJyZW50OiAi5a6a5L2NIiwgZmF2b3I6ICLmlLbol48ifSwKCgl6b29tOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIikpIH0sCglwaXRjaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFBpdGNoKGNhbi5BY3Rpb24oInBpdGNoIikpIH0sCglyb3RhdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIikpIH0sCgljdXJyZW50OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQpLCBjYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDE3KSksIGNhbi5tYXAuc2V0UGl0Y2goY2FuLkFjdGlvbigicGl0Y2giLCAzMCkpLCBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIiwgMCkpIH0sCgoJZXhwbG9yZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSk7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgeyJib3VuZGFyeSI6ICJuZWFyYnkoIitjYW4uYmFzZS5qb2luKFtwLmxhdCwgcC5sbmcsICI1MDAiXSwgaWNlLkZTKSsiKSIsICJwYWdlX2luZGV4IjogaX0pLCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCXZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLmNvcmUuTGlzdChyZXMuZGF0YSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGl0ZW0ubG9jYXRpb24sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLnRpdGxlLCB0ZXh0OiBpdGVtLmFkZHJlc3N9KSwgY2FuLnVpLmV4cGxvcmUuX3RhcmdldCkKCQkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJCX0pCgkJfQoJfSwKCWRpcmVjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm1hcC5nZXRDZW50ZXIoKTsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpcmVjdGlvbi5fdGFyZ2V0KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtbInR5cGUiLCAiZHJpdmluZyIsICJ3YWxraW5nIiwgImJpY3ljbGluZyIsICJ0cmFuc2l0Il1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBmcm9tID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLl9jdXJyZW50KSwgdG8gPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHt0eXBlOiBsaXN0WzBdLCAiZnJvbSI6IGNhbi5iYXNlLmpvaW4oW2Zyb20ubGF0LCBmcm9tLmxuZ10sIGljZS5GUyksICJ0byI6IGNhbi5iYXNlLmpvaW4oW3RvLmxhdCwgdG8ubG5nXSwgaWNlLkZTKX0pCgkJCWNhbi5ydW5BY3Rpb24obXNnLl9ldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSwgcm91dGUgPSByZXMucmVzdWx0LnJvdXRlc1swXQoJCQkJCXZhciBjb29ycyA9IHJvdXRlLnBvbHlsaW5lLCBwbCA9IFtdLCBrciA9IDEwMDAwMDAKCQkJCQlmb3IgKHZhciBpID0gMjsgaSA8IGNvb3JzLmxlbmd0aDsgaSsrKSB7IGNvb3JzW2ldID0gTnVtYmVyKGNvb3JzW2kgLSAyXSkgKyBOdW1iZXIoY29vcnNbaV0pIC8ga3IgfQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgY29vcnMubGVuZ3RoOyBpICs9IDIpIHsgcGwucHVzaChuZXcgVE1hcC5MYXRMbmcoY29vcnNbaV0sIGNvb3JzW2krMV0pKSB9CgkJCQkJY2FuLm9uaW1wb3J0Ll9wb2x5bGluZShjYW4sIHBsKQoKCQkJCQljYW4uY29yZS5MaXN0KHJvdXRlLnN0ZXBzLCBmdW5jdGlvbihpdGVtKSB7IHZhciBpID0gaXRlbS5wb2x5bGluZV9pZHhbMF0KCQkJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwge2xhdDogY29vcnNbaV0sIGxuZzogY29vcnNbaSsxXX0sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLmluc3RydWN0aW9uLCB0ZXh0OiBpdGVtLmFjdF9kZXNjfSksIGNhbi51aS5kaXJlY3Rpb24uX3RhcmdldCkKCQkJCQl9KSwgY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgImRpc3RhbmNlOiAiK3JvdXRlLmRpc3RhbmNlKyIgZHVyYXRpb246ICIrcm91dGUuZHVyYXRpb24pCgkJCX0pCgkJfSkKCX0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5jdXJyZW50Lml0ZW0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLmNvcmUuU3BsaXQoInR5cGUsbmFtZSx0ZXh0IiksIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbikKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncy5jb25jYXQoImxhdGl0dWRlIiwgcC5sYXRpdHVkZSwgImxvbmdpdHVkZSIsIHAubG9uZ2l0dWRlKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uYmFzZS5Db3B5KHAsIHtuYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgdGV4dDogbXNnLk9wdGlvbihtZGIuVEVYVCl9KSkKCQkJfSwgdHJ1ZSkKCQl9KQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaXRlbSkgeyB2YXIgcmVjdCA9IGNhbi51aS5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJcmV0dXJuIGNhbi5iYXNlLkNvcHkoe2xlZnQ6IHJlY3QubGVmdCtldmVudC5wb2ludC54LCBib3R0b206IHJlY3QudG9wK2V2ZW50LnBvaW50LnksIGxhdGl0dWRlOiBwYXJzZUludChldmVudC5sYXRMbmcubGF0KjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQoZXZlbnQubGF0TG5nLmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyJuYXRpb24iLCAicHJvdmluY2UiLCAiY2l0eSIsICJsYXRpdHVkZSIsICJsb25naXR1ZGUiLCAgInR5cGUiLCAibmFtZSIsICJ0ZXh0Il0sCglwb2ludDogZnVuY3Rpb24oY2FuLCBwb2ludCwgaXRlbSkgeyByZXR1cm4gY2FuLmJhc2UuQ29weSh7bGF0aXR1ZGU6IHBhcnNlSW50KHBvaW50LmxhdCoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHBvaW50LmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkgfSwKCWNlbnRlcjogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjYW4ubWFwLmdldENlbnRlcigpKSB9LAoJY3VycmVudDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbik7IHAubGF0aXR1ZGUgLz0gMTAwMDAwLCBwLmxvbmdpdHVkZSAvPSAxMDAwMDA7IGNhbi5TdGF0dXMocCkKCQljYW4uY3VycmVudC5tYXJrZXIudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQubGFiZWwudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IGNhbi5tYXAuZ2V0Q2VudGVyKCksIHJhZGl1czogMzAwfV0pCgl9LAoJaG92ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5jdXJyZW50LmhvdmVyLnNldFBvc2l0aW9uKGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pKQoJCWNhbi5jdXJyZW50LmhvdmVyLnNldENvbnRlbnQoaXRlbS5uYW1lKyI8YnIvPiIraXRlbS50ZXh0KQoJfSwKfSkK",
        "usr/volcanos/plugin/local/chat/media.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCAgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LmRpc3BsYXkoY2FuLCB0YXJnZXQpCgkJY2FuLnVpLmNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3R5cGU6ICJjYW52YXMiLCB3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MCwgc3R5bGU6IHtkaXNwbGF5OiAibm9uZSJ9fV0pLmZpcnN0CgoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCAidGQiXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5zdXAub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBjYW4uc3VwLCBrZXksIHZhbHVlLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucnVuKGV2ZW50KQoJCQkJfSkKCQkJfX0KCQl9LCBjYW4udWkuY29udGVudCkKCgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLlJlc3VsdCgpLCBjYW4udWkuZGlzcGxheSkKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoKCW9wZW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQluYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHt2aWRlbzoge3dpZHRoOiAzMjAsIGhlaWdodDogMjQwfX0sIGZ1bmN0aW9uKHN0cmVhbSkgewoJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgInZpZGVvIikKCQkJdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtLCB2aWRlby5wbGF5KCkKCQkJY2FuLnVpLnZpZGVvID0gdmlkZW8KCQl9LCBmdW5jdGlvbihlcnJvcikgewoJCQljYW4ubWlzYy5Mb2coIm9wZW4gY2FtZXJhIiwgZXJyb3IpCgkJfSkKCX0sCglzbmFwc2hvdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51aS5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UoY2FuLnVpLnZpZGVvLCAwLCAwKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3R5cGU6ICJpbWciLCBzcmM6IGNhbi51aS5jYW52YXMudG9EYXRhVVJMKCdpbWFnZS93ZWJwJyl9XSkKCX0sCn0pCg==",
        "usr/volcanos/plugin/local/chat/trans.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5mcm9tID0gY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuRElSLCBodG1sLkxFRlQsICJmcm9tIiwgInRvIikKCQljYW4udG8gPSBjYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5ESVIsIGh0bWwuUklHSFQsICJ0byIsICJmcm9tIikKCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5UUkFTSCwgaHRtbC5MRUZULCAiZnJvbSIpCgkJY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuVFJBU0gsIGh0bWwuUklHSFQsICJ0byIpCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgcG9zLCBmcm9tLCB0bykgewoJCXJldHVybiBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuU1RPUlksIGluZGV4OiBpbmRleH0sIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCB7ZmxvYXQ6IHBvcywgY2xlYXI6IHBvc30pCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLzIpCgkJCXN1Yi5fbGVnZW5kLmlubmVySFRNTCA9IGNhbi5PcHRpb24oZnJvbSkraWNlLlNQK2luZGV4CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsICJtYXgtd2lkdGgiLCBjYW4uQ29uZldpZHRoKCkvMikKCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCWlmIChjYW4ub25hY3Rpb25bY21kc1sxXV0pIHsgcmV0dXJuIGNhbi5vbmFjdGlvbltjbWRzWzFdXShjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIH0KCgkJCQl2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIHtfcG9kOiBjYW4uT3B0aW9uKGZyb20pfSkKCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBpbmRleCwgY21kcywgY2IpCgkJCX0KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCglzZW5kOiBmdW5jdGlvbihjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIHsgdmFyIF9mcm9tID0gY2FuW2Zyb21dLCBfdG8gPSBjYW5bdG9dCgkJdmFyIHBhdGggPSBjYW4ucmVxdWVzdChldmVudCkuT3B0aW9uKG5mcy5QQVRIKQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFLAoJCQlmcm9tOiBjYW4uT3B0aW9uKGZyb20pLCBmcm9tX3BhdGg6IHBhdGgsCgkJCXRvOiBjYW4uT3B0aW9uKHRvKSwgdG9fcGF0aDogX3RvLk9wdGlvbihuZnMuUEFUSCkrcGF0aC5zcGxpdChpY2UuUFMpLnBvcCgpLAoJCX0pCgkJY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24oKSB7IF90by5VcGRhdGUoKSB9LCB0cnVlKQoJfSwKfSkK",
        "usr/volcanos/plugin/local/chat/wx.js": "Vm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge3NvdXJjZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly9yZXMud3gucXEuY29tL29wZW4vanMvandlaXhpbi0xLjYuMC5qcyJdLCBmdW5jdGlvbihjYW4pIHsKCQl3eC5jb25maWcoe2RlYnVnOiBtc2cuT3B0aW9uKCJkZWJ1ZyIpID09IGljZS5UUlVFLAoJCQlhcHBJZDogbXNnLk9wdGlvbigiYXBwaWQiKSwgc2lnbmF0dXJlOiBtc2cuT3B0aW9uKCJzaWduYXR1cmUiKSwKCQkJbm9uY2VTdHI6IG1zZy5PcHRpb24oIm5vbmNlc3RyIiksIHRpbWVzdGFtcDogbXNnLk9wdGlvbigidGltZXN0YW1wIiksCgoJCQlqc0FwaUxpc3Q6IGNhbi5jb3JlLkl0ZW0oewoJCQkJc2NhblFSQ29kZTogZnVuY3Rpb24oY2IpIHsgd3guc2NhblFSQ29kZSh7bmVlZFJlc3VsdDogY2I/IDE6IDAsIHNjYW5UeXBlOiBbInFyQ29kZSIsImJhckNvZGUiXSwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IocmVzLnJlc3VsdFN0ciwgY2FuLmJhc2UuUGFyc2VKU09OKHJlcy5yZXN1bHRTdHIpKQoJCQkJfSB9KSB9LAoJCQkJZ2V0TG9jYXRpb246IGZ1bmN0aW9uKGNiKSB7IHd4LmdldExvY2F0aW9uKHt0eXBlOiAiZ2NqMDIiLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih7dHlwZTogImdjajAyIiwgbmFtZTogIuW9k+WJjeS9jee9riIsIHRleHQ6ICLlvZPliY3kvY3nva4iLCBsYXRpdHVkZTogcGFyc2VJbnQocmVzLmxhdGl0dWRlKjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQocmVzLmxvbmdpdHVkZSoxMDAwMDApIH0pCgkJCQl9IH0pIH0sCgkJCQlvcGVuTG9jYXRpb246IGZ1bmN0aW9uKG1zZykgeyB3eC5vcGVuTG9jYXRpb24oewoJCQkJCWxhdGl0dWRlOiBwYXJzZUludChtc2cuT3B0aW9uKCJsYXRpdHVkZSIpKS8xMDAwMDAsCgkJCQkJbG9uZ2l0dWRlOiBwYXJzZUludChtc2cuT3B0aW9uKCJsb25naXR1ZGUiKSkvMTAwMDAwLAoJCQkJCW5hbWU6IG1zZy5PcHRpb24obWRiLk5BTUUpLCBhZGRyZXNzOiBtc2cuT3B0aW9uKG1kYi5URVhUKSwKCQkJCQlzY2FsZTogbXNnLk9wdGlvbigic2NhbGUiKXx8MTQsIGluZm9Vcmw6IG1zZy5PcHRpb24obWRiLkxJTkspLAoJCQkJfSkgfSwKCQkJCWNob29zZUltYWdlOiBmdW5jdGlvbihjYiwgY291bnQpIHsgd3guY2hvb3NlSW1hZ2Uoe2NvdW50OiBjb3VudHx8OSwgc2l6ZVR5cGU6IFsnb3JpZ2luYWwnLCAnY29tcHJlc3NlZCddLCBzb3VyY2VUeXBlOiBbJ2FsYnVtJywgJ2NhbWVyYSddLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihyZXMubG9jYWxJZHMpCgkJCQl9IH0pIH0sCgkJCX0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi51c2VyLmFnZW50W2tleV0gPSB2YWx1ZSwga2V5IH0pLAoJCX0pCgkJd3guZXJyb3IoZnVuY3Rpb24oZXJyKSB7IGNhbi51c2VyLnRvYXN0KGVyciwgInd4IGxvYWQiKSB9KQoJCXd4LnJlYWR5KGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coInJlYWR5IikgfSkKCX0pCn19KQo=",
        "usr/volcanos/plugin/local/code/inner.css": "ZmllbGRzZXQuaW5uZXI+Zm9ybS5vcHRpb24gaW5wdXRbbmFtZT1wYXRoXSB7IHdpZHRoOjgwcHg7IH0KZmllbGRzZXQuaW5uZXI+Zm9ybS5vcHRpb24gaW5wdXRbbmFtZT1maWxlXSB7IHdpZHRoOjE2MHB4OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5hY3Rpb24+ZGl2LnRhYnMgeyBwYWRkaW5nOjVweDsgbWFyZ2luOjAgMXB4OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYuYWN0aW9uPmRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyB9CgpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQgeyBwb3NpdGlvbjpyZWxhdGl2ZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6d2hpdGU7IGZvbnQtc2l6ZToxNnB4OyBmb250LWZhbWlseTptb25vc3BhY2U7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQubGluZSB7IHBvc2l0aW9uOnN0aWNreTsgbGVmdDowOyB0ZXh0LWFsaWduOnJpZ2h0OyBwYWRkaW5nOjAgNnB4OyBib3JkZXItcmlnaHQ6c29saWQgMnB4IHJlZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB0ZC5saW5lIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IGJvcmRlcjpzb2xpZCAxcHggcmVkOyBib3JkZXItcmlnaHQ6c29saWQgMnB4IHJlZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgeyB3aGl0ZS1zcGFjZTpwcmU7IHBhZGRpbmctbGVmdDoxMHB4OyBjdXJzb3I6dGV4dDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5jb21tZW50IHsgYmFja2dyb3VuZC1jb2xvcjpibHVlOyBjb2xvcjpjeWFuOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmtleXdvcmQgeyBjb2xvcjp5ZWxsb3c7IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uZGF0YXR5cGUgeyBjb2xvcjpncmVlbjsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5mdW5jdGlvbiB7IGNvbG9yOmN5YW47IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uY29uc3RhbnQgeyBjb2xvcjptYWdlbnRhOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLnN0cmluZyB7IGNvbG9yOm1hZ2VudGE7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50IGlmcmFtZSB7IGJvcmRlcjowOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQucHJvZmlsZSBpZnJhbWUgeyBib3JkZXI6MDsgfQoKZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYucGF0aCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbm5lciBkaXYub3V0cHV0IGZpZWxkc2V0LnRvb2xraXQgeyBwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjBweDsgcmlnaHQ6MHB4OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZmllbGRzZXQudG9vbGtpdD5kaXYub3V0cHV0PmZpZWxkc2V0IHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZmllbGRzZXQudG9vbGtpdD5kaXYub3V0cHV0PmZpZWxkc2V0LnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzBlMzM2OWIzOyBjb2xvcjp3aGl0ZTsgZGlzcGxheTpibG9jazsgei1pbmRleDoxMDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZCB7IGZsb2F0OnJpZ2h0OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQ6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyZWVuOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgeyBoZWlnaHQ6MzFweDsgb3ZlcmZsb3c6YXV0bzsgfQoKYm9keS53aGl0ZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5pbm5lci5mbG9hdD5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6d2hpdGU7IH0KYm9keS5ibGFjayBmaWVsZHNldC5pbm5lci5mbG9hdD5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6d2hpdGU7IH0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgcGFkZGluZzowcHg7IGhlaWdodDozMXB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBwYWRkaW5nOjdweCAyMHB4OyBoZWlnaHQ6MTdweDsgZmxvYXQ6bGVmdDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFiczpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzFkMzM0OTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnBhdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IHBhZGRpbmc6NHB4IDEwcHg7IG1hcmdpbi1ib3R0b206NHB4OyBkaXNwbGF5OmJsb2NrOyBjbGVhcjpib3RoOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQubGluZSB7IHBhZGRpbmctdG9wOjRweDsgYm9yZGVyLXJpZ2h0Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHsgcGFkZGluZy10b3A6MnB4OyBib3JkZXI6c29saWQgMXB4IHRyYW5zcGFyZW50OyB9Cgpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5wcm9qZWN0IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnByb2plY3QudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuaXRlbSB7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBib3gtc2hhZG93OjBweCAwcHggNXB4IDFweCBncmV5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYucGF0aCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgdGQubGluZSB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgdGQudGV4dCB7IGJvcmRlcjpzb2xpZCAxcHggbGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLnN0cmluZyB7IGNvbG9yOnJveWFsYmx1ZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5mdW5jdGlvbiB7IGNvbG9yOmRhcmtyZWQ7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4ua2V5d29yZCB7IGNvbG9yOmJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IHBhZGRpbmc6MHB4IDEwcHg7IGJvcmRlci1sZWZ0OnNvbGlkIDJweCByZWQ7IGhlaWdodDozMHB4OyBmbG9hdDpyaWdodDsgYm9yZGVyLXJhZGl1czowOyBib3gtc2hhZG93Om5vbmU7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LmlubmVyPmZvcm0ub3B0aW9uIGlucHV0W25hbWU9ZmlsZV0geyB3aWR0aDo5MHB4OyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LnBsdWdpbi5pbm5lciBkaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5wbHVnaW4uaW5uZXIgZGl2LmFjdGlvbiB7IGRpc3BsYXk6Y29udGVudHM7IH0KCmJvZHkubW9iaWxlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkubW9iaWxlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi50b2dnbGUgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZTsgd2lkdGg6MzBweDsgfQpib2R5Lm1vYmlsZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYudG9nZ2xlLmRpc3BsYXkgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZTsgbWFyZ2luLXRvcDotMzNweDsgaGVpZ2h0OjMwcHg7IHdpZHRoOjEwMHB4OyB9CgoudW5zZWxlY3RhYmxlIHsKCS13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOwoJLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOwoJLWtodG1sLXVzZXItc2VsZWN0Om5vbmU7CgktbW96LXVzZXItc2VsZWN0Om5vbmU7CgktbXMtdXNlci1zZWxlY3Q6bm9uZTsKCS1vLXVzZXItc2VsZWN0Om5vbmU7Cgl1c2VyLXNlbGVjdDpub25lOwp9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LnBsdWdpbiBkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5ub25jZSB7IGNvbG9yOmxpZ2h0Z3JheTsgfQo=",
        "usr/volcanos/plugin/local/code/inner.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgcGF0aHMgPSBjYW4uY29yZS5TcGxpdChjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaWNlLkZTKTsgY2FuLk9wdGlvbihuZnMuUEFUSCwgcGF0aHNbMF0pCgkJdmFyIGZpbGVzID0gY2FuLmNvcmUuU3BsaXQoY2FuLk9wdGlvbihuZnMuRklMRSksIGljZS5GUyk7IGNhbi5PcHRpb24obmZzLkZJTEUsIGZpbGVzWzBdKQoJCWNhbi50YWJ2aWV3ID0gY2FuLnRhYnZpZXd8fHt9LCBjYW4uaGlzdG9yeSA9IGNhbi5oaXN0b3J5fHxbXSwgY2FuLnRvb2xraXQgPSB7fSwgY2FuLmV4dGVudGlvbnMgPSB7fQoJCWNhbi5wcm9maWxlX3NpemUgPSB7fSwgY2FuLmRpc3BsYXlfc2l6ZSA9IHt9CgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5wcm9qZWN0LCAyNDApCgkJY2FuLm9uaW1wb3J0Ll9wcm9qZWN0KGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJY2FuLm9uaW1wb3J0Ll9kaXNwbGF5KGNhbiwgY2FuLnVpLmRpc3BsYXkpCgkJY2FuLm9uaW1wb3J0Ll9pbnB1dChjYW4pCgoJCWNhbi51aS5fY29udGVudCA9IGNhbi51aS5jb250ZW50CgkJY2FuLnVpLl9wcm9maWxlX291dHB1dCA9IGNhbi51aS5wcm9maWxlX291dHB1dAoJCWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9zdGF0dXMpCgkJY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIGNhbi5vbnBsdWdpbikKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCgkJc3dpdGNoIChjYW4uTW9kZSgpKSB7CgkJCWNhc2UgInNpbXBsZSI6IGNhbi5vbmltcG9ydC5fc2ltcGxlKGNhbik7IGJyZWFrCgkJCWNhc2UgImZsb2F0IjogYnJlYWsKCQkJY2FzZSAiY21kIjogY2FuLm9uaW1wb3J0Ll90YWJzKGNhbikgLy8gbm8gYnJlYWsKCQkJY2FzZSAiZnVsbCI6IC8vIG5vIGJyZWFrCgkJCWRlZmF1bHQ6IGlmIChjYW4uQ29uZkhlaWdodCgpIDwgMzIwKSB7IGNhbi5Db25mSGVpZ2h0KDMyMCkgfQoJCQkJY2FuLm9uaW1wb3J0LnByb2plY3QoY2FuLCBwYXRocyksIGNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQkJCWNhbi5vbmltcG9ydC5fdG9vbGtpdChjYW4sIGNhbi51aS50b29sa2l0KSwgY2FuLm9uaW1wb3J0Ll9zZXNzaW9uKGNhbiwgbXNnLCBmdW5jdGlvbigpIHsKCQkJCQlmaWxlcy5sZW5ndGggPiAxICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5OZXh0KGZpbGVzLnNsaWNlKDEpLCBmdW5jdGlvbihmaWxlLCBuZXh0KSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGZpbGUsIGNhbi5PcHRpb24obmZzLkxJTkUpLCBuZXh0KQoJCQkJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGhzWzBdLCBmaWxlc1swXSwgIiIpIH0pIH0pCgkJCQl9KSwgY2FuLm9uaW1wb3J0Ll9rZXlkb3duKGNhbikKCQl9CgoJCXZhciBoYXNoID0gbG9jYXRpb24uaGFzaDsgY2FuLmlzQ21kTW9kZSgpIHx8IChjYW4udGFidmlld1tjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IG1zZykKCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuTElORSksIGZ1bmN0aW9uKCkgewoJCQlpZiAoY2FuLmlzQ21kTW9kZSgpICYmIGhhc2gpIHsgdmFyIGFyZ3MgPSBjYW4uY29yZS5TcGxpdChkZWNvZGVVUklDb21wb25lbnQoaGFzaCkuc2xpY2UoMSkpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgYXJnc1swXSwgYXJnc1sxXSkgfSkKCQkJfQoJCX0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4pIHsKCX0sCglfcHJvamVjdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9Cgl9LAoJX3Byb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVUXSk7IGNhbi51aS5wcm9maWxlX291dHB1dCA9IHVpLm91dHB1dAoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIGtpdC5EaWN0KAoJCQljbGkuQ0xPU0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCQkJY2xpLkNMRUFSLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB1aS5vdXRwdXQpIH0sCgkJCWNsaS5TSE9XLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pIH0sCgkJCW5mcy5MT0FELCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bbmZzLkxPQURdKGV2ZW50LCBjYW4pIH0sCgkJCW1kYi5MSU5LLCBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKFtuZnMuWk1MLCBuZnMuSU1MXS5pbmRleE9mKGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpID4gLTEpIHsKCQkJCQljYW4udXNlci5vcGVuKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgewoJCQkJCQlwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCB3ZWJzaXRlOiBjYW4uYmFzZS50cmltUHJlZml4KGNhbi5iYXNlLlBhdGgoY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKSwgInNyYy93ZWJzaXRlLyIpLAoJCQkJCX0pKQoJCQkJfSBlbHNlIHsKCQkJCQljYW4udXNlci5vcGVuKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgewoJCQkJCQlwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCBjbWQ6IGNhbi5iYXNlLlBhdGgoY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCQkJCX0pKQoJCQkJfQoJCQl9LAoJCQltZGIuUExVR0lOLCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGRhdGEpIHsgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBkYXRhLCB1aS5vdXRwdXQpIH0pIH0sCgkJCWh0bWwuV0lEVEgsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuV0lEVEgsIHZhbHVlOiBjYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildKjEwMC9jYW4uQ29uZldpZHRoKCl8fDUwfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJCQljYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gY2FuLkNvbmZXaWR0aCgpKnBhcnNlSW50KGxpc3RbMF0pLzEwMAoJCQkJCWNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikKCQkJCX0pCgkJCX0KCQkpKTsgdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBhY3Rpb25bc2hvdz8gY2xpLlNIT1c6IGNsaS5DTE9TRV0oZXZlbnQpIH0KCX0sCglfZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtodG1sLkFDVElPTiwgaHRtbC5PVVRQVVQsIGh0bWwuU1RBVFVTXSk7IGNhbi51aS5kaXNwbGF5X291dHB1dCA9IHVpLm91dHB1dCwgY2FuLnVpLmRpc3BsYXlfc3RhdHVzID0gdWkuc3RhdHVzCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW10sIHVpLmFjdGlvbiwga2l0LkRpY3QoCgkJCWNsaS5DTE9TRSwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJCQljbGkuQ0xFQVIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHVpLm91dHB1dCkgfSwKCQkJY2xpLkVYRUMsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikgfSwKCQkJbWRiLlBMVUdJTiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihkYXRhKSB7IGNhbi5vbmltcG9ydC5wbHVnKGNhbiwgZGF0YSwgdWkub3V0cHV0KSB9KSB9LAoJCQlodG1sLkhFSUdIVCwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogaHRtbC5IRUlHSFQsIHZhbHVlOiBjYW4uZGlzcGxheV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildKjEwMC9jYW4uQ29uZkhlaWdodCgpfHw1MH1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQkJY2FuLmRpc3BsYXlfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IGNhbi5Db25mSGVpZ2h0KCkqcGFyc2VJbnQobGlzdFswXSkvMTAwCgkJCQkJY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKQoJCQkJfSkKCQkJfQoJCSkpOyB0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGFjdGlvbltzaG93PyBjbGkuRVhFQzogY2xpLkNMT1NFXShldmVudCkgfQoJfSwKCV90b29sa2l0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi51aS50b29sa2l0ID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgInRvb2xraXQiLCB7fSwgY2FuLl9vdXRwdXQpCgl9LAoJX2tleWRvd246IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25rZXltYXAuX2J1aWxkKGNhbikKCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05LRVlET1dOLCBmdW5jdGlvbihldmVudCkgewoJCQljYW4uX2tleV9saXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBtZGIuUExVR0lOLCBjYW4uX2tleV9saXN0LCBjYW4udWkuY29udGVudCkKCQl9KQoJfSwKCV9zZXNzaW9uOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmltcG9ydC5zZXNzKGNhbiwgIiIsIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQuc2VzcyhjYW4sIHsKCQkJcGx1ZzogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJwbHVnIikpLnJldmVyc2UoKSwKCQkJZXh0czogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJleHRzIikpLnJldmVyc2UoKSwKCQkJdGFiczogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJ0YWJzIikpLAoJCX0pIH0pCgl9LAoJX3NpbXBsZTogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnRhYnZpZXdbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBjYW4uX21zZwoJCWNhbi5Db25mSGVpZ2h0KCIiKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgaHRtbC5PVVRQVVQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAic2ltcGxlIikKCX0sCglfdGFiczogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnVpLl90YWJzID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiAidGFicyJ9XSwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLnVpLl9wYXRoID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiAicGF0aCJ9XSwgY2FuLnVpLmNvbnRlbnQpCgl9LAoKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7IGlmIChjYW4uaXNTaW1wbGVNb2RlKCkpIHsgcmV0dXJuIH0KCQlpZiAoY2FuLmlzRmxvYXRNb2RlKCkpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KSB9CgoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKSsoY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDE2OiAwKS0oY2FuLnVzZXIuaXNXaW5kb3dzICYmICFjYW4uaXNDbWRNb2RlKCk/IDIwOiAwKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fCh3aWR0aC1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkvMikKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLmNvbnRlbnQsIHdpZHRoLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoLWNhbi51aS5wcm9maWxlLm9mZnNldFdpZHRoKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuZGlzcGxheSwgd2lkdGgtY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpCgoJCXZhciBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJaWYgKGNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5pc0Zsb2F0TW9kZSgpKSB7IGhlaWdodCA9IGNhbi5fcm9vdC5faGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUIH0KCgkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgewoJCQlpZiAoY2FuLnVpLmRpc3BsYXkuZGlzcGxheSAhPSBodG1sLk5PTkUpIHsKCQkJCWlmIChjYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQgPiBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKSAvIDIsIDIwMCkpIHsKCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5X291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKSAvIDIsIDIwMCkpCgkJCQl9CgkJCX0KCQkJaWYgKGNhbi5fc3RhdHVzLnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FKSB7IGhlaWdodCArPSBodG1sLkFDVElPTl9IRUlHSFQgfQoJCQl2YXIgcmVzdCA9IGNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodCtjYW4udWkuX3RhYnMub2Zmc2V0SGVpZ2h0K2Nhbi51aS5fcGF0aC5vZmZzZXRIZWlnaHQrNAoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5jb250ZW50LCBoZWlnaHQraHRtbC5BQ1RJT05fSEVJR0hULXJlc3QpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBoZWlnaHQtY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0KQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9qZWN0LCBoZWlnaHQraHRtbC5BQ1RJT05fSEVJR0hUKQoJCX0gZWxzZSB7IHZhciByZXN0ID0gY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0OyBpZiAoaGVpZ2h0IDwgMzIwKSB7IGhlaWdodCA9IDMyMCB9CgkJCWlmICghY2FuLmlzRnVsbE1vZGUoKSkgewoJCQkJY2FuLl9taW5faGVpZ2h0ID0gY2FuLl9taW5faGVpZ2h0fHxoZWlnaHQsIGhlaWdodCA+PSBjYW4uX21pbl9oZWlnaHQgJiYgKGNhbi5fbWluX2hlaWdodCA9IGhlaWdodCkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuTUlOX0hFSUdIVCwgY2FuLl9taW5faGVpZ2h0KQoJCQl9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGNhbi51c2VyLmlzTW9iaWxlPyBodG1sLkhFSUdIVDogaHRtbC5NQVhfSEVJR0hULCBoZWlnaHQtcmVzdCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2plY3QsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCtyZXN0KQoJCX0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvZmlsZSwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGlmcmFtZSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpZnJhbWUsIHtoZWlnaHQ6IGNhbi51aS5wcm9maWxlLm9mZnNldEhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQtNCwgd2lkdGg6IGNhbi51aS5wcm9maWxlLm9mZnNldFdpZHRofSkKCQl9KQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgewoJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgWwoJCQl7bmFtZTogInNvdXJjZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgdmFyIHRvdGFsID0gMAoJCQkJZnVuY3Rpb24gc2hvdyhwYXRoLCB0YXJnZXQpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdCh7fSwge2Rpcl9yb290OiBwYXRoLCBkaXJfZGVlcDogdHJ1ZX0pLCBbaWNlLlBXRF0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4uT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKGl0ZW0ucGF0aCkgPT0gMCkgeyBpdGVtLmV4cGFuZCA9IHRydWUgfSB9KQoJCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgbGlzdCwgbmZzLlBBVEgsIGljZS5QUywgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBpdGVtLnBhdGgpIC8vIOaYvuekuuaWh+S7tgoJCQkJCX0sIHRhcmdldCksIGNhbi5TdGF0dXMoIuaWh+S7tuaVsCIsIHRvdGFsICs9IG1zZy5MZW5ndGgoKSkKCQkJCX0sIHRydWUpIH0gaWYgKHBhdGgubGVuZ3RoID09IDEpIHsgcmV0dXJuIHNob3cocGF0aFswXSwgdGFyZ2V0KSB9CgoJCQkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBjYW4uY29yZS5MaXN0KHBhdGgsIGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIHtuYW1lOiBwYXRoLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHNob3cocGF0aCwgdGFyZ2V0KSB9fSB9KSwgdGFyZ2V0KQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gIiIgfSkKCQkJfX0sCgkJCXtuYW1lOiAicGx1Z2luIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBjYW4uY29yZS5JdGVtKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB7aW5kZXg6IGNhbi5iYXNlLnRyaW1QcmVmaXgoa2V5LCAiY2FuLiIpfSB9KSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLmNvcmUuS2V5cygiY2FuIiwgaXRlbS5pbmRleCksIGN0eC5JTkRFWCkgLy8g5pi+56S65o+S5Lu2CgkJCQl9LCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KQoJfSwKCWhpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgcHVzaCkgewoJCWNhbi5iYXNlLkVxKHB1c2gsIGNhbi5oaXN0b3J5W2Nhbi5oaXN0b3J5Lmxlbmd0aC0xXSkgfHwgY2FuLmhpc3RvcnkucHVzaChwdXNoKQoJCXJldHVybiBjYW4uU3RhdHVzKCLot7PovazmlbAiLCBjYW4uaGlzdG9yeS5sZW5ndGgpLCBwdXNoCgl9LAoJdGFidmlldzogZnVuY3Rpb24oY2FuLCBwYXRoLCBmaWxlLCBsaW5lLCBjYiwgc2tpcCwgc2tpcDIpIHsgdmFyIGtleSA9IGNhbi5vbmV4cG9ydC5rZXlzKGNhbiwgZmlsZSwgcGF0aCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7IGxvY2F0aW9uLmhhc2ggPSBmaWxlK2ljZS5GUysobGluZXx8MSkgfQoJCWlmICghc2tpcCAmJiBjYW4udGFidmlld1trZXldKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShwYXRoK2ZpbGUpCgkJCWNhbi5fbXNnICYmIGNhbi5fbXNnLk9wdGlvbihuZnMuTElORSwgY2FuLk9wdGlvbihuZnMuTElORSkpLCBjYW4uX21zZyA9IGNhbi50YWJ2aWV3W2tleV0KCQkJY2FuLk9wdGlvbih7cGF0aDogcGF0aCwgZmlsZTogZmlsZSwgbGluZTogbGluZXx8Y2FuLl9tc2cuT3B0aW9uKG5mcy5MSU5FKXx8MX0pCgkJCXJldHVybiBjYW4uX21zZy5PcHRpb24oY2FuLk9wdGlvbigpKSwgY2FuLm9uc3ludGF4Ll9pbml0KGNhbiwgY2FuLl9tc2csIGNiLCBza2lwMikKCQl9CgoJCWZ1bmN0aW9uIHNob3cobXNnKSB7IHZhciBza2lwMiA9IHNraXA7IGNhbi50YWJ2aWV3W2tleV0gPSBtc2cKCQkJY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbe25hbWU6IGZpbGUuc3BsaXQobGluZSA9PSBjdHguSU5ERVg/IGljZS5QVDogaWNlLlBTKS5wb3AoKSwgdGV4dDogZmlsZX1dLCBmdW5jdGlvbihldmVudCwgbWV0YSkgewoJCQkJY2FuLl90YWIgPSBtc2cuX3RhYiA9IGV2ZW50LnRhcmdldCwgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBmaWxlLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSwgY2IsIGZhbHNlLCBza2lwMiksIGNiID0gbnVsbCwgc2tpcDIgPSBmYWxzZQoJCQl9LCBmdW5jdGlvbihpdGVtKSB7CgkJCQlkZWxldGUoY2FuLnRhYnZpZXdba2V5XSkKCQkJCWRlbGV0ZShjYW4uX2NhY2hlX2RhdGFbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLl9jb250ZW50Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuX3Byb2ZpbGVfb3V0cHV0Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuZGlzcGxheV9vdXRwdXQuX2NhY2hlW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJbXNnLl9jb250ZW50ICE9IGNhbi51aS5fY29udGVudCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBtc2cuX2NvbnRlbnQpCgkJCX0sIGNhbi51aS5fdGFicywgZnVuY3Rpb24oaXRlbSkge30pCgkJfQoKCQljYW4uT3B0aW9uKGNhbi5vbmltcG9ydC5oaXN0b3J5KGNhbiwge3BhdGg6IHBhdGgsIGZpbGU6IGZpbGUsIGxpbmU6IGxpbmV9KSkKCQlsaW5lID09IGN0eC5JTkRFWD8gc2hvdyhjYW4ucmVxdWVzdCh7fSwge2luZGV4OiBmaWxlLCBsaW5lOiBsaW5lfSkpOgoJCQlsaW5lID09IHdlYi5EUkVBTT8gc2hvdyhjYW4ucmVxdWVzdCh7fSwge2luZGV4OiBmaWxlLCBsaW5lOiBsaW5lfSkpOgoJCQkJY2FuLnJ1bih7fSwgW3BhdGgsIGZpbGVdLCBzaG93LCB0cnVlKQoJfSwKCXByb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIHdpZHRoID0gY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXXx8KGNhbi5Db25mV2lkdGgoKS1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkvMgoJCWlmIChtc2cpIHsKCQkJdmFyIHN1cCA9IGNhbi50YWJ2aWV3W2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGZhbHNlKQoJCQlpZiAobXNnLlJlc3VsdCgpLmluZGV4T2YoIjxpZnJhbWUiKSA+IC0xKSB7CgkJCQlpZiAoc3VwLl9wcm9maWxlX291dHB1dCAhPSBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHN1cC5fcHJvZmlsZV9vdXRwdXQpIH0KCQkJCWNhbi51aS5wcm9maWxlX291dHB1dCA9IHN1cC5fcHJvZmlsZV9vdXRwdXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQucGFyZW50Tm9kZSwgW3t2aWV3OiAib3V0cHV0IiwgaW5uZXI6IG1zZy5SZXN1bHQoKX1dKS5vdXRwdXQKCQkJfSBlbHNlIHsKCQkJCWNhbi51aS5wcm9maWxlX291dHB1dCA9IHN1cC5fcHJvZmlsZV9vdXRwdXQgPSBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0CgkJCQljYW4ub25pbXBvcnQucHJvY2VzcyhjYW4sIG1zZywgY2FuLnVpLl9wcm9maWxlX291dHB1dCwgd2lkdGgsIGNhbi51aS5wcm9maWxlLm9mZnNldEhlaWdodCkKCQkJfQoJCX0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCB0cnVlKQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCWRpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlaWdodCA9IGNhbi5kaXNwbGF5X3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fHtzaDogY2FuLkNvbmZIZWlnaHQoKS8yfVtjYW4ucGFyc2VdfHxjYW4uQ29uZkhlaWdodCgpLzQKCQlpZiAobXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9jZXNzKGNhbiwgbXNnLCBjYW4udWkuZGlzcGxheV9vdXRwdXQsIGNhbi51aS5kaXNwbGF5Lm9mZnNldFdpZHRoLCBoZWlnaHQpCgkJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUyksIGNhbi51aS5kaXNwbGF5X3N0YXR1cykKCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgl9LAoJcHJvY2VzczogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCwgd2lkdGgsIGhlaWdodCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfUFJPQ0VTUykgPT0gIl9maWVsZCIpIHsKCQkJbXNnLlRhYmxlKGZ1bmN0aW9uKG1ldGEpIHsgbWV0YS5kaXNwbGF5ID0gbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpCgkJCQljYW4ub25pbXBvcnQucGx1ZyhjYW4sIG1ldGEsIHRhcmdldCwgZnVuY3Rpb24oc3ViKSB7IHdpZHRoICYmIHN1Yi5Db25mV2lkdGgod2lkdGgpLCBoZWlnaHQgJiYgc3ViLkNvbmZIZWlnaHQoaGVpZ2h0KSwgc3ViLkZvY3VzKCkgfSkKCQkJfSkKCQl9IGVsc2UgaWYgKG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKSAhPSAiIikgewoJCQljYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpLCB0YXJnZXQsIGZhbHNlLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9KSB9KQoJCX0gZWxzZSB7CgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLCB0YXJnZXQpCgkJfQoJfSwKCXRvb2xraXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgY2IpIHsgbWV0YS5tc2cgPSB0cnVlCgkJY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBtZXRhLCBjYW4udWkudG9vbGtpdC5vdXRwdXQsIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLTQqaHRtbC5BQ1RJT05fSEVJR0hUKSwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoKSkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCgkJCWNhbi5fc3RhdHVzLmFwcGVuZENoaWxkKHN1Yi5fbGVnZW5kKSwgc3ViLl9sZWdlbmQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9zdGF0dXMsIGljZS5QVCtodG1sLlNFTEVDVClbMF0gPT0gZXZlbnQudGFyZ2V0KSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGV2ZW50LnRhcmdldCwgaHRtbC5TRUxFQ1QpCgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLlNFTEVDVCkKCQkJCQlyZXR1cm4KCQkJCX0KCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkudG9vbGtpdC5vdXRwdXQsIGh0bWwuRklFTERTRVQsIHN1Yi5fdGFyZ2V0KSwgc3ViLkZvY3VzKCkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX3N0YXR1cywgaHRtbC5MRUdFTkQsIGV2ZW50LnRhcmdldCkKCQkJCWlmIChtZXRhLm1zZyA9PSB0cnVlKSB7IG1ldGEubXNnID0gZmFsc2UsIHN1Yi5VcGRhdGUoKSB9CgkJCX0sIHN1Yi5zZWxlY3QgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHN1Yi5fbGVnZW5kLmNsaWNrKCksIHN1YiB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBzdWIuc2VsZWN0KCkgfQoJCQlzdWIuX2xlZ2VuZC5vbm1vdXNlZW50ZXIgPSBudWxsCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pCgl9LAoJZXh0czogZnVuY3Rpb24oY2FuLCB1cmwsIGNiKSB7CgkJY2FuLnJlcXVpcmUoW3VybF0sIGZ1bmN0aW9uKCkge30sIGZ1bmN0aW9uKGNhbiwgbmFtZSwgc3ViKSB7IHN1Yi5faW5pdChjYW4sIGNhbi5iYXNlLlBhcnNlVVJMKHN1Yi5fcGF0aCksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4uZXh0ZW50aW9uc1t1cmwuc3BsaXQoIj8iKVswXV0gPSBzdWIsIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pIH0pCgl9LAoJc2VzczogZnVuY3Rpb24oY2FuLCBzZXNzLCBjYikgeyBzZXNzID0gc2Vzc3x8Y2FuLnVzZXIubG9jYWxTdG9yYWdlKGNhbiwgIndlYi5jb2RlLmlubmVyLnNlc3MiKQoJCWNhbi5jb3JlLk5leHQoc2Vzcy5wbHVnLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBpdGVtfSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0W2l0ZW1dID0gc3ViLCBuZXh0KCkgfSkgfSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5jb3JlLk5leHQoc2Vzcy5leHRzLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbmltcG9ydC5leHRzKGNhbiwgaXRlbSwgbmV4dCkgfSwgZnVuY3Rpb24oKSB7CgkJCQl2YXIgcGF0aCA9IGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlID0gY2FuLk9wdGlvbihuZnMuRklMRSksIGxpbmUgPSBjYW4uT3B0aW9uKG5mcy5MSU5FKQoJCQkJY2FuLmJhc2UuZ2V0VmFsaWQoc2Vzcy50YWJzKT8gY2FuLmNvcmUuTmV4dChzZXNzLnRhYnMsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgdmFyIGxzID0gaXRlbS5zcGxpdChpY2UuREYpOyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGxzWzBdLCBsc1sxXSwgbHNbMl0sIG5leHQpIH0sCgkJCQkJZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgZmlsZSwgbGluZSwgY2IpIH0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQkJfSkKCQl9KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTlBMVUdJTiwge2hlbHA6ICLms6jlhozmj5Lku7YiLCAKCSJjYW4uY29kZS5pbm5lci5rZXltYXAiOiBzaHkoIuaMiemUriIsIHt9LCBbIm1vZGUiLCAia2V5IiwgaWNlLkxJU1QsIGljZS5CQUNLXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4uY29yZS5JdGVtKGNhbi5vbmtleW1hcC5fbW9kZSwgZnVuY3Rpb24obW9kZSwgdmFsdWUpIHsKCQkJKCFjbWRzWzBdIHx8IGNtZHNbMF0gPT0gbW9kZSkgJiYgY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oa2V5LCBmdW5jKSB7CgkJCQlpZiAoY21kc1swXSA9PSBtb2RlICYmIGNtZHNbMV0gPT0ga2V5KSB7CgkJCQkJbXNnLlB1c2goImtleSIsICJtb2RlIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBtb2RlKQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAia2V5IikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBrZXkpCgkJCQkJbXNnLlB1c2goImtleSIsICJoZWxwIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBmdW5jLmhlbHApCgkJCQkJbXNnLlB1c2goImtleSIsICJmdW5jIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBmdW5jLnRvU3RyaW5nKCkpCgkJCQl9IGVsc2UgaWYgKCFjbWRzWzBdIHx8ICFjbWRzWzFdKSB7CgkJCQkJbXNnLlB1c2goa2l0LkRpY3QoIm1vZGUiLCBtb2RlLCAia2V5Iiwga2V5LCAiaGVscCIsIGZ1bmMuaGVscHx8ZnVuYy50b1N0cmluZygpKSkKCQkJCX0KCQkJfSkKCQl9KSwgbXNnLlN0YXR1c1RpbWVDb3VudCgpCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTlNZTlRBWCwge2hlbHA6ICLor63ms5Xpq5jkuq4iLCBsaXN0OiBbImtleXdvcmQiLCAicHJlZml4IiwgImxpbmUiXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgc2tpcCkgewoJCWlmIChjYW4udWkuX3BhdGgpIHsKCQkJY2FuLnVpLl9wYXRoLmlubmVySFRNTCA9IG1zZy5PcHRpb24oY3R4LklOREVYKT8gbXNnLk9wdGlvbihuZnMuTElORSkgPT0gd2ViLkRSRUFNPwoJCQkJLyogZHJlYW0gKi8gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgdG9waWM6IGNhbi5taXNjLlNlYXJjaChjYW4sICJ0b3BpYyIpfSwgdHJ1ZSkpOgoJCQkJLyogaW5kZXggKi8gbXNnLk9wdGlvbihuZnMuRklMRSk6IC8qIGZpbGUgKi8gY2FuLmJhc2UuUGF0aChtc2cuT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpCgkJfQoJCWNhbi51aS5jdXJyZW50ICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuY3VycmVudCwgIW1zZy5PcHRpb24oY3R4LklOREVYKSkKCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKGNhY2hlX2RhdGEpIHsKCQkJY2FuLmZpbGUgJiYgKGNhY2hlX2RhdGFbY2FuLmZpbGVdID0ge2N1cnJlbnQ6IGNhbi5jdXJyZW50LCBtYXg6IGNhbi5tYXgsCgkJCQlwcm9maWxlX2Rpc3BsYXk6IGNhbi51aS5wcm9maWxlLnN0eWxlLmRpc3BsYXksIGRpc3BsYXlfZGlzcGxheTogY2FuLnVpLmRpc3BsYXkuc3R5bGUuZGlzcGxheSwKCQkJfSkKCQkJY2FuLmZpbGUgPSBjYW4uYmFzZS5QYXRoKG1zZy5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSkKCQkJY2FuLnBhcnNlID0gY2FuLmJhc2UuRXh0KGNhbi5maWxlKSwgY2FuLlN0YXR1cygi5qih5byPIiwgInBsdWdpbiIpCgoJCQl2YXIgcCA9IGNhY2hlX2RhdGFbY2FuLmZpbGVdOyBwICYmIChjYW4uY3VycmVudCA9IHAuY3VycmVudCwgY2FuLm1heCA9IHAubWF4KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCB7ZGlzcGxheTogcD8gcC5wcm9maWxlX2Rpc3BsYXk6IGh0bWwuTk9ORX0pCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHtkaXNwbGF5OiBwPyBwLmRpc3BsYXlfZGlzcGxheTogaHRtbC5OT05FfSkKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5fdGFicywgaHRtbC5ESVZfVEFCUywgbXNnLl90YWIpCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgbXNnLl90YWIpCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJCW1zZy5PcHRpb24oY3R4LklOREVYKSAmJiBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5PUFRJT05fQVJHUylbMF0pCgkJCX0pCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuX2NvbnRlbnQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cygiZGl2LmNvbnRlbnQiLCBodG1sLklGUkFNRSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgaXRlbSA9PSBtc2cuX2NvbnRlbnQpKSB7IGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50IH0KCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLl9wcm9maWxlX291dHB1dC5wYXJlbnROb2RlLCBjYW4ucGFnZS5LZXlzKCJkaXYub3V0cHV0IiksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgaXRlbSA9PSBtc2cuX3Byb2ZpbGVfb3V0cHV0KSkgeyBtc2cuX3Byb2ZpbGVfb3V0cHV0IH0KCQkJfSkKCQkJcmV0dXJuIGNhbi5maWxlCgkJfSwgY2FuLnVpLl9jb250ZW50LCBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0LCBjYW4udWkuZGlzcGxheV9vdXRwdXQpICYmICFza2lwKSB7CgkJCXJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShudWxsLCBjYW4sIG1zZy5PcHRpb24obmZzLkxJTkUpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJfQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCWlmIChtc2cuT3B0aW9uKGN0eC5JTkRFWCkpIHsKCQkJaWYgKG1zZy5PcHRpb24obmZzLkxJTkUpID09IHdlYi5EUkVBTSkgewoJCQkJaWYgKG1zZy5fY29udGVudCkgeyByZXR1cm4gfQoJCQkJY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3R5cGU6IGh0bWwuSUZSQU1FLCBzcmM6IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogbXNnLk9wdGlvbihuZnMuRklMRSksIHRvcGljOiBjYW4ubWlzYy5TZWFyY2goY2FuLCAidG9waWMiKX0sIHRydWUpLCB3aWR0aDogY2FuLnVpLmNvbnRlbnQub2Zmc2V0V2lkdGgsIGhlaWdodDogY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0fV0sIGNhbi51aS5jb250ZW50KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQl9CgoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4udWkuX2NvbnRlbnQsIHRydWUpCgkJCXJldHVybiBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIHtpbmRleDogbXNnLk9wdGlvbihjdHguSU5ERVgpfSwgY2FuLnVpLmNvbnRlbnQsIGZ1bmN0aW9uKHN1YikgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodChjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQpKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLnVpLmNvbnRlbnQub2Zmc2V0V2lkdGgpKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHN1Yi5Gb2N1cygpIH0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCgkJCQlzdWIub25hY3Rpb24uY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmJhY2soe30sIGNhbiksIG1zZy5fdGFiLl9jbG9zZSgpIH0KCQkJCXN1Yi5vbmltcG9ydC5fb3BlbiA9IGZ1bmN0aW9uKHN1YiwgbXNnLCBfYXJnKSB7IHZhciB1cmwgPSBjYW4uYmFzZS5QYXJzZVVSTChfYXJnKSwgbHMgPSB1cmwub3JpZ2luLnNwbGl0KCIvY2hhdC9wb2QvIikKCQkJCQlpZiAoX2FyZy5pbmRleE9mKGxvY2F0aW9uLm9yaWdpbikgPT0gMCAmJiBscy5sZW5ndGggPiAxKSB7CgkJCQkJCXJldHVybiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsc1sxXS5zcGxpdCgiLyIpWzBdLCB3ZWIuRFJFQU0pLCBzdWIuVXBkYXRlKCkgLy8g5pi+56S656m66Ze0CgkJCQkJfQoJCQkJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBzdWIuVXBkYXRlKCkKCQkJCX0KCQkJfSkKCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnVpLl9jb250ZW50LCB0cnVlKQoKCQlmdW5jdGlvbiBpbml0KHApIHsKCQkJY2FuLm1heCA9IDAsIGNhbi5jb3JlLkxpc3QoY2FuLmxzID0gbXNnLlJlc3VsdCgpLnNwbGl0KGljZS5OTCksIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uYWN0aW9uLmFwcGVuZExpbmUoY2FuLCBpdGVtKSB9KQoJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShudWxsLCBjYW4sIG1zZy5PcHRpb24obmZzLkxJTkUpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgoJCQltc2cuT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKCJ3ZWJzaXRlLyIpID09IDAgJiYgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKQoJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIGNhbi5fZmllbGRzLCBjaGF0LlBMVUdJTikpIHsKCQkJCXAgJiYgcC5yZW5kZXIgJiYgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKQoJCQkJcCAmJiBwLmVuZ2luZSAmJiBjYW4ub25hY3Rpb25bY2xpLkVYRUNdKHt9LCBjYW4pCgkJCX0KCQl9CgkJY2FuLkNvbmYoInBsdWciKSAmJiAoY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0gPSBjYW4uQ29uZigicGx1ZyIpKQoJCXZhciBwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV07ICFwPyBjYW4ucnVuQWN0aW9uKHt9LCBtZGIuUExVR0lOLCBbY2FuLnBhcnNlLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgbXNnLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJaW5pdChwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0gPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSkKCQl9KTogaW5pdChwKQoJfSwKCV9wYXJzZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7IGlmIChsaW5lLmluZGV4T2YoIjxodG1sIikgPT0gMCkgeyByZXR1cm4gbGluZSB9CgkJbGluZSA9IGNhbi5wYWdlLnJlcGxhY2UoY2FuLCBsaW5lfHwiIikKCgkJZnVuY3Rpb24gd3JhcCh0eXBlLCBzdHIpIHsgcmV0dXJuIHR5cGU/ICc8c3BhbiBjbGFzcz0iJyt0eXBlKyciPicrc3RyKyc8L3NwYW4+Jzogc3RyIH0KCQl2YXIgcCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdOyBpZiAoIXApIHsgcmV0dXJuIGxpbmUgfSBwID0gY2FuLm9uc3ludGF4W3AubGlua118fHAsIHAuc3BsaXQgPSBwLnNwbGl0fHx7fQoJCXAua2V5d29yZCAmJiAobGluZSA9IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQobGluZSwgcC5zcGxpdC5zcGFjZXx8Ilx0ICIsIHAuc3BsaXQub3BlcmF0b3J8fCJ7WyguLDo7IXw8PildfSIsIHtkZXRhaWw6IHRydWV9KSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7CgkJCWl0ZW0gPSBjYW4uYmFzZS5pc09iamVjdChpdGVtKT8gaXRlbToge3RleHQ6IGl0ZW19OyB2YXIgdGV4dCA9IGl0ZW0udGV4dCwgdHlwZSA9IGl0ZW0ua2V5d29yZHx8cC5rZXl3b3JkW3RleHRdCgoJCQlzd2l0Y2ggKGl0ZW0udHlwZSkgeyBjYXNlIGh0bWwuU1BBQ0U6IHJldHVybiB0ZXh0CgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXR1cm4gd3JhcChsYW5nLlNUUklORywgaXRlbS5sZWZ0K3RleHQraXRlbS5yaWdodCkKCQkJCWRlZmF1bHQ6IHJldHVybiB3cmFwKHR5cGUsIHRleHQpCgkJCX0KCQl9KS5qb2luKCIiKSkKCgkJcC5wcmVmaXggJiYgY2FuLmNvcmUuSXRlbShwLnByZWZpeCwgZnVuY3Rpb24ocHJlLCB0eXBlKSB7IGlmIChjYW4uYmFzZS5iZWdpbldpdGgobGluZSwgcHJlKSkgeyBsaW5lID0gd3JhcCh0eXBlLCBsaW5lKSB9IH0pCgkJcC5zdWZmaXggJiYgY2FuLmNvcmUuSXRlbShwLnN1ZmZpeCwgZnVuY3Rpb24oZW5kLCB0eXBlKSB7IGlmIChjYW4uYmFzZS5lbmRXaXRoKGxpbmUsIGVuZCkpIHsgbGluZSA9IHdyYXAodHlwZSwgbGluZSkgfSB9KQoJCXJldHVybiBsaW5lCgl9LAoJZ286IHsKCQlrZXl3b3JkOiB7CgkJCSJwYWNrYWdlIjogImtleXdvcmQiLAoJCQkiaW1wb3J0IjogImtleXdvcmQiLAoJCQkidHlwZSI6ICJrZXl3b3JkIiwKCQkJInN0cnVjdCI6ICJrZXl3b3JkIiwKCQkJImludGVyZmFjZSI6ICJrZXl3b3JkIiwKCQkJImNvbnN0IjogImtleXdvcmQiLAoJCQkidmFyIjogImtleXdvcmQiLAoJCQkiZnVuYyI6ICJrZXl3b3JkIiwKCgkJCSJpZiI6ICJrZXl3b3JkIiwKCQkJImVsc2UiOiAia2V5d29yZCIsCgkJCSJmb3IiOiAia2V5d29yZCIsCgkJCSJyYW5nZSI6ICJrZXl3b3JkIiwKCQkJImJyZWFrIjogImtleXdvcmQiLAoJCQkiY29udGludWUiOiAia2V5d29yZCIsCgkJCSJzd2l0Y2giOiAia2V5d29yZCIsCgkJCSJjYXNlIjogImtleXdvcmQiLAoJCQkiZGVmYXVsdCI6ICJrZXl3b3JkIiwKCQkJImZhbGx0aHJvdWdoIjogImtleXdvcmQiLAoJCQkiZ28iOiAia2V5d29yZCIsCgkJCSJzZWxlY3QiOiAia2V5d29yZCIsCgkJCSJkZWZlciI6ICJrZXl3b3JkIiwKCQkJInJldHVybiI6ICJrZXl3b3JkIiwKCgkJCSJmYWxzZSI6ICJjb25zdGFudCIsCgkJCSJ0cnVlIjogImNvbnN0YW50IiwKCQkJIm5pbCI6ICJjb25zdGFudCIsCgkJCSJpb3RhIjogImNvbnN0YW50IiwKCQkJIi0xIjogImNvbnN0YW50IiwKCQkJIjAiOiAiY29uc3RhbnQiLAoJCQkiMSI6ICJjb25zdGFudCIsCgkJCSIyIjogImNvbnN0YW50IiwKCQkJIjMiOiAiY29uc3RhbnQiLAoKCQkJImludCI6ICJkYXRhdHlwZSIsICJpbnQ4IjogImRhdGF0eXBlIiwgImludDE2IjogImRhdGF0eXBlIiwgImludDMyIjogImRhdGF0eXBlIiwgImludDY0IjogImRhdGF0eXBlIiwKCQkJInVpbnQiOiAiZGF0YXR5cGUiLCAidWludDgiOiAiZGF0YXR5cGUiLCAidWludDE2IjogImRhdGF0eXBlIiwgInVpbnQzMiI6ICJkYXRhdHlwZSIsICJ1aW50NjQiOiAiZGF0YXR5cGUiLAoJCQkiZmxvYXQzMiI6ICJkYXRhdHlwZSIsICJmbG9hdDY0IjogImRhdGF0eXBlIiwgImNvbXBsZXg2NCI6ICJkYXRhdHlwZSIsICJjb21wbGV4MTI4IjogImRhdGF0eXBlIiwKCQkJInJ1bmUiOiAiZGF0YXR5cGUiLCAic3RyaW5nIjogImRhdGF0eXBlIiwgImJ5dGUiOiAiZGF0YXR5cGUiLCAidWludHB0ciI6ICJkYXRhdHlwZSIsCgkJCSJib29sIjogImRhdGF0eXBlIiwgImVycm9yIjogImRhdGF0eXBlIiwgImNoYW4iOiAiZGF0YXR5cGUiLCAibWFwIjogImRhdGF0eXBlIiwKCgkJCSJtc2ciOiAiZnVuY3Rpb24iLCAibSI6ICJmdW5jdGlvbiIsCgkJCSJpbml0IjogImZ1bmN0aW9uIiwgIm1haW4iOiAiZnVuY3Rpb24iLCAicHJpbnQiOiAiZnVuY3Rpb24iLCAicHJpbnRsbiI6ICJmdW5jdGlvbiIsICJwYW5pYyI6ICJmdW5jdGlvbiIsICJyZWNvdmVyIjogImZ1bmN0aW9uIiwKCQkJIm5ldyI6ICJmdW5jdGlvbiIsICJtYWtlIjogImZ1bmN0aW9uIiwgImxlbiI6ICJmdW5jdGlvbiIsICJjYXAiOiAiZnVuY3Rpb24iLCAiY29weSI6ICJmdW5jdGlvbiIsICJhcHBlbmQiOiAiZnVuY3Rpb24iLCAiZGVsZXRlIjogImZ1bmN0aW9uIiwgImNsb3NlIjogImZ1bmN0aW9uIiwKCQkJImNvbXBsZXgiOiAiZnVuY3Rpb24iLCAicmVhbCI6ICJmdW5jdGlvbiIsICJpbWFnIjogImZ1bmN0aW9uIiwKCQl9LAoJfSwKCXptbDogewoJCXByZWZpeDogewoJCQkiIyAiOiAiY29tbWVudCIsCgkJfSwKCQlrZXl3b3JkOiB7CgkJCSJyZXR1cm4iOiAia2V5d29yZCIsCgoJCQkiaGVhZCI6ICJrZXl3b3JkIiwKCQkJImxlZnQiOiAia2V5d29yZCIsCgkJCSJtYWluIjogImtleXdvcmQiLAoJCQkiZm9vdCI6ICJrZXl3b3JkIiwKCQkJInRhYnMiOiAia2V5d29yZCIsCgoJCQkiaW5kZXgiOiAiZnVuY3Rpb24iLAoJCQkiYWN0aW9uIjogImZ1bmN0aW9uIiwKCQkJImFyZ3MiOiAiZnVuY3Rpb24iLAoJCQkidHlwZSI6ICJmdW5jdGlvbiIsCgkJCSJzdHlsZSI6ICJmdW5jdGlvbiIsCgkJCSJ3aWR0aCI6ICJmdW5jdGlvbiIsCgoJCQkiYXV0byI6ICJjb25zdGFudCIsCgkJCSJ1c2VybmFtZSI6ICJjb25zdGFudCIsCgkJfSwKCX0sCgljc3M6IHsKCQlrZXl3b3JkOiB7CgkJCSJib2R5IjogImtleXdvcmQiLAoJCQkiZGl2IjogImtleXdvcmQiLAoJCQkic3BhbiI6ICJrZXl3b3JkIiwKCQkJImZvcm0iOiAia2V5d29yZCIsCgkJCSJmaWVsZHNldCI6ICJrZXl3b3JkIiwKCQkJImxlZ2VuZCI6ICJrZXl3b3JkIiwKCQkJInNlbGVjdCI6ICJrZXl3b3JkIiwKCQkJInRleHRhcmVhIjogImtleXdvcmQiLAoJCQkiaW5wdXQiOiAia2V5d29yZCIsCgkJCSJ0YWJsZSI6ICJrZXl3b3JkIiwKCQkJInRyIjogImtleXdvcmQiLAoJCQkidGgiOiAia2V5d29yZCIsCgkJCSJ0ZCI6ICJrZXl3b3JkIiwKCgkJCSJiYWNrZ3JvdW5kLWNvbG9yIjogImZ1bmN0aW9uIiwKCQkJImZvbnQtZmFtaWx5IjogImZ1bmN0aW9uIiwKCQkJImZvbnQtd2VpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImZvbnQtc2l6ZSI6ICJmdW5jdGlvbiIsCgkJCSJjb2xvciI6ICJmdW5jdGlvbiIsCgkJCSJ3aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJoZWlnaHQiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZyI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXIiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luIjogImZ1bmN0aW9uIiwKCQkJInBvc2l0aW9uIjogImZ1bmN0aW9uIiwKCQkJImxlZnQiOiAiZnVuY3Rpb24iLAoJCQkidG9wIjogImZ1bmN0aW9uIiwKCQkJInJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJkaXNwbGF5IjogImZ1bmN0aW9uIiwKCQkJIm92ZXJmbG93IjogImZ1bmN0aW9uIiwKCQkJImZsb2F0IjogImZ1bmN0aW9uIiwKCQkJImNsZWFyIjogImZ1bmN0aW9uIiwKCQkJImN1cnNvciI6ICJmdW5jdGlvbiIsCgoJCQkiei1pbmRleCI6ICJmdW5jdGlvbiIsCgkJCSJ0YWItc2l6ZSI6ICJmdW5jdGlvbiIsCgkJCSJ3b3JkLWJyZWFrIjogImZ1bmN0aW9uIiwKCQkJIndoaXRlLXNwYWNlIjogImZ1bmN0aW9uIiwKCQkJInRleHQtYWxpZ24iOiAiZnVuY3Rpb24iLAoJCQkidmVydGljYWwtYWxpZ24iOiAiZnVuY3Rpb24iLAoJCQkibWluLXdpZHRoIjogImZ1bmN0aW9uIiwKCQkJIm1heC13aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJwYWRkaW5nLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZy10b3AiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXRvcCI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItcmlnaHQiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLWJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItcmFkaXVzIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1zcGFjaW5nIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi10b3AiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luLXJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1ib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiYm94LXNoYWRvdyI6ICJmdW5jdGlvbiIsCgoJCQkiMCI6ICJjb25zdGFudCIsCgkJCSIxMHB4IjogImNvbnN0YW50IiwKCQkJIjIwcHgiOiAiY29uc3RhbnQiLAoJCQkiY3lhbiI6ICJjb25zdGFudCIsCgkJCSJncmF5IjogImNvbnN0YW50IiwKCQkJInllbGxvdyI6ICJjb25zdGFudCIsCgkJCSJibGFjayI6ICJjb25zdGFudCIsCgkJCSJ3aGl0ZSI6ICJjb25zdGFudCIsCgkJCSJibHVlIjogImNvbnN0YW50IiwKCQkJInJlZCI6ICJjb25zdGFudCIsCgkJCSJncmVlbiI6ICJjb25zdGFudCIsCgkJCSJtYWdlbnRhIjogImNvbnN0YW50IiwKCgkJCSJtb25vc3BhY2UiOiAiY29uc3RhbnQiLAoJCQkiYm9sZCI6ICJjb25zdGFudCIsCgkJCSJzb2xpZCI6ICJjb25zdGFudCIsCgkJCSJub25lIjogImNvbnN0YW50IiwKCQkJImJsb2NrIjogImNvbnN0YW50IiwKCQkJImNvbnRleHRzIjogImNvbnN0YW50IiwKCQkJImJvdGgiOiAiY29uc3RhbnQiLAoJCQkiYXV0byI6ICJjb25zdGFudCIsCgoJCQkiY2VudGVyIjogImNvbnN0YW50IiwKCQkJInJlbGF0aXZlIjogImNvbnN0YW50IiwKCQkJImFic29sdXRlIjogImNvbnN0YW50IiwKCQkJInN0aWNreSI6ICJjb25zdGFudCIsCgkJCSJmaXhlZCI6ICJjb25zdGFudCIsCgkJfSwKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwKCV9tb2RlOiB7CgkJcGx1Z2luOiB7CgkJCUVzY2FwZTogc2h5KCLliIfmjaLmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jbGVhcihldmVudCwgY2FuKSB9KSwKCQkJZzogc2h5KCLmkJzntKIiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5pCc57SiIl0oZXZlbnQsIGNhbikgfSksCgkJCWY6IHNoeSgi5omT5byA5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaJk+W8gCJdKGV2ZW50LCBjYW4pIH0pLAoJCQlyOiBzaHkoIuaJp+ihjOWRveS7pCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKSB9KSwKCQkJdjogc2h5KCLmuLLmn5PnlYzpnaIiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikgfSksCgkJCXg6IHNoeSgi5YWz6Zet5qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uX3RhYi5fY2xvc2UoKSB9KSwKCgkJCWg6IHNoeSgi5omT5byA5bem6L655qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbmV4dCA9IGNhbi5fdGFiLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkgfSksCgkJCWw6IHNoeSgi5omT5byA5Y+z6L655qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbmV4dCA9IGNhbi5fdGFiLm5leHRTaWJsaW5nOyBuZXh0ICYmIG5leHQuY2xpY2soKSB9KSwKCQkJajogc2h5KCLlkJHkuIvmu5rliqgiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQlpZiAoY2FuLnVpLmNvbnRlbnQgIT0gY2FuLnVpLl9jb250ZW50KSB7CgkJCQkJY2FuLnVpLmNvbnRlbnQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArPSAxNgoJCQkJfSBlbHNlIHsKCQkJCQljYW4uY3VycmVudC5zY3JvbGwoMSkKCQkJCX0KCQkJfSksCgkJCWs6IHNoeSgi5ZCR5LiK5rua5YqoIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJaWYgKGNhbi51aS5jb250ZW50ICE9IGNhbi51aS5fY29udGVudCkgewoJCQkJCWNhbi51aS5jb250ZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgLT0gMTYKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLmN1cnJlbnQuc2Nyb2xsKC0xKQoJCQkJfQoJCQl9KSwKCQkJSjogc2h5KCLlkJHkuIvmu5rlsY8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC53aW5kb3coKS0zKSB9KSwKCQkJSzogc2h5KCLlkJHkuIrmu5rlsY8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5jdXJyZW50LnNjcm9sbCgtY2FuLmN1cnJlbnQud2luZG93KCkrMykgfSksCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFsi5pCc57SiIiwgIuaJk+W8gCJdLAoJX3RyYW5zOiB7c291cmNlOiAi5rqQ56CBIiwgbW9kdWxlOiAi5qih5Z2XIiwgZHJlYW1zOiAi56m66Ze0IiwgbG9hZDogIuWKoOi9vSIsIGxpbms6ICLpk77mjqUiLCB3aWR0aDogIuWuveW6piIsIGhlaWdodDogIumrmOW6piIsIHdlYnNpdGU6ICLnvZHpobUifSwKCSLmkJzntKIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FLCBbY3R4LkFDVElPTiwgbmZzLlRBR1MsIG5mcy5HUkVQLCBjbGkuTUFLRV1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi51aS5zZWFyY2guVXBkYXRlKHt9LCBbY3R4LkFDVElPTiwgZGF0YS5hY3Rpb24sIGRhdGEubmFtZV0pCgkJfSkKCX0sCgki5omT5byAIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtuZnMuRklMRV0sIGZ1bmN0aW9uKGxpc3QpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGlzdFswXSkgfSkKCX0sCglzZXNzOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmV4cG9ydC5zZXNzKGNhbiksIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pIH0sCglsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIGZpbGUgPSBjYW4uYmFzZS5QYXRoKCIvcmVxdWlyZS8iLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJZGVsZXRlKFZvbGNhbm9zLm1ldGEuY2FjaGVbZmlsZV0pLCBldmFsKCJcbl9jYW5fbmFtZSA9IFwiIitmaWxlKyJcIlxuIitjYW4ub25leHBvcnQuY29udGVudChjYW4pKyJcbl9jYW5fbmFtZSA9IFwiXCJcbmNvbnNvbGUubG9nKFwib25jZVwiKSIpCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLlJFTkRFUiwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9maWxlKGNhbiwgbXNnKQoJCX0pCgl9LAoJc2hvdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwge190b2FzdDogIua4suafk+S4rS4uLiJ9KQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKGNhbi5PcHRpb24obmZzLkZJTEUpLCAiLmpzIikpIHsKCQkJdmFyIGZpbGUgPSBjYW4uYmFzZS5QYXRoKCIvcmVxdWlyZS8iLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJCWRlbGV0ZShWb2xjYW5vcy5tZXRhLmNhY2hlW2ZpbGVdKSwgZXZhbCgiXG5fY2FuX25hbWUgPSBcIiIrZmlsZSsiXCJcbiIrY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSsiXG5fY2FuX25hbWUgPSBcIlwiXG5jb25zb2xlLmxvZyhcIm9uY2VcIikiKQoJCX0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuUkVOREVSLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnByb2ZpbGUoY2FuLCBtc2cpCgkJfSkKCX0sCglleGVjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIiwgInNvbWUiOiAicnVuIn0pCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkVOR0lORSwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5kaXNwbGF5KGNhbiwgbXNnKQoJCX0pCgl9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsICIuaW5wdXQuZmxvYXQiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fc3RhdHVzLCAibGVnZW5kLnNlbGVjdCIsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uY2xpY2soKSwgaXRlbSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgoJCWlmIChjYW4udWkuZGlzcGxheS5zdHlsZS5kaXNwbGF5ID09ICIiKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLmRpc3BsYXkpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJCWlmIChjYW4udWkucHJvZmlsZS5zdHlsZS5kaXNwbGF5ID09ICIiKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2ZpbGUpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCWJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmhpc3RvcnkucG9wKCk7IHZhciBsYXN0ID0gY2FuLmhpc3RvcnkucG9wKCkKCQlsYXN0ICYmIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbGFzdC5wYXRoLCBsYXN0LmZpbGUsIGxhc3QubGluZSkKCQljYW4uU3RhdHVzKCLot7PovazmlbAiLCBjYW4uaGlzdG9yeS5sZW5ndGgpCgl9LAoKCXNjcm9sbExpbmU6IGZ1bmN0aW9uKGNhbiwgY291bnQpIHsgdmFyIHNpemUgPSAyMDsgY2FuLmN1cnJlbnQuc2Nyb2xsKGNvdW50KnNpemUpIH0sCglhcHBlbmRMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dHlwZTogaHRtbC5UUiwgbGlzdDogWwoJCQl7dmlldzogWyJsaW5lIHVuc2VsZWN0YWJsZSIsIGh0bWwuVEQsICsrY2FuLm1heF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCB1aS50cikKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi5mYXZvckxpbmUoY2FuLCB1aS50ZXh0LmlubmVyVGV4dCkKCQkJfX0sCgoJCQl7dmlldzogW2h0bWwuVEVYVCwgaHRtbC5URF0sIGlubmVyOiBjYW4ub25zeW50YXguX3BhcnNlKGNhbiwgdmFsdWUpLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgdWkudHIpCgoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIHMgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpLCBzdHIgPSB1aS50ZXh0LmlubmVyVGV4dAoJCQkJdmFyIGJlZ2luID0gc3RyLmluZGV4T2YocyksIGVuZCA9IGJlZ2luK3MubGVuZ3RoCgoJCQkJZm9yICh2YXIgaSA9IGJlZ2luOyBpID49IDA7IGktLSkgewoJCQkJCWlmIChzdHJbaV0ubWF0Y2goL1thLXpBLVowLTlfLl0vKSkgeyBzID0gc3RyLnNsaWNlKGksIGVuZCkgfSBlbHNlIHsgYnJlYWsgfQoJCQkJfQoKCQkJCWlmIChzLmluZGV4T2YoImtpdC4iKSA9PSAwKSB7IHMgPSBzLnJlcGxhY2UoImtpdC4iLCAidG9vbGtpdHMuIikgfQoJCQkJaWYgKHMuaW5kZXhPZihpY2UuUFQpID09IDApIHsgcyA9IHMuc2xpY2UoMSkgfQoJCQkJY2FuLm9uYWN0aW9uLnNlYXJjaExpbmUoZXZlbnQsIGNhbiwgcykKCQkJfX0KCQldfV0pOyByZXR1cm4gdWkudHIKCX0sCglfZ2V0TGluZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpIHsgcmV0dXJuIGl0ZW0gfSB9KVswXQoJfSwKCV9nZXRMaW5lbm86IGZ1bmN0aW9uKGNhbiwgbGluZSkgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSB7IHJldHVybiBpbmRleCsxIH0gfSlbMF0KCX0sCglzZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGlmICghbGluZSkgeyByZXR1cm4gcGFyc2VJbnQoY2FuLmNvcmUuVmFsdWUoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtbW2h0bWwuVFIsIGh0bWwuU0VMRUNUXSwgW2h0bWwuVEQsICJsaW5lIl1dXSlbMF0sICJpbm5lclRleHQiKSkgfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGxpbmUgPCAwIHx8IGxpbmUgPiBhcnJheS5sZW5ndGgpIHsgcmV0dXJuIH0KCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QsIGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpKSB7IHJldHVybiB9CgkJCXZhciBscyA9IGNhbi5maWxlLnNwbGl0KGljZS5QUykKCQkJaWYgKGxzLmxlbmd0aCA+IDQpIHsgbHMgPSBbbHMuc2xpY2UoMCwgMikuam9pbihpY2UuUFMpKyIvLi4uLyIrbHMuc2xpY2UoLTIpLmpvaW4oaWNlLlBTKV0gfQoJCQlsaW5lID0gaXRlbSwgY2FuLlN0YXR1cyhraXQuRGljdCgi5paH5Lu25ZCNIiwgbHMuam9pbihpY2UuUFMpLCAi6Kej5p6Q5ZmoIiwgY2FuLnBhcnNlLCAi5b2T5YmN6KGMIiwgY2FuLm9uZXhwb3J0LnBvc2l0aW9uKGNhbiwgY2FuLk9wdGlvbihuZnMuTElORSwgaW5kZXgrMSkpKSkKCQl9KQoKCQljYW4uYmFzZS5pc09iamVjdChsaW5lKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBsaW5lLCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLmN1cnJlbnQgPSB7CgkJCQl3aW5kb3c6IGZ1bmN0aW9uKCkgeyByZXR1cm4gcGFyc2VJbnQoY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0L2Nhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0KSB9LAoJCQkJc2Nyb2xsOiBmdW5jdGlvbihjb3VudCkgeyBpZiAoY291bnQpIHsgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsVG9wICs9IGNvdW50KmNhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0IH0KCQkJCQlyZXR1cm4gcGFyc2VJbnQoKGNhbi5jdXJyZW50LmxpbmUub2Zmc2V0VG9wLWNhbi51aS5jb250ZW50LnNjcm9sbFRvcCkvY2FuLmN1cnJlbnQubGluZS5vZmZzZXRIZWlnaHQpCgkJCQl9LAoKCQkJCXByZXY6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZS5wcmV2aW91c1NpYmxpbmcgfSwKCQkJCW5leHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZS5uZXh0U2libGluZyB9LAoJCQkJbGluZTogbGluZSwgdGV4dDogZnVuY3Rpb24odGV4dCkgewoJCQkJCXJldHVybiB0ZXh0ICE9IHVuZGVmaW5lZCAmJiBjYW4ub25hY3Rpb24ubW9kaWZ5TGluZShjYW4sIGxpbmUsIHRleHQpLCBpdGVtLmlubmVyVGV4dAoJCQkJfSwKCQkJfQoKCQkJaWYgKCFldmVudCkgewoJCQkJdmFyIHNjcm9sbCA9IGNhbi5jdXJyZW50LnNjcm9sbCgpOyBpZiAoc2Nyb2xsIDwgNSkgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLTUpIH0gZWxzZSB7CgkJCQkJdmFyIHdpbmRvdyA9IGNhbi5jdXJyZW50LndpbmRvdygpOyBpZiAoc2Nyb2xsID4gd2luZG93LzIpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC13aW5kb3cvMikgfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJdmFyIHNjcm9sbCA9IGNhbi5jdXJyZW50LnNjcm9sbCgpOyBpZiAoc2Nyb2xsIDwgMykgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLTMpIH0gZWxzZSB7CgkJCQkJdmFyIHdpbmRvdyA9IGNhbi5jdXJyZW50LndpbmRvdygpOyBpZiAoc2Nyb2xsID4gd2luZG93LTQpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC13aW5kb3crNCkgfQoJCQkJfQoJCQl9CgoJCQl2YXIgcHVzaCA9IGNhbi5vbmltcG9ydC5oaXN0b3J5KGNhbiwge3BhdGg6IGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgbGluZTogY2FuLk9wdGlvbihuZnMuTElORSksIHRleHQ6IGNhbi5jdXJyZW50LnRleHQoKX0pCgkJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsgbG9jYXRpb24uaGFzaCA9IHB1c2guZmlsZStpY2UuRlMrKHB1c2gubGluZXx8MSkgfQoJCQljYW4ub25hY3Rpb24uX3NlbGVjdExpbmUoZXZlbnQsIGNhbikKCQl9KQoJfSwKCV9zZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IH0sCglzZWFyY2hMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSkgeyBpZiAoIWNhbi51aS5zZWFyY2gpIHsgcmV0dXJuIH0KCQljYW4udWkuc2VhcmNoLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIG5mcy5UQUdTLCB2YWx1ZS50cmltKCldKQoJfSwKCWZhdm9yTGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsi5paH5Lu25pWwIiwgIuino+aekOWZqCIsICLmlofku7blkI0iLCAi5b2T5YmN6KGMIiwgIui3s+i9rOaVsCIsICLmoIfnrb7mlbAiXSwKCXNlc3M6IGZ1bmN0aW9uKGNhbikgeyBjYW4udXNlci5sb2NhbFN0b3JhZ2UoY2FuLCAid2ViLmNvZGUuaW5uZXIuc2VzcyIsIHsicGx1ZyI6IGNhbi5vbmV4cG9ydC5wbHVnKGNhbiksICJleHRzIjogY2FuLm9uZXhwb3J0LmV4dHMoY2FuKSwgInRhYnMiOiBjYW4ub25leHBvcnQudGFicyhjYW4pfSkgfSwKCWtleXM6IGZ1bmN0aW9uKGNhbiwgZmlsZSwgcGF0aCkgeyByZXR1cm4gKHBhdGh8fGNhbi5PcHRpb24obmZzLlBBVEgpKStpY2UuREYrKGZpbGV8fGNhbi5PcHRpb24obmZzLkZJTEUpKSB9LAoJdGFiczogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi50YWJ2aWV3LCBmdW5jdGlvbihrZXksIG1zZykgeyByZXR1cm4ga2V5K2ljZS5ERittc2cuT3B0aW9uKG5mcy5MSU5FKSB9KSB9LAoJcGx1ZzogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi50b29sa2l0KSB9LAoJZXh0czogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi5wbHVnaW5zKSB9LAoJcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHRvdGFsKSB7IHRvdGFsID0gdG90YWx8fGNhbi5tYXg7IHJldHVybiAocGFyc2VJbnQoaW5kZXgpKStpY2UuUFMrcGFyc2VJbnQodG90YWwpKyIgPSAiK3BhcnNlSW50KChpbmRleCkqMTAwL3RvdGFsKSsiJSIgfSwKCWNvbnRlbnQ6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsICJ0ZC50ZXh0IiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5pbm5lclRleHQgfSkuam9pbihpY2UuTkwpIH0sCn0pCg==",
        "usr/volcanos/plugin/local/code/inner/favor.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgewoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS5mYXZvciJ9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJY29kZS5JTk5FUiwgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSkKCQkJCX0sCgkJCSkpKSB7IHJldHVybiB9CgoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCXN1Yi5vbm1vdGlvbi5jbGVhcihzdWIpLCBzdWIub25hcHBlbmQudGFibGUoc3ViLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCQl9CgkJCQkJaWYgKGtleSAhPSBjdHguQUNUSU9OKSB7IHZhbHVlID0gc3ViLnBhZ2UucmVwbGFjZShzdWIsIHZhbHVlLCBpY2UuUFdELCAiIikgfQoKCQkJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW3ZhbHVlLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJCQlpZiAoW21kYi5aT05FLCBtZGIuSURdLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiBzdWIub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBzdWIsIGtleSwgdmFsdWUpIH0KCgkJCQkJCWlmICh0YXJnZXQudGFnTmFtZSA9PSAiSU5QVVQiICYmIHRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwgbGluZSwgc3ViLk9wdGlvbigpKQoJCQkJCQkJcmV0dXJuIHN1Yi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IHN1Yi5ydW4oKSB9KQoJCQkJCQl9CgoJCQkJCQlsaW5lLmxpbmUgJiYgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsaW5lLnBhdGgsIGxpbmUuZmlsZS5yZXBsYWNlKGljZS5QV0QsICIiKSwgcGFyc2VJbnQobGluZS5saW5lKSkKCQkJCQl9fQoJCQkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJCQl9KQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCg==",
        // "usr/volcanos/plugin/local/code/inner/inner.css": "",
        // "usr/volcanos/plugin/local/code/inner/inner.js": "",
        "usr/volcanos/plugin/local/code/inner/search.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgeyB2YXIgaGlzdG9yeSA9IFtdOyBjb25zdCBTRUFSQ0ggPSAiY2FuLmNvZGUuaW5uZXIuc2VhcmNoIgoJZnVuY3Rpb24gc2hvdyhtc2csIHdvcmQpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0gaGlzdG9yeS5wdXNoKG1zZyk7IHZhciBzdWIgPSBtc2cuX2Nhbjsgc3ViLk9wdGlvbigid29yZCIsIHdvcmR8fG1zZy5fd29yZCkKCQkhc3ViLnBhZ2UuQ2xhc3NMaXN0LmhhcyhzdWIsIHN1Yi5fbGVnZW5kLCAic2VsZWN0IikgJiYgY2FuLnVpLnNlYXJjaC5zZWxlY3QoKQoJCXN1Yi5vbm1vdGlvbi5jbGVhcihzdWIpLCBzdWIub25hcHBlbmQudGFibGUoc3ViLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCXJldHVybiB7dGV4dDogWyIiLCBodG1sLlREXSwgbGlzdDogW3t0ZXh0OiBbY2FuLnBhZ2UucmVwbGFjZShjYW4sIHZhbHVlLCBpY2UuUFdELCAiIiksIGh0bWwuRElWXX1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJbGluZS5saW5lICYmIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGxpbmUuZmlsZS5yZXBsYWNlKGljZS5QV0QsICIiKSwgcGFyc2VJbnQobGluZS5saW5lKSkKCQkJfX0KCQl9LCBzdWIuX291dHB1dCksIHN1Yi5vbmFwcGVuZC5ib2FyZChzdWIsIG1zZy5SZXN1bHQoKSksIHN1Yi5vbmFwcGVuZC5fc3RhdHVzKHN1YiwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykpLCBjYW4uU3RhdHVzKCLmoIfnrb7mlbAiLCBtc2cuTGVuZ3RoKCkpCgl9CgljYW4ub25lbmdpbmUucGx1Z2luKGNhbiwgU0VBUkNILCBzaHkoIuaQnOe0oiIsIHt9LCBbCgkJe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogIndvcmQiLCB2YWx1ZTogY2xpLk1BSU4sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0VGFibGUoZXZlbnQsIGNhbi5zdXAsIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24odHIpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsgaW5kZXggPT0gMCAmJiB0ZC5jbGljaygpIH0pCgkJCQl0ci5zY3JvbGxJbnRvVmlldygpLCBjYW4uX291dHB1dC5zY3JvbGxUb3AgLT0gNjAKCQkJfSkKCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgZXZlbnQuY3RybEtleT8gbmZzLkdSRVA6IG5mcy5UQUdTLCBjYW4uc3VwLk9wdGlvbigid29yZCIpXSkgfQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IGV2ZW50LnRhcmdldC5ibHVyKCkgfQoJCX19LAoJCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJmaWx0ZXIiLCB2YWx1ZTogIiIsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0SW5wdXRUYWJsZShldmVudCwgY2FuLnN1cCwgbnVsbCwgZXZlbnQudGFyZ2V0KQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsgY2FuLnN1cC5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBldmVudC5jdHJsS2V5PyBuZnMuR1JFUDogbmZzLlRBR1MsIGNhbi5zdXAuT3B0aW9uKCJ3b3JkIildKSB9CgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgZXZlbnQudGFyZ2V0LmJsdXIoKSB9CgkJfX0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBuZnMuVEFHU30sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBuZnMuR1JFUH0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBjbGkuTUFLRX0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAiaGlzdG9yeSJ9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImxhc3QiLCBfdHJhbnM6ICLov5Tlm54ifSwKCV0sIGZ1bmN0aW9uKG1zZywgY21kcywgY2IpIHsgaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCSJoaXN0b3J5IiwgZnVuY3Rpb24oY21kcykgewoJCQljYW4uY29yZS5MaXN0KGNhbi5oaXN0b3J5LCBmdW5jdGlvbihpdGVtKSB7CgkJCQltc2cuUHVzaChuZnMuRklMRSwgaXRlbS5maWxlKQoJCQkJbXNnLlB1c2gobmZzLkxJTkUsIGl0ZW0ubGluZSkKCQkJCW1zZy5QdXNoKG1kYi5URVhULCBpdGVtLnRleHQpCgkJCX0pCgkJCXNob3cobXNnKQoJCX0sCgkJbmZzLlRBR1MsIGZ1bmN0aW9uKGNtZHMpIHsgbXNnLk9wdGlvbihraXQuRGljdChpY2UuTVNHX0hBTkRMRSwgaWNlLlRSVUUsIGljZS5NU0dfRklFTERTLCAiZmlsZSxsaW5lLHRleHQiKSkKCQkJY2FuLnJ1bkFjdGlvbihtc2csIG1kYi5TRUFSQ0gsIFtjYW4ucGFyc2UsIGNtZHNbMF0sIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBtc2cuX2NhbgoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLzQpLCBzaG93KG1zZywgbXNnLl93b3JkID0gY21kc1swXSkKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5TRUxFQ1QpIHx8IHN1Yi5fbGVnZW5kLmNsaWNrKCkKCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIG1zZy5fY2FuLl9pbnB1dHNbIndvcmQiXS5fdGFyZ2V0KQoJCQl9KQoJCX0sCgkJbmZzLkdSRVAsIGZ1bmN0aW9uKGNtZHMpIHsgbXNnLk9wdGlvbihraXQuRGljdChpY2UuTVNHX0hBTkRMRSwgaWNlLlRSVUUsIGljZS5NU0dfRklFTERTLCAiZmlsZSxsaW5lLHRleHQiLCBuZnMuUEFUSCwgY2FuLk9wdGlvbihuZnMuUEFUSCkpKQoJCQljYW4ucnVuQWN0aW9uKG1zZywgbmZzLkdSRVAsIFtjbWRzWzBdXSwgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBtc2cuX2NhbgoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLzQpLCBzaG93KG1zZywgbXNnLl93b3JkID0gY21kc1swXSkKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5TRUxFQ1QpIHx8IHN1Yi5fbGVnZW5kLmNsaWNrKCkKCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIG1zZy5fY2FuLl9pbnB1dHNbIndvcmQiXS5fdGFyZ2V0KQoJCQl9KQoJCX0sCgkJImxhc3QiLCBmdW5jdGlvbihjbWRzKSB7IGhpc3RvcnkucG9wKCksIHNob3coaGlzdG9yeS5wb3AoKSkgfSwKCSkpKSB7IHJldHVybiB9IGNhbi5ydW4obXNnLCBjbWRzLCBmdW5jdGlvbihtc2cpIHsgc2hvdyhtc2cpIH0sIHRydWUpIH0pKQoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6IFNFQVJDSH0sIGZ1bmN0aW9uKHN1YikgewoJCWNhbi51aS5zZWFyY2ggPSBzdWIsIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCWNhbi51aS5zZWFyY2guX3Nob3cgPSBzaG93Cgl9KQp9fSkK",
        "usr/volcanos/plugin/local/code/inner/sess.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgeyB2YXIgU0VTUyA9ICJ3ZWIuY29kZS5zZXNzIgoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6IFNFU1N9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJbmZzLlNBVkUsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgU0VTUywgW2N0eC5BQ1RJT04sIG1kYi5DUkVBVEUsCgkJCQkJCSJ0b29sIiwgSlNPTi5zdHJpbmdpZnkoY2FuLm9uZXhwb3J0LnRvb2woY2FuKSksCgkJCQkJCSJ0YWJzIiwgSlNPTi5zdHJpbmdpZnkoY2FuLm9uZXhwb3J0LnRhYnMoY2FuKSksCgkJCQkJXSwgY2IpCgkJCQl9LAoJCQkJbmZzLkxPQUQsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4ub25pbXBvcnQuc2VzcyhjYW4sIHsKCQkJCQkJdG9vbDogSlNPTi5wYXJzZShtc2cuT3B0aW9uKCJ0b29sIikpLAoJCQkJCQl0YWJzOiBKU09OLnBhcnNlKG1zZy5PcHRpb24oInRhYnMiKSksCgkJCQkJfSkKCQkJCX0sCgkJCSkpKSB7IHJldHVybiB9CgkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBTRVNTLCBjbWRzLCBjYikKCQl9LCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCX0pCn19KQo=",
        "usr/volcanos/plugin/local/code/inner/template.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgewoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS50ZW1wbGF0ZSJ9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQlpZiAoY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJCQluZnMuREVGUywgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKCJhcmdzIil8fCJbXSIpLCBmdW5jdGlvbihkYXRhKSB7CgkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGNhbi5jb3JlLkl0ZW0oZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBtc2cuT3B0aW9uKGtleSwgdmFsdWUpIH0pCgkJCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCAid2ViLmNvZGUudGVtcGxhdGUiLCBbbmZzLkRFRlNdLmNvbmNhdChjbWRzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQkJCQkJCWNhbi5vbmltcG9ydC5wcm9qZWN0KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCkpCgkJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKCJtYWluIiksICIiLCBmdW5jdGlvbigpIHsKCQkJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjbWRzWzFdLCAxLCBmdW5jdGlvbigpIHt9KQoJCQkJCQkJfSwgdHJ1ZSkKCQkJCQkJfSkKCQkJCQl9KQoJCQkJfQoJCQkpKSkgeyByZXR1cm4gfQoJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgIndlYi5jb2RlLnRlbXBsYXRlIiwgY21kcywgY2IpCgkJfSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgl9KQp9fSkK",
        "usr/volcanos/plugin/local/code/snippet.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWlmIChtc2cuT3B0aW9uKCJjb250ZW50IikpIHsKCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogIndlYi5jb2RlLnZpbWVyIiwgc3R5bGU6ICJmdWxsIn0sIGZ1bmN0aW9uKHN1YikgewoJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgcmVzID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJaWYgKGNtZHNbMV0gPT0gInBsdWdpbiIpIHsKCQkJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgInZpbWVyIiwgY21kcywgY2IpCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCQlpZiAoY21kc1sxXSA9PSAibWFpbi5nbyIpIHsgcmVzLkVjaG8obXNnLk9wdGlvbigiY29udGVudCIpKQoJCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLnN1YiAmJiBjYW4uc3ViLm9uYWN0aW9uWyLpobnnm64iXSh7fSwgY2FuLnN1YikgfSkKCQkJCQl9CgkJCQkJY2IocmVzKSwgY2FuLnN1YiA9IGNhbi5jb3JlLlZhbHVlKHN1YiwgIl9vdXRwdXRzLi0xIikKCQkJCX0KCQkJfSwgY2FuLl9vdXRwdXQpCgkJCXJldHVybgoJCX0KCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpCgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCglydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZykgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIFsiZ28iLCAiaGkuZ28iLCBjYW4uc3ViLm9uZXhwb3J0LmNvbnRlbnQoY2FuLnN1YildLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCX0pCgl9LAp9KQo=",
        "usr/volcanos/plugin/local/code/vimer.css": "ZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50IHsKCWJhY2tncm91bmQtY29sb3I6IzAwMDAwMDAwOyBjb2xvcjojMDAwMDAwMDA7IGZvbnQtc2l6ZToxZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsKCXBhZGRpbmc6MDsgcGFkZGluZy1sZWZ0OjEycHg7IGJvcmRlcjpub25lOyBvdXRsaW5lOm5vbmU7IG1hcmdpbjowOyBtYXJnaW4tdG9wOi0zcHg7CiAJaGVpZ2h0OjIycHg7IHBvc2l0aW9uOmFic29sdXRlOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5ub3JtYWwgeyBjYXJldC1jb2xvcjpncmF5OyB9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5pbnNlcnQgeyBjYXJldC1jb2xvcjp5ZWxsb3c7IH0KCmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHsKCWhlaWdodDoyMHB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDozMnB4OyBtYXJnaW4tdG9wOjIwcHg7CglkaXNwbGF5Om5vbmU7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUuaW5zZXJ0IHsKCWRpc3BsYXk6YmxvY2s7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MS4xcmVtOyBjb2xvcjojZjBmOGZmMDA7IG1hcmdpbi1sZWZ0OjVweDsgZmxvYXQ6bGVmdDsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZSB7CgliYWNrZ3JvdW5kOmxpZ2h0Ymx1ZTsgbWF4LWhlaWdodDo0MDBweDsgbWF4LXdpZHRoOjgwMHB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0Owp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGggewoJZGlzcGxheTpub25lOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGQgewoJZm9udC1zaXplOjEuMXJlbTsKfQoKYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MXJlbTsKfQpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRkIHsKCWZvbnQtc2l6ZToxcmVtOwp9Cgpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQgewogCW1hcmdpbi10b3A6MXB4Owp9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lmluc2VydCB7IGNhcmV0LWNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lm5vcm1hbCB7IGNhcmV0LWNvbG9yOmxpZ2h0Z3JheTsgfQoKZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5saXN0IGRpdi5pdGVtIHsgcGFkZGluZzo1cHg7IGZsb2F0OmxlZnQ7IGNsZWFyOm5vbmU7IH0KZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0K",
        "usr/volcanos/plugin/local/code/vimer.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucmVxdWlyZShbImlubmVyLmpzIl0sIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25pbXBvcnQuaW5uZXJfaW5pdChjYW4sIG1zZywgZnVuY3Rpb24oKSB7IGNhbi51bmRvID0gW10sIGNhbi5yZWRvID0gW10KCQkJY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pLCBjYW4ub25rZXltYXAuX3BsdWdpbih7fSwgY2FuKQoJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQl9LCB0YXJnZXQpIH0gLCBmdW5jdGlvbihjYW4sIG5hbWUsIHN1YikgeyBuYW1lID09IGNoYXQuT05JTVBPUlQgJiYgKGNhbi5vbmltcG9ydC5pbm5lcl9pbml0ID0gc3ViLl9pbml0KQoJCQlpZiAobmFtZSA9PSBjaGF0Lk9OQUNUSU9OKSB7IGNhbi5fdHJhbnMgPSBjYW4uYmFzZS5Db3B5KGNhbi5fdHJhbnN8fHt9LCBzdWIuX3RyYW5zKSB9CgkJCWlmIChuYW1lID09IGNoYXQuT05LRVlNQVApIHsgY2FuLmNvcmUuSXRlbShzdWIuX21vZGUsIGZ1bmN0aW9uKG1vZGUsIHZhbHVlKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXSA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXXx8e30KCQkJCWNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgbGlzdFtrZXldID0gbGlzdFtrZXldfHxjYiB9KQoJCQl9KSB9CgkJfSkKCX0sCglfaW5wdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LnBhcmVudE5vZGUsIFsKCQkJe3ZpZXc6IFsiY3VycmVudCIsIGh0bWwuSU5QVVRdLCBzcGVsbGNoZWNrOiBmYWxzZSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgeyBpZiAoZXZlbnQubWV0YUtleSkgeyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmN0cmxLZXkgJiYgY2FuLm9uYWN0aW9uLl9jb21wbGV0ZShldmVudCwgY2FuKSkgeyByZXR1cm4gfQoJCQkJY2FuLl9rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBjYW4ubW9kZSsoZXZlbnQuY3RybEtleT8gIl9jdHJsIjogIiIpLCBjYW4uX2tleWxpc3QsIGNhbi51aS5jdXJyZW50KQoJCQkJY2FuLm1vZGUgPT0gImluc2VydCIgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUpIH0sIDEwKQoJCQkJY2FuLm1vZGUgPT0gIm5vcm1hbCIgJiYgY2FuLlN0YXR1cygi5oyJ6ZSuIiwgY2FuLl9rZXlsaXN0LmpvaW4oIiIpKQoJCQkJY2FuLm1vZGUgPT0gIm5vcm1hbCIgJiYgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sIG9ua2V5dXA6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbi5fY29tcGxldGUoZXZlbnQsIGNhbikKCgkJCX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pCgoJCQl9fSwge3ZpZXc6IFsiY29tcGxldGUiXX0sCgkJXSk7IGNhbi51aS5jdXJyZW50ID0gdWkuY3VycmVudCwgY2FuLnVpLmNvbXBsZXRlID0gdWkuY29tcGxldGUKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsKCQljYW4ub25pbXBvcnQuem9uZShjYW4sIFsKCQkJY2FuLmlzQ21kTW9kZSgpICYmIHtuYW1lOiAiY3JlYXRlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmFjdGlvbi5saXN0LCB0YXJnZXQpIH19LAoJCQl7bmFtZTogInNvdXJjZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsgdmFyIHRvdGFsID0gMAoJCQkJZnVuY3Rpb24gc2hvdyhwYXRoLCB0YXJnZXQpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdCh7fSwge2Rpcl9yb290OiBwYXRoLCBkaXJfZGVlcDogdHJ1ZX0pLCBbaWNlLlBXRF0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4uT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKGl0ZW0ucGF0aCkgPT0gMCkgeyBpdGVtLmV4cGFuZCA9IHRydWUgfQoJCQkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IHRhcmdldC5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHsKCQkJCQkJCSJ0cmFzaCI6IGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uX3J1bihldmVudCwgY2FuLCBuZnMuVFJBU0gsIFtjYW4uYmFzZS5QYXRoKHBhdGgsIGl0ZW0ucGF0aCldKSB9LAoJCQkJCQkJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5vbmFjdGlvbltidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbikgfSwKCQkJCQkJfSwgWyJ0cmFzaCJdKSB9IH0KCQkJCQl9KQoJCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgbGlzdCwgbmZzLlBBVEgsIGljZS5QUywgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBpdGVtLnBhdGgpIC8vIOaYvuekuuaWh+S7tgoJCQkJCX0sIHRhcmdldCksIGNhbi5TdGF0dXMoIuaWh+S7tuaVsCIsIHRvdGFsICs9IG1zZy5MZW5ndGgoKSkKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK3RvdGFsKyIgaXRlbSJ9KQoJCQkJfSwgdHJ1ZSkgfSBpZiAocGF0aC5sZW5ndGggPT0gMSkgeyByZXR1cm4gc2hvdyhwYXRoWzBdLCB0YXJnZXQpIH0KCgkJCQljYW4ub25pbXBvcnQuem9uZShjYW4sIGNhbi5jb3JlLkxpc3QocGF0aCwgZnVuY3Rpb24ocGF0aCkgeyByZXR1cm4ge25hbWU6IHBhdGgsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgc2hvdyhwYXRoLCB0YXJnZXQpIH19IH0pLCB0YXJnZXQpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdGFyZ2V0LnByZXZpb3VzU2libGluZy5pbm5lckhUTUwgPSAiIiB9KQoJCQl9fSwKCQkJe25hbWU6ICJwbHVnaW4iLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciB0b3RhbCA9IDAKCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgY2FuLmNvcmUuSXRlbShjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdG90YWwrKywge2luZGV4OiBjYW4uYmFzZS50cmltUHJlZml4KGtleSwgImNhbi4iKX0gfSksIGN0eC5JTkRFWCwgaWNlLlBULCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5jb3JlLktleXMoImNhbiIsIGl0ZW0uaW5kZXgpLCBjdHguSU5ERVgpIC8vIOaYvuekuuaPkuS7tgoJCQkJfSwgdGFyZ2V0KQoJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIit0b3RhbCsiIGl0ZW0ifSkKCQkJfX0sCgkJCXtuYW1lOiAibW9kdWxlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwge2ZpZWxkczogY3R4LklOREVYfSksIGN0eC5DT01NQU5ELCBbbWRiLlNFQVJDSCwgY3R4LkNPTU1BTkRdLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK21zZy5MZW5ndGgoKSsiIGl0ZW0ifSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIG1zZy5UYWJsZSgpLCBjdHguSU5ERVgsIGljZS5QVCwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaXRlbS5pbmRleCwgY3R4LklOREVYKSAvLyDmmL7npLrmqKHlnZcKCQkJCQl9LCB0YXJnZXQpCgkJCQl9KQoJCQl9fSwKCQkJe25hbWU6ICJkcmVhbXMiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciBjYWxsID0gYXJndW1lbnRzLmNhbGxlZQoJCQkJY2FuLnJ1bkFjdGlvbih7fSwgaWNlLlJVTiwgW3dlYi5EUkVBTV0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrbXNnLkxlbmd0aCgpKyIgaXRlbSJ9KQoJCQkJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWZ1bmN0aW9uIGNhcnRlKGV2ZW50KSB7CgkJCQkJCQl2YXIgbGlzdCA9IFtdOyBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7CgkJCQkJCQkJY2FzZSAic3RhcnQiOiBsaXN0ID0gWyJvcGVuIiwgInN0b3AiXTsgYnJlYWsKCQkJCQkJCQljYXNlICJzdG9wIjogbGlzdCA9IFsic3RhcnQiLCAidHJhc2giXTsgYnJlYWsKCQkJCQkJCX0KCQkJCQkJCWNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwge30sIGxpc3QsIGZ1bmN0aW9uKGV2ZW50LCBhY3Rpb24pIHsKCQkJCQkJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBpdGVtKSwgaWNlLlJVTiwgW3dlYi5EUkVBTSwgY3R4LkFDVElPTiwgYWN0aW9uXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJCQkJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbGwodGFyZ2V0KQoJCQkJCQkJCX0pCgkJCQkJCQl9KQoJCQkJCQl9CgoJCQkJCQl2YXIgY29sb3IgPSBpdGVtLnN0YXR1cyA9PSAic3RhcnQiPyAiIjogImdyYXkiCgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogW2l0ZW0ubmFtZSwgaHRtbC5ESVZdLCBzdHlsZToge2NvbG9yOiBjb2xvcn0sIG9ubW91c2VlbnRlcjogY2FydGV9XSwgb25jbGljazogZnVuY3Rpb24oKSB7CgkJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBpdGVtLm5hbWUsIHdlYi5EUkVBTSkgLy8g5pi+56S656m66Ze0CgkJCQkJCX19XSkKCQkJCQl9KQoJCQkJfSkKCQkJfSwgX21lbnU6IHNoeSgiIiwgewoJCQkJImNyZWF0ZSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uZHJlYW0oZXZlbnQsIGNhbiwgImRyZWFtIikgfSwKCQkJCSJyZWZyZXNoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi51aS5kcmVhbXMucmVmcmVzaCgpIH0sCgkJCQkicHVibGlzaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVzZXIudG9hc3RDb25maXJtKGNhbiwgbXNnLlJlc3VsdCgpLCBidXR0b24pIH0pIH0sCgkJCX0sIFsiY3JlYXRlIiwgInJlZnJlc2giLCAicHVibGlzaCJdLCBmdW5jdGlvbigpIHt9KX0sCgkJXSwgY2FuLnVpLnByb2plY3QpCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZWw6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsgY2FuLlN0YXR1cygi5qih5byPIiwgY2FuLm1vZGUgPSB2YWx1ZSkKCQljYW4ucGFnZS5zdHlsZUNsYXNzKGNhbiwgY2FuLnVpLmN1cnJlbnQsIFsiY3VycmVudCIsIGNhbi5tb2RlXSksIHZhbHVlCgkJY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIGNhbi51aS5jb21wbGV0ZSwgWyJjb21wbGV0ZSIsIGNhbi5tb2RlXSksIHZhbHVlCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX21vZGVsKGNhbiwgInBsdWdpbiIpCgkJY2FuLnVpLmN1cnJlbnQuYmx1cigpCgl9LAoJX25vcm1hbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX21vZGVsKGNhbiwgIm5vcm1hbCIpCgkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKQoJfSwKCV9pbnNlcnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJpbnNlcnQiKQoJCWNhbi51aS5jdXJyZW50LmZvY3VzKCksIGNhbi51aS5jb250ZW50LnNjcm9sbExlZnQgLT0gMTAwMDAKCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCgoJX21vZGU6IHsKCQlwbHVnaW46IHsKCQkJdDogc2h5KCLmt7vliqDlkb3ku6QiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5re75YqgIl0oZXZlbnQsIGNhbikgfSksCgkJCXA6IHNoeSgi5re75Yqg5o+S5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaPkuS7tiJdKGV2ZW50LCBjYW4pIH0pLAoJCQllOiBzaHkoIua3u+WKoOaJqeWxlSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmianlsZUiXShldmVudCwgY2FuKSB9KSwKCgkJCWk6IHNoeSgi5o+S5YWl5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSB9KSwKCQkJbjogc2h5KCLlkb3ku6TmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbm9ybWFsKGV2ZW50LCBjYW4pIH0pLAoJCQkiOiI6IHNoeSgi5bqV6KGM5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogImNsaS5zeXN0ZW0ifSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0WyJjbGkuc3lzdGVtIl0gPSBzdWIuc2VsZWN0KCkgfSkgfSksCgoJCQlzOiBzaHkoIuS/neWtmOaWh+S7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNhdmUoZXZlbnQsIGNhbiwgInNhdmUiKSB9KSwKCQkJZDogc2h5KCLliJvlu7rnqbrpl7QiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5kcmVhbShldmVudCwgY2FuLCAiZHJlYW0iKSB9KSwKCQkJbTogc2h5KCLmt7vliqDmqKHlnZciLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5hdXRvZ2VuKGV2ZW50LCBjYW4sICJhdXRvZ2VuIikgfSksCgkJCWM6IHNoeSgi57yW6K+R6aG555uuIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY29tcGlsZShldmVudCwgY2FuLCAiY29tcGlsZSIpIH0pLAoJCX0sCgkJbm9ybWFsX2N0cmw6IHsKCQkJZjogc2h5KCLlkJHkuIvnv7vpobUiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4pK2Nhbi5jdXJyZW50LndpbmRvdygpLTMtY2FuLmN1cnJlbnQuc2Nyb2xsKCkKCQkJCXJldHVybiBjYW4uY3VycmVudC5zY3JvbGwobGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpLCB0cnVlCgkJCX0pLAoJCQliOiBzaHkoIuWQkeS4iue/u+mhtSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiktY2FuLmN1cnJlbnQud2luZG93KCkrMwoJCQkJcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSksIHRydWUKCQkJfSksCgkJfSwKCQlub3JtYWw6IHsKCQkJRXNjYXBlOiBzaHkoIuWIh+aNouaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9wbHVnaW4oZXZlbnQsIGNhbikgfSksCgkJCUFycm93TGVmdDogc2h5KCLlhYnmoIflt6bnp7siLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIC0xKSB9KSwKCQkJQXJyb3dSaWdodDogc2h5KCLlhYnmoIflj7Pnp7siLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDEpIH0pLAoJCQlBcnJvd0Rvd246IHNoeSgi5YWJ5qCH5LiL56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpIH0pLAoJCQlBcnJvd1VwOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKSB9KSwKCgkJCSIuIjogc2h5KCLph43lpI3mk43kvZwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIGNiID0gY2FuLnJlZG8ucG9wKCk7IGNiICYmIGNiKCkgfSksCgkJCXU6IHNoeSgi5pKk6ZSA5pON5L2cIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBjYiA9IGNhbi51bmRvLnBvcCgpOyBjYiAmJiBjYigpIH0pLAoJCQlKOiBzaHkoIuWQiOW5tuS4pOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJdmFyIG5leHQgPSBjYW4uY3VycmVudC5uZXh0KCk7IGlmICghbmV4dCkgeyByZXR1cm4gfQoJCQkJdmFyIGxpbmUgPSBjYW4uY3VycmVudC5saW5lLCB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl2YXIgcmVzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIG5leHQsICJ0ZC50ZXh0IilbMF0uaW5uZXJUZXh0CgkJCQljYW4uY3VycmVudC50ZXh0KHRleHQudHJpbVJpZ2h0KCkraWNlLlNQK3Jlc3QudHJpbUxlZnQoKSksIGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgbmV4dCkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5tb2RpZnlMaW5lKGNhbiwgbGluZSwgdGV4dCksIGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgcmVzdCwgbGluZS5uZXh0U2libGluZykgfSkKCQkJfSksCgoJCQlIOiBzaHkoIui3s+WIsOihjOmmliIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgMCkgfSksCgkJCWg6IHNoeSgi5YWJ5qCH5bem56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAtMSkgfSksCgkJCWw6IHNoeSgi5YWJ5qCH5Y+z56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAxKSB9KSwKCQkJTDogc2h5KCLot7PliLDooYzlsL4iLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIC0xKSB9KSwKCQkJajogc2h5KCLlhYnmoIfkuIvnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkgfSksCgkJCWs6IHNoeSgi5YWJ5qCH5LiK56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5wcmV2KCkpIH0pLAoKCQkJZ2c6IHNoeSgi6Lez5Yiw5p+Q6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY291bnQpLCB0cnVlIH0pLAoJCQlHOiBzaHkoIui3s+WIsOafkOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNvdW50ID0gY291bnQ+MT8gY291bnQ6IGNhbi5tYXgpLCB0cnVlIH0pLAoJCQl6dDogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXmnIDkuIoiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktKGNvdW50PjE/IGNvdW50OiAzKSksIHRydWUgfSksCgkJCXp6OiBzaHkoIuWwhuW9k+WJjeihjOaLieWIsOWxj+W5leS4remXtCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC5zY3JvbGwoKS0oY291bnQgPSBjb3VudD4xPyBjb3VudDogY2FuLmN1cnJlbnQud2luZG93KCkvMikpLCB0cnVlIH0pLAoJCQl6Yjogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXmnIDkuIsiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktY2FuLmN1cnJlbnQud2luZG93KCkrKGNvdW50PjE/IGNvdW50OiA1KSksIHRydWUgfSksCgoJCQlpOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikgfSksCgkJCUk6IHNoeSgi5o+S5YWl6KGM6aaWIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgMCkgfSksCgkJCWE6IHNoeSgi5o+S5YWl5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMSkgfSksCgkJCUE6IHNoeSgi5o+S5YWl6KGM5bC+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgLTEpIH0pLAoJCQlvOiBzaHkoIuaPkuWFpeS4i+S4gOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCkKCQkJCXRleHQgPSB0ZXh0LnN1YnN0cigwLCB0ZXh0LmluZGV4T2YodGV4dC50cmltTGVmdCgpKSkrKHRleHQuZW5kc1dpdGgoInsiKT8iXHQiOiIiKQoJCQkJY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgdGV4dCwgY2FuLmN1cnJlbnQubmV4dCgpKSkKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDEwMDApCgkJCX0pLAoJCQlPOiBzaHkoIuaPkuWFpeS4iuS4gOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCkKCQkJCXRleHQgPSB0ZXh0LnN1YnN0cigwLCB0ZXh0LmluZGV4T2YodGV4dC50cmltTGVmdCgpKSkrKHRleHQuZW5kc1dpdGgoIn0iKT8iXHQiOiIiKQoJCQkJY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgdGV4dCwgY2FuLmN1cnJlbnQubGluZSkpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAxMDAwKQoJCQl9KSwKCgkJCXl5OiBzaHkoIuWkjeWItuW9k+WJjeihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgY2FuLl9sYXN0X3RleHQgPSBjYW4uY3VycmVudC50ZXh0KCkgfSksCgkJCWRkOiBzaHkoIuWJquWIh+W9k+WJjeihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgdmFyIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCksIGxpbmUgPSBjYW4ub25hY3Rpb24uX2dldExpbmVubyhjYW4sIGNhbi5jdXJyZW50LmxpbmUpCgkJCQljYW4uX2xhc3RfdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBjYW4uY3VycmVudC5saW5lKSkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgdGV4dCwgbGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpIH0pCgkJCQl2YXIgY2FsbGVlID0gYXJndW1lbnRzLmNhbGxlZQoJCQkJY2FuLnJlZG8ucHVzaChmdW5jdGlvbigpIHsgY2FsbGVlKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIH0pCgkJCX0pLAoJCQlwOiBzaHkoIueymOi0tCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBjYW4uX2xhc3RfdGV4dCwgY2FuLmN1cnJlbnQubmV4dCgpKQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZS0xKSB9KQoJCQl9KSwKCQkJUDogc2h5KCLnspjotLQiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgY2FuLl9sYXN0X3RleHQsIGNhbi5jdXJyZW50LmxpbmUpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKzEpIH0pCgkJCX0pLAoKCQkJczogc2h5KCLkv53lrZjmlofku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zYXZlKGV2ZW50LCBjYW4sICJzYXZlIikgfSksCgkJCW06IHNoeSgi5re75Yqg5qih5Z2XIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uYXV0b2dlbihldmVudCwgY2FuLCAiYXV0b2dlbiIpIH0pLAoJCQljOiBzaHkoIue8luivkemhueebriIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNvbXBpbGUoZXZlbnQsIGNhbiwgImNvbXBpbGUiKSB9KSwKCQl9LAoJCWluc2VydDogewoJCQlFc2NhcGU6IHNoeSgi6YCA5Ye657yW6L6RIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQua2V5ICE9ICJFc2NhcGUiKSB7IHJldHVybiB9CgkJCQljYW4ub25rZXltYXAuX25vcm1hbChldmVudCwgY2FuKQoJCQl9KSwKCQkJVGFiOiBzaHkoIue8qei/myIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiVGFiIikgeyByZXR1cm4gfQoJCQkJY2FuLm9ua2V5bWFwLmluc2VydFRleHQoY2FuLnVpLmN1cnJlbnQsIGljZS5UQiksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9KSwKCQkJQmFja3NwYWNlOiBzaHkoIuWIoOmZpCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBpZiAoZXZlbnQua2V5ICE9ICJCYWNrc3BhY2UiKSB7IHJldHVybiB9CgkJCQlpZiAodGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID4gMCkgeyByZXR1cm4gfQoJCQkJaWYgKCFjYW4uY3VycmVudC5wcmV2KCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoKCQkJCXZhciByZXN0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5wcmV2KCkpCgkJCQljYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCXZhciBwb3MgPSBjYW4uY3VycmVudC50ZXh0KCkubGVuZ3RoCgoJCQkJY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4uY3VycmVudC50ZXh0KCkrcmVzdAoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMCwgcG9zKQoJCQl9KSwKCQkJRW50ZXI6IHNoeSgi5o2i6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGlmIChldmVudC5rZXkgIT0gIkVudGVyIikgeyByZXR1cm4gfQoJCQkJdmFyIHJlc3QgPSBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIHRhcmdldC5zZWxlY3Rpb25FbmQpLCB0ZXh0ID0gY2FuLnVpLmN1cnJlbnQudmFsdWUKCQkJCXZhciBsZWZ0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpfHwodGV4dC50cmltUmlnaHQoKSA9PSAiIj8gdGV4dDogIiIpCgkJCQlpZiAodGV4dC5lbmRzV2l0aCgieyIpKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsifSIsIGNhbi5jdXJyZW50Lm5leHQoKSksIGxlZnQgKz0gaWNlLlRCIH0KCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCJbIikpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyJdIiwgY2FuLmN1cnJlbnQubmV4dCgpKSwgbGVmdCArPSBpY2UuVEIgfQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoIigiKSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrIikiLCBjYW4uY3VycmVudC5uZXh0KCkpLCBsZWZ0ICs9IGljZS5UQiB9CgkJCQlpZiAodGV4dC5lbmRzV2l0aCgiYCIpICYmIGNhbi5iYXNlLmNvdW50KHRleHQsICJgIiklMj09MSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrImAiLCBjYW4uY3VycmVudC5uZXh0KCkpIH0KCgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCtyZXN0LnRyaW1MZWZ0KCksIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCWNhbi5jdXJyZW50LnRleHQodGV4dC50cmltUmlnaHQoKXx8dGV4dCksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCBsZWZ0Lmxlbmd0aCwgMCkKCQkJfSksCgkJCUFycm93VXA6IHNoeSgi5YWJ5qCH5LiK56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQua2V5ICE9ICJBcnJvd1VwIikgeyByZXR1cm4gfQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKQoJCQl9KSwKCQkJQXJyb3dEb3duOiBzaHkoIuWFieagh+S4i+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiQXJyb3dEb3duIikgeyByZXR1cm4gfQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKQoJCQl9KSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwgbGlzdDogW25mcy5TQVZFLCBjb2RlLkNPTVBJTEUsIGNvZGUuQVVUT0dFTiwgbmZzLlNDUklQVCwgY2hhdC5XRUJTSVRFLCB3ZWIuRFJFQU1dLAoJX3J1bjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBhcmdzLCBjYikgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgYXJncywgY2J8fGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSksIGNhbi51aS5zb3VyY2UucmVmcmVzaCgpCgkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIGJ1dHRvbikKCQl9KQoJfSwKCV9ydW5zOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGNiKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKTsgY2FuLnJlcXVlc3QoZXZlbnQsIHthY3Rpb246IGJ1dHRvbn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgbWV0YS5mZWF0dXJlW2J1dHRvbl0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgYnV0dG9uLCBhcmdzLCBjYikKCQl9KQoJfSwKCXNhdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ucmVxdWVzdChldmVudCwge2ZpbGU6IGNhbi5PcHRpb24obmZzLkZJTEUpLCBjb250ZW50OiBjYW4ub25leHBvcnQuY29udGVudChjYW4pfSkKCQljYW4ub25hY3Rpb24uX3J1bihldmVudCwgY2FuLCBidXR0b24sIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0pCgl9LAoJY29tcGlsZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciB0b2FzdCA9IGNhbi51c2VyLnRvYXN0UHJvY2VzcyhjYW4sICLnvJbor5HkuK0uLi4iKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsgdG9hc3QuY2xvc2UoKQoJCQlpZiAobXNnLkxlbmd0aCgpID09IDApIHsgdmFyIHRvYXN0MSA9IGNhbi51c2VyLnRvYXN0UHJvY2VzcyhjYW4sICLph43lkK/kuK0uLi4iKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRvYXN0MS5jbG9zZSgpLCBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKHt9LCBjYW4pIH0sIDMwMDApCgkJCX0gZWxzZSB7IGNhbi51aS5zZWFyY2guX3Nob3cobXNnKSB9CgoJCX0pCgl9LAoJYXV0b2dlbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5vbmFjdGlvbi5fcnVucyhldmVudCwgY2FuLCBidXR0b24sIGZ1bmN0aW9uKG1zZykgewoJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24oY2xpLk1BSU4pLCAiIiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpLCAiIiwgZnVuY3Rpb24oKSB7CgkJCQljYW4udWkuc291cmNlLnJlZnJlc2goKQoJCQl9KQoJCX0sIHRydWUpCgl9KSB9LAoJc2NyaXB0OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX3J1bnMoY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWxlOiBjYW4uYmFzZS50cmltU3VmZml4KGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKStuZnMuSlN9KSwgY2FuLCBidXR0b24pCgl9LAoJd2Vic2l0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9ydW5zKGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmlsZTogKGNhbi5iYXNlLnRyaW1TdWZmaXgoY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpK25mcy5aTUwpLnNwbGl0KCIvIikucG9wKCl9KSwgY2FuLCBidXR0b24pCgl9LAoJZHJlYW06IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fcnVucyhjYW4ucmVxdWVzdChldmVudCksIGNhbiwgYnV0dG9uLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVpLmRyZWFtcy5yZWZyZXNoKCkKCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihtZGIuTkFNRSksIHdlYi5EUkVBTSkgLy8g5pi+56S656m66Ze0CgkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pCgkJfSkKCX0sCgki5re75YqgIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYXSwgZnVuY3Rpb24obGlzdCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsaXN0WzBdLCBjdHguSU5ERVgpIH0pIH0sCgki5o+S5Lu2IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVhdLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBzdWIgPSBjYW4udG9vbGtpdFtsaXN0WzBdXTsgaWYgKHN1YikgeyBzdWIuc2VsZWN0KCk7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBsaXN0WzBdfSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0W2xpc3RbMF1dID0gc3ViLnNlbGVjdCgpIH0pCgkJfSkKCX0sCgki5omp5bGVIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsidXJsIl0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJdmFyIHN1YiA9IGNhbi5leHRlbnRpb25zW2xpc3RbMF1dOyBpZiAoc3ViKSB7IHN1Yi5zZWxlY3QoKTsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0LmV4dHMoY2FuLCBsaXN0WzBdLCBmdW5jdGlvbihzdWIpIHsgY2FuLmV4dGVudGlvbnNbbGlzdFswXV0gPSBzdWIuc2VsZWN0KCkgfSkKCQl9KQoJfSwKCglsaXN0VGFnczogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBsaXN0ID0gW10KCQljYW4uY29yZS5JdGVtKGNhbi5yZXF1ZXN0KGV2ZW50KSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBpZiAoa2V5LmluZGV4T2YoIl8iKSA9PSAwKSB7IHJldHVybiB9CgkJCWxpc3QucHVzaCh7em9uZTogIm1zZyIsIHR5cGU6IHR5cGVvZiB2YWx1ZSwgbmFtZToga2V5LCB0ZXh0OiBjYW4uYmFzZS5pc09iamVjdCh2YWx1ZSk/ICIiOiAodmFsdWUrIiIpLnNwbGl0KGljZS5OTClbMF0sCgkJCQlwYXRoOiAidXNyL3ZvbGNhbm9zLyIsIGZpbGU6ICJsaWIvbWlzYy5qcyIsIGxpbmU6IDEsCgkJCX0pCgkJfSkKCQljYW4uY29yZS5MaXN0KFtjYW4uYmFzZSwgY2FuLmNvcmUsIGNhbi5taXNjLCBjYW4ucGFnZSwgY2FuLnVzZXIsIGNhbi5vbmVuZ2luZSwgY2FuLm9uZGFlbW9uLCBjYW4ub25hcHBlbmQsIGNhbi5vbmxheW91dCwgY2FuLm9ubW90aW9uLCBjYW4ub25rZXltYXBdLCBmdW5jdGlvbihsaWIpIHsKCQkJY2FuLmNvcmUuSXRlbShsaWIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCB8fCAhbGliLmhhc093blByb3BlcnR5KGtleSkpIHsgcmV0dXJuIH0KCQkJCWxpc3QucHVzaCh7em9uZTogbGliLl9uYW1lLCB0eXBlOiB0eXBlb2YgdmFsdWUsIG5hbWU6IGtleSwgdGV4dDogY2FuLmJhc2UuaXNPYmplY3QodmFsdWUpPyAiIjogKHZhbHVlKyIiKS5zcGxpdChpY2UuTkwpWzBdLAoJCQkJCXBhdGg6ICJ1c3Ivdm9sY2Fub3MvIiwgZmlsZTogbGliLl9wYXRoLCBsaW5lOiAxLAoJCQkJfSkKCQkJfSkKCQl9KQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHt0ZXh0OiBjYW4uYmFzZS5Gb3JtYXQobGlzdCl9KSwgYnV0dG9uKQoJfSwKCV9jb21wbGV0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLnVpLmNvbXBsZXRlCgkJaWYgKGV2ZW50ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gfQoJCXZhciBwcmUgPSBjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZSgwLCBjYW4udWkuY3VycmVudC5zZWxlY3Rpb25TdGFydCkKCQl2YXIgZW5kID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIHR5cGUgPSBjYW4uY29yZS5TcGxpdChwcmUpLnBvcCgpfHwiIgoJCXZhciBuYW1lID0gY2FuLmNvcmUuU3BsaXQodHlwZSwgIiIsIGljZS5QVCkucG9wKCl8fCIiCgkJdHlwZSA9IGNhbi5iYXNlLnRyaW1TdWZmaXgodHlwZSwgbmFtZSkKCQl0eXBlID0gY2FuLmJhc2UudHJpbVN1ZmZpeCh0eXBlLCBpY2UuUFQpCgkJY29uc3QgUFJFID0gInByZSIKCgkJZnVuY3Rpb24gdXBkYXRlKHRhcmdldCkgeyBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IHR5cGUsIG5hbWU6IG5hbWUsIHRleHQ6IHByZSwgZmlsZTogY2FuLk9wdGlvbihuZnMuRklMRSl9KQoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCAiY29tcGxldGUiLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51aS5jb21wbGV0ZS5fbXNnID0gbXNnCgkJCQlpZiAobXNnLkxlbmd0aCgpID09IDAgJiYgY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSA9PSBuZnMuSlMpIHsKCQkJCQltc2cubmFtZSA9IFtdLCBtc2cudHlwZSA9IFtdLCBtc2cudGV4dCA9IFtdCgkJCQkJY2FuLmNvcmUuSXRlbShjYW4uY29yZS5WYWx1ZSh3aW5kb3csIHR5cGUpLCBmdW5jdGlvbihrLCB2KSB7CgkJCQkJCW1zZy5QdXNoKG1kYi5OQU1FLCBrKSwgbXNnLlB1c2gobWRiLlRZUEUsIHR5cGVvZiB2KQoJCQkJCQl0cnkgeyBtc2cuUHVzaChtZGIuVEVYVCwgdikgfSBjYXRjaCAoZSkgeyBtc2cuUHVzaChtZGIuVEVYVCwgIiIpIH0KCQkJCQl9KQoJCQkJCW1zZy5hcHBlbmQgPSBbbWRiLk5BTUUsIG1kYi5UWVBFLCBtZGIuVEVYVF0KCQkJCX0KCQkJCW1zZy5MZW5ndGgoKSA9PSAwICYmIHByZS50cmltKCkgPT0gIiIgJiYgY2FuLmNvcmUuSXRlbShjYW4uY29yZS5WYWx1ZShjYW4ub25zeW50YXhbY2FuLnBhcnNlXSwgY29kZS5LRVlXT1JEKSwgZnVuY3Rpb24oaykgewoJCQkJCW1zZy5QdXNoKG1kYi5OQU1FLCBrKQoJCQkJfSkKCQkJCQoJCQkJY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t2aWV3OiBbUFJFLCBodG1sLkRJViwgcHJlXX1dKQoJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCkgeyByZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJdmFyIGxlZnQgPSBjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZSgwLCBjYW4udWkuY3VycmVudC5zZWxlY3Rpb25TdGFydCkrdmFsdWUKCQkJCQljYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlID0gbGVmdCtjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZShjYW4udWkuY3VycmVudC5zZWxlY3Rpb25FbmQpKQoJCQkJCWNhbi51aS5jdXJyZW50LmZvY3VzKCksIGNhbi51aS5jb250ZW50LnNjcm9sbExlZnQgLT0gMTAwMDAsIGNhbi51aS5jdXJyZW50LnNldFNlbGVjdGlvblJhbmdlKGxlZnQubGVuZ3RoLCBsZWZ0Lmxlbmd0aCkKCQkJCX19IH0sIHRhcmdldCkKCQkJfSkKCQl9CgoJCWZ1bmN0aW9uIGZpbHRlcigpIHsKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW2h0bWwuVEJPRFksICBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLkhJREUsIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgewoJCQkJCWlmICh0ZC5pbm5lclRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGNhbi5iYXNlLnRyaW1TdWZmaXgoKG5hbWUgPT0gaWNlLlBUPyB0eXBlOiBuYW1lKS50b0xvd2VyQ2FzZSgpLCAiKCIpKSA9PSAwKSB7IHJldHVybiB0ZCB9CgkJCQl9KS5sZW5ndGggPT0gMCkpIHsgcmV0dXJuIHRyIH0KCQkJfSkubGVuZ3RoID4gKG5hbWUgPT0gaWNlLlBUPyAxOiAwKQoJCX0KCgkJZnVuY3Rpb24gc2VsZWN0KGluZGV4LCB0b3RhbCkgeyBpbmRleCA9IChpbmRleCsodG90YWwrMSkpJSh0b3RhbCsxKQoJCQlpZiAoaW5kZXggPT0gdG90YWwpIHsgY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGNhbi51aS5jb21wbGV0ZS5fbXNnLk9wdGlvbihQUkUpKSB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW2h0bWwuVEJPRFksICJ0cjpub3QoLmhpZGUpIl0sIGZ1bmN0aW9uKHRyLCBpKSB7IGlmIChjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuU0VMRUNULCBpID09IGluZGV4KSkgewoJCQkJY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGNhbi51aS5jb21wbGV0ZS5fbXNnLk9wdGlvbihQUkUpK2Nhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlREKVswXS5pbm5lclRleHQpCgkJCX0gfSkKCQkJcmV0dXJuIGluZGV4CgkJfQoKCQlpZiAoZXZlbnQuY3RybEtleSkgewoJCQlpZiAoZXZlbnQudHlwZSA9PSAia2V5dXAiKSB7CgkJCQl2YXIgdG90YWwgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAidHI6bm90KC5oaWRlKSJdKS5sZW5ndGgKCQkJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQkJY2FzZSAibiI6IGNhbi51aS5jb21wbGV0ZS5faW5kZXggPSBzZWxlY3QoY2FuLnVpLmNvbXBsZXRlLl9pbmRleCsxLCB0b3RhbCk7IGJyZWFrCgkJCQkJY2FzZSAicCI6IGNhbi51aS5jb21wbGV0ZS5faW5kZXggPSBzZWxlY3QoY2FuLnVpLmNvbXBsZXRlLl9pbmRleC0xLCB0b3RhbCk7IGJyZWFrCgkJCQkJZGVmYXVsdDogcmV0dXJuIGZhbHNlCgkJCQl9CgkJCQlyZXR1cm4gY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0KCQkJcmV0dXJuCgkJfQoKCQljYW4uY3VycmVudC5saW5lLmFwcGVuZENoaWxkKGNhbi51aS5jb21wbGV0ZSksIGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbXBsZXRlLCBodG1sLkxFRlQsIGNhbi51aS5jdXJyZW50Lm9mZnNldExlZnQtMSwgaHRtbC5NQVJHSU5fVE9QLCBjYW4udWkuY3VycmVudC5vZmZzZXRIZWlnaHQrNCkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsICJkaXYucHJlIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmlubmVyVGV4dCA9IGNhbi51aS5jb21wbGV0ZS5fbXNnLk9wdGlvbihQUkUpfHxwcmUgfSkKCQlpZiAocHJlID09ICIiKSB7IHJldHVybiB1cGRhdGUodGFyZ2V0KSB9CgoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgaHRtbC5FTlRFUjogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWNhc2UgaHRtbC5UQUI6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGljZS5TUDogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWNhc2UgaWNlLlBUOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJZGVmYXVsdDogZmlsdGVyKCkgfHwgdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJfSBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gLTEKCX0sCgoJX3NlbGVjdExpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uY3VycmVudC5saW5lLCAidGQudGV4dCIsIGZ1bmN0aW9uKHRkKSB7IGNhbi51aS5jdXJyZW50LnZhbHVlID0gdGQuaW5uZXJUZXh0CgkJCWNhbi5jdXJyZW50LmxpbmUuYXBwZW5kQ2hpbGQoY2FuLnVpLmN1cnJlbnQpLCBjYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jdXJyZW50LCBodG1sLkxFRlQsIHRkLm9mZnNldExlZnQtMSwgaHRtbC5XSURUSCwgY2FuLnVpLmNvbnRlbnQuc3R5bGUud2lkdGgpCgkJCWlmIChldmVudCkgewoJCQkJaWYgKGV2ZW50LnR5cGUgPT0gImNsaWNrIiAmJiBjYW4ubW9kZSAhPSAiaW5zZXJ0IikgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uX2NvbXBsZXRlKGV2ZW50LCBjYW4pIH0pCgkJCQl9CgkJCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAwLCAoZXZlbnQub2Zmc2V0WCkvMTItMSkKCQkJfQoJCX0pCgl9LAoJcmVyYW5rTGluZTogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgeyBjYW4ubWF4ID0gMAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQljYW4ubWF4KyssIGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJ0ZC5saW5lIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmlubmVyVGV4dCA9IGluZGV4KzEgfSkKCQl9KQoJfSwKCWluc2VydExpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGJlZm9yZSkgeyB2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5hcHBlbmRMaW5lKGNhbiwgdmFsdWUpCgkJYmVmb3JlICYmIGNhbi51aS5jb250ZW50Lmluc2VydEJlZm9yZShsaW5lLCBjYW4ub25hY3Rpb24uX2dldExpbmUoY2FuLCBiZWZvcmUpKQoJCXJldHVybiBjYW4ub25hY3Rpb24ucmVyYW5rTGluZShjYW4pLCBjYW4ub25hY3Rpb24uX2dldExpbmVubyhjYW4sIGxpbmUpCgl9LAoJZGVsZXRlTGluZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7IGxpbmUgPSBjYW4ub25hY3Rpb24uX2dldExpbmUoY2FuLCBsaW5lKQoJCXZhciBuZXh0ID0gbGluZS5uZXh0U2libGluZ3x8bGluZS5wcmV2aW91c1NpYmxpbmcKCQlyZXR1cm4gY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgbGluZSksIGNhbi5vbmFjdGlvbi5yZXJhbmtMaW5lKGNhbiksIG5leHQKCX0sCgltb2RpZnlMaW5lOiBmdW5jdGlvbihjYW4sIGxpbmUsIHZhbHVlKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWlmIChpdGVtICE9IGxpbmUgJiYgaW5kZXgrMSAhPSBsaW5lKSB7IHJldHVybiB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJ0ZC50ZXh0IiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaXRlbS5pbm5lckhUTUwgPSBjYW4ub25zeW50YXguX3BhcnNlKGNhbiwgdmFsdWUpCgkJCX0pCgkJfSkKCX0sCglmYXZvckxpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6ICJ6b25lIiwgdmFsdWU6ICJoaSJ9LCB7bmFtZTogIm5hbWUiLCB2YWx1ZTogImhlbGxvIn1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGNvZGUuRkFWT1IsIFtjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuWk9ORSwgZGF0YS56b25lfHwiIiwKCQkJCW1kYi5UWVBFLCBjYW4ucGFyc2UsIG1kYi5OQU1FLCBkYXRhLm5hbWV8fCIiLCBtZGIuVEVYVCwgKHZhbHVlfHwiIikudHJpbVJpZ2h0KCksCgkJCQluZnMuUEFUSCwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG5mcy5GSUxFLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgbmZzLkxJTkUsIGNhbi5PcHRpb24obmZzLkxJTkUpLAoJCQldKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsi5paH5Lu25pWwIiwgIuaooeW8jyIsICLmjInplK4iLCAi6Kej5p6Q5ZmoIiwgIuaWh+S7tuWQjSIsICLlvZPliY3ooYwiLCAi6Lez6L2s5pWwIl19KQo=",
        "usr/volcanos/plugin/local/code/xterm.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGVfYXV0byhjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiksIGNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiksIGNhbi50ZXJtID0ge30KCgkJY2FuLnJlcXVpcmVNb2R1bGVzKFsieHRlcm0vY3NzL3h0ZXJtLmNzcyIsICJ4dGVybSIsICJ4dGVybS1hZGRvbi1maXQiLCAieHRlcm0tYWRkb24td2ViLWxpbmtzIl0sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgCgkJCWlmIChjYW4uT3B0aW9uKG1kYi5IQVNIKSAhPSAiIikgewoJCQkJdmFyIGl0ZW0gPSB7aGFzaDogY2FuLk9wdGlvbihtZGIuSEFTSCl9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgdmFsdWUua2V5LCB2YWx1ZS52YWx1ZSkgfSkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCBpdGVtKQoJCQl9CgoJCQl2YXIgaGFzaCA9IGNhbi5zdXAuX2hhc2h8fGNhbi5taXNjLlNlYXJjaEhhc2goY2FuKXx8dHJ1ZSwgbGlzdCA9IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQkJdmFyIGl0ZW0gPSBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCB2YWx1ZSk7IHZhbHVlLmhhc2ggPT0gaGFzaCAmJiAoaXRlbS5jbGljaygpLCBoYXNoID0gZmFsc2UpCgkJCX0pOyBoYXNoICYmIGNhbi5vbmltcG9ydC5fY3JlYXRlKGNhbiwgW21kYi5UWVBFLCAiIiwgbWRiLk5BTUUsICJ0ZXJtIl0pCgkJfSwgNTAwKSB9KQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCksIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQl2YXIgdGVybSA9IGNhbi51aS5jb250ZW50Ll90ZXJtOyBpZiAoIXRlcm0pIHsgcmV0dXJuIH0KCQl0ZXJtLl9maXQuZml0KCksIGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkKCX0sCglfaXRlbTogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJaXRlbS5fbWVudSA9IHNoeShjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCWNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKSwgbWV0YVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkKCQl9KQoJCXJldHVybiBpdGVtLl9pdGVtID0gY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBpdGVtLCBmdW5jdGlvbihldmVudCkgeyAKCQkJaXRlbS5fdGFicz8gaXRlbS5fdGFicy5jbGljaygpOiBpdGVtLl90YWJzID0gY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbaXRlbV0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCBpdGVtKQoJCQl9KSwgaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCwgdHJ1ZSkKCQl9LCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGl0ZW0uX21lbnUpIH0pCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oY2FuLCBhcmdzLCBkYXRhKSB7CgkJY2FuLnJ1bkFjdGlvbih7fSwgbWRiLkNSRUFURSwgYXJncywgZnVuY3Rpb24obXNnKSB7CgkJCXZhciBjdXJyZW50ID0gY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwge2hhc2g6IG1zZy5SZXN1bHQoKSwgbmFtZTogbXNnLk9wdGlvbihtZGIuTkFNRSksIGV4dHJhOiBkYXRhfSkKCQkJY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgY3VycmVudCwgY2FuLnVpLnByb2plY3QuZmlyc3RDaGlsZCkuY2xpY2soKQoJCX0pCgl9LAoJX2Nvbm5lY3Q6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLnVpLmNvbnRlbnQKCQljYW4uc3VwLl9oYXNoID0gaXRlbS5oYXNoLCBjYW4uaXNDbWRNb2RlKCkgJiYgKGxvY2F0aW9uLmhhc2ggPSBpdGVtLmhhc2gpCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXRlbS5oYXNoIH0sIHRhcmdldCwgY2FuLnVpLnByb2ZpbGUpKSB7CgkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0pLCAic2VsZWN0IiksIGl0ZW0uX3Rlcm0uZm9jdXMoKQoJCQlyZXR1cm4gY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCBpdGVtLl90ZXJtKQoJCX0KCgkJaXRlbS5leHRyYSA9IGNhbi5iYXNlLk9iaihpdGVtLmV4dHJhLCB7fSkKCQl2YXIgdGVybSA9IG5ldyBUZXJtaW5hbCh7dGhlbWU6IGl0ZW0uZXh0cmEsIGN1cnNvckJsaW5rOiB0cnVlLCB0YWJTdG9wV2lkdGg6IDR9KQoJCXZhciBmaXRBZGRvbiA9IG5ldyBGaXRBZGRvbi5GaXRBZGRvbigpOyB0ZXJtLmxvYWRBZGRvbihmaXRBZGRvbiksIHRlcm0uX2ZpdCA9IGZpdEFkZG9uCgkJdGVybS5sb2FkQWRkb24obmV3IFdlYkxpbmtzQWRkb24uV2ViTGlua3NBZGRvbigpKQoKCQl0ZXJtLm9wZW4odGFyZ2V0fHxjYW4udWkuY29udGVudCkKCQl0ZXJtLm9uUmVzaXplKGZ1bmN0aW9uKHNpemUpIHsgY2FuLm9uaW1wb3J0Ll9zaXplKGNhbiwgaXRlbSwgc2l6ZSkgfSkKCQlmaXRBZGRvbi5maXQoKQoKCQl2YXIgc3VibW9kZSA9IGZhbHNlLCBrZXlza2lwID0gZmFsc2UKCQl0ZXJtLm9uS2V5KGZ1bmN0aW9uKGUpIHsgdmFyIGV2ZW50ID0gZS5kb21FdmVudAoJCQlpZiAoc3VibW9kZSkgeyBrZXlza2lwID0gdHJ1ZTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgImwiOiB0YXJnZXQubmV4dFNpYmxpbmcgJiYgdGFyZ2V0Lm5leHRTaWJsaW5nLl90ZXJtPyB0YXJnZXQubmV4dFNpYmxpbmcuX3Rlcm0uZm9jdXMoKToKCQkJCQkJaXRlbS5fdGFicyAmJiBpdGVtLl90YWJzLm5leHRTaWJsaW5nICYmIGl0ZW0uX3RhYnMubmV4dFNpYmxpbmcuY2xpY2soKTsKCQkJCQlicmVhawoJCQkJY2FzZSAiaCI6IHRhcmdldC5wcmV2aW91c1NpYmxpbmcgJiYgdGFyZ2V0LnByZXZpb3VzU2libGluZy5fdGVybT8gdGFyZ2V0LnByZXZpb3VzU2libGluZy5fdGVybS5mb2N1cygpOgoJCQkJCQlpdGVtLl90YWJzICYmIGl0ZW0uX3RhYnMucHJldmlvdXNTaWJsaW5nICYmIGl0ZW0uX3RhYnMucHJldmlvdXNTaWJsaW5nLmNsaWNrKCk7CgkJCQkJYnJlYWsKCQkJCWNhc2UgIm4iOiBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pOyBicmVhawoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OiBrZXlza2lwID0gZmFsc2UKCQkJfSB9CgkJCXN1Ym1vZGUgPSBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PSAiZyIKCQkJY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKQoJCX0pCgkJdGVybS5vbkRhdGEoZnVuY3Rpb24odmFsKSB7CgkJCWlmIChzdWJtb2RlIHx8IGtleXNraXApIHsga2V5c2tpcCA9IGZhbHNlOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuX2lucHV0KGNhbiwgaXRlbSwgdmFsKQoJCX0pCgkJdGVybS5vblRpdGxlQ2hhbmdlKGZ1bmN0aW9uKHRpdGxlKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZSh0aXRsZSkgfSkKCQl0ZXJtLm9uQ3Vyc29yTW92ZShmdW5jdGlvbihlKSB7IGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkgfSkKCgkJY2FuLnRlcm1baXRlbS5oYXNoXSA9IGl0ZW0uX3Rlcm0gPSB0YXJnZXQuX3Rlcm0gPSB0ZXJtLCB0ZXJtLl90YXJnZXQgPSB0YXJnZXQsIHRlcm0uX2l0ZW0gPSBpdGVtCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwgaXRlbSksICJzZWxlY3QiKSwgaXRlbS5fdGVybS5mb2N1cygpCgkJcmV0dXJuIGNhbi5vbmltcG9ydC5fcGx1ZyhjYW4sIGl0ZW0pLCBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbCkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIGl0ZW0pLCAiaW5wdXQiLCBbYnRvYSh2YWwpXSwgZnVuY3Rpb24oKSB7fSkKCX0sCglfc2l6ZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBzaXplKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgc2l6ZSwgaXRlbSksICJyZXNpemUiLCBbXSkKCX0sCglfcGx1ZzogZnVuY3Rpb24oY2FuLCBpdGVtKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9maWxlKQoJCWNhbi5vbmltcG9ydC5wbHVnKGNhbiwgaXRlbS5leHRyYSwgY2FuLnVpLnByb2ZpbGUsIGZ1bmN0aW9uKHN1YikgeyBpdGVtLl9wbHVnaW4gPSBzdWIKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSozLzQpCgkJfSkKCX0sCglncm93OiBmdW5jdGlvbihjYW4sIG1zZywgdHlwZSkgeyB2YXIgdGVybSA9IGNhbi50ZXJtW21zZy5PcHRpb24obWRiLkhBU0gpXTsgaWYgKCF0ZXJtKSB7IHJldHVybiB9CgkJc3dpdGNoICh0eXBlKSB7CgkJCWNhc2UgImRhdGEiOiB0ZXJtLndyaXRlKGF0b2IobXNnLk9wdGlvbihtZGIuVEVYVCkpKTsgYnJlYWsKCQkJY2FzZSAiZXhpdCI6IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRlcm0uX3RhcmdldCk7IGJyZWFrCgkJfQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbbWRiLkNSRUFURSwgbGV4LlNQTElULCBtZGIuUFJVTkVTXSwKCV90cmFuczoge3NwbGl0OiAi5YiG5bGPIiwgdGhlbWU6ICLkuLvpopgifSwKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsICJiYWNrZ3JvdW5kIiwgY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jcmVhdGUoY2FuLCBhcmdzLCBkYXRhKQoJCX0pCgl9LAoJc3BsaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtuYW1lOiAidGVybSIsIG5yb3c6IDIsIG5jb2w6IDJ9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsICJucm93IiwgIm5jb2wiXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ub25pbXBvcnQudGFicyhjYW4sIFtkYXRhXSwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGF0YS5uYW1lIH0sIGNhbi51aS5jb250ZW50KSkgeyByZXR1cm4gfQoJCQkJY2FuLmNvcmUuTGlzdChwYXJzZUludChkYXRhLm5yb3cpLCBmdW5jdGlvbihucm93KSB7IHZhciByb3cgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgW3t2aWV3OiAicm93Iiwgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvZGF0YS5ucm93fX1dKS5maXJzdAoJCQkJCWNhbi5jb3JlLkxpc3QocGFyc2VJbnQoZGF0YS5uY29sKSwgZnVuY3Rpb24obmNvbCkgeyB2YXIgY29sID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgcm93LCBbe3ZpZXc6ICJjb2wiLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS9kYXRhLm5yb3csIHdpZHRoOiBjYW4uQ29uZldpZHRoKCkvZGF0YS5uY29sLTJ9fV0pLmZpcnN0CgkJCQkJCWNhbi5ydW5BY3Rpb24oe30sIG1kYi5DUkVBVEUsIFttZGIuVFlQRSwgZGF0YS50eXBlLCBtZGIuTkFNRSwgY2FuLmNvcmUuS2V5cyhkYXRhLm5hbWUsIG5yb3csIG5jb2wpXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5fY29ubmVjdChjYW4sIHtoYXNoOiBtc2cuUmVzdWx0KCl9LCBjb2wpIH0pCgkJCQkJfSkKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogWyJzaGFyZSIsICJwbHVnaW4iLCAidGhlbWUiLCAicmVuYW1lIiwgInJlbW92ZSJdLAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuT3B0aW9uKCJhcmdzIiwgIiIpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IGl0ZW0ubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgY2FuLl9pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KFtjYW4uc3VwLl9oYXNoXSksCgkJXSkKCX0sCglwbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKSwgY2FuLmJhc2UuQ29weShpdGVtLmV4dHJhLCBkYXRhKSwgY2FuLm9uaW1wb3J0Ll9wbHVnKGNhbiwgaXRlbSkKCQl9KQoJfSwKCXRoZW1lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbImJhY2tncm91bmQiLCAic2VsZWN0aW9uIiwgImN1cnNvciIsICJmb3JlZ3JvdW5kIl0sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgYXJncyksIGNhbi5iYXNlLkNvcHkoaXRlbS5leHRyYSwgZGF0YSksIGl0ZW0uX3Rlcm0uc2V0T3B0aW9uKCJ0aGVtZSIsIGRhdGEpCgkJfSkKCX0sCglyZW5hbWU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBhcmdzKSwgaXRlbS5uYW1lID0gaXRlbS5faXRlbS5pbm5lclRleHQgPSBpdGVtLl90YWJzLmlubmVyVGV4dCA9IGFyZ3NbMV0KCQl9KQoJfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbbWRiLlRPVEFMLCBtZGIuVFlQRSwgImJhY2tncm91bmQiLCAicm93cyIsICJjb2xzIiwgImN1cnNvclkiLCAiY3Vyc29yWCIsIGN0eC5JTkRFWF0sCgl0ZXJtOiBmdW5jdGlvbihjYW4sIHRlcm0pIHsgaXRlbSA9IHRlcm0uX2l0ZW0KCQljYW4uY29yZS5MaXN0KGNhbi5vbmV4cG9ydC5saXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJY2FuLlN0YXR1cyhrZXksIGNhbi5iYXNlLmdldFZhbGlkKGl0ZW1ba2V5XSwgaXRlbS5leHRyYVtrZXldLCB0ZXJtW2tleV0sIHRlcm0uYnVmZmVyLmFjdGl2ZVtrZXldLCAiIikpCgkJfSkKCQljYW4uU3RhdHVzKG1kYi5UT1RBTCwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0pLmxlbmd0aCkKCQljYW4uU3RhdHVzKG1kYi5UWVBFLCBpdGVtW21kYi5UWVBFXXx8IiIpCgkJcmV0dXJuIHRlcm0KCX0sCn0pCg==",
        "usr/volcanos/plugin/local/team/plan.css": "ZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIHsgdmVydGljYWwtYWxpZ246dG9wOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCB0ZC5vdmVyIHsgYm9yZGVyOnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIGRpdi5kYXRlIHsgY29sb3I6Z3JheTsgfQpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgZGl2LnByZXBhcmUgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYucHJvY2VzcyB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuY2FuY2VsIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuZmluaXNoIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBjb2xvcjp3aGl0ZTsgfQo=",
        "usr/volcanos/plugin/local/team/plan.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4udWkgPSBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4ub25pbXBvcnRbY2FuLk9wdGlvbigic2NhbGUiKXx8IndlZWsiXShjYW4sIG1zZykKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLk1BWF9IRUlHSFQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCkKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJIWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQkhY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKQoJfSwKCV9jb250ZW50OiBmdW5jdGlvbihjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkgewoJCXZhciBoYXNoID0ge307IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIGsgPSBrZXkoY2FuLmJhc2UuRGF0ZSh2YWx1ZS5iZWdpbl90aW1lKSk7IGhhc2hba10gPSAoaGFzaFtrXXx8W10pLmNvbmNhdChbdmFsdWVdKSB9KQoKCQljYW4uc3VwLnRhc2sgJiYgKGNhbi5zdXAudGFzay5fdGFyZ2V0ID0gbnVsbCkKCQl2YXIgYmVnaW5fdGltZSA9IGNhbi5iYXNlLkRhdGUoY2FuLk9wdGlvbigiYmVnaW5fdGltZSIpKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCBbe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVEFCTEVdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGhvdXIsIHJvdykgewoJCQlyZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoaGVhZCwgZnVuY3Rpb24od2VlaywgY29sKSB7CgkJCQlpZiAocm93ID09IDApIHsgcmV0dXJuIHt0ZXh0OiBbY2FuLnVzZXIudHJhbnMoY2FuLCB3ZWVrKSwgaHRtbC5USF19IH0KCQkJCWlmIChjb2wgPT0gMCkgeyByZXR1cm4ge3RleHQ6IFtob3VyLCBodG1sLlREXX0gfQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fdGFzayhjYW4sIG1zZywgZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSwgc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSkKCQkJfSl9CgkJfSkgfV0pLCBjYW4uU3RhdHVzKG1kYi5DT1VOVCwgbXNnLkxlbmd0aCgpKQoKCQltc2cuTGVuZ3RoKCkgPiAwICYmIGNhbi5zdXAudGFzayAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJdmFyIHRhcmdldCA9IGNhbi5zdXAudGFzay5fdGFyZ2V0fHxjYW4udGFzay5fdGFyZ2V0OyBjYW4uc3VwLnRhc2sgPSBudWxsLCB0YXJnZXQgJiYgdGFyZ2V0LmNsaWNrKCkKCQl9KQoJfSwKCV90YXNrOiBmdW5jdGlvbihjYW4sIG1zZywgbGlzdCwgdGltZSkgeyByZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sCgkJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYWN0aW9uLmluc2VydFRhc2soZXZlbnQsIGNhbiwgdGltZStjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpLnNsaWNlKHRpbWUubGVuZ3RoKSkKCQl9LAoJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCWNhbi5kcm9wKGV2ZW50LCBldmVudC50YXJnZXQsIHRpbWUpCgkJfSwKCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCAib3ZlciIsIGV2ZW50LnRhcmdldCA9PSBpdGVtKQoJCQl9KQoJCX0sCgkJbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0YXNrKSB7CgkJCXJldHVybiBjYW4uYmFzZS5pc1N0cmluZyh0YXNrKT8ge3RleHQ6IFt0YXNrLCBodG1sLkRJViwgImRhdGUiXX06IHt0ZXh0OiBbY2FuLm9uZXhwb3J0W2Nhbi5BY3Rpb24oInZpZXciKXx8InRleHQiXShjYW4sIHRhc2spLCBodG1sLkRJViwgY2FuLm9uZXhwb3J0LnN0eWxlKGNhbiwgdGFzayldLAoJCQkJb25kcmFnc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7IGNhbi5kcm9wID0gZnVuY3Rpb24oZXZlbnQsIHRkLCB0aW1lKSB7IHRkLmFwcGVuZCh0YXJnZXQpCgkJCQkJY2FuLm9uYWN0aW9uLm1vZGlmeVRhc2soZXZlbnQsIGNhbiwgdGFzaywgImJlZ2luX3RpbWUiLCB0aW1lK3Rhc2suYmVnaW5fdGltZS5zbGljZSh0aW1lLmxlbmd0aCksIHRhc2suYmVnaW5fdGltZSkKCQkJCX0gfSwgZHJhZ2dhYmxlOiB0aW1lICE9IHVuZGVmaW5lZCwgdGl0bGU6IGNhbi5vbmV4cG9ydC50aXRsZShjYW4sIHRhc2spLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJdmFyIGl0ZW0gPSBjYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuaWNrOiB0YXNrLm5hbWUrIjoiK3Rhc2sudGV4dH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRELCB0YXJnZXQucGFyZW50Tm9kZSksIGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIHRhc2spCgkJCQkJfSkgfSwgbnVsbCwgY2FuLnVpLnByb2plY3QpOyB0YXNrLl90YXJnZXQgPSB0YXJnZXQsIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgaXRlbS5jbGljaygpIH0KCQkJCQljYW4udGFzayA9IGNhbi50YXNrfHx0YXNrLCBjYW4uc3VwLnRhc2sgPSBjYW4uc3VwLnRhc2t8fHRhc2ssIGNhbi5zdXAudGFzay56b25lID09IHRhc2suem9uZSAmJiBjYW4uc3VwLnRhc2suaWQgPT0gdGFzay5pZCAmJiAoY2FuLnN1cC50YXNrLl90YXJnZXQgPSB0YXJnZXQpCgkJCQl9LAoJCQl9CgkJfSksCgl9IH0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gY2FuLnN1cC50YXNrID0gdGFzaywgY2FuLlN0YXR1cyh0YXNrKSwgW3Rhc2sucG9kLCB0YXNrLnpvbmUsIHRhc2suaWRdLmpvaW4oaWNlLlBUKSB9LCBjYW4udWkucHJvZmlsZSwgY2FuLnVpLmRpc3BsYXkpKSB7IHJldHVybiB9CgoJCXRhc2suZXh0cmEgJiYgY2FuLmNvcmUuSXRlbShjYW4uYmFzZS5PYmoodGFzay5leHRyYSksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgdGFza1siZXh0cmEuIitrZXldID0gdmFsdWUgfSksIGRlbGV0ZSh0YXNrLmV4dHJhKQoJCXZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4udWkucHJvZmlsZSwgW3t2aWV3OiBbY2hhdC5DT05URU5ULCBodG1sLlRBQkxFXSwgbGlzdDogW3t0aDogW21kYi5LRVksIG1kYi5WQUxVRV19XX1dKS5maXJzdAoJCWNhbi5jb3JlLkl0ZW0odGFzaywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBrZXkgIT0gIl90YXJnZXQiICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCBbewoJCQl0ZDogW2tleSwga2V5ID09IGljZS5QT0QgJiYgdmFsdWUgIT0gIiI/IGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogdmFsdWV9KSwgdmFsdWUpOiB2YWx1ZV0sCgkJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGlmIChjYW4ucGFnZS50YWdpcyhodG1sLklOUFVULCBldmVudC50YXJnZXQpICYmIGV2ZW50LnRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7CgkJCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB0YXNrKSwgW2N0eC5BQ1RJT04sIGV2ZW50LnRhcmdldC5uYW1lXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5VcGRhdGUoKSB9KQoJCQl9IH0sCgkJCW9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCgpCgkJCQlzd2l0Y2ggKGtleSkgewoJCQkJCWNhc2UgInpvbmUiOgoJCQkJCWNhc2UgImlkIjoKCQkJCQkJcmV0dXJuCgkJCQkJY2FzZSAibGV2ZWwiOgoJCQkJCWNhc2UgInNjb3JlIjoKCQkJCQkJbXNnLlB1c2goa2V5LCAiMSIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjIiKQoJCQkJCQltc2cuUHVzaChrZXksICIzIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiNCIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjUiKQoJCQkJCQlicmVhawoJCQkJCWNhc2UgInN0YXR1cyI6CgkJCQkJCW1zZy5QdXNoKGtleSwgInByZXBhcmUiKQoJCQkJCQltc2cuUHVzaChrZXksICJwcm9jZXNzIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiZmluaXNoIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiY2FuY2VsIikKCQkJCQkJYnJlYWsKCQkJCX0KCQkJCWNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUpIHsKCQkJCQljYW4ub25hY3Rpb24ubW9kaWZ5VGFzayhldmVudCwgY2FuLCB0YXNrLCBrZXksIHZhbHVlKQoJCQkJfSwge25hbWU6IGtleSwgYWN0aW9uOiBrZXkuaW5kZXhPZihtZGIuVElNRSkgPiAwPyAiZGF0ZSI6ICJrZXkiLCBtc2c6IG1zZywgbW9kZTogInNpbXBsZSJ9KQoJCQl9LAoJCX1dKSB9KSwgY2FuLm9uaW1wb3J0Ll9kaXNwbGF5KGNhbiwgdGFzaykKCX0sCglfZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IGlmICghdGFza1siZXh0cmEuY21kIl0pIHsgcmV0dXJuIH0KCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6ICJwbHVnIiwgY3R4OiB0YXNrWyJleHRyYS5jdHgiXSwgY21kOiB0YXNrWyJleHRyYS5jbWQiXSwgYXJnOiB0YXNrWyJleHRyYS5hcmciXX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwga2l0LkRpY3QoInRhc2sucG9kIiwgdGFza1sicG9kIl0sICJ0YXNrLnpvbmUiLCB0YXNrLnpvbmUsICJ0YXNrLmlkIiwgdGFzay5pZCkpCgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBbdGFza1ttZGIuWk9ORV0sIHRhc2tbbWRiLklEXV0uY29uY2F0KGNtZHMpLCBjYikKCQkJfQoJCX0sIGNhbi51aS5kaXNwbGF5KQoJfSwKCglkYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBbImhvdXIiLCAidGFzayJdCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSA3OyBpIDwgMjQ7IGkrKykgeyBsaXN0LnB1c2goY2FuLmJhc2UuTnVtYmVyKGksIDIpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5OdW1iZXIodGltZS5nZXRIb3VycygpLCAyKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2xpc3Rbcm93XV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gY2FuLmJhc2UuVGltZShiZWdpbl90aW1lLCAiJXktJW0tJWQgIikrbGlzdFtyb3ddIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCXdlZWs6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBjYW4ub25leHBvcnQuaGVhZChjYW4sICJob3VyIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDc7IGkgPCAyNDsgaSsrKSB7IGxpc3QucHVzaChjYW4uYmFzZS5OdW1iZXIoaSwgMikpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIHRpbWUuZ2V0RGF5KCkrIiAiK2Nhbi5iYXNlLk51bWJlcih0aW1lLmdldEhvdXJzKCksIDIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbY29sLTErIiAiK2xpc3Rbcm93XV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gY2FuLmJhc2UuVGltZShjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC1iZWdpbl90aW1lLmdldERheSgpK2NvbC0xKSwgIiV5LSVtLSVkICIpK2xpc3Rbcm93XSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgltb250aDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IGNhbi5vbmV4cG9ydC5oZWFkKGNhbiwgIm9yZGVyIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtLSVkIikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgewoJCQl2YXIgYmVnaW4gPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSkpCgkJCXZhciBsYXN0ID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpLWJlZ2luLmdldERheSgpKQoJCQl2YXIgZGF5ID0gY2FuLmJhc2UuVGltZUFkZChsYXN0LCAocm93LTEpKjcrY29sKQoJCQlyZXR1cm4gW2RheS5nZXREYXRlKCkrIiJdLmNvbmNhdChoYXNoW2tleShkYXkpXXx8W10pCgkJfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgewoJCQl2YXIgYmVnaW4gPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSkpCgkJCXZhciBsYXN0ID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpLWJlZ2luLmdldERheSgpKQoJCQl2YXIgZGF5ID0gY2FuLmJhc2UuVGltZUFkZChsYXN0LCAocm93LTEpKjcrY29sKQoJCQlyZXR1cm4ga2V5KGRheSkKCQl9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgl5ZWFyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gY2FuLm9uZXhwb3J0LmhlYWQoY2FuLCAibW9udGgiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtICIpK3RpbWUuZ2V0RGF5KCkgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkrIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpKyIgIisoY29sLTEpXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkrIi0iK2Nhbi5iYXNlLk51bWJlcihsaXN0W3Jvd10sIDIpIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCWxvbmc6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGJlZ2luX3RpbWUgPSBjYW4uYmFzZS5EYXRlKGNhbi5iYXNlLlRpbWUoY2FuLk9wdGlvbigiYmVnaW5fdGltZSIpLCAiJXktJW0tJWQgJUg6JU06JVMiKSkKCQl2YXIgYmVnaW4gPSBiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkgLSA1CgoJCXZhciBoZWFkID0gWyJtb250aCJdOyBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsgaGVhZC5wdXNoKGJlZ2luK2kpIH0KCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCAxMzsgaSsrKSB7IGxpc3QucHVzaChpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsICIleS0lbSIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbYmVnaW4rY29sLTErIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBiZWdpbitjb2wtMSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMikgfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuS6pOS6kiIsIGxpc3Q6IFsKCQkiaW5zZXJ0IiwgImV4cG9ydCIsICJpbXBvcnQiLAoJCVsibGV2ZWwiLCAiYWxsIiwgImwxIiwgImwyIiwgImwzIiwgImw0IiwgImw1Il0sCgkJWyJzdGF0dXMiLCAiYWxsIiwgInByZXBhcmUiLCAicHJvY2VzcyIsICJjYW5jZWwiLCAiZmluaXNoIl0sCgkJWyJzY29yZSIsICJhbGwiLCAiczEiLCAiczIiLCAiczMiLCAiczQiLCAiczUiXSwKCQlbInZpZXciLCAiIiwgIm5hbWUiLCAidGV4dCIsICJsZXZlbCIsICJzY29yZSJdLAoJXSwKCV90cmFuczogeyJ0YXNrIjogIuS7u+WKoSIsICJob3VyIjogIuaXtumXtCIsICJtb250aCI6ICLmnIjku70ifSwKCWluc2VydFRhc2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRpbWUpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwge2JlZ2luX3RpbWU6IHRpbWV9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGNhbi5Db25mKFtjdHguRkVBVFVSRSwgbWRiLklOU0VSVF0pLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5JTlNFUlQsIFsiem9uZSIsIGFyZ3NbMV0sICJiZWdpbl90aW1lIiwgdGltZV0uY29uY2F0KGFyZ3MpKQoJCX0pCgl9LAoJbW9kaWZ5VGFzazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFzaywga2V5LCB2YWx1ZSkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHRhc2spLCBtZGIuTU9ESUZZLCBba2V5LCB2YWx1ZSwgdGFza1trZXldXSkKCX0sCgoJX2ZpbHRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyB2YXIgY291bnQgPSAwCgkJaWYgKHZhbHVlID09ICJhbGwiKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5ISURFKSwgY291bnQrKwoJCQl9KQoJCX0gZWxzZSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgaHRtbC5ISURFKQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgY2FuLmNvcmUuS2V5cyhodG1sLkRJViwgdmFsdWUpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5ISURFKSwgY291bnQrKwoJCQl9KQoJCX0KCQljYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4uU3RhdHVzKG1kYi5DT1VOVCwgY291bnQpCgl9LAoJbGV2ZWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXN0YXR1czogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJc2NvcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXZpZXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLm9uaW1wb3J0W2Nhbi5PcHRpb24oInNjYWxlIildKGNhbiwgY2FuLl9tc2cpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFttZGIuQ09VTlQsICJiZWdpbl90aW1lIiwgbWRiLlpPTkUsIG1kYi5JRCwgbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVF0sCgluYW1lOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIHRhc2submFtZSB9LAoJdGV4dDogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiB0YXNrLm5hbWUrIjogIisodGFzay50ZXh0fHwiIikgfSwKCWxldmVsOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuICJsLSIrKHRhc2subGV2ZWx8fDMpKyI6ICIrKHRhc2submFtZXx8IiIpIH0sCglzY29yZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiAicy0iKyh0YXNrLmxldmVsfHwzKSsiOiAiKyh0YXNrLm5hbWV8fCIiKSB9LAoJdGl0bGU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gdGFzay56b25lKyI6ICIrKHRhc2sudHlwZXx8IiIpIH0sCglzdHlsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiBbaHRtbC5JVEVNLCB0YXNrLnN0YXR1cywgbWRiLklEK3Rhc2suaWQsICJsIisodGFzay5sZXZlbHx8IiIpLCAicyIrKHRhc2suc2NvcmV8fCIiKV0uam9pbihpY2UuU1ApIH0sCgloZWFkOiBmdW5jdGlvbihjYW4sIHNjYWxlKSB7CgkJc3dpdGNoIChzY2FsZSkgewoJCQljYXNlICJ5ZWFyIjoKCQkJY2FzZSAibG9uZyI6CgkJCQlyZXR1cm4KCQl9CgkJcmV0dXJuIFtzY2FsZV0uY29uY2F0KGNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPT0gImVuIj8gWyJNb24iLCAiVHVlIiwgIldlZCIsICJUaHUiLCAiRnJpIiwgIlNhdCIsICJTdW4iXTogWyLlkajml6UiLCAi5ZGo5LiAIiwgIuWRqOS6jCIsICLlkajkuIkiLCAi5ZGo5ZubIiwgIuWRqOS6lCIsICLlkajlha0iXSk7Cgl9LAp9KQo=",
        "usr/volcanos/plugin/local/wiki/data.css": "ZmllbGRzZXQuZGF0YSBkaXYub3V0cHV0IHRhYmxlLmNvbnRlbnQgdHIuc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQpmaWVsZHNldC5kYXRhIGRpdi5vdXRwdXQgdGFibGUuY29udGVudCB0ci5vdmVyIHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQo=",
        "usr/volcanos/plugin/local/wiki/data.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiKSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5kaXNwbGF5KGNhbikKCQljYW4udGFibGUgPSBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jb250ZXh0bWVudTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGZ1bmN0aW9uKGV2LCBjbWQsIG1ldGEpIHsKCQkJCQl2YXIgY2IgPSBtZXRhW2NtZF07IGNiICYmIGNiKGV2ZW50LCBjYW4sIGNtZCwgdmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpCgkJCQl9KQoJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJa2V5ID09IG5mcy5QQVRIICYmIGNhbi5ydW4oZXZlbnQsIFtjYW4uT3B0aW9uKG5mcy5QQVRILCB2YWx1ZSldKQoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBldmVudC50YXJnZXQsIHRydWUpCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQpCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgbXNnLmFwcGVuZCkKCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwKCSLmsYLlkowiOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCXJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpICsgKHJlc1tpbmRleF18fDApOwoJfSwKCSLmnIDlpKciOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCQkocmVzW2luZGV4XSA9PT0gdW5kZWZpbmVkIHx8IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgPiBwYXJzZUludChyZXNbaW5kZXhdKSkgJiYgKHJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpKQoJfSwKCSLmnIDlsI8iOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCShyZXNbaW5kZXhdID09PSB1bmRlZmluZWQgfHwgcGFyc2VJbnQodGQuaW5uZXJUZXh0KSA8IHBhcnNlSW50KHJlc1tpbmRleF0pKSAmJiAocmVzW2luZGV4XSA9IHBhcnNlSW50KHRkLmlubmVyVGV4dCkpCgl9LAoJIuW5s+WdhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJlcywgdGQsIG5jb2wsIGNvbHMsIHJvd3MsIG5yb3cpIHsKCQlyZXNbbmNvbF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpICsgKHJlc1tuY29sXXx8MCk7CgkJaWYgKG5yb3cgPT0gcm93cy5sZW5ndGggLSAxKSB7CgkJCXJlc1tuY29sXSA9IHJlc1tuY29sXSAvIG5yb3cKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFtpY2UuU0FWRSwgW2ljZS5NT0RFLCAi5YWo6YCJIiwgIuWdl+mAiSIsICLlj43pgIkiLCAi5aSa6YCJIiwgIuaLluWKqCIsICLnvJbovpEiXSwgW2ljZS5FWEVDLCAi5rGC5ZKMIiwgIuacgOWkpyIsICLmnIDlsI8iLCAi5bmz5Z2HIl1dLAoJX2NvbXB1dGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgbXVsID0gaHRtbC5UUiArIChjYW4uQWN0aW9uKGljZS5NT0RFKSA9PSAi5YWo6YCJIj8gIiI6ICIuc2VsZWN0IikKCQl2YXIgbWV0aG9kID0gY2FuLm9uZmlndXJlW2Nhbi5BY3Rpb24oaWNlLkVYRUMpXSwgcmVzID0ge30KCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIG11bCwgZnVuY3Rpb24odHIsIG5yb3csIHJvd3MpIHsKCQkJKG11bCAhPSBodG1sLlRSIHx8IG5yb3cgPiAwKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIG5jb2wsIGNvbHMpIHsKCQkJCW1ldGhvZCAmJiBtZXRob2QoZXZlbnQsIGNhbiwgcmVzLCB0ZCwgbmNvbCwgY29scywgcm93cywgbnJvdykKCQkJfSkKCQl9KQoJCWNhbi5jb3JlLkl0ZW0ocmVzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5TdGF0dXMoY2FuLl9tc2cuYXBwZW5kW2tleV0sIHZhbHVlfHwiIikgfSkKCX0sCgoJc2F2ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgW2Nhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4ub25leHBvcnQuZmlsZShjYW4pXSkgfSwKCWV4ZWM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikgfSwKCglfZm9yZWFjaDogZnVuY3Rpb24oY2FuLCBidXR0b24sIGNiKSB7CgkJYnV0dG9uICYmIGNhbi5BY3Rpb24oaWNlLk1PREUsIGJ1dHRvbikKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYihpdGVtKQoJCX0pCgl9LAoKCSLlhajpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBpdGVtLCBmYWxzZSkKCQkJY2FuLnBhZ2UuZHJhZ2dhYmxlKGNhbiwgaXRlbSwgZmFsc2UpCgkJCWl0ZW0ub25tb3VzZWVudGVyID0gbnVsbCwgaXRlbS5vbmNsaWNrID0gbnVsbAoJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCAib3ZlciIpCgkJfSkKCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCX0sCgki5Z2X6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCQkJfQoJCX0pCgl9LAoJIuWPjemAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLlpJrpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHt9CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0Lm5lZyhjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLmi5bliqgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb25bIuWFqOmAiSJdKGV2ZW50LCBjYW4sIGJ1dHRvbikKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCAiIiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5kcmFnZ2FibGUoY2FuLCBpdGVtLCB0cnVlKQoJCQlpdGVtLm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmRyYWcgPSBpdGVtIH0KCQkJaXRlbS5vbmRyYWdvdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sICJvdmVyIil9CgkJCWl0ZW0ub25kcmFnbGVhdmUgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgIm92ZXIiKSB9CgkJCWl0ZW0ub25kcm9wID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEFCTEUsIGZ1bmN0aW9uKHRhYmxlKSB7CgkJCQkJdGFibGUuaW5zZXJ0QmVmb3JlKGNhbi5kcmFnLCBpdGVtKQoJCQkJfSkKCQkJfQoJCX0pCgl9LAoJIue8lui+kSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5lZGl0YWJsZShjYW4sIGl0ZW0sIHRydWUpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26K+m5oOFIiwgbGlzdDogWyLlpI3liLYiLCAi5Yig6ZmkIl0sCgki5aSN5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCB2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCXZhciBlbmQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udGFibGUsIFt7dHlwZTogaHRtbC5UUiwgbGlzdDogY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSkgewoJCQlyZXR1cm4ge3RleHQ6IFtsaW5lW2tleV0sIGh0bWwuVERdfQoJCX0pfV0pLnRyOyBjYW4udGFibGUuaW5zZXJ0QmVmb3JlKGVuZCwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJZmlsZTogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGNhbi5wYWdlLktleXMoaHRtbC5USCwgaHRtbC5URCksIGZ1bmN0aW9uKHRkKSB7cmV0dXJuIHRkLmlubmVySFRNTH0pLmpvaW4oaWNlLkZTKQoJCX0pLmpvaW4oaWNlLk5MKQoJfSwKfSkK",
        "usr/volcanos/plugin/local/wiki/draw.css": "ZmllbGRzZXQuZHJhdyBkaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjojMWI1YjczOGM7IGZvbnQtc2l6ZToyMHB4OyB9CmZpZWxkc2V0LmRyYXcgZGl2Lm91dHB1dCBkaXYuY29udGVudCBzdmcgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjViNzM4YzsgfQo=",
        "usr/volcanos/plugin/local/wiki/draw.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgbXNnKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKQoJCWNhbi5rZXlsaXN0ID0gW10sIGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoKCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLmNvcmUuSXRlbShraXQuRGljdCgKCQkJCWh0bWwuU1RST0tFX1dJRFRILCAyLCBodG1sLlNUUk9LRSwgY2xpLllFTExPVywgaHRtbC5GSUxMLCBjbGkuUFVSUExFLAoJCQkJaHRtbC5GT05UX1NJWkUsIDI0LCBodG1sLkZPTlRfRkFNSUxZLCBodG1sLk1PTk9TUEFDRSwKCQkJCSJnbyIsIGljZS5SVU4sIHN2Zy5TSEFQRSwgc3ZnLlJFQ1QsIHN2Zy5HUklELCAxMCwKCQkJKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBjYW4uc3ZnLlZhbHVlKGtleSwgY2FuLkFjdGlvbihrZXksIGNhbi5zdmcuVmFsdWUoa2V5KXx8dmFsdWUpKSB9KQoKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5NSU5fSEVJR0hULCA4MCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hUKS01MikKCQkJdmFyIHBpZCA9IGNhbi5PcHRpb24oc3ZnLlBJRCl8fGNhbi5zdmcuVmFsdWUoc3ZnLlBJRCk7IHBpZCAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrcGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBpdGVtKSwgY2FuLm9uZGV0YWlsLnJ1bih7dGFyZ2V0OiBpdGVtfSwgY2FuKQoJCQl9KSB8fCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBjYW4uc3ZnKQoJCX0pIAoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucG9pbnQgPSBbXQoJCWNhbi5zdmcgPSBudWxsLCBjYW4uZ3JvdXAgPSBudWxsLCBjYW4udGVtcCA9IG51bGwsIGNhbi5jdXJyZW50ID0gbnVsbAoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgY2FuLnVpLmNvbnRlbnQsIG1zZy5SZXN1bHQoKXx8Y2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5TVkcsIGZ1bmN0aW9uKHN2ZykgewoJCQljYW4uc3ZnID0gY2FuLmdyb3VwID0gY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIHN2ZyksIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBzdmcpLmNsaWNrKCkKCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgeyBzdmdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4pIH0gfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgc3ZnLCBtZGIuRk9SRUFDSCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pCgkJCQljYW4ucGFnZS50YWdpcyhzdmcuRywgaXRlbSkgJiYgaXRlbS5WYWx1ZShodG1sLkNMQVNTKSAmJiBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgaXRlbSkKCQkJfSkKCQl9KQoJfSwKCV9ncm91cDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdmFyIG5hbWUgPSB0YXJnZXQuR3JvdXBzKCkKCQlmdW5jdGlvbiBzaG93KGV2ZW50KSB7IGNhbi5ncm91cCA9IHRhcmdldAoJCQljYW4uY29yZS5MaXN0KFtodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihrZXkpIHsKCQkJCWNhbi5BY3Rpb24oa2V5LCB0YXJnZXQuVmFsdWUoa2V5KXx8Y2FuLkFjdGlvbihrZXkpKQoJCQl9KQoJCX0KCQlyZXR1cm4gKG5hbWUgfHwgdGFyZ2V0ID09IGNhbi5zdmcpICYmIGNhbi5vbmltcG9ydC5pdGVtKGNhbiwge25hbWU6IG5hbWV8fGh0bWwuU1ZHfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJc2hvdyhldmVudCksIGNhbi5vbmFjdGlvbi5zaG93KGV2ZW50LCBjYW4pLCBjYW4uU3RhdHVzKHN2Zy5HUk9VUCwgbmFtZXx8aHRtbC5TVkcpCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25hY3Rpb24sIGNhbi5vbmFjdGlvbi5tZW51X2xpc3QpCgkJfSwgY2FuLnVpLnByb2plY3QpCgl9LAoJX2Jsb2NrOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXRhcmdldC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIGNhcnRlID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uZGV0YWlsLCBudWxsLCBmdW5jdGlvbihldiwgYnV0dG9uLCBtZXRhKSB7CgkJCQltZXRhW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQl9KTsgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYXJ0ZS5fdGFyZ2V0LCB7bGVmdDogZXZlbnQuY2xpZW50WCwgdG9wOiBldmVudC5jbGllbnRZfSkKCQl9CgkJdGFyZ2V0LlZhbCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJcmV0dXJuIHBhcnNlSW50KHRhcmdldC5WYWx1ZShrZXksIHZhbHVlID09IHVuZGVmaW5lZD8gdmFsdWU6IHBhcnNlSW50KHZhbHVlKXx8MCkpfHwwCgkJfQoJCXRhcmdldC5WYWx1ZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKGtleSkpIHsgcmV0dXJuIH0KCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgY2FuLmNvcmUuSXRlbShrZXksIHRhcmdldC5WYWx1ZSk7IHJldHVybiB9CgoJCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJCWtleSA9IGZpZ3VyZSAmJiBmaWd1cmUuZGF0YSAmJiBmaWd1cmUuZGF0YS5zaXplICYmIGZpZ3VyZS5kYXRhLnNpemVba2V5XSB8fCBrZXkKCQkJaWYgKGZpZ3VyZSAmJiBmaWd1cmUuZGF0YSAmJiBjYW4uYmFzZS5pc0Z1bmMoZmlndXJlLmRhdGFba2V5XSkpIHsKCQkJCXJldHVybiBmaWd1cmUuZGF0YVtrZXldKGNhbiwgdmFsdWUsIGtleSwgdGFyZ2V0KQoJCQl9CgoJCQlpZiAoa2V5ID09IGh0bWwuSU5ORVIpIHsKCQkJCXJldHVybiB2YWx1ZSAhPSB1bmRlZmluZWQgJiYgKHRhcmdldC5pbm5lckhUTUwgPSB2YWx1ZSksIHRhcmdldC5pbm5lckhUTUwKCQkJfQoJCQlpZiAoa2V5ID09IGljZS5TSElQKSB7CgkJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpLCBjYW4uYmFzZS5PYmoodGFyZ2V0LmdldEF0dHJpYnV0ZShrZXkpLCBbXSkKCQkJfQoJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSksIHRhcmdldC5nZXRBdHRyaWJ1dGUoa2V5fHxodG1sLkNMQVNTKQoJCQkJfHwgdGFyZ2V0W2tleV0mJnRhcmdldFtrZXldLmJhc2VWYWwmJnRhcmdldFtrZXldLmJhc2VWYWwudmFsdWUgfHwgdGFyZ2V0W2tleV0mJnRhcmdldFtrZXldLmJhc2VWYWwgfHwgIiIKCQl9CgkJdGFyZ2V0Lkdyb3VwID0gZnVuY3Rpb24oKSB7IHZhciBpdGVtID0gdGFyZ2V0CgkJCXdoaWxlIChpdGVtKSB7IGlmIChbaHRtbC5TVkcsIHN2Zy5HXS5pbmRleE9mKGl0ZW0udGFnTmFtZSkgPiAtMSkgeyByZXR1cm4gaXRlbSB9OyBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQkJcmV0dXJuIGNhbi5zdmcKCQl9CgkJdGFyZ2V0Lkdyb3VwcyA9IGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IHRhcmdldAoJCQl2YXIgbGlzdCA9IFtdOyB3aGlsZSAoaXRlbSAmJiBpdGVtLnRhZ05hbWUgIT0gaHRtbC5TVkcpIHsKCQkJCWl0ZW0udGFnTmFtZSA9PSBzdmcuRyAmJiBpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpICYmIGxpc3QucHVzaChpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpKSwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZQoJCQl9CgkJCXJldHVybiBsaXN0LnJldmVyc2UoKS5qb2luKGljZS5QVCkKCQl9CgkJcmV0dXJuIHRhcmdldAoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbGlzdCkgeyBjYW4uT3B0aW9uKHN2Zy5QSUQsIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgdGFyZ2V0KSkKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkgfSwgY2FuLnVpLnByb2ZpbGUpKSB7IHJldHVybiB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5wcm9maWxlLCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVUXSkKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmRldGFpbC5saXN0LCB1aS5hY3Rpb24sIHtfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJY2FuLm9uZGV0YWlsW2J1dHRvbl0oe3RhcmdldDogdGFyZ2V0fSwgY2FuLCBidXR0b24pCgkJfX0pCgoJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQlsaXN0ID0gKGxpc3R8fFtdKS5jb25jYXQoZmlndXJlLmRhdGEuY29weSwgW3N2Zy5YLCBzdmcuWSwgbWRiLklOREVYLCBjdHguQVJHU10pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkub3V0cHV0LCBbe3R5cGU6IGh0bWwuVEFCTEUsIGNsYXNzTmFtZTogaHRtbC5DT05URU5ULCBsaXN0OiBbCgkJCXt0aDogW21kYi5LRVksIG1kYi5WQUxVRV19LCB7dGQ6IFttZGIuVFlQRSwgdGFyZ2V0LnRhZ05hbWVdfSwge3RkOiBbc3ZnLlBJRCwgdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpXX0sCgkJXS5jb25jYXQoY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJcmV0dXJuIGtleSA9IGZpZ3VyZS5kYXRhLnNpemVba2V5XXx8a2V5LCB7dGQ6IFtrZXksIHRhcmdldC5WYWx1ZShrZXkpXSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LlZhbHVlKGtleSwgdmFsdWUpLCBjYW4ub25maWd1cmUuX21vdmUoY2FuLCB0YXJnZXQpCgkJCQl9KQoJCQl9fQoJCX0pKSB9XSkKCX0sCglkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgZ3JvdXApIHsgLy8ge3NoYXBlLCBwb2ludCwgc3R5bGUsIF9pbml0fQoJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmVbdmFsdWUuc2hhcGVdLCBkYXRhID0gZmlndXJlLmRyYXcoZXZlbnQsIGNhbiwgdmFsdWUucG9pbnQsIHZhbHVlLnN0eWxlKQoJCWNhbi5jb3JlLkl0ZW0odmFsdWUuc3R5bGUsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgZGF0YVtrZXldID0gdmFsdWUgfSkKCQl2YXIgaXRlbSA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIGZpZ3VyZS5kYXRhLm5hbWV8fHZhbHVlLnNoYXBlLCBkYXRhLCBncm91cHx8Y2FuLnN2Z3x8Y2FuLmdyb3VwKQoJCWNhbi5jb3JlLkl0ZW1DQih2YWx1ZSwgZnVuY3Rpb24oa2V5LCBjYikgeyBpdGVtW2tleV0gPSBjYiB9KQoJCS8vIHJldHVybiBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSksIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSksIHZhbHVlLl9pbml0ICYmIHZhbHVlLl9pbml0KGl0ZW0pLCBpdGVtCgkJcmV0dXJuIGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSwgdmFsdWUuX2luaXQgJiYgdmFsdWUuX2luaXQoaXRlbSksIGl0ZW0KCX0sCglncm91cDogZnVuY3Rpb24oY2FuLCBuYW1lLCB2YWx1ZSwgZ3JvdXApIHsgZ3JvdXAgPSBncm91cHx8Y2FuLnN2Z3x8Y2FuLmdyb3VwCgkJdmFyIGcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgc3ZnLkcpOyBncm91cC5hcHBlbmQoZykKCQljYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgZyksIGcuVmFsdWUoaHRtbC5DTEFTUywgbmFtZSksIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBnKS5jbGljaygpCgkJcmV0dXJuIHZhbHVlICYmIGcuVmFsdWUodmFsdWUpLCBnCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuWbvuW9oue7mOWItiIsCglfZ2V0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIG5hbWUpIHsKCQlyZXR1cm4gY2FuLm9uZmlndXJlW25hbWVdfHxjYW4ub25maWd1cmVbaXRlbS5nZXRBdHRyaWJ1dGUobWRiLk5BTUUpXXx8Y2FuLm9uZmlndXJlW2l0ZW0udGFnTmFtZV0KCX0sCglfcGlkOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsgaWYgKGl0ZW0uVmFsdWUoc3ZnLlBJRCkpIHsgcmV0dXJuIGl0ZW0uVmFsdWUoc3ZnLlBJRCkgfQoJCXZhciBwaWQgPSAicCIrY2FuLnN2Zy5WYWwobWRiLkNPVU5ULCBjYW4uc3ZnLlZhbChtZGIuQ09VTlQpKzEpCgkJaXRlbS5WYWx1ZShodG1sLkNMQVNTLCAoaXRlbS5WYWx1ZShodG1sLkNMQVNTKStpY2UuU1AraXRlbS5WYWx1ZShzdmcuUElELCBwaWQpKS50cmltKCkpCgkJcmV0dXJuIHBpZAoJfSwKCV9wdXNoOiBmdW5jdGlvbihjYW4sIHR5cGUsIGRhdGEsIHRhcmdldCkgewoJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIHR5cGUpCgkJdGFyZ2V0LmFwcGVuZENoaWxkKGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSksIGl0ZW0uVmFsdWUoZGF0YSkKCQlyZXR1cm4gaXRlbQoJfSwKCV9jb3B5OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQl2YXIgZGF0YSA9IHt9LCBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCksIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplCgkJY2FuLmNvcmUuTGlzdChmaWd1cmUuZGF0YS5jb3B5LCBmdW5jdGlvbihpdGVtKSB7IGRhdGFbaXRlbV0gPSB0YXJnZXQuVmFsdWUoaXRlbSkgfSkKCQlkYXRhW3NpemUueHx8c3ZnLlhdID0gdGFyZ2V0LlZhbChzaXplLnh8fHN2Zy5YKSsxMAoJCWRhdGFbc2l6ZS55fHxzdmcuWV0gPSB0YXJnZXQuVmFsKHNpemUueXx8c3ZnLlkpKzEwCgkJcmV0dXJuIGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIHRhcmdldC50YWdOYW1lLCBkYXRhLCBjYW4uZ3JvdXB8fGNhbi5zdmcpCgl9LAoJX21vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsaXN0KSB7CgkJY2FuLmNvcmUuTGlzdChsaXN0fHx0YXJnZXQuVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbihzaGlwKSB7CgkJCXNoaXAudGFyZ2V0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3NoaXAucGlkKVswXQoJCQl2YXIgcCA9IGNhbi5vbmV4cG9ydC5hbmNob3IodGFyZ2V0LCBzaGlwLmFuY2hvciwge30pIAoJCQlpZiAoc2hpcC53aGljaCA9PSAxKSB7CgkJCQlzaGlwLnRhcmdldC5WYWwoc3ZnLlgxLCBwLngpLCBzaGlwLnRhcmdldC5WYWwoc3ZnLlkxLCBwLnkpCgkJCX0gZWxzZSBpZiAoc2hpcC53aGljaCA9PSAyKSB7CgkJCQlzaGlwLnRhcmdldC5WYWwoc3ZnLlgyLCBwLngpLCBzaGlwLnRhcmdldC5WYWwoc3ZnLlkyLCBwLnkpCgkJCX0KCQl9KQoJfSwKCglzdmc6IHsgLy8gPHN2ZyBoZWlnaHQ9IjIwMCIgd2lkdGg9IjYwMCIgY291bnQ9IjAiIGdyaWQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ieWVsbG93IiBmaWxsPSJwdXJwbGUiIGZvbnQtc2l6ZT0iMjQiLz4KCQlkYXRhOiB7c2l6ZToge30sIGNvcHk6IFtdfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3NpemUoY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJfSwKCXRleHQ6IHsgLy8gPHRleHQgeD0iNjAiIHk9IjEwIj5oaTx0ZXh0PgoJCWRhdGE6IHtwb2ludHM6IDEsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5JTk5FUl19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCBzdHlsZSkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMSB8fCBldmVudC50eXBlID09ICJtb3VzZW1vdmUiKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCB0ZXh0ID0gc3R5bGUmJnN0eWxlLmlubmVyfHxjYW4udXNlci5wcm9tcHQobWRiLlRFWFQpCgkJCXJldHVybiB0ZXh0PyB7eDogcDAueCwgeTogcDAueSwgaW5uZXI6IHRleHR9OiBudWxsCgkJfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCX0sCgljaXJjbGU6IHsgLy8gPGNpcmNsZSByPSIyMCIgY3g9IjI1IiBjeT0iNzUiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCBzaXplOiB7aGVpZ2h0OiBzdmcuUiwgd2lkdGg6IHN2Zy5SLCB4OiBzdmcuQ1gsIHk6IHN2Zy5DWX0sIGNvcHk6IFtzdmcuUl19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7cjogcGFyc2VJbnQoTWF0aC5zcXJ0KE1hdGgucG93KHAwLngtcDEueCwgMikrTWF0aC5wb3cocDAueS1wMS55LCAyKSkpLCBjeDogcDAueCwgY3k6IHAwLnl9CgkJfSwKCX0sCgllbGxpcHNlOiB7IC8vIDxlbGxpcHNlIHJ5PSI1IiByeD0iMjAiIGN4PSI3NSIgY3k9Ijc1Ii8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge2hlaWdodDogc3ZnLlJZLCB3aWR0aDogc3ZnLlJYLCB4OiBzdmcuQ1gsIHk6IHN2Zy5DWX0sIGNvcHk6IFtzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7cnk6IE1hdGguYWJzKHAwLnkgLSBwMS55KSwgcng6IE1hdGguYWJzKHAwLnggLSBwMS54KSwgY3g6IHAwLngsIGN5OiBwMC55fQoJCX0sCgl9LAoJcmVjdDogeyAvLyA8cmVjdCBoZWlnaHQ9IjMwIiB3aWR0aD0iMzAiIHJ5PSIxMCIgcng9IjEwIiB4PSI2MCIgeT0iMTAiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCByeTogNCwgcng6IDQsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEgsIHN2Zy5SWSwgc3ZnLlJYXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0KCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogTWF0aC5hYnMocDAueS1wMS55KSwgd2lkdGg6IE1hdGguYWJzKHAwLngtcDEueCksIHJ5OiB0aGlzLmRhdGEucnksIHJ4OiB0aGlzLmRhdGEucngsCgkJCQl4OiBwMC54ID4gcDEueD8gcDEueDogcDAueCwgeTogcDAueSA+IHAxLnk/IHAxLnk6IHAwLnksCgkJCX0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IHJldHVybiBkYXRhLnggPSB0YXJnZXQuVmFsKHN2Zy5YKSt0YXJnZXQuVmFsKGh0bWwuV0lEVEgpLzIsIGRhdGEueSA9IHRhcmdldC5WYWwoc3ZnLlkpK3RhcmdldC5WYWwoaHRtbC5IRUlHSFQpLzIsIGRhdGEgfSwKCX0sCglsaW5lOiB7IC8vIDxsaW5lIHgxPSIxMCIgeTE9IjUwIiB4Mj0iMTEwIiB5Mj0iMTUwIiB4eD0iMTAwIiB5eT0iMTAwIi8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge3g6IHN2Zy5YMSwgeTogc3ZnLlkxfSwgY29weTogW3N2Zy5YMSwgc3ZnLlkxLCBzdmcuWDIsIHN2Zy5ZMl19LAoJCWdyaWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJCXZhciBwID0gcG9pbnRbcG9pbnQubGVuZ3RoLTFdLCBwb3MgPSBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIHRhcmdldCkKCQkJdGFyZ2V0LlZhbCAmJiBjYW4ub25leHBvcnQuYW5jaG9yKHRhcmdldCwgcG9zLCBwKQoJCQlyZXR1cm4gcC50YXJnZXQgPSB0YXJnZXQsIHAuYW5jaG9yID0gcG9zLCBwb2ludAoJCX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0sIHNoaXAgPSBbXQoJCQlwMC50YXJnZXQgJiYgcDAudGFyZ2V0LlZhbHVlICYmIHNoaXAucHVzaCh7cGlkOiBwMC50YXJnZXQuVmFsdWUoc3ZnLlBJRCl9KQoJCQlwMS50YXJnZXQgJiYgcDEudGFyZ2V0LlZhbHVlICYmIHNoaXAucHVzaCh7cGlkOiBwMS50YXJnZXQuVmFsdWUoc3ZnLlBJRCl9KQoJCQlyZXR1cm4ge3gxOiBwMC54LCB5MTogcDAueSwgeDI6IHAxLngsIHkyOiBwMS55LCBzaGlwOiBzaGlwLmxlbmd0aCA+IDA/IHNoaXA6IHVuZGVmaW5lZH0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7IHJldHVybiBkYXRhLnggPSAodGFyZ2V0LlZhbChzdmcuWDEpK3RhcmdldC5WYWwoc3ZnLlgyKSkvMiwgZGF0YS55ID0gKHRhcmdldC5WYWwoc3ZnLlkxKSt0YXJnZXQuVmFsKHN2Zy5ZMikpLzIsIGRhdGEgfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiAiPCgiKyh0YXJnZXQuVmFsKHN2Zy5ZMiktdGFyZ2V0LlZhbChzdmcuWTEpKStpY2UuRlMrKHRhcmdldC5WYWwoc3ZnLlgyKS10YXJnZXQuVmFsKHN2Zy5YMSkpKyIpIitjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0sCgl9LAoJYmxvY2s6IHsgLy8gPHJlY3QgaGVpZ2h0PSIzMCIgd2lkdGg9IjMwIiByeT0iMTAiIHJ4PSIxMCIgeD0iNjAiIHk9IjEwIi8+CgkJZGF0YToge3BvaW50czogMiwgcnk6IDQsIHJ4OiA0LCBzaXplOiB7fSwgY29weTogW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXRoaXMuX3RlbXAgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdGhpcy5fdGVtcCkgJiYgZGVsZXRlKHRoaXMuX3RlbXApCgkJCXRoaXMuX3RlbXAgPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBzdmcuRywge30sIGNhbi5ncm91cHx8Y2FuLnN2ZykKCgkJCXZhciByZWN0ID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgc3ZnLlJFQ1QsIGNhbi5vbmZpZ3VyZS5yZWN0LmRyYXcoZXZlbnQsIGNhbiwgcG9pbnQpLCB0aGlzLl90ZW1wKQoJCQlpZiAoZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLKSB7CgkJCQljYW4ub25maWd1cmUuX3BpZChjYW4sIHJlY3QpLCBkZWxldGUodGhpcy5fdGVtcCkKCQkJfQoJCX0sCgkJdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsgY2FuLm9uZmlndXJlLnJlY3QudGV4dChjYW4sIGRhdGEsIHRhcmdldCkgfSwKCX0sCn0sIFtdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZTogewoJCW5vcm1hbDogewoJCQlncjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJydW4iKSB9LAoJCQlnYTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJhdXRvIikgfSwKCQkJZ206IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAibWFudWFsIikgfSwKCgkJCWFkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oIm1vZGUiLCAiZHJhdyIpIH0sCgkJCWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oIm1vZGUiLCAicmVzaXplIikgfSwKCgkJCXN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuVEVYVCkgfSwKCQkJc3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5SRUNUKSB9LAoJCQlzbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkxJTkUpIH0sCgkJCXNjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuQ0lSQ0xFKSB9LAoJCQlzZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkVMTElQU0UpIH0sCgoJCQljcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuUkVEKSB9LAoJCQljYjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQkxVRSkgfSwKCQkJY2c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkdSRUVOKSB9LAoJCQljeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuWUVMTE9XKSB9LAoJCQljcDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuUFVSUExFKSB9LAoJCQljYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQ1lBTikgfSwKCQkJY2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkJMQUNLKSB9LAoJCQljdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuV0hJVEUpIH0sCgoJCQlmcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLlJFRCkgfSwKCQkJZmI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5CTFVFKSB9LAoJCQlmZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkdSRUVOKSB9LAoJCQlmeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLllFTExPVykgfSwKCQkJZnA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5QVVJQTEUpIH0sCgkJCWZjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQ1lBTikgfSwKCQkJZmg6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5CTEFDSykgfSwKCQkJZnc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5XSElURSkgfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWwoJCVtodG1sLlNUUk9LRV9XSURUSCwgMSwgMiwgMywgNCwgNV0sCgkJW2h0bWwuU1RST0tFLCBjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRSwgY2xpLkJMQUNLLCBjbGkuV0hJVEVdLAoJCVtodG1sLkZJTEwsIGNsaS5SRUQsIGNsaS5ZRUxMT1csIGNsaS5HUkVFTiwgY2xpLkNZQU4sIGNsaS5CTFVFLCBjbGkuUFVSUExFLCBjbGkuQkxBQ0ssIGNsaS5XSElURSwgIiMwMDAwIl0sCgkJW2h0bWwuRk9OVF9TSVpFLCAxMiwgMTYsIDE4LCAyNCwgMzJdLAoKCQlbImdvIiwgaWNlLlJVTiwgaWNlLkFVVE8sICJtYW51YWwiXSwKCQlbIm1vZGUiLCAiZHJhdyIsICJyZXNpemUiXSwKCQlbc3ZnLlNIQVBFLCBzdmcuVEVYVCwgc3ZnLkNJUkNMRSwgc3ZnLkVMTElQU0UsIHN2Zy5SRUNULCBzdmcuTElORSwgc3ZnLkJMT0NLXSwKCQlbc3ZnLkdSSUQsIDEsIDIsIDMsIDQsIDUsIDEwLCAyMF0sCgldLCBtZW51X2xpc3Q6IFtpY2UuSElERSwgaWNlLlNIT1csIG1kYi5DUkVBVEUsIGNsaS5DTEVBUiwgbWRiLlJFTU9WRV0sCglfY2hhbmdlOiBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLmdyb3VwLlZhbHVlKGtleSwgdmFsdWUpIH0sCgkic3Ryb2tlLXdpZHRoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCglzdHJva2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJZmlsbDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCgkiZm9udC1zaXplIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCgoJZ286IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoJbW9kZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCglzaGFwZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCgoJZWRpdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsIGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTj8gaWNlLkFVVE86IGljZS5SVU4pIH0sCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7Y29udGVudDogY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuLCBjYW4uc3ZnKX0pLCBidXR0b24sIFtjYW4uT3B0aW9uKG5mcy5QQVRIKV0pCgl9LAoKCXByb2plY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSB9LAoJcHJvZmlsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUpIH0sCglzaG93OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5zaG93KGNhbiwge2ludGVydmFsOiAxMDAsIGxlbmd0aDogMTB9LCBudWxsLCBjYW4uZ3JvdXApIH0sCgloaWRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5oaWRlKGNhbiwge2ludGVydmFsOiAxMDAsIGxlbmd0aDogMTB9LCBudWxsLCBjYW4uZ3JvdXApIH0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbc3ZnLkdST1VQXSwgZnVuY3Rpb24obGlzdCkgeyB2YXIgbmFtZSA9IGxpc3RbMF0KCQkJdmFyIGdyb3VwID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgbmFtZSkKCQkJY2FuLmNvcmUuTGlzdChbaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24obmFtZSkgewoJCQkJZ3JvdXAuVmFsdWUobmFtZSwgY2FuLkFjdGlvbihuYW1lKSkKCQkJfSkKCQl9KQoJfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoY2FuLmdyb3VwID09IGNhbi5zdmcpIHsgcmV0dXJuIH0KCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uZ3JvdXApCgl9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uZ3JvdXApLCBjYW4ucG9pbnQgPSBbXSwgZGVsZXRlKGNhbi50ZW1wKQoJfSwKCglfbW9kZTogewoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7CgkJCXZhciBzaGFwZSA9IGNhbi5BY3Rpb24oc3ZnLlNIQVBFKSwgZmlndXJlID0gY2FuLm9uZmlndXJlW3NoYXBlXQoJCQlmaWd1cmUuZ3JpZCAmJiBmaWd1cmUuZ3JpZChldmVudCwgY2FuLCBwb2ludCkKCgkJCXZhciBkYXRhID0gZmlndXJlLmRyYXcgJiYgZmlndXJlLmRyYXcoZXZlbnQsIGNhbiwgcG9pbnQpCgkJCXZhciBpdGVtID0gZGF0YSAmJiBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBmaWd1cmUuZGF0YS5uYW1lfHxzaGFwZSwgZGF0YSwgY2FuLmdyb3VwfHxjYW4uc3ZnKQoJCQlldmVudC50eXBlID09IGh0bWwuQ0xJQ0sgJiYgcG9pbnQubGVuZ3RoID09PSBmaWd1cmUuZGF0YS5wb2ludHMgJiYgKGNhbi5wb2ludCA9IFtdKSAKCgkJCWlmIChldmVudC50eXBlID09IGh0bWwuQ0xJQ0sgJiYgaXRlbSkgewoJCQkJdmFyIHBpZCA9IGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSk7IGNhbi5jb3JlLkxpc3QocG9pbnQsIGZ1bmN0aW9uKHAsIGkpIHsgaWYgKCFwLnRhcmdldCkgeyByZXR1cm4gfQoJCQkJCXAudGFyZ2V0LlZhbHVlKGljZS5TSElQLCBwLnRhcmdldC5WYWx1ZShpY2UuU0hJUCkuY29uY2F0KFt7cGlkOiBwaWQsIHdoaWNoOiBpKzEsIGFuY2hvcjogcC5hbmNob3J9XSkpCgkJCQl9KQoJCQl9CgkJCXJldHVybiBpdGVtCgkJfSwKCQlyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxldmVudC50YXJnZXQKCQkJaWYgKGV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSykgewoJCQkJaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7CgkJCQkJY2FuLmN1cnJlbnQgPSB7dGFyZ2V0OiB0YXJnZXQsIGJlZ2luOiBjYW4uY29yZS5MaXN0KFt0YXJnZXRdLCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4ucGFnZS50YWdpcyhzdmcuRywgaXRlbSkpIHsgcmV0dXJuIH0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWhlaWdodDogaXRlbS5WYWwoaHRtbC5IRUlHSFQpLCB3aWR0aDogaXRlbS5WYWwoaHRtbC5XSURUSCksIHg6IGl0ZW0uVmFsKHN2Zy5YKSwgeTogaXRlbS5WYWwoc3ZnLlkpLAoJCQkJCQkJdGFyZ2V0OiBpdGVtLCBzaGlwOiBjYW4uY29yZS5MaXN0KGl0ZW0uVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbihzaGlwKSB7CgkJCQkJCQkJcmV0dXJuIHNoaXAucGlkICYmIChzaGlwLnRhcmdldCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtzaGlwLnBpZClbMF0pICYmIHNoaXAKCQkJCQkJCX0pCgkJCQkJCX0KCQkJCQl9KSwgcG9zOiBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIHRhcmdldCl9CgkJCQkJcmV0dXJuCgkJCQl9CgkJCQlyZXR1cm4gY2FuLnBvaW50ID0gW10sIGRlbGV0ZShjYW4uY3VycmVudCkKCQkJfQoKCQkJY2FuLmN1cnJlbnQgJiYgY2FuLmNvcmUuTGlzdChjYW4uY3VycmVudC5iZWdpbiwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCBpdGVtLnRhcmdldCkKCQkJCWNhbi5vbmV4cG9ydC5yZXNpemUoZXZlbnQsIGl0ZW0udGFyZ2V0LCBpdGVtLCBwb2ludFswXSwgcG9pbnRbMV0sIGNhbi5jdXJyZW50LnBvcykKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtpdGVtLnRhcmdldC5WYWx1ZShtZGIuVEVYVCksIGZ1bmN0aW9uKHRleHQpIHsKCQkJCQl0ZXh0LlZhbHVlKGNhbi5vbmV4cG9ydC5fdGV4dChjYW4sIGl0ZW0udGFyZ2V0LCBmaWd1cmUsIHt9KSkKCQkJCX0pLCBjYW4ub25maWd1cmUuX21vdmUoY2FuLCBpdGVtLnRhcmdldCwgaXRlbS5zaGlwKQoJCQl9KQoJCX0sCgkJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkgfSwKCX0sCglfYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlpZiAoY2FuLnBvaW50Lmxlbmd0aCA+IDApIHsgcmV0dXJuIH0KCQlpZiAodGFyZ2V0LnRhZ05hbWUgPT0gbWRiLlRFWFQpIHsgcmV0dXJuIH0KCgkJdmFyIHBvcyA9IGNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KQoJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgewoJCQlpZiAocG9zID09IDUpIHsKCQkJCWNhbi5BY3Rpb24oaWNlLk1PREUsICJkcmF3IiksIGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBodG1sLkJMT0NLKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIHtjdXJzb3I6ICJjcm9zc2hhaXIifSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5BY3Rpb24oaWNlLk1PREUsICJyZXNpemUiKQoJCQl9CgkJfSBlbHNlIHsKCQkJc3dpdGNoIChwb3MpIHsKCQkJCWNhc2UgNToKCQkJCWNhc2UgOTogY2FuLkFjdGlvbihpY2UuTU9ERSwgInJlc2l6ZSIpOyBicmVhawoJCQkJZGVmYXVsdDogY2FuLkFjdGlvbihpY2UuTU9ERSwgImRyYXciKSwgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5MSU5FKQoJCQl9CgkJfQoJfSwKCV9maWd1cmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50cywgdGFyZ2V0KSB7CgkJY2FuLnRlbXAgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLnRlbXApICYmIGRlbGV0ZShjYW4udGVtcCkKCQljYW4udGVtcCA9IGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25hY3Rpb24uX21vZGUsIGNhbi5BY3Rpb24oaWNlLk1PREUpXSwgW2V2ZW50LCBjYW4sIHBvaW50cywgdGFyZ2V0XSkKCQljYW4ucG9pbnQubGVuZ3RoID09IDAgJiYgZGVsZXRlKGNhbi50ZW1wKQoJfSwKCglvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25leHBvcnQuX3Nob3coY2FuLCBldmVudC50YXJnZXQpIH0sCglvbm1vdXNlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgcG9pbnQgPSBjYW4ub25leHBvcnQuX3BvaW50KGV2ZW50LCBjYW4pCgkJaWYgKGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTikgeyByZXR1cm4gfQoJCWNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5BVVRPKSB7IGNhbi5vbmFjdGlvbi5fYXV0byhjYW4sIGV2ZW50LnRhcmdldCkgfQoJCWNhbi5vbmFjdGlvbi5fZmlndXJlKGV2ZW50LCBjYW4sIGNhbi5wb2ludC5jb25jYXQocG9pbnQpKQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHBvaW50ID0gY2FuLm9uZXhwb3J0Ll9wb2ludChldmVudCwgY2FuKQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4pIHsgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgZXZlbnQudGFyZ2V0KQoJCQlyZXR1cm4gZXZlbnQuc2hpZnRLZXk/IGNhbi5vbmFjdGlvbi5fbW9kZS5ydW4oZXZlbnQsIGNhbik6IGNhbi5vbmRldGFpbC5ydW4oZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uYWN0aW9uLl9maWd1cmUoZXZlbnQsIGNhbiwgY2FuLnBvaW50ID0gY2FuLnBvaW50LmNvbmNhdChwb2ludCkpCgl9LAoJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubGFiZWwoZXZlbnQsIGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnu4Tku7bor6bmg4UiLCBsaXN0OiBbY2xpLlNUQVJULCBpY2UuUlVOLCBpY2UuQ09QWSwgaHRtbC5MQUJFTCwgbWRiLk1PRElGWSwgInRvaW1hZ2UiLCBtZGIuUkVNT1ZFXSwKCXN0YXJ0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQl2YXIgbGlzdCA9IFt0YXJnZXRdLCBkaWN0ID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsgdmFyIHNoaXAgPSBsaXN0W2ldLlZhbHVlKCJzaGlwIikKCQkJZm9yICh2YXIgaiA9IDA7IGogPCBzaGlwLmxlbmd0aDsgaisrKSB7IHZhciBwaWQgPSBzaGlwW2pdLnBpZAoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCXZhciBwaWQgPSBpdGVtLlZhbHVlKCJzaGlwIilbMV0ucGlkCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkhZGljdFtwaWRdICYmIGxpc3QucHVzaChpdGVtKSwgZGljdFtwaWRdID0gdHJ1ZQoJCQkJCX0pCgkJCQl9KQoJCQl9CgkJfQoJCWNhbi5jb3JlLk5leHQobGlzdCwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9ubW90aW9uLnNob3coY2FuLCB7aW50ZXJ2YWw6IDMwMCwgbGVuZ3RoOiAxMH0sIG51bGwsIGl0ZW0pIAoJCQljYW4udXNlci50b2FzdChjYW4sIGl0ZW0uVmFsdWUoImluZGV4IikpCgkJCWNhbi5vbmRldGFpbC5ydW4oe3RhcmdldDogaXRlbX0sIGNhbiksIG5leHQoKQoJCX0pIH0pCgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQlpZiAoIXRhcmdldC5WYWx1ZShzdmcuUElEKSkgeyBjYW4ub25maWd1cmUuX3BpZChjYW4sIHRhcmdldCkgfQoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldC5WYWx1ZShzdmcuUElEKSB9LCBjYW4udWkuZGlzcGxheSkpIHsgcmV0dXJuIH0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpc3BsYXkpLCBjYW4uc3ZnLlZhbHVlKHN2Zy5QSUQsIHRhcmdldC5WYWx1ZShzdmcuUElEKSkKCQl2YXIgaW5kZXggPSB0YXJnZXQuVmFsdWUobWRiLklOREVYKTsgaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiBjaGF0LlNUT1JZLCBpbmRleDogaW5kZXgsIGFyZ3M6IHRhcmdldC5WYWx1ZShjdHguQVJHUyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQpLTQqaHRtbC5BQ1RJT05fSEVJR0hUKSwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX2xlZ2VuZCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuZGlzcGxheSwgdHJ1ZSkKCQl9LCBjYW4udWkuZGlzcGxheSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLnNwbGl0KGljZS5QUykucG9wKCkuc3BsaXQoaWNlLlBUKVswXSwgY2FuLnN2ZykgfSwKCWNvcHk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZmlndXJlLl9jb3B5KGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkgfSwKCWxhYmVsOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQl2YXIgZGVmID0gdGFyZ2V0LlZhbHVlKG1kYi5URVhUKTsgZGVmICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtkZWYsIGZ1bmN0aW9uKGl0ZW0pIHsgZGVmID0gaXRlbS5WYWx1ZShodG1sLklOTkVSKSB9KQoKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuTEFCRUwsIHZhbHVlOiBkZWZ9XSwgZnVuY3Rpb24obGlzdCkgeyB2YXIgdGV4dCA9IGxpc3RbMF0KCQkJaWYgKHRhcmdldC50YWdOYW1lID09IGh0bWwuVEVYVCkgeyByZXR1cm4gdGFyZ2V0LmlubmVySFRNTCA9IHRleHQgfQoJCQlpZiAoZGVmICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtkZWYsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5WYWx1ZShodG1sLklOTkVSLCB0ZXh0KSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgoJCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJCXZhciBkYXRhID0gY2FuLm9uZXhwb3J0Ll90ZXh0KGNhbiwgdGFyZ2V0LCBmaWd1cmUsIHtpbm5lcjogdGV4dH0pCgkJCXZhciBpdGVtID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgaHRtbC5URVhULCBkYXRhLCB0YXJnZXQuR3JvdXAoKSkKCQkJdGFyZ2V0LlZhbHVlKG1kYi5URVhULCBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pKQoJCX0pCgl9LAoJbW9kaWZ5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkgfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJY2FuLmNvcmUuTGlzdCh0YXJnZXQuVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrdmFsdWUucGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQl9KQoJCX0pCgkJdGFyZ2V0LlZhbHVlKG1kYi5URVhUKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrdGFyZ2V0LlZhbHVlKG1kYi5URVhUKSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCX0pLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCB0YXJnZXQpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFtzdmcuR1JPVVAsICJmaWd1cmUiLCAiaW5kZXgiLCAicG9zIl0sCglfc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCWZ1bmN0aW9uIHNob3coKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3NpemUoY2FuLCB0YXJnZXQsIGZpZ3VyZSkraWNlLlNQK2Nhbi5vbmV4cG9ydC5fcG9zaXRpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJCWNhbi5TdGF0dXMoImZpZ3VyZSIsIHRhcmdldC50YWdOYW1lKyI6Iit0YXJnZXQuVmFsdWUoc3ZnLlBJRCkraWNlLlNQKyhmaWd1cmU/IChmaWd1cmUuc2hvd3x8c2hvdykoY2FuLCB0YXJnZXQsIGZpZ3VyZSk6ICIiKSkKCQljYW4uU3RhdHVzKHN2Zy5HUk9VUCwgdGFyZ2V0Lkdyb3VwcygpfHxjYW4uZ3JvdXAuR3JvdXBzKCl8fGh0bWwuU1ZHKQoJCWNhbi5TdGF0dXMoImluZGV4IiwgdGFyZ2V0LlZhbHVlKCJpbmRleCIpKQoJfSwKCV9zaXplOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlyZXR1cm4gIjwoIit0YXJnZXQuVmFsKHNpemVbaHRtbC5IRUlHSFRdfHxodG1sLkhFSUdIVCkraWNlLkZTK3RhcmdldC5WYWwoc2l6ZVtodG1sLldJRFRIXXx8aHRtbC5XSURUSCkrIikiCgl9LAoJX3Bvc2l0aW9uOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlyZXR1cm4gIkAoIit0YXJnZXQuVmFsKHNpemVbc3ZnLlhdfHxzdmcuWCkraWNlLkZTK3RhcmdldC5WYWwoc2l6ZVtzdmcuWV18fHN2Zy5ZKSsiKSIKCX0sCglfdGV4dDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSwgZGF0YSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJaWYgKGZpZ3VyZS50ZXh0KSB7IHJldHVybiBmaWd1cmUudGV4dChjYW4sIGRhdGEsIHRhcmdldCkgfQoJCXJldHVybiBkYXRhLnggPSB0YXJnZXQuVmFsKHNpemVbc3ZnLlhdfHxzdmcuWCksIGRhdGEueSA9IHRhcmdldC5WYWwoc2l6ZVtzdmcuWV18fHN2Zy5ZKSwgZGF0YQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBwID0gY2FuLnN2Zy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBwb2ludCA9IHt4OiBldmVudC5jbGllbnRYLXAueCwgeTogZXZlbnQuY2xpZW50WS1wLnl9CgkJcG9pbnQueCA9IHBvaW50LnggLSBwb2ludC54ICUgcGFyc2VJbnQoY2FuLkFjdGlvbihzdmcuR1JJRCkpCgkJcG9pbnQueSA9IHBvaW50LnkgLSBwb2ludC55ICUgcGFyc2VJbnQoY2FuLkFjdGlvbihzdmcuR1JJRCkpCgkJcmV0dXJuIGNhbi5TdGF0dXMoInBvcyIsIHBvaW50LngraWNlLkZTK3BvaW50LnkpLCBwb2ludAoJfSwKCWNvbnRlbnQ6IGZ1bmN0aW9uKGNhbiwgc3ZnKSB7CgkJcmV0dXJuIFsnPHN2ZyB2ZXJ0aW9uPSIxLjEiIHhtbG5zPSJodHRwczovL3d3dy53My5vcmcvMjAwMC9zdmciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiJ10uY29uY2F0KAoJCQlzdmc/IGNhbi5jb3JlLkxpc3QoW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBtZGIuQ09VTlQsIHN2Zy5QSUQsIHN2Zy5HUklELCBodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlyZXR1cm4gc3ZnLlZhbHVlKGl0ZW0pPyBpY2UuU1AgKyBpdGVtICsgJz0iJyArIHN2Zy5WYWx1ZShpdGVtKSArICciJzogIiIKCQkJfSk6IFsiIGhlaWdodD0iKygoY2FuLkNvbmZIZWlnaHQoKXx8NDUwKS01MCkrIiB3aWR0aD0iKyhjYW4uQ29uZldpZHRoKCl8fDYwMCldKS5jb25jYXQoWyc+Jywgc3ZnPyBzdmcuaW5uZXJIVE1MOiAiIiwgIjwvc3ZnPiJdKS5qb2luKCIiKQoJfSwKCgljdXJzb3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGl0ZW0sIHNob3cpIHsKCQl2YXIgcCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKCQl2YXIgcSA9IHt4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZfQoKCQl2YXIgcG9zID0gNSwgbWFyZ2luID0gMjAKCQl2YXIgeSA9IChxLnktcC55KS9wLmhlaWdodAoJCWlmICh5IDwgMC4yICYmIHEueS1wLnkgPCBtYXJnaW4pIHsKCQkJcG9zIC09IDMKCQl9IGVsc2UgaWYgKHkgPiAwLjggJiYgcS55LXAueS1wLmhlaWdodCA+IC1tYXJnaW4pIHsKCQkJcG9zICs9IDMKCQl9CgkJdmFyIHggPSAocS54LXAueCkvcC53aWR0aAoJCWlmICh4IDwgMC4yICYmIHEueC1wLnggPCBtYXJnaW4pIHsKCQkJcG9zIC09IDEKCQl9IGVsc2UgaWYgKHggPiAwLjggJiYgcS54LXAueC0gcC53aWR0aCA+IC1tYXJnaW4pIHsKCQkJcG9zICs9IDEKCQl9CgoJCXJldHVybiAoc2hvd3x8Y2FuLnN2Zykuc3R5bGUuY3Vyc29yID0gWwoJCQkibnctcmVzaXplIiwgIm4tcmVzaXplIiwgIm5lLXJlc2l6ZSIsCgkJCSJ3LXJlc2l6ZSIsICJtb3ZlIiwgImUtcmVzaXplIiwKCQkJInN3LXJlc2l6ZSIsICJzLXJlc2l6ZSIsICJzZS1yZXNpemUiLAoJCV1bcG9zLTFdLCBwb3MKCX0sCglhbmNob3I6IGZ1bmN0aW9uKHRhcmdldCwgcG9zLCBwb2ludCkgewoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSAyOgoJCQljYXNlIDM6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkKCQkJCWJyZWFrCgkJCWNhc2UgNDoKCQkJY2FzZSA1OgoJCQljYXNlIDY6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkgKyB0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKSAvIDIKCQkJCWJyZWFrCgkJCWNhc2UgNzoKCQkJY2FzZSA4OgoJCQljYXNlIDk6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkgKyB0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKQoJCQkJYnJlYWsKCQl9CgoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSA0OgoJCQljYXNlIDc6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkKCQkJCWJyZWFrCgkJCWNhc2UgMjoKCQkJY2FzZSA1OgoJCQljYXNlIDg6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkgKyB0YXJnZXQuVmFsKGh0bWwuV0lEVEgpIC8gMgoJCQkJYnJlYWsKCQkJY2FzZSAzOgoJCQljYXNlIDY6CgkJCWNhc2UgOToKCQkJCXBvaW50LnggPSB0YXJnZXQuVmFsKHN2Zy5YKSArIHRhcmdldC5WYWwoaHRtbC5XSURUSCkKCQkJCWJyZWFrCgkJfQoJCXJldHVybiBwb2ludAoJfSwKCXJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIGJlZ2luLCBwMCwgcDEsIHBvcykgewoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgNToKCQkJCWl0ZW0uVmFsdWUoc3ZnLlgsIGJlZ2luLnggKyBwMS54IC0gcDAueCkKCQkJCWl0ZW0uVmFsdWUoc3ZnLlksIGJlZ2luLnkgKyBwMS55IC0gcDAueSkKCQkJCXJldHVybgoJCX0KCgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDI6CgkJCWNhc2UgMzoKCQkJCWl0ZW0uVmFsdWUoc3ZnLlksIGJlZ2luLnkgKyBwMS55IC0gcDAueSkKCQkJCWl0ZW0uVmFsdWUoaHRtbC5IRUlHSFQsIGJlZ2luLmhlaWdodCAtIHAxLnkgKyBwMC55KQoJCQkJYnJlYWsKCQl9CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDQ6CgkJCWNhc2UgNzoKCQkJCWl0ZW0uVmFsdWUoc3ZlLlgsIGJlZ2luLnggKyBwMS54IC0gcDAueCkKCQkJCWl0ZW0uVmFsdWUoaHRtbC5XSURUSCwgYmVnaW4ud2lkdGggLSBwMS54ICsgcDAueCkKCQkJCWJyZWFrCgkJfQoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMzoKCQkJY2FzZSA2OgoJCQljYXNlIDk6CgkJCQlpdGVtLlZhbHVlKGh0bWwuV0lEVEgsIGJlZ2luLndpZHRoICsgcDEueCAtIHAwLngpCgkJCQlicmVhawoJCX0KCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDc6CgkJCWNhc2UgODoKCQkJY2FzZSA5OgoJCQkJaXRlbS5WYWx1ZShodG1sLkhFSUdIVCwgYmVnaW4uaGVpZ2h0ICsgcDEueSAtIHAwLnkpCgkJCQlicmVhawoJCX0KCX0sCn0pCg==",
        // "usr/volcanos/plugin/local/wiki/draw/draw.css": "",
        // "usr/volcanos/plugin/local/wiki/draw/draw.js": "",
        "usr/volcanos/plugin/local/wiki/draw/heart.js": "Vm9sY2Fub3MoImhlYXJ0Iiwge2hlbHA6ICLlv4PlvaIiLAogICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sCiAgICAgICAgY29weTogWyJkIiwgIm5hbWUiLCAibWV0YSIsICJ0dCIsICJ4eCIsICJ5eSJdLAogICAgICAgIHg6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHZhbHVlLCBjbWQsIHRhcmdldCkgewogICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0dC50eCA9IHZhbHVlLXRhcmdldC5WYWwoInh4IikKICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIit0dC50eCsiLCIrdHQudHkrIikiKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgfSwKICAgICAgICB5OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIHR0ID0gSlNPTi5wYXJzZSh0YXJnZXQuVmFsdWUoInR0Iil8fCd7InR4IjowLCAidHkiOjB9JykKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdHQudHkgPSB2YWx1ZS10YXJnZXQuVmFsKCJ5eSIpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInR0IiwgSlNPTi5zdHJpbmdpZnkodHQpKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0LlZhbCgieXkiKSt0dC50eQogICAgICAgIH0sCiAgICB9LCAvLyA8aGVhcnQgY3g9IjI1IiBjeT0iNzUiIHI9IjIwIi8+CiAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikge3JldHVybn0KCiAgICAgICAgdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0sIHAyID0gcG9pbnRbMl07CiAgICAgICAgcGwgPSB7eDogMipwMC54IC0gcDEueCwgeToyKnAwLnktcDEueX0KICAgICAgICB2YXIgcjAgPSBNYXRoLnNxcnQoTWF0aC5wb3cocDAueCAtIHAxLngsIDIpLCBNYXRoLnBvdyhwMC55IC0gcDEueSwgMikpIC8gMgogICAgICAgIHZhciBkID0gWwogICAgICAgICAgICAgICAgIk0iLCBwbC54LCBwbC55LAogICAgICAgICAgICAgICAgIkEiLCByMCwgcjAsIDAsIDAsIDAsIHAwLngsIHAwLnksCiAgICAgICAgICAgICAgICAiQSIsIHIwLCByMCwgMCwgMCwgMCwgcDEueCwgcDEueSwKICAgICAgICAgICAgXQoKICAgICAgICBpZiAocG9pbnQubGVuZ3RoID09IDMpIHsKICAgICAgICAgICAgdmFyIHIxID0gTWF0aC5zcXJ0KE1hdGgucG93KHAyLnggLSBwMS54LCAyKSwgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpKQogICAgICAgICAgICBkID0gZC5jb25jYXQoWwogICAgICAgICAgICAgICAgIkEiLCByMSwgcjEsIDE4MCwgMCwgMCwgcDIueCwgcDIueSwKICAgICAgICAgICAgICAgICJBIiwgcjEsIHIxLCAxODAsIDAsIDAsIHBsLngsIHBsLnksCiAgICAgICAgICAgIF0pCiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgbmFtZTogImhlYXJ0IiwgZDogZC5qb2luKCIgIiksCiAgICAgICAgICAgIG1ldGE6IEpTT04uc3RyaW5naWZ5KHBvaW50KSwKICAgICAgICAgICAgdHQ6IEpTT04uc3RyaW5naWZ5KHt0eDogMCwgdHk6IDB9KSwKICAgICAgICAgICAgeHg6IHAwLngsIHl5OnAxLnksCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZXZlbnQudHlwZSA9PSAiY2xpY2siICYmIHBvaW50Lmxlbmd0aCA9PSAzICYmIChjYW4ucG9pbnQgPSBbXSksIGRhdGEKICAgIH0sCiAgICB0ZXh0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewogICAgICAgIGRhdGEueCA9IHRhcmdldC5WYWwoImN4IikKICAgICAgICBkYXRhLnkgPSB0YXJnZXQuVmFsKCJjeSIpCiAgICAgICAgcmV0dXJuIGRhdGEKICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewogICAgICAgIHJldHVybiAiaGVhcnQgIiArIHRhcmdldC5WYWx1ZSgidHQiKQogICAgfSwKfSkK",
        "usr/volcanos/plugin/local/wiki/draw/path.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAogICAgcGF0aDJ2OiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54LCBwMC55KyhwMS55LXAwLnkpLzNdLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDJoOiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54KyhwMS54LXAwLngpLzMsIHAwLnldLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDogeyAvLyA8cGF0aCBkPSJNMTAgMTAgSCA5MCBWIDkwIEggMTAgWiIvPgogICAgICAgIGRhdGE6IHtzaXplOiB7fSwgY29weTogWyJkIiwgInR0IiwgInh4IiwgInl5Il0sCiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR4ID0gdmFsdWUtdGFyZ2V0LlZhbCgieHgiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ5eSIpK3R0LnR5CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsKICAgICAgICAgICAgaWYgKHN0eWxlICYmIHN0eWxlLmQpIHsgcmV0dXJuIHN0eWxlIH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7IGNhbi5fdGVtcCA9IHt9IH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCiAgICAgICAgICAgIGlmIChjYW4ua2V5cyAmJiBjYW4ua2V5cy5sZW5ndGggPiAwKSB7IHZhciBrOwogICAgICAgICAgICAgICAgayA9IGNhbi5fdGVtcFtwb2ludC5sZW5ndGgtMV0gPSBjYW4ua2V5c1swXQogICAgICAgICAgICAgICAgc3dpdGNoIChrLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjogY2FuLl90ZW1wW3BvaW50Lmxlbmd0aCsxXSA9ICIsIgogICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOiBjYW4uX3RlbXBbcG9pbnQubGVuZ3RoXSA9ICIsIjsgYnJlYWsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FuLmtleXMgPSBjYW4ua2V5cy5zbGljZSgxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2tpcCA9IDAKICAgICAgICAgICAgdmFyIGVuZCA9IGZhbHNlCiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZDogY2FuLmNvcmUuTGlzdChwb2ludCwgZnVuY3Rpb24ocCwgaSkgeyB2YXIgayA9IHAuawogICAgICAgICAgICAgICAgICAgIGlmIChpIDwgc2tpcCkge3JldHVybn0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiBrID0gIk0iOyBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBrID0gY2FuLl90ZW1wW2ldIHx8IHAuayB8fCAiTCI7IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgIGsgPSBrLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6IHJldHVybiBjYW4ucG9pbnQgPSBbXSwgY2FuLl90ZW1wID0ge30sIGsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6IHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJNIjogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkgiOiByZXR1cm4gaysiICIgKyBwLngKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiViI6IHJldHVybiBrKyIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiAwIDAgMCAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyByICsgIiAiICsgciArICIgMCAwIDAgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY2FuLnBvaW50W2ldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gY2FuLnBvaW50W2ldID0gY2FuLnBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5wb2ludFtpKzFdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC55ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hcmcgPSAiIDAgMCAwICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXAgPSBpICsgMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkgKyAiIDAgMCAwICIgKyBwb2ludFtpKzFdLnggKyAiICIgKyBwb2ludFtpKzFdLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHBvaW50W2krMl0ueCArICIgIiArIHBvaW50W2krMl0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpKzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzFdID0gcG9pbnRbaSsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsyXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZG9uZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJRIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRvbmUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuam9pbigiICIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICB9LAogICAgICAgIHRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7CiAgICAgICAgICAgIGRhdGEueCA9ICh0YXJnZXQueDEuYmFzZVZhbC52YWx1ZSArIHRhcmdldC54Mi5iYXNlVmFsLnZhbHVlKSAvIDIKICAgICAgICAgICAgZGF0YS55ID0gKHRhcmdldC55MS5iYXNlVmFsLnZhbHVlICsgdGFyZ2V0LnkyLmJhc2VWYWwudmFsdWUpIC8gMgogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIH0sCiAgICAgICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIHRhcmdldC50YWdOYW1lICsgIiAiICsgdGFyZ2V0LlZhbHVlKCJkIikgfSwKICAgIH0sCn0pCg==",
        "usr/volcanos/plugin/local/wiki/draw/walk_trash.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLAogICAgaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBvdXRwdXQsIGFjdGlvbiwgb3B0aW9uKSB7b3V0cHV0LmlubmVySFRNTCA9ICIiOwogICAgICAgIGlmICghbXNnLnJlc3VsdCB8fCBtc2cucmVzdWx0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZFRhYmxlKGNhbiwgbXNnLCBvdXRwdXQsIG1zZy5hcHBlbmQpOwogICAgICAgICAgICB0YWJsZS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtzd2l0Y2ggKGV2ZW50LnRhcmdldC50YWdOYW1lKSB7CiAgICAgICAgICAgICAgICBjYXNlICJURCI6CiAgICAgICAgICAgICAgICAgICAgY2FuLm9uaW1wb3J0LndoaWNoKGV2ZW50LCB0YWJsZSwgbXNnLmFwcGVuZCwgZnVuY3Rpb24oaW5kZXgsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYW4uT3B0aW9uKCJmaWxlIiwgZXZlbnQudGFyZ2V0LmlubmVySFRNTC50cmltKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5ydW4oZXZlbnQsIFtldmVudC50YXJnZXQuaW5uZXJIVE1MLnRyaW0oKV0sIGZ1bmN0aW9uKG1zZykge30pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAiVEgiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUUiI6CiAgICAgICAgICAgICAgICBjYXNlICJUQUJMRSI6CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIHJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyksIHRhYmxlOwogICAgICAgIH0KCiAgICAgICAgLy8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgYWN0aW9uLCBbe3R5cGU6ICJzY3JpcHQiLCBzcmM6ICJodHRwczovL2Nkbi5ib290Y3NzLmNvbS9lY2hhcnRzLzQuMi4wLXJjLjIvZWNoYXJ0cy5qcyJ9XSk7CiAgICAgICAgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgb3V0cHV0LCBbe2luY2x1ZGU6IFsicmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjYW4ucGFnZS5BcHBlbmQoY2FuLCBvdXRwdXQsIFt7aW5jbHVkZTogWyJyZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIG91dHB1dCwgW3t0eXBlOiAiZGl2Iiwgc3R5bGU6IHt3aWR0aDogIjYwMHB4IiwgaGVpZ2h0OiAiNDAwcHgifX1dKS5sYXN0KTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbXNnLlRhYmxlKCkKCiAgICAgICAgICAgICAgICB2YXIgeURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBiYXJEYXRhID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChkYXRhLmxlbmd0aD4xMD8gMTA6IGRhdGEubGVuZ3RoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgeURhdGEucHVzaChpICsgZGF0YVtpXS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBiYXJEYXRhLnB1c2goZGF0YVtpXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogW3sKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbXNnLk9wdGlvbigidGl0bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwgcmlnaHQ6IDI1MCwgdG9wOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjMkQzRTUzJywgZm9udFNpemU6IDE4fSwKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWUgKyI6ICIrcGFyYW1zLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2aXN1YWxNYXA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnRpbnVvdXMnLAogICAgICAgICAgICAgICAgICAgICAgICBvcmllbnQ6ICdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogODAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFsn6auYJywgJ+S9jiddLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93TGFiZWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBkYXRhWzFdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjNkZDRjZBJywgJyNGRkZENjQnLCAnI0ZGNTAwMCddCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjN0I5M0E3JwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBncmlkOiB7cmlnaHQ6IDEwLCB0b3A6IDEzNSwgYm90dG9tOiAxMDAsIHdpZHRoOiAnMjAlJ30sCiAgICAgICAgICAgICAgICAgICAgeEF4aXM6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUdhcDogMTYsCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7c2hvdzogZmFsc2UsIGxpbmVTdHlsZToge2NvbG9yOiAnI2RkZCd9fSwKICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1RpY2s6IHtzaG93OiBmYWxzZSwgbGluZVN0eWxlOiB7Y29sb3I6ICcjZGRkJ319LAogICAgICAgICAgICAgICAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNDU1QTc0JywgYWxpZ246ICdsZWZ0JywgZm9udFNpemU6IDE0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpY2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGQUFBMzknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0MTk3RkQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgPCAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2F8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2J8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeURhdGEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdlbzogewogICAgICAgICAgICAgICAgICAgICAgICBtYXA6ICdjaGluYScsIGxlZnQ6ICdsZWZ0JywgcmlnaHQ6ICcxMDAnLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge2VtcGhhc2lzOiB7c2hvdzogZmFsc2V9fSwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7ZW1waGFzaXM6IHthcmVhQ29sb3I6ICcjZmZmNDY0J319LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgICAgICByb2FtOiBmYWxzZSwgdHlwZTogJ21hcCcsIG5hbWU6ICdtYXBTZXInLAogICAgICAgICAgICAgICAgICAgICAgICBnZW9JbmRleDogMCwgbGFiZWw6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvYW06IGZhbHNlLCB0eXBlOiAnYmFyJywgbmFtZTogJ2JhclNlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbE1hcDogZmFsc2UsIGJhckdhcDogMCwgYmFyTWF4V2lkdGg6IDgsCiAgICAgICAgICAgICAgICAgICAgICAgIHpsZXZlbDogMTAwLCBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYSBjb2xvciBtYXAgYXMgeW91ciBuZWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JMaXN0ID0gW3tjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyNGRkQxMTknfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyNGRkFDNEMnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX0sIHtjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyMwMEMwRkEnfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyMyRjk1RkEnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGFJbmRleCA8IDM/IGNvbG9yTGlzdFswXTogY29sb3JMaXN0WzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJCb3JkZXJSYWRpdXM6IDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJhckRhdGEKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNoaW5hX2NoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9XX1dKTsKICAgICAgICB9XX1dKTsKICAgIH0sCiAgICB3aGljaDogZnVuY3Rpb24oZXZlbnQsIHRhYmxlLCBsaXN0LCBjYikge2lmIChldmVudC50YXJnZXQgPT0gdGFibGUpIHtyZXR1cm4gY2IoLTEsICIiKX0KICAgICAgICBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgInRyIiwgZnVuY3Rpb24odHIsIGluZGV4KSB7aWYgKGV2ZW50LnRhcmdldCA9PSB0cikge3JldHVybiBjYihpbmRleC0xLCAiIil9CiAgICAgICAgICAgIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCAidGgsdGQiLCBmdW5jdGlvbih0ZCwgb3JkZXIpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGQpIHtyZXR1cm4gY2IoaW5kZXgtMSwgbGlzdFtvcmRlcl0pfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAp9KQo=",
        "usr/volcanos/plugin/local/wiki/feel.css": "ZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IGltZyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5mZWVsLmZsb2F0IGRpdi5vdXRwdXQgaW1nIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0KZmllbGRzZXQuZmVlbC5mbG9hdCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0K",
        "usr/volcanos/plugin/local/wiki/feel.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGF0aCA9IGNhbi5yZXF1ZXN0KCksIGNhbi5saXN0ID0gW10sIG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4uYmFzZS5lbmRXaXRoKHZhbHVlLnBhdGgsIGljZS5QUyk/IGNhbi5wYXRoLlB1c2godmFsdWUpOiBjYW4ubGlzdC5wdXNoKHZhbHVlKQoJCX0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LmRpc3BsYXkoY2FuLCB0YXJnZXQpCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgY2FuLnBhdGgsIG51bGwsIGNhbi51aS5jb250ZW50KQoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLm9uZXhwb3J0Lmxpc3QpCgoJCWNhbi5BY3Rpb24oaHRtbC5IRUlHSFQsIG1zZy5PcHRpb24oaHRtbC5IRUlHSFQpfHxtc2cuX2NtZHNbMV18fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgbXNnLk9wdGlvbihodG1sLlNQRUVEKXx8bXNnLl9jbWRzWzJdfHwiMSIpCgkJY2FuLkFjdGlvbihtZGIuTElNSVQsIG1zZy5PcHRpb24obWRiLkxJTUlUKXx8bXNnLl9jbWRzWzNdfHwiOSIpCgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKQoKCQljYW4uYmVnaW4gPSBwYXJzZUludChjYW4uYmVnaW58fG1zZy5PcHRpb24oY2xpLkJFR0lOKXx8IjAiKQoJCWNhbi5kaXJfcm9vdCA9IG1zZy5PcHRpb24obmZzLkRJUl9ST09UKQoJCWNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpCgl9LAoJX2ZpbGU6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgdmFyIHAgPSBsb2NhdGlvbi5ocmVmLmluZGV4T2YoaWNlLkhUVFApID09IDA/ICIiOiAiaHR0cDovL2xvY2FsaG9zdDo5MDIwIgoJCXJldHVybiBwYXRoLmluZGV4T2YoaWNlLkhUVFApID09IDA/IHBhdGg6IHArY2FuLmJhc2UuUGF0aCgiL3NoYXJlL2xvY2FsIiwgY2FuLmRpcl9yb290fHwiIiwgcGF0aCkKCX0sCglmaWxlOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBwYXRoLCBpbmRleCkKCQl2YXIgY2IgPSBjYW4ub25maWd1cmVbY2FuLmJhc2UuRXh0KHBhdGgpXXx8Y2FuLm9uZmlndXJlWyJpbWFnZSJdOyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFtjYihjYW4sIHBhdGgsIGluZGV4KV0pCgl9LAoJcGFnZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBiZWdpbiwgbGltaXQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpc3BsYXkpCgkJYmVnaW4gPSBwYXJzZUludChiZWdpbnx8Y2FuLmJlZ2luKSwgbGltaXQgPSBwYXJzZUludChsaW1pdHx8Y2FuLkFjdGlvbihtZGIuTElNSVQpKQoJCWZvciAodmFyIGkgPSBiZWdpbjsgaSA8IGJlZ2luK2xpbWl0OyBpKyspIHsgbGlzdCAmJiBsaXN0W2ldICYmIGNhbi5vbmltcG9ydC5maWxlKGNhbiwgbGlzdFtpXS5wYXRoLCBpKSB9CgkJY2FuLlN0YXR1cyh7YmVnaW46IGJlZ2luLCBsaW1pdDogbGltaXQsIHRvdGFsOiBjYW4ubGlzdC5sZW5ndGh9KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLnu4Tku7boj5zljZUiLAoJcG5nOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWpwZzogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLmltYWdlKGNhbiwgcGF0aCwgaW5kZXgpIH0sCglqcGVnOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWltYWdlOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiB7aW1nOiBwYXRoLCBoZWlnaHQ6IGNhbi5vbmV4cG9ydC5oZWlnaHQoY2FuKSwKCQlvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkgfSwKCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25kZXRhaWwuX2luaXQoY2FuLCBpbmRleCkgfSwKCX0gfSwKCgl2aWRlbzogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHZhciBhdXRvID0gY2FuLnVzZXIuaXNNb2JpbGUmJmNhbi5BY3Rpb24obWRiLkxJTUlUKSE9IjEiPyBmYWxzZTogdHJ1ZSwgbG9vcCA9IHRydWUsIHRvdGFsID0gMDsgZnVuY3Rpb24gY2IoZXZlbnQpIHsgfQoJCXJldHVybiB7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHtoZWlnaHQ6IGNhbi5vbmV4cG9ydC5oZWlnaHQoY2FuKX0sIGNsYXNzTmFtZTogInByZXZpZXciLAoJCQlkYXRhOiB7c3JjOiBwYXRoLCBjb250cm9sczogImNvbnRyb2xzIiwgYXV0b3BsYXk6IGF1dG8sIGxvb3A6IGxvb3AsIHBsYXliYWNrUmF0ZTogcGFyc2VGbG9hdChjYW4uQWN0aW9uKGh0bWwuU1BFRUQpKX0sCgkJCW9uY29udGV4dG1lbnU6IGNiLCBvbnBsYXk6IGNiLCBvbnBhdXNlOiBjYiwgb25lbmRlZDogY2IsCgkJCW9ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKSB9LAoJCQlvbmxvYWRlZG1ldGFkYXRhOiBmdW5jdGlvbihldmVudCkgeyB0b3RhbCA9IGV2ZW50LnRpbWVTdGFtcAoJCQkJZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lID0gY2FuLl9tc2cuY3VycmVudFRpbWUgfHwgMAoJCQl9LCBvbmxvYWRlZGRhdGE6IGNiLCBvbnRpbWV1cGRhdGU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uU3RhdHVzKG5mcy5GSUxFKSA9PSBwYXRoICYmIGNhbi5TdGF0dXMoInBvc2l0aW9uIiwgY2FuLm9uZXhwb3J0LnBvc2l0aW9uKGNhbiwgKGNhbi5fbXNnLmN1cnJlbnRUaW1lPWV2ZW50LnRhcmdldC5jdXJyZW50VGltZSktMSwgZXZlbnQudGFyZ2V0LmR1cmF0aW9uKSkKCQkJfSwKCQl9Cgl9LAoJbXA0OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCgltNHY6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKCW1vdjogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJW2h0bWwuU1BFRUQsIDAuMSwgMC4yLCAwLjUsIDEsIDIsIDMsIDUsIDEwXSwKCQlbbWRiLkxJTUlULCAxLCAzLCA2LCA5LCAxMiwgMTUsIDIwLCAzMCwgNTBdLAoJXSwKCXByZXY6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmJlZ2luID4gMCkgewoJCQljYW4uYmVnaW4gLT0gcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCQl9IGVsc2UgewoJCQljYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/nrKzkuIDpobXkuoYiKQoJCX0KCX0sCgluZXh0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5iZWdpbiArIHBhcnNlSW50KGNhbi5BY3Rpb24obWRiLkxJTUlUKSkgPCBjYW4ubGlzdC5sZW5ndGgpIHsKCQkJY2FuLmJlZ2luICs9IHBhcnNlSW50KGNhbi5BY3Rpb24obWRiLkxJTUlUKSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpCgkJfSBlbHNlIHsKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi5bey57uP5piv5pyA5ZCO5LiA6aG15LqGIikKCQl9Cgl9LAoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KSB9LAoJbGltaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkgfSwKCgljaG9vc2VJbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJY2FuLnVzZXIuYWdlbnQuY2hvb3NlSW1hZ2UoZnVuY3Rpb24obGlzdCkgeyBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7aW1nOiBpdGVtLCBoZWlnaHQ6IDIwMH1dKQoJCX0pIH0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsi5YWz6ZetIiwgIuS4i+i9vSIsICLliKDpmaQiLCAi5LiK5LiA5LiqIiwgIuS4i+S4gOS4qiIsICLorr7nva7lpLTlg48iLCAi6K6+572u6IOM5pmvIiwgIuWkjeWItumTvuaOpSJdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBpbmRleCkgewoJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIHt0eXBlOiAic3RvcnkgZmVlbCBmbG9hdCJ9LCBbXSwgZnVuY3Rpb24oc3ViKSB7IGNhbi5zdWIgPSBzdWIKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyByZXR1cm4gY2FuLnJ1bihldmVudCwgY21kcywgY2IsIHRydWUpIH0KCgkJCXN1Yi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7CgkJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCB7bGVmdDogbGVmdCwgdG9wOiB0b3B9KQoJCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5XSURUSCwgd2lkdGgsIGh0bWwuSEVJR0hULCBoZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQpCgkJCQlzdWIub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmRldGFpbC5saXN0LCBzdWIuX2FjdGlvbiwgY2FuLm9uZGV0YWlsKQoJCQkJc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBbImJlZ2luIiwgImZpbGUiXSkKCgkJCQljYW4ub3JkZXIgPSBpbmRleCwgY2FuLnNob3cgPSBmdW5jdGlvbihvcmRlcikgeyBwYXRoID0gY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3Rbb3JkZXJdLnBhdGgpCgkJCQkJdmFyIGNiID0gY2FuLm9uZmlndXJlW2Nhbi5iYXNlLkV4dChwYXRoKV18fGNhbi5vbmZpZ3VyZVsiaW1hZ2UiXQoJCQkJCQoJCQkJCXN1Yi5wYWdlLkFwcGVuZHMoc3ViLCBzdWIuX291dHB1dCwgW2Nhbi5iYXNlLkNvcHkoY2IoY2FuLCBwYXRoLCBpbmRleCksIHtoZWlnaHQ6ICIiLCBzdHlsZToga2l0LkRpY3QoaHRtbC5NQVhfV0lEVEgsIHdpZHRoLCBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCl9KV0pCgkJCQkJc3ViLlN0YXR1cyhjbGkuQkVHSU4sIG9yZGVyKzEraWNlLlBTK2Nhbi5saXN0Lmxlbmd0aCksIHN1Yi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpCgkJCQl9LCBjYW4uc2hvdyhjYW4ub3JkZXIpCgkJCX0pCgkJfSwgY2FuLl9yb290Ll90YXJnZXQpCgl9LAoJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLnN1Yi5fdGFyZ2V0KSB9LAoJIuS4i+i9vSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuZG93bmxvYWQoY2FuLCBwYXRoID0gY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIG5mcy5UUkFTSCwgW2Nhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aF0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5Yig6Zmk5oiQ5YqfIikgfSwgdHJ1ZSkgfSwKCSLkuIrkuIDkuKoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vcmRlciA+IDA/IGNhbi5zaG93KC0tY2FuLm9yZGVyKTogY2FuLnVzZXIudG9hc3QoY2FuLCAi5bey57uP5piv56ys5LiA5byg5ZWmISIpIH0sCgki5LiL5LiA5LiqIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub3JkZXIgPCBjYW4ubGlzdC5sZW5ndGgtMT8gY2FuLnNob3coKytjYW4ub3JkZXIpOiBjYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/mnIDlkI7kuIDlvKDllaYhIikgfSwKCSLorr7nva7lpLTlg48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZXRIZWFkZXIoImF2YXRhciIsIGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aCkpIH0sCgki6K6+572u6IOM5pmvIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2V0SGVhZGVyKCJiYWNrZ3JvdW5kIiwgY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLlpI3liLbpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7X3BhdGg6IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aCl9LCB0cnVlKSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbY2xpLkJFR0lOLCBtZGIuTElNSVQsIG1kYi5UT1RBTCwgbmZzLkZJTEUsICJwb3NpdGlvbiJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodCA9PSBpY2UuQVVUTz8gY2FuLmJhc2UuTWluKGNhbi5Db25mSGVpZ2h0KCkvNCwgMjAwKTogaGVpZ2h0KQoJfSwKCXBvc2l0aW9uOiBmdW5jdGlvbihjYW4sIGluZGV4LCB0b3RhbCkgeyB0b3RhbCA9IHRvdGFsIHx8IGNhbi5tYXgKCQlyZXR1cm4gcGFyc2VJbnQoKGluZGV4KzEpKjEwMC90b3RhbCkrIiUiKyIgPSAiKyhwYXJzZUludChpbmRleCkrMSkraWNlLlBTK3BhcnNlSW50KHRvdGFsKQoJfSwKfSkK",
        "usr/volcanos/plugin/local/wiki/word.css": "ZmllbGRzZXQud29yZCBmb3JtLm9wdGlvbiBpbnB1dFtuYW1lPXBhdGhdIHsgd2lkdGg6MTI3cHg7IH0KCmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgeyBiYWNrZ3JvdW5kLWNvbG9yOmluaGVyaXQ7IG92ZXJmbG93OmF1dG87IG1pbi13aWR0aDoxMjBweDsgY2xlYXI6Ym90aDsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IGRpdi5saXN0IHsgbWFyZ2luLWxlZnQ6MjBweDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNGVtOyBmb250LXdlaWdodDpib2xkOyBmb250LWZhbWlseTpjdXJzaXZlOyBwYWRkaW5nOjRweCAyMHB4OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnU+ZGl2Lml0ZW0geyBmb250LXNpemU6MS42ZW07IH0KCmZpZWxkc2V0LndvcmQgYSB7IHdvcmQtYnJlYWs6YnJlYWstYWxsOyB9CmZpZWxkc2V0LndvcmQgYnIuc3RvcnkgeyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnkgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeSBsaS5IMiB7IGZvbnQtc2l6ZToxLjRlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5IGxpLkgzIHsgZm9udC1zaXplOjEuMmVtOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnlbZGF0YS10eXBlPXByZW1lbnVdIHsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9cHJlbWVudV0gbGk6aG92ZXIgeyBiYWNrZ3JvdW5kOmN5YW47IGNvbG9yOmJsdWU7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9ZW5kbWVudV0geyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LndvcmQgcC5zdG9yeVtkYXRhLW5hbWU9aW5uZXJdIHsgYmFja2dyb3VuZC1jb2xvcjojNGI2YzhhN2E7IHBhZGRpbmc6NHB4IDEwcHg7IGJvcmRlci1sZWZ0OnNvbGlkIDRweCBibHVlOyBtYXJnaW46MTBweCAwcHg7IH0KZmllbGRzZXQud29yZCBwLnN0b3J5W2RhdGEtbmFtZT1pbm5lcl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjMTBjOGE7IGN1cnNvcjpjb3B5OyB9CmZpZWxkc2V0LndvcmQgZmllbGRzZXQuc3RvcnkgeyBtYXJnaW46MTBweDsgfQpmaWVsZHNldC53b3JkIGZpZWxkc2V0LnN0b3J5LmZ1bGwgeyBtYXJnaW46MHB4OyB9CgpmaWVsZHNldC53b3JkLmZsb2F0IHsgcGFkZGluZzowOyBtYXJnaW46MDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MDsgdG9wOjA7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYuYWN0aW9uIHsgZGlzcGxheTpjb250ZW50czsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5zdGF0dXMgeyBjbGVhcjpub25lOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2Lm91dHB1dCB7IGJhY2tncm91bmQtY29sb3I6I2YwZjhmZjgwOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93OmF1dG87IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgYmFja2dyb3VuZDojNDY4MmI0NmI7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IHJpZ2h0OjA7IHRvcDozMXB4OyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQgZGl2LnBhZ2UgeyBtYXJnaW4tdG9wOjMxcHg7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGRpdi5jb250ZW50IGRpdi5wYWdlLnNob3cgeyBkaXNwbGF5OmJsb2NrOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQuZ3JpZCBkaXYucGFnZSB7IGJhY2tncm91bmQtY29sb3I6I2E0Y2JlY2I1OyBtYXJnaW46MTBweDsgaGVpZ2h0OjIwMHB4OyB3aWR0aDoyMDBweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGgxIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KZmllbGRzZXQud29yZC5mbG9hdCBoMiB7IHRleHQtYWxpZ246Y2VudGVyOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgaDMgeyB0ZXh0LWFsaWduOmNlbnRlcjsgfQoKZmllbGRzZXQud29yZC5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQoKZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubWVudSB7IGZsb2F0OmxlZnQ7IG92ZXJmbG93OmF1dG87IH0KZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubGlzdCB7IGZsb2F0OmxlZnQ7IG92ZXJmbG93OmF1dG87IH0KZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubWVudSBkaXYubGlzdCBkaXYuaXRlbSB7IHBhZGRpbmc6MCAyMHB4OyB9CgpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9c2hlbGxdIGxhYmVsIHsKCS1tb3otdXNlci1zZWxlY3Q6bm9uZTsgLyrngavni5AqLwoJLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOyAvKndlYmtpdOa1j+iniOWZqCovCgktbXMtdXNlci1zZWxlY3Q6bm9uZTsgLypJRTEwKi8KCS1raHRtbC11c2VyLXNlbGVjdDpub25lOyAvKuaXqeacn+a1j+iniOWZqCovCgl1c2VyLXNlbGVjdDpub25lOwp9Cgo=",
        "usr/volcanos/plugin/local/wiki/word.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJaWYgKG1zZy5MZW5ndGgoKSA+IDApIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwgbXNnLlJlc3VsdCgpKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgd2lraS5JVEVNLCBmdW5jdGlvbihpdGVtKSB7IHZhciBkYXRhID0gaXRlbS5kYXRhc2V0fHx7fQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIGNhbi5iYXNlLk9iaihkYXRhLnN0eWxlKSkKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgZGF0YS50eXBlXSwgW2NhbiwgZGF0YSwgaXRlbV0pCgkJfSkKCX0sCgluYXZtZW51OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgeyB2YXIgbmF2ID0gY2FuLnN1cC5fbmF2bWVudQoJCW5hdiA9IG5hdnx8Y2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9maWVsZHMsIFt3aWtpLk5BVk1FTlVdKS5maXJzdAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIG5hdiksIGNhbi5fZmllbGRzLmluc2VydEJlZm9yZShuYXYsIGNhbi5fb3V0cHV0KQoKCQljYW4ub25pbXBvcnQubGlzdChjYW4sIGNhbi5iYXNlLk9iaihkYXRhLmRhdGEpLCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQl2YXIgbGluayA9IGl0ZW0ubWV0YS5saW5rLCBsaXN0ID0gY2FuLmNvcmUuU3BsaXQoaXRlbS5tZXRhLmxpbmspCgkJCWlmIChjYW4uY29yZS5WYWx1ZShjYW4sIGxpc3RbMF0pKSB7IHJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBsaXN0WzBdXSwgbGlzdC5zbGljZSgxKSkgfQoJCQlpZiAoIWxpbmsgfHwgbGluayA9PSBjYW4uT3B0aW9uKG5mcy5QQVRIKSkgeyByZXR1cm4gZmFsc2UgfQoKCQkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUoaXRlbS5tZXRhLm5hbWUpOyByZXR1cm4gY2FuLk9wdGlvbihuZnMuUEFUSCwgbGluaykgfSkpIHsgcmV0dXJuIH0KCQkJcmV0dXJuIGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbbGlua10pCgkJfSwgbmF2KSwgY2FuLnN1cC5fbmF2bWVudSA9IG5hdgoKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2cpIHsgCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgbmF2LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSsoY2FuLmlzQ21kTW9kZSgpPyBtc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1kpOiAwKSkKCQkJY2FuLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCktbmF2Lm9mZnNldFdpZHRoLTIxKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LAoJCQkJaHRtbC5IRUlHSFQsIGNhbi5zdXAuX25hdm1lbnUub2Zmc2V0SGVpZ2h0LTIwLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpLAoJCQkJaHRtbC5GTE9BVCwgaHRtbC5MRUZULCBodG1sLkNMRUFSLCBodG1sLk5PTkUsCgkJCQlodG1sLlBBRERJTkcsIDEwLAoJCQkpCgkJfSkKCX0sCglwcmVtZW51OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4ucGFnZS5LZXlzKHdpa2kuSDIsIHdpa2kuSDMpLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbaXRlbS5pbm5lckhUTUwsIGh0bWwuTEksIGl0ZW0udGFnTmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJaXRlbS5zY3JvbGxJbnRvVmlldygpCgkJCX19XSksIGl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHRhcmdldC5zY3JvbGxJbnRvVmlldygpIH0KCQl9KQoJfSwKCXRpdGxlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5pc0NtZE1vZGUoKSAmJiB0YXJnZXQudGFnTmFtZSA9PSAiSDEiICYmIGNhbi51c2VyLnRpdGxlKGRhdGEudGV4dCkKCX0sCglyZWZlcjogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuQSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCAicmVmZXIiLCBtZGIuTkFNRSwgaXRlbS5kYXRhc2V0Lm5hbWUsIG1kYi5URVhULCBpdGVtLmhyZWZdKQoJCQl9CgkJfSkKCX0sCglzcGFyazogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQlpZiAoZGF0YVttZGIuTkFNRV0gPT0gY2hhdC5GSUVMRCkgewoJCQlmdW5jdGlvbiBkZWVwKHRleHQpIHsgdmFyIGQgPSAwCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHsKCQkJCQlzd2l0Y2ggKHRleHRbaV0pIHsKCQkJCQkJY2FzZSBpY2UuVEI6IGQgKz0gNDsgYnJlYWsKCQkJCQkJY2FzZSBpY2UuU1A6IGQrKzsgYnJlYWsKCQkJCQkJZGVmYXVsdDogcmV0dXJuIGQKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gZAoJCQl9CgkJCXZhciBsaXN0ID0gW107IGNhbi5jb3JlLkxpc3QodGFyZ2V0LmlubmVyVGV4dC5zcGxpdChpY2UuTkwpLCBmdW5jdGlvbihsaW5lKSB7IHZhciBfZGVlcCA9IGRlZXAobGluZSkKCQkJCXdoaWxlIChsaXN0Lmxlbmd0aCA+IDApIHsgaWYgKF9kZWVwIDw9IGxpc3RbbGlzdC5sZW5ndGgtMV0uX2RlZXApIHsgbGlzdC5wb3AoKSB9IGVsc2UgeyBicmVhayB9IH0KCQkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpLCBpdGVtID0ge19kZWVwOiBfZGVlcCwgbWV0YToge2luZGV4OiBsc1swXSwgbmFtZTogbHNbMV0sIGFyZ3M6IGxzLnNsaWNlKDIpfSwgbGlzdDogW119CgkJCQlpZiAobGlzdC5sZW5ndGggPiAwKSB7IGxpc3RbbGlzdC5sZW5ndGgtMV0ubGlzdC5wdXNoKGl0ZW0pIH0gbGlzdC5wdXNoKGl0ZW0pCgkJCX0pCgoJCQl2YXIgZmlyc3Q7IGZ1bmN0aW9uIHNob3coaXRlbSwgaW5kZXgsIHRhcmdldCwgb3V0cHV0KSB7CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lfHxpdGVtLm1ldGEuaW5kZXhdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB2aWV3Lm1lbnUsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCkKCQkJCQlpZiAodWkubGlzdC5pbm5lclRleHQpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KSB9CgkJCQkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5kZXggfSwgb3V0cHV0KSkgeyByZXR1cm4gfQoKCQkJCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgaXRlbS5tZXRhLCBmdW5jdGlvbihzdWIpIHsKCQkJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGl0ZW0ubWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJCQkJCXN1Yi5Db25mSGVpZ2h0KGl0ZW0ubWV0YS5oZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpLzIpLCBzdWIuQ29uZldpZHRoKGl0ZW0ubWV0YS53aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyAxODE6IDE2NSkpCgkJCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoJCQkJCQl9LCBvdXRwdXQpCgkJCQkJfSkKCQkJCX19LCBodG1sLkxJU1RdKQoJCQkJY2FuLmNvcmUuTGlzdChpdGVtLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5saXN0Lmxlbmd0aCA+IDAgJiYgc2hvdyhpdGVtLCBjYW4uY29yZS5LZXlzKGluZGV4LCBpdGVtLm1ldGEuaW5kZXgpLCB1aS5saXN0LCBvdXRwdXQpIH0pCgkJCQl1aS5saXN0LmlubmVyVGV4dCA9PSAiIiAmJiAoZmlyc3QgPSBmaXJzdHx8dWkuaXRlbSkKCQkJfQoKCQkJdmFyIHZpZXcgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbCgkJCQl7dmlldzogaHRtbC5NRU5VLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS8yLCB3aWR0aDogMTIwfX0sCgkJCQl7dmlldzogaHRtbC5MSVNULCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS8yLCB3aWR0aDogY2FuLkNvbmZXaWR0aCgpLShjYW4udXNlci5pc1dpbmRvd3M/IDE4MTogMTY1KX19LAoJCQldKQoJCQlyZXR1cm4gc2hvdyhsaXN0WzBdLCBsaXN0WzBdLl9pbmRleCwgdmlldy5tZW51LCB2aWV3Lmxpc3QpLCBmaXJzdC5jbGljaygpCgkJfQoKCQlpZiAoZGF0YVttZGIuTkFNRV0gPT0gaHRtbC5JTk5FUikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmNvcHkoY2FuLCB0YXJnZXQpIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuU1BBTiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25tb3Rpb24uY29weShjYW4sIGl0ZW0sICIiLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCAic3BhcmsiLCBtZGIuTkFNRSwgInNoZWxsIiwgbWRiLlRFWFQsIGl0ZW0uaW5uZXJUZXh0XSwgZnVuY3Rpb24oKSB7fSkKCQkJfSkKCQl9KQoJfSwKCWNoYXJ0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCXRhcmdldC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGVDbGllbnQoZXZlbnQsIGNhbiwga2l0LkRpY3QobWRiLkVYUE9SVCwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJCQljYW4ub25tb3Rpb24udG9pbWFnZShldmVudCwgY2FuLCAiaGkiLCB0YXJnZXQpCgkJCX0pLCBbbWRiLkVYUE9SVF0pCgkJfQoJfSwKCXRhYmxlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLk9yZGVyVGFibGUoY2FuLCB0YXJnZXQpLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBjaGF0LkNPTlRFTlQpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLlRELCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSkgfSkKCX0sCglpbWFnZTogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLyhjYW4udXNlci5pc01vYmlsZT8gMjogMSksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgl9LAoJZmllbGQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0LCB3aWR0aCkgeyB2YXIgaXRlbSA9IGNhbi5iYXNlLk9iaihkYXRhLm1ldGEpCgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwgaXRlbSwgW2NoYXQuUExVR0lOX1NUQVRFX0pTXSwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY2hhdC5TVE9SWSwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2RhdGEudHlwZSwgZGF0YS5uYW1lLCBkYXRhLnRleHRdLCBjbWRzKSwgY2IpCgkJCX0KCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBzdWIuQ29uZldpZHRoKGl0ZW0ud2lkdGggPSAod2lkdGh8fGNhbi5Db25mV2lkdGgoKSktKGNhbi51c2VyLmlzV2luZG93cz8gNDA6IDIwKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCgkJCWNhbi5jb3JlLlZhbHVlKGl0ZW0sICJhdXRvLmNtZCIpICYmIGNhbi5vbm1vdGlvbi5kZWxheShmdW5jdGlvbigpIHsKCQkJCXN1Yi5ydW5BY3Rpb24oc3ViLnJlcXVlc3Qoe30sIGNhbi5jb3JlLlZhbHVlKGl0ZW0sICJvcHRzIikpLCBjYW4uY29yZS5WYWx1ZShpdGVtLCAiYXV0by5jbWQiKSkKCQkJfSkKCQl9LCBjYW4uX291dHB1dCwgdGFyZ2V0KQoJfSwKCS8vIGxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkvLyB9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZTogewoJCW5vcm1hbDogewoJCQkibiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLm5leHQoY2FuLnN1YikgfSwKCQkJImoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5uZXh0KGNhbi5zdWIpIH0sCgkJCSJBcnJvd1JpZ2h0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubmV4dChjYW4uc3ViKSB9LAoJCQkiQXJyb3dMZWZ0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwucHJldihjYW4uc3ViKSB9LAoJCQkiayI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLnByZXYoY2FuLnN1YikgfSwKCQkJInAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5wcmV2KGNhbi5zdWIpIH0sCgoJCQkicSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsWyLnu5PmnZ8iXShldmVudCwgY2FuLnN1YikgfSwKCQkJImgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbFsi6ZqQ6JePIl0oZXZlbnQsIGNhbi5zdWIpIH0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsCglfdHJhbnM6IHt2aWV3OiAi6KeG5Zu+In0sCglwbGF5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBsaXN0ID0gW10sIGN1cnJlbnQgPSBbXQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCB3aWtpLklURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UudGFnaXMoWyJoMSIsICJoMiIsICJoMyJdLCBpdGVtKSAmJiBsaXN0LnB1c2goY3VycmVudCA9IFtdKSwgY3VycmVudC5wdXNoKGl0ZW0pCgkJfSkKCgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwge3R5cGU6ICJzdG9yeSB3b3JkIGZsb2F0In0sIFtdLCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGNhbi5ydW4sIHN1Yi5zdXAgPSBjYW4sIGNhbi5zdWIgPSBzdWIsIGNhbi5vbmFwcGVuZC5fYWN0aW9uKHN1YiwgWwoJCQkJWyLluIPlsYAiLCAi5byA6K6yIiwgIue9keagvCIsICLlv6vpl6oiXSwgIuWkp+e6siIsICLpppbpobUiLCAi5LiK5LiA6aG1IiwKCQkJCVsi6I+c5Y2VIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24ocGFnZSkgeyByZXR1cm4gcGFnZVswXS5pbm5lckhUTUwgfSkpLAoJCQkJIuS4i+S4gOmhtSIsICLpmpDol48iLCAi57uT5p2fIiwKCQkJXSwgc3ViLl9hY3Rpb24sIGNhbi5vbmRldGFpbCkKCgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAia2V5bWFwLmZvY3VzIiwgY2FuLnJlcXVlc3QoZXZlbnQsIHtjYjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCAibm9ybWFsIiwgY2FuLmtleWxpc3QpCgkJCX19KSksIGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5CQUNLR1JPVU5ELCBjYW4uX3Jvb3QuX3RhcmdldC5zdHlsZS5iYWNrZ3JvdW5kKQoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLkhFSUdIVCwgY2FuLl9yb290Ll9oZWlnaHQtNCpodG1sLlBMVUdJTl9NQVJHSU4tMipodG1sLkFDVElPTl9IRUlHSFQpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuV0lEVEgsIGNhbi5fcm9vdC5fd2lkdGgtNCpodG1sLlBMVUdJTl9NQVJHSU4pCgoJCQlzdWIudWkgPSBzdWIucGFnZS5BcHBlbmQoc3ViLCBzdWIuX291dHB1dCwgW3t2aWV3OiBjaGF0LlBST0pFQ1R9LCB7dmlldzogY2hhdC5DT05URU5UfV0pCgkJCWNhbi5jb3JlLkxpc3Qoc3ViLmxpc3QgPSBsaXN0LCBmdW5jdGlvbihwYWdlLCBpbmRleCkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCB7bmFtZTogcGFnZVswXS5pbm5lckhUTUx9LCBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmRldGFpbC5zaG93KHN1YiwgaW5kZXgpIAoJCQkJfSwgZnVuY3Rpb24oZXZlbnQpIHt9LCBzdWIudWkucHJvamVjdCkKCgkJCQlzdWIucGFnZS5BcHBlbmQoc3ViLCBzdWIudWkuY29udGVudCwgW3t2aWV3OiAicGFnZSIrKGluZGV4PT0wPyAiIGZpcnN0IjogIiIpLCBsaXN0OiBjYW4uY29yZS5MaXN0KHBhZ2UsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGRhdGEgPSBpdGVtLmRhdGFzZXR8fHt9CgkJCQkJc3dpdGNoIChkYXRhLnR5cGUpIHsKCQkJCQkJY2FzZSB3aWtpLlBSRU1FTlU6IGl0ZW0gPSBpdGVtLmNsb25lTm9kZShmYWxzZSk7IGJyZWFrCgkJCQkJCWNhc2UgY2hhdC5GSUVMRDogaXRlbSA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sIGNoYXQuU1RPUlksIGNhbi5iYXNlLk9iaihkYXRhLm1ldGEpLCBzdWIudWkuY29udGVudCkuZmlyc3Q7IGJyZWFrCgkJCQkJCWRlZmF1bHQ6IGl0ZW0gPSBpdGVtLmNsb25lTm9kZSh0cnVlKQoJCQkJCX0KCQkJCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgZGF0YS50eXBlXSwgW3N1YiwgZGF0YSwgaXRlbSwgY2FuLl9yb290Ll93aWR0aC00Kmh0bWwuUExVR0lOX01BUkdJTl0pLCBpdGVtCgkJCQl9KSwgfV0pCgkJCX0pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLnVpLnByb2plY3QpLCBjYW4ub25kZXRhaWwuc2hvdyhzdWIsIDApIAoKCQkJc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBbbWRiLlBBR0UsIGNsaS5GUk9NLCBjbGkuQ09TVF0pLCBzdWIuU3RhdHVzKGNsaS5GUk9NLCBjYW4uYmFzZS5UaW1lKCkpCgkJCXZhciBmcm9tID0gbmV3IERhdGUoKTsgY2FuLmNvcmUuVGltZXIoe2ludGVydmFsOiAxMDB9LCBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCkKCQkJCXN1Yi5TdGF0dXMoY2xpLkNPU1QsIGNhbi5iYXNlLkR1cmF0aW9uKG5vdy1mcm9tKSkKCQkJfSkKCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCX0sCgl2aWV3OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5faGVpZ2h0KSB7CgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQsIGNhbi5faGVpZ2h0KSwgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uc3VwLl9uYXZtZW51LCBjYW4uX2hlaWdodCksIGRlbGV0ZShjYW4uX2hlaWdodCkKCQl9IGVsc2UgeyBjYW4uX2hlaWdodCA9IGNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQsICIiKSwgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uc3VwLl9uYXZtZW51LCAiIikKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIGxpc3Q6IFsi5Yig6ZmkIl0sCglzaG93OiBmdW5jdGlvbihzdWIsIHdoaWNoKSB7IHN1Yi5wYWdlLnN0eWxlQ2xhc3Moc3ViLCBzdWIudWkuY29udGVudCwgY2hhdC5DT05URU5UKQoJCXN1Yi5wYWdlLlNlbGVjdChzdWIsIHN1Yi51aS5jb250ZW50LCB3aWtpLkRJVl9QQUdFLCBmdW5jdGlvbihwYWdlLCBpbmRleCkgewoJCQlpZiAoaW5kZXggPT0gd2hpY2ggfHwgcGFnZSA9PSB3aGljaCkgewoJCQkJc3ViLnBhZ2UuU2VsZWN0KHN1YiwgcGFnZSwgc3ViLnBhZ2UuS2V5cyhodG1sLkgxLCBodG1sLkgyLCBodG1sLkgzKSwgZnVuY3Rpb24oaXRlbSkgeyBzdWIuQWN0aW9uKCLoj5zljZUiLCBpdGVtLmlubmVySFRNTCkgfSkKCQkJCXN1Yi5vbm1vdGlvbi5zZWxlY3Qoc3ViLCBzdWIudWkucHJvamVjdCwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQlzdWIuU3RhdHVzKG1kYi5QQUdFLCBpbmRleCsxK2ljZS5QUytzdWIubGlzdC5sZW5ndGgpCgkJCQlzdWIucGFnZS5DbGFzc0xpc3QuYWRkKHN1YiwgcGFnZSwgaHRtbC5TSE9XKQoJCQl9IGVsc2UgewoJCQkJc3ViLnBhZ2UuQ2xhc3NMaXN0LmRlbChzdWIsIHBhZ2UsIGh0bWwuU0hPVykKCQkJfQoJCX0pCgl9LAoJbmV4dDogZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHN1Yi5jb3JlLktleXMod2lraS5ESVZfUEFHRSwgaWNlLlNIT1cpLCBmdW5jdGlvbihwYWdlKSB7CgkJCXBhZ2UubmV4dFNpYmxpbmc/IHN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UubmV4dFNpYmxpbmcpOiBzdWIudXNlci50b2FzdChzdWIsIGNsaS5FTkQpCgkJfSkKCX0sCglwcmV2OiBmdW5jdGlvbihzdWIpIHsKCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgc3ViLmNvcmUuS2V5cyh3aWtpLkRJVl9QQUdFLCBpY2UuU0hPVyksIGZ1bmN0aW9uKHBhZ2UpIHsKCQkJcGFnZS5wcmV2aW91c1NpYmxpbmc/IHN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UucHJldmlvdXNTaWJsaW5nKTogc3ViLnVzZXIudG9hc3Qoc3ViLCBjbGkuRU5EKQoJCX0pCgl9LAoJZmxhc2g6IGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5jb3JlLk5leHQoc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHdpa2kuRElWX1BBR0UpLCBmdW5jdGlvbihwYWdlLCBuZXh0KSB7CgkJCXN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UpLCBzdWIub25tb3Rpb24uZGVsYXkoc3ViLCBmdW5jdGlvbigpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCglncmlkOiBmdW5jdGlvbihzdWIpIHsgc3ViLnBhZ2Uuc3R5bGVDbGFzcyhzdWIsIHN1Yi51aS5jb250ZW50LCAiY29udGVudCBncmlkIikgfSwKCgki5byA6K6yIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLnNob3coY2FuLCAwKSB9LAoJIue9keagvCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5ncmlkKGNhbikgfSwKCSLlv6vpl6oiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuZmxhc2goY2FuKSB9LAoKCSLlpKfnurIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCkgfSwKCSLpppbpobUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIDApIH0sCgki5LiK5LiA6aG1IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLnByZXYoY2FuLCBjYW4udWkuY29udGVudCkgfSwKCSLoj5zljZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIGV2ZW50LnRhcmdldC5zZWxlY3RlZEluZGV4KSB9LAoJIuS4i+S4gOmhtSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5uZXh0KGNhbiwgY2FuLnVpLmNvbnRlbnQpIH0sCgki6ZqQ6JePIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki57uT5p2fIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgc3ViKSB7IHN1Yi5wYWdlLlJlbW92ZShzdWIsIHN1Yi5fdGFyZ2V0KSB9LAp9KQo=",
        "usr/volcanos/plugin/state.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjb25mLCBjYiwgdGFyZ2V0KSB7fSwKCV9wcm9jZXNzOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb25TdGF0dXMoKSAmJiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykgJiYgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvblN0YXR1cygpKSkKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgbXNnLk9wdGlvblByb2Nlc3MoKV0sIHtjYW46IGNhbiwgc3ViOiBjYW4sIG1zZzogbXNnfSkKCX0sCgoJX2xvY2F0aW9uOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBjYW4udXNlci5qdW1wcyhfYXJnKTsgcmV0dXJuIHRydWUgfSwKCV9yZXBsYWNlOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBsb2NhdGlvbi5yZXBsYWNlKF9hcmcpOyByZXR1cm4gdHJ1ZSB9LAoJX2hpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGhpc3RvcnkuYmFjaygpOyByZXR1cm4gdHJ1ZSB9LAoJX2NvbmZpcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7IGNhbi51c2VyLmNvbmZpcm0oX2FyZykgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbXNnKSwgImNvbmZpcm0iKTsgcmV0dXJuIHRydWUgfSwKCV9yZWZyZXNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5jb3JlLlRpbWVyKHBhcnNlSW50KG1zZy5PcHRpb24oIl9kZWxheSIpfHwiNTAwIiksIGZ1bmN0aW9uKCkgewoJCQljYW4uVXBkYXRlKGNhbi5yZXF1ZXN0KHt9LCB7X2NvdW50OiBwYXJzZUludChtc2cuT3B0aW9uKCJfY291bnQiKSktMX0pKQoJCX0pCgkJcmV0dXJuIHRydWUKCX0sCglfcmV3cml0ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5fYXJnLmxlbmd0aDsgaSArPSAyKSB7CgkJCWNhbi5PcHRpb24obXNnLl9hcmdbaV0sIG1zZy5fYXJnW2krMV0pLCBjYW4uQWN0aW9uKG1zZy5fYXJnW2ldLCBtc2cuX2FyZ1tpKzFdKQoJCX0KCQlyZXR1cm4gY2FuLlVwZGF0ZSgpCgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJcmV0dXJuIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpLCB0cnVlCgl9LAoJX2ZpZWxkOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IGl0ZW0udHlwZSA9IGNoYXQuU1RPUlksIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgaXRlbSwge3R5cGU6IGNoYXQuU1RPUlksIGFyZzogY2FuLmJhc2UuT2JqKGl0ZW1baWNlLkFSR10sIFtdKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIuQ29uZihjYW4uYmFzZS5PYmooaXRlbS5jb25mKSkKCQkJaWYgKHN1Yi5Db25mKCJtb2RlIikgPT0gInNpbXBsZSIpIHsKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdCgpOyBtc2cuRWNobyhzdWIuQ29uZigicmVzdWx0IikpCgkJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLzIpCgkJCQlyZXR1cm4gY2FuLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKXx8c3ViLkNvbmYoImZlYXR1cmUuZGlzcGxheSIpKQoJCQl9CgkJCXZhciBvcHQgPSBjYW4uYmFzZS5PYmooaXRlbVtpY2UuT1BUXSwgW10pCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsKCQkJCXZhciByZXMgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvcHQubGVuZ3RoOyBpICs9IDIpIHsgcmVzLk9wdGlvbihvcHRbaV0sIG9wdFtpKzFdKSB9CgkJCQljYW4ucnVuKGV2ZW50LCAobXNnW2ljZS5NU0dfUFJFRklYXXx8W10pLmNvbmNhdChjbWRzKSwgY2IsIHRydWUpCgkJCX0KCQl9KSB9KQoJCXJldHVybiB0cnVlCgl9LAoJX2lubmVyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRElTUExBWSwgaHRtbC5CTE9DSykKCQlyZXR1cm4gdHJ1ZQoJfSwKCglfaG9sZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIHRydWUgfSwKCV9iYWNrOiBmdW5jdGlvbihjYW4pIHsgY2FuLl9oaXN0b3J5LnBvcCgpCgkJZm9yICh2YXIgaGlzID0gY2FuLl9oaXN0b3J5LnBvcCgpOyBoaXM7IGhpcyA9IGNhbi5faGlzdG9yeS5wb3AoKSkgeyBpZiAoaGlzWzBdID09IGN0eC5BQ1RJT04pIHsgY29udGludWUgfQoJCQl2YXIgaW5kZXggPSAwCgkJCWNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS52YWx1ZSA9IGhpc1tpbmRleCsrXXx8IiIgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fYWN0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnZhbHVlID0gaGlzW2luZGV4KytdfHwiIiB9KQoJCQljYW4uVXBkYXRlKCk7IGJyZWFrCgkJfQoJCSFoaXMgJiYgY2FuLlVwZGF0ZSgpCgkJcmV0dXJuIHRydWUKCX0sCglfcmljaDogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRBQkxFX0NPTlRFTlQsIGh0bWwuVEJPRFldLCBmdW5jdGlvbih0YWJsZSkgewoJCQl2YXIgaGVhZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQUJMRV9DT05URU5ULCBodG1sLlRIXSwgZnVuY3Rpb24odGgpIHsgcmV0dXJuIHRoLmlubmVyVGV4dCB9KQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQlyZXR1cm4ge3JvdzogY2FuLmNvcmUuTGlzdChoZWFkLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV0gfSl9CgkJCX0pKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoJCXJldHVybiB0cnVlCgl9LAoJX2dyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7CgkJc3ViID0gY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpCgkJaWYgKHN1YiAmJiBzdWIub25pbXBvcnQgJiYgc3ViLm9uaW1wb3J0Lmdyb3cpIHsKCQkJc3ViLm9uaW1wb3J0Lmdyb3coc3ViLCBtc2csIF9hcmcpCgkJCXJldHVybiB0cnVlCgkJfQoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfQ09ERSwgZnVuY3Rpb24oZGl2KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZGl2LCBodG1sLk1BWF9IRUlHSFQsIDQwMCkKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZGl2LCBbe3RleHQ6IF9hcmd9XSkKCQkJZGl2LnNjcm9sbEJ5KDAsIDEwMDAwKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIF9hcmcpIH0KCQlyZXR1cm4gdHJ1ZQoJfSwKCV9vcGVuOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgewoJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBjYW4uVXBkYXRlKCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWwoJCSLliLfmlrDmlbDmja4iLCAi5YiH5o2i5YWo5bGPIiwgIuWFseS6q+W3peWFtyIsICLmiZPlvIDpk77mjqUiLCAi55Sf5oiQ6ZO+5o6lIiwgIueUn+aIkOiEmuacrCIsICLnlJ/miJDlm77niYciLCBbCgkJCSLlhbblroMiLCAi5Yi35paw6aG16Z2iIiwgIuS/neWtmOWPguaVsCIsICLmuIXnqbrlj4LmlbAiLCAi5omp5bGV5Y+C5pWwIiwgIuWkjeWItuaVsOaNriIsICLkuIvovb3mlbDmja4iLCAi5riF56m65pWw5o2uIiwgIuWIoOmZpOmFjee9riIsICLliKDpmaTlt6XlhbciLCLmkYTlg4/lpLQiLAoJCV0sCgldLAoJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBidXR0b25dLmNvbmNhdChjYW4uSW5wdXQoW10sIHRydWUpKSkgfSwKCgki5Yi35paw5pWw5o2uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKHt9LCBjYW4uSW5wdXQoW10sIHRydWUpKSB9LAoJIuWIh+aNouWFqOWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHN1YiA9IGNhbi5fb3V0cHV0c1tjYW4uX291dHB1dHMubGVuZ3RoLTFdCgkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBjYW4uX3RhcmdldCwgImZ1bGwiKSkgewoJCQl2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LShjYW4uX3N0YXR1cy5pbm5lclRleHQ/IDI6IDEpKmh0bWwuQUNUSU9OX0hFSUdIVDsgY2FuLnVzZXIuaXNNb2JpbGUgJiYgKGhlaWdodCAtPSAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJY2FuLl9tb2RlX2JhayA9IGNhbi5Nb2RlKCksIGNhbi5faGVpZ2h0X2JhayA9IHN1Yi5Db25mSGVpZ2h0KCksIGNhbi5fd2lkdGhfYmFrID0gc3ViLkNvbmZXaWR0aCgpCgkJCXN1Yi5Nb2RlKCJmdWxsIiksIGNhbi5Nb2RlKCJmdWxsIiksIGNhbi5Db25mSGVpZ2h0KGhlaWdodCksIGNhbi5Db25mV2lkdGgod2luZG93LmlubmVyV2lkdGgpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBzdWIuQ29uZkhlaWdodChoZWlnaHQpLCBodG1sLk1JTl9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aW5kb3cuaW5uZXJXaWR0aCkpCgkJfSBlbHNlIHsKCQkJY2FuLk1vZGUoY2FuLl9tb2RlX2Jha3x8IiIpLCBjYW4uQ29uZkhlaWdodChjYW4uX2hlaWdodF9iYWspLCBjYW4uQ29uZldpZHRoKGNhbi5fd2lkdGhfYmFrKQoJCQlzdWIuTW9kZShjYW4uX21vZGVfYmFrfHwiIiksIHN1Yi5Db25mSGVpZ2h0KGNhbi5faGVpZ2h0X2JhayksIHN1Yi5Db25mV2lkdGgoY2FuLl93aWR0aF9iYWspCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCAiIiwgaHRtbC5NSU5fV0lEVEgsICIiKQoJCX0KCQljYW4uY29yZS5DYWxsRnVuYyhbc3ViLCBjaGF0Lk9OSU1QT1JULCBodG1sLkxBWU9VVF0sIHtjYW46IHN1Yn0pCgl9LAoJIuWFseS6q+W3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IG1ldGEubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgbWV0YS5pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KGNhbi5JbnB1dChbXSwgdHJ1ZSkpLAoJCV0pCgl9LAoJIuaJk+W8gOmTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpLCBhcmdzID0gY2FuLk9wdGlvbigpOyBhcmdzLnJpdmVyID0gIiIsIGFyZ3Muc3Rvcm0gPSAiIgoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi51c2VyLmlzV2VpWGluPyBjYW4udXNlci5qdW1wcyhjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKTogY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKQoJfSwKCSLnlJ/miJDpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKSwgYXJncyA9IGNhbi5PcHRpb24oKQoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbXSwgW21kYi5MSU5LLCBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncykpXSkKCX0sCgki55Sf5oiQ6ISa5pysIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgY29uZiA9IGNhbi5Db25mKCkKCQl2YXIgYXJncyA9IGNhbi5JbnB1dCgiIiwgdHJ1ZSkuam9pbihpY2UuU1ApLCBsaXN0ID0gWwoJCQkiZXhwb3J0IGN0eF9kZXY9Iitsb2NhdGlvbi5vcmlnaW4rIjsgY3R4X3RlbXA9JChta3RlbXApOyBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCAkY3R4X2RldjsiKyIgc291cmNlICRjdHhfdGVtcCAiKyhjb25mLmluZGV4fHwiIikraWNlLlNQK2FyZ3MsCgkJCSJpc2hfc3lzX2Rldl9ydW5fY29tbWFuZCAiK2FyZ3MsICJpc2hfc3lzX2Rldl9ydW5fYWN0aW9uIiwgImlzaF9zeXNfZGV2X3J1bl9zb3VyY2UiLAoJCV0KCQljYW4udXNlci50b2FzdFNjcmlwdChjYW4sICc8ZGl2IGNsYXNzPSJzdG9yeSIgZGF0YS10eXBlPSJzcGFyayIsIGRhdGEtbmFtZT0ic2hlbGwiPicrCgkJCSc8bGFiZWw+JCA8L2xhYmVsPicrJzxzcGFuPicrbGlzdC5qb2luKCI8L3NwYW4+PGJyLz48bGFiZWw+JCA8L2xhYmVsPjxzcGFuPiIpKyc8L3NwYW4+JysnPC9kaXY+JywgY29uZi5pbmRleCtpY2UuU1ArYXJncykKCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGxpc3RbMF0pCgl9LAoJIueUn+aIkOWbvueJhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLl9uYW1lKSB9LAoKCSLliLfmlrDpobXpnaIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4uX291dHB1dHMsICItMSIpCgkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgIl9pbml0Il0sIHtjYW46IHN1YiwgbXNnOiBzdWIuX21zZywgY2I6IGZ1bmN0aW9uKG1zZykge30sIHRhcmdldDogY2FuLl9vdXRwdXR9KQoJfSwKCSLkv53lrZjlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5L+d5a2Y5Y+C5pWwIl0pIH0sCgki5riF56m65Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9vcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlID0gIiIgfSkgfSwKCSLmianlsZXlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX2FjdGlvbikgfSwKCSLlpI3liLbmlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbil8fGNhbi5vbmV4cG9ydC5ib2FyZChjYW4pKSB9LAoJIuS4i+i9veaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiZmlsZW5hbWUiLCB2YWx1ZTogbWV0YS5uYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbiksIGxpc3RbMF0sIG5mcy5DU1YpfHxjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjYW4ub25leHBvcnQuYm9hcmQoY2FuKSwgbWV0YS5uYW1lLCBuZnMuVFhUKQoJCX0pCgl9LAoJIua4heepuuaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki5Yig6Zmk5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaTphY3nva4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJjb25maWciLCBbInJlc2V0Il0pIH0sCgki5biu5Yqp5paH5qGjIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiaGVscCIpIH0sCgoJIuaJk+WMhemhtemdoiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJvbndlYnBhY2siLCBjYW4ucmVxdWVzdChldmVudCkpIH0sCgoJIuaRhOWDj+WktCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgY29uc3RyYWludHMgPSB7YXVkaW86IGZhbHNlLCB2aWRlbzoge3dpZHRoOiAyMDAsIGhlaWdodDogMjAwfX0KCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBjdHguQUNUSU9OfSwge3ZpZXc6ICJjYXB0dXJlIiwgbGlzdDogW3t0eXBlOiAidmlkZW8iLCBfaW5pdDogZnVuY3Rpb24oaXRlbSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKCQkJCWl0ZW0uc3JjT2JqZWN0ID0gc3RyZWFtLCBpdGVtLm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbihlKSB7CgkJCQkJaXRlbS5wbGF5KCkKCQkJCX0sIHVpLnN0cmVhbSA9IHN0cmVhbQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpOyB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsi5YWz6ZetIiwgIuaKk+aLjSJdLCB1aS5hY3Rpb24sIHsKCQkJIuaKk+aLjSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3t0eXBlOiAiY2FudmFzIiwgd2lkdGg6IHVpLnZpZGVvLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHVpLnZpZGVvLm9mZnNldEhlaWdodH1dKS5maXJzdAoJCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3tpbWc6IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpLCBzdHlsZToge3dpZHRoOiB1aS52aWRlby5vZmZzZXRXaWR0aCwgaGVpZ2h0OiB1aS52aWRlby5vZmZzZXRIZWlnaHR9fV0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW52YXMpCgkJCX0sCgkJCSLlhbPpl60iOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuTGlzdCh1aS5zdHJlYW0uZ2V0VHJhY2tzKCksIGZ1bmN0aW9uKHRyYWNrKSB7IHRyYWNrLnN0b3AoKSB9KQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuYWN0aW9uKQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkudmlkZW8pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5jYXB0dXJlKQoJCQl9LAoJCX0pCgl9LAoKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSB9LAoJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmlzRnVsbE1vZGUoKSkgewoJCQljYW4ub25hY3Rpb25bIuWIh+aNouWFqOWxjyJdKGV2ZW50LCBjYW4pCgkJfSBlbHNlIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl90YXJnZXQpCgkJfQoJfSwKCXVwbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci51cGxvYWQoZXZlbnQsIGNhbikgfSwKCWFjdGlvbnM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fYWN0aW9uKSB9LAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgbWRiLk5FWFQsIGNhbi5TdGF0dXMobWRiLlRPVEFMKXx8MCwgY2FuLk9wdGlvbihtZGIuTElNSVQpfHxjYW4uQWN0aW9uKG1kYi5MSU1JVCl8fCIiLCBjYW4uT3B0aW9uKG1kYi5PRkZFTkQpfHxjYW4uQWN0aW9uKG1kYi5PRkZFTkQpfHwiIl0pIH0sCglwcmV2OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBtZGIuUFJFViwgY2FuLlN0YXR1cyhtZGIuVE9UQUwpfHwwLCBjYW4uT3B0aW9uKG1kYi5MSU1JVCl8fGNhbi5BY3Rpb24obWRiLkxJTUlUKXx8IiIsIGNhbi5PcHRpb24obWRiLk9GRkVORCl8fGNhbi5BY3Rpb24obWRiLk9GRkVORCl8fCIiXSkgfSwKCWNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdmFsdWUsIGNiKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGlucHV0KSB7CgkJCWlmIChpbnB1dC5uYW1lID09IG5hbWUgJiYgdmFsdWUgIT0gaW5wdXQudmFsdWUpIHsgaW5wdXQudmFsdWUgPSB2YWx1ZQoJCQkJdmFyIGRhdGEgPSBpbnB1dC5kYXRhc2V0fHx7fTsgY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KCksIGNiKQoJCQkJcmV0dXJuIGlucHV0CgkJCX0KCQl9KQoJfSwKCglvcGVuTG9jYXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuYWdlbnQub3BlbkxvY2F0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSkgfSwKCWdldExvY2F0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihkYXRhKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBkYXRhKQoJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVCwgImxhdGl0dWRlIiwgImxvbmdpdHVkZSJdLCBmdW5jdGlvbihhcmdzKSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MpCgkJCX0pCgkJfSkKCX0sCglnZXRDbGlwYm9hcmREYXRhOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQlmdW5jdGlvbiBhZGQodGV4dCkgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtjYW4uYmFzZS5QYXJzZUpTT04odGV4dCldKSB9CgkJbmF2aWdhdG9yLmNsaXBib2FyZD8gbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4oYWRkKS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVycikgfSk6CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogbWRiLlRFWFR9XSwgZnVuY3Rpb24obGlzdCkgeyBhZGQobGlzdFswXSkgfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXRhYmxlOiBmdW5jdGlvbihjYW4pIHsgdmFyIG1zZyA9IGNhbi5fbXNnOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgcmVzID0gW21zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZC5qb2luKGljZS5GUyldOyBtc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgsIGFycmF5KSB7CgkJCXJlcy5wdXNoKGNhbi5jb3JlLkl0ZW0obGluZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gdmFsdWUgfSkuam9pbihpY2UuRlMpKQoJCX0pCgkJcmV0dXJuIHJlcy5qb2luKGljZS5OTCkKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuKSB7IHZhciBtc2cgPSBjYW4uX21zZzsgcmV0dXJuIG1zZy5SZXN1bHQoKSB9LAp9KQo=",
        "usr/volcanos/plugin/story/form.css": "ZGl2Lm91dHB1dC5mb3JtIGRpdi5pdGVtIHsKCXBhZGRpbmc6NDBweDsKfQo=",
        "usr/volcanos/plugin/story/form.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAiZm9ybSIpCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAibmFtZSIpCgkJbXNnLlB1c2goInZhbHVlIiwgImhhcnZleXNoYW8iKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAia2V5IikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAiYWdlIikKCQltc2cuUHVzaCgidmFsdWUiLCAiMTgiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAic2VsZWN0IikKCQltc2cuUHVzaCgibmFtZSIsICJtYWxlIikKCQltc2cuUHVzaCgidmFsdWUiLCAibWFsZSxmZW1hbGUiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dGFyZWEiKQoJCW1zZy5QdXNoKCJuYW1lIiwgImludHJvIikKCQltc2cuUHVzaCgidmFsdWUiLCAicHJvZ3JhbSIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJidXR0b24iKQoJCW1zZy5QdXNoKCJuYW1lIiwgInN1Ym1pdCIpCgkJbXNnLlB1c2goInZhbHVlIiwgIuaPkOS6pCIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQl2YXIgYWN0aW9uID0gIiI7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCXN3aXRjaCAodmFsdWUudHlwZSkgewoJCQkJY2FzZSBodG1sLkJVVFRPTjogYWN0aW9uID0gYWN0aW9ufHx2YWx1ZS5uYW1lCgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuSU5QVVQsIHN0eWxlOiB7d2lkdGg6IChjYW4uQ29uZldpZHRoKCktOTApLzJ9LCBkYXRhOiB7dHlwZTogdmFsdWUudHlwZSwgdmFsdWU6IHZhbHVlLnZhbHVlfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCXZhciBhcmdzID0gW2N0eC5BQ1RJT04sIGFjdGlvbl0KCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgIi5hcmdzIiwgZnVuY3Rpb24oaXRlbSkgeyBhcmdzLnB1c2goaXRlbS5uYW1lLCBpdGVtLnZhbHVlKX0pCgkJCQkJCQljYW4ucnVuKGV2ZW50LCBhcmdzKQoJCQkJCQl9fV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlNFTEVDVDoKCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbCgkJCQkJCXt2aWV3OiBbImxhYmVsIl0sIGxpc3Q6IFt7dGV4dDogdmFsdWUubmFtZX1dfSwKCQkJCQkJe3ZpZXc6IFsiaW5wdXQiXSwgbGlzdDogW3t0eXBlOiBodG1sLlNFTEVDVCwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LAoJCQkJCQkJZGF0YTogdmFsdWUsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodmFsdWUudmFsdWUpLCBmdW5jdGlvbih2KSB7IHJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIG5hbWU6IHYsIHZhbHVlOiB2LCBpbm5lcjogdn0gfSkgfV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlRFWFRBUkVBOgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6ICJpbnB1dCIsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQl9CgkJfSkKCX0sCn0sIFsiIl0pCg==",
        "usr/volcanos/plugin/story/json.css": "ZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDAwMDsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gZGl2Lml0ZW0geyBwYWRkaW5nLWxlZnQ6MTVweDsgYm9yZGVyOnNvbGlkIDFweCAjMDAwMDAwMGQ7IGJvcmRlci1sZWZ0OmRhc2hlZCAxcHggbGlnaHRibHVlOyBtYXJnaW4tbGVmdDo1cHg7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIGRpdi5pdGVtOmhvdmVyIHsgYm9yZGVyOnNvbGlkIDFweCByZWQ7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ubm9uY2UgeyBjb2xvcjojOWNiZWNhNGY7IGN1cnNvcjpwb2ludGVyOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOnllbGxvdzsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5zdHJpbmcgeyBjb2xvcjptYWdlbnRhOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmNvbnN0IHsgY29sb3I6Y3lhbjsgfQoK",
        "usr/volcanos/plugin/story/json.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAianNvbiIpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSwgY2FuLm9uaW1wb3J0LnNob3coY2FuLCBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpLCB7fSksIHRhcmdldCkKCX0sCglzaG93OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWZ1bmN0aW9uIHNob3coZGF0YSwgdGFyZ2V0LCBpbmRleCwgdG90YWwpIHsgdmFyIGxpc3QKCQkJc3dpdGNoICh0eXBlb2YgZGF0YSkgewoJCQkJY2FzZSBsYW5nLk9CSkVDVDoKCQkJCQlpZiAoZGF0YSA9PSBudWxsKSB7CgkJCQkJCWxpc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogIm51bGwifV0pLml0ZW0KCQkJCQkJYnJlYWsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gd3JhcChiZWdpbiwgZW5kLCBhZGQsIGNiKSB7CgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBiZWdpbn1dKQoJCQkJCQlhZGQgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFsiLi4uIiwgaHRtbC5TUEFOLCAibm9uY2UiXX1dKSwgY2IoKQoJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogZW5kfV0pCgkJCQkJfQoJCQkJCWZ1bmN0aW9uIHRvZ2dsZShsaXN0KSB7IGxpc3QgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGxpc3QpIH0KCQkJCQlmdW5jdGlvbiBfaXRlbSgpIHsKCQkJCQkJbGlzdCA9IGxpc3QgfHwgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGh0bWwuTElTVH1dKS5saXN0CgkJCQkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBsaXN0LCBbe3ZpZXc6IGh0bWwuSVRFTX1dKS5pdGVtCgkJCQkJfQoKCQkJCQlpZiAoY2FuLmJhc2UuaXNBcnJheShkYXRhKSkgeyAvLyDmlbDnu4QKCQkJCQkJd3JhcCgiWyIsICJdIiwgZGF0YS5sZW5ndGggPiAwLCBmdW5jdGlvbigpIHsgY2FuLmNvcmUuTGlzdChkYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIGl0ZW0gPSBfaXRlbSgpCgkJCQkJCQlzaG93KHZhbHVlLCBpdGVtLCBpbmRleCwgZGF0YS5sZW5ndGgpCgkJCQkJCX0pIH0pCgkJCQkJfSBlbHNlIHsgLy8g5a+56LGhCgkJCQkJCXZhciBsZW5ndGggPSBjYW4uY29yZS5JdGVtKGRhdGEpLmxlbmd0aCwgY291bnQgPSAwCgkJCQkJCXdyYXAoInsiLCAifSIsIGxlbmd0aCA+IDAsIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5JdGVtKGRhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgdmFyIGl0ZW0gPSBfaXRlbSgpCgkJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBpdGVtLCBbe3RleHQ6IFsnIicra2V5KyciJywgaHRtbC5TUEFOLCAia2V5Il0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHRvZ2dsZShzdWIpIH19LCB7dGV4dDogJzogJ31dKQoJCQkJCQkJdmFyIHN1YiA9IHNob3codmFsdWUsIGl0ZW0sIGNvdW50KyssIGxlbmd0aCkKCQkJCQkJfSkgfSkKCQkJCQl9CgkJCQkJYnJlYWsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IC8qIOWtl+S4siAqLyBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWyciJytkYXRhKyciJywgaHRtbC5TUEFOLCBsYW5nLlNUUklOR119XSk7IGJyZWFrCgkJCQlkZWZhdWx0OiAvKiDlhbblroMgKi8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFsnJytkYXRhKycnLCBodG1sLlNQQU4sICJjb25zdCJdfV0pCgkJCX0KCQkJKGluZGV4IDwgdG90YWwtMSkgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IGljZS5GU31dKQoJCQlyZXR1cm4gbGlzdAoJCX07IHNob3coZGF0YSwgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGh0bWwuSVRFTX1dKS5pdGVtLCAwLCAwKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbIuWxleW8gCIsICLmipjlj6AiLCAi5aSN5Yi2Il0sCgki5bGV5byAIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfTElTVF0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGxpc3QsIHRydWUpCgkJfSkKCX0sCgki5oqY5Y+gIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfTElTVF0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGxpc3QpCgkJfSkKCX0sCgki5aSN5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLl9tc2cuUmVzdWx0KCkpCgl9LAp9KQo=",
        "usr/volcanos/plugin/story/media.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQp9fSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbIuaJk+W8gOWxj+W5lSIsICLmiZPlvIDmkYTlg48iLCAi5omT5byA5b2V6Z+zIl0sCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGNiKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogaHRtbC5BQ1RJT059LCB7dmlldzogaHRtbC5PVVRQVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNiKGl0ZW0sIHVpKSB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIHsKCQkJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uY29yZS5MaXN0KHVpLnN0cmVhbS5nZXRUcmFja3MoKSwgZnVuY3Rpb24odHJhY2spIHsgdHJhY2suc3RvcCgpIH0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5hY3Rpb24pLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5vdXRwdXQpCgkJCX0sCgkJCSLmipPmi40iOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIGNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm91dHB1dCwgW3t0eXBlOiBodG1sLkNBTlZBU31dKS5maXJzdDsgY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkub3V0cHV0LCBbe2ltZzogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyksIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKX19XSkKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCQkJfSwKCQkJIuW9leWItiI6IGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmJsb2JzID0gW10KCQkJCXVpLm1lZGlhUmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcih1aS5zdHJlYW0sIHttaW1lVHlwZTogJ3ZpZGVvL3dlYm0nfSkKCQkJCXVpLm1lZGlhUmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gKGUpID0+IHsgdWkuYmxvYnMucHVzaChlLmRhdGEpLCBjYW4ubWlzYy5Mb2codWkuYmxvYnMubGVuZ3RoKSB9CgkJCQl1aS5tZWRpYVJlY29yZGVyLnN0YXJ0KDEwMCkKCQkJfSwKCQkJIuWbnuaUviI6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBibG9icyA9IHVpLmJsb2JzOyB1aS5ibG9icyA9IFtdCgkJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5vdXRwdXQsIFt7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfX1dKS52aWRlbwoJCQkJdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihibG9icywge3R5cGUgOiAndmlkZW8vd2VibSd9KSksIHZpZGVvLnBsYXkoKQoJCQl9LAoJCQki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYih1aS5ibG9icywge3R5cGU6ICd2aWRlby93ZWJtJ30pKSwgJ3JlY29yZC53ZWJtJykKCQkJfSwKCQl9KQoJfSwKCSLmiZPlvIDlsY/luZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9uYWN0aW9uLl9hY3Rpb24oY2FuLCBmdW5jdGlvbihpdGVtLCB1aSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpfX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7IHVpLnN0cmVhbSA9IHN0cmVhbQoJCQkJaXRlbS5zcmNPYmplY3QgPSBzdHJlYW0sIGl0ZW0ub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsgaXRlbS5wbGF5KCkgfQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVyci5uYW1lICsgIjogIiArIGVyci5tZXNzYWdlKSB9KQoJCX0pCgl9LAoJIuaJk+W8gOaRhOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25hY3Rpb24uX2FjdGlvbihjYW4sIGZ1bmN0aW9uKGl0ZW0sIHVpKSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHt2aWRlbzoge3dpZHRoOiBjYW4uQ29uZldpZHRoKCl9fSkudGhlbihmdW5jdGlvbihzdHJlYW0pIHsgdWkuc3RyZWFtID0gc3RyZWFtCgkJCQlpdGVtLnNyY09iamVjdCA9IHN0cmVhbSwgaXRlbS5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyBpdGVtLnBsYXkoKSB9CgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCn0pCg==",
        "usr/volcanos/plugin/story/parse.js": "Vm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBsaXN0OiBbInsiLCAifSIsIGh0bWwuSEVBRCwgaHRtbC5MRUZULCBodG1sLk1BSU4sIGh0bWwuRk9PVF0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgaGVpZ2h0KSB7IHZhciBzdGFjayA9IFt7X2RlZXA6IC0xLCBsaXN0OiBbXX1dLCBmaW5pc2ggPSBmYWxzZQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodGV4dCwgaWNlLk5MLCBpY2UuTkwsIGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgaWYgKGxpbmUgPT0gIiIgfHwgZmluaXNoKSB7IHJldHVybiB9CgkJCXZhciBkZWVwID0gMDsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7IGlmIChsaW5lW2ldID09IGljZS5TUCkgeyBkZWVwKysgfSBlbHNlIGlmIChsaW5lW2ldID09IGljZS5UQikgeyBkZWVwICs9IDQgfSBlbHNlIHsgYnJlYWsgfSB9CgkJCWZvciAodmFyIGkgPSBzdGFjay5sZW5ndGgtMTsgaSA+IDA7IGktLSkgeyBpZiAoZGVlcCA8PSBzdGFja1tpXS5fZGVlcCkgeyBzdGFjay5wb3AoKSB9IH0KCgkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpOyBpZiAobHNbMF0gPT0gInJldHVybiAiKSB7IHJldHVybiBmaW5pc2ggPSB0cnVlIH0KCQkJdmFyIGl0ZW0gPSB7X2RlZXA6IGRlZXAsIGxpc3Q6IFtdfTsgdmFyIGxpc3QgPSBzdGFja1tzdGFjay5sZW5ndGgtMV07IGxpc3QubGlzdC5wdXNoKGl0ZW0pOyBpZiAoZGVlcCA+IGxpc3QuX2RlZXApIHsgc3RhY2sucHVzaChpdGVtKSB9CgkJCWNhbi5vbmFwcGVuZC5saXN0LmluZGV4T2YobHNbMF0pID4gLTEgfHwgY2FuLm9uYXBwZW5kW2xzWzBdXT8gaXRlbS50eXBlID0gbHNbMF06IGl0ZW0ubmFtZSA9IGxzWzBdCgkJCWZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgbHNbaV0sIGxzW2krMV0pIH0KCQl9KQoJCXJldHVybiB7dHlwZTogbmFtZSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKXx8d2luZG93LmlubmVySGVpZ2h0fSwgbGlzdDogc3RhY2tbMF0ubGlzdH0KCX0sCglwYXJzZTogZnVuY3Rpb24oY2FuLCBsaXN0LCB0YXJnZXQsIGtleXMsIGRhdGEsIHR5cGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dCwgZGF0YSA9IGRhdGF8fHt9CgkJaWYgKCFsaXN0KSB7IHJldHVybiB9IGVsc2UgaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24obWV0YSwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEsIHRhcmdldCwga2V5cywgZGF0YSwgdHlwZSkgfSkKCgkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc1N0cmluZyhsaXN0KSkgewoJCQl2YXIgbHMgPSBjYW4uY29yZS5TcGxpdChsaXN0LCAiIiwgIjo9QCIpOyBpZiAobHMubGVuZ3RoID09IDEpIHsKCQkJCXZhciBtZXRhID0gdHlwZT8ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfToge3R5cGU6IGxzWzBdfQoJCQl9IGVsc2UgewoJCQkJdmFyIG1ldGEgPSB7bmFtZTogbHNbMF19OyBmb3IgKHZhciBpID0gMTsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IHN3aXRjaCAobHNbaV0pIHsKCQkJCQljYXNlICJAIjogbWV0YS5hY3Rpb24gPSBsc1tpKzFdOyBicmVhawoJCQkJCWNhc2UgIj0iOiBtZXRhLnZhbHVlID0gbHNbaSsxXTsgYnJlYWsKCQkJCQljYXNlICI6IjogbWV0YS50eXBlID0gbHNbaSsxXTsgYnJlYWsKCQkJCX0gfQoJCQl9CgoJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QobGlzdCkpIHsgdmFyIG1ldGEgPSBsaXN0IH0KCgkJdmFyIGl0ZW0gPSB7dmlldzogbWV0YS50eXBlfTsgc3dpdGNoIChtZXRhLnR5cGUpIHsKCQkJY2FzZSBodG1sLkhFQUQ6IG1ldGEuc3VidHlwZSA9IGh0bWwuTUVOVQoJCQkJbWV0YS5pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGh0bWwuTEFZT1VUKSwgZGF0YS5oZWFkID0gdGFyZ2V0IH0KCQkJCWJyZWFrCgkJCWNhc2UgInsiOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTEVGVCAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTEVGVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5JVEVNCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmxlZnQgPSB0YXJnZXQKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSkKCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgIn0iOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTUFJTiAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTUFJTjoKCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSwgZGF0YS5tYWluPyAxMDogMTAwKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgd2lkdGggPSB0YXJnZXQucGFyZW50Tm9kZS5vZmZzZXRXaWR0aAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgaHRtbC5ESVZfTEFZT1VUX0xFRlQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQl3aWR0aCAtPSBpdGVtLm9mZnNldFdpZHRoIC8vIOWuveW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQkJCX0sIGRhdGEubWFpbj8gMTA6IDEwMCkKCgkJCQkJaWYgKCFkYXRhLm1haW4pIHsgZGF0YS5tYWluID0gdGFyZ2V0CgkJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBkYXRhLm1haW5faW5pdCAmJiBkYXRhLm1haW5faW5pdCgpIH0sIDMwMCkKCQkJCQl9CgkJCQl9CgkJCQlicmVhawoJCQljYXNlIGh0bWwuRk9PVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5NRU5VCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmZvb3QgPSB0YXJnZXQgfQoJCQkJYnJlYWsKCQkJZGVmYXVsdDogdmFyIGNiID0gY2FuLm9uYXBwZW5kW21ldGEudHlwZV07IGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobWV0YS5zdHlsZSkpIHsgaXRlbS5zdHlsZSA9IG1ldGEuc3R5bGUgfQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhtZXRhLnN0eWxlKSkgeyBpdGVtLmNsYXNzTmFtZSA9IG1ldGEuc3R5bGUgfQoKCQltZXRhLmtleXMgPSBtZXRhLmtleXN8fGNhbi5jb3JlLktleXMoa2V5cywgbWV0YS5uYW1lfHxtZXRhLnR5cGUpIAoJCXZhciBjYiA9IGNhbi5vbmFwcGVuZFt0eXBlXTsgIWNhbi5vbmFwcGVuZFttZXRhLnR5cGVdICYmIGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCWl0ZW0uX2luaXQgPSBpdGVtLl9pbml0fHxmdW5jdGlvbih0YXJnZXQpIHsgbWV0YS5saXN0ICYmIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEubGlzdCwgdGFyZ2V0LCBtZXRhLmtleXMsIGRhdGEsIG1ldGEuc3VidHlwZXx8dHlwZSkgfQoJCWl0ZW0udGFyZ2V0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaXRlbV0pLmZpcnN0OyBtZXRhLmluaXQgJiYgbWV0YS5pbml0KGl0ZW0udGFyZ2V0KQoJCWNhbi5jb3JlLkl0ZW1DQihtZXRhLCBmdW5jdGlvbihrZXksIGNiKSB7IGl0ZW0udGFyZ2V0W2tleV0gPSBjYW4uYmFzZS5pc0Z1bmMoY2IpPyBjYjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNiLCBjYW4ucmVxdWVzdChldmVudCwgbWV0YSkpIH0gfSkKCX0sCgl1c2VybmFtZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiBbYWFhLlVTRVJOQU1FLCBodG1sLkRJVl0sIGxpc3Q6IFt7dmlldzogW2h0bWwuTkFNRSwgaHRtbC5ESVYsIGNhbi51c2VyLmluZm8udXNlcm5pY2tdfSwge3ZpZXc6IFtodG1sLklDT04sIGh0bWwuRElWXSwgbGlzdDogW3tpbWc6IGNhbi51c2VyLmluZm8uYXZhdGFyfV19XX0pCgl9LAoJbWVudTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIG1ldGEubGlzdCAmJiBtZXRhLmxpc3QubGVuZ3RoID4gMD8ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIHt9LCBjYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5uYW1lIH0pLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgYnV0dG9uKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IGJ1dHRvbn0pKQoJCQl9KQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fToge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgbWV0YS5uYW1lKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IG1ldGEubmFtZX0pKQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fSkKCX0sCglpdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCwgZGF0YSkgeyBpdGVtLnZpZXcgPSBpdGVtLnZpZXd8fGh0bWwuTElTVAoJCWlmIChkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaCkgPT0gIiMiK21ldGEua2V5cykgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoJCWlmIChtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAhbG9jYXRpb24uaGFzaCkgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiAic29tZSIsIGxpc3Q6IFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIG1ldGEubmFtZXx8bWV0YV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCX19LCB7dmlldzogaHRtbC5MSVNULCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IG1ldGEubGlzdCAmJiBjYW4ub25hcHBlbmQucGFyc2UoY2FuLCBtZXRhLmxpc3QsIHRhcmdldCwgbWV0YS5rZXlzLCBkYXRhLCBodG1sLklURU0pIH19XSwgX2luaXQ6IGZ1bmN0aW9uKCkge319KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0KSB7CgkJaXRlbS5saXN0ID0gW3t2aWV3OiAibmFtZSJ9LCB7dmlldzogaHRtbC5QQUdFfV0sIGl0ZW0uX2luaXQgPSBmdW5jdGlvbihfdGFyZ2V0LCB1aSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5wYWdlLCBbe3ZpZXc6IGh0bWwuSU5QVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5JTlBVVCwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIF90YXJnZXQsIFtodG1sLkRJVl9QQUdFLCBodG1sLkRJVl9JVEVNXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLkhJREUsIGl0ZW0uaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA9PSAtMSkKCQkJCX0pCgkJCX19XX1dKQoJCQljYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm5hbWUsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubmFtZXx8aXRlbV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIF90YXJnZXQsIFtbaHRtbC5ESVZfUEFHRSwgaHRtbC5ESVZfTElTVF1dLCBpbmRleCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQkJdWkucGFnZS5zY3JvbGxUbygwLCAwKQoJCQkJfX1dKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkucGFnZSwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLCBodG1sLlNFTEVDVCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQl9fSwge3ZpZXc6IFtodG1sLkxJU1RdLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgaXRlbS5saXN0LCB0YXJnZXQsIGNhbi5jb3JlLktleXMobWV0YS5rZXlzLCBpdGVtLm5hbWUpLCBkYXRhLCBodG1sLklURU0pCgkJCQl9fV0pCgkJCX0pCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wYWdlLCBodG1sLkhFSUdIVCwgaGVpZ2h0LTEwLShtZXRhLnN0eWxlPyAwOiB1aS5uYW1lLm9mZnNldEhlaWdodCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIF90YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQtMTApCgkJCX0pLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNKVswXS5jbGljaygpCgkJfQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1ldGEsIGRhdGEpIHsgdmFyIHRhcmdldCA9IGRhdGEubWFpbgoJCWlmICghbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCXZhciB1cmwgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sICJwb2QiKSwgY21kOiBtZXRhLmluZGV4fSkKCQlpZiAobWV0YS5hY3Rpb24gPT0gInB1c2giKSB7IHJldHVybiBjYW4udXNlci5qdW1wcyh1cmwpIH0KCQlpZiAobWV0YS5hY3Rpb24gPT0gIm9wZW4iKSB7IHJldHVybiBjYW4udXNlci5vcGVuKHVybCkgfQoKCQlsb2NhdGlvbi5oYXNoID0gbWV0YS5rZXlzCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0YS5rZXlzIH0sIHRhcmdldCkpIHsgcmV0dXJuIH0KCgkJaWYgKGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuWk1MIHx8IGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuSU1MKSB7CgkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JRlJBTUUsIHNyYzogIi9jaGF0L2NtZC8iK21ldGEuaW5kZXgsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCwgd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aH1dKQoJCX0KCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogbWV0YS5pbmRleCwgYXJnczogY2FuLmJhc2UuT2JqKG1ldGEuYXJncyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleHx8bWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLkNvbmZIZWlnaHQodGFyZ2V0Lm9mZnNldEhlaWdodC0zKmh0bWwuQUNUSU9OX0hFSUdIVC02Kmh0bWwuUExVR0lOX01BUkdJTiksIHN1Yi5Db25mV2lkdGgodGFyZ2V0Lm9mZnNldFdpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCg==",
        "usr/volcanos/plugin/story/pie.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCXZhciBjb2xvciA9IFtjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRV0KCQl2YXIgY29sb3IgPSBbIiMzMzAwRkYiLCAiIzIxOTZGMyIsICIjNENBRjUwIiwgIiNDRERDMzkiLCAiI0ZGRUIzQiIsICIjOUMyN0IwIiwgIiM3OTU1NDgiLCAiIzYwN0Q4QiIsICIjQ0MzM0ZGIl0KCQl2YXIgaGVpZ2h0ID0gbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGNhbi5Db25mSGVpZ2h0KCkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAiZHJhdyIpCgkJY2FuLnJlcXVpcmUoWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQuX3Nob3coY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIFtdLmNvbmNhdChtc2cuYXBwZW5kLCBbIndlaWdodCJdKSkKCQkJdmFyIG1hcmdpbiA9IGhlaWdodC84LCByID0gaGVpZ2h0LzItbWFyZ2luOyBjYW4uc3ZnLlZhbChodG1sLldJRFRILCAyKihyK21hcmdpbikpLCBjYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgMioocittYXJnaW4pKQoJCQljYW4ub25pbXBvcnQuX2RyYXcoY2FuLCBtc2csIGNhbi5Db25mKG1kYi5GSUVMRCksIGNvbG9yLCByK21hcmdpbiwgcittYXJnaW4sIHIsIG1hcmdpbiwgMCkKCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCktaGVpZ2h0KQoJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgdHJ1ZSkKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBudWxsLCBjYW4udWkucHJvamVjdCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLlRSLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRyLCB7b25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmltcG9ydC5fZHJhdyhjYW4sIG1zZywgY2FuLkNvbmYobWRiLkZJRUxEKSwgY29sb3IsIHIrbWFyZ2luLCByK21hcmdpbiwgciwgbWFyZ2luLCBpbmRleC0xKQoJCQkJfX0pCgkJCX0pCgkJfSkKCX0sCglfZHJhdzogZnVuY3Rpb24oY2FuLCBtc2csIGZpZWxkLCBjb2xvciwgeCwgeSwgciwgbWFyZ2luLCB3aGljaCkgeyBmaWVsZCA9IGZpZWxkfHxtZGIuVkFMVUUKCQlmdW5jdGlvbiBwb3MoeCwgeSwgciwgYW5nbGUpIHsgYW5nbGUgLT0gOTA7IHJldHVybiBbeCArIHIgKiBNYXRoLmNvcyhhbmdsZSAqIE1hdGguUEkgLyAxODApLCB5ICsgciAqIE1hdGguc2luKGFuZ2xlICogTWF0aC5QSSAvIDE4MCldIH0KCQlmdW5jdGlvbiBwaWUoeCwgeSwgciwgYmVnaW4sIHNwYW4sIGNvbG9yLCBjYikgeyBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRILCBzdHlsZToga2l0LkRpY3QoCgkJCWh0bWwuU1RST0tFX1dJRFRILCAxLCBodG1sLlNUUk9LRSwgY29sb3IsIGh0bWwuRklMTCwgY29sb3IsICJkIiwgY2FuLmJhc2Uuam9pbnMoWwoJCQkJWyJNIiwgeCwgeV0sIFsiTCJdLmNvbmNhdChwb3MoeCwgeSwgciwgYmVnaW4pKSwgWyJBIiwgciwgciwgIjAiLCBzcGFuPjE4MD8gIjEiOiAiMCIsICIxIl0uY29uY2F0KHBvcyh4LCB5LCByLCBiZWdpbitzcGFuKSksIFsiWiJdCgkJCV0sIGljZS5TUCwgaWNlLkZTKSwKCQkpLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQpIH0gfSkgfQoKCQlpZiAod2hpY2ggPT0gY2FuLl9sYXN0KSB7IHJldHVybiB9IGNhbi5fbGFzdCA9IHdoaWNoCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZyksIGNhbi5zdmcuVmFsdWUobWRiLkNPVU5ULCAwKQoJCXZhciB0b3RhbCA9IDA7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyB0b3RhbCArPSBjYW4ub25pbXBvcnQuX3BhcnNlSW50KGNhbiwgdmFsdWVbZmllbGRdKSB9KQoJCXZhciBiZWdpbiA9IDA7IG1zZ1tjbGkuQ09MT1JdID0gW10sIG1zZ1sid2VpZ2h0Il0gPSBbXSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgc3BhbiA9IGNhbi5vbmltcG9ydC5fcGFyc2VJbnQoY2FuLCB2YWx1ZVtmaWVsZF0pL3RvdGFsKjM2MAoJCQl2YXIgcCA9IGluZGV4PT13aGljaD8gcG9zKHgsIHksIG1hcmdpbiwgYmVnaW4rc3Bhbi8yKTogW3gsIHldLCBjID0gY29sb3JbaW5kZXglY29sb3IubGVuZ3RoXQoKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAxKSB7CgkJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5DSVJDTEUsIHBvaW50OiBbe3g6IHgsIHk6IHl9LCB7eDogeCwgeTogeStyfV0sIHN0eWxlOiB7ZmlsbDogY29sb3JbMF19fSkKCQkJfSBlbHNlIHsKCQkJCXBpZShwWzBdLCBwWzFdLCByLCBiZWdpbiwgc3BhbiwgYywgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uaW1wb3J0Ll9kcmF3KGNhbiwgbXNnLCBmaWVsZCwgY29sb3IsIHgsIHksIHIsIG1hcmdpbiwgaW5kZXgpIH0pLCBiZWdpbiArPSBzcGFuCgkJCX0KCQkJbXNnLlB1c2goY2xpLkNPTE9SLCAnPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6JytjKyciPiAgICAgPC9zcGFuPicpCgkJCW1zZy5QdXNoKCJ3ZWlnaHQiLCBwYXJzZUludChzcGFuKjEwMC8zNjApKyIlIikKCQkJaWYgKGluZGV4ID09IHdoaWNoKSB7IGNhbi5TdGF0dXModmFsdWUpLCBjYW4uU3RhdHVzKCJ3ZWlnaHQiLCBwYXJzZUludChzcGFuKjEwMC8zNjApKyIlIikgfQoJCX0pCgl9LAoJX3BhcnNlSW50OiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAibWkiKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAiZ2kiKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAiZyIpKSB7IHJldHVybiBwYXJzZUludCh2YWx1ZSkqMTAwMDAwMDAwMCB9CgkJaWYgKGNhbi5iYXNlLmVuZFdpdGgodmFsdWUsICJtIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwIH0KCQlyZXR1cm4gcGFyc2VJbnQodmFsdWUpCgl9Cn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgX3Nob3c6IGZ1bmN0aW9uKGNhbikge319KQo=",
        "usr/volcanos/plugin/story/spide.css": "ZmllbGRzZXQuZHJhdy5zcGlkZSBkaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5Om5vbmU7IH0K",
        "usr/volcanos/plugin/story/spide.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCgkJY2FuLkNvbmZEZWZhdWx0KHtyb290OiAiaWNlIiwgZmllbGQ6IG1zZy5hcHBlbmRbMF0sIHNwbGl0OiBpY2UuUFN9KQoJCWNhbi5kaXJfcm9vdCA9IG1zZy5PcHRpb24obmZzLkRJUl9ST09UKXx8Y2FuLkNvbmYoInJvb3QiKQoJCWNhbi5fdHJlZSA9IGNhbi5vbmltcG9ydC5fdHJlZShjYW4sIG1zZy5UYWJsZSgpLCBjYW4uQ29uZihtZGIuRklFTEQpLCBjYW4uQ29uZihsZXguU1BMSVQpKQoJCWlmICghY2FuLl90cmVlWyIiXSkgeyByZXR1cm4gfSBjYW4uX3RyZWVbIiJdLm5hbWUgPSBjYW4uQ29uZigicm9vdCIpCgoJCWNhbi5zaXplID0gcGFyc2VJbnQoY2FuLkFjdGlvbigic2l6ZSIpfHwyNCkKCQljYW4ubWFyZ2luID0gcGFyc2VJbnQoY2FuLkFjdGlvbigibWFyZ2luIil8fDMwKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgImRyYXciKQoJCWNhbi5yZXF1aXJlKFsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLCAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJfSkKCX0sCglfdHJlZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBmaWVsZCwgc3BsaXQpIHsKCQl2YXIgbm9kZSA9IHt9OyBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKCFpdGVtW2ZpZWxkXSkgeyByZXR1cm4gfQoJCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLnRyaW1QcmVmaXgoaXRlbVtmaWVsZF0sIGNhbi5kaXJfcm9vdCtzcGxpdCkuc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCQl2YXIgbGFzdCA9IGFycmF5LnNsaWNlKDAsIGluZGV4KS5qb2luKHNwbGl0KXx8IiIsIG5hbWUgPSBhcnJheS5zbGljZSgwLCBpbmRleCsxKS5qb2luKHNwbGl0KQoJCQkJaWYgKCF2YWx1ZSB8fCBub2RlW25hbWVdKSB7IHJldHVybiB9CgoJCQkJbm9kZVtsYXN0XSA9IG5vZGVbbGFzdF18fHtuYW1lOiBsYXN0LCBtZXRhOiB7fSwgbGlzdDogW119CgkJCQlub2RlW2xhc3RdLmxpc3QucHVzaChub2RlW25hbWVdID0gewoJCQkJCW5hbWU6IHZhbHVlKyhpbmRleD09YXJyYXkubGVuZ3RoLTE/ICIiOiBzcGxpdCksCgkJCQkJbWV0YTogaXRlbSwgbGlzdDogW10sIGxhc3Q6IG5vZGVbbGFzdF0sCgkJCQkJZmlsZTogaXRlbVtmaWVsZF18fGl0ZW0uZmlsZSwgaGlkZTogdHJ1ZSwKCQkJCX0pCgkJCX0pCgkJfSkKCQlyZXR1cm4gbm9kZQoJfSwKCV9oZWlnaHQ6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgZGVlcCkgeyBpZiAoIXRyZWUpIHsgcmV0dXJuIDAgfQoJCXRyZWUuZGVlcCA9IGRlZXB8fDAKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA9PSAwIHx8IHRyZWUuaGlkZSkgeyByZXR1cm4gdHJlZS5oZWlnaHQgPSAxIH0KCgkJdmFyIGhlaWdodCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWhlaWdodCArPSBjYW4ub25pbXBvcnQuX2hlaWdodChjYW4sIGl0ZW0sIChkZWVwfHwwKSsxKQoJCX0pCgkJcmV0dXJuIHRyZWUuaGVpZ2h0ID0gaGVpZ2h0Cgl9LAoJX3dpZHRoOiBmdW5jdGlvbihjYW4sIHRyZWUsIGRlZXApIHsgaWYgKCF0cmVlKSB7IHJldHVybiAwIH0KCQl0cmVlLmRlZXAgPSBkZWVwfHwwCgkJaWYgKHRyZWUubGlzdC5sZW5ndGggPT0gMCB8fCB0cmVlLmhpZGUpIHsKCQkJdHJlZS52aWV3ID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBodG1sLlRFWFQsIHBvaW50OiBbe3g6IDAsIHk6IDB9XSwgc3R5bGU6IHtpbm5lcjogdHJlZS5uYW1lfX0pCgkJCXJldHVybiB0cmVlLndpZHRoID0gdHJlZS52aWV3LlZhbCgidGV4dExlbmd0aCIpK2Nhbi5tYXJnaW4KCQl9CgoJCXZhciB3aWR0aCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCXdpZHRoICs9IGNhbi5vbmltcG9ydC5fd2lkdGgoY2FuLCBpdGVtLCAoZGVlcHx8MCkrMSkKCQl9KQoJCXJldHVybiB0cmVlLndpZHRoID0gd2lkdGgKCX0sCglfY29sb3I6IGZ1bmN0aW9uKGNhbiwgdHJlZSkgewoJCXJldHVybiB0cmVlLm1ldGEmJnRyZWUubWV0YS5jb2xvciB8fCAodHJlZS5saXN0ID09IDA/IGNsaS5QVVJQTEU6IGNsaS5ZRUxMT1cpCgl9LAoJbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgcCA9IGNhbi5BY3Rpb24oaWNlLlZJRVcsIGNhbi5zdXAudmlld3x8Y2FuLkFjdGlvbihpY2UuVklFVykpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmltcG9ydC5fc2hvdyhjYW4sIGNhbi5yZXF1ZXN0KCkpCgkJY2FuLnN2Zy5WYWwoaHRtbC5GT05UX1NJWkUsIGNhbi5BY3Rpb24oInNpemUiKSkKCQljYW4ub25hY3Rpb25bcF0oZXZlbnQsIGNhbiwgcCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi55So5oi35pON5L2cIiwgbGlzdDogWwoJCVtpY2UuVklFVywgIuaoquWQkSIsICLnurXlkJEiXSwgWyJzaXplIiwgMjQsIDMyLCA0OF0sIFsibWFyZ2luIiwgMzAsIDUwLCAxMDBdLAoJXSwKCXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnNpemUgPSBwYXJzZUludChjYW4uQWN0aW9uKCJzaXplIil8fDMwKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgltYXJnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1hcmdpbiA9IHBhcnNlSW50KGNhbi5BY3Rpb24oIm1hcmdpbiIpfHwzMCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJIuaoquWQkSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmltcG9ydC5faGVpZ2h0KGNhbiwgY2FuLl90cmVlWyIiXSkKCQljYW4uc3VwLnZpZXcgPSBidXR0b24sIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5zdmcpCgoJCWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hULCBjYW4uX3RyZWVbIiJdLmhlaWdodCpjYW4ubWFyZ2luKzIqY2FuLm1hcmdpbikKCQljYW4ud2lkdGggPSAwLCBjYW4ub25hY3Rpb24uX2RyYXdfaG9yaXpvbnRhbChjYW4sIGNhbi5fdHJlZVsiIl0sIGNhbi5tYXJnaW4sIGNhbi5tYXJnaW4pCgkJY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgY2FuLndpZHRoK2Nhbi5tYXJnaW4pCgl9LAoJIue6teWQkSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmltcG9ydC5fd2lkdGgoY2FuLCBjYW4uX3RyZWVbIiJdKQoJCWNhbi5zdXAudmlldyA9IGJ1dHRvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZykKCgkJY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgY2FuLl90cmVlWyIiXS53aWR0aCsyKmNhbi5tYXJnaW4pCgkJY2FuLmhlaWdodCA9IDAsIGNhbi5vbmFjdGlvbi5fZHJhd192ZXJ0aWNhbChjYW4sIGNhbi5fdHJlZVsiIl0sIGNhbi5tYXJnaW4sIGNhbi5tYXJnaW4rY2FuLm1hcmdpbikKCQljYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgY2FuLmhlaWdodCtjYW4ubWFyZ2luKQoJfSwKCV9kcmF3OiBmdW5jdGlvbihjYW4sIHRyZWUsIHgsIHksIHN0eWxlKSB7IHZhciBjb2xvciA9IGNhbi5vbmltcG9ydC5fY29sb3IoY2FuLCB0cmVlKQoJCXRyZWUudmlldyA9IGNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogaHRtbC5URVhULCBwb2ludDogW3t4OiB4LCB5OiB5fV0sIHN0eWxlOiBjYW4uYmFzZS5Db3B5KGtpdC5EaWN0KAoJCQlodG1sLlNUUk9LRSwgY29sb3IsIGh0bWwuRklMTCwgY29sb3IsIGh0bWwuVEVYVF9BTkNIT1IsICJzdGFydCIsICJpbm5lciIsIHRyZWUubmFtZXx8dHJlZS5maWxlLAoJCSksIHN0eWxlKSwgfSksIGNhbi5jb3JlLkl0ZW1DQihjYW4ub25kZXRhaWwsIHRyZWUudmlldywgY2FuLCB0cmVlKQoJfSwKCV9kcmF3X3ZlcnRpY2FsOiBmdW5jdGlvbihjYW4sIHRyZWUsIHgsIHkpIHsgdHJlZS54ID0geCwgdHJlZS55ID0geQoJCWNhbi5vbmFjdGlvbi5fZHJhdyhjYW4sIHRyZWUsIHgrdHJlZS53aWR0aC8yLCB5LCBraXQuRGljdChodG1sLlRFWFRfQU5DSE9SLCAibWlkZGxlIikpCgoJCXRyZWUuaGVpZ2h0ID0gY2FuLm1hcmdpbgoJCWlmICh5K3RyZWUuaGVpZ2h0ID4gY2FuLmhlaWdodCkgeyBjYW4uaGVpZ2h0ID0geSt0cmVlLmhlaWdodCB9CgkJaWYgKHRyZWUuaGlkZSkgeyByZXR1cm4gfQoKCQl2YXIgb2Zmc2V0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSDJWLCBwb2ludDogWwoJCQkJe3g6IHgrdHJlZS53aWR0aC8yLCB5OiB5K3RyZWUuaGVpZ2h0LWNhbi5tYXJnaW4vMn0sCgkJCQl7eDogeCtvZmZzZXQraXRlbS53aWR0aC8yLCB5OiB5K3RyZWUuaGVpZ2h0K2Nhbi5tYXJnaW4vMn0sCgkJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuQ1lBTn19KQoKCQkJY2FuLm9uYWN0aW9uLl9kcmF3X3ZlcnRpY2FsKGNhbiwgaXRlbSwgeCtvZmZzZXQsIHkrdHJlZS5oZWlnaHQrY2FuLm1hcmdpbikKCQkJb2Zmc2V0ICs9IGl0ZW0ud2lkdGgKCQl9KQoJfSwKCV9kcmF3X2hvcml6b250YWw6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSkgeyB0cmVlLnggPSB4LCB0cmVlLnkgPSB5CgkJY2FuLm9uYWN0aW9uLl9kcmF3KGNhbiwgdHJlZSwgeCwgeSt0cmVlLmhlaWdodCpjYW4ubWFyZ2luLzIsIGtpdC5EaWN0KGh0bWwuVEVYVF9BTkNIT1IsICJzdGFydCIpKQoKCQl0cmVlLndpZHRoID0gdHJlZS52aWV3LlZhbCgidGV4dExlbmd0aCIpfHwodHJlZS5uYW1lfHwiIikubGVuZ3RoKjEwCgkJaWYgKHgrdHJlZS53aWR0aCA+IGNhbi53aWR0aCkgeyBjYW4ud2lkdGggPSB4K3RyZWUud2lkdGggfQoJCWlmICh0cmVlLmhpZGUpIHsgcmV0dXJuIH0KCgkJdmFyIG9mZnNldCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlBBVEgySCwgcG9pbnQ6IFsKCQkJCXt4OiB4K3RyZWUud2lkdGgrY2FuLm1hcmdpbi84LCB5OiB5K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMn0sCgkJCQl7eDogeCt0cmVlLndpZHRoK2Nhbi5tYXJnaW4qMi0yKmNhbi5tYXJnaW4vOCwgeTogeStvZmZzZXQraXRlbS5oZWlnaHQqY2FuLm1hcmdpbi8yfQoJCQldLCBzdHlsZToge3N0cm9rZTogY2xpLkNZQU59fSkKCgkJCWNhbi5vbmFjdGlvbi5fZHJhd19ob3Jpem9udGFsKGNhbiwgaXRlbSwgeCt0cmVlLndpZHRoKzIqY2FuLm1hcmdpbiwgeStvZmZzZXQpCgkJCW9mZnNldCArPSBpdGVtLmhlaWdodCpjYW4ubWFyZ2luCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi55So5oi35Lqk5LqSIiwKCW9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdHJlZSkgeyB2YXIgeSA9IHRyZWUueSt0cmVlLmhlaWdodCpjYW4ubWFyZ2luLzIKCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4ucG9zKSwgY2FuLnBvcyA9IGNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCXt4OiB0cmVlLngtY2FuLm1hcmdpbi80LCB5OiB5LWNhbi5tYXJnaW4vMn0sIHt4OiB0cmVlLngrdHJlZS53aWR0aCtjYW4ubWFyZ2luLzgsIHk6IHkrY2FuLm1hcmdpbi8yfSwKCQldLCBzdHlsZToge3N0cm9rZTogY2xpLlJFRCwgZmlsbDogaHRtbC5OT05FfX0pLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0cmVlKSB7CgkJaWYgKHRyZWUubGlzdC5sZW5ndGggPiAwIHx8IHRyZWUudGFncyB8fCB0cmVlLm5hbWUuZW5kc1dpdGgoY2FuLkNvbmYobGV4LlNQTElUKSkpIHsKCQkJcmV0dXJuIHRyZWUuaGlkZSA9ICF0cmVlLmhpZGUsIGNhbi5vbmFjdGlvbltjYW4uQWN0aW9uKGljZS5WSUVXKV0oZXZlbnQsIGNhbikKCQl9CgoJCWZvciAodmFyIG5vZGUgPSB0cmVlOyBub2RlOyBub2RlID0gbm9kZS5sYXN0KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBub2RlLm1ldGEpIH0KCgkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKSwgY2FuLmJhc2UuT2JqKGNhbi5Db25mKGxleC5QUkVGSVgpLCBbXSkuY29uY2F0KFtjYW4uT3B0aW9uKCJyZXBvcyIpfHwiIiwgdHJlZS5maWxlfHwiIiwgdHJlZS5uYW1lXSksIGZ1bmN0aW9uKG1zZykgewoJCQlpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIGNhbi5vbmRldGFpbC5wbHVnaW4oY2FuLCAid2ViLmNvZGUuaW5uZXIiLCBbY2FuLmRpcl9yb290LCB0cmVlLmZpbGUsIHRyZWUubGluZV0sIGNvZGUuSU5ORVIpIH0KCQkJaWYgKG1zZy5BcHBlbmQobWRiLklOREVYKSkgeyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgY2FuLm9uZGV0YWlsLnBsdWdpbihjYW4sIHZhbHVlLmluZGV4LCBbXSkgfSk7IHJldHVybiB9CgoJCQlpZiAobXNnLk9wdGlvbihsZXguU1BMSVQpKSB7CgkJCQl0cmVlLmxpc3QgPSBjYW4ub25pbXBvcnQuX3RyZWUoY2FuLCBtc2cuVGFibGUoKSwgbXNnLk9wdGlvbihtZGIuRklFTEQpfHxtc2cuYXBwZW5kWzBdLCBtc2cuT3B0aW9uKGxleC5TUExJVCkpWyIiXS5saXN0fHxbXQoJCQkJY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5sYXN0ID0gdHJlZSB9KQoJCQl9IGVsc2UgewoJCQkJbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsgdHJlZS5saXN0LnB1c2goewoJCQkJCXR5cGU6ICJ0YWdzIiwgbmFtZTogaXRlbS5uYW1lfHxpdGVtLmZpbGV8fGl0ZW1bbXNnLmFwcGVuZFswXV0sCgkJCQkJbWV0YTogaXRlbSwgbGlzdDogW10sIGxhc3Q6IHRyZWUsCgkJCQkJZmlsZTogaXRlbS5maWxlLCBsaW5lOiBpdGVtLmxpbmUsIGhpZGU6IHRydWUsCgkJCQl9KSB9KQoJCQl9CgkJCXRyZWUudGFncyA9IHRydWUsIHRyZWUuaGlkZSA9ICF0cmVlLmhpZGUsIGNhbi5vbmFjdGlvbltjYW4uQWN0aW9uKGljZS5WSUVXKV0oZXZlbnQsIGNhbikKCQl9LCB0cnVlKQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgYXJncywgcHJlZml4KSB7CgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiBjaGF0LkZMT0FULCBpbmRleDogaW5kZXgsIGFyZ3M6IGFyZ3MsIG1vZGU6ICJmbG9hdCJ9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSwgcHJlZml4fHxbaWNlLlJVTiwgaW5kZXhdLCBjbWRzLCBjYikgfQoJCQlzdWIuTW9kZSgiZmxvYXQiKSwgY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7IGxlZnQgPSBsZWZ0fHwwCgkJCQl2YXIgdG9wID0gY2FuLk1vZGUoKSA9PSB1bmRlZmluZWQ/IDEyMDogMDsgaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IHRvcCA9IGNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDA6IDQ4IH0KCQkJCXN1Yi5Db25mSGVpZ2h0KGhlaWdodC10b3AtMipodG1sLkFDVElPTl9IRUlHSFQtKGNhbi51c2VyLmlzTW9iaWxlJiYhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKT8gMipodG1sLkFDVElPTl9IRUlHSFQ6IDApKSwgc3ViLkNvbmZXaWR0aCh3aWR0aCkKCQkJCWNhbi5vbm1vdGlvbi5tb3ZlKGNhbiwgc3ViLl90YXJnZXQsIHtwb3NpdGlvbjogaHRtbC5GSVhFRCwgbGVmdDogbGVmdCwgdG9wOiB0b3B9KQoJCQl9KQoJCX0pCgl9LAp9KQo=",
        "usr/volcanos/plugin/story/trend.css": "ZmllbGRzZXQuZHJhdy50cmVuZCBkaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5Om5vbmU7IH0KCg==",
        "usr/volcanos/plugin/story/trend.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbigiYnJhbmNoIikpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4uZGF0YSA9IG1zZy5UYWJsZSgpLCBjYW4ub25pbXBvcnQuX3N1bShjYW4pCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgcGFyc2VJbnQobXNnLk9wdGlvbihodG1sLlNQRUVEKXx8IjEwMCIpKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJkcmF3IikKCQljYW4ucmVxdWlyZShbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIiwgIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCX0pCgl9LAoJX3N1bTogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIGJlZ2luID0gIiIsIGNvdW50ID0gMCwgcmVzdCA9IDAsIGFkZCA9IDAsIGRlbCA9IDAsIG1heCA9IDAKCQljYW4ubWF4ID0gMCwgY2FuLm1pbiA9IDAsIGNhbi5saXN0ID0gY2FuLmNvcmUuTGlzdChjYW4uZGF0YSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CgkJCXZhciBsaW5lID0gewoJCQkJZGF0ZTogdmFsdWVbY2FuLl9tc2cuYXBwZW5kWzBdXSwKCQkJCXRleHQ6IHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFs0XV0sCgkJCQlhZGQ6IHBhcnNlSW50KHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFsxXV0pLAoJCQkJZGVsOiBwYXJzZUludCh2YWx1ZVtjYW4uX21zZy5hcHBlbmRbMl1dKSwKCQkJfQoKCQkJbGluZS5iZWdpbiA9IHJlc3QKCQkJbGluZS5tYXggPSByZXN0ICsgbGluZS5hZGQKCQkJbGluZS5taW4gPSByZXN0IC0gbGluZS5kZWwKCQkJbGluZS5jbG9zZSA9IHJlc3QgKyBsaW5lLmFkZCAtIGxpbmUuZGVsCgoJCQliZWdpbiA9IGJlZ2luIHx8IHZhbHVlLmRhdGUsIGNvdW50KysKCQkJcmVzdCA9IGxpbmUuY2xvc2UsIGFkZCArPSBsaW5lLmFkZCwgZGVsICs9IGxpbmUuZGVsCgoJCQlpZiAobGluZS5tYXggLSBsaW5lLm1pbiA+IG1heCkgeyBtYXggPSBsaW5lLm1heCAtIGxpbmUubWluIH0KCQkJaWYgKGxpbmUubWF4ID4gY2FuLm1heCkgeyBjYW4ubWF4ID0gbGluZS5tYXggfQoJCQlpZiAobGluZS5taW4gPCBjYW4ubWluKSB7IGNhbi5taW4gPSBsaW5lLm1pbiB9CgkJCXJldHVybiBsaW5lCgkJfSkKCQljYW4uU3RhdHVzKHsiZnJvbSI6IGJlZ2luLCAiY29tbWl0IjogY291bnQsICJ0b3RhbCI6IGFkZCtkZWwsICJtYXgiOiBtYXh9KQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBoZWlnaHQgPSBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbikKCQl2YXIgd2lkdGggPSBwYXJzZUludChjYW4uQ29uZldpZHRoKCkpLCBzcGFjZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNwYWNlIil8fCIxMCIpCgkJdmFyIHN0ZXAgPSBwYXJzZUludCgod2lkdGgtMipzcGFjZSkgLyBjYW4ubGlzdC5sZW5ndGgpCgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9tc2cpCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGhlaWdodCksIGNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIHdpZHRoKQoJCXJldHVybiB7aGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCwgc3BhY2U6IHNwYWNlLCBzdGVwOiBzdGVwfQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXSh7fSwgY2FuKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi6LaL5Yq/5Zu+IiwgIuafseeKtuWbviIsICLmlbDmja7mupAiXSwKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJWyJzcGFjZSIsIDEwLCAyMCwgNTAsIDEwMF0sCgkJW2h0bWwuU1BFRUQsIDEwLCAyMCwgNTAsIDEwMF0sCgldLAoJIui2i+WKv+WbviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGFyZ3MgPSBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pCgkJZnVuY3Rpb24gc2NhbGUoeSkgeyByZXR1cm4gKHkgLSBjYW4ubWluKS8oY2FuLm1heCAtIGNhbi5taW4pKihhcmdzLmhlaWdodC0yKmFyZ3Muc3BhY2UpIH0KCQlmdW5jdGlvbiBvcmRlcihpbmRleCwgeCwgeSkgeyByZXR1cm4ge3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3gsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoeSl9IH0KCgkJdmFyIGJsYWNrID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLkJMQUNLLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLkJMQUNLLCBodG1sLkZJTEwsIGNsaS5CTEFDSykpCgkJdmFyIHdoaXRlID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLldISVRFLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLldISVRFLCBodG1sLkZJTEwsIGNsaS5XSElURSkpCgoJCWNhbi5jb3JlLk5leHQoY2FuLmxpc3QsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGNhbi5TdGF0dXMobGluZSkKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuTElORSwgcG9pbnQ6IFsKCQkJCW9yZGVyKGluZGV4LCBhcmdzLnN0ZXAvMiwgbGluZS5taW4pLCBvcmRlcihpbmRleCwgYXJncy5zdGVwLzIsIGxpbmUubWF4KSwKCQkJXX0sIGxpbmUuYmVnaW4gPCBsaW5lLmNsb3NlPyB3aGl0ZTogYmxhY2spCgoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5SRUNULCBwb2ludDogWwoJCQkJb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80LCBsaW5lLmNsb3NlKSwgb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80KjMsIGxpbmUuYmVnaW4pLAoJCQldLCBfaW5pdDogZnVuY3Rpb24odmlldykgewoJCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgZnVuY3Rpb24oa2V5LCBjYikgeyB2aWV3W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuLCBsaW5lKSB9IH0pCgkJCX19LCBsaW5lLmJlZ2luIDwgbGluZS5jbG9zZT8gd2hpdGU6IGJsYWNrKQoKCQkJY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJfSkKCX0sCgki5p+x54q25Zu+IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYXJncyA9IGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbikKCQl2YXIgbWF4ID0ge30sIG1pbiA9IHt9OyBjYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCB3aGljaCkgewoJCQljYW4uY29yZS5MaXN0KGNhbi5kYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKCQkJCXZhciB2ID0gcGFyc2VJbnQodmFsdWVba2V5XSl8fDA7IGlmIChpbmRleCA9PSAwKSB7CgkJCQkJcmV0dXJuIG1heFtrZXldID0gdiwgbWluW2tleV0gPSB2CgkJCQl9CgkJCQlpZiAodiA+IG1heFtrZXldKSB7IG1heFtrZXldID0gdiB9CgkJCQlpZiAodiA8IG1pbltrZXldKSB7IG1pbltrZXldID0gdiB9CgkJCX0pCgkJfSkKCgkJZnVuY3Rpb24gc2NhbGUoa2V5LCB5KSB7IHJldHVybiAoeSAtIG1pbltrZXldKS8obWF4W2tleV0gLSBtaW5ba2V5XSkqKGFyZ3MuaGVpZ2h0LTIqYXJncy5zcGFjZSkgfQoKCQl2YXIgd2lkdGggPSBhcmdzLnN0ZXAvY2FuLl9tc2cuYXBwZW5kLmxlbmd0aCwgd2hpY2ggPSAwCgkJY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgd2hpY2gpIHsgaWYgKG1heFtrZXldID09IG1pbltrZXldKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLk5leHQoY2FuLmRhdGEsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGlmIChwYXJzZUludChsaW5lW2tleV0pID09IDApIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKndoaWNoKzIsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoa2V5LCBwYXJzZUludChsaW5lW2tleV0pKX0sCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKih3aGljaCsxKSsyLCB5OiBhcmdzLmhlaWdodC1hcmdzLnNwYWNlfSwKCQkJCV0sIHN0eWxlOiBraXQuRGljdChodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNsaS5XSElURSwgaHRtbC5GSUxMLCBjbGkuV0hJVEUsIHN2Zy5SWCwgMCwgc3ZnLlJZLCAwKSwgX2luaXQ6IGZ1bmN0aW9uKHZpZXcpIHsKCQkJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCBmdW5jdGlvbihrZXksIGNiKSB7IHZpZXdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4sIGxpbmUpIH0gfSkKCQkJCX19KSwgY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJCX0pLCB3aGljaCsrCgkJfSkKCX0sCgki5pWw5o2u5rqQIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIGNhbi5fbXNnLCBudWxsLCBjYW4uX291dHB1dCkKCX0sCgoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJc3BhY2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGNhbi5TdGF0dXMobGluZSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbImZyb20iLCAiY29tbWl0IiwgInRvdGFsIiwgIm1heCIsICJkYXRlIiwgInRleHQiLCAiYWRkIiwgImRlbCJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJaWYgKGhlaWdodCA9PSBpY2UuQVVUTykgeyBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCS8vIGNhbi5pc0Z1bGxNb2RlKCkgfHwgKGhlaWdodCA9IGNhbi5iYXNlLk1heChjYW4uQ29uZkhlaWdodCgpLCA2MDApKQoJCX0KCQlpZiAoaGVpZ2h0IDwgMjAwKSB7IGhlaWdodCA9IDIwMCB9CgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodHx8Y2FuLl9yb290Ll9oZWlnaHQvMikKCX0sCn0pCg==",
        "usr/volcanos/plugin/story/video.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuc2VsZWN0KGNhbiwgbXNnKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5wbGF5KGV2ZW50LCBjYW4pIH0pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsICJ0ZCBhIiwgZnVuY3Rpb24oYSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBhLCB7dGFyZ2V0OiAiIn0pCgkJfSkKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLkNsZWFyKCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uT3B0aW9uKCJ0YWdzIiksIGZ1bmN0aW9uKGEsIGluZGV4KSB7CgkJCW1zZy5QdXNoKG1kYi5JTkRFWCwgaW5kZXgpCgkJCW1zZy5QdXNoKG1kYi5OQU1FLCBhLmlubmVyVGV4dCkKCQkJbXNnLlB1c2gobWRiLkxJTkssIGEuaHJlZikKCQkJYS5ocmVmID09IGxvY2F0aW9uLmhyZWYgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGkpIHsKCQkJCQlpLTEgPT0gaW5kZXggJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCAic2VsZWN0IikKCQkJCX0pCgkJCX0pCgkJfSkKCQltc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTLCBKU09OLnN0cmluZ2lmeShbCgkJCXtuYW1lOiAidGltZSIsIHZhbHVlOiBjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpfSwKCQkJe25hbWU6ICJjb3VudCIsIHZhbHVlOiBtc2cuTGVuZ3RoKCl9LAoJCV0pKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2cKCQltc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgpIHsKCQkJaWYgKGxpbmUubGluayA9PSBsb2NhdGlvbi5ocmVmKSB7CgkJCQlsb2NhdGlvbi5ocmVmID0gbXNnLmxpbmtbaW5kZXgrMV0KCQkJfQoJCX0pCgl9LAoJcGxheTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBodG1sLlZJREVPLCBmdW5jdGlvbih2aWRlbykgewoJCQl2aWRlby5wbGF5YmFja1JhdGUgPSBwYXJzZUZsb2F0KGNhbi5PcHRpb24oInJhdGUiKSkKCQkJdmlkZW8uY3VycmVudFRpbWUgPSBwYXJzZUludChjYW4uT3B0aW9uKCJza2lwIikpCgkJCXZpZGVvLm9udGltZXVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAodmlkZW8uY3VycmVudFRpbWUgPiBwYXJzZUludChjYW4uT3B0aW9uKCJuZXh0IikpKSB7CgkJCQkJY2FuLm9uYWN0aW9uLm5leHQoZXZlbnQsIGNhbikKCQkJCX0KCQkJfSwgdmlkZW8ucGxheSgpLCB2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpCgkJfSkKCX0sCn0pCg==",
        "usr/volcanos/plugin/table.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJdmFyIGNicyA9IGNhbi5vbmltcG9ydFtjYW4uQ29uZihjdHguU1RZTEUpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYnMpKSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNhbi5fYXJnc1tjdHguU1RZTEVdKQoJCQljYW4uY29yZS5DYWxsRnVuYyhjYnMsIHsKCQkJCWNhbjogY2FuLCBtc2c6IG1zZywgdGFyZ2V0OiB0YXJnZXQsCgkJCQlsaXN0OiBtc2cuVGFibGUoKSwKCQkJfSkKCQkJcmV0dXJuIGNicyhjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdGFyZ2V0KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCgl6b25lOiBmdW5jdGlvbihjYW4sIGxpc3QsIHRhcmdldCkgeyB2YXIgY29sb3IgPSBbIiJdCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih6b25lLCBpbmRleCkgeyBjYW4uYmFzZS5pc1N0cmluZyh6b25lKSAmJiAoem9uZSA9IHtuYW1lOiB6b25lfSk7IHJldHVybiB6b25lICYmIHt2aWV3OiBodG1sLlpPTkUrIiAiK3pvbmUubmFtZSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5OQU1FLCBpbm5lcjogY2FuLnVzZXIudHJhbnMoY2FuLCB6b25lLm5hbWUpLCBzdHlsZToge2JhY2tncm91bmQ6IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF19LCBvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB6b25lLl9hY3Rpb24pLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgem9uZS5fdGFyZ2V0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl6b25lLl9tZW51PyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHpvbmUuX21lbnUubWV0YSwgem9uZS5fbWVudS5saXN0fHxjYW4uY29yZS5JdGVtKHpvbmUuX21lbnUubWV0YSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJCQkobWV0YVtidXR0b25dfHxjYW4ub25hY3Rpb25bYnV0dG9uXSkoZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQkJfSk6IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJCSLmipjlj6AiOiBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9MSVNULCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBmYWxzZSkgfSkgfSwKCQkJCQki5bGV5byAIjogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHpvbmUuX3RhcmdldCwgaHRtbC5ESVZfTElTVCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgdHJ1ZSkgfSkgfSwKCQkJCQki5Yi35pawIjogZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHpvbmUuX3RhcmdldCksIHpvbmUuX2luaXQoem9uZS5fdGFyZ2V0KSB9LAoJCQkJfSwgWyLmipjlj6AiLCAi5bGV5byAIiwgIuWIt+aWsCJdKQoJCQl9fSwKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHpvbmUuX2FjdGlvbiA9IHRhcmdldAoJCQkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbe2lucHV0OiBodG1sLlRFWFQsIHBsYWNlaG9sZGVyOiAic2VhcmNoIiwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0xJU1QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIHRydWUpIH0pCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJkaXYubmFtZSIsIGZ1bmN0aW9uKG5hbWUpIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIG5hbWUuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB9KQoJCQkJCX0pCgkJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgem9uZS5fc2VhcmNoID0gdGFyZ2V0CgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCB0YXJnZXQsIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5vZmZzZXRXaWR0aC0zMikgfSkKCQkJCQkvLyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge25hbWU6IHpvbmUubmFtZX0sIHRhcmdldCkKCQkJCX19XSwgdGFyZ2V0LCB7fSkKCQkJfX0sCgkJCXt2aWV3OiBodG1sLkxJU1QsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnVpW3pvbmUubmFtZV0gPSB6b25lCgkJCQl6b25lLl90YXJnZXQgPSB0YXJnZXQsIHpvbmUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCB6b25lLl9pbml0KHRhcmdldCkgfQoJCQkJY2FuLmJhc2UuaXNGdW5jKHpvbmUuX2luaXQpICYmIHpvbmUuX2luaXQodGFyZ2V0LCB6b25lKQoJCQl9fQoJCV19IH0pKQoJfSwKCXRyZWU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgZmllbGQsIHNwbGl0LCBjYiwgdGFyZ2V0LCBub2RlKSB7CgkJbm9kZSA9IG5vZGV8fHsiIjogdGFyZ2V0fTsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW1bZmllbGRdICYmIGNhbi5jb3JlLkxpc3QoaXRlbVtmaWVsZF0uc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IGlmICghdmFsdWUpIHsgcmV0dXJuIH0KCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpLCBuYW1lID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgrMSkuam9pbihzcGxpdCkKCQkJCWlmIChub2RlW25hbWVdKSB7IHJldHVybiB9CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlW2xhc3RdLCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogW3t2aWV3OiBbInN3aXRjaCIsICJkaXYiLCAoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiImIzg5NjM7IildfSwge3ZpZXc6IFsibmFtZSIsIGh0bWwuRElWLCB2YWx1ZSsoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiIiKV0sIF9pbml0OiBpdGVtLl9pbml0fV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaW5kZXggPCBhcnJheS5sZW5ndGggLSAxPyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbm9kZVtuYW1lXSwgZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aVsic3dpdGNoIl0sICJvcGVuIikKCQkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHVpWyJzd2l0Y2giXSwgIm9wZW4iKQoJCQkJCX0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtKQoJCQkJCWlmIChub2RlW25hbWVdLmNoaWxkRWxlbWVudENvdW50ID09IDIpIHsgbm9kZVtuYW1lXS5maXJzdENoaWxkLmNsaWNrKCkgfQoJCQkJfX0sIHt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfSwgX2luaXQ6IGZ1bmN0aW9uKGxpc3QpIHsgaXRlbS5leHBhbmQgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBsaXN0LCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spIH19XSkKCQkJCW5vZGVbbmFtZV0gPSB1aS5saXN0CgkJCX0pCgkJfSk7IHJldHVybiBub2RlCgl9LAoJbGlzdDogZnVuY3Rpb24oY2FuLCByb290LCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4uY29yZS5MaXN0KHJvb3QubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0pIHx8IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQl9fSwge3ZpZXc6IGh0bWwuTElTVH1dKTsgY2FuLm9uaW1wb3J0Lmxpc3QoY2FuLCBpdGVtLCBjYiwgdWkubGlzdCkKCQl9KQoJfSwKCWl0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgY2IsIGNicywgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8KGNhbi51aSAmJiBjYW4udWkucHJvamVjdD8gY2FuLnVpLnByb2plY3Q6IGNhbi5fb3V0cHV0KQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uaWNrfHxpdGVtLm5hbWVdLAoJCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgdWkuZmlyc3QsIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGh0bWwuSVRFTSksIHVpLmZpcnN0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhldmVudCwgdWkuZmlyc3QpIH0sCgkJfV0pOyByZXR1cm4gdWkuZmlyc3QKCX0sCglpdGVtbGlzdDogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0Ll9saXN0ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2IoZXZlbnQsIGl0ZW0sIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYnMoZXZlbnQsIGl0ZW0pIH19CgkJfSkgfV0sIHRhcmdldC5uZXh0U2libGluZywgdGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCBhY3Rpb24sIGVhY2gpIHsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBhY3Rpb24sIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odGFicykgewoJCQlyZXR1cm4ge3RleHQ6IFt0YWJzLm5hbWUsIGh0bWwuRElWLCBodG1sLlRBQlNdLCB0aXRsZTogdGFicy50ZXh0LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgdGFicykKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWZ1bmN0aW9uIGNsb3NlKGl0ZW0pIHsgdmFyIG5leHQgPSBpdGVtLm5leHRTaWJsaW5nfHxpdGVtLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkKCQkJCQlpZiAobmV4dCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoaXRlbS5fbWV0YSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pIH0KCQkJCX0KCQkJCXZhciBtZW51ID0gdGFicy5fbWVudXx8c2h5KHt9LCBbXSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgeyAobWV0YVtidXR0b25dKShldmVudCwgY2FuLCBidXR0b24pIH0pCgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpdGVtLCB7ZHJhZ2dhYmxlOiB0cnVlLCBfY2xvc2U6IGZ1bmN0aW9uKCkgeyBjbG9zZShpdGVtKSB9LCBfbWV0YTogdGFicywKCQkJCQlvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCQkJCSJDbG9zZSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNsb3NlKGl0ZW0pIH0sCgkJCQkJCSJDbG9zZSBvdGhlcnMiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGZ1bmN0aW9uKF9pdGVtKSB7IF9pdGVtID09IGl0ZW0gfHwgY2xvc2UoX2l0ZW0pIH0pIH0sCgkJCQkJCSJDbG9zZSBhbGwiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGNsb3NlKSB9LAoJCQkJCSksIG1lbnUubWV0YSksIFsiQ2xvc2UiLCAiQ2xvc2Ugb3RoZXJzIiwgIkNsb3NlIGFsbCIsICIiXS5jb25jYXQobWVudS5saXN0KSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQkJCQltZW51KGV2ZW50LCBidXR0b24sIG1ldGEpCgkJCQkJfSkgfSwKCQkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgYWN0aW9uLl9kcm9wID0gZnVuY3Rpb24oYmVmb3JlKSB7IGFjdGlvbi5pbnNlcnRCZWZvcmUoZXZlbnQudGFyZ2V0LCBiZWZvcmUpIH0gfSwKCQkJCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBhY3Rpb24uX2Ryb3AoZXZlbnQudGFyZ2V0KSB9LAoJCQkJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgYWN0aW9uLl9kcm9wKGV2ZW50LnRhcmdldCkgfSwKCQkJCX0pCgkJCQljYW4uYmFzZS5pc0Z1bmMoZWFjaCkgJiYgZWFjaChpdGVtKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGl0ZW0uY2xpY2soKSB9KQoJCQl9fQoJCX0pKS5maXJzdAoJfSwKCWNhcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt2aWV3OiBodG1sLklURU0rIiAiKyh2YWx1ZS5zdGF0dXN8fCIiKSwgbGlzdDogWwoJCQkJe3ZpZXc6IFt3aWtpLlRJVExFLCBodG1sLkRJViwgdmFsdWUubmFtZV19LAoJCQkJe3ZpZXc6IFt3aWtpLkNPTlRFTlQsIGh0bWwuRElWLCB2YWx1ZS50ZXh0XX0sCgkJCQl7dmlldzogaHRtbC5BQ1RJT04sIGlubmVyOiB2YWx1ZS5hY3Rpb24sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgdmFsdWUpLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdKQoJCQkJfX0sCgkJCV19CgkJfSkpCgl9LAoJcGx1ZzogZnVuY3Rpb24oY2FuLCBtZXRhLCB0YXJnZXQsIGNiKSB7IGlmICghbWV0YSB8fCAhbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCW1ldGEudHlwZSA9ICJwbHVnIiwgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIG1ldGEsIGZ1bmN0aW9uKHN1YikgeyBzdWIuc3VwID0gY2FuCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIG1ldGEuaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4udWkgJiYgdGFyZ2V0ID09IGNhbi51aS5wcm9maWxlPyBjYW4ub25tb3Rpb24uaGlkZGVuKHN1YiwgdGFyZ2V0KTogY2FuLm9ubW90aW9uLmhpZGRlbihzdWIsIHN1Yi5fdGFyZ2V0KSB9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSwgdGFyZ2V0KQoJfSwKfSkK",
        "usr/volcanos/publish/client/nodejs/proto.js": "dHJ5IHsgaWYgKHR5cGVvZihnbG9iYWwpID09IGxhbmcuT0JKRUNUKSB7IC8vIG5vZGVqcwoJVm9sY2Fub3MubWV0YS5fbG9hZCA9IGZ1bmN0aW9uKHVybCwgY2IpIHsgaWYgKCF1cmwpIHsgcmV0dXJuIH0KCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBpZiAoVm9sY2Fub3MubWV0YS5jYWNoZVt1cmxdKSB7IHJldHVybiBjYihWb2xjYW5vcy5tZXRhLmNhY2hlW3VybF0pIH0KCQkJc3dpdGNoICh1cmwuc3BsaXQoIj8iKVswXS5zcGxpdChpY2UuUFQpLnBvcCgpLnRvTG93ZXJDYXNlKCkpIHsKCQkJCWNhc2UgbmZzLkpTOgoJCQkJCXJlcXVpcmUocGF0aC5pc0Fic29sdXRlKHVybCk/IHVybDogcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICJ1c3Ivdm9sY2Fub3MiLCB1cmwpKQoJCQkJCWNiKFZvbGNhbm9zLm1ldGEuY2FjaGVbdXJsXSkKCQkJCQlicmVhawoJCQl9CgkJfSwgMTAwKQoJfQoKCVZvbGNhbm9zLm1ldGEuX2xvYWQoZ2xvYmFsLnBsdWdpbiwgZnVuY3Rpb24oY2FjaGUpIHsKCQlWb2xjYW5vcy5tZXRhLnZvbGNhbm8gPSAiLi9mcmFtZS5qcyIsIFZvbGNhbm9zKHtsaWJzOiBbCgkJCSIuL2xpYi9iYXNlLmpzIiwgIi4vbGliL2NvcmUuanMiLCAiLi9saWIvbWlzYy5qcyIsICIuL2xpYi9wYWdlLmpzIiwgLy8gIi4vbGliL3VzZXIuanMiLAoJCV0sIHBhbmVsczogW10sIHBsdWdpbjogW119LCBmdW5jdGlvbihjYW4pIHsgY2FuLmNvcmUuTGlzdChjYWNoZSwgZnVuY3Rpb24oaXRlbSkgeyBjYW5baXRlbS5fbmFtZV0gPSBpdGVtIH0pCgkJCVZvbGNhbm9zLm1ldGEuX2xvYWQoIi4vcHVibGlzaC9jbGllbnQvbm9kZWpzL3Byb3RvLmpzIiwgZnVuY3Rpb24oY2FjaGUpIHsKCQkJCWNhbi5jb3JlLkxpc3QoY2FjaGUsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLmJhc2UuQ29weShjYW5baXRlbS5fbmFtZV18fHt9LCBpdGVtKSB9KQoJCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgY2FuLnJlcXVlc3QoKSwgZnVuY3Rpb24obXNnKSB7IGNvbnNvbGUubG9nKGljZS5OTCkgfSwgbnVsbCkKCQkJfSkKCQl9KQoJfSkKfSB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKGUpIH0KCl9jYW5fbmFtZSA9ICIuL2ZyYW1lLmpzIgpWb2xjYW5vcygib25hcHBlbmQiLCB7aGVscDogIua4suafk+W8leaTjiIsCgl0YWJsZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgbWF4ID0ge307IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCWZvciAodmFyIGsgaW4gdmFsdWUpIHsgaWYgKHZhbHVlW2tdLmxlbmd0aCA+IChtYXhba118fDApKSB7CgkJCQltYXhba10gPSB2YWx1ZVtrXS5sZW5ndGgKCQkJfSB9CgkJfSkKCgkJdmFyIGxpc3QgPSBbXTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsgdmFyIGxpbmUgPSBbXQoJCQlpZiAoaW5kZXggPT0gMCkgewoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cuYXBwZW5kLmxlbmd0aDsgaSsrKSB7IGxpbmUucHVzaChtc2cuYXBwZW5kW2ldKQoJCQkJCWZvciAodmFyIGogPSAwOyBqIDw9IG1heFttc2cuYXBwZW5kW2ldXS1tc2cuYXBwZW5kW2ldLmxlbmd0aDsgaisrKSB7CgkJCQkJCWxpbmUucHVzaChpY2UuU1ApCgkJCQkJfQoJCQkJCWxpbmUucHVzaChpY2UuU1ApCgkJCQl9CgkJCQlsaXN0LnB1c2gobGluZS5qb2luKCIiKSkKCQkJfQoJCQlsaW5lID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmFwcGVuZC5sZW5ndGg7IGkrKykgeyB2YXIgayA9IG1zZy5hcHBlbmRbaV0KCQkJCWxpbmUucHVzaCh2YWx1ZVtrXSkKCQkJCWZvciAodmFyIGogPSAwOyBqIDw9IG1heFtrXS12YWx1ZVtrXTsgaisrKSB7CgkJCQkJbGluZS5wdXNoKGljZS5TUCkKCQkJCX0KCQkJCWxpbmUucHVzaChpY2UuU1ApCgkJCX0KCQkJbGlzdC5wdXNoKGxpbmUuam9pbigiIikpCgkJfSkKCQljb25zb2xlLmxvZyhsaXN0LmpvaW4oaWNlLk5MKSkKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljb25zb2xlLmxvZyhtc2cuUmVzdWx0KCkpCgl9LAp9KQoK",

        "usr/intshell/LICENSE": "TUlUIExpY2Vuc2UKCkNvcHlyaWdodCAoYykgMjAyMCDnoIHnpZ4KClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwp0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwpmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsCmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgpJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUKU09GVFdBUkUuCg==",
        "usr/intshell/README.md": "IyBpbnRzaGVsbApJTlRTSEVMTCBhbGlhcyBmb3IgaW4gdGhlIHNoZWxsLCBhIHBsdWdpbiBtYW5hZ2VyIHN5c3RlbQoKIyMgQWJvcnQKCklOVFNIRUxMIGFsbG93cyB5b3UgdG8uLi4KCi0ga2VlcCB0cmFjayBvZiBhbmQgY29uZmlndXJlIHlvdXIgcGx1Z2lucyByaWdodCBpbiB0aGUgLmlzaC9wbHVnZWQvCi0gaW5zdGFsbCBjb25maWd1cmVkIHBsdWdpbnMgKGEuay5hLiBzY3JpcHRzL2J1bmRsZSkKLSB1cGRhdGUgY29uZmlndXJlZCBwbHVnaW5zCi0gc2VhcmNoIGJ5IG5hbWUgYWxsIGF2YWlsYWJsZSBzY3JpcHRzCi0gY2xlYW4gdW51c2VkIHBsdWdpbnMgdXAKCklOVFNIRUxMIGF1dG9tYXRpY2FsbHkuLi4KCi0gY2xvbmUgdGhlIHJlcG9zIGlmIHRoZSBwbHVnaW5zIGRvbid0IGV4aXN0cwotIGxvYWQgdGhlIHNjcmlwdCBpZiB0aGUgcGx1Z2lucyBkb24ndCBzb3VyY2UKLSBtYW5hZ2VzIHRoZSBydW50aW1lIHBhdGggb2YgeW91ciBpbnN0YWxsZWQgc2NyaXB0cwotIHJlZ2VuZXJhdGVzIGhlbHAgdGFncyBhZnRlciBpbnN0YWxsaW5nIGFuZCB1cGRhdGluZwoKIyMgUXVpY2sgU3RhcnQKIyMjIDEuIERvd25sb2FkIElOVFNIRUxMCgpgYGBzaApnaXQgY2xvbmUgaHR0cHM6Ly9zaHlsaW51eC5jb20veC9pbnRzaGVsbC5naXQgfi8uaXNoCmBgYAoKIyMjIDIuIENvbmZpZ3VyZSBQbHVnaW5zOgpQdXQgdGhpcyBhdCB0aGUgYm90dG9tIG9mIHlvdXIgLmJhc2hyYyB0byB1c2UgSU5UU0hFTEwKYGBgc2gKaWYgWyAtZiB+Ly5pc2gvcGx1Zy5zaCBdICYmIHNvdXJjZSB+Ly5pc2gvcGx1Zy5zaDsgdGhlbgogICAgcmVxdWlyZSBjb25mLnNoCiAgICByZXF1aXJlIG1pc3Muc2gKICAgIyAuLi4gYWRkIG90aGVyIHBsdWdpbnMKZmkKCmBgYAoKIyMjIDMuIFVzZSBQbHVnaW5zOgoqKnVzZSBieSBtYW51YWwgbG9hZCoqCmBgYHNoCiQgcmVxdWlyZSBzaHlsaW51eC5jb20veC9pbnRzaGVsbCBzeXMvY2xpL2RhdGUuc2gKYGBgCgphZnRlciBsb2FkIGRhdGUuc2gsIHlvdSBjYWxsIGFsbCB0aGUgZnVuY3Rpb24gZGlyZWN0bHkKYGBgc2gKJCBpc2hfc3lzX2RhdGUKMjAyMi0wNy0wMSAxNTo1MDozMApgYGAK",
        "usr/intshell/app/app.sh": "IyEvYmluL3NoCgo=",
        "usr/intshell/app/cat.sh": "IyEvYmluL2Jhc2gKCmNhdCAkMQo=",
        "usr/intshell/conf.sh": "IyEvYmluL3NoCgpyZXF1aXJlIHN5cy9zeXMuc2gKcmVxdWlyZSBkZXYvZGV2LnNoCnJlcXVpcmUgYXBwL2FwcC5zaAoK",
        "usr/intshell/dev/dev.sh": "IyEvYmluL3NoCgpyZXF1aXJlIGRldi9naXQvZ2l0LnNoCnJlcXVpcmUgZGV2L3ZpbS92aW0uc2gKcmVxdWlyZSBkZXYvdG11eC90bXV4LnNoCgo=",
        "usr/intshell/dev/git/git.sh": "IyEvYmluL2Jhc2gKCmlzaF9kZXZfZ2l0X3ByZXBhcmUoKSB7CiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLnQgdGFnCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLnMgc3RhdHVzCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLmIgYnJhbmNoCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLmwgImxvZyAtLW9uZWxpbmUgLS1kZWNvcmF0ZSIKICAgIGdpdCBjb25maWcgLS1nbG9iYWwgaW5pdC5kZWZhdWx0QnJhbmNoIG1hc3RlcgoKICAgIGdpdCBjb25maWcgLS1nbG9iYWwgY29sb3IudWkgYWx3YXlzCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGNvcmUucXVvdGVwYXRoIGZhbHNlCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHN0b3JlCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIHB1c2guZGVmYXVsdCBzaW1wbGUKICAgIGdpdCBjb25maWcgLS1nbG9iYWwgcHVsbC5mZiBvbmx5Cn0KaXNoX2Rldl9naXRfY29uZmlnKCkgewogICAgaXNoX3N5c19kZXZfcmVxdWVzdAp9Cg==",
        "usr/intshell/dev/tmux/local.sh": "IyEvYmluL2Jhc2gKCnRtdXhfY21kPSJ0bXV4IC1TIGJpbi90bXV4LnNvY2tldCAtZiBldGMvdG11eC5jb25mIgpzZXNzaW9uPW1pc3MgJiYgWyAtcyAiJDEiIF0gJiYgc2Vzc2lvbj0kMSAmJiBzaGlmdAoKaWYgJHRtdXhfY21kIGhhcy1zZXNzaW9uIC10ICRzZXNzaW9uOyB0aGVuCiAgICAkdG11eF9jbWQgYXR0YWNoIC10ICRzZXNzaW9uCmVsc2UKICAgICR0bXV4X2NtZCBuZXctc2Vzc2lvbiAtcyAkc2Vzc2lvbgpmaQo=",
        "usr/intshell/dev/tmux/tmux-1.8.conf": "YmluZCBDLW0gY29tbWFuZC1wcm9tcHQgLXAgIm1vdmUgdG86IiAic3dhcC1wYW5lIC1zIC4gLXQgJSUiCmJpbmQgQy11IGNvbW1hbmQtcHJvbXB0IC1wICJtb3ZlIHRvOiIgIm1vdmUtcGFuZSAtdiAtdCAlJSIKYmluZCBDLXYgY29tbWFuZC1wcm9tcHQgLXAgIm1vdmUgdG86IiAibW92ZS1wYW5lIC1oIC10ICUlIgoKc2V0IC1nIG1vdXNlLXNlbGVjdC13aW5kb3cgb24Kc2V0IC1nIG1vdXNlLXNlbGVjdC1wYW5lIG9uCnNldCAtZyBtb3VzZS1yZXNpemUtcGFuZSBvbgpzZXQgLWcgbW91c2UtdXRmOCBvbgpzZXQgLWcgbW9kZS1tb3VzZSBvbgoK",
        "usr/intshell/dev/tmux/tmux.conf": "IyDphY3nva7nrqHnkIYge3t7CnNldCAtZyBwcmVmaXggQy1zCgpzZXQgLWcgYmFzZS1pbmRleCAxCnNldCAtZyBwYW5lLWJhc2UtaW5kZXggMQpzZXQgLWcgcmVudW1iZXItd2luZG93cyBvbgoKc2V0IC1nIGRpc3BsYXktdGltZSA1MDAwCnNldCAtZyBkaXNwbGF5LXBhbmVzLXRpbWUgNTAwMApzZXQgLWcgaGlzdG9yeS1saW1pdCAzMDAwCnNldCAtZyBtb2RlLWtleXMgdmkKCnNldCAtZ3cgb3RoZXItcGFuZS13aWR0aCA2MApzZXQgLWd3IG90aGVyLXBhbmUtaGVpZ2h0IDE1CgojIOagh+mimOagjwpzZXQgLWcgc2V0LXRpdGxlcyBvbgpzZXQgLWcgc2V0LXRpdGxlcy1zdHJpbmcgIiNoLyNTOiNXLiNQIgoKIyDnirbmgIHmoI8Kc2V0IC1nIHN0YXR1cy1iZyBibHVlCnNldCAtZyBzdGF0dXMtZmcgd2hpdGUKc2V0IC1nIGFsbG93LXJlbmFtZSBvZmYKc2V0IC1nIHN0YXR1cy1pbnRlcnZhbCAxCnNldCAtZyBzdGF0dXMtbGVmdC1sZW5ndGggNjAKc2V0IC1nIHN0YXR1cy1sZWZ0ICIjW2JnPXJlZCBmZz13aGl0ZV1cIFsjaC8jU11cICNbYmc9eWVsbG93IGZnPWJsYWNrXVwgW11cICNbYmc9cmVkXSIKc2V0IC1nIHN0YXR1cy1yaWdodCAiI1tiZz1yZWRdXCBbIyhkYXRlICcrJVktJW0tJWQgJUg6JU06JVMnKV1cICIKc2V0IC1nIHN0YXR1cy1yaWdodC1sZW5ndGggNjAKCnNldCAtZ3cgd2luZG93LXN0YXR1cy1mb3JtYXQgIiNbYmc9Ymx1ZSBmZz13aGl0ZV1cIFsjSTojVyNGXVwgIgpzZXQgLWd3IHdpbmRvdy1zdGF0dXMtY3VycmVudC1mb3JtYXQgIiNbYmc9cmVkIGZnPXdoaXRlXVwgWyNJOiNXI0ZdXCAiCiMgfX19CiMg5Lya6K+d566h55CGe3t7CmJpbmQgcSBjb25maXJtLWJlZm9yZSAiZGV0YWNoLWNsaWVudCIKIyB9fX0KIyDnqpflj6PnrqHnkIZ7e3sKYmluZCBiIGJyZWFrLXBhbmUKYmluZCBjIG5ldy13aW5kb3cKYmluZCBlIGNvbW1hbmQtcHJvbXB0IC1wICJ3aW5kb3cgbmV3IG5hbWU6IiAicmVuYW1lLXdpbmRvdyAnJSUnIgpiaW5kIEIgY29tbWFuZC1wcm9tcHQgLXAgInRhcmdldCB3aW5kb3c6IiAiam9pbi1wYW5lIC12IC10ICUlIgoKYmluZCBwIHByZXZpb3VzLXdpbmRvdwpiaW5kIG4gbmV4dC13aW5kb3cKYmluZCBvIGxhc3Qtd2luZG93CiMgfX19CiMg6Z2i5p2/566h55CGe3t7CmJpbmQgaSBkaXNwbGF5LXBhbmVzCmJpbmQgeCBjb25maXJtLWJlZm9yZSAtcCAia2lsbC1wYW5lICNQPyAoeS9uKSIga2lsbC1wYW5lCmJpbmQgeiByZXNpemUtcGFuZSAtWgpiaW5kIHYgc3BsaXQtd2luZG93IC1oCmJpbmQgdSBzcGxpdC13aW5kb3cKCmJpbmQgaCBzZWxlY3QtcGFuZSAtTApiaW5kIGwgc2VsZWN0LXBhbmUgLVIKYmluZCBqIHNlbGVjdC1wYW5lIC1ECmJpbmQgayBzZWxlY3QtcGFuZSAtVQoKYmluZCBDLWcgc2VsZWN0LWxheW91IHRpbGVkCmJpbmQgQy15IHNlbGVjdC1sYXlvdSBtYWluLXZlcnRpY2FsCmJpbmQgQy10IHNlbGVjdC1sYXlvdSBtYWluLWhvcml6b250YWwKYmluZCBDLWggY29tbWFuZC1wcm9tcHQgLXAgInNpemU6IiAicmVzaXplLXBhbmUgLUwgJSUiCmJpbmQgQy1sIGNvbW1hbmQtcHJvbXB0IC1wICJzaXplOiIgInJlc2l6ZS1wYW5lIC1SICUlIgpiaW5kIEMtaiBjb21tYW5kLXByb21wdCAtcCAic2l6ZToiICJyZXNpemUtcGFuZSAtRCAlJSIKYmluZCBDLWsgY29tbWFuZC1wcm9tcHQgLXAgInNpemU6IiAicmVzaXplLXBhbmUgLVUgJSUiCmJpbmQgQy1vIGNvbmZpcm0tYmVmb3JlIC1wICJraWxsIGFsbCBvdGhlciBwYW5lKHkvbik/IiAia2lsbC1wYW5lIC1hIgojIH19fQojIOe8k+WtmOeuoeeQhnt7ewpiaW5kIEMtcyBjb3B5LW1vZGUKCmJpbmQgciBjaG9vc2UtYnVmZmVyCmJpbmQgYSBwYXN0ZS1idWZmZXIKIyB9fX0KIyDlkb3ku6TnrqHnkIZ7e3sKYmluZCBDLWkgcnVuLXNoZWxsICJzb3VyY2UgYmluL3NlbmQtaW50c2hlbGwuc2giCmJpbmQgU3BhY2UgY29tbWFuZC1wcm9tcHQKIyB9fX0KCmlmLXNoZWxsICJbIC1lIH4vLnRtdXhfbG9jYWwgXSIgInNvdXJjZS1maWxlIH4vLnRtdXhfbG9jYWwiCgo=",
        "usr/intshell/dev/tmux/tmux.sh": "IyEvYmluL2Jhc2gKCmlzaF9kZXZfdG11eF9wcmVwYXJlKCkgewogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly50bXV4LmNvbmYgJFBXRC91c3IvaW50c2hlbGwvZGV2L3RtdXgvdG11eC5jb25mCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnRtdXhfbG9jYWwgJFBXRC91c3IvaW50c2hlbGwvZGV2L3RtdXgvdG11eF9sb2NhbC5jb25mCn0KaXNoX2Rldl90bXV4X3Nlc3Npb24oKSB7CiAgICBsb2NhbCB0bXV4X2NtZD0idG11eCAtUyBiaW4vdG11eC5zb2NrZXQgLWYgZXRjL3RtdXguY29uZiIKICAgIGxvY2FsIHNlc3Npb249bWlzcyAmJiBbIC1zICIkMSIgXSAmJiBzZXNzaW9uPSQxICYmIHNoaWZ0CgogICAgaWYgJHRtdXhfY21kIGhhcy1zZXNzaW9uIC10ICRzZXNzaW9uOyB0aGVuCiAgICAgICAgJHRtdXhfY21kIGF0dGFjaCAtdCAkc2Vzc2lvbgogICAgZWxzZQogICAgICAgICR0bXV4X2NtZCBuZXctc2Vzc2lvbiAtcyAkc2Vzc2lvbgogICAgZmkKfQo=",
        "usr/intshell/dev/tmux/tmux_local.conf": "YmluZCBjIG5ldy13aW5kb3cgLWMgIiN7cGFuZV9jdXJyZW50X3BhdGh9IgoKYmluZCB1IHNwbGl0LXdpbmRvdyAtYyAiI3twYW5lX2N1cnJlbnRfcGF0aH0iCmJpbmQgdiBzcGxpdC13aW5kb3cgLWggLWMgIiN7cGFuZV9jdXJyZW50X3BhdGh9IgpiaW5kIFUgc3BsaXQtd2luZG93IC1mIC1jICIje3BhbmVfY3VycmVudF9wYXRofSIKYmluZCBWIHNwbGl0LXdpbmRvdyAtZiAtaCAtYyAiI3twYW5lX2N1cnJlbnRfcGF0aH0iCgpiaW5kIEMtbSBkaXNwbGF5LXBhbmVzICJzd2FwLXBhbmUgLXQgJSUiCmJpbmQgQy11IGRpc3BsYXktcGFuZXMgIm1vdmUtcGFuZSAtdiAtdCAlJSIKYmluZCBDLXYgZGlzcGxheS1wYW5lcyAibW92ZS1wYW5lIC1oIC10ICUlIgoKc2V0IC1nIG1vdXNlIG9uCgo=",
        "usr/intshell/dev/vim/auto.vim": "IiDln7rnoYDlh73mlbB7e3sKIiDlj5jph4/lrprkuYkKZnVuYyEgU2h5RGVmaW5lKG5hbWUsIHZhbHVlKQoJaWYgIWV4aXN0cyhhOm5hbWUpIHwgZXhlYyAibGV0ICIgLiBhOm5hbWUgLiAiID0gXCIiIC4gYTp2YWx1ZSAuICJcIiIgfCBlbmRpZgplbmRmdW5jCgoiIOWQjuerr+mAmuS/oQpjYWxsIFNoeURlZmluZSgiZzpjdHhfc2lkIiwgIiIpCmNhbGwgU2h5RGVmaW5lKCJnOmN0eF91cmwiLCAobGVuKCRjdHhfb3BzKSA+IDE/ICRjdHhfb3BzOiAiaHR0cDovLzEyNy4wLjAuMTo5MDIwIikgLiAiL2NvZGUvdmltLyIpCmZ1bmMhIFNoeVNlbmQoY21kLCBhcmcpCiAgICBpZiBoYXNfa2V5KGE6YXJnLCAic3ViIikgJiYgYTphcmdbInN1YiJdICE9ICIiIHwgbGV0IHRlbXAgPSB0ZW1wbmFtZSgpCiAgICAgICAgY2FsbCB3cml0ZWZpbGUoc3BsaXQoYTphcmdbInN1YiJdLCAiXG4iKSwgdGVtcCwgImIiKSB8IGxldCBhOmFyZ1sic3ViIl0gPSAiQCIgLiB0ZW1wCiAgICBlbmRpZgoKICAgIGxldCBhOmFyZ1sic2lkIl0gPSBnOmN0eF9zaWQKICAgIGxldCBhOmFyZ1sicHdkIl0gPSBnZXRjd2QoKSB8IGxldCBhOmFyZ1siYnVmIl0gPSBidWZuYW1lKCIlIikgfCBsZXQgYTphcmdbInJvdyJdID0gbGluZSgiLiIpIHwgbGV0IGE6YXJnWyJjb2wiXSA9IGNvbCgiLiIpCiAgICBsZXQgYXJncyA9ICIiIHwgZm9yIGsgaW4gc29ydChrZXlzKGE6YXJnKSkgfCBsZXQgYXJncyA9IGFyZ3MgLiAiIC1GICciIC4gayAuICI9IiAuIGE6YXJnW2tdIC4gIicgIiB8IGVuZGZvcgogICAgcmV0dXJuIHN5c3RlbSgiY3VybCAtcyAiIC4gZzpjdHhfdXJsIC4gYTpjbWQgLiBhcmdzIC4gIiAyPi9kZXYvbnVsbCIpCmVuZGZ1bmMKCmZ1bmMhIFNoeUxvZ2luKCkKICAgIGxldCBnOmN0eF9zaWQgPSBTaHlTZW5kKCJzZXNzIiwgeyJ1c2VybmFtZSI6ICRVU0VSLCAiaG9zdG5hbWUiOiBob3N0bmFtZSgpLCAicGlkIjogZ2V0cGlkKCl9KQplbmRmdW5jCmZ1bmMhIFNoeUxvZ291dCgpCiAgICBjYWxsIFNoeVNlbmQoInNlc3MiLCB7ImNtZHMiOiAibG9nb3V0In0pIHwgbGV0IGc6Y3R4X3NpZCA9ICIiCmVuZGZ1bmMKIiB9fX0KIiDlip/og73lh73mlbB7e3sKIiDmlbDmja7lkIzmraUKZnVuYyEgU2h5U3luYyh0YXJnZXQpCiAgICBpZiBidWZuYW1lKCIlIikgPT0gIkNvbnRyb2xQIiB8IHJldHVybiB8IGVuZAoKICAgIGlmIGE6dGFyZ2V0ID09ICJyZWFkIiB8fCBhOnRhcmdldCA9PSAid3JpdGUiCiAgICAgICAgY2FsbCBTaHlTZW5kKCJzeW5jIiwgeyJjbWRzIjogYTp0YXJnZXQsICJhcmciOiBleHBhbmQoIjxhZmlsZT4iKX0pCiAgICBlbHNlaWYgYTp0YXJnZXQgPT0gImluc2VydCIKICAgICAgICBjYWxsIFNoeVNlbmQoInN5bmMiLCB7ImNtZHMiOiBhOnRhcmdldCwgInN1YiI6IGdldHJlZygiLiIpfSkKICAgIGVsc2VpZiBhOnRhcmdldCA9PSAiZXhlYyIKICAgICAgICBjYWxsIFNoeVNlbmQoInN5bmMiLCB7ImNtZHMiOiBhOnRhcmdldCwgImFyZyI6IGdldGNtZGxpbmUoKX0pCiAgICBlbHNlCiAgICAgICAgbGV0IGNtZCA9IHsiYnVmcyI6ICJidWZmZXJzIiwgInJlZ3MiOiAicmVnaXN0ZXJzIiwgIm1hcmtzIjogIm1hcmtzIiwgInRhZ3MiOiAidGFncyIsICJmaXhzIjogImNsaXN0In0KICAgICAgICBjYWxsIFNoeVNlbmQoInN5bmMiLCB7ImNtZHMiOiBhOnRhcmdldCwgInN1YiI6IGV4ZWN1dGUoY21kW2E6dGFyZ2V0XSl9KQogICAgZW5kaWYKZW5kZnVuYwoKIiDovpPlhaXooaXlhagKZnVuYyEgU2h5SW5wdXQoY29kZSkKICAgIHJldHVybiBzcGxpdChTaHlTZW5kKCJpbnB1dCIsIHsiY21kcyI6IGE6Y29kZSwgInByZSI6IGdldGxpbmUoIi4iKSwgInJvdyI6IGxpbmUoIi4iKSwgImNvbCI6IGNvbCgiLiIpfSksICJcbiIpCmVuZGZ1bmMKZnVuYyEgU2h5Q29tcGxldGUoZmlyc3RzdGFydCwgYmFzZSkKICAgIGlmIGE6Zmlyc3RzdGFydCB8IGxldCBsaW5lID0gZ2V0bGluZSgnLicpIHwgbGV0IHN0YXJ0ID0gY29sKCcuJykgLSAxCiAgICAgICAgIiDlkb3ku6TkvY3nva4KICAgICAgICBpZiBtYXRjaChsaW5lLCAnXHMqaWNlICcpID49IDAgfCByZXR1cm4gbWF0Y2gobGluZSwgImljZSAiKSB8IGVuZGlmCiAgICAgICAgIiDnrKblj7fkvY3nva4KICAgICAgICBpZiBsaW5lW3N0YXJ0LTFdICF+ICdcYScgfCByZXR1cm4gc3RhcnQgLSAxIHwgZW5kCiAgICAgICAgIiDljZXor43kvY3nva4KICAgICAgICB3aGlsZSBzdGFydCA+IDAgJiYgbGluZVtzdGFydCAtIDFdID1+ICdcYScgfCBsZXQgc3RhcnQgLT0gMSB8IGVuZHdoaWxlCiAgICAgICAgcmV0dXJuIHN0YXJ0CiAgICBlbmRpZgoKICAgICIg56ym5Y+36L2s5o2iCiAgICBpZiBhOmJhc2UgPT0gIigiIHwgcmV0dXJuIFsi77yIIiwgIigiXSB8IGVuZAogICAgaWYgYTpiYXNlID09ICIpIiB8IHJldHVybiBbIu+8iSIsICIpIl0gfCBlbmQKICAgIGlmIGE6YmFzZSA9PSAiOiIgfCByZXR1cm4gWyLvvJoiLCAiOiJdIHwgZW5kCiAgICBpZiBhOmJhc2UgPT0gIjsiIHwgcmV0dXJuIFsi77ybIiwgIjsiXSB8IGVuZAogICAgaWYgYTpiYXNlID09ICIsIiB8IHJldHVybiBbIu+8jCIsICIsIl0gfCBlbmQKICAgICIgaWYgYTpiYXNlID09ICIuIiB8IHJldHVybiBbIuOAgiIsICIuIl0gfCBlbmQKICAgIGlmIGE6YmFzZSA9PSAiXFwiIHwgcmV0dXJuIFsi44CBIiwgIlxcIl0gfCBlbmQKCiAgICAiIOWNleivjei9rOaNogogICAgbGV0IGxpc3QgPSBTaHlJbnB1dChhOmJhc2UpCiAgICBpZiBsZW4obGlzdCkgPiAwICAmJiBsaXN0WzBdID09ICJmdW5jIgogICAgICAgIGxldCByZXMgPSBbXSB8IGZvciBpIGluIHJhbmdlKDEsIGxlbihsaXN0KS0xLCAyKQogICAgICAgICAgICBpZiBsZW4obGlzdCkgPiBpKzEKICAgICAgICAgICAgICAgIGxldCByZXMgPSByZXMgKyBbeyJ3b3JkIjogbGlzdFtpXSwgImluZm8iOiBsaXN0W2krMV19XQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gcmVzICsgW3sid29yZCI6IGxpc3RbaV19XQogICAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGZvcgogICAgICAgIHJldHVybiByZXMKICAgIGVuZGlmCiAgICByZXR1cm4gbGlzdAplbmRmdW5jCnNldCBjb21wbGV0ZWZ1bmM9U2h5Q29tcGxldGUKCiIg5pS26JeP5YiX6KGoCmNhbGwgU2h5RGVmaW5lKCJnOmZhdm9yX25hbWUiLCAiIikKZnVuYyEgU2h5RmF2b3IoKQogICAgbGV0IHpvbmVfbGlzdCA9IFsiYWRkIHpvbmUiXSArIHNwbGl0KFNoeVNlbmQoImZhdm9yIiwgeyJjbWRzIjogInNlbGVjdCJ9KSwgIlxuIikKICAgIGxldCB6b25lX3Nob3cgPSBbXSB8IGZvciBpIGluIHJhbmdlKDAsIGxlbih6b25lX2xpc3QpLTEpCiAgICAgICAgbGV0IHpvbmVfc2hvdyA9IHpvbmVfc2hvdyArIFtwcmludGYoIiVkLiAlcyIsIGksIHpvbmVfbGlzdFtpXSldCiAgICBlbmRmb3IKCiAgICBpZiBsZW4oem9uZV9saXN0KSA+IDEKICAgICAgICBsZXQgaW5kZXggPSBpbnB1dGxpc3Qoem9uZV9zaG93KSB8IGxldCB6b25lID0gem9uZV9saXN0W2luZGV4XQogICAgICAgIGlmIGluZGV4ID09IDAgfCBsZXQgem9uZSA9IGlucHV0KCJ6b25lOiAiLCAi5pWw5o2u57uT5p6EIikgfCBlbmQKICAgIGVsc2UKICAgICAgICBsZXQgem9uZSA9IGlucHV0KCJ6b25lOiAiLCAi5pWw5o2u57uT5p6EIikKICAgIGVuZGlmCgogICAgbGV0IGc6ZmF2b3JfbmFtZSA9IGlucHV0KCJuYW1lOiAiLCBnOmZhdm9yX25hbWUpCiAgICBjYWxsIFNoeVNlbmQoImZhdm9yIiwgeyJjbWRzIjogImluc2VydCIsICJ6b25lIjogem9uZSwgInR5cGUiOiAiZmlsZSIsICJuYW1lIjogZzpmYXZvcl9uYW1lLCAidGV4dCI6IGdldGxpbmUoIi4iKSwgImZpbGUiOiBidWZuYW1lKCIlIiksICJsaW5lIjogZ2V0cG9zKCIuIilbMV19KQplbmRmdW5jCmZ1bmMhIFNoeUZhdm9ycygpCiAgICBsZXQgem9uZV9saXN0ID0gc3BsaXQoU2h5U2VuZCgiZmF2b3IiLCB7ImNtZHMiOiAic2VsZWN0In0pLCAiXG4iKQogICAgbGV0IHpvbmVfc2hvdyA9IFtdIHwgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHpvbmVfbGlzdCktMSkKICAgICAgICBsZXQgem9uZV9zaG93ID0gem9uZV9zaG93ICsgW3ByaW50ZigiJWQuICVzIiwgaSwgem9uZV9saXN0W2ldKV0KICAgIGVuZGZvcgogICAgbGV0IGluZGV4ID0gaW5wdXRsaXN0KHpvbmVfc2hvdykgfCBsZXQgem9uZSA9IHpvbmVfbGlzdFtpbmRleF0KCiAgICBsZXQgcmVzID0gc3BsaXQoU2h5U2VuZCgiZmF2b3IiLCB7InpvbmUiOiB6b25lfSksICJcbiIpCiAgICBsZXQgcGFnZSA9ICIiIHwgbGV0IG5hbWUgPSAiIgogICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHJlcyktMSwgMikKICAgICAgICBpZiByZXNbaV0gIT0gcGFnZQogICAgICAgICAgICBpZiBuYW1lICE9ICIiIHwgbGV4cHIgbmFtZSB8IGxvcGVuIHwgbGV0IG5hbWUgPSAiIiB8IGVuZGlmCiAgICAgICAgICAgIGV4ZWN1dGUgZXhpc3RzKCI6VGFib29PcGVuIik/ICJUYWJvb09wZW4gIiAuIHJlc1tpXTogInRhYm5ldyIKICAgICAgICBlbmRpZgogICAgICAgIGxldCBwYWdlID0gcmVzW2ldIHwgbGV0IG5hbWUgLj0gcmVzW2krMV0gLiAiXG4iCiAgICBlbmRmb3IKICAgIGlmIG5hbWUgIT0gIiIgfCBsZXhwciBuYW1lIHwgbGV0IG5hbWUgPSAiIiB8IGVuZGlmCgogICAgbGV0IHZpZXcgPSBpbnB1dGxpc3QoWyLliJfooagiLCAi6buY6K6kIiwgIuWeguebtCIsICLmsLTlubMiXSkKICAgIGZvciBpIGluIHJhbmdlKDAsIGxlbihyZXMpLTEsIDIpIHwgaWYgaSA8IDUKICAgICAgICBpZiBsOnZpZXcgPT0gNCB8IHNwbGl0IHwgbG5leHQgfCBlbHNlaWYgbDp2aWV3ID09IDMgfCB2c3BsaXQgfCBsbmV4dCB8IGVuZGlmCiAgICBlbmRpZiB8IGVuZGZvcgogICAgYm90cmlnaHQgbG9wZW4gfCBpZiBsOnZpZXcgID09IDEgfCBvbmx5IHwgZW5kaWYKZW5kZnVuYwoKIiDmlofku7bmkJzntKIKY2FsbCBTaHlEZWZpbmUoImc6Z3JlcF9kaXIiLCAiLi8iKQpmdW5jISBTaHlHcmVwKHdvcmQpCiAgICBsZXQgZzpncmVwX2RpciA9IGlucHV0KCJkaXI6ICIsIGc6Z3JlcF9kaXIsICJmaWxlIikKICAgIHNpbGVudCBleGVjdXRlICJncmVwIC0tZXhjbHVkZS1kaXI9Jy5naXQnICAtLWV4Y2x1ZGU9Jyouc3dvJyAgLS1leGNsdWRlPScqLnN3cCcgLS1leGNsdWRlPScqLnRhZ3MnIC1ybiAnXFw8IiAuIGlucHV0KCJ3b3JkOiAiLCBhOndvcmQpIC4gIlxcPicgIiAuIGc6Z3JlcF9kaXIKICAgIGNvcGVuCmVuZGZ1bmMKZnVuYyEgU2h5VGFncyhwYXR0ZXJuLCBmbGFncywgaW5mbykKICAgIGxldCBsaW5lID0gZ2V0bGluZSgiLiIpCiAgICBsZXQgZW5kID0gY29sKCIuIikgfCB3aGlsZSBlbmQgPiAwICYmIGxpbmVbZW5kXSA9fiAnXHcnIHwgbGV0IGVuZCAtPSAxIHwgZW5kd2hpbGUKICAgIGxldCBiZWdpbiA9IGVuZCAtIDEgfCB3aGlsZSBiZWdpbiA+IDAgJiYgbGluZVtiZWdpbl0gPX4gJ1x3JyB8IGxldCBiZWdpbiAtPSAxIHwgZW5kd2hpbGUKCiAgICBsZXQgdGFnc19saXN0ID0gc3BsaXQoU2h5U2VuZCgidGFncyIsIHsibW9kdWxlIjogbGluZVtiZWdpbisxOmVuZC0xXSwgInByZSI6IGdldGxpbmUoIi4iKSwgInBhdHRlcm4iOiBhOnBhdHRlcm59KSwgIlxuIikKICAgIGxldCBsaXN0ID0gW10gfCBpZiBsZW4odGFnc19saXN0KSA9PSAwIHwgcmV0dXJuIGxpc3QgfCBlbmRpZgogICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHRhZ3NfbGlzdCktMSwgMykKICAgICAgICBsZXQgbGlzdCA9IGxpc3QgKyBbIHsgIm5hbWUiOiB0YWdzX2xpc3RbaV0sICJmaWxlbmFtZSI6IHRhZ3NfbGlzdFtpKzFdLCAiY21kIjogdGFnc19saXN0W2krMl0gfSBdCiAgICBlbmRmb3IKICAgIHJldHVybiBsaXN0CmVuZGZ1bmMKIiB9fX0KIiDkuovku7blm57osIN7e3sKY2FsbCBTaHlMb2dpbigpIHwgYXV0b2NtZCEgVmltTGVhdmVQcmUgKiBjYWxsIFNoeUxvZ291dCgpCiIgYXV0b2NtZCBCdWZOZXdGaWxlLEJ1ZlJlYWRQb3N0ICouanMgc2V0IHRhZ2Z1bmM9U2h5VGFncwoKIiBhdXRvY21kISBCdWZSZWFkUG9zdCAqIGNhbGwgU2h5U3luYygicmVhZCIpCiIgYXV0b2NtZCEgQnVmV3JpdGVQcmUgKiBjYWxsIFNoeVN5bmMoIndyaXRlIikKIiBhdXRvY21kISBJbnNlcnRMZWF2ZSAqIGNhbGwgU2h5U3luYygiaW5zZXJ0IikKIiBhdXRvY21kISBDbWRsaW5lTGVhdmUgKiBjYWxsIFNoeVN5bmMoImV4ZWMiKQoifX19CiIg5oyJ6ZSu5pig5bCEe3t7Cm5ub3JlbWFwIDxDLUc+PEMtRz4gOmNhbGwgU2h5R3JlcChleHBhbmQoIjxjd29yZD4iKSk8Q1I+Cm5ub3JlbWFwIDxDLUc+PEMtRj4gOmNhbGwgU2h5RmF2b3IoKTxDUj4Kbm5vcmVtYXAgPEMtRz5mIDpjYWxsIFNoeUZhdm9ycygpPENSPgppbm9yZW1hcCA8Qy1LPiA8Qy1YPjxDLVU+CiJ9fX0KCg==",
        "usr/intshell/dev/vim/css.vim": "aGlnaGxpZ2h0IGNzc0tleSAgICBjdGVybWZnPXllbGxvdwoKc3ludGF4IG1hdGNoIGlzaEtleSAicGFnZSIKc3ludGF4IG1hdGNoIGlzaEtleSAidmlldyIK",
        "usr/intshell/dev/vim/go.vim": "c3ludGF4IG1hdGNoIENvbW1lbnQgIiMuKiQiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPE5hbWU6IFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPEhlbHA6IFwiW15cIl0qXCIiCgpoaWdobGlnaHQga2l0VHlwZSAgICBjdGVybWZnPWxpZ2h0Z3JlZW4Kc3ludGF4IG1hdGNoIGtpdFR5cGUgIlw8QW55XD4iCnN5bnRheCBtYXRjaCBraXRUeXBlICJcPE1hcFw+IgoKaGlnaGxpZ2h0IGtpdENvbnN0ICAgIGN0ZXJtZmc9eWVsbG93CnN5bnRheCBtYXRjaCBraXRDb25zdCAiXDxraXRcLlthLXowLTlBLVpfLl0qIgoKaGlnaGxpZ2h0IG1zZ0NvbnN0ICAgIGN0ZXJtZmc9Y3lhbgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8aWNlXC5bYS16MC05QS1aXy5dKiIKc3ludGF4IG1hdGNoIG1zZ0NvbnN0ICJcPG1zZ1wuW2EtejAtOUEtWl8uXSoiCnN5bnRheCBtYXRjaCBtc2dDb25zdCAiXDxtXC5bYS16MC05QS1aXy5dKiIKCg==",
        "usr/intshell/dev/vim/iml.vim": "c3ludGF4IG1hdGNoIENvbW1lbnQgIiMuKiQiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcIlteXCJdKlwiIgoKaGlnaGxpZ2h0IHNoeVJpdmVyICAgIGN0ZXJtZmc9cmVkCnN5bnRheCBtYXRjaCBzaHlSaXZlciAiXlthLXpBLVowLTkuXVwrIgoKaGlnaGxpZ2h0IHNoeVN0b3JtICAgIGN0ZXJtZmc9eWVsbG93CnN5bnRheCBtYXRjaCBzaHlTdG9ybSAiXglbYS16QS1aMC05Oi5fXVwrIgoKaGlnaGxpZ2h0IHNoeUNvbW1hbmQgICAgY3Rlcm1mZz1ncmVlbgpzeW50YXggbWF0Y2ggc2h5Q29tbWFuZCAiXgkJW2EtekEtWjAtOTouXy8tXVwrIgoKaGlnaGxpZ2h0IHNoeUFyZ3MgICAgY3Rlcm1mZz1jeWFuCnN5bnRheCBtYXRjaCBzaHlBcmdzICJuYW1lIgpzeW50YXggbWF0Y2ggc2h5QXJncyAiYXJncyIKCg==",
        "usr/intshell/dev/vim/javascript.vim": "c3ludGF4IG1hdGNoIENvbW1lbnQgIlw8c2h5KFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPG5hbWU6IFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPGhlbHA6IFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPFZvbGNhbm9zKFteLHsgXSoiCgpoaWdobGlnaHQgY2FuQ29uc3QgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIGNhbkNvbnN0ICJcPGNhblw+IgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8c3ViXD4iCnN5bnRheCBtYXRjaCBjYW5Db25zdCAiXDxtc2dcPiIKc3ludGF4IG1hdGNoIGNhbkNvbnN0ICJcPHJlc1w+IgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8dGFyZ2V0XD4iCgpoaWdobGlnaHQga2l0Q29uc3QgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIGtpdENvbnN0ICJcPGtpdFwuW2EtejAtOUEtWl8uXSoiCgoKaGlnaGxpZ2h0IG1zZ0NvbnN0ICAgIGN0ZXJtZmc9Y3lhbgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8bVwuW2EtejAtOUEtWl8uXSoiCnN5bnRheCBtYXRjaCBtc2dDb25zdCAiXDxtc2dcLlthLXowLTlBLVpfLl0qIgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8cmVzXC5bYS16MC05QS1aXy5dKiIKc3ludGF4IG1hdGNoIG1zZ0NvbnN0ICJcPGNhblwuW2EtejAtOUEtWl9dKiIKc3ludGF4IG1hdGNoIG1zZ0NvbnN0ICJcPHN1YlwuW2EtejAtOUEtWl8uXSoiCnN5bnRheCBtYXRjaCBtc2dDb25zdCAiXDxjYlw+IgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8Y2JzXD4iCgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5iYXNlIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5jb3JlIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5taXNjIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5wYWdlIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC51c2VyIgoK",
        "usr/intshell/dev/vim/plug.vim": "IiB2aW0tcGx1ZzogVmltIHBsdWdpbiBtYW5hZ2VyCiIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PQoiCiIgRG93bmxvYWQgcGx1Zy52aW0gYW5kIHB1dCBpdCBpbiB+Ly52aW0vYXV0b2xvYWQKIgoiICAgY3VybCAtZkxvIH4vLnZpbS9hdXRvbG9hZC9wbHVnLnZpbSAtLWNyZWF0ZS1kaXJzIFwKIiAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2p1bmVndW5uL3ZpbS1wbHVnL21hc3Rlci9wbHVnLnZpbQoiCiIgRWRpdCB5b3VyIC52aW1yYwoiCiIgICBjYWxsIHBsdWcjYmVnaW4oJ34vLnZpbS9wbHVnZ2VkJykKIgoiICAgIiBNYWtlIHN1cmUgeW91IHVzZSBzaW5nbGUgcXVvdGVzCiIKIiAgICIgU2hvcnRoYW5kIG5vdGF0aW9uOyBmZXRjaGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9qdW5lZ3Vubi92aW0tZWFzeS1hbGlnbgoiICAgUGx1ZyAnanVuZWd1bm4vdmltLWVhc3ktYWxpZ24nCiIKIiAgICIgQW55IHZhbGlkIGdpdCBVUkwgaXMgYWxsb3dlZAoiICAgUGx1ZyAnaHR0cHM6Ly9naXRodWIuY29tL2p1bmVndW5uL3ZpbS1naXRodWItZGFzaGJvYXJkLmdpdCcKIgoiICAgIiBNdWx0aXBsZSBQbHVnIGNvbW1hbmRzIGNhbiBiZSB3cml0dGVuIGluIGEgc2luZ2xlIGxpbmUgdXNpbmcgfCBzZXBhcmF0b3JzCiIgICBQbHVnICdTaXJWZXIvdWx0aXNuaXBzJyB8IFBsdWcgJ2hvbnphL3ZpbS1zbmlwcGV0cycKIgoiICAgIiBPbi1kZW1hbmQgbG9hZGluZwoiICAgUGx1ZyAnc2Nyb29sb29zZS9uZXJkdHJlZScsIHsgJ29uJzogICdORVJEVHJlZVRvZ2dsZScgfQoiICAgUGx1ZyAndHBvcGUvdmltLWZpcmVwbGFjZScsIHsgJ2Zvcic6ICdjbG9qdXJlJyB9CiIKIiAgICIgVXNpbmcgYSBub24tbWFzdGVyIGJyYW5jaAoiICAgUGx1ZyAncmRuZXR0by9ZQ00tR2VuZXJhdG9yJywgeyAnYnJhbmNoJzogJ3N0YWJsZScgfQoiCiIgICAiIFVzaW5nIGEgdGFnZ2VkIHJlbGVhc2U7IHdpbGRjYXJkIGFsbG93ZWQgKHJlcXVpcmVzIGdpdCAxLjkuMiBvciBhYm92ZSkKIiAgIFBsdWcgJ2ZhdGloL3ZpbS1nbycsIHsgJ3RhZyc6ICcqJyB9CiIKIiAgICIgUGx1Z2luIG9wdGlvbnMKIiAgIFBsdWcgJ25zZi9nb2NvZGUnLCB7ICd0YWcnOiAndi4yMDE1MDMwMycsICdydHAnOiAndmltJyB9CiIKIiAgICIgUGx1Z2luIG91dHNpZGUgfi8udmltL3BsdWdnZWQgd2l0aCBwb3N0LXVwZGF0ZSBob29rCiIgICBQbHVnICdqdW5lZ3Vubi9memYnLCB7ICdkaXInOiAnfi8uZnpmJywgJ2RvJzogJy4vaW5zdGFsbCAtLWFsbCcgfQoiCiIgICAiIFVubWFuYWdlZCBwbHVnaW4gKG1hbnVhbGx5IGluc3RhbGxlZCBhbmQgdXBkYXRlZCkKIiAgIFBsdWcgJ34vbXktcHJvdG90eXBlLXBsdWdpbicKIgoiICAgIiBJbml0aWFsaXplIHBsdWdpbiBzeXN0ZW0KIiAgIGNhbGwgcGx1ZyNlbmQoKQoiCiIgVGhlbiByZWxvYWQgLnZpbXJjIGFuZCA6UGx1Z0luc3RhbGwgdG8gaW5zdGFsbCBwbHVnaW5zLgoiCiIgUGx1ZyBvcHRpb25zOgoiCiJ8IE9wdGlvbiAgICAgICAgICAgICAgICAgIHwgRGVzY3JpcHRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKInwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfAoifCBgYnJhbmNoYC9gdGFnYC9gY29tbWl0YCB8IEJyYW5jaC90YWcvY29tbWl0IG9mIHRoZSByZXBvc2l0b3J5IHRvIHVzZSAgICAgICB8CiJ8IGBydHBgICAgICAgICAgICAgICAgICAgIHwgU3ViZGlyZWN0b3J5IHRoYXQgY29udGFpbnMgVmltIHBsdWdpbiAgICAgICAgICAgIHwKInwgYGRpcmAgICAgICAgICAgICAgICAgICAgfCBDdXN0b20gZGlyZWN0b3J5IGZvciB0aGUgcGx1Z2luICAgICAgICAgICAgICAgICAgfAoifCBgYXNgICAgICAgICAgICAgICAgICAgICB8IFVzZSBkaWZmZXJlbnQgbmFtZSBmb3IgdGhlIHBsdWdpbiAgICAgICAgICAgICAgICB8CiJ8IGBkb2AgICAgICAgICAgICAgICAgICAgIHwgUG9zdC11cGRhdGUgaG9vayAoc3RyaW5nIG9yIGZ1bmNyZWYpICAgICAgICAgICAgIHwKInwgYG9uYCAgICAgICAgICAgICAgICAgICAgfCBPbi1kZW1hbmQgbG9hZGluZzogQ29tbWFuZHMgb3IgYDxQbHVnPmAtbWFwcGluZ3MgfAoifCBgZm9yYCAgICAgICAgICAgICAgICAgICB8IE9uLWRlbWFuZCBsb2FkaW5nOiBGaWxlIHR5cGVzICAgICAgICAgICAgICAgICAgICB8CiJ8IGBmcm96ZW5gICAgICAgICAgICAgICAgIHwgRG8gbm90IHVwZGF0ZSB1bmxlc3MgZXhwbGljaXRseSBzcGVjaWZpZWQgICAgICAgIHwKIgoiIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9qdW5lZ3Vubi92aW0tcGx1ZwoiCiIKIiBDb3B5cmlnaHQgKGMpIDIwMTcgSnVuZWd1bm4gQ2hvaQoiCiIgTUlUIExpY2Vuc2UKIgoiIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwoiIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQoiICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKIiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiIgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvCiIgcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvCiIgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoiCiIgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKIiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KIgoiIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELAoiIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgoiIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5ECiIgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRQoiIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04KIiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04KIiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCmlmIGV4aXN0cygnZzpsb2FkZWRfcGx1ZycpCiAgZmluaXNoCmVuZGlmCmxldCBnOmxvYWRlZF9wbHVnID0gMQoKbGV0IHM6Y3BvX3NhdmUgPSAmY3BvCnNldCBjcG8mdmltCgpsZXQgczpwbHVnX3NyYyA9ICdodHRwczovL2dpdGh1Yi5jb20vanVuZWd1bm4vdmltLXBsdWcuZ2l0JwpsZXQgczpwbHVnX3RhYiA9IGdldChzOiwgJ3BsdWdfdGFiJywgLTEpCmxldCBzOnBsdWdfYnVmID0gZ2V0KHM6LCAncGx1Z19idWYnLCAtMSkKbGV0IHM6bWFjX2d1aSA9IGhhcygnZ3VpX21hY3ZpbScpICYmIGhhcygnZ3VpX3J1bm5pbmcnKQpsZXQgczppc193aW4gPSBoYXMoJ3dpbjMyJykKbGV0IHM6bnZpbSA9IGhhcygnbnZpbS0wLjInKSB8fCAoaGFzKCdudmltJykgJiYgZXhpc3RzKCcqam9id2FpdCcpICYmICFzOmlzX3dpbikKbGV0IHM6dmltOCA9IGhhcygncGF0Y2gtOC4wLjAwMzknKSAmJiBleGlzdHMoJypqb2Jfc3RhcnQnKQppZiBzOmlzX3dpbiAmJiAmc2hlbGxzbGFzaAogIHNldCBub3NoZWxsc2xhc2gKICBsZXQgczptZSA9IHJlc29sdmUoZXhwYW5kKCc8c2ZpbGU+OnAnKSkKICBzZXQgc2hlbGxzbGFzaAplbHNlCiAgbGV0IHM6bWUgPSByZXNvbHZlKGV4cGFuZCgnPHNmaWxlPjpwJykpCmVuZGlmCmxldCBzOmJhc2Vfc3BlYyA9IHsgJ2JyYW5jaCc6ICdtYXN0ZXInLCAnZnJvemVuJzogMCB9CmxldCBzOlRZUEUgPSB7ClwgICAnc3RyaW5nJzogIHR5cGUoJycpLApcICAgJ2xpc3QnOiAgICB0eXBlKFtdKSwKXCAgICdkaWN0JzogICAgdHlwZSh7fSksClwgICAnZnVuY3JlZic6IHR5cGUoZnVuY3Rpb24oJ2NhbGwnKSkKXCB9CmxldCBzOmxvYWRlZCA9IGdldChzOiwgJ2xvYWRlZCcsIHt9KQpsZXQgczp0cmlnZ2VycyA9IGdldChzOiwgJ3RyaWdnZXJzJywge30pCgppZiBzOmlzX3dpbgogIGZ1bmN0aW9uISBzOnBsdWdfY2FsbChmbiwgLi4uKQogICAgbGV0IHNoZWxsc2xhc2ggPSAmc2hlbGxzbGFzaAogICAgdHJ5CiAgICAgIHNldCBub3NoZWxsc2xhc2gKICAgICAgcmV0dXJuIGNhbGwoYTpmbiwgYTowMDApCiAgICBmaW5hbGx5CiAgICAgIGxldCAmc2hlbGxzbGFzaCA9IHNoZWxsc2xhc2gKICAgIGVuZHRyeQogIGVuZGZ1bmN0aW9uCmVsc2UKICBmdW5jdGlvbiEgczpwbHVnX2NhbGwoZm4sIC4uLikKICAgIHJldHVybiBjYWxsKGE6Zm4sIGE6MDAwKQogIGVuZGZ1bmN0aW9uCmVuZGlmCgpmdW5jdGlvbiEgczpwbHVnX2dldGN3ZCgpCiAgcmV0dXJuIHM6cGx1Z19jYWxsKCdnZXRjd2QnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cGx1Z19mbmFtZW1vZGlmeShmbmFtZSwgbW9kcykKICByZXR1cm4gczpwbHVnX2NhbGwoJ2ZuYW1lbW9kaWZ5JywgYTpmbmFtZSwgYTptb2RzKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cGx1Z19leHBhbmQoZm10KQogIHJldHVybiBzOnBsdWdfY2FsbCgnZXhwYW5kJywgYTpmbXQsIDEpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwbHVnX3RlbXBuYW1lKCkKICByZXR1cm4gczpwbHVnX2NhbGwoJ3RlbXBuYW1lJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBwbHVnI2JlZ2luKC4uLikKICBpZiBhOjAgPiAwCiAgICBsZXQgczpwbHVnX2hvbWVfb3JnID0gYToxCiAgICBsZXQgaG9tZSA9IHM6cGF0aChzOnBsdWdfZm5hbWVtb2RpZnkoczpwbHVnX2V4cGFuZChhOjEpLCAnOnAnKSkKICBlbHNlaWYgZXhpc3RzKCdnOnBsdWdfaG9tZScpCiAgICBsZXQgaG9tZSA9IHM6cGF0aChnOnBsdWdfaG9tZSkKICBlbHNlaWYgIWVtcHR5KCZydHApCiAgICBsZXQgaG9tZSA9IHM6cGF0aChzcGxpdCgmcnRwLCAnLCcpWzBdKSAuICcvcGx1Z2dlZCcKICBlbHNlCiAgICByZXR1cm4gczplcnIoJ1VuYWJsZSB0byBkZXRlcm1pbmUgcGx1ZyBob21lLiBUcnkgY2FsbGluZyBwbHVnI2JlZ2luKCkgd2l0aCBhIHBhdGggYXJndW1lbnQuJykKICBlbmRpZgogIGlmIHM6cGx1Z19mbmFtZW1vZGlmeShob21lLCAnOnQnKSA9PSMgJ3BsdWdpbicgJiYgczpwbHVnX2ZuYW1lbW9kaWZ5KGhvbWUsICc6aCcpID09IyBzOmZpcnN0X3J0cAogICAgcmV0dXJuIHM6ZXJyKCdJbnZhbGlkIHBsdWcgaG9tZS4gJy5ob21lLicgaXMgYSBzdGFuZGFyZCBWaW0gcnVudGltZSBwYXRoIGFuZCBpcyBub3QgYWxsb3dlZC4nKQogIGVuZGlmCgogIGxldCBnOnBsdWdfaG9tZSA9IGhvbWUKICBsZXQgZzpwbHVncyA9IHt9CiAgbGV0IGc6cGx1Z3Nfb3JkZXIgPSBbXQogIGxldCBzOnRyaWdnZXJzID0ge30KCiAgY2FsbCBzOmRlZmluZV9jb21tYW5kcygpCiAgcmV0dXJuIDEKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRlZmluZV9jb21tYW5kcygpCiAgY29tbWFuZCEgLW5hcmdzPSsgLWJhciBQbHVnIGNhbGwgcGx1ZyMoPGFyZ3M+KQogIGlmICFleGVjdXRhYmxlKCdnaXQnKQogICAgcmV0dXJuIHM6ZXJyKCdgZ2l0YCBleGVjdXRhYmxlIG5vdCBmb3VuZC4gTW9zdCBjb21tYW5kcyB3aWxsIG5vdCBiZSBhdmFpbGFibGUuIFRvIHN1cHByZXNzIHRoaXMgbWVzc2FnZSwgcHJlcGVuZCBgc2lsZW50IWAgdG8gYGNhbGwgcGx1ZyNiZWdpbiguLi4pYC4nKQogIGVuZGlmCiAgaWYgaGFzKCd3aW4zMicpCiAgXCAmJiAmc2hlbGxzbGFzaAogIFwgJiYgKCZzaGVsbCA9fiMgJ2NtZFwuZXhlJyB8fCAmc2hlbGwgPX4jICdwb3dlcnNoZWxsXC5leGUnKQogICAgcmV0dXJuIHM6ZXJyKCd2aW0tcGx1ZyBkb2VzIG5vdCBzdXBwb3J0IHNoZWxsLCAnIC4gJnNoZWxsIC4gJywgd2hlbiBzaGVsbHNsYXNoIGlzIHNldC4nKQogIGVuZGlmCiAgaWYgIWhhcygnbnZpbScpCiAgICBcICYmIChoYXMoJ3dpbjMyJykgfHwgaGFzKCd3aW4zMnVuaXgnKSkKICAgIFwgJiYgIWhhcygnbXVsdGlfYnl0ZScpCiAgICByZXR1cm4gczplcnIoJ1ZpbSBuZWVkcyArbXVsdGlfYnl0ZSBmZWF0dXJlIG9uIFdpbmRvd3MgdG8gcnVuIHNoZWxsIGNvbW1hbmRzLiBFbmFibGUgK2ljb252IGZvciBiZXN0IHJlc3VsdHMuJykKICBlbmRpZgogIGNvbW1hbmQhIC1uYXJncz0qIC1iYXIgLWJhbmcgLWNvbXBsZXRlPWN1c3RvbWxpc3QsczpuYW1lcyBQbHVnSW5zdGFsbCBjYWxsIHM6aW5zdGFsbCg8YmFuZz4wLCBbPGYtYXJncz5dKQogIGNvbW1hbmQhIC1uYXJncz0qIC1iYXIgLWJhbmcgLWNvbXBsZXRlPWN1c3RvbWxpc3QsczpuYW1lcyBQbHVnVXBkYXRlICBjYWxsIHM6dXBkYXRlKDxiYW5nPjAsIFs8Zi1hcmdzPl0pCiAgY29tbWFuZCEgLW5hcmdzPTAgLWJhciAtYmFuZyBQbHVnQ2xlYW4gY2FsbCBzOmNsZWFuKDxiYW5nPjApCiAgY29tbWFuZCEgLW5hcmdzPTAgLWJhciBQbHVnVXBncmFkZSBpZiBzOnVwZ3JhZGUoKSB8IGV4ZWN1dGUgJ3NvdXJjZScgczplc2MoczptZSkgfCBlbmRpZgogIGNvbW1hbmQhIC1uYXJncz0wIC1iYXIgUGx1Z1N0YXR1cyAgY2FsbCBzOnN0YXR1cygpCiAgY29tbWFuZCEgLW5hcmdzPTAgLWJhciBQbHVnRGlmZiAgICBjYWxsIHM6ZGlmZigpCiAgY29tbWFuZCEgLW5hcmdzPT8gLWJhciAtYmFuZyAtY29tcGxldGU9ZmlsZSBQbHVnU25hcHNob3QgY2FsbCBzOnNuYXBzaG90KDxiYW5nPjAsIDxmLWFyZ3M+KQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dG9fYSh2KQogIHJldHVybiB0eXBlKGE6dikgPT0gczpUWVBFLmxpc3QgPyBhOnYgOiBbYTp2XQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dG9fcyh2KQogIHJldHVybiB0eXBlKGE6dikgPT0gczpUWVBFLnN0cmluZyA/IGE6diA6IGpvaW4oYTp2LCAiXG4iKSAuICJcbiIKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdsb2IoZnJvbSwgcGF0dGVybikKICByZXR1cm4gczpsaW5lcyhnbG9icGF0aChhOmZyb20sIGE6cGF0dGVybikpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzb3VyY2UoZnJvbSwgLi4uKQogIGxldCBmb3VuZCA9IDAKICBmb3IgcGF0dGVybiBpbiBhOjAwMAogICAgZm9yIHZpbSBpbiBzOmdsb2IoYTpmcm9tLCBwYXR0ZXJuKQogICAgICBleGVjdXRlICdzb3VyY2UnIHM6ZXNjKHZpbSkKICAgICAgbGV0IGZvdW5kID0gMQogICAgZW5kZm9yCiAgZW5kZm9yCiAgcmV0dXJuIGZvdW5kCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczphc3NvYyhkaWN0LCBrZXksIHZhbCkKICBsZXQgYTpkaWN0W2E6a2V5XSA9IGFkZChnZXQoYTpkaWN0LCBhOmtleSwgW10pLCBhOnZhbCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmFzayhtZXNzYWdlLCAuLi4pCiAgY2FsbCBpbnB1dHNhdmUoKQogIGVjaG9obCBXYXJuaW5nTXNnCiAgbGV0IGFuc3dlciA9IGlucHV0KGE6bWVzc2FnZS4oYTowID8gJyAoeS9OL2EpICcgOiAnICh5L04pICcpKQogIGVjaG9obCBOb25lCiAgY2FsbCBpbnB1dHJlc3RvcmUoKQogIGVjaG8gIlxyIgogIHJldHVybiAoYTowICYmIGFuc3dlciA9fj8gJ15hJykgPyAyIDogKGFuc3dlciA9fj8gJ155JykgPyAxIDogMAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXNrX25vX2ludGVycnVwdCguLi4pCiAgdHJ5CiAgICByZXR1cm4gY2FsbCgnczphc2snLCBhOjAwMCkKICBjYXRjaAogICAgcmV0dXJuIDAKICBlbmR0cnkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxhenkocGx1Zywgb3B0KQogIHJldHVybiBoYXNfa2V5KGE6cGx1ZywgYTpvcHQpICYmCiAgICAgICAgXCAoZW1wdHkoczp0b19hKGE6cGx1Z1thOm9wdF0pKSAgICAgICAgIHx8CiAgICAgICAgXCAgIWlzZGlyZWN0b3J5KGE6cGx1Zy5kaXIpICAgICAgICAgICAgIHx8CiAgICAgICAgXCAgbGVuKHM6Z2xvYihzOnJ0cChhOnBsdWcpLCAncGx1Z2luJykpIHx8CiAgICAgICAgXCAgbGVuKHM6Z2xvYihzOnJ0cChhOnBsdWcpLCAnYWZ0ZXIvcGx1Z2luJykpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHBsdWcjZW5kKCkKICBpZiAhZXhpc3RzKCdnOnBsdWdzJykKICAgIHJldHVybiBzOmVycigncGx1ZyNlbmQoKSBjYWxsZWQgd2l0aG91dCBjYWxsaW5nIHBsdWcjYmVnaW4oKSBmaXJzdCcpCiAgZW5kaWYKCiAgaWYgZXhpc3RzKCcjUGx1Z0xPRCcpCiAgICBhdWdyb3VwIFBsdWdMT0QKICAgICAgYXV0b2NtZCEKICAgIGF1Z3JvdXAgRU5ECiAgICBhdWdyb3VwISBQbHVnTE9ECiAgZW5kaWYKICBsZXQgbG9kID0geyAnZnQnOiB7fSwgJ21hcCc6IHt9LCAnY21kJzoge30gfQoKICBpZiBleGlzdHMoJ2c6ZGlkX2xvYWRfZmlsZXR5cGVzJykKICAgIGZpbGV0eXBlIG9mZgogIGVuZGlmCiAgZm9yIG5hbWUgaW4gZzpwbHVnc19vcmRlcgogICAgaWYgIWhhc19rZXkoZzpwbHVncywgbmFtZSkKICAgICAgY29udGludWUKICAgIGVuZGlmCiAgICBsZXQgcGx1ZyA9IGc6cGx1Z3NbbmFtZV0KICAgIGlmIGdldChzOmxvYWRlZCwgbmFtZSwgMCkgfHwgIXM6bGF6eShwbHVnLCAnb24nKSAmJiAhczpsYXp5KHBsdWcsICdmb3InKQogICAgICBsZXQgczpsb2FkZWRbbmFtZV0gPSAxCiAgICAgIGNvbnRpbnVlCiAgICBlbmRpZgoKICAgIGlmIGhhc19rZXkocGx1ZywgJ29uJykKICAgICAgbGV0IHM6dHJpZ2dlcnNbbmFtZV0gPSB7ICdtYXAnOiBbXSwgJ2NtZCc6IFtdIH0KICAgICAgZm9yIGNtZCBpbiBzOnRvX2EocGx1Zy5vbikKICAgICAgICBpZiBjbWQgPX4/ICdePFBsdWc+LlwrJwogICAgICAgICAgaWYgZW1wdHkobWFwY2hlY2soY21kKSkgJiYgZW1wdHkobWFwY2hlY2soY21kLCAnaScpKQogICAgICAgICAgICBjYWxsIHM6YXNzb2MobG9kLm1hcCwgY21kLCBuYW1lKQogICAgICAgICAgZW5kaWYKICAgICAgICAgIGNhbGwgYWRkKHM6dHJpZ2dlcnNbbmFtZV0ubWFwLCBjbWQpCiAgICAgICAgZWxzZWlmIGNtZCA9fiMgJ15bQS1aXScKICAgICAgICAgIGxldCBjbWQgPSBzdWJzdGl0dXRlKGNtZCwgJyEqJCcsICcnLCAnJykKICAgICAgICAgIGlmIGV4aXN0cygnOicuY21kKSAhPSAyCiAgICAgICAgICAgIGNhbGwgczphc3NvYyhsb2QuY21kLCBjbWQsIG5hbWUpCiAgICAgICAgICBlbmRpZgogICAgICAgICAgY2FsbCBhZGQoczp0cmlnZ2Vyc1tuYW1lXS5jbWQsIGNtZCkKICAgICAgICBlbHNlCiAgICAgICAgICBjYWxsIHM6ZXJyKCdJbnZhbGlkIGBvbmAgb3B0aW9uOiAnLmNtZC4KICAgICAgICAgIFwgJy4gU2hvdWxkIHN0YXJ0IHdpdGggYW4gdXBwZXJjYXNlIGxldHRlciBvciBgPFBsdWc+YC4nKQogICAgICAgIGVuZGlmCiAgICAgIGVuZGZvcgogICAgZW5kaWYKCiAgICBpZiBoYXNfa2V5KHBsdWcsICdmb3InKQogICAgICBsZXQgdHlwZXMgPSBzOnRvX2EocGx1Zy5mb3IpCiAgICAgIGlmICFlbXB0eSh0eXBlcykKICAgICAgICBhdWdyb3VwIGZpbGV0eXBlZGV0ZWN0CiAgICAgICAgY2FsbCBzOnNvdXJjZShzOnJ0cChwbHVnKSwgJ2Z0ZGV0ZWN0LyoqLyoudmltJywgJ2FmdGVyL2Z0ZGV0ZWN0LyoqLyoudmltJykKICAgICAgICBhdWdyb3VwIEVORAogICAgICBlbmRpZgogICAgICBmb3IgdHlwZSBpbiB0eXBlcwogICAgICAgIGNhbGwgczphc3NvYyhsb2QuZnQsIHR5cGUsIG5hbWUpCiAgICAgIGVuZGZvcgogICAgZW5kaWYKICBlbmRmb3IKCiAgZm9yIFtjbWQsIG5hbWVzXSBpbiBpdGVtcyhsb2QuY21kKQogICAgZXhlY3V0ZSBwcmludGYoCiAgICBcICdjb21tYW5kISAtbmFyZ3M9KiAtcmFuZ2UgLWJhbmcgLWNvbXBsZXRlPWZpbGUgJXMgY2FsbCBzOmxvZF9jbWQoJXMsICI8YmFuZz4iLCA8bGluZTE+LCA8bGluZTI+LCA8cS1hcmdzPiwgJXMpJywKICAgIFwgY21kLCBzdHJpbmcoY21kKSwgc3RyaW5nKG5hbWVzKSkKICBlbmRmb3IKCiAgZm9yIFttYXAsIG5hbWVzXSBpbiBpdGVtcyhsb2QubWFwKQogICAgZm9yIFttb2RlLCBtYXBfcHJlZml4LCBrZXlfcHJlZml4XSBpbgogICAgICAgICAgXCBbWydpJywgJzxDLU8+JywgJyddLCBbJ24nLCAnJywgJyddLCBbJ3YnLCAnJywgJ2d2J10sIFsnbycsICcnLCAnJ11dCiAgICAgIGV4ZWN1dGUgcHJpbnRmKAogICAgICBcICclc25vcmVtYXAgPHNpbGVudD4gJXMgJXM6PEMtVT5jYWxsIDxTSUQ+bG9kX21hcCglcywgJXMsICVzLCAiJXMiKTxDUj4nLAogICAgICBcIG1vZGUsIG1hcCwgbWFwX3ByZWZpeCwgc3RyaW5nKG1hcCksIHN0cmluZyhuYW1lcyksIG1vZGUgIT0gJ2knLCBrZXlfcHJlZml4KQogICAgZW5kZm9yCiAgZW5kZm9yCgogIGZvciBbZnQsIG5hbWVzXSBpbiBpdGVtcyhsb2QuZnQpCiAgICBhdWdyb3VwIFBsdWdMT0QKICAgICAgZXhlY3V0ZSBwcmludGYoJ2F1dG9jbWQgRmlsZVR5cGUgJXMgY2FsbCA8U0lEPmxvZF9mdCglcywgJXMpJywKICAgICAgICAgICAgXCBmdCwgc3RyaW5nKGZ0KSwgc3RyaW5nKG5hbWVzKSkKICAgIGF1Z3JvdXAgRU5ECiAgZW5kZm9yCgogIGNhbGwgczpyZW9yZ19ydHAoKQogIGZpbGV0eXBlIHBsdWdpbiBpbmRlbnQgb24KICBpZiBoYXMoJ3ZpbV9zdGFydGluZycpCiAgICBpZiBoYXMoJ3N5bnRheCcpICYmICFleGlzdHMoJ2c6c3ludGF4X29uJykKICAgICAgc3ludGF4IGVuYWJsZQogICAgZW5kCiAgZWxzZQogICAgY2FsbCBzOnJlbG9hZF9wbHVnaW5zKCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9hZGVkX25hbWVzKCkKICByZXR1cm4gZmlsdGVyKGNvcHkoZzpwbHVnc19vcmRlciksICdnZXQoczpsb2FkZWQsIHY6dmFsLCAwKScpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsb2FkX3BsdWdpbihzcGVjKQogIGNhbGwgczpzb3VyY2UoczpydHAoYTpzcGVjKSwgJ3BsdWdpbi8qKi8qLnZpbScsICdhZnRlci9wbHVnaW4vKiovKi52aW0nKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cmVsb2FkX3BsdWdpbnMoKQogIGZvciBuYW1lIGluIHM6bG9hZGVkX25hbWVzKCkKICAgIGNhbGwgczpsb2FkX3BsdWdpbihnOnBsdWdzW25hbWVdKQogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dHJpbShzdHIpCiAgcmV0dXJuIHN1YnN0aXR1dGUoYTpzdHIsICdbXC9dXCskJywgJycsICcnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dmVyc2lvbl9yZXF1aXJlbWVudCh2YWwsIG1pbikKICBmb3IgaWR4IGluIHJhbmdlKDAsIGxlbihhOm1pbikgLSAxKQogICAgbGV0IHYgPSBnZXQoYTp2YWwsIGlkeCwgMCkKICAgIGlmICAgICB2IDwgYTptaW5baWR4XSB8IHJldHVybiAwCiAgICBlbHNlaWYgdiA+IGE6bWluW2lkeF0gfCByZXR1cm4gMQogICAgZW5kaWYKICBlbmRmb3IKICByZXR1cm4gMQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoLi4uKQogIGlmICFleGlzdHMoJ3M6Z2l0X3ZlcnNpb24nKQogICAgbGV0IHM6Z2l0X3ZlcnNpb24gPSBtYXAoc3BsaXQoc3BsaXQoczpzeXN0ZW0oJ2dpdCAtLXZlcnNpb24nKSlbMl0sICdcLicpLCAnc3RyMm5yKHY6dmFsKScpCiAgZW5kaWYKICByZXR1cm4gczp2ZXJzaW9uX3JlcXVpcmVtZW50KHM6Z2l0X3ZlcnNpb24sIGE6MDAwKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJvZ3Jlc3Nfb3B0KGJhc2UpCiAgcmV0dXJuIGE6YmFzZSAmJiAhczppc193aW4gJiYKICAgICAgICBcIHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoMSwgNywgMSkgPyAnLS1wcm9ncmVzcycgOiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cnRwKHNwZWMpCiAgcmV0dXJuIHM6cGF0aChhOnNwZWMuZGlyIC4gZ2V0KGE6c3BlYywgJ3J0cCcsICcnKSkKZW5kZnVuY3Rpb24KCmlmIHM6aXNfd2luCiAgZnVuY3Rpb24hIHM6cGF0aChwYXRoKQogICAgcmV0dXJuIHM6dHJpbShzdWJzdGl0dXRlKGE6cGF0aCwgJy8nLCAnXCcsICdnJykpCiAgZW5kZnVuY3Rpb24KCiAgZnVuY3Rpb24hIHM6ZGlycGF0aChwYXRoKQogICAgcmV0dXJuIHM6cGF0aChhOnBhdGgpIC4gJ1wnCiAgZW5kZnVuY3Rpb24KCiAgZnVuY3Rpb24hIHM6aXNfbG9jYWxfcGx1ZyhyZXBvKQogICAgcmV0dXJuIGE6cmVwbyA9fj8gJ15bYS16XTpcfF5bJX5dJwogIGVuZGZ1bmN0aW9uCgogICIgQ29waWVkIGZyb20gZnpmCiAgZnVuY3Rpb24hIHM6d3JhcF9jbWRzKGNtZHMpCiAgICBsZXQgY21kcyA9IFsKICAgICAgXCAnQGVjaG8gb2ZmJywKICAgICAgXCAnc2V0bG9jYWwgZW5hYmxlZGVsYXllZGV4cGFuc2lvbiddCiAgICBcICsgKHR5cGUoYTpjbWRzKSA9PSB0eXBlKFtdKSA/IGE6Y21kcyA6IFthOmNtZHNdKQogICAgXCArIFsnZW5kbG9jYWwnXQogICAgaWYgaGFzKCdpY29udicpCiAgICAgIGlmICFleGlzdHMoJ3M6Y29kZXBhZ2UnKQogICAgICAgIGxldCBzOmNvZGVwYWdlID0gbGliY2FsbG5yKCdrZXJuZWwzMi5kbGwnLCAnR2V0QUNQJywgMCkKICAgICAgZW5kaWYKICAgICAgcmV0dXJuIG1hcChjbWRzLCBwcmludGYoJ2ljb252KHY6dmFsLiJcciIsICIlcyIsICJjcCVkIiknLCAmZW5jb2RpbmcsIHM6Y29kZXBhZ2UpKQogICAgZW5kaWYKICAgIHJldHVybiBtYXAoY21kcywgJ3Y6dmFsLiJcciInKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9uISBzOmJhdGNoZmlsZShjbWQpCiAgICBsZXQgYmF0Y2hmaWxlID0gczpwbHVnX3RlbXBuYW1lKCkuJy5iYXQnCiAgICBjYWxsIHdyaXRlZmlsZShzOndyYXBfY21kcyhhOmNtZCksIGJhdGNoZmlsZSkKICAgIGxldCBjbWQgPSBwbHVnI3NoZWxsZXNjYXBlKGJhdGNoZmlsZSwgeydzaGVsbCc6ICZzaGVsbCwgJ3NjcmlwdCc6IDB9KQogICAgaWYgJnNoZWxsID1+IyAncG93ZXJzaGVsbFwuZXhlJwogICAgICBsZXQgY21kID0gJyYgJyAuIGNtZAogICAgZW5kaWYKICAgIHJldHVybiBbYmF0Y2hmaWxlLCBjbWRdCiAgZW5kZnVuY3Rpb24KZWxzZQogIGZ1bmN0aW9uISBzOnBhdGgocGF0aCkKICAgIHJldHVybiBzOnRyaW0oYTpwYXRoKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9uISBzOmRpcnBhdGgocGF0aCkKICAgIHJldHVybiBzdWJzdGl0dXRlKGE6cGF0aCwgJ1svXFxdKiQnLCAnLycsICcnKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9uISBzOmlzX2xvY2FsX3BsdWcocmVwbykKICAgIHJldHVybiBhOnJlcG9bMF0gPX4gJ1svJH5dJwogIGVuZGZ1bmN0aW9uCmVuZGlmCgpmdW5jdGlvbiEgczplcnIobXNnKQogIGVjaG9obCBFcnJvck1zZwogIGVjaG9tICdbdmltLXBsdWddICcuYTptc2cKICBlY2hvaGwgTm9uZQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6d2FybihjbWQsIG1zZykKICBlY2hvaGwgV2FybmluZ01zZwogIGV4ZWN1dGUgYTpjbWQgJ2E6bXNnJwogIGVjaG9obCBOb25lCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczplc2MocGF0aCkKICByZXR1cm4gZXNjYXBlKGE6cGF0aCwgJyAnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZXNjcnRwKHBhdGgpCiAgcmV0dXJuIGVzY2FwZShhOnBhdGgsICcgLCcpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZW1vdmVfcnRwKCkKICBmb3IgbmFtZSBpbiBzOmxvYWRlZF9uYW1lcygpCiAgICBsZXQgcnRwID0gczpydHAoZzpwbHVnc1tuYW1lXSkKICAgIGV4ZWN1dGUgJ3NldCBydHAtPScuczplc2NydHAocnRwKQogICAgbGV0IGFmdGVyID0gZ2xvYnBhdGgocnRwLCAnYWZ0ZXInKQogICAgaWYgaXNkaXJlY3RvcnkoYWZ0ZXIpCiAgICAgIGV4ZWN1dGUgJ3NldCBydHAtPScuczplc2NydHAoYWZ0ZXIpCiAgICBlbmRpZgogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cmVvcmdfcnRwKCkKICBpZiAhZW1wdHkoczpmaXJzdF9ydHApCiAgICBleGVjdXRlICdzZXQgcnRwLT0nLnM6Zmlyc3RfcnRwCiAgICBleGVjdXRlICdzZXQgcnRwLT0nLnM6bGFzdF9ydHAKICBlbmRpZgoKICAiICZydHAgaXMgbW9kaWZpZWQgZnJvbSBvdXRzaWRlCiAgaWYgZXhpc3RzKCdzOnBydHAnKSAmJiBzOnBydHAgIT0jICZydHAKICAgIGNhbGwgczpyZW1vdmVfcnRwKCkKICAgIHVubGV0ISBzOm1pZGRsZQogIGVuZGlmCgogIGxldCBzOm1pZGRsZSA9IGdldChzOiwgJ21pZGRsZScsICZydHApCiAgbGV0IHJ0cHMgICAgID0gbWFwKHM6bG9hZGVkX25hbWVzKCksICdzOnJ0cChnOnBsdWdzW3Y6dmFsXSknKQogIGxldCBhZnRlcnMgICA9IGZpbHRlcihtYXAoY29weShydHBzKSwgJ2dsb2JwYXRoKHY6dmFsLCAiYWZ0ZXIiKScpLCAnIWVtcHR5KHY6dmFsKScpCiAgbGV0IHJ0cCAgICAgID0gam9pbihtYXAocnRwcywgJ2VzY2FwZSh2OnZhbCwgIiwiKScpLCAnLCcpCiAgICAgICAgICAgICAgICAgXCAuICcsJy5zOm1pZGRsZS4nLCcKICAgICAgICAgICAgICAgICBcIC4gam9pbihtYXAoYWZ0ZXJzLCAnZXNjYXBlKHY6dmFsLCAiLCIpJyksICcsJykKICBsZXQgJnJ0cCAgICAgPSBzdWJzdGl0dXRlKHN1YnN0aXR1dGUocnRwLCAnLCwqJywgJywnLCAnZycpLCAnXixcfCwkJywgJycsICdnJykKICBsZXQgczpwcnRwICAgPSAmcnRwCgogIGlmICFlbXB0eShzOmZpcnN0X3J0cCkKICAgIGV4ZWN1dGUgJ3NldCBydHBePScuczpmaXJzdF9ydHAKICAgIGV4ZWN1dGUgJ3NldCBydHArPScuczpsYXN0X3J0cAogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpkb2F1dG9jbWQoLi4uKQogIGlmIGV4aXN0cygnIycuam9pbihhOjAwMCwgJyMnKSkKICAgIGV4ZWN1dGUgJ2RvYXV0b2NtZCcgKCh2OnZlcnNpb24gPiA3MDMgfHwgaGFzKCdwYXRjaDQ0MicpKSA/ICc8bm9tb2RlbGluZT4nIDogJycpIGpvaW4oYTowMDApCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRvYnVmcmVhZChuYW1lcykKICBmb3IgbmFtZSBpbiBhOm5hbWVzCiAgICBsZXQgcGF0aCA9IHM6cnRwKGc6cGx1Z3NbbmFtZV0pCiAgICBmb3IgZGlyIGluIFsnZnRkZXRlY3QnLCAnZnRwbHVnaW4nLCAnYWZ0ZXIvZnRkZXRlY3QnLCAnYWZ0ZXIvZnRwbHVnaW4nXQogICAgICBpZiBsZW4oZmluZGRpcihkaXIsIHBhdGgpKQogICAgICAgIGlmIGV4aXN0cygnI0J1ZlJlYWQnKQogICAgICAgICAgZG9hdXRvY21kIEJ1ZlJlYWQKICAgICAgICBlbmRpZgogICAgICAgIHJldHVybgogICAgICBlbmRpZgogICAgZW5kZm9yCiAgZW5kZm9yCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgcGx1ZyNsb2FkKC4uLikKICBpZiBhOjAgPT0gMAogICAgcmV0dXJuIHM6ZXJyKCdBcmd1bWVudCBtaXNzaW5nOiBwbHVnaW4gbmFtZShzKSByZXF1aXJlZCcpCiAgZW5kaWYKICBpZiAhZXhpc3RzKCdnOnBsdWdzJykKICAgIHJldHVybiBzOmVycigncGx1ZyNiZWdpbiB3YXMgbm90IGNhbGxlZCcpCiAgZW5kaWYKICBsZXQgbmFtZXMgPSBhOjAgPT0gMSAmJiB0eXBlKGE6MSkgPT0gczpUWVBFLmxpc3QgPyBhOjEgOiBhOjAwMAogIGxldCB1bmtub3ducyA9IGZpbHRlcihjb3B5KG5hbWVzKSwgJyFoYXNfa2V5KGc6cGx1Z3MsIHY6dmFsKScpCiAgaWYgIWVtcHR5KHVua25vd25zKQogICAgbGV0IHMgPSBsZW4odW5rbm93bnMpID4gMSA/ICdzJyA6ICcnCiAgICByZXR1cm4gczplcnIocHJpbnRmKCdVbmtub3duIHBsdWdpbiVzOiAlcycsIHMsIGpvaW4odW5rbm93bnMsICcsICcpKSkKICBlbmQKICBsZXQgdW5sb2FkZWQgPSBmaWx0ZXIoY29weShuYW1lcyksICchZ2V0KHM6bG9hZGVkLCB2OnZhbCwgMCknKQogIGlmICFlbXB0eSh1bmxvYWRlZCkKICAgIGZvciBuYW1lIGluIHVubG9hZGVkCiAgICAgIGNhbGwgczpsb2QoW25hbWVdLCBbJ2Z0ZGV0ZWN0JywgJ2FmdGVyL2Z0ZGV0ZWN0JywgJ3BsdWdpbicsICdhZnRlci9wbHVnaW4nXSkKICAgIGVuZGZvcgogICAgY2FsbCBzOmRvYnVmcmVhZCh1bmxvYWRlZCkKICAgIHJldHVybiAxCiAgZW5kCiAgcmV0dXJuIDAKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnJlbW92ZV90cmlnZ2VycyhuYW1lKQogIGlmICFoYXNfa2V5KHM6dHJpZ2dlcnMsIGE6bmFtZSkKICAgIHJldHVybgogIGVuZGlmCiAgZm9yIGNtZCBpbiBzOnRyaWdnZXJzW2E6bmFtZV0uY21kCiAgICBleGVjdXRlICdzaWxlbnQhIGRlbGMnIGNtZAogIGVuZGZvcgogIGZvciBtYXAgaW4gczp0cmlnZ2Vyc1thOm5hbWVdLm1hcAogICAgZXhlY3V0ZSAnc2lsZW50ISB1bm1hcCcgbWFwCiAgICBleGVjdXRlICdzaWxlbnQhIGl1bm1hcCcgbWFwCiAgZW5kZm9yCiAgY2FsbCByZW1vdmUoczp0cmlnZ2VycywgYTpuYW1lKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9kKG5hbWVzLCB0eXBlcywgLi4uKQogIGZvciBuYW1lIGluIGE6bmFtZXMKICAgIGNhbGwgczpyZW1vdmVfdHJpZ2dlcnMobmFtZSkKICAgIGxldCBzOmxvYWRlZFtuYW1lXSA9IDEKICBlbmRmb3IKICBjYWxsIHM6cmVvcmdfcnRwKCkKCiAgZm9yIG5hbWUgaW4gYTpuYW1lcwogICAgbGV0IHJ0cCA9IHM6cnRwKGc6cGx1Z3NbbmFtZV0pCiAgICBmb3IgZGlyIGluIGE6dHlwZXMKICAgICAgY2FsbCBzOnNvdXJjZShydHAsIGRpci4nLyoqLyoudmltJykKICAgIGVuZGZvcgogICAgaWYgYTowCiAgICAgIGlmICFzOnNvdXJjZShydHAsIGE6MSkgJiYgIWVtcHR5KHM6Z2xvYihydHAsIGE6MikpCiAgICAgICAgZXhlY3V0ZSAncnVudGltZScgYToxCiAgICAgIGVuZGlmCiAgICAgIGNhbGwgczpzb3VyY2UocnRwLCBhOjIpCiAgICBlbmRpZgogICAgY2FsbCBzOmRvYXV0b2NtZCgnVXNlcicsIG5hbWUpCiAgZW5kZm9yCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsb2RfZnQocGF0LCBuYW1lcykKICBsZXQgc3luID0gJ3N5bnRheC8nLmE6cGF0LicudmltJwogIGNhbGwgczpsb2QoYTpuYW1lcywgWydwbHVnaW4nLCAnYWZ0ZXIvcGx1Z2luJ10sIHN5biwgJ2FmdGVyLycuc3luKQogIGV4ZWN1dGUgJ2F1dG9jbWQhIFBsdWdMT0QgRmlsZVR5cGUnIGE6cGF0CiAgY2FsbCBzOmRvYXV0b2NtZCgnZmlsZXR5cGVwbHVnaW4nLCAnRmlsZVR5cGUnKQogIGNhbGwgczpkb2F1dG9jbWQoJ2ZpbGV0eXBlaW5kZW50JywgJ0ZpbGVUeXBlJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZF9jbWQoY21kLCBiYW5nLCBsMSwgbDIsIGFyZ3MsIG5hbWVzKQogIGNhbGwgczpsb2QoYTpuYW1lcywgWydmdGRldGVjdCcsICdhZnRlci9mdGRldGVjdCcsICdwbHVnaW4nLCAnYWZ0ZXIvcGx1Z2luJ10pCiAgY2FsbCBzOmRvYnVmcmVhZChhOm5hbWVzKQogIGV4ZWN1dGUgcHJpbnRmKCclcyVzJXMgJXMnLCAoYTpsMSA9PSBhOmwyID8gJycgOiAoYTpsMS4nLCcuYTpsMikpLCBhOmNtZCwgYTpiYW5nLCBhOmFyZ3MpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsb2RfbWFwKG1hcCwgbmFtZXMsIHdpdGhfcHJlZml4LCBwcmVmaXgpCiAgY2FsbCBzOmxvZChhOm5hbWVzLCBbJ2Z0ZGV0ZWN0JywgJ2FmdGVyL2Z0ZGV0ZWN0JywgJ3BsdWdpbicsICdhZnRlci9wbHVnaW4nXSkKICBjYWxsIHM6ZG9idWZyZWFkKGE6bmFtZXMpCiAgbGV0IGV4dHJhID0gJycKICB3aGlsZSAxCiAgICBsZXQgYyA9IGdldGNoYXIoMCkKICAgIGlmIGMgPT0gMAogICAgICBicmVhawogICAgZW5kaWYKICAgIGxldCBleHRyYSAuPSBucjJjaGFyKGMpCiAgZW5kd2hpbGUKCiAgaWYgYTp3aXRoX3ByZWZpeAogICAgbGV0IHByZWZpeCA9IHY6Y291bnQgPyB2OmNvdW50IDogJycKICAgIGxldCBwcmVmaXggLj0gJyInLnY6cmVnaXN0ZXIuYTpwcmVmaXgKICAgIGlmIG1vZGUoMSkgPT0gJ25vJwogICAgICBpZiB2Om9wZXJhdG9yID09ICdjJwogICAgICAgIGxldCBwcmVmaXggPSAiXDxlc2M+IiAuIHByZWZpeAogICAgICBlbmRpZgogICAgICBsZXQgcHJlZml4IC49IHY6b3BlcmF0b3IKICAgIGVuZGlmCiAgICBjYWxsIGZlZWRrZXlzKHByZWZpeCwgJ24nKQogIGVuZGlmCiAgY2FsbCBmZWVka2V5cyhzdWJzdGl0dXRlKGE6bWFwLCAnXjxQbHVnPicsICJcPFBsdWc+IiwgJycpIC4gZXh0cmEpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgcGx1ZyMocmVwbywgLi4uKQogIGlmIGE6MCA+IDEKICAgIHJldHVybiBzOmVycignSW52YWxpZCBudW1iZXIgb2YgYXJndW1lbnRzICgxLi4yKScpCiAgZW5kaWYKCiAgdHJ5CiAgICBsZXQgcmVwbyA9IHM6dHJpbShhOnJlcG8pCiAgICBsZXQgb3B0cyA9IGE6MCA9PSAxID8gczpwYXJzZV9vcHRpb25zKGE6MSkgOiBzOmJhc2Vfc3BlYwogICAgbGV0IG5hbWUgPSBnZXQob3B0cywgJ2FzJywgczpwbHVnX2ZuYW1lbW9kaWZ5KHJlcG8sICc6dDpzP1wuZ2l0JD8/JykpCiAgICBsZXQgc3BlYyA9IGV4dGVuZChzOmluZmVyX3Byb3BlcnRpZXMobmFtZSwgcmVwbyksIG9wdHMpCiAgICBpZiAhaGFzX2tleShnOnBsdWdzLCBuYW1lKQogICAgICBjYWxsIGFkZChnOnBsdWdzX29yZGVyLCBuYW1lKQogICAgZW5kaWYKICAgIGxldCBnOnBsdWdzW25hbWVdID0gc3BlYwogICAgbGV0IHM6bG9hZGVkW25hbWVdID0gZ2V0KHM6bG9hZGVkLCBuYW1lLCAwKQogIGNhdGNoCiAgICByZXR1cm4gczplcnIodjpleGNlcHRpb24pCiAgZW5kdHJ5CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwYXJzZV9vcHRpb25zKGFyZykKICBsZXQgb3B0cyA9IGNvcHkoczpiYXNlX3NwZWMpCiAgbGV0IHR5cGUgPSB0eXBlKGE6YXJnKQogIGlmIHR5cGUgPT0gczpUWVBFLnN0cmluZwogICAgbGV0IG9wdHMudGFnID0gYTphcmcKICBlbHNlaWYgdHlwZSA9PSBzOlRZUEUuZGljdAogICAgY2FsbCBleHRlbmQob3B0cywgYTphcmcpCiAgICBpZiBoYXNfa2V5KG9wdHMsICdkaXInKQogICAgICBsZXQgb3B0cy5kaXIgPSBzOmRpcnBhdGgoczpwbHVnX2V4cGFuZChvcHRzLmRpcikpCiAgICBlbmRpZgogIGVsc2UKICAgIHRocm93ICdJbnZhbGlkIGFyZ3VtZW50IHR5cGUgKGV4cGVjdGVkOiBzdHJpbmcgb3IgZGljdGlvbmFyeSknCiAgZW5kaWYKICByZXR1cm4gb3B0cwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aW5mZXJfcHJvcGVydGllcyhuYW1lLCByZXBvKQogIGxldCByZXBvID0gYTpyZXBvCiAgaWYgczppc19sb2NhbF9wbHVnKHJlcG8pCiAgICByZXR1cm4geyAnZGlyJzogczpkaXJwYXRoKHM6cGx1Z19leHBhbmQocmVwbykpIH0KICBlbHNlCiAgICBpZiByZXBvID1+ICc6JwogICAgICBsZXQgdXJpID0gcmVwbwogICAgZWxzZQogICAgICBpZiByZXBvICF+ICcvJwogICAgICAgIHRocm93IHByaW50ZignSW52YWxpZCBhcmd1bWVudDogJXMgKGltcGxpY2l0IGB2aW0tc2NyaXB0cycnIGV4cGFuc2lvbiBpcyBkZXByZWNhdGVkKScsIHJlcG8pCiAgICAgIGVuZGlmCiAgICAgIGxldCBmbXQgPSBnZXQoZzosICdwbHVnX3VybF9mb3JtYXQnLCAnaHR0cHM6Ly9naXQ6OkBnaXRodWIuY29tLyVzLmdpdCcpCiAgICAgIGxldCB1cmkgPSBwcmludGYoZm10LCByZXBvKQogICAgZW5kaWYKICAgIHJldHVybiB7ICdkaXInOiBzOmRpcnBhdGgoZzpwbHVnX2hvbWUuJy8nLmE6bmFtZSksICd1cmknOiB1cmkgfQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczppbnN0YWxsKGZvcmNlLCBuYW1lcykKICBjYWxsIHM6dXBkYXRlX2ltcGwoMCwgYTpmb3JjZSwgYTpuYW1lcykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZGF0ZShmb3JjZSwgbmFtZXMpCiAgY2FsbCBzOnVwZGF0ZV9pbXBsKDEsIGE6Zm9yY2UsIGE6bmFtZXMpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgcGx1ZyNoZWxwdGFncygpCiAgaWYgIWV4aXN0cygnZzpwbHVncycpCiAgICByZXR1cm4gczplcnIoJ3BsdWcjYmVnaW4gd2FzIG5vdCBjYWxsZWQnKQogIGVuZGlmCiAgZm9yIHNwZWMgaW4gdmFsdWVzKGc6cGx1Z3MpCiAgICBsZXQgZG9jZCA9IGpvaW4oW3M6cnRwKHNwZWMpLCAnZG9jJ10sICcvJykKICAgIGlmIGlzZGlyZWN0b3J5KGRvY2QpCiAgICAgIHNpbGVudCEgZXhlY3V0ZSAnaGVscHRhZ3MnIHM6ZXNjKGRvY2QpCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiAxCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzeW50YXgoKQogIHN5bnRheCBjbGVhcgogIHN5bnRheCByZWdpb24gcGx1ZzEgc3RhcnQ9L1wlMWwvIGVuZD0vXCUybC8gY29udGFpbnM9cGx1Z051bWJlcgogIHN5bnRheCByZWdpb24gcGx1ZzIgc3RhcnQ9L1wlMmwvIGVuZD0vXCUzbC8gY29udGFpbnM9cGx1Z0JyYWNrZXQscGx1Z1gKICBzeW4gbWF0Y2ggcGx1Z051bWJlciAvWzAtOV1cK1swLTkuXSovIGNvbnRhaW5lZAogIHN5biBtYXRjaCBwbHVnQnJhY2tldCAvW1tcXV0vIGNvbnRhaW5lZAogIHN5biBtYXRjaCBwbHVnWCAveC8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdEYXNoIC9eLS8KICBzeW4gbWF0Y2ggcGx1Z1BsdXMgL14rLwogIHN5biBtYXRjaCBwbHVnU3RhciAvXiovCiAgc3luIG1hdGNoIHBsdWdNZXNzYWdlIC9cKF4tIFwpXEA8PS4qLwogIHN5biBtYXRjaCBwbHVnTmFtZSAvXCheLSBcKVxAPD1bXiBdKjovCiAgc3luIG1hdGNoIHBsdWdTaGEgL1wlKDogXClcQDw9WzAtOWEtZl1cezQsfSQvCiAgc3luIG1hdGNoIHBsdWdUYWcgLyh0YWc6IFteKV1cKykvCiAgc3luIG1hdGNoIHBsdWdJbnN0YWxsIC9cKF4rIFwpXEA8PVteOl0qLwogIHN5biBtYXRjaCBwbHVnVXBkYXRlIC9cKF4qIFwpXEA8PVteOl0qLwogIHN5biBtYXRjaCBwbHVnQ29tbWl0IC9eICBcWCpbMC05YS1mXVx7Nyw5fSAuKi8gY29udGFpbnM9cGx1Z1JlbERhdGUscGx1Z0VkZ2UscGx1Z1RhZwogIHN5biBtYXRjaCBwbHVnRWRnZSAvXiAgXFhcKyQvCiAgc3luIG1hdGNoIHBsdWdFZGdlIC9eICBcWCovIGNvbnRhaW5lZCBuZXh0Z3JvdXA9cGx1Z1NoYQogIHN5biBtYXRjaCBwbHVnU2hhIC9bMC05YS1mXVx7Nyw5fS8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdSZWxEYXRlIC8oW14pXSopJC8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdOb3RMb2FkZWQgLyhub3QgbG9hZGVkKSQvCiAgc3luIG1hdGNoIHBsdWdFcnJvciAvXnguKi8KICBzeW4gcmVnaW9uIHBsdWdEZWxldGVkIHN0YXJ0PS9eXH4gLiovIGVuZD0vXlx6ZVxTLwogIHN5biBtYXRjaCBwbHVnSDIgL14uKjpcbi1cKyQvCiAgc3luIGtleXdvcmQgRnVuY3Rpb24gUGx1Z0luc3RhbGwgUGx1Z1N0YXR1cyBQbHVnVXBkYXRlIFBsdWdDbGVhbgogIGhpIGRlZiBsaW5rIHBsdWcxICAgICAgIFRpdGxlCiAgaGkgZGVmIGxpbmsgcGx1ZzIgICAgICAgUmVwZWF0CiAgaGkgZGVmIGxpbmsgcGx1Z0gyICAgICAgVHlwZQogIGhpIGRlZiBsaW5rIHBsdWdYICAgICAgIEV4Y2VwdGlvbgogIGhpIGRlZiBsaW5rIHBsdWdCcmFja2V0IFN0cnVjdHVyZQogIGhpIGRlZiBsaW5rIHBsdWdOdW1iZXIgIE51bWJlcgoKICBoaSBkZWYgbGluayBwbHVnRGFzaCAgICBTcGVjaWFsCiAgaGkgZGVmIGxpbmsgcGx1Z1BsdXMgICAgQ29uc3RhbnQKICBoaSBkZWYgbGluayBwbHVnU3RhciAgICBCb29sZWFuCgogIGhpIGRlZiBsaW5rIHBsdWdNZXNzYWdlIEZ1bmN0aW9uCiAgaGkgZGVmIGxpbmsgcGx1Z05hbWUgICAgTGFiZWwKICBoaSBkZWYgbGluayBwbHVnSW5zdGFsbCBGdW5jdGlvbgogIGhpIGRlZiBsaW5rIHBsdWdVcGRhdGUgIFR5cGUKCiAgaGkgZGVmIGxpbmsgcGx1Z0Vycm9yICAgRXJyb3IKICBoaSBkZWYgbGluayBwbHVnRGVsZXRlZCBJZ25vcmUKICBoaSBkZWYgbGluayBwbHVnUmVsRGF0ZSBDb21tZW50CiAgaGkgZGVmIGxpbmsgcGx1Z0VkZ2UgICAgUHJlUHJvYwogIGhpIGRlZiBsaW5rIHBsdWdTaGEgICAgIElkZW50aWZpZXIKICBoaSBkZWYgbGluayBwbHVnVGFnICAgICBDb25zdGFudAoKICBoaSBkZWYgbGluayBwbHVnTm90TG9hZGVkIENvbW1lbnQKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxwYWQoc3RyLCBsZW4pCiAgcmV0dXJuIGE6c3RyIC4gcmVwZWF0KCcgJywgYTpsZW4gLSBsZW4oYTpzdHIpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bGluZXMobXNnKQogIHJldHVybiBzcGxpdChhOm1zZywgIltcclxuXSIpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsYXN0bGluZShtc2cpCiAgcmV0dXJuIGdldChzOmxpbmVzKGE6bXNnKSwgLTEsICcnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bmV3X3dpbmRvdygpCiAgZXhlY3V0ZSBnZXQoZzosICdwbHVnX3dpbmRvdycsICd2ZXJ0aWNhbCB0b3BsZWZ0IG5ldycpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwbHVnX3dpbmRvd19leGlzdHMoKQogIGxldCBidWZsaXN0ID0gdGFicGFnZWJ1Zmxpc3QoczpwbHVnX3RhYikKICByZXR1cm4gIWVtcHR5KGJ1Zmxpc3QpICYmIGluZGV4KGJ1Zmxpc3QsIHM6cGx1Z19idWYpID49IDAKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN3aXRjaF9pbigpCiAgaWYgIXM6cGx1Z193aW5kb3dfZXhpc3RzKCkKICAgIHJldHVybiAwCiAgZW5kaWYKCiAgaWYgd2luYnVmbnIoMCkgIT0gczpwbHVnX2J1ZgogICAgbGV0IHM6cG9zID0gW3RhYnBhZ2VucigpLCB3aW5ucigpLCB3aW5zYXZldmlldygpXQogICAgZXhlY3V0ZSAnbm9ybWFsIScgczpwbHVnX3RhYi4nZ3QnCiAgICBsZXQgd2lubnIgPSBidWZ3aW5ucihzOnBsdWdfYnVmKQogICAgZXhlY3V0ZSB3aW5uci4nd2luY21kIHcnCiAgICBjYWxsIGFkZChzOnBvcywgd2luc2F2ZXZpZXcoKSkKICBlbHNlCiAgICBsZXQgczpwb3MgPSBbd2luc2F2ZXZpZXcoKV0KICBlbmRpZgoKICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgcmV0dXJuIDEKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN3aXRjaF9vdXQoLi4uKQogIGNhbGwgd2lucmVzdHZpZXcoczpwb3NbLTFdKQogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGlmIGE6MCA+IDAKICAgIGV4ZWN1dGUgYToxCiAgZW5kaWYKCiAgaWYgbGVuKHM6cG9zKSA+IDEKICAgIGV4ZWN1dGUgJ25vcm1hbCEnIHM6cG9zWzBdLidndCcKICAgIGV4ZWN1dGUgczpwb3NbMV0gJ3dpbmNtZCB3JwogICAgY2FsbCB3aW5yZXN0dmlldyhzOnBvc1syXSkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZmluaXNoX2JpbmRpbmdzKCkKICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBSICA6Y2FsbCA8U0lEPnJldHJ5KCk8Y3I+CiAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gRCAgOlBsdWdEaWZmPGNyPgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFMgIDpQbHVnU3RhdHVzPGNyPgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFUgIDpjYWxsIDxTSUQ+c3RhdHVzX3VwZGF0ZSgpPGNyPgogIHhub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFUgIDpjYWxsIDxTSUQ+c3RhdHVzX3VwZGF0ZSgpPGNyPgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IF1dIDpzaWxlbnQhIGNhbGwgPFNJRD5zZWN0aW9uKCcnKTxjcj4KICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBbWyA6c2lsZW50ISBjYWxsIDxTSUQ+c2VjdGlvbignYicpPGNyPgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJlcGFyZSguLi4pCiAgaWYgZW1wdHkoczpwbHVnX2dldGN3ZCgpKQogICAgdGhyb3cgJ0ludmFsaWQgY3VycmVudCB3b3JraW5nIGRpcmVjdG9yeS4gQ2Fubm90IHByb2NlZWQuJwogIGVuZGlmCgogIGZvciBldmFyIGluIFsnJEdJVF9ESVInLCAnJEdJVF9XT1JLX1RSRUUnXQogICAgaWYgZXhpc3RzKGV2YXIpCiAgICAgIHRocm93IGV2YXIuJyBkZXRlY3RlZC4gQ2Fubm90IHByb2NlZWQuJwogICAgZW5kaWYKICBlbmRmb3IKCiAgY2FsbCBzOmpvYl9hYm9ydCgpCiAgaWYgczpzd2l0Y2hfaW4oKQogICAgaWYgYjpwbHVnX3ByZXZpZXcgPT0gMQogICAgICBwYwogICAgZW5kaWYKICAgIGVuZXcKICBlbHNlCiAgICBjYWxsIHM6bmV3X3dpbmRvdygpCiAgZW5kaWYKCiAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gcSAgOmlmIGI6cGx1Z19wcmV2aWV3PT0xPGJhcj5wYzxiYXI+ZW5kaWY8YmFyPmJkPGNyPgogIGlmIGE6MCA9PSAwCiAgICBjYWxsIHM6ZmluaXNoX2JpbmRpbmdzKCkKICBlbmRpZgogIGxldCBiOnBsdWdfcHJldmlldyA9IC0xCiAgbGV0IHM6cGx1Z190YWIgPSB0YWJwYWdlbnIoKQogIGxldCBzOnBsdWdfYnVmID0gd2luYnVmbnIoMCkKICBjYWxsIHM6YXNzaWduX25hbWUoKQoKICBmb3IgayBpbiBbJzxjcj4nLCAnTCcsICdvJywgJ1gnLCAnZCcsICdkZCddCiAgICBleGVjdXRlICdzaWxlbnQhIHVubWFwIDxidWZmZXI+JyBrCiAgZW5kZm9yCiAgc2V0bG9jYWwgYnVmdHlwZT1ub2ZpbGUgYnVmaGlkZGVuPXdpcGUgbm9idWZsaXN0ZWQgbm9saXN0IG5vc3dhcGZpbGUgbm93cmFwIGN1cnNvcmxpbmUgbW9kaWZpYWJsZSBub3NwZWxsCiAgaWYgZXhpc3RzKCcrY29sb3Jjb2x1bW4nKQogICAgc2V0bG9jYWwgY29sb3Jjb2x1bW49CiAgZW5kaWYKICBzZXRmIHZpbS1wbHVnCiAgaWYgZXhpc3RzKCdnOnN5bnRheF9vbicpCiAgICBjYWxsIHM6c3ludGF4KCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXNzaWduX25hbWUoKQogICIgQXNzaWduIGJ1ZmZlciBuYW1lCiAgbGV0IHByZWZpeCA9ICdbUGx1Z2luc10nCiAgbGV0IG5hbWUgICA9IHByZWZpeAogIGxldCBpZHggICAgPSAyCiAgd2hpbGUgYnVmZXhpc3RzKG5hbWUpCiAgICBsZXQgbmFtZSA9IHByaW50ZignJXMgKCVzKScsIHByZWZpeCwgaWR4KQogICAgbGV0IGlkeCA9IGlkeCArIDEKICBlbmR3aGlsZQogIHNpbGVudCEgZXhlY3V0ZSAnZicgZm5hbWVlc2NhcGUobmFtZSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNoc2goc3dhcCkKICBsZXQgcHJldiA9IFsmc2hlbGwsICZzaGVsbGNtZGZsYWcsICZzaGVsbHJlZGlyXQogIGlmICFzOmlzX3dpbiAmJiBhOnN3YXAKICAgIHNldCBzaGVsbD1zaCBzaGVsbHJlZGlyPT4lc1wgMj4mMQogIGVuZGlmCiAgcmV0dXJuIHByZXYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmJhbmcoY21kLCAuLi4pCiAgbGV0IGJhdGNoZmlsZSA9ICcnCiAgdHJ5CiAgICBsZXQgW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdID0gczpjaHNoKGE6MCkKICAgICIgRklYTUU6IEVzY2FwaW5nIGlzIGluY29tcGxldGUuIFdlIGNvdWxkIHVzZSBzaGVsbGVzY2FwZSB3aXRoIGV2YWwsCiAgICAiICAgICAgICBidXQgaXQgd29uJ3Qgd29yayBvbiBXaW5kb3dzLgogICAgbGV0IGNtZCA9IGE6MCA/IHM6d2l0aF9jZChhOmNtZCwgYToxKSA6IGE6Y21kCiAgICBpZiBzOmlzX3dpbgogICAgICBsZXQgW2JhdGNoZmlsZSwgY21kXSA9IHM6YmF0Y2hmaWxlKGNtZCkKICAgIGVuZGlmCiAgICBsZXQgZzpfcGx1Z19iYW5nID0gKHM6aXNfd2luICYmIGhhcygnZ3VpX3J1bm5pbmcnKSA/ICdzaWxlbnQgJyA6ICcnKS4nIScuZXNjYXBlKGNtZCwgJyMhJScpCiAgICBleGVjdXRlICJub3JtYWwhIDpleGVjdXRlIGc6X3BsdWdfYmFuZ1w8Y3I+XDxjcj4iCiAgZmluYWxseQogICAgdW5sZXQgZzpfcGx1Z19iYW5nCiAgICBsZXQgWyZzaGVsbCwgJnNoZWxsY21kZmxhZywgJnNoZWxscmVkaXJdID0gW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdCiAgICBpZiBzOmlzX3dpbiAmJiBmaWxlcmVhZGFibGUoYmF0Y2hmaWxlKQogICAgICBjYWxsIGRlbGV0ZShiYXRjaGZpbGUpCiAgICBlbmRpZgogIGVuZHRyeQogIHJldHVybiB2OnNoZWxsX2Vycm9yID8gJ0V4aXQgc3RhdHVzOiAnIC4gdjpzaGVsbF9lcnJvciA6ICcnCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZWdyZXNzX2JhcigpCiAgbGV0IGJhciA9IHN1YnN0aXR1dGUoZ2V0bGluZSgyKVsxOi0yXSwgJy4qXHpzPScsICd4JywgJycpCiAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCBiYXIsIGxlbihiYXIpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aXNfdXBkYXRlZChkaXIpCiAgcmV0dXJuICFlbXB0eShzOnN5c3RlbV9jaG9tcCgnZ2l0IGxvZyAtLXByZXR0eT1mb3JtYXQ6IiVoIiAiSEVBRC4uLkhFQURAezF9IicsIGE6ZGlyKSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRvKHB1bGwsIGZvcmNlLCB0b2RvKQogIGZvciBbbmFtZSwgc3BlY10gaW4gaXRlbXMoYTp0b2RvKQogICAgaWYgIWlzZGlyZWN0b3J5KHNwZWMuZGlyKQogICAgICBjb250aW51ZQogICAgZW5kaWYKICAgIGxldCBpbnN0YWxsZWQgPSBoYXNfa2V5KHM6dXBkYXRlLm5ldywgbmFtZSkKICAgIGxldCB1cGRhdGVkID0gaW5zdGFsbGVkID8gMCA6CiAgICAgIFwgKGE6cHVsbCAmJiBpbmRleChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpIDwgMCAmJiBzOmlzX3VwZGF0ZWQoc3BlYy5kaXIpKQogICAgaWYgYTpmb3JjZSB8fCBpbnN0YWxsZWQgfHwgdXBkYXRlZAogICAgICBleGVjdXRlICdjZCcgczplc2Moc3BlYy5kaXIpCiAgICAgIGNhbGwgYXBwZW5kKDMsICctIFBvc3QtdXBkYXRlIGhvb2sgZm9yICcuIG5hbWUgLicgLi4uICcpCiAgICAgIGxldCBlcnJvciA9ICcnCiAgICAgIGxldCB0eXBlID0gdHlwZShzcGVjLmRvKQogICAgICBpZiB0eXBlID09IHM6VFlQRS5zdHJpbmcKICAgICAgICBpZiBzcGVjLmRvWzBdID09ICc6JwogICAgICAgICAgaWYgIWdldChzOmxvYWRlZCwgbmFtZSwgMCkKICAgICAgICAgICAgbGV0IHM6bG9hZGVkW25hbWVdID0gMQogICAgICAgICAgICBjYWxsIHM6cmVvcmdfcnRwKCkKICAgICAgICAgIGVuZGlmCiAgICAgICAgICBjYWxsIHM6bG9hZF9wbHVnaW4oc3BlYykKICAgICAgICAgIHRyeQogICAgICAgICAgICBleGVjdXRlIHNwZWMuZG9bMTpdCiAgICAgICAgICBjYXRjaAogICAgICAgICAgICBsZXQgZXJyb3IgPSB2OmV4Y2VwdGlvbgogICAgICAgICAgZW5kdHJ5CiAgICAgICAgICBpZiAhczpwbHVnX3dpbmRvd19leGlzdHMoKQogICAgICAgICAgICBjZCAtCiAgICAgICAgICAgIHRocm93ICdXYXJuaW5nOiB2aW0tcGx1ZyB3YXMgdGVybWluYXRlZCBieSB0aGUgcG9zdC11cGRhdGUgaG9vayBvZiAnLm5hbWUKICAgICAgICAgIGVuZGlmCiAgICAgICAgZWxzZQogICAgICAgICAgbGV0IGVycm9yID0gczpiYW5nKHNwZWMuZG8pCiAgICAgICAgZW5kaWYKICAgICAgZWxzZWlmIHR5cGUgPT0gczpUWVBFLmZ1bmNyZWYKICAgICAgICB0cnkKICAgICAgICAgIGxldCBzdGF0dXMgPSBpbnN0YWxsZWQgPyAnaW5zdGFsbGVkJyA6ICh1cGRhdGVkID8gJ3VwZGF0ZWQnIDogJ3VuY2hhbmdlZCcpCiAgICAgICAgICBjYWxsIHNwZWMuZG8oeyAnbmFtZSc6IG5hbWUsICdzdGF0dXMnOiBzdGF0dXMsICdmb3JjZSc6IGE6Zm9yY2UgfSkKICAgICAgICBjYXRjaAogICAgICAgICAgbGV0IGVycm9yID0gdjpleGNlcHRpb24KICAgICAgICBlbmR0cnkKICAgICAgZWxzZQogICAgICAgIGxldCBlcnJvciA9ICdJbnZhbGlkIGhvb2sgdHlwZScKICAgICAgZW5kaWYKICAgICAgY2FsbCBzOnN3aXRjaF9pbigpCiAgICAgIGNhbGwgc2V0bGluZSg0LCBlbXB0eShlcnJvcikgPyAoZ2V0bGluZSg0KSAuICdPSycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwgOiAoJ3gnIC4gZ2V0bGluZSg0KVsxOl0gLiBlcnJvcikpCiAgICAgIGlmICFlbXB0eShlcnJvcikKICAgICAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpCiAgICAgICAgY2FsbCBzOnJlZ3Jlc3NfYmFyKCkKICAgICAgZW5kaWYKICAgICAgY2QgLQogICAgZW5kaWYKICBlbmRmb3IKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmhhc2hfbWF0Y2goYSwgYikKICByZXR1cm4gc3RyaWR4KGE6YSwgYTpiKSA9PSAwIHx8IHN0cmlkeChhOmIsIGE6YSkgPT0gMAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Y2hlY2tvdXQoc3BlYykKICBsZXQgc2hhID0gYTpzcGVjLmNvbW1pdAogIGxldCBvdXRwdXQgPSBzOnN5c3RlbSgnZ2l0IHJldi1wYXJzZSBIRUFEJywgYTpzcGVjLmRpcikKICBpZiAhdjpzaGVsbF9lcnJvciAmJiAhczpoYXNoX21hdGNoKHNoYSwgczpsaW5lcyhvdXRwdXQpWzBdKQogICAgbGV0IG91dHB1dCA9IHM6c3lzdGVtKAogICAgICAgICAgXCAnZ2l0IGZldGNoIC0tZGVwdGggOTk5OTk5ICYmIGdpdCBjaGVja291dCAnLnBsdWcjc2hlbGxlc2NhcGUoc2hhKS4nIC0tJywgYTpzcGVjLmRpcikKICBlbmRpZgogIHJldHVybiBvdXRwdXQKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmZpbmlzaChwdWxsKQogIGxldCBuZXdfZnJvemVuID0gbGVuKGZpbHRlcihrZXlzKHM6dXBkYXRlLm5ldyksICdnOnBsdWdzW3Y6dmFsXS5mcm96ZW4nKSkKICBpZiBuZXdfZnJvemVuCiAgICBsZXQgcyA9IG5ld19mcm96ZW4gPiAxID8gJ3MnIDogJycKICAgIGNhbGwgYXBwZW5kKDMsIHByaW50ZignLSBJbnN0YWxsZWQgJWQgZnJvemVuIHBsdWdpbiVzJywgbmV3X2Zyb3plbiwgcykpCiAgZW5kaWYKICBjYWxsIGFwcGVuZCgzLCAnLSBGaW5pc2hpbmcgLi4uICcpIHwgNAogIHJlZHJhdwogIGNhbGwgcGx1ZyNoZWxwdGFncygpCiAgY2FsbCBwbHVnI2VuZCgpCiAgY2FsbCBzZXRsaW5lKDQsIGdldGxpbmUoNCkgLiAnRG9uZSEnKQogIHJlZHJhdwogIGxldCBtc2dzID0gW10KICBpZiAhZW1wdHkoczp1cGRhdGUuZXJyb3JzKQogICAgY2FsbCBhZGQobXNncywgIlByZXNzICdSJyB0byByZXRyeS4iKQogIGVuZGlmCiAgaWYgYTpwdWxsICYmIGxlbihzOnVwZGF0ZS5uZXcpIDwgbGVuKGZpbHRlcihnZXRsaW5lKDUsICckJyksCiAgICAgICAgICAgICAgICBcICJ2OnZhbCA9fiAnXi0gJyAmJiB2OnZhbCAhfiMgJ0FscmVhZHkgdXAudG8uZGF0ZSciKSkKICAgIGNhbGwgYWRkKG1zZ3MsICJQcmVzcyAnRCcgdG8gc2VlIHRoZSB1cGRhdGVkIGNoYW5nZXMuIikKICBlbmRpZgogIGVjaG8gam9pbihtc2dzLCAnICcpCiAgY2FsbCBzOmZpbmlzaF9iaW5kaW5ncygpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZXRyeSgpCiAgaWYgZW1wdHkoczp1cGRhdGUuZXJyb3JzKQogICAgcmV0dXJuCiAgZW5kaWYKICBlY2hvCiAgY2FsbCBzOnVwZGF0ZV9pbXBsKHM6dXBkYXRlLnB1bGwsIHM6dXBkYXRlLmZvcmNlLAogICAgICAgIFwgZXh0ZW5kKGNvcHkoczp1cGRhdGUuZXJyb3JzKSwgW3M6dXBkYXRlLnRocmVhZHNdKSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmlzX21hbmFnZWQobmFtZSkKICByZXR1cm4gaGFzX2tleShnOnBsdWdzW2E6bmFtZV0sICd1cmknKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bmFtZXMoLi4uKQogIHJldHVybiBzb3J0KGZpbHRlcihrZXlzKGc6cGx1Z3MpLCAnc3RyaWR4KHY6dmFsLCBhOjEpID09IDAgJiYgczppc19tYW5hZ2VkKHY6dmFsKScpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Y2hlY2tfcnVieSgpCiAgc2lsZW50ISBydWJ5IHJlcXVpcmUgJ3RocmVhZCc7IFZJTTo6Y29tbWFuZCgibGV0IGc6cGx1Z19ydWJ5ID0gJyN7UlVCWV9WRVJTSU9OfSciKQogIGlmICFleGlzdHMoJ2c6cGx1Z19ydWJ5JykKICAgIHJlZHJhdyEKICAgIHJldHVybiBzOndhcm4oJ2VjaG9tJywgJ1dhcm5pbmc6IFJ1YnkgaW50ZXJmYWNlIGlzIGJyb2tlbicpCiAgZW5kaWYKICBsZXQgcnVieV92ZXJzaW9uID0gc3BsaXQoZzpwbHVnX3J1YnksICdcLicpCiAgdW5sZXQgZzpwbHVnX3J1YnkKICByZXR1cm4gczp2ZXJzaW9uX3JlcXVpcmVtZW50KHJ1YnlfdmVyc2lvbiwgWzEsIDgsIDddKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBkYXRlX2ltcGwocHVsbCwgZm9yY2UsIGFyZ3MpIGFib3J0CiAgbGV0IHN5bmMgPSBpbmRleChhOmFyZ3MsICctLXN5bmMnKSA+PSAwIHx8IGhhcygndmltX3N0YXJ0aW5nJykKICBsZXQgYXJncyA9IGZpbHRlcihjb3B5KGE6YXJncyksICd2OnZhbCAhPSAiLS1zeW5jIicpCiAgbGV0IHRocmVhZHMgPSAobGVuKGFyZ3MpID4gMCAmJiBhcmdzWy0xXSA9fiAnXlsxLTldWzAtOV0qJCcpID8KICAgICAgICAgICAgICAgICAgXCByZW1vdmUoYXJncywgLTEpIDogZ2V0KGc6LCAncGx1Z190aHJlYWRzJywgMTYpCgogIGxldCBtYW5hZ2VkID0gZmlsdGVyKGNvcHkoZzpwbHVncyksICdzOmlzX21hbmFnZWQodjprZXkpJykKICBsZXQgdG9kbyA9IGVtcHR5KGFyZ3MpID8gZmlsdGVyKG1hbmFnZWQsICchdjp2YWwuZnJvemVuIHx8ICFpc2RpcmVjdG9yeSh2OnZhbC5kaXIpJykgOgogICAgICAgICAgICAgICAgICAgICAgICAgXCBmaWx0ZXIobWFuYWdlZCwgJ2luZGV4KGFyZ3MsIHY6a2V5KSA+PSAwJykKCiAgaWYgZW1wdHkodG9kbykKICAgIHJldHVybiBzOndhcm4oJ2VjaG8nLCAnTm8gcGx1Z2luIHRvICcuIChhOnB1bGwgPyAndXBkYXRlJyA6ICdpbnN0YWxsJykpCiAgZW5kaWYKCiAgaWYgIXM6aXNfd2luICYmIHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoMiwgMykKICAgIGxldCBzOmdpdF90ZXJtaW5hbF9wcm9tcHQgPSBleGlzdHMoJyRHSVRfVEVSTUlOQUxfUFJPTVBUJykgPyAkR0lUX1RFUk1JTkFMX1BST01QVCA6ICcnCiAgICBsZXQgJEdJVF9URVJNSU5BTF9QUk9NUFQgPSAwCiAgICBmb3IgcGx1ZyBpbiB2YWx1ZXModG9kbykKICAgICAgbGV0IHBsdWcudXJpID0gc3Vic3RpdHV0ZShwbHVnLnVyaSwKICAgICAgICAgICAgXCAnXmh0dHBzOi8vZ2l0OjpAZ2l0aHViXC5jb20nLCAnaHR0cHM6Ly9naXRodWIuY29tJywgJycpCiAgICBlbmRmb3IKICBlbmRpZgoKICBpZiAhaXNkaXJlY3RvcnkoZzpwbHVnX2hvbWUpCiAgICB0cnkKICAgICAgY2FsbCBta2RpcihnOnBsdWdfaG9tZSwgJ3AnKQogICAgY2F0Y2gKICAgICAgcmV0dXJuIHM6ZXJyKHByaW50ZignSW52YWxpZCBwbHVnIGRpcmVjdG9yeTogJXMuICcuCiAgICAgICAgICAgICAgXCAnVHJ5IHRvIGNhbGwgcGx1ZyNiZWdpbiB3aXRoIGEgdmFsaWQgZGlyZWN0b3J5JywgZzpwbHVnX2hvbWUpKQogICAgZW5kdHJ5CiAgZW5kaWYKCiAgaWYgaGFzKCdudmltJykgJiYgIWV4aXN0cygnKmpvYndhaXQnKSAmJiB0aHJlYWRzID4gMQogICAgY2FsbCBzOndhcm4oJ2VjaG9tJywgJ1t2aW0tcGx1Z10gVXBkYXRlIE5lb3ZpbSBmb3IgcGFyYWxsZWwgaW5zdGFsbGVyJykKICBlbmRpZgoKICBsZXQgdXNlX2pvYiA9IHM6bnZpbSB8fCBzOnZpbTgKICBsZXQgcHl0aG9uID0gKGhhcygncHl0aG9uJykgfHwgaGFzKCdweXRob24zJykpICYmICF1c2Vfam9iCiAgbGV0IHJ1YnkgPSBoYXMoJ3J1YnknKSAmJiAhdXNlX2pvYiAmJiAodjp2ZXJzaW9uID49IDcwMyB8fCB2OnZlcnNpb24gPT0gNzAyICYmIGhhcygncGF0Y2gzNzQnKSkgJiYgIShzOmlzX3dpbiAmJiBoYXMoJ2d1aV9ydW5uaW5nJykpICYmIHRocmVhZHMgPiAxICYmIHM6Y2hlY2tfcnVieSgpCgogIGxldCBzOnVwZGF0ZSA9IHsKICAgIFwgJ3N0YXJ0JzogICByZWx0aW1lKCksCiAgICBcICdhbGwnOiAgICAgdG9kbywKICAgIFwgJ3RvZG8nOiAgICBjb3B5KHRvZG8pLAogICAgXCAnZXJyb3JzJzogIFtdLAogICAgXCAncHVsbCc6ICAgIGE6cHVsbCwKICAgIFwgJ2ZvcmNlJzogICBhOmZvcmNlLAogICAgXCAnbmV3JzogICAgIHt9LAogICAgXCAndGhyZWFkcyc6IChweXRob24gfHwgcnVieSB8fCB1c2Vfam9iKSA/IG1pbihbbGVuKHRvZG8pLCB0aHJlYWRzXSkgOiAxLAogICAgXCAnYmFyJzogICAgICcnLAogICAgXCAnZmluJzogICAgIDAKICBcIH0KCiAgY2FsbCBzOnByZXBhcmUoMSkKICBjYWxsIGFwcGVuZCgwLCBbJycsICcnXSkKICBub3JtYWwhIDJHCiAgc2lsZW50ISByZWRyYXcKCiAgbGV0IHM6Y2xvbmVfb3B0ID0gZ2V0KGc6LCAncGx1Z19zaGFsbG93JywgMSkgPwogICAgICAgIFwgJy0tZGVwdGggMScgLiAoczpnaXRfdmVyc2lvbl9yZXF1aXJlbWVudCgxLCA3LCAxMCkgPyAnIC0tbm8tc2luZ2xlLWJyYW5jaCcgOiAnJykgOiAnJwoKICBpZiBoYXMoJ3dpbjMydW5peCcpIHx8IGhhcygnd3NsJykKICAgIGxldCBzOmNsb25lX29wdCAuPSAnIC1jIGNvcmUuZW9sPWxmIC1jIGNvcmUuYXV0b2NybGY9aW5wdXQnCiAgZW5kaWYKCiAgbGV0IHM6c3VibW9kdWxlX29wdCA9IHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoMiwgOCkgPyAnIC0tam9icz0nLnRocmVhZHMgOiAnJwoKICAiIFB5dGhvbiB2ZXJzaW9uIHJlcXVpcmVtZW50ICg+PSAyLjcpCiAgaWYgcHl0aG9uICYmICFoYXMoJ3B5dGhvbjMnKSAmJiAhcnVieSAmJiAhdXNlX2pvYiAmJiBzOnVwZGF0ZS50aHJlYWRzID4gMQogICAgcmVkaXIgPT4gcHl2CiAgICBzaWxlbnQgcHl0aG9uIGltcG9ydCBwbGF0Zm9ybTsgcHJpbnQgcGxhdGZvcm0ucHl0aG9uX3ZlcnNpb24oKQogICAgcmVkaXIgRU5ECiAgICBsZXQgcHl0aG9uID0gczp2ZXJzaW9uX3JlcXVpcmVtZW50KAogICAgICAgICAgXCBtYXAoc3BsaXQoc3BsaXQocHl2KVswXSwgJ1wuJyksICdzdHIybnIodjp2YWwpJyksIFsyLCA2XSkKICBlbmRpZgoKICBpZiAocHl0aG9uIHx8IHJ1YnkpICYmIHM6dXBkYXRlLnRocmVhZHMgPiAxCiAgICB0cnkKICAgICAgbGV0IGltZCA9ICZpbWQKICAgICAgaWYgczptYWNfZ3VpCiAgICAgICAgc2V0IG5vaW1kCiAgICAgIGVuZGlmCiAgICAgIGlmIHJ1YnkKICAgICAgICBjYWxsIHM6dXBkYXRlX3J1YnkoKQogICAgICBlbHNlCiAgICAgICAgY2FsbCBzOnVwZGF0ZV9weXRob24oKQogICAgICBlbmRpZgogICAgY2F0Y2gKICAgICAgbGV0IGxpbmVzID0gZ2V0bGluZSg0LCAnJCcpCiAgICAgIGxldCBwcmludGVkID0ge30KICAgICAgc2lsZW50ISA0LCRkIF8KICAgICAgZm9yIGxpbmUgaW4gbGluZXMKICAgICAgICBsZXQgbmFtZSA9IHM6ZXh0cmFjdF9uYW1lKGxpbmUsICcuJywgJycpCiAgICAgICAgaWYgZW1wdHkobmFtZSkgfHwgIWhhc19rZXkocHJpbnRlZCwgbmFtZSkKICAgICAgICAgIGNhbGwgYXBwZW5kKCckJywgbGluZSkKICAgICAgICAgIGlmICFlbXB0eShuYW1lKQogICAgICAgICAgICBsZXQgcHJpbnRlZFtuYW1lXSA9IDEKICAgICAgICAgICAgaWYgbGluZVswXSA9PSAneCcgJiYgaW5kZXgoczp1cGRhdGUuZXJyb3JzLCBuYW1lKSA8IDAKICAgICAgICAgICAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kaWYKICAgICAgICBlbmRpZgogICAgICBlbmRmb3IKICAgIGZpbmFsbHkKICAgICAgbGV0ICZpbWQgPSBpbWQKICAgICAgY2FsbCBzOnVwZGF0ZV9maW5pc2goKQogICAgZW5kdHJ5CiAgZWxzZQogICAgY2FsbCBzOnVwZGF0ZV92aW0oKQogICAgd2hpbGUgdXNlX2pvYiAmJiBzeW5jCiAgICAgIHNsZWVwIDEwMG0KICAgICAgaWYgczp1cGRhdGUuZmluCiAgICAgICAgYnJlYWsKICAgICAgZW5kaWYKICAgIGVuZHdoaWxlCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZzQobmFtZSwgbXNnKQogIGNhbGwgc2V0bGluZSg0LCBwcmludGYoJy0gJXMgKCVzKScsIGE6bXNnLCBhOm5hbWUpKQogIHJlZHJhdwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBkYXRlX2ZpbmlzaCgpCiAgaWYgZXhpc3RzKCdzOmdpdF90ZXJtaW5hbF9wcm9tcHQnKQogICAgbGV0ICRHSVRfVEVSTUlOQUxfUFJPTVBUID0gczpnaXRfdGVybWluYWxfcHJvbXB0CiAgZW5kaWYKICBpZiBzOnN3aXRjaF9pbigpCiAgICBjYWxsIGFwcGVuZCgzLCAnLSBVcGRhdGluZyAuLi4nKSB8IDQKICAgIGZvciBbbmFtZSwgc3BlY10gaW4gaXRlbXMoZmlsdGVyKGNvcHkoczp1cGRhdGUuYWxsKSwgJ2luZGV4KHM6dXBkYXRlLmVycm9ycywgdjprZXkpIDwgMCAmJiAoczp1cGRhdGUuZm9yY2UgfHwgczp1cGRhdGUucHVsbCB8fCBoYXNfa2V5KHM6dXBkYXRlLm5ldywgdjprZXkpKScpKQogICAgICBsZXQgW3BvcywgX10gPSBzOmxvZ3BvcyhuYW1lKQogICAgICBpZiAhcG9zCiAgICAgICAgY29udGludWUKICAgICAgZW5kaWYKICAgICAgaWYgaGFzX2tleShzcGVjLCAnY29tbWl0JykKICAgICAgICBjYWxsIHM6bG9nNChuYW1lLCAnQ2hlY2tpbmcgb3V0ICcuc3BlYy5jb21taXQpCiAgICAgICAgbGV0IG91dCA9IHM6Y2hlY2tvdXQoc3BlYykKICAgICAgZWxzZWlmIGhhc19rZXkoc3BlYywgJ3RhZycpCiAgICAgICAgbGV0IHRhZyA9IHNwZWMudGFnCiAgICAgICAgaWYgdGFnID1+ICdcKicKICAgICAgICAgIGxldCB0YWdzID0gczpsaW5lcyhzOnN5c3RlbSgnZ2l0IHRhZyAtLWxpc3QgJy5wbHVnI3NoZWxsZXNjYXBlKHRhZykuJyAtLXNvcnQgLXZlcnNpb246cmVmbmFtZSAyPiYxJywgc3BlYy5kaXIpKQogICAgICAgICAgaWYgIXY6c2hlbGxfZXJyb3IgJiYgIWVtcHR5KHRhZ3MpCiAgICAgICAgICAgIGxldCB0YWcgPSB0YWdzWzBdCiAgICAgICAgICAgIGNhbGwgczpsb2c0KG5hbWUsIHByaW50ZignTGF0ZXN0IHRhZyBmb3IgJXMgLT4gJXMnLCBzcGVjLnRhZywgdGFnKSkKICAgICAgICAgICAgY2FsbCBhcHBlbmQoMywgJycpCiAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGlmCiAgICAgICAgY2FsbCBzOmxvZzQobmFtZSwgJ0NoZWNraW5nIG91dCAnLnRhZykKICAgICAgICBsZXQgb3V0ID0gczpzeXN0ZW0oJ2dpdCBjaGVja291dCAtcSAnLnBsdWcjc2hlbGxlc2NhcGUodGFnKS4nIC0tIDI+JjEnLCBzcGVjLmRpcikKICAgICAgZWxzZQogICAgICAgIGxldCBicmFuY2ggPSBnZXQoc3BlYywgJ2JyYW5jaCcsICdtYXN0ZXInKQogICAgICAgIGNhbGwgczpsb2c0KG5hbWUsICdNZXJnaW5nIG9yaWdpbi8nLnM6ZXNjKGJyYW5jaCkpCiAgICAgICAgbGV0IG91dCA9IHM6c3lzdGVtKCdnaXQgY2hlY2tvdXQgLXEgJy5wbHVnI3NoZWxsZXNjYXBlKGJyYW5jaCkuJyAtLSAyPiYxJwogICAgICAgICAgICAgIFwuIChoYXNfa2V5KHM6dXBkYXRlLm5ldywgbmFtZSkgPyAnJyA6ICgnJiYgZ2l0IG1lcmdlIC0tZmYtb25seSAnLnBsdWcjc2hlbGxlc2NhcGUoJ29yaWdpbi8nLmJyYW5jaCkuJyAyPiYxJykpLCBzcGVjLmRpcikKICAgICAgZW5kaWYKICAgICAgaWYgIXY6c2hlbGxfZXJyb3IgJiYgZmlsZXJlYWRhYmxlKHNwZWMuZGlyLicvLmdpdG1vZHVsZXMnKSAmJgogICAgICAgICAgICBcIChzOnVwZGF0ZS5mb3JjZSB8fCBoYXNfa2V5KHM6dXBkYXRlLm5ldywgbmFtZSkgfHwgczppc191cGRhdGVkKHNwZWMuZGlyKSkKICAgICAgICBjYWxsIHM6bG9nNChuYW1lLCAnVXBkYXRpbmcgc3VibW9kdWxlcy4gVGhpcyBtYXkgdGFrZSBhIHdoaWxlLicpCiAgICAgICAgbGV0IG91dCAuPSBzOmJhbmcoJ2dpdCBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAtLXJlY3Vyc2l2ZScuczpzdWJtb2R1bGVfb3B0LicgMj4mMScsIHNwZWMuZGlyKQogICAgICBlbmRpZgogICAgICBsZXQgbXNnID0gczpmb3JtYXRfbWVzc2FnZSh2OnNoZWxsX2Vycm9yID8gJ3gnOiAnLScsIG5hbWUsIG91dCkKICAgICAgaWYgdjpzaGVsbF9lcnJvcgogICAgICAgIGNhbGwgYWRkKHM6dXBkYXRlLmVycm9ycywgbmFtZSkKICAgICAgICBjYWxsIHM6cmVncmVzc19iYXIoKQogICAgICAgIHNpbGVudCBleGVjdXRlIHBvcyAnZCBfJwogICAgICAgIGNhbGwgYXBwZW5kKDQsIG1zZykgfCA0CiAgICAgIGVsc2VpZiAhZW1wdHkob3V0KQogICAgICAgIGNhbGwgc2V0bGluZShwb3MsIG1zZ1swXSkKICAgICAgZW5kaWYKICAgICAgcmVkcmF3CiAgICBlbmRmb3IKICAgIHNpbGVudCA0IGQgXwogICAgdHJ5CiAgICAgIGNhbGwgczpkbyhzOnVwZGF0ZS5wdWxsLCBzOnVwZGF0ZS5mb3JjZSwgZmlsdGVyKGNvcHkoczp1cGRhdGUuYWxsKSwgJ2luZGV4KHM6dXBkYXRlLmVycm9ycywgdjprZXkpIDwgMCAmJiBoYXNfa2V5KHY6dmFsLCAiZG8iKScpKQogICAgY2F0Y2gKICAgICAgY2FsbCBzOndhcm4oJ2VjaG9tJywgdjpleGNlcHRpb24pCiAgICAgIGNhbGwgczp3YXJuKCdlY2hvJywgJycpCiAgICAgIHJldHVybgogICAgZW5kdHJ5CiAgICBjYWxsIHM6ZmluaXNoKHM6dXBkYXRlLnB1bGwpCiAgICBjYWxsIHNldGxpbmUoMSwgJ1VwZGF0ZWQuIEVsYXBzZWQgdGltZTogJyAuIHNwbGl0KHJlbHRpbWVzdHIocmVsdGltZShzOnVwZGF0ZS5zdGFydCkpKVswXSAuICcgc2VjLicpCiAgICBjYWxsIHM6c3dpdGNoX291dCgnbm9ybWFsISBnZycpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmpvYl9hYm9ydCgpCiAgaWYgKCFzOm52aW0gJiYgIXM6dmltOCkgfHwgIWV4aXN0cygnczpqb2JzJykKICAgIHJldHVybgogIGVuZGlmCgogIGZvciBbbmFtZSwgal0gaW4gaXRlbXMoczpqb2JzKQogICAgaWYgczpudmltCiAgICAgIHNpbGVudCEgY2FsbCBqb2JzdG9wKGouam9iaWQpCiAgICBlbHNlaWYgczp2aW04CiAgICAgIHNpbGVudCEgY2FsbCBqb2Jfc3RvcChqLmpvYmlkKQogICAgZW5kaWYKICAgIGlmIGoubmV3CiAgICAgIGNhbGwgczpybV9yZihnOnBsdWdzW25hbWVdLmRpcikKICAgIGVuZGlmCiAgZW5kZm9yCiAgbGV0IHM6am9icyA9IHt9CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsYXN0X25vbl9lbXB0eV9saW5lKGxpbmVzKQogIGxldCBsZW4gPSBsZW4oYTpsaW5lcykKICBmb3IgaWR4IGluIHJhbmdlKGxlbikKICAgIGxldCBsaW5lID0gYTpsaW5lc1tsZW4taWR4LTFdCiAgICBpZiAhZW1wdHkobGluZSkKICAgICAgcmV0dXJuIGxpbmUKICAgIGVuZGlmCiAgZW5kZm9yCiAgcmV0dXJuICcnCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpqb2Jfb3V0X2NiKHNlbGYsIGRhdGEpIGFib3J0CiAgbGV0IHNlbGYgPSBhOnNlbGYKICBsZXQgZGF0YSA9IHJlbW92ZShzZWxmLmxpbmVzLCAtMSkgLiBhOmRhdGEKICBsZXQgbGluZXMgPSBtYXAoc3BsaXQoZGF0YSwgIlxuIiwgMSksICdzcGxpdCh2OnZhbCwgIlxyIiwgMSlbLTFdJykKICBjYWxsIGV4dGVuZChzZWxmLmxpbmVzLCBsaW5lcykKICAiIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIGJ1ZmZlciB1cGRhdGVzCiAgbGV0IHNlbGYudGljayA9IGdldChzZWxmLCAndGljaycsIC0xKSArIDEKICBpZiAhc2VsZi5ydW5uaW5nIHx8IHNlbGYudGljayAlIGxlbihzOmpvYnMpID09IDAKICAgIGxldCBidWxsZXQgPSBzZWxmLnJ1bm5pbmcgPyAoc2VsZi5uZXcgPyAnKycgOiAnKicpIDogKHNlbGYuZXJyb3IgPyAneCcgOiAnLScpCiAgICBsZXQgcmVzdWx0ID0gc2VsZi5lcnJvciA/IGpvaW4oc2VsZi5saW5lcywgIlxuIikgOiBzOmxhc3Rfbm9uX2VtcHR5X2xpbmUoc2VsZi5saW5lcykKICAgIGNhbGwgczpsb2coYnVsbGV0LCBzZWxmLm5hbWUsIHJlc3VsdCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6am9iX2V4aXRfY2Ioc2VsZiwgZGF0YSkgYWJvcnQKICBsZXQgYTpzZWxmLnJ1bm5pbmcgPSAwCiAgbGV0IGE6c2VsZi5lcnJvciA9IGE6ZGF0YSAhPSAwCiAgY2FsbCBzOnJlYXAoYTpzZWxmLm5hbWUpCiAgY2FsbCBzOnRpY2soKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6am9iX2NiKGZuLCBqb2IsIGNoLCBkYXRhKQogIGlmICFzOnBsdWdfd2luZG93X2V4aXN0cygpICIgcGx1ZyB3aW5kb3cgY2xvc2VkCiAgICByZXR1cm4gczpqb2JfYWJvcnQoKQogIGVuZGlmCiAgY2FsbCBjYWxsKGE6Zm4sIFthOmpvYiwgYTpkYXRhXSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOm52aW1fY2Ioam9iX2lkLCBkYXRhLCBldmVudCkgZGljdCBhYm9ydAogIHJldHVybiBhOmV2ZW50ID09ICdzdGRvdXQnID8KICAgIFwgczpqb2JfY2IoJ3M6am9iX291dF9jYicsICBzZWxmLCAwLCBqb2luKGE6ZGF0YSwgIlxuIikpIDoKICAgIFwgczpqb2JfY2IoJ3M6am9iX2V4aXRfY2InLCBzZWxmLCAwLCBhOmRhdGEpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzcGF3bihuYW1lLCBjbWQsIG9wdHMpCiAgbGV0IGpvYiA9IHsgJ25hbWUnOiBhOm5hbWUsICdydW5uaW5nJzogMSwgJ2Vycm9yJzogMCwgJ2xpbmVzJzogWycnXSwKICAgICAgICAgICAgXCAnbmV3JzogZ2V0KGE6b3B0cywgJ25ldycsIDApIH0KICBsZXQgczpqb2JzW2E6bmFtZV0gPSBqb2IKICBsZXQgY21kID0gaGFzX2tleShhOm9wdHMsICdkaXInKSA/IHM6d2l0aF9jZChhOmNtZCwgYTpvcHRzLmRpciwgMCkgOiBhOmNtZAogIGxldCBhcmd2ID0gczppc193aW4gPyBbJ2NtZCcsICcvcycsICcvYycsICciJy5jbWQuJyInXSA6IFsnc2gnLCAnLWMnLCBjbWRdCgogIGlmIHM6bnZpbQogICAgY2FsbCBleHRlbmQoam9iLCB7CiAgICBcICdvbl9zdGRvdXQnOiBmdW5jdGlvbignczpudmltX2NiJyksCiAgICBcICdvbl9leGl0JzogICBmdW5jdGlvbignczpudmltX2NiJyksCiAgICBcIH0pCiAgICBsZXQgamlkID0gczpwbHVnX2NhbGwoJ2pvYnN0YXJ0JywgYXJndiwgam9iKQogICAgaWYgamlkID4gMAogICAgICBsZXQgam9iLmpvYmlkID0gamlkCiAgICBlbHNlCiAgICAgIGxldCBqb2IucnVubmluZyA9IDAKICAgICAgbGV0IGpvYi5lcnJvciAgID0gMQogICAgICBsZXQgam9iLmxpbmVzICAgPSBbamlkIDwgMCA/IGFyZ3ZbMF0uJyBpcyBub3QgZXhlY3V0YWJsZScgOgogICAgICAgICAgICBcICdJbnZhbGlkIGFyZ3VtZW50cyAob3Igam9iIHRhYmxlIGlzIGZ1bGwpJ10KICAgIGVuZGlmCiAgZWxzZWlmIHM6dmltOAogICAgbGV0IGppZCA9IGpvYl9zdGFydChzOmlzX3dpbiA/IGpvaW4oYXJndiwgJyAnKSA6IGFyZ3YsIHsKICAgIFwgJ291dF9jYic6ICAgZnVuY3Rpb24oJ3M6am9iX2NiJywgWydzOmpvYl9vdXRfY2InLCAgam9iXSksCiAgICBcICdleGl0X2NiJzogIGZ1bmN0aW9uKCdzOmpvYl9jYicsIFsnczpqb2JfZXhpdF9jYicsIGpvYl0pLAogICAgXCAnb3V0X21vZGUnOiAncmF3JwogICAgXH0pCiAgICBpZiBqb2Jfc3RhdHVzKGppZCkgPT0gJ3J1bicKICAgICAgbGV0IGpvYi5qb2JpZCA9IGppZAogICAgZWxzZQogICAgICBsZXQgam9iLnJ1bm5pbmcgPSAwCiAgICAgIGxldCBqb2IuZXJyb3IgICA9IDEKICAgICAgbGV0IGpvYi5saW5lcyAgID0gWydGYWlsZWQgdG8gc3RhcnQgam9iJ10KICAgIGVuZGlmCiAgZWxzZQogICAgbGV0IGpvYi5saW5lcyA9IHM6bGluZXMoY2FsbCgnczpzeXN0ZW0nLCBbY21kXSkpCiAgICBsZXQgam9iLmVycm9yID0gdjpzaGVsbF9lcnJvciAhPSAwCiAgICBsZXQgam9iLnJ1bm5pbmcgPSAwCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnJlYXAobmFtZSkKICBsZXQgam9iID0gczpqb2JzW2E6bmFtZV0KICBpZiBqb2IuZXJyb3IKICAgIGNhbGwgYWRkKHM6dXBkYXRlLmVycm9ycywgYTpuYW1lKQogIGVsc2VpZiBnZXQoam9iLCAnbmV3JywgMCkKICAgIGxldCBzOnVwZGF0ZS5uZXdbYTpuYW1lXSA9IDEKICBlbmRpZgogIGxldCBzOnVwZGF0ZS5iYXIgLj0gam9iLmVycm9yID8gJ3gnIDogJz0nCgogIGxldCBidWxsZXQgPSBqb2IuZXJyb3IgPyAneCcgOiAnLScKICBsZXQgcmVzdWx0ID0gam9iLmVycm9yID8gam9pbihqb2IubGluZXMsICJcbiIpIDogczpsYXN0X25vbl9lbXB0eV9saW5lKGpvYi5saW5lcykKICBjYWxsIHM6bG9nKGJ1bGxldCwgYTpuYW1lLCBlbXB0eShyZXN1bHQpID8gJ09LJyA6IHJlc3VsdCkKICBjYWxsIHM6YmFyKCkKCiAgY2FsbCByZW1vdmUoczpqb2JzLCBhOm5hbWUpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpiYXIoKQogIGlmIHM6c3dpdGNoX2luKCkKICAgIGxldCB0b3RhbCA9IGxlbihzOnVwZGF0ZS5hbGwpCiAgICBjYWxsIHNldGxpbmUoMSwgKHM6dXBkYXRlLnB1bGwgPyAnVXBkYXRpbmcnIDogJ0luc3RhbGxpbmcnKS4KICAgICAgICAgIFwgJyBwbHVnaW5zICgnLmxlbihzOnVwZGF0ZS5iYXIpLicvJy50b3RhbC4nKScpCiAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIHM6dXBkYXRlLmJhciwgdG90YWwpCiAgICBjYWxsIHM6c3dpdGNoX291dCgpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZ3BvcyhuYW1lKQogIGxldCBtYXggPSBsaW5lKCckJykKICBmb3IgaSBpbiByYW5nZSg0LCBtYXggPiA0ID8gbWF4IDogNCkKICAgIGlmIGdldGxpbmUoaSkgPX4jICdeWy0reCpdICcuYTpuYW1lLic6JwogICAgICBmb3IgaiBpbiByYW5nZShpICsgMSwgbWF4ID4gNSA/IG1heCA6IDUpCiAgICAgICAgaWYgZ2V0bGluZShqKSAhfiAnXiAnCiAgICAgICAgICByZXR1cm4gW2ksIGogLSAxXQogICAgICAgIGVuZGlmCiAgICAgIGVuZGZvcgogICAgICByZXR1cm4gW2ksIGldCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiBbMCwgMF0KZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZyhidWxsZXQsIG5hbWUsIGxpbmVzKQogIGlmIHM6c3dpdGNoX2luKCkKICAgIGxldCBbYiwgZV0gPSBzOmxvZ3BvcyhhOm5hbWUpCiAgICBpZiBiID4gMAogICAgICBzaWxlbnQgZXhlY3V0ZSBwcmludGYoJyVkLCVkIGQgXycsIGIsIGUpCiAgICAgIGlmIGIgPiB3aW5oZWlnaHQoJy4nKQogICAgICAgIGxldCBiID0gNAogICAgICBlbmRpZgogICAgZWxzZQogICAgICBsZXQgYiA9IDQKICAgIGVuZGlmCiAgICAiIEZJWE1FIEZvciBzb21lIHJlYXNvbiwgbm9tb2RpZmlhYmxlIGlzIHNldCBhZnRlciA6ZCBpbiB2aW04CiAgICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgICBjYWxsIGFwcGVuZChiIC0gMSwgczpmb3JtYXRfbWVzc2FnZShhOmJ1bGxldCwgYTpuYW1lLCBhOmxpbmVzKSkKICAgIGNhbGwgczpzd2l0Y2hfb3V0KCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBkYXRlX3ZpbSgpCiAgbGV0IHM6am9icyA9IHt9CgogIGNhbGwgczpiYXIoKQogIGNhbGwgczp0aWNrKCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnRpY2soKQogIGxldCBwdWxsID0gczp1cGRhdGUucHVsbAogIGxldCBwcm9nID0gczpwcm9ncmVzc19vcHQoczpudmltIHx8IHM6dmltOCkKd2hpbGUgMSAiIFdpdGhvdXQgVENPLCBWaW0gc3RhY2sgaXMgYm91bmQgdG8gZXhwbG9kZQogIGlmIGVtcHR5KHM6dXBkYXRlLnRvZG8pCiAgICBpZiBlbXB0eShzOmpvYnMpICYmICFzOnVwZGF0ZS5maW4KICAgICAgY2FsbCBzOnVwZGF0ZV9maW5pc2goKQogICAgICBsZXQgczp1cGRhdGUuZmluID0gMQogICAgZW5kaWYKICAgIHJldHVybgogIGVuZGlmCgogIGxldCBuYW1lID0ga2V5cyhzOnVwZGF0ZS50b2RvKVswXQogIGxldCBzcGVjID0gcmVtb3ZlKHM6dXBkYXRlLnRvZG8sIG5hbWUpCiAgbGV0IG5ldyAgPSBlbXB0eShnbG9icGF0aChzcGVjLmRpciwgJy5naXQnLCAxKSkKCiAgY2FsbCBzOmxvZyhuZXcgPyAnKycgOiAnKicsIG5hbWUsIHB1bGwgPyAnVXBkYXRpbmcgLi4uJyA6ICdJbnN0YWxsaW5nIC4uLicpCiAgcmVkcmF3CgogIGxldCBoYXNfdGFnID0gaGFzX2tleShzcGVjLCAndGFnJykKICBpZiAhbmV3CiAgICBsZXQgW2Vycm9yLCBfXSA9IHM6Z2l0X3ZhbGlkYXRlKHNwZWMsIDApCiAgICBpZiBlbXB0eShlcnJvcikKICAgICAgaWYgcHVsbAogICAgICAgIGxldCBmZXRjaF9vcHQgPSAoaGFzX3RhZyAmJiAhZW1wdHkoZ2xvYnBhdGgoc3BlYy5kaXIsICcuZ2l0L3NoYWxsb3cnKSkpID8gJy0tZGVwdGggOTk5OTk5OTknIDogJycKICAgICAgICBjYWxsIHM6c3Bhd24obmFtZSwgcHJpbnRmKCdnaXQgZmV0Y2ggJXMgJXMgMj4mMScsIGZldGNoX29wdCwgcHJvZyksIHsgJ2Rpcic6IHNwZWMuZGlyIH0pCiAgICAgIGVsc2UKICAgICAgICBsZXQgczpqb2JzW25hbWVdID0geyAncnVubmluZyc6IDAsICdsaW5lcyc6IFsnQWxyZWFkeSBpbnN0YWxsZWQnXSwgJ2Vycm9yJzogMCB9CiAgICAgIGVuZGlmCiAgICBlbHNlCiAgICAgIGxldCBzOmpvYnNbbmFtZV0gPSB7ICdydW5uaW5nJzogMCwgJ2xpbmVzJzogczpsaW5lcyhlcnJvciksICdlcnJvcic6IDEgfQogICAgZW5kaWYKICBlbHNlCiAgICBjYWxsIHM6c3Bhd24obmFtZSwKICAgICAgICAgIFwgcHJpbnRmKCdnaXQgY2xvbmUgJXMgJXMgJXMgJXMgMj4mMScsCiAgICAgICAgICBcIGhhc190YWcgPyAnJyA6IHM6Y2xvbmVfb3B0LAogICAgICAgICAgXCBwcm9nLAogICAgICAgICAgXCBwbHVnI3NoZWxsZXNjYXBlKHNwZWMudXJpLCB7J3NjcmlwdCc6IDB9KSwKICAgICAgICAgIFwgcGx1ZyNzaGVsbGVzY2FwZShzOnRyaW0oc3BlYy5kaXIpLCB7J3NjcmlwdCc6IDB9KSksIHsgJ25ldyc6IDEgfSkKICBlbmRpZgoKICBpZiAhczpqb2JzW25hbWVdLnJ1bm5pbmcKICAgIGNhbGwgczpyZWFwKG5hbWUpCiAgZW5kaWYKICBpZiBsZW4oczpqb2JzKSA+PSBzOnVwZGF0ZS50aHJlYWRzCiAgICBicmVhawogIGVuZGlmCmVuZHdoaWxlCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczp1cGRhdGVfcHl0aG9uKCkKbGV0IHB5X2V4ZSA9IGhhcygncHl0aG9uJykgPyAncHl0aG9uJyA6ICdweXRob24zJwpleGVjdXRlIHB5X2V4ZSAiPDwgRU9GIgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGZ1bmN0b29scwppbXBvcnQgb3MKdHJ5OgogIGltcG9ydCBxdWV1ZQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgaW1wb3J0IFF1ZXVlIGFzIHF1ZXVlCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHNpZ25hbAppbXBvcnQgc3VicHJvY2VzcwppbXBvcnQgdGVtcGZpbGUKaW1wb3J0IHRocmVhZGluZyBhcyB0aHIKaW1wb3J0IHRpbWUKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdmltCgpHX05WSU0gPSB2aW0uZXZhbCgiaGFzKCdudmltJykiKSA9PSAnMScKR19QVUxMID0gdmltLmV2YWwoJ3M6dXBkYXRlLnB1bGwnKSA9PSAnMScKR19SRVRSSUVTID0gaW50KHZpbS5ldmFsKCdnZXQoZzosICJwbHVnX3JldHJpZXMiLCAyKScpKSArIDEKR19USU1FT1VUID0gaW50KHZpbS5ldmFsKCdnZXQoZzosICJwbHVnX3RpbWVvdXQiLCA2MCknKSkKR19DTE9ORV9PUFQgPSB2aW0uZXZhbCgnczpjbG9uZV9vcHQnKQpHX1BST0dSRVNTID0gdmltLmV2YWwoJ3M6cHJvZ3Jlc3Nfb3B0KDEpJykKR19MT0dfUFJPQiA9IDEuMCAvIGludCh2aW0uZXZhbCgnczp1cGRhdGUudGhyZWFkcycpKQpHX1NUT1AgPSB0aHIuRXZlbnQoKQpHX0lTX1dJTiA9IHZpbS5ldmFsKCdzOmlzX3dpbicpID09ICcxJwoKY2xhc3MgUGx1Z0Vycm9yKEV4Y2VwdGlvbik6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZyk6CiAgICBzZWxmLm1zZyA9IG1zZwpjbGFzcyBDbWRUaW1lZE91dChQbHVnRXJyb3IpOgogIHBhc3MKY2xhc3MgQ21kRmFpbGVkKFBsdWdFcnJvcik6CiAgcGFzcwpjbGFzcyBJbnZhbGlkVVJJKFBsdWdFcnJvcik6CiAgcGFzcwpjbGFzcyBBY3Rpb24ob2JqZWN0KToKICBJTlNUQUxMLCBVUERBVEUsIEVSUk9SLCBET05FID0gWycrJywgJyonLCAneCcsICctJ10KCmNsYXNzIEJ1ZmZlcihvYmplY3QpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBsb2NrLCBudW1fcGx1Z3MsIGlzX3B1bGwpOgogICAgc2VsZi5iYXIgPSAnJwogICAgc2VsZi5ldmVudCA9ICdVcGRhdGluZycgaWYgaXNfcHVsbCBlbHNlICdJbnN0YWxsaW5nJwogICAgc2VsZi5sb2NrID0gbG9jawogICAgc2VsZi5tYXh5ID0gaW50KHZpbS5ldmFsKCd3aW5oZWlnaHQoIi4iKScpKQogICAgc2VsZi5udW1fcGx1Z3MgPSBudW1fcGx1Z3MKCiAgZGVmIF9fd2hlcmUoc2VsZiwgbmFtZSk6CiAgICAiIiIgRmluZCBmaXJzdCBsaW5lIHdpdGggbmFtZSBpbiBjdXJyZW50IGJ1ZmZlci4gUmV0dXJuIGxpbmUgbnVtLiAiIiIKICAgIGZvdW5kLCBsbnVtID0gRmFsc2UsIDAKICAgIG1hdGNoZXIgPSByZS5jb21waWxlKCdeWy0reCpdIHswfTonLmZvcm1hdChuYW1lKSkKICAgIGZvciBsaW5lIGluIHZpbS5jdXJyZW50LmJ1ZmZlcjoKICAgICAgaWYgbWF0Y2hlci5zZWFyY2gobGluZSkgaXMgbm90IE5vbmU6CiAgICAgICAgZm91bmQgPSBUcnVlCiAgICAgICAgYnJlYWsKICAgICAgbG51bSArPSAxCgogICAgaWYgbm90IGZvdW5kOgogICAgICBsbnVtID0gLTEKICAgIHJldHVybiBsbnVtCgogIGRlZiBoZWFkZXIoc2VsZik6CiAgICBjdXJidWYgPSB2aW0uY3VycmVudC5idWZmZXIKICAgIGN1cmJ1ZlswXSA9IHNlbGYuZXZlbnQgKyAnIHBsdWdpbnMgKHswfS97MX0pJy5mb3JtYXQobGVuKHNlbGYuYmFyKSwgc2VsZi5udW1fcGx1Z3MpCgogICAgbnVtX3NwYWNlcyA9IHNlbGYubnVtX3BsdWdzIC0gbGVuKHNlbGYuYmFyKQogICAgY3VyYnVmWzFdID0gJ1t7MH17MX1dJy5mb3JtYXQoc2VsZi5iYXIsIG51bV9zcGFjZXMgKiAnICcpCgogICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgIHZpbS5jb21tYW5kKCdub3JtYWwhIDJHJykKICAgICAgdmltLmNvbW1hbmQoJ3JlZHJhdycpCgogIGRlZiB3cml0ZShzZWxmLCBhY3Rpb24sIG5hbWUsIGxpbmVzKToKICAgIGZpcnN0LCByZXN0ID0gbGluZXNbMF0sIGxpbmVzWzE6XQogICAgbXNnID0gWyd7MH0gezF9ezJ9ezN9Jy5mb3JtYXQoYWN0aW9uLCBuYW1lLCAnOiAnIGlmIGZpcnN0IGVsc2UgJycsIGZpcnN0KV0KICAgIG1zZy5leHRlbmQoWycgICAgJyArIGxpbmUgZm9yIGxpbmUgaW4gcmVzdF0pCgogICAgdHJ5OgogICAgICBpZiBhY3Rpb24gPT0gQWN0aW9uLkVSUk9SOgogICAgICAgIHNlbGYuYmFyICs9ICd4JwogICAgICAgIHZpbS5jb21tYW5kKCJjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsICd7MH0nKSIuZm9ybWF0KG5hbWUpKQogICAgICBlbGlmIGFjdGlvbiA9PSBBY3Rpb24uRE9ORToKICAgICAgICBzZWxmLmJhciArPSAnPScKCiAgICAgIGN1cmJ1ZiA9IHZpbS5jdXJyZW50LmJ1ZmZlcgogICAgICBsbnVtID0gc2VsZi5fX3doZXJlKG5hbWUpCiAgICAgIGlmIGxudW0gIT0gLTE6ICMgRm91bmQgbWF0Y2hpbmcgbGluZSBudW0KICAgICAgICBkZWwgY3VyYnVmW2xudW1dCiAgICAgICAgaWYgbG51bSA+IHNlbGYubWF4eSBhbmQgYWN0aW9uIGluIHNldChbQWN0aW9uLklOU1RBTEwsIEFjdGlvbi5VUERBVEVdKToKICAgICAgICAgIGxudW0gPSAzCiAgICAgIGVsc2U6CiAgICAgICAgbG51bSA9IDMKICAgICAgY3VyYnVmLmFwcGVuZChtc2csIGxudW0pCgogICAgICBzZWxmLmhlYWRlcigpCiAgICBleGNlcHQgdmltLmVycm9yOgogICAgICBwYXNzCgpjbGFzcyBDb21tYW5kKG9iamVjdCk6CiAgQ0QgPSAnY2QgL2QnIGlmIEdfSVNfV0lOIGVsc2UgJ2NkJwoKICBkZWYgX19pbml0X18oc2VsZiwgY21kLCBjbWRfZGlyPU5vbmUsIHRpbWVvdXQ9NjAsIGNiPU5vbmUsIGNsZWFuPU5vbmUpOgogICAgc2VsZi5jbWQgPSBjbWQKICAgIGlmIGNtZF9kaXI6CiAgICAgIHNlbGYuY21kID0gJ3swfSB7MX0gJiYgezJ9Jy5mb3JtYXQoQ29tbWFuZC5DRCwgY21kX2Rpciwgc2VsZi5jbWQpCiAgICBzZWxmLnRpbWVvdXQgPSB0aW1lb3V0CiAgICBzZWxmLmNhbGxiYWNrID0gY2IgaWYgY2IgZWxzZSAobGFtYmRhIG1zZzogTm9uZSkKICAgIHNlbGYuY2xlYW4gPSBjbGVhbiBpZiBjbGVhbiBlbHNlIChsYW1iZGE6IE5vbmUpCiAgICBzZWxmLnByb2MgPSBOb25lCgogIEBwcm9wZXJ0eQogIGRlZiBhbGl2ZShzZWxmKToKICAgICIiIiBSZXR1cm5zIHRydWUgb25seSBpZiBjb21tYW5kIHN0aWxsIHJ1bm5pbmcuICIiIgogICAgcmV0dXJuIHNlbGYucHJvYyBhbmQgc2VsZi5wcm9jLnBvbGwoKSBpcyBOb25lCgogIGRlZiBleGVjdXRlKHNlbGYsIG50cmllcz0zKToKICAgICIiIiBFeGVjdXRlIHRoZSBjb21tYW5kIHdpdGggbnRyaWVzIGlmIENtZFRpbWVkT3V0LgogICAgICAgIFJldHVybnMgdGhlIG91dHB1dCBvZiB0aGUgY29tbWFuZCBpZiBubyBFeGNlcHRpb24uCiAgICAiIiIKICAgIGF0dGVtcHQsIGZpbmlzaGVkLCBsaW1pdCA9IDAsIEZhbHNlLCBzZWxmLnRpbWVvdXQKCiAgICB3aGlsZSBub3QgZmluaXNoZWQ6CiAgICAgIHRyeToKICAgICAgICBhdHRlbXB0ICs9IDEKICAgICAgICByZXN1bHQgPSBzZWxmLnRyeV9jb21tYW5kKCkKICAgICAgICBmaW5pc2hlZCA9IFRydWUKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgIGV4Y2VwdCBDbWRUaW1lZE91dDoKICAgICAgICBpZiBhdHRlbXB0ICE9IG50cmllczoKICAgICAgICAgIHNlbGYubm90aWZ5X3JldHJ5KCkKICAgICAgICAgIHNlbGYudGltZW91dCArPSBsaW1pdAogICAgICAgIGVsc2U6CiAgICAgICAgICByYWlzZQoKICBkZWYgbm90aWZ5X3JldHJ5KHNlbGYpOgogICAgIiIiIFJldHJ5IHJlcXVpcmVkIGZvciBjb21tYW5kLCBub3RpZnkgdXNlci4gIiIiCiAgICBmb3IgY291bnQgaW4gcmFuZ2UoMywgMCwgLTEpOgogICAgICBpZiBHX1NUT1AuaXNfc2V0KCk6CiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKICAgICAgbXNnID0gJ1RpbWVvdXQuIFdpbGwgcmV0cnkgaW4gezB9IHNlY29uZHsxfSAuLi4nLmZvcm1hdCgKICAgICAgICAgICAgY291bnQsICdzJyBpZiBjb3VudCAhPSAxIGVsc2UgJycpCiAgICAgIHNlbGYuY2FsbGJhY2soW21zZ10pCiAgICAgIHRpbWUuc2xlZXAoMSkKICAgIHNlbGYuY2FsbGJhY2soWydSZXRyeWluZyAuLi4nXSkKCiAgZGVmIHRyeV9jb21tYW5kKHNlbGYpOgogICAgIiIiIEV4ZWN1dGUgYSBjbWQgJiBwb2xsIGZvciBjYWxsYmFjay4gUmV0dXJucyBsaXN0IG9mIG91dHB1dC4KICAgICAgICBSYWlzZXMgQ21kRmFpbGVkICAgLT4gcmV0dXJuIGNvZGUgZm9yIFBvcGVuIGlzbid0IDAKICAgICAgICBSYWlzZXMgQ21kVGltZWRPdXQgLT4gY29tbWFuZCBleGNlZWRlZCB0aW1lb3V0IHdpdGhvdXQgbmV3IG91dHB1dAogICAgIiIiCiAgICBmaXJzdF9saW5lID0gVHJ1ZQoKICAgIHRyeToKICAgICAgdGZpbGUgPSB0ZW1wZmlsZS5OYW1lZFRlbXBvcmFyeUZpbGUobW9kZT0ndytiJykKICAgICAgcHJlZXhlY19mbiA9IG5vdCBHX0lTX1dJTiBhbmQgb3Muc2V0c2lkIG9yIE5vbmUKICAgICAgc2VsZi5wcm9jID0gc3VicHJvY2Vzcy5Qb3BlbihzZWxmLmNtZCwgc3Rkb3V0PXRmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycj1zdWJwcm9jZXNzLlNURE9VVCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRpbj1zdWJwcm9jZXNzLlBJUEUsIHNoZWxsPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZXhlY19mbj1wcmVleGVjX2ZuKQogICAgICB0aHJkID0gdGhyLlRocmVhZCh0YXJnZXQ9KGxhbWJkYSBwcm9jOiBwcm9jLndhaXQoKSksIGFyZ3M9KHNlbGYucHJvYywpKQogICAgICB0aHJkLnN0YXJ0KCkKCiAgICAgIHRocmVhZF9ub3Rfc3RhcnRlZCA9IFRydWUKICAgICAgd2hpbGUgdGhyZWFkX25vdF9zdGFydGVkOgogICAgICAgIHRyeToKICAgICAgICAgIHRocmQuam9pbigwLjEpCiAgICAgICAgICB0aHJlYWRfbm90X3N0YXJ0ZWQgPSBGYWxzZQogICAgICAgIGV4Y2VwdCBSdW50aW1lRXJyb3I6CiAgICAgICAgICBwYXNzCgogICAgICB3aGlsZSBzZWxmLmFsaXZlOgogICAgICAgIGlmIEdfU1RPUC5pc19zZXQoKToKICAgICAgICAgIHJhaXNlIEtleWJvYXJkSW50ZXJydXB0CgogICAgICAgIGlmIGZpcnN0X2xpbmUgb3IgcmFuZG9tLnJhbmRvbSgpIDwgR19MT0dfUFJPQjoKICAgICAgICAgIGZpcnN0X2xpbmUgPSBGYWxzZQogICAgICAgICAgbGluZSA9ICcnIGlmIEdfSVNfV0lOIGVsc2Ugbm9uYmxvY2tfcmVhZCh0ZmlsZS5uYW1lKQogICAgICAgICAgaWYgbGluZToKICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhbbGluZV0pCgogICAgICAgIHRpbWVfZGlmZiA9IHRpbWUudGltZSgpIC0gb3MucGF0aC5nZXRtdGltZSh0ZmlsZS5uYW1lKQogICAgICAgIGlmIHRpbWVfZGlmZiA+IHNlbGYudGltZW91dDoKICAgICAgICAgIHJhaXNlIENtZFRpbWVkT3V0KFsnVGltZW91dCEnXSkKCiAgICAgICAgdGhyZC5qb2luKDAuNSkKCiAgICAgIHRmaWxlLnNlZWsoMCkKICAgICAgcmVzdWx0ID0gW2xpbmUuZGVjb2RlKCd1dGYtOCcsICdyZXBsYWNlJykucnN0cmlwKCkgZm9yIGxpbmUgaW4gdGZpbGVdCgogICAgICBpZiBzZWxmLnByb2MucmV0dXJuY29kZSAhPSAwOgogICAgICAgIHJhaXNlIENtZEZhaWxlZChbJyddICsgcmVzdWx0KQoKICAgICAgcmV0dXJuIHJlc3VsdAogICAgZXhjZXB0OgogICAgICBzZWxmLnRlcm1pbmF0ZSgpCiAgICAgIHJhaXNlCgogIGRlZiB0ZXJtaW5hdGUoc2VsZik6CiAgICAiIiIgVGVybWluYXRlIHByb2Nlc3MgYW5kIGNsZWFudXAuICIiIgogICAgaWYgc2VsZi5hbGl2ZToKICAgICAgaWYgR19JU19XSU46CiAgICAgICAgb3Mua2lsbChzZWxmLnByb2MucGlkLCBzaWduYWwuU0lHSU5UKQogICAgICBlbHNlOgogICAgICAgIG9zLmtpbGxwZyhzZWxmLnByb2MucGlkLCBzaWduYWwuU0lHVEVSTSkKICAgIHNlbGYuY2xlYW4oKQoKY2xhc3MgUGx1Z2luKG9iamVjdCk6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGFyZ3MsIGJ1Zl9xLCBsb2NrKToKICAgIHNlbGYubmFtZSA9IG5hbWUKICAgIHNlbGYuYXJncyA9IGFyZ3MKICAgIHNlbGYuYnVmX3EgPSBidWZfcQogICAgc2VsZi5sb2NrID0gbG9jawogICAgc2VsZi50YWcgPSBhcmdzLmdldCgndGFnJywgMCkKCiAgZGVmIG1hbmFnZShzZWxmKToKICAgIHRyeToKICAgICAgaWYgb3MucGF0aC5leGlzdHMoc2VsZi5hcmdzWydkaXInXSk6CiAgICAgICAgc2VsZi51cGRhdGUoKQogICAgICBlbHNlOgogICAgICAgIHNlbGYuaW5zdGFsbCgpCiAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICB0aHJlYWRfdmltX2NvbW1hbmQoImxldCBzOnVwZGF0ZS5uZXdbJ3swfSddID0gMSIuZm9ybWF0KHNlbGYubmFtZSkpCiAgICBleGNlcHQgUGx1Z0Vycm9yIGFzIGV4YzoKICAgICAgc2VsZi53cml0ZShBY3Rpb24uRVJST1IsIHNlbGYubmFtZSwgZXhjLm1zZykKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgR19TVE9QLnNldCgpCiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkVSUk9SLCBzZWxmLm5hbWUsIFsnSW50ZXJydXB0ZWQhJ10pCiAgICBleGNlcHQ6CiAgICAgICMgQW55IGV4Y2VwdGlvbiBleGNlcHQgdGhvc2UgYWJvdmUgcHJpbnQgc3RhY2sgdHJhY2UKICAgICAgbXNnID0gJ1RyYWNlOlxuezB9Jy5mb3JtYXQodHJhY2ViYWNrLmZvcm1hdF9leGMoKS5yc3RyaXAoKSkKICAgICAgc2VsZi53cml0ZShBY3Rpb24uRVJST1IsIHNlbGYubmFtZSwgbXNnLnNwbGl0KCdcbicpKQogICAgICByYWlzZQoKICBkZWYgaW5zdGFsbChzZWxmKToKICAgIHRhcmdldCA9IHNlbGYuYXJnc1snZGlyJ10KICAgIGlmIHRhcmdldFstMV0gPT0gJ1xcJzoKICAgICAgdGFyZ2V0ID0gdGFyZ2V0WzA6LTFdCgogICAgZGVmIGNsZWFuKHRhcmdldCk6CiAgICAgIGRlZiBfY2xlYW4oKToKICAgICAgICB0cnk6CiAgICAgICAgICBzaHV0aWwucm10cmVlKHRhcmdldCkKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgIHBhc3MKICAgICAgcmV0dXJuIF9jbGVhbgoKICAgIHNlbGYud3JpdGUoQWN0aW9uLklOU1RBTEwsIHNlbGYubmFtZSwgWydJbnN0YWxsaW5nIC4uLiddKQogICAgY2FsbGJhY2sgPSBmdW5jdG9vbHMucGFydGlhbChzZWxmLndyaXRlLCBBY3Rpb24uSU5TVEFMTCwgc2VsZi5uYW1lKQogICAgY21kID0gJ2dpdCBjbG9uZSB7MH0gezF9IHsyfSB7M30gMj4mMScuZm9ybWF0KAogICAgICAgICAgJycgaWYgc2VsZi50YWcgZWxzZSBHX0NMT05FX09QVCwgR19QUk9HUkVTUywgc2VsZi5hcmdzWyd1cmknXSwKICAgICAgICAgIGVzYyh0YXJnZXQpKQogICAgY29tID0gQ29tbWFuZChjbWQsIE5vbmUsIEdfVElNRU9VVCwgY2FsbGJhY2ssIGNsZWFuKHRhcmdldCkpCiAgICByZXN1bHQgPSBjb20uZXhlY3V0ZShHX1JFVFJJRVMpCiAgICBzZWxmLndyaXRlKEFjdGlvbi5ET05FLCBzZWxmLm5hbWUsIHJlc3VsdFstMTpdKQoKICBkZWYgcmVwb191cmkoc2VsZik6CiAgICBjbWQgPSAnZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgSEVBRCAyPiYxICYmIGdpdCBjb25maWcgLWYgLmdpdC9jb25maWcgcmVtb3RlLm9yaWdpbi51cmwnCiAgICBjb21tYW5kID0gQ29tbWFuZChjbWQsIHNlbGYuYXJnc1snZGlyJ10sIEdfVElNRU9VVCwpCiAgICByZXN1bHQgPSBjb21tYW5kLmV4ZWN1dGUoR19SRVRSSUVTKQogICAgcmV0dXJuIHJlc3VsdFstMV0KCiAgZGVmIHVwZGF0ZShzZWxmKToKICAgIGFjdHVhbF91cmkgPSBzZWxmLnJlcG9fdXJpKCkKICAgIGV4cGVjdF91cmkgPSBzZWxmLmFyZ3NbJ3VyaSddCiAgICByZWdleCA9IHJlLmNvbXBpbGUocideKD86XHcrOi8vKT8oPzpbXkAvXSpAKT8oW146L10qKD86OlswLTldKik/KVs6L10oLio/KSg/OlwuZ2l0KT8vPyQnKQogICAgbWEgPSByZWdleC5tYXRjaChhY3R1YWxfdXJpKQogICAgbWIgPSByZWdleC5tYXRjaChleHBlY3RfdXJpKQogICAgaWYgbWEgaXMgTm9uZSBvciBtYiBpcyBOb25lIG9yIG1hLmdyb3VwcygpICE9IG1iLmdyb3VwcygpOgogICAgICBtc2cgPSBbJycsCiAgICAgICAgICAgICAnSW52YWxpZCBVUkk6IHswfScuZm9ybWF0KGFjdHVhbF91cmkpLAogICAgICAgICAgICAgJ0V4cGVjdGVkICAgICB7MH0nLmZvcm1hdChleHBlY3RfdXJpKSwKICAgICAgICAgICAgICdQbHVnQ2xlYW4gcmVxdWlyZWQuJ10KICAgICAgcmFpc2UgSW52YWxpZFVSSShtc2cpCgogICAgaWYgR19QVUxMOgogICAgICBzZWxmLndyaXRlKEFjdGlvbi5VUERBVEUsIHNlbGYubmFtZSwgWydVcGRhdGluZyAuLi4nXSkKICAgICAgY2FsbGJhY2sgPSBmdW5jdG9vbHMucGFydGlhbChzZWxmLndyaXRlLCBBY3Rpb24uVVBEQVRFLCBzZWxmLm5hbWUpCiAgICAgIGZldGNoX29wdCA9ICctLWRlcHRoIDk5OTk5OTk5JyBpZiBzZWxmLnRhZyBhbmQgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHNlbGYuYXJnc1snZGlyJ10sICcuZ2l0L3NoYWxsb3cnKSkgZWxzZSAnJwogICAgICBjbWQgPSAnZ2l0IGZldGNoIHswfSB7MX0gMj4mMScuZm9ybWF0KGZldGNoX29wdCwgR19QUk9HUkVTUykKICAgICAgY29tID0gQ29tbWFuZChjbWQsIHNlbGYuYXJnc1snZGlyJ10sIEdfVElNRU9VVCwgY2FsbGJhY2spCiAgICAgIHJlc3VsdCA9IGNvbS5leGVjdXRlKEdfUkVUUklFUykKICAgICAgc2VsZi53cml0ZShBY3Rpb24uRE9ORSwgc2VsZi5uYW1lLCByZXN1bHRbLTE6XSkKICAgIGVsc2U6CiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkRPTkUsIHNlbGYubmFtZSwgWydBbHJlYWR5IGluc3RhbGxlZCddKQoKICBkZWYgd3JpdGUoc2VsZiwgYWN0aW9uLCBuYW1lLCBtc2cpOgogICAgc2VsZi5idWZfcS5wdXQoKGFjdGlvbiwgbmFtZSwgbXNnKSkKCmNsYXNzIFBsdWdUaHJlYWQodGhyLlRocmVhZCk6CiAgZGVmIF9faW5pdF9fKHNlbGYsIHRuYW1lLCBhcmdzKToKICAgIHN1cGVyKFBsdWdUaHJlYWQsIHNlbGYpLl9faW5pdF9fKCkKICAgIHNlbGYudG5hbWUgPSB0bmFtZQogICAgc2VsZi5hcmdzID0gYXJncwoKICBkZWYgcnVuKHNlbGYpOgogICAgdGhyLmN1cnJlbnRfdGhyZWFkKCkubmFtZSA9IHNlbGYudG5hbWUKICAgIGJ1Zl9xLCB3b3JrX3EsIGxvY2sgPSBzZWxmLmFyZ3MKCiAgICB0cnk6CiAgICAgIHdoaWxlIG5vdCBHX1NUT1AuaXNfc2V0KCk6CiAgICAgICAgbmFtZSwgYXJncyA9IHdvcmtfcS5nZXRfbm93YWl0KCkKICAgICAgICBwbHVnID0gUGx1Z2luKG5hbWUsIGFyZ3MsIGJ1Zl9xLCBsb2NrKQogICAgICAgIHBsdWcubWFuYWdlKCkKICAgICAgICB3b3JrX3EudGFza19kb25lKCkKICAgIGV4Y2VwdCBxdWV1ZS5FbXB0eToKICAgICAgcGFzcwoKY2xhc3MgUmVmcmVzaFRocmVhZCh0aHIuVGhyZWFkKToKICBkZWYgX19pbml0X18oc2VsZiwgbG9jayk6CiAgICBzdXBlcihSZWZyZXNoVGhyZWFkLCBzZWxmKS5fX2luaXRfXygpCiAgICBzZWxmLmxvY2sgPSBsb2NrCiAgICBzZWxmLnJ1bm5pbmcgPSBUcnVlCgogIGRlZiBydW4oc2VsZik6CiAgICB3aGlsZSBzZWxmLnJ1bm5pbmc6CiAgICAgIHdpdGggc2VsZi5sb2NrOgogICAgICAgIHRocmVhZF92aW1fY29tbWFuZCgnbm9hdXRvY21kIG5vcm1hbCEgYScpCiAgICAgIHRpbWUuc2xlZXAoMC4zMykKCiAgZGVmIHN0b3Aoc2VsZik6CiAgICBzZWxmLnJ1bm5pbmcgPSBGYWxzZQoKaWYgR19OVklNOgogIGRlZiB0aHJlYWRfdmltX2NvbW1hbmQoY21kKToKICAgIHZpbS5zZXNzaW9uLnRocmVhZHNhZmVfY2FsbChsYW1iZGE6IHZpbS5jb21tYW5kKGNtZCkpCmVsc2U6CiAgZGVmIHRocmVhZF92aW1fY29tbWFuZChjbWQpOgogICAgdmltLmNvbW1hbmQoY21kKQoKZGVmIGVzYyhuYW1lKToKICByZXR1cm4gJyInICsgbmFtZS5yZXBsYWNlKCciJywgJ1wiJykgKyAnIicKCmRlZiBub25ibG9ja19yZWFkKGZuYW1lKToKICAiIiIgUmVhZCBhIGZpbGUgd2l0aCBub25ibG9jayBmbGFnLiBSZXR1cm4gdGhlIGxhc3QgbGluZS4gIiIiCiAgZnJlYWQgPSBvcy5vcGVuKGZuYW1lLCBvcy5PX1JET05MWSB8IG9zLk9fTk9OQkxPQ0spCiAgYnVmID0gb3MucmVhZChmcmVhZCwgMTAwMDAwKS5kZWNvZGUoJ3V0Zi04JywgJ3JlcGxhY2UnKQogIG9zLmNsb3NlKGZyZWFkKQoKICBsaW5lID0gYnVmLnJzdHJpcCgnXHJcbicpCiAgbGVmdCA9IG1heChsaW5lLnJmaW5kKCdccicpLCBsaW5lLnJmaW5kKCdcbicpKQogIGlmIGxlZnQgIT0gLTE6CiAgICBsZWZ0ICs9IDEKICAgIGxpbmUgPSBsaW5lW2xlZnQ6XQoKICByZXR1cm4gbGluZQoKZGVmIG1haW4oKToKICB0aHIuY3VycmVudF90aHJlYWQoKS5uYW1lID0gJ21haW4nCiAgbnRocmVhZHMgPSBpbnQodmltLmV2YWwoJ3M6dXBkYXRlLnRocmVhZHMnKSkKICBwbHVncyA9IHZpbS5ldmFsKCdzOnVwZGF0ZS50b2RvJykKICBtYWNfZ3VpID0gdmltLmV2YWwoJ3M6bWFjX2d1aScpID09ICcxJwoKICBsb2NrID0gdGhyLkxvY2soKQogIGJ1ZiA9IEJ1ZmZlcihsb2NrLCBsZW4ocGx1Z3MpLCBHX1BVTEwpCiAgYnVmX3EsIHdvcmtfcSA9IHF1ZXVlLlF1ZXVlKCksIHF1ZXVlLlF1ZXVlKCkKICBmb3Igd29yayBpbiBwbHVncy5pdGVtcygpOgogICAgd29ya19xLnB1dCh3b3JrKQoKICBzdGFydF9jbnQgPSB0aHIuYWN0aXZlX2NvdW50KCkKICBmb3IgbnVtIGluIHJhbmdlKG50aHJlYWRzKToKICAgIHRuYW1lID0gJ1BsdWdULXswOjAyfScuZm9ybWF0KG51bSkKICAgIHRocmVhZCA9IFBsdWdUaHJlYWQodG5hbWUsIChidWZfcSwgd29ya19xLCBsb2NrKSkKICAgIHRocmVhZC5zdGFydCgpCiAgaWYgbWFjX2d1aToKICAgIHJ0aHJlYWQgPSBSZWZyZXNoVGhyZWFkKGxvY2spCiAgICBydGhyZWFkLnN0YXJ0KCkKCiAgd2hpbGUgbm90IGJ1Zl9xLmVtcHR5KCkgb3IgdGhyLmFjdGl2ZV9jb3VudCgpICE9IHN0YXJ0X2NudDoKICAgIHRyeToKICAgICAgYWN0aW9uLCBuYW1lLCBtc2cgPSBidWZfcS5nZXQoVHJ1ZSwgMC4yNSkKICAgICAgYnVmLndyaXRlKGFjdGlvbiwgbmFtZSwgWydPSyddIGlmIG5vdCBtc2cgZWxzZSBtc2cpCiAgICAgIGJ1Zl9xLnRhc2tfZG9uZSgpCiAgICBleGNlcHQgcXVldWUuRW1wdHk6CiAgICAgIHBhc3MKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgR19TVE9QLnNldCgpCgogIGlmIG1hY19ndWk6CiAgICBydGhyZWFkLnN0b3AoKQogICAgcnRocmVhZC5qb2luKCkKCm1haW4oKQpFT0YKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZGF0ZV9ydWJ5KCkKICBydWJ5IDw8IEVPRgogIG1vZHVsZSBQbHVnU3RyZWFtCiAgICBTRVAgPSBbIlxyIiwgIlxuIiwgbmlsXQogICAgZGVmIGdldF9saW5lCiAgICAgIGJ1ZmZlciA9ICcnCiAgICAgIGxvb3AgZG8KICAgICAgICBjaGFyID0gcmVhZGNoYXIgcmVzY3VlIHJldHVybgogICAgICAgIGlmIFNFUC5pbmNsdWRlPyBjaGFyLmNocgogICAgICAgICAgYnVmZmVyIDw8ICQvCiAgICAgICAgICBicmVhawogICAgICAgIGVsc2UKICAgICAgICAgIGJ1ZmZlciA8PCBjaGFyCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBidWZmZXIKICAgIGVuZAogIGVuZCB1bmxlc3MgZGVmaW5lZD8oUGx1Z1N0cmVhbSkKCiAgZGVmIGVzYyBhcmcKICAgICVbIiN7YXJnLmdzdWIoJyInLCAnXCInKX0iXQogIGVuZAoKICBkZWYga2lsbGFsbCBwaWQKICAgIHBpZHMgPSBbcGlkXQogICAgaWYgL21zd2lufG1pbmd3fGJjY3dpbi8gPX4gUlVCWV9QTEFURk9STQogICAgICBwaWRzLmVhY2ggeyB8cGlkfCBQcm9jZXNzLmtpbGwgJ0lOVCcsIHBpZC50b19pIHJlc2N1ZSBuaWwgfQogICAgZWxzZQogICAgICB1bmxlc3MgYHdoaWNoIHBncmVwIDI+IC9kZXYvbnVsbGAuZW1wdHk/CiAgICAgICAgY2hpbGRyZW4gPSBwaWRzCiAgICAgICAgdW50aWwgY2hpbGRyZW4uZW1wdHk/CiAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLm1hcCB7IHxwaWR8CiAgICAgICAgICAgIGBwZ3JlcCAtUCAje3BpZH1gLmxpbmVzLm1hcCB7IHxsfCBsLmNob21wIH0KICAgICAgICAgIH0uZmxhdHRlbgogICAgICAgICAgcGlkcyArPSBjaGlsZHJlbgogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcGlkcy5lYWNoIHsgfHBpZHwgUHJvY2Vzcy5raWxsICdURVJNJywgcGlkLnRvX2kgcmVzY3VlIG5pbCB9CiAgICBlbmQKICBlbmQKCiAgZGVmIGNvbXBhcmVfZ2l0X3VyaSBhLCBiCiAgICByZWdleCA9ICVye14oPzpcdys6Ly8pPyg/OlteQC9dKkApPyhbXjovXSooPzo6WzAtOV0qKT8pWzovXSguKj8pKD86XC5naXQpPy8/JH0KICAgIHJlZ2V4Lm1hdGNoKGEpLnRvX2EuZHJvcCgxKSA9PSByZWdleC5tYXRjaChiKS50b19hLmRyb3AoMSkKICBlbmQKCiAgcmVxdWlyZSAndGhyZWFkJwogIHJlcXVpcmUgJ2ZpbGV1dGlscycKICByZXF1aXJlICd0aW1lb3V0JwogIHJ1bm5pbmcgPSB0cnVlCiAgaXN3aW4gPSBWSU06OmV2YWx1YXRlKCdzOmlzX3dpbicpLnRvX2kgPT0gMQogIHB1bGwgID0gVklNOjpldmFsdWF0ZSgnczp1cGRhdGUucHVsbCcpLnRvX2kgPT0gMQogIGJhc2UgID0gVklNOjpldmFsdWF0ZSgnZzpwbHVnX2hvbWUnKQogIGFsbCAgID0gVklNOjpldmFsdWF0ZSgnczp1cGRhdGUudG9kbycpCiAgbGltaXQgPSBWSU06OmV2YWx1YXRlKCdnZXQoZzosICJwbHVnX3RpbWVvdXQiLCA2MCknKQogIHRyaWVzID0gVklNOjpldmFsdWF0ZSgnZ2V0KGc6LCAicGx1Z19yZXRyaWVzIiwgMiknKSArIDEKICBudGhyICA9IFZJTTo6ZXZhbHVhdGUoJ3M6dXBkYXRlLnRocmVhZHMnKS50b19pCiAgbWF4eSAgPSBWSU06OmV2YWx1YXRlKCd3aW5oZWlnaHQoIi4iKScpLnRvX2kKICB2aW03ICA9IFZJTTo6ZXZhbHVhdGUoJ3Y6dmVyc2lvbicpLnRvX2kgPD0gNzAzICYmIFJVQllfUExBVEZPUk0gPX4gL2Rhcndpbi8KICBjZCAgICA9IGlzd2luID8gJ2NkIC9kJyA6ICdjZCcKICB0b3QgICA9IFZJTTo6ZXZhbHVhdGUoJ2xlbihzOnVwZGF0ZS50b2RvKScpIHx8IDAKICBiYXIgICA9ICcnCiAgc2tpcCAgPSAnQWxyZWFkeSBpbnN0YWxsZWQnCiAgbXR4ICAgPSBNdXRleC5uZXcKICB0YWtlMSA9IHByb2MgeyBtdHguc3luY2hyb25pemUgeyBydW5uaW5nICYmIGFsbC5zaGlmdCB9IH0KICBsb2doICA9IHByb2MgewogICAgY250ID0gYmFyLmxlbmd0aAogICAgJGN1cmJ1ZlsxXSA9ICIje3B1bGwgPyAnVXBkYXRpbmcnIDogJ0luc3RhbGxpbmcnfSBwbHVnaW5zICgje2NudH0vI3t0b3R9KSIKICAgICRjdXJidWZbMl0gPSAnWycgKyBiYXIubGp1c3QodG90KSArICddJwogICAgVklNOjpjb21tYW5kKCdub3JtYWwhIDJHJykKICAgIFZJTTo6Y29tbWFuZCgncmVkcmF3JykKICB9CiAgd2hlcmUgPSBwcm9jIHsgfG5hbWV8ICgxLi4oJGN1cmJ1Zi5sZW5ndGgpKS5maW5kIHsgfGx8ICRjdXJidWZbbF0gPX4gL15bLSt4Kl0gI3tuYW1lfTovIH0gfQogIGxvZyAgID0gcHJvYyB7IHxuYW1lLCByZXN1bHQsIHR5cGV8CiAgICBtdHguc3luY2hyb25pemUgZG8KICAgICAgaW5nICA9ICFbdHJ1ZSwgZmFsc2VdLmluY2x1ZGU/KHR5cGUpCiAgICAgIGJhciArPSB0eXBlID8gJz0nIDogJ3gnIHVubGVzcyBpbmcKICAgICAgYiA9IGNhc2UgdHlwZQogICAgICAgICAgd2hlbiA6aW5zdGFsbCAgdGhlbiAnKycgd2hlbiA6dXBkYXRlIHRoZW4gJyonCiAgICAgICAgICB3aGVuIHRydWUsIG5pbCB0aGVuICctJyBlbHNlCiAgICAgICAgICAgIFZJTTo6Y29tbWFuZCgiY2FsbCBhZGQoczp1cGRhdGUuZXJyb3JzLCAnI3tuYW1lfScpIikKICAgICAgICAgICAgJ3gnCiAgICAgICAgICBlbmQKICAgICAgcmVzdWx0ID0KICAgICAgICBpZiB0eXBlIHx8IHR5cGUubmlsPwogICAgICAgICAgWyIje2J9ICN7bmFtZX06ICN7cmVzdWx0LmxpbmVzLnRvX2EubGFzdCB8fCAnT0snfSJdCiAgICAgICAgZWxzaWYgcmVzdWx0ID1+IC9eSW50ZXJydXB0ZWR8XlRpbWVvdXQvCiAgICAgICAgICBbIiN7Yn0gI3tuYW1lfTogI3tyZXN1bHR9Il0KICAgICAgICBlbHNlCiAgICAgICAgICBbIiN7Yn0gI3tuYW1lfSJdICsgcmVzdWx0LmxpbmVzLm1hcCB7IHxsfCAiICAgICIgPDwgbCB9CiAgICAgICAgZW5kCiAgICAgIGlmIGxudW0gPSB3aGVyZS5jYWxsKG5hbWUpCiAgICAgICAgJGN1cmJ1Zi5kZWxldGUgbG51bQogICAgICAgIGxudW0gPSA0IGlmIGluZyAmJiBsbnVtID4gbWF4eQogICAgICBlbmQKICAgICAgcmVzdWx0LmVhY2hfd2l0aF9pbmRleCBkbyB8bGluZSwgb2Zmc2V0fAogICAgICAgICRjdXJidWYuYXBwZW5kKChsbnVtIHx8IDQpIC0gMSArIG9mZnNldCwgbGluZS5nc3ViKC9cZVxbLi8sICcnKS5jaG9tcCkKICAgICAgZW5kCiAgICAgIGxvZ2guY2FsbAogICAgZW5kCiAgfQogIGJ0ID0gcHJvYyB7IHxjbWQsIG5hbWUsIHR5cGUsIGNsZWFudXB8CiAgICB0cmllZCA9IHRpbWVvdXQgPSAwCiAgICBiZWdpbgogICAgICB0cmllZCArPSAxCiAgICAgIHRpbWVvdXQgKz0gbGltaXQKICAgICAgZmQgPSBuaWwKICAgICAgZGF0YSA9ICcnCiAgICAgIGlmIGlzd2luCiAgICAgICAgVGltZW91dDo6dGltZW91dCh0aW1lb3V0KSBkbwogICAgICAgICAgdG1wID0gVklNOjpldmFsdWF0ZSgndGVtcG5hbWUoKScpCiAgICAgICAgICBzeXN0ZW0oIigje2NtZH0pID4gI3t0bXB9IikKICAgICAgICAgIGRhdGEgPSBGaWxlLnJlYWQodG1wKS5jaG9tcAogICAgICAgICAgRmlsZS51bmxpbmsgdG1wIHJlc2N1ZSBuaWwKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIGZkID0gSU8ucG9wZW4oY21kKS5leHRlbmQoUGx1Z1N0cmVhbSkKICAgICAgICBmaXJzdF9saW5lID0gdHJ1ZQogICAgICAgIGxvZ19wcm9iID0gMS4wIC8gbnRocgogICAgICAgIHdoaWxlIGxpbmUgPSBUaW1lb3V0Ojp0aW1lb3V0KHRpbWVvdXQpIHsgZmQuZ2V0X2xpbmUgfQogICAgICAgICAgZGF0YSA8PCBsaW5lCiAgICAgICAgICBsb2cuY2FsbCBuYW1lLCBsaW5lLmNob21wLCB0eXBlIGlmIG5hbWUgJiYgKGZpcnN0X2xpbmUgfHwgcmFuZCA8IGxvZ19wcm9iKQogICAgICAgICAgZmlyc3RfbGluZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICAgICAgZmQuY2xvc2UKICAgICAgZW5kCiAgICAgIFskPyA9PSAwLCBkYXRhLmNob21wXQogICAgcmVzY3VlIFRpbWVvdXQ6OkVycm9yLCBJbnRlcnJ1cHQgPT4gZQogICAgICBpZiBmZCAmJiAhZmQuY2xvc2VkPwogICAgICAgIGtpbGxhbGwgZmQucGlkCiAgICAgICAgZmQuY2xvc2UKICAgICAgZW5kCiAgICAgIGNsZWFudXAuY2FsbCBpZiBjbGVhbnVwCiAgICAgIGlmIGUuaXNfYT8oVGltZW91dDo6RXJyb3IpICYmIHRyaWVkIDwgdHJpZXMKICAgICAgICAzLmRvd250bygxKSBkbyB8Y291bnRkb3dufAogICAgICAgICAgcyA9IGNvdW50ZG93biA+IDEgPyAncycgOiAnJwogICAgICAgICAgbG9nLmNhbGwgbmFtZSwgIlRpbWVvdXQuIFdpbGwgcmV0cnkgaW4gI3tjb3VudGRvd259IHNlY29uZCN7c30gLi4uIiwgdHlwZQogICAgICAgICAgc2xlZXAgMQogICAgICAgIGVuZAogICAgICAgIGxvZy5jYWxsIG5hbWUsICdSZXRyeWluZyAuLi4nLCB0eXBlCiAgICAgICAgcmV0cnkKICAgICAgZW5kCiAgICAgIFtmYWxzZSwgZS5pc19hPyhJbnRlcnJ1cHQpID8gIkludGVycnVwdGVkISIgOiAiVGltZW91dCEiXQogICAgZW5kCiAgfQogIG1haW4gPSBUaHJlYWQuY3VycmVudAogIHRocmVhZHMgPSBbXQogIHdhdGNoZXIgPSBUaHJlYWQubmV3IHsKICAgIGlmIHZpbTcKICAgICAgd2hpbGUgVklNOjpldmFsdWF0ZSgnZ2V0Y2hhcigxKScpCiAgICAgICAgc2xlZXAgMC4xCiAgICAgIGVuZAogICAgZWxzZQogICAgICByZXF1aXJlICdpby9jb25zb2xlJyAjID49IFJ1YnkgMS45CiAgICAgIG5pbCB1bnRpbCBJTy5jb25zb2xlLmdldGNoID09IDMuY2hyCiAgICBlbmQKICAgIG10eC5zeW5jaHJvbml6ZSBkbwogICAgICBydW5uaW5nID0gZmFsc2UKICAgICAgdGhyZWFkcy5lYWNoIHsgfHR8IHQucmFpc2UgSW50ZXJydXB0IH0gdW5sZXNzIHZpbTcKICAgIGVuZAogICAgdGhyZWFkcy5lYWNoIHsgfHR8IHQuam9pbiByZXNjdWUgbmlsIH0KICAgIG1haW4ua2lsbAogIH0KICByZWZyZXNoID0gVGhyZWFkLm5ldyB7CiAgICB3aGlsZSB0cnVlCiAgICAgIG10eC5zeW5jaHJvbml6ZSBkbwogICAgICAgIGJyZWFrIHVubGVzcyBydW5uaW5nCiAgICAgICAgVklNOjpjb21tYW5kKCdub2F1dG9jbWQgbm9ybWFsISBhJykKICAgICAgZW5kCiAgICAgIHNsZWVwIDAuMgogICAgZW5kCiAgfSBpZiBWSU06OmV2YWx1YXRlKCdzOm1hY19ndWknKSA9PSAxCgogIGNsb25lX29wdCA9IFZJTTo6ZXZhbHVhdGUoJ3M6Y2xvbmVfb3B0JykKICBwcm9ncmVzcyA9IFZJTTo6ZXZhbHVhdGUoJ3M6cHJvZ3Jlc3Nfb3B0KDEpJykKICBudGhyLnRpbWVzIGRvCiAgICBtdHguc3luY2hyb25pemUgZG8KICAgICAgdGhyZWFkcyA8PCBUaHJlYWQubmV3IHsKICAgICAgICB3aGlsZSBwYWlyID0gdGFrZTEuY2FsbAogICAgICAgICAgbmFtZSA9IHBhaXIuZmlyc3QKICAgICAgICAgIGRpciwgdXJpLCB0YWcgPSBwYWlyLmxhc3QudmFsdWVzX2F0ICold1tkaXIgdXJpIHRhZ10KICAgICAgICAgIGV4aXN0cyA9IEZpbGUuZGlyZWN0b3J5PyBkaXIKICAgICAgICAgIG9rLCByZXN1bHQgPQogICAgICAgICAgICBpZiBleGlzdHMKICAgICAgICAgICAgICBjaGRpciA9ICIje2NkfSAje2lzd2luID8gZGlyIDogZXNjKGRpcil9IgogICAgICAgICAgICAgIHJldCwgZGF0YSA9IGJ0LmNhbGwgIiN7Y2hkaXJ9ICYmIGdpdCByZXYtcGFyc2UgLS1hYmJyZXYtcmVmIEhFQUQgMj4mMSAmJiBnaXQgY29uZmlnIC1mIC5naXQvY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIiwgbmlsLCBuaWwsIG5pbAogICAgICAgICAgICAgIGN1cnJlbnRfdXJpID0gZGF0YS5saW5lcy50b19hLmxhc3QKICAgICAgICAgICAgICBpZiAhcmV0CiAgICAgICAgICAgICAgICBpZiBkYXRhID1+IC9eSW50ZXJydXB0ZWR8XlRpbWVvdXQvCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgZGF0YV0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgW2ZhbHNlLCBbZGF0YS5jaG9tcCwgIlBsdWdDbGVhbiByZXF1aXJlZC4iXS5qb2luKCQvKV0KICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIGVsc2lmICFjb21wYXJlX2dpdF91cmkoY3VycmVudF91cmksIHVyaSkKICAgICAgICAgICAgICAgIFtmYWxzZSwgWyJJbnZhbGlkIFVSSTogI3tjdXJyZW50X3VyaX0iLAogICAgICAgICAgICAgICAgICAgICAgICAgIkV4cGVjdGVkOiAgICAje3VyaX0iLAogICAgICAgICAgICAgICAgICAgICAgICAgIlBsdWdDbGVhbiByZXF1aXJlZC4iXS5qb2luKCQvKV0KICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiBwdWxsCiAgICAgICAgICAgICAgICAgIGxvZy5jYWxsIG5hbWUsICdVcGRhdGluZyAuLi4nLCA6dXBkYXRlCiAgICAgICAgICAgICAgICAgIGZldGNoX29wdCA9ICh0YWcgJiYgRmlsZS5leGlzdD8oRmlsZS5qb2luKGRpciwgJy5naXQvc2hhbGxvdycpKSkgPyAnLS1kZXB0aCA5OTk5OTk5OScgOiAnJwogICAgICAgICAgICAgICAgICBidC5jYWxsICIje2NoZGlyfSAmJiBnaXQgZmV0Y2ggI3tmZXRjaF9vcHR9ICN7cHJvZ3Jlc3N9IDI+JjEiLCBuYW1lLCA6dXBkYXRlLCBuaWwKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgW3RydWUsIHNraXBdCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGQgPSBlc2MgZGlyLnN1YiglcntbXFwvXSskfSwgJycpCiAgICAgICAgICAgICAgbG9nLmNhbGwgbmFtZSwgJ0luc3RhbGxpbmcgLi4uJywgOmluc3RhbGwKICAgICAgICAgICAgICBidC5jYWxsICJnaXQgY2xvbmUgI3tjbG9uZV9vcHQgdW5sZXNzIHRhZ30gI3twcm9ncmVzc30gI3t1cml9ICN7ZH0gMj4mMSIsIG5hbWUsIDppbnN0YWxsLCBwcm9jIHsKICAgICAgICAgICAgICAgIEZpbGVVdGlscy5ybV9yZiBkaXIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVuZAogICAgICAgICAgbXR4LnN5bmNocm9uaXplIHsgVklNOjpjb21tYW5kKCJsZXQgczp1cGRhdGUubmV3Wycje25hbWV9J10gPSAxIikgfSBpZiAhZXhpc3RzICYmIG9rCiAgICAgICAgICBsb2cuY2FsbCBuYW1lLCByZXN1bHQsIG9rCiAgICAgICAgZW5kCiAgICAgIH0gaWYgcnVubmluZwogICAgZW5kCiAgZW5kCiAgdGhyZWFkcy5lYWNoIHsgfHR8IHQuam9pbiByZXNjdWUgbmlsIH0KICBsb2doLmNhbGwKICByZWZyZXNoLmtpbGwgaWYgcmVmcmVzaAogIHdhdGNoZXIua2lsbApFT0YKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNoZWxsZXNjX2NtZChhcmcsIHNjcmlwdCkKICBsZXQgZXNjYXBlZCA9IHN1YnN0aXR1dGUoJyInLmE6YXJnLiciJywgJ1smfDw+KClAXiEiXScsICdeJicsICdnJykKICByZXR1cm4gc3Vic3RpdHV0ZShlc2NhcGVkLCAnJScsIChhOnNjcmlwdCA/ICclJyA6ICdeJykgLiAnJicsICdnJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNoZWxsZXNjX3BzMShhcmcpCiAgcmV0dXJuICInIi5zdWJzdGl0dXRlKGVzY2FwZShhOmFyZywgJ1wiJyksICInIiwgIicnIiwgJ2cnKS4iJyIKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNoZWxsZXNjX3NoKGFyZykKICByZXR1cm4gIiciLnN1YnN0aXR1dGUoYTphcmcsICInIiwgIidcXFxcJyciLCAnZycpLiInIgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHBsdWcjc2hlbGxlc2NhcGUoYXJnLCAuLi4pCiAgbGV0IG9wdHMgPSBhOjAgPiAwICYmIHR5cGUoYToxKSA9PSBzOlRZUEUuZGljdCA/IGE6MSA6IHt9CiAgbGV0IHNoZWxsID0gZ2V0KG9wdHMsICdzaGVsbCcsIHM6aXNfd2luID8gJ2NtZC5leGUnIDogJ3NoJykKICBsZXQgc2NyaXB0ID0gZ2V0KG9wdHMsICdzY3JpcHQnLCAxKQogIGlmIHNoZWxsID1+IyAnY21kXC5leGUnCiAgICByZXR1cm4gczpzaGVsbGVzY19jbWQoYTphcmcsIHNjcmlwdCkKICBlbHNlaWYgc2hlbGwgPX4jICdwb3dlcnNoZWxsXC5leGUnIHx8IHNoZWxsID1+IyAncHdzaCQnCiAgICByZXR1cm4gczpzaGVsbGVzY19wczEoYTphcmcpCiAgZW5kaWYKICByZXR1cm4gczpzaGVsbGVzY19zaChhOmFyZykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdsb2JfZGlyKHBhdGgpCiAgcmV0dXJuIG1hcChmaWx0ZXIoczpnbG9iKGE6cGF0aCwgJyoqJyksICdpc2RpcmVjdG9yeSh2OnZhbCknKSwgJ3M6ZGlycGF0aCh2OnZhbCknKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJvZ3Jlc3NfYmFyKGxpbmUsIGJhciwgdG90YWwpCiAgY2FsbCBzZXRsaW5lKGE6bGluZSwgJ1snIC4gczpscGFkKGE6YmFyLCBhOnRvdGFsKSAuICddJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNvbXBhcmVfZ2l0X3VyaShhLCBiKQogICIgU2VlIGBnaXQgaGVscCBjbG9uZScKICAiIGh0dHBzOi8vIFt1c2VyQF0gZ2l0aHViLmNvbVs6cG9ydF0gLyBqdW5lZ3Vubi92aW0tcGx1ZyBbLmdpdF0KICAiICAgICAgICAgIFtnaXRAXSAgZ2l0aHViLmNvbVs6cG9ydF0gOiBqdW5lZ3Vubi92aW0tcGx1ZyBbLmdpdF0KICAiIGZpbGU6Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyBqdW5lZ3Vubi92aW0tcGx1ZyAgICAgICAgWy9dCiAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8ganVuZWd1bm4vdmltLXBsdWcgICAgICAgIFsvXQogIGxldCBwYXQgPSAnXlwlKFx3XCs6Ly9cKVw9Jy4nXCUoW15AL10qQFwpXD0nLidcKFteOi9dKlwlKDpbMC05XSpcKVw9XCknLidbOi9dJy4nXCguXHstfVwpJy4nXCUoXC5naXRcKVw9L1w/JCcKICBsZXQgbWEgPSBtYXRjaGxpc3QoYTphLCBwYXQpCiAgbGV0IG1iID0gbWF0Y2hsaXN0KGE6YiwgcGF0KQogIHJldHVybiBtYVsxOjJdID09IyBtYlsxOjJdCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpmb3JtYXRfbWVzc2FnZShidWxsZXQsIG5hbWUsIG1lc3NhZ2UpCiAgaWYgYTpidWxsZXQgIT0gJ3gnCiAgICByZXR1cm4gW3ByaW50ZignJXMgJXM6ICVzJywgYTpidWxsZXQsIGE6bmFtZSwgczpsYXN0bGluZShhOm1lc3NhZ2UpKV0KICBlbHNlCiAgICBsZXQgbGluZXMgPSBtYXAoczpsaW5lcyhhOm1lc3NhZ2UpLCAnIiAgICAiLnY6dmFsJykKICAgIHJldHVybiBleHRlbmQoW3ByaW50ZigneCAlczonLCBhOm5hbWUpXSwgbGluZXMpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOndpdGhfY2QoY21kLCBkaXIsIC4uLikKICBsZXQgc2NyaXB0ID0gYTowID4gMCA/IGE6MSA6IDEKICByZXR1cm4gcHJpbnRmKCdjZCVzICVzICYmICVzJywgczppc193aW4gPyAnIC9kJyA6ICcnLCBwbHVnI3NoZWxsZXNjYXBlKGE6ZGlyLCB7J3NjcmlwdCc6IHNjcmlwdH0pLCBhOmNtZCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN5c3RlbShjbWQsIC4uLikKICBsZXQgYmF0Y2hmaWxlID0gJycKICB0cnkKICAgIGxldCBbc2gsIHNoZWxsY21kZmxhZywgc2hyZF0gPSBzOmNoc2goMSkKICAgIGxldCBjbWQgPSBhOjAgPiAwID8gczp3aXRoX2NkKGE6Y21kLCBhOjEpIDogYTpjbWQKICAgIGlmIHM6aXNfd2luCiAgICAgIGxldCBbYmF0Y2hmaWxlLCBjbWRdID0gczpiYXRjaGZpbGUoY21kKQogICAgZW5kaWYKICAgIHJldHVybiBzeXN0ZW0oY21kKQogIGZpbmFsbHkKICAgIGxldCBbJnNoZWxsLCAmc2hlbGxjbWRmbGFnLCAmc2hlbGxyZWRpcl0gPSBbc2gsIHNoZWxsY21kZmxhZywgc2hyZF0KICAgIGlmIHM6aXNfd2luICYmIGZpbGVyZWFkYWJsZShiYXRjaGZpbGUpCiAgICAgIGNhbGwgZGVsZXRlKGJhdGNoZmlsZSkKICAgIGVuZGlmCiAgZW5kdHJ5CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzeXN0ZW1fY2hvbXAoLi4uKQogIGxldCByZXQgPSBjYWxsKCdzOnN5c3RlbScsIGE6MDAwKQogIHJldHVybiB2OnNoZWxsX2Vycm9yID8gJycgOiBzdWJzdGl0dXRlKHJldCwgJ1xuJCcsICcnLCAnJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdpdF92YWxpZGF0ZShzcGVjLCBjaGVja19icmFuY2gpCiAgbGV0IGVyciA9ICcnCiAgaWYgaXNkaXJlY3RvcnkoYTpzcGVjLmRpcikKICAgIGxldCByZXN1bHQgPSBzOmxpbmVzKHM6c3lzdGVtKCdnaXQgcmV2LXBhcnNlIC0tYWJicmV2LXJlZiBIRUFEIDI+JjEgJiYgZ2l0IGNvbmZpZyAtZiAuZ2l0L2NvbmZpZyByZW1vdGUub3JpZ2luLnVybCcsIGE6c3BlYy5kaXIpKQogICAgbGV0IHJlbW90ZSA9IHJlc3VsdFstMV0KICAgIGlmIHY6c2hlbGxfZXJyb3IKICAgICAgbGV0IGVyciA9IGpvaW4oW3JlbW90ZSwgJ1BsdWdDbGVhbiByZXF1aXJlZC4nXSwgIlxuIikKICAgIGVsc2VpZiAhczpjb21wYXJlX2dpdF91cmkocmVtb3RlLCBhOnNwZWMudXJpKQogICAgICBsZXQgZXJyID0gam9pbihbJ0ludmFsaWQgVVJJOiAnLnJlbW90ZSwKICAgICAgICAgICAgICAgICAgICBcICdFeHBlY3RlZDogICAgJy5hOnNwZWMudXJpLAogICAgICAgICAgICAgICAgICAgIFwgJ1BsdWdDbGVhbiByZXF1aXJlZC4nXSwgIlxuIikKICAgIGVsc2VpZiBhOmNoZWNrX2JyYW5jaCAmJiBoYXNfa2V5KGE6c3BlYywgJ2NvbW1pdCcpCiAgICAgIGxldCByZXN1bHQgPSBzOmxpbmVzKHM6c3lzdGVtKCdnaXQgcmV2LXBhcnNlIEhFQUQgMj4mMScsIGE6c3BlYy5kaXIpKQogICAgICBsZXQgc2hhID0gcmVzdWx0Wy0xXQogICAgICBpZiB2OnNoZWxsX2Vycm9yCiAgICAgICAgbGV0IGVyciA9IGpvaW4oYWRkKHJlc3VsdCwgJ1BsdWdDbGVhbiByZXF1aXJlZC4nKSwgIlxuIikKICAgICAgZWxzZWlmICFzOmhhc2hfbWF0Y2goc2hhLCBhOnNwZWMuY29tbWl0KQogICAgICAgIGxldCBlcnIgPSBqb2luKFtwcmludGYoJ0ludmFsaWQgSEVBRCAoZXhwZWN0ZWQ6ICVzLCBhY3R1YWw6ICVzKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwgYTpzcGVjLmNvbW1pdFs6Nl0sIHNoYVs6Nl0pLAogICAgICAgICAgICAgICAgICAgICAgXCAnUGx1Z1VwZGF0ZSByZXF1aXJlZC4nXSwgIlxuIikKICAgICAgZW5kaWYKICAgIGVsc2VpZiBhOmNoZWNrX2JyYW5jaAogICAgICBsZXQgYnJhbmNoID0gcmVzdWx0WzBdCiAgICAgICIgQ2hlY2sgdGFnCiAgICAgIGlmIGhhc19rZXkoYTpzcGVjLCAndGFnJykKICAgICAgICBsZXQgdGFnID0gczpzeXN0ZW1fY2hvbXAoJ2dpdCBkZXNjcmliZSAtLWV4YWN0LW1hdGNoIC0tdGFncyBIRUFEIDI+JjEnLCBhOnNwZWMuZGlyKQogICAgICAgIGlmIGE6c3BlYy50YWcgIT0jIHRhZyAmJiBhOnNwZWMudGFnICF+ICdcKicKICAgICAgICAgIGxldCBlcnIgPSBwcmludGYoJ0ludmFsaWQgdGFnOiAlcyAoZXhwZWN0ZWQ6ICVzKS4gVHJ5IFBsdWdVcGRhdGUuJywKICAgICAgICAgICAgICAgIFwgKGVtcHR5KHRhZykgPyAnTi9BJyA6IHRhZyksIGE6c3BlYy50YWcpCiAgICAgICAgZW5kaWYKICAgICAgIiBDaGVjayBicmFuY2gKICAgICAgZWxzZWlmIGE6c3BlYy5icmFuY2ggIT0jIGJyYW5jaAogICAgICAgIGxldCBlcnIgPSBwcmludGYoJ0ludmFsaWQgYnJhbmNoOiAlcyAoZXhwZWN0ZWQ6ICVzKS4gVHJ5IFBsdWdVcGRhdGUuJywKICAgICAgICAgICAgICBcIGJyYW5jaCwgYTpzcGVjLmJyYW5jaCkKICAgICAgZW5kaWYKICAgICAgaWYgZW1wdHkoZXJyKQogICAgICAgIGxldCBbYWhlYWQsIGJlaGluZF0gPSBzcGxpdChzOmxhc3RsaW5lKHM6c3lzdGVtKHByaW50ZigKICAgICAgICAgICAgICBcICdnaXQgcmV2LWxpc3QgLS1jb3VudCAtLWxlZnQtcmlnaHQgSEVBRC4uLm9yaWdpbi8lcycsCiAgICAgICAgICAgICAgXCBhOnNwZWMuYnJhbmNoKSwgYTpzcGVjLmRpcikpLCAnXHQnKQogICAgICAgIGlmICF2OnNoZWxsX2Vycm9yICYmIGFoZWFkCiAgICAgICAgICBpZiBiZWhpbmQKICAgICAgICAgICAgIiBPbmx5IG1lbnRpb24gUGx1Z0NsZWFuIGlmIGRpdmVyZ2VkLCBvdGhlcndpc2UgaXQncyBsaWtlbHkgdG8gYmUKICAgICAgICAgICAgIiBwdXNoYWJsZSAoYW5kIHByb2JhYmx5IG5vdCB0aGF0IG1lc3NlZCB1cCkuCiAgICAgICAgICAgIGxldCBlcnIgPSBwcmludGYoCiAgICAgICAgICAgICAgICAgIFwgIkRpdmVyZ2VkIGZyb20gb3JpZ2luLyVzICglZCBjb21taXQocykgYWhlYWQgYW5kICVkIGNvbW1pdChzKSBiZWhpbmQhXG4iCiAgICAgICAgICAgICAgICAgIFwgLidCYWNrdXAgbG9jYWwgY2hhbmdlcyBhbmQgcnVuIFBsdWdDbGVhbiBhbmQgUGx1Z1VwZGF0ZSB0byByZWluc3RhbGwgaXQuJywgYTpzcGVjLmJyYW5jaCwgYWhlYWQsIGJlaGluZCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgbGV0IGVyciA9IHByaW50ZigiQWhlYWQgb2Ygb3JpZ2luLyVzIGJ5ICVkIGNvbW1pdChzKS5cbiIKICAgICAgICAgICAgICAgICAgXCAuJ0Nhbm5vdCB1cGRhdGUgdW50aWwgbG9jYWwgY2hhbmdlcyBhcmUgcHVzaGVkLicsCiAgICAgICAgICAgICAgICAgIFwgYTpzcGVjLmJyYW5jaCwgYWhlYWQpCiAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGlmCiAgICAgIGVuZGlmCiAgICBlbmRpZgogIGVsc2UKICAgIGxldCBlcnIgPSAnTm90IGZvdW5kJwogIGVuZGlmCiAgcmV0dXJuIFtlcnIsIGVyciA9fiMgJ1BsdWdDbGVhbiddCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpybV9yZihkaXIpCiAgaWYgaXNkaXJlY3RvcnkoYTpkaXIpCiAgICBjYWxsIHM6c3lzdGVtKChzOmlzX3dpbiA/ICdybWRpciAvUyAvUSAnIDogJ3JtIC1yZiAnKSAuIHBsdWcjc2hlbGxlc2NhcGUoYTpkaXIpKQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpjbGVhbihmb3JjZSkKICBjYWxsIHM6cHJlcGFyZSgpCiAgY2FsbCBhcHBlbmQoMCwgJ1NlYXJjaGluZyBmb3IgaW52YWxpZCBwbHVnaW5zIGluICcuZzpwbHVnX2hvbWUpCiAgY2FsbCBhcHBlbmQoMSwgJycpCgogICIgTGlzdCBvZiB2YWxpZCBkaXJlY3RvcmllcwogIGxldCBkaXJzID0gW10KICBsZXQgZXJycyA9IHt9CiAgbGV0IFtjbnQsIHRvdGFsXSA9IFswLCBsZW4oZzpwbHVncyldCiAgZm9yIFtuYW1lLCBzcGVjXSBpbiBpdGVtcyhnOnBsdWdzKQogICAgaWYgIXM6aXNfbWFuYWdlZChuYW1lKQogICAgICBjYWxsIGFkZChkaXJzLCBzcGVjLmRpcikKICAgIGVsc2UKICAgICAgbGV0IFtlcnIsIGNsZWFuXSA9IHM6Z2l0X3ZhbGlkYXRlKHNwZWMsIDEpCiAgICAgIGlmIGNsZWFuCiAgICAgICAgbGV0IGVycnNbc3BlYy5kaXJdID0gczpsaW5lcyhlcnIpWzBdCiAgICAgIGVsc2UKICAgICAgICBjYWxsIGFkZChkaXJzLCBzcGVjLmRpcikKICAgICAgZW5kaWYKICAgIGVuZGlmCiAgICBsZXQgY250ICs9IDEKICAgIGNhbGwgczpwcm9ncmVzc19iYXIoMiwgcmVwZWF0KCc9JywgY250KSwgdG90YWwpCiAgICBub3JtYWwhIDJHCiAgICByZWRyYXcKICBlbmRmb3IKCiAgbGV0IGFsbG93ZWQgPSB7fQogIGZvciBkaXIgaW4gZGlycwogICAgbGV0IGFsbG93ZWRbczpkaXJwYXRoKHM6cGx1Z19mbmFtZW1vZGlmeShkaXIsICc6aDpoJykpXSA9IDEKICAgIGxldCBhbGxvd2VkW2Rpcl0gPSAxCiAgICBmb3IgY2hpbGQgaW4gczpnbG9iX2RpcihkaXIpCiAgICAgIGxldCBhbGxvd2VkW2NoaWxkXSA9IDEKICAgIGVuZGZvcgogIGVuZGZvcgoKICBsZXQgdG9kbyA9IFtdCiAgbGV0IGZvdW5kID0gc29ydChzOmdsb2JfZGlyKGc6cGx1Z19ob21lKSkKICB3aGlsZSAhZW1wdHkoZm91bmQpCiAgICBsZXQgZiA9IHJlbW92ZShmb3VuZCwgMCkKICAgIGlmICFoYXNfa2V5KGFsbG93ZWQsIGYpICYmIGlzZGlyZWN0b3J5KGYpCiAgICAgIGNhbGwgYWRkKHRvZG8sIGYpCiAgICAgIGNhbGwgYXBwZW5kKGxpbmUoJyQnKSwgJy0gJyAuIGYpCiAgICAgIGlmIGhhc19rZXkoZXJycywgZikKICAgICAgICBjYWxsIGFwcGVuZChsaW5lKCckJyksICcgICAgJyAuIGVycnNbZl0pCiAgICAgIGVuZGlmCiAgICAgIGxldCBmb3VuZCA9IGZpbHRlcihmb3VuZCwgJ3N0cmlkeCh2OnZhbCwgZikgIT0gMCcpCiAgICBlbmQKICBlbmR3aGlsZQoKICA0CiAgcmVkcmF3CiAgaWYgZW1wdHkodG9kbykKICAgIGNhbGwgYXBwZW5kKGxpbmUoJyQnKSwgJ0FscmVhZHkgY2xlYW4uJykKICBlbHNlCiAgICBsZXQgczpjbGVhbl9jb3VudCA9IDAKICAgIGNhbGwgYXBwZW5kKDMsIFsnRGlyZWN0b3JpZXMgdG8gZGVsZXRlOicsICcnXSkKICAgIHJlZHJhdyEKICAgIGlmIGE6Zm9yY2UgfHwgczphc2tfbm9faW50ZXJydXB0KCdEZWxldGUgYWxsIGRpcmVjdG9yaWVzPycpCiAgICAgIGNhbGwgczpkZWxldGUoWzYsIGxpbmUoJyQnKV0sIDEpCiAgICBlbHNlCiAgICAgIGNhbGwgc2V0bGluZSg0LCAnQ2FuY2VsbGVkLicpCiAgICAgIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IGQgOnNldCBvcGZ1bmM9PHNpZD5kZWxldGVfb3A8Y3I+Z0AKICAgICAgbm1hcCAgICAgPHNpbGVudD4gPGJ1ZmZlcj4gZGQgZF8KICAgICAgeG5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gZCA6PGMtdT5jYWxsIDxzaWQ+ZGVsZXRlX29wKHZpc3VhbG1vZGUoKSwgMSk8Y3I+CiAgICAgIGVjaG8gJ0RlbGV0ZSB0aGUgbGluZXMgKGR7bW90aW9ufSkgdG8gZGVsZXRlIHRoZSBjb3JyZXNwb25kaW5nIGRpcmVjdG9yaWVzJwogICAgZW5kaWYKICBlbmRpZgogIDQKICBzZXRsb2NhbCBub21vZGlmaWFibGUKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRlbGV0ZV9vcCh0eXBlLCAuLi4pCiAgY2FsbCBzOmRlbGV0ZShhOjAgPyBbbGluZSgiJzwiKSwgbGluZSgiJz4iKV0gOiBbbGluZSgiJ1siKSwgbGluZSgiJ10iKV0sIDApCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpkZWxldGUocmFuZ2UsIGZvcmNlKQogIGxldCBbbDEsIGwyXSA9IGE6cmFuZ2UKICBsZXQgZm9yY2UgPSBhOmZvcmNlCiAgd2hpbGUgbDEgPD0gbDIKICAgIGxldCBsaW5lID0gZ2V0bGluZShsMSkKICAgIGlmIGxpbmUgPX4gJ14tICcgJiYgaXNkaXJlY3RvcnkobGluZVsyOl0pCiAgICAgIGV4ZWN1dGUgbDEKICAgICAgcmVkcmF3IQogICAgICBsZXQgYW5zd2VyID0gZm9yY2UgPyAxIDogczphc2soJ0RlbGV0ZSAnLmxpbmVbMjpdLic/JywgMSkKICAgICAgbGV0IGZvcmNlID0gZm9yY2UgfHwgYW5zd2VyID4gMQogICAgICBpZiBhbnN3ZXIKICAgICAgICBjYWxsIHM6cm1fcmYobGluZVsyOl0pCiAgICAgICAgc2V0bG9jYWwgbW9kaWZpYWJsZQogICAgICAgIGNhbGwgc2V0bGluZShsMSwgJ34nLmxpbmVbMTpdKQogICAgICAgIGxldCBzOmNsZWFuX2NvdW50ICs9IDEKICAgICAgICBjYWxsIHNldGxpbmUoNCwgcHJpbnRmKCdSZW1vdmVkICVkIGRpcmVjdG9yaWVzLicsIHM6Y2xlYW5fY291bnQpKQogICAgICAgIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogICAgICBlbmRpZgogICAgZW5kaWYKICAgIGxldCBsMSArPSAxCiAgZW5kd2hpbGUKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZ3JhZGUoKQogIGVjaG8gJ0Rvd25sb2FkaW5nIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiB2aW0tcGx1ZycKICByZWRyYXcKICBsZXQgdG1wID0gczpwbHVnX3RlbXBuYW1lKCkKICBsZXQgbmV3ID0gdG1wIC4gJy9wbHVnLnZpbScKCiAgdHJ5CiAgICBsZXQgb3V0ID0gczpzeXN0ZW0ocHJpbnRmKCdnaXQgY2xvbmUgLS1kZXB0aCAxICVzICVzJywgcGx1ZyNzaGVsbGVzY2FwZShzOnBsdWdfc3JjKSwgcGx1ZyNzaGVsbGVzY2FwZSh0bXApKSkKICAgIGlmIHY6c2hlbGxfZXJyb3IKICAgICAgcmV0dXJuIHM6ZXJyKCdFcnJvciB1cGdyYWRpbmcgdmltLXBsdWc6ICcuIG91dCkKICAgIGVuZGlmCgogICAgaWYgcmVhZGZpbGUoczptZSkgPT0jIHJlYWRmaWxlKG5ldykKICAgICAgZWNobyAndmltLXBsdWcgaXMgYWxyZWFkeSB1cC10by1kYXRlJwogICAgICByZXR1cm4gMAogICAgZWxzZQogICAgICBjYWxsIHJlbmFtZShzOm1lLCBzOm1lIC4gJy5vbGQnKQogICAgICBjYWxsIHJlbmFtZShuZXcsIHM6bWUpCiAgICAgIHVubGV0IGc6bG9hZGVkX3BsdWcKICAgICAgZWNobyAndmltLXBsdWcgaGFzIGJlZW4gdXBncmFkZWQnCiAgICAgIHJldHVybiAxCiAgICBlbmRpZgogIGZpbmFsbHkKICAgIHNpbGVudCEgY2FsbCBzOnJtX3JmKHRtcCkKICBlbmR0cnkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZ3JhZGVfc3BlY3MoKQogIGZvciBzcGVjIGluIHZhbHVlcyhnOnBsdWdzKQogICAgbGV0IHNwZWMuZnJvemVuID0gZ2V0KHNwZWMsICdmcm96ZW4nLCAwKQogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c3RhdHVzKCkKICBjYWxsIHM6cHJlcGFyZSgpCiAgY2FsbCBhcHBlbmQoMCwgJ0NoZWNraW5nIHBsdWdpbnMnKQogIGNhbGwgYXBwZW5kKDEsICcnKQoKICBsZXQgZWNudCA9IDAKICBsZXQgdW5sb2FkZWQgPSAwCiAgbGV0IFtjbnQsIHRvdGFsXSA9IFswLCBsZW4oZzpwbHVncyldCiAgZm9yIFtuYW1lLCBzcGVjXSBpbiBpdGVtcyhnOnBsdWdzKQogICAgbGV0IGlzX2RpciA9IGlzZGlyZWN0b3J5KHNwZWMuZGlyKQogICAgaWYgaGFzX2tleShzcGVjLCAndXJpJykKICAgICAgaWYgaXNfZGlyCiAgICAgICAgbGV0IFtlcnIsIF9dID0gczpnaXRfdmFsaWRhdGUoc3BlYywgMSkKICAgICAgICBsZXQgW3ZhbGlkLCBtc2ddID0gW2VtcHR5KGVyciksIGVtcHR5KGVycikgPyAnT0snIDogZXJyXQogICAgICBlbHNlCiAgICAgICAgbGV0IFt2YWxpZCwgbXNnXSA9IFswLCAnTm90IGZvdW5kLiBUcnkgUGx1Z0luc3RhbGwuJ10KICAgICAgZW5kaWYKICAgIGVsc2UKICAgICAgaWYgaXNfZGlyCiAgICAgICAgbGV0IFt2YWxpZCwgbXNnXSA9IFsxLCAnT0snXQogICAgICBlbHNlCiAgICAgICAgbGV0IFt2YWxpZCwgbXNnXSA9IFswLCAnTm90IGZvdW5kLiddCiAgICAgIGVuZGlmCiAgICBlbmRpZgogICAgbGV0IGNudCArPSAxCiAgICBsZXQgZWNudCArPSAhdmFsaWQKICAgICIgYHM6bG9hZGVkYCBlbnRyeSBjYW4gYmUgbWlzc2luZyBpZiBQbHVnVXBncmFkZWQKICAgIGlmIGlzX2RpciAmJiBnZXQoczpsb2FkZWQsIG5hbWUsIC0xKSA9PSAwCiAgICAgIGxldCB1bmxvYWRlZCA9IDEKICAgICAgbGV0IG1zZyAuPSAnIChub3QgbG9hZGVkKScKICAgIGVuZGlmCiAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIHJlcGVhdCgnPScsIGNudCksIHRvdGFsKQogICAgY2FsbCBhcHBlbmQoMywgczpmb3JtYXRfbWVzc2FnZSh2YWxpZCA/ICctJyA6ICd4JywgbmFtZSwgbXNnKSkKICAgIG5vcm1hbCEgMkcKICAgIHJlZHJhdwogIGVuZGZvcgogIGNhbGwgc2V0bGluZSgxLCAnRmluaXNoZWQuICcuZWNudC4nIGVycm9yKHMpLicpCiAgbm9ybWFsISBnZwogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGlmIHVubG9hZGVkCiAgICBlY2hvICJQcmVzcyAnTCcgb24gZWFjaCBsaW5lIHRvIGxvYWQgcGx1Z2luLCBvciAnVScgdG8gdXBkYXRlIgogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gTCA6Y2FsbCA8U0lEPnN0YXR1c19sb2FkKGxpbmUoJy4nKSk8Y3I+CiAgICB4bm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBMIDpjYWxsIDxTSUQ+c3RhdHVzX2xvYWQobGluZSgnLicpKTxjcj4KICBlbmQKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmV4dHJhY3RfbmFtZShzdHIsIHByZWZpeCwgc3VmZml4KQogIHJldHVybiBtYXRjaHN0cihhOnN0ciwgJ14nLmE6cHJlZml4LicgXHpzW146XVwrXHplOi4qJy5hOnN1ZmZpeC4nJCcpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzdGF0dXNfbG9hZChsbnVtKQogIGxldCBsaW5lID0gZ2V0bGluZShhOmxudW0pCiAgbGV0IG5hbWUgPSBzOmV4dHJhY3RfbmFtZShsaW5lLCAnLScsICcobm90IGxvYWRlZCknKQogIGlmICFlbXB0eShuYW1lKQogICAgY2FsbCBwbHVnI2xvYWQobmFtZSkKICAgIHNldGxvY2FsIG1vZGlmaWFibGUKICAgIGNhbGwgc2V0bGluZShhOmxudW0sIHN1YnN0aXR1dGUobGluZSwgJyAobm90IGxvYWRlZCkkJywgJycsICcnKSkKICAgIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzdGF0dXNfdXBkYXRlKCkgcmFuZ2UKICBsZXQgbGluZXMgPSBnZXRsaW5lKGE6Zmlyc3RsaW5lLCBhOmxhc3RsaW5lKQogIGxldCBuYW1lcyA9IGZpbHRlcihtYXAobGluZXMsICdzOmV4dHJhY3RfbmFtZSh2OnZhbCwgIlt4LV0iLCAiIiknKSwgJyFlbXB0eSh2OnZhbCknKQogIGlmICFlbXB0eShuYW1lcykKICAgIGVjaG8KICAgIGV4ZWN1dGUgJ1BsdWdVcGRhdGUnIGpvaW4obmFtZXMpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmlzX3ByZXZpZXdfd2luZG93X29wZW4oKQogIHNpbGVudCEgd2luY21kIFAKICBpZiAmcHJldmlld3dpbmRvdwogICAgd2luY21kIHAKICAgIHJldHVybiAxCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmZpbmRfbmFtZShsbnVtKQogIGZvciBsbnVtIGluIHJldmVyc2UocmFuZ2UoMSwgYTpsbnVtKSkKICAgIGxldCBsaW5lID0gZ2V0bGluZShsbnVtKQogICAgaWYgZW1wdHkobGluZSkKICAgICAgcmV0dXJuICcnCiAgICBlbmRpZgogICAgbGV0IG5hbWUgPSBzOmV4dHJhY3RfbmFtZShsaW5lLCAnLScsICcnKQogICAgaWYgIWVtcHR5KG5hbWUpCiAgICAgIHJldHVybiBuYW1lCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJldmlld19jb21taXQoKQogIGlmIGI6cGx1Z19wcmV2aWV3IDwgMAogICAgbGV0IGI6cGx1Z19wcmV2aWV3ID0gIXM6aXNfcHJldmlld193aW5kb3dfb3BlbigpCiAgZW5kaWYKCiAgbGV0IHNoYSA9IG1hdGNoc3RyKGdldGxpbmUoJy4nKSwgJ14gIFxYKlx6c1swLTlhLWZdXHs3LDl9JykKICBpZiBlbXB0eShzaGEpCiAgICByZXR1cm4KICBlbmRpZgoKICBsZXQgbmFtZSA9IHM6ZmluZF9uYW1lKGxpbmUoJy4nKSkKICBpZiBlbXB0eShuYW1lKSB8fCAhaGFzX2tleShnOnBsdWdzLCBuYW1lKSB8fCAhaXNkaXJlY3RvcnkoZzpwbHVnc1tuYW1lXS5kaXIpCiAgICByZXR1cm4KICBlbmRpZgoKICBpZiBleGlzdHMoJ2c6cGx1Z19wd2luZG93JykgJiYgIXM6aXNfcHJldmlld193aW5kb3dfb3BlbigpCiAgICBleGVjdXRlIGc6cGx1Z19wd2luZG93CiAgICBleGVjdXRlICdlJyBzaGEKICBlbHNlCiAgICBleGVjdXRlICdwZWRpdCcgc2hhCiAgICB3aW5jbWQgUAogIGVuZGlmCiAgc2V0bG9jYWwgcHJldmlld3dpbmRvdyBmaWxldHlwZT1naXQgYnVmdHlwZT1ub2ZpbGUgbm9idWZsaXN0ZWQgbW9kaWZpYWJsZQogIGxldCBiYXRjaGZpbGUgPSAnJwogIHRyeQogICAgbGV0IFtzaCwgc2hlbGxjbWRmbGFnLCBzaHJkXSA9IHM6Y2hzaCgxKQogICAgbGV0IGNtZCA9ICdjZCAnLnBsdWcjc2hlbGxlc2NhcGUoZzpwbHVnc1tuYW1lXS5kaXIpLicgJiYgZ2l0IHNob3cgLS1uby1jb2xvciAtLXByZXR0eT1tZWRpdW0gJy5zaGEKICAgIGlmIHM6aXNfd2luCiAgICAgIGxldCBbYmF0Y2hmaWxlLCBjbWRdID0gczpiYXRjaGZpbGUoY21kKQogICAgZW5kaWYKICAgIGV4ZWN1dGUgJ3NpbGVudCAlIScgY21kCiAgZmluYWxseQogICAgbGV0IFsmc2hlbGwsICZzaGVsbGNtZGZsYWcsICZzaGVsbHJlZGlyXSA9IFtzaCwgc2hlbGxjbWRmbGFnLCBzaHJkXQogICAgaWYgczppc193aW4gJiYgZmlsZXJlYWRhYmxlKGJhdGNoZmlsZSkKICAgICAgY2FsbCBkZWxldGUoYmF0Y2hmaWxlKQogICAgZW5kaWYKICBlbmR0cnkKICBzZXRsb2NhbCBub21vZGlmaWFibGUKICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBxIDpxPGNyPgogIHdpbmNtZCBwCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzZWN0aW9uKGZsYWdzKQogIGNhbGwgc2VhcmNoKCdcKF5beC1dIFwpXEA8PVteOl1cKzonLCBhOmZsYWdzKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Zm9ybWF0X2dpdF9sb2cobGluZSkKICBsZXQgaW5kZW50ID0gJyAgJwogIGxldCB0b2tlbnMgPSBzcGxpdChhOmxpbmUsIG5yMmNoYXIoMSkpCiAgaWYgbGVuKHRva2VucykgIT0gNQogICAgcmV0dXJuIGluZGVudC5zdWJzdGl0dXRlKGE6bGluZSwgJ1xzKiQnLCAnJywgJycpCiAgZW5kaWYKICBsZXQgW2dyYXBoLCBzaGEsIHJlZnMsIHN1YmplY3QsIGRhdGVdID0gdG9rZW5zCiAgbGV0IHRhZyA9IG1hdGNoc3RyKHJlZnMsICd0YWc6IFteLCldXCsnKQogIGxldCB0YWcgPSBlbXB0eSh0YWcpID8gJyAnIDogJyAoJy50YWcuJykgJwogIHJldHVybiBwcmludGYoJyVzJXMlcyVzJXMgKCVzKScsIGluZGVudCwgZ3JhcGgsIHNoYSwgdGFnLCBzdWJqZWN0LCBkYXRlKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXBwZW5kX3VsKGxudW0sIHRleHQpCiAgY2FsbCBhcHBlbmQoYTpsbnVtLCBbJycsIGE6dGV4dCwgcmVwZWF0KCctJywgbGVuKGE6dGV4dCkpXSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRpZmYoKQogIGNhbGwgczpwcmVwYXJlKCkKICBjYWxsIGFwcGVuZCgwLCBbJ0NvbGxlY3RpbmcgY2hhbmdlcyAuLi4nLCAnJ10pCiAgbGV0IGNudHMgPSBbMCwgMF0KICBsZXQgYmFyID0gJycKICBsZXQgdG90YWwgPSBmaWx0ZXIoY29weShnOnBsdWdzKSwgJ3M6aXNfbWFuYWdlZCh2OmtleSkgJiYgaXNkaXJlY3Rvcnkodjp2YWwuZGlyKScpCiAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCBiYXIsIGxlbih0b3RhbCkpCiAgZm9yIG9yaWdpbiBpbiBbMSwgMF0KICAgIGxldCBwbHVncyA9IHJldmVyc2Uoc29ydChpdGVtcyhmaWx0ZXIoY29weSh0b3RhbCksIChvcmlnaW4gPyAnJyA6ICchJykuJyhoYXNfa2V5KHY6dmFsLCAiY29tbWl0IikgfHwgaGFzX2tleSh2OnZhbCwgInRhZyIpKScpKSkpCiAgICBpZiBlbXB0eShwbHVncykKICAgICAgY29udGludWUKICAgIGVuZGlmCiAgICBjYWxsIHM6YXBwZW5kX3VsKDIsIG9yaWdpbiA/ICdQZW5kaW5nIHVwZGF0ZXM6JyA6ICdMYXN0IHVwZGF0ZTonKQogICAgZm9yIFtrLCB2XSBpbiBwbHVncwogICAgICBsZXQgcmFuZ2UgPSBvcmlnaW4gPyAnLi5vcmlnaW4vJy52LmJyYW5jaCA6ICdIRUFEQHsxfS4uJwogICAgICBsZXQgY21kID0gJ2dpdCBsb2cgLS1ncmFwaCAtLWNvbG9yPW5ldmVyICcKICAgICAgXCAuIChzOmdpdF92ZXJzaW9uX3JlcXVpcmVtZW50KDIsIDEwLCAwKSA/ICctLW5vLXNob3ctc2lnbmF0dXJlICcgOiAnJykKICAgICAgXCAuIGpvaW4obWFwKFsnLS1wcmV0dHk9Zm9ybWF0OiV4MDElaCV4MDElZCV4MDElcyV4MDElY3InLCByYW5nZV0sICdwbHVnI3NoZWxsZXNjYXBlKHY6dmFsKScpKQogICAgICBpZiBoYXNfa2V5KHYsICdydHAnKQogICAgICAgIGxldCBjbWQgLj0gJyAtLSAnLnBsdWcjc2hlbGxlc2NhcGUodi5ydHApCiAgICAgIGVuZGlmCiAgICAgIGxldCBkaWZmID0gczpzeXN0ZW1fY2hvbXAoY21kLCB2LmRpcikKICAgICAgaWYgIWVtcHR5KGRpZmYpCiAgICAgICAgbGV0IHJlZiA9IGhhc19rZXkodiwgJ3RhZycpID8gKCcgKHRhZzogJy52LnRhZy4nKScpIDogaGFzX2tleSh2LCAnY29tbWl0JykgPyAoJyAnLnYuY29tbWl0KSA6ICcnCiAgICAgICAgY2FsbCBhcHBlbmQoNSwgZXh0ZW5kKFsnJywgJy0gJy5rLic6Jy5yZWZdLCBtYXAoczpsaW5lcyhkaWZmKSwgJ3M6Zm9ybWF0X2dpdF9sb2codjp2YWwpJykpKQogICAgICAgIGxldCBjbnRzW29yaWdpbl0gKz0gMQogICAgICBlbmRpZgogICAgICBsZXQgYmFyIC49ICc9JwogICAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIGJhciwgbGVuKHRvdGFsKSkKICAgICAgbm9ybWFsISAyRwogICAgICByZWRyYXcKICAgIGVuZGZvcgogICAgaWYgIWNudHNbb3JpZ2luXQogICAgICBjYWxsIGFwcGVuZCg1LCBbJycsICdOL0EnXSkKICAgIGVuZGlmCiAgZW5kZm9yCiAgY2FsbCBzZXRsaW5lKDEsIHByaW50ZignJWQgcGx1Z2luKHMpIHVwZGF0ZWQuJywgY250c1swXSkKICAgICAgICBcIC4gKGNudHNbMV0gPyBwcmludGYoJyAlZCBwbHVnaW4ocykgaGF2ZSBwZW5kaW5nIHVwZGF0ZXMuJywgY250c1sxXSkgOiAnJykpCgogIGlmIGNudHNbMF0gfHwgY250c1sxXQogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gPHBsdWc+KHBsdWctcHJldmlldykgOnNpbGVudCEgY2FsbCA8U0lEPnByZXZpZXdfY29tbWl0KCk8Y3I+CiAgICBpZiBlbXB0eShtYXBhcmcoIlw8Y3I+IiwgJ24nKSkKICAgICAgbm1hcCA8YnVmZmVyPiA8Y3I+IDxwbHVnPihwbHVnLXByZXZpZXcpCiAgICBlbmRpZgogICAgaWYgZW1wdHkobWFwYXJnKCdvJywgJ24nKSkKICAgICAgbm1hcCA8YnVmZmVyPiBvIDxwbHVnPihwbHVnLXByZXZpZXcpCiAgICBlbmRpZgogIGVuZGlmCiAgaWYgY250c1swXQogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gWCA6Y2FsbCA8U0lEPnJldmVydCgpPGNyPgogICAgZWNobyAiUHJlc3MgJ1gnIG9uIGVhY2ggYmxvY2sgdG8gcmV2ZXJ0IHRoZSB1cGRhdGUiCiAgZW5kaWYKICBub3JtYWwhIGdnCiAgc2V0bG9jYWwgbm9tb2RpZmlhYmxlCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZXZlcnQoKQogIGlmIHNlYXJjaCgnXlBlbmRpbmcgdXBkYXRlcycsICdiblcnKQogICAgcmV0dXJuCiAgZW5kaWYKCiAgbGV0IG5hbWUgPSBzOmZpbmRfbmFtZShsaW5lKCcuJykpCiAgaWYgZW1wdHkobmFtZSkgfHwgIWhhc19rZXkoZzpwbHVncywgbmFtZSkgfHwKICAgIFwgaW5wdXQocHJpbnRmKCdSZXZlcnQgdGhlIHVwZGF0ZSBvZiAlcz8gKHkvTikgJywgbmFtZSkpICF+PyAnXnknCiAgICByZXR1cm4KICBlbmRpZgoKICBjYWxsIHM6c3lzdGVtKCdnaXQgcmVzZXQgLS1oYXJkIEhFQURAezF9ICYmIGdpdCBjaGVja291dCAnLnBsdWcjc2hlbGxlc2NhcGUoZzpwbHVnc1tuYW1lXS5icmFuY2gpLicgLS0nLCBnOnBsdWdzW25hbWVdLmRpcikKICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgbm9ybWFsISAiX2RhcAogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGVjaG8gJ1JldmVydGVkJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c25hcHNob3QoZm9yY2UsIC4uLikgYWJvcnQKICBjYWxsIHM6cHJlcGFyZSgpCiAgc2V0ZiB2aW0KICBjYWxsIGFwcGVuZCgwLCBbJyIgR2VuZXJhdGVkIGJ5IHZpbS1wbHVnJywKICAgICAgICAgICAgICAgIFwgJyIgJy5zdHJmdGltZSgiJWMiKSwKICAgICAgICAgICAgICAgIFwgJyIgOnNvdXJjZSB0aGlzIGZpbGUgaW4gdmltIHRvIHJlc3RvcmUgdGhlIHNuYXBzaG90JywKICAgICAgICAgICAgICAgIFwgJyIgb3IgZXhlY3V0ZTogdmltIC1TIHNuYXBzaG90LnZpbScsCiAgICAgICAgICAgICAgICBcICcnLCAnJywgJ1BsdWdVcGRhdGUhJ10pCiAgMQogIGxldCBhbmNob3IgPSBsaW5lKCckJykgLSAzCiAgbGV0IG5hbWVzID0gc29ydChrZXlzKGZpbHRlcihjb3B5KGc6cGx1Z3MpLAogICAgICAgIFwnaGFzX2tleSh2OnZhbCwgInVyaSIpICYmICFoYXNfa2V5KHY6dmFsLCAiY29tbWl0IikgJiYgaXNkaXJlY3Rvcnkodjp2YWwuZGlyKScpKSkKICBmb3IgbmFtZSBpbiByZXZlcnNlKG5hbWVzKQogICAgbGV0IHNoYSA9IHM6c3lzdGVtX2Nob21wKCdnaXQgcmV2LXBhcnNlIC0tc2hvcnQgSEVBRCcsIGc6cGx1Z3NbbmFtZV0uZGlyKQogICAgaWYgIWVtcHR5KHNoYSkKICAgICAgY2FsbCBhcHBlbmQoYW5jaG9yLCBwcmludGYoInNpbGVudCEgbGV0IGc6cGx1Z3NbJyVzJ10uY29tbWl0ID0gJyVzJyIsIG5hbWUsIHNoYSkpCiAgICAgIHJlZHJhdwogICAgZW5kaWYKICBlbmRmb3IKCiAgaWYgYTowID4gMAogICAgbGV0IGZuID0gczpwbHVnX2V4cGFuZChhOjEpCiAgICBpZiBmaWxlcmVhZGFibGUoZm4pICYmICEoYTpmb3JjZSB8fCBzOmFzayhhOjEuJyBhbHJlYWR5IGV4aXN0cy4gT3ZlcndyaXRlPycpKQogICAgICByZXR1cm4KICAgIGVuZGlmCiAgICBjYWxsIHdyaXRlZmlsZShnZXRsaW5lKDEsICckJyksIGZuKQogICAgZWNobyAnU2F2ZWQgYXMgJy5hOjEKICAgIHNpbGVudCBleGVjdXRlICdlJyBzOmVzYyhmbikKICAgIHNldGYgdmltCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNwbGl0X3J0cCgpCiAgcmV0dXJuIHNwbGl0KCZydHAsICdcXFxAPCEsJykKZW5kZnVuY3Rpb24KCmxldCBzOmZpcnN0X3J0cCA9IHM6ZXNjcnRwKGdldChzOnNwbGl0X3J0cCgpLCAwLCAnJykpCmxldCBzOmxhc3RfcnRwICA9IHM6ZXNjcnRwKGdldChzOnNwbGl0X3J0cCgpLCAtMSwgJycpKQoKaWYgZXhpc3RzKCdnOnBsdWdzJykKICBsZXQgZzpwbHVnc19vcmRlciA9IGdldChnOiwgJ3BsdWdzX29yZGVyJywga2V5cyhnOnBsdWdzKSkKICBjYWxsIHM6dXBncmFkZV9zcGVjcygpCiAgY2FsbCBzOmRlZmluZV9jb21tYW5kcygpCmVuZGlmCgpsZXQgJmNwbyA9IHM6Y3BvX3NhdmUKdW5sZXQgczpjcG9fc2F2ZQo=",
        "usr/intshell/dev/vim/sh.vim": "aGlnaGxpZ2h0IGlzaEtleSAgICBjdGVybWZnPXllbGxvdwpoaWdobGlnaHQgaXNoRnVuYyAgICBjdGVybWZnPWN5YW4KCnN5bnRheCBtYXRjaCBpc2hLZXkgIm1ha2UiCnN5bnRheCBtYXRjaCBpc2hLZXkgInJlcXVpcmUiCnN5bnRheCBtYXRjaCBpc2hGdW5jICJpc2hfbWlzc19wcmVwYXJlIgpzeW50YXggbWF0Y2ggaXNoRnVuYyAiaXNoX21pc3NfbWFrZSIKCnN5bnRheCBtYXRjaCBpc2hLZXkgImxvY2FsIgpzeW50YXggbWF0Y2ggaXNoS2V5ICJ3aGl0ZSIKCnNldCBmb2xkbWV0aG9kPW1hcmtlcgpzZXQgZm9sZG1hcmtlcj17LH0KCg==",
        "usr/intshell/dev/vim/shy.vim": "CnNldCBmb2xkbWV0aG9kPWluZGVudApzeW50YXggbWF0Y2ggQ29tbWVudAkgICAgIiMuKiQiCnN5bnRheCBtYXRjaCBDb21tZW50CSAgICAiXCJbXlwiXSpcIiIKCmhpZ2hsaWdodCBzaHlTdHJpbmcgICAgIGN0ZXJtZmc9bWFnZW50YQpzeW50YXggcmVnaW9uIHNoeVN0cmluZwlzdGFydD0iYCIgZW5kPSJgIgpzeW50YXggbWF0Y2ggc2h5U3RyaW5nCSAgICAiXGBbXlxgXSpcYCIKc3ludGF4IG1hdGNoIHNoeVN0cmluZwkgICAgImZhbHNlIgpzeW50YXggbWF0Y2ggc2h5U3RyaW5nCSAgICAidHJ1ZSIKCmhpZ2hsaWdodCBzaHlDb250ZXh0ICAgIGN0ZXJtZmc9cmVkCnN5bnRheCBtYXRjaCBzaHlDb250ZXh0ICJcflthLXpcLl1cKyIKCmhpZ2hsaWdodCBzaHlDb21tYW5kICAgIGN0ZXJtZmc9Z3JlZW4Kc3ludGF4IG1hdGNoIHNoeUNvbW1hbmQgIl4gICAgW2EtekEtWjAtOTouX11cKyIKc3ludGF4IG1hdGNoIHNoeUNvbW1hbmQgIl5cdFthLXpBLVowLTk6Ll9dXCsiCnN5bnRheCBtYXRjaCBzaHlDb21tYW5kICJeW2EtekEtWjAtOTouX11cKyIKCmhpZ2hsaWdodCBzaHlDb25maWcgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIHNoeUNvbmZpZyAiXiAgICBjb25maWciCnN5bnRheCBtYXRjaCBzaHlDb25maWcgIl5zb3VyY2UiCnN5bnRheCBtYXRjaCBzaHlDb25maWcgIl5yZXR1cm4iCgoKaGlnaGxpZ2h0IHNoeVRpdGxlICAgIGN0ZXJtYmc9ZGFya3JlZCBjdGVybWZnPXdoaXRlCmhpZ2hsaWdodCBzaHlTZWN0aW9uICAgIGN0ZXJtYmc9ZGFya2dyZWVuIGN0ZXJtZmc9d2hpdGUKc3ludGF4IG1hdGNoIHNoeVRpdGxlICJedGl0bGUiCnN5bnRheCBtYXRjaCBzaHlUaXRsZSAiXmNoYXB0ZXIiCnN5bnRheCBtYXRjaCBzaHlTZWN0aW9uICJec2VjdGlvbiIKCg==",
        "usr/intshell/dev/vim/vim.sh": "IyEvYmluL2Jhc2gKCmlzaF9kZXZfdmltX3ByZXBhcmUoKSB7CiAgICBsb2NhbCBmcm9tPSRQV0QvdXNyL2ludHNoZWxsL2Rldi92aW0KCiAgICBta2RpciAtcCB+Ly52aW0vYXV0b2xvYWQKICAgIGlzaF9zeXNfbGlua19jcmVhdGUgfi8udmltL2F1dG9sb2FkL3BsdWcudmltICRmcm9tL3BsdWcudmltCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnZpbS9hdXRvbG9hZC9hdXRvLnZpbSAkZnJvbS9hdXRvLnZpbQoKICAgIG1rZGlyIC1wIH4vLnZpbS9zeW50YXgKICAgIGlzaF9zeXNfbGlua19jcmVhdGUgfi8udmltL3N5bnRheC9zaC52aW0gJGZyb20vc2gudmltCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnZpbS9zeW50YXgvc2h5LnZpbSAkZnJvbS9zaHkudmltCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnZpbS9zeW50YXgvZ28udmltICRmcm9tL2dvLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L2ltbC52aW0gJGZyb20vaW1sLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L3ptbC52aW0gJGZyb20vem1sLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L2Nzcy52aW0gJGZyb20vY3NzLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L2phdmFzY3JpcHQudmltICRmcm9tL2phdmFzY3JpcHQudmltCgogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW1yYyAkZnJvbS92aW1yYwogICAgdmltIC1jIFBsdWdJbnN0YWxsIC1jIGV4aXQgLWMgZXhpdAogICAgdmltIC1jIEdvSW5zdGFsbEJpbmFyaWVzIC1jIGV4aXQgLWMgZXhpdAp9CmlzaF9kZXZfdmltX2NsZWFyKCkgewogICAgZm9yIHBhdGggaW4gdm9sY2Fub3MgbGVhcm5pbmcgaWNlYmVyZ3MgdG9vbGtpdHMgaW50c2hlbGw7IGRvCiAgICAgICAgZm9yIGZpbGUgaW4gYGZpbmQgdXNyLyRwYXRoLyAtbmFtZSAiKnN3cCJgOyBkbwogICAgICAgICAgICBpc2hfbG9nX2RlYnVnICJybSAkZmlsZSI7IHJtICRmaWxlCiAgICAgICAgZG9uZQogICAgZG9uZQoKICAgIGZvciBmaWxlIGluIGBmaW5kIC4vIC1uYW1lICIqc3dwImA7IGRvCiAgICAgICAgaXNoX2xvZ19kZWJ1ZyAicm0gJGZpbGUiOyBybSAiJGZpbGUiCiAgICBkb25lCn0KCg==",
        "usr/intshell/dev/vim/vimrc": "IiDova/ku7blronoo4Uge3t7CiIkIGN1cmwgLWZMbyB+Ly52aW0vYXV0b2xvYWQvcGx1Zy52aW0gLS1jcmVhdGUtZGlycyBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vanVuZWd1bm4vdmltLXBsdWcvbWFzdGVyL3BsdWcudmltCiIKIjEuIOWuieijhXZpbeWQhOenjeaPkuS7tgoiOlBsdWdJbnN0YWxsCiIKIjIuIOWuieijhWdv5ZCE56eN5o+S5Lu2CiI6R29JbnN0YWxsQmluYXJpZXMKIn19fQoiIOaPkuS7tuWIl+ihqCJ7e3sKaWYgZmlsZXJlYWRhYmxlKGV4cGFuZCgifi8udmltL2F1dG9sb2FkL3BsdWcudmltIikpCgljYWxsIHBsdWcjYmVnaW4oKQoJUGx1ZyAnZ2NtdC90YWJvby52aW0nCglzZXQgc2Vzc2lvbm9wdGlvbnMrPXRhYnBhZ2VzLGdsb2JhbHMKCglQbHVnICdraWVuL2N0cmxwLnZpbScKCWxldCBnOmN0cmxwX2NtZD0nQ3RybFBCdWZmZXInCgoJUGx1ZyAndmltLWFpcmxpbmUvdmltLWFpcmxpbmUnCglQbHVnICdhaXJibGFkZS92aW0tZ2l0Z3V0dGVyJwoJUGx1ZyAndHBvcGUvdmltLWZ1Z2l0aXZlJwoKCVBsdWcgJ21hanV0c3VzaGkvdGFnYmFyJwoJUGx1ZyAnc2Nyb29sb29zZS9uZXJkdHJlZScKCWxldCBnOk5FUkRUcmVlV2luUG9zPSJsZWZ0IgoJbGV0IGc6TkVSRFRyZWVXaW5TaXplPTIwCgoJIiBQbHVnICdwb3N2YS92aW0tdnVlJwoJUGx1ZyAnZmF0aWgvdmltLWdvJwoJUGx1ZyAnY2hyNC9uZ2lueC52aW0nCglQbHVnICdvdGhyZWUvaHRtbDUudmltJwoJUGx1ZyAndmltLXNjcmlwdHMvcHl0aG9uLnZpbScKCVBsdWcgJ3BsYXN0aWNib3kvdmltLW1hcmtkb3duJwoKCVBsdWcgJ21iYmlsbC9lY2hvZnVuYycKCVBsdWcgJ3ZpbS1zY3JpcHRzL3RDb21tZW50JwoJUGx1ZyAndmltLXN5bnRhc3RpYy9zeW50YXN0aWMnCglQbHVnICd2aW0tc2NyaXB0cy9tYXRyaXgudmltLS1ZYW5nJwoJY2FsbCBwbHVnI2VuZCgpCmVuZGlmCiJ9fX0KIiDln7rmnKzphY3nva4ie3t7CnNldCBjYz0xMjAKc2V0IG5vd3JhcApzZXQgbnVtYmVyCnNldCByZWxhdGl2ZW51bWJlcgpzZXQgY3Vyc29ybGluZQpzZXQgY3Vyc29yY29sdW1uCnNldCBzY3JvbGxvZmY9MwpzZXQgbW91c2U9YQoKIiDnvJPlrZgKc2V0IGhpZGRlbgpzZXQgYXV0b3dyaXRlCnNldCBlbmNvZGluZz11dGYtOAoKIiDmkJzntKIKc2V0IGhsc2VhcmNoCnNldCBpbmNzZWFyY2gKc2V0IG5vd3JhcHNjYW4Kc2V0IHNtYXJ0Y2FzZQpzZXQgaWdub3JlY2FzZQpzZXQgc2hvd21hdGNoCnNldCBtYXRjaHRpbWU9MgoKIiDnvKnov5sKc2V0IGNpbmRlbnQKIiBzZXQgZXhwYW5kdGFiCnNldCB0YWJzdG9wPTQKc2V0IHNoaWZ0d2lkdGg9NApzZXQgYmFja3NwYWNlPWluZGVudCxlb2wsc3RhcnQKCiIg5oqY5Y+gCnNldCBmb2xkZW5hYmxlCnNldCBmb2xkbWV0aG9kPW1hcmtlcgoKIiDmjInplK4Kbm5vcmVtYXAgPFNwYWNlPiA6Cm5ub3JlbWFwIDxDLUg+IDxDLVc+aApubm9yZW1hcCA8Qy1KPiA8Qy1XPmoKbm5vcmVtYXAgPEMtSz4gPEMtVz5rCm5ub3JlbWFwIDxDLUw+IDxDLVc+bAoKbm5vcmVtYXAgPEYyPiA6TkVSRFRyZWVUb2dnbGU8Q1I+Cm5ub3JlbWFwIDxGMz4gOlRhZ2JhclRvZ2dsZTxDUj4KIn19fQoiIOe8lueoi+mFjee9rnt7ewpzZXQga2V5d29yZHByZz1tYW5cIC1hCgpmdW5jdGlvbiEgQ29uZmlnKHR5cGUpCglpZiBhOnR5cGUgPT0gImNvbmYiCgkJc2V0IGZpbGV0eXBlPW5naW54CgllbHNlaWYgYTp0eXBlID09ICJ4bWwiCgkJc2V0IGZpbGV0eXBlPXhtbAoJZWxzZWlmIGE6dHlwZSA9PSAidnVlIgoJCXNldCBzaGlmdHdpZHRoPTIKCQlzZXQgdGFic3RvcD0yCgllbmRpZgplbmRmdW5jdGlvbgoKZnVuYyEgQ29uZmlncygpCglsZXQgZXh0ID0gZXhwYW5kKCIlOmUiKQoJaWYgZXh0ID09ICJnbyIKCQlzZXQgZm9sZG5lc3RtYXg9MwoJCXNldCBmb2xkbWV0aG9kPXN5bnRheAoJCWxldCBnOnRhZ2Jhcl9jdGFnc19iaW4gPSAiZ290YWdzIgoJCW5ub3JlbWFwIDxDLVs+IDpHb0ltcGxlbWVudHM8Q1I+CgoJCWxldCBnOmdvX3VwZGF0ZXRpbWUgPSAzMDAKCQkiIGxldCBnOmdvX2F1dG9fc2FtZWlkcyA9IDAKCQlsZXQgZzpnb19hdXRvX3R5cGVfaW5mbyA9IDEKCQlsZXQgZzpnb192ZXJzaW9uX3dhcm5pbmcgPSAwCgkJCgkJbGV0IGc6Z29fZm10X2F1dG9zYXZlID0gMQoJCWxldCBnOmdvX2ltcG9ydHNfYXV0b3NhdmUgPSAxCgkJIiBsZXQgZzpnb19tZXRhbGludGVyX2F1dG9zYXZlID0gMQoJCQoJCWxldCBnOmdvX2hpZ2hsaWdodF90eXBlcyA9IDEKCQlsZXQgZzpnb19oaWdobGlnaHRfZnVuY3Rpb25zID0gMQoJCWxldCBnOmdvX2hpZ2hsaWdodF9vcGVyYXRvcnMgPSAxCgkJbGV0IGc6Z29faGlnaGxpZ2h0X3NwYWNlX3RhYl9lcnJvciA9IDEKCQlsZXQgZzpnb19oaWdobGlnaHRfdHJhaWxpbmdfd2hpdGVzcGFjZV9lcnJvciA9IDEKCQkKCQkiIGF1dG9jbWQgQnVmV3JpdGVQcmUgKi5nbyBHb0ZtdAoJCSIgYXV0b2NtZCBCdWZXcml0ZVByZSAqLmdvIEdvVmV0CgkJIiBhdXRvY21kIEJ1ZldyaXRlUHJlICouZ28gR29MaW50CgkJIiBhdXRvY21kIEJ1ZldyaXRlUHJlICouZ28gR29JbXBvcnRzCgoJZWxzZWlmIGV4dCA9PSAic2h5IgoJCXNldCBmaWxldHlwZT1zaHkKCQlzZXQgdGFic3RvcD0yCgkJc2V0IHNoaWZ0d2lkdGg9MgoJCXNldCBjb21tZW50c3RyaW5nPSMlcwoKCWVsc2VpZiBleHQgPT0gImpzb24iCgkJc2V0IGZvbGRtZXRob2Q9c3ludGF4CgoJZWxzZWlmIGV4dCA9PSAianMiCgkJc2V0IGZpbGV0eXBlPWphdmFzY3JpcHQKCQlzZXQgZm9sZG1ldGhvZD1tYXJrZXIKCQlzZXQgZm9sZG1hcmtlcj17LH0KCQlsZXQgamF2YVNjcmlwdF9mb2xkPTEKCQlzb3VyY2Ugfi8udmltL3N5bnRheC9qYXZhc2NyaXB0LnZpbQoKCWVsc2VpZiBleHQgPT0gImNzcyIKCQlzZXQgZmlsZXR5cGU9Y3NzCgkJc2V0IGZvbGRtZXRob2Q9bWFya2VyCgkJc2V0IGZvbGRtYXJrZXI9eyx9CgkJc2V0IHNoaWZ0d2lkdGg9MgoJCXNldCB0YWJzdG9wPTIKCgllbHNlaWYgZXh0ID09ICJ6bWwiCgkJc2V0IGZpbGV0eXBlPXptbAoJCXNldCB0YWJzdG9wPTIKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IGNvbW1lbnRzdHJpbmc9IyVzCgkJIiBzZXQgc21hcnRpbmRlbnQKCQkiIHNldCBpbmRlbnRleHByPUdldEJsb2NrSW5kZW50KCkKCgllbHNlaWYgZXh0ID09ICJpbWwiCgkJc2V0IGZpbGV0eXBlPWltbAoJCXNldCB0YWJzdG9wPTIKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IGNvbW1lbnRzdHJpbmc9IyVzCgoJZWxzZWlmIGV4dCA9PSAieWFtbCIKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IHRhYnN0b3A9MgoKCWVsc2VpZiBleHQgPT0gInByb3RvIgoJCXNldCBmb2xkbWFya2VyPXssfQoJCXNldCBzaGlmdHdpZHRoPTIKCQlzZXQgdGFic3RvcD0yCgkJc2V0IGV4cGFuZHRhYgoKCWVsc2VpZiBleHQgPT0gInNxbCIKCQlzZXQgZm9sZG1hcmtlcj0oLCkKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IHRhYnN0b3A9MgoJCXNldCBleHBhbmR0YWIKCgllbHNlaWYgZXh0ID09ICJncm9vdnkiCgkJc2V0IGV4cGFuZHRhYgoJCXNldCB0YWJzdG9wPTQKCQlzZXQgc2hpZnR3aWR0aD00CgogICAgZWxzZWlmIGV4dCA9PSAiamF2YSIKCQlzZXQgZXhwYW5kdGFiCgkJc2V0IHRhYnN0b3A9NAoJCXNldCBzaGlmdHdpZHRoPTQKCQlzZXQgb21uaWZ1bmM9amF2YWNvbXBsZXRlI0NvbXBsZXRlCgoJZW5kaWYKZW5kZnVuYwoKZnVuYyEgR2V0QmxvY2tJbmRlbnQgKCkKCXJldHVybiA0CmVuZGZ1bmMKCmF1dG9jbWQgQnVmTmV3RmlsZSxCdWZSZWFkUG9zdCAqIGNhbGwgQ29uZmlncygpCmF1dG9jbWQgQnVmTmV3RmlsZSxCdWZSZWFkUG9zdCAqLmNvbmYgY2FsbCBDb25maWcoImNvbmYiKQphdXRvY21kIEJ1Zk5ld0ZpbGUsQnVmUmVhZFBvc3QgKi53eG1sIGNhbGwgQ29uZmlnKCJ4bWwiKQphdXRvY21kIEJ1Zk5ld0ZpbGUsQnVmUmVhZFBvc3QgKi52dWUgY2FsbCBDb25maWcoInZ1ZSIpCiJ9fX0KCiLmnKzlnLDphY3nva4ie3t7CmlmIGZpbGVyZWFkYWJsZShleHBhbmQoIn4vLnZpbS9hdXRvbG9hZC9hdXRvLnZpbSIpKSB8IHNvdXJjZSB+Ly52aW0vYXV0b2xvYWQvYXV0by52aW0gfCBlbmRpZgppZiBmaWxlcmVhZGFibGUoZXhwYW5kKCJ+Ly52aW1fbG9jYWwudmltIikpIHwgc291cmNlIH4vLnZpbV9sb2NhbC52aW0gfCBlbmRpZgphdXRvY21kIEJ1ZlJlYWRQb3N0ICogbm9ybWFsIGAiCiJ9fX0KIuS4u+mimOiJsuezuyJ7e3sKc3ludGF4IG9uCnNldCB0X0NvPTI1Ngpjb2xvcnNjaGVtZSB0b3J0ZQoiIGNvbG9yc2NoZW1lIGVsZmxvcmQKCmhpZ2hsaWdodCBDb21tZW50IGN0ZXJtZmc9Y3lhbiBjdGVybWJnPWRhcmtibHVlCmhpZ2hsaWdodCBQbWVudVNlbCBjdGVybWZnPWRhcmtibHVlIGN0ZXJtYmc9Y3lhbgpoaWdobGlnaHQgUG1lbnUgY3Rlcm1mZz1jeWFuIGN0ZXJtYmc9ZGFya2JsdWUKIn19fQo=",
        "usr/intshell/dev/vim/zml.vim": "aGlnaGxpZ2h0IHptbENvbW1hbmQgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIHptbENvbW1hbmQgImhlYWQiCnN5bnRheCBtYXRjaCB6bWxDb21tYW5kICJsZWZ0IgpzeW50YXggbWF0Y2ggem1sQ29tbWFuZCAibWFpbiIKc3ludGF4IG1hdGNoIHptbENvbW1hbmQgImZvb3QiCnN5bnRheCBtYXRjaCB6bWxDb21tYW5kICJtZW51IgpzeW50YXggbWF0Y2ggem1sQ29tbWFuZCAicmV0dXJuIgoKaGlnaGxpZ2h0IHptbEZ1bmN0aW9uICAgIGN0ZXJtZmc9Y3lhbgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gImluZGV4IgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gImFjdGlvbiIKc3ludGF4IG1hdGNoIHptbEZ1bmN0aW9uICJhcmdzIgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gInN0eWxlIgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gInN0eWxlLndpZHRoIgoKaGlnaGxpZ2h0IHptbENvbnN0YW50ICAgIGN0ZXJtZmc9bWFnZW50YQpzeW50YXggbWF0Y2ggem1sQ29uc3RhbnQgImF1dG8iCnN5bnRheCBtYXRjaCB6bWxDb25zdGFudCAidXNlcm5hbWUiCg==",
        "usr/intshell/index.sh": "IyEvYmluL3NoCgpleHBvcnQgY3R4X2Rldj0ke2N0eF9kZXY6PSJodHRwOi8vc2h5bGludXguY29tIn0KCl9kb3duX2JpZ19maWxlKCkgeyAjIOS4i+i9veaWh+S7tiBkaXIgdXJsCglbIC1mICIkMSIgXSAmJiByZXR1cm4gfHwgZWNobyAiZG93bmxvYWQgJGN0eF9kZXYvJDIiCgllY2hvICQxfCBncmVwICIvIiAmPi9kZXYvbnVsbCAmJiBta2RpciAtcCAkezElKi8qfTsgaWYgY3VybCAtaCAmPi9kZXYvbnVsbDsgdGhlbgoJCWN1cmwgLW8gJDEgLWZMICIkY3R4X2Rldi8kMj9wb2Q9JGN0eF9wb2QiCgllbHNlCgkJd2dldCAtTyAkMSAiJGN0eF9kZXYvJDI/cG9kPSRjdHhfcG9kIgoJZmkKfQpfZG93bl9maWxlcygpIHsgIyDkuIvovb3mlofku7YgZmlsZS4uLgoJZm9yIGZpbGUgaW4gIiRAIjsgZG8gX2Rvd25fZmlsZSAkZmlsZSBwdWJsaXNoLyR7ZmlsZSMjKi99OyBkb25lCn0KX2Rvd25fZmlsZSgpIHsgIyDkuIvovb3mlofku7YgZGlyIHVybAoJZWNobyAkMXwgZ3JlcCAiLyIgJj4vZGV2L251bGwgJiYgbWtkaXIgLXAgJHsxJSovKn07IGlmIGN1cmwgLWggJj4vZGV2L251bGw7IHRoZW4KCQljdXJsIC1vICQxIC1mc1NMICRjdHhfZGV2LyQyCgllbHNlCgkJd2dldCAtTyAkMSAtcSAkY3R4X2Rldi8kMgoJZmkKfQpfdGVtcF9maWxlKCkgeyAjIOWKoOi9veaWh+S7tiB1cmwgYXJnLi4uCgljdHhfdGVtcD0kKG1rdGVtcCkgJiYgX2Rvd25fZmlsZSAkY3R4X3RlbXAgJDEgJiYgc2hpZnQgJiYgc291cmNlICRjdHhfdGVtcCAiJEAiCn0KX2Rvd25fdGFycygpIHsgIyDkuIvovb3mlofku7YgZmlsZS4uLgoJZm9yIGZpbGUgaW4gIiRAIjsgZG8gX2Rvd25fdGFyICRmaWxlIHB1Ymxpc2gvJGZpbGU7IGRvbmUKfQpfZG93bl90YXIoKSB7ICMg5LiL6L295paH5Lu2IGZpbGUgcGF0aAoJWyAtZiAkMSBdICYmIHJldHVybjsgX2Rvd25fYmlnX2ZpbGUgIiRAIiAmJiB0YXIgLXhmICQxCn0KCnByZXBhcmVfc2NyaXB0KCkgewoJZm9yIHNjcmlwdCBpbiAiJEAiOyBkbyBfdGVtcF9maWxlIGludHNoZWxsLyRzY3JpcHQ7IGRvbmUgCn0KcHJlcGFyZV9wYWNrYWdlKCkgewoJX2Rvd25fdGFycyBjb250ZXh0cy5iaW4udGFyLmd6IGNvbnRleHRzLnNyYy50YXIuZ3oKCWxvY2FsIGJhY2s9JFBXRDsgY2Qgfi87IF9kb3duX3RhcnMgY29udGV4dHMuaG9tZS50YXIuZ3o7IGNkICRiYWNrCglleHBvcnQgVklNPSRQV0QvdXNyL2luc3RhbGwvdmltLXZpbS0xMmJlNzM0L19pbnN0YWxsL3NoYXJlL3ZpbS92aW04Mi8KCWV4cG9ydCBMRF9MSUJSQVJZX1BBVEg9JFBXRC91c3IvbG9jYWwvbGliCgoJaXNoX3N5c19wYXRoX2xvYWQKCWdpdCBjb25maWcgLS1nbG9iYWwgaW5pdC50ZW1wbGF0ZWRpciAkUFdEL3Vzci9pbnN0YWxsL2dpdC0yLjMxLjEvX2luc3RhbGwvc2hhcmUvZ2l0LWNvcmUvdGVtcGxhdGVzLwoJZ2l0IGNvbmZpZyAtLWdsb2JhbCB1cmwuIiRjdHhfZGV2Ii5pbnN0ZWFkT2YgaHR0cHM6Ly9zaHlsaW51eC5jb20KCWdpdCBjb25maWcgLS1nbG9iYWwgaW5pdC5kZWZhdWx0QnJhbmNoIG1hc3Rlcgp9CnByZXBhcmVfc3lzdGVtKCkgewoJY2FzZSAiJCh1bmFtZSkiIGluCgkJRGFyd2luKSB4Y29kZS1zZWxlY3QgLS1pbnN0YWxsIDI+L2Rldi9udWxsIDs7CgkJTGludXgpIAoJCQlpZiBbIGB3aG9hbWlgID09IHJvb3QgXTsgdGhlbgoJCQkJeXVtIGluc3RhbGwgLXkgbWFrZSBnaXQgdmltIHRtdXgKCQkJZWxzZQoJCQkJc3VkbyB5dW0gaW5zdGFsbCAteSBtYWtlIGdpdCB2aW0gdG11eAoJCQlmaQoJCQk7OwoJZXNhYwp9CnByZXBhcmVfdG11eCgpIHsKCV9kb3duX2ZpbGUgZXRjL3RtdXguY29uZiBpbnRzaGVsbC9kZXYvdG11eC90bXV4LmNvbmYKCV9kb3duX2ZpbGUgYmluL3RtdXguc2ggaW50c2hlbGwvZGV2L3RtdXgvbG9jYWwuc2gKfQpwcmVwYXJlX2ljZSgpIHsKCWxvY2FsIGJpbj0iaWNlIgoJY2FzZSBgdW5hbWUgLXNgIGluCgkJRGFyd2luKSBiaW49JHtiaW59LmRhcndpbiA7OwoJCUxpbnV4KSBiaW49JHtiaW59LmxpbnV4IDs7CgkJKikgYmluPSR7YmlufS53aW5kb3dzIDs7Cgllc2FjCgljYXNlIGB1bmFtZSAtbWAgaW4KCQltaXBzKSBiaW49JHtiaW59Lm1pcHNsZSA7OwoJCXg4Nl82NCkgYmluPSR7YmlufS5hbWQ2NCA7OwoJCWFybTY0KSBiaW49JHtiaW59LmFtZDY0IDs7CgkJYXJtKnxhYXJjaDY0KSBiaW49JHtiaW59LmFybSA7OwoJCSopIGJpbj0ke2Jpbn0uMzg2IDs7Cgllc2FjCglfZG93bl9iaWdfZmlsZSBiaW4vaWNlLmJpbiBwdWJsaXNoLyRiaW4gJiYgY2htb2QgdSt4IGJpbi9pY2UuYmluOyBbIC1mIGJpbi9pY2UuYmluIF0KfQoKbWFpbigpIHsKCWNhc2UgIiQxIiBpbgoJCWludHNoZWxsKSAjIOWIm+W7uumhueebrgoJCQlbIC1mICRQV0QvLmlzaC9wbHVnLnNoIF0gJiYgc291cmNlICRQV0QvLmlzaC9wbHVnLnNoICYmIHJldHVybgoJCQlbIC1mICRIT01FLy5pc2gvcGx1Zy5zaCBdICYmIHNvdXJjZSAkSE9NRS8uaXNoL3BsdWcuc2ggJiYgcmV0dXJuCgkJCWdpdCB2ZXJzaW9uICY+L2Rldi9udWxsICYmIGdpdCBjbG9uZSBodHRwczovL3NoeWxpbnV4LmNvbS94L2ludHNoZWxsICRQV0QvLmlzaCAmJiByZXR1cm4KCQkJcHJlcGFyZV9zY3JpcHQgcGx1Zy5zaCBjb25mLnNoIG1pc3Muc2gKCQkJOzsKCQlwcm9qZWN0KSAjIOWIm+W7uumhueebrgoJCQlwcmVwYXJlX3NjcmlwdCBwbHVnLnNoIGNvbmYuc2ggbWlzcy5zaDsgcHJlcGFyZV9zeXN0ZW0KCQkJaXNoX21pc3NfcHJlcGFyZV9jb21waWxlCgkJCWlzaF9taXNzX3ByZXBhcmVfZGV2ZWxvcAoJCQlpc2hfbWlzc19wcmVwYXJlX2luc3RhbGwKCgkJCWlzaF9taXNzX3ByZXBhcmVfY29udGV4dHMKCgkJCWV4cG9ydCBQQVRIPSR7UFdEfS9iaW46JFBBVEggY3R4X2xvZz0ke2N0eF9sb2c6PS9kZXYvc3Rkb3V0fQoJCQlnbyBnZXQgc2h5bGludXguY29tL3gvaWNlCgkJCXNoaWZ0ICYmIG1ha2UgJiYgaXNoX21pc3Nfc2VydmUgIiRAIgoJCQk7OwoJCXNvdXJjZSkgIyDmupDnoIHlronoo4UKCQkJcHJlcGFyZV9zeXN0ZW0KCQkJZ2l0IGNsb25lIGh0dHBzOi8vc2h5bGludXguY29tL3gvY29udGV4dHMKCQkJc2hpZnQgJiYgY2QgY29udGV4dHMgJiYgc291cmNlIGV0Yy9taXNzLnNoICIkQCIKCQkJOzsKCQliaW5hcnkpICMg5bqU55So5a6J6KOFCgkJCWV4cG9ydCBjdHhfbG9nPSR7Y3R4X2xvZzo9L2Rldi9zdGRvdXR9IGN0eF9kZXY9Imh0dHBzOi8vc2h5bGludXguY29tIgoJCQlzaGlmdCAmJiBwcmVwYXJlX2ljZSAmJiBiaW4vaWNlLmJpbiBmb3JldmVyIHN0YXJ0IGRldiAiIiAiJEAiCgkJCTs7CgkJYXBwKSAjIOeUn+S6p+eOr+WigwoJCQlleHBvcnQgY3R4X2xvZz0ke2N0eF9sb2c6PS9kZXYvc3Rkb3V0fQoJCQlzaGlmdCAmJiBwcmVwYXJlX2ljZSAmJiBiaW4vaWNlLmJpbiBmb3JldmVyIHN0YXJ0IGRldiBkZXYgIiRAIgoJCQk7OwoJCWRldikgIyDlvIDlj5Hnjq/looMKCQkJcHJlcGFyZV9zY3JpcHQgcGx1Zy5zaCBjb25mLnNoIG1pc3Muc2gKCQkJc2hpZnQgJiYgcHJlcGFyZV9wYWNrYWdlICYmIHNvdXJjZSBldGMvbWlzcy5zaCAiJEAiCgkJCTs7CgkJKikgIyDnu4jnq6/njq/looMKCQkJcHJlcGFyZV9zY3JpcHQgcGx1Zy5zaCBjb25mLnNoIG1pc3Muc2gKCQkJaXNoX3N5c19kZXZfbG9naW4gJiYgWyAtbiAiJCoiIF0gJiYgaXNoX3N5c19kZXZfcnVuICIkQCIKCQkJOzsKCWVzYWMKfQoKbWFpbiAiJEAiCg==",
        "usr/intshell/miss.sh": "IyEvYmluL3NoCgpleHBvcnQgY3R4X3BpZD0ke2N0eF9waWQ6PXZhci9ydW4vaWNlLnBpZH0KZXhwb3J0IGN0eF9sb2c9JHtjdHhfbG9nOj1iaW4vYm9vdC5sb2d9Cgppc2hfbWlzc19pY2VfYmluPSJpY2UuYmluIgppc2hfbWlzc19pbml0X3NoeT0iZXRjL2luaXQuc2h5Igppc2hfbWlzc19tYWluX3NoeT0ic3JjL21haW4uc2h5Igppc2hfbWlzc19tYWluX2dvPSJzcmMvbWFpbi5nbyIKCmlzaF9taXNzX2Rvd25sb2FkX3BrZygpIHsKCWZvciB1cmwgaW4gIiRAIjsgZG8gbG9jYWwgcGtnPSR7dXJsIyMqL30KCQlbIGBpc2hfc3lzX2ZpbGVfc2l6ZSAkcGtnYCAtZ3QgMCBdICYmIGJyZWFrCgkJaXNoX2xvZ19yZXF1aXJlICR1cmw7IGlmIGN1cmwgLWggJj4vZGV2L251bGw7IHRoZW4KCQkJY3VybCAtbyAkcGtnIC1mU0wgJHVybCAmJiB0YXIgeGYgJHBrZyAKCQllbHNlCgkJCXdnZXQgLU8gJHBrZyAkdXJsICYmIHRhciB4ZiAkcGtnIAoJCWZpCglkb25lCn0KaXNoX21pc3NfcHJlcGFyZV9jb21waWxlKCkgewoJaXNoX3N5c19wYXRoX2luc2VydCAiJFBXRC91c3IvbG9jYWwvZ28vYmluIiAiJFBXRC91c3IvbG9jYWwvYmluIiAiJFBXRC9iaW4iICIkUFdEL3Vzci9wdWJsaXNoIgoJZXhwb3J0IEdPUFJWSUFURT0ke0dPUFJWSUFURTo9c2h5bGludXguY29tLGdpdGh1Yi5jb219CglleHBvcnQgR09CSU49JHtHT0JJTjo9JFBXRC91c3IvbG9jYWwvYmlufQoJZXhwb3J0IElTSF9DT05GX1BBVEg9JFBXRC8uaXNoL3BsdWdlZAoJZXhwb3J0IEdPMTExTU9EVUxFPW9uCgoJZ28gdmVyc2lvbiAmPi9kZXYvbnVsbCAmJiByZXR1cm4KCglsb2NhbCBnb2FyY2g9YW1kNjQ7IGNhc2UgIiQodW5hbWUgLW0pIiBpbgoJCXg4Nl82NCkgZ29hcmNoPWFtZDY0OzsKCQlhcm02NCkgZ29hcmNoPWFybTY0OzsKCQlpNjg2KSBnb2FyY2g9Mzg2OzsKCQkqKSBnb29zPWFybTs7Cgllc2FjCglsb2NhbCBnb29zPWxpbnV4OyBjYXNlICIkKHVuYW1lIC1zKSIgaW4KCQlEYXJ3aW4pIGdvb3M9ZGFyd2luOzsKCQlMaW51eCkgZ29vcz1saW51eDs7CgkJKikgZ29vcz13aW5kb3dzOzsKCWVzYWMKCglsb2NhbCBwa2c9Z28ke0dPVkVSU0lPTjo9MS4xNS41fS4ke2dvb3N9LSR7Z29hcmNofS50YXIuZ3o7IGlzaF9sb2dfZGVidWcgImRvd25sb2FkOiAkcGtnIgoJbG9jYWwgYmFjaz0kUFdEOyBta2RpciAtcCB1c3IvbG9jYWw7IGNkIHVzci9sb2NhbDsgaXNoX21pc3NfZG93bmxvYWRfcGtnIGh0dHBzOi8vZGwuZ29vZ2xlLmNvbS9nby8kcGtnOyBjZCAkYmFjawp9CmlzaF9taXNzX3ByZXBhcmVfZGV2ZWxvcCgpIHsKCWlzaF9kZXZfZ2l0X3ByZXBhcmUKCgkjIC5naXRpZ25vcmUKCWlzaF9zeXNfZmlsZV9jcmVhdGUgLmdpdGlnbm9yZSA8PEVORApldGMvCmJpbi8KdmFyLwp1c3IvCi4qCkVORAoKCSMgZ28ubW9kCglsb2NhbCByZW1vdGU9JChnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsfHNlZCAtZSAicy9eaHR0cHM6XC9cLy8vInxzZWQgLWUgInMvXmh0dHA6XC9cLy8vIikKCVsgLWYgZ28ubW9kIF0gfHwgZ28gbW9kIGluaXQgJHtyZW1vdGU6PSR7UFdEIyMqL319CgoJIyBzcmMvbWFpbi5nbwoJaXNoX3N5c19maWxlX2NyZWF0ZSAkaXNoX21pc3NfbWFpbl9nbyA8PEVORApwYWNrYWdlIG1haW4KCmltcG9ydCAic2h5bGludXguY29tL3gvaWNlIgoKZnVuYyBtYWluKCkgeyBwcmludChpY2UuUnVuKCkpIH0KRU5ECgoJIyBNYWtlZmlsZQoJaXNoX3N5c19maWxlX2NyZWF0ZSBNYWtlZmlsZSA8PCBFTkQKZXhwb3J0IENHT19FTkFCTEVEPTAKCmFsbDoKCUBlY2hvICYmIGRhdGUKCWdvIGJ1aWxkIC12IC1vIGJpbi8kaXNoX21pc3NfaWNlX2JpbiAkaXNoX21pc3NfbWFpbl9nbyAmJiAuL2Jpbi8kaXNoX21pc3NfaWNlX2JpbiBmb3JldmVyIHJlc3RhcnQKRU5ECn0KaXNoX21pc3NfcHJlcGFyZV9pbnN0YWxsKCkgewoJIyBldGMvaW5pdC5zaHkKCWlzaF9zeXNfZmlsZV9jcmVhdGUgJGlzaF9taXNzX2luaXRfc2h5IDw8RU5ECn5hYWEKCn53ZWIKCn5jbGkKCn5jdHgKCn5tZGIKCkVORAoKCSMgc3JjL21haW4uc2h5Cglpc2hfc3lzX2ZpbGVfY3JlYXRlICRpc2hfbWlzc19tYWluX3NoeSA8PEVORAp0aXRsZSAiJHtQV0QjIyovfSIKRU5ECn0KCmlzaF9taXNzX3ByZXBhcmUoKSB7Cglsb2NhbCBuYW1lPSR7MSMjKi99IHJlcG9zPSR7MSNodHRwczovL30KCVsgIiRuYW1lIiA9ICIkcmVwb3MiIF0gJiYgcmVwb3M9c2h5bGludXguY29tL3gvJG5hbWUKCglsb2NhbCBiYWNrPSRQV0QKCUlTSF9DT05GX1BBVEg9JFBXRC8uaXNoL3BsdWdlZCByZXF1aXJlICRyZXBvcwoJaXNoX3N5c19saW5rX2NyZWF0ZSB1c3IvJG5hbWUgJChyZXF1aXJlX3BhdGggJHJlcG9zKQoJcmVxdWlyZV9wdWxsIHVzci8kbmFtZQoJY2QgJGJhY2sKfQppc2hfbWlzc19wcmVwYXJlX2NvbnRleHRzKCkgewoJaXNoX2xvZ19yZXF1aXJlIC1nIHNoeWxpbnV4LmNvbS94L2NvbnRleHRzCglbIC1kIC5naXQgXSB8fCBnaXQgaW5pdAoJWyAiYGdpdCByZW1vdGVgIiA9ICIiIF0gfHwgcmVxdWlyZV9wdWxsIC4vCn0KaXNoX21pc3NfcHJlcGFyZV9pbnRzaGVsbCgpIHsKCWlzaF9sb2dfcmVxdWlyZSAtZyBzaHlsaW51eC5jb20veC9pbnRzaGVsbAoJWyAtZiAkUFdELy5pc2gvcGx1Zy5zaCBdIHx8IFsgLWYgJEhPTUUvLmlzaC9wbHVnLnNoIF0gfHwgZ2l0IGNsb25lIGh0dHBzOi8vc2h5bGludXguY29tL3gvaW50c2hlbGwgJFBXRC8uaXNoCglbIC1kICRQV0QvLmlzaCBdICYmIGlzaF9zeXNfbGlua19jcmVhdGUgdXNyL2ludHNoZWxsICRQV0QvLmlzaAoJWyAtZCAkSE9NRS8uaXNoIF0gJiYgaXNoX3N5c19saW5rX2NyZWF0ZSB1c3IvaW50c2hlbGwgJEhPTUUvLmlzaAoJcmVxdWlyZV9wdWxsIHVzci9pbnRzaGVsbAoKCWlzaF9zeXNfY2xpX3ByZXBhcmUKfQppc2hfbWlzc19wcmVwYXJlX2ljZWJlcmdzKCkgewoJaXNoX21pc3NfcHJlcGFyZSBpY2ViZXJncwp9CmlzaF9taXNzX3ByZXBhcmVfdG9vbGtpdHMoKSB7Cglpc2hfbWlzc19wcmVwYXJlIHRvb2xraXRzCn0KaXNoX21pc3NfcHJlcGFyZV92b2xjYW5vcygpIHsKCWlzaF9taXNzX3ByZXBhcmUgdm9sY2Fub3MKfQppc2hfbWlzc19wcmVwYXJlX2xlYXJuaW5nKCkgewoJaXNoX21pc3NfcHJlcGFyZSBsZWFybmluZwp9CmlzaF9taXNzX3ByZXBhcmVfc2Vzc2lvbigpIHsKCWxvY2FsIG5hbWU9JDEgJiYgWyAiJG5hbWUiID0gIiIgXSAmJiBuYW1lPSR7UFdEIyMqL30KCWxvY2FsIHdpbj0kMiAmJiBbICIkd2luIiA9ICIiIF0gJiYgd2luPSR7bmFtZSMjKi19Cglpc2hfbG9nX25vdGljZSAic2Vzc2lvbjogJG5hbWU6JHdpbiIKCglpZiAhIHRtdXggaGFzLXNlc3Npb24gLXQgJG5hbWUgJj4vZGV2L251bGw7IHRoZW4KCQlUTVVYPSIiIHRtdXggbmV3LXNlc3Npb24gLWQgLXMgJG5hbWUgLW4gJHdpbgoJCXRtdXggc3BsaXQtd2luZG93IC1kIC1wIDMwIC10ICRuYW1lCgkJdG11eCBzcGxpdC13aW5kb3cgLWQgLWggLXQgJHtuYW1lfTokd2luLjIKCgkJbG9jYWwgbGVmdD0yIHJpZ2h0PTMKCQl0bXV4IHNlbmQta2V5IC10ICR7bmFtZX06JHdpbi4kcmlnaHQgImlzaF9taXNzX2xvZyIgRW50ZXIKCQlpZiBbICIkbmFtZSIgPSAibWlzcyIgXTsgdGhlbgoJCQl0bXV4IHNlbmQta2V5IC10ICR7bmFtZX06JHdpbi4kbGVmdCAiaXNoX21pc3Nfc2VydmUiCgkJZWxzZQoJCQl0bXV4IHNlbmQta2V5IC10ICR7bmFtZX06JHdpbi4kbGVmdCAiaXNoX21pc3Nfc3BhY2UgZGV2IGRldiIKCQlmaQoJCXNsZWVwIDEgJiYgdG11eCBzZW5kLWtleSAtdCAke25hbWV9OiR3aW4uMSAidmltIC1PIHNyYy9tYWluLmdvIHNyYy9tYWluLnNoeSIgRW50ZXIKCgkJY2FzZSBgdW5hbWUgLXNgIGluCgkJCURhcndpbikgc2xlZXAgNSAmJiBvcGVuIGh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCA7OwoJCWVzYWMKCWZpCgoJWyAiJFRNVVgiID0gIiIgXSAmJiB0bXV4IGF0dGFjaCAtdCAkbmFtZSB8fCB0bXV4IHNlbGVjdC13aW5kb3cgLXQgJG5hbWU6JHdpbgp9Cgppc2hfbWlzc19zdGFydCgpIHsKCXdoaWxlIHRydWU7IGRvCgkJZGF0ZSAmJiAkaXNoX21pc3NfaWNlX2JpbiAiJEAiIDI+JGN0eF9sb2cgJiYgYnJlYWsgfHwgZWNobyAtZSAiXG5cbnJlc3RhcnRpbmcuLi4iCgkJc2xlZXAgMQoJZG9uZQp9CmlzaF9taXNzX3Jlc3RhcnQoKSB7CglbIC1lICIkY3R4X3BpZCIgXSAmJiBraWxsIC0yIGBjYXQgJGN0eF9waWRgICY+L2Rldi9udWxsIHx8IGVjaG8KfQppc2hfbWlzc19zdG9wKCkgewoJWyAtZSAiJGN0eF9waWQiIF0gJiYga2lsbCAtMyBgY2F0ICRjdHhfcGlkYCAmPi9kZXYvbnVsbCB8fCBlY2hvCn0KaXNoX21pc3Nfc2VydmVfbG9nKCkgewoJaXNoX21pc3Nfc3RvcCAmJiBjdHhfbG9nPS9kZXYvc3Rkb3V0IGlzaF9taXNzX3N0YXJ0IHNlcnZlIHN0YXJ0ICRACn0KaXNoX21pc3Nfc2VydmUoKSB7Cglpc2hfbWlzc19zdG9wICYmIGlzaF9taXNzX3N0YXJ0IHNlcnZlIHN0YXJ0ICRACn0KaXNoX21pc3Nfc3BhY2UoKSB7Cglpc2hfbWlzc19zdG9wICYmIGlzaF9taXNzX3N0YXJ0IHNwYWNlIGRpYWwgZGV2IG9wcyAkQAp9CmlzaF9taXNzX2xvZygpIHsKCXRvdWNoICRjdHhfbG9nICYmIHRhaWwgLWYgJGN0eF9sb2cKfQoKaXNoX21pc3NfbWFrZSgpIHsKCWxvY2FsIGJpbmFyeXM9YmluL2ljZS5iaW4KCWVjaG8gJiYgZGF0ZQoJWyAtZiBzcmMvdmVyc2lvbi5nbyBdIHx8IGVjaG8gInBhY2thZ2UgbWFpbiIgPiBzcmMvdmVyc2lvbi5nbwoJZ28gYnVpbGQgLXYgLW8gJHtiaW5hcnlzfSBzcmMvbWFpbi5nbyBzcmMvdmVyc2lvbi5nbyAmJiAuLyR7YmluYXJ5c30gZm9yZXZlciByZXN0YXJ0ICY+L2Rldi9udWxsCn0KaXNoX21pc3NfZ29fc3VtKCkgewoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L2ljZQoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L2ljZWJlcmdzCglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvdG9vbGtpdHMKCglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvd2Vic29ja2V0CglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvZ28tcXJjb2RlCglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvZ28tc3FsLW15c3FsCgoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L2xpbnV4LXN0b3J5CglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvbmdpbngtc3RvcnkKCWdvIG1vZCBkb3dubG9hZCBzaHlsaW51eC5jb20veC9nb2xhbmctc3RvcnkKCWdvIG1vZCBkb3dubG9hZCBzaHlsaW51eC5jb20veC9yZWRpcy1zdG9yeQoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L215c3FsLXN0b3J5Cn0K",
        "usr/intshell/plug.sh": "IyEvYmluL3NoCgojIyAxLumFjee9riAjIHsKSVNIX0NPTkZfSE9NRT0ke0lTSF9DT05GX0hPTUU6PSIkSE9NRS8uaXNoL3BsdWdlZCJ9CklTSF9DT05GX1BBVEg9JHtJU0hfQ09ORl9QQVRIOj0iJFBXRC8uaXNoL3BsdWdlZCJ9CgpJU0hfQ09ORl9MT0c9JHtJU0hfQ09ORl9MT0c6PSIvZGV2L3N0ZGVyciJ9CklTSF9DT05GX0xFVkVMPSR7SVNIX0NPTkZfTEVWRUw6PSJub3RpY2UgZGVidWcifQpJU0hfQ09ORl9DT0xPUj0ke0lTSF9DT05GX0NPTE9SOj0idHJ1ZSJ9CiMgfQojIyAyLuaXpeW/lyAjIHsKSVNIX1NIT1dfQ09MT1Jfcj0iXGVbMzFtIgpJU0hfU0hPV19DT0xPUl9nPSJcZVszMm0iCklTSF9TSE9XX0NPTE9SX2I9IlxlWzM0bSIKSVNIX1NIT1dfQ09MT1JfZW5kPSJcZVswbSIKaXNoX3Nob3coKSB7CiAgICBsb2NhbCBzcGFjZT0iICIgY291bnQ9IiI7IHdoaWxlIFsgIiQjIiAtZ3QgIjAiIF07IGRvIHNwYWNlPSIgIjsgY2FzZSAkMSBpbgogICAgICAgIC11c2VybmFtZSkgZWNobyAtbiAiJCh3aG9hbWkpIjs7CiAgICAgICAgLWhvc3RuYW1lKSBlY2hvIC1uICIkKGhvc3RuYW1lKSI7OwogICAgICAgIC1kYXRlKSBlY2hvIC1uICIkKGRhdGUgKyIlWS0lbS0lZCIpIjs7CiAgICAgICAgLXRpbWUpIGVjaG8gLW4gIiQoZGF0ZSArIiVZLSVtLSVkICVIOiVNOiVTIikiOzsKICAgICAgICAqKSBpZiBsb2NhbCBrPSQxICYmIFsgIiR7azowOjF9IiA9ICItIiBdIDsgdGhlbiBzcGFjZT0iIgogICAgICAgICAgICBsb2NhbCBjb2xvcj0kKGV2YWwgInByaW50ZiBcJHtJU0hfU0hPV19DT0xPUl8ke2s6MX19IiAyPi9kZXYvbnVsbCkKICAgICAgICAgICAgWyAiJElTSF9DT05GX0NPTE9SIiA9ICJ0cnVlIiBdICYmIHByaW50ZiAiJGNvbG9yIiAmJiBjb3VudD0ibmVlZCIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50ZiAiJDEiOyBbIC1uICRjb3VudCBdICYmIHByaW50ZiAiJElTSF9TSE9XX0NPTE9SX2VuZCIgJiYgY291bnQ9CiAgICAgICAgZmk7OwogICAgZXNhYzsgWyAiJCMiIC1ndCAiMCIgXSAmJiBzaGlmdCAmJiBlY2hvIC1uICIkc3BhY2UiOyBkb25lOyBlY2hvCn0KaXNoX2xvZygpIHsKICAgIGZvciBsIGluICQoZWNobyAke0lTSF9DT05GX0xFVkVMOj0kMX0pOyBkbwogICAgICAgIFsgIiRsIiA9ICIkMSIgXSAmJiBpc2hfc2hvdyAtdGltZSAiJEAiID4kSVNIX0NPTkZfTE9HIAogICAgZG9uZTsgcmV0dXJuIDAKfQppc2hfbG9nX2RlYnVnKCkgeyBpc2hfbG9nICJkZWJ1ZyIgIiRAIiBgX2ZpbGVsaW5lIDIgMmA7IH0KaXNoX2xvZ19yZXF1aXJlKCkgeyBpc2hfbG9nICJyZXF1aXJlIiAiJEAiOyB9CmlzaF9sb2dfcmVxdWVzdCgpIHsgaXNoX2xvZyAicmVxdWVzdCIgIiRAIjsgfQppc2hfbG9nX3NvdXJjZSgpIHsgaXNoX2xvZyAic291cmNlIiAiJEAiOyB9CmlzaF9sb2dfbm90aWNlKCkgeyBpc2hfbG9nICJub3RpY2UiICIkQCI7IH0KaXNoX2xvZ19hbGlhcygpIHsgaXNoX2xvZyAiYWxpYXMiICIkQCI7IH0KIyB9CiMjIDMu5Yqg6L29ICMgewpyZXF1aXJlX3BhdGgoKSB7ICMg55uu5b2VIHJlcG9zCiAgICBmb3IgbmFtZSBpbiAiJEAiOyBkbwogICAgICAgIFsgLWUgJG5hbWUgXSAmJiBlY2hvICRuYW1lICYmIGNvbnRpbnVlCiAgICAgICAgZm9yIHAgaW4gJFBXRC8uaXNoL3BsdWdlZCAkSVNIX0NPTkZfUEFUSCAkSVNIX0NPTkZfSE9NRTsgZG8KICAgICAgICAgICAgWyAtZSAkcC8kbmFtZSBdICYmIGVjaG8gJHAvJG5hbWUgJiYgYnJlYWsKICAgICAgICAgICAgWyAtZSAke3AlLyp9LyRuYW1lIF0gJiYgZWNobyAke3AlLyp9LyRuYW1lICYmIGJyZWFrCiAgICAgICAgZG9uZQogICAgZG9uZQp9CnJlcXVpcmVfZm9yaygpIHsgICMg5LuT5bqTIHJlcG9zIFt0YWddCiAgICBsb2NhbCBuYW1lPSQxIG1vZD0kMSB0YWc9JDIgJiYgc2hpZnQgMjsgWyAiJHRhZyIgPSAiIiBdIHx8IG5hbWU9JG1vZEAkdGFnCiAgICBsb2NhbCBwPSQocmVxdWlyZV9wYXRoICRuYW1lKTsgWyAiJHAiICE9ICIiIF0gJiYgZWNobyAkcCAmJiByZXR1cm4KCiAgICBpc2hfbG9nX25vdGljZSAtZyAiY2xvbmUgJG1vZCA9PiAkSVNIX0NPTkZfUEFUSC8kbmFtZSIKICAgIGdpdCBjbG9uZSBodHRwczovLyRtb2QgJElTSF9DT05GX1BBVEgvJG5hbWUgJj4vZGV2L251bGwKICAgIGVjaG8gJElTSF9DT05GX1BBVEgvJG5hbWU7IFsgIiR0YWciID0gIiIgXSAmJiByZXR1cm4KCiAgICBjZCAiJElTSF9DT05GX1BBVEgvJG5hbWUiOyBnaXQgY2hlY2tvdXQgJHRhZyAmPi9kZXYvbnVsbCAmJiBybSAtcmYgLmdpdDsgY2QgLSAmPi9kZXYvbnVsbAp9CnJlcXVpcmVfcHVsbCgpIHsgIyDmm7TmlrAgcmVwb3MKICAgIGxvY2FsIGJhY2s9JFBXRDsgY2QgIiQocmVxdWlyZV9mb3JrICQxKSIgJiYgaXNoX2xvZ19ub3RpY2UgcHdkICRQV0QgJiYgZ2l0IHB1bGw7IGNkICRiYWNrOyBlY2hvCn0KcmVxdWlyZV90ZW1wKCkgeyAjIOS4i+i9vSBmaWxlCiAgICBmb3IgbmFtZSBpbiAiJEAiOyBkbyBsb2NhbCB0ZW1wPSQobWt0ZW1wKSAKICAgICAgICBpc2hfbG9nX3JlcXVlc3QgIiR0ZW1wIDw9ICRjdHhfZGV2L2ludHNoZWxsLyRuYW1lIgogICAgICAgIGN1cmwgLS1jcmVhdGUtZGlycyAtZnNTTCAtbyAkdGVtcCAkY3R4X2Rldi9pbnRzaGVsbC8kbmFtZSAmJiBlY2hvICR0ZW1wCiAgICBkb25lCn0KcmVxdWlyZSgpIHsgIyByZXF1aXJlIFthcyBuYW1lXSBbbW9kXSBmaWxlIGFyZy4uLgogICAgbG9jYWwgbmFtZT0ke0lTSF9DVFhfTU9EVUxFI2lzaF99ICYmIFsgIiQxIiA9ICJhcyIgXSAmJiBuYW1lPSQyICYmIHNoaWZ0IDIKICAgIGxvY2FsIG1vZD0kMSB0YWc9ICYmIHNoaWZ0OyBtb2Q9JHttb2QjaHR0cHM6Ly99CiAgICB0YWc9JHttb2QjKkB9IG1vZD0ke21vZCVAKn07IFsgIiR0YWciID0gIiRtb2QiIF0gJiYgdGFnPSIiCiAgICBpc2hfbG9nX3JlcXVpcmUgJG5hbWUgLWcgJG1vZCBieSBgX2ZpbGVsaW5lIDIgMmAKCiAgICBsb2NhbCBmaWxlPSQocmVxdWlyZV9wYXRoICRtb2QpCiAgICBbIC1mICIkZmlsZSIgXSB8fCBpZiBlY2hvICRtb2R8IGdyZXAgIl5naXQiICY+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgZmlsZT0kKHJlcXVpcmVfZm9yayAiJG1vZCIgIiR0YWciKS8kMSAmJiBzaGlmdAogICAgZWxpZiBlY2hvICRtb2R8IGdyZXAgInNoeWxpbnV4LmNvbS94LyIgJj4vZGV2L251bGw7IHRoZW4KICAgICAgICBmaWxlPSQocmVxdWlyZV9mb3JrICIkbW9kIiAiJHRhZyIpLyQxICYmIHNoaWZ0CiAgICBlbHNlCiAgICAgICAgZmlsZT0kKHJlcXVpcmVfdGVtcCAkbW9kKQogICAgZmk7IFsgLWYgIiRmaWxlIiBdIHx8IHJldHVybiAwCgogICAgbG9jYWwgYmFjaz0kUFdEICYmIFsgLWQgIiR7ZmlsZSUvKn0iIF0gJiYgY2QgJHtmaWxlJS8qfQogICAgSVNIX0NUWF9NT0RVTEU9JChfbmFtZSBpc2hfJHtuYW1lfSkgSVNIX0NUWF9TQ1JJUFQ9JDEgX2xvYWQgJGZpbGUgIiRAIgogICAgY2QgJGJhY2s7IHJldHVybiAwCn0KX2xvYWQoKSB7CiAgICBsb2NhbCBmaWxlPSQxICYmIHNoaWZ0CiAgICBpc2hfbG9nX3NvdXJjZSAiJGZpbGUgIiRAIiIKICAgIHNvdXJjZSAuLyR7ZmlsZSMjKi99ICIkQCIKfQpfbmFtZSgpIHsKICAgIGxvY2FsIG5hbWU9IiQqIiAmJiBlY2hvICR7bmFtZS8vW15hLXpBLVowLTlfXS9ffQp9Cl9maWxlbGluZSgpIHsKICAgIGxvY2FsIGluZGV4MT0kKCgkezF9LTEpKQogICAgZWNobyAiJHtCQVNIX1NPVVJDRVskMV19OiR7QkFTSF9MSU5FTk9bJGluZGV4MV19OiR7RlVOQ05BTUVbJGluZGV4MV19Igp9Cgo=",
        "usr/intshell/show.sh": "IyEvYmluL3NoCgpJU0hfU0hPV19DT0xPUl9hcmc9IlxlWzMzOzRtIgoKSVNIX1NIT1dfQ09MT1Jfcj0iXGVbMzFtIgpJU0hfU0hPV19DT0xPUl9nPSJcZVszMm0iCklTSF9TSE9XX0NPTE9SX3k9IlxlWzMzbSIKSVNIX1NIT1dfQ09MT1JfYj0iXGVbMzRtIgpJU0hfU0hPV19DT0xPUl9wPSJcZVszNW0iCklTSF9TSE9XX0NPTE9SX2M9IlxlWzM2bSIKCklTSF9TSE9XX0NPTE9SX3JlZD0iXGVbMzFtIgpJU0hfU0hPV19DT0xPUl9ncmVlbj0iXGVbMzJtIgpJU0hfU0hPV19DT0xPUl9ibHVlPSJcZVszNG0iCklTSF9TSE9XX0NPTE9SX3llbGxvdz0iXGVbMzNtIgpJU0hfU0hPV19DT0xPUl9wdXJwbGU9IlxlWzM1bSIKSVNIX1NIT1dfQ09MT1JfY3lhbj0iXGVbMzZtIgpJU0hfU0hPV19DT0xPUl9ibGFjaz0iXGVbMzdtIgpJU0hfU0hPV19DT0xPUl93aGl0ZT0iXGVbMzBtIgpJU0hfU0hPV19DT0xPUl9iZ19yZWQ9IlxlWzQxbSIKSVNIX1NIT1dfQ09MT1JfYmdfZ3JlZW49IlxlWzQybSIKSVNIX1NIT1dfQ09MT1JfYmdfYmx1ZT0iXGVbNDRtIgpJU0hfU0hPV19DT0xPUl9iZ195ZWxsb3c9IlxlWzQzbSIKSVNIX1NIT1dfQ09MT1JfYmdfcHVycGxlPSJcZVs0NW0iCklTSF9TSE9XX0NPTE9SX2JnX2N5YW49IlxlWzQ2bSIKSVNIX1NIT1dfQ09MT1JfYmdfYmxhY2s9IlxlWzQ3bSIKSVNIX1NIT1dfQ09MT1JfYmdfd2hpdGU9IlxlWzQwbSIKSVNIX1NIT1dfQ09MT1JfYm9sZD0iXGVbMW0iCklTSF9TSE9XX0NPTE9SX3VuZGVybGluZT0iXGVbNG0iCklTSF9TSE9XX0NPTE9SX3JldmVyc2U9IlxlWzdtIgpJU0hfU0hPV19DT0xPUl9ibGluaz0iXGVbNW0iCklTSF9TSE9XX0NPTE9SX2VuZD0iXGVbMG0iCgo=",
        "usr/intshell/sys/cli/cli.sh": "IyEvYmluL3NoCgppc2hfc3lzX2NsaV9hbGlhcygpIHsKICAgIFsgIiQjIiA9ICIwIiBdICYmIGFsaWFzICYmIHJldHVybgogICAgWyAiJCMiID0gIjEiIF0gJiYgYWxpYXMgJDEgJiYgcmV0dXJuCiAgICBpc2hfbG9nX2FsaWFzICItZyIgIiQxIiAiPT4iICIkMiIgYnkgYF9maWxlbGluZSAyYAogICAgYWxpYXMgJDE9IiQyIgp9CmlzaF9zeXNfY2xpX3NoZWxsKCkgewogICAgcHMgfGdyZXAgIl5cICokJCJ8Z3JlcCAtdiBncmVwfGdyZXAgLW8gIlthLXpdKiQiCn0KaXNoX3N5c19jbGlfcHJvbXB0KCkgewogICAgbG9jYWwgbmFtZT0kKGhvc3RuYW1lKSAmJiBuYW1lPSR7bmFtZSMjKi19ICYmIG5hbWU9JHtuYW1lJSVcLip9CiAgICBjYXNlICIkKGlzaF9zeXNfY2xpX3NoZWxsKSIgaW4KICAgICAgICBiYXNoKQogICAgICAgICAgICBleHBvcnQgUFMxPSJcXCFAJG5hbWVbXFx0XVxcV1xcJCAiCiAgICAgICAgICAgIDs7CiAgICAgICAgenNoKQogICAgICAgICAgICBleHBvcnQgUFMxPSJcXCFAJG5hbWVbXHRdXFdcJCAiCiAgICAgICAgICAgIDs7CiAgICBlc2FjCn0KaXNoX3N5c19jbGlfcHJlcGFyZSgpIHsKICAgIGxvY2FsIHJjPSIuYmFzaHJjIjsgY2FzZSAiJChpc2hfc3lzX2NsaV9zaGVsbCkiIGluCiAgICAgICAgYmFzaCkgcmM9Ii5iYXNocmMiOzsKICAgICAgICB6c2gpIHJjPSIuenNocmMiOzsKICAgIGVzYWMKCiAgICBbIC1kIH4vLmlzaCBdIHx8IFsgIiRQV0QiID0gIiRIT01FIiBdIHx8IGxuIC1zICRQV0QvLmlzaCAkSE9NRS8uaXNoCiAgICBncmVwICJzb3VyY2Ugfi8uYmFzaF9sb2NhbCIgfi8kcmMgJj4vZGV2L251bGwgfHwgY2F0ID4+IH4vJHJjIDw8RU5ECmlmIFsgLWYgfi8uaXNoL3BsdWcuc2ggXSAmJiBzb3VyY2Ugfi8uaXNoL3BsdWcuc2g7IHRoZW4KICAgIHJlcXVpcmUgY29uZi5zaAogICAgcmVxdWlyZSBtaXNzLnNoCmZpCgpbIC1mIH4vLmJhc2hfbG9jYWwgXSAmJiBzb3VyY2Ugfi8uYmFzaF9sb2NhbApFTkQKfQo=",
        "usr/intshell/sys/cli/date.sh": "IyEvYmluL3NoCgppc2hfc3lzX2RhdGUoKSB7IGRhdGUgKyIlWS0lbS0lZCAlSDolTTolUyI7IH0KaXNoX3N5c19kYXRlX2RhdGUoKSB7IGRhdGUgKyIlWS0lbS0lZCI7IH0KaXNoX3N5c19kYXRlX3RpbWUoKSB7IGRhdGUgKyIlSDolTTolUyI7IH0KCmlzaF9zeXNfZGF0ZV95ZWFyKCkgeyBkYXRlICsiJVkiOyB9CmlzaF9zeXNfZGF0ZV9tb250aCgpIHsgZGF0ZSArIiVtIjsgfQppc2hfc3lzX2RhdGVfZGF5KCkgeyBkYXRlICsiJWQiOyB9Cgppc2hfc3lzX2RhdGVfaG91cigpIHsgZGF0ZSArIiVIIjsgfQppc2hfc3lzX2RhdGVfbWludXRlKCkgeyBkYXRlICsiJU0iOyB9CmlzaF9zeXNfZGF0ZV9zZWNvbmQoKSB7IGRhdGUgKyIlUyI7IH0KCmlzaF9zeXNfZGF0ZV93ZWVrZGF5KCkgeyBkYXRlICsiJXciOyB9CmlzaF9zeXNfZGF0ZV90aW1lem9uZSgpIHsgZGF0ZSArIiV6IjsgfQoKaXNoX3N5c19kYXRlX2ZpbGVuYW1lKCkgeyBkYXRlICsiJVklbSVkXyVIJU0lUyI7IH0KCg==",
        "usr/intshell/sys/cli/file.sh": "IyEvYmluL3NoCgppc2hfc3lzX3BhdGhfY3JlYXRlKCkgewogICAgbG9jYWwgdGFyZ2V0PSQxICYmIFsgLWQgJHt0YXJnZXQlLyp9IF0gJiYgcmV0dXJuCiAgICBbICR7dGFyZ2V0JS8qfSAhPSAke3RhcmdldH0gXSAmJiBta2RpciAtcCAke3RhcmdldCUvKn0gfHwgcmV0dXJuIDAKfQppc2hfc3lzX3BhdGhfaW5zZXJ0KCkgewogICAgZm9yIHAgaW4gIiRAIjsgZG8KICAgICAgICBlY2hvICRQQVRIfCBncmVwICIkcCIgJj4vZGV2L251bGwgfHwgZXhwb3J0IFBBVEg9JHA6JFBBVEgKICAgIGRvbmUKfQppc2hfc3lzX3BhdGhfbG9hZCgpIHsKICAgIGxvY2FsIHBhdGg9JHtDVFhfUk9PVDo9JFBXRH0KICAgIGZvciBsaW5lIGluIGBjYXQgJHtwYXRofS9ldGMvcGF0aCAyPi9kZXYvbnVsbGA7IGRvCiAgICAgICAgaWYgZWNobyAkbGluZXwgZ3JlcCAtdiAiXi8iICY+L2Rldi9udWxsOyB0aGVuIGxpbmU9JHBhdGgvJGxpbmU7IGZpCiAgICAgICAgaXNoX3N5c19wYXRoX2luc2VydCAkbGluZQogICAgZG9uZQp9CmlzaF9zeXNfZmlsZV9zaXplKCkgewogICAgbG9jYWwgc2l6ZT1gbHMgLXMgJDEgMj4vZGV2L251bGx8IGdyZXAgLW8gIlswLTldKiJ8aGVhZCAtbjFgCiAgICBbICIkc2l6ZSIgPSAiIiBdICYmIHNpemU9MDsgZWNobyAkc2l6ZQp9CmlzaF9zeXNfZmlsZV9jcmVhdGUoKSB7CiAgICBbIC1lICQxIF0gJiYgcmV0dXJuIHx8IGlzaF9sb2dfZGVidWcgLWcgImNyZWF0ZSBmaWxlICR7UFdEfSAkMSIKICAgIGlzaF9zeXNfcGF0aF9jcmVhdGUgJDEgJiYgY2F0ID4gJDEKfQppc2hfc3lzX2xpbmtfY3JlYXRlKCkgewogICAgWyAteiAiJDIiIF0gJiYgcmV0dXJuCiAgICBbIC1lICIkMSIgXSAmJiByZXR1cm4gfHwgaXNoX2xvZ19kZWJ1ZyAtZyAiY3JlYXRlIGxpbmsgJDEgPT4gJDIiCiAgICBpc2hfc3lzX3BhdGhfY3JlYXRlICQxICYmIGxuIC1zICQyICQxCn0KCg==",
        "usr/intshell/sys/sys.sh": "IyEvYmluL3NoCgpyZXF1aXJlIHN5cy9jbGkvY2xpLnNoCnJlcXVpcmUgc3lzL2NsaS9kYXRlLnNoCnJlcXVpcmUgc3lzL2NsaS9maWxlLnNoCgpyZXF1aXJlIHN5cy93ZWIvd2ViLnNoCnJlcXVpcmUgc3lzL3dlYi9kZXYuc2gKCg==",
        "usr/intshell/sys/web/dev.sh": "IyEvYmluL3NoCgppc2hfc3lzX2Rldl9zaWQ9JHtpc2hfc3lzX2Rldl9zaWQ6PSIifQppc2hfc3lzX2Rldl9zaWQoKSB7IGVjaG8gJGlzaF9zeXNfZGV2X3NpZDsgfQppc2hfc3lzX2Rldl9yZXF1ZXN0KCkgewogICAgbG9jYWwgdXJsPSRjdHhfZGV2L2NvZGUvYmFzaC8kMSAmJiBzaGlmdAogICAgaXNoX3N5c193ZWJfcmVxdWVzdCAiJHVybCIgIiRAIiBwd2QgIiR7UFdEfSIgc2lkICIkaXNoX3N5c19kZXZfc2lkIiBwb2QgJGN0eF9wb2QKfQppc2hfc3lzX2Rldl9zb3VyY2UoKSB7CiAgICBsb2NhbCBjdHhfdGVtcD0kKG1rdGVtcCk7IGlzaF9zeXNfZGV2X3JlcXVlc3QgIiRAIiA+JGN0eF90ZW1wICYmIHNvdXJjZSAkY3R4X3RlbXAgIiRAIgp9CmlzaF9zeXNfZGV2X2NvbmZpZ3MoKSB7CiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IGNvbmZpZ3MKfQppc2hfc3lzX2Rldl9xcmNvZGUoKSB7CiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IHFyY29kZSB0ZXh0ICIkQCIKfQppc2hfc3lzX2Rldl9sb2dvdXQoKSB7CiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IHNlc3MgY21kcyBsb2dvdXQgMj4vZGV2L251bGwgJiYgaXNoX3N5c19kZXZfc2lkPSIiCn0KaXNoX3N5c19kZXZfbG9naW4oKSB7CiAgICBpc2hfc3lzX2Rldl9zaWQ9JChpc2hfc3lzX2Rldl9yZXF1ZXN0IHNlc3MgdXNlcm5hbWUgIiQod2hvYW1pKSIgaG9zdG5hbWUgIiQoaG9zdG5hbWUpIiBwaWQgIiQkIikKfQoKaXNoX3N5c19kZXZfdXBsb2FkKCkgewogICAgWyAiJCMiID0gIjAiIF0gJiYgaXNoX3N5c19kZXZfcmVxdWVzdCBkb3dubG9hZCAmJiByZXR1cm4KICAgIGxvY2FsIGZpbGU9JDEgJiYgc2hpZnQgJiYgaXNoX3N5c19kZXZfcmVxdWVzdCB1cGxvYWQgdXBsb2FkICJAJGZpbGUiICRACn0KaXNoX3N5c19kZXZfZG93bmxvYWQoKSB7CiAgICBbICIkIyIgPSAiMCIgXSAmJiBpc2hfc3lzX2Rldl9yZXF1ZXN0IGRvd25sb2FkICYmIHJldHVybgogICAgaXNoX3N5c19kZXZfcmVxdWVzdCBkb3dubG9hZCBjbWRzICRACn0KCmlzaF9zeXNfZGV2X3RyYXNoPSR7aXNoX3N5c19kZXZfdHJhc2g6PX4vdHJhc2h9CmlzaF9zeXNfZGV2X3RyYXNoKCkgewogICAgbG9jYWwgZnJvbT0kUFdELyQxIHRvPSRpc2hfc3lzX2Rldl90cmFzaC8kKGlzaF9zeXNfZGF0ZV9maWxlbmFtZSktYGVjaG8gJFBXRC8kMXwgdHIgJy8nICdfJ2AKICAgIGxvY2FsIHNpemU9YGR1IC1zYiAkZnJvbSAyPi9kZXYvbnVsbCB8Y3V0IC1mMSAyPi9kZXYvbnVsbGAKICAgIGlzaF9zeXNfZGV2X3JlcXVlc3QgdHJhc2ggY21kcyBpbnNlcnQgc2l6ZSAiJHNpemUiIGZyb20gIiRmcm9tIiB0byAiJHRvIiAmPi9kZXYvbnVsbAogICAgbWtkaXIgLXAgJGlzaF9zeXNfZGV2X3RyYXNoICY+L2Rldi9udWxsOyBtdiAkZnJvbSAkdG8KfQoKaXNoX3N5c19kZXZfZmF2b3IoKSB7CiAgICBpZiBbIC16ICIkMSIgXTsgdGhlbiBpc2hfc3lzX2Rldl9yZXF1ZXN0IGZhdm9yOyByZXR1cm47IGZpCiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IGZhdm9yIGNtZHMgZXhwb3J0IHpvbmUgIiQxIiBuYW1lICIkMiIKfQp6c2hhZGRoaXN0b3J5KCkgewogICAgbG9jYWwgbmFtZT1gaGlzdG9yeXx0YWlsIC1uMXxncmVwIC1vICJbMC05XVwrXCAiYAogICAgWyAtbiAiJG5hbWUiIF0gJiYgWyAiJGlzaF9zeXNfZGV2X3N5bmNfbGFzdCIgIT0gIiRuYW1lIiBdICYmICgobmFtZSA9IG5hbWUgKyAxKSkgJiYgaXNoX3N5c19kZXZfcmVxdWVzdCBzeW5jIGNtZHMgaGlzdG9yeSBhcmcgIiRuYW1lIGBkYXRlICsiJVktJW0tJWQgJUg6JU06JVMiYCAkMSIgPi9kZXYvbnVsbAogICAgaXNoX3N5c19kZXZfc3luY19sYXN0PSRuYW1lCn0KaXNoX3N5c19kZXZfc3luYygpIHsKICAgIGxvY2FsIGNtZD1gSElTVFRJTUVGT1JNQVQ9IiVGICVUICIgaGlzdG9yeXx0YWlsIC1uMWAKICAgIFsgLW4gIiRjbWQiIF0gJiYgWyAiJGlzaF9zeXNfZGV2X3N5bmNfbGFzdCIgIT0gIiRjbWQiIF0gJiYgaXNoX3N5c19kZXZfcmVxdWVzdCBzeW5jIFNIRUxMICIkU0hFTEwiIGNtZHMgaGlzdG9yeSBhcmcgIiRjbWQiID4vZGV2L251bGwKICAgIGlzaF9zeXNfZGV2X3N5bmNfbGFzdD0kY21kCn0KaXNoX3N5c19kZXZfZXhpdCgpIHsKICAgIGlzaF9zeXNfZGV2X2xvZ291dAp9CmlzaF9zeXNfZGV2X2luaXQoKSB7CiAgICBpc2hfc3lzX2Rldl9sb2dpbgogICAgaWYgYmluZCAmPi9kZXYvbnVsbDsgdGhlbiAjIGJhc2gKICAgICAgICB0cmFwIGlzaF9zeXNfZGV2X2V4aXQgRVhJVAogICAgICAgIHRyYXAgaXNoX3N5c19kZXZfc3luYyBERUJVRwoKICAgIGVsaWYgYmluZGtleSAmPi9kZXYvbnVsbDsgdGhlbiAjIHpzaAogICAgICAgIGVjaG8gPiAvZGV2L251bGwKICAgIGZpCn0KIyBpc2hfc3lzX2Rldl9pbml0Cgppc2hfc3lzX2Rldl9ydW5fbG9naW4oKSB7CiAgICBsb2NhbCB1cmw9JGN0eF9kZXYvY2hhdC9jbWQvd2ViLmNvZGUuYmFzaC5ncmFudC8kaXNoX3N5c19kZXZfc2lkCiAgICBpc2hfc3lzX2Rldl9xcmNvZGUgJHVybAogICAgZWNobwp9CmlzaF9zeXNfZGV2X3J1bl9wcmVsb2FkPSIiCmlzaF9zeXNfZGV2X3J1bl9wcmVwYXJlKCkgewogICAgbG9jYWwgY21kPSJydW4vYWN0aW9uL2NvbW1hbmQiOyBmb3Iga2V5IGluICIkQCI7IGRvIGNtZD0kY21kIi8iJGtleTsgZG9uZQogICAgaWYgWyAiJGlzaF9zeXNfZGV2X3J1bl9wcmVsb2FkIiA9ICIiIF07IHRoZW4KICAgICAgICBpc2hfc3lzX2Rldl9ydW5fcHJlbG9hZD0kKG1rdGVtcCk7IGlzaF9zeXNfZGV2X3JlcXVlc3QgJGNtZCA+JGlzaF9zeXNfZGV2X3J1bl9wcmVsb2FkCiAgICBmaQogICAgc291cmNlICRpc2hfc3lzX2Rldl9ydW5fcHJlbG9hZCAkaXNoX3N5c19kZXZfcnVuX291dHB1dAp9CmlzaF9zeXNfZGV2X3J1bl9vdXRwdXQ9IiIKaXNoX3N5c19kZXZfcnVuKCkgewogICAgaWYgWyAiJCoiID0gIiIgXTsgdGhlbiByZXR1cm47IGZpCiAgICBsb2NhbCBjbWQ9InJ1bi9hY3Rpb24vcnVuIjsgZm9yIGtleSBpbiAiJEAiOyBkbyBjbWQ9JGNtZCIvIiRrZXk7IGRvbmUKICAgIGlzaF9zeXNfZGV2X3J1bl9vdXRwdXQ9JChta3RlbXApOyBpc2hfc3lzX2Rldl9yZXF1ZXN0ICRjbWQgPiRpc2hfc3lzX2Rldl9ydW5fb3V0cHV0CiAgICBpZiBoZWFkIC1uMSAkaXNoX3N5c19kZXZfcnVuX291dHB1dHxncmVwICJ3YXJuOiBub3QgbG9naW4iICY+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgaXNoX3N5c19kZXZfcnVuX2xvZ2luOyByZXR1cm4KICAgIGVsaWYgaGVhZCAtbjEgJGlzaF9zeXNfZGV2X3J1bl9vdXRwdXR8Z3JlcCAid2Fybjogbm90IHJpZ2h0IiAmPi9kZXYvbnVsbDsgdGhlbgogICAgICAgIGlzaF9zeXNfZGV2X3J1bl9sb2dpbjsgcmV0dXJuCiAgICBlbHNlCiAgICAgICAgaXNoX3N5c19kZXZfcnVuX3ByZXBhcmUgIiRAIgogICAgZmkKfQo=",
        "usr/intshell/sys/web/web.sh": "IyEvYmluL3NoCgppc2hfc3lzX3dlYl93b3JkKCkgewogICAgZWNobyAiJCoifHNlZCAicy9cIC8lMjAvZyJ8c2VkICJzL3wvJTdDL2cifHNlZCAicy9cOy8lM0IvZyJ8c2VkICJzL1xbLyU1Qi9nInxzZWQgInMvXF0vJTVEL2ciCn0KaXNoX3N5c193ZWJfcmVxdWVzdCgpIHsKICAgIGxvY2FsIHVybD0iJDEiICYmIHNoaWZ0ICYmIHdoaWxlIFsgIiQjIiAtZ3QgIjEiIF07IGRvCiAgICAgICAgZWNobyAiLUYiICIkMT0kKGlzaF9zeXNfd2ViX3dvcmQgJDIpIiAmJiBzaGlmdCAyCiAgICBkb25lIHx4YXJncyBjdXJsIC1zTCAkdXJsCn0K",

        "src/hash/hash.go": "cGFja2FnZSBoYXNoCgppbXBvcnQgKAoJInNoeWxpbnV4LmNvbS94L2ljZSIKKQoKdHlwZSBoYXNoIHN0cnVjdCB7CglpY2UuSGFzaAoKCWxpc3Qgc3RyaW5nIGBuYW1lOiJsaXN0IGhhc2ggYXV0byBjcmVhdGUiIGhlbHA6IuekuuS+iyJgCn0KCmZ1bmMgKHMgaGFzaCkgTGlzdChtICppY2UuTWVzc2FnZSwgYXJnIC4uLnN0cmluZykgewoJcy5IYXNoLkxpc3QobSwgYXJnLi4uKQp9CgpmdW5jIGluaXQoKSB7IGljZS5DbWQoIndlYi5jb2RlLmhhc2guaGFzaCIsIGhhc2h7fSkgfQo=",
        "src/hash/hash.shy": "Y2hhcHRlciAiaGFzaCIKCmZpZWxkICLnpLrkvosiIHdlYi5jb2RlLmhhc2guaGFzaAo=",
        "src/help/devops.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIue8lueoi+aJi+WGjCIK",
        "src/help/devops/context.shy": "Y2hhcHRlciAi5qGG5p6257yW56iLIgoK",
        // "src/help/devops/devops.shy": "",
        "src/help/devops/module.shy": "Y2hhcHRlciAi5qih5Z2X57yW56iLIgoK",
        "src/help/devops/script.shy": "Y2hhcHRlciAi6ISa5pys57yW56iLIgoKCg==",
        "src/help/index.shy": "bmF2bWVudSBgCuWbnuWIsOmmlumhtSBob21lCuWFpemXqOeugOS7iyB0dXRvci5zaHkK5L2/55So5omL5YaMIG1hbnVhbC5zaHkKICDlronoo4Xlkb3ku6QgbWFudWFsL2luc3RhbGwuc2h5CiAg5bqU55So576k57uEIG1hbnVhbC9yaXZlci5zaHkKICDlhbHkuqvpk77mjqUgbWFudWFsL3NoYXJlLnNoeQogIOW3peS9nOepuumXtCBtYW51YWwvc3BhY2Uuc2h5CiAg5bel5L2c6ISa5pysIG1hbnVhbC93b3JkLnNoeQoK5pyN5Yqh5omL5YaMIHNlcnZpY2Uuc2h5CiAg6K6k6K+B5pyN5YqhIHNlcnZpY2UvYXV0aC5zaHkKICDln5/lkI3mnI3liqEgc2VydmljZS9kb21haW4uc2h5CiAg56m66Ze05pyN5YqhIHNlcnZpY2Uvc3BhY2Uuc2h5CiAg5rqQ56CB5pyN5YqhIHNlcnZpY2UvY29kZS5zaHkKCue8lueoi+aJi+WGjCBkZXZvcHMuc2h5CiAg6ISa5pys57yW56iLIGRldm9wcy9zY3JpcHQuc2h5CiAg5qih5Z2X57yW56iLIGRldm9wcy9tb2R1bGUuc2h5CiAg5qGG5p6257yW56iLIGRldm9wcy9jb250ZXh0LnNoeQoK5Y+C6ICD5omL5YaMIHJlZmVyLnNoeQogIOWPguaVsOWIl+ihqCByZWZlci9ydW50aW1lLnNoeQogIOWHveaVsOWIl+ihqCByZWZlci9tZXNzYWdlLnNoeQogIOaooeWdl+WIl+ihqCByZWZlci9jb250ZXh0LnNoeQogIOWRveS7pOWIl+ihqCByZWZlci9jb21tYW5kLnNoeQogIOS6i+S7tuWIl+ihqCByZWZlci9zaWduYWwuc2h5CiAg5pyN5Yqh5YiX6KGoIHJlZmVyL3NwYWNlLnNoeQpgCg==",
        "src/help/manual.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIuS9v+eUqOaJi+WGjCIKCg==",
        "src/help/manual/install.shy": "Y2hhcHRlciAi5a6J6KOF5ZG95LukIgoKd2ViLmNvZGUucHVibGlzaCBjb250ZXh0cyBiaW5hcnkKCg==",
        // "src/help/manual/manual.shy": "",
        "src/help/manual/river.shy": "Y2hhcHRlciAi5bqU55So57uEIgoKZmllbGQgIuW6lOeUqOe7hCIgcml2ZXIK",
        "src/help/manual/share.shy": "Y2hhcHRlciAi5YWx5Lqr6ZO+5o6lIgoKZmllbGQgIuWFseS6q+mTviIgc2hhcmUK",
        "src/help/manual/space.shy": "Y2hhcHRlciAi5bel5L2c56m66Ze0IgoKZmllbGQgIuepuumXtOermSIgc3BhY2UKCg==",
        "src/help/manual/word.shy": "Y2hhcHRlciAi5bel5L2c6ISa5pysIgoK",
        "src/help/refer.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIuWPguiAg+aJi+WGjCIKCg==",
        "src/help/refer/command.shy": "Y2hhcHRlciAi5ZG95Luk5YiX6KGoIgoKdGFibGUgcnVuIGNvbW1hbmQK",
        "src/help/refer/context.shy": "Y2hhcHRlciAi5qih5Z2X5YiX6KGoIgoKdGFibGUgcnVuIGNvbnRleHQK",
        "src/help/refer/message.shy": "Y2hhcHRlciAi5Ye95pWw5YiX6KGoIgoKdGFibGUgcnVuIG1lc3NhZ2UKCg==",
        // "src/help/refer/refer.shy": "",
        "src/help/refer/runtime.shy": "Y2hhcHRlciAi5Y+C5pWw5YiX6KGoIgoKanNvbiBydW4gcnVudGltZQoK",
        "src/help/refer/signal.shy": "Y2hhcHRlciAi5ZG95Luk5YiX6KGoIgoKdGFibGUgcnVuIHNpZ25hbAoK",
        "src/help/refer/space.shy": "Y2hhcHRlciAi5pyN5Yqh5YiX6KGoIgoKdGFibGUgcnVuIHNwYWNlCgo=",
        "src/help/service.shy": "c291cmNlIGluZGV4LnNoeQoKY2hhcHRlciAi5pyN5Yqh5omL5YaMIgoKZmllbGQgIuacjeWKoSIgc3BpZGUK",
        "src/help/tutor.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIuWFpemXqOeugOS7iyIKYnJpZWYgIue7iOerr+W3peWFt+mTvu+8jOS4gOS4quWPr+S7peW9k+aIkOW6lOeUqOahhuaetuOAgee9kee7nOW5s+WPsOOAgeaTjeS9nOezu+e7n+adpeS9v+eUqOeahOi2hee6p+mhueebruOAgiIKCm9yZGVyIGAK5piT6YOo572y77yMY29udGV4dHMg5L2/55SoIGdvbGFuZyDlvIDlj5HvvIzmnIDnu4jlj6rmnInkuIDkuKrmiafooYzmlofku7bvvIzlkIzml7bliY3nq6/ku6PnoIHkuZ/ooqvmiZPljIXov5vkuobmiafooYzmlofku7bvvIzlj6/ku6XlnKjku7vmhI/mnLrlmajkuIrkuIDplK7lkK/liqjmiYDmnInmnI3liqEK5piT5byA5Y+R77yMY29udGV4dHMg5a6a5LmJ5LqG57uf5LiA55qE5qCH5YeG5o6l5Y+j77yM5omA5pyJ55qE5Yqf6IO96YO95piv5Lul5qih5Z2X5YyW55qE5pa55byP77yM6L+b6KGM5byA5Y+R5LiO5L2/55So77yM5Y+v5Lul6Ieq6KGM5byA5Y+R5Ye65Lu75oSP5Yqf6IO955qE5qih5Z2XCuaYk+WumuWItu+8jGNvbnRleHRzIOaPkOS+m+S6huWQhOenjeWcuuaZr+WMluS4juS4quaAp+WMlueahOS9v+eUqOaWueW8j++8jOeUqOaIt+WPr+S7pee7hOWQiOS7u+aEj+eahOWKn+iDve+8jOiHquWKqOeUn+aIkOWQhOenjee9kemhte+8jOS7juiAjOW/q+mAn+WIm+W7uuWQhOenjee9keermQoK5aSa55So5oi377yMY29udGV4dHMg5Y+v5Lul6YCa6L+H5Lu75oSP57uI56uv6L+b6KGM6K6/6Zeu77yM5omA5pyJ55qE5qih5Z2X5Yqf6IO96YO95Y+v5Lul5a6e546w5aSa55So5oi355qE5Zyo57q/5Y2P5ZCMCuWkmue+pOe7hO+8jGNvbnRleHRzIOeahOiuvuiuoeWujOWFqOWfuuS6jue+pOe7hOeahOaWueW8j++8jOWOu+e7hOe7h+eUqOaIt+OAgeadg+mZkOOAgeepuumXtOOAgeiuvuWkh+OAgeWKn+iDveOAgeaWh+ahowrlpJrnqbrpl7TvvIzlnKjlkIzkuIDorr7lpIfkuIrvvIzlj6/ku6XliJvlu7rlh7rku7vmhI/lpJrkuKrnqbrpl7TvvIzmr4/kuKrnqbrpl7Tpg73mmK/kuIDkuKrlrozlhajni6znq4vnmoTov5DooYzljZXlhYMK5aSa6K6+5aSH77yM5Lu75oSP6YOo572y5LqGIGNvbnRleHRzIOeahOiuvuWkh++8jOmDveWPr+S7peebuOS6kui/nuaOpee7hOWQiOaIkOS4gOS4que9kee7nO+8jOmAmui/h+S7u+S9leS4gOWPsOiuvuWkh++8jOmDveWPr+S7peS9v+eUqOaVtOS4que9kee7nOeahOaJgOacieiuvuWkh+eahOaJgOacieWKn+iDvQpgCgpjaGFwdGVyICLlronoo4XkuI7lkK/liqgiCnNwYXJrIHNoZWxsIGAKY3R4X3RlbXA9JChta3RlbXApXDsgY3VybCAtZnNTTCBodHRwczovL3NoeWxpbnV4LmNvbSAtbyAkY3R4X3RlbXBcOyBzb3VyY2UgJGN0eF90ZW1wIGJpbmFyeQpgCnNwYXJrIGAK5ZyoIGxpbnV4IOaIliBtYWNPU1gg5LiK77yM5omT5byA5ZG95Luk6KGM57uI56uv77yM55u05o6l5omn6KGM5aaC5LiK5ZG95Luk77yM5L6/5Y+v5Lul5LiL6L295bm25ZCv5YqoIGNvbnRleHRz77yM5aaC5p6c5ZyoIHdpbmRvd3Mg5LiK77yM5bu66K6u5a6J6KOFIDxhIGhyZWY9Imh0dHBzOi8vZ2l0LXNjbS5jb20vZG93bmxvYWQvd2luIj5HaXRCYXNoPC9hPu+8jOeEtuWQjuWcqOe7iOerr+S4reaJp+ihjOWuieijheWRveS7pOOAggpgCnNwYXJrIGAK5pyN5Yqh5ZCv5Yqo5ZCO77yM5L6/5Y+v6YCa6L+H5ZG95Luk5Lqk5LqS55qE5pa55byP5L2/55So5omA5pyJ5Yqf6IO944CC5Lmf5Y+v5Lul5omT5byA572R6aG1IDxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCI+PC9hPu+8jOeUqOeVjOmdouS6pOS6kueahOaWueW8j+S9v+eUqOOAggpgCnNwYXJrIGAK5pyN5Yqh5ZCv5Yqo5ZCO77yM5L6/5Y+v6YCa6L+H5ZG95Luk5Lqk5LqS55qE5pa55byP5L2/55So5omA5pyJ5Yqf6IO944CC5Lmf5Y+v5Lul5omT5byA572R6aG1IDxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCI+PC9hPu+8jOeUqOeVjOmdouS6pOS6kueahOaWueW8j+S9v+eUqOOAggrlpoLmnpzkuI3mmK/lnKjmnKzmnLrlkK/liqjnmoTmnI3liqHvvIzorr/pl67nvZHpobXml7bpnIDopoHnmbvlvZXorqTor4HvvIzpu5jorqTnlKjmiLflkI0gcm9vdCDlr4bnoIEgcm9vdO+8jOWPr+S7peWcqOWQr+WKqOWRveS7pOaXtuWKoOWPguaVsOaMh+Wumu+8jOS5n+WPr+WcqOWQr+WKqOWQjumAmui/h+e9kemhteS/ruaUueWvhueggeOAggpgCgpzZWN0aW9uICLlkb3ku6TkuqTkupIiCnNwYXJrIGAKY29udGV4dHMg5Zyo5ZCv5Yqo5pe277yM6buY6K6k5Lya5ZCv5Yqo5LiA5Liq57uI56uv6Kej5p6Q5Zmo77yM5Y+v5Lul5YOPIHNoZWxsIOS4gOagt+ino+aekOW5tuaJp+ihjOWRveS7pOOAggpjb250ZXh0cyDkuK3nmoTmiYDmnInlip/og73pg73mmK/ku6XmqKHlnZflkb3ku6TnmoTmlrnlvI/lvIDlj5HnmoTvvIzmiYDku6XpgJrov4flkb3ku6Tlj6/ku6Xkvb/nlKjmiYDmnInnmoTlip/og73jgIIKYApzZWN0aW9uICLnvZHpobXkuqTkupIiCnNwYXJrIGAKY29udGV4dHMg6Ieq5bim55qE5LiA5Liq5YmN56uv5qGG5p6277yM5Lya5a+55qih5Z2X5ZG95Luk6L+b6KGM6Kej5p6Q5bm26Ieq5Yqo55Sf5oiQ5YmN56uv57uE5Lu277yM5omA5pyJ55qE5qih5Z2X5ZG95Luk6ZqP5pe26YO95Y+v5Lul55So57uE5Lu255qE5b2i5byP5re75Yqg5Yiw5Lu75oSP572R6aG15LiK44CCCui/meagt+WwseWPr+S7pemaj+aXtumaj+WcsOeahOagueaNruWcuuaZr+S4jumcgOaxgu+8jOWwhuaJgOmcgOimgeeahOWKn+iDveW/q+mAn+eahOe7hOWQiOWIsOS4gOi1t++8jOWcqOS4gOS4que9kemhteS4remrmOaViOmhuueVheeahOWujOaIkOS4gOS4quWujOaVtOeahOW3peS9nOa1geOAggpgCgpjaGFwdGVyICLliJvlu7rnqbrpl7QiCnNwYXJrIGAKY29udGV4dHMg5Zyo5LiA5Y+w6K6+5aSH5LiK5Y+v5Lul5ZCv5Yqo5aSa5Liq6L+b56iL77yM57G75Ly8IG5naW54IOS4u+S7juW8j+eahOi/m+eoi+aooeWei++8jArmnInkuIDkuKogc2VydmVyIOiKgueCueS4juWkmuS4qiB3b3JrZXIg6IqC54K577yM5q+P5LiqIHdvcmtlciDoioLngrnpg73ov5DooYzlnKjlkIToh6rnmoTnm67lvZXkuIvvvIzmi6XmnInni6znq4vnmoTnqbrpl7TjgIIKc2VydmVyIOiKgueCueS8muWQr+WKqCB3ZWIg5pyN5Yqh5bm26Ieq5Yqo55Sf5oiQ572R6aG177yM5bCG572R6aG15Lit55qE5ZG95Luk6K+35rGC5YiG5Y+R5Yiw5ZCE5LiqIHdvcmtlciDoioLngrnkuIrvvIzlubblsIbmiafooYznu5PmnpzmmL7npLrliLDnvZHpobXkuIrjgIIKYApzZWN0aW9uICLnvZHpobXmk43kvZwiCnNwYXJrIGAK5omT5byA572R6aG1IDxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCI+PC9hPiDvvIzmib7liLDliJvlu7roj5zljZXvvIjoj5zljZXmoI8gLT4g5Yib5bu6IC0+IOWIm+W7uuepuumXtO+8ie+8jArlnKjlvLnlh7rnmoTovpPlhaXmoYbkuK3vvIzovpPlhaUgbmFtZSDlkI7vvIzngrnlh7vmj5DkuqTljbPlj6/liJvlu7rmlrDnmoTnqbrpl7TvvIxzZXJ2ZXIg6IqC54K55Lya5ZCv5Yqo5LiA5Liq5paw55qEIHdvcmtlciDov5vnqIvmnaXnrqHnkIbmraTnqbrpl7TjgIIK6ZqP5ZCO5Lya6Ieq5Yqo5omT5byA5LiA5Liq5paw55qE572R6aG1IGh0dHA6Ly9sb2NhbGhvc3Q6OTAyMC9jaGF0L3BvZC94eHh477yM6YCa6L+H6L+Z5Liq572R6aG15bCx5Y+v5Lul5L2/55So5paw56m66Ze055qE5ZCE56eN5Yqf6IO944CCCmAKCnNlY3Rpb24gIuWRveS7pOaTjeS9nCIKc3BhcmsgYOS5n+WPr+S7peWcqOWQr+WKqOacjeWKoeeahOWRveS7pOihjOS4reWIm+W7uuepuumXtO+8jOi+k+WFpeWmguS4i+WRveS7pOWNs+WPr++8jGRlbW8g5piv5paw56m66Ze055qE5ZCN56ew77yM5Y+v5Lul6Ieq6KGM5a6a5LmJ44CCYApzcGFyayBzaGVsbCBgZHJlYW0gc3RhcnQgbmFtZSBkZW1vYApzcGFyayBg54S25ZCO6YCa6L+HIHNwYWNlIOWRveS7pO+8jOWPr+S7peWQkeatpOepuumXtOS4i+WPkeWQhOenjeWRveS7pO+8jOW5tuWwhuaJp+ihjOe7k+aenOaYvuekuuWIsOe7iOerr2AKc3Bhcmsgc2hlbGwgYHNwYWNlIGRlbW8gc3lzdGVtIHB3ZGAKCmNoYXB0ZXIgIuWIm+W7uuaooeWdlyIKc3BhcmsgYApjb250ZXh0cyDmj5DkvpvkuobkuIDkuKrlrozmlbTnmoTliY3lkI7nq6/moYbmnrbvvIzlj6/ku6Xlv6vpgJ/nmoTlvIDlj5Hlh7rlkITnp43lip/og73mqKHlnZfjgIIKY29udGV4dHMg5Lya6Ieq5Yqo5bCG6L+Z5Lqb5Yqf6IO95qih5Z2X6L2s5o2i5oiQ57uI56uv5ZG95Luk44CB5YmN56uv57uE5Lu244CB6L+c56iL6LCD55So562J77yM5LuO6ICM5YGa5Yiw5LiA5Lu95Luj56CB5Y+v5Lul6ZqP5pe26ZqP5Zyw6KKr5ZCE56eN5pa55byP5L2/55So44CCCmAKc2VjdGlvbiAi5re75Yqg5Luj56CBIgpzcGFyayBgCnZpbWVyIOWRveS7pOaPkOS+m+S6huS7o+eggee8lui+keeahOWKn+iDve+8jOmAmui/hyBhdXRvZ2VuIOWtkOWRveS7pOWPr+S7peeUn+aIkOaooeWdl+eahOekuuS+i+S7o+eggeOAguWcqOatpOWfuuehgOS4iua3u+WKoOiHquW3seeahOS7o+eggeWNs+WPr+OAggrlpoLkuIvlkb3ku6TvvIzkvJroh6rliqjnlJ/miJDkuIDkuKogc3JjL2hpL2hpLmdvIOeahOaooeWdl+aWh+S7tu+8jOW5tuWcqCBzcmMvbWFpbi5nbyDkuK3lvJXnlKjmraTmqKHlnZfjgIIKYApzcGFyayBzaGVsbCBgdmltZXIgYXV0b2dlbiBtYWluIHNyYy9tYWluLmdvIG5hbWUgaGlgCmZpZWxkICJzcmMvaGkvaGkuZ28iIHdlYi5jb2RlLmlubmVyIHNwYXJrIGAKcGFja2FnZSBoaQoKaW1wb3J0ICgKCSJzaHlsaW51eC5jb20veC9pY2UiCikKCnR5cGUgaGkgc3RydWN0IHsKCWljZS5ab25lCn0KCmZ1bmMgKGggaGkpIExpc3QobSAqaWNlLk1lc3NhZ2UsIGFyZyAuLi5zdHJpbmcpIHsKCWguWm9uZS5MaXN0KG0sIGFyZy4uLikKfQoKZnVuYyBpbml0KCkgeyBpY2UuQ21kKCJ3ZWIuY29kZS5oaS5oaSIsIGhpe30pIH0KYAoKc2VjdGlvbiAi57yW6K+R6aG555uuIgpzcGFyayBgCnZpbWVyIOeahCBjb21waWxlIOWtkOWRveS7pO+8jOaPkOS+m+S6hue8luivkeeahOWKn+iDve+8jOe8luivkeaIkOWKn+WQju+8jOacjeWKoei/m+eoi+S8muiHquWKqOmHjeWQr+OAggpgCnNwYXJrIHNoZWxsIGB2aW1lciBjb21waWxlYAoKc2VjdGlvbiAi5omn6KGM5ZG95LukIgpzcGFyayBg5pyN5Yqh6YeN5ZCv5ZCO77yM5Y2z5Y+v6YCa6L+HIHdlYi5jb2RlLmhpLmhpIOWRveS7pOS9v+eUqOaWsOWKn+iDveOAgmluc2VydCDlrZDlkb3ku6Tlj6/ku6Xmt7vliqDmlbDmja7vvIzkuLvlkb3ku6Tmn6XnnIvmlbDmja7jgIJgCnNwYXJrIHNoZWxsIGB3ZWIuY29kZS5oaS5oaSBpbnNlcnQgem9uZSBoaSB0ZXh0IGhlbGxvYApzcGFyayBzaGVsbCBgd2ViLmNvZGUuaGkuaGlgCgpjaGFwdGVyICLliJvlu7rnvZHnq5kiCnNwYXJrIGAK6YCa6L+HIGNvbnRleHRzIOWQr+WKqOS6huWkmuS4quepuumXtOOAgea3u+WKoOS6huWkmuS4quWRveS7pOWQju+8jOWwseWPr+S7peWwhui/meS6m+WFg+e0oOW/q+mAn+e7hOijheaIkOWQhOenjee9kemhte+8jOS7juiAjOWIm+W7uuWHuuWQhOenjeWQhOagt+eahOe9keermeOAggpgCnNwYXJrIGBjb250ZXh0cyDpgJrov4fkuIDnp43pnZ7luLjnroDljZXnmoTmj4/ov7DmgKfor63oqIDvvIznlKjnuq/mlofmnKznmoTmlrnlvI/lrprkuYnnvZHnq5njgIJgCnNwYXJrIGDlnKjnm67lvZUgc3JjL3dlYnNpdGUvIOS4i+WIm+W7uuaWh+S7tiBoaS50eHTvvIzmiZPlvIAgPGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo5MDIwL2NoYXQvd2Vic2l0ZS9oaS50eHQiPjwvYT4g5Y2z5Y+v5p+l55yL6Ieq5Yqo55Sf5oiQ55qE572R6aG1YApmaWVsZCAic3JjL3dlYnNpdGUvaGkudHh0IiB3ZWIuY29kZS5pbm5lciBzcGFyayBgCuezu+e7n+euoeeQhgoJ57O757uf5ZG95LukCgkJY2xpLnJ1bnRpbWUKCQljbGkuc3lzdGVtCgkJY2xpLnFyY29kZQoJ5paH5Lu25ZG95LukCgkJbmZzLmRpcgoJCW5mcy5jYXQKCQluZnMudGFpbApgCgpzcGFyayBgCnNyYy93ZWJzaXRlLyDnm67lvZXmmK/lm7rlrprnmoTvvIxjb250ZXh0cyDlj6rkvJrlr7nmraTnm67lvZXnmoQgdHh0IOaWh+S7tui/m+ihjOino+aekOOAggrmr4/kuIDooYzpg73mmK/kuIDkuKrmoJHnmoToioLngrnvvIzpgJrov4fnvKnov5vku6PooajlsYLnuqfvvIzpgJrov4cga2V5IHZhbHVlIOeahOW9ouW8j+mZhOWKoOWQhOenjeWxnuaAp+OAggrliIblj4noioLngrnpg73kvJrmt7vliqDliLDlr7zoiKrmoI/nmoTnu5PmnoTmoJHkuK3vvIzkvZzkuLrlr7zoiKrpgInpobnvvIzlj7blrZDoioLngrnpg73kvJroh6rliqjop6PmnpDmiJDnu4Tku7bmt7vliqDliLDlt6XkvZzlj7DkuK3jgIIK5b2T5a+86Iiq5qCP6YCJ5Lit5Lu75oSP5Liq5YiG5Y+J6IqC54K55pe277yM5YW25Y+25a2Q6IqC54K555qE5ZG95Luk6Kej5p6Q55qE57uE5Lu277yM5Lya6Ieq5Yqo5pi+56S65Yiw5bel5L2c5Y+w5Lit44CCCmAKc3BhcmsgYOeUn+aIkOe9kemhteeahOmihOiniOaViOaenOWmguS4i2AKc3BhcmsgZmllbGQgYArns7vnu5/nrqHnkIYKCeezu+e7n+WRveS7pAoJCWNsaS5ydW50aW1lCgkJY2xpLnN5c3RlbQoJCWNsaS5xcmNvZGUKCeaWh+S7tuWRveS7pAoJCW5mcy5kaXIKCQluZnMuY2F0CgkJbmZzLnRhaWwKYAoKY2hhcHRlciAi5Yib5bu6576k57uEIgpzcGFyayBgCmNvbnRleHRzIOS4reeahOi1hOa6kOaYr+S7pee+pOe7hOeahOaWueW8j+i/m+ihjOe7hOe7h++8jOWDj+iBiuWkqei9r+S7tueahOe+pOe7hOS4gOagt++8jArnlKjmiLflj6/ku6XliJvlu7rku7vmhI/nmoTnvqTnu4TvvIznhLblkI7lsIbnm7jlhbPnmoTkurrlkZjjgIHlt6XlhbfjgIHotYTmupDnrYnlhajpg73mt7vliqDov5vljrvjgIIK5q+P5Liq576k57uE5LiL5Y+v5Lul5Yib5bu65aSa5Liq5bqU55So77yM5q+P5Liq5bqU55So5LiL5Y+v5Lul5re75Yqg5aSa5Liq5ZG95Luk44CCCuWcqOiPnOWNleagj+WSjOWPs+mUruiPnOWNleS4reWPr+S7peeci+WIsOWQhOenjeWIm+W7uumAiemhue+8jOi+k+WFpeebuOWFs+eahOS/oeaBr+WNs+WPr+WIm+W7uuOAggpgCnNwYXJrIHNoZWxsIGByaXZlciBjcmVhdGUgdHlwZSBwdWJsaWMgbmFtZSBkZW1vYAoKY2hhcHRlciAi5YWx5Lqr5bqU55SoIgpzcGFyayBgCuWQhOenjei1hOa6kO+8jOWmgue+pOe7hOOAgeW6lOeUqOOAgeW3peWFt+etie+8jOmDveWPr+S7peS4gOmUruWFseS6q++8jOWunueOsOWkmuS6uueahOWcqOe6v+WNj+WQjO+8jOS7juiAjOmZjeS9juayn+mAmuaIkOacrO+8jOaPkOWNh+W3peS9nOaViOeOh+OAggrlnKjoj5zljZXmoI/lkozlj7PplK7oj5zljZXkuK3lj6/ku6XnnIvliLDlkITnp43lhbHkuqvpgInpobnvvIzovpPlhaXnm7jlhbPnmoTkv6Hmga/ljbPlj6/kuIDplK7liIbkuqvjgIIKYAoKY2hhcHRlciAi5re75Yqg6K6+5aSHIgpzcGFyayBgCmNvbnRleHRzIOi/mOaUr+aMgeWkmuiuvuWkh+e7hOW7uumbhue+pO+8jOS7u+aEj+acjeWKoeiKgueCuemDveWPr+S7peS9nOS4uuS7o+eggeacjeWKoeWZqOOAgemVnOWDj+acjeWKoeWZqOOAgeiupOivgeacjeWKoeWZqOOAgeS7o+eQhuacjeWKoeWZqOOAgeaWh+S7tuacjeWKoeWZqOetieOAggrlpJrlj7Dpg6jnvbLkuoYgY29udGV4dHMg55qE6K6+5aSH77yM5Y+v5Lul5Lu75oSP57uE57uH572R57uc57uT5p6E77yM5q+P5Liq6IqC54K56YO95Y+v5Lul5Y2V54us5o+Q5L6b5omA5pyJ5pyN5Yqh77yM5Lmf5Y+v5Lul6K6/6Zeu5YW25a6D6IqC54K55LiK55qE5omA5pyJ5Yqf6IO944CCCmAKCg==",
        "src/help/tutor/func.shy": "cHJlbWVudQoKdGl0bGUgIuWkmuWKn+iDvSIKZmllbGQgIuaooeWdlyIgY29udGV4dApmaWVsZCAi5qih5Z2XIiBjb21tYW5kCgpjaGFwdGVyICLorqHliJIiCmZpZWxkICLorqHliJIiIHdlYi50ZWFtLnBsYW4KCmNoYXB0ZXIgIuebuOWGjCIKZmllbGQgIuebuOWGjCIgd2ViLndpa2kuZmVlbAoKY2hhcHRlciAi57uY5Zu+IgpmaWVsZCAi57uY5Zu+IiB3ZWIud2lraS5kcmF3CgpjaGFwdGVyICLnvJbnqIsiCmZpZWxkICLnvJbovpHlmagiIHdlYi5jb2RlLnZpbWVyCmZpZWxkICLotovlir/lm74iIHdlYi5jb2RlLmdpdC50cmVuZCBhcmdzIGBpY2ViZXJnc2AKZmllbGQgIuaetuaehOWbviIgd2ViLmNvZGUuZ2l0LnNwaWRlIGFyZ3MgYGljZWJlcmdzYAoKCg==",
        "src/help/tutor/node.shy": "Y2hhcHRlciAi5aSa6K6+5aSHIgoKZmllbGQgIuepuumXtOermSIgc3BhY2UKCg==",
        "src/help/tutor/task.shy": "Y2hhcHRlciAi5aSa5Lu75YqhIgoKZmllbGQgIuaipuaDs+WutiIgZHJlYW0KCgo=",
        // "src/help/tutor/tutor.shy": "",
        "src/help/tutor/user.shy": "Y2hhcHRlciAi5aSa55So5oi3IgoKZmllbGQgIueUqOaItyIgdXNlcgoKCg==",
        "src/hi/hi.go": "cGFja2FnZSBoaQoKaW1wb3J0ICgKCSJzaHlsaW51eC5jb20veC9pY2UiCikKCnR5cGUgaGkgc3RydWN0IHsKCWljZS5ab25lCgoJbGlzdCBzdHJpbmcgYG5hbWU6Imxpc3Qgem9uZSBpZCBhdXRvIGluc2VydCIgaGVscDoi56S65L6LImAKfQoKZnVuYyAocyBoaSkgU2hvdyhtICppY2UuTWVzc2FnZSwgYXJnIC4uLnN0cmluZykgewoJbS5FY2hvKCJoZWxsbyB3b3JsZCIpCgltLlN0YXR1c1RpbWUoKQp9CgpmdW5jIChzIGhpKSBMaXN0KG0gKmljZS5NZXNzYWdlLCBhcmcgLi4uc3RyaW5nKSB7CglzLlpvbmUuTGlzdFBhZ2UobSwgYXJnLi4uKQoJbS5FY2hvKCJoZWxsbyB3b3JsZCIpCn0KCmZ1bmMgaW5pdCgpIHsgaWNlLkNtZCgid2ViLmNvZGUuaGkuaGkiLCBoaXt9KSB9Cg==",
        "src/hi/hi.js": "Vm9sY2Fub3MoIm9uaW1wb3J0Iiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJbXNnLkR1bXAoY2FuKQp9fSk=",
        "src/hi/hi.py": "cHJpbnQgImhlbGxvIHdvcmxkIgpwcmludCAiaGVsbG8gd29ybGQi",
        "src/hi/hi.sh": "IyEgL2Jpbi9zaAoKX2xpc3QKZWNobwoKX2xpc3QgaGkKZWNobwoKX2xpc3QgaGkgMQplY2hvCgplY2hvICJoZWxsbyB3b3JsZCIK",
        "src/hi/hi.shy": "Y2hhcHRlciAiaGkiCgpjaGFpbiBgCmNvbnRleHRzCgl2b2xjYW5vcwoJdm9sY2Fub3MKCQlsaWIKCQlwYWdlCgkJcGFuZWwKCQlwdWJsaXNoCglpY2ViZXJncwoJCWJhc2UKCQljb3JlCgkJbWlzYwoJdG9vbGtpdHMKYCBzaGlwLnN0cm9rZS13aWR0aCAxIGxpbmUuc3Ryb2tlLXdpZHRoIDEKCmNoYXJ0IHNlcXVlbmNlIGAKZmUgYmUgb3MgaGQKMCBjYWxsIDEgc29tZSAzCjAgY2FsbCAxIHNvbWUgMwowIGNhbGwgMSBzb21lIDMKMCBjYWxsIDEgc29tZSAzCjAgY2FsbCAxIHNvbWUgMwpgIG1hcmdpbnggODAKCmZpZWxkIGNsaS5zeXN0ZW0K",
        "src/main.go": "cGFja2FnZSBtYWluCgppbXBvcnQgKAoJInNoeWxpbnV4LmNvbS94L2ljZSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvYWxwaGEiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL2Nocm9tZSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvY29kZXIiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL2lucHV0IgoKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvamF2YSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvbGFyayIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvbXAiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL25vZGUiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL3dld29yayIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2Mvd3giCgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9jb21waWxlIgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9ncmFmYW5hIgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9wcm9qZWN0IgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9wcm9tZXRoZXVzIgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9ydW50aW1lIgoKCV8gInNoeWxpbnV4LmNvbS94L215c3FsLXN0b3J5L3NyYy9jbGllbnQiCglfICJzaHlsaW51eC5jb20veC9teXNxbC1zdG9yeS9zcmMvc2VhcmNoIgoJXyAic2h5bGludXguY29tL3gvbXlzcWwtc3Rvcnkvc3JjL3NlcnZlciIKCV8gInNoeWxpbnV4LmNvbS94L25naW54LXN0b3J5L3NyYy9zZXJ2ZXIiCglfICJzaHlsaW51eC5jb20veC9yZWRpcy1zdG9yeS9zcmMvY2xpZW50IgoJXyAic2h5bGludXguY29tL3gvcmVkaXMtc3Rvcnkvc3JjL3NlcnZlciIKKQoKZnVuYyBtYWluKCkgeyBwcmludChpY2UuUnVuKCkpIH0K",
        "src/main.js": "Vm9sY2Fub3MoIm9uaW1wb3J0Iiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCWNhbi5vbmFjdGlvbi5zaG93KGNhbiwgbXNnKQoJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRHVtcChjYW4pCn19KQpWb2xjYW5vcygib25hY3Rpb24iLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIHNob3c6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7Cgltc2cuUHVzaCgiaGkiLCAiaGVsbG8iKQoJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKfX0pCg==",
        "src/main.shy": "dGl0bGUgImNvbnRleHRzIgpyZWZlciBgCuWumOe9kSBodHRwczovL2NvbnRleHRzLmNvbS5jbgrmlofmoaMgaHR0cHM6Ly9jb250ZXh0cy5jb20uY24vaGVscC8K5rqQ56CBIGh0dHBzOi8vc2h5bGludXguY29tL3gvY29udGV4dHMKYAoKY2hhcHRlciAi5a6e6Le1IgpsYWJlbCBgCmNvZGUgd2lraSBjaGF0IHRlYW0gbWFsbApsaW51eCBuZ2lueCBjb250ZXh0IHJlZGlzIG15c3FsCmJhc2ggZ2l0IGdvbGFuZyB2aW0gdG11eApgCgpjaGFwdGVyICLnkIborroiCmxhYmVsIGAK6ZuG576k5YyWIOaooeWdl+WMliDoh6rliqjljJYKYCBmZyB5ZWxsb3cgYmcgYmxhY2sgdGV4dC5mb250LWZhbWlseSBub25lCgpjaGFwdGVyICLpobnnm64iCmxhYmVsIGAKaW50c2hlbGwgaWNlYmVyZ3Mgdm9sY2Fub3MKY29udGV4dHMgdG9vbGtpdHMgbGVhcm5pbmcKYCBmZyByZWQgYmcgYmxhY2sKCnNlY3Rpb24gIueBq+WxseaetiIKZmllbGQgIui2i+WKv+WbviIgd2ViLmNvZGUuZ2l0LnRyZW5kIGFyZ3MgYHZvbGNhbm9zYApmaWVsZCAi5p625p6E5Zu+IiB3ZWIuY29kZS5naXQuc3BpZGUgYXJncyBgdm9sY2Fub3NgCgpzZWN0aW9uICLlhrDlsbHmnrYiCmZpZWxkICLotovlir/lm74iIHdlYi5jb2RlLmdpdC50cmVuZCBhcmdzIGBpY2ViZXJnc2AKZmllbGQgIuaetuaehOWbviIgd2ViLmNvZGUuZ2l0LnNwaWRlIGFyZ3MgYGljZWJlcmdzYAoKc2VjdGlvbiAi56We5Yac5p62IgpmaWVsZCAi6LaL5Yq/5Zu+IiB3ZWIuY29kZS5naXQudHJlbmQgYXJncyBgaW50c2hlbGxgCmZpZWxkICLmnrbmnoTlm74iIHdlYi5jb2RlLmdpdC5zcGlkZSBhcmdzIGBpbnRzaGVsbGAKCnNwYXJrIG1kIFJFQURNRS5tZAoKc291cmNlICIuLi91c3IvaWNlYmVyZ3MvY29yZS9jaGF0L2xvY2F0aW9uLnNoeSIKc291cmNlICIuLi91c3IvaWNlYmVyZ3MvY29yZS9jb2RlL3h0ZXJtLnNoeSIKCnNvdXJjZSBoYXNoL2hhc2guc2h5",
        "src/main.svg": "PHN2ZyB2ZXJ0aW9uPSIxLjEiIHhtbG5zPSJodHRwczovL3d3dy53My5vcmcvMjAwMC9zdmciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIGhlaWdodD0iMzg1IiB3aWR0aD0iNzUwIiBjb3VudD0iMTkiIHBpZD0icDE5IiBncmlkPSIxMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9InllbGxvdyIgZmlsbD0icHVycGxlIiBmb250LXNpemU9IjI0Ij48Zz48cmVjdCBoZWlnaHQ9IjQwIiB3aWR0aD0iMTIwIiByeT0iNCIgcng9IjQiIHg9IjMwMCIgeT0iNDAiIHBpZD0icDEiIGNsYXNzPSJwMSIgdGV4dD0icDIiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3A3JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDgmcXVvdDssJnF1b3Q7d2hpY2gmcXVvdDs6MSwmcXVvdDthbmNob3ImcXVvdDs6OH0seyZxdW90O3BpZCZxdW90OzomcXVvdDtwOSZxdW90OywmcXVvdDt3aGljaCZxdW90OzoxLCZxdW90O2FuY2hvciZxdW90Ozo4fSx7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3AxMCZxdW90OywmcXVvdDt3aGljaCZxdW90OzoxLCZxdW90O2FuY2hvciZxdW90Ozo4fV0iIGluZGV4PSJjbGkuc3lzdGVtIiBhcmdzPSJwd2QiPjwvcmVjdD48dGV4dCB4PSIzNjAiIHk9IjYwIiBwaWQ9InAyIiBjbGFzcz0icDIiPnNoeTwvdGV4dD48L2c+PHJlY3QgaGVpZ2h0PSI0MCIgd2lkdGg9IjEyMCIgcnk9IjQiIHJ4PSI0IiB4PSI0OTAiIHk9IjE2MCIgdGV4dD0icDUiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3AxMCZxdW90OywmcXVvdDt3aGljaCZxdW90OzoyLCZxdW90O2FuY2hvciZxdW90OzoyfV0iIHBpZD0icDE5IiBjbGFzcz0icDE5IiBpbmRleD0id2ViLnJvdXRlIj48L3JlY3Q+PHJlY3QgaGVpZ2h0PSI0MCIgd2lkdGg9IjEyMCIgcnk9IjQiIHJ4PSI0IiB4PSIzMDAiIHk9IjE2MCIgdGV4dD0icDQiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3A5JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE0JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE1JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE2JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9XSIgcGlkPSJwMTciIGNsYXNzPSJwMTciIGluZGV4PSJjbGkucnVudGltZSI+PC9yZWN0PjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iMTEwIiB5PSIxNjAiIHRleHQ9InAzIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwOCZxdW90OywmcXVvdDt3aGljaCZxdW90OzoyLCZxdW90O2FuY2hvciZxdW90OzoyfV0iIHBpZD0icDE4IiBjbGFzcz0icDE4Ij48L3JlY3Q+PHRleHQgeD0iMTcwIiB5PSIxODAiIHBpZD0icDMiIGNsYXNzPSJwMyI+b2xkPC90ZXh0Pjx0ZXh0IHg9IjM2MCIgeT0iMTgwIiBwaWQ9InA0IiBjbGFzcz0icDQiPmRldjwvdGV4dD48dGV4dCB4PSI1NTAiIHk9IjE4MCIgcGlkPSJwNSIgY2xhc3M9InA1Ij5jb208L3RleHQ+PGc+PC9nPjxsaW5lIHgxPSIzNjAiIHkxPSI4MCIgeDI9IjM2MCIgeTI9IjgwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwNyIgY2xhc3M9InA3Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjgwIiB4Mj0iMTcwIiB5Mj0iMTYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwOCIgY2xhc3M9InA4Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjgwIiB4Mj0iMzYwIiB5Mj0iMTYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwOSIgY2xhc3M9InA5Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjgwIiB4Mj0iNTUwIiB5Mj0iMTYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwMTAiIGNsYXNzPSJwMTAiPjwvbGluZT48ZyBjbGFzcz0ibWFjIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iYmxhY2siIGZpbGw9ImN5YW4iIGZvbnQtc2l6ZT0iMjQiIHN0eWxlPSJvcGFjaXR5OiAxOyBkaXNwbGF5OiBibG9jazsiPjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iMzAwIiB5PSIyNjAiIHRleHQ9InAxMSIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE1JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9XSI+PC9yZWN0Pjx0ZXh0IHg9IjM2MCIgeT0iMjgwIiBwaWQ9InAxMSIgY2xhc3M9InAxMSI+TUIyPC90ZXh0PjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iNDkwIiB5PSIyNjAiIHRleHQ9InAxMyIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE2JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9XSI+PC9yZWN0PjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iMTEwIiB5PSIyNjAiIHRleHQ9InAxMiIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE0JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9XSI+PC9yZWN0Pjx0ZXh0IHg9IjE3MCIgeT0iMjgwIiBwaWQ9InAxMiIgY2xhc3M9InAxMiI+TUIxPC90ZXh0Pjx0ZXh0IHg9IjU1MCIgeT0iMjgwIiBwaWQ9InAxMyIgY2xhc3M9InAxMyI+TUIwPC90ZXh0PjxsaW5lIHgxPSIzNjAiIHkxPSIyMDAiIHgyPSIxNzAiIHkyPSIyNjAiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90OyZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwMTQiIGNsYXNzPSJwMTQiPjwvbGluZT48bGluZSB4MT0iMzYwIiB5MT0iMjAwIiB4Mj0iMzYwIiB5Mj0iMjYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7JnF1b3Q7fV0iIHBpZD0icDE1IiBjbGFzcz0icDE1Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjIwMCIgeDI9IjU1MCIgeTI9IjI2MCIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7JnF1b3Q7fSx7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90OyZxdW90O31dIiBwaWQ9InAxNiIgY2xhc3M9InAxNiI+PC9saW5lPjwvZz48L3N2Zz4=",
        "src/relay.go": "cGFja2FnZSBtYWluCgppbXBvcnQgKAoJIm9zIgoJInBhdGgiCgoJInNoeWxpbnV4LmNvbS94L2ljZSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2Mvc3NoIgopCgpmdW5jIG1haW4oKSB7CglkZWZlciBmdW5jKCkgeyByZWNvdmVyKCkgfSgpCglhcmdzIDo9IFtdc3RyaW5neyJzc2guY29ubmVjdCIsICJvcGVuIiwgImF1dGhmaWxlIiwgcGF0aC5Kb2luKG9zLkdldGVudigiSE9NRSIpLCAiLnNzaC8iLCBwYXRoLkJhc2Uob3MuQXJnc1swXSkrIi5qc29uIil9CglwcmludChpY2UuUnVuKGFwcGVuZChhcmdzLCBvcy5BcmdzWzE6XS4uLikuLi4pKQp9Cg==",
        "src/webview.go": "cGFja2FnZSBtYWluCgppbXBvcnQgKAoJIm9zIgoJInRpbWUiCgoJInNoeWxpbnV4LmNvbS94L2ljZSIKCSJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL3dlYnZpZXciCglraXQgInNoeWxpbnV4LmNvbS94L3Rvb2xraXRzIgopCgp0eXBlIHZpZXcgc3RydWN0eyAqd2Vidmlldy5XZWJWaWV3IH0KCmZ1bmMgbWFpbigpIHsKCW9zLkNoZGlyKGtpdC5Ib21lUGF0aCgiY29udGV4dHMiKSkKCWdvIGljZS5SdW4oInNlcnZlIiwgInN0YXJ0IikKCXRpbWUuU2xlZXAodGltZS5TZWNvbmQpCgoJd2Vidmlldy5SdW4oZnVuYyh3ICp3ZWJ2aWV3LldlYlZpZXcpIGludGVyZmFjZXt9IHsgcmV0dXJuIHZpZXd7d30gfSkKfQo=",

        "etc/miss.sh": "IyEvYmluL2Jhc2gKCnJlcXVpcmUgJj4vZGV2L251bGwgfHwgaWYgWyAtZiAkUFdELy5pc2gvcGx1Zy5zaCBdOyB0aGVuIHNvdXJjZSAkUFdELy5pc2gvcGx1Zy5zaDsgZWxpZiBbIC1mICRIT01FLy5pc2gvcGx1Zy5zaCBdOyB0aGVuIHNvdXJjZSAkSE9NRS8uaXNoL3BsdWcuc2g7IGVsc2UKCWN0eF90ZW1wPSQobWt0ZW1wKTsgaWYgY3VybCAtaCAmPi9kZXYvbnVsbDsgdGhlbiBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCBodHRwczovL3NoeWxpbnV4LmNvbTsgZWxzZSB3Z2V0IC1PICRjdHhfdGVtcCAtcSBodHRwOi8vc2h5bGludXguY29tOyBmaTsgc291cmNlICRjdHhfdGVtcCBpbnRzaGVsbApmaQoKcmVxdWlyZSBzeXMvY2xpL2ZpbGUuc2gKaXNoX3N5c19wYXRoX2xvYWQKClsgLWYgfi8uYmFzaF9wcm9maWxlIF0gfHwgZWNobyAic291cmNlIH4vLmJhc2hyYyIgPj4gfi8uYmFzaF9wcm9maWxlCmlzaF9zeXNfbGlua19jcmVhdGUgfi8uYmFzaF9sb2NhbCAkUFdEL2V0Yy9jb25mL2Jhc2hfbG9jYWwuc2gKCnJlcXVpcmUgbWlzcy5zaAppc2hfbWlzc19wcmVwYXJlX2NvbXBpbGUKaXNoX21pc3NfcHJlcGFyZV9kZXZlbG9wCmlzaF9taXNzX3ByZXBhcmVfaW5zdGFsbAoKIyBpc2hfbWlzc19wcmVwYXJlIHdvcmQtZGljdAojIGlzaF9taXNzX3ByZXBhcmUgd3ViaS1kaWN0Cgppc2hfbWlzc19wcmVwYXJlIGxpbnV4LXN0b3J5CmlzaF9taXNzX3ByZXBhcmUgbmdpbngtc3RvcnkKaXNoX21pc3NfcHJlcGFyZSBnb2xhbmctc3RvcnkKaXNoX21pc3NfcHJlcGFyZSByZWRpcy1zdG9yeQppc2hfbWlzc19wcmVwYXJlIG15c3FsLXN0b3J5CmlzaF9taXNzX3ByZXBhcmUgcmVsZWFzZQoKaXNoX21pc3NfcHJlcGFyZV9jb250ZXh0cwppc2hfbWlzc19wcmVwYXJlX2ludHNoZWxsCmlzaF9taXNzX3ByZXBhcmVfaWNlYmVyZ3MKaXNoX21pc3NfcHJlcGFyZV90b29sa2l0cwppc2hfbWlzc19wcmVwYXJlX3ZvbGNhbm9zCmlzaF9taXNzX3ByZXBhcmVfbGVhcm5pbmcKCmlzaF9taXNzX21ha2U7IGlmIFsgLW4gIiQqIiBdOyB0aGVuIC4vYmluL2ljZS5iaW4gZm9yZXZlciBzZXJ2ZSAiJEAiOyBmaQoKaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW1fbG9jYWwudmltICRQV0QvZXRjL2NvbmYvdmltX2xvY2FsLnZpbQpyZXF1aXJlIGRldi92aW0vdmltLnNoCmlzaF9kZXZfdmltX3ByZXBhcmUKCmlmIHRtdXggLVY7IHRoZW4KICAgIHJlcXVpcmUgZGV2L3RtdXgvdG11eC5zaAogICAgaXNoX2Rldl90bXV4X3ByZXBhcmUKICAgIGlzaF9taXNzX3ByZXBhcmVfc2Vzc2lvbiBtaXNzIG1pc3MKZWxzZQogICAgY3R4X2xvZz0vZGV2L3N0ZG91dCBpc2hfbWlzc19zZXJ2ZQpmaQoK",
        "etc/init.shy": "fmNsaSAKCSMgcnVudGltZSBtYXhwcm9jcyAxCgp+YWFhIAoJcm9sZSB3aGl0ZSB2b2lkIHdlYi5jb2RlLmlubmVyCglyb2xlIHdoaXRlIHZvaWQgd2ViLmNvZGUuZ2l0LnNwaWRlCglyb2xlIHdoaXRlIHZvaWQgd2ViLmNvZGUuZ2l0LnRyZW5kCglyb2xlIHdoaXRlIHZvaWQgd2ViLmNvZGUuaW5wdXQuZmluZAoJcm9sZSB3aGl0ZSB2b2lkIHdlYi53aWtpLmFscGhhLmZpbmQKCXJvbGUgd2hpdGUgdm9pZCB3ZWIud2lraS53b3JkCglyb2xlIHdoaXRlIHZvaWQgd2ViLndpa2kuZHJhdwoKfndlYi5jb2RlCgl3ZWJwYWNrIGluc2VydCB4dGVybS9jc3MveHRlcm0uY3NzCgl3ZWJwYWNrIGluc2VydCB4dGVybQoJd2VicGFjayBpbnNlcnQgeHRlcm0tYWRkb24tZml0Cgl3ZWJwYWNrIGluc2VydCB4dGVybS1hZGRvbi13ZWItbGlua3MKCn53ZWIuY29kZQoJY29uZmlnIGlubmVyIG1ldGEuc2hvdy50YWJzICIiCgljb25maWcgaW5uZXIgbWV0YS5zaG93LmV4dHMgImlubmVyL3NlYXJjaC5qcz9hPTEiCgljb25maWcgaW5uZXIgbWV0YS5zaG93LnBsdWcgIiIKCWNvbmZpZyB2aW1lciBtZXRhLnNob3cudGFicyAiIgoJY29uZmlnIHZpbWVyIG1ldGEuc2hvdy5leHRzICJpbm5lci9zZWFyY2guanM/YT0xLGlubmVyL2Zhdm9yLmpzIgoJY29uZmlnIHZpbWVyIG1ldGEuc2hvdy5wbHVnICJ3ZWIuY29kZS50bXV4LnNlc3Npb24sd2ViLmNvZGUuZ2l0LnN0YXR1cyx3ZWIuY29kZS54dGVybSxjbGkuc3lzdGVtIgoKfndlYi5jb2RlLmlucHV0CgkjIHd1YmkgbG9hZCBmaWxlIHVzci93dWJpLWRpY3Qvd3ViaTg2Cgl3dWJpIGxvYWQgZmlsZSB1c3Ivd3ViaS1kaWN0L3BlcnNvbiB6b25lIHBlcnNvbgoKfmdkYgoJIyBjb25maWcgdGltZXIgbWV0YS5lbmFibGUgdHJ1ZQoJZXZlbnQgYWN0aW9uIGxpc3RlbiBldmVudCBkcmVhbS5jcmVhdGUgY21kIHdlYi5jb2RlLnRtdXguc2Vzc2lvbgoKfnNzaAoJdGFyZ2V0IHdlYi5jaGF0Cgl0YXJnZXQgd2ViLmNvZGUKCXNvdXJjZSBsb2NhbC5zaHkKCn5tZGIKCn5uZnMKCn50Y3AK",
        "etc/exit.shy": "fmFhYQo=",

        "LICENSE": "TUlUIExpY2Vuc2UKCkNvcHlyaWdodCAoYykgMjAyMCDnoIHnpZ4KClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwp0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwpmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsCmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgpJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUKU09GVFdBUkUuCg==",
        "Makefile": "ZXhwb3J0IENHT19FTkFCTEVEPTAKCnB1Ymxpc2ggPSB1c3IvcHVibGlzaC9pY2UuJChzaGVsbCBnbyBlbnYgR09PUykuJChzaGVsbCBnbyBlbnYgR09BUkNIKQpiaW5hcnlzID0gYmluL2ljZS5iaW4KCmFsbDogZGVmCglAZWNobyAmJiBkYXRlCglnbyBidWlsZCAtdiAtbyAke2JpbmFyeXN9IHNyYy9tYWluLmdvIHNyYy92ZXJzaW9uLmdvIHNyYy9iaW5wYWNrLmdvICYmIC4vJHtiaW5hcnlzfSBmb3JldmVyIHJlc3RhcnQgJj4vZGV2L251bGwKCW1rZGlyIC1wICQoZGlyICR7cHVibGlzaH0pICY+L2Rldi9udWxsOyBybSAke3B1Ymxpc2h9ICY+L2Rldi9udWxsOyBjcCAke2JpbmFyeXN9ICR7cHVibGlzaH0KCm1pcHNsZToKCUdPT1M9bGludXggR09BUkNIPW1pcHNsZSBnbyBidWlsZCAtbyB1c3IvcHVibGlzaC9pY2UubGludXgubWlwc2xlIHNyYy9tYWluLmdvIHNyYy92ZXJzaW9uLmdvIHNyYy9iaW5wYWNrLmdvCgphcm06CglHT09TPWxpbnV4IEdPQVJDSD1hcm0gZ28gYnVpbGQgLW8gdXNyL3B1Ymxpc2gvaWNlLmxpbnV4LmFybSBzcmMvbWFpbi5nbyBzcmMvdmVyc2lvbi5nbyBzcmMvYmlucGFjay5nbwoKZGVmOgoJQCBbIC1mIHNyYy92ZXJzaW9uLmdvIF0gfHwgZWNobyAicGFja2FnZSBtYWluIiA+IHNyYy92ZXJzaW9uLmdvCglAIFsgLWYgc3JjL2JpbnBhY2suZ28gXSB8fCBlY2hvICJwYWNrYWdlIG1haW4iID4gc3JjL2JpbnBhY2suZ28KCmFwcDoKCUNHT19FTkFCTEVEPTEgZ28gYnVpbGQgLW8gdXNyL3B1Ymxpc2gvY29udGV4dHMuYXBwL0NvbnRlbnRzL01hY09TL2NvbnRleHRzIHNyYy93ZWJ2aWV3LmdvIHNyYy9iaW5wYWNrLmdvICYmIG9wZW4gdXNyL3B1Ymxpc2gvY29udGV4dHMuYXBwCgkjIGhkaXV0aWwgY3JlYXRlIHVzci9wdWJsaXNoL3RtcC5kbWcgLW92IC12b2xuYW1lICJDb250ZXh0c0luc3RhbGwiIC1mcyBIRlMrIC1zcmNmb2xkZXIgInVzci9wdWJsaXNoL2NvbnRleHRzLmFwcCIKCSMgcm0gLWYgdXNyL3B1Ymxpc2gvQ29udGV4dHNJbnN0YWxsLmRtZwoJIyBoZGl1dGlsIGNvbnZlcnQgdXNyL3B1Ymxpc2gvdG1wLmRtZyAtZm9ybWF0IFVEWk8gLW8gdXNyL3B1Ymxpc2gvQ29udGV4dHNJbnN0YWxsLmRtZwoKJTogc3JjLyUuZ28KCUBlY2hvICYmIGRhdGUKCWdvIGJ1aWxkIC12IC1vIHVzci9wdWJsaXNoLyRAIHNyYy8kQC5nbyAmJiBjaG1vZCB1K3ggdXNyL3B1Ymxpc2gvJEAKCg==",
        "README.md": "IyBjb250ZXh0cwoKY29udGV4dHMg6YCa6L+H6ZuG576k5YyW44CB5qih5Z2X5YyW44CB6Ieq5Yqo5YyW55qE5pa55byP77yM55So5LiA5LiqIDIwTSDnmoTnqIvluo/mlofku7bvvIwg5bCx5Y+v5Lul5Zyo5ZCE56eN6K6+5aSH5LiK77yM5LiA6ZSu5pCt6LW35a6M5pW055qE5LqR6K6h566X5LiO5LqR56CU5Y+R5pyN5Yqh44CCCgojIyDlronoo4Xpobnnm64KCmBgYHNoCmN0eF90ZW1wPSQobWt0ZW1wKTsgY3VybCAtbyAkY3R4X3RlbXAgLWZzU0wgaHR0cHM6Ly9zaHlsaW51eC5jb207IHNvdXJjZSAkY3R4X3RlbXAgYmluYXJ5IHBvcnQgOTAyMApgYGAKCiMjIOS9v+eUqOmhueebrgrlpoLmnpzmmK/mnKzlnLDlkK/liqjvvIznm7TmjqXlhY3nmbvlvZXmiZPlvIDnvZHpobXvvIxodHRwOi8vbG9jYWxob3N0OjkwMjAg77yMCuWmguaenOaYr+i/nOeoi+aIluWuueWZqOWQr+WKqO+8jOi+k+WFpeebuOW6lOWcsOWdgOWQju+8jOi+k+WFpem7mOiupOeahCB1c2VybmFtZTogcm9vdCBwYXNzd29yZDogcm9vdCDljbPlj6/nmbvlvZUKCg==",

	}

	for k, v := range pack {
		if b, e := base64.StdEncoding.DecodeString(v); e == nil {
			nfs.PackFile.WriteFile(k, b)
		}
	}

}
