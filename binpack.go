package ice

import (
	"encoding/base64"
	ice "shylinux.com/x/icebergs"
	"shylinux.com/x/icebergs/base/nfs"
)

func init() {

	pack := ice.Maps{
        "usr/volcanos/favicon.ico": "AAABAAEAgIAAAAEAIAAoCAEAFgAAACgAAACAAAAAAAEAAAEAIAAAAAAAAAABABILAAASCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAABAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAMAAAACAAAAAQAAAAEAAAABAAAAAQAAAAIAAAADAAAAAgAAAAIAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAIAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAAEAAAABAAAAAUAAAAGAAAABwAAAAcAAAAJAAAACQAAAAoAAAALAAAADQAAAA0AAAAOAAAADwAAABEAAAARAAAAEgAAABQAAAAVAAAAFQAAABYAAAAWAAAAFwAAABcAAAAYAAAAGQAAABkAAAAaAAAAGQAAABoAAAAaAAAAGQAAABoAAAAZAAAAGQAAABgAAAAYAAAAGAAAABgAAAAXAAAAFgAAABUAAAAVAAAAFAAAABMAAAASAAAAEgAAABIAAAARAAAAEAAAAA8AAAAOAAAADQAAAAwAAAALAAAACgAAAAoAAAAIAAAACAAAAAYAAAAGAAAABQAAAAUAAAAEAAAABAAAAAMAAAADAAAAAgAAAAIAAAABAAAAAQAAAAIAAAACAAAAAgAAAAIAAAACAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAADAAAAAgAAAAMAAAAEAAAABAAAAAYAAAAGAAAACAAAAAoAAAAMAAAADwAAABAAAAARAAAAFQAAABcAAAAaAAAAGwAAACAAAAAiAAAAJQAAACcAAAAqAAAALgAAADIAAAA0AAAANgAAADoAAAA9AAAAQAAAAEIAAABEAAAARwAAAEkAAABLAAAATAAAAE8AAABQAAAAUQAAAFMAAABUAAAAVAAAAFUAAABVAAAAVQAAAFUAAABVAAAAVAAAAFMAAABSAAAAUQAAAFAAAABOAAAATQAAAEwAAABKAAAASgAAAEgAAABFAAAAQwAAAEIAAABAAAAAPwAAADwAAAA6AAAAOAAAADUAAAAyAAAALwAAACsAAAAoAAAAJQAAACIAAAAgAAAAHAAAABkAAAAXAAAAFAAAABEAAAAPAAAADAAAAAsAAAAKAAAACAAAAAYAAAAGAAAABQAAAAUAAAADAAAAAwAAAAIAAAADAAAAAgAAAAMAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAMAAAACAAAAAwAAAAUAAAAGAAAACAAAAAoAAAANAAAAEAAAABMAAAAWAAAAGgAAAB8AAAAlAAAAKgAAAC8AAAA0AAAAPAAAAEIAAABHAAAATAAAAFAAAABVAAAAWwAAAGAAAABmAAAAbAAAAG8AAAB2AAAAfAAAAH8AAACDAAAAhgAAAIsAAACPAAAAkgAAAJQAAACYAAAAmgAAAJsAAACeAAAAnwAAAKAAAACgAAAAoQAAAKEAAACgAAAAoAAAAKAAAACfAAAAngAAAJsAAACZAAAAmAAAAJYAAACUAAAAkwAAAI4AAACMAAAAigAAAIgAAACFAAAAgQAAAH4AAAB6AAAAdwAAAHQAAABvAAAAagAAAGYAAABhAAAAXAAAAFYAAABRAAAATAAAAEYAAABBAAAAOQAAADQAAAAuAAAAKgAAACUAAAAfAAAAHAAAABcAAAAUAAAAEgAAAA8AAAANAAAACgAAAAgAAAAIAAAABwAAAAUAAAAEAAAAAwAAAAIAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAAAQAAAAEAAAABgAAAAgAAAAKAAAADAAAAA8AAAASAAAAFgAAABsAAAAgAAAAJgAAAC0AAAAyAAAAOQAAAEEAAABLAAAAUQAAAFgAAABgAAAAaAAAAG8AAAB1AAAAfQAAAIYAAACNAAAAkwAAAJkAAACfAAAApQAAAKwAAACzAAAAuAAAALwAAADBAAAAxgAAAMkAAQDNAgIC0gUGBdkJCgniDhAN6RETEe8KCQXiBQUB3goKA+MODQXoHxsP8RweGPsYGxf7GBwX+xgbGPoZHBj6GRwX+hkbF/kXGxf3FhkV8xIVEusPEQ7iCgoI0QEBAMAAAAC9AAAAuwAAALYAAACyAAAArwAAAKsAAACnAAAAogAAAJ0AAACXAAAAkQAAAIwAAACGAAAAfwAAAHgAAABwAAAAaQAAAGEAAABZAAAAUAAAAEoAAABCAAAAOwAAADQAAAAuAAAAKQAAACQAAAAfAAAAGgAAABcAAAATAAAAEQAAAA8AAAANAAAACwAAAAkAAAAIAAAABgAAAAQAAAADAAAABAAAAAMAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAgAAAAIAAAAEAAAABgAAAAgAAAALAAAADQAAAA8AAAASAAAAFwAAABwAAAAhAAAAJgAAAC4AAAA1AAAAPQAAAEQAAABMAAAAVQAAAF8AAABnAAAAcAAAAHkAAACAAAAAhwAAAI8AAACaAAAAowAAAKgAAACwAAAAuAAAAL4AAADDAAAAygAAANEAAADWAAAA2gAAAN4EBQTnCgsK7w8RD/QTFRL5FxkW/BkdGP0aHRr+KSYT/yMhCf0jIgj+JSMJ/hwZC/4jJBv/HSEc/x0gHP8dIRz/HSAc/x4hHP8eIh3/HiAd/x0hHP8dIBz/HSAb/hseGv0dHhf6FhUM6wUEAtkAAADSAAAAzgAAAMoAAADGAAAAwQAAAL0AAAC5AAAAswAAAK4AAACoAAAAogAAAJwAAACVAAAAjAAAAIMAAAB8AAAAdAAAAGwAAABjAAAAWwAAAFIAAABLAAAAQwAAADwAAAA2AAAALwAAACgAAAAjAAAAHgAAABoAAAAWAAAAFAAAABIAAAAPAAAADgAAAA0AAAALAAAACQAAAAcAAAAGAAAABQAAAAUAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAACAAAAAgAAAAQAAAAGAAAACAAAAAsAAAAOAAAAEAAAABQAAAAYAAAAHgAAACMAAAApAAAAMAAAADgAAABBAAAASAAAAFEAAABbAAAAZAAAAGwAAAB2AAAAgAAAAIcAAACNAAAAlgAAAKIAAACpAAAArwAAALYAAAC/AAAAxAAAAMsAAADSAgIC2wkJCOYPEQ7wFRkU+BodGf0cHhv+HCAb/x4hHf8fIh7/HyIe/y0nF/8qJgz/JiUI/yUkB/8bGQb/KScb/ycpJP8nKib/Jikl/ycoJP8oKSX/Jykk/ycpJP8mKCP/JSch/yQlIf8jJiH/ICQg/x8iHf8gIhz+HyAZ+BoYDu0VEQfqEw8F4QMCAM8AAADJDQsF0AYGBccAAAC7AAAAtAAAAK8AAACpAAAAogAAAJsAAACTAAAAiQAAAIEAAAB6AAAAcQAAAGkAAABfAAAAVwAAAFAAAABIAAAAQQAAADkAAAAxAAAAKwAAACYAAAAhAAAAHQAAABkAAAAVAAAAEwAAABAAAAAOAAAADQAAAAwAAAAJAAAACQAAAAcAAAAFAAAABQAAAAQAAAADAAAAAgAAAAIAAAACAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAwAAAAQAAAAGAAAACAAAAAoAAAAMAAAAEAAAABUAAAAYAAAAHQAAACIAAAAoAAAALwAAADcAAAA/AAAARgAAAFAAAABbAAAAYwAAAGsAAABzAAAAfAAAAIQAAACMAAAAlgAAAJ8AAACnAAAArQAAALUBAQG+CQoJ0hETEeYXGxf2HB8b/B4gHf4fIx7/ICQf/yEjH/8jJSH/Jigj/ykrJv8vLCP/MykS/yYkCf8lJAf/JCMH/yQfEP87ODL/PDo0/z07Nv89OzX/PTs2/z07Nv89Ojb/PDk1/zo5NP84NzL/NzYx/zU1L/8yMS3/LzAq/ywsKP8oKiT/Jigi/iUjGP0dFQn9Kx4H/TQlCvctJQz4LCQM9iMeEeEPDwzIAwMDrQAAAKEAAACcAAAAlAAAAI0AAACFAAAAfgAAAHUAAABsAAAAYwAAAFsAAABTAAAASwAAAEMAAAA8AAAANgAAAC4AAAAoAAAAIwAAAB4AAAAaAAAAFgAAABMAAAAQAAAADgAAAAwAAAALAAAACQAAAAgAAAAGAAAABQAAAAQAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAACAAAAAgAAAAIAAAACAAAAAgAAAAMAAAADAAAABQAAAAcAAAAIAAAACwAAAA0AAAARAAAAFQAAABkAAAAeAAAAJAAAACoAAAAwAAAAOAAAAD8AAABHAAAATQAAAFYAAABgAAAAaAAAAG0AAAB1AAAAfQAAAIUGBwaaERMQwRgcGOcdIBz6HiEc/h8jH/8iJSH/JCci/ycpJf8tLSn/MTAs/zU0MP87OTP/Pz04/z8zIP8rJQz/JiQI/yUkB/8gHgf/PTQn/1BJQv9RSkT/UElE/1NKRf9TTEb/U0xG/1NMRv9TTEb/UEpE/1BJRP9PSEP/TUdB/0pEP/9HQT3/Qj45/z46Nv85NzP/MzMu/y8tJf8eGA3/JBcC/zsnB/84Kg3/MikO/jUqFPwmIhnpFBYTxAkKCZoAAAB8AAAAdQAAAG4AAABoAAAAYAAAAFgAAABQAAAASAAAAEIAAAA6AAAANAAAAC4AAAApAAAAJAAAAB4AAAAZAAAAFAAAABEAAAAPAAAADAAAAAoAAAAJAAAACAAAAAYAAAAEAAAABAAAAAMAAAADAAAAAwAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAQAAAAEAAAABAAAAAYAAAAIAAAACgAAAA0AAAAPAAAAEgAAABcAAAAbAAAAHwAAACMAAAApAAAALwAAADUAAAA5AAAAPgICAkYOEA5tGhwYtB0gHesfIh39ISQf/iMlIP8mJyL/KCol/y4uKf80Mi3/Ozgz/0E+Of9HQz3/S0VB/09JQ/9QSUL/PzAY/ykkCf8nJAf/JyQH/yMeDP9TSUD/WlJL/1pSTP9bUkz/W1NN/1xTTf9cVE3/XFNO/1xTTf9dVE7/XFNN/1xSTf9bUkz/WVFL/1dPSv9VTkj/UktG/05IQv9LRT//RkI8/0E8NP8pIhX/JRcE/zwkBf89Kgz/NSoP/zgsE/8zKxv+ICId8xocGr4QExB4AgICSAEBAEAAAAA7AAAANAAAAC8AAAArAAAAJgAAACIAAAAdAAAAGgAAABYAAAASAAAADwAAAA0AAAALAAAACAAAAAYAAAAFAAAABQAAAAQAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAACAAAAAgAAAAIAAAACAAAAAwAAAAMAAAADAAAABAAAAAYAAAAGAAAACAAAAAkAAAALAAAADAAAAA4AAAAPAAAAEQkKCBkYGhZDHSAcpR4iHfMgIx//ISQf/yUmIv8qLCf/LS8p/zMzLv85ODP/Qj06/0dEPv9MR0H/T0pE/1NMRv9VTUj/V09J/1BDNP83KRL/KCUH/yglBv8oJQb/MCgZ/1xUTf9eVVD/X1ZQ/2BWUP9gVlH/YFdQ/2BWUf9hV1H/YVZQ/2FXUf9hWFL/YVdR/2FXUf9fVlD/X1VQ/11UT/9cU07/WlFM/1hPSv9UTEf/UEpF/0tFPv8wJxv/JxkG/zwlBf9AKQz/OSwR/zstFP86LBv/JCQe/x8jHvYeIR21GRwYWQcIBhwCAgEVAAAAEgAAABAAAAAOAAAADQAAAAsAAAAKAAAACAAAAAcAAAAGAAAABAAAAAQAAAADAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAgAAAAIAAAACAAAAAQAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAgAAAAIAAAABAAAAAQAAAAIAAAADAAAAAxUWEwgdIRwtHyMelR8jHu0fIx//Iych/yYpJP8rKyb/MDEr/zc2Mf8+PDb/Qz87/0lEP/9OSEP/UUtG/1RNSP9XUEr/WFFL/1lRS/9aUkz/Tzso/zIlDf8tJQf/LCUG/ykjBv9BNir/X1ZQ/2BXUf9hV1L/YVdR/2FXUv9iWFL/YlhT/2JYU/9iWVP/YldT/2JZU/9jWlT/YlhT/2JZUv9iWVL/YVdR/2BXUf9eVVD/W1NN/1lSS/9YUEr/VE5I/1JKRP8yKR7/KBkG/z4kBf9CKQv/PSwV/z0uGP9ALx3/KSgi/yElIP8hJCD0HyMepSIkID0UFxQLAAAABAAAAAMAAAAEAAAAAwAAAAIAAAACAAAAAgAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACEkIAIgJSAUICQfciEjH+EgJB//IyYi/yYpJP8rKyf/MTEu/zg3Mv8/PTj/RUI8/0pEP/9NR0L/UEpF/1VNR/9VTkn/WFBL/1lSTP9aU0z/W1JN/1xUT/9MNiH/MyUM/zImBv8yJgb/LSII/1BEOf9hWFH/YVhS/2JYU/9hWFP/YlhT/2JYUv9iWFL/YllU/2JZU/9iWFP/Y1pT/2RbVf9jWVP/Y1pU/2NaVP9jWVL/YVdS/19WUP9eVU//XVRP/1pTTf9YUEv/VU5I/1NLRP8zKR7/LRsG/0AmBP9DKQz/Qi8Y/0QzHP9IMyL/Li0n/yUpI/8gJCH/ICUg7CAkIIUgJB8gGRwZBAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhJSAKICQfRiAkH74iJSH/Iygj/ycpJP8qLSj/LzEs/zc2MP8/PTj/RUE8/0dEPv9MRkL/T0lE/1JLRf9VTkj/V1BL/1dRS/9ZUkz/W1NN/1xUT/9dVE//XVFJ/0kzHP82Jwr/OCgH/zgoBv8xJA3/WE1E/19XUv9fV1L/YFdR/2FYU/9hWFL/YVhT/2FYUv9gWFL/YVhU/2JaVP9jWlT/YlpU/2NaVP9kWlT/Y1pU/2JZU/9jWlP/YVhS/19XUf9eVlD/XVVP/1lSS/9YUUv/VU5I/1VORv8wJBr/MB0F/0InBP9GLAz/STUf/0w5I/9OOCb/NTIs/ywvKv8nKSX/JCcj/yIlIdEiJiFYIycjDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIiYhFiEkH4YhJSD3IyYi/yUpJP8qLCj/Li8s/zM0MP87OTT/Qj45/0ZCPP9JRUD/TUhD/05JRP9QS0X/VE5I/1dQS/9ZUEz/WVJM/1pSTf9bVE//W1RO/1xUT/9bTUH/RzEa/zsnCf8/Kgf/PyoI/zgoFP9cUkn/XVZR/19XUf9eV1H/X1dS/2BXUv9gWFP/YFhS/2BXU/9hWFT/YFlT/2BaU/9iWlT/YVpU/2JZVP9hWVP/YllT/2FZU/9hWFL/X1dR/19WUv9fVlD/XFRO/1hRTP9XUEv/VU5J/1ZNR/8vIhb/NyAF/0cpBP9OMRD/VD4m/1ZBKv9YPyz/Ozkz/zEyLf8tLir/KCon/yYnI/8kJyOcIiYiJiUoJAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIyYhBCMmITsiJSK7Iyci/yQpJP8nKiX/Li0q/zIzL/83NzP/PTs3/0M/Ov9HQz7/SURA/01HQ/9PSkX/UUxG/1NOSP9VT0r/VlBK/1dRTP9YUkz/WlJN/1pTTv9aVE7/WlNO/1pJOv9GMBj/QSoK/0QrCf9FKwn/PS0b/1pRSv9aU0//W1RP/1xUUP9cVVD/XVZR/1xVUP9dVlH/XVVQ/11VUP9dVlH/XldR/19XUv9fV1H/YFdS/2BYUv9gWFP/YFdS/2BXUf9eVlH/XVZQ/1xVT/9aU07/WlNO/1dQTP9UT0n/VU9J/1RKQv8vIBL/RCYG/1EtBv9bOxn/Y0ky/2dMNP9fRDL/TT4z/005LP9JNCf/RjEj/0IvIP86LB/PMSohNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMnIg0jJSFjIyYi5SYpI/8mKiX/Ki0o/y4vK/81NTH/Ojkz/z88N/9CPzz/RkI+/0hFQP9LRkL/TklE/1BLR/9STUj/VE9K/1ROSv9VT0v/V1FL/1dSTP9WUkz/V1FM/1ZQTP9XUU3/XEc3/0YvGf9GLAv/SS4K/0ktCv9CMCH/WFBL/1dRTf9YUk3/WVNO/1lTTv9aVE7/WVNO/1pTTv9aU07/WlRO/1pTT/9cVE//W1RP/1tUT/9cVVD/XFZQ/1xWUP9cVFD/XFVQ/1xVT/9bVVD/WlRO/1lTTv9ZU07/VlFM/1RQSf9VUEn/V1FM/1ZJPv8zHw7/US4G/1w1B/9oRiX/cVQ8/2pJMv9kRCv/Xj0k/1g4H/9SNBv/TzMZ/1IyGf9RMBrBPiUSFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAjJyMZIycjiiQnI/0nKiX/Ky0n/y0vKv8xMS7/NjYy/zw6NP8+PDj/Qj46/0VCPf9IRED/SkZC/01JRP9OSkX/UEtH/1NNSP9TTkn/VE9K/1ROSv9UT0n/VE9K/1RQS/9TT0r/VE5L/1VPS/9dRzX/RS8Y/0ouDf9NLwv/TS4L/0g1KP9UTkj/VVBL/1VQS/9UT0r/VU9L/1VQS/9WUEz/VVBL/1ZRS/9WUEz/VlBM/1dRTP9WUUz/V1JM/1ZSTf9XUUz/V1JM/1lSTv9YUk3/WFJN/1hSTf9YUk3/WFJM/1dSTP9VT0v/VVBL/1VQS/9aU07/XlZQ/15GN/9YMg//j1ET/5BSFf9/Uyn/bEQd/186Ef9XMQn/Ty0F/0YnBf9AJAT/PSEE/z4iBf9GKA/FPSQQNBUMAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJSgjIiUoJKolKSX/KCsn/ystKf8uMCz/MzQw/zc3M/86OjT/Pjw3/0E+O/9FQTz/R0Q//0lFQf9MR0P/TkhE/05KRf9PS0b/UExH/1JNSP9STkn/U01J/1FOSP9STUn/Uk1J/1JOSf9TTkr/UU1J/19JNv9FMBn/Ti8N/1AwDP9QMQ3/TDkt/1JMR/9QTUn/UU1J/1FOSf9RTUn/UU1J/1FOSf9RTkr/UU5K/1FOSv9STkr/U09K/1RQSv9UT0r/VFBL/1NPSv9UT0r/VVBL/1VQS/9UUEv/VVFL/1ZSS/9VUEv/VE9K/1NOSf9TT0r/VFBM/15RR/9wVUL/fVxF/35SKf+sYBv/p14Y/6ZdGP+RUhP/YzgI/04sBf88IAT/LhsG/ycYCf8mFwv/IxYM/yMXC/82JBbURC8jQUk9NQYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUoJDIlKSXAKCsm/yksKP8rLyr/MDEt/zM0L/83NzL/Ozo1/zw7Nv9APTr/Qj87/0ZDPv9HRED/SEZC/0tIQ/9NSET/TUlF/05KRv9PSkb/UEtH/1BMR/9PTEf/T0xI/05LR/9PTEf/T0xH/05MR/9OTEf/YEs3/0kyHP9UMQ7/VjEN/1YyDv9NOi//T0tG/01LR/9NS0f/TUtH/01LRv9OS0j/TkxI/09MSP9PTEj/TktI/05LSP9PTUn/UE1I/1BNSP9QTUn/Uk5J/1JNSf9QTUn/UU5K/1JOSf9STkn/UU5J/1FOSv9RTUj/UU5J/1ZNRv9hTUD/a1JB/29TPv90Ty3/jFQe/7BkHP+tYRv/q2Ib/61gGv91QxP/NiIS/0AoG/9INiv/Sjow/0c8NP9IPTb/Qjoz/zkyK/9BODDbTkE5gjw3Lz0pLScBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAmKiU5JiolzSgrJ/8rLin/LC8q/y8yLf80NS//NjYy/zk6Nf89Ozf/Pzw5/0E/O/9EQj3/RkQ//0dFQf9JR0L/S0hD/01JRP9MSUX/TUpF/01JRf9OSkb/TUtH/01KRv9MSUX/TEpG/01LRv9MSkX/TEpG/0tKRv9jTDr/SjQe/1kzEP9bMw//WjIP/089Mf9MSkX/SklF/0tJRf9LSEX/TEpG/0tJRf9MSkb/TEtG/0xKR/9MS0b/TUpH/01LR/9MSkb/TUtH/01MR/9NS0b/TkxH/09LSP9OTEj/T0xH/09MR/9PTEj/T01I/09NSP9YTEP/Zk9B/2dQQP9mSTH/Yz0Z/2c4Df91QA//nFcY/51ZGv+1Zh7/uGgd/5VbKf+BYEv/gF9K/2ROQf9CQTz/OTo2/zk5Nf80NjH/MTMv/y4xLf8tMiz/LzAr2SsuKVgpLSgBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJyomPiYrJtMpLSj/Ky0p/y4wLP8wMi7/NDUx/zY2Mv85OTT/Ozs3/z49Of9APjr/QT88/0VDPf9GRED/SEZC/0hGQf9KR0P/SkhE/0pIRP9LSUT/TEpF/0xJRf9MSUb/S0hF/0lIQ/9JSUT/SkhE/0pJRf9KSkX/SUhF/2dQPf9NNh//XjUT/2A1Ef9fNBH/UEAz/0tKRf9JSUX/SUlF/0pJRf9JSUX/SklG/0pJRv9KSkb/S0lG/0tKRv9LSkX/S0lG/0tJRv9LSUb/S0pH/0tLR/9MS0f/TUtH/01LRv9NS0b/TUpH/01LRv9QS0b/X09C/2xURf9oUD7/YkAk/1kxDf9gNAz/ZjgN/10zDf9IKQ7/Sy0Y/4lLGv+3Zx7/oF8j/4NgTP9/YU//cFBB/0lBO/89PDn/OTs2/zY4NP80NjL/MjUw/zEyLv8uMCv/Ki4q5yktKF4qLikDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcqJjkmKibUKS0o/y0wK/8uMCz/MTIu/zQ1Mf81NzP/OTk1/zw8Nv88PDj/Pz47/0E+PP9BQD3/RUQ+/0VEQP9HRUL/SEVB/0hGQ/9JRkP/SEdC/0lIQ/9JSEP/SkhF/0lIRP9IR0T/SUdE/0hIRP9JSUT/SEhE/0hIRf9JSET/bFNA/1I4Iv9iNxP/ZDcS/2Q3FP9TQjb/SklG/0hIRP9ISUT/SUlF/0lJRf9ISUX/SUlF/0lJRf9KSUb/SklG/0pJRv9KSUb/SklF/0pJRv9KSkb/S0pH/0pKR/9LSUb/S0pG/0pKRf9MSkb/T0xG/2dSRv9zW0z/a1A4/2A6Gf9dMQ7/XDMN/2A0Df9KKAr/OSMR/1Y/MP9vWEz/TzUh/4VJE/96RA//b0Mc/3lcTf9zV0r/YUg7/z8+Ov88PTn/ODo1/zc5NP81ODP/MzYx/zAzL/8tMiz/Ky8p6SktKF4qLikBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoKyczKCwnzSouKf8tLyz/MDEt/zE0MP80NjL/NTYy/zk6Nf87Ozf/PDw4/z8+Ov9BQDz/QEE8/0JCP/9FQz//RURA/0ZEQf9IRUH/SEZB/0dGQv9IR0P/R0hD/0dHQ/9HR0P/R0ZD/0hHRP9JSEX/SEhE/0lJRf9ISET/R0hF/0hIRP9wVkX/Vjom/2Y5FP9oORT/aTkV/1ZCN/9LSkf/SUlG/0lKRv9ISkX/SUlG/0hKRv9JSkb/SUlG/0lJRv9KSUb/SkpH/0pKR/9JSkb/SUlF/0lJR/9KSkX/SUpG/0lKRv9ISkb/S0pH/1NMRv9uWU3/eGBR/29MNP9kNxT/YTMP/2AzDv9YMA7/Oh8J/zgmGv9cRzv/bl9V/2diW/9kVEr/SigO/2o5Df9kNQv/Z0Yq/3NZS/9qUUT/UkQ6/z0/Of88PTn/OTs3/zg6NP82NzT/MzYy/zE1MP8uMS7/LDAq5CouKVIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKCsoHyouKrwsLiz/LTAs/y8yLf8yNDD/NTcy/zY3Mv84OTb/Ojo2/z09N/8+Pjr/QEA8/0JCPP9BQj3/Q0I//0VEQP9FREH/RkVA/0hHQv9IR0H/R0dC/0hHRP9ISEP/RkZD/0hHQ/9IR0T/R0dF/0hJRP9HR0X/SEhF/0hIRv9HSEX/SUlF/3NaSv9aPir/ajoW/2w8Ff9uPBf/V0E3/01MSP9JSkf/SEpH/0pKR/9ISUb/SUpG/0pLR/9KSkj/SUtH/0lKR/9KSkj/S0tI/0lLSP9KSkf/SkpH/0lLR/9KTEj/SktH/0pLR/9XUEn/dl5T/3xhVP9xSzD/ZTYR/2U2Ef9kNRH/VS0O/zQdDv9ALiP/XkxA/1tUTv9UVE7/VlVQ/1tYUf9JNSr/Vi4M/2AzDP9dNRL/aUw7/3BUSf9nTD7/RUI7/z4/O/88PTn/Ozs2/zc6Nf82OTT/MzYx/zI0MP8vMy3/LC8q2yovKkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAbEgw3MyySMjMv/S8yLf8wMy7/MTUw/zU3M/82NzP/ODg1/zo6N/88PTj/Pj46/z9APP9BQT7/QkI//0NCP/9DQj7/RERA/0VFQf9GRkL/RkZD/0dHQ/9GR0P/RkdD/0hHRP9HSEX/RkhE/0dIRf9ISEX/SEpG/0dJRf9HSUX/SUpH/0hJRv9JSkb/d15O/15BL/9tPBj/cj4Y/3E9Gf9XQjb/TU1K/0tNSf9LTEj/S01J/0tMSf9MTEn/TE1J/0tNSf9LTEn/S01K/0tNSv9LTUn/TExL/0tNSf9LTUr/TE1J/0xNSv9MTEn/W1JL/3xiV/9/YVP/dUks/2s5FP9qOBP/ajcT/1QsD/80IBH/TDct/19RSf9TT0r/TU1K/05OS/9PUEr/UFFL/1VMRv86JBL/XTIO/1kvDP9dOx7/cFVJ/3BVSP9eSD3/QUM9/z5AOv8+Pzr/Oz04/zk8N/82OTX/NDYz/zM1MP8uMi3/LDAsziswKi0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAXDAIDPTEoYUI6NO4yNDD/MTMu/zM1MP81NjL/ODk0/zk6Nf86Ozf/Oz05/z0/O/9BQD3/QEE+/0JCP/9DRED/REVA/0VFQf9FRkH/RUZC/0ZHQv9GRkP/R0hF/0ZHRP9HSEX/SEhE/0hJRv9HSUX/R0lG/0lKR/9ISkf/SEtH/0pLSP9KS0j/S01K/0tNSv96YVL/YkU0/3M+G/93QBr/dz8a/1lBNf9QUU3/TVBL/05QS/9NUE3/TlBN/01QTP9OUEz/TlBL/05QTf9OUEz/TVBM/05QTP9OT03/TVBL/05QTf9OUEz/Tk9M/15VT/+AZlv/gWJT/3hIKP9zPBb/cjsW/3A6Ff9TKxD/NyIV/1M+NP9bUUv/T1BL/0xOSP9OTkr/TU1K/0xMSP9MTEn/Tk5K/0k6Mf9HJQz/XDEN/1oxD/9lRjP/c1lN/21RRP9NRj//QUI9/z9BPf8/QDv/Oz44/zk7N/83OjX/NDgz/zM2MP8vMy7/LTAsty0wLBkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMmGzNIOC/GNjYw/zA0MP8zNTH/NDcy/zc6Nv86OTb/Ojs2/zs8Of8+QDv/QEE9/0BCPf9CQz//RERA/0VFQf9FRkH/RkZC/0ZHQ/9GR0P/RkhE/0dJRf9ISUb/SEpH/0hJRv9KSkb/SkxI/0lLSP9KS0j/S0xJ/0xOS/9KTUr/TE1K/05PTP9NT0z/TU9M/31lVf9nSjn/eUAe/35CG/9+Qhz/W0Az/1NSTv9RUk7/UVNP/1FST/9QU0//T1NP/1BTT/9RU1D/UVNP/1BTT/9QU0//UFNP/1BST/9QU0//UFJP/1FSTv9jWlL/hGtf/4RlVv99SSn/eD8Y/3c+GP92PBb/UyoQ/zklGf9XQzn/W1NN/09QTP9PT0z/TlBL/05PS/9OTkv/TU5K/01NS/9NTUn/Uk1H/zsmGf9aMAz/XDAO/183Gv9uU0j/c1hL/2NNQf9CRD//QEI+/0BBPf89QDv/Ojw4/zk8N/83Ojb/Njg0/zI2MP8uMi3/LjItkS4xLQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfEQMMRTIlmT44MfkwMi//NDYx/zU4M/83OTT/Ojw3/zs8OP88Pjn/PkA8/0BBPv9CQj//QkNA/0RGQf9ERUH/REZB/0dHQ/9HSEP/SEhE/0lKRv9ISkf/SUpH/0lLR/9JS0f/SUtI/0tNSf9NTUr/TU9L/01PS/9OTkv/TlFO/05QTf9PUE3/UFJP/1BST/9RU1D/gWpd/21SQv99QiD/hUQd/4VEHf9cPzH/WFZS/1NWU/9TVlP/VFZT/1RVUv9UVVL/VVZT/1RWUv9UVlL/VVdU/1VWUv9UVlP/VFZT/1RWU/9TVVL/Y11W/4txZf+JaVv/gkwr/31BGv98QRr/ez8Z/1UrEf89KB3/XEg+/1tVUP9SVFH/UFFO/09RTf9QU03/UFFN/09RTv9PUEz/UFBM/05QS/9NT0v/TkA5/0QlDf9fMg//XTIP/2RDL/92W0//b1ZJ/1JJQf9CREH/QUM//0BCPf89Pjr/Oz05/zo8OP82OTX/NDcz/zI2MP8wNC70LTEtXy8yLgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEIsG2hDMifmNDUx/zQ3M/82NzP/Nzk1/zk7N/87PTn/PT86/z9BPP8/Qz7/QEM//0RFQf9FR0P/RkZE/0ZHRP9HSUX/SElG/0hJR/9KS0f/S0xJ/0pMSf9KTUn/TE5L/0xOS/9NUE3/TlFO/09RTf9QUk//UFJO/1FTUP9RVFH/UVNQ/1NVUv9TVFH/VFZS/1RWUv+EbmP/dFpM/4BGI/+KRh//ikcf/14+Lv9eWVX/V1lW/1dZVv9XWlb/WFpW/1laV/9ZW1f/WVtX/1laV/9ZW1f/WVpW/1daVv9ZWlf/V1lW/2RfWf+NdGj/jW5f/4lQL/+EQxz/gkMc/4FDG/9ZLhP/Pike/19LQv9fWVT/VVdS/1VWUv9UVVL/VFVR/1NUUf9SVFD/U1RR/1FTT/9QUk//UVJO/1BRTf9SUEv/Pywf/1owD/9gMw//YjkY/25SRf91W1H/aVFG/0ZHQ/9DRkH/QkRA/z9CPv89QDz/PD45/zk8N/84Ojb/NTg0/zM1Mf8wMy7jLjItMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5JhUySC4a1jgxKv8zNjL/Njk0/zY6Nv84Ozf/Oz45/z5APP8/QD3/QEM//0NEQf9ERkL/RkhD/0dJRf9ISkb/SUtG/0pLSP9LS0n/S0xJ/0xOSv9LTkv/TE5L/05QTP9OUk3/T1JP/1BTUP9SUlD/UlVR/1JUUP9TVFL/VVZS/1RWU/9UWFT/V1hU/1dZVv9YWlb/WVpX/4JxZ/99ZFj/gkcm/49KIf+PSiH/Yj4r/2JdWP9bXVv/W11b/1xeW/9cXlv/XF5b/1xeW/9cXlv/XF5b/1teW/9cXlv/XF5b/1xeW/9mY13/kHlt/5ByZP+OVDP/i0gf/4lFHv+HRR7/YjMW/0AqHv9hTUT/YVxY/1daV/9XWlf/WFpV/1dYVP9WWFT/VlhU/1VWU/9VV1P/VFZT/1NVUf9TVVD/U1VR/1FUT/9QRT//RicR/2Q2Ef9hNBH/ZUMr/3pfVf91Wk7/Wk5G/0ZIRP9FR0L/QUVA/0BCP/8+Pzv/PD45/zo8N/83OjX/Njcz/zI2MP8wMi20LjItEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIhIDAlIyGLg+KRn8Nzcz/zY4NP83OjX/ODw4/zs+Of8+QTv/QEI9/0FEPv9CREH/RUdE/0dIRf9HSEX/SUpG/0tNSf9LTUn/TU5L/01PTP9OUEz/T1JO/1BST/9RUk//UVNQ/1JVUf9TVVL/VFZS/1VXVP9WWFT/V1hW/1ZYVv9YWlb/WlpY/1pcWf9aXVn/XF1a/1xeW/9dXlz/gnJq/4dtY/+ITCn/lkwk/5dNJP9oQCr/Zl9Z/2FhX/9hYl//YWJg/2FhYP9hY2D/YWNg/2FjYP9hY2D/YWNg/2FiYP9hY2D/Zmdh/5J8cf+Wem7/k1k7/5JLIv+SSiL/kEoh/285Gf9BKR3/YExD/2NfWv9cXlv/XF5b/1xfW/9bXVr/WlxY/1pcWf9ZXFf/WVpY/1haVv9YWlX/VVhU/1ZYVP9VV1T/VVhR/1ZVUf9DMCT/XjEQ/2Q1Ef9lOhn/cVVG/3thVv9uV0z/S0xH/0dKRf9ER0L/QkRA/z9BPv8+QDz/PD85/zk8Nv83Ojb/NDcz/zE2MPwwMi9wLzMuBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABSNB16SysO+zsuJP81ODL/OTs2/zo9OP87Pjv/PkA8/0BDPv9CRUD/Q0ZB/0VHQ/9HSUX/SkxI/0lNSf9KTkr/TE9L/09QTv9PUk3/UFFO/1JTUP9RVFH/U1VS/1NVU/9UVlP/V1lV/1dZVv9YWlb/WVtX/1pbWP9bXVr/W11a/1xeW/9eXl3/XmBd/19hXf9fYV//YGFf/2FiYP+CdW3/kntw/4ZMLf+cUCX/nVAl/3NDKv9pX1r/ZWdj/2VnY/9kZmT/ZWZk/2ZnZP9mZ2T/ZGdk/2VoZP9laGX/ZWdk/2hpZv+VgHX/nYN5/5hkR/+aUSX/m1Al/5pOJf97QBz/Qigb/19JQP9nYV3/YWNf/2BiXv9fYV7/XmJd/15gXP9eX1z/Xl9c/1xfXP9bX1r/W15a/1xcWv9ZW1j/WFpW/1dZVv9XWVb/V1pV/1JIQf9HJxL/ZzcS/2U1Ev9qRS3/gGZc/3pgVv9fVUr/SUxH/0ZJRf9DRkH/Q0VB/0BCPv8+QTv/PD45/zk8Nv82OTX/Mzgz/zM2MOowNC8wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA2Ni8EUzopdFYzFPlCJw7/PDYv/zg7Nv86Pjn/PD87/z5BPf9CRD//RkZB/0ZIQ/9FSUX/R0tH/0pNSf9LT0r/TU9M/05QTf9QUU3/UlRR/1JWUv9TVVL/VFdT/1ZZVP9XWlb/V1lX/1pbWP9bXVj/W11Z/1xeWv9fX1v/Xl9d/19hXv9gYl7/X2Jf/2FkYP9hY2H/Y2Ri/2RmYv9lZ2P/Zmdk/311cP+jjIH/iFE1/6NVKv+mVir/hEos/25gWf9rbGj/ampo/2praP9qbGn/a2xp/2tsaf9sbWr/bG1r/21ubP9ub2v/mYd+/6mQh/+hb1f/olYs/6NWKP+jVCj/jEkj/0grGv9cRz3/bGZg/2ZpZf9lZ2T/ZWZk/2RlY/9jZWL/YWRg/2FkYP9hY2D/X2Ff/2BhXf9gYl//XmFd/11eXP9bXlv/W11a/1tcWf9ZWlb/WVpS/0YyJv9hNBL/aDgT/2g9HP92Wkv/gmle/3ZeU/9MTkn/SExH/0dJRf9GR0T/Q0ZB/0FEPv8+QDv/PD45/zg8Nv82OjT/NDcz/zI2MaQyNjALAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE9AMzZZOyjpUCsK/0ApF/8+PTf/Oz05/z1APP8/Qj//QkVA/0RGQ/9HSEX/SUtH/0lNSP9LTkr/TlFN/1BRTv9RUlD/UlRR/1NWUv9WWFX/VlpW/1daVv9ZXFj/WVxY/1pdWf9cXlv/Xl9d/15gXf9fYV7/YWJf/2JkYP9iZGH/YmRh/2RnYv9kaGT/Zmll/2ZoZf9mamb/aGtn/2traP9qbGn/d3Vx/6+bkf+KWT7/rVwu/7BgL/+bVjH/c2Na/3R0cf9xcnD/cXFv/29xbf9wcm7/cnRx/3R1c/91d3T/eHt4/5qVjP+8pZv/roZv/6xfMf+vXy7/rFss/5xSJ/9RLhr/WEE3/3BoYv9rbWr/aGxo/2hsaP9pa2j/aGtn/2dqZv9naWX/ZWhl/2RnZf9kZmP/ZGVh/2RlYf9iZGH/YGJe/19hX/9fYV7/XmBb/1teW/9bX1r/VUtE/0spFP9sORX/aTgV/25KMv+HbmP/gmld/2JXT/9LTkr/SkxJ/0lLRv9GR0T/QkZA/0BDPf8+QTz/PD46/zk8OP82OTX/NTcz+DI2MEozNjECAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6ODIPYkQ0mVY2H/9PKwj/QC4h/zxAO/88QDv/QEM//0NFQv9ER0P/RklG/0tLSP9LTUr/TVBL/1BRTf9RU1D/U1VS/1VWVP9XWVX/WFtX/1lcWf9aXVn/XF9c/15gXP9cX1z/XmBd/19iXv9iZGD/Y2Vi/2NnY/9lZ2X/ZWll/2hqZ/9oamf/aWpo/2lsav9rbWr/bG1q/21wbf9scG3/bnFt/29yb/90dnP/uKqf/5ZoT/+5aTT/v243/7NmN/+DbmP/pKOb/6Wjm/+jo5r/o6KY/6mnnf+qqJ7/q6me/6yrof+2sqr/y7y0/8CmmP+9cj//vW02/7hnM/+tXi//YzUd/1M6L/9xZl//cHJv/29yb/9vcW7/bm9t/25vbP9sb2v/a21q/2ttav9qa2n/aWpo/2lraP9oamb/Zmhl/2ZoZP9kZ2T/Y2Rh/2BjX/9fY17/X2Je/11hXP9cWlb/RzIl/2Y1E/9sORT/b0Af/3thVP+Lcmj/emRZ/05QTP9NTkr/Sk1I/0hKRv9ER0P/QkVA/0BCPv89QDv/Oj45/zg6Nv82ODT/NDUxwjM2MRIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE0/M0JjRTXxVjIU/0spCv9CNCr/PkE9/0BCP/9BRkH/RUhE/0hKRv9KS0j/TE9L/05QTf9RU0//U1VT/1VXVf9XW1b/WlxZ/1tdWv9bXlr/XWBb/15gXf9gYl//YWNh/2JlYf9kZmL/ZWhl/2ZpZf9pamf/amxo/2psaf9rbWr/bG9r/25vbv9ucW3/cXNu/3p7ef+DhYL/k5WR/6Oinv+wraf/vbiy/8nFvP/Lv7f/pn1n/8Z4Pv/QgUL/y31A/7iqof/b087/2M7J/9XLxf/VysT/1cnE/9fMxv/Zz8r/3tTO/97Vz//SxL3/z5Ri/8+CQ//Lf0D/w3U6/4JFJP9XQDT/t6ql/8K6tv+3sq7/r6un/6Ohnv+VlJH/hIWC/3l6eP9wcm//b3Fu/25xbP9tcG3/bW9s/2xtav9sbWn/aWxp/2lqaP9maWb/ZWhk/2VnY/9iZmH/YmVi/2FjYP9VS0T/TywU/3A7Fv9vOhb/dlI7/5J6cP+Kcmb/Y1xU/05STf9NT0v/SU1I/0dKRf9FSEP/QkVA/z9CPf89QDv/Oj04/zg6Nv81NzP8MzcyYDQ3MwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5ODMSYUY2nGBBL/9TLQr/SysP/0Q6Mf9CQz//REZB/0VJRf9JS0j/S01J/05PS/9PUk7/UVRQ/1VWU/9WWFb/WFtY/1pcWf9dYFz/XmFd/2FjYf9hZGD/Y2Vh/2VmY/9laWX/aGpm/2lsaf9rbWr/bG9r/21wbf9tcGz/cnRy/4CCf/+WlpP/rKuo/8C8uf/Mx8T/1MzI/9jOyf/Yzcn/18zH/9jLxv/Yy8b/3NLO/93Tz//OtJn/2JFP/96XTv/clEz/1cGx/+HUzv/aysL/1sG2/9O8sf/Tu7D/2MC1/93Kwf/i08z/49XO/97BkP/folX/3ZlP/9eORv/LfD//pG5Q/87Cvf/Qwrz/0MC6/8/Buv/Qwrv/0MG8/8/Bvf/Owr7/y8G9/8S9uf+0sa3/oqGd/5CQjP99fnv/cXJv/29wbf9ucG3/bW9r/2ttav9pbGj/aGpn/2dpZf9lZ2P/ZGZi/2FeWf9JMiX/bzoW/3I7Fv93RiX/h21h/5V9c/99al//UlVP/09STv9MUEv/SU1J/0dKRv9FSEP/Q0ZA/0BDPv89QDv/Ojw3/zc6Nf81ODPPNDczFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEI7NEBqSzjvWz0p/1QtCv9LLRT/Rz84/0RFQf9GSUT/SUtH/0tOSv9OUUz/UFNP/1NVUf9VV1T/VlpW/1ldWf9cX1r/XmBe/2FjX/9iZWH/ZGdi/2VnZP9naWX/aGpn/2ptaf9rbmr/bnBt/3R0cv+EhYL/oaCd/726tv/Qysb/2tLN/97Tz//g1ND/4NTP/9/Uzv/bzsj/2Me+/9W+s//QsqL/zKmW/8uijP/PpYv/2bWX/92sdP/lsF7/6sJn/+i/Zf/isGj/259l/9GOWP/He0r/wnJD/8RzQv/LfEb/1Y9S/96jYP/lvG7/6MFr/+nGa//nwWj/4atY/9aPTv/NlWf/yJZ0/8KLbP/BjnT/xZuF/8mmlf/MsaP/z7mw/9G/t//UxL//1cbA/9TFwP/TxcD/0cfB/8/EwP/Evbr/sq6r/5eXlP9/gn7/c3Vx/21vbP9rbmn/amxp/2drZ/9laGT/Zmhj/1ZKQ/9ZMRb/dD0Y/3I7F/9+W0b/nYR7/5F4bf9jXlj/U1RR/09STf9MT0v/SkxI/0dKRf9FSEL/QkZA/z9CPv88Pjr/Ojs3/zc5Nf42ODRlNjk0AwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1ODUNTz81j2tLOf9WOCH/VS4K/0otF/9JQz3/R0hE/0lMRv9MT0r/T1FN/1BTT/9TVVL/VVlU/1hbV/9aXVn/X2Fc/19iX/9iZGH/ZGZj/2ZoZf9oamf/aWxp/2xva/9vcm7/eHp2/5WVkv+4trL/zsjF/9vSzv/g1M7/4NTQ/+HUz//f0Mr/2MO6/9Kyo//Ln4n/xI1w/759XP+6bkf/t2U5/7diNP+6ZDT/wGw6/8t6Qf/YjUr/46dZ/+zMbf/t0nH/7dFw/+rEaP/gnVL/1olH/8x7Qf/HcTr/yXY9/9GDRP/bk0//5rFg/+vLb//rym7/68tv/+vLcv/oxGr/3p1S/9KFRv/Idj3/wGw4/7tmNf+4YjT/t2I0/7ViNv+1Zz3/uHJO/7x+YP/AjXP/xp6L/8ywov/SvrX/1cW+/9XFwP/Vxb//08fA/9DGv//EvLj/rKil/4uLiP9zdXP/bW9s/2lraP9naWb/YF1Z/0wwIf94Phf/dT0X/3xMLf+Tem7/noZ8/31sYv9UV1P/UVNP/09RTv9MTkr/SkxH/0dJRP9ERkL/QEQ//z1BO/87PDr/ODo2/zc4NMc2ODQPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADc5NTFcRjfjaEo6/1Y1G/9YLwz/SzAc/0tHQf9IS0j/TE1K/05RTf9SVFH/VFdT/1ZaVv9ZXFj/W19a/15hXf9hY2D/ZGVj/2ZnZP9pa2f/a21q/25ybv98fnr/np2a/8C8uP/Xz8v/3tPP/9/Szf/e0Mr/28rD/9G1pv/JoIv/v4dq/7ZvSv+zZDr/s18y/7RfMP+3YTL/umIz/7tkM/+8YzT/vGQ0/75nN//EcDr/z4BE/9qSTf/lrV3/7tJz/+/Vdv/u1HX/68lu/+CeVP/Wikr/zHpB/8ZzPf/Idj//0YRG/92WUf/ntWT/7c51/+3PdP/tz3X/7M52/+nIbv/fn1T/1IlI/8t6QP/Ebjr/vmg2/71nNf+9ZTT/vGU0/7plM/+5YzL/uGIy/7VhMP+xXzD/sF80/7BkPP+zc0//u4lu/8Sciv/LsaT/08G5/9LCuv/Swrz/0cO7/8m+uf+xrKj/kZGO/3R3c/9tb2v/VEQ7/2Q0Ff94Pxn/dj8a/4hoVv+kj4b/l39z/2FeWP9VV1P/UFNP/09QTf9MTkn/SUxH/0ZJRP9CRkL/P0M+/z5APP87PDj/ODo2/zc5NEw2OTQBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3OzYHPT02eWVLOv9oSjv/WDQX/1owDf9MMR7/TkpF/0tOSv9PUk7/UlVR/1VYVP9XW1b/W11Z/11hXP9gYl//YmRh/2ZoZf9na2b/bG9r/3l7d/+VlZP/vru3/9jQy//e087/3tHK/9vMxv/RuKv/xZ2H/7h9Xv+yaUL/r10x/7JdL/+1YTD/t2Iy/7hkM/+7ZTP/umQ0/7tkM/+8ZTX/vWM1/7tiNP+6YzX/u2Q1/79tOP/Edj7/zH9D/9WJSf/ltGL/7tJ0/+7Rdf/mtGL/xXQ+/6pdMv+ZUy3/iEko/4hJKP+uYjb/3ZVQ/+WoXP/ryW//7tB6/+fJcf/WnVf/0YtM/8l7Qf/BdD7/uGo5/7VkNf+2ZTT/uGM0/7lkNP+6ZTT/u2Uz/7xmNP+7ZTT/umQz/7llM/+3YzL/t2Ey/7RgL/+wXS7/rFot/6peNP+raUT/tYNm/8OfjP/Lsqf/0L2z/869tf/Ovrf/x7u1/6+noP98cmv/UTEd/3xBGv97QBn/hFY6/6WPhP+oj4X/fHBn/1dZVv9UVVP/UFNP/09QTf9LTUn/SEtG/0RIQ/9BRUD/PkE9/zw/Ov86PDj/Nzo1rDg7NwYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADo9OB5EPznGbE8+/2ZJOf9bMxT/XTEP/00zIf9QTkn/TlJO/1JTUf9WWFX/WFpY/1teW/9eYF3/YWRf/2NmYv9naGX/bXBs/4GBff+tq6b/0MnG/93Uzv/c0Mn/18e+/86xov++kHj/r3BO/6pcMf+uWy3/s18v/7ZiMf+4ZDL/uGUz/7plNP+7ZTP/uWQz/7hjM/+0YTL/sGAz/6NZL/+UTyr/gkYm/3I8Iv9mNx7/XzMd/1syHf9XMh//UjMi/71tQv/kqVz/5q1d/96ZU/9xRjD/WD0u/1E3K/9UPDD/bVZL/7GAYf/Zjkz/4Z5U/+WpWv/jr1//oGA4/2RBMf9dPCz/UjIj/0stHf9IKRv/SSkZ/1IuGf9cMRz/Zzge/3U/Iv+FSCb/mVIr/6hbL/+xYDL/s2Iz/7ZjM/+2YzL/t2Iz/7VhMf+1YTH/sWAw/7BdLf+qWiv/pVYq/6ReN/+tdVf/u5R+/8itof/NubH/zruw/8u6sf9xW1D/dDsZ/4NEG/+FSyT/nIJx/7Oelv+bhnv/W11Z/1ZZVf9TVVL/UVNQ/09QTP9KTUn/RkpF/0NHQv9BRD//PkE8/zw+Ov85PDfvODw2KQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6PTgBOj04TUhDO/5xU0P/ZEc3/100Ef9fMg7/TzUj/1RRS/9RVFH/VVlV/1hbV/9bXln/XmFd/2JkYP9lZ2P/cXFr/4qFf/+6sKn/183G/93Qy//XycH/zrao/7uPdv+qa0j/oVQo/6lYKv+wXS3/tWAv/7hjMv+5YzL/uWQ0/7ZjMv+wXzH/q1wu/5dRKv+CRiX/bjwg/1oxG/9GJhf/PCQX/z4oHf9GLyX/Tjgu/1lDOv9kUEX/dGJY/4x5cP/Kw7//vKGN/9qUU//gmVT/2Y5O/4VhUv+emJP/l5OP/8C6tv/YysP/1JZ0/9eFSP/dklD/4JtU/79sPf97WEn/s6CW/7OtqP+kmpL/kYJ6/39vZv9yYVj/ZFBI/1pFPP9TPDL/SzMp/0MsIv87JRr/PCIW/0soF/9gMx3/dD4h/4RIJP+ZUir/p1ov/61dL/+xXi//tF8w/7BeL/+vXCz/q1os/6ZXKv+eVCf/nFUt/6hyVP+7loP/y7as/7Kdkf97RSj/kEsf/5FKHf+cdFv/vaui/7WflP97dGr/Wl1Y/1VZVf9TVVL/TlFO/0tPSv9JTEj/RUpD/0NGQf9AQz7/PT87/zs9OP84OzZ2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADw+Ow07PzqYTkY9/3dXR/9kRjb/XzQQ/2I1D/9RNSP/VlNO/1VXVP9ZW1j/XF9b/2BjXv9kZWL/bmxo/4yDfP+8raT/2MrD/9nMxP/TwLf/wZ6K/6pzVP+bUij/olMn/6pZKv+vXi7/s2Av/7djMv+1ZDL/rmEw/6NaLf+MTif/cD4h/1QvGv9BJBf/PScc/0YvJf9QOzH/YExD/3JiW/+Cdm//ioN+/5CLh/+Uko//lpaU/5WXlP+XmZb/m52a/8vBvP+xnpH/zoNM/9qKSv/Wgkf/gFQ//5WUj/+qq6j/2MvF/9Cgif/Rc0D/1X5F/9eFSf/Fd0H/aEIw/5+JgP+wsa//qaqo/6Gjn/+Zm5j/k5aT/5OVkv+Sk5D/kZKQ/5CPjP+LiYX/h4F7/4F3cf92aF//Z1RM/1ZANv9KNCr/Qiwh/z0lGf9EJxb/XDIc/3lBIv+PTib/o1cr/6lbLf+vXC3/rFws/6haK/+jVyn/nFIm/5dPJP+fYDn/s4hs/6hsR/+iViX/pVUk/6prQv+6qaH/xbOr/56OhP9gY1//W15a/1ZZVf9TVVH/TlJM/0tOSv9ITEb/RUhC/0JEQf89QT3/PUE9/zo8OMg4PDgHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPD47IT5BPNdTS0H/fFpM/2ZIOv9gNA//ZTYR/1Q2JP9aV1H/WVtX/11fW/9gY2D/aWlj/4V7c/+1opn/1MS9/9PEvf/LtKj/tYx2/5xcOf+WTST/nVMm/6VWKP+sXCz/s2Ew/7BgL/+oWy7/llIp/3RBIf9VMBv/QSYY/0AqIP9OOS//Y1BH/3ZnYP+Gfnn/joqF/5KSjf+RlJD/j5OP/5KTkP+SlJH/kpOQ/5OWk/+Vl5T/lJWT/5iZlv+Ym5f/uLKt/6+ck/+8cUb/1n1G/9R5Qv+JUzj/kIeC/9PKxv/Qtan/0XdH/9N2QP/VeUP/znZA/3hEKv91XFH/oZ6b/6Gjof+foJ3/m52Z/5iamP+XmZX/lJeT/5SVk/+Rk5D/kZKP/5CTkP+Qko//jpGO/42QjP+QkY//jY2J/4qIg/+EfXj/emxm/2lYT/9WQTj/RjAm/zslGv9FJxf/XjMc/3tCIv+UUCf/oFYq/6ZaKv+lWSr/o1Yp/6NWKf+oWSn/r18q/7ZiLP+6ZSz/t2Iq/8Gqkv/Qwrz/vayg/4aAdf9iZGD/WVtY/1VXUv9RVFD/TlFM/0tNSP9ISUb/REhC/0JFQf9AQj7/Oj859To9OTgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD1APQE9QT1NQEM+/1ZMQ/+BYFP/aE08/2U2Ef9qNxT/WDcl/2BaVP9eYVz/YmNg/3lya/+mlIj/zLuy/9HCuv/GrqD/rYFo/5RSLv+RSiH/lk0k/55TJ/+mWCr/q1os/6JXK/+OTif/azsf/00rGf88JRv/SjQr/19NRP91aWP/iIJ9/46Oif+SlJH/jpGN/4+Rjv+Qko//kZOR/5KWkf+TlpL/lZeT/5SXlP+Vl5T/lpeW/5eZlv+WmZb/l5qX/5mamP+qp6P/u6af/6pnRf/UeUL/1nhC/6FcO/+qnpj/2cfB/9aNaf/VdED/1XZB/9V4Qv+gWTL/VTsx/4+Efv+cn5v/m52a/5qbmf+ZnJn/mJuY/5aZlv+XmZb/lZeV/5WXlf+UlpL/lJWT/5OVkv+SlZH/kZSQ/5GTkP+PkY7/jZCN/4yOjP+Mjor/jI6L/4mLhv+GgHv/fHJr/2dWTf9SPTP/QSwi/zwkF/9SLhn/cDwe/49NJv+eVij/rWEu/7VmLv+9bC//y4RB/9KZSf/Kgzz/xpFi/8q5rv/AsKj/uqic/5yPf/9sa2L/VlhW/1NWUv9QU07/TVBL/0lOSf9FSUX/QkZC/0BDPv88QDv/Oj45fQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEM+CkBDPYxBRUH/WU9H/4ZoWv9uUkH/bDkT/3I8E/9hPCX/ZWBY/29sZv+Whnr/wKuh/9DBuf/Cq5//q4Bo/45OKf+NSCD/kkwh/5dOJP+eUyf/nFMm/45LJf9uOx7/TCsZ/zsmHP9OOjD/ZlZO/4B5cv+KiYT/jpGN/42PjP+PkY3/j5GP/5GTkP+RlJD/kpSR/5OVkv+UlpP/lZeV/5aYlf+XmZX/l5mW/5eZlv+am5n/mZuY/5qdmf+bnZr/m5yZ/6Cinv/Esaf/m2ZL/9N4Q//Ye0T/vWk//8Ozrf/QrJv/1nRA/9h5Q//YeUP/xG09/1k1JP95Z1//nJ6b/52fnP+dn5z/mpya/5qcmf+anJn/mZuY/5mbmP+YmZf/l5mX/5aZlf+Wl5X/lZeU/5SXk/+TlpL/k5WS/5KUkf+Rk5D/kJKP/4+Sjv+NkIz/jZCM/4yNiv+KjYn/iYyJ/4eGgv9/eHH/b2FZ/1dEO/9DLiT/PCQX/1cwGv+FRiD/rV4t/8V4OP/YpFH/3K5X/9efTP/Nhj7/wXpI/7yae/+0n5L/q5WL/6eTg/9+dGn/WFtV/1NUUf9PUk7/S09K/0hLR/9FSET/QkRB/z5CPf47QDq9O0A6AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABCREEXQkVBxkVIRP9dVEv/jW5h/3dbSv91Pxb/f0MY/25DJv+KdWn/tqSZ/8/AuP/Fsqj/r4t2/49UMf+IRh//jUcg/5JLIv+YTyT/jUoj/3g/Hv9VLxr/PCYZ/0k1K/9kVE3/gXl0/4uLh/+Ljor/i42K/42QjP+PkY3/j5KO/5GTkP+Sk5H/k5WS/5SWk/+Vl5T/lpmV/5eZlf+Ympf/mJqX/5qcmf+anJn/m5yZ/5yem/+cnpv/nZ+c/56fnP+eoJ3/nqCe/8O0rP+Ublr/0XpE/92BSP/Rd0T/x6qc/9uNY//bfkb/3H1G/9l6RP+DSSz/Yko//5iSjf+foZ7/n6Ce/5+gnf+eoJ3/np+c/52fnP+dnpv/nJ6b/5qcmf+ZnJn/mZuZ/5ial/+Xmpb/lpmV/5WYlP+Vl5T/lJaT/5SVkv+TlJL/kZSR/5CSj/+Qko//j5CO/42PjP+LjYr/io2J/4qMiP+IiYb/hoeD/354c/9yZFz/W0Y8/0syJ/9TMR7/hEkl/8iCQP/aq1P/2KJN/9SXSf/Fdjb/r1om/6VqRf+jgGv/noZ6/6SMfP+TgG//ZGBY/1FUUP9OUEv/Sk1J/0dKRv9ERUP/QURA/z1BO+07PzshAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAENGQTNER0LvSUxI/2BXT/+Ud2n/hGVU/4FFGP+QSxr/gUwo/8Kyqf/Wy8T/w6uf/6FtSv+LRx7/i0cf/4xIIP+SSyL/hEQf/2g3Gf9IKRf/PSog/1hGPf94bWj/iIaC/4mMiP+KjYn/jI6K/4yPi/+Oj43/kJKP/5GTkP+TlZL/lJaT/5aXlP+XmJX/l5mW/5ial/+Zm5j/mpyZ/5ucmf+bnZr/nJ6c/5yfnP+eoJz/nqCe/5+hnv+foZ//oKKf/6Cin/+io6H/w7ey/6GGd//RgUz/4pBR/+GMUP/emWr/4YxO/+GLTf/ghkr/wG0+/1M1Kf+HenP/oqOh/6GjoP+ho6D/oaOg/6CioP+gop//oKGf/5+hnf+eoZ3/nZ+d/52fnP+cn5z/nJ6b/5udmv+anJn/mZqX/5ialv+XmZb/lpeV/5WWlP+UlpP/k5SS/5KUkf+Rk5H/kJKP/46Qjf+Nj4z/i46L/4mMiP+Iiob/h4mG/4eKhv+LjIf/joV+/4NwZP9oTkH/Wzoo/7ZzPP/brFX/16JO/8l/Ov+zXSf/nlEh/4lIHv+MYEX/knRl/5qAdP+dgnD/cWRa/1BSTf9MT0r/SUxI/0VIRf9CRkH/QEM+/D1APF09QTwBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABER0IEREdCXEZJRP9LT0r/ZFtS/56Cc/+Uc2L/jEwf/6ZZH/+5cTr/zb2q/8q0lv+oXCz/mlAi/5FKIf+OSSH/gEId/2MzGP9DJxf/QzAm/2JTSv+Ae3X/iIqI/4eKhv+KjYn/jI+L/42OjP+PkI3/kJKO/5GTkP+TlZL/lJaT/5WXlP+WmJX/l5mW/5ial/+Zm5j/mpyZ/5udmv+dn5v/nZ+b/52fnP+foZ7/n6Ge/5+inv+hoqD/oaOg/6Gjof+ipKH/o6Wj/6eopv/Aubb/uqad/8+LVP/pqWD/66xh/+qrYf/pp1//56Ba/+GRUv97Ry3/cltS/6Khnf+kpaP/pKWj/6Slov+jpaL/o6Wi/6Kkof+ipKD/oqOh/6Cjn/+gop//n6Ge/56gnf+eoJ3/nZ+c/5yem/+cnZv/m52a/5qcmf+Ympf/l5mW/5aYlf+Vl5X/lZaT/5KVkv+Sk5D/kJKP/4+Sjv+PkY7/jI6L/4qNif+Ii4f/iIqH/4uNiv+Sk5H/nZ+c/6mlnv+ikIb/fFdA/9KWSv/Vmkv/xXU2/69cJ/+cUCH/ikce/31BG/9/TCr/i2dU/5J4bP+dfmz/eWVZ/05QTP9LTkn/SEtH/0NHQ/9AQ0D8PkI9kz9DPQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAERHQwlER0OKSUxI/1BTT/9pYlj/qIt7/6aFc/+XVSf/yn4v/9ynSv/ar17/xHUv/7JeJf+lVST/jkgg/2Q0F/9FJRb/QzAn/2VXT/9+fHf/hYiE/4eJhf+Iiof/io6J/4yPi/+OkY3/j5GO/5CSj/+Rk5H/lJWS/5WXlP+WmJX/l5mW/5ial/+ZnJn/mp2a/5udmv+cnpv/nZ+c/5+gnv+foJ7/oKGe/6GjoP+ho6D/oqOg/6Okov+jpaP/pKWj/6Wmo/+nqab/rK6r/8C8uf/UxL3/z5Rj//DCbv/yyHP/8sh0//HBb//utmv/yoNL/2RFN/+clI3/qKqn/6eppv+mqKX/pqik/6WnpP+lp6T/paak/6Smov+kpaL/o6Wi/6Klof+ho6D/oaKf/6Cin/+foZ//nqCd/56gnf+dn5z/nJ6b/5udmv+Zm5j/mJqX/5eZlv+WmJX/lJeU/5SVkv+TlZL/kZSQ/5GSkP+PkI7/jI6L/4qNif+Ji4j/io6J/4+Qjv+WmJT/oaOg/6utqv+SgXn/qF4x/8d6OP+5ZS//nFAk/3g+Gv+CQxz/fkIb/3k+GP92Pxr/gllB/4xwY/+Yd2b/fWRV/0xPS/9KTUj/RUhE/0JGQP4/Qz6/P0I9DAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARklFDkZJRbpMTkv/VVhS/2toYv+vk4L/tpWC/7dvO//bnz3/3qc+/9+pQP/QiDb/uWEp/4pGH/9QLBf/RTEm/2JTS/99enb/goSC/4WHhf+Iiob/iIyI/4qOiv+Nj4v/jpGO/5CSj/+SlJH/k5SR/5OWk/+Wl5X/l5mW/5mal/+ZnJj/mpyZ/5yem/+dn5z/nZ+d/56gnv+goZ7/oaKg/6GioP+jo6L/o6Wi/6Olov+lpqT/paek/6anpf+mp6X/qKmm/6yuq/+1t7X/w8TC/+HV0f/Un3v/9dmO//jhp//44ab/99qP//HKc/+QVjn/nIJ2/7W2s/+tr6z/qquo/6mqqP+oqqf/qKmm/6epp/+nqab/pqil/6anpf+lp6T/paak/6Smov+jpKL/oqSi/6Kjov+hoqD/oKOf/6Chnv+foJ3/nZ+c/5yem/+bnZr/mpyZ/5ibmP+XmZb/l5iV/5aZlf+UlpP/k5SS/5GUkf+PkY7/jZCN/4yNi/+LjYn/jI6K/4+Sjv+Wl5b/n6Ce/5iTjf9/TjX/uGkv/7BgKv+cXzn/XUEx/0YlEv9tOBf/ej8Z/3c+GP9zOxb/e08y/4doWv+Sb2H/dl9Q/0pOSf9HSkX/REdD/0FFQORAQz4nAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIS0YaSUxI3E9STv9ZW1f/gHRq/7+uoP/GtKP/zZNN/9yjPf/boj3/36hA/8l5MP9zOxr/UDUl/2lZT/+Bfnj/goOB/4OFgf+GiIT/h4qH/4mMif+KjIr/jI+M/4+Rjv+RlJD/kpSS/5OWk/+Wl5T/lpmV/5ial/+am5n/m52a/5udm/+dn5z/nqCd/5+hnv+gop//oaOg/6Kkof+jpKL/o6Wj/6SmpP+mqKT/pqik/6appv+oqab/qKqn/6iqqP+rrKv/srOx/77Avf/Nzsz/6OHe/+LStf/57N3//PHl//zx5f/77d//5bl1/5BoVf/Fwb7/vr+9/7O1s/+trqz/q62q/6qsqv+qrKn/qqyp/6mrqf+pq6j/qKqo/6iqp/+oqKf/p6mm/6anpP+lp6T/pKaj/6Slo/+jpKH/oqOh/6Gjof+goZ//n6Gd/52fnf+cn5z/nJ6a/5ucmv+ZnJj/mJqY/5eYlv+Vl5T/lJaT/5KUkf+Qko//j5GO/46PjP+Mjor/jI+L/46Pjf+SlJL/k5WS/21SRP+iWSn/p1wp/6FiOv+smI//fGxk/z0lGP9VLBL/dDwZ/3Y9F/9yPBX/dkgp/4FiU/+Lalv/a1dM/0lMSP9GSUX/Q0dB9kFGQE0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAElMSDZMT0vxUlVR/2diW/+vmYj/zr+5/8qtiP/XnkX/26E+/92jP//Ukzn/dEUk/2lRRP+Phn3/kJOO/4WIhf+EhYP/hYeD/4eKhf+IjIj/ioyK/42OjP+PkY3/kZOR/5SWkv+UlpT/lpiV/5eZlf+Ympf/m52a/5udmv+dn5z/np+d/5+hnv+gop//oaOg/6Kkof+kpqP/paek/6aopv+mqKb/qKmm/6mrqP+pq6j/qauo/6usqv+rrav/rK2r/6+xr/+4ubf/xcfF/9fX1v/z7uz/8uvn//vz6f/89On//PPp//nx5v+kfF7/1Lqr/9bX1v/Fx8X/uLq4/7Gzsf+vsa7/rrCt/66vrP+ur6z/ra6s/6utqv+rrav/q62q/6mrqf+pq6j/qaqn/6eopv+mqKb/pqel/6Smo/+kpqP/o6Wj/6Kkof+ho6D/oKKf/5+hnv+eoJz/nJ6c/5yemv+bnZn/mpuZ/5ial/+WmJX/k5WS/5KTkf+Rko//jpKO/42PjP+Mjov/i46K/4uNiv+LjYr/bV9X/4NHJf+lWSn/mU8k/6GDc//EtKz/k4V6/0EuJP9CIxD/aTcW/3U9F/9wOxb/ckMk/35gT/+FZVb/XVJH/0hMR/9GSET3QkZCdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAS09KVU9RTf1YV1L/mH1u/7+to/+8noH/w3g2/9ibPP/coD7/36hA/8iCO/+KbV7/qaeh/5yfm/+PkI7/hYiF/4aIhP+GiIb/iIuI/4uNiv+Nj4z/jpGN/5CTkP+Ul5P/lpeV/5aYlf+Ympf/mZyY/5qcmf+eoJ3/n6Ce/6Cin/+hoqD/oqSi/6Olov+kpqT/pqek/6eopf+nqab/qKqn/6qrqf+qq6n/q6yp/6yuq/+srav/ra6s/66vrf+vsK//sbOx/7u8uv/Jy8n/5uXj//r29P/68+3//PXs//z16//89Ov/9e7m/7SMev/j4uD/29za/8nLyf+7vbv/s7Wz/7Gzsf+wsq//sLGu/7Cxr/+vsK7/rrCt/62vrP+tr6z/ra+t/6utq/+rrKr/qqyp/6mrqf+pqqj/p6qo/6epp/+mqKX/pael/6Slov+ipKL/oaOg/6Cin/+foZ3/np+c/52fnP+bnZr/m5yZ/5mbmP+WmJT/lZeU/5SWkv+QlI//jpCN/4yOjP+Ljov/iYuH/4iKhv96dXD/aD8p/6RXKv+dUSX/mWhN/7ahmv++raP/hXpy/008M/85IRP/XDAT/3I8Fv9tORT/cEIj/31gUv98Xk//Tk1G/0dKRvpER0KXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABNUEt1UVNP/3pmWv+qk4b/rI96/6RdLf+/byz/2Jw8/92lQP/gq0P/x39A/5uEdv+nqqb/mpyZ/4yOi/+HiYb/h4mG/4mLiP+LjYr/jY+M/4+Sjv+RlJD/lZeT/5ealv+Zm5j/mpyZ/5udmv+dn5v/nZ+c/5+hnv+ho6D/oqSh/6Olov+kp6T/pqel/6eppv+oqaf/qaqo/6qrqf+rrKr/rK2r/6yvq/+urqz/rrCt/66xrf+wsa//sLKw/7Kzsf+1trT/vb68/8vMyv/z7uz/9e3o//z17P/99u7//fbu//327f/48er/5t/O/+jo6P/c3Nv/zM3L/76/vf+3uLX/tLWz/7K0sv+ztLL/s7Sx/7Kzsf+xs7D/sLKv/7Cyr/+vsa//rrCt/62vrf+trqz/rK6r/6utqv+rrKr/qqup/6mqqP+oqaf/p6im/6anpf+kpqP/oqWh/6Gjof+goZ//n6Ge/56fnf+dn5v/m52a/5mbmP+YmZf/lpiW/5WXkv+Rk5D/jpGO/42PjP+LjIr/iYqI/4OGgv9fRDb/mVIn/6FVKP+ZWDP/qZKI/72rov+ZkIj/bWtn/1pMRf86JBn/TigP/3A7FP9sORT/cUYp/39iU/9uVUj/SExH/EZJRLcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAE9STpNgWVH/l3lp/5yBcf+PVC3/mFEf/5pTIP+MUSH/zos3/9OOOv/CcTj/jWpZ/56cl/+TlpP/i42K/4eJhv+IiYf/i42K/42PjP+QkY7/kpWR/5WXlP+XmZb/mpuY/5qdmf+cnpv/nZ+c/5+gnv+gop//oqSh/6Olo/+lpqT/paek/6eppv+oqaf/qauo/6qsqf+rrar/rK6s/62vrP+ur63/r7Gu/7Cyr/+xsrD/sbOx/7K0sf+ztLL/s7Sy/7a3tf+9vrz/2dfV//Tt6v/13sb//PLn//348f/9+PH//fjx//z27//m4c//5uXk/9ra2f/Ly8r/v7++/7i5t/+1trT/tbe0/7W2tP+1trT/tLWz/7O1sv+ztLL/s7Sy/7GzsP+xs6//sLKv/6+xr/+usK7/rq+t/62urP+srav/qqup/6mrqP+oqaf/p6im/6anpP+lp6P/o6Wj/6Kkov+go6D/oKGf/56hnf+dn5z/m52a/5qbmf+Ympj/l5mW/5SWk/+SlJH/j5GO/4yPjP+KjYr/iIuH/2VXTf+GSib/pVgq/5lQJ/+dgG//v6yi/62ck/90c3D/bG1q/2FWUf8/LCL/RSQN/206Ff9qOBP/cksx/35fT/9YTkX+R0tGzgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU1RQqXxkVv+Xe2z/hFc5/4JEGv+ERRv/VjUg/39cSP+hXS//vmgu/7llL/+HWkL/kYuH/4yQjP+Ii4j/h4mH/4qLif+OkI3/kJKP/5KUkP+Vl5T/l5iW/5mamf+cnZr/nJ2b/52gnf+foJ7/oKKg/6Kkof+kpqP/paal/6eopv+oqab/qaqo/6qsqf+rrar/rK6r/62vrP+usK3/sLGu/7Cxr/+xs7D/srSx/7O0sv+ztbL/tLaz/7W2s/+1trT/t7i2/72+vP/p4t7/6tfQ//fTlf/75rr//fLo//327v/99u7//PDm/+PMpf/e29n/1dXU/8fIxv+9v73/uru5/7i5tv+3ubb/tri1/7e3tv+2t7X/tra0/7W2tP+1trP/s7Wz/7K0sf+ys7H/sbOx/7CysP+wsa//r7Gu/66wrf+trqz/q62q/6qrqf+oqaj/qKmn/6aopf+lp6T/pKaj/6Okov+io6H/oaKg/5+inv+dnpz/m5ya/5qcmf+Zm5j/lpiV/5SVkv+SlJH/kJKP/4yPi/+KjYn/dW5o/3NEKf+pWiv/n1Qn/5hsVP+3pJr/uqWb/4F9d/9sbmr/aWxp/2ZeWP9EMij/QSMO/205FP9pORX/c1M//3FVRv9KTUnbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABcV1C+i2tb/4ViTf91Phn/czwY/0coFf+BZFT/lHFh/4JOMf+vXCr/rFwq/4dSM/+CeHL/iYuI/4iKh/+KjIj/jI+L/5CSjv+SlJD/lJaT/5eZlv+Ym5j/mp2b/52fnP+eoJ3/n6Ge/6GjoP+jpKL/o6Wi/6WopP+nqab/qaqo/6qrqP+qran/rK6r/62vrP+usK3/r7Gu/7CysP+ys7H/s7Ow/7O1sv+0tbT/tbW0/7W3tP+2uLX/t7i2/7e5tv+5urj/zcvJ/+3g2//ouJz/+MqL//rYmf/74qz//OjI//znxf/74Kr/5cSJ/9HKx//Oz83/xMXD/76+vf+7vbr/ury5/7q6uP+5urj/uLq4/7i6t/+4ubb/uLm2/7a4tv+2t7X/tra0/7S1tP+ztbL/srSy/7Gzsf+xs7D/sLKv/66xrv+usK3/rK2r/6usqf+qq6n/qaqn/6eppv+np6X/paek/6Omov+jpaL/oKSg/6Chnv+cn5v/m52a/5qdmf+Ympf/lpiU/5SVkv+Sk5D/j5GO/4yOi/+FhIH/aEYz/6dZLP+oWSv/n2NA/6+akP+9qqH/j4Z//25xbf9rbWn/aGpm/2RgW/9GNCv/RCQM/2o4E/9rPx//eFhJ/1ZNReUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHBdUdCHZlj/d0cm/3A7F/9EJRP/Wk1G/4xyZf+La1z/bkg0/59TJ/+hVSf/kFAt/3NgVf+IiYb/ioyI/4yOiv+PkY7/kpSR/5SXk/+XmJb/mZuY/5qemv+dn53/n6Ge/6GjoP+ho6H/o6Wi/6WmpP+lp6X/p6mn/6mrqP+rrKr/rK2r/62vrP+vsK3/sLGu/7Cyr/+xs7D/s7Sy/7S2s/+1trP/tbe1/7e4tv+3uLb/t7m2/7m6t/+5u7j/uru5/7q7uv/h2dT/3sO3//Grdf/3wYH/+MuN//PMi//er2r/+dOS//nQkv/tuHv/uayk/8fHxv/Cw8H/vsC9/7y+vP+8vrz/vL27/7u9uv+7vbr/u7y6/7q7uf+6u7n/ubq3/7e6t/+4uLf/tre2/7a3tP+1trT/tLWz/7O1sv+ytLH/srOw/7Cyr/+vsK7/rq+t/62urP+trav/qauo/6mqp/+nqqb/pqml/6Wno/+jpaL/oqOg/56hnv+dn53/nZ6b/5qcmf+Xmpf/lpiU/5SWkv+Rk5D/jpCN/4yQjP9qU0f/m1Uq/7FiL/+kWy3/qZKG/7+tpv+klY3/dXZy/25wbP9pa2f/ZGZi/2RgWv9EMij/TCgO/2g3E/9tSTT/Z1BB8QAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfGBQ3XpXQv9wOxb/TSkS/05COv9xc27/g3Rq/4NlVv9pSzv/ikci/5tRJf+aUyn/bU9B/4aDf/+KjIr/jo+N/5KTkf+UlpT/l5mW/5mbmP+bnJn/nJ+d/5+in/+ipKH/o6Oi/6SlpP+mqKX/pqmm/6eqp/+prKr/rK6q/66urP+vr67/sLGu/7KzsP+ztLH/srWx/7S1sv+2trT/t7m2/7e5tf+4ubf/ubq4/7m6uf+5u7j/vLy5/7y9u/+8vrv/yMjG/+bZ0//doYP/9q1s//e5ef/5v4L/xYtX/6p7Y//yuXv/+cCC//Krb/+nh3T/v7y5/8HDwf/AwL//vsC+/7+/vv+/v73/vsC8/73AvP++vrz/vL67/729u/+7vbv/u7y6/7m7uf+5u7f/uLm3/7e4tv+3t7b/tba1/7S3tP+1tbL/srWy/7GzsP+wsa//r7Cu/66vrv+sr6z/ra2r/6qsqf+qq6n/qKmm/6enpf+jpqP/oaKh/6ChoP+goJ7/nZ+c/5mcmf+Ympf/lpiV/5SWk/+UlpP/kZSQ/3puZf+XWDL/u201/7RmMf+tkHn/w7Os/7mpn/9+fXr/cXRx/2psaP9naGX/Y2Vg/2ReWP8/KyH/Vy8Q/2g8Hf9sTTz+AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB6WUf2dUco/18yEv9BMSj/aWtm/29ybv99dGz/g2dZ/2tRQ/9zPyP/mU8l/59TJ/9zSDL/gHl0/4yPi/+OkY3/k5WS/5aXlf+Ympf/mpyZ/52fm/+eoZ7/oaOh/6Olov+kp6T/p6el/6ippv+pq6j/qqup/6utq/+ur6z/r7Cu/7Cyr/+xs7D/s7Sy/7S1s/+0trP/tre1/7e4tv+4ubf/ubq3/7q7uP+7vLr/u7y6/7y9u/+9vrv/vr+9/76/vf/d1tL/28S4/+2ea//3sm//97dz//izc/94TDb/sJ6U/9uXYf/5tXX/9qls/7J8Xv+1raf/wcLA/8LCwP/Aw8D/wcK//8DBv//Bwb7/v8G+/7/Avv++wL3/vr+9/72/vf+9vbv/vL26/7u9uv+6u7r/ubq4/7i5t/+4uLb/tri2/7a4tP+0trT/tLWy/7Kzsv+ysrH/r7Gv/66wr/+usKz/ra2r/6usqv+prKn/qKmo/6WnpP+jpaL/oqOh/6Cjn/+eoJ3/m52b/5qcmv+YmZf/lpeV/5aZlv+eoJ3/nJmT/4xWOf/Hez3/xXg7/7qLZv/HuLH/yLiv/5WLgv97eXT/bnFs/2lraP9kZmL/YWVh/2JaU/87JRf/ZTUT/2A/KtsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGpELdltORb/PycY/2RkX/9sb2v/cHNv/3h1b/+GbWD/c1ZL/2U9KP+bTyb/oFQn/4pMLf91Zl3/jo+M/5GUkP+VmJT/mJmX/5qcmf+cnZv/n6Cd/6GioP+jpaL/pKek/6eopf+oqqf/qauo/6utqv+traz/rq+t/7Cxr/+xs7H/srOx/7O1s/+1trT/tre1/7a4tv+4urj/urq5/7q7uf+7vLr/vL27/76/vP++v7z/vr+9/7/Bvv+/wr7/xsbE/+TY0v/Yo4r/9qpq//m3cv/4uXT/zodT/2FEOP/Hsqr/snVQ//ivb//4rGv/04Vb/6qak//ExML/xMXC/8PEw//DxcL/wsTC/8PDwf/Cw8H/wcPB/8HCwP/AwsD/wMG//7/Avf++v73/vb+9/72+vP+8vbv/ury5/7m7uP+4ubj/uLq3/7e4tv+1t7X/tbaz/7O0sv+xtLH/sbKw/7Cxrv+usK7/ra+s/6ytrP+qq6r/qaqm/6Wno/+kpqP/pKaj/6mqqP+zs7D/vru4/8XAvf/Kw7//zsbA/9XLxv/a0c3/toxy/9KLQ//Xl0v/zZBY/9HCu//Esqv/tZuM/6iJeP+be2r/jG9h/3hpXf9mZV//YGNf/1pNRf9FJg//UzEaxQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVDAYyFMsEv9TSkP/am1p/25xbf9ydXD/dXhz/4d0av96XVL/YUIy/5NLI/+lVyv/o1ct/3BURv+LioX/lJaS/5ealv+anZn/nJ2a/56hnv+goqD/oqSi/6Wnpf+oqab/qKqn/6qrqf+rrar/ra+s/6+wrv+xsrD/srOx/7O1s/+0tbT/tre1/7e5tv+4urf/urq4/7u8uv+8vrz/vb68/72+vP++v73/wMG//8DBv//Awb7/wsPB/8LEwf/Z1ND/3szF/+ecb//6t3H/+rpz//q3cv98TTL/fWlg/8e2rf+Ua1f/+6xp//qxbv/rlV7/nYJ3/8LCvv/Gx8X/xsbF/8bHxP/FxsT/xcbE/8TFw//ExcP/xMXC/8LEwv/CxMH/wsLB/8DBv/+/wb//v8C+/76/vf+9vrz/u767/7u9uv+6u7r/ubq4/7e6t/+2uLX/tbi0/7S2tP+ztLL/srOw/7CysP+vsa7/rq+t/7K0sf++vbz/zMnG/9XOyv/a0c3/3NDK/9rMxv/Yx8L/1MG6/9C6sf/PtKn/0bOm/9a9sf/UsYX/361b/+TAZP/bpVf/y5tx/7uQcP+qgmf/nnhi/5VzYv+Qc2T/i25f/4ZmVv94X1D/Y11W/0U0Kvs/JxjCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4IRKrPy0h+mdpZP9tb2v/cHJv/3R2cv93eXb/hntz/39jWP9oTT//fkQj/6lZLf+wXS//eks0/4Z/ev+Wl5T/mZuY/5ydm/+eoJ3/oKKf/6Olo/+kpqP/p6il/6mrqP+qq6n/rK6r/62vrf+vsK7/sLGv/7K0sf+0trP/tbe1/7a4tf+4ubf/ubu4/7q8uf+7vbr/vL+8/76/vv+/wL7/v8G+/8DCv//Cw8H/w8PC/8PEw//ExcP/xsfF/+PY0//UrJj/9q1w//u/d//7wnn/4Zpe/10/Mf+roZz/yr22/5d8b//nml7/+7Vx//alZ/+neGH/vbaz/8jJx//Iycf/x8nH/8fIxv/HyMb/xsjG/8bHxf/Fx8X/xcXE/8PFxP/DxcL/wsPB/8LDwP/BwsD/wMG//7/Avv++v73/vr68/7y9u/+8vLr/uru5/7m6uP+3ubb/t7i2/7W2tP+3ubb/xcTD/9TRzf/g2dT/5tzX/+jb1f/n2NH/4czC/9q3p//TpY3/zZR4/8mHZf/Fe1X/wnNI/8R1RP/KgEv/0o5Q/9yfVv/lwWX/58ho/+O4X//Vj0j/wXI4/6xgL/+YVCr/jUwl/4ZMKv+BUDT/gFdA/39eTf99XU3/alVH9046L4wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4pHlBbVE7pamxo/25xbf9ydHD/dndz/3h7d/+BfXj/iHBl/3JXSf9rPyj/rFot/7ZiMv+aVzL/eWlf/5aXlP+anJn/nJ6c/5+hnv+ipKH/paak/6Wnpv+oqqj/qq2r/6ytq/+trqz/r7Cv/7CysP+ys7H/tLWz/7W2tP+4uLb/uLm3/7m6uP+7vLr/vL27/72+vP++v73/v8G+/8HCwP/BwsD/wcTB/8PFwv/ExsP/xcbD/8bHxP/V0tD/5dfQ/9+ddv/6vHX/+8R8//zCev+XXz3/cVpP/8TCwP/KxcH/q5KH/8B8Uf/8t3P/+7Bv/8eBW/+xpZ7/ysvJ/8rLyf/Jysn/ysrI/8nKyP/Jycf/yMnH/8fIxv/HyMb/xsbF/8XGxf/ExsP/xcTC/8PDwf/Bw8H/wMLA/8DBv/+/wL7/vr++/729vP+8vLr/ury5/7/Bv//Rzsz/39rX/+ne2v/s39n/7d7Y/+fOwv/ju6f/3aSI/9aMaf/SflL/z3dI/811Q//Lc0H/yXE//8dvO/+9ajn/tmk2/7huOP+4bTj/wHA5/9qnV//oyWj/5Lxh/9CIRP+MSSL/dDwc/245Gf9uNxj/cjsY/3Y9Gv96QRz/d0Mg/3dLMf94V0T7dFlKnAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcFdLOWZpZfBrbWn/cHNv/3N2cv93eXX/enx5/35/fP+MenH/fWBS/2JCMv+dUir/vGk1/7ZlNf92VUX/k5CM/5yem/+doJ3/oKKf/6Smo/+np6b/qKmn/6qsqv+trqv/rq+s/7Cxrv+xsrD/srOx/7O2s/+2t7X/t7i3/7m6uP+5u7j/u7y7/72+vP++v73/v8C+/8DBv//BwsH/wsPC/8PFwv/FxcT/xsbE/8bHxP/Gx8b/yMjG/+Ha1v/Vu67/8qtz//zGff/8yoD/9bNx/2JAL/+dkYv/y8rJ/8zKyf+7p53/l2dN//y2c//9uXX/5ZJh/6GLgP/Ky8j/zMzL/8zNy//Ly8n/y8zJ/8vLyf/Ky8n/ycrI/8nKyP/Iycf/yMfG/8bGxf/Gx8T/xcfE/8TFw//DxML/wsPB/8HCwP/BwcD/ycjH/9fV0f/l3tr/7OHc/+/h2//r1sz/6sa0/+SpjP/glG3/3oZY/9p9Sv/YfEf/13xG/852Qf+9azz/pVwy/4ZLKP9rOyD/WTAa/08uG/9NLyD/TzMm/2JFNv92Vkb/r25H/+XDZf/jumD/zotQ/5dxXP9mSz3/Tjgs/0AqIf81IRf/NB0Q/z0fDf9TKxH/ajgV/28/H/5iQjCoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABsYFlsaWtn/21wbP9ydHD/dXd0/3h7d/97fXr/f4F//4uCe/+EZ1r/bE9A/4NHKP++azf/wm85/4pSNP+Ifnb/nZ+c/6Chn/+ipKL/pael/6ippv+qqqj/ra2r/66wrf+vsa//sbKw/7K0sf+0tbP/tre0/7e5tv+6urj/u7y6/7y9u/+9vrz/v8C+/8DBv//BwsD/wsPB/8PEwv/ExcP/xcbE/8bIxf/IyMf/yMjH/8jKx//R0c7/5t3X/9mjiP/6vXj//cyD//3Ng/+6fE3/ZkxB/8G8uv/Oz83/zs/N/8W2r/+OcGD/8qZq//6+ev/2p2r/pXxo/8O+u//Ozs3/zc7M/83OzP/Nzsv/zc7L/8zNy//Kzcn/yszJ/8rKyf/Jysn/yMrH/8jIxv/HyMX/xsfE/8bHxP/LzMn/2tjW/+fh3v/v49//7+Da/+3Vyv/svqf/6KSB/+aPYv/igk3/4IJL/96DSv/Xfkb/v24+/5lYMf95RCb/WTMf/0kuH/9MNSn/W0Q5/2hRRv90XFH/fmle/414bv+djoT/rKKY/7q0sP+nfmj/1ZJM/9mYTv/Mhkz/xbSs/8Stof+VhXr/fnRs/3dpYf9tWlH/W0c+/0IwJv8wHA//SScQ/0kuHpUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGhmYp9rbWr/b3Ju/3J2cv92eXX/eXx4/31/fP+Agn//h4WB/453a/94Wk3/akAs/71pNf/Jdjz/smQ3/3tiVv+bm5f/oaSg/6Wmo/+oqab/qauo/6qtqf+tr6z/sLGv/7GzsP+ztLL/tLa0/7a3tf+3ubb/ubu4/7u8uv+9vrz/vr+8/7/Avv/AwsD/wcPB/8PEwv/ExcP/xcbE/8bHxv/HyMb/yMrH/8rKyf/Kysn/yszJ/9/b2f/fz8f/6KR2//3Lgf/90of//MZ//3dMNf+NfXX/y8rJ/9DRz//Q0c//zcbB/6KKf//HglP//sF8//22df/Gg2D/uq+p/9DQz//P0M//z9DO/8/Qzv/Pz87/zs/N/83OzP/Nzsz/y8zL/8vMy//KzMn/ysrI/83Nyv/a2dX/6OTg//Dn4v/x5N7/7tXK/++8pP/toXv/6o9c/+mJUP/ni1D/44dM/9B+SP+rZDj/g00r/1s1IP9OMiP/Vj4z/2ZQRf95Ylj/i3Vs/5eFff+ekYr/oZeR/6Ocl/+joZ3/pKWh/6Wmo/+rrKn/srOx/52HeP+/dD//zoVC/8FyOP+0npD/w7Kq/6KRh/99fnv/d3l1/3N0cP9ycmz/dWxm/2tbUv9HNSz5RTAldQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaWlkoGxuav9xcm//dHZ0/3h6d/97fXn/fn99/4KEgP+GiYX/k4R7/4FiU/9lRjj/nlYt/8x5P//Hczv/glQ9/5eQjP+kpaL/pqek/6iqpv+qrKj/ra6r/7Cwrv+xsrD/s7Oy/7S1s/+2trT/uLi2/7m6uP+7vbr/vb68/76/vf++wL7/wMG//8LDwf/DxML/xMXD/8XGxP/HyMX/yMnG/8jJyP/Jysn/y8zJ/8zNy//Nzsz/6OHd/9Wyof/6uHv//dGI//7Wif/foGb/YEI0/7euqv/Q0dD/0tPR/9LS0P/Rz83/t6GX/51rT//+vnr//r56/+OTYv+nk4n/0NLP/9LT0P/Q0tD/0NHP/9DRz//P0M//0NDO/8/PzP/Pz8z/z8/N/9XW0//l4uD/7+jl//Hl4f/w3NP/8sey//Gpg//wlWL/749V/+uRVf/mj1P/zH5I/6VlOf9yRCj/VjUj/1E6Lv9mTkL/fWVb/413bf+ejIT/pJiR/6uloP+vrar/rq2r/6ytqv+oqqj/p6il/6Smov+ho6H/oqSi/6Slov+nqKb/lYqD/6ZiPP/Edjv/uGgz/6aHcv+9rKL/qJOI/4B+ev93eXX/cnRw/25wbf9qbGj/aGpn/25pY/Z2Y1ltAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABqbGiCbnBs/3J0cf92eHX/eXt4/3x+e/+Ag3//hIeD/4iJh/+Ri4b/im5i/3BUSP95Ryv/yHU9/898Qf+rYjr/hXJo/6Oiof+nqab/qayo/6ytq/+vr67/sbOw/7O0sv+1tbP/tre1/7e5tv+5urj/ury6/7y+vP++v73/wMG//8HCwP/Cw8H/xMXD/8XGxP/Gx8X/x8jG/8jJyP/Jysn/ysvJ/8vMyv/Nzsz/zs7M/9jX1P/q4dz/3qSE//3HgP/+14z//tSJ/5tmRP95Y1n/y8rH/9TU0v/U1NL/1NTT/9TU0//Fta3/jm5e//awcP/+xX//9alt/6mCb//KxcL/09TS/9PU0v/S09L/0tPR/9LS0f/R0tD/1NXT/9/e3P/s6Ob/8enl//Lm3//01cb/9bWV//WdbP/0llr/8Jlb/+mXWP/WiFH/pmg+/3JFKv9TNib/V0A0/3NbT/+GbmT/nImA/6eZkv+zrKj/t7Sx/7m4tv+1t7T/srSy/7Gyr/+vsK3/ra6s/6usqv+oqqf/pqel/6Omo/+hoqD/oKKf/6Cin/+Vk4z/jlc5/7tqNv+yYjH/n3Vd/7ejm/+vmIz/g4F8/3h7d/9zdnL/b3Ju/2tuaf9oamb/Y2Zh/GdmYbsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGttaWNvcm7/c3Zy/3d5df97fHn/fYB8/4KEgf+FiIT/iYuI/42Niv+UgHb/gmFV/2VDMv+yZjP/04FD/8pzPv+DWkb/n5uX/6mqqP+rrar/rq+t/7GxsP+ztLL/tba0/7a3tf+4ubb/ubu4/7u8uv+8vbv/vr+9/8DBv//Cw8H/w8TC/8TFw//Gx8X/x8jG/8jJx//Jysj/y8zK/8zNy//Mzcv/zc7M/8/Qzv/P0M//49/d/93Mw//wrnv//tSK//7ckf/8xX//a0Y0/6KVj//S09D/1tbV/9bX1f/W19X/1tbV/9HJxP+ki4D/x4VW///Kg//9vHv/yYpn/8C2r//W19X/1tfV/9XV1P/V1tT/29rZ/+fl4//x7On/8ufi//Ph1//4ybD/+Kp///mbX//4oWL/76Bh/9+UWf+ydEX/fk8x/1M2Jf9aQjb/dF1S/413bP+gjYX/r6Od/7u0sP/Av73/vb+8/7y9u/+7u7r/uLm4/7W4tv+0tbP/srOx/7Cyr/+usa7/rK+s/6qsqf+nqab/o6Wi/6Gjof+gop//naCb/5mal/95UDz/sWIy/7FhMP+gaUr/taCW/7Wekf+Gg33/enx5/3V3c/9wc2//bG9r/2lsaP9kZ2P7YmVgqQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbW9rRHBzb/h1d3T/eXx4/31+e/9/gn7/g4aC/4iJhf+LjYn/j5GN/5eNh/+GaFv/blFE/4pPLv/Rf0L/0n5E/6hhPP+QgXn/qquo/62urP+usK7/sbOw/7O2tP+2t7X/uLm2/7m7uP+7vLr/vb68/76/vf/AwL//wsPB/8TFw//ExsT/x8fF/8jJx//Jysn/ysvJ/8vMyv/Nzcz/zs7M/87Pzf/P0M7/0dHQ/9LU0v/r5eL/1rCc//zAff/+2pD//96T/9CSXf9lSj7/xsK+/9fY1v/X2Nf/2NjX/9jZ1//Y2df/19XS/7yonv+dcFT//siF//7Kiv/noW7/tqWc/9ra2P/c3Nr/4ODe/+vn5f/y6uf/8eXe//bYyf/5vJr/+qVv//yjZf/4qWn/66Rm/8mIU/+OXDn/XDon/1c/M/9wWE3/jXZr/6CMg/+ypZ//wbu4/8bHxP/Dw8L/w8PA/8DBv/++wL7/vb68/7y9u/+6u7n/t7i2/7W3tP+1tbP/srSx/7Cyr/+ur63/rK2r/6mqqP+mpqT/oqSi/5+joP+cn5z/mZuY/3NVRf+pWzD/sGAw/6NfPP+wmpD/uqGW/4mFf/97fnr/dnl1/3N1cf9ucW3/am1p/2ZpZPdjZWGCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABxcm8jcnRx5XZ4dv96fHn/fYB8/4GCf/+EhoT/iYuG/4yOi/+Qko//lZOO/5N8c/9/YVT/akMv/8FyPP/Xh0f/y3U+/4lkUv+npKD/ra+s/6+xrv+zs7H/tbe1/7i5t/+5urj/uru5/7y9u/++v77/v8C+/8HDwP/DxML/xcbE/8bHxP/IyMb/ycrI/8rLy//LzMv/zM3L/87Pzf/Q0M7/0NDO/9DRz//S0tH/3dza/+zk4P/fp4X//s6H///glP//2I7/jl5A/4l3b//T0M7/2dnY/9jZ1//Z2tj/2tvY/9na2f/Z2dj/zr+3/55/cP/1vYH//9ef//jBjf/FppD/4Nza/+7r6P/w6eT/79/Z//fSvv/7tY3//qZq//2wb//yr27/3J1j/653S/91TDH/Ujks/2lRRf+GcWb/nYmA/6+hmv/Burb/y8rH/8rKyP/HyMb/x8jF/8PFw//DxcL/wcPB/7/BwP+/wL3/vr+8/7q9uv+4urf/t7i1/7e3tf+0tbP/srKw/6+wr/+trqz/qqyo/6aopv+kpaP/oqOg/6Cgnv+anJr/dV9T/6BYMP+yYTD/qF0x/6qTif+9pZv/kYeA/3x/e/93enb/dHZy/29xbf9sbWr/Z2pl9WRmY1wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHJ0cRF0dnPJeHt3/3t/ev+AgX7/goSA/4aIhf+Ji4j/jY+N/5GTkP+UlpP/moyG/4ZnWv9pTD//llYw/9eFSP/WhEf/q2VA/5uMhv+vr63/s7Ow/7W2tP+3ubf/ubu3/7q7uf+9vbz/v8C9/7/Avv/CwsH/xMTD/8bHxP/HyMX/yMjG/8nKyP/My8r/zczL/83NzP/Oz83/z9LO/9DSz//R09D/0tPR/9PV0//m4uD/3s7F//Cyf//+2o///+OW//rFgP9qSDf/sKag/9nb2P/a29r/3Nza/9vc2v/b3Nr/29zc/97d3P/a0c7/uqWc/9Cjaf//4rb//t21/+fDmv/t5+P/8+Xd//nTv//7t4///q1w//67eP/us3P/z5dg/5JlQf9ePyz/W0I2/3dgVP+WgXf/qZmR/7+3sv/Oy8n/ztDN/8zNy//LzMv/ysvJ/8jJx//IyMj/x8fG/8TGw//Dw8L/w8TB/8DBwf+/wL3/vr68/7u7uf+5ubf/t7m2/7W2tP+ztbL/sbOw/6+wrv+rrav/qKmn/6SnpP+ipKL/oaKf/56enP96bGP/mVQx/7NhMf+nVyz/pYx//7+pn/+ZjIP/f4B9/3l7d/91eHT/cHNu/2xvav9oa2fuZWhkNgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAc3VyDHZ5dJx6fHj/fYB8/4GDgP+EhYP/h4mH/4qNi/+PkI3/k5SS/5aYlf+bl5P/kXpv/35gU/9tRC//yXlA/9uMTP/NeEL/km1b/66qp/+0tbP/tri1/7m6uP+7u7r/vL67/77Avf/Awb//wsLA/8PEwv/Fx8T/x8jF/8nKx//Ky8n/zMvK/83OzP/Oz83/0NDO/9HS0P/S09H/09TS/9TU0//V1tT/19nX/+zm5P/WtKT//cKC///glP//45f/zpNe/25TR//MyMb/3Nzb/93d2v/d3dz/3t3c/97c2//e3tz/39/e/+Dg3v/VxcD/wpl4///oy///8Nv//OfX//rl2v/917///syW//7OlP/qun3/wZFd/4BYOv9WOyz/aVBE/4lyZ/+gjIT/tqqk/8zGw//X19b/09LS/9LR0f/Q0M//z9DO/83PzP/Mzsz/y8zK/8nKyf/Kysn/x8jG/8XGxP/ExcP/w8TC/8LCwP+/v73/vLy6/7m7uP+5urj/t7i2/7W2tP+ytLH/sLGv/66urP+rqqj/p6ik/6Smov+ipKL/n6Cc/4N4c/+RUjD/tGEx/6lZK/+ef3D/vaie/5+Qhv+Agn//e356/3Z5dv9ydHH/bXFs/2ptac9na2YVAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5e3YFeXp1a3t9ev9+gX7/gYWB/4aIhf+Jioj/jY6M/5CTjv+TlpL/l5mW/5udmv+djof/iWlc/2tOQP+dXDL/24xK/9mKTP+za0T/oJSM/7O2s/+3ubb/uru4/7y9u/++v7z/v8G+/8DCwP/ExML/xcXD/8bIxf/Iysj/ysvJ/8vMyv/Nzsv/zs/P/9DQ0P/R0s//0tLQ/9TT0//V1NL/1dXT/9bW1P/f3tz/7ebj/9uoif//0Yn//+WY///ckf+VY0T/kYB3/9nW0//e3dz/3t7c/9/e3f/f3t3/39/d/+Dg3v/k4+L/5+Th/+bb1//gz8f//+/g///9+f///fv///bt//3q0v/u1an/xqRr/4JZO/9YPzL/cFhM/5J8c/+omJD/wrm0/9XT0f/Y1tb/19bW/9XV1P/U1dP/09PS/9HT0P/Q0c//ztDO/87Pzf/Nzcv/y8zK/8rKyf/Iycf/xsjH/8XHxP/ExcL/w8TB/8DCwP+9v73/vLy7/7q8uf+4ubf/tre1/7W2tP+ytLL/r7Gt/6ytqf+oqaf/pael/6Olo/+fo5//jIaC/4ZOMP+0YTD/q1ss/5h0Y/+7pJv/o5GH/4ODgP98f3v/d3p3/3N1cv9ucm38a25qo2ptaQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHl8dwF5fHdDfIB7+X+Cf/+EhYP/h4mG/4qMif+Oj4z/kJWQ/5WYk/+YmZf/m52b/5+alv+TeW7/gWNX/3BGMP/MfUP/35JP/9R+Rf+acl//srCs/7i6uP+7vLr/vr+9/7/Avv/BwsD/wsPC/8XFw//GxsX/yMrH/8nLyf/LzMv/zM3M/87Pzf/P0M//0dLR/9LS0P/U09H/19TT/9bV1P/X1tX/2NjW/+bk4v/h1c7/6a1////bkf//5Zj/+smD/3FNOv+1qqX/3t3c/+Dg3//g39//4eDf/+Hg3//i4+D/5+Xj/+3o5f/17Of/8eDZ//ni1v//+fP////////////+/fz/6N68/6BtTv91VUb/hWle/52Jf/+vn5n/ycK+/9vd2f/b29r/2dnZ/9nZ2P/Z2Nb/19fU/9XW0//U1dP/09PS/9HT0f/Q0c//zs/O/87Pzf/Nzsz/y83J/8rJyP/Iycf/xsjF/8XGxP/ExMP/wMPB/77Avv+9vrz/u7y7/7m7uP+3ubb/tre1/7S1s/+vsq//rK+r/6mrqP+mqKb/pKaj/6GjoP+XlZD/f040/7RgMf+sWy7/lG1Z/7aflv+nk4n/hIWB/31/fP94e3f/dHdz/3Bybvxsb2pza25pAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHp9eR19gHzWgYN//4WHhP+IiYb/i42K/4+Rjv+SlZH/lpiV/5mcmP+cnpv/nqGf/6CQif+NbmL/blFE/51eNf/dj03/3o9O/75wSf+llo//urq4/7y+vP+/wL7/wMK//8LDwv/DxcT/xMbF/8fIxv/Jy8j/y8zK/8zNzP/Nz83/z9DO/9HT0P/T09L/09TT/9XV1P/X19b/2NjX/9jY1//b2tj/6+fl/9a8r//7voL//+OW///lmP/ZoGj/c1ZK/9DLyP/h4d//4OLg/+Hh3//h4uD/5uXk/+zo5f/t4d7/6NHG//XLtP/80LH//+nP///79P////////////37+f/eupj/t5OC/7iqo//AtK7/0s3J/+Hh3//d39v/3d7b/9zc2//b29r/29va/9ra2f/Y2df/1tjV/9bW1f/U1dX/09TS/9LS0P/R0M//z9DO/8/Pzf/Ozsz/y8zK/8rKyP/Hycb/xsfG/8XFxP/CxMH/wMG+/7/Avf+8vbz/ury5/7i6t/+2t7X/tbWz/7KzsP+vsK3/qqyp/6epp/+lpqT/oqOh/56em/94TTf/smEx/61bLf+TZ1L/sZqP/6mTiP+FhoH/f4B+/3p8eP91eHT/cXRw9W5xbDYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAfH57Dn6BfqODhYH/hoiE/4iLiP+Mjov/kZKP/5SVk/+XmZf/mp2Z/56fnP+go6D/o6Cb/5h+dP+Ia17/bUYy/8yBRP/imFP/2oVJ/6N0Xf+2tLD/vr++/8HBv//CxMD/w8XE/8XHxP/Gx8f/yMrH/8rLyf/Nzcv/zs/N/8/Rzv/Q0tD/1NPR/9XU1P/V1tX/1tfW/9jZ2P/a2tj/2tva/97f3P/v6OT/16uU///LhP//5Zj//+KV/6l0Tv+QfXP/2tjV/+Lh3//i4+H/5+bj/+3p5v/w5+L/6NXL//HCq//5tor//sqP///ntf/w48X/5dyu//fz7////fn//vXr/+7b0f/b0s7/4t7d/+Xl4//i4t//4eDf/+Hf3f/f3d3/3t3c/97d2//d3dr/29zZ/9nb1//Z2df/2NnX/9bW1f/V1dT/1NTT/9PS0P/Q0c//z9DO/87Ozv/Nzsz/y8zJ/8nKyP/Hycf/xsfF/8TFwv/CwsD/wMG//72+vP+8vLr/uru4/7i5tv+2t7T/tLSy/6+xr/+rrav/qaqo/6eopf+jpaP/oKGe/3NOPP+vXi//rVwt/5FiS/+ulYr/qZOI/4aGg/+Bgn//fH56/3d5df9ydnLSb3JtCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAgn8EgIJ/Y4OGgv+HiIX/iY2K/42PjP+Rk4//lpeV/5mal/+bnZr/nqCd/6Kjof+mp6X/pJaN/5F0aP90WEz/mVw0/9+RT//illL/ynpI/6aTiv+/v73/wsPB/8PEw//Gx8T/xsfF/8jJx//Jysn/zMzL/83Qzf/P0c//0dLQ/9LU0v/U1NP/1dbU/9bY1f/X2db/2dnY/9va2//b29r/5eLh/+rg3P/gqIP//9eN///lmP//1oz/gllA/7Glnv/i4d//5uPi/+zp5//y6+f/7+Db/+7Jtv/5tIr//r16///clf/r1Jb/xKt1/51wTv+ph3T/38iX///y2///7M//99Gy/+fd2f/o6OX/5uXi/+Li4P/h4d//4eDf/+Hf3f/h39z/3t7c/93c2//c29r/29vZ/9va2f/a2df/2NjX/9fW1v/U1tP/09TS/9PT0P/Q0tD/z9DO/8/OzP/MzMv/yszK/8jLx//Hycb/xsfF/8LDwv/Awr//v8C9/76+u/+7vLn/ubu3/7a5tf+0tbT/sbKx/62urf+rq6r/qKmm/6Wmo/+ho6D/clND/6lbMP+sWy3/j15E/6iOhf+qlIn/h4iF/4GEf/99f3z/eHp2/3V3cpQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACChIAug4aC74eJhv+Kjon/jpCN/5KVkf+Wl5X/mZuY/5ufnP+fop7/o6Wj/6epp/+pp6H/nYN5/49yZf9qRjX/yH5F/+WdVf/fj1D/r3RZ/7m0sf/Cw8H/xMXD/8bHxf/Iycb/ysrI/8rLyf/Ozcz/z9DP/9HR0P/T0tL/1NTS/9XV1f/W2NX/2NjW/9nZ2P/a2tr/29zb/93d2//q5eP/2ce+//Cxf///4JT//+WY//K9ev94WEj/zcbD/+rn5v/x7Or/8+nl/+3RxP/4upb//bh9///Wjf/23ZP/vqFq/35bPv9tUED/m35v/+LY1f/PwLj/99iu///qvf/9zqD/2rur/+jl4f/m5eL/4+Pg/+Pi4P/i4uH/4eHf/+Lf3v/f39//3t/d/93e3P/d3dz/29za/9rb2f/Z2tn/19jW/9bW1f/V1tP/09XS/9LS0f/R0s//z8/O/83Nzf/MzMv/ysvI/8nLyP/Gx8X/w8XC/8LDwf/Cwr//vsC9/7u9u/+5u7j/t7m2/7S2tP+ztLH/rrCu/6usqv+oqaj/pKak/6Gkof9zWkz/pFgv/6xcLf+QXEH/poyB/6qUif+JiYX/goWA/31/fP94e3j8dXd0UAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIOFgRKEh4OxiIuG/4uOiv+PkY//lJWT/5eYlf+am5j/nZ+c/6Gin/+lp6P/qaqn/6usqv+pm5T/lnlu/35hVv+MVTP/35VR/+ahWf/VgUv/p4x+/8LCwP/GxsT/x8jG/8nKyP/KzMn/y8zK/87Pzv/R0c//09LS/9PU0v/U1dP/1tfV/9jY1v/a2dj/29va/9vc2//c3tv/3t/d/+3m5P/Ttqf/+8GB///lmf//5Zj/x5Be/4lzaf/o5eL/9e3q/+7e1f/1wqj/+7aD///Nhv//5Zj/0bZ4/4VlQv9hRjb/eGBU/6WRiP/Hvbj/6+Pg/9bHwP/MoGz//+Wo///Tlv/jp4T/49rU/+bl5P/m5OP/5OXj/+Pl4//j4+L/4uLg/+Hh4P/g4d//3uDe/93e3P/d3tz/293b/9ra2f/Y2tf/19jX/9bW1f/U1dT/0tPR/9HS0f/Q0M//z8/N/87OzP/LzMr/y8vJ/8fIxv/FxcP/xMPC/8LCwf+/wb//vb+9/7u8uv+5urf/tre1/7O1s/+wsa//rK2r/6qrqP+lp6T/o6Sh/3ZgVf+gVi//rVot/49aPv+mjH7/q5WJ/4uKhv+DhYH/foF9/3p9euB3eXYTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhYeDBIeJhWiJi4j/jY6M/5GSkP+UlpP/mJqW/5udmv+en53/oqOh/6eopf+qq6n/ra2s/6+tqv+ljYX/mHtw/2hKPP+6dUH/56Ba/+SaVv/BeVH/tq6o/8fHxv/Jycj/ycrK/8vNy//Nzsz/z9HP/9LT0f/T1NP/1dbU/9bX1f/X2df/2dnY/9va2v/b3dr/3d/c/+Dg3//j4uL/7+bj/9awmP//0I///+ee///hmf+XaEn/zsK8//Xr6P/wzLr/+reM//7Df///4pb/5c6J/518Uf9mSDX/bVVJ/5WAd/++sKr/3NfV/+3s7P/t6un/49TO/6mFb//+0o///9yU//axfP/Tu63/5uXj/+bn5v/l5uX/5ebj/+Xl4//k5eL/4+Ph/+Lh4f/g4eD/3uDf/97f3f/d3dz/3Nza/9rb2v/Y2tj/1tfX/9bX1f/U1dP/0tTR/9LS0P/Q0s//zs/N/83OzP/My8r/ycrI/8fHxP/FxcP/w8PC/8HBwP++wL7/vb68/7u8uf+4ubf/tLW0/7Kzsf+ur63/qquo/6eopf+lpqP/emdd/51UL/+tWi3/jVk9/6SKff+rloz/i4yH/4WHg/+Agn//fH16mAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAh4mFKomLieOOj43/kZOQ/5SXk/+Ympf/m5ya/56hnv+ipKL/p6im/6msqf+tr63/sLKw/6+koP+cgXX/jHJl/3pMMv/dlFL/6adb/+CNT/+rf2n/xMG+/8rKyf/LzMr/zc7M/83OzP/R0tD/0tPS/9TU1P/W1tX/19jV/9ra1//a29r/3Nzb/93e3P/g4N//4uHh/+nm5f/s4t//4Lab///fpf//6qv//NaX/7CHaf/t2tH/+MCh//27gP//143//+WY/76faP9vUDf/ZU1A/4RuY/+zpJz/2dPP/+zu6//r7Ov/7Ozq/+vr6v/p4Nv/t6CV/9adZf//4Zb//sSA/9agg//m3tn/6Ono/+jn5//n5+X/5efj/+Xl5P/k4+T/4+Li/+Li4f/g4eD/3t/d/97e3P/c3dz/3Nzb/9rb2f/Y2dj/19jW/9bX1f/U1tP/09TS/9HS0P/P0M7/zs/N/8zNyv/Ky8j/x8nG/8XHxP/DxML/wsLB/7/Bv/++v73/u7y6/7m6uP+2t7X/s7Sy/6+wrf+qrKn/p6mm/6Wmo/9+bGP/mlQu/6taLv+KWD7/pIh7/6qYjv+LjYj/hYeE/4GCgPt9f3tBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACJi4cMi4yJlo+Qjv+RlJD/lZiV/5mal/+bnJr/oKGe/6Slov+nqKf/qa2p/62wrf+ws7H/tLOw/6qXjv+cf3L/dFlM/6doO//opVv/6aRc/9N/T/+vnJH/y8vJ/8zMy//Oz8z/z9DO/9LT0f/T1dP/1tXV/9fX1v/Y2dj/2trZ/9zb2v/c3dz/4ODe/+Li4f/l5eX/7uvp/+bb1v/wzrL//+zA///vwP/+2Kn/8ryd//u/mP//zIn//+Wa/93Gg/+La0X/YkY3/3lgVf+ol4//z8fD/+jn5P/u7ez/7e3s/+3u7P/t7uz/7e3s/+rn5f/PvLL/o3RX///aj///1oz/8Kl5/9jHvf/p6Ob/6Ofn/+jn5v/n6OT/5eXl/+Xl5f/j5OP/4+Pi/+Lh4P/f4N//3+Dd/97e3f/c3dz/29za/9ra2P/X2df/1tjW/9bX1f/U1dP/0tLR/9HSz//O0M3/zM7L/8vMyf/Hycf/xsjE/8PGwv/Cw8H/wMHA/77Avv+7vLr/ubq5/7e4tf+0tLL/sLCv/6uuq/+oqaj/pqej/4Jyaf+YUy3/qlks/4lZQP+kiHv/p5iQ/4yNi/+Fh4T/gYSBzXyAegsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI2PiwGNjotJj5CO95OUkv+WmJX/mZuX/52enP+hoqD/paak/6mqqP+rrav/r7Cu/7Kzsf+1t7T/ta+q/6WKgP+afnP/akg3/8+NTf/rq1//6J5Z/7t5WP/Bu7f/zM7N/8/Qzv/Q0c//09PS/9XW1P/X19b/2NjX/9na2f/b3Nv/3d3b/9/f3f/i4t//5efl/+vs6v/z8O//6t/a//zlz///9dr///TW///syP/+3LP//+Co//3mov+1lmT/bEw1/2tSRv+TfnT/xry2/+Tg3f/u7u3/7e/t/+/v7v/v7u7/7+/u/+/v7v/v7+z/7Ozr/+LUzv+kiHr/6LJz///hlf/9vHz/0qaP/+jj4P/p6en/6enn/+jo5v/n5+X/5ejl/+Xm4//k4+L/4+Li/+Hi4f/h4d//4N/e/93e3f/c3dr/29va/9na1//Y2df/19fV/9XW1P/T1NL/0dLR/87Qz//Oz83/zM3L/8rKyP/Iycb/xcfE/8PEwv/BwsD/v8G+/72+vP+6u7n/tre1/7S1s/+wsrH/ra6s/6qqqP+mqKX/g3Vt/5lTLv+pWS3/h1tE/6eJe/+lmJD/ioyJ/4eJhP+ChIFxAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAI2PjBaQko+1lJWS/5aYlf+am5n/naCd/6GkoP+mp6X/qquo/62trP+wsa7/s7Ox/7W3tf+4urf/sqSd/6OIfv+Ncmb/h1Q0/+ejW//trmL/4pFT/62Fcv/Kysj/0NHP/9HR0P/U09P/1tfV/9jZ1//Z2dj/2tvZ/93d3P/e3t3/4OHf/+Xk4//q6+n/8PDv//f08//x6eb///ny///99v//+u7///bf///z0f/t3rL/nXhN/2lNPv+AaV3/taef/9zW0//w8PD/7+/u//Dw7v/v8O//8PDv//Dw7//w8O//8PDv//Dw7v/v7+//6uTh/76poP+seFP//96T///QiP/no3n/39LK/+vq6f/q6+n/6ero/+jp5//n5+b/5+bl/+Xl5P/k5eL/4+Pi/+Li4f/g39//39/e/93e3P/c3Nv/2tvZ/9na2P/Y19b/1tfV/9XV0v/S09L/0NLQ/8/Qzv/Mzcz/ysvJ/8nJx//Fx8X/xMbD/8LEwP/Awb//vr+8/7u7uv+2t7b/tbaz/7K0sf+vsK3/qqyp/6eopv+FdnD/l1It/6hXK/+HXkn/p4x+/6GZkv+LjIn/iIqG54WHhB0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkZOPApKUkFyUl5P/l5mV/5qcmf+eoJ3/oqWh/6appv+qrKj/ra6r/7Gyr/+ztrL/tri1/7m7uP+7urf/rpmQ/6aKfv90WEv/tXRC/+yrYf/sq2L/1IJQ/7Simf/R0tD/09PS/9XV1P/W2Nb/2drY/9rb2f/c3Nr/3t7d/+Dg3//i4+H/5+jm/+7u7f/29vX/+vf2//n18////v3///7+///+/P///PL/6d+v/51uTP+LbFz/p5eP/9LLx//q6Of/8PDv//Dw8P/v8e//8fHw//Hx8P/x8vD/8fHw//Hx8P/x8fD/8fHw//Dw8P/u7Ov/2MjB/518av/xv33//96T//q2ev/SsJ3/6ubj/+vr6v/s6un/6eno/+jo5//n5+b/5ufm/+Xm5f/k5OP/4+Pi/+Dh4P/g4N//3t7d/93d3P/b3Nv/2tvZ/9nZ2P/X2Nb/1tbU/9PU0//S09H/0NDP/83Ozf/LzMr/ysrI/8jIxv/FxsT/w8XC/8HCv/++vrz/u7y7/7i5t/+1trT/s7Wy/7Cxrv+rrKr/qKmm/4Z4b/+YUy3/p1cq/4RfTP+tjoD/nJeT/4yPi/+JioiNhoiFAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkpSQIJSXk8WYmZb/m5yZ/56hnf+jpaP/pqmm/6msqP+tr6z/sbKw/7O1s/+2uLb/uru5/72+vP+7sq3/q5GF/6OHfP9sSTb/15VU/+6yZP/rpFz/v3tY/8XAvP/T1NL/1dbU/9fY1//a2tn/29za/9zd2//f393/4eDg/+Pk4v/p6ej/9fPy//v39v/79/b//v38///+/v///v7///7+//Hw7v+qf2j/wZ6L/9DHw//l4uD/8fHw//Dx7//x8fD/8fLw//Hy8P/y8vH/8vLx//Ly8f/y8vH/8vLx//Ly8v/y8vH/8fLx//Hx7//o39v/s5uQ/7mDV///35T//8uE/+Giff/i2NL/7ezr/+vr6v/q6un/6ero/+jp5//n6Ob/5ufl/+Xl5P/k4+P/4uPh/+Dh4P/f397/3d7d/9zd2//b3Nr/2trZ/9jZ1//W1tX/1NXT/9PU0f/S0dD/zs/N/8vMyv/Ky8n/ycnH/8bHxf/ExcP/wsLA/7++vf+8vbv/ubq4/7a3tf+0tbL/sLGv/6utqv+oqaf/hndu/5lSLf+lVir/iGVU/7KVif+YlpL/jY6M7omLiCsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUlpIDlZaUZJiZl/+bnJn/n6Ge/6Omov+nqKb/qqyq/62vrf+xsrD/tbWz/7i5tv+7vLn/vr+9/7/Avv+6qaL/rJGF/5N5bP+FVDX/7Kxi/++0Zv/ll1f/soVv/8/Ny//W19X/2tnY/9vb2v/c3Nr/3d7c/+Dg3//h4eD/5Obj//Pv7P/48e3/+e3n//748////v3///79///+/f/+/fz/5c++/+bh2//s6ef/8vHw//Py8v/y8/H/8fLw//Lz8v/z8/H/8/Pz//Pz8//09PP/8/Py//T08//z8/P/8/Py//P08//z9PL/8/Py/+/r6v/Rv7X/mHNe//bGgf//3JH/+LJ4/9K1pv/r6Ob/7Ozr/+vr6//q6+r/6erp/+jp5//n5+b/5efl/+Tm5P/j5OP/4eLg/+Dh4P/e397/3d3c/9zc2//a29n/2drY/9fY1v/V1tT/09TS/9HT0P/Pz83/zc3L/8zMyv/Jy8j/x8jG/8TFw//Cw8D/v8G+/72+vP+6vLn/uLm2/7S1sv+vsa//ra6s/6mqqP+GdGz/m1Mt/5xQJ/+ScWH/tJyR/5aVkv+Oj42MiIyIBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACVlpMgmJqWwZ2emv+goZ//pKWi/6ippv+rq6r/ra+t/7GzsP+1trT/uLq4/7q8uv+9v73/wcLA/8HAvv+2oJX/rpOH/3pfU/+vc0D/77Rm/++0Zf/ci1X/s5mM/9fY1v/a2tn/29zb/9zd2//f4N3/4OHf/+Pk4v/w6+j/8+nk//XWx//95ML///nv///+/f///v3///79//v7+v/t6t7/9fTz//j49//19fX/8/Ty//Pz8v/y8/L/9PPy//P08//09PP/9PTz//T18//19fT/9fX0//X18//19fT/9fTz//T08//09PP/9PPx/+bc1/+ulYn/vYZY///ek//+xoH/36OB/+bb1v/t7u3/7O3r/+vr6v/q6un/6eno/+jo5//m5+b/5ebl/+Tk5P/j4+H/4eHg/9/g3//f393/3d3c/9vb2v/a2tn/2NjX/9bX1f/U1tT/0tPR/8/Rzv/Nzsz/y8zL/8rKyv/IyMf/xMbD/8LDwf/Awb//vr+9/7u7uf+3ubX/tbaz/7Gysf+tr6z/qqqo/4RwZf+hVS7/i0sp/5x4aP+tnpX/kpSR54+RjSgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJealgKZm5hanZ6c96GioP+jpaP/p6mm/6utqf+vr63/srOx/7a3tP+5urj/u726/76/vP/BwsD/w8XC/8K7tf+ymY7/rJGG/2xMPf/TllT/8Ldo/+6tY//OgFj/wbaw/9ra2v/c3dv/3d7d/+Dh3v/m5uT/8Ojk/+3e1//xvJ7/+tGe//7vy//+9+L//vv0///+/P///vz/9/Ty/+vn5f/5+fj/9/f3//X19P/z8/L/8/Py//T08//18/P/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19PT/8Ovp/866sf+ac13/+ciD///Xjv/4r3f/1Leo/+zp5v/t7e3/7Ozr/+vr6v/q6ur/6eno/+jo5v/n5+X/5OXk/+Tk4v/i4+H/4eHg/9/f3v/e3tz/3N3b/9vb2v/Z2Nj/19jW/9bW1P/T1dP/0NHQ/8/Pzf/Mzcv/ysvK/8jJx//FxsT/w8TC/8DBv/++v73/u7y6/7e6tv+0trP/sbOx/66wrf+qq6j/g2pd/6dXLf9/TTP/o39u/6OdmP+TlZF6j5GNBQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJmbmBWen5ynoaKf/6Slo/+nqab/q62q/6+vrv+ys7H/tre1/7m6uP+8vbv/vr+9/8HCwP/ExcP/x8fF/8Cyq/+yl4z/n4V7/3ZNM//rsGP/8blq/+ulXv/BhWX/0c3K/97f3f/f397/5ubk//Do5P/r1cz/8KyG//nFgv/95ab/7tqt/+XVlv/78Nz///nr///57f/u4rb/5eDd//j4+P/29vX/9PXz//T08//09PP/9fTz//X09P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/z9PP/5dnU/6iOgv/CiVn//9uQ//7Cfv/fpIL/5tzX/+7t7P/s7ev/6+3r/+rr6v/p6ej/6Ojn/+jo5f/m5+X/5OTj/+Pj4v/h4eD/39/e/97f3f/d3dz/29va/9nZ2P/X2Nb/19fV/9TU0//R0dD/zs/N/8zOy//KzMn/yMnH/8bHxf/DxML/wcLA/76/vf+6vbv/uLq3/7W2tP+ys7L/r7Ct/6qsqf+DY1P/qFYr/31UQP+sjn//nJuX1JOVkR8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnZ+cAZ6gnUGho6DipKaj/6ipp/+srKv/r7Cu/7K0sv+1t7X/ubq4/7y9u/+/wL7/wcPB/8XGxP/Jycf/ysnG/72pof+0mo7/inFm/5JeN//xumr/8rxt/+ehYP/DmoX/3dza/+jn5//y6uX/7NLH//GpfP/4xXz/+96P/+DBgf+DWz3/w559//zhvf/+8tP//u7R/9u6g//c1dP/9vb2//X19P/09PP/9PTz//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/v6+j/y7iv/5hwWf/3xID//9SL//itdv/Tt6j/6+nm/+3u7P/t7uv/7Ozq/+rq6f/p6ej/6Ojn/+fm5v/l5eP/4+Pi/+Li4f/g4N//39/e/93e3P/c29v/2tvZ/9jZ1//X19b/1NTU/9LR0f/Pz87/zc7M/8zNy//Jy8j/xsfF/8TFw//BwcD/vr++/7u+u/+4ubf/tba0/7Kzsf+vsK7/q6yq/4ZcR/+eUSj/g11L/62bkv+XmZdal5mVAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnp+dA6GjoH6kpqP/p6mn/6ysq/+wsK3/s7Sx/7a3tf+5urn/vb67/7/Avv/CxMH/xcbE/8jJx//LzMv/ysbC/7mimf+0mo//eV5S/7iBSv/zwnX/9MV9/+iub//Xw7n/8+3q/+3Wy//ztIT/+MyE//raif/OqGf/aUgx/7Cfmf/VvK///NOc//7rt//937D/wJVv/9nUz//09PP/9PTz//T09P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//T08//m2tX/qY6D/76EV//+1Yr//b96/92hgP/k2tX/7u7t/+3t7P/s7Ov/6+vq/+rq6P/p6Of/5+jm/+bm5f/k5OP/4uLh/+Hh4P/g4N7/3t7d/9zc3P/b29r/2dnY/9jX1v/W1tX/0tLR/8/Qzv/Nz8z/y83K/8nLyP/Hycb/xMXE/8HCwf+/wL7/vL67/7i6t/+1trT/srOx/6+wrv+rrar/j1g8/39EJf+adWP/pJ6ZppiZlhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoaKgIKSmpLioqqf/rK6q/6+wrv+ytLL/tri1/7q7uP+9vrz/wMG//8LEwv/GxsT/ycnH/8rMyv/Pz87/yL+7/7iflf+ympD/dlVE/9irZv/20o//99eW/+3Jjv/039X/9s6k//rbov/63Jz/zKVn/2VFMf+VgXn/6N/a/8umkv/7y4v//eOf//zRkP+pf2L/3dfU//T08//09PL/9fXz//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//Dr6f/Ou7H/mHFa/++4df/9z4T/96p0/9G0o//r6eb/7u7u/+7t7P/s7Or/6urp/+np5//o5+f/5ebl/+Tl4//j4+L/4eHg/+Dg3//e3t7/3d3c/9vc2v/Z2dj/19jX/9bW1P/S09H/z9DO/83PzP/Lzsr/ycvI/8fIxv/ExsP/wsPA/7/Avv+8vbv/uLu3/7S3tP+ytLH/r7Gu/6KhnP+UVDP/b0cy+qCHe7GcnpolAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACipKIBo6WkSKiqp+Ksrqr/sLGu/7O0sv+2t7T/uru3/72/vP/Awb//w8TC/8bHxP/Jysf/y8zK/8/Qzv/Q0M//xrmw/7ykmv+ynZX/kWBE/+/Tjv/757f//O7b//vq1P/76r7/+ue4/9G1cP9vTDn/nIqA/+Da1//o3tj/xZqB//rIgP/93pD/+8SA/5t2YP/i3tz/8/Py//X18//19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0/+fc1/+njoL/tX1S//zNg//7vHX/46R//+DUzv/t7ez/7e7s/+zs6//q6+r/6erp/+fo5//m5uX/5eTj/+Tj4v/h4uD/4OHf/97f3v/d3tv/3Nva/9na2P/Z2df/1dfV/9LT0f/P0M7/zs/N/83Oy//Ky8j/x8jG/8TFw//Cw8H/v8C+/72+vP+5urj/tbe0/7K0sf+vsK7/l4qB/3hFKv9lRDaXlYqDB5yemwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACkpqMBqaqndautq/yvsa//s7Oy/7e4tv+6u7n/vb+8/8DBv//ExMP/xsjF/8nLyP/Nzcz/z9DO/9LRz//R0c//xrau/8Owp/++rqH/z5Fc//zz5f/++/b//vv1//326//t25P/jmNN/7irpf/k4N7/7Orp/+TX0v/Elnr/+sV5//zYiv/6vXb/mXdk/+Xi4P/09PP/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/8O3q/9PAuP+Sblz/4adp//zJf//4qW7/0q2a/+vn5P/u7u3/7Ozr/+vr6v/q6uj/6Ono/+fn5v/l5eP/5OTi/+Lj4v/h4eD/4N/f/97d3f/c3Nr/2tvZ/9na2P/V1tT/0tPR/9HQ0P/Oz83/zM/L/8rMyf/IyMX/xcbD/8LDwf/Awb//vb68/7q6uf+2t7X/srSw/6+xrv+Ca2D+Wjws1VE8MisAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACpqqcQrK2rnrCxr/2ztbL/tri2/7u7uf++v73/wMHA/8TFw//HyMb/ycrH/8zNy//Q0c//0dLR/9TU0//V1NL/2c3H/93Qyv/m1bz//fTr//779//++/j//vr1//Pkyf/a0cz/7u3s/+zt6//t7On/4dTN/8OUd//5xHj/+9SF//i2cP+ZeWn/6Obl//T19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/6N/Z/6+YjP+kcU3/+cF6//q5cv/vpXr/2cnA/+zr6f/t7ev/7Ovq/+vq6f/o6ef/5+fm/+bm5f/k5OP/4uPh/+Hi4P/g4N//3d/d/9zd2//a29n/2NnY/9XW0//S1NL/0NHP/8/Qzv/Nz8z/yszJ/8fJxv/FxsT/w8TB/8DBvv+8vrr/ubq4/7a2tf+ytLH/ra+r/nBdU9NLMyhDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsraokr7CuwLO1sv63ubb/ury5/76/vf/Bwr//xMXD/8fIxv/Jy8j/zM3L/9DRz//R09D/1NXT/9nZ2P/q4d3/6dnT//PVqv/88OL//vr1//769v/++vP/++zf/+zWyv/r5+X/7e3s/+7r6f/e0cv/w5N1//nCeP/60YL/87Fs/5t+bv/t6+n/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/x7+z/3czE/5R2Zv/QkVn/+sB3//ekZf/Wpo7/6OLd/+3t7P/s7Ov/6+vp/+nq6P/o5+f/5eXl/+Tk4//j4+H/4eLg/+Dh3//e393/3Nzc/9rb2v/Y2Nf/1tfV/9PU0v/Q0c//ztDO/83Ozf/Ly8r/yMnH/8XGxP/DxMH/v8C+/7y9vP+6u7n/tre1/7Kzsf+op6bhdF9WQCYTCgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACvsa5Cs7Wy2Le5tv+6vLr/vr+9/8HCwP/ExcP/xsjG/8nLyf/Mzcv/0dHP/9HS0P/U1dP/5N3a/+HPxv/ntZD/9dKL//rnrf/z6tL/8Ovl//z06f/76cP/9c6Q/+HArv/n4+H/7evp/9zOx//AkHL/+MB1//rOf//xrWv/nX9w/+/t7P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/r4+D/vKOZ/5RoTP/xsGz/+LZv//Ghb//VvbD/6+jm/+zs6//q6+r/6uro/+jn5//l5uX/5eXk/+Pj4v/i4uH/4eHg/9/f3v/d3dz/2tvZ/9jY1//X19X/09PT/9HR0P/P0M7/zM/M/8rMyv/IyMf/xMXD/8LEwf/Awb7/vb68/7q7uP+2t7T/sbOw/6GalJd4YVcOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACztbJXt7i25ru8uf++v77/wcLA/8TFw//Hycb/ysvJ/8zNy//Q0c//0dLQ/9nX0v/ey8P/3KWI/+utaP/0zIb/6Ml8/6BuUf+xiXf/4s55//jfov/30pL/77Bx/9mvmf/o4+D/3tDJ/7mLb//2u3D/+ct9//Craf+dgXL/7+3s//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//Tz8f/j1M3/m39z/7V3S//2tXD/9KZj/+SkgP/g1tD/6+vq/+vr6v/q6uj/5+fn/+bn5f/l5eT/4+Pi/+Li4f/h4N//39/e/9zd2//a2tn/2dnX/9fX1v/U1NP/0dHQ/8/Qzv/Nz8z/y8zK/8jIx//FxcT/w8PC/7/Avv+8vrv/ubq4/7W4tP+wsq31jn94WycUCgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC3ubdmu7y67b6/vP/BwsD/xMXD/8fIxv/Ky8n/zM3L/9DRz//U09H/28rC/9Cmkv/fjlH/7LBo/+SvaP+YYkD/0cbD/93Rzf+gd2P/0a1m//bJgv/zv3T/7J5i/9mvmv/k19H/t452//S3cP/4yX3/8q5r/6KGdv/v7u3/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0/+/r6P/PubD/imVS/9mUWP/2sWv/8Jle/9Wumf/o5N//6+zq/+np6P/o6Of/5+bm/+Xl5P/j4+L/4uHh/+Dh4P/f393/3N3a/9vb2f/Y2tf/1tjW/9TV0//R0tD/z8/P/87NzP/Ly8n/yMnH/8XGxP/Dw8H/wL++/729u/+5u7j/tbe0+KunpIennZgLAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC7vLlxvsC98MHCwP/ExcP/x8jG/8rLyf/Nzsz/0NDO/9XMx//Msab/1oZZ/+WeV//moVz/mmE7/5F5bv/c0Mv/1ca//8e2sP+AXUr/xpJU//O8bv/ytmr/6Zti/961ov/Vpo3/8bZx//fLhP/2tnT/qo99//Hw7//29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0/+fb1/+ulYj/lmJD/+2lZP/ypWL/6phq/9bAtP/p6Ob/6urp/+fp5v/n5ub/5eXk/+Pj4v/i4uH/4eDg/97f3f/b3Nv/2tvZ/9ja1//X2Nb/1NXT/9DS0P/O0M//zM3M/8rLyf/Iycf/xcbE/8LDwf+/wL7/vLy6/7i6uPm2t7WYtbSxDwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC+v718wcLA8sTFw//HyMX/ysvJ/83PzP/Qz87/0Lqw/8OOdP/dik3/5Z1Y/7Z1Q/9pUEP/0czI/+De3f/XysT/y7ix/7mlnP9vUUD/uYFK//G1av/ytGr/7J9m/+yqfP/1wYH/+NKU//fDhP+7ooz/8vDw//f39v/29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/8u/u/97Mxf+Qc2f/sHFE//CmYv/umFr/4p99/9/Uz//q6uf/5+jm/+fn5f/l5eT/4+Pi/+Li4f/h4eD/3t/c/9zc2v/a29n/2NnX/9fX1v/U1NP/0dHQ/8/Pzv/Mzcv/ysvJ/8jJx//FxsT/wsPB/7/Avv+7vLv5ubq3nre3tBMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBwsB3xcXD78fIxf/Ky8n/zc7N/9DFwP/Do5X/y3pQ/9+QUP/Xik3/aUMw/7msp//f397/4OHg/+Df3P/UxL3/xrKo/7SelP9tUEL/s3tF//C3bP/zvHb/9MN///fSlP/53KP/+deY/9C2l//08/L/+Pj3//f39v/29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/z9PP/7Ojk/823rf+BXk3/y4JM/++gXf/rjlP/16mS/+bh3f/n6ef/5ubm/+Xl5P/j5OL/4uLh/+Dg3//e3tz/293b/9rb2f/Y2df/19jW/9PV0v/S0tH/z8/O/8zNy//Ky8n/x8jG/8TFw//BwsD/v8C9+Lu8uZa5urcPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADFxcRux8nF6MrMyP/Nzsv/yras/7CId//MdkP/24hM/5pcNf+MenH/397d/97f3v/g4eD/4uLh/+Hf3P/Rw7z/xa+m/7egl/9yVkf/tIBK//PDff/30pL/+d6k//vqw//768b/48if//f19f/6+vn/+Pj3//b29v/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//Pz8v/y8vH/5tzX/7Wbj/+EVz7/3I5S/+uXV//kjFr/1Len/+Xj3//n5+X/5eXk/+Pk4v/i4uH/4ODf/93e3P/c3Nv/2trZ/9nZ2P/W1dP/09TS/9DS0P/Oz83/zM3L/8nKyP/GyMb/xMXD/8HCwPS+wL2PvLy5CwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADHyMZgysvJ3czNy//HraD/nnFd/892Qf/PeEL/b0w7/9HNyv/b3dv/3t/d/+Dh3//h4uD/4+Pj/+Ph3//TxL3/xbCn/7umnf+DZVb/volQ//TVkv/76sv//fXq//337v/z7eb/+vn4//v7+v/5+fj/9/f2//b29f/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fP/8/Py//Py8f/w8O//4NHJ/5+Cdf+QWTj/5JFT/+eOUv/hj2X/1cC1/+Pj4P/k5eP/4+Pi/+Li4f/f397/3t3d/9zc2//a2tn/2NjY/9XV0//U09L/0dHQ/87Ozf/LzMr/ycnI/8fHxf/ExcLtwMK/fr6/vQcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADKy8hKzM3Lxse0q/eLZlX/qlsy/7FhNf+YiYH/2drZ/9vd2//e393/4ODf/+Hh4P/k4+L/5ubl/+Tj4f/UyMH/ybOq/8a1rP+ignP/z49X//fr0v/99+7//fjx//z38P/38/D/+vr6//n5+f/39/f/9vb1//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//T18//z8/P/8fHx//Hw7//s6ef/28W8/4lsXf+cXDb/5Y9R/+SHTf/ck2z/1cW8/+Pj4f/i5OH/4eLg/9/f3P/e3dz/3Nzb/9na2f/Y2Nf/1dXU/9LU0v/R0s//zs/M/8vMyv/Jysj/xsfF3cPEwmQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADMzcwsy8jFbp2Ge5hbOSj0dEUu/8zJxv/Z2tj/3Nzb/97e3f/g4N//4eHg/+Pj4v/l5uT/5ufl/+Xl5P/bzsn/0sC2/9rLxf/JrJv/5cCF//z06v/99+///ffu//nu5f/v49z/9PPx//f39v/29vX/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/8/T0//Lz8v/x8fH/8PDv/+7v7v/p5OH/0Lar/3tcTf+jXzX/5IpP/+CASf/Xkm7/18nA/+Lh4P/g4N//3t7c/93d3P/b3Nr/2drZ/9fY1v/U1dP/0tTS/9HS0P/Oz83/y8vK/8jJxr/Gx8RDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFpDOFh0Ylnb19jX/9na2P/b3Nv/3t7c/+Dg3v/h4d//4uPh/+Xl5P/m5uX/5ujm/+rp6P/i2NT/3c3H/+bZ1f/czLD/9+jB//zz5//88+b/+ufG//PNjP/jwa//59/b//b29f/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//P18//08vL/8/Lw//Lx7//w8O//7/Dv/+3u7f/m3dn/xqud/3VTQ/+gXDT/4INK/9x8Rv/RjWr/0sS7/+Dg3//e393/293b/9vb2v/Z2dj/1dbU/9XV1P/T09L/0NHP/83OzPTKy8mdyMnGJgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMS+uV3W1dT/2NjX/9rc2f/d3dz/39/e/9/g3//h4uD/5OXj/+Xm5P/n5+b/6Ojn/+vr6//n4t7/5trV/9nLxv/kunL/99qP//fYkP/204v/9MeC/+6tav/doHz/2cS4//Lx8P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/09PT/8/Tz//Py8f/y8fH/8fDv/+/w7f/u7+3/7e7r/+zs6//j2dT/wKCS/3FQP/+RUS3/2X5G/9h5Qv/OhmH/zbit/9zc2v/b3dr/2tva/9fZ1//V1tT/1NXT/9HT0f/Q0c/Wzc7MasrLyQoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAz87LGNbX1JPY2Nft2trZ/93d2//f3t7/3+Df/+Lh4f/j5OL/5Obj/+fm5f/n6Ob/6uvp/+zs7P/r5uT/3tHL/8Wacv/xv3X/8sJ6/+azZ//Un1v/7qtn/+ucXP/dkF//0aSO/+fi3//19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9PX0//Pz8//z8vL/8/Px//Dw8P/w7+//7+7t/+3t7f/s7Ov/6+zp/+nq6f/h19L/wKCR/3VRQf94QyX/vWs7/9R1QP/NfFT/yZ+K/9PLxv/a2dn/19fV/9XW1P/U1NP50dLQo9DQzzoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1tfUCNfY11La2tm629zb/93e3P/e4N3/4eHg/+Pk4v/k5OP/5eXl/+fo5v/p6uj/6urp/+zr6//u497/sJWC/9eUVP/sqWX/4Jpj/5tsUf+LVTD/145R/+qYV//ljFT/1pJu/9a9sf/y8e//9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X09P/09PT/9PPz//Px8v/x8e//7/Hu/+7v7f/t7e3/7O3s/+zs6//r6un/6enp/+jo6P/g2dP/yKma/4JaSP9jOSX/i0sq/7RgNf/Fazz/rG5P/6KPhe7Oyseg0dLPmdPT0mbS0dASAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANra2SHb3Np03d3c097e3f/f4d//4+Lh/+Tj4v/l5OP/5+bl/+jo5//p6ej/6+rp/+7n4//DrqP/qGxH/+aXVv/jj1b/zKaU/6GNgv9rRjH/pmc6/+WVVP/nj1H/3IhZ/9Kdg//g1M//9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/19fT/9PTy//Tz8v/y8vH/8fLw//Hw8P/v8e//7u/t/+7t6//s7er/6uzp/+nq6f/p6ej/6Ojm/+Xm5f/g3Nf/07uv/6R4Zf9tQzD/XzQg/1wyG/9VMyPsZ01BeKSUig7GvrkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADd3dwy3t7dgd/g3tvh4uH/4uPi/+Xk4v/l5uX/5+jn/+no5//q6ej/6uno/+bVzv+Qb2D/xXdD/+GJTv/anX3/5s/E/8Oto/9/Zlr/b0In/6xqPf/lkVH/44tR/9eJYP/RqZX/5+Le//X19P/19fT/9fX0//X19P/19fT/9fX0//X19P/09PP/9PTz//P18v/z9PL/8vLx//Ly8P/x8u//8O/w/+7v7v/t7ez/7ezr/+vs6//q6un/6enn/+jo5v/m5+X/5OXk/+Tk4v/i4uL/2tDK/8uxpP+ogW//hF1Mq3FRQzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADe3t0F39/eNuHh4IDi4uHU4+Ph/+Tl5P/m6Of/6efm/+jo5//p6ur/6+Xg/8Wqnv+HVTz/2IJJ/9h8Sf/Ttqn/7NTL/97Gvf+xm5P/eF5S/2xAJf+qaDv/4YlN/96HUf/VjGX/0q6b/+nm4//19fT/9fX0//T08//09PP/9PTz//Tz8v/z8/L/8vPx//Ly8f/x8fD/8fDv//Hw7//u7+7/7e3s/+zs6//r6+r/6urq/+np6P/p6Of/5+fm/+bl5f/j5eP/5OPi/+Hi4P/f4N//3d7c49nW047X0swTAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4eHgBeLi4S7i4+Fs5OTjuubm5f7n5uX/5+fm/+np6P/q6+j/6dnS/51+bv+NUjH/2n1G/7x5WP/k2tf/7t/Y/+vTx//bwbb/spuR/3ddUP9mPCP/llky/8d4Q//bg0//1Itk/9GmkP/i2NP/8/Py//Pz8v/z8/L/8/Lx//Ly8f/x8fD/8fHw//Dw7//v8O7/7+/v/+7u7P/s7Ov/6+vq/+rq6f/q6ej/6Ojn/+fn5v/m5uX/5eXk/+Pk4v/i4uH/4OHfyd/f3Xzd3dw229zbCwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOLj4QHk5OMe5eXlSeXm5ZDm5uXU6Ojm/+jq5//p6Ob/28S6/4dlVf+GSSn/1XRD/8Sgjf/w7ez/7+jl/+3e1//r0cX/2byv/7Wbkf+FbGD/YUIw/3JBJP+fXDL/xnND/9WCV//SmHz/17yt/+ro5f/x8fD/8fHw//Dw7//w8O//7+/u/+7v7P/s7uz/7ezs/+zr6//q6un/6eno/+no6P/n5+b/5ubl/+Tl5P/j5OPg4uLhoOHi4FXg4d8k39/dBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5eblDebm5STn5+ZS6ennkunp6cvo5uT61r2x/4RhUf9cMRv/ikor/76upf/v7+7/7+7t/+/r6P/u4Nr/69PI/9u8rv/Gppb/oYR3/3pdUP9bOyv/YTYe/31EJv+iXDj/vXNP/8mRdf/TsqH/3M7F/+fi4P/t7ev/7u7s/+3t7P/r7ev/6+vp/+nq6P/o6ef/5+jm/+bn5dfl5eSf5OTkX+Pk4yzi4uETAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADp6egO6enoH+rp6T3p6OV20r60joRhUoxZPzK/X0c9y8S9udru7+3/7+/u/+/v7v/u7On/7ufj/+rb1P/jy7//0rGi/8Ofjv+qiXr/jnBj/2lQQ/9MNCj/Pygc/0IrH/1WPzT4bFdN7It5cNSzpZ6rzMK9j9HHworXz8uAyb+7gb+1sXXUz81N5OTjJeXl5BLk5OQBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOrr6Qfr6ukL6N/aA9m/tAavl40SrZ+YHuXl4m7t7eyp7u7syO7u7dzu7u3m7+/t7u3s6u/s6OXv6+Pf7+fa1O/j0cjv4M3D8tzHvuHZxLp81MC2Ks66siXItawdwbCnGL+vphHEta0Ny763C9jNxwrPxsIK0svJBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////8////////5f//0AAAAABzoIB/////8AAAAAAAAAAAAAAAAD///gAAAAAAAAAAAAAAAAAD//gAAAAAAAAAAAAAAAAAAP/4AAAAAAAAAAAAAAAAAAD/+AAAAAAAAAAAAAAAAAAAf/gAAAAAAAAAAAAAAAAAAH/4AAAAAAAAAAAAAAAAAAD/+AAAAAAAAAAAAAAAAAAA//4AAAAAAAAAAAAAAAAAAf//4AAAAAAAAAAAAAAAAB////9gAAAAAAAAAAAAAAf//////+AAAAAAAAAAAP/////////AAAAAAAAAAAP/////////gAAAAAAAAAAA/////////gAAAAAAAAAAAP////////wAAAAAAAAAAAB////////4AAAAAAAAAAAAH///////8AAAAAAAAAAAAA///////+AAAAAAAAAAAAAD///////AAAAAAAAAAAAAAf//////gAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAf/////4AAAAAAAAAAAAAAH/////8AAAAAAAAAAAAAAA/////+AAAAAAAAAAAAAAAH/////AAAAAAAAAAAAAAAA/////wAAAAAAAAAAAAAAAH////4AAAAAAAAAAAAAAAA////+AAAAAAAAAAAAAAAAP////AAAAAAAAAAAAAAAAB////gAAAAAAAAAAAAAAAAP///4AAAAAAAAAAAAAAAAD///4AAAAAAAAAAAAAAAAAf//+AAAAAAAAAAAAAAAAAD///AAAAAAAAAAAAAAAAAA///wAAAAAAAAAAAAAAAAAH//4AAAAAAAAAAAAAAAAAB//+AAAAAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAAf/4AAAAAAAAAAAAAAAAAAH/+AAAAAAAAAAAAAAAAAAB//AAAAAAAAAAAAAAAAAAAf/wAAAAAAAAAAAAAAAAAAD/8AAAAAAAAAAAAAAAAAAA/+AAAAAAAAAAAAAAAAAAAP/gAAAAAAAAAAAAAAAAAAB/4AAAAAAAAAAAAAAAAAAAf+AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP8AAAAAAAAAAAAAAAAAAAD/AAAAAAAAAAAAAAAAAAAA/wAAAAAAAAAAAAAAAAAAAP+AAAAAAAAAAAAAAAAAAAH/gAAAAAAAAAAAAAAAAAAB/4AAAAAAAAAAAAAAAAAAA//AAAAAAAAAAAAAAAAAAAP/wAAAAAAAAAAAAAAAAAAD/8AAAAAAAAAAAAAAAAAAB//gAAAAAAAAAAAAAAAAAAf/4AAAAAAAAAAAAAAAAAAH/+AAAAAAAAAAAAAAAAAAD//wAAAAAAAAAAAAAAAAAA//8AAAAAAAAAAAAAAAAAAP//gAAAAAAAAAAAAAAAAAH//4AAAAAAAAAAAAAAAAAB///AAAAAAAAAAAAAAAAAA///wAAAAAAAAAAAAAAAAAP//+AAAAAAAAAAAAAAAAAH///gAAAAAAAAAAAAAAAAB///8AAAAAAAAAAAAAAAAA////gAAAAAAAAAAAAAAAAf///4AAAAAAAAAAAAAAAAH////AAAAAAAAAAAAAAAAH////4AAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAA/////4AAAAAAAAAAAAAAAf/////AAAAAAAAAAAAAAAH/////4AAAAAAAAAAAAAAD//////AAAAAAAAAAAAAAB//////4AAAAAAAAAAAAAA///////AAAAAAAAAAAAAAf//////4AAAAAAAAAAAAAP///////AAAAAAAAAAAAAH///////4AAAAAAAAAAAAH////////AAAAAAAAAAAAD////////+AAAAAAAAAAAB/////////wAAAAAAAAAAA/////////8AAAAAAAAAAA//////////gAAAAAAAAAAf/////////+AAAAAAAAAAf//////////4AAAAAAAAA////////////AAAAAAAAAf///////////8AAAAAAAAP////////////wAAAAAAAP/////////////gAAAAAAf//////////////AAAAAAf//////////////+AAAAB//////////////////////////////////////////////////8=",
        "usr/volcanos/proto.js": "dmFyIGtpdCA9IHsKCURpY3Q6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgeyByZXNbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdIH0KCQlyZXR1cm4gcmVzCgl9Cn0KdmFyIGljZSA9IHsKCVRCOiAiXHQiLCBTUDogIiAiLCBERjogIjoiLCBFUTogIj0iLCBBVDogIkAiLCBQUzogIi8iLCBQVDogIi4iLCBGUzogIiwiLCBOTDogIlxuIiwgTFQ6ICI8IiwgR1Q6ICI+IiwKCU9LOiAib2siLCBUUlVFOiAidHJ1ZSIsIEZBTFNFOiAiZmFsc2UiLCBTVUNDRVNTOiAic3VjY2VzcyIsIEZBSUxVUkU6ICJmYWlsdXJlIiwgUFJPQ0VTUzogInByb2Nlc3MiLAoKCUFVVE86ICJhdXRvIiwgTElTVDogImxpc3QiLCBCQUNLOiAiYmFjayIsIEVYRUM6ICJleGVjIiwKCVNIT1c6ICJzaG93IiwgSElERTogImhpZGUiLCBIRUxQOiAiaGVscCIsIEhUVFA6ICJodHRwIiwKCVZJRVc6ICJ2aWV3IiwgTU9ERTogIm1vZGUiLCBTSElQOiAic2hpcCIsIENPUFk6ICJjb3B5IiwKCglQT0Q6ICJwb2QiLCBDVFg6ICJjdHgiLCBDTUQ6ICJjbWQiLCBBUkc6ICJhcmciLCBSRVM6ICJyZXMiLAoJUlVOOiAicnVuIiwgRVJSOiAiZXJyIiwgT1BUOiAib3B0IiwKCUNBTjogImNhbiIsCglQV0Q6ICIuLyIsCgoJTVNHX0RFVEFJTDogImRldGFpbCIsCglNU0dfT1BUSU9OOiAib3B0aW9uIiwKCU1TR19BUFBFTkQ6ICJhcHBlbmQiLAoJTVNHX1JFU1VMVDogInJlc3VsdCIsCglNU0dfRklFTERTOiAiZmllbGRzIiwKCU1TR19TRVNTSUQ6ICJzZXNzaWQiLAoKCU1TR19TT1VSQ0U6ICJfc291cmNlIiwKCU1TR19UQVJHRVQ6ICJfdGFyZ2V0IiwKCU1TR19IQU5ETEU6ICJfaGFuZGxlIiwKCU1TR19VUExPQUQ6ICJfdXBsb2FkIiwKCU1TR19EQUVNT046ICJfZGFlbW9uIiwKCU1TR19BQ1RJT046ICJfYWN0aW9uIiwKCU1TR19TVEFUVVM6ICJfc3RhdHVzIiwKCU1TR19QUkVGSVg6ICJfcHJlZml4IiwKCglNU0dfRElTUExBWTogIl9kaXNwbGF5IiwKCU1TR19QUk9DRVNTOiAiX3Byb2Nlc3MiLAoKCU1TR19VU0VSTkFNRTogInVzZXIubmFtZSIsCglNU0dfVVNFUk5JQ0s6ICJ1c2VyLm5pY2siLAoKCU1TR19USVRMRTogInNlc3MudGl0bGUiLAoJTVNHX1RPUElDOiAic2Vzcy50b3BpYyIsCglNU0dfUklWRVI6ICJzZXNzLnJpdmVyIiwKCU1TR19TVE9STTogInNlc3Muc3Rvcm0iLAoJTVNHX1RPQVNUOiAic2Vzcy50b2FzdCIsCgoJUFJPQ0VTU19BR0FJTjogIl9hZ2FpbiIsCgoJRXJyV2FybjogIndhcm46ICIsCglFcnJOb3RMb2dpbjogIm5vdCBsb2dpbjogIiwKCUVyck5vdFJpZ2h0OiAibm90IHJpZ2h0OiAiLAoJRXJyTm90Rm91bmQ6ICJub3QgZm91bmQ6ICIsCn0KCnZhciBjdHggPSB7CglDT05URVhUOiAiY29udGV4dCIsIENPTU1BTkQ6ICJjb21tYW5kIiwgQ09ORklHOiAiY29uZmlnIiwKCUlOREVYOiAiaW5kZXgiLCBBUkdTOiAiYXJncyIsIFNUWUxFOiAic3R5bGUiLCBESVNQTEFZOiAiZGlzcGxheSIsIEFDVElPTjogImFjdGlvbiIsCglJTlBVVFM6ICJpbnB1dHMiLCBGRUFUVVJFOiAiZmVhdHVyZSIsCn0KdmFyIGNsaSA9IHsKCURBRU1PTjogImRhZW1vbiIsCglTVEFSVDogInN0YXJ0IiwgU1RPUDogInN0b3AiLCBPUEVOOiAib3BlbiIsIENMT1NFOiAiY2xvc2UiLCBCRUdJTjogImJlZ2luIiwgRU5EOiAiZW5kIiwKCglDT0xPUjogImNvbG9yIiwKCVJFRDogInJlZCIsIEdSRUVOOiAiZ3JlZW4iLCBCTFVFOiAiYmx1ZSIsCglZRUxMT1c6ICJ5ZWxsb3ciLCBDWUFOOiAiY3lhbiIsIFBVUlBMRTogInB1cnBsZSIsIE1BR0VOVEE6ICJtYWdlbnRhIiwKCVdISVRFOiAid2hpdGUiLCBCTEFDSzogImJsYWNrIiwKCglNQUtFOiAibWFrZSIsIE1BSU46ICJtYWluIiwgRVhFQzogImV4ZWMiLCBET05FOiAiZG9uZSIsCglDT0RFOiAiY29kZSIsIENPU1Q6ICJjb3N0IiwgQkFDSzogImJhY2siLCBGUk9NOiAiZnJvbSIsCglFUlJPUjogImVycm9yIiwgQ0xFQVI6ICJjbGVhciIsIFJFRlJFU0g6ICJyZWZyZXNoIiwKCVNIT1c6ICJzaG93IiwgRlVMTDogImZ1bGwiLAp9CnZhciBuZnMgPSB7CglaTUw6ICJ6bWwiLCBJTUw6ICJpbWwiLCBUWFQ6ICJ0eHQiLAoJSFRNTDogImh0bWwiLCBDU1M6ICJjc3MiLCBKUzogImpzIiwgR086ICJnbyIsIFNIOiAic2giLCBDU1Y6ICJjc3YiLCBKU09OOiAianNvbiIsCglQQVRIOiAicGF0aCIsIEZJTEU6ICJmaWxlIiwgTElORTogImxpbmUiLCBTSVpFOiAic2l6ZSIsCglTQVZFOiAic2F2ZSIsIExPQUQ6ICJsb2FkIiwgVEFHUzogInRhZ3MiLCBGSU5EOiAiZmluZCIsIEdSRVA6ICJncmVwIiwKCURJUjogImRpciIsIENBVDogImNhdCIsIERFRlM6ICJkZWZzIiwgVFJBU0g6ICJ0cmFzaCIsCglESVJfUk9PVDogImRpcl9yb290IiwKCVNDUklQVDogInNjcmlwdCIsCn0KdmFyIG1kYiA9IHsKCURJQ1Q6ICJkaWN0IiwgTUVUQTogIm1ldGEiLCBIQVNIOiAiaGFzaCIsIExJU1Q6ICJsaXN0IiwKCglJRDogImlkIiwgS0VZOiAia2V5IiwgVElNRTogInRpbWUiLCBaT05FOiAiem9uZSIsIFRZUEU6ICJ0eXBlIiwgTkFNRTogIm5hbWUiLCBURVhUOiAidGV4dCIsCglMSU5LOiAibGluayIsIFNDQU46ICJzY2FuIiwgU0hPVzogInNob3ciLCBIRUxQOiAiaGVscCIsCglTSE9SVDogInNob3J0IiwgRklFTEQ6ICJmaWVsZCIsIFRPVEFMOiAidG90YWwiLCBDT1VOVDogImNvdW50IiwgTElNSVQ6ICJsaW1pdCIsCglJTkRFWDogImluZGV4IiwgVkFMVUU6ICJ2YWx1ZSIsIEVYVFJBOiAiZXh0cmEiLCBBTElBUzogImFsaWFzIiwgRVhQSVJFOiAiZXhwaXJlIiwKCglDUkVBVEU6ICJjcmVhdGUiLCBSRU1PVkU6ICJyZW1vdmUiLCBJTlNFUlQ6ICJpbnNlcnQiLCBERUxFVEU6ICJkZWxldGUiLAoJTU9ESUZZOiAibW9kaWZ5IiwgU0VMRUNUOiAic2VsZWN0IiwKCUlOUFVUUzogImlucHV0cyIsIFBSVU5FUzogInBydW5lcyIsIEVYUE9SVDogImV4cG9ydCIsIElNUE9SVDogImltcG9ydCIsCglVUExPQUQ6ICJ1cGxvYWQiLAoKCVNFQVJDSDogInNlYXJjaCIsIEVOR0lORTogImVuZ2luZSIsIFJFTkRFUjogInJlbmRlciIsIFBMVUdJTjogInBsdWdpbiIsCglQQUdFOiAicGFnZSIsIE5FWFQ6ICJuZXh0IiwgUFJFVjogInByZXYiLCBMSU1JVDogImxpbWl0IiwgT0ZGRU5EOiAib2ZmZW5kIiwKCU1BSU46ICJtYWluIiwKCglGT1JFQUNIOiAiKiIsIFJBTkRPTVM6ICIlIiwKfQp2YXIgYWFhID0gewoJUEFTU1dPUkQ6ICJwYXNzd29yZCIsIFVTRVJOQU1FOiAidXNlcm5hbWUiLCBVU0VSTklDSzogInVzZXJuaWNrIiwgQkFDS0dST1VORDogImJhY2tncm91bmQiLCBBVkFUQVI6ICJhdmF0YXIiLAoJTEFOR1VBR0U6ICJsYW5ndWFnZSIsIEVOR0xJU0g6ICJlbmdsaXNoIiwgQ0hJTkVTRTogImNoaW5lc2UiLAoJTE9HSU46ICJsb2dpbiIsIExPR09VVDogImxvZ291dCIsIElOVklURTogImludml0ZSIsCglUT0tFTjogInRva2VuIiwKfQp2YXIgd2ViID0gewoJU1BBQ0U6ICJzcGFjZSIsIERSRUFNOiAiZHJlYW0iLCBTSEFSRTogInNoYXJlIiwKfQp2YXIgdGNwID0gewoJSE9TVDogImhvc3QiLCBQT1JUOiAicG9ydCIsCn0KdmFyIGdkYiA9IHsKCVNJR05BTDogInNpZ25hbCIsCn0KdmFyIGxleCA9IHsKCVNQTElUOiAic3BsaXQiLCBQUkVGSVg6ICJwcmVmaXgiLAp9CnZhciBzc2ggPSB7Cn0KCnZhciBjb2RlID0gewoJVklNRVI6ICJ2aW1lciIsIElOTkVSOiAiaW5uZXIiLCBGQVZPUjogImZhdm9yIiwKCUFVVE9HRU46ICJhdXRvZ2VuIiwgQ09NUElMRTogImNvbXBpbGUiLCBCSU5QQUNLOiAiYmlucGFjayIsIFdFQlBBQ0s6ICJ3ZWJwYWNrIiwgUFVCTElTSDogInB1Ymxpc2giLAoJS0VZV09SRDogImtleXdvcmQiLAp9CnZhciB3aWtpID0gewoJVElUTEU6ICJ0aXRsZSIsIEJSSUVGOiAiYnJpZWYiLCBSRUZFUjogInJlZmVyIiwgU1BBUks6ICJzcGFyayIsCglPUkRFUjogIm9yZGVyIiwgVEFCTEU6ICJ0YWJsZSIsIENIQVJUOiAiY2hhcnQiLCBJTUFHRTogImltYWdlIiwgVklERU86ICJ2aWRlbyIsCglGSUVMRDogImZpZWxkIiwgU0hFTEw6ICJzaGVsbCIsIExPQ0FMOiAibG9jYWwiLCBQQVJTRTogInBhcnNlIiwKCUNPTlRFTlQ6ICJjb250ZW50IiwKCglOQVZNRU5VOiAibmF2bWVudSIsIFBSRU1FTlU6ICJwcmVtZW51IiwKCglJVEVNOiAiLnN0b3J5IiwKCUgyOiAiaDIuc3RvcnkiLAoJSDM6ICJoMy5zdG9yeSIsCglESVZfUEFHRTogImRpdi5wYWdlIiwKfQp2YXIgY2hhdCA9IHsKCUxJQjogImxpYiIsIFBBR0U6ICJwYWdlIiwgUEFORUw6ICJwYW5lbCIsIFBMVUdJTjogInBsdWdpbiIsIE9VVFBVVDogIm91dHB1dCIsIFNUT1JZOiAic3RvcnkiLCBGTE9BVDogImZsb2F0IiwKCVRPQVNUOiAidG9hc3QiLCBDQVJURTogImNhcnRlIiwgSU5QVVQ6ICJpbnB1dCIsIFVQTE9BRDogInVwbG9hZCIsIENPTlRFWFRTOiAiY29udGV4dHMiLAoJTEFZT1VUOiAibGF5b3V0IiwgUFJPSkVDVDogInByb2plY3QiLCBDT05URU5UOiAiY29udGVudCIsIERJU1BMQVk6ICJkaXNwbGF5IiwgUFJPRklMRTogInByb2ZpbGUiLAoKCVRJVExFOiAidGl0bGUiLCBUT1BJQzogInRvcGljIiwgQkxBQ0s6ICJibGFjayIsIFdISVRFOiAid2hpdGUiLCBQUklOVDogInByaW50IiwKCVNIQVJFOiAic2hhcmUiLCBSSVZFUjogInJpdmVyIiwgU1RPUk06ICJzdG9ybSIsIEZJRUxEOiAiZmllbGQiLAoJUFVCTElDOiAicHVibGljIiwgUFJPVEVDVEVEOiAicHJvdGVjdGVkIiwgUFJJVkFURTogInByaXZhdGUiLAoJVVNFUjogInVzZXIiLCBUT09MOiAidG9vbCIsIE5PREVTOiAibm9kZXMiLAoKCUFHRU5UOiAiYWdlbnQiLCBDSEVDSzogImNoZWNrIiwgR1JBTlQ6ICJncmFudCIsCglTVEFURTogInN0YXRlIiwgTUVOVVM6ICJtZW51cyIsIFRSQU5TOiAidHJhbnMiLAoJU1NPOiAic3NvIiwgV0VCU0lURTogIndlYnNpdGUiLAoJTE9DQVRJT046ICJsb2NhdGlvbiIsCgoJbGliczogWyIvbGliL2Jhc2UuanMiLCAiL2xpYi9jb3JlLmpzIiwgIi9saWIvbWlzYy5qcyIsICIvbGliL3BhZ2UuanMiLCAiL2xpYi91c2VyLmpzIl0sCglwYW5lbF9saXN0OiBbCgkJe25hbWU6ICJIZWFkZXIiLCBoZWxwOiAi5qCH6aKY5qCPIiwgcG9zOiAiaGVhZCIsIHN0YXRlOiBbInRpbWUiLCAidXNlcm5pY2siLCAiYXZhdGFyIl19LAoJCXtuYW1lOiAiUml2ZXIiLCAgaGVscDogIue+pOiBiue7hCIsIHBvczogImxlZnQifSwKCQl7bmFtZTogIkFjdGlvbiIsIGhlbHA6ICLlt6XkvZzlj7AiLCBwb3M6ICJtYWluIn0sCgkJe25hbWU6ICJTZWFyY2giLCBoZWxwOiAi5pCc57Si5qGGIiwgcG9zOiAiYXV0byJ9LAoJCXtuYW1lOiAiRm9vdGVyIiwgaGVscDogIueKtuaAgeadoSIsIHBvczogImZvb3QiLCBzdGF0ZTogWyJuY21kIiwgIm50aXAiXX0sCgldLAoJcGx1Z2luX2xpc3Q6IFsKCQkiL3BsdWdpbi9zdGF0ZS5qcyIsCgkJIi9wbHVnaW4vaW5wdXQuanMiLAoJCSIvcGx1Z2luL3RhYmxlLmpzIiwKCQkiL3BsdWdpbi9pbnB1dC9rZXkuanMiLAoJCSIvcGx1Z2luL2lucHV0L2RhdGUuanMiLAoJCSIvcGx1Z2luL3N0b3J5L3NwaWRlLmpzIiwKCQkiL3BsdWdpbi9zdG9yeS90cmVuZC5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvY29kZS92aW1lci5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvY29kZS94dGVybS5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiLAoJCSIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmpzIiwKCQkiL3BsdWdpbi9sb2NhbC90ZWFtL3BsYW4uanMiLAoJXSwKCVBMVUdJTl9TVEFURV9KUzogIi9wbHVnaW4vc3RhdGUuanMiLAoJUExVR0lOX0lOUFVUX0pTOiAiL3BsdWdpbi9pbnB1dC5qcyIsCglQTFVHSU5fVEFCTEVfSlM6ICIvcGx1Z2luL3RhYmxlLmpzIiwKCglPTkVOR0lORTogIm9uZW5naW5lIiwgT05EQUVNT046ICJvbmRhZW1vbiIsIE9OQVBQRU5EOiAib25hcHBlbmQiLCBPTkxBWU9VVDogIm9ubGF5b3V0IiwgT05NT1RJT046ICJvbm1vdGlvbiIsIE9OS0VZTUFQOiAib25rZXltYXAiLAoJT05JTVBPUlQ6ICJvbmltcG9ydCIsIE9OU1lOVEFYOiAib25zeW50YXgiLCBPTkFDVElPTjogIm9uYWN0aW9uIiwgT05ERVRBSUw6ICJvbmRldGFpbCIsIE9ORklHVVJFOiAib25maWd1cmUiLCBPTkVYUE9SVDogIm9uZXhwb3J0IiwKCU9OUExVR0lOOiAib25wbHVnaW4iLAoKCU9OTUFJTjogIm9ubWFpbiIsIE9OTE9HSU46ICJvbmxvZ2luIiwgT05TRUFSQ0g6ICJvbnNlYXJjaCIsCglPTlNJWkU6ICJvbnNpemUiLCBPTlRPQVNUOiAib250b2FzdCIsIE9OUkVNT1RFOiAib25yZW1vdGUiLAoJT05LRVlET1dOOiAib25rZXlkb3duIiwgT05NT1VTRUVOVEVSOiAib25tb3VzZWVudGVyIiwgT1JJRU5UQVRJT05DSEFOR0U6ICJvcmllbnRhdGlvbmNoYW5nZSIsCglPTlNUT1JNX1NFTEVDVDogIm9uc3Rvcm1fc2VsZWN0IiwgT05BQ1RJT05fVE9VQ0g6ICJvbmFjdGlvbl90b3VjaCIsIE9OQUNUSU9OX05PVE9PTDogIm9uYWN0aW9uX25vdG9vbCIsIE9OQUNUSU9OX0NNRDogIm9uYWN0aW9uX2NtZCIsCglPTk9QRU5TRUFSQ0g6ICJvbm9wZW5zZWFyY2giLCBPTlNFQVJDSEZPQ1VTOiAib25zZWFyY2hmb2N1cyIsIE9OQ09NTUFOREZPQ1VTOiAib25jb21tYW5kZm9jdXMiLAoKCV9JTklUOiAiX2luaXQiLCBfRU5HSU5FOiAiX2VuZ2luZSIsIF9TRUFSQ0g6ICJfc2VhcmNoIiwgX09VVFBVVFNfQ1VSUkVOVDogIl9vdXRwdXRzLi0xIiwKCV9OQU1FUzogIl9uYW1lcyIsIF9UT0FTVDogIl90b2FzdCIsCn0KdmFyIHRlYW0gPSB7CglUQVNLOiAidGFzayIsIFBMQU46ICJwbGFuIiwKfQp2YXIgbWFsbCA9IHsKCUFTU0VUOiAiYXNzZXQiLCBTQUxBUlk6ICJzYWxhcnkiLAp9Cgp2YXIgc3ZnID0gewoJR1JPVVA6ICJncm91cCIsIFBJRDogInBpZCIsIEdSSUQ6ICJncmlkIiwKCVNIQVBFOiAic2hhcGUiLCBURVhUOiAidGV4dCIsIFJFQ1Q6ICJyZWN0IiwgTElORTogImxpbmUiLCBDSVJDTEU6ICJjaXJjbGUiLCBFTExJUFNFOiAiZWxsaXBzZSIsCglHOiAiZyIsIFg6ICJ4IiwgWTogInkiLCBSOiAiciIsIFJYOiAicngiLCBSWTogInJ5IiwgQ1g6ICJjeCIsIENZOiAiY3kiLCBYMTogIngxIiwgWTE6ICJ5MSIsIFgyOiAieDIiLCBZMjogInkyIiwKCVBBVEg6ICJwYXRoIiwgUEFUSDJWOiAicGF0aDJ2IiwgUEFUSDJIOiAicGF0aDJoIiwKCU06ICJNIiwgUTogIlEiLCBUOiAiVCIsCn0KdmFyIGh0bWwgPSB7CgkvLyBGSUVMRFNFVAoJRklFTERTRVQ6ICJmaWVsZHNldCIsIExFR0VORDogImxlZ2VuZCIsIE9QVElPTjogIm9wdGlvbiIsIEFDVElPTjogImFjdGlvbiIsIE9VVFBVVDogIm91dHB1dCIsIFNUQVRVUzogInN0YXR1cyIsCglGT1JNX09QVElPTjogImZvcm0ub3B0aW9uIiwgRElWX0FDVElPTjogImRpdi5hY3Rpb24iLCBESVZfT1VUUFVUOiAiZGl2Lm91dHB1dCIsIERJVl9TVEFUVVM6ICJkaXYuc3RhdHVzIiwKCUZJRUxEU0VUX1BBTkVMOiAiZmllbGRzZXQucGFuZWwiLCBGSUVMRFNFVF9QTFVHSU46ICJmaWVsZHNldC5wbHVnaW4iLCBGSUVMRFNFVF9TVE9SWTogImZpZWxkc2V0LnN0b3J5IiwKCUZJRUxEU0VUX0hFQUQ6ICJmaWVsZHNldC5oZWFkIiwgRklFTERTRVRfRk9PVDogImZpZWxkc2V0LmZvb3QiLAoJRklFTERTRVRfTEVGVDogImZpZWxkc2V0LmxlZnQiLCBGSUVMRFNFVF9NQUlOOiAiZmllbGRzZXQubWFpbiIsCglGSUVMRFNFVF9BVVRPOiAiZmllbGRzZXQuYXV0byIsIEZJRUxEU0VUX0ZMT0FUOiAiZmllbGRzZXQuZmxvYXQiLAoJT1BUSU9OX0FSR1M6ICJzZWxlY3QuYXJncyxpbnB1dC5hcmdzLHRleHRhcmVhLmFyZ3MiLAoJSU5QVVRfQVJHUzogImlucHV0LmFyZ3MsdGV4dGFyZWEuYXJncyIsCglJTlBVVF9CVVRUT046ICJpbnB1dFt0eXBlPWJ1dHRvbl0iLAoKCS8vIEhUTUwKCVVQTE9BRDogInVwbG9hZCIsIFVTRVJOQU1FOiAidXNlcm5hbWUiLCBQQVNTV09SRDogInBhc3N3b3JkIiwKCUlOUFVUOiAiaW5wdXQiLCBURVhUOiAidGV4dCIsIFRFWFRBUkVBOiAidGV4dGFyZWEiLCBTRUxFQ1Q6ICJzZWxlY3QiLCBCVVRUT046ICJidXR0b24iLAoJRk9STTogImZvcm0iLCBGSUxFOiAiZmlsZSIsIFNQQUNFOiAic3BhY2UiLCBDTElDSzogImNsaWNrIiwgU1VCTUlUOiAic3VibWl0IiwgQ0FOQ0VMOiAiY2FuY2VsIiwKCURJVjogImRpdiIsIElNRzogImltZyIsIENPREU6ICJjb2RlIiwgU1BBTjogInNwYW4iLCBWSURFTzogInZpZGVvIiwKCVRBQkxFOiAidGFibGUiLCBUQk9EWTogInRib2R5IiwgVFI6ICJ0ciIsIFRIOiAidGgiLCBURDogInRkIiwgQlI6ICJiciIsIFVMOiAidWwiLCBMSTogImxpIiwKCUE6ICJhIiwgTEFCRUw6ICJsYWJlbCIsIElOTkVSOiAiaW5uZXIiLCBUSVRMRTogInRpdGxlIiwKCUgxOiAiaDEiLCBIMjogImgyIiwgSDM6ICJoMyIsCglXU1M6ICJ3c3MiLCBTVkc6ICJzdmciLCBDQU5WQVM6ICJjYW52YXMiLCBJRlJBTUU6ICJpZnJhbWUiLCBDSFJPTUU6ICJjaHJvbWUiLAoKCS8vIENTUwoJQ0xBU1M6ICJjbGFzcyIsIEZMT0FUOiAiZmxvYXQiLCBDTEVBUjogImNsZWFyIiwgQk9USDogImJvdGgiLAoJQkFDS0dST1VORDogImJhY2tncm91bmQiLCBTRUxFQ1Q6ICJzZWxlY3QiLCBISURERU46ICJoaWRkZW4iLAoJRElTUExBWTogImRpc3BsYXkiLCBCTE9DSzogImJsb2NrIiwgTk9ORTogIm5vbmUiLCBGSVhFRDogImZpeGVkIiwKCU9QQUNJVFk6ICJvcGFjaXR5IiwKCVNUUk9LRV9XSURUSDogInN0cm9rZS13aWR0aCIsIFNUUk9LRTogInN0cm9rZSIsIEZJTEw6ICJmaWxsIiwgRk9OVF9TSVpFOiAiZm9udC1zaXplIiwgRk9OVF9GQU1JTFk6ICJmb250LWZhbWlseSIsIE1PTk9TUEFDRTogIm1vbm9zcGFjZSIsCglTQ1JPTEw6ICJzY3JvbGwiLCBIRUlHSFQ6ICJoZWlnaHQiLCBXSURUSDogIndpZHRoIiwgTEVGVDogImxlZnQiLCBUT1A6ICJ0b3AiLCBSSUdIVDogInJpZ2h0IiwgQk9UVE9NOiAiYm90dG9tIiwKCVNQRUVEOiAic3BlZWQiLCBQQURESU5HOiAicGFkZGluZyIsCglNSU5fSEVJR0hUOiAibWluLWhlaWdodCIsIE1BWF9IRUlHSFQ6ICJtYXgtaGVpZ2h0IiwgTUFYX1dJRFRIOiAibWF4LXdpZHRoIiwgTUlOX1dJRFRIOiAibWluLXdpZHRoIiwgTUFSR0lOX1RPUDogIm1hcmdpbi10b3AiLCBNQVJHSU5fWDogIm1hcmdpbi14IiwgTUFSR0lOX1k6ICJtYXJnaW4teSIsCglQTFVHSU5fTUFSR0lOOiAxMCwgQUNUSU9OX0hFSUdIVDogMzEsIEFDVElPTl9NQVJHSU46IDIwMCwKCVRFWFRfQU5DSE9SOiAidGV4dC1hbmNob3IiLAoJVE9HR0xFOiAidG9nZ2xlIiwKCglQQUdFOiAicGFnZSIsIFRBQlM6ICJ0YWJzIiwKCU1FTlU6ICJtZW51IiwgTk9ERTogIm5vZGUiLAoJWk9ORTogInpvbmUiLCBOQU1FOiAibmFtZSIsCglMSVNUOiAibGlzdCIsIElURU06ICJpdGVtIiwKCUlDT046ICJpY29uIiwKCglISURFOiAiaGlkZSIsIFNIT1c6ICJzaG93IiwgQVVUTzogImF1dG8iLAoJSEVBRDogImhlYWQiLCBMRUZUOiAibGVmdCIsIE1BSU46ICJtYWluIiwgRk9PVDogImZvb3QiLAoJUExVR0lOOiAicGx1Z2luIiwgTEFZT1VUOiAibGF5b3V0IiwgQ09OVEVOVDogImNvbnRlbnQiLAoKCURJVl9QQUdFOiAiZGl2LnBhZ2UiLAoJRElWX1RBQlM6ICJkaXYudGFicyIsCglESVZfWk9ORTogImRpdi56b25lIiwKCURJVl9MSVNUOiAiZGl2Lmxpc3QiLAoJRElWX0lURU06ICJkaXYuaXRlbSIsCglESVZfTkFNRTogImRpdi5uYW1lIiwKCURJVl9DT0RFOiAiZGl2LmNvZGUiLAoJRElWX0xBWU9VVF9IRUFEOiAiZGl2LmxheW91dC5oZWFkIiwKCURJVl9MQVlPVVRfTEVGVDogImRpdi5sYXlvdXQubGVmdCIsCglESVZfTEFZT1VUX0ZPT1Q6ICJkaXYubGF5b3V0LmZvb3QiLAoJVEFCTEVfQ09OVEVOVDogInRhYmxlLmNvbnRlbnQiLAoJRElWX0ZMT0FUOiAiZGl2LmZsb2F0IiwKCglFU0NBUEU6ICJFc2NhcGUiLCBFTlRFUjogIkVudGVyIiwgVEFCOiAiVGFiIiwKCV9DU1M6ICIuY3NzIiwgX0pTOiAiLmpzIiwKfQp2YXIgbGFuZyA9IHsKCVVOREVGSU5FRDogInVuZGVmaW5lZCIsCglTVFJJTkc6ICJzdHJpbmciLCBOVU1CRVI6ICJudW1iZXIiLAoJT0JKRUNUOiAib2JqZWN0IiwgRlVOQ1RJT046ICJmdW5jdGlvbiIsCglFU0NBUEU6ICJFc2NhcGUiLCBFTlRFUjogIkVudGVyIiwgVEFCOiAiVGFiIiwKCUNPTlRST0w6ICJDb250cm9sIiwgU0hJRlQ6ICJTaGlmdCIsCglQUzogIi8iLAp9CgpmdW5jdGlvbiBzaHkoaGVscCwgbWV0YSwgbGlzdCwgY2IpIHsgdmFyIGluZGV4ID0gMCwgYXJncyA9IGFyZ3VtZW50cwoJZnVuY3Rpb24gbmV4dCh0eXBlKSB7IGlmIChpbmRleCA8IGFyZ3MubGVuZ3RoICYmICghdHlwZSB8fCB0eXBlID09IHR5cGVvZiBhcmdzW2luZGV4XSkpIHsgcmV0dXJuIGFyZ3NbaW5kZXgrK10gfSB9CglyZXR1cm4gY2IgPSB0eXBlb2YgYXJnc1thcmdzLmxlbmd0aC0xXSA9PSBsYW5nLkZVTkNUSU9OP2FyZ3NbYXJncy5sZW5ndGgtMV06ZnVuY3Rpb24oKSB7fSwgY2IuaGVscCA9IG5leHQobGFuZy5TVFJJTkcpfHwiIiwgY2IubWV0YSA9IG5leHQobGFuZy5PQkpFQ1QpfHx7fSwgY2IubGlzdCA9IG5leHQobGFuZy5PQkpFQ1QpfHxbXSwgY2IKfTsgdmFyIF9jYW5fbmFtZSA9ICIiLCBfY2FuX3BhdGggPSAiIgp2YXIgVm9sY2Fub3MgPSBzaHkoIueBq+WxseaetiIsIHtpY2ViZXJnOiAiL2NoYXQvIiwgdm9sY2FubzogIi9mcmFtZS5qcyIsIHBhY2s6IHt9LCBjYWNoZToge319LCBmdW5jdGlvbihuYW1lLCBjYW4sIGxpYnMsIGNiKSB7Cgl2YXIgbWV0YSA9IGFyZ3VtZW50cy5jYWxsZWUubWV0YSwgbGlzdCA9IGFyZ3VtZW50cy5jYWxsZWUubGlzdAoJaWYgKHR5cGVvZiBuYW1lID09IGxhbmcuT0JKRUNUKSB7IHZhciBDb25maWcgPSBuYW1lLCBwYW5lbHMgPSBDb25maWcucGFuZWxzfHxjaGF0LnBhbmVsX2xpc3QKCQltZXRhLmxpYnMgPSBDb25maWcubGlic3x8Y2hhdC5saWJzLCBtZXRhLmljZWJlcmcgPSBDb25maWcuaWNlYmVyZ3x8bWV0YS5pY2ViZXJnCgoJCS8vIOmihOWKoOi9vQoJCWxpYnMgPSBbXTsgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lbHMubGVuZ3RoOyBpKyspIHsgdmFyIHAgPSBwYW5lbHNbaV0KCQkJcCAmJiAobGlicyA9IGxpYnMuY29uY2F0KHAubGlzdCA9IHAubGlzdHx8WyIvcGFuZWwvIitwLm5hbWUraHRtbC5fQ1NTLCAiL3BhbmVsLyIrcC5uYW1lK2h0bWwuX0pTXSkpCgkJfTsgbGlicyA9IGxpYnMuY29uY2F0KENvbmZpZy5wbHVnaW58fGNoYXQucGx1Z2luX2xpc3QpCgoJCS8vIOagueaooeWdlwoJCV9jYW5fbmFtZSA9ICIiLCBuYW1lID0gQ29uZmlnLm5hbWV8fGljZS5DQU4sIGNiID0gY2FufHxmdW5jdGlvbihjYW4pIHsKCQkJY2FuLm9uZW5naW5lLl9pbml0KGNhbiwgY2FuLkNvbmYoQ29uZmlnKSwgcGFuZWxzLCBDb25maWcuX2luaXQsIGNhbi5fdGFyZ2V0KQoJCX0sIGNhbiA9IHtfZm9sbG93OiBuYW1lLCBfdGFyZ2V0OiBDb25maWcudGFyZ2V0fHxtZXRhLnRhcmdldCwgX2hlaWdodDogQ29uZmlnLmhlaWdodHx8bWV0YS5faGVpZ2h0LCBfd2lkdGg6IENvbmZpZy53aWR0aHx8bWV0YS5fd2lkdGh9CgkJZm9yICh2YXIgayBpbiBDb25maWcpIHsgY2FuW2tdID0gQ29uZmlnW2tdIH0KCQljYW4uX3Jvb3QgPSBjYW4KCX0KCgl2YXIgcHJvdG8gPSB7X19wcm90b19fOiBtZXRhLCBfcGF0aDogX2Nhbl9wYXRoLCBfbmFtZTogbmFtZSwgX2xvYWQ6IGZ1bmN0aW9uKG5hbWUsIGVhY2gpIHsKCQkJLy8g5Yqg6L2957yT5a2YCgkJCXZhciBjYWNoZSA9IG1ldGEuY2FjaGVbbmFtZV18fFtdOyBmb3IgKGxpc3QucmV2ZXJzZSgpOyBsaXN0Lmxlbmd0aCA+IDA7IGxpc3QpIHsKCQkJCXZhciBzdWIgPSBsaXN0LnBvcCgpOyBzdWIgIT0gY2FuICYmIGNhY2hlLnB1c2goc3ViKQoJCQl9OyBtZXRhLmNhY2hlW25hbWVdID0gY2FjaGUKCgkJCS8vIOWKoOi9veaooeWdlwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlLmxlbmd0aDsgaSsrKSB7IHZhciBzdWIgPSBjYWNoZVtpXSwgbmFtZSA9IHN1Yi5fbmFtZQoJCQkJaWYgKHR5cGVvZiBlYWNoID09IGxhbmcuRlVOQ1RJT04gJiYgZWFjaChjYW4sIG5hbWUsIHN1YikpIHsgY29udGludWUgfQoJCQkJIWNhbltuYW1lXSAmJiAoY2FuW25hbWVdID0ge30pOyBmb3IgKHZhciBrIGluIHN1YikgewoJCQkJCWNhbltuYW1lXS5oYXNPd25Qcm9wZXJ0eShrKSB8fCAhc3ViLmhhc093blByb3BlcnR5KGspIHx8IChjYW5bbmFtZV1ba10gPSBzdWJba10pCgkJCQl9CgkJCX0KCQl9LAoJCXJlcXVpcmVNb2R1bGVzOiBmdW5jdGlvbihsaWJzLCBjYiwgZWFjaCkgewoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpYnMubGVuZ3RoOyBpKyspIHsKCQkJCWlmIChsaWJzW2ldLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChsaWJzW2ldLmluZGV4T2YoIi8iKSA9PSAwKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChsaWJzW2ldLmluZGV4T2YoIi5jc3MiKSA9PSAtMSAmJiBsaWJzW2ldLmluZGV4T2YoIi5qcyIpID09IC0xKSB7IGxpYnNbaV0gPSBsaWJzW2ldKyIvbGliLyIrbGlic1tpXSsiLmpzIiB9CgkJCQlsaWJzW2ldID0gIi9yZXF1aXJlL3BhZ2Uvbm9kZV9tb2R1bGVzLyIrbGlic1tpXQoJCQl9CgkJCWNhbi5yZXF1aXJlKGxpYnMsIGNiLCBlYWNoKQoJCX0sCgkJcmVxdWlyZTogZnVuY3Rpb24obGlicywgY2IsIGVhY2gpIHsgaWYgKCFsaWJzIHx8IGxpYnMubGVuZ3RoID09IDApIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNiKGNhbikgfSwgMTApCgkJCQlyZXR1cm4gLy8g5Yqg6L295a6M5oiQCgkJCX0KCgkJCS8vIOaXoOaViOWcsOWdgAoJCQlpZiAobGlic1swXSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGNhbi5yZXF1aXJlKGxpYnMuc2xpY2UoMSksIGNiLCBlYWNoKSB9CgoJCQlpZiAobGlic1swXSA9PSAiIikgewoJCQkJLy8g5qC35byP5Zyw5Z2ACgkJCQlsaWJzWzBdID0gY2FuLl9uYW1lLnJlcGxhY2UoaHRtbC5fSlMsIGh0bWwuX0NTUykKCQkJfSBlbHNlIGlmIChsaWJzWzBdWzBdICE9IGljZS5QUyAmJiBsaWJzWzBdLmluZGV4T2YoaWNlLkhUVFApICE9IDApIHsKCQkJCS8vIOebuOWvueWcsOWdgAoJCQkJbGlic1swXSA9IGNhbi5fbmFtZS5zbGljZSgwLCBjYW4uX25hbWUubGFzdEluZGV4T2YoaWNlLlBTKSsxKStsaWJzWzBdCgkJCX0KCgkJCS8vIOWKoOi9veaooeWdlwoJCQlsaWJzWzBdID0gbGlic1swXS50b0xvd2VyQ2FzZSgpCgkJCXZhciBuYW1lID0gbGlic1swXS5pbmRleE9mKCJodHRwIikgPT0gMD8gbGlic1swXTogbGlic1swXS5zcGxpdCgiPyIpWzBdCgkJCWZ1bmN0aW9uIG5leHQoKSB7IGNhbi5fbG9hZChuYW1lLCBlYWNoKSwgY2FuLnJlcXVpcmUobGlicy5zbGljZSgxKSwgY2IsIGVhY2gpIH0KCQkJbWV0YS5jYWNoZVtuYW1lXT8gbmV4dCgpOiAoX2Nhbl9wYXRoID0gbGlic1swXSwgbWV0YS5fbG9hZChuYW1lLCBuZXh0KSkKCQl9LAoJCXJlcXVlc3Q6IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50ID0gZXZlbnR8fHt9LCBldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCQkJdmFyIG1zZyA9IGV2ZW50Ll9tc2d8fGNhbi5taXNjLk1lc3NhZ2UoZXZlbnQsIGNhbik7IGV2ZW50Ll9tc2cgPSBtc2cKCQkJZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKCQkJCXZhbHVlID09ICIiIHx8IG1zZy5PcHRpb24oa2V5KSB8fCBtc2cuT3B0aW9uKGtleSwgdmFsdWUpCgkJCQkvLyB0eXBlb2YgdmFsdWUgPT0gbGFuZy5GVU5DVElPTiB8fCB0eXBlb2YgdmFsdWUgPT0gbGFuZy5PQkpFQ1QgfHwgdmFsdWUgPT0gIiIgfHwgbXNnLk9wdGlvbihrZXkpIHx8IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkKCQkJfQoKCQkJLy8g5re75Yqg5Y+C5pWwCgkJCWNhbi5jb3JlLkxpc3QoYXJndW1lbnRzLCBmdW5jdGlvbihvcHRpb24sIGluZGV4KSB7IGlmICghb3B0aW9uIHx8IGluZGV4ID09IDApIHsgcmV0dXJuIH0gCgkJCQljYW4uYmFzZS5pc0Z1bmMob3B0aW9uLk9wdGlvbik/IGNhbi5jb3JlLkxpc3Qob3B0aW9uLk9wdGlvbigpLCBmdW5jdGlvbihrZXkpIHsKCQkJCQlpZiAoa2V5LmluZGV4T2YoInVzZXIuIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJCWlmIChrZXkuaW5kZXhPZigiXyIpID09IDApIHsgcmV0dXJuIH0KCQkJCQlzZXQoa2V5LCBvcHRpb24uT3B0aW9uKGtleSkpCgkJCQl9KTogY2FuLmNvcmUuSXRlbShjYW4uYmFzZS5pc0Z1bmMob3B0aW9uKT8gb3B0aW9uKCk6IG9wdGlvbiwgc2V0KQoJCQl9KTsgcmV0dXJuIG1zZwoJCX0sCgoJCWFjdGlvbnM6IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBbXSkgfSwKCQlydW5BY3Rpb25Db21tYW5kOiBmdW5jdGlvbihldmVudCwgaW5kZXgsIGFyZ3MsIGNiKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIGNhbi5taXNjLmNvbmNhdChjYW4sIFtpbmRleF0sIGFyZ3MpLCBjYikgfSwKCQlydW5BY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBhY3Rpb24sIGFyZ3MsIGNiKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9LCBjYW4uT3B0aW9uKCkpCgkJCWNhbi5ydW4oZXZlbnQsIGNhbi5taXNjLmNvbmNhdChjYW4sIFtjdHguQUNUSU9OXS5jb25jYXQoYWN0aW9uKSwgYXJncyksIGNifHxmdW5jdGlvbihtc2cpIHsKCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgYWN0aW9uKQoJCQl9LCB0cnVlKQoJCX0sCgoJCXNlYXJjaDogZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCWlmIChjbWRzICYmIHR5cGVvZiBjbWRzID09IGxhbmcuT0JKRUNUICYmIGNtZHMubGVuZ3RoID4gMCAmJiB0eXBlb2YgY21kc1swXSA9PSBsYW5nLk9CSkVDVCAmJiBjbWRzWzBdLmxlbmd0aCA+IDAgKSB7CgkJCQljbWRzWzBdID0gY21kc1swXS5qb2luKGljZS5QVCkKCQkJfQoJCQlyZXR1cm4gY2FuLnJ1biAmJiBjYW4ucnVuKGV2ZW50LCBbY2hhdC5fU0VBUkNIXS5jb25jYXQoY21kcyksIGNiLCB0cnVlKQoJCX0sCgkJZ2V0OiBmdW5jdGlvbihuYW1lLCBrZXksIGNiKSB7IHJldHVybiBjYW4uc2VhcmNoKHt9LCBbY2FuLmNvcmUuS2V5cyhuYW1lLCBjaGF0Lk9ORVhQT1JULCBrZXkpXSwgY2IpIH0sCgkJc2V0OiBmdW5jdGlvbihuYW1lLCBrZXksIHZhbHVlKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCh7fSk7IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkKCQkJcmV0dXJuIGNhbi5zZWFyY2gobXNnLCBbW25hbWUsIGNoYXQuT05JTVBPUlQsIGtleV1dKQoJCX0sCgkJc2V0SGVhZGVyTWVudTogZnVuY3Rpb24obGlzdCwgY2IpIHsgY2FuLl9tZW51ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5fbWVudSkKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9LCB7dHJhbnM6IGNhbi5vbmFjdGlvbi5fdHJhbnN9KQoJCQlyZXR1cm4gY2FuLl9tZW51ID0gY2FuLnNlYXJjaChtc2csIFtbIkhlYWRlciIsIGNoYXQuT05JTVBPUlQsICJtZW51Il0sIGNhbi5fbmFtZV0uY29uY2F0KGxpc3QpLCBjYikKCQl9LAoJCXNldEhlYWRlcjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnNldCgiSGVhZGVyIiwga2V5LCB2YWx1ZSkgfSwKCQlnZXRIZWFkZXI6IGZ1bmN0aW9uKGtleSwgY2IpIHsgcmV0dXJuIGNhbi5nZXQoIkhlYWRlciIsIGtleSwgY2IpIH0sCgkJc2V0Uml2ZXI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5zZXQoIlJpdmVyIiwga2V5LCB2YWx1ZSkgfSwKCQlzZXRBY3Rpb246IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5zZXQoIkFjdGlvbiIsIGtleSwgdmFsdWUpIH0sCgkJZ2V0QWN0aW9uOiBmdW5jdGlvbihrZXksIGNiKSB7IHJldHVybiBjYW4uZ2V0KCJBY3Rpb24iLCBrZXksIGNiKSB9LAoJCWdldEFjdGlvblNpemU6IGZ1bmN0aW9uKGNiKSB7IHJldHVybiBjYW4uZ2V0KCJBY3Rpb24iLCAic2l6ZSIsIGNiKSB9LAoKCQlpc1NpbXBsZU1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJzaW1wbGUiIH0sCgkJaXNGbG9hdE1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJmbG9hdCIgfSwKCQlpc0Z1bGxNb2RlOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gY2FuLk1vZGUoKSA9PSAiZnVsbCIgfSwKCQlpc0NtZE1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJjbWQiIH0sCgkJTW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Db25mKGljZS5NT0RFLCB2YWx1ZSkgfSwKCQlDb25mRGVmYXVsdDogZnVuY3Rpb24odmFsdWUpIHsgY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oaywgdikgeyBjYW4uQ29uZihrKSB8fCBjYW4uQ29uZihrLCB2KSB9KSB9LAoJCUNvbmZIZWlnaHQ6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uQ29uZihodG1sLkhFSUdIVCwgdmFsdWUpIH0sCgkJQ29uZldpZHRoOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gY2FuLkNvbmYoaHRtbC5XSURUSCwgdmFsdWUpIH0sCgkJQ29uZjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB2YXIgcmVzID0gY2FuLl9jb25mCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJCXJlcyA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fY29uZiwgYXJndW1lbnRzW2ldKSwgaS0tCgkJCQkJY29udGludWUKCQkJCX0KCQkJCXJlcyA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fY29uZiwgYXJndW1lbnRzW2ldLCBhcmd1bWVudHNbaSsxXSkKCQkJfQoJCQlpZiAocmVzID09IHVuZGVmaW5lZCAmJiBrZXkuaW5kZXhPZihjdHguRkVBVFVSRStpY2UuUFQpID09IC0xKSB7CgkJCQlyZXR1cm4gY2FuLkNvbmYoY2FuLmNvcmUuS2V5cyhjdHguRkVBVFVSRSwga2V5KSkKCQkJfQoJCQlyZXR1cm4gcmVzCgkJfSwgX2NvbmY6IHt9LAoJfTsgY2FuID0gY2FufHx7fSwgY2FuLl9fcHJvdG9fXyA9IHByb3RvCgoJaWYgKF9jYW5fbmFtZSkgeyAvLyDliqDlhaXnvJPlrZgKCQltZXRhLmNhY2hlW19jYW5fbmFtZV0gPSBtZXRhLmNhY2hlW19jYW5fbmFtZV18fFtdLCBtZXRhLmNhY2hlW19jYW5fbmFtZV0ucHVzaChjYW4pCgl9IGVsc2UgeyAvLyDliqDlhaXpmJ/liJcKCQlsaXN0LnB1c2goY2FuKQoJfQoJX2Nhbl9wYXRoID0gX2Nhbl9uYW1lfHxfY2FuX3BhdGgKCglpZiAoY2FuLl9mb2xsb3cpIHsgbGlicyA9IGxpYnMuY29uY2F0KG1ldGEubGlicywgbWV0YS52b2xjYW5vKSB9CglpZiAobGlicyAmJiBsaWJzLmxlbmd0aCA+IDApIHsgLy8g6Kej5p6Q5Y+C5pWwCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaWJzLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChsaWJzW2ldID09IHVuZGVmaW5lZCkgewoKCQkJfSBlbHNlIGlmIChsaWJzW2ldID09ICIiKSB7CgkJCQlsaWJzW2ldID0gX2Nhbl9wYXRoLnJlcGxhY2UoaHRtbC5fSlMsIGh0bWwuX0NTUykKCQkJfSBlbHNlIGlmIChsaWJzW2ldWzBdICE9IGljZS5QUyAmJiBsaWJzW2ldLmluZGV4T2YoaWNlLkhUVFApICE9IDApIHsKCQkJCWxpYnNbaV0gPSBfY2FuX3BhdGguc2xpY2UoMCwgX2Nhbl9wYXRoLmxhc3RJbmRleE9mKGljZS5QUykrMSkrbGlic1tpXQoJCQl9CgkJfQoJfQoJcmV0dXJuIGNhbi5yZXF1aXJlKGxpYnMsIGNiKSwgY2FuCn0pCmZ1bmN0aW9uIGNhbih0b29sKSB7CglWb2xjYW5vcyh7cGFuZWxzOiBbCgkJe25hbWU6ICJIZWFkZXIiLCBoZWxwOiAi5qCH6aKY5qCPIiwgcG9zOiBodG1sLkhJREUsIHN0YXRlOiBbYWFhLlVTRVJOSUNLXX0sCgkJe25hbWU6ICJBY3Rpb24iLCBoZWxwOiAi5bel5L2c5Y+wIiwgcG9zOiBodG1sLk1BSU4sIHRvb2w6IHRvb2x9LAoJCXtuYW1lOiAiU2VhcmNoIiwgaGVscDogIuaQnOe0ouahhiIsIHBvczogaHRtbC5BVVRPfSwKCV19KQp9Cgp0cnkgeyBpZiAodHlwZW9mKHdpbmRvdykgPT0gbGFuZy5PQkpFQ1QpIHsgLy8gbm9kZWpzCglWb2xjYW5vcy5tZXRhLnRhcmdldCA9IGRvY3VtZW50LmJvZHkKCVZvbGNhbm9zLm1ldGEuX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGgKCVZvbGNhbm9zLm1ldGEuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodAoJVm9sY2Fub3MubWV0YS5fbG9hZCA9IGZ1bmN0aW9uKHVybCwgY2IpIHsKCQlzd2l0Y2ggKHVybC5zcGxpdCgiPyIpWzBdLnNwbGl0KGljZS5QVCkucG9wKCkudG9Mb3dlckNhc2UoKSkgewoJCQljYXNlIG5mcy5DU1M6CgkJCQl2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobWRiLkxJTkspCgkJCQlpdGVtLnJlbCA9ICJzdHlsZXNoZWV0IiwgaXRlbS50eXBlID0gInRleHQvY3NzIgoJCQkJaXRlbS5ocmVmID0gdXJsLCBpdGVtLm9ubG9hZCA9IGNiCgkJCQlyZXR1cm4gZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChpdGVtKSwgaXRlbQoJCQljYXNlIG5mcy5KUzoKCQkJZGVmYXVsdDoKCQkJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuZnMuU0NSSVBUKQoJCQkJaXRlbS5zcmMgPSB1cmwsIGl0ZW0ub25sb2FkID0gY2IsIGl0ZW0ub25lcnJvciA9IGNiCgkJCQlyZXR1cm4gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpdGVtKSwgaXRlbQoJCX0KCX0KfSBlbHNlIHsgLy8gbm9kZWpzCglnbG9iYWwua2l0ID0ga2l0LCBnbG9iYWwuaWNlID0gaWNlCglnbG9iYWwuY3R4ID0gY3R4LCBnbG9iYWwuY2xpID0gY2xpLCBnbG9iYWwud2ViID0gd2ViLCBnbG9iYWwuYWFhID0gYWFhCglnbG9iYWwubWRiID0gbWRiLCBnbG9iYWwuc3NoID0gc3NoLCBnbG9iYWwubmZzID0gbmZzLCBnbG9iYWwudGNwID0gdGNwCglnbG9iYWwuY29kZSA9IGNvZGUsIGdsb2JhbC53aWtpID0gd2lraSwgZ2xvYmFsLmNoYXQgPSBjaGF0LCBnbG9iYWwudGVhbSA9IHRlYW0sIGdsb2JhbC5tYWxsID0gbWFsbAoJZ2xvYmFsLnN2ZyA9IHN2ZywgZ2xvYmFsLmh0bWwgPSBodG1sLCBnbG9iYWwubGFuZyA9IGxhbmcKCWdsb2JhbC5zaHkgPSBzaHksIGdsb2JhbC5Wb2xjYW5vcyA9IFZvbGNhbm9zLCBnbG9iYWwuY2FuID0gY2FuCn0gfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZyhlKSB9Cg==",
        "usr/volcanos/frame.js": "Vm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLmkJzntKLlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5NU0dfU0VTU0lEKSkgeyBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCkpCgkJCXJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCwgIiIpIAoJCX0KCgkJY2FuLnJlcXVpcmUoW2Nhbi52b2xjYW5vXSwgbnVsbCwgZnVuY3Rpb24oY2FuLCBrZXksIHN1YikgeyBjYW5ba2V5XSA9IHN1YiB9KQoJCWNhbi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgY21kcyA9IGNtZHN8fFtdCgkJCXJldHVybiAoY2FuLm9uZW5naW5lW2NtZHNbMF1dfHxjYW4ub25lbmdpbmUuX3JlbW90ZSkoZXZlbnQsIGNhbiwgbXNnLCBjYW4sIGNtZHMsIGNiKQoJCX0sIFZvbGNhbm9zLm1ldGEuYXJncyA9IGNhbi51c2VyLmFyZ3MoY2FuKQoJCWNhbi51c2VyLnRpdGxlKGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVElUTEUpfHxjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKXx8bG9jYXRpb24uaG9zdCkKCgkJd2luZG93Lm9udW5sb2FkID0gZnVuY3Rpb24oKSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAib251bmxvYWQiKSB9CgoJCWNhbi5jb3JlLk5leHQobGlzdCwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBpdGVtLnR5cGUgPSBjaGF0LlBBTkVMCgkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIGNhbi5iYXNlLkNvcHkoaXRlbSwgY2FuLmNvcmUuVmFsdWUoY2FuLCBbY2hhdC5SSVZFUiwgaXRlbS5uYW1lXSkpLCBpdGVtLmxpc3QsIGZ1bmN0aW9uKHBhbmVsKSB7CgkJCQlwYW5lbC5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IHBhbmVsLnJlcXVlc3QoZXZlbnQpOyBjbWRzID0gY21kc3x8W10KCQkJCQlyZXR1cm4gKGNhbi5vbmVuZ2luZVtjbWRzWzBdXXx8Y2FuLm9uZW5naW5lLl9yZW1vdGUpKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKQoJCQkJfSwgY2FuW2l0ZW0ubmFtZV0gPSBwYW5lbCwgcGFuZWwuX3Jvb3QgPSBjYW4sIHBhbmVsLl90cmFucyA9IHBhbmVsLm9uYWN0aW9uICYmIHBhbmVsLm9uYWN0aW9uLl90cmFuc3x8e30KCgkJCQljYW4uY29yZS5JdGVtKHBhbmVsLm9ucGx1Z2luLCBmdW5jdGlvbihrZXksIGNtZCkgewoJCQkJCXBhbmVsLm9ucGx1Z2luLmhhc093blByb3BlcnR5KGtleSkgJiYgY2FuLmJhc2UuaXNGdW5jKGNtZCkgJiYgY2FuLm9uZW5naW5lLnBsdWdpbihwYW5lbCwga2V5LCBjbWQpCgkJCQl9KQoJCQkJY2FuLmNvcmUuSXRlbUNCKHBhbmVsLm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7CgkJCQkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGtleSwgZnVuY3Rpb24obXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7Y2FuOiBwYW5lbCwgbXNnOiBtc2d9KSB9KQoJCQkJfSksIGNhbi5jb3JlLkNhbGxGdW5jKFtwYW5lbC5vbmFjdGlvbiwgY2hhdC5fSU5JVF0sIHtjYW46IHBhbmVsLCBjYjogbmV4dCwgdGFyZ2V0OiBwYW5lbC5fdGFyZ2V0fSkKCQkJfSwgdGFyZ2V0KQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coY2FuLnVzZXIudGl0bGUoKSwgaWNlLlJVTiwgY2FuKQoJCQljYW4ub25tb3Rpb24uX2luaXQoY2FuLCB0YXJnZXQpLCBjYW4ub25rZXltYXAuX2luaXQoY2FuKSwgY2FuLnNldEhlYWRlcihjaGF0LlRPUElDKQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk1BSU4sIGNhbi5yZXF1ZXN0KCkpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQl9KQoKCQljYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgY2hhdC5PTlNFQVJDSCwgZnVuY3Rpb24obXNnLCB3b3JkKSB7IGlmICh3b3JkWzBdID09IGN0eC5DT01NQU5EIHx8IHdvcmRbMV0gIT0gIiIpIHsgdmFyIG1ldGEgPSBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEKCQkJdmFyIGxpc3QgPSB3b3JkWzFdID09ICIiPyBtZXRhOiBtZXRhW3dvcmRbMV1dPyBraXQuRGljdCh3b3JkWzFdLCBtZXRhW3dvcmRbMV1dKToge30KCQkJY2FuLmNvcmUuSXRlbShsaXN0LCBmdW5jdGlvbihuYW1lLCBjb21tYW5kKSB7IG5hbWUgPSBjYW4uYmFzZS50cmltUHJlZml4KG5hbWUsICJjYW4uIikKCQkJCWNhbi5jb3JlLkxpc3QobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUykuc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCW1zZy5QdXNoKGl0ZW0sIGtpdC5EaWN0KGljZS5DVFgsIGNoYXQuT05FTkdJTkUsIGljZS5DTUQsIGN0eC5DT01NQU5ELAoJCQkJCQltZGIuVFlQRSwgaWNlLkNBTiwgbWRiLk5BTUUsIG5hbWUsIG1kYi5URVhULCBjb21tYW5kLmhlbHAsCgkJCQkJCWN0eC5DT05URVhULCBpY2UuQ0FOLCBjdHguQ09NTUFORCwgbmFtZSwKCQkJCQkJY3R4LklOREVYLCBjYW4uY29yZS5LZXlzKGljZS5DQU4sIG5hbWUpLAoJCQkJCSlbaXRlbV18fCIiKQoJCQkJfSkKCQkJfSkKCQl9IH0pCgl9LAoJX3NlYXJjaDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCQl2YXIgc3ViLCBtb2QgPSBjYW4sIGZ1biA9IGNhbiwga2V5ID0gIiI7IGNhbi5jb3JlLkxpc3QoY21kc1sxXS5zcGxpdChpY2UuUFQpLCBmdW5jdGlvbih2YWx1ZSkgewoJCQlmdW4gJiYgKHN1YiA9IG1vZCwgbW9kID0gZnVuLCBmdW4gPSBtb2RbdmFsdWVdLCBrZXkgPSB2YWx1ZSkKCQl9KTsgaWYgKCFzdWIgfHwgIW1vZCB8fCAhZnVuKSB7IGNhbi5taXNjLldhcm4oaWNlLkVyck5vdEZvdW5kLCBjbWRzKQoJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cuRWNobyhpY2UuRXJyV2FybiwgaWNlLkVyck5vdEZvdW5kLCBjbWRzKSkKCQl9CgoJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhmdW4sIHsKCQkJZXZlbnQ6IGV2ZW50LCBjYW46IHN1YiwgbXNnOiBtc2csIGNtZHM6IGNtZHMuc2xpY2UoMiksIGNiOiBjYiwgdGFyZ2V0OiBzdWIuX3RhcmdldCwKCQkJYnV0dG9uOiBrZXksIGNtZDoga2V5LCBhcmc6IGNtZHMuc2xpY2UoMiksIGxpc3Q6IGNtZHMuc2xpY2UoMiksCgkJfSwgbW9kKQoJfSwKCV9yZW1vdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJaWYgKHBhbmVsLm9uZW5naW5lLl9lbmdpbmUoZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpKSB7IHJldHVybiB9CgkJaWYgKHBhbmVsLm9uZW5naW5lLl9wbHVnaW4oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpKSB7IHJldHVybiB9CgoJCXZhciBrZXlzID0gY2FuLmNvcmUuS2V5cyhwYW5lbC5fbmFtZSwgY21kcy5qb2luKGljZS5GUykpCgkJaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1zZy5DbGVhcihpY2UuTVNHX0FQUEVORCkKCQkJdmFyIHJlcyA9IFZvbGNhbm9zLm1ldGEucGFja1trZXlzXTsgcmVzPyBtc2cuQ29weShyZXMpOiBjYW4udXNlci50b2FzdChjYW4sICLnvLrlpLHmlbDmja4iKQoJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfQoKCQl2YXIgdG9hc3QsIF90b2FzdCA9IG1zZy5PcHRpb24oY2hhdC5fVE9BU1QpOyBpZiAoX3RvYXN0KSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0b2FzdCA9IHRvYXN0fHxjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCBfdG9hc3QsIG1zZy5fY2FuLl9uYW1lKSB9KSB9CgkJbXNnLm9wdGlvbiA9IGNhbi5jb3JlLkxpc3QobXNnLm9wdGlvbiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4ge190b2FzdDogdHJ1ZSwgX2hhbmRsZTogdHJ1ZX1baXRlbV0gJiYgZGVsZXRlKG1zZ1tpdGVtXSk/IHVuZGVmaW5lZDogaXRlbSB9KQoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OUkVNT1RFLCBjYW4ucmVxdWVzdCh7fSwge19mb2xsb3c6IHBhbmVsLl9mb2xsb3csIF9tc2c6IG1zZywgX2NtZHM6IGNtZHN9KSkKCgkJdmFyIG5hbWVzID0gbXNnLk9wdGlvbihjaGF0Ll9OQU1FUyl8fHBhbmVsLl9uYW1lc3x8KChjYW4uQ29uZigiaWNlYmVyZyIpfHxWb2xjYW5vcy5tZXRhLmljZWJlcmcpK3BhbmVsLl9uYW1lKQoJCWNhbi5taXNjLlJ1bihldmVudCwgY2FuLCB7bmFtZXM6IG5hbWVzLCBkYWVtb246IG1zZy5fZGFlbW9ufSwgY21kcywgZnVuY3Rpb24obXNnKSB7CgkJCVZvbGNhbm9zLm1ldGEucGFja1trZXlzXSA9IG1zZywgdG9hc3QgJiYgdG9hc3QuY2xvc2UoKSwgdG9hc3QgPSB0cnVlLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQl9KQoJfSwKCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJcmV0dXJuIGZhbHNlCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCQlpZiAoY21kc1swXSA9PSBjdHguQUNUSU9OICYmIGNtZHNbMV0gPT0gaWNlLlJVTiAmJiBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1syXV0pIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtjbWRzWzJdXSwge2NhbjogcGFuZWwsIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDMpLCBjYjogY2J9KSwgdHJ1ZQoJCX0KCQl2YXIgcCA9IGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtjbWRzWzBdXSwgbiA9IDE7IGlmIChwKSB7CgkJCWlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMV1dICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTikgeyBuID0gMyB9IGVsc2UgaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1swXV0pIHsgbiA9IDIgfQoJCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMocCwge2NhbjogcC5jYW58fHBhbmVsLCBtc2c6IG1zZywgYXJnOiBjbWRzLnNsaWNlKG4pLCBjbWRzOiBjbWRzLnNsaWNlKG4pLCBjYjogY2J9KSwgdHJ1ZQoJCX0KCQlyZXR1cm4gZmFsc2UKCX0sCgoJcGx1Z2luOiBzaHkoIua3u+WKoOaPkuS7tiIsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgY29tbWFuZCkgewoJCWlmIChjYW4uYmFzZS5pc09iamVjdChuYW1lKSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuSXRlbShuYW1lLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQluYW1lLmhhc093blByb3BlcnR5KGtleSkgJiYgY2FuLmJhc2UuaXNGdW5jKHZhbHVlKSAmJiBjYW4ub25lbmdpbmUucGx1Z2luKGNhbiwga2V5LCB2YWx1ZSkgfSkKCQl9CgkJbmFtZSA9IGNhbi5iYXNlLnRyaW1QcmVmaXgobmFtZSwgImNhbi4iKQoJCXZhciB0eXBlID0gaHRtbC5URVhUOyBjb21tYW5kLmxpc3QgPSBjYW4uY29yZS5MaXN0KGNvbW1hbmQubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlzd2l0Y2ggKHR5cGVvZiBpdGVtKSB7CgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXR1cm4gY2FuLmNvcmUuU3BsaXRJbnB1dChpdGVtKQoJCQkJY2FzZSBsYW5nLk9CSkVDVDogcmV0dXJuIHR5cGUgPSBpdGVtLnR5cGV8fHR5cGUsIGl0ZW0KCQkJfQoJCX0pLCBjb21tYW5kLmNhbiA9IGNhbiwgYXJndW1lbnRzLmNhbGxlZS5tZXRhW2Nhbi5jb3JlLktleXMoaWNlLkNBTiwgbmFtZSldID0gY29tbWFuZAoJfSksCglsaXN0ZW46IHNoeSgi55uR5ZCs5LqL5Lu2IiwgZnVuY3Rpb24oY2FuLCBuYW1lLCBjYikgewoJCWFyZ3VtZW50cy5jYWxsZWUubWV0YVtuYW1lXSA9IChhcmd1bWVudHMuY2FsbGVlLm1ldGFbbmFtZV18fFtdKS5jb25jYXQoY2IpCgl9KSwKCXNpZ25hbDogc2h5KCLop6blj5Hkuovku7YiLCBmdW5jdGlvbihjYW4sIG5hbWUsIG1zZykgeyBtc2cgPSBtc2d8fGNhbi5yZXF1ZXN0KCkKCQljYW4ubWlzYy5Mb2coZ2RiLlNJR05BTCwgbmFtZSwgKG1zZy5fY21kc3x8W10pLCBuYW1lID09IGNoYXQuT05SRU1PVEU/IG1zZy5PcHRpb24oIl9tc2ciKTogbXNnKQoJCXJldHVybiBjYW4uY29yZS5MaXN0KGNhbi5vbmVuZ2luZS5saXN0ZW4ubWV0YVtuYW1lXSwgZnVuY3Rpb24oY2IpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogbXNnLl9ldmVudCwgbXNnOiBtc2d9KSB9KS5sZW5ndGgKCX0pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OREFFTU9OLCB7aGVscDogIuaOqOiNkOW8leaTjiIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG5hbWUpIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm1pc2MuV1NTKGNhbiwge3R5cGU6IGh0bWwuQ0hST01FLCBuYW1lOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBjbGkuREFFTU9OKXx8bmFtZXx8IiIsIHRleHQ6IGNhbi51c2VyLnRpdGxlKCl9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQl2YXIgc3ViID0gY2FuLm9uZGFlbW9uLl9saXN0W21zZy5PcHRpb24oaWNlLk1TR19UQVJHRVQpXQoJCQljYW4uYmFzZS5pc0Z1bmMoY2FuLm9uZGFlbW9uW2NtZF0pPyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25kYWVtb25bY21kXSwgewoJCQkJY2FuOiBjYW4sIHN1Yjogc3ViLCBtc2c6IG1zZywgY21kOiBjbWQsIGFyZzogYXJnLCBjYjogZnVuY3Rpb24oKSB7IG1zZy5SZXBseSgpIH0sCgkJCX0pOiBjYW4ub25lbmdpbmUuX3NlYXJjaCh7fSwgY2FuLCBtc2csIGNhbiwgW2NoYXQuX1NFQVJDSCwgY21kXS5jb25jYXQoYXJnKSwgZnVuY3Rpb24oKSB7IG1zZy5SZXBseSgpIH0pCgkJfSkKCX0sIF9saXN0OiBbIiJdLAoJcmVmcmVzaDogZnVuY3Rpb24oY2FuLCBtc2csIHN1YikgeyBzdWIuVXBkYXRlKCkgfSwKCWdyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBzdWIsIGFyZykgewoJCXN1Yi5vbmltcG9ydC5fZ3JvdyhzdWIsIG1zZywgY2FuLnBhZ2UuQ29sb3IoYXJnLmpvaW4oIiIpKSkKCX0sCgl0b2FzdDogZnVuY3Rpb24oY2FuLCBtc2csIGFyZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4udXNlci50b2FzdCwge2NhbjogY2FuLCBtc2c6IG1zZywgY21kczogYXJnfSkgfSwKCXB3ZDogZnVuY3Rpb24oY2FuLCBtc2csIGFyZykgewoJCWNhbi5fd3NzX25hbWUgPSBjYW4ub25kYWVtb24uX2xpc3RbMF0gPSBhcmdbMF0KCX0sCglleGl0OiBmdW5jdGlvbihjYW4sIG1zZywgc3ViKSB7IGNhbi51c2VyLmNsb3NlKCkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCBjYiwgdGFyZ2V0LCBmaWVsZCkgewoJCW1ldGEubmFtZSA9IChtZXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuU1ApWzBdLnNwbGl0KGljZS5QVCkucG9wKCkKCQlmaWVsZCA9IGZpZWxkfHxjYW4ub25hcHBlbmQuZmllbGQoY2FuLCBtZXRhLnR5cGUsIG1ldGEsIHRhcmdldCkuZmlyc3QKCQl2YXIgbGVnZW5kID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuTEVHRU5EKVswXQoJCXZhciBvcHRpb24gPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBmaWVsZCwgaHRtbC5GT1JNX09QVElPTilbMF0KCQl2YXIgYWN0aW9uID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX0FDVElPTilbMF0KCQl2YXIgb3V0cHV0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX09VVFBVVClbMF0KCQl2YXIgc3RhdHVzID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX1NUQVRVUylbMF0KCgkJdmFyIHN1YiA9IFZvbGNhbm9zKG1ldGEubmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIG1ldGEubmFtZSksIF90YXJnZXQ6IGZpZWxkLAoJCQlfbGVnZW5kOiBsZWdlbmQsIF9vcHRpb246IG9wdGlvbiwgX2FjdGlvbjogYWN0aW9uLCBfb3V0cHV0OiBvdXRwdXQsIF9zdGF0dXM6IHN0YXR1cywKCQkJX2lucHV0czoge30sIF9vdXRwdXRzOiBbXSwgX2hpc3Rvcnk6IFtdLCBfcm9vdDogY2FuLl9yb290LAoKCQkJU3RhdHVzOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShrZXksIHN1Yi5TdGF0dXMpLCBrZXkgfQoJCQkJa2V5ICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHN0YXR1cywgW1tbaHRtbC5ESVYsIGtleV0sIGh0bWwuU1BBTl1dLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJaWYgKHZhbHVlICYmIHZhbHVlLmluZGV4T2YgJiYgdmFsdWUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgdmFsdWUgPSBjYW4ucGFnZS5Gb3JtYXQoaHRtbC5BLCB2YWx1ZSkgfQoJCQkJCXJldHVybiB2YWx1ZSA9PSB1bmRlZmluZWQ/ICh2YWx1ZSA9IGl0ZW0uaW5uZXJIVE1MKTogKGl0ZW0uaW5uZXJIVE1MID0gdmFsdWUpCgkJCQl9KTsgcmV0dXJuIHZhbHVlCgkJCX0sCgkJCUFjdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGFjdGlvbiwga2V5LCB2YWx1ZSlbMF0gfSwKCQkJT3B0aW9uOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCBrZXksIHZhbHVlKVswXSB9LAoJCQlVcGRhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7IHN1Yi5vbmFwcGVuZC5fb3V0cHV0MChzdWIsIHN1Yi5Db25mKCksIGV2ZW50fHx7fSwgY21kc3x8c3ViLklucHV0KCksIGNiLCBzaWxlbnQpOyByZXR1cm4gdHJ1ZSB9LAoJCQlGb2N1czogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIG9wdGlvbiwgaHRtbC5JTlBVVF9BUkdTLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgeyBpbmRleCA9PSAwICYmIGl0ZW0uZm9jdXMoKSB9KSB9LAoJCQlJbnB1dDogZnVuY3Rpb24oY21kcywgc2lsZW50KSB7CgkJCQljbWRzID0gY21kcyAmJiBjbWRzLmxlbmd0aCA+IDA/IGNtZHM6IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiKS5jb25jYXQoY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGFjdGlvbiwgIiIpKSwgY21kcyA9IGNhbi5iYXNlLnRyaW0oY21kcykKCQkJCXNpbGVudCB8fCBjbWRzWzBdID09IGN0eC5BQ1RJT04gfHwgY2FuLmJhc2UuRXEoc3ViLl9oaXN0b3J5W3N1Yi5faGlzdG9yeS5sZW5ndGgtMV0sIGNtZHMpIHx8IHN1Yi5faGlzdG9yeS5wdXNoKGNtZHMpCgkJCQlyZXR1cm4gY21kcwoJCQl9LAoJCQlDbG9uZTogZnVuY3Rpb24oKSB7IG1ldGEuYXJncyA9IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiKQoJCQkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwgbWV0YSwgbGlzdCwgZnVuY3Rpb24oc3ViKSB7IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCB0cnVlKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBmb3IgKHZhciBrIGluIHN1Yi5faW5wdXRzKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHN1Yi5faW5wdXRzW2tdLl90YXJnZXQpOyBicmVhayB9IH0pCgkJCQl9LCB0YXJnZXQpCgkJCX0sCgkJfSwgbGlzdCwgZnVuY3Rpb24oc3ViKSB7IHN1Yi5Db25mKG1ldGEpLCBtZXRhLmZlYXR1cmUgPSBjYW4uYmFzZS5PYmoobWV0YS5mZWF0dXJlLCB7fSkKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGZpZWxkLCBtZXRhLmluZGV4PyBtZXRhLmluZGV4LnNwbGl0KGljZS5QVCkucG9wKCk6IG1ldGEubmFtZSkKCQkJdmFyIHN0eWxlID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5zdHlsZXx8bWV0YS5mZWF0dXJlLnN0eWxlKTsgc3dpdGNoICh0eXBlb2Ygc3R5bGUpIHsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgc3R5bGUpOyBicmVhawoJCQkJY2FzZSBsYW5nLk9CSkVDVDogY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwgc3R5bGUpOyBicmVhawoJCQl9CgkJCW1ldGEudHlwZSAhPSBzdWIuTW9kZSgpICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgc3ViLk1vZGUoKSkKCgkJCW1ldGEuaW5wdXRzICYmIHN1Yi5vbmFwcGVuZC5fb3B0aW9uKHN1YiwgbWV0YSwgc3ViLl9vcHRpb24sIG1ldGEubXNnKQoJCQlpZiAobWV0YS5tc2cpIHsgdmFyIG1zZyA9IHN1Yi5yZXF1ZXN0KCk7IG1zZy5Db3B5KGNhbi5iYXNlLk9iaihtZXRhLm1zZykpLCBzdWIub25hcHBlbmQuX291dHB1dChzdWIsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmZlYXR1cmUuZGlzcGxheSkgfQoKCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgc3ViLl9sZWdlbmQsIGtpdC5EaWN0KGNhbi5Db25mKCJsZWdlbmRfZXZlbnQiKXx8Y2hhdC5PTk1PVVNFRU5URVIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgc3ViLCBzdWIub25hY3Rpb24sIHN1Yi5vbmFjdGlvbi5saXN0LmNvbmNhdChbWyLmiYDmnIkiXS5jb25jYXQoY2FuLmNvcmUuSXRlbShtZXRhLmZlYXR1cmUuX3RyYW5zKSldKSwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIG1ldGEpIHsKCQkJCQl2YXIgY2IgPSBjYW4uY29yZS5WYWx1ZShzdWIsIFtjaGF0Ll9PVVRQVVRTX0NVUlJFTlQsIGNoYXQuT05BQ1RJT04sIGl0ZW1dKQoJCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHJldHVybiBjYihldmVudCwgY2FuLmNvcmUuVmFsdWUoc3ViLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpLCBpdGVtKSB9CgkJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdCgkJCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikpIHsgcmV0dXJuIGNiKGV2ZW50LCBzdWIsIGl0ZW0pIH0KCQkJCX0pCgkJCX0pKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSk7IHJldHVybiBzdWIKCX0sCglfb3B0aW9uOiBmdW5jdGlvbihjYW4sIG1ldGEsIG9wdGlvbiwgc2tpcCkgeyBtZXRhID0gbWV0YXx8e307IHZhciBpbmRleCA9IC0xLCBhcmdzID0gY2FuLmJhc2UuT2JqKG1ldGEuYXJnc3x8bWV0YS5hcmd8fG1ldGEub3B0LCBbXSksIG9wdHMgPSBjYW4uYmFzZS5PYmoobWV0YS5vcHRzLCB7fSkKCQlmdW5jdGlvbiBhZGQoaXRlbSwgbmV4dCkgeyBpdGVtID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IGl0ZW19OiBpdGVtLCBpdGVtLnR5cGUgIT0gaHRtbC5CVVRUT04gJiYgaW5kZXgrKwoJCQlyZXR1cm4gVm9sY2Fub3MoaXRlbS5uYW1lLCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgaXRlbS5uYW1lKSwgX3Jvb3Q6IGNhbi5fcm9vdCwKCQkJCV90YXJnZXQ6IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIGl0ZW0sIGFyZ3NbaW5kZXhdfHxvcHRzW2l0ZW0ubmFtZV0sIG9wdGlvbnx8Y2FuLl9vcHRpb24pLAoJCQkJX29wdGlvbjogb3B0aW9ufHxjYW4uX29wdGlvbiwgX2FjdGlvbjogY2FuLl9hY3Rpb24sIF9vdXRwdXQ6IGNhbi5fb3V0cHV0LCBfc3RhdHVzOiBjYW4uX3N0YXR1cywKCQkJCU9wdGlvbjogY2FuLk9wdGlvbiwgQWN0aW9uOiBjYW4uQWN0aW9uLCBTdGF0dXM6IGNhbi5TdGF0dXMsIENsb25lRmllbGQ6IGNhbi5DbG9uZSwKCQkJCUNsb25lSW5wdXQ6IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBhZGQoaXRlbSkuX3RhcmdldCkgfSwKCQkJfSwgW2l0ZW0uZGlzcGxheSwgY2hhdC5QTFVHSU5fSU5QVVRfSlNdLCBmdW5jdGlvbihpbnB1dCkgeyBpbnB1dC5Db25mKGl0ZW0pCgkJCQlpbnB1dC5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJaWYgKGl0ZW0uX2NiKSB7IHJldHVybiBpdGVtLl9jYihldmVudCkgfQoJCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCksIGNtZHMpKSB7IHJldHVybiB9CgkJCQkJaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIGlucHV0LCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJCXJldHVybiBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoY21kcywgc2lsZW50KSwgY2IsIHNpbGVudCkKCQkJCX0sIGNhbi5faW5wdXRzW2l0ZW0ubmFtZV0gPSBpbnB1dCwgaW5wdXQuc3VwID0gY2FuCgoJCQkJY2FuLmNvcmUuSXRlbUNCKGlucHV0Lm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7IGlucHV0Ll90YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBpbnB1dCkgfSB9KQoJCQkJY2FuLmNvcmUuSXRlbUNCKGl0ZW0sIGZ1bmN0aW9uKGtleSwgY2IpIHsgaW5wdXQuX3RhcmdldFtrZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgY2IoZXZlbnQsIGlucHV0KSB9IH0pCgkJCQlza2lwPyBuZXh0KCk6IGNhbi5jb3JlLkNhbGxGdW5jKFtpbnB1dC5vbmFjdGlvbiwgY2hhdC5fSU5JVF0sIFtpbnB1dCwgaXRlbSwgbmV4dCwgaW5wdXQuX3RhcmdldF0pOwoJCQkJKGl0ZW0uYWN0aW9ufHxjYW4uY29yZS5WYWx1ZShtZXRhLCBbY3R4LkZFQVRVUkUsIGN0eC5JTlBVVFNdKSkgJiYgY2FuLm9uYXBwZW5kLmZpZ3VyZShpbnB1dCwgaXRlbSwgaW5wdXQuX3RhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSkgewoJCQkJCWlucHV0Ll90YXJnZXQudmFsdWUgPSB2YWx1ZSwgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgaW5wdXQuX3RhcmdldCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLlVwZGF0ZSgpIH0pCgkJCQl9KQoJCQl9KQoJCX07IGNhbi5jb3JlLk5leHQoY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLmNvcmUuVmFsdWUoY2FuLCBbY2hhdC5PTklNUE9SVCwgbWRiLkxJU1RdKSwgY2FuLmJhc2UuT2JqKG1ldGEuaW5wdXRzKSkuY29uY2F0KFt7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6IGNsaS5DTE9TRX1dKSwgYWRkKQoJfSwKCV9hY3Rpb246IGZ1bmN0aW9uKGNhbiwgbGlzdCwgYWN0aW9uLCBtZXRhKSB7IGxpc3QgPSBjYW4uYmFzZS5PYmooY2FuLmJhc2UuZ2V0VmFsaWQobGlzdCwgY2FuLmNvcmUuSXRlbShtZXRhKSksIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05BQ1RJT04sIG1kYi5MSVNUXSkpOyBpZiAoIWxpc3QpIHsgcmV0dXJuIH0KCQl2YXIgX2xpc3QgPSBjYW4ucGFnZS5pbnB1dHMoY2FuLCBsaXN0KTsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgYWN0aW9uKSwgbWV0YSA9IG1ldGF8fGNhbi5vbmFjdGlvbnx8e30KCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChfbGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0gY2FuLm9uYXBwZW5kLmlucHV0KGNhbiwgaXRlbSA9PSAiIj8gLyrnqbrnmb0qLyB7dHlwZTogaHRtbC5TUEFDRX06CgkJCWNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyAvKuaMiemUriovIHt0eXBlOiBodG1sLkJVVFRPTiwgdmFsdWU6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbSksIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2IgPSBtZXRhW2l0ZW1dfHxtZXRhW2NoYXQuX0VOR0lORV07IGNiPyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgY2FuOiBjYW4sIGJ1dHRvbjogaXRlbX0pOiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgaXRlbV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgoJCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsKCQkJCQl2YXIgY2IgPSBtZXRhW2l0ZW1dfHxtZXRhW2NoYXQuX0VOR0lORV07IGNiPyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgY2FuOiBjYW4sIGJ1dHRvbjogaXRlbX0pOiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgaXRlbV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgkJCQl9CgoJCQl9fTogaXRlbS5sZW5ndGggPiAwPyAvKuWIl+ihqCovIHt0eXBlOiBodG1sLlNFTEVDVCwgbmFtZTogaXRlbVswXSwgdmFsdWVzOiBpdGVtLnNsaWNlKDEpLCBvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciB3aGljaCA9IGl0ZW1bZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXgrMV0KCQkJCWNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbd2hpY2hdLCBbZXZlbnQsIGNhbiwgd2hpY2hdKQoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YVtpdGVtWzBdXSwgW2V2ZW50LCBjYW4sIGl0ZW1bMF0sIHdoaWNoXSkKCgkJCX19OiAvKuWFtuWugyovIGl0ZW0sICIiLCBhY3Rpb24pfSksIG1ldGEKCX0sCglfb3V0cHV0MDogZnVuY3Rpb24oY2FuLCBtZXRhLCBldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBpZiAobXNnLlJ1bkFjdGlvbihldmVudCwgY2FuLCBjbWRzKSkgeyByZXR1cm4gfQoJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSAhPSBpY2UuVFJVRSAmJiBjbWRzICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBtZXRhLmZlYXR1cmVbY21kc1sxXV0pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBjbWRzWzFdfSkKCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhtZXRhLmZlYXR1cmVbY21kc1sxXV0pKSB7IHJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhtZXRhLmZlYXR1cmVbY21kc1sxXV0sIHtjYW46IGNhbiwgbXNnOiBtc2csIGNtZHM6IGNtZHMuc2xpY2UoMil9KSB9CgkJCXJldHVybiBjYW4udXNlci5pbnB1dChldmVudC5fZXZlbnR8fGV2ZW50LCBjYW4sIG1ldGEuZmVhdHVyZVtjbWRzWzFdXSwgZnVuY3Rpb24oYXJncykgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0sIGNhbi5PcHRpb24oKSkKCQkJCWNhbi5VcGRhdGUoZXZlbnQsIGNtZHMuc2xpY2UoMCwgMikuY29uY2F0KGFyZ3MpLCBjYnx8ZnVuY3Rpb24oKSB7CgkJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4uc3VwLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4uc3VwLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuUmVzdWx0KCkubGVuZ3RoID4gMCB8fCBtc2cuTGVuZ3RoKCkgPiAwKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZyksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQkJCQl9IGVsc2UgewoJCQkJCQljYW4uVXBkYXRlKCkKCQkJCQl9CgkJCQl9LCB0cnVlKQoJCQl9KQoJCX0KCgkJaWYgKG1ldGEgJiYgbWV0YS5pbmRleCAmJiBtZXRhLmluZGV4LmluZGV4T2YoImNhbi4iKSA9PSAwKSB7CgkJCWNhbi5vbmVuZ2luZS5fcGx1Z2luKGV2ZW50LCBjYW4sIG1zZywgY2FuLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbbWV0YS5pbmRleF0sIGNtZHMpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSk7IHJldHVybiB9CgkJCQkhc2lsZW50ICYmIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fG1ldGEuZGlzcGxheXx8bWV0YS5mZWF0dXJlLmRpc3BsYXkpCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKG1zZy5fZGFlbW9uKSkgewoJCQljYW4uYmFzZS5pc1VuZGVmaW5lZChjYW4uX2RhZW1vbikgJiYgY2FuLm9uZGFlbW9uLl9saXN0WzBdICYmIChjYW4uX2RhZW1vbiA9IGNhbi5vbmRhZW1vbi5fbGlzdC5wdXNoKGNhbiktMSkKCQkJaWYgKGNhbi5fZGFlbW9uKSB7IG1zZy5PcHRpb24oaWNlLk1TR19EQUVNT04sIGNhbi5jb3JlLktleXMoY2FuLm9uZGFlbW9uLl9saXN0WzBdLCBjYW4uX2RhZW1vbikpIH0KCQl9CgoJCXJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbihtc2cpIHsgdmFyIHN1YiA9IGNhbi5jb3JlLlZhbHVlKGNhbiwgY2hhdC5fT1VUUFVUU19DVVJSRU5UKXx8e30KCQkJaWYgKCFjbWRzIHx8IGNtZHNbMF0gIT0gY3R4LkFDVElPTikgeyBjYW4uX21zZyA9IG1zZywgc3ViLl9tc2cgPSBtc2csIG1zZy5fY21kcyA9IGNtZHMgfQoJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogY2FuLCBtc2c6IG1zZ30pOyByZXR1cm4gfQoJCQl2YXIgcHJvY2VzcyA9IG1zZy5fY2FuID09IGNhbiB8fCBtc2cuX2NhbiA9PSBzdWIKCQkJaWYgKHByb2Nlc3MgJiYgY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2Nhbjogc3ViLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCWlmIChwcm9jZXNzICYmIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkhc2lsZW50ICYmIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fG1ldGEuZGlzcGxheXx8bWV0YS5mZWF0dXJlLmRpc3BsYXksIGNhbi5fb3V0cHV0LCBjYW4uX2FjdGlvbikKCQl9KQoJfSwKCV9vdXRwdXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBkaXNwbGF5LCBvdXRwdXQsIGFjdGlvbiwgY2IpIHsgZGlzcGxheSA9IGRpc3BsYXl8fGNoYXQuUExVR0lOX1RBQkxFX0pTLCBvdXRwdXQgPSBvdXRwdXR8fGNhbi5fb3V0cHV0CgkJY2FuLl9kaXNwbGF5ID0gZGlzcGxheQoJCVZvbGNhbm9zKGRpc3BsYXksIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBkaXNwbGF5KSwgX3RhcmdldDogb3V0cHV0LCBfZmllbGRzOiBjYW4uX3RhcmdldCwgX2Rpc3BsYXk6IGRpc3BsYXksCgkJCV9sZWdlbmQ6IGNhbi5fbGVnZW5kLCBfb3B0aW9uOiBjYW4uX29wdGlvbiwgX2FjdGlvbjogY2FuLl9hY3Rpb24sIF9vdXRwdXQ6IGNhbi5fb3V0cHV0LCBfc3RhdHVzOiBjYW4uX3N0YXR1cywgX3Jvb3Q6IGNhbi5fcm9vdCwKCQkJVXBkYXRlOiBjYW4uVXBkYXRlLCBPcHRpb246IGNhbi5PcHRpb24sIEFjdGlvbjogY2FuLkFjdGlvbiwgU3RhdHVzOiBjYW4uU3RhdHVzLAoJCX0sIFtkaXNwbGF5LCBjaGF0LlBMVUdJTl9UQUJMRV9KU10sIGZ1bmN0aW9uKHRhYmxlKSB7IHRhYmxlLkNvbmYoY2FuLkNvbmYoKSkKCQkJdGFibGUucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIHRhYmxlLCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJcmV0dXJuIGNhbi5VcGRhdGUoZXZlbnQsIGNhbi5JbnB1dChjbWRzLCBzaWxlbnQpLCBjYiwgc2lsZW50KQoJCQl9LCBjYW4uX291dHB1dHMgJiYgY2FuLl9vdXRwdXRzLnB1c2godGFibGUpLCB0YWJsZS5zdXAgPSBjYW4sIHRhYmxlLl9tc2cgPSBtc2cKCgkJCXRhYmxlLl9pbmRleCA9IGNhbi5faW5kZXgKCQkJdGFibGUuTW9kZShjYW4uTW9kZSgpKSwgdGFibGUuQ29uZih0YWJsZS5fYXJncyA9IGNhbi5iYXNlLlBhcnNlVVJMKHRhYmxlLl9kaXNwbGF5KSkKCQkJdGFibGUuX3RyYW5zID0gY2FuLmJhc2UuQ29weSh0YWJsZS5fdHJhbnN8fHt9LCBjYW4uY29yZS5WYWx1ZSh0YWJsZSwgIm9uYWN0aW9uLl90cmFucyIpKQoJCQlpZiAodGFibGUub25pbXBvcnQgJiYgY2FuLmJhc2UuaXNBcnJheSh0YWJsZS5vbmltcG9ydC5saXN0KSAmJiB0YWJsZS5vbmltcG9ydC5saXN0Lmxlbmd0aCA+IDApIHsKCQkJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3B0aW9uKSwgY2FuLm9uYXBwZW5kLl9vcHRpb24oY2FuLCB7aW5wdXRzOiBjYW4ucGFnZS5pbnB1dHMoY2FuLCB0YWJsZS5vbmltcG9ydC5saXN0KSB9KQoJCQl9CgoJCQljYW4uY29yZS5DYWxsRnVuYyhbdGFibGUsIGNoYXQuT05JTVBPUlQsIGNoYXQuX0lOSVRdLCB7Y2FuOiB0YWJsZSwgbXNnOiBtc2csIGNiOiBmdW5jdGlvbihtc2cpIHsKCQkJCWFjdGlvbiA9PT0gZmFsc2UgfHwgdGFibGUub25hcHBlbmQuX2FjdGlvbih0YWJsZSwgbXNnLk9wdGlvbihpY2UuTVNHX0FDVElPTil8fGNhbi5Db25mKGljZS5NU0dfQUNUSU9OKSwgYWN0aW9uKQoJCQkJYWN0aW9uID09PSBmYWxzZSB8fCB0YWJsZS5vbmFwcGVuZC5fc3RhdHVzKHRhYmxlLCBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCQl9LCB0YXJnZXQ6IG91dHB1dHx8Y2FuLl9vdXRwdXR9KQoJCX0pCgl9LAoJX3N0YXR1czogZnVuY3Rpb24oY2FuLCBsaXN0LCBzdGF0dXMpIHsgc3RhdHVzID0gc3RhdHVzfHxjYW4uX3N0YXR1cywgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgc3RhdHVzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UuT2JqKGxpc3QsIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05FWFBPUlQsIG1kYi5MSVNUXSkpLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0gPSBjYW4uYmFzZS5pc09iamVjdChpdGVtKT8gaXRlbToge25hbWU6IGl0ZW19CgoJCQlpZiAoaXRlbS52YWx1ZSAmJiBpdGVtLnZhbHVlLmluZGV4T2YgJiYgaXRlbS52YWx1ZS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBpdGVtLnZhbHVlID0gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgaXRlbS52YWx1ZSkgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBzdGF0dXMsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBpdGVtLm5hbWVdKSwgdGl0bGU6IGl0ZW0ubmFtZSwgbGlzdDogWwoJCQkJe3RleHQ6IFtpdGVtLm5hbWUsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFsiOiAiLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbKGl0ZW0udmFsdWV8fCIiKSsiIiwgaHRtbC5TUEFOLCBpdGVtLm5hbWVdfSwKCQkJXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBpdGVtLnZhbHVlKSB9fV0pCgkJfSkKCX0sCgoJZmllbGQ6IGZ1bmN0aW9uKGNhbiwgdHlwZSwgaXRlbSwgdGFyZ2V0KSB7IHR5cGUgPSB0eXBlfHxodG1sLlBMVUdJTiwgaXRlbSA9IGl0ZW18fHt9CgkJdmFyIG5hbWUgPSAoaXRlbS5uaWNrfHxpdGVtLm5hbWV8fCIiKS5zcGxpdChpY2UuU1ApWzBdCgkJdmFyIHRpdGxlID0gIWl0ZW0uaGVscCB8fCBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IG5hbWU6IG5hbWUrIigiK2l0ZW0uaGVscC5zcGxpdChpY2UuU1ApWzBdKyIpIgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFt0eXBlfHwiIiwgaXRlbS5uYW1lfHwiIiwgaXRlbS5wb3N8fCIiXSksIGh0bWwuRklFTERTRVRdLCBsaXN0OiBbCgkJCW5hbWUgJiYge3RleHQ6IFt0aXRsZSwgaHRtbC5MRUdFTkRdfSwge3ZpZXc6IFtodG1sLk9QVElPTiwgaHRtbC5GT1JNXX0sIHt2aWV3OiBbaHRtbC5BQ1RJT05dfSwge3ZpZXc6IFtodG1sLk9VVFBVVF19LCB7dmlldzogW2h0bWwuU1RBVFVTXX0sCgkJXX1dKQoJfSwKCWlucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbHVlLCB0YXJnZXQsIHN0eWxlKSB7CgkJc3dpdGNoIChpdGVtLnR5cGUpIHsKCQkJY2FzZSAiIjogcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW2l0ZW1dKQoJCQljYXNlIGh0bWwuU1BBQ0U6IHJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBodG1sLlNQQUNFXSl9XSkKCQl9CgkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtLCB2YWx1ZSkKCQlpZiAoaXRlbS5yYW5nZSkgewoJCQlpbnB1dC5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtLm1vZGUgPSAic2ltcGxlIgoJCQkJY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LnZhbHVlID0gdmFsdWUsIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdKGV2ZW50LCBjYW4sIGl0ZW0ubmFtZSkKCQkJCX0pCgkJCX0KCQl9CgkJdmFyIGJyID0gaW5wdXQudHlwZSA9PSBodG1sLlRFWFRBUkVBPyBbe3R5cGU6IGh0bWwuQlIsIHN0eWxlOiB7Y2xlYXI6IGh0bWwuQk9USH19XTogW10KCQl2YXIgdGl0bGUgPSBjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGNoYXQuVElUTEUsIGl0ZW0ubmFtZV0uam9pbihpY2UuUFQpKXx8IiI7IHRpdGxlICYmIChpbnB1dC50aXRsZSA9IHRpdGxlKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIChbe3ZpZXc6IHN0eWxlfHxjYW4uYmFzZS5qb2luKFtodG1sLklURU0sIGl0ZW0udHlwZV0pLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXN3aXRjaCAoaXRlbS50eXBlKSB7CgkJCQljYXNlIGh0bWwuVEVYVDoKCQkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCQljYXNlIGxhbmcuRU5URVI6CgkJCQkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCk7CgkJCQkJCQljYW4ub25hY3Rpb24gJiYgY2FuLm9uYWN0aW9uW2l0ZW0ubmFtZV0gJiYgY2FuLm9uYWN0aW9uW2l0ZW0ubmFtZV0oZXZlbnQsIGNhbiwgaXRlbS5uYW1lKTsKCQkJCQkJCWJyZWFrCgkJCQkJfQoJCQkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKSwgY2FuLm9ubW90aW9uLnNlbGVjdEZpZWxkKGV2ZW50LCBjYW4pCgkJCQkJYnJlYWsKCQkJCWNhc2UgaHRtbC5URVhUQVJFQToKCQkJCQkvLyBzd2l0Y2ggKGV2ZW50LmtleSkgeyBjYXNlIGxhbmcuVEFCOiBjYW4ub25rZXltYXAuaW5zZXJ0VGV4dChldmVudC50YXJnZXQsIGljZS5UQik7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsgfQoJCQkJCWJyZWFrCgkJCX0KCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCX0sIGxpc3Q6IFtpbnB1dF19XSkuY29uY2F0KGJyKSlbaXRlbS5uYW1lXQoJfSwKCXRhYmxlOiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCwgc29ydCkgeyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRUYWJsZShjYW4sIG1zZywgdGFyZ2V0fHxjYW4uX291dHB1dCwgbXNnLmFwcGVuZCwgY2J8fGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgewoJCQlpZiAobXNnLmFwcGVuZC5sZW5ndGggPT0gMiAmJiBtc2cuYXBwZW5kWzBdID09IG1kYi5LRVkgJiYgbXNnLmFwcGVuZFsxXSA9PSBtZGIuVkFMVUUpIHsKCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCWxpbmUgPSB7fSwgY2FuLmNvcmUuTGlzdChhcnJheSwgZnVuY3Rpb24oaXRlbSkgeyBsaW5lW2l0ZW0ua2V5XSA9IGl0ZW0udmFsdWUgfSkKCQkJfQoKCQkJaWYgKGtleSA9PSAiZXh0cmEuY21kIikgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtjdHg6IGxpbmVbImV4dHJhLmN0eCJdLCBjbWQ6IGxpbmVbImV4dHJhLmNtZCJdLCBhcmc6IGxpbmVbImV4dHJhLmFyZyJdfSwgZnVuY3Rpb24oc3ViKSB7CgkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGxpbmUsIGNhbi5PcHRpb24oKSkKCQkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNhbi5jb3JlLktleXMobGluZVsiZXh0cmEuY3R4Il0sIGxpbmVbImV4dHJhLmNtZCJdKSwgY21kcywgY2IpCgkJCQkJfQoJCQkJfSwgdGFyZ2V0fHxjYW4uX291dHB1dCkKCQkJfQoKCQkJZnVuY3Rpb24gcnVuKGNtZHMpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwgbGluZSwgY2FuLk9wdGlvbigpKQoJCQkJcmV0dXJuIGNhbi5ydW4oZXZlbnQsIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkgIT0gIiIpIHsKCQkJCQkJY2FuLm9uYXBwZW5kLl9vdXRwdXQoY2FuLnN1cCwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpCgkJCQkJfSBlbHNlIGlmIChtc2cuTGVuZ3RoKCkgPiAwIHx8IG1zZy5SZXN1bHQoKS5sZW5ndGggPiAwICkgewoJCQkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLlVwZGF0ZSgpCgkJCQkJfQoJCQkJfSwgdHJ1ZSkKCQkJfQoKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgdGFyZ2V0KSAmJiB0YXJnZXQudHlwZSA9PSBodG1sLkJVVFRPTikgeyByZXR1cm4gcnVuKFtjdHguQUNUSU9OLCB0YXJnZXQubmFtZV0pIH0KCQkJCWlmIChrZXkgPT0gbWRiLkhBU0ggJiYgY2FuLnVzZXIubW9kLmlzRGl2KSB7IHJldHVybiBjYW4udXNlci5qdW1wcygiL2NoYXQvZGl2LyIrdmFsdWUpIH0KCQkJCWNhbi5zdXAub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBjYW4uc3VwLCBrZXksIGV2ZW50LnRhcmdldC5pbm5lclRleHQpCgoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBpZiAoW21kYi5LRVldLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiB9CgkJCQl2YXIgaXRlbSA9IGNhbi5jb3JlLkxpc3QoY2FuLkNvbmYoImZlYXR1cmUuaW5zZXJ0IiksIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0ubmFtZSA9PSBrZXkpIHsgcmV0dXJuIGl0ZW0gfSB9KVswXXx8e25hbWU6IGtleSwgdmFsdWU6IHZhbHVlfQoJCQkJaXRlbS5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgbGluZSksIGNtZHMsIGNiLCB0cnVlKSB9CgkJCQljYW4ub25tb3Rpb24ubW9kaWZ5cyhjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBvbGQpIHsgcnVuKFtjdHguQUNUSU9OLCBtZGIuTU9ESUZZLCBrZXksIHZhbHVlXSkgfSwgaXRlbSkKCQkJfX0KCQl9KTsgdGFibGUgJiYgY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIHRhYmxlLCBjaGF0LkNPTlRFTlQpCgkJaWYgKG1zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZFttc2cuYXBwZW5kLmxlbmd0aC0xXSA9PSBjdHguQUNUSU9OKSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YWJsZSwgY3R4LkFDVElPTikgfQoJCWNhbi5fdGFibGUgPSB0YWJsZSwgY2FuLnN1cCAmJiAoY2FuLnN1cC5fdGFibGUgPSB0YWJsZSkKCQlyZXR1cm4gc29ydCAmJiBjYW4ucGFnZS5SYW5nZVRhYmxlKGNhbiwgdGFibGUsIHNvcnQpLCB0YWJsZQoJfSwKCWJvYXJkOiBmdW5jdGlvbihjYW4sIHRleHQsIHRhcmdldCkgeyB0ZXh0ICYmIHRleHQuUmVzdWx0ICYmICh0ZXh0ID0gdGV4dC5SZXN1bHQoKSk7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCXZhciBjb2RlID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t0ZXh0OiBbY2FuLnBhZ2UuQ29sb3IodGV4dCksIGh0bWwuRElWLCBodG1sLkNPREVdfV0pLmNvZGUKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjb2RlLCBodG1sLklOUFVUX0JVVFRPTiwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCXRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJcmV0dXJuIGNhbi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5ydW4oKSB9KQoJCQl9CgkJfSkKCQlyZXR1cm4gKGNvZGUuc2Nyb2xsQnkgJiYgY29kZS5zY3JvbGxCeSgwLCAxMDAwMCkpLCBjb2RlCgl9LAoKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIG1ldGEsIGNiLCB0YXJnZXQsIGZpZWxkKSB7CgkJbWV0YS5mZWF0dXJlID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5mZWF0dXJlLCBjYW4uYmFzZS5PYmoodmFsdWUubWV0YSkpfHx7fQoJCW1ldGEuaW5wdXRzID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5pbnB1dHMsIGNhbi5iYXNlLk9iaih2YWx1ZS5saXN0KSl8fFtdCgkJbWV0YS5hcmdzID0gY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLmJhc2UuT2JqKG1ldGEuYXJncyksIGNhbi5iYXNlLk9iaihtZXRhLmFyZyksIGNhbi5iYXNlLk9iaih2YWx1ZS5hcmdzKSwgY2FuLmJhc2UuT2JqKHZhbHVlLmFyZykpfHxbXQoJCW1ldGEuZGlzcGxheSA9IG1ldGEuZGlzcGxheXx8dmFsdWUuZGlzcGxheQoKCQltZXRhLmhlaWdodCA9IG1ldGEuaGVpZ2h0fHxjYW4uQ29uZkhlaWdodCgpCgkJbWV0YS53aWR0aCA9IG1ldGEud2lkdGh8fGNhbi5Db25mV2lkdGgoKQoKCQltZXRhLnR5cGUgPSBtZXRhLnR5cGV8fGNoYXQuUExVR0lOCgkJbWV0YS5uYW1lID0gbWV0YS5uYW1lfHx2YWx1ZS5uYW1lCgkJbWV0YS5oZWxwID0gbWV0YS5oZWxwfHx2YWx1ZS5oZWxwCgoJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIG1ldGEsIFtjaGF0LlBMVUdJTl9TVEFURV9KU10sIGZ1bmN0aW9uKHN1Yiwgc2tpcCkgeyBzdWIuX2luZGV4ID0gdmFsdWUuaW5kZXh8fG1ldGEuaW5kZXgKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleCwgY21kcywgY2IpIH0KCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIsIG1ldGEsIHNraXApCgkJfSwgdGFyZ2V0fHxjYW4uX291dHB1dCwgZmllbGQpCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGZpZWxkKSB7IG1ldGEgPSBtZXRhfHx7fSwgbWV0YS5pbmRleCA9IG1ldGEuaW5kZXh8fGNhbi5jb3JlLktleXMobWV0YS5jdHgsIG1ldGEuY21kKQoJCXZhciBwID0gY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW21ldGEuaW5kZXhdLCByZXMgPSB7fTsgZnVuY3Rpb24gY2JzKHN1YiwgbWV0YSwgc2tpcCkgeyByZXMuX19wcm90b19fID0gc3ViLCBjYihzdWIsIG1ldGEsIHNraXApIH0KCQkobWV0YS5tZXRhIHx8IG1ldGEuaW5wdXRzICYmIG1ldGEuaW5wdXRzLmxlbmd0aCA+IDApPyAvKiDlsYDpg6jlkb3ku6QgKi8gY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB7bWV0YTogbWV0YS5tZXRhLCBsaXN0OiBtZXRhLmxpc3R9LCBtZXRhLCBjYnMsIHRhcmdldCwgZmllbGQpOgoJCQlwPyAvKiDliY3nq6/lkb3ku6QgKi8gY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB7bmFtZTogbWV0YS5pbmRleCwgaGVscDogcC5oZWxwLCBtZXRhOiBwLm1ldGEsIGxpc3Q6IHAubGlzdH0sIG1ldGEsIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgX2NiID0gcCwgbiA9IDAKCQkJCQlpZiAocC5tZXRhICYmIHAubWV0YVtjbWRzWzFdXSAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04pIHsgX2NiID0gcC5tZXRhW2NtZHNbMV1dLCBuID0gMiB9IGVsc2UgaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1swXV0pIHsgX2NiID0gcC5tZXRhW2NtZHNbMF1dLCBuID0gMSB9CgkJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoX2NiLCB7Y2FuOiBzdWIsIG1zZzogY2FuLnJlcXVlc3QoZXZlbnQpLCBjbWRzOiBjbWRzLnNsaWNlKG4pLCBjYjogY2J9KQoJCQkJfQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKHN1YiwgbWV0YSwgc2tpcCkKCQkJfSwgdGFyZ2V0LCBmaWVsZCk6IC8qIOWQjuerr+WRveS7pCAqLyBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBtZXRhKSwgY3R4LkNPTU1BTkQsIFttZXRhLmluZGV4XSwgZnVuY3Rpb24obXNnKSB7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQkJY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB2YWx1ZSwgbWV0YSwgY2JzLCB0YXJnZXQsIGZpZWxkKQoJCQl9KSB9KQoJCXJldHVybiByZXMKCX0sCglmaWd1cmU6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgdGFyZ2V0LCBjYnMpIHsgaWYgKFtodG1sLkJVVFRPTiwgaHRtbC5TRUxFQ1RdLmluZGV4T2YobWV0YS50eXBlKSA+IC0xKSB7IHJldHVybiB9CgkJdmFyIGlucHV0ID0gbWV0YS5hY3Rpb258fG1kYi5LRVk7IGlucHV0ICE9IGljZS5BVVRPICYmIGNhbi5yZXF1aXJlKFsiL3BsdWdpbi9pbnB1dC8iK2lucHV0KyIuanMiXSwgZnVuY3Rpb24oY2FuKSB7CgkJCWNhbi5jb3JlLkl0ZW1DQihjYW4ub25maWd1cmVbaW5wdXRdLCBmdW5jdGlvbihrZXksIG9uKSB7IHZhciBsYXN0ID0gdGFyZ2V0W2tleV07IHRhcmdldFtrZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgb24oZXZlbnQsIGNhbiwgbWV0YSwgZnVuY3Rpb24oY2IpIHsKCQkJCWZ1bmN0aW9uIF9jYnMoc3ViLCB2YWx1ZSwgb2xkKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYnMpPyBjYnMoc3ViLCB2YWx1ZSwgb2xkKTogdGFyZ2V0LnZhbHVlID0gdmFsdWV8fCIiLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSB9KSB9CgkJCQlpZiAodGFyZ2V0Ll9jYW4pIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCAgdGFyZ2V0Ll9jYW4uX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodGFyZ2V0Ll9jYW4sIF9jYnMpIH0KCQkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIHt0eXBlOiBodG1sLklOUFVULCBuYW1lOiBpbnB1dCwgcG9zOiBjaGF0LkZMT0FULCBtb2RlOiBtZXRhLm1vZGV9LCBbIi9wbHVnaW4vaW5wdXQvIitpbnB1dCsiLmpzIl0sIGZ1bmN0aW9uKHN1YikgeyBzdWIuQ29uZihtZXRhKQoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCQkJaWYgKG1ldGEucmFuZ2UpIHsKCQkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGZvciAodmFyIGkgPSBtZXRhLnJhbmdlWzBdOyBpIDwgbWV0YS5yYW5nZVsxXTsgaSArPSBtZXRhLnJhbmdlWzJdfHwxKSB7IG1zZy5QdXNoKCJ2YWx1ZSIsIGkpIH0gY2IobXNnKQoJCQkJCQkJcmV0dXJuCgkJCQkJCX0KCQkJCQkJKG1ldGEucnVufHxjYW4ucnVuKShzdWIucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKSwgY21kcywgY2IsIHRydWUpCgkJCQkJfQoJCQkJCWNhbi5vbmxheW91dC5maWd1cmUoe3RhcmdldDogdGFyZ2V0fSwgY2FuLCBzdWIuX3RhcmdldCksIGNhbi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl90YXJnZXQsIG1ldGEuc3R5bGUpCgkJCQkJdGFyZ2V0Ll9jYW4gPSBzdWIsIHN1Yi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBzdWIuX3RhcmdldCksIGRlbGV0ZSh0YXJnZXQuX2NhbikgfQoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCBfY2JzKSwgY2FuLmJhc2UuaXNGdW5jKG1ldGEuX2luaXQpICYmIG1ldGEuX2luaXQoc3ViLCBzdWIuX3RhcmdldCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9LCB0YXJnZXQsIGxhc3QpIH0gfSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkxBWU9VVCwge2hlbHA6ICLpobXpnaLluIPlsYAiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3Jvb3QuX3RhcmdldAoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLlBBR0UpKS5sZW5ndGggPiAwKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5GSUVMRFNFVF9MRUZULCBmdW5jdGlvbihmaWVsZCkgeyBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGZpZWxkLCAiIikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW1todG1sLkZJRUxEU0VUX0xFRlQsIGh0bWwuRElWX09VVFBVVF1dLCBmdW5jdGlvbihvdXRwdXQpIHsKCQkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgIiIpCgkJCQl9KQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTUFJTiwgZnVuY3Rpb24oZmllbGQpIHsgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgIiIpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsICIiKQoJCQkJfSkKCQkJfSkKCQkJcmV0dXJuCgkJfQoKCQl2YXIgd2lkdGggPSBjYW4uX3Jvb3QuX3dpZHRoLCBoZWlnaHQgPSBjYW4uX3Jvb3QuX2hlaWdodAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgY2FuLnBhZ2UuS2V5cyhodG1sLkZJRUxEU0VUX0hFQUQsIGh0bWwuRklFTERTRVRfRk9PVCksIGZ1bmN0aW9uKGZpZWxkKSB7CgkJCWhlaWdodCAtPSBmaWVsZC5vZmZzZXRIZWlnaHQKCQl9KQoKCQl2YXIgb2Zmc2V0ID0gY2FuLnVzZXIuaXNNb2JpbGUgJiYgIWNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDEwMDogMAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5GSUVMRFNFVF9MRUZULCBmdW5jdGlvbihmaWVsZCwgaW5kZXgpIHsKCQkJY2FuLnVzZXIuaXNNb2JpbGUgfHwgKHdpZHRoIC09IGZpZWxkLm9mZnNldFdpZHRoKQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGZpZWxkLCBoZWlnaHQtb2Zmc2V0KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9MRUZULCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgaGVpZ2h0LW9mZnNldC1odG1sLkFDVElPTl9IRUlHSFQtMikKCQkJfSkKCQl9KQoKCQljYW4udXNlci5pc01vYmlsZSB8fCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTUFJTiwgZnVuY3Rpb24oZmllbGQsIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZmllbGQsIGh0bWwuSEVJR0hULCBoZWlnaHQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQloZWlnaHQgLT0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX0FDVElPTilbMF0ub2Zmc2V0SGVpZ2h0CgkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgaGVpZ2h0KQoJCQl9KQoJCX0pCgoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OU0laRSwgY2FuLnJlcXVlc3Qoe30sIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCB1cmwsIHRhcmdldCkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0fHxjYW4uX3Jvb3QuX3RhcmdldCwgaHRtbC5CQUNLR1JPVU5ELCB1cmwgPT0gIiIgfHwgdXJsID09ICJ2b2lkIj8gIiI6ICd1cmwoIicrdXJsKyciKScpCgl9LAoJZmlndXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIHJpZ2h0KSB7IGlmICghZXZlbnQgfHwgIWV2ZW50LnRhcmdldCkgeyByZXR1cm4ge30gfSB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fZmllbGRzfHxjYW4uX3RhcmdldAoJCXZhciByZWN0ID0gZXZlbnQudGFyZ2V0ID09IGRvY3VtZW50LmJvZHk/IHtsZWZ0OiB3aW5kb3cuaW5uZXJXaWR0aC8yLCB0b3A6IDIwMCwgcmlnaHQ6IHdpbmRvdy5pbm5lcldpZHRoLzIsIGJvdHRvbTogMjAwfTogZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJdmFyIGxheW91dCA9IHJpZ2h0PyB7bGVmdDogcmVjdC5yaWdodCwgdG9wOiByZWN0LnRvcH06IHtsZWZ0OiByZWN0LmxlZnQsIHRvcDogcmVjdC5ib3R0b219CgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7IGxlZnQgPSBsZWZ0fHwwLCB0b3AgPSB0b3B8fDAKCQkJaWYgKGxheW91dC50b3ArdGFyZ2V0Lm9mZnNldEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkgewoJCQkJbGF5b3V0LnRvcCA9ICIiLCBsYXlvdXQuYm90dG9tID0gcmlnaHQ/IGh0bWwuQUNUSU9OX0hFSUdIVDogd2luZG93LmlubmVySGVpZ2h0LXJlY3QudG9wCgkJCX0KCQkJaWYgKGxheW91dC5sZWZ0K3RhcmdldC5vZmZzZXRXaWR0aCA+IGxlZnQrd2lkdGgpIHsKCQkJCWxheW91dC5sZWZ0ID0gIiIsIGxheW91dC5yaWdodCA9IDAKCQkJfQoJCX0pCgkJcmV0dXJuIGNhbi5vbm1vdGlvbi5tb3ZlKGNhbiwgdGFyZ2V0LCBsYXlvdXQpLCBsYXlvdXQKCX0sCgoJZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LkxBWU9VVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFsKCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5DT05URU5UfV19LAoJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t2aWV3OiBjaGF0LkRJU1BMQVl9XX0sCgkJXX1dKQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LkxBWU9VVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFt7dHlwZTogaHRtbC5UUiwgbGlzdDogWwoJCQl7dHlwZTogaHRtbC5URCwgbGlzdDogW3t2aWV3OiBjaGF0LlBST0pFQ1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfX1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFsKCQkJCXt2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5DT05URU5UfV19LAoJCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuRElTUExBWX1dfSwKCQkJCV19CgkJCV19CgkJXX1dIH1dKQoJfSwKCXByb2ZpbGVfYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9qZWN0LCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkuZGlzcGxheSwgaWNlLkFVVE8pCgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCX0sCglwcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fb3V0cHV0CgkJZnVuY3Rpb24gdG9nZ2xlKHZpZXcpIHsgdmFyIHNob3cgPSB2aWV3LnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB2aWV3LCBzaG93KSwgdmlldy5fdG9nZ2xlPyB2aWV3Ll90b2dnbGUoZXZlbnQsIHNob3cpOiBjYW4ub25pbXBvcnQubGF5b3V0ICYmIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQlyZXR1cm4gc2hvdwoJCX0KCgkJLy8gdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiLCBkb3duID0gIiYjNzA5OyIsIHVwID0gIiYjNzA4OyIKCQl2YXIgZ3QgPSAiJiMxMDA5NTsiLCBsdCA9ICImIzEwMDk0OyIsIGRvd24gPSBsdCwgdXAgPSBndAoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCXt2aWV3OiBbY2hhdC5QUk9KRUNULCBodG1sLlREXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5QUk9KRUNUXX1dfSwKCQkJe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFsKCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJCQl7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5URF0sIGxpc3Q6IFt7dmlldzogW2NoYXQuQ09OVEVOVF19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9KRUNUXV0sIGxpc3Q6IFt7dGV4dDogW2x0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkucHJvamVjdCk/IGx0OiBndCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9GSUxFXV0sIGxpc3Q6IFt7dGV4dDogW2x0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkucHJvZmlsZSk/IGd0OiBsdCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5ESVNQTEFZXV0sIGxpc3Q6IFt7dGV4dDogW3VwLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkuZGlzcGxheSk/IGRvd246IHVwLCBodG1sLkRJVl19XSkKCQkJCQkJfX0sCgkJCQkJXX0sCgkJCQkJe3ZpZXc6IFtjaGF0LlBST0ZJTEUsIGh0bWwuVERdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LlBST0ZJTEVdLCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0sCgkJCQldfV19LAoJCQkJe3ZpZXc6IFtjaGF0LkRJU1BMQVksIGh0bWwuVFJdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LkRJU1BMQVldLCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0KCQkJXX0KCQldIH1dKTsgcmV0dXJuIGNhbi51aSA9IHVpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OTU9USU9OLCB7aGVscDogIuWKqOaAgeeJueaViCIsIF9pbml0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGh0bWwuT1JJRU5UQVRJT05DSEFOR0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBodG1sLk9SSUVOVEFUSU9OQ0hBTkdFKSB9KQoJCWNhbi5vbm1vdGlvbi5mbG9hdC5hdXRvKGNhbiwgdGFyZ2V0KQoJfSwKCWZsb2F0OiB7X2hhc2g6IHt9LAoJCWRlbDogZnVuY3Rpb24oY2FuLCBrZXkpIHsKCQkJa2V5ID09IGNoYXQuQ0FSVEUgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGNoYXQuQ0FSVEUpLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIHRhcmdldCkKCQkJfSkKCQkJdmFyIGxhc3QgPSB0aGlzLl9oYXNoW2tleV07IGlmICghbGFzdCkgeyByZXR1cm4gfQoJCQlsYXN0LmNsb3NlPyBsYXN0LmNsb3NlKCk6IGNhbi5wYWdlLlJlbW92ZShjYW4sIGxhc3QuX3RhcmdldCkKCQl9LAoJCWFkZDogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IHJldHVybiB0aGlzLmRlbChjYW4sIGtleSksIHRoaXMuX2hhc2hba2V5XSA9IHZhbHVlIH0sCgkJYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSkgeyB2YXIgdGhhdCA9IHRoaXMKCQkJdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMikKCQkJaWYgKGxpc3QubGVuZ3RoID09IDApIHsgbGlzdCA9IFtjaGF0LkNBUlRFLCBjaGF0LklOUFVUXSB9CgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge29ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyAKCQkJCWlmIChjYW4ucGFnZS50YWdpcyhodG1sLklNRywgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXksIGluZGV4KSB7IHRoYXQuZGVsKGNhbiwga2V5KSB9KQoJCQl9fSkKCQl9LAoJfSwKCXN0b3J5OiB7CgkJX2hhc2g6IHsKCQkJc3Bhcms6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgdGFyZ2V0KSB7CgkJCQltZXRhW21kYi5OQU1FXSA9PSBodG1sLklOTkVSPyBjYW4ub25tb3Rpb24uY29weShjYW4sIHRhcmdldCk6IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5TUEFOLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLm9ubW90aW9uLmNvcHkoY2FuLCBpdGVtKQoJCQkJfSkKCQkJfSwKCQl9LAoJCWF1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciB0aGF0ID0gdGhpczsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsICIuc3RvcnkiLCBmdW5jdGlvbihpdGVtKSB7IHZhciBtZXRhID0gaXRlbS5kYXRhc2V0CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIGNhbi5iYXNlLk9iaihtZXRhLnN0eWxlKSkKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKHRoYXQuX2hhc2hbbWV0YS50eXBlXSwgW2NhbiwgbWV0YSwgdGFyZ2V0XSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS04OCwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpLTMwKQoJCQl9KQoJCX0sCgl9LAoJY29weTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHRleHQsIGNiKSB7CgkJdGFyZ2V0LnRpdGxlID0gIueCueWHu+WkjeWItiIsIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCB0ZXh0fHx0YXJnZXQuaW5uZXJUZXh0KQoJCQljYW4ucmVxdWVzdChldmVudCwga2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCkKCQl9Cgl9LAoJbGluazogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHRleHQpIHsKCQlpZiAodGFyZ2V0LmlubmVyVGV4dCA9PSAiIikgeyB0YXJnZXQuaW5uZXJUZXh0ID0gdGFyZ2V0LmhyZWYgfQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3RhcmdldDogIl9ibGFuayJ9KQoJfSwKCgljbGVhcjogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsICIiKSwgdHJ1ZSB9LAoJY2FjaGU6IGZ1bmN0aW9uKGNhbiwgbmV4dCkgeyB2YXIgbGlzdCA9IGNhbi5iYXNlLk9iaihjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMiksIFtjYW4uX291dHB1dF0pCgkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uX2NhY2hlX2tleSAmJiBjYW4ucGFnZS5DYWNoZShpdGVtLl9jYWNoZV9rZXksIGl0ZW0sIGl0ZW0uc2Nyb2xsVG9wKzEpIH0pCgkJdmFyIGtleSA9IG5leHQoY2FuLl9jYWNoZV9kYXRhID0gY2FuLl9jYWNoZV9kYXRhfHx7fSk7IGlmICgha2V5KSB7IHJldHVybiB9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgcG9zID0gY2FuLnBhZ2UuQ2FjaGUoaXRlbS5fY2FjaGVfa2V5ID0ga2V5LCBpdGVtKQoJCQlpZiAocG9zKSB7IGl0ZW0uc2Nyb2xsVG8gJiYgaXRlbS5zY3JvbGxUbygwLCBwb3MtMSk7IHJldHVybiBpdGVtIH0KCQl9KS5sZW5ndGggPiAwCgl9LAoJZGVsYXk6IGZ1bmN0aW9uKGNhbiwgY2IsIGludGVydmFsKSB7IGNhbi5jb3JlLlRpbWVyKGludGVydmFsfHwxMDAsIGNiKSB9LAoJZm9jdXM6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGlmICghdGFyZ2V0KSB7IHJldHVybiB9CgkJdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlICYmIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAtMSksIHRhcmdldC5mb2N1cygpCgl9LAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGlucHV0LCBhcmdzKSB7IHZhciBfYXJncyA9IGFyZ3MKCQlyZXR1cm4gY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgaW5wdXQsIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnNlYXJjaChjYW4ucmVxdWVzdChldmVudCwge2FyZ3M6IFttZGIuVFlQRSwgY2hhdC5GSUVMRF0uY29uY2F0KF9hcmdzfHxbXSwgYXJnc3x8W10pfSksIFtbIkhlYWRlciIsIGNoYXQuT05BQ1RJT04sIHdlYi5TSEFSRV1dKQoJCX0pCgl9LAoKCWhpZGRlbjogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHNob3cpIHsKCQljYW4ucGFnZS5zdHlsZURpc3BsYXkoY2FuLCB0YXJnZXR8fGNhbi5fdGFyZ2V0LCBzaG93PyAiIjogaHRtbC5OT05FKQoJCXJldHVybiBzaG93Cgl9LAoJdG9nZ2xlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgc2hvdywgaGlkZSkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJaWYgKHNob3cgPT09IHRydWUpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQsIHRydWUpIH0KCQlpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQsIGZhbHNlKSB9CgkJdmFyIHN0YXR1cyA9IHRhcmdldC5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORQoJCWlmICghKHN0YXR1cz8gY2FuLmJhc2UuaXNGdW5jKHNob3cpICYmIHNob3coKTogY2FuLmJhc2UuaXNGdW5jKGhpZGUpICYmIGhpZGUoKSkpIHsKCQkJY2FuLnBhZ2Uuc3R5bGVEaXNwbGF5KGNhbiwgdGFyZ2V0LCBzdGF0dXM/ICIiOiBodG1sLk5PTkUpCgkJfQoJCXJldHVybiBzdGF0dXMKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBuYW1lLCB3aGljaCkgewoJCXZhciBvbGQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIG5hbWUsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpKSB7IHJldHVybiBpbmRleCB9CgkJfSlbMF0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIG5hbWUsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCwgaXRlbSA9PSB3aGljaCB8fCB3aGljaCA9PSBpbmRleCkKCQl9KQoJCXJldHVybiBvbGQKCX0sCgltb2RpZnk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjYiwgaXRlbSkgeyB2YXIgYmFjayA9IHRhcmdldC5pbm5lckhUTUwsIHRleHQgPSB0YXJnZXQuaW5uZXJUZXh0CgkJaWYgKGJhY2subGVuZ3RoID4gMTIwIHx8IGJhY2suaW5kZXhPZihpY2UuTkwpID4gLTEpIHsKCQkJcmV0dXJuIGNhbi5vbm1vdGlvbi5tb2RpZnlzKGNhbiwgdGFyZ2V0LCBjYikKCQl9CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLklOUFVULCB2YWx1ZTogdGFyZ2V0LmlubmVyVGV4dCwgc3R5bGU6IHsKCQkJd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aCA+IDQwMD8gNDAwOiB0YXJnZXQub2Zmc2V0V2lkdGgtMjAsCgkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSBsYW5nLkVOVEVSOiB0YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnZhbHVlCgkJCQkJZXZlbnQudGFyZ2V0LnZhbHVlID09IGJhY2sgfHwgY2IoZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSwgYmFjaykKCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLkVTQ0FQRTogdGFyZ2V0LmlubmVySFRNTCA9IGJhY2s7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJfQoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgaXRlbSAmJiBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0LCBjYikKCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5jbGljaygpIH0pCgkJfX1dKQoJfSwKCW1vZGlmeXM6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjYiwgaXRlbSkgeyB2YXIgYmFjayA9IHRhcmdldC5pbm5lckhUTUwKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIHZhbHVlOiB0YXJnZXQuaW5uZXJUZXh0LCBzdHlsZTogewoJCQl3aWR0aDogdGFyZ2V0Lm9mZnNldFdpZHRoID4gNDAwPyA0MDA6IHRhcmdldC5vZmZzZXRXaWR0aC0yMCwgaGVpZ2h0OiB0YXJnZXQub2Zmc2V0SGVpZ2h0IDwgNjA/IDYwOiB0YXJnZXQub2Zmc2V0SGVpZ2h0LTIwLAoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjoKCQkJCQlpZiAoZXZlbnQuY3RybEtleSkgeyB0YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnZhbHVlCgkJCQkJCWV2ZW50LnRhcmdldC52YWx1ZSA9PSBiYWNrIHx8IGNiKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIGJhY2spCgkJCQkJfQoJCQkJCWJyZWFrCgkJCQljYXNlIGxhbmcuRVNDQVBFOiB0YXJnZXQuaW5uZXJIVE1MID0gYmFjazsgYnJlYWsKCQkJCWRlZmF1bHQ6IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKQoJCQl9CgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQlpdGVtICYmIGNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQpCgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQuY2xpY2soKSB9KQoJCX19XSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lLCB0YXJnZXQpIHsKCQljYW4ucmVxdWlyZShbImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaHRtbDJjYW52YXNAMS4wLjAtcmMuNS9kaXN0L2h0bWwyY2FudmFzLm1pbi5qcyJdLCBmdW5jdGlvbigpIHsKCQkJaHRtbDJjYW52YXModGFyZ2V0fHxjYW4uX3RhcmdldCkudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7IHZhciB1cmwgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKQoJCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3QoY2FuLCB7Y29udGVudDoge2ltZzogdXJsLCBzdHlsZTogeyJtYXgtaGVpZ2h0IjogMjQwLCBkaXNwbGF5OiBodG1sLkJMT0NLfX0sIGR1cmF0aW9uOiAtMSwKCQkJCQlhY3Rpb246IHNoeSh7fSwgW2NsaS5DTE9TRSwgImRvd25sb2FkIl0sIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IG5hbWV9XSwgZnVuY3Rpb24obGlzdCkgeyB0b2FzdC5jbG9zZSgpCgkJCQkJCQljYW4ucGFnZS5DcmVhdGUoY2FuLCBodG1sLkEsIHtocmVmOiB1cmwsIGRvd25sb2FkOiBsaXN0WzBdKyIucG5nIn0pLmNsaWNrKCkKCQkJCQkJfSkKCQkJCQl9KSwKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCgoJaGlkZTogZnVuY3Rpb24oY2FuLCB0aW1lLCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQl0aW1lID0gY2FuLmJhc2UuaXNPYmplY3QodGltZSk/IHRpbWU6IHt2YWx1ZTogMTAsIGxlbmd0aDogdGltZXx8MjB9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgMSkKCQljYW4uY29yZS5UaW1lcih0aW1lLCBmdW5jdGlvbihldmVudCwgdmFsdWUsIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk9QQUNJVFksIDEtKGluZGV4KzEpL3RpbWUubGVuZ3RoKQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCksIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkRJU1BMQVksIGh0bWwuTk9ORSkgfSkKCX0sCglzaG93OiBmdW5jdGlvbihjYW4sIHRpbWUsIGNiLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCXRpbWUgPSBjYW4uYmFzZS5pc09iamVjdCh0aW1lKT8gdGltZToge2ludGVydmFsOiAxMCwgbGVuZ3RoOiB0aW1lfHwzMH0KCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAwLCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spCgkJY2FuLmNvcmUuVGltZXIodGltZSwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAoaW5kZXgrMSkvdGltZS5sZW5ndGgpCgkJfSwgY2IpCgl9LAoJbW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGxheW91dCwgY2IpIHsgdmFyIGJlZ2luOyBsYXlvdXQgPSBsYXlvdXR8fHt9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGxheW91dCksIHRhcmdldC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWxheW91dC5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0LCBsYXlvdXQud2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGgKCQkJbGF5b3V0LmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCwgbGF5b3V0LnRvcCA9IHRhcmdldC5vZmZzZXRUb3AKCQkJYmVnaW4gPSBjYW4uYmFzZS5Db3B5KHt4OiBldmVudC54LCB5OiBldmVudC55fSwgbGF5b3V0KQoJCX0sIHRhcmdldC5vbm1vdXNldXAgPSBmdW5jdGlvbihldmVudCkgeyBiZWdpbiA9IG51bGwgfQoKCQl0YXJnZXQub25tb3VzZW1vdmUgPSBmdW5jdGlvbihldmVudCkgeyBpZiAoIWJlZ2luIHx8ICFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgkJCWlmIChldmVudC5zaGlmdEtleSkgewoJCQkJbGF5b3V0LndpZHRoID0gbGF5b3V0LndpZHRoICsgZXZlbnQueCAtIGJlZ2luLnggCgkJCQlsYXlvdXQuaGVpZ2h0ID0gbGF5b3V0LmhlaWdodCArIGV2ZW50LnkgLSBiZWdpbi55CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5IRUlHSFQsIGxheW91dC5oZWlnaHQsIGh0bWwuV0lEVEgsIGxheW91dC53aWR0aCkKCQkJfSBlbHNlIHsKCQkJCWxheW91dC50b3AgPSBiZWdpbi50b3AgKyBldmVudC55IC0gYmVnaW4ueQoJCQkJbGF5b3V0LmxlZnQgPSBiZWdpbi5sZWZ0ICsgZXZlbnQueCAtIGJlZ2luLnggCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5MRUZULCBsYXlvdXQubGVmdCwgaHRtbC5UT1AsIGxheW91dC50b3ApCgkJCX0KCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldCwgbGF5b3V0KQoJCX0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldCwgbGF5b3V0KQoJfSwKCglzZWxlY3RGaWVsZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmICghZXZlbnQuY3RybEtleSB8fCBldmVudC5rZXkgPCAiMCIgfHwgZXZlbnQua2V5ID4gIjkiKSB7IHJldHVybiB9CgkJaWYgKGV2ZW50LmtleSA9PSAiMCIpIHsgcmV0dXJuIGNhbi5vbmltcG9ydC5fYmFjayhjYW4pIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7IGlmIChpbmRleCA9PSBldmVudC5rZXkpIHsKCQkJdmFyIGhlYWQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5USCwgZnVuY3Rpb24odGgsIG9yZGVyKSB7IHJldHVybiB0aC5pbm5lclRleHQgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgeyBjYW4uT3B0aW9uKGhlYWRbaW5kZXhdLCB0ZC5pbm5lclRleHQpIH0pCgkJCWNhbi5VcGRhdGUoZXZlbnQpCgkJfSB9KQoJfSwKCXNlbGVjdElucHV0VGFibGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGNiLCB0YXJnZXQpIHsKCQkvLyBpZiAodGFyZ2V0LnZhbHVlID09ICIiKSB7IHJldHVybiBjYigpIH0KCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGxhbmcuU0hJRlQ6CgkJCWNhc2UgbGFuZy5DT05UUk9MOgoJCQkJcmV0dXJuCgkJfQoKCQlpZiAoZXZlbnQuY3RybEtleSkgewoJCQlpZiAodGFyZ2V0Ll9pbmRleCA9PSB1bmRlZmluZWQpIHsKCQkJCXRhcmdldC5faW5kZXggPSAtMSwgdGFyZ2V0Ll92YWx1ZSA9IHRhcmdldC52YWx1ZQoJCQl9CgkJCWZ1bmN0aW9uIHNlbGVjdChvcmRlcikgeyBpZiAob3JkZXIgPT0gLTEpIHsgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0Ll92YWx1ZSB9CgkJCQl2YXIgaW5kZXggPSAwOyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCBodG1sLkhJRERFTikpIHsgcmV0dXJuIH0KCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgdHIsIGh0bWwuU0VMRUNUKTsgaWYgKG9yZGVyICE9IGluZGV4KyspIHsgcmV0dXJuIHRyIH0KCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdHIsIGh0bWwuU0VMRUNUKSwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgewoJCQkJCQlpbmRleCA9PSAwICYmICh0YXJnZXQudmFsdWUgPSB0ZC5pbm5lclRleHQpCgkJCQkJfSk7IHJldHVybiB0cgoJCQkJfSkubGVuZ3RoCgkJCX0KCQkJdmFyIHRvdGFsID0gc2VsZWN0KHRhcmdldC5faW5kZXgpOyBzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSAibiI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKHRhcmdldC5faW5kZXgrMikgJSAodG90YWwrMSkgLSAxKTsgYnJlYWsKCQkJCWNhc2UgInAiOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4K3RvdGFsKzEpICUgKHRvdGFsKzEpIC0gMSk7IGJyZWFrCgkJCQlkZWZhdWx0OiByZXR1cm4KCQkJfQoJCQlyZXR1cm4gY2FuLlN0YXR1cyhtZGIuSU5ERVgsIHRhcmdldC5faW5kZXgpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQl9CgoJCXRhcmdldC5faW5kZXggPSAtMSwgdGFyZ2V0Ll92YWx1ZSA9IHRhcmdldC52YWx1ZQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyLCBpbmRleCkgewoJCQl2YXIgaGFzID0gZmFsc2U7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgewoJCQkJaGFzID0gaGFzIHx8IHRkLmlubmVyVGV4dC5pbmRleE9mKHRhcmdldC52YWx1ZSk+LTEKCQkJfSksIGNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURERU4sICFoYXMpCgkJfSkKCgkJdmFyIHRvdGFsID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsIGh0bWwuSElEREVOKSkgeyByZXR1cm4gdHIgfQoJCX0pLmxlbmd0aDsgdG90YWwgPT0gMCAmJiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQljYW4uU3RhdHVzKGtpdC5EaWN0KG1kYi5UT1RBTCwgdG90YWwsIG1kYi5JTkRFWCwgdGFyZ2V0Ll9pbmRleCkpCgl9LAoJc2VsZWN0VGFibGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY2IpIHsgaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgkJZnVuY3Rpb24gc2VsZWN0KG9yZGVyKSB7IHZhciBpbmRleCA9IDAKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgaHRtbC5ISURERU4pKSB7IHJldHVybiB9CgkJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5TRUxFQ1QsIG9yZGVyID09IGluZGV4KyspKSB7IHJldHVybiB0ciB9CgkJCQlyZXR1cm4gY2FuLlN0YXR1cyhtZGIuSU5ERVgsIGluZGV4LTEpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRyKSwgdHIKCQkJfSkubGVuZ3RoCgkJfQoJCXZhciB0b3RhbCA9IHNlbGVjdCh0YXJnZXQuX2luZGV4KTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAibiI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKCh0YXJnZXQuX2luZGV4KSsxKSAlIHRvdGFsKTsgYnJlYWsKCQkJY2FzZSAicCI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKHRhcmdldC5faW5kZXgtMSkgPCAwPyB0b3RhbC0xOiAodGFyZ2V0Ll9pbmRleC0xKSk7IGJyZWFrCgkJCWRlZmF1bHQ6IHRhcmdldC5faW5kZXggPSAwOyByZXR1cm4KCQl9IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLCBfZm9jdXM6IFtdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQlpZiAod2luZG93LndlYnZpZXcpIHsKCQkJCWlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PSAiQSIpIHsgY2FuLnVzZXIub3BlbihldmVudC50YXJnZXQuaHJlZikgfQoJCQl9CgkJCWlmIChjYW4ucGFnZS50YWdpcyhbaHRtbC5TRUxFQ1QsIGh0bWwuSU5QVVQsIGh0bWwuVEVYVEFSRUFdLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGRvY3VtZW50LmJvZHksIGNhbi5wYWdlLktleXMoImZpZWxkc2V0LmlucHV0LmtleS5mbG9hdCIpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQl9KQoJCX0KCQljYW4ub25rZXltYXAuX2J1aWxkKGNhbiksIGRvY3VtZW50LmJvZHkub25rZXlkb3duID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJaWYgKGV2ZW50Lm1ldGFLZXkpIHsgaWYgKHdpbmRvdy53ZWJ2aWV3KSB7CgkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCWNhc2UgInEiOiB3aW5kb3cudGVybWluYXRlKCk7IGJyZWFrCgkJCQkJY2FzZSAidyI6IGNhbi51c2VyLmNsb3NlKCk7IGJyZWFrCgkJCQkJY2FzZSAiciI6IGNhbi51c2VyLnJlbG9hZCgpOyBicmVhawoJCQkJCWNhc2UgImYiOiBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KHt9LCB7dHlwZTogIioifSkpOyBicmVhawoJCQkJCWNhc2UgIlsiOiBoaXN0b3J5LmJhY2soKTsgYnJlYWsKCQkJCQljYXNlICJdIjogaGlzdG9yeS5mb3J3YXJkKCk7IGJyZWFrCgkJCQl9CgkJCX0gcmV0dXJuIH0KCgkJCWlmIChjYW4ucGFnZS50YWdpcyhbaHRtbC5TRUxFQ1QsIGh0bWwuSU5QVVQsIGh0bWwuVEVYVEFSRUFdLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgeyJtb2RlbCI6ICJub3JtYWwifSk7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTktFWURPV04sIG1zZyk7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQljYW4uX2tleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sIG1zZy5PcHRpb24oIm1vZGVsIiksIGNhbi5fa2V5bGlzdCwgY2FuLl9vdXRwdXQpCgkJfQoJfSwKCV9idWlsZDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLmNvcmUuSXRlbShjYW4ub25rZXltYXAuX21vZGUsIGZ1bmN0aW9uKGl0ZW0sIHZhbHVlKSB7IHZhciBlbmdpbmUgPSB7bGlzdDoge319CgkJCWNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgdmFyIG1hcCA9IGVuZ2luZQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspIHsKCQkJCQlpZiAoIW1hcC5saXN0W2tleVtpXV0pIHsgbWFwLmxpc3Rba2V5W2ldXSA9IHtsaXN0OiB7fX0gfQoJCQkJCW1hcCA9IG1hcC5saXN0W2tleVtpXV07IGlmIChpID09IGtleS5sZW5ndGgtMSkgeyBtYXAuY2IgPSBjYiB9CgkJCQl9CgkJCX0pLCBjYW4ub25rZXltYXAuX2VuZ2luZVtpdGVtXSA9IGVuZ2luZQoJCX0pCgl9LAoJX3BhcnNlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtb2RlLCBsaXN0LCB0YXJnZXQpIHsgbGlzdCA9IGxpc3R8fFtdCgkJaWYgKFsiQ29udHJvbCIsICJTaGlmdCJdLmluZGV4T2YoZXZlbnQua2V5KSA+IC0xKSB7IHJldHVybiBsaXN0IH0KCQlsaXN0LnB1c2goZXZlbnQua2V5KTsgZm9yICh2YXIgcHJlID0gMDsgcHJlIDwgbGlzdC5sZW5ndGg7IHByZSsrKSB7CgkJCWlmICgiMCIgPD0gbGlzdFtwcmVdICYmIGxpc3RbcHJlXSA8PSAiOSIpIHsgY29udGludWUgfSBicmVhawoJCX07IHZhciBjb3VudCA9IHBhcnNlSW50KGxpc3Quc2xpY2UoMCwgcHJlKS5qb2luKCIiKSl8fDEKCgkJdmFyIG1hcCA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXQoJCWZ1bmN0aW9uIHJlcGVhdChjYiwgY291bnQpIHsgbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7IGlmIChjYihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSkgeyBicmVhayB9IH0gfQoJCXZhciBjYiA9IG1hcCAmJiBtYXBbZXZlbnQua2V5XTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgZXZlbnQua2V5Lmxlbmd0aCA+IDEpIHsgcmVwZWF0KGNiLCBjb3VudCk7IHJldHVybiBsaXN0IH0KCQl2YXIgY2IgPSBtYXAgJiYgbWFwW2V2ZW50LmtleS50b0xvd2VyQ2FzZSgpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgZXZlbnQua2V5Lmxlbmd0aCA+IDEpIHsgcmVwZWF0KGNiLCBjb3VudCk7IHJldHVybiBsaXN0IH0KCgkJdmFyIG1hcCA9IGNhbi5vbmtleW1hcC5fZW5naW5lW21vZGVdOyBpZiAoIW1hcCkgeyByZXR1cm4gW10gfQoJCWZvciAodmFyIGkgPSBwcmU7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrICkgewoJCQl2YXIgbWFwID0gbWFwLmxpc3RbbGlzdFtpXV07IGlmICghbWFwKSB7IHJldHVybiBbXSB9CgkJCWlmIChpID09IGxpc3QubGVuZ3RoLTEgJiYgY2FuLmJhc2UuaXNGdW5jKG1hcC5jYikpIHsgcmVwZWF0KG1hcC5jYiwgY291bnQpOyByZXR1cm4gW10gfQoJCX0KCQlyZXR1cm4gbGlzdAoJfSwKCV9tb2RlOiB7CgkJaW5zZXJ0OiB7CgkJCWprOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LmJsdXIoKSwgY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQtMSwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQlFc2NhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuYmx1cigpIH0sCgkJCUVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIGhpcyA9IHRhcmdldC5faGlzdG9yeXx8W10KCQkJCWhpcy5wdXNoKHRhcmdldC52YWx1ZSksIHRhcmdldC5faGlzdG9yeSA9IGhpcywgdGFyZ2V0Ll9jdXJyZW50ID0gaGlzLmxlbmd0aAoJCQkJY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSAmJiBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpCgkJCX0sCgkJfSwKCQlpbnNlcnRfY3RybDogewoJCQlwOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCXZhciBoaXMgPSB0YXJnZXQuX2hpc3Rvcnl8fFtdLCBwb3MgPSB0YXJnZXQuX2N1cnJlbnR8fDAKCQkJCXBvcyA9IC0tcG9zICUgKGhpcy5sZW5ndGgrMSk7IGlmIChwb3MgPCAwKSB7IHBvcyA9IGhpcy5sZW5ndGggfQoJCQkJdGFyZ2V0Ll9jdXJyZW50ID0gcG9zLCB0YXJnZXQudmFsdWUgPSBoaXNbcG9zXXx8IiIKCQkJfSwKCQkJbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgaGlzID0gdGFyZ2V0Ll9oaXN0b3J5fHxbXSwgcG9zID0gdGFyZ2V0Ll9jdXJyZW50fHwwCgkJCQlwb3MgPSArK3BvcyAlIChoaXMubGVuZ3RoKzEpCgkJCQl0YXJnZXQuX2N1cnJlbnQgPSBwb3MsIHRhcmdldC52YWx1ZSA9IGhpc1twb3NdfHwiIgoJCQl9LAoKCQkJdTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgMCwgdGFyZ2V0LnNlbGVjdGlvbkVuZCkgfSwKCQkJazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQloOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQtMSwgMSkgfSwKCQkJZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgMCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQl3OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIHN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTIsIGVuZCA9IHRhcmdldC5zZWxlY3Rpb25FbmQtMQoJCQkJZm9yICh2YXIgaSA9IHN0YXJ0OyBpID49IDA7IGktLSkgewoJCQkJCWlmICh0YXJnZXQudmFsdWVbZW5kXSA9PSBpY2UuU1AgJiYgdGFyZ2V0LnZhbHVlW2ldICE9IGljZS5TUCkgeyBicmVhayB9CgkJCQkJaWYgKHRhcmdldC52YWx1ZVtlbmRdICE9IGljZS5TUCAmJiB0YXJnZXQudmFsdWVbaV0gPT0gaWNlLlNQKSB7IGJyZWFrIH0KCQkJCX0gY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCBpKzEsIGVuZC1pKQoJCQl9LAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKCglpbnB1dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQubWV0YWtleSkgeyByZXR1cm4gfSB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdGFyZ2V0Ll9rZXlzID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBldmVudC5jdHJsS2V5PyAiaW5zZXJ0X2N0cmwiOiBtZGIuSU5TRVJULCB0YXJnZXQuX2tleXMsIHRhcmdldCkKCX0sCglwcmV2ZW50OiBmdW5jdGlvbihldmVudCkgeyBldmVudC5zdG9wUHJvcGFnYXRpb24oKSwgZXZlbnQucHJldmVudERlZmF1bHQoKTsgcmV0dXJuIHRydWUgfSwKCWRlbGV0ZVRleHQ6IGZ1bmN0aW9uKHRhcmdldCwgc3RhcnQsIGNvdW50KSB7IHZhciBlbmQgPSBjb3VudD8gc3RhcnQrY291bnQ6IHRhcmdldC52YWx1ZS5sZW5ndGgKCQl2YXIgY3V0ID0gdGFyZ2V0LnZhbHVlLnNsaWNlKHN0YXJ0LCBlbmQpCgkJdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnN1YnN0cmluZygwLCBzdGFydCkrdGFyZ2V0LnZhbHVlLnN1YnN0cmluZyhlbmQsIHRhcmdldC52YWx1ZS5sZW5ndGgpCgkJcmV0dXJuIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCwgc3RhcnQpLCBjdXQKCX0sCglpbnNlcnRUZXh0OiBmdW5jdGlvbih0YXJnZXQsIHRleHQpIHsgdmFyIHN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0CgkJdmFyIGJlZm9yZSA9IHRhcmdldC52YWx1ZS5zbGljZSgwLCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIGFmdGVyID0gdGFyZ2V0LnZhbHVlLnNsaWNlKHRhcmdldC5zZWxlY3Rpb25FbmQpCgkJdGFyZ2V0LnZhbHVlID0gYmVmb3JlK3RleHQrYWZ0ZXIKCQlyZXR1cm4gdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0KzEsIHN0YXJ0KzEpCgl9LAoJY3Vyc29yTW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGNvdW50LCBiZWdpbikgeyBiZWdpbiAhPSB1bmRlZmluZWQgJiYgdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKGJlZ2luLCBiZWdpbikKCQl0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UodGFyZ2V0LnNlbGVjdGlvblN0YXJ0K2NvdW50LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQrY291bnQpCgl9LAp9KQo=",
        "usr/volcanos/lib/base.js": "Vm9sY2Fub3MoImJhc2UiLCB7aGVscDogIuaVsOaNruexu+WeiyIsIEludDogZnVuY3Rpb24odmFsLCBkZWYpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCl8fGRlZnx8MCB9LAoJTWluOiBmdW5jdGlvbih2YWwsIG1pbikgeyByZXR1cm4gdmFsID4gbWluPyB2YWw6IG1pbiB9LAoJTWF4OiBmdW5jdGlvbih2YWwsIG1heCkgeyByZXR1cm4gdmFsIDwgbWF4PyB2YWw6IG1heCB9LAoJT2JqOiBmdW5jdGlvbih2YWwsIGRlZikgewoJCXRyeSB7CgkJCWlmICh0eXBlb2YgdmFsID09IGxhbmcuU1RSSU5HKSB7IGlmICh2YWwgPT0gIiIpIHsgcmV0dXJuIGRlZiB9IHZhbCA9IEpTT04ucGFyc2UodmFsKSB9CgkJCWlmICh2YWwubGVuZ3RoID4gMCkgeyByZXR1cm4gdmFsIH0gZm9yICh2YXIgayBpbiB2YWwpIHsgcmV0dXJuIHZhbCB9IHJldHVybiBkZWYKCQl9IGNhdGNoIChlKSB7IHJldHVybiB2YWwgJiYgdmFsLnNwbGl0ICYmIHZhbC5zcGxpdChpY2UuRlMpIHx8IGRlZiB9Cgl9LAoJQ29weTogZnVuY3Rpb24odG8sIGZyb20sIHNraXApIHsgaWYgKCFmcm9tKSB7IHJldHVybiB0byB9CgkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMiB8fCB0eXBlb2Ygc2tpcCA9PSAiYm9vbGVhbiIpIHsKCQkJZm9yICh2YXIgayBpbiBmcm9tKSB7CgkJCQlpZiAoc2tpcCAmJiB0b1trXSAhPSB1bmRlZmluZWQpIHsgY29udGludWUgfQoJCQkJaWYgKGZyb21ba10gPT09ICIiKSB7IGRlbGV0ZSh0b1trXSk7IGNvbnRpbnVlIH0KCQkJCXRvW2tdID0gZnJvbVtrXQoJCQl9CgkJCXJldHVybiB0bwoJCX0KCQlmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQl2YXIgayA9IGFyZ3VtZW50c1tpXTsgdG9ba10gPSBmcm9tW2tdCgkJfQoJCXJldHVybiB0bwoJfSwKCUVxOiBmdW5jdGlvbih0bywgZnJvbSkgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQlpZiAodHlwZW9mIHRvICE9IHR5cGVvZiBmcm9tKSB7IHJldHVybiBmYWxzZSB9CgkJaWYgKHR5cGVvZiB0byA9PSBsYW5nLk9CSkVDVCkgewoJCQlpZiAodG8ubGVuZ3RoICE9IGZyb20ubGVuZ3RoKSB7IHJldHVybiBmYWxzZSB9CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgdG8ubGVuZ3RoOyBpKyspIHsKCQkJCWlmICghY2FsbCh0b1tpXSwgZnJvbVtpXSkpIHsgcmV0dXJuIGZhbHNlIH0KCQkJfQoJCQlmb3IgKHZhciBrIGluIHRvKSB7CgkJCQlpZiAoIWNhbGwodG9ba10sIGZyb21ba10pKSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJcmV0dXJuIHRydWUKCQl9CgkJcmV0dXJuIHRvID09PSBmcm9tCgl9LAoKCUV4dDogZnVuY3Rpb24ocGF0aCkgeyByZXR1cm4gKHBhdGguc3BsaXQoaWNlLlBTKS5wb3AoKS5zcGxpdChpY2UuUFQpLnBvcCgpKS50b0xvd2VyQ2FzZSgpIH0sCglQYXRoOiBmdW5jdGlvbihwYXRoKSB7IHZhciByZXMgPSAiIgoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IGlmICghYXJndW1lbnRzW2ldKSB7IGNvbnRpbnVlIH0KCQkJcmVzICs9IChhcmd1bWVudHNbaV1bMF09PWljZS5QUyB8fCByZXM9PSIiIHx8IHJlc1tyZXMubGVuZ3RoLTFdPT1pY2UuUFM/ICIiOiBpY2UuUFMpICsgYXJndW1lbnRzW2ldLnRyaW0oKQoJCX0KCQlyZXR1cm4gcmVzCgl9LAoJQXJnczogZnVuY3Rpb24oKSB7IHZhciByZXMgPSBbXQoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCWlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuT0JKRUNUKSB7CgkJCQlmb3IgKHZhciBrIGluIGFyZ3VtZW50c1tpXSkgeyByZXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaV1ba10pKSB9CgkJCQlpLS07IGNvbnRpbnVlCgkJCX0gZWxzZSBpZiAoYXJndW1lbnRzW2ldKSB7IAoJCQkJcmVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tpXSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaSsxXSkpCgkJCX0KCQl9CgkJcmV0dXJuIHJlcy5qb2luKCImIikKCX0sCglNZXJnZVVSTDogZnVuY3Rpb24odXJsKSB7CgkJdmFyIGFyZ3MgPSB7fTsgKHVybC5zcGxpdCgiPyIpWzFdfHwiIikuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKCFpdGVtKSB7IHJldHVybiB9CgkJCXZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgYXJnc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQl9KQoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCXN3aXRjaCAodHlwZW9mIGFyZ3VtZW50c1tpXSkgewoJCQkJY2FzZSBsYW5nLlNUUklORzogYXJnc1thcmd1bWVudHNbaV1dID0gYXJndW1lbnRzW2krMV0sIGkrKzsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGFyZ3VtZW50c1tpXS5sZW5ndGggPiAwKSB7CgkJCQkJCWZvciAodmFyIGogPSAwOyBqIDwgYXJndW1lbnRzW2ldLmxlbmd0aDsgaiArPSAyKSB7IGFyZ3NbYXJndW1lbnRzW2ldW2pdXSA9IGFyZ3VtZW50c1tpXVtqXSB9CgkJCQkJfSBlbHNlIHsKCQkJCQkJZm9yICh2YXIgayBpbiBhcmd1bWVudHNbaV0pIHsgYXJnc1trXSA9IGFyZ3VtZW50c1tpXVtrXSB9CgkJCQkJfQoJCQkJCWJyZWFrCgkJCX0KCQl9CgkJdmFyIGxpc3QgPSBbXTsgZm9yICh2YXIgayBpbiBhcmdzKSB7IGsgJiZhcmdzW2tdICYmIGxpc3QucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmdzW2tdKSkgfQoJCXJldHVybiB1cmwuc3BsaXQoIj8iKVswXSsobGlzdC5sZW5ndGg+MD8gIj8iK2xpc3Quam9pbigiJiIpOiAiIikKCX0sCglQYXJzZVVSTDogZnVuY3Rpb24odXJsKSB7IHZhciByZXMgPSB7bGluazogdXJsfQoJCXZhciBsaXN0ID0gdXJsLnNwbGl0KCI/Iik7IHJlc1sib3JpZ2luIl0gPSBsaXN0WzBdCgkJbGlzdFsxXSAmJiBsaXN0WzFdLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCXZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgcmVzW2RlY29kZVVSSUNvbXBvbmVudChsc1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KGxzWzFdKQoJCX0pCgkJcmV0dXJuIHJlcwoJfSwKCVBhcnNlSlNPTjogZnVuY3Rpb24oc3RyKSB7IHZhciByZXMKCQlpZiAodHlwZW9mIHN0ciA9PSBsYW5nLk9CSkVDVCkgeyByZXR1cm4gc3RyIH0KCQlpZiAoc3RyLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IHZhciBscyA9IHN0ci5zcGxpdCgiPyIpCgkJCXJlcyA9IHt0eXBlOiBtZGIuTElOSywgbmFtZTogIiIsIHRleHQ6IHN0cn0KCQkJcmVzLm5hbWUgPSBsc1swXS5zcGxpdCgiOi8vIikucG9wKCkuc3BsaXQoaWNlLlBTKVswXQoJCQlsc1sxXSAmJiBsc1sxXS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyB2YXIgbHMgPSBpdGVtLnNwbGl0KCI9IikKCQkJCXJlc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQkJfSkKCQkJcmV0dXJuIHJlcwoJCX0KCQl0cnkgeyByZXMgPSBKU09OLnBhcnNlKHN0ciksIHJlcy50ZXh0ID0gcmVzLnRleHR8fHN0ciwgcmVzLnR5cGUgPSByZXMudHlwZXx8bmZzLkpTT04KCQl9IGNhdGNoIChlKSB7IHJlcyA9IHt0eXBlOiBtZGIuVEVYVCwgdGV4dDogc3RyfSB9CgkJcmV0dXJuIHJlcwoJfSwKCVBhcnNlU2l6ZTogZnVuY3Rpb24oc2l6ZSkgeyBzaXplID0gc2l6ZS50b0xvd2VyQ2FzZSgpCgkJaWYgKHNpemUuZW5kc1dpdGgoInRiIikgfHwgc2l6ZS5lbmRzV2l0aCgidCIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0ICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoImdiIikgfHwgc2l6ZS5lbmRzV2l0aCgiZyIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0ICogMTAyNAoJCX0KCQlpZiAoc2l6ZS5lbmRzV2l0aCgibWIiKSB8fCBzaXplLmVuZHNXaXRoKCJtIikpIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUpICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoImtiIikgfHwgc2l6ZS5lbmRzV2l0aCgiayIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQKCQl9CgkJcmV0dXJuIHBhcnNlSW50KHNpemUpCgl9LAoKCVNpemU6IGZ1bmN0aW9uKHNpemUpIHsgc2l6ZSA9IHBhcnNlSW50KHNpemUpCgkJaWYgKHNpemUgPiAxMDAwMDAwMDAwKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplLzEwMDAwMDAwMDApICsgaWNlLlBUICsgcGFyc2VJbnQoc2l6ZS8xMDAwMDAwMCUxMDApICsgIkciCgkJfQoJCWlmIChzaXplID4gMTAwMDAwMCkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZS8xMDAwMDAwKSArIGljZS5QVCArIHBhcnNlSW50KHNpemUvMTAwMDAlMTAwKSArICJNIgoJCX0KCQlpZiAoc2l6ZSA+IDEwMDApIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUvMTAwMCkgKyBpY2UuUFQgKyBwYXJzZUludChzaXplLzEwJTEwMCkgKyAiSyIKCQl9CgkJcmV0dXJuIHNpemUgKyAiQiIKCX0sCglOdW1iZXI6IGZ1bmN0aW9uKGQsIG4pIHsgdmFyIHJlc3VsdCA9IFtdCgkJd2hpbGUgKGQgPiAwKSB7IHJlc3VsdC5wdXNoKGQlMTApOyBkID0gcGFyc2VJbnQoZC8xMCk7IG4tLSB9CgkJd2hpbGUgKG4gPiAwKSB7IHJlc3VsdC5wdXNoKCIwIik7IG4tLSB9CgkJcmV0dXJuIHJlc3VsdC5yZXZlcnNlKCksIHJlc3VsdC5qb2luKCIiKQoJfSwKCUZvcm1hdDogZnVuY3Rpb24ob2JqKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopIH0sCglTaW1wbGU6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0gW10KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQl2YXIgYXJnID0gYXJndW1lbnRzW2ldOyBzd2l0Y2ggKHR5cGVvZiBhcmd1bWVudHNbaV0pIHsKCQkJCWNhc2UgbGFuZy5OVU1CRVI6IHJlcy5wdXNoKGFyZyk7IGJyZWFrCgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXMucHVzaChhcmcpOyBicmVhawoJCQkJY2FzZSBsYW5nLk9CSkVDVDoKCQkJCQlpZiAoYXJnLmxlbmd0aCA+IDApIHsgcmVzID0gcmVzLmNvbmNhdChhcmcpOyBicmVhayB9CgkJCQkJZm9yICh2YXIgayBpbiBhcmcpIHsgayAmJiBhcmdba10gJiYgcmVzLnB1c2goaywgYXJnW2tdKSB9CgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6IHJlcy5wdXNoKGFyZyk7IAoJCQl9CgkJfQoJCXJldHVybiByZXMKCX0sCglBZGRVbmlxOiBmdW5jdGlvbihsaXN0LCB2YWx1ZSkgeyBsaXN0ID0gbGlzdHx8W107IHJldHVybiBsaXN0LmluZGV4T2YodmFsdWUpID09IC0xICYmIGxpc3QucHVzaCh2YWx1ZSksIGxpc3QgfSwKCglEYXRlOiBmdW5jdGlvbih0aW1lKSB7IHZhciBub3cgPSBuZXcgRGF0ZSgpCgkJaWYgKHR5cGVvZiB0aW1lID09IGxhbmcuU1RSSU5HICYmIHRpbWUgIT0gIiIpIHsgdmFyIGxzID0gdGltZS5zcGxpdChpY2UuU1ApCgkJCXZhciB2cyA9IGxzWzBdLnNwbGl0KCItIikKCQkJbm93LnNldEZ1bGxZZWFyKHBhcnNlSW50KHZzWzBdKSkKCQkJbm93LnNldE1vbnRoKHBhcnNlSW50KHZzWzFdKS0xKQoJCQlub3cuc2V0RGF0ZShwYXJzZUludCh2c1syXSkpCgoJCQl2YXIgdnMgPSBsc1sxXS5zcGxpdCgiOiIpCgkJCW5vdy5zZXRIb3VycyhwYXJzZUludCh2c1swXSkpCgkJCW5vdy5zZXRNaW51dGVzKHBhcnNlSW50KHZzWzFdKSkKCQkJbm93LnNldFNlY29uZHMocGFyc2VJbnQodnNbMl0pKQoJCX0gZWxzZSBpZiAodGltZSkgewoJCQlub3cgPSB0aW1lCgkJfQoJCXJldHVybiBub3cKCX0sCglUaW1lOiBmdW5jdGlvbih0aW1lLCBmbXQpIHsgdmFyIG5vdyA9IHRoaXMuRGF0ZSh0aW1lKQoJCXZhciBsaXN0ID0gWyJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiXQoJCWZtdCA9IGZtdHx8IiVIOiVNOiVTIgoJCWZtdCA9IGZtdC5yZXBsYWNlKCIleSIsIG5vdy5nZXRGdWxsWWVhcigpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlbSIsIHRoaXMuTnVtYmVyKG5vdy5nZXRNb250aCgpKzEsIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlZCIsIHRoaXMuTnVtYmVyKG5vdy5nZXREYXRlKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIldyIsIGxpc3Rbbm93LmdldERheSgpXSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJUgiLCB0aGlzLk51bWJlcihub3cuZ2V0SG91cnMoKSwgMikpCgkJZm10ID0gZm10LnJlcGxhY2UoIiVNIiwgdGhpcy5OdW1iZXIobm93LmdldE1pbnV0ZXMoKSwgMikpCgkJZm10ID0gZm10LnJlcGxhY2UoIiVTIiwgdGhpcy5OdW1iZXIobm93LmdldFNlY29uZHMoKSwgMikpCgkJcmV0dXJuIGZtdAoJfSwKCVRpbWVBZGQ6IGZ1bmN0aW9uKHQsIGQpIHsgcmV0dXJuIG5ldyBEYXRlKHQgLSB0JSgyNCozNjAwKjEwMDApIC0gOCozNjAwKjEwMDAgKyBkKjI0KjM2MDAqMTAwMCkgfSwKCUR1cmF0aW9uOiBmdW5jdGlvbihuKSB7IHZhciByZXMgPSAiIiwgaCA9IDAKCQloID0gcGFyc2VJbnQobi8zNjAwMDAwLzI0KSwgaCA+IDAgJiYgKHJlcyArPSBoKyJkIiksIG4gPSBuICUgKDM2MDAwMDAqMjQpCgkJaCA9IHBhcnNlSW50KG4vMzYwMDAwMCksIGggPiAwICYmIChyZXMgKz0gaCsiaCIpLCBuID0gbiAlIDM2MDAwMDAKCQloID0gcGFyc2VJbnQobi82MDAwMCksIGggPiAwICYmIChyZXMgKz0gaCsibSIpLCBuID0gbiAlIDYwMDAwCgkJaCA9IHBhcnNlSW50KG4vMTAwMCksIGggPiAwICYmIChyZXMgKz0gaCksIG4gPSBuICUgMTAwMAoJCXJldHVybiByZXMgKyAobiA+IDA/IGljZS5QVCtwYXJzZUludChuLzEwKTogIiIpICsgInMiCgl9LAoKCW1vZDogZnVuY3Rpb24oaW5kZXgsIHRvdGFsKSB7CgkJcmV0dXJuIChpbmRleCt0b3RhbCkgJSB0b3RhbAoJfSwKCWdldFZhbGlkOiBmdW5jdGlvbigpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgdiA9IGFyZ3VtZW50c1tpXQoJCQlpZiAodHlwZW9mIHYgPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCWlmICh2ID09IG51bGwpIHsgY29udGludWUgfQoJCQkJZm9yICh2YXIgayBpbiB2KSB7IHJldHVybiB2IH0KCQkJCWlmICh2Lmxlbmd0aCA+IDApIHsgcmV0dXJuIHYgfQoJCQl9IGVsc2UgaWYgKHR5cGVvZiB2ID09IGxhbmcuU1RSSU5HICYmIHYpIHsKCQkJCXJldHVybiB2CgkJCX0gZWxzZSBpZiAodiA9PSB1bmRlZmluZWQpIHsKCQkJCWNvbnRpbnVlCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gdgoJCQl9CgkJfQoJfSwKCWlzTnVtYmVyOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5OVU1CRVIgfSwKCWlzU3RyaW5nOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5TVFJJTkcgfSwKCWlzT2JqZWN0OiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5PQkpFQ1QgfSwKCWlzQXJyYXk6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdHlwZW9mIHZhbCA9PSBsYW5nLk9CSkVDVCAmJiB2YWwubGVuZ3RoICE9IHVuZGVmaW5lZCB9LAoJaXNGdW5jOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5GVU5DVElPTiB9LAoJaXNGdW5jdGlvbjogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzQ2FsbGJhY2s6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGtleS5pbmRleE9mKCJvbiIpID09IDAgJiYgdHlwZW9mIHZhbHVlID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzVW5kZWZpbmVkOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbCA9PSB1bmRlZmluZWQgfSwKCWlzTnVsbDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB2YWwgPT0gbnVsbCB9LAoJcmVwbGFjZUFsbDogZnVuY3Rpb24oc3RyKSB7CgkJZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDIpIHsgaWYgKCFhcmd1bWVudHNbaV0pIHsgY29udGludWUgfQoJCQlpZiAoc3RyLnJlcGxhY2VBbGwpIHsgc3RyID0gc3RyLnJlcGxhY2VBbGwoYXJndW1lbnRzW2ldLCBhcmd1bWVudHNbaSsxXSk7IGNvbnRpbnVlIH0KCQkJaWYgKHN0ci5yZXBsYWNlKSB7IHN0ciA9IHN0ci5yZXBsYWNlKGFyZ3VtZW50c1tpXSwgYXJndW1lbnRzW2krMV0pOyBjb250aW51ZSB9CgkJfQoJCXJldHVybiBzdHIKCX0sCgoJY291bnQ6IGZ1bmN0aW9uKHN0ciwgcykgeyB2YXIgbiA9IDAKCQlmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewoJCQlpZiAoc3RyW2ldID09IHMpIHsgbisrIH0KCQl9CgkJcmV0dXJuIG4KCX0sCglyYW5kb206IGZ1bmN0aW9uKG1heCwgbWluKSB7IHJldHVybiBtaW4gPSBtaW58fDAsIHBhcnNlSW50KE1hdGgucmFuZG9tKCkqKG1heC1taW4pKSttaW4gfSwKCWlzTmlnaHQ6IGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKTsgcmV0dXJuIG5vdy5nZXRIb3VycygpIDwgNyB8fCBub3cuZ2V0SG91cnMoKSA+IDE3IH0sCgliZWdpbldpdGg6IGZ1bmN0aW9uKHN0ciwgYmVnaW4pIHsgcmV0dXJuIHN0ci50cmltKCkuaW5kZXhPZihiZWdpbikgPT0gMCB9LAoJZW5kV2l0aDogZnVuY3Rpb24oc3RyLCBlbmQpIHsgcmV0dXJuIHN0ci5sYXN0SW5kZXhPZihlbmQpICsgZW5kLmxlbmd0aCA9PSBzdHIubGVuZ3RoIH0sCgl0cmltOiBmdW5jdGlvbihhcmdzKSB7IGlmICh0aGlzLmlzU3RyaW5nKGFyZ3MpKSB7IHJldHVybiBhcmdzLnRyaW0oKSB9CgkJaWYgKHRoaXMuaXNBcnJheShhcmdzKSkgeyBmb3IgKHZhciBpID0gYXJncy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHsgaWYgKCFhcmdzW2ldKSB7IGFyZ3MucG9wKCkgfSBlbHNlIHsgYnJlYWsgfSB9IH0KCQlyZXR1cm4gYXJncwoJfSwKCXRyaW1QcmVmaXg6IGZ1bmN0aW9uKHN0ciwgcHJlKSB7IGlmIChzdHIuaW5kZXhPZihwcmUpID09IC0xKSB7IHJldHVybiBzdHIgfSByZXR1cm4gc3RyLnNsaWNlKHByZS5sZW5ndGgpIH0sCgl0cmltU3VmZml4OiBmdW5jdGlvbihzdHIsIGVuZCkgewoJCXZhciBpbmRleCA9IHN0ci5sYXN0SW5kZXhPZihlbmQpCgkJaWYgKGluZGV4ID09IC0xIHx8IGluZGV4K2VuZC5sZW5ndGggIT0gc3RyLmxlbmd0aCkgeyByZXR1cm4gc3RyIH0gcmV0dXJuIHN0ci5zbGljZSgwLCBpbmRleCkKCX0sCglqb2luOiBmdW5jdGlvbihsaXN0LCBzcCkgeyByZXR1cm4gKGxpc3R8fFtdKS5qb2luKHNwfHxpY2UuU1ApIH0sCglqb2luczogZnVuY3Rpb24obGlzdCwgaW5uZXIsIG91dGVyKSB7IAoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQlsaXN0W2ldID0gdHlwZW9mIGxpc3RbaV0gPT0gbGFuZy5TVFJJTkc/IGxpc3RbaV06IGxpc3RbaV0uam9pbihpbm5lcnx8aWNlLkZTKQoJCX0KCQlyZXR1cm4gbGlzdC5qb2luKG91dGVyfHxpY2UuU1ApCgl9LAp9KQo=",
        "usr/volcanos/lib/core.js": "Vm9sY2Fub3MoImNvcmUiLCB7aGVscDogIuaVsOaNrue7k+aehCIsCglLZXlzOiBzaHkoIui/nuaOpeWZqCIsIGZ1bmN0aW9uKCkgeyB2YXIgbGlzdCA9IFtdCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJc3dpdGNoICh0eXBlb2YgdikgewoJCQkJY2FzZSBsYW5nLk9CSkVDVDogZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7IGxpc3QucHVzaCh2W2pdKSB9IGJyZWFrCgkJCQljYXNlIGxhbmcuTlVNQkVSOiBsaXN0LnB1c2godisiIik7IGJyZWFrCgkJCQljYXNlIGxhbmcuRlVOQ1RJT046IHYgPSB2KCkKCQkJCWRlZmF1bHQ6IHYgJiYgbGlzdC5wdXNoKHYrIiIpCgkJCX0KCQl9CgkJcmV0dXJuIGxpc3Quam9pbihpY2UuUFQpCgl9KSwKCVZhbHVlOiBzaHkoIuWtmOWCqOWZqCIsIGZ1bmN0aW9uKGRhdGEsIGtleSwgdmFsdWUpIHsKCQlpZiAoZGF0YSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0KCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gZGF0YSB9CgoJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUICYmIGtleS5sZW5ndGggPiAwKSB7IGtleSA9IGtleS5qb2luKGljZS5QVCkgfQoJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUKSB7IGZvciAodmFyIGsgaW4ga2V5KSB7IGFyZ3VtZW50cy5jYWxsZWUuY2FsbCh0aGlzLCBkYXRhLCBrLCBrZXlba10pIH0gcmV0dXJuIGRhdGEgfQoKCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CgkJCXZhciBfZGF0YSA9IGRhdGEKCgkJCXZhciBscyA9IGtleS5zcGxpdChpY2UuUFQpCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbHMubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBfc3ViID0gX2RhdGFbbHNbaV1dfHx7fQoJCQkJX2RhdGFbbHNbaV1dID0gX3N1YgoJCQkJaWYgKGkgPT0gbHMubGVuZ3RoIC0gMSkgewoJCQkJCV9kYXRhW2xzW2ldXSA9IHZhbHVlCgkJCQl9IGVsc2UgewoJCQkJCV9kYXRhID0gX3N1YgoJCQkJfQoJCQl9CgkJCS8vIGRhdGFba2V5XSA9IHZhbHVlCgkJfQoJCWlmIChkYXRhW2tleV0gIT0gdW5kZWZpbmVkKSB7IHJldHVybiBkYXRhW2tleV0gfQoKCQl2YXIgcCA9IGRhdGEsIGxzID0ga2V5LnNwbGl0KGljZS5QVCk7IHdoaWxlIChwICYmIGxzLmxlbmd0aCA+IDApIHsKCQkJaWYgKGxzWzBdID09ICItMSIpIHsgbHNbMF0gPSBwLmxlbmd0aC0xIH0KCQkJcCA9IHBbbHNbMF1dLCBscyA9IGxzLnNsaWNlKDEpCgkJfSByZXR1cm4gcAoJfSksCglTcGxpdDogc2h5KCLliIbor43lmagiLCBmdW5jdGlvbihzdHIpIHsgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHsgcmV0dXJuIFtdIH0KCQl2YXIgb3B0ID0ge2RldGFpbDogZmFsc2V9LCBhcmcgPSBbXTsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVD8gb3B0ID0gYXJndW1lbnRzW2ldOiBhcmcucHVzaChhcmd1bWVudHNbaV0pCgkJfQoKCQkvLyDlrZfnrKblrprkuYkKCQlmdW5jdGlvbiBfbGlzdChzdHIpIHsgdmFyIHJlcyA9IHt9OyBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgeyByZXNbc3RyW2ldXSA9IHRydWUgfTsgcmV0dXJuIHJlcyB9CgkJdmFyIHNwYWNlID0gX2xpc3QoYXJnWzBdfHwiXHQgLDtcbiIpICAvLyDnqbrnmb3nrKYKCQl2YXIgYmxvY2sgPSBfbGlzdChhcmdbMV18fCJ7WygpXX0iKSAgIC8vIOWIhumalOespgoJCXZhciBxdW90ZSA9IF9saXN0KGFyZ1syXXx8IidcImAiKSAgICAgLy8g5byV55So56ymCgkJdmFyIHRyYW5zID0gX2xpc3QoYXJnWzNdfHwiXFwiKSAgICAgICAvLyDovazkuYnnrKYKCgkJdmFyIHJlcyA9IFtdLCBiZWdpbiA9IDA7IGZ1bmN0aW9uIHB1c2gob2JqKSB7CgkJCW9iaiAmJiByZXMucHVzaCh0eXBlb2Ygb2JqID09IGxhbmcuU1RSSU5HIHx8IG9wdC5kZXRhaWw/IG9iajogb2JqLnRleHQpLCBiZWdpbiA9IC0xCgkJfQoKCQkvLyDlvIDlp4vliIbor40KCQlmb3IgKHZhciBzID0gIiIsIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChzcGFjZVtzdHJbaV1dKSB7IC8vIOepuueZveespgoJCQkJaWYgKHMpIHsgY29udGludWUgfQoJCQkJYmVnaW4gPiAtMSAmJiBwdXNoKHN0ci5zbGljZShiZWdpbiwgaSkpCgkJCQlvcHQuZGV0YWlsICYmIHB1c2goe3R5cGU6IGh0bWwuU1BBQ0UsIHRleHQ6IHN0ci5zbGljZShpLCBpKzEpfSkKCgkJCX0gZWxzZSBpZiAoYmxvY2tbc3RyW2ldXSkgeyAvLyDliIbpmpTnrKYKCQkJCWlmIChzKSB7IGNvbnRpbnVlIH0KCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJcHVzaChzdHIuc2xpY2UoaSwgaSsxKSkKCgkJCX0gZWxzZSBpZiAocXVvdGVbc3RyW2ldXSkgeyAvLyDlvJXnlKjnrKYKCQkJCWlmIChzID09ICIiKSB7CgkJCQkJYmVnaW4gPiAtMSAmJiBwdXNoKHN0ci5zbGljZShiZWdpbiwgaSkpCgkJCQkJcyA9IHN0cltpXSwgYmVnaW4gPSBpKzEKCQkJCX0gZWxzZSBpZiAocyA9PSBzdHJbaV0pIHsKCQkJCQlwdXNoKHt0eXBlOiBsYW5nLlNUUklORywgdGV4dDogc3RyLnNsaWNlKGJlZ2luLCBpKSwgbGVmdDogcywgcmlnaHQ6IHN0cltpXX0pCgkJCQkJcyA9ICIiLCBiZWdpbiA9IC0xCgkJCQl9CgoJCQl9IGVsc2UgaWYgKHRyYW5zW3N0cltpXV0pIHsgLy8g6L2s5LmJ56ymCgkJCQliZWdpbiA9PSAtMSAmJiAoYmVnaW4gPSBpKyspCgoJCQl9IGVsc2UgeyAvLyDmma7pgJrnrKYKCQkJCWJlZ2luID09IC0xICYmIChiZWdpbiA9IGkpCgkJCX0KCQl9CgoJCS8vIOWJqeS9meWtl+espgoJCWJlZ2luID49IDAgJiYgKHM/IHB1c2goe3R5cGU6IGxhbmcuU1RSSU5HLCB0ZXh0OiBzdHIuc2xpY2UoYmVnaW4pLCBsZWZ0OiBzLCByaWdodDogIiJ9KTogcHVzaChzdHIuc2xpY2UoYmVnaW4pKSkKCQlyZXR1cm4gcmVzCgl9KSwKCUNhbGxGdW5jOiBzaHkoIuiwg+eUqOWZqCIsIGZ1bmN0aW9uKGZ1bmMsIGFyZ3MsIG1vZCkgeyBhcmdzID0gYXJnc3x8e30KCQl2YXIgZXZlbnQgPSBhcmdzWyJldmVudCJdfHx7fSwgY2FuID0gYXJnc1siY2FuIl18fGFyZ3NbMF0sIG1zZyA9IGFyZ3NbIm1zZyJdfHxhcmdzWzFdLCBjbWRzID0gYXJnc1siY21kcyJdfHxbXQoJCWV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoKCQkvLyDmn6Xmib7osIPnlKgKCQlmdW5jID0gdHlwZW9mIGZ1bmMgPT0gbGFuZy5GVU5DVElPTj8gZnVuYzogdHlwZW9mIGZ1bmMgPT0gbGFuZy5TVFJJTkc/IHRoaXMuVmFsdWUobW9kfHxjYW4sIGZ1bmMpOgoJCQl0eXBlb2YgZnVuYyA9PSBsYW5nLk9CSkVDVCAmJiBmdW5jLmxlbmd0aCA+IDA/IHRoaXMuVmFsdWUoZnVuY1swXSwgdGhpcy5LZXlzKGZ1bmMuc2xpY2UoMSkpKTogbnVsbAoJCWlmICh0eXBlb2YgZnVuYyAhPSBsYW5nLkZVTkNUSU9OKSB7IHJldHVybiB9CgoJCS8vIOino+aekOWPguaVsAoJCXZhciBsaXN0ID0gW10sIGVjaG8gPSBmYWxzZSwgY2IgPSBhcmdzWyJjYiJdCgkJdGhpcy5MaXN0KGZ1bmMudG9TdHJpbmcoKS5zcGxpdCgiKSIpWzBdLnNwbGl0KCIoIilbMV0uc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaXRlbSA9IGl0ZW0udHJpbSgpOyBpZiAoaXRlbSA9PSAiIikgeyByZXR1cm4gfQoJCQl2YXIgYXJnID0gYXJnc1tpdGVtXSB8fCBtc2cmJm1zZy5PcHRpb24mJm1zZy5PcHRpb24oaXRlbSkgfHwgY2FuJiZjYW4uQ29uZiYmY2FuLkNvbmYoaXRlbSkgfHwKCQkJCWV2ZW50JiYhKGV2ZW50IGluc3RhbmNlb2YgRXZlbnQpJiZldmVudFtpdGVtXSB8fCBhcmdzW2luZGV4XSB8fCBjbWRzW2luZGV4XSB8fCBudWxsCgkJCWlmIChpdGVtID09ICJjYiIpIHsgZWNobyA9IHRydWUgfQoJCQlsaXN0LnB1c2goYXJnKQoJCX0pCgoJCS8vIOaJp+ihjOiwg+eUqAoJCXZhciByZXMgPSBmdW5jLmFwcGx5KG1vZHx8Y2FuLCBsaXN0KQoJCWlmICghZWNobyAmJiB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTikgeyByZXMgJiYgbXNnICYmIG1zZy5FY2hvKHJlcyksIGFyZ3VtZW50cy5jYWxsZWUuYXBwbHkodGhpcywgW2NiLCB7bXNnOiBtc2csIHJlczogcmVzfV0pIH0KCQlyZXR1cm4gcmVzCgl9KSwKCglMaXN0OiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKGxpc3QsIGNiLCBpbnRlcnZhbCwgY2JzKSB7CgkJaWYgKHR5cGVvZiBsaXN0ID09IGxhbmcuU1RSSU5HKSB7IC8vIOm7mOiupOW6j+WIlwoJCQlsaXN0ID0gW2xpc3RdCgkJfSBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PSBsYW5nLk5VTUJFUikgeyAvLyDnrYnlt67luo/liJcgW2VuZCBjYiBpbnRlcnZhbF18W2JlZ2luIGVuZCBpbnRlcnZhbF0KCQkJdmFyIGJlZ2luID0gMCwgZW5kID0gbGlzdCwgc3RlcCA9IHR5cGVvZiBpbnRlcnZhbCA9PSBsYW5nLk5VTUJFUj8gaW50ZXJ2YWw6IDEKCQkJaWYgKHR5cGVvZiBjYiA9PSBsYW5nLk5VTUJFUikgeyBiZWdpbiA9IGxpc3QsIGVuZCA9IGNiLCBjYiA9IG51bGwgfQoJCQlsaXN0ID0gW107IGZvciAodmFyIGkgPSBiZWdpbjsgaSA8IGVuZDsgaSArPSBzdGVwKSB7IGxpc3QucHVzaChpKSB9CgkJfQoKCQlsaXN0ID0gbGlzdHx8W10KCQlpZiAoaW50ZXJ2YWwgPiAwKSB7IC8vIOaXtumXtOW6j+WIlwoJCQlmdW5jdGlvbiBsb29wKGkpIHsgaWYgKGkgPj0gbGlzdC5sZW5ndGgpIHsgcmV0dXJuIHR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnMobGlzdCkgfQoJCQkJY2IobGlzdFtpXSwgaSwgbGlzdCksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoaSsxKSB9LCBpbnRlcnZhbCkKCQkJfQoJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBsaXN0Lmxlbmd0aCA+IDAgJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcCgwKSB9LCBpbnRlcnZhbC80KQoJCX0gZWxzZSB7IC8vIOmAieaLqeW6j+WIlwoJCQl2YXIgc2xpY2UgPSBbXSwgcmVzCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IChyZXMgPSBjYihsaXN0W2ldLCBpLCBsaXN0KSkgIT0gdW5kZWZpbmVkICYmIHNsaWNlLnB1c2gocmVzKTogc2xpY2UucHVzaChsaXN0W2ldKQoJCQl9OyBsaXN0ID0gc2xpY2UKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJTmV4dDogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihsaXN0LCBjYiwgY2JzKSB7CgkJc3dpdGNoICh0eXBlb2YgbGlzdCkgewoJCQljYXNlIGxhbmcuT0JKRUNUOiBpZiAobGlzdCA9PSBudWxsKSB7IGxpc3QgPSBbXTsgYnJlYWsgfQoJCQkJaWYgKGxpc3QubGVuZ3RoID09IHVuZGVmaW5lZCkgeyB2YXIgbHMgPSBbXTsgZm9yICh2YXIgayBpbiBsaXN0KSB7IGxzLnB1c2goaykgfSBsaXN0ID0gbHMgfSBicmVhawoJCQlkZWZhdWx0OiBpZiAobGlzdCA9PSB1bmRlZmluZWQpIHsgbGlzdCA9IFtdOyBicmVhayB9CgkJCQlsaXN0ID0gW2xpc3RdCgkJfQoKCQlmdW5jdGlvbiBuZXh0KGkpIHsgaSA8IGxpc3QubGVuZ3RoPyAgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IobGlzdFtpXSwgZnVuY3Rpb24oKSB7IG5leHQoaSsxKSB9LCBpLCBsaXN0KToKCQkJCXR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnMobGlzdCkgfQoJCXJldHVybiBuZXh0KDApLCBsaXN0Cgl9KSwKCUl0ZW1zOiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwgY2IpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGsgaW4gb2JqKSB7CgkJCWxpc3QgPSBsaXN0LmNvbmNhdCh0aGlzLkxpc3Qob2JqW2tdLCBmdW5jdGlvbih2LCBpKSB7CgkJCQlyZXR1cm4gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IodiwgaSwgaywgb2JqKQoJCQl9KSkKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJSXRlbVNvcnQ6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24ob2JqLCBrZXksIGNiKSB7IHZhciBsaXN0ID0gW10KCQl2YXIgb3JkZXIgPSBbXSwga2V5cyA9IHt9LCB2YWxzID0ge30sIGkgPSAwCgkJZm9yICh2YXIgayBpbiBvYmopIHsgbyA9IG9ialtrXVtrZXldfHxpKysKCQkJb3JkZXIucHVzaChvKSwga2V5c1tvXSA9IGssIHZhbHNbb10gPSBvYmpba10KCQl9OyBvcmRlci5zb3J0KCkKCgkJZm9yICh2YXIgaSBpbiBvcmRlcikgeyB2YXIgayA9IG9yZGVyW2ldCgkJCXZhciByZXMgPSB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTj8gY2Ioa2V5c1trXSwgdmFsc1trXSk6IGsKCQkJcmVzICE9IHVuZGVmaW5lZCAmJiBsaXN0LnB1c2gocmVzKQoJCX0KCQlyZXR1cm4gbGlzdAoJfSksCglJdGVtOiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwgY2IpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGsgaW4gb2JqKSB7CgkJCXZhciByZXMgPSB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTj8gY2Ioaywgb2JqW2tdKTogawoJCQlyZXMgIT0gdW5kZWZpbmVkICYmIGxpc3QucHVzaChyZXMpCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCUl0ZW1DQjogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihtZXRhLCBjYiwgY2FuLCBpdGVtKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG1ldGEpIHsgKGZ1bmN0aW9uKGspIHsKCQkJaWYgKGsuaW5kZXhPZigib24iKSA9PSAwICYmIHR5cGVvZiBtZXRhW2tdID09IGxhbmcuRlVOQ1RJT04pIHsKCQkJCWlmICh0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTikgewoJCQkJCWNiKGssIG1ldGFba10pCgkJCQl9IGVsc2UgewoJCQkJCWNiW2tdID0gZnVuY3Rpb24oZXZlbnQpIHsgbWV0YVtrXShldmVudCwgY2FuLCBpdGVtKSB9CgkJCQl9CgkJCQlsaXN0LnB1c2goaykKCQkJfQoJCX0pKGspIH0KCQlyZXR1cm4gbGlzdAoJfSksCgoJU3BsaXRJbnB1dDogZnVuY3Rpb24oaXRlbSwgdHlwZSkgeyBpZiAodHlwZW9mIGl0ZW0gPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIGl0ZW0gfQoJCXR5cGUgPSB0eXBlfHxodG1sLlRFWFQ7IHN3aXRjaCAoaXRlbSkgewoJCQljYXNlIG1kYi5MSVNUOiByZXR1cm4ge3R5cGU6IHR5cGUgPSBodG1sLkJVVFRPTiwgbmFtZTogaXRlbSwgYWN0aW9uOiBpY2UuQVVUT30KCQkJY2FzZSBjbGkuQkFDSzogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5CVVRUT04sIG5hbWU6IGl0ZW19CgkJCWNhc2UgbWRiLk5BTUU6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuVEVYVCwgbmFtZTogaXRlbX0KCQkJY2FzZSBtZGIuVEVYVDogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5URVhUQVJFQSwgbmFtZTogaXRlbX0KCQkJZGVmYXVsdDogdmFyIGxzID0gdGhpcy5TcGxpdChpdGVtLCAiICIsICI6PUAiKSwgcmVzID0ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfTsgZm9yICh2YXIgaSA9IDE7IGkgPCBscy5sZW5ndGg7IGkgKz0gMikgewoJCQkJCXN3aXRjaCAobHNbaV0pIHsKCQkJCQkJY2FzZSAiOiI6IHJlc1ttZGIuVFlQRV0gPSBsc1tpKzFdOyBicmVhawoJCQkJCQljYXNlICI9IjoKCQkJCQkJCWlmIChyZXNbbWRiLlRZUEVdID09IGh0bWwuU0VMRUNUKSB7CgkJCQkJCQkJcmVzLnZhbHVlcyA9IHRoaXMuU3BsaXQobHNbaSsxXSkKCQkJCQkJCQlmb3IgKHZhciBqID0gMTsgaiA8IHJlcy52YWx1ZXMubGVuZ3RoOyBqKyspIHsKCQkJCQkJCQkJaWYgKHJlcy52YWx1ZXNbMF0gPT0gIiIgfHwgcmVzLnZhbHVlc1swXSA9PSByZXMudmFsdWVzW2pdKSB7CgkJCQkJCQkJCQlyZXMudmFsdWUgPSByZXMudmFsdWVzWzBdLCByZXMudmFsdWVzID0gcmVzLnZhbHVlcy5zbGljZSgxKQoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmVzLnZhbHVlID0gbHNbaSsxXQoJCQkJCQkJfQoJCQkJCQkJYnJlYWsKCQkJCQkJY2FzZSAiQCI6IHJlc1tjdHguQUNUSU9OXSA9IGxzW2krMV07IGJyZWFrCgkJCQkJfQoJCQkJfSByZXR1cm4gcmVzCgkJfQoJfSwKCVRpbWVyMzAwbXM6IGZ1bmN0aW9uKGNiKSB7IHRoaXMuVGltZXIoMzAwLCBjYikgfSwKCVRpbWVyMzAwOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMCwgY2IpIH0sCglUaW1lcjNzOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMDAsIGNiKSB9LAoJVGltZXI6IHNoeSgi5a6a5pe25ZmoLCB2YWx1ZSwgWzEsMiwzLDRdLCB7aW50ZXJ2YWwsIGxlbmd0aH0iLCBmdW5jdGlvbihpbnRlcnZhbCwgY2IsIGNicykgewoJCXZhciB0aW1lciA9IHtzdG9wOiBmYWxzZX07IGZ1bmN0aW9uIGxvb3AoaSkgewoJCQl0aW1lci5zdG9wIHx8IGkgPj0gaW50ZXJ2YWwubGVuZ3RoICYmIGludGVydmFsLmxlbmd0aCA+PSAwIHx8IGNiKHRpbWVyLCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbaV0sIGksIGludGVydmFsKT8KCQkJCXR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnModGltZXIsIGludGVydmFsKTogc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcChpKzEpIH0sIGludGVydmFsLmludGVydmFsfHxpbnRlcnZhbFtpKzFdKQoJCX0KCgkJaW50ZXJ2YWwgPSB0eXBlb2YgaW50ZXJ2YWwgPT0gbGFuZy5PQkpFQ1Q/IGludGVydmFsOiBbaW50ZXJ2YWxdCgkJaWYgKGludGVydmFsLmludGVydmFsID09IDApIHsgY2IoKTsgcmV0dXJuIHRpbWVyIH0KCgkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcCgwKSB9LCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbMF0pCgkJcmV0dXJuIHRpbWVyCgl9KSwKfSkK",
        "usr/volcanos/lib/misc.js": "Vm9sY2Fub3MoIm1pc2MiLCB7aGVscDogIumAmuS/oeWNj+iuriIsIE1lc3NhZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1zZyA9IHt9IAoJCXZhciBwcm90byA9IHtfZXZlbnQ6IGV2ZW50LCBfY2FuOiBjYW4sCgkJCVJ1bkFjdGlvbjogZnVuY3Rpb24oZXZlbnQsIHN1YiwgY21kcywgbWV0YSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtZXRhID0gbWV0YSB8fCBzdWImJnN1Yi5vbmFjdGlvbiB8fCB7fQoJCQkJaWYgKG1zZy5PcHRpb24oaWNlLk1TR19IQU5ETEUpID09IGljZS5UUlVFKSB7IHJldHVybiB9CgkJCQlpZiAoY21kcyAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgY2FuLmJhc2UuaXNGdW5jKG1ldGFbY21kc1sxXV0pKSB7IGV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoJCQkJCXJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSksIGNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbY21kc1sxXV0sIHtldmVudDogZXZlbnQsIGNhbjogc3ViLCBtc2c6IG1zZywgYnV0dG9uOiBjbWRzWzFdLCBjbWQ6IGNtZHNbMV19KSwgdHJ1ZQoJCQkJfQoJCQkJcmV0dXJuIGZhbHNlCgkJCX0sCgkJCURpc3BsYXk6IGZ1bmN0aW9uKGZpbGUpIHsgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVksIGZpbGUpIH0sCgkJCURpc3BsYXlTdG9yeTogZnVuY3Rpb24oZmlsZSkgeyBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSwgIi9wbHVnaW4vc3RvcnkvIitmaWxlKSB9LAoJCQlPcHRpb25TdGF0dXM6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykgfSwKCQkJT3B0aW9uUHJvY2VzczogZnVuY3Rpb24oKSB7IHJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfUFJPQ0VTUykgfSwKCQkJT3B0aW9uT3JTZWFyY2g6IGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwga2V5KXx8bXNnLk9wdGlvbihrZXkpIH0sCgkJCU9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWwpIHsKCQkJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnLm9wdGlvbiB8fCBbXSB9CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBjYW4uY29yZS5JdGVtKGtleSwgbXNnLk9wdGlvbikgfQoJCQkJaWYgKHZhbCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2dba2V5XSAmJiBtc2dba2V5XVswXSB8fCAiIiB9CgkJCQlyZXR1cm4gbXNnLm9wdGlvbiA9IGNhbi5iYXNlLkFkZFVuaXEobXNnLm9wdGlvbiwga2V5KSwgbXNnW2tleV0gPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMSksIHZhbAoJCQl9LAoJCQlBcHBlbmQ6IGZ1bmN0aW9uKGtleSwgdmFsKSB7CgkJCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZy5hcHBlbmQgfHwgW10gfQoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgY2FuLmNvcmUuSXRlbShrZXksIG1zZy5BcHBlbmQpIH0KCQkJCWlmICh2YWwgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnW2tleV0gJiYgbXNnW2tleV1bMF0gfHwgIiIgfQoJCQkJcmV0dXJuIG1zZy5hcHBlbmQgPSBjYW4uYmFzZS5BZGRVbmlxKG1zZy5hcHBlbmQsIGtleSksIG1zZ1trZXldID0gY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDEpLCB2YWwKCQkJfSwKCQkJUmVzdWx0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1zZy5yZXN1bHQgJiYgbXNnLnJlc3VsdC5qb2luKCIiKSB8fCAiIiB9LAoKCQkJTGVuZ3RoOiBmdW5jdGlvbigpIHsKCQkJCXZhciBtYXggPSAiIiwgbGVuID0gMDsgY2FuLmNvcmUuTGlzdChtc2cuYXBwZW5kLCBmdW5jdGlvbihrZXksIGluZGV4KSB7CgkJCQkJaWYgKG1zZ1trZXldICYmIG1zZ1trZXldLmxlbmd0aCA+IGxlbikgeyBtYXggPSBrZXksIGxlbiA9IG1zZ1trZXldLmxlbmd0aCB9CgkJCQl9KQoJCQkJcmV0dXJuIGxlbgoJCQl9LAoJCQlUYWJsZTogZnVuY3Rpb24oY2IpIHsKCQkJCXJldHVybiBjYW4uY29yZS5MaXN0KG1zZy5MZW5ndGgoKSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBhcnJheSkgeyB2YXIgb25lID0ge30sIHJlcwoJCQkJCWNhbi5jb3JlLkxpc3QobXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5KSB7IG9uZVtrZXldID0gKG1zZ1trZXldJiZtc2dba2V5XVtpbmRleF18fCIiKSB9KQoJCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIChyZXMgPSBjYihvbmUsIGluZGV4LCBhcnJheSkpICYmIHJlcyAhPSB1bmRlZmluZWQgJiYgcmVzIHx8IG9uZQoJCQkJfSkKCQkJfSwKCQkJQ2xlYXI6IGZ1bmN0aW9uKGtleSkgeyBzd2l0Y2ggKGtleXx8aWNlLk1TR19BUFBFTkQpIHsKCQkJCWNhc2UgaWNlLk1TR19BUFBFTkQ6CgkJCQljYXNlIGljZS5NU0dfT1BUSU9OOgoJCQkJCWNhbi5jb3JlLkxpc3QobXNnW2tleV0sIGZ1bmN0aW9uKGl0ZW0pIHsgZGVsZXRlKG1zZ1tpdGVtXSkgfSkKCQkJCWRlZmF1bHQ6IG1zZ1trZXldID0gW10KCQkJfSB9LAoJCQlDb3B5OiBmdW5jdGlvbihyZXMpIHsgaWYgKCFyZXMpIHsgcmV0dXJuIG1zZyB9CgkJCQlyZXMucmVzdWx0ICYmIChtc2cucmVzdWx0ID0gKG1zZy5yZXN1bHR8fFtdKS5jb25jYXQocmVzLnJlc3VsdCkpCgkJCQlyZXMuYXBwZW5kICYmIChtc2cuYXBwZW5kID0gcmVzLmFwcGVuZCkgJiYgcmVzLmFwcGVuZC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQl2YXIgaSA9IG1zZy5vcHRpb24gJiYgbXNnLm9wdGlvbi5pbmRleE9mKGl0ZW0pOyBpZiAoaSA+IC0xKSB7CgkJCQkJCW1zZy5vcHRpb25baV0gPSAiIiwgZGVsZXRlKG1zZ1tpdGVtXSkKCQkJCQl9CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSAobXNnW2l0ZW1dfHxbXSkuY29uY2F0KHJlc1tpdGVtXSkpCgkJCQl9KQoJCQkJcmVzLm9wdGlvbiAmJiAobXNnLm9wdGlvbiA9IHJlcy5vcHRpb24pICYmIHJlcy5vcHRpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSByZXNbaXRlbV0pCgkJCQl9KQoJCQkJcmVzLl9vcHRpb24gJiYgKG1zZy5fb3B0aW9uID0gcmVzLl9vcHRpb24pICYmIHJlcy5fb3B0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCXJlc1tpdGVtXSAmJiAobXNnW2l0ZW1dID0gcmVzW2l0ZW1dKQoJCQkJfSkKCQkJCXJldHVybiBtc2cKCQkJfSwKCQkJUHVzaDogZnVuY3Rpb24oa2V5LCB2YWx1ZSwgZGV0YWlsKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgewoJCQkJCXZhbHVlID0gdmFsdWV8fGNhbi5jb3JlLkl0ZW0oa2V5KSwgY2FuLmNvcmUuTGlzdCh2YWx1ZSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQlkZXRhaWw/IG1zZy5QdXNoKG1kYi5LRVksIGl0ZW0pLlB1c2gobWRiLlZBTFVFLCBrZXlbaXRlbV18fCIiKTogbXNnLlB1c2goaXRlbSwga2V5W2l0ZW1dfHwiIikKCQkJCQl9KQoJCQkJCXJldHVybiBtc2cKCQkJCX0KCgkJCQltc2cuYXBwZW5kID0gY2FuLmJhc2UuQWRkVW5pcShtc2cuYXBwZW5kLCBrZXkpLCBtc2dba2V5XSA9IG1zZ1trZXldIHx8IFtdCgkJCQltc2dba2V5XS5wdXNoKGNhbi5iYXNlLmlzU3RyaW5nKHZhbHVlKXx8Y2FuLmJhc2UuaXNGdW5jdGlvbih2YWx1ZSk/IHZhbHVlOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpCgkJCQlyZXR1cm4gbXNnCgkJCX0sCgkJCVN0YXR1czogZnVuY3Rpb24ob2JqKSB7IG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMsIEpTT04uc3RyaW5naWZ5KGNhbi5jb3JlLkl0ZW0ob2JqLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiB7bmFtZToga2V5LCB2YWx1ZTogdmFsdWV9IH0pKSkgfSwKCQkJU3RhdHVzVGltZUNvdW50OiBmdW5jdGlvbihvYmopIHsgbXNnLmFwcGVuZCAmJiBtc2cuU3RhdHVzKGNhbi5iYXNlLkNvcHkoeyJ0aW1lIjogY2FuLmJhc2UuVGltZSgpLCAiY291bnQiOiBtc2cuTGVuZ3RoKCkrIngiK21zZy5hcHBlbmQubGVuZ3RofSwgb2JqKSkgfSwKCQkJRWNobzogZnVuY3Rpb24ocmVzKSB7IG1zZy5yZXN1bHQgPSBtc2cucmVzdWx0IHx8IFtdCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyBtc2cucmVzdWx0LnB1c2goYXJndW1lbnRzW2ldKSB9CgkJCQlyZXR1cm4gbXNnLl9oYW5kID0gdHJ1ZSwgbXNnCgkJCX0sCgkJCUR1bXA6IGZ1bmN0aW9uKGNhbikgewoJCQkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbikKCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQkJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQkJfSwKCQl9CgkJcmV0dXJuIGNhbi5taXNjLnByb3RvKG1zZywgcHJvdG8pCgl9LAoJR0VUOiBmdW5jdGlvbihjYW4sIHVybCwgY2IpIHsgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpCgkJeGhyLm9wZW4oIkdFVCIsIHVybCksIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7CgkJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih4aHIucmVzcG9uc2VUZXh0KQoJCQl9CgkJfQoJCXRyeSB7IHhoci5zZW5kKCkgfSBjYXRjaChlKSB7IGNhbi5taXNjLkxvZyhlKSB9Cgl9LAoJUE9TVDogZnVuY3Rpb24oY2FuLCBtc2csIHVybCwgZm9ybSwgY2IpIHsgLy8gX21ldGhvZCBfYWNjZXB0IF91cGxvYWQgX3Byb2dyZXNzCgkJdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOyBtc2cuX3hociA9IHhocgoJCXhoci5vcGVuKG1zZy5fbWV0aG9kfHwiUE9TVCIsIHVybCksIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKCQkJaWYgKHhoci5yZWFkeVN0YXRlICE9IDQpIHsgcmV0dXJuIH0KCgkJCXRyeSB7IC8vIOino+aekOWTjeW6lAoJCQkJdmFyIHJlcyA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCkKCQkJfSBjYXRjaCAoZSkgewoJCQkJdmFyIHJlcyA9IHtyZXN1bHQ6IFt4aHIucmVzcG9uc2VUZXh0XX0KCQkJfQoJCQlpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHsKCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZy5Db3B5KHJlcykpCgkJCX0KCQkJY2FuLnVzZXIudG9hc3QoY2FuLCByZXMsIHhoci5zdGF0dXMpCgkJfQoKCQlpZiAobXNnLl91cGxvYWQpIHsgLy8g5LiK5Lyg5paH5Lu2CgkJCXZhciBkYXRhID0gbmV3IEZvcm1EYXRhKCk7IGNhbi5jb3JlLkl0ZW1zKGZvcm0sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwga2V5KSB7CgkJCQlkYXRhLmFwcGVuZChrZXksIHZhbHVlKQoJCQl9KSwgZGF0YS5hcHBlbmQoaHRtbC5VUExPQUQsIG1zZy5fdXBsb2FkKSwgZGF0YS5hcHBlbmQoaWNlLk1TR19VUExPQUQsIG1kYi5VUExPQUQpCgoJCQl4aHIudXBsb2FkLm9ucHJvZ3Jlc3MgPSBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmJhc2UuaXNGdW5jKG1zZy5fcHJvZ3Jlc3MpICYmIG1zZy5fcHJvZ3Jlc3MoZXZlbnQsIHBhcnNlSW50KGV2ZW50LmxvYWRlZCoxMDAvZXZlbnQudG90YWwpLCBldmVudC50b3RhbCwgZXZlbnQubG9hZGVkKQoJCQl9CgkJfSBlbHNlIHsgLy8g6K+35rGC5pWw5o2uCgkJCXZhciBkYXRhID0gY2FuLmNvcmUuSXRlbXMoZm9ybSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBrZXkpIHsgcmV0dXJuIGtleSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB9KS5qb2luKCImIikKCQkJeGhyLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtVHlwZSIsICJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKQoJCX0KCgkJLy8g5Y+R6YCB6K+35rGCCgkJeGhyLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIsIG1zZy5fYWNjZXB0fHwiYXBwbGljYXRpb24vanNvbiIpCgkJdHJ5IHsgeGhyLnNlbmQoZGF0YSkgfSBjYXRjaChlKSB7IGNhbi5taXNjLkxvZyhlKSB9Cgl9LAoJUnVuOiBmdW5jdGlvbihldmVudCwgY2FuLCBkYXRhc2V0LCBjbWRzLCBjYikgewoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudHx8e30pLCBza2lwID0ge19oYW5kbGU6IHRydWV9CgkJdmFyIGZvcm0gPSB7Y21kczogY21kc3x8bXNnLmNtZH07IG1zZy5vcHRpb24gJiYgbXNnLm9wdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKHR5cGVvZiBtc2cuT3B0aW9uKGl0ZW0pID09IGxhbmcuT0JKRUNUKSB7IHJldHVybiB9CgkJCWlmICh0eXBlb2YgbXNnLk9wdGlvbihpdGVtKSA9PSBsYW5nLkZVTkNUSU9OKSB7IHJldHVybiB9CgkJCSFza2lwW2l0ZW1dICYmIG1zZ1tpdGVtXSAmJiAoZm9ybVtpdGVtXSA9IG1zZ1tpdGVtXSkKCQl9KQoKCQljYW4ubWlzYy5QT1NUKGNhbiwgbXNnLCBjYW4uYmFzZS5NZXJnZVVSTChkYXRhc2V0Lm5hbWVzLnRvTG93ZXJDYXNlKCksCgkJCSJfbmFtZSIsIChtc2cuX2Nhbi5zdXB8fG1zZy5fY2FuKS5fbmFtZSwgIl9pbmRleCIsIChtc2cuX2Nhbi5zdXB8fG1zZy5fY2FuKS5faW5kZXgsCgkJCWljZS5NU0dfREFFTU9OLCBtc2cuX19kYWVtb258fGRhdGFzZXQuZGFlbW9ufHwiIgoJCSksIGZvcm0sIGNiKQoJfSwKCVdTUzogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYiwgb25vcGVuLCBvbmNsb3NlLCBvbmVycm9yKSB7IGlmIChjYW4udXNlci5pc0lFKSB7IHJldHVybiB9CgkJdmFyIHVybCA9IGxvY2F0aW9uLnByb3RvY29sLnJlcGxhY2UoImh0dHAiLCAid3MiKSsiLy8iK2xvY2F0aW9uLmhvc3QrIi9zcGFjZS8iCgkJaWYgKHVybC5pbmRleE9mKCJjaHJvbWUiKSA9PSAwKSB7IHVybCA9ICJ3czovL2xvY2FsaG9zdDo5MDIwL3NwYWNlLyIgfQoKCQl2YXIgc29ja2V0ID0gbmV3IFdlYlNvY2tldChjYW4uYmFzZS5NZXJnZVVSTCh1cmwsIGFyZ3MpKQoJCXNvY2tldC5vbmNsb3NlID0gZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZyhodG1sLldTUywgY2xpLkNMT1NFLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25jbG9zZSk/IG9uY2xvc2Uoc29ja2V0KTogY2FuLmNvcmUuVGltZXIoY2FuLmJhc2UucmFuZG9tKDMwMDAsIDEwMDApLCBmdW5jdGlvbigpIHsKCQkJCWFyZ3MubmFtZSA9IGFyZ3MubmFtZXx8Y2FuLl93c3NfbmFtZQoJCQkJY2FuLm1pc2MuV1NTKGNhbiwgYXJncywgY2IsIG9ub3Blbiwgb25lcnJvciwgb25jbG9zZSkKCQkJfSkKCQl9LCBzb2NrZXQub25lcnJvciA9IGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGNsaS5FUlJPUiwgYXJncykKCQkJY2FuLmJhc2UuaXNGdW5jKG9uZXJyb3IpPyBvbmVycm9yKHNvY2tldCk6IHNvY2tldC5jbG9zZSgpCgoJCX0sIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBjbGkuT1BFTiwgYXJncykKCQkJY2FuLmJhc2UuaXNGdW5jKG9ub3BlbikgJiYgb25vcGVuKHNvY2tldCkKCQl9CgoJCXNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkgeyAvLyDop6PmnpDlkb3ku6QKCQkJdHJ5IHsgdmFyIGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpIH0gY2F0Y2ggKGUpIHsgdmFyIGRhdGEgPSB7ZGV0YWlsOiBbZXZlbnQuZGF0YV19IH0KCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1zZy5SZXBseSA9IGZ1bmN0aW9uKCkgeyAvLyDlm57lpI3lkb3ku6QKCQkJCW1zZy5PcHRpb24oe19oYW5kbGU6IHRydWUsIF9zb3VyY2U6IChtc2dbaWNlLk1TR19UQVJHRVRdfHxbXSkucmV2ZXJzZSgpLnNsaWNlKDEpLmpvaW4oaWNlLlBUKXx8IiIsIF90YXJnZXQ6IChtc2dbaWNlLk1TR19TT1VSQ0VdfHxbXSkucmV2ZXJzZSgpLmpvaW4oaWNlLlBUKX0pCgkJCQltc2cucmVzdWx0ID0gKG1zZy5yZXN1bHR8fFtdKS5jb25jYXQoY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpKSwgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBpY2UuTVNHX1JFU1VMVCwgbXNnLnJlc3VsdCwgbXNnKQoJCQkJZGVsZXRlKG1zZy5fZXZlbnQpLCBkZWxldGUobXNnLl9jYW4pLCBzb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKQoJCQl9LCBtc2cuZGV0YWlsID0gZGF0YS5kZXRhaWwsIG1zZy5Db3B5KGRhdGEpCgoJCQl0cnkgeyAvLyDmiafooYzlkb3ku6QKCQkJCWNhbi5taXNjLkxvZyhodG1sLldTUywgaWNlLk1TR19ERVRBSUwsIG1zZy5kZXRhaWwsIG1zZykKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIG1zZywgbXNnLmRldGFpbFswXSwgbXNnLmRldGFpbC5zbGljZSgxKSkKCQkJfSBjYXRjaCAoZSkgeyBjYW4ubWlzYy5Mb2coZSksIG1zZy5SZXBseSgpIH0KCQl9Cgl9LAoKCUNvb2tpZVNlc3NpZDogc2h5KCLkvJror53lj5jph48iLCBmdW5jdGlvbihjYW4sIHZhbHVlLCBwYXRoKSB7CgkJcmV0dXJuIGNhbi5taXNjLkNvb2tpZShjYW4sIGljZS5NU0dfU0VTU0lEKyJfIitjYW4uYmFzZS5yZXBsYWNlQWxsKGxvY2F0aW9uLmhvc3QsIGljZS5QVCwgIl8iLCBpY2UuREYsICJfIiksIHZhbHVlLCBwYXRoKQoJfSksCglDb29raWU6IHNoeSgi5Lya6K+d5Y+Y6YePIiwgZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlLCBwYXRoKSB7CgkJZnVuY3Rpb24gc2V0KGssIHYpIHsgZG9jdW1lbnQuY29va2llID0gaysiPSIrdisiO3BhdGg9IisocGF0aHx8aWNlLlBTKSB9CgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgZm9yICh2YXIgayBpbiBrZXkpIHsgc2V0KGssIGtleVtrXSkgfSBrZXkgPSB1bmRlZmluZWQgfQoKCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyB2YXIgY3MgPSB7fQoJCQlkb2N1bWVudC5jb29raWUuc3BsaXQoIjsgIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IHZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgY3NbbHNbMF1dID0gbHNbMV0gfSkKCQkJcmV0dXJuIGNzCgkJfQoKCQl2YWx1ZSAhPSB1bmRlZmluZWQgJiYgc2V0KGtleSwgdmFsdWUpCgkJdmFyIHZhbCA9IChuZXcgUmVnRXhwKGtleSsiPShbXjtdKik7PyIpKS5leGVjKGRvY3VtZW50LmNvb2tpZSkKCQlyZXR1cm4gdmFsICYmIHZhbC5sZW5ndGggPiAwPyB2YWxbMV06ICIiCgl9KSwKCVNlYXJjaE9yQ29uZjogZnVuY3Rpb24oY2FuLCBrZXksIGRlZikgeyByZXR1cm4gY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLm1pc2MuU2VhcmNoKGNhbiwga2V5KSwgY2FuLkNvbmYoa2V5KSwgZGVmKSB9LAoJU2VhcmNoSGFzaDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4uX2luZGV4ID09IGNhbi5taXNjLlNlYXJjaChjYW4sICJjbWQiKSkgewoJCQlyZXR1cm4gbG9jYXRpb24uaGFzaC5zbGljZSgxKQoJCX0KCX0sCglTZWFyY2g6IHNoeSgi6K+35rGC5Y+C5pWwIiwgZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IHZhciBhcmdzID0ge30KCQlpZiAodmFsdWUgPT0gdW5kZWZpbmVkICYmIGNhbi5iYXNlLmlzU3RyaW5nKGtleSkpIHsKCQkJdmFyIGxzID0gbG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoaWNlLlBTKTsgaWYgKGxzWzFdID09IGNoYXQuU0hBUkUpIHsgYXJnc1tjaGF0LlNIQVJFXSA9IGxzWzJdIH0KCQkJZm9yICh2YXIgaSA9IDI7IGkgPCBscy5sZW5ndGg7IGkgKz0gMikgeyBpZiAoeyJwb2QiOiB0cnVlLCAiY21kIjogdHJ1ZX1bbHNbaV1dKSB7IGFyZ3NbbHNbaV1dID0gbHNbaSsxXSB9IH0KCQl9CgkJbG9jYXRpb24uc2VhcmNoICYmIGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyB2YXIgeCA9IGl0ZW0uc3BsaXQoIj0iKQoJCQl4WzFdICE9ICIiICYmIChhcmdzW3hbMF1dID0gZGVjb2RlVVJJQ29tcG9uZW50KHhbMV0pKQoJCX0pCgoJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7CgkJCWNhbi5jb3JlLkl0ZW0oa2V5LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7IGFyZ3Nba2V5XSA9IHZhbHVlIH0gYXJnc1trZXldID09ICIiICYmIGRlbGV0ZShhcmdzW2tleV0pCgkJCX0pCgkJfSBlbHNlIHsKCQkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGFyZ3MgfQoJCQlpZiAodmFsdWUgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBhcmdzW2tleV0gfQoJCQlhcmdzW2tleV0gPSB2YWx1ZSwgYXJnc1trZXldID09ICIiICYmIGRlbGV0ZShhcmdzW2tleV0pCgkJfQoKCQl2YXIgc2VhcmNoID0gY2FuLmNvcmUuSXRlbShhcmdzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBrZXkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgfSkuam9pbigiJiIpCgkJcmV0dXJuIHNlYXJjaD8gbG9jYXRpb24uc2VhcmNoID0gc2VhcmNoOiBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24ucGF0aG5hbWUKCX0pLAoJTWVyZ2VVUkw6IHNoeSgi5Zyw5Z2A6ZO+5o6lIiwgZnVuY3Rpb24oY2FuLCBvYmpzLCBjbGVhcikgewoJCXZhciBwYXRoID0gbG9jYXRpb24ucGF0aG5hbWU7IG9ianMuX3BhdGggJiYgKHBhdGggPSBvYmpzLl9wYXRoKSwgZGVsZXRlKG9ianMuX3BhdGgpCgkJb2Jqcy5wb2QgJiYgKHBhdGggPSAiL2NoYXQvcG9kLyIrb2Jqcy5wb2QpLCBkZWxldGUob2Jqcy5wb2QpCgkJb2Jqcy5jbWQgJiYgKHBhdGggPSAocGF0aC5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMD8gcGF0aDogIi9jaGF0IikrIi9jbWQvIitvYmpzLmNtZCksIGRlbGV0ZShvYmpzLmNtZCkKCQlvYmpzLndlYnNpdGUgJiYgKHBhdGggPSAocGF0aC5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMD8gcGF0aDogIi9jaGF0IikrIi93ZWJzaXRlLyIrb2Jqcy53ZWJzaXRlKSwgZGVsZXRlKG9ianMud2Vic2l0ZSkKCQlyZXR1cm4gY2FuLmJhc2UuTWVyZ2VVUkwobG9jYXRpb24ub3JpZ2luK3BhdGgrKGNsZWFyPyIiOmxvY2F0aW9uLnNlYXJjaCksIG9ianMpCgl9KSwKCglydW5BY3Rpb246IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwgbGlzdCkgewoJCWlmIChjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgbGlzdFtjbWRzWzFdXSkgeyByZXR1cm4gbGlzdFtjbWRzWzFdXShjbWRzLnNsaWNlKDIpKSwgdHJ1ZSB9CgkJaWYgKGxpc3RbY21kc1swXV0pIHsgcmV0dXJuIGxpc3RbY21kc1swXV0oY21kcy5zbGljZSgxKSksIHRydWUgfQoJfSwKCWNvbmNhdDogZnVuY3Rpb24oY2FuLCB0bywgZnJvbSkgeyB0byA9IHRvfHxbXSwgZnJvbSA9IGZyb218fFtdCgkJaWYgKGZyb21bMF0gPT0gY3R4LkFDVElPTiAmJiBmcm9tWzFdID09IGljZS5SVU4gJiYgY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2Zyb21bMl1dKSB7IHJldHVybiBmcm9tIH0KCQlpZiAoY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2Zyb21bMF1dKSB7IHJldHVybiBmcm9tIH0KCQlpZiAoZnJvbVswXSA9PSAiX3NlYXJjaCIpIHsgcmV0dXJuIGZyb20gfQoJCXJldHVybiB0by5jb25jYXQoZnJvbSkKCX0sCglwcm90bzogZnVuY3Rpb24oc3ViLCBzdXApIHsgcmV0dXJuIHN1Yi5fX3Byb3RvX18gPSBzdXAsIHN1YiB9LAoKCUxvZzogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCUluZm86IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKV0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCX0sCglXYXJuOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJ3YXJuIl0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJYXJncy5wdXNoKGljZS5OTCwgdGhpcy5fZmlsZUxpbmUoKS5zcGxpdChpY2UuTkwpLnNsaWNlKDIpLmpvaW4oaWNlLk5MKSkKCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCURlYnVnOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJkZWJ1ZyJdCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWFyZ3MucHVzaCh0aGlzLmZpbGVMaW5lKDIsIDMpKQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpLCAiZGVidWciXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChKU09OLnN0cmluZ2lmeShhcmd1bWVudHNbaV0pKSB9CgkJbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNb2JpbGUiKSA+IC0xICYmIGFsZXJ0KEpTT04uc3RyaW5naWZ5KGFyZ3Muam9pbihpY2UuU1ApKSkKCX0sCglGaWxlTGluZTogZnVuY3Rpb24oZGVwdGgsIGxlbmd0aCkgewoJCXJldHVybiB0aGlzLmZpbGVMaW5lKGRlcHRoKzEpLnNwbGl0KGljZS5QUykuc2xpY2UoMykuc2xpY2UoLWxlbmd0aCkuam9pbihpY2UuUFMpLnNwbGl0KCIpIilbMF0KCX0sCglmaWxlTGluZTogZnVuY3Rpb24oZGVwdGgpIHsKCQlyZXR1cm4gKHRoaXMuX2ZpbGVMaW5lKCkuc3BsaXQoaWNlLk5MKVsxK2RlcHRoXXx8IiIpLnRyaW0oKQoJfSwKCV9maWxlTGluZTogZnVuY3Rpb24oKSB7IHZhciBvYmogPSB7fQoJCUVycm9yLmNhcHR1cmVTdGFja1RyYWNlICYmIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKG9iaiwgYXJndW1lbnRzLmNhbGxlZSkKCQlyZXR1cm4gb2JqLnN0YWNrIHx8ICIiCgl9LAoJX3RpbWU6IGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCXZhciBob3VyID0gbm93LmdldEhvdXJzKCkKCQlpZiAoaG91ciA8IDEwKSB7IGhvdXIgPSAiMCIraG91ciB9CgkJdmFyIG1pbnV0ZSA9IG5vdy5nZXRNaW51dGVzKCkKCQlpZiAobWludXRlIDwgMTApIHsgbWludXRlID0gIjAiK21pbnV0ZSB9CgkJdmFyIHNlY29uZCA9IG5vdy5nZXRTZWNvbmRzKCkKCQlpZiAoc2Vjb25kIDwgMTApIHsgc2Vjb25kID0gIjAiK3NlY29uZCB9CgkJcmV0dXJuIGhvdXIrIjoiK21pbnV0ZSsiOiIrc2Vjb25kKyIuIitub3cuZ2V0TWlsbGlzZWNvbmRzKCkKCX0sCn0pCg==",
        "usr/volcanos/lib/page.js": "Vm9sY2Fub3MoInBhZ2UiLCB7aGVscDogIueUqOaIt+eVjOmdoiIsIENsYXNzTGlzdDogewoJCWhhczogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJcmV0dXJuIGxpc3QuaW5kZXhPZihrZXkpID4gLTEKCQl9LAoJCWFkZDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJdmFyIHZhbHVlID0gY2FuLmJhc2UuQWRkVW5pcShsaXN0LCBrZXkpLmpvaW4oaWNlLlNQKS50cmltKCkKCQkJcmV0dXJuIHZhbHVlICE9IG9iai5jbGFzc05hbWUgJiYgKG9iai5jbGFzc05hbWUgPSB2YWx1ZSksIHZhbHVlCgkJfSwKCQlkZWw6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsgdmFyIGxpc3QgPSBvYmouY2xhc3NOYW1lPyBvYmouY2xhc3NOYW1lLnNwbGl0KGljZS5TUCk6IFtdCgkJCXJldHVybiBvYmouY2xhc3NOYW1lID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT0ga2V5PyB1bmRlZmluZWQ6IHZhbHVlIH0pLmpvaW4oaWNlLlNQKS50cmltKCkKCQl9LAoJCXNldDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSwgY29uZGl0aW9uKSB7CgkJCXJldHVybiAoY29uZGl0aW9uPyB0aGlzLmFkZChjYW4sIG9iaiwga2V5KTogdGhpcy5kZWwoY2FuLCBvYmosIGtleSkpLmluZGV4T2Yoa2V5KSA+IC0xCgkJfSwKCQluZWc6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsKCQkJcmV0dXJuICh0aGlzLmhhcyhjYW4sIG9iaiwga2V5KT8gdGhpcy5kZWwoY2FuLCBvYmosIGtleSk6IHRoaXMuYWRkKGNhbiwgb2JqLCBrZXkpKS5pbmRleE9mKGtleSkgPiAtMQoJCX0sCgl9LAoJU2VsZWN0QXJnczogZnVuY3Rpb24oY2FuLCBvcHRpb24sIGtleSwgY2IpIHsKCQlpZiAoY2FuLmJhc2UuaXNVbmRlZmluZWQoa2V5KSkgeyB2YXIgdmFsdWUgPSB7fQoJCQljYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgKHZhbHVlW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlKQoJCQl9KTsgcmV0dXJuIFt2YWx1ZV0KCQl9CgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0oa2V5LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sIGtleSwgdmFsdWUpIH0pLCBba2V5XQoJCX0KCQlpZiAoIWNhbi5iYXNlLmlzRnVuYyhjYikpIHsgdmFyIHZhbHVlID0gY2I7IGNiID0gZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbS50eXBlID09IGh0bWwuQlVUVE9OKSB7IHJldHVybiB9CgkJCXJldHVybiBpdGVtLm5hbWUgJiYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKHZhbHVlKT8gaXRlbS52YWx1ZTogKGl0ZW0udmFsdWUgPSB2YWx1ZSkpfHwiIgoJCX0gfQoJCWlmIChrZXkuaW5kZXhPZihpY2UuUFQpID4gLTEpIHsgcmV0dXJuIFsiIl19CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIG9wdGlvbiwga2V5PyAidGV4dGFyZWFbbmFtZT0iK2tleSsiXSwiKyJpbnB1dFtuYW1lPSIra2V5KyJdLCIrInNlbGVjdFtuYW1lPSIra2V5KyJdIjogIi5hcmdzIiwgY2IpCgl9LAoJU2VsZWN0QWxsOiBzaHkoIumAieaLqeiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5TZWxlY3RBbGwoY2FuLCBpdGVtLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keSwga2V5LCBjYiwgaW50ZXJ2YWwsIGNicykKCQl9KQoJCXJldHVybiBjYW4uY29yZS5MaXN0KHRhcmdldCAmJiB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChrZXkpLCBjYiwgaW50ZXJ2YWwsIGNicykKCX0pLAoJU2VsZWN0OiBzaHkoIumAieaLqeiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKSB7IGlmIChrZXkgPT0gaWNlLlBUKSB7IGNiKHRhcmdldCk7IHJldHVybiBbXSB9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QodGFyZ2V0ICYmIHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKGNhbi5wYWdlLktleXMoa2V5KSksIGNiLCBpbnRlcnZhbCwgY2JzKQoJfSksCglNb2RpZnk6IHNoeSgi5L+u5pS56IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7IHRhcmdldCA9IHRhcmdldHx8e30KCQl0YXJnZXQgPSBjYW4uYmFzZS5pc09iamVjdCh0YXJnZXQpPyB0YXJnZXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgaWYgKCF0YXJnZXQpIHsgcmV0dXJuIH0KCQljYW4uYmFzZS5pc1N0cmluZyh2YWx1ZSk/ICh0YXJnZXQuaW5uZXJIVE1MID0gdmFsdWUpOiBjYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIHZhbCkgewoJCQlrZXkgPT0gImNsYXNzTmFtZSIgJiYgY2FuLmJhc2UuaXNBcnJheSh2YWwpICYmICh2YWwgPSB2YWwuam9pbihpY2UuU1ApKQoJCQkhY2FuLmJhc2UuaXNPYmplY3QodmFsKT8gKHRhcmdldFtrZXldID0gdmFsKTogY2FuLmNvcmUuSXRlbSh2YWwsIGZ1bmN0aW9uKGssIHYpIHsKCQkJCXZhciBzaXplID0gewoJCQkJCSJoZWlnaHQiOiB0cnVlLCAibWF4LWhlaWdodCI6IHRydWUsICJtaW4taGVpZ2h0IjogdHJ1ZSwKCQkJCQkid2lkdGgiOiB0cnVlLCAibWF4LXdpZHRoIjogdHJ1ZSwgIm1pbi13aWR0aCI6IHRydWUsCgkJCQl9CgkJCQlpZiAoc2l6ZVtrXSAmJiBwYXJzZUludCh2KSA8IDApIHsgcmV0dXJuIHRhcmdldFtrZXldICYmICh0YXJnZXRba2V5XVtrXSA9ICIiKSB9CgoJCQkJdmFyIHNpemUgPSB7CgkJCQkJIm1hcmdpbi10b3AiOiB0cnVlLCAibWFyZ2luLWxlZnQiOiB0cnVlLCAiZm9udC1zaXplIjogdHJ1ZSwKCQkJCQkibGVmdCI6IHRydWUsICJyaWdodCI6IHRydWUsICJ0b3AiOiB0cnVlLCAiYm90dG9tIjogdHJ1ZSwKCQkJCQkiaGVpZ2h0IjogdHJ1ZSwgIm1heC1oZWlnaHQiOiB0cnVlLCAibWluLWhlaWdodCI6IHRydWUsCgkJCQkJIndpZHRoIjogdHJ1ZSwgIm1heC13aWR0aCI6IHRydWUsICJtaW4td2lkdGgiOiB0cnVlLAoJCQkJCSJwYWRkaW5nIjogdHJ1ZSwKCQkJCX0KCgkJCQlpZiAoc2l6ZVtrXSAmJiB2ICYmIChjYW4uYmFzZS5pc051bWJlcih2KSB8fCB2LmluZGV4T2YgJiYgdi5pbmRleE9mKCJweCIpID09IC0xKSkgeyB2ICs9ICJweCIgfQoJCQkJdGFyZ2V0W2tleV0gJiYgKHRhcmdldFtrZXldW2tdID0gdikKCQkJfSkKCQl9KQoJCXJldHVybiB0YXJnZXQKCX0pLAoJUmVtb3ZlOiBzaHkoIuWIoOmZpOiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJcmV0dXJuIHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YXJnZXQpLCB0YXJnZXQKCX0pLAoJQ3JlYXRlOiBzaHkoIuWIm+W7uuiKgueCuSIsIGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgewoJCXJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGtleSksIHZhbHVlKQoJfSksCglBcHBlbmQ6IHNoeSgi5re75Yqg6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgdmFsdWUpIHsgdmFsdWUgPSB2YWx1ZXx8e30KCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoa2V5KSkgeyB2YXIgcmVzID0gY2FuLnBhZ2UuQ3JlYXRlKGNhbiwga2V5LCB2YWx1ZSk7IHJldHVybiB0YXJnZXQuYXBwZW5kQ2hpbGQocmVzKSwgcmVzIH0KCgkJY2FuLmNvcmUuTGlzdChrZXksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGlmICghaXRlbSkgeyByZXR1cm4gfQoJCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSkpIHsgaXRlbSA9IHt2aWV3OiBbaXRlbV19IH0KCQkJaWYgKGl0ZW0ubm9kZU5hbWUpIHsgdGFyZ2V0LmFwcGVuZENoaWxkKGl0ZW0pOyByZXR1cm4gfQoKCQkJLy8g5Z+65pys57uT5p6EOiB0eXBlIG5hbWUgZGF0YSBsaXN0CgkJCXZhciB0eXBlID0gaXRlbS50eXBlfHxodG1sLkRJViwgZGF0YSA9IGl0ZW0uZGF0YXx8e30KCQkJdmFyIG5hbWUgPSBpdGVtLm5hbWV8fGRhdGEubmFtZXx8IiIKCgkJCS8vIOaVsOaNruiwg+aVtAoJCQljYW4uY29yZS5JdGVtKGl0ZW0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJCXN3aXRjaCAoa2V5KSB7CgkJCQkJY2FzZSBtZGIuVFlQRTogYnJlYWsKCQkJCQljYXNlIG1kYi5OQU1FOiBicmVhawoJCQkJCWNhc2UgbWRiLkRBVEE6IGJyZWFrCgkJCQkJY2FzZSBtZGIuTElTVDogYnJlYWsKCQkJCQljYXNlIGh0bWwuSU5ORVI6IGRhdGEuaW5uZXJIVE1MID0gaXRlbS5pbm5lcjsgYnJlYWsKCQkJCQljYXNlIGh0bWwuQ0xJQ0s6IGRhdGEub25jbGljayA9IGl0ZW0uY2xpY2s7IGJyZWFrCgkJCQkJZGVmYXVsdDoKCQkJCQkJaWYgKGl0ZW1ba2V5XSA9PSB1bmRlZmluZWQpIHsgYnJlYWsgfQoJCQkJCQlkYXRhW2tleV0gPSBpdGVtW2tleV0KCQkJCX0KCQkJfSkKCgkJCS8vIOWfuuacrOexu+WeizogdmlldyB0ZXh0IGJ1dHRvbiBzZWxlY3QgaW5wdXQgdXNlcm5hbWUgcGFzc3dvcmQKCQkJLy8g5Z+65pys57G75Z6LOiBpbWcgcm93IHRoIHRkCgkJCWlmIChpdGVtLnZpZXcpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0udmlldykKCQkJCWlmIChjYW4uYmFzZS5pc0FycmF5KGxpc3RbMF0pKSB7IGxpc3RbMF0gPSBsaXN0WzBdLmpvaW4oaWNlLlNQKSB9CgkJCQlsaXN0WzBdICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBkYXRhLCBsaXN0WzBdKQoJCQkJdHlwZSA9IGxpc3RbMV18fGh0bWwuRElWCgkJCQlkYXRhLmlubmVySFRNTCA9IGxpc3RbMl18fGRhdGEuaW5uZXJIVE1MfHwiIgoJCQkJbmFtZSA9IG5hbWV8fGxpc3RbM118fCIiCgoJCQl9IGVsc2UgaWYgKGl0ZW0udGV4dCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS50ZXh0KQoJCQkJZGF0YS5pbm5lckhUTUwgPSBsaXN0WzBdfHxkYXRhLmlubmVySFRNTHx8IiIKCQkJCXR5cGUgPSBsaXN0WzFdfHxodG1sLlNQQU4KCQkJCWxpc3RbMl0gJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGRhdGEsIGxpc3RbMl0pCgoJCQl9IGVsc2UgaWYgKGl0ZW0uYnV0dG9uKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmJ1dHRvbikKCQkJCXR5cGUgPSBodG1sLkJVVFRPTiwgbmFtZSA9IG5hbWV8fGxpc3RbMF0KCQkJCWRhdGEuaW5uZXJUZXh0ID0gY2FuLnVzZXIudHJhbnMoY2FuLCBsaXN0WzBdKSwgZGF0YS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQsIG5hbWUpCgkJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCQkJcmV0dXJuIHRydWUKCQkJCX0KCgkJCX0gZWxzZSBpZiAoaXRlbS5zZWxlY3QpIHsgdmFyIGxpc3QgPSBpdGVtLnNlbGVjdAoJCQkJdHlwZSA9IGh0bWwuU0VMRUNULCBkYXRhLm5hbWUgPSBuYW1lID0gbmFtZXx8bGlzdFswXVswXQoJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8bmFtZSkKCQkJCWRhdGEuY2xhc3NOYW1lID0gZGF0YS5jbGFzc05hbWV8fGxpc3RbMF1bMF18fCIiCgoJCQkJaXRlbS5saXN0ID0gbGlzdFswXS5zbGljZSgxKS5tYXAoZnVuY3Rpb24odmFsdWUpIHsKCQkJCQlyZXR1cm4ge3R5cGU6IGh0bWwuT1BUSU9OLCB2YWx1ZTogdmFsdWUsIGlubmVyOiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlKX0KCQkJCX0pCgkJCQlkYXRhLm9uY2hhbmdlID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSwgbmFtZSkKCQkJCX0KCgkJCX0gZWxzZSBpZiAoaXRlbS5pbnB1dCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5pbnB1dCkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8IiIsIGRhdGEubmFtZSA9IGRhdGEubmFtZXx8bmFtZQoJCQkJZGF0YS50eXBlID0gZGF0YS50eXBlfHwidGV4dCIKCQkJCWRhdGEuY2xhc3NOYW1lID0gZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSAib2ZmIgoKCQkJCWRhdGEub25mb2N1cyA9IGRhdGEub25mb2N1c3x8ZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgkJCQl9CgkJCQlkYXRhLm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jdGlvbihsaXN0WzFdKSAmJiBsaXN0WzFdKGV2ZW50KQoJCQkJfQoJCQkJZGF0YS5vbmtleXVwID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMl0pICYmIGxpc3RbMl0oZXZlbnQpCgkJCQl9CgkJCX0gZWxzZSBpZiAoaXRlbS51c2VybmFtZSkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS51c2VybmFtZSkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8aHRtbC5VU0VSTkFNRSwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGxpc3RbMV18fGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fGh0bWwuVVNFUk5BTUUKCgkJCX0gZWxzZSBpZiAoaXRlbS5wYXNzd29yZCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5wYXNzd29yZCkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8aHRtbC5QQVNTV09SRCwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGxpc3RbMV18fGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fCJjdXJyZW50LXBhc3N3b3JkIgoJCQkJZGF0YS50eXBlID0gaHRtbC5QQVNTV09SRAoKCQkJfSBlbHNlIGlmIChpdGVtLmltZykgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5pbWcpCgkJCQl0eXBlID0gaHRtbC5JTUcsIGRhdGEuc3JjID0gbGlzdFswXQoKCQkJfSBlbHNlIGlmIChpdGVtLnJvdykgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS5yb3cubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaXRlbS5zdWJ8fGh0bWwuVERdfSB9KQoJCQl9IGVsc2UgaWYgKGl0ZW0udGgpIHsgdHlwZSA9IGh0bWwuVFIKCQkJCWl0ZW0ubGlzdCA9IGl0ZW0udGgubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaHRtbC5USF19IH0pCgkJCX0gZWxzZSBpZiAoaXRlbS50ZCkgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS50ZC5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBodG1sLlREXX0gfSkKCQkJfQoKCQkJLy8g6K+t6KiA6L2s5o2iCgkJCWlmICh0eXBlID09IGh0bWwuU0VMRUNUKSAgewoJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8ZGF0YS5uYW1lKQoJCQl9CgkJCWlmICh0eXBlID09IGh0bWwuSU5QVVQpICB7IGRhdGEudHlwZSA9PSBodG1sLkJVVFRPTiAmJiAoZGF0YS52YWx1ZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS52YWx1ZSkpCgkJCQlpZiAoZGF0YS50eXBlID09IGh0bWwuVEVYVHx8ZGF0YS50eXBlID09IGh0bWwuUEFTU1dPUkR8fCFkYXRhLnR5cGUpIHsgZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8Im9mZiIKCQkJCQkvLyBkYXRhLnBsYWNlaG9sZGVyID0gY2FuLnVzZXIudHJhbnMoY2FuLCAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKSkKCQkJCQlkYXRhLnBsYWNlaG9sZGVyID0gKGRhdGEucGxhY2Vob2xkZXJ8fGRhdGEubmFtZXx8IiIpLnNwbGl0KGljZS5QVCkucG9wKCkKCQkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxkYXRhLnBsYWNlaG9sZGVyKQoJCQkJfQoJCQl9CgkJCWlmICh0eXBlID09IGh0bWwuVEVYVEFSRUEpICB7CgkJCQlkYXRhLnBsYWNlaG9sZGVyID0gY2FuLnVzZXIudHJhbnMoY2FuLCAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKSkKCQkJfQoKCQkJLy8g5Yib5bu66IqC54K5CgkJCSFkYXRhLm5hbWUgJiYgaXRlbS5uYW1lICYmIChkYXRhLm5hbWUgPSBpdGVtLm5hbWUpCgkJCXZhciBub2RlID0gY2FuLnBhZ2UuQ3JlYXRlKGNhbiwgdHlwZSwgZGF0YSkKCgkJCS8vIOWIm+W7uue0ouW8lQoJCQluYW1lID0gbmFtZXx8ZGF0YS5jbGFzc05hbWV8fHR5cGV8fCIiCgkJCXZhbHVlW25hbWV8fCIiXSA9IHZhbHVlW2RhdGEuY2xhc3NOYW1lfHwiIl0gPSB2YWx1ZVt0eXBlXSA9IG5vZGUKCQkJdmFsdWUuZmlyc3QgPSB2YWx1ZS5maXJzdHx8bm9kZSwgdmFsdWUubGFzdCA9IG5vZGUKCQkJdmFsdWUuX3RhcmdldCA9IHZhbHVlLl90YXJnZXR8fG5vZGUKCgkJCS8vIOmAkuW9kuiKgueCuQoJCQlpdGVtLmxpc3QgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgbm9kZSwgaXRlbS5saXN0LCB2YWx1ZSkKCQkJdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRDaGlsZCAmJiB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSkKCQkJY2FuLmJhc2UuaXNGdW5jKGl0ZW0uX2luaXQpICYmIGl0ZW0uX2luaXQobm9kZSwgdmFsdWUpCgkJfSkKCQlyZXR1cm4gdmFsdWUKCX0pLAoJQXBwZW5kczogc2h5KCLmt7vliqDoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkgewoJCXJldHVybiB0YXJnZXQuaW5uZXJIVE1MID0gIiIsIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkKCX0pLAoKCUFwcGVuZFRhYmxlOiBzaHkoIua3u+WKoOihqOagvCIsIGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQsIGxpc3QsIGNiKSB7CgkJaWYgKCFtc2cuYXBwZW5kfHxtc2cuYXBwZW5kLmxlbmd0aCA9PSAwKSB7cmV0dXJufQoKCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIGh0bWwuVEFCTEUpCgkJdmFyIHRoZWFkID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsICJ0aGVhZCIpCgkJdmFyIHRib2R5ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsICJ0Ym9keSIpCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGhlYWQsIFt7dHlwZTogaHRtbC5UUiwgZGF0YToge2RhdGFzZXQ6IHtpbmRleDogLTF9fSwgbGlzdDogCgkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCQlyZXR1cm4ga2V5WzBdID09ICJfIj8gdW5kZWZpbmVkOiB7dGV4dDogW2tleS50cmltKCksIGh0bWwuVEhdfQoJCQl9KQoJCX1dKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRib2R5LCBjYW4uY29yZS5MaXN0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihsaW5lLCBpbmRleCwgYXJyYXkpIHsKCQkJdmFyIF9saXN0ID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJcmV0dXJuIGNiKGNhbi5wYWdlLkNvbG9yKGxpbmVba2V5XSkudHJpbSgpLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkKCQkJfSkKCQkJcmV0dXJuIF9saXN0Lmxlbmd0aCA+IDA/IHt0eXBlOiBodG1sLlRSLCBkYXRhc2V0OiB7aW5kZXg6IGluZGV4fSwgbGlzdDogX2xpc3R9OiB1bmRlZmluZWQKCQl9KSkKCQlyZXR1cm4gY2FuLnBhZ2UuT3JkZXJUYWJsZShjYW4sIHRhYmxlKQoJfSksCglPcmRlclRhYmxlOiBmdW5jdGlvbihjYW4sIHRhYmxlKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFibGUsIGh0bWwuVEgsIGZ1bmN0aW9uKHRoLCBpbmRleCkgewoJCQl0aC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdmFyIGRhdGFzZXQgPSBldmVudC50YXJnZXQuZGF0YXNldAoJCQkJZGF0YXNldFsic29ydF9hc2MiXSA9IChkYXRhc2V0WyJzb3J0X2FzYyJdID09ICIxIikgPyAwOiAxCgkJCQljYW4ucGFnZS5SYW5nZVRhYmxlKGNhbiwgdGFibGUsIGluZGV4LCBkYXRhc2V0WyJzb3J0X2FzYyJdID09ICIxIikKCQkJfQoJCX0pCgkJcmV0dXJuIHRhYmxlCgl9LAoJUmFuZ2VUYWJsZTogZnVuY3Rpb24oY2FuLCB0YWJsZSwgaW5kZXgsIHNvcnRfYXNjKSB7CgkJdmFyIGxpc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJcmV0dXJuIHRyLnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FfHxjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsICJoaWRlIik/IG51bGw6IHRyCgkJfSkuc2xpY2UoMSkKCgkJaW5kZXggPSBjYW4uYmFzZS5pc09iamVjdChpbmRleCk/IGluZGV4OiBbaW5kZXhdCgkJaW5kZXggPSBjYW4uY29yZS5MaXN0KGluZGV4LCBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtID4gLTEpIHsgcmV0dXJuIGl0ZW19IH0pCgkJaWYgKGluZGV4Lmxlbmd0aCA9PSAwKSB7IHJldHVybiB9CgoJCXZhciBpc190aW1lID0gdHJ1ZSwgaXNfbnVtYmVyID0gdHJ1ZQoJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odHIpIHsKCQkJdmFyIHRleHQgPSB0ci5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQKCQkJaXNfdGltZSA9IGlzX3RpbWUgJiYgRGF0ZS5wYXJzZSh0ZXh0KSA+IDAKCQkJaXNfbnVtYmVyID0gaXNfbnVtYmVyICYmICFpc05hTihwYXJzZUludCh0ZXh0KSkKCQl9KQoKCQl2YXIgbnVtX2xpc3QgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHRyKSB7CgkJCXZhciB0ZXh0ID0gdHIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0CgkJCXJldHVybiBpc190aW1lPyBEYXRlLnBhcnNlKHRleHQpOgoJCQkJaXNfbnVtYmVyPyBjYW4uYmFzZS5QYXJzZVNpemUodGV4dCk6IHRleHQKCQl9KQoJCWZ1bmN0aW9uIGlzbGVzcyhhLCBiLCBpbmRleCkgewoJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXSAmJiBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dKSB7CgkJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQgPCBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCkgeyByZXR1cm4gdHJ1ZSB9CgkJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQgPiBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCkgeyByZXR1cm4gZmFsc2UgfQoJCQl9CgkJCXJldHVybiBpbmRleC5sZW5ndGggPiAxICYmIGlzbGVzcyhhLCBiLCBpbmRleC5zbGljZSgxKSkKCQl9CgoJCS8vIOmAieaLqeaOkuW6jwoJCWZvciAodmFyIGkgPSAwOyBpIDwgbnVtX2xpc3QubGVuZ3RoOyBpKyspIHsgdmFyIG1pbiA9IGkKCQkJZm9yICh2YXIgaiA9IGkrMTsgaiA8IG51bV9saXN0Lmxlbmd0aDsgaisrKSB7CgkJCQlpZiAobnVtX2xpc3RbbWluXSA9PSBudW1fbGlzdFtqXSAmJiBpbmRleC5sZW5ndGggPiAxICYmIGxpc3RbaW5kZXhbMV1dKSB7CgkJCQkJaWYgKHNvcnRfYXNjPyBpc2xlc3MobGlzdFttaW5dLCBsaXN0W2pdLCBpbmRleC5zbGljZSgxKSk6IGlzbGVzcyhsaXN0W2pdLCBsaXN0W21pbl0sIGluZGV4LnNsaWNlKDEpKSkgewoJCQkJCQltaW4gPSBqCgkJCQkJfQoJCQkJfSBlbHNlIGlmIChzb3J0X2FzYz8gbnVtX2xpc3RbbWluXSA8IG51bV9saXN0W2pdOiBudW1fbGlzdFtqXSA8IG51bV9saXN0W21pbl0pIHsKCQkJCQltaW4gPSBqCgkJCQl9CgkJCX0KCgkJCWlmIChtaW4gIT0gaSkgewoJCQkJdmFyIHRlbXAgPSBudW1fbGlzdFtpXTsgbnVtX2xpc3RbaV0gPSBudW1fbGlzdFttaW5dOyBudW1fbGlzdFttaW5dID0gdGVtcAoJCQkJdmFyIHRlbXAgPSBsaXN0W2ldOyBsaXN0W2ldID0gbGlzdFttaW5dOyBsaXN0W21pbl0gPSB0ZW1wCgkJCX0KCgkJCXZhciB0Ym9keSA9IGxpc3RbaV0ucGFyZW50RWxlbWVudAoJCQlsaXN0W2ldLnBhcmVudEVsZW1lbnQgJiYgdGJvZHkucmVtb3ZlQ2hpbGQobGlzdFtpXSkKCQkJdGJvZHkuYXBwZW5kQ2hpbGQobGlzdFtpXSkKCQl9Cgl9LAoKCUNhY2hlOiBmdW5jdGlvbihuYW1lLCBvdXRwdXQsIGRhdGEpIHsgaWYgKCFuYW1lKSB7IHJldHVybiB9CgkJdmFyIGNhY2hlID0gb3V0cHV0Ll9jYWNoZXx8e307IG91dHB1dC5fY2FjaGUgPSBjYWNoZQoJCWlmIChkYXRhKSB7IGlmIChvdXRwdXQuY2hpbGRyZW4ubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQkJdmFyIHRlbXAgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkKCQkJd2hpbGUgKG91dHB1dC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsgLy8g5YaZ57yT5a2YCgkJCQl2YXIgaXRlbSA9IG91dHB1dC5jaGlsZE5vZGVzWzBdCgkJCQlpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSksCgkJCQkJdGVtcC5hcHBlbmRDaGlsZChpdGVtKQoJCQl9CgkJCXJldHVybiBjYWNoZVtuYW1lXSA9IHtub2RlOiB0ZW1wLCBkYXRhOiBkYXRhfSwgbmFtZQoJCX0KCQlvdXRwdXQuaW5uZXJIVE1MID0gIiIKCgkJdmFyIGxpc3QgPSBjYWNoZVtuYW1lXTsgaWYgKCFsaXN0KSB7IHJldHVybiB9CgkJd2hpbGUgKGxpc3Qubm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsgLy8g6K+757yT5a2YCgkJCXZhciBpdGVtID0gbGlzdC5ub2RlLmNoaWxkTm9kZXNbMF0KCQkJaXRlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGl0ZW0pCgkJCW91dHB1dC5hcHBlbmRDaGlsZChpdGVtKQoJCX0KCQlyZXR1cm4gZGVsZXRlKGNhY2hlW25hbWVdKSwgbGlzdC5kYXRhCgl9LAoJRm9ybWF0OiBmdW5jdGlvbih0eXBlKSB7IHZhciBhcmdzID0gYXJndW1lbnRzCgkJc3dpdGNoICh0eXBlKSB7CgkJCWNhc2UgaHRtbC5BOiByZXR1cm4gIjxhIGhyZWY9JyIrYXJnc1sxXSsiJyB0YXJnZXQ9J19ibGFuayc+IisoYXJnc1syXXx8YXJnc1sxXSkrIjwvYT4iCgkJCWNhc2UgaHRtbC5JTUc6IHJldHVybiBhcmdzWzJdPyAiPGltZyBzcmM9JyIrYXJnc1sxXSsiJyBoZWlnaHQ9IithcmdzWzJdKyI+IjogIjxpbWcgc3JjPSciK2FyZ3NbMV0rIic+IgoJCX0KCX0sCglyZXBsYWNlOiBmdW5jdGlvbihjYW4sIHRleHQsIGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLmJhc2UucmVwbGFjZUFsbCh0ZXh0LCAiPCIsICImbHQ7IiwgIj4iLCAiJmd0OyIsIGtleSwgdmFsdWUpCgl9LAoJQ29sb3I6IGZ1bmN0aW9uKHRleHQpIHsgaWYgKHR5cGVvZiB0ZXh0ICE9IGxhbmcuU1RSSU5HKSB7IHJldHVybiAiIiB9CgkJaWYgKHRleHQuaW5kZXhPZigiaHR0cDovLyIpID09IDAgfHwgdGV4dC5pbmRleE9mKCJodHRwczovLyIpID09IDAgfHwgdGV4dC5pbmRleE9mKCJmdHA6Ly8iKSA9PSAwKSB7CgkJCXZhciBscyA9IHRleHQuc3BsaXQoaWNlLlNQKTsKCQkJdGV4dCA9ICI8YSBocmVmPSciK2xzWzBdKyInIHRhcmdldD0nX2JsYW5rJz4iK2xzWzBdKyI8L2E+Iitscy5zbGljZSgxKS5qb2luKGljZS5TUCkKCQl9OyB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXG4vZywgIjxicj4iKQoKCQlpZiAodGV4dC5pbmRleE9mKCJcMDMzXFsiKSA9PSAtMSkgeyByZXR1cm4gdGV4dCB9CgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2YwMCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszMm0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMGYwJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzMzbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmZjAnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzRtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzAwZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNm0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMGZmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM0OzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzAwZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNzsxbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmZmYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMW0vZywgIjxzcGFuIHN0eWxlPSdmb250LXdlaWdodDpib2xkJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzBtL2csICI8L3NwYW4+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFttL2csICI8L3NwYW4+IikKCQlyZXR1cm4gdGV4dAoJfSwKCWlucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbHVlKSB7CgkJdmFyIGlucHV0ID0ge3R5cGU6IGh0bWwuSU5QVVQsIG5hbWU6IGl0ZW0ubmFtZSwgZGF0YTogaXRlbSwgZGF0YXNldDoge30sIF9pbml0OiBpdGVtLl9pbml0LCBzdHlsZTogaXRlbS5zdHlsZXx8e319CgkJaXRlbS52YWx1ZSA9PSBpY2UuQVVUTyAmJiAoaXRlbS52YWx1ZSA9ICIiLCBpdGVtLmFjdGlvbiA9IGljZS5BVVRPKSwgaXRlbS5hY3Rpb24gPT0gaWNlLkFVVE8gJiYgKGlucHV0LmRhdGFzZXQuYWN0aW9uID0gaWNlLkFVVE8pCgoJCXN3aXRjaCAoaXRlbS50eXBlID0gaXRlbS50eXBlfHxodG1sLlRFWFQpIHsKCQkJY2FzZSBodG1sLlRFWFRBUkVBOiBpbnB1dC50eXBlID0gaHRtbC5URVhUQVJFQQoJCQkJaW5wdXQuc3R5bGUuaGVpZ2h0ID0gaW5wdXQuc3R5bGUuaGVpZ2h0fHxjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGh0bWwuVEVYVEFSRUEsIGl0ZW0ubmFtZSwgaHRtbC5IRUlHSFRdLmpvaW4oaWNlLlBUKSl8fGNhbi5Db25mKFsiZmVhdHVyZSIsIGh0bWwuVEVYVEFSRUEsIGh0bWwuSEVJR0hUXS5qb2luKGljZS5QVCkpCgkJCQlpbnB1dC5zdHlsZS53aWR0aCA9IGlucHV0LnN0eWxlLndpZHRofHxjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGh0bWwuVEVYVEFSRUEsIGl0ZW0ubmFtZSwgaHRtbC5XSURUSF0uam9pbihpY2UuUFQpKXx8Y2FuLkNvbmYoWyJmZWF0dXJlIiwgaHRtbC5URVhUQVJFQSwgaHRtbC5XSURUSF0uam9pbihpY2UuUFQpKQoJCQkJLy8gbm8gYnJlYWsKCQkJY2FzZSBodG1sLlVTRVJOQU1FOgoJCQljYXNlIGh0bWwuUEFTU1dPUkQ6CgkJCQkvLyBubyBicmVhawoJCQljYXNlIGh0bWwuVEVYVDoKCQkJCWl0ZW0uYXV0b2NvbXBsZXRlID0gIm9mZiIKCQkJCWl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS50eXBlCgkJCQlpdGVtLnZhbHVlID0gdmFsdWV8fGl0ZW0udmFsdWV8fCIiCgkJCQlpdGVtLnBsYWNlaG9sZGVyID0gaXRlbS5wbGFjZWhvbGRlcnx8aXRlbS5uYW1lfHxpdGVtLnR5cGUKCQkJCWl0ZW0udGl0bGUgPSBpdGVtLnRpdGxlfHxpdGVtLnBsYWNlaG9sZGVyfHxpdGVtLm5hbWV8fGl0ZW0udHlwZQoJCQkJaXRlbS5jbGFzc05hbWUgfHwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGN0eC5BUkdTKQoJCQkJYnJlYWsKCQkJY2FzZSBodG1sLlNFTEVDVDogaW5wdXQudHlwZSA9IGh0bWwuU0VMRUNUCgkJCQlpdGVtLnZhbHVlcyA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0udmFsdWVzKT8gY2FuLmNvcmUuU3BsaXQoaXRlbS52YWx1ZXMpOiBpdGVtLnZhbHVlcwoJCQkJaWYgKCFpdGVtLnZhbHVlcyAmJiBpdGVtLnZhbHVlKSB7IGl0ZW0udmFsdWVzID0gY2FuLmNvcmUuU3BsaXQoaXRlbS52YWx1ZSksIGl0ZW0udmFsdWUgPSBpdGVtLnZhbHVlc1swXSB9CgoJCQkJaXRlbS52YWx1ZSA9IHZhbHVlfHxpdGVtLnZhbHVlLCBpbnB1dC5saXN0ID0gaXRlbS52YWx1ZXMubWFwKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQkJcmV0dXJuIHt0eXBlOiBodG1sLk9QVElPTiwgdmFsdWU6IHZhbHVlLCBpbm5lcjogdmFsdWV9CgkJCQl9KSwgaXRlbS5jbGFzc05hbWUgfHwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGN0eC5BUkdTKQoJCQkJYnJlYWsKCQkJY2FzZSBodG1sLkJVVFRPTjogaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWV8fGl0ZW0ubmFtZXx8bWRiLkxJU1Q7IGJyZWFrCgkJCWNhc2UgInVwZmlsZSI6IGl0ZW0udHlwZSA9IGh0bWwuRklMRTsgYnJlYWsKCQkJY2FzZSBodG1sLlVQTE9BRDogaXRlbS50eXBlID0gaHRtbC5GSUxFLCBpbnB1dC5uYW1lID0gaHRtbC5VUExPQUQ7IGJyZWFrCgkJCWRlZmF1bHQ6CgkJfQoJCXJldHVybiBpbnB1dAoJfSwKCWlucHV0czogZnVuY3Rpb24oY2FuLCBsaXN0KSB7CgkJdmFyIF9saXN0ID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQlzd2l0Y2ggKGxpc3RbaV0pIHsgY2FzZSAiIjogX2xpc3QucHVzaCgiIik7IGJyZWFrCgkJCQljYXNlIGljZS5BVVRPOgoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAibGlzdCJ9KQoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAiYmFjayJ9KQoJCQkJCWJyZWFrCgkJCQljYXNlIG1kYi5QQUdFOgoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogbWRiLkxJTUlULCB2YWx1ZTogY2FuLl9tc2cuT3B0aW9uKG1kYi5MSU1JVCl9KQoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogbWRiLk9GRkVORCwgdmFsdWU6IGNhbi5fbXNnLk9wdGlvbihtZGIuT0ZGRU5EKX0pCgkJCQkJX2xpc3QucHVzaChtZGIuUFJFViwgbWRiLk5FWFQpCgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6CgkJCQkJKGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IGNhbi5jb3JlLlNwbGl0SW5wdXQobGlzdFtpXSwgaHRtbC5CVVRUT04pOwoJCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuU0VMRUNUKSB7CgkJCQkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IHRhcmdldC52YWx1ZSA9IGl0ZW0udmFsdWV8fGl0ZW0udmFsdWVzWzBdLCB0YXJnZXQub25jaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ucnVuKGV2ZW50KSB9IH0KCQkJCQkJfQoJCQkJCQlpdGVtLmFjdGlvbiAmJiAoZnVuY3Rpb24oKSB7IGl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCkgfSB9KSgpCgkJCQkJCWl0ZW0udHlwZSA9PSBodG1sLkJVVFRPTj8gX2xpc3QucHVzaChsaXN0W2ldKTogX2xpc3QucHVzaChpdGVtKQoJCQkJCX0pICgpCgkJCX0KCQl9CgkJcmV0dXJuIF9saXN0Cgl9LAoKCXN0eWxlRGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkRJU1BMQVksIHZhbHVlKSwgdGFyZ2V0LnN0eWxlLmRpc3BsYXkKCX0sCglzdHlsZUhlaWdodDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkhFSUdIVCwgdmFsdWUpLCB0YXJnZXQub2Zmc2V0SGVpZ2h0Cgl9LAoJc3R5bGVXaWR0aDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLldJRFRILCB2YWx1ZSksIHRhcmdldC5vZmZzZXRXaWR0aAoJfSwKCXN0eWxlQ2xhc3M6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgewoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge2NsYXNzTmFtZTogdmFsdWV9KQoJfSwKCXN0eWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgc3R5bGUpIHsgdmFyIHZhbHVlID0ge30KCQlmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgewoJCQlpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7c3R5bGU6IGFyZ3VtZW50c1tpLS1dfSkKCQkJfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuVU5ERUZJTkVEKSB7CgkJCQljb250aW51ZQoJCQl9IGVsc2UgewoJCQkJdmFsdWVbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdCgkJCX0KCQl9CgkJcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3N0eWxlOiB2YWx1ZX0pLCB2YWx1ZQoJfSwKCUtleXM6IGZ1bmN0aW9uKCkgeyB2YXIgbGlzdCA9IFtdIC8vIEZTIFNQIEdUIFBUCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJaWYgKHR5cGVvZiB2ID09IGxhbmcuT0JKRUNUKSB7CgkJCQlmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKyspIHsKCQkJCQlpZiAodHlwZW9mIHZbal0gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCQkJZm9yICh2YXIgayA9IDA7IGsgPCB2W2pdLmxlbmd0aDsgaysrKSB7CgkJCQkJCQlpZiAodHlwZW9mIHZbal1ba10gPT0gbGFuZy5PQkpFQ1QpIHsgdltqXVtrXSA9IHZbal1ba10uam9pbihpY2UuUFQpIH0KCQkJCQkJfQoJCQkJCQl2W2pdID0gdltqXS5qb2luKGljZS5HVCkKCQkJCQl9CgkJCQl9CgkJCQlsaXN0LnB1c2godi5qb2luKGljZS5TUCkpCgkJCX0gZWxzZSB7CgkJCQlsaXN0LnB1c2godisiIikKCQkJfQoJCX0KCQlyZXR1cm4gbGlzdC5qb2luKGljZS5GUykKCX0sCgljc3M6IGZ1bmN0aW9uKHRleHQpIHsKCQl2YXIgc3R5bGVTaGVldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIikKCQlzdHlsZVNoZWV0LnR5cGUgPSAidGV4dC9jc3MiLCBzdHlsZVNoZWV0LmlubmVyVGV4dCA9IHRleHQKCQlkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpCgl9LAoJdGFnaXM6IGZ1bmN0aW9uKHR5cGUsIHRhcmdldCkgeyB0eXBlID0gdHlwZW9mIHR5cGUgPT0gbGFuZy5PQkpFQ1Q/IHR5cGU6IFt0eXBlXQoJCWlmICh0eXBlLmluZGV4T2YodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkgeyByZXR1cm4gdHJ1ZSB9Cgl9LAoJb2Zmc2V0VG9wOiBmdW5jdGlvbihpdGVtKSB7IHZhciByZXMgPSAwCgkJd2hpbGUgKGl0ZW0pIHsgcmVzICs9IGl0ZW0ub2Zmc2V0VG9wfHwwLCBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQlyZXR1cm4gcmVzCgl9LAoJb2Zmc2V0TGVmdDogZnVuY3Rpb24oaXRlbSkgeyB2YXIgcmVzID0gMAoJCS8vIGlmIChpdGVtLm9mZnNldExlZnQpIHsgcmV0dXJuIGl0ZW0ub2Zmc2V0TGVmdCB9CgkJd2hpbGUgKGl0ZW0pIHsgcmVzICs9IGl0ZW0ub2Zmc2V0TGVmdHx8MCwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZSB9CgkJcmV0dXJuIHJlcwoJfSwKCWVkaXRhYmxlOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG9rKSB7IGl0ZW0uc2V0QXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiLCBvaykgfSwKCWRyYWdnYWJsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBvaykgeyBpdGVtLnNldEF0dHJpYnV0ZSgiZHJhZ2dhYmxlIiwgb2spIH0sCgoJQXBwZW5kVnVlOiBmdW5jdGlvbihjYW4sIG1ldGEsIGxpc3QsIHRhcmdldCkgewoJCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS92dWVAMi9kaXN0L3Z1ZS5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLnJlcXVpcmUoWyJodHRwczovL3VucGtnLmNvbS9lbGVtZW50LXVpL2xpYi9pbmRleC5qcyIsICJodHRwczovL3VucGtnLmNvbS9lbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9pbmRleC5jc3MiXSwgZnVuY3Rpb24oKSB7CgkJCQluZXcgVnVlKGNhbi5iYXNlLkNvcHkoe2VsOiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCBbe3R5cGU6ICJkaXYiLCBpbm5lcjogbGlzdH1dKS5maXJzdH0sIG1ldGEpKQoJCQl9KQoJCX0pCgl9LAoJaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZm9yZSwgcGFyZW50KSB7IHBhcmVudCA9IHBhcmVudHx8YmVmb3JlLnBhcmVudE5vZGUKCQl2YXIgaXRlbSA9IGNhbi5iYXNlLmlzQXJyYXkobGlzdCk/IGNhbi5wYWdlLkFwcGVuZChjYW4sIHBhcmVudCwgbGlzdCkuZmlyc3Q6IGxpc3QKCQlyZXR1cm4gYmVmb3JlICYmIHBhcmVudC5pbnNlcnRCZWZvcmUoaXRlbSwgYmVmb3JlKSwgaXRlbQoJfSwKfSkK",
        "usr/volcanos/lib/user.js": "Vm9sY2Fub3MoInVzZXIiLCB7aGVscDogIueUqOaIt+aTjeS9nCIsIGluZm86IHt9LCBhZ2VudDogewoJCXNjYW5RUkNvZGU6IGZ1bmN0aW9uKGNiLCBjYW4pIHsKCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCBuYW1lOiAidGV4dCIsIHRleHQ6ICIifV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJCWNiKGxpc3RbMF0sIGNhbi5iYXNlLlBhcnNlSlNPTihsaXN0WzBdKSkKCQkJfSkKCQl9LAoJCWdldExvY2F0aW9uOiBmdW5jdGlvbihjYikgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJaWYgKGNhbGwuX3JlcykgeyByZXR1cm4gY2IoY2FsbC5fcmVzKSB9CgoJCQluYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKGZ1bmN0aW9uKHJlcykgewoJCQkJY2IoY2FsbC5fcmVzID0ge2xhdGl0dWRlOiBwYXJzZUludChyZXMuY29vcmRzLmxhdGl0dWRlKjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQocmVzLmNvb3Jkcy5sb25naXR1ZGUqMTAwMDAwKX0pCgkJCX0sIGZ1bmN0aW9uKHNvbWUpIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKHt0eXBlOiAidW5rbm93biIsIG5hbWU6ICJ1bmtub3duIiwgbGF0aXR1ZGU6IDM5OTg0MTIsIGxvbmdpdHVkZTogMTE2MzA3NDh9KQoJCQl9ICk7CgkJfSwKCQlvcGVuTG9jYXRpb246IGZ1bmN0aW9uKG1zZykgewoJCQl3aW5kb3cub3BlbigiaHR0cHM6Ly9tYXAuYmFpZHUuY29tL3NlYXJjaC8iK2VuY29kZVVSSUNvbXBvbmVudChtc2cuT3B0aW9uKG1kYi5URVhUKSkKCQkJCSsiL0AxMjk1ODc1MC4wODUsNDgyNTc4NS41NSwxNno/cXVlcnl0eXBlPXMmZGFfc3JjPXNoYXJldXJsJndkPSIrZW5jb2RlVVJJQ29tcG9uZW50KG1zZy5PcHRpb24obWRiLlRFWFQpKSkKCQl9LAoJCWNob29zZUltYWdlOiBmdW5jdGlvbihjYikgewoJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYihbXSkKCQl9LAoJfSwKCWlzV2VpWGluOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1pY3JvTWVzc2VuZ2VyIikgPiAtMSwKCWlzSVBob25lOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoImlQaG9uZSIpID4gLTEsCglpc01vYmlsZTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNb2JpbGUiKSA+IC0xLAoJaXNNYWNPU1g6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWFjIE9TIFgiKSA+IC0xLAoJaXNXaW5kb3dzOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIldpbmRvd3MiKSA+IC0xLAoJaXNJRTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNU0lFIikgPiAtMSwKCWlzRXh0ZW5zaW9uOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wcm90b2NvbCAmJiBsb2NhdGlvbi5wcm90b2NvbCA9PSAiY2hyb21lLWV4dGVuc2lvbjoiLAoJaXNMb2NhbEZpbGU6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnByb3RvY29sICYmIGxvY2F0aW9uLnByb3RvY29sID09ICJmaWxlOiIsCglpc0xhbmRzY2FwZTogZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA+IHdpbmRvdy5pbm5lckhlaWdodCB9LAoJaXNQb3J0cmFpdDogZnVuY3Rpb24oKSB7IHJldHVybiB3aW5kb3cuaW5uZXJXaWR0aCA8IHdpbmRvdy5pbm5lckhlaWdodCB9LAoJbW9kOiB7CgkJaXNQb2Q6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMCB8fCBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIveC8iKSA9PSAwKSwKCQlpc0RpdjogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L2Rpdi8iKSA9PSAwKSwKCQlpc0NtZDogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwICYmIGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jbWQvIikgPiAwIHx8CgkJCWxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L2NtZC8iKSA9PSAwIHx8IGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9oZWxwLyIpID09IDApLAoJCWlzV2ViOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDAgJiYgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL3dlYnNpdGUvIikgPiAwIHx8CgkJCWxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3dlYnNpdGUvIikgPT0gMCksCgl9LAoKCWFsZXJ0OiBmdW5jdGlvbih0ZXh0KSB7IGFsZXJ0KEpTT04uc3RyaW5naWZ5KHRleHQpKSB9LAoJY29uZmlybTogZnVuY3Rpb24odGV4dCkgeyByZXR1cm4gY29uZmlybShKU09OLnN0cmluZ2lmeSh0ZXh0KSkgfSwKCXByb21wdDogZnVuY3Rpb24odGlwLCBkZWYsIGNiLCBzaWxlbnQpIHsgKHRleHQgPSBzaWxlbnQ/IGRlZjogcHJvbXB0KHRpcCwgZGVmfHwiIikpICE9IHVuZGVmaW5lZCAmJiB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYih0ZXh0KTsgcmV0dXJuIHRleHQgfSwKCXJlbG9hZDogZnVuY3Rpb24oZm9yY2UpIHsgKGZvcmNlIHx8IGNvbmZpcm0oIumHjeaWsOWKoOi9vemhtemdou+8nyIpKSAmJiBsb2NhdGlvbi5yZWxvYWQoKSB9LAoJanVtcHM6IGZ1bmN0aW9uKHVybCkgeyBsb2NhdGlvbi5ocmVmID0gdXJsIH0sCglvcGVuOiBmdW5jdGlvbih1cmwpIHsgd2luZG93Lm9wZW4odXJsKSB9LAoJY2xvc2U6IGZ1bmN0aW9uKHVybCkgeyB3aW5kb3cuY2xvc2UoKSB9LAoJdGltZTogZnVuY3Rpb24oY2FuLCB0aW1lLCBmbXQpIHsgdmFyIG5vdyA9IGNhbi5iYXNlLkRhdGUodGltZSkKCQl2YXIgbGlzdCA9IGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIj8gWyJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiXTogWyLlkajml6UiLCAi5ZGo5LiAIiwgIuWRqOS6jCIsICLlkajkuIkiLCAi5ZGo5ZubIiwgIuWRqOS6lCIsICLlkajlha0iXQoJCXJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsIChmbXR8fCIleS0lbS0lZCAlSDolTTolUyIpLnJlcGxhY2UoIiV3IiwgbGlzdFtub3cuZ2V0RGF5KCldKSkKCX0sCglhcmdzOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsKCQkJcmV0dXJuIGNhbi5iYXNlLk9iaihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShjdHguQVJHUyksIHt9KQoJCX0KCQlyZXR1cm4ge30KCX0sCgoJdGl0bGU6IGZ1bmN0aW9uKHRleHQpIHsKCQlpZiAod2luZG93LndlYnZpZXcpIHsgcmV0dXJuIHRpdGxlKHRleHQpIH0KCQlyZXR1cm4gdGV4dCAmJiAoZG9jdW1lbnQudGl0bGUgPSBWb2xjYW5vcy5tZXRhLmFyZ3MubmFtZXx8dGV4dCksIGRvY3VtZW50LnRpdGxlCgl9LAoJdG9waWM6IGZ1bmN0aW9uKGNhbiwgbmFtZSkgeyBjYW4uYmFzZS5pc0FycmF5KG5hbWUpICYmIChuYW1lID0gY2FuLmJhc2Uuam9pbihuYW1lKSkKCQljYW4udXNlci5pc01vYmlsZSAmJiAobmFtZSArPSAiIG1vYmlsZSIpICYmIGNhbi51c2VyLmlzTGFuZHNjYXBlKCkgJiYgKG5hbWUgKz0gIiBsYW5kc2NhcGUiKQoJCWNhbi51c2VyLmxhbmd1YWdlKGNhbikgJiYgKG5hbWUgKz0gIiAiK2Nhbi51c2VyLmxhbmd1YWdlKGNhbikpCgkJY2FuLkNvbmYoImRpc3BsYXkiKSAmJiAobmFtZSArPSAiICIrY2FuLkNvbmYoImRpc3BsYXkiKSkKCQljYW4udXNlci5tb2QuaXNDbWQgJiYgKG5hbWUgKz0gIiBzaW1wbGUiKQoJCWNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgbmFtZSkKCX0sCglsYW5ndWFnZTogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCAibGFuZ3VhZ2UiKSB9LAoJdHJhbnM6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbGlzdCkgeyBpZiAoY2FuLmJhc2UuaXNPYmplY3QodGV4dCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0odGV4dCwgZnVuY3Rpb24oaywgdikgeyBjYW4uY29yZS5WYWx1ZShjYW4uX3RyYW5zLCBrLCB2KSB9KQoJCX0KCgkJaWYgKGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIikgeyByZXR1cm4gdGV4dCB9CgkJaWYgKGNhbi5iYXNlLmlzRnVuY3Rpb24odGV4dCkpIHsgdGV4dCA9IHRleHQubmFtZXx8IiIgfQoJCXJldHVybiBsaXN0JiZsaXN0W3RleHRdIHx8IGNhbi5Db25mKCJ0cmFucy4iK3RleHQpIHx8IGNhbi5Db25mKCJmZWF0dXJlLl90cmFucy4iK3RleHQpIHx8IGNhbi5fdHJhbnMmJmNhbi5fdHJhbnNbdGV4dF0gfHwgewoJCQkiY3JlYXRlIjogIuWIm+W7uiIsICJyZW1vdmUiOiAi5Yig6ZmkIiwgImluc2VydCI6ICLmt7vliqAiLCAiZGVsZXRlIjogIuWIoOmZpCIsICJtb2RpZnkiOiAi57yW6L6RIiwKCQkJImlucHV0cyI6ICLooaXlhagiLCAicHJ1bmVzIjogIua4heeQhiIsICJleHBvcnQiOiAi5a+85Ye6IiwgImltcG9ydCI6ICLlr7zlhaUiLAoJCQkibGlzdCI6ICLmn6XnnIsiLCAiYmFjayI6ICLov5Tlm54iLCAicnVuIjogIuaJp+ihjCIsICJkb25lIjogIuWujOaIkCIsICJzaGFyZSI6ICLlhbHkuqsiLAoJCQkiZWRpdCI6ICLnvJbovpEiLCAic2F2ZSI6ICLkv53lrZgiLCAiY29weSI6ICLlpI3liLYiLCAic2hvdyI6ICLmmL7npLoiLCAiaGlkZSI6ICLpmpDol48iLAoJCQkicHJvamVjdCI6ICLpobnnm64iLCAicHJvZmlsZSI6ICLor6bmg4UiLCAiYWN0aW9ucyI6ICLlj4LmlbAiLAoJCQkiZG93bmxvYWQiOiAi5LiL6L29IiwgInRvaW1hZ2UiOiAi5oiq5Zu+IiwKCQkJInBsdWdpbiI6ICLmj5Lku7YiLAoJCQkicHJldiI6ICLkuIrkuIDpobUiLCAibmV4dCI6ICLkuIvkuIDpobUiLAoKCQkJIkNsb3NlIjogIuWFs+mXrSIsCgkJCSJDbG9zZSBvdGhlcnMiOiAi5YWz6Zet5YW25a6DIiwKCQkJIkNsb3NlIGFsbCI6ICLlhbPpl63miYDmnIkiLAoKCQkJInRyYXNoIjogIuWIoOmZpCIsCgkJCSJvcGVuIjogIuaJk+W8gCIsICJjbG9zZSI6ICLlhbPpl60iLAoJCQkic3RhcnQiOiAi5ZCv5YqoIiwgInN0b3AiOiAi5YGc5q2iIiwKCQkJImJlZ2luIjogIuW8gOWniyIsICJlbmQiOiAi57uT5p2fIiwKCQkJImNsZWFyIjogIua4heepuiIsICJyZWZyZXNoIjogIuWIt+aWsCIsCgkJCSJzdWJtaXQiOiAi5o+Q5LqkIiwgImNhbmNlbCI6ICLlj5bmtogiLAoJCQkibGFiZWwiOiAi5qCH562+IiwgImV4ZWMiOiAi5omn6KGMIiwKCQl9W3RleHRdfHx0ZXh0Cgl9LAoJdG9hc3RTY3JpcHQ6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUpIHsKCQl2YXIgdWkgPSBjYW4udXNlci50b2FzdChjYW4sIHt0aXRsZTogdGl0bGUsIGR1cmF0aW9uOiAtMSwgd2lkdGg6IC0zMDAsIGNvbnRlbnQ6IGNvbnRlbnQsIGFjdGlvbjogW2NsaS5DTE9TRV19KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdWkuX3RhcmdldCkKCX0sCgl0b2FzdENvbmZpcm06IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUsIGFjdGlvbikgewoJCXJldHVybiBjYW4udXNlci50b2FzdChjYW4sIHt0aXRsZTogdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnQsIGFjdGlvbjogYWN0aW9ufHxbY2xpLkNMT1NFXSwgZHVyYXRpb246IC0xLCB3aWR0aDogLTMwMH0pCgl9LAoJdG9hc3RQcm9jZXNzOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sIGNvbnRlbnQsIHRpdGxlfHxpY2UuUFJPQ0VTUywgLTEpIH0sCgl0b2FzdFN1Y2Nlc3M6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUpIHsgcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgY29udGVudCwgdGl0bGV8fGljZS5TVUNDRVNTKSB9LAoJdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUsIGR1cmF0aW9uLCBwcm9ncmVzcykgewoJCXZhciBtZXRhID0gY2FuLmJhc2UuaXNPYmplY3QoY29udGVudCk/IGNvbnRlbnQ6IHtjb250ZW50OiBjb250ZW50LCB0aXRsZTogdGl0bGV8fGNhbi5faGVscCwgZHVyYXRpb246IGR1cmF0aW9uLCBwcm9ncmVzczogcHJvZ3Jlc3N9CgkJdmFyIHdpZHRoID0gbWV0YS53aWR0aHx8NDAwLCBoZWlnaHQgPSBtZXRhLmhlaWdodHx8MTAwOyBpZiAod2lkdGggPCAwKSB7IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggKyB3aWR0aCB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksICBbe3ZpZXc6IGNoYXQuVE9BU1QsIHN0eWxlOiB7CgkJCWxlZnQ6ICh3aW5kb3cuaW5uZXJXaWR0aC13aWR0aCkvMiwgd2lkdGg6IHdpZHRoLCBib3R0b206IDEwMCwKCQl9LCBsaXN0OiBbCgkJCXt0ZXh0OiBbbWV0YS50aXRsZXx8IiIsIGh0bWwuRElWLCBodG1sLlRJVExFXSwgdGl0bGU6ICLngrnlh7vlpI3liLYiLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBtZXRhLnRpdGxlKQoJCQl9fSwKCQkJe3ZpZXc6ICJkdXJhdGlvbiIsIHRpdGxlOiAi54K55Ye75YWz6ZetIiwgb25jbGljazogZnVuY3Rpb24oKSB7IGFjdGlvbi5jbG9zZSgpIH19LAoJCQljYW4uYmFzZS5pc09iamVjdChtZXRhLmNvbnRlbnQpPyBtZXRhLmNvbnRlbnQ6IHt0ZXh0OiBbbWV0YS5jb250ZW50fHwi5omn6KGM5oiQ5YqfIiwgaHRtbC5ESVYsICJjb250ZW50Il19LAoKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OfSwgbWV0YS5wcm9ncmVzcyAhPSB1bmRlZmluZWQgJiYge3ZpZXc6ICJwcm9ncmVzcyIsIHN0eWxlOiB7d2lkdGg6IHdpZHRofSwgbGlzdDogWwoJCQkJe3ZpZXc6ICJjdXJyZW50Iiwgc3R5bGU6IHt3aWR0aDogKG1ldGEucHJvZ3Jlc3N8fDApLzEwMCp3aWR0aH19LAoJCQldfSwKCQldIH1dKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBtZXRhLmFjdGlvbiAmJiBtZXRhLmFjdGlvbi5saXN0PyBtZXRhLmFjdGlvbi5saXN0OiBtZXRhLmFjdGlvbnx8WyIiXSwgdWkuYWN0aW9uLCB7CgkJCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCXZhciBjYiA9IG1ldGEuYWN0aW9uW2J1dHRvbl18fG1ldGEuYWN0aW9uOyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBidXR0b24pCgkJCX0sCgkJCW9wZW46IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAobWV0YS5jb250ZW50LmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IGNhbi51c2VyLm9wZW4obWV0YS5jb250ZW50KSB9CgkJCQlpZiAobWV0YS50aXRsZS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjYW4udXNlci5vcGVuKG1ldGEudGl0bGUpIH0KCQkJfSwKCQkJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIGFjdGlvbi5fdGFyZ2V0KSwgYWN0aW9uLnRpbWVyLnN0b3AgPSB0cnVlIH0sCgkJCXRpbWVyOiBjYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDEwMCwgbGVuZ3RoOiAocGFyc2VJbnQobWV0YS5kdXJhdGlvbnx8MTAwMCkpLzEwMH0sIGZ1bmN0aW9uKGV2ZW50LCBpbnRlcnZhbCwgaW5kZXgpIHsKCQkJCWlmIChpbmRleCA+IDMwKSB7IHVpLmR1cmF0aW9uLmlubmVySFRNTCA9IHBhcnNlSW50KGluZGV4LzEwKStpY2UuUFQrKGluZGV4JTEwKSsicy4uLiIgfQoJCQl9LCBmdW5jdGlvbigpIHsgYWN0aW9uLmNsb3NlKCkgfSksIF90YXJnZXQ6IHVpLl90YXJnZXQsIHVpOiB1aSwKCQl9KTsgY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuLCB1aS5fdGFyZ2V0KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlRPQVNULCBjYW4ucmVxdWVzdCh7fSwge3RpbWU6IGNhbi5taXNjLl90aW1lKCksIHRpdGxlOiBtZXRhLnRpdGxlLCBjb250ZW50OiBtZXRhLmNvbnRlbnQsIGZpbGVsaW5lOiBjYW4ubWlzYy5GaWxlTGluZSgyLCAyKX0pKQoJCXJldHVybiAhbWV0YS5hY3Rpb24gJiYgY2FuLm9ubW90aW9uLmZsb2F0LmFkZChjYW4sIGNoYXQuVE9BU1QsIGFjdGlvbiksIGFjdGlvbgoJfSwKCXNoYXJlOiBmdW5jdGlvbihjYW4sIG1zZywgY21kKSB7CgkJY2FuLnJ1bihtc2csIGNtZHx8W2N0eC5BQ1RJT04sIGNoYXQuU0hBUkVdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCB7CgkJCQl0aXRsZTogbXNnLkFwcGVuZChtZGIuTkFNRSksIGR1cmF0aW9uOiAtMSwKCQkJCWNvbnRlbnQ6IG1zZy5BcHBlbmQobWRiLlRFWFQpLCBhY3Rpb246IFtjbGkuQ0xPU0UsIGNsaS5PUEVOXSwKCQkJfSksIGNhbi51c2VyLmNvcHkobXNnLl9ldmVudCwgY2FuLCBtc2cuQXBwZW5kKG1kYi5OQU1FKSkKCQl9KQoJfSwKCWxvZ2luOiBmdW5jdGlvbihjYW4sIGNiLCBtZXRob2QsIGF1dG8pIHsgbWV0aG9kID0gY2FuLmJhc2UuT2JqKG1ldGhvZCwgWyLnmbvlvZUiLCAi5omr56CBIl0pCgkJdmFyIGxpc3QgPSB7CgkJCSLnmbvlvZUiOiBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBkYXRhKSB7CgkJCQljYW4ucnVuKHt9LCBbYWFhLkxPR0lOLCBkYXRhW2h0bWwuVVNFUk5BTUVdLCBkYXRhW2h0bWwuUEFTU1dPUkRdXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJaWYgKG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpIHsKCQkJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIueUqOaIt+WQjeaIluWvhueggemUmeivryIpCgkJCQkJfQoJCQkJfSkKCQkJCXJldHVybiB0cnVlCgkJCX0sIAoJCQki5omr56CBIjogZnVuY3Rpb24oKSB7CgkJCQljYW4ubWlzYy5XU1MoY2FuLCB7dHlwZTogaHRtbC5DSFJPTUUsIGNtZDogInB3ZCJ9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQkJCWlmIChjbWQgPT0gInB3ZCIpIHsKCQkJCQkJcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgYXJnWzJdLCBhcmdbMV0sIC0xKSwgbXNnLlJlcGx5KCkKCQkJCQl9CgkJCQkJaWYgKGNtZCA9PSBpY2UuTVNHX1NFU1NJRCkgewoJCQkJCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgYXJnWzBdKSwgbXNnLlJlcGx5KCksIGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCQkJCX0KCQkJCQljYW4uc2VhcmNoKGV2ZW50LCBtc2dbaWNlLk1TR19ERVRBSUxdfHxbXSwgZnVuY3Rpb24obXNnKSB7IG1zZy5SZXBseSgpIH0pCgkJCQl9KQoJCQl9LAoJCQki5o6I5p2DIjogZnVuY3Rpb24oKSB7CgkJCQljYW4ubWlzYy5XU1MoY2FuLCB7dHlwZTogaHRtbC5DSFJPTUUsIGNtZDogInNzbyIsICJ1c2VyLndlYiI6IGxvY2F0aW9uLmhyZWZ9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQkJCWlmIChjbWQgPT0gInB3ZCIpIHsKCQkJCQkJcmV0dXJuIGxvY2F0aW9uLmhyZWYgPSBhcmdbMV0KCQkJCQl9CgkJCQkJaWYgKGNtZCA9PSBpY2UuTVNHX1NFU1NJRCkgewoJCQkJCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgYXJnWzBdKSwgbXNnLlJlcGx5KCksIGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCQkJCX0KCQkJCQljYW4uc2VhcmNoKGV2ZW50LCBtc2dbaWNlLk1TR19ERVRBSUxdfHxbXSwgZnVuY3Rpb24obXNnKSB7IG1zZy5SZXBseSgpIH0pCgkJCQl9KQoJCQl9LAoJCQki6aOe5LmmIjogZnVuY3Rpb24oKSB7IGxvY2F0aW9uLmhyZWYgPSAiL2NoYXQvbGFyay9zc28iIH0sCgkJfTsgaWYgKGF1dG8pIHsgcmV0dXJuIGxpc3RbIuaOiOadgyJdKCkgfSBlbHNlIGlmIChtZXRob2QubGVuZ3RoID09IDEpIHsgbGlzdFttZXRob2RbMF1dKCk7IHJldHVybiB9CgoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KHt9LCBjYW4sIFt7dHlwZTogaHRtbC5VU0VSTkFNRX0sIHt0eXBlOiBodG1sLlBBU1NXT1JEfV0sIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIGRhdGEpIHsgcmV0dXJuIGxpc3RbYnV0dG9uXShldmVudCwgYnV0dG9uLCBkYXRhKSB9LCBtZXRob2QpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdWkuX3RhcmdldCwge2NsYXNzTmFtZTogImlucHV0IGxvZ2luIiwgc3R5bGU6IHtsZWZ0OiAod2luZG93LmlubmVyV2lkdGgtdWkuX3RhcmdldC5vZmZzZXRXaWR0aCkvMiwgdG9wOiB3aW5kb3cuaW5uZXJIZWlnaHQvNn19KQoJfSwKCWxvZ291dDogZnVuY3Rpb24oY2FuLCBmb3JjZSkgeyBpZiAoZm9yY2V8fGNhbi51c2VyLmNvbmZpcm0oImxvZ291dD8iKSkgewoJCWNhbi5ydW5BY3Rpb24oe30sIGFhYS5MT0dPVVQsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TSEFSRSk/IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuU0hBUkUsICIiKTogY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJfSkKCX0gfSwKCgl0b1BORzogZnVuY3Rpb24oY2FuLCBuYW1lLCB0ZXh0LCBoZWlnaHQsIHdpZHRoKSB7CgkJaWYgKHRleHQuaW5kZXhPZigiPHN2ZyIpICE9IDApIHsKCQkJdGV4dCA9ICc8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+Jyt0ZXh0KyI8L3N2Zz4iCgkJfQoJCXZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGh0bWwuSU1HKQoJCWltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHsKCQkJdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpCgkJCWNhbnZhcy5oZWlnaHQgPSBoZWlnaHQsIGNhbnZhcy53aWR0aCA9IHdpZHRoCgkJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShpbWcsIDAsIDApCgoJCQl2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKQoJCQlhLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKQoJCQlhLmRvd25sb2FkID0gbmFtZSwgYS5jbGljaygpCgkJfSwgaW1nLnNyYyA9ICJkYXRhOmltYWdlL3N2Zyt4bWwsIitlbmNvZGVVUklDb21wb25lbnQodGV4dCkKCX0sCgljb3B5OiBmdW5jdGlvbihldmVudCwgY2FuLCB0ZXh0KSB7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCWlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7IHZhciBvayA9IGZhbHNlCgkJCW5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpLnRoZW4oZnVuY3Rpb24oKSB7IG9rID0gdHJ1ZSB9KTsgaWYgKG9rKSB7CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCB0ZXh0LCAiY29weSBzdWNjZXNzIiksIGNhbi5taXNjLkxvZygiY29weSIsIHRleHQpCgkJCQlyZXR1cm4gdGV4dAoJCQl9CgkJfQoKCQl2YXIgaW5wdXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCB2YWx1ZTogdGV4dH1dKS5maXJzdAoJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGlucHV0KSwgZG9jdW1lbnQuZXhlY0NvbW1hbmQoIkNvcHkiKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaW5wdXQpCgkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgdGV4dCwgImNvcHkgc3VjY2VzcyIpLCBjYW4ubWlzYy5Mb2coImNvcHkiLCB0ZXh0KQoJCXJldHVybiB0ZXh0Cgl9LAoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsgLy8gZXZlbnQgaXRlbSBtZXRhCgkJbWV0YSA9IG1ldGF8fGNhbi5vbmRldGFpbHx8Y2FuLm9uYWN0aW9ufHx7fSwgbGlzdCA9IGxpc3QmJmxpc3QubGVuZ3RoID4gMD8gbGlzdDogbWV0YS5saXN0fHxjYW4uY29yZS5JdGVtKG1ldGEpfHxbXTsgaWYgKGxpc3QubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQljYiA9IGNifHxmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7IHZhciBjYiA9IG1ldGFbYnV0dG9uXXx8bWV0YVsiX2VuZ2luZSJdOyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBjYW4sIGJ1dHRvbikgfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IGNoYXQuQ0FSVEUsIHN0eWxlOiB7bGVmdDogMCwgdG9wOiAwfSwgb25tb3VzZWxlYXZlOiBmdW5jdGlvbihldmVudCkgewoJCQkvLyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KQoJCX0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJcmV0dXJuIGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyBpdGVtID09IiI/IC8qIHNwYWNlICovIHt2aWV3OiAic3BhY2UifTogLyogc3RyaW5nICovIHt2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogY2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkKCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpCgkJCX0gfV0gfTogY2FuLmJhc2UuaXNBcnJheShpdGVtKT8gLyogYXJyYXkgKi8ge3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW1bMF0pKyIgLT4gIn1dLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgc3ViID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgbWV0YSwgaXRlbS5zbGljZSgxKSwgY2IsIGNhcnRlKQoJCQkJY2FydGUuX2Zsb2F0ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhcnRlLl9mbG9hdC5fdGFyZ2V0KSwgY2FydGUuX2Zsb2F0ID0gc3ViCgkJCQljYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHN1Yi5fdGFyZ2V0LCB0cnVlKQoJCQl9IH06IC8qIG9iamVjdCAqLyB7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbS5uYW1lKSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLm5hbWUsIG1ldGEsIGluZGV4KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpCgkJCX0gfV0gfQoJCX0pIH1dICkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJdWkuX3RhcmdldC5vbm1vdXNlb3ZlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSB9CgkJdmFyIGNhcnRlID0ge190YXJnZXQ6IHVpLl90YXJnZXQsIF9wYXJlbnQ6IHBhcmVudCwgbGF5b3V0OiBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpfQoJCXJldHVybiBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGNhcnRlCgl9LAoJY2FydGVSaWdodDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgewoJCXZhciBjYXJ0ZSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpCgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FydGUuX3RhcmdldCwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCBjYXJ0ZS5fdGFyZ2V0LCB0cnVlKSksIGNhcnRlCgl9LAoJY2FydGVDbGllbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsKCQl2YXIgdWkgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuX3RhcmdldCwge2xlZnQ6IGV2ZW50LmNsaWVudFgsIHRvcDogZXZlbnQuY2xpZW50WX0pCgl9LAoKCWlucHV0OiBmdW5jdGlvbihldmVudCwgY2FuLCBmb3JtLCBjYiwgYnV0dG9uKSB7IGlmICghZm9ybSB8fCBmb3JtLmxlbmd0aCA9PSAwKSB7IHJldHVybiBjYigpIH0KCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IFtodG1sLklOUFVUXSwgc3R5bGU6IHtsZWZ0OiAwLCB0b3A6IDB9LCBsaXN0OiBbCgkJCXt2aWV3OiAiY29udGVudCIsIGxpc3Q6IFt7dmlldzogW2h0bWwuT1BUSU9OLCBodG1sLlRBQkxFXSwgbGlzdDogY2FuLmNvcmUuTGlzdChmb3JtLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpdGVtID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IGl0ZW19OiBpdGVtLmxlbmd0aCA+IDA/IHt0eXBlOiBodG1sLlNFTEVDVCwgbmFtZTogaXRlbVswXSwgdmFsdWVzOiBpdGVtLnNsaWNlKDEpfTogaXRlbQoJCQkJaXRlbS50eXBlID0gaXRlbS50eXBlfHwoaXRlbS52YWx1ZXM/IGh0bWwuU0VMRUNUOiBpdGVtLm5hbWUgPT0gaHRtbC5URVhUPyBodG1sLlRFWFRBUkVBOiBodG1sLlRFWFQpCgoJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJCWl0ZW0ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQkJCXZhciBfbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRSwgYWN0aW9uOiBtc2cuT3B0aW9uKGh0bWwuQUNUSU9OKX0sIG1zZywgY2FuLk9wdGlvbigpKQoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS50YWJsZSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkJaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgX21zZy5PcHRpb24oaXRlbS5uYW1lLCBpdGVtLnZhbHVlKQoJCQkJCQl9KQoJCQkJCQljYW4ucnVuKGV2ZW50LCBjbWRzLCBjYiwgdHJ1ZSkKCQkJCQl9CgoJCQkJCWlmIChpdGVtLm5hbWUgIT0gImFjdGlvbiIgJiYgaXRlbS5uYW1lKSB7CgkJCQkJCXRhcmdldC52YWx1ZSA9IG1zZy5PcHRpb24oaXRlbS5uYW1lKXx8Y2FuLk9wdGlvbihpdGVtLm5hbWUpfHx0YXJnZXQudmFsdWV8fCIiCgkJCQkJfQoJCQkJCWl0ZW0ubW9kZSA9ICJzaW1wbGUiCgkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlVTRVJOQU1FKSB7IHJldHVybiB9CgkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlBBU1NXT1JEKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCkKCQkJCX0KCgkJCQkvLyByZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dHlwZTogaHRtbC5URCwgbGlzdDogW3t0ZXh0OiBpdGVtLl90cmFuc3x8Y2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtLm5hbWUpfHwiIn1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFtjYW4ucGFnZS5pbnB1dChjYW4sIGl0ZW0pXX0gXX0KCQkJCXJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRELCBsaXN0OiBbe3RleHQ6IGl0ZW0ubmFtZXx8IiJ9XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtKV19IF19CgkJCX0pfV19LCB7dmlldzogaHRtbC5BQ1RJT059LAoJCV19XSkKCgkJdmFyIGxheW91dCA9IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgYnV0dG9ufHxbaHRtbC5TVUJNSVQsIGh0bWwuQ0FOQ0VMXSwgdWkuYWN0aW9uLCB7CgkJCWZvY3VzOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5maXJzdCwgaHRtbC5JTlBVVF9BUkdTKVswXS5mb2N1cygpIH0sCgkJCWNhbmNlbDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkgfSwKCQkJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGFjdGlvbi5zdWJtaXQoZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQlzdWJtaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgZGF0YSA9IHt9LCBhcmdzID0gW10sIGxpc3QgPSBbXQoJCQkJbGlzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLnRhYmxlLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmV0dXJuIGl0ZW0ubmFtZSAmJiBpdGVtLnZhbHVlICYmIGFyZ3MucHVzaChpdGVtLm5hbWUsIGl0ZW0udmFsdWUpLCBkYXRhW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlCgkJCQl9KQoJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9KQoJCQkJIWNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7ZXZlbnQ6IGV2ZW50LCBidXR0b246IGJ1dHRvbiwgZGF0YTogZGF0YSwgbGlzdDogbGlzdCwgYXJnczogYXJnc30pICYmIGFjdGlvbi5jYW5jZWwoKQoJCQkJLy8gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiAhY2IoZXZlbnQsIGJ1dHRvbiwgZGF0YSwgbGlzdCwgYXJncykgJiYgYWN0aW9uLmNhbmNlbCgpCgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwgX3RhcmdldDogdWkuX3RhcmdldCwKCQl9KQoJCWlmIChidXR0b24gPT09ICB0cnVlKSB7IHJldHVybiBhY3Rpb24uc3VibWl0KGV2ZW50LCBjYW4sICJzdWJtaXQiKSwgYWN0aW9uIH0KCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuX3RhcmdldCwgaHRtbC5JTlBVVF9BUkdTLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpbmRleCA9PSAwICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBpdGVtKSB9KQoJCX0pCgkJcmV0dXJuIGFjdGlvbgoJfSwKCXNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdHlwZSwgZmllbGRzLCBjYiwgY2JzKSB7CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmllbGRzOiBmaWVsZHN8fCJ0eXBlLG5hbWUsdGV4dCJ9KQoJCWNhbi5zZWFyY2gobXNnLCBbIlNlYXJjaC5vbmltcG9ydC5zZWxlY3QiLCB0eXBlLCAiIiwgIiJdLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5jb3JlLk5leHQobGlzdCwgY2IsIGNic3x8ZnVuY3Rpb24oKSB7CgkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgl9LAoJdXBsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBiZWdpbiA9IG5ldyBEYXRlKCkKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3ZpZXc6IGh0bWwuVVBMT0FELCBzdHlsZToge2xlZnQ6IDAsIHRvcDogMH0sIGxpc3Q6IFsKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OfSwge3ZpZXc6IGh0bWwuT1VUUFVULCBsaXN0OiBbe3ZpZXc6ICJwcm9ncmVzcyJ9XX0sCgkJCXt2aWV3OiBodG1sLlNUQVRVUywgbGlzdDogW3t2aWV3OiBodG1sLlNIT1d9LCB7dmlldzogImNvc3QifSwge3ZpZXc6ICJzaXplIn1dfSwKCQldfV0pOyBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsKCQkJe3R5cGU6IGh0bWwuVVBMT0FELCBvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWFjdGlvbi5zaG93KGV2ZW50LCAwLCBldmVudC50YXJnZXQuZmlsZXNbMF0uc2l6ZSwgMCkKCQkJfX0sIGNsaS5DTE9TRSwKCQldLCB1aS5hY3Rpb24sIHsKCQkJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpIH0sCgkJCWJlZ2luOiBmdW5jdGlvbihldmVudCkgeyBiZWdpbiA9IG5ldyBEYXRlKCkKCQkJCXZhciB1cGxvYWQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5hY3Rpb24sICJpbnB1dFt0eXBlPWZpbGVdIikKCQkJCWlmICh1cGxvYWRbMF0uZmlsZXMubGVuZ3RoID09IDApIHsgcmV0dXJuIHVwbG9hZFswXS5mb2N1cygpIH0KCgkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSwge19oYW5kbGU6ICJ0cnVlIn0pCgkJCQltc2cuX3VwbG9hZCA9IHVwbG9hZFswXS5maWxlc1swXSwgbXNnLl9wcm9ncmVzcyA9IGFjdGlvbi5zaG93CgoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKSwgY2FuLlVwZGF0ZSgpLCBhY3Rpb24uY2xvc2UoKQoJCQkJfSkKCQkJfSwKCQkJc2hvdzogZnVuY3Rpb24gKGV2ZW50LCB2YWx1ZSwgdG90YWwsIGxvYWRlZCkgeyBub3cgPSBuZXcgRGF0ZSgpCgkJCQl2YWx1ZSA9PSAwICYmIGFjdGlvbi5iZWdpbihldmVudCkKCgkJCQl1aS5zaG93LmlubmVySFRNTCA9IHZhbHVlKyIlIgoJCQkJdWkuY29zdC5pbm5lckhUTUwgPSBjYW4uYmFzZS5EdXJhdGlvbihub3cgLSBiZWdpbikKCQkJCXVpLnNpemUuaW5uZXJIVE1MID0gY2FuLmJhc2UuU2l6ZShsb2FkZWQpK2ljZS5QUytjYW4uYmFzZS5TaXplKHRvdGFsKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wcm9ncmVzcywge3dpZHRoOiB2YWx1ZSoodWkub3V0cHV0Lm9mZnNldFdpZHRoLTIpLzEwMH0pCgkJCX0sCgkJfSk7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmFjdGlvbiwgImlucHV0W3R5cGU9ZmlsZV0iKVswXS5jbGljaygpCgoJCXJldHVybiBhY3Rpb24KCX0sCglkb3dubG9hZDogZnVuY3Rpb24oY2FuLCBwYXRoLCBuYW1lLCBleHQpIHsKCQl2YXIgYSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dHlwZTogaHRtbC5BLCBocmVmOiBwYXRoLCBkb3dubG9hZDogY2FuLmNvcmUuS2V5cyhuYW1lLCBleHQpfHxwYXRoLnNwbGl0KGljZS5QUykucG9wKCl9XSkuZmlyc3QKCQlhLmNsaWNrKCksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGEpCgkJcmV0dXJuIHBhdGgKCX0sCglkb3dubG9hZHM6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgZXh0KSB7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCXJldHVybiBjYW4udXNlci5kb3dubG9hZChjYW4sIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW3RleHRdKSksIG5hbWUsIGV4dCkKCX0sCgljYW1lcmE6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgewoJCW5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB0cnVlfSwgY2IsIGZ1bmN0aW9uKGVycm9yKSB7CgkJCWNhbi5taXNjLkxvZyhlcnJvcikKCQl9KQoJfSwKCWxvY2FsU3RvcmFnZTogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7CgkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgeyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSkgfQoJCXJldHVybiBjYW4uYmFzZS5PYmoobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSwge30pCgl9LAp9KQo=",
        "usr/volcanos/page/cache.css": "LyogL3BhbmVsL2FjdGlvbi5jc3MgKi8KZmllbGRzZXQuQWN0aW9uIHsgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDExNCwgMTUzLCAxNjIsIDAuNTQpOyBtaW4td2lkdGg6MTYwcHg7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2Yjsgd2lkdGg6aW5oZXJpdDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQ6IzY0OTVlZDYzOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZDojNjQ5NWVkNjM7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dD5maWVsZHNldD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4uc2VsZWN0IHsgZGlzcGxheTpibG9jazsgfQoKZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzphdXRvOyB9CgpmaWVsZHNldC5BY3Rpb24uZnJlZT5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHBvc2l0aW9uOmFic29sdXRlOyB9CmZpZWxkc2V0LkFjdGlvbi5mcmVlPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luLnNlbGVjdCB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLmZsb3c+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5wYW5lbC5jbWQ+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4geyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmZpZWxkc2V0LnBhbmVsLmNtZD5kaXYub3V0cHV0PmZpZWxkc2V0LnBsdWdpbj5sZWdlbmQgeyBwYWRkaW5nOjAgMTBweDsgbWFyZ2luLXJpZ2h0OjNweDsgZmxvYXQ6bGVmdDsgfQoKZmllbGRzZXQuQWN0aW9uPmRpdi5wcm9qZWN0LnRvZ2dsZSB7CgliYWNrZ3JvdW5kLWNvbG9yOmNvcm5zaWxrOyBvcGFjaXR5OjAuNDsgY29sb3I6dGVhbDsgZm9udC1zaXplOiAyOHB4OyBwYWRkaW5nLXRvcDogNTBweDsgaGVpZ2h0OiAxMDBweDsgd2lkdGg6MjBweDsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDMwJTsKCWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjIwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjIwcHg7Cn0KCmRpdi5oZWFkIHsgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHg7IGhlaWdodDo0MnB4OyBjbGVhcjpib3RoOyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSB7IGZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgZGl2Lm5hbWUgeyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmhlYWQgZGl2LnVzZXJuYW1lIGRpdi5pY29uIHsgZmxvYXQ6bGVmdDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgaW1nIHsgaGVpZ2h0OjQycHg7IH0KZGl2LmhlYWQgZGl2Lm1lbnUgeyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoxMHB4OyBmbG9hdDpsZWZ0OyB9CmRpdi5oZWFkPmRpdi5tZW51OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB9CmRpdi5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB3aWR0aDoxNjBweDsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmRpdi5sZWZ0IGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgfQpkaXYubGVmdCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgfQpkaXYubGVmdCBkaXYudXNlcm5hbWUgZGl2IHsgY29sb3I6d2hpdGU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmxlZnQgZGl2LnVzZXJuYW1lIGltZyB7IHdpZHRoOjEyMHB4OyB9CmRpdi5tYWluIGlmcmFtZSB7IGJvcmRlcjowOyB9CmRpdi5tYWluIGlucHV0W3R5cGU9YnV0dG9uXSB7IHBhZGRpbmc6MCAyMHB4OyB9CmRpdi5tYWluIHsgYmFja2dyb3VuZC1jb2xvcjojY2NjY2NjOyBjb2xvcjpibGFjazsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGxlZ2VuZCB7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gc2VsZWN0IHsgb3V0bGluZTpub25lOyBib3gtc2hhZG93Om5vbmU7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGZvcm0ub3B0aW9uIHsgZGlzcGxheTpibG9jazsgY2xlYXI6Ym90aDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gZm9ybS5vcHRpb24gZGl2Lml0ZW0geyBtYXJnaW46NXB4OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBkaXYuYWN0aW9uIGRpdi5pdGVtIHsgbWFyZ2luOjVweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gdGFibGUuY29udGVudCB0ciB7IGJvcmRlcjpzb2xpZCAxcHggbGlnaHRncmF5OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyBwYWRkaW5nOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmZvb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjQycHg7IGNsZWFyOmJvdGg7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIHsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMHB4OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBkaXYubmFtZSB7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuZm9vdCBkaXYudXNlcm5hbWUgZGl2Lmljb24geyBmbG9hdDpsZWZ0OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBpbWcgeyBoZWlnaHQ6NDJweDsgfQpkaXYuZm9vdCBkaXYubWVudSB7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmZvb3Q+ZGl2Lm1lbnU6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IH0KCmRpdi50YWJzOmhvdmVyIHsKCWJhY2tncm91bmQtY29sb3I6IzI3MjcyNzsKfQpkaXYudGFicyBkaXYubmFtZSB7CgloZWlnaHQ6NDZweDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKCXBvc2l0aW9uOnN0aWNreTsgdG9wOjVweDsKCXotaW5kZXg6MTsKfQpkaXYudGFicyBkaXYubmFtZSBkaXYuaXRlbSB7Cgljb2xvcjpncmF5OyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY29sb3I6d2hpdGU7CiAJYm9yZGVyLWJvdHRvbTpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzIGRpdi5wYWdlIHsKCW92ZXJmbG93OmF1dG87IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IHsKCXBhZGRpbmc6NXB4OyBwb3NpdGlvbjpzdGlja3k7IHRvcDowcHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IGlucHV0IHsKCWJhY2tncm91bmQtY29sb3I6IzIxMjEyMTsgY29sb3I6d2hpdGU7IGJvcmRlcjowOyBvdXRsaW5lOm5vbmU7IHdpZHRoOjIzMHB4Owp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5pdGVtIHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY2xlYXI6Ym90aDsgZGlzcGxheTpub25lOwp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5saXN0IHsKCXBhZGRpbmctbGVmdDoyMHB4OyBkaXNwbGF5Om5vbmU7IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lmxpc3Quc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzMyMzIzMjsgZGlzcGxheTpibG9jazsKfQpkaXYubGVmdCBkaXYubGlzdCB7CglwYWRkaW5nLWxlZnQ6MjBweDsKfQoKZGl2LnRhYnMubGVmdCBkaXYubmFtZSB7CglmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0gewoJYm9yZGVyLWJvdHRvbTpub25lOyBmbG9hdDpub25lOwp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJvcmRlci1yaWdodDpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2UgewoJd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKIAljbGVhcjpub25lOyBmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2U+ZGl2Lml0ZW0gewoJZGlzcGxheTpibG9jazsKfQoKZGl2LnRhYnMudm9pZCBkaXYubmFtZSB7CglkaXNwbGF5Om5vbmU7Cn0KZGl2LnRhYnMudm9pZCBkaXYucGFnZT5kaXYuaXRlbSB7CglkaXNwbGF5OmJsb2NrOwp9CgoKLyogL3BhbmVsL2Zvb3Rlci5jc3MgKi8KZmllbGRzZXQuRm9vdGVyIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzowIDVweDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCB7IG92ZXJmbG93OmhpZGRlbjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYgeyBwYWRkaW5nOjVweDsgaGVpZ2h0OjIxcHg7IGN1cnNvcjpwb2ludGVyOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzJlNTE1ZjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYudGl0bGUgeyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdi5zdGF0ZSB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LnRvYXN0IHsgYmFja2dyb3VuZC1jb2xvcjpkYXJrY3lhbjsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LmNtZCB7IHBhZGRpbmc6MHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGlucHV0W25hbWU9Y21kXSB7IHdpZHRoOjEyMHB4OyBib3JkZXItcmFkaXVzOjA7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgaW5wdXRbbmFtZT1jbWRdOmZvY3VzIHsgd2lkdGg6MzIwcHg7IH0KCi8qIC9wYW5lbC9oZWFkZXIuY3NzICovCmZpZWxkc2V0LkhlYWRlciB7IGZvbnQtc2l6ZToxLjFyZW07IGhlaWdodDozMXB4OyBvdmVyZmxvdzphdXRvOyBwYWRkaW5nOjAgNXB4OyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IHsgb3ZlcmZsb3c6aGlkZGVuOyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdiB7IHBhZGRpbmc6NXB4OyBoZWlnaHQ6MjFweDsgZmxvYXQ6bGVmdDsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMmU1MTVmOyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi50aXRsZSB7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlIHsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlLmF2YXRhciB7IHBhZGRpbmc6MDsgaGVpZ2h0OjMxcHg7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlLmF2YXRhcj5pbWcgeyBoZWlnaHQ6MzFweDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc2VhcmNoIHsgbWFyZ2luLWxlZnQ6MjBweDsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc2VhcmNoPmlucHV0IHsgbWFyZ2luLXRvcDotNXB4OyBib3JkZXItcmFkaXVzOjA7IH0KCgovKiAvcGFuZWwvcml2ZXIuY3NzICovCmZpZWxkc2V0LlJpdmVyIHsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5SaXZlcj5kaXYuYWN0aW9uIHsgZGlzcGxheTpibG9jazsgcGFkZGluZzowIDEycHg7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCB7IHdpZHRoOjE4MHB4OyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lml0ZW0geyBwYWRkaW5nOjNweCAxNnB4OyBib3JkZXItbGVmdDpzb2xpZCAzcHggIzAwZmZhZTsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IGRpdi5pdGVtIHsgYm9yZGVyLWxlZnQ6c29saWQgM3B4ICNjY2RjNGM7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYubGlzdCB7IHBhZGRpbmctbGVmdDo1cHg7IG1hcmdpbi1sZWZ0OjhweDsgfQoKLyogL3BhbmVsL3NlYXJjaC5jc3MgKi8KZmllbGRzZXQuU2VhcmNoIHsgYmFja2dyb3VuZDojMDQxYTI1YmQ7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MHB4OyB0b3A6MzFweDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LlNlYXJjaCBpbnB1dC53b3JkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2g+ZGl2LnN0YXR1cyB7IGJvcmRlci10b3A6MXB4IHNvbGlkIGRhcmtjeWFuOyB9CgovKiAvcGx1Z2luL2xvY2FsL2NoYXQvZGl2LmNzcyAqLwpmaWVsZHNldC5sYXlvdXQgbGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmxheW91dCBmaWVsZHNldC5wbHVnaW4geyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CgpmaWVsZHNldC5kaXYgZGl2Lm91dHB1dCB0ZCB7IHZlcnRpY2FsLWFsaWduOnRvcDsgfQpmaWVsZHNldC5kaXYgZGl2Lm91dHB1dCBmaWVsZHNldC5zcGFuPmRpdi5vdXRwdXQ+ZmllbGRzZXQgeyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5mb3JtLm9wdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXYgZGl2LnByb2plY3QgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2IGRpdi5wcm9maWxlIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5kaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CgoKLyogL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyLmNzcyAqLwpmaWVsZHNldC5pbm5lcj5mb3JtLm9wdGlvbiBpbnB1dFtuYW1lPXBhdGhdIHsgd2lkdGg6ODBweDsgfQpmaWVsZHNldC5pbm5lcj5mb3JtLm9wdGlvbiBpbnB1dFtuYW1lPWZpbGVdIHsgd2lkdGg6MTYwcHg7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LmFjdGlvbj5kaXYudGFicyB7IHBhZGRpbmc6NXB4OyBtYXJnaW46MCAxcHg7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LmFjdGlvbj5kaXYudGFiczpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5hY3Rpb24+ZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IH0KCmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudCB7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjp3aGl0ZTsgZm9udC1zaXplOjE2cHg7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgcG9zaXRpb246cmVsYXRpdmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC5saW5lIHsgcG9zaXRpb246c3RpY2t5OyBsZWZ0OjA7IHRleHQtYWxpZ246cmlnaHQ7IHBhZGRpbmc6MCA2cHg7IGJvcmRlci1yaWdodDpzb2xpZCAycHggcmVkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHRkLmxpbmUgeyBiYWNrZ3JvdW5kLWNvbG9yOiM2NDk1ZWQ2MzsgYm9yZGVyOnNvbGlkIDFweCByZWQ7IGJvcmRlci1yaWdodDpzb2xpZCAycHggcmVkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCB7IHdoaXRlLXNwYWNlOnByZTsgcGFkZGluZy1sZWZ0OjEwcHg7IGN1cnNvcjp0ZXh0OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmNvbW1lbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IGNvbG9yOmN5YW47IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4ua2V5d29yZCB7IGNvbG9yOnllbGxvdzsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5kYXRhdHlwZSB7IGNvbG9yOmdyZWVuOyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmZ1bmN0aW9uIHsgY29sb3I6Y3lhbjsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5jb25zdGFudCB7IGNvbG9yOm1hZ2VudGE7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uc3RyaW5nIHsgY29sb3I6bWFnZW50YTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQgaWZyYW1lIHsgYm9yZGVyOjA7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5wcm9maWxlIGlmcmFtZSB7IGJvcmRlcjowOyB9CgpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi5wYXRoIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlubmVyIGRpdi5vdXRwdXQgZmllbGRzZXQudG9vbGtpdCB7IHBvc2l0aW9uOmFic29sdXRlOyBib3R0b206MHB4OyByaWdodDowcHg7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBmaWVsZHNldC50b29sa2l0PmRpdi5vdXRwdXQ+ZmllbGRzZXQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBmaWVsZHNldC50b29sa2l0PmRpdi5vdXRwdXQ+ZmllbGRzZXQuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMGUzMzY5YjM7IGNvbG9yOndoaXRlOyBkaXNwbGF5OmJsb2NrOyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kIHsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpncmVlbjsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyB7IGhlaWdodDozMXB4OyBvdmVyZmxvdzphdXRvOyB9Cgpib2R5LndoaXRlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LmlubmVyLmZsb2F0PmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjp3aGl0ZTsgfQpib2R5LmJsYWNrIGZpZWxkc2V0LmlubmVyLmZsb2F0PmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBjb2xvcjp3aGl0ZTsgfQoKYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBwYWRkaW5nOjBweDsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBmb250LWZhbWlseTptb25vc3BhY2U7IHBhZGRpbmc6N3B4IDIwcHg7IGhlaWdodDoxN3B4OyBmbG9hdDpsZWZ0OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicy5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYucGF0aCB7IGJhY2tncm91bmQtY29sb3I6IzFkMzM0OTsgcGFkZGluZzo0cHggMTBweDsgbWFyZ2luLWJvdHRvbTo0cHg7IGRpc3BsYXk6YmxvY2s7IGNsZWFyOmJvdGg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC5saW5lIHsgcGFkZGluZy10b3A6NHB4OyBib3JkZXItcmlnaHQ6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgeyBwYWRkaW5nLXRvcDoycHg7IGJvcmRlcjpzb2xpZCAxcHggdHJhbnNwYXJlbnQ7IH0KCmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnByb2plY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYucHJvamVjdC50b2dnbGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5wcm9qZWN0IGRpdi5pdGVtIHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7IGJveC1zaGFkb3c6MHB4IDBweCA1cHggMXB4IGdyZXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi5wYXRoIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB0ZC5saW5lIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IGNvbG9yOndoaXRlOyBib3JkZXI6bm9uZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB0ZC50ZXh0IHsgYm9yZGVyOnNvbGlkIDFweCBsaWdodGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uc3RyaW5nIHsgY29sb3I6cm95YWxibHVlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmZ1bmN0aW9uIHsgY29sb3I6ZGFya3JlZDsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5rZXl3b3JkIHsgY29sb3I6Ymx1ZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZCB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyBjb2xvcjpibGFjazsgcGFkZGluZzowcHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgMnB4IHJlZDsgaGVpZ2h0OjMwcHg7IGZsb2F0OnJpZ2h0OyBib3JkZXItcmFkaXVzOjA7IGJveC1zaGFkb3c6bm9uZTsgfQoKYm9keS5tb2JpbGUgZmllbGRzZXQuaW5uZXI+Zm9ybS5vcHRpb24gaW5wdXRbbmFtZT1maWxlXSB7IHdpZHRoOjkwcHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQucGx1Z2luLmlubmVyIGRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LnBsdWdpbi5pbm5lciBkaXYuYWN0aW9uIHsgZGlzcGxheTpjb250ZW50czsgfQoKYm9keS5tb2JpbGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRibHVlOyB3aWR0aDozMHB4OyB9CmJvZHkubW9iaWxlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi50b2dnbGUuZGlzcGxheSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRibHVlOyBtYXJnaW4tdG9wOi0zM3B4OyBoZWlnaHQ6MzBweDsgd2lkdGg6MTAwcHg7IH0KCi51bnNlbGVjdGFibGUgewoJLXdlYmtpdC10b3VjaC1jYWxsb3V0Om5vbmU7Cgktd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7Cgkta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTsKCS1tb3otdXNlci1zZWxlY3Q6bm9uZTsKCS1tcy11c2VyLXNlbGVjdDpub25lOwoJLW8tdXNlci1zZWxlY3Q6bm9uZTsKCXVzZXItc2VsZWN0Om5vbmU7Cn0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6bGlnaHRncmF5OyB9CgovKiAvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuY3NzICovCmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudCB7CgliYWNrZ3JvdW5kLWNvbG9yOiMwMDAwMDAwMDsgY29sb3I6IzAwMDAwMDAwOyBmb250LXNpemU6MWVtOyBmb250LWZhbWlseTptb25vc3BhY2U7CglwYWRkaW5nOjA7IHBhZGRpbmctbGVmdDoxMnB4OyBib3JkZXI6bm9uZTsgb3V0bGluZTpub25lOyBtYXJnaW46MDsgbWFyZ2luLXRvcDotM3B4OwogCWhlaWdodDoyMnB4OyBwb3NpdGlvbjphYnNvbHV0ZTsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQubm9ybWFsIHsgY2FyZXQtY29sb3I6Z3JheTsgfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQuaW5zZXJ0IHsgY2FyZXQtY29sb3I6eWVsbG93OyB9CgpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB7CgloZWlnaHQ6MjBweDsgcG9zaXRpb246YWJzb2x1dGU7IGxlZnQ6MzJweDsgbWFyZ2luLXRvcDoyMHB4OwoJZGlzcGxheTpub25lOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlLmluc2VydCB7CglkaXNwbGF5OmJsb2NrOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIGRpdi5wcmUgewoJZm9udC1zaXplOjEuMXJlbTsgY29sb3I6I2YwZjhmZjAwOyBtYXJnaW4tbGVmdDo1cHg7IGZsb2F0OmxlZnQ7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgdGFibGUgewoJYmFja2dyb3VuZDpsaWdodGJsdWU7IG1heC1oZWlnaHQ6NDAwcHg7IG1heC13aWR0aDo4MDBweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRoIHsKCWRpc3BsYXk6bm9uZTsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRkIHsKCWZvbnQtc2l6ZToxLjFyZW07Cn0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIGRpdi5wcmUgewoJZm9udC1zaXplOjFyZW07Cn0KYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgdGFibGUuY29udGVudCB0ZCB7Cglmb250LXNpemU6MXJlbTsKfQoKYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50IHsKIAltYXJnaW4tdG9wOjFweDsKfQpib2R5LndoaXRlIGZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5pbnNlcnQgeyBjYXJldC1jb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5ub3JtYWwgeyBjYXJldC1jb2xvcjpsaWdodGdyYXk7IH0KCmRpdi5wcm9qZWN0IGRpdi56b25lLmNyZWF0ZT5kaXYubGlzdCBkaXYuaXRlbSB7IHBhZGRpbmc6NXB4OyBmbG9hdDpsZWZ0OyBjbGVhcjpub25lOyB9CmRpdi5wcm9qZWN0IGRpdi56b25lLmNyZWF0ZT5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CgovKiAvcGx1Z2luL2xvY2FsL3RlYW0vcGxhbi5jc3MgKi8KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIHsgdmVydGljYWwtYWxpZ246dG9wOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCB0ZC5vdmVyIHsgYm9yZGVyOnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIGRpdi5kYXRlIHsgY29sb3I6Z3JheTsgfQpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgZGl2LnByZXBhcmUgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYucHJvY2VzcyB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuY2FuY2VsIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuZmluaXNoIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBjb2xvcjp3aGl0ZTsgfQoKLyogL3BsdWdpbi9sb2NhbC93aWtpL2RhdGEuY3NzICovCmZpZWxkc2V0LmRhdGEgZGl2Lm91dHB1dCB0YWJsZS5jb250ZW50IHRyLnNlbGVjdCB7CgliYWNrZ3JvdW5kLWNvbG9yOmdyYXk7Cn0KZmllbGRzZXQuZGF0YSBkaXYub3V0cHV0IHRhYmxlLmNvbnRlbnQgdHIub3ZlciB7CgliYWNrZ3JvdW5kLWNvbG9yOmdyYXk7Cn0KCi8qIC9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmNzcyAqLwpmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjViNzM4YzsgZm9udC1zaXplOjIwcHg7IH0KZmllbGRzZXQuZHJhdyBkaXYub3V0cHV0IGRpdi5jb250ZW50IHN2ZyB7IGJhY2tncm91bmQtY29sb3I6IzFiNWI3MzhjOyB9CgovKiAvcGx1Z2luL2xvY2FsL3dpa2kvZmVlbC5jc3MgKi8KZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IGltZyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5mZWVsLmZsb2F0IGRpdi5vdXRwdXQgaW1nIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0KZmllbGRzZXQuZmVlbC5mbG9hdCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0KCi8qIC9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmNzcyAqLwpmaWVsZHNldC53b3JkIGZvcm0ub3B0aW9uIGlucHV0W25hbWU9cGF0aF0geyB3aWR0aDoxMjdweDsgfQoKZmllbGRzZXQud29yZD5kaXYubmF2bWVudSB7IGJhY2tncm91bmQtY29sb3I6aW5oZXJpdDsgb3ZlcmZsb3c6YXV0bzsgbWluLXdpZHRoOjEyMHB4OyBjbGVhcjpib3RoOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgZGl2Lmxpc3QgeyBtYXJnaW4tbGVmdDoyMHB4OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgZGl2Lml0ZW0geyBmb250LXNpemU6MS40ZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IGZvbnQtZmFtaWx5OmN1cnNpdmU7IHBhZGRpbmc6NHB4IDIwcHg7IH0KZmllbGRzZXQud29yZD5kaXYubmF2bWVudT5kaXYuaXRlbSB7IGZvbnQtc2l6ZToxLjZlbTsgfQoKZmllbGRzZXQud29yZCBhIHsgd29yZC1icmVhazpicmVhay1hbGw7IH0KZmllbGRzZXQud29yZCBici5zdG9yeSB7IGNsZWFyOmJvdGg7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeSB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5IGxpLkgyIHsgZm9udC1zaXplOjEuNGVtOyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnkgbGkuSDMgeyBmb250LXNpemU6MS4yZW07IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9cHJlbWVudV0geyBjdXJzb3I6cG9pbnRlcjsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5W2RhdGEtdHlwZT1wcmVtZW51XSBsaTpob3ZlciB7IGJhY2tncm91bmQ6Y3lhbjsgY29sb3I6Ymx1ZTsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5W2RhdGEtdHlwZT1lbmRtZW51XSB7IGNsZWFyOmJvdGg7IH0KZmllbGRzZXQud29yZCBwLnN0b3J5W2RhdGEtbmFtZT1pbm5lcl0geyBiYWNrZ3JvdW5kLWNvbG9yOiM0YjZjOGE3YTsgcGFkZGluZzo0cHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgNHB4IGJsdWU7IG1hcmdpbjoxMHB4IDBweDsgfQpmaWVsZHNldC53b3JkIHAuc3RvcnlbZGF0YS1uYW1lPWlubmVyXTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6I2MxMGM4YTsgY3Vyc29yOmNvcHk7IH0KZmllbGRzZXQud29yZCBmaWVsZHNldC5zdG9yeSB7IG1hcmdpbjoxMHB4OyB9CmZpZWxkc2V0LndvcmQgZmllbGRzZXQuc3RvcnkuZnVsbCB7IG1hcmdpbjowcHg7IH0KCmZpZWxkc2V0LndvcmQuZmxvYXQgeyBwYWRkaW5nOjA7IG1hcmdpbjowOyB3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOyBwb3NpdGlvbjpmaXhlZDsgbGVmdDowOyB0b3A6MDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2LnN0YXR1cyB7IGNsZWFyOm5vbmU7IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjojZjBmOGZmODA7IHBhZGRpbmc6MjBweDsgb3ZlcmZsb3c6YXV0bzsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5vdXRwdXQ+ZGl2LnByb2plY3QgeyBiYWNrZ3JvdW5kOiM0NjgyYjQ2YjsgcGFkZGluZzoxMHB4OyBwb3NpdGlvbjpmaXhlZDsgcmlnaHQ6MDsgdG9wOjMxcHg7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQud29yZC5mbG9hdCBkaXYuY29udGVudCBkaXYucGFnZSB7IG1hcmdpbi10b3A6MzFweDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQgZGl2LnBhZ2Uuc2hvdyB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQud29yZC5mbG9hdCBkaXYuY29udGVudC5ncmlkIGRpdi5wYWdlIHsgYmFja2dyb3VuZC1jb2xvcjojYTRjYmVjYjU7IG1hcmdpbjoxMHB4OyBoZWlnaHQ6MjAwcHg7IHdpZHRoOjIwMHB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgaDEgeyB0ZXh0LWFsaWduOmNlbnRlcjsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGgyIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KZmllbGRzZXQud29yZC5mbG9hdCBoMyB7IHRleHQtYWxpZ246Y2VudGVyOyB9CgpmaWVsZHNldC53b3JkLmNtZD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmNtZD5kaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CgpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9ZmllbGRdPmRpdi5tZW51IHsgZmxvYXQ6bGVmdDsgb3ZlcmZsb3c6YXV0bzsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9ZmllbGRdPmRpdi5saXN0IHsgZmxvYXQ6bGVmdDsgb3ZlcmZsb3c6YXV0bzsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9ZmllbGRdPmRpdi5tZW51IGRpdi5saXN0IGRpdi5pdGVtIHsgcGFkZGluZzowIDIwcHg7IH0KCmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdW2RhdGEtbmFtZT1zaGVsbF0gbGFiZWwgewoJLW1vei11c2VyLXNlbGVjdDpub25lOyAvKueBq+eLkCovCgktd2Via2l0LXVzZXItc2VsZWN0Om5vbmU7IC8qd2Via2l05rWP6KeI5ZmoKi8KCS1tcy11c2VyLXNlbGVjdDpub25lOyAvKklFMTAqLwoJLWtodG1sLXVzZXItc2VsZWN0Om5vbmU7IC8q5pep5pyf5rWP6KeI5ZmoKi8KCXVzZXItc2VsZWN0Om5vbmU7Cn0KCgovKiAvcGx1Z2luL3N0b3J5L2Zvcm0uY3NzICovCmRpdi5vdXRwdXQuZm9ybSBkaXYuaXRlbSB7CglwYWRkaW5nOjQwcHg7Cn0KCi8qIC9wbHVnaW4vc3RvcnkvanNvbi5jc3MgKi8KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDAwMDsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gZGl2Lml0ZW0geyBwYWRkaW5nLWxlZnQ6MTVweDsgYm9yZGVyOnNvbGlkIDFweCAjMDAwMDAwMGQ7IGJvcmRlci1sZWZ0OmRhc2hlZCAxcHggbGlnaHRibHVlOyBtYXJnaW4tbGVmdDo1cHg7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIGRpdi5pdGVtOmhvdmVyIHsgYm9yZGVyOnNvbGlkIDFweCByZWQ7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ubm9uY2UgeyBjb2xvcjojOWNiZWNhNGY7IGN1cnNvcjpwb2ludGVyOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOnllbGxvdzsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5zdHJpbmcgeyBjb2xvcjptYWdlbnRhOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmNvbnN0IHsgY29sb3I6Y3lhbjsgfQoKCi8qIC9wbHVnaW4vc3Rvcnkvc3BpZGUuY3NzICovCmZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgovKiAvcGx1Z2luL3N0b3J5L3RyZW5kLmNzcyAqLwpmaWVsZHNldC5kcmF3LnRyZW5kIGRpdi5vdXRwdXQgZGl2LnRvZ2dsZSB7IGRpc3BsYXk6bm9uZTsgfQoKCi8qIC9yZXF1aXJlL3BhZ2Uvbm9kZV9tb2R1bGVzL3h0ZXJtL2Nzcy94dGVybS5jc3MgKi8KLyoqCiAqIENvcHlyaWdodCAoYykgMjAxNCBUaGUgeHRlcm0uanMgYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTMsIENocmlzdG9waGVyIEplZmZyZXkgKE1JVCBMaWNlbnNlKQogKiBodHRwczovL2dpdGh1Yi5jb20vY2hqai90ZXJtLmpzCiAqIEBsaWNlbnNlIE1JVAogKgogKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5CiAqIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlICJTb2Z0d2FyZSIpLCB0byBkZWFsCiAqIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMKICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbAogKiBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMKICogZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczoKICoKICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4KICogYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCiAqCiAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SCiAqIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLAogKiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUKICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUgogKiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLAogKiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOCiAqIFRIRSBTT0ZUV0FSRS4KICoKICogT3JpZ2luYWxseSBmb3JrZWQgZnJvbSAod2l0aCB0aGUgYXV0aG9yJ3MgcGVybWlzc2lvbik6CiAqICAgRmFicmljZSBCZWxsYXJkJ3MgamF2YXNjcmlwdCB2dDEwMCBmb3IganNsaW51eDoKICogICBodHRwOi8vYmVsbGFyZC5vcmcvanNsaW51eC8KICogICBDb3B5cmlnaHQgKGMpIDIwMTEgRmFicmljZSBCZWxsYXJkCiAqICAgVGhlIG9yaWdpbmFsIGRlc2lnbiByZW1haW5zLiBUaGUgdGVybWluYWwgaXRzZWxmCiAqICAgaGFzIGJlZW4gZXh0ZW5kZWQgdG8gaW5jbHVkZSB4dGVybSBDU0kgY29kZXMsIGFtb25nCiAqICAgb3RoZXIgZmVhdHVyZXMuCiAqLwoKLyoqCiAqICBEZWZhdWx0IHN0eWxlcyBmb3IgeHRlcm0uanMKICovCgoueHRlcm0gewogICAgY3Vyc29yOiB0ZXh0OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtbXMtdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAtd2Via2l0LXVzZXItc2VsZWN0OiBub25lOwp9CgoueHRlcm0uZm9jdXMsCi54dGVybTpmb2N1cyB7CiAgICBvdXRsaW5lOiBub25lOwp9CgoueHRlcm0gLnh0ZXJtLWhlbHBlcnMgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgLyoqCiAgICAgKiBUaGUgei1pbmRleCBvZiB0aGUgaGVscGVycyBtdXN0IGJlIGhpZ2hlciB0aGFuIHRoZSBjYW52YXNlcyBpbiBvcmRlciBmb3IKICAgICAqIElNRXMgdG8gYXBwZWFyIG9uIHRvcC4KICAgICAqLwogICAgei1pbmRleDogNTsKfQoKLnh0ZXJtIC54dGVybS1oZWxwZXItdGV4dGFyZWEgewogICAgcGFkZGluZzogMDsKICAgIGJvcmRlcjogMDsKICAgIG1hcmdpbjogMDsKICAgIC8qIE1vdmUgdGV4dGFyZWEgb3V0IG9mIHRoZSBzY3JlZW4gdG8gdGhlIGZhciBsZWZ0LCBzbyB0aGF0IHRoZSBjdXJzb3IgaXMgbm90IHZpc2libGUgKi8KICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIG9wYWNpdHk6IDA7CiAgICBsZWZ0OiAtOTk5OWVtOwogICAgdG9wOiAwOwogICAgd2lkdGg6IDA7CiAgICBoZWlnaHQ6IDA7CiAgICB6LWluZGV4OiAtNTsKICAgIC8qKiBQcmV2ZW50IHdyYXBwaW5nIHNvIHRoZSBJTUUgYXBwZWFycyBhZ2FpbnN0IHRoZSB0ZXh0YXJlYSBhdCB0aGUgY29ycmVjdCBwb3NpdGlvbiAqLwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICByZXNpemU6IG5vbmU7Cn0KCi54dGVybSAuY29tcG9zaXRpb24tdmlldyB7CiAgICAvKiBUT0RPOiBDb21wb3NpdGlvbiBwb3NpdGlvbiBnb3QgbWVzc2VkIHVwIHNvbWV3aGVyZSAqLwogICAgYmFja2dyb3VuZDogIzAwMDsKICAgIGNvbG9yOiAjRkZGOwogICAgZGlzcGxheTogbm9uZTsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7CiAgICB6LWluZGV4OiAxOwp9CgoueHRlcm0gLmNvbXBvc2l0aW9uLXZpZXcuYWN0aXZlIHsKICAgIGRpc3BsYXk6IGJsb2NrOwp9CgoueHRlcm0gLnh0ZXJtLXZpZXdwb3J0IHsKICAgIC8qIE9uIE9TIFggdGhpcyBpcyByZXF1aXJlZCBpbiBvcmRlciBmb3IgdGhlIHNjcm9sbCBiYXIgdG8gYXBwZWFyIGZ1bGx5IG9wYXF1ZSAqLwogICAgYmFja2dyb3VuZC1jb2xvcjogIzAwMDsKICAgIG92ZXJmbG93LXk6IHNjcm9sbDsKICAgIGN1cnNvcjogZGVmYXVsdDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHJpZ2h0OiAwOwogICAgbGVmdDogMDsKICAgIHRvcDogMDsKICAgIGJvdHRvbTogMDsKfQoKLnh0ZXJtIC54dGVybS1zY3JlZW4gewogICAgcG9zaXRpb246IHJlbGF0aXZlOwp9CgoueHRlcm0gLnh0ZXJtLXNjcmVlbiBjYW52YXMgewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgbGVmdDogMDsKICAgIHRvcDogMDsKfQoKLnh0ZXJtIC54dGVybS1zY3JvbGwtYXJlYSB7CiAgICB2aXNpYmlsaXR5OiBoaWRkZW47Cn0KCi54dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCB7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB2aXNpYmlsaXR5OiBoaWRkZW47CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICBsZWZ0OiAtOTk5OWVtOwogICAgbGluZS1oZWlnaHQ6IG5vcm1hbDsKfQoKLnh0ZXJtLmVuYWJsZS1tb3VzZS1ldmVudHMgewogICAgLyogV2hlbiBtb3VzZSBldmVudHMgYXJlIGVuYWJsZWQgKGVnLiB0bXV4KSwgcmV2ZXJ0IHRvIHRoZSBzdGFuZGFyZCBwb2ludGVyIGN1cnNvciAqLwogICAgY3Vyc29yOiBkZWZhdWx0Owp9CgoueHRlcm0ueHRlcm0tY3Vyc29yLXBvaW50ZXIsCi54dGVybSAueHRlcm0tY3Vyc29yLXBvaW50ZXIgewogICAgY3Vyc29yOiBwb2ludGVyOwp9CgoueHRlcm0uY29sdW1uLXNlbGVjdC5mb2N1cyB7CiAgICAvKiBDb2x1bW4gc2VsZWN0aW9uIG1vZGUgKi8KICAgIGN1cnNvcjogY3Jvc3NoYWlyOwp9CgoueHRlcm0gLnh0ZXJtLWFjY2Vzc2liaWxpdHksCi54dGVybSAueHRlcm0tbWVzc2FnZSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAwOwogICAgdG9wOiAwOwogICAgYm90dG9tOiAwOwogICAgcmlnaHQ6IDA7CiAgICB6LWluZGV4OiAxMDsKICAgIGNvbG9yOiB0cmFuc3BhcmVudDsKfQoKLnh0ZXJtIC5saXZlLXJlZ2lvbiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAtOTk5OXB4OwogICAgd2lkdGg6IDFweDsKICAgIGhlaWdodDogMXB4OwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLnh0ZXJtLWRpbSB7CiAgICBvcGFjaXR5OiAwLjU7Cn0KCi54dGVybS11bmRlcmxpbmUgewogICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7Cn0KCi54dGVybS1zdHJpa2V0aHJvdWdoIHsKICAgIHRleHQtZGVjb3JhdGlvbjogbGluZS10aHJvdWdoOwp9CgoueHRlcm0tc2NyZWVuIC54dGVybS1kZWNvcmF0aW9uLWNvbnRhaW5lciAueHRlcm0tZGVjb3JhdGlvbiB7Cgl6LWluZGV4OiA2OwoJcG9zaXRpb246IGFic29sdXRlOwp9CgoueHRlcm0tZGVjb3JhdGlvbi1vdmVydmlldy1ydWxlciB7CiAgICB6LWluZGV4OiA3OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgdG9wOiAwOwogICAgcmlnaHQ6IDA7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKfQoKLnh0ZXJtLWRlY29yYXRpb24tdG9wIHsKICAgIHotaW5kZXg6IDI7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCg==",
        "usr/volcanos/page/cache.js": "Vm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL2FjdGlvbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wYW5lbC9mb290ZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGFuZWwvaGVhZGVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL3JpdmVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL3NlYXJjaC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvY2hhdC9kaXYuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3RlYW0vcGxhbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvd2lraS9kYXRhLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvZmVlbC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9zdG9yeS9mb3JtLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9zdG9yeS9qc29uLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9zdG9yeS9zcGlkZS5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvdHJlbmQuY3NzIl0gPSBbXQoKX2Nhbl9uYW1lID0gIi9saWIvYmFzZS5qcyIKVm9sY2Fub3MoImJhc2UiLCB7aGVscDogIuaVsOaNruexu+WeiyIsIEludDogZnVuY3Rpb24odmFsLCBkZWYpIHsgcmV0dXJuIHBhcnNlSW50KHZhbCl8fGRlZnx8MCB9LAoJTWluOiBmdW5jdGlvbih2YWwsIG1pbikgeyByZXR1cm4gdmFsID4gbWluPyB2YWw6IG1pbiB9LAoJTWF4OiBmdW5jdGlvbih2YWwsIG1heCkgeyByZXR1cm4gdmFsIDwgbWF4PyB2YWw6IG1heCB9LAoJT2JqOiBmdW5jdGlvbih2YWwsIGRlZikgewoJCXRyeSB7CgkJCWlmICh0eXBlb2YgdmFsID09IGxhbmcuU1RSSU5HKSB7IGlmICh2YWwgPT0gIiIpIHsgcmV0dXJuIGRlZiB9IHZhbCA9IEpTT04ucGFyc2UodmFsKSB9CgkJCWlmICh2YWwubGVuZ3RoID4gMCkgeyByZXR1cm4gdmFsIH0gZm9yICh2YXIgayBpbiB2YWwpIHsgcmV0dXJuIHZhbCB9IHJldHVybiBkZWYKCQl9IGNhdGNoIChlKSB7IHJldHVybiB2YWwgJiYgdmFsLnNwbGl0ICYmIHZhbC5zcGxpdChpY2UuRlMpIHx8IGRlZiB9Cgl9LAoJQ29weTogZnVuY3Rpb24odG8sIGZyb20sIHNraXApIHsgaWYgKCFmcm9tKSB7IHJldHVybiB0byB9CgkJaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMiB8fCB0eXBlb2Ygc2tpcCA9PSAiYm9vbGVhbiIpIHsKCQkJZm9yICh2YXIgayBpbiBmcm9tKSB7CgkJCQlpZiAoc2tpcCAmJiB0b1trXSAhPSB1bmRlZmluZWQpIHsgY29udGludWUgfQoJCQkJaWYgKGZyb21ba10gPT09ICIiKSB7IGRlbGV0ZSh0b1trXSk7IGNvbnRpbnVlIH0KCQkJCXRvW2tdID0gZnJvbVtrXQoJCQl9CgkJCXJldHVybiB0bwoJCX0KCQlmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQl2YXIgayA9IGFyZ3VtZW50c1tpXTsgdG9ba10gPSBmcm9tW2tdCgkJfQoJCXJldHVybiB0bwoJfSwKCUVxOiBmdW5jdGlvbih0bywgZnJvbSkgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQlpZiAodHlwZW9mIHRvICE9IHR5cGVvZiBmcm9tKSB7IHJldHVybiBmYWxzZSB9CgkJaWYgKHR5cGVvZiB0byA9PSBsYW5nLk9CSkVDVCkgewoJCQlpZiAodG8ubGVuZ3RoICE9IGZyb20ubGVuZ3RoKSB7IHJldHVybiBmYWxzZSB9CgkJCWZvciAodmFyIGkgPSAwOyBpIDwgdG8ubGVuZ3RoOyBpKyspIHsKCQkJCWlmICghY2FsbCh0b1tpXSwgZnJvbVtpXSkpIHsgcmV0dXJuIGZhbHNlIH0KCQkJfQoJCQlmb3IgKHZhciBrIGluIHRvKSB7CgkJCQlpZiAoIWNhbGwodG9ba10sIGZyb21ba10pKSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJcmV0dXJuIHRydWUKCQl9CgkJcmV0dXJuIHRvID09PSBmcm9tCgl9LAoKCUV4dDogZnVuY3Rpb24ocGF0aCkgeyByZXR1cm4gKHBhdGguc3BsaXQoaWNlLlBTKS5wb3AoKS5zcGxpdChpY2UuUFQpLnBvcCgpKS50b0xvd2VyQ2FzZSgpIH0sCglQYXRoOiBmdW5jdGlvbihwYXRoKSB7IHZhciByZXMgPSAiIgoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IGlmICghYXJndW1lbnRzW2ldKSB7IGNvbnRpbnVlIH0KCQkJcmVzICs9IChhcmd1bWVudHNbaV1bMF09PWljZS5QUyB8fCByZXM9PSIiIHx8IHJlc1tyZXMubGVuZ3RoLTFdPT1pY2UuUFM/ICIiOiBpY2UuUFMpICsgYXJndW1lbnRzW2ldLnRyaW0oKQoJCX0KCQlyZXR1cm4gcmVzCgl9LAoJQXJnczogZnVuY3Rpb24oKSB7IHZhciByZXMgPSBbXQoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCWlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuT0JKRUNUKSB7CgkJCQlmb3IgKHZhciBrIGluIGFyZ3VtZW50c1tpXSkgeyByZXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaV1ba10pKSB9CgkJCQlpLS07IGNvbnRpbnVlCgkJCX0gZWxzZSBpZiAoYXJndW1lbnRzW2ldKSB7IAoJCQkJcmVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGFyZ3VtZW50c1tpXSkrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaSsxXSkpCgkJCX0KCQl9CgkJcmV0dXJuIHJlcy5qb2luKCImIikKCX0sCglNZXJnZVVSTDogZnVuY3Rpb24odXJsKSB7CgkJdmFyIGFyZ3MgPSB7fTsgKHVybC5zcGxpdCgiPyIpWzFdfHwiIikuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKCFpdGVtKSB7IHJldHVybiB9CgkJCXZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgYXJnc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQl9KQoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCXN3aXRjaCAodHlwZW9mIGFyZ3VtZW50c1tpXSkgewoJCQkJY2FzZSBsYW5nLlNUUklORzogYXJnc1thcmd1bWVudHNbaV1dID0gYXJndW1lbnRzW2krMV0sIGkrKzsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGFyZ3VtZW50c1tpXS5sZW5ndGggPiAwKSB7CgkJCQkJCWZvciAodmFyIGogPSAwOyBqIDwgYXJndW1lbnRzW2ldLmxlbmd0aDsgaiArPSAyKSB7IGFyZ3NbYXJndW1lbnRzW2ldW2pdXSA9IGFyZ3VtZW50c1tpXVtqXSB9CgkJCQkJfSBlbHNlIHsKCQkJCQkJZm9yICh2YXIgayBpbiBhcmd1bWVudHNbaV0pIHsgYXJnc1trXSA9IGFyZ3VtZW50c1tpXVtrXSB9CgkJCQkJfQoJCQkJCWJyZWFrCgkJCX0KCQl9CgkJdmFyIGxpc3QgPSBbXTsgZm9yICh2YXIgayBpbiBhcmdzKSB7IGsgJiZhcmdzW2tdICYmIGxpc3QucHVzaChlbmNvZGVVUklDb21wb25lbnQoaykrIj0iK2VuY29kZVVSSUNvbXBvbmVudChhcmdzW2tdKSkgfQoJCXJldHVybiB1cmwuc3BsaXQoIj8iKVswXSsobGlzdC5sZW5ndGg+MD8gIj8iK2xpc3Quam9pbigiJiIpOiAiIikKCX0sCglQYXJzZVVSTDogZnVuY3Rpb24odXJsKSB7IHZhciByZXMgPSB7bGluazogdXJsfQoJCXZhciBsaXN0ID0gdXJsLnNwbGl0KCI/Iik7IHJlc1sib3JpZ2luIl0gPSBsaXN0WzBdCgkJbGlzdFsxXSAmJiBsaXN0WzFdLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCXZhciBscyA9IGl0ZW0uc3BsaXQoIj0iKTsgcmVzW2RlY29kZVVSSUNvbXBvbmVudChsc1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KGxzWzFdKQoJCX0pCgkJcmV0dXJuIHJlcwoJfSwKCVBhcnNlSlNPTjogZnVuY3Rpb24oc3RyKSB7IHZhciByZXMKCQlpZiAodHlwZW9mIHN0ciA9PSBsYW5nLk9CSkVDVCkgeyByZXR1cm4gc3RyIH0KCQlpZiAoc3RyLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IHZhciBscyA9IHN0ci5zcGxpdCgiPyIpCgkJCXJlcyA9IHt0eXBlOiBtZGIuTElOSywgbmFtZTogIiIsIHRleHQ6IHN0cn0KCQkJcmVzLm5hbWUgPSBsc1swXS5zcGxpdCgiOi8vIikucG9wKCkuc3BsaXQoaWNlLlBTKVswXQoJCQlsc1sxXSAmJiBsc1sxXS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyB2YXIgbHMgPSBpdGVtLnNwbGl0KCI9IikKCQkJCXJlc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQkJfSkKCQkJcmV0dXJuIHJlcwoJCX0KCQl0cnkgeyByZXMgPSBKU09OLnBhcnNlKHN0ciksIHJlcy50ZXh0ID0gcmVzLnRleHR8fHN0ciwgcmVzLnR5cGUgPSByZXMudHlwZXx8bmZzLkpTT04KCQl9IGNhdGNoIChlKSB7IHJlcyA9IHt0eXBlOiBtZGIuVEVYVCwgdGV4dDogc3RyfSB9CgkJcmV0dXJuIHJlcwoJfSwKCVBhcnNlU2l6ZTogZnVuY3Rpb24oc2l6ZSkgeyBzaXplID0gc2l6ZS50b0xvd2VyQ2FzZSgpCgkJaWYgKHNpemUuZW5kc1dpdGgoInRiIikgfHwgc2l6ZS5lbmRzV2l0aCgidCIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0ICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoImdiIikgfHwgc2l6ZS5lbmRzV2l0aCgiZyIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0ICogMTAyNAoJCX0KCQlpZiAoc2l6ZS5lbmRzV2l0aCgibWIiKSB8fCBzaXplLmVuZHNXaXRoKCJtIikpIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUpICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoImtiIikgfHwgc2l6ZS5lbmRzV2l0aCgiayIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQKCQl9CgkJcmV0dXJuIHBhcnNlSW50KHNpemUpCgl9LAoKCVNpemU6IGZ1bmN0aW9uKHNpemUpIHsgc2l6ZSA9IHBhcnNlSW50KHNpemUpCgkJaWYgKHNpemUgPiAxMDAwMDAwMDAwKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplLzEwMDAwMDAwMDApICsgaWNlLlBUICsgcGFyc2VJbnQoc2l6ZS8xMDAwMDAwMCUxMDApICsgIkciCgkJfQoJCWlmIChzaXplID4gMTAwMDAwMCkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZS8xMDAwMDAwKSArIGljZS5QVCArIHBhcnNlSW50KHNpemUvMTAwMDAlMTAwKSArICJNIgoJCX0KCQlpZiAoc2l6ZSA+IDEwMDApIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUvMTAwMCkgKyBpY2UuUFQgKyBwYXJzZUludChzaXplLzEwJTEwMCkgKyAiSyIKCQl9CgkJcmV0dXJuIHNpemUgKyAiQiIKCX0sCglOdW1iZXI6IGZ1bmN0aW9uKGQsIG4pIHsgdmFyIHJlc3VsdCA9IFtdCgkJd2hpbGUgKGQgPiAwKSB7IHJlc3VsdC5wdXNoKGQlMTApOyBkID0gcGFyc2VJbnQoZC8xMCk7IG4tLSB9CgkJd2hpbGUgKG4gPiAwKSB7IHJlc3VsdC5wdXNoKCIwIik7IG4tLSB9CgkJcmV0dXJuIHJlc3VsdC5yZXZlcnNlKCksIHJlc3VsdC5qb2luKCIiKQoJfSwKCUZvcm1hdDogZnVuY3Rpb24ob2JqKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopIH0sCglTaW1wbGU6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0gW10KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQl2YXIgYXJnID0gYXJndW1lbnRzW2ldOyBzd2l0Y2ggKHR5cGVvZiBhcmd1bWVudHNbaV0pIHsKCQkJCWNhc2UgbGFuZy5OVU1CRVI6IHJlcy5wdXNoKGFyZyk7IGJyZWFrCgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXMucHVzaChhcmcpOyBicmVhawoJCQkJY2FzZSBsYW5nLk9CSkVDVDoKCQkJCQlpZiAoYXJnLmxlbmd0aCA+IDApIHsgcmVzID0gcmVzLmNvbmNhdChhcmcpOyBicmVhayB9CgkJCQkJZm9yICh2YXIgayBpbiBhcmcpIHsgayAmJiBhcmdba10gJiYgcmVzLnB1c2goaywgYXJnW2tdKSB9CgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6IHJlcy5wdXNoKGFyZyk7IAoJCQl9CgkJfQoJCXJldHVybiByZXMKCX0sCglBZGRVbmlxOiBmdW5jdGlvbihsaXN0LCB2YWx1ZSkgeyBsaXN0ID0gbGlzdHx8W107IHJldHVybiBsaXN0LmluZGV4T2YodmFsdWUpID09IC0xICYmIGxpc3QucHVzaCh2YWx1ZSksIGxpc3QgfSwKCglEYXRlOiBmdW5jdGlvbih0aW1lKSB7IHZhciBub3cgPSBuZXcgRGF0ZSgpCgkJaWYgKHR5cGVvZiB0aW1lID09IGxhbmcuU1RSSU5HICYmIHRpbWUgIT0gIiIpIHsgdmFyIGxzID0gdGltZS5zcGxpdChpY2UuU1ApCgkJCXZhciB2cyA9IGxzWzBdLnNwbGl0KCItIikKCQkJbm93LnNldEZ1bGxZZWFyKHBhcnNlSW50KHZzWzBdKSkKCQkJbm93LnNldE1vbnRoKHBhcnNlSW50KHZzWzFdKS0xKQoJCQlub3cuc2V0RGF0ZShwYXJzZUludCh2c1syXSkpCgoJCQl2YXIgdnMgPSBsc1sxXS5zcGxpdCgiOiIpCgkJCW5vdy5zZXRIb3VycyhwYXJzZUludCh2c1swXSkpCgkJCW5vdy5zZXRNaW51dGVzKHBhcnNlSW50KHZzWzFdKSkKCQkJbm93LnNldFNlY29uZHMocGFyc2VJbnQodnNbMl0pKQoJCX0gZWxzZSBpZiAodGltZSkgewoJCQlub3cgPSB0aW1lCgkJfQoJCXJldHVybiBub3cKCX0sCglUaW1lOiBmdW5jdGlvbih0aW1lLCBmbXQpIHsgdmFyIG5vdyA9IHRoaXMuRGF0ZSh0aW1lKQoJCXZhciBsaXN0ID0gWyJTdW4iLCAiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiXQoJCWZtdCA9IGZtdHx8IiVIOiVNOiVTIgoJCWZtdCA9IGZtdC5yZXBsYWNlKCIleSIsIG5vdy5nZXRGdWxsWWVhcigpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlbSIsIHRoaXMuTnVtYmVyKG5vdy5nZXRNb250aCgpKzEsIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlZCIsIHRoaXMuTnVtYmVyKG5vdy5nZXREYXRlKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIldyIsIGxpc3Rbbm93LmdldERheSgpXSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJUgiLCB0aGlzLk51bWJlcihub3cuZ2V0SG91cnMoKSwgMikpCgkJZm10ID0gZm10LnJlcGxhY2UoIiVNIiwgdGhpcy5OdW1iZXIobm93LmdldE1pbnV0ZXMoKSwgMikpCgkJZm10ID0gZm10LnJlcGxhY2UoIiVTIiwgdGhpcy5OdW1iZXIobm93LmdldFNlY29uZHMoKSwgMikpCgkJcmV0dXJuIGZtdAoJfSwKCVRpbWVBZGQ6IGZ1bmN0aW9uKHQsIGQpIHsgcmV0dXJuIG5ldyBEYXRlKHQgLSB0JSgyNCozNjAwKjEwMDApIC0gOCozNjAwKjEwMDAgKyBkKjI0KjM2MDAqMTAwMCkgfSwKCUR1cmF0aW9uOiBmdW5jdGlvbihuKSB7IHZhciByZXMgPSAiIiwgaCA9IDAKCQloID0gcGFyc2VJbnQobi8zNjAwMDAwLzI0KSwgaCA+IDAgJiYgKHJlcyArPSBoKyJkIiksIG4gPSBuICUgKDM2MDAwMDAqMjQpCgkJaCA9IHBhcnNlSW50KG4vMzYwMDAwMCksIGggPiAwICYmIChyZXMgKz0gaCsiaCIpLCBuID0gbiAlIDM2MDAwMDAKCQloID0gcGFyc2VJbnQobi82MDAwMCksIGggPiAwICYmIChyZXMgKz0gaCsibSIpLCBuID0gbiAlIDYwMDAwCgkJaCA9IHBhcnNlSW50KG4vMTAwMCksIGggPiAwICYmIChyZXMgKz0gaCksIG4gPSBuICUgMTAwMAoJCXJldHVybiByZXMgKyAobiA+IDA/IGljZS5QVCtwYXJzZUludChuLzEwKTogIiIpICsgInMiCgl9LAoKCW1vZDogZnVuY3Rpb24oaW5kZXgsIHRvdGFsKSB7CgkJcmV0dXJuIChpbmRleCt0b3RhbCkgJSB0b3RhbAoJfSwKCWdldFZhbGlkOiBmdW5jdGlvbigpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgdiA9IGFyZ3VtZW50c1tpXQoJCQlpZiAodHlwZW9mIHYgPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCWlmICh2ID09IG51bGwpIHsgY29udGludWUgfQoJCQkJZm9yICh2YXIgayBpbiB2KSB7IHJldHVybiB2IH0KCQkJCWlmICh2Lmxlbmd0aCA+IDApIHsgcmV0dXJuIHYgfQoJCQl9IGVsc2UgaWYgKHR5cGVvZiB2ID09IGxhbmcuU1RSSU5HICYmIHYpIHsKCQkJCXJldHVybiB2CgkJCX0gZWxzZSBpZiAodiA9PSB1bmRlZmluZWQpIHsKCQkJCWNvbnRpbnVlCgkJCX0gZWxzZSB7CgkJCQlyZXR1cm4gdgoJCQl9CgkJfQoJfSwKCWlzTnVtYmVyOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5OVU1CRVIgfSwKCWlzU3RyaW5nOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5TVFJJTkcgfSwKCWlzT2JqZWN0OiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5PQkpFQ1QgfSwKCWlzQXJyYXk6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdHlwZW9mIHZhbCA9PSBsYW5nLk9CSkVDVCAmJiB2YWwubGVuZ3RoICE9IHVuZGVmaW5lZCB9LAoJaXNGdW5jOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5GVU5DVElPTiB9LAoJaXNGdW5jdGlvbjogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzQ2FsbGJhY2s6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGtleS5pbmRleE9mKCJvbiIpID09IDAgJiYgdHlwZW9mIHZhbHVlID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzVW5kZWZpbmVkOiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHZhbCA9PSB1bmRlZmluZWQgfSwKCWlzTnVsbDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB2YWwgPT0gbnVsbCB9LAoJcmVwbGFjZUFsbDogZnVuY3Rpb24oc3RyKSB7CgkJZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDIpIHsgaWYgKCFhcmd1bWVudHNbaV0pIHsgY29udGludWUgfQoJCQlpZiAoc3RyLnJlcGxhY2VBbGwpIHsgc3RyID0gc3RyLnJlcGxhY2VBbGwoYXJndW1lbnRzW2ldLCBhcmd1bWVudHNbaSsxXSk7IGNvbnRpbnVlIH0KCQkJaWYgKHN0ci5yZXBsYWNlKSB7IHN0ciA9IHN0ci5yZXBsYWNlKGFyZ3VtZW50c1tpXSwgYXJndW1lbnRzW2krMV0pOyBjb250aW51ZSB9CgkJfQoJCXJldHVybiBzdHIKCX0sCgoJY291bnQ6IGZ1bmN0aW9uKHN0ciwgcykgeyB2YXIgbiA9IDAKCQlmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewoJCQlpZiAoc3RyW2ldID09IHMpIHsgbisrIH0KCQl9CgkJcmV0dXJuIG4KCX0sCglyYW5kb206IGZ1bmN0aW9uKG1heCwgbWluKSB7IHJldHVybiBtaW4gPSBtaW58fDAsIHBhcnNlSW50KE1hdGgucmFuZG9tKCkqKG1heC1taW4pKSttaW4gfSwKCWlzTmlnaHQ6IGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKTsgcmV0dXJuIG5vdy5nZXRIb3VycygpIDwgNyB8fCBub3cuZ2V0SG91cnMoKSA+IDE3IH0sCgliZWdpbldpdGg6IGZ1bmN0aW9uKHN0ciwgYmVnaW4pIHsgcmV0dXJuIHN0ci50cmltKCkuaW5kZXhPZihiZWdpbikgPT0gMCB9LAoJZW5kV2l0aDogZnVuY3Rpb24oc3RyLCBlbmQpIHsgcmV0dXJuIHN0ci5sYXN0SW5kZXhPZihlbmQpICsgZW5kLmxlbmd0aCA9PSBzdHIubGVuZ3RoIH0sCgl0cmltOiBmdW5jdGlvbihhcmdzKSB7IGlmICh0aGlzLmlzU3RyaW5nKGFyZ3MpKSB7IHJldHVybiBhcmdzLnRyaW0oKSB9CgkJaWYgKHRoaXMuaXNBcnJheShhcmdzKSkgeyBmb3IgKHZhciBpID0gYXJncy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHsgaWYgKCFhcmdzW2ldKSB7IGFyZ3MucG9wKCkgfSBlbHNlIHsgYnJlYWsgfSB9IH0KCQlyZXR1cm4gYXJncwoJfSwKCXRyaW1QcmVmaXg6IGZ1bmN0aW9uKHN0ciwgcHJlKSB7IGlmIChzdHIuaW5kZXhPZihwcmUpID09IC0xKSB7IHJldHVybiBzdHIgfSByZXR1cm4gc3RyLnNsaWNlKHByZS5sZW5ndGgpIH0sCgl0cmltU3VmZml4OiBmdW5jdGlvbihzdHIsIGVuZCkgewoJCXZhciBpbmRleCA9IHN0ci5sYXN0SW5kZXhPZihlbmQpCgkJaWYgKGluZGV4ID09IC0xIHx8IGluZGV4K2VuZC5sZW5ndGggIT0gc3RyLmxlbmd0aCkgeyByZXR1cm4gc3RyIH0gcmV0dXJuIHN0ci5zbGljZSgwLCBpbmRleCkKCX0sCglqb2luOiBmdW5jdGlvbihsaXN0LCBzcCkgeyByZXR1cm4gKGxpc3R8fFtdKS5qb2luKHNwfHxpY2UuU1ApIH0sCglqb2luczogZnVuY3Rpb24obGlzdCwgaW5uZXIsIG91dGVyKSB7IAoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQlsaXN0W2ldID0gdHlwZW9mIGxpc3RbaV0gPT0gbGFuZy5TVFJJTkc/IGxpc3RbaV06IGxpc3RbaV0uam9pbihpbm5lcnx8aWNlLkZTKQoJCX0KCQlyZXR1cm4gbGlzdC5qb2luKG91dGVyfHxpY2UuU1ApCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9saWIvY29yZS5qcyIKVm9sY2Fub3MoImNvcmUiLCB7aGVscDogIuaVsOaNrue7k+aehCIsCglLZXlzOiBzaHkoIui/nuaOpeWZqCIsIGZ1bmN0aW9uKCkgeyB2YXIgbGlzdCA9IFtdCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJc3dpdGNoICh0eXBlb2YgdikgewoJCQkJY2FzZSBsYW5nLk9CSkVDVDogZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7IGxpc3QucHVzaCh2W2pdKSB9IGJyZWFrCgkJCQljYXNlIGxhbmcuTlVNQkVSOiBsaXN0LnB1c2godisiIik7IGJyZWFrCgkJCQljYXNlIGxhbmcuRlVOQ1RJT046IHYgPSB2KCkKCQkJCWRlZmF1bHQ6IHYgJiYgbGlzdC5wdXNoKHYrIiIpCgkJCX0KCQl9CgkJcmV0dXJuIGxpc3Quam9pbihpY2UuUFQpCgl9KSwKCVZhbHVlOiBzaHkoIuWtmOWCqOWZqCIsIGZ1bmN0aW9uKGRhdGEsIGtleSwgdmFsdWUpIHsKCQlpZiAoZGF0YSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0KCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gZGF0YSB9CgoJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUICYmIGtleS5sZW5ndGggPiAwKSB7IGtleSA9IGtleS5qb2luKGljZS5QVCkgfQoJCWlmICh0eXBlb2Yga2V5ID09IGxhbmcuT0JKRUNUKSB7IGZvciAodmFyIGsgaW4ga2V5KSB7IGFyZ3VtZW50cy5jYWxsZWUuY2FsbCh0aGlzLCBkYXRhLCBrLCBrZXlba10pIH0gcmV0dXJuIGRhdGEgfQoKCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CgkJCXZhciBfZGF0YSA9IGRhdGEKCgkJCXZhciBscyA9IGtleS5zcGxpdChpY2UuUFQpCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbHMubGVuZ3RoOyBpKyspIHsKCQkJCXZhciBfc3ViID0gX2RhdGFbbHNbaV1dfHx7fQoJCQkJX2RhdGFbbHNbaV1dID0gX3N1YgoJCQkJaWYgKGkgPT0gbHMubGVuZ3RoIC0gMSkgewoJCQkJCV9kYXRhW2xzW2ldXSA9IHZhbHVlCgkJCQl9IGVsc2UgewoJCQkJCV9kYXRhID0gX3N1YgoJCQkJfQoJCQl9CgkJCS8vIGRhdGFba2V5XSA9IHZhbHVlCgkJfQoJCWlmIChkYXRhW2tleV0gIT0gdW5kZWZpbmVkKSB7IHJldHVybiBkYXRhW2tleV0gfQoKCQl2YXIgcCA9IGRhdGEsIGxzID0ga2V5LnNwbGl0KGljZS5QVCk7IHdoaWxlIChwICYmIGxzLmxlbmd0aCA+IDApIHsKCQkJaWYgKGxzWzBdID09ICItMSIpIHsgbHNbMF0gPSBwLmxlbmd0aC0xIH0KCQkJcCA9IHBbbHNbMF1dLCBscyA9IGxzLnNsaWNlKDEpCgkJfSByZXR1cm4gcAoJfSksCglTcGxpdDogc2h5KCLliIbor43lmagiLCBmdW5jdGlvbihzdHIpIHsgaWYgKCFzdHIgfHwgIXN0ci5sZW5ndGgpIHsgcmV0dXJuIFtdIH0KCQl2YXIgb3B0ID0ge2RldGFpbDogZmFsc2V9LCBhcmcgPSBbXTsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVD8gb3B0ID0gYXJndW1lbnRzW2ldOiBhcmcucHVzaChhcmd1bWVudHNbaV0pCgkJfQoKCQkvLyDlrZfnrKblrprkuYkKCQlmdW5jdGlvbiBfbGlzdChzdHIpIHsgdmFyIHJlcyA9IHt9OyBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgeyByZXNbc3RyW2ldXSA9IHRydWUgfTsgcmV0dXJuIHJlcyB9CgkJdmFyIHNwYWNlID0gX2xpc3QoYXJnWzBdfHwiXHQgLDtcbiIpICAvLyDnqbrnmb3nrKYKCQl2YXIgYmxvY2sgPSBfbGlzdChhcmdbMV18fCJ7WygpXX0iKSAgIC8vIOWIhumalOespgoJCXZhciBxdW90ZSA9IF9saXN0KGFyZ1syXXx8IidcImAiKSAgICAgLy8g5byV55So56ymCgkJdmFyIHRyYW5zID0gX2xpc3QoYXJnWzNdfHwiXFwiKSAgICAgICAvLyDovazkuYnnrKYKCgkJdmFyIHJlcyA9IFtdLCBiZWdpbiA9IDA7IGZ1bmN0aW9uIHB1c2gob2JqKSB7CgkJCW9iaiAmJiByZXMucHVzaCh0eXBlb2Ygb2JqID09IGxhbmcuU1RSSU5HIHx8IG9wdC5kZXRhaWw/IG9iajogb2JqLnRleHQpLCBiZWdpbiA9IC0xCgkJfQoKCQkvLyDlvIDlp4vliIbor40KCQlmb3IgKHZhciBzID0gIiIsIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChzcGFjZVtzdHJbaV1dKSB7IC8vIOepuueZveespgoJCQkJaWYgKHMpIHsgY29udGludWUgfQoJCQkJYmVnaW4gPiAtMSAmJiBwdXNoKHN0ci5zbGljZShiZWdpbiwgaSkpCgkJCQlvcHQuZGV0YWlsICYmIHB1c2goe3R5cGU6IGh0bWwuU1BBQ0UsIHRleHQ6IHN0ci5zbGljZShpLCBpKzEpfSkKCgkJCX0gZWxzZSBpZiAoYmxvY2tbc3RyW2ldXSkgeyAvLyDliIbpmpTnrKYKCQkJCWlmIChzKSB7IGNvbnRpbnVlIH0KCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJcHVzaChzdHIuc2xpY2UoaSwgaSsxKSkKCgkJCX0gZWxzZSBpZiAocXVvdGVbc3RyW2ldXSkgeyAvLyDlvJXnlKjnrKYKCQkJCWlmIChzID09ICIiKSB7CgkJCQkJYmVnaW4gPiAtMSAmJiBwdXNoKHN0ci5zbGljZShiZWdpbiwgaSkpCgkJCQkJcyA9IHN0cltpXSwgYmVnaW4gPSBpKzEKCQkJCX0gZWxzZSBpZiAocyA9PSBzdHJbaV0pIHsKCQkJCQlwdXNoKHt0eXBlOiBsYW5nLlNUUklORywgdGV4dDogc3RyLnNsaWNlKGJlZ2luLCBpKSwgbGVmdDogcywgcmlnaHQ6IHN0cltpXX0pCgkJCQkJcyA9ICIiLCBiZWdpbiA9IC0xCgkJCQl9CgoJCQl9IGVsc2UgaWYgKHRyYW5zW3N0cltpXV0pIHsgLy8g6L2s5LmJ56ymCgkJCQliZWdpbiA9PSAtMSAmJiAoYmVnaW4gPSBpKyspCgoJCQl9IGVsc2UgeyAvLyDmma7pgJrnrKYKCQkJCWJlZ2luID09IC0xICYmIChiZWdpbiA9IGkpCgkJCX0KCQl9CgoJCS8vIOWJqeS9meWtl+espgoJCWJlZ2luID49IDAgJiYgKHM/IHB1c2goe3R5cGU6IGxhbmcuU1RSSU5HLCB0ZXh0OiBzdHIuc2xpY2UoYmVnaW4pLCBsZWZ0OiBzLCByaWdodDogIiJ9KTogcHVzaChzdHIuc2xpY2UoYmVnaW4pKSkKCQlyZXR1cm4gcmVzCgl9KSwKCUNhbGxGdW5jOiBzaHkoIuiwg+eUqOWZqCIsIGZ1bmN0aW9uKGZ1bmMsIGFyZ3MsIG1vZCkgeyBhcmdzID0gYXJnc3x8e30KCQl2YXIgZXZlbnQgPSBhcmdzWyJldmVudCJdfHx7fSwgY2FuID0gYXJnc1siY2FuIl18fGFyZ3NbMF0sIG1zZyA9IGFyZ3NbIm1zZyJdfHxhcmdzWzFdLCBjbWRzID0gYXJnc1siY21kcyJdfHxbXQoJCWV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoKCQkvLyDmn6Xmib7osIPnlKgKCQlmdW5jID0gdHlwZW9mIGZ1bmMgPT0gbGFuZy5GVU5DVElPTj8gZnVuYzogdHlwZW9mIGZ1bmMgPT0gbGFuZy5TVFJJTkc/IHRoaXMuVmFsdWUobW9kfHxjYW4sIGZ1bmMpOgoJCQl0eXBlb2YgZnVuYyA9PSBsYW5nLk9CSkVDVCAmJiBmdW5jLmxlbmd0aCA+IDA/IHRoaXMuVmFsdWUoZnVuY1swXSwgdGhpcy5LZXlzKGZ1bmMuc2xpY2UoMSkpKTogbnVsbAoJCWlmICh0eXBlb2YgZnVuYyAhPSBsYW5nLkZVTkNUSU9OKSB7IHJldHVybiB9CgoJCS8vIOino+aekOWPguaVsAoJCXZhciBsaXN0ID0gW10sIGVjaG8gPSBmYWxzZSwgY2IgPSBhcmdzWyJjYiJdCgkJdGhpcy5MaXN0KGZ1bmMudG9TdHJpbmcoKS5zcGxpdCgiKSIpWzBdLnNwbGl0KCIoIilbMV0uc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaXRlbSA9IGl0ZW0udHJpbSgpOyBpZiAoaXRlbSA9PSAiIikgeyByZXR1cm4gfQoJCQl2YXIgYXJnID0gYXJnc1tpdGVtXSB8fCBtc2cmJm1zZy5PcHRpb24mJm1zZy5PcHRpb24oaXRlbSkgfHwgY2FuJiZjYW4uQ29uZiYmY2FuLkNvbmYoaXRlbSkgfHwKCQkJCWV2ZW50JiYhKGV2ZW50IGluc3RhbmNlb2YgRXZlbnQpJiZldmVudFtpdGVtXSB8fCBhcmdzW2luZGV4XSB8fCBjbWRzW2luZGV4XSB8fCBudWxsCgkJCWlmIChpdGVtID09ICJjYiIpIHsgZWNobyA9IHRydWUgfQoJCQlsaXN0LnB1c2goYXJnKQoJCX0pCgoJCS8vIOaJp+ihjOiwg+eUqAoJCXZhciByZXMgPSBmdW5jLmFwcGx5KG1vZHx8Y2FuLCBsaXN0KQoJCWlmICghZWNobyAmJiB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTikgeyByZXMgJiYgbXNnICYmIG1zZy5FY2hvKHJlcyksIGFyZ3VtZW50cy5jYWxsZWUuYXBwbHkodGhpcywgW2NiLCB7bXNnOiBtc2csIHJlczogcmVzfV0pIH0KCQlyZXR1cm4gcmVzCgl9KSwKCglMaXN0OiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKGxpc3QsIGNiLCBpbnRlcnZhbCwgY2JzKSB7CgkJaWYgKHR5cGVvZiBsaXN0ID09IGxhbmcuU1RSSU5HKSB7IC8vIOm7mOiupOW6j+WIlwoJCQlsaXN0ID0gW2xpc3RdCgkJfSBlbHNlIGlmICh0eXBlb2YgbGlzdCA9PSBsYW5nLk5VTUJFUikgeyAvLyDnrYnlt67luo/liJcgW2VuZCBjYiBpbnRlcnZhbF18W2JlZ2luIGVuZCBpbnRlcnZhbF0KCQkJdmFyIGJlZ2luID0gMCwgZW5kID0gbGlzdCwgc3RlcCA9IHR5cGVvZiBpbnRlcnZhbCA9PSBsYW5nLk5VTUJFUj8gaW50ZXJ2YWw6IDEKCQkJaWYgKHR5cGVvZiBjYiA9PSBsYW5nLk5VTUJFUikgeyBiZWdpbiA9IGxpc3QsIGVuZCA9IGNiLCBjYiA9IG51bGwgfQoJCQlsaXN0ID0gW107IGZvciAodmFyIGkgPSBiZWdpbjsgaSA8IGVuZDsgaSArPSBzdGVwKSB7IGxpc3QucHVzaChpKSB9CgkJfQoKCQlsaXN0ID0gbGlzdHx8W10KCQlpZiAoaW50ZXJ2YWwgPiAwKSB7IC8vIOaXtumXtOW6j+WIlwoJCQlmdW5jdGlvbiBsb29wKGkpIHsgaWYgKGkgPj0gbGlzdC5sZW5ndGgpIHsgcmV0dXJuIHR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnMobGlzdCkgfQoJCQkJY2IobGlzdFtpXSwgaSwgbGlzdCksIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoaSsxKSB9LCBpbnRlcnZhbCkKCQkJfQoJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBsaXN0Lmxlbmd0aCA+IDAgJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcCgwKSB9LCBpbnRlcnZhbC80KQoJCX0gZWxzZSB7IC8vIOmAieaLqeW6j+WIlwoJCQl2YXIgc2xpY2UgPSBbXSwgcmVzCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IChyZXMgPSBjYihsaXN0W2ldLCBpLCBsaXN0KSkgIT0gdW5kZWZpbmVkICYmIHNsaWNlLnB1c2gocmVzKTogc2xpY2UucHVzaChsaXN0W2ldKQoJCQl9OyBsaXN0ID0gc2xpY2UKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJTmV4dDogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihsaXN0LCBjYiwgY2JzKSB7CgkJc3dpdGNoICh0eXBlb2YgbGlzdCkgewoJCQljYXNlIGxhbmcuT0JKRUNUOiBpZiAobGlzdCA9PSBudWxsKSB7IGxpc3QgPSBbXTsgYnJlYWsgfQoJCQkJaWYgKGxpc3QubGVuZ3RoID09IHVuZGVmaW5lZCkgeyB2YXIgbHMgPSBbXTsgZm9yICh2YXIgayBpbiBsaXN0KSB7IGxzLnB1c2goaykgfSBsaXN0ID0gbHMgfSBicmVhawoJCQlkZWZhdWx0OiBpZiAobGlzdCA9PSB1bmRlZmluZWQpIHsgbGlzdCA9IFtdOyBicmVhayB9CgkJCQlsaXN0ID0gW2xpc3RdCgkJfQoKCQlmdW5jdGlvbiBuZXh0KGkpIHsgaSA8IGxpc3QubGVuZ3RoPyAgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IobGlzdFtpXSwgZnVuY3Rpb24oKSB7IG5leHQoaSsxKSB9LCBpLCBsaXN0KToKCQkJCXR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnMobGlzdCkgfQoJCXJldHVybiBuZXh0KDApLCBsaXN0Cgl9KSwKCUl0ZW1zOiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwgY2IpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGsgaW4gb2JqKSB7CgkJCWxpc3QgPSBsaXN0LmNvbmNhdCh0aGlzLkxpc3Qob2JqW2tdLCBmdW5jdGlvbih2LCBpKSB7CgkJCQlyZXR1cm4gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IodiwgaSwgaywgb2JqKQoJCQl9KSkKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJSXRlbVNvcnQ6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24ob2JqLCBrZXksIGNiKSB7IHZhciBsaXN0ID0gW10KCQl2YXIgb3JkZXIgPSBbXSwga2V5cyA9IHt9LCB2YWxzID0ge30sIGkgPSAwCgkJZm9yICh2YXIgayBpbiBvYmopIHsgbyA9IG9ialtrXVtrZXldfHxpKysKCQkJb3JkZXIucHVzaChvKSwga2V5c1tvXSA9IGssIHZhbHNbb10gPSBvYmpba10KCQl9OyBvcmRlci5zb3J0KCkKCgkJZm9yICh2YXIgaSBpbiBvcmRlcikgeyB2YXIgayA9IG9yZGVyW2ldCgkJCXZhciByZXMgPSB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTj8gY2Ioa2V5c1trXSwgdmFsc1trXSk6IGsKCQkJcmVzICE9IHVuZGVmaW5lZCAmJiBsaXN0LnB1c2gocmVzKQoJCX0KCQlyZXR1cm4gbGlzdAoJfSksCglJdGVtOiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwgY2IpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGsgaW4gb2JqKSB7CgkJCXZhciByZXMgPSB0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTj8gY2Ioaywgb2JqW2tdKTogawoJCQlyZXMgIT0gdW5kZWZpbmVkICYmIGxpc3QucHVzaChyZXMpCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCUl0ZW1DQjogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihtZXRhLCBjYiwgY2FuLCBpdGVtKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG1ldGEpIHsgKGZ1bmN0aW9uKGspIHsKCQkJaWYgKGsuaW5kZXhPZigib24iKSA9PSAwICYmIHR5cGVvZiBtZXRhW2tdID09IGxhbmcuRlVOQ1RJT04pIHsKCQkJCWlmICh0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTikgewoJCQkJCWNiKGssIG1ldGFba10pCgkJCQl9IGVsc2UgewoJCQkJCWNiW2tdID0gZnVuY3Rpb24oZXZlbnQpIHsgbWV0YVtrXShldmVudCwgY2FuLCBpdGVtKSB9CgkJCQl9CgkJCQlsaXN0LnB1c2goaykKCQkJfQoJCX0pKGspIH0KCQlyZXR1cm4gbGlzdAoJfSksCgoJU3BsaXRJbnB1dDogZnVuY3Rpb24oaXRlbSwgdHlwZSkgeyBpZiAodHlwZW9mIGl0ZW0gPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIGl0ZW0gfQoJCXR5cGUgPSB0eXBlfHxodG1sLlRFWFQ7IHN3aXRjaCAoaXRlbSkgewoJCQljYXNlIG1kYi5MSVNUOiByZXR1cm4ge3R5cGU6IHR5cGUgPSBodG1sLkJVVFRPTiwgbmFtZTogaXRlbSwgYWN0aW9uOiBpY2UuQVVUT30KCQkJY2FzZSBjbGkuQkFDSzogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5CVVRUT04sIG5hbWU6IGl0ZW19CgkJCWNhc2UgbWRiLk5BTUU6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuVEVYVCwgbmFtZTogaXRlbX0KCQkJY2FzZSBtZGIuVEVYVDogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5URVhUQVJFQSwgbmFtZTogaXRlbX0KCQkJZGVmYXVsdDogdmFyIGxzID0gdGhpcy5TcGxpdChpdGVtLCAiICIsICI6PUAiKSwgcmVzID0ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfTsgZm9yICh2YXIgaSA9IDE7IGkgPCBscy5sZW5ndGg7IGkgKz0gMikgewoJCQkJCXN3aXRjaCAobHNbaV0pIHsKCQkJCQkJY2FzZSAiOiI6IHJlc1ttZGIuVFlQRV0gPSBsc1tpKzFdOyBicmVhawoJCQkJCQljYXNlICI9IjoKCQkJCQkJCWlmIChyZXNbbWRiLlRZUEVdID09IGh0bWwuU0VMRUNUKSB7CgkJCQkJCQkJcmVzLnZhbHVlcyA9IHRoaXMuU3BsaXQobHNbaSsxXSkKCQkJCQkJCQlmb3IgKHZhciBqID0gMTsgaiA8IHJlcy52YWx1ZXMubGVuZ3RoOyBqKyspIHsKCQkJCQkJCQkJaWYgKHJlcy52YWx1ZXNbMF0gPT0gIiIgfHwgcmVzLnZhbHVlc1swXSA9PSByZXMudmFsdWVzW2pdKSB7CgkJCQkJCQkJCQlyZXMudmFsdWUgPSByZXMudmFsdWVzWzBdLCByZXMudmFsdWVzID0gcmVzLnZhbHVlcy5zbGljZSgxKQoJCQkJCQkJCQkJYnJlYWsKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJcmVzLnZhbHVlID0gbHNbaSsxXQoJCQkJCQkJfQoJCQkJCQkJYnJlYWsKCQkJCQkJY2FzZSAiQCI6IHJlc1tjdHguQUNUSU9OXSA9IGxzW2krMV07IGJyZWFrCgkJCQkJfQoJCQkJfSByZXR1cm4gcmVzCgkJfQoJfSwKCVRpbWVyMzAwbXM6IGZ1bmN0aW9uKGNiKSB7IHRoaXMuVGltZXIoMzAwLCBjYikgfSwKCVRpbWVyMzAwOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMCwgY2IpIH0sCglUaW1lcjNzOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMDAsIGNiKSB9LAoJVGltZXI6IHNoeSgi5a6a5pe25ZmoLCB2YWx1ZSwgWzEsMiwzLDRdLCB7aW50ZXJ2YWwsIGxlbmd0aH0iLCBmdW5jdGlvbihpbnRlcnZhbCwgY2IsIGNicykgewoJCXZhciB0aW1lciA9IHtzdG9wOiBmYWxzZX07IGZ1bmN0aW9uIGxvb3AoaSkgewoJCQl0aW1lci5zdG9wIHx8IGkgPj0gaW50ZXJ2YWwubGVuZ3RoICYmIGludGVydmFsLmxlbmd0aCA+PSAwIHx8IGNiKHRpbWVyLCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbaV0sIGksIGludGVydmFsKT8KCQkJCXR5cGVvZiBjYnMgPT0gbGFuZy5GVU5DVElPTiAmJiBjYnModGltZXIsIGludGVydmFsKTogc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcChpKzEpIH0sIGludGVydmFsLmludGVydmFsfHxpbnRlcnZhbFtpKzFdKQoJCX0KCgkJaW50ZXJ2YWwgPSB0eXBlb2YgaW50ZXJ2YWwgPT0gbGFuZy5PQkpFQ1Q/IGludGVydmFsOiBbaW50ZXJ2YWxdCgkJaWYgKGludGVydmFsLmludGVydmFsID09IDApIHsgY2IoKTsgcmV0dXJuIHRpbWVyIH0KCgkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgc2V0VGltZW91dChmdW5jdGlvbigpIHsgbG9vcCgwKSB9LCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbMF0pCgkJcmV0dXJuIHRpbWVyCgl9KSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL21pc2MuanMiClZvbGNhbm9zKCJtaXNjIiwge2hlbHA6ICLpgJrkv6HljY/orq4iLCBNZXNzYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSB7fSAKCQl2YXIgcHJvdG8gPSB7X2V2ZW50OiBldmVudCwgX2NhbjogY2FuLAoJCQlSdW5BY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBzdWIsIGNtZHMsIG1ldGEpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgbWV0YSA9IG1ldGEgfHwgc3ViJiZzdWIub25hY3Rpb24gfHwge30KCQkJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQkJaWYgKGNtZHMgJiYgY21kc1swXSA9PSBjdHguQUNUSU9OICYmIGNhbi5iYXNlLmlzRnVuYyhtZXRhW2NtZHNbMV1dKSkgeyBldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCQkJCQlyZXR1cm4gbXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSwgaWNlLlRSVUUpLCBjYW4uY29yZS5DYWxsRnVuYyhtZXRhW2NtZHNbMV1dLCB7ZXZlbnQ6IGV2ZW50LCBjYW46IHN1YiwgbXNnOiBtc2csIGJ1dHRvbjogY21kc1sxXSwgY21kOiBjbWRzWzFdfSksIHRydWUKCQkJCX0KCQkJCXJldHVybiBmYWxzZQoJCQl9LAoJCQlEaXNwbGF5OiBmdW5jdGlvbihmaWxlKSB7IG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZLCBmaWxlKSB9LAoJCQlEaXNwbGF5U3Rvcnk6IGZ1bmN0aW9uKGZpbGUpIHsgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVksICIvcGx1Z2luL3N0b3J5LyIrZmlsZSkgfSwKCQkJT3B0aW9uU3RhdHVzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpIH0sCgkJCU9wdGlvblByb2Nlc3M6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpIH0sCgkJCU9wdGlvbk9yU2VhcmNoOiBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSl8fG1zZy5PcHRpb24oa2V5KSB9LAoJCQlPcHRpb246IGZ1bmN0aW9uKGtleSwgdmFsKSB7CgkJCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZy5vcHRpb24gfHwgW10gfQoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgY2FuLmNvcmUuSXRlbShrZXksIG1zZy5PcHRpb24pIH0KCQkJCWlmICh2YWwgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnW2tleV0gJiYgbXNnW2tleV1bMF0gfHwgIiIgfQoJCQkJcmV0dXJuIG1zZy5vcHRpb24gPSBjYW4uYmFzZS5BZGRVbmlxKG1zZy5vcHRpb24sIGtleSksIG1zZ1trZXldID0gY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDEpLCB2YWwKCQkJfSwKCQkJQXBwZW5kOiBmdW5jdGlvbihrZXksIHZhbCkgewoJCQkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2cuYXBwZW5kIHx8IFtdIH0KCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGNhbi5jb3JlLkl0ZW0oa2V5LCBtc2cuQXBwZW5kKSB9CgkJCQlpZiAodmFsID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZ1trZXldICYmIG1zZ1trZXldWzBdIHx8ICIiIH0KCQkJCXJldHVybiBtc2cuYXBwZW5kID0gY2FuLmJhc2UuQWRkVW5pcShtc2cuYXBwZW5kLCBrZXkpLCBtc2dba2V5XSA9IGNhbi5jb3JlLkxpc3QoYXJndW1lbnRzKS5zbGljZSgxKSwgdmFsCgkJCX0sCgkJCVJlc3VsdDogZnVuY3Rpb24oKSB7IHJldHVybiBtc2cucmVzdWx0ICYmIG1zZy5yZXN1bHQuam9pbigiIikgfHwgIiIgfSwKCgkJCUxlbmd0aDogZnVuY3Rpb24oKSB7CgkJCQl2YXIgbWF4ID0gIiIsIGxlbiA9IDA7IGNhbi5jb3JlLkxpc3QobXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCBpbmRleCkgewoJCQkJCWlmIChtc2dba2V5XSAmJiBtc2dba2V5XS5sZW5ndGggPiBsZW4pIHsgbWF4ID0ga2V5LCBsZW4gPSBtc2dba2V5XS5sZW5ndGggfQoJCQkJfSkKCQkJCXJldHVybiBsZW4KCQkJfSwKCQkJVGFibGU6IGZ1bmN0aW9uKGNiKSB7CgkJCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChtc2cuTGVuZ3RoKCksIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsgdmFyIG9uZSA9IHt9LCByZXMKCQkJCQljYW4uY29yZS5MaXN0KG1zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSkgeyBvbmVba2V5XSA9IChtc2dba2V5XSYmbXNnW2tleV1baW5kZXhdfHwiIikgfSkKCQkJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiAocmVzID0gY2Iob25lLCBpbmRleCwgYXJyYXkpKSAmJiByZXMgIT0gdW5kZWZpbmVkICYmIHJlcyB8fCBvbmUKCQkJCX0pCgkJCX0sCgkJCUNsZWFyOiBmdW5jdGlvbihrZXkpIHsgc3dpdGNoIChrZXl8fGljZS5NU0dfQVBQRU5EKSB7CgkJCQljYXNlIGljZS5NU0dfQVBQRU5EOgoJCQkJY2FzZSBpY2UuTVNHX09QVElPTjoKCQkJCQljYW4uY29yZS5MaXN0KG1zZ1trZXldLCBmdW5jdGlvbihpdGVtKSB7IGRlbGV0ZShtc2dbaXRlbV0pIH0pCgkJCQlkZWZhdWx0OiBtc2dba2V5XSA9IFtdCgkJCX0gfSwKCQkJQ29weTogZnVuY3Rpb24ocmVzKSB7IGlmICghcmVzKSB7IHJldHVybiBtc2cgfQoJCQkJcmVzLnJlc3VsdCAmJiAobXNnLnJlc3VsdCA9IChtc2cucmVzdWx0fHxbXSkuY29uY2F0KHJlcy5yZXN1bHQpKQoJCQkJcmVzLmFwcGVuZCAmJiAobXNnLmFwcGVuZCA9IHJlcy5hcHBlbmQpICYmIHJlcy5hcHBlbmQuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJdmFyIGkgPSBtc2cub3B0aW9uICYmIG1zZy5vcHRpb24uaW5kZXhPZihpdGVtKTsgaWYgKGkgPiAtMSkgewoJCQkJCQltc2cub3B0aW9uW2ldID0gIiIsIGRlbGV0ZShtc2dbaXRlbV0pCgkJCQkJfQoJCQkJCXJlc1tpdGVtXSAmJiAobXNnW2l0ZW1dID0gKG1zZ1tpdGVtXXx8W10pLmNvbmNhdChyZXNbaXRlbV0pKQoJCQkJfSkKCQkJCXJlcy5vcHRpb24gJiYgKG1zZy5vcHRpb24gPSByZXMub3B0aW9uKSAmJiByZXMub3B0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCXJlc1tpdGVtXSAmJiAobXNnW2l0ZW1dID0gcmVzW2l0ZW1dKQoJCQkJfSkKCQkJCXJlcy5fb3B0aW9uICYmIChtc2cuX29wdGlvbiA9IHJlcy5fb3B0aW9uKSAmJiByZXMuX29wdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IHJlc1tpdGVtXSkKCQkJCX0pCgkJCQlyZXR1cm4gbXNnCgkJCX0sCgkJCVB1c2g6IGZ1bmN0aW9uKGtleSwgdmFsdWUsIGRldGFpbCkgewoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJCQl2YWx1ZSA9IHZhbHVlfHxjYW4uY29yZS5JdGVtKGtleSksIGNhbi5jb3JlLkxpc3QodmFsdWUsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJZGV0YWlsPyBtc2cuUHVzaChtZGIuS0VZLCBpdGVtKS5QdXNoKG1kYi5WQUxVRSwga2V5W2l0ZW1dfHwiIik6IG1zZy5QdXNoKGl0ZW0sIGtleVtpdGVtXXx8IiIpCgkJCQkJfSkKCQkJCQlyZXR1cm4gbXNnCgkJCQl9CgoJCQkJbXNnLmFwcGVuZCA9IGNhbi5iYXNlLkFkZFVuaXEobXNnLmFwcGVuZCwga2V5KSwgbXNnW2tleV0gPSBtc2dba2V5XSB8fCBbXQoJCQkJbXNnW2tleV0ucHVzaChjYW4uYmFzZS5pc1N0cmluZyh2YWx1ZSl8fGNhbi5iYXNlLmlzRnVuY3Rpb24odmFsdWUpPyB2YWx1ZTogSlNPTi5zdHJpbmdpZnkodmFsdWUpKQoJCQkJcmV0dXJuIG1zZwoJCQl9LAoJCQlTdGF0dXM6IGZ1bmN0aW9uKG9iaikgeyBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTLCBKU09OLnN0cmluZ2lmeShjYW4uY29yZS5JdGVtKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4ge25hbWU6IGtleSwgdmFsdWU6IHZhbHVlfSB9KSkpIH0sCgkJCVN0YXR1c1RpbWVDb3VudDogZnVuY3Rpb24ob2JqKSB7IG1zZy5hcHBlbmQgJiYgbXNnLlN0YXR1cyhjYW4uYmFzZS5Db3B5KHsidGltZSI6IGNhbi5iYXNlLlRpbWUoKSwgImNvdW50IjogbXNnLkxlbmd0aCgpKyJ4Iittc2cuYXBwZW5kLmxlbmd0aH0sIG9iaikpIH0sCgkJCUVjaG86IGZ1bmN0aW9uKHJlcykgeyBtc2cucmVzdWx0ID0gbXNnLnJlc3VsdCB8fCBbXQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgbXNnLnJlc3VsdC5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCQkJcmV0dXJuIG1zZy5faGFuZCA9IHRydWUsIG1zZwoJCQl9LAoJCQlEdW1wOiBmdW5jdGlvbihjYW4pIHsKCQkJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pCgkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpCgkJCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCX0sCgkJfQoJCXJldHVybiBjYW4ubWlzYy5wcm90byhtc2csIHByb3RvKQoJfSwKCUdFVDogZnVuY3Rpb24oY2FuLCB1cmwsIGNiKSB7IHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKQoJCXhoci5vcGVuKCJHRVQiLCB1cmwpLCB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CgkJCWlmICh4aHIuc3RhdHVzID09IDIwMCkgewoJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoeGhyLnJlc3BvbnNlVGV4dCkKCQkJfQoJCX0KCQl0cnkgeyB4aHIuc2VuZCgpIH0gY2F0Y2goZSkgeyBjYW4ubWlzYy5Mb2coZSkgfQoJfSwKCVBPU1Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCB1cmwsIGZvcm0sIGNiKSB7IC8vIF9tZXRob2QgX2FjY2VwdCBfdXBsb2FkIF9wcm9ncmVzcwoJCXZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsgbXNnLl94aHIgPSB4aHIKCQl4aHIub3Blbihtc2cuX21ldGhvZHx8IlBPU1QiLCB1cmwpLCB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CgkJCWlmICh4aHIucmVhZHlTdGF0ZSAhPSA0KSB7IHJldHVybiB9CgoJCQl0cnkgeyAvLyDop6PmnpDlk43lupQKCQkJCXZhciByZXMgPSBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpCgkJCX0gY2F0Y2ggKGUpIHsKCQkJCXZhciByZXMgPSB7cmVzdWx0OiBbeGhyLnJlc3BvbnNlVGV4dF19CgkJCX0KCQkJaWYgKHhoci5zdGF0dXMgPT0gMjAwKSB7CgkJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cuQ29weShyZXMpKQoJCQl9CgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgcmVzLCB4aHIuc3RhdHVzKQoJCX0KCgkJaWYgKG1zZy5fdXBsb2FkKSB7IC8vIOS4iuS8oOaWh+S7tgoJCQl2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOyBjYW4uY29yZS5JdGVtcyhmb3JtLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGtleSkgewoJCQkJZGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSkKCQkJfSksIGRhdGEuYXBwZW5kKGh0bWwuVVBMT0FELCBtc2cuX3VwbG9hZCksIGRhdGEuYXBwZW5kKGljZS5NU0dfVVBMT0FELCBtZGIuVVBMT0FEKQoKCQkJeGhyLnVwbG9hZC5vbnByb2dyZXNzID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5iYXNlLmlzRnVuYyhtc2cuX3Byb2dyZXNzKSAmJiBtc2cuX3Byb2dyZXNzKGV2ZW50LCBwYXJzZUludChldmVudC5sb2FkZWQqMTAwL2V2ZW50LnRvdGFsKSwgZXZlbnQudG90YWwsIGV2ZW50LmxvYWRlZCkKCQkJfQoJCX0gZWxzZSB7IC8vIOivt+axguaVsOaNrgoJCQl2YXIgZGF0YSA9IGNhbi5jb3JlLkl0ZW1zKGZvcm0sIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwga2V5KSB7IHJldHVybiBrZXkrIj0iK2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkgfSkuam9pbigiJiIpCgkJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LVR5cGUiLCAiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkIikKCQl9CgoJCS8vIOWPkemAgeivt+axggoJCXhoci5zZXRSZXF1ZXN0SGVhZGVyKCJBY2NlcHQiLCBtc2cuX2FjY2VwdHx8ImFwcGxpY2F0aW9uL2pzb24iKQoJCXRyeSB7IHhoci5zZW5kKGRhdGEpIH0gY2F0Y2goZSkgeyBjYW4ubWlzYy5Mb2coZSkgfQoJfSwKCVJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgZGF0YXNldCwgY21kcywgY2IpIHsKCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnR8fHt9KSwgc2tpcCA9IHtfaGFuZGxlOiB0cnVlfQoJCXZhciBmb3JtID0ge2NtZHM6IGNtZHN8fG1zZy5jbWR9OyBtc2cub3B0aW9uICYmIG1zZy5vcHRpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCWlmICh0eXBlb2YgbXNnLk9wdGlvbihpdGVtKSA9PSBsYW5nLk9CSkVDVCkgeyByZXR1cm4gfQoJCQlpZiAodHlwZW9mIG1zZy5PcHRpb24oaXRlbSkgPT0gbGFuZy5GVU5DVElPTikgeyByZXR1cm4gfQoJCQkhc2tpcFtpdGVtXSAmJiBtc2dbaXRlbV0gJiYgKGZvcm1baXRlbV0gPSBtc2dbaXRlbV0pCgkJfSkKCgkJY2FuLm1pc2MuUE9TVChjYW4sIG1zZywgY2FuLmJhc2UuTWVyZ2VVUkwoZGF0YXNldC5uYW1lcy50b0xvd2VyQ2FzZSgpLAoJCQkiX25hbWUiLCAobXNnLl9jYW4uc3VwfHxtc2cuX2NhbikuX25hbWUsICJfaW5kZXgiLCAobXNnLl9jYW4uc3VwfHxtc2cuX2NhbikuX2luZGV4LAoJCQlpY2UuTVNHX0RBRU1PTiwgbXNnLl9fZGFlbW9ufHxkYXRhc2V0LmRhZW1vbnx8IiIKCQkpLCBmb3JtLCBjYikKCX0sCglXU1M6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IsIG9ub3Blbiwgb25jbG9zZSwgb25lcnJvcikgeyBpZiAoY2FuLnVzZXIuaXNJRSkgeyByZXR1cm4gfQoJCXZhciB1cmwgPSBsb2NhdGlvbi5wcm90b2NvbC5yZXBsYWNlKCJodHRwIiwgIndzIikrIi8vIitsb2NhdGlvbi5ob3N0KyIvc3BhY2UvIgoJCWlmICh1cmwuaW5kZXhPZigiY2hyb21lIikgPT0gMCkgeyB1cmwgPSAid3M6Ly9sb2NhbGhvc3Q6OTAyMC9zcGFjZS8iIH0KCgkJdmFyIHNvY2tldCA9IG5ldyBXZWJTb2NrZXQoY2FuLmJhc2UuTWVyZ2VVUkwodXJsLCBhcmdzKSkKCQlzb2NrZXQub25jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGNsaS5DTE9TRSwgYXJncykKCQkJY2FuLmJhc2UuaXNGdW5jKG9uY2xvc2UpPyBvbmNsb3NlKHNvY2tldCk6IGNhbi5jb3JlLlRpbWVyKGNhbi5iYXNlLnJhbmRvbSgzMDAwLCAxMDAwKSwgZnVuY3Rpb24oKSB7CgkJCQlhcmdzLm5hbWUgPSBhcmdzLm5hbWV8fGNhbi5fd3NzX25hbWUKCQkJCWNhbi5taXNjLldTUyhjYW4sIGFyZ3MsIGNiLCBvbm9wZW4sIG9uZXJyb3IsIG9uY2xvc2UpCgkJCX0pCgkJfSwgc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBjbGkuRVJST1IsIGFyZ3MpCgkJCWNhbi5iYXNlLmlzRnVuYyhvbmVycm9yKT8gb25lcnJvcihzb2NrZXQpOiBzb2NrZXQuY2xvc2UoKQoKCQl9LCBzb2NrZXQub25vcGVuID0gZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZyhodG1sLldTUywgY2xpLk9QRU4sIGFyZ3MpCgkJCWNhbi5iYXNlLmlzRnVuYyhvbm9wZW4pICYmIG9ub3Blbihzb2NrZXQpCgkJfQoKCQlzb2NrZXQub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHsgLy8g6Kej5p6Q5ZG95LukCgkJCXRyeSB7IHZhciBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKSB9IGNhdGNoIChlKSB7IHZhciBkYXRhID0ge2RldGFpbDogW2V2ZW50LmRhdGFdfSB9CgoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuUmVwbHkgPSBmdW5jdGlvbigpIHsgLy8g5Zue5aSN5ZG95LukCgkJCQltc2cuT3B0aW9uKHtfaGFuZGxlOiB0cnVlLCBfc291cmNlOiAobXNnW2ljZS5NU0dfVEFSR0VUXXx8W10pLnJldmVyc2UoKS5zbGljZSgxKS5qb2luKGljZS5QVCl8fCIiLCBfdGFyZ2V0OiAobXNnW2ljZS5NU0dfU09VUkNFXXx8W10pLnJldmVyc2UoKS5qb2luKGljZS5QVCl9KQoJCQkJbXNnLnJlc3VsdCA9IChtc2cucmVzdWx0fHxbXSkuY29uY2F0KGNhbi5jb3JlLkxpc3QoYXJndW1lbnRzKSksIGNhbi5taXNjLkxvZyhodG1sLldTUywgaWNlLk1TR19SRVNVTFQsIG1zZy5yZXN1bHQsIG1zZykKCQkJCWRlbGV0ZShtc2cuX2V2ZW50KSwgZGVsZXRlKG1zZy5fY2FuKSwgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSkKCQkJfSwgbXNnLmRldGFpbCA9IGRhdGEuZGV0YWlsLCBtc2cuQ29weShkYXRhKQoKCQkJdHJ5IHsgLy8g5omn6KGM5ZG95LukCgkJCQljYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGljZS5NU0dfREVUQUlMLCBtc2cuZGV0YWlsLCBtc2cpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBtc2csIG1zZy5kZXRhaWxbMF0sIG1zZy5kZXRhaWwuc2xpY2UoMSkpCgkJCX0gY2F0Y2ggKGUpIHsgY2FuLm1pc2MuTG9nKGUpLCBtc2cuUmVwbHkoKSB9CgkJfQoJfSwKCglDb29raWVTZXNzaWQ6IHNoeSgi5Lya6K+d5Y+Y6YePIiwgZnVuY3Rpb24oY2FuLCB2YWx1ZSwgcGF0aCkgewoJCXJldHVybiBjYW4ubWlzYy5Db29raWUoY2FuLCBpY2UuTVNHX1NFU1NJRCsiXyIrY2FuLmJhc2UucmVwbGFjZUFsbChsb2NhdGlvbi5ob3N0LCBpY2UuUFQsICJfIiwgaWNlLkRGLCAiXyIpLCB2YWx1ZSwgcGF0aCkKCX0pLAoJQ29va2llOiBzaHkoIuS8muivneWPmOmHjyIsIGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSwgcGF0aCkgewoJCWZ1bmN0aW9uIHNldChrLCB2KSB7IGRvY3VtZW50LmNvb2tpZSA9IGsrIj0iK3YrIjtwYXRoPSIrKHBhdGh8fGljZS5QUykgfQoJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGZvciAodmFyIGsgaW4ga2V5KSB7IHNldChrLCBrZXlba10pIH0ga2V5ID0gdW5kZWZpbmVkIH0KCgkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgdmFyIGNzID0ge30KCQkJZG9jdW1lbnQuY29va2llLnNwbGl0KCI7ICIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgeyB2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IGNzW2xzWzBdXSA9IGxzWzFdIH0pCgkJCXJldHVybiBjcwoJCX0KCgkJdmFsdWUgIT0gdW5kZWZpbmVkICYmIHNldChrZXksIHZhbHVlKQoJCXZhciB2YWwgPSAobmV3IFJlZ0V4cChrZXkrIj0oW147XSopOz8iKSkuZXhlYyhkb2N1bWVudC5jb29raWUpCgkJcmV0dXJuIHZhbCAmJiB2YWwubGVuZ3RoID4gMD8gdmFsWzFdOiAiIgoJfSksCglTZWFyY2hPckNvbmY6IGZ1bmN0aW9uKGNhbiwga2V5LCBkZWYpIHsgcmV0dXJuIGNhbi5iYXNlLmdldFZhbGlkKGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSksIGNhbi5Db25mKGtleSksIGRlZikgfSwKCVNlYXJjaEhhc2g6IGZ1bmN0aW9uKGNhbikgewoJCWlmIChjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLl9pbmRleCA9PSBjYW4ubWlzYy5TZWFyY2goY2FuLCAiY21kIikpIHsKCQkJcmV0dXJuIGxvY2F0aW9uLmhhc2guc2xpY2UoMSkKCQl9Cgl9LAoJU2VhcmNoOiBzaHkoIuivt+axguWPguaVsCIsIGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgeyB2YXIgYXJncyA9IHt9CgkJaWYgKHZhbHVlID09IHVuZGVmaW5lZCAmJiBjYW4uYmFzZS5pc1N0cmluZyhrZXkpKSB7CgkJCXZhciBscyA9IGxvY2F0aW9uLnBhdGhuYW1lLnNwbGl0KGljZS5QUyk7IGlmIChsc1sxXSA9PSBjaGF0LlNIQVJFKSB7IGFyZ3NbY2hhdC5TSEFSRV0gPSBsc1syXSB9CgkJCWZvciAodmFyIGkgPSAyOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgaWYgKHsicG9kIjogdHJ1ZSwgImNtZCI6IHRydWV9W2xzW2ldXSkgeyBhcmdzW2xzW2ldXSA9IGxzW2krMV0gfSB9CgkJfQoJCWxvY2F0aW9uLnNlYXJjaCAmJiBsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkuc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHggPSBpdGVtLnNwbGl0KCI9IikKCQkJeFsxXSAhPSAiIiAmJiAoYXJnc1t4WzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudCh4WzFdKSkKCQl9KQoKCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgewoJCQljYW4uY29yZS5JdGVtKGtleSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgeyBhcmdzW2tleV0gPSB2YWx1ZSB9IGFyZ3Nba2V5XSA9PSAiIiAmJiBkZWxldGUoYXJnc1trZXldKQoJCQl9KQoJCX0gZWxzZSB7CgkJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBhcmdzIH0KCQkJaWYgKHZhbHVlID09IHVuZGVmaW5lZCkgeyByZXR1cm4gYXJnc1trZXldIH0KCQkJYXJnc1trZXldID0gdmFsdWUsIGFyZ3Nba2V5XSA9PSAiIiAmJiBkZWxldGUoYXJnc1trZXldKQoJCX0KCgkJdmFyIHNlYXJjaCA9IGNhbi5jb3JlLkl0ZW0oYXJncywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4ga2V5KyI9IitlbmNvZGVVUklDb21wb25lbnQodmFsdWUpIH0pLmpvaW4oIiYiKQoJCXJldHVybiBzZWFyY2g/IGxvY2F0aW9uLnNlYXJjaCA9IHNlYXJjaDogbG9jYXRpb24uaHJlZiA9IGxvY2F0aW9uLnBhdGhuYW1lCgl9KSwKCU1lcmdlVVJMOiBzaHkoIuWcsOWdgOmTvuaOpSIsIGZ1bmN0aW9uKGNhbiwgb2JqcywgY2xlYXIpIHsKCQl2YXIgcGF0aCA9IGxvY2F0aW9uLnBhdGhuYW1lOyBvYmpzLl9wYXRoICYmIChwYXRoID0gb2Jqcy5fcGF0aCksIGRlbGV0ZShvYmpzLl9wYXRoKQoJCW9ianMucG9kICYmIChwYXRoID0gIi9jaGF0L3BvZC8iK29ianMucG9kKSwgZGVsZXRlKG9ianMucG9kKQoJCW9ianMuY21kICYmIChwYXRoID0gKHBhdGguaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDA/IHBhdGg6ICIvY2hhdCIpKyIvY21kLyIrb2Jqcy5jbWQpLCBkZWxldGUob2Jqcy5jbWQpCgkJb2Jqcy53ZWJzaXRlICYmIChwYXRoID0gKHBhdGguaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDA/IHBhdGg6ICIvY2hhdCIpKyIvd2Vic2l0ZS8iK29ianMud2Vic2l0ZSksIGRlbGV0ZShvYmpzLndlYnNpdGUpCgkJcmV0dXJuIGNhbi5iYXNlLk1lcmdlVVJMKGxvY2F0aW9uLm9yaWdpbitwYXRoKyhjbGVhcj8iIjpsb2NhdGlvbi5zZWFyY2gpLCBvYmpzKQoJfSksCgoJcnVuQWN0aW9uOiBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGxpc3QpIHsKCQlpZiAoY21kc1swXSA9PSBjdHguQUNUSU9OICYmIGxpc3RbY21kc1sxXV0pIHsgcmV0dXJuIGxpc3RbY21kc1sxXV0oY21kcy5zbGljZSgyKSksIHRydWUgfQoJCWlmIChsaXN0W2NtZHNbMF1dKSB7IHJldHVybiBsaXN0W2NtZHNbMF1dKGNtZHMuc2xpY2UoMSkpLCB0cnVlIH0KCX0sCgljb25jYXQ6IGZ1bmN0aW9uKGNhbiwgdG8sIGZyb20pIHsgdG8gPSB0b3x8W10sIGZyb20gPSBmcm9tfHxbXQoJCWlmIChmcm9tWzBdID09IGN0eC5BQ1RJT04gJiYgZnJvbVsxXSA9PSBpY2UuUlVOICYmIGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtmcm9tWzJdXSkgeyByZXR1cm4gZnJvbSB9CgkJaWYgKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtmcm9tWzBdXSkgeyByZXR1cm4gZnJvbSB9CgkJaWYgKGZyb21bMF0gPT0gIl9zZWFyY2giKSB7IHJldHVybiBmcm9tIH0KCQlyZXR1cm4gdG8uY29uY2F0KGZyb20pCgl9LAoJcHJvdG86IGZ1bmN0aW9uKHN1Yiwgc3VwKSB7IHJldHVybiBzdWIuX19wcm90b19fID0gc3VwLCBzdWIgfSwKCglMb2c6IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKV0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCX0sCglJbmZvOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyldCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJV2FybjogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpLCAid2FybiJdCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWFyZ3MucHVzaChpY2UuTkwsIHRoaXMuX2ZpbGVMaW5lKCkuc3BsaXQoaWNlLk5MKS5zbGljZSgyKS5qb2luKGljZS5OTCkpCgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCX0sCglEZWJ1ZzogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpLCAiZGVidWciXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQlhcmdzLnB1c2godGhpcy5maWxlTGluZSgyLCAzKSkKCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgImRlYnVnIl0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goSlNPTi5zdHJpbmdpZnkoYXJndW1lbnRzW2ldKSkgfQoJCW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTW9iaWxlIikgPiAtMSAmJiBhbGVydChKU09OLnN0cmluZ2lmeShhcmdzLmpvaW4oaWNlLlNQKSkpCgl9LAoJRmlsZUxpbmU6IGZ1bmN0aW9uKGRlcHRoLCBsZW5ndGgpIHsKCQlyZXR1cm4gdGhpcy5maWxlTGluZShkZXB0aCsxKS5zcGxpdChpY2UuUFMpLnNsaWNlKDMpLnNsaWNlKC1sZW5ndGgpLmpvaW4oaWNlLlBTKS5zcGxpdCgiKSIpWzBdCgl9LAoJZmlsZUxpbmU6IGZ1bmN0aW9uKGRlcHRoKSB7CgkJcmV0dXJuICh0aGlzLl9maWxlTGluZSgpLnNwbGl0KGljZS5OTClbMStkZXB0aF18fCIiKS50cmltKCkKCX0sCglfZmlsZUxpbmU6IGZ1bmN0aW9uKCkgeyB2YXIgb2JqID0ge30KCQlFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSAmJiBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShvYmosIGFyZ3VtZW50cy5jYWxsZWUpCgkJcmV0dXJuIG9iai5zdGFjayB8fCAiIgoJfSwKCV90aW1lOiBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCkKCQl2YXIgaG91ciA9IG5vdy5nZXRIb3VycygpCgkJaWYgKGhvdXIgPCAxMCkgeyBob3VyID0gIjAiK2hvdXIgfQoJCXZhciBtaW51dGUgPSBub3cuZ2V0TWludXRlcygpCgkJaWYgKG1pbnV0ZSA8IDEwKSB7IG1pbnV0ZSA9ICIwIittaW51dGUgfQoJCXZhciBzZWNvbmQgPSBub3cuZ2V0U2Vjb25kcygpCgkJaWYgKHNlY29uZCA8IDEwKSB7IHNlY29uZCA9ICIwIitzZWNvbmQgfQoJCXJldHVybiBob3VyKyI6IittaW51dGUrIjoiK3NlY29uZCsiLiIrbm93LmdldE1pbGxpc2Vjb25kcygpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9saWIvcGFnZS5qcyIKVm9sY2Fub3MoInBhZ2UiLCB7aGVscDogIueUqOaIt+eVjOmdoiIsIENsYXNzTGlzdDogewoJCWhhczogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJcmV0dXJuIGxpc3QuaW5kZXhPZihrZXkpID4gLTEKCQl9LAoJCWFkZDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSkgeyB2YXIgbGlzdCA9IG9iai5jbGFzc05hbWU/IG9iai5jbGFzc05hbWUuc3BsaXQoaWNlLlNQKTogW10KCQkJdmFyIHZhbHVlID0gY2FuLmJhc2UuQWRkVW5pcShsaXN0LCBrZXkpLmpvaW4oaWNlLlNQKS50cmltKCkKCQkJcmV0dXJuIHZhbHVlICE9IG9iai5jbGFzc05hbWUgJiYgKG9iai5jbGFzc05hbWUgPSB2YWx1ZSksIHZhbHVlCgkJfSwKCQlkZWw6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsgdmFyIGxpc3QgPSBvYmouY2xhc3NOYW1lPyBvYmouY2xhc3NOYW1lLnNwbGl0KGljZS5TUCk6IFtdCgkJCXJldHVybiBvYmouY2xhc3NOYW1lID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPT0ga2V5PyB1bmRlZmluZWQ6IHZhbHVlIH0pLmpvaW4oaWNlLlNQKS50cmltKCkKCQl9LAoJCXNldDogZnVuY3Rpb24oY2FuLCBvYmosIGtleSwgY29uZGl0aW9uKSB7CgkJCXJldHVybiAoY29uZGl0aW9uPyB0aGlzLmFkZChjYW4sIG9iaiwga2V5KTogdGhpcy5kZWwoY2FuLCBvYmosIGtleSkpLmluZGV4T2Yoa2V5KSA+IC0xCgkJfSwKCQluZWc6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsKCQkJcmV0dXJuICh0aGlzLmhhcyhjYW4sIG9iaiwga2V5KT8gdGhpcy5kZWwoY2FuLCBvYmosIGtleSk6IHRoaXMuYWRkKGNhbiwgb2JqLCBrZXkpKS5pbmRleE9mKGtleSkgPiAtMQoJCX0sCgl9LAoJU2VsZWN0QXJnczogZnVuY3Rpb24oY2FuLCBvcHRpb24sIGtleSwgY2IpIHsKCQlpZiAoY2FuLmJhc2UuaXNVbmRlZmluZWQoa2V5KSkgeyB2YXIgdmFsdWUgPSB7fQoJCQljYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgKHZhbHVlW2l0ZW0ubmFtZV0gPSBpdGVtLnZhbHVlKQoJCQl9KTsgcmV0dXJuIFt2YWx1ZV0KCQl9CgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0oa2V5LCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sIGtleSwgdmFsdWUpIH0pLCBba2V5XQoJCX0KCQlpZiAoIWNhbi5iYXNlLmlzRnVuYyhjYikpIHsgdmFyIHZhbHVlID0gY2I7IGNiID0gZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbS50eXBlID09IGh0bWwuQlVUVE9OKSB7IHJldHVybiB9CgkJCXJldHVybiBpdGVtLm5hbWUgJiYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKHZhbHVlKT8gaXRlbS52YWx1ZTogKGl0ZW0udmFsdWUgPSB2YWx1ZSkpfHwiIgoJCX0gfQoJCWlmIChrZXkuaW5kZXhPZihpY2UuUFQpID4gLTEpIHsgcmV0dXJuIFsiIl19CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIG9wdGlvbiwga2V5PyAidGV4dGFyZWFbbmFtZT0iK2tleSsiXSwiKyJpbnB1dFtuYW1lPSIra2V5KyJdLCIrInNlbGVjdFtuYW1lPSIra2V5KyJdIjogIi5hcmdzIiwgY2IpCgl9LAoJU2VsZWN0QWxsOiBzaHkoIumAieaLqeiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5TZWxlY3RBbGwoY2FuLCBpdGVtLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keSwga2V5LCBjYiwgaW50ZXJ2YWwsIGNicykKCQl9KQoJCXJldHVybiBjYW4uY29yZS5MaXN0KHRhcmdldCAmJiB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChrZXkpLCBjYiwgaW50ZXJ2YWwsIGNicykKCX0pLAoJU2VsZWN0OiBzaHkoIumAieaLqeiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIGNiLCBpbnRlcnZhbCwgY2JzKSB7IGlmIChrZXkgPT0gaWNlLlBUKSB7IGNiKHRhcmdldCk7IHJldHVybiBbXSB9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QodGFyZ2V0ICYmIHRhcmdldC5xdWVyeVNlbGVjdG9yQWxsKGNhbi5wYWdlLktleXMoa2V5KSksIGNiLCBpbnRlcnZhbCwgY2JzKQoJfSksCglNb2RpZnk6IHNoeSgi5L+u5pS56IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7IHRhcmdldCA9IHRhcmdldHx8e30KCQl0YXJnZXQgPSBjYW4uYmFzZS5pc09iamVjdCh0YXJnZXQpPyB0YXJnZXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgaWYgKCF0YXJnZXQpIHsgcmV0dXJuIH0KCQljYW4uYmFzZS5pc1N0cmluZyh2YWx1ZSk/ICh0YXJnZXQuaW5uZXJIVE1MID0gdmFsdWUpOiBjYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIHZhbCkgewoJCQlrZXkgPT0gImNsYXNzTmFtZSIgJiYgY2FuLmJhc2UuaXNBcnJheSh2YWwpICYmICh2YWwgPSB2YWwuam9pbihpY2UuU1ApKQoJCQkhY2FuLmJhc2UuaXNPYmplY3QodmFsKT8gKHRhcmdldFtrZXldID0gdmFsKTogY2FuLmNvcmUuSXRlbSh2YWwsIGZ1bmN0aW9uKGssIHYpIHsKCQkJCXZhciBzaXplID0gewoJCQkJCSJoZWlnaHQiOiB0cnVlLCAibWF4LWhlaWdodCI6IHRydWUsICJtaW4taGVpZ2h0IjogdHJ1ZSwKCQkJCQkid2lkdGgiOiB0cnVlLCAibWF4LXdpZHRoIjogdHJ1ZSwgIm1pbi13aWR0aCI6IHRydWUsCgkJCQl9CgkJCQlpZiAoc2l6ZVtrXSAmJiBwYXJzZUludCh2KSA8IDApIHsgcmV0dXJuIHRhcmdldFtrZXldICYmICh0YXJnZXRba2V5XVtrXSA9ICIiKSB9CgoJCQkJdmFyIHNpemUgPSB7CgkJCQkJIm1hcmdpbi10b3AiOiB0cnVlLCAibWFyZ2luLWxlZnQiOiB0cnVlLCAiZm9udC1zaXplIjogdHJ1ZSwKCQkJCQkibGVmdCI6IHRydWUsICJyaWdodCI6IHRydWUsICJ0b3AiOiB0cnVlLCAiYm90dG9tIjogdHJ1ZSwKCQkJCQkiaGVpZ2h0IjogdHJ1ZSwgIm1heC1oZWlnaHQiOiB0cnVlLCAibWluLWhlaWdodCI6IHRydWUsCgkJCQkJIndpZHRoIjogdHJ1ZSwgIm1heC13aWR0aCI6IHRydWUsICJtaW4td2lkdGgiOiB0cnVlLAoJCQkJCSJwYWRkaW5nIjogdHJ1ZSwKCQkJCX0KCgkJCQlpZiAoc2l6ZVtrXSAmJiB2ICYmIChjYW4uYmFzZS5pc051bWJlcih2KSB8fCB2LmluZGV4T2YgJiYgdi5pbmRleE9mKCJweCIpID09IC0xKSkgeyB2ICs9ICJweCIgfQoJCQkJdGFyZ2V0W2tleV0gJiYgKHRhcmdldFtrZXldW2tdID0gdikKCQkJfSkKCQl9KQoJCXJldHVybiB0YXJnZXQKCX0pLAoJUmVtb3ZlOiBzaHkoIuWIoOmZpOiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJcmV0dXJuIHRhcmdldCAmJiB0YXJnZXQucGFyZW50Tm9kZSAmJiB0YXJnZXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0YXJnZXQpLCB0YXJnZXQKCX0pLAoJQ3JlYXRlOiBzaHkoIuWIm+W7uuiKgueCuSIsIGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgewoJCXJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KGtleSksIHZhbHVlKQoJfSksCglBcHBlbmQ6IHNoeSgi5re75Yqg6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgdmFsdWUpIHsgdmFsdWUgPSB2YWx1ZXx8e30KCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoa2V5KSkgeyB2YXIgcmVzID0gY2FuLnBhZ2UuQ3JlYXRlKGNhbiwga2V5LCB2YWx1ZSk7IHJldHVybiB0YXJnZXQuYXBwZW5kQ2hpbGQocmVzKSwgcmVzIH0KCgkJY2FuLmNvcmUuTGlzdChrZXksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGlmICghaXRlbSkgeyByZXR1cm4gfQoJCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSkpIHsgaXRlbSA9IHt2aWV3OiBbaXRlbV19IH0KCQkJaWYgKGl0ZW0ubm9kZU5hbWUpIHsgdGFyZ2V0LmFwcGVuZENoaWxkKGl0ZW0pOyByZXR1cm4gfQoKCQkJLy8g5Z+65pys57uT5p6EOiB0eXBlIG5hbWUgZGF0YSBsaXN0CgkJCXZhciB0eXBlID0gaXRlbS50eXBlfHxodG1sLkRJViwgZGF0YSA9IGl0ZW0uZGF0YXx8e30KCQkJdmFyIG5hbWUgPSBpdGVtLm5hbWV8fGRhdGEubmFtZXx8IiIKCgkJCS8vIOaVsOaNruiwg+aVtAoJCQljYW4uY29yZS5JdGVtKGl0ZW0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJCXN3aXRjaCAoa2V5KSB7CgkJCQkJY2FzZSBtZGIuVFlQRTogYnJlYWsKCQkJCQljYXNlIG1kYi5OQU1FOiBicmVhawoJCQkJCWNhc2UgbWRiLkRBVEE6IGJyZWFrCgkJCQkJY2FzZSBtZGIuTElTVDogYnJlYWsKCQkJCQljYXNlIGh0bWwuSU5ORVI6IGRhdGEuaW5uZXJIVE1MID0gaXRlbS5pbm5lcjsgYnJlYWsKCQkJCQljYXNlIGh0bWwuQ0xJQ0s6IGRhdGEub25jbGljayA9IGl0ZW0uY2xpY2s7IGJyZWFrCgkJCQkJZGVmYXVsdDoKCQkJCQkJaWYgKGl0ZW1ba2V5XSA9PSB1bmRlZmluZWQpIHsgYnJlYWsgfQoJCQkJCQlkYXRhW2tleV0gPSBpdGVtW2tleV0KCQkJCX0KCQkJfSkKCgkJCS8vIOWfuuacrOexu+WeizogdmlldyB0ZXh0IGJ1dHRvbiBzZWxlY3QgaW5wdXQgdXNlcm5hbWUgcGFzc3dvcmQKCQkJLy8g5Z+65pys57G75Z6LOiBpbWcgcm93IHRoIHRkCgkJCWlmIChpdGVtLnZpZXcpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0udmlldykKCQkJCWlmIChjYW4uYmFzZS5pc0FycmF5KGxpc3RbMF0pKSB7IGxpc3RbMF0gPSBsaXN0WzBdLmpvaW4oaWNlLlNQKSB9CgkJCQlsaXN0WzBdICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBkYXRhLCBsaXN0WzBdKQoJCQkJdHlwZSA9IGxpc3RbMV18fGh0bWwuRElWCgkJCQlkYXRhLmlubmVySFRNTCA9IGxpc3RbMl18fGRhdGEuaW5uZXJIVE1MfHwiIgoJCQkJbmFtZSA9IG5hbWV8fGxpc3RbM118fCIiCgoJCQl9IGVsc2UgaWYgKGl0ZW0udGV4dCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS50ZXh0KQoJCQkJZGF0YS5pbm5lckhUTUwgPSBsaXN0WzBdfHxkYXRhLmlubmVySFRNTHx8IiIKCQkJCXR5cGUgPSBsaXN0WzFdfHxodG1sLlNQQU4KCQkJCWxpc3RbMl0gJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGRhdGEsIGxpc3RbMl0pCgoJCQl9IGVsc2UgaWYgKGl0ZW0uYnV0dG9uKSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLmJ1dHRvbikKCQkJCXR5cGUgPSBodG1sLkJVVFRPTiwgbmFtZSA9IG5hbWV8fGxpc3RbMF0KCQkJCWRhdGEuaW5uZXJUZXh0ID0gY2FuLnVzZXIudHJhbnMoY2FuLCBsaXN0WzBdKSwgZGF0YS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQsIG5hbWUpCgkJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCQkJcmV0dXJuIHRydWUKCQkJCX0KCgkJCX0gZWxzZSBpZiAoaXRlbS5zZWxlY3QpIHsgdmFyIGxpc3QgPSBpdGVtLnNlbGVjdAoJCQkJdHlwZSA9IGh0bWwuU0VMRUNULCBkYXRhLm5hbWUgPSBuYW1lID0gbmFtZXx8bGlzdFswXVswXQoJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8bmFtZSkKCQkJCWRhdGEuY2xhc3NOYW1lID0gZGF0YS5jbGFzc05hbWV8fGxpc3RbMF1bMF18fCIiCgoJCQkJaXRlbS5saXN0ID0gbGlzdFswXS5zbGljZSgxKS5tYXAoZnVuY3Rpb24odmFsdWUpIHsKCQkJCQlyZXR1cm4ge3R5cGU6IGh0bWwuT1BUSU9OLCB2YWx1ZTogdmFsdWUsIGlubmVyOiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlKX0KCQkJCX0pCgkJCQlkYXRhLm9uY2hhbmdlID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMV0pICYmIGxpc3RbMV0oZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSwgbmFtZSkKCQkJCX0KCgkJCX0gZWxzZSBpZiAoaXRlbS5pbnB1dCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5pbnB1dCkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8IiIsIGRhdGEubmFtZSA9IGRhdGEubmFtZXx8bmFtZQoJCQkJZGF0YS50eXBlID0gZGF0YS50eXBlfHwidGV4dCIKCQkJCWRhdGEuY2xhc3NOYW1lID0gZGF0YS5jbGFzc05hbWV8fGRhdGEubmFtZQoJCQkJZGF0YS5hdXRvY29tcGxldGUgPSAib2ZmIgoKCQkJCWRhdGEub25mb2N1cyA9IGRhdGEub25mb2N1c3x8ZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgkJCQl9CgkJCQlkYXRhLm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jdGlvbihsaXN0WzFdKSAmJiBsaXN0WzFdKGV2ZW50KQoJCQkJfQoJCQkJZGF0YS5vbmtleXVwID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmN0aW9uKGxpc3RbMl0pICYmIGxpc3RbMl0oZXZlbnQpCgkJCQl9CgkJCX0gZWxzZSBpZiAoaXRlbS51c2VybmFtZSkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS51c2VybmFtZSkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8aHRtbC5VU0VSTkFNRSwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGxpc3RbMV18fGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fGh0bWwuVVNFUk5BTUUKCgkJCX0gZWxzZSBpZiAoaXRlbS5wYXNzd29yZCkgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5wYXNzd29yZCkKCQkJCXR5cGUgPSBodG1sLklOUFVULCBuYW1lID0gbmFtZXx8bGlzdFswXXx8aHRtbC5QQVNTV09SRCwgZGF0YS5uYW1lID0gZGF0YS5uYW1lfHxuYW1lCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGxpc3RbMV18fGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fCJjdXJyZW50LXBhc3N3b3JkIgoJCQkJZGF0YS50eXBlID0gaHRtbC5QQVNTV09SRAoKCQkJfSBlbHNlIGlmIChpdGVtLmltZykgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5pbWcpCgkJCQl0eXBlID0gaHRtbC5JTUcsIGRhdGEuc3JjID0gbGlzdFswXQoKCQkJfSBlbHNlIGlmIChpdGVtLnJvdykgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS5yb3cubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaXRlbS5zdWJ8fGh0bWwuVERdfSB9KQoJCQl9IGVsc2UgaWYgKGl0ZW0udGgpIHsgdHlwZSA9IGh0bWwuVFIKCQkJCWl0ZW0ubGlzdCA9IGl0ZW0udGgubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaHRtbC5USF19IH0pCgkJCX0gZWxzZSBpZiAoaXRlbS50ZCkgeyB0eXBlID0gaHRtbC5UUgoJCQkJaXRlbS5saXN0ID0gaXRlbS50ZC5tYXAoZnVuY3Rpb24odGV4dCkgeyByZXR1cm4ge3RleHQ6IFt0ZXh0LCBodG1sLlREXX0gfSkKCQkJfQoKCQkJLy8g6K+t6KiA6L2s5o2iCgkJCWlmICh0eXBlID09IGh0bWwuU0VMRUNUKSAgewoJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8ZGF0YS5uYW1lKQoJCQl9CgkJCWlmICh0eXBlID09IGh0bWwuSU5QVVQpICB7IGRhdGEudHlwZSA9PSBodG1sLkJVVFRPTiAmJiAoZGF0YS52YWx1ZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS52YWx1ZSkpCgkJCQlpZiAoZGF0YS50eXBlID09IGh0bWwuVEVYVHx8ZGF0YS50eXBlID09IGh0bWwuUEFTU1dPUkR8fCFkYXRhLnR5cGUpIHsgZGF0YS5hdXRvY29tcGxldGUgPSBkYXRhLmF1dG9jb21wbGV0ZXx8Im9mZiIKCQkJCQkvLyBkYXRhLnBsYWNlaG9sZGVyID0gY2FuLnVzZXIudHJhbnMoY2FuLCAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKSkKCQkJCQlkYXRhLnBsYWNlaG9sZGVyID0gKGRhdGEucGxhY2Vob2xkZXJ8fGRhdGEubmFtZXx8IiIpLnNwbGl0KGljZS5QVCkucG9wKCkKCQkJCQlkYXRhLnRpdGxlID0gY2FuLnVzZXIudHJhbnMoY2FuLCBkYXRhLnRpdGxlfHxkYXRhLnBsYWNlaG9sZGVyKQoJCQkJfQoJCQl9CgkJCWlmICh0eXBlID09IGh0bWwuVEVYVEFSRUEpICB7CgkJCQlkYXRhLnBsYWNlaG9sZGVyID0gY2FuLnVzZXIudHJhbnMoY2FuLCAoZGF0YS5wbGFjZWhvbGRlcnx8ZGF0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlBUKS5wb3AoKSkKCQkJfQoKCQkJLy8g5Yib5bu66IqC54K5CgkJCSFkYXRhLm5hbWUgJiYgaXRlbS5uYW1lICYmIChkYXRhLm5hbWUgPSBpdGVtLm5hbWUpCgkJCXZhciBub2RlID0gY2FuLnBhZ2UuQ3JlYXRlKGNhbiwgdHlwZSwgZGF0YSkKCgkJCS8vIOWIm+W7uue0ouW8lQoJCQluYW1lID0gbmFtZXx8ZGF0YS5jbGFzc05hbWV8fHR5cGV8fCIiCgkJCXZhbHVlW25hbWV8fCIiXSA9IHZhbHVlW2RhdGEuY2xhc3NOYW1lfHwiIl0gPSB2YWx1ZVt0eXBlXSA9IG5vZGUKCQkJdmFsdWUuZmlyc3QgPSB2YWx1ZS5maXJzdHx8bm9kZSwgdmFsdWUubGFzdCA9IG5vZGUKCQkJdmFsdWUuX3RhcmdldCA9IHZhbHVlLl90YXJnZXR8fG5vZGUKCgkJCS8vIOmAkuW9kuiKgueCuQoJCQlpdGVtLmxpc3QgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgbm9kZSwgaXRlbS5saXN0LCB2YWx1ZSkKCQkJdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRDaGlsZCAmJiB0YXJnZXQuYXBwZW5kQ2hpbGQobm9kZSkKCQkJY2FuLmJhc2UuaXNGdW5jKGl0ZW0uX2luaXQpICYmIGl0ZW0uX2luaXQobm9kZSwgdmFsdWUpCgkJfSkKCQlyZXR1cm4gdmFsdWUKCX0pLAoJQXBwZW5kczogc2h5KCLmt7vliqDoioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkgewoJCXJldHVybiB0YXJnZXQuaW5uZXJIVE1MID0gIiIsIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwga2V5LCB2YWx1ZSkKCX0pLAoKCUFwcGVuZFRhYmxlOiBzaHkoIua3u+WKoOihqOagvCIsIGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQsIGxpc3QsIGNiKSB7CgkJaWYgKCFtc2cuYXBwZW5kfHxtc2cuYXBwZW5kLmxlbmd0aCA9PSAwKSB7cmV0dXJufQoKCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIGh0bWwuVEFCTEUpCgkJdmFyIHRoZWFkID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsICJ0aGVhZCIpCgkJdmFyIHRib2R5ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFibGUsICJ0Ym9keSIpCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGhlYWQsIFt7dHlwZTogaHRtbC5UUiwgZGF0YToge2RhdGFzZXQ6IHtpbmRleDogLTF9fSwgbGlzdDogCgkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5KSB7CgkJCQlyZXR1cm4ga2V5WzBdID09ICJfIj8gdW5kZWZpbmVkOiB7dGV4dDogW2tleS50cmltKCksIGh0bWwuVEhdfQoJCQl9KQoJCX1dKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRib2R5LCBjYW4uY29yZS5MaXN0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihsaW5lLCBpbmRleCwgYXJyYXkpIHsKCQkJdmFyIF9saXN0ID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJcmV0dXJuIGNiKGNhbi5wYWdlLkNvbG9yKGxpbmVba2V5XSkudHJpbSgpLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkKCQkJfSkKCQkJcmV0dXJuIF9saXN0Lmxlbmd0aCA+IDA/IHt0eXBlOiBodG1sLlRSLCBkYXRhc2V0OiB7aW5kZXg6IGluZGV4fSwgbGlzdDogX2xpc3R9OiB1bmRlZmluZWQKCQl9KSkKCQlyZXR1cm4gY2FuLnBhZ2UuT3JkZXJUYWJsZShjYW4sIHRhYmxlKQoJfSksCglPcmRlclRhYmxlOiBmdW5jdGlvbihjYW4sIHRhYmxlKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFibGUsIGh0bWwuVEgsIGZ1bmN0aW9uKHRoLCBpbmRleCkgewoJCQl0aC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdmFyIGRhdGFzZXQgPSBldmVudC50YXJnZXQuZGF0YXNldAoJCQkJZGF0YXNldFsic29ydF9hc2MiXSA9IChkYXRhc2V0WyJzb3J0X2FzYyJdID09ICIxIikgPyAwOiAxCgkJCQljYW4ucGFnZS5SYW5nZVRhYmxlKGNhbiwgdGFibGUsIGluZGV4LCBkYXRhc2V0WyJzb3J0X2FzYyJdID09ICIxIikKCQkJfQoJCX0pCgkJcmV0dXJuIHRhYmxlCgl9LAoJUmFuZ2VUYWJsZTogZnVuY3Rpb24oY2FuLCB0YWJsZSwgaW5kZXgsIHNvcnRfYXNjKSB7CgkJdmFyIGxpc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJcmV0dXJuIHRyLnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FfHxjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsICJoaWRlIik/IG51bGw6IHRyCgkJfSkuc2xpY2UoMSkKCgkJaW5kZXggPSBjYW4uYmFzZS5pc09iamVjdChpbmRleCk/IGluZGV4OiBbaW5kZXhdCgkJaW5kZXggPSBjYW4uY29yZS5MaXN0KGluZGV4LCBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtID4gLTEpIHsgcmV0dXJuIGl0ZW19IH0pCgkJaWYgKGluZGV4Lmxlbmd0aCA9PSAwKSB7IHJldHVybiB9CgoJCXZhciBpc190aW1lID0gdHJ1ZSwgaXNfbnVtYmVyID0gdHJ1ZQoJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odHIpIHsKCQkJdmFyIHRleHQgPSB0ci5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQKCQkJaXNfdGltZSA9IGlzX3RpbWUgJiYgRGF0ZS5wYXJzZSh0ZXh0KSA+IDAKCQkJaXNfbnVtYmVyID0gaXNfbnVtYmVyICYmICFpc05hTihwYXJzZUludCh0ZXh0KSkKCQl9KQoKCQl2YXIgbnVtX2xpc3QgPSBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHRyKSB7CgkJCXZhciB0ZXh0ID0gdHIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0CgkJCXJldHVybiBpc190aW1lPyBEYXRlLnBhcnNlKHRleHQpOgoJCQkJaXNfbnVtYmVyPyBjYW4uYmFzZS5QYXJzZVNpemUodGV4dCk6IHRleHQKCQl9KQoJCWZ1bmN0aW9uIGlzbGVzcyhhLCBiLCBpbmRleCkgewoJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXSAmJiBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dKSB7CgkJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQgPCBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCkgeyByZXR1cm4gdHJ1ZSB9CgkJCQlpZiAoYS5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQgPiBiLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dCkgeyByZXR1cm4gZmFsc2UgfQoJCQl9CgkJCXJldHVybiBpbmRleC5sZW5ndGggPiAxICYmIGlzbGVzcyhhLCBiLCBpbmRleC5zbGljZSgxKSkKCQl9CgoJCS8vIOmAieaLqeaOkuW6jwoJCWZvciAodmFyIGkgPSAwOyBpIDwgbnVtX2xpc3QubGVuZ3RoOyBpKyspIHsgdmFyIG1pbiA9IGkKCQkJZm9yICh2YXIgaiA9IGkrMTsgaiA8IG51bV9saXN0Lmxlbmd0aDsgaisrKSB7CgkJCQlpZiAobnVtX2xpc3RbbWluXSA9PSBudW1fbGlzdFtqXSAmJiBpbmRleC5sZW5ndGggPiAxICYmIGxpc3RbaW5kZXhbMV1dKSB7CgkJCQkJaWYgKHNvcnRfYXNjPyBpc2xlc3MobGlzdFttaW5dLCBsaXN0W2pdLCBpbmRleC5zbGljZSgxKSk6IGlzbGVzcyhsaXN0W2pdLCBsaXN0W21pbl0sIGluZGV4LnNsaWNlKDEpKSkgewoJCQkJCQltaW4gPSBqCgkJCQkJfQoJCQkJfSBlbHNlIGlmIChzb3J0X2FzYz8gbnVtX2xpc3RbbWluXSA8IG51bV9saXN0W2pdOiBudW1fbGlzdFtqXSA8IG51bV9saXN0W21pbl0pIHsKCQkJCQltaW4gPSBqCgkJCQl9CgkJCX0KCgkJCWlmIChtaW4gIT0gaSkgewoJCQkJdmFyIHRlbXAgPSBudW1fbGlzdFtpXTsgbnVtX2xpc3RbaV0gPSBudW1fbGlzdFttaW5dOyBudW1fbGlzdFttaW5dID0gdGVtcAoJCQkJdmFyIHRlbXAgPSBsaXN0W2ldOyBsaXN0W2ldID0gbGlzdFttaW5dOyBsaXN0W21pbl0gPSB0ZW1wCgkJCX0KCgkJCXZhciB0Ym9keSA9IGxpc3RbaV0ucGFyZW50RWxlbWVudAoJCQlsaXN0W2ldLnBhcmVudEVsZW1lbnQgJiYgdGJvZHkucmVtb3ZlQ2hpbGQobGlzdFtpXSkKCQkJdGJvZHkuYXBwZW5kQ2hpbGQobGlzdFtpXSkKCQl9Cgl9LAoKCUNhY2hlOiBmdW5jdGlvbihuYW1lLCBvdXRwdXQsIGRhdGEpIHsgaWYgKCFuYW1lKSB7IHJldHVybiB9CgkJdmFyIGNhY2hlID0gb3V0cHV0Ll9jYWNoZXx8e307IG91dHB1dC5fY2FjaGUgPSBjYWNoZQoJCWlmIChkYXRhKSB7IGlmIChvdXRwdXQuY2hpbGRyZW4ubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQkJdmFyIHRlbXAgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkKCQkJd2hpbGUgKG91dHB1dC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsgLy8g5YaZ57yT5a2YCgkJCQl2YXIgaXRlbSA9IG91dHB1dC5jaGlsZE5vZGVzWzBdCgkJCQlpdGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaXRlbSksCgkJCQkJdGVtcC5hcHBlbmRDaGlsZChpdGVtKQoJCQl9CgkJCXJldHVybiBjYWNoZVtuYW1lXSA9IHtub2RlOiB0ZW1wLCBkYXRhOiBkYXRhfSwgbmFtZQoJCX0KCQlvdXRwdXQuaW5uZXJIVE1MID0gIiIKCgkJdmFyIGxpc3QgPSBjYWNoZVtuYW1lXTsgaWYgKCFsaXN0KSB7IHJldHVybiB9CgkJd2hpbGUgKGxpc3Qubm9kZS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHsgLy8g6K+757yT5a2YCgkJCXZhciBpdGVtID0gbGlzdC5ub2RlLmNoaWxkTm9kZXNbMF0KCQkJaXRlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGl0ZW0pCgkJCW91dHB1dC5hcHBlbmRDaGlsZChpdGVtKQoJCX0KCQlyZXR1cm4gZGVsZXRlKGNhY2hlW25hbWVdKSwgbGlzdC5kYXRhCgl9LAoJRm9ybWF0OiBmdW5jdGlvbih0eXBlKSB7IHZhciBhcmdzID0gYXJndW1lbnRzCgkJc3dpdGNoICh0eXBlKSB7CgkJCWNhc2UgaHRtbC5BOiByZXR1cm4gIjxhIGhyZWY9JyIrYXJnc1sxXSsiJyB0YXJnZXQ9J19ibGFuayc+IisoYXJnc1syXXx8YXJnc1sxXSkrIjwvYT4iCgkJCWNhc2UgaHRtbC5JTUc6IHJldHVybiBhcmdzWzJdPyAiPGltZyBzcmM9JyIrYXJnc1sxXSsiJyBoZWlnaHQ9IithcmdzWzJdKyI+IjogIjxpbWcgc3JjPSciK2FyZ3NbMV0rIic+IgoJCX0KCX0sCglyZXBsYWNlOiBmdW5jdGlvbihjYW4sIHRleHQsIGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLmJhc2UucmVwbGFjZUFsbCh0ZXh0LCAiPCIsICImbHQ7IiwgIj4iLCAiJmd0OyIsIGtleSwgdmFsdWUpCgl9LAoJQ29sb3I6IGZ1bmN0aW9uKHRleHQpIHsgaWYgKHR5cGVvZiB0ZXh0ICE9IGxhbmcuU1RSSU5HKSB7IHJldHVybiAiIiB9CgkJaWYgKHRleHQuaW5kZXhPZigiaHR0cDovLyIpID09IDAgfHwgdGV4dC5pbmRleE9mKCJodHRwczovLyIpID09IDAgfHwgdGV4dC5pbmRleE9mKCJmdHA6Ly8iKSA9PSAwKSB7CgkJCXZhciBscyA9IHRleHQuc3BsaXQoaWNlLlNQKTsKCQkJdGV4dCA9ICI8YSBocmVmPSciK2xzWzBdKyInIHRhcmdldD0nX2JsYW5rJz4iK2xzWzBdKyI8L2E+Iitscy5zbGljZSgxKS5qb2luKGljZS5TUCkKCQl9OyB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXG4vZywgIjxicj4iKQoKCQlpZiAodGV4dC5pbmRleE9mKCJcMDMzXFsiKSA9PSAtMSkgeyByZXR1cm4gdGV4dCB9CgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6I2YwMCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszMm0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMGYwJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzMzbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmZjAnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzRtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzAwZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNm0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojMGZmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM0OzFtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzAwZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNzsxbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmZmYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMW0vZywgIjxzcGFuIHN0eWxlPSdmb250LXdlaWdodDpib2xkJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzBtL2csICI8L3NwYW4+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFttL2csICI8L3NwYW4+IikKCQlyZXR1cm4gdGV4dAoJfSwKCWlucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbHVlKSB7CgkJdmFyIGlucHV0ID0ge3R5cGU6IGh0bWwuSU5QVVQsIG5hbWU6IGl0ZW0ubmFtZSwgZGF0YTogaXRlbSwgZGF0YXNldDoge30sIF9pbml0OiBpdGVtLl9pbml0LCBzdHlsZTogaXRlbS5zdHlsZXx8e319CgkJaXRlbS52YWx1ZSA9PSBpY2UuQVVUTyAmJiAoaXRlbS52YWx1ZSA9ICIiLCBpdGVtLmFjdGlvbiA9IGljZS5BVVRPKSwgaXRlbS5hY3Rpb24gPT0gaWNlLkFVVE8gJiYgKGlucHV0LmRhdGFzZXQuYWN0aW9uID0gaWNlLkFVVE8pCgoJCXN3aXRjaCAoaXRlbS50eXBlID0gaXRlbS50eXBlfHxodG1sLlRFWFQpIHsKCQkJY2FzZSBodG1sLlRFWFRBUkVBOiBpbnB1dC50eXBlID0gaHRtbC5URVhUQVJFQQoJCQkJaW5wdXQuc3R5bGUuaGVpZ2h0ID0gaW5wdXQuc3R5bGUuaGVpZ2h0fHxjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGh0bWwuVEVYVEFSRUEsIGl0ZW0ubmFtZSwgaHRtbC5IRUlHSFRdLmpvaW4oaWNlLlBUKSl8fGNhbi5Db25mKFsiZmVhdHVyZSIsIGh0bWwuVEVYVEFSRUEsIGh0bWwuSEVJR0hUXS5qb2luKGljZS5QVCkpCgkJCQlpbnB1dC5zdHlsZS53aWR0aCA9IGlucHV0LnN0eWxlLndpZHRofHxjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGh0bWwuVEVYVEFSRUEsIGl0ZW0ubmFtZSwgaHRtbC5XSURUSF0uam9pbihpY2UuUFQpKXx8Y2FuLkNvbmYoWyJmZWF0dXJlIiwgaHRtbC5URVhUQVJFQSwgaHRtbC5XSURUSF0uam9pbihpY2UuUFQpKQoJCQkJLy8gbm8gYnJlYWsKCQkJY2FzZSBodG1sLlVTRVJOQU1FOgoJCQljYXNlIGh0bWwuUEFTU1dPUkQ6CgkJCQkvLyBubyBicmVhawoJCQljYXNlIGh0bWwuVEVYVDoKCQkJCWl0ZW0uYXV0b2NvbXBsZXRlID0gIm9mZiIKCQkJCWl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS50eXBlCgkJCQlpdGVtLnZhbHVlID0gdmFsdWV8fGl0ZW0udmFsdWV8fCIiCgkJCQlpdGVtLnBsYWNlaG9sZGVyID0gaXRlbS5wbGFjZWhvbGRlcnx8aXRlbS5uYW1lfHxpdGVtLnR5cGUKCQkJCWl0ZW0udGl0bGUgPSBpdGVtLnRpdGxlfHxpdGVtLnBsYWNlaG9sZGVyfHxpdGVtLm5hbWV8fGl0ZW0udHlwZQoJCQkJaXRlbS5jbGFzc05hbWUgfHwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGN0eC5BUkdTKQoJCQkJYnJlYWsKCQkJY2FzZSBodG1sLlNFTEVDVDogaW5wdXQudHlwZSA9IGh0bWwuU0VMRUNUCgkJCQlpdGVtLnZhbHVlcyA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0udmFsdWVzKT8gY2FuLmNvcmUuU3BsaXQoaXRlbS52YWx1ZXMpOiBpdGVtLnZhbHVlcwoJCQkJaWYgKCFpdGVtLnZhbHVlcyAmJiBpdGVtLnZhbHVlKSB7IGl0ZW0udmFsdWVzID0gY2FuLmNvcmUuU3BsaXQoaXRlbS52YWx1ZSksIGl0ZW0udmFsdWUgPSBpdGVtLnZhbHVlc1swXSB9CgoJCQkJaXRlbS52YWx1ZSA9IHZhbHVlfHxpdGVtLnZhbHVlLCBpbnB1dC5saXN0ID0gaXRlbS52YWx1ZXMubWFwKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQkJcmV0dXJuIHt0eXBlOiBodG1sLk9QVElPTiwgdmFsdWU6IHZhbHVlLCBpbm5lcjogdmFsdWV9CgkJCQl9KSwgaXRlbS5jbGFzc05hbWUgfHwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGN0eC5BUkdTKQoJCQkJYnJlYWsKCQkJY2FzZSBodG1sLkJVVFRPTjogaXRlbS52YWx1ZSA9IGl0ZW0udmFsdWV8fGl0ZW0ubmFtZXx8bWRiLkxJU1Q7IGJyZWFrCgkJCWNhc2UgInVwZmlsZSI6IGl0ZW0udHlwZSA9IGh0bWwuRklMRTsgYnJlYWsKCQkJY2FzZSBodG1sLlVQTE9BRDogaXRlbS50eXBlID0gaHRtbC5GSUxFLCBpbnB1dC5uYW1lID0gaHRtbC5VUExPQUQ7IGJyZWFrCgkJCWRlZmF1bHQ6CgkJfQoJCXJldHVybiBpbnB1dAoJfSwKCWlucHV0czogZnVuY3Rpb24oY2FuLCBsaXN0KSB7CgkJdmFyIF9saXN0ID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgewoJCQlzd2l0Y2ggKGxpc3RbaV0pIHsgY2FzZSAiIjogX2xpc3QucHVzaCgiIik7IGJyZWFrCgkJCQljYXNlIGljZS5BVVRPOgoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAibGlzdCJ9KQoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAiYmFjayJ9KQoJCQkJCWJyZWFrCgkJCQljYXNlIG1kYi5QQUdFOgoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogbWRiLkxJTUlULCB2YWx1ZTogY2FuLl9tc2cuT3B0aW9uKG1kYi5MSU1JVCl9KQoJCQkJCV9saXN0LnB1c2goe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogbWRiLk9GRkVORCwgdmFsdWU6IGNhbi5fbXNnLk9wdGlvbihtZGIuT0ZGRU5EKX0pCgkJCQkJX2xpc3QucHVzaChtZGIuUFJFViwgbWRiLk5FWFQpCgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6CgkJCQkJKGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IGNhbi5jb3JlLlNwbGl0SW5wdXQobGlzdFtpXSwgaHRtbC5CVVRUT04pOwoJCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuU0VMRUNUKSB7CgkJCQkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IHRhcmdldC52YWx1ZSA9IGl0ZW0udmFsdWV8fGl0ZW0udmFsdWVzWzBdLCB0YXJnZXQub25jaGFuZ2UgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ucnVuKGV2ZW50KSB9IH0KCQkJCQkJfQoJCQkJCQlpdGVtLmFjdGlvbiAmJiAoZnVuY3Rpb24oKSB7IGl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCkgfSB9KSgpCgkJCQkJCWl0ZW0udHlwZSA9PSBodG1sLkJVVFRPTj8gX2xpc3QucHVzaChsaXN0W2ldKTogX2xpc3QucHVzaChpdGVtKQoJCQkJCX0pICgpCgkJCX0KCQl9CgkJcmV0dXJuIF9saXN0Cgl9LAoKCXN0eWxlRGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkRJU1BMQVksIHZhbHVlKSwgdGFyZ2V0LnN0eWxlLmRpc3BsYXkKCX0sCglzdHlsZUhlaWdodDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkhFSUdIVCwgdmFsdWUpLCB0YXJnZXQub2Zmc2V0SGVpZ2h0Cgl9LAoJc3R5bGVXaWR0aDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLldJRFRILCB2YWx1ZSksIHRhcmdldC5vZmZzZXRXaWR0aAoJfSwKCXN0eWxlQ2xhc3M6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgewoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge2NsYXNzTmFtZTogdmFsdWV9KQoJfSwKCXN0eWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgc3R5bGUpIHsgdmFyIHZhbHVlID0ge30KCQlmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgewoJCQlpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCB7c3R5bGU6IGFyZ3VtZW50c1tpLS1dfSkKCQkJfSBlbHNlIGlmICh0eXBlb2YgYXJndW1lbnRzW2ldID09IGxhbmcuVU5ERUZJTkVEKSB7CgkJCQljb250aW51ZQoJCQl9IGVsc2UgewoJCQkJdmFsdWVbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdCgkJCX0KCQl9CgkJcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3N0eWxlOiB2YWx1ZX0pLCB2YWx1ZQoJfSwKCUtleXM6IGZ1bmN0aW9uKCkgeyB2YXIgbGlzdCA9IFtdIC8vIEZTIFNQIEdUIFBUCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJaWYgKHR5cGVvZiB2ID09IGxhbmcuT0JKRUNUKSB7CgkJCQlmb3IgKHZhciBqID0gMDsgaiA8IHYubGVuZ3RoOyBqKyspIHsKCQkJCQlpZiAodHlwZW9mIHZbal0gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCQkJZm9yICh2YXIgayA9IDA7IGsgPCB2W2pdLmxlbmd0aDsgaysrKSB7CgkJCQkJCQlpZiAodHlwZW9mIHZbal1ba10gPT0gbGFuZy5PQkpFQ1QpIHsgdltqXVtrXSA9IHZbal1ba10uam9pbihpY2UuUFQpIH0KCQkJCQkJfQoJCQkJCQl2W2pdID0gdltqXS5qb2luKGljZS5HVCkKCQkJCQl9CgkJCQl9CgkJCQlsaXN0LnB1c2godi5qb2luKGljZS5TUCkpCgkJCX0gZWxzZSB7CgkJCQlsaXN0LnB1c2godisiIikKCQkJfQoJCX0KCQlyZXR1cm4gbGlzdC5qb2luKGljZS5GUykKCX0sCgljc3M6IGZ1bmN0aW9uKHRleHQpIHsKCQl2YXIgc3R5bGVTaGVldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIikKCQlzdHlsZVNoZWV0LnR5cGUgPSAidGV4dC9jc3MiLCBzdHlsZVNoZWV0LmlubmVyVGV4dCA9IHRleHQKCQlkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpCgl9LAoJdGFnaXM6IGZ1bmN0aW9uKHR5cGUsIHRhcmdldCkgeyB0eXBlID0gdHlwZW9mIHR5cGUgPT0gbGFuZy5PQkpFQ1Q/IHR5cGU6IFt0eXBlXQoJCWlmICh0eXBlLmluZGV4T2YodGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKSkgPiAtMSkgeyByZXR1cm4gdHJ1ZSB9Cgl9LAoJb2Zmc2V0VG9wOiBmdW5jdGlvbihpdGVtKSB7IHZhciByZXMgPSAwCgkJd2hpbGUgKGl0ZW0pIHsgcmVzICs9IGl0ZW0ub2Zmc2V0VG9wfHwwLCBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQlyZXR1cm4gcmVzCgl9LAoJb2Zmc2V0TGVmdDogZnVuY3Rpb24oaXRlbSkgeyB2YXIgcmVzID0gMAoJCS8vIGlmIChpdGVtLm9mZnNldExlZnQpIHsgcmV0dXJuIGl0ZW0ub2Zmc2V0TGVmdCB9CgkJd2hpbGUgKGl0ZW0pIHsgcmVzICs9IGl0ZW0ub2Zmc2V0TGVmdHx8MCwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZSB9CgkJcmV0dXJuIHJlcwoJfSwKCWVkaXRhYmxlOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG9rKSB7IGl0ZW0uc2V0QXR0cmlidXRlKCJjb250ZW50ZWRpdGFibGUiLCBvaykgfSwKCWRyYWdnYWJsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBvaykgeyBpdGVtLnNldEF0dHJpYnV0ZSgiZHJhZ2dhYmxlIiwgb2spIH0sCgoJQXBwZW5kVnVlOiBmdW5jdGlvbihjYW4sIG1ldGEsIGxpc3QsIHRhcmdldCkgewoJCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS92dWVAMi9kaXN0L3Z1ZS5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLnJlcXVpcmUoWyJodHRwczovL3VucGtnLmNvbS9lbGVtZW50LXVpL2xpYi9pbmRleC5qcyIsICJodHRwczovL3VucGtnLmNvbS9lbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9pbmRleC5jc3MiXSwgZnVuY3Rpb24oKSB7CgkJCQluZXcgVnVlKGNhbi5iYXNlLkNvcHkoe2VsOiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCBbe3R5cGU6ICJkaXYiLCBpbm5lcjogbGlzdH1dKS5maXJzdH0sIG1ldGEpKQoJCQl9KQoJCX0pCgl9LAoJaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZm9yZSwgcGFyZW50KSB7IHBhcmVudCA9IHBhcmVudHx8YmVmb3JlLnBhcmVudE5vZGUKCQl2YXIgaXRlbSA9IGNhbi5iYXNlLmlzQXJyYXkobGlzdCk/IGNhbi5wYWdlLkFwcGVuZChjYW4sIHBhcmVudCwgbGlzdCkuZmlyc3Q6IGxpc3QKCQlyZXR1cm4gYmVmb3JlICYmIHBhcmVudC5pbnNlcnRCZWZvcmUoaXRlbSwgYmVmb3JlKSwgaXRlbQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL3VzZXIuanMiClZvbGNhbm9zKCJ1c2VyIiwge2hlbHA6ICLnlKjmiLfmk43kvZwiLCBpbmZvOiB7fSwgYWdlbnQ6IHsKCQlzY2FuUVJDb2RlOiBmdW5jdGlvbihjYiwgY2FuKSB7CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogInRleHQiLCB0ZXh0OiAiIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQljYihsaXN0WzBdLCBjYW4uYmFzZS5QYXJzZUpTT04obGlzdFswXSkpCgkJCX0pCgkJfSwKCQlnZXRMb2NhdGlvbjogZnVuY3Rpb24oY2IpIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJCWlmIChjYWxsLl9yZXMpIHsgcmV0dXJuIGNiKGNhbGwuX3JlcykgfQoKCQkJbmF2aWdhdG9yLmdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbihmdW5jdGlvbihyZXMpIHsKCQkJCWNiKGNhbGwuX3JlcyA9IHtsYXRpdHVkZTogcGFyc2VJbnQocmVzLmNvb3Jkcy5sYXRpdHVkZSoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHJlcy5jb29yZHMubG9uZ2l0dWRlKjEwMDAwMCl9KQoJCQl9LCBmdW5jdGlvbihzb21lKSB7CgkJCQl0eXBlb2YgY2IgPT0gbGFuZy5GVU5DVElPTiAmJiBjYih7dHlwZTogInVua25vd24iLCBuYW1lOiAidW5rbm93biIsIGxhdGl0dWRlOiAzOTk4NDEyLCBsb25naXR1ZGU6IDExNjMwNzQ4fSkKCQkJfSApOwoJCX0sCgkJb3BlbkxvY2F0aW9uOiBmdW5jdGlvbihtc2cpIHsKCQkJd2luZG93Lm9wZW4oImh0dHBzOi8vbWFwLmJhaWR1LmNvbS9zZWFyY2gvIitlbmNvZGVVUklDb21wb25lbnQobXNnLk9wdGlvbihtZGIuVEVYVCkpCgkJCQkrIi9AMTI5NTg3NTAuMDg1LDQ4MjU3ODUuNTUsMTZ6P3F1ZXJ5dHlwZT1zJmRhX3NyYz1zaGFyZXVybCZ3ZD0iK2VuY29kZVVSSUNvbXBvbmVudChtc2cuT3B0aW9uKG1kYi5URVhUKSkpCgkJfSwKCQljaG9vc2VJbWFnZTogZnVuY3Rpb24oY2IpIHsKCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IoW10pCgkJfSwKCX0sCglpc1dlaVhpbjogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNaWNyb01lc3NlbmdlciIpID4gLTEsCglpc0lQaG9uZTogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJpUGhvbmUiKSA+IC0xLAoJaXNNb2JpbGU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTW9iaWxlIikgPiAtMSwKCWlzTWFjT1NYOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1hYyBPUyBYIikgPiAtMSwKCWlzV2luZG93czogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJXaW5kb3dzIikgPiAtMSwKCWlzSUU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTVNJRSIpID4gLTEsCglpc0V4dGVuc2lvbjogbG9jYXRpb24gJiYgbG9jYXRpb24ucHJvdG9jb2wgJiYgbG9jYXRpb24ucHJvdG9jb2wgPT0gImNocm9tZS1leHRlbnNpb246IiwKCWlzTG9jYWxGaWxlOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wcm90b2NvbCAmJiBsb2NhdGlvbi5wcm90b2NvbCA9PSAiZmlsZToiLAoJaXNMYW5kc2NhcGU6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPiB3aW5kb3cuaW5uZXJIZWlnaHQgfSwKCWlzUG9ydHJhaXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gd2luZG93LmlubmVyV2lkdGggPCB3aW5kb3cuaW5uZXJIZWlnaHQgfSwKCW1vZDogewoJCWlzUG9kOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDAgfHwgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL3gvIikgPT0gMCksCgkJaXNEaXY6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9kaXYvIikgPT0gMCksCgkJaXNDbWQ6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMCAmJiBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY21kLyIpID4gMCB8fAoJCQlsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9jbWQvIikgPT0gMCB8fCBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvaGVscC8iKSA9PSAwKSwKCQlpc1dlYjogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwICYmIGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi93ZWJzaXRlLyIpID4gMCB8fAoJCQlsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC93ZWJzaXRlLyIpID09IDApLAoJfSwKCglhbGVydDogZnVuY3Rpb24odGV4dCkgeyBhbGVydChKU09OLnN0cmluZ2lmeSh0ZXh0KSkgfSwKCWNvbmZpcm06IGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIGNvbmZpcm0oSlNPTi5zdHJpbmdpZnkodGV4dCkpIH0sCglwcm9tcHQ6IGZ1bmN0aW9uKHRpcCwgZGVmLCBjYiwgc2lsZW50KSB7ICh0ZXh0ID0gc2lsZW50PyBkZWY6IHByb21wdCh0aXAsIGRlZnx8IiIpKSAhPSB1bmRlZmluZWQgJiYgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2IodGV4dCk7IHJldHVybiB0ZXh0IH0sCglyZWxvYWQ6IGZ1bmN0aW9uKGZvcmNlKSB7IChmb3JjZSB8fCBjb25maXJtKCLph43mlrDliqDovb3pobXpnaLvvJ8iKSkgJiYgbG9jYXRpb24ucmVsb2FkKCkgfSwKCWp1bXBzOiBmdW5jdGlvbih1cmwpIHsgbG9jYXRpb24uaHJlZiA9IHVybCB9LAoJb3BlbjogZnVuY3Rpb24odXJsKSB7IHdpbmRvdy5vcGVuKHVybCkgfSwKCWNsb3NlOiBmdW5jdGlvbih1cmwpIHsgd2luZG93LmNsb3NlKCkgfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGltZSwgZm10KSB7IHZhciBub3cgPSBjYW4uYmFzZS5EYXRlKHRpbWUpCgkJdmFyIGxpc3QgPSBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il06IFsi5ZGo5pelIiwgIuWRqOS4gCIsICLlkajkuowiLCAi5ZGo5LiJIiwgIuWRqOWbmyIsICLlkajkupQiLCAi5ZGo5YWtIl0KCQlyZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAoZm10fHwiJXktJW0tJWQgJUg6JU06JVMiKS5yZXBsYWNlKCIldyIsIGxpc3Rbbm93LmdldERheSgpXSkpCgl9LAoJYXJnczogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7CgkJCXJldHVybiBjYW4uYmFzZS5PYmoobG9jYWxTdG9yYWdlLmdldEl0ZW0oY3R4LkFSR1MpLCB7fSkKCQl9CgkJcmV0dXJuIHt9Cgl9LAoKCXRpdGxlOiBmdW5jdGlvbih0ZXh0KSB7CgkJaWYgKHdpbmRvdy53ZWJ2aWV3KSB7IHJldHVybiB0aXRsZSh0ZXh0KSB9CgkJcmV0dXJuIHRleHQgJiYgKGRvY3VtZW50LnRpdGxlID0gVm9sY2Fub3MubWV0YS5hcmdzLm5hbWV8fHRleHQpLCBkb2N1bWVudC50aXRsZQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIG5hbWUpIHsgY2FuLmJhc2UuaXNBcnJheShuYW1lKSAmJiAobmFtZSA9IGNhbi5iYXNlLmpvaW4obmFtZSkpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgKG5hbWUgKz0gIiBtb2JpbGUiKSAmJiBjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIChuYW1lICs9ICIgbGFuZHNjYXBlIikKCQljYW4udXNlci5sYW5ndWFnZShjYW4pICYmIChuYW1lICs9ICIgIitjYW4udXNlci5sYW5ndWFnZShjYW4pKQoJCWNhbi5Db25mKCJkaXNwbGF5IikgJiYgKG5hbWUgKz0gIiAiK2Nhbi5Db25mKCJkaXNwbGF5IikpCgkJY2FuLnVzZXIubW9kLmlzQ21kICYmIChuYW1lICs9ICIgc2ltcGxlIikKCQljYW4ucGFnZS5zdHlsZUNsYXNzKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIG5hbWUpCgl9LAoJbGFuZ3VhZ2U6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwgImxhbmd1YWdlIikgfSwKCXRyYW5zOiBmdW5jdGlvbihjYW4sIHRleHQsIGxpc3QpIHsgaWYgKGNhbi5iYXNlLmlzT2JqZWN0KHRleHQpKSB7CgkJCXJldHVybiBjYW4uY29yZS5JdGVtKHRleHQsIGZ1bmN0aW9uKGssIHYpIHsgY2FuLmNvcmUuVmFsdWUoY2FuLl90cmFucywgaywgdikgfSkKCQl9CgoJCWlmIChjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiIpIHsgcmV0dXJuIHRleHQgfQoJCWlmIChjYW4uYmFzZS5pc0Z1bmN0aW9uKHRleHQpKSB7IHRleHQgPSB0ZXh0Lm5hbWV8fCIiIH0KCQlyZXR1cm4gbGlzdCYmbGlzdFt0ZXh0XSB8fCBjYW4uQ29uZigidHJhbnMuIit0ZXh0KSB8fCBjYW4uQ29uZigiZmVhdHVyZS5fdHJhbnMuIit0ZXh0KSB8fCBjYW4uX3RyYW5zJiZjYW4uX3RyYW5zW3RleHRdIHx8IHsKCQkJImNyZWF0ZSI6ICLliJvlu7oiLCAicmVtb3ZlIjogIuWIoOmZpCIsICJpbnNlcnQiOiAi5re75YqgIiwgImRlbGV0ZSI6ICLliKDpmaQiLCAibW9kaWZ5IjogIue8lui+kSIsCgkJCSJpbnB1dHMiOiAi6KGl5YWoIiwgInBydW5lcyI6ICLmuIXnkIYiLCAiZXhwb3J0IjogIuWvvOWHuiIsICJpbXBvcnQiOiAi5a+85YWlIiwKCQkJImxpc3QiOiAi5p+l55yLIiwgImJhY2siOiAi6L+U5ZueIiwgInJ1biI6ICLmiafooYwiLCAiZG9uZSI6ICLlrozmiJAiLCAic2hhcmUiOiAi5YWx5LqrIiwKCQkJImVkaXQiOiAi57yW6L6RIiwgInNhdmUiOiAi5L+d5a2YIiwgImNvcHkiOiAi5aSN5Yi2IiwgInNob3ciOiAi5pi+56S6IiwgImhpZGUiOiAi6ZqQ6JePIiwKCQkJInByb2plY3QiOiAi6aG555uuIiwgInByb2ZpbGUiOiAi6K+m5oOFIiwgImFjdGlvbnMiOiAi5Y+C5pWwIiwKCQkJImRvd25sb2FkIjogIuS4i+i9vSIsICJ0b2ltYWdlIjogIuaIquWbviIsCgkJCSJwbHVnaW4iOiAi5o+S5Lu2IiwKCQkJInByZXYiOiAi5LiK5LiA6aG1IiwgIm5leHQiOiAi5LiL5LiA6aG1IiwKCgkJCSJDbG9zZSI6ICLlhbPpl60iLAoJCQkiQ2xvc2Ugb3RoZXJzIjogIuWFs+mXreWFtuWugyIsCgkJCSJDbG9zZSBhbGwiOiAi5YWz6Zet5omA5pyJIiwKCgkJCSJ0cmFzaCI6ICLliKDpmaQiLAoJCQkib3BlbiI6ICLmiZPlvIAiLCAiY2xvc2UiOiAi5YWz6ZetIiwKCQkJInN0YXJ0IjogIuWQr+WKqCIsICJzdG9wIjogIuWBnOatoiIsCgkJCSJiZWdpbiI6ICLlvIDlp4siLCAiZW5kIjogIue7k+adnyIsCgkJCSJjbGVhciI6ICLmuIXnqboiLCAicmVmcmVzaCI6ICLliLfmlrAiLAoJCQkic3VibWl0IjogIuaPkOS6pCIsICJjYW5jZWwiOiAi5Y+W5raIIiwKCQkJImxhYmVsIjogIuagh+etviIsICJleGVjIjogIuaJp+ihjCIsCgkJfVt0ZXh0XXx8dGV4dAoJfSwKCXRvYXN0U2NyaXB0OiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7CgkJdmFyIHVpID0gY2FuLnVzZXIudG9hc3QoY2FuLCB7dGl0bGU6IHRpdGxlLCBkdXJhdGlvbjogLTEsIHdpZHRoOiAtMzAwLCBjb250ZW50OiBjb250ZW50LCBhY3Rpb246IFtjbGkuQ0xPU0VdfSkKCQljYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4sIHVpLl90YXJnZXQpCgl9LAoJdG9hc3RDb25maXJtOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlLCBhY3Rpb24pIHsKCQlyZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCB7dGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50LCBhY3Rpb246IGFjdGlvbnx8W2NsaS5DTE9TRV0sIGR1cmF0aW9uOiAtMSwgd2lkdGg6IC0zMDB9KQoJfSwKCXRvYXN0UHJvY2VzczogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSkgeyByZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCBjb250ZW50LCB0aXRsZXx8aWNlLlBST0NFU1MsIC0xKSB9LAoJdG9hc3RTdWNjZXNzOiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sIGNvbnRlbnQsIHRpdGxlfHxpY2UuU1VDQ0VTUykgfSwKCXRvYXN0OiBmdW5jdGlvbihjYW4sIGNvbnRlbnQsIHRpdGxlLCBkdXJhdGlvbiwgcHJvZ3Jlc3MpIHsKCQl2YXIgbWV0YSA9IGNhbi5iYXNlLmlzT2JqZWN0KGNvbnRlbnQpPyBjb250ZW50OiB7Y29udGVudDogY29udGVudCwgdGl0bGU6IHRpdGxlfHxjYW4uX2hlbHAsIGR1cmF0aW9uOiBkdXJhdGlvbiwgcHJvZ3Jlc3M6IHByb2dyZXNzfQoJCXZhciB3aWR0aCA9IG1ldGEud2lkdGh8fDQwMCwgaGVpZ2h0ID0gbWV0YS5oZWlnaHR8fDEwMDsgaWYgKHdpZHRoIDwgMCkgeyB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoICsgd2lkdGggfQoKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCAgW3t2aWV3OiBjaGF0LlRPQVNULCBzdHlsZTogewoJCQlsZWZ0OiAod2luZG93LmlubmVyV2lkdGgtd2lkdGgpLzIsIHdpZHRoOiB3aWR0aCwgYm90dG9tOiAxMDAsCgkJfSwgbGlzdDogWwoJCQl7dGV4dDogW21ldGEudGl0bGV8fCIiLCBodG1sLkRJViwgaHRtbC5USVRMRV0sIHRpdGxlOiAi54K55Ye75aSN5Yi2Iiwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgbWV0YS50aXRsZSkKCQkJfX0sCgkJCXt2aWV3OiAiZHVyYXRpb24iLCB0aXRsZTogIueCueWHu+WFs+mXrSIsIG9uY2xpY2s6IGZ1bmN0aW9uKCkgeyBhY3Rpb24uY2xvc2UoKSB9fSwKCQkJY2FuLmJhc2UuaXNPYmplY3QobWV0YS5jb250ZW50KT8gbWV0YS5jb250ZW50OiB7dGV4dDogW21ldGEuY29udGVudHx8IuaJp+ihjOaIkOWKnyIsIGh0bWwuRElWLCAiY29udGVudCJdfSwKCgkJCXt2aWV3OiBodG1sLkFDVElPTn0sIG1ldGEucHJvZ3Jlc3MgIT0gdW5kZWZpbmVkICYmIHt2aWV3OiAicHJvZ3Jlc3MiLCBzdHlsZToge3dpZHRoOiB3aWR0aH0sIGxpc3Q6IFsKCQkJCXt2aWV3OiAiY3VycmVudCIsIHN0eWxlOiB7d2lkdGg6IChtZXRhLnByb2dyZXNzfHwwKS8xMDAqd2lkdGh9fSwKCQkJXX0sCgkJXSB9XSkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgbWV0YS5hY3Rpb24gJiYgbWV0YS5hY3Rpb24ubGlzdD8gbWV0YS5hY3Rpb24ubGlzdDogbWV0YS5hY3Rpb258fFsiIl0sIHVpLmFjdGlvbiwgewoJCQlfZW5naW5lOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCQl2YXIgY2IgPSBtZXRhLmFjdGlvbltidXR0b25dfHxtZXRhLmFjdGlvbjsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgYnV0dG9uKQoJCQl9LAoJCQlvcGVuOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKG1ldGEuY29udGVudC5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBjYW4udXNlci5vcGVuKG1ldGEuY29udGVudCkgfQoJCQkJaWYgKG1ldGEudGl0bGUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgY2FuLnVzZXIub3BlbihtZXRhLnRpdGxlKSB9CgkJCX0sCgkJCWNsb3NlOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBhY3Rpb24uX3RhcmdldCksIGFjdGlvbi50aW1lci5zdG9wID0gdHJ1ZSB9LAoJCQl0aW1lcjogY2FuLmNvcmUuVGltZXIoe2ludGVydmFsOiAxMDAsIGxlbmd0aDogKHBhcnNlSW50KG1ldGEuZHVyYXRpb258fDEwMDApKS8xMDB9LCBmdW5jdGlvbihldmVudCwgaW50ZXJ2YWwsIGluZGV4KSB7CgkJCQlpZiAoaW5kZXggPiAzMCkgeyB1aS5kdXJhdGlvbi5pbm5lckhUTUwgPSBwYXJzZUludChpbmRleC8xMCkraWNlLlBUKyhpbmRleCUxMCkrInMuLi4iIH0KCQkJfSwgZnVuY3Rpb24oKSB7IGFjdGlvbi5jbG9zZSgpIH0pLCBfdGFyZ2V0OiB1aS5fdGFyZ2V0LCB1aTogdWksCgkJfSk7IGNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdWkuX3RhcmdldCkKCgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05UT0FTVCwgY2FuLnJlcXVlc3Qoe30sIHt0aW1lOiBjYW4ubWlzYy5fdGltZSgpLCB0aXRsZTogbWV0YS50aXRsZSwgY29udGVudDogbWV0YS5jb250ZW50LCBmaWxlbGluZTogY2FuLm1pc2MuRmlsZUxpbmUoMiwgMil9KSkKCQlyZXR1cm4gIW1ldGEuYWN0aW9uICYmIGNhbi5vbm1vdGlvbi5mbG9hdC5hZGQoY2FuLCBjaGF0LlRPQVNULCBhY3Rpb24pLCBhY3Rpb24KCX0sCglzaGFyZTogZnVuY3Rpb24oY2FuLCBtc2csIGNtZCkgewoJCWNhbi5ydW4obXNnLCBjbWR8fFtjdHguQUNUSU9OLCBjaGF0LlNIQVJFXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgewoJCQkJdGl0bGU6IG1zZy5BcHBlbmQobWRiLk5BTUUpLCBkdXJhdGlvbjogLTEsCgkJCQljb250ZW50OiBtc2cuQXBwZW5kKG1kYi5URVhUKSwgYWN0aW9uOiBbY2xpLkNMT1NFLCBjbGkuT1BFTl0sCgkJCX0pLCBjYW4udXNlci5jb3B5KG1zZy5fZXZlbnQsIGNhbiwgbXNnLkFwcGVuZChtZGIuTkFNRSkpCgkJfSkKCX0sCglsb2dpbjogZnVuY3Rpb24oY2FuLCBjYiwgbWV0aG9kLCBhdXRvKSB7IG1ldGhvZCA9IGNhbi5iYXNlLk9iaihtZXRob2QsIFsi55m75b2VIiwgIuaJq+eggSJdKQoJCXZhciBsaXN0ID0gewoJCQki55m75b2VIjogZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgZGF0YSkgewoJCQkJY2FuLnJ1bih7fSwgW2FhYS5MT0dJTiwgZGF0YVtodG1sLlVTRVJOQU1FXSwgZGF0YVtodG1sLlBBU1NXT1JEXV0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfVVNFUk5BTUUpKSB7CgkJCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQkJCQl9IGVsc2UgewoJCQkJCQljYW4udXNlci50b2FzdChjYW4sICLnlKjmiLflkI3miJblr4bnoIHplJnor68iKQoJCQkJCX0KCQkJCX0pCgkJCQlyZXR1cm4gdHJ1ZQoJCQl9LCAKCQkJIuaJq+eggSI6IGZ1bmN0aW9uKCkgewoJCQkJY2FuLm1pc2MuV1NTKGNhbiwge3R5cGU6IGh0bWwuQ0hST01FLCBjbWQ6ICJwd2QifSwgZnVuY3Rpb24oZXZlbnQsIG1zZywgY21kLCBhcmcpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0KCQkJCQlpZiAoY21kID09ICJwd2QiKSB7CgkJCQkJCXJldHVybiBjYW4udXNlci50b2FzdChjYW4sIGFyZ1syXSwgYXJnWzFdLCAtMSksIG1zZy5SZXBseSgpCgkJCQkJfQoJCQkJCWlmIChjbWQgPT0gaWNlLk1TR19TRVNTSUQpIHsKCQkJCQkJcmV0dXJuIGNhbi5taXNjLkNvb2tpZVNlc3NpZChjYW4sIGFyZ1swXSksIG1zZy5SZXBseSgpLCBjYW4udXNlci5yZWxvYWQodHJ1ZSkKCQkJCQl9CgkJCQkJY2FuLnNlYXJjaChldmVudCwgbXNnW2ljZS5NU0dfREVUQUlMXXx8W10sIGZ1bmN0aW9uKG1zZykgeyBtc2cuUmVwbHkoKSB9KQoJCQkJfSkKCQkJfSwKCQkJIuaOiOadgyI6IGZ1bmN0aW9uKCkgewoJCQkJY2FuLm1pc2MuV1NTKGNhbiwge3R5cGU6IGh0bWwuQ0hST01FLCBjbWQ6ICJzc28iLCAidXNlci53ZWIiOiBsb2NhdGlvbi5ocmVmfSwgZnVuY3Rpb24oZXZlbnQsIG1zZywgY21kLCBhcmcpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0KCQkJCQlpZiAoY21kID09ICJwd2QiKSB7CgkJCQkJCXJldHVybiBsb2NhdGlvbi5ocmVmID0gYXJnWzFdCgkJCQkJfQoJCQkJCWlmIChjbWQgPT0gaWNlLk1TR19TRVNTSUQpIHsKCQkJCQkJcmV0dXJuIGNhbi5taXNjLkNvb2tpZVNlc3NpZChjYW4sIGFyZ1swXSksIG1zZy5SZXBseSgpLCBjYW4udXNlci5yZWxvYWQodHJ1ZSkKCQkJCQl9CgkJCQkJY2FuLnNlYXJjaChldmVudCwgbXNnW2ljZS5NU0dfREVUQUlMXXx8W10sIGZ1bmN0aW9uKG1zZykgeyBtc2cuUmVwbHkoKSB9KQoJCQkJfSkKCQkJfSwKCQkJIumjnuS5piI6IGZ1bmN0aW9uKCkgeyBsb2NhdGlvbi5ocmVmID0gIi9jaGF0L2xhcmsvc3NvIiB9LAoJCX07IGlmIChhdXRvKSB7IHJldHVybiBsaXN0WyLmjojmnYMiXSgpIH0gZWxzZSBpZiAobWV0aG9kLmxlbmd0aCA9PSAxKSB7IGxpc3RbbWV0aG9kWzBdXSgpOyByZXR1cm4gfQoKCQl2YXIgdWkgPSBjYW4udXNlci5pbnB1dCh7fSwgY2FuLCBbe3R5cGU6IGh0bWwuVVNFUk5BTUV9LCB7dHlwZTogaHRtbC5QQVNTV09SRH1dLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBkYXRhKSB7IHJldHVybiBsaXN0W2J1dHRvbl0oZXZlbnQsIGJ1dHRvbiwgZGF0YSkgfSwgbWV0aG9kKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHVpLl90YXJnZXQsIHtjbGFzc05hbWU6ICJpbnB1dCBsb2dpbiIsIHN0eWxlOiB7bGVmdDogKHdpbmRvdy5pbm5lcldpZHRoLXVpLl90YXJnZXQub2Zmc2V0V2lkdGgpLzIsIHRvcDogd2luZG93LmlubmVySGVpZ2h0LzZ9fSkKCX0sCglsb2dvdXQ6IGZ1bmN0aW9uKGNhbiwgZm9yY2UpIHsgaWYgKGZvcmNlfHxjYW4udXNlci5jb25maXJtKCJsb2dvdXQ/IikpIHsKCQljYW4ucnVuQWN0aW9uKHt9LCBhYWEuTE9HT1VULCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuU0hBUkUpPyBjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlNIQVJFLCAiIik6IGNhbi51c2VyLnJlbG9hZCh0cnVlKQoJCX0pCgl9IH0sCgoJdG9QTkc6IGZ1bmN0aW9uKGNhbiwgbmFtZSwgdGV4dCwgaGVpZ2h0LCB3aWR0aCkgewoJCWlmICh0ZXh0LmluZGV4T2YoIjxzdmciKSAhPSAwKSB7CgkJCXRleHQgPSAnPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPicrdGV4dCsiPC9zdmc+IgoJCX0KCQl2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChodG1sLklNRykKCQlpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CgkJCXZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKQoJCQljYW52YXMuaGVpZ2h0ID0gaGVpZ2h0LCBjYW52YXMud2lkdGggPSB3aWR0aAoJCQljYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UoaW1nLCAwLCAwKQoKCQkJdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIikKCQkJYS5ocmVmID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikKCQkJYS5kb3dubG9hZCA9IG5hbWUsIGEuY2xpY2soKQoJCX0sIGltZy5zcmMgPSAiZGF0YTppbWFnZS9zdmcreG1sLCIrZW5jb2RlVVJJQ29tcG9uZW50KHRleHQpCgl9LAoJY29weTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGV4dCkgeyBpZiAoIXRleHQpIHsgcmV0dXJuIH0KCQlpZiAobmF2aWdhdG9yLmNsaXBib2FyZCkgeyB2YXIgb2sgPSBmYWxzZQoJCQluYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KS50aGVuKGZ1bmN0aW9uKCkgeyBvayA9IHRydWUgfSk7IGlmIChvaykgewoJCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgdGV4dCwgImNvcHkgc3VjY2VzcyIpLCBjYW4ubWlzYy5Mb2coImNvcHkiLCB0ZXh0KQoJCQkJcmV0dXJuIHRleHQKCQkJfQoJCX0KCgkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUsIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgdmFsdWU6IHRleHR9XSkuZmlyc3QKCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBpbnB1dCksIGRvY3VtZW50LmV4ZWNDb21tYW5kKCJDb3B5IiksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGlucHV0KQoJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIHRleHQsICJjb3B5IHN1Y2Nlc3MiKSwgY2FuLm1pc2MuTG9nKCJjb3B5IiwgdGV4dCkKCQlyZXR1cm4gdGV4dAoJfSwKCWNhcnRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KSB7IC8vIGV2ZW50IGl0ZW0gbWV0YQoJCW1ldGEgPSBtZXRhfHxjYW4ub25kZXRhaWx8fGNhbi5vbmFjdGlvbnx8e30sIGxpc3QgPSBsaXN0JiZsaXN0Lmxlbmd0aCA+IDA/IGxpc3Q6IG1ldGEubGlzdHx8Y2FuLmNvcmUuSXRlbShtZXRhKXx8W107IGlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7IHJldHVybiB9CgkJY2IgPSBjYnx8ZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgeyB2YXIgY2IgPSBtZXRhW2J1dHRvbl18fG1ldGFbIl9lbmdpbmUiXTsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgY2FuLCBidXR0b24pIH0KCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZG9jdW1lbnQuYm9keSwgW3t2aWV3OiBjaGF0LkNBUlRFLCBzdHlsZToge2xlZnQ6IDAsIHRvcDogMH0sIG9ubW91c2VsZWF2ZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJLy8gY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkKCQl9LCBsaXN0OiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCXJldHVybiBjYW4uYmFzZS5pc1N0cmluZyhpdGVtKT8gaXRlbSA9PSIiPyAvKiBzcGFjZSAqLyB7dmlldzogInNwYWNlIn06IC8qIHN0cmluZyAqLyB7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbSksIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgbWV0YSwgaW5kZXgpCgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FydGUuX2Zsb2F0ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhcnRlLl9mbG9hdC5fdGFyZ2V0KQoJCQl9IH1dIH06IGNhbi5iYXNlLmlzQXJyYXkoaXRlbSk/IC8qIGFycmF5ICovIHt2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogY2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtWzBdKSsiIC0+ICJ9XSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIHN1YiA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIG1ldGEsIGl0ZW0uc2xpY2UoMSksIGNiLCBjYXJ0ZSkKCQkJCWNhcnRlLl9mbG9hdCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYXJ0ZS5fZmxvYXQuX3RhcmdldCksIGNhcnRlLl9mbG9hdCA9IHN1YgoJCQkJY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCBzdWIuX3RhcmdldCwgdHJ1ZSkKCQkJfSB9OiAvKiBvYmplY3QgKi8ge3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0ubmFtZSksIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbS5uYW1lLCBtZXRhLCBpbmRleCkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FydGUuX2Zsb2F0ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhcnRlLl9mbG9hdC5fdGFyZ2V0KQoJCQl9IH1dIH0KCQl9KSB9XSApCgoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aS5fdGFyZ2V0LCBjaGF0LkZMT0FUKQoJCXVpLl90YXJnZXQub25tb3VzZW92ZXIgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkgfQoJCXZhciBjYXJ0ZSA9IHtfdGFyZ2V0OiB1aS5fdGFyZ2V0LCBfcGFyZW50OiBwYXJlbnQsIGxheW91dDogY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCB1aS5fdGFyZ2V0KX0KCQlyZXR1cm4gY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpLCBjYXJ0ZQoJfSwKCWNhcnRlUmlnaHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpIHsKCQl2YXIgY2FydGUgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KQoJCXJldHVybiBjYW4ucGFnZS5zdHlsZShjYW4sIGNhcnRlLl90YXJnZXQsIGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgY2FydGUuX3RhcmdldCwgdHJ1ZSkpLCBjYXJ0ZQoJfSwKCWNhcnRlQ2xpZW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KSB7CgkJdmFyIHVpID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLl90YXJnZXQsIHtsZWZ0OiBldmVudC5jbGllbnRYLCB0b3A6IGV2ZW50LmNsaWVudFl9KQoJfSwKCglpbnB1dDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgZm9ybSwgY2IsIGJ1dHRvbikgeyBpZiAoIWZvcm0gfHwgZm9ybS5sZW5ndGggPT0gMCkgeyByZXR1cm4gY2IoKSB9CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgZXZlbnQgPSBldmVudC5fZXZlbnR8fGV2ZW50CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZG9jdW1lbnQuYm9keSwgW3t2aWV3OiBbaHRtbC5JTlBVVF0sIHN0eWxlOiB7bGVmdDogMCwgdG9wOiAwfSwgbGlzdDogWwoJCQl7dmlldzogImNvbnRlbnQiLCBsaXN0OiBbe3ZpZXc6IFtodG1sLk9QVElPTiwgaHRtbC5UQUJMRV0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QoZm9ybSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaXRlbSA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBpdGVtfTogaXRlbS5sZW5ndGggPiAwPyB7dHlwZTogaHRtbC5TRUxFQ1QsIG5hbWU6IGl0ZW1bMF0sIHZhbHVlczogaXRlbS5zbGljZSgxKX06IGl0ZW0KCQkJCWl0ZW0udHlwZSA9IGl0ZW0udHlwZXx8KGl0ZW0udmFsdWVzPyBodG1sLlNFTEVDVDogaXRlbS5uYW1lID09IGh0bWwuVEVYVD8gaHRtbC5URVhUQVJFQTogaHRtbC5URVhUKQoKCQkJCWl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCQlpdGVtLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgewoJCQkJCQl2YXIgX21zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUUsIGFjdGlvbjogbXNnLk9wdGlvbihodG1sLkFDVElPTil9LCBtc2csIGNhbi5PcHRpb24oKSkKCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkudGFibGUsIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWl0ZW0ubmFtZSAmJiBpdGVtLnZhbHVlICYmIF9tc2cuT3B0aW9uKGl0ZW0ubmFtZSwgaXRlbS52YWx1ZSkKCQkJCQkJfSkKCQkJCQkJY2FuLnJ1bihldmVudCwgY21kcywgY2IsIHRydWUpCgkJCQkJfQoKCQkJCQlpZiAoaXRlbS5uYW1lICE9ICJhY3Rpb24iICYmIGl0ZW0ubmFtZSkgewoJCQkJCQl0YXJnZXQudmFsdWUgPSBtc2cuT3B0aW9uKGl0ZW0ubmFtZSl8fGNhbi5PcHRpb24oaXRlbS5uYW1lKXx8dGFyZ2V0LnZhbHVlfHwiIgoJCQkJCX0KCQkJCQlpdGVtLm1vZGUgPSAic2ltcGxlIgoJCQkJCWlmIChpdGVtLnR5cGUgPT0gaHRtbC5VU0VSTkFNRSkgeyByZXR1cm4gfQoJCQkJCWlmIChpdGVtLnR5cGUgPT0gaHRtbC5QQVNTV09SRCkgeyByZXR1cm4gfQoJCQkJCWNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQpCgkJCQl9CgoJCQkJLy8gcmV0dXJuIHt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFt7dGV4dDogaXRlbS5fdHJhbnN8fGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbS5uYW1lKXx8IiJ9XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtKV19IF19CgkJCQlyZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dHlwZTogaHRtbC5URCwgbGlzdDogW3t0ZXh0OiBpdGVtLm5hbWV8fCIifV19LCB7dHlwZTogaHRtbC5URCwgbGlzdDogW2Nhbi5wYWdlLmlucHV0KGNhbiwgaXRlbSldfSBdfQoJCQl9KX1dfSwge3ZpZXc6IGh0bWwuQUNUSU9OfSwKCQldfV0pCgoJCXZhciBsYXlvdXQgPSBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIHVpLl90YXJnZXQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLl90YXJnZXQsIGNoYXQuRkxPQVQpCgoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGJ1dHRvbnx8W2h0bWwuU1VCTUlULCBodG1sLkNBTkNFTF0sIHVpLmFjdGlvbiwgewoJCQlmb2N1czogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuZmlyc3QsIGh0bWwuSU5QVVRfQVJHUylbMF0uZm9jdXMoKSB9LAoJCQljYW5jZWw6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpIH0sCgkJCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBhY3Rpb24uc3VibWl0KGV2ZW50LCBjYW4sIGJ1dHRvbikgfSwKCQkJc3VibWl0OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgdmFyIGRhdGEgPSB7fSwgYXJncyA9IFtdLCBsaXN0ID0gW10KCQkJCWxpc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS50YWJsZSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgewoJCQkJCXJldHVybiBpdGVtLm5hbWUgJiYgaXRlbS52YWx1ZSAmJiBhcmdzLnB1c2goaXRlbS5uYW1lLCBpdGVtLnZhbHVlKSwgZGF0YVtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZQoJCQkJfSkKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFfSkKCQkJCSFjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgYnV0dG9uOiBidXR0b24sIGRhdGE6IGRhdGEsIGxpc3Q6IGxpc3QsIGFyZ3M6IGFyZ3N9KSAmJiBhY3Rpb24uY2FuY2VsKCkKCQkJCS8vIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgIWNiKGV2ZW50LCBidXR0b24sIGRhdGEsIGxpc3QsIGFyZ3MpICYmIGFjdGlvbi5jYW5jZWwoKQoJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sIF90YXJnZXQ6IHVpLl90YXJnZXQsCgkJfSkKCQlpZiAoYnV0dG9uID09PSAgdHJ1ZSkgeyByZXR1cm4gYWN0aW9uLnN1Ym1pdChldmVudCwgY2FuLCAic3VibWl0IiksIGFjdGlvbiB9CgoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLl90YXJnZXQsIGh0bWwuSU5QVVRfQVJHUywgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJaW5kZXggPT0gMCAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgaXRlbSkgfSkKCQl9KQoJCXJldHVybiBhY3Rpb24KCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHR5cGUsIGZpZWxkcywgY2IsIGNicykgewoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge2ZpZWxkczogZmllbGRzfHwidHlwZSxuYW1lLHRleHQifSkKCQljYW4uc2VhcmNoKG1zZywgWyJTZWFyY2gub25pbXBvcnQuc2VsZWN0IiwgdHlwZSwgIiIsICIiXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4uY29yZS5OZXh0KGxpc3QsIGNiLCBjYnN8fGZ1bmN0aW9uKCkgewoJCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQkJfSkKCQl9KQoJfSwKCXVwbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYmVnaW4gPSBuZXcgRGF0ZSgpCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZG9jdW1lbnQuYm9keSwgW3t2aWV3OiBodG1sLlVQTE9BRCwgc3R5bGU6IHtsZWZ0OiAwLCB0b3A6IDB9LCBsaXN0OiBbCgkJCXt2aWV3OiBodG1sLkFDVElPTn0sIHt2aWV3OiBodG1sLk9VVFBVVCwgbGlzdDogW3t2aWV3OiAicHJvZ3Jlc3MifV19LAoJCQl7dmlldzogaHRtbC5TVEFUVVMsIGxpc3Q6IFt7dmlldzogaHRtbC5TSE9XfSwge3ZpZXc6ICJjb3N0In0sIHt2aWV3OiAic2l6ZSJ9XX0sCgkJXX1dKTsgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCB1aS5fdGFyZ2V0KQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aS5fdGFyZ2V0LCBjaGF0LkZMT0FUKQoKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbCgkJCXt0eXBlOiBodG1sLlVQTE9BRCwgb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlhY3Rpb24uc2hvdyhldmVudCwgMCwgZXZlbnQudGFyZ2V0LmZpbGVzWzBdLnNpemUsIDApCgkJCX19LCBjbGkuQ0xPU0UsCgkJXSwgdWkuYWN0aW9uLCB7CgkJCWNsb3NlOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KSB9LAoJCQliZWdpbjogZnVuY3Rpb24oZXZlbnQpIHsgYmVnaW4gPSBuZXcgRGF0ZSgpCgkJCQl2YXIgdXBsb2FkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuYWN0aW9uLCAiaW5wdXRbdHlwZT1maWxlXSIpCgkJCQlpZiAodXBsb2FkWzBdLmZpbGVzLmxlbmd0aCA9PSAwKSB7IHJldHVybiB1cGxvYWRbMF0uZm9jdXMoKSB9CgoJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCksIHtfaGFuZGxlOiAidHJ1ZSJ9KQoJCQkJbXNnLl91cGxvYWQgPSB1cGxvYWRbMF0uZmlsZXNbMF0sIG1zZy5fcHJvZ3Jlc3MgPSBhY3Rpb24uc2hvdwoKCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGh0bWwuVVBMT0FELCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiksIGNhbi5VcGRhdGUoKSwgYWN0aW9uLmNsb3NlKCkKCQkJCX0pCgkJCX0sCgkJCXNob3c6IGZ1bmN0aW9uIChldmVudCwgdmFsdWUsIHRvdGFsLCBsb2FkZWQpIHsgbm93ID0gbmV3IERhdGUoKQoJCQkJdmFsdWUgPT0gMCAmJiBhY3Rpb24uYmVnaW4oZXZlbnQpCgoJCQkJdWkuc2hvdy5pbm5lckhUTUwgPSB2YWx1ZSsiJSIKCQkJCXVpLmNvc3QuaW5uZXJIVE1MID0gY2FuLmJhc2UuRHVyYXRpb24obm93IC0gYmVnaW4pCgkJCQl1aS5zaXplLmlubmVySFRNTCA9IGNhbi5iYXNlLlNpemUobG9hZGVkKStpY2UuUFMrY2FuLmJhc2UuU2l6ZSh0b3RhbCkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkucHJvZ3Jlc3MsIHt3aWR0aDogdmFsdWUqKHVpLm91dHB1dC5vZmZzZXRXaWR0aC0yKS8xMDB9KQoJCQl9LAoJCX0pOyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5hY3Rpb24sICJpbnB1dFt0eXBlPWZpbGVdIilbMF0uY2xpY2soKQoKCQlyZXR1cm4gYWN0aW9uCgl9LAoJZG93bmxvYWQ6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgbmFtZSwgZXh0KSB7CgkJdmFyIGEgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBkb2N1bWVudC5ib2R5LCBbe3R5cGU6IGh0bWwuQSwgaHJlZjogcGF0aCwgZG93bmxvYWQ6IGNhbi5jb3JlLktleXMobmFtZSwgZXh0KXx8cGF0aC5zcGxpdChpY2UuUFMpLnBvcCgpfV0pLmZpcnN0CgkJYS5jbGljaygpLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCBhKQoJCXJldHVybiBwYXRoCgl9LAoJZG93bmxvYWRzOiBmdW5jdGlvbihjYW4sIHRleHQsIG5hbWUsIGV4dCkgeyBpZiAoIXRleHQpIHsgcmV0dXJuIH0KCQlyZXR1cm4gY2FuLnVzZXIuZG93bmxvYWQoY2FuLCBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFt0ZXh0XSkpLCBuYW1lLCBleHQpCgl9LAoJY2FtZXJhOiBmdW5jdGlvbihjYW4sIG1zZywgY2IpIHsKCQluYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHt2aWRlbzogdHJ1ZX0sIGNiLCBmdW5jdGlvbihlcnJvcikgewoJCQljYW4ubWlzYy5Mb2coZXJyb3IpCgkJfSkKCX0sCglsb2NhbFN0b3JhZ2U6IGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgewoJCWlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpIH0KCQlyZXR1cm4gY2FuLmJhc2UuT2JqKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSksIHt9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGFuZWwvYWN0aW9uLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciByaXZlciA9IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybSA9IGNhbi5Db25mKGNoYXQuU1RPUk0pCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5jb3JlLk5leHQobXNnLlRhYmxlKCksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJaXRlbS5oZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1kpCgkJCWl0ZW0ud2lkdGggPSBjYW4uQ29uZldpZHRoKCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCkKCQkJaXRlbS5mZWF0dXJlID0gY2FuLmJhc2UuT2JqKGl0ZW0uZmVhdHVyZXx8aXRlbS5tZXRhKQoJCQlpdGVtLmlucHV0cyA9IGNhbi5iYXNlLk9iaihpdGVtLmlucHV0c3x8aXRlbS5saXN0KQoKCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGl0ZW0sIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIG1ldGEud2lkdGgtKGNhbi51c2VyLmlzV2luZG93cz8gMjA6IDApKQoJCQkJY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCByaXZlciwgc3Rvcm0sIHN1YiwgbWV0YSksIHNraXAgfHwgbmV4dCgpCgkJCX0pCgkJfSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmFjdGlvbi5sYXlvdXQoY2FuLCBjYW4ubWlzYy5TZWFyY2hPckNvbmYoY2FuLCBjaGF0LkxBWU9VVCl8fFZvbGNhbm9zLm1ldGEuYXJncy5sYXlvdXQsIHRydWUpCgkJCWNhbi5vbmltcG9ydC5fbWVudShjYW4sIG1zZyksIGNhbi5vbmtleW1hcC5faW5pdChjYW4pCgkJfSkKCX0sCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIHJpdmVyLCBzdG9ybSwgc3ViLCBtZXRhKSB7IHN1Yi5fdGFyZ2V0Ll9tZXRhID0gbWV0YQoJCW1ldGEuaWQgJiYgKHN1Yi5fb3B0aW9uLmRhdGFzZXQgPSBzdWIuX29wdGlvbi5kYXRhc2V0fHx7fSwgc3ViLl9vcHRpb24uZGF0YXNldC5pZCA9IG1ldGEuaWQpCgoJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJcmV0dXJuIGNhbi5ydW4oc3ViLnJlcXVlc3QoZXZlbnQpLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbcml2ZXIsIHN0b3JtLCBtZXRhLmlkfHxtZXRhLmluZGV4XSwgY21kcyksIGNiKQoJCX0sIGNhbi5fcGx1Z2lucyA9IGNhbi5taXNjLmNvbmNhdChjYW4sIGNhbi5fcGx1Z2lucywgW3N1Yl0pCgoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fYWN0aW9uLCBbe3ZpZXc6IFtodG1sLlRBQlMsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRklFTERTRVRfUExVR0lOLCBzdWIuX3RhcmdldCkKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fYWN0aW9uLCBodG1sLkRJVl9UQUJTLCBldmVudC50YXJnZXQpCgkJfSwgb25tb3VzZWVudGVyOiBzdWIuX2xlZ2VuZC5vbm1vdXNlZW50ZXIsIG9uZGJsY2xpY2s6IHN1Yi5fbGVnZW5kLm9uY2xpY2t9XSkKCX0sCglfbWVudTogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5zZXRIZWFkZXJNZW51KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpLCBjYW4uQ29uZihjaGF0Lk1FTlVTKXx8Y2FuLm9uYWN0aW9uLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIGxpc3QpIHsKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbiwgbGlzdFswXV0sIFtjYW4sIGJ1dHRvbl0pCgkJfSkKCX0sCglfc2hhcmU6IGZ1bmN0aW9uKGNhbiwgc2hhcmUpIHsgc2hhcmUgJiYgY2FuLnJ1bih7fSwgW3dlYi5TSEFSRSwgc2hhcmVdLCBmdW5jdGlvbihtc2cpIHsKCQltc2cuTGVuZ3RoKCkgPT0gMSAmJiBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9DTUQpCgkJY2FuLnNldEhlYWRlcihjaGF0LlRPUElDLCBtc2cuT3B0aW9uT3JTZWFyY2goY2hhdC5UT1BJQykpCgkJY2FuLnVzZXIudGl0bGUobXNnLk9wdGlvbk9yU2VhcmNoKGNoYXQuVElUTEUpKQoKCQljYW4uQ29uZihjaGF0LlJJVkVSLCB3ZWIuU0hBUkUsIGNoYXQuU1RPUk0sIHNoYXJlKQoJCW1zZy5MZW5ndGgoKSA+IDAgJiYgY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnKQoJfSkgfSwKCV9jbWQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbmV4dCkgewoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OQUNUSU9OX0NNRCkKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgY2FuLmJhc2UuQ29weShpdGVtLCB7b3B0czogY2FuLm1pc2MuU2VhcmNoKGNhbiksIG1vZGU6ICJjbWQifSksIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQljYW4ucmVxdWVzdChldmVudCwge2hlaWdodDogc3ViLkNvbmZIZWlnaHQoKSwgd2lkdGg6IGNhbi5Db25mV2lkdGgoKX0pCgkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleCwgY21kcywgY2IpCgkJCX0KCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9ZKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLnVzZXIudGl0bGUobWV0YS5uYW1lKSwgc2tpcCB8fCBuZXh0KCkKCQl9KQoJfSwKCWhlaWdodDogZnVuY3Rpb24oY2FuLCBoZWlnaHQpIHsKCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4uX3RhcmdldCwgaGVpZ2h0KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLop6PmnpDlvJXmk44iLCBfZW5naW5lOiBmdW5jdGlvbihldmVudCwgcGFnZSwgbXNnLCBjYW4sIGNtZHMsIGNiKSB7Cgl2YXIgc3Rvcm0gPSBjYW4uY29yZS5WYWx1ZShjYW4uX3Jvb3QsIGNhbi5jb3JlLktleXMoY2hhdC5SSVZFUiwgY21kc1swXSwgY2hhdC5TVE9STSwgY21kc1sxXSkpCglpZiAoIXN0b3JtIHx8IGNtZHMubGVuZ3RoICE9IDIpIHsgcmV0dXJuIGZhbHNlIH0KCglpZiAoc3Rvcm0uaW5kZXgpIHsgLy8g5ZG95Luk57Si5byVCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgY3R4LkNPTU1BTkQsIFtdLmNvbmNhdChzdG9ybS5pbmRleCksIGNiKQoJfSBlbHNlIHsgLy8g5ZG95Luk5YiX6KGoCgkJY2FuLmNvcmUuTGlzdChzdG9ybS5saXN0LCBmdW5jdGlvbih2YWx1ZSkgewoJCQltc2cuUHVzaChtZGIuTkFNRSwgdmFsdWUubmFtZXx8IiIpCgkJCW1zZy5QdXNoKG1kYi5IRUxQLCB2YWx1ZS5oZWxwfHwiIikKCQkJbXNnLlB1c2goY3R4LklOUFVUUywgSlNPTi5zdHJpbmdpZnkodmFsdWUuaW5wdXRzKSkKCQkJbXNnLlB1c2goY3R4LkZFQVRVUkUsIEpTT04uc3RyaW5naWZ5KHZhbHVlLmZlYXR1cmUpKQoJCQltc2cuUHVzaChjdHguSU5ERVgsIHZhbHVlLmluZGV4fHwiIikKCQkJbXNnLlB1c2goY3R4LkFSR1MsIHZhbHVlLmFyZ3N8fCJbXSIpCgkJCW1zZy5QdXNoKGN0eC5TVFlMRSwgdmFsdWUuc3R5bGV8fCIiKQoJCQltc2cuUHVzaChjdHguRElTUExBWSwgdmFsdWUuZGlzcGxheXx8IiIpCgkJCW1zZy5QdXNoKGljZS5NU0dfQUNUSU9OLCB2YWx1ZS5fYWN0aW9ufHwiIikKCQl9KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9CglyZXR1cm4gdHJ1ZQp9fSkKVm9sY2Fub3MoY2hhdC5PTlBMVUdJTiwge2hlbHA6ICLms6jlhozmj5Lku7YiLAoJInBhcnNlIjogc2h5KCLop6PmnpAiLCB7CgkJInNob3ciOiBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgeyB2YXIgbmFtZSA9IGNtZHNbMV18fCJjYW4iCgkJCWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShuYW1lKQoJCQljbWRzICYmIGNtZHNbMF0gJiYgVm9sY2Fub3MobmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIG5hbWUpfSwgWyIvcGx1Z2luL3N0b3J5L3BhcnNlLmpzIl0sIGZ1bmN0aW9uKHN1YikgewoJCQkJc3ViLnJ1biA9IGNhbi5ydW4sIHN1Yi5PcHRpb24gPSBmdW5jdGlvbigpIHt9LCBjYW4uaXNDbWRNb2RlKCkgJiYgc3ViLkNvbmZIZWlnaHQod2luZG93LmlubmVySGVpZ2h0KQoJCQkJc3ViLm9uYXBwZW5kLnBhcnNlKHN1Yiwgc3ViLm9uYXBwZW5kLl9wYXJzZShzdWIsIGNtZHNbMF0sIG5hbWUsIHN1Yi5Db25mSGVpZ2h0KCkpLCBjYW4uX291dHB1dCkKCQkJCWNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCAibWVudSIsIGZ1bmN0aW9uKG1zZykgewoJCQkJCWRlbGV0ZShtc2cuX2V2ZW50KSwgZGVsZXRlKG1zZy5fY2FuKQoJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgSlNPTi5zdHJpbmdpZnkobXNnKSkKCQkJCX0pCgkJCX0pCgkJfSwKCX0sIFsidGV4dCIsICJuYW1lIiwgInNob3c6YnV0dG9uQGF1dG8iLCAiY2xlYXI6YnV0dG9uIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYikgewoJCWNtZHMgJiYgY21kc1swXSAmJiBjYW4uX3Jvb3QuQWN0aW9uLnJ1bih7fSwgY21kcywgY2IsIHRydWUpCgl9KSwKCgkicGx1Z2luIjogc2h5KCLmj5Lku7YiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgl9KSwKCSJuZnMuc2F2ZSI6IHNoeSgi5L+d5a2Y5paH5Lu2Iiwge30sIFsiZmlsZT1oaS50eHQiLCAidGV4dDp0ZXh0YXJlYT0naGVsbG8gd29ybGQnIiwgInNhdmU6YnV0dG9uIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYikgewoJCWNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkic2F2ZSIsIGZ1bmN0aW9uKGNtZHMpIHsgY2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY21kc1sxXSwgY21kc1swXSkgfQoJCSkpCgl9KSwKCSJwaWUiOiBzaHkoIuavlOS+i+WbviIsIHt9LCBbImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCW1zZy5EaXNwbGF5U3RvcnkoInBpZS5qcyIpCgkJbXNnLlB1c2goInZhbHVlIiwgMjAwKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsIDMwMCkKCQltc2cuUHVzaCgidmFsdWUiLCA0MDApCgl9KSwKCSJjYW4uY29kZS5pbm5lci5fcGx1Z2luIjogc2h5KCLmj5Lku7YiLCB7fSwgW3t0eXBlOiAiYnV0dG9uIiwgbmFtZTogImxpc3QiLCBhY3Rpb246ICJhdXRvIn0sICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7fSksCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwgX2ZvY3VzOiBbXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pLCBjYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgY2hhdC5PTktFWURPV04sIGZ1bmN0aW9uKG1zZywgbW9kZWwpIHsKCQkJY2FuLl9rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShtc2cuX2V2ZW50LCBjYW4sIG1vZGVsLCBjYW4uX2tleWxpc3R8fFtdLCBjYW4uX291dHB1dCkKCQl9KQoJfSwKCV9tb2RlOiB7CgkJbm9ybWFsOiB7CgkJCWo6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuc2Nyb2xsQnkoMCwgZXZlbnQuY3RybEtleT8gMzAwOiAzMCkgfSwKCQkJazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldC5zY3JvbGxCeSgwLCBldmVudC5jdHJsS2V5PyAtMzAwOiAtMzApIH0sCgoJCQliOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJIZWFkZXIub25hY3Rpb24uYmxhY2siXSkgfSwKCQkJdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiSGVhZGVyLm9uYWN0aW9uLndoaXRlIl0pIH0sCgoJCQlnOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJSaXZlci5vbmRldGFpbC7liJvlu7rnvqTnu4QiXSkgfSwKCQkJczogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5re75Yqg5bqU55SoIl0pIH0sCgkJCXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLua3u+WKoOW3peWFtyJdKSB9LAoKCQkJIiAiOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OU0VBUkNIRk9DVVMpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwKCQkJIjoiOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OQ09NTUFOREZPQ1VTKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sCgkJCUVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OT1BFTlNFQVJDSCwgY2FuLnJlcXVlc3QoZXZlbnQsIHt0eXBlOiBtZGIuRk9SRUFDSCwgd29yZDogIiJ9KSkKCQkJfSwKCQkJRXNjYXBlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4ucGFnZS5LZXlzKGh0bWwuRklFTERTRVRfRkxPQVQsIGh0bWwuRElWX0ZMT0FUKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pCgkJCQl9KQoJCQl9LAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmk43kvZwiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSwgNCpodG1sLlBMVUdJTl9NQVJHSU4rMipodG1sLkFDVElPTl9IRUlHSFQraHRtbC5BQ1RJT05fTUFSR0lOKQoJCWNhbi5Db25mKGh0bWwuTUFSR0lOX1gsIDQqaHRtbC5QTFVHSU5fTUFSR0lOKQoKCQlpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8IGNhbi51c2VyLmlzTW9iaWxlKSB7CgkJCXZhciBndCA9ICImIzEwMDk1OyIsIGx0ID0gIiYjMTAwOTQ7IjsgZnVuY3Rpb24gdG9nZ2xlKHZpZXcpIHsgcmV0dXJuICFjYW4uc2V0Uml2ZXIoImRpc3BsYXkiKSB9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbW2h0bWwuVE9HR0xFLCBjaGF0LlBST0pFQ1RdXSwgbGlzdDogW3t0ZXh0OiBbZ3QsIGh0bWwuRElWXX1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJZXZlbnQudGFyZ2V0LmlubmVySFRNTCA9IHRvZ2dsZSgpPyBndDogbHQsIGNhbi5vbmFjdGlvbi5yZWZyZXNoKGNhbikKCQkJfX1dKQoJCX0KCgkJdGFyZ2V0Lm9udG91Y2hzdGFydCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OQUNUSU9OX1RPVUNILCBjYW4ucmVxdWVzdChldmVudCkpIH0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglfbWVudXM6IFsKCQlbY2hhdC5MQVlPVVQsICJhdXRvIiwgInRhYnMiLCAiZ3JpZCIsICJmcmVlIiwgImZsb3ciLCAicGFnZSIsICJ0b2ltYWdlIl0sCgkJW2ljZS5IRUxQLCAidHV0b3IiLCAibWFudWFsIiwgInNlcnZpY2UiLCAiZGV2b3BzIiwgInJlZmVyIl0sCgldLAoJX3RyYW5zOiB7CgkJImxheW91dCI6ICLluIPlsYAiLAoJCSJhdXRvIjogIum7mOiupOW4g+WxgCIsCgkJImZsb3ciOiAi5rWB5Yqo5biD5bGAIiwKCQkiZ3JpZCI6ICLnvZHmoLzluIPlsYAiLAoJCSJ0YWJzIjogIuagh+etvuW4g+WxgCIsCgkJImZyZWUiOiAi6Ieq55Sx5biD5bGAIiwKCQkicGFnZSI6ICLnvZHpobXluIPlsYAiLAoJCSJ0b2ltYWdlIjogIueUn+aIkOWbvueJhyIsCgoJCSJoZWxwIjogIuW4ruWKqSIsCgkJInR1dG9yIjogIuWFpemXqOeugOS7iyIsCgkJIm1hbnVhbCI6ICLkvb/nlKjmiYvlhowiLAoJCSJzZXJ2aWNlIjogIuacjeWKoeaJi+WGjCIsCgkJImRldm9wcyI6ICLnvJbnqIvmiYvlhowiLAoJCSJyZWZlciI6ICLlj4LogIPmiYvlhowiLAoJfSwKCW9ubWFpbjogZnVuY3Rpb24oY2FuKSB7IGNhbi5vbmltcG9ydC5fc2hhcmUoY2FuLCBjYW4ubWlzYy5TZWFyY2goY2FuLCB3ZWIuU0hBUkUpKSB9LAoJb25sb2dpbjogZnVuY3Rpb24oY2FuKSB7IGlmICghY2FuLnVzZXIubW9kLmlzQ21kICYmICFjYW4uQ29uZihjaGF0LlRPT0wpKSB7IHJldHVybiB9CgkJY2FuLl9uYW1lcyA9IGxvY2F0aW9uLnBhdGhuYW1lCgkJY2FuLkNvbmYoY2hhdC5UT09MKT8gY2FuLmNvcmUuTmV4dChjYW4uQ29uZihjaGF0LlRPT0wpLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5vbmltcG9ydC5fY21kKGNhbiwgaXRlbSwgbmV4dCkKCQl9KTogY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCgpLCBjdHguQ09NTUFORCwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4uY29yZS5OZXh0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5vbmltcG9ydC5fY21kKGNhbiwgaXRlbSwgbmV4dCkKCQl9KSB9KQoJfSwKCW9uc2VhcmNoOiBmdW5jdGlvbihjYW4sIG1zZywgd29yZCkgewoJCWlmICh3b3JkWzBdID09IG1kYi5QTFVHSU4gfHwgd29yZFswXSA9PSBtZGIuRk9SRUFDSCkgeyBjYW4ub25leHBvcnQucGx1Z2luKGNhbiwgbXNnLCB3b3JkKSB9Cgl9LAoJb25zaXplOiBmdW5jdGlvbihjYW4sIG1zZywgaGVpZ2h0LCB3aWR0aCkgeyBjYW4uQ29uZih7aGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aH0pIH0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgewoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLktleXMoY2FuLkNvbmYoY2hhdC5SSVZFUiwgcml2ZXIpLCBjYW4uQ29uZihjaGF0LlNUT1JNLCBzdG9ybSkpCgkJfSwgY2FuLl9hY3Rpb24sIGNhbi5fb3V0cHV0KSkgewoJCQl2YXIgY29uZiA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fcm9vdCwgY2FuLmNvcmUuS2V5cyhjaGF0LlJJVkVSLCByaXZlciwgY2hhdC5TVE9STSwgc3Rvcm0pKXx8e30KCQkJcmV0dXJuIGNhbi5vbmFjdGlvbi5sYXlvdXQoY2FuLCBjYW4ubWlzYy5TZWFyY2hPckNvbmYoY2FuLCBjaGF0LkxBWU9VVCl8fFZvbGNhbm9zLm1ldGEuYXJncy5sYXlvdXR8fGNvbmYubGF5b3V0LCB0cnVlKQoJCX0KCgkJY2FuLnJ1bih7fSwgW3JpdmVyLCBzdG9ybV0sIGZ1bmN0aW9uKG1zZykgeyBpZiAobXNnLkxlbmd0aCgpID4gMCkgeyByZXR1cm4gY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnKSB9CgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OQUNUSU9OX05PVE9PTCwgY2FuLnJlcXVlc3Qoe30sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBzdG9ybX0pKQoJCX0pCgl9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5Db25mSGVpZ2h0KGNhbi5fcm9vdC5faGVpZ2h0KSwgY2FuLkNvbmZXaWR0aChjYW4uX3Jvb3QuX3dpZHRoKQoJCWNhbi5Db25mKGh0bWwuTUFSR0lOX1gsIDAsIGh0bWwuTUFSR0lOX1ksIDIqaHRtbC5BQ1RJT05fSEVJR0hUKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgInNpbXBsZSIpIAoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX3RhcmdldCwgImNtZCIpCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCQljYW4uaXNDbWRNb2RlKCkKCX0sCgoJbGF5b3V0OiBmdW5jdGlvbihjYW4sIGJ1dHRvbiwgc2lsZW50KSB7IGJ1dHRvbiA9IGJ1dHRvbnx8aWNlLkFVVE8KCQl2YXIgY2IgPSBjYW4ub25sYXlvdXRbYnV0dG9uXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoY2FuLCBzaWxlbnQpKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGNhbi5fdGFyZ2V0LCBjYW4uQ29uZihjaGF0LkxBWU9VVCkpCgkJaWYgKGJ1dHRvbiA9PSBpY2UuQVVUTykgeyBidXR0b24gPSAiIiB9CgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fdGFyZ2V0LCBjYW4uQ29uZihjaGF0LkxBWU9VVCwgYnV0dG9uKSkKCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoJfSwKCWhlbHA6IGZ1bmN0aW9uKGNhbiwgYnV0dG9uKSB7IGNhbi51c2VyLm9wZW4oIi9oZWxwLyIrYnV0dG9uKyIuc2h5IikgfSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5fcm9vdC5faGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LCBjYW4uX3Jvb3QuX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGgKCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoKCQl2YXIgd2lkdGggPSBjYW4uQ29uZldpZHRoKCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWCkKCQljYW4uY29yZS5MaXN0KGNhbi5fcGx1Z2lucywgZnVuY3Rpb24oc3ViKSB7IHZhciB0YWJsZSA9IGNhbi5jb3JlLlZhbHVlKHN1YiwgY2hhdC5fT1VUUFVUX0NVUlJFTlQpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKHdpZHRoKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyAyMDogMCkpCgkJCXRhYmxlLkNvbmZXaWR0aCh3aWR0aCkKCQkJdGFibGUub25pbXBvcnQubGF5b3V0PyB0YWJsZS5vbmltcG9ydC5sYXlvdXQodGFibGUpOiBjYW4ub25hcHBlbmQuX291dHB1dChzdWIsIHRhYmxlLl9tc2csIHN1Yi5fZGlzcGxheSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkxBWU9VVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJZ3JpZDogZnVuY3Rpb24oY2FuLCBzaWxlbnQpIHsKCQl2YXIgQUNUSU9OX0xBWU9VVF9GTVQgPSAiIGZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luIHsgd2lkdGg6X3dpZHRoOyBoZWlnaHQ6X2hlaWdodDsgfSBmaWVsZHNldC5BY3Rpb24uZ3JpZD5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbj5kaXYub3V0cHV0IHsgd2lkdGg6X3dpZHRoOyBoZWlnaHQ6X2hlaWdodDsgfSAiCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAibSIsIHZhbHVlOiAyfSwge25hbWU6ICJuIiwgdmFsdWU6IDJ9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihoZWlnaHQsIHdpZHRoKSB7IHZhciBtID0gcGFyc2VJbnQoZGF0YS5tKXx8MiwgbiA9IHBhcnNlSW50KGRhdGEubil8fDIKCQkJCWNhbi5wYWdlLmNzcyhjYW4uYmFzZS5yZXBsYWNlQWxsKEFDVElPTl9MQVlPVVRfRk1ULCAiX3dpZHRoIiwgKHdpZHRoLSg0Km0rMSkqaHRtbC5QTFVHSU5fTUFSR0lOKS9tKyJweCIsICJfaGVpZ2h0IiwgKGhlaWdodC0oNCpuKzEpKmh0bWwuUExVR0lOX01BUkdJTikvbisicHgiKSkKCQkJfSkKCQl9LCBzaWxlbnQpCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fYWN0aW9uLCBodG1sLkRJVl9UQUJTLCAwKQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5GSUVMRFNFVF9QTFVHSU4sIDApCgl9LAoJZnJlZTogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl90YXJnZXQsIFtbaHRtbC5ESVZfT1VUUFVULCBodG1sLkZJRUxEU0VUX1BMVUdJTl1dLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIHtsZWZ0OiA0MCppbmRleCwgdG9wOiA0MCppbmRleH0pCgkJCWNhbi5vbm1vdGlvbi5tb3ZlKGNhbiwgaXRlbSwge2xlZnQ6IDQwKmluZGV4LCB0b3A6IDQwKmluZGV4fSkKCQl9KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGNhbikgewoJCXJldHVybiBjYW4ub25tb3Rpb24udG9pbWFnZShldmVudCwgY2FuLCBjYW4uQ29uZihjaGF0LlNUT1JNKSwgY2FuLl9vdXRwdXQpLCB0cnVlCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCglhcmdzOiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5jb3JlLk5leHQoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfUExVR0lOLCBodG1sLkZPUk1fT1BUSU9OXV0pLCBmdW5jdGlvbihpdGVtLCBuZXh0LCBpbmRleCwgYXJyYXkpIHsKCQkJaXRlbS5kYXRhc2V0LmFyZ3MgPSBKU09OLnN0cmluZ2lmeShjYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlfHwiIiB9KSkKCQkJY2IoaXRlbSwgbmV4dCwgaW5kZXgsIGFycmF5KQoJCX0pCgl9LAoJc2l6ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQltc2cuT3B0aW9uKGh0bWwuVE9QLCBjYW4uX291dHB1dC5vZmZzZXRUb3ApCgkJbXNnLk9wdGlvbihodG1sLkxFRlQsIGNhbi5fb3V0cHV0Lm9mZnNldExlZnQpCgkJbXNnLk9wdGlvbihodG1sLldJRFRILCBjYW4uX291dHB1dC5vZmZzZXRXaWR0aCkKCQltc2cuT3B0aW9uKGh0bWwuSEVJR0hULCBjYW4uX291dHB1dC5vZmZzZXRIZWlnaHQpCgkJbXNnLk9wdGlvbihodG1sLlNDUk9MTCwgY2FuLnVzZXIuaXNNb2JpbGU/IGNhbi5fdGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5zY3JvbGxUb3A6IGNhbi5fb3V0cHV0LnNjcm9sbFRvcCkKCQltc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1gsIGNhbi5Db25mKGh0bWwuTUFSR0lOX1gpKQoJCW1zZy5PcHRpb24oaHRtbC5NQVJHSU5fWSwgY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSkpCgl9LAoJbGF5b3V0OiBmdW5jdGlvbihjYW4sIG1zZykgeyByZXR1cm4gY2FuLkNvbmYoY2hhdC5MQVlPVVQpIH0sCglwbHVnaW46IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7IHZhciBmaWVsZHMgPSBjYW4uY29yZS5TcGxpdChtc2cuT3B0aW9uKGljZS5NU0dfRklFTERTKSkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW1todG1sLkZJRUxEU0VUX1BMVUdJTiwgaHRtbC5MRUdFTkRdXSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpZiAoaXRlbS5pbm5lckhUTUwuaW5kZXhPZih3b3JkWzFdKSA9PSAtMSkgeyByZXR1cm4gfQoKCQkJdmFyIGxpc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLm5leHRTaWJsaW5nLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlfHwiIiB9KQoJCQl2YXIgbWV0YSA9IGl0ZW0ucGFyZW50Tm9kZS5fbWV0YTsgaWYgKCFtZXRhKSB7IHJldHVybiB9CgoJCQl2YXIgZGF0YSA9IHtjdHg6ICJjYW4iLCBjbWQ6ICJBY3Rpb24iLAoJCQkJdHlwZTogbWRiLlBMVUdJTiwgbmFtZTogaXRlbS5pbm5lckhUTUwsIHRleHQ6IHNoeSgi6Lez6L2sIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQl2YXIgaW5wdXQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLnBhcmVudE5vZGUsIGh0bWwuSU5QVVRfQVJHUylbMF07IGlucHV0ICYmIGlucHV0LmZvY3VzKCkKCQkJCX0pLCBhcmd1bWVudDogSlNPTi5zdHJpbmdpZnkobGlzdCksCgkJCX0KCQkJaWYgKG1ldGEuaW5kZXgpIHsKCQkJCWRhdGEuY29udGV4dCA9ICIiLCBkYXRhLmNvbW1hbmQgPSBtZXRhLmluZGV4CgkJCX0gZWxzZSBpZiAobWV0YS5jbWQpIHsKCQkJCWRhdGEuY29udGV4dCA9IG1ldGEuY3R4LCBkYXRhLmNvbW1hbmQgPSBtZXRhLmNtZAoJCQl9IGVsc2UgewoJCQkJcmV0dXJuCgkJCX0KCQkJbXNnLlB1c2goZGF0YSwgZmllbGRzKQoJCX0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wYW5lbC9mb290ZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5vbmltcG9ydC5fdGl0bGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3N0YXRlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll90b2FzdChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fY29tbWFuZChjYW4sIG1zZywgdGFyZ2V0KQoJfSwKCV90aXRsZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KG1zZy5yZXN1bHQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LlRJVExFLCBodG1sLkRJViwgaXRlbV0sIHRpdGxlOiAi6IGU57O756uZ6ZW/In1dKQoJCX0pCgl9LAoJX3N0YXRlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LlNUQVRFKXx8Y2FuLkNvbmYoY2hhdC5TVEFURSksIFsibmNtZCIsICJudGlwIl0pLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBodG1sLkRJViwgY2FuLkNvbmYoaXRlbSldLCBsaXN0OiBbCgkJCQl7dGV4dDogW2l0ZW0sIGh0bWwuTEFCRUxdfSwge3RleHQ6IFsiOiAiLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbY2FuLkNvbmYoaXRlbSl8fCIiLCBodG1sLlNQQU4sIGl0ZW1dfSwKCQkJXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZXhwb3J0W2l0ZW1dKGNhbikgfX1dKQoJCX0pCgl9LAoJX3RvYXN0OiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLnRvYXN0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGNoYXQuVE9BU1QsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmV4cG9ydFsibnRpcCJdKGNhbikgfX1dKS5maXJzdAoJfSwKCV9jb21tYW5kOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLm9uYXBwZW5kLmlucHV0KGNhbiwge3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogImNtZCIsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pOyBpZiAoZXZlbnQua2V5ICE9IGxhbmcuRU5URVIpIHsgcmV0dXJuIH0KCQkJc3dpdGNoIChldmVudC50YXJnZXQudmFsdWUpIHsKCQkJCWNhc2UgY2xpLkNMT1NFOiBjYW4uY2xpICYmIGNhbi5jbGkuY2xvc2UoKTsgYnJlYWsKCQkJCWNhc2UgY2xpLkNMRUFSOiBjYW4uY2xpICYmIGNhbi5jbGkuY2xvc2UoKTsgYnJlYWsKCQkJCWRlZmF1bHQ6CgkJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaWNlLlJVTiwgY2FuLmNvcmUuU3BsaXQoZXZlbnQudGFyZ2V0LnZhbHVlLCBpY2UuU1ApLCBmdW5jdGlvbihtc2cpIHsKCQkJCQkJY2FuLmNsaSAmJiBjYW4uY2xpLmNsb3NlKCksIGNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpIHt9LCAiY2xpIiwgdHJ1ZSkKCQkJCQl9KQoJCQl9CgkJfX0sICIiLCB0YXJnZXQsICJ0aXRsZSBjbWQiKQoJfSwKCgl0b2FzdDogZnVuY3Rpb24oY2FuLCBtc2csIHRpdGxlLCBjb250ZW50LCBmaWxlbGluZSwgdGltZSkgeyBjYW4uX3RpcHMgPSBjYW4uX3RpcHN8fGNhbi5yZXF1ZXN0KCkKCQljYW4uX3RpcHMuUHVzaCh7dGltZTogdGltZSwgZmlsZWxpbmU6IGZpbGVsaW5lLCB0aXRsZTogdGl0bGUsIGNvbnRlbnQ6IGNvbnRlbnR9KQoJCWNhbi5vbmltcG9ydC5jb3VudChjYW4sICJudGlwIikKCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBjYW4udG9hc3QsIFt0aW1lLCB0aXRsZSwgY29udGVudF0uam9pbihpY2UuU1ApKQoJfSwKCWNvdW50OiBmdW5jdGlvbihjYW4sIG5hbWUpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgY2FuLmNvcmUuS2V5cyhodG1sLlNQQU4sIG5hbWUpLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0uaW5uZXJIVE1MID0gY2FuLkNvbmYobmFtZSwgcGFyc2VJbnQoY2FuLkNvbmYobmFtZSl8fCIwIikrMSsiIikrIiIKCQl9KQoJfSwKCW5jbWQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBfZm9sbG93LCBfY21kcykgeyBjYW4uX2NtZHMgPSBjYW4uX2NtZHN8fGNhbi5yZXF1ZXN0KCkKCQljYW4uX2NtZHMuUHVzaCh7dGltZTogY2FuLmJhc2UuVGltZSgpLCBmb2xsb3c6IF9mb2xsb3csIGNtZHM6IF9jbWRzfSkKCQljYW4ub25pbXBvcnQuY291bnQoY2FuLCAibmNtZCIpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuS6pOS6kuaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGNiLCB0YXJnZXQpIHsKCQlpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8IGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX3RhcmdldCkgfQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5ydW4oe30sIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBudWxsLCBjYW4uX291dHB1dCkgfSkgfSwKCW9udG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmltcG9ydC50b2FzdCwge2NhbjogY2FuLCBtc2c6IG1zZ30pIH0sCglvbnJlbW90ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLm9uaW1wb3J0Lm5jbWQsIHtjYW46IGNhbiwgbXNnOiBtc2d9KSB9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikgfSwKCW9uY29tbWFuZGZvY3VzOiBmdW5jdGlvbihjYW4pIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFsiZGl2LmNtZCIsICJpbnB1dCJdLCBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSB9KSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLl90YXJnZXQub2Zmc2V0SGVpZ2h0IH0sCglmbG9hdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBuYW1lLCBib3R0b20pIHsgaWYgKGNhbltuYW1lXSkgeyByZXR1cm4gY2FuW25hbWVdLmNsb3NlKCkgfQoJCXZhciB1aSA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sICJzdG9yeSB0b2FzdCBmbG9hdCIsIHt9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCQl1aS5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5maXJzdCksIGRlbGV0ZShjYW5bbmFtZV0pIH0KCgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCBoZWlnaHQsIHdpZHRoKSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuZmlyc3QsIGh0bWwuTEVGVCwgbGVmdCwgaHRtbC5UT1AsIHRvcCkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgaGVpZ2h0LTI4LCBodG1sLk1BWF9XSURUSCwgd2lkdGgpCgkJfSkKCgkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbY2xpLkNMT1NFLCBjbGkuUkVGUkVTSCwge2lucHV0OiBodG1sLlRFWFQsIHBsYWNlaG9sZGVyOiAiZmlsdGVyIiwgX2luaXQ6IGZ1bmN0aW9uKGlucHV0KSB7CgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAia2V5bWFwLmZvY3VzIiwgY2FuLnJlcXVlc3Qoe30sIHtjYjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmIChjYW4ucGFnZS50YWdpcyhodG1sLklOUFVULCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IHVpLmNsb3NlKCk7IHJldHVybiB9CgkJCQlpZiAoZXZlbnQua2V5ID09IGljZS5TUCkgeyBpbnB1dC5mb2N1cygpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkgfQoJCQl9fSkpCgkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJaWYgKGV2ZW50LmtleSAhPSBsYW5nLkVOVEVSKSB7IHJldHVybiB9CgkJCWV2ZW50LnRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAtMSkKCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLm91dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7IGlmIChpbmRleCA9PSAwKSB7IHJldHVybiB9CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdHIsIGh0bWwuSElEREVOKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7IGlmICh0ZC5pbm5lclRleHQuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpID4gLTEpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgdHIsIGh0bWwuSElEREVOKQoJCQkJfSB9KQoJCQl9KQoJCX19XSwgdWkuYWN0aW9uLCBraXQuRGljdChjbGkuQ0xPU0UsIHVpLmNsb3NlLCBjbGkuUkVGUkVTSCwgZnVuY3Rpb24oZXZlbnQpIHsgdWkuY2xvc2UoKSwgY2FuLnRvYXN0LmNsaWNrKCl9KSkKCgkJaWYgKG1zZykgewoJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBsaXN0KSB7CgkJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkKCQkJCX19CgkJCX0sIHVpLm91dHB1dCksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZy5SZXN1bHQoKSwgdWkub3V0cHV0KQoJCX0KCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5maXJzdCwgYm90dG9tPyB7Ym90dG9tOiBodG1sLkFDVElPTl9IRUlHSFQsIHRvcDogIiJ9OiB7fSksIGNhbltuYW1lXSA9IHVpCgl9LAoJbnRpcDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uZXhwb3J0LmZsb2F0KGNhbiwgY2FuLl90aXBzLCBmdW5jdGlvbigpIHt9LCAibnRpcCIpCgl9LAoJbmNtZDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uZXhwb3J0LmZsb2F0KGNhbiwgY2FuLl9jbWRzLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkgewoJCQl2YXIgY21kcyA9IGNhbi5iYXNlLk9iaihsaW5lLmNtZHMpOyBzd2l0Y2ggKGxpbmUuZm9sbG93KSB7CgkJCQljYXNlICJjYW4uQWN0aW9uIjogY21kcyA9IGNtZHMuc2xpY2UoMik7IGJyZWFrCgkJCQljYXNlICJjYW4uRm9vdGVyIjogY21kcyA9IGNtZHMuc2xpY2UoMik7IGJyZWFrCgkJCX0KCQkJc3dpdGNoIChjbWRzWzBdKSB7CgkJCQljYXNlICJ3ZWIud2lraS53b3JkIjogY21kcyA9IGNtZHMuc2xpY2UoNSk7IGJyZWFrCgkJCX0KCgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wLCBsZWZ0LCB3aWR0aCwgaGVpZ2h0KSB7CgkJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge2luZGV4OiBjbWRzWzBdLCBhcmdzOiBjbWRzLnNsaWNlKDEpLCBoZWlnaHQ6IGhlaWdodC0xMDAsIHdpZHRoOiB3aWR0aH0sIGZ1bmN0aW9uKHN1YikgewoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgY21kc1swXSwgY21kLCBjYikgfQoKCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCB7dG9wOiB0b3ArMTAwLCBsZWZ0OiBsZWZ0fSkKCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fbGVnZW5kLCB7ZGlzcGxheTogaHRtbC5CTE9DS30pCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgeyJtYXgtd2lkdGgiOiB3aWR0aH0pCgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHN1Yi5fdGFyZ2V0LCBjaGF0LkZMT0FUKQoJCQkJfSwgY2FuLl9yb290Ll90YXJnZXQpCgkJCX0pCgkJfSwgIm5jbWQiKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGFuZWwvaGVhZGVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pCgkJY2FuLm9uaW1wb3J0Ll90aXRsZShjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fc3RhdGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2F2YXRhcihjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fYmFja2dyb3VuZChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fc2VhcmNoKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9tZW51cyhjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmRhZW1vbi5faW5pdChjYW4pCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAoJX3RpdGxlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UuZ2V0VmFsaWQobXNnLnJlc3VsdCwgY2FuLkNvbmYoY2hhdC5USVRMRSl8fFsic2h5bGludXguY29tL3gvY29udGV4dHMiXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LlRJVExFLCBodG1sLkRJViwgaXRlbV0sIHRpdGxlOiAi6L+U5Zue5Li76aG1Iiwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi50aXRsZShldmVudCwgY2FuKQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBsaXN0ID0gbXNnLlRhYmxlKCkKCQkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIHt9LCBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0ubmFtZSB9KSwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIG1ldGEsIGluZGV4KSB7CgkJCQkJZXZlbnQuc2hpZnRLZXk/IGNhbi51c2VyLm9wZW4obGlzdFtpbmRleF0ucGF0aCk6IGNhbi51c2VyLmp1bXBzKGxpc3RbaW5kZXhdLnBhdGgpCgkJCQl9KQoJCQl9fV0pCgkJfSkKCX0sCglfc3RhdGU6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuU1RBVEUpfHxjYW4uQ29uZihjaGF0LlNUQVRFKSwgW21kYi5USU1FLCBhYWEuVVNFUk5JQ0tdKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpZiAoaXRlbSA9PSBhYWEuQVZBVEFSICkgeyBpZiAoY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBjYW4uYmFzZS5qb2luKFtjaGF0LlNUQVRFLCBpdGVtXSksIGxpc3Q6IFt7aW1nOiBpY2UuU1B9XSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBbY2FuLnBhZ2UuRm9ybWF0KGh0bWwuSU1HLCBjYW4ub25leHBvcnQuYXZhdGFyKGNhbiksIDE2MCldKQoJCQkJfX1dKTsgcmV0dXJuCgkJCX0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFtjaGF0LlNUQVRFLCBpdGVtXSksIGh0bWwuRElWLCAoY2FuLkNvbmYoaXRlbSl8fCIiKS5zbGljZSgwLCAxMCldLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uYWN0aW9uLCBpdGVtXSwgW2V2ZW50LCBjYW4sIGl0ZW1dKQoJCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IGl0ZW0gPT0gbWRiLlRJTUUgJiYgY2FuLm9uaW1wb3J0Ll90aW1lKGNhbiwgdGFyZ2V0KSB9fV0pCgkJfSkKCX0sCglfYXZhdGFyOiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCAiZGl2LnN0YXRlLmF2YXRhcj5pbWciLCB7c3JjOiBjYW4ub25leHBvcnQuYXZhdGFyKGNhbil9KQoJfSwKCV9iYWNrZ3JvdW5kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ub25sYXlvdXQuYmFja2dyb3VuZChjYW4sIGNhbi5vbmV4cG9ydC5iYWNrZ3JvdW5kKGNhbikpCgl9LAoJX3NlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgewoJCXZhciB1aSA9IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IG1kYi5TRUFSQ0gsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pOyBzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSBsYW5nLkVOVEVSOiBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7dHlwZTogImNvbW1hbmQsc3BhY2UsdGV4dCJ8fG1kYi5GT1JFQUNILCB3b3JkOiBldmVudC50YXJnZXQudmFsdWV9KSkKCQkJfQoJCX19LCAiIiwgdGFyZ2V0LCAidGl0bGUgc2VhcmNoIikKCQljYW4ub25pbXBvcnQubWVudShjYW4sIG1kYi5TRUFSQ0gsIGZ1bmN0aW9uKCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7dHlwZTogbWRiLkZPUkVBQ0gsIHdvcmQ6IHVpLnZhbHVlfSkpCgkJfSkKCX0sCglfbWVudXM6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4uc2V0SGVhZGVyTWVudShjYW4udXNlci5tb2QuaXNQb2Q/IFtjdHguQ09ORklHXToKCQkJY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5NRU5VUyl8fGNhbi5Db25mKGNoYXQuTUVOVVMpLCBjYW4ub25hY3Rpb24uX21lbnVzKSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgewoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLm9uYWN0aW9uW2J1dHRvbl18fGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCQljYW4ucnVuKGV2ZW50LCBbYnV0dG9uXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIGNhbi51c2VyLnRyYW5zKGNhbiwgYnV0dG9uKSkgfSkKCQkJCX0sIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGJ1dHRvbn0pCgkJCX0pCgl9LAoKCV90aW1lOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi5jb3JlLlRpbWVyKHtpbnRlcnZhbDogNTAwfSwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50aW1lKGNhbiwgdGFyZ2V0KSB9KQoJCWNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCB7YWN0aW9uOiAiZGF0ZSIsIHN0eWxlOiB7Im1pbi13aWR0aCI6IDMwNn0sIF9pbml0OiBmdW5jdGlvbihzdWIpIHsKCQkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCB0b3ApIHsgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwge3RvcDogdG9wLCByaWdodDogMCwgbGVmdDogIiJ9KSB9KQoJCX19LCB0YXJnZXQpLCB0YXJnZXQub25tb3VzZWVudGVyID0gdGFyZ2V0LmNsaWNrCgl9LAoJdGltZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbikKCQl0YXJnZXQuaW5uZXJIVE1MID0gY2FuLnVzZXIudGltZShjYW4sIG51bGwsICIldyAlSDolTTolUyIpCgl9LAoJYXZhdGFyOiBmdW5jdGlvbihldmVudCwgY2FuLCBhdmF0YXIpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYWFhLkFWQVRBUiwgW2F2YXRhcl0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4udXNlci5pbmZvLmF2YXRhciA9IGF2YXRhciwgY2FuLm9uaW1wb3J0Ll9hdmF0YXIoY2FuLCBtc2cpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCX0pCgl9LAoJdG9waWM6IGZ1bmN0aW9uKGNhbiwgdG9waWMpIHsgdG9waWMgJiYgKGNhbi5fdG9waWMgPSB0b3BpYykKCQl0b3BpYyA9IGNhbi5fdG9waWMgfHwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5UT1BJQykgfHwgVm9sY2Fub3MubWV0YS5hcmdzLnRvcGljIHx8IChjYW4uYmFzZS5pc05pZ2h0KCk/IGNoYXQuQkxBQ0s6IGNoYXQuV0hJVEUpCgkJLy8gY2FuLnJlcXVpcmUoWyIvY2hhdC90b3BpYy8iK3RvcGljKyIuY3NzIl0pCgkJY2FuLnVzZXIudG9waWMoY2FuLCB0b3BpYykKCX0sCgliYWNrZ3JvdW5kOiBmdW5jdGlvbihldmVudCwgY2FuLCBiYWNrZ3JvdW5kKSB7IGlmIChjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5CQUNLR1JPVU5ELCBbYmFja2dyb3VuZF0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4udXNlci5pbmZvLmJhY2tncm91bmQgPSBiYWNrZ3JvdW5kLCBjYW4ub25pbXBvcnQuX2JhY2tncm91bmQoY2FuLCBtc2cpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCX0pCgl9LAoJbWVudTogZnVuY3Rpb24oY2FuLCBjbWRzLCBjYiwgdHJhbnMpIHsgY2FuLmJhc2UuaXNTdHJpbmcoY21kcykgJiYgKGNtZHMgPSBbY21kc10pCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3R5cGU6IGNtZHNbMF0sIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLmJhc2UuZ2V0VmFsaWQoY21kcy5zbGljZSgxKSwgW2NtZHNbMF1dKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpZiAoY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSkpIHsKCQkJCXJldHVybiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbSwgdHJhbnMpXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtLCBbaXRlbV0pCgkJCQkJLy8gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgY21kcykKCQkJCX19CgoJCQl9IGVsc2UgaWYgKGNhbi5iYXNlLmlzQXJyYXkoaXRlbSkpIHsKCQkJCXZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgcmV0dXJuIGNhbi51c2VyLnRyYW5zKGNhbiwgdmFsdWUsIHRyYW5zKSB9KQoJCQkJcmV0dXJuIHt2aWV3OiBbaHRtbC5NRU5VLCBodG1sLkRJViwgY2FuLnVzZXIudHJhbnMoY2FuLCBsaXN0WzBdLCB0cmFucyldLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9uYWN0aW9uLmNhcnRlKGV2ZW50LCBjYW4sIGxpc3Quc2xpY2UoMSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEsIGluZGV4KSB7CgkJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW1baW5kZXgrMV0sIGl0ZW0pCgkJCQkJfSwgdHJhbnMpCgkJCQl9fQoKCQkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc09iamVjdChpdGVtKSkgewoJCQkJcmV0dXJuIGl0ZW0KCQkJfQoJCX0pIH1dKS5maXJzdAoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTlBMVUdJTiwge2hlbHA6ICLms6jlhozmj5Lku7YiLAoJInRvcGljIjogc2h5KCLkuLvpopgiLCB7CgkJImRlbW8iOiBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgeyBjYW4ub25pbXBvcnQudG9waWMoY2FuLCBjbWRzWzBdKSB9LAoJfSwgWyJ0b3BpYzpzZWxlY3Q9d2hpdGUsYmxhY2siLCAicnVuOmJ1dHRvbiIsICJkZW1vOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5vbmltcG9ydC50b3BpYyhjYW4sIGNtZHNbMF0pCgl9KSwKCSJjb29raWUiOiBzaHkoIuaPkOekuiIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJY2FuLmNvcmUuSXRlbShjYW4ubWlzYy5Db29raWUoY2FuKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQltc2cuUHVzaCgia2V5Iiwga2V5KSwgbXNnLlB1c2goInZhbHVlIiwgdmFsdWUpCgkJfSkKCX0pLAoJImFsZXJ0Ijogc2h5KCLmj5DnpLoiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNtZHMgJiYgY21kc1swXSAmJiBjYW4udXNlci5hbGVydChjbWRzWzBdKQoJfSksCgkiaW5mbyI6IHNoeSgi5L+h5oGvIiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJfSksCgkibG9nIjogc2h5KCLml6Xlv5ciLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNvbnNvbGUubG9nKGNtZHNbMF0pCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJX21lbnVzOiBbWyJzZXR0aW5nIiwgY2hhdC5CTEFDSywgY2hhdC5XSElURSwgY2hhdC5QUklOVCwgY29kZS5XRUJQQUNLLCAidG9pbWFnZSIsIGN0eC5DT05GSUddXSwKCV90cmFuczogewoJCSJzZWFyY2giOiAi5pCc57SiIiwKCgkJInNldHRpbmciOiAi6K6+572uIiwKCQkiYmxhY2siOiAi6buR6Imy5Li76aKYIiwKCQkid2hpdGUiOiAi55m96Imy5Li76aKYIiwKCQkicHJpbnQiOiAi5omT5Y2w5Li76aKYIiwKCQkid2VicGFjayI6ICLmiZPljIXpobXpnaIiLAoJCSJ0b2ltYWdlIjogIueUn+aIkOWbvueJhyIsCgkJImNvbmZpZyI6ICLmi4nlj5bphY3nva4iLAoKCQkic2hhcmV1c2VyIjogIuWFseS6q+eUqOaItyIsCgkJInNldG5pY2siOiAi6K6+572u5pi156ewIiwKCQkicGFzc3dvcmQiOiAi5L+u5pS55a+G56CBIiwKCQkibGFuZ3VhZ2UiOiAi6K+t6KiA5Zyw5Yy6IiwgImNoaW5lc2UiOiAi5Lit5paHIiwKCQkiY2xlYXIiOiAi5riF6Zmk6IOM5pmvIiwKCQkibG9nb3V0IjogIumAgOWHuueZu+W9lSIsCgl9LAoJb25tYWluOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5ydW4oe30sIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJaWYgKCFjYW4uQ29uZihhYWEuVVNFUk5JQ0ssIG1zZy5PcHRpb24oYWFhLlVTRVJOSUNLKXx8bXNnLk9wdGlvbihpY2UuTVNHX1VTRVJOQU1FKSkpIHsKCQkJCW1zZy5PcHRpb24oY2hhdC5TU08pPyBjYW4udXNlci5qdW1wcyhtc2cuT3B0aW9uKGNoYXQuU1NPKSk6IGNhbi51c2VyLmxvZ2luKGNhbiwgZnVuY3Rpb24oKSB7CgkJCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05NQUlOLCBtc2cpCgkJCQl9LCBtc2cuT3B0aW9uKGFhYS5MT0dJTiksIG1zZy5PcHRpb24oImxvZ2luLmRldiIpKQoJCQkJcmV0dXJuIC8vIOeZu+W9leiupOivgQoJCQl9CgkJCWNhbi5iYXNlLkNvcHkoY2FuLm9uYWN0aW9uLl90cmFucywgY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5UUkFOUyksIHt9KSkKCQkJY2FuLnVzZXIuaW5mby51c2VybmljayA9IGNhbi5Db25mKGFhYS5VU0VSTklDSyksIGNhbi51c2VyLmluZm8uYXZhdGFyID0gbXNnLk9wdGlvbihhYWEuQVZBVEFSKSwgY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID0gbXNnLk9wdGlvbihhYWEuQkFDS0dST1VORCkKCQkJY2FuLnVzZXIuaW5mby5sYW5ndWFnZSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGFhYS5MQU5HVUFHRSl8fG1zZy5PcHRpb24oYWFhLkxBTkdVQUdFKQoJCQltc2cuT3B0aW9uKG5mcy5TQ1JJUFQpICYmIGNhbi5yZXF1aXJlKGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKG5mcy5TQ1JJUFQpKSwgZnVuY3Rpb24oY2FuKSB7IGNhbi5vbmFjdGlvbi5zb3VyY2UoY2FuLCBtc2cpIH0pIAoJCQljYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2csIGZ1bmN0aW9uKG1zZykgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkxPR0lOLCBtc2cpIH0sIGNhbi5fb3V0cHV0KQoJCX0pCgl9LAoJb25zZWFyY2hmb2N1czogZnVuY3Rpb24oY2FuKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbImRpdi5zZWFyY2giLCBodG1sLklOUFVUXSwgZnVuY3Rpb24odGFyZ2V0KSB7IHRhcmdldC5mb2N1cygpIH0pIH0sCglvbndlYnBhY2s6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5vbmFjdGlvbltjb2RlLldFQlBBQ0tdKG1zZy5fZXZlbnQsIGNhbikgfSwKCW9uc3Rvcm1fc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7IGNhbi5Db25mKGNoYXQuUklWRVIsIHJpdmVyKSwgY2FuLkNvbmYoY2hhdC5TVE9STSwgc3Rvcm0pIH0sCglvbmFjdGlvbl9jbWQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuKSB9LAoKCXRpdGxlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIGFyZ3MgPSB7fTsgY2FuLmNvcmUuTGlzdChbY2hhdC5USVRMRSwgY2hhdC5UT1BJQywgY2hhdC5MQVlPVVRdLCBmdW5jdGlvbihrZXkpIHsKCQkJdmFyIHZhbHVlID0gY2FuLm1pc2MuU2VhcmNoKGNhbiwga2V5KTsgdmFsdWUgJiYgKGFyZ3Nba2V5XSA9IHZhbHVlKQoJCX0pCgkJY2FuLnVzZXIuanVtcHMoY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCBhcmdzLCB0cnVlKSkKCX0sCgoJYmxhY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25pbXBvcnQudG9waWMoY2FuLCBidXR0b24pLCBjYW4ub25sYXlvdXQuX2luaXQoY2FuKSB9LAoJd2hpdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25pbXBvcnQudG9waWMoY2FuLCBidXR0b24pLCBjYW4ub25sYXlvdXQuX2luaXQoY2FuKSB9LAoJcHJpbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25pbXBvcnQudG9waWMoY2FuLCBbY2hhdC5XSElURSwgYnV0dG9uXSksIGNhbi5zZXRSaXZlcihodG1sLkhFSUdIVCwgIiIpLCBjYW4uc2V0QWN0aW9uKGh0bWwuSEVJR0hULCAiIikgfSwKCXdlYnBhY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogY2FuLnVzZXIudGl0bGUoKX1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5jb3JlLkl0ZW0oVm9sY2Fub3MubWV0YS5wYWNrLCBmdW5jdGlvbihrZXksIG1zZykgeyAKCQkJCWNhbi5jb3JlLkxpc3QoWyJfZXZlbnQiLCAiX2NhbiIsICJfeGhyIiwgaWNlLk1TR19TRVNTSUQsICIiXSwgZnVuY3Rpb24oa2V5KSB7IGRlbGV0ZShtc2dba2V5XSkgfSkKCQkJfSkKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7CgkJCQl0b3BpYzogY2FuLl90b3BpYywgbGF5b3V0OiAgY2FuLmdldEFjdGlvbihjaGF0LkxBWU9VVCksCgkJCQlyaXZlcjogY2FuLkNvbmYoY2hhdC5SSVZFUiksIHN0b3JtOiBjYW4uQ29uZihjaGF0LlNUT1JNKSwKCQkJCW5hbWU6IGRhdGEubmFtZSwgY29udGVudDogSlNPTi5zdHJpbmdpZnkoVm9sY2Fub3MubWV0YS5wYWNrKSwKCQkJCWFyZ3M6ICJuYW1lLHRvcGljLGxheW91dCxyaXZlcixzdG9ybSIsCgkJCX0pCgoJCQl2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi5omT5YyF5LitLi4uIiwgY29kZS5XRUJQQUNLKQoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLldFQlBBQ0ssIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCXRvYXN0LmNsb3NlKCksIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sICLmiZPljIXmiJDlip8iLCBjb2RlLldFQlBBQ0spCgkJCQljYW4udXNlci5kb3dubG9hZChjYW4sICIvc2hhcmUvbG9jYWwvIittc2cuUmVzdWx0KCksIG5hbWUsIG5mcy5IVE1MKQoJCQl9KQoJCX0pCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLnVzZXIudGl0bGUoKSwgY2FuLl9yb290Ll90YXJnZXQpCgl9LAoJY29uZmlnOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAic2NvcGUiLCB2YWx1ZTogImV0Yy9sb2NhbC5zaHkifV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY3R4LkNPTkZJRywgYXJncywgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLmp1bXBzKG1zZy5SZXN1bHQoKSkgfSkKCQl9KQoJfSwKCgljYXJ0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbGlzdCwgY2IpIHsKCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24sIGxpc3QsIGNiKQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBhcmdzKSB7CgkJY2FuLnVzZXIuc2hhcmUoY2FuLCBjYW4ucmVxdWVzdChldmVudCksIFtjdHguQUNUSU9OLCBjaGF0LlNIQVJFXS5jb25jYXQoYXJnc3x8W10sIFtjaGF0LlJJVkVSLCBjYW4uQ29uZihjaGF0LlJJVkVSKXx8IiIsIGNoYXQuU1RPUk0sIGNhbi5Db25mKGNoYXQuU1RPUk0pfHwiIl0pKQoJfSwKCgl1c2VybmljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8IGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm9uYWN0aW9uLmNhcnRlKGV2ZW50LCBjYW4sIFsic2hhcmV1c2VyIiwgInNldG5pY2siLCBhYWEuUEFTU1dPUkQsIFthYWEuTEFOR1VBR0UsIGFhYS5DSElORVNFLCBhYWEuRU5HTElTSF0sIGNsaS5DTEVBUiwgYWFhLkxPR09VVF0pCgl9LAoJc2hhcmV1c2VyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuc2hhcmUoY2FuLCBjYW4ucmVxdWVzdChldmVudCksIFtjdHguQUNUSU9OLCBjaGF0LlNIQVJFLCBtZGIuVFlQRSwgYWFhLkxPR0lOXSkKCX0sCglzZXRuaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHVpID0gY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBhYWEuVVNFUk5JQ0ssIHZhbHVlOiBjYW4uQ29uZihhYWEuVVNFUk5JQ0spfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgYWFhLlVTRVJOSUNLLCBbbGlzdFswXV0sIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGFhYS5VU0VSTklDSyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpdGVtLCBjYW4uQ29uZihhYWEuVVNFUk5JQ0ssIGxpc3RbMF0pKQoJCQkJfSksIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pCgkJCX0pCgkJfSkKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ucGFnZS5zdHlsZShjYW4sIHVpLl90YXJnZXQsIHt0b3A6IDQwLCByaWdodDogMCwgbGVmdDogIiJ9KQoJfSwKCXBhc3N3b3JkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHVpID0gY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWwoJCQl7bmFtZTogaHRtbC5QQVNTV09SRCwgdHlwZTogaHRtbC5QQVNTV09SRCwgYWN0aW9uOiBpY2UuQVVUT30sCgkJCXtuYW1lOiBodG1sLlBBU1NXT1JELCB0eXBlOiBodG1sLlBBU1NXT1JELCBhY3Rpb246IGljZS5BVVRPfSwKCQldLCBmdW5jdGlvbihsaXN0KSB7CgkJCWlmIChsaXN0WzBdICE9IGxpc3RbMV0pIHsgcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgIuWvhueggeS4jeS4gOiHtCIpLCB1aS5mb2N1cygpLCB0cnVlIH0KCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgYWFhLlBBU1NXT1JELCBbbGlzdFswXV0pCgkJfSkKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ucGFnZS5zdHlsZShjYW4sIHVpLl90YXJnZXQsIHt0b3A6IDQwLCByaWdodDogMCwgbGVmdDogIiJ9KQoJfSwKCWNoaW5lc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwgYWFhLkxBTkdVQUdFLCAiemgiKSB9LAoJZW5nbGlzaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCBhYWEuTEFOR1VBR0UsICJlbiIpIH0sCgljbGVhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQuYmFja2dyb3VuZChldmVudCwgY2FuLCAiIiksIGNhbi5vbmltcG9ydC5hdmF0YXIoZXZlbnQsIGNhbiwgIiIpIH0sCglsb2dvdXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIubG9nb3V0KGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldEhlaWdodCB9LAoJdG9waWM6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLl90b3BpYyB9LAoJYXZhdGFyOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLnVzZXIuaW5mby5hdmF0YXIgPT0gInZvaWQiKSB7CgkJCXJldHVybiAiIgoJCX0KCQlyZXR1cm4gY2FuLnVzZXIuaW5mby5hdmF0YXIKCX0sCgliYWNrZ3JvdW5kOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID09ICJ2b2lkIikgewoJCQlyZXR1cm4gIiIKCQl9CgkJcmV0dXJuIGNhbi51c2VyLmluZm8uYmFja2dyb3VuZAoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGFuZWwvcml2ZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5yaXZlcl9saXN0ID0ge30sIGNhbi5zdG9ybV9saXN0ID0ge30KCQljYW4ub25pbXBvcnQuX21haW4oY2FuLCBtc2cpLCBjYW4ub25pbXBvcnQuX21lbnUoY2FuLCBtc2cpCgoJCXZhciBzZWxlY3Q7IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBtc2cuVGFibGUoZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fcml2ZXIoY2FuLCBpdGVtLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCShpbmRleCA9PSAwIHx8IGl0ZW0uaGFzaCA9PSBjYW4uX21haW5fcml2ZXIpICYmIChzZWxlY3QgPSB0YXJnZXQpCgkJCX0pCgkJfSkpLCBzZWxlY3QgJiYgc2VsZWN0LmNsaWNrKCkKCX0sCglfbWFpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQkvLyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgY2FuLl9tYWluX3JpdmVyID0gInByb2R1Y3QiLCBjYW4uX21haW5fc3Rvcm0gPSAib2ZmaWNlIiB9CgkJLy8gaWYgKGNhbi51c2VyLmlzV2VpWGluKSB7IGNhbi5fbWFpbl9yaXZlciA9ICJzZXJ2aWNlIiwgY2FuLl9tYWluX3N0b3JtID0gInd4IiB9CgkJY2FuLl9tYWluX3JpdmVyID0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5SSVZFUil8fG1zZy5PcHRpb24oaWNlLk1TR19SSVZFUil8fFZvbGNhbm9zLm1ldGEuYXJncy5yaXZlcnx8Y2FuLl9tYWluX3JpdmVyfHwicHJvamVjdCIKCQljYW4uX21haW5fc3Rvcm0gPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlNUT1JNKXx8bXNnLk9wdGlvbihpY2UuTVNHX1NUT1JNKXx8Vm9sY2Fub3MubWV0YS5hcmdzLnN0b3JtfHxjYW4uX21haW5fc3Rvcm18fCJzdHVkaW8iCgl9LAoJX21lbnU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGlmIChjYW4udXNlci5tb2QuaXNQb2R8fGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5NRU5VUyksIGNhbi5Db25mKGNoYXQuTUVOVVMpfHxjYW4ub25kZXRhaWwuX21lbnVzKSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgewoJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uZGV0YWlsLCBidXR0b25dLCBbZXZlbnQsIGNhbiwgYnV0dG9uLCBjYW4uQ29uZihjaGF0LlJJVkVSKSwgY2FuLkNvbmYoY2hhdC5TVE9STSldKQoJCX0pCgl9LAoJX2NhcnRlOiBmdW5jdGlvbihjYW4sIGxpc3QsIHJpdmVyLCBzdG9ybSkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQlpZiAoY2FuLmNvcmUuVmFsdWUoY2FuLl9yb290LCBjYW4uY29yZS5LZXlzKGNoYXQuUklWRVIsIHJpdmVyKSkpIHsgcmV0dXJuIH0KCgkJY2FuLm9uYWN0aW9uLmNhcnRlKGV2ZW50LCBjYW4sIGxpc3QsIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1vZHVsZSkgewoJCQltb2R1bGVbYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkKCQl9KQoJfSwKCV9yaXZlcjogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYikgewoJCXJldHVybiB7dGV4dDogW21ldGEubmFtZSwgaHRtbC5ESVYsIGh0bWwuSVRFTV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFjdGlvbi5zdG9ybShldmVudCwgY2FuLCBtZXRhLmhhc2gpCgoJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jYXJ0ZShjYW4sIGNhbi5vbmRldGFpbC5saXN0LCBtZXRhLmhhc2gpCgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJY2FuLnJpdmVyX2xpc3RbbWV0YS5oYXNoXSA9IHRhcmdldCwgY2IodGFyZ2V0KQoJCX19Cgl9LAoJX3N0b3JtOiBmdW5jdGlvbihjYW4sIG1ldGEsIHJpdmVyKSB7CgkJcmV0dXJuIHt0ZXh0OiBbbWV0YS5uYW1lLCBodG1sLkRJViwgaHRtbC5JVEVNXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYWN0aW9uLmFjdGlvbihldmVudCwgY2FuLCByaXZlciwgbWV0YS5oYXNoKQoKCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5fY2FydGUoY2FuLCBjYW4ub25kZXRhaWwuc3VibGlzdCwgcml2ZXIsIG1ldGEuaGFzaCkKCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQljYW4uc3Rvcm1fbGlzdFtjYW4uY29yZS5LZXlzKHJpdmVyLCBtZXRhLmhhc2gpXSA9IHRhcmdldAoJCX19Cgl9LAoJZGlzcGxheTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBzaG93ID0gY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fdGFyZ2V0KTsgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbik7IHJldHVybiBzaG93Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORU5HSU5FLCB7aGVscDogIuino+aekOW8leaTjiIsIF9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7Cgl2YXIgbGlzdCA9IGNhbi5fcm9vdC5yaXZlcgoJY21kcy5sZW5ndGggPT0gMCAmJiBjYW4uY29yZS5JdGVtU29ydChsaXN0LCAib3JkZXIiLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJaWYgKGNhbi5jb3JlLkl0ZW0odmFsdWUuc3Rvcm0pLmxlbmd0aCA9PSAwKSB7IHJldHVybiB9CgkJbXNnLlB1c2goe2hhc2g6IGtleSwgbmFtZTogY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBrZXk6IHZhbHVlLm5hbWV9KSAvLyDnvqTnu4TliJfooagKCX0pOyBpZiAoY21kcy5sZW5ndGggIT0gMSAmJiBjbWRzWzFdICE9IGNoYXQuU1RPUk0pIHsgcmV0dXJuIGZhbHNlIH0KCgl2YXIgcml2ZXIgPSBsaXN0W2NtZHNbMF1dOyBpZiAoIXJpdmVyKSB7IHJldHVybiBmYWxzZSB9CgljYW4uY29yZS5JdGVtU29ydChyaXZlci5zdG9ybSwgIm9yZGVyIiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCW1zZy5QdXNoKHtoYXNoOiBrZXksIG5hbWU6IGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIj8ga2V5OiB2YWx1ZS5uYW1lfSkgLy8g5bqU55So5YiX6KGoCgl9KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyByZXR1cm4gdHJ1ZQp9fSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBsaXN0OiBbImNyZWF0ZSIsICJzaGFyZSIsICJyZWZyZXNoIl0sIF9pbml0OiBmdW5jdGlvbihjYW4sIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJb25sb2dpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfUklWRVIpID09ICJfc2hhcmUiKSB7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZywgbnVsbCwgY2FuLl9vdXRwdXQpLCBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5Db25mKGN0eC5BQ1RJT04pfHxjYW4ub25hY3Rpb24ubGlzdCkKCQkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCwgdHJ1ZSkKCQl9KQoJfSwKCW9uc2VhcmNoOiBmdW5jdGlvbihjYW4sIG1zZywgd29yZCkgewoJCWlmICh3b3JkWzBdID09IGNoYXQuU1RPUk0pIHsgY2FuLm9uZXhwb3J0LnN0b3JtKGNhbiwgbXNnLCB3b3JkKSB9Cgl9LAoJb25zdG9ybV9zZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCByaXZlciwgc3Rvcm0pIHsKCQlpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY3R4LkFSR1MsIEpTT04uc3RyaW5naWZ5KHtyaXZlcjogcml2ZXIsIHN0b3JtOiBzdG9ybX0pKSB9Cgl9LAoJb25hY3Rpb25fdG91Y2g6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4pCgl9LAoJb25hY3Rpb25fbm90b29sOiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLm9uZGV0YWlsWyLmt7vliqDlt6XlhbciXShtc2cuX2V2ZW50LCBjYW4sICLmt7vliqDlt6XlhbciLCByaXZlciwgc3Rvcm0pCgl9LAoKCWNhcnRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaXN0LCBjYikgewoJCWNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgY2FuLm9uZGV0YWlsLCBsaXN0LCBjYikKCX0sCglzdG9ybTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcml2ZXIpIHsgY2FuLnN1Ymxpc3QgPSBjYW4uc3VibGlzdHx8e30KCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRElWX0lURU0sIGNhbi5yaXZlcl9saXN0W3JpdmVyXSkKCQl2YXIgbGlzdCA9IGNhbi5zdWJsaXN0W3JpdmVyXTsgaWYgKGxpc3QpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBsaXN0KSB9CgoJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5TVE9STV0sIGZ1bmN0aW9uKG1zZykgewoJCQl2YXIgc2VsZWN0ID0gMDsgbGlzdCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3ZpZXc6IGh0bWwuTElTVCwgbGlzdDogbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCQlyaXZlciA9PSBjYW4uX21haW5fcml2ZXIgJiYgaXRlbS5oYXNoID09IGNhbi5fbWFpbl9zdG9ybSAmJiAoc2VsZWN0ID0gaW5kZXgpCgkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9zdG9ybShjYW4sIGl0ZW0sIHJpdmVyKQoJCQl9KSB9XSkuZmlyc3QsIGxpc3QuY2hpbGRyZW4ubGVuZ3RoID4gMCAmJiBsaXN0LmNoaWxkcmVuW3NlbGVjdF0uY2xpY2soKQoKCQkJZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nICYmIGNhbi5fb3V0cHV0Lmluc2VydEJlZm9yZShsaXN0LCBldmVudC50YXJnZXQubmV4dFNpYmxpbmcpCgkJCWNhbi5zdWJsaXN0W3JpdmVyXSA9IGxpc3QKCQl9KQoJfSwKCWFjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uc3VibGlzdFtyaXZlcl0sIHtkaXNwbGF5OiBodG1sLkJMT0NLfSkKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRElWX0lURU0sIGNhbi5yaXZlcl9saXN0W3JpdmVyXSkKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9JVEVNXSwgY2FuLnN0b3JtX2xpc3RbY2FuLmNvcmUuS2V5cyhyaXZlciwgc3Rvcm0pXSkKCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OU1RPUk1fU0VMRUNULCBjYW4ucmVxdWVzdChldmVudCwgewoJCQkJcml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIsIHJpdmVyKSwgc3Rvcm06IGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSwKCQkJfSkpCgkJfSkKCX0sCgoJY3JlYXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIudHJhbnMoY2FuLCB7InB1YmxpYyI6ICLlhazlvIDnvqQiLCAicHJvdGVjdGVkIjogIuWGhemDqOe+pCIsICJwcml2YXRlIjogIuengeaciee+pCJ9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IG1kYi5UWVBFLCB2YWx1ZXM6IFtjaGF0LlBVQkxJQywgY2hhdC5QUk9URUNURUQsIGNoYXQuUFJJVkFURV0sIF90cmFuczogIuexu+WeiyJ9LAoJCQl7bmFtZTogbWRiLk5BTUUsIHZhbHVlOiAiaGkiLCBfdHJhbnM6ICLnvqTlkI0ifSwge25hbWU6IG1kYi5URVhULCB2YWx1ZTogImhlbGxvIiwgX3RyYW5zOiAi566A5LuLIn0sCgkJXSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBhcmdzLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogbXNnLlJlc3VsdCgpfSkgfSkKCQl9KQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IGNhbi5Db25mKGNoYXQuU1RPUk0pfV0sIFttZGIuVFlQRSwgY2hhdC5TVE9STV0pCgl9LAoJcmVmcmVzaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge3JpdmVyOiBjYW4uQ29uZihjaGF0LlJJVkVSKSwgc3Rvcm06IGNhbi5Db25mKGNoYXQuU1RPUk0pLCB0b3BpYzogY2FuLmdldEhlYWRlcihjaGF0LlRPUElDKSwgbGF5b3V0OiBjYW4uZ2V0QWN0aW9uKGNoYXQuTEFZT1VUKX0KCQlpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsgbG9jYWxTdG9yYWdlLnNldEl0ZW0oY3R4LkFSR1MsIEpTT04uc3RyaW5naWZ5KGFyZ3MpKSB9CgkJY2FuLm1pc2MuU2VhcmNoKGNhbiwgYXJncykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi6I+c5Y2V5Lqk5LqSIiwKCWxpc3Q6IFsi5YWx5Lqr576k57uEIiwgIua3u+WKoOW6lOeUqCIsICLmt7vliqDorr7lpIciLCAi5re75Yqg55So5oi3IiwgIumHjeWRveWQjee+pOe7hCIsICLliKDpmaTnvqTnu4QiXSwKCXN1Ymxpc3Q6IFsi5YWx5Lqr5bqU55SoIiwgIua3u+WKoOW3peWFtyIsICLkv53lrZjlj4LmlbAiLCAi6YeN5ZG95ZCN5bqU55SoIiwgIuWIoOmZpOW6lOeUqCJdLAoJLy8gX21lbnVzOiBbCgkvLyAJWyJjcmVhdGUiLCAi5Yib5bu6576k57uEIiwgIua3u+WKoOW6lOeUqCIsICLmt7vliqDlt6XlhbciLCAi5re75Yqg6K6+5aSHIiwgIuWIm+W7uuepuumXtCJdLAoJLy8gCVsic2hhcmUiLCAi5YWx5Lqr576k57uEIiwgIuWFseS6q+W6lOeUqCIsICLlhbHkuqvlt6XlhbciLCAi5YWx5Lqr6K6+5aSHIiwgIuiuv+mXruepuumXtCJdLAoJLy8gXSwKCgki5Yib5bu6576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pIH0sCgki5YWx5Lqr576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiByaXZlcn1dLCBbbWRiLlRZUEUsIGNoYXQuUklWRVJdKQoJfSwKCSLmt7vliqDlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7IGNhbi5vbmRldGFpbC5jcmVhdGUoZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgfSwKCSLlhbHkuqvlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBzdG9ybX1dLCBbbWRiLlRZUEUsIGNoYXQuU1RPUk1dKQoJfSwKCSLmt7vliqDlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBjdHguQ09NTUFORCwgImluZGV4IiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5JTlNFUlQsIG1kYi5IQVNILCBzdG9ybV0uY29uY2F0KFt3ZWIuU1BBQ0UsICIiLCBjdHguSU5ERVgsIGl0ZW1bMF1dKSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSB9KQoJfSwKCSLlhbHkuqvlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBtZGIuUExVR0lOLCAibmFtZSxpbmRleCxhcmdzIiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4udXNlci5zaGFyZShjYW4sIGNhbi5yZXF1ZXN0KGV2ZW50KSwgW3JpdmVyLCBjdHguQUNUSU9OLCBjaGF0LlNIQVJFLCBtZGIuVFlQRSwgY2hhdC5GSUVMRCwKCQkJCW1kYi5OQU1FLCBpdGVtWzFdLCBtZGIuVEVYVCwgaXRlbVsyXSwgY2hhdC5USVRMRSwgaXRlbVswXSwgY2hhdC5SSVZFUiwgcml2ZXIsIGNoYXQuU1RPUk0sIHN0b3JtLAoJCQldKQoJCX0pCgl9LAoKCSLmt7vliqDorr7lpIciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnVzZXIuc2VsZWN0KGV2ZW50LCBjYW4sIHdlYi5TUEFDRSwgInR5cGUsbmFtZSx0ZXh0IiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuTk9ERVMsIGN0eC5BQ1RJT04sIG1kYi5JTlNFUlQsIG1kYi5UWVBFLCBpdGVtWzBdLCBtZGIuTkFNRSwgaXRlbVsxXV0sIGZ1bmN0aW9uKG1zZykgeyBuZXh0KCkgfSkKCQl9KQoJfSwKCSLlhbHkuqvorr7lpIciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5JTlZJVEUsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVzZXIudG9hc3RTY3JpcHQoY2FuLCBtc2cuUmVzdWx0KCksIGJ1dHRvbikgfSkKCX0sCgki5Yib5bu656m66Ze0IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHthY3Rpb246IGJ1dHRvbn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAibmFtZSIsIHZhbHVlOiAiaGkifSwge25hbWU6ICJyZXBvcyJ9LCB7bmFtZTogInRlbXBsYXRlIn1dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGNsaS5TVEFSVCwgYXJncy5jb25jYXQoY2hhdC5SSVZFUiwgcml2ZXIpLCBmdW5jdGlvbihtc2cpIHsKCQkJCXZhciBsaW5rID0gY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiBjYW4uY29yZS5LZXlzKGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCBtc2cuT3B0aW9uKG1kYi5OQU1FKSl9KQoJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCBsaW5rKSwgY2FuLnVzZXIub3BlbihsaW5rKQoJCQl9KQoJCX0pCgl9LAoJIuiuv+mXruepuumXtCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnVzZXIuc2VsZWN0KHtyaXZlcjogcml2ZXJ9LCBjYW4sIHdlYi5TUEFDRSwgInRpbWUsdHlwZSxuYW1lLHRleHQiKQoJfSwKCgki5re75Yqg55So5oi3IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCBjaGF0LlVTRVIsICJ1c2Vybmljayx1c2VybmFtZSIsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlVTRVIsIGN0eC5BQ1RJT04sIG1kYi5JTlNFUlQsIGFhYS5VU0VSTkFNRSwgaXRlbVswXV0sIGZ1bmN0aW9uKG1zZykgeyBuZXh0KCkgfSkKCQl9KQoJfSwKCSLph43lkb3lkI3nvqTnu4QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogcml2ZXJ9KSwgbWRiLk1PRElGWSwgW21kYi5OQU1FLCBkYXRhLm5hbWVdLCBmdW5jdGlvbihtc2cpIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlcn0pIH0pCgkJfSkKCX0sCgki5Yig6Zmk576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHtoYXNoOiByaXZlcn0pLCBtZGIuUkVNT1ZFLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogIiIsIHN0b3JtOiAiIn0pIH0pCgl9LAoKCSLkv53lrZjlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5nZXRBY3Rpb24oY3R4LkFSR1MsIGZ1bmN0aW9uKGl0ZW0sIG5leHQsIGluZGV4LCBhcnJheSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHtoYXNoOiBzdG9ybSwgaWQ6IGl0ZW0uZGF0YXNldC5pZH0pCgkJCXZhciB0b2FzdCA9IGNhbi51c2VyLnRvYXN0KGNhbiwgKGluZGV4KzEpK2ljZS5QUythcnJheS5sZW5ndGgsIGJ1dHRvbiwgMTAwMDAsIChpbmRleCsxKSoxMDAvYXJyYXkubGVuZ3RoKQoJCQljYW4ucnVuKG1zZywgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuTU9ESUZZLCBjdHguQVJHUywgaXRlbS5kYXRhc2V0LmFyZ3NdLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCXRvYXN0LmNsb3NlKCksIG5leHQoKSwgaW5kZXggPT0gYXJyYXkubGVuZ3RoLTEgJiYgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgYnV0dG9uKQoJCQkJfSkKCQkJfSkKCQl9KQoJfSwKCSLph43lkb3lkI3lupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHN0b3JtfSksIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLk1PRElGWV0uY29uY2F0KGFyZ3MpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBzdG9ybX0pCgkJCX0pCgkJfSkKCX0sCgki5Yig6Zmk5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogc3Rvcm19KSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuUkVNT1ZFXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiAiIn0pCgkJfSkKCX0sCgoKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLnRyYW5zKGNhbiwgeyJwdWJsaWMiOiAi5YWs5byA5bqU55SoIiwgInByb3RlY3RlZCI6ICLnvqTnu4TlupTnlKgiLCAicHJpdmF0ZSI6ICLkuKrkurrlupTnlKgifSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbCgkJCXtuYW1lOiBtZGIuVFlQRSwgdmFsdWVzOiBbY2hhdC5QVUJMSUMsIGNoYXQuUFJPVEVDVEVELCBjaGF0LlBSSVZBVEVdLCBfdHJhbnM6ICLnsbvlnosifSwKCQkJe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogImhpIiwgX3RyYW5zOiAi5ZCN56ewIn0sIHtuYW1lOiBtZGIuVEVYVCwgdmFsdWU6ICJoZWxsbyIsIF90cmFuczogIueugOS7iyJ9LAoJCV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuQ1JFQVRFXS5jb25jYXQoYXJncyksIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06IG1zZy5SZXN1bHQoKX0pCgkJCX0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXdpZHRoOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldFdpZHRoIH0sCglzdG9ybTogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQl2YXIgZmllbGRzID0gKG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KCIsIikKCQljYW4uY29yZS5JdGVtKGNhbi5fcm9vdC5yaXZlciwgZnVuY3Rpb24ocml2ZXIsIHZhbHVlKSB7CgkJCWNhbi5jb3JlLkl0ZW0odmFsdWUuc3Rvcm0sIGZ1bmN0aW9uKHN0b3JtLCBpdGVtKSB7CgkJCQlpZiAod29yZFsxXSAhPSAiIiAmJiB3b3JkWzFdICE9IHN0b3JtICYmIHdvcmRbMV0gIT0gaXRlbS5uYW1lKSB7IHJldHVybiB9CgoJCQkJdmFyIGRhdGEgPSB7Y3R4OiAiY2FuIiwgY21kOiAiU3Rvcm0iLAoJCQkJCXR5cGU6IHJpdmVyLCBuYW1lOiBzdG9ybSwgdGV4dDogc2h5KCLot7PovawiLCBmdW5jdGlvbihldmVudCkgewoJCQkJCQljYW4ub25hY3Rpb24uYWN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBzdG9ybSkKCQkJCQl9KSwKCQkJCX07IGNhbi5jb3JlLkxpc3QoZmllbGRzLCBmdW5jdGlvbihrZXkpIHsgbXNnLlB1c2goa2V5LCBkYXRhW2tleV18fCIiKSB9KQoJCQl9KQoJCX0pCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wYW5lbC9zZWFyY2guanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBsaXN0LCBjYiwgdGFyZ2V0KSB7CgkJY2FuLl9mb3JlYWNoID0gIioiCgkJY2FuLl9mb3JlYWNoID0gImNvbW1hbmQsc3BhY2UsdGV4dCIKCQljYW4ubGlzdCA9IG1zZy5UYWJsZSgpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCkKCQl2YXIgdGFibGUgPSBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgeyBjYW4uU3RhdHVzKG1kYi5UT1RBTCwgaW5kZXgrMSkKCQkJcmV0dXJuIHt0ZXh0OiBba2V5ID09IG1kYi5URVhUICYmIGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpICYmIGxpbmUudGV4dC5oZWxwIHx8IHZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbltjYW4udHlwZSA9PSBjYW4uX2ZvcmVhY2h8fGV2ZW50LmN0cmxLZXk/IGNoYXQuUExVR0lOOiBtZGIuU0VMRUNUXShldmVudCwgY2FuLCBpbmRleCkgCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQsIGNhbi5jb3JlLkxpc3QoKG1zZy5PcHRpb24oInNvcnQiKXx8ImN0eCxjbWQsdHlwZSxuYW1lLHRleHQiKS5zcGxpdChpY2UuRlMpLCBmdW5jdGlvbihpdGVtKSB7CgkJCXJldHVybiBsaXN0LmluZGV4T2YoaXRlbSkKCQl9KSk7IHRhYmxlICYmIGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuZGlzcGxheSwgdGFibGUub2Zmc2V0V2lkdGgpCgoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkEsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIub3BlbihpdGVtLmhyZWYpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkgfQoJCX0pLCBjYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpLCBbXSkuY29uY2F0KHtuYW1lOiAic2VsZWN0ZWQiLCB2YWx1ZTogIjAifSkpCgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLnVpLnByb2ZpbGUuaW5uZXJIVE1MID09ICIiICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCBodG1sLlREKVswXS5jbGljaygpCgl9LAoJX3dvcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpIHsgY2FuLnR5cGUgPSBjbWRzWzBdCgkJdmFyIGNiID0gY2FuLm9uYWN0aW9uW2NtZHNbMV1dOyBpZiAoY2IpIHsgY2Ioe30sIGNhbik7IHJldHVybiB9CgoJCXZhciByZXMgPSBjYW4ucmVxdWVzdCh7fSwgewoJCQl3b3JkOiBjbWRzLCBmaWVsZHM6IGZpZWxkcy5qb2luKGljZS5GUyksIHNvcnQ6IG1zZy5PcHRpb24oInNvcnQiKSwKCQkJcml2ZXI6IG1zZy5PcHRpb24oY2hhdC5SSVZFUiksIGluZGV4OiBtc2cuT3B0aW9uKG1kYi5JTkRFWCksCgkJfSkKCgkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TRUFSQ0gsIHJlcykKCQljYW4ucnVuKHJlcywgY21kcywgZnVuY3Rpb24ocmVzKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIHJlcywgZmllbGRzKSB9KQoJCWNhbi5vbm1vdGlvbi5zaG93KGNhbiksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBjYW4udWkud29yZCkKCQl9KQoJfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYikgeyBjYW4udWkud29yZC52YWx1ZSA9IGNtZHNbMV0KCQl2YXIgZmllbGRzID0gKGNtZHNbMl18fG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KGljZS5GUykKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dGg6IGZpZWxkc31dKSwgY2FuLmNiID0gZnVuY3Rpb24oKSB7CgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoY2FuLm9uZXhwb3J0LnNlbGVjdChjYW4pKSwgY2FuLm9ubW90aW9uLmhpZGUoY2FuKQoJCX0KCgkJY2FuLmlucHV0ID0gZnVuY3Rpb24oZXZlbnQsIHdvcmQpIHsgY21kc1sxXSA9IHdvcmR8fGNtZHNbMV0KCQkJY2FuLm9uaW1wb3J0Ll93b3JkKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpCgkJfSwgY2FuLm9uaW1wb3J0Ll93b3JkKGNhbiwgbXNnLCBjbWRzLCBmaWVsZHMpCgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wLCBsZWZ0LCB3aWR0aCwgaGVpZ2h0KSB7CgkJCWNhbi5Db25mSGVpZ2h0KGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVC0yKmh0bWwuUExVR0lOX01BUkdJTikKCQkJY2FuLkNvbmZXaWR0aCh3aWR0aC0yKmh0bWwuUExVR0lOX01BUkdJTikKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwge3RvcDogdG9wLCBsZWZ0OiBsZWZ0fSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIGxpc3Q6IFtjbGkuQ0xPU0UsIGNsaS5DTEVBUiwgY2xpLkRPTkVdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJb25sb2dpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5Db25mKGh0bWwuQUNUSU9OKXx8Y2FuLm9uYWN0aW9uLmxpc3QpCgkJY2FuLnVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFsKCQkJe2lucHV0OiBbIndvcmQiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJCWlmIChldmVudC5jdHJsS2V5KSB7CgkJCQkJaWYgKGV2ZW50LmtleSA9PSAiMCIpIHsKCQkJCQkJY2FuLm9uYWN0aW9uLmNsZWFyKGV2ZW50LCBjYW4pCgkJCQkJfQoJCQkJCWlmICgiMSIgPD0gZXZlbnQua2V5ICYmIGV2ZW50LmtleSA8PSAiOSIpIHsKCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIsIGluZGV4KSB7CgkJCQkJCQlpZiAoaW5kZXgrMSA9PSBldmVudC5rZXkpIHsKCQkJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIGluZGV4KSB7CgkJCQkJCQkJCWluZGV4ID09IDAgJiYgdGQuY2xpY2soKQoJCQkJCQkJCX0pCgkJCQkJCQl9CgkJCQkJCX0pCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCX0KCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRlKGNhbikgfQoKCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJCQlpZiAoZXZlbnQuc2hpZnRLZXkpIHsgdmFyIGZpcnN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIpWzFdCgkJCQkJCXJldHVybiBjYW4ub25hY3Rpb25bY2FuLnR5cGUgPT0gY2FuLl9mb3JlYWNoPyBjaGF0LlBMVUdJTjogaHRtbC5TRUxFQ1RdKGV2ZW50LCBjYW4sIGZpcnN0LmRhdGFzZXQuaW5kZXgpCgkJCQkJfQoJCQkJCWlmIChldmVudC5jdHJsS2V5KSB7IHJldHVybiBjYW4ub25hY3Rpb25bY2xpLkRPTkVdKGV2ZW50LCBjYW4pIH0KCQkJCQlyZXR1cm4gY2FuLmlucHV0KGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUpCgkJCQl9CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0cikgewoJCQkJCXZhciBoYXMgPSBmYWxzZTsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7CgkJCQkJCWhhcyA9IGhhcyB8fCB0ZC5pbm5lclRleHQuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpID4gLTEKCQkJCQl9KSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLkhJRERFTiwgIWhhcykKCQkJCX0pCgkJCX1dfSwKCQkJY2hhdC5DT05URU5ULCBodG1sLlNUQVRVUywge3ZpZXc6IFtjaGF0LkRJU1BMQVksIGh0bWwuVEFCTEVdfSwgY2hhdC5QUk9GSUxFLAoJCV0pLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLmRpc3BsYXksIGNoYXQuQ09OVEVOVCkKCX0sCglvbm9wZW5zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0eXBlLCB3b3JkKSB7IGNhbi5vbmltcG9ydC5zZWxlY3QoY2FuLCBtc2csIFt0eXBlfHxjYW4uX2ZvcmVhY2gsIHdvcmR8fCIiXSkgfSwKCgljbGVhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvZmlsZSkgfSwKCWRvbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmJhc2UuaXNGdW5jKGNhbi5jYikgJiYgY2FuLmNiKCkgfSwKCWNsb3NlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5oaWRlKGNhbikgfSwKCglzZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGluZGV4KSB7IHZhciBsaW5lID0gY2FuLmxpc3RbaW5kZXhdCgkJaWYgKGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZShjYW4pLCBsaW5lLnRleHQoZXZlbnQpIH0KCgkJdmFyIGZpZWxkcyA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRILCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmlubmVyVGV4dCB9KQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3RkOiBjYW4uY29yZS5MaXN0KGZpZWxkcywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gbGluZVtpdGVtXSB9KSwgZGF0YToge2luZGV4OiBpbmRleH0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJCQljYW4uU3RhdHVzKCJzZWxlY3RlZCIsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSKS5sZW5ndGgtMSkKCQl9fV0pLCBjYW4uU3RhdHVzKCJzZWxlY3RlZCIsIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSKS5sZW5ndGgtMSkKCX0sCgoJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgY2FuLCBpbmRleCkgeyB2YXIgbGluZSA9IGNhbi5saXN0W2luZGV4XQoJCWlmIChjYW4uYmFzZS5pc0Z1bmMobGluZS50ZXh0KSkgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGUoY2FuKSwgbGluZS50ZXh0KGV2ZW50KSB9CgkJaWYgKGxpbmUuY3R4ID09ICJ3ZWIud2lraSIgJiYgbGluZS5jbWQgPT0gIndvcmQiKSB7IHJldHVybiB9CgkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuQSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoKCQl2YXIgY21kID0gbGluZS5jbWQgPT0gY3R4LkNPTU1BTkQ/IGNhbi5jb3JlLktleXMobGluZS50eXBlLCBsaW5lLm5hbWUuc3BsaXQoaWNlLlNQKVswXSk6IGNhbi5jb3JlLktleXMobGluZS5jdHgsIGxpbmUuY21kKQoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogInBsdWciLCBpbmRleDogY21kfHxtc2cuT3B0aW9uKG1kYi5JTkRFWCl9LCBmdW5jdGlvbihzdWIsIG1ldGEpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgbWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKSkKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVC0xMTcpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoKSkKCQkJc3ViLkZvY3VzKCkKCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXNlbGVjdDogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7IHJldHVybiB0ZC5pbm5lckhUTUwgfSkKCQl9KS5zbGljZSgxKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0LmpzIgpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCk7IHN3aXRjaCAobWV0YS50eXBlKSB7CgkJCWNhc2UgaHRtbC5TRUxFQ1Q6IG1ldGEudmFsdWUgJiYgKHRhcmdldC52YWx1ZSA9IG1ldGEudmFsdWUpOyBicmVhawoJCQljYXNlIGh0bWwuQlVUVE9OOiBtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiB0YXJnZXQuY2xpY2soKTsgYnJlYWsKCQl9Cgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkpIH0sCglsaXN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAuQ29uZigibW9kZSIpICE9ICJzaW1wbGUiICYmIGNhbi5ydW4oZXZlbnQpIH0sCgliYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25pbXBvcnQuX2JhY2soY2FuLnN1cCkgfSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bihldmVudCkgfSwKCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAucmVxdWVzdChldmVudCwge190b2FzdDogIuaJp+ihjOS4rS4uLiJ9KQoJCWNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLkJVVFRPTiAmJiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgY2FuLkNvbmYobWRiLk5BTUUpXS5jb25jYXQoY2FuLnN1cC5JbnB1dCgpKSkKCX0sCglvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkKCQlpZiAoY2FuLkNvbmYobWRiLlRZUEUpID09IGh0bWwuU0VMRUNUKSB7IGNhbi5ydW4oZXZlbnQpIH0KCX0sCglvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkKCQlpZiAoY2FuLkNvbmYobWRiLlRZUEUpID09IGh0bWwuVEVYVEFSRUEpIHsgaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9IH0KCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsKCQkJY2FuLnJ1bihldmVudCksIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJfSBpZiAoIWV2ZW50LmN0cmxLZXkpIHsgcmV0dXJuIH0KCgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiYiI6IGNhbi5DbG9uZUlucHV0KCk7IGJyZWFrCgkJCWNhc2UgIm0iOiBjYW4uQ2xvbmVGaWVsZCgpOyBicmVhawoJCQlkZWZhdWx0OiByZXR1cm4KCQl9IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2lucHV0L2RhdGUuanMiClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi5o6n5Lu26K+m5oOFIiwgZGF0ZToge29uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsgY2IoZnVuY3Rpb24oY2FuLCBjYnMpIHsKCWZ1bmN0aW9uIHNldChub3cpIHsgY2JzKGNhbiwgY2FuLnVzZXIudGltZShjYW4sIG5vdyksIHRhcmdldC52YWx1ZSkgfQoKCS8vIOa3u+WKoOaOp+S7tgoJdmFyIG5vdyA9IHRhcmdldC52YWx1ZT8gbmV3IERhdGUodGFyZ2V0LnZhbHVlKTogbmV3IERhdGUoKQoJY2FuLl90cmFucyA9IGtpdC5EaWN0KCJ0b2RheSIsICLku4rlpKkiLCBtZGIuTkVYVCwgIuS4i+S4gOaciCIsIG1kYi5QUkVWLCAi5LiK5LiA5pyIIikKCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fYWN0aW9uKSwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbY2xpLkNMT1NFLAoJCVsiaG91ciJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDI0KSksIFsibWludXRlIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMCwgNjAsIDUpKSwgWyJzZWNvbmQiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgwLCA2MCwgNSkpLAoJCSJ0b2RheSIsICIiLCBtZGIuUFJFViwgWyJ5ZWFyIl0uY29uY2F0KGNhbi5jb3JlLkxpc3Qobm93LmdldEZ1bGxZZWFyKCkgLSAxMCwgbm93LmdldEZ1bGxZZWFyKCkgKyAxMCkpLAoJCVsibW9udGgiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgxLCAxMykpLCBtZGIuTkVYVCwKCV0sIGNhbi5fYWN0aW9uLCB7Y2xvc2U6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5jbG9zZSgpIH0sCgkJImhvdXIiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRIb3VycyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkibWludXRlIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0TWludXRlcyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkic2Vjb25kIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0U2Vjb25kcyhwYXJzZUludCh2YWx1ZSl8fDApLCBzaG93KG5vdykgfSwKCQkidG9kYXkiOiBmdW5jdGlvbihldmVudCkgeyBub3cgPSBuZXcgRGF0ZSgpLCBzZXQoc2hvdyhub3cpKSB9LAoKCQkicHJldiI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRNb250aChub3cuZ2V0TW9udGgoKS0xKSwgc2hvdyhub3cpIH0sCgkJInllYXIiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRGdWxsWWVhcihwYXJzZUludCh2YWx1ZSkpLCBzaG93KG5vdykgfSwKCQkibW9udGgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRNb250aChwYXJzZUludCh2YWx1ZSktMSksIHNob3cobm93KSB9LAoJCSJuZXh0IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldE1vbnRoKG5vdy5nZXRNb250aCgpKzEpLCBzaG93KG5vdykgfSwKCgkJIumaj+acuiI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXREYXRlKChNYXRoLnJhbmRvbSgpICogMTAwIC0gNTApICsgbm93LmdldERhdGUoKSksIHNob3cobm93KSB9LAoJCSLliY3kuIDlubQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCktMSksIHNob3cobm93KSB9LAoJCSLlkI7kuIDlubQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RnVsbFllYXIobm93LmdldEZ1bGxZZWFyKCkrMSksIHNob3cobm93KSB9LAoJfSkKCgljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykKCWNhbi5fdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5UQUJMRV19XSkuZmlyc3QKCXZhciB0b2RheSA9IG5ldyBEYXRlKCk7IGZ1bmN0aW9uIHNob3cobm93KSB7CgkJLy8g6K6+572u5o6n5Lu2CgkJY2FuLkFjdGlvbigieWVhciIsIG5vdy5nZXRGdWxsWWVhcigpKQoJCWNhbi5BY3Rpb24oIm1vbnRoIiwgbm93LmdldE1vbnRoKCkrMSkKCQljYW4uQWN0aW9uKCJob3VyIiwgbm93LmdldEhvdXJzKCkpCgkJY2FuLkFjdGlvbigibWludXRlIiwgcGFyc2VJbnQobm93LmdldE1pbnV0ZXMoKS81KSo1KQoJCWNhbi5BY3Rpb24oInNlY29uZCIsIHBhcnNlSW50KG5vdy5nZXRTZWNvbmRzKCkvNSkqNSkKCgkJLy8g6K6+572u57uE5Lu2CgkJY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi5fdGFibGUsIFt7dGg6IFsi5pelIiwgIuS4gCIsICLkuowiLCAi5LiJIiwgIuWbmyIsICLkupQiLCAi5YWtIl19XSkKCQl2YXIgdHI7IGZ1bmN0aW9uIGFkZChkYXksIHR5cGUpIHsgaWYgKGRheS5nZXREYXkoKSA9PSAwKSB7IHRyID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl90YWJsZSwgW3t0eXBlOiBodG1sLlRSfV0pLmxhc3QgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0ciwgW3t0ZXh0OiBbZGF5LmdldERhdGUoKSwgaHRtbC5URCwgY2FuLmJhc2UuVGltZSh0b2RheSwgIiV5LSVtLSVkIikgPT0gY2FuLmJhc2UuVGltZShkYXksICIleS0lbS0lZCIpPyBodG1sLlNFTEVDVDogdHlwZV0sCgkJCQlkYXRhc2V0OiB7ZGF0ZTogZGF5LmdldFRpbWUoKX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJc2V0KG5vdyA9IG5ldyBEYXRlKHBhcnNlSW50KGV2ZW50LnRhcmdldC5kYXRhc2V0LmRhdGUpKSkKCQkJCX0sCgkJCX1dKQoJCX0KCgkJLy8g5pe26Ze05Yy66Ze0CgkJdmFyIG9uZSA9IG5ldyBEYXRlKG5vdyk7IG9uZS5zZXREYXRlKDEpCgkJdmFyIGVuZCA9IG5ldyBEYXRlKG5vdyk7IGVuZC5zZXRNb250aChub3cuZ2V0TW9udGgoKSsxKSwgZW5kLnNldERhdGUoMSkKCQl2YXIgaGVhZCA9IG5ldyBEYXRlKG9uZSk7IGhlYWQuc2V0RGF0ZShvbmUuZ2V0RGF0ZSgpLW9uZS5nZXREYXkoKSkKCQl2YXIgdGFpbCA9IG5ldyBEYXRlKGVuZCk7IHRhaWwuc2V0RGF0ZShlbmQuZ2V0RGF0ZSgpKzctZW5kLmdldERheSgpKQoKCQkvLyDml7bpl7Tluo/liJcKCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShoZWFkKTsgZGF5IDwgb25lOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5QUkVWKSB9CgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUob25lKTsgZGF5IDwgZW5kOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5NQUlOKSB9CgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUoZW5kKTsgZW5kLmdldERheSgpICE9IDAgJiYgZGF5IDwgdGFpbDsgZGF5LnNldERhdGUoZGF5LmdldERhdGUoKSsxKSkgeyBhZGQoZGF5LCBtZGIuTkVYVCkgfQoKCQlyZXR1cm4gbm93Cgl9IHNob3cobm93KSwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuKQp9KX19IH0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9pbnB1dC9rZXkuanMiClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi5o6n5Lu26K+m5oOFIiwga2V5OiB7CglfaW5pdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgY2JzLCB0YXJnZXQsIG5hbWUsIHZhbHVlKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLklOUFVUUywgW25hbWUsIHZhbHVlfHx0YXJnZXQudmFsdWVdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uZmlndXJlLmtleS5fc2hvdyhjYW4sIG1zZywgY2JzLCB0YXJnZXQsIG5hbWUpCgkJfSkKCX0sCglfc2hvdzogZnVuY3Rpb24oY2FuLCBtc2csIGNicywgdGFyZ2V0LCBuYW1lKSB7CgkJaWYgKCFjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl90YXJnZXQsIG1zZy5MZW5ndGgoKSAhPSAwKSkgeyByZXR1cm4gfQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlKSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgc3R5bGU6IG1zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZC5sZW5ndGggPT0gMT8geyJtaW4td2lkdGgiOiB0YXJnZXQub2Zmc2V0V2lkdGgtMTZ9OiB7fSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKGNhbiwgdmFsdWUsIHRhcmdldC52YWx1ZSkKCQkJCW1zZy5PcHRpb24oaWNlLk1TR19QUk9DRVNTKSA9PSBpY2UuUFJPQ0VTU19BR0FJTiAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQljYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBjYW4sIGNicywgdGFyZ2V0LCBuYW1lLCB2YWx1ZSkKCQkJCX0pCgkJCX19CgkJfSksIGNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgW21kYi5UT1RBTCwgbWRiLklOREVYXSksIGNhbi5TdGF0dXMobWRiLlRPVEFMLCBtc2cuTGVuZ3RoKCkpCgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl90YXJnZXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLmJhc2UuTWF4KHRvcCtoZWlnaHQtY2FuLl90YXJnZXQub2Zmc2V0VG9wLCA0MDApKQoJCX0pCgl9LAoJX21ha2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsKCQl2YXIgc3ViID0gdGFyZ2V0Ll9jYW47IGlmIChzdWIgJiYgc3ViLl9jYnMpIHsgcmV0dXJuIH0KCQljYihmdW5jdGlvbihzdWIsIGNicykgeyBzdWIuX2NicyA9IGNicwoJCQlpZiAobWV0YS5tc2cgJiYgbWV0YS5tc2cuTGVuZ3RoKCkgPiAwKSB7CgkJCQljYW4ub25maWd1cmUua2V5Ll9zaG93KHN1YiwgbWV0YS5tc2csIGNicywgdGFyZ2V0LCBtZXRhLm5hbWUpCgkJCX0gZWxzZSB7CgkJCQljYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBzdWIsIGNicywgdGFyZ2V0LCBtZXRhLm5hbWUpCgkJCX0KCQl9KQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsKCQl0YXJnZXQuX2NhbiAmJiB0YXJnZXQuX2Nhbi5jbG9zZSgpCgkJY2FuLm9uZmlndXJlLmtleS5fbWFrZShldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KQoJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkKCX0sCglvbmZvY3VzOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7CgkJY2FuLm9uZmlndXJlLmtleS5fbWFrZShldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KQoJfSwKCW9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgewoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgIkVzY2FwZSI6IHRhcmdldC5fY2FuPyB0YXJnZXQuX2Nhbi5jbG9zZSgpOiB0YXJnZXQuYmx1cigpOyByZXR1cm4KCQkJY2FzZSAiVGFiIjogdGFyZ2V0Ll9jYW4gJiYgdGFyZ2V0Ll9jYW4uY2xvc2UoKTsgcmV0dXJuCgkJCWNhc2UgIm4iOgoJCQljYXNlICJwIjogZXZlbnQuY3RybEtleSAmJiBjYW4ub25rZXltYXAucHJldmVudChldmVudCk7IGJyZWFrCgkJCWRlZmF1bHQ6IGNhbi5iYXNlLmlzRnVuYyhsYXN0KSAmJiBsYXN0KGV2ZW50LCBjYW4pCgkJfQoJCWNhbi5vbmZpZ3VyZS5rZXkuX21ha2UoZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkKCX0sCglvbmtleXVwOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7IHZhciBzdWIgPSB0YXJnZXQuX2NhbjsgaWYgKCFzdWIpIHsgcmV0dXJuIH0KCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGljZS5QUzogY2FuLm9uZmlndXJlLmtleS5faW5pdChldmVudCwgc3ViLCBzdWIuX2NicywgdGFyZ2V0LCBtZXRhLm5hbWUsIGV2ZW50LnRhcmdldC52YWx1ZSk7IGJyZWFrCgkJfQoJCWNhbi5vbm1vdGlvbi5zZWxlY3RJbnB1dFRhYmxlKGV2ZW50LCBzdWIsIGZ1bmN0aW9uKCkgeyBjYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBzdWIsIHN1Yi5fY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkgfSwgdGFyZ2V0KQoJfSwKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9pbnB1dC9wcm92aW5jZS5qcyIKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBwcm92aW5jZToge29uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsgY2IoZnVuY3Rpb24oY2FuLCBjYnMpIHsKCWNhbi5yZXF1aXJlKFsiL3JlcXVpcmUvc2h5bGludXguY29tL3gvZWNoYXJ0cy9lY2hhcnRzLmpzIiwgIi9yZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiXSwgZnVuY3Rpb24oKSB7CgkJdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3R5cGU6IGh0bWwuRElWLCBzdHlsZToge3dpZHRoOiA2MDAsIGhlaWdodDogNDAwfX1dKS5maXJzdCkKCQljaGluYV9jaGFydC5zZXRPcHRpb24oe2dlbzoge21hcDogJ2NoaW5hJ319KSwgY2hpbmFfY2hhcnQub24oaHRtbC5DTElDSywgZnVuY3Rpb24gKHBhcmFtcykgewoJCQl0YXJnZXQudmFsdWUgPSBwYXJhbXMubmFtZSwgY2FuLmNsb3NlKCkKCQl9KSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIDM0KSwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKGNhbikKCX0pCn0pIH19LCB9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC9kaXYuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJdmFyIG1ldGEgPSB7fTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7IG1ldGFbdmFsdWUua2V5XSA9IHZhbHVlLnZhbHVlIH0pCgkJY2FuLl9saXN0ID0gY2FuLmJhc2UuT2JqKG1ldGEudGV4dCwge21ldGE6IHtuYW1lOiBtZXRhLm5hbWV8fGh0bWwuRElWfSwgbGlzdDogW119KQoJCWNhbi5zdXAuX2tleXMgPSBjYW4uc3VwLl9rZXlzfHxjYW4uX2xpc3QubWV0YS5uYW1lCgkJY2FuLm9uaW1wb3J0LmxheW91dChjYW4sIGNhbi5fb3V0cHV0KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCV9pdGVtOiBmdW5jdGlvbihjYW4sIGtleXMsIGl0ZW0sIHRhcmdldCwgd2lkdGgsIGhlaWdodCkgeyB3aWR0aCA9IHdpZHRofHxpdGVtLm1ldGEud2lkdGgsIGhlaWdodCA9IGhlaWdodHx8aXRlbS5tZXRhLmhlaWdodAoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5tZXRhLm5hbWV8fGh0bWwuRElWXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLkRJVl9JVEVNLCBldmVudC50YXJnZXQpLCBjYW4uY3VycmVudCA9IGV2ZW50LnRhcmdldCwgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwga2V5cywgaXRlbS5tZXRhKQoJCX0sIF9hZGQ6IGZ1bmN0aW9uKGRhdGEpIHsgaXRlbS5saXN0LnB1c2goZGF0YSksIGNhbi5vbmltcG9ydC5fbGlzdChjYW4sIGtleXMsIGl0ZW0sIHVpLmxpc3QsIHdpZHRoLCBoZWlnaHQpIH19LCB7dmlldzogaHRtbC5MSVNUfV0pCgoJCXZhciBmaWVsZCA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sIGl0ZW0ubWV0YS5pbmRleD8gY2hhdC5QTFVHSU46IGNoYXQuTEFZT1VULCBpdGVtLm1ldGEsIHRhcmdldC5fdGFyZ2V0KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkubGlzdC5fdGFyZ2V0ID0gZmllbGQub3V0cHV0LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodH0pCgkJaXRlbS5tZXRhLnN0eWxlICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aS5saXN0Ll90YXJnZXQsIGl0ZW0ubWV0YS5zdHlsZSkKCgkJaXRlbS5tZXRhLmluZGV4ICYmIGNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBjYW4uYmFzZS5Db3B5KHt9LCBpdGVtLm1ldGEpLCBmdW5jdGlvbihzdWIpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFR9KQoJCX0sIHRhcmdldC5fdGFyZ2V0LCBmaWVsZC5maWVsZHNldCkKCgkJY2FuLm9uaW1wb3J0Ll9saXN0KGNhbiwga2V5cywgaXRlbSwgdWkubGlzdCwgd2lkdGgsIGhlaWdodCkKCQljYW4uc3VwLl9rZXlzID09IGtleXMgJiYgdWkuaXRlbS5jbGljaygpCgl9LAoJX2xpc3Q6IGZ1bmN0aW9uKGNhbiwga2V5cywgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB7CgkJaWYgKGl0ZW0ubWV0YS5zdHlsZSA9PSBodG1sLlNQQU4pIHsgd2lkdGggPSB3aWR0aCAvIGl0ZW0ubGlzdC5sZW5ndGggfSBlbHNlIHsgaGVpZ2h0ID0gaGVpZ2h0IC8gaXRlbS5saXN0Lmxlbmd0aCB9CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0Ll90YXJnZXQpCgkJY2FuLmNvcmUuTGlzdChpdGVtLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLmNvcmUuS2V5cyhrZXlzLCBpdGVtLm1ldGEubmFtZSksIGl0ZW0sIHRhcmdldCwgd2lkdGgsIGhlaWdodCkgfSkKCX0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCBrZXlzLCBtZXRhKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9maWxlKQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdCh7fSk7IG1zZy5QdXNoKG1kYi5LRVksICJrZXlzIiksIG1zZy5QdXNoKG1kYi5WQUxVRSwga2V5cykKCQljYW4uY29yZS5MaXN0KGNhbi5jb3JlLlNwbGl0KCJuYW1lLGluZGV4LGFyZ3Msc3R5bGUsZGlzcGxheSxoZWlnaHQsd2lkdGgiKSwgZnVuY3Rpb24oaykgewoJCQltc2cuUHVzaChtZGIuS0VZLCBrKSwgbXNnLlB1c2gobWRiLlZBTFVFLCBtZXRhW2tdKQoJCX0pLCBjYW4uc3VwLl9rZXlzID0ga2V5cwoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJa2V5ID09IG1kYi5WQUxVRSAmJiBjYW4ub25tb3Rpb24ubW9kaWZ5KGNhbiwgZXZlbnQudGFyZ2V0LCBmdW5jdGlvbihldmVudCwgdmFsdWUsIG9sZCkgewoJCQkJCXRhcmdldC5pbm5lclRleHQgPSBtZXRhW2xpbmUua2V5XSA9IHZhbHVlLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJCX0sIHtuYW1lOiBsaW5lLmtleX0pCgkJCX19CgkJfSwgY2FuLnVpLnByb2ZpbGUpCgl9LAoJbGF5b3V0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fb3V0cHV0CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuLCB0YXJnZXQpLCBjYW4udWkucHJvamVjdC5fdGFyZ2V0ID0gY2FuLnVpLmNvbnRlbnQKCQl2YXIgd2lkdGggPSBjYW4uQ29uZldpZHRoKCktMzIwLCBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgewoJCQl3aWR0aCA9IGNhbi5fcm9vdC5fd2lkdGgsIGhlaWdodCA9IGNhbi5fcm9vdC5faGVpZ2h0LCBjYW4udXNlci50aXRsZShjYW4uX2xpc3QubWV0YS5uYW1lKQoJCX0gZWxzZSBpZiAoY2FuLmlzRnVsbE1vZGUoKSkgewoJCQl3aWR0aCA9IGNhbi5Db25mV2lkdGgoKSwgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QsIGZhbHNlKQoJCX0gZWxzZSB7CgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQl9CgkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLl9saXN0Lm1ldGEubmFtZSwgY2FuLl9saXN0LCBjYW4udWkucHJvamVjdCwgd2lkdGgsIGhlaWdodCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwKCSLmt7vliqAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FLCBjdHguSU5ERVgsIGN0eC5BUkdTLCBjdHguU1RZTEUsIGh0bWwuSEVJR0hULCBodG1sLldJRFRIXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uY3VycmVudC5fYWRkKHttZXRhOiBkYXRhLCBsaXN0OiBbXX0pCgkJfSkKCX0sCgki5L+d5a2YIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBbbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KGNhbi5fbGlzdCldKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvbG9jYXRpb24uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmxheW91dC5wcm9maWxlKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCSFjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLkNvbmZIZWlnaHQod2luZG93LmlubmVySGVpZ2h0IC0gNSpodG1sLkFDVElPTl9IRUlHSFQgLSA1Kmh0bWwuUExVR0lOX01BUkdJTikKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4uQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQtaHRtbC5BQ1RJT05fSEVJR0hUKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fb3B0aW9uKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX3N0YXR1cykKCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5wcm9qZWN0LCAyNDApLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIHRydWUpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9qZWN0LCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGljZS5BVVRPKQoKCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIGNhbi5vbmV4cG9ydC5saXN0KQoJCWNhbi5yZXF1aXJlKFtjYW4uYmFzZS5NZXJnZVVSTCgiaHR0cHM6Ly9tYXAucXEuY29tL2FwaS9nbGpzIiwgInYiLCAiMS5leHAiLCAibGlicmFyaWVzIiwgInNlcnZpY2UiLCAia2V5IiwgY2FuLkNvbmYoYWFhLlRPS0VOKSldLCBmdW5jdGlvbigpIHsKCQkJdmFyIHJlcyA9IHt0eXBlOiAidW5rbm93biIsIGxhdGl0dWRlOiAzOTk4NDEyLCBsb25naXR1ZGU6IDExNjMwNzQ4fSwgY3VycmVudCA9IGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTE9DQVRJT04pKQoJCQlpZiAoY3VycmVudC5zdGF0dXMgPT09IDApIHsgcmVzID0gY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgY3VycmVudC5yZXN1bHQubG9jYXRpb24sIGN1cnJlbnQucmVzdWx0LmFkX2luZm8pLCByZXMudHlwZSA9ICJpcCIsIHJlcy5uYW1lID0gY3VycmVudC5yZXN1bHQuaXAsIGNhbi5TdGF0dXMocmVzKSB9CgkJCWNhbi5fY3VycmVudCA9IHJlcywgY2FuLm9uaW1wb3J0Ll9sYXlvdXQoY2FuKSwgY2FuLnVzZXIuYWdlbnQuZ2V0TG9jYXRpb24oZnVuY3Rpb24ocmVzKSB7IHJlcy50eXBlID0gImN1cnJlbnQiLCBjYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgY2FuLl9jdXJyZW50ID0gcmVzKSB9KQoJCX0pCgl9LAoJX2xheW91dDogZnVuY3Rpb24oY2FuKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5jb250ZW50KSwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCksIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkpCgoJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgWwoJCQl7bmFtZTogImRpcmVjdGlvbiJ9LAoJCQl7bmFtZTogImZhdm9yIiwgX21lbnU6IHNoeSh7InBsYXkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJCWNhbi5jb3JlLk5leHQoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmZhdm9yLl90YXJnZXQsIGh0bWwuRElWX0lURU0pLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCQkJaXRlbS5jbGljaygpLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBuZXh0LCAyMDAwKQoJCQkJfSwgZnVuY3Rpb24oKSB7IGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pIH0pCgkJCX19KX0sCgkJCXtuYW1lOiAiZXhwbG9yZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCXpvbmUuX3NlYXJjaC5vbmtleXVwID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQua2V5ID09ICJFbnRlciIgJiYgY2FuLm9uaW1wb3J0Ll9zZWFyY2gwKGNhbiwgZXZlbnQudGFyZ2V0LnZhbHVlKSB9CgkJCX19LAoJCQl7bmFtZTogInNlYXJjaCIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCXpvbmUuX3NlYXJjaC5vbmtleXVwID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQua2V5ID09ICJFbnRlciIgJiYgY2FuLm9uaW1wb3J0Ll9zZWFyY2goY2FuLCBldmVudC50YXJnZXQudmFsdWUpIH0KCQkJfX0sCgkJCXtuYW1lOiAiZGlzdHJpY3QiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7CgkJCQljYW4ub25pbXBvcnQuX3Byb3ZpbmNlKGNhbiwgdGFyZ2V0KQoJCQl9fSwKCQldLCBjYW4udWkucHJvamVjdCksIGNhbi5vbmltcG9ydC5fc2hvdyhjYW4sIGNhbi5fY3VycmVudCksIGNhbi5vbmltcG9ydC5fbWFyayhjYW4pCgkJY2FuLm1hcmsgJiYgY2FuLm1hcmsuYWRkKHtwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLl9jdXJyZW50KSwgcHJvcGVydGllczogY2FuLl9jdXJyZW50fSkKCQljYW4uX21zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IGNhbi5vbmltcG9ydC5faXRlbShjYW4sIGl0ZW0pIH0pCgl9LAoJX3NlYXJjaDA6IGZ1bmN0aW9uKGNhbiwga2V5d29yZCkgeyB2YXIgcCA9IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGNhbi5jdXJyZW50Lml0ZW0pCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgeyJib3VuZGFyeSI6ICJuZWFyYnkoIitjYW4uYmFzZS5qb2luKFtwLmxhdCwgcC5sbmcsICI1MDAiXSwgaWNlLkZTKSsiKSIsICJwYWdlX2luZGV4IjogMSwgImtleXdvcmQiOiBrZXl3b3JkfSksICJzZWFyY2giLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCXZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLmNvcmUuTGlzdChyZXMuZGF0YSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgaXRlbS5sb2NhdGlvbiwge3R5cGU6IGl0ZW0uY2F0ZWdvcnksIG5hbWU6IGl0ZW0udGl0bGUsIHRleHQ6IGl0ZW0uYWRkcmVzc30pLCBjYW4udWkuZXhwbG9yZS5fdGFyZ2V0KQoJCQl9KSwgY2FuLm1pc2MuRGVidWcocmVzKQoJCX0pCgl9LAoJX3NlYXJjaDogZnVuY3Rpb24oY2FuLCBrZXl3b3JkKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ImJvdW5kYXJ5IjogInJlZ2lvbigiK2Nhbi5iYXNlLmpvaW4oW2Nhbi5TdGF0dXMoImNpdHkiKSwgcC5sYXQsIHAubG5nXSwgaWNlLkZTKSsiKSIsICJwYWdlX2luZGV4IjogMSwgImtleXdvcmQiOiBrZXl3b3JkfSksICJzZWFyY2giLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCXZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLmNvcmUuTGlzdChyZXMuZGF0YSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgaXRlbS5sb2NhdGlvbiwge3R5cGU6IGl0ZW0uY2F0ZWdvcnksIG5hbWU6IGl0ZW0udGl0bGUsIHRleHQ6IGl0ZW0uYWRkcmVzc30pLCBjYW4udWkuc2VhcmNoLl90YXJnZXQpCgkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJfSkKCX0sCgoJX2xpc3RfcmVzdWx0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IpIHsgdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QocmVzLnJlc3VsdFswXSwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLm5hbWUgPSBpdGVtLm5hbWV8fGl0ZW0uZnVsbG5hbWU7IHJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpPyBjYihpdGVtKTogaXRlbSB9KQoJfSwKCV9kaXN0cmljdDogZnVuY3Rpb24oY2FuLCBpZCwgY2IpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7aWQ6IGlkfSksICJkaXN0cmljdCIsIFtdLCBjYikKCX0sCglfcHJvdmluY2U6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJY2FuLm9uaW1wb3J0Ll9kaXN0cmljdChjYW4sICIiLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0Ll9saXN0X3Jlc3VsdChjYW4sIG1zZywgZnVuY3Rpb24ocHJvdmluY2UpIHsKCQkJCWNhbi5vbmltcG9ydC5pdGVtKGNhbiwgcHJvdmluY2UsIGZ1bmN0aW9uKGV2ZW50LCBfLCBzaG93KSB7IGlmIChzaG93ID09PSBmYWxzZSkgeyByZXR1cm4gfQoJCQkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBwcm92aW5jZS5sb2NhdGlvbiwge3R5cGU6ICJwcm92aW5jZSIsIG5hbWU6IHByb3ZpbmNlLm5hbWUsIHRleHQ6IHByb3ZpbmNlLmZ1bGxuYW1lfSkpCgkJCQkJY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCA4KSksIGNhbi5TdGF0dXMoe25hdGlvbjogIuS4reWbvSIsIHByb3ZpbmNlOiBwcm92aW5jZS5mdWxsbmFtZX0pCgoJCQkJCXNob3cgPT09IHRydWUgfHwgY2FuLm9uaW1wb3J0Ll9jaXR5KGNhbiwgcHJvdmluY2UsIGV2ZW50LnRhcmdldCkKCQkJCX0sIGZ1bmN0aW9uKCkge30sIHRhcmdldCkKCQkJfSkKCQl9KQoJfSwKCV9jaXR5OiBmdW5jdGlvbihjYW4sIHByb3ZpbmNlLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuX2Rpc3RyaWN0KGNhbiwgcHJvdmluY2UuaWQsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuaXRlbWxpc3QoY2FuLCBjYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnKSwgZnVuY3Rpb24oZXZlbnQsIGNpdHksIHNob3cpIHsgaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiB9CgkJCQljYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgY2l0eS5sb2NhdGlvbiwge3R5cGU6ICJjaXR5IiwgbmFtZTogY2l0eS5uYW1lLCB0ZXh0OiBjaXR5LmZ1bGxuYW1lfSkpCgkJCQljYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDEyKSksIGNhbi5TdGF0dXMoe25hdGlvbjogIuS4reWbvSIsIHByb3ZpbmNlOiBwcm92aW5jZS5mdWxsbmFtZSwgY2l0eTogY2l0eS5mdWxsbmFtZX0pCgoJCQkJc2hvdyA9PT0gdHJ1ZSB8fCBjYW4ub25pbXBvcnQuX2NvdW50eShjYW4sIHByb3ZpbmNlLCBjaXR5LCBldmVudC50YXJnZXQpCgkJCX0sIGZ1bmN0aW9uKCkge30sIHRhcmdldCkKCQl9KQoJfSwKCV9jb3VudHk6IGZ1bmN0aW9uKGNhbiwgcHJvdmluY2UsIGNpdHksIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5fZGlzdHJpY3QoY2FuLCBjaXR5LmlkLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0Lml0ZW1saXN0KGNhbiwgY2FuLm9uaW1wb3J0Ll9saXN0X3Jlc3VsdChjYW4sIG1zZyksIGZ1bmN0aW9uKGV2ZW50LCBjb3VudHkpIHsKCQkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjb3VudHkubG9jYXRpb24sIHt0eXBlOiAiY291bnR5IiwgbmFtZTogY2l0eS5uYW1lLCB0ZXh0OiBjb3VudHkuZnVsbG5hbWV9KSkKCQkJCWNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgMTUpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lLCBjaXR5OiBjaXR5LmZ1bGxuYW1lfSkKCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCX0pCgl9LAoKCV9zaG93OiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQljYW4ubWFwID0gbmV3IFRNYXAuTWFwKGNhbi51aS5jb250ZW50LCB7Y2VudGVyOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgem9vbTogY2FuLkFjdGlvbigiem9vbSIpLCBwaXRjaDogY2FuLkFjdGlvbigicGl0Y2giKSwgcm90YXRpb246IGNhbi5BY3Rpb24oInJvdGF0aW9uIiksIG1hcFN0eWxlSWQ6ICJzdHlsZTIifSkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3RhcmdldCwgImRpdi5jb250ZW50PmRpdiIsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCB7InotaW5kZXgiOiAzfSkgfSkKCQljYW4uY3VycmVudCA9IHsKCQkJbGFiZWw6IG5ldyBUTWFwLk11bHRpTGFiZWwoe21hcDogY2FuLm1hcCwgZ2VvbWV0cmllczogW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIGNvbnRlbnQ6IGl0ZW0ubmFtZX1dfSksCgkJCW1hcmtlcjogbmV3IFRNYXAuTXVsdGlNYXJrZXIoe21hcDogY2FuLm1hcCwgZ2VvbWV0cmllczogW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSl9XX0pLAoJCQlpbmZvOiBjYW4ub25pbXBvcnQuaW5mbyhjYW4sIGl0ZW0pLCBob3ZlcjogY2FuLm9uaW1wb3J0LmluZm8oY2FuLCBpdGVtKSwKCQkJY2lyY2xlOiBjYW4ub25pbXBvcnQuY2lyY2xlKGNhbiwgaXRlbSwgMTAwKSwgaXRlbTogaXRlbSwKCQl9CgoJCWNhbi5tYXAub24oInJvdGF0ZSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5BY3Rpb24oInJvdGF0aW9uIiwgY2FuLm1hcC5nZXRSb3RhdGlvbigpKSB9KQoJCWNhbi5tYXAub24oInBpdGNoIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigicGl0Y2giLCBjYW4ubWFwLmdldFBpdGNoKCkpIH0pCgkJY2FuLm1hcC5vbigiem9vbSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5BY3Rpb24oInpvb20iLCBjYW4ubWFwLmdldFpvb20oKSkgfSkKCQljYW4ubWFwLm9uKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXZhciBwb2ludCA9IGNhbi5vbmFjdGlvbi5fcG9pbnQoZXZlbnQsIGNhbiwge25hbWU6IGV2ZW50LnBvaT8gZXZlbnQucG9pLm5hbWU6ICIifSk7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBwb2ludCkKCQkJY2FuLkFjdGlvbigibW9kZSIpID09ICJpbnNlcnQiICYmIGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe3RhcmdldDoge2dldEJvdW5kaW5nQ2xpZW50UmVjdDogZnVuY3Rpb24oKSB7IHJldHVybiBwb2ludCB9fX0sIHBvaW50KSwgbWRiLkNSRUFURSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBwb2ludCkKCQkJfSkKCQl9KQoJfSwKCV9pdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0sIHRhcmdldCkgeyBpZiAoIWl0ZW0ubGF0aXR1ZGUgfHwgIWl0ZW0ubG9uZ2l0dWRlKSB7IHJldHVybiB9CgkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBpdGVtLCBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgaXRlbSksIGNhbi5vbmltcG9ydC5wbHVnaW4oY2FuLCBpdGVtKQoJCX0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmV4cG9ydC5ob3ZlcihjYW4sIGl0ZW0pLCBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHsKCQkJCWRpcmVjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgeyBjYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgaXRlbSksIGNhbi5vbmFjdGlvbltidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbikgfSwKCQkJCWZhdm9yOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucmVxdWVzdChldmVudCwgaXRlbSksIGNhbi5vbmFjdGlvbi5jcmVhdGUoZXZlbnQsIGNhbikgfSwKCQkJCXBsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgeyBjYW4ucmVxdWVzdChldmVudCwgaXRlbSwgaXRlbS5leHRyYSkKCQkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJCQkJY2FuLmJhc2UuQ29weShpdGVtLmV4dHJhLCBkYXRhKSwgY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgYXJncykKCQkJCQl9KQoJCQkJfSwKCQkJfSkKCQl9LCB0YXJnZXR8fGNhbi51aS5mYXZvci5fdGFyZ2V0KQoJCWNhbi5tYXJrICYmIGNhbi5tYXJrLmFkZCh7cG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCBwcm9wZXJ0aWVzOiBpdGVtfSkKCQljYW4uY2x1c3RlciAmJiBjYW4uY2x1c3Rlci5hZGQoe3Bvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKX0pCgl9LAoJX2NsdXN0ZXI6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLmNsdXN0ZXIgPSBuZXcgVE1hcC5NYXJrZXJDbHVzdGVyKHttYXA6IGNhbi5tYXAsIGdlb21ldHJpZXM6IFtdfSkKCX0sCglfbWFyazogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ubWFyayA9IG5ldyBUTWFwLk11bHRpTWFya2VyKHttYXA6IGNhbi5tYXB9KQoJCWNhbi5tYXJrLm9uKCJjbGljayIsIGZ1bmN0aW9uKGV2ZW50KSB7IGlmICghZXZlbnQuZ2VvbWV0cnkpIHsgcmV0dXJuIH0gdmFyIGl0ZW0gPSBldmVudC5nZW9tZXRyeS5wcm9wZXJ0aWVzCgkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKQoJCX0pCgkJY2FuLm1hcmsub24oImhvdmVyIiwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFldmVudC5nZW9tZXRyeSkgeyByZXR1cm4gfSB2YXIgaXRlbSA9IGV2ZW50Lmdlb21ldHJ5LnByb3BlcnRpZXMKCQkJY2FuLm9uZXhwb3J0LmhvdmVyKGNhbiwgaXRlbSkKCQl9KQoJfSwKCglfcG9seWxpbmU6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgewoJCXJldHVybiBuZXcgVE1hcC5NdWx0aVBvbHlsaW5lKHsKCQkJbWFwOiBjYW4ubWFwLAoJCQlzdHlsZXM6IHsKCQkJCSdzdHlsZV9ibHVlJzogbmV3IFRNYXAuUG9seWxpbmVTdHlsZSh7CgkJCQkJJ2NvbG9yJzogJyMzNzc3RkYnLCAvL+e6v+Whq+WFheiJsgoJCQkJCSd3aWR0aCc6IDYsIC8v5oqY57q/5a695bqmCgkJCQkJJ2JvcmRlcldpZHRoJzogNSwgLy/ovrnnur/lrr3luqYKCQkJCQknYm9yZGVyQ29sb3InOiAnI0ZGRicsIC8v6L6557q/6aKc6ImyCgkJCQkJJ2xpbmVDYXAnOiAnYnV0dCcgLy/nur/nq6/lpLTmlrnlvI8KCQkJCX0pLAoJCQkJJ3N0eWxlX3JlZCc6IG5ldyBUTWFwLlBvbHlsaW5lU3R5bGUoewoJCQkJCSdjb2xvcic6ICcjQ0MwMDAwJywgLy/nur/loavlhYXoibIKCQkJCQknd2lkdGgnOiA2LCAvL+aKmOe6v+WuveW6pgoJCQkJCSdib3JkZXJXaWR0aCc6IDUsIC8v6L6557q/5a695bqmCgkJCQkJJ2JvcmRlckNvbG9yJzogJyNDQ0MnLCAvL+i+uee6v+minOiJsgoJCQkJCSdsaW5lQ2FwJzogJ3JvdW5kJyAvL+e6v+err+WktOaWueW8jwoJCQkJfSkKCQkJfSwKCQkJZ2VvbWV0cmllczogW3snc3R5bGVJZCc6ICdzdHlsZV9ibHVlJywgJ3BhdGhzJzogcGF0aH1dCgkJfSkKCX0sCglfbW92ZTogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm1hcmsuYWRkKHtpZDogJ2NhcicsIHN0eWxlSWQ6ICdjYXItZG93bicsIHBvc2l0aW9uOiBuZXcgVE1hcC5MYXRMbmcoMzkuOTg0ODE1MDA2NDgzMzgsIDExNi4zMDU3MTEyNjkzNzg2Nil9KQoJCWNhbi5tYXJrLm1vdmVBbG9uZyh7ImNhciI6IHtwYXRoOiBbCgkJCW5ldyBUTWFwLkxhdExuZygzOS45ODQ4MTUwMDY0ODMzOCwgMTE2LjMwNTcxMTI2OTM3ODY2KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk4MjI2NjU3NTIyMjE1NSwgMTE2LjMwNTk2ODc2MTQ0NDA5KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk4MjM0ODc4NDE2NTg4NiwgMTE2LjMxMTE0MDA2MDQyNDgpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTc4ODEzNzEwMjY2MDI0LCAxMTYuMzExMTQwMDYwNDI0OCksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45Nzg4MTM3MTAyNjYwMjQsIDExNi4zMTY5OTgwMDQ5MTMzMykKCQldLCBzcGVlZDogNzB9fSwge2F1dG9Sb3RhdGlvbjp0cnVlfSkKCX0sCgoJcG9pbnQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCXJldHVybiBuZXcgVE1hcC5MYXRMbmcoaXRlbS5sYXRpdHVkZS8xMDAwMDAuMCwgaXRlbS5sb25naXR1ZGUvMTAwMDAwLjApCgl9LAoJY2VudGVyOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsgdmFyIHBvaW50ID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSkKCQljYW4ubWFwLnNldENlbnRlcihwb2ludCksIGNhbi5TdGF0dXMoIm5hbWUiLCAiIiksIGNhbi5TdGF0dXMoInRleHQiLCAiIiksIGNhbi5TdGF0dXMoaXRlbSksIGNhbi5TdGF0dXMoe2xhdGl0dWRlOiBwb2ludC5sYXQsIGxvbmdpdHVkZTogcG9pbnQubG5nfSkKCQljYW4uY3VycmVudC5pbmZvLnNldFBvc2l0aW9uKHBvaW50KSwgY2FuLmN1cnJlbnQuaW5mby5zZXRDb250ZW50KChpdGVtLm5hbWV8fCIiKSsiPGJyLz4iKyhpdGVtLnRleHR8fCIiKSkKCQljYW4uY3VycmVudC5sYWJlbC51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IHBvaW50LCBjb250ZW50OiBpdGVtLm5hbWV9XSkKCQljYW4uY3VycmVudC5tYXJrZXIudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBwb2ludH1dKQoJCWNhbi5jdXJyZW50LmNpcmNsZS5zZXRHZW9tZXRyaWVzKFt7Y2VudGVyOiBwb2ludCwgcmFkaXVzOiAzMDB9XSkKCQljYW4uY3VycmVudC5pdGVtID0gaXRlbQoJCWl0ZW0uX3BsdWdpbiAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbS5fcGx1Z2luLl90YXJnZXQpCgl9LAoJaW5mbzogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJcmV0dXJuIG5ldyBUTWFwLkluZm9XaW5kb3coe21hcDogY2FuLm1hcCwKCQkJcG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCBvZmZzZXQ6IHt4OiAwLCB5OiAtMzJ9LAoJCQljb250ZW50OiAoaXRlbS5uYW1lfHwiIikrIjxici8+IisoaXRlbS50ZXh0fHwiIiksCgkJfSkKCX0sCgljaXJjbGU6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgcmFkaXVzKSB7CgkJcmV0dXJuIG5ldyBUTWFwLk11bHRpQ2lyY2xlKHsgCgkJCW1hcDogY2FuLm1hcCwgc3R5bGVzOiB7CgkJCQljaXJjbGU6IG5ldyBUTWFwLkNpcmNsZVN0eWxlKHsKCQkJCQljb2xvcjogJ3JnYmEoNDEsOTEsMjU1LDAuMTYpJywKCQkJCQlzaG93Qm9yZGVyOiB0cnVlLAoJCQkJCWJvcmRlckNvbG9yOiAncmdiYSg0MSw5MSwyNTUsMSknLAoJCQkJCWJvcmRlcldpZHRoOiAyLAoJCQkJfSksCgkJCX0sCgkJCWdlb21ldHJpZXM6IFt7c3R5bGVJZDogJ2NpcmNsZScsIGNlbnRlcjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIHJhZGl1czogcmFkaXVzfHwzMDB9XSwKCQl9KQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXRlbS5oYXNoIH0sIGNhbi51aS5wcm9maWxlKSkgewoKCQl9IGVsc2UgeyBpdGVtLmV4dHJhID0gY2FuLmJhc2UuT2JqKGl0ZW0uZXh0cmEsIHt9KQoJCQlpdGVtLmV4dHJhLmluZGV4ICYmIGNhbi5vbmltcG9ydC5wbHVnKGNhbiwge2luZGV4OiBpdGVtLmV4dHJhLmluZGV4LCBhcmdzOiBpdGVtLmV4dHJhLmFyZ3N9LCBjYW4udWkucHJvZmlsZSwgZnVuY3Rpb24oc3ViKSB7IGl0ZW0uX3BsdWdpbiA9IHN1YgoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpKSwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKjMvNCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktMipodG1sLkFDVElPTl9IRUlHSFQpLCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkqMy80KSkKCQkJfSkKCQl9Cgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhKSB7CgkJZnVuY3Rpb24gbXlJbmZvV2luZG93KG9wdGlvbnMpIHsgVE1hcC5ET01PdmVybGF5LmNhbGwodGhpcywgb3B0aW9ucykgfQoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUgPSBuZXcgVE1hcC5ET01PdmVybGF5KCkKCQlteUluZm9XaW5kb3cucHJvdG90eXBlLm9uSW5pdCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsgdGhpcy5wb3NpdGlvbiA9IG9wdGlvbnMucG9zaXRpb24sIHRoaXMubWV0YSA9IG9wdGlvbnMubWV0YSB9CgoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUuY3JlYXRlRE9NID0gZnVuY3Rpb24oKSB7CgkJCXZhciBtZXRhID0gdGhpcy5tZXRhLCB1aSA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sIGNoYXQuRkxPQVQsIHt9LCBjYW4uX291dHB1dCkKCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIG1ldGEsIGZ1bmN0aW9uKHN1YikgewoJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSwgaWNlLlJVTiwgW21ldGEuaW5kZXhdLmNvbmNhdChjbWRzKSwgY2IpIH0KCQkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX3RhcmdldCkgfQoJCQkJLy8gY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLzIpKQoJCQkJLy8gY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLzIpKQoJCQkJaXRlbS5fcGx1Z2luID0gc3ViCgkJCX0sIGNhbi5fb3V0cHV0LCB1aS5maWVsZHNldCkKCQkJcmV0dXJuIHVpLmZpZWxkc2V0CgkJfQoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUudXBkYXRlRE9NID0gZnVuY3Rpb24oKSB7CgkJCXZhciBwaXhlbCA9IHRoaXMubWFwLnByb2plY3RUb0NvbnRhaW5lcih0aGlzLnBvc2l0aW9uKTsgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0aGlzLmRvbSwgewoJCQkJbGVmdDogcGl4ZWwuZ2V0WCgpLCB0b3A6IHBpeGVsLmdldFkoKSsyKmh0bWwuQUNUSU9OX0hFSUdIVCwKCQkJfSkKCQl9CgkJcmV0dXJuIG5ldyBteUluZm9XaW5kb3coe21hcDogY2FuLm1hcCwgcG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCBtZXRhOiBtZXRhfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogW1sibW9kZSIsICJzZWxlY3QiLCAiaW5zZXJ0Il0sCgl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiem9vbSIsIHZhbHVlOiAxNywgcmFuZ2U6IFszLCAyMV19LAoJe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogInBpdGNoIiwgdmFsdWU6IDMwLCByYW5nZTogWzAsIDgwLCA1XX0sCgl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAicm90YXRpb24iLCB2YWx1ZTogIjAiLCByYW5nZTogWzAsIDM2MCwgMTBdfSwKCSJjdXJyZW50IiwgImV4cGxvcmUiLCAiY3JlYXRlIiwgImRpcmVjdGlvbiJdLAoJX3RyYW5zOiB7Y3VycmVudDogIuWumuS9jSIsIGZhdm9yOiAi5pS26JePIn0sCgoJem9vbTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIpKSB9LAoJcGl0Y2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1hcC5zZXRQaXRjaChjYW4uQWN0aW9uKCJwaXRjaCIpKSB9LAoJcm90YXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1hcC5zZXRSb3RhdGlvbihjYW4uQWN0aW9uKCJyb3RhdGlvbiIpKSB9LAoJY3VycmVudDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgY2FuLl9jdXJyZW50KSwgY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCAxNykpLCBjYW4ubWFwLnNldFBpdGNoKGNhbi5BY3Rpb24oInBpdGNoIiwgMzApKSwgY2FuLm1hcC5zZXRSb3RhdGlvbihjYW4uQWN0aW9uKCJyb3RhdGlvbiIsIDApKSB9LAoKCWV4cGxvcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgcCA9IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGNhbi5jdXJyZW50Lml0ZW0pOyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuZXhwbG9yZS5fdGFyZ2V0KQoJCWZvciAodmFyIGkgPSAxOyBpIDwgNjsgaSsrKSB7CgkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHsiYm91bmRhcnkiOiAibmVhcmJ5KCIrY2FuLmJhc2Uuam9pbihbcC5sYXQsIHAubG5nLCAiNTAwIl0sIGljZS5GUykrIikiLCAicGFnZV9pbmRleCI6IGl9KSwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQl2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5jb3JlLkxpc3QocmVzLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJCQl9KSwgY2FuLm1pc2MuRGVidWcocmVzKQoJCQl9KQoJCX0KCX0sCglkaXJlY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgcCA9IGNhbi5tYXAuZ2V0Q2VudGVyKCk7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5kaXJlY3Rpb24uX3RhcmdldCkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbWyJ0eXBlIiwgImRyaXZpbmciLCAid2Fsa2luZyIsICJiaWN5Y2xpbmciLCAidHJhbnNpdCJdXSwgZnVuY3Rpb24obGlzdCkgewoJCQl2YXIgZnJvbSA9IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGNhbi5fY3VycmVudCksIHRvID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSkKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9LCB7dHlwZTogbGlzdFswXSwgImZyb20iOiBjYW4uYmFzZS5qb2luKFtmcm9tLmxhdCwgZnJvbS5sbmddLCBpY2UuRlMpLCAidG8iOiBjYW4uYmFzZS5qb2luKFt0by5sYXQsIHRvLmxuZ10sIGljZS5GUyl9KQoJCQljYW4ucnVuQWN0aW9uKG1zZy5fZXZlbnQsIGJ1dHRvbiwgW10sIGZ1bmN0aW9uKG1zZykgeyB2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSksIHJvdXRlID0gcmVzLnJlc3VsdC5yb3V0ZXNbMF0KCQkJCQl2YXIgY29vcnMgPSByb3V0ZS5wb2x5bGluZSwgcGwgPSBbXSwga3IgPSAxMDAwMDAwCgkJCQkJZm9yICh2YXIgaSA9IDI7IGkgPCBjb29ycy5sZW5ndGg7IGkrKykgeyBjb29yc1tpXSA9IE51bWJlcihjb29yc1tpIC0gMl0pICsgTnVtYmVyKGNvb3JzW2ldKSAvIGtyIH0KCQkJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNvb3JzLmxlbmd0aDsgaSArPSAyKSB7IHBsLnB1c2gobmV3IFRNYXAuTGF0TG5nKGNvb3JzW2ldLCBjb29yc1tpKzFdKSkgfQoJCQkJCWNhbi5vbmltcG9ydC5fcG9seWxpbmUoY2FuLCBwbCkKCgkJCQkJY2FuLmNvcmUuTGlzdChyb3V0ZS5zdGVwcywgZnVuY3Rpb24oaXRlbSkgeyB2YXIgaSA9IGl0ZW0ucG9seWxpbmVfaWR4WzBdCgkJCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIHtsYXQ6IGNvb3JzW2ldLCBsbmc6IGNvb3JzW2krMV19LCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS5pbnN0cnVjdGlvbiwgdGV4dDogaXRlbS5hY3RfZGVzY30pLCBjYW4udWkuZGlyZWN0aW9uLl90YXJnZXQpCgkJCQkJfSksIGNhbi51c2VyLnRvYXN0UHJvY2VzcyhjYW4sICJkaXN0YW5jZTogIityb3V0ZS5kaXN0YW5jZSsiIGR1cmF0aW9uOiAiK3JvdXRlLmR1cmF0aW9uKQoJCQl9KQoJCX0pCgl9LAoJY3JlYXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uY3VycmVudC5pdGVtKQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGNhbi5jb3JlLlNwbGl0KCJ0eXBlLG5hbWUsdGV4dCIpLCBmdW5jdGlvbihhcmdzKSB7IHZhciBwID0gY2FuLm9uZXhwb3J0LmNlbnRlcihjYW4pCgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5DUkVBVEUsIGFyZ3MuY29uY2F0KCJsYXRpdHVkZSIsIHAubGF0aXR1ZGUsICJsb25naXR1ZGUiLCBwLmxvbmdpdHVkZSksIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLmJhc2UuQ29weShwLCB7bmFtZTogbXNnLk9wdGlvbihtZGIuTkFNRSksIHRleHQ6IG1zZy5PcHRpb24obWRiLlRFWFQpfSkpCgkJCX0sIHRydWUpCgkJfSkKCX0sCglfcG9pbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGl0ZW0pIHsgdmFyIHJlY3QgPSBjYW4udWkuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXJldHVybiBjYW4uYmFzZS5Db3B5KHtsZWZ0OiByZWN0LmxlZnQrZXZlbnQucG9pbnQueCwgYm90dG9tOiByZWN0LnRvcCtldmVudC5wb2ludC55LCBsYXRpdHVkZTogcGFyc2VJbnQoZXZlbnQubGF0TG5nLmxhdCoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KGV2ZW50LmxhdExuZy5sbmcqMTAwMDAwKX0sIGl0ZW0sIHRydWUpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsibmF0aW9uIiwgInByb3ZpbmNlIiwgImNpdHkiLCAibGF0aXR1ZGUiLCAibG9uZ2l0dWRlIiwgICJ0eXBlIiwgIm5hbWUiLCAidGV4dCJdLAoJcG9pbnQ6IGZ1bmN0aW9uKGNhbiwgcG9pbnQsIGl0ZW0pIHsgcmV0dXJuIGNhbi5iYXNlLkNvcHkoe2xhdGl0dWRlOiBwYXJzZUludChwb2ludC5sYXQqMTAwMDAwKSwgbG9uZ2l0dWRlOiBwYXJzZUludChwb2ludC5sbmcqMTAwMDAwKX0sIGl0ZW0sIHRydWUpIH0sCgljZW50ZXI6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgY2FuLm1hcC5nZXRDZW50ZXIoKSkgfSwKCWN1cnJlbnQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBwID0gY2FuLm9uZXhwb3J0LmNlbnRlcihjYW4pOyBwLmxhdGl0dWRlIC89IDEwMDAwMCwgcC5sb25naXR1ZGUgLz0gMTAwMDAwOyBjYW4uU3RhdHVzKHApCgkJY2FuLmN1cnJlbnQubWFya2VyLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogY2FuLm1hcC5nZXRDZW50ZXIoKX1dKQoJCWNhbi5jdXJyZW50LmxhYmVsLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogY2FuLm1hcC5nZXRDZW50ZXIoKX1dKQoJCWNhbi5jdXJyZW50LmNpcmNsZS5zZXRHZW9tZXRyaWVzKFt7Y2VudGVyOiBjYW4ubWFwLmdldENlbnRlcigpLCByYWRpdXM6IDMwMH1dKQoJfSwKCWhvdmVyOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQljYW4uY3VycmVudC5ob3Zlci5zZXRQb3NpdGlvbihjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSkKCQljYW4uY3VycmVudC5ob3Zlci5zZXRDb250ZW50KGl0ZW0ubmFtZSsiPGJyLz4iK2l0ZW0udGV4dCkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jaGF0L21lZGlhLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsICBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4udWkgPSBjYW4ub25sYXlvdXQuZGlzcGxheShjYW4sIHRhcmdldCkKCQljYW4udWkuY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dHlwZTogImNhbnZhcyIsIHdpZHRoOiAzMjAsIGhlaWdodDogMjQwLCBzdHlsZToge2Rpc3BsYXk6ICJub25lIn19XSkuZmlyc3QKCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsICJ0ZCJdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnN1cC5vbmFjdGlvbi5jaGFuZ2UoZXZlbnQsIGNhbi5zdXAsIGtleSwgdmFsdWUsIGZ1bmN0aW9uKG1zZykgewoJCQkJCWNhbi5ydW4oZXZlbnQpCgkJCQl9KQoJCQl9fQoJCX0sIGNhbi51aS5jb250ZW50KQoKCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cuUmVzdWx0KCksIGNhbi51aS5kaXNwbGF5KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCgoJb3BlbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCW5hdmlnYXRvci5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB7d2lkdGg6IDMyMCwgaGVpZ2h0OiAyNDB9fSwgZnVuY3Rpb24oc3RyZWFtKSB7CgkJCXZhciB2aWRlbyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCAidmlkZW8iKQoJCQl2aWRlby5zcmNPYmplY3QgPSBzdHJlYW0sIHZpZGVvLnBsYXkoKQoJCQljYW4udWkudmlkZW8gPSB2aWRlbwoJCX0sIGZ1bmN0aW9uKGVycm9yKSB7CgkJCWNhbi5taXNjLkxvZygib3BlbiBjYW1lcmEiLCBlcnJvcikKCQl9KQoJfSwKCXNuYXBzaG90OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVpLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShjYW4udWkudmlkZW8sIDAsIDApCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dHlwZTogImltZyIsIHNyYzogY2FuLnVpLmNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3dlYnAnKX1dKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvdHJhbnMuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbikKCQljYW4uZnJvbSA9IGNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgbmZzLkRJUiwgaHRtbC5MRUZULCAiZnJvbSIsICJ0byIpCgkJY2FuLnRvID0gY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuRElSLCBodG1sLlJJR0hULCAidG8iLCAiZnJvbSIpCgkJY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuVFJBU0gsIGh0bWwuTEVGVCwgImZyb20iKQoJCWNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgbmZzLlRSQVNILCBodG1sLlJJR0hULCAidG8iKQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHBvcywgZnJvbSwgdG8pIHsKCQlyZXR1cm4gY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiBjaGF0LlNUT1JZLCBpbmRleDogaW5kZXh9LCBmdW5jdGlvbihzdWIpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwge2Zsb2F0OiBwb3MsIGNsZWFyOiBwb3N9KQoJCQlzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKS8yKQoJCQlzdWIuX2xlZ2VuZC5pbm5lckhUTUwgPSBjYW4uT3B0aW9uKGZyb20pK2ljZS5TUCtpbmRleAoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCAibWF4LXdpZHRoIiwgY2FuLkNvbmZXaWR0aCgpLzIpCgoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQlpZiAoY2FuLm9uYWN0aW9uW2NtZHNbMV1dKSB7IHJldHVybiBjYW4ub25hY3Rpb25bY21kc1sxXV0oY2FuLCBmcm9tLCB0bywgZXZlbnQsIGNtZHMsIGNiKSB9CgoJCQkJdmFyIG1zZyA9IHN1Yi5yZXF1ZXN0KGV2ZW50LCB7X3BvZDogY2FuLk9wdGlvbihmcm9tKX0pCgkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaW5kZXgsIGNtZHMsIGNiKQoJCQl9CgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoJc2VuZDogZnVuY3Rpb24oY2FuLCBmcm9tLCB0bywgZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBfZnJvbSA9IGNhbltmcm9tXSwgX3RvID0gY2FuW3RvXQoJCXZhciBwYXRoID0gY2FuLnJlcXVlc3QoZXZlbnQpLk9wdGlvbihuZnMuUEFUSCkKCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRSwKCQkJZnJvbTogY2FuLk9wdGlvbihmcm9tKSwgZnJvbV9wYXRoOiBwYXRoLAoJCQl0bzogY2FuLk9wdGlvbih0byksIHRvX3BhdGg6IF90by5PcHRpb24obmZzLlBBVEgpK3BhdGguc3BsaXQoaWNlLlBTKS5wb3AoKSwKCQl9KQoJCWNhbi5ydW4oZXZlbnQsIGNtZHMsIGZ1bmN0aW9uKCkgeyBfdG8uVXBkYXRlKCkgfSwgdHJ1ZSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jaGF0L3d4LmpzIgpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7c291cmNlOiBmdW5jdGlvbihjYW4sIG1zZykgewoJY2FuLnJlcXVpcmUoWyJodHRwczovL3Jlcy53eC5xcS5jb20vb3Blbi9qcy9qd2VpeGluLTEuNi4wLmpzIl0sIGZ1bmN0aW9uKGNhbikgewoJCXd4LmNvbmZpZyh7ZGVidWc6IG1zZy5PcHRpb24oImRlYnVnIikgPT0gaWNlLlRSVUUsCgkJCWFwcElkOiBtc2cuT3B0aW9uKCJhcHBpZCIpLCBzaWduYXR1cmU6IG1zZy5PcHRpb24oInNpZ25hdHVyZSIpLAoJCQlub25jZVN0cjogbXNnLk9wdGlvbigibm9uY2VzdHIiKSwgdGltZXN0YW1wOiBtc2cuT3B0aW9uKCJ0aW1lc3RhbXAiKSwKCgkJCWpzQXBpTGlzdDogY2FuLmNvcmUuSXRlbSh7CgkJCQlzY2FuUVJDb2RlOiBmdW5jdGlvbihjYikgeyB3eC5zY2FuUVJDb2RlKHtuZWVkUmVzdWx0OiBjYj8gMTogMCwgc2NhblR5cGU6IFsicXJDb2RlIiwiYmFyQ29kZSJdLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihyZXMucmVzdWx0U3RyLCBjYW4uYmFzZS5QYXJzZUpTT04ocmVzLnJlc3VsdFN0cikpCgkJCQl9IH0pIH0sCgkJCQlnZXRMb2NhdGlvbjogZnVuY3Rpb24oY2IpIHsgd3guZ2V0TG9jYXRpb24oe3R5cGU6ICJnY2owMiIsIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHt0eXBlOiAiZ2NqMDIiLCBuYW1lOiAi5b2T5YmN5L2N572uIiwgdGV4dDogIuW9k+WJjeS9jee9riIsIGxhdGl0dWRlOiBwYXJzZUludChyZXMubGF0aXR1ZGUqMTAwMDAwKSwgbG9uZ2l0dWRlOiBwYXJzZUludChyZXMubG9uZ2l0dWRlKjEwMDAwMCkgfSkKCQkJCX0gfSkgfSwKCQkJCW9wZW5Mb2NhdGlvbjogZnVuY3Rpb24obXNnKSB7IHd4Lm9wZW5Mb2NhdGlvbih7CgkJCQkJbGF0aXR1ZGU6IHBhcnNlSW50KG1zZy5PcHRpb24oImxhdGl0dWRlIikpLzEwMDAwMCwKCQkJCQlsb25naXR1ZGU6IHBhcnNlSW50KG1zZy5PcHRpb24oImxvbmdpdHVkZSIpKS8xMDAwMDAsCgkJCQkJbmFtZTogbXNnLk9wdGlvbihtZGIuTkFNRSksIGFkZHJlc3M6IG1zZy5PcHRpb24obWRiLlRFWFQpLAoJCQkJCXNjYWxlOiBtc2cuT3B0aW9uKCJzY2FsZSIpfHwxNCwgaW5mb1VybDogbXNnLk9wdGlvbihtZGIuTElOSyksCgkJCQl9KSB9LAoJCQkJY2hvb3NlSW1hZ2U6IGZ1bmN0aW9uKGNiLCBjb3VudCkgeyB3eC5jaG9vc2VJbWFnZSh7Y291bnQ6IGNvdW50fHw5LCBzaXplVHlwZTogWydvcmlnaW5hbCcsICdjb21wcmVzc2VkJ10sIHNvdXJjZVR5cGU6IFsnYWxidW0nLCAnY2FtZXJhJ10sIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHJlcy5sb2NhbElkcykKCQkJCX0gfSkgfSwKCQkJfSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnVzZXIuYWdlbnRba2V5XSA9IHZhbHVlLCBrZXkgfSksCgkJfSkKCQl3eC5lcnJvcihmdW5jdGlvbihlcnIpIHsgY2FuLnVzZXIudG9hc3QoZXJyLCAid3ggbG9hZCIpIH0pCgkJd3gucmVhZHkoZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZygicmVhZHkiKSB9KQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCXZhciBwYXRocyA9IGNhbi5jb3JlLlNwbGl0KGNhbi5PcHRpb24obmZzLlBBVEgpLCBpY2UuRlMpOyBjYW4uT3B0aW9uKG5mcy5QQVRILCBwYXRoc1swXSkKCQl2YXIgZmlsZXMgPSBjYW4uY29yZS5TcGxpdChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgaWNlLkZTKTsgY2FuLk9wdGlvbihuZnMuRklMRSwgZmlsZXNbMF0pCgkJY2FuLnRhYnZpZXcgPSBjYW4udGFidmlld3x8e30sIGNhbi5oaXN0b3J5ID0gY2FuLmhpc3Rvcnl8fFtdLCBjYW4udG9vbGtpdCA9IHt9LCBjYW4uZXh0ZW50aW9ucyA9IHt9CgkJY2FuLnByb2ZpbGVfc2l6ZSA9IHt9LCBjYW4uZGlzcGxheV9zaXplID0ge30KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmxheW91dC5wcm9maWxlKGNhbikKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2plY3QsIDI0MCkKCQljYW4ub25pbXBvcnQuX3Byb2plY3QoY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBjYW4udWkucHJvZmlsZSkKCQljYW4ub25pbXBvcnQuX2Rpc3BsYXkoY2FuLCBjYW4udWkuZGlzcGxheSkKCQljYW4ub25pbXBvcnQuX2lucHV0KGNhbikKCgkJY2FuLnVpLl9jb250ZW50ID0gY2FuLnVpLmNvbnRlbnQKCQljYW4udWkuX3Byb2ZpbGVfb3V0cHV0ID0gY2FuLnVpLnByb2ZpbGVfb3V0cHV0CgkJY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX3N0YXR1cykKCQljYW4ub25lbmdpbmUucGx1Z2luKGNhbiwgY2FuLm9ucGx1Z2luKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQlzd2l0Y2ggKGNhbi5Nb2RlKCkpIHsKCQkJY2FzZSAic2ltcGxlIjogY2FuLm9uaW1wb3J0Ll9zaW1wbGUoY2FuKTsgYnJlYWsKCQkJY2FzZSAiZmxvYXQiOiBicmVhawoJCQljYXNlICJjbWQiOiBjYW4ub25pbXBvcnQuX3RhYnMoY2FuKSAvLyBubyBicmVhawoJCQljYXNlICJmdWxsIjogLy8gbm8gYnJlYWsKCQkJZGVmYXVsdDogaWYgKGNhbi5Db25mSGVpZ2h0KCkgPCAzMjApIHsgY2FuLkNvbmZIZWlnaHQoMzIwKSB9CgkJCQljYW4ub25pbXBvcnQucHJvamVjdChjYW4sIHBhdGhzKSwgY2FuLnVzZXIuaXNNb2JpbGUgJiYgIWNhbi51c2VyLmlzTGFuZHNjYXBlKCkgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCQkJY2FuLm9uaW1wb3J0Ll90b29sa2l0KGNhbiwgY2FuLnVpLnRvb2xraXQpLCBjYW4ub25pbXBvcnQuX3Nlc3Npb24oY2FuLCBtc2csIGZ1bmN0aW9uKCkgewoJCQkJCWZpbGVzLmxlbmd0aCA+IDEgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5jb3JlLk5leHQoZmlsZXMuc2xpY2UoMSksIGZ1bmN0aW9uKGZpbGUsIG5leHQpIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgZmlsZSwgY2FuLk9wdGlvbihuZnMuTElORSksIG5leHQpCgkJCQkJfSwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aHNbMF0sIGZpbGVzWzBdLCAiIikgfSkgfSkKCQkJCX0pLCBjYW4ub25pbXBvcnQuX2tleWRvd24oY2FuKQoJCX0KCgkJdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoOyBjYW4uaXNDbWRNb2RlKCkgfHwgKGNhbi50YWJ2aWV3W2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gbXNnKQoJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSwgZnVuY3Rpb24oKSB7CgkJCWlmIChjYW4uaXNDbWRNb2RlKCkgJiYgaGFzaCkgeyB2YXIgYXJncyA9IGNhbi5jb3JlLlNwbGl0KGRlY29kZVVSSUNvbXBvbmVudChoYXNoKS5zbGljZSgxKSkKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBhcmdzWzBdLCBhcmdzWzFdKSB9KQoJCQl9CgkJfSkKCX0sCglfaW5wdXQ6IGZ1bmN0aW9uKGNhbikgewoJfSwKCV9wcm9qZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXRhcmdldC5fdG9nZ2xlID0gZnVuY3Rpb24oZXZlbnQsIHNob3cpIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0KCX0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtodG1sLkFDVElPTiwgaHRtbC5PVVRQVVRdKTsgY2FuLnVpLnByb2ZpbGVfb3V0cHV0ID0gdWkub3V0cHV0CgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW10sIHVpLmFjdGlvbiwga2l0LkRpY3QoCgkJCWNsaS5DTE9TRSwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJCQljbGkuQ0xFQVIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHVpLm91dHB1dCkgfSwKCQkJY2xpLlNIT1csIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikgfSwKCQkJbmZzLkxPQUQsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbltuZnMuTE9BRF0oZXZlbnQsIGNhbikgfSwKCQkJbWRiLkxJTkssIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoW25mcy5aTUwsIG5mcy5JTUxdLmluZGV4T2YoY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSkgPiAtMSkgewoJCQkJCWNhbi51c2VyLm9wZW4oY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7CgkJCQkJCXBvZDogY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCksIHdlYnNpdGU6IGNhbi5iYXNlLnRyaW1QcmVmaXgoY2FuLmJhc2UuUGF0aChjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpLCAic3JjL3dlYnNpdGUvIiksCgkJCQkJfSkpCgkJCQl9IGVsc2UgewoJCQkJCWNhbi51c2VyLm9wZW4oY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7CgkJCQkJCXBvZDogY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCksIGNtZDogY2FuLmJhc2UuUGF0aChjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJCQkJfSkpCgkJCQl9CgkJCX0sCgkJCW1kYi5QTFVHSU4sIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oZGF0YSkgeyBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIGRhdGEsIHVpLm91dHB1dCkgfSkgfSwKCQkJaHRtbC5XSURUSCwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogaHRtbC5XSURUSCwgdmFsdWU6IGNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0qMTAwL2Nhbi5Db25mV2lkdGgoKXx8NTB9XSwgZnVuY3Rpb24obGlzdCkgewoJCQkJCWNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBjYW4uQ29uZldpZHRoKCkqcGFyc2VJbnQobGlzdFswXSkvMTAwCgkJCQkJY2FuLm9uYWN0aW9uW2NsaS5TSE9XXShldmVudCwgY2FuKQoJCQkJfSkKCQkJfQoJCSkpOyB0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGFjdGlvbltzaG93PyBjbGkuU0hPVzogY2xpLkNMT1NFXShldmVudCkgfQoJfSwKCV9kaXNwbGF5OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW2h0bWwuQUNUSU9OLCBodG1sLk9VVFBVVCwgaHRtbC5TVEFUVVNdKTsgY2FuLnVpLmRpc3BsYXlfb3V0cHV0ID0gdWkub3V0cHV0LCBjYW4udWkuZGlzcGxheV9zdGF0dXMgPSB1aS5zdGF0dXMKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbXSwgdWkuYWN0aW9uLCBraXQuRGljdCgKCQkJY2xpLkNMT1NFLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgkJCWNsaS5DTEVBUiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdWkub3V0cHV0KSB9LAoJCQljbGkuRVhFQywgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKSB9LAoJCQltZGIuUExVR0lOLCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGRhdGEpIHsgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBkYXRhLCB1aS5vdXRwdXQpIH0pIH0sCgkJCWh0bWwuSEVJR0hULCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBodG1sLkhFSUdIVCwgdmFsdWU6IGNhbi5kaXNwbGF5X3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0qMTAwL2Nhbi5Db25mSGVpZ2h0KCl8fDUwfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJCQljYW4uZGlzcGxheV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gY2FuLkNvbmZIZWlnaHQoKSpwYXJzZUludChsaXN0WzBdKS8xMDAKCQkJCQljYW4ub25hY3Rpb25bY2xpLkVYRUNdKGV2ZW50LCBjYW4pCgkJCQl9KQoJCQl9CgkJKSk7IHRhcmdldC5fdG9nZ2xlID0gZnVuY3Rpb24oZXZlbnQsIHNob3cpIHsgYWN0aW9uW3Nob3c/IGNsaS5FWEVDOiBjbGkuQ0xPU0VdKGV2ZW50KSB9Cgl9LAoJX3Rvb2xraXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJY2FuLnVpLnRvb2xraXQgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCAidG9vbGtpdCIsIHt9LCBjYW4uX291dHB1dCkKCX0sCglfa2V5ZG93bjogZnVuY3Rpb24oY2FuKSB7IGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoJCWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgY2hhdC5PTktFWURPV04sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5fa2V5X2xpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sIG1kYi5QTFVHSU4sIGNhbi5fa2V5X2xpc3QsIGNhbi51aS5jb250ZW50KQoJCX0pCgl9LAoJX3Nlc3Npb246IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLm9uaW1wb3J0LnNlc3MoY2FuLCAiIiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC5zZXNzKGNhbiwgewoJCQlwbHVnOiBjYW4uY29yZS5TcGxpdChtc2cuT3B0aW9uT3JTZWFyY2goInBsdWciKSkucmV2ZXJzZSgpLAoJCQlleHRzOiBjYW4uY29yZS5TcGxpdChtc2cuT3B0aW9uT3JTZWFyY2goImV4dHMiKSkucmV2ZXJzZSgpLAoJCQl0YWJzOiBjYW4uY29yZS5TcGxpdChtc2cuT3B0aW9uT3JTZWFyY2goInRhYnMiKSksCgkJfSkgfSkKCX0sCglfc2ltcGxlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4udGFidmlld1tjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IGNhbi5fbXNnCgkJY2FuLkNvbmZIZWlnaHQoIiIpLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCBodG1sLk9VVFBVVCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJzaW1wbGUiKQoJfSwKCV90YWJzOiBmdW5jdGlvbihjYW4pIHsKCQljYW4udWkuX3RhYnMgPSBjYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3ZpZXc6ICJ0YWJzIn1dLCBjYW4udWkuY29udGVudCkKCQljYW4udWkuX3BhdGggPSBjYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3ZpZXc6ICJwYXRoIn1dLCBjYW4udWkuY29udGVudCkKCX0sCgoJbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsgaWYgKGNhbi5pc1NpbXBsZU1vZGUoKSkgeyByZXR1cm4gfQoJCWlmIChjYW4uaXNGbG9hdE1vZGUoKSkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpIH0KCgkJdmFyIHdpZHRoID0gY2FuLkNvbmZXaWR0aCgpKyhjYW4udXNlci5pc01vYmlsZSAmJiBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIuaXNMYW5kc2NhcGUoKT8gMTY6IDApLShjYW4udXNlci5pc1dpbmRvd3MgJiYgIWNhbi5pc0NtZE1vZGUoKT8gMjA6IDApCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXXx8KHdpZHRoLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoKS8yKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuY29udGVudCwgd2lkdGgtY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgtY2FuLnVpLnByb2ZpbGUub2Zmc2V0V2lkdGgpCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5kaXNwbGF5LCB3aWR0aC1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkKCgkJdmFyIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQlpZiAoY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLmlzRmxvYXRNb2RlKCkpIHsgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQgfQoKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7CgkJCWlmIChjYW4udWkuZGlzcGxheS5kaXNwbGF5ICE9IGh0bWwuTk9ORSkgewoJCQkJaWYgKGNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodCA+IGNhbi5iYXNlLk1pbihjYW4uQ29uZkhlaWdodCgpIC8gMiwgMjAwKSkgewoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXlfb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5iYXNlLk1pbihjYW4uQ29uZkhlaWdodCgpIC8gMiwgMjAwKSkKCQkJCX0KCQkJfQoJCQlpZiAoY2FuLl9zdGF0dXMuc3R5bGUuZGlzcGxheSA9PSBodG1sLk5PTkUpIHsgaGVpZ2h0ICs9IGh0bWwuQUNUSU9OX0hFSUdIVCB9CgkJCXZhciByZXN0ID0gY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0K2Nhbi51aS5fdGFicy5vZmZzZXRIZWlnaHQrY2FuLnVpLl9wYXRoLm9mZnNldEhlaWdodCs0CgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGhlaWdodCtodG1sLkFDVElPTl9IRUlHSFQtcmVzdCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGhlaWdodC1jYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2plY3QsIGhlaWdodCtodG1sLkFDVElPTl9IRUlHSFQpCgkJfSBlbHNlIHsgdmFyIHJlc3QgPSBjYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQ7IGlmIChoZWlnaHQgPCAzMjApIHsgaGVpZ2h0ID0gMzIwIH0KCQkJaWYgKCFjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCQljYW4uX21pbl9oZWlnaHQgPSBjYW4uX21pbl9oZWlnaHR8fGhlaWdodCwgaGVpZ2h0ID49IGNhbi5fbWluX2hlaWdodCAmJiAoY2FuLl9taW5faGVpZ2h0ID0gaGVpZ2h0KQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5NSU5fSEVJR0hULCBjYW4uX21pbl9oZWlnaHQpCgkJCX0KCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgY2FuLnVzZXIuaXNNb2JpbGU/IGh0bWwuSEVJR0hUOiBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC1yZXN0KQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0LWh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvamVjdCwgY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0K3Jlc3QpCgkJfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaWZyYW1lKSB7CgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGlmcmFtZSwge2hlaWdodDogY2FuLnVpLnByb2ZpbGUub2Zmc2V0SGVpZ2h0LWh0bWwuQUNUSU9OX0hFSUdIVC00LCB3aWR0aDogY2FuLnVpLnByb2ZpbGUub2Zmc2V0V2lkdGh9KQoJCX0pCgl9LAoJcHJvamVjdDogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCXtuYW1lOiAic291cmNlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyB2YXIgdG90YWwgPSAwCgkJCQlmdW5jdGlvbiBzaG93KHBhdGgsIHRhcmdldCkgeyBjYW4ucnVuKGNhbi5yZXF1ZXN0KHt9LCB7ZGlyX3Jvb3Q6IHBhdGgsIGRpcl9kZWVwOiB0cnVlfSksIFtpY2UuUFdEXSwgZnVuY3Rpb24obXNnKSB7IHZhciBsaXN0ID0gbXNnLlRhYmxlKCkKCQkJCQljYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGNhbi5PcHRpb24obmZzLkZJTEUpLmluZGV4T2YoaXRlbS5wYXRoKSA9PSAwKSB7IGl0ZW0uZXhwYW5kID0gdHJ1ZSB9IH0pCgkJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBsaXN0LCBuZnMuUEFUSCwgaWNlLlBTLCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGgsIGl0ZW0ucGF0aCkgLy8g5pi+56S65paH5Lu2CgkJCQkJfSwgdGFyZ2V0KSwgY2FuLlN0YXR1cygi5paH5Lu25pWwIiwgdG90YWwgKz0gbXNnLkxlbmd0aCgpKQoJCQkJfSwgdHJ1ZSkgfSBpZiAocGF0aC5sZW5ndGggPT0gMSkgeyByZXR1cm4gc2hvdyhwYXRoWzBdLCB0YXJnZXQpIH0KCgkJCQljYW4ub25pbXBvcnQuem9uZShjYW4sIGNhbi5jb3JlLkxpc3QocGF0aCwgZnVuY3Rpb24ocGF0aCkgeyByZXR1cm4ge25hbWU6IHBhdGgsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgc2hvdyhwYXRoLCB0YXJnZXQpIH19IH0pLCB0YXJnZXQpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdGFyZ2V0LnByZXZpb3VzU2libGluZy5pbm5lckhUTUwgPSAiIiB9KQoJCQl9fSwKCQkJe25hbWU6ICJwbHVnaW4iLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGNhbi5jb3JlLkl0ZW0oY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHtpbmRleDogY2FuLmJhc2UudHJpbVByZWZpeChrZXksICJjYW4uIil9IH0pLCBjdHguSU5ERVgsIGljZS5QVCwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uY29yZS5LZXlzKCJjYW4iLCBpdGVtLmluZGV4KSwgY3R4LklOREVYKSAvLyDmmL7npLrmj5Lku7YKCQkJCX0sIHRhcmdldCkKCQkJfX0sCgkJXSwgY2FuLnVpLnByb2plY3QpCgl9LAoJaGlzdG9yeTogZnVuY3Rpb24oY2FuLCBwdXNoKSB7CgkJY2FuLmJhc2UuRXEocHVzaCwgY2FuLmhpc3RvcnlbY2FuLmhpc3RvcnkubGVuZ3RoLTFdKSB8fCBjYW4uaGlzdG9yeS5wdXNoKHB1c2gpCgkJcmV0dXJuIGNhbi5TdGF0dXMoIui3s+i9rOaVsCIsIGNhbi5oaXN0b3J5Lmxlbmd0aCksIHB1c2gKCX0sCgl0YWJ2aWV3OiBmdW5jdGlvbihjYW4sIHBhdGgsIGZpbGUsIGxpbmUsIGNiLCBza2lwLCBza2lwMikgeyB2YXIga2V5ID0gY2FuLm9uZXhwb3J0LmtleXMoY2FuLCBmaWxlLCBwYXRoKQoJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsgbG9jYXRpb24uaGFzaCA9IGZpbGUraWNlLkZTKyhsaW5lfHwxKSB9CgkJaWYgKCFza2lwICYmIGNhbi50YWJ2aWV3W2tleV0pIHsgY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLnRpdGxlKHBhdGgrZmlsZSkKCQkJY2FuLl9tc2cgJiYgY2FuLl9tc2cuT3B0aW9uKG5mcy5MSU5FLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSksIGNhbi5fbXNnID0gY2FuLnRhYnZpZXdba2V5XQoJCQljYW4uT3B0aW9uKHtwYXRoOiBwYXRoLCBmaWxlOiBmaWxlLCBsaW5lOiBsaW5lfHxjYW4uX21zZy5PcHRpb24obmZzLkxJTkUpfHwxfSkKCQkJcmV0dXJuIGNhbi5fbXNnLk9wdGlvbihjYW4uT3B0aW9uKCkpLCBjYW4ub25zeW50YXguX2luaXQoY2FuLCBjYW4uX21zZywgY2IsIHNraXAyKQoJCX0KCgkJZnVuY3Rpb24gc2hvdyhtc2cpIHsgdmFyIHNraXAyID0gc2tpcDsgY2FuLnRhYnZpZXdba2V5XSA9IG1zZwoJCQljYW4ub25pbXBvcnQudGFicyhjYW4sIFt7bmFtZTogZmlsZS5zcGxpdChsaW5lID09IGN0eC5JTkRFWD8gaWNlLlBUOiBpY2UuUFMpLnBvcCgpLCB0ZXh0OiBmaWxlfV0sIGZ1bmN0aW9uKGV2ZW50LCBtZXRhKSB7CgkJCQljYW4uX3RhYiA9IG1zZy5fdGFiID0gZXZlbnQudGFyZ2V0LCBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGgsIGZpbGUsIG1zZy5PcHRpb24obmZzLkxJTkUpLCBjYiwgZmFsc2UsIHNraXAyKSwgY2IgPSBudWxsLCBza2lwMiA9IGZhbHNlCgkJCX0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWRlbGV0ZShjYW4udGFidmlld1trZXldKQoJCQkJZGVsZXRlKGNhbi5fY2FjaGVfZGF0YVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuX2NvbnRlbnQuX2NhY2hlW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJZGVsZXRlKGNhbi51aS5fcHJvZmlsZV9vdXRwdXQuX2NhY2hlW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJZGVsZXRlKGNhbi51aS5kaXNwbGF5X291dHB1dC5fY2FjaGVbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQltc2cuX2NvbnRlbnQgIT0gY2FuLnVpLl9jb250ZW50ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIG1zZy5fY29udGVudCkKCQkJfSwgY2FuLnVpLl90YWJzLCBmdW5jdGlvbihpdGVtKSB7fSkKCQl9CgoJCWNhbi5PcHRpb24oY2FuLm9uaW1wb3J0Lmhpc3RvcnkoY2FuLCB7cGF0aDogcGF0aCwgZmlsZTogZmlsZSwgbGluZTogbGluZX0pKQoJCWxpbmUgPT0gY3R4LklOREVYPyBzaG93KGNhbi5yZXF1ZXN0KHt9LCB7aW5kZXg6IGZpbGUsIGxpbmU6IGxpbmV9KSk6CgkJCWxpbmUgPT0gd2ViLkRSRUFNPyBzaG93KGNhbi5yZXF1ZXN0KHt9LCB7aW5kZXg6IGZpbGUsIGxpbmU6IGxpbmV9KSk6CgkJCQljYW4ucnVuKHt9LCBbcGF0aCwgZmlsZV0sIHNob3csIHRydWUpCgl9LAoJcHJvZmlsZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgd2lkdGggPSBjYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildfHwoY2FuLkNvbmZXaWR0aCgpLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoKS8yCgkJaWYgKG1zZykgewoJCQl2YXIgc3VwID0gY2FuLnRhYnZpZXdbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0KCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dCwgZmFsc2UpCgkJCWlmIChtc2cuUmVzdWx0KCkuaW5kZXhPZigiPGlmcmFtZSIpID4gLTEpIHsKCQkJCWlmIChzdXAuX3Byb2ZpbGVfb3V0cHV0ICE9IGNhbi51aS5fcHJvZmlsZV9vdXRwdXQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgc3VwLl9wcm9maWxlX291dHB1dCkgfQoJCQkJY2FuLnVpLnByb2ZpbGVfb3V0cHV0ID0gc3VwLl9wcm9maWxlX291dHB1dCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5wcm9maWxlX291dHB1dC5wYXJlbnROb2RlLCBbe3ZpZXc6ICJvdXRwdXQiLCBpbm5lcjogbXNnLlJlc3VsdCgpfV0pLm91dHB1dAoJCQl9IGVsc2UgewoJCQkJY2FuLnVpLnByb2ZpbGVfb3V0cHV0ID0gc3VwLl9wcm9maWxlX291dHB1dCA9IGNhbi51aS5fcHJvZmlsZV9vdXRwdXQKCQkJCWNhbi5vbmltcG9ydC5wcm9jZXNzKGNhbiwgbXNnLCBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0LCB3aWR0aCwgY2FuLnVpLnByb2ZpbGUub2Zmc2V0SGVpZ2h0KQoJCQl9CgkJfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIHRydWUpCgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgl9LAoJZGlzcGxheTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVpZ2h0ID0gY2FuLmRpc3BsYXlfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXXx8e3NoOiBjYW4uQ29uZkhlaWdodCgpLzJ9W2Nhbi5wYXJzZV18fGNhbi5Db25mSGVpZ2h0KCkvNAoJCWlmIChtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnByb2Nlc3MoY2FuLCBtc2csIGNhbi51aS5kaXNwbGF5X291dHB1dCwgY2FuLnVpLmRpc3BsYXkub2Zmc2V0V2lkdGgsIGhlaWdodCkKCQkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSwgY2FuLnVpLmRpc3BsYXlfc3RhdHVzKQoJCX0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHRydWUpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCX0sCglwcm9jZXNzOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pCgkJaWYgKG1zZy5PcHRpb24oaWNlLk1TR19QUk9DRVNTKSA9PSAiX2ZpZWxkIikgewoJCQltc2cuVGFibGUoZnVuY3Rpb24obWV0YSkgeyBtZXRhLmRpc3BsYXkgPSBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkKCQkJCWNhbi5vbmltcG9ydC5wbHVnKGNhbiwgbWV0YSwgdGFyZ2V0LCBmdW5jdGlvbihzdWIpIHsgd2lkdGggJiYgc3ViLkNvbmZXaWR0aCh3aWR0aCksIGhlaWdodCAmJiBzdWIuQ29uZkhlaWdodChoZWlnaHQpLCBzdWIuRm9jdXMoKSB9KQoJCQl9KQoJCX0gZWxzZSBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpICE9ICIiKSB7CgkJCWNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSksIHRhcmdldCwgZmFsc2UsIGZ1bmN0aW9uKG1zZykgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0pIH0pCgkJfSBlbHNlIHsKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBudWxsLCB0YXJnZXQpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2csIHRhcmdldCkKCQl9Cgl9LAoJdG9vbGtpdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYikgeyBtZXRhLm1zZyA9IHRydWUKCQljYW4ub25pbXBvcnQucGx1ZyhjYW4sIG1ldGEsIGNhbi51aS50b29sa2l0Lm91dHB1dCwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktNCpodG1sLkFDVElPTl9IRUlHSFQpLCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodCgpKQoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoKCQkJY2FuLl9zdGF0dXMuYXBwZW5kQ2hpbGQoc3ViLl9sZWdlbmQpLCBzdWIuX2xlZ2VuZC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3N0YXR1cywgaWNlLlBUK2h0bWwuU0VMRUNUKVswXSA9PSBldmVudC50YXJnZXQpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgZXZlbnQudGFyZ2V0LCBodG1sLlNFTEVDVCkKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKQoJCQkJCXJldHVybgoJCQkJfQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS50b29sa2l0Lm91dHB1dCwgaHRtbC5GSUVMRFNFVCwgc3ViLl90YXJnZXQpLCBzdWIuRm9jdXMoKQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fc3RhdHVzLCBodG1sLkxFR0VORCwgZXZlbnQudGFyZ2V0KQoJCQkJaWYgKG1ldGEubXNnID09IHRydWUpIHsgbWV0YS5tc2cgPSBmYWxzZSwgc3ViLlVwZGF0ZSgpIH0KCQkJfSwgc3ViLnNlbGVjdCA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gc3ViLl9sZWdlbmQuY2xpY2soKSwgc3ViIH0KCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oKSB7IHN1Yi5zZWxlY3QoKSB9CgkJCXN1Yi5fbGVnZW5kLm9ubW91c2VlbnRlciA9IG51bGwKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSkKCX0sCglleHRzOiBmdW5jdGlvbihjYW4sIHVybCwgY2IpIHsKCQljYW4ucmVxdWlyZShbdXJsXSwgZnVuY3Rpb24oKSB7fSwgZnVuY3Rpb24oY2FuLCBuYW1lLCBzdWIpIHsgc3ViLl9pbml0KGNhbiwgY2FuLmJhc2UuUGFyc2VVUkwoc3ViLl9wYXRoKSwgZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5leHRlbnRpb25zW3VybC5zcGxpdCgiPyIpWzBdXSA9IHN1YiwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSkgfSkKCX0sCglzZXNzOiBmdW5jdGlvbihjYW4sIHNlc3MsIGNiKSB7IHNlc3MgPSBzZXNzfHxjYW4udXNlci5sb2NhbFN0b3JhZ2UoY2FuLCAid2ViLmNvZGUuaW5uZXIuc2VzcyIpCgkJY2FuLmNvcmUuTmV4dChzZXNzLnBsdWcsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6IGl0ZW19LCBmdW5jdGlvbihzdWIpIHsgY2FuLnRvb2xraXRbaXRlbV0gPSBzdWIsIG5leHQoKSB9KSB9LCBmdW5jdGlvbigpIHsKCQkJY2FuLmNvcmUuTmV4dChzZXNzLmV4dHMsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgY2FuLm9uaW1wb3J0LmV4dHMoY2FuLCBpdGVtLCBuZXh0KSB9LCBmdW5jdGlvbigpIHsKCQkJCXZhciBwYXRoID0gY2FuLk9wdGlvbihuZnMuUEFUSCksIGZpbGUgPSBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgbGluZSA9IGNhbi5PcHRpb24obmZzLkxJTkUpCgkJCQljYW4uYmFzZS5nZXRWYWxpZChzZXNzLnRhYnMpPyBjYW4uY29yZS5OZXh0KHNlc3MudGFicywgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyB2YXIgbHMgPSBpdGVtLnNwbGl0KGljZS5ERik7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbHNbMF0sIGxzWzFdLCBsc1syXSwgbmV4dCkgfSwKCQkJCQlmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBmaWxlLCBsaW5lLCBjYikgfSk6IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJCQl9KQoJCX0pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OUExVR0lOLCB7aGVscDogIuazqOWGjOaPkuS7tiIsIAoJImNhbi5jb2RlLmlubmVyLmtleW1hcCI6IHNoeSgi5oyJ6ZSuIiwge30sIFsibW9kZSIsICJrZXkiLCBpY2UuTElTVCwgaWNlLkJBQ0tdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm9ua2V5bWFwLl9tb2RlLCBmdW5jdGlvbihtb2RlLCB2YWx1ZSkgewoJCQkoIWNtZHNbMF0gfHwgY21kc1swXSA9PSBtb2RlKSAmJiBjYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGZ1bmMpIHsKCQkJCWlmIChjbWRzWzBdID09IG1vZGUgJiYgY21kc1sxXSA9PSBrZXkpIHsKCQkJCQltc2cuUHVzaCgia2V5IiwgIm1vZGUiKQoJCQkJCW1zZy5QdXNoKCJ2YWx1ZSIsIG1vZGUpCgkJCQkJbXNnLlB1c2goImtleSIsICJrZXkiKQoJCQkJCW1zZy5QdXNoKCJ2YWx1ZSIsIGtleSkKCQkJCQltc2cuUHVzaCgia2V5IiwgImhlbHAiKQoJCQkJCW1zZy5QdXNoKCJ2YWx1ZSIsIGZ1bmMuaGVscCkKCQkJCQltc2cuUHVzaCgia2V5IiwgImZ1bmMiKQoJCQkJCW1zZy5QdXNoKCJ2YWx1ZSIsIGZ1bmMudG9TdHJpbmcoKSkKCQkJCX0gZWxzZSBpZiAoIWNtZHNbMF0gfHwgIWNtZHNbMV0pIHsKCQkJCQltc2cuUHVzaChraXQuRGljdCgibW9kZSIsIG1vZGUsICJrZXkiLCBrZXksICJoZWxwIiwgZnVuYy5oZWxwfHxmdW5jLnRvU3RyaW5nKCkpKQoJCQkJfQoJCQl9KQoJCX0pLCBtc2cuU3RhdHVzVGltZUNvdW50KCkKCX0pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OU1lOVEFYLCB7aGVscDogIuivreazlemrmOS6riIsIGxpc3Q6IFsia2V5d29yZCIsICJwcmVmaXgiLCAibGluZSJdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBza2lwKSB7CgkJaWYgKGNhbi51aS5fcGF0aCkgewoJCQljYW4udWkuX3BhdGguaW5uZXJIVE1MID0gbXNnLk9wdGlvbihjdHguSU5ERVgpPyBtc2cuT3B0aW9uKG5mcy5MSU5FKSA9PSB3ZWIuRFJFQU0/CgkJCQkvKiBkcmVhbSAqLyBjYW4ucGFnZS5Gb3JtYXQoaHRtbC5BLCBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IG1zZy5PcHRpb24obmZzLkZJTEUpLCB0b3BpYzogY2FuLm1pc2MuU2VhcmNoKGNhbiwgInRvcGljIil9LCB0cnVlKSk6CgkJCQkvKiBpbmRleCAqLyBtc2cuT3B0aW9uKG5mcy5GSUxFKTogLyogZmlsZSAqLyBjYW4uYmFzZS5QYXRoKG1zZy5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSkKCQl9CgkJY2FuLnVpLmN1cnJlbnQgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5jdXJyZW50LCAhbXNnLk9wdGlvbihjdHguSU5ERVgpKQoKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oY2FjaGVfZGF0YSkgewoJCQljYW4uZmlsZSAmJiAoY2FjaGVfZGF0YVtjYW4uZmlsZV0gPSB7Y3VycmVudDogY2FuLmN1cnJlbnQsIG1heDogY2FuLm1heCwKCQkJCXByb2ZpbGVfZGlzcGxheTogY2FuLnVpLnByb2ZpbGUuc3R5bGUuZGlzcGxheSwgZGlzcGxheV9kaXNwbGF5OiBjYW4udWkuZGlzcGxheS5zdHlsZS5kaXNwbGF5LAoJCQl9KQoJCQljYW4uZmlsZSA9IGNhbi5iYXNlLlBhdGgobXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpKQoJCQljYW4ucGFyc2UgPSBjYW4uYmFzZS5FeHQoY2FuLmZpbGUpLCBjYW4uU3RhdHVzKCLmqKHlvI8iLCAicGx1Z2luIikKCgkJCXZhciBwID0gY2FjaGVfZGF0YVtjYW4uZmlsZV07IHAgJiYgKGNhbi5jdXJyZW50ID0gcC5jdXJyZW50LCBjYW4ubWF4ID0gcC5tYXgpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIHtkaXNwbGF5OiBwPyBwLnByb2ZpbGVfZGlzcGxheTogaHRtbC5OT05FfSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheSwge2Rpc3BsYXk6IHA/IHAuZGlzcGxheV9kaXNwbGF5OiBodG1sLk5PTkV9KQoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLl90YWJzLCBodG1sLkRJVl9UQUJTLCBtc2cuX3RhYikKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fYWN0aW9uLCBodG1sLkRJVl9UQUJTLCBtc2cuX3RhYikKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQkJbXNnLk9wdGlvbihjdHguSU5ERVgpICYmIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLk9QVElPTl9BUkdTKVswXSkKCQkJfSkKCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5fY29udGVudC5wYXJlbnROb2RlLCBjYW4ucGFnZS5LZXlzKCJkaXYuY29udGVudCIsIGh0bWwuSUZSQU1FKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaWYgKGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBpdGVtID09IG1zZy5fY29udGVudCkpIHsgY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgfQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0LnBhcmVudE5vZGUsIGNhbi5wYWdlLktleXMoImRpdi5vdXRwdXQiKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaWYgKGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBpdGVtID09IG1zZy5fcHJvZmlsZV9vdXRwdXQpKSB7IG1zZy5fcHJvZmlsZV9vdXRwdXQgfQoJCQl9KQoJCQlyZXR1cm4gY2FuLmZpbGUKCQl9LCBjYW4udWkuX2NvbnRlbnQsIGNhbi51aS5fcHJvZmlsZV9vdXRwdXQsIGNhbi51aS5kaXNwbGF5X291dHB1dCkgJiYgIXNraXApIHsKCQkJcmV0dXJuIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKG51bGwsIGNhbiwgbXNnLk9wdGlvbihuZnMuTElORSkpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQl9CgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5jb250ZW50KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJaWYgKG1zZy5PcHRpb24oY3R4LklOREVYKSkgewoJCQlpZiAobXNnLk9wdGlvbihuZnMuTElORSkgPT0gd2ViLkRSRUFNKSB7CgkJCQlpZiAobXNnLl9jb250ZW50KSB7IHJldHVybiB9CgkJCQljYW4udWkuY29udGVudCA9IG1zZy5fY29udGVudCA9IGNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIFt7dHlwZTogaHRtbC5JRlJBTUUsIHNyYzogY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgdG9waWM6IGNhbi5taXNjLlNlYXJjaChjYW4sICJ0b3BpYyIpfSwgdHJ1ZSksIHdpZHRoOiBjYW4udWkuY29udGVudC5vZmZzZXRXaWR0aCwgaGVpZ2h0OiBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHR9XSwgY2FuLnVpLmNvbnRlbnQpCgkJCQlyZXR1cm4gY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJCX0KCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuY29udGVudCA9IG1zZy5fY29udGVudCA9IGNhbi51aS5fY29udGVudCwgdHJ1ZSkKCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5wbHVnKGNhbiwge2luZGV4OiBtc2cuT3B0aW9uKGN0eC5JTkRFWCl9LCBjYW4udWkuY29udGVudCwgZnVuY3Rpb24oc3ViKSB7CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4udWkuY29udGVudC5vZmZzZXRXaWR0aCkpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgc3ViLkZvY3VzKCkgfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoKCQkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uYmFjayh7fSwgY2FuKSwgbXNnLl90YWIuX2Nsb3NlKCkgfQoJCQkJc3ViLm9uaW1wb3J0Ll9vcGVuID0gZnVuY3Rpb24oc3ViLCBtc2csIF9hcmcpIHsgdmFyIHVybCA9IGNhbi5iYXNlLlBhcnNlVVJMKF9hcmcpLCBscyA9IHVybC5vcmlnaW4uc3BsaXQoIi9jaGF0L3BvZC8iKQoJCQkJCWlmIChfYXJnLmluZGV4T2YobG9jYXRpb24ub3JpZ2luKSA9PSAwICYmIGxzLmxlbmd0aCA+IDEpIHsKCQkJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGxzWzFdLnNwbGl0KCIvIilbMF0sIHdlYi5EUkVBTSksIHN1Yi5VcGRhdGUoKSAvLyDmmL7npLrnqbrpl7QKCQkJCQl9CgkJCQkJcmV0dXJuIGNhbi51c2VyLm9wZW4oX2FyZyksIHN1Yi5VcGRhdGUoKQoJCQkJfQoJCQl9KQoJCX0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4udWkuX2NvbnRlbnQsIHRydWUpCgoJCWZ1bmN0aW9uIGluaXQocCkgewoJCQljYW4ubWF4ID0gMCwgY2FuLmNvcmUuTGlzdChjYW4ubHMgPSBtc2cuUmVzdWx0KCkuc3BsaXQoaWNlLk5MKSwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25hY3Rpb24uYXBwZW5kTGluZShjYW4sIGl0ZW0pIH0pCgkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKG51bGwsIGNhbiwgbXNnLk9wdGlvbihuZnMuTElORSkpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCgkJCW1zZy5PcHRpb24obmZzLkZJTEUpLmluZGV4T2YoIndlYnNpdGUvIikgPT0gMCAmJiBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKHt9LCBjYW4pCgkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgY2FuLl9maWVsZHMsIGNoYXQuUExVR0lOKSkgewoJCQkJcCAmJiBwLnJlbmRlciAmJiBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKHt9LCBjYW4pCgkJCQlwICYmIHAuZW5naW5lICYmIGNhbi5vbmFjdGlvbltjbGkuRVhFQ10oe30sIGNhbikKCQkJfQoJCX0KCQljYW4uQ29uZigicGx1ZyIpICYmIChjYW4ub25zeW50YXhbY2FuLnBhcnNlXSA9IGNhbi5Db25mKCJwbHVnIikpCgkJdmFyIHAgPSBjYW4ub25zeW50YXhbY2FuLnBhcnNlXTsgIXA/IGNhbi5ydW5BY3Rpb24oe30sIG1kYi5QTFVHSU4sIFtjYW4ucGFyc2UsIG1zZy5PcHRpb24obmZzLkZJTEUpLCBtc2cuT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgewoJCQlpbml0KHAgPSBjYW4ub25zeW50YXhbY2FuLnBhcnNlXSA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpKQoJCX0pOiBpbml0KHApCgl9LAoJX3BhcnNlOiBmdW5jdGlvbihjYW4sIGxpbmUpIHsgaWYgKGxpbmUuaW5kZXhPZigiPGh0bWwiKSA9PSAwKSB7IHJldHVybiBsaW5lIH0KCQlsaW5lID0gY2FuLnBhZ2UucmVwbGFjZShjYW4sIGxpbmV8fCIiKQoKCQlmdW5jdGlvbiB3cmFwKHR5cGUsIHN0cikgeyByZXR1cm4gdHlwZT8gJzxzcGFuIGNsYXNzPSInK3R5cGUrJyI+JytzdHIrJzwvc3Bhbj4nOiBzdHIgfQoJCXZhciBwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV07IGlmICghcCkgeyByZXR1cm4gbGluZSB9IHAgPSBjYW4ub25zeW50YXhbcC5saW5rXXx8cCwgcC5zcGxpdCA9IHAuc3BsaXR8fHt9CgkJcC5rZXl3b3JkICYmIChsaW5lID0gY2FuLmNvcmUuTGlzdChjYW4uY29yZS5TcGxpdChsaW5lLCBwLnNwbGl0LnNwYWNlfHwiXHQgIiwgcC5zcGxpdC5vcGVyYXRvcnx8IntbKC4sOjshfDw+KV19Iiwge2RldGFpbDogdHJ1ZX0pLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsKCQkJaXRlbSA9IGNhbi5iYXNlLmlzT2JqZWN0KGl0ZW0pPyBpdGVtOiB7dGV4dDogaXRlbX07IHZhciB0ZXh0ID0gaXRlbS50ZXh0LCB0eXBlID0gaXRlbS5rZXl3b3JkfHxwLmtleXdvcmRbdGV4dF0KCgkJCXN3aXRjaCAoaXRlbS50eXBlKSB7IGNhc2UgaHRtbC5TUEFDRTogcmV0dXJuIHRleHQKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IHJldHVybiB3cmFwKGxhbmcuU1RSSU5HLCBpdGVtLmxlZnQrdGV4dCtpdGVtLnJpZ2h0KQoJCQkJZGVmYXVsdDogcmV0dXJuIHdyYXAodHlwZSwgdGV4dCkKCQkJfQoJCX0pLmpvaW4oIiIpKQoKCQlwLnByZWZpeCAmJiBjYW4uY29yZS5JdGVtKHAucHJlZml4LCBmdW5jdGlvbihwcmUsIHR5cGUpIHsgaWYgKGNhbi5iYXNlLmJlZ2luV2l0aChsaW5lLCBwcmUpKSB7IGxpbmUgPSB3cmFwKHR5cGUsIGxpbmUpIH0gfSkKCQlwLnN1ZmZpeCAmJiBjYW4uY29yZS5JdGVtKHAuc3VmZml4LCBmdW5jdGlvbihlbmQsIHR5cGUpIHsgaWYgKGNhbi5iYXNlLmVuZFdpdGgobGluZSwgZW5kKSkgeyBsaW5lID0gd3JhcCh0eXBlLCBsaW5lKSB9IH0pCgkJcmV0dXJuIGxpbmUKCX0sCglnbzogewoJCWtleXdvcmQ6IHsKCQkJInBhY2thZ2UiOiAia2V5d29yZCIsCgkJCSJpbXBvcnQiOiAia2V5d29yZCIsCgkJCSJ0eXBlIjogImtleXdvcmQiLAoJCQkic3RydWN0IjogImtleXdvcmQiLAoJCQkiaW50ZXJmYWNlIjogImtleXdvcmQiLAoJCQkiY29uc3QiOiAia2V5d29yZCIsCgkJCSJ2YXIiOiAia2V5d29yZCIsCgkJCSJmdW5jIjogImtleXdvcmQiLAoKCQkJImlmIjogImtleXdvcmQiLAoJCQkiZWxzZSI6ICJrZXl3b3JkIiwKCQkJImZvciI6ICJrZXl3b3JkIiwKCQkJInJhbmdlIjogImtleXdvcmQiLAoJCQkiYnJlYWsiOiAia2V5d29yZCIsCgkJCSJjb250aW51ZSI6ICJrZXl3b3JkIiwKCQkJInN3aXRjaCI6ICJrZXl3b3JkIiwKCQkJImNhc2UiOiAia2V5d29yZCIsCgkJCSJkZWZhdWx0IjogImtleXdvcmQiLAoJCQkiZmFsbHRocm91Z2giOiAia2V5d29yZCIsCgkJCSJnbyI6ICJrZXl3b3JkIiwKCQkJInNlbGVjdCI6ICJrZXl3b3JkIiwKCQkJImRlZmVyIjogImtleXdvcmQiLAoJCQkicmV0dXJuIjogImtleXdvcmQiLAoKCQkJImZhbHNlIjogImNvbnN0YW50IiwKCQkJInRydWUiOiAiY29uc3RhbnQiLAoJCQkibmlsIjogImNvbnN0YW50IiwKCQkJImlvdGEiOiAiY29uc3RhbnQiLAoJCQkiLTEiOiAiY29uc3RhbnQiLAoJCQkiMCI6ICJjb25zdGFudCIsCgkJCSIxIjogImNvbnN0YW50IiwKCQkJIjIiOiAiY29uc3RhbnQiLAoJCQkiMyI6ICJjb25zdGFudCIsCgoJCQkiaW50IjogImRhdGF0eXBlIiwgImludDgiOiAiZGF0YXR5cGUiLCAiaW50MTYiOiAiZGF0YXR5cGUiLCAiaW50MzIiOiAiZGF0YXR5cGUiLCAiaW50NjQiOiAiZGF0YXR5cGUiLAoJCQkidWludCI6ICJkYXRhdHlwZSIsICJ1aW50OCI6ICJkYXRhdHlwZSIsICJ1aW50MTYiOiAiZGF0YXR5cGUiLCAidWludDMyIjogImRhdGF0eXBlIiwgInVpbnQ2NCI6ICJkYXRhdHlwZSIsCgkJCSJmbG9hdDMyIjogImRhdGF0eXBlIiwgImZsb2F0NjQiOiAiZGF0YXR5cGUiLCAiY29tcGxleDY0IjogImRhdGF0eXBlIiwgImNvbXBsZXgxMjgiOiAiZGF0YXR5cGUiLAoJCQkicnVuZSI6ICJkYXRhdHlwZSIsICJzdHJpbmciOiAiZGF0YXR5cGUiLCAiYnl0ZSI6ICJkYXRhdHlwZSIsICJ1aW50cHRyIjogImRhdGF0eXBlIiwKCQkJImJvb2wiOiAiZGF0YXR5cGUiLCAiZXJyb3IiOiAiZGF0YXR5cGUiLCAiY2hhbiI6ICJkYXRhdHlwZSIsICJtYXAiOiAiZGF0YXR5cGUiLAoKCQkJIm1zZyI6ICJmdW5jdGlvbiIsICJtIjogImZ1bmN0aW9uIiwKCQkJImluaXQiOiAiZnVuY3Rpb24iLCAibWFpbiI6ICJmdW5jdGlvbiIsICJwcmludCI6ICJmdW5jdGlvbiIsICJwcmludGxuIjogImZ1bmN0aW9uIiwgInBhbmljIjogImZ1bmN0aW9uIiwgInJlY292ZXIiOiAiZnVuY3Rpb24iLAoJCQkibmV3IjogImZ1bmN0aW9uIiwgIm1ha2UiOiAiZnVuY3Rpb24iLCAibGVuIjogImZ1bmN0aW9uIiwgImNhcCI6ICJmdW5jdGlvbiIsICJjb3B5IjogImZ1bmN0aW9uIiwgImFwcGVuZCI6ICJmdW5jdGlvbiIsICJkZWxldGUiOiAiZnVuY3Rpb24iLCAiY2xvc2UiOiAiZnVuY3Rpb24iLAoJCQkiY29tcGxleCI6ICJmdW5jdGlvbiIsICJyZWFsIjogImZ1bmN0aW9uIiwgImltYWciOiAiZnVuY3Rpb24iLAoJCX0sCgl9LAoJem1sOiB7CgkJcHJlZml4OiB7CgkJCSIjICI6ICJjb21tZW50IiwKCQl9LAoJCWtleXdvcmQ6IHsKCQkJInJldHVybiI6ICJrZXl3b3JkIiwKCgkJCSJoZWFkIjogImtleXdvcmQiLAoJCQkibGVmdCI6ICJrZXl3b3JkIiwKCQkJIm1haW4iOiAia2V5d29yZCIsCgkJCSJmb290IjogImtleXdvcmQiLAoJCQkidGFicyI6ICJrZXl3b3JkIiwKCgkJCSJpbmRleCI6ICJmdW5jdGlvbiIsCgkJCSJhY3Rpb24iOiAiZnVuY3Rpb24iLAoJCQkiYXJncyI6ICJmdW5jdGlvbiIsCgkJCSJ0eXBlIjogImZ1bmN0aW9uIiwKCQkJInN0eWxlIjogImZ1bmN0aW9uIiwKCQkJIndpZHRoIjogImZ1bmN0aW9uIiwKCgkJCSJhdXRvIjogImNvbnN0YW50IiwKCQkJInVzZXJuYW1lIjogImNvbnN0YW50IiwKCQl9LAoJfSwKCWNzczogewoJCWtleXdvcmQ6IHsKCQkJImJvZHkiOiAia2V5d29yZCIsCgkJCSJkaXYiOiAia2V5d29yZCIsCgkJCSJzcGFuIjogImtleXdvcmQiLAoJCQkiZm9ybSI6ICJrZXl3b3JkIiwKCQkJImZpZWxkc2V0IjogImtleXdvcmQiLAoJCQkibGVnZW5kIjogImtleXdvcmQiLAoJCQkic2VsZWN0IjogImtleXdvcmQiLAoJCQkidGV4dGFyZWEiOiAia2V5d29yZCIsCgkJCSJpbnB1dCI6ICJrZXl3b3JkIiwKCQkJInRhYmxlIjogImtleXdvcmQiLAoJCQkidHIiOiAia2V5d29yZCIsCgkJCSJ0aCI6ICJrZXl3b3JkIiwKCQkJInRkIjogImtleXdvcmQiLAoKCQkJImJhY2tncm91bmQtY29sb3IiOiAiZnVuY3Rpb24iLAoJCQkiZm9udC1mYW1pbHkiOiAiZnVuY3Rpb24iLAoJCQkiZm9udC13ZWlnaHQiOiAiZnVuY3Rpb24iLAoJCQkiZm9udC1zaXplIjogImZ1bmN0aW9uIiwKCQkJImNvbG9yIjogImZ1bmN0aW9uIiwKCQkJIndpZHRoIjogImZ1bmN0aW9uIiwKCQkJImhlaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJwYWRkaW5nIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlciI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4iOiAiZnVuY3Rpb24iLAoJCQkicG9zaXRpb24iOiAiZnVuY3Rpb24iLAoJCQkibGVmdCI6ICJmdW5jdGlvbiIsCgkJCSJ0b3AiOiAiZnVuY3Rpb24iLAoJCQkicmlnaHQiOiAiZnVuY3Rpb24iLAoJCQkiYm90dG9tIjogImZ1bmN0aW9uIiwKCQkJImRpc3BsYXkiOiAiZnVuY3Rpb24iLAoJCQkib3ZlcmZsb3ciOiAiZnVuY3Rpb24iLAoJCQkiZmxvYXQiOiAiZnVuY3Rpb24iLAoJCQkiY2xlYXIiOiAiZnVuY3Rpb24iLAoJCQkiY3Vyc29yIjogImZ1bmN0aW9uIiwKCgkJCSJ6LWluZGV4IjogImZ1bmN0aW9uIiwKCQkJInRhYi1zaXplIjogImZ1bmN0aW9uIiwKCQkJIndvcmQtYnJlYWsiOiAiZnVuY3Rpb24iLAoJCQkid2hpdGUtc3BhY2UiOiAiZnVuY3Rpb24iLAoJCQkidGV4dC1hbGlnbiI6ICJmdW5jdGlvbiIsCgkJCSJ2ZXJ0aWNhbC1hbGlnbiI6ICJmdW5jdGlvbiIsCgkJCSJtaW4td2lkdGgiOiAiZnVuY3Rpb24iLAoJCQkibWF4LXdpZHRoIjogImZ1bmN0aW9uIiwKCQkJInBhZGRpbmctbGVmdCI6ICJmdW5jdGlvbiIsCgkJCSJwYWRkaW5nLXRvcCI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItbGVmdCI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItdG9wIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1yaWdodCI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItYm90dG9tIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1yYWRpdXMiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXNwYWNpbmciOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luLXRvcCI6ICJmdW5jdGlvbiIsCgkJCSJtYXJnaW4tcmlnaHQiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luLWJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJib3gtc2hhZG93IjogImZ1bmN0aW9uIiwKCgkJCSIwIjogImNvbnN0YW50IiwKCQkJIjEwcHgiOiAiY29uc3RhbnQiLAoJCQkiMjBweCI6ICJjb25zdGFudCIsCgkJCSJjeWFuIjogImNvbnN0YW50IiwKCQkJImdyYXkiOiAiY29uc3RhbnQiLAoJCQkieWVsbG93IjogImNvbnN0YW50IiwKCQkJImJsYWNrIjogImNvbnN0YW50IiwKCQkJIndoaXRlIjogImNvbnN0YW50IiwKCQkJImJsdWUiOiAiY29uc3RhbnQiLAoJCQkicmVkIjogImNvbnN0YW50IiwKCQkJImdyZWVuIjogImNvbnN0YW50IiwKCQkJIm1hZ2VudGEiOiAiY29uc3RhbnQiLAoKCQkJIm1vbm9zcGFjZSI6ICJjb25zdGFudCIsCgkJCSJib2xkIjogImNvbnN0YW50IiwKCQkJInNvbGlkIjogImNvbnN0YW50IiwKCQkJIm5vbmUiOiAiY29uc3RhbnQiLAoJCQkiYmxvY2siOiAiY29uc3RhbnQiLAoJCQkiY29udGV4dHMiOiAiY29uc3RhbnQiLAoJCQkiYm90aCI6ICJjb25zdGFudCIsCgkJCSJhdXRvIjogImNvbnN0YW50IiwKCgkJCSJjZW50ZXIiOiAiY29uc3RhbnQiLAoJCQkicmVsYXRpdmUiOiAiY29uc3RhbnQiLAoJCQkiYWJzb2x1dGUiOiAiY29uc3RhbnQiLAoJCQkic3RpY2t5IjogImNvbnN0YW50IiwKCQkJImZpeGVkIjogImNvbnN0YW50IiwKCQl9LAoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLAoJX21vZGU6IHsKCQlwbHVnaW46IHsKCQkJRXNjYXBlOiBzaHkoIuWIh+aNouaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNsZWFyKGV2ZW50LCBjYW4pIH0pLAoJCQlnOiBzaHkoIuaQnOe0oiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmkJzntKIiXShldmVudCwgY2FuKSB9KSwKCQkJZjogc2h5KCLmiZPlvIDmlofku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5omT5byAIl0oZXZlbnQsIGNhbikgfSksCgkJCXI6IHNoeSgi5omn6KGM5ZG95LukIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bY2xpLkVYRUNdKGV2ZW50LCBjYW4pIH0pLAoJCQl2OiBzaHkoIua4suafk+eVjOmdoiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXShldmVudCwgY2FuKSB9KSwKCQkJeDogc2h5KCLlhbPpl63moIfnrb4iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5fdGFiLl9jbG9zZSgpIH0pLAoKCQkJaDogc2h5KCLmiZPlvIDlt6bovrnmoIfnrb4iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBuZXh0ID0gY2FuLl90YWIucHJldmlvdXNTaWJsaW5nOyBuZXh0ICYmIG5leHQuY2xpY2soKSB9KSwKCQkJbDogc2h5KCLmiZPlvIDlj7PovrnmoIfnrb4iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBuZXh0ID0gY2FuLl90YWIubmV4dFNpYmxpbmc7IG5leHQgJiYgbmV4dC5jbGljaygpIH0pLAoJCQlqOiBzaHkoIuWQkeS4i+a7muWKqCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCWlmIChjYW4udWkuY29udGVudCAhPSBjYW4udWkuX2NvbnRlbnQpIHsKCQkJCQljYW4udWkuY29udGVudC5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wICs9IDE2CgkJCQl9IGVsc2UgewoJCQkJCWNhbi5jdXJyZW50LnNjcm9sbCgxKQoJCQkJfQoJCQl9KSwKCQkJazogc2h5KCLlkJHkuIrmu5rliqgiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQlpZiAoY2FuLnVpLmNvbnRlbnQgIT0gY2FuLnVpLl9jb250ZW50KSB7CgkJCQkJY2FuLnVpLmNvbnRlbnQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCAtPSAxNgoJCQkJfSBlbHNlIHsKCQkJCQljYW4uY3VycmVudC5zY3JvbGwoLTEpCgkJCQl9CgkJCX0pLAoJCQlKOiBzaHkoIuWQkeS4i+a7muWxjyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LndpbmRvdygpLTMpIH0pLAoJCQlLOiBzaHkoIuWQkeS4iua7muWxjyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKC1jYW4uY3VycmVudC53aW5kb3coKSszKSB9KSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwgbGlzdDogWyLmkJzntKIiLCAi5omT5byAIl0sCglfdHJhbnM6IHtzb3VyY2U6ICLmupDnoIEiLCBtb2R1bGU6ICLmqKHlnZciLCBkcmVhbXM6ICLnqbrpl7QiLCBsb2FkOiAi5Yqg6L29IiwgbGluazogIumTvuaOpSIsIHdpZHRoOiAi5a695bqmIiwgaGVpZ2h0OiAi6auY5bqmIiwgd2Vic2l0ZTogIue9kemhtSJ9LAoJIuaQnOe0oiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUUsIFtjdHguQUNUSU9OLCBuZnMuVEFHUywgbmZzLkdSRVAsIGNsaS5NQUtFXV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLnVpLnNlYXJjaC5VcGRhdGUoe30sIFtjdHguQUNUSU9OLCBkYXRhLmFjdGlvbiwgZGF0YS5uYW1lXSkKCQl9KQoJfSwKCSLmiZPlvIAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW25mcy5GSUxFXSwgZnVuY3Rpb24obGlzdCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsaXN0WzBdKSB9KQoJfSwKCXNlc3M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZXhwb3J0LnNlc3MoY2FuKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikgfSwKCWxvYWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgZmlsZSA9IGNhbi5iYXNlLlBhdGgoIi9yZXF1aXJlLyIsIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSkKCQlkZWxldGUoVm9sY2Fub3MubWV0YS5jYWNoZVtmaWxlXSksIGV2YWwoIlxuX2Nhbl9uYW1lID0gXCIiK2ZpbGUrIlwiXG4iK2Nhbi5vbmV4cG9ydC5jb250ZW50KGNhbikrIlxuX2Nhbl9uYW1lID0gXCJcIlxuY29uc29sZS5sb2coXCJvbmNlXCIpIikKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuUkVOREVSLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnByb2ZpbGUoY2FuLCBtc2cpCgkJfSkKCX0sCglzaG93OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5riy5p+T5LitLi4uIn0pCgkJaWYgKGNhbi5iYXNlLmVuZFdpdGgoY2FuLk9wdGlvbihuZnMuRklMRSksICIuanMiKSkgewoJCQl2YXIgZmlsZSA9IGNhbi5iYXNlLlBhdGgoIi9yZXF1aXJlLyIsIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSkKCQkJZGVsZXRlKFZvbGNhbm9zLm1ldGEuY2FjaGVbZmlsZV0pLCBldmFsKCJcbl9jYW5fbmFtZSA9IFwiIitmaWxlKyJcIlxuIitjYW4ub25leHBvcnQuY29udGVudChjYW4pKyJcbl9jYW5fbmFtZSA9IFwiXCJcbmNvbnNvbGUubG9nKFwib25jZVwiKSIpCgkJfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5SRU5ERVIsIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQucHJvZmlsZShjYW4sIG1zZykKCQl9KQoJfSwKCWV4ZWM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4iLCAic29tZSI6ICJydW4ifSkKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuRU5HSU5FLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LmRpc3BsYXkoY2FuLCBtc2cpCgkJfSkKCX0sCgljbGVhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgIi5pbnB1dC5mbG9hdCIsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pIH0pLmxlbmd0aCA+IDApIHsgcmV0dXJuIH0KCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9zdGF0dXMsICJsZWdlbmQuc2VsZWN0IiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5jbGljaygpLCBpdGVtIH0pLmxlbmd0aCA+IDApIHsgcmV0dXJuIH0KCgkJaWYgKGNhbi51aS5kaXNwbGF5LnN0eWxlLmRpc3BsYXkgPT0gIiIpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkuZGlzcGxheSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9CgkJaWYgKGNhbi51aS5wcm9maWxlLnN0eWxlLmRpc3BsYXkgPT0gIiIpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvZmlsZSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgl9LAoJYmFjazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uaGlzdG9yeS5wb3AoKTsgdmFyIGxhc3QgPSBjYW4uaGlzdG9yeS5wb3AoKQoJCWxhc3QgJiYgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsYXN0LnBhdGgsIGxhc3QuZmlsZSwgbGFzdC5saW5lKQoJCWNhbi5TdGF0dXMoIui3s+i9rOaVsCIsIGNhbi5oaXN0b3J5Lmxlbmd0aCkKCX0sCgoJc2Nyb2xsTGluZTogZnVuY3Rpb24oY2FuLCBjb3VudCkgeyB2YXIgc2l6ZSA9IDIwOyBjYW4uY3VycmVudC5zY3JvbGwoY291bnQqc2l6ZSkgfSwKCWFwcGVuZExpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgW3t0eXBlOiBodG1sLlRSLCBsaXN0OiBbCgkJCXt2aWV3OiBbImxpbmUgdW5zZWxlY3RhYmxlIiwgaHRtbC5URCwgKytjYW4ubWF4XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIHVpLnRyKQoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uLmZhdm9yTGluZShjYW4sIHVpLnRleHQuaW5uZXJUZXh0KQoJCQl9fSwKCgkJCXt2aWV3OiBbaHRtbC5URVhULCBodG1sLlREXSwgaW5uZXI6IGNhbi5vbnN5bnRheC5fcGFyc2UoY2FuLCB2YWx1ZSksIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCB1aS50cikKCgkJCX0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgcyA9IGRvY3VtZW50LmdldFNlbGVjdGlvbigpLnRvU3RyaW5nKCksIHN0ciA9IHVpLnRleHQuaW5uZXJUZXh0CgkJCQl2YXIgYmVnaW4gPSBzdHIuaW5kZXhPZihzKSwgZW5kID0gYmVnaW4rcy5sZW5ndGgKCgkJCQlmb3IgKHZhciBpID0gYmVnaW47IGkgPj0gMDsgaS0tKSB7CgkJCQkJaWYgKHN0cltpXS5tYXRjaCgvW2EtekEtWjAtOV8uXS8pKSB7IHMgPSBzdHIuc2xpY2UoaSwgZW5kKSB9IGVsc2UgeyBicmVhayB9CgkJCQl9CgoJCQkJaWYgKHMuaW5kZXhPZigia2l0LiIpID09IDApIHsgcyA9IHMucmVwbGFjZSgia2l0LiIsICJ0b29sa2l0cy4iKSB9CgkJCQlpZiAocy5pbmRleE9mKGljZS5QVCkgPT0gMCkgeyBzID0gcy5zbGljZSgxKSB9CgkJCQljYW4ub25hY3Rpb24uc2VhcmNoTGluZShldmVudCwgY2FuLCBzKQoJCQl9fQoJCV19XSk7IHJldHVybiB1aS50cgoJfSwKCV9nZXRMaW5lOiBmdW5jdGlvbihjYW4sIGxpbmUpIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnJheSkgeyBpZiAoaXRlbSA9PSBsaW5lIHx8IGluZGV4KzEgPT0gbGluZSkgeyByZXR1cm4gaXRlbSB9IH0pWzBdCgl9LAoJX2dldExpbmVubzogZnVuY3Rpb24oY2FuLCBsaW5lKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpIHsgcmV0dXJuIGluZGV4KzEgfSB9KVswXQoJfSwKCXNlbGVjdExpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpbmUpIHsgaWYgKCFsaW5lKSB7IHJldHVybiBwYXJzZUludChjYW4uY29yZS5WYWx1ZShjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgW1tbaHRtbC5UUiwgaHRtbC5TRUxFQ1RdLCBbaHRtbC5URCwgImxpbmUiXV1dKVswXSwgImlubmVyVGV4dCIpKSB9CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4LCBhcnJheSkgeyBpZiAobGluZSA8IDAgfHwgbGluZSA+IGFycmF5Lmxlbmd0aCkgeyByZXR1cm4gfQoJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCwgaXRlbSA9PSBsaW5lIHx8IGluZGV4KzEgPT0gbGluZSkpIHsgcmV0dXJuIH0KCQkJdmFyIGxzID0gY2FuLmZpbGUuc3BsaXQoaWNlLlBTKQoJCQlpZiAobHMubGVuZ3RoID4gNCkgeyBscyA9IFtscy5zbGljZSgwLCAyKS5qb2luKGljZS5QUykrIi8uLi4vIitscy5zbGljZSgtMikuam9pbihpY2UuUFMpXSB9CgkJCWxpbmUgPSBpdGVtLCBjYW4uU3RhdHVzKGtpdC5EaWN0KCLmlofku7blkI0iLCBscy5qb2luKGljZS5QUyksICLop6PmnpDlmagiLCBjYW4ucGFyc2UsICLlvZPliY3ooYwiLCBjYW4ub25leHBvcnQucG9zaXRpb24oY2FuLCBjYW4uT3B0aW9uKG5mcy5MSU5FLCBpbmRleCsxKSkpKQoJCX0pCgoJCWNhbi5iYXNlLmlzT2JqZWN0KGxpbmUpICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGxpbmUsICJ0ZC50ZXh0IiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4uY3VycmVudCA9IHsKCQkJCXdpbmRvdzogZnVuY3Rpb24oKSB7IHJldHVybiBwYXJzZUludChjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQvY2FuLmN1cnJlbnQubGluZS5vZmZzZXRIZWlnaHQpIH0sCgkJCQlzY3JvbGw6IGZ1bmN0aW9uKGNvdW50KSB7IGlmIChjb3VudCkgeyBjYW4udWkuY29udGVudC5zY3JvbGxUb3AgKz0gY291bnQqY2FuLmN1cnJlbnQubGluZS5vZmZzZXRIZWlnaHQgfQoJCQkJCXJldHVybiBwYXJzZUludCgoY2FuLmN1cnJlbnQubGluZS5vZmZzZXRUb3AtY2FuLnVpLmNvbnRlbnQuc2Nyb2xsVG9wKS9jYW4uY3VycmVudC5saW5lLm9mZnNldEhlaWdodCkKCQkJCX0sCgoJCQkJcHJldjogZnVuY3Rpb24oKSB7IHJldHVybiBsaW5lLnByZXZpb3VzU2libGluZyB9LAoJCQkJbmV4dDogZnVuY3Rpb24oKSB7IHJldHVybiBsaW5lLm5leHRTaWJsaW5nIH0sCgkJCQlsaW5lOiBsaW5lLCB0ZXh0OiBmdW5jdGlvbih0ZXh0KSB7CgkJCQkJcmV0dXJuIHRleHQgIT0gdW5kZWZpbmVkICYmIGNhbi5vbmFjdGlvbi5tb2RpZnlMaW5lKGNhbiwgbGluZSwgdGV4dCksIGl0ZW0uaW5uZXJUZXh0CgkJCQl9LAoJCQl9CgoJCQlpZiAoIWV2ZW50KSB7CgkJCQl2YXIgc2Nyb2xsID0gY2FuLmN1cnJlbnQuc2Nyb2xsKCk7IGlmIChzY3JvbGwgPCA1KSB7IGNhbi5jdXJyZW50LnNjcm9sbChzY3JvbGwtNSkgfSBlbHNlIHsKCQkJCQl2YXIgd2luZG93ID0gY2FuLmN1cnJlbnQud2luZG93KCk7IGlmIChzY3JvbGwgPiB3aW5kb3cvMikgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLXdpbmRvdy8yKSB9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQl2YXIgc2Nyb2xsID0gY2FuLmN1cnJlbnQuc2Nyb2xsKCk7IGlmIChzY3JvbGwgPCAzKSB7IGNhbi5jdXJyZW50LnNjcm9sbChzY3JvbGwtMykgfSBlbHNlIHsKCQkJCQl2YXIgd2luZG93ID0gY2FuLmN1cnJlbnQud2luZG93KCk7IGlmIChzY3JvbGwgPiB3aW5kb3ctNCkgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLXdpbmRvdys0KSB9CgkJCQl9CgkJCX0KCgkJCXZhciBwdXNoID0gY2FuLm9uaW1wb3J0Lmhpc3RvcnkoY2FuLCB7cGF0aDogY2FuLk9wdGlvbihuZnMuUEFUSCksIGZpbGU6IGNhbi5PcHRpb24obmZzLkZJTEUpLCBsaW5lOiBjYW4uT3B0aW9uKG5mcy5MSU5FKSwgdGV4dDogY2FuLmN1cnJlbnQudGV4dCgpfSkKCQkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgeyBsb2NhdGlvbi5oYXNoID0gcHVzaC5maWxlK2ljZS5GUysocHVzaC5saW5lfHwxKSB9CgkJCWNhbi5vbmFjdGlvbi5fc2VsZWN0TGluZShldmVudCwgY2FuKQoJCX0pCgl9LAoJX3NlbGVjdExpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgfSwKCXNlYXJjaExpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHZhbHVlKSB7IGlmICghY2FuLnVpLnNlYXJjaCkgeyByZXR1cm4gfQoJCWNhbi51aS5zZWFyY2guVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgbmZzLlRBR1MsIHZhbHVlLnRyaW0oKV0pCgl9LAoJZmF2b3JMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyLmlofku7bmlbAiLCAi6Kej5p6Q5ZmoIiwgIuaWh+S7tuWQjSIsICLlvZPliY3ooYwiLCAi6Lez6L2s5pWwIiwgIuagh+etvuaVsCJdLAoJc2VzczogZnVuY3Rpb24oY2FuKSB7IGNhbi51c2VyLmxvY2FsU3RvcmFnZShjYW4sICJ3ZWIuY29kZS5pbm5lci5zZXNzIiwgeyJwbHVnIjogY2FuLm9uZXhwb3J0LnBsdWcoY2FuKSwgImV4dHMiOiBjYW4ub25leHBvcnQuZXh0cyhjYW4pLCAidGFicyI6IGNhbi5vbmV4cG9ydC50YWJzKGNhbil9KSB9LAoJa2V5czogZnVuY3Rpb24oY2FuLCBmaWxlLCBwYXRoKSB7IHJldHVybiAocGF0aHx8Y2FuLk9wdGlvbihuZnMuUEFUSCkpK2ljZS5ERisoZmlsZXx8Y2FuLk9wdGlvbihuZnMuRklMRSkpIH0sCgl0YWJzOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5jb3JlLkl0ZW0oY2FuLnRhYnZpZXcsIGZ1bmN0aW9uKGtleSwgbXNnKSB7IHJldHVybiBrZXkraWNlLkRGK21zZy5PcHRpb24obmZzLkxJTkUpIH0pIH0sCglwbHVnOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5jb3JlLkl0ZW0oY2FuLnRvb2xraXQpIH0sCglleHRzOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5jb3JlLkl0ZW0oY2FuLnBsdWdpbnMpIH0sCglwb3NpdGlvbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgdG90YWwpIHsgdG90YWwgPSB0b3RhbHx8Y2FuLm1heDsgcmV0dXJuIChwYXJzZUludChpbmRleCkpK2ljZS5QUytwYXJzZUludCh0b3RhbCkrIiA9ICIrcGFyc2VJbnQoKGluZGV4KSoxMDAvdG90YWwpKyIlIiB9LAoJY29udGVudDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgInRkLnRleHQiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLmlubmVyVGV4dCB9KS5qb2luKGljZS5OTCkgfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvZmF2b3IuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiAid2ViLmNvZGUuZmF2b3IifSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCWlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJCWNvZGUuSU5ORVIsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIG1zZy5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgbXNnLk9wdGlvbihuZnMuTElORSkpCgkJCQl9LAoJCQkpKSkgeyByZXR1cm4gfQoKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5GQVZPUiwgY21kcywgZnVuY3Rpb24obXNnKSB7CgkJCQlzdWIub25tb3Rpb24uY2xlYXIoc3ViKSwgc3ViLm9uYXBwZW5kLnRhYmxlKHN1YiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCQkJCWlmIChtc2cuYXBwZW5kLmxlbmd0aCA9PSAyICYmIG1zZy5hcHBlbmRbMF0gPT0gbWRiLktFWSAmJiBtc2cuYXBwZW5kWzFdID09IG1kYi5WQUxVRSkgewoJCQkJCQlpZiAoa2V5ID09IG1kYi5WQUxVRSkgeyBrZXkgPSBsaW5lLmtleSB9CgkJCQkJfQoJCQkJCWlmIChrZXkgIT0gY3R4LkFDVElPTikgeyB2YWx1ZSA9IHN1Yi5wYWdlLnJlcGxhY2Uoc3ViLCB2YWx1ZSwgaWNlLlBXRCwgIiIpIH0KCgkJCQkJcmV0dXJuIHt0ZXh0OiBbIiIsIGh0bWwuVERdLCBsaXN0OiBbe3RleHQ6IFt2YWx1ZSwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQkJCQkJaWYgKFttZGIuWk9ORSwgbWRiLklEXS5pbmRleE9mKGtleSkgPiAtMSkgeyByZXR1cm4gc3ViLm9uYWN0aW9uLmNoYW5nZShldmVudCwgc3ViLCBrZXksIHZhbHVlKSB9CgoJCQkJCQlpZiAodGFyZ2V0LnRhZ05hbWUgPT0gIklOUFVUIiAmJiB0YXJnZXQudHlwZSA9PSBodG1sLkJVVFRPTikgeyB2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIGxpbmUsIHN1Yi5PcHRpb24oKSkKCQkJCQkJCXJldHVybiBzdWIucnVuQWN0aW9uKGV2ZW50LCB0YXJnZXQubmFtZSwgW10sIGZ1bmN0aW9uKG1zZykgeyBzdWIucnVuKCkgfSkKCQkJCQkJfQoKCQkJCQkJbGluZS5saW5lICYmIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbGluZS5wYXRoLCBsaW5lLmZpbGUucmVwbGFjZShpY2UuUFdELCAiIiksIHBhcnNlSW50KGxpbmUubGluZSkpCgkJCQkJfX0KCQkJCX0sIHN1Yi5fb3V0cHV0KSwgc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSksIGNhbi5TdGF0dXMoIuagh+etvuaVsCIsIG1zZy5MZW5ndGgoKSkKCQkJfSkKCQl9LCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCX0pCn19KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9zZWFyY2guanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsgdmFyIGhpc3RvcnkgPSBbXTsgY29uc3QgU0VBUkNIID0gImNhbi5jb2RlLmlubmVyLnNlYXJjaCIKCWZ1bmN0aW9uIHNob3cobXNnLCB3b3JkKSB7IGlmICghbXNnKSB7IHJldHVybiB9IGhpc3RvcnkucHVzaChtc2cpOyB2YXIgc3ViID0gbXNnLl9jYW47IHN1Yi5PcHRpb24oIndvcmQiLCB3b3JkfHxtc2cuX3dvcmQpCgkJIXN1Yi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX2xlZ2VuZCwgInNlbGVjdCIpICYmIGNhbi51aS5zZWFyY2guc2VsZWN0KCkKCQlzdWIub25tb3Rpb24uY2xlYXIoc3ViKSwgc3ViLm9uYXBwZW5kLnRhYmxlKHN1YiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW2Nhbi5wYWdlLnJlcGxhY2UoY2FuLCB2YWx1ZSwgaWNlLlBXRCwgIiIpLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWxpbmUubGluZSAmJiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsaW5lLmZpbGUucmVwbGFjZShpY2UuUFdELCAiIiksIHBhcnNlSW50KGxpbmUubGluZSkpCgkJCX19CgkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuYm9hcmQoc3ViLCBtc2cuUmVzdWx0KCkpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJfQoJY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIFNFQVJDSCwgc2h5KCLmkJzntKIiLCB7fSwgWwoJCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ3b3JkIiwgdmFsdWU6IGNsaS5NQUlOLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdFRhYmxlKGV2ZW50LCBjYW4uc3VwLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKHRyKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIGluZGV4KSB7IGluZGV4ID09IDAgJiYgdGQuY2xpY2soKSB9KQoJCQkJdHIuc2Nyb2xsSW50b1ZpZXcoKSwgY2FuLl9vdXRwdXQuc2Nyb2xsVG9wIC09IDYwCgkJCX0pCgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4uc3VwLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIGV2ZW50LmN0cmxLZXk/IG5mcy5HUkVQOiBuZnMuVEFHUywgY2FuLnN1cC5PcHRpb24oIndvcmQiKV0pIH0KCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyBldmVudC50YXJnZXQuYmx1cigpIH0KCQl9fSwKCQl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiZmlsdGVyIiwgdmFsdWU6ICIiLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIGNhbi5zdXAsIG51bGwsIGV2ZW50LnRhcmdldCkKCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgZXZlbnQuY3RybEtleT8gbmZzLkdSRVA6IG5mcy5UQUdTLCBjYW4uc3VwLk9wdGlvbigid29yZCIpXSkgfQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IGV2ZW50LnRhcmdldC5ibHVyKCkgfQoJCX19LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogbmZzLlRBR1N9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogbmZzLkdSRVB9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogY2xpLk1BS0V9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImhpc3RvcnkifSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJsYXN0IiwgX3RyYW5zOiAi6L+U5ZueIn0sCgldLCBmdW5jdGlvbihtc2csIGNtZHMsIGNiKSB7IGlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkiaGlzdG9yeSIsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJY2FuLmNvcmUuTGlzdChjYW4uaGlzdG9yeSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJbXNnLlB1c2gobmZzLkZJTEUsIGl0ZW0uZmlsZSkKCQkJCW1zZy5QdXNoKG5mcy5MSU5FLCBpdGVtLmxpbmUpCgkJCQltc2cuUHVzaChtZGIuVEVYVCwgaXRlbS50ZXh0KQoJCQl9KQoJCQlzaG93KG1zZykKCQl9LAoJCW5mcy5UQUdTLCBmdW5jdGlvbihjbWRzKSB7IG1zZy5PcHRpb24oa2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFLCBpY2UuTVNHX0ZJRUxEUywgImZpbGUsbGluZSx0ZXh0IikpCgkJCWNhbi5ydW5BY3Rpb24obXNnLCBtZGIuU0VBUkNILCBbY2FuLnBhcnNlLCBjbWRzWzBdLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgc3ViID0gbXNnLl9jYW4KCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS80KSwgc2hvdyhtc2csIG1zZy5fd29yZCA9IGNtZHNbMF0pCgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKSB8fCBzdWIuX2xlZ2VuZC5jbGljaygpCgkJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBtc2cuX2Nhbi5faW5wdXRzWyJ3b3JkIl0uX3RhcmdldCkKCQkJfSkKCQl9LAoJCW5mcy5HUkVQLCBmdW5jdGlvbihjbWRzKSB7IG1zZy5PcHRpb24oa2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFLCBpY2UuTVNHX0ZJRUxEUywgImZpbGUsbGluZSx0ZXh0IiwgbmZzLlBBVEgsIGNhbi5PcHRpb24obmZzLlBBVEgpKSkKCQkJY2FuLnJ1bkFjdGlvbihtc2csIG5mcy5HUkVQLCBbY21kc1swXV0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgc3ViID0gbXNnLl9jYW4KCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS80KSwgc2hvdyhtc2csIG1zZy5fd29yZCA9IGNtZHNbMF0pCgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl90YXJnZXQsIGh0bWwuU0VMRUNUKSB8fCBzdWIuX2xlZ2VuZC5jbGljaygpCgkJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBtc2cuX2Nhbi5faW5wdXRzWyJ3b3JkIl0uX3RhcmdldCkKCQkJfSkKCQl9LAoJCSJsYXN0IiwgZnVuY3Rpb24oY21kcykgeyBoaXN0b3J5LnBvcCgpLCBzaG93KGhpc3RvcnkucG9wKCkpIH0sCgkpKSkgeyByZXR1cm4gfSBjYW4ucnVuKG1zZywgY21kcywgZnVuY3Rpb24obXNnKSB7IHNob3cobXNnKSB9LCB0cnVlKSB9KSkKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBTRUFSQ0h9LCBmdW5jdGlvbihzdWIpIHsKCQljYW4udWkuc2VhcmNoID0gc3ViLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQljYW4udWkuc2VhcmNoLl9zaG93ID0gc2hvdwoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL3Nlc3MuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsgdmFyIFNFU1MgPSAid2ViLmNvZGUuc2VzcyIKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBTRVNTfSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCWlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJCW5mcy5TQVZFLCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIFNFU1MsIFtjdHguQUNUSU9OLCBtZGIuQ1JFQVRFLAoJCQkJCQkidG9vbCIsIEpTT04uc3RyaW5naWZ5KGNhbi5vbmV4cG9ydC50b29sKGNhbikpLAoJCQkJCQkidGFicyIsIEpTT04uc3RyaW5naWZ5KGNhbi5vbmV4cG9ydC50YWJzKGNhbikpLAoJCQkJCV0sIGNiKQoJCQkJfSwKCQkJCW5mcy5MT0FELCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnNlc3MoY2FuLCB7CgkJCQkJCXRvb2w6IEpTT04ucGFyc2UobXNnLk9wdGlvbigidG9vbCIpKSwKCQkJCQkJdGFiczogSlNPTi5wYXJzZShtc2cuT3B0aW9uKCJ0YWJzIikpLAoJCQkJCX0pCgkJCQl9LAoJCQkpKSkgeyByZXR1cm4gfQoJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgU0VTUywgY21kcywgY2IpCgkJfSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgl9KQp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvdGVtcGxhdGUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgYXJncywgY2IpIHsKCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiAid2ViLmNvZGUudGVtcGxhdGUifSwgZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJbmZzLkRFRlMsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvbigiYXJncyIpfHwiW10iKSwgZnVuY3Rpb24oZGF0YSkgewoJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBjYW4uY29yZS5JdGVtKGRhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgbXNnLk9wdGlvbihrZXksIHZhbHVlKSB9KQoJCQkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgIndlYi5jb2RlLnRlbXBsYXRlIiwgW25mcy5ERUZTXS5jb25jYXQoY21kcyksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJCQkJCQljYW4ub25pbXBvcnQucHJvamVjdChjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpKQoJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbigibWFpbiIpLCAiIiwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY21kc1sxXSwgMSwgZnVuY3Rpb24oKSB7fSkKCQkJCQkJCX0sIHRydWUpCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCQkJKSkpIHsgcmV0dXJuIH0KCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsICJ3ZWIuY29kZS50ZW1wbGF0ZSIsIGNtZHMsIGNiKQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL3NuaXBwZXQuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbikKCQlpZiAobXNnLk9wdGlvbigiY29udGVudCIpKSB7CgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS52aW1lciIsIHN0eWxlOiAiZnVsbCJ9LCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCWlmIChjbWRzWzFdID09ICJwbHVnaW4iKSB7CgkJCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsICJ2aW1lciIsIGNtZHMsIGNiKQoJCQkJCQlyZXR1cm4KCQkJCQl9CgkJCQkJaWYgKGNtZHNbMV0gPT0gIm1haW4uZ28iKSB7IHJlcy5FY2hvKG1zZy5PcHRpb24oImNvbnRlbnQiKSkKCQkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5zdWIgJiYgY2FuLnN1Yi5vbmFjdGlvblsi6aG555uuIl0oe30sIGNhbi5zdWIpIH0pCgkJCQkJfQoJCQkJCWNiKHJlcyksIGNhbi5zdWIgPSBjYW4uY29yZS5WYWx1ZShzdWIsICJfb3V0cHV0cy4tMSIpCgkJCQl9CgkJCX0sIGNhbi5fb3V0cHV0KQoJCQlyZXR1cm4KCQl9CgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2cpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBbImdvIiwgImhpLmdvIiwgY2FuLnN1Yi5vbmV4cG9ydC5jb250ZW50KGNhbi5zdWIpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvdmltZXIuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJpbm5lci5qcyJdLCBmdW5jdGlvbihjYW4pIHsgY2FuLm9uaW1wb3J0LmlubmVyX2luaXQoY2FuLCBtc2csIGZ1bmN0aW9uKCkgeyBjYW4udW5kbyA9IFtdLCBjYW4ucmVkbyA9IFtdCgkJCWNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKSwgY2FuLm9ua2V5bWFwLl9wbHVnaW4oe30sIGNhbikKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfSwgdGFyZ2V0KSB9ICwgZnVuY3Rpb24oY2FuLCBuYW1lLCBzdWIpIHsgbmFtZSA9PSBjaGF0Lk9OSU1QT1JUICYmIChjYW4ub25pbXBvcnQuaW5uZXJfaW5pdCA9IHN1Yi5faW5pdCkKCQkJaWYgKG5hbWUgPT0gY2hhdC5PTkFDVElPTikgeyBjYW4uX3RyYW5zID0gY2FuLmJhc2UuQ29weShjYW4uX3RyYW5zfHx7fSwgc3ViLl90cmFucykgfQoJCQlpZiAobmFtZSA9PSBjaGF0Lk9OS0VZTUFQKSB7IGNhbi5jb3JlLkl0ZW0oc3ViLl9tb2RlLCBmdW5jdGlvbihtb2RlLCB2YWx1ZSkgewoJCQkJdmFyIGxpc3QgPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV0gPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV18fHt9CgkJCQljYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IGxpc3Rba2V5XSA9IGxpc3Rba2V5XXx8Y2IgfSkKCQkJfSkgfQoJCX0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudC5wYXJlbnROb2RlLCBbCgkJCXt2aWV3OiBbImN1cnJlbnQiLCBodG1sLklOUFVUXSwgc3BlbGxjaGVjazogZmFsc2UsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGV2ZW50Lm1ldGFLZXkpIHsgcmV0dXJuIH0KCQkJCWlmIChldmVudC5jdHJsS2V5ICYmIGNhbi5vbmFjdGlvbi5fY29tcGxldGUoZXZlbnQsIGNhbikpIHsgcmV0dXJuIH0KCQkJCWNhbi5fa2V5bGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgY2FuLm1vZGUrKGV2ZW50LmN0cmxLZXk/ICJfY3RybCI6ICIiKSwgY2FuLl9rZXlsaXN0LCBjYW4udWkuY3VycmVudCkKCQkJCWNhbi5tb2RlID09ICJpbnNlcnQiICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlKSB9LCAxMCkKCQkJCWNhbi5tb2RlID09ICJub3JtYWwiICYmIGNhbi5TdGF0dXMoIuaMiemUriIsIGNhbi5fa2V5bGlzdC5qb2luKCIiKSkKCQkJCWNhbi5tb2RlID09ICJub3JtYWwiICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBvbmtleXVwOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb24uX2NvbXBsZXRlKGV2ZW50LCBjYW4pCgoJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKQoKCQkJfX0sIHt2aWV3OiBbImNvbXBsZXRlIl19LAoJCV0pOyBjYW4udWkuY3VycmVudCA9IHVpLmN1cnJlbnQsIGNhbi51aS5jb21wbGV0ZSA9IHVpLmNvbXBsZXRlCgl9LAoJcHJvamVjdDogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCWNhbi5pc0NtZE1vZGUoKSAmJiB7bmFtZTogImNyZWF0ZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4ub25hY3Rpb24ubGlzdCwgdGFyZ2V0KSB9fSwKCQkJe25hbWU6ICJzb3VyY2UiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciB0b3RhbCA9IDAKCQkJCWZ1bmN0aW9uIHNob3cocGF0aCwgdGFyZ2V0KSB7IGNhbi5ydW4oY2FuLnJlcXVlc3Qoe30sIHtkaXJfcm9vdDogcGF0aCwgZGlyX2RlZXA6IHRydWV9KSwgW2ljZS5QV0RdLCBmdW5jdGlvbihtc2cpIHsgdmFyIGxpc3QgPSBtc2cuVGFibGUoKQoJCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoY2FuLk9wdGlvbihuZnMuRklMRSkuaW5kZXhPZihpdGVtLnBhdGgpID09IDApIHsgaXRlbS5leHBhbmQgPSB0cnVlIH0KCQkJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQub25tb3VzZWVudGVyID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCB7CgkJCQkJCQkidHJhc2giOiBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgbmZzLlRSQVNILCBbY2FuLmJhc2UuUGF0aChwYXRoLCBpdGVtLnBhdGgpXSkgfSwKCQkJCQkJCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb25bYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24pIH0sCgkJCQkJCX0sIFsidHJhc2giXSkgfSB9CgkJCQkJfSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGxpc3QsIG5mcy5QQVRILCBpY2UuUFMsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgaXRlbS5wYXRoKSAvLyDmmL7npLrmlofku7YKCQkJCQl9LCB0YXJnZXQpLCBjYW4uU3RhdHVzKCLmlofku7bmlbAiLCB0b3RhbCArPSBtc2cuTGVuZ3RoKCkpCgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIit0b3RhbCsiIGl0ZW0ifSkKCQkJCX0sIHRydWUpIH0gaWYgKHBhdGgubGVuZ3RoID09IDEpIHsgcmV0dXJuIHNob3cocGF0aFswXSwgdGFyZ2V0KSB9CgoJCQkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBjYW4uY29yZS5MaXN0KHBhdGgsIGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIHtuYW1lOiBwYXRoLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHNob3cocGF0aCwgdGFyZ2V0KSB9fSB9KSwgdGFyZ2V0KQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gIiIgfSkKCQkJfX0sCgkJCXtuYW1lOiAicGx1Z2luIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgdG90YWwgPSAwCgkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIGNhbi5jb3JlLkl0ZW0oY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHRvdGFsKyssIHtpbmRleDogY2FuLmJhc2UudHJpbVByZWZpeChrZXksICJjYW4uIil9IH0pLCBjdHguSU5ERVgsIGljZS5QVCwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uY29yZS5LZXlzKCJjYW4iLCBpdGVtLmluZGV4KSwgY3R4LklOREVYKSAvLyDmmL7npLrmj5Lku7YKCQkJCX0sIHRhcmdldCkKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrdG90YWwrIiBpdGVtIn0pCgkJCX19LAoJCQl7bmFtZTogIm1vZHVsZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtmaWVsZHM6IGN0eC5JTkRFWH0pLCBjdHguQ09NTUFORCwgW21kYi5TRUFSQ0gsIGN0eC5DT01NQU5EXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIittc2cuTGVuZ3RoKCkrIiBpdGVtIn0pCgkJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBtc2cuVGFibGUoKSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGl0ZW0uaW5kZXgsIGN0eC5JTkRFWCkgLy8g5pi+56S65qih5Z2XCgkJCQkJfSwgdGFyZ2V0KQoJCQkJfSkKCQkJfX0sCgkJCXtuYW1lOiAiZHJlYW1zIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgY2FsbCA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJCWNhbi5ydW5BY3Rpb24oe30sIGljZS5SVU4sIFt3ZWIuRFJFQU1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK21zZy5MZW5ndGgoKSsiIGl0ZW0ifSkKCQkJCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgewoJCQkJCQlmdW5jdGlvbiBjYXJ0ZShldmVudCkgewoJCQkJCQkJdmFyIGxpc3QgPSBbXTsgc3dpdGNoIChpdGVtLnN0YXR1cykgewoJCQkJCQkJCWNhc2UgInN0YXJ0IjogbGlzdCA9IFsib3BlbiIsICJzdG9wIl07IGJyZWFrCgkJCQkJCQkJY2FzZSAic3RvcCI6IGxpc3QgPSBbInN0YXJ0IiwgInRyYXNoIl07IGJyZWFrCgkJCQkJCQl9CgkJCQkJCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHt9LCBsaXN0LCBmdW5jdGlvbihldmVudCwgYWN0aW9uKSB7CgkJCQkJCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgaXRlbSksIGljZS5SVU4sIFt3ZWIuRFJFQU0sIGN0eC5BQ1RJT04sIGFjdGlvbl0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCQkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYWxsKHRhcmdldCkKCQkJCQkJCQl9KQoJCQkJCQkJfSkKCQkJCQkJfQoKCQkJCQkJdmFyIGNvbG9yID0gaXRlbS5zdGF0dXMgPT0gInN0YXJ0Ij8gIiI6ICJncmF5IgoJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IFtpdGVtLm5hbWUsIGh0bWwuRElWXSwgc3R5bGU6IHtjb2xvcjogY29sb3J9LCBvbm1vdXNlZW50ZXI6IGNhcnRlfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaXRlbS5uYW1lLCB3ZWIuRFJFQU0pIC8vIOaYvuekuuepuumXtAoJCQkJCQl9fV0pCgkJCQkJfSkKCQkJCX0pCgkJCX0sIF9tZW51OiBzaHkoIiIsIHsKCQkJCSJjcmVhdGUiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uLmRyZWFtKGV2ZW50LCBjYW4sICJkcmVhbSIpIH0sCgkJCQkicmVmcmVzaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4udWkuZHJlYW1zLnJlZnJlc2goKSB9LAoJCQkJInB1Ymxpc2giOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0Q29uZmlybShjYW4sIG1zZy5SZXN1bHQoKSwgYnV0dG9uKSB9KSB9LAoJCQl9LCBbImNyZWF0ZSIsICJyZWZyZXNoIiwgInB1Ymxpc2giXSwgZnVuY3Rpb24oKSB7fSl9LAoJCV0sIGNhbi51aS5wcm9qZWN0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLAoJX21vZGVsOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IGNhbi5TdGF0dXMoIuaooeW8jyIsIGNhbi5tb2RlID0gdmFsdWUpCgkJY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIGNhbi51aS5jdXJyZW50LCBbImN1cnJlbnQiLCBjYW4ubW9kZV0pLCB2YWx1ZQoJCWNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCBjYW4udWkuY29tcGxldGUsIFsiY29tcGxldGUiLCBjYW4ubW9kZV0pLCB2YWx1ZQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJwbHVnaW4iKQoJCWNhbi51aS5jdXJyZW50LmJsdXIoKQoJfSwKCV9ub3JtYWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJub3JtYWwiKQoJCWNhbi51aS5jdXJyZW50LmZvY3VzKCkKCX0sCglfaW5zZXJ0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbW9kZWwoY2FuLCAiaW5zZXJ0IikKCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwCgkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgl9LAoKCV9tb2RlOiB7CgkJcGx1Z2luOiB7CgkJCXQ6IHNoeSgi5re75Yqg5ZG95LukIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIua3u+WKoCJdKGV2ZW50LCBjYW4pIH0pLAoJCQlwOiBzaHkoIua3u+WKoOaPkuS7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmj5Lku7YiXShldmVudCwgY2FuKSB9KSwKCQkJZTogc2h5KCLmt7vliqDmianlsZUiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5omp5bGVIl0oZXZlbnQsIGNhbikgfSksCgoJCQlpOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikgfSksCgkJCW46IHNoeSgi5ZG95Luk5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX25vcm1hbChldmVudCwgY2FuKSB9KSwKCQkJIjoiOiBzaHkoIuW6leihjOaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJjbGkuc3lzdGVtIn0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFsiY2xpLnN5c3RlbSJdID0gc3ViLnNlbGVjdCgpIH0pIH0pLAoKCQkJczogc2h5KCLkv53lrZjmlofku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zYXZlKGV2ZW50LCBjYW4sICJzYXZlIikgfSksCgkJCWQ6IHNoeSgi5Yib5bu656m66Ze0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uZHJlYW0oZXZlbnQsIGNhbiwgImRyZWFtIikgfSksCgkJCW06IHNoeSgi5re75Yqg5qih5Z2XIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uYXV0b2dlbihldmVudCwgY2FuLCAiYXV0b2dlbiIpIH0pLAoJCQljOiBzaHkoIue8luivkemhueebriIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNvbXBpbGUoZXZlbnQsIGNhbiwgImNvbXBpbGUiKSB9KSwKCQl9LAoJCW5vcm1hbF9jdHJsOiB7CgkJCWY6IHNoeSgi5ZCR5LiL57+76aG1IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuKStjYW4uY3VycmVudC53aW5kb3coKS0zLWNhbi5jdXJyZW50LnNjcm9sbCgpCgkJCQlyZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSwgdHJ1ZQoJCQl9KSwKCQkJYjogc2h5KCLlkJHkuIrnv7vpobUiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4pLWNhbi5jdXJyZW50LndpbmRvdygpKzMKCQkJCXJldHVybiBjYW4uY3VycmVudC5zY3JvbGwobGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpLCB0cnVlCgkJCX0pLAoJCX0sCgkJbm9ybWFsOiB7CgkJCUVzY2FwZTogc2h5KCLliIfmjaLmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fcGx1Z2luKGV2ZW50LCBjYW4pIH0pLAoJCQlBcnJvd0xlZnQ6IHNoeSgi5YWJ5qCH5bem56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAtMSkgfSksCgkJCUFycm93UmlnaHQ6IHNoeSgi5YWJ5qCH5Y+z56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAxKSB9KSwKCQkJQXJyb3dEb3duOiBzaHkoIuWFieagh+S4i+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9KSwKCQkJQXJyb3dVcDogc2h5KCLlhYnmoIfkuIrnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkgfSksCgoJCQkiLiI6IHNoeSgi6YeN5aSN5pON5L2cIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBjYiA9IGNhbi5yZWRvLnBvcCgpOyBjYiAmJiBjYigpIH0pLAoJCQl1OiBzaHkoIuaSpOmUgOaTjeS9nCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB2YXIgY2IgPSBjYW4udW5kby5wb3AoKTsgY2IgJiYgY2IoKSB9KSwKCQkJSjogc2h5KCLlkIjlubbkuKTooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCXZhciBuZXh0ID0gY2FuLmN1cnJlbnQubmV4dCgpOyBpZiAoIW5leHQpIHsgcmV0dXJuIH0KCQkJCXZhciBsaW5lID0gY2FuLmN1cnJlbnQubGluZSwgdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJdmFyIHJlc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBuZXh0LCAidGQudGV4dCIpWzBdLmlubmVyVGV4dAoJCQkJY2FuLmN1cnJlbnQudGV4dCh0ZXh0LnRyaW1SaWdodCgpK2ljZS5TUCtyZXN0LnRyaW1MZWZ0KCkpLCBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIG5leHQpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24ubW9kaWZ5TGluZShjYW4sIGxpbmUsIHRleHQpLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHJlc3QsIGxpbmUubmV4dFNpYmxpbmcpIH0pCgkJCX0pLAoKCQkJSDogc2h5KCLot7PliLDooYzpppYiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIDApIH0pLAoJCQloOiBzaHkoIuWFieagh+W3puenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgLTEpIH0pLAoJCQlsOiBzaHkoIuWFieagh+WPs+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMSkgfSksCgkJCUw6IHNoeSgi6Lez5Yiw6KGM5bC+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAwLCAtMSkgfSksCgkJCWo6IHNoeSgi5YWJ5qCH5LiL56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpIH0pLAoJCQlrOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKSB9KSwKCgkJCWdnOiBzaHkoIui3s+WIsOafkOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNvdW50KSwgdHJ1ZSB9KSwKCQkJRzogc2h5KCLot7PliLDmn5DooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjb3VudCA9IGNvdW50PjE/IGNvdW50OiBjYW4ubWF4KSwgdHJ1ZSB9KSwKCQkJenQ6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5pyA5LiKIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLShjb3VudD4xPyBjb3VudDogMykpLCB0cnVlIH0pLAoJCQl6ejogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXkuK3pl7QiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktKGNvdW50ID0gY291bnQ+MT8gY291bnQ6IGNhbi5jdXJyZW50LndpbmRvdygpLzIpKSwgdHJ1ZSB9KSwKCQkJemI6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5pyA5LiLIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLWNhbi5jdXJyZW50LndpbmRvdygpKyhjb3VudD4xPyBjb3VudDogNSkpLCB0cnVlIH0pLAoKCQkJaTogc2h5KCLmj5LlhaXmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pIH0pLAoJCQlJOiBzaHkoIuaPkuWFpeihjOmmliIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIDApIH0pLAoJCQlhOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDEpIH0pLAoJCQlBOiBzaHkoIuaPkuWFpeihjOWwviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIC0xKSB9KSwKCQkJbzogc2h5KCLmj5LlhaXkuIvkuIDooYwiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpKyh0ZXh0LmVuZHNXaXRoKCJ7Iik/Ilx0IjoiIikKCQkJCWNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGNhbi5jdXJyZW50Lm5leHQoKSkpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAxMDAwKQoJCQl9KSwKCQkJTzogc2h5KCLmj5LlhaXkuIrkuIDooYwiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl0ZXh0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpKyh0ZXh0LmVuZHNXaXRoKCJ9Iik/Ilx0IjoiIikKCQkJCWNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGNhbi5jdXJyZW50LmxpbmUpKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMTAwMCkKCQkJfSksCgoJCQl5eTogc2h5KCLlpI3liLblvZPliY3ooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IGNhbi5fbGFzdF90ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpIH0pLAoJCQlkZDogc2h5KCLliarliIflvZPliY3ooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHZhciB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpLCBsaW5lID0gY2FuLm9uYWN0aW9uLl9nZXRMaW5lbm8oY2FuLCBjYW4uY3VycmVudC5saW5lKQoJCQkJY2FuLl9sYXN0X3RleHQgPSBjYW4uY3VycmVudC50ZXh0KCksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgY2FuLmN1cnJlbnQubGluZSkpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIHRleHQsIGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSB9KQoJCQkJdmFyIGNhbGxlZSA9IGFyZ3VtZW50cy5jYWxsZWUKCQkJCWNhbi5yZWRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbGxlZShldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB9KQoJCQl9KSwKCQkJcDogc2h5KCLnspjotLQiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgY2FuLl9sYXN0X3RleHQsIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgbGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUtMSkgfSkKCQkJfSksCgkJCVA6IHNoeSgi57KY6LS0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGNhbi5fbGFzdF90ZXh0LCBjYW4uY3VycmVudC5saW5lKQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSsxKSB9KQoJCQl9KSwKCgkJCXM6IHNoeSgi5L+d5a2Y5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2F2ZShldmVudCwgY2FuLCAic2F2ZSIpIH0pLAoJCQltOiBzaHkoIua3u+WKoOaooeWdlyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmF1dG9nZW4oZXZlbnQsIGNhbiwgImF1dG9nZW4iKSB9KSwKCQkJYzogc2h5KCLnvJbor5Hpobnnm64iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jb21waWxlKGV2ZW50LCBjYW4sICJjb21waWxlIikgfSksCgkJfSwKCQlpbnNlcnQ6IHsKCQkJRXNjYXBlOiBzaHkoIumAgOWHuue8lui+kSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiRXNjYXBlIikgeyByZXR1cm4gfQoJCQkJY2FuLm9ua2V5bWFwLl9ub3JtYWwoZXZlbnQsIGNhbikKCQkJfSksCgkJCVRhYjogc2h5KCLnvKnov5siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIlRhYiIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmtleW1hcC5pbnNlcnRUZXh0KGNhbi51aS5jdXJyZW50LCBpY2UuVEIpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSksCgkJCUJhY2tzcGFjZTogc2h5KCLliKDpmaQiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgaWYgKGV2ZW50LmtleSAhPSAiQmFja3NwYWNlIikgeyByZXR1cm4gfQoJCQkJaWYgKHRhcmdldC5zZWxlY3Rpb25TdGFydCA+IDApIHsgcmV0dXJuIH0KCQkJCWlmICghY2FuLmN1cnJlbnQucHJldigpKSB7IHJldHVybiB9CgkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCgkJCQl2YXIgcmVzdCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKQoJCQkJY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQl2YXIgcG9zID0gY2FuLmN1cnJlbnQudGV4dCgpLmxlbmd0aAoKCQkJCWNhbi51aS5jdXJyZW50LnZhbHVlID0gY2FuLmN1cnJlbnQudGV4dCgpK3Jlc3QKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDAsIHBvcykKCQkJfSksCgkJCUVudGVyOiBzaHkoIuaNouihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBpZiAoZXZlbnQua2V5ICE9ICJFbnRlciIpIHsgcmV0dXJuIH0KCQkJCXZhciByZXN0ID0gY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uRW5kKSwgdGV4dCA9IGNhbi51aS5jdXJyZW50LnZhbHVlCgkJCQl2YXIgbGVmdCA9IHRleHQuc3Vic3RyKDAsIHRleHQuaW5kZXhPZih0ZXh0LnRyaW1MZWZ0KCkpKXx8KHRleHQudHJpbVJpZ2h0KCkgPT0gIiI/IHRleHQ6ICIiKQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoInsiKSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrIn0iLCBjYW4uY3VycmVudC5uZXh0KCkpLCBsZWZ0ICs9IGljZS5UQiB9CgkJCQlpZiAodGV4dC5lbmRzV2l0aCgiWyIpKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsiXSIsIGNhbi5jdXJyZW50Lm5leHQoKSksIGxlZnQgKz0gaWNlLlRCIH0KCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCIoIikpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyIpIiwgY2FuLmN1cnJlbnQubmV4dCgpKSwgbGVmdCArPSBpY2UuVEIgfQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoImAiKSAmJiBjYW4uYmFzZS5jb3VudCh0ZXh0LCAiYCIpJTI9PTEpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyJgIiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9CgoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrcmVzdC50cmltTGVmdCgpLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQljYW4uY3VycmVudC50ZXh0KHRleHQudHJpbVJpZ2h0KCl8fHRleHQpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgbGVmdC5sZW5ndGgsIDApCgkJCX0pLAoJCQlBcnJvd1VwOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiQXJyb3dVcCIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkKCQkJfSksCgkJCUFycm93RG93bjogc2h5KCLlhYnmoIfkuIvnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIkFycm93RG93biIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJfSksCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFtuZnMuU0FWRSwgY29kZS5DT01QSUxFLCBjb2RlLkFVVE9HRU4sIG5mcy5TQ1JJUFQsIGNoYXQuV0VCU0lURSwgd2ViLkRSRUFNXSwKCV9ydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgYXJncywgY2IpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MsIGNifHxmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpLCBjYW4udWkuc291cmNlLnJlZnJlc2goKQoJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBidXR0b24pCgkJfSkKCX0sCglfcnVuczogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBjYikgeyB2YXIgbWV0YSA9IGNhbi5Db25mKCk7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBidXR0b259KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIG1ldGEuZmVhdHVyZVtidXR0b25dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5vbmFjdGlvbi5fcnVuKGV2ZW50LCBjYW4sIGJ1dHRvbiwgYXJncywgY2IpCgkJfSkKCX0sCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY29udGVudDogY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKX0pCgkJY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgYnV0dG9uLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldKQoJfSwKCWNvbXBpbGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi57yW6K+R5LitLi4uIikKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHRvYXN0LmNsb3NlKCkKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHZhciB0b2FzdDEgPSBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAi6YeN5ZCv5LitLi4uIikKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0b2FzdDEuY2xvc2UoKSwgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKSB9LCAzMDAwKQoJCQl9IGVsc2UgeyBjYW4udWkuc2VhcmNoLl9zaG93KG1zZykgfQoKCQl9KQoJfSwKCWF1dG9nZW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uX3J1bnMoZXZlbnQsIGNhbiwgYnV0dG9uLCBmdW5jdGlvbihtc2cpIHsKCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKGNsaS5NQUlOKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQkJY2FuLnVpLnNvdXJjZS5yZWZyZXNoKCkKCQkJfSkKCQl9LCB0cnVlKQoJfSkgfSwKCXNjcmlwdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9ydW5zKGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmlsZTogY2FuLmJhc2UudHJpbVN1ZmZpeChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSkrbmZzLkpTfSksIGNhbiwgYnV0dG9uKQoJfSwKCXdlYnNpdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fcnVucyhjYW4ucmVxdWVzdChldmVudCwge2ZpbGU6IChjYW4uYmFzZS50cmltU3VmZml4KGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKStuZnMuWk1MKS5zcGxpdCgiLyIpLnBvcCgpfSksIGNhbiwgYnV0dG9uKQoJfSwKCWRyZWFtOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX3J1bnMoY2FuLnJlcXVlc3QoZXZlbnQsIHtuYW1lOiBjYW4uYmFzZS50cmltU3VmZml4KGNhbi5PcHRpb24obmZzLkZJTEUpLCBpY2UuUFQrY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSl9KSwgY2FuLCBidXR0b24sIGZ1bmN0aW9uKG1zZykgeyBjYW4udWkuZHJlYW1zLnJlZnJlc2goKQoJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgd2ViLkRSRUFNKSAvLyDmmL7npLrnqbrpl7QKCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCSLmt7vliqAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVhdLCBmdW5jdGlvbihsaXN0KSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGxpc3RbMF0sIGN0eC5JTkRFWCkgfSkgfSwKCSLmj5Lku7YiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWF0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJdmFyIHN1YiA9IGNhbi50b29sa2l0W2xpc3RbMF1dOyBpZiAoc3ViKSB7IHN1Yi5zZWxlY3QoKTsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6IGxpc3RbMF19LCBmdW5jdGlvbihzdWIpIHsgY2FuLnRvb2xraXRbbGlzdFswXV0gPSBzdWIuc2VsZWN0KCkgfSkKCQl9KQoJfSwKCSLmianlsZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWyJ1cmwiXSwgZnVuY3Rpb24obGlzdCkgewoJCQl2YXIgc3ViID0gY2FuLmV4dGVudGlvbnNbbGlzdFswXV07IGlmIChzdWIpIHsgc3ViLnNlbGVjdCgpOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuZXh0cyhjYW4sIGxpc3RbMF0sIGZ1bmN0aW9uKHN1YikgeyBjYW4uZXh0ZW50aW9uc1tsaXN0WzBdXSA9IHN1Yi5zZWxlY3QoKSB9KQoJCX0pCgl9LAoKCWxpc3RUYWdzOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgdmFyIGxpc3QgPSBbXQoJCWNhbi5jb3JlLkl0ZW0oY2FuLnJlcXVlc3QoZXZlbnQpLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGlmIChrZXkuaW5kZXhPZigiXyIpID09IDApIHsgcmV0dXJuIH0KCQkJbGlzdC5wdXNoKHt6b25lOiAibXNnIiwgdHlwZTogdHlwZW9mIHZhbHVlLCBuYW1lOiBrZXksIHRleHQ6IGNhbi5iYXNlLmlzT2JqZWN0KHZhbHVlKT8gIiI6ICh2YWx1ZSsiIikuc3BsaXQoaWNlLk5MKVswXSwKCQkJCXBhdGg6ICJ1c3Ivdm9sY2Fub3MvIiwgZmlsZTogImxpYi9taXNjLmpzIiwgbGluZTogMSwKCQkJfSkKCQl9KQoJCWNhbi5jb3JlLkxpc3QoW2Nhbi5iYXNlLCBjYW4uY29yZSwgY2FuLm1pc2MsIGNhbi5wYWdlLCBjYW4udXNlciwgY2FuLm9uZW5naW5lLCBjYW4ub25kYWVtb24sIGNhbi5vbmFwcGVuZCwgY2FuLm9ubGF5b3V0LCBjYW4ub25tb3Rpb24sIGNhbi5vbmtleW1hcF0sIGZ1bmN0aW9uKGxpYikgewoJCQljYW4uY29yZS5JdGVtKGxpYiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBpZiAoa2V5LmluZGV4T2YoIl8iKSA9PSAwIHx8ICFsaWIuaGFzT3duUHJvcGVydHkoa2V5KSkgeyByZXR1cm4gfQoJCQkJbGlzdC5wdXNoKHt6b25lOiBsaWIuX25hbWUsIHR5cGU6IHR5cGVvZiB2YWx1ZSwgbmFtZToga2V5LCB0ZXh0OiBjYW4uYmFzZS5pc09iamVjdCh2YWx1ZSk/ICIiOiAodmFsdWUrIiIpLnNwbGl0KGljZS5OTClbMF0sCgkJCQkJcGF0aDogInVzci92b2xjYW5vcy8iLCBmaWxlOiBsaWIuX3BhdGgsIGxpbmU6IDEsCgkJCQl9KQoJCQl9KQoJCX0pCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge3RleHQ6IGNhbi5iYXNlLkZvcm1hdChsaXN0KX0pLCBidXR0b24pCgl9LAoJX2NvbXBsZXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4udWkuY29tcGxldGUKCQlpZiAoZXZlbnQgPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9CgkJdmFyIHByZSA9IGNhbi51aS5jdXJyZW50LnZhbHVlLnNsaWNlKDAsIGNhbi51aS5jdXJyZW50LnNlbGVjdGlvblN0YXJ0KQoJCXZhciBlbmQgPSBjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZShjYW4udWkuY3VycmVudC5zZWxlY3Rpb25TdGFydCkKCQl2YXIgdHlwZSA9IGNhbi5jb3JlLlNwbGl0KHByZSkucG9wKCl8fCIiCgkJdmFyIG5hbWUgPSBjYW4uY29yZS5TcGxpdCh0eXBlLCAiIiwgaWNlLlBUKS5wb3AoKXx8IiIKCQl0eXBlID0gY2FuLmJhc2UudHJpbVN1ZmZpeCh0eXBlLCBuYW1lKQoJCXR5cGUgPSBjYW4uYmFzZS50cmltU3VmZml4KHR5cGUsIGljZS5QVCkKCQljb25zdCBQUkUgPSAicHJlIgoKCQlmdW5jdGlvbiB1cGRhdGUodGFyZ2V0KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7dHlwZTogdHlwZSwgbmFtZTogbmFtZSwgdGV4dDogcHJlLCBmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKX0pCgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsICJjb21wbGV0ZSIsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVpLmNvbXBsZXRlLl9tc2cgPSBtc2cKCQkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMCAmJiBjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpID09IG5mcy5KUykgewoJCQkJCW1zZy5uYW1lID0gW10sIG1zZy50eXBlID0gW10sIG1zZy50ZXh0ID0gW10KCQkJCQljYW4uY29yZS5JdGVtKGNhbi5jb3JlLlZhbHVlKHdpbmRvdywgdHlwZSksIGZ1bmN0aW9uKGssIHYpIHsKCQkJCQkJbXNnLlB1c2gobWRiLk5BTUUsIGspLCBtc2cuUHVzaChtZGIuVFlQRSwgdHlwZW9mIHYpCgkJCQkJCXRyeSB7IG1zZy5QdXNoKG1kYi5URVhULCB2KSB9IGNhdGNoIChlKSB7IG1zZy5QdXNoKG1kYi5URVhULCAiIikgfQoJCQkJCX0pCgkJCQkJbXNnLmFwcGVuZCA9IFttZGIuTkFNRSwgbWRiLlRZUEUsIG1kYi5URVhUXQoJCQkJfQoJCQkJbXNnLkxlbmd0aCgpID09IDAgJiYgcHJlLnRyaW0oKSA9PSAiIiAmJiBjYW4uY29yZS5JdGVtKGNhbi5jb3JlLlZhbHVlKGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdLCBjb2RlLktFWVdPUkQpLCBmdW5jdGlvbihrKSB7CgkJCQkJbXNnLlB1c2gobWRiLk5BTUUsIGspCgkJCQl9KQoJCQkJCgkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtQUkUsIGh0bWwuRElWLCBwcmVdfV0pCgkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4KSB7IHJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQl2YXIgbGVmdCA9IGNhbi51aS5jdXJyZW50LnZhbHVlLnNsaWNlKDAsIGNhbi51aS5jdXJyZW50LnNlbGVjdGlvblN0YXJ0KSt2YWx1ZQoJCQkJCWNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBsZWZ0K2Nhbi51aS5jdXJyZW50LnZhbHVlLnNsaWNlKGNhbi51aS5jdXJyZW50LnNlbGVjdGlvbkVuZCkpCgkJCQkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKSwgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsTGVmdCAtPSAxMDAwMCwgY2FuLnVpLmN1cnJlbnQuc2V0U2VsZWN0aW9uUmFuZ2UobGVmdC5sZW5ndGgsIGxlZnQubGVuZ3RoKQoJCQkJfX0gfSwgdGFyZ2V0KQoJCQl9KQoJCX0KCgkJZnVuY3Rpb24gZmlsdGVyKCkgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbaHRtbC5UQk9EWSwgIGh0bWwuVFJdLCBmdW5jdGlvbih0cikgewoJCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuSElERSwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkKSB7CgkJCQkJaWYgKHRkLmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoY2FuLmJhc2UudHJpbVN1ZmZpeCgobmFtZSA9PSBpY2UuUFQ/IHR5cGU6IG5hbWUpLnRvTG93ZXJDYXNlKCksICIoIikpID09IDApIHsgcmV0dXJuIHRkIH0KCQkJCX0pLmxlbmd0aCA9PSAwKSkgeyByZXR1cm4gdHIgfQoJCQl9KS5sZW5ndGggPiAobmFtZSA9PSBpY2UuUFQ/IDE6IDApCgkJfQoKCQlmdW5jdGlvbiBzZWxlY3QoaW5kZXgsIHRvdGFsKSB7IGluZGV4ID0gKGluZGV4Kyh0b3RhbCsxKSklKHRvdGFsKzEpCgkJCWlmIChpbmRleCA9PSB0b3RhbCkgeyBjYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlID0gY2FuLnVpLmNvbXBsZXRlLl9tc2cuT3B0aW9uKFBSRSkpIH0KCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbaHRtbC5UQk9EWSwgInRyOm5vdCguaGlkZSkiXSwgZnVuY3Rpb24odHIsIGkpIHsgaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5TRUxFQ1QsIGkgPT0gaW5kZXgpKSB7CgkJCQljYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlID0gY2FuLnVpLmNvbXBsZXRlLl9tc2cuT3B0aW9uKFBSRSkrY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQpWzBdLmlubmVyVGV4dCkKCQkJfSB9KQoJCQlyZXR1cm4gaW5kZXgKCQl9CgoJCWlmIChldmVudC5jdHJsS2V5KSB7CgkJCWlmIChldmVudC50eXBlID09ICJrZXl1cCIpIHsKCQkJCXZhciB0b3RhbCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW2h0bWwuVEJPRFksICJ0cjpub3QoLmhpZGUpIl0pLmxlbmd0aAoJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQljYXNlICJuIjogY2FuLnVpLmNvbXBsZXRlLl9pbmRleCA9IHNlbGVjdChjYW4udWkuY29tcGxldGUuX2luZGV4KzEsIHRvdGFsKTsgYnJlYWsKCQkJCQljYXNlICJwIjogY2FuLnVpLmNvbXBsZXRlLl9pbmRleCA9IHNlbGVjdChjYW4udWkuY29tcGxldGUuX2luZGV4LTEsIHRvdGFsKTsgYnJlYWsKCQkJCQlkZWZhdWx0OiByZXR1cm4gZmFsc2UKCQkJCX0KCQkJCXJldHVybiBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfQoJCQlyZXR1cm4KCQl9CgoJCWNhbi5jdXJyZW50LmxpbmUuYXBwZW5kQ2hpbGQoY2FuLnVpLmNvbXBsZXRlKSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29tcGxldGUsIGh0bWwuTEVGVCwgY2FuLnVpLmN1cnJlbnQub2Zmc2V0TGVmdC0xLCBodG1sLk1BUkdJTl9UT1AsIGNhbi51aS5jdXJyZW50Lm9mZnNldEhlaWdodCs0KQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgImRpdi5wcmUiLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uaW5uZXJUZXh0ID0gY2FuLnVpLmNvbXBsZXRlLl9tc2cuT3B0aW9uKFBSRSl8fHByZSB9KQoJCWlmIChwcmUgPT0gIiIpIHsgcmV0dXJuIHVwZGF0ZSh0YXJnZXQpIH0KCgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSBodG1sLkVOVEVSOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJY2FzZSBodG1sLlRBQjogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWNhc2UgaWNlLlNQOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJY2FzZSBpY2UuUFQ6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQlkZWZhdWx0OiBmaWx0ZXIoKSB8fCB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQl9IGNhbi51aS5jb21wbGV0ZS5faW5kZXggPSAtMQoJfSwKCglfc2VsZWN0TGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5jdXJyZW50LmxpbmUsICJ0ZC50ZXh0IiwgZnVuY3Rpb24odGQpIHsgY2FuLnVpLmN1cnJlbnQudmFsdWUgPSB0ZC5pbm5lclRleHQKCQkJY2FuLmN1cnJlbnQubGluZS5hcHBlbmRDaGlsZChjYW4udWkuY3VycmVudCksIGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIGh0bWwuTEVGVCwgdGQub2Zmc2V0TGVmdC0xLCBodG1sLldJRFRILCBjYW4udWkuY29udGVudC5zdHlsZS53aWR0aCkKCQkJaWYgKGV2ZW50KSB7CgkJCQlpZiAoZXZlbnQudHlwZSA9PSAiY2xpY2siICYmIGNhbi5tb2RlICE9ICJpbnNlcnQiKSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5fY29tcGxldGUoZXZlbnQsIGNhbikgfSkKCQkJCX0KCQkJCWNhbi51aS5jdXJyZW50LmZvY3VzKCksIGNhbi51aS5jb250ZW50LnNjcm9sbExlZnQgLT0gMTAwMDAKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDAsIChldmVudC5vZmZzZXRYKS8xMi0xKQoJCQl9CgkJfSkKCX0sCglyZXJhbmtMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IGNhbi5tYXggPSAwCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWNhbi5tYXgrKywgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbSwgInRkLmxpbmUiLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uaW5uZXJUZXh0ID0gaW5kZXgrMSB9KQoJCX0pCgl9LAoJaW5zZXJ0TGluZTogZnVuY3Rpb24oY2FuLCB2YWx1ZSwgYmVmb3JlKSB7IHZhciBsaW5lID0gY2FuLm9uYWN0aW9uLmFwcGVuZExpbmUoY2FuLCB2YWx1ZSkKCQliZWZvcmUgJiYgY2FuLnVpLmNvbnRlbnQuaW5zZXJ0QmVmb3JlKGxpbmUsIGNhbi5vbmFjdGlvbi5fZ2V0TGluZShjYW4sIGJlZm9yZSkpCgkJcmV0dXJuIGNhbi5vbmFjdGlvbi5yZXJhbmtMaW5lKGNhbiksIGNhbi5vbmFjdGlvbi5fZ2V0TGluZW5vKGNhbiwgbGluZSkKCX0sCglkZWxldGVMaW5lOiBmdW5jdGlvbihjYW4sIGxpbmUpIHsgbGluZSA9IGNhbi5vbmFjdGlvbi5fZ2V0TGluZShjYW4sIGxpbmUpCgkJdmFyIG5leHQgPSBsaW5lLm5leHRTaWJsaW5nfHxsaW5lLnByZXZpb3VzU2libGluZwoJCXJldHVybiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBsaW5lKSwgY2FuLm9uYWN0aW9uLnJlcmFua0xpbmUoY2FuKSwgbmV4dAoJfSwKCW1vZGlmeUxpbmU6IGZ1bmN0aW9uKGNhbiwgbGluZSwgdmFsdWUpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJaWYgKGl0ZW0gIT0gbGluZSAmJiBpbmRleCsxICE9IGxpbmUpIHsgcmV0dXJuIH0KCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbSwgInRkLnRleHQiLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlpdGVtLmlubmVySFRNTCA9IGNhbi5vbnN5bnRheC5fcGFyc2UoY2FuLCB2YWx1ZSkKCQkJfSkKCQl9KQoJfSwKCWZhdm9yTGluZTogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogInpvbmUiLCB2YWx1ZTogImhpIn0sIHtuYW1lOiAibmFtZSIsIHZhbHVlOiAiaGVsbG8ifV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5GQVZPUiwgW2N0eC5BQ1RJT04sIG1kYi5JTlNFUlQsIG1kYi5aT05FLCBkYXRhLnpvbmV8fCIiLAoJCQkJbWRiLlRZUEUsIGNhbi5wYXJzZSwgbWRiLk5BTUUsIGRhdGEubmFtZXx8IiIsIG1kYi5URVhULCAodmFsdWV8fCIiKS50cmltUmlnaHQoKSwKCQkJCW5mcy5QQVRILCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbmZzLkZJTEUsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBuZnMuTElORSwgY2FuLk9wdGlvbihuZnMuTElORSksCgkJCV0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyLmlofku7bmlbAiLCAi5qih5byPIiwgIuaMiemUriIsICLop6PmnpDlmagiLCAi5paH5Lu25ZCNIiwgIuW9k+WJjeihjCIsICLot7PovazmlbAiXX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL3h0ZXJtLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25sYXlvdXQucHJvZmlsZV9hdXRvKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuKSwgY2FuLnRlcm0gPSB7fQoKCQljYW4ucmVxdWlyZU1vZHVsZXMoWyJ4dGVybS9jc3MveHRlcm0uY3NzIiwgInh0ZXJtIiwgInh0ZXJtLWFkZG9uLWZpdCIsICJ4dGVybS1hZGRvbi13ZWItbGlua3MiXSwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyAKCQkJaWYgKGNhbi5PcHRpb24obWRiLkhBU0gpICE9ICIiKSB7CgkJCQl2YXIgaXRlbSA9IHtoYXNoOiBjYW4uT3B0aW9uKG1kYi5IQVNIKX07IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyBjYW4uY29yZS5WYWx1ZShpdGVtLCB2YWx1ZS5rZXksIHZhbHVlLnZhbHVlKSB9KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fY29ubmVjdChjYW4sIGl0ZW0pCgkJCX0KCgkJCXZhciBoYXNoID0gY2FuLnN1cC5faGFzaHx8Y2FuLm1pc2MuU2VhcmNoSGFzaChjYW4pfHx0cnVlLCBsaXN0ID0gbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQl2YXIgaXRlbSA9IGNhbi5vbmltcG9ydC5faXRlbShjYW4sIHZhbHVlKTsgdmFsdWUuaGFzaCA9PSBoYXNoICYmIChpdGVtLmNsaWNrKCksIGhhc2ggPSBmYWxzZSkKCQkJfSk7IGhhc2ggJiYgY2FuLm9uaW1wb3J0Ll9jcmVhdGUoY2FuLCBbbWRiLlRZUEUsICIiLCBtZGIuTkFNRSwgInRlcm0iXSkKCQl9LCA1MDApIH0pCgl9LAoJbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCXZhciB0ZXJtID0gY2FuLnVpLmNvbnRlbnQuX3Rlcm07IGlmICghdGVybSkgeyByZXR1cm4gfQoJCXRlcm0uX2ZpdC5maXQoKSwgY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKQoJfSwKCV9pdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlpdGVtLl9tZW51ID0gc2h5KGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0sIGl0ZW0uZXh0cmEpLCBtZXRhW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKQoJCX0pCgkJcmV0dXJuIGl0ZW0uX2l0ZW0gPSBjYW4ub25pbXBvcnQuaXRlbShjYW4sIGl0ZW0sIGZ1bmN0aW9uKGV2ZW50KSB7IAoJCQlpdGVtLl90YWJzPyBpdGVtLl90YWJzLmNsaWNrKCk6IGl0ZW0uX3RhYnMgPSBjYW4ub25pbXBvcnQudGFicyhjYW4sIFtpdGVtXSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmltcG9ydC5fY29ubmVjdChjYW4sIGl0ZW0pCgkJCX0pLCBpdGVtLl9wbHVnaW4gJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0uX3BsdWdpbi5fdGFyZ2V0LCB0cnVlKQoJCX0sIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgY2FuLm9uZGV0YWlsLCBjYW4ub25kZXRhaWwubGlzdCwgaXRlbS5fbWVudSkgfSkKCX0sCglfY3JlYXRlOiBmdW5jdGlvbihjYW4sIGFyZ3MsIGRhdGEpIHsKCQljYW4ucnVuQWN0aW9uKHt9LCBtZGIuQ1JFQVRFLCBhcmdzLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIGN1cnJlbnQgPSBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCB7aGFzaDogbXNnLlJlc3VsdCgpLCBuYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgZXh0cmE6IGRhdGF9KQoJCQljYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBjdXJyZW50LCBjYW4udWkucHJvamVjdC5maXJzdENoaWxkKS5jbGljaygpCgkJfSkKCX0sCglfY29ubmVjdDogZnVuY3Rpb24oY2FuLCBpdGVtLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4udWkuY29udGVudAoJCWNhbi5zdXAuX2hhc2ggPSBpdGVtLmhhc2gsIGNhbi5pc0NtZE1vZGUoKSAmJiAobG9jYXRpb24uaGFzaCA9IGl0ZW0uaGFzaCkKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpdGVtLmhhc2ggfSwgdGFyZ2V0LCBjYW4udWkucHJvZmlsZSkpIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwgaXRlbSksICJzZWxlY3QiKSwgaXRlbS5fdGVybS5mb2N1cygpCgkJCXJldHVybiBjYW4ub25leHBvcnQudGVybShjYW4sIGl0ZW0uX3Rlcm0pCgkJfQoKCQlpdGVtLmV4dHJhID0gY2FuLmJhc2UuT2JqKGl0ZW0uZXh0cmEsIHt9KQoJCXZhciB0ZXJtID0gbmV3IFRlcm1pbmFsKHt0aGVtZTogaXRlbS5leHRyYSwgY3Vyc29yQmxpbms6IHRydWUsIHRhYlN0b3BXaWR0aDogNH0pCgkJdmFyIGZpdEFkZG9uID0gbmV3IEZpdEFkZG9uLkZpdEFkZG9uKCk7IHRlcm0ubG9hZEFkZG9uKGZpdEFkZG9uKSwgdGVybS5fZml0ID0gZml0QWRkb24KCQl0ZXJtLmxvYWRBZGRvbihuZXcgV2ViTGlua3NBZGRvbi5XZWJMaW5rc0FkZG9uKCkpCgoJCXRlcm0ub3Blbih0YXJnZXR8fGNhbi51aS5jb250ZW50KQoJCXRlcm0ub25SZXNpemUoZnVuY3Rpb24oc2l6ZSkgeyBjYW4ub25pbXBvcnQuX3NpemUoY2FuLCBpdGVtLCBzaXplKSB9KQoJCWZpdEFkZG9uLmZpdCgpCgoJCXZhciBzdWJtb2RlID0gZmFsc2UsIGtleXNraXAgPSBmYWxzZQoJCXRlcm0ub25LZXkoZnVuY3Rpb24oZSkgeyB2YXIgZXZlbnQgPSBlLmRvbUV2ZW50CgkJCWlmIChzdWJtb2RlKSB7IGtleXNraXAgPSB0cnVlOyBzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSAibCI6IHRhcmdldC5uZXh0U2libGluZyAmJiB0YXJnZXQubmV4dFNpYmxpbmcuX3Rlcm0/IHRhcmdldC5uZXh0U2libGluZy5fdGVybS5mb2N1cygpOgoJCQkJCQlpdGVtLl90YWJzICYmIGl0ZW0uX3RhYnMubmV4dFNpYmxpbmcgJiYgaXRlbS5fdGFicy5uZXh0U2libGluZy5jbGljaygpOwoJCQkJCWJyZWFrCgkJCQljYXNlICJoIjogdGFyZ2V0LnByZXZpb3VzU2libGluZyAmJiB0YXJnZXQucHJldmlvdXNTaWJsaW5nLl90ZXJtPyB0YXJnZXQucHJldmlvdXNTaWJsaW5nLl90ZXJtLmZvY3VzKCk6CgkJCQkJCWl0ZW0uX3RhYnMgJiYgaXRlbS5fdGFicy5wcmV2aW91c1NpYmxpbmcgJiYgaXRlbS5fdGFicy5wcmV2aW91c1NpYmxpbmcuY2xpY2soKTsKCQkJCQlicmVhawoJCQkJY2FzZSAibiI6IGNhbi5vbmFjdGlvbi5jcmVhdGUoZXZlbnQsIGNhbik7IGJyZWFrCgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6IGtleXNraXAgPSBmYWxzZQoJCQl9IH0KCQkJc3VibW9kZSA9IGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5ID09ICJnIgoJCQljYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pCgkJfSkKCQl0ZXJtLm9uRGF0YShmdW5jdGlvbih2YWwpIHsKCQkJaWYgKHN1Ym1vZGUgfHwga2V5c2tpcCkgeyBrZXlza2lwID0gZmFsc2U7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC5faW5wdXQoY2FuLCBpdGVtLCB2YWwpCgkJfSkKCQl0ZXJtLm9uVGl0bGVDaGFuZ2UoZnVuY3Rpb24odGl0bGUpIHsgY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLnRpdGxlKHRpdGxlKSB9KQoJCXRlcm0ub25DdXJzb3JNb3ZlKGZ1bmN0aW9uKGUpIHsgY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKSB9KQoKCQljYW4udGVybVtpdGVtLmhhc2hdID0gaXRlbS5fdGVybSA9IHRhcmdldC5fdGVybSA9IHRlcm0sIHRlcm0uX3RhcmdldCA9IHRhcmdldCwgdGVybS5faXRlbSA9IGl0ZW0KCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgInNlbGVjdCIpLCBpdGVtLl90ZXJtLmZvY3VzKCkKCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9wbHVnKGNhbiwgaXRlbSksIGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkKCX0sCglfaW5wdXQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdmFsKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgaXRlbSksICJpbnB1dCIsIFtidG9hKHZhbCldLCBmdW5jdGlvbigpIHt9KQoJfSwKCV9zaXplOiBmdW5jdGlvbihjYW4sIGl0ZW0sIHNpemUpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBzaXplLCBpdGVtKSwgInJlc2l6ZSIsIFtdKQoJfSwKCV9wbHVnOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBpdGVtLmV4dHJhLCBjYW4udWkucHJvZmlsZSwgZnVuY3Rpb24oc3ViKSB7IGl0ZW0uX3BsdWdpbiA9IHN1YgoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKjMvNCkKCQl9KQoJfSwKCWdyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0eXBlKSB7IHZhciB0ZXJtID0gY2FuLnRlcm1bbXNnLk9wdGlvbihtZGIuSEFTSCldOyBpZiAoIXRlcm0pIHsgcmV0dXJuIH0KCQlzd2l0Y2ggKHR5cGUpIHsKCQkJY2FzZSAiZGF0YSI6IHRlcm0ud3JpdGUoYXRvYihtc2cuT3B0aW9uKG1kYi5URVhUKSkpOyBicmVhawoJCQljYXNlICJleGl0IjogY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGVybS5fdGFyZ2V0KTsgYnJlYWsKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFttZGIuQ1JFQVRFLCBsZXguU1BMSVQsIG1kYi5QUlVORVNdLAoJX3RyYW5zOiB7c3BsaXQ6ICLliIblsY8iLCB0aGVtZTogIuS4u+mimCJ9LAoJY3JlYXRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5UWVBFLCBtZGIuTkFNRSwgImJhY2tncm91bmQiLCBjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQljYW4ub25pbXBvcnQuX2NyZWF0ZShjYW4sIGFyZ3MsIGRhdGEpCgkJfSkKCX0sCglzcGxpdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwge25hbWU6ICJ0ZXJtIiwgbnJvdzogMiwgbmNvbDogMn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5UWVBFLCBtZGIuTkFNRSwgIm5yb3ciLCAibmNvbCJdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5vbmltcG9ydC50YWJzKGNhbiwgW2RhdGFdLCBmdW5jdGlvbihldmVudCkgeyBpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBkYXRhLm5hbWUgfSwgY2FuLnVpLmNvbnRlbnQpKSB7IHJldHVybiB9CgkJCQljYW4uY29yZS5MaXN0KHBhcnNlSW50KGRhdGEubnJvdyksIGZ1bmN0aW9uKG5yb3cpIHsgdmFyIHJvdyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCBbe3ZpZXc6ICJyb3ciLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS9kYXRhLm5yb3d9fV0pLmZpcnN0CgkJCQkJY2FuLmNvcmUuTGlzdChwYXJzZUludChkYXRhLm5jb2wpLCBmdW5jdGlvbihuY29sKSB7IHZhciBjb2wgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCByb3csIFt7dmlldzogImNvbCIsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpL2RhdGEubnJvdywgd2lkdGg6IGNhbi5Db25mV2lkdGgoKS9kYXRhLm5jb2wtMn19XSkuZmlyc3QKCQkJCQkJY2FuLnJ1bkFjdGlvbih7fSwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCBkYXRhLnR5cGUsIG1kYi5OQU1FLCBjYW4uY29yZS5LZXlzKGRhdGEubmFtZSwgbnJvdywgbmNvbCldLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uaW1wb3J0Ll9jb25uZWN0KGNhbiwge2hhc2g6IG1zZy5SZXN1bHQoKX0sIGNvbCkgfSkKCQkJCQl9KQoJCQkJfSkKCQkJfSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbInNoYXJlIiwgInBsdWdpbiIsICJ0aGVtZSIsICJyZW5hbWUiLCAicmVtb3ZlIl0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1zZy5PcHRpb24oImFyZ3MiLCAiIikKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW3tuYW1lOiBjaGF0LlRJVExFLCB2YWx1ZTogaXRlbS5uYW1lfSwge25hbWU6IGNoYXQuVE9QSUMsIHZhbHVlczogW2NsaS5XSElURSwgY2xpLkJMQUNLXX1dLCBbCgkJCW1kYi5OQU1FLCBjYW4uX2luZGV4LCBtZGIuVEVYVCwgSlNPTi5zdHJpbmdpZnkoW2Nhbi5zdXAuX2hhc2hdKSwKCQldKQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihhcmdzLCBkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIGFyZ3MpLCBjYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBjYW4ub25pbXBvcnQuX3BsdWcoY2FuLCBpdGVtKQoJCX0pCgl9LAoJdGhlbWU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsiYmFja2dyb3VuZCIsICJzZWxlY3Rpb24iLCAiY3Vyc29yIiwgImZvcmVncm91bmQiXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKSwgY2FuLmJhc2UuQ29weShpdGVtLmV4dHJhLCBkYXRhKSwgaXRlbS5fdGVybS5zZXRPcHRpb24oInRoZW1lIiwgZGF0YSkKCQl9KQoJfSwKCXJlbmFtZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FXSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MpLCBpdGVtLm5hbWUgPSBpdGVtLl9pdGVtLmlubmVyVGV4dCA9IGl0ZW0uX3RhYnMuaW5uZXJUZXh0ID0gYXJnc1sxXQoJCX0pCgl9LAoJcmVtb3ZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFttZGIuVE9UQUwsIG1kYi5UWVBFLCAiYmFja2dyb3VuZCIsICJyb3dzIiwgImNvbHMiLCAiY3Vyc29yWSIsICJjdXJzb3JYIiwgY3R4LklOREVYXSwKCXRlcm06IGZ1bmN0aW9uKGNhbiwgdGVybSkgeyBpdGVtID0gdGVybS5faXRlbQoJCWNhbi5jb3JlLkxpc3QoY2FuLm9uZXhwb3J0Lmxpc3QsIGZ1bmN0aW9uKGtleSkgewoJCQljYW4uU3RhdHVzKGtleSwgY2FuLmJhc2UuZ2V0VmFsaWQoaXRlbVtrZXldLCBpdGVtLmV4dHJhW2tleV0sIHRlcm1ba2V5XSwgdGVybS5idWZmZXIuYWN0aXZlW2tleV0sICIiKSkKCQl9KQoJCWNhbi5TdGF0dXMobWRiLlRPVEFMLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5ESVZfSVRFTSkubGVuZ3RoKQoJCWNhbi5TdGF0dXMobWRiLlRZUEUsIGl0ZW1bbWRiLlRZUEVdfHwiIikKCQlyZXR1cm4gdGVybQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3RlYW0vcGxhbi5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4udWkgPSBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4ub25pbXBvcnRbY2FuLk9wdGlvbigic2NhbGUiKXx8IndlZWsiXShjYW4sIG1zZykKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLk1BWF9IRUlHSFQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCkKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJIWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQkhY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKQoJfSwKCV9jb250ZW50OiBmdW5jdGlvbihjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkgewoJCXZhciBoYXNoID0ge307IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIGsgPSBrZXkoY2FuLmJhc2UuRGF0ZSh2YWx1ZS5iZWdpbl90aW1lKSk7IGhhc2hba10gPSAoaGFzaFtrXXx8W10pLmNvbmNhdChbdmFsdWVdKSB9KQoKCQljYW4uc3VwLnRhc2sgJiYgKGNhbi5zdXAudGFzay5fdGFyZ2V0ID0gbnVsbCkKCQl2YXIgYmVnaW5fdGltZSA9IGNhbi5iYXNlLkRhdGUoY2FuLk9wdGlvbigiYmVnaW5fdGltZSIpKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCBbe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVEFCTEVdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGhvdXIsIHJvdykgewoJCQlyZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoaGVhZCwgZnVuY3Rpb24od2VlaywgY29sKSB7CgkJCQlpZiAocm93ID09IDApIHsgcmV0dXJuIHt0ZXh0OiBbY2FuLnVzZXIudHJhbnMoY2FuLCB3ZWVrKSwgaHRtbC5USF19IH0KCQkJCWlmIChjb2wgPT0gMCkgeyByZXR1cm4ge3RleHQ6IFtob3VyLCBodG1sLlREXX0gfQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fdGFzayhjYW4sIG1zZywgZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSwgc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSkKCQkJfSl9CgkJfSkgfV0pLCBjYW4uU3RhdHVzKG1kYi5DT1VOVCwgbXNnLkxlbmd0aCgpKQoKCQltc2cuTGVuZ3RoKCkgPiAwICYmIGNhbi5zdXAudGFzayAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJdmFyIHRhcmdldCA9IGNhbi5zdXAudGFzay5fdGFyZ2V0fHxjYW4udGFzay5fdGFyZ2V0OyBjYW4uc3VwLnRhc2sgPSBudWxsLCB0YXJnZXQgJiYgdGFyZ2V0LmNsaWNrKCkKCQl9KQoJfSwKCV90YXNrOiBmdW5jdGlvbihjYW4sIG1zZywgbGlzdCwgdGltZSkgeyByZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sCgkJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYWN0aW9uLmluc2VydFRhc2soZXZlbnQsIGNhbiwgdGltZStjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpLnNsaWNlKHRpbWUubGVuZ3RoKSkKCQl9LAoJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCWNhbi5kcm9wKGV2ZW50LCBldmVudC50YXJnZXQsIHRpbWUpCgkJfSwKCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCAib3ZlciIsIGV2ZW50LnRhcmdldCA9PSBpdGVtKQoJCQl9KQoJCX0sCgkJbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0YXNrKSB7CgkJCXJldHVybiBjYW4uYmFzZS5pc1N0cmluZyh0YXNrKT8ge3RleHQ6IFt0YXNrLCBodG1sLkRJViwgImRhdGUiXX06IHt0ZXh0OiBbY2FuLm9uZXhwb3J0W2Nhbi5BY3Rpb24oInZpZXciKXx8InRleHQiXShjYW4sIHRhc2spLCBodG1sLkRJViwgY2FuLm9uZXhwb3J0LnN0eWxlKGNhbiwgdGFzayldLAoJCQkJb25kcmFnc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7IGNhbi5kcm9wID0gZnVuY3Rpb24oZXZlbnQsIHRkLCB0aW1lKSB7IHRkLmFwcGVuZCh0YXJnZXQpCgkJCQkJY2FuLm9uYWN0aW9uLm1vZGlmeVRhc2soZXZlbnQsIGNhbiwgdGFzaywgImJlZ2luX3RpbWUiLCB0aW1lK3Rhc2suYmVnaW5fdGltZS5zbGljZSh0aW1lLmxlbmd0aCksIHRhc2suYmVnaW5fdGltZSkKCQkJCX0gfSwgZHJhZ2dhYmxlOiB0aW1lICE9IHVuZGVmaW5lZCwgdGl0bGU6IGNhbi5vbmV4cG9ydC50aXRsZShjYW4sIHRhc2spLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJdmFyIGl0ZW0gPSBjYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuaWNrOiB0YXNrLm5hbWUrIjoiK3Rhc2sudGV4dH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRELCB0YXJnZXQucGFyZW50Tm9kZSksIGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIHRhc2spCgkJCQkJfSkgfSwgbnVsbCwgY2FuLnVpLnByb2plY3QpOyB0YXNrLl90YXJnZXQgPSB0YXJnZXQsIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgaXRlbS5jbGljaygpIH0KCQkJCQljYW4udGFzayA9IGNhbi50YXNrfHx0YXNrLCBjYW4uc3VwLnRhc2sgPSBjYW4uc3VwLnRhc2t8fHRhc2ssIGNhbi5zdXAudGFzay56b25lID09IHRhc2suem9uZSAmJiBjYW4uc3VwLnRhc2suaWQgPT0gdGFzay5pZCAmJiAoY2FuLnN1cC50YXNrLl90YXJnZXQgPSB0YXJnZXQpCgkJCQl9LAoJCQl9CgkJfSksCgl9IH0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gY2FuLnN1cC50YXNrID0gdGFzaywgY2FuLlN0YXR1cyh0YXNrKSwgW3Rhc2sucG9kLCB0YXNrLnpvbmUsIHRhc2suaWRdLmpvaW4oaWNlLlBUKSB9LCBjYW4udWkucHJvZmlsZSwgY2FuLnVpLmRpc3BsYXkpKSB7IHJldHVybiB9CgoJCXRhc2suZXh0cmEgJiYgY2FuLmNvcmUuSXRlbShjYW4uYmFzZS5PYmoodGFzay5leHRyYSksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgdGFza1siZXh0cmEuIitrZXldID0gdmFsdWUgfSksIGRlbGV0ZSh0YXNrLmV4dHJhKQoJCXZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4udWkucHJvZmlsZSwgW3t2aWV3OiBbY2hhdC5DT05URU5ULCBodG1sLlRBQkxFXSwgbGlzdDogW3t0aDogW21kYi5LRVksIG1kYi5WQUxVRV19XX1dKS5maXJzdAoJCWNhbi5jb3JlLkl0ZW0odGFzaywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBrZXkgIT0gIl90YXJnZXQiICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCBbewoJCQl0ZDogW2tleSwga2V5ID09IGljZS5QT0QgJiYgdmFsdWUgIT0gIiI/IGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogdmFsdWV9KSwgdmFsdWUpOiB2YWx1ZV0sCgkJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGlmIChjYW4ucGFnZS50YWdpcyhodG1sLklOUFVULCBldmVudC50YXJnZXQpICYmIGV2ZW50LnRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7CgkJCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB0YXNrKSwgW2N0eC5BQ1RJT04sIGV2ZW50LnRhcmdldC5uYW1lXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5VcGRhdGUoKSB9KQoJCQl9IH0sCgkJCW9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCgpCgkJCQlzd2l0Y2ggKGtleSkgewoJCQkJCWNhc2UgInpvbmUiOgoJCQkJCWNhc2UgImlkIjoKCQkJCQkJcmV0dXJuCgkJCQkJY2FzZSAibGV2ZWwiOgoJCQkJCWNhc2UgInNjb3JlIjoKCQkJCQkJbXNnLlB1c2goa2V5LCAiMSIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjIiKQoJCQkJCQltc2cuUHVzaChrZXksICIzIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiNCIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjUiKQoJCQkJCQlicmVhawoJCQkJCWNhc2UgInN0YXR1cyI6CgkJCQkJCW1zZy5QdXNoKGtleSwgInByZXBhcmUiKQoJCQkJCQltc2cuUHVzaChrZXksICJwcm9jZXNzIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiZmluaXNoIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiY2FuY2VsIikKCQkJCQkJYnJlYWsKCQkJCX0KCQkJCWNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUpIHsKCQkJCQljYW4ub25hY3Rpb24ubW9kaWZ5VGFzayhldmVudCwgY2FuLCB0YXNrLCBrZXksIHZhbHVlKQoJCQkJfSwge25hbWU6IGtleSwgYWN0aW9uOiBrZXkuaW5kZXhPZihtZGIuVElNRSkgPiAwPyAiZGF0ZSI6ICJrZXkiLCBtc2c6IG1zZywgbW9kZTogInNpbXBsZSJ9KQoJCQl9LAoJCX1dKSB9KSwgY2FuLm9uaW1wb3J0Ll9kaXNwbGF5KGNhbiwgdGFzaykKCX0sCglfZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IGlmICghdGFza1siZXh0cmEuY21kIl0pIHsgcmV0dXJuIH0KCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6ICJwbHVnIiwgY3R4OiB0YXNrWyJleHRyYS5jdHgiXSwgY21kOiB0YXNrWyJleHRyYS5jbWQiXSwgYXJnOiB0YXNrWyJleHRyYS5hcmciXX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwga2l0LkRpY3QoInRhc2sucG9kIiwgdGFza1sicG9kIl0sICJ0YXNrLnpvbmUiLCB0YXNrLnpvbmUsICJ0YXNrLmlkIiwgdGFzay5pZCkpCgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBbdGFza1ttZGIuWk9ORV0sIHRhc2tbbWRiLklEXV0uY29uY2F0KGNtZHMpLCBjYikKCQkJfQoJCX0sIGNhbi51aS5kaXNwbGF5KQoJfSwKCglkYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBbImhvdXIiLCAidGFzayJdCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSA3OyBpIDwgMjQ7IGkrKykgeyBsaXN0LnB1c2goY2FuLmJhc2UuTnVtYmVyKGksIDIpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5OdW1iZXIodGltZS5nZXRIb3VycygpLCAyKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2xpc3Rbcm93XV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gY2FuLmJhc2UuVGltZShiZWdpbl90aW1lLCAiJXktJW0tJWQgIikrbGlzdFtyb3ddIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCXdlZWs6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBjYW4ub25leHBvcnQuaGVhZChjYW4sICJob3VyIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDc7IGkgPCAyNDsgaSsrKSB7IGxpc3QucHVzaChjYW4uYmFzZS5OdW1iZXIoaSwgMikpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIHRpbWUuZ2V0RGF5KCkrIiAiK2Nhbi5iYXNlLk51bWJlcih0aW1lLmdldEhvdXJzKCksIDIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbY29sLTErIiAiK2xpc3Rbcm93XV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gY2FuLmJhc2UuVGltZShjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC1iZWdpbl90aW1lLmdldERheSgpK2NvbC0xKSwgIiV5LSVtLSVkICIpK2xpc3Rbcm93XSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgltb250aDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IGNhbi5vbmV4cG9ydC5oZWFkKGNhbiwgIm9yZGVyIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtLSVkIikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgewoJCQl2YXIgYmVnaW4gPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSkpCgkJCXZhciBsYXN0ID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpLWJlZ2luLmdldERheSgpKQoJCQl2YXIgZGF5ID0gY2FuLmJhc2UuVGltZUFkZChsYXN0LCAocm93LTEpKjcrY29sKQoJCQlyZXR1cm4gW2RheS5nZXREYXRlKCkrIiJdLmNvbmNhdChoYXNoW2tleShkYXkpXXx8W10pCgkJfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgewoJCQl2YXIgYmVnaW4gPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSkpCgkJCXZhciBsYXN0ID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpLWJlZ2luLmdldERheSgpKQoJCQl2YXIgZGF5ID0gY2FuLmJhc2UuVGltZUFkZChsYXN0LCAocm93LTEpKjcrY29sKQoJCQlyZXR1cm4ga2V5KGRheSkKCQl9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgl5ZWFyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gY2FuLm9uZXhwb3J0LmhlYWQoY2FuLCAibW9udGgiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtICIpK3RpbWUuZ2V0RGF5KCkgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkrIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpKyIgIisoY29sLTEpXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkrIi0iK2Nhbi5iYXNlLk51bWJlcihsaXN0W3Jvd10sIDIpIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCWxvbmc6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGJlZ2luX3RpbWUgPSBjYW4uYmFzZS5EYXRlKGNhbi5iYXNlLlRpbWUoY2FuLk9wdGlvbigiYmVnaW5fdGltZSIpLCAiJXktJW0tJWQgJUg6JU06JVMiKSkKCQl2YXIgYmVnaW4gPSBiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkgLSA1CgoJCXZhciBoZWFkID0gWyJtb250aCJdOyBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsgaGVhZC5wdXNoKGJlZ2luK2kpIH0KCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCAxMzsgaSsrKSB7IGxpc3QucHVzaChpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsICIleS0lbSIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbYmVnaW4rY29sLTErIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBiZWdpbitjb2wtMSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMikgfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuS6pOS6kiIsIGxpc3Q6IFsKCQkiaW5zZXJ0IiwgImV4cG9ydCIsICJpbXBvcnQiLAoJCVsibGV2ZWwiLCAiYWxsIiwgImwxIiwgImwyIiwgImwzIiwgImw0IiwgImw1Il0sCgkJWyJzdGF0dXMiLCAiYWxsIiwgInByZXBhcmUiLCAicHJvY2VzcyIsICJjYW5jZWwiLCAiZmluaXNoIl0sCgkJWyJzY29yZSIsICJhbGwiLCAiczEiLCAiczIiLCAiczMiLCAiczQiLCAiczUiXSwKCQlbInZpZXciLCAiIiwgIm5hbWUiLCAidGV4dCIsICJsZXZlbCIsICJzY29yZSJdLAoJXSwKCV90cmFuczogeyJ0YXNrIjogIuS7u+WKoSIsICJob3VyIjogIuaXtumXtCIsICJtb250aCI6ICLmnIjku70ifSwKCWluc2VydFRhc2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRpbWUpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwge2JlZ2luX3RpbWU6IHRpbWV9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGNhbi5Db25mKFtjdHguRkVBVFVSRSwgbWRiLklOU0VSVF0pLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5JTlNFUlQsIFsiem9uZSIsIGFyZ3NbMV0sICJiZWdpbl90aW1lIiwgdGltZV0uY29uY2F0KGFyZ3MpKQoJCX0pCgl9LAoJbW9kaWZ5VGFzazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFzaywga2V5LCB2YWx1ZSkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHRhc2spLCBtZGIuTU9ESUZZLCBba2V5LCB2YWx1ZSwgdGFza1trZXldXSkKCX0sCgoJX2ZpbHRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyB2YXIgY291bnQgPSAwCgkJaWYgKHZhbHVlID09ICJhbGwiKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5ISURFKSwgY291bnQrKwoJCQl9KQoJCX0gZWxzZSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgaHRtbC5ISURFKQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgY2FuLmNvcmUuS2V5cyhodG1sLkRJViwgdmFsdWUpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5ISURFKSwgY291bnQrKwoJCQl9KQoJCX0KCQljYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4uU3RhdHVzKG1kYi5DT1VOVCwgY291bnQpCgl9LAoJbGV2ZWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXN0YXR1czogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJc2NvcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXZpZXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLm9uaW1wb3J0W2Nhbi5PcHRpb24oInNjYWxlIildKGNhbiwgY2FuLl9tc2cpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFttZGIuQ09VTlQsICJiZWdpbl90aW1lIiwgbWRiLlpPTkUsIG1kYi5JRCwgbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVF0sCgluYW1lOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIHRhc2submFtZSB9LAoJdGV4dDogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiB0YXNrLm5hbWUrIjogIisodGFzay50ZXh0fHwiIikgfSwKCWxldmVsOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuICJsLSIrKHRhc2subGV2ZWx8fDMpKyI6ICIrKHRhc2submFtZXx8IiIpIH0sCglzY29yZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiAicy0iKyh0YXNrLmxldmVsfHwzKSsiOiAiKyh0YXNrLm5hbWV8fCIiKSB9LAoJdGl0bGU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gdGFzay56b25lKyI6ICIrKHRhc2sudHlwZXx8IiIpIH0sCglzdHlsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiBbaHRtbC5JVEVNLCB0YXNrLnN0YXR1cywgbWRiLklEK3Rhc2suaWQsICJsIisodGFzay5sZXZlbHx8IiIpLCAicyIrKHRhc2suc2NvcmV8fCIiKV0uam9pbihpY2UuU1ApIH0sCgloZWFkOiBmdW5jdGlvbihjYW4sIHNjYWxlKSB7CgkJc3dpdGNoIChzY2FsZSkgewoJCQljYXNlICJ5ZWFyIjoKCQkJY2FzZSAibG9uZyI6CgkJCQlyZXR1cm4KCQl9CgkJcmV0dXJuIFtzY2FsZV0uY29uY2F0KGNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPT0gImVuIj8gWyJNb24iLCAiVHVlIiwgIldlZCIsICJUaHUiLCAiRnJpIiwgIlNhdCIsICJTdW4iXTogWyLlkajml6UiLCAi5ZGo5LiAIiwgIuWRqOS6jCIsICLlkajkuIkiLCAi5ZGo5ZubIiwgIuWRqOS6lCIsICLlkajlha0iXSk7Cgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9kYXRhLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IpIHsKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LmRpc3BsYXkoY2FuKQoJCWNhbi50YWJsZSA9IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNvbnRleHRtZW51OiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uZGV0YWlsLCBjYW4ub25kZXRhaWwubGlzdCwgZnVuY3Rpb24oZXYsIGNtZCwgbWV0YSkgewoJCQkJCXZhciBjYiA9IG1ldGFbY21kXTsgY2IgJiYgY2IoZXZlbnQsIGNhbiwgY21kLCB2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkKCQkJCX0pCgkJCX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlrZXkgPT0gbmZzLlBBVEggJiYgY2FuLnJ1bihldmVudCwgW2Nhbi5PcHRpb24obmZzLlBBVEgsIHZhbHVlKV0pCgkJCX0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucGFnZS5lZGl0YWJsZShjYW4sIGV2ZW50LnRhcmdldCwgdHJ1ZSkKCQkJfX0KCQl9LCBjYW4udWkuY29udGVudCkKCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBtc2cuYXBwZW5kKQoJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLnu4Tku7boj5zljZUiLAoJIuaxguWSjCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJlcywgdGQsIGluZGV4KSB7CgkJcmVzW2luZGV4XSA9IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgKyAocmVzW2luZGV4XXx8MCk7Cgl9LAoJIuacgOWkpyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJlcywgdGQsIGluZGV4KSB7CgkJCShyZXNbaW5kZXhdID09PSB1bmRlZmluZWQgfHwgcGFyc2VJbnQodGQuaW5uZXJUZXh0KSA+IHBhcnNlSW50KHJlc1tpbmRleF0pKSAmJiAocmVzW2luZGV4XSA9IHBhcnNlSW50KHRkLmlubmVyVGV4dCkpCgl9LAoJIuacgOWwjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJlcywgdGQsIGluZGV4KSB7CgkJKHJlc1tpbmRleF0gPT09IHVuZGVmaW5lZCB8fCBwYXJzZUludCh0ZC5pbm5lclRleHQpIDwgcGFyc2VJbnQocmVzW2luZGV4XSkpICYmIChyZXNbaW5kZXhdID0gcGFyc2VJbnQodGQuaW5uZXJUZXh0KSkKCX0sCgki5bmz5Z2HIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcmVzLCB0ZCwgbmNvbCwgY29scywgcm93cywgbnJvdykgewoJCXJlc1tuY29sXSA9IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgKyAocmVzW25jb2xdfHwwKTsKCQlpZiAobnJvdyA9PSByb3dzLmxlbmd0aCAtIDEpIHsKCQkJcmVzW25jb2xdID0gcmVzW25jb2xdIC8gbnJvdwoJCX0KCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogW2ljZS5TQVZFLCBbaWNlLk1PREUsICLlhajpgIkiLCAi5Z2X6YCJIiwgIuWPjemAiSIsICLlpJrpgIkiLCAi5ouW5YqoIiwgIue8lui+kSJdLCBbaWNlLkVYRUMsICLmsYLlkowiLCAi5pyA5aSnIiwgIuacgOWwjyIsICLlubPlnYciXV0sCglfY29tcHV0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBtdWwgPSBodG1sLlRSICsgKGNhbi5BY3Rpb24oaWNlLk1PREUpID09ICLlhajpgIkiPyAiIjogIi5zZWxlY3QiKQoJCXZhciBtZXRob2QgPSBjYW4ub25maWd1cmVbY2FuLkFjdGlvbihpY2UuRVhFQyldLCByZXMgPSB7fQoKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgbXVsLCBmdW5jdGlvbih0ciwgbnJvdywgcm93cykgewoJCQkobXVsICE9IGh0bWwuVFIgfHwgbnJvdyA+IDApICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgbmNvbCwgY29scykgewoJCQkJbWV0aG9kICYmIG1ldGhvZChldmVudCwgY2FuLCByZXMsIHRkLCBuY29sLCBjb2xzLCByb3dzLCBucm93KQoJCQl9KQoJCX0pCgkJY2FuLmNvcmUuSXRlbShyZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgY2FuLlN0YXR1cyhjYW4uX21zZy5hcHBlbmRba2V5XSwgdmFsdWV8fCIiKSB9KQoJfSwKCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBbY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5vbmV4cG9ydC5maWxlKGNhbildKSB9LAoJZXhlYzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKSB9LAoKCV9mb3JlYWNoOiBmdW5jdGlvbihjYW4sIGJ1dHRvbiwgY2IpIHsKCQlidXR0b24gJiYgY2FuLkFjdGlvbihpY2UuTU9ERSwgYnV0dG9uKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNiKGl0ZW0pCgkJfSkKCX0sCgoJIuWFqOmAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5lZGl0YWJsZShjYW4sIGl0ZW0sIGZhbHNlKQoJCQljYW4ucGFnZS5kcmFnZ2FibGUoY2FuLCBpdGVtLCBmYWxzZSkKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBudWxsLCBpdGVtLm9uY2xpY2sgPSBudWxsCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCkKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sICJvdmVyIikKCQl9KQoJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJfSwKCSLlnZfpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCkKCQkJCWNhbi5vbmFjdGlvbi5fY29tcHV0ZShldmVudCwgY2FuKQoJCQl9CgkJfSkKCX0sCgki5Y+N6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCQkJfQoJCX0pCgl9LAoJIuWkmumAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkge30KCQkJaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCQkJfQoJCX0pCgl9LAoJIuaLluWKqCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvblsi5YWo6YCJIl0oZXZlbnQsIGNhbiwgYnV0dG9uKQoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sICIiLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLmRyYWdnYWJsZShjYW4sIGl0ZW0sIHRydWUpCgkJCWl0ZW0ub25kcmFnc3RhcnQgPSBmdW5jdGlvbihldmVudCkgeyBjYW4uZHJhZyA9IGl0ZW0gfQoJCQlpdGVtLm9uZHJhZ292ZXIgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgIm92ZXIiKX0KCQkJaXRlbS5vbmRyYWdsZWF2ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCAib3ZlciIpIH0KCQkJaXRlbS5vbmRyb3AgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UQUJMRSwgZnVuY3Rpb24odGFibGUpIHsKCQkJCQl0YWJsZS5pbnNlcnRCZWZvcmUoY2FuLmRyYWcsIGl0ZW0pCgkJCQl9KQoJCQl9CgkJfSkKCX0sCgki57yW6L6RIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLmVkaXRhYmxlKGNhbiwgaXRlbSwgdHJ1ZSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnu4Tku7bor6bmg4UiLCBsaXN0OiBbIuWkjeWItiIsICLliKDpmaQiXSwKCSLlpI3liLYiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJdmFyIGVuZCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi50YWJsZSwgW3t0eXBlOiBodG1sLlRSLCBsaXN0OiBjYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5KSB7CgkJCXJldHVybiB7dGV4dDogW2xpbmVba2V5XSwgaHRtbC5URF19CgkJfSl9XSkudHI7IGNhbi50YWJsZS5pbnNlcnRCZWZvcmUoZW5kLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSkKCX0sCgki5Yig6ZmkIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCglmaWxlOiBmdW5jdGlvbihjYW4pIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyKSB7CgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgY2FuLnBhZ2UuS2V5cyhodG1sLlRILCBodG1sLlREKSwgZnVuY3Rpb24odGQpIHtyZXR1cm4gdGQuaW5uZXJIVE1MfSkuam9pbihpY2UuRlMpCgkJfSkuam9pbihpY2UuTkwpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25pbXBvcnQuX3Nob3coY2FuLCBtc2cpLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJY2FuLmtleWxpc3QgPSBbXSwgY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pCgoJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4uY29yZS5JdGVtKGtpdC5EaWN0KAoJCQkJaHRtbC5TVFJPS0VfV0lEVEgsIDIsIGh0bWwuU1RST0tFLCBjbGkuWUVMTE9XLCBodG1sLkZJTEwsIGNsaS5QVVJQTEUsCgkJCQlodG1sLkZPTlRfU0laRSwgMjQsIGh0bWwuRk9OVF9GQU1JTFksIGh0bWwuTU9OT1NQQUNFLAoJCQkJImdvIiwgaWNlLlJVTiwgc3ZnLlNIQVBFLCBzdmcuUkVDVCwgc3ZnLkdSSUQsIDEwLAoJCQkpLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5zdmcuVmFsdWUoa2V5LCBjYW4uQWN0aW9uKGtleSwgY2FuLnN2Zy5WYWx1ZShrZXkpfHx2YWx1ZSkpIH0pCgoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5LCBodG1sLk1JTl9IRUlHSFQsIDgwLCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCktY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQpLTUyKQoJCQl2YXIgcGlkID0gY2FuLk9wdGlvbihzdmcuUElEKXx8Y2FuLnN2Zy5WYWx1ZShzdmcuUElEKTsgcGlkICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtwaWQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGl0ZW0pLCBjYW4ub25kZXRhaWwucnVuKHt0YXJnZXQ6IGl0ZW19LCBjYW4pCgkJCX0pIHx8IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGNhbi5zdmcpCgkJfSkgCgl9LAoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5wb2ludCA9IFtdCgkJY2FuLnN2ZyA9IG51bGwsIGNhbi5ncm91cCA9IG51bGwsIGNhbi50ZW1wID0gbnVsbCwgY2FuLmN1cnJlbnQgPSBudWxsCgoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5wcm9maWxlKGNhbiksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBjYW4udWkuY29udGVudCwgbXNnLlJlc3VsdCgpfHxjYW4ub25leHBvcnQuY29udGVudChjYW4pKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlNWRywgZnVuY3Rpb24oc3ZnKSB7CgkJCWNhbi5zdmcgPSBjYW4uZ3JvdXAgPSBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgc3ZnKSwgY2FuLm9uaW1wb3J0Ll9ncm91cChjYW4sIHN2ZykuY2xpY2soKQoJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7IHN2Z1trZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgY2IoZXZlbnQsIGNhbikgfSB9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBzdmcsIG1kYi5GT1JFQUNILCBmdW5jdGlvbihpdGVtLCBpbmRleCkgeyBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSkKCQkJCWNhbi5wYWdlLnRhZ2lzKHN2Zy5HLCBpdGVtKSAmJiBpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpICYmIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBpdGVtKQoJCQl9KQoJCX0pCgl9LAoJX2dyb3VwOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB2YXIgbmFtZSA9IHRhcmdldC5Hcm91cHMoKQoJCWZ1bmN0aW9uIHNob3coZXZlbnQpIHsgY2FuLmdyb3VwID0gdGFyZ2V0CgkJCWNhbi5jb3JlLkxpc3QoW2h0bWwuU1RST0tFX1dJRFRILCBodG1sLlNUUk9LRSwgaHRtbC5GSUxMLCBodG1sLkZPTlRfU0laRV0sIGZ1bmN0aW9uKGtleSkgewoJCQkJY2FuLkFjdGlvbihrZXksIHRhcmdldC5WYWx1ZShrZXkpfHxjYW4uQWN0aW9uKGtleSkpCgkJCX0pCgkJfQoJCXJldHVybiAobmFtZSB8fCB0YXJnZXQgPT0gY2FuLnN2ZykgJiYgY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCB7bmFtZTogbmFtZXx8aHRtbC5TVkd9LCBmdW5jdGlvbihldmVudCkgewoJCQlzaG93KGV2ZW50KSwgY2FuLm9uYWN0aW9uLnNob3coZXZlbnQsIGNhbiksIGNhbi5TdGF0dXMoc3ZnLkdST1VQLCBuYW1lfHxodG1sLlNWRykKCQl9LCBmdW5jdGlvbihldmVudCkgewoJCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbiwgY2FuLm9uYWN0aW9uLm1lbnVfbGlzdCkKCQl9LCBjYW4udWkucHJvamVjdCkKCX0sCglfYmxvY2s6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdGFyZ2V0Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbihldmVudCkgewoJCQl2YXIgY2FydGUgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIG51bGwsIGZ1bmN0aW9uKGV2LCBidXR0b24sIG1ldGEpIHsKCQkJCW1ldGFbYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24pCgkJCX0pOyBjYW4ucGFnZS5zdHlsZShjYW4sIGNhcnRlLl90YXJnZXQsIHtsZWZ0OiBldmVudC5jbGllbnRYLCB0b3A6IGV2ZW50LmNsaWVudFl9KQoJCX0KCQl0YXJnZXQuVmFsID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQlyZXR1cm4gcGFyc2VJbnQodGFyZ2V0LlZhbHVlKGtleSwgdmFsdWUgPT0gdW5kZWZpbmVkPyB2YWx1ZTogcGFyc2VJbnQodmFsdWUpfHwwKSl8fDAKCQl9CgkJdGFyZ2V0LlZhbHVlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBpZiAoY2FuLmJhc2UuaXNVbmRlZmluZWQoa2V5KSkgeyByZXR1cm4gfQoJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBjYW4uY29yZS5JdGVtKGtleSwgdGFyZ2V0LlZhbHVlKTsgcmV0dXJuIH0KCgkJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQkJa2V5ID0gZmlndXJlICYmIGZpZ3VyZS5kYXRhICYmIGZpZ3VyZS5kYXRhLnNpemUgJiYgZmlndXJlLmRhdGEuc2l6ZVtrZXldIHx8IGtleQoJCQlpZiAoZmlndXJlICYmIGZpZ3VyZS5kYXRhICYmIGNhbi5iYXNlLmlzRnVuYyhmaWd1cmUuZGF0YVtrZXldKSkgewoJCQkJcmV0dXJuIGZpZ3VyZS5kYXRhW2tleV0oY2FuLCB2YWx1ZSwga2V5LCB0YXJnZXQpCgkJCX0KCgkJCWlmIChrZXkgPT0gaHRtbC5JTk5FUikgewoJCQkJcmV0dXJuIHZhbHVlICE9IHVuZGVmaW5lZCAmJiAodGFyZ2V0LmlubmVySFRNTCA9IHZhbHVlKSwgdGFyZ2V0LmlubmVySFRNTAoJCQl9CgkJCWlmIChrZXkgPT0gaWNlLlNISVApIHsKCQkJCXJldHVybiB2YWx1ZSAhPSB1bmRlZmluZWQgJiYgdGFyZ2V0LnNldEF0dHJpYnV0ZShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSksIGNhbi5iYXNlLk9iaih0YXJnZXQuZ2V0QXR0cmlidXRlKGtleSksIFtdKQoJCQl9CgkJCXJldHVybiB2YWx1ZSAhPSB1bmRlZmluZWQgJiYgdGFyZ2V0LnNldEF0dHJpYnV0ZShrZXksIHZhbHVlKSwgdGFyZ2V0LmdldEF0dHJpYnV0ZShrZXl8fGh0bWwuQ0xBU1MpCgkJCQl8fCB0YXJnZXRba2V5XSYmdGFyZ2V0W2tleV0uYmFzZVZhbCYmdGFyZ2V0W2tleV0uYmFzZVZhbC52YWx1ZSB8fCB0YXJnZXRba2V5XSYmdGFyZ2V0W2tleV0uYmFzZVZhbCB8fCAiIgoJCX0KCQl0YXJnZXQuR3JvdXAgPSBmdW5jdGlvbigpIHsgdmFyIGl0ZW0gPSB0YXJnZXQKCQkJd2hpbGUgKGl0ZW0pIHsgaWYgKFtodG1sLlNWRywgc3ZnLkddLmluZGV4T2YoaXRlbS50YWdOYW1lKSA+IC0xKSB7IHJldHVybiBpdGVtIH07IGl0ZW0gPSBpdGVtLnBhcmVudE5vZGUgfQoJCQlyZXR1cm4gY2FuLnN2ZwoJCX0KCQl0YXJnZXQuR3JvdXBzID0gZnVuY3Rpb24oKSB7IHZhciBpdGVtID0gdGFyZ2V0CgkJCXZhciBsaXN0ID0gW107IHdoaWxlIChpdGVtICYmIGl0ZW0udGFnTmFtZSAhPSBodG1sLlNWRykgewoJCQkJaXRlbS50YWdOYW1lID09IHN2Zy5HICYmIGl0ZW0uVmFsdWUoaHRtbC5DTEFTUykgJiYgbGlzdC5wdXNoKGl0ZW0uVmFsdWUoaHRtbC5DTEFTUykpLCBpdGVtID0gaXRlbS5wYXJlbnROb2RlCgkJCX0KCQkJcmV0dXJuIGxpc3QucmV2ZXJzZSgpLmpvaW4oaWNlLlBUKQoJCX0KCQlyZXR1cm4gdGFyZ2V0Cgl9LAoJX3Byb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsaXN0KSB7IGNhbi5PcHRpb24oc3ZnLlBJRCwgY2FuLm9uZmlndXJlLl9waWQoY2FuLCB0YXJnZXQpKQoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldC5WYWx1ZShzdmcuUElEKSB9LCBjYW4udWkucHJvZmlsZSkpIHsgcmV0dXJuIH0KCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLnByb2ZpbGUsIFtodG1sLkFDVElPTiwgaHRtbC5PVVRQVVRdKQoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLm9uZGV0YWlsLmxpc3QsIHVpLmFjdGlvbiwge19lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCQljYW4ub25kZXRhaWxbYnV0dG9uXSh7dGFyZ2V0OiB0YXJnZXR9LCBjYW4sIGJ1dHRvbikKCQl9fSkKCgkJdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCWxpc3QgPSAobGlzdHx8W10pLmNvbmNhdChmaWd1cmUuZGF0YS5jb3B5LCBbc3ZnLlgsIHN2Zy5ZLCBtZGIuSU5ERVgsIGN0eC5BUkdTXSkKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5vdXRwdXQsIFt7dHlwZTogaHRtbC5UQUJMRSwgY2xhc3NOYW1lOiBodG1sLkNPTlRFTlQsIGxpc3Q6IFsKCQkJe3RoOiBbbWRiLktFWSwgbWRiLlZBTFVFXX0sIHt0ZDogW21kYi5UWVBFLCB0YXJnZXQudGFnTmFtZV19LCB7dGQ6IFtzdmcuUElELCB0YXJnZXQuVmFsdWUoc3ZnLlBJRCldfSwKCQldLmNvbmNhdChjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGtleSkgewoJCQlyZXR1cm4ga2V5ID0gZmlndXJlLmRhdGEuc2l6ZVtrZXldfHxrZXksIHt0ZDogW2tleSwgdGFyZ2V0LlZhbHVlKGtleSldLCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9ubW90aW9uLm1vZGlmeShjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBvbGQpIHsKCQkJCQl0YXJnZXQuVmFsdWUoa2V5LCB2YWx1ZSksIGNhbi5vbmZpZ3VyZS5fbW92ZShjYW4sIHRhcmdldCkKCQkJCX0pCgkJCX19CgkJfSkpIH1dKQoJfSwKCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHZhbHVlLCBncm91cCkgeyAvLyB7c2hhcGUsIHBvaW50LCBzdHlsZSwgX2luaXR9CgkJdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZVt2YWx1ZS5zaGFwZV0sIGRhdGEgPSBmaWd1cmUuZHJhdyhldmVudCwgY2FuLCB2YWx1ZS5wb2ludCwgdmFsdWUuc3R5bGUpCgkJY2FuLmNvcmUuSXRlbSh2YWx1ZS5zdHlsZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBkYXRhW2tleV0gPSB2YWx1ZSB9KQoJCXZhciBpdGVtID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgZmlndXJlLmRhdGEubmFtZXx8dmFsdWUuc2hhcGUsIGRhdGEsIGdyb3VwfHxjYW4uc3ZnfHxjYW4uZ3JvdXApCgkJY2FuLmNvcmUuSXRlbUNCKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IGl0ZW1ba2V5XSA9IGNiIH0pCgkJLy8gcmV0dXJuIGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSwgY2FuLm9uZmlndXJlLl9waWQoY2FuLCBpdGVtKSwgdmFsdWUuX2luaXQgJiYgdmFsdWUuX2luaXQoaXRlbSksIGl0ZW0KCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pLCB2YWx1ZS5faW5pdCAmJiB2YWx1ZS5faW5pdChpdGVtKSwgaXRlbQoJfSwKCWdyb3VwOiBmdW5jdGlvbihjYW4sIG5hbWUsIHZhbHVlLCBncm91cCkgeyBncm91cCA9IGdyb3VwfHxjYW4uc3ZnfHxjYW4uZ3JvdXAKCQl2YXIgZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCBzdmcuRyk7IGdyb3VwLmFwcGVuZChnKQoJCWNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBnKSwgZy5WYWx1ZShodG1sLkNMQVNTLCBuYW1lKSwgY2FuLm9uaW1wb3J0Ll9ncm91cChjYW4sIGcpLmNsaWNrKCkKCQlyZXR1cm4gdmFsdWUgJiYgZy5WYWx1ZSh2YWx1ZSksIGcKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi5Zu+5b2i57uY5Yi2IiwKCV9nZXQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbmFtZSkgewoJCXJldHVybiBjYW4ub25maWd1cmVbbmFtZV18fGNhbi5vbmZpZ3VyZVtpdGVtLmdldEF0dHJpYnV0ZShtZGIuTkFNRSldfHxjYW4ub25maWd1cmVbaXRlbS50YWdOYW1lXQoJfSwKCV9waWQ6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyBpZiAoaXRlbS5WYWx1ZShzdmcuUElEKSkgeyByZXR1cm4gaXRlbS5WYWx1ZShzdmcuUElEKSB9CgkJdmFyIHBpZCA9ICJwIitjYW4uc3ZnLlZhbChtZGIuQ09VTlQsIGNhbi5zdmcuVmFsKG1kYi5DT1VOVCkrMSkKCQlpdGVtLlZhbHVlKGh0bWwuQ0xBU1MsIChpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpK2ljZS5TUCtpdGVtLlZhbHVlKHN2Zy5QSUQsIHBpZCkpLnRyaW0oKSkKCQlyZXR1cm4gcGlkCgl9LAoJX3B1c2g6IGZ1bmN0aW9uKGNhbiwgdHlwZSwgZGF0YSwgdGFyZ2V0KSB7CgkJdmFyIGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiwgdHlwZSkKCQl0YXJnZXQuYXBwZW5kQ2hpbGQoY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pKSwgaXRlbS5WYWx1ZShkYXRhKQoJCXJldHVybiBpdGVtCgl9LAoJX2NvcHk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCXZhciBkYXRhID0ge30sIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KSwgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemUKCQljYW4uY29yZS5MaXN0KGZpZ3VyZS5kYXRhLmNvcHksIGZ1bmN0aW9uKGl0ZW0pIHsgZGF0YVtpdGVtXSA9IHRhcmdldC5WYWx1ZShpdGVtKSB9KQoJCWRhdGFbc2l6ZS54fHxzdmcuWF0gPSB0YXJnZXQuVmFsKHNpemUueHx8c3ZnLlgpKzEwCgkJZGF0YVtzaXplLnl8fHN2Zy5ZXSA9IHRhcmdldC5WYWwoc2l6ZS55fHxzdmcuWSkrMTAKCQlyZXR1cm4gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgdGFyZ2V0LnRhZ05hbWUsIGRhdGEsIGNhbi5ncm91cHx8Y2FuLnN2ZykKCX0sCglfbW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGxpc3QpIHsKCQljYW4uY29yZS5MaXN0KGxpc3R8fHRhcmdldC5WYWx1ZShpY2UuU0hJUCksIGZ1bmN0aW9uKHNoaXApIHsKCQkJc2hpcC50YXJnZXQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrc2hpcC5waWQpWzBdCgkJCXZhciBwID0gY2FuLm9uZXhwb3J0LmFuY2hvcih0YXJnZXQsIHNoaXAuYW5jaG9yLCB7fSkgCgkJCWlmIChzaGlwLndoaWNoID09IDEpIHsKCQkJCXNoaXAudGFyZ2V0LlZhbChzdmcuWDEsIHAueCksIHNoaXAudGFyZ2V0LlZhbChzdmcuWTEsIHAueSkKCQkJfSBlbHNlIGlmIChzaGlwLndoaWNoID09IDIpIHsKCQkJCXNoaXAudGFyZ2V0LlZhbChzdmcuWDIsIHAueCksIHNoaXAudGFyZ2V0LlZhbChzdmcuWTIsIHAueSkKCQkJfQoJCX0pCgl9LAoKCXN2ZzogeyAvLyA8c3ZnIGhlaWdodD0iMjAwIiB3aWR0aD0iNjAwIiBjb3VudD0iMCIgZ3JpZD0iMTAiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJ5ZWxsb3ciIGZpbGw9InB1cnBsZSIgZm9udC1zaXplPSIyNCIvPgoJCWRhdGE6IHtzaXplOiB7fSwgY29weTogW119LAoJCXNob3c6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIHsgcmV0dXJuIGNhbi5vbmV4cG9ydC5fc2l6ZShjYW4sIHRhcmdldCwgZmlndXJlKSB9Cgl9LAoJdGV4dDogeyAvLyA8dGV4dCB4PSI2MCIgeT0iMTAiPmhpPHRleHQ+CgkJZGF0YToge3BvaW50czogMSwgc2l6ZToge30sIGNvcHk6IFtodG1sLklOTkVSXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQsIHN0eWxlKSB7IGlmIChwb2ludC5sZW5ndGggPCAxIHx8IGV2ZW50LnR5cGUgPT0gIm1vdXNlbW92ZSIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHRleHQgPSBzdHlsZSYmc3R5bGUuaW5uZXJ8fGNhbi51c2VyLnByb21wdChtZGIuVEVYVCkKCQkJcmV0dXJuIHRleHQ/IHt4OiBwMC54LCB5OiBwMC55LCBpbm5lcjogdGV4dH06IG51bGwKCQl9LAoJCXNob3c6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIHsgcmV0dXJuIGNhbi5vbmV4cG9ydC5fcG9zaXRpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJfSwKCWNpcmNsZTogeyAvLyA8Y2lyY2xlIHI9IjIwIiBjeD0iMjUiIGN5PSI3NSIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHNpemU6IHtoZWlnaHQ6IHN2Zy5SLCB3aWR0aDogc3ZnLlIsIHg6IHN2Zy5DWCwgeTogc3ZnLkNZfSwgY29weTogW3N2Zy5SXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0KCQkJcmV0dXJuIHtyOiBwYXJzZUludChNYXRoLnNxcnQoTWF0aC5wb3cocDAueC1wMS54LCAyKStNYXRoLnBvdyhwMC55LXAxLnksIDIpKSksIGN4OiBwMC54LCBjeTogcDAueX0KCQl9LAoJfSwKCWVsbGlwc2U6IHsgLy8gPGVsbGlwc2Ugcnk9IjUiIHJ4PSIyMCIgY3g9Ijc1IiBjeT0iNzUiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCBzaXplOiB7aGVpZ2h0OiBzdmcuUlksIHdpZHRoOiBzdmcuUlgsIHg6IHN2Zy5DWCwgeTogc3ZnLkNZfSwgY29weTogW3N2Zy5SWSwgc3ZnLlJYXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0KCQkJcmV0dXJuIHtyeTogTWF0aC5hYnMocDAueSAtIHAxLnkpLCByeDogTWF0aC5hYnMocDAueCAtIHAxLngpLCBjeDogcDAueCwgY3k6IHAwLnl9CgkJfSwKCX0sCglyZWN0OiB7IC8vIDxyZWN0IGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgcnk9IjEwIiByeD0iMTAiIHg9IjYwIiB5PSIxMCIvPgoJCWRhdGE6IHtwb2ludHM6IDIsIHJ5OiA0LCByeDogNCwgc2l6ZToge30sIGNvcHk6IFtodG1sLkhFSUdIVCwgaHRtbC5XSURUSCwgc3ZnLlJZLCBzdmcuUlhdfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgcDEgPSBwb2ludFsxXQoJCQlyZXR1cm4gewoJCQkJaGVpZ2h0OiBNYXRoLmFicyhwMC55LXAxLnkpLCB3aWR0aDogTWF0aC5hYnMocDAueC1wMS54KSwgcnk6IHRoaXMuZGF0YS5yeSwgcng6IHRoaXMuZGF0YS5yeCwKCQkJCXg6IHAwLnggPiBwMS54PyBwMS54OiBwMC54LCB5OiBwMC55ID4gcDEueT8gcDEueTogcDAueSwKCQkJfQoJCX0sCgkJdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsgcmV0dXJuIGRhdGEueCA9IHRhcmdldC5WYWwoc3ZnLlgpK3RhcmdldC5WYWwoaHRtbC5XSURUSCkvMiwgZGF0YS55ID0gdGFyZ2V0LlZhbChzdmcuWSkrdGFyZ2V0LlZhbChodG1sLkhFSUdIVCkvMiwgZGF0YSB9LAoJfSwKCWxpbmU6IHsgLy8gPGxpbmUgeDE9IjEwIiB5MT0iNTAiIHgyPSIxMTAiIHkyPSIxNTAiIHh4PSIxMDAiIHl5PSIxMDAiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCBzaXplOiB7eDogc3ZnLlgxLCB5OiBzdmcuWTF9LCBjb3B5OiBbc3ZnLlgxLCBzdmcuWTEsIHN2Zy5YMiwgc3ZnLlkyXX0sCgkJZ3JpZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQlpZiAodGFyZ2V0ID09IGNhbi5zdmcpIHsgcmV0dXJuIH0KCQkJdmFyIHAgPSBwb2ludFtwb2ludC5sZW5ndGgtMV0sIHBvcyA9IGNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgdGFyZ2V0KQoJCQl0YXJnZXQuVmFsICYmIGNhbi5vbmV4cG9ydC5hbmNob3IodGFyZ2V0LCBwb3MsIHApCgkJCXJldHVybiBwLnRhcmdldCA9IHRhcmdldCwgcC5hbmNob3IgPSBwb3MsIHBvaW50CgkJfSwKCQlkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoJCQl2YXIgcDAgPSBwb2ludFswXSwgcDEgPSBwb2ludFsxXSwgc2hpcCA9IFtdCgkJCXAwLnRhcmdldCAmJiBwMC50YXJnZXQuVmFsdWUgJiYgc2hpcC5wdXNoKHtwaWQ6IHAwLnRhcmdldC5WYWx1ZShzdmcuUElEKX0pCgkJCXAxLnRhcmdldCAmJiBwMS50YXJnZXQuVmFsdWUgJiYgc2hpcC5wdXNoKHtwaWQ6IHAxLnRhcmdldC5WYWx1ZShzdmcuUElEKX0pCgkJCXJldHVybiB7eDE6IHAwLngsIHkxOiBwMC55LCB4MjogcDEueCwgeTI6IHAxLnksIHNoaXA6IHNoaXAubGVuZ3RoID4gMD8gc2hpcDogdW5kZWZpbmVkfQoJCX0sCgkJdGV4dDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGRhdGEpIHsgcmV0dXJuIGRhdGEueCA9ICh0YXJnZXQuVmFsKHN2Zy5YMSkrdGFyZ2V0LlZhbChzdmcuWDIpKS8yLCBkYXRhLnkgPSAodGFyZ2V0LlZhbChzdmcuWTEpK3RhcmdldC5WYWwoc3ZnLlkyKSkvMiwgZGF0YSB9LAoJCXNob3c6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIHsgcmV0dXJuICI8KCIrKHRhcmdldC5WYWwoc3ZnLlkyKS10YXJnZXQuVmFsKHN2Zy5ZMSkpK2ljZS5GUysodGFyZ2V0LlZhbChzdmcuWDIpLXRhcmdldC5WYWwoc3ZnLlgxKSkrIikiK2Nhbi5vbmV4cG9ydC5fcG9zaXRpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfSwKCX0sCglibG9jazogeyAvLyA8cmVjdCBoZWlnaHQ9IjMwIiB3aWR0aD0iMzAiIHJ5PSIxMCIgcng9IjEwIiB4PSI2MCIgeT0iMTAiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCByeTogNCwgcng6IDQsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEgsIHN2Zy5SWSwgc3ZnLlJYXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdGhpcy5fdGVtcCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCB0aGlzLl90ZW1wKSAmJiBkZWxldGUodGhpcy5fdGVtcCkKCQkJdGhpcy5fdGVtcCA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIHN2Zy5HLCB7fSwgY2FuLmdyb3VwfHxjYW4uc3ZnKQoKCQkJdmFyIHJlY3QgPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBzdmcuUkVDVCwgY2FuLm9uZmlndXJlLnJlY3QuZHJhdyhldmVudCwgY2FuLCBwb2ludCksIHRoaXMuX3RlbXApCgkJCWlmIChldmVudC50eXBlID09IGh0bWwuQ0xJQ0spIHsKCQkJCWNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgcmVjdCksIGRlbGV0ZSh0aGlzLl90ZW1wKQoJCQl9CgkJfSwKCQl0ZXh0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgeyBjYW4ub25maWd1cmUucmVjdC50ZXh0KGNhbiwgZGF0YSwgdGFyZ2V0KSB9LAoJfSwKfSwgW10pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwKCV9tb2RlOiB7CgkJbm9ybWFsOiB7CgkJCWdyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oImdvIiwgInJ1biIpIH0sCgkJCWdhOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oImdvIiwgImF1dG8iKSB9LAoJCQlnbTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJtYW51YWwiKSB9LAoKCQkJYWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigibW9kZSIsICJkcmF3IikgfSwKCQkJYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigibW9kZSIsICJyZXNpemUiKSB9LAoKCQkJc3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5URVhUKSB9LAoJCQlzcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLlJFQ1QpIH0sCgkJCXNsOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuTElORSkgfSwKCQkJc2M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5DSVJDTEUpIH0sCgkJCXNlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuRUxMSVBTRSkgfSwKCgkJCWNyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5SRUQpIH0sCgkJCWNiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5CTFVFKSB9LAoJCQljZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuR1JFRU4pIH0sCgkJCWN5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5ZRUxMT1cpIH0sCgkJCWNwOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5QVVJQTEUpIH0sCgkJCWNjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5DWUFOKSB9LAoJCQljaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQkxBQ0spIH0sCgkJCWN3OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5TVFJPS0UsIGNsaS5XSElURSkgfSwKCgkJCWZyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuUkVEKSB9LAoJCQlmYjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkJMVUUpIH0sCgkJCWZnOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuR1JFRU4pIH0sCgkJCWZ5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuWUVMTE9XKSB9LAoJCQlmcDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLlBVUlBMRSkgfSwKCQkJZmM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5DWUFOKSB9LAoJCQlmaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkJMQUNLKSB9LAoJCQlmdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLldISVRFKSB9LAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2h0bWwuU1RST0tFX1dJRFRILCAxLCAyLCAzLCA0LCA1XSwKCQlbaHRtbC5TVFJPS0UsIGNsaS5SRUQsIGNsaS5ZRUxMT1csIGNsaS5HUkVFTiwgY2xpLkNZQU4sIGNsaS5CTFVFLCBjbGkuUFVSUExFLCBjbGkuQkxBQ0ssIGNsaS5XSElURV0sCgkJW2h0bWwuRklMTCwgY2xpLlJFRCwgY2xpLllFTExPVywgY2xpLkdSRUVOLCBjbGkuQ1lBTiwgY2xpLkJMVUUsIGNsaS5QVVJQTEUsIGNsaS5CTEFDSywgY2xpLldISVRFLCAiIzAwMDAiXSwKCQlbaHRtbC5GT05UX1NJWkUsIDEyLCAxNiwgMTgsIDI0LCAzMl0sCgoJCVsiZ28iLCBpY2UuUlVOLCBpY2UuQVVUTywgIm1hbnVhbCJdLAoJCVsibW9kZSIsICJkcmF3IiwgInJlc2l6ZSJdLAoJCVtzdmcuU0hBUEUsIHN2Zy5URVhULCBzdmcuQ0lSQ0xFLCBzdmcuRUxMSVBTRSwgc3ZnLlJFQ1QsIHN2Zy5MSU5FLCBzdmcuQkxPQ0tdLAoJCVtzdmcuR1JJRCwgMSwgMiwgMywgNCwgNSwgMTAsIDIwXSwKCV0sIG1lbnVfbGlzdDogW2ljZS5ISURFLCBpY2UuU0hPVywgbWRiLkNSRUFURSwgY2xpLkNMRUFSLCBtZGIuUkVNT1ZFXSwKCV9jaGFuZ2U6IGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4uZ3JvdXAuVmFsdWUoa2V5LCB2YWx1ZSkgfSwKCSJzdHJva2Utd2lkdGgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwga2V5LCB2YWx1ZSkgfSwKCXN0cm9rZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCglmaWxsOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwga2V5LCB2YWx1ZSkgfSwKCSJmb250LXNpemUiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwga2V5LCB2YWx1ZSkgfSwKCglnbzogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCgltb2RlOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSkgfSwKCXNoYXBlOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSkgfSwKCgllZGl0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oImdvIiwgY2FuLkFjdGlvbigiZ28iKSA9PSBpY2UuUlVOPyBpY2UuQVVUTzogaWNlLlJVTikgfSwKCXNhdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHtjb250ZW50OiBjYW4ub25leHBvcnQuY29udGVudChjYW4sIGNhbi5zdmcpfSksIGJ1dHRvbiwgW2Nhbi5PcHRpb24obmZzLlBBVEgpXSkKCX0sCgoJcHJvamVjdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QpIH0sCglwcm9maWxlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSkgfSwKCXNob3c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnNob3coY2FuLCB7aW50ZXJ2YWw6IDEwMCwgbGVuZ3RoOiAxMH0sIG51bGwsIGNhbi5ncm91cCkgfSwKCWhpZGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmhpZGUoY2FuLCB7aW50ZXJ2YWw6IDEwMCwgbGVuZ3RoOiAxMH0sIG51bGwsIGNhbi5ncm91cCkgfSwKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtzdmcuR1JPVVBdLCBmdW5jdGlvbihsaXN0KSB7IHZhciBuYW1lID0gbGlzdFswXQoJCQl2YXIgZ3JvdXAgPSBjYW4ub25pbXBvcnQuZ3JvdXAoY2FuLCBuYW1lKQoJCQljYW4uY29yZS5MaXN0KFtodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihuYW1lKSB7CgkJCQlncm91cC5WYWx1ZShuYW1lLCBjYW4uQWN0aW9uKG5hbWUpKQoJCQl9KQoJCX0pCgl9LAoJcmVtb3ZlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChjYW4uZ3JvdXAgPT0gY2FuLnN2ZykgeyByZXR1cm4gfQoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5ncm91cCkKCX0sCgljbGVhcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5ncm91cCksIGNhbi5wb2ludCA9IFtdLCBkZWxldGUoY2FuLnRlbXApCgl9LAoKCV9tb2RlOiB7CgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsKCQkJdmFyIHNoYXBlID0gY2FuLkFjdGlvbihzdmcuU0hBUEUpLCBmaWd1cmUgPSBjYW4ub25maWd1cmVbc2hhcGVdCgkJCWZpZ3VyZS5ncmlkICYmIGZpZ3VyZS5ncmlkKGV2ZW50LCBjYW4sIHBvaW50KQoKCQkJdmFyIGRhdGEgPSBmaWd1cmUuZHJhdyAmJiBmaWd1cmUuZHJhdyhldmVudCwgY2FuLCBwb2ludCkKCQkJdmFyIGl0ZW0gPSBkYXRhICYmIGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIGZpZ3VyZS5kYXRhLm5hbWV8fHNoYXBlLCBkYXRhLCBjYW4uZ3JvdXB8fGNhbi5zdmcpCgkJCWV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSyAmJiBwb2ludC5sZW5ndGggPT09IGZpZ3VyZS5kYXRhLnBvaW50cyAmJiAoY2FuLnBvaW50ID0gW10pIAoKCQkJaWYgKGV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSyAmJiBpdGVtKSB7CgkJCQl2YXIgcGlkID0gY2FuLm9uZmlndXJlLl9waWQoY2FuLCBpdGVtKTsgY2FuLmNvcmUuTGlzdChwb2ludCwgZnVuY3Rpb24ocCwgaSkgeyBpZiAoIXAudGFyZ2V0KSB7IHJldHVybiB9CgkJCQkJcC50YXJnZXQuVmFsdWUoaWNlLlNISVAsIHAudGFyZ2V0LlZhbHVlKGljZS5TSElQKS5jb25jYXQoW3twaWQ6IHBpZCwgd2hpY2g6IGkrMSwgYW5jaG9yOiBwLmFuY2hvcn1dKSkKCQkJCX0pCgkJCX0KCQkJcmV0dXJuIGl0ZW0KCQl9LAoJCXJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQsIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGV2ZW50LnRhcmdldAoJCQlpZiAoZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLKSB7CgkJCQlpZiAocG9pbnQubGVuZ3RoID09IDEpIHsKCQkJCQljYW4uY3VycmVudCA9IHt0YXJnZXQ6IHRhcmdldCwgYmVnaW46IGNhbi5jb3JlLkxpc3QoW3RhcmdldF0sIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGNhbi5wYWdlLnRhZ2lzKHN2Zy5HLCBpdGVtKSkgeyByZXR1cm4gfQoJCQkJCQlyZXR1cm4gewoJCQkJCQkJaGVpZ2h0OiBpdGVtLlZhbChodG1sLkhFSUdIVCksIHdpZHRoOiBpdGVtLlZhbChodG1sLldJRFRIKSwgeDogaXRlbS5WYWwoc3ZnLlgpLCB5OiBpdGVtLlZhbChzdmcuWSksCgkJCQkJCQl0YXJnZXQ6IGl0ZW0sIHNoaXA6IGNhbi5jb3JlLkxpc3QoaXRlbS5WYWx1ZShpY2UuU0hJUCksIGZ1bmN0aW9uKHNoaXApIHsKCQkJCQkJCQlyZXR1cm4gc2hpcC5waWQgJiYgKHNoaXAudGFyZ2V0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3NoaXAucGlkKVswXSkgJiYgc2hpcAoJCQkJCQkJfSkKCQkJCQkJfQoJCQkJCX0pLCBwb3M6IGNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgdGFyZ2V0KX0KCQkJCQlyZXR1cm4KCQkJCX0KCQkJCXJldHVybiBjYW4ucG9pbnQgPSBbXSwgZGVsZXRlKGNhbi5jdXJyZW50KQoJCQl9CgoJCQljYW4uY3VycmVudCAmJiBjYW4uY29yZS5MaXN0KGNhbi5jdXJyZW50LmJlZ2luLCBmdW5jdGlvbihpdGVtKSB7IHZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIGl0ZW0udGFyZ2V0KQoJCQkJY2FuLm9uZXhwb3J0LnJlc2l6ZShldmVudCwgaXRlbS50YXJnZXQsIGl0ZW0sIHBvaW50WzBdLCBwb2ludFsxXSwgY2FuLmN1cnJlbnQucG9zKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK2l0ZW0udGFyZ2V0LlZhbHVlKG1kYi5URVhUKSwgZnVuY3Rpb24odGV4dCkgewoJCQkJCXRleHQuVmFsdWUoY2FuLm9uZXhwb3J0Ll90ZXh0KGNhbiwgaXRlbS50YXJnZXQsIGZpZ3VyZSwge30pKQoJCQkJfSksIGNhbi5vbmZpZ3VyZS5fbW92ZShjYW4sIGl0ZW0udGFyZ2V0LCBpdGVtLnNoaXApCgkJCX0pCgkJfSwKCQlydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgZXZlbnQudGFyZ2V0KSB9LAoJfSwKCV9hdXRvOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWlmIChjYW4ucG9pbnQubGVuZ3RoID4gMCkgeyByZXR1cm4gfQoJCWlmICh0YXJnZXQudGFnTmFtZSA9PSBtZGIuVEVYVCkgeyByZXR1cm4gfQoKCQl2YXIgcG9zID0gY2FuLm9uZXhwb3J0LmN1cnNvcihldmVudCwgY2FuLCBldmVudC50YXJnZXQpCgkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7CgkJCWlmIChwb3MgPT0gNSkgewoJCQkJY2FuLkFjdGlvbihpY2UuTU9ERSwgImRyYXciKSwgY2FuLkFjdGlvbihzdmcuU0hBUEUsIGh0bWwuQkxPQ0spCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwge2N1cnNvcjogImNyb3NzaGFpciJ9KQoJCQl9IGVsc2UgewoJCQkJY2FuLkFjdGlvbihpY2UuTU9ERSwgInJlc2l6ZSIpCgkJCX0KCQl9IGVsc2UgewoJCQlzd2l0Y2ggKHBvcykgewoJCQkJY2FzZSA1OgoJCQkJY2FzZSA5OiBjYW4uQWN0aW9uKGljZS5NT0RFLCAicmVzaXplIik7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4uQWN0aW9uKGljZS5NT0RFLCAiZHJhdyIpLCBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkxJTkUpCgkJCX0KCQl9Cgl9LAoJX2ZpZ3VyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnRzLCB0YXJnZXQpIHsKCQljYW4udGVtcCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4udGVtcCkgJiYgZGVsZXRlKGNhbi50ZW1wKQoJCWNhbi50ZW1wID0gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbi5fbW9kZSwgY2FuLkFjdGlvbihpY2UuTU9ERSldLCBbZXZlbnQsIGNhbiwgcG9pbnRzLCB0YXJnZXRdKQoJCWNhbi5wb2ludC5sZW5ndGggPT0gMCAmJiBkZWxldGUoY2FuLnRlbXApCgl9LAoKCW9ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmV4cG9ydC5fc2hvdyhjYW4sIGV2ZW50LnRhcmdldCkgfSwKCW9ubW91c2Vtb3ZlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBwb2ludCA9IGNhbi5vbmV4cG9ydC5fcG9pbnQoZXZlbnQsIGNhbikKCQlpZiAoY2FuLkFjdGlvbigiZ28iKSA9PSBpY2UuUlVOKSB7IHJldHVybiB9CgkJY2FuLm9uZXhwb3J0LmN1cnNvcihldmVudCwgY2FuLCBldmVudC50YXJnZXQpCgkJaWYgKGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLkFVVE8pIHsgY2FuLm9uYWN0aW9uLl9hdXRvKGNhbiwgZXZlbnQudGFyZ2V0KSB9CgkJY2FuLm9uYWN0aW9uLl9maWd1cmUoZXZlbnQsIGNhbiwgY2FuLnBvaW50LmNvbmNhdChwb2ludCkpCgl9LAoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgcG9pbnQgPSBjYW4ub25leHBvcnQuX3BvaW50KGV2ZW50LCBjYW4pCgkJaWYgKGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTikgeyBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBldmVudC50YXJnZXQpCgkJCXJldHVybiBldmVudC5zaGlmdEtleT8gY2FuLm9uYWN0aW9uLl9tb2RlLnJ1bihldmVudCwgY2FuKTogY2FuLm9uZGV0YWlsLnJ1bihldmVudCwgY2FuKQoJCX0KCQljYW4ub25hY3Rpb24uX2ZpZ3VyZShldmVudCwgY2FuLCBjYW4ucG9pbnQgPSBjYW4ucG9pbnQuY29uY2F0KHBvaW50KSkKCX0sCglvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5sYWJlbChldmVudCwgY2FuKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIue7hOS7tuivpuaDhSIsIGxpc3Q6IFtjbGkuU1RBUlQsIGljZS5SVU4sIGljZS5DT1BZLCBodG1sLkxBQkVMLCBtZGIuTU9ESUZZLCAidG9pbWFnZSIsIG1kYi5SRU1PVkVdLAoJc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCXZhciBsaXN0ID0gW3RhcmdldF0sIGRpY3QgPSB7fQoJCWZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykgeyB2YXIgc2hpcCA9IGxpc3RbaV0uVmFsdWUoInNoaXAiKQoJCQlmb3IgKHZhciBqID0gMDsgaiA8IHNoaXAubGVuZ3RoOyBqKyspIHsgdmFyIHBpZCA9IHNoaXBbal0ucGlkCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrcGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJdmFyIHBpZCA9IGl0ZW0uVmFsdWUoInNoaXAiKVsxXS5waWQKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrcGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCSFkaWN0W3BpZF0gJiYgbGlzdC5wdXNoKGl0ZW0pLCBkaWN0W3BpZF0gPSB0cnVlCgkJCQkJfSkKCQkJCX0pCgkJCX0KCQl9CgkJY2FuLmNvcmUuTmV4dChsaXN0LCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25tb3Rpb24uc2hvdyhjYW4sIHtpbnRlcnZhbDogMzAwLCBsZW5ndGg6IDEwfSwgbnVsbCwgaXRlbSkgCgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgaXRlbS5WYWx1ZSgiaW5kZXgiKSkKCQkJY2FuLm9uZGV0YWlsLnJ1bih7dGFyZ2V0OiBpdGVtfSwgY2FuKSwgbmV4dCgpCgkJfSkgfSkKCX0sCglydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCWlmICghdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpKSB7IGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgdGFyZ2V0KSB9CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpIH0sIGNhbi51aS5kaXNwbGF5KSkgeyByZXR1cm4gfQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuZGlzcGxheSksIGNhbi5zdmcuVmFsdWUoc3ZnLlBJRCwgdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpKQoJCXZhciBpbmRleCA9IHRhcmdldC5WYWx1ZShtZGIuSU5ERVgpOyBpbmRleCAmJiBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuU1RPUlksIGluZGV4OiBpbmRleCwgYXJnczogdGFyZ2V0LlZhbHVlKGN0eC5BUkdTKX0sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBpbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS1jYW4uc3ZnLlZhbChodG1sLkhFSUdIVCktNCpodG1sLkFDVElPTl9IRUlHSFQpLCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHN1Yi5fbGVnZW5kKSwgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKQoJCX0sIGNhbi51aS5kaXNwbGF5KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCkuc3BsaXQoaWNlLlBTKS5wb3AoKS5zcGxpdChpY2UuUFQpWzBdLCBjYW4uc3ZnKSB9LAoJY29weTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25maWd1cmUuX2NvcHkoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KSB9LAoJbGFiZWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCXZhciBkZWYgPSB0YXJnZXQuVmFsdWUobWRiLlRFWFQpOyBkZWYgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK2RlZiwgZnVuY3Rpb24oaXRlbSkgeyBkZWYgPSBpdGVtLlZhbHVlKGh0bWwuSU5ORVIpIH0pCgoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogaHRtbC5MQUJFTCwgdmFsdWU6IGRlZn1dLCBmdW5jdGlvbihsaXN0KSB7IHZhciB0ZXh0ID0gbGlzdFswXQoJCQlpZiAodGFyZ2V0LnRhZ05hbWUgPT0gaHRtbC5URVhUKSB7IHJldHVybiB0YXJnZXQuaW5uZXJIVE1MID0gdGV4dCB9CgkJCWlmIChkZWYgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK2RlZiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLlZhbHVlKGh0bWwuSU5ORVIsIHRleHQpIH0pLmxlbmd0aCA+IDApIHsgcmV0dXJuIH0KCgkJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQkJdmFyIGRhdGEgPSBjYW4ub25leHBvcnQuX3RleHQoY2FuLCB0YXJnZXQsIGZpZ3VyZSwge2lubmVyOiB0ZXh0fSkKCQkJdmFyIGl0ZW0gPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBodG1sLlRFWFQsIGRhdGEsIHRhcmdldC5Hcm91cCgpKQoJCQl0YXJnZXQuVmFsdWUobWRiLlRFWFQsIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSkpCgkJfSkKCX0sCgltb2RpZnk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgZXZlbnQudGFyZ2V0KSB9LAoJcmVtb3ZlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQlpZiAodGFyZ2V0ID09IGNhbi5zdmcpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KHRhcmdldC5WYWx1ZShpY2UuU0hJUCksIGZ1bmN0aW9uKHZhbHVlKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCt2YWx1ZS5waWQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pCgkJCX0pCgkJfSkKCQl0YXJnZXQuVmFsdWUobWRiLlRFWFQpICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCt0YXJnZXQuVmFsdWUobWRiLlRFWFQpLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pCgkJfSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIHRhcmdldCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogW3N2Zy5HUk9VUCwgImZpZ3VyZSIsICJpbmRleCIsICJwb3MiXSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJZnVuY3Rpb24gc2hvdygpIHsgcmV0dXJuIGNhbi5vbmV4cG9ydC5fc2l6ZShjYW4sIHRhcmdldCwgZmlndXJlKStpY2UuU1ArY2FuLm9uZXhwb3J0Ll9wb3NpdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB9CgkJY2FuLlN0YXR1cygiZmlndXJlIiwgdGFyZ2V0LnRhZ05hbWUrIjoiK3RhcmdldC5WYWx1ZShzdmcuUElEKStpY2UuU1ArKGZpZ3VyZT8gKGZpZ3VyZS5zaG93fHxzaG93KShjYW4sIHRhcmdldCwgZmlndXJlKTogIiIpKQoJCWNhbi5TdGF0dXMoc3ZnLkdST1VQLCB0YXJnZXQuR3JvdXBzKCl8fGNhbi5ncm91cC5Hcm91cHMoKXx8aHRtbC5TVkcpCgkJY2FuLlN0YXR1cygiaW5kZXgiLCB0YXJnZXQuVmFsdWUoImluZGV4IikpCgl9LAoJX3NpemU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIHsgdmFyIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplfHx7fQoJCXJldHVybiAiPCgiK3RhcmdldC5WYWwoc2l6ZVtodG1sLkhFSUdIVF18fGh0bWwuSEVJR0hUKStpY2UuRlMrdGFyZ2V0LlZhbChzaXplW2h0bWwuV0lEVEhdfHxodG1sLldJRFRIKSsiKSIKCX0sCglfcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIHsgdmFyIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplfHx7fQoJCXJldHVybiAiQCgiK3RhcmdldC5WYWwoc2l6ZVtzdmcuWF18fHN2Zy5YKStpY2UuRlMrdGFyZ2V0LlZhbChzaXplW3N2Zy5ZXXx8c3ZnLlkpKyIpIgoJfSwKCV90ZXh0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlLCBkYXRhKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlpZiAoZmlndXJlLnRleHQpIHsgcmV0dXJuIGZpZ3VyZS50ZXh0KGNhbiwgZGF0YSwgdGFyZ2V0KSB9CgkJcmV0dXJuIGRhdGEueCA9IHRhcmdldC5WYWwoc2l6ZVtzdmcuWF18fHN2Zy5YKSwgZGF0YS55ID0gdGFyZ2V0LlZhbChzaXplW3N2Zy5ZXXx8c3ZnLlkpLCBkYXRhCgl9LAoJX3BvaW50OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHAgPSBjYW4uc3ZnLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJdmFyIHBvaW50ID0ge3g6IGV2ZW50LmNsaWVudFgtcC54LCB5OiBldmVudC5jbGllbnRZLXAueX0KCQlwb2ludC54ID0gcG9pbnQueCAtIHBvaW50LnggJSBwYXJzZUludChjYW4uQWN0aW9uKHN2Zy5HUklEKSkKCQlwb2ludC55ID0gcG9pbnQueSAtIHBvaW50LnkgJSBwYXJzZUludChjYW4uQWN0aW9uKHN2Zy5HUklEKSkKCQlyZXR1cm4gY2FuLlN0YXR1cygicG9zIiwgcG9pbnQueCtpY2UuRlMrcG9pbnQueSksIHBvaW50Cgl9LAoJY29udGVudDogZnVuY3Rpb24oY2FuLCBzdmcpIHsKCQlyZXR1cm4gWyc8c3ZnIHZlcnRpb249IjEuMSIgeG1sbnM9Imh0dHBzOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSInXS5jb25jYXQoCgkJCXN2Zz8gY2FuLmNvcmUuTGlzdChbaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEgsIG1kYi5DT1VOVCwgc3ZnLlBJRCwgc3ZnLkdSSUQsIGh0bWwuU1RST0tFX1dJRFRILCBodG1sLlNUUk9LRSwgaHRtbC5GSUxMLCBodG1sLkZPTlRfU0laRV0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCXJldHVybiBzdmcuVmFsdWUoaXRlbSk/IGljZS5TUCArIGl0ZW0gKyAnPSInICsgc3ZnLlZhbHVlKGl0ZW0pICsgJyInOiAiIgoJCQl9KTogWyIgaGVpZ2h0PSIrKChjYW4uQ29uZkhlaWdodCgpfHw0NTApLTUwKSsiIHdpZHRoPSIrKGNhbi5Db25mV2lkdGgoKXx8NjAwKV0pLmNvbmNhdChbJz4nLCBzdmc/IHN2Zy5pbm5lckhUTUw6ICIiLCAiPC9zdmc+Il0pLmpvaW4oIiIpCgl9LAoKCWN1cnNvcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaXRlbSwgc2hvdykgewoJCXZhciBwID0gaXRlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBxID0ge3g6IGV2ZW50LmNsaWVudFgsIHk6IGV2ZW50LmNsaWVudFl9CgoJCXZhciBwb3MgPSA1LCBtYXJnaW4gPSAyMAoJCXZhciB5ID0gKHEueS1wLnkpL3AuaGVpZ2h0CgkJaWYgKHkgPCAwLjIgJiYgcS55LXAueSA8IG1hcmdpbikgewoJCQlwb3MgLT0gMwoJCX0gZWxzZSBpZiAoeSA+IDAuOCAmJiBxLnktcC55LXAuaGVpZ2h0ID4gLW1hcmdpbikgewoJCQlwb3MgKz0gMwoJCX0KCQl2YXIgeCA9IChxLngtcC54KS9wLndpZHRoCgkJaWYgKHggPCAwLjIgJiYgcS54LXAueCA8IG1hcmdpbikgewoJCQlwb3MgLT0gMQoJCX0gZWxzZSBpZiAoeCA+IDAuOCAmJiBxLngtcC54LSBwLndpZHRoID4gLW1hcmdpbikgewoJCQlwb3MgKz0gMQoJCX0KCgkJcmV0dXJuIChzaG93fHxjYW4uc3ZnKS5zdHlsZS5jdXJzb3IgPSBbCgkJCSJudy1yZXNpemUiLCAibi1yZXNpemUiLCAibmUtcmVzaXplIiwKCQkJInctcmVzaXplIiwgIm1vdmUiLCAiZS1yZXNpemUiLAoJCQkic3ctcmVzaXplIiwgInMtcmVzaXplIiwgInNlLXJlc2l6ZSIsCgkJXVtwb3MtMV0sIHBvcwoJfSwKCWFuY2hvcjogZnVuY3Rpb24odGFyZ2V0LCBwb3MsIHBvaW50KSB7CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDI6CgkJCWNhc2UgMzoKCQkJCXBvaW50LnkgPSB0YXJnZXQuVmFsKHN2Zy5ZKQoJCQkJYnJlYWsKCQkJY2FzZSA0OgoJCQljYXNlIDU6CgkJCWNhc2UgNjoKCQkJCXBvaW50LnkgPSB0YXJnZXQuVmFsKHN2Zy5ZKSArIHRhcmdldC5WYWwoaHRtbC5IRUlHSFQpIC8gMgoJCQkJYnJlYWsKCQkJY2FzZSA3OgoJCQljYXNlIDg6CgkJCWNhc2UgOToKCQkJCXBvaW50LnkgPSB0YXJnZXQuVmFsKHN2Zy5ZKSArIHRhcmdldC5WYWwoaHRtbC5IRUlHSFQpCgkJCQlicmVhawoJCX0KCgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDQ6CgkJCWNhc2UgNzoKCQkJCXBvaW50LnggPSB0YXJnZXQuVmFsKHN2Zy5YKQoJCQkJYnJlYWsKCQkJY2FzZSAyOgoJCQljYXNlIDU6CgkJCWNhc2UgODoKCQkJCXBvaW50LnggPSB0YXJnZXQuVmFsKHN2Zy5YKSArIHRhcmdldC5WYWwoaHRtbC5XSURUSCkgLyAyCgkJCQlicmVhawoJCQljYXNlIDM6CgkJCWNhc2UgNjoKCQkJY2FzZSA5OgoJCQkJcG9pbnQueCA9IHRhcmdldC5WYWwoc3ZnLlgpICsgdGFyZ2V0LlZhbChodG1sLldJRFRIKQoJCQkJYnJlYWsKCQl9CgkJcmV0dXJuIHBvaW50Cgl9LAoJcmVzaXplOiBmdW5jdGlvbihldmVudCwgaXRlbSwgYmVnaW4sIHAwLCBwMSwgcG9zKSB7CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSA1OgoJCQkJaXRlbS5WYWx1ZShzdmcuWCwgYmVnaW4ueCArIHAxLnggLSBwMC54KQoJCQkJaXRlbS5WYWx1ZShzdmcuWSwgYmVnaW4ueSArIHAxLnkgLSBwMC55KQoJCQkJcmV0dXJuCgkJfQoKCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDE6CgkJCWNhc2UgMjoKCQkJY2FzZSAzOgoJCQkJaXRlbS5WYWx1ZShzdmcuWSwgYmVnaW4ueSArIHAxLnkgLSBwMC55KQoJCQkJaXRlbS5WYWx1ZShodG1sLkhFSUdIVCwgYmVnaW4uaGVpZ2h0IC0gcDEueSArIHAwLnkpCgkJCQlicmVhawoJCX0KCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDE6CgkJCWNhc2UgNDoKCQkJY2FzZSA3OgoJCQkJaXRlbS5WYWx1ZShzdmUuWCwgYmVnaW4ueCArIHAxLnggLSBwMC54KQoJCQkJaXRlbS5WYWx1ZShodG1sLldJRFRILCBiZWdpbi53aWR0aCAtIHAxLnggKyBwMC54KQoJCQkJYnJlYWsKCQl9CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAzOgoJCQljYXNlIDY6CgkJCWNhc2UgOToKCQkJCWl0ZW0uVmFsdWUoaHRtbC5XSURUSCwgYmVnaW4ud2lkdGggKyBwMS54IC0gcDAueCkKCQkJCWJyZWFrCgkJfQoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgNzoKCQkJY2FzZSA4OgoJCQljYXNlIDk6CgkJCQlpdGVtLlZhbHVlKGh0bWwuSEVJR0hULCBiZWdpbi5oZWlnaHQgKyBwMS55IC0gcDAueSkKCQkJCWJyZWFrCgkJfQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9oZWFydC5qcyIKVm9sY2Fub3MoImhlYXJ0Iiwge2hlbHA6ICLlv4PlvaIiLAogICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sCiAgICAgICAgY29weTogWyJkIiwgIm5hbWUiLCAibWV0YSIsICJ0dCIsICJ4eCIsICJ5eSJdLAogICAgICAgIHg6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHZhbHVlLCBjbWQsIHRhcmdldCkgewogICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0dC50eCA9IHZhbHVlLXRhcmdldC5WYWwoInh4IikKICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIit0dC50eCsiLCIrdHQudHkrIikiKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgfSwKICAgICAgICB5OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIHR0ID0gSlNPTi5wYXJzZSh0YXJnZXQuVmFsdWUoInR0Iil8fCd7InR4IjowLCAidHkiOjB9JykKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdHQudHkgPSB2YWx1ZS10YXJnZXQuVmFsKCJ5eSIpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInR0IiwgSlNPTi5zdHJpbmdpZnkodHQpKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0LlZhbCgieXkiKSt0dC50eQogICAgICAgIH0sCiAgICB9LCAvLyA8aGVhcnQgY3g9IjI1IiBjeT0iNzUiIHI9IjIwIi8+CiAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikge3JldHVybn0KCiAgICAgICAgdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0sIHAyID0gcG9pbnRbMl07CiAgICAgICAgcGwgPSB7eDogMipwMC54IC0gcDEueCwgeToyKnAwLnktcDEueX0KICAgICAgICB2YXIgcjAgPSBNYXRoLnNxcnQoTWF0aC5wb3cocDAueCAtIHAxLngsIDIpLCBNYXRoLnBvdyhwMC55IC0gcDEueSwgMikpIC8gMgogICAgICAgIHZhciBkID0gWwogICAgICAgICAgICAgICAgIk0iLCBwbC54LCBwbC55LAogICAgICAgICAgICAgICAgIkEiLCByMCwgcjAsIDAsIDAsIDAsIHAwLngsIHAwLnksCiAgICAgICAgICAgICAgICAiQSIsIHIwLCByMCwgMCwgMCwgMCwgcDEueCwgcDEueSwKICAgICAgICAgICAgXQoKICAgICAgICBpZiAocG9pbnQubGVuZ3RoID09IDMpIHsKICAgICAgICAgICAgdmFyIHIxID0gTWF0aC5zcXJ0KE1hdGgucG93KHAyLnggLSBwMS54LCAyKSwgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpKQogICAgICAgICAgICBkID0gZC5jb25jYXQoWwogICAgICAgICAgICAgICAgIkEiLCByMSwgcjEsIDE4MCwgMCwgMCwgcDIueCwgcDIueSwKICAgICAgICAgICAgICAgICJBIiwgcjEsIHIxLCAxODAsIDAsIDAsIHBsLngsIHBsLnksCiAgICAgICAgICAgIF0pCiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgbmFtZTogImhlYXJ0IiwgZDogZC5qb2luKCIgIiksCiAgICAgICAgICAgIG1ldGE6IEpTT04uc3RyaW5naWZ5KHBvaW50KSwKICAgICAgICAgICAgdHQ6IEpTT04uc3RyaW5naWZ5KHt0eDogMCwgdHk6IDB9KSwKICAgICAgICAgICAgeHg6IHAwLngsIHl5OnAxLnksCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZXZlbnQudHlwZSA9PSAiY2xpY2siICYmIHBvaW50Lmxlbmd0aCA9PSAzICYmIChjYW4ucG9pbnQgPSBbXSksIGRhdGEKICAgIH0sCiAgICB0ZXh0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewogICAgICAgIGRhdGEueCA9IHRhcmdldC5WYWwoImN4IikKICAgICAgICBkYXRhLnkgPSB0YXJnZXQuVmFsKCJjeSIpCiAgICAgICAgcmV0dXJuIGRhdGEKICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewogICAgICAgIHJldHVybiAiaGVhcnQgIiArIHRhcmdldC5WYWx1ZSgidHQiKQogICAgfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIgpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuWbvuW9oue7mOWItiIsCiAgICBwYXRoMnY6IHsgLy8gPHBhdGggZD0iTSB4MCx5MCBRIHgyLHkyIHgzLHkzIFQgeDEseTEiLz4KICAgICAgICBkYXRhOiB7bmFtZTogInBhdGgiLCBzaXplOiB7fSwgY29weTogW119LAogICAgICAgIGRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGxpbmUocDAsIHAxKSB7IHJldHVybiBjYW4uYmFzZS5qb2lucyhbCiAgICAgICAgICAgICAgICBzdmcuTSwgW3AwLngsIHAwLnldLCBzdmcuUSwgW3AwLngsIHAwLnkrKHAxLnktcDAueSkvM10sIFsocDAueCtwMS54KS8yLCAocDAueStwMS55KS8yXSwgc3ZnLlQsIFtwMS54LCBwMS55XQogICAgICAgICAgICBdKSB9CiAgICAgICAgICAgIHJldHVybiB7ZmlsbDogaHRtbC5OT05FLCBkOiBsaW5lKHBvaW50WzBdLCBwb2ludFsxXSl9CiAgICAgICAgfSwKICAgIH0sCiAgICBwYXRoMmg6IHsgLy8gPHBhdGggZD0iTSB4MCx5MCBRIHgyLHkyIHgzLHkzIFQgeDEseTEiLz4KICAgICAgICBkYXRhOiB7bmFtZTogInBhdGgiLCBzaXplOiB7fSwgY29weTogW119LAogICAgICAgIGRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGxpbmUocDAsIHAxKSB7IHJldHVybiBjYW4uYmFzZS5qb2lucyhbCiAgICAgICAgICAgICAgICBzdmcuTSwgW3AwLngsIHAwLnldLCBzdmcuUSwgW3AwLngrKHAxLngtcDAueCkvMywgcDAueV0sIFsocDAueCtwMS54KS8yLCAocDAueStwMS55KS8yXSwgc3ZnLlQsIFtwMS54LCBwMS55XQogICAgICAgICAgICBdKSB9CiAgICAgICAgICAgIHJldHVybiB7ZmlsbDogaHRtbC5OT05FLCBkOiBsaW5lKHBvaW50WzBdLCBwb2ludFsxXSl9CiAgICAgICAgfSwKICAgIH0sCiAgICBwYXRoOiB7IC8vIDxwYXRoIGQ9Ik0xMCAxMCBIIDkwIFYgOTAgSCAxMCBaIi8+CiAgICAgICAgZGF0YToge3NpemU6IHt9LCBjb3B5OiBbImQiLCAidHQiLCAieHgiLCAieXkiXSwKICAgICAgICAgICAgeDogZnVuY3Rpb24oY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgICAgIHZhciB0dCA9IEpTT04ucGFyc2UodGFyZ2V0LlZhbHVlKCJ0dCIpfHwneyJ0eCI6MCwgInR5IjowfScpCiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgdHQudHggPSB2YWx1ZS10YXJnZXQuVmFsKCJ4eCIpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0dCIsIEpTT04uc3RyaW5naWZ5KHR0KSkKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIit0dC50eCsiLCIrdHQudHkrIikiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5WYWwoInh4IikrdHQudHgKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeTogZnVuY3Rpb24oY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgICAgIHZhciB0dCA9IEpTT04ucGFyc2UodGFyZ2V0LlZhbHVlKCJ0dCIpfHwneyJ0eCI6MCwgInR5IjowfScpCiAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgICAgdHQudHkgPSB2YWx1ZS10YXJnZXQuVmFsKCJ5eSIpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0dCIsIEpTT04uc3RyaW5naWZ5KHR0KSkKICAgICAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIit0dC50eCsiLCIrdHQudHkrIikiKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5WYWwoInl5IikrdHQudHkKICAgICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIGRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCBzdHlsZSkgewogICAgICAgICAgICBpZiAoc3R5bGUgJiYgc3R5bGUuZCkgeyByZXR1cm4gc3R5bGUgfQogICAgICAgICAgICBpZiAocG9pbnQubGVuZ3RoID09IDEpIHsgY2FuLl90ZW1wID0ge30gfQogICAgICAgICAgICBpZiAocG9pbnQubGVuZ3RoIDwgMikgeyByZXR1cm4gfQoKICAgICAgICAgICAgaWYgKGNhbi5rZXlzICYmIGNhbi5rZXlzLmxlbmd0aCA+IDApIHsgdmFyIGs7CiAgICAgICAgICAgICAgICBrID0gY2FuLl90ZW1wW3BvaW50Lmxlbmd0aC0xXSA9IGNhbi5rZXlzWzBdCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGsudG9VcHBlckNhc2UoKSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOiBjYW4uX3RlbXBbcG9pbnQubGVuZ3RoKzFdID0gIiwiCiAgICAgICAgICAgICAgICAgICAgY2FzZSAiUSI6IGNhbi5fdGVtcFtwb2ludC5sZW5ndGhdID0gIiwiOyBicmVhawogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYW4ua2V5cyA9IGNhbi5rZXlzLnNsaWNlKDEpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBza2lwID0gMAogICAgICAgICAgICB2YXIgZW5kID0gZmFsc2UKICAgICAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgICAgICBkOiBjYW4uY29yZS5MaXN0KHBvaW50LCBmdW5jdGlvbihwLCBpKSB7IHZhciBrID0gcC5rCiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPCBza2lwKSB7cmV0dXJufQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IGsgPSAiTSI7IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGsgPSBjYW4uX3RlbXBbaV0gfHwgcC5rIHx8ICJMIjsgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYgKGVuZCkge3JldHVybn0KCiAgICAgICAgICAgICAgICAgICAgayA9IGsudG9VcHBlckNhc2UoKQogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoaykgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJaIjogcmV0dXJuIGNhbi5wb2ludCA9IFtdLCBjYW4uX3RlbXAgPSB7fSwgawogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJMIjogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIk0iOiByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiSCI6IHJldHVybiBrKyIgIiArIHAueAogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJWIjogcmV0dXJuIGsrIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiIDAgMCAwICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IGVuZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnNxcnQoTWF0aC5wb3cocG9pbnRbaSsxXS54IC0gcC54LCAyKSArIE1hdGgucG93KHBvaW50W2krMV0ueSAtIHAueSwgMikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHIgKyAiICIgKyByICsgIiAwIDAgMCAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXAuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBNYXRoLnNxcnQoTWF0aC5wb3cocG9pbnRbaSsxXS54IC0gcC54LCAyKSArIE1hdGgucG93KHBvaW50W2krMV0ueSAtIHAueSwgMikpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50W2ldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gcG9pbnRbaV0gPSBwb2ludFtpKzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzFdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBjYW4ucG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBjYW4ucG9pbnRbaV0gPSBjYW4ucG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuLnBvaW50W2krMV0gPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnggPSByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLnkgPSByCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRvbmUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmFyZyA9ICIgMCAwIDAgIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcCA9IGkgKyAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueSArICIgMCAwIDAgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiQyI6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHBvaW50Lmxlbmd0aCAtIGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IGVuZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsrIiAiICsgKHBvaW50W2ktMV0ueCtwLngpLzIgKyAiICIgKyAocG9pbnRbaS0xXS55K3AueSkvMiArICIsIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IGVuZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsrIiAiICsgcG9pbnRbaSsxXS54ICsgIiAiICsgcG9pbnRbaSsxXS55ICsgIiwiICsgKHBvaW50W2ktMV0ueCtwLngpLzIgKyAiICIgKyAocG9pbnRbaS0xXS55K3AueSkvMiArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsrIiAiICsgcG9pbnRbaSsxXS54ICsgIiAiICsgcG9pbnRbaSsxXS55ICsgIiwiICsgcG9pbnRbaSsyXS54ICsgIiAiICsgcG9pbnRbaSsyXS55ICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXAuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSBwb2ludFtpKzJdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzJdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IGVuZCA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGsrIiAiICsgcG9pbnRbaSsxXS54ICsgIiAiICsgcG9pbnRbaSsxXS55ICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXAuZG9uZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZG9uZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KS5qb2luKCIgIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIH0sCiAgICAgICAgdGV4dDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGRhdGEpIHsKICAgICAgICAgICAgZGF0YS54ID0gKHRhcmdldC54MS5iYXNlVmFsLnZhbHVlICsgdGFyZ2V0LngyLmJhc2VWYWwudmFsdWUpIC8gMgogICAgICAgICAgICBkYXRhLnkgPSAodGFyZ2V0LnkxLmJhc2VWYWwudmFsdWUgKyB0YXJnZXQueTIuYmFzZVZhbC52YWx1ZSkgLyAyCiAgICAgICAgICAgIHJldHVybiBkYXRhCiAgICAgICAgfSwKICAgICAgICBzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyByZXR1cm4gdGFyZ2V0LnRhZ05hbWUgKyAiICIgKyB0YXJnZXQuVmFsdWUoImQiKSB9LAogICAgfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy93YWxrX3RyYXNoLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsCiAgICBpbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIG91dHB1dCwgYWN0aW9uLCBvcHRpb24pIHtvdXRwdXQuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgaWYgKCFtc2cucmVzdWx0IHx8IG1zZy5yZXN1bHQubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kVGFibGUoY2FuLCBtc2csIG91dHB1dCwgbXNnLmFwcGVuZCk7CiAgICAgICAgICAgIHRhYmxlLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkge3N3aXRjaCAoZXZlbnQudGFyZ2V0LnRhZ05hbWUpIHsKICAgICAgICAgICAgICAgIGNhc2UgIlREIjoKICAgICAgICAgICAgICAgICAgICBjYW4ub25pbXBvcnQud2hpY2goZXZlbnQsIHRhYmxlLCBtc2cuYXBwZW5kLCBmdW5jdGlvbihpbmRleCwga2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5PcHRpb24oImZpbGUiLCBldmVudC50YXJnZXQuaW5uZXJIVE1MLnRyaW0oKSkKICAgICAgICAgICAgICAgICAgICAgICAgY2FuLnJ1bihldmVudCwgW2V2ZW50LnRhcmdldC5pbm5lckhUTUwudHJpbSgpXSwgZnVuY3Rpb24obXNnKSB7fSkKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUSCI6CiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGNhc2UgIlRSIjoKICAgICAgICAgICAgICAgIGNhc2UgIlRBQkxFIjoKICAgICAgICAgICAgfX0KICAgICAgICAgICAgcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKSwgdGFibGU7CiAgICAgICAgfQoKICAgICAgICAvLyBjYW4ucGFnZS5BcHBlbmQoY2FuLCBhY3Rpb24sIFt7dHlwZTogInNjcmlwdCIsIHNyYzogImh0dHBzOi8vY2RuLmJvb3Rjc3MuY29tL2VjaGFydHMvNC4yLjAtcmMuMi9lY2hhcnRzLmpzIn1dKTsKICAgICAgICBjYW4ucGFnZS5BcHBlbmQoY2FuLCBvdXRwdXQsIFt7aW5jbHVkZTogWyJyZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvZWNoYXJ0cy5qcyIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgIGNhbi5wYWdlLkFwcGVuZChjYW4sIG91dHB1dCwgW3tpbmNsdWRlOiBbInJlcXVpcmUvc2h5bGludXguY29tL3gvZWNoYXJ0cy9jaGluYS5qcyIsIGZ1bmN0aW9uKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgY2hpbmFfY2hhcnQgPSBlY2hhcnRzLmluaXQoY2FuLnBhZ2UuQXBwZW5kKGNhbiwgb3V0cHV0LCBbe3R5cGU6ICJkaXYiLCBzdHlsZToge3dpZHRoOiAiNjAwcHgiLCBoZWlnaHQ6ICI0MDBweCJ9fV0pLmxhc3QpOwogICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBtc2cuVGFibGUoKQoKICAgICAgICAgICAgICAgIHZhciB5RGF0YSA9IFtdOwogICAgICAgICAgICAgICAgdmFyIGJhckRhdGEgPSBbXTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKGRhdGEubGVuZ3RoPjEwPyAxMDogZGF0YS5sZW5ndGgpOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB5RGF0YS5wdXNoKGkgKyBkYXRhW2ldLm5hbWUpOwogICAgICAgICAgICAgICAgICAgIGJhckRhdGEucHVzaChkYXRhW2ldKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0gewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiBbewogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBtc2cuT3B0aW9uKCJ0aXRsZSIpLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93OiB0cnVlLCByaWdodDogMjUwLCB0b3A6IDEwLAogICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHtjb2xvcjogJyMyRDNFNTMnLCBmb250U2l6ZTogMTh9LAogICAgICAgICAgICAgICAgICAgIH1dLAogICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwgZm9ybWF0dGVyOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXMubmFtZSArIjogIitwYXJhbXMudmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHZpc3VhbE1hcDogewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29udGludW91cycsCiAgICAgICAgICAgICAgICAgICAgICAgIG9yaWVudDogJ2hvcml6b250YWwnLAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtV2lkdGg6IDEwLAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtSGVpZ2h0OiA4MCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogWyfpq5gnLCAn5L2OJ10sCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dMYWJlbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VyaWVzSW5kZXg6IFswXSwKICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAwLAogICAgICAgICAgICAgICAgICAgICAgICBtYXg6IGRhdGFbMV0udmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGluUmFuZ2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBbJyM2RkNGNkEnLCAnI0ZGRkQ2NCcsICcjRkY1MDAwJ10KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM3QjkzQTcnCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMzAsCiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6ICdsZWZ0JywKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdyaWQ6IHtyaWdodDogMTAsIHRvcDogMTM1LCBib3R0b206IDEwMCwgd2lkdGg6ICcyMCUnfSwKICAgICAgICAgICAgICAgICAgICB4QXhpczoge3Nob3c6IGZhbHNlfSwKICAgICAgICAgICAgICAgICAgICB5QXhpczogewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2F0ZWdvcnknLAogICAgICAgICAgICAgICAgICAgICAgICBpbnZlcnNlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lR2FwOiAxNiwKICAgICAgICAgICAgICAgICAgICAgICAgYXhpc0xpbmU6IHtzaG93OiBmYWxzZSwgbGluZVN0eWxlOiB7Y29sb3I6ICcjZGRkJ319LAogICAgICAgICAgICAgICAgICAgICAgICBheGlzVGljazoge3Nob3c6IGZhbHNlLCBsaW5lU3R5bGU6IHtjb2xvcjogJyNkZGQnfX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNMYWJlbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJ2YWw6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0U3R5bGU6IHtjb2xvcjogJyM0NTVBNzQnLCBhbGlnbjogJ2xlZnQnLCBmb250U2l6ZTogMTR9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmljaDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGE6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZBQUEzOScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzQxOTdGRCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQocGFyYW1zLnNsaWNlKDAsIDEpKSA8IDMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd7YXwnICsgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgKyAxKSArICd9JyArICcgICcgKyBwYXJhbXMuc2xpY2UoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd7YnwnICsgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgKyAxKSArICd9JyArICcgICcgKyBwYXJhbXMuc2xpY2UoMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCdcbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB5RGF0YQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgZ2VvOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hcDogJ2NoaW5hJywgbGVmdDogJ2xlZnQnLCByaWdodDogJzEwMCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiB7ZW1waGFzaXM6IHtzaG93OiBmYWxzZX19LAogICAgICAgICAgICAgICAgICAgICAgICBpdGVtU3R5bGU6IHtlbXBoYXNpczoge2FyZWFDb2xvcjogJyNmZmY0NjQnfX0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvYW06IGZhbHNlLCB0eXBlOiAnbWFwJywgbmFtZTogJ21hcFNlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIGdlb0luZGV4OiAwLCBsYWJlbDoge3Nob3c6IGZhbHNlfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICAgICAgcm9hbTogZmFsc2UsIHR5cGU6ICdiYXInLCBuYW1lOiAnYmFyU2VyJywKICAgICAgICAgICAgICAgICAgICAgICAgdmlzdWFsTWFwOiBmYWxzZSwgYmFyR2FwOiAwLCBiYXJNYXhXaWR0aDogOCwKICAgICAgICAgICAgICAgICAgICAgICAgemxldmVsOiAxMDAsIGl0ZW1TdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGZ1bmN0aW9uKHBhcmFtcykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBidWlsZCBhIGNvbG9yIG1hcCBhcyB5b3VyIG5lZWQuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2xvckxpc3QgPSBbe2NvbG9yU3RvcHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvZmZzZXQ6IDAsIGNvbG9yOiAnI0ZGRDExOSd9LCAvLyAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvZmZzZXQ6IDEsIGNvbG9yOiAnI0ZGQUM0Qyd9LCAvLyAxMDAlIOWkhOeahOminOiJsgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfSwge2NvbG9yU3RvcHM6IFsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvZmZzZXQ6IDAsIGNvbG9yOiAnIzAwQzBGQSd9LCAvLyAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtvZmZzZXQ6IDEsIGNvbG9yOiAnIzJGOTVGQSd9LCAvLyAxMDAlIOWkhOeahOminOiJsgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdfV07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbXMuZGF0YUluZGV4IDwgMz8gY29sb3JMaXN0WzBdOiBjb2xvckxpc3RbMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhckJvcmRlclJhZGl1czogMTUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogYmFyRGF0YQogICAgICAgICAgICAgICAgICAgIH1dCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgY2hpbmFfY2hhcnQuc2V0T3B0aW9uKG9wdGlvbik7CiAgICAgICAgICAgIH1dfV0pOwogICAgICAgIH1dfV0pOwogICAgfSwKICAgIHdoaWNoOiBmdW5jdGlvbihldmVudCwgdGFibGUsIGxpc3QsIGNiKSB7aWYgKGV2ZW50LnRhcmdldCA9PSB0YWJsZSkge3JldHVybiBjYigtMSwgIiIpfQogICAgICAgIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCAidHIiLCBmdW5jdGlvbih0ciwgaW5kZXgpIHtpZiAoZXZlbnQudGFyZ2V0ID09IHRyKSB7cmV0dXJuIGNiKGluZGV4LTEsICIiKX0KICAgICAgICAgICAgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsICJ0aCx0ZCIsIGZ1bmN0aW9uKHRkLCBvcmRlcikgewogICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PSB0ZCkge3JldHVybiBjYihpbmRleC0xLCBsaXN0W29yZGVyXSl9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSkKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2ZlZWwuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnBhdGggPSBjYW4ucmVxdWVzdCgpLCBjYW4ubGlzdCA9IFtdLCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZS5wYXRoLCBpY2UuUFMpPyBjYW4ucGF0aC5QdXNoKHZhbHVlKTogY2FuLmxpc3QucHVzaCh2YWx1ZSkKCQl9KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5kaXNwbGF5KGNhbiwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIGNhbi5wYXRoLCBudWxsLCBjYW4udWkuY29udGVudCkKCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIGNhbi5vbmV4cG9ydC5saXN0KQoKCQljYW4uQWN0aW9uKGh0bWwuSEVJR0hULCBtc2cuT3B0aW9uKGh0bWwuSEVJR0hUKXx8bXNnLl9jbWRzWzFdfHxpY2UuQVVUTykKCQljYW4uQWN0aW9uKGh0bWwuU1BFRUQsIG1zZy5PcHRpb24oaHRtbC5TUEVFRCl8fG1zZy5fY21kc1syXXx8IjEiKQoJCWNhbi5BY3Rpb24obWRiLkxJTUlULCBtc2cuT3B0aW9uKG1kYi5MSU1JVCl8fG1zZy5fY21kc1szXXx8IjkiKQoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCgkJY2FuLmJlZ2luID0gcGFyc2VJbnQoY2FuLmJlZ2lufHxtc2cuT3B0aW9uKGNsaS5CRUdJTil8fCIwIikKCQljYW4uZGlyX3Jvb3QgPSBtc2cuT3B0aW9uKG5mcy5ESVJfUk9PVCkKCQljYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KQoJfSwKCV9maWxlOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHZhciBwID0gbG9jYXRpb24uaHJlZi5pbmRleE9mKGljZS5IVFRQKSA9PSAwPyAiIjogImh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCIKCQlyZXR1cm4gcGF0aC5pbmRleE9mKGljZS5IVFRQKSA9PSAwPyBwYXRoOiBwK2Nhbi5iYXNlLlBhdGgoIi9zaGFyZS9sb2NhbCIsIGNhbi5kaXJfcm9vdHx8IiIsIHBhdGgpCgl9LAoJZmlsZTogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyBwYXRoID0gY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgcGF0aCwgaW5kZXgpCgkJdmFyIGNiID0gY2FuLm9uZmlndXJlW2Nhbi5iYXNlLkV4dChwYXRoKV18fGNhbi5vbmZpZ3VyZVsiaW1hZ2UiXTsgY2FuLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbY2IoY2FuLCBwYXRoLCBpbmRleCldKQoJfSwKCXBhZ2U6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgYmVnaW4sIGxpbWl0KSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5kaXNwbGF5KQoJCWJlZ2luID0gcGFyc2VJbnQoYmVnaW58fGNhbi5iZWdpbiksIGxpbWl0ID0gcGFyc2VJbnQobGltaXR8fGNhbi5BY3Rpb24obWRiLkxJTUlUKSkKCQlmb3IgKHZhciBpID0gYmVnaW47IGkgPCBiZWdpbitsaW1pdDsgaSsrKSB7IGxpc3QgJiYgbGlzdFtpXSAmJiBjYW4ub25pbXBvcnQuZmlsZShjYW4sIGxpc3RbaV0ucGF0aCwgaSkgfQoJCWNhbi5TdGF0dXMoe2JlZ2luOiBiZWdpbiwgbGltaXQ6IGxpbWl0LCB0b3RhbDogY2FuLmxpc3QubGVuZ3RofSkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwKCXBuZzogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLmltYWdlKGNhbiwgcGF0aCwgaW5kZXgpIH0sCglqcGc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJanBlZzogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLmltYWdlKGNhbiwgcGF0aCwgaW5kZXgpIH0sCglpbWFnZTogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyByZXR1cm4ge2ltZzogcGF0aCwgaGVpZ2h0OiBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbiksCgkJb25tb3VzZW92ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpIH0sCgkJb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZGV0YWlsLl9pbml0KGNhbiwgaW5kZXgpIH0sCgl9IH0sCgoJdmlkZW86IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyB2YXIgYXV0byA9IGNhbi51c2VyLmlzTW9iaWxlJiZjYW4uQWN0aW9uKG1kYi5MSU1JVCkhPSIxIj8gZmFsc2U6IHRydWUsIGxvb3AgPSB0cnVlLCB0b3RhbCA9IDA7IGZ1bmN0aW9uIGNiKGV2ZW50KSB7IH0KCQlyZXR1cm4ge3R5cGU6IGh0bWwuVklERU8sIHN0eWxlOiB7aGVpZ2h0OiBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbil9LCBjbGFzc05hbWU6ICJwcmV2aWV3IiwKCQkJZGF0YToge3NyYzogcGF0aCwgY29udHJvbHM6ICJjb250cm9scyIsIGF1dG9wbGF5OiBhdXRvLCBsb29wOiBsb29wLCBwbGF5YmFja1JhdGU6IHBhcnNlRmxvYXQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSl9LAoJCQlvbmNvbnRleHRtZW51OiBjYiwgb25wbGF5OiBjYiwgb25wYXVzZTogY2IsIG9uZW5kZWQ6IGNiLAoJCQlvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkgfSwKCQkJb25sb2FkZWRtZXRhZGF0YTogZnVuY3Rpb24oZXZlbnQpIHsgdG90YWwgPSBldmVudC50aW1lU3RhbXAKCQkJCWV2ZW50LnRhcmdldC5jdXJyZW50VGltZSA9IGNhbi5fbXNnLmN1cnJlbnRUaW1lIHx8IDAKCQkJfSwgb25sb2FkZWRkYXRhOiBjYiwgb250aW1ldXBkYXRlOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLlN0YXR1cyhuZnMuRklMRSkgPT0gcGF0aCAmJiBjYW4uU3RhdHVzKCJwb3NpdGlvbiIsIGNhbi5vbmV4cG9ydC5wb3NpdGlvbihjYW4sIChjYW4uX21zZy5jdXJyZW50VGltZT1ldmVudC50YXJnZXQuY3VycmVudFRpbWUpLTEsIGV2ZW50LnRhcmdldC5kdXJhdGlvbikpCgkJCX0sCgkJfQoJfSwKCW1wNDogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAoJbTR2OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCgltb3Y6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKCXdlYm06IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2h0bWwuSEVJR0hULCAxMDAsIDIwMCwgNDAwLCA2MDAsIDgwMCwgaWNlLkFVVE9dLAoJCVtodG1sLlNQRUVELCAwLjEsIDAuMiwgMC41LCAxLCAyLCAzLCA1LCAxMF0sCgkJW21kYi5MSU1JVCwgMSwgMywgNiwgOSwgMTIsIDE1LCAyMCwgMzAsIDUwXSwKCV0sCglwcmV2OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5iZWdpbiA+IDApIHsKCQkJY2FuLmJlZ2luIC09IHBhcnNlSW50KGNhbi5BY3Rpb24obWRiLkxJTUlUKSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpCgkJfSBlbHNlIHsKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi5bey57uP5piv56ys5LiA6aG15LqGIikKCQl9Cgl9LAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4uYmVnaW4gKyBwYXJzZUludChjYW4uQWN0aW9uKG1kYi5MSU1JVCkpIDwgY2FuLmxpc3QubGVuZ3RoKSB7CgkJCWNhbi5iZWdpbiArPSBwYXJzZUludChjYW4uQWN0aW9uKG1kYi5MSU1JVCkpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KQoJCX0gZWxzZSB7CgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+acgOWQjuS4gOmhteS6hiIpCgkJfQoJfSwKCWhlaWdodDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KSB9LAoJc3BlZWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkgfSwKCWxpbWl0OiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpIH0sCgoJY2hvb3NlSW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCWNhbi51c2VyLmFnZW50LmNob29zZUltYWdlKGZ1bmN0aW9uKGxpc3QpIHsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe2ltZzogaXRlbSwgaGVpZ2h0OiAyMDB9XSkKCQl9KSB9KQoJfSwKCXJlY29yZDE6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCwgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aAoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogInRleHQiLCBuYW1lOiAiZmlsZSIsIHZhbHVlOiAic29tZSJ9XSwgZnVuY3Rpb24obGlzdCkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHtoZWlnaHQ6IGhlaWdodH19KS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewoJCQkJdmFyIHZpZGVvID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dHlwZTogaHRtbC5WSURFTywgaGVpZ2h0OiBoZWlnaHR9XSkuZmlyc3QKCQkJCXZpZGVvLnNyY09iamVjdCA9IHN0cmVhbSwgdmlkZW8ub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsgdmlkZW8ucGxheSgpCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQkJCXZhciBjYW52YXMgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBodG1sLkNBTlZBUywgaGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aH1dKS5maXJzdAoJCQkJCQljYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UodmlkZW8sIDAsIDAsIHdpZHRoLCBoZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpCgkJCQkJCWNhbnZhcy50b0Jsb2IoKGJsb2IpID0+IHsKCQkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJCQkJCW1zZy5fdXBsb2FkID0gbmV3IEZpbGUoW2Jsb2JdLCAobGlzdFswXSkrIi5wbmciKQoJCQkJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQsIFtdLCBmdW5jdGlvbigpIHsKCQkJCQkJCQljYW4udXNlci50b2FzdChjYW4sICLkuIrkvKDmiJDlip8iKSwgY2FuLlVwZGF0ZSgpCgkJCQkJCQl9KQoJCQkJCQl9KQoJCQkJCX0pCgkJCQl9CgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4udXNlci50b2FzdChjYW4sIGVyci5uYW1lICsgIjogIiArIGVyci5tZXNzYWdlKSB9KQoJCX0pCgl9LAoJcmVjb3JkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBibG9icyA9IFtdCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiAidGV4dCIsIG5hbWU6ICJmaWxlIiwgdmFsdWU6ICJzb21lIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKHt2aWRlbzoge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKSozLzR9fSkudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKCQkJCWNhbi5jb3JlLk5leHQoWzMsIDIsIDFdLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCBpdGVtICsgInMg5ZCO5byA5aeL5b2V5bGPIikKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBuZXh0LCAxMDAwKQoJCQkJfSwgZnVuY3Rpb24oKSB7CgkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi546w5Zyo5byA5aeL5b2V5bGPIikKCQkJCQl2YXIgcmVjb3JkZXIgPSBuZXcgTWVkaWFSZWNvcmRlcihzdHJlYW0sIHttaW1lVHlwZTogJ3ZpZGVvL3dlYm0nfSkKCQkJCQlyZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbihyZXMpIHsgYmxvYnMucHVzaChyZXMuZGF0YSkgfQoJCQkJCXJlY29yZGVyLm9uc3RvcCA9IGZ1bmN0aW9uKCkgewoJCQkJCQljYW4udXNlci50b2FzdChjYW4sICLlvZXlsY/miJDlip8iKQoJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJCW1zZy5fdXBsb2FkID0gbmV3IEZpbGUoYmxvYnMsIChsaXN0WzBdfHwic29tZSIpKyIud2VibSIpIAoJCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBodG1sLlVQTE9BRCwgW10sIGZ1bmN0aW9uKCkgewoJCQkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi5LiK5Lyg5oiQ5YqfIiksIGNhbi5VcGRhdGUoKQoJCQkJCQl9KQoJCQkJCX0sIHJlY29yZGVyLnN0YXJ0KDEwKQoJCQkJfSkKCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IGNhbi51c2VyLnRvYXN0KGNhbiwgZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWyLlhbPpl60iLCAi5LiL6L29IiwgIuWIoOmZpCIsICLkuIrkuIDkuKoiLCAi5LiL5LiA5LiqIiwgIuiuvue9ruWktOWDjyIsICLorr7nva7og4zmma8iLCAi5aSN5Yi26ZO+5o6lIl0sIF9pbml0OiBmdW5jdGlvbihjYW4sIGluZGV4KSB7CgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwge3R5cGU6ICJzdG9yeSBmZWVsIGZsb2F0In0sIFtdLCBmdW5jdGlvbihzdWIpIHsgY2FuLnN1YiA9IHN1YgoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBjYiwgdHJ1ZSkgfQoKCQkJc3ViLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCBsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl90YXJnZXQsIHtsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pCgkJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLldJRFRILCB3aWR0aCwgaHRtbC5IRUlHSFQsIGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJCXN1Yi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLm9uZGV0YWlsLmxpc3QsIHN1Yi5fYWN0aW9uLCBjYW4ub25kZXRhaWwpCgkJCQlzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIFsiYmVnaW4iLCAiZmlsZSJdKQoKCQkJCWNhbi5vcmRlciA9IGluZGV4LCBjYW4uc2hvdyA9IGZ1bmN0aW9uKG9yZGVyKSB7IHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtvcmRlcl0ucGF0aCkKCQkJCQl2YXIgY2IgPSBjYW4ub25maWd1cmVbY2FuLmJhc2UuRXh0KHBhdGgpXXx8Y2FuLm9uZmlndXJlWyJpbWFnZSJdCgkJCQkJCgkJCQkJc3ViLnBhZ2UuQXBwZW5kcyhzdWIsIHN1Yi5fb3V0cHV0LCBbY2FuLmJhc2UuQ29weShjYihjYW4sIHBhdGgsIGluZGV4KSwge2hlaWdodDogIiIsIHN0eWxlOiBraXQuRGljdChodG1sLk1BWF9XSURUSCwgd2lkdGgsIGh0bWwuTUFYX0hFSUdIVCwgaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUKX0pXSkKCQkJCQlzdWIuU3RhdHVzKGNsaS5CRUdJTiwgb3JkZXIrMStpY2UuUFMrY2FuLmxpc3QubGVuZ3RoKSwgc3ViLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkKCQkJCX0sIGNhbi5zaG93KGNhbi5vcmRlcikKCQkJfSkKCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCX0sCgki5YWz6ZetIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uc3ViLl90YXJnZXQpIH0sCgki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5kb3dubG9hZChjYW4sIHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgbmZzLlRSQVNILCBbY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sICLliKDpmaTmiJDlip8iKSB9LCB0cnVlKSB9LAoJIuS4iuS4gOS4qiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9yZGVyID4gMD8gY2FuLnNob3coLS1jYW4ub3JkZXIpOiBjYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/nrKzkuIDlvKDllaYhIikgfSwKCSLkuIvkuIDkuKoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vcmRlciA8IGNhbi5saXN0Lmxlbmd0aC0xPyBjYW4uc2hvdygrK2Nhbi5vcmRlcik6IGNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+acgOWQjuS4gOW8oOWVpiEiKSB9LAoJIuiuvue9ruWktOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnNldEhlYWRlcigiYXZhdGFyIiwgY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLorr7nva7og4zmma8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZXRIZWFkZXIoImJhY2tncm91bmQiLCBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuWkjeWItumTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtfcGF0aDogY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKX0sIHRydWUpKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFtjbGkuQkVHSU4sIG1kYi5MSU1JVCwgbWRiLlRPVEFMLCBuZnMuRklMRSwgInBvc2l0aW9uIl0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbikgeyB2YXIgaGVpZ2h0ID0gY2FuLkFjdGlvbihodG1sLkhFSUdIVCkKCQlyZXR1cm4gcGFyc2VJbnQoaGVpZ2h0ID09IGljZS5BVVRPPyBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKS80LCAyMDApOiBoZWlnaHQpCgl9LAoJcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHRvdGFsKSB7IHRvdGFsID0gdG90YWwgfHwgY2FuLm1heAoJCXJldHVybiBwYXJzZUludCgoaW5kZXgrMSkqMTAwL3RvdGFsKSsiJSIrIiA9ICIrKHBhcnNlSW50KGluZGV4KSsxKStpY2UuUFMrcGFyc2VJbnQodG90YWwpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQlpZiAobXNnLkxlbmd0aCgpID4gMCkgeyByZXR1cm4gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSB9CgoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgdGFyZ2V0LCBtc2cuUmVzdWx0KCkpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCB3aWtpLklURU0sIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGRhdGEgPSBpdGVtLmRhdGFzZXR8fHt9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgY2FuLmJhc2UuT2JqKGRhdGEuc3R5bGUpKQoJCQljYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uaW1wb3J0LCBkYXRhLnR5cGVdLCBbY2FuLCBkYXRhLCBpdGVtXSkKCQl9KQoJfSwKCW5hdm1lbnU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IHZhciBuYXYgPSBjYW4uc3VwLl9uYXZtZW51CgkJbmF2ID0gbmF2fHxjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX2ZpZWxkcywgW3dpa2kuTkFWTUVOVV0pLmZpcnN0CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgbmF2KSwgY2FuLl9maWVsZHMuaW5zZXJ0QmVmb3JlKG5hdiwgY2FuLl9vdXRwdXQpCgoJCWNhbi5vbmltcG9ydC5saXN0KGNhbiwgY2FuLmJhc2UuT2JqKGRhdGEuZGF0YSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCXZhciBsaW5rID0gaXRlbS5tZXRhLmxpbmssIGxpc3QgPSBjYW4uY29yZS5TcGxpdChpdGVtLm1ldGEubGluaykKCQkJaWYgKGNhbi5jb3JlLlZhbHVlKGNhbiwgbGlzdFswXSkpIHsgcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGxpc3RbMF1dLCBsaXN0LnNsaWNlKDEpKSB9CgkJCWlmICghbGluayB8fCBsaW5rID09IGNhbi5PcHRpb24obmZzLlBBVEgpKSB7IHJldHVybiBmYWxzZSB9CgoJCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShpdGVtLm1ldGEubmFtZSk7IHJldHVybiBjYW4uT3B0aW9uKG5mcy5QQVRILCBsaW5rKSB9KSkgeyByZXR1cm4gfQoJCQlyZXR1cm4gY2FuLnN1cC5VcGRhdGUoZXZlbnQsIFtsaW5rXSkKCQl9LCBuYXYpLCBjYW4uc3VwLl9uYXZtZW51ID0gbmF2CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZykgeyAKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBuYXYsIGh0bWwuSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKyhjYW4uaXNDbWRNb2RlKCk/IG1zZy5PcHRpb24oaHRtbC5NQVJHSU5fWSk6IDApKQoJCQljYW4uQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKS1uYXYub2Zmc2V0V2lkdGgtMjEpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsCgkJCQlodG1sLkhFSUdIVCwgY2FuLnN1cC5fbmF2bWVudS5vZmZzZXRIZWlnaHQtMjAsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCksCgkJCQlodG1sLkZMT0FULCBodG1sLkxFRlQsIGh0bWwuQ0xFQVIsIGh0bWwuTk9ORSwKCQkJCWh0bWwuUEFERElORywgMTAsCgkJCSkKCQl9KQoJfSwKCXByZW1lbnU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5wYWdlLktleXMod2lraS5IMiwgd2lraS5IMyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFtpdGVtLmlubmVySFRNTCwgaHRtbC5MSSwgaXRlbS50YWdOYW1lXSwgb25jbGljazogZnVuY3Rpb24oKSB7CgkJCQlpdGVtLnNjcm9sbEludG9WaWV3KCkKCQkJfX1dKSwgaXRlbS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdGFyZ2V0LnNjcm9sbEludG9WaWV3KCkgfQoJCX0pCgl9LAoJdGl0bGU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLmlzQ21kTW9kZSgpICYmIHRhcmdldC50YWdOYW1lID09ICJIMSIgJiYgY2FuLnVzZXIudGl0bGUoZGF0YS50ZXh0KQoJfSwKCXJlZmVyOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5BLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsICJyZWZlciIsIG1kYi5OQU1FLCBpdGVtLmRhdGFzZXQubmFtZSwgbWRiLlRFWFQsIGl0ZW0uaHJlZl0pCgkJCX0KCQl9KQoJfSwKCXNwYXJrOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWlmIChkYXRhW21kYi5OQU1FXSA9PSBjaGF0LkZJRUxEKSB7CgkJCWZ1bmN0aW9uIGRlZXAodGV4dCkgeyB2YXIgZCA9IDAKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykgewoJCQkJCXN3aXRjaCAodGV4dFtpXSkgewoJCQkJCQljYXNlIGljZS5UQjogZCArPSA0OyBicmVhawoJCQkJCQljYXNlIGljZS5TUDogZCsrOyBicmVhawoJCQkJCQlkZWZhdWx0OiByZXR1cm4gZAoJCQkJCX0KCQkJCX0KCQkJCXJldHVybiBkCgkJCX0KCQkJdmFyIGxpc3QgPSBbXTsgY2FuLmNvcmUuTGlzdCh0YXJnZXQuaW5uZXJUZXh0LnNwbGl0KGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgdmFyIF9kZWVwID0gZGVlcChsaW5lKQoJCQkJd2hpbGUgKGxpc3QubGVuZ3RoID4gMCkgeyBpZiAoX2RlZXAgPD0gbGlzdFtsaXN0Lmxlbmd0aC0xXS5fZGVlcCkgeyBsaXN0LnBvcCgpIH0gZWxzZSB7IGJyZWFrIH0gfQoJCQkJdmFyIGxzID0gY2FuLmNvcmUuU3BsaXQobGluZSksIGl0ZW0gPSB7X2RlZXA6IF9kZWVwLCBtZXRhOiB7aW5kZXg6IGxzWzBdLCBuYW1lOiBsc1sxXSwgYXJnczogbHMuc2xpY2UoMil9LCBsaXN0OiBbXX0KCQkJCWlmIChsaXN0Lmxlbmd0aCA+IDApIHsgbGlzdFtsaXN0Lmxlbmd0aC0xXS5saXN0LnB1c2goaXRlbSkgfSBsaXN0LnB1c2goaXRlbSkKCQkJfSkKCgkJCXZhciBmaXJzdDsgZnVuY3Rpb24gc2hvdyhpdGVtLCBpbmRleCwgdGFyZ2V0LCBvdXRwdXQpIHsKCQkJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5tZXRhLm5hbWV8fGl0ZW0ubWV0YS5pbmRleF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHZpZXcubWVudSwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQkJCWlmICh1aS5saXN0LmlubmVyVGV4dCkgeyByZXR1cm4gY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIHVpLmxpc3QpIH0KCQkJCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpbmRleCB9LCBvdXRwdXQpKSB7IHJldHVybiB9CgoJCQkJCWNhbi5jb3JlLkxpc3QoaXRlbS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBpdGVtLm1ldGEsIGZ1bmN0aW9uKHN1YikgewoJCQkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaXRlbS5tZXRhLmluZGV4LCBjbWRzLCBjYikgfQoJCQkJCQkJc3ViLkNvbmZIZWlnaHQoaXRlbS5tZXRhLmhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkvMiksIHN1Yi5Db25mV2lkdGgoaXRlbS5tZXRhLndpZHRoID0gY2FuLkNvbmZXaWR0aCgpLShjYW4udXNlci5pc1dpbmRvd3M/IDE4MTogMTY1KSkKCQkJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJCQkJCX0sIG91dHB1dCkKCQkJCQl9KQoJCQkJfX0sIGh0bWwuTElTVF0pCgkJCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmxpc3QubGVuZ3RoID4gMCAmJiBzaG93KGl0ZW0sIGNhbi5jb3JlLktleXMoaW5kZXgsIGl0ZW0ubWV0YS5pbmRleCksIHVpLmxpc3QsIG91dHB1dCkgfSkKCQkJCXVpLmxpc3QuaW5uZXJUZXh0ID09ICIiICYmIChmaXJzdCA9IGZpcnN0fHx1aS5pdGVtKQoJCQl9CgoJCQl2YXIgdmlldyA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFsKCQkJCXt2aWV3OiBodG1sLk1FTlUsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzIsIHdpZHRoOiAxMjB9fSwKCQkJCXt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzIsIHdpZHRoOiBjYW4uQ29uZldpZHRoKCktKGNhbi51c2VyLmlzV2luZG93cz8gMTgxOiAxNjUpfX0sCgkJCV0pCgkJCXJldHVybiBzaG93KGxpc3RbMF0sIGxpc3RbMF0uX2luZGV4LCB2aWV3Lm1lbnUsIHZpZXcubGlzdCksIGZpcnN0LmNsaWNrKCkKCQl9CgoJCWlmIChkYXRhW21kYi5OQU1FXSA9PSBodG1sLklOTkVSKSB7IHJldHVybiBjYW4ub25tb3Rpb24uY29weShjYW4sIHRhcmdldCkgfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5TUEFOLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSwgIiIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBbbWRiLlRZUEUsICJzcGFyayIsIG1kYi5OQU1FLCAic2hlbGwiLCBtZGIuVEVYVCwgaXRlbS5pbm5lclRleHRdLCBmdW5jdGlvbigpIHt9KQoJCQl9KQoJCX0pCgl9LAoJY2hhcnQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJdGFyZ2V0Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbihldmVudCkgewoJCQljYW4udXNlci5jYXJ0ZUNsaWVudChldmVudCwgY2FuLCBraXQuRGljdChtZGIuRVhQT1JULCBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sICJoaSIsIHRhcmdldCkKCQkJfSksIFttZGIuRVhQT1JUXSkKCQl9Cgl9LAoJdGFibGU6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuT3JkZXJUYWJsZShjYW4sIHRhcmdldCksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNoYXQuQ09OVEVOVCkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuVEQsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLmNvcHkoY2FuLCBpdGVtKSB9KQoJfSwKCWltYWdlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkvKGNhbi51c2VyLmlzTW9iaWxlPyAyOiAxKSwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCX0sCglmaWVsZDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQsIHdpZHRoKSB7IHZhciBpdGVtID0gY2FuLmJhc2UuT2JqKGRhdGEubWV0YSkKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBpdGVtLCBbY2hhdC5QTFVHSU5fU1RBVEVfSlNdLCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjaGF0LlNUT1JZLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbZGF0YS50eXBlLCBkYXRhLm5hbWUsIGRhdGEudGV4dF0sIGNtZHMpLCBjYikKCQkJfQoKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKSksIHN1Yi5Db25mV2lkdGgoaXRlbS53aWR0aCA9ICh3aWR0aHx8Y2FuLkNvbmZXaWR0aCgpKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyA0MDogMjApKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoKCQkJY2FuLmNvcmUuVmFsdWUoaXRlbSwgImF1dG8uY21kIikgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGZ1bmN0aW9uKCkgewoJCQkJc3ViLnJ1bkFjdGlvbihzdWIucmVxdWVzdCh7fSwgY2FuLmNvcmUuVmFsdWUoaXRlbSwgIm9wdHMiKSksIGNhbi5jb3JlLlZhbHVlKGl0ZW0sICJhdXRvLmNtZCIpKQoJCQl9KQoJCX0sIGNhbi5fb3V0cHV0LCB0YXJnZXQpCgl9LAoJLy8gbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCS8vIH0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwKCV9tb2RlOiB7CgkJbm9ybWFsOiB7CgkJCSJuIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubmV4dChjYW4uc3ViKSB9LAoJCQkiaiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLm5leHQoY2FuLnN1YikgfSwKCQkJIkFycm93UmlnaHQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5uZXh0KGNhbi5zdWIpIH0sCgkJCSJBcnJvd0xlZnQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5wcmV2KGNhbi5zdWIpIH0sCgkJCSJrIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwucHJldihjYW4uc3ViKSB9LAoJCQkicCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLnByZXYoY2FuLnN1YikgfSwKCgkJCSJxIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWxbIue7k+adnyJdKGV2ZW50LCBjYW4uc3ViKSB9LAoJCQkiaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsWyLpmpDol48iXShldmVudCwgY2FuLnN1YikgfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwKCV90cmFuczoge3ZpZXc6ICLop4blm74ifSwKCXBsYXk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGxpc3QgPSBbXSwgY3VycmVudCA9IFtdCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIHdpa2kuSVRFTSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS50YWdpcyhbImgxIiwgImgyIiwgImgzIl0sIGl0ZW0pICYmIGxpc3QucHVzaChjdXJyZW50ID0gW10pLCBjdXJyZW50LnB1c2goaXRlbSkKCQl9KQoKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogInN0b3J5IHdvcmQgZmxvYXQifSwgW10sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gY2FuLnJ1biwgc3ViLnN1cCA9IGNhbiwgY2FuLnN1YiA9IHN1YiwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oc3ViLCBbCgkJCQlbIuW4g+WxgCIsICLlvIDorrIiLCAi572R5qC8IiwgIuW/q+mXqiJdLCAi5aSn57qyIiwgIummlumhtSIsICLkuIrkuIDpobUiLAoJCQkJWyLoj5zljZUiXS5jb25jYXQoY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihwYWdlKSB7IHJldHVybiBwYWdlWzBdLmlubmVySFRNTCB9KSksCgkJCQki5LiL5LiA6aG1IiwgIumakOiXjyIsICLnu5PmnZ8iLAoJCQldLCBzdWIuX2FjdGlvbiwgY2FuLm9uZGV0YWlsKQoKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJrZXltYXAuZm9jdXMiLCBjYW4ucmVxdWVzdChldmVudCwge2NiOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmtleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sICJub3JtYWwiLCBjYW4ua2V5bGlzdCkKCQkJfX0pKSwgY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pCgoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCBodG1sLkJBQ0tHUk9VTkQsIGNhbi5fcm9vdC5fdGFyZ2V0LnN0eWxlLmJhY2tncm91bmQpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBjYW4uX3Jvb3QuX2hlaWdodC00Kmh0bWwuUExVR0lOX01BUkdJTi0yKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5XSURUSCwgY2FuLl9yb290Ll93aWR0aC00Kmh0bWwuUExVR0lOX01BUkdJTikKCgkJCXN1Yi51aSA9IHN1Yi5wYWdlLkFwcGVuZChzdWIsIHN1Yi5fb3V0cHV0LCBbe3ZpZXc6IGNoYXQuUFJPSkVDVH0sIHt2aWV3OiBjaGF0LkNPTlRFTlR9XSkKCQkJY2FuLmNvcmUuTGlzdChzdWIubGlzdCA9IGxpc3QsIGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7CgkJCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuYW1lOiBwYWdlWzBdLmlubmVySFRNTH0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9uZGV0YWlsLnNob3coc3ViLCBpbmRleCkgCgkJCQl9LCBmdW5jdGlvbihldmVudCkge30sIHN1Yi51aS5wcm9qZWN0KQoKCQkJCXN1Yi5wYWdlLkFwcGVuZChzdWIsIHN1Yi51aS5jb250ZW50LCBbe3ZpZXc6ICJwYWdlIisoaW5kZXg9PTA/ICIgZmlyc3QiOiAiIiksIGxpc3Q6IGNhbi5jb3JlLkxpc3QocGFnZSwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgZGF0YSA9IGl0ZW0uZGF0YXNldHx8e30KCQkJCQlzd2l0Y2ggKGRhdGEudHlwZSkgewoJCQkJCQljYXNlIHdpa2kuUFJFTUVOVTogaXRlbSA9IGl0ZW0uY2xvbmVOb2RlKGZhbHNlKTsgYnJlYWsKCQkJCQkJY2FzZSBjaGF0LkZJRUxEOiBpdGVtID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5TVE9SWSwgY2FuLmJhc2UuT2JqKGRhdGEubWV0YSksIHN1Yi51aS5jb250ZW50KS5maXJzdDsgYnJlYWsKCQkJCQkJZGVmYXVsdDogaXRlbSA9IGl0ZW0uY2xvbmVOb2RlKHRydWUpCgkJCQkJfQoJCQkJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLm9uaW1wb3J0LCBkYXRhLnR5cGVdLCBbc3ViLCBkYXRhLCBpdGVtLCBjYW4uX3Jvb3QuX3dpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOXSksIGl0ZW0KCQkJCX0pLCB9XSkKCQkJfSksIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIudWkucHJvamVjdCksIGNhbi5vbmRldGFpbC5zaG93KHN1YiwgMCkgCgoJCQlzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIFttZGIuUEFHRSwgY2xpLkZST00sIGNsaS5DT1NUXSksIHN1Yi5TdGF0dXMoY2xpLkZST00sIGNhbi5iYXNlLlRpbWUoKSkKCQkJdmFyIGZyb20gPSBuZXcgRGF0ZSgpOyBjYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDEwMH0sIGZ1bmN0aW9uKCkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCQkJc3ViLlN0YXR1cyhjbGkuQ09TVCwgY2FuLmJhc2UuRHVyYXRpb24obm93LWZyb20pKQoJCQl9KQoJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCXZpZXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLl9oZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCwgY2FuLl9oZWlnaHQpLCBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi5zdXAuX25hdm1lbnUsIGNhbi5faGVpZ2h0KSwgZGVsZXRlKGNhbi5faGVpZ2h0KQoJCX0gZWxzZSB7IGNhbi5faGVpZ2h0ID0gY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uX3RhcmdldCwgIiIpLCBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi5zdXAuX25hdm1lbnUsICIiKQoJCX0KCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWyLliKDpmaQiXSwKCXNob3c6IGZ1bmN0aW9uKHN1Yiwgd2hpY2gpIHsgc3ViLnBhZ2Uuc3R5bGVDbGFzcyhzdWIsIHN1Yi51aS5jb250ZW50LCBjaGF0LkNPTlRFTlQpCgkJc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHdpa2kuRElWX1BBR0UsIGZ1bmN0aW9uKHBhZ2UsIGluZGV4KSB7CgkJCWlmIChpbmRleCA9PSB3aGljaCB8fCBwYWdlID09IHdoaWNoKSB7CgkJCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBwYWdlLCBzdWIucGFnZS5LZXlzKGh0bWwuSDEsIGh0bWwuSDIsIGh0bWwuSDMpLCBmdW5jdGlvbihpdGVtKSB7IHN1Yi5BY3Rpb24oIuiPnOWNlSIsIGl0ZW0uaW5uZXJIVE1MKSB9KQoJCQkJc3ViLm9ubW90aW9uLnNlbGVjdChzdWIsIHN1Yi51aS5wcm9qZWN0LCBodG1sLkRJVl9JVEVNLCBpbmRleCkKCQkJCXN1Yi5TdGF0dXMobWRiLlBBR0UsIGluZGV4KzEraWNlLlBTK3N1Yi5saXN0Lmxlbmd0aCkKCQkJCXN1Yi5wYWdlLkNsYXNzTGlzdC5hZGQoc3ViLCBwYWdlLCBodG1sLlNIT1cpCgkJCX0gZWxzZSB7CgkJCQlzdWIucGFnZS5DbGFzc0xpc3QuZGVsKHN1YiwgcGFnZSwgaHRtbC5TSE9XKQoJCQl9CgkJfSkKCX0sCgluZXh0OiBmdW5jdGlvbihzdWIpIHsKCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgc3ViLmNvcmUuS2V5cyh3aWtpLkRJVl9QQUdFLCBpY2UuU0hPVyksIGZ1bmN0aW9uKHBhZ2UpIHsKCQkJcGFnZS5uZXh0U2libGluZz8gc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZS5uZXh0U2libGluZyk6IHN1Yi51c2VyLnRvYXN0KHN1YiwgY2xpLkVORCkKCQl9KQoJfSwKCXByZXY6IGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5wYWdlLlNlbGVjdChzdWIsIHN1Yi51aS5jb250ZW50LCBzdWIuY29yZS5LZXlzKHdpa2kuRElWX1BBR0UsIGljZS5TSE9XKSwgZnVuY3Rpb24ocGFnZSkgewoJCQlwYWdlLnByZXZpb3VzU2libGluZz8gc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZS5wcmV2aW91c1NpYmxpbmcpOiBzdWIudXNlci50b2FzdChzdWIsIGNsaS5FTkQpCgkJfSkKCX0sCglmbGFzaDogZnVuY3Rpb24oc3ViKSB7CgkJc3ViLmNvcmUuTmV4dChzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgd2lraS5ESVZfUEFHRSksIGZ1bmN0aW9uKHBhZ2UsIG5leHQpIHsKCQkJc3ViLnN1cC5vbmRldGFpbC5zaG93KHN1YiwgcGFnZSksIHN1Yi5vbm1vdGlvbi5kZWxheShzdWIsIGZ1bmN0aW9uKCkgeyBuZXh0KCkgfSkKCQl9KQoJfSwKCWdyaWQ6IGZ1bmN0aW9uKHN1YikgeyBzdWIucGFnZS5zdHlsZUNsYXNzKHN1Yiwgc3ViLnVpLmNvbnRlbnQsICJjb250ZW50IGdyaWQiKSB9LAoKCSLlvIDorrIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIDApIH0sCgki572R5qC8IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLmdyaWQoY2FuKSB9LAoJIuW/q+mXqiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5mbGFzaChjYW4pIH0sCgoJIuWkp+e6siI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSB9LAoJIummlumhtSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5zaG93KGNhbiwgMCkgfSwKCSLkuIrkuIDpobUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwucHJldihjYW4sIGNhbi51aS5jb250ZW50KSB9LAoJIuiPnOWNlSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5zaG93KGNhbiwgZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXgpIH0sCgki5LiL5LiA6aG1IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLm5leHQoY2FuLCBjYW4udWkuY29udGVudCkgfSwKCSLpmpDol48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX291dHB1dCkgfSwKCSLnu5PmnZ8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5fdGFyZ2V0KSB9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBzdWIpIHsgc3ViLnBhZ2UuUmVtb3ZlKHN1Yiwgc3ViLl90YXJnZXQpIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdGF0ZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjb25mLCBjYiwgdGFyZ2V0KSB7fSwKCV9wcm9jZXNzOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb25TdGF0dXMoKSAmJiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykgJiYgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvblN0YXR1cygpKSkKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgbXNnLk9wdGlvblByb2Nlc3MoKV0sIHtjYW46IGNhbiwgc3ViOiBjYW4sIG1zZzogbXNnfSkKCX0sCgoJX2xvY2F0aW9uOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBjYW4udXNlci5qdW1wcyhfYXJnKTsgcmV0dXJuIHRydWUgfSwKCV9yZXBsYWNlOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBsb2NhdGlvbi5yZXBsYWNlKF9hcmcpOyByZXR1cm4gdHJ1ZSB9LAoJX2hpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGhpc3RvcnkuYmFjaygpOyByZXR1cm4gdHJ1ZSB9LAoJX2NvbmZpcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7IGNhbi51c2VyLmNvbmZpcm0oX2FyZykgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbXNnKSwgImNvbmZpcm0iKTsgcmV0dXJuIHRydWUgfSwKCV9yZWZyZXNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5jb3JlLlRpbWVyKHBhcnNlSW50KG1zZy5PcHRpb24oIl9kZWxheSIpfHwiNTAwIiksIGZ1bmN0aW9uKCkgewoJCQljYW4uVXBkYXRlKGNhbi5yZXF1ZXN0KHt9LCB7X2NvdW50OiBwYXJzZUludChtc2cuT3B0aW9uKCJfY291bnQiKSktMX0pKQoJCX0pCgkJcmV0dXJuIHRydWUKCX0sCglfcmV3cml0ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5fYXJnLmxlbmd0aDsgaSArPSAyKSB7CgkJCWNhbi5PcHRpb24obXNnLl9hcmdbaV0sIG1zZy5fYXJnW2krMV0pLCBjYW4uQWN0aW9uKG1zZy5fYXJnW2ldLCBtc2cuX2FyZ1tpKzFdKQoJCX0KCQlyZXR1cm4gY2FuLlVwZGF0ZSgpCgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJcmV0dXJuIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpLCB0cnVlCgl9LAoJX2ZpZWxkOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IGl0ZW0udHlwZSA9IGNoYXQuU1RPUlksIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgaXRlbSwge3R5cGU6IGNoYXQuU1RPUlksIGFyZzogY2FuLmJhc2UuT2JqKGl0ZW1baWNlLkFSR10sIFtdKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIuQ29uZihjYW4uYmFzZS5PYmooaXRlbS5jb25mKSkKCQkJaWYgKHN1Yi5Db25mKCJtb2RlIikgPT0gInNpbXBsZSIpIHsgKGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KCk7IG1zZy5FY2hvKHN1Yi5Db25mKCJyZXN1bHQiKSkKCQkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkvMikKCQkJCWNhbi5vbmFwcGVuZC5fb3V0cHV0KHN1YiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fHN1Yi5Db25mKCJmZWF0dXJlLmRpc3BsYXkiKSkKCQkJfSkoKTsgcmV0dXJuIH0KCQkJdmFyIG9wdCA9IGNhbi5iYXNlLk9iaihpdGVtW2ljZS5PUFRdLCBbXSkKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKSkKCQkJc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCktNCpodG1sLlBMVUdJTl9NQVJHSU4pCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgewoJCQkJdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG9wdC5sZW5ndGg7IGkgKz0gMikgeyByZXMuT3B0aW9uKG9wdFtpXSwgb3B0W2krMV0pIH0KCQkJCWNhbi5ydW4oZXZlbnQsIChtc2dbaWNlLk1TR19QUkVGSVhdfHxbXSkuY29uY2F0KGNtZHMpLCBjYiwgdHJ1ZSkKCQkJfQoJCX0pIH0pCgkJcmV0dXJuIHRydWUKCX0sCglfaW5uZXI6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQljYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4pCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVNQTEFZLCBodG1sLkJMT0NLKQoJCXJldHVybiB0cnVlCgl9LAoKCV9ob2xkOiBmdW5jdGlvbihjYW4sIG1zZykgeyByZXR1cm4gdHJ1ZSB9LAoJX2JhY2s6IGZ1bmN0aW9uKGNhbikgeyBjYW4uX2hpc3RvcnkucG9wKCkKCQlmb3IgKHZhciBoaXMgPSBjYW4uX2hpc3RvcnkucG9wKCk7IGhpczsgaGlzID0gY2FuLl9oaXN0b3J5LnBvcCgpKSB7IGlmIChoaXNbMF0gPT0gY3R4LkFDVElPTikgeyBjb250aW51ZSB9CgkJCXZhciBpbmRleCA9IDAKCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fb3B0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnZhbHVlID0gaGlzW2luZGV4KytdfHwiIiB9KQoJCQljYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9hY3Rpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0udmFsdWUgPSBoaXNbaW5kZXgrK118fCIiIH0pCgkJCWNhbi5VcGRhdGUoKTsgYnJlYWsKCQl9CgkJIWhpcyAmJiBjYW4uVXBkYXRlKCkKCQlyZXR1cm4gdHJ1ZQoJfSwKCV9yaWNoOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgewoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuVEFCTEVfQ09OVEVOVCwgaHRtbC5UQk9EWV0sIGZ1bmN0aW9uKHRhYmxlKSB7CgkJCXZhciBoZWFkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRBQkxFX0NPTlRFTlQsIGh0bWwuVEhdLCBmdW5jdGlvbih0aCkgeyByZXR1cm4gdGguaW5uZXJUZXh0IH0pCgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCXJldHVybiB7cm93OiBjYW4uY29yZS5MaXN0KGhlYWQsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XSB9KX0KCQkJfSkpCgkJCXJldHVybiB0cnVlCgkJfSkubGVuZ3RoID09IDApIHsgY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSB9CgkJcmV0dXJuIHRydWUKCX0sCglfZ3JvdzogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsKCQlzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCkKCQlpZiAoc3ViICYmIHN1Yi5vbmltcG9ydCAmJiBzdWIub25pbXBvcnQuZ3JvdykgewoJCQlzdWIub25pbXBvcnQuZ3JvdyhzdWIsIG1zZywgX2FyZykKCQkJcmV0dXJuIHRydWUKCQl9CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9DT0RFLCBmdW5jdGlvbihkaXYpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBkaXYsIGh0bWwuTUFYX0hFSUdIVCwgNDAwKQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBkaXYsIFt7dGV4dDogX2FyZ31dKQoJCQlkaXYuc2Nyb2xsQnkoMCwgMTAwMDApCgkJCXJldHVybiB0cnVlCgkJfSkubGVuZ3RoID09IDApIHsgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgX2FyZykgfQoJCXJldHVybiB0cnVlCgl9LAoJX29wZW46IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7CgkJcmV0dXJuIGNhbi51c2VyLm9wZW4oX2FyZyksIGNhbi5VcGRhdGUoKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmk43kvZwiLCBsaXN0OiBbCgkJIuWIt+aWsOaVsOaNriIsICLliIfmjaLlhajlsY8iLCAi5YWx5Lqr5bel5YW3IiwgIuaJk+W8gOmTvuaOpSIsICLnlJ/miJDpk77mjqUiLCAi55Sf5oiQ6ISa5pysIiwgIueUn+aIkOWbvueJhyIsIFsKCQkJIuWFtuWugyIsICLliLfmlrDpobXpnaIiLCAi5L+d5a2Y5Y+C5pWwIiwgIua4heepuuWPguaVsCIsICLmianlsZXlj4LmlbAiLCAi5aSN5Yi25pWw5o2uIiwgIuS4i+i9veaVsOaNriIsICLmuIXnqbrmlbDmja4iLCAi5Yig6Zmk6YWN572uIiwgIuafpeeci+mFjee9riIsICLliKDpmaTlt6XlhbciLCLmkYTlg4/lpLQiLAoJCV0sCgldLAoJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBidXR0b25dLmNvbmNhdChjYW4uSW5wdXQoW10sIHRydWUpKSkgfSwKCgki5Yi35paw5pWw5o2uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKHt9LCBjYW4uSW5wdXQoW10sIHRydWUpKSB9LAoJIuWIh+aNouWFqOWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHN1YiA9IGNhbi5fb3V0cHV0c1tjYW4uX291dHB1dHMubGVuZ3RoLTFdCgkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBjYW4uX3RhcmdldCwgImZ1bGwiKSkgewoJCQl2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LShjYW4uX3N0YXR1cy5pbm5lclRleHQ/IDI6IDEpKmh0bWwuQUNUSU9OX0hFSUdIVDsgY2FuLnVzZXIuaXNNb2JpbGUgJiYgKGhlaWdodCAtPSAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJY2FuLl9tb2RlX2JhayA9IGNhbi5Nb2RlKCksIGNhbi5faGVpZ2h0X2JhayA9IHN1Yi5Db25mSGVpZ2h0KCksIGNhbi5fd2lkdGhfYmFrID0gc3ViLkNvbmZXaWR0aCgpCgkJCXN1Yi5Nb2RlKCJmdWxsIiksIGNhbi5Nb2RlKCJmdWxsIiksIGNhbi5Db25mSGVpZ2h0KGhlaWdodCksIGNhbi5Db25mV2lkdGgod2luZG93LmlubmVyV2lkdGgpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBzdWIuQ29uZkhlaWdodChoZWlnaHQpLCBodG1sLk1JTl9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aW5kb3cuaW5uZXJXaWR0aCkpCgkJfSBlbHNlIHsKCQkJY2FuLk1vZGUoY2FuLl9tb2RlX2Jha3x8IiIpLCBjYW4uQ29uZkhlaWdodChjYW4uX2hlaWdodF9iYWspLCBjYW4uQ29uZldpZHRoKGNhbi5fd2lkdGhfYmFrKQoJCQlzdWIuTW9kZShjYW4uX21vZGVfYmFrfHwiIiksIHN1Yi5Db25mSGVpZ2h0KGNhbi5faGVpZ2h0X2JhayksIHN1Yi5Db25mV2lkdGgoY2FuLl93aWR0aF9iYWspCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCAiIiwgaHRtbC5NSU5fV0lEVEgsICIiKQoJCX0KCQljYW4uY29yZS5DYWxsRnVuYyhbc3ViLCBjaGF0Lk9OSU1QT1JULCBodG1sLkxBWU9VVF0sIHtjYW46IHN1Yn0pCgl9LAoJIuWFseS6q+W3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IG1ldGEubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgbWV0YS5pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KGNhbi5JbnB1dChbXSwgdHJ1ZSkpLAoJCV0pCgl9LAoJIuaJk+W8gOmTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpLCBhcmdzID0gY2FuLk9wdGlvbigpOyBhcmdzLnJpdmVyID0gIiIsIGFyZ3Muc3Rvcm0gPSAiIgoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi51c2VyLmlzV2VpWGluPyBjYW4udXNlci5qdW1wcyhjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKTogY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKQoJfSwKCSLnlJ/miJDpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKSwgYXJncyA9IGNhbi5PcHRpb24oKQoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbXSwgW21kYi5MSU5LLCBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncykpXSkKCX0sCgki55Sf5oiQ6ISa5pysIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgY29uZiA9IGNhbi5Db25mKCkKCQl2YXIgYXJncyA9IGNhbi5JbnB1dCgiIiwgdHJ1ZSkuam9pbihpY2UuU1ApLCBsaXN0ID0gWwoJCQkiZXhwb3J0IGN0eF9kZXY9Iitsb2NhdGlvbi5vcmlnaW4rIjsgY3R4X3RlbXA9JChta3RlbXApOyBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCAkY3R4X2RldjsiKyIgc291cmNlICRjdHhfdGVtcCAiKyhjb25mLmluZGV4fHwiIikraWNlLlNQK2FyZ3MsCgkJCSJpc2hfc3lzX2Rldl9ydW5fY29tbWFuZCAiK2FyZ3MsICJpc2hfc3lzX2Rldl9ydW5fYWN0aW9uIiwgImlzaF9zeXNfZGV2X3J1bl9zb3VyY2UiLAoJCV0KCQljYW4udXNlci50b2FzdFNjcmlwdChjYW4sICc8ZGl2IGNsYXNzPSJzdG9yeSIgZGF0YS10eXBlPSJzcGFyayIsIGRhdGEtbmFtZT0ic2hlbGwiPicrCgkJCSc8bGFiZWw+JCA8L2xhYmVsPicrJzxzcGFuPicrbGlzdC5qb2luKCI8L3NwYW4+PGJyLz48bGFiZWw+JCA8L2xhYmVsPjxzcGFuPiIpKyc8L3NwYW4+JysnPC9kaXY+JywgY29uZi5pbmRleCtpY2UuU1ArYXJncykKCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGxpc3RbMF0pCgl9LAoJIueUn+aIkOWbvueJhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLl9uYW1lKSB9LAoKCSLliLfmlrDpobXpnaIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4uX291dHB1dHMsICItMSIpCgkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgIl9pbml0Il0sIHtjYW46IHN1YiwgbXNnOiBzdWIuX21zZywgY2I6IGZ1bmN0aW9uKG1zZykge30sIHRhcmdldDogY2FuLl9vdXRwdXR9KQoJfSwKCSLkv53lrZjlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5L+d5a2Y5Y+C5pWwIl0pIH0sCgki5riF56m65Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9vcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlID0gIiIgfSkgfSwKCSLmianlsZXlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX2FjdGlvbikgfSwKCSLlpI3liLbmlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbil8fGNhbi5vbmV4cG9ydC5ib2FyZChjYW4pKSB9LAoJIuS4i+i9veaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiZmlsZW5hbWUiLCB2YWx1ZTogbWV0YS5uYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbiksIGxpc3RbMF0sIG5mcy5DU1YpfHxjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjYW4ub25leHBvcnQuYm9hcmQoY2FuKSwgbWV0YS5uYW1lLCBuZnMuVFhUKQoJCX0pCgl9LAoJIua4heepuuaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki5Yig6Zmk5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaTphY3nva4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJjb25maWciLCBbInJlc2V0Il0pIH0sCgki5p+l55yL6YWN572uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiY29uZmlnIiwgWyJzZWxlY3QiXSwgZnVuY3Rpb24obXNnKSB7CgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJfSkgfSwKCSLluK7liqnmlofmoaMiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJoZWxwIikgfSwKCgki5omT5YyF6aG16Z2iIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgIm9ud2VicGFjayIsIGNhbi5yZXF1ZXN0KGV2ZW50KSkgfSwKCgki5pGE5YOP5aS0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBjb25zdHJhaW50cyA9IHthdWRpbzogZmFsc2UsIHZpZGVvOiB7d2lkdGg6IDIwMCwgaGVpZ2h0OiAyMDB9fQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3ZpZXc6IGN0eC5BQ1RJT059LCB7dmlldzogImNhcHR1cmUiLCBsaXN0OiBbe3R5cGU6ICJ2aWRlbyIsIF9pbml0OiBmdW5jdGlvbihpdGVtKSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewoJCQkJaXRlbS5zcmNPYmplY3QgPSBzdHJlYW0sIGl0ZW0ub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpdGVtLnBsYXkoKQoJCQkJfSwgdWkuc3RyZWFtID0gc3RyZWFtCgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSk7IH0pCgkJfX1dfV0pCgoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgWyLlhbPpl60iLCAi5oqT5ouNIl0sIHVpLmFjdGlvbiwgewoJCQki5oqT5ouNIjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciBjYW52YXMgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5jYXB0dXJlLCBbe3R5cGU6ICJjYW52YXMiLCB3aWR0aDogdWkudmlkZW8ub2Zmc2V0V2lkdGgsIGhlaWdodDogdWkudmlkZW8ub2Zmc2V0SGVpZ2h0fV0pLmZpcnN0CgkJCQljYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UodWkudmlkZW8sIDAsIDApCgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5jYXB0dXJlLCBbe2ltZzogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyksIHN0eWxlOiB7d2lkdGg6IHVpLnZpZGVvLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHVpLnZpZGVvLm9mZnNldEhlaWdodH19XSkKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCQkJfSwKCQkJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uY29yZS5MaXN0KHVpLnN0cmVhbS5nZXRUcmFja3MoKSwgZnVuY3Rpb24odHJhY2spIHsgdHJhY2suc3RvcCgpIH0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5hY3Rpb24pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS52aWRlbykKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLmNhcHR1cmUpCgkJCX0sCgkJfSkKCX0sCgoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG5hbWUpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgljbG9zZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCWNhbi5vbmFjdGlvblsi5YiH5o2i5YWo5bGPIl0oZXZlbnQsIGNhbikKCQl9IGVsc2UgewoJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkKCQl9Cgl9LAoJdXBsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLnVwbG9hZChldmVudCwgY2FuKSB9LAoJYWN0aW9uczogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl9hY3Rpb24pIH0sCgluZXh0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBtZGIuTkVYVCwgY2FuLlN0YXR1cyhtZGIuVE9UQUwpfHwwLCBjYW4uT3B0aW9uKG1kYi5MSU1JVCl8fGNhbi5BY3Rpb24obWRiLkxJTUlUKXx8IiIsIGNhbi5PcHRpb24obWRiLk9GRkVORCl8fGNhbi5BY3Rpb24obWRiLk9GRkVORCl8fCIiXSkgfSwKCXByZXY6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIG1kYi5QUkVWLCBjYW4uU3RhdHVzKG1kYi5UT1RBTCl8fDAsIGNhbi5PcHRpb24obWRiLkxJTUlUKXx8Y2FuLkFjdGlvbihtZGIuTElNSVQpfHwiIiwgY2FuLk9wdGlvbihtZGIuT0ZGRU5EKXx8Y2FuLkFjdGlvbihtZGIuT0ZGRU5EKXx8IiJdKSB9LAoJY2hhbmdlOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lLCB2YWx1ZSwgY2IpIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fb3B0aW9uLCAiIiwgZnVuY3Rpb24oaW5wdXQpIHsKCQkJaWYgKGlucHV0Lm5hbWUgPT0gbmFtZSAmJiB2YWx1ZSAhPSBpbnB1dC52YWx1ZSkgeyBpbnB1dC52YWx1ZSA9IHZhbHVlCgkJCQl2YXIgZGF0YSA9IGlucHV0LmRhdGFzZXR8fHt9OyBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoKSwgY2IpCgkJCQlyZXR1cm4gaW5wdXQKCQkJfQoJCX0pCgl9LAoKCW9wZW5Mb2NhdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5hZ2VudC5vcGVuTG9jYXRpb24oY2FuLnJlcXVlc3QoZXZlbnQpKSB9LAoJZ2V0TG9jYXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi51c2VyLmFnZW50LmdldExvY2F0aW9uKGZ1bmN0aW9uKGRhdGEpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGRhdGEpCgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsIG1kYi5URVhULCAibGF0aXR1ZGUiLCAibG9uZ2l0dWRlIl0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgYXJncykKCQkJfSkKCQl9KQoJfSwKCWdldENsaXBib2FyZERhdGE6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWZ1bmN0aW9uIGFkZCh0ZXh0KSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgW2Nhbi5iYXNlLlBhcnNlSlNPTih0ZXh0KV0pIH0KCQluYXZpZ2F0b3IuY2xpcGJvYXJkPyBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkudGhlbihhZGQpLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyKSB9KToKCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCBuYW1lOiBtZGIuVEVYVH1dLCBmdW5jdGlvbihsaXN0KSB7IGFkZChsaXN0WzBdKSB9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJdGFibGU6IGZ1bmN0aW9uKGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2c7IGlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gfQoJCXZhciByZXMgPSBbbXNnLmFwcGVuZCAmJiBtc2cuYXBwZW5kLmpvaW4oaWNlLkZTKV07IG1zZy5UYWJsZShmdW5jdGlvbihsaW5lLCBpbmRleCwgYXJyYXkpIHsKCQkJcmVzLnB1c2goY2FuLmNvcmUuSXRlbShsaW5lLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiB2YWx1ZSB9KS5qb2luKGljZS5GUykpCgkJfSkKCQlyZXR1cm4gcmVzLmpvaW4oaWNlLk5MKQoJfSwKCWJvYXJkOiBmdW5jdGlvbihjYW4pIHsgdmFyIG1zZyA9IGNhbi5fbXNnOyByZXR1cm4gbXNnLlJlc3VsdCgpIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9mb3JtLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsICJmb3JtIikKCQltc2cuUHVzaCgidHlwZSIsICJ0ZXh0IikKCQltc2cuUHVzaCgibmFtZSIsICJuYW1lIikKCQltc2cuUHVzaCgidmFsdWUiLCAiaGFydmV5c2hhbyIpCgkJbXNnLlB1c2goImFjdGlvbiIsICJrZXkiKQoKCQltc2cuUHVzaCgidHlwZSIsICJ0ZXh0IikKCQltc2cuUHVzaCgibmFtZSIsICJhZ2UiKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsICIxOCIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJzZWxlY3QiKQoJCW1zZy5QdXNoKCJuYW1lIiwgIm1hbGUiKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsICJtYWxlLGZlbWFsZSIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJ0ZXh0YXJlYSIpCgkJbXNnLlB1c2goIm5hbWUiLCAiaW50cm8iKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsICJwcm9ncmFtIikKCQltc2cuUHVzaCgiYWN0aW9uIiwgIiIpCgoJCW1zZy5QdXNoKCJ0eXBlIiwgImJ1dHRvbiIpCgkJbXNnLlB1c2goIm5hbWUiLCAic3VibWl0IikKCQltc2cuUHVzaCgidmFsdWUiLCAi5o+Q5LqkIikKCQltc2cuUHVzaCgiYWN0aW9uIiwgIiIpCgoJCXZhciBhY3Rpb24gPSAiIjsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsKCQkJc3dpdGNoICh2YWx1ZS50eXBlKSB7CgkJCQljYXNlIGh0bWwuQlVUVE9OOiBhY3Rpb24gPSBhY3Rpb258fHZhbHVlLm5hbWUKCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbCgkJCQkJCXt2aWV3OiBbImlucHV0Il0sIGxpc3Q6IFt7dHlwZTogaHRtbC5JTlBVVCwgc3R5bGU6IHt3aWR0aDogKGNhbi5Db25mV2lkdGgoKS05MCkvMn0sIGRhdGE6IHt0eXBlOiB2YWx1ZS50eXBlLCB2YWx1ZTogdmFsdWUudmFsdWV9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCQkJdmFyIGFyZ3MgPSBbY3R4LkFDVElPTiwgYWN0aW9uXQoJCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiLmFyZ3MiLCBmdW5jdGlvbihpdGVtKSB7IGFyZ3MucHVzaChpdGVtLm5hbWUsIGl0ZW0udmFsdWUpfSkKCQkJCQkJCWNhbi5ydW4oZXZlbnQsIGFyZ3MpCgkJCQkJCX19XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQljYXNlIGh0bWwuU0VMRUNUOgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuU0VMRUNULCBjbGFzc05hbWU6ICJhcmdzIiwgc3R5bGU6IHt3aWR0aDogY2FuLkNvbmZXaWR0aCgpLTEwMH0sCgkJCQkJCQlkYXRhOiB2YWx1ZSwgbGlzdDogY2FuLmNvcmUuTGlzdChjYW4uY29yZS5TcGxpdCh2YWx1ZS52YWx1ZSksIGZ1bmN0aW9uKHYpIHsgcmV0dXJuIHt0eXBlOiBodG1sLk9QVElPTiwgbmFtZTogdiwgdmFsdWU6IHYsIGlubmVyOiB2fSB9KSB9XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQljYXNlIGh0bWwuVEVYVEFSRUE6CgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJsYWJlbCJdLCBsaXN0OiBbe3RleHQ6IHZhbHVlLm5hbWV9XX0sCgkJCQkJCXt2aWV3OiBbImlucHV0Il0sIGxpc3Q6IFt7dHlwZTogaHRtbC5URVhUQVJFQSwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LCBkYXRhOiB2YWx1ZX1dfSwKCQkJCQldfV0pCgkJCQkJYnJlYWsKCQkJCWRlZmF1bHQ6CgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJsYWJlbCJdLCBsaXN0OiBbe3RleHQ6IHZhbHVlLm5hbWV9XX0sCgkJCQkJCXt2aWV3OiBbImlucHV0Il0sIGxpc3Q6IFt7dHlwZTogImlucHV0IiwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LCBkYXRhOiB2YWx1ZX1dfSwKCQkJCQldfV0pCgkJCX0KCQl9KQoJfSwKfSwgWyIiXSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L2pzb24uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgImpzb24iKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZyksIGNhbi5vbmltcG9ydC5zaG93KGNhbiwgY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSwge30pLCB0YXJnZXQpCgl9LAoJc2hvdzogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQlmdW5jdGlvbiBzaG93KGRhdGEsIHRhcmdldCwgaW5kZXgsIHRvdGFsKSB7IHZhciBsaXN0CgkJCXN3aXRjaCAodHlwZW9mIGRhdGEpIHsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGRhdGEgPT0gbnVsbCkgewoJCQkJCQlsaXN0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6ICJudWxsIn1dKS5pdGVtCgkJCQkJCWJyZWFrCgkJCQkJfQoJCQkJCWZ1bmN0aW9uIHdyYXAoYmVnaW4sIGVuZCwgYWRkLCBjYikgewoJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogYmVnaW59XSkKCQkJCQkJYWRkICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbIi4uLiIsIGh0bWwuU1BBTiwgIm5vbmNlIl19XSksIGNiKCkKCQkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IGVuZH1dKQoJCQkJCX0KCQkJCQlmdW5jdGlvbiB0b2dnbGUobGlzdCkgeyBsaXN0ICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBsaXN0KSB9CgkJCQkJZnVuY3Rpb24gX2l0ZW0oKSB7CgkJCQkJCWxpc3QgPSBsaXN0IHx8IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBodG1sLkxJU1R9XSkubGlzdAoJCQkJCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgbGlzdCwgW3t2aWV3OiBodG1sLklURU19XSkuaXRlbQoJCQkJCX0KCgkJCQkJaWYgKGNhbi5iYXNlLmlzQXJyYXkoZGF0YSkpIHsgLy8g5pWw57uECgkJCQkJCXdyYXAoIlsiLCAiXSIsIGRhdGEubGVuZ3RoID4gMCwgZnVuY3Rpb24oKSB7IGNhbi5jb3JlLkxpc3QoZGF0YSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHZhciBpdGVtID0gX2l0ZW0oKQoJCQkJCQkJc2hvdyh2YWx1ZSwgaXRlbSwgaW5kZXgsIGRhdGEubGVuZ3RoKQoJCQkJCQl9KSB9KQoJCQkJCX0gZWxzZSB7IC8vIOWvueixoQoJCQkJCQl2YXIgbGVuZ3RoID0gY2FuLmNvcmUuSXRlbShkYXRhKS5sZW5ndGgsIGNvdW50ID0gMAoJCQkJCQl3cmFwKCJ7IiwgIn0iLCBsZW5ndGggPiAwLCBmdW5jdGlvbigpIHsgY2FuLmNvcmUuSXRlbShkYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHZhciBpdGVtID0gX2l0ZW0oKQoJCQkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgaXRlbSwgW3t0ZXh0OiBbJyInK2tleSsnIicsIGh0bWwuU1BBTiwgImtleSJdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB0b2dnbGUoc3ViKSB9fSwge3RleHQ6ICc6ICd9XSkKCQkJCQkJCXZhciBzdWIgPSBzaG93KHZhbHVlLCBpdGVtLCBjb3VudCsrLCBsZW5ndGgpCgkJCQkJCX0pIH0pCgkJCQkJfQoJCQkJCWJyZWFrCgkJCQljYXNlIGxhbmcuU1RSSU5HOiAvKiDlrZfkuLIgKi8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFsnIicrZGF0YSsnIicsIGh0bWwuU1BBTiwgbGFuZy5TVFJJTkddfV0pOyBicmVhawoJCQkJZGVmYXVsdDogLyog5YW25a6DICovIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbJycrZGF0YSsnJywgaHRtbC5TUEFOLCAiY29uc3QiXX1dKQoJCQl9CgkJCShpbmRleCA8IHRvdGFsLTEpICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBpY2UuRlN9XSkKCQkJcmV0dXJuIGxpc3QKCQl9OyBzaG93KGRhdGEsIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBodG1sLklURU19XSkuaXRlbSwgMCwgMCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWyLlsZXlvIAiLCAi5oqY5Y+gIiwgIuWkjeWItiJdLAoJIuWxleW8gCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuRElWX0xJU1QsIGh0bWwuRElWX0xJU1RdLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBsaXN0LCB0cnVlKQoJCX0pCgl9LAoJIuaKmOWPoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuRElWX0xJU1QsIGh0bWwuRElWX0xJU1RdLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBsaXN0KQoJCX0pCgl9LAoJIuWkjeWItiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5fbXNnLlJlc3VsdCgpKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L21lZGlhLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5yZXF1aXJlTW9kdWxlcyhbImdpZnNob3QvZGlzdC9naWZzaG90LmpzIl0sIGZ1bmN0aW9uKCkgewoKCQl9KQoJCXZhciBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJY2FuLnVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogaHRtbC5PVVRQVVR9LCB7dmlldzogaHRtbC5ESVNQTEFZLCBzdHlsZToge2hlaWdodDogaGVpZ2h0LzR9fV0pCgkJbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCWNhbi5vbmltcG9ydC5fdmlkZW8oY2FuLCAiL2NoYXQvbWVkaWEvIit2YWx1ZS5wYXRoKQoJCX0pCgl9LAoKCV9hY3Rpb246IGZ1bmN0aW9uKGNhbiwgbGlzdCkgewoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgbGlzdHx8Y2FuLm9uYWN0aW9uLmxpc3QsIGNhbi5fYWN0aW9uLCBjYW4ub25hY3Rpb24pCgl9LAoJX2xheW91dDogZnVuY3Rpb24oY2FuLCBjYikgeyB2YXIgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCWNhbi51aS52aWRlbyA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4udWkub3V0cHV0LCBbe3R5cGU6IGh0bWwuVklERU8sIGRhdGE6IHtjb250cm9sczogImNvbnRyb2xzIn0sIHN0eWxlOiB7aGVpZ2h0OiBoZWlnaHQqMy80fSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2IodGFyZ2V0KSB9KQoJCX19XSkuZmlyc3QsIGNhbi5vbmltcG9ydC5fYWN0aW9uKGNhbiwgWyLmipPmi40iLCAi5b2V5Yi2IiwgIuWPlua2iCJdKQoJfSwKCV9pbWFnZTogZnVuY3Rpb24oY2FuLCBzcmMpIHsKCQljYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe2ltZzogc3JjLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS80fX1dLCBjYW4udWkuZGlzcGxheS5maXJzdENoaWxkLCBjYW4udWkuZGlzcGxheSkKCQlyZXR1cm4gc3JjCgl9LAoJX3ZpZGVvOiBmdW5jdGlvbihjYW4sIHNyYykgewoJCWNhbi5wYWdlLmluc2VydEJlZm9yZShjYW4sIFt7dHlwZTogaHRtbC5WSURFTywgc3JjOiBzcmMsIGRhdGE6IHtjb250cm9sczogImNvbnRyb2xzIn0sIHN0eWxlOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpLzR9fV0sIGNhbi51aS5kaXNwbGF5LmZpcnN0Q2hpbGQsIGNhbi51aS5kaXNwbGF5KQoJCXJldHVybiBzcmMKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogWyLlvZXlsY8iLCAi5pGE5YOPIl0sCgki5b2V5bGPIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbiwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKHt2aWRlbzoge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKSozLzR9fSkudGhlbihmdW5jdGlvbihzdHJlYW0pIHsgY2FuLnN0cmVhbSA9IHN0cmVhbQoJCQkJdGFyZ2V0LnNyY09iamVjdCA9IHN0cmVhbSwgdGFyZ2V0Lm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbihlKSB7IHRhcmdldC5wbGF5KCkgfQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVyci5uYW1lICsgIjogIiArIGVyci5tZXNzYWdlKSB9KQoJCX0pCgl9LAoJIuaRhOWDjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25pbXBvcnQuX2xheW91dChjYW4sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh7dmlkZW86IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkqMy80fX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7IGNhbi5zdHJlYW0gPSBzdHJlYW0KCQkJCXRhcmdldC5zcmNPYmplY3QgPSBzdHJlYW0sIHRhcmdldC5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyB0YXJnZXQucGxheSgpIH0KCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IGNhbi5taXNjLkxvZyhlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSkgfSkKCQl9KQoJfSwKCSLmipPmi40iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB3aWR0aCA9IGNhbi51aS52aWRlby5vZmZzZXRXaWR0aCwgaGVpZ2h0ID0gY2FuLnVpLnZpZGVvLm9mZnNldEhlaWdodAoJCXZhciBjYW52YXMgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0eXBlOiBodG1sLkNBTlZBUywgaGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aH1dKS5maXJzdAoJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZShjYW4udWkudmlkZW8sIDAsIDAsIHdpZHRoLCBoZWlnaHQsIDAsIDAsIHdpZHRoLCBoZWlnaHQpCgkJY2FuLm9uaW1wb3J0Ll9pbWFnZShjYW4sIGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FudmFzKQoJfSwKCSLlvZXliLYiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51aS5ibG9icyA9IFtdCgkJdmFyIHJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoY2FuLnN0cmVhbSwge21pbWVUeXBlOiAndmlkZW8vd2VibSd9KQoJCXJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IGZ1bmN0aW9uKHJlcykgeyBjYW4udWkuYmxvYnMucHVzaChyZXMuZGF0YSksIGNhbi5TdGF0dXMoInRvdGFsIiwgY2FuLnVpLmJsb2JzLmxlbmd0aCkgfQoJCXJlY29yZGVyLm9uc3RvcCA9IGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQuX2xheW91dChjYW4sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJdGFyZ2V0LnNyYyA9IGNhbi5vbmltcG9ydC5fdmlkZW8oY2FuLCBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKGNhbi51aS5ibG9icywge3R5cGU6ICd2aWRlby93ZWJtJ30pKSkKCQkJfSksIGNhbi5vbmltcG9ydC5fYWN0aW9uKGNhbiwgWyLkuIrkvKAiLCAi5Y+W5raIIl0pCgkJfQoJCXJlY29yZGVyLnN0YXJ0KDEwKSwgY2FuLnVpLnJlY29yZGVyID0gcmVjb3JkZXIKCQljYW4ub25pbXBvcnQuX2FjdGlvbihjYW4sIFsi57uT5p2fIl0pCgl9LAoJIue7k+adnyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4uY29yZS5MaXN0KGNhbi5zdHJlYW0uZ2V0VHJhY2tzKCksIGZ1bmN0aW9uKHRyYWNrKSB7IHRyYWNrLnN0b3AoKSB9KQoJfSwKCSLkuIrkvKAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe3R5cGU6ICJ0ZXh0IiwgbmFtZTogImZpbGUiLCB2YWx1ZTogInNvbWUifV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJbXNnLl91cGxvYWQgPSBuZXcgRmlsZShjYW4udWkuYmxvYnMsIChsaXN0WzBdfHwic29tZSIpKyIud2VibSIpIAoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBodG1sLlVQTE9BRCkKCQl9KQoJfSwKCSLlj5bmtogiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLm91dHB1dCksIGNhbi5vbmltcG9ydC5fYWN0aW9uKGNhbikKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogWyLlhbPpl60iLCAi5oqT5ouNIiwgIuW9leWItiJdLAoJIuaIkOWbviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlnaWZzaG90LmNyZWF0ZUdJRih7CgkJCSd2aWRlbyc6IFtVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKGNhbi51aS5ibG9icywge3R5cGUgOiAndmlkZW8vd2VibSd9KSldLAoJCX0sZnVuY3Rpb24ob2JqKSB7CgkJCWlmKCFvYmouZXJyb3IpIHsKCQkJCWNhbi51c2VyLmRvd25sb2FkKGNhbiwgb2JqLmltYWdlLCAic29tZSIsICJnaWYiKQoJCQl9CgkJfSk7Cgl9LAoJIuWbnuaUviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkub3V0cHV0LCBbe3R5cGU6IGh0bWwuVklERU8sIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKX19XSkudmlkZW8KCQl2aWRlby5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKGNhbi51aS5ibG9icywge3R5cGUgOiAndmlkZW8vd2VibSd9KSksIHZpZGVvLnBsYXkoKQoJfSwKCSLkuIvovb0iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuZG93bmxvYWQoY2FuLCBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKGNhbi51aS5ibG9icywge3R5cGU6ICJ2aWRlby93ZWJtIn0pKSwgInJlY29yZC53ZWJtIikKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyJ0b3RhbCJdfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3BhcnNlLmpzIgpWb2xjYW5vcyhjaGF0Lk9OQVBQRU5ELCB7aGVscDogIua4suafk+W8leaTjiIsIGxpc3Q6IFsieyIsICJ9IiwgaHRtbC5IRUFELCBodG1sLkxFRlQsIGh0bWwuTUFJTiwgaHRtbC5GT09UXSwKCV9wYXJzZTogZnVuY3Rpb24oY2FuLCB0ZXh0LCBuYW1lLCBoZWlnaHQpIHsgdmFyIHN0YWNrID0gW3tfZGVlcDogLTEsIGxpc3Q6IFtdfV0sIGZpbmlzaCA9IGZhbHNlCgkJY2FuLmNvcmUuTGlzdChjYW4uY29yZS5TcGxpdCh0ZXh0LCBpY2UuTkwsIGljZS5OTCwgaWNlLk5MKSwgZnVuY3Rpb24obGluZSkgeyBpZiAobGluZSA9PSAiIiB8fCBmaW5pc2gpIHsgcmV0dXJuIH0KCQkJdmFyIGRlZXAgPSAwOyBmb3IgKHZhciBpID0gMDsgaSA8IGxpbmUubGVuZ3RoOyBpKyspIHsgaWYgKGxpbmVbaV0gPT0gaWNlLlNQKSB7IGRlZXArKyB9IGVsc2UgaWYgKGxpbmVbaV0gPT0gaWNlLlRCKSB7IGRlZXAgKz0gNCB9IGVsc2UgeyBicmVhayB9IH0KCQkJZm9yICh2YXIgaSA9IHN0YWNrLmxlbmd0aC0xOyBpID4gMDsgaS0tKSB7IGlmIChkZWVwIDw9IHN0YWNrW2ldLl9kZWVwKSB7IHN0YWNrLnBvcCgpIH0gfQoKCQkJdmFyIGxzID0gY2FuLmNvcmUuU3BsaXQobGluZSk7IGlmIChsc1swXSA9PSAicmV0dXJuICIpIHsgcmV0dXJuIGZpbmlzaCA9IHRydWUgfQoJCQl2YXIgaXRlbSA9IHtfZGVlcDogZGVlcCwgbGlzdDogW119OyB2YXIgbGlzdCA9IHN0YWNrW3N0YWNrLmxlbmd0aC0xXTsgbGlzdC5saXN0LnB1c2goaXRlbSk7IGlmIChkZWVwID4gbGlzdC5fZGVlcCkgeyBzdGFjay5wdXNoKGl0ZW0pIH0KCQkJY2FuLm9uYXBwZW5kLmxpc3QuaW5kZXhPZihsc1swXSkgPiAtMSB8fCBjYW4ub25hcHBlbmRbbHNbMF1dPyBpdGVtLnR5cGUgPSBsc1swXTogaXRlbS5uYW1lID0gbHNbMF0KCQkJZm9yICh2YXIgaSA9IDE7IGkgPCBscy5sZW5ndGg7IGkgKz0gMikgeyBjYW4uY29yZS5WYWx1ZShpdGVtLCBsc1tpXSwgbHNbaSsxXSkgfQoJCX0pCgkJcmV0dXJuIHt0eXBlOiBuYW1lLCBzdHlsZToge2hlaWdodDogaGVpZ2h0fHxjYW4uQ29uZkhlaWdodCgpfHx3aW5kb3cuaW5uZXJIZWlnaHR9LCBsaXN0OiBzdGFja1swXS5saXN0fQoJfSwKCXBhcnNlOiBmdW5jdGlvbihjYW4sIGxpc3QsIHRhcmdldCwga2V5cywgZGF0YSwgdHlwZSkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fb3V0cHV0LCBkYXRhID0gZGF0YXx8e30KCQlpZiAoIWxpc3QpIHsgcmV0dXJuIH0gZWxzZSBpZiAoY2FuLmJhc2UuaXNBcnJheShsaXN0KSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihtZXRhLCBpbmRleCkgeyByZXR1cm4gY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgbWV0YSwgdGFyZ2V0LCBrZXlzLCBkYXRhLCB0eXBlKSB9KQoKCQl9IGVsc2UgaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGxpc3QpKSB7CgkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpc3QsICIiLCAiOj1AIik7IGlmIChscy5sZW5ndGggPT0gMSkgewoJCQkJdmFyIG1ldGEgPSB0eXBlPyB7dHlwZTogdHlwZSwgbmFtZTogbHNbMF19OiB7dHlwZTogbHNbMF19CgkJCX0gZWxzZSB7CgkJCQl2YXIgbWV0YSA9IHtuYW1lOiBsc1swXX07IGZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgc3dpdGNoIChsc1tpXSkgewoJCQkJCWNhc2UgIkAiOiBtZXRhLmFjdGlvbiA9IGxzW2krMV07IGJyZWFrCgkJCQkJY2FzZSAiPSI6IG1ldGEudmFsdWUgPSBsc1tpKzFdOyBicmVhawoJCQkJCWNhc2UgIjoiOiBtZXRhLnR5cGUgPSBsc1tpKzFdOyBicmVhawoJCQkJfSB9CgkJCX0KCgkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc09iamVjdChsaXN0KSkgeyB2YXIgbWV0YSA9IGxpc3QgfQoKCQl2YXIgaXRlbSA9IHt2aWV3OiBtZXRhLnR5cGV9OyBzd2l0Y2ggKG1ldGEudHlwZSkgewoJCQljYXNlIGh0bWwuSEVBRDogbWV0YS5zdWJ0eXBlID0gaHRtbC5NRU5VCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmhlYWQgPSB0YXJnZXQgfQoJCQkJYnJlYWsKCQkJY2FzZSAieyI6IGlmIChtZXRhLl9kZWVwID4gMCkgeyByZXR1cm4gfQoJCQkJaXRlbS52aWV3ID0gbWV0YS50eXBlID0gaHRtbC5MRUZUIC8vIG5vIGJyZWFrCgkJCWNhc2UgaHRtbC5MRUZUOiBtZXRhLnN1YnR5cGUgPSBodG1sLklURU0KCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCksIGRhdGEubGVmdCA9IHRhcmdldAoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0LnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldC5wYXJlbnROb2RlLCBjYW4ucGFnZS5LZXlzKGh0bWwuRElWX0xBWU9VVF9IRUFELCBodG1sLkRJVl9MQVlPVVRfRk9PVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQloZWlnaHQgLT0gaXRlbS5vZmZzZXRIZWlnaHQgLy8g6auY5bqmCgkJCQkJCQl9CgkJCQkJCX0pLCBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5IRUlHSFQsIGhlaWdodCkKCQkJCQl9KQoJCQkJfQoJCQkJYnJlYWsKCQkJY2FzZSAifSI6IGlmIChtZXRhLl9kZWVwID4gMCkgeyByZXR1cm4gfQoJCQkJaXRlbS52aWV3ID0gbWV0YS50eXBlID0gaHRtbC5NQUlOIC8vIG5vIGJyZWFrCgkJCWNhc2UgaHRtbC5NQUlOOgoJCQkJbWV0YS5pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGh0bWwuTEFZT1VUKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0LnBhcmVudE5vZGUub2Zmc2V0SGVpZ2h0CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldC5wYXJlbnROb2RlLCBjYW4ucGFnZS5LZXlzKGh0bWwuRElWX0xBWU9VVF9IRUFELCBodG1sLkRJVl9MQVlPVVRfRk9PVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQloZWlnaHQgLT0gaXRlbS5vZmZzZXRIZWlnaHQgLy8g6auY5bqmCgkJCQkJCQl9CgkJCQkJCX0pLCBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5IRUlHSFQsIGhlaWdodCkKCQkJCQl9LCBkYXRhLm1haW4/IDEwOiAxMDApCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHZhciB3aWR0aCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldFdpZHRoCgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldC5wYXJlbnROb2RlLCBodG1sLkRJVl9MQVlPVVRfTEVGVCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkJaWYgKGl0ZW0ucGFyZW50Tm9kZSA9PSB0YXJnZXQucGFyZW50Tm9kZSkgewoJCQkJCQkJCXdpZHRoIC09IGl0ZW0ub2Zmc2V0V2lkdGggLy8g5a695bqmCgkJCQkJCQl9CgkJCQkJCX0pLCBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5XSURUSCwgd2lkdGgpCgkJCQkJfSwgZGF0YS5tYWluPyAxMDogMTAwKQoKCQkJCQlpZiAoIWRhdGEubWFpbikgeyBkYXRhLm1haW4gPSB0YXJnZXQKCQkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGRhdGEubWFpbl9pbml0ICYmIGRhdGEubWFpbl9pbml0KCkgfSwgMzAwKQoJCQkJCX0KCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgaHRtbC5GT09UOiBtZXRhLnN1YnR5cGUgPSBodG1sLk1FTlUKCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCksIGRhdGEuZm9vdCA9IHRhcmdldCB9CgkJCQlicmVhawoJCQlkZWZhdWx0OiB2YXIgY2IgPSBjYW4ub25hcHBlbmRbbWV0YS50eXBlXTsgY2IgJiYgY2IoY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQsIGRhdGEpCgkJfQoJCWlmIChjYW4uYmFzZS5pc09iamVjdChtZXRhLnN0eWxlKSkgeyBpdGVtLnN0eWxlID0gbWV0YS5zdHlsZSB9CgkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKG1ldGEuc3R5bGUpKSB7IGl0ZW0uY2xhc3NOYW1lID0gbWV0YS5zdHlsZSB9CgoJCW1ldGEua2V5cyA9IG1ldGEua2V5c3x8Y2FuLmNvcmUuS2V5cyhrZXlzLCBtZXRhLm5hbWV8fG1ldGEudHlwZSkgCgkJdmFyIGNiID0gY2FuLm9uYXBwZW5kW3R5cGVdOyAhY2FuLm9uYXBwZW5kW21ldGEudHlwZV0gJiYgY2IgJiYgY2IoY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQsIGRhdGEpCgkJaXRlbS5faW5pdCA9IGl0ZW0uX2luaXR8fGZ1bmN0aW9uKHRhcmdldCkgeyBtZXRhLmxpc3QgJiYgY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgbWV0YS5saXN0LCB0YXJnZXQsIG1ldGEua2V5cywgZGF0YSwgbWV0YS5zdWJ0eXBlfHx0eXBlKSB9CgkJaXRlbS50YXJnZXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtpdGVtXSkuZmlyc3Q7IG1ldGEuaW5pdCAmJiBtZXRhLmluaXQoaXRlbS50YXJnZXQpCgkJY2FuLmNvcmUuSXRlbUNCKG1ldGEsIGZ1bmN0aW9uKGtleSwgY2IpIHsgaXRlbS50YXJnZXRba2V5XSA9IGNhbi5iYXNlLmlzRnVuYyhjYik/IGNiOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2IsIGNhbi5yZXF1ZXN0KGV2ZW50LCBtZXRhKSkgfSB9KQoJfSwKCXVzZXJuYW1lOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCkgewoJCWNhbi5iYXNlLkNvcHkoaXRlbSwge3ZpZXc6IFthYWEuVVNFUk5BTUUsIGh0bWwuRElWXSwgbGlzdDogW3t2aWV3OiBbaHRtbC5OQU1FLCBodG1sLkRJViwgY2FuLnVzZXIuaW5mby51c2Vybmlja119LCB7dmlldzogW2h0bWwuSUNPTiwgaHRtbC5ESVZdLCBsaXN0OiBbe2ltZzogY2FuLnVzZXIuaW5mby5hdmF0YXJ9XX1dfSkKCX0sCgltZW51OiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCkgewoJCWNhbi5iYXNlLkNvcHkoaXRlbSwgbWV0YS5saXN0ICYmIG1ldGEubGlzdC5sZW5ndGggPiAwPyB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIG1ldGEubmFtZV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwge30sIGNhbi5jb3JlLkxpc3QobWV0YS5saXN0LCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgfSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBidXR0b24pIHx8IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBodG1sLk1FTlUsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7aXRlbTogYnV0dG9ufSkpCgkJCX0pCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKCkge319OiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIG1ldGEubmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBtZXRhLm5hbWUpIHx8IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBodG1sLk1FTlUsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7aXRlbTogbWV0YS5uYW1lfSkpCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKCkge319KQoJfSwKCWl0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKSB7IGl0ZW0udmlldyA9IGl0ZW0udmlld3x8aHRtbC5MSVNUCgkJaWYgKGRlY29kZVVSSUNvbXBvbmVudChsb2NhdGlvbi5oYXNoKSA9PSAiIyIrbWV0YS5rZXlzKSB7CgkJCWRhdGEubWFpbl9pbml0ID0gZnVuY3Rpb24oKSB7IGNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpIH0KCQl9CgkJaWYgKG1ldGEuYWN0aW9uID09IGljZS5BVVRPICYmICFsb2NhdGlvbi5oYXNoKSB7CgkJCWRhdGEubWFpbl9pbml0ID0gZnVuY3Rpb24oKSB7IGNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpIH0KCQl9CgoJCWNhbi5iYXNlLkNvcHkoaXRlbSwge3ZpZXc6ICJzb21lIiwgbGlzdDogW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgbWV0YS5uYW1lfHxtZXRhXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYXBwZW5kLl9zaG93KGNhbiwgbWV0YSwgZGF0YSksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBldmVudC50YXJnZXQubmV4dFNpYmxpbmcpCgkJfX0sIHt2aWV3OiBodG1sLkxJU1QsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgbWV0YS5saXN0ICYmIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEubGlzdCwgdGFyZ2V0LCBtZXRhLmtleXMsIGRhdGEsIGh0bWwuSVRFTSkgfX1dLCBfaW5pdDogZnVuY3Rpb24oKSB7fX0pCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQlpdGVtLmxpc3QgPSBbe3ZpZXc6ICJuYW1lIn0sIHt2aWV3OiBodG1sLlBBR0V9XSwgaXRlbS5faW5pdCA9IGZ1bmN0aW9uKF90YXJnZXQsIHVpKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLnBhZ2UsIFt7dmlldzogaHRtbC5JTlBVVCwgbGlzdDogW3t0eXBlOiBodG1sLklOUFVULCBvbmtleXVwOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgX3RhcmdldCwgW2h0bWwuRElWX1BBR0UsIGh0bWwuRElWX0lURU1dLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIGl0ZW0sIGh0bWwuSElERSwgaXRlbS5pbm5lclRleHQuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpID09IC0xKQoJCQkJfSkKCQkJfX1dfV0pCgkJCWNhbi5jb3JlLkxpc3QobWV0YS5saXN0LCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkubmFtZSwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uYW1lfHxpdGVtXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgX3RhcmdldCwgW1todG1sLkRJVl9QQUdFLCBodG1sLkRJVl9MSVNUXV0sIGluZGV4KQoJCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNLCBpbmRleCkKCQkJCQl1aS5wYWdlLnNjcm9sbFRvKDAsIDApCgkJCQl9fV0pCgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5wYWdlLCBbe3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBldmVudC50YXJnZXQubmV4dFNpYmxpbmcsIGh0bWwuU0VMRUNUKQoJCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNLCBpbmRleCkKCQkJCX19LCB7dmlldzogW2h0bWwuTElTVF0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCQljYW4ub25hcHBlbmQucGFyc2UoY2FuLCBpdGVtLmxpc3QsIHRhcmdldCwgY2FuLmNvcmUuS2V5cyhtZXRhLmtleXMsIGl0ZW0ubmFtZSksIGRhdGEsIGh0bWwuSVRFTSkKCQkJCX19XSkKCQkJfSkKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHZhciBoZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLnBhZ2UsIGh0bWwuSEVJR0hULCBoZWlnaHQtMTAtKG1ldGEuc3R5bGU/IDA6IHVpLm5hbWUub2Zmc2V0SGVpZ2h0KSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgX3RhcmdldCwgaHRtbC5IRUlHSFQsIGhlaWdodC0xMCkKCQkJfSksIGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLm5hbWUsIGh0bWwuRElWX0lURU0pWzBdLmNsaWNrKCkKCQl9Cgl9LAoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgZGF0YSkgeyB2YXIgdGFyZ2V0ID0gZGF0YS5tYWluCgkJaWYgKCFtZXRhLmluZGV4KSB7IHJldHVybiB9CgkJdmFyIHVybCA9IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogY2FuLm1pc2MuU2VhcmNoKGNhbiwgInBvZCIpLCBjbWQ6IG1ldGEuaW5kZXh9KQoJCWlmIChtZXRhLmFjdGlvbiA9PSAicHVzaCIpIHsgcmV0dXJuIGNhbi51c2VyLmp1bXBzKHVybCkgfQoJCWlmIChtZXRhLmFjdGlvbiA9PSAib3BlbiIpIHsgcmV0dXJuIGNhbi51c2VyLm9wZW4odXJsKSB9CgoJCWxvY2F0aW9uLmhhc2ggPSBtZXRhLmtleXMKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBtZXRhLmtleXMgfSwgdGFyZ2V0KSkgeyByZXR1cm4gfQoKCQlpZiAoY2FuLmJhc2UuRXh0KG1ldGEuaW5kZXgpID09IG5mcy5aTUwgfHwgY2FuLmJhc2UuRXh0KG1ldGEuaW5kZXgpID09IG5mcy5JTUwpIHsKCQkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLklGUkFNRSwgc3JjOiAiL2NoYXQvY21kLyIrbWV0YS5pbmRleCwgaGVpZ2h0OiB0YXJnZXQub2Zmc2V0SGVpZ2h0LCB3aWR0aDogdGFyZ2V0Lm9mZnNldFdpZHRofV0pCgkJfQoKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge2luZGV4OiBtZXRhLmluZGV4LCBhcmdzOiBjYW4uYmFzZS5PYmoobWV0YS5hcmdzKX0sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBzdWIuX2luZGV4fHxtZXRhLmluZGV4LCBjbWRzLCBjYikgfQoJCQlzdWIuQ29uZkhlaWdodCh0YXJnZXQub2Zmc2V0SGVpZ2h0LTMqaHRtbC5BQ1RJT05fSEVJR0hULTYqaHRtbC5QTFVHSU5fTUFSR0lOKSwgc3ViLkNvbmZXaWR0aCh0YXJnZXQub2Zmc2V0V2lkdGgtNCpodG1sLlBMVUdJTl9NQVJHSU4pCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCQl9LCB0YXJnZXQpCgl9LAp9KQoKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3BpZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCXZhciBjb2xvciA9IFtjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRV0KCQl2YXIgY29sb3IgPSBbIiMzMzAwRkYiLCAiIzIxOTZGMyIsICIjNENBRjUwIiwgIiNDRERDMzkiLCAiI0ZGRUIzQiIsICIjOUMyN0IwIiwgIiM3OTU1NDgiLCAiIzYwN0Q4QiIsICIjQ0MzM0ZGIl0KCQl2YXIgaGVpZ2h0ID0gbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGNhbi5Db25mSGVpZ2h0KCkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAiZHJhdyIpCgkJY2FuLnJlcXVpcmUoWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQuX3Nob3coY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIFtdLmNvbmNhdChtc2cuYXBwZW5kLCBbIndlaWdodCJdKSkKCQkJdmFyIG1hcmdpbiA9IGhlaWdodC84LCByID0gaGVpZ2h0LzItbWFyZ2luOyBjYW4uc3ZnLlZhbChodG1sLldJRFRILCAyKihyK21hcmdpbikpLCBjYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgMioocittYXJnaW4pKQoJCQljYW4ub25pbXBvcnQuX2RyYXcoY2FuLCBtc2csIGNhbi5Db25mKG1kYi5GSUVMRCksIGNvbG9yLCByK21hcmdpbiwgcittYXJnaW4sIHIsIG1hcmdpbiwgMCkKCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCktaGVpZ2h0KQoJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgdHJ1ZSkKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBudWxsLCBjYW4udWkucHJvamVjdCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLlRSLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRyLCB7b25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmltcG9ydC5fZHJhdyhjYW4sIG1zZywgY2FuLkNvbmYobWRiLkZJRUxEKSwgY29sb3IsIHIrbWFyZ2luLCByK21hcmdpbiwgciwgbWFyZ2luLCBpbmRleC0xKQoJCQkJfX0pCgkJCX0pCgkJfSkKCX0sCglfZHJhdzogZnVuY3Rpb24oY2FuLCBtc2csIGZpZWxkLCBjb2xvciwgeCwgeSwgciwgbWFyZ2luLCB3aGljaCkgeyBmaWVsZCA9IGZpZWxkfHxtZGIuVkFMVUUKCQlmdW5jdGlvbiBwb3MoeCwgeSwgciwgYW5nbGUpIHsgYW5nbGUgLT0gOTA7IHJldHVybiBbeCArIHIgKiBNYXRoLmNvcyhhbmdsZSAqIE1hdGguUEkgLyAxODApLCB5ICsgciAqIE1hdGguc2luKGFuZ2xlICogTWF0aC5QSSAvIDE4MCldIH0KCQlmdW5jdGlvbiBwaWUoeCwgeSwgciwgYmVnaW4sIHNwYW4sIGNvbG9yLCBjYikgeyBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRILCBzdHlsZToga2l0LkRpY3QoCgkJCWh0bWwuU1RST0tFX1dJRFRILCAxLCBodG1sLlNUUk9LRSwgY29sb3IsIGh0bWwuRklMTCwgY29sb3IsICJkIiwgY2FuLmJhc2Uuam9pbnMoWwoJCQkJWyJNIiwgeCwgeV0sIFsiTCJdLmNvbmNhdChwb3MoeCwgeSwgciwgYmVnaW4pKSwgWyJBIiwgciwgciwgIjAiLCBzcGFuPjE4MD8gIjEiOiAiMCIsICIxIl0uY29uY2F0KHBvcyh4LCB5LCByLCBiZWdpbitzcGFuKSksIFsiWiJdCgkJCV0sIGljZS5TUCwgaWNlLkZTKSwKCQkpLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQpIH0gfSkgfQoKCQlpZiAod2hpY2ggPT0gY2FuLl9sYXN0KSB7IHJldHVybiB9IGNhbi5fbGFzdCA9IHdoaWNoCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZyksIGNhbi5zdmcuVmFsdWUobWRiLkNPVU5ULCAwKQoJCXZhciB0b3RhbCA9IDA7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyB0b3RhbCArPSBjYW4ub25pbXBvcnQuX3BhcnNlSW50KGNhbiwgdmFsdWVbZmllbGRdKSB9KQoJCXZhciBiZWdpbiA9IDA7IG1zZ1tjbGkuQ09MT1JdID0gW10sIG1zZ1sid2VpZ2h0Il0gPSBbXSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgc3BhbiA9IGNhbi5vbmltcG9ydC5fcGFyc2VJbnQoY2FuLCB2YWx1ZVtmaWVsZF0pL3RvdGFsKjM2MAoJCQl2YXIgcCA9IGluZGV4PT13aGljaD8gcG9zKHgsIHksIG1hcmdpbiwgYmVnaW4rc3Bhbi8yKTogW3gsIHldLCBjID0gY29sb3JbaW5kZXglY29sb3IubGVuZ3RoXQoKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAxKSB7CgkJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5DSVJDTEUsIHBvaW50OiBbe3g6IHgsIHk6IHl9LCB7eDogeCwgeTogeStyfV0sIHN0eWxlOiB7ZmlsbDogY29sb3JbMF19fSkKCQkJfSBlbHNlIHsKCQkJCXBpZShwWzBdLCBwWzFdLCByLCBiZWdpbiwgc3BhbiwgYywgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uaW1wb3J0Ll9kcmF3KGNhbiwgbXNnLCBmaWVsZCwgY29sb3IsIHgsIHksIHIsIG1hcmdpbiwgaW5kZXgpIH0pLCBiZWdpbiArPSBzcGFuCgkJCX0KCQkJbXNnLlB1c2goY2xpLkNPTE9SLCAnPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6JytjKyciPiAgICAgPC9zcGFuPicpCgkJCW1zZy5QdXNoKCJ3ZWlnaHQiLCBwYXJzZUludChzcGFuKjEwMC8zNjApKyIlIikKCQkJaWYgKGluZGV4ID09IHdoaWNoKSB7IGNhbi5TdGF0dXModmFsdWUpLCBjYW4uU3RhdHVzKCJ3ZWlnaHQiLCBwYXJzZUludChzcGFuKjEwMC8zNjApKyIlIikgfQoJCX0pCgl9LAoJX3BhcnNlSW50OiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAibWkiKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAiZ2kiKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAiZyIpKSB7IHJldHVybiBwYXJzZUludCh2YWx1ZSkqMTAwMDAwMDAwMCB9CgkJaWYgKGNhbi5iYXNlLmVuZFdpdGgodmFsdWUsICJtIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwIH0KCQlyZXR1cm4gcGFyc2VJbnQodmFsdWUpCgl9Cn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgX3Nob3c6IGZ1bmN0aW9uKGNhbikge319KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vc3Rvcnkvc3BpZGUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKTsgaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHJldHVybiB9CgoJCWNhbi5Db25mRGVmYXVsdCh7cm9vdDogImljZSIsIGZpZWxkOiBtc2cuYXBwZW5kWzBdLCBzcGxpdDogaWNlLlBTfSkKCQljYW4uZGlyX3Jvb3QgPSBtc2cuT3B0aW9uKG5mcy5ESVJfUk9PVCl8fGNhbi5Db25mKCJyb290IikKCQljYW4uX3RyZWUgPSBjYW4ub25pbXBvcnQuX3RyZWUoY2FuLCBtc2cuVGFibGUoKSwgY2FuLkNvbmYobWRiLkZJRUxEKSwgY2FuLkNvbmYobGV4LlNQTElUKSkKCQlpZiAoIWNhbi5fdHJlZVsiIl0pIHsgcmV0dXJuIH0gY2FuLl90cmVlWyIiXS5uYW1lID0gY2FuLkNvbmYoInJvb3QiKQoKCQljYW4uc2l6ZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNpemUiKXx8MjQpCgkJY2FuLm1hcmdpbiA9IHBhcnNlSW50KGNhbi5BY3Rpb24oIm1hcmdpbiIpfHwzMCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJkcmF3IikKCQljYW4ucmVxdWlyZShbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIiwgIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCX0pCgl9LAoJX3RyZWU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgZmllbGQsIHNwbGl0KSB7CgkJdmFyIG5vZGUgPSB7fTsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGlmICghaXRlbVtmaWVsZF0pIHsgcmV0dXJuIH0KCQkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS50cmltUHJlZml4KGl0ZW1bZmllbGRdLCBjYW4uZGlyX3Jvb3Qrc3BsaXQpLnNwbGl0KHNwbGl0KSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBhcnJheSkgewoJCQkJdmFyIGxhc3QgPSBhcnJheS5zbGljZSgwLCBpbmRleCkuam9pbihzcGxpdCl8fCIiLCBuYW1lID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgrMSkuam9pbihzcGxpdCkKCQkJCWlmICghdmFsdWUgfHwgbm9kZVtuYW1lXSkgeyByZXR1cm4gfQoKCQkJCW5vZGVbbGFzdF0gPSBub2RlW2xhc3RdfHx7bmFtZTogbGFzdCwgbWV0YToge30sIGxpc3Q6IFtdfQoJCQkJbm9kZVtsYXN0XS5saXN0LnB1c2gobm9kZVtuYW1lXSA9IHsKCQkJCQluYW1lOiB2YWx1ZSsoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyAiIjogc3BsaXQpLAoJCQkJCW1ldGE6IGl0ZW0sIGxpc3Q6IFtdLCBsYXN0OiBub2RlW2xhc3RdLAoJCQkJCWZpbGU6IGl0ZW1bZmllbGRdfHxpdGVtLmZpbGUsIGhpZGU6IHRydWUsCgkJCQl9KQoJCQl9KQoJCX0pCgkJcmV0dXJuIG5vZGUKCX0sCglfaGVpZ2h0OiBmdW5jdGlvbihjYW4sIHRyZWUsIGRlZXApIHsgaWYgKCF0cmVlKSB7IHJldHVybiAwIH0KCQl0cmVlLmRlZXAgPSBkZWVwfHwwCgkJaWYgKHRyZWUubGlzdC5sZW5ndGggPT0gMCB8fCB0cmVlLmhpZGUpIHsgcmV0dXJuIHRyZWUuaGVpZ2h0ID0gMSB9CgoJCXZhciBoZWlnaHQgPSAwOyBjYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQloZWlnaHQgKz0gY2FuLm9uaW1wb3J0Ll9oZWlnaHQoY2FuLCBpdGVtLCAoZGVlcHx8MCkrMSkKCQl9KQoJCXJldHVybiB0cmVlLmhlaWdodCA9IGhlaWdodAoJfSwKCV93aWR0aDogZnVuY3Rpb24oY2FuLCB0cmVlLCBkZWVwKSB7IGlmICghdHJlZSkgeyByZXR1cm4gMCB9CgkJdHJlZS5kZWVwID0gZGVlcHx8MAoJCWlmICh0cmVlLmxpc3QubGVuZ3RoID09IDAgfHwgdHJlZS5oaWRlKSB7CgkJCXRyZWUudmlldyA9IGNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogaHRtbC5URVhULCBwb2ludDogW3t4OiAwLCB5OiAwfV0sIHN0eWxlOiB7aW5uZXI6IHRyZWUubmFtZX19KQoJCQlyZXR1cm4gdHJlZS53aWR0aCA9IHRyZWUudmlldy5WYWwoInRleHRMZW5ndGgiKStjYW4ubWFyZ2luCgkJfQoKCQl2YXIgd2lkdGggPSAwOyBjYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQl3aWR0aCArPSBjYW4ub25pbXBvcnQuX3dpZHRoKGNhbiwgaXRlbSwgKGRlZXB8fDApKzEpCgkJfSkKCQlyZXR1cm4gdHJlZS53aWR0aCA9IHdpZHRoCgl9LAoJX2NvbG9yOiBmdW5jdGlvbihjYW4sIHRyZWUpIHsKCQlyZXR1cm4gdHJlZS5tZXRhJiZ0cmVlLm1ldGEuY29sb3IgfHwgKHRyZWUubGlzdCA9PSAwPyBjbGkuUFVSUExFOiBjbGkuWUVMTE9XKQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIHAgPSBjYW4uQWN0aW9uKGljZS5WSUVXLCBjYW4uc3VwLnZpZXd8fGNhbi5BY3Rpb24oaWNlLlZJRVcpKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25pbXBvcnQuX3Nob3coY2FuLCBjYW4ucmVxdWVzdCgpKQoJCWNhbi5zdmcuVmFsKGh0bWwuRk9OVF9TSVpFLCBjYW4uQWN0aW9uKCJzaXplIikpCgkJY2FuLm9uYWN0aW9uW3BdKGV2ZW50LCBjYW4sIHApCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIueUqOaIt+aTjeS9nCIsIGxpc3Q6IFsKCQlbaWNlLlZJRVcsICLmqKrlkJEiLCAi57q15ZCRIl0sIFsic2l6ZSIsIDI0LCAzMiwgNDhdLCBbIm1hcmdpbiIsIDMwLCA1MCwgMTAwXSwKCV0sCglzaXplOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zaXplID0gcGFyc2VJbnQoY2FuLkFjdGlvbigic2l6ZSIpfHwzMCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJbWFyZ2luOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXJnaW4gPSBwYXJzZUludChjYW4uQWN0aW9uKCJtYXJnaW4iKXx8MzApLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCSLmqKrlkJEiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25pbXBvcnQuX2hlaWdodChjYW4sIGNhbi5fdHJlZVsiIl0pCgkJY2FuLnN1cC52aWV3ID0gYnV0dG9uLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uc3ZnKQoKCQljYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgY2FuLl90cmVlWyIiXS5oZWlnaHQqY2FuLm1hcmdpbisyKmNhbi5tYXJnaW4pCgkJY2FuLndpZHRoID0gMCwgY2FuLm9uYWN0aW9uLl9kcmF3X2hvcml6b250YWwoY2FuLCBjYW4uX3RyZWVbIiJdLCBjYW4ubWFyZ2luLCBjYW4ubWFyZ2luKQoJCWNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIGNhbi53aWR0aCtjYW4ubWFyZ2luKQoJfSwKCSLnurXlkJEiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25pbXBvcnQuX3dpZHRoKGNhbiwgY2FuLl90cmVlWyIiXSkKCQljYW4uc3VwLnZpZXcgPSBidXR0b24sIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5zdmcpCgoJCWNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIGNhbi5fdHJlZVsiIl0ud2lkdGgrMipjYW4ubWFyZ2luKQoJCWNhbi5oZWlnaHQgPSAwLCBjYW4ub25hY3Rpb24uX2RyYXdfdmVydGljYWwoY2FuLCBjYW4uX3RyZWVbIiJdLCBjYW4ubWFyZ2luLCBjYW4ubWFyZ2luK2Nhbi5tYXJnaW4pCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGNhbi5oZWlnaHQrY2FuLm1hcmdpbikKCX0sCglfZHJhdzogZnVuY3Rpb24oY2FuLCB0cmVlLCB4LCB5LCBzdHlsZSkgeyB2YXIgY29sb3IgPSBjYW4ub25pbXBvcnQuX2NvbG9yKGNhbiwgdHJlZSkKCQl0cmVlLnZpZXcgPSBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IGh0bWwuVEVYVCwgcG9pbnQ6IFt7eDogeCwgeTogeX1dLCBzdHlsZTogY2FuLmJhc2UuQ29weShraXQuRGljdCgKCQkJaHRtbC5TVFJPS0UsIGNvbG9yLCBodG1sLkZJTEwsIGNvbG9yLCBodG1sLlRFWFRfQU5DSE9SLCAic3RhcnQiLCAiaW5uZXIiLCB0cmVlLm5hbWV8fHRyZWUuZmlsZSwKCQkpLCBzdHlsZSksIH0pLCBjYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCB0cmVlLnZpZXcsIGNhbiwgdHJlZSkKCX0sCglfZHJhd192ZXJ0aWNhbDogZnVuY3Rpb24oY2FuLCB0cmVlLCB4LCB5KSB7IHRyZWUueCA9IHgsIHRyZWUueSA9IHkKCQljYW4ub25hY3Rpb24uX2RyYXcoY2FuLCB0cmVlLCB4K3RyZWUud2lkdGgvMiwgeSwga2l0LkRpY3QoaHRtbC5URVhUX0FOQ0hPUiwgIm1pZGRsZSIpKQoKCQl0cmVlLmhlaWdodCA9IGNhbi5tYXJnaW4KCQlpZiAoeSt0cmVlLmhlaWdodCA+IGNhbi5oZWlnaHQpIHsgY2FuLmhlaWdodCA9IHkrdHJlZS5oZWlnaHQgfQoJCWlmICh0cmVlLmhpZGUpIHsgcmV0dXJuIH0KCgkJdmFyIG9mZnNldCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlBBVEgyViwgcG9pbnQ6IFsKCQkJCXt4OiB4K3RyZWUud2lkdGgvMiwgeTogeSt0cmVlLmhlaWdodC1jYW4ubWFyZ2luLzJ9LAoJCQkJe3g6IHgrb2Zmc2V0K2l0ZW0ud2lkdGgvMiwgeTogeSt0cmVlLmhlaWdodCtjYW4ubWFyZ2luLzJ9LAoJCQldLCBzdHlsZToge3N0cm9rZTogY2xpLkNZQU59fSkKCgkJCWNhbi5vbmFjdGlvbi5fZHJhd192ZXJ0aWNhbChjYW4sIGl0ZW0sIHgrb2Zmc2V0LCB5K3RyZWUuaGVpZ2h0K2Nhbi5tYXJnaW4pCgkJCW9mZnNldCArPSBpdGVtLndpZHRoCgkJfSkKCX0sCglfZHJhd19ob3Jpem9udGFsOiBmdW5jdGlvbihjYW4sIHRyZWUsIHgsIHkpIHsgdHJlZS54ID0geCwgdHJlZS55ID0geQoJCWNhbi5vbmFjdGlvbi5fZHJhdyhjYW4sIHRyZWUsIHgsIHkrdHJlZS5oZWlnaHQqY2FuLm1hcmdpbi8yLCBraXQuRGljdChodG1sLlRFWFRfQU5DSE9SLCAic3RhcnQiKSkKCgkJdHJlZS53aWR0aCA9IHRyZWUudmlldy5WYWwoInRleHRMZW5ndGgiKXx8KHRyZWUubmFtZXx8IiIpLmxlbmd0aCoxMAoJCWlmICh4K3RyZWUud2lkdGggPiBjYW4ud2lkdGgpIHsgY2FuLndpZHRoID0geCt0cmVlLndpZHRoIH0KCQlpZiAodHJlZS5oaWRlKSB7IHJldHVybiB9CgoJCXZhciBvZmZzZXQgPSAwOyBjYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRIMkgsIHBvaW50OiBbCgkJCQl7eDogeCt0cmVlLndpZHRoK2Nhbi5tYXJnaW4vOCwgeTogeSt0cmVlLmhlaWdodCpjYW4ubWFyZ2luLzJ9LAoJCQkJe3g6IHgrdHJlZS53aWR0aCtjYW4ubWFyZ2luKjItMipjYW4ubWFyZ2luLzgsIHk6IHkrb2Zmc2V0K2l0ZW0uaGVpZ2h0KmNhbi5tYXJnaW4vMn0KCQkJXSwgc3R5bGU6IHtzdHJva2U6IGNsaS5DWUFOfX0pCgoJCQljYW4ub25hY3Rpb24uX2RyYXdfaG9yaXpvbnRhbChjYW4sIGl0ZW0sIHgrdHJlZS53aWR0aCsyKmNhbi5tYXJnaW4sIHkrb2Zmc2V0KQoJCQlvZmZzZXQgKz0gaXRlbS5oZWlnaHQqY2FuLm1hcmdpbgoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIueUqOaIt+S6pOS6kiIsCglvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRyZWUpIHsgdmFyIHkgPSB0cmVlLnkrdHJlZS5oZWlnaHQqY2FuLm1hcmdpbi8yCgkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLnBvcyksIGNhbi5wb3MgPSBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5SRUNULCBwb2ludDogWwoJCQl7eDogdHJlZS54LWNhbi5tYXJnaW4vNCwgeTogeS1jYW4ubWFyZ2luLzJ9LCB7eDogdHJlZS54K3RyZWUud2lkdGgrY2FuLm1hcmdpbi84LCB5OiB5K2Nhbi5tYXJnaW4vMn0sCgkJXSwgc3R5bGU6IHtzdHJva2U6IGNsaS5SRUQsIGZpbGw6IGh0bWwuTk9ORX19KSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgl9LAoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdHJlZSkgewoJCWlmICh0cmVlLmxpc3QubGVuZ3RoID4gMCB8fCB0cmVlLnRhZ3MgfHwgdHJlZS5uYW1lLmVuZHNXaXRoKGNhbi5Db25mKGxleC5TUExJVCkpKSB7CgkJCXJldHVybiB0cmVlLmhpZGUgPSAhdHJlZS5oaWRlLCBjYW4ub25hY3Rpb25bY2FuLkFjdGlvbihpY2UuVklFVyldKGV2ZW50LCBjYW4pCgkJfQoKCQlmb3IgKHZhciBub2RlID0gdHJlZTsgbm9kZTsgbm9kZSA9IG5vZGUubGFzdCkgeyBjYW4ucmVxdWVzdChldmVudCwgbm9kZS5tZXRhKSB9CgoJCWNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIGNhbi5iYXNlLk9iaihjYW4uQ29uZihsZXguUFJFRklYKSwgW10pLmNvbmNhdChbY2FuLk9wdGlvbigicmVwb3MiKXx8IiIsIHRyZWUuZmlsZXx8IiIsIHRyZWUubmFtZV0pLCBmdW5jdGlvbihtc2cpIHsKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHJldHVybiBjYW4ub25kZXRhaWwucGx1Z2luKGNhbiwgIndlYi5jb2RlLmlubmVyIiwgW2Nhbi5kaXJfcm9vdCwgdHJlZS5maWxlLCB0cmVlLmxpbmVdLCBjb2RlLklOTkVSKSB9CgkJCWlmIChtc2cuQXBwZW5kKG1kYi5JTkRFWCkpIHsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7IGNhbi5vbmRldGFpbC5wbHVnaW4oY2FuLCB2YWx1ZS5pbmRleCwgW10pIH0pOyByZXR1cm4gfQoKCQkJaWYgKG1zZy5PcHRpb24obGV4LlNQTElUKSkgewoJCQkJdHJlZS5saXN0ID0gY2FuLm9uaW1wb3J0Ll90cmVlKGNhbiwgbXNnLlRhYmxlKCksIG1zZy5PcHRpb24obWRiLkZJRUxEKXx8bXNnLmFwcGVuZFswXSwgbXNnLk9wdGlvbihsZXguU1BMSVQpKVsiIl0ubGlzdHx8W10KCQkJCWNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0ubGFzdCA9IHRyZWUgfSkKCQkJfSBlbHNlIHsKCQkJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IHRyZWUubGlzdC5wdXNoKHsKCQkJCQl0eXBlOiAidGFncyIsIG5hbWU6IGl0ZW0ubmFtZXx8aXRlbS5maWxlfHxpdGVtW21zZy5hcHBlbmRbMF1dLAoJCQkJCW1ldGE6IGl0ZW0sIGxpc3Q6IFtdLCBsYXN0OiB0cmVlLAoJCQkJCWZpbGU6IGl0ZW0uZmlsZSwgbGluZTogaXRlbS5saW5lLCBoaWRlOiB0cnVlLAoJCQkJfSkgfSkKCQkJfQoJCQl0cmVlLnRhZ3MgPSB0cnVlLCB0cmVlLmhpZGUgPSAhdHJlZS5oaWRlLCBjYW4ub25hY3Rpb25bY2FuLkFjdGlvbihpY2UuVklFVyldKGV2ZW50LCBjYW4pCgkJfSwgdHJ1ZSkKCX0sCglwbHVnaW46IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIGFyZ3MsIHByZWZpeCkgewoJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogY2hhdC5GTE9BVCwgaW5kZXg6IGluZGV4LCBhcmdzOiBhcmdzLCBtb2RlOiAiZmxvYXQifSwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCksIHByZWZpeHx8W2ljZS5SVU4sIGluZGV4XSwgY21kcywgY2IpIH0KCQkJc3ViLk1vZGUoImZsb2F0IiksIGNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkgeyBsZWZ0ID0gbGVmdHx8MAoJCQkJdmFyIHRvcCA9IGNhbi5Nb2RlKCkgPT0gdW5kZWZpbmVkPyAxMjA6IDA7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyB0b3AgPSBjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAwOiA0OCB9CgkJCQlzdWIuQ29uZkhlaWdodChoZWlnaHQtdG9wLTIqaHRtbC5BQ1RJT05fSEVJR0hULShjYW4udXNlci5pc01vYmlsZSYmIWNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDIqaHRtbC5BQ1RJT05fSEVJR0hUOiAwKSksIHN1Yi5Db25mV2lkdGgod2lkdGgpCgkJCQljYW4ub25tb3Rpb24ubW92ZShjYW4sIHN1Yi5fdGFyZ2V0LCB7cG9zaXRpb246IGh0bWwuRklYRUQsIGxlZnQ6IGxlZnQsIHRvcDogdG9wfSkKCQkJfSkKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3RyZW5kLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyk7IGlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gfQoJCWlmIChtc2cuT3B0aW9uKCJicmFuY2giKSkgeyByZXR1cm4gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSB9CgoJCWNhbi5kYXRhID0gbXNnLlRhYmxlKCksIGNhbi5vbmltcG9ydC5fc3VtKGNhbikKCQljYW4uQWN0aW9uKGh0bWwuSEVJR0hULCBtc2cuT3B0aW9uKGh0bWwuSEVJR0hUKXx8aWNlLkFVVE8pCgkJY2FuLkFjdGlvbihodG1sLlNQRUVELCBwYXJzZUludChtc2cuT3B0aW9uKGh0bWwuU1BFRUQpfHwiMTAwIikpCgoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgImRyYXciKQoJCWNhbi5yZXF1aXJlKFsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLCAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJfSkKCX0sCglfc3VtOiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgYmVnaW4gPSAiIiwgY291bnQgPSAwLCByZXN0ID0gMCwgYWRkID0gMCwgZGVsID0gMCwgbWF4ID0gMAoJCWNhbi5tYXggPSAwLCBjYW4ubWluID0gMCwgY2FuLmxpc3QgPSBjYW4uY29yZS5MaXN0KGNhbi5kYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKCQkJdmFyIGxpbmUgPSB7CgkJCQlkYXRlOiB2YWx1ZVtjYW4uX21zZy5hcHBlbmRbMF1dLAoJCQkJdGV4dDogdmFsdWVbY2FuLl9tc2cuYXBwZW5kWzRdXSwKCQkJCWFkZDogcGFyc2VJbnQodmFsdWVbY2FuLl9tc2cuYXBwZW5kWzFdXSksCgkJCQlkZWw6IHBhcnNlSW50KHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFsyXV0pLAoJCQl9CgoJCQlsaW5lLmJlZ2luID0gcmVzdAoJCQlsaW5lLm1heCA9IHJlc3QgKyBsaW5lLmFkZAoJCQlsaW5lLm1pbiA9IHJlc3QgLSBsaW5lLmRlbAoJCQlsaW5lLmNsb3NlID0gcmVzdCArIGxpbmUuYWRkIC0gbGluZS5kZWwKCgkJCWJlZ2luID0gYmVnaW4gfHwgdmFsdWUuZGF0ZSwgY291bnQrKwoJCQlyZXN0ID0gbGluZS5jbG9zZSwgYWRkICs9IGxpbmUuYWRkLCBkZWwgKz0gbGluZS5kZWwKCgkJCWlmIChsaW5lLm1heCAtIGxpbmUubWluID4gbWF4KSB7IG1heCA9IGxpbmUubWF4IC0gbGluZS5taW4gfQoJCQlpZiAobGluZS5tYXggPiBjYW4ubWF4KSB7IGNhbi5tYXggPSBsaW5lLm1heCB9CgkJCWlmIChsaW5lLm1pbiA8IGNhbi5taW4pIHsgY2FuLm1pbiA9IGxpbmUubWluIH0KCQkJcmV0dXJuIGxpbmUKCQl9KQoJCWNhbi5TdGF0dXMoeyJmcm9tIjogYmVnaW4sICJjb21taXQiOiBjb3VudCwgInRvdGFsIjogYWRkK2RlbCwgIm1heCI6IG1heH0pCgl9LAoJX2xheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIGhlaWdodCA9IGNhbi5vbmV4cG9ydC5oZWlnaHQoY2FuKQoJCXZhciB3aWR0aCA9IHBhcnNlSW50KGNhbi5Db25mV2lkdGgoKSksIHNwYWNlID0gcGFyc2VJbnQoY2FuLkFjdGlvbigic3BhY2UiKXx8IjEwIikKCQl2YXIgc3RlcCA9IHBhcnNlSW50KCh3aWR0aC0yKnNwYWNlKSAvIGNhbi5saXN0Lmxlbmd0aCkKCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpLCBjYW4ub25pbXBvcnQuX3Nob3coY2FuLCBjYW4uX21zZykKCQljYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgaGVpZ2h0KSwgY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgd2lkdGgpCgkJcmV0dXJuIHtoZWlnaHQ6IGhlaWdodCwgd2lkdGg6IHdpZHRoLCBzcGFjZTogc3BhY2UsIHN0ZXA6IHN0ZXB9Cgl9LAoJbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCQljYW4ub25hY3Rpb25bY2FuLkFjdGlvbihpY2UuVklFVyldKHt9LCBjYW4pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsKCQlbaWNlLlZJRVcsICLotovlir/lm74iLCAi5p+x54q25Zu+IiwgIuaVsOaNrua6kCJdLAoJCVtodG1sLkhFSUdIVCwgMTAwLCAyMDAsIDQwMCwgNjAwLCA4MDAsIGljZS5BVVRPXSwKCQlbInNwYWNlIiwgMTAsIDIwLCA1MCwgMTAwXSwKCQlbaHRtbC5TUEVFRCwgMTAsIDIwLCA1MCwgMTAwXSwKCV0sCgki6LaL5Yq/5Zu+IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYXJncyA9IGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbikKCQlmdW5jdGlvbiBzY2FsZSh5KSB7IHJldHVybiAoeSAtIGNhbi5taW4pLyhjYW4ubWF4IC0gY2FuLm1pbikqKGFyZ3MuaGVpZ2h0LTIqYXJncy5zcGFjZSkgfQoJCWZ1bmN0aW9uIG9yZGVyKGluZGV4LCB4LCB5KSB7IHJldHVybiB7eDogYXJncy5zcGFjZSthcmdzLnN0ZXAqaW5kZXgreCwgeTogYXJncy5oZWlnaHQtYXJncy5zcGFjZS1zY2FsZSh5KX0gfQoKCQl2YXIgYmxhY2sgPSBjYW4ub25pbXBvcnQuZ3JvdXAoY2FuLCBjbGkuQkxBQ0ssIGtpdC5EaWN0KGh0bWwuU1RST0tFLCBjbGkuQkxBQ0ssIGh0bWwuRklMTCwgY2xpLkJMQUNLKSkKCQl2YXIgd2hpdGUgPSBjYW4ub25pbXBvcnQuZ3JvdXAoY2FuLCBjbGkuV0hJVEUsIGtpdC5EaWN0KGh0bWwuU1RST0tFLCBjbGkuV0hJVEUsIGh0bWwuRklMTCwgY2xpLldISVRFKSkKCgkJY2FuLmNvcmUuTmV4dChjYW4ubGlzdCwgZnVuY3Rpb24obGluZSwgbmV4dCwgaW5kZXgpIHsgY2FuLlN0YXR1cyhsaW5lKQoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5MSU5FLCBwb2ludDogWwoJCQkJb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC8yLCBsaW5lLm1pbiksIG9yZGVyKGluZGV4LCBhcmdzLnN0ZXAvMiwgbGluZS5tYXgpLAoJCQldfSwgbGluZS5iZWdpbiA8IGxpbmUuY2xvc2U/IHdoaXRlOiBibGFjaykKCgkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCQlvcmRlcihpbmRleCwgYXJncy5zdGVwLzQsIGxpbmUuY2xvc2UpLCBvcmRlcihpbmRleCwgYXJncy5zdGVwLzQqMywgbGluZS5iZWdpbiksCgkJCV0sIF9pbml0OiBmdW5jdGlvbih2aWV3KSB7CgkJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCBmdW5jdGlvbihrZXksIGNiKSB7IHZpZXdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4sIGxpbmUpIH0gfSkKCQkJfX0sIGxpbmUuYmVnaW4gPCBsaW5lLmNsb3NlPyB3aGl0ZTogYmxhY2spCgoJCQljYW4uY29yZS5UaW1lcihwYXJzZUludChjYW4uQWN0aW9uKGh0bWwuU1BFRUQpKSwgbmV4dCkKCQl9KQoJfSwKCSLmn7Hnirblm74iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBhcmdzID0gY2FuLm9uaW1wb3J0Ll9sYXlvdXQoY2FuKQoJCXZhciBtYXggPSB7fSwgbWluID0ge307IGNhbi5jb3JlLkxpc3QoY2FuLl9tc2cuYXBwZW5kLCBmdW5jdGlvbihrZXksIHdoaWNoKSB7CgkJCWNhbi5jb3JlLkxpc3QoY2FuLmRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgewoJCQkJdmFyIHYgPSBwYXJzZUludCh2YWx1ZVtrZXldKXx8MDsgaWYgKGluZGV4ID09IDApIHsKCQkJCQlyZXR1cm4gbWF4W2tleV0gPSB2LCBtaW5ba2V5XSA9IHYKCQkJCX0KCQkJCWlmICh2ID4gbWF4W2tleV0pIHsgbWF4W2tleV0gPSB2IH0KCQkJCWlmICh2IDwgbWluW2tleV0pIHsgbWluW2tleV0gPSB2IH0KCQkJfSkKCQl9KQoKCQlmdW5jdGlvbiBzY2FsZShrZXksIHkpIHsgcmV0dXJuICh5IC0gbWluW2tleV0pLyhtYXhba2V5XSAtIG1pbltrZXldKSooYXJncy5oZWlnaHQtMiphcmdzLnNwYWNlKSB9CgoJCXZhciB3aWR0aCA9IGFyZ3Muc3RlcC9jYW4uX21zZy5hcHBlbmQubGVuZ3RoLCB3aGljaCA9IDAKCQljYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCB3aGljaCkgeyBpZiAobWF4W2tleV0gPT0gbWluW2tleV0pIHsgcmV0dXJuIH0KCQkJY2FuLmNvcmUuTmV4dChjYW4uZGF0YSwgZnVuY3Rpb24obGluZSwgbmV4dCwgaW5kZXgpIHsgaWYgKHBhcnNlSW50KGxpbmVba2V5XSkgPT0gMCkgeyByZXR1cm4gfQoJCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUkVDVCwgcG9pbnQ6IFsKCQkJCQl7eDogYXJncy5zcGFjZSthcmdzLnN0ZXAqaW5kZXgrd2lkdGgqd2hpY2grMiwgeTogYXJncy5oZWlnaHQtYXJncy5zcGFjZS1zY2FsZShrZXksIHBhcnNlSW50KGxpbmVba2V5XSkpfSwKCQkJCQl7eDogYXJncy5zcGFjZSthcmdzLnN0ZXAqaW5kZXgrd2lkdGgqKHdoaWNoKzEpKzIsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2V9LAoJCQkJXSwgc3R5bGU6IGtpdC5EaWN0KGh0bWwuU1RST0tFX1dJRFRILCAxLCBodG1sLlNUUk9LRSwgY2xpLldISVRFLCBodG1sLkZJTEwsIGNsaS5XSElURSwgc3ZnLlJYLCAwLCBzdmcuUlksIDApLCBfaW5pdDogZnVuY3Rpb24odmlldykgewoJCQkJCWNhbi5jb3JlLkl0ZW1DQihjYW4ub25kZXRhaWwsIGZ1bmN0aW9uKGtleSwgY2IpIHsgdmlld1trZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgY2IoZXZlbnQsIGNhbiwgbGluZSkgfSB9KQoJCQkJfX0pLCBjYW4uY29yZS5UaW1lcihwYXJzZUludChjYW4uQWN0aW9uKGh0bWwuU1BFRUQpKSwgbmV4dCkKCQkJfSksIHdoaWNoKysKCQl9KQoJfSwKCSLmlbDmja7mupAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgY2FuLl9tc2csIG51bGwsIGNhbi5fb3V0cHV0KQoJfSwKCgloZWlnaHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCglzcGFjZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCXNwZWVkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIueUqOaIt+S6pOS6kiIsCglvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpbmUpIHsgY2FuLlN0YXR1cyhsaW5lKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsiZnJvbSIsICJjb21taXQiLCAidG90YWwiLCAibWF4IiwgImRhdGUiLCAidGV4dCIsICJhZGQiLCAiZGVsIl0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbikgeyB2YXIgaGVpZ2h0ID0gY2FuLkFjdGlvbihodG1sLkhFSUdIVCkKCQlpZiAoaGVpZ2h0ID09IGljZS5BVVRPKSB7IGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQkJLy8gY2FuLmlzRnVsbE1vZGUoKSB8fCAoaGVpZ2h0ID0gY2FuLmJhc2UuTWF4KGNhbi5Db25mSGVpZ2h0KCksIDYwMCkpCgkJfQoJCWlmIChoZWlnaHQgPCAyMDApIHsgaGVpZ2h0ID0gMjAwIH0KCQlyZXR1cm4gcGFyc2VJbnQoaGVpZ2h0fHxjYW4uX3Jvb3QuX2hlaWdodC8yKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3ZpZGVvLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5zZWxlY3QoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZyksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLnBsYXkoZXZlbnQsIGNhbikgfSkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgInRkIGEiLCBmdW5jdGlvbihhKSB7CgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGEsIHt0YXJnZXQ6ICIifSkKCQl9KQoJfSwKCXNlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQltc2cuQ2xlYXIoKSwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGNhbi5PcHRpb24oInRhZ3MiKSwgZnVuY3Rpb24oYSwgaW5kZXgpIHsKCQkJbXNnLlB1c2gobWRiLklOREVYLCBpbmRleCkKCQkJbXNnLlB1c2gobWRiLk5BTUUsIGEuaW5uZXJUZXh0KQoJCQltc2cuUHVzaChtZGIuTElOSywgYS5ocmVmKQoJCQlhLmhyZWYgPT0gbG9jYXRpb24uaHJlZiAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLlRSLCBmdW5jdGlvbih0ciwgaSkgewoJCQkJCWktMSA9PSBpbmRleCAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdHIsICJzZWxlY3QiKQoJCQkJfSkKCQkJfSkKCQl9KQoJCW1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMsIEpTT04uc3RyaW5naWZ5KFsKCQkJe25hbWU6ICJ0aW1lIiwgdmFsdWU6IGNhbi5iYXNlLlRpbWUobnVsbCwgIiV5LSVtLSVkICVIOiVNOiVTIil9LAoJCQl7bmFtZTogImNvdW50IiwgdmFsdWU6IG1zZy5MZW5ndGgoKX0sCgkJXSkpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsCgluZXh0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4uX21zZwoJCW1zZy5UYWJsZShmdW5jdGlvbihsaW5lLCBpbmRleCkgewoJCQlpZiAobGluZS5saW5rID09IGxvY2F0aW9uLmhyZWYpIHsKCQkJCWxvY2F0aW9uLmhyZWYgPSBtc2cubGlua1tpbmRleCsxXQoJCQl9CgkJfSkKCX0sCglwbGF5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0QWxsKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGh0bWwuVklERU8sIGZ1bmN0aW9uKHZpZGVvKSB7CgkJCXZpZGVvLnBsYXliYWNrUmF0ZSA9IHBhcnNlRmxvYXQoY2FuLk9wdGlvbigicmF0ZSIpKQoJCQl2aWRlby5jdXJyZW50VGltZSA9IHBhcnNlSW50KGNhbi5PcHRpb24oInNraXAiKSkKCQkJdmlkZW8ub250aW1ldXBkYXRlID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmICh2aWRlby5jdXJyZW50VGltZSA+IHBhcnNlSW50KGNhbi5PcHRpb24oIm5leHQiKSkpIHsKCQkJCQljYW4ub25hY3Rpb24ubmV4dChldmVudCwgY2FuKQoJCQkJfQoJCQl9LCB2aWRlby5wbGF5KCksIHZpZGVvLnJlcXVlc3RGdWxsc2NyZWVuKCkKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3RhYmxlLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQl2YXIgY2JzID0gY2FuLm9uaW1wb3J0W2Nhbi5Db25mKGN0eC5TVFlMRSldOyBpZiAoY2FuLmJhc2UuaXNGdW5jKGNicykpIHsKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgY2FuLl9hcmdzW2N0eC5TVFlMRV0pCgkJCWNhbi5jb3JlLkNhbGxGdW5jKGNicywgewoJCQkJY2FuOiBjYW4sIG1zZzogbXNnLCB0YXJnZXQ6IHRhcmdldCwKCQkJCWxpc3Q6IG1zZy5UYWJsZSgpLAoJCQl9KQoJCQlyZXR1cm4gY2JzKGNhbiwgbXNnLCB0YXJnZXQpCgkJfQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBudWxsLCB0YXJnZXQpCgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuLCB0YXJnZXQpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAoKCXpvbmU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgdGFyZ2V0KSB7IHZhciBjb2xvciA9IFsiIl0KCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHpvbmUsIGluZGV4KSB7IGNhbi5iYXNlLmlzU3RyaW5nKHpvbmUpICYmICh6b25lID0ge25hbWU6IHpvbmV9KTsgcmV0dXJuIHpvbmUgJiYge3ZpZXc6IGh0bWwuWk9ORSsiICIrem9uZS5uYW1lLCBsaXN0OiBbCgkJCXt2aWV3OiBodG1sLk5BTUUsIGlubmVyOiBjYW4udXNlci50cmFucyhjYW4sIHpvbmUubmFtZSksIHN0eWxlOiB7YmFja2dyb3VuZDogY29sb3JbaW5kZXglY29sb3IubGVuZ3RoXX0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIHpvbmUuX2FjdGlvbiksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB6b25lLl90YXJnZXQpCgkJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXpvbmUuX21lbnU/IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgem9uZS5fbWVudS5tZXRhLCB6b25lLl9tZW51Lmxpc3R8fGNhbi5jb3JlLkl0ZW0oem9uZS5fbWVudS5tZXRhKSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQkJCShtZXRhW2J1dHRvbl18fGNhbi5vbmFjdGlvbltidXR0b25dKShldmVudCwgY2FuLCBidXR0b24pCgkJCQl9KTogY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCB7CgkJCQkJIuaKmOWPoCI6IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0xJU1QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIGZhbHNlKSB9KSB9LAoJCQkJCSLlsZXlvIAiOiBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9MSVNULCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCB0cnVlKSB9KSB9LAoJCQkJCSLliLfmlrAiOiBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgem9uZS5fdGFyZ2V0KSwgem9uZS5faW5pdCh6b25lLl90YXJnZXQpIH0sCgkJCQl9LCBbIuaKmOWPoCIsICLlsZXlvIAiLCAi5Yi35pawIl0pCgkJCX19LAoJCQl7dmlldzogaHRtbC5BQ1RJT04sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgem9uZS5fYWN0aW9uID0gdGFyZ2V0CgkJCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFt7aW5wdXQ6IGh0bWwuVEVYVCwgcGxhY2Vob2xkZXI6ICJzZWFyY2giLCBvbmtleXVwOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHpvbmUuX3RhcmdldCwgaHRtbC5ESVZfTElTVCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgdHJ1ZSkgfSkKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0lURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbSwgImRpdi5uYW1lIiwgZnVuY3Rpb24obmFtZSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgbmFtZS5pbm5lclRleHQuaW5kZXhPZihldmVudC50YXJnZXQudmFsdWUpID4gLTEpIH0pCgkJCQkJfSkKCQkJCX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgZXZlbnQudGFyZ2V0KQoJCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyB6b25lLl9zZWFyY2ggPSB0YXJnZXQKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIHRhcmdldCwgdGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLm9mZnNldFdpZHRoLTMyKSB9KQoJCQkJCS8vIGNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCB7bmFtZTogem9uZS5uYW1lfSwgdGFyZ2V0KQoJCQkJfX1dLCB0YXJnZXQsIHt9KQoJCQl9fSwKCQkJe3ZpZXc6IGh0bWwuTElTVCwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4udWlbem9uZS5uYW1lXSA9IHpvbmUKCQkJCXpvbmUuX3RhcmdldCA9IHRhcmdldCwgem9uZS5yZWZyZXNoID0gZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIHpvbmUuX2luaXQodGFyZ2V0KSB9CgkJCQljYW4uYmFzZS5pc0Z1bmMoem9uZS5faW5pdCkgJiYgem9uZS5faW5pdCh0YXJnZXQsIHpvbmUpCgkJCX19CgkJXX0gfSkpCgl9LAoJdHJlZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBmaWVsZCwgc3BsaXQsIGNiLCB0YXJnZXQsIG5vZGUpIHsKCQlub2RlID0gbm9kZXx8eyIiOiB0YXJnZXR9OyBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbVtmaWVsZF0gJiYgY2FuLmNvcmUuTGlzdChpdGVtW2ZpZWxkXS5zcGxpdChzcGxpdCksIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsgaWYgKCF2YWx1ZSkgeyByZXR1cm4gfQoJCQkJdmFyIGxhc3QgPSBhcnJheS5zbGljZSgwLCBpbmRleCkuam9pbihzcGxpdCksIG5hbWUgPSBhcnJheS5zbGljZSgwLCBpbmRleCsxKS5qb2luKHNwbGl0KQoJCQkJaWYgKG5vZGVbbmFtZV0pIHsgcmV0dXJuIH0KCQkJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIG5vZGVbbGFzdF0sIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbe3ZpZXc6IFsic3dpdGNoIiwgImRpdiIsIChpbmRleD09YXJyYXkubGVuZ3RoLTE/IiI6IiYjODk2MzsiKV19LCB7dmlldzogWyJuYW1lIiwgaHRtbC5ESVYsIHZhbHVlKyhpbmRleD09YXJyYXkubGVuZ3RoLTE/IiI6IiIpXSwgX2luaXQ6IGl0ZW0uX2luaXR9XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlpbmRleCA8IGFycmF5Lmxlbmd0aCAtIDE/IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBub2RlW25hbWVdLCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpWyJzd2l0Y2giXSwgIm9wZW4iKQoJCQkJCX0sIGZ1bmN0aW9uKCkgewoJCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgdWlbInN3aXRjaCJdLCAib3BlbiIpCgkJCQkJfSk6IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0pCgkJCQkJaWYgKG5vZGVbbmFtZV0uY2hpbGRFbGVtZW50Q291bnQgPT0gMikgeyBub2RlW25hbWVdLmZpcnN0Q2hpbGQuY2xpY2soKSB9CgkJCQl9fSwge3ZpZXc6IGh0bWwuTElTVCwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9LCBfaW5pdDogZnVuY3Rpb24obGlzdCkgeyBpdGVtLmV4cGFuZCAmJiBjYW4ucGFnZS5zdHlsZShjYW4sIGxpc3QsIGh0bWwuRElTUExBWSwgaHRtbC5CTE9DSykgfX1dKQoJCQkJbm9kZVtuYW1lXSA9IHVpLmxpc3QKCQkJfSkKCQl9KTsgcmV0dXJuIG5vZGUKCX0sCglsaXN0OiBmdW5jdGlvbihjYW4sIHJvb3QsIGNiLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCWNhbi5jb3JlLkxpc3Qocm9vdC5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5tZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSkgfHwgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIHVpLmxpc3QpCgkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkRJVl9JVEVNLCBldmVudC50YXJnZXQpCgkJCX19LCB7dmlldzogaHRtbC5MSVNUfV0pOyBjYW4ub25pbXBvcnQubGlzdChjYW4sIGl0ZW0sIGNiLCB1aS5saXN0KQoJCX0pCgl9LAoJaXRlbTogZnVuY3Rpb24oY2FuLCBpdGVtLCBjYiwgY2JzLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHwoY2FuLnVpICYmIGNhbi51aS5wcm9qZWN0PyBjYW4udWkucHJvamVjdDogY2FuLl9vdXRwdXQpCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5pY2t8fGl0ZW0ubmFtZV0sCgkJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCB1aS5maXJzdCwgZXZlbnQudGFyZ2V0Ll9saXN0ICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBldmVudC50YXJnZXQuX2xpc3QpKQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHRhcmdldCwgY2FuLmNvcmUuS2V5cyhodG1sLkRJViwgaHRtbC5JVEVNKSwgdWkuZmlyc3QpCgkJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKGV2ZW50LCB1aS5maXJzdCkgfSwKCQl9XSk7IHJldHVybiB1aS5maXJzdAoJfSwKCWl0ZW1saXN0OiBmdW5jdGlvbihjYW4sIGxpc3QsIGNiLCBjYnMsIHRhcmdldCkgewoJCXJldHVybiB0YXJnZXQuX2xpc3QgPSBjYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3ZpZXc6IGh0bWwuTElTVCwgbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCXJldHVybiB7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYihldmVudCwgaXRlbSwgZXZlbnQudGFyZ2V0Ll9saXN0ICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBldmVudC50YXJnZXQuX2xpc3QpKQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNicyhldmVudCwgaXRlbSkgfX0KCQl9KSB9XSwgdGFyZ2V0Lm5leHRTaWJsaW5nLCB0YXJnZXQucGFyZW50Tm9kZSkKCX0sCgl0YWJzOiBmdW5jdGlvbihjYW4sIGxpc3QsIGNiLCBjYnMsIGFjdGlvbiwgZWFjaCkgeyBhY3Rpb24gPSBhY3Rpb258fGNhbi5fYWN0aW9uCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIGFjdGlvbiwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0YWJzKSB7CgkJCXJldHVybiB7dGV4dDogW3RhYnMubmFtZSwgaHRtbC5ESVYsIGh0bWwuVEFCU10sIHRpdGxlOiB0YWJzLnRleHQsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgYWN0aW9uLCBodG1sLkRJVl9UQUJTLCBldmVudC50YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCB0YWJzKQoJCQl9LCBfaW5pdDogZnVuY3Rpb24oaXRlbSkgewoJCQkJZnVuY3Rpb24gY2xvc2UoaXRlbSkgeyB2YXIgbmV4dCA9IGl0ZW0ubmV4dFNpYmxpbmd8fGl0ZW0ucHJldmlvdXNTaWJsaW5nOyBuZXh0ICYmIG5leHQuY2xpY2soKQoJCQkJCWlmIChuZXh0KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhpdGVtLl9tZXRhKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkgfQoJCQkJfQoJCQkJdmFyIG1lbnUgPSB0YWJzLl9tZW51fHxzaHkoe30sIFtdLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7IChtZXRhW2J1dHRvbl0pKGV2ZW50LCBjYW4sIGJ1dHRvbikgfSkKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGl0ZW0sIHtkcmFnZ2FibGU6IHRydWUsIF9jbG9zZTogZnVuY3Rpb24oKSB7IGNsb3NlKGl0ZW0pIH0sIF9tZXRhOiB0YWJzLAoJCQkJCW9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLmJhc2UuQ29weShraXQuRGljdCgKCQkJCQkJIkNsb3NlIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2xvc2UoaXRlbSkgfSwKCQkJCQkJIkNsb3NlIG90aGVycyIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgZnVuY3Rpb24oX2l0ZW0pIHsgX2l0ZW0gPT0gaXRlbSB8fCBjbG9zZShfaXRlbSkgfSkgfSwKCQkJCQkJIkNsb3NlIGFsbCIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgY2xvc2UpIH0sCgkJCQkJKSwgbWVudS5tZXRhKSwgWyJDbG9zZSIsICJDbG9zZSBvdGhlcnMiLCAiQ2xvc2UgYWxsIiwgIiJdLmNvbmNhdChtZW51Lmxpc3QpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCQkJCW1lbnUoZXZlbnQsIGJ1dHRvbiwgbWV0YSkKCQkJCQl9KSB9LAoJCQkJCW9uZHJhZ3N0YXJ0OiBmdW5jdGlvbihldmVudCkgeyBhY3Rpb24uX2Ryb3AgPSBmdW5jdGlvbihiZWZvcmUpIHsgYWN0aW9uLmluc2VydEJlZm9yZShldmVudC50YXJnZXQsIGJlZm9yZSkgfSB9LAoJCQkJCW9uZHJhZ292ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LnByZXZlbnREZWZhdWx0KCksIGFjdGlvbi5fZHJvcChldmVudC50YXJnZXQpIH0sCgkJCQkJb25kcm9wOiBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBhY3Rpb24uX2Ryb3AoZXZlbnQudGFyZ2V0KSB9LAoJCQkJfSkKCQkJCWNhbi5iYXNlLmlzRnVuYyhlYWNoKSAmJiBlYWNoKGl0ZW0pLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgaXRlbS5jbGljaygpIH0pCgkJCX19CgkJfSkpLmZpcnN0Cgl9LAoJY2FyZDogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgewoJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQlyZXR1cm4ge3ZpZXc6IGh0bWwuSVRFTSsiICIrKHZhbHVlLnN0YXR1c3x8IiIpLCBsaXN0OiBbCgkJCQl7dmlldzogW3dpa2kuVElUTEUsIGh0bWwuRElWLCB2YWx1ZS5uYW1lXX0sCgkJCQl7dmlldzogW3dpa2kuQ09OVEVOVCwgaHRtbC5ESVYsIHZhbHVlLnRleHRdfSwKCQkJCXt2aWV3OiBodG1sLkFDVElPTiwgaW5uZXI6IHZhbHVlLmFjdGlvbiwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB2YWx1ZSksIFtjdHguQUNUSU9OLCBldmVudC50YXJnZXQubmFtZV0pCgkJCQl9fSwKCQkJXX0KCQl9KSkKCX0sCglwbHVnOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCwgY2IpIHsgaWYgKCFtZXRhIHx8ICFtZXRhLmluZGV4KSB7IHJldHVybiB9CgkJbWV0YS50eXBlID0gInBsdWciLCBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgbWV0YSwgZnVuY3Rpb24oc3ViKSB7IHN1Yi5zdXAgPSBjYW4KCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKSwgbWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oKSB7IGNhbi51aSAmJiB0YXJnZXQgPT0gY2FuLnVpLnByb2ZpbGU/IGNhbi5vbm1vdGlvbi5oaWRkZW4oc3ViLCB0YXJnZXQpOiBjYW4ub25tb3Rpb24uaGlkZGVuKHN1Yiwgc3ViLl90YXJnZXQpIH0KCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLTIqaHRtbC5BQ1RJT05fSEVJR0hULCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCQl9LCB0YXJnZXQpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9mcmFtZS5qcyIKVm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLmkJzntKLlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5NU0dfU0VTU0lEKSkgeyBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCkpCgkJCXJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCwgIiIpIAoJCX0KCgkJY2FuLnJlcXVpcmUoW2Nhbi52b2xjYW5vXSwgbnVsbCwgZnVuY3Rpb24oY2FuLCBrZXksIHN1YikgeyBjYW5ba2V5XSA9IHN1YiB9KQoJCWNhbi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgY21kcyA9IGNtZHN8fFtdCgkJCXJldHVybiAoY2FuLm9uZW5naW5lW2NtZHNbMF1dfHxjYW4ub25lbmdpbmUuX3JlbW90ZSkoZXZlbnQsIGNhbiwgbXNnLCBjYW4sIGNtZHMsIGNiKQoJCX0sIFZvbGNhbm9zLm1ldGEuYXJncyA9IGNhbi51c2VyLmFyZ3MoY2FuKQoJCWNhbi51c2VyLnRpdGxlKGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVElUTEUpfHxjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKXx8bG9jYXRpb24uaG9zdCkKCgkJd2luZG93Lm9udW5sb2FkID0gZnVuY3Rpb24oKSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAib251bmxvYWQiKSB9CgoJCWNhbi5jb3JlLk5leHQobGlzdCwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBpdGVtLnR5cGUgPSBjaGF0LlBBTkVMCgkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIGNhbi5iYXNlLkNvcHkoaXRlbSwgY2FuLmNvcmUuVmFsdWUoY2FuLCBbY2hhdC5SSVZFUiwgaXRlbS5uYW1lXSkpLCBpdGVtLmxpc3QsIGZ1bmN0aW9uKHBhbmVsKSB7CgkJCQlwYW5lbC5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IHBhbmVsLnJlcXVlc3QoZXZlbnQpOyBjbWRzID0gY21kc3x8W10KCQkJCQlyZXR1cm4gKGNhbi5vbmVuZ2luZVtjbWRzWzBdXXx8Y2FuLm9uZW5naW5lLl9yZW1vdGUpKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKQoJCQkJfSwgY2FuW2l0ZW0ubmFtZV0gPSBwYW5lbCwgcGFuZWwuX3Jvb3QgPSBjYW4sIHBhbmVsLl90cmFucyA9IHBhbmVsLm9uYWN0aW9uICYmIHBhbmVsLm9uYWN0aW9uLl90cmFuc3x8e30KCgkJCQljYW4uY29yZS5JdGVtKHBhbmVsLm9ucGx1Z2luLCBmdW5jdGlvbihrZXksIGNtZCkgewoJCQkJCXBhbmVsLm9ucGx1Z2luLmhhc093blByb3BlcnR5KGtleSkgJiYgY2FuLmJhc2UuaXNGdW5jKGNtZCkgJiYgY2FuLm9uZW5naW5lLnBsdWdpbihwYW5lbCwga2V5LCBjbWQpCgkJCQl9KQoJCQkJY2FuLmNvcmUuSXRlbUNCKHBhbmVsLm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7CgkJCQkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGtleSwgZnVuY3Rpb24obXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7Y2FuOiBwYW5lbCwgbXNnOiBtc2d9KSB9KQoJCQkJfSksIGNhbi5jb3JlLkNhbGxGdW5jKFtwYW5lbC5vbmFjdGlvbiwgY2hhdC5fSU5JVF0sIHtjYW46IHBhbmVsLCBjYjogbmV4dCwgdGFyZ2V0OiBwYW5lbC5fdGFyZ2V0fSkKCQkJfSwgdGFyZ2V0KQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coY2FuLnVzZXIudGl0bGUoKSwgaWNlLlJVTiwgY2FuKQoJCQljYW4ub25tb3Rpb24uX2luaXQoY2FuLCB0YXJnZXQpLCBjYW4ub25rZXltYXAuX2luaXQoY2FuKSwgY2FuLnNldEhlYWRlcihjaGF0LlRPUElDKQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk1BSU4sIGNhbi5yZXF1ZXN0KCkpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQl9KQoKCQljYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgY2hhdC5PTlNFQVJDSCwgZnVuY3Rpb24obXNnLCB3b3JkKSB7IGlmICh3b3JkWzBdID09IGN0eC5DT01NQU5EIHx8IHdvcmRbMV0gIT0gIiIpIHsgdmFyIG1ldGEgPSBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEKCQkJdmFyIGxpc3QgPSB3b3JkWzFdID09ICIiPyBtZXRhOiBtZXRhW3dvcmRbMV1dPyBraXQuRGljdCh3b3JkWzFdLCBtZXRhW3dvcmRbMV1dKToge30KCQkJY2FuLmNvcmUuSXRlbShsaXN0LCBmdW5jdGlvbihuYW1lLCBjb21tYW5kKSB7IG5hbWUgPSBjYW4uYmFzZS50cmltUHJlZml4KG5hbWUsICJjYW4uIikKCQkJCWNhbi5jb3JlLkxpc3QobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUykuc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCW1zZy5QdXNoKGl0ZW0sIGtpdC5EaWN0KGljZS5DVFgsIGNoYXQuT05FTkdJTkUsIGljZS5DTUQsIGN0eC5DT01NQU5ELAoJCQkJCQltZGIuVFlQRSwgaWNlLkNBTiwgbWRiLk5BTUUsIG5hbWUsIG1kYi5URVhULCBjb21tYW5kLmhlbHAsCgkJCQkJCWN0eC5DT05URVhULCBpY2UuQ0FOLCBjdHguQ09NTUFORCwgbmFtZSwKCQkJCQkJY3R4LklOREVYLCBjYW4uY29yZS5LZXlzKGljZS5DQU4sIG5hbWUpLAoJCQkJCSlbaXRlbV18fCIiKQoJCQkJfSkKCQkJfSkKCQl9IH0pCgl9LAoJX3NlYXJjaDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCQl2YXIgc3ViLCBtb2QgPSBjYW4sIGZ1biA9IGNhbiwga2V5ID0gIiI7IGNhbi5jb3JlLkxpc3QoY21kc1sxXS5zcGxpdChpY2UuUFQpLCBmdW5jdGlvbih2YWx1ZSkgewoJCQlmdW4gJiYgKHN1YiA9IG1vZCwgbW9kID0gZnVuLCBmdW4gPSBtb2RbdmFsdWVdLCBrZXkgPSB2YWx1ZSkKCQl9KTsgaWYgKCFzdWIgfHwgIW1vZCB8fCAhZnVuKSB7IGNhbi5taXNjLldhcm4oaWNlLkVyck5vdEZvdW5kLCBjbWRzKQoJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cuRWNobyhpY2UuRXJyV2FybiwgaWNlLkVyck5vdEZvdW5kLCBjbWRzKSkKCQl9CgoJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhmdW4sIHsKCQkJZXZlbnQ6IGV2ZW50LCBjYW46IHN1YiwgbXNnOiBtc2csIGNtZHM6IGNtZHMuc2xpY2UoMiksIGNiOiBjYiwgdGFyZ2V0OiBzdWIuX3RhcmdldCwKCQkJYnV0dG9uOiBrZXksIGNtZDoga2V5LCBhcmc6IGNtZHMuc2xpY2UoMiksIGxpc3Q6IGNtZHMuc2xpY2UoMiksCgkJfSwgbW9kKQoJfSwKCV9yZW1vdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJaWYgKHBhbmVsLm9uZW5naW5lLl9lbmdpbmUoZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpKSB7IHJldHVybiB9CgkJaWYgKHBhbmVsLm9uZW5naW5lLl9wbHVnaW4oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpKSB7IHJldHVybiB9CgoJCXZhciBrZXlzID0gY2FuLmNvcmUuS2V5cyhwYW5lbC5fbmFtZSwgY21kcy5qb2luKGljZS5GUykpCgkJaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1zZy5DbGVhcihpY2UuTVNHX0FQUEVORCkKCQkJdmFyIHJlcyA9IFZvbGNhbm9zLm1ldGEucGFja1trZXlzXTsgcmVzPyBtc2cuQ29weShyZXMpOiBjYW4udXNlci50b2FzdChjYW4sICLnvLrlpLHmlbDmja4iKQoJCQlyZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfQoKCQl2YXIgdG9hc3QsIF90b2FzdCA9IG1zZy5PcHRpb24oY2hhdC5fVE9BU1QpOyBpZiAoX3RvYXN0KSB7IGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0b2FzdCA9IHRvYXN0fHxjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCBfdG9hc3QsIG1zZy5fY2FuLl9uYW1lKSB9KSB9CgkJbXNnLm9wdGlvbiA9IGNhbi5jb3JlLkxpc3QobXNnLm9wdGlvbiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4ge190b2FzdDogdHJ1ZSwgX2hhbmRsZTogdHJ1ZX1baXRlbV0gJiYgZGVsZXRlKG1zZ1tpdGVtXSk/IHVuZGVmaW5lZDogaXRlbSB9KQoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OUkVNT1RFLCBjYW4ucmVxdWVzdCh7fSwge19mb2xsb3c6IHBhbmVsLl9mb2xsb3csIF9tc2c6IG1zZywgX2NtZHM6IGNtZHN9KSkKCgkJdmFyIG5hbWVzID0gbXNnLk9wdGlvbihjaGF0Ll9OQU1FUyl8fHBhbmVsLl9uYW1lc3x8KChjYW4uQ29uZigiaWNlYmVyZyIpfHxWb2xjYW5vcy5tZXRhLmljZWJlcmcpK3BhbmVsLl9uYW1lKQoJCWNhbi5taXNjLlJ1bihldmVudCwgY2FuLCB7bmFtZXM6IG5hbWVzLCBkYWVtb246IG1zZy5fZGFlbW9ufSwgY21kcywgZnVuY3Rpb24obXNnKSB7CgkJCVZvbGNhbm9zLm1ldGEucGFja1trZXlzXSA9IG1zZywgdG9hc3QgJiYgdG9hc3QuY2xvc2UoKSwgdG9hc3QgPSB0cnVlLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQl9KQoJfSwKCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJcmV0dXJuIGZhbHNlCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCQlpZiAoY21kc1swXSA9PSBjdHguQUNUSU9OICYmIGNtZHNbMV0gPT0gaWNlLlJVTiAmJiBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1syXV0pIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtjbWRzWzJdXSwge2NhbjogcGFuZWwsIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDMpLCBjYjogY2J9KSwgdHJ1ZQoJCX0KCQl2YXIgcCA9IGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVtjbWRzWzBdXSwgbiA9IDE7IGlmIChwKSB7CgkJCWlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMV1dICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTikgeyBuID0gMyB9IGVsc2UgaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1swXV0pIHsgbiA9IDIgfQoJCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMocCwge2NhbjogcC5jYW58fHBhbmVsLCBtc2c6IG1zZywgYXJnOiBjbWRzLnNsaWNlKG4pLCBjbWRzOiBjbWRzLnNsaWNlKG4pLCBjYjogY2J9KSwgdHJ1ZQoJCX0KCQlyZXR1cm4gZmFsc2UKCX0sCgoJcGx1Z2luOiBzaHkoIua3u+WKoOaPkuS7tiIsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgY29tbWFuZCkgewoJCWlmIChjYW4uYmFzZS5pc09iamVjdChuYW1lKSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuSXRlbShuYW1lLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQluYW1lLmhhc093blByb3BlcnR5KGtleSkgJiYgY2FuLmJhc2UuaXNGdW5jKHZhbHVlKSAmJiBjYW4ub25lbmdpbmUucGx1Z2luKGNhbiwga2V5LCB2YWx1ZSkgfSkKCQl9CgkJbmFtZSA9IGNhbi5iYXNlLnRyaW1QcmVmaXgobmFtZSwgImNhbi4iKQoJCXZhciB0eXBlID0gaHRtbC5URVhUOyBjb21tYW5kLmxpc3QgPSBjYW4uY29yZS5MaXN0KGNvbW1hbmQubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlzd2l0Y2ggKHR5cGVvZiBpdGVtKSB7CgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXR1cm4gY2FuLmNvcmUuU3BsaXRJbnB1dChpdGVtKQoJCQkJY2FzZSBsYW5nLk9CSkVDVDogcmV0dXJuIHR5cGUgPSBpdGVtLnR5cGV8fHR5cGUsIGl0ZW0KCQkJfQoJCX0pLCBjb21tYW5kLmNhbiA9IGNhbiwgYXJndW1lbnRzLmNhbGxlZS5tZXRhW2Nhbi5jb3JlLktleXMoaWNlLkNBTiwgbmFtZSldID0gY29tbWFuZAoJfSksCglsaXN0ZW46IHNoeSgi55uR5ZCs5LqL5Lu2IiwgZnVuY3Rpb24oY2FuLCBuYW1lLCBjYikgewoJCWFyZ3VtZW50cy5jYWxsZWUubWV0YVtuYW1lXSA9IChhcmd1bWVudHMuY2FsbGVlLm1ldGFbbmFtZV18fFtdKS5jb25jYXQoY2IpCgl9KSwKCXNpZ25hbDogc2h5KCLop6blj5Hkuovku7YiLCBmdW5jdGlvbihjYW4sIG5hbWUsIG1zZykgeyBtc2cgPSBtc2d8fGNhbi5yZXF1ZXN0KCkKCQljYW4ubWlzYy5Mb2coZ2RiLlNJR05BTCwgbmFtZSwgKG1zZy5fY21kc3x8W10pLCBuYW1lID09IGNoYXQuT05SRU1PVEU/IG1zZy5PcHRpb24oIl9tc2ciKTogbXNnKQoJCXJldHVybiBjYW4uY29yZS5MaXN0KGNhbi5vbmVuZ2luZS5saXN0ZW4ubWV0YVtuYW1lXSwgZnVuY3Rpb24oY2IpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogbXNnLl9ldmVudCwgbXNnOiBtc2d9KSB9KS5sZW5ndGgKCX0pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OREFFTU9OLCB7aGVscDogIuaOqOiNkOW8leaTjiIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG5hbWUpIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm1pc2MuV1NTKGNhbiwge3R5cGU6IGh0bWwuQ0hST01FLCBuYW1lOiBjYW4ubWlzYy5TZWFyY2goY2FuLCBjbGkuREFFTU9OKXx8bmFtZXx8IiIsIHRleHQ6IGNhbi51c2VyLnRpdGxlKCl9LCBmdW5jdGlvbihldmVudCwgbXNnLCBjbWQsIGFyZykgeyBpZiAoIW1zZykgeyByZXR1cm4gfQoJCQl2YXIgc3ViID0gY2FuLm9uZGFlbW9uLl9saXN0W21zZy5PcHRpb24oaWNlLk1TR19UQVJHRVQpXQoJCQljYW4uYmFzZS5pc0Z1bmMoY2FuLm9uZGFlbW9uW2NtZF0pPyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25kYWVtb25bY21kXSwgewoJCQkJY2FuOiBjYW4sIHN1Yjogc3ViLCBtc2c6IG1zZywgY21kOiBjbWQsIGFyZzogYXJnLCBjYjogZnVuY3Rpb24oKSB7IG1zZy5SZXBseSgpIH0sCgkJCX0pOiBjYW4ub25lbmdpbmUuX3NlYXJjaCh7fSwgY2FuLCBtc2csIGNhbiwgW2NoYXQuX1NFQVJDSCwgY21kXS5jb25jYXQoYXJnKSwgZnVuY3Rpb24oKSB7IG1zZy5SZXBseSgpIH0pCgkJfSkKCX0sIF9saXN0OiBbIiJdLAoJcmVmcmVzaDogZnVuY3Rpb24oY2FuLCBtc2csIHN1YikgeyBzdWIuVXBkYXRlKCkgfSwKCWdyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBzdWIsIGFyZykgewoJCXN1Yi5vbmltcG9ydC5fZ3JvdyhzdWIsIG1zZywgY2FuLnBhZ2UuQ29sb3IoYXJnLmpvaW4oIiIpKSkKCX0sCgl0b2FzdDogZnVuY3Rpb24oY2FuLCBtc2csIGFyZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4udXNlci50b2FzdCwge2NhbjogY2FuLCBtc2c6IG1zZywgY21kczogYXJnfSkgfSwKCXB3ZDogZnVuY3Rpb24oY2FuLCBtc2csIGFyZykgewoJCWNhbi5fd3NzX25hbWUgPSBjYW4ub25kYWVtb24uX2xpc3RbMF0gPSBhcmdbMF0KCX0sCglleGl0OiBmdW5jdGlvbihjYW4sIG1zZywgc3ViKSB7IGNhbi51c2VyLmNsb3NlKCkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCBjYiwgdGFyZ2V0LCBmaWVsZCkgewoJCW1ldGEubmFtZSA9IChtZXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuU1ApWzBdLnNwbGl0KGljZS5QVCkucG9wKCkKCQlmaWVsZCA9IGZpZWxkfHxjYW4ub25hcHBlbmQuZmllbGQoY2FuLCBtZXRhLnR5cGUsIG1ldGEsIHRhcmdldCkuZmlyc3QKCQl2YXIgbGVnZW5kID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuTEVHRU5EKVswXQoJCXZhciBvcHRpb24gPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBmaWVsZCwgaHRtbC5GT1JNX09QVElPTilbMF0KCQl2YXIgYWN0aW9uID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX0FDVElPTilbMF0KCQl2YXIgb3V0cHV0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX09VVFBVVClbMF0KCQl2YXIgc3RhdHVzID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX1NUQVRVUylbMF0KCgkJdmFyIHN1YiA9IFZvbGNhbm9zKG1ldGEubmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIG1ldGEubmFtZSksIF90YXJnZXQ6IGZpZWxkLAoJCQlfbGVnZW5kOiBsZWdlbmQsIF9vcHRpb246IG9wdGlvbiwgX2FjdGlvbjogYWN0aW9uLCBfb3V0cHV0OiBvdXRwdXQsIF9zdGF0dXM6IHN0YXR1cywKCQkJX2lucHV0czoge30sIF9vdXRwdXRzOiBbXSwgX2hpc3Rvcnk6IFtdLCBfcm9vdDogY2FuLl9yb290LAoKCQkJU3RhdHVzOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyByZXR1cm4gY2FuLmNvcmUuSXRlbShrZXksIHN1Yi5TdGF0dXMpLCBrZXkgfQoJCQkJa2V5ICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIHN0YXR1cywgW1tbaHRtbC5ESVYsIGtleV0sIGh0bWwuU1BBTl1dLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJaWYgKHZhbHVlICYmIHZhbHVlLmluZGV4T2YgJiYgdmFsdWUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgdmFsdWUgPSBjYW4ucGFnZS5Gb3JtYXQoaHRtbC5BLCB2YWx1ZSkgfQoJCQkJCXJldHVybiB2YWx1ZSA9PSB1bmRlZmluZWQ/ICh2YWx1ZSA9IGl0ZW0uaW5uZXJIVE1MKTogKGl0ZW0uaW5uZXJIVE1MID0gdmFsdWUpCgkJCQl9KTsgcmV0dXJuIHZhbHVlCgkJCX0sCgkJCUFjdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGFjdGlvbiwga2V5LCB2YWx1ZSlbMF0gfSwKCQkJT3B0aW9uOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCBrZXksIHZhbHVlKVswXSB9LAoJCQlVcGRhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7IHN1Yi5vbmFwcGVuZC5fb3V0cHV0MChzdWIsIHN1Yi5Db25mKCksIGV2ZW50fHx7fSwgY21kc3x8c3ViLklucHV0KCksIGNiLCBzaWxlbnQpOyByZXR1cm4gdHJ1ZSB9LAoJCQlGb2N1czogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIG9wdGlvbiwgaHRtbC5JTlBVVF9BUkdTLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgeyBpbmRleCA9PSAwICYmIGl0ZW0uZm9jdXMoKSB9KSB9LAoJCQlJbnB1dDogZnVuY3Rpb24oY21kcywgc2lsZW50KSB7CgkJCQljbWRzID0gY21kcyAmJiBjbWRzLmxlbmd0aCA+IDA/IGNtZHM6IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiKS5jb25jYXQoY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGFjdGlvbiwgIiIpKSwgY21kcyA9IGNhbi5iYXNlLnRyaW0oY21kcykKCQkJCXNpbGVudCB8fCBjbWRzWzBdID09IGN0eC5BQ1RJT04gfHwgY2FuLmJhc2UuRXEoc3ViLl9oaXN0b3J5W3N1Yi5faGlzdG9yeS5sZW5ndGgtMV0sIGNtZHMpIHx8IHN1Yi5faGlzdG9yeS5wdXNoKGNtZHMpCgkJCQlyZXR1cm4gY21kcwoJCQl9LAoJCQlDbG9uZTogZnVuY3Rpb24oKSB7IG1ldGEuYXJncyA9IGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBvcHRpb24sICIiKQoJCQkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwgbWV0YSwgbGlzdCwgZnVuY3Rpb24oc3ViKSB7IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCB0cnVlKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBmb3IgKHZhciBrIGluIHN1Yi5faW5wdXRzKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHN1Yi5faW5wdXRzW2tdLl90YXJnZXQpOyBicmVhayB9IH0pCgkJCQl9LCB0YXJnZXQpCgkJCX0sCgkJfSwgbGlzdCwgZnVuY3Rpb24oc3ViKSB7IHN1Yi5Db25mKG1ldGEpLCBtZXRhLmZlYXR1cmUgPSBjYW4uYmFzZS5PYmoobWV0YS5mZWF0dXJlLCB7fSkKCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGZpZWxkLCBtZXRhLmluZGV4PyBtZXRhLmluZGV4LnNwbGl0KGljZS5QVCkucG9wKCk6IG1ldGEubmFtZSkKCQkJdmFyIHN0eWxlID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5zdHlsZXx8bWV0YS5mZWF0dXJlLnN0eWxlKTsgc3dpdGNoICh0eXBlb2Ygc3R5bGUpIHsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgc3R5bGUpOyBicmVhawoJCQkJY2FzZSBsYW5nLk9CSkVDVDogY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwgc3R5bGUpOyBicmVhawoJCQl9CgkJCW1ldGEudHlwZSAhPSBzdWIuTW9kZSgpICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgc3ViLk1vZGUoKSkKCgkJCW1ldGEuaW5wdXRzICYmIHN1Yi5vbmFwcGVuZC5fb3B0aW9uKHN1YiwgbWV0YSwgc3ViLl9vcHRpb24sIG1ldGEubXNnKQoJCQlpZiAobWV0YS5tc2cpIHsgdmFyIG1zZyA9IHN1Yi5yZXF1ZXN0KCk7IG1zZy5Db3B5KGNhbi5iYXNlLk9iaihtZXRhLm1zZykpLCBzdWIub25hcHBlbmQuX291dHB1dChzdWIsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmZlYXR1cmUuZGlzcGxheSkgfQoKCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgc3ViLl9sZWdlbmQsIGtpdC5EaWN0KGNhbi5Db25mKCJsZWdlbmRfZXZlbnQiKXx8Y2hhdC5PTk1PVVNFRU5URVIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgc3ViLCBzdWIub25hY3Rpb24sIHN1Yi5vbmFjdGlvbi5saXN0LmNvbmNhdChbWyLmiYDmnIkiXS5jb25jYXQoY2FuLmNvcmUuSXRlbShtZXRhLmZlYXR1cmUuX3RyYW5zKSldKSwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIG1ldGEpIHsKCQkJCQl2YXIgY2IgPSBjYW4uY29yZS5WYWx1ZShzdWIsIFtjaGF0Ll9PVVRQVVRTX0NVUlJFTlQsIGNoYXQuT05BQ1RJT04sIGl0ZW1dKQoJCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHJldHVybiBjYihldmVudCwgY2FuLmNvcmUuVmFsdWUoc3ViLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpLCBpdGVtKSB9CgkJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdCgkJCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikpIHsgcmV0dXJuIGNiKGV2ZW50LCBzdWIsIGl0ZW0pIH0KCQkJCX0pCgkJCX0pKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSk7IHJldHVybiBzdWIKCX0sCglfb3B0aW9uOiBmdW5jdGlvbihjYW4sIG1ldGEsIG9wdGlvbiwgc2tpcCkgeyBtZXRhID0gbWV0YXx8e307IHZhciBpbmRleCA9IC0xLCBhcmdzID0gY2FuLmJhc2UuT2JqKG1ldGEuYXJnc3x8bWV0YS5hcmd8fG1ldGEub3B0LCBbXSksIG9wdHMgPSBjYW4uYmFzZS5PYmoobWV0YS5vcHRzLCB7fSkKCQlmdW5jdGlvbiBhZGQoaXRlbSwgbmV4dCkgeyBpdGVtID0gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IGl0ZW19OiBpdGVtLCBpdGVtLnR5cGUgIT0gaHRtbC5CVVRUT04gJiYgaW5kZXgrKwoJCQlyZXR1cm4gVm9sY2Fub3MoaXRlbS5uYW1lLCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgaXRlbS5uYW1lKSwgX3Jvb3Q6IGNhbi5fcm9vdCwKCQkJCV90YXJnZXQ6IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIGl0ZW0sIGFyZ3NbaW5kZXhdfHxvcHRzW2l0ZW0ubmFtZV0sIG9wdGlvbnx8Y2FuLl9vcHRpb24pLAoJCQkJX29wdGlvbjogb3B0aW9ufHxjYW4uX29wdGlvbiwgX2FjdGlvbjogY2FuLl9hY3Rpb24sIF9vdXRwdXQ6IGNhbi5fb3V0cHV0LCBfc3RhdHVzOiBjYW4uX3N0YXR1cywKCQkJCU9wdGlvbjogY2FuLk9wdGlvbiwgQWN0aW9uOiBjYW4uQWN0aW9uLCBTdGF0dXM6IGNhbi5TdGF0dXMsIENsb25lRmllbGQ6IGNhbi5DbG9uZSwKCQkJCUNsb25lSW5wdXQ6IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBhZGQoaXRlbSkuX3RhcmdldCkgfSwKCQkJfSwgW2l0ZW0uZGlzcGxheSwgY2hhdC5QTFVHSU5fSU5QVVRfSlNdLCBmdW5jdGlvbihpbnB1dCkgeyBpbnB1dC5Db25mKGl0ZW0pCgkJCQlpbnB1dC5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJaWYgKGl0ZW0uX2NiKSB7IHJldHVybiBpdGVtLl9jYihldmVudCkgfQoJCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCksIGNtZHMpKSB7IHJldHVybiB9CgkJCQkJaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIGlucHV0LCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJCXJldHVybiBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoY21kcywgc2lsZW50KSwgY2IsIHNpbGVudCkKCQkJCX0sIGNhbi5faW5wdXRzW2l0ZW0ubmFtZV0gPSBpbnB1dCwgaW5wdXQuc3VwID0gY2FuCgoJCQkJY2FuLmNvcmUuSXRlbUNCKGlucHV0Lm9uYWN0aW9uLCBmdW5jdGlvbihrZXksIGNiKSB7IGlucHV0Ll90YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBpbnB1dCkgfSB9KQoJCQkJY2FuLmNvcmUuSXRlbUNCKGl0ZW0sIGZ1bmN0aW9uKGtleSwgY2IpIHsgaW5wdXQuX3RhcmdldFtrZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgY2IoZXZlbnQsIGlucHV0KSB9IH0pCgkJCQlza2lwPyBuZXh0KCk6IGNhbi5jb3JlLkNhbGxGdW5jKFtpbnB1dC5vbmFjdGlvbiwgY2hhdC5fSU5JVF0sIFtpbnB1dCwgaXRlbSwgbmV4dCwgaW5wdXQuX3RhcmdldF0pOwoJCQkJKGl0ZW0uYWN0aW9ufHxjYW4uY29yZS5WYWx1ZShtZXRhLCBbY3R4LkZFQVRVUkUsIGN0eC5JTlBVVFNdKSkgJiYgY2FuLm9uYXBwZW5kLmZpZ3VyZShpbnB1dCwgaXRlbSwgaW5wdXQuX3RhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSkgewoJCQkJCWlucHV0Ll90YXJnZXQudmFsdWUgPSB2YWx1ZSwgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgaW5wdXQuX3RhcmdldCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLlVwZGF0ZSgpIH0pCgkJCQl9KQoJCQl9KQoJCX07IGNhbi5jb3JlLk5leHQoY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLmNvcmUuVmFsdWUoY2FuLCBbY2hhdC5PTklNUE9SVCwgbWRiLkxJU1RdKSwgY2FuLmJhc2UuT2JqKG1ldGEuaW5wdXRzKSkuY29uY2F0KFt7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6IGNsaS5DTE9TRX1dKSwgYWRkKQoJfSwKCV9hY3Rpb246IGZ1bmN0aW9uKGNhbiwgbGlzdCwgYWN0aW9uLCBtZXRhKSB7IGxpc3QgPSBjYW4uYmFzZS5PYmooY2FuLmJhc2UuZ2V0VmFsaWQobGlzdCwgY2FuLmNvcmUuSXRlbShtZXRhKSksIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05BQ1RJT04sIG1kYi5MSVNUXSkpOyBpZiAoIWxpc3QpIHsgcmV0dXJuIH0KCQl2YXIgX2xpc3QgPSBjYW4ucGFnZS5pbnB1dHMoY2FuLCBsaXN0KTsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgYWN0aW9uKSwgbWV0YSA9IG1ldGF8fGNhbi5vbmFjdGlvbnx8e30KCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChfbGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0gY2FuLm9uYXBwZW5kLmlucHV0KGNhbiwgaXRlbSA9PSAiIj8gLyrnqbrnmb0qLyB7dHlwZTogaHRtbC5TUEFDRX06CgkJCWNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyAvKuaMiemUriovIHt0eXBlOiBodG1sLkJVVFRPTiwgdmFsdWU6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbSksIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2IgPSBtZXRhW2l0ZW1dfHxtZXRhW2NoYXQuX0VOR0lORV07IGNiPyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgY2FuOiBjYW4sIGJ1dHRvbjogaXRlbX0pOiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgaXRlbV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgoJCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsKCQkJCQl2YXIgY2IgPSBtZXRhW2l0ZW1dfHxtZXRhW2NoYXQuX0VOR0lORV07IGNiPyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2V2ZW50OiBldmVudCwgY2FuOiBjYW4sIGJ1dHRvbjogaXRlbX0pOiBjYW4ucnVuKGV2ZW50LCBbY3R4LkFDVElPTiwgaXRlbV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgkJCQl9CgoJCQl9fTogaXRlbS5sZW5ndGggPiAwPyAvKuWIl+ihqCovIHt0eXBlOiBodG1sLlNFTEVDVCwgbmFtZTogaXRlbVswXSwgdmFsdWVzOiBpdGVtLnNsaWNlKDEpLCBvbmNoYW5nZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciB3aGljaCA9IGl0ZW1bZXZlbnQudGFyZ2V0LnNlbGVjdGVkSW5kZXgrMV0KCQkJCWNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbd2hpY2hdLCBbZXZlbnQsIGNhbiwgd2hpY2hdKQoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YVtpdGVtWzBdXSwgW2V2ZW50LCBjYW4sIGl0ZW1bMF0sIHdoaWNoXSkKCgkJCX19OiAvKuWFtuWugyovIGl0ZW0sICIiLCBhY3Rpb24pfSksIG1ldGEKCX0sCglfb3V0cHV0MDogZnVuY3Rpb24oY2FuLCBtZXRhLCBldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBpZiAobXNnLlJ1bkFjdGlvbihldmVudCwgY2FuLCBjbWRzKSkgeyByZXR1cm4gfQoJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSAhPSBpY2UuVFJVRSAmJiBjbWRzICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBtZXRhLmZlYXR1cmVbY21kc1sxXV0pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBjbWRzWzFdfSkKCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhtZXRhLmZlYXR1cmVbY21kc1sxXV0pKSB7IHJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhtZXRhLmZlYXR1cmVbY21kc1sxXV0sIHtjYW46IGNhbiwgbXNnOiBtc2csIGNtZHM6IGNtZHMuc2xpY2UoMil9KSB9CgkJCXJldHVybiBjYW4udXNlci5pbnB1dChldmVudC5fZXZlbnR8fGV2ZW50LCBjYW4sIG1ldGEuZmVhdHVyZVtjbWRzWzFdXSwgZnVuY3Rpb24oYXJncykgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0sIGNhbi5PcHRpb24oKSkKCQkJCWNhbi5VcGRhdGUoZXZlbnQsIGNtZHMuc2xpY2UoMCwgMikuY29uY2F0KGFyZ3MpLCBjYnx8ZnVuY3Rpb24oKSB7CgkJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4uc3VwLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4uc3VwLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCQkJaWYgKGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuUmVzdWx0KCkubGVuZ3RoID4gMCB8fCBtc2cuTGVuZ3RoKCkgPiAwKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZyksIGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQkJCQl9IGVsc2UgewoJCQkJCQljYW4uVXBkYXRlKCkKCQkJCQl9CgkJCQl9LCB0cnVlKQoJCQl9KQoJCX0KCgkJaWYgKG1ldGEgJiYgbWV0YS5pbmRleCAmJiBtZXRhLmluZGV4LmluZGV4T2YoImNhbi4iKSA9PSAwKSB7CgkJCWNhbi5vbmVuZ2luZS5fcGx1Z2luKGV2ZW50LCBjYW4sIG1zZywgY2FuLCBjYW4ubWlzYy5jb25jYXQoY2FuLCBbbWV0YS5pbmRleF0sIGNtZHMpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSk7IHJldHVybiB9CgkJCQkhc2lsZW50ICYmIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fG1ldGEuZGlzcGxheXx8bWV0YS5mZWF0dXJlLmRpc3BsYXkpCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKG1zZy5fZGFlbW9uKSkgewoJCQljYW4uYmFzZS5pc1VuZGVmaW5lZChjYW4uX2RhZW1vbikgJiYgY2FuLm9uZGFlbW9uLl9saXN0WzBdICYmIChjYW4uX2RhZW1vbiA9IGNhbi5vbmRhZW1vbi5fbGlzdC5wdXNoKGNhbiktMSkKCQkJaWYgKGNhbi5fZGFlbW9uKSB7IG1zZy5PcHRpb24oaWNlLk1TR19EQUVNT04sIGNhbi5jb3JlLktleXMoY2FuLm9uZGFlbW9uLl9saXN0WzBdLCBjYW4uX2RhZW1vbikpIH0KCQl9CgoJCXJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbihtc2cpIHsgdmFyIHN1YiA9IGNhbi5jb3JlLlZhbHVlKGNhbiwgY2hhdC5fT1VUUFVUU19DVVJSRU5UKXx8e30KCQkJaWYgKCFjbWRzIHx8IGNtZHNbMF0gIT0gY3R4LkFDVElPTikgeyBjYW4uX21zZyA9IG1zZywgc3ViLl9tc2cgPSBtc2csIG1zZy5fY21kcyA9IGNtZHMgfQoJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogY2FuLCBtc2c6IG1zZ30pOyByZXR1cm4gfQoJCQl2YXIgcHJvY2VzcyA9IG1zZy5fY2FuID09IGNhbiB8fCBtc2cuX2NhbiA9PSBzdWIKCQkJaWYgKHByb2Nlc3MgJiYgY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2Nhbjogc3ViLCBtc2c6IG1zZ30pKSB7IHJldHVybiB9CgkJCWlmIChwcm9jZXNzICYmIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4sIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkhc2lsZW50ICYmIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fG1ldGEuZGlzcGxheXx8bWV0YS5mZWF0dXJlLmRpc3BsYXksIGNhbi5fb3V0cHV0LCBjYW4uX2FjdGlvbikKCQl9KQoJfSwKCV9vdXRwdXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBkaXNwbGF5LCBvdXRwdXQsIGFjdGlvbiwgY2IpIHsgZGlzcGxheSA9IGRpc3BsYXl8fGNoYXQuUExVR0lOX1RBQkxFX0pTLCBvdXRwdXQgPSBvdXRwdXR8fGNhbi5fb3V0cHV0CgkJY2FuLl9kaXNwbGF5ID0gZGlzcGxheQoJCVZvbGNhbm9zKGRpc3BsYXksIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBkaXNwbGF5KSwgX3RhcmdldDogb3V0cHV0LCBfZmllbGRzOiBjYW4uX3RhcmdldCwgX2Rpc3BsYXk6IGRpc3BsYXksCgkJCV9sZWdlbmQ6IGNhbi5fbGVnZW5kLCBfb3B0aW9uOiBjYW4uX29wdGlvbiwgX2FjdGlvbjogY2FuLl9hY3Rpb24sIF9vdXRwdXQ6IGNhbi5fb3V0cHV0LCBfc3RhdHVzOiBjYW4uX3N0YXR1cywgX3Jvb3Q6IGNhbi5fcm9vdCwKCQkJVXBkYXRlOiBjYW4uVXBkYXRlLCBPcHRpb246IGNhbi5PcHRpb24sIEFjdGlvbjogY2FuLkFjdGlvbiwgU3RhdHVzOiBjYW4uU3RhdHVzLAoJCX0sIFtkaXNwbGF5LCBjaGF0LlBMVUdJTl9UQUJMRV9KU10sIGZ1bmN0aW9uKHRhYmxlKSB7IHRhYmxlLkNvbmYoY2FuLkNvbmYoKSkKCQkJdGFibGUucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIHRhYmxlLCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJcmV0dXJuIGNhbi5VcGRhdGUoZXZlbnQsIGNhbi5JbnB1dChjbWRzLCBzaWxlbnQpLCBjYiwgc2lsZW50KQoJCQl9LCBjYW4uX291dHB1dHMgJiYgY2FuLl9vdXRwdXRzLnB1c2godGFibGUpLCB0YWJsZS5zdXAgPSBjYW4sIHRhYmxlLl9tc2cgPSBtc2cKCgkJCXRhYmxlLl9pbmRleCA9IGNhbi5faW5kZXgKCQkJdGFibGUuTW9kZShjYW4uTW9kZSgpKSwgdGFibGUuQ29uZih0YWJsZS5fYXJncyA9IGNhbi5iYXNlLlBhcnNlVVJMKHRhYmxlLl9kaXNwbGF5KSkKCQkJdGFibGUuX3RyYW5zID0gY2FuLmJhc2UuQ29weSh0YWJsZS5fdHJhbnN8fHt9LCBjYW4uY29yZS5WYWx1ZSh0YWJsZSwgIm9uYWN0aW9uLl90cmFucyIpKQoJCQlpZiAodGFibGUub25pbXBvcnQgJiYgY2FuLmJhc2UuaXNBcnJheSh0YWJsZS5vbmltcG9ydC5saXN0KSAmJiB0YWJsZS5vbmltcG9ydC5saXN0Lmxlbmd0aCA+IDApIHsKCQkJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3B0aW9uKSwgY2FuLm9uYXBwZW5kLl9vcHRpb24oY2FuLCB7aW5wdXRzOiBjYW4ucGFnZS5pbnB1dHMoY2FuLCB0YWJsZS5vbmltcG9ydC5saXN0KSB9KQoJCQl9CgoJCQljYW4uY29yZS5DYWxsRnVuYyhbdGFibGUsIGNoYXQuT05JTVBPUlQsIGNoYXQuX0lOSVRdLCB7Y2FuOiB0YWJsZSwgbXNnOiBtc2csIGNiOiBmdW5jdGlvbihtc2cpIHsKCQkJCWFjdGlvbiA9PT0gZmFsc2UgfHwgdGFibGUub25hcHBlbmQuX2FjdGlvbih0YWJsZSwgbXNnLk9wdGlvbihpY2UuTVNHX0FDVElPTil8fGNhbi5Db25mKGljZS5NU0dfQUNUSU9OKSwgYWN0aW9uKQoJCQkJYWN0aW9uID09PSBmYWxzZSB8fCB0YWJsZS5vbmFwcGVuZC5fc3RhdHVzKHRhYmxlLCBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCQl9LCB0YXJnZXQ6IG91dHB1dHx8Y2FuLl9vdXRwdXR9KQoJCX0pCgl9LAoJX3N0YXR1czogZnVuY3Rpb24oY2FuLCBsaXN0LCBzdGF0dXMpIHsgc3RhdHVzID0gc3RhdHVzfHxjYW4uX3N0YXR1cywgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgc3RhdHVzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UuT2JqKGxpc3QsIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05FWFBPUlQsIG1kYi5MSVNUXSkpLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0gPSBjYW4uYmFzZS5pc09iamVjdChpdGVtKT8gaXRlbToge25hbWU6IGl0ZW19CgoJCQlpZiAoaXRlbS52YWx1ZSAmJiBpdGVtLnZhbHVlLmluZGV4T2YgJiYgaXRlbS52YWx1ZS5pbmRleE9mKCJodHRwIikgPT0gMCkgeyBpdGVtLnZhbHVlID0gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgaXRlbS52YWx1ZSkgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBzdGF0dXMsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBpdGVtLm5hbWVdKSwgdGl0bGU6IGl0ZW0ubmFtZSwgbGlzdDogWwoJCQkJe3RleHQ6IFtpdGVtLm5hbWUsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFsiOiAiLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbKGl0ZW0udmFsdWV8fCIiKSsiIiwgaHRtbC5TUEFOLCBpdGVtLm5hbWVdfSwKCQkJXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBpdGVtLnZhbHVlKSB9fV0pCgkJfSkKCX0sCgoJZmllbGQ6IGZ1bmN0aW9uKGNhbiwgdHlwZSwgaXRlbSwgdGFyZ2V0KSB7IHR5cGUgPSB0eXBlfHxodG1sLlBMVUdJTiwgaXRlbSA9IGl0ZW18fHt9CgkJdmFyIG5hbWUgPSAoaXRlbS5uaWNrfHxpdGVtLm5hbWV8fCIiKS5zcGxpdChpY2UuU1ApWzBdCgkJdmFyIHRpdGxlID0gIWl0ZW0uaGVscCB8fCBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IG5hbWU6IG5hbWUrIigiK2l0ZW0uaGVscC5zcGxpdChpY2UuU1ApWzBdKyIpIgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFt0eXBlfHwiIiwgaXRlbS5uYW1lfHwiIiwgaXRlbS5wb3N8fCIiXSksIGh0bWwuRklFTERTRVRdLCBsaXN0OiBbCgkJCW5hbWUgJiYge3RleHQ6IFt0aXRsZSwgaHRtbC5MRUdFTkRdfSwge3ZpZXc6IFtodG1sLk9QVElPTiwgaHRtbC5GT1JNXX0sIHt2aWV3OiBbaHRtbC5BQ1RJT05dfSwge3ZpZXc6IFtodG1sLk9VVFBVVF19LCB7dmlldzogW2h0bWwuU1RBVFVTXX0sCgkJXX1dKQoJfSwKCWlucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbHVlLCB0YXJnZXQsIHN0eWxlKSB7CgkJc3dpdGNoIChpdGVtLnR5cGUpIHsKCQkJY2FzZSAiIjogcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW2l0ZW1dKQoJCQljYXNlIGh0bWwuU1BBQ0U6IHJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBodG1sLlNQQUNFXSl9XSkKCQl9CgkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuaW5wdXQoY2FuLCBpdGVtLCB2YWx1ZSkKCQlpZiAoaXRlbS5yYW5nZSkgewoJCQlpbnB1dC5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtLm1vZGUgPSAic2ltcGxlIgoJCQkJY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCwgZnVuY3Rpb24oc3ViLCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LnZhbHVlID0gdmFsdWUsIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdKGV2ZW50LCBjYW4sIGl0ZW0ubmFtZSkKCQkJCX0pCgkJCX0KCQl9CgkJdmFyIGJyID0gaW5wdXQudHlwZSA9PSBodG1sLlRFWFRBUkVBPyBbe3R5cGU6IGh0bWwuQlIsIHN0eWxlOiB7Y2xlYXI6IGh0bWwuQk9USH19XTogW10KCQl2YXIgdGl0bGUgPSBjYW4uQ29uZihbY3R4LkZFQVRVUkUsIGNoYXQuVElUTEUsIGl0ZW0ubmFtZV0uam9pbihpY2UuUFQpKXx8IiI7IHRpdGxlICYmIChpbnB1dC50aXRsZSA9IHRpdGxlKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIChbe3ZpZXc6IHN0eWxlfHxjYW4uYmFzZS5qb2luKFtodG1sLklURU0sIGl0ZW0udHlwZV0pLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXN3aXRjaCAoaXRlbS50eXBlKSB7CgkJCQljYXNlIGh0bWwuVEVYVDoKCQkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCQljYXNlIGxhbmcuRU5URVI6CgkJCQkJCQljYW4ub25rZXltYXAucHJldmVudChldmVudCk7CgkJCQkJCQljYW4ub25hY3Rpb24gJiYgY2FuLm9uYWN0aW9uW2l0ZW0ubmFtZV0gJiYgY2FuLm9uYWN0aW9uW2l0ZW0ubmFtZV0oZXZlbnQsIGNhbiwgaXRlbS5uYW1lKTsKCQkJCQkJCWJyZWFrCgkJCQkJfQoJCQkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKSwgY2FuLm9ubW90aW9uLnNlbGVjdEZpZWxkKGV2ZW50LCBjYW4pCgkJCQkJYnJlYWsKCQkJCWNhc2UgaHRtbC5URVhUQVJFQToKCQkJCQkvLyBzd2l0Y2ggKGV2ZW50LmtleSkgeyBjYXNlIGxhbmcuVEFCOiBjYW4ub25rZXltYXAuaW5zZXJ0VGV4dChldmVudC50YXJnZXQsIGljZS5UQik7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsgfQoJCQkJCWJyZWFrCgkJCX0KCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCX0sIGxpc3Q6IFtpbnB1dF19XSkuY29uY2F0KGJyKSlbaXRlbS5uYW1lXQoJfSwKCXRhYmxlOiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCwgc29ydCkgeyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRUYWJsZShjYW4sIG1zZywgdGFyZ2V0fHxjYW4uX291dHB1dCwgbXNnLmFwcGVuZCwgY2J8fGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgewoJCQlpZiAobXNnLmFwcGVuZC5sZW5ndGggPT0gMiAmJiBtc2cuYXBwZW5kWzBdID09IG1kYi5LRVkgJiYgbXNnLmFwcGVuZFsxXSA9PSBtZGIuVkFMVUUpIHsKCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCWxpbmUgPSB7fSwgY2FuLmNvcmUuTGlzdChhcnJheSwgZnVuY3Rpb24oaXRlbSkgeyBsaW5lW2l0ZW0ua2V5XSA9IGl0ZW0udmFsdWUgfSkKCQkJfQoKCQkJaWYgKGtleSA9PSAiZXh0cmEuY21kIikgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtjdHg6IGxpbmVbImV4dHJhLmN0eCJdLCBjbWQ6IGxpbmVbImV4dHJhLmNtZCJdLCBhcmc6IGxpbmVbImV4dHJhLmFyZyJdfSwgZnVuY3Rpb24oc3ViKSB7CgkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGxpbmUsIGNhbi5PcHRpb24oKSkKCQkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNhbi5jb3JlLktleXMobGluZVsiZXh0cmEuY3R4Il0sIGxpbmVbImV4dHJhLmNtZCJdKSwgY21kcywgY2IpCgkJCQkJfQoJCQkJfSwgdGFyZ2V0fHxjYW4uX291dHB1dCkKCQkJfQoKCQkJZnVuY3Rpb24gcnVuKGNtZHMpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwgbGluZSwgY2FuLk9wdGlvbigpKQoJCQkJcmV0dXJuIGNhbi5ydW4oZXZlbnQsIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkgIT0gIiIpIHsKCQkJCQkJY2FuLm9uYXBwZW5kLl9vdXRwdXQoY2FuLnN1cCwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpCgkJCQkJfSBlbHNlIGlmIChtc2cuTGVuZ3RoKCkgPiAwIHx8IG1zZy5SZXN1bHQoKS5sZW5ndGggPiAwICkgewoJCQkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLlVwZGF0ZSgpCgkJCQkJfQoJCQkJfSwgdHJ1ZSkKCQkJfQoKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgdGFyZ2V0KSAmJiB0YXJnZXQudHlwZSA9PSBodG1sLkJVVFRPTikgeyByZXR1cm4gcnVuKFtjdHguQUNUSU9OLCB0YXJnZXQubmFtZV0pIH0KCQkJCWlmIChrZXkgPT0gbWRiLkhBU0ggJiYgY2FuLnVzZXIubW9kLmlzRGl2KSB7IHJldHVybiBjYW4udXNlci5qdW1wcygiL2NoYXQvZGl2LyIrdmFsdWUpIH0KCQkJCWNhbi5zdXAub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBjYW4uc3VwLCBrZXksIGV2ZW50LnRhcmdldC5pbm5lclRleHQpCgoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBpZiAoW21kYi5LRVldLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiB9CgkJCQl2YXIgaXRlbSA9IGNhbi5jb3JlLkxpc3QoY2FuLkNvbmYoImZlYXR1cmUuaW5zZXJ0IiksIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0ubmFtZSA9PSBrZXkpIHsgcmV0dXJuIGl0ZW0gfSB9KVswXXx8e25hbWU6IGtleSwgdmFsdWU6IHZhbHVlfQoJCQkJaXRlbS5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgbGluZSksIGNtZHMsIGNiLCB0cnVlKSB9CgkJCQljYW4ub25tb3Rpb24ubW9kaWZ5cyhjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBvbGQpIHsgcnVuKFtjdHguQUNUSU9OLCBtZGIuTU9ESUZZLCBrZXksIHZhbHVlXSkgfSwgaXRlbSkKCQkJfX0KCQl9KTsgdGFibGUgJiYgY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIHRhYmxlLCBjaGF0LkNPTlRFTlQpCgkJaWYgKG1zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZFttc2cuYXBwZW5kLmxlbmd0aC0xXSA9PSBjdHguQUNUSU9OKSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YWJsZSwgY3R4LkFDVElPTikgfQoJCWNhbi5fdGFibGUgPSB0YWJsZSwgY2FuLnN1cCAmJiAoY2FuLnN1cC5fdGFibGUgPSB0YWJsZSkKCQlyZXR1cm4gc29ydCAmJiBjYW4ucGFnZS5SYW5nZVRhYmxlKGNhbiwgdGFibGUsIHNvcnQpLCB0YWJsZQoJfSwKCWJvYXJkOiBmdW5jdGlvbihjYW4sIHRleHQsIHRhcmdldCkgeyB0ZXh0ICYmIHRleHQuUmVzdWx0ICYmICh0ZXh0ID0gdGV4dC5SZXN1bHQoKSk7IGlmICghdGV4dCkgeyByZXR1cm4gfQoJCXZhciBjb2RlID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t0ZXh0OiBbY2FuLnBhZ2UuQ29sb3IodGV4dCksIGh0bWwuRElWLCBodG1sLkNPREVdfV0pLmNvZGUKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjb2RlLCBodG1sLklOUFVUX0JVVFRPTiwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCXRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJcmV0dXJuIGNhbi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5ydW4oKSB9KQoJCQl9CgkJfSkKCQlyZXR1cm4gKGNvZGUuc2Nyb2xsQnkgJiYgY29kZS5zY3JvbGxCeSgwLCAxMDAwMCkpLCBjb2RlCgl9LAoKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIG1ldGEsIGNiLCB0YXJnZXQsIGZpZWxkKSB7CgkJbWV0YS5mZWF0dXJlID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5mZWF0dXJlLCBjYW4uYmFzZS5PYmoodmFsdWUubWV0YSkpfHx7fQoJCW1ldGEuaW5wdXRzID0gY2FuLmJhc2UuZ2V0VmFsaWQobWV0YS5pbnB1dHMsIGNhbi5iYXNlLk9iaih2YWx1ZS5saXN0KSl8fFtdCgkJbWV0YS5hcmdzID0gY2FuLmJhc2UuZ2V0VmFsaWQoY2FuLmJhc2UuT2JqKG1ldGEuYXJncyksIGNhbi5iYXNlLk9iaihtZXRhLmFyZyksIGNhbi5iYXNlLk9iaih2YWx1ZS5hcmdzKSwgY2FuLmJhc2UuT2JqKHZhbHVlLmFyZykpfHxbXQoJCW1ldGEuZGlzcGxheSA9IG1ldGEuZGlzcGxheXx8dmFsdWUuZGlzcGxheQoKCQltZXRhLmhlaWdodCA9IG1ldGEuaGVpZ2h0fHxjYW4uQ29uZkhlaWdodCgpCgkJbWV0YS53aWR0aCA9IG1ldGEud2lkdGh8fGNhbi5Db25mV2lkdGgoKQoKCQltZXRhLnR5cGUgPSBtZXRhLnR5cGV8fGNoYXQuUExVR0lOCgkJbWV0YS5uYW1lID0gbWV0YS5uYW1lfHx2YWx1ZS5uYW1lCgkJbWV0YS5oZWxwID0gbWV0YS5oZWxwfHx2YWx1ZS5oZWxwCgoJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIG1ldGEsIFtjaGF0LlBMVUdJTl9TVEFURV9KU10sIGZ1bmN0aW9uKHN1Yiwgc2tpcCkgeyBzdWIuX2luZGV4ID0gdmFsdWUuaW5kZXh8fG1ldGEuaW5kZXgKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleCwgY21kcywgY2IpIH0KCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIsIG1ldGEsIHNraXApCgkJfSwgdGFyZ2V0fHxjYW4uX291dHB1dCwgZmllbGQpCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGZpZWxkKSB7IG1ldGEgPSBtZXRhfHx7fSwgbWV0YS5pbmRleCA9IG1ldGEuaW5kZXh8fGNhbi5jb3JlLktleXMobWV0YS5jdHgsIG1ldGEuY21kKQoJCXZhciBwID0gY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW21ldGEuaW5kZXhdLCByZXMgPSB7fTsgZnVuY3Rpb24gY2JzKHN1YiwgbWV0YSwgc2tpcCkgeyByZXMuX19wcm90b19fID0gc3ViLCBjYihzdWIsIG1ldGEsIHNraXApIH0KCQkobWV0YS5tZXRhIHx8IG1ldGEuaW5wdXRzICYmIG1ldGEuaW5wdXRzLmxlbmd0aCA+IDApPyAvKiDlsYDpg6jlkb3ku6QgKi8gY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB7bWV0YTogbWV0YS5tZXRhLCBsaXN0OiBtZXRhLmxpc3R9LCBtZXRhLCBjYnMsIHRhcmdldCwgZmllbGQpOgoJCQlwPyAvKiDliY3nq6/lkb3ku6QgKi8gY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB7bmFtZTogbWV0YS5pbmRleCwgaGVscDogcC5oZWxwLCBtZXRhOiBwLm1ldGEsIGxpc3Q6IHAubGlzdH0sIG1ldGEsIGZ1bmN0aW9uKHN1YiwgbWV0YSwgc2tpcCkgewoJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgX2NiID0gcCwgbiA9IDAKCQkJCQlpZiAocC5tZXRhICYmIHAubWV0YVtjbWRzWzFdXSAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04pIHsgX2NiID0gcC5tZXRhW2NtZHNbMV1dLCBuID0gMiB9IGVsc2UgaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1swXV0pIHsgX2NiID0gcC5tZXRhW2NtZHNbMF1dLCBuID0gMSB9CgkJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoX2NiLCB7Y2FuOiBzdWIsIG1zZzogY2FuLnJlcXVlc3QoZXZlbnQpLCBjbWRzOiBjbWRzLnNsaWNlKG4pLCBjYjogY2J9KQoJCQkJfQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKHN1YiwgbWV0YSwgc2tpcCkKCQkJfSwgdGFyZ2V0LCBmaWVsZCk6IC8qIOWQjuerr+WRveS7pCAqLyBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBtZXRhKSwgY3R4LkNPTU1BTkQsIFttZXRhLmluZGV4XSwgZnVuY3Rpb24obXNnKSB7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQkJY2FuLm9uYXBwZW5kLl9wbHVnaW4oY2FuLCB2YWx1ZSwgbWV0YSwgY2JzLCB0YXJnZXQsIGZpZWxkKQoJCQl9KSB9KQoJCXJldHVybiByZXMKCX0sCglmaWd1cmU6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgdGFyZ2V0LCBjYnMpIHsgaWYgKFtodG1sLkJVVFRPTiwgaHRtbC5TRUxFQ1RdLmluZGV4T2YobWV0YS50eXBlKSA+IC0xKSB7IHJldHVybiB9CgkJdmFyIGlucHV0ID0gbWV0YS5hY3Rpb258fG1kYi5LRVk7IGlucHV0ICE9IGljZS5BVVRPICYmIGNhbi5yZXF1aXJlKFsiL3BsdWdpbi9pbnB1dC8iK2lucHV0KyIuanMiXSwgZnVuY3Rpb24oY2FuKSB7CgkJCWNhbi5jb3JlLkl0ZW1DQihjYW4ub25maWd1cmVbaW5wdXRdLCBmdW5jdGlvbihrZXksIG9uKSB7IHZhciBsYXN0ID0gdGFyZ2V0W2tleV07IHRhcmdldFtrZXldID0gZnVuY3Rpb24oZXZlbnQpIHsgb24oZXZlbnQsIGNhbiwgbWV0YSwgZnVuY3Rpb24oY2IpIHsKCQkJCWZ1bmN0aW9uIF9jYnMoc3ViLCB2YWx1ZSwgb2xkKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYnMpPyBjYnMoc3ViLCB2YWx1ZSwgb2xkKTogdGFyZ2V0LnZhbHVlID0gdmFsdWV8fCIiLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSB9KSB9CgkJCQlpZiAodGFyZ2V0Ll9jYW4pIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCAgdGFyZ2V0Ll9jYW4uX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodGFyZ2V0Ll9jYW4sIF9jYnMpIH0KCQkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIHt0eXBlOiBodG1sLklOUFVULCBuYW1lOiBpbnB1dCwgcG9zOiBjaGF0LkZMT0FULCBtb2RlOiBtZXRhLm1vZGV9LCBbIi9wbHVnaW4vaW5wdXQvIitpbnB1dCsiLmpzIl0sIGZ1bmN0aW9uKHN1YikgeyBzdWIuQ29uZihtZXRhKQoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCQkJaWYgKG1ldGEucmFuZ2UpIHsKCQkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGZvciAodmFyIGkgPSBtZXRhLnJhbmdlWzBdOyBpIDwgbWV0YS5yYW5nZVsxXTsgaSArPSBtZXRhLnJhbmdlWzJdfHwxKSB7IG1zZy5QdXNoKCJ2YWx1ZSIsIGkpIH0gY2IobXNnKQoJCQkJCQkJcmV0dXJuCgkJCQkJCX0KCQkJCQkJKG1ldGEucnVufHxjYW4ucnVuKShzdWIucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKSwgY21kcywgY2IsIHRydWUpCgkJCQkJfQoJCQkJCWNhbi5vbmxheW91dC5maWd1cmUoe3RhcmdldDogdGFyZ2V0fSwgY2FuLCBzdWIuX3RhcmdldCksIGNhbi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl90YXJnZXQsIG1ldGEuc3R5bGUpCgkJCQkJdGFyZ2V0Ll9jYW4gPSBzdWIsIHN1Yi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBzdWIuX3RhcmdldCksIGRlbGV0ZSh0YXJnZXQuX2NhbikgfQoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCBfY2JzKSwgY2FuLmJhc2UuaXNGdW5jKG1ldGEuX2luaXQpICYmIG1ldGEuX2luaXQoc3ViLCBzdWIuX3RhcmdldCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9LCB0YXJnZXQsIGxhc3QpIH0gfSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkxBWU9VVCwge2hlbHA6ICLpobXpnaLluIPlsYAiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3Jvb3QuX3RhcmdldAoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLlBBR0UpKS5sZW5ndGggPiAwKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5GSUVMRFNFVF9MRUZULCBmdW5jdGlvbihmaWVsZCkgeyBjYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGZpZWxkLCAiIikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW1todG1sLkZJRUxEU0VUX0xFRlQsIGh0bWwuRElWX09VVFBVVF1dLCBmdW5jdGlvbihvdXRwdXQpIHsKCQkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgIiIpCgkJCQl9KQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTUFJTiwgZnVuY3Rpb24oZmllbGQpIHsgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgIiIpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsICIiKQoJCQkJfSkKCQkJfSkKCQkJcmV0dXJuCgkJfQoKCQl2YXIgd2lkdGggPSBjYW4uX3Jvb3QuX3dpZHRoLCBoZWlnaHQgPSBjYW4uX3Jvb3QuX2hlaWdodAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgY2FuLnBhZ2UuS2V5cyhodG1sLkZJRUxEU0VUX0hFQUQsIGh0bWwuRklFTERTRVRfRk9PVCksIGZ1bmN0aW9uKGZpZWxkKSB7CgkJCWhlaWdodCAtPSBmaWVsZC5vZmZzZXRIZWlnaHQKCQl9KQoKCQl2YXIgb2Zmc2V0ID0gY2FuLnVzZXIuaXNNb2JpbGUgJiYgIWNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDEwMDogMAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5GSUVMRFNFVF9MRUZULCBmdW5jdGlvbihmaWVsZCwgaW5kZXgpIHsKCQkJY2FuLnVzZXIuaXNNb2JpbGUgfHwgKHdpZHRoIC09IGZpZWxkLm9mZnNldFdpZHRoKQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGZpZWxkLCBoZWlnaHQtb2Zmc2V0KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9MRUZULCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgaGVpZ2h0LW9mZnNldC1odG1sLkFDVElPTl9IRUlHSFQtMikKCQkJfSkKCQl9KQoKCQljYW4udXNlci5pc01vYmlsZSB8fCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTUFJTiwgZnVuY3Rpb24oZmllbGQsIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZmllbGQsIGh0bWwuSEVJR0hULCBoZWlnaHQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9NQUlOLCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQloZWlnaHQgLT0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRElWX0FDVElPTilbMF0ub2Zmc2V0SGVpZ2h0CgkJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIG91dHB1dCwgaGVpZ2h0KQoJCQl9KQoJCX0pCgoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OU0laRSwgY2FuLnJlcXVlc3Qoe30sIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCB1cmwsIHRhcmdldCkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0fHxjYW4uX3Jvb3QuX3RhcmdldCwgaHRtbC5CQUNLR1JPVU5ELCB1cmwgPT0gIiIgfHwgdXJsID09ICJ2b2lkIj8gIiI6ICd1cmwoIicrdXJsKyciKScpCgl9LAoJZmlndXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIHJpZ2h0KSB7IGlmICghZXZlbnQgfHwgIWV2ZW50LnRhcmdldCkgeyByZXR1cm4ge30gfSB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fZmllbGRzfHxjYW4uX3RhcmdldAoJCXZhciByZWN0ID0gZXZlbnQudGFyZ2V0ID09IGRvY3VtZW50LmJvZHk/IHtsZWZ0OiB3aW5kb3cuaW5uZXJXaWR0aC8yLCB0b3A6IDIwMCwgcmlnaHQ6IHdpbmRvdy5pbm5lcldpZHRoLzIsIGJvdHRvbTogMjAwfTogZXZlbnQudGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJdmFyIGxheW91dCA9IHJpZ2h0PyB7bGVmdDogcmVjdC5yaWdodCwgdG9wOiByZWN0LnRvcH06IHtsZWZ0OiByZWN0LmxlZnQsIHRvcDogcmVjdC5ib3R0b219CgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7IGxlZnQgPSBsZWZ0fHwwLCB0b3AgPSB0b3B8fDAKCQkJaWYgKGxheW91dC50b3ArdGFyZ2V0Lm9mZnNldEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkgewoJCQkJbGF5b3V0LnRvcCA9ICIiLCBsYXlvdXQuYm90dG9tID0gcmlnaHQ/IGh0bWwuQUNUSU9OX0hFSUdIVDogd2luZG93LmlubmVySGVpZ2h0LXJlY3QudG9wCgkJCX0KCQkJaWYgKGxheW91dC5sZWZ0K3RhcmdldC5vZmZzZXRXaWR0aCA+IGxlZnQrd2lkdGgpIHsKCQkJCWxheW91dC5sZWZ0ID0gIiIsIGxheW91dC5yaWdodCA9IDAKCQkJfQoJCX0pCgkJcmV0dXJuIGNhbi5vbm1vdGlvbi5tb3ZlKGNhbiwgdGFyZ2V0LCBsYXlvdXQpLCBsYXlvdXQKCX0sCgoJZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LkxBWU9VVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFsKCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5DT05URU5UfV19LAoJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t2aWV3OiBjaGF0LkRJU1BMQVl9XX0sCgkJXX1dKQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjaGF0LkxBWU9VVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFt7dHlwZTogaHRtbC5UUiwgbGlzdDogWwoJCQl7dHlwZTogaHRtbC5URCwgbGlzdDogW3t2aWV3OiBjaGF0LlBST0pFQ1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfX1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFsKCQkJCXt2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5DT05URU5UfV19LAoJCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuRElTUExBWX1dfSwKCQkJCV19CgkJCV19CgkJXX1dIH1dKQoJfSwKCXByb2ZpbGVfYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9qZWN0LCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkuZGlzcGxheSwgaWNlLkFVVE8pCgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCX0sCglwcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fb3V0cHV0CgkJZnVuY3Rpb24gdG9nZ2xlKHZpZXcpIHsgdmFyIHNob3cgPSB2aWV3LnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB2aWV3LCBzaG93KSwgdmlldy5fdG9nZ2xlPyB2aWV3Ll90b2dnbGUoZXZlbnQsIHNob3cpOiBjYW4ub25pbXBvcnQubGF5b3V0ICYmIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQlyZXR1cm4gc2hvdwoJCX0KCgkJLy8gdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiLCBkb3duID0gIiYjNzA5OyIsIHVwID0gIiYjNzA4OyIKCQl2YXIgZ3QgPSAiJiMxMDA5NTsiLCBsdCA9ICImIzEwMDk0OyIsIGRvd24gPSBsdCwgdXAgPSBndAoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCXt2aWV3OiBbY2hhdC5QUk9KRUNULCBodG1sLlREXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5QUk9KRUNUXX1dfSwKCQkJe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFsKCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJCQl7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5URF0sIGxpc3Q6IFt7dmlldzogW2NoYXQuQ09OVEVOVF19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9KRUNUXV0sIGxpc3Q6IFt7dGV4dDogW2x0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkucHJvamVjdCk/IGx0OiBndCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9GSUxFXV0sIGxpc3Q6IFt7dGV4dDogW2x0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkucHJvZmlsZSk/IGd0OiBsdCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCQl7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5ESVNQTEFZXV0sIGxpc3Q6IFt7dGV4dDogW3VwLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBldmVudC50YXJnZXQsIFt7dGV4dDogW3RvZ2dsZShjYW4udWkuZGlzcGxheSk/IGRvd246IHVwLCBodG1sLkRJVl19XSkKCQkJCQkJfX0sCgkJCQkJXX0sCgkJCQkJe3ZpZXc6IFtjaGF0LlBST0ZJTEUsIGh0bWwuVERdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LlBST0ZJTEVdLCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0sCgkJCQldfV19LAoJCQkJe3ZpZXc6IFtjaGF0LkRJU1BMQVksIGh0bWwuVFJdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LkRJU1BMQVldLCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0KCQkJXX0KCQldIH1dKTsgcmV0dXJuIGNhbi51aSA9IHVpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OTU9USU9OLCB7aGVscDogIuWKqOaAgeeJueaViCIsIF9pbml0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGh0bWwuT1JJRU5UQVRJT05DSEFOR0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBodG1sLk9SSUVOVEFUSU9OQ0hBTkdFKSB9KQoJCWNhbi5vbm1vdGlvbi5mbG9hdC5hdXRvKGNhbiwgdGFyZ2V0KQoJfSwKCWZsb2F0OiB7X2hhc2g6IHt9LAoJCWRlbDogZnVuY3Rpb24oY2FuLCBrZXkpIHsKCQkJa2V5ID09IGNoYXQuQ0FSVEUgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGNoYXQuQ0FSVEUpLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIHRhcmdldCkKCQkJfSkKCQkJdmFyIGxhc3QgPSB0aGlzLl9oYXNoW2tleV07IGlmICghbGFzdCkgeyByZXR1cm4gfQoJCQlsYXN0LmNsb3NlPyBsYXN0LmNsb3NlKCk6IGNhbi5wYWdlLlJlbW92ZShjYW4sIGxhc3QuX3RhcmdldCkKCQl9LAoJCWFkZDogZnVuY3Rpb24oY2FuLCBrZXksIHZhbHVlKSB7IHJldHVybiB0aGlzLmRlbChjYW4sIGtleSksIHRoaXMuX2hhc2hba2V5XSA9IHZhbHVlIH0sCgkJYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSkgeyB2YXIgdGhhdCA9IHRoaXMKCQkJdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMikKCQkJaWYgKGxpc3QubGVuZ3RoID09IDApIHsgbGlzdCA9IFtjaGF0LkNBUlRFLCBjaGF0LklOUFVUXSB9CgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge29ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyAKCQkJCWlmIChjYW4ucGFnZS50YWdpcyhodG1sLklNRywgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXksIGluZGV4KSB7IHRoYXQuZGVsKGNhbiwga2V5KSB9KQoJCQl9fSkKCQl9LAoJfSwKCXN0b3J5OiB7CgkJX2hhc2g6IHsKCQkJc3Bhcms6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgdGFyZ2V0KSB7CgkJCQltZXRhW21kYi5OQU1FXSA9PSBodG1sLklOTkVSPyBjYW4ub25tb3Rpb24uY29weShjYW4sIHRhcmdldCk6IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5TUEFOLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLm9ubW90aW9uLmNvcHkoY2FuLCBpdGVtKQoJCQkJfSkKCQkJfSwKCQl9LAoJCWF1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHZhciB0aGF0ID0gdGhpczsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsICIuc3RvcnkiLCBmdW5jdGlvbihpdGVtKSB7IHZhciBtZXRhID0gaXRlbS5kYXRhc2V0CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIGNhbi5iYXNlLk9iaihtZXRhLnN0eWxlKSkKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKHRoYXQuX2hhc2hbbWV0YS50eXBlXSwgW2NhbiwgbWV0YSwgdGFyZ2V0XSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLklGUkFNRSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS04OCwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpLTMwKQoJCQl9KQoJCX0sCgl9LAoJY29weTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHRleHQsIGNiKSB7CgkJdGFyZ2V0LnRpdGxlID0gIueCueWHu+WkjeWItiIsIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCB0ZXh0fHx0YXJnZXQuaW5uZXJUZXh0KQoJCQljYW4ucmVxdWVzdChldmVudCwga2l0LkRpY3QoaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCkKCQl9Cgl9LAoJbGluazogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHRleHQpIHsKCQlpZiAodGFyZ2V0LmlubmVyVGV4dCA9PSAiIikgeyB0YXJnZXQuaW5uZXJUZXh0ID0gdGFyZ2V0LmhyZWYgfQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3RhcmdldDogIl9ibGFuayJ9KQoJfSwKCgljbGVhcjogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIGNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsICIiKSwgdHJ1ZSB9LAoJY2FjaGU6IGZ1bmN0aW9uKGNhbiwgbmV4dCkgeyB2YXIgbGlzdCA9IGNhbi5iYXNlLk9iaihjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMiksIFtjYW4uX291dHB1dF0pCgkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0uX2NhY2hlX2tleSAmJiBjYW4ucGFnZS5DYWNoZShpdGVtLl9jYWNoZV9rZXksIGl0ZW0sIGl0ZW0uc2Nyb2xsVG9wKzEpIH0pCgkJdmFyIGtleSA9IG5leHQoY2FuLl9jYWNoZV9kYXRhID0gY2FuLl9jYWNoZV9kYXRhfHx7fSk7IGlmICgha2V5KSB7IHJldHVybiB9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgcG9zID0gY2FuLnBhZ2UuQ2FjaGUoaXRlbS5fY2FjaGVfa2V5ID0ga2V5LCBpdGVtKQoJCQlpZiAocG9zKSB7IGl0ZW0uc2Nyb2xsVG8gJiYgaXRlbS5zY3JvbGxUbygwLCBwb3MtMSk7IHJldHVybiBpdGVtIH0KCQl9KS5sZW5ndGggPiAwCgl9LAoJZGVsYXk6IGZ1bmN0aW9uKGNhbiwgY2IsIGludGVydmFsKSB7IGNhbi5jb3JlLlRpbWVyKGludGVydmFsfHwxMDAsIGNiKSB9LAoJZm9jdXM6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGlmICghdGFyZ2V0KSB7IHJldHVybiB9CgkJdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlICYmIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSgwLCAtMSksIHRhcmdldC5mb2N1cygpCgl9LAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGlucHV0LCBhcmdzKSB7IHZhciBfYXJncyA9IGFyZ3MKCQlyZXR1cm4gY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgaW5wdXQsIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnNlYXJjaChjYW4ucmVxdWVzdChldmVudCwge2FyZ3M6IFttZGIuVFlQRSwgY2hhdC5GSUVMRF0uY29uY2F0KF9hcmdzfHxbXSwgYXJnc3x8W10pfSksIFtbIkhlYWRlciIsIGNoYXQuT05BQ1RJT04sIHdlYi5TSEFSRV1dKQoJCX0pCgl9LAoKCWhpZGRlbjogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHNob3cpIHsKCQljYW4ucGFnZS5zdHlsZURpc3BsYXkoY2FuLCB0YXJnZXR8fGNhbi5fdGFyZ2V0LCBzaG93PyAiIjogaHRtbC5OT05FKQoJCXJldHVybiBzaG93Cgl9LAoJdG9nZ2xlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgc2hvdywgaGlkZSkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJaWYgKHNob3cgPT09IHRydWUpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQsIHRydWUpIH0KCQlpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQsIGZhbHNlKSB9CgkJdmFyIHN0YXR1cyA9IHRhcmdldC5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORQoJCWlmICghKHN0YXR1cz8gY2FuLmJhc2UuaXNGdW5jKHNob3cpICYmIHNob3coKTogY2FuLmJhc2UuaXNGdW5jKGhpZGUpICYmIGhpZGUoKSkpIHsKCQkJY2FuLnBhZ2Uuc3R5bGVEaXNwbGF5KGNhbiwgdGFyZ2V0LCBzdGF0dXM/ICIiOiBodG1sLk5PTkUpCgkJfQoJCXJldHVybiBzdGF0dXMKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBuYW1lLCB3aGljaCkgewoJCXZhciBvbGQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIG5hbWUsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpKSB7IHJldHVybiBpbmRleCB9CgkJfSlbMF0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIG5hbWUsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLlNFTEVDVCwgaXRlbSA9PSB3aGljaCB8fCB3aGljaCA9PSBpbmRleCkKCQl9KQoJCXJldHVybiBvbGQKCX0sCgltb2RpZnk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjYiwgaXRlbSkgeyB2YXIgYmFjayA9IHRhcmdldC5pbm5lckhUTUwsIHRleHQgPSB0YXJnZXQuaW5uZXJUZXh0CgkJaWYgKGJhY2subGVuZ3RoID4gMTIwIHx8IGJhY2suaW5kZXhPZihpY2UuTkwpID4gLTEpIHsKCQkJcmV0dXJuIGNhbi5vbm1vdGlvbi5tb2RpZnlzKGNhbiwgdGFyZ2V0LCBjYikKCQl9CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLklOUFVULCB2YWx1ZTogdGFyZ2V0LmlubmVyVGV4dCwgc3R5bGU6IHsKCQkJd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aCA+IDQwMD8gNDAwOiB0YXJnZXQub2Zmc2V0V2lkdGgtMjAsCgkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSBsYW5nLkVOVEVSOiB0YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnZhbHVlCgkJCQkJZXZlbnQudGFyZ2V0LnZhbHVlID09IGJhY2sgfHwgY2IoZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSwgYmFjaykKCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLkVTQ0FQRTogdGFyZ2V0LmlubmVySFRNTCA9IGJhY2s7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJfQoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgaXRlbSAmJiBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0LCBjYikKCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5jbGljaygpIH0pCgkJfX1dKQoJfSwKCW1vZGlmeXM6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjYiwgaXRlbSkgeyB2YXIgYmFjayA9IHRhcmdldC5pbm5lckhUTUwKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIHZhbHVlOiB0YXJnZXQuaW5uZXJUZXh0LCBzdHlsZTogewoJCQl3aWR0aDogdGFyZ2V0Lm9mZnNldFdpZHRoID4gNDAwPyA0MDA6IHRhcmdldC5vZmZzZXRXaWR0aC0yMCwgaGVpZ2h0OiB0YXJnZXQub2Zmc2V0SGVpZ2h0IDwgNjA/IDYwOiB0YXJnZXQub2Zmc2V0SGVpZ2h0LTIwLAoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjoKCQkJCQlpZiAoZXZlbnQuY3RybEtleSkgeyB0YXJnZXQuaW5uZXJIVE1MID0gZXZlbnQudGFyZ2V0LnZhbHVlCgkJCQkJCWV2ZW50LnRhcmdldC52YWx1ZSA9PSBiYWNrIHx8IGNiKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIGJhY2spCgkJCQkJfQoJCQkJCWJyZWFrCgkJCQljYXNlIGxhbmcuRVNDQVBFOiB0YXJnZXQuaW5uZXJIVE1MID0gYmFjazsgYnJlYWsKCQkJCWRlZmF1bHQ6IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKQoJCQl9CgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQlpdGVtICYmIGNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQpCgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQuY2xpY2soKSB9KQoJCX19XSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lLCB0YXJnZXQpIHsKCQljYW4ucmVxdWlyZShbImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vaHRtbDJjYW52YXNAMS4wLjAtcmMuNS9kaXN0L2h0bWwyY2FudmFzLm1pbi5qcyJdLCBmdW5jdGlvbigpIHsKCQkJaHRtbDJjYW52YXModGFyZ2V0fHxjYW4uX3RhcmdldCkudGhlbihmdW5jdGlvbiAoY2FudmFzKSB7IHZhciB1cmwgPSBjYW52YXMudG9EYXRhVVJMKCJpbWFnZS9wbmciKQoJCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3QoY2FuLCB7Y29udGVudDoge2ltZzogdXJsLCBzdHlsZTogeyJtYXgtaGVpZ2h0IjogMjQwLCBkaXNwbGF5OiBodG1sLkJMT0NLfX0sIGR1cmF0aW9uOiAtMSwKCQkJCQlhY3Rpb246IHNoeSh7fSwgW2NsaS5DTE9TRSwgImRvd25sb2FkIl0sIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IG5hbWV9XSwgZnVuY3Rpb24obGlzdCkgeyB0b2FzdC5jbG9zZSgpCgkJCQkJCQljYW4ucGFnZS5DcmVhdGUoY2FuLCBodG1sLkEsIHtocmVmOiB1cmwsIGRvd25sb2FkOiBsaXN0WzBdKyIucG5nIn0pLmNsaWNrKCkKCQkJCQkJfSkKCQkJCQl9KSwKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCgoJaGlkZTogZnVuY3Rpb24oY2FuLCB0aW1lLCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQl0aW1lID0gY2FuLmJhc2UuaXNPYmplY3QodGltZSk/IHRpbWU6IHt2YWx1ZTogMTAsIGxlbmd0aDogdGltZXx8MjB9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgMSkKCQljYW4uY29yZS5UaW1lcih0aW1lLCBmdW5jdGlvbihldmVudCwgdmFsdWUsIGluZGV4KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk9QQUNJVFksIDEtKGluZGV4KzEpL3RpbWUubGVuZ3RoKQoJCX0sIGZ1bmN0aW9uKCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCksIGNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLkRJU1BMQVksIGh0bWwuTk9ORSkgfSkKCX0sCglzaG93OiBmdW5jdGlvbihjYW4sIHRpbWUsIGNiLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCXRpbWUgPSBjYW4uYmFzZS5pc09iamVjdCh0aW1lKT8gdGltZToge2ludGVydmFsOiAxMCwgbGVuZ3RoOiB0aW1lfHwzMH0KCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAwLCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spCgkJY2FuLmNvcmUuVGltZXIodGltZSwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAoaW5kZXgrMSkvdGltZS5sZW5ndGgpCgkJfSwgY2IpCgl9LAoJbW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGxheW91dCwgY2IpIHsgdmFyIGJlZ2luOyBsYXlvdXQgPSBsYXlvdXR8fHt9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGxheW91dCksIHRhcmdldC5vbm1vdXNlZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWxheW91dC5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0LCBsYXlvdXQud2lkdGggPSB0YXJnZXQub2Zmc2V0V2lkdGgKCQkJbGF5b3V0LmxlZnQgPSB0YXJnZXQub2Zmc2V0TGVmdCwgbGF5b3V0LnRvcCA9IHRhcmdldC5vZmZzZXRUb3AKCQkJYmVnaW4gPSBjYW4uYmFzZS5Db3B5KHt4OiBldmVudC54LCB5OiBldmVudC55fSwgbGF5b3V0KQoJCX0sIHRhcmdldC5vbm1vdXNldXAgPSBmdW5jdGlvbihldmVudCkgeyBiZWdpbiA9IG51bGwgfQoKCQl0YXJnZXQub25tb3VzZW1vdmUgPSBmdW5jdGlvbihldmVudCkgeyBpZiAoIWJlZ2luIHx8ICFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgkJCWlmIChldmVudC5zaGlmdEtleSkgewoJCQkJbGF5b3V0LndpZHRoID0gbGF5b3V0LndpZHRoICsgZXZlbnQueCAtIGJlZ2luLnggCgkJCQlsYXlvdXQuaGVpZ2h0ID0gbGF5b3V0LmhlaWdodCArIGV2ZW50LnkgLSBiZWdpbi55CgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5IRUlHSFQsIGxheW91dC5oZWlnaHQsIGh0bWwuV0lEVEgsIGxheW91dC53aWR0aCkKCQkJfSBlbHNlIHsKCQkJCWxheW91dC50b3AgPSBiZWdpbi50b3AgKyBldmVudC55IC0gYmVnaW4ueQoJCQkJbGF5b3V0LmxlZnQgPSBiZWdpbi5sZWZ0ICsgZXZlbnQueCAtIGJlZ2luLnggCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5MRUZULCBsYXlvdXQubGVmdCwgaHRtbC5UT1AsIGxheW91dC50b3ApCgkJCX0KCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldCwgbGF5b3V0KQoJCX0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldCwgbGF5b3V0KQoJfSwKCglzZWxlY3RGaWVsZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmICghZXZlbnQuY3RybEtleSB8fCBldmVudC5rZXkgPCAiMCIgfHwgZXZlbnQua2V5ID4gIjkiKSB7IHJldHVybiB9CgkJaWYgKGV2ZW50LmtleSA9PSAiMCIpIHsgcmV0dXJuIGNhbi5vbmltcG9ydC5fYmFjayhjYW4pIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7IGlmIChpbmRleCA9PSBldmVudC5rZXkpIHsKCQkJdmFyIGhlYWQgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5USCwgZnVuY3Rpb24odGgsIG9yZGVyKSB7IHJldHVybiB0aC5pbm5lclRleHQgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgeyBjYW4uT3B0aW9uKGhlYWRbaW5kZXhdLCB0ZC5pbm5lclRleHQpIH0pCgkJCWNhbi5VcGRhdGUoZXZlbnQpCgkJfSB9KQoJfSwKCXNlbGVjdElucHV0VGFibGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGNiLCB0YXJnZXQpIHsKCQkvLyBpZiAodGFyZ2V0LnZhbHVlID09ICIiKSB7IHJldHVybiBjYigpIH0KCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGxhbmcuU0hJRlQ6CgkJCWNhc2UgbGFuZy5DT05UUk9MOgoJCQkJcmV0dXJuCgkJfQoKCQlpZiAoZXZlbnQuY3RybEtleSkgewoJCQlpZiAodGFyZ2V0Ll9pbmRleCA9PSB1bmRlZmluZWQpIHsKCQkJCXRhcmdldC5faW5kZXggPSAtMSwgdGFyZ2V0Ll92YWx1ZSA9IHRhcmdldC52YWx1ZQoJCQl9CgkJCWZ1bmN0aW9uIHNlbGVjdChvcmRlcikgeyBpZiAob3JkZXIgPT0gLTEpIHsgdGFyZ2V0LnZhbHVlID0gdGFyZ2V0Ll92YWx1ZSB9CgkJCQl2YXIgaW5kZXggPSAwOyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCBodG1sLkhJRERFTikpIHsgcmV0dXJuIH0KCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgdHIsIGh0bWwuU0VMRUNUKTsgaWYgKG9yZGVyICE9IGluZGV4KyspIHsgcmV0dXJuIHRyIH0KCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdHIsIGh0bWwuU0VMRUNUKSwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgewoJCQkJCQlpbmRleCA9PSAwICYmICh0YXJnZXQudmFsdWUgPSB0ZC5pbm5lclRleHQpCgkJCQkJfSk7IHJldHVybiB0cgoJCQkJfSkubGVuZ3RoCgkJCX0KCQkJdmFyIHRvdGFsID0gc2VsZWN0KHRhcmdldC5faW5kZXgpOyBzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJY2FzZSAibiI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKHRhcmdldC5faW5kZXgrMikgJSAodG90YWwrMSkgLSAxKTsgYnJlYWsKCQkJCWNhc2UgInAiOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4K3RvdGFsKzEpICUgKHRvdGFsKzEpIC0gMSk7IGJyZWFrCgkJCQlkZWZhdWx0OiByZXR1cm4KCQkJfQoJCQlyZXR1cm4gY2FuLlN0YXR1cyhtZGIuSU5ERVgsIHRhcmdldC5faW5kZXgpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQl9CgoJCXRhcmdldC5faW5kZXggPSAtMSwgdGFyZ2V0Ll92YWx1ZSA9IHRhcmdldC52YWx1ZQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyLCBpbmRleCkgewoJCQl2YXIgaGFzID0gZmFsc2U7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgewoJCQkJaGFzID0gaGFzIHx8IHRkLmlubmVyVGV4dC5pbmRleE9mKHRhcmdldC52YWx1ZSk+LTEKCQkJfSksIGNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURERU4sICFoYXMpCgkJfSkKCgkJdmFyIHRvdGFsID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsIGh0bWwuSElEREVOKSkgeyByZXR1cm4gdHIgfQoJCX0pLmxlbmd0aDsgdG90YWwgPT0gMCAmJiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQljYW4uU3RhdHVzKGtpdC5EaWN0KG1kYi5UT1RBTCwgdG90YWwsIG1kYi5JTkRFWCwgdGFyZ2V0Ll9pbmRleCkpCgl9LAoJc2VsZWN0VGFibGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY2IpIHsgaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgkJZnVuY3Rpb24gc2VsZWN0KG9yZGVyKSB7IHZhciBpbmRleCA9IDAKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgaHRtbC5ISURERU4pKSB7IHJldHVybiB9CgkJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5TRUxFQ1QsIG9yZGVyID09IGluZGV4KyspKSB7IHJldHVybiB0ciB9CgkJCQlyZXR1cm4gY2FuLlN0YXR1cyhtZGIuSU5ERVgsIGluZGV4LTEpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRyKSwgdHIKCQkJfSkubGVuZ3RoCgkJfQoJCXZhciB0b3RhbCA9IHNlbGVjdCh0YXJnZXQuX2luZGV4KTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAibiI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKCh0YXJnZXQuX2luZGV4KSsxKSAlIHRvdGFsKTsgYnJlYWsKCQkJY2FzZSAicCI6IHNlbGVjdCh0YXJnZXQuX2luZGV4ID0gKHRhcmdldC5faW5kZXgtMSkgPCAwPyB0b3RhbC0xOiAodGFyZ2V0Ll9pbmRleC0xKSk7IGJyZWFrCgkJCWRlZmF1bHQ6IHRhcmdldC5faW5kZXggPSAwOyByZXR1cm4KCQl9IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTktFWU1BUCwge2hlbHA6ICLplK7nm5jkuqTkupIiLCBfZm9jdXM6IFtdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlkb2N1bWVudC5ib2R5Lm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQlpZiAod2luZG93LndlYnZpZXcpIHsKCQkJCWlmIChldmVudC50YXJnZXQudGFnTmFtZSA9PSAiQSIpIHsgY2FuLnVzZXIub3BlbihldmVudC50YXJnZXQuaHJlZikgfQoJCQl9CgkJCWlmIChjYW4ucGFnZS50YWdpcyhbaHRtbC5TRUxFQ1QsIGh0bWwuSU5QVVQsIGh0bWwuVEVYVEFSRUFdLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGRvY3VtZW50LmJvZHksIGNhbi5wYWdlLktleXMoImZpZWxkc2V0LmlucHV0LmtleS5mbG9hdCIpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQl9KQoJCX0KCQljYW4ub25rZXltYXAuX2J1aWxkKGNhbiksIGRvY3VtZW50LmJvZHkub25rZXlkb3duID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJaWYgKGV2ZW50Lm1ldGFLZXkpIHsgaWYgKHdpbmRvdy53ZWJ2aWV3KSB7CgkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCWNhc2UgInEiOiB3aW5kb3cudGVybWluYXRlKCk7IGJyZWFrCgkJCQkJY2FzZSAidyI6IGNhbi51c2VyLmNsb3NlKCk7IGJyZWFrCgkJCQkJY2FzZSAiciI6IGNhbi51c2VyLnJlbG9hZCgpOyBicmVhawoJCQkJCWNhc2UgImYiOiBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KHt9LCB7dHlwZTogIioifSkpOyBicmVhawoJCQkJCWNhc2UgIlsiOiBoaXN0b3J5LmJhY2soKTsgYnJlYWsKCQkJCQljYXNlICJdIjogaGlzdG9yeS5mb3J3YXJkKCk7IGJyZWFrCgkJCQl9CgkJCX0gcmV0dXJuIH0KCgkJCWlmIChjYW4ucGFnZS50YWdpcyhbaHRtbC5TRUxFQ1QsIGh0bWwuSU5QVVQsIGh0bWwuVEVYVEFSRUFdLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgeyJtb2RlbCI6ICJub3JtYWwifSk7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTktFWURPV04sIG1zZyk7IGlmIChtc2cuT3B0aW9uKGljZS5NU0dfSEFORExFKSA9PSBpY2UuVFJVRSkgeyByZXR1cm4gfQoJCQljYW4uX2tleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sIG1zZy5PcHRpb24oIm1vZGVsIiksIGNhbi5fa2V5bGlzdCwgY2FuLl9vdXRwdXQpCgkJfQoJfSwKCV9idWlsZDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLmNvcmUuSXRlbShjYW4ub25rZXltYXAuX21vZGUsIGZ1bmN0aW9uKGl0ZW0sIHZhbHVlKSB7IHZhciBlbmdpbmUgPSB7bGlzdDoge319CgkJCWNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgdmFyIG1hcCA9IGVuZ2luZQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBrZXkubGVuZ3RoOyBpKyspIHsKCQkJCQlpZiAoIW1hcC5saXN0W2tleVtpXV0pIHsgbWFwLmxpc3Rba2V5W2ldXSA9IHtsaXN0OiB7fX0gfQoJCQkJCW1hcCA9IG1hcC5saXN0W2tleVtpXV07IGlmIChpID09IGtleS5sZW5ndGgtMSkgeyBtYXAuY2IgPSBjYiB9CgkJCQl9CgkJCX0pLCBjYW4ub25rZXltYXAuX2VuZ2luZVtpdGVtXSA9IGVuZ2luZQoJCX0pCgl9LAoJX3BhcnNlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtb2RlLCBsaXN0LCB0YXJnZXQpIHsgbGlzdCA9IGxpc3R8fFtdCgkJaWYgKFsiQ29udHJvbCIsICJTaGlmdCJdLmluZGV4T2YoZXZlbnQua2V5KSA+IC0xKSB7IHJldHVybiBsaXN0IH0KCQlsaXN0LnB1c2goZXZlbnQua2V5KTsgZm9yICh2YXIgcHJlID0gMDsgcHJlIDwgbGlzdC5sZW5ndGg7IHByZSsrKSB7CgkJCWlmICgiMCIgPD0gbGlzdFtwcmVdICYmIGxpc3RbcHJlXSA8PSAiOSIpIHsgY29udGludWUgfSBicmVhawoJCX07IHZhciBjb3VudCA9IHBhcnNlSW50KGxpc3Quc2xpY2UoMCwgcHJlKS5qb2luKCIiKSl8fDEKCgkJdmFyIG1hcCA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXQoJCWZ1bmN0aW9uIHJlcGVhdChjYiwgY291bnQpIHsgbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gMTsgaSA8PSBjb3VudDsgaSsrKSB7IGlmIChjYihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSkgeyBicmVhayB9IH0gfQoJCXZhciBjYiA9IG1hcCAmJiBtYXBbZXZlbnQua2V5XTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgZXZlbnQua2V5Lmxlbmd0aCA+IDEpIHsgcmVwZWF0KGNiLCBjb3VudCk7IHJldHVybiBsaXN0IH0KCQl2YXIgY2IgPSBtYXAgJiYgbWFwW2V2ZW50LmtleS50b0xvd2VyQ2FzZSgpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgZXZlbnQua2V5Lmxlbmd0aCA+IDEpIHsgcmVwZWF0KGNiLCBjb3VudCk7IHJldHVybiBsaXN0IH0KCgkJdmFyIG1hcCA9IGNhbi5vbmtleW1hcC5fZW5naW5lW21vZGVdOyBpZiAoIW1hcCkgeyByZXR1cm4gW10gfQoJCWZvciAodmFyIGkgPSBwcmU7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrICkgewoJCQl2YXIgbWFwID0gbWFwLmxpc3RbbGlzdFtpXV07IGlmICghbWFwKSB7IHJldHVybiBbXSB9CgkJCWlmIChpID09IGxpc3QubGVuZ3RoLTEgJiYgY2FuLmJhc2UuaXNGdW5jKG1hcC5jYikpIHsgcmVwZWF0KG1hcC5jYiwgY291bnQpOyByZXR1cm4gW10gfQoJCX0KCQlyZXR1cm4gbGlzdAoJfSwKCV9tb2RlOiB7CgkJaW5zZXJ0OiB7CgkJCWprOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LmJsdXIoKSwgY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQtMSwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQlFc2NhcGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuYmx1cigpIH0sCgkJCUVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIGhpcyA9IHRhcmdldC5faGlzdG9yeXx8W10KCQkJCWhpcy5wdXNoKHRhcmdldC52YWx1ZSksIHRhcmdldC5faGlzdG9yeSA9IGhpcywgdGFyZ2V0Ll9jdXJyZW50ID0gaGlzLmxlbmd0aAoJCQkJY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSAmJiBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpCgkJCX0sCgkJfSwKCQlpbnNlcnRfY3RybDogewoJCQlwOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQkJCXZhciBoaXMgPSB0YXJnZXQuX2hpc3Rvcnl8fFtdLCBwb3MgPSB0YXJnZXQuX2N1cnJlbnR8fDAKCQkJCXBvcyA9IC0tcG9zICUgKGhpcy5sZW5ndGgrMSk7IGlmIChwb3MgPCAwKSB7IHBvcyA9IGhpcy5sZW5ndGggfQoJCQkJdGFyZ2V0Ll9jdXJyZW50ID0gcG9zLCB0YXJnZXQudmFsdWUgPSBoaXNbcG9zXXx8IiIKCQkJfSwKCQkJbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgaGlzID0gdGFyZ2V0Ll9oaXN0b3J5fHxbXSwgcG9zID0gdGFyZ2V0Ll9jdXJyZW50fHwwCgkJCQlwb3MgPSArK3BvcyAlIChoaXMubGVuZ3RoKzEpCgkJCQl0YXJnZXQuX2N1cnJlbnQgPSBwb3MsIHRhcmdldC52YWx1ZSA9IGhpc1twb3NdfHwiIgoJCQl9LAoKCQkJdTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgMCwgdGFyZ2V0LnNlbGVjdGlvbkVuZCkgfSwKCQkJazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQloOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQtMSwgMSkgfSwKCQkJZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgMCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KSB9LAoJCQl3OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIHN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTIsIGVuZCA9IHRhcmdldC5zZWxlY3Rpb25FbmQtMQoJCQkJZm9yICh2YXIgaSA9IHN0YXJ0OyBpID49IDA7IGktLSkgewoJCQkJCWlmICh0YXJnZXQudmFsdWVbZW5kXSA9PSBpY2UuU1AgJiYgdGFyZ2V0LnZhbHVlW2ldICE9IGljZS5TUCkgeyBicmVhayB9CgkJCQkJaWYgKHRhcmdldC52YWx1ZVtlbmRdICE9IGljZS5TUCAmJiB0YXJnZXQudmFsdWVbaV0gPT0gaWNlLlNQKSB7IGJyZWFrIH0KCQkJCX0gY2FuLm9ua2V5bWFwLmRlbGV0ZVRleHQodGFyZ2V0LCBpKzEsIGVuZC1pKQoJCQl9LAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKCglpbnB1dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQubWV0YWtleSkgeyByZXR1cm4gfSB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJdGFyZ2V0Ll9rZXlzID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBldmVudC5jdHJsS2V5PyAiaW5zZXJ0X2N0cmwiOiBtZGIuSU5TRVJULCB0YXJnZXQuX2tleXMsIHRhcmdldCkKCX0sCglwcmV2ZW50OiBmdW5jdGlvbihldmVudCkgeyBldmVudC5zdG9wUHJvcGFnYXRpb24oKSwgZXZlbnQucHJldmVudERlZmF1bHQoKTsgcmV0dXJuIHRydWUgfSwKCWRlbGV0ZVRleHQ6IGZ1bmN0aW9uKHRhcmdldCwgc3RhcnQsIGNvdW50KSB7IHZhciBlbmQgPSBjb3VudD8gc3RhcnQrY291bnQ6IHRhcmdldC52YWx1ZS5sZW5ndGgKCQl2YXIgY3V0ID0gdGFyZ2V0LnZhbHVlLnNsaWNlKHN0YXJ0LCBlbmQpCgkJdGFyZ2V0LnZhbHVlID0gdGFyZ2V0LnZhbHVlLnN1YnN0cmluZygwLCBzdGFydCkrdGFyZ2V0LnZhbHVlLnN1YnN0cmluZyhlbmQsIHRhcmdldC52YWx1ZS5sZW5ndGgpCgkJcmV0dXJuIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCwgc3RhcnQpLCBjdXQKCX0sCglpbnNlcnRUZXh0OiBmdW5jdGlvbih0YXJnZXQsIHRleHQpIHsgdmFyIHN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0CgkJdmFyIGJlZm9yZSA9IHRhcmdldC52YWx1ZS5zbGljZSgwLCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIGFmdGVyID0gdGFyZ2V0LnZhbHVlLnNsaWNlKHRhcmdldC5zZWxlY3Rpb25FbmQpCgkJdGFyZ2V0LnZhbHVlID0gYmVmb3JlK3RleHQrYWZ0ZXIKCQlyZXR1cm4gdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHN0YXJ0KzEsIHN0YXJ0KzEpCgl9LAoJY3Vyc29yTW92ZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGNvdW50LCBiZWdpbikgeyBiZWdpbiAhPSB1bmRlZmluZWQgJiYgdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKGJlZ2luLCBiZWdpbikKCQl0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UodGFyZ2V0LnNlbGVjdGlvblN0YXJ0K2NvdW50LCB0YXJnZXQuc2VsZWN0aW9uU3RhcnQrY291bnQpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9yZXF1aXJlL3BhZ2Uvbm9kZV9tb2R1bGVzL3h0ZXJtL2xpYi94dGVybS5qcyIKIWZ1bmN0aW9uKGUsdCl7aWYoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSltb2R1bGUuZXhwb3J0cz10KCk7ZWxzZSBpZigiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXSx0KTtlbHNle3ZhciByPXQoKTtmb3IodmFyIGkgaW4gcikoIm9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHM6ZSlbaV09cltpXX19KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57InVzZSBzdHJpY3QiO3ZhciBlPXs0NTY3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkFjY2Vzc2liaWxpdHlNYW5hZ2VyPXZvaWQgMDt2YXIgbz1yKDkwNDIpLHM9cig2MTE0KSxhPXIoOTkyNCksYz1yKDM2NTYpLGw9cig4NDQpLGg9cig1NTk2KSx1PXIoOTYzMSksZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO2kuX3Rlcm1pbmFsPXQsaS5fcmVuZGVyU2VydmljZT1yLGkuX2xpdmVSZWdpb25MaW5lQ291bnQ9MCxpLl9jaGFyc1RvQ29uc3VtZT1bXSxpLl9jaGFyc1RvQW5ub3VuY2U9IiIsaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1hY2Nlc3NpYmlsaXR5IiksaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290LnRhYkluZGV4PTAsaS5fcm93Q29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGkuX3Jvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoInJvbGUiLCJsaXN0IiksaS5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWFjY2Vzc2liaWxpdHktdHJlZSIpLGkuX3Jvd0VsZW1lbnRzPVtdO2Zvcih2YXIgbj0wO248aS5fdGVybWluYWwucm93cztuKyspaS5fcm93RWxlbWVudHNbbl09aS5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCksaS5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKGkuX3Jvd0VsZW1lbnRzW25dKTtpZihpLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uQm91bmRhcnlGb2N1cyhlLDApfSxpLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uQm91bmRhcnlGb2N1cyhlLDEpfSxpLl9yb3dFbGVtZW50c1swXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsaS5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyKSxpLl9yb3dFbGVtZW50c1tpLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLGkuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksaS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCksaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKGkuX3Jvd0NvbnRhaW5lciksaS5fcmVuZGVyUm93c0RlYm91bmNlcj1uZXcgYS5UaW1lQmFzZWREZWJvdW5jZXIoaS5fcmVuZGVyUm93cy5iaW5kKGkpKSxpLl9yZWZyZXNoUm93cygpLGkuX2xpdmVSZWdpb249ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksaS5fbGl2ZVJlZ2lvbi5jbGFzc0xpc3QuYWRkKCJsaXZlLXJlZ2lvbiIpLGkuX2xpdmVSZWdpb24uc2V0QXR0cmlidXRlKCJhcmlhLWxpdmUiLCJhc3NlcnRpdmUiKSxpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuYXBwZW5kQ2hpbGQoaS5fbGl2ZVJlZ2lvbiksIWkuX3Rlcm1pbmFsLmVsZW1lbnQpdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZW5hYmxlIGFjY2Vzc2liaWxpdHkgYmVmb3JlIFRlcm1pbmFsLm9wZW4iKTtyZXR1cm4gaS5fdGVybWluYWwuZWxlbWVudC5pbnNlcnRBZGphY2VudEVsZW1lbnQoImFmdGVyYmVnaW4iLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdCksaS5yZWdpc3RlcihpLl9yZW5kZXJSb3dzRGVib3VuY2VyKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uUmVzaXplKChmdW5jdGlvbihlKXtyZXR1cm4gaS5fb25SZXNpemUoZS5yb3dzKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vblJlbmRlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzKGUuc3RhcnQsZS5lbmQpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uU2Nyb2xsKChmdW5jdGlvbigpe3JldHVybiBpLl9yZWZyZXNoUm93cygpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uQTExeUNoYXIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9vbkNoYXIoZSl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25MaW5lRmVlZCgoZnVuY3Rpb24oKXtyZXR1cm4gaS5fb25DaGFyKCJcbiIpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uQTExeVRhYigoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uVGFiKGUpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uS2V5KChmdW5jdGlvbihlKXtyZXR1cm4gaS5fb25LZXkoZS5rZXkpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uQmx1cigoZnVuY3Rpb24oKXtyZXR1cm4gaS5fY2xlYXJMaXZlUmVnaW9uKCl9KSkpLGkucmVnaXN0ZXIoaS5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfSkpKSxpLl9zY3JlZW5EcHJNb25pdG9yPW5ldyBoLlNjcmVlbkRwck1vbml0b3IsaS5yZWdpc3RlcihpLl9zY3JlZW5EcHJNb25pdG9yKSxpLl9zY3JlZW5EcHJNb25pdG9yLnNldExpc3RlbmVyKChmdW5jdGlvbigpe3JldHVybiBpLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKX0pKSxpLnJlZ2lzdGVyKCgwLGMuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh3aW5kb3csInJlc2l6ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpfSkpKSxpfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSwoMCx1LnJlbW92ZUVsZW1lbnRGcm9tUGFyZW50KSh0aGlzLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpLHRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aD0wfSx0LnByb3RvdHlwZS5fb25Cb3VuZGFyeUZvY3VzPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS50YXJnZXQsaT10aGlzLl9yb3dFbGVtZW50c1swPT09dD8xOnRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0yXTtpZihyLmdldEF0dHJpYnV0ZSgiYXJpYS1wb3NpbnNldCIpIT09KDA9PT10PyIxIjoiIit0aGlzLl90ZXJtaW5hbC5idWZmZXIubGluZXMubGVuZ3RoKSYmZS5yZWxhdGVkVGFyZ2V0PT09aSl7dmFyIG4sbztpZigwPT09dD8obj1yLG89dGhpcy5fcm93RWxlbWVudHMucG9wKCksdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKG8pKToobj10aGlzLl9yb3dFbGVtZW50cy5zaGlmdCgpLG89cix0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQobikpLG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksby5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKSwwPT09dCl7dmFyIHM9dGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCk7dGhpcy5fcm93RWxlbWVudHMudW5zaGlmdChzKSx0aGlzLl9yb3dDb250YWluZXIuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIixzKX1lbHNlIHM9dGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCksdGhpcy5fcm93RWxlbWVudHMucHVzaChzKSx0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQocyk7dGhpcy5fcm93RWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksdGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLHRoaXMuX3Rlcm1pbmFsLnNjcm9sbExpbmVzKDA9PT10Py0xOjEpLHRoaXMuX3Jvd0VsZW1lbnRzWzA9PT10PzE6dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTJdLmZvY3VzKCksZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCl9fSx0LnByb3RvdHlwZS5fb25SZXNpemU9ZnVuY3Rpb24oZSl7dGhpcy5fcm93RWxlbWVudHNbdGhpcy5fcm93RWxlbWVudHMubGVuZ3RoLTFdLnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpO2Zvcih2YXIgdD10aGlzLl9yb3dDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoO3Q8dGhpcy5fdGVybWluYWwucm93czt0KyspdGhpcy5fcm93RWxlbWVudHNbdF09dGhpcy5fY3JlYXRlQWNjZXNzaWJpbGl0eVRyZWVOb2RlKCksdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzW3RdKTtmb3IoO3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aD5lOyl0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fcm93RWxlbWVudHMucG9wKCkpO3RoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKSx0aGlzLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKX0sdC5wcm90b3R5cGUuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZT1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBlLnNldEF0dHJpYnV0ZSgicm9sZSIsImxpc3RpdGVtIiksZS50YWJJbmRleD0tMSx0aGlzLl9yZWZyZXNoUm93RGltZW5zaW9ucyhlKSxlfSx0LnByb3RvdHlwZS5fb25UYWI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlO3QrKyl0aGlzLl9vbkNoYXIoIiAiKX0sdC5wcm90b3R5cGUuX29uQ2hhcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQ8MjEmJih0aGlzLl9jaGFyc1RvQ29uc3VtZS5sZW5ndGg+MD90aGlzLl9jaGFyc1RvQ29uc3VtZS5zaGlmdCgpIT09ZSYmKHRoaXMuX2NoYXJzVG9Bbm5vdW5jZSs9ZSk6dGhpcy5fY2hhcnNUb0Fubm91bmNlKz1lLCJcbiI9PT1lJiYodGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCsrLDIxPT09dGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudCYmKHRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQrPW8udG9vTXVjaE91dHB1dCkpLHMuaXNNYWMmJnRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQmJnRoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQubGVuZ3RoPjAmJiF0aGlzLl9saXZlUmVnaW9uLnBhcmVudE5vZGUmJnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7dC5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKHQuX2xpdmVSZWdpb24pfSksMCkpfSx0LnByb3RvdHlwZS5fY2xlYXJMaXZlUmVnaW9uPWZ1bmN0aW9uKCl7dGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudD0iIix0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50PTAscy5pc01hYyYmKDAsdS5yZW1vdmVFbGVtZW50RnJvbVBhcmVudCkodGhpcy5fbGl2ZVJlZ2lvbil9LHQucHJvdG90eXBlLl9vbktleT1mdW5jdGlvbihlKXt0aGlzLl9jbGVhckxpdmVSZWdpb24oKSx0aGlzLl9jaGFyc1RvQ29uc3VtZS5wdXNoKGUpfSx0LnByb3RvdHlwZS5fcmVmcmVzaFJvd3M9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZW5kZXJSb3dzRGVib3VuY2VyLnJlZnJlc2goZSx0LHRoaXMuX3Rlcm1pbmFsLnJvd3MpfSx0LnByb3RvdHlwZS5fcmVuZGVyUm93cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLl90ZXJtaW5hbC5idWZmZXIsaT1yLmxpbmVzLmxlbmd0aC50b1N0cmluZygpLG49ZTtuPD10O24rKyl7dmFyIG89ci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoci55ZGlzcCtuLCEwKSxzPShyLnlkaXNwK24rMSkudG9TdHJpbmcoKSxhPXRoaXMuX3Jvd0VsZW1lbnRzW25dO2EmJigwPT09by5sZW5ndGg/YS5pbm5lclRleHQ9IsKgIjphLnRleHRDb250ZW50PW8sYS5zZXRBdHRyaWJ1dGUoImFyaWEtcG9zaW5zZXQiLHMpLGEuc2V0QXR0cmlidXRlKCJhcmlhLXNldHNpemUiLGkpKX10aGlzLl9hbm5vdW5jZUNoYXJhY3RlcnMoKX0sdC5wcm90b3R5cGUuX3JlZnJlc2hSb3dzRGltZW5zaW9ucz1mdW5jdGlvbigpe2lmKHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KXt0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGghPT10aGlzLl90ZXJtaW5hbC5yb3dzJiZ0aGlzLl9vblJlc2l6ZSh0aGlzLl90ZXJtaW5hbC5yb3dzKTtmb3IodmFyIGU9MDtlPHRoaXMuX3Rlcm1pbmFsLnJvd3M7ZSsrKXRoaXMuX3JlZnJlc2hSb3dEaW1lbnNpb25zKHRoaXMuX3Jvd0VsZW1lbnRzW2VdKX19LHQucHJvdG90eXBlLl9yZWZyZXNoUm93RGltZW5zaW9ucz1mdW5jdGlvbihlKXtlLnN0eWxlLmhlaWdodD10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgifSx0LnByb3RvdHlwZS5fYW5ub3VuY2VDaGFyYWN0ZXJzPWZ1bmN0aW9uKCl7MCE9PXRoaXMuX2NoYXJzVG9Bbm5vdW5jZS5sZW5ndGgmJih0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50Kz10aGlzLl9jaGFyc1RvQW5ub3VuY2UsdGhpcy5fY2hhcnNUb0Fubm91bmNlPSIiKX0sdH0obC5EaXNwb3NhYmxlKTt0LkFjY2Vzc2liaWxpdHlNYW5hZ2VyPWZ9LDM2MTQ6KGUsdCk9PntmdW5jdGlvbiByKGUpe3JldHVybiBlLnJlcGxhY2UoL1xyP1xuL2csIlxyIil9ZnVuY3Rpb24gaShlLHQpe3JldHVybiB0PyIbWzIwMH4iK2UrIhtbMjAxfiI6ZX1mdW5jdGlvbiBuKGUsdCxuKXtlPWkoZT1yKGUpLG4uZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZSksbi50cmlnZ2VyRGF0YUV2ZW50KGUsITApLHQudmFsdWU9IiJ9ZnVuY3Rpb24gbyhlLHQscil7dmFyIGk9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPWUuY2xpZW50WC1pLmxlZnQtMTAsbz1lLmNsaWVudFktaS50b3AtMTA7dC5zdHlsZS53aWR0aD0iMjBweCIsdC5zdHlsZS5oZWlnaHQ9IjIwcHgiLHQuc3R5bGUubGVmdD1uKyJweCIsdC5zdHlsZS50b3A9bysicHgiLHQuc3R5bGUuekluZGV4PSIxMDAwIix0LmZvY3VzKCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQucmlnaHRDbGlja0hhbmRsZXI9dC5tb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yPXQucGFzdGU9dC5oYW5kbGVQYXN0ZUV2ZW50PXQuY29weUhhbmRsZXI9dC5icmFja2V0VGV4dEZvclBhc3RlPXQucHJlcGFyZVRleHRGb3JUZXJtaW5hbD12b2lkIDAsdC5wcmVwYXJlVGV4dEZvclRlcm1pbmFsPXIsdC5icmFja2V0VGV4dEZvclBhc3RlPWksdC5jb3B5SGFuZGxlcj1mdW5jdGlvbihlLHQpe2UuY2xpcGJvYXJkRGF0YSYmZS5jbGlwYm9hcmREYXRhLnNldERhdGEoInRleHQvcGxhaW4iLHQuc2VsZWN0aW9uVGV4dCksZS5wcmV2ZW50RGVmYXVsdCgpfSx0LmhhbmRsZVBhc3RlRXZlbnQ9ZnVuY3Rpb24oZSx0LHIpe2Uuc3RvcFByb3BhZ2F0aW9uKCksZS5jbGlwYm9hcmREYXRhJiZuKGUuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCJ0ZXh0L3BsYWluIiksdCxyKX0sdC5wYXN0ZT1uLHQubW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvcj1vLHQucmlnaHRDbGlja0hhbmRsZXI9ZnVuY3Rpb24oZSx0LHIsaSxuKXtvKGUsdCxyKSxuJiZpLnJpZ2h0Q2xpY2tTZWxlY3QoZSksdC52YWx1ZT1pLnNlbGVjdGlvblRleHQsdC5zZWxlY3QoKX19LDcyMzk6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db2xvckNvbnRyYXN0Q2FjaGU9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2NvbG9yPXt9LHRoaXMuX3JnYmE9e319cmV0dXJuIGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fY29sb3I9e30sdGhpcy5fcmdiYT17fX0sZS5wcm90b3R5cGUuc2V0Q3NzPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9yZ2JhW2VdfHwodGhpcy5fcmdiYVtlXT17fSksdGhpcy5fcmdiYVtlXVt0XT1yfSxlLnByb3RvdHlwZS5nZXRDc3M9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fcmdiYVtlXT90aGlzLl9yZ2JhW2VdW3RdOnZvaWQgMH0sZS5wcm90b3R5cGUuc2V0Q29sb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2NvbG9yW2VdfHwodGhpcy5fY29sb3JbZV09e30pLHRoaXMuX2NvbG9yW2VdW3RdPXJ9LGUucHJvdG90eXBlLmdldENvbG9yPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvbG9yW2VdP3RoaXMuX2NvbG9yW2VdW3RdOnZvaWQgMH0sZX0oKTt0LkNvbG9yQ29udHJhc3RDYWNoZT1yfSw1NjgwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbG9yTWFuYWdlcj10LkRFRkFVTFRfQU5TSV9DT0xPUlM9dm9pZCAwO3ZhciBuPXIoODA1NSksbz1yKDcyMzkpLHM9bi5jc3MudG9Db2xvcigiI2ZmZmZmZiIpLGE9bi5jc3MudG9Db2xvcigiIzAwMDAwMCIpLGM9bi5jc3MudG9Db2xvcigiI2ZmZmZmZiIpLGw9bi5jc3MudG9Db2xvcigiIzAwMDAwMCIpLGg9e2NzczoicmdiYSgyNTUsIDI1NSwgMjU1LCAwLjMpIixyZ2JhOjQyOTQ5NjcxMTd9O3QuREVGQVVMVF9BTlNJX0NPTE9SUz1PYmplY3QuZnJlZXplKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtuLmNzcy50b0NvbG9yKCIjMmUzNDM2Iiksbi5jc3MudG9Db2xvcigiI2NjMDAwMCIpLG4uY3NzLnRvQ29sb3IoIiM0ZTlhMDYiKSxuLmNzcy50b0NvbG9yKCIjYzRhMDAwIiksbi5jc3MudG9Db2xvcigiIzM0NjVhNCIpLG4uY3NzLnRvQ29sb3IoIiM3NTUwN2IiKSxuLmNzcy50b0NvbG9yKCIjMDY5ODlhIiksbi5jc3MudG9Db2xvcigiI2QzZDdjZiIpLG4uY3NzLnRvQ29sb3IoIiM1NTU3NTMiKSxuLmNzcy50b0NvbG9yKCIjZWYyOTI5Iiksbi5jc3MudG9Db2xvcigiIzhhZTIzNCIpLG4uY3NzLnRvQ29sb3IoIiNmY2U5NGYiKSxuLmNzcy50b0NvbG9yKCIjNzI5ZmNmIiksbi5jc3MudG9Db2xvcigiI2FkN2ZhOCIpLG4uY3NzLnRvQ29sb3IoIiMzNGUyZTIiKSxuLmNzcy50b0NvbG9yKCIjZWVlZWVjIildLHQ9WzAsOTUsMTM1LDE3NSwyMTUsMjU1XSxyPTA7cjwyMTY7cisrKXt2YXIgaT10W3IvMzYlNnwwXSxvPXRbci82JTZ8MF0scz10W3IlNl07ZS5wdXNoKHtjc3M6bi5jaGFubmVscy50b0NzcyhpLG8scykscmdiYTpuLmNoYW5uZWxzLnRvUmdiYShpLG8scyl9KX1mb3Iocj0wO3I8MjQ7cisrKXt2YXIgYT04KzEwKnI7ZS5wdXNoKHtjc3M6bi5jaGFubmVscy50b0NzcyhhLGEsYSkscmdiYTpuLmNoYW5uZWxzLnRvUmdiYShhLGEsYSl9KX1yZXR1cm4gZX0oKSk7dmFyIHU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUscil7dGhpcy5hbGxvd1RyYW5zcGFyZW5jeT1yO3ZhciBpPWUuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7aS53aWR0aD0xLGkuaGVpZ2h0PTE7dmFyIHU9aS5nZXRDb250ZXh0KCIyZCIpO2lmKCF1KXRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGdldCByZW5kZXJpbmcgY29udGV4dCIpO3RoaXMuX2N0eD11LHRoaXMuX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImNvcHkiLHRoaXMuX2xpdG11c0NvbG9yPXRoaXMuX2N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAsMSwxKSx0aGlzLl9jb250cmFzdENhY2hlPW5ldyBvLkNvbG9yQ29udHJhc3RDYWNoZSx0aGlzLmNvbG9ycz17Zm9yZWdyb3VuZDpzLGJhY2tncm91bmQ6YSxjdXJzb3I6YyxjdXJzb3JBY2NlbnQ6bCxzZWxlY3Rpb25UcmFuc3BhcmVudDpoLHNlbGVjdGlvbk9wYXF1ZTpuLmNvbG9yLmJsZW5kKGEsaCksc2VsZWN0aW9uRm9yZWdyb3VuZDp2b2lkIDAsYW5zaTp0LkRFRkFVTFRfQU5TSV9DT0xPUlMuc2xpY2UoKSxjb250cmFzdENhY2hlOnRoaXMuX2NvbnRyYXN0Q2FjaGV9LHRoaXMuX3VwZGF0ZVJlc3RvcmVDb2xvcnMoKX1yZXR1cm4gZS5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlPWZ1bmN0aW9uKGUpeyJtaW5pbXVtQ29udHJhc3RSYXRpbyI9PT1lJiZ0aGlzLl9jb250cmFzdENhY2hlLmNsZWFyKCl9LGUucHJvdG90eXBlLnNldFRoZW1lPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXt9KSx0aGlzLmNvbG9ycy5mb3JlZ3JvdW5kPXRoaXMuX3BhcnNlQ29sb3IoZS5mb3JlZ3JvdW5kLHMpLHRoaXMuY29sb3JzLmJhY2tncm91bmQ9dGhpcy5fcGFyc2VDb2xvcihlLmJhY2tncm91bmQsYSksdGhpcy5jb2xvcnMuY3Vyc29yPXRoaXMuX3BhcnNlQ29sb3IoZS5jdXJzb3IsYywhMCksdGhpcy5jb2xvcnMuY3Vyc29yQWNjZW50PXRoaXMuX3BhcnNlQ29sb3IoZS5jdXJzb3JBY2NlbnQsbCwhMCksdGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQ9dGhpcy5fcGFyc2VDb2xvcihlLnNlbGVjdGlvbixoLCEwKSx0aGlzLmNvbG9ycy5zZWxlY3Rpb25PcGFxdWU9bi5jb2xvci5ibGVuZCh0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kLHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50KTt2YXIgcj17Y3NzOiIiLHJnYmE6MH07dGhpcy5jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZD1lLnNlbGVjdGlvbkZvcmVncm91bmQ/dGhpcy5fcGFyc2VDb2xvcihlLnNlbGVjdGlvbkZvcmVncm91bmQscik6dm9pZCAwLHRoaXMuY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQ9PT1yJiYodGhpcy5jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZD12b2lkIDApLG4uY29sb3IuaXNPcGFxdWUodGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQpJiYodGhpcy5jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQ9bi5jb2xvci5vcGFjaXR5KHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50LC4zKSksdGhpcy5jb2xvcnMuYW5zaVswXT10aGlzLl9wYXJzZUNvbG9yKGUuYmxhY2ssdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzBdKSx0aGlzLmNvbG9ycy5hbnNpWzFdPXRoaXMuX3BhcnNlQ29sb3IoZS5yZWQsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzFdKSx0aGlzLmNvbG9ycy5hbnNpWzJdPXRoaXMuX3BhcnNlQ29sb3IoZS5ncmVlbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMl0pLHRoaXMuY29sb3JzLmFuc2lbM109dGhpcy5fcGFyc2VDb2xvcihlLnllbGxvdyx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbM10pLHRoaXMuY29sb3JzLmFuc2lbNF09dGhpcy5fcGFyc2VDb2xvcihlLmJsdWUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzRdKSx0aGlzLmNvbG9ycy5hbnNpWzVdPXRoaXMuX3BhcnNlQ29sb3IoZS5tYWdlbnRhLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s1XSksdGhpcy5jb2xvcnMuYW5zaVs2XT10aGlzLl9wYXJzZUNvbG9yKGUuY3lhbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNl0pLHRoaXMuY29sb3JzLmFuc2lbN109dGhpcy5fcGFyc2VDb2xvcihlLndoaXRlLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s3XSksdGhpcy5jb2xvcnMuYW5zaVs4XT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0QmxhY2ssdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzhdKSx0aGlzLmNvbG9ycy5hbnNpWzldPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRSZWQsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzldKSx0aGlzLmNvbG9ycy5hbnNpWzEwXT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0R3JlZW4sdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzEwXSksdGhpcy5jb2xvcnMuYW5zaVsxMV09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodFllbGxvdyx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTFdKSx0aGlzLmNvbG9ycy5hbnNpWzEyXT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0Qmx1ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTJdKSx0aGlzLmNvbG9ycy5hbnNpWzEzXT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0TWFnZW50YSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTNdKSx0aGlzLmNvbG9ycy5hbnNpWzE0XT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0Q3lhbix0LkRFRkFVTFRfQU5TSV9DT0xPUlNbMTRdKSx0aGlzLmNvbG9ycy5hbnNpWzE1XT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0V2hpdGUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzE1XSksdGhpcy5fY29udHJhc3RDYWNoZS5jbGVhcigpLHRoaXMuX3VwZGF0ZVJlc3RvcmVDb2xvcnMoKX0sZS5wcm90b3R5cGUucmVzdG9yZUNvbG9yPWZ1bmN0aW9uKGUpe2lmKHZvaWQgMCE9PWUpc3dpdGNoKGUpe2Nhc2UgMjU2OnRoaXMuY29sb3JzLmZvcmVncm91bmQ9dGhpcy5fcmVzdG9yZUNvbG9ycy5mb3JlZ3JvdW5kO2JyZWFrO2Nhc2UgMjU3OnRoaXMuY29sb3JzLmJhY2tncm91bmQ9dGhpcy5fcmVzdG9yZUNvbG9ycy5iYWNrZ3JvdW5kO2JyZWFrO2Nhc2UgMjU4OnRoaXMuY29sb3JzLmN1cnNvcj10aGlzLl9yZXN0b3JlQ29sb3JzLmN1cnNvcjticmVhaztkZWZhdWx0OnRoaXMuY29sb3JzLmFuc2lbZV09dGhpcy5fcmVzdG9yZUNvbG9ycy5hbnNpW2VdfWVsc2UgZm9yKHZhciB0PTA7dDx0aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2kubGVuZ3RoOysrdCl0aGlzLmNvbG9ycy5hbnNpW3RdPXRoaXMuX3Jlc3RvcmVDb2xvcnMuYW5zaVt0XX0sZS5wcm90b3R5cGUuX3VwZGF0ZVJlc3RvcmVDb2xvcnM9ZnVuY3Rpb24oKXt0aGlzLl9yZXN0b3JlQ29sb3JzPXtmb3JlZ3JvdW5kOnRoaXMuY29sb3JzLmZvcmVncm91bmQsYmFja2dyb3VuZDp0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kLGN1cnNvcjp0aGlzLmNvbG9ycy5jdXJzb3IsYW5zaTp0aGlzLmNvbG9ycy5hbnNpLnNsaWNlKCl9fSxlLnByb3RvdHlwZS5fcGFyc2VDb2xvcj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09ciYmKHI9dGhpcy5hbGxvd1RyYW5zcGFyZW5jeSksdm9pZCAwPT09ZSlyZXR1cm4gdDtpZih0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2xpdG11c0NvbG9yLHRoaXMuX2N0eC5maWxsU3R5bGU9ZSwic3RyaW5nIiE9dHlwZW9mIHRoaXMuX2N0eC5maWxsU3R5bGUpcmV0dXJuIGNvbnNvbGUud2FybigiQ29sb3I6ICIrZSsiIGlzIGludmFsaWQgdXNpbmcgZmFsbGJhY2sgIit0LmNzcyksdDt0aGlzLl9jdHguZmlsbFJlY3QoMCwwLDEsMSk7dmFyIG89dGhpcy5fY3R4LmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhO2lmKDI1NSE9PW9bM10pe2lmKCFyKXJldHVybiBjb25zb2xlLndhcm4oIkNvbG9yOiAiK2UrIiBpcyB1c2luZyB0cmFuc3BhcmVuY3ksIGJ1dCBhbGxvd1RyYW5zcGFyZW5jeSBpcyBmYWxzZS4gVXNpbmcgZmFsbGJhY2sgIit0LmNzcysiLiIpLHQ7dmFyIHM9aSh0aGlzLl9jdHguZmlsbFN0eWxlLnN1YnN0cmluZyg1LHRoaXMuX2N0eC5maWxsU3R5bGUubGVuZ3RoLTEpLnNwbGl0KCIsIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gTnVtYmVyKGUpfSkpLDQpLGE9c1swXSxjPXNbMV0sbD1zWzJdLGg9c1szXSx1PU1hdGgucm91bmQoMjU1KmgpO3JldHVybntyZ2JhOm4uY2hhbm5lbHMudG9SZ2JhKGEsYyxsLHUpLGNzczplfX1yZXR1cm57Y3NzOnRoaXMuX2N0eC5maWxsU3R5bGUscmdiYTpuLmNoYW5uZWxzLnRvUmdiYShvWzBdLG9bMV0sb1syXSxvWzNdKX19LGV9KCk7dC5Db2xvck1hbmFnZXI9dX0sOTYzMTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5yZW1vdmVFbGVtZW50RnJvbVBhcmVudD12b2lkIDAsdC5yZW1vdmVFbGVtZW50RnJvbVBhcmVudD1mdW5jdGlvbigpe2Zvcih2YXIgZSx0LGksbj1bXSxvPTA7bzxhcmd1bWVudHMubGVuZ3RoO28rKyluW29dPWFyZ3VtZW50c1tvXTt0cnl7Zm9yKHZhciBzPXIobiksYT1zLm5leHQoKTshYS5kb25lO2E9cy5uZXh0KCkpe3ZhciBjPWEudmFsdWU7bnVsbD09PShpPW51bGw9PWM/dm9pZCAwOmMucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PWl8fGkucmVtb3ZlQ2hpbGQoYyl9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2EmJiFhLmRvbmUmJih0PXMucmV0dXJuKSYmdC5jYWxsKHMpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19fSwzNjU2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyPXZvaWQgMCx0LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcj1mdW5jdGlvbihlLHQscixpKXtlLmFkZEV2ZW50TGlzdGVuZXIodCxyLGkpO3ZhciBuPSExO3JldHVybntkaXNwb3NlOmZ1bmN0aW9uKCl7bnx8KG49ITAsZS5yZW1vdmVFdmVudExpc3RlbmVyKHQscixpKSl9fX19LDM1NTE6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Nb3VzZVpvbmU9dC5MaW5raWZpZXI9dm9pZCAwO3ZhciBvPXIoODQ2MCkscz1yKDI1ODUpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5fbG9nU2VydmljZT10LHRoaXMuX3VuaWNvZGVTZXJ2aWNlPXIsdGhpcy5fbGlua01hdGNoZXJzPVtdLHRoaXMuX25leHRMaW5rTWF0Y2hlcklkPTAsdGhpcy5fb25TaG93TGlua1VuZGVybGluZT1uZXcgby5FdmVudEVtaXR0ZXIsdGhpcy5fb25IaWRlTGlua1VuZGVybGluZT1uZXcgby5FdmVudEVtaXR0ZXIsdGhpcy5fb25MaW5rVG9vbHRpcD1uZXcgby5FdmVudEVtaXR0ZXIsdGhpcy5fcm93c1RvTGlua2lmeT17c3RhcnQ6dm9pZCAwLGVuZDp2b2lkIDB9fXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uU2hvd0xpbmtVbmRlcmxpbmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TaG93TGlua1VuZGVybGluZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uSGlkZUxpbmtVbmRlcmxpbmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25IaWRlTGlua1VuZGVybGluZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uTGlua1Rvb2x0aXAiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25MaW5rVG9vbHRpcC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5hdHRhY2hUb0RvbT1mdW5jdGlvbihlLHQpe3RoaXMuX2VsZW1lbnQ9ZSx0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyPXR9LGUucHJvdG90eXBlLmxpbmtpZnlSb3dzPWZ1bmN0aW9uKHQscil7dmFyIGk9dGhpczt0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyJiYodm9pZCAwPT09dGhpcy5fcm93c1RvTGlua2lmeS5zdGFydHx8dm9pZCAwPT09dGhpcy5fcm93c1RvTGlua2lmeS5lbmQ/KHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQ9dCx0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZD1yKToodGhpcy5fcm93c1RvTGlua2lmeS5zdGFydD1NYXRoLm1pbih0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0LHQpLHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kPU1hdGgubWF4KHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLHIpKSx0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyLmNsZWFyQWxsKHQsciksdGhpcy5fcm93c1RpbWVvdXRJZCYmY2xlYXJUaW1lb3V0KHRoaXMuX3Jvd3NUaW1lb3V0SWQpLHRoaXMuX3Jvd3NUaW1lb3V0SWQ9c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gaS5fbGlua2lmeVJvd3MoKX0pLGUuX3RpbWVCZWZvcmVMYXRlbmN5KSl9LGUucHJvdG90eXBlLl9saW5raWZ5Um93cz1mdW5jdGlvbigpe3RoaXMuX3Jvd3NUaW1lb3V0SWQ9dm9pZCAwO3ZhciBlPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO2lmKHZvaWQgMCE9PXRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQmJnZvaWQgMCE9PXRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kKXt2YXIgdD1lLnlkaXNwK3RoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQ7aWYoISh0Pj1lLmxpbmVzLmxlbmd0aCkpe2Zvcih2YXIgcj1lLnlkaXNwK01hdGgubWluKHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykrMSxpPU1hdGguY2VpbCgyZTMvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSxuPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLml0ZXJhdG9yKCExLHQscixpLGkpO24uaGFzTmV4dCgpOylmb3IodmFyIG89bi5uZXh0KCkscz0wO3M8dGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aDtzKyspdGhpcy5fZG9MaW5raWZ5Um93KG8ucmFuZ2UuZmlyc3Qsby5jb250ZW50LHRoaXMuX2xpbmtNYXRjaGVyc1tzXSk7dGhpcy5fcm93c1RvTGlua2lmeS5zdGFydD12b2lkIDAsdGhpcy5fcm93c1RvTGlua2lmeS5lbmQ9dm9pZCAwfX1lbHNlIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIl9yb3dUb0xpbmtpZnkgd2FzIHVuc2V0IGJlZm9yZSBfbGlua2lmeVJvd3Mgd2FzIGNhbGxlZCIpfSxlLnByb3RvdHlwZS5yZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUsdCxyKXtpZih2b2lkIDA9PT1yJiYocj17fSksIXQpdGhyb3cgbmV3IEVycm9yKCJoYW5kbGVyIG11c3QgYmUgZGVmaW5lZCIpO3ZhciBpPXtpZDp0aGlzLl9uZXh0TGlua01hdGNoZXJJZCsrLHJlZ2V4OmUsaGFuZGxlcjp0LG1hdGNoSW5kZXg6ci5tYXRjaEluZGV4LHZhbGlkYXRpb25DYWxsYmFjazpyLnZhbGlkYXRpb25DYWxsYmFjayxob3ZlclRvb2x0aXBDYWxsYmFjazpyLnRvb2x0aXBDYWxsYmFjayxob3ZlckxlYXZlQ2FsbGJhY2s6ci5sZWF2ZUNhbGxiYWNrLHdpbGxMaW5rQWN0aXZhdGU6ci53aWxsTGlua0FjdGl2YXRlLHByaW9yaXR5OnIucHJpb3JpdHl8fDB9O3JldHVybiB0aGlzLl9hZGRMaW5rTWF0Y2hlclRvTGlzdChpKSxpLmlkfSxlLnByb3RvdHlwZS5fYWRkTGlua01hdGNoZXJUb0xpc3Q9ZnVuY3Rpb24oZSl7aWYoMCE9PXRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGgpe2Zvcih2YXIgdD10aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoLTE7dD49MDt0LS0paWYoZS5wcmlvcml0eTw9dGhpcy5fbGlua01hdGNoZXJzW3RdLnByaW9yaXR5KXJldHVybiB2b2lkIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UodCsxLDAsZSk7dGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSgwLDAsZSl9ZWxzZSB0aGlzLl9saW5rTWF0Y2hlcnMucHVzaChlKX0sZS5wcm90b3R5cGUuZGVyZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aDt0KyspaWYodGhpcy5fbGlua01hdGNoZXJzW3RdLmlkPT09ZSlyZXR1cm4gdGhpcy5fbGlua01hdGNoZXJzLnNwbGljZSh0LDEpLCEwO3JldHVybiExfSxlLnByb3RvdHlwZS5fZG9MaW5raWZ5Um93PWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGksbj10aGlzLG89bmV3IFJlZ0V4cChyLnJlZ2V4LnNvdXJjZSwoci5yZWdleC5mbGFnc3x8IiIpKyJnIikscz0tMSxhPWZ1bmN0aW9uKCl7dmFyIGE9aVsibnVtYmVyIiE9dHlwZW9mIHIubWF0Y2hJbmRleD8wOnIubWF0Y2hJbmRleF07aWYoIWEpcmV0dXJuIGMuX2xvZ1NlcnZpY2UuZGVidWcoIm1hdGNoIGZvdW5kIHdpdGhvdXQgY29ycmVzcG9uZGluZyBtYXRjaEluZGV4IixpLHIpLCJicmVhayI7aWYocz10LmluZGV4T2YoYSxzKzEpLG8ubGFzdEluZGV4PXMrYS5sZW5ndGgsczwwKXJldHVybiJicmVhayI7dmFyIGw9Yy5fYnVmZmVyU2VydmljZS5idWZmZXIuc3RyaW5nSW5kZXhUb0J1ZmZlckluZGV4KGUscyk7aWYobFswXTwwKXJldHVybiJicmVhayI7dmFyIGg9Yy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KGxbMF0pO2lmKCFoKXJldHVybiJicmVhayI7dmFyIHU9aC5nZXRGZyhsWzFdKSxmPXU/dT4+OSY1MTE6dm9pZCAwO3IudmFsaWRhdGlvbkNhbGxiYWNrP3IudmFsaWRhdGlvbkNhbGxiYWNrKGEsKGZ1bmN0aW9uKGUpe24uX3Jvd3NUaW1lb3V0SWR8fGUmJm4uX2FkZExpbmsobFsxXSxsWzBdLW4uX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLGEscixmKX0pKTpjLl9hZGRMaW5rKGxbMV0sbFswXS1jLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxhLHIsZil9LGM9dGhpcztudWxsIT09KGk9by5leGVjKHQpKSYmImJyZWFrIiE9PWEoKTspO30sZS5wcm90b3R5cGUuX2FkZExpbms9ZnVuY3Rpb24oZSx0LHIsaSxuKXt2YXIgbz10aGlzO2lmKHRoaXMuX21vdXNlWm9uZU1hbmFnZXImJnRoaXMuX2VsZW1lbnQpe3ZhciBzPXRoaXMuX3VuaWNvZGVTZXJ2aWNlLmdldFN0cmluZ0NlbGxXaWR0aChyKSxhPWUldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGw9dCtNYXRoLmZsb29yKGUvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSxoPShhK3MpJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx1PWwrTWF0aC5mbG9vcigoYStzKS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpOzA9PT1oJiYoaD10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdS0tKSx0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyLmFkZChuZXcgYyhhKzEsbCsxLGgrMSx1KzEsKGZ1bmN0aW9uKGUpe2lmKGkuaGFuZGxlcilyZXR1cm4gaS5oYW5kbGVyKGUscik7dmFyIHQ9d2luZG93Lm9wZW4oKTt0Pyh0Lm9wZW5lcj1udWxsLHQubG9jYXRpb24uaHJlZj1yKTpjb25zb2xlLndhcm4oIk9wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCIpfSksKGZ1bmN0aW9uKCl7by5fb25TaG93TGlua1VuZGVybGluZS5maXJlKG8uX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KGEsbCxoLHUsbikpLG8uX2VsZW1lbnQuY2xhc3NMaXN0LmFkZCgieHRlcm0tY3Vyc29yLXBvaW50ZXIiKX0pLChmdW5jdGlvbihlKXtvLl9vbkxpbmtUb29sdGlwLmZpcmUoby5fY3JlYXRlTGlua0hvdmVyRXZlbnQoYSxsLGgsdSxuKSksaS5ob3ZlclRvb2x0aXBDYWxsYmFjayYmaS5ob3ZlclRvb2x0aXBDYWxsYmFjayhlLHIse3N0YXJ0Ont4OmEseTpsfSxlbmQ6e3g6aCx5OnV9fSl9KSwoZnVuY3Rpb24oKXtvLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmZpcmUoby5fY3JlYXRlTGlua0hvdmVyRXZlbnQoYSxsLGgsdSxuKSksby5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIpLGkuaG92ZXJMZWF2ZUNhbGxiYWNrJiZpLmhvdmVyTGVhdmVDYWxsYmFjaygpfSksKGZ1bmN0aW9uKGUpe3JldHVybiFpLndpbGxMaW5rQWN0aXZhdGV8fGkud2lsbExpbmtBY3RpdmF0ZShlLHIpfSkpKX19LGUucHJvdG90eXBlLl9jcmVhdGVMaW5rSG92ZXJFdmVudD1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybnt4MTplLHkxOnQseDI6cix5MjppLGNvbHM6dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGZnOm59fSxlLl90aW1lQmVmb3JlTGF0ZW5jeT0yMDAsZT1pKFtuKDAscy5JQnVmZmVyU2VydmljZSksbigxLHMuSUxvZ1NlcnZpY2UpLG4oMixzLklVbmljb2RlU2VydmljZSldLGUpfSgpO3QuTGlua2lmaWVyPWE7dmFyIGM9ZnVuY3Rpb24oZSx0LHIsaSxuLG8scyxhLGMpe3RoaXMueDE9ZSx0aGlzLnkxPXQsdGhpcy54Mj1yLHRoaXMueTI9aSx0aGlzLmNsaWNrQ2FsbGJhY2s9bix0aGlzLmhvdmVyQ2FsbGJhY2s9byx0aGlzLnRvb2x0aXBDYWxsYmFjaz1zLHRoaXMubGVhdmVDYWxsYmFjaz1hLHRoaXMud2lsbExpbmtBY3RpdmF0ZT1jfTt0Lk1vdXNlWm9uZT1jfSw2NDY1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9LGM9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MaW5raWZpZXIyPXZvaWQgMDt2YXIgbD1yKDI1ODUpLGg9cig4NDYwKSx1PXIoODQ0KSxmPXIoMzY1NiksXz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fYnVmZmVyU2VydmljZT10LHIuX2xpbmtQcm92aWRlcnM9W10sci5fbGlua0NhY2hlRGlzcG9zYWJsZXM9W10sci5faXNNb3VzZU91dD0hMCxyLl9hY3RpdmVMaW5lPS0xLHIuX29uU2hvd0xpbmtVbmRlcmxpbmU9ci5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLHIuX29uSGlkZUxpbmtVbmRlcmxpbmU9ci5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLHIucmVnaXN0ZXIoKDAsdS5nZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlKShyLl9saW5rQ2FjaGVEaXNwb3NhYmxlcykpLHJ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImN1cnJlbnRMaW5rIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnRMaW5rfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TaG93TGlua1VuZGVybGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25IaWRlTGlua1VuZGVybGluZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkhpZGVMaW5rVW5kZXJsaW5lLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX2xpbmtQcm92aWRlcnMucHVzaChlKSx7ZGlzcG9zZTpmdW5jdGlvbigpe3ZhciByPXQuX2xpbmtQcm92aWRlcnMuaW5kZXhPZihlKTstMSE9PXImJnQuX2xpbmtQcm92aWRlcnMuc3BsaWNlKHIsMSl9fX0sdC5wcm90b3R5cGUuYXR0YWNoVG9Eb209ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXM7dGhpcy5fZWxlbWVudD1lLHRoaXMuX21vdXNlU2VydmljZT10LHRoaXMuX3JlbmRlclNlcnZpY2U9cix0aGlzLnJlZ2lzdGVyKCgwLGYuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl9lbGVtZW50LCJtb3VzZWxlYXZlIiwoZnVuY3Rpb24oKXtpLl9pc01vdXNlT3V0PSEwLGkuX2NsZWFyQ3VycmVudExpbmsoKX0pKSksdGhpcy5yZWdpc3RlcigoMCxmLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCwibW91c2Vtb3ZlIix0aGlzLl9vbk1vdXNlTW92ZS5iaW5kKHRoaXMpKSksdGhpcy5yZWdpc3RlcigoMCxmLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCwibW91c2Vkb3duIix0aGlzLl9oYW5kbGVNb3VzZURvd24uYmluZCh0aGlzKSkpLHRoaXMucmVnaXN0ZXIoKDAsZi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX2VsZW1lbnQsIm1vdXNldXAiLHRoaXMuX2hhbmRsZU1vdXNlVXAuYmluZCh0aGlzKSkpfSx0LnByb3RvdHlwZS5fb25Nb3VzZU1vdmU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fbGFzdE1vdXNlRXZlbnQ9ZSx0aGlzLl9lbGVtZW50JiZ0aGlzLl9tb3VzZVNlcnZpY2Upe3ZhciB0PXRoaXMuX3Bvc2l0aW9uRnJvbU1vdXNlRXZlbnQoZSx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7aWYodCl7dGhpcy5faXNNb3VzZU91dD0hMTtmb3IodmFyIHI9ZS5jb21wb3NlZFBhdGgoKSxpPTA7aTxyLmxlbmd0aDtpKyspe3ZhciBuPXJbaV07aWYobi5jbGFzc0xpc3QuY29udGFpbnMoInh0ZXJtIikpYnJlYWs7aWYobi5jbGFzc0xpc3QuY29udGFpbnMoInh0ZXJtLWhvdmVyIikpcmV0dXJufXRoaXMuX2xhc3RCdWZmZXJDZWxsJiZ0Lng9PT10aGlzLl9sYXN0QnVmZmVyQ2VsbC54JiZ0Lnk9PT10aGlzLl9sYXN0QnVmZmVyQ2VsbC55fHwodGhpcy5fb25Ib3Zlcih0KSx0aGlzLl9sYXN0QnVmZmVyQ2VsbD10KX19fSx0LnByb3RvdHlwZS5fb25Ib3Zlcj1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVMaW5lIT09ZS55KXJldHVybiB0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCksdm9pZCB0aGlzLl9hc2tGb3JMaW5rKGUsITEpO3RoaXMuX2N1cnJlbnRMaW5rJiZ0aGlzLl9saW5rQXRQb3NpdGlvbih0aGlzLl9jdXJyZW50TGluay5saW5rLGUpfHwodGhpcy5fY2xlYXJDdXJyZW50TGluaygpLHRoaXMuX2Fza0ZvckxpbmsoZSwhMCkpfSx0LnByb3RvdHlwZS5fYXNrRm9yTGluaz1mdW5jdGlvbihlLHQpe3ZhciByLGksbixvLHM9dGhpczt0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMmJnR8fChudWxsPT09KG49dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXx8dm9pZCAwPT09bnx8bi5mb3JFYWNoKChmdW5jdGlvbihlKXtudWxsPT1lfHxlLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubGluay5kaXNwb3NlJiZlLmxpbmsuZGlzcG9zZSgpfSkpfSkpLHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcz1uZXcgTWFwLHRoaXMuX2FjdGl2ZUxpbmU9ZS55KTt2YXIgbD0hMSxoPWZ1bmN0aW9uKHIsaSl7dD8obnVsbD09PShvPXUuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZ2V0KHIpKSYmKGw9dS5fY2hlY2tMaW5rUHJvdmlkZXJSZXN1bHQocixlLGwpKTppLnByb3ZpZGVMaW5rcyhlLnksKGZ1bmN0aW9uKHQpe3ZhciBpLG47aWYoIXMuX2lzTW91c2VPdXQpe3ZhciBvPW51bGw9PXQ/dm9pZCAwOnQubWFwKChmdW5jdGlvbihlKXtyZXR1cm57bGluazplfX0pKTtudWxsPT09KGk9cy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXx8dm9pZCAwPT09aXx8aS5zZXQocixvKSxsPXMuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KHIsZSxsKSwobnVsbD09PShuPXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyl8fHZvaWQgMD09PW4/dm9pZCAwOm4uc2l6ZSk9PT1zLl9saW5rUHJvdmlkZXJzLmxlbmd0aCYmcy5fcmVtb3ZlSW50ZXJzZWN0aW5nTGlua3MoZS55LHMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyl9fSkpfSx1PXRoaXM7dHJ5e2Zvcih2YXIgZj1hKHRoaXMuX2xpbmtQcm92aWRlcnMuZW50cmllcygpKSxfPWYubmV4dCgpOyFfLmRvbmU7Xz1mLm5leHQoKSl7dmFyIGQ9YyhfLnZhbHVlLDIpO2goZFswXSxkWzFdKX19Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7XyYmIV8uZG9uZSYmKGk9Zi5yZXR1cm4pJiZpLmNhbGwoZil9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fX0sdC5wcm90b3R5cGUuX3JlbW92ZUludGVyc2VjdGluZ0xpbmtzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPW5ldyBTZXQsaT0wO2k8dC5zaXplO2krKyl7dmFyIG49dC5nZXQoaSk7aWYobilmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKylmb3IodmFyIHM9bltvXSxhPXMubGluay5yYW5nZS5zdGFydC55PGU/MDpzLmxpbmsucmFuZ2Uuc3RhcnQueCxjPXMubGluay5yYW5nZS5lbmQueT5lP3RoaXMuX2J1ZmZlclNlcnZpY2UuY29sczpzLmxpbmsucmFuZ2UuZW5kLngsbD1hO2w8PWM7bCsrKXtpZihyLmhhcyhsKSl7bi5zcGxpY2Uoby0tLDEpO2JyZWFrfXIuYWRkKGwpfX19LHQucHJvdG90eXBlLl9jaGVja0xpbmtQcm92aWRlclJlc3VsdD1mdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzO2lmKCF0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpcmV0dXJuIHI7Zm9yKHZhciBvPXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5nZXQoZSkscz0hMSxhPTA7YTxlO2ErKyl0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuaGFzKGEpJiYhdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmdldChhKXx8KHM9ITApO2lmKCFzJiZvKXt2YXIgYz1vLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9saW5rQXRQb3NpdGlvbihlLmxpbmssdCl9KSk7YyYmKHI9ITAsdGhpcy5faGFuZGxlTmV3TGluayhjKSl9aWYodGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLnNpemU9PT10aGlzLl9saW5rUHJvdmlkZXJzLmxlbmd0aCYmIXIpZm9yKGE9MDthPHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5zaXplO2ErKyl7dmFyIGw9bnVsbD09PShpPXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5nZXQoYSkpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBuLl9saW5rQXRQb3NpdGlvbihlLmxpbmssdCl9KSk7aWYobCl7cj0hMCx0aGlzLl9oYW5kbGVOZXdMaW5rKGwpO2JyZWFrfX1yZXR1cm4gcn0sdC5wcm90b3R5cGUuX2hhbmRsZU1vdXNlRG93bj1mdW5jdGlvbigpe3RoaXMuX21vdXNlRG93bkxpbms9dGhpcy5fY3VycmVudExpbmt9LHQucHJvdG90eXBlLl9oYW5kbGVNb3VzZVVwPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2VsZW1lbnQmJnRoaXMuX21vdXNlU2VydmljZSYmdGhpcy5fY3VycmVudExpbmspe3ZhciB0PXRoaXMuX3Bvc2l0aW9uRnJvbU1vdXNlRXZlbnQoZSx0aGlzLl9lbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSk7dCYmdGhpcy5fbW91c2VEb3duTGluaz09PXRoaXMuX2N1cnJlbnRMaW5rJiZ0aGlzLl9saW5rQXRQb3NpdGlvbih0aGlzLl9jdXJyZW50TGluay5saW5rLHQpJiZ0aGlzLl9jdXJyZW50TGluay5saW5rLmFjdGl2YXRlKGUsdGhpcy5fY3VycmVudExpbmsubGluay50ZXh0KX19LHQucHJvdG90eXBlLl9jbGVhckN1cnJlbnRMaW5rPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZWxlbWVudCYmdGhpcy5fY3VycmVudExpbmsmJnRoaXMuX2xhc3RNb3VzZUV2ZW50JiYoIWV8fCF0fHx0aGlzLl9jdXJyZW50TGluay5saW5rLnJhbmdlLnN0YXJ0Lnk+PWUmJnRoaXMuX2N1cnJlbnRMaW5rLmxpbmsucmFuZ2UuZW5kLnk8PXQpJiYodGhpcy5fbGlua0xlYXZlKHRoaXMuX2VsZW1lbnQsdGhpcy5fY3VycmVudExpbmsubGluayx0aGlzLl9sYXN0TW91c2VFdmVudCksdGhpcy5fY3VycmVudExpbms9dm9pZCAwLCgwLHUuZGlzcG9zZUFycmF5KSh0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcykpfSx0LnByb3RvdHlwZS5faGFuZGxlTmV3TGluaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX2VsZW1lbnQmJnRoaXMuX2xhc3RNb3VzZUV2ZW50JiZ0aGlzLl9tb3VzZVNlcnZpY2Upe3ZhciByPXRoaXMuX3Bvc2l0aW9uRnJvbU1vdXNlRXZlbnQodGhpcy5fbGFzdE1vdXNlRXZlbnQsdGhpcy5fZWxlbWVudCx0aGlzLl9tb3VzZVNlcnZpY2UpO3ImJnRoaXMuX2xpbmtBdFBvc2l0aW9uKGUubGluayxyKSYmKHRoaXMuX2N1cnJlbnRMaW5rPWUsdGhpcy5fY3VycmVudExpbmsuc3RhdGU9e2RlY29yYXRpb25zOnt1bmRlcmxpbmU6dm9pZCAwPT09ZS5saW5rLmRlY29yYXRpb25zfHxlLmxpbmsuZGVjb3JhdGlvbnMudW5kZXJsaW5lLHBvaW50ZXJDdXJzb3I6dm9pZCAwPT09ZS5saW5rLmRlY29yYXRpb25zfHxlLmxpbmsuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvcn0saXNIb3ZlcmVkOiEwfSx0aGlzLl9saW5rSG92ZXIodGhpcy5fZWxlbWVudCxlLmxpbmssdGhpcy5fbGFzdE1vdXNlRXZlbnQpLGUubGluay5kZWNvcmF0aW9ucz17fSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLmxpbmsuZGVjb3JhdGlvbnMse3BvaW50ZXJDdXJzb3I6e2dldDpmdW5jdGlvbigpe3ZhciBlLHI7cmV0dXJuIG51bGw9PT0ocj1udWxsPT09KGU9dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnN0YXRlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHIsaTsobnVsbD09PShyPXQuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zdGF0ZSkmJnQuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3IhPT1lJiYodC5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvcj1lLHQuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZCYmKG51bGw9PT0oaT10Ll9lbGVtZW50KXx8dm9pZCAwPT09aXx8aS5jbGFzc0xpc3QudG9nZ2xlKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIsZSkpKX19LHVuZGVybGluZTp7Z2V0OmZ1bmN0aW9uKCl7dmFyIGUscjtyZXR1cm4gbnVsbD09PShyPW51bGw9PT0oZT10Ll9jdXJyZW50TGluayl8fHZvaWQgMD09PWU/dm9pZCAwOmUuc3RhdGUpfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmRlY29yYXRpb25zLnVuZGVybGluZX0sc2V0OmZ1bmN0aW9uKHIpe3ZhciBpLG4sbzsobnVsbD09PShpPXQuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zdGF0ZSkmJihudWxsPT09KG89bnVsbD09PShuPXQuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09bj92b2lkIDA6bi5zdGF0ZSl8fHZvaWQgMD09PW8/dm9pZCAwOm8uZGVjb3JhdGlvbnMudW5kZXJsaW5lKSE9PXImJih0Ll9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy51bmRlcmxpbmU9cix0Ll9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQmJnQuX2ZpcmVVbmRlcmxpbmVFdmVudChlLmxpbmsscikpfX19KSx0aGlzLl9yZW5kZXJTZXJ2aWNlJiZ0aGlzLl9saW5rQ2FjaGVEaXNwb3NhYmxlcy5wdXNoKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKChmdW5jdGlvbihlKXt2YXIgcj0wPT09ZS5zdGFydD8wOmUuc3RhcnQrMSt0Ll9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDt0Ll9jbGVhckN1cnJlbnRMaW5rKHIsZS5lbmQrMSt0Ll9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCl9KSkpKX19LHQucHJvdG90eXBlLl9saW5rSG92ZXI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpOyhudWxsPT09KGk9dGhpcy5fY3VycmVudExpbmspfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0YXRlKSYmKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZD0hMCx0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy51bmRlcmxpbmUmJnRoaXMuX2ZpcmVVbmRlcmxpbmVFdmVudCh0LCEwKSx0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yJiZlLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWN1cnNvci1wb2ludGVyIikpLHQuaG92ZXImJnQuaG92ZXIocix0LnRleHQpfSx0LnByb3RvdHlwZS5fZmlyZVVuZGVybGluZUV2ZW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5yYW5nZSxpPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG49dGhpcy5fY3JlYXRlTGlua1VuZGVybGluZUV2ZW50KHIuc3RhcnQueC0xLHIuc3RhcnQueS1pLTEsci5lbmQueCxyLmVuZC55LWktMSx2b2lkIDApOyh0P3RoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmU6dGhpcy5fb25IaWRlTGlua1VuZGVybGluZSkuZmlyZShuKX0sdC5wcm90b3R5cGUuX2xpbmtMZWF2ZT1mdW5jdGlvbihlLHQscil7dmFyIGk7KG51bGw9PT0oaT10aGlzLl9jdXJyZW50TGluayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3RhdGUpJiYodGhpcy5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkPSExLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnVuZGVybGluZSYmdGhpcy5fZmlyZVVuZGVybGluZUV2ZW50KHQsITEpLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3ImJmUuY2xhc3NMaXN0LnJlbW92ZSgieHRlcm0tY3Vyc29yLXBvaW50ZXIiKSksdC5sZWF2ZSYmdC5sZWF2ZShyLHQudGV4dCl9LHQucHJvdG90eXBlLl9saW5rQXRQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPWUucmFuZ2Uuc3RhcnQueT09PWUucmFuZ2UuZW5kLnksaT1lLnJhbmdlLnN0YXJ0Lnk8dC55LG49ZS5yYW5nZS5lbmQueT50Lnk7cmV0dXJuKHImJmUucmFuZ2Uuc3RhcnQueDw9dC54JiZlLnJhbmdlLmVuZC54Pj10Lnh8fGkmJmUucmFuZ2UuZW5kLng+PXQueHx8biYmZS5yYW5nZS5zdGFydC54PD10Lnh8fGkmJm4pJiZlLnJhbmdlLnN0YXJ0Lnk8PXQueSYmZS5yYW5nZS5lbmQueT49dC55fSx0LnByb3RvdHlwZS5fcG9zaXRpb25Gcm9tTW91c2VFdmVudD1mdW5jdGlvbihlLHQscil7dmFyIGk9ci5nZXRDb29yZHMoZSx0LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO2lmKGkpcmV0dXJue3g6aVswXSx5OmlbMV0rdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3B9fSx0LnByb3RvdHlwZS5fY3JlYXRlTGlua1VuZGVybGluZUV2ZW50PWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJue3gxOmUseTE6dCx4MjpyLHkyOmksY29sczp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZmc6bn19LG8oW3MoMCxsLklCdWZmZXJTZXJ2aWNlKV0sdCl9KHUuRGlzcG9zYWJsZSk7dC5MaW5raWZpZXIyPV99LDkwNDI6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC50b29NdWNoT3V0cHV0PXQucHJvbXB0TGFiZWw9dm9pZCAwLHQucHJvbXB0TGFiZWw9IlRlcm1pbmFsIGlucHV0Iix0LnRvb011Y2hPdXRwdXQ9IlRvbyBtdWNoIG91dHB1dCB0byBhbm5vdW5jZSwgbmF2aWdhdGUgdG8gcm93cyBtYW51YWxseSB0byByZWFkIn0sNjk1NDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Nb3VzZVpvbmVNYW5hZ2VyPXZvaWQgMDt2YXIgYT1yKDg0NCksYz1yKDM2NTYpLGw9cig0NzI1KSxoPXIoMjU4NSksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzKXt2YXIgYT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGEuX2VsZW1lbnQ9dCxhLl9zY3JlZW5FbGVtZW50PXIsYS5fYnVmZmVyU2VydmljZT1pLGEuX21vdXNlU2VydmljZT1uLGEuX3NlbGVjdGlvblNlcnZpY2U9byxhLl9vcHRpb25zU2VydmljZT1zLGEuX3pvbmVzPVtdLGEuX2FyZVpvbmVzQWN0aXZlPSExLGEuX2xhc3RIb3ZlckNvb3Jkcz1bdm9pZCAwLHZvaWQgMF0sYS5faW5pdGlhbFNlbGVjdGlvbkxlbmd0aD0wLGEucmVnaXN0ZXIoKDAsYy5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKGEuX2VsZW1lbnQsIm1vdXNlZG93biIsKGZ1bmN0aW9uKGUpe3JldHVybiBhLl9vbk1vdXNlRG93bihlKX0pKSksYS5fbW91c2VNb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuX29uTW91c2VNb3ZlKGUpfSxhLl9tb3VzZUxlYXZlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuX29uTW91c2VMZWF2ZShlKX0sYS5fY2xpY2tMaXN0ZW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gYS5fb25DbGljayhlKX0sYX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5fZGVhY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7dGhpcy5fem9uZXMucHVzaChlKSwxPT09dGhpcy5fem9uZXMubGVuZ3RoJiZ0aGlzLl9hY3RpdmF0ZSgpfSx0LnByb3RvdHlwZS5jbGVhckFsbD1mdW5jdGlvbihlLHQpe2lmKDAhPT10aGlzLl96b25lcy5sZW5ndGgpe2UmJnR8fChlPTAsdD10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSk7Zm9yKHZhciByPTA7cjx0aGlzLl96b25lcy5sZW5ndGg7cisrKXt2YXIgaT10aGlzLl96b25lc1tyXTsoaS55MT5lJiZpLnkxPD10KzF8fGkueTI+ZSYmaS55Mjw9dCsxfHxpLnkxPGUmJmkueTI+dCsxKSYmKHRoaXMuX2N1cnJlbnRab25lJiZ0aGlzLl9jdXJyZW50Wm9uZT09PWkmJih0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCksdGhpcy5fY3VycmVudFpvbmU9dm9pZCAwKSx0aGlzLl96b25lcy5zcGxpY2Uoci0tLDEpKX0wPT09dGhpcy5fem9uZXMubGVuZ3RoJiZ0aGlzLl9kZWFjdGl2YXRlKCl9fSx0LnByb3RvdHlwZS5fYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9hcmVab25lc0FjdGl2ZXx8KHRoaXMuX2FyZVpvbmVzQWN0aXZlPSEwLHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciksdGhpcy5fZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIix0aGlzLl9tb3VzZUxlYXZlTGlzdGVuZXIpLHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuX2NsaWNrTGlzdGVuZXIpKX0sdC5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24oKXt0aGlzLl9hcmVab25lc0FjdGl2ZSYmKHRoaXMuX2FyZVpvbmVzQWN0aXZlPSExLHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciksdGhpcy5fZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZWxlYXZlIix0aGlzLl9tb3VzZUxlYXZlTGlzdGVuZXIpLHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigiY2xpY2siLHRoaXMuX2NsaWNrTGlzdGVuZXIpKX0sdC5wcm90b3R5cGUuX29uTW91c2VNb3ZlPWZ1bmN0aW9uKGUpe3RoaXMuX2xhc3RIb3ZlckNvb3Jkc1swXT09PWUucGFnZVgmJnRoaXMuX2xhc3RIb3ZlckNvb3Jkc1sxXT09PWUucGFnZVl8fCh0aGlzLl9vbkhvdmVyKGUpLHRoaXMuX2xhc3RIb3ZlckNvb3Jkcz1bZS5wYWdlWCxlLnBhZ2VZXSl9LHQucHJvdG90eXBlLl9vbkhvdmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj10aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7ciE9PXRoaXMuX2N1cnJlbnRab25lJiYodGhpcy5fY3VycmVudFpvbmUmJih0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCksdGhpcy5fY3VycmVudFpvbmU9dm9pZCAwLHRoaXMuX3Rvb2x0aXBUaW1lb3V0JiZjbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpKSxyJiYodGhpcy5fY3VycmVudFpvbmU9cixyLmhvdmVyQ2FsbGJhY2smJnIuaG92ZXJDYWxsYmFjayhlKSx0aGlzLl90b29sdGlwVGltZW91dD13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25Ub29sdGlwKGUpfSksdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5saW5rVG9vbHRpcEhvdmVyRHVyYXRpb24pKSl9LHQucHJvdG90eXBlLl9vblRvb2x0aXA9ZnVuY3Rpb24oZSl7dGhpcy5fdG9vbHRpcFRpbWVvdXQ9dm9pZCAwO3ZhciB0PXRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTtudWxsPT10fHx0LnRvb2x0aXBDYWxsYmFjayhlKX0sdC5wcm90b3R5cGUuX29uTW91c2VEb3duPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2luaXRpYWxTZWxlY3Rpb25MZW5ndGg9dGhpcy5fZ2V0U2VsZWN0aW9uTGVuZ3RoKCksdGhpcy5fYXJlWm9uZXNBY3RpdmUpe3ZhciB0PXRoaXMuX2ZpbmRab25lRXZlbnRBdChlKTsobnVsbD09dD92b2lkIDA6dC53aWxsTGlua0FjdGl2YXRlKGUpKSYmKGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX19LHQucHJvdG90eXBlLl9vbk1vdXNlTGVhdmU9ZnVuY3Rpb24oZSl7dGhpcy5fY3VycmVudFpvbmUmJih0aGlzLl9jdXJyZW50Wm9uZS5sZWF2ZUNhbGxiYWNrKCksdGhpcy5fY3VycmVudFpvbmU9dm9pZCAwLHRoaXMuX3Rvb2x0aXBUaW1lb3V0JiZjbGVhclRpbWVvdXQodGhpcy5fdG9vbHRpcFRpbWVvdXQpKX0sdC5wcm90b3R5cGUuX29uQ2xpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZmluZFpvbmVFdmVudEF0KGUpLHI9dGhpcy5fZ2V0U2VsZWN0aW9uTGVuZ3RoKCk7dCYmcj09PXRoaXMuX2luaXRpYWxTZWxlY3Rpb25MZW5ndGgmJih0LmNsaWNrQ2FsbGJhY2soZSksZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCkpfSx0LnByb3RvdHlwZS5fZ2V0U2VsZWN0aW9uTGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0O3JldHVybiBlP2UubGVuZ3RoOjB9LHQucHJvdG90eXBlLl9maW5kWm9uZUV2ZW50QXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhlLHRoaXMuX3NjcmVlbkVsZW1lbnQsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyk7aWYodClmb3IodmFyIHI9dFswXSxpPXRbMV0sbj0wO248dGhpcy5fem9uZXMubGVuZ3RoO24rKyl7dmFyIG89dGhpcy5fem9uZXNbbl07aWYoby55MT09PW8ueTIpe2lmKGk9PT1vLnkxJiZyPj1vLngxJiZyPG8ueDIpcmV0dXJuIG99ZWxzZSBpZihpPT09by55MSYmcj49by54MXx8aT09PW8ueTImJnI8by54Mnx8aT5vLnkxJiZpPG8ueTIpcmV0dXJuIG99fSxvKFtzKDIsaC5JQnVmZmVyU2VydmljZSkscygzLGwuSU1vdXNlU2VydmljZSkscyg0LGwuSVNlbGVjdGlvblNlcnZpY2UpLHMoNSxoLklPcHRpb25zU2VydmljZSldLHQpfShhLkRpc3Bvc2FibGUpO3QuTW91c2Vab25lTWFuYWdlcj11fSw2MTkzOmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlJlbmRlckRlYm91bmNlcj12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX3JlbmRlckNhbGxiYWNrPWUsdGhpcy5fcmVmcmVzaENhbGxiYWNrcz1bXX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2FuaW1hdGlvbkZyYW1lJiYod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSx0aGlzLl9hbmltYXRpb25GcmFtZT12b2lkIDApfSxlLnByb3RvdHlwZS5hZGRSZWZyZXNoQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gdGhpcy5fcmVmcmVzaENhbGxiYWNrcy5wdXNoKGUpLHRoaXMuX2FuaW1hdGlvbkZyYW1lfHwodGhpcy5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5faW5uZXJSZWZyZXNoKCl9KSkpLHRoaXMuX2FuaW1hdGlvbkZyYW1lfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO3RoaXMuX3Jvd0NvdW50PXIsZT12b2lkIDAhPT1lP2U6MCx0PXZvaWQgMCE9PXQ/dDp0aGlzLl9yb3dDb3VudC0xLHRoaXMuX3Jvd1N0YXJ0PXZvaWQgMCE9PXRoaXMuX3Jvd1N0YXJ0P01hdGgubWluKHRoaXMuX3Jvd1N0YXJ0LGUpOmUsdGhpcy5fcm93RW5kPXZvaWQgMCE9PXRoaXMuX3Jvd0VuZD9NYXRoLm1heCh0aGlzLl9yb3dFbmQsdCk6dCx0aGlzLl9hbmltYXRpb25GcmFtZXx8KHRoaXMuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX2lubmVyUmVmcmVzaCgpfSkpKX0sZS5wcm90b3R5cGUuX2lubmVyUmVmcmVzaD1mdW5jdGlvbigpe2lmKHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMCx2b2lkIDAhPT10aGlzLl9yb3dTdGFydCYmdm9pZCAwIT09dGhpcy5fcm93RW5kJiZ2b2lkIDAhPT10aGlzLl9yb3dDb3VudCl7dmFyIGU9TWF0aC5tYXgodGhpcy5fcm93U3RhcnQsMCksdD1NYXRoLm1pbih0aGlzLl9yb3dFbmQsdGhpcy5fcm93Q291bnQtMSk7dGhpcy5fcm93U3RhcnQ9dm9pZCAwLHRoaXMuX3Jvd0VuZD12b2lkIDAsdGhpcy5fcmVuZGVyQ2FsbGJhY2soZSx0KSx0aGlzLl9ydW5SZWZyZXNoQ2FsbGJhY2tzKCl9ZWxzZSB0aGlzLl9ydW5SZWZyZXNoQ2FsbGJhY2tzKCl9LGUucHJvdG90eXBlLl9ydW5SZWZyZXNoQ2FsbGJhY2tzPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciBpPXIodGhpcy5fcmVmcmVzaENhbGxiYWNrcyksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpKDAsbi52YWx1ZSkoMCl9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9aS5yZXR1cm4pJiZ0LmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX3JlZnJlc2hDYWxsYmFja3M9W119LGV9KCk7dC5SZW5kZXJEZWJvdW5jZXI9aX0sNTU5NjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TY3JlZW5EcHJNb25pdG9yPXZvaWQgMDt2YXIgbz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0Ll9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0fXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuc2V0TGlzdGVuZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9saXN0ZW5lciYmdGhpcy5jbGVhckxpc3RlbmVyKCksdGhpcy5fbGlzdGVuZXI9ZSx0aGlzLl9vdXRlckxpc3RlbmVyPWZ1bmN0aW9uKCl7dC5fbGlzdGVuZXImJih0Ll9saXN0ZW5lcih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0Ll9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbyksdC5fdXBkYXRlRHByKCkpfSx0aGlzLl91cGRhdGVEcHIoKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLmNsZWFyTGlzdGVuZXIoKX0sdC5wcm90b3R5cGUuX3VwZGF0ZURwcj1mdW5jdGlvbigpe3ZhciBlO3RoaXMuX291dGVyTGlzdGVuZXImJihudWxsPT09KGU9dGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0KXx8dm9pZCAwPT09ZXx8ZS5yZW1vdmVMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKSx0aGlzLl9jdXJyZW50RGV2aWNlUGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3Q9d2luZG93Lm1hdGNoTWVkaWEoInNjcmVlbiBhbmQgKHJlc29sdXRpb246ICIrd2luZG93LmRldmljZVBpeGVsUmF0aW8rImRwcHgpIiksdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LmFkZExpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpKX0sdC5wcm90b3R5cGUuY2xlYXJMaXN0ZW5lcj1mdW5jdGlvbigpe3RoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCYmdGhpcy5fbGlzdGVuZXImJnRoaXMuX291dGVyTGlzdGVuZXImJih0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QucmVtb3ZlTGlzdGVuZXIodGhpcy5fb3V0ZXJMaXN0ZW5lciksdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0PXZvaWQgMCx0aGlzLl9saXN0ZW5lcj12b2lkIDAsdGhpcy5fb3V0ZXJMaXN0ZW5lcj12b2lkIDApfSx0fShyKDg0NCkuRGlzcG9zYWJsZSk7dC5TY3JlZW5EcHJNb25pdG9yPW99LDMyMzY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX0scz10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LGE9dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQscil7aWYocnx8Mj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpLG49MCxvPXQubGVuZ3RoO248bztuKyspIWkmJm4gaW4gdHx8KGl8fChpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCxuKSksaVtuXT10W25dKTtyZXR1cm4gZS5jb25jYXQoaXx8QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5UZXJtaW5hbD12b2lkIDA7dmFyIGM9cigyOTUwKSxsPXIoMTY4MCksaD1yKDM2MTQpLHU9cigyNTg0KSxmPXIoNTQzNSksXz1yKDM1MjUpLGQ9cigzNTUxKSxwPXIoOTMxMiksdj1yKDYxMTQpLHk9cigzNjU2KSxnPXIoOTA0MiksbT1yKDM1NyksYj1yKDY5NTQpLFM9cig0NTY3KSxDPXIoMTI5Niksdz1yKDczOTkpLEw9cig4NDYwKSxFPXIoODQzNykseD1yKDU2ODApLFI9cigzMjMwKSxrPXIoNDcyNSksTT1yKDQyOCksQT1yKDg5MzQpLE89cig2NDY1KSxEPXIoNTExNCksVD1yKDg5NjkpLEI9cig4MDU1KSxQPXIoNDI2OSksST1yKDU5NDEpLEg9cigzMTA3KSxqPXIoNTc0NCksRj1yKDkwNzQpLFc9cigyNTg1KSxVPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdy5kb2N1bWVudDpudWxsLHE9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD17fSk7dmFyIHI9ZS5jYWxsKHRoaXMsdCl8fHRoaXM7cmV0dXJuIHIuYnJvd3Nlcj12LHIuX2tleURvd25IYW5kbGVkPSExLHIuX2tleURvd25TZWVuPSExLHIuX2tleVByZXNzSGFuZGxlZD0hMSxyLl91bnByb2Nlc3NlZERlYWRLZXk9ITEsci5fb25DdXJzb3JNb3ZlPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbktleT1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25SZW5kZXI9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uU2VsZWN0aW9uQ2hhbmdlPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vblRpdGxlQ2hhbmdlPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbkJlbGw9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uRm9jdXM9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uQmx1cj1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25BMTF5Q2hhckVtaXR0ZXI9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uQTExeVRhYkVtaXR0ZXI9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX3NldHVwKCksci5saW5raWZpZXI9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoZC5MaW5raWZpZXIpLHIubGlua2lmaWVyMj1yLnJlZ2lzdGVyKHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKE8uTGlua2lmaWVyMikpLHIuX2RlY29yYXRpb25TZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEYuRGVjb3JhdGlvblNlcnZpY2UpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoVy5JRGVjb3JhdGlvblNlcnZpY2Usci5fZGVjb3JhdGlvblNlcnZpY2UpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdEJlbGwoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuYmVsbCgpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RSZWZyZXNoUm93cygoZnVuY3Rpb24oZSx0KXtyZXR1cm4gci5yZWZyZXNoKGUsdCl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFNlbmRGb2N1cygoZnVuY3Rpb24oKXtyZXR1cm4gci5fcmVwb3J0Rm9jdXMoKX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0UmVzZXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHIucmVzZXQoKX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQoKGZ1bmN0aW9uKGUpe3JldHVybiByLl9yZXBvcnRXaW5kb3dzT3B0aW9ucyhlKX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25Db2xvcigoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2hhbmRsZUNvbG9yRXZlbnQoZSl9KSkpLHIucmVnaXN0ZXIoKDAsTC5mb3J3YXJkRXZlbnQpKHIuX2lucHV0SGFuZGxlci5vbkN1cnNvck1vdmUsci5fb25DdXJzb3JNb3ZlKSksci5yZWdpc3RlcigoMCxMLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uVGl0bGVDaGFuZ2Usci5fb25UaXRsZUNoYW5nZSkpLHIucmVnaXN0ZXIoKDAsTC5mb3J3YXJkRXZlbnQpKHIuX2lucHV0SGFuZGxlci5vbkExMXlDaGFyLHIuX29uQTExeUNoYXJFbWl0dGVyKSksci5yZWdpc3RlcigoMCxMLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uQTExeVRhYixyLl9vbkExMXlUYWJFbWl0dGVyKSksci5yZWdpc3RlcihyLl9idWZmZXJTZXJ2aWNlLm9uUmVzaXplKChmdW5jdGlvbihlKXtyZXR1cm4gci5fYWZ0ZXJSZXNpemUoZS5jb2xzLGUucm93cyl9KSkpLHJ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQ3Vyc29yTW92ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbktleSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbktleS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVuZGVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TZWxlY3Rpb25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblRpdGxlQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uVGl0bGVDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkJlbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CZWxsLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25Gb2N1cyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkZvY3VzLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CbHVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQmx1ci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQTExeUNoYXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BMTF5Q2hhckVtaXR0ZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkExMXlUYWIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BMTF5VGFiRW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5faGFuZGxlQ29sb3JFdmVudD1mdW5jdGlvbihlKXt2YXIgdCxyLGksbjtpZih0aGlzLl9jb2xvck1hbmFnZXIpe3RyeXtmb3IodmFyIGM9byhlKSxsPWMubmV4dCgpOyFsLmRvbmU7bD1jLm5leHQoKSl7dmFyIGg9bC52YWx1ZSxmPXZvaWQgMCxfPSIiO3N3aXRjaChoLmluZGV4KXtjYXNlIDI1NjpmPSJmb3JlZ3JvdW5kIixfPSIxMCI7YnJlYWs7Y2FzZSAyNTc6Zj0iYmFja2dyb3VuZCIsXz0iMTEiO2JyZWFrO2Nhc2UgMjU4OmY9ImN1cnNvciIsXz0iMTIiO2JyZWFrO2RlZmF1bHQ6Zj0iYW5zaSIsXz0iNDsiK2guaW5kZXh9aWYoZilzd2l0Y2goaC50eXBlKXtjYXNlIDA6dmFyIGQ9Qi5jb2xvci50b0NvbG9yUkdCKCJhbnNpIj09PWY/dGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycy5hbnNpW2guaW5kZXhdOnRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnNbZl0pO3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiXSIrXysiOyIrKDAsSS50b1JnYlN0cmluZykoZCkrdS5DMV9FU0NBUEVELlNUKTticmVhaztjYXNlIDE6ImFuc2kiPT09Zj90aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzLmFuc2lbaC5pbmRleF09Qi5yZ2JhLnRvQ29sb3IuYXBwbHkoQi5yZ2JhLGEoW10scyhoLmNvbG9yKSwhMSkpOnRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnNbZl09Qi5yZ2JhLnRvQ29sb3IuYXBwbHkoQi5yZ2JhLGEoW10scyhoLmNvbG9yKSwhMSkpO2JyZWFrO2Nhc2UgMjp0aGlzLl9jb2xvck1hbmFnZXIucmVzdG9yZUNvbG9yKGguaW5kZXgpfX19Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7bCYmIWwuZG9uZSYmKHI9Yy5yZXR1cm4pJiZyLmNhbGwoYyl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fW51bGw9PT0oaT10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09aXx8aS5zZXRDb2xvcnModGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyksbnVsbD09PShuPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1ufHxuLm9uVGhlbWVDaGFuZ2UodGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyl9fSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQscixpO3RoaXMuX2lzRGlzcG9zZWR8fChlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksbnVsbD09PSh0PXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT10fHx0LmRpc3Bvc2UoKSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9dm9pZCAwLHRoaXMud3JpdGU9ZnVuY3Rpb24oKXt9LG51bGw9PT0oaT1udWxsPT09KHI9dGhpcy5lbGVtZW50KXx8dm9pZCAwPT09cj92b2lkIDA6ci5wYXJlbnROb2RlKXx8dm9pZCAwPT09aXx8aS5yZW1vdmVDaGlsZCh0aGlzLmVsZW1lbnQpKX0sdC5wcm90b3R5cGUuX3NldHVwPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuX3NldHVwLmNhbGwodGhpcyksdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPXZvaWQgMH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJidWZmZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJzLmFjdGl2ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5mb2N1cz1mdW5jdGlvbigpe3RoaXMudGV4dGFyZWEmJnRoaXMudGV4dGFyZWEuZm9jdXMoe3ByZXZlbnRTY3JvbGw6ITB9KX0sdC5wcm90b3R5cGUuX3VwZGF0ZU9wdGlvbnM9ZnVuY3Rpb24odCl7dmFyIHIsaSxuLG87c3dpdGNoKGUucHJvdG90eXBlLl91cGRhdGVPcHRpb25zLmNhbGwodGhpcyx0KSx0KXtjYXNlImZvbnRGYW1pbHkiOmNhc2UiZm9udFNpemUiOm51bGw9PT0ocj10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09cnx8ci5jbGVhcigpLG51bGw9PT0oaT10aGlzLl9jaGFyU2l6ZVNlcnZpY2UpfHx2b2lkIDA9PT1pfHxpLm1lYXN1cmUoKTticmVhaztjYXNlImN1cnNvckJsaW5rIjpjYXNlImN1cnNvclN0eWxlIjp0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSx0aGlzLmJ1ZmZlci55KTticmVhaztjYXNlImN1c3RvbUdseXBocyI6Y2FzZSJkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyI6Y2FzZSJsZXR0ZXJTcGFjaW5nIjpjYXNlImxpbmVIZWlnaHQiOmNhc2UiZm9udFdlaWdodCI6Y2FzZSJmb250V2VpZ2h0Qm9sZCI6Y2FzZSJtaW5pbXVtQ29udHJhc3RSYXRpbyI6dGhpcy5fcmVuZGVyU2VydmljZSYmKHRoaXMuX3JlbmRlclNlcnZpY2UuY2xlYXIoKSx0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVzaXplKHRoaXMuY29scyx0aGlzLnJvd3MpLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSk7YnJlYWs7Y2FzZSJyZW5kZXJlclR5cGUiOnRoaXMuX3JlbmRlclNlcnZpY2UmJih0aGlzLl9yZW5kZXJTZXJ2aWNlLnNldFJlbmRlcmVyKHRoaXMuX2NyZWF0ZVJlbmRlcmVyKCkpLHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZXNpemUodGhpcy5jb2xzLHRoaXMucm93cykpO2JyZWFrO2Nhc2Uic2Nyb2xsYmFjayI6bnVsbD09PShuPXRoaXMudmlld3BvcnQpfHx2b2lkIDA9PT1ufHxuLnN5bmNTY3JvbGxBcmVhKCk7YnJlYWs7Y2FzZSJzY3JlZW5SZWFkZXJNb2RlIjp0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZT8hdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXImJnRoaXMuX3JlbmRlclNlcnZpY2UmJih0aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcj1uZXcgUy5BY2Nlc3NpYmlsaXR5TWFuYWdlcih0aGlzLHRoaXMuX3JlbmRlclNlcnZpY2UpKToobnVsbD09PShvPXRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyKXx8dm9pZCAwPT09b3x8by5kaXNwb3NlKCksdGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXI9dm9pZCAwKTticmVhaztjYXNlInRhYlN0b3BXaWR0aCI6dGhpcy5idWZmZXJzLnNldHVwVGFiU3RvcHMoKTticmVhaztjYXNlInRoZW1lIjp0aGlzLl9zZXRUaGVtZSh0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMudGhlbWUpfX0sdC5wcm90b3R5cGUuX29uVGV4dEFyZWFGb2N1cz1mdW5jdGlvbihlKXt0aGlzLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMmJnRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiW0kiKSx0aGlzLnVwZGF0ZUN1cnNvclN0eWxlKGUpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJmb2N1cyIpLHRoaXMuX3Nob3dDdXJzb3IoKSx0aGlzLl9vbkZvY3VzLmZpcmUoKX0sdC5wcm90b3R5cGUuYmx1cj1mdW5jdGlvbigpe3ZhciBlO3JldHVybiBudWxsPT09KGU9dGhpcy50ZXh0YXJlYSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuYmx1cigpfSx0LnByb3RvdHlwZS5fb25UZXh0QXJlYUJsdXI9ZnVuY3Rpb24oKXt0aGlzLnRleHRhcmVhLnZhbHVlPSIiLHRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LHRoaXMuYnVmZmVyLnkpLHRoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cyYmdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbTyIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJmb2N1cyIpLHRoaXMuX29uQmx1ci5maXJlKCl9LHQucHJvdG90eXBlLl9zeW5jVGV4dEFyZWE9ZnVuY3Rpb24oKXtpZih0aGlzLnRleHRhcmVhJiZ0aGlzLmJ1ZmZlci5pc0N1cnNvckluVmlld3BvcnQmJiF0aGlzLl9jb21wb3NpdGlvbkhlbHBlci5pc0NvbXBvc2luZyYmdGhpcy5fcmVuZGVyU2VydmljZSl7dmFyIGU9dGhpcy5idWZmZXIueWJhc2UrdGhpcy5idWZmZXIueSx0PXRoaXMuYnVmZmVyLmxpbmVzLmdldChlKTtpZih0KXt2YXIgcj1NYXRoLm1pbih0aGlzLmJ1ZmZlci54LHRoaXMuY29scy0xKSxpPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0LG49dC5nZXRXaWR0aChyKSxvPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgqbixzPXRoaXMuYnVmZmVyLnkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsYT1yKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGg7dGhpcy50ZXh0YXJlYS5zdHlsZS5sZWZ0PWErInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLnRvcD1zKyJweCIsdGhpcy50ZXh0YXJlYS5zdHlsZS53aWR0aD1vKyJweCIsdGhpcy50ZXh0YXJlYS5zdHlsZS5oZWlnaHQ9aSsicHgiLHRoaXMudGV4dGFyZWEuc3R5bGUubGluZUhlaWdodD1pKyJweCIsdGhpcy50ZXh0YXJlYS5zdHlsZS56SW5kZXg9Ii01In19fSx0LnByb3RvdHlwZS5faW5pdEdsb2JhbD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fYmluZEtleXMoKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsImNvcHkiLChmdW5jdGlvbih0KXtlLmhhc1NlbGVjdGlvbigpJiYoMCxoLmNvcHlIYW5kbGVyKSh0LGUuX3NlbGVjdGlvblNlcnZpY2UpfSkpKTt2YXIgdD1mdW5jdGlvbih0KXtyZXR1cm4oMCxoLmhhbmRsZVBhc3RlRXZlbnQpKHQsZS50ZXh0YXJlYSxlLmNvcmVTZXJ2aWNlKX07dGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwicGFzdGUiLHQpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsInBhc3RlIix0KSksdi5pc0ZpcmVmb3g/dGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LCJtb3VzZWRvd24iLChmdW5jdGlvbih0KXsyPT09dC5idXR0b24mJigwLGgucmlnaHRDbGlja0hhbmRsZXIpKHQsZS50ZXh0YXJlYSxlLnNjcmVlbkVsZW1lbnQsZS5fc2VsZWN0aW9uU2VydmljZSxlLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKX0pKSk6dGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LCJjb250ZXh0bWVudSIsKGZ1bmN0aW9uKHQpeygwLGgucmlnaHRDbGlja0hhbmRsZXIpKHQsZS50ZXh0YXJlYSxlLnNjcmVlbkVsZW1lbnQsZS5fc2VsZWN0aW9uU2VydmljZSxlLm9wdGlvbnMucmlnaHRDbGlja1NlbGVjdHNXb3JkKX0pKSksdi5pc0xpbnV4JiZ0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLmVsZW1lbnQsImF1eGNsaWNrIiwoZnVuY3Rpb24odCl7MT09PXQuYnV0dG9uJiYoMCxoLm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3IpKHQsZS50ZXh0YXJlYSxlLnNjcmVlbkVsZW1lbnQpfSkpKX0sdC5wcm90b3R5cGUuX2JpbmRLZXlzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJrZXl1cCIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9rZXlVcCh0KX0pLCEwKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwia2V5ZG93biIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9rZXlEb3duKHQpfSksITApKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJrZXlwcmVzcyIsKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9rZXlQcmVzcyh0KX0pLCEwKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiY29tcG9zaXRpb25zdGFydCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9uc3RhcnQoKX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiY29tcG9zaXRpb251cGRhdGUiLChmdW5jdGlvbih0KXtyZXR1cm4gZS5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb251cGRhdGUodCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImNvbXBvc2l0aW9uZW5kIiwoZnVuY3Rpb24oKXtyZXR1cm4gZS5fY29tcG9zaXRpb25IZWxwZXIuY29tcG9zaXRpb25lbmQoKX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiaW5wdXQiLChmdW5jdGlvbih0KXtyZXR1cm4gZS5faW5wdXRFdmVudCh0KX0pLCEwKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVuZGVyKChmdW5jdGlvbigpe3JldHVybiBlLl9jb21wb3NpdGlvbkhlbHBlci51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vblJlbmRlcigoZnVuY3Rpb24odCl7cmV0dXJuIGUuX3F1ZXVlTGlua2lmaWNhdGlvbih0LnN0YXJ0LHQuZW5kKX0pKSl9LHQucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZighZSl0aHJvdyBuZXcgRXJyb3IoIlRlcm1pbmFsIHJlcXVpcmVzIGEgcGFyZW50IGVsZW1lbnQuIik7ZS5pc0Nvbm5lY3RlZHx8dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiVGVybWluYWwub3BlbiB3YXMgY2FsbGVkIG9uIGFuIGVsZW1lbnQgdGhhdCB3YXMgbm90IGF0dGFjaGVkIHRvIHRoZSBET00iKSx0aGlzLl9kb2N1bWVudD1lLm93bmVyRG9jdW1lbnQsdGhpcy5lbGVtZW50PXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuZWxlbWVudC5kaXI9Imx0ciIsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInRlcm1pbmFsIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtIiksdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSgidGFiaW5kZXgiLCIwIiksZS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpO3ZhciByPVUuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3RoaXMuX3ZpZXdwb3J0RWxlbWVudD1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybS12aWV3cG9ydCIpLHIuYXBwZW5kQ2hpbGQodGhpcy5fdmlld3BvcnRFbGVtZW50KSx0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWE9VS5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEuY2xhc3NMaXN0LmFkZCgieHRlcm0tc2Nyb2xsLWFyZWEiKSx0aGlzLl92aWV3cG9ydEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhKSx0aGlzLnNjcmVlbkVsZW1lbnQ9VS5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLnNjcmVlbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCgieHRlcm0tc2NyZWVuIiksdGhpcy5faGVscGVyQ29udGFpbmVyPVUuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5faGVscGVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWhlbHBlcnMiKSx0aGlzLnNjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5faGVscGVyQ29udGFpbmVyKSxyLmFwcGVuZENoaWxkKHRoaXMuc2NyZWVuRWxlbWVudCksdGhpcy50ZXh0YXJlYT1VLmNyZWF0ZUVsZW1lbnQoInRleHRhcmVhIiksdGhpcy50ZXh0YXJlYS5jbGFzc0xpc3QuYWRkKCJ4dGVybS1oZWxwZXItdGV4dGFyZWEiKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgiYXJpYS1sYWJlbCIsZy5wcm9tcHRMYWJlbCksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoImFyaWEtbXVsdGlsaW5lIiwiZmFsc2UiKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgiYXV0b2NvcnJlY3QiLCJvZmYiKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgiYXV0b2NhcGl0YWxpemUiLCJvZmYiKSx0aGlzLnRleHRhcmVhLnNldEF0dHJpYnV0ZSgic3BlbGxjaGVjayIsImZhbHNlIiksdGhpcy50ZXh0YXJlYS50YWJJbmRleD0wLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImZvY3VzIiwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX29uVGV4dEFyZWFGb2N1cyhlKX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwiYmx1ciIsKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uVGV4dEFyZWFCbHVyKCl9KSkpLHRoaXMuX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnRleHRhcmVhKTt2YXIgaT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShELkNvcmVCcm93c2VyU2VydmljZSx0aGlzLnRleHRhcmVhKTt0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSUNvcmVCcm93c2VyU2VydmljZSxpKSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoTS5DaGFyU2l6ZVNlcnZpY2UsdGhpcy5fZG9jdW1lbnQsdGhpcy5faGVscGVyQ29udGFpbmVyKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSUNoYXJTaXplU2VydmljZSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UpLHRoaXMuX3RoZW1lPXRoaXMub3B0aW9ucy50aGVtZXx8dGhpcy5fdGhlbWUsdGhpcy5fY29sb3JNYW5hZ2VyPW5ldyB4LkNvbG9yTWFuYWdlcihVLHRoaXMub3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeSksdGhpcy5yZWdpc3Rlcih0aGlzLm9wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fY29sb3JNYW5hZ2VyLm9uT3B0aW9uc0NoYW5nZShlKX0pKSksdGhpcy5fY29sb3JNYW5hZ2VyLnNldFRoZW1lKHRoaXMuX3RoZW1lKSx0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFAuQ2hhcmFjdGVySm9pbmVyU2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLHRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpO3ZhciBuPXRoaXMuX2NyZWF0ZVJlbmRlcmVyKCk7dGhpcy5fcmVuZGVyU2VydmljZT10aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKFIuUmVuZGVyU2VydmljZSxuLHRoaXMucm93cyx0aGlzLnNjcmVlbkVsZW1lbnQpKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSVJlbmRlclNlcnZpY2UsdGhpcy5fcmVuZGVyU2VydmljZSksdGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX29uUmVuZGVyLmZpcmUoZSl9KSkpLHRoaXMub25SZXNpemUoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLnJlc2l6ZShlLmNvbHMsZS5yb3dzKX0pKSx0aGlzLl9jb21wb3NpdGlvblZpZXc9VS5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LmFkZCgiY29tcG9zaXRpb24tdmlldyIpLHRoaXMuX2NvbXBvc2l0aW9uSGVscGVyPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGMuQ29tcG9zaXRpb25IZWxwZXIsdGhpcy50ZXh0YXJlYSx0aGlzLl9jb21wb3NpdGlvblZpZXcpLHRoaXMuX2hlbHBlckNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jb21wb3NpdGlvblZpZXcpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChyKSx0aGlzLl9zb3VuZFNlcnZpY2U9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UobS5Tb3VuZFNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JU291bmRTZXJ2aWNlLHRoaXMuX3NvdW5kU2VydmljZSksdGhpcy5fbW91c2VTZXJ2aWNlPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEEuTW91c2VTZXJ2aWNlKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSU1vdXNlU2VydmljZSx0aGlzLl9tb3VzZVNlcnZpY2UpLHRoaXMudmlld3BvcnQ9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UobC5WaWV3cG9ydCwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuc2Nyb2xsTGluZXMoZSwhMCwxKX0pLHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLl92aWV3cG9ydFNjcm9sbEFyZWEsdGhpcy5lbGVtZW50KSx0aGlzLnZpZXdwb3J0Lm9uVGhlbWVDaGFuZ2UodGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyksdGhpcy5yZWdpc3Rlcih0aGlzLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0U3luY1Njcm9sbEJhcigoZnVuY3Rpb24oKXtyZXR1cm4gdC52aWV3cG9ydC5zeW5jU2Nyb2xsQXJlYSgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMudmlld3BvcnQpLHRoaXMucmVnaXN0ZXIodGhpcy5vbkN1cnNvck1vdmUoKGZ1bmN0aW9uKCl7dC5fcmVuZGVyU2VydmljZS5vbkN1cnNvck1vdmUoKSx0Ll9zeW5jVGV4dEFyZWEoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9uUmVzaXplKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLm9uUmVzaXplKHQuY29scyx0LnJvd3MpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25CbHVyKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZW5kZXJTZXJ2aWNlLm9uQmx1cigpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25Gb2N1cygoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVuZGVyU2VydmljZS5vbkZvY3VzKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIHQudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKX0pKSksdGhpcy5fc2VsZWN0aW9uU2VydmljZT10aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHAuU2VsZWN0aW9uU2VydmljZSx0aGlzLmVsZW1lbnQsdGhpcy5zY3JlZW5FbGVtZW50LHRoaXMubGlua2lmaWVyMikpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JU2VsZWN0aW9uU2VydmljZSx0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25SZXF1ZXN0U2Nyb2xsTGluZXMoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnNjcm9sbExpbmVzKGUuYW1vdW50LGUuc3VwcHJlc3NTY3JvbGxFdmVudCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fc2VsZWN0aW9uU2VydmljZS5vblNlbGVjdGlvbkNoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25SZXF1ZXN0UmVkcmF3KChmdW5jdGlvbihlKXtyZXR1cm4gdC5fcmVuZGVyU2VydmljZS5vblNlbGVjdGlvbkNoYW5nZWQoZS5zdGFydCxlLmVuZCxlLmNvbHVtblNlbGVjdE1vZGUpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25MaW51eE1vdXNlU2VsZWN0aW9uKChmdW5jdGlvbihlKXt0LnRleHRhcmVhLnZhbHVlPWUsdC50ZXh0YXJlYS5mb2N1cygpLHQudGV4dGFyZWEuc2VsZWN0KCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fb25TY3JvbGwuZXZlbnQoKGZ1bmN0aW9uKGUpe3Qudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKSx0Ll9zZWxlY3Rpb25TZXJ2aWNlLnJlZnJlc2goKX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fdmlld3BvcnRFbGVtZW50LCJzY3JvbGwiLChmdW5jdGlvbigpe3JldHVybiB0Ll9zZWxlY3Rpb25TZXJ2aWNlLnJlZnJlc2goKX0pKSksdGhpcy5fbW91c2Vab25lTWFuYWdlcj10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShiLk1vdXNlWm9uZU1hbmFnZXIsdGhpcy5lbGVtZW50LHRoaXMuc2NyZWVuRWxlbWVudCksdGhpcy5yZWdpc3Rlcih0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25TY3JvbGwoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX21vdXNlWm9uZU1hbmFnZXIuY2xlYXJBbGwoKX0pKSksdGhpcy5saW5raWZpZXIuYXR0YWNoVG9Eb20odGhpcy5lbGVtZW50LHRoaXMuX21vdXNlWm9uZU1hbmFnZXIpLHRoaXMubGlua2lmaWVyMi5hdHRhY2hUb0RvbSh0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5fbW91c2VTZXJ2aWNlLHRoaXMuX3JlbmRlclNlcnZpY2UpLHRoaXMucmVnaXN0ZXIodGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoSC5CdWZmZXJEZWNvcmF0aW9uUmVuZGVyZXIsdGhpcy5zY3JlZW5FbGVtZW50KSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LCJtb3VzZWRvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gdC5fc2VsZWN0aW9uU2VydmljZS5vbk1vdXNlRG93bihlKX0pKSksdGhpcy5jb3JlTW91c2VTZXJ2aWNlLmFyZU1vdXNlRXZlbnRzQWN0aXZlPyh0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmRpc2FibGUoKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiZW5hYmxlLW1vdXNlLWV2ZW50cyIpKTp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmVuYWJsZSgpLHRoaXMub3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlJiYodGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXI9bmV3IFMuQWNjZXNzaWJpbGl0eU1hbmFnZXIodGhpcyx0aGlzLl9yZW5kZXJTZXJ2aWNlKSksdGhpcy5vcHRpb25zLm92ZXJ2aWV3UnVsZXJXaWR0aCYmKHRoaXMuX292ZXJ2aWV3UnVsZXJSZW5kZXJlcj10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShqLk92ZXJ2aWV3UnVsZXJSZW5kZXJlcix0aGlzLl92aWV3cG9ydEVsZW1lbnQsdGhpcy5zY3JlZW5FbGVtZW50KSksdGhpcy5vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZSgoZnVuY3Rpb24oKXshdC5fb3ZlcnZpZXdSdWxlclJlbmRlcmVyJiZ0Lm9wdGlvbnMub3ZlcnZpZXdSdWxlcldpZHRoJiZ0Ll92aWV3cG9ydEVsZW1lbnQmJnQuc2NyZWVuRWxlbWVudCYmKHQuX292ZXJ2aWV3UnVsZXJSZW5kZXJlcj10Ll9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShqLk92ZXJ2aWV3UnVsZXJSZW5kZXJlcix0Ll92aWV3cG9ydEVsZW1lbnQsdC5zY3JlZW5FbGVtZW50KSl9KSksdGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksdGhpcy5faW5pdEdsb2JhbCgpLHRoaXMuYmluZE1vdXNlKCl9LHQucHJvdG90eXBlLl9jcmVhdGVSZW5kZXJlcj1mdW5jdGlvbigpe3N3aXRjaCh0aGlzLm9wdGlvbnMucmVuZGVyZXJUeXBlKXtjYXNlImNhbnZhcyI6cmV0dXJuIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKF8uUmVuZGVyZXIsdGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyx0aGlzLnNjcmVlbkVsZW1lbnQsdGhpcy5saW5raWZpZXIsdGhpcy5saW5raWZpZXIyKTtjYXNlImRvbSI6cmV0dXJuIHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEMuRG9tUmVuZGVyZXIsdGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycyx0aGlzLmVsZW1lbnQsdGhpcy5zY3JlZW5FbGVtZW50LHRoaXMuX3ZpZXdwb3J0RWxlbWVudCx0aGlzLmxpbmtpZmllcix0aGlzLmxpbmtpZmllcjIpO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbml6ZWQgcmVuZGVyZXJUeXBlICInK3RoaXMub3B0aW9ucy5yZW5kZXJlclR5cGUrJyInKX19LHQucHJvdG90eXBlLl9zZXRUaGVtZT1mdW5jdGlvbihlKXt2YXIgdCxyLGk7dGhpcy5fdGhlbWU9ZSxudWxsPT09KHQ9dGhpcy5fY29sb3JNYW5hZ2VyKXx8dm9pZCAwPT09dHx8dC5zZXRUaGVtZShlKSxudWxsPT09KHI9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PXJ8fHIuc2V0Q29sb3JzKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpLG51bGw9PT0oaT10aGlzLnZpZXdwb3J0KXx8dm9pZCAwPT09aXx8aS5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpfSx0LnByb3RvdHlwZS5iaW5kTW91c2U9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcyxyPXRoaXMuZWxlbWVudDtmdW5jdGlvbiBpKGUpe3ZhciByLGksbj10Ll9tb3VzZVNlcnZpY2UuZ2V0UmF3Qnl0ZUNvb3JkcyhlLHQuc2NyZWVuRWxlbWVudCx0LmNvbHMsdC5yb3dzKTtpZighbilyZXR1cm4hMTtzd2l0Y2goZS5vdmVycmlkZVR5cGV8fGUudHlwZSl7Y2FzZSJtb3VzZW1vdmUiOmk9MzIsdm9pZCAwPT09ZS5idXR0b25zPyhyPTMsdm9pZCAwIT09ZS5idXR0b24mJihyPWUuYnV0dG9uPDM/ZS5idXR0b246MykpOnI9MSZlLmJ1dHRvbnM/MDo0JmUuYnV0dG9ucz8xOjImZS5idXR0b25zPzI6MzticmVhaztjYXNlIm1vdXNldXAiOmk9MCxyPWUuYnV0dG9uPDM/ZS5idXR0b246MzticmVhaztjYXNlIm1vdXNlZG93biI6aT0xLHI9ZS5idXR0b248Mz9lLmJ1dHRvbjozO2JyZWFrO2Nhc2Uid2hlZWwiOmlmKDA9PT10LnZpZXdwb3J0LmdldExpbmVzU2Nyb2xsZWQoZSkpcmV0dXJuITE7aT1lLmRlbHRhWTwwPzA6MSxyPTQ7YnJlYWs7ZGVmYXVsdDpyZXR1cm4hMX1yZXR1cm4hKHZvaWQgMD09PWl8fHZvaWQgMD09PXJ8fHI+NCkmJnQuY29yZU1vdXNlU2VydmljZS50cmlnZ2VyTW91c2VFdmVudCh7Y29sOm4ueC0zMyxyb3c6bi55LTMzLGJ1dHRvbjpyLGFjdGlvbjppLGN0cmw6ZS5jdHJsS2V5LGFsdDplLmFsdEtleSxzaGlmdDplLnNoaWZ0S2V5fSl9dmFyIG49e21vdXNldXA6bnVsbCx3aGVlbDpudWxsLG1vdXNlZHJhZzpudWxsLG1vdXNlbW92ZTpudWxsfSxvPWZ1bmN0aW9uKHQpe3JldHVybiBpKHQpLHQuYnV0dG9uc3x8KGUuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLG4ubW91c2V1cCksbi5tb3VzZWRyYWcmJmUuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbi5tb3VzZWRyYWcpKSxlLmNhbmNlbCh0KX0scz1mdW5jdGlvbih0KXtyZXR1cm4gaSh0KSxlLmNhbmNlbCh0LCEwKX0sYT1mdW5jdGlvbihlKXtlLmJ1dHRvbnMmJmkoZSl9LGM9ZnVuY3Rpb24oZSl7ZS5idXR0b25zfHxpKGUpfTt0aGlzLnJlZ2lzdGVyKHRoaXMuY29yZU1vdXNlU2VydmljZS5vblByb3RvY29sQ2hhbmdlKChmdW5jdGlvbih0KXt0PygiZGVidWciPT09ZS5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxvZ0xldmVsJiZlLl9sb2dTZXJ2aWNlLmRlYnVnKCJCaW5kaW5nIHRvIG1vdXNlIGV2ZW50czoiLGUuY29yZU1vdXNlU2VydmljZS5leHBsYWluRXZlbnRzKHQpKSxlLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiZW5hYmxlLW1vdXNlLWV2ZW50cyIpLGUuX3NlbGVjdGlvblNlcnZpY2UuZGlzYWJsZSgpKTooZS5fbG9nU2VydmljZS5kZWJ1ZygiVW5iaW5kaW5nIGZyb20gbW91c2UgZXZlbnRzLiIpLGUuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJlbmFibGUtbW91c2UtZXZlbnRzIiksZS5fc2VsZWN0aW9uU2VydmljZS5lbmFibGUoKSksOCZ0P24ubW91c2Vtb3ZlfHwoci5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLGMpLG4ubW91c2Vtb3ZlPWMpOihyLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsbi5tb3VzZW1vdmUpLG4ubW91c2Vtb3ZlPW51bGwpLDE2JnQ/bi53aGVlbHx8KHIuYWRkRXZlbnRMaXN0ZW5lcigid2hlZWwiLHMse3Bhc3NpdmU6ITF9KSxuLndoZWVsPXMpOihyLnJlbW92ZUV2ZW50TGlzdGVuZXIoIndoZWVsIixuLndoZWVsKSxuLndoZWVsPW51bGwpLDImdD9uLm1vdXNldXB8fChuLm1vdXNldXA9byk6KGUuX2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLG4ubW91c2V1cCksbi5tb3VzZXVwPW51bGwpLDQmdD9uLm1vdXNlZHJhZ3x8KG4ubW91c2VkcmFnPWEpOihlLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG4ubW91c2VkcmFnKSxuLm1vdXNlZHJhZz1udWxsKX0pKSksdGhpcy5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPXRoaXMuY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbCx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShyLCJtb3VzZWRvd24iLChmdW5jdGlvbih0KXtpZih0LnByZXZlbnREZWZhdWx0KCksZS5mb2N1cygpLGUuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSYmIWUuX3NlbGVjdGlvblNlcnZpY2Uuc2hvdWxkRm9yY2VTZWxlY3Rpb24odCkpcmV0dXJuIGkodCksbi5tb3VzZXVwJiZlLl9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIixuLm1vdXNldXApLG4ubW91c2VkcmFnJiZlLl9kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG4ubW91c2VkcmFnKSxlLmNhbmNlbCh0KX0pKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikociwid2hlZWwiLChmdW5jdGlvbih0KXtpZighbi53aGVlbCl7aWYoIWUuYnVmZmVyLmhhc1Njcm9sbGJhY2spe3ZhciByPWUudmlld3BvcnQuZ2V0TGluZXNTY3JvbGxlZCh0KTtpZigwPT09cilyZXR1cm47Zm9yKHZhciBpPXUuQzAuRVNDKyhlLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXM/Ik8iOiJbIikrKHQuZGVsdGFZPDA/IkEiOiJCIiksbz0iIixzPTA7czxNYXRoLmFicyhyKTtzKyspbys9aTtyZXR1cm4gZS5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KG8sITApLGUuY2FuY2VsKHQsITApfXJldHVybiBlLnZpZXdwb3J0Lm9uV2hlZWwodCk/ZS5jYW5jZWwodCk6dm9pZCAwfX0pLHtwYXNzaXZlOiExfSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHIsInRvdWNoc3RhcnQiLChmdW5jdGlvbih0KXtpZighZS5jb3JlTW91c2VTZXJ2aWNlLmFyZU1vdXNlRXZlbnRzQWN0aXZlKXJldHVybiBlLnZpZXdwb3J0Lm9uVG91Y2hTdGFydCh0KSxlLmNhbmNlbCh0KX0pLHtwYXNzaXZlOiEwfSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHIsInRvdWNobW92ZSIsKGZ1bmN0aW9uKHQpe2lmKCFlLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUpcmV0dXJuIGUudmlld3BvcnQub25Ub3VjaE1vdmUodCk/dm9pZCAwOmUuY2FuY2VsKHQpfSkse3Bhc3NpdmU6ITF9KSl9LHQucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSx0KXt2YXIgcjtudWxsPT09KHI9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PXJ8fHIucmVmcmVzaFJvd3MoZSx0KX0sdC5wcm90b3R5cGUuX3F1ZXVlTGlua2lmaWNhdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByO251bGw9PT0ocj10aGlzLmxpbmtpZmllcil8fHZvaWQgMD09PXJ8fHIubGlua2lmeVJvd3MoZSx0KX0sdC5wcm90b3R5cGUudXBkYXRlQ3Vyc29yU3R5bGU9ZnVuY3Rpb24oZSl7dmFyIHQ7KG51bGw9PT0odD10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKXx8dm9pZCAwPT09dD92b2lkIDA6dC5zaG91bGRDb2x1bW5TZWxlY3QoZSkpP3RoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJjb2x1bW4tc2VsZWN0Iik6dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoImNvbHVtbi1zZWxlY3QiKX0sdC5wcm90b3R5cGUuX3Nob3dDdXJzb3I9ZnVuY3Rpb24oKXt0aGlzLmNvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWR8fCh0aGlzLmNvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITAsdGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksdGhpcy5idWZmZXIueSkpfSx0LnByb3RvdHlwZS5zY3JvbGxMaW5lcz1mdW5jdGlvbih0LHIsaSl7dm9pZCAwPT09aSYmKGk9MCksZS5wcm90b3R5cGUuc2Nyb2xsTGluZXMuY2FsbCh0aGlzLHQscixpKSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSl9LHQucHJvdG90eXBlLnBhc3RlPWZ1bmN0aW9uKGUpeygwLGgucGFzdGUpKGUsdGhpcy50ZXh0YXJlYSx0aGlzLmNvcmVTZXJ2aWNlKX0sdC5wcm90b3R5cGUuYXR0YWNoQ3VzdG9tS2V5RXZlbnRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcj1lfSx0LnByb3RvdHlwZS5yZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzLmxpbmtpZmllci5yZWdpc3RlckxpbmtNYXRjaGVyKGUsdCxyKTtyZXR1cm4gdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpLGl9LHQucHJvdG90eXBlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlKXt0aGlzLmxpbmtpZmllci5kZXJlZ2lzdGVyTGlua01hdGNoZXIoZSkmJnRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJMaW5rUHJvdmlkZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubGlua2lmaWVyMi5yZWdpc3RlckxpbmtQcm92aWRlcihlKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UpdGhyb3cgbmV3IEVycm9yKCJUZXJtaW5hbCBtdXN0IGJlIG9wZW5lZCBmaXJzdCIpO3ZhciB0PXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UucmVnaXN0ZXIoZSk7cmV0dXJuIHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSx0fSx0LnByb3RvdHlwZS5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKXRocm93IG5ldyBFcnJvcigiVGVybWluYWwgbXVzdCBiZSBvcGVuZWQgZmlyc3QiKTt0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLmRlcmVnaXN0ZXIoZSkmJnRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJtYXJrZXJzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLm1hcmtlcnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuYWRkTWFya2VyPWZ1bmN0aW9uKGUpe2lmKHRoaXMuYnVmZmVyPT09dGhpcy5idWZmZXJzLm5vcm1hbClyZXR1cm4gdGhpcy5idWZmZXIuYWRkTWFya2VyKHRoaXMuYnVmZmVyLnliYXNlK3RoaXMuYnVmZmVyLnkrZSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGVjb3JhdGlvblNlcnZpY2UucmVnaXN0ZXJEZWNvcmF0aW9uKGUpfSx0LnByb3RvdHlwZS5oYXNTZWxlY3Rpb249ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuX3NlbGVjdGlvblNlcnZpY2UmJnRoaXMuX3NlbGVjdGlvblNlcnZpY2UuaGFzU2VsZWN0aW9ufSx0LnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2V0U2VsZWN0aW9uKGUsdCxyKX0sdC5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3NlbGVjdGlvblNlcnZpY2U/dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25UZXh0OiIifSx0LnByb3RvdHlwZS5nZXRTZWxlY3Rpb25Qb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuX3NlbGVjdGlvblNlcnZpY2UmJnRoaXMuX3NlbGVjdGlvblNlcnZpY2UuaGFzU2VsZWN0aW9uKXJldHVybntzdGFydENvbHVtbjp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblN0YXJ0WzBdLHN0YXJ0Um93OnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uU3RhcnRbMV0sZW5kQ29sdW1uOnRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uRW5kWzBdLGVuZFJvdzp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZFsxXX19LHQucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT1lfHxlLmNsZWFyU2VsZWN0aW9uKCl9LHQucHJvdG90eXBlLnNlbGVjdEFsbD1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKXx8dm9pZCAwPT09ZXx8ZS5zZWxlY3RBbGwoKX0sdC5wcm90b3R5cGUuc2VsZWN0TGluZXM9ZnVuY3Rpb24oZSx0KXt2YXIgcjtudWxsPT09KHI9dGhpcy5fc2VsZWN0aW9uU2VydmljZSl8fHZvaWQgMD09PXJ8fHIuc2VsZWN0TGluZXMoZSx0KX0sdC5wcm90b3R5cGUuX2tleURvd249ZnVuY3Rpb24oZSl7aWYodGhpcy5fa2V5RG93bkhhbmRsZWQ9ITEsdGhpcy5fa2V5RG93blNlZW49ITAsdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyJiYhMT09PXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihlKSlyZXR1cm4hMTt2YXIgdD10aGlzLmJyb3dzZXIuaXNNYWMmJnRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEmJmUuYWx0S2V5O2lmKCF0JiYhdGhpcy5fY29tcG9zaXRpb25IZWxwZXIua2V5ZG93bihlKSlyZXR1cm4gdGhpcy5idWZmZXIueWJhc2UhPT10aGlzLmJ1ZmZlci55ZGlzcCYmdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb0JvdHRvbSgpLCExO3R8fCJEZWFkIiE9PWUua2V5JiYiQWx0R3JhcGgiIT09ZS5rZXl8fCh0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITApO3ZhciByPSgwLHcuZXZhbHVhdGVLZXlib2FyZEV2ZW50KShlLHRoaXMuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyx0aGlzLmJyb3dzZXIuaXNNYWMsdGhpcy5vcHRpb25zLm1hY09wdGlvbklzTWV0YSk7aWYodGhpcy51cGRhdGVDdXJzb3JTdHlsZShlKSwzPT09ci50eXBlfHwyPT09ci50eXBlKXt2YXIgaT10aGlzLnJvd3MtMTtyZXR1cm4gdGhpcy5zY3JvbGxMaW5lcygyPT09ci50eXBlPy1pOmkpLHRoaXMuY2FuY2VsKGUsITApfXJldHVybiAxPT09ci50eXBlJiZ0aGlzLnNlbGVjdEFsbCgpLCEhdGhpcy5faXNUaGlyZExldmVsU2hpZnQodGhpcy5icm93c2VyLGUpfHwoci5jYW5jZWwmJnRoaXMuY2FuY2VsKGUsITApLCFyLmtleXx8ISEoZS5rZXkmJiFlLmN0cmxLZXkmJiFlLmFsdEtleSYmIWUubWV0YUtleSYmMT09PWUua2V5Lmxlbmd0aCYmZS5rZXkuY2hhckNvZGVBdCgwKT49NjUmJmUua2V5LmNoYXJDb2RlQXQoMCk8PTkwKXx8KHRoaXMuX3VucHJvY2Vzc2VkRGVhZEtleT8odGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExLCEwKTooci5rZXkhPT11LkMwLkVUWCYmci5rZXkhPT11LkMwLkNSfHwodGhpcy50ZXh0YXJlYS52YWx1ZT0iIiksdGhpcy5fb25LZXkuZmlyZSh7a2V5OnIua2V5LGRvbUV2ZW50OmV9KSx0aGlzLl9zaG93Q3Vyc29yKCksdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHIua2V5LCEwKSx0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZT92b2lkKHRoaXMuX2tleURvd25IYW5kbGVkPSEwKTp0aGlzLmNhbmNlbChlLCEwKSkpKX0sdC5wcm90b3R5cGUuX2lzVGhpcmRMZXZlbFNoaWZ0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZS5pc01hYyYmIXRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEmJnQuYWx0S2V5JiYhdC5jdHJsS2V5JiYhdC5tZXRhS2V5fHxlLmlzV2luZG93cyYmdC5hbHRLZXkmJnQuY3RybEtleSYmIXQubWV0YUtleXx8ZS5pc1dpbmRvd3MmJnQuZ2V0TW9kaWZpZXJTdGF0ZSgiQWx0R3JhcGgiKTtyZXR1cm4ia2V5cHJlc3MiPT09dC50eXBlP3I6ciYmKCF0LmtleUNvZGV8fHQua2V5Q29kZT40Nyl9LHQucHJvdG90eXBlLl9rZXlVcD1mdW5jdGlvbihlKXt0aGlzLl9rZXlEb3duU2Vlbj0hMSx0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpfHwoZnVuY3Rpb24oZSl7cmV0dXJuIDE2PT09ZS5rZXlDb2RlfHwxNz09PWUua2V5Q29kZXx8MTg9PT1lLmtleUNvZGV9KGUpfHx0aGlzLmZvY3VzKCksdGhpcy51cGRhdGVDdXJzb3JTdHlsZShlKSx0aGlzLl9rZXlQcmVzc0hhbmRsZWQ9ITEpfSx0LnByb3RvdHlwZS5fa2V5UHJlc3M9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYodGhpcy5fa2V5UHJlc3NIYW5kbGVkPSExLHRoaXMuX2tleURvd25IYW5kbGVkKXJldHVybiExO2lmKHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciYmITE9PT10aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZSkpcmV0dXJuITE7aWYodGhpcy5jYW5jZWwoZSksZS5jaGFyQ29kZSl0PWUuY2hhckNvZGU7ZWxzZSBpZihudWxsPT09ZS53aGljaHx8dm9pZCAwPT09ZS53aGljaCl0PWUua2V5Q29kZTtlbHNle2lmKDA9PT1lLndoaWNofHwwPT09ZS5jaGFyQ29kZSlyZXR1cm4hMTt0PWUud2hpY2h9cmV0dXJuISghdHx8KGUuYWx0S2V5fHxlLmN0cmxLZXl8fGUubWV0YUtleSkmJiF0aGlzLl9pc1RoaXJkTGV2ZWxTaGlmdCh0aGlzLmJyb3dzZXIsZSl8fCh0PVN0cmluZy5mcm9tQ2hhckNvZGUodCksdGhpcy5fb25LZXkuZmlyZSh7a2V5OnQsZG9tRXZlbnQ6ZX0pLHRoaXMuX3Nob3dDdXJzb3IoKSx0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodCwhMCksdGhpcy5fa2V5UHJlc3NIYW5kbGVkPSEwLHRoaXMuX3VucHJvY2Vzc2VkRGVhZEtleT0hMSwwKSl9LHQucHJvdG90eXBlLl9pbnB1dEV2ZW50PWZ1bmN0aW9uKGUpe2lmKGUuZGF0YSYmImluc2VydFRleHQiPT09ZS5pbnB1dFR5cGUmJighZS5jb21wb3NlZHx8IXRoaXMuX2tleURvd25TZWVuKSYmIXRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlKXtpZih0aGlzLl9rZXlQcmVzc0hhbmRsZWQpcmV0dXJuITE7dGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSExO3ZhciB0PWUuZGF0YTtyZXR1cm4gdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHQsITApLHRoaXMuY2FuY2VsKGUpLCEwfXJldHVybiExfSx0LnByb3RvdHlwZS5iZWxsPWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5fc291bmRCZWxsKCkmJihudWxsPT09KGU9dGhpcy5fc291bmRTZXJ2aWNlKXx8dm9pZCAwPT09ZXx8ZS5wbGF5QmVsbFNvdW5kKCkpLHRoaXMuX29uQmVsbC5maXJlKCl9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0LHIpe3QhPT10aGlzLmNvbHN8fHIhPT10aGlzLnJvd3M/ZS5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0LHIpOnRoaXMuX2NoYXJTaXplU2VydmljZSYmIXRoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUmJnRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCl9LHQucHJvdG90eXBlLl9hZnRlclJlc2l6ZT1mdW5jdGlvbihlLHQpe3ZhciByLGk7bnVsbD09PShyPXRoaXMuX2NoYXJTaXplU2VydmljZSl8fHZvaWQgMD09PXJ8fHIubWVhc3VyZSgpLG51bGw9PT0oaT10aGlzLnZpZXdwb3J0KXx8dm9pZCAwPT09aXx8aS5zeW5jU2Nyb2xsQXJlYSghMCl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7aWYoMCE9PXRoaXMuYnVmZmVyLnliYXNlfHwwIT09dGhpcy5idWZmZXIueSl7dGhpcy5idWZmZXIuY2xlYXJBbGxNYXJrZXJzKCksdGhpcy5idWZmZXIubGluZXMuc2V0KDAsdGhpcy5idWZmZXIubGluZXMuZ2V0KHRoaXMuYnVmZmVyLnliYXNlK3RoaXMuYnVmZmVyLnkpKSx0aGlzLmJ1ZmZlci5saW5lcy5sZW5ndGg9MSx0aGlzLmJ1ZmZlci55ZGlzcD0wLHRoaXMuYnVmZmVyLnliYXNlPTAsdGhpcy5idWZmZXIueT0wO2Zvcih2YXIgZT0xO2U8dGhpcy5yb3dzO2UrKyl0aGlzLmJ1ZmZlci5saW5lcy5wdXNoKHRoaXMuYnVmZmVyLmdldEJsYW5rTGluZShFLkRFRkFVTFRfQVRUUl9EQVRBKSk7dGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpLHRoaXMuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnRoaXMuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSl9fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3ZhciB0LHI7dGhpcy5vcHRpb25zLnJvd3M9dGhpcy5yb3dzLHRoaXMub3B0aW9ucy5jb2xzPXRoaXMuY29sczt2YXIgaT10aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI7dGhpcy5fc2V0dXAoKSxlLnByb3RvdHlwZS5yZXNldC5jYWxsKHRoaXMpLG51bGw9PT0odD10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKXx8dm9pZCAwPT09dHx8dC5yZXNldCgpLHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLnJlc2V0KCksdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPWksdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpLG51bGw9PT0ocj10aGlzLnZpZXdwb3J0KXx8dm9pZCAwPT09cnx8ci5zeW5jU2Nyb2xsQXJlYSgpfSx0LnByb3RvdHlwZS5jbGVhclRleHR1cmVBdGxhcz1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09ZXx8ZS5jbGVhclRleHR1cmVBdGxhcygpfSx0LnByb3RvdHlwZS5fcmVwb3J0Rm9jdXM9ZnVuY3Rpb24oKXt2YXIgZTsobnVsbD09PShlPXRoaXMuZWxlbWVudCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2xhc3NMaXN0LmNvbnRhaW5zKCJmb2N1cyIpKT90aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIltJIik6dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbTyIpfSx0LnByb3RvdHlwZS5fcmVwb3J0V2luZG93c09wdGlvbnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5fcmVuZGVyU2VydmljZSlzd2l0Y2goZSl7Y2FzZSBmLldpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfV0lOX1NJWkVfUElYRUxTOnZhciB0PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aC50b0ZpeGVkKDApLHI9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodC50b0ZpeGVkKDApO3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiWzQ7IityKyI7Iit0KyJ0Iik7YnJlYWs7Y2FzZSBmLldpbmRvd3NPcHRpb25zUmVwb3J0VHlwZS5HRVRfQ0VMTF9TSVpFX1BJWEVMUzp2YXIgaT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoLnRvRml4ZWQoMCksbj10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodC50b0ZpeGVkKDApO3RoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiWzY7IituKyI7IitpKyJ0Iil9fSx0LnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLm9wdGlvbnMuY2FuY2VsRXZlbnRzfHx0KXJldHVybiBlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wUHJvcGFnYXRpb24oKSwhMX0sdC5wcm90b3R5cGUuX3Zpc3VhbEJlbGw9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sdC5wcm90b3R5cGUuX3NvdW5kQmVsbD1mdW5jdGlvbigpe3JldHVybiJzb3VuZCI9PT10aGlzLm9wdGlvbnMuYmVsbFN0eWxlfSx0fShULkNvcmVUZXJtaW5hbCk7dC5UZXJtaW5hbD1xfSw5OTI0OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVGltZUJhc2VkRGVib3VuY2VyPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2b2lkIDA9PT10JiYodD0xZTMpLHRoaXMuX3JlbmRlckNhbGxiYWNrPWUsdGhpcy5fZGVib3VuY2VUaHJlc2hvbGRNUz10LHRoaXMuX2xhc3RSZWZyZXNoTXM9MCx0aGlzLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZD0hMX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX3JlZnJlc2hUaW1lb3V0SUQmJmNsZWFyVGltZW91dCh0aGlzLl9yZWZyZXNoVGltZW91dElEKX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpczt0aGlzLl9yb3dDb3VudD1yLGU9dm9pZCAwIT09ZT9lOjAsdD12b2lkIDAhPT10P3Q6dGhpcy5fcm93Q291bnQtMSx0aGlzLl9yb3dTdGFydD12b2lkIDAhPT10aGlzLl9yb3dTdGFydD9NYXRoLm1pbih0aGlzLl9yb3dTdGFydCxlKTplLHRoaXMuX3Jvd0VuZD12b2lkIDAhPT10aGlzLl9yb3dFbmQ/TWF0aC5tYXgodGhpcy5fcm93RW5kLHQpOnQ7dmFyIG49RGF0ZS5ub3coKTtpZihuLXRoaXMuX2xhc3RSZWZyZXNoTXM+PXRoaXMuX2RlYm91bmNlVGhyZXNob2xkTVMpdGhpcy5fbGFzdFJlZnJlc2hNcz1uLHRoaXMuX2lubmVyUmVmcmVzaCgpO2Vsc2UgaWYoIXRoaXMuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkKXt2YXIgbz1uLXRoaXMuX2xhc3RSZWZyZXNoTXMscz10aGlzLl9kZWJvdW5jZVRocmVzaG9sZE1TLW87dGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQ9ITAsdGhpcy5fcmVmcmVzaFRpbWVvdXRJRD13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtpLl9sYXN0UmVmcmVzaE1zPURhdGUubm93KCksaS5faW5uZXJSZWZyZXNoKCksaS5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQ9ITEsaS5fcmVmcmVzaFRpbWVvdXRJRD12b2lkIDB9KSxzKX19LGUucHJvdG90eXBlLl9pbm5lclJlZnJlc2g9ZnVuY3Rpb24oKXtpZih2b2lkIDAhPT10aGlzLl9yb3dTdGFydCYmdm9pZCAwIT09dGhpcy5fcm93RW5kJiZ2b2lkIDAhPT10aGlzLl9yb3dDb3VudCl7dmFyIGU9TWF0aC5tYXgodGhpcy5fcm93U3RhcnQsMCksdD1NYXRoLm1pbih0aGlzLl9yb3dFbmQsdGhpcy5fcm93Q291bnQtMSk7dGhpcy5fcm93U3RhcnQ9dm9pZCAwLHRoaXMuX3Jvd0VuZD12b2lkIDAsdGhpcy5fcmVuZGVyQ2FsbGJhY2soZSx0KX19LGV9KCk7dC5UaW1lQmFzZWREZWJvdW5jZXI9cn0sMTY4MDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5WaWV3cG9ydD12b2lkIDA7dmFyIGE9cig4NDQpLGM9cigzNjU2KSxsPXIoNDcyNSksaD1yKDI1ODUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGwpe3ZhciBoPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaC5fc2Nyb2xsTGluZXM9dCxoLl92aWV3cG9ydEVsZW1lbnQ9cixoLl9zY3JvbGxBcmVhPWksaC5fZWxlbWVudD1uLGguX2J1ZmZlclNlcnZpY2U9byxoLl9vcHRpb25zU2VydmljZT1zLGguX2NoYXJTaXplU2VydmljZT1hLGguX3JlbmRlclNlcnZpY2U9bCxoLnNjcm9sbEJhcldpZHRoPTAsaC5fY3VycmVudFJvd0hlaWdodD0wLGguX2N1cnJlbnRTY2FsZWRDZWxsSGVpZ2h0PTAsaC5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoPTAsaC5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ9MCxoLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQ9MCxoLl9sYXN0VG91Y2hZPTAsaC5fbGFzdFNjcm9sbFRvcD0wLGguX3doZWVsUGFydGlhbFNjcm9sbD0wLGguX3JlZnJlc2hBbmltYXRpb25GcmFtZT1udWxsLGguX2lnbm9yZU5leHRTY3JvbGxFdmVudD0hMSxoLnNjcm9sbEJhcldpZHRoPWguX3ZpZXdwb3J0RWxlbWVudC5vZmZzZXRXaWR0aC1oLl9zY3JvbGxBcmVhLm9mZnNldFdpZHRofHwxNSxoLnJlZ2lzdGVyKCgwLGMuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShoLl92aWV3cG9ydEVsZW1lbnQsInNjcm9sbCIsaC5fb25TY3JvbGwuYmluZChoKSkpLGguX2FjdGl2ZUJ1ZmZlcj1oLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcixoLnJlZ2lzdGVyKGguX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fYWN0aXZlQnVmZmVyPWUuYWN0aXZlQnVmZmVyfSkpKSxoLl9yZW5kZXJEaW1lbnNpb25zPWguX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucyxoLnJlZ2lzdGVyKGguX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fcmVuZGVyRGltZW5zaW9ucz1lfSkpKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBoLnN5bmNTY3JvbGxBcmVhKCl9KSwwKSxofXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUub25UaGVtZUNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLl92aWV3cG9ydEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yPWUuYmFja2dyb3VuZC5jc3N9LHQucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoZSlyZXR1cm4gdGhpcy5faW5uZXJSZWZyZXNoKCksdm9pZChudWxsIT09dGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lJiZjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWUpKTtudWxsPT09dGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lJiYodGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPXJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5faW5uZXJSZWZyZXNoKCl9KSkpfSx0LnByb3RvdHlwZS5faW5uZXJSZWZyZXNoPWZ1bmN0aW9uKCl7aWYodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodD4wKXt0aGlzLl9jdXJyZW50Um93SGVpZ2h0PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0L3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuX2N1cnJlbnRTY2FsZWRDZWxsSGVpZ2h0PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0PXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5vZmZzZXRIZWlnaHQ7dmFyIGU9TWF0aC5yb3VuZCh0aGlzLl9jdXJyZW50Um93SGVpZ2h0KnRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCkrKHRoaXMuX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0LXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQpO3RoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckhlaWdodCE9PWUmJih0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQ9ZSx0aGlzLl9zY3JvbGxBcmVhLnN0eWxlLmhlaWdodD10aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQrInB4Iil9dmFyIHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AqdGhpcy5fY3VycmVudFJvd0hlaWdodDt0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wIT09dCYmKHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudD0hMCx0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wPXQpLHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZT1udWxsfSx0LnByb3RvdHlwZS5zeW5jU2Nyb2xsQXJlYT1mdW5jdGlvbihlKXtpZih2b2lkIDA9PT1lJiYoZT0hMSksdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoIT09dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoKXJldHVybiB0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGg9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoLHZvaWQgdGhpcy5fcmVmcmVzaChlKTt0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodD09PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQmJnRoaXMuX2xhc3RTY3JvbGxUb3A9PT10aGlzLl9hY3RpdmVCdWZmZXIueWRpc3AqdGhpcy5fY3VycmVudFJvd0hlaWdodCYmdGhpcy5fcmVuZGVyRGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0PT09dGhpcy5fY3VycmVudFNjYWxlZENlbGxIZWlnaHR8fHRoaXMuX3JlZnJlc2goZSl9LHQucHJvdG90eXBlLl9vblNjcm9sbD1mdW5jdGlvbihlKXtpZih0aGlzLl9sYXN0U2Nyb2xsVG9wPXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3AsdGhpcy5fdmlld3BvcnRFbGVtZW50Lm9mZnNldFBhcmVudCl7aWYodGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50KXJldHVybiB0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ9ITEsdm9pZCB0aGlzLl9zY3JvbGxMaW5lcygwKTt2YXIgdD1NYXRoLnJvdW5kKHRoaXMuX2xhc3RTY3JvbGxUb3AvdGhpcy5fY3VycmVudFJvd0hlaWdodCktdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7dGhpcy5fc2Nyb2xsTGluZXModCl9fSx0LnByb3RvdHlwZS5fYnViYmxlU2Nyb2xsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCt0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodDtyZXR1cm4hKHQ8MCYmMCE9PXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3B8fHQ+MCYmcjx0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQpfHwoZS5jYW5jZWxhYmxlJiZlLnByZXZlbnREZWZhdWx0KCksITEpfSx0LnByb3RvdHlwZS5vbldoZWVsPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldFBpeGVsc1Njcm9sbGVkKGUpO3JldHVybiAwIT09dCYmKHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3ArPXQsdGhpcy5fYnViYmxlU2Nyb2xsKGUsdCkpfSx0LnByb3RvdHlwZS5fZ2V0UGl4ZWxzU2Nyb2xsZWQ9ZnVuY3Rpb24oZSl7aWYoMD09PWUuZGVsdGFZfHxlLnNoaWZ0S2V5KXJldHVybiAwO3ZhciB0PXRoaXMuX2FwcGx5U2Nyb2xsTW9kaWZpZXIoZS5kZWx0YVksZSk7cmV0dXJuIGUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfTElORT90Kj10aGlzLl9jdXJyZW50Um93SGVpZ2h0OmUuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUEFHRSYmKHQqPXRoaXMuX2N1cnJlbnRSb3dIZWlnaHQqdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSx0fSx0LnByb3RvdHlwZS5nZXRMaW5lc1Njcm9sbGVkPWZ1bmN0aW9uKGUpe2lmKDA9PT1lLmRlbHRhWXx8ZS5zaGlmdEtleSlyZXR1cm4gMDt2YXIgdD10aGlzLl9hcHBseVNjcm9sbE1vZGlmaWVyKGUuZGVsdGFZLGUpO3JldHVybiBlLmRlbHRhTW9kZT09PVdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMPyh0Lz10aGlzLl9jdXJyZW50Um93SGVpZ2h0KzAsdGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsKz10LHQ9TWF0aC5mbG9vcihNYXRoLmFicyh0aGlzLl93aGVlbFBhcnRpYWxTY3JvbGwpKSoodGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsPjA/MTotMSksdGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsJT0xKTplLmRlbHRhTW9kZT09PVdoZWVsRXZlbnQuRE9NX0RFTFRBX1BBR0UmJih0Kj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHR9LHQucHJvdG90eXBlLl9hcHBseVNjcm9sbE1vZGlmaWVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mYXN0U2Nyb2xsTW9kaWZpZXI7cmV0dXJuImFsdCI9PT1yJiZ0LmFsdEtleXx8ImN0cmwiPT09ciYmdC5jdHJsS2V5fHwic2hpZnQiPT09ciYmdC5zaGlmdEtleT9lKnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZmFzdFNjcm9sbFNlbnNpdGl2aXR5KnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsU2Vuc2l0aXZpdHk6ZSp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5fSx0LnByb3RvdHlwZS5vblRvdWNoU3RhcnQ9ZnVuY3Rpb24oZSl7dGhpcy5fbGFzdFRvdWNoWT1lLnRvdWNoZXNbMF0ucGFnZVl9LHQucHJvdG90eXBlLm9uVG91Y2hNb3ZlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2xhc3RUb3VjaFktZS50b3VjaGVzWzBdLnBhZ2VZO3JldHVybiB0aGlzLl9sYXN0VG91Y2hZPWUudG91Y2hlc1swXS5wYWdlWSwwIT09dCYmKHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3ArPXQsdGhpcy5fYnViYmxlU2Nyb2xsKGUsdCkpfSxvKFtzKDQsaC5JQnVmZmVyU2VydmljZSkscyg1LGguSU9wdGlvbnNTZXJ2aWNlKSxzKDYsbC5JQ2hhclNpemVTZXJ2aWNlKSxzKDcsbC5JUmVuZGVyU2VydmljZSldLHQpfShhLkRpc3Bvc2FibGUpO3QuVmlld3BvcnQ9dX0sMzEwNzpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJEZWNvcmF0aW9uUmVuZGVyZXI9dm9pZCAwO3ZhciBjPXIoMzY1NiksbD1yKDQ3MjUpLGg9cig4NDQpLHU9cigyNTg1KSxmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbil7dmFyIG89ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLl9zY3JlZW5FbGVtZW50PXQsby5fYnVmZmVyU2VydmljZT1yLG8uX2RlY29yYXRpb25TZXJ2aWNlPWksby5fcmVuZGVyU2VydmljZT1uLG8uX2RlY29yYXRpb25FbGVtZW50cz1uZXcgTWFwLG8uX2FsdEJ1ZmZlcklzQWN0aXZlPSExLG8uX2RpbWVuc2lvbnNDaGFuZ2VkPSExLG8uX2NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxvLl9jb250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0tZGVjb3JhdGlvbi1jb250YWluZXIiKSxvLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKG8uX2NvbnRhaW5lciksby5yZWdpc3RlcihvLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gby5fcXVldWVSZWZyZXNoKCl9KSkpLG8ucmVnaXN0ZXIoby5fcmVuZGVyU2VydmljZS5vbkRpbWVuc2lvbnNDaGFuZ2UoKGZ1bmN0aW9uKCl7by5fZGltZW5zaW9uc0NoYW5nZWQ9ITAsby5fcXVldWVSZWZyZXNoKCl9KSkpLG8ucmVnaXN0ZXIoKDAsYy5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHdpbmRvdywicmVzaXplIiwoZnVuY3Rpb24oKXtyZXR1cm4gby5fcXVldWVSZWZyZXNoKCl9KSkpLG8ucmVnaXN0ZXIoby5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKCl7by5fYWx0QnVmZmVySXNBY3RpdmU9by5fYnVmZmVyU2VydmljZS5idWZmZXI9PT1vLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWx0fSkpKSxvLnJlZ2lzdGVyKG8uX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3F1ZXVlUmVmcmVzaCgpfSkpKSxvLnJlZ2lzdGVyKG8uX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlbW92ZWQoKGZ1bmN0aW9uKGUpe3JldHVybiBvLl9yZW1vdmVEZWNvcmF0aW9uKGUpfSkpKSxvfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2NvbnRhaW5lci5yZW1vdmUoKSx0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuY2xlYXIoKSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl9xdWV1ZVJlZnJlc2g9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3ZvaWQgMD09PXRoaXMuX2FuaW1hdGlvbkZyYW1lJiYodGhpcy5fYW5pbWF0aW9uRnJhbWU9dGhpcy5fcmVuZGVyU2VydmljZS5hZGRSZWZyZXNoQ2FsbGJhY2soKGZ1bmN0aW9uKCl7ZS5yZWZyZXNoRGVjb3JhdGlvbnMoKSxlLl9hbmltYXRpb25GcmFtZT12b2lkIDB9KSkpfSx0LnByb3RvdHlwZS5yZWZyZXNoRGVjb3JhdGlvbnM9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9YSh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5kZWNvcmF0aW9ucyksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpe3ZhciBuPWkudmFsdWU7dGhpcy5fcmVuZGVyRGVjb3JhdGlvbihuKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2RpbWVuc2lvbnNDaGFuZ2VkPSExfSx0LnByb3RvdHlwZS5fcmVuZGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt0aGlzLl9yZWZyZXNoU3R5bGUoZSksdGhpcy5fZGltZW5zaW9uc0NoYW5nZWQmJnRoaXMuX3JlZnJlc2hYUG9zaXRpb24oZSl9LHQucHJvdG90eXBlLl9jcmVhdGVFbGVtZW50PWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7ci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1kZWNvcmF0aW9uIiksci5zdHlsZS53aWR0aD1NYXRoLnJvdW5kKChlLm9wdGlvbnMud2lkdGh8fDEpKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgpKyJweCIsci5zdHlsZS5oZWlnaHQ9KGUub3B0aW9ucy5oZWlnaHR8fDEpKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsci5zdHlsZS50b3A9KGUubWFya2VyLmxpbmUtdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS55ZGlzcCkqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixyLnN0eWxlLmxpbmVIZWlnaHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4Ijt2YXIgaT1udWxsIT09KHQ9ZS5vcHRpb25zLngpJiZ2b2lkIDAhPT10P3Q6MDtyZXR1cm4gaSYmaT50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMmJihyLnN0eWxlLmRpc3BsYXk9Im5vbmUiKSx0aGlzLl9yZWZyZXNoWFBvc2l0aW9uKGUscikscn0sdC5wcm90b3R5cGUuX3JlZnJlc2hTdHlsZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9ZS5tYXJrZXIubGluZS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLnlkaXNwO2lmKHI8MHx8cj49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKWUuZWxlbWVudCYmKGUuZWxlbWVudC5zdHlsZS5kaXNwbGF5PSJub25lIixlLm9uUmVuZGVyRW1pdHRlci5maXJlKGUuZWxlbWVudCkpO2Vsc2V7dmFyIGk9dGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLmdldChlKTtpfHwoZS5vbkRpc3Bvc2UoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbW92ZURlY29yYXRpb24oZSl9KSksaT10aGlzLl9jcmVhdGVFbGVtZW50KGUpLGUuZWxlbWVudD1pLHRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5zZXQoZSxpKSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQoaSkpLGkuc3R5bGUudG9wPXIqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixpLnN0eWxlLmRpc3BsYXk9dGhpcy5fYWx0QnVmZmVySXNBY3RpdmU/Im5vbmUiOiJibG9jayIsZS5vblJlbmRlckVtaXR0ZXIuZmlyZShpKX19LHQucHJvdG90eXBlLl9yZWZyZXNoWFBvc2l0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI7aWYodm9pZCAwPT09dCYmKHQ9ZS5lbGVtZW50KSx0KXt2YXIgaT1udWxsIT09KHI9ZS5vcHRpb25zLngpJiZ2b2lkIDAhPT1yP3I6MDsicmlnaHQiPT09KGUub3B0aW9ucy5hbmNob3J8fCJsZWZ0Iik/dC5zdHlsZS5yaWdodD1pP2kqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCsicHgiOiIiOnQuc3R5bGUubGVmdD1pP2kqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCsicHgiOiIifX0sdC5wcm90b3R5cGUuX3JlbW92ZURlY29yYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5nZXQoZSkpfHx2b2lkIDA9PT10fHx0LnJlbW92ZSgpLHRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5kZWxldGUoZSl9LG8oW3MoMSx1LklCdWZmZXJTZXJ2aWNlKSxzKDIsdS5JRGVjb3JhdGlvblNlcnZpY2UpLHMoMyxsLklSZW5kZXJTZXJ2aWNlKV0sdCl9KGguRGlzcG9zYWJsZSk7dC5CdWZmZXJEZWNvcmF0aW9uUmVuZGVyZXI9Zn0sNTg3MTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db2xvclpvbmVTdG9yZT12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fem9uZXM9W10sdGhpcy5fem9uZVBvb2w9W10sdGhpcy5fem9uZVBvb2xJbmRleD0wLHRoaXMuX2xpbmVQYWRkaW5nPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9fXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInpvbmVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3pvbmVQb29sLmxlbmd0aD1NYXRoLm1pbih0aGlzLl96b25lUG9vbC5sZW5ndGgsdGhpcy5fem9uZXMubGVuZ3RoKSx0aGlzLl96b25lc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX3pvbmVzLmxlbmd0aD0wLHRoaXMuX3pvbmVQb29sSW5kZXg9MH0sZS5wcm90b3R5cGUuYWRkRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt2YXIgdCxpO2lmKGUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucyl7dHJ5e2Zvcih2YXIgbj1yKHRoaXMuX3pvbmVzKSxvPW4ubmV4dCgpOyFvLmRvbmU7bz1uLm5leHQoKSl7dmFyIHM9by52YWx1ZTtpZihzLmNvbG9yPT09ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLmNvbG9yJiZzLnBvc2l0aW9uPT09ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uKXtpZih0aGlzLl9saW5lSW50ZXJzZWN0c1pvbmUocyxlLm1hcmtlci5saW5lKSlyZXR1cm47aWYodGhpcy5fbGluZUFkamFjZW50VG9ab25lKHMsZS5tYXJrZXIubGluZSxlLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24pKXJldHVybiB2b2lkIHRoaXMuX2FkZExpbmVUb1pvbmUocyxlLm1hcmtlci5saW5lKX19fWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihpPW4ucmV0dXJuKSYmaS5jYWxsKG4pfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX1pZih0aGlzLl96b25lUG9vbEluZGV4PHRoaXMuX3pvbmVQb29sLmxlbmd0aClyZXR1cm4gdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0uY29sb3I9ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLmNvbG9yLHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLnBvc2l0aW9uPWUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbix0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5zdGFydEJ1ZmZlckxpbmU9ZS5tYXJrZXIubGluZSx0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5lbmRCdWZmZXJMaW5lPWUubWFya2VyLmxpbmUsdm9pZCB0aGlzLl96b25lcy5wdXNoKHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXgrK10pO3RoaXMuX3pvbmVzLnB1c2goe2NvbG9yOmUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5jb2xvcixwb3NpdGlvbjplLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24sc3RhcnRCdWZmZXJMaW5lOmUubWFya2VyLmxpbmUsZW5kQnVmZmVyTGluZTplLm1hcmtlci5saW5lfSksdGhpcy5fem9uZVBvb2wucHVzaCh0aGlzLl96b25lc1t0aGlzLl96b25lcy5sZW5ndGgtMV0pLHRoaXMuX3pvbmVQb29sSW5kZXgrK319LGUucHJvdG90eXBlLnNldFBhZGRpbmc9ZnVuY3Rpb24oZSl7dGhpcy5fbGluZVBhZGRpbmc9ZX0sZS5wcm90b3R5cGUuX2xpbmVJbnRlcnNlY3RzWm9uZT1mdW5jdGlvbihlLHQpe3JldHVybiB0Pj1lLnN0YXJ0QnVmZmVyTGluZSYmdDw9ZS5lbmRCdWZmZXJMaW5lfSxlLnByb3RvdHlwZS5fbGluZUFkamFjZW50VG9ab25lPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdD49ZS5zdGFydEJ1ZmZlckxpbmUtdGhpcy5fbGluZVBhZGRpbmdbcnx8ImZ1bGwiXSYmdDw9ZS5lbmRCdWZmZXJMaW5lK3RoaXMuX2xpbmVQYWRkaW5nW3J8fCJmdWxsIl19LGUucHJvdG90eXBlLl9hZGRMaW5lVG9ab25lPWZ1bmN0aW9uKGUsdCl7ZS5zdGFydEJ1ZmZlckxpbmU9TWF0aC5taW4oZS5zdGFydEJ1ZmZlckxpbmUsdCksZS5lbmRCdWZmZXJMaW5lPU1hdGgubWF4KGUuZW5kQnVmZmVyTGluZSx0KX0sZX0oKTt0LkNvbG9yWm9uZVN0b3JlPWl9LDU3NDQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuT3ZlcnZpZXdSdWxlclJlbmRlcmVyPXZvaWQgMDt2YXIgYz1yKDU4NzEpLGw9cigzNjU2KSxoPXIoNDcyNSksdT1yKDg0NCksZj1yKDI1ODUpLF89e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH0sZD17ZnVsbDowLGxlZnQ6MCxjZW50ZXI6MCxyaWdodDowfSxwPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9LHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyl7dmFyIGEsbD1lLmNhbGwodGhpcyl8fHRoaXM7bC5fdmlld3BvcnRFbGVtZW50PXQsbC5fc2NyZWVuRWxlbWVudD1yLGwuX2J1ZmZlclNlcnZpY2U9aSxsLl9kZWNvcmF0aW9uU2VydmljZT1uLGwuX3JlbmRlclNlcnZpY2U9byxsLl9vcHRpb25zU2VydmljZT1zLGwuX2NvbG9yWm9uZVN0b3JlPW5ldyBjLkNvbG9yWm9uZVN0b3JlLGwuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnM9ITAsbC5fc2hvdWxkVXBkYXRlQW5jaG9yPSEwLGwuX2xhc3RLbm93bkJ1ZmZlckxlbmd0aD0wLGwuX2NhbnZhcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSxsLl9jYW52YXMuY2xhc3NMaXN0LmFkZCgieHRlcm0tZGVjb3JhdGlvbi1vdmVydmlldy1ydWxlciIpLGwuX3JlZnJlc2hDYW52YXNEaW1lbnNpb25zKCksbnVsbD09PShhPWwuX3ZpZXdwb3J0RWxlbWVudC5wYXJlbnRFbGVtZW50KXx8dm9pZCAwPT09YXx8YS5pbnNlcnRCZWZvcmUobC5fY2FudmFzLGwuX3ZpZXdwb3J0RWxlbWVudCk7dmFyIGg9bC5fY2FudmFzLmdldENvbnRleHQoIjJkIik7aWYoIWgpdGhyb3cgbmV3IEVycm9yKCJDdHggY2Fubm90IGJlIG51bGwiKTtyZXR1cm4gbC5fY3R4PWgsbC5fcmVnaXN0ZXJEZWNvcmF0aW9uTGlzdGVuZXJzKCksbC5fcmVnaXN0ZXJCdWZmZXJDaGFuZ2VMaXN0ZW5lcnMoKSxsLl9yZWdpc3RlckRpbWVuc2lvbkNoYW5nZUxpc3RlbmVycygpLGx9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIl93aWR0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJXaWR0aHx8MH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5fcmVnaXN0ZXJEZWNvcmF0aW9uTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX3F1ZXVlUmVmcmVzaCh2b2lkIDAsITApfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLm9uRGVjb3JhdGlvblJlbW92ZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX3F1ZXVlUmVmcmVzaCh2b2lkIDAsITApfSkpKX0sdC5wcm90b3R5cGUuX3JlZ2lzdGVyQnVmZmVyQ2hhbmdlTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlKChmdW5jdGlvbigpe3JldHVybiBlLl9xdWV1ZVJlZnJlc2goKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oKXtlLl9jYW52YXMuc3R5bGUuZGlzcGxheT1lLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcj09PWUuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hbHQ/Im5vbmUiOiJibG9jayJ9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5vblNjcm9sbCgoZnVuY3Rpb24oKXtlLl9sYXN0S25vd25CdWZmZXJMZW5ndGghPT1lLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMubm9ybWFsLmxpbmVzLmxlbmd0aCYmKGUuX3JlZnJlc2hEcmF3SGVpZ2h0Q29uc3RhbnRzKCksZS5fcmVmcmVzaENvbG9yWm9uZVBhZGRpbmcoKSl9KSkpfSx0LnByb3RvdHlwZS5fcmVnaXN0ZXJEaW1lbnNpb25DaGFuZ2VMaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcigoZnVuY3Rpb24oKXtlLl9jb250YWluZXJIZWlnaHQmJmUuX2NvbnRhaW5lckhlaWdodD09PWUuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0fHwoZS5fcXVldWVSZWZyZXNoKCEwKSxlLl9jb250YWluZXJIZWlnaHQ9ZS5fc2NyZWVuRWxlbWVudC5jbGllbnRIZWlnaHQpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbih0KXsib3ZlcnZpZXdSdWxlcldpZHRoIj09PXQmJmUuX3F1ZXVlUmVmcmVzaCghMCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAsbC5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHdpbmRvdywicmVzaXplIiwoZnVuY3Rpb24oKXtlLl9xdWV1ZVJlZnJlc2goITApfSkpKSx0aGlzLl9xdWV1ZVJlZnJlc2goITApfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQ7bnVsbD09PSh0PXRoaXMuX2NhbnZhcyl8fHZvaWQgMD09PXR8fHQucmVtb3ZlKCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5fcmVmcmVzaERyYXdDb25zdGFudHM9ZnVuY3Rpb24oKXt2YXIgZT1NYXRoLmZsb29yKHRoaXMuX2NhbnZhcy53aWR0aC8zKSx0PU1hdGguY2VpbCh0aGlzLl9jYW52YXMud2lkdGgvMyk7ZC5mdWxsPXRoaXMuX2NhbnZhcy53aWR0aCxkLmxlZnQ9ZSxkLmNlbnRlcj10LGQucmlnaHQ9ZSx0aGlzLl9yZWZyZXNoRHJhd0hlaWdodENvbnN0YW50cygpLHAuZnVsbD0wLHAubGVmdD0wLHAuY2VudGVyPWQubGVmdCxwLnJpZ2h0PWQubGVmdCtkLmNlbnRlcn0sdC5wcm90b3R5cGUuX3JlZnJlc2hEcmF3SGVpZ2h0Q29uc3RhbnRzPWZ1bmN0aW9uKCl7Xy5mdWxsPU1hdGgucm91bmQoMip3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7dmFyIGU9dGhpcy5fY2FudmFzLmhlaWdodC90aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5sZW5ndGgsdD1NYXRoLnJvdW5kKE1hdGgubWF4KE1hdGgubWluKGUsMTIpLDYpKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTtfLmxlZnQ9dCxfLmNlbnRlcj10LF8ucmlnaHQ9dH0sdC5wcm90b3R5cGUuX3JlZnJlc2hDb2xvclpvbmVQYWRkaW5nPWZ1bmN0aW9uKCl7dGhpcy5fY29sb3Jab25lU3RvcmUuc2V0UGFkZGluZyh7ZnVsbDpNYXRoLmZsb29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoLyh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKl8uZnVsbCksbGVmdDpNYXRoLmZsb29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoLyh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKl8ubGVmdCksY2VudGVyOk1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqXy5jZW50ZXIpLHJpZ2h0Ok1hdGguZmxvb3IodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS5saW5lcy5sZW5ndGgvKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqXy5yaWdodCl9KSx0aGlzLl9sYXN0S25vd25CdWZmZXJMZW5ndGg9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm5vcm1hbC5saW5lcy5sZW5ndGh9LHQucHJvdG90eXBlLl9yZWZyZXNoQ2FudmFzRGltZW5zaW9ucz1mdW5jdGlvbigpe3RoaXMuX2NhbnZhcy5zdHlsZS53aWR0aD10aGlzLl93aWR0aCsicHgiLHRoaXMuX2NhbnZhcy53aWR0aD1NYXRoLnJvdW5kKHRoaXMuX3dpZHRoKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLl9jYW52YXMuc3R5bGUuaGVpZ2h0PXRoaXMuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0KyJweCIsdGhpcy5fY2FudmFzLmhlaWdodD1NYXRoLnJvdW5kKHRoaXMuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0KndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLl9yZWZyZXNoRHJhd0NvbnN0YW50cygpLHRoaXMuX3JlZnJlc2hDb2xvclpvbmVQYWRkaW5nKCl9LHQucHJvdG90eXBlLl9yZWZyZXNoRGVjb3JhdGlvbnM9ZnVuY3Rpb24oKXt2YXIgZSx0LHIsaSxuLG87dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucyYmdGhpcy5fcmVmcmVzaENhbnZhc0RpbWVuc2lvbnMoKSx0aGlzLl9jdHguY2xlYXJSZWN0KDAsMCx0aGlzLl9jYW52YXMud2lkdGgsdGhpcy5fY2FudmFzLmhlaWdodCksdGhpcy5fY29sb3Jab25lU3RvcmUuY2xlYXIoKTt0cnl7Zm9yKHZhciBzPWEodGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZGVjb3JhdGlvbnMpLGM9cy5uZXh0KCk7IWMuZG9uZTtjPXMubmV4dCgpKXt2YXIgbD1jLnZhbHVlO3RoaXMuX2NvbG9yWm9uZVN0b3JlLmFkZERlY29yYXRpb24obCl9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2MmJiFjLmRvbmUmJih0PXMucmV0dXJuKSYmdC5jYWxsKHMpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLl9jdHgubGluZVdpZHRoPTE7dmFyIGg9dGhpcy5fY29sb3Jab25lU3RvcmUuem9uZXM7dHJ5e2Zvcih2YXIgdT1hKGgpLGY9dS5uZXh0KCk7IWYuZG9uZTtmPXUubmV4dCgpKSJmdWxsIiE9PShwPWYudmFsdWUpLnBvc2l0aW9uJiZ0aGlzLl9yZW5kZXJDb2xvclpvbmUocCl9Y2F0Y2goZSl7cj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKGk9dS5yZXR1cm4pJiZpLmNhbGwodSl9ZmluYWxseXtpZihyKXRocm93IHIuZXJyb3J9fXRyeXtmb3IodmFyIF89YShoKSxkPV8ubmV4dCgpOyFkLmRvbmU7ZD1fLm5leHQoKSl7dmFyIHA7ImZ1bGwiPT09KHA9ZC52YWx1ZSkucG9zaXRpb24mJnRoaXMuX3JlbmRlckNvbG9yWm9uZShwKX19Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZCYmIWQuZG9uZSYmKG89Xy5yZXR1cm4pJiZvLmNhbGwoXyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXRoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnM9ITEsdGhpcy5fc2hvdWxkVXBkYXRlQW5jaG9yPSExfSx0LnByb3RvdHlwZS5fcmVuZGVyQ29sb3Jab25lPWZ1bmN0aW9uKGUpe3RoaXMuX2N0eC5maWxsU3R5bGU9ZS5jb2xvcix0aGlzLl9jdHguZmlsbFJlY3QocFtlLnBvc2l0aW9ufHwiZnVsbCJdLE1hdGgucm91bmQoKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqKGUuc3RhcnRCdWZmZXJMaW5lL3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoKS1fW2UucG9zaXRpb258fCJmdWxsIl0vMiksZFtlLnBvc2l0aW9ufHwiZnVsbCJdLE1hdGgucm91bmQoKHRoaXMuX2NhbnZhcy5oZWlnaHQtMSkqKChlLmVuZEJ1ZmZlckxpbmUtZS5zdGFydEJ1ZmZlckxpbmUpL3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoKStfW2UucG9zaXRpb258fCJmdWxsIl0pKX0sdC5wcm90b3R5cGUuX3F1ZXVlUmVmcmVzaD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucz1lfHx0aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zLHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvcj10fHx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3Isdm9pZCAwPT09dGhpcy5fYW5pbWF0aW9uRnJhbWUmJih0aGlzLl9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3IuX3JlZnJlc2hEZWNvcmF0aW9ucygpLHIuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKSl9LG8oW3MoMixmLklCdWZmZXJTZXJ2aWNlKSxzKDMsZi5JRGVjb3JhdGlvblNlcnZpY2UpLHMoNCxoLklSZW5kZXJTZXJ2aWNlKSxzKDUsZi5JT3B0aW9uc1NlcnZpY2UpXSx0KX0odS5EaXNwb3NhYmxlKTt0Lk92ZXJ2aWV3UnVsZXJSZW5kZXJlcj12fSwyOTUwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29tcG9zaXRpb25IZWxwZXI9dm9pZCAwO3ZhciBvPXIoNDcyNSkscz1yKDI1ODUpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksbixvKXt0aGlzLl90ZXh0YXJlYT1lLHRoaXMuX2NvbXBvc2l0aW9uVmlldz10LHRoaXMuX2J1ZmZlclNlcnZpY2U9cix0aGlzLl9vcHRpb25zU2VydmljZT1pLHRoaXMuX2NvcmVTZXJ2aWNlPW4sdGhpcy5fcmVuZGVyU2VydmljZT1vLHRoaXMuX2lzQ29tcG9zaW5nPSExLHRoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uPSExLHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb249e3N0YXJ0OjAsZW5kOjB9LHRoaXMuX2RhdGFBbHJlYWR5U2VudD0iIn1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0NvbXBvc2luZyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0NvbXBvc2luZ30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jb21wb3NpdGlvbnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5faXNDb21wb3Npbmc9ITAsdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5zdGFydD10aGlzLl90ZXh0YXJlYS52YWx1ZS5sZW5ndGgsdGhpcy5fY29tcG9zaXRpb25WaWV3LnRleHRDb250ZW50PSIiLHRoaXMuX2RhdGFBbHJlYWR5U2VudD0iIix0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LmFkZCgiYWN0aXZlIil9LGUucHJvdG90eXBlLmNvbXBvc2l0aW9udXBkYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fY29tcG9zaXRpb25WaWV3LnRleHRDb250ZW50PWUuZGF0YSx0aGlzLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoKSxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kPXQuX3RleHRhcmVhLnZhbHVlLmxlbmd0aH0pLDApfSxlLnByb3RvdHlwZS5jb21wb3NpdGlvbmVuZD1mdW5jdGlvbigpe3RoaXMuX2ZpbmFsaXplQ29tcG9zaXRpb24oITApfSxlLnByb3RvdHlwZS5rZXlkb3duPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2lzQ29tcG9zaW5nfHx0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbil7aWYoMjI5PT09ZS5rZXlDb2RlKXJldHVybiExO2lmKDE2PT09ZS5rZXlDb2RlfHwxNz09PWUua2V5Q29kZXx8MTg9PT1lLmtleUNvZGUpcmV0dXJuITE7dGhpcy5fZmluYWxpemVDb21wb3NpdGlvbighMSl9cmV0dXJuIDIyOSE9PWUua2V5Q29kZXx8KHRoaXMuX2hhbmRsZUFueVRleHRhcmVhQ2hhbmdlcygpLCExKX0sZS5wcm90b3R5cGUuX2ZpbmFsaXplQ29tcG9zaXRpb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLl9jb21wb3NpdGlvblZpZXcuY2xhc3NMaXN0LnJlbW92ZSgiYWN0aXZlIiksdGhpcy5faXNDb21wb3Npbmc9ITEsZSl7dmFyIHI9e3N0YXJ0OnRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsZW5kOnRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kfTt0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQuX2lzU2VuZGluZ0NvbXBvc2l0aW9uKXt0Ll9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMTt2YXIgZTtyLnN0YXJ0Kz10Ll9kYXRhQWxyZWFkeVNlbnQubGVuZ3RoLChlPXQuX2lzQ29tcG9zaW5nP3QuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyhyLnN0YXJ0LHIuZW5kKTp0Ll90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcoci5zdGFydCkpLmxlbmd0aD4wJiZ0Ll9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGUsITApfX0pLDApfWVsc2V7dGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb249ITE7dmFyIGk9dGhpcy5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQsdGhpcy5fY29tcG9zaXRpb25Qb3NpdGlvbi5lbmQpO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoaSwhMCl9fSxlLnByb3RvdHlwZS5faGFuZGxlQW55VGV4dGFyZWFDaGFuZ2VzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX3RleHRhcmVhLnZhbHVlO3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aWYoIWUuX2lzQ29tcG9zaW5nKXt2YXIgcj1lLl90ZXh0YXJlYS52YWx1ZS5yZXBsYWNlKHQsIiIpO3IubGVuZ3RoPjAmJihlLl9kYXRhQWxyZWFkeVNlbnQ9cixlLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHIsITApKX19KSwwKX0sZS5wcm90b3R5cGUudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKHRoaXMuX2lzQ29tcG9zaW5nKXtpZih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5pc0N1cnNvckluVmlld3BvcnQpe3ZhciByPU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpLGk9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQsbj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55KnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0LG89cip0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoO3RoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5sZWZ0PW8rInB4Iix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUudG9wPW4rInB4Iix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuaGVpZ2h0PWkrInB4Iix0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGluZUhlaWdodD1pKyJweCIsdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmZvbnRGYW1pbHk9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5LHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5mb250U2l6ZT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplKyJweCI7dmFyIHM9dGhpcy5fY29tcG9zaXRpb25WaWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMuX3RleHRhcmVhLnN0eWxlLmxlZnQ9bysicHgiLHRoaXMuX3RleHRhcmVhLnN0eWxlLnRvcD1uKyJweCIsdGhpcy5fdGV4dGFyZWEuc3R5bGUud2lkdGg9TWF0aC5tYXgocy53aWR0aCwxKSsicHgiLHRoaXMuX3RleHRhcmVhLnN0eWxlLmhlaWdodD1NYXRoLm1heChzLmhlaWdodCwxKSsicHgiLHRoaXMuX3RleHRhcmVhLnN0eWxlLmxpbmVIZWlnaHQ9cy5oZWlnaHQrInB4In1lfHxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0LnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHMoITApfSksMCl9fSxpKFtuKDIscy5JQnVmZmVyU2VydmljZSksbigzLHMuSU9wdGlvbnNTZXJ2aWNlKSxuKDQscy5JQ29yZVNlcnZpY2UpLG4oNSxvLklSZW5kZXJTZXJ2aWNlKV0sZSl9KCk7dC5Db21wb3NpdGlvbkhlbHBlcj1hfSw5ODA2OihlLHQpPT57ZnVuY3Rpb24gcihlLHQscil7dmFyIGk9ci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPWUuZ2V0Q29tcHV0ZWRTdHlsZShyKSxvPXBhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1sZWZ0IikpLHM9cGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXRvcCIpKTtyZXR1cm5bdC5jbGllbnRYLWkubGVmdC1vLHQuY2xpZW50WS1pLnRvcC1zXX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5nZXRSYXdCeXRlQ29vcmRzPXQuZ2V0Q29vcmRzPXQuZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQ9dm9pZCAwLHQuZ2V0Q29vcmRzUmVsYXRpdmVUb0VsZW1lbnQ9cix0LmdldENvb3Jkcz1mdW5jdGlvbihlLHQsaSxuLG8scyxhLGMsbCl7aWYocyl7dmFyIGg9cihlLHQsaSk7aWYoaClyZXR1cm4gaFswXT1NYXRoLmNlaWwoKGhbMF0rKGw/YS8yOjApKS9hKSxoWzFdPU1hdGguY2VpbChoWzFdL2MpLGhbMF09TWF0aC5taW4oTWF0aC5tYXgoaFswXSwxKSxuKyhsPzE6MCkpLGhbMV09TWF0aC5taW4oTWF0aC5tYXgoaFsxXSwxKSxvKSxofX0sdC5nZXRSYXdCeXRlQ29vcmRzPWZ1bmN0aW9uKGUpe2lmKGUpcmV0dXJue3g6ZVswXSszMix5OmVbMV0rMzJ9fX0sOTUwNDooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQubW92ZVRvQ2VsbFNlcXVlbmNlPXZvaWQgMDt2YXIgaT1yKDI1ODQpO2Z1bmN0aW9uIG4oZSx0LHIsaSl7dmFyIG49ZS1vKHIsZSksYT10LW8ocix0KSxoPU1hdGguYWJzKG4tYSktZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaT0wLG49ZS1vKHIsZSksYT10LW8ocix0KSxjPTA7YzxNYXRoLmFicyhuLWEpO2MrKyl7dmFyIGw9IkEiPT09cyhlLHQpPy0xOjEsaD1yLmJ1ZmZlci5saW5lcy5nZXQobitsKmMpOyhudWxsPT1oP3ZvaWQgMDpoLmlzV3JhcHBlZCkmJmkrK31yZXR1cm4gaX0oZSx0LHIpO3JldHVybiBsKGgsYyhzKGUsdCksaSkpfWZ1bmN0aW9uIG8oZSx0KXtmb3IodmFyIHI9MCxpPWUuYnVmZmVyLmxpbmVzLmdldCh0KSxuPW51bGw9PWk/dm9pZCAwOmkuaXNXcmFwcGVkO24mJnQ+PTAmJnQ8ZS5yb3dzOylyKyssbj1udWxsPT0oaT1lLmJ1ZmZlci5saW5lcy5nZXQoLS10KSk/dm9pZCAwOmkuaXNXcmFwcGVkO3JldHVybiByfWZ1bmN0aW9uIHMoZSx0KXtyZXR1cm4gZT50PyJBIjoiQiJ9ZnVuY3Rpb24gYShlLHQscixpLG4sbyl7Zm9yKHZhciBzPWUsYT10LGM9IiI7cyE9PXJ8fGEhPT1pOylzKz1uPzE6LTEsbiYmcz5vLmNvbHMtMT8oYys9by5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGEsITEsZSxzKSxzPTAsZT0wLGErKyk6IW4mJnM8MCYmKGMrPW8uYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhhLCExLDAsZSsxKSxlPXM9by5jb2xzLTEsYS0tKTtyZXR1cm4gYytvLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYSwhMSxlLHMpfWZ1bmN0aW9uIGMoZSx0KXt2YXIgcj10PyJPIjoiWyI7cmV0dXJuIGkuQzAuRVNDK3IrZX1mdW5jdGlvbiBsKGUsdCl7ZT1NYXRoLmZsb29yKGUpO2Zvcih2YXIgcj0iIixpPTA7aTxlO2krKylyKz10O3JldHVybiByfXQubW92ZVRvQ2VsbFNlcXVlbmNlPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBzLGg9ci5idWZmZXIueCx1PXIuYnVmZmVyLnk7aWYoIXIuYnVmZmVyLmhhc1Njcm9sbGJhY2spcmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGkscyxoKXtyZXR1cm4gMD09PW4odCxpLHMsaCkubGVuZ3RoPyIiOmwoYShlLHQsZSx0LW8ocyx0KSwhMSxzKS5sZW5ndGgsYygiRCIsaCkpfShoLHUsMCx0LHIsaSkrbih1LHQscixpKStmdW5jdGlvbihlLHQscixpLHMsaCl7dmFyIHU7dT1uKHQsaSxzLGgpLmxlbmd0aD4wP2ktbyhzLGkpOnQ7dmFyIGY9aSxfPWZ1bmN0aW9uKGUsdCxyLGkscyxhKXt2YXIgYztyZXR1cm4gYz1uKHIsaSxzLGEpLmxlbmd0aD4wP2ktbyhzLGkpOnQsZTxyJiZjPD1pfHxlPj1yJiZjPGk/IkMiOiJEIn0oZSx0LHIsaSxzLGgpO3JldHVybiBsKGEoZSx1LHIsZiwiQyI9PT1fLHMpLmxlbmd0aCxjKF8saCkpfShoLHUsZSx0LHIsaSk7aWYodT09PXQpcmV0dXJuIHM9aD5lPyJEIjoiQyIsbChNYXRoLmFicyhoLWUpLGMocyxpKSk7cz11PnQ/IkQiOiJDIjt2YXIgZj1NYXRoLmFicyh1LXQpO3JldHVybiBsKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQuY29scy1lfSh1PnQ/ZTpoLHIpKyhmLTEpKnIuY29scysxKygodT50P2g6ZSktMSksYyhzLGkpKX19LDQzODk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuIGk9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9MSxpPWFyZ3VtZW50cy5sZW5ndGg7cjxpO3IrKylmb3IodmFyIG4gaW4gdD1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlfSxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sbj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVGVybWluYWw9dm9pZCAwO3ZhciBvPXIoMzIzNikscz1yKDkwNDIpLGE9cig3OTc1KSxjPXIoNzA5MCksbD1yKDU3NDEpLGg9cig4Mjg1KSx1PVsiY29scyIsInJvd3MiXSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD10aGlzO3RoaXMuX2NvcmU9bmV3IG8uVGVybWluYWwoZSksdGhpcy5fYWRkb25NYW5hZ2VyPW5ldyBsLkFkZG9uTWFuYWdlcix0aGlzLl9wdWJsaWNPcHRpb25zPWkoe30sdGhpcy5fY29yZS5vcHRpb25zKTt2YXIgcj1mdW5jdGlvbihlKXtyZXR1cm4gdC5fY29yZS5vcHRpb25zW2VdfSxuPWZ1bmN0aW9uKGUscil7dC5fY2hlY2tSZWFkb25seU9wdGlvbnMoZSksdC5fY29yZS5vcHRpb25zW2VdPXJ9O2Zvcih2YXIgcyBpbiB0aGlzLl9jb3JlLm9wdGlvbnMpe3ZhciBhPXtnZXQ6ci5iaW5kKHRoaXMscyksc2V0Om4uYmluZCh0aGlzLHMpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5fcHVibGljT3B0aW9ucyxzLGEpfX1yZXR1cm4gZS5wcm90b3R5cGUuX2NoZWNrUmVhZG9ubHlPcHRpb25zPWZ1bmN0aW9uKGUpe2lmKHUuaW5jbHVkZXMoZSkpdGhyb3cgbmV3IEVycm9yKCdPcHRpb24gIicrZSsnIiBjYW4gb25seSBiZSBzZXQgaW4gdGhlIGNvbnN0cnVjdG9yJyl9LGUucHJvdG90eXBlLl9jaGVja1Byb3Bvc2VkQXBpPWZ1bmN0aW9uKCl7aWYoIXRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbGxvd1Byb3Bvc2VkQXBpKXRocm93IG5ldyBFcnJvcigiWW91IG11c3Qgc2V0IHRoZSBhbGxvd1Byb3Bvc2VkQXBpIG9wdGlvbiB0byB0cnVlIHRvIHVzZSBwcm9wb3NlZCBBUEkiKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkJlbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkJlbGx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkJpbmFyeSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uQmluYXJ5fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25DdXJzb3JNb3ZlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25DdXJzb3JNb3ZlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25EYXRhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25EYXRhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25LZXkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbktleX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uTGluZUZlZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkxpbmVGZWVkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25SZW5kZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vblJlbmRlcn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uUmVzaXplIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25SZXNpemV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblNjcm9sbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uU2Nyb2xsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25TZWxlY3Rpb25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vblNlbGVjdGlvbkNoYW5nZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uVGl0bGVDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vblRpdGxlQ2hhbmdlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25Xcml0ZVBhcnNlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uV3JpdGVQYXJzZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJlbGVtZW50Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuZWxlbWVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInBhcnNlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fcGFyc2VyfHwodGhpcy5fcGFyc2VyPW5ldyBhLlBhcnNlckFwaSh0aGlzLl9jb3JlKSksdGhpcy5fcGFyc2VyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidW5pY29kZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksbmV3IGMuVW5pY29kZUFwaSh0aGlzLl9jb3JlKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInRleHRhcmVhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUudGV4dGFyZWF9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJyb3dzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUucm93c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImNvbHMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5jb2xzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYnVmZmVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9idWZmZXJ8fCh0aGlzLl9idWZmZXI9bmV3IGguQnVmZmVyTmFtZXNwYWNlQXBpKHRoaXMuX2NvcmUpKSx0aGlzLl9idWZmZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJtYXJrZXJzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLm1hcmtlcnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJtb2RlcyIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX2NvcmUuY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLHQ9Im5vbmUiO3N3aXRjaCh0aGlzLl9jb3JlLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wpe2Nhc2UiWDEwIjp0PSJ4MTAiO2JyZWFrO2Nhc2UiVlQyMDAiOnQ9InZ0MjAwIjticmVhaztjYXNlIkRSQUciOnQ9ImRyYWciO2JyZWFrO2Nhc2UiQU5ZIjp0PSJhbnkifXJldHVybnthcHBsaWNhdGlvbkN1cnNvcktleXNNb2RlOmUuYXBwbGljYXRpb25DdXJzb3JLZXlzLGFwcGxpY2F0aW9uS2V5cGFkTW9kZTplLmFwcGxpY2F0aW9uS2V5cGFkLGJyYWNrZXRlZFBhc3RlTW9kZTplLmJyYWNrZXRlZFBhc3RlTW9kZSxpbnNlcnRNb2RlOnRoaXMuX2NvcmUuY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZSxtb3VzZVRyYWNraW5nTW9kZTp0LG9yaWdpbk1vZGU6ZS5vcmlnaW4scmV2ZXJzZVdyYXBhcm91bmRNb2RlOmUucmV2ZXJzZVdyYXBhcm91bmQsc2VuZEZvY3VzTW9kZTplLnNlbmRGb2N1cyx3cmFwYXJvdW5kTW9kZTplLndyYXBhcm91bmR9fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib3B0aW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wdWJsaWNPcHRpb25zfSxzZXQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpdGhpcy5fcHVibGljT3B0aW9uc1t0XT1lW3RdfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmJsdXI9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmJsdXIoKX0sZS5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmZvY3VzKCl9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUsdCksdGhpcy5fY29yZS5yZXNpemUoZSx0KX0sZS5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihlKXt0aGlzLl9jb3JlLm9wZW4oZSl9LGUucHJvdG90eXBlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9jb3JlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcihlKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLnJlZ2lzdGVyTGlua01hdGNoZXIoZSx0LHIpfSxlLnByb3RvdHlwZS5kZXJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUuZGVyZWdpc3RlckxpbmtNYXRjaGVyKGUpfSxlLnByb3RvdHlwZS5yZWdpc3RlckxpbmtQcm92aWRlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUucmVnaXN0ZXJMaW5rUHJvdmlkZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcihlKX0sZS5wcm90b3R5cGUuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcj1mdW5jdGlvbihlKXt0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5kZXJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyKGUpfSxlLnByb3RvdHlwZS5yZWdpc3Rlck1hcmtlcj1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9MCksdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX3ZlcmlmeUludGVnZXJzKGUpLHRoaXMuX2NvcmUuYWRkTWFya2VyKGUpfSxlLnByb3RvdHlwZS5yZWdpc3RlckRlY29yYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQscixpO3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fdmVyaWZ5UG9zaXRpdmVJbnRlZ2VycyhudWxsIT09KHQ9ZS54KSYmdm9pZCAwIT09dD90OjAsbnVsbCE9PShyPWUud2lkdGgpJiZ2b2lkIDAhPT1yP3I6MCxudWxsIT09KGk9ZS5oZWlnaHQpJiZ2b2lkIDAhPT1pP2k6MCksdGhpcy5fY29yZS5yZWdpc3RlckRlY29yYXRpb24oZSl9LGUucHJvdG90eXBlLmFkZE1hcmtlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5yZWdpc3Rlck1hcmtlcihlKX0sZS5wcm90b3R5cGUuaGFzU2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuaGFzU2VsZWN0aW9uKCl9LGUucHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbihlLHQscil7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSx0LHIpLHRoaXMuX2NvcmUuc2VsZWN0KGUsdCxyKX0sZS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uKCl9LGUucHJvdG90eXBlLmdldFNlbGVjdGlvblBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuZ2V0U2VsZWN0aW9uUG9zaXRpb24oKX0sZS5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmNsZWFyU2VsZWN0aW9uKCl9LGUucHJvdG90eXBlLnNlbGVjdEFsbD1mdW5jdGlvbigpe3RoaXMuX2NvcmUuc2VsZWN0QWxsKCl9LGUucHJvdG90eXBlLnNlbGVjdExpbmVzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSx0KSx0aGlzLl9jb3JlLnNlbGVjdExpbmVzKGUsdCl9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9hZGRvbk1hbmFnZXIuZGlzcG9zZSgpLHRoaXMuX2NvcmUuZGlzcG9zZSgpfSxlLnByb3RvdHlwZS5zY3JvbGxMaW5lcz1mdW5jdGlvbihlKXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlKSx0aGlzLl9jb3JlLnNjcm9sbExpbmVzKGUpfSxlLnByb3RvdHlwZS5zY3JvbGxQYWdlcz1mdW5jdGlvbihlKXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlKSx0aGlzLl9jb3JlLnNjcm9sbFBhZ2VzKGUpfSxlLnByb3RvdHlwZS5zY3JvbGxUb1RvcD1mdW5jdGlvbigpe3RoaXMuX2NvcmUuc2Nyb2xsVG9Ub3AoKX0sZS5wcm90b3R5cGUuc2Nyb2xsVG9Cb3R0b209ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnNjcm9sbFRvQm90dG9tKCl9LGUucHJvdG90eXBlLnNjcm9sbFRvTGluZT1mdW5jdGlvbihlKXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlKSx0aGlzLl9jb3JlLnNjcm9sbFRvTGluZShlKX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLmNsZWFyKCl9LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fY29yZS53cml0ZShlLHQpfSxlLnByb3RvdHlwZS53cml0ZVV0Zjg9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb3JlLndyaXRlKGUsdCl9LGUucHJvdG90eXBlLndyaXRlbG49ZnVuY3Rpb24oZSx0KXt0aGlzLl9jb3JlLndyaXRlKGUpLHRoaXMuX2NvcmUud3JpdGUoIlxyXG4iLHQpfSxlLnByb3RvdHlwZS5wYXN0ZT1mdW5jdGlvbihlKXt0aGlzLl9jb3JlLnBhc3RlKGUpfSxlLnByb3RvdHlwZS5nZXRPcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvcmUub3B0aW9uc1NlcnZpY2UuZ2V0T3B0aW9uKGUpfSxlLnByb3RvdHlwZS5zZXRPcHRpb249ZnVuY3Rpb24oZSx0KXt0aGlzLl9jaGVja1JlYWRvbmx5T3B0aW9ucyhlKSx0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLnNldE9wdGlvbihlLHQpfSxlLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUsdCl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSx0KSx0aGlzLl9jb3JlLnJlZnJlc2goZSx0KX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnJlc2V0KCl9LGUucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5jbGVhclRleHR1cmVBdGxhcygpfSxlLnByb3RvdHlwZS5sb2FkQWRkb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FkZG9uTWFuYWdlci5sb2FkQWRkb24odGhpcyxlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsInN0cmluZ3MiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fdmVyaWZ5SW50ZWdlcnM9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxyPVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKXJbaV09YXJndW1lbnRzW2ldO3RyeXtmb3IodmFyIG89bihyKSxzPW8ubmV4dCgpOyFzLmRvbmU7cz1vLm5leHQoKSl7dmFyIGE9cy52YWx1ZTtpZihhPT09MS8wfHxpc05hTihhKXx8YSUxIT0wKXRocm93IG5ldyBFcnJvcigiVGhpcyBBUEkgb25seSBhY2NlcHRzIGludGVnZXJzIil9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e3MmJiFzLmRvbmUmJih0PW8ucmV0dXJuKSYmdC5jYWxsKG8pfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19LGUucHJvdG90eXBlLl92ZXJpZnlQb3NpdGl2ZUludGVnZXJzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQscj1bXSxpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ldPWFyZ3VtZW50c1tpXTt0cnl7Zm9yKHZhciBvPW4ocikscz1vLm5leHQoKTshcy5kb25lO3M9by5uZXh0KCkpe3ZhciBhPXMudmFsdWU7aWYoYSYmKGE9PT0xLzB8fGlzTmFOKGEpfHxhJTEhPTB8fGE8MCkpdGhyb3cgbmV3IEVycm9yKCJUaGlzIEFQSSBvbmx5IGFjY2VwdHMgcG9zaXRpdmUgaW50ZWdlcnMiKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7cyYmIXMuZG9uZSYmKHQ9by5yZXR1cm4pJiZ0LmNhbGwobyl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sZX0oKTt0LlRlcm1pbmFsPWZ9LDE1NDY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CYXNlUmVuZGVyTGF5ZXI9dm9pZCAwO3ZhciBuPXIoNjQzKSxvPXIoODgwMykscz1yKDE0MjApLGE9cigzNzM0KSxjPXIoMTc1MiksbD1yKDgwNTUpLGg9cig5NjMxKSx1PXIoODk3OCksZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSxuLG8scyxhLGMpe3RoaXMuX2NvbnRhaW5lcj1lLHRoaXMuX2FscGhhPWksdGhpcy5fY29sb3JzPW4sdGhpcy5fcmVuZGVyZXJJZD1vLHRoaXMuX2J1ZmZlclNlcnZpY2U9cyx0aGlzLl9vcHRpb25zU2VydmljZT1hLHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlPWMsdGhpcy5fc2NhbGVkQ2hhcldpZHRoPTAsdGhpcy5fc2NhbGVkQ2hhckhlaWdodD0wLHRoaXMuX3NjYWxlZENlbGxXaWR0aD0wLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQ9MCx0aGlzLl9zY2FsZWRDaGFyTGVmdD0wLHRoaXMuX3NjYWxlZENoYXJUb3A9MCx0aGlzLl9jb2x1bW5TZWxlY3RNb2RlPSExLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXI9e2NoYXJzOiIiLGNvZGU6MCxiZzowLGZnOjAsYm9sZDohMSxkaW06ITEsaXRhbGljOiExfSx0aGlzLl9jYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksdGhpcy5fY2FudmFzLmNsYXNzTGlzdC5hZGQoInh0ZXJtLSIrdCsiLWxheWVyIiksdGhpcy5fY2FudmFzLnN0eWxlLnpJbmRleD1yLnRvU3RyaW5nKCksdGhpcy5faW5pdENhbnZhcygpLHRoaXMuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGU7KDAsaC5yZW1vdmVFbGVtZW50RnJvbVBhcmVudCkodGhpcy5fY2FudmFzKSxudWxsPT09KGU9dGhpcy5fY2hhckF0bGFzKXx8dm9pZCAwPT09ZXx8ZS5kaXNwb3NlKCl9LGUucHJvdG90eXBlLl9pbml0Q2FudmFzPWZ1bmN0aW9uKCl7dGhpcy5fY3R4PSgwLGMudGhyb3dJZkZhbHN5KSh0aGlzLl9jYW52YXMuZ2V0Q29udGV4dCgiMmQiLHthbHBoYTp0aGlzLl9hbHBoYX0pKSx0aGlzLl9hbHBoYXx8dGhpcy5fY2xlYXJBbGwoKX0sZS5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5vbkZvY3VzPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5vbkN1cnNvck1vdmU9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLm9uR3JpZENoYW5nZWQ9ZnVuY3Rpb24oZSx0KXt9LGUucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9ITEpLHRoaXMuX3NlbGVjdGlvblN0YXJ0PWUsdGhpcy5fc2VsZWN0aW9uRW5kPXQsdGhpcy5fY29sdW1uU2VsZWN0TW9kZT1yfSxlLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVmcmVzaENoYXJBdGxhcyhlKX0sZS5wcm90b3R5cGUuX3NldFRyYW5zcGFyZW5jeT1mdW5jdGlvbihlKXtpZihlIT09dGhpcy5fYWxwaGEpe3ZhciB0PXRoaXMuX2NhbnZhczt0aGlzLl9hbHBoYT1lLHRoaXMuX2NhbnZhcz10aGlzLl9jYW52YXMuY2xvbmVOb2RlKCksdGhpcy5faW5pdENhbnZhcygpLHRoaXMuX2NvbnRhaW5lci5yZXBsYWNlQ2hpbGQodGhpcy5fY2FudmFzLHQpLHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGhpcy5fY29sb3JzKSx0aGlzLm9uR3JpZENoYW5nZWQoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSl9fSxlLnByb3RvdHlwZS5fcmVmcmVzaENoYXJBdGxhcz1mdW5jdGlvbihlKXt0aGlzLl9zY2FsZWRDaGFyV2lkdGg8PTAmJnRoaXMuX3NjYWxlZENoYXJIZWlnaHQ8PTB8fCh0aGlzLl9jaGFyQXRsYXM9KDAscy5hY3F1aXJlQ2hhckF0bGFzKSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLHRoaXMuX3JlbmRlcmVySWQsZSx0aGlzLl9zY2FsZWRDaGFyV2lkdGgsdGhpcy5fc2NhbGVkQ2hhckhlaWdodCksdGhpcy5fY2hhckF0bGFzLndhcm1VcCgpKX0sZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUpe3RoaXMuX3NjYWxlZENlbGxXaWR0aD1lLnNjYWxlZENlbGxXaWR0aCx0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0PWUuc2NhbGVkQ2VsbEhlaWdodCx0aGlzLl9zY2FsZWRDaGFyV2lkdGg9ZS5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fc2NhbGVkQ2hhckhlaWdodD1lLnNjYWxlZENoYXJIZWlnaHQsdGhpcy5fc2NhbGVkQ2hhckxlZnQ9ZS5zY2FsZWRDaGFyTGVmdCx0aGlzLl9zY2FsZWRDaGFyVG9wPWUuc2NhbGVkQ2hhclRvcCx0aGlzLl9jYW52YXMud2lkdGg9ZS5zY2FsZWRDYW52YXNXaWR0aCx0aGlzLl9jYW52YXMuaGVpZ2h0PWUuc2NhbGVkQ2FudmFzSGVpZ2h0LHRoaXMuX2NhbnZhcy5zdHlsZS53aWR0aD1lLmNhbnZhc1dpZHRoKyJweCIsdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodD1lLmNhbnZhc0hlaWdodCsicHgiLHRoaXMuX2FscGhhfHx0aGlzLl9jbGVhckFsbCgpLHRoaXMuX3JlZnJlc2hDaGFyQXRsYXModGhpcy5fY29sb3JzKX0sZS5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fY2hhckF0bGFzKXx8dm9pZCAwPT09ZXx8ZS5jbGVhcigpfSxlLnByb3RvdHlwZS5fZmlsbENlbGxzPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuX2N0eC5maWxsUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsaSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KX0sZS5wcm90b3R5cGUuX2ZpbGxNaWRkbGVMaW5lQXRDZWxscz1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9MSk7dmFyIGk9TWF0aC5jZWlsKC41KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQpO3RoaXMuX2N0eC5maWxsUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCwodCsxKSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LWktd2luZG93LmRldmljZVBpeGVsUmF0aW8scip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsd2luZG93LmRldmljZVBpeGVsUmF0aW8pfSxlLnByb3RvdHlwZS5fZmlsbEJvdHRvbUxpbmVBdENlbGxzPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0xKSx0aGlzLl9jdHguZmlsbFJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsKHQrMSkqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodC13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby0xLHIqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKX0sZS5wcm90b3R5cGUuX2ZpbGxMZWZ0TGluZUF0Q2VsbD1mdW5jdGlvbihlLHQscil7dGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCx3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbypyLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpfSxlLnByb3RvdHlwZS5fc3Ryb2tlUmVjdEF0Q2VsbD1mdW5jdGlvbihlLHQscixpKXt0aGlzLl9jdHgubGluZVdpZHRoPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMuX2N0eC5zdHJva2VSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoK3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLzIsdCp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0K3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLzIscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgtd2luZG93LmRldmljZVBpeGVsUmF0aW8saSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKX0sZS5wcm90b3R5cGUuX2NsZWFyQWxsPWZ1bmN0aW9uKCl7dGhpcy5fYWxwaGE/dGhpcy5fY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5fY2FudmFzLndpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQpOih0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcyx0aGlzLl9jdHguZmlsbFJlY3QoMCwwLHRoaXMuX2NhbnZhcy53aWR0aCx0aGlzLl9jYW52YXMuaGVpZ2h0KSl9LGUucHJvdG90eXBlLl9jbGVhckNlbGxzPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuX2FscGhhP3RoaXMuX2N0eC5jbGVhclJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdCp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHIqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLGkqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCk6KHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmJhY2tncm91bmQuY3NzLHRoaXMuX2N0eC5maWxsUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQscip0aGlzLl9zY2FsZWRDZWxsV2lkdGgsaSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSl9LGUucHJvdG90eXBlLl9maWxsQ2hhclRydWVDb2xvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY3R4LmZvbnQ9dGhpcy5fZ2V0Rm9udCghMSwhMSksdGhpcy5fY3R4LnRleHRCYXNlbGluZT1vLlRFWFRfQkFTRUxJTkUsdGhpcy5fY2xpcFJvdyhyKTt2YXIgaT0hMTshMSE9PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3VzdG9tR2x5cGhzJiYoaT0oMCx1LnRyeURyYXdDdXN0b21DaGFyKSh0aGlzLl9jdHgsZS5nZXRDaGFycygpLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCx0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCkpLGl8fHRoaXMuX2N0eC5maWxsVGV4dChlLmdldENoYXJzKCksdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgrdGhpcy5fc2NhbGVkQ2hhckxlZnQscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0K3RoaXMuX3NjYWxlZENoYXJUb3ArdGhpcy5fc2NhbGVkQ2hhckhlaWdodCl9LGUucHJvdG90eXBlLl9kcmF3Q2hhcnM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBzLGEsYyxsPXRoaXMuX2dldENvbnRyYXN0Q29sb3IoZSx0LHIpO2lmKGx8fGUuaXNGZ1JHQigpfHxlLmlzQmdSR0IoKSl0aGlzLl9kcmF3VW5jYWNoZWRDaGFycyhlLHQscixsKTtlbHNle3ZhciBoLHU7ZS5pc0ludmVyc2UoKT8oaD1lLmlzQmdEZWZhdWx0KCk/by5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SOmUuZ2V0QmdDb2xvcigpLHU9ZS5pc0ZnRGVmYXVsdCgpP28uSU5WRVJURURfREVGQVVMVF9DT0xPUjplLmdldEZnQ29sb3IoKSk6KHU9ZS5pc0JnRGVmYXVsdCgpP24uREVGQVVMVF9DT0xPUjplLmdldEJnQ29sb3IoKSxoPWUuaXNGZ0RlZmF1bHQoKT9uLkRFRkFVTFRfQ09MT1I6ZS5nZXRGZ0NvbG9yKCkpLGgrPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJmg8OD84OjAsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5jaGFycz1lLmdldENoYXJzKCl8fG4uV0hJVEVTUEFDRV9DRUxMX0NIQVIsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5jb2RlPWUuZ2V0Q29kZSgpfHxuLldISVRFU1BBQ0VfQ0VMTF9DT0RFLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuYmc9dSx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmZnPWgsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5ib2xkPSEhZS5pc0JvbGQoKSx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmRpbT0hIWUuaXNEaW0oKSx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLml0YWxpYz0hIWUuaXNJdGFsaWMoKTt2YXIgZj0hMTt0cnl7Zm9yKHZhciBfPWkodGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZ2V0RGVjb3JhdGlvbnNBdENlbGwodCxyKSksZD1fLm5leHQoKTshZC5kb25lO2Q9Xy5uZXh0KCkpe3ZhciBwPWQudmFsdWU7aWYocC5iYWNrZ3JvdW5kQ29sb3JSR0J8fHAuZm9yZWdyb3VuZENvbG9yUkdCKXtmPSEwO2JyZWFrfX19Y2F0Y2goZSl7cz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZCYmIWQuZG9uZSYmKGE9Xy5yZXR1cm4pJiZhLmNhbGwoXyl9ZmluYWxseXtpZihzKXRocm93IHMuZXJyb3J9fSFmJiYobnVsbD09PShjPXRoaXMuX2NoYXJBdGxhcyl8fHZvaWQgMD09PWM/dm9pZCAwOmMuZHJhdyh0aGlzLl9jdHgsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllcix0KnRoaXMuX3NjYWxlZENlbGxXaWR0aCt0aGlzLl9zY2FsZWRDaGFyTGVmdCxyKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQrdGhpcy5fc2NhbGVkQ2hhclRvcCkpfHx0aGlzLl9kcmF3VW5jYWNoZWRDaGFycyhlLHQscil9fSxlLnByb3RvdHlwZS5fZHJhd1VuY2FjaGVkQ2hhcnM9ZnVuY3Rpb24oZSx0LHIsaSl7aWYodGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguZm9udD10aGlzLl9nZXRGb250KCEhZS5pc0JvbGQoKSwhIWUuaXNJdGFsaWMoKSksdGhpcy5fY3R4LnRleHRCYXNlbGluZT1vLlRFWFRfQkFTRUxJTkUsZS5pc0ludmVyc2UoKSlpZihpKXRoaXMuX2N0eC5maWxsU3R5bGU9aS5jc3M7ZWxzZSBpZihlLmlzQmdEZWZhdWx0KCkpdGhpcy5fY3R4LmZpbGxTdHlsZT1sLmNvbG9yLm9wYXF1ZSh0aGlzLl9jb2xvcnMuYmFja2dyb3VuZCkuY3NzO2Vsc2UgaWYoZS5pc0JnUkdCKCkpdGhpcy5fY3R4LmZpbGxTdHlsZT0icmdiKCIrYS5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRCZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI7ZWxzZXt2YXIgbj1lLmdldEJnQ29sb3IoKTt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZuPDgmJihuKz04KSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5hbnNpW25dLmNzc31lbHNlIGlmKGkpdGhpcy5fY3R4LmZpbGxTdHlsZT1pLmNzcztlbHNlIGlmKGUuaXNGZ0RlZmF1bHQoKSl0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztlbHNlIGlmKGUuaXNGZ1JHQigpKXRoaXMuX2N0eC5maWxsU3R5bGU9InJnYigiK2EuQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0RmdDb2xvcigpKS5qb2luKCIsIikrIikiO2Vsc2V7dmFyIHM9ZS5nZXRGZ0NvbG9yKCk7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmZS5pc0JvbGQoKSYmczw4JiYocys9OCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYW5zaVtzXS5jc3N9dGhpcy5fY2xpcFJvdyhyKSxlLmlzRGltKCkmJih0aGlzLl9jdHguZ2xvYmFsQWxwaGE9by5ESU1fT1BBQ0lUWSk7dmFyIGM9ITE7ITEhPT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1c3RvbUdseXBocyYmKGM9KDAsdS50cnlEcmF3Q3VzdG9tQ2hhcikodGhpcy5fY3R4LGUuZ2V0Q2hhcnMoKSx0KnRoaXMuX3NjYWxlZENlbGxXaWR0aCxyKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQsdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpKSxjfHx0aGlzLl9jdHguZmlsbFRleHQoZS5nZXRDaGFycygpLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoK3RoaXMuX3NjYWxlZENoYXJMZWZ0LHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCt0aGlzLl9zY2FsZWRDaGFyVG9wK3RoaXMuX3NjYWxlZENoYXJIZWlnaHQpLHRoaXMuX2N0eC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLl9jbGlwUm93PWZ1bmN0aW9uKGUpe3RoaXMuX2N0eC5iZWdpblBhdGgoKSx0aGlzLl9jdHgucmVjdCgwLGUqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpLHRoaXMuX2N0eC5jbGlwKCl9LGUucHJvdG90eXBlLl9nZXRGb250PWZ1bmN0aW9uKGUsdCl7cmV0dXJuKHQ/Iml0YWxpYyI6IiIpKyIgIisoZT90aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHRCb2xkOnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodCkrIiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUqd2luZG93LmRldmljZVBpeGVsUmF0aW8rInB4ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5fSxlLnByb3RvdHlwZS5fZ2V0Q29udHJhc3RDb2xvcj1mdW5jdGlvbihlLHQscil7dmFyIG4sbyxzLGEsaD0hMTt0cnl7Zm9yKHZhciB1PWkodGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZ2V0RGVjb3JhdGlvbnNBdENlbGwodCxyKSksZj11Lm5leHQoKTshZi5kb25lO2Y9dS5uZXh0KCkpe3ZhciBfPWYudmFsdWU7InRvcCIhPT1fLm9wdGlvbnMubGF5ZXImJmh8fChfLmJhY2tncm91bmRDb2xvclJHQiYmKHM9Xy5iYWNrZ3JvdW5kQ29sb3JSR0IucmdiYSksXy5mb3JlZ3JvdW5kQ29sb3JSR0ImJihhPV8uZm9yZWdyb3VuZENvbG9yUkdCLnJnYmEpLGg9InRvcCI9PT1fLm9wdGlvbnMubGF5ZXIpfX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtmJiYhZi5kb25lJiYobz11LnJldHVybikmJm8uY2FsbCh1KX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19aWYoaHx8dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQmJnRoaXMuX2lzQ2VsbEluU2VsZWN0aW9uKHQscikmJihhPXRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kLnJnYmEpLHN8fGF8fDEhPT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvJiYhKDAsYy5leGNsdWRlRnJvbUNvbnRyYXN0UmF0aW9EZW1hbmRzKShlLmdldENvZGUoKSkpe2lmKCFzJiYhYSl7dmFyIGQ9dGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuZ2V0Q29sb3IoZS5iZyxlLmZnKTtpZih2b2lkIDAhPT1kKXJldHVybiBkfHx2b2lkIDB9dmFyIHA9ZS5nZXRGZ0NvbG9yKCksdj1lLmdldEZnQ29sb3JNb2RlKCkseT1lLmdldEJnQ29sb3IoKSxnPWUuZ2V0QmdDb2xvck1vZGUoKSxtPSEhZS5pc0ludmVyc2UoKSxiPSEhZS5pc0ludmVyc2UoKTtpZihtKXt2YXIgUz1wO3A9eSx5PVM7dmFyIEM9djt2PWcsZz1DfXZhciB3PXRoaXMuX3Jlc29sdmVCYWNrZ3JvdW5kUmdiYSh2b2lkIDAhPT1zPzUwMzMxNjQ4OmcsbnVsbCE9cz9zOnksbSksTD10aGlzLl9yZXNvbHZlRm9yZWdyb3VuZFJnYmEodixwLG0sYiksRT1sLnJnYmEuZW5zdXJlQ29udHJhc3RSYXRpbyhudWxsIT1zP3M6dyxudWxsIT1hP2E6TCx0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvKTtpZighRSl7aWYoIWEpcmV0dXJuIHZvaWQgdGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q29sb3IoZS5iZyxlLmZnLG51bGwpO0U9YX12YXIgeD17Y3NzOmwuY2hhbm5lbHMudG9Dc3MoRT4+MjQmMjU1LEU+PjE2JjI1NSxFPj44JjI1NSkscmdiYTpFfTtyZXR1cm4gc3x8YXx8dGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q29sb3IoZS5iZyxlLmZnLHgpLHh9fSxlLnByb3RvdHlwZS5fcmVzb2x2ZUJhY2tncm91bmRSZ2JhPWZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZSl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiB0aGlzLl9jb2xvcnMuYW5zaVt0XS5yZ2JhO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIHQ8PDg7ZGVmYXVsdDpyZXR1cm4gcj90aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5yZ2JhOnRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLnJnYmF9fSxlLnByb3RvdHlwZS5fcmVzb2x2ZUZvcmVncm91bmRSZ2JhPWZ1bmN0aW9uKGUsdCxyLGkpe3N3aXRjaChlKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmkmJnQ8OCYmKHQrPTgpLHRoaXMuX2NvbG9ycy5hbnNpW3RdLnJnYmE7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gdDw8ODtkZWZhdWx0OnJldHVybiByP3RoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLnJnYmE6dGhpcy5fY29sb3JzLmZvcmVncm91bmQucmdiYX19LGUucHJvdG90eXBlLl9pc0NlbGxJblNlbGVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX3NlbGVjdGlvblN0YXJ0LGk9dGhpcy5fc2VsZWN0aW9uRW5kO3JldHVybiEoIXJ8fCFpKSYmKHRoaXMuX2NvbHVtblNlbGVjdE1vZGU/ZT49clswXSYmdD49clsxXSYmZTxpWzBdJiZ0PGlbMV06dD5yWzFdJiZ0PGlbMV18fHJbMV09PT1pWzFdJiZ0PT09clsxXSYmZT49clswXSYmZTxpWzBdfHxyWzFdPGlbMV0mJnQ9PT1pWzFdJiZlPGlbMF18fHJbMV08aVsxXSYmdD09PXJbMV0mJmU+PXJbMF0pfSxlfSgpO3QuQmFzZVJlbmRlckxheWVyPWZ9LDI1MTI6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ3Vyc29yUmVuZGVyTGF5ZXI9dm9pZCAwO3ZhciBhPXIoMTU0NiksYz1yKDUxMSksbD1yKDI1ODUpLGg9cig0NzI1KSx1PTYwMCxmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxsLGgsdSl7dmFyIGY9ZS5jYWxsKHRoaXMsdCwiY3Vyc29yIixyLCEwLGksbixzLGEsdSl8fHRoaXM7cmV0dXJuIGYuX29uUmVxdWVzdFJlZHJhdz1vLGYuX2NvcmVTZXJ2aWNlPWwsZi5fY29yZUJyb3dzZXJTZXJ2aWNlPWgsZi5fY2VsbD1uZXcgYy5DZWxsRGF0YSxmLl9zdGF0ZT17eDowLHk6MCxpc0ZvY3VzZWQ6ITEsc3R5bGU6IiIsd2lkdGg6MH0sZi5fY3Vyc29yUmVuZGVyZXJzPXtiYXI6Zi5fcmVuZGVyQmFyQ3Vyc29yLmJpbmQoZiksYmxvY2s6Zi5fcmVuZGVyQmxvY2tDdXJzb3IuYmluZChmKSx1bmRlcmxpbmU6Zi5fcmVuZGVyVW5kZXJsaW5lQ3Vyc29yLmJpbmQoZil9LGZ9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXImJih0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5kaXNwb3NlKCksdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXI9dm9pZCAwKSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0KXtlLnByb3RvdHlwZS5yZXNpemUuY2FsbCh0aGlzLHQpLHRoaXMuX3N0YXRlPXt4OjAseTowLGlzRm9jdXNlZDohMSxzdHlsZToiIix3aWR0aDowfX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLl9jbGVhckN1cnNvcigpLG51bGw9PT0oZT10aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcil8fHZvaWQgMD09PWV8fGUucmVzdGFydEJsaW5rQW5pbWF0aW9uKCksdGhpcy5vbk9wdGlvbnNDaGFuZ2VkKCl9LHQucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcil8fHZvaWQgMD09PWV8fGUucGF1c2UoKSx0aGlzLl9vblJlcXVlc3RSZWRyYXcuZmlyZSh7c3RhcnQ6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSxlbmQ6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueX0pfSx0LnByb3RvdHlwZS5vbkZvY3VzPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5yZXN1bWUoKSx0aGlzLl9vblJlcXVlc3RSZWRyYXcuZmlyZSh7c3RhcnQ6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSxlbmQ6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueX0pfSx0LnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yQmxpbms/dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXJ8fCh0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj1uZXcgXyh0aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkLChmdW5jdGlvbigpe3QuX3JlbmRlcighMCl9KSkpOihudWxsPT09KGU9dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpfHx2b2lkIDA9PT1lfHxlLmRpc3Bvc2UoKSx0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcj12b2lkIDApLHRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHtzdGFydDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LGVuZDp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55fSl9LHQucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcil8fHZvaWQgMD09PWV8fGUucmVzdGFydEJsaW5rQW5pbWF0aW9uKCl9LHQucHJvdG90eXBlLm9uR3JpZENoYW5nZWQ9ZnVuY3Rpb24oZSx0KXshdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXJ8fHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmlzUGF1c2VkP3RoaXMuX3JlbmRlcighMSk6dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIucmVzdGFydEJsaW5rQW5pbWF0aW9uKCl9LHQucHJvdG90eXBlLl9yZW5kZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZCYmIXRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuKXt2YXIgdD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55LHI9dC10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcDtpZihyPDB8fHI+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyl0aGlzLl9jbGVhckN1cnNvcigpO2Vsc2V7dmFyIGk9TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSk7aWYodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHQpLmxvYWRDZWxsKGksdGhpcy5fY2VsbCksdm9pZCAwIT09dGhpcy5fY2VsbC5jb250ZW50KXtpZighdGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmlzRm9jdXNlZCl7dGhpcy5fY2xlYXJDdXJzb3IoKSx0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3M7dmFyIG49dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZTtyZXR1cm4gbiYmImJsb2NrIiE9PW4/dGhpcy5fY3Vyc29yUmVuZGVyZXJzW25dKGkscix0aGlzLl9jZWxsKTp0aGlzLl9yZW5kZXJCbHVyQ3Vyc29yKGkscix0aGlzLl9jZWxsKSx0aGlzLl9jdHgucmVzdG9yZSgpLHRoaXMuX3N0YXRlLng9aSx0aGlzLl9zdGF0ZS55PXIsdGhpcy5fc3RhdGUuaXNGb2N1c2VkPSExLHRoaXMuX3N0YXRlLnN0eWxlPW4sdm9pZCh0aGlzLl9zdGF0ZS53aWR0aD10aGlzLl9jZWxsLmdldFdpZHRoKCkpfWlmKCF0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcnx8dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuaXNDdXJzb3JWaXNpYmxlKXtpZih0aGlzLl9zdGF0ZSl7aWYodGhpcy5fc3RhdGUueD09PWkmJnRoaXMuX3N0YXRlLnk9PT1yJiZ0aGlzLl9zdGF0ZS5pc0ZvY3VzZWQ9PT10aGlzLl9jb3JlQnJvd3NlclNlcnZpY2UuaXNGb2N1c2VkJiZ0aGlzLl9zdGF0ZS5zdHlsZT09PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGUmJnRoaXMuX3N0YXRlLndpZHRoPT09dGhpcy5fY2VsbC5nZXRXaWR0aCgpKXJldHVybjt0aGlzLl9jbGVhckN1cnNvcigpfXRoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3Vyc29yUmVuZGVyZXJzW3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGV8fCJibG9jayJdKGkscix0aGlzLl9jZWxsKSx0aGlzLl9jdHgucmVzdG9yZSgpLHRoaXMuX3N0YXRlLng9aSx0aGlzLl9zdGF0ZS55PXIsdGhpcy5fc3RhdGUuaXNGb2N1c2VkPSExLHRoaXMuX3N0YXRlLnN0eWxlPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGUsdGhpcy5fc3RhdGUud2lkdGg9dGhpcy5fY2VsbC5nZXRXaWR0aCgpfWVsc2UgdGhpcy5fY2xlYXJDdXJzb3IoKX19fWVsc2UgdGhpcy5fY2xlYXJDdXJzb3IoKX0sdC5wcm90b3R5cGUuX2NsZWFyQ3Vyc29yPWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUmJih3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzwxP3RoaXMuX2NsZWFyQWxsKCk6dGhpcy5fY2xlYXJDZWxscyh0aGlzLl9zdGF0ZS54LHRoaXMuX3N0YXRlLnksdGhpcy5fc3RhdGUud2lkdGgsMSksdGhpcy5fc3RhdGU9e3g6MCx5OjAsaXNGb2N1c2VkOiExLHN0eWxlOiIiLHdpZHRoOjB9KX0sdC5wcm90b3R5cGUuX3JlbmRlckJhckN1cnNvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzLHRoaXMuX2ZpbGxMZWZ0TGluZUF0Q2VsbChlLHQsdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JXaWR0aCksdGhpcy5fY3R4LnJlc3RvcmUoKX0sdC5wcm90b3R5cGUuX3JlbmRlckJsb2NrQ3Vyc29yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3MsdGhpcy5fZmlsbENlbGxzKGUsdCxyLmdldFdpZHRoKCksMSksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcyx0aGlzLl9maWxsQ2hhclRydWVDb2xvcihyLGUsdCksdGhpcy5fY3R4LnJlc3RvcmUoKX0sdC5wcm90b3R5cGUuX3JlbmRlclVuZGVybGluZUN1cnNvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzLHRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLHQpLHRoaXMuX2N0eC5yZXN0b3JlKCl9LHQucHJvdG90eXBlLl9yZW5kZXJCbHVyQ3Vyc29yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5zdHJva2VTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzcyx0aGlzLl9zdHJva2VSZWN0QXRDZWxsKGUsdCxyLmdldFdpZHRoKCksMSksdGhpcy5fY3R4LnJlc3RvcmUoKX0sbyhbcyg1LGwuSUJ1ZmZlclNlcnZpY2UpLHMoNixsLklPcHRpb25zU2VydmljZSkscyg3LGwuSUNvcmVTZXJ2aWNlKSxzKDgsaC5JQ29yZUJyb3dzZXJTZXJ2aWNlKSxzKDksbC5JRGVjb3JhdGlvblNlcnZpY2UpXSx0KX0oYS5CYXNlUmVuZGVyTGF5ZXIpO3QuQ3Vyc29yUmVuZGVyTGF5ZXI9Zjt2YXIgXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9yZW5kZXJDYWxsYmFjaz10LHRoaXMuaXNDdXJzb3JWaXNpYmxlPSEwLGUmJnRoaXMuX3Jlc3RhcnRJbnRlcnZhbCgpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzUGF1c2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuISh0aGlzLl9ibGlua1N0YXJ0VGltZW91dHx8dGhpcy5fYmxpbmtJbnRlcnZhbCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2JsaW5rSW50ZXJ2YWwmJih3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9ibGlua0ludGVydmFsKSx0aGlzLl9ibGlua0ludGVydmFsPXZvaWQgMCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQmJih3aW5kb3cuY2xlYXJUaW1lb3V0KHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0KSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dD12b2lkIDApLHRoaXMuX2FuaW1hdGlvbkZyYW1lJiYod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuX2FuaW1hdGlvbkZyYW1lKSx0aGlzLl9hbmltYXRpb25GcmFtZT12b2lkIDApfSxlLnByb3RvdHlwZS5yZXN0YXJ0QmxpbmtBbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuaXNQYXVzZWR8fCh0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkPURhdGUubm93KCksdGhpcy5pc0N1cnNvclZpc2libGU9ITAsdGhpcy5fYW5pbWF0aW9uRnJhbWV8fCh0aGlzLl9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe2UuX3JlbmRlckNhbGxiYWNrKCksZS5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwfSkpKSl9LGUucHJvdG90eXBlLl9yZXN0YXJ0SW50ZXJ2YWw9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt2b2lkIDA9PT1lJiYoZT11KSx0aGlzLl9ibGlua0ludGVydmFsJiYod2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCksdGhpcy5fYmxpbmtJbnRlcnZhbD12b2lkIDApLHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKHQuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpe3ZhciBlPXUtKERhdGUubm93KCktdC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7aWYodC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZD12b2lkIDAsZT4wKXJldHVybiB2b2lkIHQuX3Jlc3RhcnRJbnRlcnZhbChlKX10LmlzQ3Vyc29yVmlzaWJsZT0hMSx0Ll9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3QuX3JlbmRlckNhbGxiYWNrKCksdC5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwfSkpLHQuX2JsaW5rSW50ZXJ2YWw9d2luZG93LnNldEludGVydmFsKChmdW5jdGlvbigpe2lmKHQuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpe3ZhciBlPXUtKERhdGUubm93KCktdC5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZCk7cmV0dXJuIHQuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQ9dm9pZCAwLHZvaWQgdC5fcmVzdGFydEludGVydmFsKGUpfXQuaXNDdXJzb3JWaXNpYmxlPSF0LmlzQ3Vyc29yVmlzaWJsZSx0Ll9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3QuX3JlbmRlckNhbGxiYWNrKCksdC5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwfSkpfSksdSl9KSxlKX0sZS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLmlzQ3Vyc29yVmlzaWJsZT0hMCx0aGlzLl9ibGlua0ludGVydmFsJiYod2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCksdGhpcy5fYmxpbmtJbnRlcnZhbD12b2lkIDApLHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0JiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQ9dm9pZCAwKSx0aGlzLl9hbmltYXRpb25GcmFtZSYmKHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSksdGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwKX0sZS5wcm90b3R5cGUucmVzdW1lPWZ1bmN0aW9uKCl7dGhpcy5wYXVzZSgpLHRoaXMuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQ9dm9pZCAwLHRoaXMuX3Jlc3RhcnRJbnRlcnZhbCgpLHRoaXMucmVzdGFydEJsaW5rQW5pbWF0aW9uKCl9LGV9KCl9LDg5Nzg6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG4sbyxzLGEsYyxsLGgsdSxmLF8sZCxwLHYseSxnLG0sYixTLEMsdyxMLEUseCxSLGssTSxBLE8sRCxULEIsUCxJLEgsaixGLFcsVSxxLE4seixLLEcsVixYLFosWSxKLCQsUSxlZSx0ZSxyZSxpZSxuZSxvZSxzZSxhZSxjZSxsZSxoZSx1ZSxmZSxfZSxkZSxwZSx2ZSx5ZSxnZSxtZSxiZSxTZSxDZSx3ZSxMZSxFZSx4ZSxSZSxrZSxNZSxBZSxPZSxEZSxUZSxCZSxQZSxJZSxIZSxqZSxGZSxXZSxVZSxxZSxOZSx6ZSxLZSxHZSxWZSxYZSxaZSxZZSxKZSwkZSxRZSxldCx0dCxydCxpdCxudCxvdCxzdCxhdCxjdCxsdCxodCx1dCxmdCxfdCxkdCxwdCx2dCx5dCxndCxtdCxidCxTdCxDdCx3dD10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LEx0PXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC50cnlEcmF3Q3VzdG9tQ2hhcj10LnBvd2VybGluZURlZmluaXRpb25zPXQuYm94RHJhd2luZ0RlZmluaXRpb25zPXQuYmxvY2tFbGVtZW50RGVmaW5pdGlvbnM9dm9pZCAwO3ZhciBFdD1yKDE3NTIpO3QuYmxvY2tFbGVtZW50RGVmaW5pdGlvbnM9eyLiloAiOlt7eDowLHk6MCx3OjgsaDo0fV0sIuKWgSI6W3t4OjAseTo3LHc6OCxoOjF9XSwi4paCIjpbe3g6MCx5OjYsdzo4LGg6Mn1dLCLiloMiOlt7eDowLHk6NSx3OjgsaDozfV0sIuKWhCI6W3t4OjAseTo0LHc6OCxoOjR9XSwi4paFIjpbe3g6MCx5OjMsdzo4LGg6NX1dLCLiloYiOlt7eDowLHk6Mix3OjgsaDo2fV0sIuKWhyI6W3t4OjAseToxLHc6OCxoOjd9XSwi4paIIjpbe3g6MCx5OjAsdzo4LGg6OH1dLCLilokiOlt7eDowLHk6MCx3OjcsaDo4fV0sIuKWiiI6W3t4OjAseTowLHc6NixoOjh9XSwi4paLIjpbe3g6MCx5OjAsdzo1LGg6OH1dLCLilowiOlt7eDowLHk6MCx3OjQsaDo4fV0sIuKWjSI6W3t4OjAseTowLHc6MyxoOjh9XSwi4paOIjpbe3g6MCx5OjAsdzoyLGg6OH1dLCLilo8iOlt7eDowLHk6MCx3OjEsaDo4fV0sIuKWkCI6W3t4OjQseTowLHc6NCxoOjh9XSwi4paUIjpbe3g6MCx5OjAsdzo5LGg6MX1dLCLilpUiOlt7eDo3LHk6MCx3OjEsaDo4fV0sIuKWliI6W3t4OjAseTo0LHc6NCxoOjR9XSwi4paXIjpbe3g6NCx5OjQsdzo0LGg6NH1dLCLilpgiOlt7eDowLHk6MCx3OjQsaDo0fV0sIuKWmSI6W3t4OjAseTowLHc6NCxoOjh9LHt4OjAseTo0LHc6OCxoOjR9XSwi4paaIjpbe3g6MCx5OjAsdzo0LGg6NH0se3g6NCx5OjQsdzo0LGg6NH1dLCLilpsiOlt7eDowLHk6MCx3OjQsaDo4fSx7eDowLHk6MCx3OjQsaDo4fV0sIuKWnCI6W3t4OjAseTowLHc6OCxoOjR9LHt4OjQseTowLHc6NCxoOjh9XSwi4padIjpbe3g6NCx5OjAsdzo0LGg6NH1dLCLilp4iOlt7eDo0LHk6MCx3OjQsaDo0fSx7eDowLHk6NCx3OjQsaDo0fV0sIuKWnyI6W3t4OjQseTowLHc6NCxoOjh9LHt4OjAseTo0LHc6OCxoOjR9XSwi8J+tsCI6W3t4OjEseTowLHc6MSxoOjh9XSwi8J+tsSI6W3t4OjIseTowLHc6MSxoOjh9XSwi8J+tsiI6W3t4OjMseTowLHc6MSxoOjh9XSwi8J+tsyI6W3t4OjQseTowLHc6MSxoOjh9XSwi8J+ttCI6W3t4OjUseTowLHc6MSxoOjh9XSwi8J+ttSI6W3t4OjYseTowLHc6MSxoOjh9XSwi8J+ttiI6W3t4OjAseToxLHc6OCxoOjF9XSwi8J+ttyI6W3t4OjAseToyLHc6OCxoOjF9XSwi8J+tuCI6W3t4OjAseTozLHc6OCxoOjF9XSwi8J+tuSI6W3t4OjAseTo0LHc6OCxoOjF9XSwi8J+tuiI6W3t4OjAseTo1LHc6OCxoOjF9XSwi8J+tuyI6W3t4OjAseTo2LHc6OCxoOjF9XSwi8J+tvCI6W3t4OjAseTowLHc6MSxoOjh9LHt4OjAseTo3LHc6OCxoOjF9XSwi8J+tvSI6W3t4OjAseTowLHc6MSxoOjh9LHt4OjAseTowLHc6OCxoOjF9XSwi8J+tviI6W3t4OjcseTowLHc6MSxoOjh9LHt4OjAseTowLHc6OCxoOjF9XSwi8J+tvyI6W3t4OjcseTowLHc6MSxoOjh9LHt4OjAseTo3LHc6OCxoOjF9XSwi8J+ugCI6W3t4OjAseTowLHc6OCxoOjF9LHt4OjAseTo3LHc6OCxoOjF9XSwi8J+ugSI6W3t4OjAseTowLHc6OCxoOjF9LHt4OjAseToyLHc6OCxoOjF9LHt4OjAseTo0LHc6OCxoOjF9LHt4OjAseTo3LHc6OCxoOjF9XSwi8J+ugiI6W3t4OjAseTowLHc6OCxoOjJ9XSwi8J+ugyI6W3t4OjAseTowLHc6OCxoOjN9XSwi8J+uhCI6W3t4OjAseTowLHc6OCxoOjV9XSwi8J+uhSI6W3t4OjAseTowLHc6OCxoOjZ9XSwi8J+uhiI6W3t4OjAseTowLHc6OCxoOjd9XSwi8J+uhyI6W3t4OjYseTowLHc6MixoOjh9XSwi8J+uiCI6W3t4OjUseTowLHc6MyxoOjh9XSwi8J+uiSI6W3t4OjMseTowLHc6NSxoOjh9XSwi8J+uiiI6W3t4OjIseTowLHc6NixoOjh9XSwi8J+uiyI6W3t4OjEseTowLHc6NyxoOjh9XSwi8J+ulSI6W3t4OjAseTowLHc6MixoOjJ9LHt4OjQseTowLHc6MixoOjJ9LHt4OjIseToyLHc6MixoOjJ9LHt4OjYseToyLHc6MixoOjJ9LHt4OjAseTo0LHc6MixoOjJ9LHt4OjQseTo0LHc6MixoOjJ9LHt4OjIseTo2LHc6MixoOjJ9LHt4OjYseTo2LHc6MixoOjJ9XSwi8J+uliI6W3t4OjIseTowLHc6MixoOjJ9LHt4OjYseTowLHc6MixoOjJ9LHt4OjAseToyLHc6MixoOjJ9LHt4OjQseToyLHc6MixoOjJ9LHt4OjIseTo0LHc6MixoOjJ9LHt4OjYseTo0LHc6MixoOjJ9LHt4OjAseTo2LHc6MixoOjJ9LHt4OjQseTo2LHc6MixoOjJ9XSwi8J+ulyI6W3t4OjAseToyLHc6OCxoOjJ9LHt4OjAseTo2LHc6OCxoOjJ9XX07dmFyIHh0PXsi4paRIjpbWzEsMCwwLDBdLFswLDAsMCwwXSxbMCwwLDEsMF0sWzAsMCwwLDBdXSwi4paSIjpbWzEsMF0sWzAsMF0sWzAsMV0sWzAsMF1dLCLilpMiOltbMCwxXSxbMSwxXSxbMSwwXSxbMSwxXV19O3QuYm94RHJhd2luZ0RlZmluaXRpb25zPXsi4pSAIjooaT17fSxpWzFdPSJNMCwuNSBMMSwuNSIsaSksIuKUgSI6KG49e30sblszXT0iTTAsLjUgTDEsLjUiLG4pLCLilIIiOihvPXt9LG9bMV09Ik0uNSwwIEwuNSwxIixvKSwi4pSDIjoocz17fSxzWzNdPSJNLjUsMCBMLjUsMSIscyksIuKUjCI6KGE9e30sYVsxXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsYSksIuKUjyI6KGM9e30sY1szXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsYyksIuKUkCI6KGw9e30sbFsxXT0iTTAsLjUgTC41LC41IEwuNSwxIixsKSwi4pSTIjooaD17fSxoWzNdPSJNMCwuNSBMLjUsLjUgTC41LDEiLGgpLCLilJQiOih1PXt9LHVbMV09Ik0uNSwwIEwuNSwuNSBMMSwuNSIsdSksIuKUlyI6KGY9e30sZlszXT0iTS41LDAgTC41LC41IEwxLC41IixmKSwi4pSYIjooXz17fSxfWzFdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLF8pLCLilJsiOihkPXt9LGRbM109Ik0uNSwwIEwuNSwuNSBMMCwuNSIsZCksIuKUnCI6KHA9e30scFsxXT0iTS41LDAgTC41LDEgTS41LC41IEwxLC41IixwKSwi4pSjIjoodj17fSx2WzNdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDEsLjUiLHYpLCLilKQiOih5PXt9LHlbMV09Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMCwuNSIseSksIuKUqyI6KGc9e30sZ1szXT0iTS41LDAgTC41LDEgTS41LC41IEwwLC41IixnKSwi4pSsIjoobT17fSxtWzFdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDEiLG0pLCLilLMiOihiPXt9LGJbM109Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMSIsYiksIuKUtCI6KFM9e30sU1sxXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwwIixTKSwi4pS7IjooQz17fSxDWzNdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDAiLEMpLCLilLwiOih3PXt9LHdbMV09Ik0wLC41IEwxLC41IE0uNSwwIEwuNSwxIix3KSwi4pWLIjooTD17fSxMWzNdPSJNMCwuNSBMMSwuNSBNLjUsMCBMLjUsMSIsTCksIuKVtCI6KEU9e30sRVsxXT0iTS41LC41IEwwLC41IixFKSwi4pW4IjooeD17fSx4WzNdPSJNLjUsLjUgTDAsLjUiLHgpLCLilbUiOihSPXt9LFJbMV09Ik0uNSwuNSBMLjUsMCIsUiksIuKVuSI6KGs9e30sa1szXT0iTS41LC41IEwuNSwwIixrKSwi4pW2IjooTT17fSxNWzFdPSJNLjUsLjUgTDEsLjUiLE0pLCLilboiOihBPXt9LEFbM109Ik0uNSwuNSBMMSwuNSIsQSksIuKVtyI6KE89e30sT1sxXT0iTS41LC41IEwuNSwxIixPKSwi4pW7IjooRD17fSxEWzNdPSJNLjUsLjUgTC41LDEiLEQpLCLilZAiOihUPXt9LFRbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LFQpLCLilZEiOihCPXt9LEJbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSJ9LEIpLCLilZIiOihQPXt9LFBbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDEgTC41LCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNLjUsIisoLjUrdCkrIiBMMSwiKyguNSt0KX0sUCksIuKVkyI6KEk9e30sSVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUtZSkrIiwxIEwiKyguNS1lKSsiLC41IEwxLC41IE0iKyguNStlKSsiLC41IEwiKyguNStlKSsiLDEifSxJKSwi4pWUIjooSD17fSxIWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0xLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwxIE0xLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwxIn0sSCksIuKVlSI6KGo9e30salsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNS10KSsiIEwuNSwiKyguNS10KSsiIEwuNSwxIE0wLCIrKC41K3QpKyIgTC41LCIrKC41K3QpfSxqKSwi4pWWIjooRj17fSxGWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNStlKSsiLDEgTCIrKC41K2UpKyIsLjUgTDAsLjUgTSIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMSJ9LEYpLCLilZciOihXPXt9LFdbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwiKyguNSt0KSsiIEwiKyguNS1lKSsiLDEgTTAsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwiKyguNS10KSsiIEwiKyguNStlKSsiLDEifSxXKSwi4pWYIjooVT17fSxVWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwiKyguNSt0KSsiIEwxLCIrKC41K3QpKyIgTS41LCIrKC41LXQpKyIgTDEsIisoLjUtdCl9LFUpLCLilZkiOihxPXt9LHFbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTEsLjUgTCIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMCBNIisoLjUrZSkrIiwuNSBMIisoLjUrZSkrIiwwIn0scSksIuKVmiI6KE49e30sTlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMSwiKyguNS10KSsiIEwiKyguNStlKSsiLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsMCBNMSwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMCJ9LE4pLCLilZsiOih6PXt9LHpbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUrdCkrIiBMLjUsIisoLjUrdCkrIiBMLjUsMCBNMCwiKyguNS10KSsiIEwuNSwiKyguNS10KX0seiksIuKVnCI6KEs9e30sS1sxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwuNSBMIisoLjUrZSkrIiwuNSBMIisoLjUrZSkrIiwwIE0iKyguNS1lKSsiLC41IEwiKyguNS1lKSsiLDAifSxLKSwi4pWdIjooRz17fSxHWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwwIE0wLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwwIn0sRyksIuKVniI6KFY9e30sVlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMCBMLjUsMSBNLjUsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0uNSwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxWKSwi4pWfIjooWD17fSxYWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEgTSIrKC41K2UpKyIsLjUgTDEsLjUifSxYKSwi4pWgIjooWj17fSxaWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNMSwiKyguNSt0KSsiIEwiKyguNStlKSsiLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsMSBNMSwiKyguNS10KSsiIEwiKyguNStlKSsiLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsMCJ9LFopLCLilaEiOihZPXt9LFlbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LDEgTTAsIisoLjUtdCkrIiBMLjUsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwuNSwiKyguNSt0KX0sWSksIuKVoiI6KEo9e30sSlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwuNSBMIisoLjUtZSkrIiwuNSBNIisoLjUtZSkrIiwwIEwiKyguNS1lKSsiLDEgTSIrKC41K2UpKyIsMCBMIisoLjUrZSkrIiwxIn0sSiksIuKVoyI6KCQ9e30sJFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEgTTAsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwiKyguNSt0KSsiIEwiKyguNS1lKSsiLDEgTTAsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDAifSwkKSwi4pWkIjooUT17fSxRWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpKyIgTS41LCIrKC41K3QpKyIgTC41LDEifSxRKSwi4pWlIjooZWU9e30sZWVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsLjUgTDEsLjUgTSIrKC41LWUpKyIsLjUgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwuNSBMIisoLjUrZSkrIiwxIn0sZWUpLCLilaYiOih0ZT17fSx0ZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwiKyguNSt0KSsiIEwiKyguNS1lKSsiLDEgTTEsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDEifSx0ZSksIuKVpyI6KHJlPXt9LHJlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwiKyguNS10KSsiIE0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxyZSksIuKVqCI6KGllPXt9LGllWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwxLC41IE0iKyguNS1lKSsiLC41IEwiKyguNS1lKSsiLDAgTSIrKC41K2UpKyIsLjUgTCIrKC41K2UpKyIsMCJ9LGllKSwi4pWpIjoobmU9e30sbmVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUrdCkrIiBMMSwiKyguNSt0KSsiIE0wLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwwIE0xLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwwIn0sbmUpLCLilaoiOihvZT17fSxvZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMCBMLjUsMSBNMCwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMMSwiKyguNSt0KX0sb2UpLCLilasiOihzZT17fSxzZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwuNSBMMSwuNSBNIisoLjUtZSkrIiwwIEwiKyguNS1lKSsiLDEgTSIrKC41K2UpKyIsMCBMIisoLjUrZSkrIiwxIn0sc2UpLCLilawiOihhZT17fSxhZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNSt0KSsiIEwiKyguNS1lKSsiLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsMSBNMSwiKyguNSt0KSsiIEwiKyguNStlKSsiLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsMSBNMCwiKyguNS10KSsiIEwiKyguNS1lKSsiLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsMCBNMSwiKyguNS10KSsiIEwiKyguNStlKSsiLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsMCJ9LGFlKSwi4pWxIjooY2U9e30sY2VbMV09Ik0xLDAgTDAsMSIsY2UpLCLilbIiOihsZT17fSxsZVsxXT0iTTAsMCBMMSwxIixsZSksIuKVsyI6KGhlPXt9LGhlWzFdPSJNMSwwIEwwLDEgTTAsMCBMMSwxIixoZSksIuKVvCI6KHVlPXt9LHVlWzFdPSJNLjUsLjUgTDAsLjUiLHVlWzNdPSJNLjUsLjUgTDEsLjUiLHVlKSwi4pW9IjooZmU9e30sZmVbMV09Ik0uNSwuNSBMLjUsMCIsZmVbM109Ik0uNSwuNSBMLjUsMSIsZmUpLCLilb4iOihfZT17fSxfZVsxXT0iTS41LC41IEwxLC41IixfZVszXT0iTS41LC41IEwwLC41IixfZSksIuKVvyI6KGRlPXt9LGRlWzFdPSJNLjUsLjUgTC41LDEiLGRlWzNdPSJNLjUsLjUgTC41LDAiLGRlKSwi4pSNIjoocGU9e30scGVbMV09Ik0uNSwuNSBMLjUsMSIscGVbM109Ik0uNSwuNSBMMSwuNSIscGUpLCLilI4iOih2ZT17fSx2ZVsxXT0iTS41LC41IEwxLC41Iix2ZVszXT0iTS41LC41IEwuNSwxIix2ZSksIuKUkSI6KHllPXt9LHllWzFdPSJNLjUsLjUgTC41LDEiLHllWzNdPSJNLjUsLjUgTDAsLjUiLHllKSwi4pSSIjooZ2U9e30sZ2VbMV09Ik0uNSwuNSBMMCwuNSIsZ2VbM109Ik0uNSwuNSBMLjUsMSIsZ2UpLCLilJUiOihtZT17fSxtZVsxXT0iTS41LC41IEwuNSwwIixtZVszXT0iTS41LC41IEwxLC41IixtZSksIuKUliI6KGJlPXt9LGJlWzFdPSJNLjUsLjUgTDEsLjUiLGJlWzNdPSJNLjUsLjUgTC41LDAiLGJlKSwi4pSZIjooU2U9e30sU2VbMV09Ik0uNSwuNSBMLjUsMCIsU2VbM109Ik0uNSwuNSBMMCwuNSIsU2UpLCLilJoiOihDZT17fSxDZVsxXT0iTS41LC41IEwwLC41IixDZVszXT0iTS41LC41IEwuNSwwIixDZSksIuKUnSI6KHdlPXt9LHdlWzFdPSJNLjUsMCBMLjUsMSIsd2VbM109Ik0uNSwuNSBMMSwuNSIsd2UpLCLilJ4iOihMZT17fSxMZVsxXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsTGVbM109Ik0uNSwuNSBMLjUsMCIsTGUpLCLilJ8iOihFZT17fSxFZVsxXT0iTS41LDAgTC41LC41IEwxLC41IixFZVszXT0iTS41LC41IEwuNSwxIixFZSksIuKUoCI6KHhlPXt9LHhlWzFdPSJNLjUsLjUgTDEsLjUiLHhlWzNdPSJNLjUsMCBMLjUsMSIseGUpLCLilKEiOihSZT17fSxSZVsxXT0iTS41LC41IEwuNSwxIixSZVszXT0iTS41LDAgTC41LC41IEwxLC41IixSZSksIuKUoiI6KGtlPXt9LGtlWzFdPSJNLjUsLjUgTC41LDAiLGtlWzNdPSJNMC41LDEgTC41LC41IEwxLC41IixrZSksIuKUpSI6KE1lPXt9LE1lWzFdPSJNLjUsMCBMLjUsMSIsTWVbM109Ik0uNSwuNSBMMCwuNSIsTWUpLCLilKYiOihBZT17fSxBZVsxXT0iTTAsLjUgTC41LC41IEwuNSwxIixBZVszXT0iTS41LC41IEwuNSwwIixBZSksIuKUpyI6KE9lPXt9LE9lWzFdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLE9lWzNdPSJNLjUsLjUgTC41LDEiLE9lKSwi4pSoIjooRGU9e30sRGVbMV09Ik0uNSwuNSBMMCwuNSIsRGVbM109Ik0uNSwwIEwuNSwxIixEZSksIuKUqSI6KFRlPXt9LFRlWzFdPSJNLjUsLjUgTC41LDEiLFRlWzNdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLFRlKSwi4pSqIjooQmU9e30sQmVbMV09Ik0uNSwuNSBMLjUsMCIsQmVbM109Ik0wLC41IEwuNSwuNSBMLjUsMSIsQmUpLCLilK0iOihQZT17fSxQZVsxXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsUGVbM109Ik0uNSwuNSBMMCwuNSIsUGUpLCLilK4iOihJZT17fSxJZVsxXT0iTTAsLjUgTC41LC41IEwuNSwxIixJZVszXT0iTS41LC41IEwxLC41IixJZSksIuKUryI6KEhlPXt9LEhlWzFdPSJNLjUsLjUgTC41LDEiLEhlWzNdPSJNMCwuNSBMMSwuNSIsSGUpLCLilLAiOihqZT17fSxqZVsxXT0iTTAsLjUgTDEsLjUiLGplWzNdPSJNLjUsLjUgTC41LDEiLGplKSwi4pSxIjooRmU9e30sRmVbMV09Ik0uNSwuNSBMMSwuNSIsRmVbM109Ik0wLC41IEwuNSwuNSBMLjUsMSIsRmUpLCLilLIiOihXZT17fSxXZVsxXT0iTS41LC41IEwwLC41IixXZVszXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsV2UpLCLilLUiOihVZT17fSxVZVsxXT0iTS41LDAgTC41LC41IEwxLC41IixVZVszXT0iTS41LC41IEwwLC41IixVZSksIuKUtiI6KHFlPXt9LHFlWzFdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLHFlWzNdPSJNLjUsLjUgTDEsLjUiLHFlKSwi4pS3IjooTmU9e30sTmVbMV09Ik0uNSwuNSBMLjUsMCIsTmVbM109Ik0wLC41IEwxLC41IixOZSksIuKUuCI6KHplPXt9LHplWzFdPSJNMCwuNSBMMSwuNSIsemVbM109Ik0uNSwuNSBMLjUsMCIsemUpLCLilLkiOihLZT17fSxLZVsxXT0iTS41LC41IEwxLC41IixLZVszXT0iTS41LDAgTC41LC41IEwwLC41IixLZSksIuKUuiI6KEdlPXt9LEdlWzFdPSJNLjUsLjUgTDAsLjUiLEdlWzNdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLEdlKSwi4pS9IjooVmU9e30sVmVbMV09Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMSwuNSIsVmVbM109Ik0uNSwuNSBMMCwuNSIsVmUpLCLilL4iOihYZT17fSxYZVsxXT0iTS41LDAgTC41LDEgTS41LC41IEwwLC41IixYZVszXT0iTS41LC41IEwxLC41IixYZSksIuKUvyI6KFplPXt9LFplWzFdPSJNLjUsMCBMLjUsMSIsWmVbM109Ik0wLC41IEwxLC41IixaZSksIuKVgCI6KFllPXt9LFllWzFdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDEiLFllWzNdPSJNLjUsLjUgTC41LDAiLFllKSwi4pWBIjooSmU9e30sSmVbMV09Ik0uNSwuNSBMLjUsMCBNMCwuNSBMMSwuNSIsSmVbM109Ik0uNSwuNSBMLjUsMSIsSmUpLCLilYIiOigkZT17fSwkZVsxXT0iTTAsLjUgTDEsLjUiLCRlWzNdPSJNLjUsMCBMLjUsMSIsJGUpLCLilYMiOihRZT17fSxRZVsxXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsUWVbM109Ik0uNSwwIEwuNSwuNSBMMCwuNSIsUWUpLCLilYQiOihldD17fSxldFsxXT0iTTAsLjUgTC41LC41IEwuNSwxIixldFszXT0iTS41LDAgTC41LC41IEwxLC41IixldCksIuKVhSI6KHR0PXt9LHR0WzFdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLHR0WzNdPSJNMCwuNSBMLjUsLjUgTC41LDEiLHR0KSwi4pWGIjoocnQ9e30scnRbMV09Ik0uNSwwIEwuNSwuNSBMMCwuNSIscnRbM109Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLHJ0KSwi4pWHIjooaXQ9e30saXRbMV09Ik0uNSwuNSBMLjUsMSIsaXRbM109Ik0uNSwuNSBMLjUsMCBNMCwuNSBMMSwuNSIsaXQpLCLilYgiOihudD17fSxudFsxXT0iTS41LC41IEwuNSwwIixudFszXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwxIixudCksIuKViSI6KG90PXt9LG90WzFdPSJNLjUsLjUgTDEsLjUiLG90WzNdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDAsLjUiLG90KSwi4pWKIjooc3Q9e30sc3RbMV09Ik0uNSwuNSBMMCwuNSIsc3RbM109Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMSwuNSIsc3QpLCLilYwiOihhdD17fSxhdFsxXT0iTS4xLC41IEwuNCwuNSBNLjYsLjUgTC45LC41IixhdCksIuKVjSI6KGN0PXt9LGN0WzNdPSJNLjEsLjUgTC40LC41IE0uNiwuNSBMLjksLjUiLGN0KSwi4pSEIjoobHQ9e30sbHRbMV09Ik0uMDY2NywuNSBMLjI2NjcsLjUgTS40LC41IEwuNiwuNSBNLjczMzMsLjUgTC45MzMzLC41IixsdCksIuKUhSI6KGh0PXt9LGh0WzNdPSJNLjA2NjcsLjUgTC4yNjY3LC41IE0uNCwuNSBMLjYsLjUgTS43MzMzLC41IEwuOTMzMywuNSIsaHQpLCLilIgiOih1dD17fSx1dFsxXT0iTS4wNSwuNSBMLjIsLjUgTS4zLC41IEwuNDUsLjUgTS41NSwuNSBMLjcsLjUgTS44LC41IEwuOTUsLjUiLHV0KSwi4pSJIjooZnQ9e30sZnRbM109Ik0uMDUsLjUgTC4yLC41IE0uMywuNSBMLjQ1LC41IE0uNTUsLjUgTC43LC41IE0uOCwuNSBMLjk1LC41IixmdCksIuKVjiI6KF90PXt9LF90WzFdPSJNLjUsLjEgTC41LC40IE0uNSwuNiBMLjUsLjkiLF90KSwi4pWPIjooZHQ9e30sZHRbM109Ik0uNSwuMSBMLjUsLjQgTS41LC42IEwuNSwuOSIsZHQpLCLilIYiOihwdD17fSxwdFsxXT0iTS41LC4wNjY3IEwuNSwuMjY2NyBNLjUsLjQgTC41LC42IE0uNSwuNzMzMyBMLjUsLjkzMzMiLHB0KSwi4pSHIjoodnQ9e30sdnRbM109Ik0uNSwuMDY2NyBMLjUsLjI2NjcgTS41LC40IEwuNSwuNiBNLjUsLjczMzMgTC41LC45MzMzIix2dCksIuKUiiI6KHl0PXt9LHl0WzFdPSJNLjUsLjA1IEwuNSwuMiBNLjUsLjMgTC41LC40NSBMLjUsLjU1IE0uNSwuNyBMLjUsLjk1Iix5dCksIuKUiyI6KGd0PXt9LGd0WzNdPSJNLjUsLjA1IEwuNSwuMiBNLjUsLjMgTC41LC40NSBMLjUsLjU1IE0uNSwuNyBMLjUsLjk1IixndCksIuKVrSI6KG10PXt9LG10WzFdPSJDLjUsMSwuNSwuNSwxLC41IixtdCksIuKVriI6KGJ0PXt9LGJ0WzFdPSJDLjUsMSwuNSwuNSwwLC41IixidCksIuKVryI6KFN0PXt9LFN0WzFdPSJDLjUsMCwuNSwuNSwwLC41IixTdCksIuKVsCI6KEN0PXt9LEN0WzFdPSJDLjUsMCwuNSwuNSwxLC41IixDdCl9LHQucG93ZXJsaW5lRGVmaW5pdGlvbnM9eyLugrAiOntkOiJNMCwwIEwxLC41IEwwLDEiLHR5cGU6MH0sIu6CsSI6e2Q6Ik0wLDAgTDEsLjUgTDAsMSIsdHlwZToxLGhvcml6b250YWxQYWRkaW5nOi41fSwi7oKyIjp7ZDoiTTEsMCBMMCwuNSBMMSwxIix0eXBlOjB9LCLugrMiOntkOiJNMSwwIEwwLC41IEwxLDEiLHR5cGU6MSxob3Jpem9udGFsUGFkZGluZzouNX19LHQudHJ5RHJhd0N1c3RvbUNoYXI9ZnVuY3Rpb24oZSxyLGksbixvLHMpe3ZhciBhPXQuYmxvY2tFbGVtZW50RGVmaW5pdGlvbnNbcl07aWYoYSlyZXR1cm4gZnVuY3Rpb24oZSx0LHIsaSxuLG8pe2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXt2YXIgYT10W3NdLGM9bi84LGw9by84O2UuZmlsbFJlY3QocithLngqYyxpK2EueSpsLGEudypjLGEuaCpsKX19KGUsYSxpLG4sbyxzKSwhMDt2YXIgYz14dFtyXTtpZihjKXJldHVybiBmdW5jdGlvbihlLHQscixpLG4sbyl7dmFyIHMsYT1SdC5nZXQodCk7YXx8KGE9bmV3IE1hcCxSdC5zZXQodCxhKSk7dmFyIGM9ZS5maWxsU3R5bGU7aWYoInN0cmluZyIhPXR5cGVvZiBjKXRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBmaWxsU3R5bGUgdHlwZSAiJytjKyciJyk7dmFyIGw9YS5nZXQoYyk7aWYoIWwpe3ZhciBoPXRbMF0ubGVuZ3RoLHU9dC5sZW5ndGgsZj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtmLndpZHRoPWgsZi5oZWlnaHQ9dTt2YXIgXz0oMCxFdC50aHJvd0lmRmFsc3kpKGYuZ2V0Q29udGV4dCgiMmQiKSksZD1uZXcgSW1hZ2VEYXRhKGgsdSkscD12b2lkIDAsdj12b2lkIDAseT12b2lkIDAsZz12b2lkIDA7aWYoYy5zdGFydHNXaXRoKCIjIikpcD1wYXJzZUludChjLnNsaWNlKDEsMyksMTYpLHY9cGFyc2VJbnQoYy5zbGljZSgzLDUpLDE2KSx5PXBhcnNlSW50KGMuc2xpY2UoNSw3KSwxNiksZz1jLmxlbmd0aD43JiZwYXJzZUludChjLnNsaWNlKDcsOSksMTYpfHwxO2Vsc2V7aWYoIWMuc3RhcnRzV2l0aCgicmdiYSIpKXRocm93IG5ldyBFcnJvcignVW5leHBlY3RlZCBmaWxsU3R5bGUgY29sb3IgZm9ybWF0ICInK2MrJyIgd2hlbiBkcmF3aW5nIHBhdHRlcm4gZ2x5cGgnKTtwPShzPXd0KGMuc3Vic3RyaW5nKDUsYy5sZW5ndGgtMSkuc3BsaXQoIiwiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUZsb2F0KGUpfSkpLDQpKVswXSx2PXNbMV0seT1zWzJdLGc9c1szXX1mb3IodmFyIG09MDttPHU7bSsrKWZvcih2YXIgYj0wO2I8aDtiKyspZC5kYXRhWzQqKG0qaCtiKV09cCxkLmRhdGFbNCoobSpoK2IpKzFdPXYsZC5kYXRhWzQqKG0qaCtiKSsyXT15LGQuZGF0YVs0KihtKmgrYikrM109dFttXVtiXSooMjU1KmcpO18ucHV0SW1hZ2VEYXRhKGQsMCwwKSxsPSgwLEV0LnRocm93SWZGYWxzeSkoZS5jcmVhdGVQYXR0ZXJuKGYsbnVsbCkpLGEuc2V0KGMsbCl9ZS5maWxsU3R5bGU9bCxlLmZpbGxSZWN0KHIsaSxuLG8pfShlLGMsaSxuLG8scyksITA7dmFyIGw9dC5ib3hEcmF3aW5nRGVmaW5pdGlvbnNbcl07aWYobClyZXR1cm4gZnVuY3Rpb24oZSx0LHIsaSxuLG8pe3ZhciBzLGEsYyxsO2Uuc3Ryb2tlU3R5bGU9ZS5maWxsU3R5bGU7dHJ5e2Zvcih2YXIgaD1MdChPYmplY3QuZW50cmllcyh0KSksdT1oLm5leHQoKTshdS5kb25lO3U9aC5uZXh0KCkpe3ZhciBmPXd0KHUudmFsdWUsMiksXz1mWzBdLGQ9ZlsxXTtlLmJlZ2luUGF0aCgpLGUubGluZVdpZHRoPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKk51bWJlci5wYXJzZUludChfKTt2YXIgcD12b2lkIDA7cD0iZnVuY3Rpb24iPT10eXBlb2YgZD9kKC4xNSwuMTUvbypuKTpkO3RyeXtmb3IodmFyIHY9KGM9dm9pZCAwLEx0KHAuc3BsaXQoIiAiKSkpLHk9di5uZXh0KCk7IXkuZG9uZTt5PXYubmV4dCgpKXt2YXIgZz15LnZhbHVlLG09Z1swXSxiPU10W21dO2lmKGIpe3ZhciBTPWcuc3Vic3RyaW5nKDEpLnNwbGl0KCIsIik7U1swXSYmU1sxXSYmYihlLEF0KFMsbixvLHIsaSkpfWVsc2UgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgZHJhd2luZyBpbnN0cnVjdGlvbnMgZm9yICInK20rJyInKX19Y2F0Y2goZSl7Yz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7eSYmIXkuZG9uZSYmKGw9di5yZXR1cm4pJiZsLmNhbGwodil9ZmluYWxseXtpZihjKXRocm93IGMuZXJyb3J9fWUuc3Ryb2tlKCksZS5jbG9zZVBhdGgoKX19Y2F0Y2goZSl7cz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7dSYmIXUuZG9uZSYmKGE9aC5yZXR1cm4pJiZhLmNhbGwoaCl9ZmluYWxseXtpZihzKXRocm93IHMuZXJyb3J9fX0oZSxsLGksbixvLHMpLCEwO3ZhciBoPXQucG93ZXJsaW5lRGVmaW5pdGlvbnNbcl07cmV0dXJuISFoJiYoZnVuY3Rpb24oZSx0LHIsaSxuLG8pe3ZhciBzLGE7ZS5iZWdpblBhdGgoKSxlLmxpbmVXaWR0aD13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbzt0cnl7Zm9yKHZhciBjPUx0KHQuZC5zcGxpdCgiICIpKSxsPWMubmV4dCgpOyFsLmRvbmU7bD1jLm5leHQoKSl7dmFyIGg9bC52YWx1ZSx1PWhbMF0sZj1NdFt1XTtpZihmKXt2YXIgXz1oLnN1YnN0cmluZygxKS5zcGxpdCgiLCIpO19bMF0mJl9bMV0mJmYoZSxBdChfLG4sbyxyLGksdC5ob3Jpem9udGFsUGFkZGluZykpfWVsc2UgY29uc29sZS5lcnJvcignQ291bGQgbm90IGZpbmQgZHJhd2luZyBpbnN0cnVjdGlvbnMgZm9yICInK3UrJyInKX19Y2F0Y2goZSl7cz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7bCYmIWwuZG9uZSYmKGE9Yy5yZXR1cm4pJiZhLmNhbGwoYyl9ZmluYWxseXtpZihzKXRocm93IHMuZXJyb3J9fTE9PT10LnR5cGU/KGUuc3Ryb2tlU3R5bGU9ZS5maWxsU3R5bGUsZS5zdHJva2UoKSk6ZS5maWxsKCksZS5jbG9zZVBhdGgoKX0oZSxoLGksbixvLHMpLCEwKX07dmFyIFJ0PW5ldyBNYXA7ZnVuY3Rpb24ga3QoZSx0LHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj0wKSxNYXRoLm1heChNYXRoLm1pbihlLHQpLHIpfXZhciBNdD17QzpmdW5jdGlvbihlLHQpe3JldHVybiBlLmJlemllckN1cnZlVG8odFswXSx0WzFdLHRbMl0sdFszXSx0WzRdLHRbNV0pfSxMOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubGluZVRvKHRbMF0sdFsxXSl9LE06ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5tb3ZlVG8odFswXSx0WzFdKX19O2Z1bmN0aW9uIEF0KGUsdCxyLGksbixvKXt2b2lkIDA9PT1vJiYobz0wKTt2YXIgcz1lLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIHBhcnNlRmxvYXQoZSl8fHBhcnNlSW50KGUpfSkpO2lmKHMubGVuZ3RoPDIpdGhyb3cgbmV3IEVycm9yKCJUb28gZmV3IGFyZ3VtZW50cyBmb3IgaW5zdHJ1Y3Rpb24iKTtmb3IodmFyIGE9MDthPHMubGVuZ3RoO2ErPTIpc1thXSo9dC0yKm8qd2luZG93LmRldmljZVBpeGVsUmF0aW8sMCE9PXNbYV0mJihzW2FdPWt0KE1hdGgucm91bmQoc1thXSsuNSktLjUsdCwwKSksc1thXSs9aStvKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO2Zvcih2YXIgYz0xO2M8cy5sZW5ndGg7Yys9MilzW2NdKj1yLDAhPT1zW2NdJiYoc1tjXT1rdChNYXRoLnJvdW5kKHNbY10rLjUpLS41LHIsMCkpLHNbY10rPW47cmV0dXJuIHN9fSwzNzAwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuR3JpZENhY2hlPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmNhY2hlPVtdfXJldHVybiBlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MDtyPGU7cisrKXt0aGlzLmNhY2hlLmxlbmd0aDw9ciYmdGhpcy5jYWNoZS5wdXNoKFtdKTtmb3IodmFyIGk9dGhpcy5jYWNoZVtyXS5sZW5ndGg7aTx0O2krKyl0aGlzLmNhY2hlW3JdLnB1c2godm9pZCAwKTt0aGlzLmNhY2hlW3JdLmxlbmd0aD10fXRoaXMuY2FjaGUubGVuZ3RoPWV9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmNhY2hlLmxlbmd0aDtlKyspZm9yKHZhciB0PTA7dDx0aGlzLmNhY2hlW2VdLmxlbmd0aDt0KyspdGhpcy5jYWNoZVtlXVt0XT12b2lkIDB9LGV9KCk7dC5HcmlkQ2FjaGU9cn0sNTA5ODpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MaW5rUmVuZGVyTGF5ZXI9dm9pZCAwO3ZhciBhPXIoMTU0NiksYz1yKDg4MDMpLGw9cigyMDQwKSxoPXIoMjU4NSksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsYyxsKXt2YXIgaD1lLmNhbGwodGhpcyx0LCJsaW5rIixyLCEwLGksbixhLGMsbCl8fHRoaXM7cmV0dXJuIG8ub25TaG93TGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX29uU2hvd0xpbmtVbmRlcmxpbmUoZSl9KSksby5vbkhpZGVMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fb25IaWRlTGlua1VuZGVybGluZShlKX0pKSxzLm9uU2hvd0xpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9vblNob3dMaW5rVW5kZXJsaW5lKGUpfSkpLHMub25IaWRlTGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX29uSGlkZUxpbmtVbmRlcmxpbmUoZSl9KSksaH1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0KXtlLnByb3RvdHlwZS5yZXNpemUuY2FsbCh0aGlzLHQpLHRoaXMuX3N0YXRlPXZvaWQgMH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCl9LHQucHJvdG90eXBlLl9jbGVhckN1cnJlbnRMaW5rPWZ1bmN0aW9uKCl7aWYodGhpcy5fc3RhdGUpe3RoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueDEsdGhpcy5fc3RhdGUueTEsdGhpcy5fc3RhdGUuY29scy10aGlzLl9zdGF0ZS54MSwxKTt2YXIgZT10aGlzLl9zdGF0ZS55Mi10aGlzLl9zdGF0ZS55MS0xO2U+MCYmdGhpcy5fY2xlYXJDZWxscygwLHRoaXMuX3N0YXRlLnkxKzEsdGhpcy5fc3RhdGUuY29scyxlKSx0aGlzLl9jbGVhckNlbGxzKDAsdGhpcy5fc3RhdGUueTIsdGhpcy5fc3RhdGUueDIsMSksdGhpcy5fc3RhdGU9dm9pZCAwfX0sdC5wcm90b3R5cGUuX29uU2hvd0xpbmtVbmRlcmxpbmU9ZnVuY3Rpb24oZSl7aWYoZS5mZz09PWMuSU5WRVJURURfREVGQVVMVF9DT0xPUj90aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzczplLmZnJiYoMCxsLmlzMjU2Q29sb3IpKGUuZmcpP3RoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmFuc2lbZS5mZ10uY3NzOnRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzLGUueTE9PT1lLnkyKXRoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLGUueTEsZS54Mi1lLngxKTtlbHNle3RoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyhlLngxLGUueTEsZS5jb2xzLWUueDEpO2Zvcih2YXIgdD1lLnkxKzE7dDxlLnkyO3QrKyl0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoMCx0LGUuY29scyk7dGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsZS55MixlLngyKX10aGlzLl9zdGF0ZT1lfSx0LnByb3RvdHlwZS5fb25IaWRlTGlua1VuZGVybGluZT1mdW5jdGlvbihlKXt0aGlzLl9jbGVhckN1cnJlbnRMaW5rKCl9LG8oW3MoNixoLklCdWZmZXJTZXJ2aWNlKSxzKDcsaC5JT3B0aW9uc1NlcnZpY2UpLHMoOCxoLklEZWNvcmF0aW9uU2VydmljZSldLHQpfShhLkJhc2VSZW5kZXJMYXllcik7dC5MaW5rUmVuZGVyTGF5ZXI9dX0sMzUyNTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5SZW5kZXJlcj12b2lkIDA7dmFyIGM9cig5NTk2KSxsPXIoNDE0OSksaD1yKDI1MTIpLHU9cig1MDk4KSxmPXIoODQ0KSxfPXIoNDcyNSksZD1yKDI1ODUpLHA9cigxNDIwKSx2PXIoODQ2MCkseT0xLGc9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGYpe3ZhciBfPWUuY2FsbCh0aGlzKXx8dGhpcztfLl9jb2xvcnM9dCxfLl9zY3JlZW5FbGVtZW50PXIsXy5fYnVmZmVyU2VydmljZT1zLF8uX2NoYXJTaXplU2VydmljZT1hLF8uX29wdGlvbnNTZXJ2aWNlPWYsXy5faWQ9eSsrLF8uX29uUmVxdWVzdFJlZHJhdz1uZXcgdi5FdmVudEVtaXR0ZXI7dmFyIGQ9Xy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeTtyZXR1cm4gXy5fcmVuZGVyTGF5ZXJzPVtvLmNyZWF0ZUluc3RhbmNlKGMuVGV4dFJlbmRlckxheWVyLF8uX3NjcmVlbkVsZW1lbnQsMCxfLl9jb2xvcnMsZCxfLl9pZCksby5jcmVhdGVJbnN0YW5jZShsLlNlbGVjdGlvblJlbmRlckxheWVyLF8uX3NjcmVlbkVsZW1lbnQsMSxfLl9jb2xvcnMsXy5faWQpLG8uY3JlYXRlSW5zdGFuY2UodS5MaW5rUmVuZGVyTGF5ZXIsXy5fc2NyZWVuRWxlbWVudCwyLF8uX2NvbG9ycyxfLl9pZCxpLG4pLG8uY3JlYXRlSW5zdGFuY2UoaC5DdXJzb3JSZW5kZXJMYXllcixfLl9zY3JlZW5FbGVtZW50LDMsXy5fY29sb3JzLF8uX2lkLF8uX29uUmVxdWVzdFJlZHJhdyldLF8uZGltZW5zaW9ucz17c2NhbGVkQ2hhcldpZHRoOjAsc2NhbGVkQ2hhckhlaWdodDowLHNjYWxlZENlbGxXaWR0aDowLHNjYWxlZENlbGxIZWlnaHQ6MCxzY2FsZWRDaGFyTGVmdDowLHNjYWxlZENoYXJUb3A6MCxzY2FsZWRDYW52YXNXaWR0aDowLHNjYWxlZENhbnZhc0hlaWdodDowLGNhbnZhc1dpZHRoOjAsY2FudmFzSGVpZ2h0OjAsYWN0dWFsQ2VsbFdpZHRoOjAsYWN0dWFsQ2VsbEhlaWdodDowfSxfLl9kZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLF8uX3VwZGF0ZURpbWVuc2lvbnMoKSxfLm9uT3B0aW9uc0NoYW5nZWQoKSxffXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZWRyYXciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdCxyO3RyeXtmb3IodmFyIGk9YSh0aGlzLl9yZW5kZXJMYXllcnMpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKW4udmFsdWUuZGlzcG9zZSgpfWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWkucmV0dXJuKSYmci5jYWxsKGkpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX1lLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksKDAscC5yZW1vdmVUZXJtaW5hbEZyb21DYWNoZSkodGhpcy5faWQpfSx0LnByb3RvdHlwZS5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9kZXZpY2VQaXhlbFJhdGlvIT09d2luZG93LmRldmljZVBpeGVsUmF0aW8mJih0aGlzLl9kZXZpY2VQaXhlbFJhdGlvPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHRoaXMub25SZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cykpfSx0LnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dmFyIHQscjt0aGlzLl9jb2xvcnM9ZTt0cnl7Zm9yKHZhciBpPWEodGhpcy5fcmVuZGVyTGF5ZXJzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSl7dmFyIG89bi52YWx1ZTtvLnNldENvbG9ycyh0aGlzLl9jb2xvcnMpLG8ucmVzZXQoKX19Y2F0Y2goZSl7dD17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZih0KXRocm93IHQuZXJyb3J9fX0sdC5wcm90b3R5cGUub25SZXNpemU9ZnVuY3Rpb24oZSx0KXt2YXIgcixpO3RoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKTt0cnl7Zm9yKHZhciBuPWEodGhpcy5fcmVuZGVyTGF5ZXJzKSxvPW4ubmV4dCgpOyFvLmRvbmU7bz1uLm5leHQoKSlvLnZhbHVlLnJlc2l6ZSh0aGlzLmRpbWVuc2lvbnMpfWNhdGNoKGUpe3I9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihpPW4ucmV0dXJuKSYmaS5jYWxsKG4pfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX10aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCsicHgiLHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUuaGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQrInB4In0sdC5wcm90b3R5cGUub25DaGFyU2l6ZUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLm9uUmVzaXplKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpfSx0LnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9uQmx1cigpfSkpfSx0LnByb3RvdHlwZS5vbkZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihlKXtyZXR1cm4gZS5vbkZvY3VzKCl9KSl9LHQucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9ITEpLHRoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oaSl7cmV0dXJuIGkub25TZWxlY3Rpb25DaGFuZ2VkKGUsdCxyKX0pKSx0aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCYmdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoe3N0YXJ0OjAsZW5kOnRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xfSl9LHQucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub25DdXJzb3JNb3ZlKCl9KSl9LHQucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9uT3B0aW9uc0NoYW5nZWQoKX0pKX0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlc2V0KCl9KSl9LHQucHJvdG90eXBlLl9ydW5PcGVyYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQscjt0cnl7Zm9yKHZhciBpPWEodGhpcy5fcmVuZGVyTGF5ZXJzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSllKG4udmFsdWUpfWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWkucmV0dXJuKSYmci5jYWxsKGkpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX19LHQucHJvdG90eXBlLnJlbmRlclJvd3M9ZnVuY3Rpb24oZSx0KXt2YXIgcixpO3RyeXtmb3IodmFyIG49YSh0aGlzLl9yZW5kZXJMYXllcnMpLG89bi5uZXh0KCk7IW8uZG9uZTtvPW4ubmV4dCgpKW8udmFsdWUub25HcmlkQ2hhbmdlZChlLHQpfWNhdGNoKGUpe3I9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihpPW4ucmV0dXJuKSYmaS5jYWxsKG4pfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX19LHQucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPWEodGhpcy5fcmVuZGVyTGF5ZXJzKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSlpLnZhbHVlLmNsZWFyVGV4dHVyZUF0bGFzKCl9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX0sdC5wcm90b3R5cGUuX3VwZGF0ZURpbWVuc2lvbnM9ZnVuY3Rpb24oKXt0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplJiYodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aD1NYXRoLmZsb29yKHRoaXMuX2NoYXJTaXplU2VydmljZS53aWR0aCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQ9TWF0aC5jZWlsKHRoaXMuX2NoYXJTaXplU2VydmljZS5oZWlnaHQqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0PU1hdGguZmxvb3IodGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5saW5lSGVpZ2h0KSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhclRvcD0xPT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5saW5lSGVpZ2h0PzA6TWF0aC5yb3VuZCgodGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQtdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQpLzIpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg9dGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCtNYXRoLnJvdW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGV0dGVyU3BhY2luZyksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0PU1hdGguZmxvb3IodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sZXR0ZXJTcGFjaW5nLzIpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQ9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKnRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aD10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMqdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCx0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0PU1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoPU1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoL3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodD10aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0L3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyx0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aC90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpfSxvKFtzKDQsZC5JSW5zdGFudGlhdGlvblNlcnZpY2UpLHMoNSxkLklCdWZmZXJTZXJ2aWNlKSxzKDYsXy5JQ2hhclNpemVTZXJ2aWNlKSxzKDcsZC5JT3B0aW9uc1NlcnZpY2UpXSx0KX0oZi5EaXNwb3NhYmxlKTt0LlJlbmRlcmVyPWd9LDE3NTI6KGUsdCk9PntmdW5jdGlvbiByKGUpe3JldHVybiA1NzUwODw9ZSYmZTw9NTc1NTh9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZXhjbHVkZUZyb21Db250cmFzdFJhdGlvRGVtYW5kcz10LmlzUG93ZXJsaW5lR2x5cGg9dC50aHJvd0lmRmFsc3k9dm9pZCAwLHQudGhyb3dJZkZhbHN5PWZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigidmFsdWUgbXVzdCBub3QgYmUgZmFsc3kiKTtyZXR1cm4gZX0sdC5pc1Bvd2VybGluZUdseXBoPXIsdC5leGNsdWRlRnJvbUNvbnRyYXN0UmF0aW9EZW1hbmRzPWZ1bmN0aW9uKGUpe3JldHVybiByKGUpfHxmdW5jdGlvbihlKXtyZXR1cm4gOTQ3Mjw9ZSYmZTw9OTYzMX0oZSl9fSw0MTQ5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNlbGVjdGlvblJlbmRlckxheWVyPXZvaWQgMDt2YXIgYT1yKDE1NDYpLGM9cigyNTg1KSxsPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSl7dmFyIGM9ZS5jYWxsKHRoaXMsdCwic2VsZWN0aW9uIixyLCEwLGksbixvLHMsYSl8fHRoaXM7cmV0dXJuIGMuX2NsZWFyU3RhdGUoKSxjfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuX2NsZWFyU3RhdGU9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZT17c3RhcnQ6dm9pZCAwLGVuZDp2b2lkIDAsY29sdW1uU2VsZWN0TW9kZTp2b2lkIDAseWRpc3A6dm9pZCAwfX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKHQpe2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCksdGhpcy5fY2xlYXJTdGF0ZSgpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3N0YXRlLnN0YXJ0JiZ0aGlzLl9zdGF0ZS5lbmQmJih0aGlzLl9jbGVhclN0YXRlKCksdGhpcy5fY2xlYXJBbGwoKSl9LHQucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbih0LHIsaSl7aWYoZS5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkLmNhbGwodGhpcyx0LHIsaSksdGhpcy5fZGlkU3RhdGVDaGFuZ2UodCxyLGksdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApKWlmKHRoaXMuX2NsZWFyQWxsKCksdCYmcil7dmFyIG49dFsxXS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxvPXJbMV0tdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Ascz1NYXRoLm1heChuLDApLGE9TWF0aC5taW4obyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSk7aWYocz49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzfHxhPDApdGhpcy5fc3RhdGUueWRpc3A9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7ZWxzZXtpZih0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudC5jc3MsaSl7dmFyIGM9dFswXSxsPXJbMF0tYyxoPWEtcysxO3RoaXMuX2ZpbGxDZWxscyhjLHMsbCxoKX1lbHNle2M9bj09PXM/dFswXTowO3ZhciB1PXM9PT1vP3JbMF06dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO3RoaXMuX2ZpbGxDZWxscyhjLHMsdS1jLDEpO3ZhciBmPU1hdGgubWF4KGEtcy0xLDApO2lmKHRoaXMuX2ZpbGxDZWxscygwLHMrMSx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZikscyE9PWEpe3ZhciBfPW89PT1hP3JbMF06dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO3RoaXMuX2ZpbGxDZWxscygwLGEsXywxKX19dGhpcy5fc3RhdGUuc3RhcnQ9W3RbMF0sdFsxXV0sdGhpcy5fc3RhdGUuZW5kPVtyWzBdLHJbMV1dLHRoaXMuX3N0YXRlLmNvbHVtblNlbGVjdE1vZGU9aSx0aGlzLl9zdGF0ZS55ZGlzcD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcH19ZWxzZSB0aGlzLl9jbGVhclN0YXRlKCl9LHQucHJvdG90eXBlLl9kaWRTdGF0ZUNoYW5nZT1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4hdGhpcy5fYXJlQ29vcmRpbmF0ZXNFcXVhbChlLHRoaXMuX3N0YXRlLnN0YXJ0KXx8IXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwodCx0aGlzLl9zdGF0ZS5lbmQpfHxyIT09dGhpcy5fc3RhdGUuY29sdW1uU2VsZWN0TW9kZXx8aSE9PXRoaXMuX3N0YXRlLnlkaXNwfSx0LnByb3RvdHlwZS5fYXJlQ29vcmRpbmF0ZXNFcXVhbD1mdW5jdGlvbihlLHQpe3JldHVybiEoIWV8fCF0KSYmZVswXT09PXRbMF0mJmVbMV09PT10WzFdfSxvKFtzKDQsYy5JQnVmZmVyU2VydmljZSkscyg1LGMuSU9wdGlvbnNTZXJ2aWNlKSxzKDYsYy5JRGVjb3JhdGlvblNlcnZpY2UpXSx0KX0oYS5CYXNlUmVuZGVyTGF5ZXIpO3QuU2VsZWN0aW9uUmVuZGVyTGF5ZXI9bH0sOTU5NjpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5UZXh0UmVuZGVyTGF5ZXI9dm9pZCAwO3ZhciBjPXIoMzcwMCksbD1yKDE1NDYpLGg9cigzNzM0KSx1PXIoNjQzKSxmPXIoNTExKSxfPXIoMjU4NSksZD1yKDQ3MjUpLHA9cig0MjY5KSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxsLGgpe3ZhciB1PWUuY2FsbCh0aGlzLHQsInRleHQiLHIsbixpLG8scyxhLGgpfHx0aGlzO3JldHVybiB1Ll9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPWwsdS5fY2hhcmFjdGVyV2lkdGg9MCx1Ll9jaGFyYWN0ZXJGb250PSIiLHUuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZT17fSx1Ll93b3JrQ2VsbD1uZXcgZi5DZWxsRGF0YSx1Ll9zdGF0ZT1uZXcgYy5HcmlkQ2FjaGUsdX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0KXtlLnByb3RvdHlwZS5yZXNpemUuY2FsbCh0aGlzLHQpO3ZhciByPXRoaXMuX2dldEZvbnQoITEsITEpO3RoaXMuX2NoYXJhY3RlcldpZHRoPT09dC5zY2FsZWRDaGFyV2lkdGgmJnRoaXMuX2NoYXJhY3RlckZvbnQ9PT1yfHwodGhpcy5fY2hhcmFjdGVyV2lkdGg9dC5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY2hhcmFjdGVyRm9udD1yLHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZT17fSksdGhpcy5fc3RhdGUuY2xlYXIoKSx0aGlzLl9zdGF0ZS5yZXNpemUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGUuY2xlYXIoKSx0aGlzLl9jbGVhckFsbCgpfSx0LnByb3RvdHlwZS5fZm9yRWFjaENlbGw9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaT1lO2k8PXQ7aSsrKWZvcih2YXIgbj1pK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG89dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KG4pLHM9dGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5nZXRKb2luZWRDaGFyYWN0ZXJzKG4pLGE9MDthPHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczthKyspe28ubG9hZENlbGwoYSx0aGlzLl93b3JrQ2VsbCk7dmFyIGM9dGhpcy5fd29ya0NlbGwsbD0hMSxoPWE7aWYoMCE9PWMuZ2V0V2lkdGgoKSl7aWYocy5sZW5ndGg+MCYmYT09PXNbMF1bMF0pe2w9ITA7dmFyIGY9cy5zaGlmdCgpO2M9bmV3IHAuSm9pbmVkQ2VsbERhdGEodGhpcy5fd29ya0NlbGwsby50cmFuc2xhdGVUb1N0cmluZyghMCxmWzBdLGZbMV0pLGZbMV0tZlswXSksaD1mWzFdLTF9IWwmJnRoaXMuX2lzT3ZlcmxhcHBpbmcoYykmJmg8by5sZW5ndGgtMSYmby5nZXRDb2RlUG9pbnQoaCsxKT09PXUuTlVMTF9DRUxMX0NPREUmJihjLmNvbnRlbnQmPS0xMjU4MjkxMyxjLmNvbnRlbnR8PTI8PDIyKSxyKGMsYSxpKSxhPWh9fX0sdC5wcm90b3R5cGUuX2RyYXdCYWNrZ3JvdW5kPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyxpPXRoaXMuX2N0eCxuPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxvPTAscz0wLGM9bnVsbDtpLnNhdmUoKSx0aGlzLl9mb3JFYWNoQ2VsbChlLHQsKGZ1bmN0aW9uKGUsdCxsKXt2YXIgdSxmLF89bnVsbDtlLmlzSW52ZXJzZSgpP189ZS5pc0ZnRGVmYXVsdCgpP3IuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzczplLmlzRmdSR0IoKT8icmdiKCIraC5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRGZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI6ci5fY29sb3JzLmFuc2lbZS5nZXRGZ0NvbG9yKCldLmNzczplLmlzQmdSR0IoKT9fPSJyZ2IoIitoLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEJnQ29sb3IoKSkuam9pbigiLCIpKyIpIjplLmlzQmdQYWxldHRlKCkmJihfPXIuX2NvbG9ycy5hbnNpW2UuZ2V0QmdDb2xvcigpXS5jc3MpO3ZhciBkPSExO3RyeXtmb3IodmFyIHA9YShyLl9kZWNvcmF0aW9uU2VydmljZS5nZXREZWNvcmF0aW9uc0F0Q2VsbCh0LHIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwK2wpKSx2PXAubmV4dCgpOyF2LmRvbmU7dj1wLm5leHQoKSl7dmFyIHk9di52YWx1ZTsidG9wIiE9PXkub3B0aW9ucy5sYXllciYmZHx8KHkuYmFja2dyb3VuZENvbG9yUkdCJiYoXz15LmJhY2tncm91bmRDb2xvclJHQi5jc3MpLGQ9InRvcCI9PT15Lm9wdGlvbnMubGF5ZXIpfX1jYXRjaChlKXt1PXtlcnJvcjplfX1maW5hbGx5e3RyeXt2JiYhdi5kb25lJiYoZj1wLnJldHVybikmJmYuY2FsbChwKX1maW5hbGx5e2lmKHUpdGhyb3cgdS5lcnJvcn19bnVsbD09PWMmJihvPXQscz1sKSxsIT09cz8oaS5maWxsU3R5bGU9Y3x8IiIsci5fZmlsbENlbGxzKG8scyxuLW8sMSksbz10LHM9bCk6YyE9PV8mJihpLmZpbGxTdHlsZT1jfHwiIixyLl9maWxsQ2VsbHMobyxzLHQtbywxKSxvPXQscz1sKSxjPV99KSksbnVsbCE9PWMmJihpLmZpbGxTdHlsZT1jLHRoaXMuX2ZpbGxDZWxscyhvLHMsbi1vLDEpKSxpLnJlc3RvcmUoKX0sdC5wcm90b3R5cGUuX2RyYXdGb3JlZ3JvdW5kPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt0aGlzLl9mb3JFYWNoQ2VsbChlLHQsKGZ1bmN0aW9uKGUsdCxpKXtpZighZS5pc0ludmlzaWJsZSgpJiYoci5fZHJhd0NoYXJzKGUsdCxpKSxlLmlzVW5kZXJsaW5lKCl8fGUuaXNTdHJpa2V0aHJvdWdoKCkpKXtpZihyLl9jdHguc2F2ZSgpLGUuaXNJbnZlcnNlKCkpaWYoZS5pc0JnRGVmYXVsdCgpKXIuX2N0eC5maWxsU3R5bGU9ci5fY29sb3JzLmJhY2tncm91bmQuY3NzO2Vsc2UgaWYoZS5pc0JnUkdCKCkpci5fY3R4LmZpbGxTdHlsZT0icmdiKCIraC5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRCZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI7ZWxzZXt2YXIgbj1lLmdldEJnQ29sb3IoKTtyLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZuPDgmJihuKz04KSxyLl9jdHguZmlsbFN0eWxlPXIuX2NvbG9ycy5hbnNpW25dLmNzc31lbHNlIGlmKGUuaXNGZ0RlZmF1bHQoKSlyLl9jdHguZmlsbFN0eWxlPXIuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcztlbHNlIGlmKGUuaXNGZ1JHQigpKXIuX2N0eC5maWxsU3R5bGU9InJnYigiK2guQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0RmdDb2xvcigpKS5qb2luKCIsIikrIikiO2Vsc2V7dmFyIG89ZS5nZXRGZ0NvbG9yKCk7ci5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmZS5pc0JvbGQoKSYmbzw4JiYobys9OCksci5fY3R4LmZpbGxTdHlsZT1yLl9jb2xvcnMuYW5zaVtvXS5jc3N9ZS5pc1N0cmlrZXRocm91Z2goKSYmci5fZmlsbE1pZGRsZUxpbmVBdENlbGxzKHQsaSxlLmdldFdpZHRoKCkpLGUuaXNVbmRlcmxpbmUoKSYmci5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKHQsaSxlLmdldFdpZHRoKCkpLHIuX2N0eC5yZXN0b3JlKCl9fSkpfSx0LnByb3RvdHlwZS5vbkdyaWRDaGFuZ2VkPWZ1bmN0aW9uKGUsdCl7MCE9PXRoaXMuX3N0YXRlLmNhY2hlLmxlbmd0aCYmKHRoaXMuX2NoYXJBdGxhcyYmdGhpcy5fY2hhckF0bGFzLmJlZ2luRnJhbWUoKSx0aGlzLl9jbGVhckNlbGxzKDAsZSx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdC1lKzEpLHRoaXMuX2RyYXdCYWNrZ3JvdW5kKGUsdCksdGhpcy5fZHJhd0ZvcmVncm91bmQoZSx0KSl9LHQucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl9zZXRUcmFuc3BhcmVuY3kodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5hbGxvd1RyYW5zcGFyZW5jeSl9LHQucHJvdG90eXBlLl9pc092ZXJsYXBwaW5nPWZ1bmN0aW9uKGUpe2lmKDEhPT1lLmdldFdpZHRoKCkpcmV0dXJuITE7aWYoZS5nZXRDb2RlKCk8MjU2KXJldHVybiExO3ZhciB0PWUuZ2V0Q2hhcnMoKTtpZih0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuIHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZVt0XTt0aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N0eC5mb250PXRoaXMuX2NoYXJhY3RlckZvbnQ7dmFyIHI9TWF0aC5mbG9vcih0aGlzLl9jdHgubWVhc3VyZVRleHQodCkud2lkdGgpPnRoaXMuX2NoYXJhY3RlcldpZHRoO3JldHVybiB0aGlzLl9jdHgucmVzdG9yZSgpLHRoaXMuX2NoYXJhY3Rlck92ZXJsYXBDYWNoZVt0XT1yLHJ9LG8oW3MoNSxfLklCdWZmZXJTZXJ2aWNlKSxzKDYsXy5JT3B0aW9uc1NlcnZpY2UpLHMoNyxkLklDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSxzKDgsXy5JRGVjb3JhdGlvblNlcnZpY2UpXSx0KX0obC5CYXNlUmVuZGVyTGF5ZXIpO3QuVGV4dFJlbmRlckxheWVyPXZ9LDk2MTY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CYXNlQ2hhckF0bGFzPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9kaWRXYXJtVXA9ITF9cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLndhcm1VcD1mdW5jdGlvbigpe3RoaXMuX2RpZFdhcm1VcHx8KHRoaXMuX2RvV2FybVVwKCksdGhpcy5fZGlkV2FybVVwPSEwKX0sZS5wcm90b3R5cGUuX2RvV2FybVVwPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuYmVnaW5GcmFtZT1mdW5jdGlvbigpe30sZX0oKTt0LkJhc2VDaGFyQXRsYXM9cn0sMTQyMDooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQucmVtb3ZlVGVybWluYWxGcm9tQ2FjaGU9dC5hY3F1aXJlQ2hhckF0bGFzPXZvaWQgMDt2YXIgaT1yKDIwNDApLG49cigxOTA2KSxvPVtdO3QuYWNxdWlyZUNoYXJBdGxhcz1mdW5jdGlvbihlLHQscixzLGEpe2Zvcih2YXIgYz0oMCxpLmdlbmVyYXRlQ29uZmlnKShzLGEsZSxyKSxsPTA7bDxvLmxlbmd0aDtsKyspe3ZhciBoPSh1PW9bbF0pLm93bmVkQnkuaW5kZXhPZih0KTtpZihoPj0wKXtpZigoMCxpLmNvbmZpZ0VxdWFscykodS5jb25maWcsYykpcmV0dXJuIHUuYXRsYXM7MT09PXUub3duZWRCeS5sZW5ndGg/KHUuYXRsYXMuZGlzcG9zZSgpLG8uc3BsaWNlKGwsMSkpOnUub3duZWRCeS5zcGxpY2UoaCwxKTticmVha319Zm9yKGw9MDtsPG8ubGVuZ3RoO2wrKyl7dmFyIHU9b1tsXTtpZigoMCxpLmNvbmZpZ0VxdWFscykodS5jb25maWcsYykpcmV0dXJuIHUub3duZWRCeS5wdXNoKHQpLHUuYXRsYXN9dmFyIGY9e2F0bGFzOm5ldyBuLkR5bmFtaWNDaGFyQXRsYXMoZG9jdW1lbnQsYyksY29uZmlnOmMsb3duZWRCeTpbdF19O3JldHVybiBvLnB1c2goZiksZi5hdGxhc30sdC5yZW1vdmVUZXJtaW5hbEZyb21DYWNoZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PG8ubGVuZ3RoO3QrKyl7dmFyIHI9b1t0XS5vd25lZEJ5LmluZGV4T2YoZSk7aWYoLTEhPT1yKXsxPT09b1t0XS5vd25lZEJ5Lmxlbmd0aD8ob1t0XS5hdGxhcy5kaXNwb3NlKCksby5zcGxpY2UodCwxKSk6b1t0XS5vd25lZEJ5LnNwbGljZShyLDEpO2JyZWFrfX19fSwyMDQwOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5pczI1NkNvbG9yPXQuY29uZmlnRXF1YWxzPXQuZ2VuZXJhdGVDb25maWc9dm9pZCAwO3ZhciBpPXIoNjQzKTt0LmdlbmVyYXRlQ29uZmlnPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPXtmb3JlZ3JvdW5kOmkuZm9yZWdyb3VuZCxiYWNrZ3JvdW5kOmkuYmFja2dyb3VuZCxjdXJzb3I6dm9pZCAwLGN1cnNvckFjY2VudDp2b2lkIDAsc2VsZWN0aW9uOnZvaWQgMCxhbnNpOmkuYW5zaS5zbGljZSgpfTtyZXR1cm57ZGV2aWNlUGl4ZWxSYXRpbzp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxzY2FsZWRDaGFyV2lkdGg6ZSxzY2FsZWRDaGFySGVpZ2h0OnQsZm9udEZhbWlseTpyLmZvbnRGYW1pbHksZm9udFNpemU6ci5mb250U2l6ZSxmb250V2VpZ2h0OnIuZm9udFdlaWdodCxmb250V2VpZ2h0Qm9sZDpyLmZvbnRXZWlnaHRCb2xkLGFsbG93VHJhbnNwYXJlbmN5OnIuYWxsb3dUcmFuc3BhcmVuY3ksY29sb3JzOm59fSx0LmNvbmZpZ0VxdWFscz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wO3I8ZS5jb2xvcnMuYW5zaS5sZW5ndGg7cisrKWlmKGUuY29sb3JzLmFuc2lbcl0ucmdiYSE9PXQuY29sb3JzLmFuc2lbcl0ucmdiYSlyZXR1cm4hMTtyZXR1cm4gZS5kZXZpY2VQaXhlbFJhdGlvPT09dC5kZXZpY2VQaXhlbFJhdGlvJiZlLmZvbnRGYW1pbHk9PT10LmZvbnRGYW1pbHkmJmUuZm9udFNpemU9PT10LmZvbnRTaXplJiZlLmZvbnRXZWlnaHQ9PT10LmZvbnRXZWlnaHQmJmUuZm9udFdlaWdodEJvbGQ9PT10LmZvbnRXZWlnaHRCb2xkJiZlLmFsbG93VHJhbnNwYXJlbmN5PT09dC5hbGxvd1RyYW5zcGFyZW5jeSYmZS5zY2FsZWRDaGFyV2lkdGg9PT10LnNjYWxlZENoYXJXaWR0aCYmZS5zY2FsZWRDaGFySGVpZ2h0PT09dC5zY2FsZWRDaGFySGVpZ2h0JiZlLmNvbG9ycy5mb3JlZ3JvdW5kPT09dC5jb2xvcnMuZm9yZWdyb3VuZCYmZS5jb2xvcnMuYmFja2dyb3VuZD09PXQuY29sb3JzLmJhY2tncm91bmR9LHQuaXMyNTZDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gZTxpLkRFRkFVTFRfQ09MT1J9fSw4ODAzOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DSEFSX0FUTEFTX0NFTExfU1BBQ0lORz10LlRFWFRfQkFTRUxJTkU9dC5ESU1fT1BBQ0lUWT10LklOVkVSVEVEX0RFRkFVTFRfQ09MT1I9dm9pZCAwO3ZhciBpPXIoNjExNCk7dC5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SPTI1Nyx0LkRJTV9PUEFDSVRZPS41LHQuVEVYVF9CQVNFTElORT1pLmlzRmlyZWZveHx8aS5pc0xlZ2FjeUVkZ2U/ImJvdHRvbSI6ImlkZW9ncmFwaGljIix0LkNIQVJfQVRMQVNfQ0VMTF9TUEFDSU5HPTF9LDE5MDY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTm9uZUNoYXJBdGxhcz10LkR5bmFtaWNDaGFyQXRsYXM9dC5nZXRHbHlwaENhY2hlS2V5PXZvaWQgMDt2YXIgbz1yKDg4MDMpLHM9cig5NjE2KSxhPXIoNTY4MCksYz1yKDcwMDEpLGw9cig2MTE0KSxoPXIoMTc1MiksdT1yKDgwNTUpLGY9MTAyNCxfPTEwMjQsZD17Y3NzOiJyZ2JhKDAsIDAsIDAsIDApIixyZ2JhOjB9O2Z1bmN0aW9uIHAoZSl7cmV0dXJuIGUuY29kZTw8MjF8ZS5iZzw8MTJ8ZS5mZzw8M3woZS5ib2xkPzA6NCkrKGUuZGltPzA6MikrKGUuaXRhbGljPzA6MSl9dC5nZXRHbHlwaENhY2hlS2V5PXA7dmFyIHY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztpLl9jb25maWc9cixpLl9kcmF3VG9DYWNoZUNvdW50PTAsaS5fZ2x5cGhzV2FpdGluZ09uQml0bWFwPVtdLGkuX2JpdG1hcENvbW1pdFRpbWVvdXQ9bnVsbCxpLl9iaXRtYXA9bnVsbCxpLl9jYWNoZUNhbnZhcz10LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLGkuX2NhY2hlQ2FudmFzLndpZHRoPWYsaS5fY2FjaGVDYW52YXMuaGVpZ2h0PV8saS5fY2FjaGVDdHg9KDAsaC50aHJvd0lmRmFsc3kpKGkuX2NhY2hlQ2FudmFzLmdldENvbnRleHQoIjJkIix7YWxwaGE6ITB9KSk7dmFyIG49dC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKTtuLndpZHRoPWkuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsbi5oZWlnaHQ9aS5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQsaS5fdG1wQ3R4PSgwLGgudGhyb3dJZkZhbHN5KShuLmdldENvbnRleHQoIjJkIix7YWxwaGE6aS5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5fSkpLGkuX3dpZHRoPU1hdGguZmxvb3IoZi9pLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoKSxpLl9oZWlnaHQ9TWF0aC5mbG9vcihfL2kuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KTt2YXIgbz1pLl93aWR0aCppLl9oZWlnaHQ7cmV0dXJuIGkuX2NhY2hlTWFwPW5ldyBjLkxSVU1hcChvKSxpLl9jYWNoZU1hcC5wcmVhbGxvYyhvKSxpfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe251bGwhPT10aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0JiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0KSx0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0PW51bGwpfSx0LnByb3RvdHlwZS5iZWdpbkZyYW1lPWZ1bmN0aW9uKCl7dGhpcy5fZHJhd1RvQ2FjaGVDb3VudD0wfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2lmKHRoaXMuX2NhY2hlTWFwLnNpemU+MCl7dmFyIGU9dGhpcy5fd2lkdGgqdGhpcy5faGVpZ2h0O3RoaXMuX2NhY2hlTWFwPW5ldyBjLkxSVU1hcChlKSx0aGlzLl9jYWNoZU1hcC5wcmVhbGxvYyhlKX10aGlzLl9jYWNoZUN0eC5jbGVhclJlY3QoMCwwLGYsXyksdGhpcy5fdG1wQ3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCl9LHQucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24oZSx0LHIsaSl7aWYoMzI9PT10LmNvZGUpcmV0dXJuITA7aWYoIXRoaXMuX2NhbkNhY2hlKHQpKXJldHVybiExO3ZhciBuPXAodCksbz10aGlzLl9jYWNoZU1hcC5nZXQobik7aWYobnVsbCE9bylyZXR1cm4gdGhpcy5fZHJhd0Zyb21DYWNoZShlLG8scixpKSwhMDtpZih0aGlzLl9kcmF3VG9DYWNoZUNvdW50PDEwMCl7dmFyIHM7cz10aGlzLl9jYWNoZU1hcC5zaXplPHRoaXMuX2NhY2hlTWFwLmNhcGFjaXR5P3RoaXMuX2NhY2hlTWFwLnNpemU6dGhpcy5fY2FjaGVNYXAucGVlaygpLmluZGV4O3ZhciBhPXRoaXMuX2RyYXdUb0NhY2hlKHQscyk7cmV0dXJuIHRoaXMuX2NhY2hlTWFwLnNldChuLGEpLHRoaXMuX2RyYXdGcm9tQ2FjaGUoZSxhLHIsaSksITB9cmV0dXJuITF9LHQucHJvdG90eXBlLl9jYW5DYWNoZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5jb2RlPDI1Nn0sdC5wcm90b3R5cGUuX3RvQ29vcmRpbmF0ZVg9ZnVuY3Rpb24oZSl7cmV0dXJuIGUldGhpcy5fd2lkdGgqdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aH0sdC5wcm90b3R5cGUuX3RvQ29vcmRpbmF0ZVk9ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguZmxvb3IoZS90aGlzLl93aWR0aCkqdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHR9LHQucHJvdG90eXBlLl9kcmF3RnJvbUNhY2hlPWZ1bmN0aW9uKGUsdCxyLGkpe2lmKCF0LmlzRW1wdHkpe3ZhciBuPXRoaXMuX3RvQ29vcmRpbmF0ZVgodC5pbmRleCksbz10aGlzLl90b0Nvb3JkaW5hdGVZKHQuaW5kZXgpO2UuZHJhd0ltYWdlKHQuaW5CaXRtYXA/dGhpcy5fYml0bWFwOnRoaXMuX2NhY2hlQ2FudmFzLG4sbyx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0LHIsaSx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KX19LHQucHJvdG90eXBlLl9nZXRDb2xvckZyb21BbnNpSW5kZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIGU8dGhpcy5fY29uZmlnLmNvbG9ycy5hbnNpLmxlbmd0aD90aGlzLl9jb25maWcuY29sb3JzLmFuc2lbZV06YS5ERUZBVUxUX0FOU0lfQ09MT1JTW2VdfSx0LnByb3RvdHlwZS5fZ2V0QmFja2dyb3VuZENvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3k/ZDplLmJnPT09by5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SP3RoaXMuX2NvbmZpZy5jb2xvcnMuZm9yZWdyb3VuZDplLmJnPDI1Nj90aGlzLl9nZXRDb2xvckZyb21BbnNpSW5kZXgoZS5iZyk6dGhpcy5fY29uZmlnLmNvbG9ycy5iYWNrZ3JvdW5kfSx0LnByb3RvdHlwZS5fZ2V0Rm9yZWdyb3VuZENvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiBlLmZnPT09by5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SP3UuY29sb3Iub3BhcXVlKHRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZCk6ZS5mZzwyNTY/dGhpcy5fZ2V0Q29sb3JGcm9tQW5zaUluZGV4KGUuZmcpOnRoaXMuX2NvbmZpZy5jb2xvcnMuZm9yZWdyb3VuZH0sdC5wcm90b3R5cGUuX2RyYXdUb0NhY2hlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZHJhd1RvQ2FjaGVDb3VudCsrLHRoaXMuX3RtcEN0eC5zYXZlKCk7dmFyIHI9dGhpcy5fZ2V0QmFja2dyb3VuZENvbG9yKGUpO3RoaXMuX3RtcEN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb249ImNvcHkiLHRoaXMuX3RtcEN0eC5maWxsU3R5bGU9ci5jc3MsdGhpcy5fdG1wQ3R4LmZpbGxSZWN0KDAsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KSx0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJzb3VyY2Utb3ZlciI7dmFyIGk9ZS5ib2xkP3RoaXMuX2NvbmZpZy5mb250V2VpZ2h0Qm9sZDp0aGlzLl9jb25maWcuZm9udFdlaWdodCxuPWUuaXRhbGljPyJpdGFsaWMiOiIiO3RoaXMuX3RtcEN0eC5mb250PW4rIiAiK2krIiAiK3RoaXMuX2NvbmZpZy5mb250U2l6ZSp0aGlzLl9jb25maWcuZGV2aWNlUGl4ZWxSYXRpbysicHggIit0aGlzLl9jb25maWcuZm9udEZhbWlseSx0aGlzLl90bXBDdHgudGV4dEJhc2VsaW5lPW8uVEVYVF9CQVNFTElORSx0aGlzLl90bXBDdHguZmlsbFN0eWxlPXRoaXMuX2dldEZvcmVncm91bmRDb2xvcihlKS5jc3MsZS5kaW0mJih0aGlzLl90bXBDdHguZ2xvYmFsQWxwaGE9by5ESU1fT1BBQ0lUWSksdGhpcy5fdG1wQ3R4LmZpbGxUZXh0KGUuY2hhcnMsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCk7dmFyIHM9dGhpcy5fdG1wQ3R4LmdldEltYWdlRGF0YSgwLDAsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCksYT0hMTtpZih0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3l8fChhPWcocyxyKSksYSYmIl8iPT09ZS5jaGFycyYmIXRoaXMuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeSlmb3IodmFyIGM9MTtjPD01JiYodGhpcy5fdG1wQ3R4LmZpbGxUZXh0KGUuY2hhcnMsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodC1jKSxhPWcocz10aGlzLl90bXBDdHguZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0KSxyKSk7YysrKTt0aGlzLl90bXBDdHgucmVzdG9yZSgpO3ZhciBsPXRoaXMuX3RvQ29vcmRpbmF0ZVgodCksaD10aGlzLl90b0Nvb3JkaW5hdGVZKHQpO3RoaXMuX2NhY2hlQ3R4LnB1dEltYWdlRGF0YShzLGwsaCk7dmFyIHU9e2luZGV4OnQsaXNFbXB0eTphLGluQml0bWFwOiExfTtyZXR1cm4gdGhpcy5fYWRkR2x5cGhUb0JpdG1hcCh1KSx1fSx0LnByb3RvdHlwZS5fYWRkR2x5cGhUb0JpdG1hcD1mdW5jdGlvbihlKXt2YXIgdD10aGlzOyEoImNyZWF0ZUltYWdlQml0bWFwImluIHdpbmRvdyl8fGwuaXNGaXJlZm94fHxsLmlzU2FmYXJpfHwodGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwLnB1c2goZSksbnVsbD09PXRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQmJih0aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0PXdpbmRvdy5zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0Ll9nZW5lcmF0ZUJpdG1hcCgpfSksMTAwKSkpfSx0LnByb3RvdHlwZS5fZ2VuZXJhdGVCaXRtYXA9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5fZ2x5cGhzV2FpdGluZ09uQml0bWFwO3RoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcD1bXSx3aW5kb3cuY3JlYXRlSW1hZ2VCaXRtYXAodGhpcy5fY2FjaGVDYW52YXMpLnRoZW4oKGZ1bmN0aW9uKHIpe2UuX2JpdG1hcD1yO2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKXRbaV0uaW5CaXRtYXA9ITB9KSksdGhpcy5fYml0bWFwQ29tbWl0VGltZW91dD1udWxsfSx0fShzLkJhc2VDaGFyQXRsYXMpO3QuRHluYW1pY0NoYXJBdGxhcz12O3ZhciB5PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtyZXR1cm4gZS5jYWxsKHRoaXMpfHx0aGlzfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4hMX0sdH0ocy5CYXNlQ2hhckF0bGFzKTtmdW5jdGlvbiBnKGUsdCl7Zm9yKHZhciByPSEwLGk9dC5yZ2JhPj4+MjQsbj10LnJnYmE+Pj4xNiYyNTUsbz10LnJnYmE+Pj44JjI1NSxzPTA7czxlLmRhdGEubGVuZ3RoO3MrPTQpZS5kYXRhW3NdPT09aSYmZS5kYXRhW3MrMV09PT1uJiZlLmRhdGFbcysyXT09PW8/ZS5kYXRhW3MrM109MDpyPSExO3JldHVybiByfXQuTm9uZUNoYXJBdGxhcz15fSw3MDAxOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTFJVTWFwPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5jYXBhY2l0eT1lLHRoaXMuX21hcD17fSx0aGlzLl9oZWFkPW51bGwsdGhpcy5fdGFpbD1udWxsLHRoaXMuX25vZGVQb29sPVtdLHRoaXMuc2l6ZT0wfXJldHVybiBlLnByb3RvdHlwZS5fdW5saW5rTm9kZT1mdW5jdGlvbihlKXt2YXIgdD1lLnByZXYscj1lLm5leHQ7ZT09PXRoaXMuX2hlYWQmJih0aGlzLl9oZWFkPXIpLGU9PT10aGlzLl90YWlsJiYodGhpcy5fdGFpbD10KSxudWxsIT09dCYmKHQubmV4dD1yKSxudWxsIT09ciYmKHIucHJldj10KX0sZS5wcm90b3R5cGUuX2FwcGVuZE5vZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fdGFpbDtudWxsIT09dCYmKHQubmV4dD1lKSxlLnByZXY9dCxlLm5leHQ9bnVsbCx0aGlzLl90YWlsPWUsbnVsbD09PXRoaXMuX2hlYWQmJih0aGlzLl9oZWFkPWUpfSxlLnByb3RvdHlwZS5wcmVhbGxvYz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5fbm9kZVBvb2wscj0wO3I8ZTtyKyspdC5wdXNoKHtwcmV2Om51bGwsbmV4dDpudWxsLGtleTpudWxsLHZhbHVlOm51bGx9KX0sZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21hcFtlXTtyZXR1cm4gdm9pZCAwIT09dD8odGhpcy5fdW5saW5rTm9kZSh0KSx0aGlzLl9hcHBlbmROb2RlKHQpLHQudmFsdWUpOm51bGx9LGUucHJvdG90eXBlLnBlZWtWYWx1ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tYXBbZV07cmV0dXJuIHZvaWQgMCE9PXQ/dC52YWx1ZTpudWxsfSxlLnByb3RvdHlwZS5wZWVrPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5faGVhZDtyZXR1cm4gbnVsbD09PWU/bnVsbDplLnZhbHVlfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9tYXBbZV07aWYodm9pZCAwIT09cilyPXRoaXMuX21hcFtlXSx0aGlzLl91bmxpbmtOb2RlKHIpLHIudmFsdWU9dDtlbHNlIGlmKHRoaXMuc2l6ZT49dGhpcy5jYXBhY2l0eSlyPXRoaXMuX2hlYWQsdGhpcy5fdW5saW5rTm9kZShyKSxkZWxldGUgdGhpcy5fbWFwW3Iua2V5XSxyLmtleT1lLHIudmFsdWU9dCx0aGlzLl9tYXBbZV09cjtlbHNle3ZhciBpPXRoaXMuX25vZGVQb29sO2kubGVuZ3RoPjA/KChyPWkucG9wKCkpLmtleT1lLHIudmFsdWU9dCk6cj17cHJldjpudWxsLG5leHQ6bnVsbCxrZXk6ZSx2YWx1ZTp0fSx0aGlzLl9tYXBbZV09cix0aGlzLnNpemUrK310aGlzLl9hcHBlbmROb2RlKHIpfSxlfSgpO3QuTFJVTWFwPXJ9LDEyOTY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRG9tUmVuZGVyZXI9dm9pZCAwO3ZhciBjPXIoMzc4NyksbD1yKDg4MDMpLGg9cig4NDQpLHU9cig0NzI1KSxmPXIoMjU4NSksXz1yKDg0NjApLGQ9cig4MDU1KSxwPXIoOTYzMSksdj0ieHRlcm0tZG9tLXJlbmRlcmVyLW93bmVyLSIseT0ieHRlcm0tZmctIixnPSJ4dGVybS1iZy0iLG09Inh0ZXJtLWZvY3VzIixiPTEsUz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsbCxoLHUpe3ZhciBmPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZi5fY29sb3JzPXQsZi5fZWxlbWVudD1yLGYuX3NjcmVlbkVsZW1lbnQ9aSxmLl92aWV3cG9ydEVsZW1lbnQ9bixmLl9saW5raWZpZXI9byxmLl9saW5raWZpZXIyPXMsZi5fY2hhclNpemVTZXJ2aWNlPWwsZi5fb3B0aW9uc1NlcnZpY2U9aCxmLl9idWZmZXJTZXJ2aWNlPXUsZi5fdGVybWluYWxDbGFzcz1iKyssZi5fcm93RWxlbWVudHM9W10sZi5fcm93Q29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGYuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1yb3dzIiksZi5fcm93Q29udGFpbmVyLnN0eWxlLmxpbmVIZWlnaHQ9Im5vcm1hbCIsZi5fcm93Q29udGFpbmVyLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIiksZi5fcmVmcmVzaFJvd0VsZW1lbnRzKGYuX2J1ZmZlclNlcnZpY2UuY29scyxmLl9idWZmZXJTZXJ2aWNlLnJvd3MpLGYuX3NlbGVjdGlvbkNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxmLl9zZWxlY3Rpb25Db250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0tc2VsZWN0aW9uIiksZi5fc2VsZWN0aW9uQ29udGFpbmVyLnNldEF0dHJpYnV0ZSgiYXJpYS1oaWRkZW4iLCJ0cnVlIiksZi5kaW1lbnNpb25zPXtzY2FsZWRDaGFyV2lkdGg6MCxzY2FsZWRDaGFySGVpZ2h0OjAsc2NhbGVkQ2VsbFdpZHRoOjAsc2NhbGVkQ2VsbEhlaWdodDowLHNjYWxlZENoYXJMZWZ0OjAsc2NhbGVkQ2hhclRvcDowLHNjYWxlZENhbnZhc1dpZHRoOjAsc2NhbGVkQ2FudmFzSGVpZ2h0OjAsY2FudmFzV2lkdGg6MCxjYW52YXNIZWlnaHQ6MCxhY3R1YWxDZWxsV2lkdGg6MCxhY3R1YWxDZWxsSGVpZ2h0OjB9LGYuX3VwZGF0ZURpbWVuc2lvbnMoKSxmLl9pbmplY3RDc3MoKSxmLl9yb3dGYWN0b3J5PWEuY3JlYXRlSW5zdGFuY2UoYy5Eb21SZW5kZXJlclJvd0ZhY3RvcnksZG9jdW1lbnQsZi5fY29sb3JzKSxmLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoditmLl90ZXJtaW5hbENsYXNzKSxmLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKGYuX3Jvd0NvbnRhaW5lciksZi5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZChmLl9zZWxlY3Rpb25Db250YWluZXIpLGYucmVnaXN0ZXIoZi5fbGlua2lmaWVyLm9uU2hvd0xpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbkxpbmtIb3ZlcihlKX0pKSksZi5yZWdpc3RlcihmLl9saW5raWZpZXIub25IaWRlTGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTGlua0xlYXZlKGUpfSkpKSxmLnJlZ2lzdGVyKGYuX2xpbmtpZmllcjIub25TaG93TGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTGlua0hvdmVyKGUpfSkpKSxmLnJlZ2lzdGVyKGYuX2xpbmtpZmllcjIub25IaWRlTGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTGlua0xlYXZlKGUpfSkpKSxmfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZWRyYXciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4obmV3IF8uRXZlbnRFbWl0dGVyKS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHYrdGhpcy5fdGVybWluYWxDbGFzcyksKDAscC5yZW1vdmVFbGVtZW50RnJvbVBhcmVudCkodGhpcy5fcm93Q29udGFpbmVyLHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lcix0aGlzLl90aGVtZVN0eWxlRWxlbWVudCx0aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50KSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl91cGRhdGVEaW1lbnNpb25zPWZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoPXRoaXMuX2NoYXJTaXplU2VydmljZS53aWR0aCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodD1NYXRoLmNlaWwodGhpcy5fY2hhclNpemVTZXJ2aWNlLmhlaWdodCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aD10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhcldpZHRoK01hdGgucm91bmQodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sZXR0ZXJTcGFjaW5nKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodD1NYXRoLmZsb29yKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0KnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGluZUhlaWdodCksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJMZWZ0PTAsdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3A9MCx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGg9dGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aCp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodD10aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCp0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsdGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoPU1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoL3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0PU1hdGgucm91bmQodGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc0hlaWdodC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aD10aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGgvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQvdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO3RyeXtmb3IodmFyIHI9YSh0aGlzLl9yb3dFbGVtZW50cyksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpe3ZhciBuPWkudmFsdWU7bi5zdHlsZS53aWR0aD10aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGgrInB4IixuLnN0eWxlLmhlaWdodD10aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLG4uc3R5bGUubGluZUhlaWdodD10aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLG4uc3R5bGUub3ZlcmZsb3c9ImhpZGRlbiJ9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLl9kaW1lbnNpb25zU3R5bGVFbGVtZW50fHwodGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCkpO3ZhciBvPXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cyBzcGFuIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBoZWlnaHQ6IDEwMCU7IHZlcnRpY2FsLWFsaWduOiB0b3A7IHdpZHRoOiAiK3RoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgrInB4fSI7dGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudC50ZXh0Q29udGVudD1vLHRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5zdHlsZS5oZWlnaHQ9dGhpcy5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmhlaWdodCx0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLndpZHRoPXRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aCsicHgiLHRoaXMuX3NjcmVlbkVsZW1lbnQuc3R5bGUuaGVpZ2h0PXRoaXMuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQrInB4In0sdC5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbG9ycz1lLHRoaXMuX2luamVjdENzcygpfSx0LnByb3RvdHlwZS5faW5qZWN0Q3NzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLl90aGVtZVN0eWxlRWxlbWVudHx8KHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInN0eWxlIiksdGhpcy5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl90aGVtZVN0eWxlRWxlbWVudCkpO3ZhciB0PXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cyB7IGNvbG9yOiAiK3RoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcysiOyBmb250LWZhbWlseTogIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHkrIjsgZm9udC1zaXplOiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUrInB4O30iO3QrPXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiBzcGFuOm5vdCguIitjLkJPTERfQ0xBU1MrIikgeyBmb250LXdlaWdodDogIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHQrIjt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgc3Bhbi4iK2MuQk9MRF9DTEFTUysiIHsgZm9udC13ZWlnaHQ6ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0Qm9sZCsiO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiBzcGFuLiIrYy5JVEFMSUNfQ0xBU1MrIiB7IGZvbnQtc3R5bGU6IGl0YWxpYzt9Iix0Kz0iQGtleWZyYW1lcyBibGlua19ib3hfc2hhZG93XyIrdGhpcy5fdGVybWluYWxDbGFzcysiIHsgNTAlIHsgIGJveC1zaGFkb3c6IG5vbmU7IH19Iix0Kz0iQGtleWZyYW1lcyBibGlua19ibG9ja18iK3RoaXMuX3Rlcm1pbmFsQ2xhc3MrIiB7IDAlIHsgIGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIjsgIGNvbG9yOiAiK3RoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzKyI7IH0gNTAlIHsgIGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3MrIjsgIGNvbG9yOiAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyI7IH19Iix0Kz10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3M6bm90KC54dGVybS1mb2N1cykgLiIrYy5DVVJTT1JfQ0xBU1MrIi4iK2MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKyIgeyBvdXRsaW5lOiAxcHggc29saWQgIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiOyBvdXRsaW5lLW9mZnNldDogLTFweDt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3MueHRlcm0tZm9jdXMgLiIrYy5DVVJTT1JfQ0xBU1MrIi4iK2MuQ1VSU09SX0JMSU5LX0NMQVNTKyI6bm90KC4iK2MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKyIpIHsgYW5pbWF0aW9uOiBibGlua19ib3hfc2hhZG93XyIrdGhpcy5fdGVybWluYWxDbGFzcysiIDFzIHN0ZXAtZW5kIGluZmluaXRlO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cy54dGVybS1mb2N1cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfQkxJTktfQ0xBU1MrIi4iK2MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKyIgeyBhbmltYXRpb246IGJsaW5rX2Jsb2NrXyIrdGhpcy5fdGVybWluYWxDbGFzcysiIDFzIHN0ZXAtZW5kIGluZmluaXRlO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cy54dGVybS1mb2N1cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MrIiB7IGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIjsgY29sb3I6ICIrdGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3MrIjt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3MgLiIrYy5DVVJTT1JfQ0xBU1MrIi4iK2MuQ1VSU09SX1NUWUxFX0JBUl9DTEFTUysiIHsgYm94LXNoYWRvdzogIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvcldpZHRoKyJweCAwIDAgIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiIGluc2V0O30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tcm93cyAuIitjLkNVUlNPUl9DTEFTUysiLiIrYy5DVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTKyIgeyBib3gtc2hhZG93OiAwIC0xcHggMCAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyIgaW5zZXQ7fSIsdCs9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1zZWxlY3Rpb24geyBwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgei1pbmRleDogMTsgcG9pbnRlci1ldmVudHM6IG5vbmU7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1zZWxlY3Rpb24gZGl2IHsgcG9zaXRpb246IGFic29sdXRlOyBiYWNrZ3JvdW5kLWNvbG9yOiAiK3RoaXMuX2NvbG9ycy5zZWxlY3Rpb25PcGFxdWUuY3NzKyI7fSIsdGhpcy5fY29sb3JzLmFuc2kuZm9yRWFjaCgoZnVuY3Rpb24ocixpKXt0Kz1lLl90ZXJtaW5hbFNlbGVjdG9yKyIgLiIreStpKyIgeyBjb2xvcjogIityLmNzcysiOyB9IitlLl90ZXJtaW5hbFNlbGVjdG9yKyIgLiIrZytpKyIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAiK3IuY3NzKyI7IH0ifSkpLHQrPXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAuIit5K2wuSU5WRVJURURfREVGQVVMVF9DT0xPUisiIHsgY29sb3I6ICIrZC5jb2xvci5vcGFxdWUodGhpcy5fY29sb3JzLmJhY2tncm91bmQpLmNzcysiOyB9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLiIrZytsLklOVkVSVEVEX0RFRkFVTFRfQ09MT1IrIiB7IGJhY2tncm91bmQtY29sb3I6ICIrdGhpcy5fY29sb3JzLmZvcmVncm91bmQuY3NzKyI7IH0iLHRoaXMuX3RoZW1lU3R5bGVFbGVtZW50LnRleHRDb250ZW50PXR9LHQucHJvdG90eXBlLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZT1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKX0sdC5wcm90b3R5cGUuX3JlZnJlc2hSb3dFbGVtZW50cz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLl9yb3dFbGVtZW50cy5sZW5ndGg7cjw9dDtyKyspe3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChpKSx0aGlzLl9yb3dFbGVtZW50cy5wdXNoKGkpfWZvcig7dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoPnQ7KXRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9yb3dFbGVtZW50cy5wb3AoKSl9LHQucHJvdG90eXBlLm9uUmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVmcmVzaFJvd0VsZW1lbnRzKGUsdCksdGhpcy5fdXBkYXRlRGltZW5zaW9ucygpfSx0LnByb3RvdHlwZS5vbkNoYXJTaXplQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKX0sdC5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7dGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUobSl9LHQucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt0aGlzLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZChtKX0sdC5wcm90b3R5cGUub25TZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKGUsdCxyKXtmb3IoO3RoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGg7KXRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5yZW1vdmVDaGlsZCh0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuY2hpbGRyZW5bMF0pO2lmKHRoaXMuX3Jvd0ZhY3Rvcnkub25TZWxlY3Rpb25DaGFuZ2VkKGUsdCxyKSx0aGlzLnJlbmRlclJvd3MoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksZSYmdCl7dmFyIGk9ZVsxXS10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxuPXRbMV0tdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbz1NYXRoLm1heChpLDApLHM9TWF0aC5taW4obix0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSk7aWYoIShvPj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N8fHM8MCkpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtpZihyKXt2YXIgYz1lWzBdPnRbMF07YS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KG8sYz90WzBdOmVbMF0sYz9lWzBdOnRbMF0scy1vKzEpKX1lbHNle3ZhciBsPWk9PT1vP2VbMF06MCxoPW89PT1uP3RbMF06dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2EuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChvLGwsaCkpO3ZhciB1PXMtby0xO2lmKGEuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChvKzEsMCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdSkpLG8hPT1zKXt2YXIgZj1uPT09cz90WzBdOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczthLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQocywwLGYpKX19dGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmFwcGVuZENoaWxkKGEpfX19LHQucHJvdG90eXBlLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50PWZ1bmN0aW9uKGUsdCxyLGkpe3ZvaWQgMD09PWkmJihpPTEpO3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3JldHVybiBuLnN0eWxlLmhlaWdodD1pKnRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsbi5zdHlsZS50b3A9ZSp0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLG4uc3R5bGUubGVmdD10KnRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgrInB4IixuLnN0eWxlLndpZHRoPXRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgqKHItdCkrInB4IixufSx0LnByb3RvdHlwZS5vbkN1cnNvck1vdmU9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVEaW1lbnNpb25zKCksdGhpcy5faW5qZWN0Q3NzKCl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPWEodGhpcy5fcm93RWxlbWVudHMpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKWkudmFsdWUuaW5uZXJUZXh0PSIifWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19LHQucHJvdG90eXBlLnJlbmRlclJvd3M9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UrdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSxpPU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpLG49dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JCbGluayxvPWU7bzw9dDtvKyspe3ZhciBzPXRoaXMuX3Jvd0VsZW1lbnRzW29dO3MuaW5uZXJUZXh0PSIiO3ZhciBhPW8rdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsYz10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoYSksbD10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlO3MuYXBwZW5kQ2hpbGQodGhpcy5fcm93RmFjdG9yeS5jcmVhdGVSb3coYyxhLGE9PT1yLGwsaSxuLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIl90ZXJtaW5hbFNlbGVjdG9yIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIi4iK3YrdGhpcy5fdGVybWluYWxDbGFzc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5fb25MaW5rSG92ZXI9ZnVuY3Rpb24oZSl7dGhpcy5fc2V0Q2VsbFVuZGVybGluZShlLngxLGUueDIsZS55MSxlLnkyLGUuY29scywhMCl9LHQucHJvdG90eXBlLl9vbkxpbmtMZWF2ZT1mdW5jdGlvbihlKXt0aGlzLl9zZXRDZWxsVW5kZXJsaW5lKGUueDEsZS54MixlLnkxLGUueTIsZS5jb2xzLCExKX0sdC5wcm90b3R5cGUuX3NldENlbGxVbmRlcmxpbmU9ZnVuY3Rpb24oZSx0LHIsaSxuLG8pe2Zvcig7ZSE9PXR8fHIhPT1pOyl7dmFyIHM9dGhpcy5fcm93RWxlbWVudHNbcl07aWYoIXMpcmV0dXJuO3ZhciBhPXMuY2hpbGRyZW5bZV07YSYmKGEuc3R5bGUudGV4dERlY29yYXRpb249bz8idW5kZXJsaW5lIjoibm9uZSIpLCsrZT49biYmKGU9MCxyKyspfX0sbyhbcyg2LGYuSUluc3RhbnRpYXRpb25TZXJ2aWNlKSxzKDcsdS5JQ2hhclNpemVTZXJ2aWNlKSxzKDgsZi5JT3B0aW9uc1NlcnZpY2UpLHMoOSxmLklCdWZmZXJTZXJ2aWNlKV0sdCl9KGguRGlzcG9zYWJsZSk7dC5Eb21SZW5kZXJlcj1TfSwzNzg3OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRG9tUmVuZGVyZXJSb3dGYWN0b3J5PXQuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUz10LkNVUlNPUl9TVFlMRV9CQVJfQ0xBU1M9dC5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1M9dC5DVVJTT1JfQkxJTktfQ0xBU1M9dC5DVVJTT1JfQ0xBU1M9dC5TVFJJS0VUSFJPVUdIX0NMQVNTPXQuVU5ERVJMSU5FX0NMQVNTPXQuSVRBTElDX0NMQVNTPXQuRElNX0NMQVNTPXQuQk9MRF9DTEFTUz12b2lkIDA7dmFyIHM9cig4ODAzKSxhPXIoNjQzKSxjPXIoNTExKSxsPXIoMjU4NSksaD1yKDgwNTUpLHU9cig0NzI1KSxmPXIoNDI2OSksXz1yKDE3NTIpO3QuQk9MRF9DTEFTUz0ieHRlcm0tYm9sZCIsdC5ESU1fQ0xBU1M9Inh0ZXJtLWRpbSIsdC5JVEFMSUNfQ0xBU1M9Inh0ZXJtLWl0YWxpYyIsdC5VTkRFUkxJTkVfQ0xBU1M9Inh0ZXJtLXVuZGVybGluZSIsdC5TVFJJS0VUSFJPVUdIX0NMQVNTPSJ4dGVybS1zdHJpa2V0aHJvdWdoIix0LkNVUlNPUl9DTEFTUz0ieHRlcm0tY3Vyc29yIix0LkNVUlNPUl9CTElOS19DTEFTUz0ieHRlcm0tY3Vyc29yLWJsaW5rIix0LkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUz0ieHRlcm0tY3Vyc29yLWJsb2NrIix0LkNVUlNPUl9TVFlMRV9CQVJfQ0xBU1M9Inh0ZXJtLWN1cnNvci1iYXIiLHQuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUz0ieHRlcm0tY3Vyc29yLXVuZGVybGluZSI7dmFyIGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksbixvKXt0aGlzLl9kb2N1bWVudD1lLHRoaXMuX2NvbG9ycz10LHRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2U9cix0aGlzLl9vcHRpb25zU2VydmljZT1pLHRoaXMuX2NvcmVTZXJ2aWNlPW4sdGhpcy5fZGVjb3JhdGlvblNlcnZpY2U9byx0aGlzLl93b3JrQ2VsbD1uZXcgYy5DZWxsRGF0YSx0aGlzLl9jb2x1bW5TZWxlY3RNb2RlPSExfXJldHVybiBlLnByb3RvdHlwZS5zZXRDb2xvcnM9ZnVuY3Rpb24oZSl7dGhpcy5fY29sb3JzPWV9LGUucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihlLHQscil7dGhpcy5fc2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLl9zZWxlY3Rpb25FbmQ9dCx0aGlzLl9jb2x1bW5TZWxlY3RNb2RlPXJ9LGUucHJvdG90eXBlLmNyZWF0ZVJvdz1mdW5jdGlvbihlLHIsaSxuLGMsbCx1LF8pe2Zvcih2YXIgZCx2LHk9dGhpcy5fZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLGc9dGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5nZXRKb2luZWRDaGFyYWN0ZXJzKHIpLG09MCxiPU1hdGgubWluKGUubGVuZ3RoLF8pLTE7Yj49MDtiLS0paWYoZS5sb2FkQ2VsbChiLHRoaXMuX3dvcmtDZWxsKS5nZXRDb2RlKCkhPT1hLk5VTExfQ0VMTF9DT0RFfHxpJiZiPT09Yyl7bT1iKzE7YnJlYWt9Zm9yKGI9MDtiPG07YisrKXtlLmxvYWRDZWxsKGIsdGhpcy5fd29ya0NlbGwpO3ZhciBTPXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCk7aWYoMCE9PVMpe3ZhciBDPSExLHc9YixMPXRoaXMuX3dvcmtDZWxsO2lmKGcubGVuZ3RoPjAmJmI9PT1nWzBdWzBdKXtDPSEwO3ZhciBFPWcuc2hpZnQoKTtMPW5ldyBmLkpvaW5lZENlbGxEYXRhKHRoaXMuX3dvcmtDZWxsLGUudHJhbnNsYXRlVG9TdHJpbmcoITAsRVswXSxFWzFdKSxFWzFdLUVbMF0pLHc9RVsxXS0xLFM9TC5nZXRXaWR0aCgpfXZhciB4PXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKTtpZihTPjEmJih4LnN0eWxlLndpZHRoPXUqUysicHgiKSxDJiYoeC5zdHlsZS5kaXNwbGF5PSJpbmxpbmUiLGM+PWImJmM8PXcmJihjPWIpKSwhdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW4mJmkmJmI9PT1jKXN3aXRjaCh4LmNsYXNzTGlzdC5hZGQodC5DVVJTT1JfQ0xBU1MpLGwmJnguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9CTElOS19DTEFTUyksbil7Y2FzZSJiYXIiOnguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9TVFlMRV9CQVJfQ0xBU1MpO2JyZWFrO2Nhc2UidW5kZXJsaW5lIjp4LmNsYXNzTGlzdC5hZGQodC5DVVJTT1JfU1RZTEVfVU5ERVJMSU5FX0NMQVNTKTticmVhaztkZWZhdWx0OnguY2xhc3NMaXN0LmFkZCh0LkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUyl9TC5pc0JvbGQoKSYmeC5jbGFzc0xpc3QuYWRkKHQuQk9MRF9DTEFTUyksTC5pc0l0YWxpYygpJiZ4LmNsYXNzTGlzdC5hZGQodC5JVEFMSUNfQ0xBU1MpLEwuaXNEaW0oKSYmeC5jbGFzc0xpc3QuYWRkKHQuRElNX0NMQVNTKSxMLmlzVW5kZXJsaW5lKCkmJnguY2xhc3NMaXN0LmFkZCh0LlVOREVSTElORV9DTEFTUyksTC5pc0ludmlzaWJsZSgpP3gudGV4dENvbnRlbnQ9YS5XSElURVNQQUNFX0NFTExfQ0hBUjp4LnRleHRDb250ZW50PUwuZ2V0Q2hhcnMoKXx8YS5XSElURVNQQUNFX0NFTExfQ0hBUixMLmlzU3RyaWtldGhyb3VnaCgpJiZ4LmNsYXNzTGlzdC5hZGQodC5TVFJJS0VUSFJPVUdIX0NMQVNTKTt2YXIgUj1MLmdldEZnQ29sb3IoKSxrPUwuZ2V0RmdDb2xvck1vZGUoKSxNPUwuZ2V0QmdDb2xvcigpLEE9TC5nZXRCZ0NvbG9yTW9kZSgpLE89ISFMLmlzSW52ZXJzZSgpO2lmKE8pe3ZhciBEPVI7Uj1NLE09RDt2YXIgVD1rO2s9QSxBPVR9dmFyIEI9dm9pZCAwLFA9dm9pZCAwLEk9ITE7dHJ5e2Zvcih2YXIgSD0oZD12b2lkIDAsbyh0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5nZXREZWNvcmF0aW9uc0F0Q2VsbChiLHIpKSksaj1ILm5leHQoKTshai5kb25lO2o9SC5uZXh0KCkpe3ZhciBGPWoudmFsdWU7InRvcCIhPT1GLm9wdGlvbnMubGF5ZXImJkl8fChGLmJhY2tncm91bmRDb2xvclJHQiYmKEE9NTAzMzE2NDgsTT1GLmJhY2tncm91bmRDb2xvclJHQi5yZ2JhPj44JjE2Nzc3MjE1LEI9Ri5iYWNrZ3JvdW5kQ29sb3JSR0IpLEYuZm9yZWdyb3VuZENvbG9yUkdCJiYoaz01MDMzMTY0OCxSPUYuZm9yZWdyb3VuZENvbG9yUkdCLnJnYmE+PjgmMTY3NzcyMTUsUD1GLmZvcmVncm91bmRDb2xvclJHQiksST0idG9wIj09PUYub3B0aW9ucy5sYXllcil9fWNhdGNoKGUpe2Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2omJiFqLmRvbmUmJih2PUgucmV0dXJuKSYmdi5jYWxsKEgpfWZpbmFsbHl7aWYoZCl0aHJvdyBkLmVycm9yfX12YXIgVz10aGlzLl9pc0NlbGxJblNlbGVjdGlvbihiLHIpO0l8fHRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kJiZXJiYoaz01MDMzMTY0OCxSPXRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kLnJnYmE+PjgmMTY3NzcyMTUsUD10aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCksVyYmKEI9dGhpcy5fY29sb3JzLnNlbGVjdGlvbk9wYXF1ZSxJPSEwKSxJJiZ4LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWRlY29yYXRpb24tdG9wIik7dmFyIFU9dm9pZCAwO3N3aXRjaChBKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6VT10aGlzLl9jb2xvcnMuYW5zaVtNXSx4LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWJnLSIrTSk7YnJlYWs7Y2FzZSA1MDMzMTY0ODpVPWgucmdiYS50b0NvbG9yKE0+PjE2LE0+PjgmMjU1LDI1NSZNKSx0aGlzLl9hZGRTdHlsZSh4LCJiYWNrZ3JvdW5kLWNvbG9yOiMiK3AoKE0+Pj4wKS50b1N0cmluZygxNiksIjAiLDYpKTticmVhaztkZWZhdWx0Ok8/KFU9dGhpcy5fY29sb3JzLmZvcmVncm91bmQseC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1iZy0iK3MuSU5WRVJURURfREVGQVVMVF9DT0xPUikpOlU9dGhpcy5fY29sb3JzLmJhY2tncm91bmR9c3dpdGNoKGspe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpMLmlzQm9sZCgpJiZSPDgmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJihSKz04KSx0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdCh4LFUsdGhpcy5fY29sb3JzLmFuc2lbUl0sTCxCLHZvaWQgMCl8fHguY2xhc3NMaXN0LmFkZCgieHRlcm0tZmctIitSKTticmVhaztjYXNlIDUwMzMxNjQ4OnZhciBxPWgucmdiYS50b0NvbG9yKFI+PjE2JjI1NSxSPj44JjI1NSwyNTUmUik7dGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoeCxVLHEsTCxCLFApfHx0aGlzLl9hZGRTdHlsZSh4LCJjb2xvcjojIitwKFIudG9TdHJpbmcoMTYpLCIwIiw2KSk7YnJlYWs7ZGVmYXVsdDp0aGlzLl9hcHBseU1pbmltdW1Db250cmFzdCh4LFUsdGhpcy5fY29sb3JzLmZvcmVncm91bmQsTCxCLHZvaWQgMCl8fE8mJnguY2xhc3NMaXN0LmFkZCgieHRlcm0tZmctIitzLklOVkVSVEVEX0RFRkFVTFRfQ09MT1IpfXkuYXBwZW5kQ2hpbGQoeCksYj13fX1yZXR1cm4geX0sZS5wcm90b3R5cGUuX2FwcGx5TWluaW11bUNvbnRyYXN0PWZ1bmN0aW9uKGUsdCxyLGksbixvKXtpZigxPT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpb3x8KDAsXy5leGNsdWRlRnJvbUNvbnRyYXN0UmF0aW9EZW1hbmRzKShpLmdldENvZGUoKSkpcmV0dXJuITE7dmFyIHM9dm9pZCAwO3JldHVybiBufHxvfHwocz10aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5nZXRDb2xvcih0LnJnYmEsci5yZ2JhKSksdm9pZCAwPT09cyYmKHM9aC5jb2xvci5lbnN1cmVDb250cmFzdFJhdGlvKG58fHQsb3x8cix0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1pbmltdW1Db250cmFzdFJhdGlvKSx0aGlzLl9jb2xvcnMuY29udHJhc3RDYWNoZS5zZXRDb2xvcigobnx8dCkucmdiYSwob3x8cikucmdiYSxudWxsIT1zP3M6bnVsbCkpLCEhcyYmKHRoaXMuX2FkZFN0eWxlKGUsImNvbG9yOiIrcy5jc3MpLCEwKX0sZS5wcm90b3R5cGUuX2FkZFN0eWxlPWZ1bmN0aW9uKGUsdCl7ZS5zZXRBdHRyaWJ1dGUoInN0eWxlIiwiIisoZS5nZXRBdHRyaWJ1dGUoInN0eWxlIil8fCIiKSt0KyI7Iil9LGUucHJvdG90eXBlLl9pc0NlbGxJblNlbGVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX3NlbGVjdGlvblN0YXJ0LGk9dGhpcy5fc2VsZWN0aW9uRW5kO3JldHVybiEoIXJ8fCFpKSYmKHRoaXMuX2NvbHVtblNlbGVjdE1vZGU/clswXTw9aVswXT9lPj1yWzBdJiZ0Pj1yWzFdJiZlPGlbMF0mJnQ8PWlbMV06ZTxyWzBdJiZ0Pj1yWzFdJiZlPj1pWzBdJiZ0PD1pWzFdOnQ+clsxXSYmdDxpWzFdfHxyWzFdPT09aVsxXSYmdD09PXJbMV0mJmU+PXJbMF0mJmU8aVswXXx8clsxXTxpWzFdJiZ0PT09aVsxXSYmZTxpWzBdfHxyWzFdPGlbMV0mJnQ9PT1yWzFdJiZlPj1yWzBdKX0saShbbigyLHUuSUNoYXJhY3RlckpvaW5lclNlcnZpY2UpLG4oMyxsLklPcHRpb25zU2VydmljZSksbig0LGwuSUNvcmVTZXJ2aWNlKSxuKDUsbC5JRGVjb3JhdGlvblNlcnZpY2UpXSxlKX0oKTtmdW5jdGlvbiBwKGUsdCxyKXtmb3IoO2UubGVuZ3RoPHI7KWU9dCtlO3JldHVybiBlfXQuRG9tUmVuZGVyZXJSb3dGYWN0b3J5PWR9LDQ1NjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNlbGVjdGlvbk1vZGVsPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aD0wfXJldHVybiBlLnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuc2VsZWN0aW9uU3RhcnQ9dm9pZCAwLHRoaXMuc2VsZWN0aW9uRW5kPXZvaWQgMCx0aGlzLmlzU2VsZWN0QWxsQWN0aXZlPSExLHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGg9MH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJmaW5hbFNlbGVjdGlvblN0YXJ0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU/WzAsMF06dGhpcy5zZWxlY3Rpb25FbmQmJnRoaXMuc2VsZWN0aW9uU3RhcnQmJnRoaXMuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKT90aGlzLnNlbGVjdGlvbkVuZDp0aGlzLnNlbGVjdGlvblN0YXJ0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZmluYWxTZWxlY3Rpb25FbmQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZT9bdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlK3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xXTp0aGlzLnNlbGVjdGlvblN0YXJ0PyF0aGlzLnNlbGVjdGlvbkVuZHx8dGhpcy5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpPyhlPXRoaXMuc2VsZWN0aW9uU3RhcnRbMF0rdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aCk+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzP2UldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzPT0wP1t0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5zZWxlY3Rpb25TdGFydFsxXStNYXRoLmZsb29yKGUvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKS0xXTpbZSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5zZWxlY3Rpb25TdGFydFsxXStNYXRoLmZsb29yKGUvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKV06W2UsdGhpcy5zZWxlY3Rpb25TdGFydFsxXV06dGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aCYmdGhpcy5zZWxlY3Rpb25FbmRbMV09PT10aGlzLnNlbGVjdGlvblN0YXJ0WzFdPyhlPXRoaXMuc2VsZWN0aW9uU3RhcnRbMF0rdGhpcy5zZWxlY3Rpb25TdGFydExlbmd0aCk+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzP1tlJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLnNlbGVjdGlvblN0YXJ0WzFdK01hdGguZmxvb3IoZS90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpXTpbTWF0aC5tYXgoZSx0aGlzLnNlbGVjdGlvbkVuZFswXSksdGhpcy5zZWxlY3Rpb25FbmRbMV1dOnRoaXMuc2VsZWN0aW9uRW5kOnZvaWQgMDt2YXIgZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuc2VsZWN0aW9uU3RhcnQsdD10aGlzLnNlbGVjdGlvbkVuZDtyZXR1cm4hKCFlfHwhdCkmJihlWzFdPnRbMV18fGVbMV09PT10WzFdJiZlWzBdPnRbMF0pfSxlLnByb3RvdHlwZS5vblRyaW09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuc2VsZWN0aW9uU3RhcnQmJih0aGlzLnNlbGVjdGlvblN0YXJ0WzFdLT1lKSx0aGlzLnNlbGVjdGlvbkVuZCYmKHRoaXMuc2VsZWN0aW9uRW5kWzFdLT1lKSx0aGlzLnNlbGVjdGlvbkVuZCYmdGhpcy5zZWxlY3Rpb25FbmRbMV08MD8odGhpcy5jbGVhclNlbGVjdGlvbigpLCEwKToodGhpcy5zZWxlY3Rpb25TdGFydCYmdGhpcy5zZWxlY3Rpb25TdGFydFsxXTwwJiYodGhpcy5zZWxlY3Rpb25TdGFydFsxXT0wKSwhMSl9LGV9KCk7dC5TZWxlY3Rpb25Nb2RlbD1yfSw0Mjg6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DaGFyU2l6ZVNlcnZpY2U9dm9pZCAwO3ZhciBvPXIoMjU4NSkscz1yKDg0NjApLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9vcHRpb25zU2VydmljZT1yLHRoaXMud2lkdGg9MCx0aGlzLmhlaWdodD0wLHRoaXMuX29uQ2hhclNpemVDaGFuZ2U9bmV3IHMuRXZlbnRFbWl0dGVyLHRoaXMuX21lYXN1cmVTdHJhdGVneT1uZXcgYyhlLHQsdGhpcy5fb3B0aW9uc1NlcnZpY2UpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImhhc1ZhbGlkU2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLndpZHRoPjAmJnRoaXMuaGVpZ2h0PjB9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkNoYXJTaXplQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ2hhclNpemVDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUubWVhc3VyZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX21lYXN1cmVTdHJhdGVneS5tZWFzdXJlKCk7ZS53aWR0aD09PXRoaXMud2lkdGgmJmUuaGVpZ2h0PT09dGhpcy5oZWlnaHR8fCh0aGlzLndpZHRoPWUud2lkdGgsdGhpcy5oZWlnaHQ9ZS5oZWlnaHQsdGhpcy5fb25DaGFyU2l6ZUNoYW5nZS5maXJlKCkpfSxpKFtuKDIsby5JT3B0aW9uc1NlcnZpY2UpXSxlKX0oKTt0LkNoYXJTaXplU2VydmljZT1hO3ZhciBjPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fZG9jdW1lbnQ9ZSx0aGlzLl9wYXJlbnRFbGVtZW50PXQsdGhpcy5fb3B0aW9uc1NlcnZpY2U9cix0aGlzLl9yZXN1bHQ9e3dpZHRoOjAsaGVpZ2h0OjB9LHRoaXMuX21lYXN1cmVFbGVtZW50PXRoaXMuX2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNwYW4iKSx0aGlzLl9tZWFzdXJlRWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1jaGFyLW1lYXN1cmUtZWxlbWVudCIpLHRoaXMuX21lYXN1cmVFbGVtZW50LnRleHRDb250ZW50PSJXIix0aGlzLl9tZWFzdXJlRWxlbWVudC5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLHRoaXMuX3BhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fbWVhc3VyZUVsZW1lbnQpfXJldHVybiBlLnByb3RvdHlwZS5tZWFzdXJlPWZ1bmN0aW9uKCl7dGhpcy5fbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udEZhbWlseT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRGYW1pbHksdGhpcy5fbWVhc3VyZUVsZW1lbnQuc3R5bGUuZm9udFNpemU9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSsicHgiO3ZhciBlPXRoaXMuX21lYXN1cmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybiAwIT09ZS53aWR0aCYmMCE9PWUuaGVpZ2h0JiYodGhpcy5fcmVzdWx0LndpZHRoPWUud2lkdGgsdGhpcy5fcmVzdWx0LmhlaWdodD1NYXRoLmNlaWwoZS5oZWlnaHQpKSx0aGlzLl9yZXN1bHR9LGV9KCl9LDQyNjk6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ2hhcmFjdGVySm9pbmVyU2VydmljZT10LkpvaW5lZENlbGxEYXRhPXZvaWQgMDt2YXIgYT1yKDM3MzQpLGM9cig2NDMpLGw9cig1MTEpLGg9cigyNTg1KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGkpe3ZhciBuPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5jb250ZW50PTAsbi5jb21iaW5lZERhdGE9IiIsbi5mZz10LmZnLG4uYmc9dC5iZyxuLmNvbWJpbmVkRGF0YT1yLG4uX3dpZHRoPWksbn1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmlzQ29tYmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gMjA5NzE1Mn0sdC5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd2lkdGh9LHQucHJvdG90eXBlLmdldENoYXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29tYmluZWREYXRhfSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIDIwOTcxNTF9LHQucHJvdG90eXBlLnNldEZyb21DaGFyRGF0YT1mdW5jdGlvbihlKXt0aHJvdyBuZXcgRXJyb3IoIm5vdCBpbXBsZW1lbnRlZCIpfSx0LnByb3RvdHlwZS5nZXRBc0NoYXJEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZmcsdGhpcy5nZXRDaGFycygpLHRoaXMuZ2V0V2lkdGgoKSx0aGlzLmdldENvZGUoKV19LHR9KGEuQXR0cmlidXRlRGF0YSk7dC5Kb2luZWRDZWxsRGF0YT11O3ZhciBmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5fY2hhcmFjdGVySm9pbmVycz1bXSx0aGlzLl9uZXh0Q2hhcmFjdGVySm9pbmVySWQ9MCx0aGlzLl93b3JrQ2VsbD1uZXcgbC5DZWxsRGF0YX1yZXR1cm4gZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9e2lkOnRoaXMuX25leHRDaGFyYWN0ZXJKb2luZXJJZCsrLGhhbmRsZXI6ZX07cmV0dXJuIHRoaXMuX2NoYXJhY3RlckpvaW5lcnMucHVzaCh0KSx0LmlkfSxlLnByb3RvdHlwZS5kZXJlZ2lzdGVyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8dGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGg7dCsrKWlmKHRoaXMuX2NoYXJhY3RlckpvaW5lcnNbdF0uaWQ9PT1lKXJldHVybiB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnNwbGljZSh0LDEpLCEwO3JldHVybiExfSxlLnByb3RvdHlwZS5nZXRKb2luZWRDaGFyYWN0ZXJzPWZ1bmN0aW9uKGUpe2lmKDA9PT10aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aClyZXR1cm5bXTt2YXIgdD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQoZSk7aWYoIXR8fDA9PT10Lmxlbmd0aClyZXR1cm5bXTtmb3IodmFyIHI9W10saT10LnRyYW5zbGF0ZVRvU3RyaW5nKCEwKSxuPTAsbz0wLHM9MCxhPXQuZ2V0RmcoMCksbD10LmdldEJnKDApLGg9MDtoPHQuZ2V0VHJpbW1lZExlbmd0aCgpO2grKylpZih0LmxvYWRDZWxsKGgsdGhpcy5fd29ya0NlbGwpLDAhPT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpKXtpZih0aGlzLl93b3JrQ2VsbC5mZyE9PWF8fHRoaXMuX3dvcmtDZWxsLmJnIT09bCl7aWYoaC1uPjEpZm9yKHZhciB1PXRoaXMuX2dldEpvaW5lZFJhbmdlcyhpLHMsbyx0LG4pLGY9MDtmPHUubGVuZ3RoO2YrKylyLnB1c2godVtmXSk7bj1oLHM9byxhPXRoaXMuX3dvcmtDZWxsLmZnLGw9dGhpcy5fd29ya0NlbGwuYmd9bys9dGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGh8fGMuV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RofWlmKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy1uPjEpZm9yKHU9dGhpcy5fZ2V0Sm9pbmVkUmFuZ2VzKGkscyxvLHQsbiksZj0wO2Y8dS5sZW5ndGg7ZisrKXIucHVzaCh1W2ZdKTtyZXR1cm4gcn0sZS5wcm90b3R5cGUuX2dldEpvaW5lZFJhbmdlcz1mdW5jdGlvbih0LHIsaSxuLG8pe3ZhciBzPXQuc3Vic3RyaW5nKHIsaSksYT1bXTt0cnl7YT10aGlzLl9jaGFyYWN0ZXJKb2luZXJzWzBdLmhhbmRsZXIocyl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX1mb3IodmFyIGM9MTtjPHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoO2MrKyl0cnl7Zm9yKHZhciBsPXRoaXMuX2NoYXJhY3RlckpvaW5lcnNbY10uaGFuZGxlcihzKSxoPTA7aDxsLmxlbmd0aDtoKyspZS5fbWVyZ2VSYW5nZXMoYSxsW2hdKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpfXJldHVybiB0aGlzLl9zdHJpbmdSYW5nZXNUb0NlbGxSYW5nZXMoYSxuLG8pLGF9LGUucHJvdG90eXBlLl9zdHJpbmdSYW5nZXNUb0NlbGxSYW5nZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPTAsbj0hMSxvPTAscz1lW2ldO2lmKHMpe2Zvcih2YXIgYT1yO2E8dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzO2ErKyl7dmFyIGw9dC5nZXRXaWR0aChhKSxoPXQuZ2V0U3RyaW5nKGEpLmxlbmd0aHx8Yy5XSElURVNQQUNFX0NFTExfQ0hBUi5sZW5ndGg7aWYoMCE9PWwpe2lmKCFuJiZzWzBdPD1vJiYoc1swXT1hLG49ITApLHNbMV08PW8pe2lmKHNbMV09YSwhKHM9ZVsrK2ldKSlicmVhaztzWzBdPD1vPyhzWzBdPWEsbj0hMCk6bj0hMX1vKz1ofX1zJiYoc1sxXT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpfX0sZS5fbWVyZ2VSYW5nZXM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ITEsaT0wO2k8ZS5sZW5ndGg7aSsrKXt2YXIgbj1lW2ldO2lmKHIpe2lmKHRbMV08PW5bMF0pcmV0dXJuIGVbaS0xXVsxXT10WzFdLGU7aWYodFsxXTw9blsxXSlyZXR1cm4gZVtpLTFdWzFdPU1hdGgubWF4KHRbMV0sblsxXSksZS5zcGxpY2UoaSwxKSxlO2Uuc3BsaWNlKGksMSksaS0tfWVsc2V7aWYodFsxXTw9blswXSlyZXR1cm4gZS5zcGxpY2UoaSwwLHQpLGU7aWYodFsxXTw9blsxXSlyZXR1cm4gblswXT1NYXRoLm1pbih0WzBdLG5bMF0pLGU7dFswXTxuWzFdJiYoblswXT1NYXRoLm1pbih0WzBdLG5bMF0pLHI9ITApfX1yZXR1cm4gcj9lW2UubGVuZ3RoLTFdWzFdPXRbMV06ZS5wdXNoKHQpLGV9LGU9byhbcygwLGguSUJ1ZmZlclNlcnZpY2UpXSxlKX0oKTt0LkNoYXJhY3RlckpvaW5lclNlcnZpY2U9Zn0sNTExNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvcmVCcm93c2VyU2VydmljZT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX3RleHRhcmVhPWV9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNGb2N1c2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuX3RleHRhcmVhLmdldFJvb3ROb2RlP3RoaXMuX3RleHRhcmVhLmdldFJvb3ROb2RlKCk6ZG9jdW1lbnQpLmFjdGl2ZUVsZW1lbnQ9PT10aGlzLl90ZXh0YXJlYSYmZG9jdW1lbnQuaGFzRm9jdXMoKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlfSgpO3QuQ29yZUJyb3dzZXJTZXJ2aWNlPXJ9LDg5MzQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Nb3VzZVNlcnZpY2U9dm9pZCAwO3ZhciBvPXIoNDcyNSkscz1yKDk4MDYpLGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fcmVuZGVyU2VydmljZT1lLHRoaXMuX2NoYXJTaXplU2VydmljZT10fXJldHVybiBlLnByb3RvdHlwZS5nZXRDb29yZHM9ZnVuY3Rpb24oZSx0LHIsaSxuKXtyZXR1cm4oMCxzLmdldENvb3Jkcykod2luZG93LGUsdCxyLGksdGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSx0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoLHRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0LG4pfSxlLnByb3RvdHlwZS5nZXRSYXdCeXRlQ29vcmRzPWZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuPXRoaXMuZ2V0Q29vcmRzKGUsdCxyLGkpO3JldHVybigwLHMuZ2V0UmF3Qnl0ZUNvb3Jkcykobil9LGkoW24oMCxvLklSZW5kZXJTZXJ2aWNlKSxuKDEsby5JQ2hhclNpemVTZXJ2aWNlKV0sZSl9KCk7dC5Nb3VzZVNlcnZpY2U9YX0sMzIzMDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5SZW5kZXJTZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDYxOTMpLGM9cig4NDYwKSxsPXIoODQ0KSxoPXIoNTU5NiksdT1yKDM2NTYpLGY9cigyNTg1KSxfPXIoNDcyNSksZD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGwpe3ZhciBmPWUuY2FsbCh0aGlzKXx8dGhpcztpZihmLl9yZW5kZXJlcj10LGYuX3Jvd0NvdW50PXIsZi5fY2hhclNpemVTZXJ2aWNlPW8sZi5faXNQYXVzZWQ9ITEsZi5fbmVlZHNGdWxsUmVmcmVzaD0hMSxmLl9pc05leHRSZW5kZXJSZWRyYXdPbmx5PSEwLGYuX25lZWRzU2VsZWN0aW9uUmVmcmVzaD0hMSxmLl9jYW52YXNXaWR0aD0wLGYuX2NhbnZhc0hlaWdodD0wLGYuX3NlbGVjdGlvblN0YXRlPXtzdGFydDp2b2lkIDAsZW5kOnZvaWQgMCxjb2x1bW5TZWxlY3RNb2RlOiExfSxmLl9vbkRpbWVuc2lvbnNDaGFuZ2U9bmV3IGMuRXZlbnRFbWl0dGVyLGYuX29uUmVuZGVyZWRWaWV3cG9ydENoYW5nZT1uZXcgYy5FdmVudEVtaXR0ZXIsZi5fb25SZW5kZXI9bmV3IGMuRXZlbnRFbWl0dGVyLGYuX29uUmVmcmVzaFJlcXVlc3Q9bmV3IGMuRXZlbnRFbWl0dGVyLGYucmVnaXN0ZXIoe2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gZi5fcmVuZGVyZXIuZGlzcG9zZSgpfX0pLGYuX3JlbmRlckRlYm91bmNlcj1uZXcgYS5SZW5kZXJEZWJvdW5jZXIoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGYuX3JlbmRlclJvd3MoZSx0KX0pKSxmLnJlZ2lzdGVyKGYuX3JlbmRlckRlYm91bmNlciksZi5fc2NyZWVuRHByTW9uaXRvcj1uZXcgaC5TY3JlZW5EcHJNb25pdG9yLGYuX3NjcmVlbkRwck1vbml0b3Iuc2V0TGlzdGVuZXIoKGZ1bmN0aW9uKCl7cmV0dXJuIGYub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCl9KSksZi5yZWdpc3RlcihmLl9zY3JlZW5EcHJNb25pdG9yKSxmLnJlZ2lzdGVyKGwub25SZXNpemUoKGZ1bmN0aW9uKCl7cmV0dXJuIGYuX2Z1bGxSZWZyZXNoKCl9KSkpLGYucmVnaXN0ZXIobC5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG51bGw9PT0oZT1mLl9yZW5kZXJlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2xlYXIoKX0pKSksZi5yZWdpc3RlcihuLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbigpe3JldHVybiBmLl9oYW5kbGVPcHRpb25zQ2hhbmdlZCgpfSkpKSxmLnJlZ2lzdGVyKGYuX2NoYXJTaXplU2VydmljZS5vbkNoYXJTaXplQ2hhbmdlKChmdW5jdGlvbigpe3JldHVybiBmLm9uQ2hhclNpemVDaGFuZ2VkKCl9KSkpLGYucmVnaXN0ZXIocy5vbkRlY29yYXRpb25SZWdpc3RlcmVkKChmdW5jdGlvbigpe3JldHVybiBmLl9mdWxsUmVmcmVzaCgpfSkpKSxmLnJlZ2lzdGVyKHMub25EZWNvcmF0aW9uUmVtb3ZlZCgoZnVuY3Rpb24oKXtyZXR1cm4gZi5fZnVsbFJlZnJlc2goKX0pKSksZi5fcmVuZGVyZXIub25SZXF1ZXN0UmVkcmF3KChmdW5jdGlvbihlKXtyZXR1cm4gZi5yZWZyZXNoUm93cyhlLnN0YXJ0LGUuZW5kLCEwKX0pKSxmLnJlZ2lzdGVyKCgwLHUuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh3aW5kb3csInJlc2l6ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIGYub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlKCl9KSkpLCJJbnRlcnNlY3Rpb25PYnNlcnZlciJpbiB3aW5kb3cpe3ZhciBfPW5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uSW50ZXJzZWN0aW9uQ2hhbmdlKGVbZS5sZW5ndGgtMV0pfSkse3RocmVzaG9sZDowfSk7Xy5vYnNlcnZlKGkpLGYucmVnaXN0ZXIoe2Rpc3Bvc2U6ZnVuY3Rpb24oKXtyZXR1cm4gXy5kaXNjb25uZWN0KCl9fSl9cmV0dXJuIGZ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRGltZW5zaW9uc0NoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkRpbWVuc2lvbnNDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZW5kZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZW5kZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlZnJlc2hSZXF1ZXN0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVmcmVzaFJlcXVlc3QuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJkaW1lbnNpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuX29uSW50ZXJzZWN0aW9uQ2hhbmdlPWZ1bmN0aW9uKGUpe3RoaXMuX2lzUGF1c2VkPXZvaWQgMD09PWUuaXNJbnRlcnNlY3Rpbmc/MD09PWUuaW50ZXJzZWN0aW9uUmF0aW86IWUuaXNJbnRlcnNlY3RpbmcsdGhpcy5faXNQYXVzZWR8fHRoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemV8fHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCksIXRoaXMuX2lzUGF1c2VkJiZ0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoJiYodGhpcy5yZWZyZXNoUm93cygwLHRoaXMuX3Jvd0NvdW50LTEpLHRoaXMuX25lZWRzRnVsbFJlZnJlc2g9ITEpfSx0LnByb3RvdHlwZS5yZWZyZXNoUm93cz1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9ITEpLHRoaXMuX2lzUGF1c2VkP3RoaXMuX25lZWRzRnVsbFJlZnJlc2g9ITA6KHJ8fCh0aGlzLl9pc05leHRSZW5kZXJSZWRyYXdPbmx5PSExKSx0aGlzLl9yZW5kZXJEZWJvdW5jZXIucmVmcmVzaChlLHQsdGhpcy5fcm93Q291bnQpKX0sdC5wcm90b3R5cGUuX3JlbmRlclJvd3M9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZW5kZXJlci5yZW5kZXJSb3dzKGUsdCksdGhpcy5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoJiYodGhpcy5fcmVuZGVyZXIub25TZWxlY3Rpb25DaGFuZ2VkKHRoaXMuX3NlbGVjdGlvblN0YXRlLnN0YXJ0LHRoaXMuX3NlbGVjdGlvblN0YXRlLmVuZCx0aGlzLl9zZWxlY3Rpb25TdGF0ZS5jb2x1bW5TZWxlY3RNb2RlKSx0aGlzLl9uZWVkc1NlbGVjdGlvblJlZnJlc2g9ITEpLHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHl8fHRoaXMuX29uUmVuZGVyZWRWaWV3cG9ydENoYW5nZS5maXJlKHtzdGFydDplLGVuZDp0fSksdGhpcy5fb25SZW5kZXIuZmlyZSh7c3RhcnQ6ZSxlbmQ6dH0pLHRoaXMuX2lzTmV4dFJlbmRlclJlZHJhd09ubHk9ITB9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3Jvd0NvdW50PXQsdGhpcy5fZmlyZU9uQ2FudmFzUmVzaXplKCl9LHQucHJvdG90eXBlLl9oYW5kbGVPcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLm9uT3B0aW9uc0NoYW5nZWQoKSx0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSksdGhpcy5fZmlyZU9uQ2FudmFzUmVzaXplKCl9LHQucHJvdG90eXBlLl9maXJlT25DYW52YXNSZXNpemU9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5kaW1lbnNpb25zLmNhbnZhc1dpZHRoPT09dGhpcy5fY2FudmFzV2lkdGgmJnRoaXMuX3JlbmRlcmVyLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0PT09dGhpcy5fY2FudmFzSGVpZ2h0fHx0aGlzLl9vbkRpbWVuc2lvbnNDaGFuZ2UuZmlyZSh0aGlzLl9yZW5kZXJlci5kaW1lbnNpb25zKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuc2V0UmVuZGVyZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9yZW5kZXJlci5kaXNwb3NlKCksdGhpcy5fcmVuZGVyZXI9ZSx0aGlzLl9yZW5kZXJlci5vblJlcXVlc3RSZWRyYXcoKGZ1bmN0aW9uKGUpe3JldHVybiB0LnJlZnJlc2hSb3dzKGUuc3RhcnQsZS5lbmQsITApfSkpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaD0hMCx0aGlzLl9mdWxsUmVmcmVzaCgpfSx0LnByb3RvdHlwZS5hZGRSZWZyZXNoQ2FsbGJhY2s9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3JlbmRlckRlYm91bmNlci5hZGRSZWZyZXNoQ2FsbGJhY2soZSl9LHQucHJvdG90eXBlLl9mdWxsUmVmcmVzaD1mdW5jdGlvbigpe3RoaXMuX2lzUGF1c2VkP3RoaXMuX25lZWRzRnVsbFJlZnJlc2g9ITA6dGhpcy5yZWZyZXNoUm93cygwLHRoaXMuX3Jvd0NvdW50LTEpfSx0LnByb3RvdHlwZS5jbGVhclRleHR1cmVBdGxhcz1mdW5jdGlvbigpe3ZhciBlLHQ7bnVsbD09PSh0PW51bGw9PT0oZT10aGlzLl9yZW5kZXJlcil8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2xlYXJUZXh0dXJlQXRsYXMpfHx2b2lkIDA9PT10fHx0LmNhbGwoZSksdGhpcy5fZnVsbFJlZnJlc2goKX0sdC5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKGUpe3RoaXMuX3JlbmRlcmVyLnNldENvbG9ycyhlKSx0aGlzLl9mdWxsUmVmcmVzaCgpfSx0LnByb3RvdHlwZS5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpLHRoaXMuX3JlbmRlcmVyLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpLHRoaXMucmVmcmVzaFJvd3MoMCx0aGlzLl9yb3dDb3VudC0xKX0sdC5wcm90b3R5cGUub25SZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZW5kZXJlci5vblJlc2l6ZShlLHQpLHRoaXMuX2Z1bGxSZWZyZXNoKCl9LHQucHJvdG90eXBlLm9uQ2hhclNpemVDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIub25DaGFyU2l6ZUNoYW5nZWQoKX0sdC5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIub25CbHVyKCl9LHQucHJvdG90eXBlLm9uRm9jdXM9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbkZvY3VzKCl9LHQucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihlLHQscil7dGhpcy5fc2VsZWN0aW9uU3RhdGUuc3RhcnQ9ZSx0aGlzLl9zZWxlY3Rpb25TdGF0ZS5lbmQ9dCx0aGlzLl9zZWxlY3Rpb25TdGF0ZS5jb2x1bW5TZWxlY3RNb2RlPXIsdGhpcy5fcmVuZGVyZXIub25TZWxlY3Rpb25DaGFuZ2VkKGUsdCxyKX0sdC5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIub25DdXJzb3JNb3ZlKCl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuY2xlYXIoKX0sbyhbcygzLGYuSU9wdGlvbnNTZXJ2aWNlKSxzKDQsXy5JQ2hhclNpemVTZXJ2aWNlKSxzKDUsZi5JRGVjb3JhdGlvblNlcnZpY2UpLHMoNixmLklCdWZmZXJTZXJ2aWNlKV0sdCl9KGwuRGlzcG9zYWJsZSk7dC5SZW5kZXJTZXJ2aWNlPWR9LDkzMTI6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2VsZWN0aW9uU2VydmljZT12b2lkIDA7dmFyIGE9cig2MTE0KSxjPXIoNDU2KSxsPXIoNTExKSxoPXIoODQ2MCksdT1yKDQ3MjUpLGY9cigyNTg1KSxfPXIoOTgwNiksZD1yKDk1MDQpLHA9cig4NDQpLHY9cig0ODQxKSx5PVN0cmluZy5mcm9tQ2hhckNvZGUoMTYwKSxnPW5ldyBSZWdFeHAoeSwiZyIpLG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLHUpe3ZhciBmPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZi5fZWxlbWVudD10LGYuX3NjcmVlbkVsZW1lbnQ9cixmLl9saW5raWZpZXI9aSxmLl9idWZmZXJTZXJ2aWNlPW4sZi5fY29yZVNlcnZpY2U9byxmLl9tb3VzZVNlcnZpY2U9cyxmLl9vcHRpb25zU2VydmljZT1hLGYuX3JlbmRlclNlcnZpY2U9dSxmLl9kcmFnU2Nyb2xsQW1vdW50PTAsZi5fZW5hYmxlZD0hMCxmLl93b3JrQ2VsbD1uZXcgbC5DZWxsRGF0YSxmLl9tb3VzZURvd25UaW1lU3RhbXA9MCxmLl9vbGRIYXNTZWxlY3Rpb249ITEsZi5fb2xkU2VsZWN0aW9uU3RhcnQ9dm9pZCAwLGYuX29sZFNlbGVjdGlvbkVuZD12b2lkIDAsZi5fb25MaW51eE1vdXNlU2VsZWN0aW9uPWYucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxmLl9vblJlZHJhd1JlcXVlc3Q9Zi5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLGYuX29uU2VsZWN0aW9uQ2hhbmdlPWYucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxmLl9vblJlcXVlc3RTY3JvbGxMaW5lcz1mLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksZi5fbW91c2VNb3ZlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTW91c2VNb3ZlKGUpfSxmLl9tb3VzZVVwTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uTW91c2VVcChlKX0sZi5fY29yZVNlcnZpY2Uub25Vc2VySW5wdXQoKGZ1bmN0aW9uKCl7Zi5oYXNTZWxlY3Rpb24mJmYuY2xlYXJTZWxlY3Rpb24oKX0pKSxmLl90cmltTGlzdGVuZXI9Zi5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMub25UcmltKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25UcmltKGUpfSkpLGYucmVnaXN0ZXIoZi5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbkJ1ZmZlckFjdGl2YXRlKGUpfSkpKSxmLmVuYWJsZSgpLGYuX21vZGVsPW5ldyBjLlNlbGVjdGlvbk1vZGVsKGYuX2J1ZmZlclNlcnZpY2UpLGYuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9MCxmfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkxpbnV4TW91c2VTZWxlY3Rpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25MaW51eE1vdXNlU2VsZWN0aW9uLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0UmVkcmF3Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVkcmF3UmVxdWVzdC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uU2VsZWN0aW9uQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0U2Nyb2xsTGluZXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuY2xlYXJTZWxlY3Rpb24oKX0sdC5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9lbmFibGVkPSExfSx0LnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLl9lbmFibGVkPSEwfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInNlbGVjdGlvblN0YXJ0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJzZWxlY3Rpb25FbmQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJoYXNTZWxlY3Rpb24iLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQ7cmV0dXJuISghZXx8IXR8fGVbMF09PT10WzBdJiZlWzFdPT09dFsxXSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJzZWxlY3Rpb25UZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCx0PXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO2lmKCFlfHwhdClyZXR1cm4iIjt2YXIgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcixpPVtdO2lmKDM9PT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlKXtpZihlWzBdPT09dFswXSlyZXR1cm4iIjtmb3IodmFyIG49ZVswXTx0WzBdP2VbMF06dFswXSxvPWVbMF08dFswXT90WzBdOmVbMF0scz1lWzFdO3M8PXRbMV07cysrKXt2YXIgYz1yLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhzLCEwLG4sbyk7aS5wdXNoKGMpfX1lbHNle3ZhciBsPWVbMV09PT10WzFdP3RbMF06dm9pZCAwO2ZvcihpLnB1c2goci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoZVsxXSwhMCxlWzBdLGwpKSxzPWVbMV0rMTtzPD10WzFdLTE7cysrKXt2YXIgaD1yLmxpbmVzLmdldChzKTtjPXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHMsITApLChudWxsPT1oP3ZvaWQgMDpoLmlzV3JhcHBlZCk/aVtpLmxlbmd0aC0xXSs9YzppLnB1c2goYyl9ZVsxXSE9PXRbMV0mJihoPXIubGluZXMuZ2V0KHRbMV0pLGM9ci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcodFsxXSwhMCwwLHRbMF0pLGgmJmguaXNXcmFwcGVkP2lbaS5sZW5ndGgtMV0rPWM6aS5wdXNoKGMpKX1yZXR1cm4gaS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoZywiICIpfSkpLmpvaW4oYS5pc1dpbmRvd3M/IlxyXG4iOiJcbiIpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLnJlZnJlc2goKSx0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9LHQucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWV8fCh0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVmcmVzaCgpfSkpKSxhLmlzTGludXgmJmUmJnRoaXMuc2VsZWN0aW9uVGV4dC5sZW5ndGgmJnRoaXMuX29uTGludXhNb3VzZVNlbGVjdGlvbi5maXJlKHRoaXMuc2VsZWN0aW9uVGV4dCl9LHQucHJvdG90eXBlLl9yZWZyZXNoPWZ1bmN0aW9uKCl7dGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPXZvaWQgMCx0aGlzLl9vblJlZHJhd1JlcXVlc3QuZmlyZSh7c3RhcnQ6dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCxlbmQ6dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25FbmQsY29sdW1uU2VsZWN0TW9kZTozPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZX0pfSx0LnByb3RvdHlwZS5faXNDbGlja0luU2VsZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpLHI9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCxpPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO3JldHVybiEhKHImJmkmJnQpJiZ0aGlzLl9hcmVDb29yZHNJblNlbGVjdGlvbih0LHIsaSl9LHQucHJvdG90eXBlLmlzQ2VsbEluU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCxpPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO3JldHVybiEoIXJ8fCFpKSYmdGhpcy5fYXJlQ29vcmRzSW5TZWxlY3Rpb24oW2UsdF0scixpKX0sdC5wcm90b3R5cGUuX2FyZUNvb3Jkc0luU2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gZVsxXT50WzFdJiZlWzFdPHJbMV18fHRbMV09PT1yWzFdJiZlWzFdPT09dFsxXSYmZVswXT49dFswXSYmZVswXTxyWzBdfHx0WzFdPHJbMV0mJmVbMV09PT1yWzFdJiZlWzBdPHJbMF18fHRbMV08clsxXSYmZVsxXT09PXRbMV0mJmVbMF0+PXRbMF19LHQucHJvdG90eXBlLl9zZWxlY3RXb3JkQXRDdXJzb3I9ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG49bnVsbD09PShpPW51bGw9PT0ocj10aGlzLl9saW5raWZpZXIuY3VycmVudExpbmspfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmxpbmspfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnJhbmdlO2lmKG4pcmV0dXJuIHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PVtuLnN0YXJ0LngtMSxuLnN0YXJ0LnktMV0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGg9KDAsdi5nZXRSYW5nZUxlbmd0aCkobix0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD12b2lkIDAsITA7dmFyIG89dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSk7cmV0dXJuISFvJiYodGhpcy5fc2VsZWN0V29yZEF0KG8sdCksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMCwhMCl9LHQucHJvdG90eXBlLnNlbGVjdEFsbD1mdW5jdGlvbigpe3RoaXMuX21vZGVsLmlzU2VsZWN0QWxsQWN0aXZlPSEwLHRoaXMucmVmcmVzaCgpLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0sdC5wcm90b3R5cGUuc2VsZWN0TGluZXM9ZnVuY3Rpb24oZSx0KXt0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpLGU9TWF0aC5tYXgoZSwwKSx0PU1hdGgubWluKHQsdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoLTEpLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PVswLGVdLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD1bdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRdLHRoaXMucmVmcmVzaCgpLHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0sdC5wcm90b3R5cGUuX29uVHJpbT1mdW5jdGlvbihlKXt0aGlzLl9tb2RlbC5vblRyaW0oZSkmJnRoaXMucmVmcmVzaCgpfSx0LnByb3RvdHlwZS5fZ2V0TW91c2VCdWZmZXJDb29yZHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhlLHRoaXMuX3NjcmVlbkVsZW1lbnQsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cywhMCk7aWYodClyZXR1cm4gdFswXS0tLHRbMV0tLSx0WzFdKz10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCx0fSx0LnByb3RvdHlwZS5fZ2V0TW91c2VFdmVudFNjcm9sbEFtb3VudD1mdW5jdGlvbihlKXt2YXIgdD0oMCxfLmdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50KSh3aW5kb3csZSx0aGlzLl9zY3JlZW5FbGVtZW50KVsxXSxyPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5jYW52YXNIZWlnaHQ7cmV0dXJuIHQ+PTAmJnQ8PXI/MDoodD5yJiYodC09ciksdD1NYXRoLm1pbihNYXRoLm1heCh0LC01MCksNTApLCh0Lz01MCkvTWF0aC5hYnModCkrTWF0aC5yb3VuZCgxNCp0KSl9LHQucHJvdG90eXBlLnNob3VsZEZvcmNlU2VsZWN0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiBhLmlzTWFjP2UuYWx0S2V5JiZ0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uOmUuc2hpZnRLZXl9LHQucHJvdG90eXBlLm9uTW91c2VEb3duPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX21vdXNlRG93blRpbWVTdGFtcD1lLnRpbWVTdGFtcCwoMiE9PWUuYnV0dG9ufHwhdGhpcy5oYXNTZWxlY3Rpb24pJiYwPT09ZS5idXR0b24pe2lmKCF0aGlzLl9lbmFibGVkKXtpZighdGhpcy5zaG91bGRGb3JjZVNlbGVjdGlvbihlKSlyZXR1cm47ZS5zdG9wUHJvcGFnYXRpb24oKX1lLnByZXZlbnREZWZhdWx0KCksdGhpcy5fZHJhZ1Njcm9sbEFtb3VudD0wLHRoaXMuX2VuYWJsZWQmJmUuc2hpZnRLZXk/dGhpcy5fb25JbmNyZW1lbnRhbENsaWNrKGUpOjE9PT1lLmRldGFpbD90aGlzLl9vblNpbmdsZUNsaWNrKGUpOjI9PT1lLmRldGFpbD90aGlzLl9vbkRvdWJsZUNsaWNrKGUpOjM9PT1lLmRldGFpbCYmdGhpcy5fb25UcmlwbGVDbGljayhlKSx0aGlzLl9hZGRNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLnJlZnJlc2goITApfX0sdC5wcm90b3R5cGUuX2FkZE1vdXNlRG93bkxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50JiYodGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpLHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZXVwIix0aGlzLl9tb3VzZVVwTGlzdGVuZXIpKSx0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lcj13aW5kb3cuc2V0SW50ZXJ2YWwoKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2RyYWdTY3JvbGwoKX0pLDUwKX0sdC5wcm90b3R5cGUuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycz1mdW5jdGlvbigpe3RoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudCYmKHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5fbW91c2VVcExpc3RlbmVyKSksY2xlYXJJbnRlcnZhbCh0aGlzLl9kcmFnU2Nyb2xsSW50ZXJ2YWxUaW1lciksdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXI9dm9pZCAwfSx0LnByb3RvdHlwZS5fb25JbmNyZW1lbnRhbENsaWNrPWZ1bmN0aW9uKGUpe3RoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0JiYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpKX0sdC5wcm90b3R5cGUuX29uU2luZ2xlQ2xpY2s9ZnVuY3Rpb24oZSl7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGg9MCx0aGlzLl9tb2RlbC5pc1NlbGVjdEFsbEFjdGl2ZT0hMSx0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlPXRoaXMuc2hvdWxkQ29sdW1uU2VsZWN0KGUpPzM6MCx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCl7dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXZvaWQgMDt2YXIgdD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5saW5lcy5nZXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0pO3QmJnQubGVuZ3RoIT09dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0mJjA9PT10Lmhhc1dpZHRoKHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKSYmdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMF0rK319LHQucHJvdG90eXBlLl9vbkRvdWJsZUNsaWNrPWZ1bmN0aW9uKGUpe3RoaXMuX3NlbGVjdFdvcmRBdEN1cnNvcihlLCEwKSYmKHRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU9MSl9LHQucHJvdG90eXBlLl9vblRyaXBsZUNsaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpO3QmJih0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlPTIsdGhpcy5fc2VsZWN0TGluZUF0KHRbMV0pKX0sdC5wcm90b3R5cGUuc2hvdWxkQ29sdW1uU2VsZWN0PWZ1bmN0aW9uKGUpe3JldHVybiBlLmFsdEtleSYmIShhLmlzTWFjJiZ0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLm1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uKX0sdC5wcm90b3R5cGUuX29uTW91c2VNb3ZlPWZ1bmN0aW9uKGUpe2lmKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQpe3ZhciB0PXRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD9bdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXV06bnVsbDtpZih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKXsyPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT90aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV08dGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRbMV0/dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPTA6dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczoxPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmdGhpcy5fc2VsZWN0VG9Xb3JkQXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kKSx0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PXRoaXMuX2dldE1vdXNlRXZlbnRTY3JvbGxBbW91bnQoZSksMyE9PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUmJih0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PjA/dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczp0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PDAmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09MCkpO3ZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXTxyLmxpbmVzLmxlbmd0aCl7dmFyIGk9ci5saW5lcy5nZXQodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdKTtpJiYwPT09aS5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0pJiZ0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF0rK310JiZ0WzBdPT09dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdJiZ0WzFdPT09dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdfHx0aGlzLnJlZnJlc2goITApfWVsc2UgdGhpcy5yZWZyZXNoKCEwKX19LHQucHJvdG90eXBlLl9kcmFnU2Nyb2xsPWZ1bmN0aW9uKCl7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kJiZ0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCYmdGhpcy5fZHJhZ1Njcm9sbEFtb3VudCl7dGhpcy5fb25SZXF1ZXN0U2Nyb2xsTGluZXMuZmlyZSh7YW1vdW50OnRoaXMuX2RyYWdTY3JvbGxBbW91bnQsc3VwcHJlc3NTY3JvbGxFdmVudDohMX0pO3ZhciBlPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO3RoaXMuX2RyYWdTY3JvbGxBbW91bnQ+MD8oMyE9PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV09TWF0aC5taW4oZS55ZGlzcCt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsZS5saW5lcy5sZW5ndGgtMSkpOigzIT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT0wKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV09ZS55ZGlzcCksdGhpcy5yZWZyZXNoKCl9fSx0LnByb3RvdHlwZS5fb25Nb3VzZVVwPWZ1bmN0aW9uKGUpe3ZhciB0PWUudGltZVN0YW1wLXRoaXMuX21vdXNlRG93blRpbWVTdGFtcDtpZih0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKSx0aGlzLnNlbGVjdGlvblRleHQubGVuZ3RoPD0xJiZ0PDUwMCYmZS5hbHRLZXkmJnRoaXMuX29wdGlvbnNTZXJ2aWNlLmdldE9wdGlvbigiYWx0Q2xpY2tNb3Zlc0N1cnNvciIpKXtpZih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZT09PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKXt2YXIgcj10aGlzLl9tb3VzZVNlcnZpY2UuZ2V0Q29vcmRzKGUsdGhpcy5fZWxlbWVudCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLCExKTtpZihyJiZ2b2lkIDAhPT1yWzBdJiZ2b2lkIDAhPT1yWzFdKXt2YXIgaT0oMCxkLm1vdmVUb0NlbGxTZXF1ZW5jZSkoclswXS0xLHJbMV0tMSx0aGlzLl9idWZmZXJTZXJ2aWNlLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMpO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQoaSwhMCl9fX1lbHNlIHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpfSx0LnByb3RvdHlwZS5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCx0PXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kLHI9ISghZXx8IXR8fGVbMF09PT10WzBdJiZlWzFdPT09dFsxXSk7cj9lJiZ0JiYodGhpcy5fb2xkU2VsZWN0aW9uU3RhcnQmJnRoaXMuX29sZFNlbGVjdGlvbkVuZCYmZVswXT09PXRoaXMuX29sZFNlbGVjdGlvblN0YXJ0WzBdJiZlWzFdPT09dGhpcy5fb2xkU2VsZWN0aW9uU3RhcnRbMV0mJnRbMF09PT10aGlzLl9vbGRTZWxlY3Rpb25FbmRbMF0mJnRbMV09PT10aGlzLl9vbGRTZWxlY3Rpb25FbmRbMV18fHRoaXMuX2ZpcmVPblNlbGVjdGlvbkNoYW5nZShlLHQscikpOnRoaXMuX29sZEhhc1NlbGVjdGlvbiYmdGhpcy5fZmlyZU9uU2VsZWN0aW9uQ2hhbmdlKGUsdCxyKX0sdC5wcm90b3R5cGUuX2ZpcmVPblNlbGVjdGlvbkNoYW5nZT1mdW5jdGlvbihlLHQscil7dGhpcy5fb2xkU2VsZWN0aW9uU3RhcnQ9ZSx0aGlzLl9vbGRTZWxlY3Rpb25FbmQ9dCx0aGlzLl9vbGRIYXNTZWxlY3Rpb249cix0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9LHQucHJvdG90eXBlLl9vbkJ1ZmZlckFjdGl2YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5jbGVhclNlbGVjdGlvbigpLHRoaXMuX3RyaW1MaXN0ZW5lci5kaXNwb3NlKCksdGhpcy5fdHJpbUxpc3RlbmVyPWUuYWN0aXZlQnVmZmVyLmxpbmVzLm9uVHJpbSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX29uVHJpbShlKX0pKX0sdC5wcm90b3R5cGUuX2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXg9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dFswXSxpPTA7dFswXT49aTtpKyspe3ZhciBuPWUubG9hZENlbGwoaSx0aGlzLl93b3JrQ2VsbCkuZ2V0Q2hhcnMoKS5sZW5ndGg7MD09PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCk/ci0tOm4+MSYmdFswXSE9PWkmJihyKz1uLTEpfXJldHVybiByfSx0LnByb3RvdHlwZS5zZXRTZWxlY3Rpb249ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCksdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9W2UsdF0sdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGg9cix0aGlzLnJlZnJlc2goKSx0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKX0sdC5wcm90b3R5cGUucmlnaHRDbGlja1NlbGVjdD1mdW5jdGlvbihlKXt0aGlzLl9pc0NsaWNrSW5TZWxlY3Rpb24oZSl8fCh0aGlzLl9zZWxlY3RXb3JkQXRDdXJzb3IoZSwhMSkmJnRoaXMucmVmcmVzaCghMCksdGhpcy5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCkpfSx0LnByb3RvdHlwZS5fZ2V0V29yZEF0PWZ1bmN0aW9uKGUsdCxyLGkpe2lmKHZvaWQgMD09PXImJihyPSEwKSx2b2lkIDA9PT1pJiYoaT0hMCksIShlWzBdPj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpKXt2YXIgbj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcixvPW4ubGluZXMuZ2V0KGVbMV0pO2lmKG8pe3ZhciBzPW4udHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGVbMV0sITEpLGE9dGhpcy5fY29udmVydFZpZXdwb3J0Q29sVG9DaGFyYWN0ZXJJbmRleChvLGUpLGM9YSxsPWVbMF0tYSxoPTAsdT0wLGY9MCxfPTA7aWYoIiAiPT09cy5jaGFyQXQoYSkpe2Zvcig7YT4wJiYiICI9PT1zLmNoYXJBdChhLTEpOylhLS07Zm9yKDtjPHMubGVuZ3RoJiYiICI9PT1zLmNoYXJBdChjKzEpOyljKyt9ZWxzZXt2YXIgZD1lWzBdLHA9ZVswXTswPT09by5nZXRXaWR0aChkKSYmKGgrKyxkLS0pLDI9PT1vLmdldFdpZHRoKHApJiYodSsrLHArKyk7dmFyIHY9by5nZXRTdHJpbmcocCkubGVuZ3RoO2Zvcih2PjEmJihfKz12LTEsYys9di0xKTtkPjAmJmE+MCYmIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3Ioby5sb2FkQ2VsbChkLTEsdGhpcy5fd29ya0NlbGwpKTspe28ubG9hZENlbGwoZC0xLHRoaXMuX3dvcmtDZWxsKTt2YXIgeT10aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aDswPT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKT8oaCsrLGQtLSk6eT4xJiYoZis9eS0xLGEtPXktMSksYS0tLGQtLX1mb3IoO3A8by5sZW5ndGgmJmMrMTxzLmxlbmd0aCYmIXRoaXMuX2lzQ2hhcldvcmRTZXBhcmF0b3Ioby5sb2FkQ2VsbChwKzEsdGhpcy5fd29ya0NlbGwpKTspe28ubG9hZENlbGwocCsxLHRoaXMuX3dvcmtDZWxsKTt2YXIgZz10aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmxlbmd0aDsyPT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKT8odSsrLHArKyk6Zz4xJiYoXys9Zy0xLGMrPWctMSksYysrLHArK319YysrO3ZhciBtPWErbC1oK2YsYj1NYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsYy1hK2grdS1mLV8pO2lmKHR8fCIiIT09cy5zbGljZShhLGMpLnRyaW0oKSl7aWYociYmMD09PW0mJjMyIT09by5nZXRDb2RlUG9pbnQoMCkpe3ZhciBTPW4ubGluZXMuZ2V0KGVbMV0tMSk7aWYoUyYmby5pc1dyYXBwZWQmJjMyIT09Uy5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpKXt2YXIgQz10aGlzLl9nZXRXb3JkQXQoW3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xLGVbMV0tMV0sITEsITAsITEpO2lmKEMpe3ZhciB3PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy1DLnN0YXJ0O20tPXcsYis9d319fWlmKGkmJm0rYj09PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmMzIhPT1vLmdldENvZGVQb2ludCh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSkpe3ZhciBMPW4ubGluZXMuZ2V0KGVbMV0rMSk7aWYoKG51bGw9PUw/dm9pZCAwOkwuaXNXcmFwcGVkKSYmMzIhPT1MLmdldENvZGVQb2ludCgwKSl7dmFyIEU9dGhpcy5fZ2V0V29yZEF0KFswLGVbMV0rMV0sITEsITEsITApO0UmJihiKz1FLmxlbmd0aCl9fXJldHVybntzdGFydDptLGxlbmd0aDpifX19fX0sdC5wcm90b3R5cGUuX3NlbGVjdFdvcmRBdD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2dldFdvcmRBdChlLHQpO2lmKHIpe2Zvcig7ci5zdGFydDwwOylyLnN0YXJ0Kz10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsZVsxXS0tO3RoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PVtyLnN0YXJ0LGVbMV1dLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPXIubGVuZ3RofX0sdC5wcm90b3R5cGUuX3NlbGVjdFRvV29yZEF0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2dldFdvcmRBdChlLCEwKTtpZih0KXtmb3IodmFyIHI9ZVsxXTt0LnN0YXJ0PDA7KXQuc3RhcnQrPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxyLS07aWYoIXRoaXMuX21vZGVsLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCkpZm9yKDt0LnN0YXJ0K3QubGVuZ3RoPnRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczspdC5sZW5ndGgtPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxyKys7dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPVt0aGlzLl9tb2RlbC5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpP3Quc3RhcnQ6dC5zdGFydCt0Lmxlbmd0aCxyXX19LHQucHJvdG90eXBlLl9pc0NoYXJXb3JkU2VwYXJhdG9yPWZ1bmN0aW9uKGUpe3JldHVybiAwIT09ZS5nZXRXaWR0aCgpJiZ0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndvcmRTZXBhcmF0b3IuaW5kZXhPZihlLmdldENoYXJzKCkpPj0wfSx0LnByb3RvdHlwZS5fc2VsZWN0TGluZUF0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmdldFdyYXBwZWRSYW5nZUZvckxpbmUoZSkscj17c3RhcnQ6e3g6MCx5OnQuZmlyc3R9LGVuZDp7eDp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSx5OnQubGFzdH19O3RoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PVswLHQuZmlyc3RdLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD12b2lkIDAsdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnRMZW5ndGg9KDAsdi5nZXRSYW5nZUxlbmd0aCkocix0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpfSxvKFtzKDMsZi5JQnVmZmVyU2VydmljZSkscyg0LGYuSUNvcmVTZXJ2aWNlKSxzKDUsdS5JTW91c2VTZXJ2aWNlKSxzKDYsZi5JT3B0aW9uc1NlcnZpY2UpLHMoNyx1LklSZW5kZXJTZXJ2aWNlKV0sdCl9KHAuRGlzcG9zYWJsZSk7dC5TZWxlY3Rpb25TZXJ2aWNlPW19LDQ3MjU6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LklDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPXQuSVNvdW5kU2VydmljZT10LklTZWxlY3Rpb25TZXJ2aWNlPXQuSVJlbmRlclNlcnZpY2U9dC5JTW91c2VTZXJ2aWNlPXQuSUNvcmVCcm93c2VyU2VydmljZT10LklDaGFyU2l6ZVNlcnZpY2U9dm9pZCAwO3ZhciBpPXIoODM0Myk7dC5JQ2hhclNpemVTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiQ2hhclNpemVTZXJ2aWNlIiksdC5JQ29yZUJyb3dzZXJTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiQ29yZUJyb3dzZXJTZXJ2aWNlIiksdC5JTW91c2VTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiTW91c2VTZXJ2aWNlIiksdC5JUmVuZGVyU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIlJlbmRlclNlcnZpY2UiKSx0LklTZWxlY3Rpb25TZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiU2VsZWN0aW9uU2VydmljZSIpLHQuSVNvdW5kU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIlNvdW5kU2VydmljZSIpLHQuSUNoYXJhY3RlckpvaW5lclNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlIil9LDM1NzpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNvdW5kU2VydmljZT12b2lkIDA7dmFyIG89cigyNTg1KSxzPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9vcHRpb25zU2VydmljZT1lfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiYXVkaW9Db250ZXh0Iix7Z2V0OmZ1bmN0aW9uKCl7aWYoIWUuX2F1ZGlvQ29udGV4dCl7dmFyIHQ9d2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtpZighdClyZXR1cm4gY29uc29sZS53YXJuKCJXZWIgQXVkaW8gQVBJIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBicm93c2VyLiBDb25zaWRlciB1cGdyYWRpbmcgdG8gdGhlIGxhdGVzdCB2ZXJzaW9uIiksbnVsbDtlLl9hdWRpb0NvbnRleHQ9bmV3IHR9cmV0dXJuIGUuX2F1ZGlvQ29udGV4dH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5wbGF5QmVsbFNvdW5kPWZ1bmN0aW9uKCl7dmFyIHQ9ZS5hdWRpb0NvbnRleHQ7aWYodCl7dmFyIHI9dC5jcmVhdGVCdWZmZXJTb3VyY2UoKTt0LmRlY29kZUF1ZGlvRGF0YSh0aGlzLl9iYXNlNjRUb0FycmF5QnVmZmVyKHRoaXMuX3JlbW92ZU1pbWVUeXBlKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuYmVsbFNvdW5kKSksKGZ1bmN0aW9uKGUpe3IuYnVmZmVyPWUsci5jb25uZWN0KHQuZGVzdGluYXRpb24pLHIuc3RhcnQoMCl9KSl9fSxlLnByb3RvdHlwZS5fYmFzZTY0VG9BcnJheUJ1ZmZlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9d2luZG93LmF0b2IoZSkscj10Lmxlbmd0aCxpPW5ldyBVaW50OEFycmF5KHIpLG49MDtuPHI7bisrKWlbbl09dC5jaGFyQ29kZUF0KG4pO3JldHVybiBpLmJ1ZmZlcn0sZS5wcm90b3R5cGUuX3JlbW92ZU1pbWVUeXBlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNwbGl0KCIsIilbMV19LGU9aShbbigwLG8uSU9wdGlvbnNTZXJ2aWNlKV0sZSl9KCk7dC5Tb3VuZFNlcnZpY2U9c30sNjM0OTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ2lyY3VsYXJMaXN0PXZvaWQgMDt2YXIgaT1yKDg0NjApLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX21heExlbmd0aD1lLHRoaXMub25EZWxldGVFbWl0dGVyPW5ldyBpLkV2ZW50RW1pdHRlcix0aGlzLm9uSW5zZXJ0RW1pdHRlcj1uZXcgaS5FdmVudEVtaXR0ZXIsdGhpcy5vblRyaW1FbWl0dGVyPW5ldyBpLkV2ZW50RW1pdHRlcix0aGlzLl9hcnJheT1uZXcgQXJyYXkodGhpcy5fbWF4TGVuZ3RoKSx0aGlzLl9zdGFydEluZGV4PTAsdGhpcy5fbGVuZ3RoPTB9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25EZWxldGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbkRlbGV0ZUVtaXR0ZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkluc2VydCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uSW5zZXJ0RW1pdHRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uVHJpbSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm9uVHJpbUVtaXR0ZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJtYXhMZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWF4TGVuZ3RofSxzZXQ6ZnVuY3Rpb24oZSl7aWYodGhpcy5fbWF4TGVuZ3RoIT09ZSl7Zm9yKHZhciB0PW5ldyBBcnJheShlKSxyPTA7cjxNYXRoLm1pbihlLHRoaXMubGVuZ3RoKTtyKyspdFtyXT10aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChyKV07dGhpcy5fYXJyYXk9dCx0aGlzLl9tYXhMZW5ndGg9ZSx0aGlzLl9zdGFydEluZGV4PTB9fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aH0sc2V0OmZ1bmN0aW9uKGUpe2lmKGU+dGhpcy5fbGVuZ3RoKWZvcih2YXIgdD10aGlzLl9sZW5ndGg7dDxlO3QrKyl0aGlzLl9hcnJheVt0XT12b2lkIDA7dGhpcy5fbGVuZ3RoPWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChlKV19LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3RoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KGUpXT10fSxlLnByb3RvdHlwZS5wdXNoPWZ1bmN0aW9uKGUpe3RoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aCldPWUsdGhpcy5fbGVuZ3RoPT09dGhpcy5fbWF4TGVuZ3RoPyh0aGlzLl9zdGFydEluZGV4PSsrdGhpcy5fc3RhcnRJbmRleCV0aGlzLl9tYXhMZW5ndGgsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSkpOnRoaXMuX2xlbmd0aCsrfSxlLnByb3RvdHlwZS5yZWN5Y2xlPWZ1bmN0aW9uKCl7aWYodGhpcy5fbGVuZ3RoIT09dGhpcy5fbWF4TGVuZ3RoKXRocm93IG5ldyBFcnJvcigiQ2FuIG9ubHkgcmVjeWNsZSB3aGVuIHRoZSBidWZmZXIgaXMgZnVsbCIpO3JldHVybiB0aGlzLl9zdGFydEluZGV4PSsrdGhpcy5fc3RhcnRJbmRleCV0aGlzLl9tYXhMZW5ndGgsdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSksdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLTEpXX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc0Z1bGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGVuZ3RoPT09dGhpcy5fbWF4TGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnBvcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgtLS0xKV19LGUucHJvdG90eXBlLnNwbGljZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxpPTI7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ktMl09YXJndW1lbnRzW2ldO2lmKHQpe2Zvcih2YXIgbj1lO248dGhpcy5fbGVuZ3RoLXQ7bisrKXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KG4pXT10aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChuK3QpXTt0aGlzLl9sZW5ndGgtPXQsdGhpcy5vbkRlbGV0ZUVtaXR0ZXIuZmlyZSh7aW5kZXg6ZSxhbW91bnQ6dH0pfWZvcihuPXRoaXMuX2xlbmd0aC0xO24+PWU7bi0tKXRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KG4rci5sZW5ndGgpXT10aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChuKV07Zm9yKG49MDtuPHIubGVuZ3RoO24rKyl0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChlK24pXT1yW25dO2lmKHIubGVuZ3RoJiZ0aGlzLm9uSW5zZXJ0RW1pdHRlci5maXJlKHtpbmRleDplLGFtb3VudDpyLmxlbmd0aH0pLHRoaXMuX2xlbmd0aCtyLmxlbmd0aD50aGlzLl9tYXhMZW5ndGgpe3ZhciBvPXRoaXMuX2xlbmd0aCtyLmxlbmd0aC10aGlzLl9tYXhMZW5ndGg7dGhpcy5fc3RhcnRJbmRleCs9byx0aGlzLl9sZW5ndGg9dGhpcy5fbWF4TGVuZ3RoLHRoaXMub25UcmltRW1pdHRlci5maXJlKG8pfWVsc2UgdGhpcy5fbGVuZ3RoKz1yLmxlbmd0aH0sZS5wcm90b3R5cGUudHJpbVN0YXJ0PWZ1bmN0aW9uKGUpe2U+dGhpcy5fbGVuZ3RoJiYoZT10aGlzLl9sZW5ndGgpLHRoaXMuX3N0YXJ0SW5kZXgrPWUsdGhpcy5fbGVuZ3RoLT1lLHRoaXMub25UcmltRW1pdHRlci5maXJlKGUpfSxlLnByb3RvdHlwZS5zaGlmdEVsZW1lbnRzPWZ1bmN0aW9uKGUsdCxyKXtpZighKHQ8PTApKXtpZihlPDB8fGU+PXRoaXMuX2xlbmd0aCl0aHJvdyBuZXcgRXJyb3IoInN0YXJ0IGFyZ3VtZW50IG91dCBvZiByYW5nZSIpO2lmKGUrcjwwKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHNoaWZ0IGVsZW1lbnRzIGluIGxpc3QgYmV5b25kIGluZGV4IDAiKTtpZihyPjApe2Zvcih2YXIgaT10LTE7aT49MDtpLS0pdGhpcy5zZXQoZStpK3IsdGhpcy5nZXQoZStpKSk7dmFyIG49ZSt0K3ItdGhpcy5fbGVuZ3RoO2lmKG4+MClmb3IodGhpcy5fbGVuZ3RoKz1uO3RoaXMuX2xlbmd0aD50aGlzLl9tYXhMZW5ndGg7KXRoaXMuX2xlbmd0aC0tLHRoaXMuX3N0YXJ0SW5kZXgrKyx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZSgxKX1lbHNlIGZvcihpPTA7aTx0O2krKyl0aGlzLnNldChlK2krcix0aGlzLmdldChlK2kpKX19LGUucHJvdG90eXBlLl9nZXRDeWNsaWNJbmRleD1mdW5jdGlvbihlKXtyZXR1cm4odGhpcy5fc3RhcnRJbmRleCtlKSV0aGlzLl9tYXhMZW5ndGh9LGV9KCk7dC5DaXJjdWxhckxpc3Q9bn0sMTQzOTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmNsb25lPXZvaWQgMCx0LmNsb25lPWZ1bmN0aW9uIGUodCxyKXtpZih2b2lkIDA9PT1yJiYocj01KSwib2JqZWN0IiE9dHlwZW9mIHQpcmV0dXJuIHQ7dmFyIGk9QXJyYXkuaXNBcnJheSh0KT9bXTp7fTtmb3IodmFyIG4gaW4gdClpW25dPXI8PTE/dFtuXTp0W25dJiZlKHRbbl0sci0xKTtyZXR1cm4gaX19LDgwNTU6ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG4sbyxzPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc307ZnVuY3Rpb24gYShlKXt2YXIgdD1lLnRvU3RyaW5nKDE2KTtyZXR1cm4gdC5sZW5ndGg8Mj8iMCIrdDp0fWZ1bmN0aW9uIGMoZSx0KXtyZXR1cm4gZTx0Pyh0Ky4wNSkvKGUrLjA1KTooZSsuMDUpLyh0Ky4wNSl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuY29udHJhc3RSYXRpbz10LnRvUGFkZGVkSGV4PXQucmdiYT10LnJnYj10LmNzcz10LmNvbG9yPXQuY2hhbm5lbHM9dm9pZCAwLGZ1bmN0aW9uKGUpe2UudG9Dc3M9ZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuIHZvaWQgMCE9PWk/IiMiK2EoZSkrYSh0KSthKHIpK2EoaSk6IiMiK2EoZSkrYSh0KSthKHIpfSxlLnRvUmdiYT1mdW5jdGlvbihlLHQscixpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9MjU1KSwoZTw8MjR8dDw8MTZ8cjw8OHxpKT4+PjB9fShyPXQuY2hhbm5lbHN8fCh0LmNoYW5uZWxzPXt9KSksKGk9dC5jb2xvcnx8KHQuY29sb3I9e30pKS5ibGVuZD1mdW5jdGlvbihlLHQpe3ZhciBpPSgyNTUmdC5yZ2JhKS8yNTU7aWYoMT09PWkpcmV0dXJue2Nzczp0LmNzcyxyZ2JhOnQucmdiYX07dmFyIG49dC5yZ2JhPj4yNCYyNTUsbz10LnJnYmE+PjE2JjI1NSxzPXQucmdiYT4+OCYyNTUsYT1lLnJnYmE+PjI0JjI1NSxjPWUucmdiYT4+MTYmMjU1LGw9ZS5yZ2JhPj44JjI1NSxoPWErTWF0aC5yb3VuZCgobi1hKSppKSx1PWMrTWF0aC5yb3VuZCgoby1jKSppKSxmPWwrTWF0aC5yb3VuZCgocy1sKSppKTtyZXR1cm57Y3NzOnIudG9Dc3MoaCx1LGYpLHJnYmE6ci50b1JnYmEoaCx1LGYpfX0saS5pc09wYXF1ZT1mdW5jdGlvbihlKXtyZXR1cm4gMjU1PT0oMjU1JmUucmdiYSl9LGkuZW5zdXJlQ29udHJhc3RSYXRpbz1mdW5jdGlvbihlLHQscil7dmFyIGk9by5lbnN1cmVDb250cmFzdFJhdGlvKGUucmdiYSx0LnJnYmEscik7aWYoaSlyZXR1cm4gby50b0NvbG9yKGk+PjI0JjI1NSxpPj4xNiYyNTUsaT4+OCYyNTUpfSxpLm9wYXF1ZT1mdW5jdGlvbihlKXt2YXIgdD0oMjU1fGUucmdiYSk+Pj4wLGk9cyhvLnRvQ2hhbm5lbHModCksMyksbj1pWzBdLGE9aVsxXSxjPWlbMl07cmV0dXJue2NzczpyLnRvQ3NzKG4sYSxjKSxyZ2JhOnR9fSxpLm9wYWNpdHk9ZnVuY3Rpb24oZSx0KXt2YXIgaT1NYXRoLnJvdW5kKDI1NSp0KSxuPXMoby50b0NoYW5uZWxzKGUucmdiYSksMyksYT1uWzBdLGM9blsxXSxsPW5bMl07cmV0dXJue2NzczpyLnRvQ3NzKGEsYyxsLGkpLHJnYmE6ci50b1JnYmEoYSxjLGwsaSl9fSxpLnRvQ29sb3JSR0I9ZnVuY3Rpb24oZSl7cmV0dXJuW2UucmdiYT4+MjQmMjU1LGUucmdiYT4+MTYmMjU1LGUucmdiYT4+OCYyNTVdfSwodC5jc3N8fCh0LmNzcz17fSkpLnRvQ29sb3I9ZnVuY3Rpb24oZSl7aWYoZS5tYXRjaCgvI1swLTlhLWZdezMsOH0vaSkpc3dpdGNoKGUubGVuZ3RoKXtjYXNlIDQ6dmFyIHQ9cGFyc2VJbnQoZS5zbGljZSgxLDIpLnJlcGVhdCgyKSwxNikscj1wYXJzZUludChlLnNsaWNlKDIsMykucmVwZWF0KDIpLDE2KSxpPXBhcnNlSW50KGUuc2xpY2UoMyw0KS5yZXBlYXQoMiksMTYpO3JldHVybiBvLnRvQ29sb3IodCxyLGkpO2Nhc2UgNTp0PXBhcnNlSW50KGUuc2xpY2UoMSwyKS5yZXBlYXQoMiksMTYpLHI9cGFyc2VJbnQoZS5zbGljZSgyLDMpLnJlcGVhdCgyKSwxNiksaT1wYXJzZUludChlLnNsaWNlKDMsNCkucmVwZWF0KDIpLDE2KTt2YXIgbj1wYXJzZUludChlLnNsaWNlKDQsNSkucmVwZWF0KDIpLDE2KTtyZXR1cm4gby50b0NvbG9yKHQscixpLG4pO2Nhc2UgNzpyZXR1cm57Y3NzOmUscmdiYToocGFyc2VJbnQoZS5zbGljZSgxKSwxNik8PDh8MjU1KT4+PjB9O2Nhc2UgOTpyZXR1cm57Y3NzOmUscmdiYTpwYXJzZUludChlLnNsaWNlKDEpLDE2KT4+PjB9fXZhciBzPWUubWF0Y2goL3JnYmE/XChccyooXGR7MSwzfSlccyosXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKigsXHMqKDB8MXxcZD9cLihcZCspKVxzKik/XCkvKTtpZihzKXJldHVybiB0PXBhcnNlSW50KHNbMV0pLHI9cGFyc2VJbnQoc1syXSksaT1wYXJzZUludChzWzNdKSxuPU1hdGgucm91bmQoMjU1Kih2b2lkIDA9PT1zWzVdPzE6cGFyc2VGbG9hdChzWzVdKSkpLG8udG9Db2xvcih0LHIsaSxuKTt0aHJvdyBuZXcgRXJyb3IoImNzcy50b0NvbG9yOiBVbnN1cHBvcnRlZCBjc3MgZm9ybWF0Iil9LGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LHIpe3ZhciBpPWUvMjU1LG49dC8yNTUsbz1yLzI1NTtyZXR1cm4uMjEyNiooaTw9LjAzOTI4P2kvMTIuOTI6TWF0aC5wb3coKGkrLjA1NSkvMS4wNTUsMi40KSkrLjcxNTIqKG48PS4wMzkyOD9uLzEyLjkyOk1hdGgucG93KChuKy4wNTUpLzEuMDU1LDIuNCkpKy4wNzIyKihvPD0uMDM5Mjg/by8xMi45MjpNYXRoLnBvdygobysuMDU1KS8xLjA1NSwyLjQpKX1lLnJlbGF0aXZlTHVtaW5hbmNlPWZ1bmN0aW9uKGUpe3JldHVybiB0KGU+PjE2JjI1NSxlPj44JjI1NSwyNTUmZSl9LGUucmVsYXRpdmVMdW1pbmFuY2UyPXR9KG49dC5yZ2J8fCh0LnJnYj17fSkpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0LHIpe2Zvcih2YXIgaT1lPj4yNCYyNTUsbz1lPj4xNiYyNTUscz1lPj44JjI1NSxhPXQ+PjI0JjI1NSxsPXQ+PjE2JjI1NSxoPXQ+PjgmMjU1LHU9YyhuLnJlbGF0aXZlTHVtaW5hbmNlMihhLGwsaCksbi5yZWxhdGl2ZUx1bWluYW5jZTIoaSxvLHMpKTt1PHImJihhPjB8fGw+MHx8aD4wKTspYS09TWF0aC5tYXgoMCxNYXRoLmNlaWwoLjEqYSkpLGwtPU1hdGgubWF4KDAsTWF0aC5jZWlsKC4xKmwpKSxoLT1NYXRoLm1heCgwLE1hdGguY2VpbCguMSpoKSksdT1jKG4ucmVsYXRpdmVMdW1pbmFuY2UyKGEsbCxoKSxuLnJlbGF0aXZlTHVtaW5hbmNlMihpLG8scykpO3JldHVybihhPDwyNHxsPDwxNnxoPDw4fDI1NSk+Pj4wfWZ1bmN0aW9uIGkoZSx0LHIpe2Zvcih2YXIgaT1lPj4yNCYyNTUsbz1lPj4xNiYyNTUscz1lPj44JjI1NSxhPXQ+PjI0JjI1NSxsPXQ+PjE2JjI1NSxoPXQ+PjgmMjU1LHU9YyhuLnJlbGF0aXZlTHVtaW5hbmNlMihhLGwsaCksbi5yZWxhdGl2ZUx1bWluYW5jZTIoaSxvLHMpKTt1PHImJihhPDI1NXx8bDwyNTV8fGg8MjU1KTspYT1NYXRoLm1pbigyNTUsYStNYXRoLmNlaWwoLjEqKDI1NS1hKSkpLGw9TWF0aC5taW4oMjU1LGwrTWF0aC5jZWlsKC4xKigyNTUtbCkpKSxoPU1hdGgubWluKDI1NSxoK01hdGguY2VpbCguMSooMjU1LWgpKSksdT1jKG4ucmVsYXRpdmVMdW1pbmFuY2UyKGEsbCxoKSxuLnJlbGF0aXZlTHVtaW5hbmNlMihpLG8scykpO3JldHVybihhPDwyNHxsPDwxNnxoPDw4fDI1NSk+Pj4wfWUuZW5zdXJlQ29udHJhc3RSYXRpbz1mdW5jdGlvbihlLHIsbyl7dmFyIHM9bi5yZWxhdGl2ZUx1bWluYW5jZShlPj44KSxhPW4ucmVsYXRpdmVMdW1pbmFuY2Uocj4+OCk7aWYoYyhzLGEpPG8pe2lmKGE8cyl7dmFyIGw9dChlLHIsbyksaD1jKHMsbi5yZWxhdGl2ZUx1bWluYW5jZShsPj44KSk7aWYoaDxvKXt2YXIgdT1pKGUsZSxvKTtyZXR1cm4gaD5jKHMsbi5yZWxhdGl2ZUx1bWluYW5jZSh1Pj44KSk/bDp1fXJldHVybiBsfXZhciBmPWkoZSxyLG8pLF89YyhzLG4ucmVsYXRpdmVMdW1pbmFuY2UoZj4+OCkpO3JldHVybiBfPG8/KHU9dChlLGUsbyksXz5jKHMsbi5yZWxhdGl2ZUx1bWluYW5jZSh1Pj44KSk/Zjp1KTpmfX0sZS5yZWR1Y2VMdW1pbmFuY2U9dCxlLmluY3JlYXNlTHVtaW5hbmNlPWksZS50b0NoYW5uZWxzPWZ1bmN0aW9uKGUpe3JldHVybltlPj4yNCYyNTUsZT4+MTYmMjU1LGU+PjgmMjU1LDI1NSZlXX0sZS50b0NvbG9yPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybntjc3M6ci50b0NzcyhlLHQsaSxuKSxyZ2JhOnIudG9SZ2JhKGUsdCxpLG4pfX19KG89dC5yZ2JhfHwodC5yZ2JhPXt9KSksdC50b1BhZGRlZEhleD1hLHQuY29udHJhc3RSYXRpbz1jfSw4OTY5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvcmVUZXJtaW5hbD12b2lkIDA7dmFyIHM9cig4NDQpLGE9cigyNTg1KSxjPXIoNDM0OCksbD1yKDc4NjYpLGg9cig3NDQpLHU9cig3MzAyKSxmPXIoNjk3NSksXz1yKDg0NjApLGQ9cigxNzUzKSxwPXIoMzczMCksdj1yKDE0ODApLHk9cig3OTk0KSxnPXIoOTI4MiksbT1yKDU0MzUpLGI9cig1OTgxKSxTPSExLEM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIuX29uQmluYXJ5PW5ldyBfLkV2ZW50RW1pdHRlcixyLl9vbkRhdGE9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uTGluZUZlZWQ9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uUmVzaXplPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9vblNjcm9sbD1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25Xcml0ZVBhcnNlZD1uZXcgXy5FdmVudEVtaXR0ZXIsci5faW5zdGFudGlhdGlvblNlcnZpY2U9bmV3IGMuSW5zdGFudGlhdGlvblNlcnZpY2Usci5vcHRpb25zU2VydmljZT1uZXcgdS5PcHRpb25zU2VydmljZSh0KSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSU9wdGlvbnNTZXJ2aWNlLHIub3B0aW9uc1NlcnZpY2UpLHIuX2J1ZmZlclNlcnZpY2U9ci5yZWdpc3RlcihyLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShoLkJ1ZmZlclNlcnZpY2UpKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSUJ1ZmZlclNlcnZpY2Usci5fYnVmZmVyU2VydmljZSksci5fbG9nU2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShsLkxvZ1NlcnZpY2UpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JTG9nU2VydmljZSxyLl9sb2dTZXJ2aWNlKSxyLmNvcmVTZXJ2aWNlPXIucmVnaXN0ZXIoci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoZi5Db3JlU2VydmljZSwoZnVuY3Rpb24oKXtyZXR1cm4gci5zY3JvbGxUb0JvdHRvbSgpfSkpKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSUNvcmVTZXJ2aWNlLHIuY29yZVNlcnZpY2UpLHIuY29yZU1vdXNlU2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShkLkNvcmVNb3VzZVNlcnZpY2UpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JQ29yZU1vdXNlU2VydmljZSxyLmNvcmVNb3VzZVNlcnZpY2UpLHIuX2RpcnR5Um93U2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShwLkRpcnR5Um93U2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklEaXJ0eVJvd1NlcnZpY2Usci5fZGlydHlSb3dTZXJ2aWNlKSxyLnVuaWNvZGVTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHYuVW5pY29kZVNlcnZpY2UpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JVW5pY29kZVNlcnZpY2Usci51bmljb2RlU2VydmljZSksci5fY2hhcnNldFNlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoeS5DaGFyc2V0U2VydmljZSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklDaGFyc2V0U2VydmljZSxyLl9jaGFyc2V0U2VydmljZSksci5faW5wdXRIYW5kbGVyPW5ldyBtLklucHV0SGFuZGxlcihyLl9idWZmZXJTZXJ2aWNlLHIuX2NoYXJzZXRTZXJ2aWNlLHIuY29yZVNlcnZpY2Usci5fZGlydHlSb3dTZXJ2aWNlLHIuX2xvZ1NlcnZpY2Usci5vcHRpb25zU2VydmljZSxyLmNvcmVNb3VzZVNlcnZpY2Usci51bmljb2RlU2VydmljZSksci5yZWdpc3RlcigoMCxfLmZvcndhcmRFdmVudCkoci5faW5wdXRIYW5kbGVyLm9uTGluZUZlZWQsci5fb25MaW5lRmVlZCkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLl9idWZmZXJTZXJ2aWNlLm9uUmVzaXplLHIuX29uUmVzaXplKSksci5yZWdpc3RlcigoMCxfLmZvcndhcmRFdmVudCkoci5jb3JlU2VydmljZS5vbkRhdGEsci5fb25EYXRhKSksci5yZWdpc3RlcigoMCxfLmZvcndhcmRFdmVudCkoci5jb3JlU2VydmljZS5vbkJpbmFyeSxyLl9vbkJpbmFyeSkpLHIucmVnaXN0ZXIoci5vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX3VwZGF0ZU9wdGlvbnMoZSl9KSkpLHIucmVnaXN0ZXIoci5fYnVmZmVyU2VydmljZS5vblNjcm9sbCgoZnVuY3Rpb24oZSl7ci5fb25TY3JvbGwuZmlyZSh7cG9zaXRpb246ci5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asc291cmNlOjB9KSxyLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoci5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wLHIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uU2Nyb2xsKChmdW5jdGlvbihlKXtyLl9vblNjcm9sbC5maXJlKHtwb3NpdGlvbjpyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxzb3VyY2U6MH0pLHIuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eShyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3Asci5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsQm90dG9tKX0pKSksci5fd3JpdGVCdWZmZXI9bmV3IGIuV3JpdGVCdWZmZXIoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuX2lucHV0SGFuZGxlci5wYXJzZShlLHQpfSkpLHIucmVnaXN0ZXIoKDAsXy5mb3J3YXJkRXZlbnQpKHIuX3dyaXRlQnVmZmVyLm9uV3JpdGVQYXJzZWQsci5fb25Xcml0ZVBhcnNlZCkpLHJ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQmluYXJ5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQmluYXJ5LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EYXRhIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uRGF0YS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uTGluZUZlZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25MaW5lRmVlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVzaXplIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVzaXplLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25Xcml0ZVBhcnNlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbldyaXRlUGFyc2VkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25TY3JvbGwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9vblNjcm9sbEFwaXx8KHRoaXMuX29uU2Nyb2xsQXBpPW5ldyBfLkV2ZW50RW1pdHRlcix0aGlzLnJlZ2lzdGVyKHRoaXMuX29uU2Nyb2xsLmV2ZW50KChmdW5jdGlvbih0KXt2YXIgcjtudWxsPT09KHI9ZS5fb25TY3JvbGxBcGkpfHx2b2lkIDA9PT1yfHxyLmZpcmUodC5wb3NpdGlvbil9KSkpKSx0aGlzLl9vblNjcm9sbEFwaS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImNvbHMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwicm93cyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJidWZmZXJzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9wdGlvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zfSxzZXQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIGUpdGhpcy5vcHRpb25zU2VydmljZS5vcHRpb25zW3RdPWVbdF19LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciB0O3RoaXMuX2lzRGlzcG9zZWR8fChlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksbnVsbD09PSh0PXRoaXMuX3dpbmRvd3NNb2RlKXx8dm9pZCAwPT09dHx8dC5kaXNwb3NlKCksdGhpcy5fd2luZG93c01vZGU9dm9pZCAwKX0sdC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24oZSx0KXt0aGlzLl93cml0ZUJ1ZmZlci53cml0ZShlLHQpfSx0LnByb3RvdHlwZS53cml0ZVN5bmM9ZnVuY3Rpb24oZSx0KXt0aGlzLl9sb2dTZXJ2aWNlLmxvZ0xldmVsPD1hLkxvZ0xldmVsRW51bS5XQVJOJiYhUyYmKHRoaXMuX2xvZ1NlcnZpY2Uud2Fybigid3JpdGVTeW5jIGlzIHVucmVsaWFibGUgYW5kIHdpbGwgYmUgcmVtb3ZlZCBzb29uLiIpLFM9ITApLHRoaXMuX3dyaXRlQnVmZmVyLndyaXRlU3luYyhlLHQpfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXtpc05hTihlKXx8aXNOYU4odCl8fChlPU1hdGgubWF4KGUsaC5NSU5JTVVNX0NPTFMpLHQ9TWF0aC5tYXgodCxoLk1JTklNVU1fUk9XUyksdGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoZSx0KSl9LHQucHJvdG90eXBlLnNjcm9sbD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PSExKSx0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbChlLHQpfSx0LnByb3RvdHlwZS5zY3JvbGxMaW5lcz1mdW5jdGlvbihlLHQscil7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxMaW5lcyhlLHQscil9LHQucHJvdG90eXBlLnNjcm9sbFBhZ2VzPWZ1bmN0aW9uKGUpe3RoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsUGFnZXMoZSl9LHQucHJvdG90eXBlLnNjcm9sbFRvVG9wPWZ1bmN0aW9uKCl7dGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGxUb1RvcCgpfSx0LnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbT1mdW5jdGlvbigpe3RoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsVG9Cb3R0b20oKX0sdC5wcm90b3R5cGUuc2Nyb2xsVG9MaW5lPWZ1bmN0aW9uKGUpe3RoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsVG9MaW5lKGUpfSx0LnByb3RvdHlwZS5yZWdpc3RlckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfSx0LnByb3RvdHlwZS5yZWdpc3RlckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyRGNzSGFuZGxlcihlLHQpfSx0LnByb3RvdHlwZS5yZWdpc3RlckNzaUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLHQpfSx0LnByb3RvdHlwZS5yZWdpc3Rlck9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5faW5wdXRIYW5kbGVyLnJlZ2lzdGVyT3NjSGFuZGxlcihlLHQpfSx0LnByb3RvdHlwZS5fc2V0dXA9ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c01vZGUmJnRoaXMuX2VuYWJsZVdpbmRvd3NNb2RlKCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5faW5wdXRIYW5kbGVyLnJlc2V0KCksdGhpcy5fYnVmZmVyU2VydmljZS5yZXNldCgpLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnJlc2V0KCksdGhpcy5jb3JlU2VydmljZS5yZXNldCgpLHRoaXMuY29yZU1vdXNlU2VydmljZS5yZXNldCgpfSx0LnByb3RvdHlwZS5fdXBkYXRlT3B0aW9ucz1mdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2goZSl7Y2FzZSJzY3JvbGxiYWNrIjp0aGlzLmJ1ZmZlcnMucmVzaXplKHRoaXMuY29scyx0aGlzLnJvd3MpO2JyZWFrO2Nhc2Uid2luZG93c01vZGUiOnRoaXMub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZT90aGlzLl9lbmFibGVXaW5kb3dzTW9kZSgpOihudWxsPT09KHQ9dGhpcy5fd2luZG93c01vZGUpfHx2b2lkIDA9PT10fHx0LmRpc3Bvc2UoKSx0aGlzLl93aW5kb3dzTW9kZT12b2lkIDApfX0sdC5wcm90b3R5cGUuX2VuYWJsZVdpbmRvd3NNb2RlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZighdGhpcy5fd2luZG93c01vZGUpe3ZhciB0PVtdO3QucHVzaCh0aGlzLm9uTGluZUZlZWQoZy51cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZS5iaW5kKG51bGwsdGhpcy5fYnVmZmVyU2VydmljZSkpKSx0LnB1c2godGhpcy5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJIIn0sKGZ1bmN0aW9uKCl7cmV0dXJuKDAsZy51cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZSkoZS5fYnVmZmVyU2VydmljZSksITF9KSkpLHRoaXMuX3dpbmRvd3NNb2RlPXtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGUscjt0cnl7Zm9yKHZhciBpPW8odCksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpbi52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHI9aS5yZXR1cm4pJiZyLmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fX19fX0sdH0ocy5EaXNwb3NhYmxlKTt0LkNvcmVUZXJtaW5hbD1DfSw4NDYwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZm9yd2FyZEV2ZW50PXQuRXZlbnRFbWl0dGVyPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9saXN0ZW5lcnM9W10sdGhpcy5fZGlzcG9zZWQ9ITF9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZXZlbnQiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiB0aGlzLl9ldmVudHx8KHRoaXMuX2V2ZW50PWZ1bmN0aW9uKHQpe3JldHVybiBlLl9saXN0ZW5lcnMucHVzaCh0KSx7ZGlzcG9zZTpmdW5jdGlvbigpe2lmKCFlLl9kaXNwb3NlZClmb3IodmFyIHI9MDtyPGUuX2xpc3RlbmVycy5sZW5ndGg7cisrKWlmKGUuX2xpc3RlbmVyc1tyXT09PXQpcmV0dXJuIHZvaWQgZS5fbGlzdGVuZXJzLnNwbGljZShyLDEpfX19KSx0aGlzLl9ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5maXJlPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MDtpPHRoaXMuX2xpc3RlbmVycy5sZW5ndGg7aSsrKXIucHVzaCh0aGlzLl9saXN0ZW5lcnNbaV0pO2ZvcihpPTA7aTxyLmxlbmd0aDtpKyspcltpXS5jYWxsKHZvaWQgMCxlLHQpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fbGlzdGVuZXJzJiYodGhpcy5fbGlzdGVuZXJzLmxlbmd0aD0wKSx0aGlzLl9kaXNwb3NlZD0hMH0sZX0oKTt0LkV2ZW50RW1pdHRlcj1yLHQuZm9yd2FyZEV2ZW50PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUoKGZ1bmN0aW9uKGUpe3JldHVybiB0LmZpcmUoZSl9KSl9fSw1NDM1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LklucHV0SGFuZGxlcj10LldpbmRvd3NPcHRpb25zUmVwb3J0VHlwZT12b2lkIDA7dmFyIG8scz1yKDI1ODQpLGE9cig3MTE2KSxjPXIoMjAxNSksbD1yKDg0NCksaD1yKDgyNzMpLHU9cig0ODIpLGY9cig4NDM3KSxfPXIoODQ2MCksZD1yKDY0MykscD1yKDUxMSksdj1yKDM3MzQpLHk9cigyNTg1KSxnPXIoNjI0MiksbT1yKDYzNTEpLGI9cig1OTQxKSxTPXsiKCI6MCwiKSI6MSwiKiI6MiwiKyI6MywiLSI6MSwiLiI6Mn0sQz0xMzEwNzI7ZnVuY3Rpb24gdyhlLHQpe2lmKGU+MjQpcmV0dXJuIHQuc2V0V2luTGluZXN8fCExO3N3aXRjaChlKXtjYXNlIDE6cmV0dXJuISF0LnJlc3RvcmVXaW47Y2FzZSAyOnJldHVybiEhdC5taW5pbWl6ZVdpbjtjYXNlIDM6cmV0dXJuISF0LnNldFdpblBvc2l0aW9uO2Nhc2UgNDpyZXR1cm4hIXQuc2V0V2luU2l6ZVBpeGVscztjYXNlIDU6cmV0dXJuISF0LnJhaXNlV2luO2Nhc2UgNjpyZXR1cm4hIXQubG93ZXJXaW47Y2FzZSA3OnJldHVybiEhdC5yZWZyZXNoV2luO2Nhc2UgODpyZXR1cm4hIXQuc2V0V2luU2l6ZUNoYXJzO2Nhc2UgOTpyZXR1cm4hIXQubWF4aW1pemVXaW47Y2FzZSAxMDpyZXR1cm4hIXQuZnVsbHNjcmVlbldpbjtjYXNlIDExOnJldHVybiEhdC5nZXRXaW5TdGF0ZTtjYXNlIDEzOnJldHVybiEhdC5nZXRXaW5Qb3NpdGlvbjtjYXNlIDE0OnJldHVybiEhdC5nZXRXaW5TaXplUGl4ZWxzO2Nhc2UgMTU6cmV0dXJuISF0LmdldFNjcmVlblNpemVQaXhlbHM7Y2FzZSAxNjpyZXR1cm4hIXQuZ2V0Q2VsbFNpemVQaXhlbHM7Y2FzZSAxODpyZXR1cm4hIXQuZ2V0V2luU2l6ZUNoYXJzO2Nhc2UgMTk6cmV0dXJuISF0LmdldFNjcmVlblNpemVDaGFycztjYXNlIDIwOnJldHVybiEhdC5nZXRJY29uVGl0bGU7Y2FzZSAyMTpyZXR1cm4hIXQuZ2V0V2luVGl0bGU7Y2FzZSAyMjpyZXR1cm4hIXQucHVzaFRpdGxlO2Nhc2UgMjM6cmV0dXJuISF0LnBvcFRpdGxlO2Nhc2UgMjQ6cmV0dXJuISF0LnNldFdpbkxpbmVzfXJldHVybiExfSFmdW5jdGlvbihlKXtlW2UuR0VUX1dJTl9TSVpFX1BJWEVMUz0wXT0iR0VUX1dJTl9TSVpFX1BJWEVMUyIsZVtlLkdFVF9DRUxMX1NJWkVfUElYRUxTPTFdPSJHRVRfQ0VMTF9TSVpFX1BJWEVMUyJ9KG89dC5XaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGV8fCh0LldpbmRvd3NPcHRpb25zUmVwb3J0VHlwZT17fSkpO3ZhciBMPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpKXt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5fY29yZVNlcnZpY2U9dCx0aGlzLl9sb2dTZXJ2aWNlPXIsdGhpcy5fb3B0aW9uc1NlcnZpY2U9aSx0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKX1yZXR1cm4gZS5wcm90b3R5cGUuaG9vaz1mdW5jdGlvbihlKXt0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9kYXRhPSgwLGguY29uY2F0KSh0aGlzLl9kYXRhLGUuc3ViYXJyYXkodCxyKSl9LGUucHJvdG90eXBlLnVuaG9vaz1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMCksITA7dmFyIHQ9KDAsdS51dGYzMlRvU3RyaW5nKSh0aGlzLl9kYXRhKTtzd2l0Y2godGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMCksdCl7Y2FzZScicSc6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysnUDEkcjAicScrcy5DMC5FU0MrIlxcIik7YnJlYWs7Y2FzZScicCc6dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysnUDEkcjYxOzEicCcrcy5DMC5FU0MrIlxcIik7YnJlYWs7Y2FzZSJyIjp2YXIgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxUb3ArMSsiOyIrKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSsxKSsiciI7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiUDEkciIrcitzLkMwLkVTQysiXFwiKTticmVhaztjYXNlIm0iOnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlAxJHIwbSIrcy5DMC5FU0MrIlxcIik7YnJlYWs7Y2FzZSIgcSI6dmFyIGk9e2Jsb2NrOjIsdW5kZXJsaW5lOjQsYmFyOjZ9W3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGVdO2ktPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yQmxpbms/MTowLHRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlAxJHIiK2krIiBxIitzLkMwLkVTQysiXFwiKTticmVhaztkZWZhdWx0OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gRENTICRxICVzIix0KSx0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJQMCRyIitzLkMwLkVTQysiXFwiKX1yZXR1cm4hMH0sZX0oKSxFPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLGwsaCxkLHYpe3ZvaWQgMD09PXYmJih2PW5ldyBjLkVzY2FwZVNlcXVlbmNlUGFyc2VyKTt2YXIgeT1lLmNhbGwodGhpcyl8fHRoaXM7eS5fYnVmZmVyU2VydmljZT10LHkuX2NoYXJzZXRTZXJ2aWNlPXIseS5fY29yZVNlcnZpY2U9aSx5Ll9kaXJ0eVJvd1NlcnZpY2U9bix5Ll9sb2dTZXJ2aWNlPW8seS5fb3B0aW9uc1NlcnZpY2U9bCx5Ll9jb3JlTW91c2VTZXJ2aWNlPWgseS5fdW5pY29kZVNlcnZpY2U9ZCx5Ll9wYXJzZXI9dix5Ll9wYXJzZUJ1ZmZlcj1uZXcgVWludDMyQXJyYXkoNDA5NikseS5fc3RyaW5nRGVjb2Rlcj1uZXcgdS5TdHJpbmdUb1V0ZjMyLHkuX3V0ZjhEZWNvZGVyPW5ldyB1LlV0ZjhUb1V0ZjMyLHkuX3dvcmtDZWxsPW5ldyBwLkNlbGxEYXRhLHkuX3dpbmRvd1RpdGxlPSIiLHkuX2ljb25OYW1lPSIiLHkuX3dpbmRvd1RpdGxlU3RhY2s9W10seS5faWNvbk5hbWVTdGFjaz1bXSx5Ll9jdXJBdHRyRGF0YT1mLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCkseS5fZXJhc2VBdHRyRGF0YUludGVybmFsPWYuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx5Ll9vblJlcXVlc3RCZWxsPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RSZWZyZXNoUm93cz1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25SZXF1ZXN0UmVzZXQ9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uUmVxdWVzdFNlbmRGb2N1cz1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25SZXF1ZXN0U3luY1Njcm9sbEJhcj1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQ9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uQTExeUNoYXI9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uQTExeVRhYj1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25DdXJzb3JNb3ZlPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkxpbmVGZWVkPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblNjcm9sbD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25UaXRsZUNoYW5nZT1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25Db2xvcj1uZXcgXy5FdmVudEVtaXR0ZXIseS5fcGFyc2VTdGFjaz17cGF1c2VkOiExLGN1cnNvclN0YXJ0WDowLGN1cnNvclN0YXJ0WTowLGRlY29kZWRMZW5ndGg6MCxwb3NpdGlvbjowfSx5Ll9zcGVjaWFsQ29sb3JzPVsyNTYsMjU3LDI1OF0seS5yZWdpc3Rlcih5Ll9wYXJzZXIpLHkuX2FjdGl2ZUJ1ZmZlcj15Ll9idWZmZXJTZXJ2aWNlLmJ1ZmZlcix5LnJlZ2lzdGVyKHkuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbihlKXtyZXR1cm4geS5fYWN0aXZlQnVmZmVyPWUuYWN0aXZlQnVmZmVyfSkpKSx5Ll9wYXJzZXIuc2V0Q3NpSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlLHQpe3kuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gQ1NJIGNvZGU6ICIse2lkZW50aWZpZXI6eS5fcGFyc2VyLmlkZW50VG9TdHJpbmcoZSkscGFyYW1zOnQudG9BcnJheSgpfSl9KSkseS5fcGFyc2VyLnNldEVzY0hhbmRsZXJGYWxsYmFjaygoZnVuY3Rpb24oZSl7eS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBFU0MgY29kZTogIix7aWRlbnRpZmllcjp5Ll9wYXJzZXIuaWRlbnRUb1N0cmluZyhlKX0pfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlKXt5Ll9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIEVYRUNVVEUgY29kZTogIix7Y29kZTplfSl9KSkseS5fcGFyc2VyLnNldE9zY0hhbmRsZXJGYWxsYmFjaygoZnVuY3Rpb24oZSx0LHIpe3kuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gT1NDIGNvZGU6ICIse2lkZW50aWZpZXI6ZSxhY3Rpb246dCxkYXRhOnJ9KX0pKSx5Ll9wYXJzZXIuc2V0RGNzSGFuZGxlckZhbGxiYWNrKChmdW5jdGlvbihlLHQscil7IkhPT0siPT09dCYmKHI9ci50b0FycmF5KCkpLHkuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gRENTIGNvZGU6ICIse2lkZW50aWZpZXI6eS5fcGFyc2VyLmlkZW50VG9TdHJpbmcoZSksYWN0aW9uOnQscGF5bG9hZDpyfSl9KSkseS5fcGFyc2VyLnNldFByaW50SGFuZGxlcigoZnVuY3Rpb24oZSx0LHIpe3JldHVybiB5LnByaW50KGUsdCxyKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiQCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5pbnNlcnRDaGFycyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIgIixmaW5hbDoiQCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zY3JvbGxMZWZ0KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJBIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvclVwKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiAiLGZpbmFsOiJBIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNjcm9sbFJpZ2h0KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJCIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckRvd24oZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkMifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yRm9yd2FyZChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiRCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JCYWNrd2FyZChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiRSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JOZXh0TGluZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiRiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JQcmVjZWRpbmdMaW5lKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJHIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckNoYXJBYnNvbHV0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiSCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JQb3NpdGlvbihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiSSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JGb3J3YXJkVGFiKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJKIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmVyYXNlSW5EaXNwbGF5KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDoiPyIsZmluYWw6IkoifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VJbkRpc3BsYXkoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IksifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VJbkxpbmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoiSyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUluTGluZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiTCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5pbnNlcnRMaW5lcyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiTSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5kZWxldGVMaW5lcyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiUCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5kZWxldGVDaGFycyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiUyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zY3JvbGxVcChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiVCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zY3JvbGxEb3duKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJYIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmVyYXNlQ2hhcnMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IloifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yQmFja3dhcmRUYWIoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImAifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY2hhclBvc0Fic29sdXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJhIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmhQb3NpdGlvblJlbGF0aXZlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJiIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlcGVhdFByZWNlZGluZ0NoYXJhY3RlcihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiYyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZW5kRGV2aWNlQXR0cmlidXRlc1ByaW1hcnkoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI+IixmaW5hbDoiYyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZW5kRGV2aWNlQXR0cmlidXRlc1NlY29uZGFyeShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiZCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5saW5lUG9zQWJzb2x1dGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImUifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkudlBvc2l0aW9uUmVsYXRpdmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImYifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuaFZQb3NpdGlvbihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiZyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS50YWJDbGVhcihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiaCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRNb2RlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDoiPyIsZmluYWw6ImgifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0TW9kZVByaXZhdGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImwifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzZXRNb2RlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDoiPyIsZmluYWw6ImwifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzZXRNb2RlUHJpdmF0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoibSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jaGFyQXR0cmlidXRlcyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoibiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5kZXZpY2VTdGF0dXMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7cHJlZml4OiI/IixmaW5hbDoibiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5kZXZpY2VTdGF0dXNQcml2YXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiEiLGZpbmFsOiJwIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNvZnRSZXNldChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIgIixmaW5hbDoicSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRDdXJzb3JTdHlsZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiciJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRTY3JvbGxSZWdpb24oZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6InMifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2F2ZUN1cnNvcihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoidCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS53aW5kb3dPcHRpb25zKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJ1In0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVDdXJzb3IoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiJyIsZmluYWw6In0ifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuaW5zZXJ0Q29sdW1ucyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiInIixmaW5hbDoifiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5kZWxldGVDb2x1bW5zKGUpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkJFTCwoZnVuY3Rpb24oKXtyZXR1cm4geS5iZWxsKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuTEYsKGZ1bmN0aW9uKCl7cmV0dXJuIHkubGluZUZlZWQoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5WVCwoZnVuY3Rpb24oKXtyZXR1cm4geS5saW5lRmVlZCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkZGLChmdW5jdGlvbigpe3JldHVybiB5LmxpbmVGZWVkKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuQ1IsKGZ1bmN0aW9uKCl7cmV0dXJuIHkuY2FycmlhZ2VSZXR1cm4oKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5CUywoZnVuY3Rpb24oKXtyZXR1cm4geS5iYWNrc3BhY2UoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5IVCwoZnVuY3Rpb24oKXtyZXR1cm4geS50YWIoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5TTywoZnVuY3Rpb24oKXtyZXR1cm4geS5zaGlmdE91dCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLlNJLChmdW5jdGlvbigpe3JldHVybiB5LnNoaWZ0SW4oKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMS5JTkQsKGZ1bmN0aW9uKCl7cmV0dXJuIHkuaW5kZXgoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMS5ORUwsKGZ1bmN0aW9uKCl7cmV0dXJuIHkubmV4dExpbmUoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMS5IVFMsKGZ1bmN0aW9uKCl7cmV0dXJuIHkudGFiU2V0KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigwLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldFRpdGxlKGUpLHkuc2V0SWNvbk5hbWUoZSksITB9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMSxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRJY29uTmFtZShlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigyLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldFRpdGxlKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDQsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0T3JSZXBvcnRJbmRleGVkQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTAsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0T3JSZXBvcnRGZ0NvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE9yUmVwb3J0QmdDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMixuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRPclJlcG9ydEN1cnNvckNvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEwNCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXN0b3JlSW5kZXhlZENvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXN0b3JlRmdDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTEsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUJnQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTEyLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVDdXJzb3JDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IjcifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zYXZlQ3Vyc29yKCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IjgifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5yZXN0b3JlQ3Vyc29yKCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IkQifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5pbmRleCgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJFIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkubmV4dExpbmUoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiSCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnRhYlNldCgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJNIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkucmV2ZXJzZUluZGV4KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6Ij0ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5rZXlwYWRBcHBsaWNhdGlvbk1vZGUoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiPiJ9LChmdW5jdGlvbigpe3JldHVybiB5LmtleXBhZE51bWVyaWNNb2RlKCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6ImMifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5mdWxsUmVzZXQoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoibiJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNldGdMZXZlbCgyKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoibyJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNldGdMZXZlbCgzKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoifCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNldGdMZXZlbCgzKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoifSJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNldGdMZXZlbCgyKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoifiJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNldGdMZXZlbCgxKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIlIixmaW5hbDoiQCJ9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdERlZmF1bHRDaGFyc2V0KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiJSIsZmluYWw6IkcifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3REZWZhdWx0Q2hhcnNldCgpfSkpO3ZhciBtPWZ1bmN0aW9uKGUpe2IuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IigiLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIigiK2UpfSkpLGIuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IikiLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIikiK2UpfSkpLGIuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IioiLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIioiK2UpfSkpLGIuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IisiLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIisiK2UpfSkpLGIuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6Ii0iLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIi0iK2UpfSkpLGIuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6Ii4iLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIi4iK2UpfSkpLGIuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6Ii8iLGZpbmFsOmV9LChmdW5jdGlvbigpe3JldHVybiB5LnNlbGVjdENoYXJzZXQoIi8iK2UpfSkpfSxiPXRoaXM7Zm9yKHZhciBTIGluIGEuQ0hBUlNFVFMpbShTKTtyZXR1cm4geS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiIyIsZmluYWw6IjgifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zY3JlZW5BbGlnbm1lbnRQYXR0ZXJuKCl9KSkseS5fcGFyc2VyLnNldEVycm9ySGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuX2xvZ1NlcnZpY2UuZXJyb3IoIlBhcnNpbmcgZXJyb3I6ICIsZSksZX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJEY3NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIkIixmaW5hbDoicSJ9LG5ldyBMKHkuX2J1ZmZlclNlcnZpY2UseS5fY29yZVNlcnZpY2UseS5fbG9nU2VydmljZSx5Ll9vcHRpb25zU2VydmljZSkpLHl9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdEJlbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0QmVsbC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlZnJlc2hSb3dzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0UmVzZXQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0UmVzZXQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RTZW5kRm9jdXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0U2VuZEZvY3VzLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0U3luY1Njcm9sbEJhciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkExMXlDaGFyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQTExeUNoYXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkExMXlUYWIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25BMTF5VGFiLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25DdXJzb3JNb3ZlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ3Vyc29yTW92ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uTGluZUZlZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25MaW5lRmVlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uU2Nyb2xsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25UaXRsZUNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25Db2xvciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkNvbG9yLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLl9wcmVzZXJ2ZVN0YWNrPWZ1bmN0aW9uKGUsdCxyLGkpe3RoaXMuX3BhcnNlU3RhY2sucGF1c2VkPSEwLHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRYPWUsdGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFk9dCx0aGlzLl9wYXJzZVN0YWNrLmRlY29kZWRMZW5ndGg9cix0aGlzLl9wYXJzZVN0YWNrLnBvc2l0aW9uPWl9LHQucHJvdG90eXBlLl9sb2dTbG93UmVzb2x2aW5nQXN5bmM9ZnVuY3Rpb24oZSl7dGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbDw9eS5Mb2dMZXZlbEVudW0uV0FSTiYmUHJvbWlzZS5yYWNlKFtlLG5ldyBQcm9taXNlKChmdW5jdGlvbihlLHQpe3JldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiB0KCIjU0xPV19USU1FT1VUIil9KSw1ZTMpfSkpXSkuY2F0Y2goKGZ1bmN0aW9uKGUpe2lmKCIjU0xPV19USU1FT1VUIiE9PWUpdGhyb3cgZTtjb25zb2xlLndhcm4oImFzeW5jIHBhcnNlciBoYW5kbGVyIHRha2luZyBsb25nZXIgdGhhbiA1MDAwIG1zIil9KSl9LHQucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaT10aGlzLl9hY3RpdmVCdWZmZXIueCxuPXRoaXMuX2FjdGl2ZUJ1ZmZlci55LG89MCxzPXRoaXMuX3BhcnNlU3RhY2sucGF1c2VkO2lmKHMpe2lmKHI9dGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLHRoaXMuX3BhcnNlU3RhY2suZGVjb2RlZExlbmd0aCx0KSlyZXR1cm4gdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHIpLHI7aT10aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WCxuPXRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRZLHRoaXMuX3BhcnNlU3RhY2sucGF1c2VkPSExLGUubGVuZ3RoPkMmJihvPXRoaXMuX3BhcnNlU3RhY2sucG9zaXRpb24rQyl9aWYodGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbDw9eS5Mb2dMZXZlbEVudW0uREVCVUcmJnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoInBhcnNpbmcgZGF0YSIrKCJzdHJpbmciPT10eXBlb2YgZT8nICInK2UrJyInOicgIicrQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKGUsKGZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGUpfSkpLmpvaW4oIiIpKyciJyksInN0cmluZyI9PXR5cGVvZiBlP2Uuc3BsaXQoIiIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKX0pKTplKSx0aGlzLl9wYXJzZUJ1ZmZlci5sZW5ndGg8ZS5sZW5ndGgmJnRoaXMuX3BhcnNlQnVmZmVyLmxlbmd0aDxDJiYodGhpcy5fcGFyc2VCdWZmZXI9bmV3IFVpbnQzMkFycmF5KE1hdGgubWluKGUubGVuZ3RoLEMpKSksc3x8dGhpcy5fZGlydHlSb3dTZXJ2aWNlLmNsZWFyUmFuZ2UoKSxlLmxlbmd0aD5DKWZvcih2YXIgYT1vO2E8ZS5sZW5ndGg7YSs9Qyl7dmFyIGM9YStDPGUubGVuZ3RoP2ErQzplLmxlbmd0aCxsPSJzdHJpbmciPT10eXBlb2YgZT90aGlzLl9zdHJpbmdEZWNvZGVyLmRlY29kZShlLnN1YnN0cmluZyhhLGMpLHRoaXMuX3BhcnNlQnVmZmVyKTp0aGlzLl91dGY4RGVjb2Rlci5kZWNvZGUoZS5zdWJhcnJheShhLGMpLHRoaXMuX3BhcnNlQnVmZmVyKTtpZihyPXRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlcixsKSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjayhpLG4sbCxhKSx0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocikscn1lbHNlIGlmKCFzJiYobD0ic3RyaW5nIj09dHlwZW9mIGU/dGhpcy5fc3RyaW5nRGVjb2Rlci5kZWNvZGUoZSx0aGlzLl9wYXJzZUJ1ZmZlcik6dGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKGUsdGhpcy5fcGFyc2VCdWZmZXIpLHI9dGhpcy5fcGFyc2VyLnBhcnNlKHRoaXMuX3BhcnNlQnVmZmVyLGwpKSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjayhpLG4sbCwwKSx0aGlzLl9sb2dTbG93UmVzb2x2aW5nQXN5bmMocikscjt0aGlzLl9hY3RpdmVCdWZmZXIueD09PWkmJnRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09bnx8dGhpcy5fb25DdXJzb3JNb3ZlLmZpcmUoKSx0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKHRoaXMuX2RpcnR5Um93U2VydmljZS5zdGFydCx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UuZW5kKX0sdC5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG4sbz10aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0LHM9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlLGE9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGM9dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLndyYXBhcm91bmQsbD10aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlLGg9dGhpcy5fY3VyQXR0ckRhdGEsZj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksdGhpcy5fYWN0aXZlQnVmZmVyLngmJnItdD4wJiYyPT09Zi5nZXRXaWR0aCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xKSYmZi5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xLDAsMSxoLmZnLGguYmcsaC5leHRlbmRlZCk7Zm9yKHZhciBfPXQ7XzxyOysrXyl7aWYoaT1lW19dLG49dGhpcy5fdW5pY29kZVNlcnZpY2Uud2N3aWR0aChpKSxpPDEyNyYmbyl7dmFyIHA9b1tTdHJpbmcuZnJvbUNoYXJDb2RlKGkpXTtwJiYoaT1wLmNoYXJDb2RlQXQoMCkpfWlmKHMmJnRoaXMuX29uQTExeUNoYXIuZmlyZSgoMCx1LnN0cmluZ0Zyb21Db2RlUG9pbnQpKGkpKSxufHwhdGhpcy5fYWN0aXZlQnVmZmVyLngpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54K24tMT49YSlpZihjKXtmb3IoO3RoaXMuX2FjdGl2ZUJ1ZmZlci54PGE7KWYuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKywwLDEsaC5mZyxoLmJnLGguZXh0ZW5kZWQpO3RoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsdGhpcy5fYWN0aXZlQnVmZmVyLnkrKyx0aGlzLl9hY3RpdmVCdWZmZXIueT09PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20rMT8odGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCksITApKToodGhpcy5fYWN0aXZlQnVmZmVyLnk+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSkuaXNXcmFwcGVkPSEwKSxmPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KX1lbHNlIGlmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54PWEtMSwyPT09biljb250aW51ZTtpZihsJiYoZi5pbnNlcnRDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCxuLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbChoKSxoKSwyPT09Zi5nZXRXaWR0aChhLTEpJiZmLnNldENlbGxGcm9tQ29kZVBvaW50KGEtMSxkLk5VTExfQ0VMTF9DT0RFLGQuTlVMTF9DRUxMX1dJRFRILGguZmcsaC5iZyxoLmV4dGVuZGVkKSksZi5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCsrLGksbixoLmZnLGguYmcsaC5leHRlbmRlZCksbj4wKWZvcig7LS1uOylmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssMCwwLGguZmcsaC5iZyxoLmV4dGVuZGVkKX1lbHNlIGYuZ2V0V2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLngtMSk/Zi5hZGRDb2RlcG9pbnRUb0NlbGwodGhpcy5fYWN0aXZlQnVmZmVyLngtMSxpKTpmLmFkZENvZGVwb2ludFRvQ2VsbCh0aGlzLl9hY3RpdmVCdWZmZXIueC0yLGkpfXItdD4wJiYoZi5sb2FkQ2VsbCh0aGlzLl9hY3RpdmVCdWZmZXIueC0xLHRoaXMuX3dvcmtDZWxsKSwyPT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKXx8dGhpcy5fd29ya0NlbGwuZ2V0Q29kZSgpPjY1NTM1P3RoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQ9MDp0aGlzLl93b3JrQ2VsbC5pc0NvbWJpbmVkKCk/dGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludD10aGlzLl93b3JrQ2VsbC5nZXRDaGFycygpLmNoYXJDb2RlQXQoMCk6dGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludD10aGlzLl93b3JrQ2VsbC5jb250ZW50KSx0aGlzLl9hY3RpdmVCdWZmZXIueDxhJiZyLXQ+MCYmMD09PWYuZ2V0V2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLngpJiYhZi5oYXNDb250ZW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSYmZi5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCwwLDEsaC5mZyxoLmJnLGguZXh0ZW5kZWQpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpfSx0LnByb3RvdHlwZS5yZWdpc3RlckNzaUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3JldHVybiJ0IiE9PWUuZmluYWx8fGUucHJlZml4fHxlLmludGVybWVkaWF0ZXM/dGhpcy5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLHQpOnRoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIXcoZS5wYXJhbXNbMF0sci5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zKXx8dChlKX0pKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJEY3NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckRjc0hhbmRsZXIoZSxuZXcgbS5EY3NIYW5kbGVyKHQpKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJFc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoZSx0KX0sdC5wcm90b3R5cGUucmVnaXN0ZXJPc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoZSxuZXcgZy5Pc2NIYW5kbGVyKHQpKX0sdC5wcm90b3R5cGUuYmVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RCZWxsLmZpcmUoKSwhMH0sdC5wcm90b3R5cGUubGluZUZlZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jb252ZXJ0RW9sJiYodGhpcy5fYWN0aXZlQnVmZmVyLng9MCksdGhpcy5fYWN0aXZlQnVmZmVyLnkrKyx0aGlzLl9hY3RpdmVCdWZmZXIueT09PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20rMT8odGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTp0aGlzLl9hY3RpdmVCdWZmZXIueT49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzJiYodGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54Pj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMmJnRoaXMuX2FjdGl2ZUJ1ZmZlci54LS0sdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSksdGhpcy5fb25MaW5lRmVlZC5maXJlKCksITB9LHQucHJvdG90eXBlLmNhcnJpYWdlUmV0dXJuPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9LHQucHJvdG90eXBlLmJhY2tzcGFjZT1mdW5jdGlvbigpe3ZhciBlO2lmKCF0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMucmV2ZXJzZVdyYXBhcm91bmQpcmV0dXJuIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fYWN0aXZlQnVmZmVyLng+MCYmdGhpcy5fYWN0aXZlQnVmZmVyLngtLSwhMDtpZih0aGlzLl9yZXN0cmljdEN1cnNvcih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PjApdGhpcy5fYWN0aXZlQnVmZmVyLngtLTtlbHNlIGlmKDA9PT10aGlzLl9hY3RpdmVCdWZmZXIueCYmdGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCYmdGhpcy5fYWN0aXZlQnVmZmVyLnk8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20mJihudWxsPT09KGU9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pc1dyYXBwZWQpKXt0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSkuaXNXcmFwcGVkPSExLHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fYWN0aXZlQnVmZmVyLng9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTE7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3QuaGFzV2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLngpJiYhdC5oYXNDb250ZW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSYmdGhpcy5fYWN0aXZlQnVmZmVyLngtLX1yZXR1cm4gdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSwhMH0sdC5wcm90b3R5cGUudGFiPWZ1bmN0aW9uKCl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLng+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scylyZXR1cm4hMDt2YXIgZT10aGlzLl9hY3RpdmVCdWZmZXIueDtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLng9dGhpcy5fYWN0aXZlQnVmZmVyLm5leHRTdG9wKCksdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JlZW5SZWFkZXJNb2RlJiZ0aGlzLl9vbkExMXlUYWIuZmlyZSh0aGlzLl9hY3RpdmVCdWZmZXIueC1lKSwhMH0sdC5wcm90b3R5cGUuc2hpZnRPdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDEpLCEwfSx0LnByb3RvdHlwZS5zaGlmdEluPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKSwhMH0sdC5wcm90b3R5cGUuX3Jlc3RyaWN0Q3Vyc29yPWZ1bmN0aW9uKGUpe3ZvaWQgMD09PWUmJihlPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKSx0aGlzLl9hY3RpdmVCdWZmZXIueD1NYXRoLm1pbihlLE1hdGgubWF4KDAsdGhpcy5fYWN0aXZlQnVmZmVyLngpKSx0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luP01hdGgubWluKHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sTWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIueSkpOk1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xLE1hdGgubWF4KDAsdGhpcy5fYWN0aXZlQnVmZmVyLnkpKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KX0sdC5wcm90b3R5cGUuX3NldEN1cnNvcj1mdW5jdGlvbihlLHQpe3RoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW4/KHRoaXMuX2FjdGl2ZUJ1ZmZlci54PWUsdGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCt0KToodGhpcy5fYWN0aXZlQnVmZmVyLng9ZSx0aGlzLl9hY3RpdmVCdWZmZXIueT10KSx0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpfSx0LnByb3RvdHlwZS5fbW92ZUN1cnNvcj1mdW5jdGlvbihlLHQpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fc2V0Q3Vyc29yKHRoaXMuX2FjdGl2ZUJ1ZmZlci54K2UsdGhpcy5fYWN0aXZlQnVmZmVyLnkrdCl9LHQucHJvdG90eXBlLmN1cnNvclVwPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55LXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cmV0dXJuIHQ+PTA/dGhpcy5fbW92ZUN1cnNvcigwLC1NYXRoLm1pbih0LGUucGFyYW1zWzBdfHwxKSk6dGhpcy5fbW92ZUN1cnNvcigwLC0oZS5wYXJhbXNbMF18fDEpKSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yRG93bj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLXRoaXMuX2FjdGl2ZUJ1ZmZlci55O3JldHVybiB0Pj0wP3RoaXMuX21vdmVDdXJzb3IoMCxNYXRoLm1pbih0LGUucGFyYW1zWzBdfHwxKSk6dGhpcy5fbW92ZUN1cnNvcigwLGUucGFyYW1zWzBdfHwxKSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yRm9yd2FyZD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcihlLnBhcmFtc1swXXx8MSwwKSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yQmFja3dhcmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vdmVDdXJzb3IoLShlLnBhcmFtc1swXXx8MSksMCksITB9LHQucHJvdG90eXBlLmN1cnNvck5leHRMaW5lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmN1cnNvckRvd24oZSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuY3Vyc29yUHJlY2VkaW5nTGluZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdXJzb3JVcChlKSx0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JDaGFyQWJzb2x1dGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldEN1cnNvcigoZS5wYXJhbXNbMF18fDEpLTEsdGhpcy5fYWN0aXZlQnVmZmVyLnkpLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JQb3NpdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKGUubGVuZ3RoPj0yPyhlLnBhcmFtc1sxXXx8MSktMTowLChlLnBhcmFtc1swXXx8MSktMSksITB9LHQucHJvdG90eXBlLmNoYXJQb3NBYnNvbHV0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0Q3Vyc29yKChlLnBhcmFtc1swXXx8MSktMSx0aGlzLl9hY3RpdmVCdWZmZXIueSksITB9LHQucHJvdG90eXBlLmhQb3NpdGlvblJlbGF0aXZlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb3ZlQ3Vyc29yKGUucGFyYW1zWzBdfHwxLDApLCEwfSx0LnByb3RvdHlwZS5saW5lUG9zQWJzb2x1dGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldEN1cnNvcih0aGlzLl9hY3RpdmVCdWZmZXIueCwoZS5wYXJhbXNbMF18fDEpLTEpLCEwfSx0LnByb3RvdHlwZS52UG9zaXRpb25SZWxhdGl2ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcigwLGUucGFyYW1zWzBdfHwxKSwhMH0sdC5wcm90b3R5cGUuaFZQb3NpdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdXJzb3JQb3NpdGlvbihlKSwhMH0sdC5wcm90b3R5cGUudGFiQ2xlYXI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJhbXNbMF07cmV0dXJuIDA9PT10P2RlbGV0ZSB0aGlzLl9hY3RpdmVCdWZmZXIudGFic1t0aGlzLl9hY3RpdmVCdWZmZXIueF06Mz09PXQmJih0aGlzLl9hY3RpdmVCdWZmZXIudGFicz17fSksITB9LHQucHJvdG90eXBlLmN1cnNvckZvcndhcmRUYWI9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLng+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scylyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDE7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIubmV4dFN0b3AoKTtyZXR1cm4hMH0sdC5wcm90b3R5cGUuY3Vyc29yQmFja3dhcmRUYWI9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLng+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scylyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDE7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIueD10aGlzLl9hY3RpdmVCdWZmZXIucHJldlN0b3AoKTtyZXR1cm4hMH0sdC5wcm90b3R5cGUuX2VyYXNlSW5CdWZmZXJMaW5lPWZ1bmN0aW9uKGUsdCxyLGkpe3ZvaWQgMD09PWkmJihpPSExKTt2YXIgbj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKTtuLnJlcGxhY2VDZWxscyh0LHIsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxpJiYobi5pc1dyYXBwZWQ9ITEpfSx0LnByb3RvdHlwZS5fcmVzZXRCdWZmZXJMaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK2UpO3QuZmlsbCh0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSksdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuY2xlYXJNYXJrZXJzKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKSx0LmlzV3JhcHBlZD0hMX0sdC5wcm90b3R5cGUuZXJhc2VJbkRpc3BsYXk9ZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksZS5wYXJhbXNbMF0pe2Nhc2UgMDpmb3IodD10aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHQpLHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHQrKyx0aGlzLl9hY3RpdmVCdWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54KTt0PHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93czt0KyspdGhpcy5fcmVzZXRCdWZmZXJMaW5lKHQpO3RoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodCk7YnJlYWs7Y2FzZSAxOmZvcih0PXRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodCksdGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodCwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KzEsITApLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KzE+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodCsxKS5pc1dyYXBwZWQ9ITEpO3QtLTspdGhpcy5fcmVzZXRCdWZmZXJMaW5lKHQpO3RoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoMCk7YnJlYWs7Y2FzZSAyOmZvcih0PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHQtMSk7dC0tOyl0aGlzLl9yZXNldEJ1ZmZlckxpbmUodCk7dGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSgwKTticmVhaztjYXNlIDM6dmFyIHI9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmxlbmd0aC10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7cj4wJiYodGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnRyaW1TdGFydChyKSx0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2U9TWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLXIsMCksdGhpcy5fYWN0aXZlQnVmZmVyLnlkaXNwPU1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcC1yLDApLHRoaXMuX29uU2Nyb2xsLmZpcmUoMCkpfXJldHVybiEwfSx0LnByb3RvdHlwZS5lcmFzZUluTGluZT1mdW5jdGlvbihlKXtzd2l0Y2godGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSxlLnBhcmFtc1swXSl7Y2FzZSAwOnRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywwPT09dGhpcy5fYWN0aXZlQnVmZmVyLngpO2JyZWFrO2Nhc2UgMTp0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9hY3RpdmVCdWZmZXIueSwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KzEsITEpO2JyZWFrO2Nhc2UgMjp0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9hY3RpdmVCdWZmZXIueSwwLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scywhMCl9cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLCEwfSx0LnByb3RvdHlwZS5pbnNlcnRMaW5lcz1mdW5jdGlvbihlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO3ZhciB0PWUucGFyYW1zWzBdfHwxO2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciByPXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSxpPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xLXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sbj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSt0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UtaSsxO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShuLTEsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShyLDAsdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtyZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9LHQucHJvdG90eXBlLmRlbGV0ZUxpbmVzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9ZS5wYXJhbXNbMF18fDE7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDt2YXIgcixpPXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueTtmb3Iocj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMS10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLHI9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTErdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLXI7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKGksMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShyLDAsdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtyZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9LHQucHJvdG90eXBlLmluc2VydENoYXJzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3JldHVybiB0JiYodC5pbnNlcnRDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCxlLnBhcmFtc1swXXx8MSx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpKSwhMH0sdC5wcm90b3R5cGUuZGVsZXRlQ2hhcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7cmV0dXJuIHQmJih0LmRlbGV0ZUNlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LGUucGFyYW1zWzBdfHwxLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSkpLCEwfSx0LnByb3RvdHlwZS5zY3JvbGxVcD1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDE7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20sMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpO3JldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuc2Nyb2xsRG93bj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDE7dC0tOyl0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsMCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKGYuREVGQVVMVF9BVFRSX0RBVEEpKTtyZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksITB9LHQucHJvdG90eXBlLnNjcm9sbExlZnQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDEscj10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3I8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207KytyKXt2YXIgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStyKTtpLmRlbGV0ZUNlbGxzKDAsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLGkuaXNXcmFwcGVkPSExfXJldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuc2Nyb2xsUmlnaHQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDEscj10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3I8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207KytyKXt2YXIgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStyKTtpLmluc2VydENlbGxzKDAsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLGkuaXNXcmFwcGVkPSExfXJldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuaW5zZXJ0Q29sdW1ucz1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cjw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsrK3Ipe3ZhciBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3IpO2kuaW5zZXJ0Q2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLGkuaXNXcmFwcGVkPSExfXJldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuZGVsZXRlQ29sdW1ucz1mdW5jdGlvbihlKXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgdD1lLnBhcmFtc1swXXx8MSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7cjw9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbTsrK3Ipe3ZhciBpPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3IpO2kuZGVsZXRlQ2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsdCx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLGkuaXNXcmFwcGVkPSExfXJldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSwhMH0sdC5wcm90b3R5cGUuZXJhc2VDaGFycz1mdW5jdGlvbihlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTtyZXR1cm4gdCYmKHQucmVwbGFjZUNlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyhlLnBhcmFtc1swXXx8MSksdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksITB9LHQucHJvdG90eXBlLnJlcGVhdFByZWNlZGluZ0NoYXJhY3Rlcj1mdW5jdGlvbihlKXtpZighdGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludClyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDEscj1uZXcgVWludDMyQXJyYXkodCksaT0wO2k8dDsrK2kpcltpXT10aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50O3JldHVybiB0aGlzLnByaW50KHIsMCxyLmxlbmd0aCksITB9LHQucHJvdG90eXBlLnNlbmREZXZpY2VBdHRyaWJ1dGVzUHJpbWFyeT1mdW5jdGlvbihlKXtyZXR1cm4gZS5wYXJhbXNbMF0+MHx8KHRoaXMuX2lzKCJ4dGVybSIpfHx0aGlzLl9pcygicnh2dC11bmljb2RlIil8fHRoaXMuX2lzKCJzY3JlZW4iKT90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPzE7MmMiKTp0aGlzLl9pcygibGludXgiKSYmdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz82YyIpKSwhMH0sdC5wcm90b3R5cGUuc2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyYW1zWzBdPjB8fCh0aGlzLl9pcygieHRlcm0iKT90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPjA7Mjc2OzBjIik6dGhpcy5faXMoInJ4dnQtdW5pY29kZSIpP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls+ODU7OTU7MGMiKTp0aGlzLl9pcygibGludXgiKT90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGUucGFyYW1zWzBdKyJjIik6dGhpcy5faXMoInNjcmVlbiIpJiZ0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPjgzOzQwMDAzOzBjIikpLCEwfSx0LnByb3RvdHlwZS5faXM9ZnVuY3Rpb24oZSl7cmV0dXJuIDA9PT0odGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy50ZXJtTmFtZSsiIikuaW5kZXhPZihlKX0sdC5wcm90b3R5cGUuc2V0TW9kZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyk0PT09ZS5wYXJhbXNbdF0mJih0aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlPSEwKTtyZXR1cm4hMH0sdC5wcm90b3R5cGUuc2V0TW9kZVByaXZhdGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspc3dpdGNoKGUucGFyYW1zW3RdKXtjYXNlIDE6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cz0hMDticmVhaztjYXNlIDI6dGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMCxhLkRFRkFVTFRfQ0hBUlNFVCksdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMSxhLkRFRkFVTFRfQ0hBUlNFVCksdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMixhLkRFRkFVTFRfQ0hBUlNFVCksdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0NoYXJzZXQoMyxhLkRFRkFVTFRfQ0hBUlNFVCk7YnJlYWs7Y2FzZSAzOnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucy5zZXRXaW5MaW5lcyYmKHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKDEzMix0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKSk7YnJlYWs7Y2FzZSA2OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW49ITAsdGhpcy5fc2V0Q3Vyc29yKDAsMCk7YnJlYWs7Y2FzZSA3OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy53cmFwYXJvdW5kPSEwO2JyZWFrO2Nhc2UgMTI6YnJlYWs7Y2FzZSA0NTp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMucmV2ZXJzZVdyYXBhcm91bmQ9ITA7YnJlYWs7Y2FzZSA2Njp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLiIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMCx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDk6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD0iWDEwIjticmVhaztjYXNlIDFlMzp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPSJWVDIwMCI7YnJlYWs7Y2FzZSAxMDAyOnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9IkRSQUciO2JyZWFrO2Nhc2UgMTAwMzp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPSJBTlkiO2JyZWFrO2Nhc2UgMTAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzPSEwLHRoaXMuX29uUmVxdWVzdFNlbmRGb2N1cy5maXJlKCk7YnJlYWs7Y2FzZSAxMDA1OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIkRFQ1NFVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNykiKTticmVhaztjYXNlIDEwMDY6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZz0iU0dSIjticmVhaztjYXNlIDEwMTU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiREVDU0VUIDEwMTUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KSIpO2JyZWFrO2Nhc2UgMjU6dGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW49ITE7YnJlYWs7Y2FzZSAxMDQ4OnRoaXMuc2F2ZUN1cnNvcigpO2JyZWFrO2Nhc2UgMTA0OTp0aGlzLnNhdmVDdXJzb3IoKTtjYXNlIDQ3OmNhc2UgMTA0Nzp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVBbHRCdWZmZXIodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkPSEwLHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7YnJlYWs7Y2FzZSAyMDA0OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5icmFja2V0ZWRQYXN0ZU1vZGU9ITB9cmV0dXJuITB9LHQucHJvdG90eXBlLnJlc2V0TW9kZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyk0PT09ZS5wYXJhbXNbdF0mJih0aGlzLl9jb3JlU2VydmljZS5tb2Rlcy5pbnNlcnRNb2RlPSExKTtyZXR1cm4hMH0sdC5wcm90b3R5cGUucmVzZXRNb2RlUHJpdmF0ZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylzd2l0Y2goZS5wYXJhbXNbdF0pe2Nhc2UgMTp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzPSExO2JyZWFrO2Nhc2UgMzp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMuc2V0V2luTGluZXMmJih0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZSg4MCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpLHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKSk7YnJlYWs7Y2FzZSA2OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5vcmlnaW49ITEsdGhpcy5fc2V0Q3Vyc29yKDAsMCk7YnJlYWs7Y2FzZSA3OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy53cmFwYXJvdW5kPSExO2JyZWFrO2Nhc2UgMTI6YnJlYWs7Y2FzZSA0NTp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMucmV2ZXJzZVdyYXBhcm91bmQ9ITE7YnJlYWs7Y2FzZSA2Njp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLiIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDk6Y2FzZSAxZTM6Y2FzZSAxMDAyOmNhc2UgMTAwMzp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPSJOT05FIjticmVhaztjYXNlIDEwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cz0hMTticmVhaztjYXNlIDEwMDU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiREVDUlNUIDEwMDUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KSIpO2JyZWFrO2Nhc2UgMTAwNjp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZUVuY29kaW5nPSJERUZBVUxUIjticmVhaztjYXNlIDEwMTU6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiREVDUlNUIDEwMTUgbm90IHN1cHBvcnRlZCAoc2VlICMyNTA3KSIpO2JyZWFrO2Nhc2UgMjU6dGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JIaWRkZW49ITA7YnJlYWs7Y2FzZSAxMDQ4OnRoaXMucmVzdG9yZUN1cnNvcigpO2JyZWFrO2Nhc2UgMTA0OTpjYXNlIDQ3OmNhc2UgMTA0Nzp0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZhdGVOb3JtYWxCdWZmZXIoKSwxMDQ5PT09ZS5wYXJhbXNbdF0mJnRoaXMucmVzdG9yZUN1cnNvcigpLHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITAsdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSgwLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKTticmVhaztjYXNlIDIwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmJyYWNrZXRlZFBhc3RlTW9kZT0hMX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuX3VwZGF0ZUF0dHJDb2xvcj1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybiAyPT09dD8oZXw9NTAzMzE2NDgsZSY9LTE2Nzc3MjE2LGV8PXYuQXR0cmlidXRlRGF0YS5mcm9tQ29sb3JSR0IoW3IsaSxuXSkpOjU9PT10JiYoZSY9LTUwMzMxOTA0LGV8PTMzNTU0NDMyfDI1NSZyKSxlfSx0LnByb3RvdHlwZS5fZXh0cmFjdENvbG9yPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT1bMCwwLC0xLDAsMCwwXSxuPTAsbz0wO2Rve2lmKGlbbytuXT1lLnBhcmFtc1t0K29dLGUuaGFzU3ViUGFyYW1zKHQrbykpe3ZhciBzPWUuZ2V0U3ViUGFyYW1zKHQrbyksYT0wO2RvezU9PT1pWzFdJiYobj0xKSxpW28rYSsxK25dPXNbYV19d2hpbGUoKythPHMubGVuZ3RoJiZhK28rMStuPGkubGVuZ3RoKTticmVha31pZig1PT09aVsxXSYmbytuPj0yfHwyPT09aVsxXSYmbytuPj01KWJyZWFrO2lbMV0mJihuPTEpfXdoaWxlKCsrbyt0PGUubGVuZ3RoJiZvK248aS5sZW5ndGgpO2ZvcihhPTI7YTxpLmxlbmd0aDsrK2EpLTE9PT1pW2FdJiYoaVthXT0wKTtzd2l0Y2goaVswXSl7Y2FzZSAzODpyLmZnPXRoaXMuX3VwZGF0ZUF0dHJDb2xvcihyLmZnLGlbMV0saVszXSxpWzRdLGlbNV0pO2JyZWFrO2Nhc2UgNDg6ci5iZz10aGlzLl91cGRhdGVBdHRyQ29sb3Ioci5iZyxpWzFdLGlbM10saVs0XSxpWzVdKTticmVhaztjYXNlIDU4OnIuZXh0ZW5kZWQ9ci5leHRlbmRlZC5jbG9uZSgpLHIuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I9dGhpcy5fdXBkYXRlQXR0ckNvbG9yKHIuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IsaVsxXSxpWzNdLGlbNF0saVs1XSl9cmV0dXJuIG99LHQucHJvdG90eXBlLl9wcm9jZXNzVW5kZXJsaW5lPWZ1bmN0aW9uKGUsdCl7dC5leHRlbmRlZD10LmV4dGVuZGVkLmNsb25lKCksKCF+ZXx8ZT41KSYmKGU9MSksdC5leHRlbmRlZC51bmRlcmxpbmVTdHlsZT1lLHQuZmd8PTI2ODQzNTQ1NiwwPT09ZSYmKHQuZmcmPS0yNjg0MzU0NTcpLHQudXBkYXRlRXh0ZW5kZWQoKX0sdC5wcm90b3R5cGUuY2hhckF0dHJpYnV0ZXM9ZnVuY3Rpb24oZSl7aWYoMT09PWUubGVuZ3RoJiYwPT09ZS5wYXJhbXNbMF0pcmV0dXJuIHRoaXMuX2N1ckF0dHJEYXRhLmZnPWYuREVGQVVMVF9BVFRSX0RBVEEuZmcsdGhpcy5fY3VyQXR0ckRhdGEuYmc9Zi5ERUZBVUxUX0FUVFJfREFUQS5iZywhMDtmb3IodmFyIHQscj1lLmxlbmd0aCxpPXRoaXMuX2N1ckF0dHJEYXRhLG49MDtuPHI7bisrKSh0PWUucGFyYW1zW25dKT49MzAmJnQ8PTM3PyhpLmZnJj0tNTAzMzE5MDQsaS5mZ3w9MTY3NzcyMTZ8dC0zMCk6dD49NDAmJnQ8PTQ3PyhpLmJnJj0tNTAzMzE5MDQsaS5iZ3w9MTY3NzcyMTZ8dC00MCk6dD49OTAmJnQ8PTk3PyhpLmZnJj0tNTAzMzE5MDQsaS5mZ3w9MTY3NzcyMjR8dC05MCk6dD49MTAwJiZ0PD0xMDc/KGkuYmcmPS01MDMzMTkwNCxpLmJnfD0xNjc3NzIyNHx0LTEwMCk6MD09PXQ/KGkuZmc9Zi5ERUZBVUxUX0FUVFJfREFUQS5mZyxpLmJnPWYuREVGQVVMVF9BVFRSX0RBVEEuYmcpOjE9PT10P2kuZmd8PTEzNDIxNzcyODozPT09dD9pLmJnfD02NzEwODg2NDo0PT09dD8oaS5mZ3w9MjY4NDM1NDU2LHRoaXMuX3Byb2Nlc3NVbmRlcmxpbmUoZS5oYXNTdWJQYXJhbXMobik/ZS5nZXRTdWJQYXJhbXMobilbMF06MSxpKSk6NT09PXQ/aS5mZ3w9NTM2ODcwOTEyOjc9PT10P2kuZmd8PTY3MTA4ODY0Ojg9PT10P2kuZmd8PTEwNzM3NDE4MjQ6OT09PXQ/aS5mZ3w9MjE0NzQ4MzY0ODoyPT09dD9pLmJnfD0xMzQyMTc3Mjg6MjE9PT10P3RoaXMuX3Byb2Nlc3NVbmRlcmxpbmUoMixpKToyMj09PXQ/KGkuZmcmPS0xMzQyMTc3MjksaS5iZyY9LTEzNDIxNzcyOSk6MjM9PT10P2kuYmcmPS02NzEwODg2NToyND09PXQ/aS5mZyY9LTI2ODQzNTQ1NzoyNT09PXQ/aS5mZyY9LTUzNjg3MDkxMzoyNz09PXQ/aS5mZyY9LTY3MTA4ODY1OjI4PT09dD9pLmZnJj0tMTA3Mzc0MTgyNToyOT09PXQ/aS5mZyY9MjE0NzQ4MzY0NzozOT09PXQ/KGkuZmcmPS02NzEwODg2NCxpLmZnfD0xNjc3NzIxNSZmLkRFRkFVTFRfQVRUUl9EQVRBLmZnKTo0OT09PXQ/KGkuYmcmPS02NzEwODg2NCxpLmJnfD0xNjc3NzIxNSZmLkRFRkFVTFRfQVRUUl9EQVRBLmJnKTozOD09PXR8fDQ4PT09dHx8NTg9PT10P24rPXRoaXMuX2V4dHJhY3RDb2xvcihlLG4saSk6NTk9PT10PyhpLmV4dGVuZGVkPWkuZXh0ZW5kZWQuY2xvbmUoKSxpLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPS0xLGkudXBkYXRlRXh0ZW5kZWQoKSk6MTAwPT09dD8oaS5mZyY9LTY3MTA4ODY0LGkuZmd8PTE2Nzc3MjE1JmYuREVGQVVMVF9BVFRSX0RBVEEuZmcsaS5iZyY9LTY3MTA4ODY0LGkuYmd8PTE2Nzc3MjE1JmYuREVGQVVMVF9BVFRSX0RBVEEuYmcpOnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gU0dSIGF0dHJpYnV0ZTogJWQuIix0KTtyZXR1cm4hMH0sdC5wcm90b3R5cGUuZGV2aWNlU3RhdHVzPWZ1bmN0aW9uKGUpe3N3aXRjaChlLnBhcmFtc1swXSl7Y2FzZSA1OnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlswbiIpO2JyZWFrO2Nhc2UgNjp2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIueSsxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLngrMTt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbIit0KyI7IityKyJSIil9cmV0dXJuITB9LHQucHJvdG90eXBlLmRldmljZVN0YXR1c1ByaXZhdGU9ZnVuY3Rpb24oZSl7aWYoNj09PWUucGFyYW1zWzBdKXt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIueSsxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLngrMTt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPyIrdCsiOyIrcisiUiIpfXJldHVybiEwfSx0LnByb3RvdHlwZS5zb2Z0UmVzZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuPSExLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A9MCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xLHRoaXMuX2N1ckF0dHJEYXRhPWYuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx0aGlzLl9jb3JlU2VydmljZS5yZXNldCgpLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnJlc2V0KCksdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWD0wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFk9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnPXRoaXMuX2N1ckF0dHJEYXRhLmZnLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnPXRoaXMuX2N1ckF0dHJEYXRhLmJnLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQ9dGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldCx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luPSExLCEwfSx0LnByb3RvdHlwZS5zZXRDdXJzb3JTdHlsZT1mdW5jdGlvbihlKXt2YXIgdD1lLnBhcmFtc1swXXx8MTtzd2l0Y2godCl7Y2FzZSAxOmNhc2UgMjp0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlPSJibG9jayI7YnJlYWs7Y2FzZSAzOmNhc2UgNDp0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvclN0eWxlPSJ1bmRlcmxpbmUiO2JyZWFrO2Nhc2UgNTpjYXNlIDY6dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZT0iYmFyIn12YXIgcj10JTI9PTE7cmV0dXJuIHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yQmxpbms9ciwhMH0sdC5wcm90b3R5cGUuc2V0U2Nyb2xsUmVnaW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHI9ZS5wYXJhbXNbMF18fDE7cmV0dXJuKGUubGVuZ3RoPDJ8fCh0PWUucGFyYW1zWzFdKT50aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3N8fDA9PT10KSYmKHQ9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSx0PnImJih0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wPXItMSx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tPXQtMSx0aGlzLl9zZXRDdXJzb3IoMCwwKSksITB9LHQucHJvdG90eXBlLndpbmRvd09wdGlvbnM9ZnVuY3Rpb24oZSl7aWYoIXcoZS5wYXJhbXNbMF0sdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zKSlyZXR1cm4hMDt2YXIgdD1lLmxlbmd0aD4xP2UucGFyYW1zWzFdOjA7c3dpdGNoKGUucGFyYW1zWzBdKXtjYXNlIDE0OjIhPT10JiZ0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5maXJlKG8uR0VUX1dJTl9TSVpFX1BJWEVMUyk7YnJlYWs7Y2FzZSAxNjp0aGlzLl9vblJlcXVlc3RXaW5kb3dzT3B0aW9uc1JlcG9ydC5maXJlKG8uR0VUX0NFTExfU0laRV9QSVhFTFMpO2JyZWFrO2Nhc2UgMTg6dGhpcy5fYnVmZmVyU2VydmljZSYmdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWzg7Iit0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MrIjsiK3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scysidCIpO2JyZWFrO2Nhc2UgMjI6MCE9PXQmJjIhPT10fHwodGhpcy5fd2luZG93VGl0bGVTdGFjay5wdXNoKHRoaXMuX3dpbmRvd1RpdGxlKSx0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aD4xMCYmdGhpcy5fd2luZG93VGl0bGVTdGFjay5zaGlmdCgpKSwwIT09dCYmMSE9PXR8fCh0aGlzLl9pY29uTmFtZVN0YWNrLnB1c2godGhpcy5faWNvbk5hbWUpLHRoaXMuX2ljb25OYW1lU3RhY2subGVuZ3RoPjEwJiZ0aGlzLl9pY29uTmFtZVN0YWNrLnNoaWZ0KCkpO2JyZWFrO2Nhc2UgMjM6MCE9PXQmJjIhPT10fHx0aGlzLl93aW5kb3dUaXRsZVN0YWNrLmxlbmd0aCYmdGhpcy5zZXRUaXRsZSh0aGlzLl93aW5kb3dUaXRsZVN0YWNrLnBvcCgpKSwwIT09dCYmMSE9PXR8fHRoaXMuX2ljb25OYW1lU3RhY2subGVuZ3RoJiZ0aGlzLnNldEljb25OYW1lKHRoaXMuX2ljb25OYW1lU3RhY2sucG9wKCkpfXJldHVybiEwfSx0LnByb3RvdHlwZS5zYXZlQ3Vyc29yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRYPXRoaXMuX2FjdGl2ZUJ1ZmZlci54LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFk9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmZnPXRoaXMuX2N1ckF0dHJEYXRhLmZnLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZEN1ckF0dHJEYXRhLmJnPXRoaXMuX2N1ckF0dHJEYXRhLmJnLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZENoYXJzZXQ9dGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldCwhMH0sdC5wcm90b3R5cGUucmVzdG9yZUN1cnNvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLng9dGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWHx8MCx0aGlzLl9hY3RpdmVCdWZmZXIueT1NYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRZLXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSwwKSx0aGlzLl9jdXJBdHRyRGF0YS5mZz10aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZyx0aGlzLl9jdXJBdHRyRGF0YS5iZz10aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZyx0aGlzLl9jaGFyc2V0U2VydmljZS5jaGFyc2V0PXRoaXMuX3NhdmVkQ2hhcnNldCx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0JiYodGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldD10aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0KSx0aGlzLl9yZXN0cmljdEN1cnNvcigpLCEwfSx0LnByb3RvdHlwZS5zZXRUaXRsZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fd2luZG93VGl0bGU9ZSx0aGlzLl9vblRpdGxlQ2hhbmdlLmZpcmUoZSksITB9LHQucHJvdG90eXBlLnNldEljb25OYW1lPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9pY29uTmFtZT1lLCEwfSx0LnByb3RvdHlwZS5zZXRPclJlcG9ydEluZGV4ZWRDb2xvcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj1lLnNwbGl0KCI7Iik7ci5sZW5ndGg+MTspe3ZhciBpPXIuc2hpZnQoKSxuPXIuc2hpZnQoKTtpZigvXlxkKyQvLmV4ZWMoaSkpe3ZhciBvPXBhcnNlSW50KGkpO2lmKDA8PW8mJm88MjU2KWlmKCI/Ij09PW4pdC5wdXNoKHt0eXBlOjAsaW5kZXg6b30pO2Vsc2V7dmFyIHM9KDAsYi5wYXJzZUNvbG9yKShuKTtzJiZ0LnB1c2goe3R5cGU6MSxpbmRleDpvLGNvbG9yOnN9KX19fXJldHVybiB0Lmxlbmd0aCYmdGhpcy5fb25Db2xvci5maXJlKHQpLCEwfSx0LnByb3RvdHlwZS5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3I9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9ZS5zcGxpdCgiOyIpLGk9MDtpPHIubGVuZ3RoJiYhKHQ+PXRoaXMuX3NwZWNpYWxDb2xvcnMubGVuZ3RoKTsrK2ksKyt0KWlmKCI/Ij09PXJbaV0pdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZTowLGluZGV4OnRoaXMuX3NwZWNpYWxDb2xvcnNbdF19XSk7ZWxzZXt2YXIgbj0oMCxiLnBhcnNlQ29sb3IpKHJbaV0pO24mJnRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MSxpbmRleDp0aGlzLl9zcGVjaWFsQ29sb3JzW3RdLGNvbG9yOm59XSl9cmV0dXJuITB9LHQucHJvdG90eXBlLnNldE9yUmVwb3J0RmdDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IoZSwwKX0sdC5wcm90b3R5cGUuc2V0T3JSZXBvcnRCZ0NvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihlLDEpfSx0LnByb3RvdHlwZS5zZXRPclJlcG9ydEN1cnNvckNvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRPclJlcG9ydFNwZWNpYWxDb2xvcihlLDIpfSx0LnByb3RvdHlwZS5yZXN0b3JlSW5kZXhlZENvbG9yPWZ1bmN0aW9uKGUpe2lmKCFlKXJldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjJ9XSksITA7Zm9yKHZhciB0PVtdLHI9ZS5zcGxpdCgiOyIpLGk9MDtpPHIubGVuZ3RoOysraSlpZigvXlxkKyQvLmV4ZWMocltpXSkpe3ZhciBuPXBhcnNlSW50KHJbaV0pOzA8PW4mJm48MjU2JiZ0LnB1c2goe3R5cGU6MixpbmRleDpufSl9cmV0dXJuIHQubGVuZ3RoJiZ0aGlzLl9vbkNvbG9yLmZpcmUodCksITB9LHQucHJvdG90eXBlLnJlc3RvcmVGZ0NvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjIsaW5kZXg6MjU2fV0pLCEwfSx0LnByb3RvdHlwZS5yZXN0b3JlQmdDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToyLGluZGV4OjI1N31dKSwhMH0sdC5wcm90b3R5cGUucmVzdG9yZUN1cnNvckNvbG9yPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjIsaW5kZXg6MjU4fV0pLCEwfSx0LnByb3RvdHlwZS5uZXh0TGluZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD0wLHRoaXMuaW5kZXgoKSwhMH0sdC5wcm90b3R5cGUua2V5cGFkQXBwbGljYXRpb25Nb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlNlcmlhbCBwb3J0IHJlcXVlc3RlZCBhcHBsaWNhdGlvbiBrZXlwYWQuIiksdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uS2V5cGFkPSEwLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5rZXlwYWROdW1lcmljTW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJTd2l0Y2hpbmcgYmFjayB0byBub3JtYWwga2V5cGFkLiIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKSwhMH0sdC5wcm90b3R5cGUuc2VsZWN0RGVmYXVsdENoYXJzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKDApLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDAsYS5ERUZBVUxUX0NIQVJTRVQpLCEwfSx0LnByb3RvdHlwZS5zZWxlY3RDaGFyc2V0PWZ1bmN0aW9uKGUpe3JldHVybiAyIT09ZS5sZW5ndGg/KHRoaXMuc2VsZWN0RGVmYXVsdENoYXJzZXQoKSwhMCk6KCIvIj09PWVbMF18fHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KFNbZVswXV0sYS5DSEFSU0VUU1tlWzFdXXx8YS5ERUZBVUxUX0NIQVJTRVQpLCEwKX0sdC5wcm90b3R5cGUuaW5kZXg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9hY3RpdmVCdWZmZXIueSsrLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PT09dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSsxPyh0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpOnRoaXMuX2FjdGl2ZUJ1ZmZlci55Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MmJih0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSwhMH0sdC5wcm90b3R5cGUudGFiU2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci50YWJzW3RoaXMuX2FjdGl2ZUJ1ZmZlci54XT0hMCwhMH0sdC5wcm90b3R5cGUucmV2ZXJzZUluZGV4PWZ1bmN0aW9uKCl7aWYodGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9hY3RpdmVCdWZmZXIueT09PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3Ape3ZhciBlPXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20tdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDt0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc2hpZnRFbGVtZW50cyh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnksZSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0QmxhbmtMaW5lKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pfWVsc2UgdGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9yZXN0cmljdEN1cnNvcigpO3JldHVybiEwfSx0LnByb3RvdHlwZS5mdWxsUmVzZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGFyc2VyLnJlc2V0KCksdGhpcy5fb25SZXF1ZXN0UmVzZXQuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2N1ckF0dHJEYXRhPWYuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWw9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpfSx0LnByb3RvdHlwZS5fZXJhc2VBdHRyRGF0YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWwuYmcmPS02NzEwODg2NCx0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWwuYmd8PTY3MTA4ODYzJnRoaXMuX2N1ckF0dHJEYXRhLmJnLHRoaXMuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbH0sdC5wcm90b3R5cGUuc2V0Z0xldmVsPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoZSksITB9LHQucHJvdG90eXBlLnNjcmVlbkFsaWdubWVudFBhdHRlcm49ZnVuY3Rpb24oKXt2YXIgZT1uZXcgcC5DZWxsRGF0YTtlLmNvbnRlbnQ9MTw8MjJ8IkUiLmNoYXJDb2RlQXQoMCksZS5mZz10aGlzLl9jdXJBdHRyRGF0YS5mZyxlLmJnPXRoaXMuX2N1ckF0dHJEYXRhLmJnLHRoaXMuX3NldEN1cnNvcigwLDApO2Zvcih2YXIgdD0wO3Q8dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzOysrdCl7dmFyIHI9dGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55K3QsaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHIpO2kmJihpLmZpbGwoZSksaS5pc1dyYXBwZWQ9ITEpfXJldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0FsbERpcnR5KCksdGhpcy5fc2V0Q3Vyc29yKDAsMCksITB9LHR9KGwuRGlzcG9zYWJsZSk7dC5JbnB1dEhhbmRsZXI9RX0sODQ0OmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmdldERpc3Bvc2VBcnJheURpc3Bvc2FibGU9dC5kaXNwb3NlQXJyYXk9dC5EaXNwb3NhYmxlPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9kaXNwb3NhYmxlcz1bXSx0aGlzLl9pc0Rpc3Bvc2VkPSExfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGUsdDt0aGlzLl9pc0Rpc3Bvc2VkPSEwO3RyeXtmb3IodmFyIGk9cih0aGlzLl9kaXNwb3NhYmxlcyksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpbi52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9aS5yZXR1cm4pJiZ0LmNhbGwoaSl9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2Rpc3Bvc2FibGVzLmxlbmd0aD0wfSxlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGlzcG9zYWJsZXMucHVzaChlKSxlfSxlLnByb3RvdHlwZS51bnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2Rpc3Bvc2FibGVzLmluZGV4T2YoZSk7LTEhPT10JiZ0aGlzLl9kaXNwb3NhYmxlcy5zcGxpY2UodCwxKX0sZX0oKTtmdW5jdGlvbiBuKGUpe3ZhciB0LGk7dHJ5e2Zvcih2YXIgbj1yKGUpLG89bi5uZXh0KCk7IW8uZG9uZTtvPW4ubmV4dCgpKW8udmFsdWUuZGlzcG9zZSgpfWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e28mJiFvLmRvbmUmJihpPW4ucmV0dXJuKSYmaS5jYWxsKG4pfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX1lLmxlbmd0aD0wfXQuRGlzcG9zYWJsZT1pLHQuZGlzcG9zZUFycmF5PW4sdC5nZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlPWZ1bmN0aW9uKGUpe3JldHVybntkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIG4oZSl9fX19LDYxMTQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5pc0xpbnV4PXQuaXNXaW5kb3dzPXQuaXNJcGhvbmU9dC5pc0lwYWQ9dC5pc01hYz10LmlzU2FmYXJpPXQuaXNMZWdhY3lFZGdlPXQuaXNGaXJlZm94PXZvaWQgMDt2YXIgcj0idW5kZWZpbmVkIj09dHlwZW9mIG5hdmlnYXRvcixpPXI/Im5vZGUiOm5hdmlnYXRvci51c2VyQWdlbnQsbj1yPyJub2RlIjpuYXZpZ2F0b3IucGxhdGZvcm07dC5pc0ZpcmVmb3g9aS5pbmNsdWRlcygiRmlyZWZveCIpLHQuaXNMZWdhY3lFZGdlPWkuaW5jbHVkZXMoIkVkZ2UiKSx0LmlzU2FmYXJpPS9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QoaSksdC5pc01hYz1bIk1hY2ludG9zaCIsIk1hY0ludGVsIiwiTWFjUFBDIiwiTWFjNjhLIl0uaW5jbHVkZXMobiksdC5pc0lwYWQ9ImlQYWQiPT09bix0LmlzSXBob25lPSJpUGhvbmUiPT09bix0LmlzV2luZG93cz1bIldpbmRvd3MiLCJXaW4xNiIsIldpbjMyIiwiV2luQ0UiXS5pbmNsdWRlcyhuKSx0LmlzTGludXg9bi5pbmRleE9mKCJMaW51eCIpPj0wfSw2MTA2OmZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcyYmdGhpcy5fX2dlbmVyYXRvcnx8ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG4sbyxzPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJm5bMF0pdGhyb3cgblsxXTtyZXR1cm4gblsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBvPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmKG9bU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSksbztmdW5jdGlvbiBhKG8pe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24obyl7aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7Zm9yKDtzOyl0cnl7aWYocj0xLGkmJihuPTImb1swXT9pLnJldHVybjpvWzBdP2kudGhyb3d8fCgobj1pLnJldHVybikmJm4uY2FsbChpKSwwKTppLm5leHQpJiYhKG49bi5jYWxsKGksb1sxXSkpLmRvbmUpcmV0dXJuIG47c3dpdGNoKGk9MCxuJiYobz1bMiZvWzBdLG4udmFsdWVdKSxvWzBdKXtjYXNlIDA6Y2FzZSAxOm49bzticmVhaztjYXNlIDQ6cmV0dXJuIHMubGFiZWwrKyx7dmFsdWU6b1sxXSxkb25lOiExfTtjYXNlIDU6cy5sYWJlbCsrLGk9b1sxXSxvPVswXTtjb250aW51ZTtjYXNlIDc6bz1zLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKChuPShuPXMudHJ5cykubGVuZ3RoPjAmJm5bbi5sZW5ndGgtMV0pfHw2IT09b1swXSYmMiE9PW9bMF0pKXtzPTA7Y29udGludWV9aWYoMz09PW9bMF0mJighbnx8b1sxXT5uWzBdJiZvWzFdPG5bM10pKXtzLmxhYmVsPW9bMV07YnJlYWt9aWYoNj09PW9bMF0mJnMubGFiZWw8blsxXSl7cy5sYWJlbD1uWzFdLG49bzticmVha31pZihuJiZzLmxhYmVsPG5bMl0pe3MubGFiZWw9blsyXSxzLm9wcy5wdXNoKG8pO2JyZWFrfW5bMl0mJnMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZX1vPXQuY2FsbChlLHMpfWNhdGNoKGUpe289WzYsZV0saT0wfWZpbmFsbHl7cj1uPTB9aWYoNSZvWzBdKXRocm93IG9bMV07cmV0dXJue3ZhbHVlOm9bMF0/b1sxXTp2b2lkIDAsZG9uZTohMH19KFtvLGFdKX19fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Tb3J0ZWRMaXN0PXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fZ2V0S2V5PWUsdGhpcy5fYXJyYXk9W119cmV0dXJuIGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fYXJyYXkubGVuZ3RoPTB9LGUucHJvdG90eXBlLmluc2VydD1mdW5jdGlvbihlKXtpZigwIT09dGhpcy5fYXJyYXkubGVuZ3RoKXt2YXIgdD10aGlzLl9zZWFyY2godGhpcy5fZ2V0S2V5KGUpLDAsdGhpcy5fYXJyYXkubGVuZ3RoLTEpO3RoaXMuX2FycmF5LnNwbGljZSh0LDAsZSl9ZWxzZSB0aGlzLl9hcnJheS5wdXNoKGUpfSxlLnByb3RvdHlwZS5kZWxldGU9ZnVuY3Rpb24oZSl7aWYoMD09PXRoaXMuX2FycmF5Lmxlbmd0aClyZXR1cm4hMTt2YXIgdD10aGlzLl9nZXRLZXkoZSkscj10aGlzLl9zZWFyY2godCwwLHRoaXMuX2FycmF5Lmxlbmd0aC0xKTtpZih0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbcl0pIT09dClyZXR1cm4hMTtkb3tpZih0aGlzLl9hcnJheVtyXT09PWUpcmV0dXJuIHRoaXMuX2FycmF5LnNwbGljZShyLDEpLCEwfXdoaWxlKCsrcjx0aGlzLl9hcnJheS5sZW5ndGgmJnRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtyXSk9PT10KTtyZXR1cm4hMX0sZS5wcm90b3R5cGUuZ2V0S2V5SXRlcmF0b3I9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHIodGhpcywoZnVuY3Rpb24ocil7c3dpdGNoKHIubGFiZWwpe2Nhc2UgMDppZigwPT09dGhpcy5fYXJyYXkubGVuZ3RoKXJldHVyblsyXTtpZigodD10aGlzLl9zZWFyY2goZSwwLHRoaXMuX2FycmF5Lmxlbmd0aC0xKSk8MHx8dD49dGhpcy5fYXJyYXkubGVuZ3RoKXJldHVyblsyXTtpZih0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbdF0pIT09ZSlyZXR1cm5bMl07ci5sYWJlbD0xO2Nhc2UgMTpyZXR1cm5bNCx0aGlzLl9hcnJheVt0XV07Y2FzZSAyOnIuc2VudCgpLHIubGFiZWw9MztjYXNlIDM6aWYoKyt0PHRoaXMuX2FycmF5Lmxlbmd0aCYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W3RdKT09PWUpcmV0dXJuWzMsMV07ci5sYWJlbD00O2Nhc2UgNDpyZXR1cm5bMl19fSkpfSxlLnByb3RvdHlwZS52YWx1ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJyYXkudmFsdWVzKCl9LGUucHJvdG90eXBlLl9zZWFyY2g9ZnVuY3Rpb24oZSx0LHIpe2lmKHI8dClyZXR1cm4gdDt2YXIgaT1NYXRoLmZsb29yKCh0K3IpLzIpO2lmKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSk+ZSlyZXR1cm4gdGhpcy5fc2VhcmNoKGUsdCxpLTEpO2lmKHRoaXMuX2dldEtleSh0aGlzLl9hcnJheVtpXSk8ZSlyZXR1cm4gdGhpcy5fc2VhcmNoKGUsaSsxLHIpO2Zvcig7aT4wJiZ0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbaS0xXSk9PT1lOylpLS07cmV0dXJuIGl9LGV9KCk7dC5Tb3J0ZWRMaXN0PWl9LDgyNzM6KGUsdCk9PntmdW5jdGlvbiByKGUsdCxyLGkpe2lmKHZvaWQgMD09PXImJihyPTApLHZvaWQgMD09PWkmJihpPWUubGVuZ3RoKSxyPj1lLmxlbmd0aClyZXR1cm4gZTtyPShlLmxlbmd0aCtyKSVlLmxlbmd0aCxpPWk+PWUubGVuZ3RoP2UubGVuZ3RoOihlLmxlbmd0aCtpKSVlLmxlbmd0aDtmb3IodmFyIG49cjtuPGk7KytuKWVbbl09dDtyZXR1cm4gZX1PYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5jb25jYXQ9dC5maWxsRmFsbGJhY2s9dC5maWxsPXZvaWQgMCx0LmZpbGw9ZnVuY3Rpb24oZSx0LGksbil7cmV0dXJuIGUuZmlsbD9lLmZpbGwodCxpLG4pOnIoZSx0LGksbil9LHQuZmlsbEZhbGxiYWNrPXIsdC5jb25jYXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1uZXcgZS5jb25zdHJ1Y3RvcihlLmxlbmd0aCt0Lmxlbmd0aCk7cmV0dXJuIHIuc2V0KGUpLHIuc2V0KHQsZS5sZW5ndGgpLHJ9fSw5MjgyOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC51cGRhdGVXaW5kb3dzTW9kZVdyYXBwZWRTdGF0ZT12b2lkIDA7dmFyIGk9cig2NDMpO3QudXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5idWZmZXIubGluZXMuZ2V0KGUuYnVmZmVyLnliYXNlK2UuYnVmZmVyLnktMSkscj1udWxsPT10P3ZvaWQgMDp0LmdldChlLmNvbHMtMSksbj1lLmJ1ZmZlci5saW5lcy5nZXQoZS5idWZmZXIueWJhc2UrZS5idWZmZXIueSk7biYmciYmKG4uaXNXcmFwcGVkPXJbaS5DSEFSX0RBVEFfQ09ERV9JTkRFWF0hPT1pLk5VTExfQ0VMTF9DT0RFJiZyW2kuQ0hBUl9EQVRBX0NPREVfSU5ERVhdIT09aS5XSElURVNQQUNFX0NFTExfQ09ERSl9fSwzNzM0OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRXh0ZW5kZWRBdHRycz10LkF0dHJpYnV0ZURhdGE9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZmc9MCx0aGlzLmJnPTAsdGhpcy5leHRlbmRlZD1uZXcgaX1yZXR1cm4gZS50b0NvbG9yUkdCPWZ1bmN0aW9uKGUpe3JldHVybltlPj4+MTYmMjU1LGU+Pj44JjI1NSwyNTUmZV19LGUuZnJvbUNvbG9yUkdCPWZ1bmN0aW9uKGUpe3JldHVybigyNTUmZVswXSk8PDE2fCgyNTUmZVsxXSk8PDh8MjU1JmVbMl19LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGU7cmV0dXJuIHQuZmc9dGhpcy5mZyx0LmJnPXRoaXMuYmcsdC5leHRlbmRlZD10aGlzLmV4dGVuZGVkLmNsb25lKCksdH0sZS5wcm90b3R5cGUuaXNJbnZlcnNlPWZ1bmN0aW9uKCl7cmV0dXJuIDY3MTA4ODY0JnRoaXMuZmd9LGUucHJvdG90eXBlLmlzQm9sZD1mdW5jdGlvbigpe3JldHVybiAxMzQyMTc3MjgmdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNVbmRlcmxpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuZmd9LGUucHJvdG90eXBlLmlzQmxpbms9ZnVuY3Rpb24oKXtyZXR1cm4gNTM2ODcwOTEyJnRoaXMuZmd9LGUucHJvdG90eXBlLmlzSW52aXNpYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIDEwNzM3NDE4MjQmdGhpcy5mZ30sZS5wcm90b3R5cGUuaXNJdGFsaWM9ZnVuY3Rpb24oKXtyZXR1cm4gNjcxMDg4NjQmdGhpcy5iZ30sZS5wcm90b3R5cGUuaXNEaW09ZnVuY3Rpb24oKXtyZXR1cm4gMTM0MjE3NzI4JnRoaXMuYmd9LGUucHJvdG90eXBlLmlzU3RyaWtldGhyb3VnaD1mdW5jdGlvbigpe3JldHVybiAyMTQ3NDgzNjQ4JnRoaXMuZmd9LGUucHJvdG90eXBlLmdldEZnQ29sb3JNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIDUwMzMxNjQ4JnRoaXMuZmd9LGUucHJvdG90eXBlLmdldEJnQ29sb3JNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIDUwMzMxNjQ4JnRoaXMuYmd9LGUucHJvdG90eXBlLmlzRmdSR0I9ZnVuY3Rpb24oKXtyZXR1cm4gNTAzMzE2NDg9PSg1MDMzMTY0OCZ0aGlzLmZnKX0sZS5wcm90b3R5cGUuaXNCZ1JHQj1mdW5jdGlvbigpe3JldHVybiA1MDMzMTY0OD09KDUwMzMxNjQ4JnRoaXMuYmcpfSxlLnByb3RvdHlwZS5pc0ZnUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiAxNjc3NzIxNj09KDUwMzMxNjQ4JnRoaXMuZmcpfHwzMzU1NDQzMj09KDUwMzMxNjQ4JnRoaXMuZmcpfSxlLnByb3RvdHlwZS5pc0JnUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiAxNjc3NzIxNj09KDUwMzMxNjQ4JnRoaXMuYmcpfHwzMzU1NDQzMj09KDUwMzMxNjQ4JnRoaXMuYmcpfSxlLnByb3RvdHlwZS5pc0ZnRGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiAwPT0oNTAzMzE2NDgmdGhpcy5mZyl9LGUucHJvdG90eXBlLmlzQmdEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSg1MDMzMTY0OCZ0aGlzLmJnKX0sZS5wcm90b3R5cGUuaXNBdHRyaWJ1dGVEZWZhdWx0PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLmZnJiYwPT09dGhpcy5iZ30sZS5wcm90b3R5cGUuZ2V0RmdDb2xvcj1mdW5jdGlvbigpe3N3aXRjaCg1MDMzMTY0OCZ0aGlzLmZnKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6cmV0dXJuIDI1NSZ0aGlzLmZnO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIDE2Nzc3MjE1JnRoaXMuZmc7ZGVmYXVsdDpyZXR1cm4tMX19LGUucHJvdG90eXBlLmdldEJnQ29sb3I9ZnVuY3Rpb24oKXtzd2l0Y2goNTAzMzE2NDgmdGhpcy5iZyl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiAyNTUmdGhpcy5iZztjYXNlIDUwMzMxNjQ4OnJldHVybiAxNjc3NzIxNSZ0aGlzLmJnO2RlZmF1bHQ6cmV0dXJuLTF9fSxlLnByb3RvdHlwZS5oYXNFeHRlbmRlZEF0dHJzPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnfSxlLnByb3RvdHlwZS51cGRhdGVFeHRlbmRlZD1mdW5jdGlvbigpe3RoaXMuZXh0ZW5kZWQuaXNFbXB0eSgpP3RoaXMuYmcmPS0yNjg0MzU0NTc6dGhpcy5iZ3w9MjY4NDM1NDU2fSxlLnByb3RvdHlwZS5nZXRVbmRlcmxpbmVDb2xvcj1mdW5jdGlvbigpe2lmKDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcilzd2l0Y2goNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcil7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiAyNTUmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcjtjYXNlIDUwMzMxNjQ4OnJldHVybiAxNjc3NzIxNSZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yO2RlZmF1bHQ6cmV0dXJuIHRoaXMuZ2V0RmdDb2xvcigpfXJldHVybiB0aGlzLmdldEZnQ29sb3IoKX0sZS5wcm90b3R5cGUuZ2V0VW5kZXJsaW5lQ29sb3JNb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj81MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yOnRoaXMuZ2V0RmdDb2xvck1vZGUoKX0sZS5wcm90b3R5cGUuaXNVbmRlcmxpbmVDb2xvclJHQj1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5iZyYmfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I/NTAzMzE2NDg9PSg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKTp0aGlzLmlzRmdSR0IoKX0sZS5wcm90b3R5cGUuaXNVbmRlcmxpbmVDb2xvclBhbGV0dGU9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzE2Nzc3MjE2PT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcil8fDMzNTU0NDMyPT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnUGFsZXR0ZSgpfSxlLnByb3RvdHlwZS5pc1VuZGVybGluZUNvbG9yRGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5iZyYmfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I/MD09KDUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IpOnRoaXMuaXNGZ0RlZmF1bHQoKX0sZS5wcm90b3R5cGUuZ2V0VW5kZXJsaW5lU3R5bGU9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuZmc/MjY4NDM1NDU2JnRoaXMuYmc/dGhpcy5leHRlbmRlZC51bmRlcmxpbmVTdHlsZToxOjB9LGV9KCk7dC5BdHRyaWJ1dGVEYXRhPXI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09dCYmKHQ9LTEpLHRoaXMudW5kZXJsaW5lU3R5bGU9ZSx0aGlzLnVuZGVybGluZUNvbG9yPXR9cmV0dXJuIGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBlKHRoaXMudW5kZXJsaW5lU3R5bGUsdGhpcy51bmRlcmxpbmVDb2xvcil9LGUucHJvdG90eXBlLmlzRW1wdHk9ZnVuY3Rpb24oKXtyZXR1cm4gMD09PXRoaXMudW5kZXJsaW5lU3R5bGV9LGV9KCk7dC5FeHRlbmRlZEF0dHJzPWl9LDkwOTI6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30sbj10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCxyKXtpZihyfHwyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGksbj0wLG89dC5sZW5ndGg7bjxvO24rKykhaSYmbiBpbiB0fHwoaXx8KGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLG4pKSxpW25dPXRbbl0pO3JldHVybiBlLmNvbmNhdChpfHxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlclN0cmluZ0l0ZXJhdG9yPXQuQnVmZmVyPXQuTUFYX0JVRkZFUl9TSVpFPXZvaWQgMDt2YXIgbz1yKDYzNDkpLHM9cig4NDM3KSxhPXIoNTExKSxjPXIoNjQzKSxsPXIoNDYzNCksaD1yKDQ4NjMpLHU9cig3MTE2KSxmPXIoMzczNCk7dC5NQVhfQlVGRkVSX1NJWkU9NDI5NDk2NzI5NTt2YXIgXz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX2hhc1Njcm9sbGJhY2s9ZSx0aGlzLl9vcHRpb25zU2VydmljZT10LHRoaXMuX2J1ZmZlclNlcnZpY2U9cix0aGlzLnlkaXNwPTAsdGhpcy55YmFzZT0wLHRoaXMueT0wLHRoaXMueD0wLHRoaXMuc2F2ZWRZPTAsdGhpcy5zYXZlZFg9MCx0aGlzLnNhdmVkQ3VyQXR0ckRhdGE9cy5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHRoaXMuc2F2ZWRDaGFyc2V0PXUuREVGQVVMVF9DSEFSU0VULHRoaXMubWFya2Vycz1bXSx0aGlzLl9udWxsQ2VsbD1hLkNlbGxEYXRhLmZyb21DaGFyRGF0YShbMCxjLk5VTExfQ0VMTF9DSEFSLGMuTlVMTF9DRUxMX1dJRFRILGMuTlVMTF9DRUxMX0NPREVdKSx0aGlzLl93aGl0ZXNwYWNlQ2VsbD1hLkNlbGxEYXRhLmZyb21DaGFyRGF0YShbMCxjLldISVRFU1BBQ0VfQ0VMTF9DSEFSLGMuV0hJVEVTUEFDRV9DRUxMX1dJRFRILGMuV0hJVEVTUEFDRV9DRUxMX0NPREVdKSx0aGlzLl9pc0NsZWFyaW5nPSExLHRoaXMuX2NvbHM9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX3Jvd3M9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMubGluZXM9bmV3IG8uQ2lyY3VsYXJMaXN0KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxCb3R0b209dGhpcy5fcm93cy0xLHRoaXMuc2V0dXBUYWJTdG9wcygpfXJldHVybiBlLnByb3RvdHlwZS5nZXROdWxsQ2VsbD1mdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5fbnVsbENlbGwuZmc9ZS5mZyx0aGlzLl9udWxsQ2VsbC5iZz1lLmJnLHRoaXMuX251bGxDZWxsLmV4dGVuZGVkPWUuZXh0ZW5kZWQpOih0aGlzLl9udWxsQ2VsbC5mZz0wLHRoaXMuX251bGxDZWxsLmJnPTAsdGhpcy5fbnVsbENlbGwuZXh0ZW5kZWQ9bmV3IGYuRXh0ZW5kZWRBdHRycyksdGhpcy5fbnVsbENlbGx9LGUucHJvdG90eXBlLmdldFdoaXRlc3BhY2VDZWxsPWZ1bmN0aW9uKGUpe3JldHVybiBlPyh0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZz1lLmZnLHRoaXMuX3doaXRlc3BhY2VDZWxsLmJnPWUuYmcsdGhpcy5fd2hpdGVzcGFjZUNlbGwuZXh0ZW5kZWQ9ZS5leHRlbmRlZCk6KHRoaXMuX3doaXRlc3BhY2VDZWxsLmZnPTAsdGhpcy5fd2hpdGVzcGFjZUNlbGwuYmc9MCx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5leHRlbmRlZD1uZXcgZi5FeHRlbmRlZEF0dHJzKSx0aGlzLl93aGl0ZXNwYWNlQ2VsbH0sZS5wcm90b3R5cGUuZ2V0QmxhbmtMaW5lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5ldyBzLkJ1ZmZlckxpbmUodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuZ2V0TnVsbENlbGwoZSksdCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaGFzU2Nyb2xsYmFjayIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTY3JvbGxiYWNrJiZ0aGlzLmxpbmVzLm1heExlbmd0aD50aGlzLl9yb3dzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNDdXJzb3JJblZpZXdwb3J0Iix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy55YmFzZSt0aGlzLnktdGhpcy55ZGlzcDtyZXR1cm4gZT49MCYmZTx0aGlzLl9yb3dzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9oYXNTY3JvbGxiYWNrKXJldHVybiBlO3ZhciByPWUrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxiYWNrO3JldHVybiByPnQuTUFYX0JVRkZFUl9TSVpFP3QuTUFYX0JVRkZFUl9TSVpFOnJ9LGUucHJvdG90eXBlLmZpbGxWaWV3cG9ydFJvd3M9ZnVuY3Rpb24oZSl7aWYoMD09PXRoaXMubGluZXMubGVuZ3RoKXt2b2lkIDA9PT1lJiYoZT1zLkRFRkFVTFRfQVRUUl9EQVRBKTtmb3IodmFyIHQ9dGhpcy5fcm93czt0LS07KXRoaXMubGluZXMucHVzaCh0aGlzLmdldEJsYW5rTGluZShlKSl9fSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMueWRpc3A9MCx0aGlzLnliYXNlPTAsdGhpcy55PTAsdGhpcy54PTAsdGhpcy5saW5lcz1uZXcgby5DaXJjdWxhckxpc3QodGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0aGlzLl9yb3dzKSksdGhpcy5zY3JvbGxUb3A9MCx0aGlzLnNjcm9sbEJvdHRvbT10aGlzLl9yb3dzLTEsdGhpcy5zZXR1cFRhYlN0b3BzKCl9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuZ2V0TnVsbENlbGwocy5ERUZBVUxUX0FUVFJfREFUQSksaT10aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHQpO2lmKGk+dGhpcy5saW5lcy5tYXhMZW5ndGgmJih0aGlzLmxpbmVzLm1heExlbmd0aD1pKSx0aGlzLmxpbmVzLmxlbmd0aD4wKXtpZih0aGlzLl9jb2xzPGUpZm9yKHZhciBuPTA7bjx0aGlzLmxpbmVzLmxlbmd0aDtuKyspdGhpcy5saW5lcy5nZXQobikucmVzaXplKGUscik7dmFyIG89MDtpZih0aGlzLl9yb3dzPHQpZm9yKHZhciBhPXRoaXMuX3Jvd3M7YTx0O2ErKyl0aGlzLmxpbmVzLmxlbmd0aDx0K3RoaXMueWJhc2UmJih0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlP3RoaXMubGluZXMucHVzaChuZXcgcy5CdWZmZXJMaW5lKGUscikpOnRoaXMueWJhc2U+MCYmdGhpcy5saW5lcy5sZW5ndGg8PXRoaXMueWJhc2UrdGhpcy55K28rMT8odGhpcy55YmFzZS0tLG8rKyx0aGlzLnlkaXNwPjAmJnRoaXMueWRpc3AtLSk6dGhpcy5saW5lcy5wdXNoKG5ldyBzLkJ1ZmZlckxpbmUoZSxyKSkpO2Vsc2UgZm9yKGE9dGhpcy5fcm93czthPnQ7YS0tKXRoaXMubGluZXMubGVuZ3RoPnQrdGhpcy55YmFzZSYmKHRoaXMubGluZXMubGVuZ3RoPnRoaXMueWJhc2UrdGhpcy55KzE/dGhpcy5saW5lcy5wb3AoKToodGhpcy55YmFzZSsrLHRoaXMueWRpc3ArKykpO2lmKGk8dGhpcy5saW5lcy5tYXhMZW5ndGgpe3ZhciBjPXRoaXMubGluZXMubGVuZ3RoLWk7Yz4wJiYodGhpcy5saW5lcy50cmltU3RhcnQoYyksdGhpcy55YmFzZT1NYXRoLm1heCh0aGlzLnliYXNlLWMsMCksdGhpcy55ZGlzcD1NYXRoLm1heCh0aGlzLnlkaXNwLWMsMCksdGhpcy5zYXZlZFk9TWF0aC5tYXgodGhpcy5zYXZlZFktYywwKSksdGhpcy5saW5lcy5tYXhMZW5ndGg9aX10aGlzLng9TWF0aC5taW4odGhpcy54LGUtMSksdGhpcy55PU1hdGgubWluKHRoaXMueSx0LTEpLG8mJih0aGlzLnkrPW8pLHRoaXMuc2F2ZWRYPU1hdGgubWluKHRoaXMuc2F2ZWRYLGUtMSksdGhpcy5zY3JvbGxUb3A9MH1pZih0aGlzLnNjcm9sbEJvdHRvbT10LTEsdGhpcy5faXNSZWZsb3dFbmFibGVkJiYodGhpcy5fcmVmbG93KGUsdCksdGhpcy5fY29scz5lKSlmb3Iobj0wO248dGhpcy5saW5lcy5sZW5ndGg7bisrKXRoaXMubGluZXMuZ2V0KG4pLnJlc2l6ZShlLHIpO3RoaXMuX2NvbHM9ZSx0aGlzLl9yb3dzPXR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiX2lzUmVmbG93RW5hYmxlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9oYXNTY3JvbGxiYWNrJiYhdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fcmVmbG93PWZ1bmN0aW9uKGUsdCl7dGhpcy5fY29scyE9PWUmJihlPnRoaXMuX2NvbHM/dGhpcy5fcmVmbG93TGFyZ2VyKGUsdCk6dGhpcy5fcmVmbG93U21hbGxlcihlLHQpKX0sZS5wcm90b3R5cGUuX3JlZmxvd0xhcmdlcj1mdW5jdGlvbihlLHQpe3ZhciByPSgwLGwucmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZSkodGhpcy5saW5lcyx0aGlzLl9jb2xzLGUsdGhpcy55YmFzZSt0aGlzLnksdGhpcy5nZXROdWxsQ2VsbChzLkRFRkFVTFRfQVRUUl9EQVRBKSk7aWYoci5sZW5ndGg+MCl7dmFyIGk9KDAsbC5yZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQpKHRoaXMubGluZXMscik7KDAsbC5yZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dCkodGhpcy5saW5lcyxpLmxheW91dCksdGhpcy5fcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQoZSx0LGkuY291bnRSZW1vdmVkKX19LGUucHJvdG90eXBlLl9yZWZsb3dMYXJnZXJBZGp1c3RWaWV3cG9ydD1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpPXRoaXMuZ2V0TnVsbENlbGwocy5ERUZBVUxUX0FUVFJfREFUQSksbj1yO24tLSA+MDspMD09PXRoaXMueWJhc2U/KHRoaXMueT4wJiZ0aGlzLnktLSx0aGlzLmxpbmVzLmxlbmd0aDx0JiZ0aGlzLmxpbmVzLnB1c2gobmV3IHMuQnVmZmVyTGluZShlLGkpKSk6KHRoaXMueWRpc3A9PT10aGlzLnliYXNlJiZ0aGlzLnlkaXNwLS0sdGhpcy55YmFzZS0tKTt0aGlzLnNhdmVkWT1NYXRoLm1heCh0aGlzLnNhdmVkWS1yLDApfSxlLnByb3RvdHlwZS5fcmVmbG93U21hbGxlcj1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj10aGlzLmdldE51bGxDZWxsKHMuREVGQVVMVF9BVFRSX0RBVEEpLG89W10sYT0wLGM9dGhpcy5saW5lcy5sZW5ndGgtMTtjPj0wO2MtLSl7dmFyIGg9dGhpcy5saW5lcy5nZXQoYyk7aWYoISghaHx8IWguaXNXcmFwcGVkJiZoLmdldFRyaW1tZWRMZW5ndGgoKTw9ZSkpe2Zvcih2YXIgdT1baF07aC5pc1dyYXBwZWQmJmM+MDspaD10aGlzLmxpbmVzLmdldCgtLWMpLHUudW5zaGlmdChoKTt2YXIgZj10aGlzLnliYXNlK3RoaXMueTtpZighKGY+PWMmJmY8Yyt1Lmxlbmd0aCkpe3ZhciBfLGQ9dVt1Lmxlbmd0aC0xXS5nZXRUcmltbWVkTGVuZ3RoKCkscD0oMCxsLnJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3RocykodSx0aGlzLl9jb2xzLGUpLHY9cC5sZW5ndGgtdS5sZW5ndGg7Xz0wPT09dGhpcy55YmFzZSYmdGhpcy55IT09dGhpcy5saW5lcy5sZW5ndGgtMT9NYXRoLm1heCgwLHRoaXMueS10aGlzLmxpbmVzLm1heExlbmd0aCt2KTpNYXRoLm1heCgwLHRoaXMubGluZXMubGVuZ3RoLXRoaXMubGluZXMubWF4TGVuZ3RoK3YpO2Zvcih2YXIgeT1bXSxnPTA7Zzx2O2crKyl7dmFyIG09dGhpcy5nZXRCbGFua0xpbmUocy5ERUZBVUxUX0FUVFJfREFUQSwhMCk7eS5wdXNoKG0pfXkubGVuZ3RoPjAmJihvLnB1c2goe3N0YXJ0OmMrdS5sZW5ndGgrYSxuZXdMaW5lczp5fSksYSs9eS5sZW5ndGgpLHUucHVzaC5hcHBseSh1LG4oW10saSh5KSwhMSkpO3ZhciBiPXAubGVuZ3RoLTEsUz1wW2JdOzA9PT1TJiYoUz1wWy0tYl0pO2Zvcih2YXIgQz11Lmxlbmd0aC12LTEsdz1kO0M+PTA7KXt2YXIgTD1NYXRoLm1pbih3LFMpO2lmKHZvaWQgMD09PXVbYl0pYnJlYWs7aWYodVtiXS5jb3B5Q2VsbHNGcm9tKHVbQ10sdy1MLFMtTCxMLCEwKSwwPT0oUy09TCkmJihTPXBbLS1iXSksMD09KHctPUwpKXtDLS07dmFyIEU9TWF0aC5tYXgoQywwKTt3PSgwLGwuZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoKSh1LEUsdGhpcy5fY29scyl9fWZvcihnPTA7Zzx1Lmxlbmd0aDtnKyspcFtnXTxlJiZ1W2ddLnNldENlbGwocFtnXSxyKTtmb3IodmFyIHg9di1fO3gtLSA+MDspMD09PXRoaXMueWJhc2U/dGhpcy55PHQtMT8odGhpcy55KyssdGhpcy5saW5lcy5wb3AoKSk6KHRoaXMueWJhc2UrKyx0aGlzLnlkaXNwKyspOnRoaXMueWJhc2U8TWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsdGhpcy5saW5lcy5sZW5ndGgrYSktdCYmKHRoaXMueWJhc2U9PT10aGlzLnlkaXNwJiZ0aGlzLnlkaXNwKyssdGhpcy55YmFzZSsrKTt0aGlzLnNhdmVkWT1NYXRoLm1pbih0aGlzLnNhdmVkWSt2LHRoaXMueWJhc2UrdC0xKX19fWlmKG8ubGVuZ3RoPjApe3ZhciBSPVtdLGs9W107Zm9yKGc9MDtnPHRoaXMubGluZXMubGVuZ3RoO2crKylrLnB1c2godGhpcy5saW5lcy5nZXQoZykpO3ZhciBNPXRoaXMubGluZXMubGVuZ3RoLEE9TS0xLE89MCxEPW9bT107dGhpcy5saW5lcy5sZW5ndGg9TWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgsdGhpcy5saW5lcy5sZW5ndGgrYSk7dmFyIFQ9MDtmb3IoZz1NYXRoLm1pbih0aGlzLmxpbmVzLm1heExlbmd0aC0xLE0rYS0xKTtnPj0wO2ctLSlpZihEJiZELnN0YXJ0PkErVCl7Zm9yKHZhciBCPUQubmV3TGluZXMubGVuZ3RoLTE7Qj49MDtCLS0pdGhpcy5saW5lcy5zZXQoZy0tLEQubmV3TGluZXNbQl0pO2crKyxSLnB1c2goe2luZGV4OkErMSxhbW91bnQ6RC5uZXdMaW5lcy5sZW5ndGh9KSxUKz1ELm5ld0xpbmVzLmxlbmd0aCxEPW9bKytPXX1lbHNlIHRoaXMubGluZXMuc2V0KGcsa1tBLS1dKTt2YXIgUD0wO2ZvcihnPVIubGVuZ3RoLTE7Zz49MDtnLS0pUltnXS5pbmRleCs9UCx0aGlzLmxpbmVzLm9uSW5zZXJ0RW1pdHRlci5maXJlKFJbZ10pLFArPVJbZ10uYW1vdW50O3ZhciBJPU1hdGgubWF4KDAsTSthLXRoaXMubGluZXMubWF4TGVuZ3RoKTtJPjAmJnRoaXMubGluZXMub25UcmltRW1pdHRlci5maXJlKEkpfX0sZS5wcm90b3R5cGUuc3RyaW5nSW5kZXhUb0J1ZmZlckluZGV4PWZ1bmN0aW9uKGUsdCxyKXtmb3Iodm9pZCAwPT09ciYmKHI9ITEpO3Q7KXt2YXIgaT10aGlzLmxpbmVzLmdldChlKTtpZighaSlyZXR1cm5bLTEsLTFdO2Zvcih2YXIgbj1yP2kuZ2V0VHJpbW1lZExlbmd0aCgpOmkubGVuZ3RoLG89MDtvPG47KytvKWlmKGkuZ2V0KG8pW2MuQ0hBUl9EQVRBX1dJRFRIX0lOREVYXSYmKHQtPWkuZ2V0KG8pW2MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aHx8MSksdDwwKXJldHVybltlLG9dO2UrK31yZXR1cm5bZSwwXX0sZS5wcm90b3R5cGUudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nPWZ1bmN0aW9uKGUsdCxyLGkpe3ZvaWQgMD09PXImJihyPTApO3ZhciBuPXRoaXMubGluZXMuZ2V0KGUpO3JldHVybiBuP24udHJhbnNsYXRlVG9TdHJpbmcodCxyLGkpOiIifSxlLnByb3RvdHlwZS5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLHI9ZTt0PjAmJnRoaXMubGluZXMuZ2V0KHQpLmlzV3JhcHBlZDspdC0tO2Zvcig7cisxPHRoaXMubGluZXMubGVuZ3RoJiZ0aGlzLmxpbmVzLmdldChyKzEpLmlzV3JhcHBlZDspcisrO3JldHVybntmaXJzdDp0LGxhc3Q6cn19LGUucHJvdG90eXBlLnNldHVwVGFiU3RvcHM9ZnVuY3Rpb24oZSl7Zm9yKG51bGwhPWU/dGhpcy50YWJzW2VdfHwoZT10aGlzLnByZXZTdG9wKGUpKToodGhpcy50YWJzPXt9LGU9MCk7ZTx0aGlzLl9jb2xzO2UrPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMudGFiU3RvcFdpZHRoKXRoaXMudGFic1tlXT0hMH0sZS5wcm90b3R5cGUucHJldlN0b3A9ZnVuY3Rpb24oZSl7Zm9yKG51bGw9PWUmJihlPXRoaXMueCk7IXRoaXMudGFic1stLWVdJiZlPjA7KTtyZXR1cm4gZT49dGhpcy5fY29scz90aGlzLl9jb2xzLTE6ZTwwPzA6ZX0sZS5wcm90b3R5cGUubmV4dFN0b3A9ZnVuY3Rpb24oZSl7Zm9yKG51bGw9PWUmJihlPXRoaXMueCk7IXRoaXMudGFic1srK2VdJiZlPHRoaXMuX2NvbHM7KTtyZXR1cm4gZT49dGhpcy5fY29scz90aGlzLl9jb2xzLTE6ZTwwPzA6ZX0sZS5wcm90b3R5cGUuY2xlYXJNYXJrZXJzPWZ1bmN0aW9uKGUpe3RoaXMuX2lzQ2xlYXJpbmc9ITA7Zm9yKHZhciB0PTA7dDx0aGlzLm1hcmtlcnMubGVuZ3RoO3QrKyl0aGlzLm1hcmtlcnNbdF0ubGluZT09PWUmJih0aGlzLm1hcmtlcnNbdF0uZGlzcG9zZSgpLHRoaXMubWFya2Vycy5zcGxpY2UodC0tLDEpKTt0aGlzLl9pc0NsZWFyaW5nPSExfSxlLnByb3RvdHlwZS5jbGVhckFsbE1hcmtlcnM9ZnVuY3Rpb24oKXt0aGlzLl9pc0NsZWFyaW5nPSEwO2Zvcih2YXIgZT0wO2U8dGhpcy5tYXJrZXJzLmxlbmd0aDtlKyspdGhpcy5tYXJrZXJzW2VdLmRpc3Bvc2UoKSx0aGlzLm1hcmtlcnMuc3BsaWNlKGUtLSwxKTt0aGlzLl9pc0NsZWFyaW5nPSExfSxlLnByb3RvdHlwZS5hZGRNYXJrZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPW5ldyBoLk1hcmtlcihlKTtyZXR1cm4gdGhpcy5tYXJrZXJzLnB1c2gociksci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uVHJpbSgoZnVuY3Rpb24oZSl7ci5saW5lLT1lLHIubGluZTwwJiZyLmRpc3Bvc2UoKX0pKSksci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uSW5zZXJ0KChmdW5jdGlvbihlKXtyLmxpbmU+PWUuaW5kZXgmJihyLmxpbmUrPWUuYW1vdW50KX0pKSksci5yZWdpc3Rlcih0aGlzLmxpbmVzLm9uRGVsZXRlKChmdW5jdGlvbihlKXtyLmxpbmU+PWUuaW5kZXgmJnIubGluZTxlLmluZGV4K2UuYW1vdW50JiZyLmRpc3Bvc2UoKSxyLmxpbmU+ZS5pbmRleCYmKHIubGluZS09ZS5hbW91bnQpfSkpKSxyLnJlZ2lzdGVyKHIub25EaXNwb3NlKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZW1vdmVNYXJrZXIocil9KSkpLHJ9LGUucHJvdG90eXBlLl9yZW1vdmVNYXJrZXI9ZnVuY3Rpb24oZSl7dGhpcy5faXNDbGVhcmluZ3x8dGhpcy5tYXJrZXJzLnNwbGljZSh0aGlzLm1hcmtlcnMuaW5kZXhPZihlKSwxKX0sZS5wcm90b3R5cGUuaXRlcmF0b3I9ZnVuY3Rpb24oZSx0LHIsaSxuKXtyZXR1cm4gbmV3IGQodGhpcyxlLHQscixpLG4pfSxlfSgpO3QuQnVmZmVyPV87dmFyIGQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksbixvKXt2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1pJiYoaT1lLmxpbmVzLmxlbmd0aCksdm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09byYmKG89MCksdGhpcy5fYnVmZmVyPWUsdGhpcy5fdHJpbVJpZ2h0PXQsdGhpcy5fc3RhcnRJbmRleD1yLHRoaXMuX2VuZEluZGV4PWksdGhpcy5fc3RhcnRPdmVyc2Nhbj1uLHRoaXMuX2VuZE92ZXJzY2FuPW8sdGhpcy5fc3RhcnRJbmRleDwwJiYodGhpcy5fc3RhcnRJbmRleD0wKSx0aGlzLl9lbmRJbmRleD50aGlzLl9idWZmZXIubGluZXMubGVuZ3RoJiYodGhpcy5fZW5kSW5kZXg9dGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aCksdGhpcy5fY3VycmVudD10aGlzLl9zdGFydEluZGV4fXJldHVybiBlLnByb3RvdHlwZS5oYXNOZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnQ8dGhpcy5fZW5kSW5kZXh9LGUucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9idWZmZXIuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZSh0aGlzLl9jdXJyZW50KTtlLmZpcnN0PHRoaXMuX3N0YXJ0SW5kZXgtdGhpcy5fc3RhcnRPdmVyc2NhbiYmKGUuZmlyc3Q9dGhpcy5fc3RhcnRJbmRleC10aGlzLl9zdGFydE92ZXJzY2FuKSxlLmxhc3Q+dGhpcy5fZW5kSW5kZXgrdGhpcy5fZW5kT3ZlcnNjYW4mJihlLmxhc3Q9dGhpcy5fZW5kSW5kZXgrdGhpcy5fZW5kT3ZlcnNjYW4pLGUuZmlyc3Q9TWF0aC5tYXgoZS5maXJzdCwwKSxlLmxhc3Q9TWF0aC5taW4oZS5sYXN0LHRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgpO2Zvcih2YXIgdD0iIixyPWUuZmlyc3Q7cjw9ZS5sYXN0Oysrcil0Kz10aGlzLl9idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHIsdGhpcy5fdHJpbVJpZ2h0KTtyZXR1cm4gdGhpcy5fY3VycmVudD1lLmxhc3QrMSx7cmFuZ2U6ZSxjb250ZW50OnR9fSxlfSgpO3QuQnVmZmVyU3RyaW5nSXRlcmF0b3I9ZH0sODQzNzooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyTGluZT10LkRFRkFVTFRfQVRUUl9EQVRBPXZvaWQgMDt2YXIgaT1yKDQ4Miksbj1yKDY0Myksbz1yKDUxMSkscz1yKDM3MzQpO3QuREVGQVVMVF9BVFRSX0RBVEE9T2JqZWN0LmZyZWV6ZShuZXcgcy5BdHRyaWJ1dGVEYXRhKTt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3ZvaWQgMD09PXImJihyPSExKSx0aGlzLmlzV3JhcHBlZD1yLHRoaXMuX2NvbWJpbmVkPXt9LHRoaXMuX2V4dGVuZGVkQXR0cnM9e30sdGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMyplKTtmb3IodmFyIGk9dHx8by5DZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsbi5OVUxMX0NFTExfQ0hBUixuLk5VTExfQ0VMTF9XSURUSCxuLk5VTExfQ0VMTF9DT0RFXSkscz0wO3M8ZTsrK3MpdGhpcy5zZXRDZWxsKHMsaSk7dGhpcy5sZW5ndGg9ZX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGFbMyplKzBdLHI9MjA5NzE1MSZ0O3JldHVyblt0aGlzLl9kYXRhWzMqZSsxXSwyMDk3MTUyJnQ/dGhpcy5fY29tYmluZWRbZV06cj8oMCxpLnN0cmluZ0Zyb21Db2RlUG9pbnQpKHIpOiIiLHQ+PjIyLDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2VdLmxlbmd0aC0xKTpyXX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5fZGF0YVszKmUrMV09dFtuLkNIQVJfREFUQV9BVFRSX0lOREVYXSx0W24uQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aD4xPyh0aGlzLl9jb21iaW5lZFtlXT10WzFdLHRoaXMuX2RhdGFbMyplKzBdPTIwOTcxNTJ8ZXx0W24uQ0hBUl9EQVRBX1dJRFRIX0lOREVYXTw8MjIpOnRoaXMuX2RhdGFbMyplKzBdPXRbbi5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKXx0W24uQ0hBUl9EQVRBX1dJRFRIX0lOREVYXTw8MjJ9LGUucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXRhWzMqZSswXT4+MjJ9LGUucHJvdG90eXBlLmhhc1dpZHRoPWZ1bmN0aW9uKGUpe3JldHVybiAxMjU4MjkxMiZ0aGlzLl9kYXRhWzMqZSswXX0sZS5wcm90b3R5cGUuZ2V0Rmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFbMyplKzFdfSxlLnByb3RvdHlwZS5nZXRCZz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YVszKmUrMl19LGUucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDQxOTQzMDMmdGhpcy5fZGF0YVszKmUrMF19LGUucHJvdG90eXBlLmdldENvZGVQb2ludD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhWzMqZSswXTtyZXR1cm4gMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdLmNoYXJDb2RlQXQodGhpcy5fY29tYmluZWRbZV0ubGVuZ3RoLTEpOjIwOTcxNTEmdH0sZS5wcm90b3R5cGUuaXNDb21iaW5lZD1mdW5jdGlvbihlKXtyZXR1cm4gMjA5NzE1MiZ0aGlzLl9kYXRhWzMqZSswXX0sZS5wcm90b3R5cGUuZ2V0U3RyaW5nPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2RhdGFbMyplKzBdO3JldHVybiAyMDk3MTUyJnQ/dGhpcy5fY29tYmluZWRbZV06MjA5NzE1MSZ0PygwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkoMjA5NzE1MSZ0KToiIn0sZS5wcm90b3R5cGUubG9hZENlbGw9ZnVuY3Rpb24oZSx0KXt2YXIgcj0zKmU7cmV0dXJuIHQuY29udGVudD10aGlzLl9kYXRhW3IrMF0sdC5mZz10aGlzLl9kYXRhW3IrMV0sdC5iZz10aGlzLl9kYXRhW3IrMl0sMjA5NzE1MiZ0LmNvbnRlbnQmJih0LmNvbWJpbmVkRGF0YT10aGlzLl9jb21iaW5lZFtlXSksMjY4NDM1NDU2JnQuYmcmJih0LmV4dGVuZGVkPXRoaXMuX2V4dGVuZGVkQXR0cnNbZV0pLHR9LGUucHJvdG90eXBlLnNldENlbGw9ZnVuY3Rpb24oZSx0KXsyMDk3MTUyJnQuY29udGVudCYmKHRoaXMuX2NvbWJpbmVkW2VdPXQuY29tYmluZWREYXRhKSwyNjg0MzU0NTYmdC5iZyYmKHRoaXMuX2V4dGVuZGVkQXR0cnNbZV09dC5leHRlbmRlZCksdGhpcy5fZGF0YVszKmUrMF09dC5jb250ZW50LHRoaXMuX2RhdGFbMyplKzFdPXQuZmcsdGhpcy5fZGF0YVszKmUrMl09dC5iZ30sZS5wcm90b3R5cGUuc2V0Q2VsbEZyb21Db2RlUG9pbnQ9ZnVuY3Rpb24oZSx0LHIsaSxuLG8pezI2ODQzNTQ1NiZuJiYodGhpcy5fZXh0ZW5kZWRBdHRyc1tlXT1vKSx0aGlzLl9kYXRhWzMqZSswXT10fHI8PDIyLHRoaXMuX2RhdGFbMyplKzFdPWksdGhpcy5fZGF0YVszKmUrMl09bn0sZS5wcm90b3R5cGUuYWRkQ29kZXBvaW50VG9DZWxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fZGF0YVszKmUrMF07MjA5NzE1MiZyP3RoaXMuX2NvbWJpbmVkW2VdKz0oMCxpLnN0cmluZ0Zyb21Db2RlUG9pbnQpKHQpOigyMDk3MTUxJnI/KHRoaXMuX2NvbWJpbmVkW2VdPSgwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkoMjA5NzE1MSZyKSsoMCxpLnN0cmluZ0Zyb21Db2RlUG9pbnQpKHQpLHImPS0yMDk3MTUyLHJ8PTIwOTcxNTIpOnI9dHwxPDwyMix0aGlzLl9kYXRhWzMqZSswXT1yKX0sZS5wcm90b3R5cGUuaW5zZXJ0Q2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7aWYoKGUlPXRoaXMubGVuZ3RoKSYmMj09PXRoaXMuZ2V0V2lkdGgoZS0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChlLTEsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKSx0PHRoaXMubGVuZ3RoLWUpe2Zvcih2YXIgbj1uZXcgby5DZWxsRGF0YSxhPXRoaXMubGVuZ3RoLWUtdC0xO2E+PTA7LS1hKXRoaXMuc2V0Q2VsbChlK3QrYSx0aGlzLmxvYWRDZWxsKGUrYSxuKSk7Zm9yKGE9MDthPHQ7KythKXRoaXMuc2V0Q2VsbChlK2Escil9ZWxzZSBmb3IoYT1lO2E8dGhpcy5sZW5ndGg7KythKXRoaXMuc2V0Q2VsbChhLHIpOzI9PT10aGlzLmdldFdpZHRoKHRoaXMubGVuZ3RoLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMubGVuZ3RoLTEsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKX0sZS5wcm90b3R5cGUuZGVsZXRlQ2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7aWYoZSU9dGhpcy5sZW5ndGgsdDx0aGlzLmxlbmd0aC1lKXtmb3IodmFyIG49bmV3IG8uQ2VsbERhdGEsYT0wO2E8dGhpcy5sZW5ndGgtZS10OysrYSl0aGlzLnNldENlbGwoZSthLHRoaXMubG9hZENlbGwoZSt0K2EsbikpO2ZvcihhPXRoaXMubGVuZ3RoLXQ7YTx0aGlzLmxlbmd0aDsrK2EpdGhpcy5zZXRDZWxsKGEscil9ZWxzZSBmb3IoYT1lO2E8dGhpcy5sZW5ndGg7KythKXRoaXMuc2V0Q2VsbChhLHIpO2UmJjI9PT10aGlzLmdldFdpZHRoKGUtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQoZS0xLDAsMSwobnVsbD09aT92b2lkIDA6aS5mZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuYmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmV4dGVuZGVkKXx8bmV3IHMuRXh0ZW5kZWRBdHRycyksMCE9PXRoaXMuZ2V0V2lkdGgoZSl8fHRoaXMuaGFzQ29udGVudChlKXx8dGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChlLDAsMSwobnVsbD09aT92b2lkIDA6aS5mZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuYmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmV4dGVuZGVkKXx8bmV3IHMuRXh0ZW5kZWRBdHRycyl9LGUucHJvdG90eXBlLnJlcGxhY2VDZWxscz1mdW5jdGlvbihlLHQscixpKXtmb3IoZSYmMj09PXRoaXMuZ2V0V2lkdGgoZS0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludChlLTEsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKSx0PHRoaXMubGVuZ3RoJiYyPT09dGhpcy5nZXRXaWR0aCh0LTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KHQsMCwxLChudWxsPT1pP3ZvaWQgMDppLmZnKXx8MCwobnVsbD09aT92b2lkIDA6aS5iZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuZXh0ZW5kZWQpfHxuZXcgcy5FeHRlbmRlZEF0dHJzKTtlPHQmJmU8dGhpcy5sZW5ndGg7KXRoaXMuc2V0Q2VsbChlKysscil9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe2lmKGUhPT10aGlzLmxlbmd0aCl7aWYoZT50aGlzLmxlbmd0aCl7dmFyIHI9bmV3IFVpbnQzMkFycmF5KDMqZSk7dGhpcy5sZW5ndGgmJigzKmU8dGhpcy5fZGF0YS5sZW5ndGg/ci5zZXQodGhpcy5fZGF0YS5zdWJhcnJheSgwLDMqZSkpOnIuc2V0KHRoaXMuX2RhdGEpKSx0aGlzLl9kYXRhPXI7Zm9yKHZhciBpPXRoaXMubGVuZ3RoO2k8ZTsrK2kpdGhpcy5zZXRDZWxsKGksdCl9ZWxzZSBpZihlKXsocj1uZXcgVWludDMyQXJyYXkoMyplKSkuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoMCwzKmUpKSx0aGlzLl9kYXRhPXI7dmFyIG49T2JqZWN0LmtleXModGhpcy5fY29tYmluZWQpO2ZvcihpPTA7aTxuLmxlbmd0aDtpKyspe3ZhciBvPXBhcnNlSW50KG5baV0sMTApO28+PWUmJmRlbGV0ZSB0aGlzLl9jb21iaW5lZFtvXX19ZWxzZSB0aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheSgwKSx0aGlzLl9jb21iaW5lZD17fTt0aGlzLmxlbmd0aD1lfX0sZS5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbihlKXt0aGlzLl9jb21iaW5lZD17fSx0aGlzLl9leHRlbmRlZEF0dHJzPXt9O2Zvcih2YXIgdD0wO3Q8dGhpcy5sZW5ndGg7Kyt0KXRoaXMuc2V0Q2VsbCh0LGUpfSxlLnByb3RvdHlwZS5jb3B5RnJvbT1mdW5jdGlvbihlKXtmb3IodmFyIHQgaW4gdGhpcy5sZW5ndGghPT1lLmxlbmd0aD90aGlzLl9kYXRhPW5ldyBVaW50MzJBcnJheShlLl9kYXRhKTp0aGlzLl9kYXRhLnNldChlLl9kYXRhKSx0aGlzLmxlbmd0aD1lLmxlbmd0aCx0aGlzLl9jb21iaW5lZD17fSxlLl9jb21iaW5lZCl0aGlzLl9jb21iaW5lZFt0XT1lLl9jb21iaW5lZFt0XTtmb3IodmFyIHQgaW4gdGhpcy5fZXh0ZW5kZWRBdHRycz17fSxlLl9leHRlbmRlZEF0dHJzKXRoaXMuX2V4dGVuZGVkQXR0cnNbdF09ZS5fZXh0ZW5kZWRBdHRyc1t0XTt0aGlzLmlzV3JhcHBlZD1lLmlzV3JhcHBlZH0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZSgwKTtmb3IodmFyIHIgaW4gdC5fZGF0YT1uZXcgVWludDMyQXJyYXkodGhpcy5fZGF0YSksdC5sZW5ndGg9dGhpcy5sZW5ndGgsdGhpcy5fY29tYmluZWQpdC5fY29tYmluZWRbcl09dGhpcy5fY29tYmluZWRbcl07Zm9yKHZhciByIGluIHRoaXMuX2V4dGVuZGVkQXR0cnMpdC5fZXh0ZW5kZWRBdHRyc1tyXT10aGlzLl9leHRlbmRlZEF0dHJzW3JdO3JldHVybiB0LmlzV3JhcHBlZD10aGlzLmlzV3JhcHBlZCx0fSxlLnByb3RvdHlwZS5nZXRUcmltbWVkTGVuZ3RoPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMubGVuZ3RoLTE7ZT49MDstLWUpaWYoNDE5NDMwMyZ0aGlzLl9kYXRhWzMqZSswXSlyZXR1cm4gZSsodGhpcy5fZGF0YVszKmUrMF0+PjIyKTtyZXR1cm4gMH0sZS5wcm90b3R5cGUuY29weUNlbGxzRnJvbT1mdW5jdGlvbihlLHQscixpLG4pe3ZhciBvPWUuX2RhdGE7aWYobilmb3IodmFyIHM9aS0xO3M+PTA7cy0tKWZvcih2YXIgYT0wO2E8MzthKyspdGhpcy5fZGF0YVszKihyK3MpK2FdPW9bMyoodCtzKSthXTtlbHNlIGZvcihzPTA7czxpO3MrKylmb3IoYT0wO2E8MzthKyspdGhpcy5fZGF0YVszKihyK3MpK2FdPW9bMyoodCtzKSthXTt2YXIgYz1PYmplY3Qua2V5cyhlLl9jb21iaW5lZCk7Zm9yKGE9MDthPGMubGVuZ3RoO2ErKyl7dmFyIGw9cGFyc2VJbnQoY1thXSwxMCk7bD49dCYmKHRoaXMuX2NvbWJpbmVkW2wtdCtyXT1lLl9jb21iaW5lZFtsXSl9fSxlLnByb3RvdHlwZS50cmFuc2xhdGVUb1N0cmluZz1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ZSYmKGU9ITEpLHZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PXImJihyPXRoaXMubGVuZ3RoKSxlJiYocj1NYXRoLm1pbihyLHRoaXMuZ2V0VHJpbW1lZExlbmd0aCgpKSk7Zm9yKHZhciBvPSIiO3Q8cjspe3ZhciBzPXRoaXMuX2RhdGFbMyp0KzBdLGE9MjA5NzE1MSZzO28rPTIwOTcxNTImcz90aGlzLl9jb21iaW5lZFt0XTphPygwLGkuc3RyaW5nRnJvbUNvZGVQb2ludCkoYSk6bi5XSElURVNQQUNFX0NFTExfQ0hBUix0Kz1zPj4yMnx8MX1yZXR1cm4gb30sZX0oKTt0LkJ1ZmZlckxpbmU9YX0sNDg0MTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmdldFJhbmdlTGVuZ3RoPXZvaWQgMCx0LmdldFJhbmdlTGVuZ3RoPWZ1bmN0aW9uKGUsdCl7aWYoZS5zdGFydC55PmUuZW5kLnkpdGhyb3cgbmV3IEVycm9yKCJCdWZmZXIgcmFuZ2UgZW5kICgiK2UuZW5kLngrIiwgIitlLmVuZC55KyIpIGNhbm5vdCBiZSBiZWZvcmUgc3RhcnQgKCIrZS5zdGFydC54KyIsICIrZS5zdGFydC55KyIpIik7cmV0dXJuIHQqKGUuZW5kLnktZS5zdGFydC55KSsoZS5lbmQueC1lLnN0YXJ0LngrMSl9fSw0NjM0OihlLHQpPT57ZnVuY3Rpb24gcihlLHQscil7aWYodD09PWUubGVuZ3RoLTEpcmV0dXJuIGVbdF0uZ2V0VHJpbW1lZExlbmd0aCgpO3ZhciBpPSFlW3RdLmhhc0NvbnRlbnQoci0xKSYmMT09PWVbdF0uZ2V0V2lkdGgoci0xKSxuPTI9PT1lW3QrMV0uZ2V0V2lkdGgoMCk7cmV0dXJuIGkmJm4/ci0xOnJ9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoPXQucmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzPXQucmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQ9dC5yZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQ9dC5yZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlPXZvaWQgMCx0LnJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmU9ZnVuY3Rpb24oZSx0LGksbixvKXtmb3IodmFyIHM9W10sYT0wO2E8ZS5sZW5ndGgtMTthKyspe3ZhciBjPWEsbD1lLmdldCgrK2MpO2lmKGwuaXNXcmFwcGVkKXtmb3IodmFyIGg9W2UuZ2V0KGEpXTtjPGUubGVuZ3RoJiZsLmlzV3JhcHBlZDspaC5wdXNoKGwpLGw9ZS5nZXQoKytjKTtpZihuPj1hJiZuPGMpYSs9aC5sZW5ndGgtMTtlbHNle2Zvcih2YXIgdT0wLGY9cihoLHUsdCksXz0xLGQ9MDtfPGgubGVuZ3RoOyl7dmFyIHA9cihoLF8sdCksdj1wLWQseT1pLWYsZz1NYXRoLm1pbih2LHkpO2hbdV0uY29weUNlbGxzRnJvbShoW19dLGQsZixnLCExKSwoZis9Zyk9PT1pJiYodSsrLGY9MCksKGQrPWcpPT09cCYmKF8rKyxkPTApLDA9PT1mJiYwIT09dSYmMj09PWhbdS0xXS5nZXRXaWR0aChpLTEpJiYoaFt1XS5jb3B5Q2VsbHNGcm9tKGhbdS0xXSxpLTEsZisrLDEsITEpLGhbdS0xXS5zZXRDZWxsKGktMSxvKSl9aFt1XS5yZXBsYWNlQ2VsbHMoZixpLG8pO2Zvcih2YXIgbT0wLGI9aC5sZW5ndGgtMTtiPjAmJihiPnV8fDA9PT1oW2JdLmdldFRyaW1tZWRMZW5ndGgoKSk7Yi0tKW0rKzttPjAmJihzLnB1c2goYStoLmxlbmd0aC1tKSxzLnB1c2gobSkpLGErPWgubGVuZ3RoLTF9fX1yZXR1cm4gc30sdC5yZWZsb3dMYXJnZXJDcmVhdGVOZXdMYXlvdXQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10saT0wLG49dFtpXSxvPTAscz0wO3M8ZS5sZW5ndGg7cysrKWlmKG49PT1zKXt2YXIgYT10WysraV07ZS5vbkRlbGV0ZUVtaXR0ZXIuZmlyZSh7aW5kZXg6cy1vLGFtb3VudDphfSkscys9YS0xLG8rPWEsbj10WysraV19ZWxzZSByLnB1c2gocyk7cmV0dXJue2xheW91dDpyLGNvdW50UmVtb3ZlZDpvfX0sdC5yZWZsb3dMYXJnZXJBcHBseU5ld0xheW91dD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxpPTA7aTx0Lmxlbmd0aDtpKyspci5wdXNoKGUuZ2V0KHRbaV0pKTtmb3IoaT0wO2k8ci5sZW5ndGg7aSsrKWUuc2V0KGkscltpXSk7ZS5sZW5ndGg9dC5sZW5ndGh9LHQucmVmbG93U21hbGxlckdldE5ld0xpbmVMZW5ndGhzPWZ1bmN0aW9uKGUsdCxpKXtmb3IodmFyIG49W10sbz1lLm1hcCgoZnVuY3Rpb24oaSxuKXtyZXR1cm4gcihlLG4sdCl9KSkucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3R9KSkscz0wLGE9MCxjPTA7YzxvOyl7aWYoby1jPGkpe24ucHVzaChvLWMpO2JyZWFrfXMrPWk7dmFyIGw9cihlLGEsdCk7cz5sJiYocy09bCxhKyspO3ZhciBoPTI9PT1lW2FdLmdldFdpZHRoKHMtMSk7aCYmcy0tO3ZhciB1PWg/aS0xOmk7bi5wdXNoKHUpLGMrPXV9cmV0dXJuIG59LHQuZ2V0V3JhcHBlZExpbmVUcmltbWVkTGVuZ3RoPXJ9LDUyOTU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyU2V0PXZvaWQgMDt2YXIgbz1yKDkwOTIpLHM9cig4NDYwKSxhPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuX29wdGlvbnNTZXJ2aWNlPXQsaS5fYnVmZmVyU2VydmljZT1yLGkuX29uQnVmZmVyQWN0aXZhdGU9aS5yZWdpc3RlcihuZXcgcy5FdmVudEVtaXR0ZXIpLGkucmVzZXQoKSxpfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkJ1ZmZlckFjdGl2YXRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9ub3JtYWw9bmV3IG8uQnVmZmVyKCEwLHRoaXMuX29wdGlvbnNTZXJ2aWNlLHRoaXMuX2J1ZmZlclNlcnZpY2UpLHRoaXMuX25vcm1hbC5maWxsVmlld3BvcnRSb3dzKCksdGhpcy5fYWx0PW5ldyBvLkJ1ZmZlcighMSx0aGlzLl9vcHRpb25zU2VydmljZSx0aGlzLl9idWZmZXJTZXJ2aWNlKSx0aGlzLl9hY3RpdmVCdWZmZXI9dGhpcy5fbm9ybWFsLHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7YWN0aXZlQnVmZmVyOnRoaXMuX25vcm1hbCxpbmFjdGl2ZUJ1ZmZlcjp0aGlzLl9hbHR9KSx0aGlzLnNldHVwVGFiU3RvcHMoKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJhbHQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWx0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYWN0aXZlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlcn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm5vcm1hbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ub3JtYWx9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuYWN0aXZhdGVOb3JtYWxCdWZmZXI9ZnVuY3Rpb24oKXt0aGlzLl9hY3RpdmVCdWZmZXIhPT10aGlzLl9ub3JtYWwmJih0aGlzLl9ub3JtYWwueD10aGlzLl9hbHQueCx0aGlzLl9ub3JtYWwueT10aGlzLl9hbHQueSx0aGlzLl9hbHQuY2xlYXIoKSx0aGlzLl9hY3RpdmVCdWZmZXI9dGhpcy5fbm9ybWFsLHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7YWN0aXZlQnVmZmVyOnRoaXMuX25vcm1hbCxpbmFjdGl2ZUJ1ZmZlcjp0aGlzLl9hbHR9KSl9LHQucHJvdG90eXBlLmFjdGl2YXRlQWx0QnVmZmVyPWZ1bmN0aW9uKGUpe3RoaXMuX2FjdGl2ZUJ1ZmZlciE9PXRoaXMuX2FsdCYmKHRoaXMuX2FsdC5maWxsVmlld3BvcnRSb3dzKGUpLHRoaXMuX2FsdC54PXRoaXMuX25vcm1hbC54LHRoaXMuX2FsdC55PXRoaXMuX25vcm1hbC55LHRoaXMuX2FjdGl2ZUJ1ZmZlcj10aGlzLl9hbHQsdGhpcy5fb25CdWZmZXJBY3RpdmF0ZS5maXJlKHthY3RpdmVCdWZmZXI6dGhpcy5fYWx0LGluYWN0aXZlQnVmZmVyOnRoaXMuX25vcm1hbH0pKX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbm9ybWFsLnJlc2l6ZShlLHQpLHRoaXMuX2FsdC5yZXNpemUoZSx0KX0sdC5wcm90b3R5cGUuc2V0dXBUYWJTdG9wcz1mdW5jdGlvbihlKXt0aGlzLl9ub3JtYWwuc2V0dXBUYWJTdG9wcyhlKSx0aGlzLl9hbHQuc2V0dXBUYWJTdG9wcyhlKX0sdH0ocig4NDQpLkRpc3Bvc2FibGUpO3QuQnVmZmVyU2V0PWF9LDUxMTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DZWxsRGF0YT12b2lkIDA7dmFyIG89cig0ODIpLHM9cig2NDMpLGE9cigzNzM0KSxjPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuY29udGVudD0wLHQuZmc9MCx0LmJnPTAsdC5leHRlbmRlZD1uZXcgYS5FeHRlbmRlZEF0dHJzLHQuY29tYmluZWREYXRhPSIiLHR9cmV0dXJuIG4odCxlKSx0LmZyb21DaGFyRGF0YT1mdW5jdGlvbihlKXt2YXIgcj1uZXcgdDtyZXR1cm4gci5zZXRGcm9tQ2hhckRhdGEoZSkscn0sdC5wcm90b3R5cGUuaXNDb21iaW5lZD1mdW5jdGlvbigpe3JldHVybiAyMDk3MTUyJnRoaXMuY29udGVudH0sdC5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb250ZW50Pj4yMn0sdC5wcm90b3R5cGUuZ2V0Q2hhcnM9ZnVuY3Rpb24oKXtyZXR1cm4gMjA5NzE1MiZ0aGlzLmNvbnRlbnQ/dGhpcy5jb21iaW5lZERhdGE6MjA5NzE1MSZ0aGlzLmNvbnRlbnQ/KDAsby5zdHJpbmdGcm9tQ29kZVBvaW50KSgyMDk3MTUxJnRoaXMuY29udGVudCk6IiJ9LHQucHJvdG90eXBlLmdldENvZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc0NvbWJpbmVkKCk/dGhpcy5jb21iaW5lZERhdGEuY2hhckNvZGVBdCh0aGlzLmNvbWJpbmVkRGF0YS5sZW5ndGgtMSk6MjA5NzE1MSZ0aGlzLmNvbnRlbnR9LHQucHJvdG90eXBlLnNldEZyb21DaGFyRGF0YT1mdW5jdGlvbihlKXt0aGlzLmZnPWVbcy5DSEFSX0RBVEFfQVRUUl9JTkRFWF0sdGhpcy5iZz0wO3ZhciB0PSExO2lmKGVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0ubGVuZ3RoPjIpdD0hMDtlbHNlIGlmKDI9PT1lW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aCl7dmFyIHI9ZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApO2lmKDU1Mjk2PD1yJiZyPD01NjMxOSl7dmFyIGk9ZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDEpOzU2MzIwPD1pJiZpPD01NzM0Mz90aGlzLmNvbnRlbnQ9MTAyNCooci01NTI5NikraS01NjMyMCs2NTUzNnxlW3MuQ0hBUl9EQVRBX1dJRFRIX0lOREVYXTw8MjI6dD0hMH1lbHNlIHQ9ITB9ZWxzZSB0aGlzLmNvbnRlbnQ9ZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXS5jaGFyQ29kZUF0KDApfGVbcy5DSEFSX0RBVEFfV0lEVEhfSU5ERVhdPDwyMjt0JiYodGhpcy5jb21iaW5lZERhdGE9ZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXSx0aGlzLmNvbnRlbnQ9MjA5NzE1MnxlW3MuQ0hBUl9EQVRBX1dJRFRIX0lOREVYXTw8MjIpfSx0LnByb3RvdHlwZS5nZXRBc0NoYXJEYXRhPWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZmcsdGhpcy5nZXRDaGFycygpLHRoaXMuZ2V0V2lkdGgoKSx0aGlzLmdldENvZGUoKV19LHR9KGEuQXR0cmlidXRlRGF0YSk7dC5DZWxsRGF0YT1jfSw2NDM6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5XSElURVNQQUNFX0NFTExfQ09ERT10LldISVRFU1BBQ0VfQ0VMTF9XSURUSD10LldISVRFU1BBQ0VfQ0VMTF9DSEFSPXQuTlVMTF9DRUxMX0NPREU9dC5OVUxMX0NFTExfV0lEVEg9dC5OVUxMX0NFTExfQ0hBUj10LkNIQVJfREFUQV9DT0RFX0lOREVYPXQuQ0hBUl9EQVRBX1dJRFRIX0lOREVYPXQuQ0hBUl9EQVRBX0NIQVJfSU5ERVg9dC5DSEFSX0RBVEFfQVRUUl9JTkRFWD10LkRFRkFVTFRfQVRUUj10LkRFRkFVTFRfQ09MT1I9dm9pZCAwLHQuREVGQVVMVF9DT0xPUj0yNTYsdC5ERUZBVUxUX0FUVFI9MjU2fHQuREVGQVVMVF9DT0xPUjw8OSx0LkNIQVJfREFUQV9BVFRSX0lOREVYPTAsdC5DSEFSX0RBVEFfQ0hBUl9JTkRFWD0xLHQuQ0hBUl9EQVRBX1dJRFRIX0lOREVYPTIsdC5DSEFSX0RBVEFfQ09ERV9JTkRFWD0zLHQuTlVMTF9DRUxMX0NIQVI9IiIsdC5OVUxMX0NFTExfV0lEVEg9MSx0Lk5VTExfQ0VMTF9DT0RFPTAsdC5XSElURVNQQUNFX0NFTExfQ0hBUj0iICIsdC5XSElURVNQQUNFX0NFTExfV0lEVEg9MSx0LldISVRFU1BBQ0VfQ0VMTF9DT0RFPTMyfSw0ODYzOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk1hcmtlcj12b2lkIDA7dmFyIG89cig4NDYwKSxzPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQocil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmxpbmU9cixpLl9pZD10Ll9uZXh0SWQrKyxpLmlzRGlzcG9zZWQ9ITEsaS5fb25EaXNwb3NlPW5ldyBvLkV2ZW50RW1pdHRlcixpfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJpZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRGlzcG9zZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkRpc3Bvc2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuaXNEaXNwb3NlZHx8KHRoaXMuaXNEaXNwb3NlZD0hMCx0aGlzLmxpbmU9LTEsdGhpcy5fb25EaXNwb3NlLmZpcmUoKSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcykpfSx0Ll9uZXh0SWQ9MSx0fShyKDg0NCkuRGlzcG9zYWJsZSk7dC5NYXJrZXI9c30sNzExNjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRFRkFVTFRfQ0hBUlNFVD10LkNIQVJTRVRTPXZvaWQgMCx0LkNIQVJTRVRTPXt9LHQuREVGQVVMVF9DSEFSU0VUPXQuQ0hBUlNFVFMuQix0LkNIQVJTRVRTWzBdPXsiYCI6IuKXhiIsYToi4paSIixiOiLikIkiLGM6IuKQjCIsZDoi4pCNIixlOiLikIoiLGY6IsKwIixnOiLCsSIsaDoi4pCkIixpOiLikIsiLGo6IuKUmCIsazoi4pSQIixsOiLilIwiLG06IuKUlCIsbjoi4pS8IixvOiLijroiLHA6IuKOuyIscToi4pSAIixyOiLijrwiLHM6IuKOvSIsdDoi4pScIix1OiLilKQiLHY6IuKUtCIsdzoi4pSsIix4OiLilIIiLHk6IuKJpCIsejoi4omlIiwieyI6Is+AIiwifCI6IuKJoCIsIn0iOiLCoyIsIn4iOiLCtyJ9LHQuQ0hBUlNFVFMuQT17IiMiOiLCoyJ9LHQuQ0hBUlNFVFMuQj12b2lkIDAsdC5DSEFSU0VUU1s0XT17IiMiOiLCoyIsIkAiOiLCviIsIlsiOiJpaiIsIlxcIjoiwr0iLCJdIjoifCIsInsiOiLCqCIsInwiOiJmIiwifSI6IsK8IiwifiI6IsK0In0sdC5DSEFSU0VUUy5DPXQuQ0hBUlNFVFNbNV09eyJbIjoiw4QiLCJcXCI6IsOWIiwiXSI6IsOFIiwiXiI6IsOcIiwiYCI6IsOpIiwieyI6IsOkIiwifCI6IsO2IiwifSI6IsOlIiwifiI6IsO8In0sdC5DSEFSU0VUUy5SPXsiIyI6IsKjIiwiQCI6IsOgIiwiWyI6IsKwIiwiXFwiOiLDpyIsIl0iOiLCpyIsInsiOiLDqSIsInwiOiLDuSIsIn0iOiLDqCIsIn4iOiLCqCJ9LHQuQ0hBUlNFVFMuUT17IkAiOiLDoCIsIlsiOiLDoiIsIlxcIjoiw6ciLCJdIjoiw6oiLCJeIjoiw64iLCJgIjoiw7QiLCJ7Ijoiw6kiLCJ8Ijoiw7kiLCJ9Ijoiw6giLCJ+Ijoiw7sifSx0LkNIQVJTRVRTLks9eyJAIjoiwqciLCJbIjoiw4QiLCJcXCI6IsOWIiwiXSI6IsOcIiwieyI6IsOkIiwifCI6IsO2IiwifSI6IsO8IiwifiI6IsOfIn0sdC5DSEFSU0VUUy5ZPXsiIyI6IsKjIiwiQCI6IsKnIiwiWyI6IsKwIiwiXFwiOiLDpyIsIl0iOiLDqSIsImAiOiLDuSIsInsiOiLDoCIsInwiOiLDsiIsIn0iOiLDqCIsIn4iOiLDrCJ9LHQuQ0hBUlNFVFMuRT10LkNIQVJTRVRTWzZdPXsiQCI6IsOEIiwiWyI6IsOGIiwiXFwiOiLDmCIsIl0iOiLDhSIsIl4iOiLDnCIsImAiOiLDpCIsInsiOiLDpiIsInwiOiLDuCIsIn0iOiLDpSIsIn4iOiLDvCJ9LHQuQ0hBUlNFVFMuWj17IiMiOiLCoyIsIkAiOiLCpyIsIlsiOiLCoSIsIlxcIjoiw5EiLCJdIjoiwr8iLCJ7IjoiwrAiLCJ8Ijoiw7EiLCJ9Ijoiw6cifSx0LkNIQVJTRVRTLkg9dC5DSEFSU0VUU1s3XT17IkAiOiLDiSIsIlsiOiLDhCIsIlxcIjoiw5YiLCJdIjoiw4UiLCJeIjoiw5wiLCJgIjoiw6kiLCJ7Ijoiw6QiLCJ8Ijoiw7YiLCJ9Ijoiw6UiLCJ+Ijoiw7wifSx0LkNIQVJTRVRTWyI9Il09eyIjIjoiw7kiLCJAIjoiw6AiLCJbIjoiw6kiLCJcXCI6IsOnIiwiXSI6IsOqIiwiXiI6IsOuIixfOiLDqCIsImAiOiLDtCIsInsiOiLDpCIsInwiOiLDtiIsIn0iOiLDvCIsIn4iOiLDuyJ9fSwyNTg0OihlLHQpPT57dmFyIHIsaTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DMV9FU0NBUEVEPXQuQzE9dC5DMD12b2lkIDAsZnVuY3Rpb24oZSl7ZS5OVUw9IlwwIixlLlNPSD0iASIsZS5TVFg9IgIiLGUuRVRYPSIDIixlLkVPVD0iBCIsZS5FTlE9IgUiLGUuQUNLPSIGIixlLkJFTD0iByIsZS5CUz0iXGIiLGUuSFQ9Ilx0IixlLkxGPSJcbiIsZS5WVD0iXHYiLGUuRkY9IlxmIixlLkNSPSJcciIsZS5TTz0iDiIsZS5TST0iDyIsZS5ETEU9IhAiLGUuREMxPSIRIixlLkRDMj0iEiIsZS5EQzM9IhMiLGUuREM0PSIUIixlLk5BSz0iFSIsZS5TWU49IhYiLGUuRVRCPSIXIixlLkNBTj0iGCIsZS5FTT0iGSIsZS5TVUI9IhoiLGUuRVNDPSIbIixlLkZTPSIcIixlLkdTPSIdIixlLlJTPSIeIixlLlVTPSIfIixlLlNQPSIgIixlLkRFTD0ifyJ9KHI9dC5DMHx8KHQuQzA9e30pKSwoaT10LkMxfHwodC5DMT17fSkpLlBBRD0iwoAiLGkuSE9QPSLCgSIsaS5CUEg9IsKCIixpLk5CSD0iwoMiLGkuSU5EPSLChCIsaS5ORUw9IsKFIixpLlNTQT0iwoYiLGkuRVNBPSLChyIsaS5IVFM9IsKIIixpLkhUSj0iwokiLGkuVlRTPSLCiiIsaS5QTEQ9IsKLIixpLlBMVT0iwowiLGkuUkk9IsKNIixpLlNTMj0iwo4iLGkuU1MzPSLCjyIsaS5EQ1M9IsKQIixpLlBVMT0iwpEiLGkuUFUyPSLCkiIsaS5TVFM9IsKTIixpLkNDSD0iwpQiLGkuTVc9IsKVIixpLlNQQT0iwpYiLGkuRVBBPSLClyIsaS5TT1M9IsKYIixpLlNHQ0k9IsKZIixpLlNDST0iwpoiLGkuQ1NJPSLCmyIsaS5TVD0iwpwiLGkuT1NDPSLCnSIsaS5QTT0iwp4iLGkuQVBDPSLCnyIsKHQuQzFfRVNDQVBFRHx8KHQuQzFfRVNDQVBFRD17fSkpLlNUPXIuRVNDKyJcXCJ9LDczOTk6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmV2YWx1YXRlS2V5Ym9hcmRFdmVudD12b2lkIDA7dmFyIGk9cigyNTg0KSxuPXs0ODpbIjAiLCIpIl0sNDk6WyIxIiwiISJdLDUwOlsiMiIsIkAiXSw1MTpbIjMiLCIjIl0sNTI6WyI0IiwiJCJdLDUzOlsiNSIsIiUiXSw1NDpbIjYiLCJeIl0sNTU6WyI3IiwiJiJdLDU2OlsiOCIsIioiXSw1NzpbIjkiLCIoIl0sMTg2OlsiOyIsIjoiXSwxODc6WyI9IiwiKyJdLDE4ODpbIiwiLCI8Il0sMTg5OlsiLSIsIl8iXSwxOTA6WyIuIiwiPiJdLDE5MTpbIi8iLCI/Il0sMTkyOlsiYCIsIn4iXSwyMTk6WyJbIiwieyJdLDIyMDpbIlxcIiwifCJdLDIyMTpbIl0iLCJ9Il0sMjIyOlsiJyIsJyInXX07dC5ldmFsdWF0ZUtleWJvYXJkRXZlbnQ9ZnVuY3Rpb24oZSx0LHIsbyl7dmFyIHM9e3R5cGU6MCxjYW5jZWw6ITEsa2V5OnZvaWQgMH0sYT0oZS5zaGlmdEtleT8xOjApfChlLmFsdEtleT8yOjApfChlLmN0cmxLZXk/NDowKXwoZS5tZXRhS2V5Pzg6MCk7c3dpdGNoKGUua2V5Q29kZSl7Y2FzZSAwOiJVSUtleUlucHV0VXBBcnJvdyI9PT1lLmtleT9zLmtleT10P2kuQzAuRVNDKyJPQSI6aS5DMC5FU0MrIltBIjoiVUlLZXlJbnB1dExlZnRBcnJvdyI9PT1lLmtleT9zLmtleT10P2kuQzAuRVNDKyJPRCI6aS5DMC5FU0MrIltEIjoiVUlLZXlJbnB1dFJpZ2h0QXJyb3ciPT09ZS5rZXk/cy5rZXk9dD9pLkMwLkVTQysiT0MiOmkuQzAuRVNDKyJbQyI6IlVJS2V5SW5wdXREb3duQXJyb3ciPT09ZS5rZXkmJihzLmtleT10P2kuQzAuRVNDKyJPQiI6aS5DMC5FU0MrIltCIik7YnJlYWs7Y2FzZSA4OmlmKGUuc2hpZnRLZXkpe3Mua2V5PWkuQzAuQlM7YnJlYWt9aWYoZS5hbHRLZXkpe3Mua2V5PWkuQzAuRVNDK2kuQzAuREVMO2JyZWFrfXMua2V5PWkuQzAuREVMO2JyZWFrO2Nhc2UgOTppZihlLnNoaWZ0S2V5KXtzLmtleT1pLkMwLkVTQysiW1oiO2JyZWFrfXMua2V5PWkuQzAuSFQscy5jYW5jZWw9ITA7YnJlYWs7Y2FzZSAxMzpzLmtleT1lLmFsdEtleT9pLkMwLkVTQytpLkMwLkNSOmkuQzAuQ1Iscy5jYW5jZWw9ITA7YnJlYWs7Y2FzZSAyNzpzLmtleT1pLkMwLkVTQyxlLmFsdEtleSYmKHMua2V5PWkuQzAuRVNDK2kuQzAuRVNDKSxzLmNhbmNlbD0hMDticmVhaztjYXNlIDM3OmlmKGUubWV0YUtleSlicmVhazthPyhzLmtleT1pLkMwLkVTQysiWzE7IisoYSsxKSsiRCIscy5rZXk9PT1pLkMwLkVTQysiWzE7M0QiJiYocy5rZXk9aS5DMC5FU0MrKHI/ImIiOiJbMTs1RCIpKSk6cy5rZXk9dD9pLkMwLkVTQysiT0QiOmkuQzAuRVNDKyJbRCI7YnJlYWs7Y2FzZSAzOTppZihlLm1ldGFLZXkpYnJlYWs7YT8ocy5rZXk9aS5DMC5FU0MrIlsxOyIrKGErMSkrIkMiLHMua2V5PT09aS5DMC5FU0MrIlsxOzNDIiYmKHMua2V5PWkuQzAuRVNDKyhyPyJmIjoiWzE7NUMiKSkpOnMua2V5PXQ/aS5DMC5FU0MrIk9DIjppLkMwLkVTQysiW0MiO2JyZWFrO2Nhc2UgMzg6aWYoZS5tZXRhS2V5KWJyZWFrO2E/KHMua2V5PWkuQzAuRVNDKyJbMTsiKyhhKzEpKyJBIixyfHxzLmtleSE9PWkuQzAuRVNDKyJbMTszQSJ8fChzLmtleT1pLkMwLkVTQysiWzE7NUEiKSk6cy5rZXk9dD9pLkMwLkVTQysiT0EiOmkuQzAuRVNDKyJbQSI7YnJlYWs7Y2FzZSA0MDppZihlLm1ldGFLZXkpYnJlYWs7YT8ocy5rZXk9aS5DMC5FU0MrIlsxOyIrKGErMSkrIkIiLHJ8fHMua2V5IT09aS5DMC5FU0MrIlsxOzNCInx8KHMua2V5PWkuQzAuRVNDKyJbMTs1QiIpKTpzLmtleT10P2kuQzAuRVNDKyJPQiI6aS5DMC5FU0MrIltCIjticmVhaztjYXNlIDQ1OmUuc2hpZnRLZXl8fGUuY3RybEtleXx8KHMua2V5PWkuQzAuRVNDKyJbMn4iKTticmVhaztjYXNlIDQ2OnMua2V5PWE/aS5DMC5FU0MrIlszOyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbM34iO2JyZWFrO2Nhc2UgMzY6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiSCI6dD9pLkMwLkVTQysiT0giOmkuQzAuRVNDKyJbSCI7YnJlYWs7Y2FzZSAzNTpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJGIjp0P2kuQzAuRVNDKyJPRiI6aS5DMC5FU0MrIltGIjticmVhaztjYXNlIDMzOmUuc2hpZnRLZXk/cy50eXBlPTI6ZS5jdHJsS2V5P3Mua2V5PWkuQzAuRVNDKyJbNTsiKyhhKzEpKyJ+IjpzLmtleT1pLkMwLkVTQysiWzV+IjticmVhaztjYXNlIDM0OmUuc2hpZnRLZXk/cy50eXBlPTM6ZS5jdHJsS2V5P3Mua2V5PWkuQzAuRVNDKyJbNjsiKyhhKzEpKyJ+IjpzLmtleT1pLkMwLkVTQysiWzZ+IjticmVhaztjYXNlIDExMjpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJQIjppLkMwLkVTQysiT1AiO2JyZWFrO2Nhc2UgMTEzOnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIlEiOmkuQzAuRVNDKyJPUSI7YnJlYWs7Y2FzZSAxMTQ6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiUiI6aS5DMC5FU0MrIk9SIjticmVhaztjYXNlIDExNTpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJTIjppLkMwLkVTQysiT1MiO2JyZWFrO2Nhc2UgMTE2OnMua2V5PWE/aS5DMC5FU0MrIlsxNTsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzE1fiI7YnJlYWs7Y2FzZSAxMTc6cy5rZXk9YT9pLkMwLkVTQysiWzE3OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMTd+IjticmVhaztjYXNlIDExODpzLmtleT1hP2kuQzAuRVNDKyJbMTg7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsxOH4iO2JyZWFrO2Nhc2UgMTE5OnMua2V5PWE/aS5DMC5FU0MrIlsxOTsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzE5fiI7YnJlYWs7Y2FzZSAxMjA6cy5rZXk9YT9pLkMwLkVTQysiWzIwOyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMjB+IjticmVhaztjYXNlIDEyMTpzLmtleT1hP2kuQzAuRVNDKyJbMjE7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsyMX4iO2JyZWFrO2Nhc2UgMTIyOnMua2V5PWE/aS5DMC5FU0MrIlsyMzsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzIzfiI7YnJlYWs7Y2FzZSAxMjM6cy5rZXk9YT9pLkMwLkVTQysiWzI0OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMjR+IjticmVhaztkZWZhdWx0OmlmKCFlLmN0cmxLZXl8fGUuc2hpZnRLZXl8fGUuYWx0S2V5fHxlLm1ldGFLZXkpaWYociYmIW98fCFlLmFsdEtleXx8ZS5tZXRhS2V5KSFyfHxlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLnNoaWZ0S2V5fHwhZS5tZXRhS2V5P2Uua2V5JiYhZS5jdHJsS2V5JiYhZS5hbHRLZXkmJiFlLm1ldGFLZXkmJmUua2V5Q29kZT49NDgmJjE9PT1lLmtleS5sZW5ndGg/cy5rZXk9ZS5rZXk6ZS5rZXkmJmUuY3RybEtleSYmKCJfIj09PWUua2V5JiYocy5rZXk9aS5DMC5VUyksIkAiPT09ZS5rZXkmJihzLmtleT1pLkMwLk5VTCkpOjY1PT09ZS5rZXlDb2RlJiYocy50eXBlPTEpO2Vsc2V7dmFyIGM9bltlLmtleUNvZGVdLGw9bnVsbD09Yz92b2lkIDA6Y1tlLnNoaWZ0S2V5PzE6MF07aWYobClzLmtleT1pLkMwLkVTQytsO2Vsc2UgaWYoZS5rZXlDb2RlPj02NSYmZS5rZXlDb2RlPD05MCl7dmFyIGg9ZS5jdHJsS2V5P2Uua2V5Q29kZS02NDplLmtleUNvZGUrMzIsdT1TdHJpbmcuZnJvbUNoYXJDb2RlKGgpO2Uuc2hpZnRLZXkmJih1PXUudG9VcHBlckNhc2UoKSkscy5rZXk9aS5DMC5FU0MrdX1lbHNlIkRlYWQiPT09ZS5rZXkmJmUuY29kZS5zdGFydHNXaXRoKCJLZXkiKSYmKHU9ZS5jb2RlLnNsaWNlKDMsNCksZS5zaGlmdEtleXx8KHU9dS50b0xvd2VyQ2FzZSgpKSxzLmtleT1pLkMwLkVTQyt1LHMuY2FuY2VsPSEwKX1lbHNlIGUua2V5Q29kZT49NjUmJmUua2V5Q29kZTw9OTA/cy5rZXk9U3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUtNjQpOjMyPT09ZS5rZXlDb2RlP3Mua2V5PWkuQzAuTlVMOmUua2V5Q29kZT49NTEmJmUua2V5Q29kZTw9NTU/cy5rZXk9U3RyaW5nLmZyb21DaGFyQ29kZShlLmtleUNvZGUtNTErMjcpOjU2PT09ZS5rZXlDb2RlP3Mua2V5PWkuQzAuREVMOjIxOT09PWUua2V5Q29kZT9zLmtleT1pLkMwLkVTQzoyMjA9PT1lLmtleUNvZGU/cy5rZXk9aS5DMC5GUzoyMjE9PT1lLmtleUNvZGUmJihzLmtleT1pLkMwLkdTKX1yZXR1cm4gc319LDQ4MjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlV0ZjhUb1V0ZjMyPXQuU3RyaW5nVG9VdGYzMj10LnV0ZjMyVG9TdHJpbmc9dC5zdHJpbmdGcm9tQ29kZVBvaW50PXZvaWQgMCx0LnN0cmluZ0Zyb21Db2RlUG9pbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+NjU1MzU/KGUtPTY1NTM2LFN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYrKGU+PjEwKSkrU3RyaW5nLmZyb21DaGFyQ29kZShlJTEwMjQrNTYzMjApKTpTdHJpbmcuZnJvbUNoYXJDb2RlKGUpfSx0LnV0ZjMyVG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXQmJih0PTApLHZvaWQgMD09PXImJihyPWUubGVuZ3RoKTtmb3IodmFyIGk9IiIsbj10O248cjsrK24pe3ZhciBvPWVbbl07bz42NTUzNT8oby09NjU1MzYsaSs9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5Nisobz4+MTApKStTdHJpbmcuZnJvbUNoYXJDb2RlKG8lMTAyNCs1NjMyMCkpOmkrPVN0cmluZy5mcm9tQ2hhckNvZGUobyl9cmV0dXJuIGl9O3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2ludGVyaW09MH1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9pbnRlcmltPTB9LGUucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbihlLHQpe3ZhciByPWUubGVuZ3RoO2lmKCFyKXJldHVybiAwO3ZhciBpPTAsbj0wO3RoaXMuX2ludGVyaW0mJig1NjMyMDw9KGE9ZS5jaGFyQ29kZUF0KG4rKykpJiZhPD01NzM0Mz90W2krK109MTAyNCoodGhpcy5faW50ZXJpbS01NTI5NikrYS01NjMyMCs2NTUzNjoodFtpKytdPXRoaXMuX2ludGVyaW0sdFtpKytdPWEpLHRoaXMuX2ludGVyaW09MCk7Zm9yKHZhciBvPW47bzxyOysrbyl7dmFyIHM9ZS5jaGFyQ29kZUF0KG8pO2lmKDU1Mjk2PD1zJiZzPD01NjMxOSl7aWYoKytvPj1yKXJldHVybiB0aGlzLl9pbnRlcmltPXMsaTt2YXIgYTs1NjMyMDw9KGE9ZS5jaGFyQ29kZUF0KG8pKSYmYTw9NTczNDM/dFtpKytdPTEwMjQqKHMtNTUyOTYpK2EtNTYzMjArNjU1MzY6KHRbaSsrXT1zLHRbaSsrXT1hKX1lbHNlIDY1Mjc5IT09cyYmKHRbaSsrXT1zKX1yZXR1cm4gaX0sZX0oKTt0LlN0cmluZ1RvVXRmMzI9cjt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmludGVyaW09bmV3IFVpbnQ4QXJyYXkoMyl9cmV0dXJuIGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5pbnRlcmltLmZpbGwoMCl9LGUucHJvdG90eXBlLmRlY29kZT1mdW5jdGlvbihlLHQpe3ZhciByPWUubGVuZ3RoO2lmKCFyKXJldHVybiAwO3ZhciBpLG4sbyxzLGE9MCxjPTAsbD0wO2lmKHRoaXMuaW50ZXJpbVswXSl7dmFyIGg9ITEsdT10aGlzLmludGVyaW1bMF07dSY9MTkyPT0oMjI0JnUpPzMxOjIyND09KDI0MCZ1KT8xNTo3O2Zvcih2YXIgZj0wLF89dm9pZCAwOyhfPTYzJnRoaXMuaW50ZXJpbVsrK2ZdKSYmZjw0Oyl1PDw9Nix1fD1fO2Zvcih2YXIgZD0xOTI9PSgyMjQmdGhpcy5pbnRlcmltWzBdKT8yOjIyND09KDI0MCZ0aGlzLmludGVyaW1bMF0pPzM6NCxwPWQtZjtsPHA7KXtpZihsPj1yKXJldHVybiAwO2lmKDEyOCE9KDE5MiYoXz1lW2wrK10pKSl7bC0tLGg9ITA7YnJlYWt9dGhpcy5pbnRlcmltW2YrK109Xyx1PDw9Nix1fD02MyZffWh8fCgyPT09ZD91PDEyOD9sLS06dFthKytdPXU6Mz09PWQ/dTwyMDQ4fHx1Pj01NTI5NiYmdTw9NTczNDN8fDY1Mjc5PT09dXx8KHRbYSsrXT11KTp1PDY1NTM2fHx1PjExMTQxMTF8fCh0W2ErK109dSkpLHRoaXMuaW50ZXJpbS5maWxsKDApfWZvcih2YXIgdj1yLTQseT1sO3k8cjspe2Zvcig7ISghKHk8dil8fDEyOCYoaT1lW3ldKXx8MTI4JihuPWVbeSsxXSl8fDEyOCYobz1lW3krMl0pfHwxMjgmKHM9ZVt5KzNdKSk7KXRbYSsrXT1pLHRbYSsrXT1uLHRbYSsrXT1vLHRbYSsrXT1zLHkrPTQ7aWYoKGk9ZVt5KytdKTwxMjgpdFthKytdPWk7ZWxzZSBpZigxOTI9PSgyMjQmaSkpe2lmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLGE7aWYoMTI4IT0oMTkyJihuPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoKGM9KDMxJmkpPDw2fDYzJm4pPDEyOCl7eS0tO2NvbnRpbnVlfXRbYSsrXT1jfWVsc2UgaWYoMjI0PT0oMjQwJmkpKXtpZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSxhO2lmKDEyOCE9KDE5MiYobj1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLHRoaXMuaW50ZXJpbVsxXT1uLGE7aWYoMTI4IT0oMTkyJihvPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoKGM9KDE1JmkpPDwxMnwoNjMmbik8PDZ8NjMmbyk8MjA0OHx8Yz49NTUyOTYmJmM8PTU3MzQzfHw2NTI3OT09PWMpY29udGludWU7dFthKytdPWN9ZWxzZSBpZigyNDA9PSgyNDgmaSkpe2lmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLGE7aWYoMTI4IT0oMTkyJihuPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksdGhpcy5pbnRlcmltWzFdPW4sYTtpZigxMjghPSgxOTImKG89ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSx0aGlzLmludGVyaW1bMV09bix0aGlzLmludGVyaW1bMl09byxhO2lmKDEyOCE9KDE5MiYocz1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKChjPSg3JmkpPDwxOHwoNjMmbik8PDEyfCg2MyZvKTw8Nnw2MyZzKTw2NTUzNnx8Yz4xMTE0MTExKWNvbnRpbnVlO3RbYSsrXT1jfX1yZXR1cm4gYX0sZX0oKTt0LlV0ZjhUb1V0ZjMyPWl9LDIyNTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVW5pY29kZVY2PXZvaWQgMDt2YXIgaSxuPXIoODI3Myksbz1bWzc2OCw4NzldLFsxMTU1LDExNThdLFsxMTYwLDExNjFdLFsxNDI1LDE0NjldLFsxNDcxLDE0NzFdLFsxNDczLDE0NzRdLFsxNDc2LDE0NzddLFsxNDc5LDE0NzldLFsxNTM2LDE1MzldLFsxNTUyLDE1NTddLFsxNjExLDE2MzBdLFsxNjQ4LDE2NDhdLFsxNzUwLDE3NjRdLFsxNzY3LDE3NjhdLFsxNzcwLDE3NzNdLFsxODA3LDE4MDddLFsxODA5LDE4MDldLFsxODQwLDE4NjZdLFsxOTU4LDE5NjhdLFsyMDI3LDIwMzVdLFsyMzA1LDIzMDZdLFsyMzY0LDIzNjRdLFsyMzY5LDIzNzZdLFsyMzgxLDIzODFdLFsyMzg1LDIzODhdLFsyNDAyLDI0MDNdLFsyNDMzLDI0MzNdLFsyNDkyLDI0OTJdLFsyNDk3LDI1MDBdLFsyNTA5LDI1MDldLFsyNTMwLDI1MzFdLFsyNTYxLDI1NjJdLFsyNjIwLDI2MjBdLFsyNjI1LDI2MjZdLFsyNjMxLDI2MzJdLFsyNjM1LDI2MzddLFsyNjcyLDI2NzNdLFsyNjg5LDI2OTBdLFsyNzQ4LDI3NDhdLFsyNzUzLDI3NTddLFsyNzU5LDI3NjBdLFsyNzY1LDI3NjVdLFsyNzg2LDI3ODddLFsyODE3LDI4MTddLFsyODc2LDI4NzZdLFsyODc5LDI4NzldLFsyODgxLDI4ODNdLFsyODkzLDI4OTNdLFsyOTAyLDI5MDJdLFsyOTQ2LDI5NDZdLFszMDA4LDMwMDhdLFszMDIxLDMwMjFdLFszMTM0LDMxMzZdLFszMTQyLDMxNDRdLFszMTQ2LDMxNDldLFszMTU3LDMxNThdLFszMjYwLDMyNjBdLFszMjYzLDMyNjNdLFszMjcwLDMyNzBdLFszMjc2LDMyNzddLFszMjk4LDMyOTldLFszMzkzLDMzOTVdLFszNDA1LDM0MDVdLFszNTMwLDM1MzBdLFszNTM4LDM1NDBdLFszNTQyLDM1NDJdLFszNjMzLDM2MzNdLFszNjM2LDM2NDJdLFszNjU1LDM2NjJdLFszNzYxLDM3NjFdLFszNzY0LDM3NjldLFszNzcxLDM3NzJdLFszNzg0LDM3ODldLFszODY0LDM4NjVdLFszODkzLDM4OTNdLFszODk1LDM4OTVdLFszODk3LDM4OTddLFszOTUzLDM5NjZdLFszOTY4LDM5NzJdLFszOTc0LDM5NzVdLFszOTg0LDM5OTFdLFszOTkzLDQwMjhdLFs0MDM4LDQwMzhdLFs0MTQxLDQxNDRdLFs0MTQ2LDQxNDZdLFs0MTUwLDQxNTFdLFs0MTUzLDQxNTNdLFs0MTg0LDQxODVdLFs0NDQ4LDQ2MDddLFs0OTU5LDQ5NTldLFs1OTA2LDU5MDhdLFs1OTM4LDU5NDBdLFs1OTcwLDU5NzFdLFs2MDAyLDYwMDNdLFs2MDY4LDYwNjldLFs2MDcxLDYwNzddLFs2MDg2LDYwODZdLFs2MDg5LDYwOTldLFs2MTA5LDYxMDldLFs2MTU1LDYxNTddLFs2MzEzLDYzMTNdLFs2NDMyLDY0MzRdLFs2NDM5LDY0NDBdLFs2NDUwLDY0NTBdLFs2NDU3LDY0NTldLFs2Njc5LDY2ODBdLFs2OTEyLDY5MTVdLFs2OTY0LDY5NjRdLFs2OTY2LDY5NzBdLFs2OTcyLDY5NzJdLFs2OTc4LDY5NzhdLFs3MDE5LDcwMjddLFs3NjE2LDc2MjZdLFs3Njc4LDc2NzldLFs4MjAzLDgyMDddLFs4MjM0LDgyMzhdLFs4Mjg4LDgyOTFdLFs4Mjk4LDgzMDNdLFs4NDAwLDg0MzFdLFsxMjMzMCwxMjMzNV0sWzEyNDQxLDEyNDQyXSxbNDMwMTQsNDMwMTRdLFs0MzAxOSw0MzAxOV0sWzQzMDQ1LDQzMDQ2XSxbNjQyODYsNjQyODZdLFs2NTAyNCw2NTAzOV0sWzY1MDU2LDY1MDU5XSxbNjUyNzksNjUyNzldLFs2NTUyOSw2NTUzMV1dLHM9W1s2ODA5Nyw2ODA5OV0sWzY4MTAxLDY4MTAyXSxbNjgxMDgsNjgxMTFdLFs2ODE1Miw2ODE1NF0sWzY4MTU5LDY4MTU5XSxbMTE5MTQzLDExOTE0NV0sWzExOTE1NSwxMTkxNzBdLFsxMTkxNzMsMTE5MTc5XSxbMTE5MjEwLDExOTIxM10sWzExOTM2MiwxMTkzNjRdLFs5MTc1MDUsOTE3NTA1XSxbOTE3NTM2LDkxNzYzMV0sWzkxNzc2MCw5MTc5OTldXSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe2lmKHRoaXMudmVyc2lvbj0iNiIsIWkpe2k9bmV3IFVpbnQ4QXJyYXkoNjU1MzYpLCgwLG4uZmlsbCkoaSwxKSxpWzBdPTAsKDAsbi5maWxsKShpLDAsMSwzMiksKDAsbi5maWxsKShpLDAsMTI3LDE2MCksKDAsbi5maWxsKShpLDIsNDM1Miw0NDQ4KSxpWzkwMDFdPTIsaVs5MDAyXT0yLCgwLG4uZmlsbCkoaSwyLDExOTA0LDQyMTkyKSxpWzEyMzUxXT0xLCgwLG4uZmlsbCkoaSwyLDQ0MDMyLDU1MjA0KSwoMCxuLmZpbGwpKGksMiw2Mzc0NCw2NDI1NiksKDAsbi5maWxsKShpLDIsNjUwNDAsNjUwNTApLCgwLG4uZmlsbCkoaSwyLDY1MDcyLDY1MTM2KSwoMCxuLmZpbGwpKGksMiw2NTI4MCw2NTM3NyksKDAsbi5maWxsKShpLDIsNjU1MDQsNjU1MTEpO2Zvcih2YXIgZT0wO2U8by5sZW5ndGg7KytlKSgwLG4uZmlsbCkoaSwwLG9bZV1bMF0sb1tlXVsxXSsxKX19cmV0dXJuIGUucHJvdG90eXBlLndjd2lkdGg9ZnVuY3Rpb24oZSl7cmV0dXJuIGU8MzI/MDplPDEyNz8xOmU8NjU1MzY/aVtlXTpmdW5jdGlvbihlLHQpe3ZhciByLGk9MCxuPXQubGVuZ3RoLTE7aWYoZTx0WzBdWzBdfHxlPnRbbl1bMV0pcmV0dXJuITE7Zm9yKDtuPj1pOylpZihlPnRbcj1pK24+PjFdWzFdKWk9cisxO2Vsc2V7aWYoIShlPHRbcl1bMF0pKXJldHVybiEwO249ci0xfXJldHVybiExfShlLHMpPzA6ZT49MTMxMDcyJiZlPD0xOTY2MDV8fGU+PTE5NjYwOCYmZTw9MjYyMTQxPzI6MX0sZX0oKTt0LlVuaWNvZGVWNj1hfSw1OTgxOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Xcml0ZUJ1ZmZlcj12b2lkIDA7dmFyIGk9cig4NDYwKSxuPSJ1bmRlZmluZWQiPT10eXBlb2YgcXVldWVNaWNyb3Rhc2s/ZnVuY3Rpb24oZSl7UHJvbWlzZS5yZXNvbHZlKCkudGhlbihlKX06cXVldWVNaWNyb3Rhc2ssbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fYWN0aW9uPWUsdGhpcy5fd3JpdGVCdWZmZXI9W10sdGhpcy5fY2FsbGJhY2tzPVtdLHRoaXMuX3BlbmRpbmdEYXRhPTAsdGhpcy5fYnVmZmVyT2Zmc2V0PTAsdGhpcy5faXNTeW5jV3JpdGluZz0hMSx0aGlzLl9zeW5jQ2FsbHM9MCx0aGlzLl9vbldyaXRlUGFyc2VkPW5ldyBpLkV2ZW50RW1pdHRlcn1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbldyaXRlUGFyc2VkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uV3JpdGVQYXJzZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUud3JpdGVTeW5jPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09dCYmdGhpcy5fc3luY0NhbGxzPnQpdGhpcy5fc3luY0NhbGxzPTA7ZWxzZSBpZih0aGlzLl9wZW5kaW5nRGF0YSs9ZS5sZW5ndGgsdGhpcy5fd3JpdGVCdWZmZXIucHVzaChlKSx0aGlzLl9jYWxsYmFja3MucHVzaCh2b2lkIDApLHRoaXMuX3N5bmNDYWxscysrLCF0aGlzLl9pc1N5bmNXcml0aW5nKXt2YXIgcjtmb3IodGhpcy5faXNTeW5jV3JpdGluZz0hMDtyPXRoaXMuX3dyaXRlQnVmZmVyLnNoaWZ0KCk7KXt0aGlzLl9hY3Rpb24ocik7dmFyIGk9dGhpcy5fY2FsbGJhY2tzLnNoaWZ0KCk7aSYmaSgpfXRoaXMuX3BlbmRpbmdEYXRhPTAsdGhpcy5fYnVmZmVyT2Zmc2V0PTIxNDc0ODM2NDcsdGhpcy5faXNTeW5jV3JpdGluZz0hMSx0aGlzLl9zeW5jQ2FsbHM9MH19LGUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztpZih0aGlzLl9wZW5kaW5nRGF0YT41ZTcpdGhyb3cgbmV3IEVycm9yKCJ3cml0ZSBkYXRhIGRpc2NhcmRlZCwgdXNlIGZsb3cgY29udHJvbCB0byBhdm9pZCBsb3NpbmcgZGF0YSIpO3RoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aHx8KHRoaXMuX2J1ZmZlck9mZnNldD0wLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2lubmVyV3JpdGUoKX0pKSksdGhpcy5fcGVuZGluZ0RhdGErPWUubGVuZ3RoLHRoaXMuX3dyaXRlQnVmZmVyLnB1c2goZSksdGhpcy5fY2FsbGJhY2tzLnB1c2godCl9LGUucHJvdG90eXBlLl9pbm5lcldyaXRlPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpczt2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT10JiYodD0hMCk7Zm9yKHZhciBpPWV8fERhdGUubm93KCk7dGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoPnRoaXMuX2J1ZmZlck9mZnNldDspe3ZhciBvPXRoaXMuX3dyaXRlQnVmZmVyW3RoaXMuX2J1ZmZlck9mZnNldF0scz10aGlzLl9hY3Rpb24obyx0KTtpZihzKXJldHVybiB2b2lkIHMuY2F0Y2goKGZ1bmN0aW9uKGUpe3JldHVybiBuKChmdW5jdGlvbigpe3Rocm93IGV9KSksUHJvbWlzZS5yZXNvbHZlKCExKX0pKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gRGF0ZS5ub3coKS1pPj0xMj9zZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiByLl9pbm5lcldyaXRlKDAsZSl9KSk6ci5faW5uZXJXcml0ZShpLGUpfSkpO3ZhciBhPXRoaXMuX2NhbGxiYWNrc1t0aGlzLl9idWZmZXJPZmZzZXRdO2lmKGEmJmEoKSx0aGlzLl9idWZmZXJPZmZzZXQrKyx0aGlzLl9wZW5kaW5nRGF0YS09by5sZW5ndGgsRGF0ZS5ub3coKS1pPj0xMilicmVha310aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGg+dGhpcy5fYnVmZmVyT2Zmc2V0Pyh0aGlzLl9idWZmZXJPZmZzZXQ+NTAmJih0aGlzLl93cml0ZUJ1ZmZlcj10aGlzLl93cml0ZUJ1ZmZlci5zbGljZSh0aGlzLl9idWZmZXJPZmZzZXQpLHRoaXMuX2NhbGxiYWNrcz10aGlzLl9jYWxsYmFja3Muc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KSx0aGlzLl9idWZmZXJPZmZzZXQ9MCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gci5faW5uZXJXcml0ZSgpfSkpKToodGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoPTAsdGhpcy5fY2FsbGJhY2tzLmxlbmd0aD0wLHRoaXMuX3BlbmRpbmdEYXRhPTAsdGhpcy5fYnVmZmVyT2Zmc2V0PTApLHRoaXMuX29uV3JpdGVQYXJzZWQuZmlyZSgpfSxlfSgpO3QuV3JpdGVCdWZmZXI9b30sNTk0MTpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc307T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQudG9SZ2JTdHJpbmc9dC5wYXJzZUNvbG9yPXZvaWQgMDt2YXIgaT0vXihbXGRhLWZdKVwvKFtcZGEtZl0pXC8oW1xkYS1mXSkkfF4oW1xkYS1mXXsyfSlcLyhbXGRhLWZdezJ9KVwvKFtcZGEtZl17Mn0pJHxeKFtcZGEtZl17M30pXC8oW1xkYS1mXXszfSlcLyhbXGRhLWZdezN9KSR8XihbXGRhLWZdezR9KVwvKFtcZGEtZl17NH0pXC8oW1xkYS1mXXs0fSkkLyxuPS9eW1xkYS1mXSskLztmdW5jdGlvbiBvKGUsdCl7dmFyIHI9ZS50b1N0cmluZygxNiksaT1yLmxlbmd0aDwyPyIwIityOnI7c3dpdGNoKHQpe2Nhc2UgNDpyZXR1cm4gclswXTtjYXNlIDg6cmV0dXJuIGk7Y2FzZSAxMjpyZXR1cm4oaStpKS5zbGljZSgwLDMpO2RlZmF1bHQ6cmV0dXJuIGkraX19dC5wYXJzZUNvbG9yPWZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PWUudG9Mb3dlckNhc2UoKTtpZigwPT09dC5pbmRleE9mKCJyZ2I6Iikpe3Q9dC5zbGljZSg0KTt2YXIgcj1pLmV4ZWModCk7aWYocil7dmFyIG89clsxXT8xNTpyWzRdPzI1NTpyWzddPzQwOTU6NjU1MzU7cmV0dXJuW01hdGgucm91bmQocGFyc2VJbnQoclsxXXx8cls0XXx8cls3XXx8clsxMF0sMTYpL28qMjU1KSxNYXRoLnJvdW5kKHBhcnNlSW50KHJbMl18fHJbNV18fHJbOF18fHJbMTFdLDE2KS9vKjI1NSksTWF0aC5yb3VuZChwYXJzZUludChyWzNdfHxyWzZdfHxyWzldfHxyWzEyXSwxNikvbyoyNTUpXX19ZWxzZSBpZigwPT09dC5pbmRleE9mKCIjIikmJih0PXQuc2xpY2UoMSksbi5leGVjKHQpJiZbMyw2LDksMTJdLmluY2x1ZGVzKHQubGVuZ3RoKSkpe2Zvcih2YXIgcz10Lmxlbmd0aC8zLGE9WzAsMCwwXSxjPTA7YzwzOysrYyl7dmFyIGw9cGFyc2VJbnQodC5zbGljZShzKmMscypjK3MpLDE2KTthW2NdPTE9PT1zP2w8PDQ6Mj09PXM/bDozPT09cz9sPj40Omw+Pjh9cmV0dXJuIGF9fX0sdC50b1JnYlN0cmluZz1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PTE2KTt2YXIgaT1yKGUsMyksbj1pWzBdLHM9aVsxXSxhPWlbMl07cmV0dXJuInJnYjoiK28obix0KSsiLyIrbyhzLHQpKyIvIitvKGEsdCl9fSw1NzcwOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUEFZTE9BRF9MSU1JVD12b2lkIDAsdC5QQVlMT0FEX0xJTUlUPTFlN30sNjM1MTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRGNzSGFuZGxlcj10LkRjc1BhcnNlcj12b2lkIDA7dmFyIGk9cig0ODIpLG49cig4NzQyKSxvPXIoNTc3MCkscz1bXSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fYWN0aXZlPXMsdGhpcy5faWRlbnQ9MCx0aGlzLl9oYW5kbGVyRmI9ZnVuY3Rpb24oKXt9LHRoaXMuX3N0YWNrPXtwYXVzZWQ6ITEsbG9vcFBvc2l0aW9uOjAsZmFsbFRocm91Z2g6ITF9fXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5faGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9oYW5kbGVyRmI9ZnVuY3Rpb24oKXt9LHRoaXMuX2FjdGl2ZT1zfSxlLnByb3RvdHlwZS5yZWdpc3RlckhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10aGlzLl9oYW5kbGVyc1tlXSYmKHRoaXMuX2hhbmRsZXJzW2VdPVtdKTt2YXIgcj10aGlzLl9oYW5kbGVyc1tlXTtyZXR1cm4gci5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9ci5pbmRleE9mKHQpOy0xIT09ZSYmci5zcGxpY2UoZSwxKX19fSxlLnByb3RvdHlwZS5jbGVhckhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlcnNbZV0mJmRlbGV0ZSB0aGlzLl9oYW5kbGVyc1tlXX0sZS5wcm90b3R5cGUuc2V0SGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXJGYj1lfSxlLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe2lmKHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciBlPXRoaXMuX3N0YWNrLnBhdXNlZD90aGlzLl9zdGFjay5sb29wUG9zaXRpb24tMTp0aGlzLl9hY3RpdmUubGVuZ3RoLTE7ZT49MDstLWUpdGhpcy5fYWN0aXZlW2VdLnVuaG9vayghMSk7dGhpcy5fc3RhY2sucGF1c2VkPSExLHRoaXMuX2FjdGl2ZT1zLHRoaXMuX2lkZW50PTB9LGUucHJvdG90eXBlLmhvb2s9ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnJlc2V0KCksdGhpcy5faWRlbnQ9ZSx0aGlzLl9hY3RpdmU9dGhpcy5faGFuZGxlcnNbZV18fHMsdGhpcy5fYWN0aXZlLmxlbmd0aClmb3IodmFyIHI9dGhpcy5fYWN0aXZlLmxlbmd0aC0xO3I+PTA7ci0tKXRoaXMuX2FjdGl2ZVtyXS5ob29rKHQpO2Vsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCJIT09LIix0KX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgbj10aGlzLl9hY3RpdmUubGVuZ3RoLTE7bj49MDtuLS0pdGhpcy5fYWN0aXZlW25dLnB1dChlLHQscik7ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsIlBVVCIsKDAsaS51dGYzMlRvU3RyaW5nKShlLHQscikpfSxlLnByb3RvdHlwZS51bmhvb2s9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD0hMCksdGhpcy5fYWN0aXZlLmxlbmd0aCl7dmFyIHI9ITEsaT10aGlzLl9hY3RpdmUubGVuZ3RoLTEsbj0hMTtpZih0aGlzLl9zdGFjay5wYXVzZWQmJihpPXRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xLHI9dCxuPXRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoLHRoaXMuX3N0YWNrLnBhdXNlZD0hMSksIW4mJiExPT09cil7Zm9yKDtpPj0wJiYhMCE9PShyPXRoaXMuX2FjdGl2ZVtpXS51bmhvb2soZSkpO2ktLSlpZihyIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fc3RhY2sucGF1c2VkPSEwLHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbj1pLHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoPSExLHI7aS0tfWZvcig7aT49MDtpLS0paWYoKHI9dGhpcy5fYWN0aXZlW2ldLnVuaG9vayghMSkpaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9zdGFjay5wYXVzZWQ9ITAsdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uPWksdGhpcy5fc3RhY2suZmFsbFRocm91Z2g9ITAscn1lbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwiVU5IT09LIixlKTt0aGlzLl9hY3RpdmU9cyx0aGlzLl9pZGVudD0wfSxlfSgpO3QuRGNzUGFyc2VyPWE7dmFyIGM9bmV3IG4uUGFyYW1zO2MuYWRkUGFyYW0oMCk7dmFyIGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2hhbmRsZXI9ZSx0aGlzLl9kYXRhPSIiLHRoaXMuX3BhcmFtcz1jLHRoaXMuX2hpdExpbWl0PSExfXJldHVybiBlLnByb3RvdHlwZS5ob29rPWZ1bmN0aW9uKGUpe3RoaXMuX3BhcmFtcz1lLmxlbmd0aD4xfHxlLnBhcmFtc1swXT9lLmNsb25lKCk6Yyx0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2hpdExpbWl0fHwodGhpcy5fZGF0YSs9KDAsaS51dGYzMlRvU3RyaW5nKShlLHQsciksdGhpcy5fZGF0YS5sZW5ndGg+by5QQVlMT0FEX0xJTUlUJiYodGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMCkpfSxlLnByb3RvdHlwZS51bmhvb2s9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSExO2lmKHRoaXMuX2hpdExpbWl0KXI9ITE7ZWxzZSBpZihlJiYocj10aGlzLl9oYW5kbGVyKHRoaXMuX2RhdGEsdGhpcy5fcGFyYW1zKSlpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHIudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3BhcmFtcz1jLHQuX2RhdGE9IiIsdC5faGl0TGltaXQ9ITEsZX0pKTtyZXR1cm4gdGhpcy5fcGFyYW1zPWMsdGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMSxyfSxlfSgpO3QuRGNzSGFuZGxlcj1sfSwyMDE1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkVzY2FwZVNlcXVlbmNlUGFyc2VyPXQuVlQ1MDBfVFJBTlNJVElPTl9UQUJMRT10LlRyYW5zaXRpb25UYWJsZT12b2lkIDA7dmFyIG89cig4NDQpLHM9cig4MjczKSxhPXIoODc0MiksYz1yKDYyNDIpLGw9cig2MzUxKSxoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLnRhYmxlPW5ldyBVaW50OEFycmF5KGUpfXJldHVybiBlLnByb3RvdHlwZS5zZXREZWZhdWx0PWZ1bmN0aW9uKGUsdCl7KDAscy5maWxsKSh0aGlzLnRhYmxlLGU8PDR8dCl9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlLHQscixpKXt0aGlzLnRhYmxlW3Q8PDh8ZV09cjw8NHxpfSxlLnByb3RvdHlwZS5hZGRNYW55PWZ1bmN0aW9uKGUsdCxyLGkpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7bisrKXRoaXMudGFibGVbdDw8OHxlW25dXT1yPDw0fGl9LGV9KCk7dC5UcmFuc2l0aW9uVGFibGU9aDt2YXIgdT0xNjA7dC5WVDUwMF9UUkFOU0lUSU9OX1RBQkxFPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IGgoNDA5NSksdD1BcnJheS5hcHBseShudWxsLEFycmF5KDI1NikpLm1hcCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gdH0pKSxyPWZ1bmN0aW9uKGUscil7cmV0dXJuIHQuc2xpY2UoZSxyKX0saT1yKDMyLDEyNyksbj1yKDAsMjQpO24ucHVzaCgyNSksbi5wdXNoLmFwcGx5KG4scigyOCwzMikpO3ZhciBvLHM9cigwLDE0KTtmb3IobyBpbiBlLnNldERlZmF1bHQoMSwwKSxlLmFkZE1hbnkoaSwwLDIsMCkscyllLmFkZE1hbnkoWzI0LDI2LDE1MywxNTRdLG8sMywwKSxlLmFkZE1hbnkocigxMjgsMTQ0KSxvLDMsMCksZS5hZGRNYW55KHIoMTQ0LDE1MiksbywzLDApLGUuYWRkKDE1NixvLDAsMCksZS5hZGQoMjcsbywxMSwxKSxlLmFkZCgxNTcsbyw0LDgpLGUuYWRkTWFueShbMTUyLDE1OCwxNTldLG8sMCw3KSxlLmFkZCgxNTUsbywxMSwzKSxlLmFkZCgxNDQsbywxMSw5KTtyZXR1cm4gZS5hZGRNYW55KG4sMCwzLDApLGUuYWRkTWFueShuLDEsMywxKSxlLmFkZCgxMjcsMSwwLDEpLGUuYWRkTWFueShuLDgsMCw4KSxlLmFkZE1hbnkobiwzLDMsMyksZS5hZGQoMTI3LDMsMCwzKSxlLmFkZE1hbnkobiw0LDMsNCksZS5hZGQoMTI3LDQsMCw0KSxlLmFkZE1hbnkobiw2LDMsNiksZS5hZGRNYW55KG4sNSwzLDUpLGUuYWRkKDEyNyw1LDAsNSksZS5hZGRNYW55KG4sMiwzLDIpLGUuYWRkKDEyNywyLDAsMiksZS5hZGQoOTMsMSw0LDgpLGUuYWRkTWFueShpLDgsNSw4KSxlLmFkZCgxMjcsOCw1LDgpLGUuYWRkTWFueShbMTU2LDI3LDI0LDI2LDddLDgsNiwwKSxlLmFkZE1hbnkocigyOCwzMiksOCwwLDgpLGUuYWRkTWFueShbODgsOTQsOTVdLDEsMCw3KSxlLmFkZE1hbnkoaSw3LDAsNyksZS5hZGRNYW55KG4sNywwLDcpLGUuYWRkKDE1Niw3LDAsMCksZS5hZGQoMTI3LDcsMCw3KSxlLmFkZCg5MSwxLDExLDMpLGUuYWRkTWFueShyKDY0LDEyNyksMyw3LDApLGUuYWRkTWFueShyKDQ4LDYwKSwzLDgsNCksZS5hZGRNYW55KFs2MCw2MSw2Miw2M10sMyw5LDQpLGUuYWRkTWFueShyKDQ4LDYwKSw0LDgsNCksZS5hZGRNYW55KHIoNjQsMTI3KSw0LDcsMCksZS5hZGRNYW55KFs2MCw2MSw2Miw2M10sNCwwLDYpLGUuYWRkTWFueShyKDMyLDY0KSw2LDAsNiksZS5hZGQoMTI3LDYsMCw2KSxlLmFkZE1hbnkocig2NCwxMjcpLDYsMCwwKSxlLmFkZE1hbnkocigzMiw0OCksMyw5LDUpLGUuYWRkTWFueShyKDMyLDQ4KSw1LDksNSksZS5hZGRNYW55KHIoNDgsNjQpLDUsMCw2KSxlLmFkZE1hbnkocig2NCwxMjcpLDUsNywwKSxlLmFkZE1hbnkocigzMiw0OCksNCw5LDUpLGUuYWRkTWFueShyKDMyLDQ4KSwxLDksMiksZS5hZGRNYW55KHIoMzIsNDgpLDIsOSwyKSxlLmFkZE1hbnkocig0OCwxMjcpLDIsMTAsMCksZS5hZGRNYW55KHIoNDgsODApLDEsMTAsMCksZS5hZGRNYW55KHIoODEsODgpLDEsMTAsMCksZS5hZGRNYW55KFs4OSw5MCw5Ml0sMSwxMCwwKSxlLmFkZE1hbnkocig5NiwxMjcpLDEsMTAsMCksZS5hZGQoODAsMSwxMSw5KSxlLmFkZE1hbnkobiw5LDAsOSksZS5hZGQoMTI3LDksMCw5KSxlLmFkZE1hbnkocigyOCwzMiksOSwwLDkpLGUuYWRkTWFueShyKDMyLDQ4KSw5LDksMTIpLGUuYWRkTWFueShyKDQ4LDYwKSw5LDgsMTApLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDksOSwxMCksZS5hZGRNYW55KG4sMTEsMCwxMSksZS5hZGRNYW55KHIoMzIsMTI4KSwxMSwwLDExKSxlLmFkZE1hbnkocigyOCwzMiksMTEsMCwxMSksZS5hZGRNYW55KG4sMTAsMCwxMCksZS5hZGQoMTI3LDEwLDAsMTApLGUuYWRkTWFueShyKDI4LDMyKSwxMCwwLDEwKSxlLmFkZE1hbnkocig0OCw2MCksMTAsOCwxMCksZS5hZGRNYW55KFs2MCw2MSw2Miw2M10sMTAsMCwxMSksZS5hZGRNYW55KHIoMzIsNDgpLDEwLDksMTIpLGUuYWRkTWFueShuLDEyLDAsMTIpLGUuYWRkKDEyNywxMiwwLDEyKSxlLmFkZE1hbnkocigyOCwzMiksMTIsMCwxMiksZS5hZGRNYW55KHIoMzIsNDgpLDEyLDksMTIpLGUuYWRkTWFueShyKDQ4LDY0KSwxMiwwLDExKSxlLmFkZE1hbnkocig2NCwxMjcpLDEyLDEyLDEzKSxlLmFkZE1hbnkocig2NCwxMjcpLDEwLDEyLDEzKSxlLmFkZE1hbnkocig2NCwxMjcpLDksMTIsMTMpLGUuYWRkTWFueShuLDEzLDEzLDEzKSxlLmFkZE1hbnkoaSwxMywxMywxMyksZS5hZGQoMTI3LDEzLDAsMTMpLGUuYWRkTWFueShbMjcsMTU2LDI0LDI2XSwxMywxNCwwKSxlLmFkZCh1LDAsMiwwKSxlLmFkZCh1LDgsNSw4KSxlLmFkZCh1LDYsMCw2KSxlLmFkZCh1LDExLDAsMTEpLGUuYWRkKHUsMTMsMTMsMTMpLGV9KCk7dmFyIGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcihyKXt2b2lkIDA9PT1yJiYocj10LlZUNTAwX1RSQU5TSVRJT05fVEFCTEUpO3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fdHJhbnNpdGlvbnM9cixpLl9wYXJzZVN0YWNrPXtzdGF0ZTowLGhhbmRsZXJzOltdLGhhbmRsZXJQb3M6MCx0cmFuc2l0aW9uOjAsY2h1bmtQb3M6MH0saS5pbml0aWFsU3RhdGU9MCxpLmN1cnJlbnRTdGF0ZT1pLmluaXRpYWxTdGF0ZSxpLl9wYXJhbXM9bmV3IGEuUGFyYW1zLGkuX3BhcmFtcy5hZGRQYXJhbSgwKSxpLl9jb2xsZWN0PTAsaS5wcmVjZWRpbmdDb2RlcG9pbnQ9MCxpLl9wcmludEhhbmRsZXJGYj1mdW5jdGlvbihlLHQscil7fSxpLl9leGVjdXRlSGFuZGxlckZiPWZ1bmN0aW9uKGUpe30saS5fY3NpSGFuZGxlckZiPWZ1bmN0aW9uKGUsdCl7fSxpLl9lc2NIYW5kbGVyRmI9ZnVuY3Rpb24oZSl7fSxpLl9lcnJvckhhbmRsZXJGYj1mdW5jdGlvbihlKXtyZXR1cm4gZX0saS5fcHJpbnRIYW5kbGVyPWkuX3ByaW50SGFuZGxlckZiLGkuX2V4ZWN1dGVIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGkuX2NzaUhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksaS5fZXNjSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSxpLl9vc2NQYXJzZXI9bmV3IGMuT3NjUGFyc2VyLGkuX2Rjc1BhcnNlcj1uZXcgbC5EY3NQYXJzZXIsaS5fZXJyb3JIYW5kbGVyPWkuX2Vycm9ySGFuZGxlckZiLGkucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiXFwifSwoZnVuY3Rpb24oKXtyZXR1cm4hMH0pKSxpfXJldHVybiBuKHIsZSksci5wcm90b3R5cGUuX2lkZW50aWZpZXI9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD1bNjQsMTI2XSk7dmFyIHI9MDtpZihlLnByZWZpeCl7aWYoZS5wcmVmaXgubGVuZ3RoPjEpdGhyb3cgbmV3IEVycm9yKCJvbmx5IG9uZSBieXRlIGFzIHByZWZpeCBzdXBwb3J0ZWQiKTtpZigocj1lLnByZWZpeC5jaGFyQ29kZUF0KDApKSYmNjA+cnx8cj42Myl0aHJvdyBuZXcgRXJyb3IoInByZWZpeCBtdXN0IGJlIGluIHJhbmdlIDB4M2MgLi4gMHgzZiIpfWlmKGUuaW50ZXJtZWRpYXRlcyl7aWYoZS5pbnRlcm1lZGlhdGVzLmxlbmd0aD4yKXRocm93IG5ldyBFcnJvcigib25seSB0d28gYnl0ZXMgYXMgaW50ZXJtZWRpYXRlcyBhcmUgc3VwcG9ydGVkIik7Zm9yKHZhciBpPTA7aTxlLmludGVybWVkaWF0ZXMubGVuZ3RoOysraSl7dmFyIG49ZS5pbnRlcm1lZGlhdGVzLmNoYXJDb2RlQXQoaSk7aWYoMzI+bnx8bj40Nyl0aHJvdyBuZXcgRXJyb3IoImludGVybWVkaWF0ZSBtdXN0IGJlIGluIHJhbmdlIDB4MjAgLi4gMHgyZiIpO3I8PD04LHJ8PW59fWlmKDEhPT1lLmZpbmFsLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoImZpbmFsIG11c3QgYmUgYSBzaW5nbGUgYnl0ZSIpO3ZhciBvPWUuZmluYWwuY2hhckNvZGVBdCgwKTtpZih0WzBdPm98fG8+dFsxXSl0aHJvdyBuZXcgRXJyb3IoImZpbmFsIG11c3QgYmUgaW4gcmFuZ2UgIit0WzBdKyIgLi4gIit0WzFdKTtyZXR1cm4ocjw8PTgpfG99LHIucHJvdG90eXBlLmlkZW50VG9TdHJpbmc9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdO2U7KXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZlKSksZT4+PTg7cmV0dXJuIHQucmV2ZXJzZSgpLmpvaW4oIiIpfSxyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY3NpSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9leGVjdXRlSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9lc2NIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX29zY1BhcnNlci5kaXNwb3NlKCksdGhpcy5fZGNzUGFyc2VyLmRpc3Bvc2UoKX0sci5wcm90b3R5cGUuc2V0UHJpbnRIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX3ByaW50SGFuZGxlcj1lfSxyLnByb3RvdHlwZS5jbGVhclByaW50SGFuZGxlcj1mdW5jdGlvbigpe3RoaXMuX3ByaW50SGFuZGxlcj10aGlzLl9wcmludEhhbmRsZXJGYn0sci5wcm90b3R5cGUucmVnaXN0ZXJFc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5faWRlbnRpZmllcihlLFs0OCwxMjZdKTt2b2lkIDA9PT10aGlzLl9lc2NIYW5kbGVyc1tyXSYmKHRoaXMuX2VzY0hhbmRsZXJzW3JdPVtdKTt2YXIgaT10aGlzLl9lc2NIYW5kbGVyc1tyXTtyZXR1cm4gaS5wdXNoKHQpLHtkaXNwb3NlOmZ1bmN0aW9uKCl7dmFyIGU9aS5pbmRleE9mKHQpOy0xIT09ZSYmaS5zcGxpY2UoZSwxKX19fSxyLnByb3RvdHlwZS5jbGVhckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihlLFs0OCwxMjZdKV0mJmRlbGV0ZSB0aGlzLl9lc2NIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUsWzQ4LDEyNl0pXX0sci5wcm90b3R5cGUuc2V0RXNjSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX2VzY0hhbmRsZXJGYj1lfSxyLnByb3RvdHlwZS5zZXRFeGVjdXRlSGFuZGxlcj1mdW5jdGlvbihlLHQpe3RoaXMuX2V4ZWN1dGVIYW5kbGVyc1tlLmNoYXJDb2RlQXQoMCldPXR9LHIucHJvdG90eXBlLmNsZWFyRXhlY3V0ZUhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2UuY2hhckNvZGVBdCgwKV0mJmRlbGV0ZSB0aGlzLl9leGVjdXRlSGFuZGxlcnNbZS5jaGFyQ29kZUF0KDApXX0sci5wcm90b3R5cGUuc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9leGVjdXRlSGFuZGxlckZiPWV9LHIucHJvdG90eXBlLnJlZ2lzdGVyQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2lkZW50aWZpZXIoZSk7dm9pZCAwPT09dGhpcy5fY3NpSGFuZGxlcnNbcl0mJih0aGlzLl9jc2lIYW5kbGVyc1tyXT1bXSk7dmFyIGk9dGhpcy5fY3NpSGFuZGxlcnNbcl07cmV0dXJuIGkucHVzaCh0KSx7ZGlzcG9zZTpmdW5jdGlvbigpe3ZhciBlPWkuaW5kZXhPZih0KTstMSE9PWUmJmkuc3BsaWNlKGUsMSl9fX0sci5wcm90b3R5cGUuY2xlYXJDc2lIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NzaUhhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoZSldJiZkZWxldGUgdGhpcy5fY3NpSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihlKV19LHIucHJvdG90eXBlLnNldENzaUhhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9jc2lIYW5kbGVyRmI9ZX0sci5wcm90b3R5cGUucmVnaXN0ZXJEY3NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2Rjc1BhcnNlci5yZWdpc3RlckhhbmRsZXIodGhpcy5faWRlbnRpZmllcihlKSx0KX0sci5wcm90b3R5cGUuY2xlYXJEY3NIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2Rjc1BhcnNlci5jbGVhckhhbmRsZXIodGhpcy5faWRlbnRpZmllcihlKSl9LHIucHJvdG90eXBlLnNldERjc0hhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9kY3NQYXJzZXIuc2V0SGFuZGxlckZhbGxiYWNrKGUpfSxyLnByb3RvdHlwZS5yZWdpc3Rlck9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fb3NjUGFyc2VyLnJlZ2lzdGVySGFuZGxlcihlLHQpfSxyLnByb3RvdHlwZS5jbGVhck9zY0hhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fb3NjUGFyc2VyLmNsZWFySGFuZGxlcihlKX0sci5wcm90b3R5cGUuc2V0T3NjSGFuZGxlckZhbGxiYWNrPWZ1bmN0aW9uKGUpe3RoaXMuX29zY1BhcnNlci5zZXRIYW5kbGVyRmFsbGJhY2soZSl9LHIucHJvdG90eXBlLnNldEVycm9ySGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9lcnJvckhhbmRsZXI9ZX0sci5wcm90b3R5cGUuY2xlYXJFcnJvckhhbmRsZXI9ZnVuY3Rpb24oKXt0aGlzLl9lcnJvckhhbmRsZXI9dGhpcy5fZXJyb3JIYW5kbGVyRmJ9LHIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5jdXJyZW50U3RhdGU9dGhpcy5pbml0aWFsU3RhdGUsdGhpcy5fb3NjUGFyc2VyLnJlc2V0KCksdGhpcy5fZGNzUGFyc2VyLnJlc2V0KCksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MCx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wLDAhPT10aGlzLl9wYXJzZVN0YWNrLnN0YXRlJiYodGhpcy5fcGFyc2VTdGFjay5zdGF0ZT0yLHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM9W10pfSxyLnByb3RvdHlwZS5fcHJlc2VydmVTdGFjaz1mdW5jdGlvbihlLHQscixpLG4pe3RoaXMuX3BhcnNlU3RhY2suc3RhdGU9ZSx0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPXQsdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zPXIsdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9uPWksdGhpcy5fcGFyc2VTdGFjay5jaHVua1Bvcz1ufSxyLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihlLHQscil7dmFyIGksbj0wLG89MCxzPTA7aWYodGhpcy5fcGFyc2VTdGFjay5zdGF0ZSlpZigyPT09dGhpcy5fcGFyc2VTdGFjay5zdGF0ZSl0aGlzLl9wYXJzZVN0YWNrLnN0YXRlPTAscz10aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zKzE7ZWxzZXtpZih2b2lkIDA9PT1yfHwxPT09dGhpcy5fcGFyc2VTdGFjay5zdGF0ZSl0aHJvdyB0aGlzLl9wYXJzZVN0YWNrLnN0YXRlPTEsbmV3IEVycm9yKCJpbXByb3BlciBjb250aW51YXRpb24gZHVlIHRvIHByZXZpb3VzIGFzeW5jIGhhbmRsZXIsIGdpdmluZyB1cCBwYXJzaW5nIik7dmFyIGE9dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycyxjPXRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcy0xO3N3aXRjaCh0aGlzLl9wYXJzZVN0YWNrLnN0YXRlKXtjYXNlIDM6aWYoITE9PT1yJiZjPi0xKWZvcig7Yz49MCYmITAhPT0oaT1hW2NdKHRoaXMuX3BhcmFtcykpO2MtLSlpZihpIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zPWMsaTt0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPVtdO2JyZWFrO2Nhc2UgNDppZighMT09PXImJmM+LTEpZm9yKDtjPj0wJiYhMCE9PShpPWFbY10oKSk7Yy0tKWlmKGkgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3M9YyxpO3RoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnM9W107YnJlYWs7Y2FzZSA2OmlmKG49ZVt0aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zXSxpPXRoaXMuX2Rjc1BhcnNlci51bmhvb2soMjQhPT1uJiYyNiE9PW4scikpcmV0dXJuIGk7Mjc9PT1uJiYodGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9ufD0xKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wO2JyZWFrO2Nhc2UgNTppZihuPWVbdGhpcy5fcGFyc2VTdGFjay5jaHVua1Bvc10saT10aGlzLl9vc2NQYXJzZXIuZW5kKDI0IT09biYmMjYhPT1uLHIpKXJldHVybiBpOzI3PT09biYmKHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbnw9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MH10aGlzLl9wYXJzZVN0YWNrLnN0YXRlPTAscz10aGlzLl9wYXJzZVN0YWNrLmNodW5rUG9zKzEsdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MCx0aGlzLmN1cnJlbnRTdGF0ZT0xNSZ0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb259Zm9yKHZhciBsPXM7bDx0OysrbCl7c3dpdGNoKG49ZVtsXSwobz10aGlzLl90cmFuc2l0aW9ucy50YWJsZVt0aGlzLmN1cnJlbnRTdGF0ZTw8OHwobjwxNjA/bjp1KV0pPj40KXtjYXNlIDI6Zm9yKHZhciBoPWwrMTs7KytoKXtpZihoPj10fHwobj1lW2hdKTwzMnx8bj4xMjYmJm48dSl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsbCxoKSxsPWgtMTticmVha31pZigrK2g+PXR8fChuPWVbaF0pPDMyfHxuPjEyNiYmbjx1KXt0aGlzLl9wcmludEhhbmRsZXIoZSxsLGgpLGw9aC0xO2JyZWFrfWlmKCsraD49dHx8KG49ZVtoXSk8MzJ8fG4+MTI2JiZuPHUpe3RoaXMuX3ByaW50SGFuZGxlcihlLGwsaCksbD1oLTE7YnJlYWt9aWYoKytoPj10fHwobj1lW2hdKTwzMnx8bj4xMjYmJm48dSl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsbCxoKSxsPWgtMTticmVha319YnJlYWs7Y2FzZSAzOnRoaXMuX2V4ZWN1dGVIYW5kbGVyc1tuXT90aGlzLl9leGVjdXRlSGFuZGxlcnNbbl0oKTp0aGlzLl9leGVjdXRlSGFuZGxlckZiKG4pLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTA7YnJlYWs7Y2FzZSAwOmJyZWFrO2Nhc2UgMTppZih0aGlzLl9lcnJvckhhbmRsZXIoe3Bvc2l0aW9uOmwsY29kZTpuLGN1cnJlbnRTdGF0ZTp0aGlzLmN1cnJlbnRTdGF0ZSxjb2xsZWN0OnRoaXMuX2NvbGxlY3QscGFyYW1zOnRoaXMuX3BhcmFtcyxhYm9ydDohMX0pLmFib3J0KXJldHVybjticmVhaztjYXNlIDc6Zm9yKHZhciBmPShhPXRoaXMuX2NzaUhhbmRsZXJzW3RoaXMuX2NvbGxlY3Q8PDh8bl0pP2EubGVuZ3RoLTE6LTE7Zj49MCYmITAhPT0oaT1hW2ZdKHRoaXMuX3BhcmFtcykpO2YtLSlpZihpIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjaygzLGEsZixvLGwpLGk7ZjwwJiZ0aGlzLl9jc2lIYW5kbGVyRmIodGhpcy5fY29sbGVjdDw8OHxuLHRoaXMuX3BhcmFtcyksdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MDticmVhaztjYXNlIDg6ZG97c3dpdGNoKG4pe2Nhc2UgNTk6dGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApO2JyZWFrO2Nhc2UgNTg6dGhpcy5fcGFyYW1zLmFkZFN1YlBhcmFtKC0xKTticmVhaztkZWZhdWx0OnRoaXMuX3BhcmFtcy5hZGREaWdpdChuLTQ4KX19d2hpbGUoKytsPHQmJihuPWVbbF0pPjQ3JiZuPDYwKTtsLS07YnJlYWs7Y2FzZSA5OnRoaXMuX2NvbGxlY3Q8PD04LHRoaXMuX2NvbGxlY3R8PW47YnJlYWs7Y2FzZSAxMDpmb3IodmFyIF89dGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5fY29sbGVjdDw8OHxuXSxkPV8/Xy5sZW5ndGgtMTotMTtkPj0wJiYhMCE9PShpPV9bZF0oKSk7ZC0tKWlmKGkgaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDQsXyxkLG8sbCksaTtkPDAmJnRoaXMuX2VzY0hhbmRsZXJGYih0aGlzLl9jb2xsZWN0PDw4fG4pLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTA7YnJlYWs7Y2FzZSAxMTp0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wO2JyZWFrO2Nhc2UgMTI6dGhpcy5fZGNzUGFyc2VyLmhvb2sodGhpcy5fY29sbGVjdDw8OHxuLHRoaXMuX3BhcmFtcyk7YnJlYWs7Y2FzZSAxMzpmb3IodmFyIHA9bCsxOzsrK3ApaWYocD49dHx8MjQ9PT0obj1lW3BdKXx8MjY9PT1ufHwyNz09PW58fG4+MTI3JiZuPHUpe3RoaXMuX2Rjc1BhcnNlci5wdXQoZSxsLHApLGw9cC0xO2JyZWFrfWJyZWFrO2Nhc2UgMTQ6aWYoaT10aGlzLl9kY3NQYXJzZXIudW5ob29rKDI0IT09biYmMjYhPT1uKSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjayg2LFtdLDAsbyxsKSxpOzI3PT09biYmKG98PTEpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTAsdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MDticmVhaztjYXNlIDQ6dGhpcy5fb3NjUGFyc2VyLnN0YXJ0KCk7YnJlYWs7Y2FzZSA1OmZvcih2YXIgdj1sKzE7O3YrKylpZih2Pj10fHwobj1lW3ZdKTwzMnx8bj4xMjcmJm48dSl7dGhpcy5fb3NjUGFyc2VyLnB1dChlLGwsdiksbD12LTE7YnJlYWt9YnJlYWs7Y2FzZSA2OmlmKGk9dGhpcy5fb3NjUGFyc2VyLmVuZCgyNCE9PW4mJjI2IT09bikpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soNSxbXSwwLG8sbCksaTsyNz09PW4mJihvfD0xKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTB9dGhpcy5jdXJyZW50U3RhdGU9MTUmb319LHJ9KG8uRGlzcG9zYWJsZSk7dC5Fc2NhcGVTZXF1ZW5jZVBhcnNlcj1mfSw2MjQyOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Pc2NIYW5kbGVyPXQuT3NjUGFyc2VyPXZvaWQgMDt2YXIgaT1yKDU3NzApLG49cig0ODIpLG89W10scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9zdGF0ZT0wLHRoaXMuX2FjdGl2ZT1vLHRoaXMuX2lkPS0xLHRoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5faGFuZGxlckZiPWZ1bmN0aW9uKCl7fSx0aGlzLl9zdGFjaz17cGF1c2VkOiExLGxvb3BQb3NpdGlvbjowLGZhbGxUaHJvdWdoOiExfX1yZXR1cm4gZS5wcm90b3R5cGUucmVnaXN0ZXJIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dGhpcy5faGFuZGxlcnNbZV0mJih0aGlzLl9oYW5kbGVyc1tlXT1bXSk7dmFyIHI9dGhpcy5faGFuZGxlcnNbZV07cmV0dXJuIHIucHVzaCh0KSx7ZGlzcG9zZTpmdW5jdGlvbigpe3ZhciBlPXIuaW5kZXhPZih0KTstMSE9PWUmJnIuc3BsaWNlKGUsMSl9fX0sZS5wcm90b3R5cGUuY2xlYXJIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXJzW2VdJiZkZWxldGUgdGhpcy5faGFuZGxlcnNbZV19LGUucHJvdG90eXBlLnNldEhhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyRmI9ZX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5faGFuZGxlckZiPWZ1bmN0aW9uKCl7fSx0aGlzLl9hY3RpdmU9b30sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtpZigyPT09dGhpcy5fc3RhdGUpZm9yKHZhciBlPXRoaXMuX3N0YWNrLnBhdXNlZD90aGlzLl9zdGFjay5sb29wUG9zaXRpb24tMTp0aGlzLl9hY3RpdmUubGVuZ3RoLTE7ZT49MDstLWUpdGhpcy5fYWN0aXZlW2VdLmVuZCghMSk7dGhpcy5fc3RhY2sucGF1c2VkPSExLHRoaXMuX2FjdGl2ZT1vLHRoaXMuX2lkPS0xLHRoaXMuX3N0YXRlPTB9LGUucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbigpe2lmKHRoaXMuX2FjdGl2ZT10aGlzLl9oYW5kbGVyc1t0aGlzLl9pZF18fG8sdGhpcy5fYWN0aXZlLmxlbmd0aClmb3IodmFyIGU9dGhpcy5fYWN0aXZlLmxlbmd0aC0xO2U+PTA7ZS0tKXRoaXMuX2FjdGl2ZVtlXS5zdGFydCgpO2Vsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCJTVEFSVCIpfSxlLnByb3RvdHlwZS5fcHV0PWZ1bmN0aW9uKGUsdCxyKXtpZih0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgaT10aGlzLl9hY3RpdmUubGVuZ3RoLTE7aT49MDtpLS0pdGhpcy5fYWN0aXZlW2ldLnB1dChlLHQscik7ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsIlBVVCIsKDAsbi51dGYzMlRvU3RyaW5nKShlLHQscikpfSxlLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMucmVzZXQoKSx0aGlzLl9zdGF0ZT0xfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe2lmKDMhPT10aGlzLl9zdGF0ZSl7aWYoMT09PXRoaXMuX3N0YXRlKWZvcig7dDxyOyl7dmFyIGk9ZVt0KytdO2lmKDU5PT09aSl7dGhpcy5fc3RhdGU9Mix0aGlzLl9zdGFydCgpO2JyZWFrfWlmKGk8NDh8fDU3PGkpcmV0dXJuIHZvaWQodGhpcy5fc3RhdGU9Myk7LTE9PT10aGlzLl9pZCYmKHRoaXMuX2lkPTApLHRoaXMuX2lkPTEwKnRoaXMuX2lkK2ktNDh9Mj09PXRoaXMuX3N0YXRlJiZyLXQ+MCYmdGhpcy5fcHV0KGUsdCxyKX19LGUucHJvdG90eXBlLmVuZD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PSEwKSwwIT09dGhpcy5fc3RhdGUpe2lmKDMhPT10aGlzLl9zdGF0ZSlpZigxPT09dGhpcy5fc3RhdGUmJnRoaXMuX3N0YXJ0KCksdGhpcy5fYWN0aXZlLmxlbmd0aCl7dmFyIHI9ITEsaT10aGlzLl9hY3RpdmUubGVuZ3RoLTEsbj0hMTtpZih0aGlzLl9zdGFjay5wYXVzZWQmJihpPXRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbi0xLHI9dCxuPXRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoLHRoaXMuX3N0YWNrLnBhdXNlZD0hMSksIW4mJiExPT09cil7Zm9yKDtpPj0wJiYhMCE9PShyPXRoaXMuX2FjdGl2ZVtpXS5lbmQoZSkpO2ktLSlpZihyIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fc3RhY2sucGF1c2VkPSEwLHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbj1pLHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoPSExLHI7aS0tfWZvcig7aT49MDtpLS0paWYoKHI9dGhpcy5fYWN0aXZlW2ldLmVuZCghMSkpaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiB0aGlzLl9zdGFjay5wYXVzZWQ9ITAsdGhpcy5fc3RhY2subG9vcFBvc2l0aW9uPWksdGhpcy5fc3RhY2suZmFsbFRocm91Z2g9ITAscn1lbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwiRU5EIixlKTt0aGlzLl9hY3RpdmU9byx0aGlzLl9pZD0tMSx0aGlzLl9zdGF0ZT0wfX0sZX0oKTt0Lk9zY1BhcnNlcj1zO3ZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9oYW5kbGVyPWUsdGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMX1yZXR1cm4gZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExfSxlLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2hpdExpbWl0fHwodGhpcy5fZGF0YSs9KDAsbi51dGYzMlRvU3RyaW5nKShlLHQsciksdGhpcy5fZGF0YS5sZW5ndGg+aS5QQVlMT0FEX0xJTUlUJiYodGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMCkpfSxlLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPSExO2lmKHRoaXMuX2hpdExpbWl0KXI9ITE7ZWxzZSBpZihlJiYocj10aGlzLl9oYW5kbGVyKHRoaXMuX2RhdGEpKWluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gci50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fZGF0YT0iIix0Ll9oaXRMaW1pdD0hMSxlfSkpO3JldHVybiB0aGlzLl9kYXRhPSIiLHRoaXMuX2hpdExpbWl0PSExLHJ9LGV9KCk7dC5Pc2NIYW5kbGVyPWF9LDg3NDI6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5QYXJhbXM9dm9pZCAwO3ZhciByPTIxNDc0ODM2NDcsaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXtpZih2b2lkIDA9PT1lJiYoZT0zMiksdm9pZCAwPT09dCYmKHQ9MzIpLHRoaXMubWF4TGVuZ3RoPWUsdGhpcy5tYXhTdWJQYXJhbXNMZW5ndGg9dCx0PjI1Nil0aHJvdyBuZXcgRXJyb3IoIm1heFN1YlBhcmFtc0xlbmd0aCBtdXN0IG5vdCBiZSBncmVhdGVyIHRoYW4gMjU2Iik7dGhpcy5wYXJhbXM9bmV3IEludDMyQXJyYXkoZSksdGhpcy5sZW5ndGg9MCx0aGlzLl9zdWJQYXJhbXM9bmV3IEludDMyQXJyYXkodCksdGhpcy5fc3ViUGFyYW1zTGVuZ3RoPTAsdGhpcy5fc3ViUGFyYW1zSWR4PW5ldyBVaW50MTZBcnJheShlKSx0aGlzLl9yZWplY3REaWdpdHM9ITEsdGhpcy5fcmVqZWN0U3ViRGlnaXRzPSExLHRoaXMuX2RpZ2l0SXNTdWI9ITF9cmV0dXJuIGUuZnJvbUFycmF5PWZ1bmN0aW9uKHQpe3ZhciByPW5ldyBlO2lmKCF0Lmxlbmd0aClyZXR1cm4gcjtmb3IodmFyIGk9QXJyYXkuaXNBcnJheSh0WzBdKT8xOjA7aTx0Lmxlbmd0aDsrK2kpe3ZhciBuPXRbaV07aWYoQXJyYXkuaXNBcnJheShuKSlmb3IodmFyIG89MDtvPG4ubGVuZ3RoOysrbylyLmFkZFN1YlBhcmFtKG5bb10pO2Vsc2Ugci5hZGRQYXJhbShuKX1yZXR1cm4gcn0sZS5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZSh0aGlzLm1heExlbmd0aCx0aGlzLm1heFN1YlBhcmFtc0xlbmd0aCk7cmV0dXJuIHQucGFyYW1zLnNldCh0aGlzLnBhcmFtcyksdC5sZW5ndGg9dGhpcy5sZW5ndGgsdC5fc3ViUGFyYW1zLnNldCh0aGlzLl9zdWJQYXJhbXMpLHQuX3N1YlBhcmFtc0xlbmd0aD10aGlzLl9zdWJQYXJhbXNMZW5ndGgsdC5fc3ViUGFyYW1zSWR4LnNldCh0aGlzLl9zdWJQYXJhbXNJZHgpLHQuX3JlamVjdERpZ2l0cz10aGlzLl9yZWplY3REaWdpdHMsdC5fcmVqZWN0U3ViRGlnaXRzPXRoaXMuX3JlamVjdFN1YkRpZ2l0cyx0Ll9kaWdpdElzU3ViPXRoaXMuX2RpZ2l0SXNTdWIsdH0sZS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe2Zvcih2YXIgZT1bXSx0PTA7dDx0aGlzLmxlbmd0aDsrK3Qpe2UucHVzaCh0aGlzLnBhcmFtc1t0XSk7dmFyIHI9dGhpcy5fc3ViUGFyYW1zSWR4W3RdPj44LGk9MjU1JnRoaXMuX3N1YlBhcmFtc0lkeFt0XTtpLXI+MCYmZS5wdXNoKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuX3N1YlBhcmFtcyxyLGkpKX1yZXR1cm4gZX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aD0wLHRoaXMuX3N1YlBhcmFtc0xlbmd0aD0wLHRoaXMuX3JlamVjdERpZ2l0cz0hMSx0aGlzLl9yZWplY3RTdWJEaWdpdHM9ITEsdGhpcy5fZGlnaXRJc1N1Yj0hMX0sZS5wcm90b3R5cGUuYWRkUGFyYW09ZnVuY3Rpb24oZSl7aWYodGhpcy5fZGlnaXRJc1N1Yj0hMSx0aGlzLmxlbmd0aD49dGhpcy5tYXhMZW5ndGgpdGhpcy5fcmVqZWN0RGlnaXRzPSEwO2Vsc2V7aWYoZTwtMSl0aHJvdyBuZXcgRXJyb3IoInZhbHVlcyBsZXNzZXIgdGhhbiAtMSBhcmUgbm90IGFsbG93ZWQiKTt0aGlzLl9zdWJQYXJhbXNJZHhbdGhpcy5sZW5ndGhdPXRoaXMuX3N1YlBhcmFtc0xlbmd0aDw8OHx0aGlzLl9zdWJQYXJhbXNMZW5ndGgsdGhpcy5wYXJhbXNbdGhpcy5sZW5ndGgrK109ZT5yP3I6ZX19LGUucHJvdG90eXBlLmFkZFN1YlBhcmFtPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2RpZ2l0SXNTdWI9ITAsdGhpcy5sZW5ndGgpaWYodGhpcy5fcmVqZWN0RGlnaXRzfHx0aGlzLl9zdWJQYXJhbXNMZW5ndGg+PXRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoKXRoaXMuX3JlamVjdFN1YkRpZ2l0cz0hMDtlbHNle2lmKGU8LTEpdGhyb3cgbmV3IEVycm9yKCJ2YWx1ZXMgbGVzc2VyIHRoYW4gLTEgYXJlIG5vdCBhbGxvd2VkIik7dGhpcy5fc3ViUGFyYW1zW3RoaXMuX3N1YlBhcmFtc0xlbmd0aCsrXT1lPnI/cjplLHRoaXMuX3N1YlBhcmFtc0lkeFt0aGlzLmxlbmd0aC0xXSsrfX0sZS5wcm90b3R5cGUuaGFzU3ViUGFyYW1zPWZ1bmN0aW9uKGUpe3JldHVybigyNTUmdGhpcy5fc3ViUGFyYW1zSWR4W2VdKS0odGhpcy5fc3ViUGFyYW1zSWR4W2VdPj44KT4wfSxlLnByb3RvdHlwZS5nZXRTdWJQYXJhbXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3ViUGFyYW1zSWR4W2VdPj44LHI9MjU1JnRoaXMuX3N1YlBhcmFtc0lkeFtlXTtyZXR1cm4gci10PjA/dGhpcy5fc3ViUGFyYW1zLnN1YmFycmF5KHQscik6bnVsbH0sZS5wcm90b3R5cGUuZ2V0U3ViUGFyYW1zQWxsPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXt9LHQ9MDt0PHRoaXMubGVuZ3RoOysrdCl7dmFyIHI9dGhpcy5fc3ViUGFyYW1zSWR4W3RdPj44LGk9MjU1JnRoaXMuX3N1YlBhcmFtc0lkeFt0XTtpLXI+MCYmKGVbdF09dGhpcy5fc3ViUGFyYW1zLnNsaWNlKHIsaSkpfXJldHVybiBlfSxlLnByb3RvdHlwZS5hZGREaWdpdD1mdW5jdGlvbihlKXt2YXIgdDtpZighKHRoaXMuX3JlamVjdERpZ2l0c3x8ISh0PXRoaXMuX2RpZ2l0SXNTdWI/dGhpcy5fc3ViUGFyYW1zTGVuZ3RoOnRoaXMubGVuZ3RoKXx8dGhpcy5fZGlnaXRJc1N1YiYmdGhpcy5fcmVqZWN0U3ViRGlnaXRzKSl7dmFyIGk9dGhpcy5fZGlnaXRJc1N1Yj90aGlzLl9zdWJQYXJhbXM6dGhpcy5wYXJhbXMsbj1pW3QtMV07aVt0LTFdPX5uP01hdGgubWluKDEwKm4rZSxyKTplfX0sZX0oKTt0LlBhcmFtcz1pfSw1NzQxOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQWRkb25NYW5hZ2VyPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9hZGRvbnM9W119cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5fYWRkb25zLmxlbmd0aC0xO2U+PTA7ZS0tKXRoaXMuX2FkZG9uc1tlXS5pbnN0YW5jZS5kaXNwb3NlKCl9LGUucHJvdG90eXBlLmxvYWRBZGRvbj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT17aW5zdGFuY2U6dCxkaXNwb3NlOnQuZGlzcG9zZSxpc0Rpc3Bvc2VkOiExfTt0aGlzLl9hZGRvbnMucHVzaChpKSx0LmRpc3Bvc2U9ZnVuY3Rpb24oKXtyZXR1cm4gci5fd3JhcHBlZEFkZG9uRGlzcG9zZShpKX0sdC5hY3RpdmF0ZShlKX0sZS5wcm90b3R5cGUuX3dyYXBwZWRBZGRvbkRpc3Bvc2U9ZnVuY3Rpb24oZSl7aWYoIWUuaXNEaXNwb3NlZCl7Zm9yKHZhciB0PS0xLHI9MDtyPHRoaXMuX2FkZG9ucy5sZW5ndGg7cisrKWlmKHRoaXMuX2FkZG9uc1tyXT09PWUpe3Q9cjticmVha31pZigtMT09PXQpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgZGlzcG9zZSBhbiBhZGRvbiB0aGF0IGhhcyBub3QgYmVlbiBsb2FkZWQiKTtlLmlzRGlzcG9zZWQ9ITAsZS5kaXNwb3NlLmFwcGx5KGUuaW5zdGFuY2UpLHRoaXMuX2FkZG9ucy5zcGxpY2UodCwxKX19LGV9KCk7dC5BZGRvbk1hbmFnZXI9cn0sODc3MTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyQXBpVmlldz12b2lkIDA7dmFyIGk9cigzNzg1KSxuPXIoNTExKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX2J1ZmZlcj1lLHRoaXMudHlwZT10fXJldHVybiBlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9idWZmZXI9ZSx0aGlzfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImN1cnNvclkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLnl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJjdXJzb3JYIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci54fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmlld3BvcnRZIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci55ZGlzcH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImJhc2VZIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci55YmFzZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIubGluZXMubGVuZ3RofSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldExpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYnVmZmVyLmxpbmVzLmdldChlKTtpZih0KXJldHVybiBuZXcgaS5CdWZmZXJMaW5lQXBpVmlldyh0KX0sZS5wcm90b3R5cGUuZ2V0TnVsbENlbGw9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IG4uQ2VsbERhdGF9LGV9KCk7dC5CdWZmZXJBcGlWaWV3PW99LDM3ODU6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlckxpbmVBcGlWaWV3PXZvaWQgMDt2YXIgaT1yKDUxMSksbj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fbGluZT1lfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzV3JhcHBlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lLmlzV3JhcHBlZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9saW5lLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXRDZWxsPWZ1bmN0aW9uKGUsdCl7aWYoIShlPDB8fGU+PXRoaXMuX2xpbmUubGVuZ3RoKSlyZXR1cm4gdD8odGhpcy5fbGluZS5sb2FkQ2VsbChlLHQpLHQpOnRoaXMuX2xpbmUubG9hZENlbGwoZSxuZXcgaS5DZWxsRGF0YSl9LGUucHJvdG90eXBlLnRyYW5zbGF0ZVRvU3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4gdGhpcy5fbGluZS50cmFuc2xhdGVUb1N0cmluZyhlLHQscil9LGV9KCk7dC5CdWZmZXJMaW5lQXBpVmlldz1ufSw4Mjg1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJOYW1lc3BhY2VBcGk9dm9pZCAwO3ZhciBpPXIoODc3MSksbj1yKDg0NjApLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7dGhpcy5fY29yZT1lLHRoaXMuX29uQnVmZmVyQ2hhbmdlPW5ldyBuLkV2ZW50RW1pdHRlcix0aGlzLl9ub3JtYWw9bmV3IGkuQnVmZmVyQXBpVmlldyh0aGlzLl9jb3JlLmJ1ZmZlcnMubm9ybWFsLCJub3JtYWwiKSx0aGlzLl9hbHRlcm5hdGU9bmV3IGkuQnVmZmVyQXBpVmlldyh0aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0LCJhbHRlcm5hdGUiKSx0aGlzLl9jb3JlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fb25CdWZmZXJDaGFuZ2UuZmlyZSh0LmFjdGl2ZSl9KSl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25CdWZmZXJDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25CdWZmZXJDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhY3RpdmUiLHtnZXQ6ZnVuY3Rpb24oKXtpZih0aGlzLl9jb3JlLmJ1ZmZlcnMuYWN0aXZlPT09dGhpcy5fY29yZS5idWZmZXJzLm5vcm1hbClyZXR1cm4gdGhpcy5ub3JtYWw7aWYodGhpcy5fY29yZS5idWZmZXJzLmFjdGl2ZT09PXRoaXMuX2NvcmUuYnVmZmVycy5hbHQpcmV0dXJuIHRoaXMuYWx0ZXJuYXRlO3Rocm93IG5ldyBFcnJvcigiQWN0aXZlIGJ1ZmZlciBpcyBuZWl0aGVyIG5vcm1hbCBub3IgYWx0ZXJuYXRlIil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJub3JtYWwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9ybWFsLmluaXQodGhpcy5fY29yZS5idWZmZXJzLm5vcm1hbCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhbHRlcm5hdGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWx0ZXJuYXRlLmluaXQodGhpcy5fY29yZS5idWZmZXJzLmFsdCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZX0oKTt0LkJ1ZmZlck5hbWVzcGFjZUFwaT1vfSw3OTc1OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUGFyc2VyQXBpPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29yZT1lfXJldHVybiBlLnByb3RvdHlwZS5yZWdpc3RlckNzaUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckNzaUhhbmRsZXIoZSwoZnVuY3Rpb24oZSl7cmV0dXJuIHQoZS50b0FycmF5KCkpfSkpfSxlLnByb3RvdHlwZS5hZGRDc2lIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucmVnaXN0ZXJDc2lIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLnJlZ2lzdGVyRGNzSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyRGNzSGFuZGxlcihlLChmdW5jdGlvbihlLHIpe3JldHVybiB0KGUsci50b0FycmF5KCkpfSkpfSxlLnByb3RvdHlwZS5hZGREY3NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucmVnaXN0ZXJEY3NIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLnJlZ2lzdGVyRXNjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfSxlLnByb3RvdHlwZS5hZGRFc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9LGUucHJvdG90eXBlLnJlZ2lzdGVyT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb3JlLnJlZ2lzdGVyT3NjSGFuZGxlcihlLHQpfSxlLnByb3RvdHlwZS5hZGRPc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMucmVnaXN0ZXJPc2NIYW5kbGVyKGUsdCl9LGV9KCk7dC5QYXJzZXJBcGk9cn0sNzA5MDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlVuaWNvZGVBcGk9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9jb3JlPWV9cmV0dXJuIGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UucmVnaXN0ZXIoZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmVyc2lvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS51bmljb2RlU2VydmljZS52ZXJzaW9uc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZVZlcnNpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS51bmljb2RlU2VydmljZS5hY3RpdmVWZXJzaW9ufSxzZXQ6ZnVuY3Rpb24oZSl7dGhpcy5fY29yZS51bmljb2RlU2VydmljZS5hY3RpdmVWZXJzaW9uPWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZX0oKTt0LlVuaWNvZGVBcGk9cn0sNzQ0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlclNlcnZpY2U9dC5NSU5JTVVNX1JPV1M9dC5NSU5JTVVNX0NPTFM9dm9pZCAwO3ZhciBhPXIoMjU4NSksYz1yKDUyOTUpLGw9cig4NDYwKSxoPXIoODQ0KTt0Lk1JTklNVU1fQ09MUz0yLHQuTUlOSU1VTV9ST1dTPTE7dmFyIHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gcihyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuX29wdGlvbnNTZXJ2aWNlPXIsaS5pc1VzZXJTY3JvbGxpbmc9ITEsaS5fb25SZXNpemU9bmV3IGwuRXZlbnRFbWl0dGVyLGkuX29uU2Nyb2xsPW5ldyBsLkV2ZW50RW1pdHRlcixpLmNvbHM9TWF0aC5tYXgoci5yYXdPcHRpb25zLmNvbHN8fDAsdC5NSU5JTVVNX0NPTFMpLGkucm93cz1NYXRoLm1heChyLnJhd09wdGlvbnMucm93c3x8MCx0Lk1JTklNVU1fUk9XUyksaS5idWZmZXJzPW5ldyBjLkJ1ZmZlclNldChyLGkpLGl9cmV0dXJuIG4ocixlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsIm9uUmVzaXplIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVzaXplLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSwib25TY3JvbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TY3JvbGwuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLCJidWZmZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXJzLmFjdGl2ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxyLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuYnVmZmVycy5kaXNwb3NlKCl9LHIucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuY29scz1lLHRoaXMucm93cz10LHRoaXMuYnVmZmVycy5yZXNpemUoZSx0KSx0aGlzLmJ1ZmZlcnMuc2V0dXBUYWJTdG9wcyh0aGlzLmNvbHMpLHRoaXMuX29uUmVzaXplLmZpcmUoe2NvbHM6ZSxyb3dzOnR9KX0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlcnMucmVzZXQoKSx0aGlzLmlzVXNlclNjcm9sbGluZz0hMX0sci5wcm90b3R5cGUuc2Nyb2xsPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9ITEpO3ZhciByLGk9dGhpcy5idWZmZXI7KHI9dGhpcy5fY2FjaGVkQmxhbmtMaW5lKSYmci5sZW5ndGg9PT10aGlzLmNvbHMmJnIuZ2V0RmcoMCk9PT1lLmZnJiZyLmdldEJnKDApPT09ZS5iZ3x8KHI9aS5nZXRCbGFua0xpbmUoZSx0KSx0aGlzLl9jYWNoZWRCbGFua0xpbmU9ciksci5pc1dyYXBwZWQ9dDt2YXIgbj1pLnliYXNlK2kuc2Nyb2xsVG9wLG89aS55YmFzZStpLnNjcm9sbEJvdHRvbTtpZigwPT09aS5zY3JvbGxUb3Ape3ZhciBzPWkubGluZXMuaXNGdWxsO289PT1pLmxpbmVzLmxlbmd0aC0xP3M/aS5saW5lcy5yZWN5Y2xlKCkuY29weUZyb20ocik6aS5saW5lcy5wdXNoKHIuY2xvbmUoKSk6aS5saW5lcy5zcGxpY2UobysxLDAsci5jbG9uZSgpKSxzP3RoaXMuaXNVc2VyU2Nyb2xsaW5nJiYoaS55ZGlzcD1NYXRoLm1heChpLnlkaXNwLTEsMCkpOihpLnliYXNlKyssdGhpcy5pc1VzZXJTY3JvbGxpbmd8fGkueWRpc3ArKyl9ZWxzZXt2YXIgYT1vLW4rMTtpLmxpbmVzLnNoaWZ0RWxlbWVudHMobisxLGEtMSwtMSksaS5saW5lcy5zZXQobyxyLmNsb25lKCkpfXRoaXMuaXNVc2VyU2Nyb2xsaW5nfHwoaS55ZGlzcD1pLnliYXNlKSx0aGlzLl9vblNjcm9sbC5maXJlKGkueWRpc3ApfSxyLnByb3RvdHlwZS5zY3JvbGxMaW5lcz1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcy5idWZmZXI7aWYoZTwwKXtpZigwPT09aS55ZGlzcClyZXR1cm47dGhpcy5pc1VzZXJTY3JvbGxpbmc9ITB9ZWxzZSBlK2kueWRpc3A+PWkueWJhc2UmJih0aGlzLmlzVXNlclNjcm9sbGluZz0hMSk7dmFyIG49aS55ZGlzcDtpLnlkaXNwPU1hdGgubWF4KE1hdGgubWluKGkueWRpc3ArZSxpLnliYXNlKSwwKSxuIT09aS55ZGlzcCYmKHR8fHRoaXMuX29uU2Nyb2xsLmZpcmUoaS55ZGlzcCkpfSxyLnByb3RvdHlwZS5zY3JvbGxQYWdlcz1mdW5jdGlvbihlKXt0aGlzLnNjcm9sbExpbmVzKGUqKHRoaXMucm93cy0xKSl9LHIucHJvdG90eXBlLnNjcm9sbFRvVG9wPWZ1bmN0aW9uKCl7dGhpcy5zY3JvbGxMaW5lcygtdGhpcy5idWZmZXIueWRpc3ApfSxyLnByb3RvdHlwZS5zY3JvbGxUb0JvdHRvbT1mdW5jdGlvbigpe3RoaXMuc2Nyb2xsTGluZXModGhpcy5idWZmZXIueWJhc2UtdGhpcy5idWZmZXIueWRpc3ApfSxyLnByb3RvdHlwZS5zY3JvbGxUb0xpbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS10aGlzLmJ1ZmZlci55ZGlzcDswIT09dCYmdGhpcy5zY3JvbGxMaW5lcyh0KX0sbyhbcygwLGEuSU9wdGlvbnNTZXJ2aWNlKV0scil9KGguRGlzcG9zYWJsZSk7dC5CdWZmZXJTZXJ2aWNlPXV9LDc5OTQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5DaGFyc2V0U2VydmljZT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5nbGV2ZWw9MCx0aGlzLl9jaGFyc2V0cz1bXX1yZXR1cm4gZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmNoYXJzZXQ9dm9pZCAwLHRoaXMuX2NoYXJzZXRzPVtdLHRoaXMuZ2xldmVsPTB9LGUucHJvdG90eXBlLnNldGdMZXZlbD1mdW5jdGlvbihlKXt0aGlzLmdsZXZlbD1lLHRoaXMuY2hhcnNldD10aGlzLl9jaGFyc2V0c1tlXX0sZS5wcm90b3R5cGUuc2V0Z0NoYXJzZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9jaGFyc2V0c1tlXT10LHRoaXMuZ2xldmVsPT09ZSYmKHRoaXMuY2hhcnNldD10KX0sZX0oKTt0LkNoYXJzZXRTZXJ2aWNlPXJ9LDE3NTM6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db3JlTW91c2VTZXJ2aWNlPXZvaWQgMDt2YXIgcz1yKDI1ODUpLGE9cig4NDYwKSxjPXtOT05FOntldmVudHM6MCxyZXN0cmljdDpmdW5jdGlvbigpe3JldHVybiExfX0sWDEwOntldmVudHM6MSxyZXN0cmljdDpmdW5jdGlvbihlKXtyZXR1cm4gNCE9PWUuYnV0dG9uJiYxPT09ZS5hY3Rpb24mJihlLmN0cmw9ITEsZS5hbHQ9ITEsZS5zaGlmdD0hMSwhMCl9fSxWVDIwMDp7ZXZlbnRzOjE5LHJlc3RyaWN0OmZ1bmN0aW9uKGUpe3JldHVybiAzMiE9PWUuYWN0aW9ufX0sRFJBRzp7ZXZlbnRzOjIzLHJlc3RyaWN0OmZ1bmN0aW9uKGUpe3JldHVybiAzMiE9PWUuYWN0aW9ufHwzIT09ZS5idXR0b259fSxBTlk6e2V2ZW50czozMSxyZXN0cmljdDpmdW5jdGlvbihlKXtyZXR1cm4hMH19fTtmdW5jdGlvbiBsKGUsdCl7dmFyIHI9KGUuY3RybD8xNjowKXwoZS5zaGlmdD80OjApfChlLmFsdD84OjApO3JldHVybiA0PT09ZS5idXR0b24/KHJ8PTY0LHJ8PWUuYWN0aW9uKToocnw9MyZlLmJ1dHRvbiw0JmUuYnV0dG9uJiYocnw9NjQpLDgmZS5idXR0b24mJihyfD0xMjgpLDMyPT09ZS5hY3Rpb24/cnw9MzI6MCE9PWUuYWN0aW9ufHx0fHwocnw9MykpLHJ9dmFyIGg9U3RyaW5nLmZyb21DaGFyQ29kZSx1PXtERUZBVUxUOmZ1bmN0aW9uKGUpe3ZhciB0PVtsKGUsITEpKzMyLGUuY29sKzMyLGUucm93KzMyXTtyZXR1cm4gdFswXT4yNTV8fHRbMV0+MjU1fHx0WzJdPjI1NT8iIjoiG1tNIitoKHRbMF0pK2godFsxXSkraCh0WzJdKX0sU0dSOmZ1bmN0aW9uKGUpe3ZhciB0PTA9PT1lLmFjdGlvbiYmNCE9PWUuYnV0dG9uPyJtIjoiTSI7cmV0dXJuIhtbPCIrbChlLCEwKSsiOyIrZS5jb2wrIjsiK2Uucm93K3R9fSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZhciByLGksbixzO3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLl9jb3JlU2VydmljZT10LHRoaXMuX3Byb3RvY29scz17fSx0aGlzLl9lbmNvZGluZ3M9e30sdGhpcy5fYWN0aXZlUHJvdG9jb2w9IiIsdGhpcy5fYWN0aXZlRW5jb2Rpbmc9IiIsdGhpcy5fb25Qcm90b2NvbENoYW5nZT1uZXcgYS5FdmVudEVtaXR0ZXIsdGhpcy5fbGFzdEV2ZW50PW51bGw7dHJ5e2Zvcih2YXIgbD1vKE9iamVjdC5rZXlzKGMpKSxoPWwubmV4dCgpOyFoLmRvbmU7aD1sLm5leHQoKSl7dmFyIGY9aC52YWx1ZTt0aGlzLmFkZFByb3RvY29sKGYsY1tmXSl9fWNhdGNoKGUpe3I9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2gmJiFoLmRvbmUmJihpPWwucmV0dXJuKSYmaS5jYWxsKGwpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX10cnl7Zm9yKHZhciBfPW8oT2JqZWN0LmtleXModSkpLGQ9Xy5uZXh0KCk7IWQuZG9uZTtkPV8ubmV4dCgpKXt2YXIgcD1kLnZhbHVlO3RoaXMuYWRkRW5jb2RpbmcocCx1W3BdKX19Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZCYmIWQuZG9uZSYmKHM9Xy5yZXR1cm4pJiZzLmNhbGwoXyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXRoaXMucmVzZXQoKX1yZXR1cm4gZS5wcm90b3R5cGUuYWRkUHJvdG9jb2w9ZnVuY3Rpb24oZSx0KXt0aGlzLl9wcm90b2NvbHNbZV09dH0sZS5wcm90b3R5cGUuYWRkRW5jb2Rpbmc9ZnVuY3Rpb24oZSx0KXt0aGlzLl9lbmNvZGluZ3NbZV09dH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhY3RpdmVQcm90b2NvbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVQcm90b2NvbH0sc2V0OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9wcm90b2NvbHNbZV0pdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIHByb3RvY29sICInK2UrJyInKTt0aGlzLl9hY3RpdmVQcm90b2NvbD1lLHRoaXMuX29uUHJvdG9jb2xDaGFuZ2UuZmlyZSh0aGlzLl9wcm90b2NvbHNbZV0uZXZlbnRzKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFyZU1vdXNlRXZlbnRzQWN0aXZlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLl9wcm90b2NvbHNbdGhpcy5fYWN0aXZlUHJvdG9jb2xdLmV2ZW50c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZUVuY29kaW5nIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZUVuY29kaW5nfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2VuY29kaW5nc1tlXSl0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gZW5jb2RpbmcgIicrZSsnIicpO3RoaXMuX2FjdGl2ZUVuY29kaW5nPWV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmFjdGl2ZVByb3RvY29sPSJOT05FIix0aGlzLmFjdGl2ZUVuY29kaW5nPSJERUZBVUxUIix0aGlzLl9sYXN0RXZlbnQ9bnVsbH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblByb3RvY29sQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUHJvdG9jb2xDaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUudHJpZ2dlck1vdXNlRXZlbnQ9ZnVuY3Rpb24oZSl7aWYoZS5jb2w8MHx8ZS5jb2w+PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29sc3x8ZS5yb3c8MHx8ZS5yb3c+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cylyZXR1cm4hMTtpZig0PT09ZS5idXR0b24mJjMyPT09ZS5hY3Rpb24pcmV0dXJuITE7aWYoMz09PWUuYnV0dG9uJiYzMiE9PWUuYWN0aW9uKXJldHVybiExO2lmKDQhPT1lLmJ1dHRvbiYmKDI9PT1lLmFjdGlvbnx8Mz09PWUuYWN0aW9uKSlyZXR1cm4hMTtpZihlLmNvbCsrLGUucm93KyssMzI9PT1lLmFjdGlvbiYmdGhpcy5fbGFzdEV2ZW50JiZ0aGlzLl9jb21wYXJlRXZlbnRzKHRoaXMuX2xhc3RFdmVudCxlKSlyZXR1cm4hMTtpZighdGhpcy5fcHJvdG9jb2xzW3RoaXMuX2FjdGl2ZVByb3RvY29sXS5yZXN0cmljdChlKSlyZXR1cm4hMTt2YXIgdD10aGlzLl9lbmNvZGluZ3NbdGhpcy5fYWN0aXZlRW5jb2RpbmddKGUpO3JldHVybiB0JiYoIkRFRkFVTFQiPT09dGhpcy5fYWN0aXZlRW5jb2Rpbmc/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckJpbmFyeUV2ZW50KHQpOnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodCwhMCkpLHRoaXMuX2xhc3RFdmVudD1lLCEwfSxlLnByb3RvdHlwZS5leHBsYWluRXZlbnRzPWZ1bmN0aW9uKGUpe3JldHVybntkb3duOiEhKDEmZSksdXA6ISEoMiZlKSxkcmFnOiEhKDQmZSksbW92ZTohISg4JmUpLHdoZWVsOiEhKDE2JmUpfX0sZS5wcm90b3R5cGUuX2NvbXBhcmVFdmVudHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5jb2w9PT10LmNvbCYmZS5yb3c9PT10LnJvdyYmZS5idXR0b249PT10LmJ1dHRvbiYmZS5hY3Rpb249PT10LmFjdGlvbiYmZS5jdHJsPT09dC5jdHJsJiZlLmFsdD09PXQuYWx0JiZlLnNoaWZ0PT09dC5zaGlmdH0saShbbigwLHMuSUJ1ZmZlclNlcnZpY2UpLG4oMSxzLklDb3JlU2VydmljZSldLGUpfSgpO3QuQ29yZU1vdXNlU2VydmljZT1mfSw2OTc1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvcmVTZXJ2aWNlPXZvaWQgMDt2YXIgYT1yKDI1ODUpLGM9cig4NDYwKSxsPXIoMTQzOSksaD1yKDg0NCksdT1PYmplY3QuZnJlZXplKHtpbnNlcnRNb2RlOiExfSksZj1PYmplY3QuZnJlZXplKHthcHBsaWNhdGlvbkN1cnNvcktleXM6ITEsYXBwbGljYXRpb25LZXlwYWQ6ITEsYnJhY2tldGVkUGFzdGVNb2RlOiExLG9yaWdpbjohMSxyZXZlcnNlV3JhcGFyb3VuZDohMSxzZW5kRm9jdXM6ITEsd3JhcGFyb3VuZDohMH0pLF89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuKXt2YXIgbz1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uX2J1ZmZlclNlcnZpY2U9cixvLl9sb2dTZXJ2aWNlPWksby5fb3B0aW9uc1NlcnZpY2U9bixvLmlzQ3Vyc29ySW5pdGlhbGl6ZWQ9ITEsby5pc0N1cnNvckhpZGRlbj0hMSxvLl9vbkRhdGE9by5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLG8uX29uVXNlcklucHV0PW8ucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxvLl9vbkJpbmFyeT1vLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksby5fc2Nyb2xsVG9Cb3R0b209dCxvLnJlZ2lzdGVyKHtkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIG8uX3Njcm9sbFRvQm90dG9tPXZvaWQgMH19KSxvLm1vZGVzPSgwLGwuY2xvbmUpKHUpLG8uZGVjUHJpdmF0ZU1vZGVzPSgwLGwuY2xvbmUpKGYpLG99cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRGF0YSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkRhdGEuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblVzZXJJbnB1dCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblVzZXJJbnB1dC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQmluYXJ5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQmluYXJ5LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5tb2Rlcz0oMCxsLmNsb25lKSh1KSx0aGlzLmRlY1ByaXZhdGVNb2Rlcz0oMCxsLmNsb25lKShmKX0sdC5wcm90b3R5cGUudHJpZ2dlckRhdGFFdmVudD1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PSExKSwhdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW4pe3ZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyO3IueWJhc2UhPT1yLnlkaXNwJiZ0aGlzLl9zY3JvbGxUb0JvdHRvbSgpLHQmJnRoaXMuX29uVXNlcklucHV0LmZpcmUoKSx0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdzZW5kaW5nIGRhdGEgIicrZSsnIicsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuc3BsaXQoIiIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhckNvZGVBdCgwKX0pKX0pKSx0aGlzLl9vbkRhdGEuZmlyZShlKX19LHQucHJvdG90eXBlLnRyaWdnZXJCaW5hcnlFdmVudD1mdW5jdGlvbihlKXt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRpc2FibGVTdGRpbnx8KHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoJ3NlbmRpbmcgYmluYXJ5ICInK2UrJyInLChmdW5jdGlvbigpe3JldHVybiBlLnNwbGl0KCIiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJDb2RlQXQoMCl9KSl9KSksdGhpcy5fb25CaW5hcnkuZmlyZShlKSl9LG8oW3MoMSxhLklCdWZmZXJTZXJ2aWNlKSxzKDIsYS5JTG9nU2VydmljZSkscygzLGEuSU9wdGlvbnNTZXJ2aWNlKV0sdCl9KGguRGlzcG9zYWJsZSk7dC5Db3JlU2VydmljZT1ffSw5MDc0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2dlbmVyYXRvcnx8ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG4sbyxzPXtsYWJlbDowLHNlbnQ6ZnVuY3Rpb24oKXtpZigxJm5bMF0pdGhyb3cgblsxXTtyZXR1cm4gblsxXX0sdHJ5czpbXSxvcHM6W119O3JldHVybiBvPXtuZXh0OmEoMCksdGhyb3c6YSgxKSxyZXR1cm46YSgyKX0sImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmKG9bU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSksbztmdW5jdGlvbiBhKG8pe3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24obyl7aWYocil0aHJvdyBuZXcgVHlwZUVycm9yKCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuIik7Zm9yKDtzOyl0cnl7aWYocj0xLGkmJihuPTImb1swXT9pLnJldHVybjpvWzBdP2kudGhyb3d8fCgobj1pLnJldHVybikmJm4uY2FsbChpKSwwKTppLm5leHQpJiYhKG49bi5jYWxsKGksb1sxXSkpLmRvbmUpcmV0dXJuIG47c3dpdGNoKGk9MCxuJiYobz1bMiZvWzBdLG4udmFsdWVdKSxvWzBdKXtjYXNlIDA6Y2FzZSAxOm49bzticmVhaztjYXNlIDQ6cmV0dXJuIHMubGFiZWwrKyx7dmFsdWU6b1sxXSxkb25lOiExfTtjYXNlIDU6cy5sYWJlbCsrLGk9b1sxXSxvPVswXTtjb250aW51ZTtjYXNlIDc6bz1zLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKChuPShuPXMudHJ5cykubGVuZ3RoPjAmJm5bbi5sZW5ndGgtMV0pfHw2IT09b1swXSYmMiE9PW9bMF0pKXtzPTA7Y29udGludWV9aWYoMz09PW9bMF0mJighbnx8b1sxXT5uWzBdJiZvWzFdPG5bM10pKXtzLmxhYmVsPW9bMV07YnJlYWt9aWYoNj09PW9bMF0mJnMubGFiZWw8blsxXSl7cy5sYWJlbD1uWzFdLG49bzticmVha31pZihuJiZzLmxhYmVsPG5bMl0pe3MubGFiZWw9blsyXSxzLm9wcy5wdXNoKG8pO2JyZWFrfW5bMl0mJnMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZX1vPXQuY2FsbChlLHMpfWNhdGNoKGUpe289WzYsZV0saT0wfWZpbmFsbHl7cj1uPTB9aWYoNSZvWzBdKXRocm93IG9bMV07cmV0dXJue3ZhbHVlOm9bMF0/b1sxXTp2b2lkIDAsZG9uZTohMH19KFtvLGFdKX19fSxzPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5EZWNvcmF0aW9uU2VydmljZT12b2lkIDA7dmFyIGE9cig4MDU1KSxjPXIoODQ2MCksbD1yKDg0NCksaD1yKDYxMDYpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gdC5fZGVjb3JhdGlvbnM9bmV3IGguU29ydGVkTGlzdCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUubWFya2VyLmxpbmV9KSksdC5fb25EZWNvcmF0aW9uUmVnaXN0ZXJlZD10LnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksdC5fb25EZWNvcmF0aW9uUmVtb3ZlZD10LnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksdH1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EZWNvcmF0aW9uUmVnaXN0ZXJlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkRlY29yYXRpb25SZWdpc3RlcmVkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25EZWNvcmF0aW9uUmVtb3ZlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkRlY29yYXRpb25SZW1vdmVkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiZGVjb3JhdGlvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGVjb3JhdGlvbnMudmFsdWVzKCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVnaXN0ZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUubWFya2VyLmlzRGlzcG9zZWQpe3ZhciByPW5ldyBmKGUpO2lmKHIpe3ZhciBpPXIubWFya2VyLm9uRGlzcG9zZSgoZnVuY3Rpb24oKXtyZXR1cm4gci5kaXNwb3NlKCl9KSk7ci5vbkRpc3Bvc2UoKGZ1bmN0aW9uKCl7ciYmKHQuX2RlY29yYXRpb25zLmRlbGV0ZShyKSYmdC5fb25EZWNvcmF0aW9uUmVtb3ZlZC5maXJlKHIpLGkuZGlzcG9zZSgpKX0pKSx0aGlzLl9kZWNvcmF0aW9ucy5pbnNlcnQociksdGhpcy5fb25EZWNvcmF0aW9uUmVnaXN0ZXJlZC5maXJlKHIpfXJldHVybiByfX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgZSx0O3RyeXtmb3IodmFyIHI9cyh0aGlzLl9kZWNvcmF0aW9ucy52YWx1ZXMoKSksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpaS52YWx1ZS5kaXNwb3NlKCl9Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMuX2RlY29yYXRpb25zLmNsZWFyKCl9LHQucHJvdG90eXBlLmdldERlY29yYXRpb25zQXRMaW5lPWZ1bmN0aW9uKGUpe3JldHVybiBvKHRoaXMsKGZ1bmN0aW9uKHQpe3JldHVyblsyLHRoaXMuX2RlY29yYXRpb25zLmdldEtleUl0ZXJhdG9yKGUpXX0pKX0sdC5wcm90b3R5cGUuZ2V0RGVjb3JhdGlvbnNBdENlbGw9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG4sYSxjLGwsaCx1LGYsXyxkLHA7cmV0dXJuIG8odGhpcywoZnVuY3Rpb24obyl7c3dpdGNoKG8ubGFiZWwpe2Nhc2UgMDppPTAsbj0wLG8ubGFiZWw9MTtjYXNlIDE6by50cnlzLnB1c2goWzEsNiw3LDhdKSxhPXModGhpcy5fZGVjb3JhdGlvbnMuZ2V0S2V5SXRlcmF0b3IodCkpLGM9YS5uZXh0KCksby5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gYy5kb25lP1szLDVdOihsPWMudmFsdWUsaT1udWxsIT09KF89bC5vcHRpb25zLngpJiZ2b2lkIDAhPT1fP186MCxuPWkrKG51bGwhPT0oZD1sLm9wdGlvbnMud2lkdGgpJiZ2b2lkIDAhPT1kP2Q6MSksIShlPj1pJiZlPG4pfHxyJiYobnVsbCE9PShwPWwub3B0aW9ucy5sYXllcikmJnZvaWQgMCE9PXA/cDoiYm90dG9tIikhPT1yP1szLDRdOls0LGxdKTtjYXNlIDM6by5zZW50KCksby5sYWJlbD00O2Nhc2UgNDpyZXR1cm4gYz1hLm5leHQoKSxbMywyXTtjYXNlIDU6cmV0dXJuWzMsOF07Y2FzZSA2OnJldHVybiBoPW8uc2VudCgpLHU9e2Vycm9yOmh9LFszLDhdO2Nhc2UgNzp0cnl7YyYmIWMuZG9uZSYmKGY9YS5yZXR1cm4pJiZmLmNhbGwoYSl9ZmluYWxseXtpZih1KXRocm93IHUuZXJyb3J9cmV0dXJuWzddO2Nhc2UgODpyZXR1cm5bMl19fSkpfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPXModGhpcy5fZGVjb3JhdGlvbnMudmFsdWVzKCkpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKXt2YXIgbj1pLnZhbHVlO3RoaXMuX29uRGVjb3JhdGlvblJlbW92ZWQuZmlyZShuKX19Y2F0Y2godCl7ZT17ZXJyb3I6dH19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHQ9ci5yZXR1cm4pJiZ0LmNhbGwocil9ZmluYWxseXtpZihlKXRocm93IGUuZXJyb3J9fXRoaXMucmVzZXQoKX0sdH0obC5EaXNwb3NhYmxlKTt0LkRlY29yYXRpb25TZXJ2aWNlPXU7dmFyIGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIub3B0aW9ucz10LHIuaXNEaXNwb3NlZD0hMSxyLm9uUmVuZGVyRW1pdHRlcj1yLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksci5vblJlbmRlcj1yLm9uUmVuZGVyRW1pdHRlci5ldmVudCxyLl9vbkRpc3Bvc2U9ci5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLHIub25EaXNwb3NlPXIuX29uRGlzcG9zZS5ldmVudCxyLl9jYWNoZWRCZz1udWxsLHIuX2NhY2hlZEZnPW51bGwsci5tYXJrZXI9dC5tYXJrZXIsci5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zJiYhci5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uJiYoci5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uPSJmdWxsIikscn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYmFja2dyb3VuZENvbG9yUkdCIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9jYWNoZWRCZyYmKHRoaXMub3B0aW9ucy5iYWNrZ3JvdW5kQ29sb3I/dGhpcy5fY2FjaGVkQmc9YS5jc3MudG9Db2xvcih0aGlzLm9wdGlvbnMuYmFja2dyb3VuZENvbG9yKTp0aGlzLl9jYWNoZWRCZz12b2lkIDApLHRoaXMuX2NhY2hlZEJnfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiZm9yZWdyb3VuZENvbG9yUkdCIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLl9jYWNoZWRGZyYmKHRoaXMub3B0aW9ucy5mb3JlZ3JvdW5kQ29sb3I/dGhpcy5fY2FjaGVkRmc9YS5jc3MudG9Db2xvcih0aGlzLm9wdGlvbnMuZm9yZWdyb3VuZENvbG9yKTp0aGlzLl9jYWNoZWRGZz12b2lkIDApLHRoaXMuX2NhY2hlZEZnfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9pc0Rpc3Bvc2VkfHwodGhpcy5faXNEaXNwb3NlZD0hMCx0aGlzLl9vbkRpc3Bvc2UuZmlyZSgpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSl9LHR9KGwuRGlzcG9zYWJsZSl9LDM3MzA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5EaXJ0eVJvd1NlcnZpY2U9dm9pZCAwO3ZhciBvPXIoMjU4NSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuY2xlYXJSYW5nZSgpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInN0YXJ0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXJ0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZW5kIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5jbGVhclJhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fc3RhcnQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSx0aGlzLl9lbmQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueX0sZS5wcm90b3R5cGUubWFya0RpcnR5PWZ1bmN0aW9uKGUpe2U8dGhpcy5fc3RhcnQ/dGhpcy5fc3RhcnQ9ZTplPnRoaXMuX2VuZCYmKHRoaXMuX2VuZD1lKX0sZS5wcm90b3R5cGUubWFya1JhbmdlRGlydHk9ZnVuY3Rpb24oZSx0KXtpZihlPnQpe3ZhciByPWU7ZT10LHQ9cn1lPHRoaXMuX3N0YXJ0JiYodGhpcy5fc3RhcnQ9ZSksdD50aGlzLl9lbmQmJih0aGlzLl9lbmQ9dCl9LGUucHJvdG90eXBlLm1hcmtBbGxEaXJ0eT1mdW5jdGlvbigpe3RoaXMubWFya1JhbmdlRGlydHkoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSl9LGkoW24oMCxvLklCdWZmZXJTZXJ2aWNlKV0sZSl9KCk7dC5EaXJ0eVJvd1NlcnZpY2U9c30sNDM0ODpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9LG49dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfSxvPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24oZSx0LHIpe2lmKHJ8fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaSxuPTAsbz10Lmxlbmd0aDtuPG87bisrKSFpJiZuIGluIHR8fChpfHwoaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAsbikpLGlbbl09dFtuXSk7cmV0dXJuIGUuY29uY2F0KGl8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuSW5zdGFudGlhdGlvblNlcnZpY2U9dC5TZXJ2aWNlQ29sbGVjdGlvbj12b2lkIDA7dmFyIHM9cigyNTg1KSxhPXIoODM0MyksYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtmb3IodmFyIGUsdCxyPVtdLG89MDtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKXJbb109YXJndW1lbnRzW29dO3RoaXMuX2VudHJpZXM9bmV3IE1hcDt0cnl7Zm9yKHZhciBzPWkociksYT1zLm5leHQoKTshYS5kb25lO2E9cy5uZXh0KCkpe3ZhciBjPW4oYS52YWx1ZSwyKSxsPWNbMF0saD1jWzFdO3RoaXMuc2V0KGwsaCl9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2EmJiFhLmRvbmUmJih0PXMucmV0dXJuKSYmdC5jYWxsKHMpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19cmV0dXJuIGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2VudHJpZXMuZ2V0KGUpO3JldHVybiB0aGlzLl9lbnRyaWVzLnNldChlLHQpLHJ9LGUucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oZSl7dGhpcy5fZW50cmllcy5mb3JFYWNoKChmdW5jdGlvbih0LHIpe3JldHVybiBlKHIsdCl9KSl9LGUucHJvdG90eXBlLmhhcz1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW50cmllcy5oYXMoZSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZW50cmllcy5nZXQoZSl9LGV9KCk7dC5TZXJ2aWNlQ29sbGVjdGlvbj1jO3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3NlcnZpY2VzPW5ldyBjLHRoaXMuX3NlcnZpY2VzLnNldChzLklJbnN0YW50aWF0aW9uU2VydmljZSx0aGlzKX1yZXR1cm4gZS5wcm90b3R5cGUuc2V0U2VydmljZT1mdW5jdGlvbihlLHQpe3RoaXMuX3NlcnZpY2VzLnNldChlLHQpfSxlLnByb3RvdHlwZS5nZXRTZXJ2aWNlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXJ2aWNlcy5nZXQoZSl9LGUucHJvdG90eXBlLmNyZWF0ZUluc3RhbmNlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyLHM9W10sYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspc1tjLTFdPWFyZ3VtZW50c1tjXTt2YXIgbD0oMCxhLmdldFNlcnZpY2VEZXBlbmRlbmNpZXMpKGUpLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuaW5kZXgtdC5pbmRleH0pKSxoPVtdO3RyeXtmb3IodmFyIHU9aShsKSxmPXUubmV4dCgpOyFmLmRvbmU7Zj11Lm5leHQoKSl7dmFyIF89Zi52YWx1ZSxkPXRoaXMuX3NlcnZpY2VzLmdldChfLmlkKTtpZighZCl0aHJvdyBuZXcgRXJyb3IoIltjcmVhdGVJbnN0YW5jZV0gIitlLm5hbWUrIiBkZXBlbmRzIG9uIFVOS05PV04gc2VydmljZSAiK18uaWQrIi4iKTtoLnB1c2goZCl9fWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2YmJiFmLmRvbmUmJihyPXUucmV0dXJuKSYmci5jYWxsKHUpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX12YXIgcD1sLmxlbmd0aD4wP2xbMF0uaW5kZXg6cy5sZW5ndGg7aWYocy5sZW5ndGghPT1wKXRocm93IG5ldyBFcnJvcigiW2NyZWF0ZUluc3RhbmNlXSBGaXJzdCBzZXJ2aWNlIGRlcGVuZGVuY3kgb2YgIitlLm5hbWUrIiBhdCBwb3NpdGlvbiAiKyhwKzEpKyIgY29uZmxpY3RzIHdpdGggIitzLmxlbmd0aCsiIHN0YXRpYyBhcmd1bWVudHMiKTtyZXR1cm4gbmV3KGUuYmluZC5hcHBseShlLG8oW3ZvaWQgMF0sbihvKG8oW10sbihzKSwhMSksbihoKSwhMSkpLCExKSkpfSxlfSgpO3QuSW5zdGFudGlhdGlvblNlcnZpY2U9bH0sNzg2NjpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LG89dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfSxzPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24oZSx0LHIpe2lmKHJ8fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaSxuPTAsbz10Lmxlbmd0aDtuPG87bisrKSFpJiZuIGluIHR8fChpfHwoaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAsbikpLGlbbl09dFtuXSk7cmV0dXJuIGUuY29uY2F0KGl8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTG9nU2VydmljZT12b2lkIDA7dmFyIGE9cigyNTg1KSxjPXtkZWJ1ZzphLkxvZ0xldmVsRW51bS5ERUJVRyxpbmZvOmEuTG9nTGV2ZWxFbnVtLklORk8sd2FybjphLkxvZ0xldmVsRW51bS5XQVJOLGVycm9yOmEuTG9nTGV2ZWxFbnVtLkVSUk9SLG9mZjphLkxvZ0xldmVsRW51bS5PRkZ9LGw9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3ZhciB0PXRoaXM7dGhpcy5fb3B0aW9uc1NlcnZpY2U9ZSx0aGlzLmxvZ0xldmVsPWEuTG9nTGV2ZWxFbnVtLk9GRix0aGlzLl91cGRhdGVMb2dMZXZlbCgpLHRoaXMuX29wdGlvbnNTZXJ2aWNlLm9uT3B0aW9uQ2hhbmdlKChmdW5jdGlvbihlKXsibG9nTGV2ZWwiPT09ZSYmdC5fdXBkYXRlTG9nTGV2ZWwoKX0pKX1yZXR1cm4gZS5wcm90b3R5cGUuX3VwZGF0ZUxvZ0xldmVsPWZ1bmN0aW9uKCl7dGhpcy5sb2dMZXZlbD1jW3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubG9nTGV2ZWxdfSxlLnByb3RvdHlwZS5fZXZhbExhenlPcHRpb25hbFBhcmFtcz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKykiZnVuY3Rpb24iPT10eXBlb2YgZVt0XSYmKGVbdF09ZVt0XSgpKX0sZS5wcm90b3R5cGUuX2xvZz1mdW5jdGlvbihlLHQscil7dGhpcy5fZXZhbExhenlPcHRpb25hbFBhcmFtcyhyKSxlLmNhbGwuYXBwbHkoZSxzKFtjb25zb2xlLCJ4dGVybS5qczogIit0XSxvKHIpLCExKSl9LGUucHJvdG90eXBlLmRlYnVnPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO3RoaXMubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLkRFQlVHJiZ0aGlzLl9sb2coY29uc29sZS5sb2csZSx0KX0sZS5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLmxvZ0xldmVsPD1hLkxvZ0xldmVsRW51bS5JTkZPJiZ0aGlzLl9sb2coY29uc29sZS5pbmZvLGUsdCl9LGUucHJvdG90eXBlLndhcm49ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5sb2dMZXZlbDw9YS5Mb2dMZXZlbEVudW0uV0FSTiYmdGhpcy5fbG9nKGNvbnNvbGUud2FybixlLHQpfSxlLnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLmxvZ0xldmVsPD1hLkxvZ0xldmVsRW51bS5FUlJPUiYmdGhpcy5fbG9nKGNvbnNvbGUuZXJyb3IsZSx0KX0saShbbigwLGEuSU9wdGlvbnNTZXJ2aWNlKV0sZSl9KCk7dC5Mb2dTZXJ2aWNlPWx9LDczMDI6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19hc3NpZ258fGZ1bmN0aW9uKCl7cmV0dXJuIGk9T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9MSxpPWFyZ3VtZW50cy5sZW5ndGg7cjxpO3IrKylmb3IodmFyIG4gaW4gdD1hcmd1bWVudHNbcl0pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsbikmJihlW25dPXRbbl0pO3JldHVybiBlfSxpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuT3B0aW9uc1NlcnZpY2U9dC5ERUZBVUxUX09QVElPTlM9dC5ERUZBVUxUX0JFTExfU09VTkQ9dm9pZCAwO3ZhciBuPXIoODQ2MCksbz1yKDYxMTQpO3QuREVGQVVMVF9CRUxMX1NPVU5EPSJkYXRhOmF1ZGlvL21wMztiYXNlNjQsU1VRekJBQUFBQUFBSTFSVFUwVUFBQUFQQUFBRFRHRjJaalU0TGpNeUxqRXdOQUFBQUFBQUFBQUFBQUFBLy90UXhBQURCOEFoU214aElJRVZDU2lKckRDUUJUY3UzVXJBSXdVZGtSZ1FiRkFaQzFDUUV3VEo5bWpSdkJBNFVPTEQ4bktWT1dmaCtVbEszei8xNzdPWHJmT2RLbDdweW4zWGYvL1dyZXlUUlVvQVdnQmdrT0FHYlpIQmdHMU9GNnpNODJEV2JaYVVtTUJwdGdRaEdqc3lZcWM5YWU5WEZ6MjgwOTQ4Tk1CV0lubGp5enNOUkZMUFdkblpHV3JkZERzaksxdW51U3JWTjlqSnNLOEt1UXRRQ3RNQmpDRXRJbUlTZE5LSk9vcElwQkZwTlNNYklIQ1NScFJSNWlha2pUaXl6TGhjaFVVQndDZ3lLaXdlQnYvN1VzUWJnOGlzVk5vTVBNakFBQUEwZ0FBQUJFVkZHbWdxSy8vLy85YlAvNlhDeWt4QlRVVXpMakV3TUtxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcSIsdC5ERUZBVUxUX09QVElPTlM9e2NvbHM6ODAscm93czoyNCxjdXJzb3JCbGluazohMSxjdXJzb3JTdHlsZToiYmxvY2siLGN1cnNvcldpZHRoOjEsY3VzdG9tR2x5cGhzOiEwLGJlbGxTb3VuZDp0LkRFRkFVTFRfQkVMTF9TT1VORCxiZWxsU3R5bGU6Im5vbmUiLGRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzOiEwLGZhc3RTY3JvbGxNb2RpZmllcjoiYWx0IixmYXN0U2Nyb2xsU2Vuc2l0aXZpdHk6NSxmb250RmFtaWx5OiJjb3VyaWVyLW5ldywgY291cmllciwgbW9ub3NwYWNlIixmb250U2l6ZToxNSxmb250V2VpZ2h0OiJub3JtYWwiLGZvbnRXZWlnaHRCb2xkOiJib2xkIixsaW5lSGVpZ2h0OjEsbGlua1Rvb2x0aXBIb3ZlckR1cmF0aW9uOjUwMCxsZXR0ZXJTcGFjaW5nOjAsbG9nTGV2ZWw6ImluZm8iLHNjcm9sbGJhY2s6MWUzLHNjcm9sbFNlbnNpdGl2aXR5OjEsc2NyZWVuUmVhZGVyTW9kZTohMSxtYWNPcHRpb25Jc01ldGE6ITEsbWFjT3B0aW9uQ2xpY2tGb3JjZXNTZWxlY3Rpb246ITEsbWluaW11bUNvbnRyYXN0UmF0aW86MSxkaXNhYmxlU3RkaW46ITEsYWxsb3dQcm9wb3NlZEFwaTohMCxhbGxvd1RyYW5zcGFyZW5jeTohMSx0YWJTdG9wV2lkdGg6OCx0aGVtZTp7fSxyaWdodENsaWNrU2VsZWN0c1dvcmQ6by5pc01hYyxyZW5kZXJlclR5cGU6ImNhbnZhcyIsd2luZG93T3B0aW9uczp7fSx3aW5kb3dzTW9kZTohMSx3b3JkU2VwYXJhdG9yOiIgKClbXXt9JyxcImAiLGFsdENsaWNrTW92ZXNDdXJzb3I6ITAsY29udmVydEVvbDohMSx0ZXJtTmFtZToieHRlcm0iLGNhbmNlbEV2ZW50czohMSxvdmVydmlld1J1bGVyV2lkdGg6dm9pZCAwfTt2YXIgcz1bIm5vcm1hbCIsImJvbGQiLCIxMDAiLCIyMDAiLCIzMDAiLCI0MDAiLCI1MDAiLCI2MDAiLCI3MDAiLCI4MDAiLCI5MDAiXSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9vbk9wdGlvbkNoYW5nZT1uZXcgbi5FdmVudEVtaXR0ZXI7dmFyIHI9aSh7fSx0LkRFRkFVTFRfT1BUSU9OUyk7Zm9yKHZhciBvIGluIGUpaWYobyBpbiByKXRyeXt2YXIgcz1lW29dO3Jbb109dGhpcy5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbihvLHMpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9dGhpcy5yYXdPcHRpb25zPXIsdGhpcy5vcHRpb25zPWkoe30sciksdGhpcy5fc2V0dXBPcHRpb25zKCl9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25PcHRpb25DaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25PcHRpb25DaGFuZ2UuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3NldHVwT3B0aW9ucz1mdW5jdGlvbigpe3ZhciBlPXRoaXMscj1mdW5jdGlvbihyKXtpZighKHIgaW4gdC5ERUZBVUxUX09QVElPTlMpKXRocm93IG5ldyBFcnJvcignTm8gb3B0aW9uIHdpdGgga2V5ICInK3IrJyInKTtyZXR1cm4gZS5yYXdPcHRpb25zW3JdfSxpPWZ1bmN0aW9uKHIsaSl7aWYoIShyIGluIHQuREVGQVVMVF9PUFRJT05TKSl0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbiB3aXRoIGtleSAiJytyKyciJyk7aT1lLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uKHIsaSksZS5yYXdPcHRpb25zW3JdIT09aSYmKGUucmF3T3B0aW9uc1tyXT1pLGUuX29uT3B0aW9uQ2hhbmdlLmZpcmUocikpfTtmb3IodmFyIG4gaW4gdGhpcy5yYXdPcHRpb25zKXt2YXIgbz17Z2V0OnIuYmluZCh0aGlzLG4pLHNldDppLmJpbmQodGhpcyxuKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMub3B0aW9ucyxuLG8pfX0sZS5wcm90b3R5cGUuc2V0T3B0aW9uPWZ1bmN0aW9uKGUsdCl7dGhpcy5vcHRpb25zW2VdPXR9LGUucHJvdG90eXBlLl9zYW5pdGl6ZUFuZFZhbGlkYXRlT3B0aW9uPWZ1bmN0aW9uKGUscil7c3dpdGNoKGUpe2Nhc2UiYmVsbFN0eWxlIjpjYXNlImN1cnNvclN0eWxlIjpjYXNlInJlbmRlcmVyVHlwZSI6Y2FzZSJ3b3JkU2VwYXJhdG9yIjpyfHwocj10LkRFRkFVTFRfT1BUSU9OU1tlXSk7YnJlYWs7Y2FzZSJmb250V2VpZ2h0IjpjYXNlImZvbnRXZWlnaHRCb2xkIjppZigibnVtYmVyIj09dHlwZW9mIHImJjE8PXImJnI8PTFlMylicmVhaztyPXMuaW5jbHVkZXMocik/cjp0LkRFRkFVTFRfT1BUSU9OU1tlXTticmVhaztjYXNlImN1cnNvcldpZHRoIjpyPU1hdGguZmxvb3Iocik7Y2FzZSJsaW5lSGVpZ2h0IjpjYXNlInRhYlN0b3BXaWR0aCI6aWYocjwxKXRocm93IG5ldyBFcnJvcihlKyIgY2Fubm90IGJlIGxlc3MgdGhhbiAxLCB2YWx1ZTogIityKTticmVhaztjYXNlIm1pbmltdW1Db250cmFzdFJhdGlvIjpyPU1hdGgubWF4KDEsTWF0aC5taW4oMjEsTWF0aC5yb3VuZCgxMCpyKS8xMCkpO2JyZWFrO2Nhc2Uic2Nyb2xsYmFjayI6aWYoKHI9TWF0aC5taW4ociw0Mjk0OTY3Mjk1KSk8MCl0aHJvdyBuZXcgRXJyb3IoZSsiIGNhbm5vdCBiZSBsZXNzIHRoYW4gMCwgdmFsdWU6ICIrcik7YnJlYWs7Y2FzZSJmYXN0U2Nyb2xsU2Vuc2l0aXZpdHkiOmNhc2Uic2Nyb2xsU2Vuc2l0aXZpdHkiOmlmKHI8PTApdGhyb3cgbmV3IEVycm9yKGUrIiBjYW5ub3QgYmUgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDAsIHZhbHVlOiAiK3IpO2Nhc2Uicm93cyI6Y2FzZSJjb2xzIjppZighciYmMCE9PXIpdGhyb3cgbmV3IEVycm9yKGUrIiBtdXN0IGJlIG51bWVyaWMsIHZhbHVlOiAiK3IpfXJldHVybiByfSxlLnByb3RvdHlwZS5nZXRPcHRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMub3B0aW9uc1tlXX0sZX0oKTt0Lk9wdGlvbnNTZXJ2aWNlPWF9LDgzNDM6KGUsdCk9PntmdW5jdGlvbiByKGUsdCxyKXt0LmRpJHRhcmdldD09PXQ/dC5kaSRkZXBlbmRlbmNpZXMucHVzaCh7aWQ6ZSxpbmRleDpyfSk6KHQuZGkkZGVwZW5kZW5jaWVzPVt7aWQ6ZSxpbmRleDpyfV0sdC5kaSR0YXJnZXQ9dCl9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuY3JlYXRlRGVjb3JhdG9yPXQuZ2V0U2VydmljZURlcGVuZGVuY2llcz10LnNlcnZpY2VSZWdpc3RyeT12b2lkIDAsdC5zZXJ2aWNlUmVnaXN0cnk9bmV3IE1hcCx0LmdldFNlcnZpY2VEZXBlbmRlbmNpZXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuZGkkZGVwZW5kZW5jaWVzfHxbXX0sdC5jcmVhdGVEZWNvcmF0b3I9ZnVuY3Rpb24oZSl7aWYodC5zZXJ2aWNlUmVnaXN0cnkuaGFzKGUpKXJldHVybiB0LnNlcnZpY2VSZWdpc3RyeS5nZXQoZSk7dmFyIGk9ZnVuY3Rpb24oZSx0LG4pe2lmKDMhPT1hcmd1bWVudHMubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiQElTZXJ2aWNlTmFtZS1kZWNvcmF0b3IgY2FuIG9ubHkgYmUgdXNlZCB0byBkZWNvcmF0ZSBhIHBhcmFtZXRlciIpO3IoaSxlLG4pfTtyZXR1cm4gaS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiBlfSx0LnNlcnZpY2VSZWdpc3RyeS5zZXQoZSxpKSxpfX0sMjU4NTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuSURlY29yYXRpb25TZXJ2aWNlPXQuSVVuaWNvZGVTZXJ2aWNlPXQuSU9wdGlvbnNTZXJ2aWNlPXQuSUxvZ1NlcnZpY2U9dC5Mb2dMZXZlbEVudW09dC5JSW5zdGFudGlhdGlvblNlcnZpY2U9dC5JRGlydHlSb3dTZXJ2aWNlPXQuSUNoYXJzZXRTZXJ2aWNlPXQuSUNvcmVTZXJ2aWNlPXQuSUNvcmVNb3VzZVNlcnZpY2U9dC5JQnVmZmVyU2VydmljZT12b2lkIDA7dmFyIGksbj1yKDgzNDMpO3QuSUJ1ZmZlclNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJCdWZmZXJTZXJ2aWNlIiksdC5JQ29yZU1vdXNlU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkNvcmVNb3VzZVNlcnZpY2UiKSx0LklDb3JlU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkNvcmVTZXJ2aWNlIiksdC5JQ2hhcnNldFNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJDaGFyc2V0U2VydmljZSIpLHQuSURpcnR5Um93U2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkRpcnR5Um93U2VydmljZSIpLHQuSUluc3RhbnRpYXRpb25TZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiSW5zdGFudGlhdGlvblNlcnZpY2UiKSwoaT10LkxvZ0xldmVsRW51bXx8KHQuTG9nTGV2ZWxFbnVtPXt9KSlbaS5ERUJVRz0wXT0iREVCVUciLGlbaS5JTkZPPTFdPSJJTkZPIixpW2kuV0FSTj0yXT0iV0FSTiIsaVtpLkVSUk9SPTNdPSJFUlJPUiIsaVtpLk9GRj00XT0iT0ZGIix0LklMb2dTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiTG9nU2VydmljZSIpLHQuSU9wdGlvbnNTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiT3B0aW9uc1NlcnZpY2UiKSx0LklVbmljb2RlU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIlVuaWNvZGVTZXJ2aWNlIiksdC5JRGVjb3JhdGlvblNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJEZWNvcmF0aW9uU2VydmljZSIpfSwxNDgwOihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Vbmljb2RlU2VydmljZT12b2lkIDA7dmFyIGk9cig4NDYwKSxuPXIoMjI1KSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3Byb3ZpZGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2FjdGl2ZT0iIix0aGlzLl9vbkNoYW5nZT1uZXcgaS5FdmVudEVtaXR0ZXI7dmFyIGU9bmV3IG4uVW5pY29kZVY2O3RoaXMucmVnaXN0ZXIoZSksdGhpcy5fYWN0aXZlPWUudmVyc2lvbix0aGlzLl9hY3RpdmVQcm92aWRlcj1lfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwidmVyc2lvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmtleXModGhpcy5fcHJvdmlkZXJzKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImFjdGl2ZVZlcnNpb24iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlfSxzZXQ6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3Byb3ZpZGVyc1tlXSl0aHJvdyBuZXcgRXJyb3IoJ3Vua25vd24gVW5pY29kZSB2ZXJzaW9uICInK2UrJyInKTt0aGlzLl9hY3RpdmU9ZSx0aGlzLl9hY3RpdmVQcm92aWRlcj10aGlzLl9wcm92aWRlcnNbZV0sdGhpcy5fb25DaGFuZ2UuZmlyZShlKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihlKXt0aGlzLl9wcm92aWRlcnNbZS52ZXJzaW9uXT1lfSxlLnByb3RvdHlwZS53Y3dpZHRoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hY3RpdmVQcm92aWRlci53Y3dpZHRoKGUpfSxlLnByb3RvdHlwZS5nZXRTdHJpbmdDZWxsV2lkdGg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTAscj1lLmxlbmd0aCxpPTA7aTxyOysraSl7dmFyIG49ZS5jaGFyQ29kZUF0KGkpO2lmKDU1Mjk2PD1uJiZuPD01NjMxOSl7aWYoKytpPj1yKXJldHVybiB0K3RoaXMud2N3aWR0aChuKTt2YXIgbz1lLmNoYXJDb2RlQXQoaSk7NTYzMjA8PW8mJm88PTU3MzQzP249MTAyNCoobi01NTI5Nikrby01NjMyMCs2NTUzNjp0Kz10aGlzLndjd2lkdGgobyl9dCs9dGhpcy53Y3dpZHRoKG4pfXJldHVybiB0fSxlfSgpO3QuVW5pY29kZVNlcnZpY2U9b319LHQ9e307cmV0dXJuIGZ1bmN0aW9uIHIoaSl7dmFyIG49dFtpXTtpZih2b2lkIDAhPT1uKXJldHVybiBuLmV4cG9ydHM7dmFyIG89dFtpXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbaV0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsciksby5leHBvcnRzfSg0Mzg5KX0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLmpzLm1hcApWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcmVxdWlyZS9wYWdlL25vZGVfbW9kdWxlcy94dGVybS9saWIveHRlcm0uanMiXSA9IFtdCgpfY2FuX25hbWUgPSAiL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0tYWRkb24tZml0L2xpYi94dGVybS1hZGRvbi1maXQuanMiCiFmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLkZpdEFkZG9uPXQoKTplLkZpdEFkZG9uPXQoKX0oc2VsZiwoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9ezc3NTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkZpdEFkZG9uPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt9cmV0dXJuIGUucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGUpe3RoaXMuX3Rlcm1pbmFsPWV9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmZpdD1mdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcG9zZURpbWVuc2lvbnMoKTtpZihlJiZ0aGlzLl90ZXJtaW5hbCl7dmFyIHQ9dGhpcy5fdGVybWluYWwuX2NvcmU7dGhpcy5fdGVybWluYWwucm93cz09PWUucm93cyYmdGhpcy5fdGVybWluYWwuY29scz09PWUuY29sc3x8KHQuX3JlbmRlclNlcnZpY2UuY2xlYXIoKSx0aGlzLl90ZXJtaW5hbC5yZXNpemUoZS5jb2xzLGUucm93cykpfX0sZS5wcm90b3R5cGUucHJvcG9zZURpbWVuc2lvbnM9ZnVuY3Rpb24oKXtpZih0aGlzLl90ZXJtaW5hbCYmdGhpcy5fdGVybWluYWwuZWxlbWVudCYmdGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KXt2YXIgZT10aGlzLl90ZXJtaW5hbC5fY29yZTtpZigwIT09ZS5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCYmMCE9PWUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KXt2YXIgdD13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLl90ZXJtaW5hbC5lbGVtZW50LnBhcmVudEVsZW1lbnQpLHI9cGFyc2VJbnQodC5nZXRQcm9wZXJ0eVZhbHVlKCJoZWlnaHQiKSksaT1NYXRoLm1heCgwLHBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZSgid2lkdGgiKSkpLG49d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudCksbz1yLShwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctdG9wIikpK3BhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1ib3R0b20iKSkpLGE9aS0ocGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXJpZ2h0IikpK3BhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1sZWZ0IikpKS1lLnZpZXdwb3J0LnNjcm9sbEJhcldpZHRoO3JldHVybntjb2xzOk1hdGgubWF4KDIsTWF0aC5mbG9vcihhL2UuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgpKSxyb3dzOk1hdGgubWF4KDEsTWF0aC5mbG9vcihvL2UuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KSl9fX19LGV9KCk7dC5GaXRBZGRvbj1yfX0sdD17fTtyZXR1cm4gZnVuY3Rpb24gcihpKXtpZih0W2ldKXJldHVybiB0W2ldLmV4cG9ydHM7dmFyIG49dFtpXT17ZXhwb3J0czp7fX07cmV0dXJuIGVbaV0obixuLmV4cG9ydHMsciksbi5leHBvcnRzfSg3NzUpfSkoKX0pKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9eHRlcm0tYWRkb24tZml0LmpzLm1hcApWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcmVxdWlyZS9wYWdlL25vZGVfbW9kdWxlcy94dGVybS1hZGRvbi1maXQvbGliL3h0ZXJtLWFkZG9uLWZpdC5qcyJdID0gW10KCl9jYW5fbmFtZSA9ICIvcmVxdWlyZS9wYWdlL25vZGVfbW9kdWxlcy94dGVybS1hZGRvbi13ZWItbGlua3MvbGliL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy5qcyIKIWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuV2ViTGlua3NBZGRvbj10KCk6ZS5XZWJMaW5rc0FkZG9uPXQoKX0oc2VsZiwoZnVuY3Rpb24oKXtyZXR1cm4oKCk9PnsidXNlIHN0cmljdCI7dmFyIGU9ezY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5MaW5rQ29tcHV0ZXI9dC5XZWJMaW5rUHJvdmlkZXI9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsaSxyKXt2b2lkIDA9PT1yJiYocj17fSksdGhpcy5fdGVybWluYWw9ZSx0aGlzLl9yZWdleD10LHRoaXMuX2hhbmRsZXI9aSx0aGlzLl9vcHRpb25zPXJ9cmV0dXJuIGUucHJvdG90eXBlLnByb3ZpZGVMaW5rcz1mdW5jdGlvbihlLHQpe3ZhciBpPXIuY29tcHV0ZUxpbmsoZSx0aGlzLl9yZWdleCx0aGlzLl90ZXJtaW5hbCx0aGlzLl9oYW5kbGVyKTt0KHRoaXMuX2FkZENhbGxiYWNrcyhpKSl9LGUucHJvdG90eXBlLl9hZGRDYWxsYmFja3M9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmxlYXZlPXQuX29wdGlvbnMubGVhdmUsZS5ob3Zlcj1mdW5jdGlvbihpLHIpe2lmKHQuX29wdGlvbnMuaG92ZXIpe3ZhciBuPWUucmFuZ2U7dC5fb3B0aW9ucy5ob3ZlcihpLHIsbil9fSxlfSkpfSxlfSgpO3QuV2ViTGlua1Byb3ZpZGVyPWk7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLmNvbXB1dGVMaW5rPWZ1bmN0aW9uKHQsaSxyLG4pe2Zvcih2YXIgbyxhPW5ldyBSZWdFeHAoaS5zb3VyY2UsKGkuZmxhZ3N8fCIiKSsiZyIpLHM9ZS5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXAodC0xLCExLHIpLGQ9c1swXSxsPXNbMV0sYz0tMSx1PVtdO251bGwhPT0obz1hLmV4ZWMoZCkpOyl7dmFyIGg9b1sxXTtpZighaCl7Y29uc29sZS5sb2coIm1hdGNoIGZvdW5kIHdpdGhvdXQgY29ycmVzcG9uZGluZyBtYXRjaEluZGV4Iik7YnJlYWt9aWYoYz1kLmluZGV4T2YoaCxjKzEpLGEubGFzdEluZGV4PWMraC5sZW5ndGgsYzwwKWJyZWFrO2Zvcih2YXIgdj1jK2gubGVuZ3RoLGY9bCsxO3Y+ci5jb2xzOyl2LT1yLmNvbHMsZisrO2Zvcih2YXIgcD1jKzEsXz1sKzE7cD5yLmNvbHM7KXAtPXIuY29scyxfKys7dmFyIGs9e3N0YXJ0Ont4OnAseTpffSxlbmQ6e3g6dix5OmZ9fTt1LnB1c2goe3JhbmdlOmssdGV4dDpoLGFjdGl2YXRlOm59KX1yZXR1cm4gdX0sZS5fdHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nV2l0aFdyYXA9ZnVuY3Rpb24oZSx0LGkpe3ZhciByLG4sbz0iIjtkb3tpZighKHM9aS5idWZmZXIuYWN0aXZlLmdldExpbmUoZSkpKWJyZWFrO3MuaXNXcmFwcGVkJiZlLS0sbj1zLmlzV3JhcHBlZH13aGlsZShuKTt2YXIgYT1lO2Rve3ZhciBzLGQ9aS5idWZmZXIuYWN0aXZlLmdldExpbmUoZSsxKTtpZihyPSEhZCYmZC5pc1dyYXBwZWQsIShzPWkuYnVmZmVyLmFjdGl2ZS5nZXRMaW5lKGUpKSlicmVhaztvKz1zLnRyYW5zbGF0ZVRvU3RyaW5nKCFyJiZ0KS5zdWJzdHJpbmcoMCxpLmNvbHMpLGUrK313aGlsZShyKTtyZXR1cm5bbyxhXX0sZX0oKTt0LkxpbmtDb21wdXRlcj1yfX0sdD17fTtmdW5jdGlvbiBpKHIpe3ZhciBuPXRbcl07aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBvPXRbcl09e2V4cG9ydHM6e319O3JldHVybiBlW3JdKG8sby5leHBvcnRzLGkpLG8uZXhwb3J0c312YXIgcj17fTtyZXR1cm4oKCk9Pnt2YXIgZT1yO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLldlYkxpbmtzQWRkb249dm9pZCAwO3ZhciB0PWkoNiksbj1uZXcgUmVnRXhwKCIoPzpefFteXFxkYS16XFwuLV0rKSgoaHR0cHM/OlxcL1xcLykoKChbXFxkYS16XFwuLV0rKVxcLihbYS16XFwuXXsyLDE4fSkpfCgoXFxkezEsM31cXC4pezN9XFxkezEsM30pfChsb2NhbGhvc3QpKSg6XFxkezEsNX0pPygoXFwvW1xcL1xcd1xcLlxcLSV+OitAXSopKihbXjpcIidcXHNdKSk/KFxcP1swLTlcXHdcXFtcXF1cXChcXClcXC9cXD9cXCEjQCQlJicqKyw6O35cXD1cXC5cXC1dKik/KCNbMC05XFx3XFxbXFxdXFwoXFwpXFwvXFw/XFwhI0AkJSYnKissOjt+XFw9XFwuXFwtXSopPykoJHxbXlxcL1xcd1xcLlxcLSVdKykiKTtmdW5jdGlvbiBvKGUsdCl7dmFyIGk9d2luZG93Lm9wZW4oKTtpZihpKXt0cnl7aS5vcGVuZXI9bnVsbH1jYXRjaChlKXt9aS5sb2NhdGlvbi5ocmVmPXR9ZWxzZSBjb25zb2xlLndhcm4oIk9wZW5pbmcgbGluayBibG9ja2VkIGFzIG9wZW5lciBjb3VsZCBub3QgYmUgY2xlYXJlZCIpfXZhciBhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQsaSl7dm9pZCAwPT09ZSYmKGU9byksdm9pZCAwPT09dCYmKHQ9e30pLHZvaWQgMD09PWkmJihpPSExKSx0aGlzLl9oYW5kbGVyPWUsdGhpcy5fb3B0aW9ucz10LHRoaXMuX3VzZUxpbmtQcm92aWRlcj1pfXJldHVybiBlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXtpZih0aGlzLl90ZXJtaW5hbD1lLHRoaXMuX3VzZUxpbmtQcm92aWRlciYmInJlZ2lzdGVyTGlua1Byb3ZpZGVyImluIHRoaXMuX3Rlcm1pbmFsKXt2YXIgaT0ocj10aGlzLl9vcHRpb25zKS51cmxSZWdleHx8bjt0aGlzLl9saW5rUHJvdmlkZXI9dGhpcy5fdGVybWluYWwucmVnaXN0ZXJMaW5rUHJvdmlkZXIobmV3IHQuV2ViTGlua1Byb3ZpZGVyKHRoaXMuX3Rlcm1pbmFsLGksdGhpcy5faGFuZGxlcixyKSl9ZWxzZXt2YXIgcjsocj10aGlzLl9vcHRpb25zKS5tYXRjaEluZGV4PTEsdGhpcy5fbGlua01hdGNoZXJJZD10aGlzLl90ZXJtaW5hbC5yZWdpc3RlckxpbmtNYXRjaGVyKG4sdGhpcy5faGFuZGxlcixyKX19LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgZTt2b2lkIDAhPT10aGlzLl9saW5rTWF0Y2hlcklkJiZ2b2lkIDAhPT10aGlzLl90ZXJtaW5hbCYmdGhpcy5fdGVybWluYWwuZGVyZWdpc3RlckxpbmtNYXRjaGVyKHRoaXMuX2xpbmtNYXRjaGVySWQpLG51bGw9PT0oZT10aGlzLl9saW5rUHJvdmlkZXIpfHx2b2lkIDA9PT1lfHxlLmRpc3Bvc2UoKX0sZX0oKTtlLldlYkxpbmtzQWRkb249YX0pKCkscn0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLWFkZG9uLXdlYi1saW5rcy5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0tYWRkb24td2ViLWxpbmtzL2xpYi94dGVybS1hZGRvbi13ZWItbGlua3MuanMiXSA9IFtdCgpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcmVxdWlyZS9wYWdlL25vZGVfbW9kdWxlcy94dGVybS9jc3MveHRlcm0uY3NzIl0gPSBbXQoKX2Nhbl9uYW1lID0gIiIK",
        "usr/volcanos/page/can.css": "Ym9keSwgZmllbGRzZXQsIHRhYmxlLCB0ciwgdGgsIHRkIHsgcGFkZGluZzowOyBib3JkZXI6MDsgbWFyZ2luOjA7IH0KYm9keSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGZvbnQtc2l6ZToxNnB4OyB9CmxlZ2VuZCB7IGJhY2tncm91bmQtY29sb3I6Y2FkZXRibHVlOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzowIDIwcHg7IH0Kc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6Y3lhbjsgcGFkZGluZzowIDEwcHg7IGJvcmRlcjowOyB9CnRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB3aWR0aDo0MDBweDsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyBjb2xvcjpibGFjazsgcGFkZGluZzowIDVweDsgYm9yZGVyOjA7IHdpZHRoOjkwcHg7IH0KaW5wdXRbdHlwZT10ZXh0XSB7IGJhY2tncm91bmQtY29sb3I6Y3lhbjsgY29sb3I6YmxhY2s7IHBhZGRpbmc6MCA1cHg7IGJvcmRlcjowOyB3aWR0aDo5MHB4OyB9CmlucHV0W25hbWU9Y21kXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOndoaXRlOyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXVybF0geyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXRleHRdIHsgd2lkdGg6MTYwcHg7IH0KaW5wdXRbbmFtZT1kYXRlXSB7IHdpZHRoOjE1MHB4OyB9CmlucHV0W25hbWU9cGF0aF0geyB3aWR0aDoxNjBweDsgfQppbnB1dFtuYW1lPWxpbmVdIHsgd2lkdGg6NDBweDsgfQppbnB1dFtuYW1lPWxpbWl0XSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1vZmZlbmRdIHsgd2lkdGg6NDhweDsgfQppbnB1dFtuYW1lPWlkXSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1JRF0geyB3aWR0aDo0OHB4OyB9CmlucHV0W3R5cGU9YnV0dG9uXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9b3Blbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9c3RvcF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1kZWxldGVdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9cmVtb3ZlXSB7IGJhY2tncm91bmQtY29sb3I6cmVkOyB9Cgp0YWJsZS5sYXlvdXQgeyBib3JkZXItc3BhY2luZzowOyB9CnRhYmxlLmxheW91dCB0ZCB7IHZlcnRpY2FsLWFsaWduOnRvcDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IGNvbG9yOndoaXRlOyBmb250LXNpemU6MjRweDsgcG9zaXRpb246YWJzb2x1dGU7IHotaW5kZXg6MTA7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZT5kaXYgeyBkaXNwbGF5OnRhYmxlLWNlbGw7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9qZWN0IHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgbGVmdDowcHg7IGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjEwcHg7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9maWxlIHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgcmlnaHQ6MHB4OyBib3JkZXItdG9wLWxlZnQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXkgeyBtYXJnaW4tdG9wOi0xNXB4OyBoZWlnaHQ6MTVweDsgd2lkdGg6MTAwcHg7IHBvc2l0aW9uOnN0aWNreTsgbGVmdDo0MCU7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6MTBweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXk+ZGl2IHsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjEwMHB4OyB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZSg1cHgsIDBweCk7IH0KdGFibGUuY29udGVudCB0aGVhZCB7IHBvc2l0aW9uOnN0aWNreTsgdG9wOjJweDsgfQp0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IHBhZGRpbmc6MnB4IDZweDsgfQp0YWJsZS5jb250ZW50IHRkIHsgcGFkZGluZzoycHggNnB4OyB9CnRhYmxlLmNvbnRlbnQuYWN0aW9uIHRoOmxhc3QtY2hpbGQgeyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KdGFibGUuY29udGVudC5hY3Rpb24gdGQ6bGFzdC1jaGlsZCB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KZGl2LmNvZGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzNDNhMzQ0NTsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGJhY2tncm91bmQtY29sb3I6IzIxNjlhOWE2OyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgNXB4IGJsdWU7IG1hcmdpbjoxMHB4OyB9Cgpmb3JtLm9wdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2LmFjdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2Lm91dHB1dCB7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lml0ZW0geyBwYWRkaW5nOjJweCAxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lmxpc3QgeyBtYXJnaW4tbGVmdDoxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaCB7IHdpZHRoOjEycHg7IGZsb2F0OmxlZnQ7IHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSB0cmFuc2xhdGUoMXB4LCAwcHgpOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaC5vcGVuIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKSB0cmFuc2xhdGUoLTRweCwgNHB4KTsgfQpkaXYub3V0cHV0IGRpdi5wcm9qZWN0IGRpdi56b25lPmRpdi5uYW1lIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IGNvbG9yOndoaXRlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo1cHg7IGNsZWFyOmJvdGg7IH0KZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuaXRlbT5kaXYubmFtZSB7IHBhZGRpbmctbGVmdDoyMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSB7IGZsb2F0OnJpZ2h0OyBjbGVhcjpub25lOyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSBpbnB1dFt0eXBlPXRleHRdIHsgYmFja2dyb3VuZC1jb2xvcjojZmYwMDAwMDA7IHBhZGRpbmctbGVmdDoxMHB4OyBjb2xvcjp3aGl0ZTsgfQoKZmllbGRzZXQucGx1Z2luIHsgYmFja2dyb3VuZC1jb2xvcjojMDYxYzNjOWU7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZmllbGRzZXQuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgcG9zaXRpb246YWJzb2x1dGU7IH0KZmllbGRzZXQuZnVsbCB7IGJhY2tncm91bmQtY29sb3I6IzA3Mzk0N2YyOyBwYWRkaW5nOjA7IG1hcmdpbjowOyBsZWZ0OjA7IHRvcDowOyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LnN0b3J5PmxlZ2VuZCB7IG1hcmdpbjoxMHB4IDA7IH0KZmllbGRzZXQucGx1Zz5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmZpZWxkc2V0LmZsb2F0PmxlZ2VuZCB7IGZsb2F0OmxlZnQ7IG1hcmdpbi1yaWdodDo1cHg7IH0KZmllbGRzZXQuZnVsbD5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW46MDsgbWFyZ2luLXJpZ2h0OjVweDsgfQpmaWVsZHNldC5mbG9hdCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQucGx1Zz5mb3JtLm9wdGlvbiBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuZnVsbCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQgaW5wdXRbdHlwZT1idXR0b25dW25hbWU9Y2xvc2VdeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luIGRpdi5zdGF0dXMgeyBib3JkZXItdG9wOjFweCBzb2xpZCBkYXJrY3lhbjsgfQpmaWVsZHNldC5zdG9yeSBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgZGFya2N5YW47IH0KZmllbGRzZXQub3V0cHV0PmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgpmaWVsZHNldC5pbnB1dC5rZXkgeyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LmlucHV0LmtleSBkaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbnB1dC5rZXkuc2ltcGxlIHRoIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgdGQgeyBtaW4td2lkdGg6NDBweDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5hY3Rpb24gZGl2LnNwYWNlIHsgd2lkdGg6MDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5vdXRwdXQgdGQucHJldiB7IGNvbG9yOmdyYXk7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSBkaXYub3V0cHV0IHRkLm5leHQgeyBjb2xvcjpncmF5OyB9CmZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6MnB4IDEwcHg7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSB0YWJsZSB7IHRleHQtYWxpZ246Y2VudGVyOyB3aWR0aDoyODBweDsgfQoKYm9keT5kaXYuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NXB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi50aXRsZSB7IGNvbG9yOnllbGxvdzsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi50b2FzdCBkaXYuZHVyYXRpb24geyBjb2xvcjpncmF5OyBmbG9hdDpyaWdodDsgfQpib2R5PmRpdi50b2FzdCBkaXYuY29udGVudCB7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjp5ZWxsb3c7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIHsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgbWFyZ2luLWxlZnQ6LTJweDsgaGVpZ2h0OjEwcHg7IGNsZWFyOmJvdGg7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIGRpdi5jdXJyZW50IHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyB9CmJvZHk+ZGl2LmNhcnRlIHsgcGFkZGluZzowOyB9CmJvZHk+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMGUzMzY5YjM7IHBhZGRpbmc6M3B4IDEycHg7IH0KYm9keT5kaXYuY2FydGUgZGl2LnNwYWNlIHsgYm9yZGVyLWJvdHRvbTpzb2xpZCAxcHggZ3JheTsgfQpib2R5PmRpdi5pbnB1dCBkaXYuY29udGVudCB7IG92ZXJmbG93OmF1dG87IH0KYm9keT5kaXYuaW5wdXQgdGQgeyBwYWRkaW5nOjVweDsgfQpib2R5PmRpdi5pbnB1dCBzZWxlY3QgeyB3aWR0aDoxODFweDsgfQpib2R5PmRpdi5pbnB1dCBpbnB1dFt0eXBlPXRleHRdIHsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQgaW5wdXRbbmFtZT1wYXNzd29yZF0geyBwYWRkaW5nOjVweDsgYm9yZGVyOjA7IHdpZHRoOjE3MXB4OyBiYWNrZ3JvdW5kOndoaXRlOyB9CmJvZHk+ZGl2LmlucHV0IGlucHV0W25hbWU9dXNlcm5hbWVdIHsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB3aWR0aDoxNzFweDsgfQpib2R5PmRpdi5pbnB1dCB0ZXh0YXJlYSB7IGhlaWdodDoxMjBweDsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQubG9naW4geyBwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6c3RlZWxibHVlOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuaXRlbSB7IGZsb2F0OmxlZnQ7IH0KYm9keT5kaXYudXBsb2FkIGRpdi5vdXRwdXQgeyBib3JkZXI6c29saWQgMXB4IHJlZDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnByb2dyZXNzIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB3aWR0aDowOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5jb3N0IHsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnN0YXR1cyBkaXYuc2hvdyB7IGZsb2F0OnJpZ2h0OyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5zaXplIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KYm9keT5kaXYudXBsb2FkIGlucHV0W3R5cGU9ZmlsZV0geyB3aWR0aDozMjBweDsgfQoKLyogZm9udCAqLwoqIHsgdGFiLXNpemU6NDsgfQp0ZXh0YXJlYSB7IHRhYi1zaXplOjI7IGhlaWdodDo2MHB4OyB9CmxlZ2VuZCB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozMXB4OyB9CnNlbGVjdCB7IGZvbnQtc2l6ZToxLjFyZW07IGhlaWdodDozMXB4OyB9CmlucHV0IHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IH0KdGFibGUuY29udGVudCB0aCwgdGFibGUuY29udGVudCB0ZCwgZGl2LnpvbmU+ZGl2Lm5hbWUsIGRpdi5pdGVtLCBkaXYuY29kZSwgY29kZS5zdG9yeSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBmb250LXNpemU6MS4xcmVtOyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZGl2LnN0YXR1cz5kaXYuaXRlbT5sYWJlbCB7IGZvbnQtc2l6ZTowLjZyZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgfQpkaXYuc3RhdHVzPmRpdi5pdGVtIHsgcGFkZGluZzo0cHg7IGhlaWdodDoyMnB4OyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnMgeyBwYWRkaW5nOjVweCAxMHB4OyBoZWlnaHQ6MjFweDsgfQpzdmcgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KCi8qIGRpc3BsYXkgKi8KZm9ybS5vcHRpb24sIGRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9Ci5oaWRlLCAuaGlkZGVuLCBmb3JtLm9wdGlvbj5kaXYuaXRlbT5sYWJlbCwgZGl2LmFjdGlvbj5kaXYuaXRlbT5sYWJlbCwgZmllbGRzZXQucGFuZWw+bGVnZW5kLCBmaWVsZHNldC5vdXRwdXQ+bGVnZW5kLCBmaWVsZHNldC5pbnB1dD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZGl2Lm91dHB1dCwgZGl2LnN0YXR1cywgZGl2LmNvbnRlbnQsIGRpdi5wcm9qZWN0IGRpdi5pdGVtLCBkaXYuaXRlbS50ZXh0YXJlYSwgZGl2LmNvZGUsIGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdLCBwLnN0b3J5LCBoMSwgaDIsIGgzIHsgY2xlYXI6Ym90aDsgfQpmb3JtLm9wdGlvbiwgZm9ybS5vcHRpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24sIGRpdi5hY3Rpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24+ZGl2LnRhYnMsIGRpdi5wcm9qZWN0LCBkaXYuc3RhdHVzPmRpdi5pdGVtIHsgZmxvYXQ6bGVmdDsgfQpkaXYuY29kZSwgZGl2LnN0b3J5LCBkaXYuYWN0aW9uLCBkaXYub3V0cHV0LCBkaXYuc3RhdHVzLCBkaXYucHJvamVjdCwgZGl2LmNvbnRlbnQsIGRpdi5wcm9maWxlLCBkaXYuZGlzcGxheSwgdGFibGUuY29udGVudCwgdGFibGUuY29udGVudCB0ZCwgYm9keT5kaXYudG9hc3QgeyBvdmVyZmxvdzphdXRvOyB9CmRpdi5jb2RlLCBkaXYuc3RvcnksIGRpdi5pdGVtLCBkaXYuY29udGVudCwgdGFibGUuY29udGVudCwgdGV4dGFyZWEgeyB3aGl0ZS1zcGFjZTpwcmU7IH0KZGl2LmNvZGUsIGRpdi5zdG9yeSwgZGl2Lml0ZW0geyB0ZXh0LWFsaWduOmxlZnQ7IH0KCi8qIHBvc2l0aW9uIGN1cnNvciAqLwpmaWVsZHNldC5hdXRvLCBmaWVsZHNldC5mdWxsLCBmaWVsZHNldC5mbG9hdCwgZmllbGRzZXQuaW5wdXQsIGJvZHk+ZGl2LnRvYXN0LCBib2R5PmRpdi5jYXJ0ZSwgYm9keT5kaXYuaW5wdXQsIGJvZHk+ZGl2LnVwbG9hZCB7IHBvc2l0aW9uOmZpeGVkOyB6LWluZGV4OjEwOyB9CmxlZ2VuZCwgc2VsZWN0LCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGRpdi5pdGVtLCBkaXYudGFicywgdGgsIHRkLCBoMSwgaDIsIGgzIHsgY3Vyc29yOnBvaW50ZXI7IH0KZGl2LnRpdGxlLCBkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGN1cnNvcjpjb3B5OyB9CgovKiBib3gtc2hhZG93ICovCmZpZWxkc2V0LnBsdWdpbiB7IGJveC1zaGFkb3c6MnB4IDJweCAxMHB4IDRweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnBsdWdpbjpob3ZlciB7IGJveC1zaGFkb3c6NHB4IDRweCAxMnB4IDZweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnN0b3J5IHsgYm94LXNoYWRvdzo0cHggNHB4IDEwcHggMXB4ICM2MjZiZDA7IH0KZmllbGRzZXQuc3Rvcnk6aG92ZXIgeyBib3gtc2hhZG93OjEycHggMTJweCAxMnB4IDZweCAjNTc2NGVmZDE7IH0KbGVnZW5kLCBzZWxlY3QsIHRleHRhcmVhLCBpbnB1dFt0eXBlPXRleHRdLCBkaXYuY29kZSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBib3gtc2hhZG93OjRweCA0cHggMjBweCA0cHggIzYyNmJkMDsgfQoKLyogaG92ZXIgKi8KbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CnNlbGVjdDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgY29sb3I6Y3lhbjsgfQppbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQppbnB1dFtuYW1lPWNtZF06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmN5YW47IGNvbG9yOmJsYWNrOyB9CmlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSBzcGFuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpkZWVwc2t5Ymx1ZTsgYm94LXNoYWRvdzo0cHggNHB4IDIwcHggNHB4ICMyOTMxOGU7IH0KdGFibGUuY29udGVudCB0ci5zZWxlY3QsIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIsIGgxOmhvdmVyLCBoMjpob3ZlciwgaDM6aG92ZXIsIGRpdi5pdGVtLnNlbGVjdCwgZGl2Lml0ZW06aG92ZXIsIGRpdi50YWJzLnNlbGVjdCwgZGl2LnRhYnM6aG92ZXIsIC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQp0YWJsZS5jb250ZW50IHRoOmhvdmVyLCB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCwgdGFibGUuY29udGVudCB0ZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Y29ybmZsb3dlcmJsdWU7IH0KYm9keT5kaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQoKLyogc2Nyb2xsYmFyICovCmJvZHkgeyBvdmVyZmxvdzotbW96LXNjcm9sbGJhcnMtbm9uZTsgLW1zLW92ZXJmbG93LXN0eWxlOm5vbmU7IH0KYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZmllbGRzZXQucGFuZWwuQWN0aW9uPmRpdi5vdXRwdXQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOjAgIWltcG9ydGFudDsgaGVpZ2h0OjAgIWltcG9ydGFudDsgfQpkaXYucHJvamVjdDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZGl2LmNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CgovKiB0YWJsZSBjYXJkICovCmRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDFweCAjZTdlN2U3OyBtYXJnaW46MTBweDsgd2lkdGg6MjQwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGZvbnQtc2l6ZToxLjJyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICNlN2U3ZTc7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi5jb250ZW50IHsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6NDVweDsgfQpib2R5LndoaXRlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAwMDsgfQpkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0uc3RvcCB7IGNvbG9yOmdyYXk7IH0KCi8qIHdoaXRlICovCmJvZHkud2hpdGUgeyBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoNSwzNCw1NiwwLjc1KTsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBzZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnllbGxvd2dyZWVuOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIHRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9dGV4dF0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdIHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1vcGVuXSB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0b3BdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPWRlbGV0ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXJlbW92ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5BY3Rpb24geyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LnBhbmVsLkFjdGlvbiBkaXYuYWN0aW9uIHsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmZhMTsgfQpib2R5LndoaXRlIGZpZWxkc2V0LmZ1bGwgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjY2UwZjRlYjsgY29sb3I6d2hpdGU7IH0KCi8qIHdoaXRlIGhvdmVyICovCmJvZHkud2hpdGUgbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CmJvZHkud2hpdGUgc2VsZWN0OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojOTljYzY2N2Q7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjdhY2M4YzsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQuYWN0aW9uIHRkOmxhc3QtY2hpbGQgeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBoMTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmJvZHkud2hpdGUgaDI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGgzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRoOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzY0OTVlZDYzOyB9CmJvZHkud2hpdGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CiAKLyogcHJpbnQgKi8KYm9keS5wcmludCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkucHJpbnQgbGVnZW5kLCBib2R5LnByaW50IHNlbGVjdCwgYm9keS5wcmludCBpbnB1dCwgYm9keS5wcmludCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IGJveC1zaGFkb3c6MHB4IDBweCAwcHggMHB4ICM2MjZiZDA7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50LmFjdGlvbiB0ZDpsYXN0LWNoaWxkIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYubmFtZSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYuaXRlbS5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQpib2R5LnByaW50IGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LnByaW50IGZpZWxkc2V0LnBhbmVsIHsgYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgc3ZnIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQoKYm9keS5tb2JpbGUgbGVnZW5kIHsgZm9udC1zaXplOjEuNnJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgc2VsZWN0IHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IGJvcmRlci1yYWRpdXM6MDsgbWFyZ2luLXJpZ2h0OjEwOyB9CmJvZHkubW9iaWxlIHRleHRhcmVhIHsgZm9udC1zaXplOjEuMnJlbTsgYm9yZGVyLXJhZGl1czowOyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9dGV4dF0geyBmb250LXNpemU6MS4ycmVtOyBoZWlnaHQ6MzhweDsgYm9yZGVyLXJhZGl1czowOyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9YnV0dG9uXSB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozOHB4OyBib3JkZXItcmFkaXVzOjA7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuZmxvYXQgaW5wdXRbdHlwZT1idXR0b25dIHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgdGFibGUubGF5b3V0IGRpdi50b2dnbGUgeyBmb250LXNpemU6NDhweDsgfQpib2R5Lm1vYmlsZSB0YWJsZS5jb250ZW50IHRoIHsgcGFkZGluZzo2cHggNnB4OyB9Cgpib2R5Lm1vYmlsZSB0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLnByb2plY3QgeyB3aWR0aDozMHB4OyB9CmJvZHkubW9iaWxlIHRhYmxlLmxheW91dCB0ZC5jb250ZW50IGRpdi50b2dnbGUucHJvZmlsZSB7IHdpZHRoOjMwcHg7IH0KCmJvZHkubW9iaWxlIGZvcm0ub3B0aW9uPmRpdi5pdGVtIHsgbWFyZ2luOjA7IGhlaWdodDozOHB4OyB9CmJvZHkubW9iaWxlIGRpdi5hY3Rpb24+ZGl2Lml0ZW0geyBtYXJnaW46MDsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgdG9wOjM4cHg7IH0KYm9keS5tb2JpbGU+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZT5kaXYuaW5wdXQubG9naW4gaW5wdXQgeyBmb250LXNpemU6MS40cmVtOyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXVzZXJuYW1lXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXBhc3N3b3JkXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6OHB4IDIwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IHRvcDowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc3RhdGUudGltZSB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuSGVhZGVyLmhlYWQgZGl2Lm91dHB1dCBkaXYgeyBoZWlnaHQ6MzhweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlci5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMjQzOTUwYmY7IGZvbnQtc2l6ZToxLjZyZW07IG1pbi13aWR0aDoyNDBweDsgcG9zaXRpb246Zml4ZWQ7IHRvcDozcmVtOyB6LWluZGV4OjEwOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyB3aWR0aDozMjBweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5BY3Rpb24ubWFpbiB7IG1hcmdpbi10b3A6M3JlbTsgbWFyZ2luLWJvdHRvbTozcmVtOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkFjdGlvbi5tYWluLmNtZCB7IG1hcmdpbi10b3A6MDsgbWFyZ2luLWJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCBkaXYub3V0cHV0IGRpdiB7IGhlaWdodDoyLjZyZW07IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgaGVpZ2h0OjM4cHg7IH0KCmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IHBvc2l0aW9uOnVuc2V0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgd2lkdGg6MjQwcHg7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5zdGF0ZS50aW1lIHsgZGlzcGxheTpibG9jazsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuQWN0aW9uLm1haW4geyBtYXJnaW4tdG9wOjA7IG1hcmdpbi1ib3R0b206MDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgeyBwb3NpdGlvbjp1bnNldDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgd2lkdGg6MjQwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5kcmF3LnRyZW5kIGRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcudHJlbmQgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgaGVpZ2h0OjE2MHB4OyBmbG9hdDpub25lOyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0geyB3aWR0aDphdXRvOyBmbG9hdDpsZWZ0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6YXV0bzsgZmxvYXQ6bGVmdDsgfQoKLyogbWlzYyAqLwpib2R5Lm1vYmlsZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2ggZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBwYWRkaW5nOjBweDsgbWFyZ2luOjBweDsgfQpmaWVsZHNldC5wYW5lbC5BY3Rpb24uY21kPmRpdi50b2dnbGUucHJvamVjdCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wbHVnaW4uY29uZmlnIGZvcm0ub3B0aW9uIGlucHV0W25hbWU9a2V5XSB7IHdpZHRoOjI0MHB4OyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luLnBhcnNlLmNtZD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5wbGFuPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5TZWFyY2ggYSB7IGNvbG9yOnllbGxvdzsgfQpib2R5LmJsYWNrIGEgeyBjb2xvcjp5ZWxsb3c7IH0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LkhlYWRlciB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IGhlaWdodDo2MHB4OyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyIHsgYm9yZGVyLXJpZ2h0OnNvbGlkIDFweCAjZTdlN2U3OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyBwYWRkaW5nOjEwcHggMTBweDsgd2lkdGg6MjAwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IGNvbG9yOmJsYWNrOyBwYWRkaW5nOjEwcHggNDBweDsgYm9yZGVyLWxlZnQ6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzAxNTJkOTsgY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYubGlzdCBkaXYuaXRlbSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyBib3JkZXItbGVmdDpub25lOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQoKYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206IHNvbGlkIDFweCByZWQ7IGhlaWdodDozOHB4OyB3aWR0aDo2MDBweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2LmFjdGlvbiBkaXYudGFicyB7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCB7IG1hcmdpbi10b3A6NThweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXIgeyBib3gtc2hhZG93Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXI+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KCmJvZHkuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IG1pbi13aWR0aDoyNDBweDsgYm9yZGVyLXJhZGl1czo1cHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgYm94LXNoYWRvdzo1cHggNXB4IDEwcHggNXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuZmVlbC5mbG9hdCB7IHRvcDowOyB9CgpkaXYub3V0cHV0IGRpdi5yb3cgZGl2LmNvbCB7IGZsb2F0OmxlZnQ7IGJvcmRlcjpzb2xpZCAxcHggZ3JlZW47IH0KCmJvZHkud2hpdGUuc2ltcGxlIGRpdi5wcm9maWxlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5kaXNwbGF5IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5jb2RlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IGJvcmRlcjpub25lOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LnBsdWdpbiBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgbGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlPmRpdi5jYXJ0ZSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGJvcmRlcjpzb2xpZCAxcHggI2U3ZTdlNzsgfQpib2R5LndoaXRlLnNpbXBsZT5kaXYuY2FydGUgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBkaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNlM2U2ZjE7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuIHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOmJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6bGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiMwMTUyZDk7IGZvbnQtc2l6ZTowLjhyZW07IHBhZGRpbmc6NXB4IDEwcHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJveC1zaGFkb3c6MnB4IDJweCA4cHggMnB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYuYWN0aW9uPmRpdi5pdGVtIGlucHV0W3R5cGU9dGV4dF0geyBjb2xvcjpibGFjazsgfQoKYm9keS53aGl0ZSBkaXYucHJvamVjdC5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUgZGl2LnByb2ZpbGUuYXV0byB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LmJsYWNrIGRpdi5wcm9qZWN0LmF1dG8geyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5ibGFjayBkaXYucHJvZmlsZS5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmRpdi5wcm9qZWN0LmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDowOyB6LWluZGV4OjEwOyB9CmRpdi5wcm9maWxlLmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6MDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC5wbHVnaW4ubG9jYXRpb24+ZGl2LmFjdGlvbiBpbnB1dFt0eXBlPXRleHRdIHsKCXdpZHRoOjQwcHg7Cn0KCmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrOyB9CmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQpmaWVsZHNldC54dGVybT5kaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQovKiAvcGFuZWwvYWN0aW9uLmNzcyAqLwpmaWVsZHNldC5BY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMTE0LCAxNTMsIDE2MiwgMC41NCk7IG1pbi13aWR0aDoxNjBweDsgfQpmaWVsZHNldC5BY3Rpb24+ZGl2LmFjdGlvbiB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB3aWR0aDppbmhlcml0OyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24gZGl2LnRhYnMgeyBmb250LXNpemU6MS4xcmVtOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjIxcHg7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24gZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZDojNjQ5NWVkNjM7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24gZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kOiM2NDk1ZWQ2MzsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYuYWN0aW9uIHsgZGlzcGxheTpibG9jazsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYub3V0cHV0PmZpZWxkc2V0PmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5BY3Rpb24udGFicz5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbi5zZWxlY3QgeyBkaXNwbGF5OmJsb2NrOyB9CgpmaWVsZHNldC5BY3Rpb24uZ3JpZD5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IG92ZXJmbG93OmF1dG87IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4+ZGl2Lm91dHB1dCB7IG92ZXJmbG93OmF1dG87IH0KCmZpZWxkc2V0LkFjdGlvbi5mcmVlPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luIHsgcG9zaXRpb246YWJzb2x1dGU7IH0KZmllbGRzZXQuQWN0aW9uLmZyZWU+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4uc2VsZWN0IHsgZGlzcGxheTpibG9jazsgfQpmaWVsZHNldC5BY3Rpb24uZmxvdz5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IGZsb2F0OmxlZnQ7IH0KCmZpZWxkc2V0LnBhbmVsLmNtZD5kaXYub3V0cHV0PmZpZWxkc2V0LnBsdWdpbiB7IHBhZGRpbmc6MDsgbWFyZ2luOjA7IH0KZmllbGRzZXQucGFuZWwuY21kPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luPmxlZ2VuZCB7IHBhZGRpbmc6MCAxMHB4OyBtYXJnaW4tcmlnaHQ6M3B4OyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5BY3Rpb24+ZGl2LnByb2plY3QudG9nZ2xlIHsKCWJhY2tncm91bmQtY29sb3I6Y29ybnNpbGs7IG9wYWNpdHk6MC40OyBjb2xvcjp0ZWFsOyBmb250LXNpemU6IDI4cHg7IHBhZGRpbmctdG9wOiA1MHB4OyBoZWlnaHQ6IDEwMHB4OyB3aWR0aDoyMHB4OyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMzAlOwoJYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MjBweDsgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MjBweDsKfQoKZGl2LmhlYWQgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjQycHg7IGNsZWFyOmJvdGg7IH0KZGl2LmhlYWQgZGl2LnVzZXJuYW1lIHsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMHB4OyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSBkaXYubmFtZSB7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgZGl2Lmljb24geyBmbG9hdDpsZWZ0OyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSBpbWcgeyBoZWlnaHQ6NDJweDsgfQpkaXYuaGVhZCBkaXYubWVudSB7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmhlYWQ+ZGl2Lm1lbnU6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IH0KZGl2LmxlZnQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IHdpZHRoOjE2MHB4OyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93OmF1dG87IGZsb2F0OmxlZnQ7IH0KZGl2LmxlZnQgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweCAxMHB4OyB9CmRpdi5sZWZ0IGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyB9CmRpdi5sZWZ0IGRpdi51c2VybmFtZSBkaXYgeyBjb2xvcjp3aGl0ZTsgdGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6MTBweDsgfQpkaXYubGVmdCBkaXYudXNlcm5hbWUgaW1nIHsgd2lkdGg6MTIwcHg7IH0KZGl2Lm1haW4gaWZyYW1lIHsgYm9yZGVyOjA7IH0KZGl2Lm1haW4gaW5wdXRbdHlwZT1idXR0b25dIHsgcGFkZGluZzowIDIwcHg7IH0KZGl2Lm1haW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNjY2NjY2M7IGNvbG9yOmJsYWNrOyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB7IGJhY2tncm91bmQtY29sb3I6I2Y4ZjhmODsgcGFkZGluZzoxMHB4OyBtYXJnaW46MTBweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gbGVnZW5kIHsgbWFyZ2luLWJvdHRvbToxMHB4OyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBzZWxlY3QgeyBvdXRsaW5lOm5vbmU7IGJveC1zaGFkb3c6bm9uZTsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gZm9ybS5vcHRpb24geyBkaXNwbGF5OmJsb2NrOyBjbGVhcjpib3RoOyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBmb3JtLm9wdGlvbiBkaXYuaXRlbSB7IG1hcmdpbjo1cHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGRpdi5hY3Rpb24gZGl2Lml0ZW0geyBtYXJnaW46NXB4OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRyIHsgYm9yZGVyOnNvbGlkIDFweCBsaWdodGdyYXk7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IHBhZGRpbmc6MTBweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gdGFibGUuY29udGVudCB0ZCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgfQpkaXYuZm9vdCB7IGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NXB4OyBoZWlnaHQ6NDJweDsgY2xlYXI6Ym90aDsgfQpkaXYuZm9vdCBkaXYudXNlcm5hbWUgeyBmbG9hdDpyaWdodDsgbWFyZ2luLXJpZ2h0OjEwcHg7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIGRpdi5uYW1lIHsgcGFkZGluZzoxMHB4OyBmbG9hdDpsZWZ0OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBkaXYuaWNvbiB7IGZsb2F0OmxlZnQ7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIGltZyB7IGhlaWdodDo0MnB4OyB9CmRpdi5mb290IGRpdi5tZW51IHsgY3Vyc29yOnBvaW50ZXI7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuZm9vdD5kaXYubWVudTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzMyMzIzMjsgfQoKZGl2LnRhYnM6aG92ZXIgewoJYmFja2dyb3VuZC1jb2xvcjojMjcyNzI3Owp9CmRpdi50YWJzIGRpdi5uYW1lIHsKCWhlaWdodDo0NnB4OyB3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOwoJcG9zaXRpb246c3RpY2t5OyB0b3A6NXB4OwoJei1pbmRleDoxOwp9CmRpdi50YWJzIGRpdi5uYW1lIGRpdi5pdGVtIHsKCWNvbG9yOmdyYXk7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsKfQpkaXYudGFicyBkaXYubmFtZSBkaXYuaXRlbS5zZWxlY3QgewoJYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjb2xvcjp3aGl0ZTsKIAlib3JkZXItYm90dG9tOnNvbGlkIHJlZCAycHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2UgewoJb3ZlcmZsb3c6YXV0bzsgY2xlYXI6Ym90aDsKfQpkaXYudGFicyBkaXYucGFnZT5kaXYuaW5wdXQgewoJcGFkZGluZzo1cHg7IHBvc2l0aW9uOnN0aWNreTsgdG9wOjBweDsKfQpkaXYudGFicyBkaXYucGFnZT5kaXYuaW5wdXQgaW5wdXQgewoJYmFja2dyb3VuZC1jb2xvcjojMjEyMTIxOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOjA7IG91dGxpbmU6bm9uZTsgd2lkdGg6MjMwcHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lml0ZW0gewoJYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjbGVhcjpib3RoOyBkaXNwbGF5Om5vbmU7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lmxpc3QgewoJcGFkZGluZy1sZWZ0OjIwcHg7IGRpc3BsYXk6bm9uZTsgY2xlYXI6Ym90aDsKfQpkaXYudGFicyBkaXYucGFnZT5kaXYubGlzdC5zZWxlY3QgewoJYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyBkaXNwbGF5OmJsb2NrOwp9CmRpdi5sZWZ0IGRpdi5saXN0IHsKCXBhZGRpbmctbGVmdDoyMHB4Owp9CgpkaXYudGFicy5sZWZ0IGRpdi5uYW1lIHsKCWZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMubGVmdCBkaXYubmFtZSBkaXYuaXRlbSB7Cglib3JkZXItYm90dG9tOm5vbmU7IGZsb2F0Om5vbmU7Cn0KZGl2LnRhYnMubGVmdCBkaXYubmFtZSBkaXYuaXRlbS5zZWxlY3QgewoJYm9yZGVyLXJpZ2h0OnNvbGlkIHJlZCAycHg7Cn0KZGl2LnRhYnMubGVmdCBkaXYucGFnZSB7Cgl3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOwogCWNsZWFyOm5vbmU7IGZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMubGVmdCBkaXYucGFnZT5kaXYuaXRlbSB7CglkaXNwbGF5OmJsb2NrOwp9CgpkaXYudGFicy52b2lkIGRpdi5uYW1lIHsKCWRpc3BsYXk6bm9uZTsKfQpkaXYudGFicy52b2lkIGRpdi5wYWdlPmRpdi5pdGVtIHsKCWRpc3BsYXk6YmxvY2s7Cn0KCgovKiAvcGFuZWwvZm9vdGVyLmNzcyAqLwpmaWVsZHNldC5Gb290ZXIgeyBmb250LXNpemU6MS4xcmVtOyBwYWRkaW5nOjAgNXB4OyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IHsgb3ZlcmZsb3c6aGlkZGVuOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdiB7IHBhZGRpbmc6NXB4OyBoZWlnaHQ6MjFweDsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMmU1MTVmOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdi50aXRsZSB7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LnN0YXRlIHsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYudG9hc3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmRhcmtjeWFuOyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYuY21kIHsgcGFkZGluZzowcHg7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgaW5wdXRbbmFtZT1jbWRdIHsgd2lkdGg6MTIwcHg7IGJvcmRlci1yYWRpdXM6MDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBpbnB1dFtuYW1lPWNtZF06Zm9jdXMgeyB3aWR0aDozMjBweDsgfQoKLyogL3BhbmVsL2hlYWRlci5jc3MgKi8KZmllbGRzZXQuSGVhZGVyIHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IHBhZGRpbmc6MCA1cHg7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzpoaWRkZW47IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2IHsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyBmbG9hdDpsZWZ0OyBjdXJzb3I6cG9pbnRlcjsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXY6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMyZTUxNWY7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnRpdGxlIHsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUgeyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyIHsgcGFkZGluZzowOyBoZWlnaHQ6MzFweDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyPmltZyB7IGhlaWdodDozMXB4OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2ggeyBtYXJnaW4tbGVmdDoyMHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2g+aW5wdXQgeyBtYXJnaW4tdG9wOi01cHg7IGJvcmRlci1yYWRpdXM6MDsgfQoKCi8qIC9wYW5lbC9yaXZlci5jc3MgKi8KZmllbGRzZXQuUml2ZXIgeyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyBwYWRkaW5nOjAgMTJweDsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IHsgd2lkdGg6MTgwcHg7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IHBhZGRpbmc6M3B4IDE2cHg7IGJvcmRlci1sZWZ0OnNvbGlkIDNweCAjMDBmZmFlOyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBib3JkZXItbGVmdDpzb2xpZCAzcHggI2NjZGM0YzsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IHsgcGFkZGluZy1sZWZ0OjVweDsgbWFyZ2luLWxlZnQ6OHB4OyB9CgovKiAvcGFuZWwvc2VhcmNoLmNzcyAqLwpmaWVsZHNldC5TZWFyY2ggeyBiYWNrZ3JvdW5kOiMwNDFhMjViZDsgcGFkZGluZzoxMHB4OyBwb3NpdGlvbjpmaXhlZDsgbGVmdDowcHg7IHRvcDozMXB4OyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuU2VhcmNoIGlucHV0LndvcmQgeyB3aWR0aDotd2Via2l0LWZpbGwtYXZhaWxhYmxlOyB9CmZpZWxkc2V0LnBhbmVsLlNlYXJjaD5kaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgZGFya2N5YW47IH0KCi8qIC9wbHVnaW4vbG9jYWwvY2hhdC9kaXYuY3NzICovCmZpZWxkc2V0LmxheW91dCBsZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQubGF5b3V0IGZpZWxkc2V0LnBsdWdpbiB7IHBhZGRpbmc6MDsgbWFyZ2luOjA7IH0KCmZpZWxkc2V0LmRpdiBkaXYub3V0cHV0IHRkIHsgdmVydGljYWwtYWxpZ246dG9wOyB9CmZpZWxkc2V0LmRpdiBkaXYub3V0cHV0IGZpZWxkc2V0LnNwYW4+ZGl2Lm91dHB1dD5maWVsZHNldCB7IG92ZXJmbG93OmF1dG87IGZsb2F0OmxlZnQ7IH0KCmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdj5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdiBkaXYucHJvamVjdCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXYgZGl2LnByb2ZpbGUgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmRpdi5zdGF0dXMgeyBkaXNwbGF5Om5vbmU7IH0KCgovKiAvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIuY3NzICovCmZpZWxkc2V0LmlubmVyPmZvcm0ub3B0aW9uIGlucHV0W25hbWU9cGF0aF0geyB3aWR0aDo4MHB4OyB9CmZpZWxkc2V0LmlubmVyPmZvcm0ub3B0aW9uIGlucHV0W25hbWU9ZmlsZV0geyB3aWR0aDoxNjBweDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuYWN0aW9uPmRpdi50YWJzIHsgcGFkZGluZzo1cHg7IG1hcmdpbjowIDFweDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuYWN0aW9uPmRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LmFjdGlvbj5kaXYudGFicy5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQoKZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50IHsgcG9zaXRpb246cmVsYXRpdmU7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOndoaXRlOyBmb250LXNpemU6MTZweDsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBwb3NpdGlvbjpyZWxhdGl2ZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLmxpbmUgeyBwb3NpdGlvbjpzdGlja3k7IGxlZnQ6MDsgdGV4dC1hbGlnbjpyaWdodDsgcGFkZGluZzowIDZweDsgYm9yZGVyLXJpZ2h0OnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0cjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgdGQubGluZSB7IGJhY2tncm91bmQtY29sb3I6IzY0OTVlZDYzOyBib3JkZXI6c29saWQgMXB4IHJlZDsgYm9yZGVyLXJpZ2h0OnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHsgd2hpdGUtc3BhY2U6cHJlOyBwYWRkaW5nLWxlZnQ6MTBweDsgY3Vyc29yOnRleHQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uY29tbWVudCB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgY29sb3I6Y3lhbjsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5rZXl3b3JkIHsgY29sb3I6eWVsbG93OyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmRhdGF0eXBlIHsgY29sb3I6Z3JlZW47IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uZnVuY3Rpb24geyBjb2xvcjpjeWFuOyBmb250LXdlaWdodDpib2xkOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmNvbnN0YW50IHsgY29sb3I6bWFnZW50YTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5zdHJpbmcgeyBjb2xvcjptYWdlbnRhOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudCBpZnJhbWUgeyBib3JkZXI6MDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLnByb2ZpbGUgaWZyYW1lIHsgYm9yZGVyOjA7IH0KCmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnBhdGggeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuaW5uZXIgZGl2Lm91dHB1dCBmaWVsZHNldC50b29sa2l0IHsgcG9zaXRpb246YWJzb2x1dGU7IGJvdHRvbTowcHg7IHJpZ2h0OjBweDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGZpZWxkc2V0LnRvb2xraXQ+ZGl2Lm91dHB1dD5maWVsZHNldCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGZpZWxkc2V0LnRvb2xraXQ+ZGl2Lm91dHB1dD5maWVsZHNldC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgY29sb3I6d2hpdGU7IGRpc3BsYXk6YmxvY2s7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQgeyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyZWVuOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpncmVlbjsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIHsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IH0KCmJvZHkud2hpdGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUgZmllbGRzZXQuaW5uZXIuZmxvYXQ+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOndoaXRlOyB9CmJvZHkuYmxhY2sgZmllbGRzZXQuaW5uZXIuZmxvYXQ+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB7IGNvbG9yOndoaXRlOyB9Cgpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyYXk7IHBhZGRpbmc6MHB4OyBoZWlnaHQ6MzFweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyYXk7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgcGFkZGluZzo3cHggMjBweDsgaGVpZ2h0OjE3cHg7IGZsb2F0OmxlZnQ7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzFkMzM0OTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi5wYXRoIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyBwYWRkaW5nOjRweCAxMHB4OyBtYXJnaW4tYm90dG9tOjRweDsgZGlzcGxheTpibG9jazsgY2xlYXI6Ym90aDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLmxpbmUgeyBwYWRkaW5nLXRvcDo0cHg7IGJvcmRlci1yaWdodDpub25lOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCB7IHBhZGRpbmctdG9wOjJweDsgYm9yZGVyOnNvbGlkIDFweCB0cmFuc3BhcmVudDsgfQoKYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYucHJvamVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5wcm9qZWN0LnRvZ2dsZSB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lml0ZW0geyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlc21va2U7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicy5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsgYm94LXNoYWRvdzowcHggMHB4IDVweCAxcHggZ3JleTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnBhdGggeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHRkLmxpbmUgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgY29sb3I6d2hpdGU7IGJvcmRlcjpub25lOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdHIuc2VsZWN0IHRkLnRleHQgeyBib3JkZXI6c29saWQgMXB4IGxpZ2h0Z3JheTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5zdHJpbmcgeyBjb2xvcjpyb3lhbGJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uZnVuY3Rpb24geyBjb2xvcjpkYXJrcmVkOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmtleXdvcmQgeyBjb2xvcjpibHVlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IGNvbG9yOmJsYWNrOyBwYWRkaW5nOjBweCAxMHB4OyBib3JkZXItbGVmdDpzb2xpZCAycHggcmVkOyBoZWlnaHQ6MzBweDsgZmxvYXQ6cmlnaHQ7IGJvcmRlci1yYWRpdXM6MDsgYm94LXNoYWRvdzpub25lOyB9Cgpib2R5Lm1vYmlsZSBmaWVsZHNldC5pbm5lcj5mb3JtLm9wdGlvbiBpbnB1dFtuYW1lPWZpbGVdIHsgd2lkdGg6OTBweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5wbHVnaW4uaW5uZXIgZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQucGx1Z2luLmlubmVyIGRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9Cgpib2R5Lm1vYmlsZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpibG9jazsgfQpib2R5Lm1vYmlsZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGJsdWU7IHdpZHRoOjMwcHg7IH0KYm9keS5tb2JpbGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnRvZ2dsZS5kaXNwbGF5IHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGJsdWU7IG1hcmdpbi10b3A6LTMzcHg7IGhlaWdodDozMHB4OyB3aWR0aDoxMDBweDsgfQoKLnVuc2VsZWN0YWJsZSB7Cgktd2Via2l0LXRvdWNoLWNhbGxvdXQ6bm9uZTsKCS13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsKCS1raHRtbC11c2VyLXNlbGVjdDpub25lOwoJLW1vei11c2VyLXNlbGVjdDpub25lOwoJLW1zLXVzZXItc2VsZWN0Om5vbmU7Cgktby11c2VyLXNlbGVjdDpub25lOwoJdXNlci1zZWxlY3Q6bm9uZTsKfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5wbHVnaW4gZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ubm9uY2UgeyBjb2xvcjpsaWdodGdyYXk7IH0KCi8qIC9wbHVnaW4vbG9jYWwvY29kZS92aW1lci5jc3MgKi8KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50IHsKCWJhY2tncm91bmQtY29sb3I6IzAwMDAwMDAwOyBjb2xvcjojMDAwMDAwMDA7IGZvbnQtc2l6ZToxZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsKCXBhZGRpbmc6MDsgcGFkZGluZy1sZWZ0OjEycHg7IGJvcmRlcjpub25lOyBvdXRsaW5lOm5vbmU7IG1hcmdpbjowOyBtYXJnaW4tdG9wOi0zcHg7CiAJaGVpZ2h0OjIycHg7IHBvc2l0aW9uOmFic29sdXRlOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5ub3JtYWwgeyBjYXJldC1jb2xvcjpncmF5OyB9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5pbnNlcnQgeyBjYXJldC1jb2xvcjp5ZWxsb3c7IH0KCmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHsKCWhlaWdodDoyMHB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDozMnB4OyBtYXJnaW4tdG9wOjIwcHg7CglkaXNwbGF5Om5vbmU7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUuaW5zZXJ0IHsKCWRpc3BsYXk6YmxvY2s7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MS4xcmVtOyBjb2xvcjojZjBmOGZmMDA7IG1hcmdpbi1sZWZ0OjVweDsgZmxvYXQ6bGVmdDsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZSB7CgliYWNrZ3JvdW5kOmxpZ2h0Ymx1ZTsgbWF4LWhlaWdodDo0MDBweDsgbWF4LXdpZHRoOjgwMHB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0Owp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGggewoJZGlzcGxheTpub25lOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGQgewoJZm9udC1zaXplOjEuMXJlbTsKfQoKYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MXJlbTsKfQpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRkIHsKCWZvbnQtc2l6ZToxcmVtOwp9Cgpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQgewogCW1hcmdpbi10b3A6MXB4Owp9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lmluc2VydCB7IGNhcmV0LWNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lm5vcm1hbCB7IGNhcmV0LWNvbG9yOmxpZ2h0Z3JheTsgfQoKZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5saXN0IGRpdi5pdGVtIHsgcGFkZGluZzo1cHg7IGZsb2F0OmxlZnQ7IGNsZWFyOm5vbmU7IH0KZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KCi8qIC9wbHVnaW4vbG9jYWwvdGVhbS9wbGFuLmNzcyAqLwpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgdGQgeyB2ZXJ0aWNhbC1hbGlnbjp0b3A7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkLm92ZXIgeyBib3JkZXI6c29saWQgMnB4IHJlZDsgfQpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgdGQgZGl2LmRhdGUgeyBjb2xvcjpncmF5OyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYucHJlcGFyZSB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgY29sb3I6d2hpdGU7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IGRpdi5wcm9jZXNzIHsgYmFja2dyb3VuZC1jb2xvcjpncmVlbjsgY29sb3I6d2hpdGU7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IGRpdi5jYW5jZWwgeyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgY29sb3I6d2hpdGU7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IGRpdi5maW5pc2ggeyBiYWNrZ3JvdW5kLWNvbG9yOmdyYXk7IGNvbG9yOndoaXRlOyB9CgovKiAvcGx1Z2luL2xvY2FsL3dpa2kvZGF0YS5jc3MgKi8KZmllbGRzZXQuZGF0YSBkaXYub3V0cHV0IHRhYmxlLmNvbnRlbnQgdHIuc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQpmaWVsZHNldC5kYXRhIGRpdi5vdXRwdXQgdGFibGUuY29udGVudCB0ci5vdmVyIHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQoKLyogL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuY3NzICovCmZpZWxkc2V0LmRyYXcgZGl2Lm91dHB1dCB7IGJhY2tncm91bmQtY29sb3I6IzFiNWI3MzhjOyBmb250LXNpemU6MjBweDsgfQpmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgc3ZnIHsgYmFja2dyb3VuZC1jb2xvcjojMWI1YjczOGM7IH0KCi8qIC9wbHVnaW4vbG9jYWwvd2lraS9mZWVsLmNzcyAqLwpmaWVsZHNldC5mZWVsIGRpdi5vdXRwdXQgaW1nIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5mZWVsIGRpdi5vdXRwdXQgdmlkZW8geyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LmZlZWwuZmxvYXQgZGl2Lm91dHB1dCBpbWcgeyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpub25lOyBtYXJnaW46YXV0bzsgfQpmaWVsZHNldC5mZWVsLmZsb2F0IGRpdi5vdXRwdXQgdmlkZW8geyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpub25lOyBtYXJnaW46YXV0bzsgfQoKLyogL3BsdWdpbi9sb2NhbC93aWtpL3dvcmQuY3NzICovCmZpZWxkc2V0LndvcmQgZm9ybS5vcHRpb24gaW5wdXRbbmFtZT1wYXRoXSB7IHdpZHRoOjEyN3B4OyB9CgpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IHsgYmFja2dyb3VuZC1jb2xvcjppbmhlcml0OyBvdmVyZmxvdzphdXRvOyBtaW4td2lkdGg6MTIwcHg7IGNsZWFyOmJvdGg7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQud29yZD5kaXYubmF2bWVudSBkaXYubGlzdCB7IG1hcmdpbi1sZWZ0OjIwcHg7IH0KZmllbGRzZXQud29yZD5kaXYubmF2bWVudSBkaXYuaXRlbSB7IGZvbnQtc2l6ZToxLjRlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgZm9udC1mYW1pbHk6Y3Vyc2l2ZTsgcGFkZGluZzo0cHggMjBweDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51PmRpdi5pdGVtIHsgZm9udC1zaXplOjEuNmVtOyB9CgpmaWVsZHNldC53b3JkIGEgeyB3b3JkLWJyZWFrOmJyZWFrLWFsbDsgfQpmaWVsZHNldC53b3JkIGJyLnN0b3J5IHsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5IHsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnkgbGkuSDIgeyBmb250LXNpemU6MS40ZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeSBsaS5IMyB7IGZvbnQtc2l6ZToxLjJlbTsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5W2RhdGEtdHlwZT1wcmVtZW51XSB7IGN1cnNvcjpwb2ludGVyOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnlbZGF0YS10eXBlPXByZW1lbnVdIGxpOmhvdmVyIHsgYmFja2dyb3VuZDpjeWFuOyBjb2xvcjpibHVlOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnlbZGF0YS10eXBlPWVuZG1lbnVdIHsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC53b3JkIHAuc3RvcnlbZGF0YS1uYW1lPWlubmVyXSB7IGJhY2tncm91bmQtY29sb3I6IzRiNmM4YTdhOyBwYWRkaW5nOjRweCAxMHB4OyBib3JkZXItbGVmdDpzb2xpZCA0cHggYmx1ZTsgbWFyZ2luOjEwcHggMHB4OyB9CmZpZWxkc2V0LndvcmQgcC5zdG9yeVtkYXRhLW5hbWU9aW5uZXJdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojYzEwYzhhOyBjdXJzb3I6Y29weTsgfQpmaWVsZHNldC53b3JkIGZpZWxkc2V0LnN0b3J5IHsgbWFyZ2luOjEwcHg7IH0KZmllbGRzZXQud29yZCBmaWVsZHNldC5zdG9yeS5mdWxsIHsgbWFyZ2luOjBweDsgfQoKZmllbGRzZXQud29yZC5mbG9hdCB7IHBhZGRpbmc6MDsgbWFyZ2luOjA7IHdpZHRoOi13ZWJraXQtZmlsbC1hdmFpbGFibGU7IHBvc2l0aW9uOmZpeGVkOyBsZWZ0OjA7IHRvcDowOyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6Y29udGVudHM7IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYuc3RhdHVzIHsgY2xlYXI6bm9uZTsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiNmMGY4ZmY4MDsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2Lm91dHB1dD5kaXYucHJvamVjdCB7IGJhY2tncm91bmQ6IzQ2ODJiNDZiOyBwYWRkaW5nOjEwcHg7IHBvc2l0aW9uOmZpeGVkOyByaWdodDowOyB0b3A6MzFweDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGRpdi5jb250ZW50IGRpdi5wYWdlIHsgbWFyZ2luLXRvcDozMXB4OyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5mbG9hdCBkaXYuY29udGVudCBkaXYucGFnZS5zaG93IHsgZGlzcGxheTpibG9jazsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGRpdi5jb250ZW50LmdyaWQgZGl2LnBhZ2UgeyBiYWNrZ3JvdW5kLWNvbG9yOiNhNGNiZWNiNTsgbWFyZ2luOjEwcHg7IGhlaWdodDoyMDBweDsgd2lkdGg6MjAwcHg7IG92ZXJmbG93OmF1dG87IGRpc3BsYXk6YmxvY2s7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQud29yZC5mbG9hdCBoMSB7IHRleHQtYWxpZ246Y2VudGVyOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgaDIgeyB0ZXh0LWFsaWduOmNlbnRlcjsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGgzIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KCmZpZWxkc2V0LndvcmQuY21kPmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmNtZD5mb3JtLm9wdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmNtZD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmRpdi5zdGF0dXMgeyBkaXNwbGF5Om5vbmU7IH0KCmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdW2RhdGEtbmFtZT1maWVsZF0+ZGl2Lm1lbnUgeyBmbG9hdDpsZWZ0OyBvdmVyZmxvdzphdXRvOyB9CmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdW2RhdGEtbmFtZT1maWVsZF0+ZGl2Lmxpc3QgeyBmbG9hdDpsZWZ0OyBvdmVyZmxvdzphdXRvOyB9CmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdW2RhdGEtbmFtZT1maWVsZF0+ZGl2Lm1lbnUgZGl2Lmxpc3QgZGl2Lml0ZW0geyBwYWRkaW5nOjAgMjBweDsgfQoKZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPXNoZWxsXSBsYWJlbCB7CgktbW96LXVzZXItc2VsZWN0Om5vbmU7IC8q54Gr54uQKi8KCS13ZWJraXQtdXNlci1zZWxlY3Q6bm9uZTsgLyp3ZWJraXTmtY/op4jlmagqLwoJLW1zLXVzZXItc2VsZWN0Om5vbmU7IC8qSUUxMCovCgkta2h0bWwtdXNlci1zZWxlY3Q6bm9uZTsgLyrml6nmnJ/mtY/op4jlmagqLwoJdXNlci1zZWxlY3Q6bm9uZTsKfQoKCi8qIC9wbHVnaW4vc3RvcnkvZm9ybS5jc3MgKi8KZGl2Lm91dHB1dC5mb3JtIGRpdi5pdGVtIHsKCXBhZGRpbmc6NDBweDsKfQoKLyogL3BsdWdpbi9zdG9yeS9qc29uLmNzcyAqLwpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwMDAwOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBkaXYuaXRlbSB7IHBhZGRpbmctbGVmdDoxNXB4OyBib3JkZXI6c29saWQgMXB4ICMwMDAwMDAwZDsgYm9yZGVyLWxlZnQ6ZGFzaGVkIDFweCBsaWdodGJsdWU7IG1hcmdpbi1sZWZ0OjVweDsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gZGl2Lml0ZW06aG92ZXIgeyBib3JkZXI6c29saWQgMXB4IHJlZDsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5ub25jZSB7IGNvbG9yOiM5Y2JlY2E0ZjsgY3Vyc29yOnBvaW50ZXI7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ua2V5IHsgY29sb3I6eWVsbG93OyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLnN0cmluZyB7IGNvbG9yOm1hZ2VudGE7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4uY29uc3QgeyBjb2xvcjpjeWFuOyB9CgoKLyogL3BsdWdpbi9zdG9yeS9zcGlkZS5jc3MgKi8KZmllbGRzZXQuZHJhdy5zcGlkZSBkaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5Om5vbmU7IH0KCi8qIC9wbHVnaW4vc3RvcnkvdHJlbmQuY3NzICovCmZpZWxkc2V0LmRyYXcudHJlbmQgZGl2Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgoKLyogL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0vY3NzL3h0ZXJtLmNzcyAqLwovKioKICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSB4dGVybS5qcyBhdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLgogKiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxMywgQ2hyaXN0b3BoZXIgSmVmZnJleSAoTUlUIExpY2Vuc2UpCiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jaGpqL3Rlcm0uanMKICogQGxpY2Vuc2UgTUlUCiAqCiAqIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwogKiB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCiAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwogKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgogKgogKiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbgogKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KICoKICogVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1IKICogSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksCiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRQogKiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSCiAqIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sCiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4KICogVEhFIFNPRlRXQVJFLgogKgogKiBPcmlnaW5hbGx5IGZvcmtlZCBmcm9tICh3aXRoIHRoZSBhdXRob3IncyBwZXJtaXNzaW9uKToKICogICBGYWJyaWNlIEJlbGxhcmQncyBqYXZhc2NyaXB0IHZ0MTAwIGZvciBqc2xpbnV4OgogKiAgIGh0dHA6Ly9iZWxsYXJkLm9yZy9qc2xpbnV4LwogKiAgIENvcHlyaWdodCAoYykgMjAxMSBGYWJyaWNlIEJlbGxhcmQKICogICBUaGUgb3JpZ2luYWwgZGVzaWduIHJlbWFpbnMuIFRoZSB0ZXJtaW5hbCBpdHNlbGYKICogICBoYXMgYmVlbiBleHRlbmRlZCB0byBpbmNsdWRlIHh0ZXJtIENTSSBjb2RlcywgYW1vbmcKICogICBvdGhlciBmZWF0dXJlcy4KICovCgovKioKICogIERlZmF1bHQgc3R5bGVzIGZvciB4dGVybS5qcwogKi8KCi54dGVybSB7CiAgICBjdXJzb3I6IHRleHQ7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICB1c2VyLXNlbGVjdDogbm9uZTsKICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTsKICAgIC13ZWJraXQtdXNlci1zZWxlY3Q6IG5vbmU7Cn0KCi54dGVybS5mb2N1cywKLnh0ZXJtOmZvY3VzIHsKICAgIG91dGxpbmU6IG5vbmU7Cn0KCi54dGVybSAueHRlcm0taGVscGVycyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICAvKioKICAgICAqIFRoZSB6LWluZGV4IG9mIHRoZSBoZWxwZXJzIG11c3QgYmUgaGlnaGVyIHRoYW4gdGhlIGNhbnZhc2VzIGluIG9yZGVyIGZvcgogICAgICogSU1FcyB0byBhcHBlYXIgb24gdG9wLgogICAgICovCiAgICB6LWluZGV4OiA1Owp9CgoueHRlcm0gLnh0ZXJtLWhlbHBlci10ZXh0YXJlYSB7CiAgICBwYWRkaW5nOiAwOwogICAgYm9yZGVyOiAwOwogICAgbWFyZ2luOiAwOwogICAgLyogTW92ZSB0ZXh0YXJlYSBvdXQgb2YgdGhlIHNjcmVlbiB0byB0aGUgZmFyIGxlZnQsIHNvIHRoYXQgdGhlIGN1cnNvciBpcyBub3QgdmlzaWJsZSAqLwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgb3BhY2l0eTogMDsKICAgIGxlZnQ6IC05OTk5ZW07CiAgICB0b3A6IDA7CiAgICB3aWR0aDogMDsKICAgIGhlaWdodDogMDsKICAgIHotaW5kZXg6IC01OwogICAgLyoqIFByZXZlbnQgd3JhcHBpbmcgc28gdGhlIElNRSBhcHBlYXJzIGFnYWluc3QgdGhlIHRleHRhcmVhIGF0IHRoZSBjb3JyZWN0IHBvc2l0aW9uICovCiAgICB3aGl0ZS1zcGFjZTogbm93cmFwOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKICAgIHJlc2l6ZTogbm9uZTsKfQoKLnh0ZXJtIC5jb21wb3NpdGlvbi12aWV3IHsKICAgIC8qIFRPRE86IENvbXBvc2l0aW9uIHBvc2l0aW9uIGdvdCBtZXNzZWQgdXAgc29tZXdoZXJlICovCiAgICBiYWNrZ3JvdW5kOiAjMDAwOwogICAgY29sb3I6ICNGRkY7CiAgICBkaXNwbGF5OiBub25lOwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgIHotaW5kZXg6IDE7Cn0KCi54dGVybSAuY29tcG9zaXRpb24tdmlldy5hY3RpdmUgewogICAgZGlzcGxheTogYmxvY2s7Cn0KCi54dGVybSAueHRlcm0tdmlld3BvcnQgewogICAgLyogT24gT1MgWCB0aGlzIGlzIHJlcXVpcmVkIGluIG9yZGVyIGZvciB0aGUgc2Nyb2xsIGJhciB0byBhcHBlYXIgZnVsbHkgb3BhcXVlICovCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOwogICAgb3ZlcmZsb3cteTogc2Nyb2xsOwogICAgY3Vyc29yOiBkZWZhdWx0OwogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcmlnaHQ6IDA7CiAgICBsZWZ0OiAwOwogICAgdG9wOiAwOwogICAgYm90dG9tOiAwOwp9CgoueHRlcm0gLnh0ZXJtLXNjcmVlbiB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7Cn0KCi54dGVybSAueHRlcm0tc2NyZWVuIGNhbnZhcyB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiAwOwogICAgdG9wOiAwOwp9CgoueHRlcm0gLnh0ZXJtLXNjcm9sbC1hcmVhIHsKICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKfQoKLnh0ZXJtLWNoYXItbWVhc3VyZS1lbGVtZW50IHsKICAgIGRpc3BsYXk6IGlubGluZS1ibG9jazsKICAgIHZpc2liaWxpdHk6IGhpZGRlbjsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHRvcDogMDsKICAgIGxlZnQ6IC05OTk5ZW07CiAgICBsaW5lLWhlaWdodDogbm9ybWFsOwp9CgoueHRlcm0uZW5hYmxlLW1vdXNlLWV2ZW50cyB7CiAgICAvKiBXaGVuIG1vdXNlIGV2ZW50cyBhcmUgZW5hYmxlZCAoZWcuIHRtdXgpLCByZXZlcnQgdG8gdGhlIHN0YW5kYXJkIHBvaW50ZXIgY3Vyc29yICovCiAgICBjdXJzb3I6IGRlZmF1bHQ7Cn0KCi54dGVybS54dGVybS1jdXJzb3ItcG9pbnRlciwKLnh0ZXJtIC54dGVybS1jdXJzb3ItcG9pbnRlciB7CiAgICBjdXJzb3I6IHBvaW50ZXI7Cn0KCi54dGVybS5jb2x1bW4tc2VsZWN0LmZvY3VzIHsKICAgIC8qIENvbHVtbiBzZWxlY3Rpb24gbW9kZSAqLwogICAgY3Vyc29yOiBjcm9zc2hhaXI7Cn0KCi54dGVybSAueHRlcm0tYWNjZXNzaWJpbGl0eSwKLnh0ZXJtIC54dGVybS1tZXNzYWdlIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICBib3R0b206IDA7CiAgICByaWdodDogMDsKICAgIHotaW5kZXg6IDEwOwogICAgY29sb3I6IHRyYW5zcGFyZW50Owp9CgoueHRlcm0gLmxpdmUtcmVnaW9uIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGxlZnQ6IC05OTk5cHg7CiAgICB3aWR0aDogMXB4OwogICAgaGVpZ2h0OiAxcHg7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9CgoueHRlcm0tZGltIHsKICAgIG9wYWNpdHk6IDAuNTsKfQoKLnh0ZXJtLXVuZGVybGluZSB7CiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsKfQoKLnh0ZXJtLXN0cmlrZXRocm91Z2ggewogICAgdGV4dC1kZWNvcmF0aW9uOiBsaW5lLXRocm91Z2g7Cn0KCi54dGVybS1zY3JlZW4gLnh0ZXJtLWRlY29yYXRpb24tY29udGFpbmVyIC54dGVybS1kZWNvcmF0aW9uIHsKCXotaW5kZXg6IDY7Cglwb3NpdGlvbjogYWJzb2x1dGU7Cn0KCi54dGVybS1kZWNvcmF0aW9uLW92ZXJ2aWV3LXJ1bGVyIHsKICAgIHotaW5kZXg6IDc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDA7CiAgICByaWdodDogMDsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwp9CgoueHRlcm0tZGVjb3JhdGlvbi10b3AgewogICAgei1pbmRleDogMjsKICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKfQoK",
        "usr/volcanos/page/can.js": "dmFyIGtpdCA9IHsKCURpY3Q6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgeyByZXNbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdIH0KCQlyZXR1cm4gcmVzCgl9Cn0KdmFyIGljZSA9IHsKCVRCOiAiXHQiLCBTUDogIiAiLCBERjogIjoiLCBFUTogIj0iLCBBVDogIkAiLCBQUzogIi8iLCBQVDogIi4iLCBGUzogIiwiLCBOTDogIlxuIiwgTFQ6ICI8IiwgR1Q6ICI+IiwKCU9LOiAib2siLCBUUlVFOiAidHJ1ZSIsIEZBTFNFOiAiZmFsc2UiLCBTVUNDRVNTOiAic3VjY2VzcyIsIEZBSUxVUkU6ICJmYWlsdXJlIiwgUFJPQ0VTUzogInByb2Nlc3MiLAoKCUFVVE86ICJhdXRvIiwgTElTVDogImxpc3QiLCBCQUNLOiAiYmFjayIsIEVYRUM6ICJleGVjIiwKCVNIT1c6ICJzaG93IiwgSElERTogImhpZGUiLCBIRUxQOiAiaGVscCIsIEhUVFA6ICJodHRwIiwKCVZJRVc6ICJ2aWV3IiwgTU9ERTogIm1vZGUiLCBTSElQOiAic2hpcCIsIENPUFk6ICJjb3B5IiwKCglQT0Q6ICJwb2QiLCBDVFg6ICJjdHgiLCBDTUQ6ICJjbWQiLCBBUkc6ICJhcmciLCBSRVM6ICJyZXMiLAoJUlVOOiAicnVuIiwgRVJSOiAiZXJyIiwgT1BUOiAib3B0IiwKCUNBTjogImNhbiIsCglQV0Q6ICIuLyIsCgoJTVNHX0RFVEFJTDogImRldGFpbCIsCglNU0dfT1BUSU9OOiAib3B0aW9uIiwKCU1TR19BUFBFTkQ6ICJhcHBlbmQiLAoJTVNHX1JFU1VMVDogInJlc3VsdCIsCglNU0dfRklFTERTOiAiZmllbGRzIiwKCU1TR19TRVNTSUQ6ICJzZXNzaWQiLAoKCU1TR19TT1VSQ0U6ICJfc291cmNlIiwKCU1TR19UQVJHRVQ6ICJfdGFyZ2V0IiwKCU1TR19IQU5ETEU6ICJfaGFuZGxlIiwKCU1TR19VUExPQUQ6ICJfdXBsb2FkIiwKCU1TR19EQUVNT046ICJfZGFlbW9uIiwKCU1TR19BQ1RJT046ICJfYWN0aW9uIiwKCU1TR19TVEFUVVM6ICJfc3RhdHVzIiwKCU1TR19QUkVGSVg6ICJfcHJlZml4IiwKCglNU0dfRElTUExBWTogIl9kaXNwbGF5IiwKCU1TR19QUk9DRVNTOiAiX3Byb2Nlc3MiLAoKCU1TR19VU0VSTkFNRTogInVzZXIubmFtZSIsCglNU0dfVVNFUk5JQ0s6ICJ1c2VyLm5pY2siLAoKCU1TR19USVRMRTogInNlc3MudGl0bGUiLAoJTVNHX1RPUElDOiAic2Vzcy50b3BpYyIsCglNU0dfUklWRVI6ICJzZXNzLnJpdmVyIiwKCU1TR19TVE9STTogInNlc3Muc3Rvcm0iLAoJTVNHX1RPQVNUOiAic2Vzcy50b2FzdCIsCgoJUFJPQ0VTU19BR0FJTjogIl9hZ2FpbiIsCgoJRXJyV2FybjogIndhcm46ICIsCglFcnJOb3RMb2dpbjogIm5vdCBsb2dpbjogIiwKCUVyck5vdFJpZ2h0OiAibm90IHJpZ2h0OiAiLAoJRXJyTm90Rm91bmQ6ICJub3QgZm91bmQ6ICIsCn0KCnZhciBjdHggPSB7CglDT05URVhUOiAiY29udGV4dCIsIENPTU1BTkQ6ICJjb21tYW5kIiwgQ09ORklHOiAiY29uZmlnIiwKCUlOREVYOiAiaW5kZXgiLCBBUkdTOiAiYXJncyIsIFNUWUxFOiAic3R5bGUiLCBESVNQTEFZOiAiZGlzcGxheSIsIEFDVElPTjogImFjdGlvbiIsCglJTlBVVFM6ICJpbnB1dHMiLCBGRUFUVVJFOiAiZmVhdHVyZSIsCn0KdmFyIGNsaSA9IHsKCURBRU1PTjogImRhZW1vbiIsCglTVEFSVDogInN0YXJ0IiwgU1RPUDogInN0b3AiLCBPUEVOOiAib3BlbiIsIENMT1NFOiAiY2xvc2UiLCBCRUdJTjogImJlZ2luIiwgRU5EOiAiZW5kIiwKCglDT0xPUjogImNvbG9yIiwKCVJFRDogInJlZCIsIEdSRUVOOiAiZ3JlZW4iLCBCTFVFOiAiYmx1ZSIsCglZRUxMT1c6ICJ5ZWxsb3ciLCBDWUFOOiAiY3lhbiIsIFBVUlBMRTogInB1cnBsZSIsIE1BR0VOVEE6ICJtYWdlbnRhIiwKCVdISVRFOiAid2hpdGUiLCBCTEFDSzogImJsYWNrIiwKCglNQUtFOiAibWFrZSIsIE1BSU46ICJtYWluIiwgRVhFQzogImV4ZWMiLCBET05FOiAiZG9uZSIsCglDT0RFOiAiY29kZSIsIENPU1Q6ICJjb3N0IiwgQkFDSzogImJhY2siLCBGUk9NOiAiZnJvbSIsCglFUlJPUjogImVycm9yIiwgQ0xFQVI6ICJjbGVhciIsIFJFRlJFU0g6ICJyZWZyZXNoIiwKCVNIT1c6ICJzaG93IiwgRlVMTDogImZ1bGwiLAp9CnZhciBuZnMgPSB7CglaTUw6ICJ6bWwiLCBJTUw6ICJpbWwiLCBUWFQ6ICJ0eHQiLAoJSFRNTDogImh0bWwiLCBDU1M6ICJjc3MiLCBKUzogImpzIiwgR086ICJnbyIsIFNIOiAic2giLCBDU1Y6ICJjc3YiLCBKU09OOiAianNvbiIsCglQQVRIOiAicGF0aCIsIEZJTEU6ICJmaWxlIiwgTElORTogImxpbmUiLCBTSVpFOiAic2l6ZSIsCglTQVZFOiAic2F2ZSIsIExPQUQ6ICJsb2FkIiwgVEFHUzogInRhZ3MiLCBGSU5EOiAiZmluZCIsIEdSRVA6ICJncmVwIiwKCURJUjogImRpciIsIENBVDogImNhdCIsIERFRlM6ICJkZWZzIiwgVFJBU0g6ICJ0cmFzaCIsCglESVJfUk9PVDogImRpcl9yb290IiwKCVNDUklQVDogInNjcmlwdCIsCn0KdmFyIG1kYiA9IHsKCURJQ1Q6ICJkaWN0IiwgTUVUQTogIm1ldGEiLCBIQVNIOiAiaGFzaCIsIExJU1Q6ICJsaXN0IiwKCglJRDogImlkIiwgS0VZOiAia2V5IiwgVElNRTogInRpbWUiLCBaT05FOiAiem9uZSIsIFRZUEU6ICJ0eXBlIiwgTkFNRTogIm5hbWUiLCBURVhUOiAidGV4dCIsCglMSU5LOiAibGluayIsIFNDQU46ICJzY2FuIiwgU0hPVzogInNob3ciLCBIRUxQOiAiaGVscCIsCglTSE9SVDogInNob3J0IiwgRklFTEQ6ICJmaWVsZCIsIFRPVEFMOiAidG90YWwiLCBDT1VOVDogImNvdW50IiwgTElNSVQ6ICJsaW1pdCIsCglJTkRFWDogImluZGV4IiwgVkFMVUU6ICJ2YWx1ZSIsIEVYVFJBOiAiZXh0cmEiLCBBTElBUzogImFsaWFzIiwgRVhQSVJFOiAiZXhwaXJlIiwKCglDUkVBVEU6ICJjcmVhdGUiLCBSRU1PVkU6ICJyZW1vdmUiLCBJTlNFUlQ6ICJpbnNlcnQiLCBERUxFVEU6ICJkZWxldGUiLAoJTU9ESUZZOiAibW9kaWZ5IiwgU0VMRUNUOiAic2VsZWN0IiwKCUlOUFVUUzogImlucHV0cyIsIFBSVU5FUzogInBydW5lcyIsIEVYUE9SVDogImV4cG9ydCIsIElNUE9SVDogImltcG9ydCIsCglVUExPQUQ6ICJ1cGxvYWQiLAoKCVNFQVJDSDogInNlYXJjaCIsIEVOR0lORTogImVuZ2luZSIsIFJFTkRFUjogInJlbmRlciIsIFBMVUdJTjogInBsdWdpbiIsCglQQUdFOiAicGFnZSIsIE5FWFQ6ICJuZXh0IiwgUFJFVjogInByZXYiLCBMSU1JVDogImxpbWl0IiwgT0ZGRU5EOiAib2ZmZW5kIiwKCU1BSU46ICJtYWluIiwKCglGT1JFQUNIOiAiKiIsIFJBTkRPTVM6ICIlIiwKfQp2YXIgYWFhID0gewoJUEFTU1dPUkQ6ICJwYXNzd29yZCIsIFVTRVJOQU1FOiAidXNlcm5hbWUiLCBVU0VSTklDSzogInVzZXJuaWNrIiwgQkFDS0dST1VORDogImJhY2tncm91bmQiLCBBVkFUQVI6ICJhdmF0YXIiLAoJTEFOR1VBR0U6ICJsYW5ndWFnZSIsIEVOR0xJU0g6ICJlbmdsaXNoIiwgQ0hJTkVTRTogImNoaW5lc2UiLAoJTE9HSU46ICJsb2dpbiIsIExPR09VVDogImxvZ291dCIsIElOVklURTogImludml0ZSIsCglUT0tFTjogInRva2VuIiwKfQp2YXIgd2ViID0gewoJU1BBQ0U6ICJzcGFjZSIsIERSRUFNOiAiZHJlYW0iLCBTSEFSRTogInNoYXJlIiwKfQp2YXIgdGNwID0gewoJSE9TVDogImhvc3QiLCBQT1JUOiAicG9ydCIsCn0KdmFyIGdkYiA9IHsKCVNJR05BTDogInNpZ25hbCIsCn0KdmFyIGxleCA9IHsKCVNQTElUOiAic3BsaXQiLCBQUkVGSVg6ICJwcmVmaXgiLAp9CnZhciBzc2ggPSB7Cn0KCnZhciBjb2RlID0gewoJVklNRVI6ICJ2aW1lciIsIElOTkVSOiAiaW5uZXIiLCBGQVZPUjogImZhdm9yIiwKCUFVVE9HRU46ICJhdXRvZ2VuIiwgQ09NUElMRTogImNvbXBpbGUiLCBCSU5QQUNLOiAiYmlucGFjayIsIFdFQlBBQ0s6ICJ3ZWJwYWNrIiwgUFVCTElTSDogInB1Ymxpc2giLAoJS0VZV09SRDogImtleXdvcmQiLAp9CnZhciB3aWtpID0gewoJVElUTEU6ICJ0aXRsZSIsIEJSSUVGOiAiYnJpZWYiLCBSRUZFUjogInJlZmVyIiwgU1BBUks6ICJzcGFyayIsCglPUkRFUjogIm9yZGVyIiwgVEFCTEU6ICJ0YWJsZSIsIENIQVJUOiAiY2hhcnQiLCBJTUFHRTogImltYWdlIiwgVklERU86ICJ2aWRlbyIsCglGSUVMRDogImZpZWxkIiwgU0hFTEw6ICJzaGVsbCIsIExPQ0FMOiAibG9jYWwiLCBQQVJTRTogInBhcnNlIiwKCUNPTlRFTlQ6ICJjb250ZW50IiwKCglOQVZNRU5VOiAibmF2bWVudSIsIFBSRU1FTlU6ICJwcmVtZW51IiwKCglJVEVNOiAiLnN0b3J5IiwKCUgyOiAiaDIuc3RvcnkiLAoJSDM6ICJoMy5zdG9yeSIsCglESVZfUEFHRTogImRpdi5wYWdlIiwKfQp2YXIgY2hhdCA9IHsKCUxJQjogImxpYiIsIFBBR0U6ICJwYWdlIiwgUEFORUw6ICJwYW5lbCIsIFBMVUdJTjogInBsdWdpbiIsIE9VVFBVVDogIm91dHB1dCIsIFNUT1JZOiAic3RvcnkiLCBGTE9BVDogImZsb2F0IiwKCVRPQVNUOiAidG9hc3QiLCBDQVJURTogImNhcnRlIiwgSU5QVVQ6ICJpbnB1dCIsIFVQTE9BRDogInVwbG9hZCIsIENPTlRFWFRTOiAiY29udGV4dHMiLAoJTEFZT1VUOiAibGF5b3V0IiwgUFJPSkVDVDogInByb2plY3QiLCBDT05URU5UOiAiY29udGVudCIsIERJU1BMQVk6ICJkaXNwbGF5IiwgUFJPRklMRTogInByb2ZpbGUiLAoKCVRJVExFOiAidGl0bGUiLCBUT1BJQzogInRvcGljIiwgQkxBQ0s6ICJibGFjayIsIFdISVRFOiAid2hpdGUiLCBQUklOVDogInByaW50IiwKCVNIQVJFOiAic2hhcmUiLCBSSVZFUjogInJpdmVyIiwgU1RPUk06ICJzdG9ybSIsIEZJRUxEOiAiZmllbGQiLAoJUFVCTElDOiAicHVibGljIiwgUFJPVEVDVEVEOiAicHJvdGVjdGVkIiwgUFJJVkFURTogInByaXZhdGUiLAoJVVNFUjogInVzZXIiLCBUT09MOiAidG9vbCIsIE5PREVTOiAibm9kZXMiLAoKCUFHRU5UOiAiYWdlbnQiLCBDSEVDSzogImNoZWNrIiwgR1JBTlQ6ICJncmFudCIsCglTVEFURTogInN0YXRlIiwgTUVOVVM6ICJtZW51cyIsIFRSQU5TOiAidHJhbnMiLAoJU1NPOiAic3NvIiwgV0VCU0lURTogIndlYnNpdGUiLAoJTE9DQVRJT046ICJsb2NhdGlvbiIsCgoJbGliczogWyIvbGliL2Jhc2UuanMiLCAiL2xpYi9jb3JlLmpzIiwgIi9saWIvbWlzYy5qcyIsICIvbGliL3BhZ2UuanMiLCAiL2xpYi91c2VyLmpzIl0sCglwYW5lbF9saXN0OiBbCgkJe25hbWU6ICJIZWFkZXIiLCBoZWxwOiAi5qCH6aKY5qCPIiwgcG9zOiAiaGVhZCIsIHN0YXRlOiBbInRpbWUiLCAidXNlcm5pY2siLCAiYXZhdGFyIl19LAoJCXtuYW1lOiAiUml2ZXIiLCAgaGVscDogIue+pOiBiue7hCIsIHBvczogImxlZnQifSwKCQl7bmFtZTogIkFjdGlvbiIsIGhlbHA6ICLlt6XkvZzlj7AiLCBwb3M6ICJtYWluIn0sCgkJe25hbWU6ICJTZWFyY2giLCBoZWxwOiAi5pCc57Si5qGGIiwgcG9zOiAiYXV0byJ9LAoJCXtuYW1lOiAiRm9vdGVyIiwgaGVscDogIueKtuaAgeadoSIsIHBvczogImZvb3QiLCBzdGF0ZTogWyJuY21kIiwgIm50aXAiXX0sCgldLAoJcGx1Z2luX2xpc3Q6IFsKCQkiL3BsdWdpbi9zdGF0ZS5qcyIsCgkJIi9wbHVnaW4vaW5wdXQuanMiLAoJCSIvcGx1Z2luL3RhYmxlLmpzIiwKCQkiL3BsdWdpbi9pbnB1dC9rZXkuanMiLAoJCSIvcGx1Z2luL2lucHV0L2RhdGUuanMiLAoJCSIvcGx1Z2luL3N0b3J5L3NwaWRlLmpzIiwKCQkiL3BsdWdpbi9zdG9yeS90cmVuZC5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvY29kZS92aW1lci5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvY29kZS94dGVybS5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiLAoJCSIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsCgkJIi9wbHVnaW4vbG9jYWwvd2lraS93b3JkLmpzIiwKCQkiL3BsdWdpbi9sb2NhbC90ZWFtL3BsYW4uanMiLAoJXSwKCVBMVUdJTl9TVEFURV9KUzogIi9wbHVnaW4vc3RhdGUuanMiLAoJUExVR0lOX0lOUFVUX0pTOiAiL3BsdWdpbi9pbnB1dC5qcyIsCglQTFVHSU5fVEFCTEVfSlM6ICIvcGx1Z2luL3RhYmxlLmpzIiwKCglPTkVOR0lORTogIm9uZW5naW5lIiwgT05EQUVNT046ICJvbmRhZW1vbiIsIE9OQVBQRU5EOiAib25hcHBlbmQiLCBPTkxBWU9VVDogIm9ubGF5b3V0IiwgT05NT1RJT046ICJvbm1vdGlvbiIsIE9OS0VZTUFQOiAib25rZXltYXAiLAoJT05JTVBPUlQ6ICJvbmltcG9ydCIsIE9OU1lOVEFYOiAib25zeW50YXgiLCBPTkFDVElPTjogIm9uYWN0aW9uIiwgT05ERVRBSUw6ICJvbmRldGFpbCIsIE9ORklHVVJFOiAib25maWd1cmUiLCBPTkVYUE9SVDogIm9uZXhwb3J0IiwKCU9OUExVR0lOOiAib25wbHVnaW4iLAoKCU9OTUFJTjogIm9ubWFpbiIsIE9OTE9HSU46ICJvbmxvZ2luIiwgT05TRUFSQ0g6ICJvbnNlYXJjaCIsCglPTlNJWkU6ICJvbnNpemUiLCBPTlRPQVNUOiAib250b2FzdCIsIE9OUkVNT1RFOiAib25yZW1vdGUiLAoJT05LRVlET1dOOiAib25rZXlkb3duIiwgT05NT1VTRUVOVEVSOiAib25tb3VzZWVudGVyIiwgT1JJRU5UQVRJT05DSEFOR0U6ICJvcmllbnRhdGlvbmNoYW5nZSIsCglPTlNUT1JNX1NFTEVDVDogIm9uc3Rvcm1fc2VsZWN0IiwgT05BQ1RJT05fVE9VQ0g6ICJvbmFjdGlvbl90b3VjaCIsIE9OQUNUSU9OX05PVE9PTDogIm9uYWN0aW9uX25vdG9vbCIsIE9OQUNUSU9OX0NNRDogIm9uYWN0aW9uX2NtZCIsCglPTk9QRU5TRUFSQ0g6ICJvbm9wZW5zZWFyY2giLCBPTlNFQVJDSEZPQ1VTOiAib25zZWFyY2hmb2N1cyIsIE9OQ09NTUFOREZPQ1VTOiAib25jb21tYW5kZm9jdXMiLAoKCV9JTklUOiAiX2luaXQiLCBfRU5HSU5FOiAiX2VuZ2luZSIsIF9TRUFSQ0g6ICJfc2VhcmNoIiwgX09VVFBVVFNfQ1VSUkVOVDogIl9vdXRwdXRzLi0xIiwKCV9OQU1FUzogIl9uYW1lcyIsIF9UT0FTVDogIl90b2FzdCIsCn0KdmFyIHRlYW0gPSB7CglUQVNLOiAidGFzayIsIFBMQU46ICJwbGFuIiwKfQp2YXIgbWFsbCA9IHsKCUFTU0VUOiAiYXNzZXQiLCBTQUxBUlk6ICJzYWxhcnkiLAp9Cgp2YXIgc3ZnID0gewoJR1JPVVA6ICJncm91cCIsIFBJRDogInBpZCIsIEdSSUQ6ICJncmlkIiwKCVNIQVBFOiAic2hhcGUiLCBURVhUOiAidGV4dCIsIFJFQ1Q6ICJyZWN0IiwgTElORTogImxpbmUiLCBDSVJDTEU6ICJjaXJjbGUiLCBFTExJUFNFOiAiZWxsaXBzZSIsCglHOiAiZyIsIFg6ICJ4IiwgWTogInkiLCBSOiAiciIsIFJYOiAicngiLCBSWTogInJ5IiwgQ1g6ICJjeCIsIENZOiAiY3kiLCBYMTogIngxIiwgWTE6ICJ5MSIsIFgyOiAieDIiLCBZMjogInkyIiwKCVBBVEg6ICJwYXRoIiwgUEFUSDJWOiAicGF0aDJ2IiwgUEFUSDJIOiAicGF0aDJoIiwKCU06ICJNIiwgUTogIlEiLCBUOiAiVCIsCn0KdmFyIGh0bWwgPSB7CgkvLyBGSUVMRFNFVAoJRklFTERTRVQ6ICJmaWVsZHNldCIsIExFR0VORDogImxlZ2VuZCIsIE9QVElPTjogIm9wdGlvbiIsIEFDVElPTjogImFjdGlvbiIsIE9VVFBVVDogIm91dHB1dCIsIFNUQVRVUzogInN0YXR1cyIsCglGT1JNX09QVElPTjogImZvcm0ub3B0aW9uIiwgRElWX0FDVElPTjogImRpdi5hY3Rpb24iLCBESVZfT1VUUFVUOiAiZGl2Lm91dHB1dCIsIERJVl9TVEFUVVM6ICJkaXYuc3RhdHVzIiwKCUZJRUxEU0VUX1BBTkVMOiAiZmllbGRzZXQucGFuZWwiLCBGSUVMRFNFVF9QTFVHSU46ICJmaWVsZHNldC5wbHVnaW4iLCBGSUVMRFNFVF9TVE9SWTogImZpZWxkc2V0LnN0b3J5IiwKCUZJRUxEU0VUX0hFQUQ6ICJmaWVsZHNldC5oZWFkIiwgRklFTERTRVRfRk9PVDogImZpZWxkc2V0LmZvb3QiLAoJRklFTERTRVRfTEVGVDogImZpZWxkc2V0LmxlZnQiLCBGSUVMRFNFVF9NQUlOOiAiZmllbGRzZXQubWFpbiIsCglGSUVMRFNFVF9BVVRPOiAiZmllbGRzZXQuYXV0byIsIEZJRUxEU0VUX0ZMT0FUOiAiZmllbGRzZXQuZmxvYXQiLAoJT1BUSU9OX0FSR1M6ICJzZWxlY3QuYXJncyxpbnB1dC5hcmdzLHRleHRhcmVhLmFyZ3MiLAoJSU5QVVRfQVJHUzogImlucHV0LmFyZ3MsdGV4dGFyZWEuYXJncyIsCglJTlBVVF9CVVRUT046ICJpbnB1dFt0eXBlPWJ1dHRvbl0iLAoKCS8vIEhUTUwKCVVQTE9BRDogInVwbG9hZCIsIFVTRVJOQU1FOiAidXNlcm5hbWUiLCBQQVNTV09SRDogInBhc3N3b3JkIiwKCUlOUFVUOiAiaW5wdXQiLCBURVhUOiAidGV4dCIsIFRFWFRBUkVBOiAidGV4dGFyZWEiLCBTRUxFQ1Q6ICJzZWxlY3QiLCBCVVRUT046ICJidXR0b24iLAoJRk9STTogImZvcm0iLCBGSUxFOiAiZmlsZSIsIFNQQUNFOiAic3BhY2UiLCBDTElDSzogImNsaWNrIiwgU1VCTUlUOiAic3VibWl0IiwgQ0FOQ0VMOiAiY2FuY2VsIiwKCURJVjogImRpdiIsIElNRzogImltZyIsIENPREU6ICJjb2RlIiwgU1BBTjogInNwYW4iLCBWSURFTzogInZpZGVvIiwKCVRBQkxFOiAidGFibGUiLCBUQk9EWTogInRib2R5IiwgVFI6ICJ0ciIsIFRIOiAidGgiLCBURDogInRkIiwgQlI6ICJiciIsIFVMOiAidWwiLCBMSTogImxpIiwKCUE6ICJhIiwgTEFCRUw6ICJsYWJlbCIsIElOTkVSOiAiaW5uZXIiLCBUSVRMRTogInRpdGxlIiwKCUgxOiAiaDEiLCBIMjogImgyIiwgSDM6ICJoMyIsCglXU1M6ICJ3c3MiLCBTVkc6ICJzdmciLCBDQU5WQVM6ICJjYW52YXMiLCBJRlJBTUU6ICJpZnJhbWUiLCBDSFJPTUU6ICJjaHJvbWUiLAoKCS8vIENTUwoJQ0xBU1M6ICJjbGFzcyIsIEZMT0FUOiAiZmxvYXQiLCBDTEVBUjogImNsZWFyIiwgQk9USDogImJvdGgiLAoJQkFDS0dST1VORDogImJhY2tncm91bmQiLCBTRUxFQ1Q6ICJzZWxlY3QiLCBISURERU46ICJoaWRkZW4iLAoJRElTUExBWTogImRpc3BsYXkiLCBCTE9DSzogImJsb2NrIiwgTk9ORTogIm5vbmUiLCBGSVhFRDogImZpeGVkIiwKCU9QQUNJVFk6ICJvcGFjaXR5IiwKCVNUUk9LRV9XSURUSDogInN0cm9rZS13aWR0aCIsIFNUUk9LRTogInN0cm9rZSIsIEZJTEw6ICJmaWxsIiwgRk9OVF9TSVpFOiAiZm9udC1zaXplIiwgRk9OVF9GQU1JTFk6ICJmb250LWZhbWlseSIsIE1PTk9TUEFDRTogIm1vbm9zcGFjZSIsCglTQ1JPTEw6ICJzY3JvbGwiLCBIRUlHSFQ6ICJoZWlnaHQiLCBXSURUSDogIndpZHRoIiwgTEVGVDogImxlZnQiLCBUT1A6ICJ0b3AiLCBSSUdIVDogInJpZ2h0IiwgQk9UVE9NOiAiYm90dG9tIiwKCVNQRUVEOiAic3BlZWQiLCBQQURESU5HOiAicGFkZGluZyIsCglNSU5fSEVJR0hUOiAibWluLWhlaWdodCIsIE1BWF9IRUlHSFQ6ICJtYXgtaGVpZ2h0IiwgTUFYX1dJRFRIOiAibWF4LXdpZHRoIiwgTUlOX1dJRFRIOiAibWluLXdpZHRoIiwgTUFSR0lOX1RPUDogIm1hcmdpbi10b3AiLCBNQVJHSU5fWDogIm1hcmdpbi14IiwgTUFSR0lOX1k6ICJtYXJnaW4teSIsCglQTFVHSU5fTUFSR0lOOiAxMCwgQUNUSU9OX0hFSUdIVDogMzEsIEFDVElPTl9NQVJHSU46IDIwMCwKCVRFWFRfQU5DSE9SOiAidGV4dC1hbmNob3IiLAoJVE9HR0xFOiAidG9nZ2xlIiwKCglQQUdFOiAicGFnZSIsIFRBQlM6ICJ0YWJzIiwKCU1FTlU6ICJtZW51IiwgTk9ERTogIm5vZGUiLAoJWk9ORTogInpvbmUiLCBOQU1FOiAibmFtZSIsCglMSVNUOiAibGlzdCIsIElURU06ICJpdGVtIiwKCUlDT046ICJpY29uIiwKCglISURFOiAiaGlkZSIsIFNIT1c6ICJzaG93IiwgQVVUTzogImF1dG8iLAoJSEVBRDogImhlYWQiLCBMRUZUOiAibGVmdCIsIE1BSU46ICJtYWluIiwgRk9PVDogImZvb3QiLAoJUExVR0lOOiAicGx1Z2luIiwgTEFZT1VUOiAibGF5b3V0IiwgQ09OVEVOVDogImNvbnRlbnQiLAoKCURJVl9QQUdFOiAiZGl2LnBhZ2UiLAoJRElWX1RBQlM6ICJkaXYudGFicyIsCglESVZfWk9ORTogImRpdi56b25lIiwKCURJVl9MSVNUOiAiZGl2Lmxpc3QiLAoJRElWX0lURU06ICJkaXYuaXRlbSIsCglESVZfTkFNRTogImRpdi5uYW1lIiwKCURJVl9DT0RFOiAiZGl2LmNvZGUiLAoJRElWX0xBWU9VVF9IRUFEOiAiZGl2LmxheW91dC5oZWFkIiwKCURJVl9MQVlPVVRfTEVGVDogImRpdi5sYXlvdXQubGVmdCIsCglESVZfTEFZT1VUX0ZPT1Q6ICJkaXYubGF5b3V0LmZvb3QiLAoJVEFCTEVfQ09OVEVOVDogInRhYmxlLmNvbnRlbnQiLAoJRElWX0ZMT0FUOiAiZGl2LmZsb2F0IiwKCglFU0NBUEU6ICJFc2NhcGUiLCBFTlRFUjogIkVudGVyIiwgVEFCOiAiVGFiIiwKCV9DU1M6ICIuY3NzIiwgX0pTOiAiLmpzIiwKfQp2YXIgbGFuZyA9IHsKCVVOREVGSU5FRDogInVuZGVmaW5lZCIsCglTVFJJTkc6ICJzdHJpbmciLCBOVU1CRVI6ICJudW1iZXIiLAoJT0JKRUNUOiAib2JqZWN0IiwgRlVOQ1RJT046ICJmdW5jdGlvbiIsCglFU0NBUEU6ICJFc2NhcGUiLCBFTlRFUjogIkVudGVyIiwgVEFCOiAiVGFiIiwKCUNPTlRST0w6ICJDb250cm9sIiwgU0hJRlQ6ICJTaGlmdCIsCglQUzogIi8iLAp9CgpmdW5jdGlvbiBzaHkoaGVscCwgbWV0YSwgbGlzdCwgY2IpIHsgdmFyIGluZGV4ID0gMCwgYXJncyA9IGFyZ3VtZW50cwoJZnVuY3Rpb24gbmV4dCh0eXBlKSB7IGlmIChpbmRleCA8IGFyZ3MubGVuZ3RoICYmICghdHlwZSB8fCB0eXBlID09IHR5cGVvZiBhcmdzW2luZGV4XSkpIHsgcmV0dXJuIGFyZ3NbaW5kZXgrK10gfSB9CglyZXR1cm4gY2IgPSB0eXBlb2YgYXJnc1thcmdzLmxlbmd0aC0xXSA9PSBsYW5nLkZVTkNUSU9OP2FyZ3NbYXJncy5sZW5ndGgtMV06ZnVuY3Rpb24oKSB7fSwgY2IuaGVscCA9IG5leHQobGFuZy5TVFJJTkcpfHwiIiwgY2IubWV0YSA9IG5leHQobGFuZy5PQkpFQ1QpfHx7fSwgY2IubGlzdCA9IG5leHQobGFuZy5PQkpFQ1QpfHxbXSwgY2IKfTsgdmFyIF9jYW5fbmFtZSA9ICIiLCBfY2FuX3BhdGggPSAiIgp2YXIgVm9sY2Fub3MgPSBzaHkoIueBq+WxseaetiIsIHtpY2ViZXJnOiAiL2NoYXQvIiwgdm9sY2FubzogIi9mcmFtZS5qcyIsIHBhY2s6IHt9LCBjYWNoZToge319LCBmdW5jdGlvbihuYW1lLCBjYW4sIGxpYnMsIGNiKSB7Cgl2YXIgbWV0YSA9IGFyZ3VtZW50cy5jYWxsZWUubWV0YSwgbGlzdCA9IGFyZ3VtZW50cy5jYWxsZWUubGlzdAoJaWYgKHR5cGVvZiBuYW1lID09IGxhbmcuT0JKRUNUKSB7IHZhciBDb25maWcgPSBuYW1lLCBwYW5lbHMgPSBDb25maWcucGFuZWxzfHxjaGF0LnBhbmVsX2xpc3QKCQltZXRhLmxpYnMgPSBDb25maWcubGlic3x8Y2hhdC5saWJzLCBtZXRhLmljZWJlcmcgPSBDb25maWcuaWNlYmVyZ3x8bWV0YS5pY2ViZXJnCgoJCS8vIOmihOWKoOi9vQoJCWxpYnMgPSBbXTsgZm9yICh2YXIgaSA9IDA7IGkgPCBwYW5lbHMubGVuZ3RoOyBpKyspIHsgdmFyIHAgPSBwYW5lbHNbaV0KCQkJcCAmJiAobGlicyA9IGxpYnMuY29uY2F0KHAubGlzdCA9IHAubGlzdHx8WyIvcGFuZWwvIitwLm5hbWUraHRtbC5fQ1NTLCAiL3BhbmVsLyIrcC5uYW1lK2h0bWwuX0pTXSkpCgkJfTsgbGlicyA9IGxpYnMuY29uY2F0KENvbmZpZy5wbHVnaW58fGNoYXQucGx1Z2luX2xpc3QpCgoJCS8vIOagueaooeWdlwoJCV9jYW5fbmFtZSA9ICIiLCBuYW1lID0gQ29uZmlnLm5hbWV8fGljZS5DQU4sIGNiID0gY2FufHxmdW5jdGlvbihjYW4pIHsKCQkJY2FuLm9uZW5naW5lLl9pbml0KGNhbiwgY2FuLkNvbmYoQ29uZmlnKSwgcGFuZWxzLCBDb25maWcuX2luaXQsIGNhbi5fdGFyZ2V0KQoJCX0sIGNhbiA9IHtfZm9sbG93OiBuYW1lLCBfdGFyZ2V0OiBDb25maWcudGFyZ2V0fHxtZXRhLnRhcmdldCwgX2hlaWdodDogQ29uZmlnLmhlaWdodHx8bWV0YS5faGVpZ2h0LCBfd2lkdGg6IENvbmZpZy53aWR0aHx8bWV0YS5fd2lkdGh9CgkJZm9yICh2YXIgayBpbiBDb25maWcpIHsgY2FuW2tdID0gQ29uZmlnW2tdIH0KCQljYW4uX3Jvb3QgPSBjYW4KCX0KCgl2YXIgcHJvdG8gPSB7X19wcm90b19fOiBtZXRhLCBfcGF0aDogX2Nhbl9wYXRoLCBfbmFtZTogbmFtZSwgX2xvYWQ6IGZ1bmN0aW9uKG5hbWUsIGVhY2gpIHsKCQkJLy8g5Yqg6L2957yT5a2YCgkJCXZhciBjYWNoZSA9IG1ldGEuY2FjaGVbbmFtZV18fFtdOyBmb3IgKGxpc3QucmV2ZXJzZSgpOyBsaXN0Lmxlbmd0aCA+IDA7IGxpc3QpIHsKCQkJCXZhciBzdWIgPSBsaXN0LnBvcCgpOyBzdWIgIT0gY2FuICYmIGNhY2hlLnB1c2goc3ViKQoJCQl9OyBtZXRhLmNhY2hlW25hbWVdID0gY2FjaGUKCgkJCS8vIOWKoOi9veaooeWdlwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGNhY2hlLmxlbmd0aDsgaSsrKSB7IHZhciBzdWIgPSBjYWNoZVtpXSwgbmFtZSA9IHN1Yi5fbmFtZQoJCQkJaWYgKHR5cGVvZiBlYWNoID09IGxhbmcuRlVOQ1RJT04gJiYgZWFjaChjYW4sIG5hbWUsIHN1YikpIHsgY29udGludWUgfQoJCQkJIWNhbltuYW1lXSAmJiAoY2FuW25hbWVdID0ge30pOyBmb3IgKHZhciBrIGluIHN1YikgewoJCQkJCWNhbltuYW1lXS5oYXNPd25Qcm9wZXJ0eShrKSB8fCAhc3ViLmhhc093blByb3BlcnR5KGspIHx8IChjYW5bbmFtZV1ba10gPSBzdWJba10pCgkJCQl9CgkJCX0KCQl9LAoJCXJlcXVpcmVNb2R1bGVzOiBmdW5jdGlvbihsaWJzLCBjYiwgZWFjaCkgewoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpYnMubGVuZ3RoOyBpKyspIHsKCQkJCWlmIChsaWJzW2ldLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChsaWJzW2ldLmluZGV4T2YoIi8iKSA9PSAwKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChsaWJzW2ldLmluZGV4T2YoIi5jc3MiKSA9PSAtMSAmJiBsaWJzW2ldLmluZGV4T2YoIi5qcyIpID09IC0xKSB7IGxpYnNbaV0gPSBsaWJzW2ldKyIvbGliLyIrbGlic1tpXSsiLmpzIiB9CgkJCQlsaWJzW2ldID0gIi9yZXF1aXJlL3BhZ2Uvbm9kZV9tb2R1bGVzLyIrbGlic1tpXQoJCQl9CgkJCWNhbi5yZXF1aXJlKGxpYnMsIGNiLCBlYWNoKQoJCX0sCgkJcmVxdWlyZTogZnVuY3Rpb24obGlicywgY2IsIGVhY2gpIHsgaWYgKCFsaWJzIHx8IGxpYnMubGVuZ3RoID09IDApIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGNiKGNhbikgfSwgMTApCgkJCQlyZXR1cm4gLy8g5Yqg6L295a6M5oiQCgkJCX0KCgkJCS8vIOaXoOaViOWcsOWdgAoJCQlpZiAobGlic1swXSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGNhbi5yZXF1aXJlKGxpYnMuc2xpY2UoMSksIGNiLCBlYWNoKSB9CgoJCQlpZiAobGlic1swXSA9PSAiIikgewoJCQkJLy8g5qC35byP5Zyw5Z2ACgkJCQlsaWJzWzBdID0gY2FuLl9uYW1lLnJlcGxhY2UoaHRtbC5fSlMsIGh0bWwuX0NTUykKCQkJfSBlbHNlIGlmIChsaWJzWzBdWzBdICE9IGljZS5QUyAmJiBsaWJzWzBdLmluZGV4T2YoaWNlLkhUVFApICE9IDApIHsKCQkJCS8vIOebuOWvueWcsOWdgAoJCQkJbGlic1swXSA9IGNhbi5fbmFtZS5zbGljZSgwLCBjYW4uX25hbWUubGFzdEluZGV4T2YoaWNlLlBTKSsxKStsaWJzWzBdCgkJCX0KCgkJCS8vIOWKoOi9veaooeWdlwoJCQlsaWJzWzBdID0gbGlic1swXS50b0xvd2VyQ2FzZSgpCgkJCXZhciBuYW1lID0gbGlic1swXS5pbmRleE9mKCJodHRwIikgPT0gMD8gbGlic1swXTogbGlic1swXS5zcGxpdCgiPyIpWzBdCgkJCWZ1bmN0aW9uIG5leHQoKSB7IGNhbi5fbG9hZChuYW1lLCBlYWNoKSwgY2FuLnJlcXVpcmUobGlicy5zbGljZSgxKSwgY2IsIGVhY2gpIH0KCQkJbWV0YS5jYWNoZVtuYW1lXT8gbmV4dCgpOiAoX2Nhbl9wYXRoID0gbGlic1swXSwgbWV0YS5fbG9hZChuYW1lLCBuZXh0KSkKCQl9LAoJCXJlcXVlc3Q6IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50ID0gZXZlbnR8fHt9LCBldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCQkJdmFyIG1zZyA9IGV2ZW50Ll9tc2d8fGNhbi5taXNjLk1lc3NhZ2UoZXZlbnQsIGNhbik7IGV2ZW50Ll9tc2cgPSBtc2cKCQkJZnVuY3Rpb24gc2V0KGtleSwgdmFsdWUpIHsKCQkJCXZhbHVlID09ICIiIHx8IG1zZy5PcHRpb24oa2V5KSB8fCBtc2cuT3B0aW9uKGtleSwgdmFsdWUpCgkJCQkvLyB0eXBlb2YgdmFsdWUgPT0gbGFuZy5GVU5DVElPTiB8fCB0eXBlb2YgdmFsdWUgPT0gbGFuZy5PQkpFQ1QgfHwgdmFsdWUgPT0gIiIgfHwgbXNnLk9wdGlvbihrZXkpIHx8IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkKCQkJfQoKCQkJLy8g5re75Yqg5Y+C5pWwCgkJCWNhbi5jb3JlLkxpc3QoYXJndW1lbnRzLCBmdW5jdGlvbihvcHRpb24sIGluZGV4KSB7IGlmICghb3B0aW9uIHx8IGluZGV4ID09IDApIHsgcmV0dXJuIH0gCgkJCQljYW4uYmFzZS5pc0Z1bmMob3B0aW9uLk9wdGlvbik/IGNhbi5jb3JlLkxpc3Qob3B0aW9uLk9wdGlvbigpLCBmdW5jdGlvbihrZXkpIHsKCQkJCQlpZiAoa2V5LmluZGV4T2YoInVzZXIuIikgPT0gMCkgeyByZXR1cm4gfQoJCQkJCWlmIChrZXkuaW5kZXhPZigiXyIpID09IDApIHsgcmV0dXJuIH0KCQkJCQlzZXQoa2V5LCBvcHRpb24uT3B0aW9uKGtleSkpCgkJCQl9KTogY2FuLmNvcmUuSXRlbShjYW4uYmFzZS5pc0Z1bmMob3B0aW9uKT8gb3B0aW9uKCk6IG9wdGlvbiwgc2V0KQoJCQl9KTsgcmV0dXJuIG1zZwoJCX0sCgoJCWFjdGlvbnM6IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBbXSkgfSwKCQlydW5BY3Rpb25Db21tYW5kOiBmdW5jdGlvbihldmVudCwgaW5kZXgsIGFyZ3MsIGNiKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIGNhbi5taXNjLmNvbmNhdChjYW4sIFtpbmRleF0sIGFyZ3MpLCBjYikgfSwKCQlydW5BY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBhY3Rpb24sIGFyZ3MsIGNiKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9LCBjYW4uT3B0aW9uKCkpCgkJCWNhbi5ydW4oZXZlbnQsIGNhbi5taXNjLmNvbmNhdChjYW4sIFtjdHguQUNUSU9OXS5jb25jYXQoYWN0aW9uKSwgYXJncyksIGNifHxmdW5jdGlvbihtc2cpIHsKCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgYWN0aW9uKQoJCQl9LCB0cnVlKQoJCX0sCgoJCXNlYXJjaDogZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCWlmIChjbWRzICYmIHR5cGVvZiBjbWRzID09IGxhbmcuT0JKRUNUICYmIGNtZHMubGVuZ3RoID4gMCAmJiB0eXBlb2YgY21kc1swXSA9PSBsYW5nLk9CSkVDVCAmJiBjbWRzWzBdLmxlbmd0aCA+IDAgKSB7CgkJCQljbWRzWzBdID0gY21kc1swXS5qb2luKGljZS5QVCkKCQkJfQoJCQlyZXR1cm4gY2FuLnJ1biAmJiBjYW4ucnVuKGV2ZW50LCBbY2hhdC5fU0VBUkNIXS5jb25jYXQoY21kcyksIGNiLCB0cnVlKQoJCX0sCgkJZ2V0OiBmdW5jdGlvbihuYW1lLCBrZXksIGNiKSB7IHJldHVybiBjYW4uc2VhcmNoKHt9LCBbY2FuLmNvcmUuS2V5cyhuYW1lLCBjaGF0Lk9ORVhQT1JULCBrZXkpXSwgY2IpIH0sCgkJc2V0OiBmdW5jdGlvbihuYW1lLCBrZXksIHZhbHVlKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCh7fSk7IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkKCQkJcmV0dXJuIGNhbi5zZWFyY2gobXNnLCBbW25hbWUsIGNoYXQuT05JTVBPUlQsIGtleV1dKQoJCX0sCgkJc2V0SGVhZGVyTWVudTogZnVuY3Rpb24obGlzdCwgY2IpIHsgY2FuLl9tZW51ICYmIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5fbWVudSkKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9LCB7dHJhbnM6IGNhbi5vbmFjdGlvbi5fdHJhbnN9KQoJCQlyZXR1cm4gY2FuLl9tZW51ID0gY2FuLnNlYXJjaChtc2csIFtbIkhlYWRlciIsIGNoYXQuT05JTVBPUlQsICJtZW51Il0sIGNhbi5fbmFtZV0uY29uY2F0KGxpc3QpLCBjYikKCQl9LAoJCXNldEhlYWRlcjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnNldCgiSGVhZGVyIiwga2V5LCB2YWx1ZSkgfSwKCQlnZXRIZWFkZXI6IGZ1bmN0aW9uKGtleSwgY2IpIHsgcmV0dXJuIGNhbi5nZXQoIkhlYWRlciIsIGtleSwgY2IpIH0sCgkJc2V0Uml2ZXI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5zZXQoIlJpdmVyIiwga2V5LCB2YWx1ZSkgfSwKCQlzZXRBY3Rpb246IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5zZXQoIkFjdGlvbiIsIGtleSwgdmFsdWUpIH0sCgkJZ2V0QWN0aW9uOiBmdW5jdGlvbihrZXksIGNiKSB7IHJldHVybiBjYW4uZ2V0KCJBY3Rpb24iLCBrZXksIGNiKSB9LAoJCWdldEFjdGlvblNpemU6IGZ1bmN0aW9uKGNiKSB7IHJldHVybiBjYW4uZ2V0KCJBY3Rpb24iLCAic2l6ZSIsIGNiKSB9LAoKCQlpc1NpbXBsZU1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJzaW1wbGUiIH0sCgkJaXNGbG9hdE1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJmbG9hdCIgfSwKCQlpc0Z1bGxNb2RlOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gY2FuLk1vZGUoKSA9PSAiZnVsbCIgfSwKCQlpc0NtZE1vZGU6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uTW9kZSgpID09ICJjbWQiIH0sCgkJTW9kZTogZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIGNhbi5Db25mKGljZS5NT0RFLCB2YWx1ZSkgfSwKCQlDb25mRGVmYXVsdDogZnVuY3Rpb24odmFsdWUpIHsgY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oaywgdikgeyBjYW4uQ29uZihrKSB8fCBjYW4uQ29uZihrLCB2KSB9KSB9LAoJCUNvbmZIZWlnaHQ6IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiBjYW4uQ29uZihodG1sLkhFSUdIVCwgdmFsdWUpIH0sCgkJQ29uZldpZHRoOiBmdW5jdGlvbih2YWx1ZSkgeyByZXR1cm4gY2FuLkNvbmYoaHRtbC5XSURUSCwgdmFsdWUpIH0sCgkJQ29uZjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB2YXIgcmVzID0gY2FuLl9jb25mCgkJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7CgkJCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJCXJlcyA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fY29uZiwgYXJndW1lbnRzW2ldKSwgaS0tCgkJCQkJY29udGludWUKCQkJCX0KCQkJCXJlcyA9IGNhbi5jb3JlLlZhbHVlKGNhbi5fY29uZiwgYXJndW1lbnRzW2ldLCBhcmd1bWVudHNbaSsxXSkKCQkJfQoJCQlpZiAocmVzID09IHVuZGVmaW5lZCAmJiBrZXkuaW5kZXhPZihjdHguRkVBVFVSRStpY2UuUFQpID09IC0xKSB7CgkJCQlyZXR1cm4gY2FuLkNvbmYoY2FuLmNvcmUuS2V5cyhjdHguRkVBVFVSRSwga2V5KSkKCQkJfQoJCQlyZXR1cm4gcmVzCgkJfSwgX2NvbmY6IHt9LAoJfTsgY2FuID0gY2FufHx7fSwgY2FuLl9fcHJvdG9fXyA9IHByb3RvCgoJaWYgKF9jYW5fbmFtZSkgeyAvLyDliqDlhaXnvJPlrZgKCQltZXRhLmNhY2hlW19jYW5fbmFtZV0gPSBtZXRhLmNhY2hlW19jYW5fbmFtZV18fFtdLCBtZXRhLmNhY2hlW19jYW5fbmFtZV0ucHVzaChjYW4pCgl9IGVsc2UgeyAvLyDliqDlhaXpmJ/liJcKCQlsaXN0LnB1c2goY2FuKQoJfQoJX2Nhbl9wYXRoID0gX2Nhbl9uYW1lfHxfY2FuX3BhdGgKCglpZiAoY2FuLl9mb2xsb3cpIHsgbGlicyA9IGxpYnMuY29uY2F0KG1ldGEubGlicywgbWV0YS52b2xjYW5vKSB9CglpZiAobGlicyAmJiBsaWJzLmxlbmd0aCA+IDApIHsgLy8g6Kej5p6Q5Y+C5pWwCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBsaWJzLmxlbmd0aDsgaSsrKSB7CgkJCWlmIChsaWJzW2ldID09IHVuZGVmaW5lZCkgewoKCQkJfSBlbHNlIGlmIChsaWJzW2ldID09ICIiKSB7CgkJCQlsaWJzW2ldID0gX2Nhbl9wYXRoLnJlcGxhY2UoaHRtbC5fSlMsIGh0bWwuX0NTUykKCQkJfSBlbHNlIGlmIChsaWJzW2ldWzBdICE9IGljZS5QUyAmJiBsaWJzW2ldLmluZGV4T2YoaWNlLkhUVFApICE9IDApIHsKCQkJCWxpYnNbaV0gPSBfY2FuX3BhdGguc2xpY2UoMCwgX2Nhbl9wYXRoLmxhc3RJbmRleE9mKGljZS5QUykrMSkrbGlic1tpXQoJCQl9CgkJfQoJfQoJcmV0dXJuIGNhbi5yZXF1aXJlKGxpYnMsIGNiKSwgY2FuCn0pCmZ1bmN0aW9uIGNhbih0b29sKSB7CglWb2xjYW5vcyh7cGFuZWxzOiBbCgkJe25hbWU6ICJIZWFkZXIiLCBoZWxwOiAi5qCH6aKY5qCPIiwgcG9zOiBodG1sLkhJREUsIHN0YXRlOiBbYWFhLlVTRVJOSUNLXX0sCgkJe25hbWU6ICJBY3Rpb24iLCBoZWxwOiAi5bel5L2c5Y+wIiwgcG9zOiBodG1sLk1BSU4sIHRvb2w6IHRvb2x9LAoJCXtuYW1lOiAiU2VhcmNoIiwgaGVscDogIuaQnOe0ouahhiIsIHBvczogaHRtbC5BVVRPfSwKCV19KQp9Cgp0cnkgeyBpZiAodHlwZW9mKHdpbmRvdykgPT0gbGFuZy5PQkpFQ1QpIHsgLy8gbm9kZWpzCglWb2xjYW5vcy5tZXRhLnRhcmdldCA9IGRvY3VtZW50LmJvZHkKCVZvbGNhbm9zLm1ldGEuX3dpZHRoID0gd2luZG93LmlubmVyV2lkdGgKCVZvbGNhbm9zLm1ldGEuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodAoJVm9sY2Fub3MubWV0YS5fbG9hZCA9IGZ1bmN0aW9uKHVybCwgY2IpIHsKCQlzd2l0Y2ggKHVybC5zcGxpdCgiPyIpWzBdLnNwbGl0KGljZS5QVCkucG9wKCkudG9Mb3dlckNhc2UoKSkgewoJCQljYXNlIG5mcy5DU1M6CgkJCQl2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobWRiLkxJTkspCgkJCQlpdGVtLnJlbCA9ICJzdHlsZXNoZWV0IiwgaXRlbS50eXBlID0gInRleHQvY3NzIgoJCQkJaXRlbS5ocmVmID0gdXJsLCBpdGVtLm9ubG9hZCA9IGNiCgkJCQlyZXR1cm4gZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChpdGVtKSwgaXRlbQoJCQljYXNlIG5mcy5KUzoKCQkJZGVmYXVsdDoKCQkJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChuZnMuU0NSSVBUKQoJCQkJaXRlbS5zcmMgPSB1cmwsIGl0ZW0ub25sb2FkID0gY2IsIGl0ZW0ub25lcnJvciA9IGNiCgkJCQlyZXR1cm4gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChpdGVtKSwgaXRlbQoJCX0KCX0KfSBlbHNlIHsgLy8gbm9kZWpzCglnbG9iYWwua2l0ID0ga2l0LCBnbG9iYWwuaWNlID0gaWNlCglnbG9iYWwuY3R4ID0gY3R4LCBnbG9iYWwuY2xpID0gY2xpLCBnbG9iYWwud2ViID0gd2ViLCBnbG9iYWwuYWFhID0gYWFhCglnbG9iYWwubWRiID0gbWRiLCBnbG9iYWwuc3NoID0gc3NoLCBnbG9iYWwubmZzID0gbmZzLCBnbG9iYWwudGNwID0gdGNwCglnbG9iYWwuY29kZSA9IGNvZGUsIGdsb2JhbC53aWtpID0gd2lraSwgZ2xvYmFsLmNoYXQgPSBjaGF0LCBnbG9iYWwudGVhbSA9IHRlYW0sIGdsb2JhbC5tYWxsID0gbWFsbAoJZ2xvYmFsLnN2ZyA9IHN2ZywgZ2xvYmFsLmh0bWwgPSBodG1sLCBnbG9iYWwubGFuZyA9IGxhbmcKCWdsb2JhbC5zaHkgPSBzaHksIGdsb2JhbC5Wb2xjYW5vcyA9IFZvbGNhbm9zLCBnbG9iYWwuY2FuID0gY2FuCn0gfSBjYXRjaCAoZSkgeyBjb25zb2xlLmxvZyhlKSB9ClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wYW5lbC9hY3Rpb24uY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGFuZWwvZm9vdGVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BhbmVsL2hlYWRlci5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wYW5lbC9yaXZlci5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wYW5lbC9zZWFyY2guY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL2NoYXQvZGl2LmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC9jb2RlL3ZpbWVyLmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC90ZWFtL3BsYW4uY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvZGF0YS5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmNzcyJdID0gW10KVm9sY2Fub3MubWV0YS5jYWNoZVsiL3BsdWdpbi9sb2NhbC93aWtpL2ZlZWwuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvZm9ybS5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3RvcnkvanNvbi5jc3MiXSA9IFtdClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9wbHVnaW4vc3Rvcnkvc3BpZGUuY3NzIl0gPSBbXQpWb2xjYW5vcy5tZXRhLmNhY2hlWyIvcGx1Z2luL3N0b3J5L3RyZW5kLmNzcyJdID0gW10KCl9jYW5fbmFtZSA9ICIvbGliL2Jhc2UuanMiClZvbGNhbm9zKCJiYXNlIiwge2hlbHA6ICLmlbDmja7nsbvlnosiLCBJbnQ6IGZ1bmN0aW9uKHZhbCwgZGVmKSB7IHJldHVybiBwYXJzZUludCh2YWwpfHxkZWZ8fDAgfSwKCU1pbjogZnVuY3Rpb24odmFsLCBtaW4pIHsgcmV0dXJuIHZhbCA+IG1pbj8gdmFsOiBtaW4gfSwKCU1heDogZnVuY3Rpb24odmFsLCBtYXgpIHsgcmV0dXJuIHZhbCA8IG1heD8gdmFsOiBtYXggfSwKCU9iajogZnVuY3Rpb24odmFsLCBkZWYpIHsKCQl0cnkgewoJCQlpZiAodHlwZW9mIHZhbCA9PSBsYW5nLlNUUklORykgeyBpZiAodmFsID09ICIiKSB7IHJldHVybiBkZWYgfSB2YWwgPSBKU09OLnBhcnNlKHZhbCkgfQoJCQlpZiAodmFsLmxlbmd0aCA+IDApIHsgcmV0dXJuIHZhbCB9IGZvciAodmFyIGsgaW4gdmFsKSB7IHJldHVybiB2YWwgfSByZXR1cm4gZGVmCgkJfSBjYXRjaCAoZSkgeyByZXR1cm4gdmFsICYmIHZhbC5zcGxpdCAmJiB2YWwuc3BsaXQoaWNlLkZTKSB8fCBkZWYgfQoJfSwKCUNvcHk6IGZ1bmN0aW9uKHRvLCBmcm9tLCBza2lwKSB7IGlmICghZnJvbSkgeyByZXR1cm4gdG8gfQoJCWlmIChhcmd1bWVudHMubGVuZ3RoID09IDIgfHwgdHlwZW9mIHNraXAgPT0gImJvb2xlYW4iKSB7CgkJCWZvciAodmFyIGsgaW4gZnJvbSkgewoJCQkJaWYgKHNraXAgJiYgdG9ba10gIT0gdW5kZWZpbmVkKSB7IGNvbnRpbnVlIH0KCQkJCWlmIChmcm9tW2tdID09PSAiIikgeyBkZWxldGUodG9ba10pOyBjb250aW51ZSB9CgkJCQl0b1trXSA9IGZyb21ba10KCQkJfQoJCQlyZXR1cm4gdG8KCQl9CgkJZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGsgPSBhcmd1bWVudHNbaV07IHRvW2tdID0gZnJvbVtrXQoJCX0KCQlyZXR1cm4gdG8KCX0sCglFcTogZnVuY3Rpb24odG8sIGZyb20pIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJaWYgKHR5cGVvZiB0byAhPSB0eXBlb2YgZnJvbSkgeyByZXR1cm4gZmFsc2UgfQoJCWlmICh0eXBlb2YgdG8gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJaWYgKHRvLmxlbmd0aCAhPSBmcm9tLmxlbmd0aCkgeyByZXR1cm4gZmFsc2UgfQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRvLmxlbmd0aDsgaSsrKSB7CgkJCQlpZiAoIWNhbGwodG9baV0sIGZyb21baV0pKSB7IHJldHVybiBmYWxzZSB9CgkJCX0KCQkJZm9yICh2YXIgayBpbiB0bykgewoJCQkJaWYgKCFjYWxsKHRvW2tdLCBmcm9tW2tdKSkgeyByZXR1cm4gZmFsc2UgfQoJCQl9CgkJCXJldHVybiB0cnVlCgkJfQoJCXJldHVybiB0byA9PT0gZnJvbQoJfSwKCglFeHQ6IGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIChwYXRoLnNwbGl0KGljZS5QUykucG9wKCkuc3BsaXQoaWNlLlBUKS5wb3AoKSkudG9Mb3dlckNhc2UoKSB9LAoJUGF0aDogZnVuY3Rpb24ocGF0aCkgeyB2YXIgcmVzID0gIiIKCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyBpZiAoIWFyZ3VtZW50c1tpXSkgeyBjb250aW51ZSB9CgkJCXJlcyArPSAoYXJndW1lbnRzW2ldWzBdPT1pY2UuUFMgfHwgcmVzPT0iIiB8fCByZXNbcmVzLmxlbmd0aC0xXT09aWNlLlBTPyAiIjogaWNlLlBTKSArIGFyZ3VtZW50c1tpXS50cmltKCkKCQl9CgkJcmV0dXJuIHJlcwoJfSwKCUFyZ3M6IGZ1bmN0aW9uKCkgeyB2YXIgcmVzID0gW10KCQlmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMikgewoJCQlpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLk9CSkVDVCkgewoJCQkJZm9yICh2YXIgayBpbiBhcmd1bWVudHNbaV0pIHsgcmVzLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2ldW2tdKSkgfQoJCQkJaS0tOyBjb250aW51ZQoJCQl9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSkgeyAKCQkJCXJlcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChhcmd1bWVudHNbaV0pKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJndW1lbnRzW2krMV0pKQoJCQl9CgkJfQoJCXJldHVybiByZXMuam9pbigiJiIpCgl9LAoJTWVyZ2VVUkw6IGZ1bmN0aW9uKHVybCkgewoJCXZhciBhcmdzID0ge307ICh1cmwuc3BsaXQoIj8iKVsxXXx8IiIpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IGlmICghaXRlbSkgeyByZXR1cm4gfQoJCQl2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IGFyZ3NbZGVjb2RlVVJJQ29tcG9uZW50KGxzWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQobHNbMV0pCgkJfSkKCQlmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewoJCQlzd2l0Y2ggKHR5cGVvZiBhcmd1bWVudHNbaV0pIHsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IGFyZ3NbYXJndW1lbnRzW2ldXSA9IGFyZ3VtZW50c1tpKzFdLCBpKys7IGJyZWFrCgkJCQljYXNlIGxhbmcuT0JKRUNUOgoJCQkJCWlmIChhcmd1bWVudHNbaV0ubGVuZ3RoID4gMCkgewoJCQkJCQlmb3IgKHZhciBqID0gMDsgaiA8IGFyZ3VtZW50c1tpXS5sZW5ndGg7IGogKz0gMikgeyBhcmdzW2FyZ3VtZW50c1tpXVtqXV0gPSBhcmd1bWVudHNbaV1bal0gfQoJCQkJCX0gZWxzZSB7CgkJCQkJCWZvciAodmFyIGsgaW4gYXJndW1lbnRzW2ldKSB7IGFyZ3Nba10gPSBhcmd1bWVudHNbaV1ba10gfQoJCQkJCX0KCQkJCQlicmVhawoJCQl9CgkJfQoJCXZhciBsaXN0ID0gW107IGZvciAodmFyIGsgaW4gYXJncykgeyBrICYmYXJnc1trXSAmJiBsaXN0LnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGspKyI9IitlbmNvZGVVUklDb21wb25lbnQoYXJnc1trXSkpIH0KCQlyZXR1cm4gdXJsLnNwbGl0KCI/IilbMF0rKGxpc3QubGVuZ3RoPjA/ICI/IitsaXN0LmpvaW4oIiYiKTogIiIpCgl9LAoJUGFyc2VVUkw6IGZ1bmN0aW9uKHVybCkgeyB2YXIgcmVzID0ge2xpbms6IHVybH0KCQl2YXIgbGlzdCA9IHVybC5zcGxpdCgiPyIpOyByZXNbIm9yaWdpbiJdID0gbGlzdFswXQoJCWxpc3RbMV0gJiYgbGlzdFsxXS5zcGxpdCgiJiIpLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgbHMgPSBpdGVtLnNwbGl0KCI9Iik7IHJlc1tkZWNvZGVVUklDb21wb25lbnQobHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChsc1sxXSkKCQl9KQoJCXJldHVybiByZXMKCX0sCglQYXJzZUpTT046IGZ1bmN0aW9uKHN0cikgeyB2YXIgcmVzCgkJaWYgKHR5cGVvZiBzdHIgPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIHN0ciB9CgkJaWYgKHN0ci5pbmRleE9mKCJodHRwIikgPT0gMCkgeyB2YXIgbHMgPSBzdHIuc3BsaXQoIj8iKQoJCQlyZXMgPSB7dHlwZTogbWRiLkxJTkssIG5hbWU6ICIiLCB0ZXh0OiBzdHJ9CgkJCXJlcy5uYW1lID0gbHNbMF0uc3BsaXQoIjovLyIpLnBvcCgpLnNwbGl0KGljZS5QUylbMF0KCQkJbHNbMV0gJiYgbHNbMV0uc3BsaXQoIiYiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGxzID0gaXRlbS5zcGxpdCgiPSIpCgkJCQlyZXNbZGVjb2RlVVJJQ29tcG9uZW50KGxzWzBdKV0gPSBkZWNvZGVVUklDb21wb25lbnQobHNbMV0pCgkJCX0pCgkJCXJldHVybiByZXMKCQl9CgkJdHJ5IHsgcmVzID0gSlNPTi5wYXJzZShzdHIpLCByZXMudGV4dCA9IHJlcy50ZXh0fHxzdHIsIHJlcy50eXBlID0gcmVzLnR5cGV8fG5mcy5KU09OCgkJfSBjYXRjaCAoZSkgeyByZXMgPSB7dHlwZTogbWRiLlRFWFQsIHRleHQ6IHN0cn0gfQoJCXJldHVybiByZXMKCX0sCglQYXJzZVNpemU6IGZ1bmN0aW9uKHNpemUpIHsgc2l6ZSA9IHNpemUudG9Mb3dlckNhc2UoKQoJCWlmIChzaXplLmVuZHNXaXRoKCJ0YiIpIHx8IHNpemUuZW5kc1dpdGgoInQiKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0ICogMTAyNCAqIDEwMjQgKiAxMDI0CgkJfQoJCWlmIChzaXplLmVuZHNXaXRoKCJnYiIpIHx8IHNpemUuZW5kc1dpdGgoImciKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0ICogMTAyNCAqIDEwMjQKCQl9CgkJaWYgKHNpemUuZW5kc1dpdGgoIm1iIikgfHwgc2l6ZS5lbmRzV2l0aCgibSIpKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplKSAqIDEwMjQgKiAxMDI0CgkJfQoJCWlmIChzaXplLmVuZHNXaXRoKCJrYiIpIHx8IHNpemUuZW5kc1dpdGgoImsiKSkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZSkgKiAxMDI0CgkJfQoJCXJldHVybiBwYXJzZUludChzaXplKQoJfSwKCglTaXplOiBmdW5jdGlvbihzaXplKSB7IHNpemUgPSBwYXJzZUludChzaXplKQoJCWlmIChzaXplID4gMTAwMDAwMDAwMCkgewoJCQlyZXR1cm4gcGFyc2VJbnQoc2l6ZS8xMDAwMDAwMDAwKSArIGljZS5QVCArIHBhcnNlSW50KHNpemUvMTAwMDAwMDAlMTAwKSArICJHIgoJCX0KCQlpZiAoc2l6ZSA+IDEwMDAwMDApIHsKCQkJcmV0dXJuIHBhcnNlSW50KHNpemUvMTAwMDAwMCkgKyBpY2UuUFQgKyBwYXJzZUludChzaXplLzEwMDAwJTEwMCkgKyAiTSIKCQl9CgkJaWYgKHNpemUgPiAxMDAwKSB7CgkJCXJldHVybiBwYXJzZUludChzaXplLzEwMDApICsgaWNlLlBUICsgcGFyc2VJbnQoc2l6ZS8xMCUxMDApICsgIksiCgkJfQoJCXJldHVybiBzaXplICsgIkIiCgl9LAoJTnVtYmVyOiBmdW5jdGlvbihkLCBuKSB7IHZhciByZXN1bHQgPSBbXQoJCXdoaWxlIChkID4gMCkgeyByZXN1bHQucHVzaChkJTEwKTsgZCA9IHBhcnNlSW50KGQvMTApOyBuLS0gfQoJCXdoaWxlIChuID4gMCkgeyByZXN1bHQucHVzaCgiMCIpOyBuLS0gfQoJCXJldHVybiByZXN1bHQucmV2ZXJzZSgpLCByZXN1bHQuam9pbigiIikKCX0sCglGb3JtYXQ6IGZ1bmN0aW9uKG9iaikgeyByZXR1cm4gSlNPTi5zdHJpbmdpZnkob2JqKSB9LAoJU2ltcGxlOiBmdW5jdGlvbigpIHsgdmFyIHJlcyA9IFtdCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTsgc3dpdGNoICh0eXBlb2YgYXJndW1lbnRzW2ldKSB7CgkJCQljYXNlIGxhbmcuTlVNQkVSOiByZXMucHVzaChhcmcpOyBicmVhawoJCQkJY2FzZSBsYW5nLlNUUklORzogcmVzLnB1c2goYXJnKTsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6CgkJCQkJaWYgKGFyZy5sZW5ndGggPiAwKSB7IHJlcyA9IHJlcy5jb25jYXQoYXJnKTsgYnJlYWsgfQoJCQkJCWZvciAodmFyIGsgaW4gYXJnKSB7IGsgJiYgYXJnW2tdICYmIHJlcy5wdXNoKGssIGFyZ1trXSkgfQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OiByZXMucHVzaChhcmcpOyAKCQkJfQoJCX0KCQlyZXR1cm4gcmVzCgl9LAoJQWRkVW5pcTogZnVuY3Rpb24obGlzdCwgdmFsdWUpIHsgbGlzdCA9IGxpc3R8fFtdOyByZXR1cm4gbGlzdC5pbmRleE9mKHZhbHVlKSA9PSAtMSAmJiBsaXN0LnB1c2godmFsdWUpLCBsaXN0IH0sCgoJRGF0ZTogZnVuY3Rpb24odGltZSkgeyB2YXIgbm93ID0gbmV3IERhdGUoKQoJCWlmICh0eXBlb2YgdGltZSA9PSBsYW5nLlNUUklORyAmJiB0aW1lICE9ICIiKSB7IHZhciBscyA9IHRpbWUuc3BsaXQoaWNlLlNQKQoJCQl2YXIgdnMgPSBsc1swXS5zcGxpdCgiLSIpCgkJCW5vdy5zZXRGdWxsWWVhcihwYXJzZUludCh2c1swXSkpCgkJCW5vdy5zZXRNb250aChwYXJzZUludCh2c1sxXSktMSkKCQkJbm93LnNldERhdGUocGFyc2VJbnQodnNbMl0pKQoKCQkJdmFyIHZzID0gbHNbMV0uc3BsaXQoIjoiKQoJCQlub3cuc2V0SG91cnMocGFyc2VJbnQodnNbMF0pKQoJCQlub3cuc2V0TWludXRlcyhwYXJzZUludCh2c1sxXSkpCgkJCW5vdy5zZXRTZWNvbmRzKHBhcnNlSW50KHZzWzJdKSkKCQl9IGVsc2UgaWYgKHRpbWUpIHsKCQkJbm93ID0gdGltZQoJCX0KCQlyZXR1cm4gbm93Cgl9LAoJVGltZTogZnVuY3Rpb24odGltZSwgZm10KSB7IHZhciBub3cgPSB0aGlzLkRhdGUodGltZSkKCQl2YXIgbGlzdCA9IFsiU3VuIiwgIk1vbiIsICJUdWUiLCAiV2VkIiwgIlRodSIsICJGcmkiLCAiU2F0Il0KCQlmbXQgPSBmbXR8fCIlSDolTTolUyIKCQlmbXQgPSBmbXQucmVwbGFjZSgiJXkiLCBub3cuZ2V0RnVsbFllYXIoKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJW0iLCB0aGlzLk51bWJlcihub3cuZ2V0TW9udGgoKSsxLCAyKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJWQiLCB0aGlzLk51bWJlcihub3cuZ2V0RGF0ZSgpLCAyKSkKCQlmbXQgPSBmbXQucmVwbGFjZSgiJXciLCBsaXN0W25vdy5nZXREYXkoKV0pCgkJZm10ID0gZm10LnJlcGxhY2UoIiVIIiwgdGhpcy5OdW1iZXIobm93LmdldEhvdXJzKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlTSIsIHRoaXMuTnVtYmVyKG5vdy5nZXRNaW51dGVzKCksIDIpKQoJCWZtdCA9IGZtdC5yZXBsYWNlKCIlUyIsIHRoaXMuTnVtYmVyKG5vdy5nZXRTZWNvbmRzKCksIDIpKQoJCXJldHVybiBmbXQKCX0sCglUaW1lQWRkOiBmdW5jdGlvbih0LCBkKSB7IHJldHVybiBuZXcgRGF0ZSh0IC0gdCUoMjQqMzYwMCoxMDAwKSAtIDgqMzYwMCoxMDAwICsgZCoyNCozNjAwKjEwMDApIH0sCglEdXJhdGlvbjogZnVuY3Rpb24obikgeyB2YXIgcmVzID0gIiIsIGggPSAwCgkJaCA9IHBhcnNlSW50KG4vMzYwMDAwMC8yNCksIGggPiAwICYmIChyZXMgKz0gaCsiZCIpLCBuID0gbiAlICgzNjAwMDAwKjI0KQoJCWggPSBwYXJzZUludChuLzM2MDAwMDApLCBoID4gMCAmJiAocmVzICs9IGgrImgiKSwgbiA9IG4gJSAzNjAwMDAwCgkJaCA9IHBhcnNlSW50KG4vNjAwMDApLCBoID4gMCAmJiAocmVzICs9IGgrIm0iKSwgbiA9IG4gJSA2MDAwMAoJCWggPSBwYXJzZUludChuLzEwMDApLCBoID4gMCAmJiAocmVzICs9IGgpLCBuID0gbiAlIDEwMDAKCQlyZXR1cm4gcmVzICsgKG4gPiAwPyBpY2UuUFQrcGFyc2VJbnQobi8xMCk6ICIiKSArICJzIgoJfSwKCgltb2Q6IGZ1bmN0aW9uKGluZGV4LCB0b3RhbCkgewoJCXJldHVybiAoaW5kZXgrdG90YWwpICUgdG90YWwKCX0sCglnZXRWYWxpZDogZnVuY3Rpb24oKSB7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHYgPSBhcmd1bWVudHNbaV0KCQkJaWYgKHR5cGVvZiB2ID09IGxhbmcuT0JKRUNUKSB7CgkJCQlpZiAodiA9PSBudWxsKSB7IGNvbnRpbnVlIH0KCQkJCWZvciAodmFyIGsgaW4gdikgeyByZXR1cm4gdiB9CgkJCQlpZiAodi5sZW5ndGggPiAwKSB7IHJldHVybiB2IH0KCQkJfSBlbHNlIGlmICh0eXBlb2YgdiA9PSBsYW5nLlNUUklORyAmJiB2KSB7CgkJCQlyZXR1cm4gdgoJCQl9IGVsc2UgaWYgKHYgPT0gdW5kZWZpbmVkKSB7CgkJCQljb250aW51ZQoJCQl9IGVsc2UgewoJCQkJcmV0dXJuIHYKCQkJfQoJCX0KCX0sCglpc051bWJlcjogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuTlVNQkVSIH0sCglpc1N0cmluZzogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuU1RSSU5HIH0sCglpc09iamVjdDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuT0JKRUNUIH0sCglpc0FycmF5OiBmdW5jdGlvbih2YWwpIHsgcmV0dXJuIHR5cGVvZiB2YWwgPT0gbGFuZy5PQkpFQ1QgJiYgdmFsLmxlbmd0aCAhPSB1bmRlZmluZWQgfSwKCWlzRnVuYzogZnVuY3Rpb24odmFsKSB7IHJldHVybiB0eXBlb2YgdmFsID09IGxhbmcuRlVOQ1RJT04gfSwKCWlzRnVuY3Rpb246IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdHlwZW9mIHZhbCA9PSBsYW5nLkZVTkNUSU9OIH0sCglpc0NhbGxiYWNrOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiBrZXkuaW5kZXhPZigib24iKSA9PSAwICYmIHR5cGVvZiB2YWx1ZSA9PSBsYW5nLkZVTkNUSU9OIH0sCglpc1VuZGVmaW5lZDogZnVuY3Rpb24odmFsKSB7IHJldHVybiB2YWwgPT0gdW5kZWZpbmVkIH0sCglpc051bGw6IGZ1bmN0aW9uKHZhbCkgeyByZXR1cm4gdmFsID09IG51bGwgfSwKCXJlcGxhY2VBbGw6IGZ1bmN0aW9uKHN0cikgewoJCWZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAyKSB7IGlmICghYXJndW1lbnRzW2ldKSB7IGNvbnRpbnVlIH0KCQkJaWYgKHN0ci5yZXBsYWNlQWxsKSB7IHN0ciA9IHN0ci5yZXBsYWNlQWxsKGFyZ3VtZW50c1tpXSwgYXJndW1lbnRzW2krMV0pOyBjb250aW51ZSB9CgkJCWlmIChzdHIucmVwbGFjZSkgeyBzdHIgPSBzdHIucmVwbGFjZShhcmd1bWVudHNbaV0sIGFyZ3VtZW50c1tpKzFdKTsgY29udGludWUgfQoJCX0KCQlyZXR1cm4gc3RyCgl9LAoKCWNvdW50OiBmdW5jdGlvbihzdHIsIHMpIHsgdmFyIG4gPSAwCgkJZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsKCQkJaWYgKHN0cltpXSA9PSBzKSB7IG4rKyB9CgkJfQoJCXJldHVybiBuCgl9LAoJcmFuZG9tOiBmdW5jdGlvbihtYXgsIG1pbikgeyByZXR1cm4gbWluID0gbWlufHwwLCBwYXJzZUludChNYXRoLnJhbmRvbSgpKihtYXgtbWluKSkrbWluIH0sCglpc05pZ2h0OiBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCk7IHJldHVybiBub3cuZ2V0SG91cnMoKSA8IDcgfHwgbm93LmdldEhvdXJzKCkgPiAxNyB9LAoJYmVnaW5XaXRoOiBmdW5jdGlvbihzdHIsIGJlZ2luKSB7IHJldHVybiBzdHIudHJpbSgpLmluZGV4T2YoYmVnaW4pID09IDAgfSwKCWVuZFdpdGg6IGZ1bmN0aW9uKHN0ciwgZW5kKSB7IHJldHVybiBzdHIubGFzdEluZGV4T2YoZW5kKSArIGVuZC5sZW5ndGggPT0gc3RyLmxlbmd0aCB9LAoJdHJpbTogZnVuY3Rpb24oYXJncykgeyBpZiAodGhpcy5pc1N0cmluZyhhcmdzKSkgeyByZXR1cm4gYXJncy50cmltKCkgfQoJCWlmICh0aGlzLmlzQXJyYXkoYXJncykpIHsgZm9yICh2YXIgaSA9IGFyZ3MubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7IGlmICghYXJnc1tpXSkgeyBhcmdzLnBvcCgpIH0gZWxzZSB7IGJyZWFrIH0gfSB9CgkJcmV0dXJuIGFyZ3MKCX0sCgl0cmltUHJlZml4OiBmdW5jdGlvbihzdHIsIHByZSkgeyBpZiAoc3RyLmluZGV4T2YocHJlKSA9PSAtMSkgeyByZXR1cm4gc3RyIH0gcmV0dXJuIHN0ci5zbGljZShwcmUubGVuZ3RoKSB9LAoJdHJpbVN1ZmZpeDogZnVuY3Rpb24oc3RyLCBlbmQpIHsKCQl2YXIgaW5kZXggPSBzdHIubGFzdEluZGV4T2YoZW5kKQoJCWlmIChpbmRleCA9PSAtMSB8fCBpbmRleCtlbmQubGVuZ3RoICE9IHN0ci5sZW5ndGgpIHsgcmV0dXJuIHN0ciB9IHJldHVybiBzdHIuc2xpY2UoMCwgaW5kZXgpCgl9LAoJam9pbjogZnVuY3Rpb24obGlzdCwgc3ApIHsgcmV0dXJuIChsaXN0fHxbXSkuam9pbihzcHx8aWNlLlNQKSB9LAoJam9pbnM6IGZ1bmN0aW9uKGxpc3QsIGlubmVyLCBvdXRlcikgeyAKCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJbGlzdFtpXSA9IHR5cGVvZiBsaXN0W2ldID09IGxhbmcuU1RSSU5HPyBsaXN0W2ldOiBsaXN0W2ldLmpvaW4oaW5uZXJ8fGljZS5GUykKCQl9CgkJcmV0dXJuIGxpc3Quam9pbihvdXRlcnx8aWNlLlNQKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL2NvcmUuanMiClZvbGNhbm9zKCJjb3JlIiwge2hlbHA6ICLmlbDmja7nu5PmnoQiLAoJS2V5czogc2h5KCLov57mjqXlmagiLCBmdW5jdGlvbigpIHsgdmFyIGxpc3QgPSBbXQoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciB2ID0gYXJndW1lbnRzW2ldCgkJCXN3aXRjaCAodHlwZW9mIHYpIHsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IGZvciAodmFyIGogPSAwOyBqIDwgdi5sZW5ndGg7IGorKykgeyBsaXN0LnB1c2godltqXSkgfSBicmVhawoJCQkJY2FzZSBsYW5nLk5VTUJFUjogbGlzdC5wdXNoKHYrIiIpOyBicmVhawoJCQkJY2FzZSBsYW5nLkZVTkNUSU9OOiB2ID0gdigpCgkJCQlkZWZhdWx0OiB2ICYmIGxpc3QucHVzaCh2KyIiKQoJCQl9CgkJfQoJCXJldHVybiBsaXN0LmpvaW4oaWNlLlBUKQoJfSksCglWYWx1ZTogc2h5KCLlrZjlgqjlmagiLCBmdW5jdGlvbihkYXRhLCBrZXksIHZhbHVlKSB7CgkJaWYgKGRhdGEgPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9CgkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGRhdGEgfQoKCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCAmJiBrZXkubGVuZ3RoID4gMCkgeyBrZXkgPSBrZXkuam9pbihpY2UuUFQpIH0KCQlpZiAodHlwZW9mIGtleSA9PSBsYW5nLk9CSkVDVCkgeyBmb3IgKHZhciBrIGluIGtleSkgeyBhcmd1bWVudHMuY2FsbGVlLmNhbGwodGhpcywgZGF0YSwgaywga2V5W2tdKSB9IHJldHVybiBkYXRhIH0KCgkJaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewoJCQl2YXIgX2RhdGEgPSBkYXRhCgoJCQl2YXIgbHMgPSBrZXkuc3BsaXQoaWNlLlBUKQoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxzLmxlbmd0aDsgaSsrKSB7CgkJCQl2YXIgX3N1YiA9IF9kYXRhW2xzW2ldXXx8e30KCQkJCV9kYXRhW2xzW2ldXSA9IF9zdWIKCQkJCWlmIChpID09IGxzLmxlbmd0aCAtIDEpIHsKCQkJCQlfZGF0YVtsc1tpXV0gPSB2YWx1ZQoJCQkJfSBlbHNlIHsKCQkJCQlfZGF0YSA9IF9zdWIKCQkJCX0KCQkJfQoJCQkvLyBkYXRhW2tleV0gPSB2YWx1ZQoJCX0KCQlpZiAoZGF0YVtrZXldICE9IHVuZGVmaW5lZCkgeyByZXR1cm4gZGF0YVtrZXldIH0KCgkJdmFyIHAgPSBkYXRhLCBscyA9IGtleS5zcGxpdChpY2UuUFQpOyB3aGlsZSAocCAmJiBscy5sZW5ndGggPiAwKSB7CgkJCWlmIChsc1swXSA9PSAiLTEiKSB7IGxzWzBdID0gcC5sZW5ndGgtMSB9CgkJCXAgPSBwW2xzWzBdXSwgbHMgPSBscy5zbGljZSgxKQoJCX0gcmV0dXJuIHAKCX0pLAoJU3BsaXQ6IHNoeSgi5YiG6K+N5ZmoIiwgZnVuY3Rpb24oc3RyKSB7IGlmICghc3RyIHx8ICFzdHIubGVuZ3RoKSB7IHJldHVybiBbXSB9CgkJdmFyIG9wdCA9IHtkZXRhaWw6IGZhbHNlfSwgYXJnID0gW107IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CgkJCXR5cGVvZiBhcmd1bWVudHNbaV0gPT0gbGFuZy5PQkpFQ1Q/IG9wdCA9IGFyZ3VtZW50c1tpXTogYXJnLnB1c2goYXJndW1lbnRzW2ldKQoJCX0KCgkJLy8g5a2X56ym5a6a5LmJCgkJZnVuY3Rpb24gX2xpc3Qoc3RyKSB7IHZhciByZXMgPSB7fTsgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHsgcmVzW3N0cltpXV0gPSB0cnVlIH07IHJldHVybiByZXMgfQoJCXZhciBzcGFjZSA9IF9saXN0KGFyZ1swXXx8Ilx0ICw7XG4iKSAgLy8g56m655m956ymCgkJdmFyIGJsb2NrID0gX2xpc3QoYXJnWzFdfHwie1soKV19IikgICAvLyDliIbpmpTnrKYKCQl2YXIgcXVvdGUgPSBfbGlzdChhcmdbMl18fCInXCJgIikgICAgIC8vIOW8leeUqOespgoJCXZhciB0cmFucyA9IF9saXN0KGFyZ1szXXx8IlxcIikgICAgICAgLy8g6L2s5LmJ56ymCgoJCXZhciByZXMgPSBbXSwgYmVnaW4gPSAwOyBmdW5jdGlvbiBwdXNoKG9iaikgewoJCQlvYmogJiYgcmVzLnB1c2godHlwZW9mIG9iaiA9PSBsYW5nLlNUUklORyB8fCBvcHQuZGV0YWlsPyBvYmo6IG9iai50ZXh0KSwgYmVnaW4gPSAtMQoJCX0KCgkJLy8g5byA5aeL5YiG6K+NCgkJZm9yICh2YXIgcyA9ICIiLCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykgewoJCQlpZiAoc3BhY2Vbc3RyW2ldXSkgeyAvLyDnqbrnmb3nrKYKCQkJCWlmIChzKSB7IGNvbnRpbnVlIH0KCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJb3B0LmRldGFpbCAmJiBwdXNoKHt0eXBlOiBodG1sLlNQQUNFLCB0ZXh0OiBzdHIuc2xpY2UoaSwgaSsxKX0pCgoJCQl9IGVsc2UgaWYgKGJsb2NrW3N0cltpXV0pIHsgLy8g5YiG6ZqU56ymCgkJCQlpZiAocykgeyBjb250aW51ZSB9CgkJCQliZWdpbiA+IC0xICYmIHB1c2goc3RyLnNsaWNlKGJlZ2luLCBpKSkKCQkJCXB1c2goc3RyLnNsaWNlKGksIGkrMSkpCgoJCQl9IGVsc2UgaWYgKHF1b3RlW3N0cltpXV0pIHsgLy8g5byV55So56ymCgkJCQlpZiAocyA9PSAiIikgewoJCQkJCWJlZ2luID4gLTEgJiYgcHVzaChzdHIuc2xpY2UoYmVnaW4sIGkpKQoJCQkJCXMgPSBzdHJbaV0sIGJlZ2luID0gaSsxCgkJCQl9IGVsc2UgaWYgKHMgPT0gc3RyW2ldKSB7CgkJCQkJcHVzaCh7dHlwZTogbGFuZy5TVFJJTkcsIHRleHQ6IHN0ci5zbGljZShiZWdpbiwgaSksIGxlZnQ6IHMsIHJpZ2h0OiBzdHJbaV19KQoJCQkJCXMgPSAiIiwgYmVnaW4gPSAtMQoJCQkJfQoKCQkJfSBlbHNlIGlmICh0cmFuc1tzdHJbaV1dKSB7IC8vIOi9rOS5ieespgoJCQkJYmVnaW4gPT0gLTEgJiYgKGJlZ2luID0gaSsrKQoKCQkJfSBlbHNlIHsgLy8g5pmu6YCa56ymCgkJCQliZWdpbiA9PSAtMSAmJiAoYmVnaW4gPSBpKQoJCQl9CgkJfQoKCQkvLyDliankvZnlrZfnrKYKCQliZWdpbiA+PSAwICYmIChzPyBwdXNoKHt0eXBlOiBsYW5nLlNUUklORywgdGV4dDogc3RyLnNsaWNlKGJlZ2luKSwgbGVmdDogcywgcmlnaHQ6ICIifSk6IHB1c2goc3RyLnNsaWNlKGJlZ2luKSkpCgkJcmV0dXJuIHJlcwoJfSksCglDYWxsRnVuYzogc2h5KCLosIPnlKjlmagiLCBmdW5jdGlvbihmdW5jLCBhcmdzLCBtb2QpIHsgYXJncyA9IGFyZ3N8fHt9CgkJdmFyIGV2ZW50ID0gYXJnc1siZXZlbnQiXXx8e30sIGNhbiA9IGFyZ3NbImNhbiJdfHxhcmdzWzBdLCBtc2cgPSBhcmdzWyJtc2ciXXx8YXJnc1sxXSwgY21kcyA9IGFyZ3NbImNtZHMiXXx8W10KCQlldmVudCA9IGV2ZW50Ll9ldmVudHx8ZXZlbnQKCgkJLy8g5p+l5om+6LCD55SoCgkJZnVuYyA9IHR5cGVvZiBmdW5jID09IGxhbmcuRlVOQ1RJT04/IGZ1bmM6IHR5cGVvZiBmdW5jID09IGxhbmcuU1RSSU5HPyB0aGlzLlZhbHVlKG1vZHx8Y2FuLCBmdW5jKToKCQkJdHlwZW9mIGZ1bmMgPT0gbGFuZy5PQkpFQ1QgJiYgZnVuYy5sZW5ndGggPiAwPyB0aGlzLlZhbHVlKGZ1bmNbMF0sIHRoaXMuS2V5cyhmdW5jLnNsaWNlKDEpKSk6IG51bGwKCQlpZiAodHlwZW9mIGZ1bmMgIT0gbGFuZy5GVU5DVElPTikgeyByZXR1cm4gfQoKCQkvLyDop6PmnpDlj4LmlbAKCQl2YXIgbGlzdCA9IFtdLCBlY2hvID0gZmFsc2UsIGNiID0gYXJnc1siY2IiXQoJCXRoaXMuTGlzdChmdW5jLnRvU3RyaW5nKCkuc3BsaXQoIikiKVswXS5zcGxpdCgiKCIpWzFdLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7IGl0ZW0gPSBpdGVtLnRyaW0oKTsgaWYgKGl0ZW0gPT0gIiIpIHsgcmV0dXJuIH0KCQkJdmFyIGFyZyA9IGFyZ3NbaXRlbV0gfHwgbXNnJiZtc2cuT3B0aW9uJiZtc2cuT3B0aW9uKGl0ZW0pIHx8IGNhbiYmY2FuLkNvbmYmJmNhbi5Db25mKGl0ZW0pIHx8CgkJCQlldmVudCYmIShldmVudCBpbnN0YW5jZW9mIEV2ZW50KSYmZXZlbnRbaXRlbV0gfHwgYXJnc1tpbmRleF0gfHwgY21kc1tpbmRleF0gfHwgbnVsbAoJCQlpZiAoaXRlbSA9PSAiY2IiKSB7IGVjaG8gPSB0cnVlIH0KCQkJbGlzdC5wdXNoKGFyZykKCQl9KQoKCQkvLyDmiafooYzosIPnlKgKCQl2YXIgcmVzID0gZnVuYy5hcHBseShtb2R8fGNhbiwgbGlzdCkKCQlpZiAoIWVjaG8gJiYgdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04pIHsgcmVzICYmIG1zZyAmJiBtc2cuRWNobyhyZXMpLCBhcmd1bWVudHMuY2FsbGVlLmFwcGx5KHRoaXMsIFtjYiwge21zZzogbXNnLCByZXM6IHJlc31dKSB9CgkJcmV0dXJuIHJlcwoJfSksCgoJTGlzdDogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihsaXN0LCBjYiwgaW50ZXJ2YWwsIGNicykgewoJCWlmICh0eXBlb2YgbGlzdCA9PSBsYW5nLlNUUklORykgeyAvLyDpu5jorqTluo/liJcKCQkJbGlzdCA9IFtsaXN0XQoJCX0gZWxzZSBpZiAodHlwZW9mIGxpc3QgPT0gbGFuZy5OVU1CRVIpIHsgLy8g562J5beu5bqP5YiXIFtlbmQgY2IgaW50ZXJ2YWxdfFtiZWdpbiBlbmQgaW50ZXJ2YWxdCgkJCXZhciBiZWdpbiA9IDAsIGVuZCA9IGxpc3QsIHN0ZXAgPSB0eXBlb2YgaW50ZXJ2YWwgPT0gbGFuZy5OVU1CRVI/IGludGVydmFsOiAxCgkJCWlmICh0eXBlb2YgY2IgPT0gbGFuZy5OVU1CRVIpIHsgYmVnaW4gPSBsaXN0LCBlbmQgPSBjYiwgY2IgPSBudWxsIH0KCQkJbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gYmVnaW47IGkgPCBlbmQ7IGkgKz0gc3RlcCkgeyBsaXN0LnB1c2goaSkgfQoJCX0KCgkJbGlzdCA9IGxpc3R8fFtdCgkJaWYgKGludGVydmFsID4gMCkgeyAvLyDml7bpl7Tluo/liJcKCQkJZnVuY3Rpb24gbG9vcChpKSB7IGlmIChpID49IGxpc3QubGVuZ3RoKSB7IHJldHVybiB0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKGxpc3QpIH0KCQkJCWNiKGxpc3RbaV0sIGksIGxpc3QpLCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBsb29wKGkrMSkgfSwgaW50ZXJ2YWwpCgkJCX0KCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgbGlzdC5sZW5ndGggPiAwICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoMCkgfSwgaW50ZXJ2YWwvNCkKCQl9IGVsc2UgeyAvLyDpgInmi6nluo/liJcKCQkJdmFyIHNsaWNlID0gW10sIHJlcwoJCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OPyAocmVzID0gY2IobGlzdFtpXSwgaSwgbGlzdCkpICE9IHVuZGVmaW5lZCAmJiBzbGljZS5wdXNoKHJlcyk6IHNsaWNlLnB1c2gobGlzdFtpXSkKCQkJfTsgbGlzdCA9IHNsaWNlCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCU5leHQ6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24obGlzdCwgY2IsIGNicykgewoJCXN3aXRjaCAodHlwZW9mIGxpc3QpIHsKCQkJY2FzZSBsYW5nLk9CSkVDVDogaWYgKGxpc3QgPT0gbnVsbCkgeyBsaXN0ID0gW107IGJyZWFrIH0KCQkJCWlmIChsaXN0Lmxlbmd0aCA9PSB1bmRlZmluZWQpIHsgdmFyIGxzID0gW107IGZvciAodmFyIGsgaW4gbGlzdCkgeyBscy5wdXNoKGspIH0gbGlzdCA9IGxzIH0gYnJlYWsKCQkJZGVmYXVsdDogaWYgKGxpc3QgPT0gdW5kZWZpbmVkKSB7IGxpc3QgPSBbXTsgYnJlYWsgfQoJCQkJbGlzdCA9IFtsaXN0XQoJCX0KCgkJZnVuY3Rpb24gbmV4dChpKSB7IGkgPCBsaXN0Lmxlbmd0aD8gIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKGxpc3RbaV0sIGZ1bmN0aW9uKCkgeyBuZXh0KGkrMSkgfSwgaSwgbGlzdCk6CgkJCQl0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKGxpc3QpIH0KCQlyZXR1cm4gbmV4dCgwKSwgbGlzdAoJfSksCglJdGVtczogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihvYmosIGNiKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG9iaikgewoJCQlsaXN0ID0gbGlzdC5jb25jYXQodGhpcy5MaXN0KG9ialtrXSwgZnVuY3Rpb24odiwgaSkgewoJCQkJcmV0dXJuIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKHYsIGksIGssIG9iaikKCQkJfSkpCgkJfQoJCXJldHVybiBsaXN0Cgl9KSwKCUl0ZW1Tb3J0OiBzaHkoIui/reS7o+WZqCIsIGZ1bmN0aW9uKG9iaiwga2V5LCBjYikgeyB2YXIgbGlzdCA9IFtdCgkJdmFyIG9yZGVyID0gW10sIGtleXMgPSB7fSwgdmFscyA9IHt9LCBpID0gMAoJCWZvciAodmFyIGsgaW4gb2JqKSB7IG8gPSBvYmpba11ba2V5XXx8aSsrCgkJCW9yZGVyLnB1c2gobyksIGtleXNbb10gPSBrLCB2YWxzW29dID0gb2JqW2tdCgkJfTsgb3JkZXIuc29ydCgpCgoJCWZvciAodmFyIGkgaW4gb3JkZXIpIHsgdmFyIGsgPSBvcmRlcltpXQoJCQl2YXIgcmVzID0gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IGNiKGtleXNba10sIHZhbHNba10pOiBrCgkJCXJlcyAhPSB1bmRlZmluZWQgJiYgbGlzdC5wdXNoKHJlcykKCQl9CgkJcmV0dXJuIGxpc3QKCX0pLAoJSXRlbTogc2h5KCLov63ku6PlmagiLCBmdW5jdGlvbihvYmosIGNiKSB7IHZhciBsaXN0ID0gW10KCQlmb3IgKHZhciBrIGluIG9iaikgewoJCQl2YXIgcmVzID0gdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04/IGNiKGssIG9ialtrXSk6IGsKCQkJcmVzICE9IHVuZGVmaW5lZCAmJiBsaXN0LnB1c2gocmVzKQoJCX0KCQlyZXR1cm4gbGlzdAoJfSksCglJdGVtQ0I6IHNoeSgi6L+t5Luj5ZmoIiwgZnVuY3Rpb24obWV0YSwgY2IsIGNhbiwgaXRlbSkgeyB2YXIgbGlzdCA9IFtdCgkJZm9yICh2YXIgayBpbiBtZXRhKSB7IChmdW5jdGlvbihrKSB7CgkJCWlmIChrLmluZGV4T2YoIm9uIikgPT0gMCAmJiB0eXBlb2YgbWV0YVtrXSA9PSBsYW5nLkZVTkNUSU9OKSB7CgkJCQlpZiAodHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04pIHsKCQkJCQljYihrLCBtZXRhW2tdKQoJCQkJfSBlbHNlIHsKCQkJCQljYltrXSA9IGZ1bmN0aW9uKGV2ZW50KSB7IG1ldGFba10oZXZlbnQsIGNhbiwgaXRlbSkgfQoJCQkJfQoJCQkJbGlzdC5wdXNoKGspCgkJCX0KCQl9KShrKSB9CgkJcmV0dXJuIGxpc3QKCX0pLAoKCVNwbGl0SW5wdXQ6IGZ1bmN0aW9uKGl0ZW0sIHR5cGUpIHsgaWYgKHR5cGVvZiBpdGVtID09IGxhbmcuT0JKRUNUKSB7IHJldHVybiBpdGVtIH0KCQl0eXBlID0gdHlwZXx8aHRtbC5URVhUOyBzd2l0Y2ggKGl0ZW0pIHsKCQkJY2FzZSBtZGIuTElTVDogcmV0dXJuIHt0eXBlOiB0eXBlID0gaHRtbC5CVVRUT04sIG5hbWU6IGl0ZW0sIGFjdGlvbjogaWNlLkFVVE99CgkJCWNhc2UgY2xpLkJBQ0s6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuQlVUVE9OLCBuYW1lOiBpdGVtfQoJCQljYXNlIG1kYi5OQU1FOiByZXR1cm4ge3R5cGU6IHR5cGUgPSBodG1sLlRFWFQsIG5hbWU6IGl0ZW19CgkJCWNhc2UgbWRiLlRFWFQ6IHJldHVybiB7dHlwZTogdHlwZSA9IGh0bWwuVEVYVEFSRUEsIG5hbWU6IGl0ZW19CgkJCWRlZmF1bHQ6IHZhciBscyA9IHRoaXMuU3BsaXQoaXRlbSwgIiAiLCAiOj1AIiksIHJlcyA9IHt0eXBlOiB0eXBlLCBuYW1lOiBsc1swXX07IGZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsKCQkJCQlzd2l0Y2ggKGxzW2ldKSB7CgkJCQkJCWNhc2UgIjoiOiByZXNbbWRiLlRZUEVdID0gbHNbaSsxXTsgYnJlYWsKCQkJCQkJY2FzZSAiPSI6CgkJCQkJCQlpZiAocmVzW21kYi5UWVBFXSA9PSBodG1sLlNFTEVDVCkgewoJCQkJCQkJCXJlcy52YWx1ZXMgPSB0aGlzLlNwbGl0KGxzW2krMV0pCgkJCQkJCQkJZm9yICh2YXIgaiA9IDE7IGogPCByZXMudmFsdWVzLmxlbmd0aDsgaisrKSB7CgkJCQkJCQkJCWlmIChyZXMudmFsdWVzWzBdID09ICIiIHx8IHJlcy52YWx1ZXNbMF0gPT0gcmVzLnZhbHVlc1tqXSkgewoJCQkJCQkJCQkJcmVzLnZhbHVlID0gcmVzLnZhbHVlc1swXSwgcmVzLnZhbHVlcyA9IHJlcy52YWx1ZXMuc2xpY2UoMSkKCQkJCQkJCQkJCWJyZWFrCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9IGVsc2UgewoJCQkJCQkJCXJlcy52YWx1ZSA9IGxzW2krMV0KCQkJCQkJCX0KCQkJCQkJCWJyZWFrCgkJCQkJCWNhc2UgIkAiOiByZXNbY3R4LkFDVElPTl0gPSBsc1tpKzFdOyBicmVhawoJCQkJCX0KCQkJCX0gcmV0dXJuIHJlcwoJCX0KCX0sCglUaW1lcjMwMG1zOiBmdW5jdGlvbihjYikgeyB0aGlzLlRpbWVyKDMwMCwgY2IpIH0sCglUaW1lcjMwMDogZnVuY3Rpb24oY2IpIHsgdGhpcy5UaW1lcigzMDAsIGNiKSB9LAoJVGltZXIzczogZnVuY3Rpb24oY2IpIHsgdGhpcy5UaW1lcigzMDAwLCBjYikgfSwKCVRpbWVyOiBzaHkoIuWumuaXtuWZqCwgdmFsdWUsIFsxLDIsMyw0XSwge2ludGVydmFsLCBsZW5ndGh9IiwgZnVuY3Rpb24oaW50ZXJ2YWwsIGNiLCBjYnMpIHsKCQl2YXIgdGltZXIgPSB7c3RvcDogZmFsc2V9OyBmdW5jdGlvbiBsb29wKGkpIHsKCQkJdGltZXIuc3RvcCB8fCBpID49IGludGVydmFsLmxlbmd0aCAmJiBpbnRlcnZhbC5sZW5ndGggPj0gMCB8fCBjYih0aW1lciwgaW50ZXJ2YWwuaW50ZXJ2YWx8fGludGVydmFsW2ldLCBpLCBpbnRlcnZhbCk/CgkJCQl0eXBlb2YgY2JzID09IGxhbmcuRlVOQ1RJT04gJiYgY2JzKHRpbWVyLCBpbnRlcnZhbCk6IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoaSsxKSB9LCBpbnRlcnZhbC5pbnRlcnZhbHx8aW50ZXJ2YWxbaSsxXSkKCQl9CgoJCWludGVydmFsID0gdHlwZW9mIGludGVydmFsID09IGxhbmcuT0JKRUNUPyBpbnRlcnZhbDogW2ludGVydmFsXQoJCWlmIChpbnRlcnZhbC5pbnRlcnZhbCA9PSAwKSB7IGNiKCk7IHJldHVybiB0aW1lciB9CgoJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGxvb3AoMCkgfSwgaW50ZXJ2YWwuaW50ZXJ2YWx8fGludGVydmFsWzBdKQoJCXJldHVybiB0aW1lcgoJfSksCn0pCgpfY2FuX25hbWUgPSAiL2xpYi9taXNjLmpzIgpWb2xjYW5vcygibWlzYyIsIHtoZWxwOiAi6YCa5L+h5Y2P6K6uIiwgTWVzc2FnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0ge30gCgkJdmFyIHByb3RvID0ge19ldmVudDogZXZlbnQsIF9jYW46IGNhbiwKCQkJUnVuQWN0aW9uOiBmdW5jdGlvbihldmVudCwgc3ViLCBjbWRzLCBtZXRhKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IG1ldGEgPSBtZXRhIHx8IHN1YiYmc3ViLm9uYWN0aW9uIHx8IHt9CgkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJCWlmIChjbWRzICYmIGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBjYW4uYmFzZS5pc0Z1bmMobWV0YVtjbWRzWzFdXSkpIHsgZXZlbnQgPSBldmVudC5fZXZlbnR8fGV2ZW50CgkJCQkJcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19IQU5ETEUsIGljZS5UUlVFKSwgY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YVtjbWRzWzFdXSwge2V2ZW50OiBldmVudCwgY2FuOiBzdWIsIG1zZzogbXNnLCBidXR0b246IGNtZHNbMV0sIGNtZDogY21kc1sxXX0pLCB0cnVlCgkJCQl9CgkJCQlyZXR1cm4gZmFsc2UKCQkJfSwKCQkJRGlzcGxheTogZnVuY3Rpb24oZmlsZSkgeyBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSwgZmlsZSkgfSwKCQkJRGlzcGxheVN0b3J5OiBmdW5jdGlvbihmaWxlKSB7IG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZLCAiL3BsdWdpbi9zdG9yeS8iK2ZpbGUpIH0sCgkJCU9wdGlvblN0YXR1czogZnVuY3Rpb24oKSB7IHJldHVybiBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSB9LAoJCQlPcHRpb25Qcm9jZXNzOiBmdW5jdGlvbigpIHsgcmV0dXJuIG1zZy5PcHRpb24oaWNlLk1TR19QUk9DRVNTKSB9LAoJCQlPcHRpb25PclNlYXJjaDogZnVuY3Rpb24oa2V5KSB7IHJldHVybiBjYW4ubWlzYy5TZWFyY2goY2FuLCBrZXkpfHxtc2cuT3B0aW9uKGtleSkgfSwKCQkJT3B0aW9uOiBmdW5jdGlvbihrZXksIHZhbCkgewoJCQkJaWYgKGtleSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2cub3B0aW9uIHx8IFtdIH0KCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7IGNhbi5jb3JlLkl0ZW0oa2V5LCBtc2cuT3B0aW9uKSB9CgkJCQlpZiAodmFsID09IHVuZGVmaW5lZCkgeyByZXR1cm4gbXNnICYmIG1zZ1trZXldICYmIG1zZ1trZXldWzBdIHx8ICIiIH0KCQkJCXJldHVybiBtc2cub3B0aW9uID0gY2FuLmJhc2UuQWRkVW5pcShtc2cub3B0aW9uLCBrZXkpLCBtc2dba2V5XSA9IGNhbi5jb3JlLkxpc3QoYXJndW1lbnRzKS5zbGljZSgxKSwgdmFsCgkJCX0sCgkJCUFwcGVuZDogZnVuY3Rpb24oa2V5LCB2YWwpIHsKCQkJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHJldHVybiBtc2cgJiYgbXNnLmFwcGVuZCB8fCBbXSB9CgkJCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBjYW4uY29yZS5JdGVtKGtleSwgbXNnLkFwcGVuZCkgfQoJCQkJaWYgKHZhbCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIG1zZyAmJiBtc2dba2V5XSAmJiBtc2dba2V5XVswXSB8fCAiIiB9CgkJCQlyZXR1cm4gbXNnLmFwcGVuZCA9IGNhbi5iYXNlLkFkZFVuaXEobXNnLmFwcGVuZCwga2V5KSwgbXNnW2tleV0gPSBjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykuc2xpY2UoMSksIHZhbAoJCQl9LAoJCQlSZXN1bHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbXNnLnJlc3VsdCAmJiBtc2cucmVzdWx0LmpvaW4oIiIpIHx8ICIiIH0sCgoJCQlMZW5ndGg6IGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1heCA9ICIiLCBsZW4gPSAwOyBjYW4uY29yZS5MaXN0KG1zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgaW5kZXgpIHsKCQkJCQlpZiAobXNnW2tleV0gJiYgbXNnW2tleV0ubGVuZ3RoID4gbGVuKSB7IG1heCA9IGtleSwgbGVuID0gbXNnW2tleV0ubGVuZ3RoIH0KCQkJCX0pCgkJCQlyZXR1cm4gbGVuCgkJCX0sCgkJCVRhYmxlOiBmdW5jdGlvbihjYikgewoJCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobXNnLkxlbmd0aCgpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IHZhciBvbmUgPSB7fSwgcmVzCgkJCQkJY2FuLmNvcmUuTGlzdChtc2cuYXBwZW5kLCBmdW5jdGlvbihrZXkpIHsgb25lW2tleV0gPSAobXNnW2tleV0mJm1zZ1trZXldW2luZGV4XXx8IiIpIH0pCgkJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgKHJlcyA9IGNiKG9uZSwgaW5kZXgsIGFycmF5KSkgJiYgcmVzICE9IHVuZGVmaW5lZCAmJiByZXMgfHwgb25lCgkJCQl9KQoJCQl9LAoJCQlDbGVhcjogZnVuY3Rpb24oa2V5KSB7IHN3aXRjaCAoa2V5fHxpY2UuTVNHX0FQUEVORCkgewoJCQkJY2FzZSBpY2UuTVNHX0FQUEVORDoKCQkJCWNhc2UgaWNlLk1TR19PUFRJT046CgkJCQkJY2FuLmNvcmUuTGlzdChtc2dba2V5XSwgZnVuY3Rpb24oaXRlbSkgeyBkZWxldGUobXNnW2l0ZW1dKSB9KQoJCQkJZGVmYXVsdDogbXNnW2tleV0gPSBbXQoJCQl9IH0sCgkJCUNvcHk6IGZ1bmN0aW9uKHJlcykgeyBpZiAoIXJlcykgeyByZXR1cm4gbXNnIH0KCQkJCXJlcy5yZXN1bHQgJiYgKG1zZy5yZXN1bHQgPSAobXNnLnJlc3VsdHx8W10pLmNvbmNhdChyZXMucmVzdWx0KSkKCQkJCXJlcy5hcHBlbmQgJiYgKG1zZy5hcHBlbmQgPSByZXMuYXBwZW5kKSAmJiByZXMuYXBwZW5kLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQkJCXZhciBpID0gbXNnLm9wdGlvbiAmJiBtc2cub3B0aW9uLmluZGV4T2YoaXRlbSk7IGlmIChpID4gLTEpIHsKCQkJCQkJbXNnLm9wdGlvbltpXSA9ICIiLCBkZWxldGUobXNnW2l0ZW1dKQoJCQkJCX0KCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IChtc2dbaXRlbV18fFtdKS5jb25jYXQocmVzW2l0ZW1dKSkKCQkJCX0pCgkJCQlyZXMub3B0aW9uICYmIChtc2cub3B0aW9uID0gcmVzLm9wdGlvbikgJiYgcmVzLm9wdGlvbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQlyZXNbaXRlbV0gJiYgKG1zZ1tpdGVtXSA9IHJlc1tpdGVtXSkKCQkJCX0pCgkJCQlyZXMuX29wdGlvbiAmJiAobXNnLl9vcHRpb24gPSByZXMuX29wdGlvbikgJiYgcmVzLl9vcHRpb24uZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7CgkJCQkJcmVzW2l0ZW1dICYmIChtc2dbaXRlbV0gPSByZXNbaXRlbV0pCgkJCQl9KQoJCQkJcmV0dXJuIG1zZwoJCQl9LAoJCQlQdXNoOiBmdW5jdGlvbihrZXksIHZhbHVlLCBkZXRhaWwpIHsKCQkJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7CgkJCQkJdmFsdWUgPSB2YWx1ZXx8Y2FuLmNvcmUuSXRlbShrZXkpLCBjYW4uY29yZS5MaXN0KHZhbHVlLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWRldGFpbD8gbXNnLlB1c2gobWRiLktFWSwgaXRlbSkuUHVzaChtZGIuVkFMVUUsIGtleVtpdGVtXXx8IiIpOiBtc2cuUHVzaChpdGVtLCBrZXlbaXRlbV18fCIiKQoJCQkJCX0pCgkJCQkJcmV0dXJuIG1zZwoJCQkJfQoKCQkJCW1zZy5hcHBlbmQgPSBjYW4uYmFzZS5BZGRVbmlxKG1zZy5hcHBlbmQsIGtleSksIG1zZ1trZXldID0gbXNnW2tleV0gfHwgW10KCQkJCW1zZ1trZXldLnB1c2goY2FuLmJhc2UuaXNTdHJpbmcodmFsdWUpfHxjYW4uYmFzZS5pc0Z1bmN0aW9uKHZhbHVlKT8gdmFsdWU6IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkKCQkJCXJldHVybiBtc2cKCQkJfSwKCQkJU3RhdHVzOiBmdW5jdGlvbihvYmopIHsgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUywgSlNPTi5zdHJpbmdpZnkoY2FuLmNvcmUuSXRlbShvYmosIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0gfSkpKSB9LAoJCQlTdGF0dXNUaW1lQ291bnQ6IGZ1bmN0aW9uKG9iaikgeyBtc2cuYXBwZW5kICYmIG1zZy5TdGF0dXMoY2FuLmJhc2UuQ29weSh7InRpbWUiOiBjYW4uYmFzZS5UaW1lKCksICJjb3VudCI6IG1zZy5MZW5ndGgoKSsieCIrbXNnLmFwcGVuZC5sZW5ndGh9LCBvYmopKSB9LAoJCQlFY2hvOiBmdW5jdGlvbihyZXMpIHsgbXNnLnJlc3VsdCA9IG1zZy5yZXN1bHQgfHwgW10KCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IG1zZy5yZXN1bHQucHVzaChhcmd1bWVudHNbaV0pIH0KCQkJCXJldHVybiBtc2cuX2hhbmQgPSB0cnVlLCBtc2cKCQkJfSwKCQkJRHVtcDogZnVuY3Rpb24oY2FuKSB7CgkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCQkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCQl9LAoJCX0KCQlyZXR1cm4gY2FuLm1pc2MucHJvdG8obXNnLCBwcm90bykKCX0sCglHRVQ6IGZ1bmN0aW9uKGNhbiwgdXJsLCBjYikgeyB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCkKCQl4aHIub3BlbigiR0VUIiwgdXJsKSwgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoeGhyLnN0YXR1cyA9PSAyMDApIHsKCQkJCXJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHhoci5yZXNwb25zZVRleHQpCgkJCX0KCQl9CgkJdHJ5IHsgeGhyLnNlbmQoKSB9IGNhdGNoKGUpIHsgY2FuLm1pc2MuTG9nKGUpIH0KCX0sCglQT1NUOiBmdW5jdGlvbihjYW4sIG1zZywgdXJsLCBmb3JtLCBjYikgeyAvLyBfbWV0aG9kIF9hY2NlcHQgX3VwbG9hZCBfcHJvZ3Jlc3MKCQl2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7IG1zZy5feGhyID0geGhyCgkJeGhyLm9wZW4obXNnLl9tZXRob2R8fCJQT1NUIiwgdXJsKSwgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoeGhyLnJlYWR5U3RhdGUgIT0gNCkgeyByZXR1cm4gfQoKCQkJdHJ5IHsgLy8g6Kej5p6Q5ZON5bqUCgkJCQl2YXIgcmVzID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KQoJCQl9IGNhdGNoIChlKSB7CgkJCQl2YXIgcmVzID0ge3Jlc3VsdDogW3hoci5yZXNwb25zZVRleHRdfQoJCQl9CgkJCWlmICh4aHIuc3RhdHVzID09IDIwMCkgewoJCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnLkNvcHkocmVzKSkKCQkJfQoJCQljYW4udXNlci50b2FzdChjYW4sIHJlcywgeGhyLnN0YXR1cykKCQl9CgoJCWlmIChtc2cuX3VwbG9hZCkgeyAvLyDkuIrkvKDmlofku7YKCQkJdmFyIGRhdGEgPSBuZXcgRm9ybURhdGEoKTsgY2FuLmNvcmUuSXRlbXMoZm9ybSwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBrZXkpIHsKCQkJCWRhdGEuYXBwZW5kKGtleSwgdmFsdWUpCgkJCX0pLCBkYXRhLmFwcGVuZChodG1sLlVQTE9BRCwgbXNnLl91cGxvYWQpLCBkYXRhLmFwcGVuZChpY2UuTVNHX1VQTE9BRCwgbWRiLlVQTE9BRCkKCgkJCXhoci51cGxvYWQub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uYmFzZS5pc0Z1bmMobXNnLl9wcm9ncmVzcykgJiYgbXNnLl9wcm9ncmVzcyhldmVudCwgcGFyc2VJbnQoZXZlbnQubG9hZGVkKjEwMC9ldmVudC50b3RhbCksIGV2ZW50LnRvdGFsLCBldmVudC5sb2FkZWQpCgkJCX0KCQl9IGVsc2UgeyAvLyDor7fmsYLmlbDmja4KCQkJdmFyIGRhdGEgPSBjYW4uY29yZS5JdGVtcyhmb3JtLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGtleSkgeyByZXR1cm4ga2V5KyI9IitlbmNvZGVVUklDb21wb25lbnQodmFsdWUpIH0pLmpvaW4oIiYiKQoJCQl4aHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIiwgImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCIpCgkJfQoKCQkvLyDlj5HpgIHor7fmsYIKCQl4aHIuc2V0UmVxdWVzdEhlYWRlcigiQWNjZXB0IiwgbXNnLl9hY2NlcHR8fCJhcHBsaWNhdGlvbi9qc29uIikKCQl0cnkgeyB4aHIuc2VuZChkYXRhKSB9IGNhdGNoKGUpIHsgY2FuLm1pc2MuTG9nKGUpIH0KCX0sCglSdW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGRhdGFzZXQsIGNtZHMsIGNiKSB7CgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50fHx7fSksIHNraXAgPSB7X2hhbmRsZTogdHJ1ZX0KCQl2YXIgZm9ybSA9IHtjbWRzOiBjbWRzfHxtc2cuY21kfTsgbXNnLm9wdGlvbiAmJiBtc2cub3B0aW9uLmZvckVhY2goZnVuY3Rpb24oaXRlbSkgewoJCQlpZiAodHlwZW9mIG1zZy5PcHRpb24oaXRlbSkgPT0gbGFuZy5PQkpFQ1QpIHsgcmV0dXJuIH0KCQkJaWYgKHR5cGVvZiBtc2cuT3B0aW9uKGl0ZW0pID09IGxhbmcuRlVOQ1RJT04pIHsgcmV0dXJuIH0KCQkJIXNraXBbaXRlbV0gJiYgbXNnW2l0ZW1dICYmIChmb3JtW2l0ZW1dID0gbXNnW2l0ZW1dKQoJCX0pCgoJCWNhbi5taXNjLlBPU1QoY2FuLCBtc2csIGNhbi5iYXNlLk1lcmdlVVJMKGRhdGFzZXQubmFtZXMudG9Mb3dlckNhc2UoKSwKCQkJIl9uYW1lIiwgKG1zZy5fY2FuLnN1cHx8bXNnLl9jYW4pLl9uYW1lLCAiX2luZGV4IiwgKG1zZy5fY2FuLnN1cHx8bXNnLl9jYW4pLl9pbmRleCwKCQkJaWNlLk1TR19EQUVNT04sIG1zZy5fX2RhZW1vbnx8ZGF0YXNldC5kYWVtb258fCIiCgkJKSwgZm9ybSwgY2IpCgl9LAoJV1NTOiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiLCBvbm9wZW4sIG9uY2xvc2UsIG9uZXJyb3IpIHsgaWYgKGNhbi51c2VyLmlzSUUpIHsgcmV0dXJuIH0KCQl2YXIgdXJsID0gbG9jYXRpb24ucHJvdG9jb2wucmVwbGFjZSgiaHR0cCIsICJ3cyIpKyIvLyIrbG9jYXRpb24uaG9zdCsiL3NwYWNlLyIKCQlpZiAodXJsLmluZGV4T2YoImNocm9tZSIpID09IDApIHsgdXJsID0gIndzOi8vbG9jYWxob3N0OjkwMjAvc3BhY2UvIiB9CgoJCXZhciBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KGNhbi5iYXNlLk1lcmdlVVJMKHVybCwgYXJncykpCgkJc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBjbGkuQ0xPU0UsIGFyZ3MpCgkJCWNhbi5iYXNlLmlzRnVuYyhvbmNsb3NlKT8gb25jbG9zZShzb2NrZXQpOiBjYW4uY29yZS5UaW1lcihjYW4uYmFzZS5yYW5kb20oMzAwMCwgMTAwMCksIGZ1bmN0aW9uKCkgewoJCQkJYXJncy5uYW1lID0gYXJncy5uYW1lfHxjYW4uX3dzc19uYW1lCgkJCQljYW4ubWlzYy5XU1MoY2FuLCBhcmdzLCBjYiwgb25vcGVuLCBvbmVycm9yLCBvbmNsb3NlKQoJCQl9KQoJCX0sIHNvY2tldC5vbmVycm9yID0gZnVuY3Rpb24oKSB7IGNhbi5taXNjLkxvZyhodG1sLldTUywgY2xpLkVSUk9SLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25lcnJvcik/IG9uZXJyb3Ioc29ja2V0KTogc29ja2V0LmNsb3NlKCkKCgkJfSwgc29ja2V0Lm9ub3BlbiA9IGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGNsaS5PUEVOLCBhcmdzKQoJCQljYW4uYmFzZS5pc0Z1bmMob25vcGVuKSAmJiBvbm9wZW4oc29ja2V0KQoJCX0KCgkJc29ja2V0Lm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7IC8vIOino+aekOWRveS7pAoJCQl0cnkgeyB2YXIgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSkgfSBjYXRjaCAoZSkgeyB2YXIgZGF0YSA9IHtkZXRhaWw6IFtldmVudC5kYXRhXX0gfQoKCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgbXNnLlJlcGx5ID0gZnVuY3Rpb24oKSB7IC8vIOWbnuWkjeWRveS7pAoJCQkJbXNnLk9wdGlvbih7X2hhbmRsZTogdHJ1ZSwgX3NvdXJjZTogKG1zZ1tpY2UuTVNHX1RBUkdFVF18fFtdKS5yZXZlcnNlKCkuc2xpY2UoMSkuam9pbihpY2UuUFQpfHwiIiwgX3RhcmdldDogKG1zZ1tpY2UuTVNHX1NPVVJDRV18fFtdKS5yZXZlcnNlKCkuam9pbihpY2UuUFQpfSkKCQkJCW1zZy5yZXN1bHQgPSAobXNnLnJlc3VsdHx8W10pLmNvbmNhdChjYW4uY29yZS5MaXN0KGFyZ3VtZW50cykpLCBjYW4ubWlzYy5Mb2coaHRtbC5XU1MsIGljZS5NU0dfUkVTVUxULCBtc2cucmVzdWx0LCBtc2cpCgkJCQlkZWxldGUobXNnLl9ldmVudCksIGRlbGV0ZShtc2cuX2NhbiksIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpCgkJCX0sIG1zZy5kZXRhaWwgPSBkYXRhLmRldGFpbCwgbXNnLkNvcHkoZGF0YSkKCgkJCXRyeSB7IC8vIOaJp+ihjOWRveS7pAoJCQkJY2FuLm1pc2MuTG9nKGh0bWwuV1NTLCBpY2UuTVNHX0RFVEFJTCwgbXNnLmRldGFpbCwgbXNnKQoJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgbXNnLCBtc2cuZGV0YWlsWzBdLCBtc2cuZGV0YWlsLnNsaWNlKDEpKQoJCQl9IGNhdGNoIChlKSB7IGNhbi5taXNjLkxvZyhlKSwgbXNnLlJlcGx5KCkgfQoJCX0KCX0sCgoJQ29va2llU2Vzc2lkOiBzaHkoIuS8muivneWPmOmHjyIsIGZ1bmN0aW9uKGNhbiwgdmFsdWUsIHBhdGgpIHsKCQlyZXR1cm4gY2FuLm1pc2MuQ29va2llKGNhbiwgaWNlLk1TR19TRVNTSUQrIl8iK2Nhbi5iYXNlLnJlcGxhY2VBbGwobG9jYXRpb24uaG9zdCwgaWNlLlBULCAiXyIsIGljZS5ERiwgIl8iKSwgdmFsdWUsIHBhdGgpCgl9KSwKCUNvb2tpZTogc2h5KCLkvJror53lj5jph48iLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUsIHBhdGgpIHsKCQlmdW5jdGlvbiBzZXQoaywgdikgeyBkb2N1bWVudC5jb29raWUgPSBrKyI9Iit2KyI7cGF0aD0iKyhwYXRofHxpY2UuUFMpIH0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3Qoa2V5KSkgeyBmb3IgKHZhciBrIGluIGtleSkgeyBzZXQoaywga2V5W2tdKSB9IGtleSA9IHVuZGVmaW5lZCB9CgoJCWlmIChrZXkgPT0gdW5kZWZpbmVkKSB7IHZhciBjcyA9IHt9CgkJCWRvY3VtZW50LmNvb2tpZS5zcGxpdCgiOyAiKS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGxzID0gaXRlbS5zcGxpdCgiPSIpOyBjc1tsc1swXV0gPSBsc1sxXSB9KQoJCQlyZXR1cm4gY3MKCQl9CgoJCXZhbHVlICE9IHVuZGVmaW5lZCAmJiBzZXQoa2V5LCB2YWx1ZSkKCQl2YXIgdmFsID0gKG5ldyBSZWdFeHAoa2V5KyI9KFteO10qKTs/IikpLmV4ZWMoZG9jdW1lbnQuY29va2llKQoJCXJldHVybiB2YWwgJiYgdmFsLmxlbmd0aCA+IDA/IHZhbFsxXTogIiIKCX0pLAoJU2VhcmNoT3JDb25mOiBmdW5jdGlvbihjYW4sIGtleSwgZGVmKSB7IHJldHVybiBjYW4uYmFzZS5nZXRWYWxpZChjYW4ubWlzYy5TZWFyY2goY2FuLCBrZXkpLCBjYW4uQ29uZihrZXkpLCBkZWYpIH0sCglTZWFyY2hIYXNoOiBmdW5jdGlvbihjYW4pIHsKCQlpZiAoY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5faW5kZXggPT0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgImNtZCIpKSB7CgkJCXJldHVybiBsb2NhdGlvbi5oYXNoLnNsaWNlKDEpCgkJfQoJfSwKCVNlYXJjaDogc2h5KCLor7fmsYLlj4LmlbAiLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsgdmFyIGFyZ3MgPSB7fQoJCWlmICh2YWx1ZSA9PSB1bmRlZmluZWQgJiYgY2FuLmJhc2UuaXNTdHJpbmcoa2V5KSkgewoJCQl2YXIgbHMgPSBsb2NhdGlvbi5wYXRobmFtZS5zcGxpdChpY2UuUFMpOyBpZiAobHNbMV0gPT0gY2hhdC5TSEFSRSkgeyBhcmdzW2NoYXQuU0hBUkVdID0gbHNbMl0gfQoJCQlmb3IgKHZhciBpID0gMjsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IGlmICh7InBvZCI6IHRydWUsICJjbWQiOiB0cnVlfVtsc1tpXV0pIHsgYXJnc1tsc1tpXV0gPSBsc1tpKzFdIH0gfQoJCX0KCQlsb2NhdGlvbi5zZWFyY2ggJiYgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpLnNwbGl0KCImIikuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7IHZhciB4ID0gaXRlbS5zcGxpdCgiPSIpCgkJCXhbMV0gIT0gIiIgJiYgKGFyZ3NbeFswXV0gPSBkZWNvZGVVUklDb21wb25lbnQoeFsxXSkpCgkJfSkKCgkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsKCQkJY2FuLmNvcmUuSXRlbShrZXksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJCWlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsgYXJnc1trZXldID0gdmFsdWUgfSBhcmdzW2tleV0gPT0gIiIgJiYgZGVsZXRlKGFyZ3Nba2V5XSkKCQkJfSkKCQl9IGVsc2UgewoJCQlpZiAoa2V5ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gYXJncyB9CgkJCWlmICh2YWx1ZSA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIGFyZ3Nba2V5XSB9CgkJCWFyZ3Nba2V5XSA9IHZhbHVlLCBhcmdzW2tleV0gPT0gIiIgJiYgZGVsZXRlKGFyZ3Nba2V5XSkKCQl9CgoJCXZhciBzZWFyY2ggPSBjYW4uY29yZS5JdGVtKGFyZ3MsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGtleSsiPSIrZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSB9KS5qb2luKCImIikKCQlyZXR1cm4gc2VhcmNoPyBsb2NhdGlvbi5zZWFyY2ggPSBzZWFyY2g6IGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5wYXRobmFtZQoJfSksCglNZXJnZVVSTDogc2h5KCLlnLDlnYDpk77mjqUiLCBmdW5jdGlvbihjYW4sIG9ianMsIGNsZWFyKSB7CgkJdmFyIHBhdGggPSBsb2NhdGlvbi5wYXRobmFtZTsgb2Jqcy5fcGF0aCAmJiAocGF0aCA9IG9ianMuX3BhdGgpLCBkZWxldGUob2Jqcy5fcGF0aCkKCQlvYmpzLnBvZCAmJiAocGF0aCA9ICIvY2hhdC9wb2QvIitvYmpzLnBvZCksIGRlbGV0ZShvYmpzLnBvZCkKCQlvYmpzLmNtZCAmJiAocGF0aCA9IChwYXRoLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwPyBwYXRoOiAiL2NoYXQiKSsiL2NtZC8iK29ianMuY21kKSwgZGVsZXRlKG9ianMuY21kKQoJCW9ianMud2Vic2l0ZSAmJiAocGF0aCA9IChwYXRoLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwPyBwYXRoOiAiL2NoYXQiKSsiL3dlYnNpdGUvIitvYmpzLndlYnNpdGUpLCBkZWxldGUob2Jqcy53ZWJzaXRlKQoJCXJldHVybiBjYW4uYmFzZS5NZXJnZVVSTChsb2NhdGlvbi5vcmlnaW4rcGF0aCsoY2xlYXI/IiI6bG9jYXRpb24uc2VhcmNoKSwgb2JqcykKCX0pLAoKCXJ1bkFjdGlvbjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBsaXN0KSB7CgkJaWYgKGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBsaXN0W2NtZHNbMV1dKSB7IHJldHVybiBsaXN0W2NtZHNbMV1dKGNtZHMuc2xpY2UoMikpLCB0cnVlIH0KCQlpZiAobGlzdFtjbWRzWzBdXSkgeyByZXR1cm4gbGlzdFtjbWRzWzBdXShjbWRzLnNsaWNlKDEpKSwgdHJ1ZSB9Cgl9LAoJY29uY2F0OiBmdW5jdGlvbihjYW4sIHRvLCBmcm9tKSB7IHRvID0gdG98fFtdLCBmcm9tID0gZnJvbXx8W10KCQlpZiAoZnJvbVswXSA9PSBjdHguQUNUSU9OICYmIGZyb21bMV0gPT0gaWNlLlJVTiAmJiBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbZnJvbVsyXV0pIHsgcmV0dXJuIGZyb20gfQoJCWlmIChjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbZnJvbVswXV0pIHsgcmV0dXJuIGZyb20gfQoJCWlmIChmcm9tWzBdID09ICJfc2VhcmNoIikgeyByZXR1cm4gZnJvbSB9CgkJcmV0dXJuIHRvLmNvbmNhdChmcm9tKQoJfSwKCXByb3RvOiBmdW5jdGlvbihzdWIsIHN1cCkgeyByZXR1cm4gc3ViLl9fcHJvdG9fXyA9IHN1cCwgc3ViIH0sCgoJTG9nOiBmdW5jdGlvbigpIHsKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyldCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSkgfQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJSW5mbzogZnVuY3Rpb24oKSB7CgkJdmFyIGFyZ3MgPSBbdGhpcy5fdGltZSgpLCB0aGlzLkZpbGVMaW5lKDIsIDMpXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQljb25zb2xlLmxvZy5hcHBseShjb25zb2xlLCBhcmdzKQoJfSwKCVdhcm46IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgIndhcm4iXQoJCWZvciAodmFyIGkgaW4gYXJndW1lbnRzKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pIH0KCQlhcmdzLnB1c2goaWNlLk5MLCB0aGlzLl9maWxlTGluZSgpLnNwbGl0KGljZS5OTCkuc2xpY2UoMikuam9pbihpY2UuTkwpKQoJCWNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsIGFyZ3MpCgl9LAoJRGVidWc6IGZ1bmN0aW9uKCkgewoJCXZhciBhcmdzID0gW3RoaXMuX3RpbWUoKSwgdGhpcy5GaWxlTGluZSgyLCAzKSwgImRlYnVnIl0KCQlmb3IgKHZhciBpIGluIGFyZ3VtZW50cykgeyBhcmdzLnB1c2goYXJndW1lbnRzW2ldKSB9CgkJYXJncy5wdXNoKHRoaXMuZmlsZUxpbmUoMiwgMykpCgkJY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSwgYXJncykKCQl2YXIgYXJncyA9IFt0aGlzLl90aW1lKCksIHRoaXMuRmlsZUxpbmUoMiwgMyksICJkZWJ1ZyJdCgkJZm9yICh2YXIgaSBpbiBhcmd1bWVudHMpIHsgYXJncy5wdXNoKEpTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tpXSkpIH0KCQluYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1vYmlsZSIpID4gLTEgJiYgYWxlcnQoSlNPTi5zdHJpbmdpZnkoYXJncy5qb2luKGljZS5TUCkpKQoJfSwKCUZpbGVMaW5lOiBmdW5jdGlvbihkZXB0aCwgbGVuZ3RoKSB7CgkJcmV0dXJuIHRoaXMuZmlsZUxpbmUoZGVwdGgrMSkuc3BsaXQoaWNlLlBTKS5zbGljZSgzKS5zbGljZSgtbGVuZ3RoKS5qb2luKGljZS5QUykuc3BsaXQoIikiKVswXQoJfSwKCWZpbGVMaW5lOiBmdW5jdGlvbihkZXB0aCkgewoJCXJldHVybiAodGhpcy5fZmlsZUxpbmUoKS5zcGxpdChpY2UuTkwpWzErZGVwdGhdfHwiIikudHJpbSgpCgl9LAoJX2ZpbGVMaW5lOiBmdW5jdGlvbigpIHsgdmFyIG9iaiA9IHt9CgkJRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UgJiYgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2Uob2JqLCBhcmd1bWVudHMuY2FsbGVlKQoJCXJldHVybiBvYmouc3RhY2sgfHwgIiIKCX0sCglfdGltZTogZnVuY3Rpb24oKSB7IHZhciBub3cgPSBuZXcgRGF0ZSgpCgkJdmFyIGhvdXIgPSBub3cuZ2V0SG91cnMoKQoJCWlmIChob3VyIDwgMTApIHsgaG91ciA9ICIwIitob3VyIH0KCQl2YXIgbWludXRlID0gbm93LmdldE1pbnV0ZXMoKQoJCWlmIChtaW51dGUgPCAxMCkgeyBtaW51dGUgPSAiMCIrbWludXRlIH0KCQl2YXIgc2Vjb25kID0gbm93LmdldFNlY29uZHMoKQoJCWlmIChzZWNvbmQgPCAxMCkgeyBzZWNvbmQgPSAiMCIrc2Vjb25kIH0KCQlyZXR1cm4gaG91cisiOiIrbWludXRlKyI6IitzZWNvbmQrIi4iK25vdy5nZXRNaWxsaXNlY29uZHMoKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvbGliL3BhZ2UuanMiClZvbGNhbm9zKCJwYWdlIiwge2hlbHA6ICLnlKjmiLfnlYzpnaIiLCBDbGFzc0xpc3Q6IHsKCQloYXM6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsgdmFyIGxpc3QgPSBvYmouY2xhc3NOYW1lPyBvYmouY2xhc3NOYW1lLnNwbGl0KGljZS5TUCk6IFtdCgkJCXJldHVybiBsaXN0LmluZGV4T2Yoa2V5KSA+IC0xCgkJfSwKCQlhZGQ6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXkpIHsgdmFyIGxpc3QgPSBvYmouY2xhc3NOYW1lPyBvYmouY2xhc3NOYW1lLnNwbGl0KGljZS5TUCk6IFtdCgkJCXZhciB2YWx1ZSA9IGNhbi5iYXNlLkFkZFVuaXEobGlzdCwga2V5KS5qb2luKGljZS5TUCkudHJpbSgpCgkJCXJldHVybiB2YWx1ZSAhPSBvYmouY2xhc3NOYW1lICYmIChvYmouY2xhc3NOYW1lID0gdmFsdWUpLCB2YWx1ZQoJCX0sCgkJZGVsOiBmdW5jdGlvbihjYW4sIG9iaiwga2V5KSB7IHZhciBsaXN0ID0gb2JqLmNsYXNzTmFtZT8gb2JqLmNsYXNzTmFtZS5zcGxpdChpY2UuU1ApOiBbXQoJCQlyZXR1cm4gb2JqLmNsYXNzTmFtZSA9IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlID09IGtleT8gdW5kZWZpbmVkOiB2YWx1ZSB9KS5qb2luKGljZS5TUCkudHJpbSgpCgkJfSwKCQlzZXQ6IGZ1bmN0aW9uKGNhbiwgb2JqLCBrZXksIGNvbmRpdGlvbikgewoJCQlyZXR1cm4gKGNvbmRpdGlvbj8gdGhpcy5hZGQoY2FuLCBvYmosIGtleSk6IHRoaXMuZGVsKGNhbiwgb2JqLCBrZXkpKS5pbmRleE9mKGtleSkgPiAtMQoJCX0sCgkJbmVnOiBmdW5jdGlvbihjYW4sIG9iaiwga2V5KSB7CgkJCXJldHVybiAodGhpcy5oYXMoY2FuLCBvYmosIGtleSk/IHRoaXMuZGVsKGNhbiwgb2JqLCBrZXkpOiB0aGlzLmFkZChjYW4sIG9iaiwga2V5KSkuaW5kZXhPZihrZXkpID4gLTEKCQl9LAoJfSwKCVNlbGVjdEFyZ3M6IGZ1bmN0aW9uKGNhbiwgb3B0aW9uLCBrZXksIGNiKSB7CgkJaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKGtleSkpIHsgdmFyIHZhbHVlID0ge30KCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIG9wdGlvbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWl0ZW0ubmFtZSAmJiBpdGVtLnZhbHVlICYmICh2YWx1ZVtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZSkKCQkJfSk7IHJldHVybiBbdmFsdWVdCgkJfQoJCWlmIChjYW4uYmFzZS5pc09iamVjdChrZXkpKSB7CgkJCXJldHVybiBjYW4uY29yZS5JdGVtKGtleSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCBrZXksIHZhbHVlKSB9KSwgW2tleV0KCQl9CgkJaWYgKCFjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHZhciB2YWx1ZSA9IGNiOyBjYiA9IGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0udHlwZSA9PSBodG1sLkJVVFRPTikgeyByZXR1cm4gfQoJCQlyZXR1cm4gaXRlbS5uYW1lICYmIChjYW4uYmFzZS5pc1VuZGVmaW5lZCh2YWx1ZSk/IGl0ZW0udmFsdWU6IChpdGVtLnZhbHVlID0gdmFsdWUpKXx8IiIKCQl9IH0KCQlpZiAoa2V5LmluZGV4T2YoaWNlLlBUKSA+IC0xKSB7IHJldHVybiBbIiJdfQoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBvcHRpb24sIGtleT8gInRleHRhcmVhW25hbWU9IitrZXkrIl0sIisiaW5wdXRbbmFtZT0iK2tleSsiXSwiKyJzZWxlY3RbbmFtZT0iK2tleSsiXSI6ICIuYXJncyIsIGNiKQoJfSwKCVNlbGVjdEFsbDogc2h5KCLpgInmi6noioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCBjYiwgaW50ZXJ2YWwsIGNicykgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuU2VsZWN0QWxsKGNhbiwgaXRlbS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHksIGtleSwgY2IsIGludGVydmFsLCBjYnMpCgkJfSkKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdCh0YXJnZXQgJiYgdGFyZ2V0LnF1ZXJ5U2VsZWN0b3JBbGwoa2V5KSwgY2IsIGludGVydmFsLCBjYnMpCgl9KSwKCVNlbGVjdDogc2h5KCLpgInmi6noioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCwga2V5LCBjYiwgaW50ZXJ2YWwsIGNicykgeyBpZiAoa2V5ID09IGljZS5QVCkgeyBjYih0YXJnZXQpOyByZXR1cm4gW10gfQoJCXJldHVybiBjYW4uY29yZS5MaXN0KHRhcmdldCAmJiB0YXJnZXQucXVlcnlTZWxlY3RvckFsbChjYW4ucGFnZS5LZXlzKGtleSkpLCBjYiwgaW50ZXJ2YWwsIGNicykKCX0pLAoJTW9kaWZ5OiBzaHkoIuS/ruaUueiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgeyB0YXJnZXQgPSB0YXJnZXR8fHt9CgkJdGFyZ2V0ID0gY2FuLmJhc2UuaXNPYmplY3QodGFyZ2V0KT8gdGFyZ2V0OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7IGlmICghdGFyZ2V0KSB7IHJldHVybiB9CgkJY2FuLmJhc2UuaXNTdHJpbmcodmFsdWUpPyAodGFyZ2V0LmlubmVySFRNTCA9IHZhbHVlKTogY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oa2V5LCB2YWwpIHsKCQkJa2V5ID09ICJjbGFzc05hbWUiICYmIGNhbi5iYXNlLmlzQXJyYXkodmFsKSAmJiAodmFsID0gdmFsLmpvaW4oaWNlLlNQKSkKCQkJIWNhbi5iYXNlLmlzT2JqZWN0KHZhbCk/ICh0YXJnZXRba2V5XSA9IHZhbCk6IGNhbi5jb3JlLkl0ZW0odmFsLCBmdW5jdGlvbihrLCB2KSB7CgkJCQl2YXIgc2l6ZSA9IHsKCQkJCQkiaGVpZ2h0IjogdHJ1ZSwgIm1heC1oZWlnaHQiOiB0cnVlLCAibWluLWhlaWdodCI6IHRydWUsCgkJCQkJIndpZHRoIjogdHJ1ZSwgIm1heC13aWR0aCI6IHRydWUsICJtaW4td2lkdGgiOiB0cnVlLAoJCQkJfQoJCQkJaWYgKHNpemVba10gJiYgcGFyc2VJbnQodikgPCAwKSB7IHJldHVybiB0YXJnZXRba2V5XSAmJiAodGFyZ2V0W2tleV1ba10gPSAiIikgfQoKCQkJCXZhciBzaXplID0gewoJCQkJCSJtYXJnaW4tdG9wIjogdHJ1ZSwgIm1hcmdpbi1sZWZ0IjogdHJ1ZSwgImZvbnQtc2l6ZSI6IHRydWUsCgkJCQkJImxlZnQiOiB0cnVlLCAicmlnaHQiOiB0cnVlLCAidG9wIjogdHJ1ZSwgImJvdHRvbSI6IHRydWUsCgkJCQkJImhlaWdodCI6IHRydWUsICJtYXgtaGVpZ2h0IjogdHJ1ZSwgIm1pbi1oZWlnaHQiOiB0cnVlLAoJCQkJCSJ3aWR0aCI6IHRydWUsICJtYXgtd2lkdGgiOiB0cnVlLCAibWluLXdpZHRoIjogdHJ1ZSwKCQkJCQkicGFkZGluZyI6IHRydWUsCgkJCQl9CgoJCQkJaWYgKHNpemVba10gJiYgdiAmJiAoY2FuLmJhc2UuaXNOdW1iZXIodikgfHwgdi5pbmRleE9mICYmIHYuaW5kZXhPZigicHgiKSA9PSAtMSkpIHsgdiArPSAicHgiIH0KCQkJCXRhcmdldFtrZXldICYmICh0YXJnZXRba2V5XVtrXSA9IHYpCgkJCX0pCgkJfSkKCQlyZXR1cm4gdGFyZ2V0Cgl9KSwKCVJlbW92ZTogc2h5KCLliKDpmaToioLngrkiLCBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXJldHVybiB0YXJnZXQgJiYgdGFyZ2V0LnBhcmVudE5vZGUgJiYgdGFyZ2V0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGFyZ2V0KSwgdGFyZ2V0Cgl9KSwKCUNyZWF0ZTogc2h5KCLliJvlu7roioLngrkiLCBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChrZXkpLCB2YWx1ZSkKCX0pLAoJQXBwZW5kOiBzaHkoIua3u+WKoOiKgueCuSIsIGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXksIHZhbHVlKSB7IHZhbHVlID0gdmFsdWV8fHt9CgkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGtleSkpIHsgdmFyIHJlcyA9IGNhbi5wYWdlLkNyZWF0ZShjYW4sIGtleSwgdmFsdWUpOyByZXR1cm4gdGFyZ2V0LmFwcGVuZENoaWxkKHJlcyksIHJlcyB9CgoJCWNhbi5jb3JlLkxpc3Qoa2V5LCBmdW5jdGlvbihpdGVtLCBpbmRleCkgeyBpZiAoIWl0ZW0pIHsgcmV0dXJuIH0KCQkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pKSB7IGl0ZW0gPSB7dmlldzogW2l0ZW1dfSB9CgkJCWlmIChpdGVtLm5vZGVOYW1lKSB7IHRhcmdldC5hcHBlbmRDaGlsZChpdGVtKTsgcmV0dXJuIH0KCgkJCS8vIOWfuuacrOe7k+aehDogdHlwZSBuYW1lIGRhdGEgbGlzdAoJCQl2YXIgdHlwZSA9IGl0ZW0udHlwZXx8aHRtbC5ESVYsIGRhdGEgPSBpdGVtLmRhdGF8fHt9CgkJCXZhciBuYW1lID0gaXRlbS5uYW1lfHxkYXRhLm5hbWV8fCIiCgoJCQkvLyDmlbDmja7osIPmlbQKCQkJY2FuLmNvcmUuSXRlbShpdGVtLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJCQlzd2l0Y2ggKGtleSkgewoJCQkJCWNhc2UgbWRiLlRZUEU6IGJyZWFrCgkJCQkJY2FzZSBtZGIuTkFNRTogYnJlYWsKCQkJCQljYXNlIG1kYi5EQVRBOiBicmVhawoJCQkJCWNhc2UgbWRiLkxJU1Q6IGJyZWFrCgkJCQkJY2FzZSBodG1sLklOTkVSOiBkYXRhLmlubmVySFRNTCA9IGl0ZW0uaW5uZXI7IGJyZWFrCgkJCQkJY2FzZSBodG1sLkNMSUNLOiBkYXRhLm9uY2xpY2sgPSBpdGVtLmNsaWNrOyBicmVhawoJCQkJCWRlZmF1bHQ6CgkJCQkJCWlmIChpdGVtW2tleV0gPT0gdW5kZWZpbmVkKSB7IGJyZWFrIH0KCQkJCQkJZGF0YVtrZXldID0gaXRlbVtrZXldCgkJCQl9CgkJCX0pCgoJCQkvLyDln7rmnKznsbvlnos6IHZpZXcgdGV4dCBidXR0b24gc2VsZWN0IGlucHV0IHVzZXJuYW1lIHBhc3N3b3JkCgkJCS8vIOWfuuacrOexu+WeizogaW1nIHJvdyB0aCB0ZAoJCQlpZiAoaXRlbS52aWV3KSB7IHZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChpdGVtLnZpZXcpCgkJCQlpZiAoY2FuLmJhc2UuaXNBcnJheShsaXN0WzBdKSkgeyBsaXN0WzBdID0gbGlzdFswXS5qb2luKGljZS5TUCkgfQoJCQkJbGlzdFswXSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZGF0YSwgbGlzdFswXSkKCQkJCXR5cGUgPSBsaXN0WzFdfHxodG1sLkRJVgoJCQkJZGF0YS5pbm5lckhUTUwgPSBsaXN0WzJdfHxkYXRhLmlubmVySFRNTHx8IiIKCQkJCW5hbWUgPSBuYW1lfHxsaXN0WzNdfHwiIgoKCQkJfSBlbHNlIGlmIChpdGVtLnRleHQpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0udGV4dCkKCQkJCWRhdGEuaW5uZXJIVE1MID0gbGlzdFswXXx8ZGF0YS5pbm5lckhUTUx8fCIiCgkJCQl0eXBlID0gbGlzdFsxXXx8aHRtbC5TUEFOCgkJCQlsaXN0WzJdICYmIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBkYXRhLCBsaXN0WzJdKQoKCQkJfSBlbHNlIGlmIChpdGVtLmJ1dHRvbikgeyB2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbS5idXR0b24pCgkJCQl0eXBlID0gaHRtbC5CVVRUT04sIG5hbWUgPSBuYW1lfHxsaXN0WzBdCgkJCQlkYXRhLmlubmVyVGV4dCA9IGNhbi51c2VyLnRyYW5zKGNhbiwgbGlzdFswXSksIGRhdGEub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jdGlvbihsaXN0WzFdKSAmJiBsaXN0WzFdKGV2ZW50LCBuYW1lKQoJCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQkJCXJldHVybiB0cnVlCgkJCQl9CgoJCQl9IGVsc2UgaWYgKGl0ZW0uc2VsZWN0KSB7IHZhciBsaXN0ID0gaXRlbS5zZWxlY3QKCQkJCXR5cGUgPSBodG1sLlNFTEVDVCwgZGF0YS5uYW1lID0gbmFtZSA9IG5hbWV8fGxpc3RbMF1bMF0KCQkJCWRhdGEudGl0bGUgPSBjYW4udXNlci50cmFucyhjYW4sIGRhdGEudGl0bGV8fG5hbWUpCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGRhdGEuY2xhc3NOYW1lfHxsaXN0WzBdWzBdfHwiIgoKCQkJCWl0ZW0ubGlzdCA9IGxpc3RbMF0uc2xpY2UoMSkubWFwKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQkJcmV0dXJuIHt0eXBlOiBodG1sLk9QVElPTiwgdmFsdWU6IHZhbHVlLCBpbm5lcjogY2FuLnVzZXIudHJhbnMoY2FuLCB2YWx1ZSl9CgkJCQl9KQoJCQkJZGF0YS5vbmNoYW5nZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jdGlvbihsaXN0WzFdKSAmJiBsaXN0WzFdKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIG5hbWUpCgkJCQl9CgoJCQl9IGVsc2UgaWYgKGl0ZW0uaW5wdXQpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0uaW5wdXQpCgkJCQl0eXBlID0gaHRtbC5JTlBVVCwgbmFtZSA9IG5hbWV8fGxpc3RbMF18fCIiLCBkYXRhLm5hbWUgPSBkYXRhLm5hbWV8fG5hbWUKCQkJCWRhdGEudHlwZSA9IGRhdGEudHlwZXx8InRleHQiCgkJCQlkYXRhLmNsYXNzTmFtZSA9IGRhdGEuY2xhc3NOYW1lfHxkYXRhLm5hbWUKCQkJCWRhdGEuYXV0b2NvbXBsZXRlID0gIm9mZiIKCgkJCQlkYXRhLm9uZm9jdXMgPSBkYXRhLm9uZm9jdXN8fGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJZXZlbnQudGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKDAsIC0xKQoJCQkJfQoJCQkJZGF0YS5vbmtleWRvd24gPSBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuY3Rpb24obGlzdFsxXSkgJiYgbGlzdFsxXShldmVudCkKCQkJCX0KCQkJCWRhdGEub25rZXl1cCA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jdGlvbihsaXN0WzJdKSAmJiBsaXN0WzJdKGV2ZW50KQoJCQkJfQoJCQl9IGVsc2UgaWYgKGl0ZW0udXNlcm5hbWUpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0udXNlcm5hbWUpCgkJCQl0eXBlID0gaHRtbC5JTlBVVCwgbmFtZSA9IG5hbWV8fGxpc3RbMF18fGh0bWwuVVNFUk5BTUUsIGRhdGEubmFtZSA9IGRhdGEubmFtZXx8bmFtZQoJCQkJZGF0YS5jbGFzc05hbWUgPSBsaXN0WzFdfHxkYXRhLmNsYXNzTmFtZXx8ZGF0YS5uYW1lCgkJCQlkYXRhLmF1dG9jb21wbGV0ZSA9IGRhdGEuYXV0b2NvbXBsZXRlfHxodG1sLlVTRVJOQU1FCgoJCQl9IGVsc2UgaWYgKGl0ZW0ucGFzc3dvcmQpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0ucGFzc3dvcmQpCgkJCQl0eXBlID0gaHRtbC5JTlBVVCwgbmFtZSA9IG5hbWV8fGxpc3RbMF18fGh0bWwuUEFTU1dPUkQsIGRhdGEubmFtZSA9IGRhdGEubmFtZXx8bmFtZQoJCQkJZGF0YS5jbGFzc05hbWUgPSBsaXN0WzFdfHxkYXRhLmNsYXNzTmFtZXx8ZGF0YS5uYW1lCgkJCQlkYXRhLmF1dG9jb21wbGV0ZSA9IGRhdGEuYXV0b2NvbXBsZXRlfHwiY3VycmVudC1wYXNzd29yZCIKCQkJCWRhdGEudHlwZSA9IGh0bWwuUEFTU1dPUkQKCgkJCX0gZWxzZSBpZiAoaXRlbS5pbWcpIHsgdmFyIGxpc3QgPSBjYW4uY29yZS5MaXN0KGl0ZW0uaW1nKQoJCQkJdHlwZSA9IGh0bWwuSU1HLCBkYXRhLnNyYyA9IGxpc3RbMF0KCgkJCX0gZWxzZSBpZiAoaXRlbS5yb3cpIHsgdHlwZSA9IGh0bWwuVFIKCQkJCWl0ZW0ubGlzdCA9IGl0ZW0ucm93Lm1hcChmdW5jdGlvbih0ZXh0KSB7IHJldHVybiB7dGV4dDogW3RleHQsIGl0ZW0uc3VifHxodG1sLlREXX0gfSkKCQkJfSBlbHNlIGlmIChpdGVtLnRoKSB7IHR5cGUgPSBodG1sLlRSCgkJCQlpdGVtLmxpc3QgPSBpdGVtLnRoLm1hcChmdW5jdGlvbih0ZXh0KSB7IHJldHVybiB7dGV4dDogW3RleHQsIGh0bWwuVEhdfSB9KQoJCQl9IGVsc2UgaWYgKGl0ZW0udGQpIHsgdHlwZSA9IGh0bWwuVFIKCQkJCWl0ZW0ubGlzdCA9IGl0ZW0udGQubWFwKGZ1bmN0aW9uKHRleHQpIHsgcmV0dXJuIHt0ZXh0OiBbdGV4dCwgaHRtbC5URF19IH0pCgkJCX0KCgkJCS8vIOivreiogOi9rOaNogoJCQlpZiAodHlwZSA9PSBodG1sLlNFTEVDVCkgIHsKCQkJCWRhdGEudGl0bGUgPSBjYW4udXNlci50cmFucyhjYW4sIGRhdGEudGl0bGV8fGRhdGEubmFtZSkKCQkJfQoJCQlpZiAodHlwZSA9PSBodG1sLklOUFVUKSAgeyBkYXRhLnR5cGUgPT0gaHRtbC5CVVRUT04gJiYgKGRhdGEudmFsdWUgPSBjYW4udXNlci50cmFucyhjYW4sIGRhdGEudmFsdWUpKQoJCQkJaWYgKGRhdGEudHlwZSA9PSBodG1sLlRFWFR8fGRhdGEudHlwZSA9PSBodG1sLlBBU1NXT1JEfHwhZGF0YS50eXBlKSB7IGRhdGEuYXV0b2NvbXBsZXRlID0gZGF0YS5hdXRvY29tcGxldGV8fCJvZmYiCgkJCQkJLy8gZGF0YS5wbGFjZWhvbGRlciA9IGNhbi51c2VyLnRyYW5zKGNhbiwgKGRhdGEucGxhY2Vob2xkZXJ8fGRhdGEubmFtZXx8IiIpLnNwbGl0KGljZS5QVCkucG9wKCkpCgkJCQkJZGF0YS5wbGFjZWhvbGRlciA9IChkYXRhLnBsYWNlaG9sZGVyfHxkYXRhLm5hbWV8fCIiKS5zcGxpdChpY2UuUFQpLnBvcCgpCgkJCQkJZGF0YS50aXRsZSA9IGNhbi51c2VyLnRyYW5zKGNhbiwgZGF0YS50aXRsZXx8ZGF0YS5wbGFjZWhvbGRlcikKCQkJCX0KCQkJfQoJCQlpZiAodHlwZSA9PSBodG1sLlRFWFRBUkVBKSAgewoJCQkJZGF0YS5wbGFjZWhvbGRlciA9IGNhbi51c2VyLnRyYW5zKGNhbiwgKGRhdGEucGxhY2Vob2xkZXJ8fGRhdGEubmFtZXx8IiIpLnNwbGl0KGljZS5QVCkucG9wKCkpCgkJCX0KCgkJCS8vIOWIm+W7uuiKgueCuQoJCQkhZGF0YS5uYW1lICYmIGl0ZW0ubmFtZSAmJiAoZGF0YS5uYW1lID0gaXRlbS5uYW1lKQoJCQl2YXIgbm9kZSA9IGNhbi5wYWdlLkNyZWF0ZShjYW4sIHR5cGUsIGRhdGEpCgoJCQkvLyDliJvlu7rntKLlvJUKCQkJbmFtZSA9IG5hbWV8fGRhdGEuY2xhc3NOYW1lfHx0eXBlfHwiIgoJCQl2YWx1ZVtuYW1lfHwiIl0gPSB2YWx1ZVtkYXRhLmNsYXNzTmFtZXx8IiJdID0gdmFsdWVbdHlwZV0gPSBub2RlCgkJCXZhbHVlLmZpcnN0ID0gdmFsdWUuZmlyc3R8fG5vZGUsIHZhbHVlLmxhc3QgPSBub2RlCgkJCXZhbHVlLl90YXJnZXQgPSB2YWx1ZS5fdGFyZ2V0fHxub2RlCgoJCQkvLyDpgJLlvZLoioLngrkKCQkJaXRlbS5saXN0ICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIG5vZGUsIGl0ZW0ubGlzdCwgdmFsdWUpCgkJCXRhcmdldCAmJiB0YXJnZXQuYXBwZW5kQ2hpbGQgJiYgdGFyZ2V0LmFwcGVuZENoaWxkKG5vZGUpCgkJCWNhbi5iYXNlLmlzRnVuYyhpdGVtLl9pbml0KSAmJiBpdGVtLl9pbml0KG5vZGUsIHZhbHVlKQoJCX0pCgkJcmV0dXJuIHZhbHVlCgl9KSwKCUFwcGVuZHM6IHNoeSgi5re75Yqg6IqC54K5IiwgZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGtleSwgdmFsdWUpIHsKCQlyZXR1cm4gdGFyZ2V0LmlubmVySFRNTCA9ICIiLCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIGtleSwgdmFsdWUpCgl9KSwKCglBcHBlbmRUYWJsZTogc2h5KCLmt7vliqDooajmoLwiLCBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0LCBsaXN0LCBjYikgewoJCWlmICghbXNnLmFwcGVuZHx8bXNnLmFwcGVuZC5sZW5ndGggPT0gMCkge3JldHVybn0KCgkJdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBodG1sLlRBQkxFKQoJCXZhciB0aGVhZCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCAidGhlYWQiKQoJCXZhciB0Ym9keSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCAidGJvZHkiKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRoZWFkLCBbe3R5cGU6IGh0bWwuVFIsIGRhdGE6IHtkYXRhc2V0OiB7aW5kZXg6IC0xfX0sIGxpc3Q6IAoJCQljYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGtleSkgewoJCQkJcmV0dXJuIGtleVswXSA9PSAiXyI/IHVuZGVmaW5lZDoge3RleHQ6IFtrZXkudHJpbSgpLCBodG1sLlRIXX0KCQkJfSkKCQl9XSkKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0Ym9keSwgY2FuLmNvcmUuTGlzdChtc2cuVGFibGUoKSwgZnVuY3Rpb24obGluZSwgaW5kZXgsIGFycmF5KSB7CgkJCXZhciBfbGlzdCA9IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5KSB7IGlmIChrZXkuaW5kZXhPZigiXyIpID09IDApIHsgcmV0dXJuIH0KCQkJCXJldHVybiBjYihjYW4ucGFnZS5Db2xvcihsaW5lW2tleV0pLnRyaW0oKSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpCgkJCX0pCgkJCXJldHVybiBfbGlzdC5sZW5ndGggPiAwPyB7dHlwZTogaHRtbC5UUiwgZGF0YXNldDoge2luZGV4OiBpbmRleH0sIGxpc3Q6IF9saXN0fTogdW5kZWZpbmVkCgkJfSkpCgkJcmV0dXJuIGNhbi5wYWdlLk9yZGVyVGFibGUoY2FuLCB0YWJsZSkKCX0pLAoJT3JkZXJUYWJsZTogZnVuY3Rpb24oY2FuLCB0YWJsZSkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhYmxlLCBodG1sLlRILCBmdW5jdGlvbih0aCwgaW5kZXgpIHsKCQkJdGgub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBkYXRhc2V0ID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQKCQkJCWRhdGFzZXRbInNvcnRfYXNjIl0gPSAoZGF0YXNldFsic29ydF9hc2MiXSA9PSAiMSIpID8gMDogMQoJCQkJY2FuLnBhZ2UuUmFuZ2VUYWJsZShjYW4sIHRhYmxlLCBpbmRleCwgZGF0YXNldFsic29ydF9hc2MiXSA9PSAiMSIpCgkJCX0KCQl9KQoJCXJldHVybiB0YWJsZQoJfSwKCVJhbmdlVGFibGU6IGZ1bmN0aW9uKGNhbiwgdGFibGUsIGluZGV4LCBzb3J0X2FzYykgewoJCXZhciBsaXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFibGUsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyKSB7CgkJCXJldHVybiB0ci5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORXx8Y2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCAiaGlkZSIpPyBudWxsOiB0cgoJCX0pLnNsaWNlKDEpCgoJCWluZGV4ID0gY2FuLmJhc2UuaXNPYmplY3QoaW5kZXgpPyBpbmRleDogW2luZGV4XQoJCWluZGV4ID0gY2FuLmNvcmUuTGlzdChpbmRleCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoaXRlbSA+IC0xKSB7IHJldHVybiBpdGVtfSB9KQoJCWlmIChpbmRleC5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoKCQl2YXIgaXNfdGltZSA9IHRydWUsIGlzX251bWJlciA9IHRydWUKCQljYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKHRyKSB7CgkJCXZhciB0ZXh0ID0gdHIuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0CgkJCWlzX3RpbWUgPSBpc190aW1lICYmIERhdGUucGFyc2UodGV4dCkgPiAwCgkJCWlzX251bWJlciA9IGlzX251bWJlciAmJiAhaXNOYU4ocGFyc2VJbnQodGV4dCkpCgkJfSkKCgkJdmFyIG51bV9saXN0ID0gY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0cikgewoJCQl2YXIgdGV4dCA9IHRyLmNoaWxkTm9kZXNbaW5kZXhbMF1dLmlubmVyVGV4dAoJCQlyZXR1cm4gaXNfdGltZT8gRGF0ZS5wYXJzZSh0ZXh0KToKCQkJCWlzX251bWJlcj8gY2FuLmJhc2UuUGFyc2VTaXplKHRleHQpOiB0ZXh0CgkJfSkKCQlmdW5jdGlvbiBpc2xlc3MoYSwgYiwgaW5kZXgpIHsKCQkJaWYgKGEuY2hpbGROb2Rlc1tpbmRleFswXV0gJiYgYi5jaGlsZE5vZGVzW2luZGV4WzBdXSkgewoJCQkJaWYgKGEuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0IDwgYi5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQpIHsgcmV0dXJuIHRydWUgfQoJCQkJaWYgKGEuY2hpbGROb2Rlc1tpbmRleFswXV0uaW5uZXJUZXh0ID4gYi5jaGlsZE5vZGVzW2luZGV4WzBdXS5pbm5lclRleHQpIHsgcmV0dXJuIGZhbHNlIH0KCQkJfQoJCQlyZXR1cm4gaW5kZXgubGVuZ3RoID4gMSAmJiBpc2xlc3MoYSwgYiwgaW5kZXguc2xpY2UoMSkpCgkJfQoKCQkvLyDpgInmi6nmjpLluo8KCQlmb3IgKHZhciBpID0gMDsgaSA8IG51bV9saXN0Lmxlbmd0aDsgaSsrKSB7IHZhciBtaW4gPSBpCgkJCWZvciAodmFyIGogPSBpKzE7IGogPCBudW1fbGlzdC5sZW5ndGg7IGorKykgewoJCQkJaWYgKG51bV9saXN0W21pbl0gPT0gbnVtX2xpc3Rbal0gJiYgaW5kZXgubGVuZ3RoID4gMSAmJiBsaXN0W2luZGV4WzFdXSkgewoJCQkJCWlmIChzb3J0X2FzYz8gaXNsZXNzKGxpc3RbbWluXSwgbGlzdFtqXSwgaW5kZXguc2xpY2UoMSkpOiBpc2xlc3MobGlzdFtqXSwgbGlzdFttaW5dLCBpbmRleC5zbGljZSgxKSkpIHsKCQkJCQkJbWluID0gagoJCQkJCX0KCQkJCX0gZWxzZSBpZiAoc29ydF9hc2M/IG51bV9saXN0W21pbl0gPCBudW1fbGlzdFtqXTogbnVtX2xpc3Rbal0gPCBudW1fbGlzdFttaW5dKSB7CgkJCQkJbWluID0gagoJCQkJfQoJCQl9CgoJCQlpZiAobWluICE9IGkpIHsKCQkJCXZhciB0ZW1wID0gbnVtX2xpc3RbaV07IG51bV9saXN0W2ldID0gbnVtX2xpc3RbbWluXTsgbnVtX2xpc3RbbWluXSA9IHRlbXAKCQkJCXZhciB0ZW1wID0gbGlzdFtpXTsgbGlzdFtpXSA9IGxpc3RbbWluXTsgbGlzdFttaW5dID0gdGVtcAoJCQl9CgoJCQl2YXIgdGJvZHkgPSBsaXN0W2ldLnBhcmVudEVsZW1lbnQKCQkJbGlzdFtpXS5wYXJlbnRFbGVtZW50ICYmIHRib2R5LnJlbW92ZUNoaWxkKGxpc3RbaV0pCgkJCXRib2R5LmFwcGVuZENoaWxkKGxpc3RbaV0pCgkJfQoJfSwKCglDYWNoZTogZnVuY3Rpb24obmFtZSwgb3V0cHV0LCBkYXRhKSB7IGlmICghbmFtZSkgeyByZXR1cm4gfQoJCXZhciBjYWNoZSA9IG91dHB1dC5fY2FjaGV8fHt9OyBvdXRwdXQuX2NhY2hlID0gY2FjaGUKCQlpZiAoZGF0YSkgeyBpZiAob3V0cHV0LmNoaWxkcmVuLmxlbmd0aCA9PSAwKSB7IHJldHVybiB9CgkJCXZhciB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpCgkJCXdoaWxlIChvdXRwdXQuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7IC8vIOWGmee8k+WtmAoJCQkJdmFyIGl0ZW0gPSBvdXRwdXQuY2hpbGROb2Rlc1swXQoJCQkJaXRlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGl0ZW0pLAoJCQkJCXRlbXAuYXBwZW5kQ2hpbGQoaXRlbSkKCQkJfQoJCQlyZXR1cm4gY2FjaGVbbmFtZV0gPSB7bm9kZTogdGVtcCwgZGF0YTogZGF0YX0sIG5hbWUKCQl9CgkJb3V0cHV0LmlubmVySFRNTCA9ICIiCgoJCXZhciBsaXN0ID0gY2FjaGVbbmFtZV07IGlmICghbGlzdCkgeyByZXR1cm4gfQoJCXdoaWxlIChsaXN0Lm5vZGUuY2hpbGROb2Rlcy5sZW5ndGggPiAwKSB7IC8vIOivu+e8k+WtmAoJCQl2YXIgaXRlbSA9IGxpc3Qubm9kZS5jaGlsZE5vZGVzWzBdCgkJCWl0ZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpdGVtKQoJCQlvdXRwdXQuYXBwZW5kQ2hpbGQoaXRlbSkKCQl9CgkJcmV0dXJuIGRlbGV0ZShjYWNoZVtuYW1lXSksIGxpc3QuZGF0YQoJfSwKCUZvcm1hdDogZnVuY3Rpb24odHlwZSkgeyB2YXIgYXJncyA9IGFyZ3VtZW50cwoJCXN3aXRjaCAodHlwZSkgewoJCQljYXNlIGh0bWwuQTogcmV0dXJuICI8YSBocmVmPSciK2FyZ3NbMV0rIicgdGFyZ2V0PSdfYmxhbmsnPiIrKGFyZ3NbMl18fGFyZ3NbMV0pKyI8L2E+IgoJCQljYXNlIGh0bWwuSU1HOiByZXR1cm4gYXJnc1syXT8gIjxpbWcgc3JjPSciK2FyZ3NbMV0rIicgaGVpZ2h0PSIrYXJnc1syXSsiPiI6ICI8aW1nIHNyYz0nIithcmdzWzFdKyInPiIKCQl9Cgl9LAoJcmVwbGFjZTogZnVuY3Rpb24oY2FuLCB0ZXh0LCBrZXksIHZhbHVlKSB7CgkJcmV0dXJuIGNhbi5iYXNlLnJlcGxhY2VBbGwodGV4dCwgIjwiLCAiJmx0OyIsICI+IiwgIiZndDsiLCBrZXksIHZhbHVlKQoJfSwKCUNvbG9yOiBmdW5jdGlvbih0ZXh0KSB7IGlmICh0eXBlb2YgdGV4dCAhPSBsYW5nLlNUUklORykgeyByZXR1cm4gIiIgfQoJCWlmICh0ZXh0LmluZGV4T2YoImh0dHA6Ly8iKSA9PSAwIHx8IHRleHQuaW5kZXhPZigiaHR0cHM6Ly8iKSA9PSAwIHx8IHRleHQuaW5kZXhPZigiZnRwOi8vIikgPT0gMCkgewoJCQl2YXIgbHMgPSB0ZXh0LnNwbGl0KGljZS5TUCk7CgkJCXRleHQgPSAiPGEgaHJlZj0nIitsc1swXSsiJyB0YXJnZXQ9J19ibGFuayc+Iitsc1swXSsiPC9hPiIrbHMuc2xpY2UoMSkuam9pbihpY2UuU1ApCgkJfTsgdGV4dCA9IHRleHQucmVwbGFjZSgvXFxuL2csICI8YnI+IikKCgkJaWYgKHRleHQuaW5kZXhPZigiXDAzM1xbIikgPT0gLTEpIHsgcmV0dXJuIHRleHQgfQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzMxbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiNmMDAnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzJtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzBmMCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszM20vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojZmYwJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzM0bS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiMwMGYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzZtL2csICI8c3BhbiBzdHlsZT0nY29sb3I6IzBmZic+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFszNDsxbS9nLCAiPHNwYW4gc3R5bGU9J2NvbG9yOiMwMGYnPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbMzc7MW0vZywgIjxzcGFuIHN0eWxlPSdjb2xvcjojZmZmJz4iKQoJCXRleHQgPSB0ZXh0LnJlcGxhY2UoL1wwMzNcWzFtL2csICI8c3BhbiBzdHlsZT0nZm9udC13ZWlnaHQ6Ym9sZCc+IikKCQl0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cMDMzXFswbS9nLCAiPC9zcGFuPiIpCgkJdGV4dCA9IHRleHQucmVwbGFjZSgvXDAzM1xbbS9nLCAiPC9zcGFuPiIpCgkJcmV0dXJuIHRleHQKCX0sCglpbnB1dDogZnVuY3Rpb24oY2FuLCBpdGVtLCB2YWx1ZSkgewoJCXZhciBpbnB1dCA9IHt0eXBlOiBodG1sLklOUFVULCBuYW1lOiBpdGVtLm5hbWUsIGRhdGE6IGl0ZW0sIGRhdGFzZXQ6IHt9LCBfaW5pdDogaXRlbS5faW5pdCwgc3R5bGU6IGl0ZW0uc3R5bGV8fHt9fQoJCWl0ZW0udmFsdWUgPT0gaWNlLkFVVE8gJiYgKGl0ZW0udmFsdWUgPSAiIiwgaXRlbS5hY3Rpb24gPSBpY2UuQVVUTyksIGl0ZW0uYWN0aW9uID09IGljZS5BVVRPICYmIChpbnB1dC5kYXRhc2V0LmFjdGlvbiA9IGljZS5BVVRPKQoKCQlzd2l0Y2ggKGl0ZW0udHlwZSA9IGl0ZW0udHlwZXx8aHRtbC5URVhUKSB7CgkJCWNhc2UgaHRtbC5URVhUQVJFQTogaW5wdXQudHlwZSA9IGh0bWwuVEVYVEFSRUEKCQkJCWlucHV0LnN0eWxlLmhlaWdodCA9IGlucHV0LnN0eWxlLmhlaWdodHx8Y2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBodG1sLlRFWFRBUkVBLCBpdGVtLm5hbWUsIGh0bWwuSEVJR0hUXS5qb2luKGljZS5QVCkpfHxjYW4uQ29uZihbImZlYXR1cmUiLCBodG1sLlRFWFRBUkVBLCBodG1sLkhFSUdIVF0uam9pbihpY2UuUFQpKQoJCQkJaW5wdXQuc3R5bGUud2lkdGggPSBpbnB1dC5zdHlsZS53aWR0aHx8Y2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBodG1sLlRFWFRBUkVBLCBpdGVtLm5hbWUsIGh0bWwuV0lEVEhdLmpvaW4oaWNlLlBUKSl8fGNhbi5Db25mKFsiZmVhdHVyZSIsIGh0bWwuVEVYVEFSRUEsIGh0bWwuV0lEVEhdLmpvaW4oaWNlLlBUKSkKCQkJCS8vIG5vIGJyZWFrCgkJCWNhc2UgaHRtbC5VU0VSTkFNRToKCQkJY2FzZSBodG1sLlBBU1NXT1JEOgoJCQkJLy8gbm8gYnJlYWsKCQkJY2FzZSBodG1sLlRFWFQ6CgkJCQlpdGVtLmF1dG9jb21wbGV0ZSA9ICJvZmYiCgkJCQlpdGVtLm5hbWUgPSBpdGVtLm5hbWV8fGl0ZW0udHlwZQoJCQkJaXRlbS52YWx1ZSA9IHZhbHVlfHxpdGVtLnZhbHVlfHwiIgoJCQkJaXRlbS5wbGFjZWhvbGRlciA9IGl0ZW0ucGxhY2Vob2xkZXJ8fGl0ZW0ubmFtZXx8aXRlbS50eXBlCgkJCQlpdGVtLnRpdGxlID0gaXRlbS50aXRsZXx8aXRlbS5wbGFjZWhvbGRlcnx8aXRlbS5uYW1lfHxpdGVtLnR5cGUKCQkJCWl0ZW0uY2xhc3NOYW1lIHx8IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCBjdHguQVJHUykKCQkJCWJyZWFrCgkJCWNhc2UgaHRtbC5TRUxFQ1Q6IGlucHV0LnR5cGUgPSBodG1sLlNFTEVDVAoJCQkJaXRlbS52YWx1ZXMgPSBjYW4uYmFzZS5pc1N0cmluZyhpdGVtLnZhbHVlcyk/IGNhbi5jb3JlLlNwbGl0KGl0ZW0udmFsdWVzKTogaXRlbS52YWx1ZXMKCQkJCWlmICghaXRlbS52YWx1ZXMgJiYgaXRlbS52YWx1ZSkgeyBpdGVtLnZhbHVlcyA9IGNhbi5jb3JlLlNwbGl0KGl0ZW0udmFsdWUpLCBpdGVtLnZhbHVlID0gaXRlbS52YWx1ZXNbMF0gfQoKCQkJCWl0ZW0udmFsdWUgPSB2YWx1ZXx8aXRlbS52YWx1ZSwgaW5wdXQubGlzdCA9IGl0ZW0udmFsdWVzLm1hcChmdW5jdGlvbih2YWx1ZSkgewoJCQkJCXJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIHZhbHVlOiB2YWx1ZSwgaW5uZXI6IHZhbHVlfQoJCQkJfSksIGl0ZW0uY2xhc3NOYW1lIHx8IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBpdGVtLCBjdHguQVJHUykKCQkJCWJyZWFrCgkJCWNhc2UgaHRtbC5CVVRUT046IGl0ZW0udmFsdWUgPSBpdGVtLnZhbHVlfHxpdGVtLm5hbWV8fG1kYi5MSVNUOyBicmVhawoJCQljYXNlICJ1cGZpbGUiOiBpdGVtLnR5cGUgPSBodG1sLkZJTEU7IGJyZWFrCgkJCWNhc2UgaHRtbC5VUExPQUQ6IGl0ZW0udHlwZSA9IGh0bWwuRklMRSwgaW5wdXQubmFtZSA9IGh0bWwuVVBMT0FEOyBicmVhawoJCQlkZWZhdWx0OgoJCX0KCQlyZXR1cm4gaW5wdXQKCX0sCglpbnB1dHM6IGZ1bmN0aW9uKGNhbiwgbGlzdCkgewoJCXZhciBfbGlzdCA9IFtdOyBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKCQkJc3dpdGNoIChsaXN0W2ldKSB7IGNhc2UgIiI6IF9saXN0LnB1c2goIiIpOyBicmVhawoJCQkJY2FzZSBpY2UuQVVUTzoKCQkJCQlfbGlzdC5wdXNoKHt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImxpc3QifSkKCQkJCQlfbGlzdC5wdXNoKHt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImJhY2sifSkKCQkJCQlicmVhawoJCQkJY2FzZSBtZGIuUEFHRToKCQkJCQlfbGlzdC5wdXNoKHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IG1kYi5MSU1JVCwgdmFsdWU6IGNhbi5fbXNnLk9wdGlvbihtZGIuTElNSVQpfSkKCQkJCQlfbGlzdC5wdXNoKHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6IG1kYi5PRkZFTkQsIHZhbHVlOiBjYW4uX21zZy5PcHRpb24obWRiLk9GRkVORCl9KQoJCQkJCV9saXN0LnB1c2gobWRiLlBSRVYsIG1kYi5ORVhUKQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCShmdW5jdGlvbigpIHsgdmFyIGl0ZW0gPSBjYW4uY29yZS5TcGxpdElucHV0KGxpc3RbaV0sIGh0bWwuQlVUVE9OKTsKCQkJCQkJaWYgKGl0ZW0udHlwZSA9PSBodG1sLlNFTEVDVCkgewoJCQkJCQkJaXRlbS5faW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQudmFsdWUgPSBpdGVtLnZhbHVlfHxpdGVtLnZhbHVlc1swXSwgdGFyZ2V0Lm9uY2hhbmdlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnJ1bihldmVudCkgfSB9CgkJCQkJCX0KCQkJCQkJaXRlbS5hY3Rpb24gJiYgKGZ1bmN0aW9uKCkgeyBpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQpIH0gfSkoKQoJCQkJCQlpdGVtLnR5cGUgPT0gaHRtbC5CVVRUT04/IF9saXN0LnB1c2gobGlzdFtpXSk6IF9saXN0LnB1c2goaXRlbSkKCQkJCQl9KSAoKQoJCQl9CgkJfQoJCXJldHVybiBfbGlzdAoJfSwKCglzdHlsZURpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgewoJCXJldHVybiBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5ESVNQTEFZLCB2YWx1ZSksIHRhcmdldC5zdHlsZS5kaXNwbGF5Cgl9LAoJc3R5bGVIZWlnaHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgewoJCXJldHVybiBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5IRUlHSFQsIHZhbHVlKSwgdGFyZ2V0Lm9mZnNldEhlaWdodAoJfSwKCXN0eWxlV2lkdGg6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB2YWx1ZSkgewoJCXJldHVybiBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5XSURUSCwgdmFsdWUpLCB0YXJnZXQub2Zmc2V0V2lkdGgKCX0sCglzdHlsZUNsYXNzOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgdmFsdWUpIHsKCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtjbGFzc05hbWU6IHZhbHVlfSkKCX0sCglzdHlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHN0eWxlKSB7IHZhciB2YWx1ZSA9IHt9CgkJZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDIpIHsKCQkJaWYgKHR5cGVvZiBhcmd1bWVudHNbaV0gPT0gbGFuZy5PQkpFQ1QpIHsKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwge3N0eWxlOiBhcmd1bWVudHNbaS0tXX0pCgkJCX0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50c1tpXSA9PSBsYW5nLlVOREVGSU5FRCkgewoJCQkJY29udGludWUKCQkJfSBlbHNlIHsKCQkJCXZhbHVlW2FyZ3VtZW50c1tpXV0gPSBhcmd1bWVudHNbaSsxXQoJCQl9CgkJfQoJCXJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtzdHlsZTogdmFsdWV9KSwgdmFsdWUKCX0sCglLZXlzOiBmdW5jdGlvbigpIHsgdmFyIGxpc3QgPSBbXSAvLyBGUyBTUCBHVCBQVAoJCWZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciB2ID0gYXJndW1lbnRzW2ldCgkJCWlmICh0eXBlb2YgdiA9PSBsYW5nLk9CSkVDVCkgewoJCQkJZm9yICh2YXIgaiA9IDA7IGogPCB2Lmxlbmd0aDsgaisrKSB7CgkJCQkJaWYgKHR5cGVvZiB2W2pdID09IGxhbmcuT0JKRUNUKSB7CgkJCQkJCWZvciAodmFyIGsgPSAwOyBrIDwgdltqXS5sZW5ndGg7IGsrKykgewoJCQkJCQkJaWYgKHR5cGVvZiB2W2pdW2tdID09IGxhbmcuT0JKRUNUKSB7IHZbal1ba10gPSB2W2pdW2tdLmpvaW4oaWNlLlBUKSB9CgkJCQkJCX0KCQkJCQkJdltqXSA9IHZbal0uam9pbihpY2UuR1QpCgkJCQkJfQoJCQkJfQoJCQkJbGlzdC5wdXNoKHYuam9pbihpY2UuU1ApKQoJCQl9IGVsc2UgewoJCQkJbGlzdC5wdXNoKHYrIiIpCgkJCX0KCQl9CgkJcmV0dXJuIGxpc3Quam9pbihpY2UuRlMpCgl9LAoJY3NzOiBmdW5jdGlvbih0ZXh0KSB7CgkJdmFyIHN0eWxlU2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpCgkJc3R5bGVTaGVldC50eXBlID0gInRleHQvY3NzIiwgc3R5bGVTaGVldC5pbm5lclRleHQgPSB0ZXh0CgkJZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVNoZWV0KQoJfSwKCXRhZ2lzOiBmdW5jdGlvbih0eXBlLCB0YXJnZXQpIHsgdHlwZSA9IHR5cGVvZiB0eXBlID09IGxhbmcuT0JKRUNUPyB0eXBlOiBbdHlwZV0KCQlpZiAodHlwZS5pbmRleE9mKHRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpIHsgcmV0dXJuIHRydWUgfQoJfSwKCW9mZnNldFRvcDogZnVuY3Rpb24oaXRlbSkgeyB2YXIgcmVzID0gMAoJCXdoaWxlIChpdGVtKSB7IHJlcyArPSBpdGVtLm9mZnNldFRvcHx8MCwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZSB9CgkJcmV0dXJuIHJlcwoJfSwKCW9mZnNldExlZnQ6IGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHJlcyA9IDAKCQkvLyBpZiAoaXRlbS5vZmZzZXRMZWZ0KSB7IHJldHVybiBpdGVtLm9mZnNldExlZnQgfQoJCXdoaWxlIChpdGVtKSB7IHJlcyArPSBpdGVtLm9mZnNldExlZnR8fDAsIGl0ZW0gPSBpdGVtLnBhcmVudE5vZGUgfQoJCXJldHVybiByZXMKCX0sCgllZGl0YWJsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBvaykgeyBpdGVtLnNldEF0dHJpYnV0ZSgiY29udGVudGVkaXRhYmxlIiwgb2spIH0sCglkcmFnZ2FibGU6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgb2spIHsgaXRlbS5zZXRBdHRyaWJ1dGUoImRyYWdnYWJsZSIsIG9rKSB9LAoKCUFwcGVuZFZ1ZTogZnVuY3Rpb24oY2FuLCBtZXRhLCBsaXN0LCB0YXJnZXQpIHsKCQljYW4ucmVxdWlyZShbImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vdnVlQDIvZGlzdC92dWUuanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly91bnBrZy5jb20vZWxlbWVudC11aS9saWIvaW5kZXguanMiLCAiaHR0cHM6Ly91bnBrZy5jb20vZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvaW5kZXguY3NzIl0sIGZ1bmN0aW9uKCkgewoJCQkJbmV3IFZ1ZShjYW4uYmFzZS5Db3B5KHtlbDogY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t0eXBlOiAiZGl2IiwgaW5uZXI6IGxpc3R9XSkuZmlyc3R9LCBtZXRhKSkKCQkJfSkKCQl9KQoJfSwKCWluc2VydEJlZm9yZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBiZWZvcmUsIHBhcmVudCkgeyBwYXJlbnQgPSBwYXJlbnR8fGJlZm9yZS5wYXJlbnROb2RlCgkJdmFyIGl0ZW0gPSBjYW4uYmFzZS5pc0FycmF5KGxpc3QpPyBjYW4ucGFnZS5BcHBlbmQoY2FuLCBwYXJlbnQsIGxpc3QpLmZpcnN0OiBsaXN0CgkJcmV0dXJuIGJlZm9yZSAmJiBwYXJlbnQuaW5zZXJ0QmVmb3JlKGl0ZW0sIGJlZm9yZSksIGl0ZW0KCX0sCn0pCgpfY2FuX25hbWUgPSAiL2xpYi91c2VyLmpzIgpWb2xjYW5vcygidXNlciIsIHtoZWxwOiAi55So5oi35pON5L2cIiwgaW5mbzoge30sIGFnZW50OiB7CgkJc2NhblFSQ29kZTogZnVuY3Rpb24oY2IsIGNhbikgewoJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIG5hbWU6ICJ0ZXh0IiwgdGV4dDogIiJ9XSwgZnVuY3Rpb24obGlzdCkgewoJCQkJY2IobGlzdFswXSwgY2FuLmJhc2UuUGFyc2VKU09OKGxpc3RbMF0pKQoJCQl9KQoJCX0sCgkJZ2V0TG9jYXRpb246IGZ1bmN0aW9uKGNiKSB7IHZhciBjYWxsID0gYXJndW1lbnRzLmNhbGxlZQoJCQlpZiAoY2FsbC5fcmVzKSB7IHJldHVybiBjYihjYWxsLl9yZXMpIH0KCgkJCW5hdmlnYXRvci5nZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oZnVuY3Rpb24ocmVzKSB7CgkJCQljYihjYWxsLl9yZXMgPSB7bGF0aXR1ZGU6IHBhcnNlSW50KHJlcy5jb29yZHMubGF0aXR1ZGUqMTAwMDAwKSwgbG9uZ2l0dWRlOiBwYXJzZUludChyZXMuY29vcmRzLmxvbmdpdHVkZSoxMDAwMDApfSkKCQkJfSwgZnVuY3Rpb24oc29tZSkgewoJCQkJdHlwZW9mIGNiID09IGxhbmcuRlVOQ1RJT04gJiYgY2Ioe3R5cGU6ICJ1bmtub3duIiwgbmFtZTogInVua25vd24iLCBsYXRpdHVkZTogMzk5ODQxMiwgbG9uZ2l0dWRlOiAxMTYzMDc0OH0pCgkJCX0gKTsKCQl9LAoJCW9wZW5Mb2NhdGlvbjogZnVuY3Rpb24obXNnKSB7CgkJCXdpbmRvdy5vcGVuKCJodHRwczovL21hcC5iYWlkdS5jb20vc2VhcmNoLyIrZW5jb2RlVVJJQ29tcG9uZW50KG1zZy5PcHRpb24obWRiLlRFWFQpKQoJCQkJKyIvQDEyOTU4NzUwLjA4NSw0ODI1Nzg1LjU1LDE2ej9xdWVyeXR5cGU9cyZkYV9zcmM9c2hhcmV1cmwmd2Q9IitlbmNvZGVVUklDb21wb25lbnQobXNnLk9wdGlvbihtZGIuVEVYVCkpKQoJCX0sCgkJY2hvb3NlSW1hZ2U6IGZ1bmN0aW9uKGNiKSB7CgkJCXR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKFtdKQoJCX0sCgl9LAoJaXNXZWlYaW46IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiTWljcm9NZXNzZW5nZXIiKSA+IC0xLAoJaXNJUGhvbmU6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiaVBob25lIikgPiAtMSwKCWlzTW9iaWxlOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1vYmlsZSIpID4gLTEsCglpc01hY09TWDogbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCJNYWMgT1MgWCIpID4gLTEsCglpc1dpbmRvd3M6IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZigiV2luZG93cyIpID4gLTEsCglpc0lFOiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIk1TSUUiKSA+IC0xLAoJaXNFeHRlbnNpb246IGxvY2F0aW9uICYmIGxvY2F0aW9uLnByb3RvY29sICYmIGxvY2F0aW9uLnByb3RvY29sID09ICJjaHJvbWUtZXh0ZW5zaW9uOiIsCglpc0xvY2FsRmlsZTogbG9jYXRpb24gJiYgbG9jYXRpb24ucHJvdG9jb2wgJiYgbG9jYXRpb24ucHJvdG9jb2wgPT0gImZpbGU6IiwKCWlzTGFuZHNjYXBlOiBmdW5jdGlvbigpIHsgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoID4gd2luZG93LmlubmVySGVpZ2h0IH0sCglpc1BvcnRyYWl0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHdpbmRvdy5pbm5lcldpZHRoIDwgd2luZG93LmlubmVySGVpZ2h0IH0sCgltb2Q6IHsKCQlpc1BvZDogbG9jYXRpb24gJiYgbG9jYXRpb24ucGF0aG5hbWUgJiYgKGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi9jaGF0L3BvZC8iKSA9PSAwIHx8IGxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoIi94LyIpID09IDApLAoJCWlzRGl2OiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvZGl2LyIpID09IDApLAoJCWlzQ21kOiBsb2NhdGlvbiAmJiBsb2NhdGlvbi5wYXRobmFtZSAmJiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvcG9kLyIpID09IDAgJiYgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NtZC8iKSA+IDAgfHwKCQkJbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvY21kLyIpID09IDAgfHwgbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2hlbHAvIikgPT0gMCksCgkJaXNXZWI6IGxvY2F0aW9uICYmIGxvY2F0aW9uLnBhdGhuYW1lICYmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvY2hhdC9wb2QvIikgPT0gMCAmJiBsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCIvd2Vic2l0ZS8iKSA+IDAgfHwKCQkJbG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigiL2NoYXQvd2Vic2l0ZS8iKSA9PSAwKSwKCX0sCgoJYWxlcnQ6IGZ1bmN0aW9uKHRleHQpIHsgYWxlcnQoSlNPTi5zdHJpbmdpZnkodGV4dCkpIH0sCgljb25maXJtOiBmdW5jdGlvbih0ZXh0KSB7IHJldHVybiBjb25maXJtKEpTT04uc3RyaW5naWZ5KHRleHQpKSB9LAoJcHJvbXB0OiBmdW5jdGlvbih0aXAsIGRlZiwgY2IsIHNpbGVudCkgeyAodGV4dCA9IHNpbGVudD8gZGVmOiBwcm9tcHQodGlwLCBkZWZ8fCIiKSkgIT0gdW5kZWZpbmVkICYmIHR5cGVvZiBjYiA9PSBsYW5nLkZVTkNUSU9OICYmIGNiKHRleHQpOyByZXR1cm4gdGV4dCB9LAoJcmVsb2FkOiBmdW5jdGlvbihmb3JjZSkgeyAoZm9yY2UgfHwgY29uZmlybSgi6YeN5paw5Yqg6L296aG16Z2i77yfIikpICYmIGxvY2F0aW9uLnJlbG9hZCgpIH0sCglqdW1wczogZnVuY3Rpb24odXJsKSB7IGxvY2F0aW9uLmhyZWYgPSB1cmwgfSwKCW9wZW46IGZ1bmN0aW9uKHVybCkgeyB3aW5kb3cub3Blbih1cmwpIH0sCgljbG9zZTogZnVuY3Rpb24odXJsKSB7IHdpbmRvdy5jbG9zZSgpIH0sCgl0aW1lOiBmdW5jdGlvbihjYW4sIHRpbWUsIGZtdCkgeyB2YXIgbm93ID0gY2FuLmJhc2UuRGF0ZSh0aW1lKQoJCXZhciBsaXN0ID0gY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBbIlN1biIsICJNb24iLCAiVHVlIiwgIldlZCIsICJUaHUiLCAiRnJpIiwgIlNhdCJdOiBbIuWRqOaXpSIsICLlkajkuIAiLCAi5ZGo5LqMIiwgIuWRqOS4iSIsICLlkajlm5siLCAi5ZGo5LqUIiwgIuWRqOWFrSJdCgkJcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgKGZtdHx8IiV5LSVtLSVkICVIOiVNOiVTIikucmVwbGFjZSgiJXciLCBsaXN0W25vdy5nZXREYXkoKV0pKQoJfSwKCWFyZ3M6IGZ1bmN0aW9uKGNhbikgewoJCWlmIChjYW4udXNlci5pc0V4dGVuc2lvbikgewoJCQlyZXR1cm4gY2FuLmJhc2UuT2JqKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGN0eC5BUkdTKSwge30pCgkJfQoJCXJldHVybiB7fQoJfSwKCgl0aXRsZTogZnVuY3Rpb24odGV4dCkgewoJCWlmICh3aW5kb3cud2VidmlldykgeyByZXR1cm4gdGl0bGUodGV4dCkgfQoJCXJldHVybiB0ZXh0ICYmIChkb2N1bWVudC50aXRsZSA9IFZvbGNhbm9zLm1ldGEuYXJncy5uYW1lfHx0ZXh0KSwgZG9jdW1lbnQudGl0bGUKCX0sCgl0b3BpYzogZnVuY3Rpb24oY2FuLCBuYW1lKSB7IGNhbi5iYXNlLmlzQXJyYXkobmFtZSkgJiYgKG5hbWUgPSBjYW4uYmFzZS5qb2luKG5hbWUpKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIChuYW1lICs9ICIgbW9iaWxlIikgJiYgY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiAobmFtZSArPSAiIGxhbmRzY2FwZSIpCgkJY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSAmJiAobmFtZSArPSAiICIrY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSkKCQljYW4uQ29uZigiZGlzcGxheSIpICYmIChuYW1lICs9ICIgIitjYW4uQ29uZigiZGlzcGxheSIpKQoJCWNhbi51c2VyLm1vZC5pc0NtZCAmJiAobmFtZSArPSAiIHNpbXBsZSIpCgkJY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBuYW1lKQoJfSwKCWxhbmd1YWdlOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5taXNjLlNlYXJjaChjYW4sICJsYW5ndWFnZSIpIH0sCgl0cmFuczogZnVuY3Rpb24oY2FuLCB0ZXh0LCBsaXN0KSB7IGlmIChjYW4uYmFzZS5pc09iamVjdCh0ZXh0KSkgewoJCQlyZXR1cm4gY2FuLmNvcmUuSXRlbSh0ZXh0LCBmdW5jdGlvbihrLCB2KSB7IGNhbi5jb3JlLlZhbHVlKGNhbi5fdHJhbnMsIGssIHYpIH0pCgkJfQoKCQlpZiAoY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iKSB7IHJldHVybiB0ZXh0IH0KCQlpZiAoY2FuLmJhc2UuaXNGdW5jdGlvbih0ZXh0KSkgeyB0ZXh0ID0gdGV4dC5uYW1lfHwiIiB9CgkJcmV0dXJuIGxpc3QmJmxpc3RbdGV4dF0gfHwgY2FuLkNvbmYoInRyYW5zLiIrdGV4dCkgfHwgY2FuLkNvbmYoImZlYXR1cmUuX3RyYW5zLiIrdGV4dCkgfHwgY2FuLl90cmFucyYmY2FuLl90cmFuc1t0ZXh0XSB8fCB7CgkJCSJjcmVhdGUiOiAi5Yib5bu6IiwgInJlbW92ZSI6ICLliKDpmaQiLCAiaW5zZXJ0IjogIua3u+WKoCIsICJkZWxldGUiOiAi5Yig6ZmkIiwgIm1vZGlmeSI6ICLnvJbovpEiLAoJCQkiaW5wdXRzIjogIuihpeWFqCIsICJwcnVuZXMiOiAi5riF55CGIiwgImV4cG9ydCI6ICLlr7zlh7oiLCAiaW1wb3J0IjogIuWvvOWFpSIsCgkJCSJsaXN0IjogIuafpeeciyIsICJiYWNrIjogIui/lOWbniIsICJydW4iOiAi5omn6KGMIiwgImRvbmUiOiAi5a6M5oiQIiwgInNoYXJlIjogIuWFseS6qyIsCgkJCSJlZGl0IjogIue8lui+kSIsICJzYXZlIjogIuS/neWtmCIsICJjb3B5IjogIuWkjeWItiIsICJzaG93IjogIuaYvuekuiIsICJoaWRlIjogIumakOiXjyIsCgkJCSJwcm9qZWN0IjogIumhueebriIsICJwcm9maWxlIjogIuivpuaDhSIsICJhY3Rpb25zIjogIuWPguaVsCIsCgkJCSJkb3dubG9hZCI6ICLkuIvovb0iLCAidG9pbWFnZSI6ICLmiKrlm74iLAoJCQkicGx1Z2luIjogIuaPkuS7tiIsCgkJCSJwcmV2IjogIuS4iuS4gOmhtSIsICJuZXh0IjogIuS4i+S4gOmhtSIsCgoJCQkiQ2xvc2UiOiAi5YWz6ZetIiwKCQkJIkNsb3NlIG90aGVycyI6ICLlhbPpl63lhbblroMiLAoJCQkiQ2xvc2UgYWxsIjogIuWFs+mXreaJgOaciSIsCgoJCQkidHJhc2giOiAi5Yig6ZmkIiwKCQkJIm9wZW4iOiAi5omT5byAIiwgImNsb3NlIjogIuWFs+mXrSIsCgkJCSJzdGFydCI6ICLlkK/liqgiLCAic3RvcCI6ICLlgZzmraIiLAoJCQkiYmVnaW4iOiAi5byA5aeLIiwgImVuZCI6ICLnu5PmnZ8iLAoJCQkiY2xlYXIiOiAi5riF56m6IiwgInJlZnJlc2giOiAi5Yi35pawIiwKCQkJInN1Ym1pdCI6ICLmj5DkuqQiLCAiY2FuY2VsIjogIuWPlua2iCIsCgkJCSJsYWJlbCI6ICLmoIfnrb4iLCAiZXhlYyI6ICLmiafooYwiLAoJCX1bdGV4dF18fHRleHQKCX0sCgl0b2FzdFNjcmlwdDogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSkgewoJCXZhciB1aSA9IGNhbi51c2VyLnRvYXN0KGNhbiwge3RpdGxlOiB0aXRsZSwgZHVyYXRpb246IC0xLCB3aWR0aDogLTMwMCwgY29udGVudDogY29udGVudCwgYWN0aW9uOiBbY2xpLkNMT1NFXX0pCgkJY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuLCB1aS5fdGFyZ2V0KQoJfSwKCXRvYXN0Q29uZmlybTogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSwgYWN0aW9uKSB7CgkJcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwge3RpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudCwgYWN0aW9uOiBhY3Rpb258fFtjbGkuQ0xPU0VdLCBkdXJhdGlvbjogLTEsIHdpZHRoOiAtMzAwfSkKCX0sCgl0b2FzdFByb2Nlc3M6IGZ1bmN0aW9uKGNhbiwgY29udGVudCwgdGl0bGUpIHsgcmV0dXJuIGNhbi51c2VyLnRvYXN0KGNhbiwgY29udGVudCwgdGl0bGV8fGljZS5QUk9DRVNTLCAtMSkgfSwKCXRvYXN0U3VjY2VzczogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSkgeyByZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCBjb250ZW50LCB0aXRsZXx8aWNlLlNVQ0NFU1MpIH0sCgl0b2FzdDogZnVuY3Rpb24oY2FuLCBjb250ZW50LCB0aXRsZSwgZHVyYXRpb24sIHByb2dyZXNzKSB7CgkJdmFyIG1ldGEgPSBjYW4uYmFzZS5pc09iamVjdChjb250ZW50KT8gY29udGVudDoge2NvbnRlbnQ6IGNvbnRlbnQsIHRpdGxlOiB0aXRsZXx8Y2FuLl9oZWxwLCBkdXJhdGlvbjogZHVyYXRpb24sIHByb2dyZXNzOiBwcm9ncmVzc30KCQl2YXIgd2lkdGggPSBtZXRhLndpZHRofHw0MDAsIGhlaWdodCA9IG1ldGEuaGVpZ2h0fHwxMDA7IGlmICh3aWR0aCA8IDApIHsgd2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aCArIHdpZHRoIH0KCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZG9jdW1lbnQuYm9keSwgIFt7dmlldzogY2hhdC5UT0FTVCwgc3R5bGU6IHsKCQkJbGVmdDogKHdpbmRvdy5pbm5lcldpZHRoLXdpZHRoKS8yLCB3aWR0aDogd2lkdGgsIGJvdHRvbTogMTAwLAoJCX0sIGxpc3Q6IFsKCQkJe3RleHQ6IFttZXRhLnRpdGxlfHwiIiwgaHRtbC5ESVYsIGh0bWwuVElUTEVdLCB0aXRsZTogIueCueWHu+WkjeWItiIsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIG1ldGEudGl0bGUpCgkJCX19LAoJCQl7dmlldzogImR1cmF0aW9uIiwgdGl0bGU6ICLngrnlh7vlhbPpl60iLCBvbmNsaWNrOiBmdW5jdGlvbigpIHsgYWN0aW9uLmNsb3NlKCkgfX0sCgkJCWNhbi5iYXNlLmlzT2JqZWN0KG1ldGEuY29udGVudCk/IG1ldGEuY29udGVudDoge3RleHQ6IFttZXRhLmNvbnRlbnR8fCLmiafooYzmiJDlip8iLCBodG1sLkRJViwgImNvbnRlbnQiXX0sCgoJCQl7dmlldzogaHRtbC5BQ1RJT059LCBtZXRhLnByb2dyZXNzICE9IHVuZGVmaW5lZCAmJiB7dmlldzogInByb2dyZXNzIiwgc3R5bGU6IHt3aWR0aDogd2lkdGh9LCBsaXN0OiBbCgkJCQl7dmlldzogImN1cnJlbnQiLCBzdHlsZToge3dpZHRoOiAobWV0YS5wcm9ncmVzc3x8MCkvMTAwKndpZHRofX0sCgkJCV19LAoJCV0gfV0pCgoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aS5fdGFyZ2V0LCBjaGF0LkZMT0FUKQoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIG1ldGEuYWN0aW9uICYmIG1ldGEuYWN0aW9uLmxpc3Q/IG1ldGEuYWN0aW9uLmxpc3Q6IG1ldGEuYWN0aW9ufHxbIiJdLCB1aS5hY3Rpb24sIHsKCQkJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbikgewoJCQkJdmFyIGNiID0gbWV0YS5hY3Rpb25bYnV0dG9uXXx8bWV0YS5hY3Rpb247IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGJ1dHRvbikKCQkJfSwKCQkJb3BlbjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWlmIChtZXRhLmNvbnRlbnQuaW5kZXhPZigiaHR0cCIpID09IDApIHsgY2FuLnVzZXIub3BlbihtZXRhLmNvbnRlbnQpIH0KCQkJCWlmIChtZXRhLnRpdGxlLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IGNhbi51c2VyLm9wZW4obWV0YS50aXRsZSkgfQoJCQl9LAoJCQljbG9zZTogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgYWN0aW9uLl90YXJnZXQpLCBhY3Rpb24udGltZXIuc3RvcCA9IHRydWUgfSwKCQkJdGltZXI6IGNhbi5jb3JlLlRpbWVyKHtpbnRlcnZhbDogMTAwLCBsZW5ndGg6IChwYXJzZUludChtZXRhLmR1cmF0aW9ufHwxMDAwKSkvMTAwfSwgZnVuY3Rpb24oZXZlbnQsIGludGVydmFsLCBpbmRleCkgewoJCQkJaWYgKGluZGV4ID4gMzApIHsgdWkuZHVyYXRpb24uaW5uZXJIVE1MID0gcGFyc2VJbnQoaW5kZXgvMTApK2ljZS5QVCsoaW5kZXglMTApKyJzLi4uIiB9CgkJCX0sIGZ1bmN0aW9uKCkgeyBhY3Rpb24uY2xvc2UoKSB9KSwgX3RhcmdldDogdWkuX3RhcmdldCwgdWk6IHVpLAoJCX0pOyBjYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4sIHVpLl90YXJnZXQpCgoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OVE9BU1QsIGNhbi5yZXF1ZXN0KHt9LCB7dGltZTogY2FuLm1pc2MuX3RpbWUoKSwgdGl0bGU6IG1ldGEudGl0bGUsIGNvbnRlbnQ6IG1ldGEuY29udGVudCwgZmlsZWxpbmU6IGNhbi5taXNjLkZpbGVMaW5lKDIsIDIpfSkpCgkJcmV0dXJuICFtZXRhLmFjdGlvbiAmJiBjYW4ub25tb3Rpb24uZmxvYXQuYWRkKGNhbiwgY2hhdC5UT0FTVCwgYWN0aW9uKSwgYWN0aW9uCgl9LAoJc2hhcmU6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWQpIHsKCQljYW4ucnVuKG1zZywgY21kfHxbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4udXNlci50b2FzdChjYW4sIHsKCQkJCXRpdGxlOiBtc2cuQXBwZW5kKG1kYi5OQU1FKSwgZHVyYXRpb246IC0xLAoJCQkJY29udGVudDogbXNnLkFwcGVuZChtZGIuVEVYVCksIGFjdGlvbjogW2NsaS5DTE9TRSwgY2xpLk9QRU5dLAoJCQl9KSwgY2FuLnVzZXIuY29weShtc2cuX2V2ZW50LCBjYW4sIG1zZy5BcHBlbmQobWRiLk5BTUUpKQoJCX0pCgl9LAoJbG9naW46IGZ1bmN0aW9uKGNhbiwgY2IsIG1ldGhvZCwgYXV0bykgeyBtZXRob2QgPSBjYW4uYmFzZS5PYmoobWV0aG9kLCBbIueZu+W9lSIsICLmiavnoIEiXSkKCQl2YXIgbGlzdCA9IHsKCQkJIueZu+W9lSI6IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIGRhdGEpIHsKCQkJCWNhbi5ydW4oe30sIFthYWEuTE9HSU4sIGRhdGFbaHRtbC5VU0VSTkFNRV0sIGRhdGFbaHRtbC5QQVNTV09SRF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX1VTRVJOQU1FKSkgewoJCQkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+vIikKCQkJCQl9CgkJCQl9KQoJCQkJcmV0dXJuIHRydWUKCQkJfSwgCgkJCSLmiavnoIEiOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgY21kOiAicHdkIn0sIGZ1bmN0aW9uKGV2ZW50LCBtc2csIGNtZCwgYXJnKSB7IGlmICghbXNnKSB7IHJldHVybiB9CgkJCQkJaWYgKGNtZCA9PSAicHdkIikgewoJCQkJCQlyZXR1cm4gY2FuLnVzZXIudG9hc3QoY2FuLCBhcmdbMl0sIGFyZ1sxXSwgLTEpLCBtc2cuUmVwbHkoKQoJCQkJCX0KCQkJCQlpZiAoY21kID09IGljZS5NU0dfU0VTU0lEKSB7CgkJCQkJCXJldHVybiBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBhcmdbMF0pLCBtc2cuUmVwbHkoKSwgY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJCQkJfQoJCQkJCWNhbi5zZWFyY2goZXZlbnQsIG1zZ1tpY2UuTVNHX0RFVEFJTF18fFtdLCBmdW5jdGlvbihtc2cpIHsgbXNnLlJlcGx5KCkgfSkKCQkJCX0pCgkJCX0sCgkJCSLmjojmnYMiOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgY21kOiAic3NvIiwgInVzZXIud2ViIjogbG9jYXRpb24uaHJlZn0sIGZ1bmN0aW9uKGV2ZW50LCBtc2csIGNtZCwgYXJnKSB7IGlmICghbXNnKSB7IHJldHVybiB9CgkJCQkJaWYgKGNtZCA9PSAicHdkIikgewoJCQkJCQlyZXR1cm4gbG9jYXRpb24uaHJlZiA9IGFyZ1sxXQoJCQkJCX0KCQkJCQlpZiAoY21kID09IGljZS5NU0dfU0VTU0lEKSB7CgkJCQkJCXJldHVybiBjYW4ubWlzYy5Db29raWVTZXNzaWQoY2FuLCBhcmdbMF0pLCBtc2cuUmVwbHkoKSwgY2FuLnVzZXIucmVsb2FkKHRydWUpCgkJCQkJfQoJCQkJCWNhbi5zZWFyY2goZXZlbnQsIG1zZ1tpY2UuTVNHX0RFVEFJTF18fFtdLCBmdW5jdGlvbihtc2cpIHsgbXNnLlJlcGx5KCkgfSkKCQkJCX0pCgkJCX0sCgkJCSLpo57kuaYiOiBmdW5jdGlvbigpIHsgbG9jYXRpb24uaHJlZiA9ICIvY2hhdC9sYXJrL3NzbyIgfSwKCQl9OyBpZiAoYXV0bykgeyByZXR1cm4gbGlzdFsi5o6I5p2DIl0oKSB9IGVsc2UgaWYgKG1ldGhvZC5sZW5ndGggPT0gMSkgeyBsaXN0W21ldGhvZFswXV0oKTsgcmV0dXJuIH0KCgkJdmFyIHVpID0gY2FuLnVzZXIuaW5wdXQoe30sIGNhbiwgW3t0eXBlOiBodG1sLlVTRVJOQU1FfSwge3R5cGU6IGh0bWwuUEFTU1dPUkR9XSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgZGF0YSkgeyByZXR1cm4gbGlzdFtidXR0b25dKGV2ZW50LCBidXR0b24sIGRhdGEpIH0sIG1ldGhvZCkKCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB1aS5fdGFyZ2V0LCB7Y2xhc3NOYW1lOiAiaW5wdXQgbG9naW4iLCBzdHlsZToge2xlZnQ6ICh3aW5kb3cuaW5uZXJXaWR0aC11aS5fdGFyZ2V0Lm9mZnNldFdpZHRoKS8yLCB0b3A6IHdpbmRvdy5pbm5lckhlaWdodC82fX0pCgl9LAoJbG9nb3V0OiBmdW5jdGlvbihjYW4sIGZvcmNlKSB7IGlmIChmb3JjZXx8Y2FuLnVzZXIuY29uZmlybSgibG9nb3V0PyIpKSB7CgkJY2FuLnJ1bkFjdGlvbih7fSwgYWFhLkxPR09VVCwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlNIQVJFKT8gY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TSEFSRSwgIiIpOiBjYW4udXNlci5yZWxvYWQodHJ1ZSkKCQl9KQoJfSB9LAoKCXRvUE5HOiBmdW5jdGlvbihjYW4sIG5hbWUsIHRleHQsIGhlaWdodCwgd2lkdGgpIHsKCQlpZiAodGV4dC5pbmRleE9mKCI8c3ZnIikgIT0gMCkgewoJCQl0ZXh0ID0gJzxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4nK3RleHQrIjwvc3ZnPiIKCQl9CgkJdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaHRtbC5JTUcpCgkJaW1nLm9ubG9hZCA9IGZ1bmN0aW9uKCkgewoJCQl2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIikKCQkJY2FudmFzLmhlaWdodCA9IGhlaWdodCwgY2FudmFzLndpZHRoID0gd2lkdGgKCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKGltZywgMCwgMCkKCgkJCXZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpCgkJCWEuaHJlZiA9IGNhbnZhcy50b0RhdGFVUkwoImltYWdlL3BuZyIpCgkJCWEuZG93bmxvYWQgPSBuYW1lLCBhLmNsaWNrKCkKCQl9LCBpbWcuc3JjID0gImRhdGE6aW1hZ2Uvc3ZnK3htbCwiK2VuY29kZVVSSUNvbXBvbmVudCh0ZXh0KQoJfSwKCWNvcHk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRleHQpIHsgaWYgKCF0ZXh0KSB7IHJldHVybiB9CgkJaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHsgdmFyIG9rID0gZmFsc2UKCQkJbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCkudGhlbihmdW5jdGlvbigpIHsgb2sgPSB0cnVlIH0pOyBpZiAob2spIHsKCQkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIHRleHQsICJjb3B5IHN1Y2Nlc3MiKSwgY2FuLm1pc2MuTG9nKCJjb3B5IiwgdGV4dCkKCQkJCXJldHVybiB0ZXh0CgkJCX0KCQl9CgoJCXZhciBpbnB1dCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLCBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIHZhbHVlOiB0ZXh0fV0pLmZpcnN0CgkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgaW5wdXQpLCBkb2N1bWVudC5leGVjQ29tbWFuZCgiQ29weSIpLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCBpbnB1dCkKCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCB0ZXh0LCAiY29weSBzdWNjZXNzIiksIGNhbi5taXNjLkxvZygiY29weSIsIHRleHQpCgkJcmV0dXJuIHRleHQKCX0sCgljYXJ0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgeyAvLyBldmVudCBpdGVtIG1ldGEKCQltZXRhID0gbWV0YXx8Y2FuLm9uZGV0YWlsfHxjYW4ub25hY3Rpb258fHt9LCBsaXN0ID0gbGlzdCYmbGlzdC5sZW5ndGggPiAwPyBsaXN0OiBtZXRhLmxpc3R8fGNhbi5jb3JlLkl0ZW0obWV0YSl8fFtdOyBpZiAobGlzdC5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCWNiID0gY2J8fGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsgdmFyIGNiID0gbWV0YVtidXR0b25dfHxtZXRhWyJfZW5naW5lIl07IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGNhbiwgYnV0dG9uKSB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dmlldzogY2hhdC5DQVJURSwgc3R5bGU6IHtsZWZ0OiAwLCB0b3A6IDB9LCBvbm1vdXNlbGVhdmU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCS8vIGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLl90YXJnZXQpCgkJfSwgbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlyZXR1cm4gY2FuLmJhc2UuaXNTdHJpbmcoaXRlbSk/IGl0ZW0gPT0iIj8gLyogc3BhY2UgKi8ge3ZpZXc6ICJzcGFjZSJ9OiAvKiBzdHJpbmcgKi8ge3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0pLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIG1ldGEsIGluZGV4KQoJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhcnRlLl9mbG9hdCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYXJ0ZS5fZmxvYXQuX3RhcmdldCkKCQkJfSB9XSB9OiBjYW4uYmFzZS5pc0FycmF5KGl0ZW0pPyAvKiBhcnJheSAqLyB7dmlldzogaHRtbC5JVEVNLCBsaXN0OiBbe3RleHQ6IGNhbi51c2VyLnRyYW5zKGNhbiwgaXRlbVswXSkrIiAtPiAifV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciBzdWIgPSBjYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCBtZXRhLCBpdGVtLnNsaWNlKDEpLCBjYiwgY2FydGUpCgkJCQljYXJ0ZS5fZmxvYXQgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FydGUuX2Zsb2F0Ll90YXJnZXQpLCBjYXJ0ZS5fZmxvYXQgPSBzdWIKCQkJCWNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgc3ViLl90YXJnZXQsIHRydWUpCgkJCX0gfTogLyogb2JqZWN0ICovIHt2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogY2FuLnVzZXIudHJhbnMoY2FuLCBpdGVtLm5hbWUpLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0ubmFtZSwgbWV0YSwgaW5kZXgpCgkJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhcnRlLl9mbG9hdCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYXJ0ZS5fZmxvYXQuX3RhcmdldCkKCQkJfSB9XSB9CgkJfSkgfV0gKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQl1aS5fdGFyZ2V0Lm9ubW91c2VvdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQl2YXIgY2FydGUgPSB7X3RhcmdldDogdWkuX3RhcmdldCwgX3BhcmVudDogcGFyZW50LCBsYXlvdXQ6IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCl9CgkJcmV0dXJuIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSwgY2FydGUKCX0sCgljYXJ0ZVJpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBsaXN0LCBjYiwgcGFyZW50KSB7CgkJdmFyIGNhcnRlID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkKCQlyZXR1cm4gY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYXJ0ZS5fdGFyZ2V0LCBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4sIGNhcnRlLl90YXJnZXQsIHRydWUpKSwgY2FydGUKCX0sCgljYXJ0ZUNsaWVudDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgbGlzdCwgY2IsIHBhcmVudCkgewoJCXZhciB1aSA9IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIG1ldGEsIGxpc3QsIGNiLCBwYXJlbnQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7bGVmdDogZXZlbnQuY2xpZW50WCwgdG9wOiBldmVudC5jbGllbnRZfSkKCX0sCgoJaW5wdXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGZvcm0sIGNiLCBidXR0b24pIHsgaWYgKCFmb3JtIHx8IGZvcm0ubGVuZ3RoID09IDApIHsgcmV0dXJuIGNiKCkgfQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGV2ZW50ID0gZXZlbnQuX2V2ZW50fHxldmVudAoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dmlldzogW2h0bWwuSU5QVVRdLCBzdHlsZToge2xlZnQ6IDAsIHRvcDogMH0sIGxpc3Q6IFsKCQkJe3ZpZXc6ICJjb250ZW50IiwgbGlzdDogW3t2aWV3OiBbaHRtbC5PUFRJT04sIGh0bWwuVEFCTEVdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGZvcm0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWl0ZW0gPSBjYW4uYmFzZS5pc1N0cmluZyhpdGVtKT8ge3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogaXRlbX06IGl0ZW0ubGVuZ3RoID4gMD8ge3R5cGU6IGh0bWwuU0VMRUNULCBuYW1lOiBpdGVtWzBdLCB2YWx1ZXM6IGl0ZW0uc2xpY2UoMSl9OiBpdGVtCgkJCQlpdGVtLnR5cGUgPSBpdGVtLnR5cGV8fChpdGVtLnZhbHVlcz8gaHRtbC5TRUxFQ1Q6IGl0ZW0ubmFtZSA9PSBodG1sLlRFWFQ/IGh0bWwuVEVYVEFSRUE6IGh0bWwuVEVYVCkKCgkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJaXRlbS5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCQkJdmFyIF9tc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFLCBhY3Rpb246IG1zZy5PcHRpb24oaHRtbC5BQ1RJT04pfSwgbXNnLCBjYW4uT3B0aW9uKCkpCgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLnRhYmxlLCBodG1sLk9QVElPTl9BUkdTLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpdGVtLm5hbWUgJiYgaXRlbS52YWx1ZSAmJiBfbXNnLk9wdGlvbihpdGVtLm5hbWUsIGl0ZW0udmFsdWUpCgkJCQkJCX0pCgkJCQkJCWNhbi5ydW4oZXZlbnQsIGNtZHMsIGNiLCB0cnVlKQoJCQkJCX0KCgkJCQkJaWYgKGl0ZW0ubmFtZSAhPSAiYWN0aW9uIiAmJiBpdGVtLm5hbWUpIHsKCQkJCQkJdGFyZ2V0LnZhbHVlID0gbXNnLk9wdGlvbihpdGVtLm5hbWUpfHxjYW4uT3B0aW9uKGl0ZW0ubmFtZSl8fHRhcmdldC52YWx1ZXx8IiIKCQkJCQl9CgkJCQkJaXRlbS5tb2RlID0gInNpbXBsZSIKCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuVVNFUk5BTUUpIHsgcmV0dXJuIH0KCQkJCQlpZiAoaXRlbS50eXBlID09IGh0bWwuUEFTU1dPUkQpIHsgcmV0dXJuIH0KCQkJCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KQoJCQkJfQoKCQkJCS8vIHJldHVybiB7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRELCBsaXN0OiBbe3RleHQ6IGl0ZW0uX3RyYW5zfHxjYW4udXNlci50cmFucyhjYW4sIGl0ZW0ubmFtZSl8fCIifV19LCB7dHlwZTogaHRtbC5URCwgbGlzdDogW2Nhbi5wYWdlLmlucHV0KGNhbiwgaXRlbSldfSBdfQoJCQkJcmV0dXJuIHt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFt7dGV4dDogaXRlbS5uYW1lfHwiIn1dfSwge3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFtjYW4ucGFnZS5pbnB1dChjYW4sIGl0ZW0pXX0gXX0KCQkJfSl9XX0sIHt2aWV3OiBodG1sLkFDVElPTn0sCgkJXX1dKQoKCQl2YXIgbGF5b3V0ID0gY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuLCB1aS5fdGFyZ2V0KQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aS5fdGFyZ2V0LCBjaGF0LkZMT0FUKQoKCQl2YXIgYWN0aW9uID0gY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBidXR0b258fFtodG1sLlNVQk1JVCwgaHRtbC5DQU5DRUxdLCB1aS5hY3Rpb24sIHsKCQkJZm9jdXM6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmZpcnN0LCBodG1sLklOUFVUX0FSR1MpWzBdLmZvY3VzKCkgfSwKCQkJY2FuY2VsOiBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5fdGFyZ2V0KSB9LAoJCQlfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgYWN0aW9uLnN1Ym1pdChldmVudCwgY2FuLCBidXR0b24pIH0sCgkJCXN1Ym1pdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBkYXRhID0ge30sIGFyZ3MgPSBbXSwgbGlzdCA9IFtdCgkJCQlsaXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkudGFibGUsIGh0bWwuT1BUSU9OX0FSR1MsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQlyZXR1cm4gaXRlbS5uYW1lICYmIGl0ZW0udmFsdWUgJiYgYXJncy5wdXNoKGl0ZW0ubmFtZSwgaXRlbS52YWx1ZSksIGRhdGFbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWUKCQkJCX0pCgkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtfaGFuZGxlOiBpY2UuVFJVRX0pCgkJCQkhY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGJ1dHRvbjogYnV0dG9uLCBkYXRhOiBkYXRhLCBsaXN0OiBsaXN0LCBhcmdzOiBhcmdzfSkgJiYgYWN0aW9uLmNhbmNlbCgpCgkJCQkvLyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmICFjYihldmVudCwgYnV0dG9uLCBkYXRhLCBsaXN0LCBhcmdzKSAmJiBhY3Rpb24uY2FuY2VsKCkKCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LCBfdGFyZ2V0OiB1aS5fdGFyZ2V0LAoJCX0pCgkJaWYgKGJ1dHRvbiA9PT0gIHRydWUpIHsgcmV0dXJuIGFjdGlvbi5zdWJtaXQoZXZlbnQsIGNhbiwgInN1Ym1pdCIpLCBhY3Rpb24gfQoKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5fdGFyZ2V0LCBodG1sLklOUFVUX0FSR1MsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWluZGV4ID09IDAgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGl0ZW0pIH0pCgkJfSkKCQlyZXR1cm4gYWN0aW9uCgl9LAoJc2VsZWN0OiBmdW5jdGlvbihldmVudCwgY2FuLCB0eXBlLCBmaWVsZHMsIGNiLCBjYnMpIHsKCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWVsZHM6IGZpZWxkc3x8InR5cGUsbmFtZSx0ZXh0In0pCgkJY2FuLnNlYXJjaChtc2csIFsiU2VhcmNoLm9uaW1wb3J0LnNlbGVjdCIsIHR5cGUsICIiLCAiIl0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLmNvcmUuTmV4dChsaXN0LCBjYiwgY2JzfHxmdW5jdGlvbigpIHsKCQkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pCgkJCX0pCgkJfSkKCX0sCgl1cGxvYWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGJlZ2luID0gbmV3IERhdGUoKQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGRvY3VtZW50LmJvZHksIFt7dmlldzogaHRtbC5VUExPQUQsIHN0eWxlOiB7bGVmdDogMCwgdG9wOiAwfSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5BQ1RJT059LCB7dmlldzogaHRtbC5PVVRQVVQsIGxpc3Q6IFt7dmlldzogInByb2dyZXNzIn1dfSwKCQkJe3ZpZXc6IGh0bWwuU1RBVFVTLCBsaXN0OiBbe3ZpZXc6IGh0bWwuU0hPV30sIHt2aWV3OiAiY29zdCJ9LCB7dmlldzogInNpemUifV19LAoJCV19XSk7IGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiwgdWkuX3RhcmdldCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkuX3RhcmdldCwgY2hhdC5GTE9BVCkKCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgWwoJCQl7dHlwZTogaHRtbC5VUExPQUQsIG9uY2hhbmdlOiBmdW5jdGlvbihldmVudCkgewoJCQkJYWN0aW9uLnNob3coZXZlbnQsIDAsIGV2ZW50LnRhcmdldC5maWxlc1swXS5zaXplLCAwKQoJCQl9fSwgY2xpLkNMT1NFLAoJCV0sIHVpLmFjdGlvbiwgewoJCQljbG9zZTogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuX3RhcmdldCkgfSwKCQkJYmVnaW46IGZ1bmN0aW9uKGV2ZW50KSB7IGJlZ2luID0gbmV3IERhdGUoKQoJCQkJdmFyIHVwbG9hZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIHVpLmFjdGlvbiwgImlucHV0W3R5cGU9ZmlsZV0iKQoJCQkJaWYgKHVwbG9hZFswXS5maWxlcy5sZW5ndGggPT0gMCkgeyByZXR1cm4gdXBsb2FkWzBdLmZvY3VzKCkgfQoKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpLCB7X2hhbmRsZTogInRydWUifSkKCQkJCW1zZy5fdXBsb2FkID0gdXBsb2FkWzBdLmZpbGVzWzBdLCBtc2cuX3Byb2dyZXNzID0gYWN0aW9uLnNob3cKCgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBodG1sLlVQTE9BRCwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pLCBjYW4uVXBkYXRlKCksIGFjdGlvbi5jbG9zZSgpCgkJCQl9KQoJCQl9LAoJCQlzaG93OiBmdW5jdGlvbiAoZXZlbnQsIHZhbHVlLCB0b3RhbCwgbG9hZGVkKSB7IG5vdyA9IG5ldyBEYXRlKCkKCQkJCXZhbHVlID09IDAgJiYgYWN0aW9uLmJlZ2luKGV2ZW50KQoKCQkJCXVpLnNob3cuaW5uZXJIVE1MID0gdmFsdWUrIiUiCgkJCQl1aS5jb3N0LmlubmVySFRNTCA9IGNhbi5iYXNlLkR1cmF0aW9uKG5vdyAtIGJlZ2luKQoJCQkJdWkuc2l6ZS5pbm5lckhUTUwgPSBjYW4uYmFzZS5TaXplKGxvYWRlZCkraWNlLlBTK2Nhbi5iYXNlLlNpemUodG90YWwpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLnByb2dyZXNzLCB7d2lkdGg6IHZhbHVlKih1aS5vdXRwdXQub2Zmc2V0V2lkdGgtMikvMTAwfSkKCQkJfSwKCQl9KTsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkuYWN0aW9uLCAiaW5wdXRbdHlwZT1maWxlXSIpWzBdLmNsaWNrKCkKCgkJcmV0dXJuIGFjdGlvbgoJfSwKCWRvd25sb2FkOiBmdW5jdGlvbihjYW4sIHBhdGgsIG5hbWUsIGV4dCkgewoJCXZhciBhID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZG9jdW1lbnQuYm9keSwgW3t0eXBlOiBodG1sLkEsIGhyZWY6IHBhdGgsIGRvd25sb2FkOiBjYW4uY29yZS5LZXlzKG5hbWUsIGV4dCl8fHBhdGguc3BsaXQoaWNlLlBTKS5wb3AoKX1dKS5maXJzdAoJCWEuY2xpY2soKSwgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgYSkKCQlyZXR1cm4gcGF0aAoJfSwKCWRvd25sb2FkczogZnVuY3Rpb24oY2FuLCB0ZXh0LCBuYW1lLCBleHQpIHsgaWYgKCF0ZXh0KSB7IHJldHVybiB9CgkJcmV0dXJuIGNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihbdGV4dF0pKSwgbmFtZSwgZXh0KQoJfSwKCWNhbWVyYTogZnVuY3Rpb24oY2FuLCBtc2csIGNiKSB7CgkJbmF2aWdhdG9yLmdldFVzZXJNZWRpYSh7dmlkZW86IHRydWV9LCBjYiwgZnVuY3Rpb24oZXJyb3IpIHsKCQkJY2FuLm1pc2MuTG9nKGVycm9yKQoJCX0pCgl9LAoJbG9jYWxTdG9yYWdlOiBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsKCQlpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgSlNPTi5zdHJpbmdpZnkodmFsdWUpKSB9CgkJcmV0dXJuIGNhbi5iYXNlLk9iaihsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpLCB7fSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL2FjdGlvbi5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgcml2ZXIgPSBjYW4uQ29uZihjaGF0LlJJVkVSKSwgc3Rvcm0gPSBjYW4uQ29uZihjaGF0LlNUT1JNKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uY29yZS5OZXh0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWl0ZW0uaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9ZKQoJCQlpdGVtLndpZHRoID0gY2FuLkNvbmZXaWR0aCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1gpCgkJCWl0ZW0uZmVhdHVyZSA9IGNhbi5iYXNlLk9iaihpdGVtLmZlYXR1cmV8fGl0ZW0ubWV0YSkKCQkJaXRlbS5pbnB1dHMgPSBjYW4uYmFzZS5PYmooaXRlbS5pbnB1dHN8fGl0ZW0ubGlzdCkKCgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBpdGVtLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBtZXRhLndpZHRoLShjYW4udXNlci5pc1dpbmRvd3M/IDIwOiAwKSkKCQkJCWNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgcml2ZXIsIHN0b3JtLCBzdWIsIG1ldGEpLCBza2lwIHx8IG5leHQoKQoJCQl9KQoJCX0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25hY3Rpb24ubGF5b3V0KGNhbiwgY2FuLm1pc2MuU2VhcmNoT3JDb25mKGNhbiwgY2hhdC5MQVlPVVQpfHxWb2xjYW5vcy5tZXRhLmFyZ3MubGF5b3V0LCB0cnVlKQoJCQljYW4ub25pbXBvcnQuX21lbnUoY2FuLCBtc2cpLCBjYW4ub25rZXltYXAuX2luaXQoY2FuKQoJCX0pCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCByaXZlciwgc3Rvcm0sIHN1YiwgbWV0YSkgeyBzdWIuX3RhcmdldC5fbWV0YSA9IG1ldGEKCQltZXRhLmlkICYmIChzdWIuX29wdGlvbi5kYXRhc2V0ID0gc3ViLl9vcHRpb24uZGF0YXNldHx8e30sIHN1Yi5fb3B0aW9uLmRhdGFzZXQuaWQgPSBtZXRhLmlkKQoKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCXJldHVybiBjYW4ucnVuKHN1Yi5yZXF1ZXN0KGV2ZW50KSwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW3JpdmVyLCBzdG9ybSwgbWV0YS5pZHx8bWV0YS5pbmRleF0sIGNtZHMpLCBjYikKCQl9LCBjYW4uX3BsdWdpbnMgPSBjYW4ubWlzYy5jb25jYXQoY2FuLCBjYW4uX3BsdWdpbnMsIFtzdWJdKQoKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX2FjdGlvbiwgW3t2aWV3OiBbaHRtbC5UQUJTLCBodG1sLkRJViwgbWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkZJRUxEU0VUX1BMVUdJTiwgc3ViLl90YXJnZXQpCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KQoJCX0sIG9ubW91c2VlbnRlcjogc3ViLl9sZWdlbmQub25tb3VzZWVudGVyLCBvbmRibGNsaWNrOiBzdWIuX2xlZ2VuZC5vbmNsaWNrfV0pCgl9LAoJX21lbnU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGlmIChjYW4udXNlci5tb2QuaXNQb2QgfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uc2V0SGVhZGVyTWVudShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0Lk1FTlVTKSwgY2FuLkNvbmYoY2hhdC5NRU5VUyl8fGNhbi5vbmFjdGlvbi5fbWVudXMpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBsaXN0KSB7CgkJCWNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25hY3Rpb24sIGxpc3RbMF1dLCBbY2FuLCBidXR0b25dKQoJCX0pCgl9LAoJX3NoYXJlOiBmdW5jdGlvbihjYW4sIHNoYXJlKSB7IHNoYXJlICYmIGNhbi5ydW4oe30sIFt3ZWIuU0hBUkUsIHNoYXJlXSwgZnVuY3Rpb24obXNnKSB7CgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fQ01EKQoJCWNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQywgbXNnLk9wdGlvbk9yU2VhcmNoKGNoYXQuVE9QSUMpKQoJCWNhbi51c2VyLnRpdGxlKG1zZy5PcHRpb25PclNlYXJjaChjaGF0LlRJVExFKSkKCgkJY2FuLkNvbmYoY2hhdC5SSVZFUiwgd2ViLlNIQVJFLCBjaGF0LlNUT1JNLCBzaGFyZSkKCQltc2cuTGVuZ3RoKCkgPiAwICYmIGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZykKCX0pIH0sCglfY21kOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG5leHQpIHsKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9DTUQpCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGNhbi5iYXNlLkNvcHkoaXRlbSwge29wdHM6IGNhbi5taXNjLlNlYXJjaChjYW4pLCBtb2RlOiAiY21kIn0pLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgewoJCQkJY2FuLnJlcXVlc3QoZXZlbnQsIHtoZWlnaHQ6IHN1Yi5Db25mSGVpZ2h0KCksIHdpZHRoOiBjYW4uQ29uZldpZHRoKCl9KQoJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIHN1Yi5faW5kZXgsIGNtZHMsIGNiKQoJCQl9CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi51c2VyLnRpdGxlKG1ldGEubmFtZSksIHNraXAgfHwgbmV4dCgpCgkJfSkKCX0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbiwgaGVpZ2h0KSB7CgkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLl90YXJnZXQsIGhlaWdodCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi6Kej5p6Q5byV5pOOIiwgX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIHBhZ2UsIG1zZywgY2FuLCBjbWRzLCBjYikgewoJdmFyIHN0b3JtID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9yb290LCBjYW4uY29yZS5LZXlzKGNoYXQuUklWRVIsIGNtZHNbMF0sIGNoYXQuU1RPUk0sIGNtZHNbMV0pKQoJaWYgKCFzdG9ybSB8fCBjbWRzLmxlbmd0aCAhPSAyKSB7IHJldHVybiBmYWxzZSB9CgoJaWYgKHN0b3JtLmluZGV4KSB7IC8vIOWRveS7pOe0ouW8lQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT01NQU5ELCBbXS5jb25jYXQoc3Rvcm0uaW5kZXgpLCBjYikKCX0gZWxzZSB7IC8vIOWRveS7pOWIl+ihqAoJCWNhbi5jb3JlLkxpc3Qoc3Rvcm0ubGlzdCwgZnVuY3Rpb24odmFsdWUpIHsKCQkJbXNnLlB1c2gobWRiLk5BTUUsIHZhbHVlLm5hbWV8fCIiKQoJCQltc2cuUHVzaChtZGIuSEVMUCwgdmFsdWUuaGVscHx8IiIpCgkJCW1zZy5QdXNoKGN0eC5JTlBVVFMsIEpTT04uc3RyaW5naWZ5KHZhbHVlLmlucHV0cykpCgkJCW1zZy5QdXNoKGN0eC5GRUFUVVJFLCBKU09OLnN0cmluZ2lmeSh2YWx1ZS5mZWF0dXJlKSkKCQkJbXNnLlB1c2goY3R4LklOREVYLCB2YWx1ZS5pbmRleHx8IiIpCgkJCW1zZy5QdXNoKGN0eC5BUkdTLCB2YWx1ZS5hcmdzfHwiW10iKQoJCQltc2cuUHVzaChjdHguU1RZTEUsIHZhbHVlLnN0eWxlfHwiIikKCQkJbXNnLlB1c2goY3R4LkRJU1BMQVksIHZhbHVlLmRpc3BsYXl8fCIiKQoJCQltc2cuUHVzaChpY2UuTVNHX0FDVElPTiwgdmFsdWUuX2FjdGlvbnx8IiIpCgkJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfQoJcmV0dXJuIHRydWUKfX0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJwYXJzZSI6IHNoeSgi6Kej5p6QIiwgewoJCSJzaG93IjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgdmFyIG5hbWUgPSBjbWRzWzFdfHwiY2FuIgoJCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUobmFtZSkKCQkJY21kcyAmJiBjbWRzWzBdICYmIFZvbGNhbm9zKG5hbWUsIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBuYW1lKX0sIFsiL3BsdWdpbi9zdG9yeS9wYXJzZS5qcyJdLCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBjYW4ucnVuLCBzdWIuT3B0aW9uID0gZnVuY3Rpb24oKSB7fSwgY2FuLmlzQ21kTW9kZSgpICYmIHN1Yi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCkKCQkJCXN1Yi5vbmFwcGVuZC5wYXJzZShzdWIsIHN1Yi5vbmFwcGVuZC5fcGFyc2Uoc3ViLCBjbWRzWzBdLCBuYW1lLCBzdWIuQ29uZkhlaWdodCgpKSwgY2FuLl9vdXRwdXQpCgkJCQljYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgIm1lbnUiLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlkZWxldGUobXNnLl9ldmVudCksIGRlbGV0ZShtc2cuX2NhbikKCQkJCQljYW4udXNlci50b2FzdChjYW4sIEpTT04uc3RyaW5naWZ5KG1zZykpCgkJCQl9KQoJCQl9KQoJCX0sCgl9LCBbInRleHQiLCAibmFtZSIsICJzaG93OmJ1dHRvbkBhdXRvIiwgImNsZWFyOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLl9yb290LkFjdGlvbi5ydW4oe30sIGNtZHMsIGNiLCB0cnVlKQoJfSksCgoJInBsdWdpbiI6IHNoeSgi5o+S5Lu2Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJfSksCgkibmZzLnNhdmUiOiBzaHkoIuS/neWtmOaWh+S7tiIsIHt9LCBbImZpbGU9aGkudHh0IiwgInRleHQ6dGV4dGFyZWE9J2hlbGxvIHdvcmxkJyIsICJzYXZlOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsKCQljYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJInNhdmUiLCBmdW5jdGlvbihjbWRzKSB7IGNhbi51c2VyLmRvd25sb2FkcyhjYW4sIGNtZHNbMV0sIGNtZHNbMF0pIH0KCQkpKQoJfSksCgkicGllIjogc2h5KCLmr5Tkvovlm74iLCB7fSwgWyJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRGlzcGxheVN0b3J5KCJwaWUuanMiKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsIDIwMCkKCQltc2cuUHVzaCgidmFsdWUiLCAzMDApCgkJbXNnLlB1c2goInZhbHVlIiwgNDAwKQoJfSksCgkiY2FuLmNvZGUuaW5uZXIuX3BsdWdpbiI6IHNoeSgi5o+S5Lu2Iiwge30sIFt7dHlwZTogImJ1dHRvbiIsIG5hbWU6ICJsaXN0IiwgYWN0aW9uOiAiYXV0byJ9LCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykge30pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsIF9mb2N1czogW10sIF9pbml0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKSwgY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05LRVlET1dOLCBmdW5jdGlvbihtc2csIG1vZGVsKSB7CgkJCWNhbi5fa2V5bGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UobXNnLl9ldmVudCwgY2FuLCBtb2RlbCwgY2FuLl9rZXlsaXN0fHxbXSwgY2FuLl9vdXRwdXQpCgkJfSkKCX0sCglfbW9kZTogewoJCW5vcm1hbDogewoJCQlqOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LnNjcm9sbEJ5KDAsIGV2ZW50LmN0cmxLZXk/IDMwMDogMzApIH0sCgkJCWs6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuc2Nyb2xsQnkoMCwgZXZlbnQuY3RybEtleT8gLTMwMDogLTMwKSB9LAoKCQkJYjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiSGVhZGVyLm9uYWN0aW9uLmJsYWNrIl0pIH0sCgkJCXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIkhlYWRlci5vbmFjdGlvbi53aGl0ZSJdKSB9LAoKCQkJZzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5Yib5bu6576k57uEIl0pIH0sCgkJCXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLua3u+WKoOW6lOeUqCJdKSB9LAoJCQl0OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJSaXZlci5vbmRldGFpbC7mt7vliqDlt6XlhbciXSkgfSwKCgkJCSIgIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNFQVJDSEZPQ1VTKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sCgkJCSI6IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkNPTU1BTkRGT0NVUyksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LAoJCQlFbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7dHlwZTogbWRiLkZPUkVBQ0gsIHdvcmQ6ICIifSkpCgkJCX0sCgkJCUVzY2FwZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgY2FuLnBhZ2UuS2V5cyhodG1sLkZJRUxEU0VUX0ZMT0FULCBodG1sLkRJVl9GTE9BVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQkJfSkKCQkJfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5Db25mKGh0bWwuTUFSR0lOX1ksIDQqaHRtbC5QTFVHSU5fTUFSR0lOKzIqaHRtbC5BQ1RJT05fSEVJR0hUK2h0bWwuQUNUSU9OX01BUkdJTikKCQljYW4uQ29uZihodG1sLk1BUkdJTl9YLCA0Kmh0bWwuUExVR0lOX01BUkdJTikKCgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc01vYmlsZSkgewoJCQl2YXIgZ3QgPSAiJiMxMDA5NTsiLCBsdCA9ICImIzEwMDk0OyI7IGZ1bmN0aW9uIHRvZ2dsZSh2aWV3KSB7IHJldHVybiAhY2FuLnNldFJpdmVyKCJkaXNwbGF5IikgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9KRUNUXV0sIGxpc3Q6IFt7dGV4dDogW2d0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSB0b2dnbGUoKT8gZ3Q6IGx0LCBjYW4ub25hY3Rpb24ucmVmcmVzaChjYW4pCgkJCX19XSkKCQl9CgoJCXRhcmdldC5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9UT1VDSCwgY2FuLnJlcXVlc3QoZXZlbnQpKSB9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJX21lbnVzOiBbCgkJW2NoYXQuTEFZT1VULCAiYXV0byIsICJ0YWJzIiwgImdyaWQiLCAiZnJlZSIsICJmbG93IiwgInBhZ2UiLCAidG9pbWFnZSJdLAoJCVtpY2UuSEVMUCwgInR1dG9yIiwgIm1hbnVhbCIsICJzZXJ2aWNlIiwgImRldm9wcyIsICJyZWZlciJdLAoJXSwKCV90cmFuczogewoJCSJsYXlvdXQiOiAi5biD5bGAIiwKCQkiYXV0byI6ICLpu5jorqTluIPlsYAiLAoJCSJmbG93IjogIua1geWKqOW4g+WxgCIsCgkJImdyaWQiOiAi572R5qC85biD5bGAIiwKCQkidGFicyI6ICLmoIfnrb7luIPlsYAiLAoJCSJmcmVlIjogIuiHqueUseW4g+WxgCIsCgkJInBhZ2UiOiAi572R6aG15biD5bGAIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoKCQkiaGVscCI6ICLluK7liqkiLAoJCSJ0dXRvciI6ICLlhaXpl6jnroDku4siLAoJCSJtYW51YWwiOiAi5L2/55So5omL5YaMIiwKCQkic2VydmljZSI6ICLmnI3liqHmiYvlhowiLAoJCSJkZXZvcHMiOiAi57yW56iL5omL5YaMIiwKCQkicmVmZXIiOiAi5Y+C6ICD5omL5YaMIiwKCX0sCglvbm1haW46IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25pbXBvcnQuX3NoYXJlKGNhbiwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgd2ViLlNIQVJFKSkgfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbikgeyBpZiAoIWNhbi51c2VyLm1vZC5pc0NtZCAmJiAhY2FuLkNvbmYoY2hhdC5UT09MKSkgeyByZXR1cm4gfQoJCWNhbi5fbmFtZXMgPSBsb2NhdGlvbi5wYXRobmFtZQoJCWNhbi5Db25mKGNoYXQuVE9PTCk/IGNhbi5jb3JlLk5leHQoY2FuLkNvbmYoY2hhdC5UT09MKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ub25pbXBvcnQuX2NtZChjYW4sIGl0ZW0sIG5leHQpCgkJfSk6IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoKSwgY3R4LkNPTU1BTkQsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLmNvcmUuTmV4dChtc2cuVGFibGUoKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ub25pbXBvcnQuX2NtZChjYW4sIGl0ZW0sIG5leHQpCgkJfSkgfSkKCX0sCglvbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQlpZiAod29yZFswXSA9PSBtZGIuUExVR0lOIHx8IHdvcmRbMF0gPT0gbWRiLkZPUkVBQ0gpIHsgY2FuLm9uZXhwb3J0LnBsdWdpbihjYW4sIG1zZywgd29yZCkgfQoJfSwKCW9uc2l6ZTogZnVuY3Rpb24oY2FuLCBtc2csIGhlaWdodCwgd2lkdGgpIHsgY2FuLkNvbmYoe2hlaWdodDogaGVpZ2h0LCB3aWR0aDogd2lkdGh9KSB9LAoJb25zdG9ybV9zZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCByaXZlciwgc3Rvcm0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7CgkJCXJldHVybiBjYW4uY29yZS5LZXlzKGNhbi5Db25mKGNoYXQuUklWRVIsIHJpdmVyKSwgY2FuLkNvbmYoY2hhdC5TVE9STSwgc3Rvcm0pKQoJCX0sIGNhbi5fYWN0aW9uLCBjYW4uX291dHB1dCkpIHsKCQkJdmFyIGNvbmYgPSBjYW4uY29yZS5WYWx1ZShjYW4uX3Jvb3QsIGNhbi5jb3JlLktleXMoY2hhdC5SSVZFUiwgcml2ZXIsIGNoYXQuU1RPUk0sIHN0b3JtKSl8fHt9CgkJCXJldHVybiBjYW4ub25hY3Rpb24ubGF5b3V0KGNhbiwgY2FuLm1pc2MuU2VhcmNoT3JDb25mKGNhbiwgY2hhdC5MQVlPVVQpfHxWb2xjYW5vcy5tZXRhLmFyZ3MubGF5b3V0fHxjb25mLmxheW91dCwgdHJ1ZSkKCQl9CgoJCWNhbi5ydW4oe30sIFtyaXZlciwgc3Rvcm1dLCBmdW5jdGlvbihtc2cpIHsgaWYgKG1zZy5MZW5ndGgoKSA+IDApIHsgcmV0dXJuIGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZykgfQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9OT1RPT0wsIGNhbi5yZXF1ZXN0KHt9LCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSkKCQl9KQoJfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uQ29uZkhlaWdodChjYW4uX3Jvb3QuX2hlaWdodCksIGNhbi5Db25mV2lkdGgoY2FuLl9yb290Ll93aWR0aCkKCQljYW4uQ29uZihodG1sLk1BUkdJTl9YLCAwLCBodG1sLk1BUkdJTl9ZLCAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsICJzaW1wbGUiKSAKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl90YXJnZXQsICJjbWQiKQoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgkJY2FuLmlzQ21kTW9kZSgpCgl9LAoKCWxheW91dDogZnVuY3Rpb24oY2FuLCBidXR0b24sIHNpbGVudCkgeyBidXR0b24gPSBidXR0b258fGljZS5BVVRPCgkJdmFyIGNiID0gY2FuLm9ubGF5b3V0W2J1dHRvbl07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGNhbiwgc2lsZW50KSkgeyByZXR1cm4gfQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBjYW4uX3RhcmdldCwgY2FuLkNvbmYoY2hhdC5MQVlPVVQpKQoJCWlmIChidXR0b24gPT0gaWNlLkFVVE8pIHsgYnV0dG9uID0gIiIgfQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX3RhcmdldCwgY2FuLkNvbmYoY2hhdC5MQVlPVVQsIGJ1dHRvbikpCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCX0sCgloZWxwOiBmdW5jdGlvbihjYW4sIGJ1dHRvbikgeyBjYW4udXNlci5vcGVuKCIvaGVscC8iK2J1dHRvbisiLnNoeSIpIH0sCglyZWZyZXNoOiBmdW5jdGlvbihjYW4pIHsKCQljYW4uX3Jvb3QuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCwgY2FuLl9yb290Ll93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCgkJdmFyIHdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1gpCgkJY2FuLmNvcmUuTGlzdChjYW4uX3BsdWdpbnMsIGZ1bmN0aW9uKHN1YikgeyB2YXIgdGFibGUgPSBjYW4uY29yZS5WYWx1ZShzdWIsIGNoYXQuX09VVFBVVF9DVVJSRU5UKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aWR0aCktKGNhbi51c2VyLmlzV2luZG93cz8gMjA6IDApKQoJCQl0YWJsZS5Db25mV2lkdGgod2lkdGgpCgkJCXRhYmxlLm9uaW1wb3J0LmxheW91dD8gdGFibGUub25pbXBvcnQubGF5b3V0KHRhYmxlKTogY2FuLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCB0YWJsZS5fbXNnLCBzdWIuX2Rpc3BsYXkpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05MQVlPVVQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWdyaWQ6IGZ1bmN0aW9uKGNhbiwgc2lsZW50KSB7CgkJdmFyIEFDVElPTl9MQVlPVVRfRk1UID0gIiBmaWVsZHNldC5BY3Rpb24uZ3JpZD5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHdpZHRoOl93aWR0aDsgaGVpZ2h0Ol9oZWlnaHQ7IH0gZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4+ZGl2Lm91dHB1dCB7IHdpZHRoOl93aWR0aDsgaGVpZ2h0Ol9oZWlnaHQ7IH0gIgoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogIm0iLCB2YWx1ZTogMn0sIHtuYW1lOiAibiIsIHZhbHVlOiAyfV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24oaGVpZ2h0LCB3aWR0aCkgeyB2YXIgbSA9IHBhcnNlSW50KGRhdGEubSl8fDIsIG4gPSBwYXJzZUludChkYXRhLm4pfHwyCgkJCQljYW4ucGFnZS5jc3MoY2FuLmJhc2UucmVwbGFjZUFsbChBQ1RJT05fTEFZT1VUX0ZNVCwgIl93aWR0aCIsICh3aWR0aC0oNCptKzEpKmh0bWwuUExVR0lOX01BUkdJTikvbSsicHgiLCAiX2hlaWdodCIsIChoZWlnaHQtKDQqbisxKSpodG1sLlBMVUdJTl9NQVJHSU4pL24rInB4IikpCgkJCX0pCgkJfSwgc2lsZW50KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgMCkKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRklFTERTRVRfUExVR0lOLCAwKQoJfSwKCWZyZWU6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCBbW2h0bWwuRElWX09VVFBVVCwgaHRtbC5GSUVMRFNFVF9QTFVHSU5dXSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCB7bGVmdDogNDAqaW5kZXgsIHRvcDogNDAqaW5kZXh9KQoJCQljYW4ub25tb3Rpb24ubW92ZShjYW4sIGl0ZW0sIHtsZWZ0OiA0MCppbmRleCwgdG9wOiA0MCppbmRleH0pCgkJfSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihjYW4pIHsKCQlyZXR1cm4gY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLkNvbmYoY2hhdC5TVE9STSksIGNhbi5fb3V0cHV0KSwgdHJ1ZQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJYXJnczogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4uY29yZS5OZXh0KGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW1todG1sLkZJRUxEU0VUX1BMVUdJTiwgaHRtbC5GT1JNX09QVElPTl1dKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCwgaW5kZXgsIGFycmF5KSB7CgkJCWl0ZW0uZGF0YXNldC5hcmdzID0gSlNPTi5zdHJpbmdpZnkoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZXx8IiIgfSkpCgkJCWNiKGl0ZW0sIG5leHQsIGluZGV4LCBhcnJheSkKCQl9KQoJfSwKCXNpemU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLk9wdGlvbihodG1sLlRPUCwgY2FuLl9vdXRwdXQub2Zmc2V0VG9wKQoJCW1zZy5PcHRpb24oaHRtbC5MRUZULCBjYW4uX291dHB1dC5vZmZzZXRMZWZ0KQoJCW1zZy5PcHRpb24oaHRtbC5XSURUSCwgY2FuLl9vdXRwdXQub2Zmc2V0V2lkdGgpCgkJbXNnLk9wdGlvbihodG1sLkhFSUdIVCwgY2FuLl9vdXRwdXQub2Zmc2V0SGVpZ2h0KQoJCW1zZy5PcHRpb24oaHRtbC5TQ1JPTEwsIGNhbi51c2VyLmlzTW9iaWxlPyBjYW4uX3RhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2Nyb2xsVG9wOiBjYW4uX291dHB1dC5zY3JvbGxUb3ApCgkJbXNnLk9wdGlvbihodG1sLk1BUkdJTl9YLCBjYW4uQ29uZihodG1sLk1BUkdJTl9YKSkKCQltc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1ksIGNhbi5Db25mKGh0bWwuTUFSR0lOX1kpKQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIGNhbi5Db25mKGNoYXQuTEFZT1VUKSB9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIG1zZywgd29yZCkgeyB2YXIgZmllbGRzID0gY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUykpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtbaHRtbC5GSUVMRFNFVF9QTFVHSU4sIGh0bWwuTEVHRU5EXV0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0uaW5uZXJIVE1MLmluZGV4T2Yod29yZFsxXSkgPT0gLTEpIHsgcmV0dXJuIH0KCgkJCXZhciBsaXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbS5uZXh0U2libGluZywgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZXx8IiIgfSkKCQkJdmFyIG1ldGEgPSBpdGVtLnBhcmVudE5vZGUuX21ldGE7IGlmICghbWV0YSkgeyByZXR1cm4gfQoKCQkJdmFyIGRhdGEgPSB7Y3R4OiAiY2FuIiwgY21kOiAiQWN0aW9uIiwKCQkJCXR5cGU6IG1kYi5QTFVHSU4sIG5hbWU6IGl0ZW0uaW5uZXJIVE1MLCB0ZXh0OiBzaHkoIui3s+i9rCIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbS5wYXJlbnROb2RlLCBodG1sLklOUFVUX0FSR1MpWzBdOyBpbnB1dCAmJiBpbnB1dC5mb2N1cygpCgkJCQl9KSwgYXJndW1lbnQ6IEpTT04uc3RyaW5naWZ5KGxpc3QpLAoJCQl9CgkJCWlmIChtZXRhLmluZGV4KSB7CgkJCQlkYXRhLmNvbnRleHQgPSAiIiwgZGF0YS5jb21tYW5kID0gbWV0YS5pbmRleAoJCQl9IGVsc2UgaWYgKG1ldGEuY21kKSB7CgkJCQlkYXRhLmNvbnRleHQgPSBtZXRhLmN0eCwgZGF0YS5jb21tYW5kID0gbWV0YS5jbWQKCQkJfSBlbHNlIHsKCQkJCXJldHVybgoJCQl9CgkJCW1zZy5QdXNoKGRhdGEsIGZpZWxkcykKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGFuZWwvZm9vdGVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25pbXBvcnQuX3RpdGxlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9zdGF0ZShjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fdG9hc3QoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2NvbW1hbmQoY2FuLCBtc2csIHRhcmdldCkKCX0sCglfdGl0bGU6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsgaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJY2FuLmNvcmUuTGlzdChtc2cucmVzdWx0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5USVRMRSwgaHRtbC5ESVYsIGl0ZW1dLCB0aXRsZTogIuiBlOezu+ermemVvyJ9XSkKCQl9KQoJfSwKCV9zdGF0ZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgewoJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5TVEFURSl8fGNhbi5Db25mKGNoYXQuU1RBVEUpLCBbIm5jbWQiLCAibnRpcCJdKSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2Nhbi5iYXNlLmpvaW4oW2NoYXQuU1RBVEUsIGl0ZW1dKSwgaHRtbC5ESVYsIGNhbi5Db25mKGl0ZW0pXSwgbGlzdDogWwoJCQkJe3RleHQ6IFtpdGVtLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbIjogIiwgaHRtbC5MQUJFTF19LCB7dGV4dDogW2Nhbi5Db25mKGl0ZW0pfHwiIiwgaHRtbC5TUEFOLCBpdGVtXX0sCgkJCV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmV4cG9ydFtpdGVtXShjYW4pIH19XSkKCQl9KQoJfSwKCV90b2FzdDogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgewoJCWNhbi50b2FzdCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBjaGF0LlRPQVNULCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25leHBvcnRbIm50aXAiXShjYW4pIH19XSkuZmlyc3QKCX0sCglfY29tbWFuZDogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgewoJCWNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIHt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJjbWQiLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKTsgaWYgKGV2ZW50LmtleSAhPSBsYW5nLkVOVEVSKSB7IHJldHVybiB9CgkJCXN3aXRjaCAoZXZlbnQudGFyZ2V0LnZhbHVlKSB7CgkJCQljYXNlIGNsaS5DTE9TRTogY2FuLmNsaSAmJiBjYW4uY2xpLmNsb3NlKCk7IGJyZWFrCgkJCQljYXNlIGNsaS5DTEVBUjogY2FuLmNsaSAmJiBjYW4uY2xpLmNsb3NlKCk7IGJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIGNhbi5jb3JlLlNwbGl0KGV2ZW50LnRhcmdldC52YWx1ZSwgaWNlLlNQKSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJCWNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpLCBjYW4ub25leHBvcnQuZmxvYXQoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBsaXN0KSB7fSwgImNsaSIsIHRydWUpCgkJCQkJfSkKCQkJfQoJCX19LCAiIiwgdGFyZ2V0LCAidGl0bGUgY21kIikKCX0sCgoJdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0aXRsZSwgY29udGVudCwgZmlsZWxpbmUsIHRpbWUpIHsgY2FuLl90aXBzID0gY2FuLl90aXBzfHxjYW4ucmVxdWVzdCgpCgkJY2FuLl90aXBzLlB1c2goe3RpbWU6IHRpbWUsIGZpbGVsaW5lOiBmaWxlbGluZSwgdGl0bGU6IHRpdGxlLCBjb250ZW50OiBjb250ZW50fSkKCQljYW4ub25pbXBvcnQuY291bnQoY2FuLCAibnRpcCIpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgY2FuLnRvYXN0LCBbdGltZSwgdGl0bGUsIGNvbnRlbnRdLmpvaW4oaWNlLlNQKSkKCX0sCgljb3VudDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGNhbi5jb3JlLktleXMoaHRtbC5TUEFOLCBuYW1lKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLmlubmVySFRNTCA9IGNhbi5Db25mKG5hbWUsIHBhcnNlSW50KGNhbi5Db25mKG5hbWUpfHwiMCIpKzErIiIpKyIiCgkJfSkKCX0sCgluY21kOiBmdW5jdGlvbihjYW4sIG1zZywgX2ZvbGxvdywgX2NtZHMpIHsgY2FuLl9jbWRzID0gY2FuLl9jbWRzfHxjYW4ucmVxdWVzdCgpCgkJY2FuLl9jbWRzLlB1c2goe3RpbWU6IGNhbi5iYXNlLlRpbWUoKSwgZm9sbG93OiBfZm9sbG93LCBjbWRzOiBfY21kc30pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm5jbWQiKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbikgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl90YXJnZXQpIH0KCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZywgbnVsbCwgY2FuLl9vdXRwdXQpIH0pIH0sCglvbnRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25pbXBvcnQudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2d9KSB9LAoJb25yZW1vdGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmltcG9ydC5uY21kLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkgfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4pIH0sCglvbmNvbW1hbmRmb2N1czogZnVuY3Rpb24oY2FuKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbImRpdi5jbWQiLCAiaW5wdXQiXSwgZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdGFyZ2V0Lm9mZnNldEhlaWdodCB9LAoJZmxvYXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgbmFtZSwgYm90dG9tKSB7IGlmIChjYW5bbmFtZV0pIHsgcmV0dXJuIGNhbltuYW1lXS5jbG9zZSgpIH0KCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCAic3RvcnkgdG9hc3QgZmxvYXQiLCB7fSwgY2FuLl9yb290Ll90YXJnZXQpCgkJdWkuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuZmlyc3QpLCBkZWxldGUoY2FuW25hbWVdKSB9CgoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgaGVpZ2h0LCB3aWR0aCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLmZpcnN0LCBodG1sLkxFRlQsIGxlZnQsIGh0bWwuVE9QLCB0b3ApCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdWkub3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC0yOCwgaHRtbC5NQVhfV0lEVEgsIHdpZHRoKQoJCX0pCgoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW2NsaS5DTE9TRSwgY2xpLlJFRlJFU0gsIHtpbnB1dDogaHRtbC5URVhULCBwbGFjZWhvbGRlcjogImZpbHRlciIsIF9pbml0OiBmdW5jdGlvbihpbnB1dCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgImtleW1hcC5mb2N1cyIsIGNhbi5yZXF1ZXN0KHt9LCB7Y2I6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyB1aS5jbG9zZSgpOyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBpY2UuU1ApIHsgaW5wdXQuZm9jdXMoKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQkJfX0pKQoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCWlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlldmVudC50YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gMCkgeyByZXR1cm4gfQoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgeyBpZiAodGQuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLkhJRERFTikKCQkJCX0gfSkKCQkJfSkKCQl9fV0sIHVpLmFjdGlvbiwga2l0LkRpY3QoY2xpLkNMT1NFLCB1aS5jbG9zZSwgY2xpLlJFRlJFU0gsIGZ1bmN0aW9uKGV2ZW50KSB7IHVpLmNsb3NlKCksIGNhbi50b2FzdC5jbGljaygpfSkpCgoJCWlmIChtc2cpIHsKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkgewoJCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IodmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpCgkJCQl9fQoJCQl9LCB1aS5vdXRwdXQpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cuUmVzdWx0KCksIHVpLm91dHB1dCkKCQl9CgkJcmV0dXJuIGNhbi5wYWdlLnN0eWxlKGNhbiwgdWkuZmlyc3QsIGJvdHRvbT8ge2JvdHRvbTogaHRtbC5BQ1RJT05fSEVJR0hULCB0b3A6ICIifToge30pLCBjYW5bbmFtZV0gPSB1aQoJfSwKCW50aXA6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fdGlwcywgZnVuY3Rpb24oKSB7fSwgIm50aXAiKQoJfSwKCW5jbWQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbmV4cG9ydC5mbG9hdChjYW4sIGNhbi5fY21kcywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpIHsKCQkJdmFyIGNtZHMgPSBjYW4uYmFzZS5PYmoobGluZS5jbWRzKTsgc3dpdGNoIChsaW5lLmZvbGxvdykgewoJCQkJY2FzZSAiY2FuLkFjdGlvbiI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQkJY2FzZSAiY2FuLkZvb3RlciI6IGNtZHMgPSBjbWRzLnNsaWNlKDIpOyBicmVhawoJCQl9CgkJCXN3aXRjaCAoY21kc1swXSkgewoJCQkJY2FzZSAid2ViLndpa2kud29yZCI6IGNtZHMgPSBjbWRzLnNsaWNlKDUpOyBicmVhawoJCQl9CgoJCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2csIHRvcCwgbGVmdCwgd2lkdGgsIGhlaWdodCkgewoJCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogY21kc1swXSwgYXJnczogY21kcy5zbGljZSgxKSwgaGVpZ2h0OiBoZWlnaHQtMTAwLCB3aWR0aDogd2lkdGh9LCBmdW5jdGlvbihzdWIpIHsKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZCwgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGNtZHNbMF0sIGNtZCwgY2IpIH0KCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX3RhcmdldCwge3RvcDogdG9wKzEwMCwgbGVmdDogbGVmdH0pCgkJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX2xlZ2VuZCwge2Rpc3BsYXk6IGh0bWwuQkxPQ0t9KQoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIHsibWF4LXdpZHRoIjogd2lkdGh9KQoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBzdWIuX3RhcmdldCwgY2hhdC5GTE9BVCkKCQkJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCQl9KQoJCX0sICJuY21kIikKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL2hlYWRlci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5vbmltcG9ydC5fdGl0bGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3N0YXRlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9hdmF0YXIoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2JhY2tncm91bmQoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fbWVudXMoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25kYWVtb24uX2luaXQoY2FuKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCV90aXRsZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKG1zZy5yZXN1bHQsIGNhbi5Db25mKGNoYXQuVElUTEUpfHxbInNoeWxpbnV4LmNvbS94L2NvbnRleHRzIl0pLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5USVRMRSwgaHRtbC5ESVYsIGl0ZW1dLCB0aXRsZTogIui/lOWbnuS4u+mhtSIsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24udGl0bGUoZXZlbnQsIGNhbikKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCB7fSwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgfSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkgewoJCQkJCWV2ZW50LnNoaWZ0S2V5PyBjYW4udXNlci5vcGVuKGxpc3RbaW5kZXhdLnBhdGgpOiBjYW4udXNlci5qdW1wcyhsaXN0W2luZGV4XS5wYXRoKQoJCQkJfSkKCQkJfX1dKQoJCX0pCgl9LAoJX3N0YXRlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LlNUQVRFKXx8Y2FuLkNvbmYoY2hhdC5TVEFURSksIFttZGIuVElNRSwgYWFhLlVTRVJOSUNLXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0gPT0gYWFhLkFWQVRBUiApIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBsaXN0OiBbe2ltZzogaWNlLlNQfV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgW2Nhbi5wYWdlLkZvcm1hdChodG1sLklNRywgY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pLCAxNjApXSkKCQkJCX19XSk7IHJldHVybgoJCQl9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBodG1sLkRJViwgKGNhbi5Db25mKGl0ZW0pfHwiIikuc2xpY2UoMCwgMTApXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbiwgaXRlbV0sIFtldmVudCwgY2FuLCBpdGVtXSkKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtID09IG1kYi5USU1FICYmIGNhbi5vbmltcG9ydC5fdGltZShjYW4sIHRhcmdldCkgfX1dKQoJCX0pCgl9LAoJX2F2YXRhcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgImRpdi5zdGF0ZS5hdmF0YXI+aW1nIiwge3NyYzogY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pfSkKCX0sCglfYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm9ubGF5b3V0LmJhY2tncm91bmQoY2FuLCBjYW4ub25leHBvcnQuYmFja2dyb3VuZChjYW4pKQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuU0VBUkNILCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6ICJjb21tYW5kLHNwYWNlLHRleHQifHxtZGIuRk9SRUFDSCwgd29yZDogZXZlbnQudGFyZ2V0LnZhbHVlfSkpCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIHNlYXJjaCIpCgkJY2FuLm9uaW1wb3J0Lm1lbnUoY2FuLCBtZGIuU0VBUkNILCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiB1aS52YWx1ZX0pKQoJCX0pCgl9LAoJX21lbnVzOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLnVzZXIubW9kLmlzUG9kPyBbY3R4LkNPTkZJR106CgkJCWNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpfHxjYW4uQ29uZihjaGF0Lk1FTlVTKSwgY2FuLm9uYWN0aW9uLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmFjdGlvbltidXR0b25dfHxmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQkJY2FuLnJ1bihldmVudCwgW2J1dHRvbl0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBjYW4udXNlci50cmFucyhjYW4sIGJ1dHRvbikpIH0pCgkJCQl9LCB7ZXZlbnQ6IGV2ZW50LCBjYW46IGNhbiwgYnV0dG9uOiBidXR0b259KQoJCQl9KQoJfSwKCglfdGltZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDUwMH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGltZShjYW4sIHRhcmdldCkgfSkKCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge2FjdGlvbjogImRhdGUiLCBzdHlsZTogeyJtaW4td2lkdGgiOiAzMDZ9LCBfaW5pdDogZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wKSB7IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHt0b3A6IHRvcCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkgfSkKCQl9fSwgdGFyZ2V0KSwgdGFyZ2V0Lm9ubW91c2VlbnRlciA9IHRhcmdldC5jbGljawoJfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmltcG9ydC50b3BpYyhjYW4pCgkJdGFyZ2V0LmlubmVySFRNTCA9IGNhbi51c2VyLnRpbWUoY2FuLCBudWxsLCAiJXcgJUg6JU06JVMiKQoJfSwKCWF2YXRhcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXZhdGFyKSB7IGlmIChjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5BVkFUQVIsIFthdmF0YXJdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5hdmF0YXIgPSBhdmF0YXIsIGNhbi5vbmltcG9ydC5fYXZhdGFyKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIHRvcGljKSB7IHRvcGljICYmIChjYW4uX3RvcGljID0gdG9waWMpCgkJdG9waWMgPSBjYW4uX3RvcGljIHx8IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVE9QSUMpIHx8IFZvbGNhbm9zLm1ldGEuYXJncy50b3BpYyB8fCAoY2FuLmJhc2UuaXNOaWdodCgpPyBjaGF0LkJMQUNLOiBjaGF0LldISVRFKQoJCS8vIGNhbi5yZXF1aXJlKFsiL2NoYXQvdG9waWMvIit0b3BpYysiLmNzcyJdKQoJCWNhbi51c2VyLnRvcGljKGNhbiwgdG9waWMpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYmFja2dyb3VuZCkgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuQkFDS0dST1VORCwgW2JhY2tncm91bmRdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZCwgY2FuLm9uaW1wb3J0Ll9iYWNrZ3JvdW5kKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCW1lbnU6IGZ1bmN0aW9uKGNhbiwgY21kcywgY2IsIHRyYW5zKSB7IGNhbi5iYXNlLmlzU3RyaW5nKGNtZHMpICYmIChjbWRzID0gW2NtZHNdKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBjbWRzWzBdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKGNtZHMuc2xpY2UoMSksIFtjbWRzWzBdXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pKSB7CgkJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0sIHRyYW5zKV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgW2l0ZW1dKQoJCQkJCS8vIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIGNtZHMpCgkJCQl9fQoKCQkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc0FycmF5KGl0ZW0pKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHJldHVybiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlLCB0cmFucykgfSkKCQkJCXJldHVybiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIGNhbi51c2VyLnRyYW5zKGNhbiwgbGlzdFswXSwgdHJhbnMpXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LnNsaWNlKDEpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhLCBpbmRleCkgewoJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtW2luZGV4KzFdLCBpdGVtKQoJCQkJCX0sIHRyYW5zKQoJCQkJfX0KCgkJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QoaXRlbSkpIHsKCQkJCXJldHVybiBpdGVtCgkJCX0KCQl9KSB9XSkuZmlyc3QKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJ0b3BpYyI6IHNoeSgi5Li76aKYIiwgewoJCSJkZW1vIjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgY21kc1swXSkgfSwKCX0sIFsidG9waWM6c2VsZWN0PXdoaXRlLGJsYWNrIiwgInJ1bjpidXR0b24iLCAiZGVtbzpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4ub25pbXBvcnQudG9waWMoY2FuLCBjbWRzWzBdKQoJfSksCgkiY29va2llIjogc2h5KCLmj5DnpLoiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm1pc2MuQ29va2llKGNhbiksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJbXNnLlB1c2goImtleSIsIGtleSksIG1zZy5QdXNoKCJ2YWx1ZSIsIHZhbHVlKQoJCX0pCgl9KSwKCSJhbGVydCI6IHNoeSgi5o+Q56S6Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLnVzZXIuYWxlcnQoY21kc1swXSkKCX0pLAoJImluZm8iOiBzaHkoIuS/oeaBryIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJImxvZyI6IHNoeSgi5pel5b+XIiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljb25zb2xlLmxvZyhjbWRzWzBdKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogW1sic2V0dGluZyIsIGNoYXQuQkxBQ0ssIGNoYXQuV0hJVEUsIGNoYXQuUFJJTlQsIGNvZGUuV0VCUEFDSywgInRvaW1hZ2UiLCBjdHguQ09ORklHXV0sCglfdHJhbnM6IHsKCQkic2VhcmNoIjogIuaQnOe0oiIsCgoJCSJzZXR0aW5nIjogIuiuvue9riIsCgkJImJsYWNrIjogIum7keiJsuS4u+mimCIsCgkJIndoaXRlIjogIueZveiJsuS4u+mimCIsCgkJInByaW50IjogIuaJk+WNsOS4u+mimCIsCgkJIndlYnBhY2siOiAi5omT5YyF6aG16Z2iIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoJCSJjb25maWciOiAi5ouJ5Y+W6YWN572uIiwKCgkJInNoYXJldXNlciI6ICLlhbHkuqvnlKjmiLciLAoJCSJzZXRuaWNrIjogIuiuvue9ruaYteensCIsCgkJInBhc3N3b3JkIjogIuS/ruaUueWvhueggSIsCgkJImxhbmd1YWdlIjogIuivreiogOWcsOWMuiIsICJjaGluZXNlIjogIuS4reaWhyIsCgkJImNsZWFyIjogIua4hemZpOiDjOaZryIsCgkJImxvZ291dCI6ICLpgIDlh7rnmbvlvZUiLAoJfSwKCW9ubWFpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmICghY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBtc2cuT3B0aW9uKGFhYS5VU0VSTklDSyl8fG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpKSB7CgkJCQltc2cuT3B0aW9uKGNoYXQuU1NPKT8gY2FuLnVzZXIuanVtcHMobXNnLk9wdGlvbihjaGF0LlNTTykpOiBjYW4udXNlci5sb2dpbihjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OTUFJTiwgbXNnKQoJCQkJfSwgbXNnLk9wdGlvbihhYWEuTE9HSU4pLCBtc2cuT3B0aW9uKCJsb2dpbi5kZXYiKSkKCQkJCXJldHVybiAvLyDnmbvlvZXorqTor4EKCQkJfQoJCQljYW4uYmFzZS5Db3B5KGNhbi5vbmFjdGlvbi5fdHJhbnMsIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuVFJBTlMpLCB7fSkpCgkJCWNhbi51c2VyLmluZm8udXNlcm5pY2sgPSBjYW4uQ29uZihhYWEuVVNFUk5JQ0spLCBjYW4udXNlci5pbmZvLmF2YXRhciA9IG1zZy5PcHRpb24oYWFhLkFWQVRBUiksIGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9IG1zZy5PcHRpb24oYWFhLkJBQ0tHUk9VTkQpCgkJCWNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBhYWEuTEFOR1VBR0UpfHxtc2cuT3B0aW9uKGFhYS5MQU5HVUFHRSkKCQkJbXNnLk9wdGlvbihuZnMuU0NSSVBUKSAmJiBjYW4ucmVxdWlyZShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihuZnMuU0NSSVBUKSksIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25hY3Rpb24uc291cmNlKGNhbiwgbXNnKSB9KSAKCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05MT0dJTiwgbXNnKSB9LCBjYW4uX291dHB1dCkKCQl9KQoJfSwKCW9uc2VhcmNoZm9jdXM6IGZ1bmN0aW9uKGNhbikgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgWyJkaXYuc2VhcmNoIiwgaHRtbC5JTlBVVF0sIGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQuZm9jdXMoKSB9KSB9LAoJb253ZWJwYWNrOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25hY3Rpb25bY29kZS5XRUJQQUNLXShtc2cuX2V2ZW50LCBjYW4pIH0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgeyBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSB9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikgfSwKCgl0aXRsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge307IGNhbi5jb3JlLkxpc3QoW2NoYXQuVElUTEUsIGNoYXQuVE9QSUMsIGNoYXQuTEFZT1VUXSwgZnVuY3Rpb24oa2V5KSB7CgkJCXZhciB2YWx1ZSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSk7IHZhbHVlICYmIChhcmdzW2tleV0gPSB2YWx1ZSkKCQl9KQoJCWNhbi51c2VyLmp1bXBzKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncywgdHJ1ZSkpCgl9LAoKCWJsYWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXdoaXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXByaW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgW2NoYXQuV0hJVEUsIGJ1dHRvbl0pLCBjYW4uc2V0Uml2ZXIoaHRtbC5IRUlHSFQsICIiKSwgY2FuLnNldEFjdGlvbihodG1sLkhFSUdIVCwgIiIpIH0sCgl3ZWJwYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IGNhbi51c2VyLnRpdGxlKCl9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uY29yZS5JdGVtKFZvbGNhbm9zLm1ldGEucGFjaywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgCgkJCQljYW4uY29yZS5MaXN0KFsiX2V2ZW50IiwgIl9jYW4iLCAiX3hociIsIGljZS5NU0dfU0VTU0lELCAiIl0sIGZ1bmN0aW9uKGtleSkgeyBkZWxldGUobXNnW2tleV0pIH0pCgkJCX0pCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgewoJCQkJdG9waWM6IGNhbi5fdG9waWMsIGxheW91dDogIGNhbi5nZXRBY3Rpb24oY2hhdC5MQVlPVVQpLAoJCQkJcml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSksCgkJCQluYW1lOiBkYXRhLm5hbWUsIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KFZvbGNhbm9zLm1ldGEucGFjayksCgkJCQlhcmdzOiAibmFtZSx0b3BpYyxsYXlvdXQscml2ZXIsc3Rvcm0iLAoJCQl9KQoKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIuaJk+WMheS4rS4uLiIsIGNvZGUuV0VCUEFDSykKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5XRUJQQUNLLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQl0b2FzdC5jbG9zZSgpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5omT5YyF5oiQ5YqfIiwgY29kZS5XRUJQQUNLKQoJCQkJY2FuLnVzZXIuZG93bmxvYWQoY2FuLCAiL3NoYXJlL2xvY2FsLyIrbXNnLlJlc3VsdCgpLCBuYW1lLCBuZnMuSFRNTCkKCQkJfSkKCQl9KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi51c2VyLnRpdGxlKCksIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCWNvbmZpZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogInNjb3BlIiwgdmFsdWU6ICJldGMvbG9jYWwuc2h5In1dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT05GSUcsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci5qdW1wcyhtc2cuUmVzdWx0KCkpIH0pCgkJfSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBsaXN0LCBjYikKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXJncykgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0uY29uY2F0KGFyZ3N8fFtdLCBbY2hhdC5SSVZFUiwgY2FuLkNvbmYoY2hhdC5SSVZFUil8fCIiLCBjaGF0LlNUT1JNLCBjYW4uQ29uZihjaGF0LlNUT1JNKXx8IiJdKSkKCX0sCgoJdXNlcm5pY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBbInNoYXJldXNlciIsICJzZXRuaWNrIiwgYWFhLlBBU1NXT1JELCBbYWFhLkxBTkdVQUdFLCBhYWEuQ0hJTkVTRSwgYWFhLkVOR0xJU0hdLCBjbGkuQ0xFQVIsIGFhYS5MT0dPVVRdKQoJfSwKCXNoYXJldXNlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRSwgbWRiLlRZUEUsIGFhYS5MT0dJTl0pCgl9LAoJc2V0bmljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogYWFhLlVTRVJOSUNLLCB2YWx1ZTogY2FuLkNvbmYoYWFhLlVTRVJOSUNLKX1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5VU0VSTklDSywgW2xpc3RbMF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBhYWEuVVNFUk5JQ0spLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaXRlbSwgY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBsaXN0WzBdKSkKCQkJCX0pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCglwYXNzd29yZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IGh0bWwuUEFTU1dPUkQsIHR5cGU6IGh0bWwuUEFTU1dPUkQsIGFjdGlvbjogaWNlLkFVVE99LAoJCQl7bmFtZTogaHRtbC5QQVNTV09SRCwgdHlwZTogaHRtbC5QQVNTV09SRCwgYWN0aW9uOiBpY2UuQVVUT30sCgkJXSwgZnVuY3Rpb24obGlzdCkgewoJCQlpZiAobGlzdFswXSAhPSBsaXN0WzFdKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sICLlr4bnoIHkuI3kuIDoh7QiKSwgdWkuZm9jdXMoKSwgdHJ1ZSB9CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5QQVNTV09SRCwgW2xpc3RbMF1dKQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCgljaGluZXNlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIGFhYS5MQU5HVUFHRSwgInpoIikgfSwKCWVuZ2xpc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwgYWFhLkxBTkdVQUdFLCAiZW4iKSB9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmJhY2tncm91bmQoZXZlbnQsIGNhbiwgIiIpLCBjYW4ub25pbXBvcnQuYXZhdGFyKGV2ZW50LCBjYW4sICIiKSB9LAoJbG9nb3V0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmxvZ291dChjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRIZWlnaHQgfSwKCXRvcGljOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdG9waWMgfSwKCWF2YXRhcjogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYXZhdGFyID09ICJ2b2lkIikgewoJCQlyZXR1cm4gIiIKCQl9CgkJcmV0dXJuIGNhbi51c2VyLmluZm8uYXZhdGFyCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9PSAidm9pZCIpIHsKCQkJcmV0dXJuICIiCgkJfQoJCXJldHVybiBjYW4udXNlci5pbmZvLmJhY2tncm91bmQKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BhbmVsL3JpdmVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ucml2ZXJfbGlzdCA9IHt9LCBjYW4uc3Rvcm1fbGlzdCA9IHt9CgkJY2FuLm9uaW1wb3J0Ll9tYWluKGNhbiwgbXNnKSwgY2FuLm9uaW1wb3J0Ll9tZW51KGNhbiwgbXNnKQoKCQl2YXIgc2VsZWN0OyBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCXJldHVybiBjYW4ub25pbXBvcnQuX3JpdmVyKGNhbiwgaXRlbSwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkoaW5kZXggPT0gMCB8fCBpdGVtLmhhc2ggPT0gY2FuLl9tYWluX3JpdmVyKSAmJiAoc2VsZWN0ID0gdGFyZ2V0KQoJCQl9KQoJCX0pKSwgc2VsZWN0ICYmIHNlbGVjdC5jbGljaygpCgl9LAoJX21haW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJLy8gaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IGNhbi5fbWFpbl9yaXZlciA9ICJwcm9kdWN0IiwgY2FuLl9tYWluX3N0b3JtID0gIm9mZmljZSIgfQoJCS8vIGlmIChjYW4udXNlci5pc1dlaVhpbikgeyBjYW4uX21haW5fcml2ZXIgPSAic2VydmljZSIsIGNhbi5fbWFpbl9zdG9ybSA9ICJ3eCIgfQoJCWNhbi5fbWFpbl9yaXZlciA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuUklWRVIpfHxtc2cuT3B0aW9uKGljZS5NU0dfUklWRVIpfHxWb2xjYW5vcy5tZXRhLmFyZ3Mucml2ZXJ8fGNhbi5fbWFpbl9yaXZlcnx8InByb2plY3QiCgkJY2FuLl9tYWluX3N0b3JtID0gY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2hhdC5TVE9STSl8fG1zZy5PcHRpb24oaWNlLk1TR19TVE9STSl8fFZvbGNhbm9zLm1ldGEuYXJncy5zdG9ybXx8Y2FuLl9tYWluX3N0b3JtfHwic3R1ZGlvIgoJfSwKCV9tZW51OiBmdW5jdGlvbihjYW4sIG1zZykgeyBpZiAoY2FuLnVzZXIubW9kLmlzUG9kfHxjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5zZXRIZWFkZXJNZW51KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpLCBjYW4uQ29uZihjaGF0Lk1FTlVTKXx8Y2FuLm9uZGV0YWlsLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmRldGFpbCwgYnV0dG9uXSwgW2V2ZW50LCBjYW4sIGJ1dHRvbiwgY2FuLkNvbmYoY2hhdC5SSVZFUiksIGNhbi5Db25mKGNoYXQuU1RPUk0pXSkKCQl9KQoJfSwKCV9jYXJ0ZTogZnVuY3Rpb24oY2FuLCBsaXN0LCByaXZlciwgc3Rvcm0pIHsgaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IHJldHVybiB9CgkJaWYgKGNhbi5jb3JlLlZhbHVlKGNhbi5fcm9vdCwgY2FuLmNvcmUuS2V5cyhjaGF0LlJJVkVSLCByaXZlcikpKSB7IHJldHVybiB9CgoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtb2R1bGUpIHsKCQkJbW9kdWxlW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pCgkJfSkKCX0sCglfcml2ZXI6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgY2IpIHsKCQlyZXR1cm4ge3RleHQ6IFttZXRhLm5hbWUsIGh0bWwuRElWLCBodG1sLklURU1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uc3Rvcm0oZXZlbnQsIGNhbiwgbWV0YS5oYXNoKQoKCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5fY2FydGUoY2FuLCBjYW4ub25kZXRhaWwubGlzdCwgbWV0YS5oYXNoKQoKCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCWNhbi5yaXZlcl9saXN0W21ldGEuaGFzaF0gPSB0YXJnZXQsIGNiKHRhcmdldCkKCQl9fQoJfSwKCV9zdG9ybTogZnVuY3Rpb24oY2FuLCBtZXRhLCByaXZlcikgewoJCXJldHVybiB7dGV4dDogW21ldGEubmFtZSwgaHRtbC5ESVYsIGh0bWwuSVRFTV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFjdGlvbi5hY3Rpb24oZXZlbnQsIGNhbiwgcml2ZXIsIG1ldGEuaGFzaCkKCgkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25pbXBvcnQuX2NhcnRlKGNhbiwgY2FuLm9uZGV0YWlsLnN1Ymxpc3QsIHJpdmVyLCBtZXRhLmhhc2gpCgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJY2FuLnN0b3JtX2xpc3RbY2FuLmNvcmUuS2V5cyhyaXZlciwgbWV0YS5oYXNoKV0gPSB0YXJnZXQKCQl9fQoJfSwKCWRpc3BsYXk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgc2hvdyA9IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCk7IGNhbi5vbmxheW91dC5faW5pdChjYW4pOyByZXR1cm4gc2hvdwoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVOR0lORSwge2hlbHA6ICLop6PmnpDlvJXmk44iLCBfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJdmFyIGxpc3QgPSBjYW4uX3Jvb3Qucml2ZXIKCWNtZHMubGVuZ3RoID09IDAgJiYgY2FuLmNvcmUuSXRlbVNvcnQobGlzdCwgIm9yZGVyIiwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCWlmIChjYW4uY29yZS5JdGVtKHZhbHVlLnN0b3JtKS5sZW5ndGggPT0gMCkgeyByZXR1cm4gfQoJCW1zZy5QdXNoKHtoYXNoOiBrZXksIG5hbWU6IGNhbi51c2VyLmxhbmd1YWdlKGNhbikgPT0gImVuIj8ga2V5OiB2YWx1ZS5uYW1lfSkgLy8g576k57uE5YiX6KGoCgl9KTsgaWYgKGNtZHMubGVuZ3RoICE9IDEgJiYgY21kc1sxXSAhPSBjaGF0LlNUT1JNKSB7IHJldHVybiBmYWxzZSB9CgoJdmFyIHJpdmVyID0gbGlzdFtjbWRzWzBdXTsgaWYgKCFyaXZlcikgeyByZXR1cm4gZmFsc2UgfQoJY2FuLmNvcmUuSXRlbVNvcnQocml2ZXIuc3Rvcm0sICJvcmRlciIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQltc2cuUHVzaCh7aGFzaDoga2V5LCBuYW1lOiBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IGtleTogdmFsdWUubmFtZX0pIC8vIOW6lOeUqOWIl+ihqAoJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKTsgcmV0dXJuIHRydWUKfX0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwgbGlzdDogWyJjcmVhdGUiLCAic2hhcmUiLCAicmVmcmVzaCJdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLnJ1bih7fSwgW10sIGZ1bmN0aW9uKG1zZykgeyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX1JJVkVSKSA9PSAiX3NoYXJlIikgeyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2csIG51bGwsIGNhbi5fb3V0cHV0KSwgY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4uQ29uZihjdHguQUNUSU9OKXx8Y2FuLm9uYWN0aW9uLmxpc3QpCgkJCWlmIChjYW4udXNlci5tb2QuaXNQb2QgfHxjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl90YXJnZXQsIHRydWUpCgkJfSkKCX0sCglvbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQlpZiAod29yZFswXSA9PSBjaGF0LlNUT1JNKSB7IGNhbi5vbmV4cG9ydC5zdG9ybShjYW4sIG1zZywgd29yZCkgfQoJfSwKCW9uc3Rvcm1fc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgcml2ZXIsIHN0b3JtKSB7CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGN0eC5BUkdTLCBKU09OLnN0cmluZ2lmeSh7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSkgfQoJfSwKCW9uYWN0aW9uX3RvdWNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuKQoJfSwKCW9uYWN0aW9uX25vdG9vbDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5vbmRldGFpbFsi5re75Yqg5bel5YW3Il0obXNnLl9ldmVudCwgY2FuLCAi5re75Yqg5bel5YW3Iiwgcml2ZXIsIHN0b3JtKQoJfSwKCgljYXJ0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbGlzdCwgY2IpIHsKCQljYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgbGlzdCwgY2IpCgl9LAoJc3Rvcm06IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyKSB7IGNhbi5zdWJsaXN0ID0gY2FuLnN1Ymxpc3R8fHt9CgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9JVEVNLCBjYW4ucml2ZXJfbGlzdFtyaXZlcl0pCgkJdmFyIGxpc3QgPSBjYW4uc3VibGlzdFtyaXZlcl07IGlmIChsaXN0KSB7IHJldHVybiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCkgfQoKCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuU1RPUk1dLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHNlbGVjdCA9IDA7IGxpc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IG1zZy5UYWJsZShmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQkJcml2ZXIgPT0gY2FuLl9tYWluX3JpdmVyICYmIGl0ZW0uaGFzaCA9PSBjYW4uX21haW5fc3Rvcm0gJiYgKHNlbGVjdCA9IGluZGV4KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fc3Rvcm0oY2FuLCBpdGVtLCByaXZlcikKCQkJfSkgfV0pLmZpcnN0LCBsaXN0LmNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgbGlzdC5jaGlsZHJlbltzZWxlY3RdLmNsaWNrKCkKCgkJCWV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4uX291dHB1dC5pbnNlcnRCZWZvcmUobGlzdCwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCQljYW4uc3VibGlzdFtyaXZlcl0gPSBsaXN0CgkJfSkKCX0sCglhY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnN1Ymxpc3Rbcml2ZXJdLCB7ZGlzcGxheTogaHRtbC5CTE9DS30pCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9JVEVNLCBjYW4ucml2ZXJfbGlzdFtyaXZlcl0pCgkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfSVRFTV0sIGNhbi5zdG9ybV9saXN0W2Nhbi5jb3JlLktleXMocml2ZXIsIHN0b3JtKV0pCgoJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25sYXlvdXQuX2luaXQoY2FuKQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNUT1JNX1NFTEVDVCwgY2FuLnJlcXVlc3QoZXZlbnQsIHsKCQkJCXJpdmVyOiBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIHN0b3JtOiBjYW4uQ29uZihjaGF0LlNUT1JNLCBzdG9ybSksCgkJCX0pKQoJCX0pCgl9LAoKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnRyYW5zKGNhbiwgeyJwdWJsaWMiOiAi5YWs5byA576kIiwgInByb3RlY3RlZCI6ICLlhoXpg6jnvqQiLCAicHJpdmF0ZSI6ICLnp4HmnInnvqQifSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbCgkJCXtuYW1lOiBtZGIuVFlQRSwgdmFsdWVzOiBbY2hhdC5QVUJMSUMsIGNoYXQuUFJPVEVDVEVELCBjaGF0LlBSSVZBVEVdLCBfdHJhbnM6ICLnsbvlnosifSwKCQkJe25hbWU6IG1kYi5OQU1FLCB2YWx1ZTogImhpIiwgX3RyYW5zOiAi576k5ZCNIn0sIHtuYW1lOiBtZGIuVEVYVCwgdmFsdWU6ICJoZWxsbyIsIF90cmFuczogIueugOS7iyJ9LAoJCV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncywgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IG1zZy5SZXN1bHQoKX0pIH0pCgkJfSkKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBjYW4uQ29uZihjaGF0LlNUT1JNKX1dLCBbbWRiLlRZUEUsIGNoYXQuU1RPUk1dKQoJfSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgYXJncyA9IHtyaXZlcjogY2FuLkNvbmYoY2hhdC5SSVZFUiksIHN0b3JtOiBjYW4uQ29uZihjaGF0LlNUT1JNKSwgdG9waWM6IGNhbi5nZXRIZWFkZXIoY2hhdC5UT1BJQyksIGxheW91dDogY2FuLmdldEFjdGlvbihjaGF0LkxBWU9VVCl9CgkJaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uKSB7IGxvY2FsU3RvcmFnZS5zZXRJdGVtKGN0eC5BUkdTLCBKU09OLnN0cmluZ2lmeShhcmdzKSkgfQoJCWNhbi5taXNjLlNlYXJjaChjYW4sIGFyZ3MpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuiPnOWNleS6pOS6kiIsCglsaXN0OiBbIuWFseS6q+e+pOe7hCIsICLmt7vliqDlupTnlKgiLCAi5re75Yqg6K6+5aSHIiwgIua3u+WKoOeUqOaItyIsICLph43lkb3lkI3nvqTnu4QiLCAi5Yig6Zmk576k57uEIl0sCglzdWJsaXN0OiBbIuWFseS6q+W6lOeUqCIsICLmt7vliqDlt6XlhbciLCAi5L+d5a2Y5Y+C5pWwIiwgIumHjeWRveWQjeW6lOeUqCIsICLliKDpmaTlupTnlKgiXSwKCS8vIF9tZW51czogWwoJLy8gCVsiY3JlYXRlIiwgIuWIm+W7uue+pOe7hCIsICLmt7vliqDlupTnlKgiLCAi5re75Yqg5bel5YW3IiwgIua3u+WKoOiuvuWkhyIsICLliJvlu7rnqbrpl7QiXSwKCS8vIAlbInNoYXJlIiwgIuWFseS6q+e+pOe7hCIsICLlhbHkuqvlupTnlKgiLCAi5YWx5Lqr5bel5YW3IiwgIuWFseS6q+iuvuWkhyIsICLorr/pl67nqbrpl7QiXSwKCS8vIF0sCgoJIuWIm+W7uue+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKSB9LAoJIuWFseS6q+e+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW3tuYW1lOiBjaGF0LlRJVExFLCB2YWx1ZTogcml2ZXJ9XSwgW21kYi5UWVBFLCBjaGF0LlJJVkVSXSkKCX0sCgki5re75Yqg5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgeyBjYW4ub25kZXRhaWwuY3JlYXRlKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIH0sCgki5YWx5Lqr5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW3tuYW1lOiBjaGF0LlRJVExFLCB2YWx1ZTogc3Rvcm19XSwgW21kYi5UWVBFLCBjaGF0LlNUT1JNXSkKCX0sCgki5re75Yqg5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgY3R4LkNPTU1BTkQsICJpbmRleCIsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuSEFTSCwgc3Rvcm1dLmNvbmNhdChbd2ViLlNQQUNFLCAiIiwgY3R4LklOREVYLCBpdGVtWzBdXSksIGZ1bmN0aW9uKG1zZykgeyBuZXh0KCkgfSkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkgfSkKCX0sCgki5YWx5Lqr5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgbWRiLlBMVUdJTiwgIm5hbWUsaW5kZXgsYXJncyIsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLnVzZXIuc2hhcmUoY2FuLCBjYW4ucmVxdWVzdChldmVudCksIFtyaXZlciwgY3R4LkFDVElPTiwgY2hhdC5TSEFSRSwgbWRiLlRZUEUsIGNoYXQuRklFTEQsCgkJCQltZGIuTkFNRSwgaXRlbVsxXSwgbWRiLlRFWFQsIGl0ZW1bMl0sIGNoYXQuVElUTEUsIGl0ZW1bMF0sIGNoYXQuUklWRVIsIHJpdmVyLCBjaGF0LlNUT1JNLCBzdG9ybSwKCQkJXSkKCQl9KQoJfSwKCgki5re75Yqg6K6+5aSHIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLnNlbGVjdChldmVudCwgY2FuLCB3ZWIuU1BBQ0UsICJ0eXBlLG5hbWUsdGV4dCIsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0Lk5PREVTLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuVFlQRSwgaXRlbVswXSwgbWRiLk5BTUUsIGl0ZW1bMV1dLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCgki5YWx5Lqr6K6+5aSHIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuSU5WSVRFLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51c2VyLnRvYXN0U2NyaXB0KGNhbiwgbXNnLlJlc3VsdCgpLCBidXR0b24pIH0pCgl9LAoJIuWIm+W7uuepuumXtCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7YWN0aW9uOiBidXR0b259KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogIm5hbWUiLCB2YWx1ZTogImhpIn0sIHtuYW1lOiAicmVwb3MifSwge25hbWU6ICJ0ZW1wbGF0ZSJ9XSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjbGkuU1RBUlQsIGFyZ3MuY29uY2F0KGNoYXQuUklWRVIsIHJpdmVyKSwgZnVuY3Rpb24obXNnKSB7CgkJCQl2YXIgbGluayA9IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogY2FuLmNvcmUuS2V5cyhjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuUE9EKSwgbXNnLk9wdGlvbihtZGIuTkFNRSkpfSkKCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgbGluayksIGNhbi51c2VyLm9wZW4obGluaykKCQkJfSkKCQl9KQoJfSwKCSLorr/pl67nqbrpl7QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi51c2VyLnNlbGVjdCh7cml2ZXI6IHJpdmVyfSwgY2FuLCB3ZWIuU1BBQ0UsICJ0aW1lLHR5cGUsbmFtZSx0ZXh0IikKCX0sCgoJIua3u+WKoOeUqOaItyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgY2hhdC5VU0VSLCAidXNlcm5pY2ssdXNlcm5hbWUiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5VU0VSLCBjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBhYWEuVVNFUk5BTUUsIGl0ZW1bMF1dLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCgki6YeN5ZG95ZCN576k57uEIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlcikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHJpdmVyfSksIG1kYi5NT0RJRlksIFttZGIuTkFNRSwgZGF0YS5uYW1lXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXJ9KSB9KQoJCX0pCgl9LAoJIuWIoOmZpOe+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogcml2ZXJ9KSwgbWRiLlJFTU9WRSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6ICIiLCBzdG9ybTogIiJ9KSB9KQoJfSwKCgki5L+d5a2Y5Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4uZ2V0QWN0aW9uKGN0eC5BUkdTLCBmdW5jdGlvbihpdGVtLCBuZXh0LCBpbmRleCwgYXJyYXkpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9LCB7aGFzaDogc3Rvcm0sIGlkOiBpdGVtLmRhdGFzZXQuaWR9KQoJCQl2YXIgdG9hc3QgPSBjYW4udXNlci50b2FzdChjYW4sIChpbmRleCsxKStpY2UuUFMrYXJyYXkubGVuZ3RoLCBidXR0b24sIDEwMDAwLCAoaW5kZXgrMSkqMTAwL2FycmF5Lmxlbmd0aCkKCQkJY2FuLnJ1bihtc2csIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLk1PRElGWSwgY3R4LkFSR1MsIGl0ZW0uZGF0YXNldC5hcmdzXSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQl0b2FzdC5jbG9zZSgpLCBuZXh0KCksIGluZGV4ID09IGFycmF5Lmxlbmd0aC0xICYmIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIGJ1dHRvbikKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCgki6YeN5ZG95ZCN5bqU55SoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUVdLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHtoYXNoOiBzdG9ybX0pLCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5NT0RJRlldLmNvbmNhdChhcmdzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KQoJCQl9KQoJCX0pCgl9LAoJIuWIoOmZpOW6lOeUqCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHN0b3JtfSksIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLlJFTU9WRV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogIiJ9KQoJCX0pCgl9LAoKCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci50cmFucyhjYW4sIHsicHVibGljIjogIuWFrOW8gOW6lOeUqCIsICJwcm90ZWN0ZWQiOiAi576k57uE5bqU55SoIiwgInByaXZhdGUiOiAi5Liq5Lq65bqU55SoIn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWwoJCQl7bmFtZTogbWRiLlRZUEUsIHZhbHVlczogW2NoYXQuUFVCTElDLCBjaGF0LlBST1RFQ1RFRCwgY2hhdC5QUklWQVRFXSwgX3RyYW5zOiAi57G75Z6LIn0sCgkJCXtuYW1lOiBtZGIuTkFNRSwgdmFsdWU6ICJoaSIsIF90cmFuczogIuWQjeensCJ9LCB7bmFtZTogbWRiLlRFWFQsIHZhbHVlOiAiaGVsbG8iLCBfdHJhbnM6ICLnroDku4sifSwKCQldLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLkNSRUFURV0uY29uY2F0KGFyZ3MpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBtc2cuUmVzdWx0KCl9KQoJCQl9KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCgl3aWR0aDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRXaWR0aCB9LAoJc3Rvcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7CgkJdmFyIGZpZWxkcyA9IChtc2cuT3B0aW9uKGljZS5NU0dfRklFTERTKXx8ImN0eCxjbWQsdHlwZSxuYW1lLHRleHQiKS5zcGxpdCgiLCIpCgkJY2FuLmNvcmUuSXRlbShjYW4uX3Jvb3Qucml2ZXIsIGZ1bmN0aW9uKHJpdmVyLCB2YWx1ZSkgewoJCQljYW4uY29yZS5JdGVtKHZhbHVlLnN0b3JtLCBmdW5jdGlvbihzdG9ybSwgaXRlbSkgewoJCQkJaWYgKHdvcmRbMV0gIT0gIiIgJiYgd29yZFsxXSAhPSBzdG9ybSAmJiB3b3JkWzFdICE9IGl0ZW0ubmFtZSkgeyByZXR1cm4gfQoKCQkJCXZhciBkYXRhID0ge2N0eDogImNhbiIsIGNtZDogIlN0b3JtIiwKCQkJCQl0eXBlOiByaXZlciwgbmFtZTogc3Rvcm0sIHRleHQ6IHNoeSgi6Lez6L2sIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJY2FuLm9uYWN0aW9uLmFjdGlvbihldmVudCwgY2FuLCByaXZlciwgc3Rvcm0pCgkJCQkJfSksCgkJCQl9OyBjYW4uY29yZS5MaXN0KGZpZWxkcywgZnVuY3Rpb24oa2V5KSB7IG1zZy5QdXNoKGtleSwgZGF0YVtrZXldfHwiIikgfSkKCQkJfSkKCQl9KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGFuZWwvc2VhcmNoLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgbGlzdCwgY2IsIHRhcmdldCkgewoJCWNhbi5fZm9yZWFjaCA9ICIqIgoJCWNhbi5fZm9yZWFjaCA9ICJjb21tYW5kLHNwYWNlLHRleHQiCgkJY2FuLmxpc3QgPSBtc2cuVGFibGUoKSwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpCgkJdmFyIHRhYmxlID0gY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIGluZGV4KzEpCgkJCXJldHVybiB7dGV4dDogW2tleSA9PSBtZGIuVEVYVCAmJiBjYW4uYmFzZS5pc0Z1bmMobGluZS50ZXh0KSAmJiBsaW5lLnRleHQuaGVscCB8fCB2YWx1ZSwgaHRtbC5URF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb25bY2FuLnR5cGUgPT0gY2FuLl9mb3JlYWNofHxldmVudC5jdHJsS2V5PyBjaGF0LlBMVUdJTjogbWRiLlNFTEVDVF0oZXZlbnQsIGNhbiwgaW5kZXgpIAoJCQl9fQoJCX0sIGNhbi51aS5jb250ZW50LCBjYW4uY29yZS5MaXN0KChtc2cuT3B0aW9uKCJzb3J0Iil8fCJjdHgsY21kLHR5cGUsbmFtZSx0ZXh0Iikuc3BsaXQoaWNlLkZTKSwgZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4gbGlzdC5pbmRleE9mKGl0ZW0pCgkJfSkpOyB0YWJsZSAmJiBjYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLmRpc3BsYXksIHRhYmxlLm9mZnNldFdpZHRoKQoKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5BLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLm9wZW4oaXRlbS5ocmVmKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpIH0KCQl9KSwgY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuKQoKCQljYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSwgW10pLmNvbmNhdCh7bmFtZTogInNlbGVjdGVkIiwgdmFsdWU6ICIwIn0pKQoJCW1zZy5MZW5ndGgoKSA9PSAxICYmIGNhbi51aS5wcm9maWxlLmlubmVySFRNTCA9PSAiIiAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgaHRtbC5URClbMF0uY2xpY2soKQoJfSwKCV93b3JkOiBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgZmllbGRzKSB7IGNhbi50eXBlID0gY21kc1swXQoJCXZhciBjYiA9IGNhbi5vbmFjdGlvbltjbWRzWzFdXTsgaWYgKGNiKSB7IGNiKHt9LCBjYW4pOyByZXR1cm4gfQoKCQl2YXIgcmVzID0gY2FuLnJlcXVlc3Qoe30sIHsKCQkJd29yZDogY21kcywgZmllbGRzOiBmaWVsZHMuam9pbihpY2UuRlMpLCBzb3J0OiBtc2cuT3B0aW9uKCJzb3J0IiksCgkJCXJpdmVyOiBtc2cuT3B0aW9uKGNoYXQuUklWRVIpLCBpbmRleDogbXNnLk9wdGlvbihtZGIuSU5ERVgpLAoJCX0pCgoJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OU0VBUkNILCByZXMpCgkJY2FuLnJ1bihyZXMsIGNtZHMsIGZ1bmN0aW9uKHJlcykgeyBjYW4ub25pbXBvcnQuX2luaXQoY2FuLCByZXMsIGZpZWxkcykgfSkKCQljYW4ub25tb3Rpb24uc2hvdyhjYW4pLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgY2FuLnVpLndvcmQpCgkJfSkKCX0sCgoJc2VsZWN0OiBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsgY2FuLnVpLndvcmQudmFsdWUgPSBjbWRzWzFdCgkJdmFyIGZpZWxkcyA9IChjbWRzWzJdfHxtc2cuT3B0aW9uKGljZS5NU0dfRklFTERTKXx8ImN0eCxjbWQsdHlwZSxuYW1lLHRleHQiKS5zcGxpdChpY2UuRlMpCgkJY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3RoOiBmaWVsZHN9XSksIGNhbi5jYiA9IGZ1bmN0aW9uKCkgewoJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGNhbi5vbmV4cG9ydC5zZWxlY3QoY2FuKSksIGNhbi5vbm1vdGlvbi5oaWRlKGNhbikKCQl9CgoJCWNhbi5pbnB1dCA9IGZ1bmN0aW9uKGV2ZW50LCB3b3JkKSB7IGNtZHNbMV0gPSB3b3JkfHxjbWRzWzFdCgkJCWNhbi5vbmltcG9ydC5fd29yZChjYW4sIG1zZywgY21kcywgZmllbGRzKQoJCX0sIGNhbi5vbmltcG9ydC5fd29yZChjYW4sIG1zZywgY21kcywgZmllbGRzKQoKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2csIHRvcCwgbGVmdCwgd2lkdGgsIGhlaWdodCkgewoJCQljYW4uQ29uZkhlaWdodChoZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQtMipodG1sLlBMVUdJTl9NQVJHSU4pCgkJCWNhbi5Db25mV2lkdGgod2lkdGgtMipodG1sLlBMVUdJTl9NQVJHSU4pCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl90YXJnZXQsIHt0b3A6IHRvcCwgbGVmdDogbGVmdH0pCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvZmlsZSwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmk43kvZwiLCBsaXN0OiBbY2xpLkNMT1NFLCBjbGkuQ0xFQVIsIGNsaS5ET05FXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX3RhcmdldCksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4uQ29uZihodG1sLkFDVElPTil8fGNhbi5vbmFjdGlvbi5saXN0KQoJCWNhbi51aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbCgkJCXtpbnB1dDogWyJ3b3JkIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCQlpZiAoZXZlbnQuY3RybEtleSkgewoJCQkJCWlmIChldmVudC5rZXkgPT0gIjAiKSB7CgkJCQkJCWNhbi5vbmFjdGlvbi5jbGVhcihldmVudCwgY2FuKQoJCQkJCX0KCQkJCQlpZiAoIjEiIDw9IGV2ZW50LmtleSAmJiBldmVudC5rZXkgPD0gIjkiKSB7CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyLCBpbmRleCkgewoJCQkJCQkJaWYgKGluZGV4KzEgPT0gZXZlbnQua2V5KSB7CgkJCQkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgewoJCQkJCQkJCQlpbmRleCA9PSAwICYmIHRkLmNsaWNrKCkKCQkJCQkJCQl9KQoJCQkJCQkJfQoJCQkJCQl9KQoJCQkJCQlyZXR1cm4KCQkJCQl9CgkJCQl9CgkJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZShjYW4pIH0KCgkJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCQkJaWYgKGV2ZW50LnNoaWZ0S2V5KSB7IHZhciBmaXJzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSKVsxXQoJCQkJCQlyZXR1cm4gY2FuLm9uYWN0aW9uW2Nhbi50eXBlID09IGNhbi5fZm9yZWFjaD8gY2hhdC5QTFVHSU46IGh0bWwuU0VMRUNUXShldmVudCwgY2FuLCBmaXJzdC5kYXRhc2V0LmluZGV4KQoJCQkJCX0KCQkJCQlpZiAoZXZlbnQuY3RybEtleSkgeyByZXR1cm4gY2FuLm9uYWN0aW9uW2NsaS5ET05FXShldmVudCwgY2FuKSB9CgkJCQkJcmV0dXJuIGNhbi5pbnB1dChldmVudCwgZXZlbnQudGFyZ2V0LnZhbHVlKQoJCQkJfQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtodG1sLlRCT0RZLCBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJCQl2YXIgaGFzID0gZmFsc2U7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgewoJCQkJCQloYXMgPSBoYXMgfHwgdGQuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xCgkJCQkJfSksIGNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURERU4sICFoYXMpCgkJCQl9KQoJCQl9XX0sCgkJCWNoYXQuQ09OVEVOVCwgaHRtbC5TVEFUVVMsIHt2aWV3OiBbY2hhdC5ESVNQTEFZLCBodG1sLlRBQkxFXX0sIGNoYXQuUFJPRklMRSwKCQldKSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5kaXNwbGF5LCBjaGF0LkNPTlRFTlQpCgl9LAoJb25vcGVuc2VhcmNoOiBmdW5jdGlvbihjYW4sIG1zZywgdHlwZSwgd29yZCkgeyBjYW4ub25pbXBvcnQuc2VsZWN0KGNhbiwgbXNnLCBbdHlwZXx8Y2FuLl9mb3JlYWNoLCB3b3JkfHwiIl0pIH0sCgoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2ZpbGUpIH0sCglkb25lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5iYXNlLmlzRnVuYyhjYW4uY2IpICYmIGNhbi5jYigpIH0sCgljbG9zZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24uaGlkZShjYW4pIH0sCgoJc2VsZWN0OiBmdW5jdGlvbihldmVudCwgY2FuLCBpbmRleCkgeyB2YXIgbGluZSA9IGNhbi5saXN0W2luZGV4XQoJCWlmIChjYW4uYmFzZS5pc0Z1bmMobGluZS50ZXh0KSkgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGUoY2FuKSwgbGluZS50ZXh0KGV2ZW50KSB9CgoJCXZhciBmaWVsZHMgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5USCwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5pbm5lclRleHQgfSkKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0ZDogY2FuLmNvcmUuTGlzdChmaWVsZHMsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGxpbmVbaXRlbV0gfSksIGRhdGE6IHtpbmRleDogaW5kZXh9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBldmVudC50YXJnZXQucGFyZW50Tm9kZSkKCQkJY2FuLlN0YXR1cygic2VsZWN0ZWQiLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5UUikubGVuZ3RoLTEpCgkJfX1dKSwgY2FuLlN0YXR1cygic2VsZWN0ZWQiLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5UUikubGVuZ3RoLTEpCgl9LAoKCXBsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaW5kZXgpIHsgdmFyIGxpbmUgPSBjYW4ubGlzdFtpbmRleF0KCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGxpbmUudGV4dCkpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRlKGNhbiksIGxpbmUudGV4dChldmVudCkgfQoJCWlmIChsaW5lLmN0eCA9PSAid2ViLndpa2kiICYmIGxpbmUuY21kID09ICJ3b3JkIikgeyByZXR1cm4gfQoJCWlmIChjYW4ucGFnZS50YWdpcyhodG1sLkEsIGV2ZW50LnRhcmdldCkpIHsgcmV0dXJuIH0KCgkJdmFyIGNtZCA9IGxpbmUuY21kID09IGN0eC5DT01NQU5EPyBjYW4uY29yZS5LZXlzKGxpbmUudHlwZSwgbGluZS5uYW1lLnNwbGl0KGljZS5TUClbMF0pOiBjYW4uY29yZS5LZXlzKGxpbmUuY3R4LCBsaW5lLmNtZCkKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6ICJwbHVnIiwgaW5kZXg6IGNtZHx8bXNnLk9wdGlvbihtZGIuSU5ERVgpfSwgZnVuY3Rpb24oc3ViLCBtZXRhKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIG1ldGEuaW5kZXgsIGNtZHMsIGNiKSB9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSkpCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktMipodG1sLkFDVElPTl9IRUlHSFQtMTE3KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5Gb2N1cygpCgkJfSwgY2FuLnVpLnByb2ZpbGUpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbikgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgeyByZXR1cm4gdGQuaW5uZXJIVE1MIH0pCgkJfSkuc2xpY2UoMSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9pbnB1dC5qcyIKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpOyBzd2l0Y2ggKG1ldGEudHlwZSkgewoJCQljYXNlIGh0bWwuU0VMRUNUOiBtZXRhLnZhbHVlICYmICh0YXJnZXQudmFsdWUgPSBtZXRhLnZhbHVlKTsgYnJlYWsKCQkJY2FzZSBodG1sLkJVVFRPTjogbWV0YS5hY3Rpb24gPT0gaWNlLkFVVE8gJiYgdGFyZ2V0LmNsaWNrKCk7IGJyZWFrCgkJfQoJfSwKCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIn0pKSB9LAoJbGlzdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLkNvbmYoIm1vZGUiKSAhPSAic2ltcGxlIiAmJiBjYW4ucnVuKGV2ZW50KSB9LAoJYmFjazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uaW1wb3J0Ll9iYWNrKGNhbi5zdXApIH0sCglyZWZyZXNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW4oZXZlbnQpIH0sCgoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkKCQljYW4uQ29uZihtZGIuVFlQRSkgPT0gaHRtbC5CVVRUT04gJiYgY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGNhbi5Db25mKG1kYi5OQU1FKV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgl9LAoJb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIn0pCgkJaWYgKGNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLlNFTEVDVCkgeyBjYW4ucnVuKGV2ZW50KSB9Cgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuLCBldmVudC50YXJnZXQpCgkJaWYgKGNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLlRFWFRBUkVBKSB7IGlmICghZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfSB9CgkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7CgkJCWNhbi5ydW4oZXZlbnQpLCBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBldmVudC50YXJnZXQpCgkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCX0gaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgImIiOiBjYW4uQ2xvbmVJbnB1dCgpOyBicmVhawoJCQljYXNlICJtIjogY2FuLkNsb25lRmllbGQoKTsgYnJlYWsKCQkJZGVmYXVsdDogcmV0dXJuCgkJfSBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9pbnB1dC9kYXRlLmpzIgpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuaOp+S7tuivpuaDhSIsIGRhdGU6IHtvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KSB7IGNiKGZ1bmN0aW9uKGNhbiwgY2JzKSB7CglmdW5jdGlvbiBzZXQobm93KSB7IGNicyhjYW4sIGNhbi51c2VyLnRpbWUoY2FuLCBub3cpLCB0YXJnZXQudmFsdWUpIH0KCgkvLyDmt7vliqDmjqfku7YKCXZhciBub3cgPSB0YXJnZXQudmFsdWU/IG5ldyBEYXRlKHRhcmdldC52YWx1ZSk6IG5ldyBEYXRlKCkKCWNhbi5fdHJhbnMgPSBraXQuRGljdCgidG9kYXkiLCAi5LuK5aSpIiwgbWRiLk5FWFQsICLkuIvkuIDmnIgiLCBtZGIuUFJFViwgIuS4iuS4gOaciCIpCgljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX2FjdGlvbiksIGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW2NsaS5DTE9TRSwKCQlbImhvdXIiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgyNCkpLCBbIm1pbnV0ZSJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDAsIDYwLCA1KSksIFsic2Vjb25kIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMCwgNjAsIDUpKSwKCQkidG9kYXkiLCAiIiwgbWRiLlBSRVYsIFsieWVhciJdLmNvbmNhdChjYW4uY29yZS5MaXN0KG5vdy5nZXRGdWxsWWVhcigpIC0gMTAsIG5vdy5nZXRGdWxsWWVhcigpICsgMTApKSwKCQlbIm1vbnRoIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMSwgMTMpKSwgbWRiLk5FWFQsCgldLCBjYW4uX2FjdGlvbiwge2Nsb3NlOiBmdW5jdGlvbihldmVudCkgeyBjYW4uY2xvc2UoKSB9LAoJCSJob3VyIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0SG91cnMocGFyc2VJbnQodmFsdWUpfHwwKSwgc2hvdyhub3cpIH0sCgkJIm1pbnV0ZSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldE1pbnV0ZXMocGFyc2VJbnQodmFsdWUpfHwwKSwgc2hvdyhub3cpIH0sCgkJInNlY29uZCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldFNlY29uZHMocGFyc2VJbnQodmFsdWUpfHwwKSwgc2hvdyhub3cpIH0sCgkJInRvZGF5IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93ID0gbmV3IERhdGUoKSwgc2V0KHNob3cobm93KSkgfSwKCgkJInByZXYiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0TW9udGgobm93LmdldE1vbnRoKCktMSksIHNob3cobm93KSB9LAoJCSJ5ZWFyIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0RnVsbFllYXIocGFyc2VJbnQodmFsdWUpKSwgc2hvdyhub3cpIH0sCgkJIm1vbnRoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBub3cuc2V0TW9udGgocGFyc2VJbnQodmFsdWUpLTEpLCBzaG93KG5vdykgfSwKCQkibmV4dCI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRNb250aChub3cuZ2V0TW9udGgoKSsxKSwgc2hvdyhub3cpIH0sCgoJCSLpmo/mnLoiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0RGF0ZSgoTWF0aC5yYW5kb20oKSAqIDEwMCAtIDUwKSArIG5vdy5nZXREYXRlKCkpLCBzaG93KG5vdykgfSwKCQki5YmN5LiA5bm0IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldEZ1bGxZZWFyKG5vdy5nZXRGdWxsWWVhcigpLTEpLCBzaG93KG5vdykgfSwKCQki5ZCO5LiA5bm0IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldEZ1bGxZZWFyKG5vdy5nZXRGdWxsWWVhcigpKzEpLCBzaG93KG5vdykgfSwKCX0pCgoJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9zdGF0dXMpCgljYW4uX3RhYmxlID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIGNhbi5fb3V0cHV0LCBbe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVEFCTEVdfV0pLmZpcnN0Cgl2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOyBmdW5jdGlvbiBzaG93KG5vdykgewoJCS8vIOiuvue9ruaOp+S7tgoJCWNhbi5BY3Rpb24oInllYXIiLCBub3cuZ2V0RnVsbFllYXIoKSkKCQljYW4uQWN0aW9uKCJtb250aCIsIG5vdy5nZXRNb250aCgpKzEpCgkJY2FuLkFjdGlvbigiaG91ciIsIG5vdy5nZXRIb3VycygpKQoJCWNhbi5BY3Rpb24oIm1pbnV0ZSIsIHBhcnNlSW50KG5vdy5nZXRNaW51dGVzKCkvNSkqNSkKCQljYW4uQWN0aW9uKCJzZWNvbmQiLCBwYXJzZUludChub3cuZ2V0U2Vjb25kcygpLzUpKjUpCgoJCS8vIOiuvue9rue7hOS7tgoJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4uX3RhYmxlLCBbe3RoOiBbIuaXpSIsICLkuIAiLCAi5LqMIiwgIuS4iSIsICLlm5siLCAi5LqUIiwgIuWFrSJdfV0pCgkJdmFyIHRyOyBmdW5jdGlvbiBhZGQoZGF5LCB0eXBlKSB7IGlmIChkYXkuZ2V0RGF5KCkgPT0gMCkgeyB0ciA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fdGFibGUsIFt7dHlwZTogaHRtbC5UUn1dKS5sYXN0IH0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdHIsIFt7dGV4dDogW2RheS5nZXREYXRlKCksIGh0bWwuVEQsIGNhbi5iYXNlLlRpbWUodG9kYXksICIleS0lbS0lZCIpID09IGNhbi5iYXNlLlRpbWUoZGF5LCAiJXktJW0tJWQiKT8gaHRtbC5TRUxFQ1Q6IHR5cGVdLAoJCQkJZGF0YXNldDoge2RhdGU6IGRheS5nZXRUaW1lKCl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCXNldChub3cgPSBuZXcgRGF0ZShwYXJzZUludChldmVudC50YXJnZXQuZGF0YXNldC5kYXRlKSkpCgkJCQl9LAoJCQl9XSkKCQl9CgoJCS8vIOaXtumXtOWMuumXtAoJCXZhciBvbmUgPSBuZXcgRGF0ZShub3cpOyBvbmUuc2V0RGF0ZSgxKQoJCXZhciBlbmQgPSBuZXcgRGF0ZShub3cpOyBlbmQuc2V0TW9udGgobm93LmdldE1vbnRoKCkrMSksIGVuZC5zZXREYXRlKDEpCgkJdmFyIGhlYWQgPSBuZXcgRGF0ZShvbmUpOyBoZWFkLnNldERhdGUob25lLmdldERhdGUoKS1vbmUuZ2V0RGF5KCkpCgkJdmFyIHRhaWwgPSBuZXcgRGF0ZShlbmQpOyB0YWlsLnNldERhdGUoZW5kLmdldERhdGUoKSs3LWVuZC5nZXREYXkoKSkKCgkJLy8g5pe26Ze05bqP5YiXCgkJZm9yICh2YXIgZGF5ID0gbmV3IERhdGUoaGVhZCk7IGRheSA8IG9uZTsgZGF5LnNldERhdGUoZGF5LmdldERhdGUoKSsxKSkgeyBhZGQoZGF5LCBtZGIuUFJFVikgfQoJCWZvciAodmFyIGRheSA9IG5ldyBEYXRlKG9uZSk7IGRheSA8IGVuZDsgZGF5LnNldERhdGUoZGF5LmdldERhdGUoKSsxKSkgeyBhZGQoZGF5LCBtZGIuTUFJTikgfQoJCWZvciAodmFyIGRheSA9IG5ldyBEYXRlKGVuZCk7IGVuZC5nZXREYXkoKSAhPSAwICYmIGRheSA8IHRhaWw7IGRheS5zZXREYXRlKGRheS5nZXREYXRlKCkrMSkpIHsgYWRkKGRheSwgbWRiLk5FWFQpIH0KCgkJcmV0dXJuIG5vdwoJfSBzaG93KG5vdyksIGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbikKfSl9fSB9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vaW5wdXQva2V5LmpzIgpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuaOp+S7tuivpuaDhSIsIGtleTogewoJX2luaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGNicywgdGFyZ2V0LCBuYW1lLCB2YWx1ZSkgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5JTlBVVFMsIFtuYW1lLCB2YWx1ZXx8dGFyZ2V0LnZhbHVlXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmZpZ3VyZS5rZXkuX3Nob3coY2FuLCBtc2csIGNicywgdGFyZ2V0LCBuYW1lKQoJCX0pCgl9LAoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYnMsIHRhcmdldCwgbmFtZSkgewoJCWlmICghY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fdGFyZ2V0LCBtc2cuTGVuZ3RoKCkgIT0gMCkpIHsgcmV0dXJuIH0KCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSkgewoJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIHN0eWxlOiBtc2cuYXBwZW5kICYmIG1zZy5hcHBlbmQubGVuZ3RoID09IDE/IHsibWluLXdpZHRoIjogdGFyZ2V0Lm9mZnNldFdpZHRoLTE2fToge30sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhjYW4sIHZhbHVlLCB0YXJnZXQudmFsdWUpCgkJCQltc2cuT3B0aW9uKGljZS5NU0dfUFJPQ0VTUykgPT0gaWNlLlBST0NFU1NfQUdBSU4gJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQkJY2FuLm9uZmlndXJlLmtleS5faW5pdChldmVudCwgY2FuLCBjYnMsIHRhcmdldCwgbmFtZSwgdmFsdWUpCgkJCQl9KQoJCQl9fQoJCX0pLCBjYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIFttZGIuVE9UQUwsIG1kYi5JTkRFWF0pLCBjYW4uU3RhdHVzKG1kYi5UT1RBTCwgbXNnLkxlbmd0aCgpKQoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5iYXNlLk1heCh0b3AraGVpZ2h0LWNhbi5fdGFyZ2V0Lm9mZnNldFRvcCwgNDAwKSkKCQl9KQoJfSwKCV9tYWtlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7CgkJdmFyIHN1YiA9IHRhcmdldC5fY2FuOyBpZiAoc3ViICYmIHN1Yi5fY2JzKSB7IHJldHVybiB9CgkJY2IoZnVuY3Rpb24oc3ViLCBjYnMpIHsgc3ViLl9jYnMgPSBjYnMKCQkJaWYgKG1ldGEubXNnICYmIG1ldGEubXNnLkxlbmd0aCgpID4gMCkgewoJCQkJY2FuLm9uZmlndXJlLmtleS5fc2hvdyhzdWIsIG1ldGEubXNnLCBjYnMsIHRhcmdldCwgbWV0YS5uYW1lKQoJCQl9IGVsc2UgewoJCQkJY2FuLm9uZmlndXJlLmtleS5faW5pdChldmVudCwgc3ViLCBjYnMsIHRhcmdldCwgbWV0YS5uYW1lKQoJCQl9CgkJfSkKCX0sCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KSB7CgkJdGFyZ2V0Ll9jYW4gJiYgdGFyZ2V0Ll9jYW4uY2xvc2UoKQoJCWNhbi5vbmZpZ3VyZS5rZXkuX21ha2UoZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkKCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpCgl9LAoJb25mb2N1czogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgewoJCWNhbi5vbmZpZ3VyZS5rZXkuX21ha2UoZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkKCX0sCglvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsKCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlICJFc2NhcGUiOiB0YXJnZXQuX2Nhbj8gdGFyZ2V0Ll9jYW4uY2xvc2UoKTogdGFyZ2V0LmJsdXIoKTsgcmV0dXJuCgkJCWNhc2UgIlRhYiI6IHRhcmdldC5fY2FuICYmIHRhcmdldC5fY2FuLmNsb3NlKCk7IHJldHVybgoJCQljYXNlICJuIjoKCQkJY2FzZSAicCI6IGV2ZW50LmN0cmxLZXkgJiYgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpOyBicmVhawoJCQlkZWZhdWx0OiBjYW4uYmFzZS5pc0Z1bmMobGFzdCkgJiYgbGFzdChldmVudCwgY2FuKQoJCX0KCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgl9LAoJb25rZXl1cDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgeyB2YXIgc3ViID0gdGFyZ2V0Ll9jYW47IGlmICghc3ViKSB7IHJldHVybiB9CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSBpY2UuUFM6IGNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1Yiwgc3ViLl9jYnMsIHRhcmdldCwgbWV0YS5uYW1lLCBldmVudC50YXJnZXQudmFsdWUpOyBicmVhawoJCX0KCQljYW4ub25tb3Rpb24uc2VsZWN0SW5wdXRUYWJsZShldmVudCwgc3ViLCBmdW5jdGlvbigpIHsgY2FuLm9uZmlndXJlLmtleS5faW5pdChldmVudCwgc3ViLCBzdWIuX2NicywgdGFyZ2V0LCBtZXRhLm5hbWUpIH0sIHRhcmdldCkKCX0sCn19KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vaW5wdXQvcHJvdmluY2UuanMiClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi5o6n5Lu26K+m5oOFIiwgcHJvdmluY2U6IHtvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KSB7IGNiKGZ1bmN0aW9uKGNhbiwgY2JzKSB7CgljYW4ucmVxdWlyZShbIi9yZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvZWNoYXJ0cy5qcyIsICIvcmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2NoaW5hLmpzIl0sIGZ1bmN0aW9uKCkgewoJCXZhciBjaGluYV9jaGFydCA9IGVjaGFydHMuaW5pdChjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBodG1sLkRJViwgc3R5bGU6IHt3aWR0aDogNjAwLCBoZWlnaHQ6IDQwMH19XSkuZmlyc3QpCgkJY2hpbmFfY2hhcnQuc2V0T3B0aW9uKHtnZW86IHttYXA6ICdjaGluYSd9fSksIGNoaW5hX2NoYXJ0Lm9uKGh0bWwuQ0xJQ0ssIGZ1bmN0aW9uIChwYXJhbXMpIHsKCQkJdGFyZ2V0LnZhbHVlID0gcGFyYW1zLm5hbWUsIGNhbi5jbG9zZSgpCgkJfSksIGNhbi5TdGF0dXMobWRiLlRPVEFMLCAzNCksIGNhbi5vbmxheW91dC5maWd1cmUoZXZlbnQsIGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhjYW4pCgl9KQp9KSB9fSwgfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NoYXQvZGl2LmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCXZhciBtZXRhID0ge307IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyBtZXRhW3ZhbHVlLmtleV0gPSB2YWx1ZS52YWx1ZSB9KQoJCWNhbi5fbGlzdCA9IGNhbi5iYXNlLk9iaihtZXRhLnRleHQsIHttZXRhOiB7bmFtZTogbWV0YS5uYW1lfHxodG1sLkRJVn0sIGxpc3Q6IFtdfSkKCQljYW4uc3VwLl9rZXlzID0gY2FuLnN1cC5fa2V5c3x8Y2FuLl9saXN0Lm1ldGEubmFtZQoJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuLCBjYW4uX291dHB1dCkKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCX0sCglfaXRlbTogZnVuY3Rpb24oY2FuLCBrZXlzLCBpdGVtLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsgd2lkdGggPSB3aWR0aHx8aXRlbS5tZXRhLndpZHRoLCBoZWlnaHQgPSBoZWlnaHR8fGl0ZW0ubWV0YS5oZWlnaHQKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lfHxodG1sLkRJVl0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KSwgY2FuLmN1cnJlbnQgPSBldmVudC50YXJnZXQsIGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGtleXMsIGl0ZW0ubWV0YSkKCQl9LCBfYWRkOiBmdW5jdGlvbihkYXRhKSB7IGl0ZW0ubGlzdC5wdXNoKGRhdGEpLCBjYW4ub25pbXBvcnQuX2xpc3QoY2FuLCBrZXlzLCBpdGVtLCB1aS5saXN0LCB3aWR0aCwgaGVpZ2h0KSB9fSwge3ZpZXc6IGh0bWwuTElTVH1dKQoKCQl2YXIgZmllbGQgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCBpdGVtLm1ldGEuaW5kZXg/IGNoYXQuUExVR0lOOiBjaGF0LkxBWU9VVCwgaXRlbS5tZXRhLCB0YXJnZXQuX3RhcmdldCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLmxpc3QuX3RhcmdldCA9IGZpZWxkLm91dHB1dCwge3dpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHR9KQoJCWl0ZW0ubWV0YS5zdHlsZSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdWkubGlzdC5fdGFyZ2V0LCBpdGVtLm1ldGEuc3R5bGUpCgoJCWl0ZW0ubWV0YS5pbmRleCAmJiBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgY2FuLmJhc2UuQ29weSh7fSwgaXRlbS5tZXRhKSwgZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUfSkKCQl9LCB0YXJnZXQuX3RhcmdldCwgZmllbGQuZmllbGRzZXQpCgoJCWNhbi5vbmltcG9ydC5fbGlzdChjYW4sIGtleXMsIGl0ZW0sIHVpLmxpc3QsIHdpZHRoLCBoZWlnaHQpCgkJY2FuLnN1cC5fa2V5cyA9PSBrZXlzICYmIHVpLml0ZW0uY2xpY2soKQoJfSwKCV9saXN0OiBmdW5jdGlvbihjYW4sIGtleXMsIGl0ZW0sIHRhcmdldCwgd2lkdGgsIGhlaWdodCkgewoJCWlmIChpdGVtLm1ldGEuc3R5bGUgPT0gaHRtbC5TUEFOKSB7IHdpZHRoID0gd2lkdGggLyBpdGVtLmxpc3QubGVuZ3RoIH0gZWxzZSB7IGhlaWdodCA9IGhlaWdodCAvIGl0ZW0ubGlzdC5sZW5ndGggfQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldC5fdGFyZ2V0KQoJCWNhbi5jb3JlLkxpc3QoaXRlbS5saXN0LCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5jb3JlLktleXMoa2V5cywgaXRlbS5tZXRhLm5hbWUpLCBpdGVtLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIH0pCgl9LAoJX3Byb2ZpbGU6IGZ1bmN0aW9uKGNhbiwga2V5cywgbWV0YSkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvZmlsZSkKCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30pOyBtc2cuUHVzaChtZGIuS0VZLCAia2V5cyIpLCBtc2cuUHVzaChtZGIuVkFMVUUsIGtleXMpCgkJY2FuLmNvcmUuTGlzdChjYW4uY29yZS5TcGxpdCgibmFtZSxpbmRleCxhcmdzLHN0eWxlLGRpc3BsYXksaGVpZ2h0LHdpZHRoIiksIGZ1bmN0aW9uKGspIHsKCQkJbXNnLlB1c2gobWRiLktFWSwgayksIG1zZy5QdXNoKG1kYi5WQUxVRSwgbWV0YVtrXSkKCQl9KSwgY2FuLnN1cC5fa2V5cyA9IGtleXMKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBhcnJheSkgewoJCQlyZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIG9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQkJCWtleSA9PSBtZGIuVkFMVUUgJiYgY2FuLm9ubW90aW9uLm1vZGlmeShjYW4sIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBvbGQpIHsKCQkJCQl0YXJnZXQuaW5uZXJUZXh0ID0gbWV0YVtsaW5lLmtleV0gPSB2YWx1ZSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJCQl9LCB7bmFtZTogbGluZS5rZXl9KQoJCQl9fQoJCX0sIGNhbi51aS5wcm9maWxlKQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbi5vbmxheW91dC5wcm9maWxlKGNhbiwgdGFyZ2V0KSwgY2FuLnVpLnByb2plY3QuX3RhcmdldCA9IGNhbi51aS5jb250ZW50CgkJdmFyIHdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLTMyMCwgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsKCQkJd2lkdGggPSBjYW4uX3Jvb3QuX3dpZHRoLCBoZWlnaHQgPSBjYW4uX3Jvb3QuX2hlaWdodCwgY2FuLnVzZXIudGl0bGUoY2FuLl9saXN0Lm1ldGEubmFtZSkKCQl9IGVsc2UgaWYgKGNhbi5pc0Z1bGxNb2RlKCkpIHsKCQkJd2lkdGggPSBjYW4uQ29uZldpZHRoKCksIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBmYWxzZSkKCQl9IGVsc2UgewoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIHRydWUpCgkJfQoJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5fbGlzdC5tZXRhLm5hbWUsIGNhbi5fbGlzdCwgY2FuLnVpLnByb2plY3QsIHdpZHRoLCBoZWlnaHQpCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsCgki5re75YqgIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRSwgY3R4LklOREVYLCBjdHguQVJHUywgY3R4LlNUWUxFLCBodG1sLkhFSUdIVCwgaHRtbC5XSURUSF0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLmN1cnJlbnQuX2FkZCh7bWV0YTogZGF0YSwgbGlzdDogW119KQoJCX0pCgl9LAoJIuS/neWtmCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgW21kYi5URVhULCBKU09OLnN0cmluZ2lmeShjYW4uX2xpc3QpXSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jaGF0L2xvY2F0aW9uLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQkhY2FuLmlzQ21kTW9kZSgpICYmIGNhbi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCAtIDUqaHRtbC5BQ1RJT05fSEVJR0hUIC0gNSpodG1sLlBMVUdJTl9NQVJHSU4pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLkNvbmZIZWlnaHQod2luZG93LmlubmVySGVpZ2h0LWh0bWwuQUNUSU9OX0hFSUdIVCkKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX29wdGlvbikKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9zdGF0dXMpCgoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkucHJvamVjdCwgMjQwKSwgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvamVjdCwgaWNlLkFVVE8pCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9maWxlLCBpY2UuQVVUTykKCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4ub25leHBvcnQubGlzdCkKCQljYW4ucmVxdWlyZShbY2FuLmJhc2UuTWVyZ2VVUkwoImh0dHBzOi8vbWFwLnFxLmNvbS9hcGkvZ2xqcyIsICJ2IiwgIjEuZXhwIiwgImxpYnJhcmllcyIsICJzZXJ2aWNlIiwgImtleSIsIGNhbi5Db25mKGFhYS5UT0tFTikpXSwgZnVuY3Rpb24oKSB7CgkJCXZhciByZXMgPSB7dHlwZTogInVua25vd24iLCBsYXRpdHVkZTogMzk5ODQxMiwgbG9uZ2l0dWRlOiAxMTYzMDc0OH0sIGN1cnJlbnQgPSBjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LkxPQ0FUSU9OKSkKCQkJaWYgKGN1cnJlbnQuc3RhdHVzID09PSAwKSB7IHJlcyA9IGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGN1cnJlbnQucmVzdWx0LmxvY2F0aW9uLCBjdXJyZW50LnJlc3VsdC5hZF9pbmZvKSwgcmVzLnR5cGUgPSAiaXAiLCByZXMubmFtZSA9IGN1cnJlbnQucmVzdWx0LmlwLCBjYW4uU3RhdHVzKHJlcykgfQoJCQljYW4uX2N1cnJlbnQgPSByZXMsIGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbiksIGNhbi51c2VyLmFnZW50LmdldExvY2F0aW9uKGZ1bmN0aW9uKHJlcykgeyByZXMudHlwZSA9ICJjdXJyZW50IiwgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5fY3VycmVudCA9IHJlcykgfSkKCQl9KQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCksIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLCBodG1sLldJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKQoKCQljYW4ub25pbXBvcnQuem9uZShjYW4sIFsKCQkJe25hbWU6ICJkaXJlY3Rpb24ifSwKCQkJe25hbWU6ICJmYXZvciIsIF9tZW51OiBzaHkoeyJwbGF5IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJCQljYW4uY29yZS5OZXh0KGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5mYXZvci5fdGFyZ2V0LCBodG1sLkRJVl9JVEVNKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQkJCWl0ZW0uY2xpY2soKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgbmV4dCwgMjAwMCkKCQkJCX0sIGZ1bmN0aW9uKCkgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKSB9KQoJCQl9fSl9LAoJCQl7bmFtZTogImV4cGxvcmUiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7CgkJCQl6b25lLl9zZWFyY2gub25rZXl1cCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LmtleSA9PSAiRW50ZXIiICYmIGNhbi5vbmltcG9ydC5fc2VhcmNoMChjYW4sIGV2ZW50LnRhcmdldC52YWx1ZSkgfQoJCQl9fSwKCQkJe25hbWU6ICJzZWFyY2giLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7CgkJCQl6b25lLl9zZWFyY2gub25rZXl1cCA9IGZ1bmN0aW9uKGV2ZW50KSB7IGV2ZW50LmtleSA9PSAiRW50ZXIiICYmIGNhbi5vbmltcG9ydC5fc2VhcmNoKGNhbiwgZXZlbnQudGFyZ2V0LnZhbHVlKSB9CgkJCX19LAoJCQl7bmFtZTogImRpc3RyaWN0IiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJY2FuLm9uaW1wb3J0Ll9wcm92aW5jZShjYW4sIHRhcmdldCkKCQkJfX0sCgkJXSwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25pbXBvcnQuX3Nob3coY2FuLCBjYW4uX2N1cnJlbnQpLCBjYW4ub25pbXBvcnQuX21hcmsoY2FuKQoJCWNhbi5tYXJrICYmIGNhbi5tYXJrLmFkZCh7cG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGNhbi5fY3VycmVudCksIHByb3BlcnRpZXM6IGNhbi5fY3VycmVudH0pCgkJY2FuLl9tc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBpdGVtKSB9KQoJfSwKCV9zZWFyY2gwOiBmdW5jdGlvbihjYW4sIGtleXdvcmQpIHsgdmFyIHAgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHsiYm91bmRhcnkiOiAibmVhcmJ5KCIrY2FuLmJhc2Uuam9pbihbcC5sYXQsIHAubG5nLCAiNTAwIl0sIGljZS5GUykrIikiLCAicGFnZV9pbmRleCI6IDEsICJrZXl3b3JkIjoga2V5d29yZH0pLCAic2VhcmNoIiwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQl2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5jb3JlLkxpc3QocmVzLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGl0ZW0ubG9jYXRpb24sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLnRpdGxlLCB0ZXh0OiBpdGVtLmFkZHJlc3N9KSwgY2FuLnVpLmV4cGxvcmUuX3RhcmdldCkKCQkJfSksIGNhbi5taXNjLkRlYnVnKHJlcykKCQl9KQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGNhbiwga2V5d29yZCkgeyB2YXIgcCA9IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGNhbi5jdXJyZW50Lml0ZW0pCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgeyJib3VuZGFyeSI6ICJyZWdpb24oIitjYW4uYmFzZS5qb2luKFtjYW4uU3RhdHVzKCJjaXR5IiksIHAubGF0LCBwLmxuZ10sIGljZS5GUykrIikiLCAicGFnZV9pbmRleCI6IDEsICJrZXl3b3JkIjoga2V5d29yZH0pLCAic2VhcmNoIiwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQl2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5jb3JlLkxpc3QocmVzLmRhdGEsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGl0ZW0ubG9jYXRpb24sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLnRpdGxlLCB0ZXh0OiBpdGVtLmFkZHJlc3N9KSwgY2FuLnVpLnNlYXJjaC5fdGFyZ2V0KQoJCQl9KSwgY2FuLm1pc2MuRGVidWcocmVzKQoJCX0pCgl9LAoKCV9saXN0X3Jlc3VsdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiKSB7IHZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLm1pc2MuRGVidWcocmVzKQoJCXJldHVybiBjYW4uY29yZS5MaXN0KHJlcy5yZXN1bHRbMF0sIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5uYW1lID0gaXRlbS5uYW1lfHxpdGVtLmZ1bGxuYW1lOyByZXR1cm4gY2FuLmJhc2UuaXNGdW5jKGNiKT8gY2IoaXRlbSk6IGl0ZW0gfSkKCX0sCglfZGlzdHJpY3Q6IGZ1bmN0aW9uKGNhbiwgaWQsIGNiKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwge2lkOiBpZH0pLCAiZGlzdHJpY3QiLCBbXSwgY2IpCgl9LAoJX3Byb3ZpbmNlOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5fZGlzdHJpY3QoY2FuLCAiIiwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5fbGlzdF9yZXN1bHQoY2FuLCBtc2csIGZ1bmN0aW9uKHByb3ZpbmNlKSB7CgkJCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIHByb3ZpbmNlLCBmdW5jdGlvbihldmVudCwgXywgc2hvdykgeyBpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIH0KCQkJCQljYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgcHJvdmluY2UubG9jYXRpb24sIHt0eXBlOiAicHJvdmluY2UiLCBuYW1lOiBwcm92aW5jZS5uYW1lLCB0ZXh0OiBwcm92aW5jZS5mdWxsbmFtZX0pKQoJCQkJCWNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgOCkpLCBjYW4uU3RhdHVzKHtuYXRpb246ICLkuK3lm70iLCBwcm92aW5jZTogcHJvdmluY2UuZnVsbG5hbWV9KQoKCQkJCQlzaG93ID09PSB0cnVlIHx8IGNhbi5vbmltcG9ydC5fY2l0eShjYW4sIHByb3ZpbmNlLCBldmVudC50YXJnZXQpCgkJCQl9LCBmdW5jdGlvbigpIHt9LCB0YXJnZXQpCgkJCX0pCgkJfSkKCX0sCglfY2l0eTogZnVuY3Rpb24oY2FuLCBwcm92aW5jZSwgdGFyZ2V0KSB7CgkJY2FuLm9uaW1wb3J0Ll9kaXN0cmljdChjYW4sIHByb3ZpbmNlLmlkLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0Lml0ZW1saXN0KGNhbiwgY2FuLm9uaW1wb3J0Ll9saXN0X3Jlc3VsdChjYW4sIG1zZyksIGZ1bmN0aW9uKGV2ZW50LCBjaXR5LCBzaG93KSB7IGlmIChzaG93ID09PSBmYWxzZSkgeyByZXR1cm4gfQoJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGNpdHkubG9jYXRpb24sIHt0eXBlOiAiY2l0eSIsIG5hbWU6IGNpdHkubmFtZSwgdGV4dDogY2l0eS5mdWxsbmFtZX0pKQoJCQkJY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCAxMikpLCBjYW4uU3RhdHVzKHtuYXRpb246ICLkuK3lm70iLCBwcm92aW5jZTogcHJvdmluY2UuZnVsbG5hbWUsIGNpdHk6IGNpdHkuZnVsbG5hbWV9KQoKCQkJCXNob3cgPT09IHRydWUgfHwgY2FuLm9uaW1wb3J0Ll9jb3VudHkoY2FuLCBwcm92aW5jZSwgY2l0eSwgZXZlbnQudGFyZ2V0KQoJCQl9LCBmdW5jdGlvbigpIHt9LCB0YXJnZXQpCgkJfSkKCX0sCglfY291bnR5OiBmdW5jdGlvbihjYW4sIHByb3ZpbmNlLCBjaXR5LCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuX2Rpc3RyaWN0KGNhbiwgY2l0eS5pZCwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5pdGVtbGlzdChjYW4sIGNhbi5vbmltcG9ydC5fbGlzdF9yZXN1bHQoY2FuLCBtc2cpLCBmdW5jdGlvbihldmVudCwgY291bnR5KSB7CgkJCQljYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgY291bnR5LmxvY2F0aW9uLCB7dHlwZTogImNvdW50eSIsIG5hbWU6IGNpdHkubmFtZSwgdGV4dDogY291bnR5LmZ1bGxuYW1lfSkpCgkJCQljYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDE1KSksIGNhbi5TdGF0dXMoe25hdGlvbjogIuS4reWbvSIsIHByb3ZpbmNlOiBwcm92aW5jZS5mdWxsbmFtZSwgY2l0eTogY2l0eS5mdWxsbmFtZX0pCgkJCX0sIGZ1bmN0aW9uKCkge30sIHRhcmdldCkKCQl9KQoJfSwKCglfc2hvdzogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJY2FuLm1hcCA9IG5ldyBUTWFwLk1hcChjYW4udWkuY29udGVudCwge2NlbnRlcjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIHpvb206IGNhbi5BY3Rpb24oInpvb20iKSwgcGl0Y2g6IGNhbi5BY3Rpb24oInBpdGNoIiksIHJvdGF0aW9uOiBjYW4uQWN0aW9uKCJyb3RhdGlvbiIpLCBtYXBTdHlsZUlkOiAic3R5bGUyIn0pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl90YXJnZXQsICJkaXYuY29udGVudD5kaXYiLCBmdW5jdGlvbihpdGVtKSB7IGNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgeyJ6LWluZGV4IjogM30pIH0pCgkJY2FuLmN1cnJlbnQgPSB7CgkJCWxhYmVsOiBuZXcgVE1hcC5NdWx0aUxhYmVsKHttYXA6IGNhbi5tYXAsIGdlb21ldHJpZXM6IFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCBjb250ZW50OiBpdGVtLm5hbWV9XX0pLAoJCQltYXJrZXI6IG5ldyBUTWFwLk11bHRpTWFya2VyKHttYXA6IGNhbi5tYXAsIGdlb21ldHJpZXM6IFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pfV19KSwKCQkJaW5mbzogY2FuLm9uaW1wb3J0LmluZm8oY2FuLCBpdGVtKSwgaG92ZXI6IGNhbi5vbmltcG9ydC5pbmZvKGNhbiwgaXRlbSksCgkJCWNpcmNsZTogY2FuLm9uaW1wb3J0LmNpcmNsZShjYW4sIGl0ZW0sIDEwMCksIGl0ZW06IGl0ZW0sCgkJfQoKCQljYW4ubWFwLm9uKCJyb3RhdGUiLCBmdW5jdGlvbihldmVudCkgeyBjYW4uQWN0aW9uKCJyb3RhdGlvbiIsIGNhbi5tYXAuZ2V0Um90YXRpb24oKSkgfSkKCQljYW4ubWFwLm9uKCJwaXRjaCIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5BY3Rpb24oInBpdGNoIiwgY2FuLm1hcC5nZXRQaXRjaCgpKSB9KQoJCWNhbi5tYXAub24oInpvb20iLCBmdW5jdGlvbihldmVudCkgeyBjYW4uQWN0aW9uKCJ6b29tIiwgY2FuLm1hcC5nZXRab29tKCkpIH0pCgkJY2FuLm1hcC5vbigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgewoJCQl2YXIgcG9pbnQgPSBjYW4ub25hY3Rpb24uX3BvaW50KGV2ZW50LCBjYW4sIHtuYW1lOiBldmVudC5wb2k/IGV2ZW50LnBvaS5uYW1lOiAiIn0pOyBjYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgcG9pbnQpCgkJCWNhbi5BY3Rpb24oIm1vZGUiKSA9PSAiaW5zZXJ0IiAmJiBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt0YXJnZXQ6IHtnZXRCb3VuZGluZ0NsaWVudFJlY3Q6IGZ1bmN0aW9uKCkgeyByZXR1cm4gcG9pbnQgfX19LCBwb2ludCksIG1kYi5DUkVBVEUsIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgcG9pbnQpCgkJCX0pCgkJfSkKCX0sCglfaXRlbTogZnVuY3Rpb24oY2FuLCBpdGVtLCB0YXJnZXQpIHsgaWYgKCFpdGVtLmxhdGl0dWRlIHx8ICFpdGVtLmxvbmdpdHVkZSkgeyByZXR1cm4gfQoJCWNhbi5vbmltcG9ydC5pdGVtKGNhbiwgaXRlbSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGl0ZW0pLCBjYW4ub25pbXBvcnQucGx1Z2luKGNhbiwgaXRlbSkKCQl9LCBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25leHBvcnQuaG92ZXIoY2FuLCBpdGVtKSwgY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCB7CgkJCQlkaXJlY3Rpb246IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGl0ZW0pLCBjYW4ub25hY3Rpb25bYnV0dG9uXShldmVudCwgY2FuLCBidXR0b24pIH0sCgkJCQlmYXZvcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0pLCBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pIH0sCgkJCQlwbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0sIGl0ZW0uZXh0cmEpCgkJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihhcmdzLCBkYXRhKSB7CgkJCQkJCWNhbi5iYXNlLkNvcHkoaXRlbS5leHRyYSwgZGF0YSksIGNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIGFyZ3MpCgkJCQkJfSkKCQkJCX0sCgkJCX0pCgkJfSwgdGFyZ2V0fHxjYW4udWkuZmF2b3IuX3RhcmdldCkKCQljYW4ubWFyayAmJiBjYW4ubWFyay5hZGQoe3Bvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgcHJvcGVydGllczogaXRlbX0pCgkJY2FuLmNsdXN0ZXIgJiYgY2FuLmNsdXN0ZXIuYWRkKHtwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSl9KQoJfSwKCV9jbHVzdGVyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5jbHVzdGVyID0gbmV3IFRNYXAuTWFya2VyQ2x1c3Rlcih7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbXX0pCgl9LAoJX21hcms6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLm1hcmsgPSBuZXcgVE1hcC5NdWx0aU1hcmtlcih7bWFwOiBjYW4ubWFwfSkKCQljYW4ubWFyay5vbigiY2xpY2siLCBmdW5jdGlvbihldmVudCkgeyBpZiAoIWV2ZW50Lmdlb21ldHJ5KSB7IHJldHVybiB9IHZhciBpdGVtID0gZXZlbnQuZ2VvbWV0cnkucHJvcGVydGllcwoJCQljYW4ub25pbXBvcnQuY2VudGVyKGNhbiwgaXRlbSkKCQl9KQoJCWNhbi5tYXJrLm9uKCJob3ZlciIsIGZ1bmN0aW9uKGV2ZW50KSB7IGlmICghZXZlbnQuZ2VvbWV0cnkpIHsgcmV0dXJuIH0gdmFyIGl0ZW0gPSBldmVudC5nZW9tZXRyeS5wcm9wZXJ0aWVzCgkJCWNhbi5vbmV4cG9ydC5ob3ZlcihjYW4sIGl0ZW0pCgkJfSkKCX0sCgoJX3BvbHlsaW5lOiBmdW5jdGlvbihjYW4sIHBhdGgpIHsKCQlyZXR1cm4gbmV3IFRNYXAuTXVsdGlQb2x5bGluZSh7CgkJCW1hcDogY2FuLm1hcCwKCQkJc3R5bGVzOiB7CgkJCQknc3R5bGVfYmx1ZSc6IG5ldyBUTWFwLlBvbHlsaW5lU3R5bGUoewoJCQkJCSdjb2xvcic6ICcjMzc3N0ZGJywgLy/nur/loavlhYXoibIKCQkJCQknd2lkdGgnOiA2LCAvL+aKmOe6v+WuveW6pgoJCQkJCSdib3JkZXJXaWR0aCc6IDUsIC8v6L6557q/5a695bqmCgkJCQkJJ2JvcmRlckNvbG9yJzogJyNGRkYnLCAvL+i+uee6v+minOiJsgoJCQkJCSdsaW5lQ2FwJzogJ2J1dHQnIC8v57q/56uv5aS05pa55byPCgkJCQl9KSwKCQkJCSdzdHlsZV9yZWQnOiBuZXcgVE1hcC5Qb2x5bGluZVN0eWxlKHsKCQkJCQknY29sb3InOiAnI0NDMDAwMCcsIC8v57q/5aGr5YWF6ImyCgkJCQkJJ3dpZHRoJzogNiwgLy/mipjnur/lrr3luqYKCQkJCQknYm9yZGVyV2lkdGgnOiA1LCAvL+i+uee6v+WuveW6pgoJCQkJCSdib3JkZXJDb2xvcic6ICcjQ0NDJywgLy/ovrnnur/popzoibIKCQkJCQknbGluZUNhcCc6ICdyb3VuZCcgLy/nur/nq6/lpLTmlrnlvI8KCQkJCX0pCgkJCX0sCgkJCWdlb21ldHJpZXM6IFt7J3N0eWxlSWQnOiAnc3R5bGVfYmx1ZScsICdwYXRocyc6IHBhdGh9XQoJCX0pCgl9LAoJX21vdmU6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5tYXJrLmFkZCh7aWQ6ICdjYXInLCBzdHlsZUlkOiAnY2FyLWRvd24nLCBwb3NpdGlvbjogbmV3IFRNYXAuTGF0TG5nKDM5Ljk4NDgxNTAwNjQ4MzM4LCAxMTYuMzA1NzExMjY5Mzc4NjYpfSkKCQljYW4ubWFyay5tb3ZlQWxvbmcoeyJjYXIiOiB7cGF0aDogWwoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTg0ODE1MDA2NDgzMzgsIDExNi4zMDU3MTEyNjkzNzg2NiksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45ODIyNjY1NzUyMjIxNTUsIDExNi4zMDU5Njg3NjE0NDQwOSksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45ODIzNDg3ODQxNjU4ODYsIDExNi4zMTExNDAwNjA0MjQ4KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk3ODgxMzcxMDI2NjAyNCwgMTE2LjMxMTE0MDA2MDQyNDgpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTc4ODEzNzEwMjY2MDI0LCAxMTYuMzE2OTk4MDA0OTEzMzMpCgkJXSwgc3BlZWQ6IDcwfX0sIHthdXRvUm90YXRpb246dHJ1ZX0pCgl9LAoKCXBvaW50OiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlyZXR1cm4gbmV3IFRNYXAuTGF0TG5nKGl0ZW0ubGF0aXR1ZGUvMTAwMDAwLjAsIGl0ZW0ubG9uZ2l0dWRlLzEwMDAwMC4wKQoJfSwKCWNlbnRlcjogZnVuY3Rpb24oY2FuLCBpdGVtKSB7IHZhciBwb2ludCA9IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pCgkJY2FuLm1hcC5zZXRDZW50ZXIocG9pbnQpLCBjYW4uU3RhdHVzKCJuYW1lIiwgIiIpLCBjYW4uU3RhdHVzKCJ0ZXh0IiwgIiIpLCBjYW4uU3RhdHVzKGl0ZW0pLCBjYW4uU3RhdHVzKHtsYXRpdHVkZTogcG9pbnQubGF0LCBsb25naXR1ZGU6IHBvaW50LmxuZ30pCgkJY2FuLmN1cnJlbnQuaW5mby5zZXRQb3NpdGlvbihwb2ludCksIGNhbi5jdXJyZW50LmluZm8uc2V0Q29udGVudCgoaXRlbS5uYW1lfHwiIikrIjxici8+IisoaXRlbS50ZXh0fHwiIikpCgkJY2FuLmN1cnJlbnQubGFiZWwudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBwb2ludCwgY29udGVudDogaXRlbS5uYW1lfV0pCgkJY2FuLmN1cnJlbnQubWFya2VyLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogcG9pbnR9XSkKCQljYW4uY3VycmVudC5jaXJjbGUuc2V0R2VvbWV0cmllcyhbe2NlbnRlcjogcG9pbnQsIHJhZGl1czogMzAwfV0pCgkJY2FuLmN1cnJlbnQuaXRlbSA9IGl0ZW0KCQlpdGVtLl9wbHVnaW4gJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0uX3BsdWdpbi5fdGFyZ2V0KQoJfSwKCWluZm86IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCXJldHVybiBuZXcgVE1hcC5JbmZvV2luZG93KHttYXA6IGNhbi5tYXAsCgkJCXBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgb2Zmc2V0OiB7eDogMCwgeTogLTMyfSwKCQkJY29udGVudDogKGl0ZW0ubmFtZXx8IiIpKyI8YnIvPiIrKGl0ZW0udGV4dHx8IiIpLAoJCX0pCgl9LAoJY2lyY2xlOiBmdW5jdGlvbihjYW4sIGl0ZW0sIHJhZGl1cykgewoJCXJldHVybiBuZXcgVE1hcC5NdWx0aUNpcmNsZSh7IAoJCQltYXA6IGNhbi5tYXAsIHN0eWxlczogewoJCQkJY2lyY2xlOiBuZXcgVE1hcC5DaXJjbGVTdHlsZSh7CgkJCQkJY29sb3I6ICdyZ2JhKDQxLDkxLDI1NSwwLjE2KScsCgkJCQkJc2hvd0JvcmRlcjogdHJ1ZSwKCQkJCQlib3JkZXJDb2xvcjogJ3JnYmEoNDEsOTEsMjU1LDEpJywKCQkJCQlib3JkZXJXaWR0aDogMiwKCQkJCX0pLAoJCQl9LAoJCQlnZW9tZXRyaWVzOiBbe3N0eWxlSWQ6ICdjaXJjbGUnLCBjZW50ZXI6IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCByYWRpdXM6IHJhZGl1c3x8MzAwfV0sCgkJfSkKCX0sCglwbHVnaW46IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIGl0ZW0uaGFzaCB9LCBjYW4udWkucHJvZmlsZSkpIHsKCgkJfSBlbHNlIHsgaXRlbS5leHRyYSA9IGNhbi5iYXNlLk9iaihpdGVtLmV4dHJhLCB7fSkKCQkJaXRlbS5leHRyYS5pbmRleCAmJiBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIHtpbmRleDogaXRlbS5leHRyYS5pbmRleCwgYXJnczogaXRlbS5leHRyYS5hcmdzfSwgY2FuLnVpLnByb2ZpbGUsIGZ1bmN0aW9uKHN1YikgeyBpdGVtLl9wbHVnaW4gPSBzdWIKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKSksIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSozLzQpKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLTIqaHRtbC5BQ1RJT05fSEVJR0hUKSwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpKjMvNCkpCgkJCX0pCgkJfQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSkgewoJCWZ1bmN0aW9uIG15SW5mb1dpbmRvdyhvcHRpb25zKSB7IFRNYXAuRE9NT3ZlcmxheS5jYWxsKHRoaXMsIG9wdGlvbnMpIH0KCQlteUluZm9XaW5kb3cucHJvdG90eXBlID0gbmV3IFRNYXAuRE9NT3ZlcmxheSgpCgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS5vbkluaXQgPSBmdW5jdGlvbihvcHRpb25zKSB7IHRoaXMucG9zaXRpb24gPSBvcHRpb25zLnBvc2l0aW9uLCB0aGlzLm1ldGEgPSBvcHRpb25zLm1ldGEgfQoKCQlteUluZm9XaW5kb3cucHJvdG90eXBlLmNyZWF0ZURPTSA9IGZ1bmN0aW9uKCkgewoJCQl2YXIgbWV0YSA9IHRoaXMubWV0YSwgdWkgPSBjYW4ub25hcHBlbmQuZmllbGQoY2FuLCBjaGF0LkZMT0FULCB7fSwgY2FuLl9vdXRwdXQpCgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBtZXRhLCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCksIGljZS5SVU4sIFttZXRhLmluZGV4XS5jb25jYXQoY21kcyksIGNiKSB9CgkJCQlzdWIub25hY3Rpb24uY2xvc2UgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLl90YXJnZXQpIH0KCQkJCS8vIGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS8yKSkKCQkJCS8vIGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKS8yKSkKCQkJCWl0ZW0uX3BsdWdpbiA9IHN1YgoJCQl9LCBjYW4uX291dHB1dCwgdWkuZmllbGRzZXQpCgkJCXJldHVybiB1aS5maWVsZHNldAoJCX0KCQlteUluZm9XaW5kb3cucHJvdG90eXBlLnVwZGF0ZURPTSA9IGZ1bmN0aW9uKCkgewoJCQl2YXIgcGl4ZWwgPSB0aGlzLm1hcC5wcm9qZWN0VG9Db250YWluZXIodGhpcy5wb3NpdGlvbik7IGNhbi5wYWdlLnN0eWxlKGNhbiwgdGhpcy5kb20sIHsKCQkJCWxlZnQ6IHBpeGVsLmdldFgoKSwgdG9wOiBwaXhlbC5nZXRZKCkrMipodG1sLkFDVElPTl9IRUlHSFQsCgkJCX0pCgkJfQoJCXJldHVybiBuZXcgbXlJbmZvV2luZG93KHttYXA6IGNhbi5tYXAsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgbWV0YTogbWV0YX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFtbIm1vZGUiLCAic2VsZWN0IiwgImluc2VydCJdLAoJe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogInpvb20iLCB2YWx1ZTogMTcsIHJhbmdlOiBbMywgMjFdfSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJwaXRjaCIsIHZhbHVlOiAzMCwgcmFuZ2U6IFswLCA4MCwgNV19LAoJe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogInJvdGF0aW9uIiwgdmFsdWU6ICIwIiwgcmFuZ2U6IFswLCAzNjAsIDEwXX0sCgkiY3VycmVudCIsICJleHBsb3JlIiwgImNyZWF0ZSIsICJkaXJlY3Rpb24iXSwKCV90cmFuczoge2N1cnJlbnQ6ICLlrprkvY0iLCBmYXZvcjogIuaUtuiXjyJ9LAoKCXpvb206IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iKSkgfSwKCXBpdGNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXAuc2V0UGl0Y2goY2FuLkFjdGlvbigicGl0Y2giKSkgfSwKCXJvdGF0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXAuc2V0Um90YXRpb24oY2FuLkFjdGlvbigicm90YXRpb24iKSkgfSwKCWN1cnJlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5fY3VycmVudCksIGNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgMTcpKSwgY2FuLm1hcC5zZXRQaXRjaChjYW4uQWN0aW9uKCJwaXRjaCIsIDMwKSksIGNhbi5tYXAuc2V0Um90YXRpb24oY2FuLkFjdGlvbigicm90YXRpb24iLCAwKSkgfSwKCglleHBsb3JlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgdmFyIHAgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKTsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmV4cGxvcmUuX3RhcmdldCkKCQlmb3IgKHZhciBpID0gMTsgaSA8IDY7IGkrKykgewoJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ImJvdW5kYXJ5IjogIm5lYXJieSgiK2Nhbi5iYXNlLmpvaW4oW3AubGF0LCBwLmxuZywgIjUwMCJdLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiBpfSksIGJ1dHRvbiwgW10sIGZ1bmN0aW9uKG1zZykgewoJCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwgaXRlbS5sb2NhdGlvbiwge3R5cGU6IGl0ZW0uY2F0ZWdvcnksIG5hbWU6IGl0ZW0udGl0bGUsIHRleHQ6IGl0ZW0uYWRkcmVzc30pLCBjYW4udWkuZXhwbG9yZS5fdGFyZ2V0KQoJCQkJfSksIGNhbi5taXNjLkRlYnVnKHJlcykKCQkJfSkKCQl9Cgl9LAoJZGlyZWN0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgdmFyIHAgPSBjYW4ubWFwLmdldENlbnRlcigpOyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuZGlyZWN0aW9uLl90YXJnZXQpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW1sidHlwZSIsICJkcml2aW5nIiwgIndhbGtpbmciLCAiYmljeWNsaW5nIiwgInRyYW5zaXQiXV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJdmFyIGZyb20gPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uX2N1cnJlbnQpLCB0byA9IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGNhbi5jdXJyZW50Lml0ZW0pCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdCh7fSwge3R5cGU6IGxpc3RbMF0sICJmcm9tIjogY2FuLmJhc2Uuam9pbihbZnJvbS5sYXQsIGZyb20ubG5nXSwgaWNlLkZTKSwgInRvIjogY2FuLmJhc2Uuam9pbihbdG8ubGF0LCB0by5sbmddLCBpY2UuRlMpfSkKCQkJY2FuLnJ1bkFjdGlvbihtc2cuX2V2ZW50LCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsgdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpLCByb3V0ZSA9IHJlcy5yZXN1bHQucm91dGVzWzBdCgkJCQkJdmFyIGNvb3JzID0gcm91dGUucG9seWxpbmUsIHBsID0gW10sIGtyID0gMTAwMDAwMAoJCQkJCWZvciAodmFyIGkgPSAyOyBpIDwgY29vcnMubGVuZ3RoOyBpKyspIHsgY29vcnNbaV0gPSBOdW1iZXIoY29vcnNbaSAtIDJdKSArIE51bWJlcihjb29yc1tpXSkgLyBrciB9CgkJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBjb29ycy5sZW5ndGg7IGkgKz0gMikgeyBwbC5wdXNoKG5ldyBUTWFwLkxhdExuZyhjb29yc1tpXSwgY29vcnNbaSsxXSkpIH0KCQkJCQljYW4ub25pbXBvcnQuX3BvbHlsaW5lKGNhbiwgcGwpCgoJCQkJCWNhbi5jb3JlLkxpc3Qocm91dGUuc3RlcHMsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGkgPSBpdGVtLnBvbHlsaW5lX2lkeFswXQoJCQkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCB7bGF0OiBjb29yc1tpXSwgbG5nOiBjb29yc1tpKzFdfSwge3R5cGU6IGl0ZW0uY2F0ZWdvcnksIG5hbWU6IGl0ZW0uaW5zdHJ1Y3Rpb24sIHRleHQ6IGl0ZW0uYWN0X2Rlc2N9KSwgY2FuLnVpLmRpcmVjdGlvbi5fdGFyZ2V0KQoJCQkJCX0pLCBjYW4udXNlci50b2FzdFByb2Nlc3MoY2FuLCAiZGlzdGFuY2U6ICIrcm91dGUuZGlzdGFuY2UrIiBkdXJhdGlvbjogIityb3V0ZS5kdXJhdGlvbikKCQkJfSkKCQl9KQoJfSwKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwgY2FuLmN1cnJlbnQuaXRlbSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBjYW4uY29yZS5TcGxpdCgidHlwZSxuYW1lLHRleHQiKSwgZnVuY3Rpb24oYXJncykgeyB2YXIgcCA9IGNhbi5vbmV4cG9ydC5jZW50ZXIoY2FuKQoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuQ1JFQVRFLCBhcmdzLmNvbmNhdCgibGF0aXR1ZGUiLCBwLmxhdGl0dWRlLCAibG9uZ2l0dWRlIiwgcC5sb25naXR1ZGUpLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5iYXNlLkNvcHkocCwge25hbWU6IG1zZy5PcHRpb24obWRiLk5BTUUpLCB0ZXh0OiBtc2cuT3B0aW9uKG1kYi5URVhUKX0pKQoJCQl9LCB0cnVlKQoJCX0pCgl9LAoJX3BvaW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBpdGVtKSB7IHZhciByZWN0ID0gY2FuLnVpLmNvbnRlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKCQlyZXR1cm4gY2FuLmJhc2UuQ29weSh7bGVmdDogcmVjdC5sZWZ0K2V2ZW50LnBvaW50LngsIGJvdHRvbTogcmVjdC50b3ArZXZlbnQucG9pbnQueSwgbGF0aXR1ZGU6IHBhcnNlSW50KGV2ZW50LmxhdExuZy5sYXQqMTAwMDAwKSwgbG9uZ2l0dWRlOiBwYXJzZUludChldmVudC5sYXRMbmcubG5nKjEwMDAwMCl9LCBpdGVtLCB0cnVlKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbIm5hdGlvbiIsICJwcm92aW5jZSIsICJjaXR5IiwgImxhdGl0dWRlIiwgImxvbmdpdHVkZSIsICAidHlwZSIsICJuYW1lIiwgInRleHQiXSwKCXBvaW50OiBmdW5jdGlvbihjYW4sIHBvaW50LCBpdGVtKSB7IHJldHVybiBjYW4uYmFzZS5Db3B5KHtsYXRpdHVkZTogcGFyc2VJbnQocG9pbnQubGF0KjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQocG9pbnQubG5nKjEwMDAwMCl9LCBpdGVtLCB0cnVlKSB9LAoJY2VudGVyOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGNhbi5tYXAuZ2V0Q2VudGVyKCkpIH0sCgljdXJyZW50OiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgcCA9IGNhbi5vbmV4cG9ydC5jZW50ZXIoY2FuKTsgcC5sYXRpdHVkZSAvPSAxMDAwMDAsIHAubG9uZ2l0dWRlIC89IDEwMDAwMDsgY2FuLlN0YXR1cyhwKQoJCWNhbi5jdXJyZW50Lm1hcmtlci51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IGNhbi5tYXAuZ2V0Q2VudGVyKCl9XSkKCQljYW4uY3VycmVudC5sYWJlbC51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IGNhbi5tYXAuZ2V0Q2VudGVyKCl9XSkKCQljYW4uY3VycmVudC5jaXJjbGUuc2V0R2VvbWV0cmllcyhbe2NlbnRlcjogY2FuLm1hcC5nZXRDZW50ZXIoKSwgcmFkaXVzOiAzMDB9XSkKCX0sCglob3ZlcjogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJY2FuLmN1cnJlbnQuaG92ZXIuc2V0UG9zaXRpb24oY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSkpCgkJY2FuLmN1cnJlbnQuaG92ZXIuc2V0Q29udGVudChpdGVtLm5hbWUrIjxici8+IitpdGVtLnRleHQpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC9tZWRpYS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCAgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LmRpc3BsYXkoY2FuLCB0YXJnZXQpCgkJY2FuLnVpLmNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3R5cGU6ICJjYW52YXMiLCB3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MCwgc3R5bGU6IHtkaXNwbGF5OiAibm9uZSJ9fV0pLmZpcnN0CgoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCAidGQiXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5zdXAub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBjYW4uc3VwLCBrZXksIHZhbHVlLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucnVuKGV2ZW50KQoJCQkJfSkKCQkJfX0KCQl9LCBjYW4udWkuY29udGVudCkKCgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLlJlc3VsdCgpLCBjYW4udWkuZGlzcGxheSkKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoKCW9wZW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQluYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHt2aWRlbzoge3dpZHRoOiAzMjAsIGhlaWdodDogMjQwfX0sIGZ1bmN0aW9uKHN0cmVhbSkgewoJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgInZpZGVvIikKCQkJdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtLCB2aWRlby5wbGF5KCkKCQkJY2FuLnVpLnZpZGVvID0gdmlkZW8KCQl9LCBmdW5jdGlvbihlcnJvcikgewoJCQljYW4ubWlzYy5Mb2coIm9wZW4gY2FtZXJhIiwgZXJyb3IpCgkJfSkKCX0sCglzbmFwc2hvdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51aS5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UoY2FuLnVpLnZpZGVvLCAwLCAwKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3R5cGU6ICJpbWciLCBzcmM6IGNhbi51aS5jYW52YXMudG9EYXRhVVJMKCdpbWFnZS93ZWJwJyl9XSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jaGF0L3RyYW5zLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pCgkJY2FuLmZyb20gPSBjYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5ESVIsIGh0bWwuTEVGVCwgImZyb20iLCAidG8iKQoJCWNhbi50byA9IGNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgbmZzLkRJUiwgaHRtbC5SSUdIVCwgInRvIiwgImZyb20iKQoJCWNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgbmZzLlRSQVNILCBodG1sLkxFRlQsICJmcm9tIikKCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5UUkFTSCwgaHRtbC5SSUdIVCwgInRvIikKCX0sCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIGluZGV4LCBwb3MsIGZyb20sIHRvKSB7CgkJcmV0dXJuIGNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7dHlwZTogY2hhdC5TVE9SWSwgaW5kZXg6IGluZGV4fSwgZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHtmbG9hdDogcG9zLCBjbGVhcjogcG9zfSkKCQkJc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkvMikKCQkJc3ViLl9sZWdlbmQuaW5uZXJIVE1MID0gY2FuLk9wdGlvbihmcm9tKStpY2UuU1AraW5kZXgKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgIm1heC13aWR0aCIsIGNhbi5Db25mV2lkdGgoKS8yKQoKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgewoJCQkJaWYgKGNhbi5vbmFjdGlvbltjbWRzWzFdXSkgeyByZXR1cm4gY2FuLm9uYWN0aW9uW2NtZHNbMV1dKGNhbiwgZnJvbSwgdG8sIGV2ZW50LCBjbWRzLCBjYikgfQoKCQkJCXZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwge19wb2Q6IGNhbi5PcHRpb24oZnJvbSl9KQoJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGluZGV4LCBjbWRzLCBjYikKCQkJfQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJfSwKCXNlbmQ6IGZ1bmN0aW9uKGNhbiwgZnJvbSwgdG8sIGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgX2Zyb20gPSBjYW5bZnJvbV0sIF90byA9IGNhblt0b10KCQl2YXIgcGF0aCA9IGNhbi5yZXF1ZXN0KGV2ZW50KS5PcHRpb24obmZzLlBBVEgpCgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUUsCgkJCWZyb206IGNhbi5PcHRpb24oZnJvbSksIGZyb21fcGF0aDogcGF0aCwKCQkJdG86IGNhbi5PcHRpb24odG8pLCB0b19wYXRoOiBfdG8uT3B0aW9uKG5mcy5QQVRIKStwYXRoLnNwbGl0KGljZS5QUykucG9wKCksCgkJfSkKCQljYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbigpIHsgX3RvLlVwZGF0ZSgpIH0sIHRydWUpCgl9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY2hhdC93eC5qcyIKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge3NvdXJjZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly9yZXMud3gucXEuY29tL29wZW4vanMvandlaXhpbi0xLjYuMC5qcyJdLCBmdW5jdGlvbihjYW4pIHsKCQl3eC5jb25maWcoe2RlYnVnOiBtc2cuT3B0aW9uKCJkZWJ1ZyIpID09IGljZS5UUlVFLAoJCQlhcHBJZDogbXNnLk9wdGlvbigiYXBwaWQiKSwgc2lnbmF0dXJlOiBtc2cuT3B0aW9uKCJzaWduYXR1cmUiKSwKCQkJbm9uY2VTdHI6IG1zZy5PcHRpb24oIm5vbmNlc3RyIiksIHRpbWVzdGFtcDogbXNnLk9wdGlvbigidGltZXN0YW1wIiksCgoJCQlqc0FwaUxpc3Q6IGNhbi5jb3JlLkl0ZW0oewoJCQkJc2NhblFSQ29kZTogZnVuY3Rpb24oY2IpIHsgd3guc2NhblFSQ29kZSh7bmVlZFJlc3VsdDogY2I/IDE6IDAsIHNjYW5UeXBlOiBbInFyQ29kZSIsImJhckNvZGUiXSwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IocmVzLnJlc3VsdFN0ciwgY2FuLmJhc2UuUGFyc2VKU09OKHJlcy5yZXN1bHRTdHIpKQoJCQkJfSB9KSB9LAoJCQkJZ2V0TG9jYXRpb246IGZ1bmN0aW9uKGNiKSB7IHd4LmdldExvY2F0aW9uKHt0eXBlOiAiZ2NqMDIiLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih7dHlwZTogImdjajAyIiwgbmFtZTogIuW9k+WJjeS9jee9riIsIHRleHQ6ICLlvZPliY3kvY3nva4iLCBsYXRpdHVkZTogcGFyc2VJbnQocmVzLmxhdGl0dWRlKjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQocmVzLmxvbmdpdHVkZSoxMDAwMDApIH0pCgkJCQl9IH0pIH0sCgkJCQlvcGVuTG9jYXRpb246IGZ1bmN0aW9uKG1zZykgeyB3eC5vcGVuTG9jYXRpb24oewoJCQkJCWxhdGl0dWRlOiBwYXJzZUludChtc2cuT3B0aW9uKCJsYXRpdHVkZSIpKS8xMDAwMDAsCgkJCQkJbG9uZ2l0dWRlOiBwYXJzZUludChtc2cuT3B0aW9uKCJsb25naXR1ZGUiKSkvMTAwMDAwLAoJCQkJCW5hbWU6IG1zZy5PcHRpb24obWRiLk5BTUUpLCBhZGRyZXNzOiBtc2cuT3B0aW9uKG1kYi5URVhUKSwKCQkJCQlzY2FsZTogbXNnLk9wdGlvbigic2NhbGUiKXx8MTQsIGluZm9Vcmw6IG1zZy5PcHRpb24obWRiLkxJTkspLAoJCQkJfSkgfSwKCQkJCWNob29zZUltYWdlOiBmdW5jdGlvbihjYiwgY291bnQpIHsgd3guY2hvb3NlSW1hZ2Uoe2NvdW50OiBjb3VudHx8OSwgc2l6ZVR5cGU6IFsnb3JpZ2luYWwnLCAnY29tcHJlc3NlZCddLCBzb3VyY2VUeXBlOiBbJ2FsYnVtJywgJ2NhbWVyYSddLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihyZXMubG9jYWxJZHMpCgkJCQl9IH0pIH0sCgkJCX0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi51c2VyLmFnZW50W2tleV0gPSB2YWx1ZSwga2V5IH0pLAoJCX0pCgkJd3guZXJyb3IoZnVuY3Rpb24oZXJyKSB7IGNhbi51c2VyLnRvYXN0KGVyciwgInd4IGxvYWQiKSB9KQoJCXd4LnJlYWR5KGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coInJlYWR5IikgfSkKCX0pCn19KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgcGF0aHMgPSBjYW4uY29yZS5TcGxpdChjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaWNlLkZTKTsgY2FuLk9wdGlvbihuZnMuUEFUSCwgcGF0aHNbMF0pCgkJdmFyIGZpbGVzID0gY2FuLmNvcmUuU3BsaXQoY2FuLk9wdGlvbihuZnMuRklMRSksIGljZS5GUyk7IGNhbi5PcHRpb24obmZzLkZJTEUsIGZpbGVzWzBdKQoJCWNhbi50YWJ2aWV3ID0gY2FuLnRhYnZpZXd8fHt9LCBjYW4uaGlzdG9yeSA9IGNhbi5oaXN0b3J5fHxbXSwgY2FuLnRvb2xraXQgPSB7fSwgY2FuLmV4dGVudGlvbnMgPSB7fQoJCWNhbi5wcm9maWxlX3NpemUgPSB7fSwgY2FuLmRpc3BsYXlfc2l6ZSA9IHt9CgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5wcm9qZWN0LCAyNDApCgkJY2FuLm9uaW1wb3J0Ll9wcm9qZWN0KGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJY2FuLm9uaW1wb3J0Ll9kaXNwbGF5KGNhbiwgY2FuLnVpLmRpc3BsYXkpCgkJY2FuLm9uaW1wb3J0Ll9pbnB1dChjYW4pCgoJCWNhbi51aS5fY29udGVudCA9IGNhbi51aS5jb250ZW50CgkJY2FuLnVpLl9wcm9maWxlX291dHB1dCA9IGNhbi51aS5wcm9maWxlX291dHB1dAoJCWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9zdGF0dXMpCgkJY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIGNhbi5vbnBsdWdpbikKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCgkJc3dpdGNoIChjYW4uTW9kZSgpKSB7CgkJCWNhc2UgInNpbXBsZSI6IGNhbi5vbmltcG9ydC5fc2ltcGxlKGNhbik7IGJyZWFrCgkJCWNhc2UgImZsb2F0IjogYnJlYWsKCQkJY2FzZSAiY21kIjogY2FuLm9uaW1wb3J0Ll90YWJzKGNhbikgLy8gbm8gYnJlYWsKCQkJY2FzZSAiZnVsbCI6IC8vIG5vIGJyZWFrCgkJCWRlZmF1bHQ6IGlmIChjYW4uQ29uZkhlaWdodCgpIDwgMzIwKSB7IGNhbi5Db25mSGVpZ2h0KDMyMCkgfQoJCQkJY2FuLm9uaW1wb3J0LnByb2plY3QoY2FuLCBwYXRocyksIGNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQkJCWNhbi5vbmltcG9ydC5fdG9vbGtpdChjYW4sIGNhbi51aS50b29sa2l0KSwgY2FuLm9uaW1wb3J0Ll9zZXNzaW9uKGNhbiwgbXNnLCBmdW5jdGlvbigpIHsKCQkJCQlmaWxlcy5sZW5ndGggPiAxICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5OZXh0KGZpbGVzLnNsaWNlKDEpLCBmdW5jdGlvbihmaWxlLCBuZXh0KSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGZpbGUsIGNhbi5PcHRpb24obmZzLkxJTkUpLCBuZXh0KQoJCQkJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGhzWzBdLCBmaWxlc1swXSwgIiIpIH0pIH0pCgkJCQl9KSwgY2FuLm9uaW1wb3J0Ll9rZXlkb3duKGNhbikKCQl9CgoJCXZhciBoYXNoID0gbG9jYXRpb24uaGFzaDsgY2FuLmlzQ21kTW9kZSgpIHx8IChjYW4udGFidmlld1tjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IG1zZykKCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuTElORSksIGZ1bmN0aW9uKCkgewoJCQlpZiAoY2FuLmlzQ21kTW9kZSgpICYmIGhhc2gpIHsgdmFyIGFyZ3MgPSBjYW4uY29yZS5TcGxpdChkZWNvZGVVUklDb21wb25lbnQoaGFzaCkuc2xpY2UoMSkpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgYXJnc1swXSwgYXJnc1sxXSkgfSkKCQkJfQoJCX0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4pIHsKCX0sCglfcHJvamVjdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9Cgl9LAoJX3Byb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVUXSk7IGNhbi51aS5wcm9maWxlX291dHB1dCA9IHVpLm91dHB1dAoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIGtpdC5EaWN0KAoJCQljbGkuQ0xPU0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCQkJY2xpLkNMRUFSLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB1aS5vdXRwdXQpIH0sCgkJCWNsaS5TSE9XLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pIH0sCgkJCW5mcy5MT0FELCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bbmZzLkxPQURdKGV2ZW50LCBjYW4pIH0sCgkJCW1kYi5MSU5LLCBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKFtuZnMuWk1MLCBuZnMuSU1MXS5pbmRleE9mKGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpID4gLTEpIHsKCQkJCQljYW4udXNlci5vcGVuKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgewoJCQkJCQlwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCB3ZWJzaXRlOiBjYW4uYmFzZS50cmltUHJlZml4KGNhbi5iYXNlLlBhdGgoY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKSwgInNyYy93ZWJzaXRlLyIpLAoJCQkJCX0pKQoJCQkJfSBlbHNlIHsKCQkJCQljYW4udXNlci5vcGVuKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgewoJCQkJCQlwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCBjbWQ6IGNhbi5iYXNlLlBhdGgoY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCQkJCX0pKQoJCQkJfQoJCQl9LAoJCQltZGIuUExVR0lOLCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGRhdGEpIHsgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBkYXRhLCB1aS5vdXRwdXQpIH0pIH0sCgkJCWh0bWwuV0lEVEgsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuV0lEVEgsIHZhbHVlOiBjYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildKjEwMC9jYW4uQ29uZldpZHRoKCl8fDUwfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJCQljYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gY2FuLkNvbmZXaWR0aCgpKnBhcnNlSW50KGxpc3RbMF0pLzEwMAoJCQkJCWNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikKCQkJCX0pCgkJCX0KCQkpKTsgdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBhY3Rpb25bc2hvdz8gY2xpLlNIT1c6IGNsaS5DTE9TRV0oZXZlbnQpIH0KCX0sCglfZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtodG1sLkFDVElPTiwgaHRtbC5PVVRQVVQsIGh0bWwuU1RBVFVTXSk7IGNhbi51aS5kaXNwbGF5X291dHB1dCA9IHVpLm91dHB1dCwgY2FuLnVpLmRpc3BsYXlfc3RhdHVzID0gdWkuc3RhdHVzCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW10sIHVpLmFjdGlvbiwga2l0LkRpY3QoCgkJCWNsaS5DTE9TRSwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJCQljbGkuQ0xFQVIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHVpLm91dHB1dCkgfSwKCQkJY2xpLkVYRUMsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikgfSwKCQkJbWRiLlBMVUdJTiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihkYXRhKSB7IGNhbi5vbmltcG9ydC5wbHVnKGNhbiwgZGF0YSwgdWkub3V0cHV0KSB9KSB9LAoJCQlodG1sLkhFSUdIVCwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogaHRtbC5IRUlHSFQsIHZhbHVlOiBjYW4uZGlzcGxheV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildKjEwMC9jYW4uQ29uZkhlaWdodCgpfHw1MH1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQkJY2FuLmRpc3BsYXlfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IGNhbi5Db25mSGVpZ2h0KCkqcGFyc2VJbnQobGlzdFswXSkvMTAwCgkJCQkJY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKQoJCQkJfSkKCQkJfQoJCSkpOyB0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGFjdGlvbltzaG93PyBjbGkuRVhFQzogY2xpLkNMT1NFXShldmVudCkgfQoJfSwKCV90b29sa2l0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi51aS50b29sa2l0ID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgInRvb2xraXQiLCB7fSwgY2FuLl9vdXRwdXQpCgl9LAoJX2tleWRvd246IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25rZXltYXAuX2J1aWxkKGNhbikKCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05LRVlET1dOLCBmdW5jdGlvbihldmVudCkgewoJCQljYW4uX2tleV9saXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBtZGIuUExVR0lOLCBjYW4uX2tleV9saXN0LCBjYW4udWkuY29udGVudCkKCQl9KQoJfSwKCV9zZXNzaW9uOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmltcG9ydC5zZXNzKGNhbiwgIiIsIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQuc2VzcyhjYW4sIHsKCQkJcGx1ZzogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJwbHVnIikpLnJldmVyc2UoKSwKCQkJZXh0czogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJleHRzIikpLnJldmVyc2UoKSwKCQkJdGFiczogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJ0YWJzIikpLAoJCX0pIH0pCgl9LAoJX3NpbXBsZTogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnRhYnZpZXdbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBjYW4uX21zZwoJCWNhbi5Db25mSGVpZ2h0KCIiKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgaHRtbC5PVVRQVVQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAic2ltcGxlIikKCX0sCglfdGFiczogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnVpLl90YWJzID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiAidGFicyJ9XSwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLnVpLl9wYXRoID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiAicGF0aCJ9XSwgY2FuLnVpLmNvbnRlbnQpCgl9LAoKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7IGlmIChjYW4uaXNTaW1wbGVNb2RlKCkpIHsgcmV0dXJuIH0KCQlpZiAoY2FuLmlzRmxvYXRNb2RlKCkpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KSB9CgoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKSsoY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDE2OiAwKS0oY2FuLnVzZXIuaXNXaW5kb3dzICYmICFjYW4uaXNDbWRNb2RlKCk/IDIwOiAwKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fCh3aWR0aC1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkvMikKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLmNvbnRlbnQsIHdpZHRoLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoLWNhbi51aS5wcm9maWxlLm9mZnNldFdpZHRoKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuZGlzcGxheSwgd2lkdGgtY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpCgoJCXZhciBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJaWYgKGNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5pc0Zsb2F0TW9kZSgpKSB7IGhlaWdodCA9IGNhbi5fcm9vdC5faGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUIH0KCgkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgewoJCQlpZiAoY2FuLnVpLmRpc3BsYXkuZGlzcGxheSAhPSBodG1sLk5PTkUpIHsKCQkJCWlmIChjYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQgPiBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKSAvIDIsIDIwMCkpIHsKCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5X291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKSAvIDIsIDIwMCkpCgkJCQl9CgkJCX0KCQkJaWYgKGNhbi5fc3RhdHVzLnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FKSB7IGhlaWdodCArPSBodG1sLkFDVElPTl9IRUlHSFQgfQoJCQl2YXIgcmVzdCA9IGNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodCtjYW4udWkuX3RhYnMub2Zmc2V0SGVpZ2h0K2Nhbi51aS5fcGF0aC5vZmZzZXRIZWlnaHQrNAoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5jb250ZW50LCBoZWlnaHQraHRtbC5BQ1RJT05fSEVJR0hULXJlc3QpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBoZWlnaHQtY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0KQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9qZWN0LCBoZWlnaHQraHRtbC5BQ1RJT05fSEVJR0hUKQoJCX0gZWxzZSB7IHZhciByZXN0ID0gY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0OyBpZiAoaGVpZ2h0IDwgMzIwKSB7IGhlaWdodCA9IDMyMCB9CgkJCWlmICghY2FuLmlzRnVsbE1vZGUoKSkgewoJCQkJY2FuLl9taW5faGVpZ2h0ID0gY2FuLl9taW5faGVpZ2h0fHxoZWlnaHQsIGhlaWdodCA+PSBjYW4uX21pbl9oZWlnaHQgJiYgKGNhbi5fbWluX2hlaWdodCA9IGhlaWdodCkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuTUlOX0hFSUdIVCwgY2FuLl9taW5faGVpZ2h0KQoJCQl9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGNhbi51c2VyLmlzTW9iaWxlPyBodG1sLkhFSUdIVDogaHRtbC5NQVhfSEVJR0hULCBoZWlnaHQtcmVzdCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2plY3QsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCtyZXN0KQoJCX0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvZmlsZSwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGlmcmFtZSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpZnJhbWUsIHtoZWlnaHQ6IGNhbi51aS5wcm9maWxlLm9mZnNldEhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQtNCwgd2lkdGg6IGNhbi51aS5wcm9maWxlLm9mZnNldFdpZHRofSkKCQl9KQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgewoJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgWwoJCQl7bmFtZTogInNvdXJjZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgdmFyIHRvdGFsID0gMAoJCQkJZnVuY3Rpb24gc2hvdyhwYXRoLCB0YXJnZXQpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdCh7fSwge2Rpcl9yb290OiBwYXRoLCBkaXJfZGVlcDogdHJ1ZX0pLCBbaWNlLlBXRF0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4uT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKGl0ZW0ucGF0aCkgPT0gMCkgeyBpdGVtLmV4cGFuZCA9IHRydWUgfSB9KQoJCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgbGlzdCwgbmZzLlBBVEgsIGljZS5QUywgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBpdGVtLnBhdGgpIC8vIOaYvuekuuaWh+S7tgoJCQkJCX0sIHRhcmdldCksIGNhbi5TdGF0dXMoIuaWh+S7tuaVsCIsIHRvdGFsICs9IG1zZy5MZW5ndGgoKSkKCQkJCX0sIHRydWUpIH0gaWYgKHBhdGgubGVuZ3RoID09IDEpIHsgcmV0dXJuIHNob3cocGF0aFswXSwgdGFyZ2V0KSB9CgoJCQkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBjYW4uY29yZS5MaXN0KHBhdGgsIGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIHtuYW1lOiBwYXRoLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHNob3cocGF0aCwgdGFyZ2V0KSB9fSB9KSwgdGFyZ2V0KQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gIiIgfSkKCQkJfX0sCgkJCXtuYW1lOiAicGx1Z2luIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBjYW4uY29yZS5JdGVtKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB7aW5kZXg6IGNhbi5iYXNlLnRyaW1QcmVmaXgoa2V5LCAiY2FuLiIpfSB9KSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLmNvcmUuS2V5cygiY2FuIiwgaXRlbS5pbmRleCksIGN0eC5JTkRFWCkgLy8g5pi+56S65o+S5Lu2CgkJCQl9LCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KQoJfSwKCWhpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgcHVzaCkgewoJCWNhbi5iYXNlLkVxKHB1c2gsIGNhbi5oaXN0b3J5W2Nhbi5oaXN0b3J5Lmxlbmd0aC0xXSkgfHwgY2FuLmhpc3RvcnkucHVzaChwdXNoKQoJCXJldHVybiBjYW4uU3RhdHVzKCLot7PovazmlbAiLCBjYW4uaGlzdG9yeS5sZW5ndGgpLCBwdXNoCgl9LAoJdGFidmlldzogZnVuY3Rpb24oY2FuLCBwYXRoLCBmaWxlLCBsaW5lLCBjYiwgc2tpcCwgc2tpcDIpIHsgdmFyIGtleSA9IGNhbi5vbmV4cG9ydC5rZXlzKGNhbiwgZmlsZSwgcGF0aCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7IGxvY2F0aW9uLmhhc2ggPSBmaWxlK2ljZS5GUysobGluZXx8MSkgfQoJCWlmICghc2tpcCAmJiBjYW4udGFidmlld1trZXldKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShwYXRoK2ZpbGUpCgkJCWNhbi5fbXNnICYmIGNhbi5fbXNnLk9wdGlvbihuZnMuTElORSwgY2FuLk9wdGlvbihuZnMuTElORSkpLCBjYW4uX21zZyA9IGNhbi50YWJ2aWV3W2tleV0KCQkJY2FuLk9wdGlvbih7cGF0aDogcGF0aCwgZmlsZTogZmlsZSwgbGluZTogbGluZXx8Y2FuLl9tc2cuT3B0aW9uKG5mcy5MSU5FKXx8MX0pCgkJCXJldHVybiBjYW4uX21zZy5PcHRpb24oY2FuLk9wdGlvbigpKSwgY2FuLm9uc3ludGF4Ll9pbml0KGNhbiwgY2FuLl9tc2csIGNiLCBza2lwMikKCQl9CgoJCWZ1bmN0aW9uIHNob3cobXNnKSB7IHZhciBza2lwMiA9IHNraXA7IGNhbi50YWJ2aWV3W2tleV0gPSBtc2cKCQkJY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbe25hbWU6IGZpbGUuc3BsaXQobGluZSA9PSBjdHguSU5ERVg/IGljZS5QVDogaWNlLlBTKS5wb3AoKSwgdGV4dDogZmlsZX1dLCBmdW5jdGlvbihldmVudCwgbWV0YSkgewoJCQkJY2FuLl90YWIgPSBtc2cuX3RhYiA9IGV2ZW50LnRhcmdldCwgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBmaWxlLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSwgY2IsIGZhbHNlLCBza2lwMiksIGNiID0gbnVsbCwgc2tpcDIgPSBmYWxzZQoJCQl9LCBmdW5jdGlvbihpdGVtKSB7CgkJCQlkZWxldGUoY2FuLnRhYnZpZXdba2V5XSkKCQkJCWRlbGV0ZShjYW4uX2NhY2hlX2RhdGFbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLl9jb250ZW50Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuX3Byb2ZpbGVfb3V0cHV0Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuZGlzcGxheV9vdXRwdXQuX2NhY2hlW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJbXNnLl9jb250ZW50ICE9IGNhbi51aS5fY29udGVudCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBtc2cuX2NvbnRlbnQpCgkJCX0sIGNhbi51aS5fdGFicywgZnVuY3Rpb24oaXRlbSkge30pCgkJfQoKCQljYW4uT3B0aW9uKGNhbi5vbmltcG9ydC5oaXN0b3J5KGNhbiwge3BhdGg6IHBhdGgsIGZpbGU6IGZpbGUsIGxpbmU6IGxpbmV9KSkKCQlsaW5lID09IGN0eC5JTkRFWD8gc2hvdyhjYW4ucmVxdWVzdCh7fSwge2luZGV4OiBmaWxlLCBsaW5lOiBsaW5lfSkpOgoJCQlsaW5lID09IHdlYi5EUkVBTT8gc2hvdyhjYW4ucmVxdWVzdCh7fSwge2luZGV4OiBmaWxlLCBsaW5lOiBsaW5lfSkpOgoJCQkJY2FuLnJ1bih7fSwgW3BhdGgsIGZpbGVdLCBzaG93LCB0cnVlKQoJfSwKCXByb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIHdpZHRoID0gY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXXx8KGNhbi5Db25mV2lkdGgoKS1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkvMgoJCWlmIChtc2cpIHsKCQkJdmFyIHN1cCA9IGNhbi50YWJ2aWV3W2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGZhbHNlKQoJCQlpZiAobXNnLlJlc3VsdCgpLmluZGV4T2YoIjxpZnJhbWUiKSA+IC0xKSB7CgkJCQlpZiAoc3VwLl9wcm9maWxlX291dHB1dCAhPSBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHN1cC5fcHJvZmlsZV9vdXRwdXQpIH0KCQkJCWNhbi51aS5wcm9maWxlX291dHB1dCA9IHN1cC5fcHJvZmlsZV9vdXRwdXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQucGFyZW50Tm9kZSwgW3t2aWV3OiAib3V0cHV0IiwgaW5uZXI6IG1zZy5SZXN1bHQoKX1dKS5vdXRwdXQKCQkJfSBlbHNlIHsKCQkJCWNhbi51aS5wcm9maWxlX291dHB1dCA9IHN1cC5fcHJvZmlsZV9vdXRwdXQgPSBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0CgkJCQljYW4ub25pbXBvcnQucHJvY2VzcyhjYW4sIG1zZywgY2FuLnVpLl9wcm9maWxlX291dHB1dCwgd2lkdGgsIGNhbi51aS5wcm9maWxlLm9mZnNldEhlaWdodCkKCQkJfQoJCX0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCB0cnVlKQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCWRpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlaWdodCA9IGNhbi5kaXNwbGF5X3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fHtzaDogY2FuLkNvbmZIZWlnaHQoKS8yfVtjYW4ucGFyc2VdfHxjYW4uQ29uZkhlaWdodCgpLzQKCQlpZiAobXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9jZXNzKGNhbiwgbXNnLCBjYW4udWkuZGlzcGxheV9vdXRwdXQsIGNhbi51aS5kaXNwbGF5Lm9mZnNldFdpZHRoLCBoZWlnaHQpCgkJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUyksIGNhbi51aS5kaXNwbGF5X3N0YXR1cykKCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgl9LAoJcHJvY2VzczogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCwgd2lkdGgsIGhlaWdodCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfUFJPQ0VTUykgPT0gIl9maWVsZCIpIHsKCQkJbXNnLlRhYmxlKGZ1bmN0aW9uKG1ldGEpIHsgbWV0YS5kaXNwbGF5ID0gbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpCgkJCQljYW4ub25pbXBvcnQucGx1ZyhjYW4sIG1ldGEsIHRhcmdldCwgZnVuY3Rpb24oc3ViKSB7IHdpZHRoICYmIHN1Yi5Db25mV2lkdGgod2lkdGgpLCBoZWlnaHQgJiYgc3ViLkNvbmZIZWlnaHQoaGVpZ2h0KSwgc3ViLkZvY3VzKCkgfSkKCQkJfSkKCQl9IGVsc2UgaWYgKG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKSAhPSAiIikgewoJCQljYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpLCB0YXJnZXQsIGZhbHNlLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9KSB9KQoJCX0gZWxzZSB7CgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLCB0YXJnZXQpCgkJfQoJfSwKCXRvb2xraXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgY2IpIHsgbWV0YS5tc2cgPSB0cnVlCgkJY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBtZXRhLCBjYW4udWkudG9vbGtpdC5vdXRwdXQsIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLTQqaHRtbC5BQ1RJT05fSEVJR0hUKSwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoKSkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCgkJCWNhbi5fc3RhdHVzLmFwcGVuZENoaWxkKHN1Yi5fbGVnZW5kKSwgc3ViLl9sZWdlbmQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9zdGF0dXMsIGljZS5QVCtodG1sLlNFTEVDVClbMF0gPT0gZXZlbnQudGFyZ2V0KSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGV2ZW50LnRhcmdldCwgaHRtbC5TRUxFQ1QpCgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLlNFTEVDVCkKCQkJCQlyZXR1cm4KCQkJCX0KCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkudG9vbGtpdC5vdXRwdXQsIGh0bWwuRklFTERTRVQsIHN1Yi5fdGFyZ2V0KSwgc3ViLkZvY3VzKCkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX3N0YXR1cywgaHRtbC5MRUdFTkQsIGV2ZW50LnRhcmdldCkKCQkJCWlmIChtZXRhLm1zZyA9PSB0cnVlKSB7IG1ldGEubXNnID0gZmFsc2UsIHN1Yi5VcGRhdGUoKSB9CgkJCX0sIHN1Yi5zZWxlY3QgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHN1Yi5fbGVnZW5kLmNsaWNrKCksIHN1YiB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBzdWIuc2VsZWN0KCkgfQoJCQlzdWIuX2xlZ2VuZC5vbm1vdXNlZW50ZXIgPSBudWxsCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pCgl9LAoJZXh0czogZnVuY3Rpb24oY2FuLCB1cmwsIGNiKSB7CgkJY2FuLnJlcXVpcmUoW3VybF0sIGZ1bmN0aW9uKCkge30sIGZ1bmN0aW9uKGNhbiwgbmFtZSwgc3ViKSB7IHN1Yi5faW5pdChjYW4sIGNhbi5iYXNlLlBhcnNlVVJMKHN1Yi5fcGF0aCksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4uZXh0ZW50aW9uc1t1cmwuc3BsaXQoIj8iKVswXV0gPSBzdWIsIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pIH0pCgl9LAoJc2VzczogZnVuY3Rpb24oY2FuLCBzZXNzLCBjYikgeyBzZXNzID0gc2Vzc3x8Y2FuLnVzZXIubG9jYWxTdG9yYWdlKGNhbiwgIndlYi5jb2RlLmlubmVyLnNlc3MiKQoJCWNhbi5jb3JlLk5leHQoc2Vzcy5wbHVnLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBpdGVtfSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0W2l0ZW1dID0gc3ViLCBuZXh0KCkgfSkgfSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5jb3JlLk5leHQoc2Vzcy5leHRzLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbmltcG9ydC5leHRzKGNhbiwgaXRlbSwgbmV4dCkgfSwgZnVuY3Rpb24oKSB7CgkJCQl2YXIgcGF0aCA9IGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlID0gY2FuLk9wdGlvbihuZnMuRklMRSksIGxpbmUgPSBjYW4uT3B0aW9uKG5mcy5MSU5FKQoJCQkJY2FuLmJhc2UuZ2V0VmFsaWQoc2Vzcy50YWJzKT8gY2FuLmNvcmUuTmV4dChzZXNzLnRhYnMsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgdmFyIGxzID0gaXRlbS5zcGxpdChpY2UuREYpOyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGxzWzBdLCBsc1sxXSwgbHNbMl0sIG5leHQpIH0sCgkJCQkJZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgZmlsZSwgbGluZSwgY2IpIH0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQkJfSkKCQl9KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTlBMVUdJTiwge2hlbHA6ICLms6jlhozmj5Lku7YiLCAKCSJjYW4uY29kZS5pbm5lci5rZXltYXAiOiBzaHkoIuaMiemUriIsIHt9LCBbIm1vZGUiLCAia2V5IiwgaWNlLkxJU1QsIGljZS5CQUNLXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4uY29yZS5JdGVtKGNhbi5vbmtleW1hcC5fbW9kZSwgZnVuY3Rpb24obW9kZSwgdmFsdWUpIHsKCQkJKCFjbWRzWzBdIHx8IGNtZHNbMF0gPT0gbW9kZSkgJiYgY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oa2V5LCBmdW5jKSB7CgkJCQlpZiAoY21kc1swXSA9PSBtb2RlICYmIGNtZHNbMV0gPT0ga2V5KSB7CgkJCQkJbXNnLlB1c2goImtleSIsICJtb2RlIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBtb2RlKQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAia2V5IikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBrZXkpCgkJCQkJbXNnLlB1c2goImtleSIsICJoZWxwIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBmdW5jLmhlbHApCgkJCQkJbXNnLlB1c2goImtleSIsICJmdW5jIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBmdW5jLnRvU3RyaW5nKCkpCgkJCQl9IGVsc2UgaWYgKCFjbWRzWzBdIHx8ICFjbWRzWzFdKSB7CgkJCQkJbXNnLlB1c2goa2l0LkRpY3QoIm1vZGUiLCBtb2RlLCAia2V5Iiwga2V5LCAiaGVscCIsIGZ1bmMuaGVscHx8ZnVuYy50b1N0cmluZygpKSkKCQkJCX0KCQkJfSkKCQl9KSwgbXNnLlN0YXR1c1RpbWVDb3VudCgpCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTlNZTlRBWCwge2hlbHA6ICLor63ms5Xpq5jkuq4iLCBsaXN0OiBbImtleXdvcmQiLCAicHJlZml4IiwgImxpbmUiXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgc2tpcCkgewoJCWlmIChjYW4udWkuX3BhdGgpIHsKCQkJY2FuLnVpLl9wYXRoLmlubmVySFRNTCA9IG1zZy5PcHRpb24oY3R4LklOREVYKT8gbXNnLk9wdGlvbihuZnMuTElORSkgPT0gd2ViLkRSRUFNPwoJCQkJLyogZHJlYW0gKi8gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgdG9waWM6IGNhbi5taXNjLlNlYXJjaChjYW4sICJ0b3BpYyIpfSwgdHJ1ZSkpOgoJCQkJLyogaW5kZXggKi8gbXNnLk9wdGlvbihuZnMuRklMRSk6IC8qIGZpbGUgKi8gY2FuLmJhc2UuUGF0aChtc2cuT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpCgkJfQoJCWNhbi51aS5jdXJyZW50ICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuY3VycmVudCwgIW1zZy5PcHRpb24oY3R4LklOREVYKSkKCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKGNhY2hlX2RhdGEpIHsKCQkJY2FuLmZpbGUgJiYgKGNhY2hlX2RhdGFbY2FuLmZpbGVdID0ge2N1cnJlbnQ6IGNhbi5jdXJyZW50LCBtYXg6IGNhbi5tYXgsCgkJCQlwcm9maWxlX2Rpc3BsYXk6IGNhbi51aS5wcm9maWxlLnN0eWxlLmRpc3BsYXksIGRpc3BsYXlfZGlzcGxheTogY2FuLnVpLmRpc3BsYXkuc3R5bGUuZGlzcGxheSwKCQkJfSkKCQkJY2FuLmZpbGUgPSBjYW4uYmFzZS5QYXRoKG1zZy5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSkKCQkJY2FuLnBhcnNlID0gY2FuLmJhc2UuRXh0KGNhbi5maWxlKSwgY2FuLlN0YXR1cygi5qih5byPIiwgInBsdWdpbiIpCgoJCQl2YXIgcCA9IGNhY2hlX2RhdGFbY2FuLmZpbGVdOyBwICYmIChjYW4uY3VycmVudCA9IHAuY3VycmVudCwgY2FuLm1heCA9IHAubWF4KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCB7ZGlzcGxheTogcD8gcC5wcm9maWxlX2Rpc3BsYXk6IGh0bWwuTk9ORX0pCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHtkaXNwbGF5OiBwPyBwLmRpc3BsYXlfZGlzcGxheTogaHRtbC5OT05FfSkKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5fdGFicywgaHRtbC5ESVZfVEFCUywgbXNnLl90YWIpCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgbXNnLl90YWIpCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJCW1zZy5PcHRpb24oY3R4LklOREVYKSAmJiBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5PUFRJT05fQVJHUylbMF0pCgkJCX0pCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuX2NvbnRlbnQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cygiZGl2LmNvbnRlbnQiLCBodG1sLklGUkFNRSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgaXRlbSA9PSBtc2cuX2NvbnRlbnQpKSB7IGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50IH0KCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLl9wcm9maWxlX291dHB1dC5wYXJlbnROb2RlLCBjYW4ucGFnZS5LZXlzKCJkaXYub3V0cHV0IiksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgaXRlbSA9PSBtc2cuX3Byb2ZpbGVfb3V0cHV0KSkgeyBtc2cuX3Byb2ZpbGVfb3V0cHV0IH0KCQkJfSkKCQkJcmV0dXJuIGNhbi5maWxlCgkJfSwgY2FuLnVpLl9jb250ZW50LCBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0LCBjYW4udWkuZGlzcGxheV9vdXRwdXQpICYmICFza2lwKSB7CgkJCXJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShudWxsLCBjYW4sIG1zZy5PcHRpb24obmZzLkxJTkUpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJfQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCWlmIChtc2cuT3B0aW9uKGN0eC5JTkRFWCkpIHsKCQkJaWYgKG1zZy5PcHRpb24obmZzLkxJTkUpID09IHdlYi5EUkVBTSkgewoJCQkJaWYgKG1zZy5fY29udGVudCkgeyByZXR1cm4gfQoJCQkJY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3R5cGU6IGh0bWwuSUZSQU1FLCBzcmM6IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogbXNnLk9wdGlvbihuZnMuRklMRSksIHRvcGljOiBjYW4ubWlzYy5TZWFyY2goY2FuLCAidG9waWMiKX0sIHRydWUpLCB3aWR0aDogY2FuLnVpLmNvbnRlbnQub2Zmc2V0V2lkdGgsIGhlaWdodDogY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0fV0sIGNhbi51aS5jb250ZW50KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQl9CgoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4udWkuX2NvbnRlbnQsIHRydWUpCgkJCXJldHVybiBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIHtpbmRleDogbXNnLk9wdGlvbihjdHguSU5ERVgpfSwgY2FuLnVpLmNvbnRlbnQsIGZ1bmN0aW9uKHN1YikgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodChjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQpKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLnVpLmNvbnRlbnQub2Zmc2V0V2lkdGgpKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHN1Yi5Gb2N1cygpIH0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCgkJCQlzdWIub25hY3Rpb24uY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmJhY2soe30sIGNhbiksIG1zZy5fdGFiLl9jbG9zZSgpIH0KCQkJCXN1Yi5vbmltcG9ydC5fb3BlbiA9IGZ1bmN0aW9uKHN1YiwgbXNnLCBfYXJnKSB7IHZhciB1cmwgPSBjYW4uYmFzZS5QYXJzZVVSTChfYXJnKSwgbHMgPSB1cmwub3JpZ2luLnNwbGl0KCIvY2hhdC9wb2QvIikKCQkJCQlpZiAoX2FyZy5pbmRleE9mKGxvY2F0aW9uLm9yaWdpbikgPT0gMCAmJiBscy5sZW5ndGggPiAxKSB7CgkJCQkJCXJldHVybiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsc1sxXS5zcGxpdCgiLyIpWzBdLCB3ZWIuRFJFQU0pLCBzdWIuVXBkYXRlKCkgLy8g5pi+56S656m66Ze0CgkJCQkJfQoJCQkJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBzdWIuVXBkYXRlKCkKCQkJCX0KCQkJfSkKCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnVpLl9jb250ZW50LCB0cnVlKQoKCQlmdW5jdGlvbiBpbml0KHApIHsKCQkJY2FuLm1heCA9IDAsIGNhbi5jb3JlLkxpc3QoY2FuLmxzID0gbXNnLlJlc3VsdCgpLnNwbGl0KGljZS5OTCksIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uYWN0aW9uLmFwcGVuZExpbmUoY2FuLCBpdGVtKSB9KQoJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShudWxsLCBjYW4sIG1zZy5PcHRpb24obmZzLkxJTkUpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgoJCQltc2cuT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKCJ3ZWJzaXRlLyIpID09IDAgJiYgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKQoJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIGNhbi5fZmllbGRzLCBjaGF0LlBMVUdJTikpIHsKCQkJCXAgJiYgcC5yZW5kZXIgJiYgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKQoJCQkJcCAmJiBwLmVuZ2luZSAmJiBjYW4ub25hY3Rpb25bY2xpLkVYRUNdKHt9LCBjYW4pCgkJCX0KCQl9CgkJY2FuLkNvbmYoInBsdWciKSAmJiAoY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0gPSBjYW4uQ29uZigicGx1ZyIpKQoJCXZhciBwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV07ICFwPyBjYW4ucnVuQWN0aW9uKHt9LCBtZGIuUExVR0lOLCBbY2FuLnBhcnNlLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgbXNnLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJaW5pdChwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0gPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSkKCQl9KTogaW5pdChwKQoJfSwKCV9wYXJzZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7IGlmIChsaW5lLmluZGV4T2YoIjxodG1sIikgPT0gMCkgeyByZXR1cm4gbGluZSB9CgkJbGluZSA9IGNhbi5wYWdlLnJlcGxhY2UoY2FuLCBsaW5lfHwiIikKCgkJZnVuY3Rpb24gd3JhcCh0eXBlLCBzdHIpIHsgcmV0dXJuIHR5cGU/ICc8c3BhbiBjbGFzcz0iJyt0eXBlKyciPicrc3RyKyc8L3NwYW4+Jzogc3RyIH0KCQl2YXIgcCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdOyBpZiAoIXApIHsgcmV0dXJuIGxpbmUgfSBwID0gY2FuLm9uc3ludGF4W3AubGlua118fHAsIHAuc3BsaXQgPSBwLnNwbGl0fHx7fQoJCXAua2V5d29yZCAmJiAobGluZSA9IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQobGluZSwgcC5zcGxpdC5zcGFjZXx8Ilx0ICIsIHAuc3BsaXQub3BlcmF0b3J8fCJ7WyguLDo7IXw8PildfSIsIHtkZXRhaWw6IHRydWV9KSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7CgkJCWl0ZW0gPSBjYW4uYmFzZS5pc09iamVjdChpdGVtKT8gaXRlbToge3RleHQ6IGl0ZW19OyB2YXIgdGV4dCA9IGl0ZW0udGV4dCwgdHlwZSA9IGl0ZW0ua2V5d29yZHx8cC5rZXl3b3JkW3RleHRdCgoJCQlzd2l0Y2ggKGl0ZW0udHlwZSkgeyBjYXNlIGh0bWwuU1BBQ0U6IHJldHVybiB0ZXh0CgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXR1cm4gd3JhcChsYW5nLlNUUklORywgaXRlbS5sZWZ0K3RleHQraXRlbS5yaWdodCkKCQkJCWRlZmF1bHQ6IHJldHVybiB3cmFwKHR5cGUsIHRleHQpCgkJCX0KCQl9KS5qb2luKCIiKSkKCgkJcC5wcmVmaXggJiYgY2FuLmNvcmUuSXRlbShwLnByZWZpeCwgZnVuY3Rpb24ocHJlLCB0eXBlKSB7IGlmIChjYW4uYmFzZS5iZWdpbldpdGgobGluZSwgcHJlKSkgeyBsaW5lID0gd3JhcCh0eXBlLCBsaW5lKSB9IH0pCgkJcC5zdWZmaXggJiYgY2FuLmNvcmUuSXRlbShwLnN1ZmZpeCwgZnVuY3Rpb24oZW5kLCB0eXBlKSB7IGlmIChjYW4uYmFzZS5lbmRXaXRoKGxpbmUsIGVuZCkpIHsgbGluZSA9IHdyYXAodHlwZSwgbGluZSkgfSB9KQoJCXJldHVybiBsaW5lCgl9LAoJZ286IHsKCQlrZXl3b3JkOiB7CgkJCSJwYWNrYWdlIjogImtleXdvcmQiLAoJCQkiaW1wb3J0IjogImtleXdvcmQiLAoJCQkidHlwZSI6ICJrZXl3b3JkIiwKCQkJInN0cnVjdCI6ICJrZXl3b3JkIiwKCQkJImludGVyZmFjZSI6ICJrZXl3b3JkIiwKCQkJImNvbnN0IjogImtleXdvcmQiLAoJCQkidmFyIjogImtleXdvcmQiLAoJCQkiZnVuYyI6ICJrZXl3b3JkIiwKCgkJCSJpZiI6ICJrZXl3b3JkIiwKCQkJImVsc2UiOiAia2V5d29yZCIsCgkJCSJmb3IiOiAia2V5d29yZCIsCgkJCSJyYW5nZSI6ICJrZXl3b3JkIiwKCQkJImJyZWFrIjogImtleXdvcmQiLAoJCQkiY29udGludWUiOiAia2V5d29yZCIsCgkJCSJzd2l0Y2giOiAia2V5d29yZCIsCgkJCSJjYXNlIjogImtleXdvcmQiLAoJCQkiZGVmYXVsdCI6ICJrZXl3b3JkIiwKCQkJImZhbGx0aHJvdWdoIjogImtleXdvcmQiLAoJCQkiZ28iOiAia2V5d29yZCIsCgkJCSJzZWxlY3QiOiAia2V5d29yZCIsCgkJCSJkZWZlciI6ICJrZXl3b3JkIiwKCQkJInJldHVybiI6ICJrZXl3b3JkIiwKCgkJCSJmYWxzZSI6ICJjb25zdGFudCIsCgkJCSJ0cnVlIjogImNvbnN0YW50IiwKCQkJIm5pbCI6ICJjb25zdGFudCIsCgkJCSJpb3RhIjogImNvbnN0YW50IiwKCQkJIi0xIjogImNvbnN0YW50IiwKCQkJIjAiOiAiY29uc3RhbnQiLAoJCQkiMSI6ICJjb25zdGFudCIsCgkJCSIyIjogImNvbnN0YW50IiwKCQkJIjMiOiAiY29uc3RhbnQiLAoKCQkJImludCI6ICJkYXRhdHlwZSIsICJpbnQ4IjogImRhdGF0eXBlIiwgImludDE2IjogImRhdGF0eXBlIiwgImludDMyIjogImRhdGF0eXBlIiwgImludDY0IjogImRhdGF0eXBlIiwKCQkJInVpbnQiOiAiZGF0YXR5cGUiLCAidWludDgiOiAiZGF0YXR5cGUiLCAidWludDE2IjogImRhdGF0eXBlIiwgInVpbnQzMiI6ICJkYXRhdHlwZSIsICJ1aW50NjQiOiAiZGF0YXR5cGUiLAoJCQkiZmxvYXQzMiI6ICJkYXRhdHlwZSIsICJmbG9hdDY0IjogImRhdGF0eXBlIiwgImNvbXBsZXg2NCI6ICJkYXRhdHlwZSIsICJjb21wbGV4MTI4IjogImRhdGF0eXBlIiwKCQkJInJ1bmUiOiAiZGF0YXR5cGUiLCAic3RyaW5nIjogImRhdGF0eXBlIiwgImJ5dGUiOiAiZGF0YXR5cGUiLCAidWludHB0ciI6ICJkYXRhdHlwZSIsCgkJCSJib29sIjogImRhdGF0eXBlIiwgImVycm9yIjogImRhdGF0eXBlIiwgImNoYW4iOiAiZGF0YXR5cGUiLCAibWFwIjogImRhdGF0eXBlIiwKCgkJCSJtc2ciOiAiZnVuY3Rpb24iLCAibSI6ICJmdW5jdGlvbiIsCgkJCSJpbml0IjogImZ1bmN0aW9uIiwgIm1haW4iOiAiZnVuY3Rpb24iLCAicHJpbnQiOiAiZnVuY3Rpb24iLCAicHJpbnRsbiI6ICJmdW5jdGlvbiIsICJwYW5pYyI6ICJmdW5jdGlvbiIsICJyZWNvdmVyIjogImZ1bmN0aW9uIiwKCQkJIm5ldyI6ICJmdW5jdGlvbiIsICJtYWtlIjogImZ1bmN0aW9uIiwgImxlbiI6ICJmdW5jdGlvbiIsICJjYXAiOiAiZnVuY3Rpb24iLCAiY29weSI6ICJmdW5jdGlvbiIsICJhcHBlbmQiOiAiZnVuY3Rpb24iLCAiZGVsZXRlIjogImZ1bmN0aW9uIiwgImNsb3NlIjogImZ1bmN0aW9uIiwKCQkJImNvbXBsZXgiOiAiZnVuY3Rpb24iLCAicmVhbCI6ICJmdW5jdGlvbiIsICJpbWFnIjogImZ1bmN0aW9uIiwKCQl9LAoJfSwKCXptbDogewoJCXByZWZpeDogewoJCQkiIyAiOiAiY29tbWVudCIsCgkJfSwKCQlrZXl3b3JkOiB7CgkJCSJyZXR1cm4iOiAia2V5d29yZCIsCgoJCQkiaGVhZCI6ICJrZXl3b3JkIiwKCQkJImxlZnQiOiAia2V5d29yZCIsCgkJCSJtYWluIjogImtleXdvcmQiLAoJCQkiZm9vdCI6ICJrZXl3b3JkIiwKCQkJInRhYnMiOiAia2V5d29yZCIsCgoJCQkiaW5kZXgiOiAiZnVuY3Rpb24iLAoJCQkiYWN0aW9uIjogImZ1bmN0aW9uIiwKCQkJImFyZ3MiOiAiZnVuY3Rpb24iLAoJCQkidHlwZSI6ICJmdW5jdGlvbiIsCgkJCSJzdHlsZSI6ICJmdW5jdGlvbiIsCgkJCSJ3aWR0aCI6ICJmdW5jdGlvbiIsCgoJCQkiYXV0byI6ICJjb25zdGFudCIsCgkJCSJ1c2VybmFtZSI6ICJjb25zdGFudCIsCgkJfSwKCX0sCgljc3M6IHsKCQlrZXl3b3JkOiB7CgkJCSJib2R5IjogImtleXdvcmQiLAoJCQkiZGl2IjogImtleXdvcmQiLAoJCQkic3BhbiI6ICJrZXl3b3JkIiwKCQkJImZvcm0iOiAia2V5d29yZCIsCgkJCSJmaWVsZHNldCI6ICJrZXl3b3JkIiwKCQkJImxlZ2VuZCI6ICJrZXl3b3JkIiwKCQkJInNlbGVjdCI6ICJrZXl3b3JkIiwKCQkJInRleHRhcmVhIjogImtleXdvcmQiLAoJCQkiaW5wdXQiOiAia2V5d29yZCIsCgkJCSJ0YWJsZSI6ICJrZXl3b3JkIiwKCQkJInRyIjogImtleXdvcmQiLAoJCQkidGgiOiAia2V5d29yZCIsCgkJCSJ0ZCI6ICJrZXl3b3JkIiwKCgkJCSJiYWNrZ3JvdW5kLWNvbG9yIjogImZ1bmN0aW9uIiwKCQkJImZvbnQtZmFtaWx5IjogImZ1bmN0aW9uIiwKCQkJImZvbnQtd2VpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImZvbnQtc2l6ZSI6ICJmdW5jdGlvbiIsCgkJCSJjb2xvciI6ICJmdW5jdGlvbiIsCgkJCSJ3aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJoZWlnaHQiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZyI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXIiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luIjogImZ1bmN0aW9uIiwKCQkJInBvc2l0aW9uIjogImZ1bmN0aW9uIiwKCQkJImxlZnQiOiAiZnVuY3Rpb24iLAoJCQkidG9wIjogImZ1bmN0aW9uIiwKCQkJInJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJkaXNwbGF5IjogImZ1bmN0aW9uIiwKCQkJIm92ZXJmbG93IjogImZ1bmN0aW9uIiwKCQkJImZsb2F0IjogImZ1bmN0aW9uIiwKCQkJImNsZWFyIjogImZ1bmN0aW9uIiwKCQkJImN1cnNvciI6ICJmdW5jdGlvbiIsCgoJCQkiei1pbmRleCI6ICJmdW5jdGlvbiIsCgkJCSJ0YWItc2l6ZSI6ICJmdW5jdGlvbiIsCgkJCSJ3b3JkLWJyZWFrIjogImZ1bmN0aW9uIiwKCQkJIndoaXRlLXNwYWNlIjogImZ1bmN0aW9uIiwKCQkJInRleHQtYWxpZ24iOiAiZnVuY3Rpb24iLAoJCQkidmVydGljYWwtYWxpZ24iOiAiZnVuY3Rpb24iLAoJCQkibWluLXdpZHRoIjogImZ1bmN0aW9uIiwKCQkJIm1heC13aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJwYWRkaW5nLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZy10b3AiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXRvcCI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItcmlnaHQiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLWJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItcmFkaXVzIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1zcGFjaW5nIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi10b3AiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luLXJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1ib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiYm94LXNoYWRvdyI6ICJmdW5jdGlvbiIsCgoJCQkiMCI6ICJjb25zdGFudCIsCgkJCSIxMHB4IjogImNvbnN0YW50IiwKCQkJIjIwcHgiOiAiY29uc3RhbnQiLAoJCQkiY3lhbiI6ICJjb25zdGFudCIsCgkJCSJncmF5IjogImNvbnN0YW50IiwKCQkJInllbGxvdyI6ICJjb25zdGFudCIsCgkJCSJibGFjayI6ICJjb25zdGFudCIsCgkJCSJ3aGl0ZSI6ICJjb25zdGFudCIsCgkJCSJibHVlIjogImNvbnN0YW50IiwKCQkJInJlZCI6ICJjb25zdGFudCIsCgkJCSJncmVlbiI6ICJjb25zdGFudCIsCgkJCSJtYWdlbnRhIjogImNvbnN0YW50IiwKCgkJCSJtb25vc3BhY2UiOiAiY29uc3RhbnQiLAoJCQkiYm9sZCI6ICJjb25zdGFudCIsCgkJCSJzb2xpZCI6ICJjb25zdGFudCIsCgkJCSJub25lIjogImNvbnN0YW50IiwKCQkJImJsb2NrIjogImNvbnN0YW50IiwKCQkJImNvbnRleHRzIjogImNvbnN0YW50IiwKCQkJImJvdGgiOiAiY29uc3RhbnQiLAoJCQkiYXV0byI6ICJjb25zdGFudCIsCgoJCQkiY2VudGVyIjogImNvbnN0YW50IiwKCQkJInJlbGF0aXZlIjogImNvbnN0YW50IiwKCQkJImFic29sdXRlIjogImNvbnN0YW50IiwKCQkJInN0aWNreSI6ICJjb25zdGFudCIsCgkJCSJmaXhlZCI6ICJjb25zdGFudCIsCgkJfSwKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwKCV9tb2RlOiB7CgkJcGx1Z2luOiB7CgkJCUVzY2FwZTogc2h5KCLliIfmjaLmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jbGVhcihldmVudCwgY2FuKSB9KSwKCQkJZzogc2h5KCLmkJzntKIiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5pCc57SiIl0oZXZlbnQsIGNhbikgfSksCgkJCWY6IHNoeSgi5omT5byA5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaJk+W8gCJdKGV2ZW50LCBjYW4pIH0pLAoJCQlyOiBzaHkoIuaJp+ihjOWRveS7pCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKSB9KSwKCQkJdjogc2h5KCLmuLLmn5PnlYzpnaIiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikgfSksCgkJCXg6IHNoeSgi5YWz6Zet5qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uX3RhYi5fY2xvc2UoKSB9KSwKCgkJCWg6IHNoeSgi5omT5byA5bem6L655qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbmV4dCA9IGNhbi5fdGFiLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkgfSksCgkJCWw6IHNoeSgi5omT5byA5Y+z6L655qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbmV4dCA9IGNhbi5fdGFiLm5leHRTaWJsaW5nOyBuZXh0ICYmIG5leHQuY2xpY2soKSB9KSwKCQkJajogc2h5KCLlkJHkuIvmu5rliqgiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQlpZiAoY2FuLnVpLmNvbnRlbnQgIT0gY2FuLnVpLl9jb250ZW50KSB7CgkJCQkJY2FuLnVpLmNvbnRlbnQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArPSAxNgoJCQkJfSBlbHNlIHsKCQkJCQljYW4uY3VycmVudC5zY3JvbGwoMSkKCQkJCX0KCQkJfSksCgkJCWs6IHNoeSgi5ZCR5LiK5rua5YqoIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJaWYgKGNhbi51aS5jb250ZW50ICE9IGNhbi51aS5fY29udGVudCkgewoJCQkJCWNhbi51aS5jb250ZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgLT0gMTYKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLmN1cnJlbnQuc2Nyb2xsKC0xKQoJCQkJfQoJCQl9KSwKCQkJSjogc2h5KCLlkJHkuIvmu5rlsY8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC53aW5kb3coKS0zKSB9KSwKCQkJSzogc2h5KCLlkJHkuIrmu5rlsY8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5jdXJyZW50LnNjcm9sbCgtY2FuLmN1cnJlbnQud2luZG93KCkrMykgfSksCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFsi5pCc57SiIiwgIuaJk+W8gCJdLAoJX3RyYW5zOiB7c291cmNlOiAi5rqQ56CBIiwgbW9kdWxlOiAi5qih5Z2XIiwgZHJlYW1zOiAi56m66Ze0IiwgbG9hZDogIuWKoOi9vSIsIGxpbms6ICLpk77mjqUiLCB3aWR0aDogIuWuveW6piIsIGhlaWdodDogIumrmOW6piIsIHdlYnNpdGU6ICLnvZHpobUifSwKCSLmkJzntKIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FLCBbY3R4LkFDVElPTiwgbmZzLlRBR1MsIG5mcy5HUkVQLCBjbGkuTUFLRV1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi51aS5zZWFyY2guVXBkYXRlKHt9LCBbY3R4LkFDVElPTiwgZGF0YS5hY3Rpb24sIGRhdGEubmFtZV0pCgkJfSkKCX0sCgki5omT5byAIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtuZnMuRklMRV0sIGZ1bmN0aW9uKGxpc3QpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGlzdFswXSkgfSkKCX0sCglzZXNzOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmV4cG9ydC5zZXNzKGNhbiksIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pIH0sCglsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIGZpbGUgPSBjYW4uYmFzZS5QYXRoKCIvcmVxdWlyZS8iLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJZGVsZXRlKFZvbGNhbm9zLm1ldGEuY2FjaGVbZmlsZV0pLCBldmFsKCJcbl9jYW5fbmFtZSA9IFwiIitmaWxlKyJcIlxuIitjYW4ub25leHBvcnQuY29udGVudChjYW4pKyJcbl9jYW5fbmFtZSA9IFwiXCJcbmNvbnNvbGUubG9nKFwib25jZVwiKSIpCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLlJFTkRFUiwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9maWxlKGNhbiwgbXNnKQoJCX0pCgl9LAoJc2hvdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwge190b2FzdDogIua4suafk+S4rS4uLiJ9KQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKGNhbi5PcHRpb24obmZzLkZJTEUpLCAiLmpzIikpIHsKCQkJdmFyIGZpbGUgPSBjYW4uYmFzZS5QYXRoKCIvcmVxdWlyZS8iLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJCWRlbGV0ZShWb2xjYW5vcy5tZXRhLmNhY2hlW2ZpbGVdKSwgZXZhbCgiXG5fY2FuX25hbWUgPSBcIiIrZmlsZSsiXCJcbiIrY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSsiXG5fY2FuX25hbWUgPSBcIlwiXG5jb25zb2xlLmxvZyhcIm9uY2VcIikiKQoJCX0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuUkVOREVSLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnByb2ZpbGUoY2FuLCBtc2cpCgkJfSkKCX0sCglleGVjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIiwgInNvbWUiOiAicnVuIn0pCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkVOR0lORSwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5kaXNwbGF5KGNhbiwgbXNnKQoJCX0pCgl9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsICIuaW5wdXQuZmxvYXQiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fc3RhdHVzLCAibGVnZW5kLnNlbGVjdCIsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uY2xpY2soKSwgaXRlbSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgoJCWlmIChjYW4udWkuZGlzcGxheS5zdHlsZS5kaXNwbGF5ID09ICIiKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLmRpc3BsYXkpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJCWlmIChjYW4udWkucHJvZmlsZS5zdHlsZS5kaXNwbGF5ID09ICIiKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2ZpbGUpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCWJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmhpc3RvcnkucG9wKCk7IHZhciBsYXN0ID0gY2FuLmhpc3RvcnkucG9wKCkKCQlsYXN0ICYmIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbGFzdC5wYXRoLCBsYXN0LmZpbGUsIGxhc3QubGluZSkKCQljYW4uU3RhdHVzKCLot7PovazmlbAiLCBjYW4uaGlzdG9yeS5sZW5ndGgpCgl9LAoKCXNjcm9sbExpbmU6IGZ1bmN0aW9uKGNhbiwgY291bnQpIHsgdmFyIHNpemUgPSAyMDsgY2FuLmN1cnJlbnQuc2Nyb2xsKGNvdW50KnNpemUpIH0sCglhcHBlbmRMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dHlwZTogaHRtbC5UUiwgbGlzdDogWwoJCQl7dmlldzogWyJsaW5lIHVuc2VsZWN0YWJsZSIsIGh0bWwuVEQsICsrY2FuLm1heF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCB1aS50cikKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi5mYXZvckxpbmUoY2FuLCB1aS50ZXh0LmlubmVyVGV4dCkKCQkJfX0sCgoJCQl7dmlldzogW2h0bWwuVEVYVCwgaHRtbC5URF0sIGlubmVyOiBjYW4ub25zeW50YXguX3BhcnNlKGNhbiwgdmFsdWUpLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgdWkudHIpCgoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIHMgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpLCBzdHIgPSB1aS50ZXh0LmlubmVyVGV4dAoJCQkJdmFyIGJlZ2luID0gc3RyLmluZGV4T2YocyksIGVuZCA9IGJlZ2luK3MubGVuZ3RoCgoJCQkJZm9yICh2YXIgaSA9IGJlZ2luOyBpID49IDA7IGktLSkgewoJCQkJCWlmIChzdHJbaV0ubWF0Y2goL1thLXpBLVowLTlfLl0vKSkgeyBzID0gc3RyLnNsaWNlKGksIGVuZCkgfSBlbHNlIHsgYnJlYWsgfQoJCQkJfQoKCQkJCWlmIChzLmluZGV4T2YoImtpdC4iKSA9PSAwKSB7IHMgPSBzLnJlcGxhY2UoImtpdC4iLCAidG9vbGtpdHMuIikgfQoJCQkJaWYgKHMuaW5kZXhPZihpY2UuUFQpID09IDApIHsgcyA9IHMuc2xpY2UoMSkgfQoJCQkJY2FuLm9uYWN0aW9uLnNlYXJjaExpbmUoZXZlbnQsIGNhbiwgcykKCQkJfX0KCQldfV0pOyByZXR1cm4gdWkudHIKCX0sCglfZ2V0TGluZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpIHsgcmV0dXJuIGl0ZW0gfSB9KVswXQoJfSwKCV9nZXRMaW5lbm86IGZ1bmN0aW9uKGNhbiwgbGluZSkgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSB7IHJldHVybiBpbmRleCsxIH0gfSlbMF0KCX0sCglzZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGlmICghbGluZSkgeyByZXR1cm4gcGFyc2VJbnQoY2FuLmNvcmUuVmFsdWUoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtbW2h0bWwuVFIsIGh0bWwuU0VMRUNUXSwgW2h0bWwuVEQsICJsaW5lIl1dXSlbMF0sICJpbm5lclRleHQiKSkgfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGxpbmUgPCAwIHx8IGxpbmUgPiBhcnJheS5sZW5ndGgpIHsgcmV0dXJuIH0KCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QsIGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpKSB7IHJldHVybiB9CgkJCXZhciBscyA9IGNhbi5maWxlLnNwbGl0KGljZS5QUykKCQkJaWYgKGxzLmxlbmd0aCA+IDQpIHsgbHMgPSBbbHMuc2xpY2UoMCwgMikuam9pbihpY2UuUFMpKyIvLi4uLyIrbHMuc2xpY2UoLTIpLmpvaW4oaWNlLlBTKV0gfQoJCQlsaW5lID0gaXRlbSwgY2FuLlN0YXR1cyhraXQuRGljdCgi5paH5Lu25ZCNIiwgbHMuam9pbihpY2UuUFMpLCAi6Kej5p6Q5ZmoIiwgY2FuLnBhcnNlLCAi5b2T5YmN6KGMIiwgY2FuLm9uZXhwb3J0LnBvc2l0aW9uKGNhbiwgY2FuLk9wdGlvbihuZnMuTElORSwgaW5kZXgrMSkpKSkKCQl9KQoKCQljYW4uYmFzZS5pc09iamVjdChsaW5lKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBsaW5lLCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLmN1cnJlbnQgPSB7CgkJCQl3aW5kb3c6IGZ1bmN0aW9uKCkgeyByZXR1cm4gcGFyc2VJbnQoY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0L2Nhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0KSB9LAoJCQkJc2Nyb2xsOiBmdW5jdGlvbihjb3VudCkgeyBpZiAoY291bnQpIHsgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsVG9wICs9IGNvdW50KmNhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0IH0KCQkJCQlyZXR1cm4gcGFyc2VJbnQoKGNhbi5jdXJyZW50LmxpbmUub2Zmc2V0VG9wLWNhbi51aS5jb250ZW50LnNjcm9sbFRvcCkvY2FuLmN1cnJlbnQubGluZS5vZmZzZXRIZWlnaHQpCgkJCQl9LAoKCQkJCXByZXY6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZS5wcmV2aW91c1NpYmxpbmcgfSwKCQkJCW5leHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZS5uZXh0U2libGluZyB9LAoJCQkJbGluZTogbGluZSwgdGV4dDogZnVuY3Rpb24odGV4dCkgewoJCQkJCXJldHVybiB0ZXh0ICE9IHVuZGVmaW5lZCAmJiBjYW4ub25hY3Rpb24ubW9kaWZ5TGluZShjYW4sIGxpbmUsIHRleHQpLCBpdGVtLmlubmVyVGV4dAoJCQkJfSwKCQkJfQoKCQkJaWYgKCFldmVudCkgewoJCQkJdmFyIHNjcm9sbCA9IGNhbi5jdXJyZW50LnNjcm9sbCgpOyBpZiAoc2Nyb2xsIDwgNSkgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLTUpIH0gZWxzZSB7CgkJCQkJdmFyIHdpbmRvdyA9IGNhbi5jdXJyZW50LndpbmRvdygpOyBpZiAoc2Nyb2xsID4gd2luZG93LzIpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC13aW5kb3cvMikgfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJdmFyIHNjcm9sbCA9IGNhbi5jdXJyZW50LnNjcm9sbCgpOyBpZiAoc2Nyb2xsIDwgMykgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLTMpIH0gZWxzZSB7CgkJCQkJdmFyIHdpbmRvdyA9IGNhbi5jdXJyZW50LndpbmRvdygpOyBpZiAoc2Nyb2xsID4gd2luZG93LTQpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC13aW5kb3crNCkgfQoJCQkJfQoJCQl9CgoJCQl2YXIgcHVzaCA9IGNhbi5vbmltcG9ydC5oaXN0b3J5KGNhbiwge3BhdGg6IGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgbGluZTogY2FuLk9wdGlvbihuZnMuTElORSksIHRleHQ6IGNhbi5jdXJyZW50LnRleHQoKX0pCgkJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsgbG9jYXRpb24uaGFzaCA9IHB1c2guZmlsZStpY2UuRlMrKHB1c2gubGluZXx8MSkgfQoJCQljYW4ub25hY3Rpb24uX3NlbGVjdExpbmUoZXZlbnQsIGNhbikKCQl9KQoJfSwKCV9zZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IH0sCglzZWFyY2hMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSkgeyBpZiAoIWNhbi51aS5zZWFyY2gpIHsgcmV0dXJuIH0KCQljYW4udWkuc2VhcmNoLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIG5mcy5UQUdTLCB2YWx1ZS50cmltKCldKQoJfSwKCWZhdm9yTGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsi5paH5Lu25pWwIiwgIuino+aekOWZqCIsICLmlofku7blkI0iLCAi5b2T5YmN6KGMIiwgIui3s+i9rOaVsCIsICLmoIfnrb7mlbAiXSwKCXNlc3M6IGZ1bmN0aW9uKGNhbikgeyBjYW4udXNlci5sb2NhbFN0b3JhZ2UoY2FuLCAid2ViLmNvZGUuaW5uZXIuc2VzcyIsIHsicGx1ZyI6IGNhbi5vbmV4cG9ydC5wbHVnKGNhbiksICJleHRzIjogY2FuLm9uZXhwb3J0LmV4dHMoY2FuKSwgInRhYnMiOiBjYW4ub25leHBvcnQudGFicyhjYW4pfSkgfSwKCWtleXM6IGZ1bmN0aW9uKGNhbiwgZmlsZSwgcGF0aCkgeyByZXR1cm4gKHBhdGh8fGNhbi5PcHRpb24obmZzLlBBVEgpKStpY2UuREYrKGZpbGV8fGNhbi5PcHRpb24obmZzLkZJTEUpKSB9LAoJdGFiczogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi50YWJ2aWV3LCBmdW5jdGlvbihrZXksIG1zZykgeyByZXR1cm4ga2V5K2ljZS5ERittc2cuT3B0aW9uKG5mcy5MSU5FKSB9KSB9LAoJcGx1ZzogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi50b29sa2l0KSB9LAoJZXh0czogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi5wbHVnaW5zKSB9LAoJcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHRvdGFsKSB7IHRvdGFsID0gdG90YWx8fGNhbi5tYXg7IHJldHVybiAocGFyc2VJbnQoaW5kZXgpKStpY2UuUFMrcGFyc2VJbnQodG90YWwpKyIgPSAiK3BhcnNlSW50KChpbmRleCkqMTAwL3RvdGFsKSsiJSIgfSwKCWNvbnRlbnQ6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsICJ0ZC50ZXh0IiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5pbm5lclRleHQgfSkuam9pbihpY2UuTkwpIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL2Zhdm9yLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiKSB7CgljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogIndlYi5jb2RlLmZhdm9yIn0sIGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQlpZiAoY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJCQljb2RlLklOTkVSLCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBtc2cuT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSksIG1zZy5PcHRpb24obmZzLkxJTkUpKQoJCQkJfSwKCQkJKSkpIHsgcmV0dXJuIH0KCgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGNvZGUuRkFWT1IsIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQkJc3ViLm9ubW90aW9uLmNsZWFyKHN1YiksIHN1Yi5vbmFwcGVuZC50YWJsZShzdWIsIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpIHsKCQkJCQlpZiAobXNnLmFwcGVuZC5sZW5ndGggPT0gMiAmJiBtc2cuYXBwZW5kWzBdID09IG1kYi5LRVkgJiYgbXNnLmFwcGVuZFsxXSA9PSBtZGIuVkFMVUUpIHsKCQkJCQkJaWYgKGtleSA9PSBtZGIuVkFMVUUpIHsga2V5ID0gbGluZS5rZXkgfQoJCQkJCX0KCQkJCQlpZiAoa2V5ICE9IGN0eC5BQ1RJT04pIHsgdmFsdWUgPSBzdWIucGFnZS5yZXBsYWNlKHN1YiwgdmFsdWUsIGljZS5QV0QsICIiKSB9CgoJCQkJCXJldHVybiB7dGV4dDogWyIiLCBodG1sLlREXSwgbGlzdDogW3t0ZXh0OiBbdmFsdWUsIGh0bWwuRElWXX1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQkJCWlmIChbbWRiLlpPTkUsIG1kYi5JRF0uaW5kZXhPZihrZXkpID4gLTEpIHsgcmV0dXJuIHN1Yi5vbmFjdGlvbi5jaGFuZ2UoZXZlbnQsIHN1Yiwga2V5LCB2YWx1ZSkgfQoKCQkJCQkJaWYgKHRhcmdldC50YWdOYW1lID09ICJJTlBVVCIgJiYgdGFyZ2V0LnR5cGUgPT0gaHRtbC5CVVRUT04pIHsgdmFyIG1zZyA9IHN1Yi5yZXF1ZXN0KGV2ZW50LCBsaW5lLCBzdWIuT3B0aW9uKCkpCgkJCQkJCQlyZXR1cm4gc3ViLnJ1bkFjdGlvbihldmVudCwgdGFyZ2V0Lm5hbWUsIFtdLCBmdW5jdGlvbihtc2cpIHsgc3ViLnJ1bigpIH0pCgkJCQkJCX0KCgkJCQkJCWxpbmUubGluZSAmJiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGxpbmUucGF0aCwgbGluZS5maWxlLnJlcGxhY2UoaWNlLlBXRCwgIiIpLCBwYXJzZUludChsaW5lLmxpbmUpKQoJCQkJCX19CgkJCQl9LCBzdWIuX291dHB1dCksIHN1Yi5vbmFwcGVuZC5fc3RhdHVzKHN1YiwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykpLCBjYW4uU3RhdHVzKCLmoIfnrb7mlbAiLCBtc2cuTGVuZ3RoKCkpCgkJCX0pCgkJfSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgl9KQp9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL2NvZGUvaW5uZXIvc2VhcmNoLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiKSB7IHZhciBoaXN0b3J5ID0gW107IGNvbnN0IFNFQVJDSCA9ICJjYW4uY29kZS5pbm5lci5zZWFyY2giCglmdW5jdGlvbiBzaG93KG1zZywgd29yZCkgeyBpZiAoIW1zZykgeyByZXR1cm4gfSBoaXN0b3J5LnB1c2gobXNnKTsgdmFyIHN1YiA9IG1zZy5fY2FuOyBzdWIuT3B0aW9uKCJ3b3JkIiwgd29yZHx8bXNnLl93b3JkKQoJCSFzdWIucGFnZS5DbGFzc0xpc3QuaGFzKHN1Yiwgc3ViLl9sZWdlbmQsICJzZWxlY3QiKSAmJiBjYW4udWkuc2VhcmNoLnNlbGVjdCgpCgkJc3ViLm9ubW90aW9uLmNsZWFyKHN1YiksIHN1Yi5vbmFwcGVuZC50YWJsZShzdWIsIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbIiIsIGh0bWwuVERdLCBsaXN0OiBbe3RleHQ6IFtjYW4ucGFnZS5yZXBsYWNlKGNhbiwgdmFsdWUsIGljZS5QV0QsICIiKSwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlsaW5lLmxpbmUgJiYgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGluZS5maWxlLnJlcGxhY2UoaWNlLlBXRCwgIiIpLCBwYXJzZUludChsaW5lLmxpbmUpKQoJCQl9fQoJCX0sIHN1Yi5fb3V0cHV0KSwgc3ViLm9uYXBwZW5kLmJvYXJkKHN1YiwgbXNnLlJlc3VsdCgpKSwgc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBtc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTKSksIGNhbi5TdGF0dXMoIuagh+etvuaVsCIsIG1zZy5MZW5ndGgoKSkKCX0KCWNhbi5vbmVuZ2luZS5wbHVnaW4oY2FuLCBTRUFSQ0gsIHNoeSgi5pCc57SiIiwge30sIFsKCQl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAid29yZCIsIHZhbHVlOiBjbGkuTUFJTiwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCWNhbi5vbm1vdGlvbi5zZWxlY3RUYWJsZShldmVudCwgY2FuLnN1cCwgZXZlbnQudGFyZ2V0LCBmdW5jdGlvbih0cikgewoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGh0bWwuVEQsIGZ1bmN0aW9uKHRkLCBpbmRleCkgeyBpbmRleCA9PSAwICYmIHRkLmNsaWNrKCkgfSkKCQkJCXRyLnNjcm9sbEludG9WaWV3KCksIGNhbi5fb3V0cHV0LnNjcm9sbFRvcCAtPSA2MAoJCQl9KQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsgY2FuLnN1cC5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBldmVudC5jdHJsS2V5PyBuZnMuR1JFUDogbmZzLlRBR1MsIGNhbi5zdXAuT3B0aW9uKCJ3b3JkIildKSB9CgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgZXZlbnQudGFyZ2V0LmJsdXIoKSB9CgkJfX0sCgkJe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogImZpbHRlciIsIHZhbHVlOiAiIiwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCWNhbi5vbm1vdGlvbi5zZWxlY3RJbnB1dFRhYmxlKGV2ZW50LCBjYW4uc3VwLCBudWxsLCBldmVudC50YXJnZXQpCgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FTlRFUikgeyBjYW4uc3VwLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIGV2ZW50LmN0cmxLZXk/IG5mcy5HUkVQOiBuZnMuVEFHUywgY2FuLnN1cC5PcHRpb24oIndvcmQiKV0pIH0KCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyBldmVudC50YXJnZXQuYmx1cigpIH0KCQl9fSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6IG5mcy5UQUdTfSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6IG5mcy5HUkVQfSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6IGNsaS5NQUtFfSwKCQl7dHlwZTogaHRtbC5CVVRUT04sIG5hbWU6ICJoaXN0b3J5In0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAibGFzdCIsIF90cmFuczogIui/lOWbniJ9LAoJXSwgZnVuY3Rpb24obXNnLCBjbWRzLCBjYikgeyBpZiAoY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJImhpc3RvcnkiLCBmdW5jdGlvbihjbWRzKSB7CgkJCWNhbi5jb3JlLkxpc3QoY2FuLmhpc3RvcnksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCW1zZy5QdXNoKG5mcy5GSUxFLCBpdGVtLmZpbGUpCgkJCQltc2cuUHVzaChuZnMuTElORSwgaXRlbS5saW5lKQoJCQkJbXNnLlB1c2gobWRiLlRFWFQsIGl0ZW0udGV4dCkKCQkJfSkKCQkJc2hvdyhtc2cpCgkJfSwKCQluZnMuVEFHUywgZnVuY3Rpb24oY21kcykgeyBtc2cuT3B0aW9uKGtpdC5EaWN0KGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSwgaWNlLk1TR19GSUVMRFMsICJmaWxlLGxpbmUsdGV4dCIpKQoJCQljYW4ucnVuQWN0aW9uKG1zZywgbWRiLlNFQVJDSCwgW2Nhbi5wYXJzZSwgY21kc1swXSwgY2FuLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsgdmFyIHN1YiA9IG1zZy5fY2FuCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkvNCksIHNob3cobXNnLCBtc2cuX3dvcmQgPSBjbWRzWzBdKQoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhzdWIsIHN1Yi5fdGFyZ2V0LCBodG1sLlNFTEVDVCkgfHwgc3ViLl9sZWdlbmQuY2xpY2soKQoJCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgbXNnLl9jYW4uX2lucHV0c1sid29yZCJdLl90YXJnZXQpCgkJCX0pCgkJfSwKCQluZnMuR1JFUCwgZnVuY3Rpb24oY21kcykgeyBtc2cuT3B0aW9uKGtpdC5EaWN0KGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSwgaWNlLk1TR19GSUVMRFMsICJmaWxlLGxpbmUsdGV4dCIsIG5mcy5QQVRILCBjYW4uT3B0aW9uKG5mcy5QQVRIKSkpCgkJCWNhbi5ydW5BY3Rpb24obXNnLCBuZnMuR1JFUCwgW2NtZHNbMF1dLCBmdW5jdGlvbihtc2cpIHsgdmFyIHN1YiA9IG1zZy5fY2FuCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCkvNCksIHNob3cobXNnLCBtc2cuX3dvcmQgPSBjbWRzWzBdKQoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhzdWIsIHN1Yi5fdGFyZ2V0LCBodG1sLlNFTEVDVCkgfHwgc3ViLl9sZWdlbmQuY2xpY2soKQoJCQkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgbXNnLl9jYW4uX2lucHV0c1sid29yZCJdLl90YXJnZXQpCgkJCX0pCgkJfSwKCQkibGFzdCIsIGZ1bmN0aW9uKGNtZHMpIHsgaGlzdG9yeS5wb3AoKSwgc2hvdyhoaXN0b3J5LnBvcCgpKSB9LAoJKSkpIHsgcmV0dXJuIH0gY2FuLnJ1bihtc2csIGNtZHMsIGZ1bmN0aW9uKG1zZykgeyBzaG93KG1zZykgfSwgdHJ1ZSkgfSkpCgljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogU0VBUkNIfSwgZnVuY3Rpb24oc3ViKSB7CgkJY2FuLnVpLnNlYXJjaCA9IHN1YiwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJY2FuLnVpLnNlYXJjaC5fc2hvdyA9IHNob3cKCX0pCn19KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9pbm5lci9zZXNzLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiKSB7IHZhciBTRVNTID0gIndlYi5jb2RlLnNlc3MiCgljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogU0VTU30sIGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQlpZiAoY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJCQluZnMuU0FWRSwgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBTRVNTLCBbY3R4LkFDVElPTiwgbWRiLkNSRUFURSwKCQkJCQkJInRvb2wiLCBKU09OLnN0cmluZ2lmeShjYW4ub25leHBvcnQudG9vbChjYW4pKSwKCQkJCQkJInRhYnMiLCBKU09OLnN0cmluZ2lmeShjYW4ub25leHBvcnQudGFicyhjYW4pKSwKCQkJCQldLCBjYikKCQkJCX0sCgkJCQluZnMuTE9BRCwgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi5vbmltcG9ydC5zZXNzKGNhbiwgewoJCQkJCQl0b29sOiBKU09OLnBhcnNlKG1zZy5PcHRpb24oInRvb2wiKSksCgkJCQkJCXRhYnM6IEpTT04ucGFyc2UobXNnLk9wdGlvbigidGFicyIpKSwKCQkJCQl9KQoJCQkJfSwKCQkJKSkpIHsgcmV0dXJuIH0KCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIFNFU1MsIGNtZHMsIGNiKQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL2lubmVyL3RlbXBsYXRlLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIGFyZ3MsIGNiKSB7CgljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogIndlYi5jb2RlLnRlbXBsYXRlIn0sIGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IHN1Yi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpCgkJCWlmIChjYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJCW5mcy5ERUZTLCBmdW5jdGlvbihjbWRzKSB7CgkJCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oImFyZ3MiKXx8IltdIiksIGZ1bmN0aW9uKGRhdGEpIHsKCQkJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgY2FuLmNvcmUuSXRlbShkYXRhLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IG1zZy5PcHRpb24oa2V5LCB2YWx1ZSkgfSkKCQkJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsICJ3ZWIuY29kZS50ZW1wbGF0ZSIsIFtuZnMuREVGU10uY29uY2F0KGNtZHMpLCBmdW5jdGlvbihtc2cpIHsKCQkJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCQkJCQkJY2FuLm9uaW1wb3J0LnByb2plY3QoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSkKCQkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24oIm1haW4iKSwgIiIsIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNtZHNbMV0sIDEsIGZ1bmN0aW9uKCkge30pCgkJCQkJCQl9LCB0cnVlKQoJCQkJCQl9KQoJCQkJCX0pCgkJCQl9CgkJCSkpKSB7IHJldHVybiB9CgkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCAid2ViLmNvZGUudGVtcGxhdGUiLCBjbWRzLCBjYikKCQl9LCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCX0pCn19KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS9zbmlwcGV0LmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pCgkJaWYgKG1zZy5PcHRpb24oImNvbnRlbnQiKSkgewoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge2luZGV4OiAid2ViLmNvZGUudmltZXIiLCBzdHlsZTogImZ1bGwifSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciByZXMgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJCQlpZiAoY21kc1sxXSA9PSAicGx1Z2luIikgewoJCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCAidmltZXIiLCBjbWRzLCBjYikKCQkJCQkJcmV0dXJuCgkJCQkJfQoJCQkJCWlmIChjbWRzWzFdID09ICJtYWluLmdvIikgeyByZXMuRWNobyhtc2cuT3B0aW9uKCJjb250ZW50IikpCgkJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uc3ViICYmIGNhbi5zdWIub25hY3Rpb25bIumhueebriJdKHt9LCBjYW4uc3ViKSB9KQoJCQkJCX0KCQkJCQljYihyZXMpLCBjYW4uc3ViID0gY2FuLmNvcmUuVmFsdWUoc3ViLCAiX291dHB1dHMuLTEiKQoJCQkJfQoJCQl9LCBjYW4uX291dHB1dCkKCQkJcmV0dXJuCgkJfQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJfSwKCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgaWNlLlJVTiwgWyJnbyIsICJoaS5nbyIsIGNhbi5zdWIub25leHBvcnQuY29udGVudChjYW4uc3ViKV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC9jb2RlL3ZpbWVyLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5yZXF1aXJlKFsiaW5uZXIuanMiXSwgZnVuY3Rpb24oY2FuKSB7IGNhbi5vbmltcG9ydC5pbm5lcl9pbml0KGNhbiwgbXNnLCBmdW5jdGlvbigpIHsgY2FuLnVuZG8gPSBbXSwgY2FuLnJlZG8gPSBbXQoJCQljYW4ub25rZXltYXAuX2J1aWxkKGNhbiksIGNhbi5vbmtleW1hcC5fcGx1Z2luKHt9LCBjYW4pCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCX0sIHRhcmdldCkgfSAsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgc3ViKSB7IG5hbWUgPT0gY2hhdC5PTklNUE9SVCAmJiAoY2FuLm9uaW1wb3J0LmlubmVyX2luaXQgPSBzdWIuX2luaXQpCgkJCWlmIChuYW1lID09IGNoYXQuT05BQ1RJT04pIHsgY2FuLl90cmFucyA9IGNhbi5iYXNlLkNvcHkoY2FuLl90cmFuc3x8e30sIHN1Yi5fdHJhbnMpIH0KCQkJaWYgKG5hbWUgPT0gY2hhdC5PTktFWU1BUCkgeyBjYW4uY29yZS5JdGVtKHN1Yi5fbW9kZSwgZnVuY3Rpb24obW9kZSwgdmFsdWUpIHsKCQkJCXZhciBsaXN0ID0gY2FuLm9ua2V5bWFwLl9tb2RlW21vZGVdID0gY2FuLm9ua2V5bWFwLl9tb2RlW21vZGVdfHx7fQoJCQkJY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oa2V5LCBjYikgeyBsaXN0W2tleV0gPSBsaXN0W2tleV18fGNiIH0pCgkJCX0pIH0KCQl9KQoJfSwKCV9pbnB1dDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQucGFyZW50Tm9kZSwgWwoJCQl7dmlldzogWyJjdXJyZW50IiwgaHRtbC5JTlBVVF0sIHNwZWxsY2hlY2s6IGZhbHNlLCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7IGlmIChldmVudC5tZXRhS2V5KSB7IHJldHVybiB9CgkJCQlpZiAoZXZlbnQuY3RybEtleSAmJiBjYW4ub25hY3Rpb24uX2NvbXBsZXRlKGV2ZW50LCBjYW4pKSB7IHJldHVybiB9CgkJCQljYW4uX2tleWxpc3QgPSBjYW4ub25rZXltYXAuX3BhcnNlKGV2ZW50LCBjYW4sIGNhbi5tb2RlKyhldmVudC5jdHJsS2V5PyAiX2N0cmwiOiAiIiksIGNhbi5fa2V5bGlzdCwgY2FuLnVpLmN1cnJlbnQpCgkJCQljYW4ubW9kZSA9PSAiaW5zZXJ0IiAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSkgfSwgMTApCgkJCQljYW4ubW9kZSA9PSAibm9ybWFsIiAmJiBjYW4uU3RhdHVzKCLmjInplK4iLCBjYW4uX2tleWxpc3Quam9pbigiIikpCgkJCQljYW4ubW9kZSA9PSAibm9ybWFsIiAmJiBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJfSwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uYWN0aW9uLl9jb21wbGV0ZShldmVudCwgY2FuKQoKCQkJfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikKCgkJCX19LCB7dmlldzogWyJjb21wbGV0ZSJdfSwKCQldKTsgY2FuLnVpLmN1cnJlbnQgPSB1aS5jdXJyZW50LCBjYW4udWkuY29tcGxldGUgPSB1aS5jb21wbGV0ZQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgewoJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgWwoJCQljYW4uaXNDbWRNb2RlKCkgJiYge25hbWU6ICJjcmVhdGUiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLm9uYWN0aW9uLmxpc3QsIHRhcmdldCkgfX0sCgkJCXtuYW1lOiAic291cmNlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgeyB2YXIgdG90YWwgPSAwCgkJCQlmdW5jdGlvbiBzaG93KHBhdGgsIHRhcmdldCkgeyBjYW4ucnVuKGNhbi5yZXF1ZXN0KHt9LCB7ZGlyX3Jvb3Q6IHBhdGgsIGRpcl9kZWVwOiB0cnVlfSksIFtpY2UuUFdEXSwgZnVuY3Rpb24obXNnKSB7IHZhciBsaXN0ID0gbXNnLlRhYmxlKCkKCQkJCQljYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGNhbi5PcHRpb24obmZzLkZJTEUpLmluZGV4T2YoaXRlbS5wYXRoKSA9PSAwKSB7IGl0ZW0uZXhwYW5kID0gdHJ1ZSB9CgkJCQkJCWl0ZW0uX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgdGFyZ2V0Lm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJCQkJInRyYXNoIjogZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5fcnVuKGV2ZW50LCBjYW4sIG5mcy5UUkFTSCwgW2Nhbi5iYXNlLlBhdGgocGF0aCwgaXRlbS5wYXRoKV0pIH0sCgkJCQkJCQlfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQkJCQl9LCBbInRyYXNoIl0pIH0gfQoJCQkJCX0pCgkJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBsaXN0LCBuZnMuUEFUSCwgaWNlLlBTLCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGgsIGl0ZW0ucGF0aCkgLy8g5pi+56S65paH5Lu2CgkJCQkJfSwgdGFyZ2V0KSwgY2FuLlN0YXR1cygi5paH5Lu25pWwIiwgdG90YWwgKz0gbXNnLkxlbmd0aCgpKQoJCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrdG90YWwrIiBpdGVtIn0pCgkJCQl9LCB0cnVlKSB9IGlmIChwYXRoLmxlbmd0aCA9PSAxKSB7IHJldHVybiBzaG93KHBhdGhbMF0sIHRhcmdldCkgfQoKCQkJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgY2FuLmNvcmUuTGlzdChwYXRoLCBmdW5jdGlvbihwYXRoKSB7IHJldHVybiB7bmFtZTogcGF0aCwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBzaG93KHBhdGgsIHRhcmdldCkgfX0gfSksIHRhcmdldCkKCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQucHJldmlvdXNTaWJsaW5nLmlubmVySFRNTCA9ICIiIH0pCgkJCX19LAoJCQl7bmFtZTogInBsdWdpbiIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsgdmFyIHRvdGFsID0gMAoJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBjYW4uY29yZS5JdGVtKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB0b3RhbCsrLCB7aW5kZXg6IGNhbi5iYXNlLnRyaW1QcmVmaXgoa2V5LCAiY2FuLiIpfSB9KSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLmNvcmUuS2V5cygiY2FuIiwgaXRlbS5pbmRleCksIGN0eC5JTkRFWCkgLy8g5pi+56S65o+S5Lu2CgkJCQl9LCB0YXJnZXQpCgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK3RvdGFsKyIgaXRlbSJ9KQoJCQl9fSwKCQkJe25hbWU6ICJtb2R1bGUiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7CgkJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ZmllbGRzOiBjdHguSU5ERVh9KSwgY3R4LkNPTU1BTkQsIFttZGIuU0VBUkNILCBjdHguQ09NTUFORF0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrbXNnLkxlbmd0aCgpKyIgaXRlbSJ9KQoJCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgbXNnLlRhYmxlKCksIGN0eC5JTkRFWCwgaWNlLlBULCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBpdGVtLmluZGV4LCBjdHguSU5ERVgpIC8vIOaYvuekuuaooeWdlwoJCQkJCX0sIHRhcmdldCkKCQkJCX0pCgkJCX19LAoJCQl7bmFtZTogImRyZWFtcyIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsgdmFyIGNhbGwgPSBhcmd1bWVudHMuY2FsbGVlCgkJCQljYW4ucnVuQWN0aW9uKHt9LCBpY2UuUlVOLCBbd2ViLkRSRUFNXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIittc2cuTGVuZ3RoKCkrIiBpdGVtIn0pCgkJCQkJbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJZnVuY3Rpb24gY2FydGUoZXZlbnQpIHsKCQkJCQkJCXZhciBsaXN0ID0gW107IHN3aXRjaCAoaXRlbS5zdGF0dXMpIHsKCQkJCQkJCQljYXNlICJzdGFydCI6IGxpc3QgPSBbIm9wZW4iLCAic3RvcCJdOyBicmVhawoJCQkJCQkJCWNhc2UgInN0b3AiOiBsaXN0ID0gWyJzdGFydCIsICJ0cmFzaCJdOyBicmVhawoJCQkJCQkJfQoJCQkJCQkJY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCB7fSwgbGlzdCwgZnVuY3Rpb24oZXZlbnQsIGFjdGlvbikgewoJCQkJCQkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIGl0ZW0pLCBpY2UuUlVOLCBbd2ViLkRSRUFNLCBjdHguQUNUSU9OLCBhY3Rpb25dLCBmdW5jdGlvbihtc2cpIHsKCQkJCQkJCQkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FsbCh0YXJnZXQpCgkJCQkJCQkJfSkKCQkJCQkJCX0pCgkJCQkJCX0KCgkJCQkJCXZhciBjb2xvciA9IGl0ZW0uc3RhdHVzID09ICJzdGFydCI/ICIiOiAiZ3JheSIKCQkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGh0bWwuSVRFTSwgbGlzdDogW3t0ZXh0OiBbaXRlbS5uYW1lLCBodG1sLkRJVl0sIHN0eWxlOiB7Y29sb3I6IGNvbG9yfSwgb25tb3VzZWVudGVyOiBjYXJ0ZX1dLCBvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGl0ZW0ubmFtZSwgd2ViLkRSRUFNKSAvLyDmmL7npLrnqbrpl7QKCQkJCQkJfX1dKQoJCQkJCX0pCgkJCQl9KQoJCQl9LCBfbWVudTogc2h5KCIiLCB7CgkJCQkiY3JlYXRlIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5vbmFjdGlvbi5kcmVhbShldmVudCwgY2FuLCAiZHJlYW0iKSB9LAoJCQkJInJlZnJlc2giOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLnVpLmRyZWFtcy5yZWZyZXNoKCkgfSwKCQkJCSJwdWJsaXNoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdENvbmZpcm0oY2FuLCBtc2cuUmVzdWx0KCksIGJ1dHRvbikgfSkgfSwKCQkJfSwgWyJjcmVhdGUiLCAicmVmcmVzaCIsICJwdWJsaXNoIl0sIGZ1bmN0aW9uKCkge30pfSwKCQldLCBjYW4udWkucHJvamVjdCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwKCV9tb2RlbDogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgeyBjYW4uU3RhdHVzKCLmqKHlvI8iLCBjYW4ubW9kZSA9IHZhbHVlKQoJCWNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCBjYW4udWkuY3VycmVudCwgWyJjdXJyZW50IiwgY2FuLm1vZGVdKSwgdmFsdWUKCQljYW4ucGFnZS5zdHlsZUNsYXNzKGNhbiwgY2FuLnVpLmNvbXBsZXRlLCBbImNvbXBsZXRlIiwgY2FuLm1vZGVdKSwgdmFsdWUKCX0sCglfcGx1Z2luOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbW9kZWwoY2FuLCAicGx1Z2luIikKCQljYW4udWkuY3VycmVudC5ibHVyKCkKCX0sCglfbm9ybWFsOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbW9kZWwoY2FuLCAibm9ybWFsIikKCQljYW4udWkuY3VycmVudC5mb2N1cygpCgl9LAoJX2luc2VydDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX21vZGVsKGNhbiwgImluc2VydCIpCgkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKSwgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsTGVmdCAtPSAxMDAwMAoJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKCglfbW9kZTogewoJCXBsdWdpbjogewoJCQl0OiBzaHkoIua3u+WKoOWRveS7pCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmt7vliqAiXShldmVudCwgY2FuKSB9KSwKCQkJcDogc2h5KCLmt7vliqDmj5Lku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5o+S5Lu2Il0oZXZlbnQsIGNhbikgfSksCgkJCWU6IHNoeSgi5re75Yqg5omp5bGVIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaJqeWxlSJdKGV2ZW50LCBjYW4pIH0pLAoKCQkJaTogc2h5KCLmj5LlhaXmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pIH0pLAoJCQluOiBzaHkoIuWRveS7pOaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9ub3JtYWwoZXZlbnQsIGNhbikgfSksCgkJCSI6Ijogc2h5KCLlupXooYzmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiAiY2xpLnN5c3RlbSJ9LCBmdW5jdGlvbihzdWIpIHsgY2FuLnRvb2xraXRbImNsaS5zeXN0ZW0iXSA9IHN1Yi5zZWxlY3QoKSB9KSB9KSwKCgkJCXM6IHNoeSgi5L+d5a2Y5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2F2ZShldmVudCwgY2FuLCAic2F2ZSIpIH0pLAoJCQlkOiBzaHkoIuWIm+W7uuepuumXtCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmRyZWFtKGV2ZW50LCBjYW4sICJkcmVhbSIpIH0pLAoJCQltOiBzaHkoIua3u+WKoOaooeWdlyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmF1dG9nZW4oZXZlbnQsIGNhbiwgImF1dG9nZW4iKSB9KSwKCQkJYzogc2h5KCLnvJbor5Hpobnnm64iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jb21waWxlKGV2ZW50LCBjYW4sICJjb21waWxlIikgfSksCgkJfSwKCQlub3JtYWxfY3RybDogewoJCQlmOiBzaHkoIuWQkeS4i+e/u+mhtSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbikrY2FuLmN1cnJlbnQud2luZG93KCktMy1jYW4uY3VycmVudC5zY3JvbGwoKQoJCQkJcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSksIHRydWUKCQkJfSksCgkJCWI6IHNoeSgi5ZCR5LiK57+76aG1IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuKS1jYW4uY3VycmVudC53aW5kb3coKSszCgkJCQlyZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKSwgdHJ1ZQoJCQl9KSwKCQl9LAoJCW5vcm1hbDogewoJCQlFc2NhcGU6IHNoeSgi5YiH5o2i5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX3BsdWdpbihldmVudCwgY2FuKSB9KSwKCQkJQXJyb3dMZWZ0OiBzaHkoIuWFieagh+W3puenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgLTEpIH0pLAoJCQlBcnJvd1JpZ2h0OiBzaHkoIuWFieagh+WPs+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMSkgfSksCgkJCUFycm93RG93bjogc2h5KCLlhYnmoIfkuIvnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkgfSksCgkJCUFycm93VXA6IHNoeSgi5YWJ5qCH5LiK56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5wcmV2KCkpIH0pLAoKCQkJIi4iOiBzaHkoIumHjeWkjeaTjeS9nCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB2YXIgY2IgPSBjYW4ucmVkby5wb3AoKTsgY2IgJiYgY2IoKSB9KSwKCQkJdTogc2h5KCLmkqTplIDmk43kvZwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIGNiID0gY2FuLnVuZG8ucG9wKCk7IGNiICYmIGNiKCkgfSksCgkJCUo6IHNoeSgi5ZCI5bm25Lik6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgbmV4dCA9IGNhbi5jdXJyZW50Lm5leHQoKTsgaWYgKCFuZXh0KSB7IHJldHVybiB9CgkJCQl2YXIgbGluZSA9IGNhbi5jdXJyZW50LmxpbmUsIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCkKCQkJCXZhciByZXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgbmV4dCwgInRkLnRleHQiKVswXS5pbm5lclRleHQKCQkJCWNhbi5jdXJyZW50LnRleHQodGV4dC50cmltUmlnaHQoKStpY2UuU1ArcmVzdC50cmltTGVmdCgpKSwgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBuZXh0KQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLm1vZGlmeUxpbmUoY2FuLCBsaW5lLCB0ZXh0KSwgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCByZXN0LCBsaW5lLm5leHRTaWJsaW5nKSB9KQoJCQl9KSwKCgkJCUg6IHNoeSgi6Lez5Yiw6KGM6aaWIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAwLCAwKSB9KSwKCQkJaDogc2h5KCLlhYnmoIflt6bnp7siLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIC0xKSB9KSwKCQkJbDogc2h5KCLlhYnmoIflj7Pnp7siLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDEpIH0pLAoJCQlMOiBzaHkoIui3s+WIsOihjOWwviIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgLTEpIH0pLAoJCQlqOiBzaHkoIuWFieagh+S4i+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKSB9KSwKCQkJazogc2h5KCLlhYnmoIfkuIrnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkgfSksCgoJCQlnZzogc2h5KCLot7PliLDmn5DooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjb3VudCksIHRydWUgfSksCgkJCUc6IHNoeSgi6Lez5Yiw5p+Q6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY291bnQgPSBjb3VudD4xPyBjb3VudDogY2FuLm1heCksIHRydWUgfSksCgkJCXp0OiBzaHkoIuWwhuW9k+WJjeihjOaLieWIsOWxj+W5leacgOS4iiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC5zY3JvbGwoKS0oY291bnQ+MT8gY291bnQ6IDMpKSwgdHJ1ZSB9KSwKCQkJeno6IHNoeSgi5bCG5b2T5YmN6KGM5ouJ5Yiw5bGP5bmV5Lit6Ze0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLmN1cnJlbnQuc2Nyb2xsKGNhbi5jdXJyZW50LnNjcm9sbCgpLShjb3VudCA9IGNvdW50PjE/IGNvdW50OiBjYW4uY3VycmVudC53aW5kb3coKS8yKSksIHRydWUgfSksCgkJCXpiOiBzaHkoIuWwhuW9k+WJjeihjOaLieWIsOWxj+W5leacgOS4iyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC5zY3JvbGwoKS1jYW4uY3VycmVudC53aW5kb3coKSsoY291bnQ+MT8gY291bnQ6IDUpKSwgdHJ1ZSB9KSwKCgkJCWk6IHNoeSgi5o+S5YWl5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSB9KSwKCQkJSTogc2h5KCLmj5LlhaXooYzpppYiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAwLCAwKSB9KSwKCQkJYTogc2h5KCLmj5LlhaXmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAxKSB9KSwKCQkJQTogc2h5KCLmj5LlhaXooYzlsL4iLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAwLCAtMSkgfSksCgkJCW86IHNoeSgi5o+S5YWl5LiL5LiA6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJdGV4dCA9IHRleHQuc3Vic3RyKDAsIHRleHQuaW5kZXhPZih0ZXh0LnRyaW1MZWZ0KCkpKSsodGV4dC5lbmRzV2l0aCgieyIpPyJcdCI6IiIpCgkJCQljYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCB0ZXh0LCBjYW4uY3VycmVudC5uZXh0KCkpKQoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMTAwMCkKCQkJfSksCgkJCU86IHNoeSgi5o+S5YWl5LiK5LiA6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKQoJCQkJdGV4dCA9IHRleHQuc3Vic3RyKDAsIHRleHQuaW5kZXhPZih0ZXh0LnRyaW1MZWZ0KCkpKSsodGV4dC5lbmRzV2l0aCgifSIpPyJcdCI6IiIpCgkJCQljYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCB0ZXh0LCBjYW4uY3VycmVudC5saW5lKSkKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDEwMDApCgkJCX0pLAoKCQkJeXk6IHNoeSgi5aSN5Yi25b2T5YmN6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyBjYW4uX2xhc3RfdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKSB9KSwKCQkJZGQ6IHNoeSgi5Ymq5YiH5b2T5YmN6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyB2YXIgdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKSwgbGluZSA9IGNhbi5vbmFjdGlvbi5fZ2V0TGluZW5vKGNhbiwgY2FuLmN1cnJlbnQubGluZSkKCQkJCWNhbi5fbGFzdF90ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIGNhbi5jdXJyZW50LmxpbmUpKQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCB0ZXh0LCBsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSkgfSkKCQkJCXZhciBjYWxsZWUgPSBhcmd1bWVudHMuY2FsbGVlCgkJCQljYW4ucmVkby5wdXNoKGZ1bmN0aW9uKCkgeyBjYWxsZWUoZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgfSkKCQkJfSksCgkJCXA6IHNoeSgi57KY6LS0IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGNhbi5fbGFzdF90ZXh0LCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lLTEpIH0pCgkJCX0pLAoJCQlQOiBzaHkoIueymOi0tCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBjYW4uX2xhc3RfdGV4dCwgY2FuLmN1cnJlbnQubGluZSkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgbGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUrMSkgfSkKCQkJfSksCgoJCQlzOiBzaHkoIuS/neWtmOaWh+S7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNhdmUoZXZlbnQsIGNhbiwgInNhdmUiKSB9KSwKCQkJbTogc2h5KCLmt7vliqDmqKHlnZciLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5hdXRvZ2VuKGV2ZW50LCBjYW4sICJhdXRvZ2VuIikgfSksCgkJCWM6IHNoeSgi57yW6K+R6aG555uuIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY29tcGlsZShldmVudCwgY2FuLCAiY29tcGlsZSIpIH0pLAoJCX0sCgkJaW5zZXJ0OiB7CgkJCUVzY2FwZTogc2h5KCLpgIDlh7rnvJbovpEiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIkVzY2FwZSIpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmtleW1hcC5fbm9ybWFsKGV2ZW50LCBjYW4pCgkJCX0pLAoJCQlUYWI6IHNoeSgi57yp6L+bIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQua2V5ICE9ICJUYWIiKSB7IHJldHVybiB9CgkJCQljYW4ub25rZXltYXAuaW5zZXJ0VGV4dChjYW4udWkuY3VycmVudCwgaWNlLlRCKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0pLAoJCQlCYWNrc3BhY2U6IHNoeSgi5Yig6ZmkIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGlmIChldmVudC5rZXkgIT0gIkJhY2tzcGFjZSIpIHsgcmV0dXJuIH0KCQkJCWlmICh0YXJnZXQuc2VsZWN0aW9uU3RhcnQgPiAwKSB7IHJldHVybiB9CgkJCQlpZiAoIWNhbi5jdXJyZW50LnByZXYoKSkgeyByZXR1cm4gfQoJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgoJCQkJdmFyIHJlc3QgPSBjYW4uY3VycmVudC50ZXh0KCkKCQkJCWNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50LnByZXYoKSkKCQkJCWNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKQoJCQkJdmFyIHBvcyA9IGNhbi5jdXJyZW50LnRleHQoKS5sZW5ndGgKCgkJCQljYW4udWkuY3VycmVudC52YWx1ZSA9IGNhbi5jdXJyZW50LnRleHQoKStyZXN0CgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAwLCBwb3MpCgkJCX0pLAoJCQlFbnRlcjogc2h5KCLmjaLooYwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgaWYgKGV2ZW50LmtleSAhPSAiRW50ZXIiKSB7IHJldHVybiB9CgkJCQl2YXIgcmVzdCA9IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvbkVuZCksIHRleHQgPSBjYW4udWkuY3VycmVudC52YWx1ZQoJCQkJdmFyIGxlZnQgPSB0ZXh0LnN1YnN0cigwLCB0ZXh0LmluZGV4T2YodGV4dC50cmltTGVmdCgpKSl8fCh0ZXh0LnRyaW1SaWdodCgpID09ICIiPyB0ZXh0OiAiIikKCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCJ7IikpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyJ9IiwgY2FuLmN1cnJlbnQubmV4dCgpKSwgbGVmdCArPSBpY2UuVEIgfQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoIlsiKSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrIl0iLCBjYW4uY3VycmVudC5uZXh0KCkpLCBsZWZ0ICs9IGljZS5UQiB9CgkJCQlpZiAodGV4dC5lbmRzV2l0aCgiKCIpKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsiKSIsIGNhbi5jdXJyZW50Lm5leHQoKSksIGxlZnQgKz0gaWNlLlRCIH0KCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCJgIikgJiYgY2FuLmJhc2UuY291bnQodGV4dCwgImAiKSUyPT0xKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsiYCIsIGNhbi5jdXJyZW50Lm5leHQoKSkgfQoKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0K3Jlc3QudHJpbUxlZnQoKSwgY2FuLmN1cnJlbnQubmV4dCgpKQoJCQkJY2FuLmN1cnJlbnQudGV4dCh0ZXh0LnRyaW1SaWdodCgpfHx0ZXh0KSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSkKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIGxlZnQubGVuZ3RoLCAwKQoJCQl9KSwKCQkJQXJyb3dVcDogc2h5KCLlhYnmoIfkuIrnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGlmIChldmVudC5rZXkgIT0gIkFycm93VXAiKSB7IHJldHVybiB9CgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5wcmV2KCkpCgkJCX0pLAoJCQlBcnJvd0Rvd246IHNoeSgi5YWJ5qCH5LiL56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQua2V5ICE9ICJBcnJvd0Rvd24iKSB7IHJldHVybiB9CgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpCgkJCX0pLAoJCX0sCgl9LCBfZW5naW5lOiB7fSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBsaXN0OiBbbmZzLlNBVkUsIGNvZGUuQ09NUElMRSwgY29kZS5BVVRPR0VOLCBuZnMuU0NSSVBULCBjaGF0LldFQlNJVEUsIHdlYi5EUkVBTV0sCglfcnVuOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGFyZ3MsIGNiKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBhcmdzLCBjYnx8ZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpKSwgY2FuLnVpLnNvdXJjZS5yZWZyZXNoKCkKCQkJY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgYnV0dG9uKQoJCX0pCgl9LAoJX3J1bnM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgY2IpIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpOyBjYW4ucmVxdWVzdChldmVudCwge2FjdGlvbjogYnV0dG9ufSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBtZXRhLmZlYXR1cmVbYnV0dG9uXSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ub25hY3Rpb24uX3J1bihldmVudCwgY2FuLCBidXR0b24sIGFyZ3MsIGNiKQoJCX0pCgl9LAoJc2F2ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmlsZTogY2FuLk9wdGlvbihuZnMuRklMRSksIGNvbnRlbnQ6IGNhbi5vbmV4cG9ydC5jb250ZW50KGNhbil9KQoJCWNhbi5vbmFjdGlvbi5fcnVuKGV2ZW50LCBjYW4sIGJ1dHRvbiwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSkKCX0sCgljb21waWxlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIue8luivkeS4rS4uLiIpCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCksIGJ1dHRvbiwgW10sIGZ1bmN0aW9uKG1zZykgeyB0b2FzdC5jbG9zZSgpCgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyB2YXIgdG9hc3QxID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIumHjeWQr+S4rS4uLiIpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdG9hc3QxLmNsb3NlKCksIGNhbi5vbmFjdGlvbltjbGkuU0hPV10oe30sIGNhbikgfSwgMzAwMCkKCQkJfSBlbHNlIHsgY2FuLnVpLnNlYXJjaC5fc2hvdyhtc2cpIH0KCgkJfSkKCX0sCglhdXRvZ2VuOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uYWN0aW9uLl9ydW5zKGV2ZW50LCBjYW4sIGJ1dHRvbiwgZnVuY3Rpb24obXNnKSB7CgkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihjbGkuTUFJTiksICIiLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSksICIiLCBmdW5jdGlvbigpIHsKCQkJCWNhbi51aS5zb3VyY2UucmVmcmVzaCgpCgkJCX0pCgkJfSwgdHJ1ZSkKCX0pIH0sCglzY3JpcHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fcnVucyhjYW4ucmVxdWVzdChldmVudCwge2ZpbGU6IGNhbi5iYXNlLnRyaW1TdWZmaXgoY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpK25mcy5KU30pLCBjYW4sIGJ1dHRvbikKCX0sCgl3ZWJzaXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX3J1bnMoY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWxlOiAoY2FuLmJhc2UudHJpbVN1ZmZpeChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSkrbmZzLlpNTCkuc3BsaXQoIi8iKS5wb3AoKX0pLCBjYW4sIGJ1dHRvbikKCX0sCglkcmVhbTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9ydW5zKGNhbi5yZXF1ZXN0KGV2ZW50LCB7bmFtZTogY2FuLmJhc2UudHJpbVN1ZmZpeChjYW4uT3B0aW9uKG5mcy5GSUxFKSwgaWNlLlBUK2Nhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpfSksIGNhbiwgYnV0dG9uLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVpLmRyZWFtcy5yZWZyZXNoKCkKCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihtZGIuTkFNRSksIHdlYi5EUkVBTSkgLy8g5pi+56S656m66Ze0CgkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pCgkJfSkKCX0sCgki5re75YqgIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYXSwgZnVuY3Rpb24obGlzdCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsaXN0WzBdLCBjdHguSU5ERVgpIH0pIH0sCgki5o+S5Lu2IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVhdLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBzdWIgPSBjYW4udG9vbGtpdFtsaXN0WzBdXTsgaWYgKHN1YikgeyBzdWIuc2VsZWN0KCk7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBsaXN0WzBdfSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0W2xpc3RbMF1dID0gc3ViLnNlbGVjdCgpIH0pCgkJfSkKCX0sCgki5omp5bGVIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsidXJsIl0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJdmFyIHN1YiA9IGNhbi5leHRlbnRpb25zW2xpc3RbMF1dOyBpZiAoc3ViKSB7IHN1Yi5zZWxlY3QoKTsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0LmV4dHMoY2FuLCBsaXN0WzBdLCBmdW5jdGlvbihzdWIpIHsgY2FuLmV4dGVudGlvbnNbbGlzdFswXV0gPSBzdWIuc2VsZWN0KCkgfSkKCQl9KQoJfSwKCglsaXN0VGFnczogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBsaXN0ID0gW10KCQljYW4uY29yZS5JdGVtKGNhbi5yZXF1ZXN0KGV2ZW50KSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBpZiAoa2V5LmluZGV4T2YoIl8iKSA9PSAwKSB7IHJldHVybiB9CgkJCWxpc3QucHVzaCh7em9uZTogIm1zZyIsIHR5cGU6IHR5cGVvZiB2YWx1ZSwgbmFtZToga2V5LCB0ZXh0OiBjYW4uYmFzZS5pc09iamVjdCh2YWx1ZSk/ICIiOiAodmFsdWUrIiIpLnNwbGl0KGljZS5OTClbMF0sCgkJCQlwYXRoOiAidXNyL3ZvbGNhbm9zLyIsIGZpbGU6ICJsaWIvbWlzYy5qcyIsIGxpbmU6IDEsCgkJCX0pCgkJfSkKCQljYW4uY29yZS5MaXN0KFtjYW4uYmFzZSwgY2FuLmNvcmUsIGNhbi5taXNjLCBjYW4ucGFnZSwgY2FuLnVzZXIsIGNhbi5vbmVuZ2luZSwgY2FuLm9uZGFlbW9uLCBjYW4ub25hcHBlbmQsIGNhbi5vbmxheW91dCwgY2FuLm9ubW90aW9uLCBjYW4ub25rZXltYXBdLCBmdW5jdGlvbihsaWIpIHsKCQkJY2FuLmNvcmUuSXRlbShsaWIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCB8fCAhbGliLmhhc093blByb3BlcnR5KGtleSkpIHsgcmV0dXJuIH0KCQkJCWxpc3QucHVzaCh7em9uZTogbGliLl9uYW1lLCB0eXBlOiB0eXBlb2YgdmFsdWUsIG5hbWU6IGtleSwgdGV4dDogY2FuLmJhc2UuaXNPYmplY3QodmFsdWUpPyAiIjogKHZhbHVlKyIiKS5zcGxpdChpY2UuTkwpWzBdLAoJCQkJCXBhdGg6ICJ1c3Ivdm9sY2Fub3MvIiwgZmlsZTogbGliLl9wYXRoLCBsaW5lOiAxLAoJCQkJfSkKCQkJfSkKCQl9KQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHt0ZXh0OiBjYW4uYmFzZS5Gb3JtYXQobGlzdCl9KSwgYnV0dG9uKQoJfSwKCV9jb21wbGV0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLnVpLmNvbXBsZXRlCgkJaWYgKGV2ZW50ID09IHVuZGVmaW5lZCkgeyByZXR1cm4gfQoJCXZhciBwcmUgPSBjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZSgwLCBjYW4udWkuY3VycmVudC5zZWxlY3Rpb25TdGFydCkKCQl2YXIgZW5kID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIHR5cGUgPSBjYW4uY29yZS5TcGxpdChwcmUpLnBvcCgpfHwiIgoJCXZhciBuYW1lID0gY2FuLmNvcmUuU3BsaXQodHlwZSwgIiIsIGljZS5QVCkucG9wKCl8fCIiCgkJdHlwZSA9IGNhbi5iYXNlLnRyaW1TdWZmaXgodHlwZSwgbmFtZSkKCQl0eXBlID0gY2FuLmJhc2UudHJpbVN1ZmZpeCh0eXBlLCBpY2UuUFQpCgkJY29uc3QgUFJFID0gInByZSIKCgkJZnVuY3Rpb24gdXBkYXRlKHRhcmdldCkgeyBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IHR5cGUsIG5hbWU6IG5hbWUsIHRleHQ6IHByZSwgZmlsZTogY2FuLk9wdGlvbihuZnMuRklMRSl9KQoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCAiY29tcGxldGUiLCBbXSwgZnVuY3Rpb24obXNnKSB7IGNhbi51aS5jb21wbGV0ZS5fbXNnID0gbXNnCgkJCQlpZiAobXNnLkxlbmd0aCgpID09IDAgJiYgY2FuLmJhc2UuRXh0KGNhbi5PcHRpb24obmZzLkZJTEUpKSA9PSBuZnMuSlMpIHsKCQkJCQltc2cubmFtZSA9IFtdLCBtc2cudHlwZSA9IFtdLCBtc2cudGV4dCA9IFtdCgkJCQkJY2FuLmNvcmUuSXRlbShjYW4uY29yZS5WYWx1ZSh3aW5kb3csIHR5cGUpLCBmdW5jdGlvbihrLCB2KSB7CgkJCQkJCW1zZy5QdXNoKG1kYi5OQU1FLCBrKSwgbXNnLlB1c2gobWRiLlRZUEUsIHR5cGVvZiB2KQoJCQkJCQl0cnkgeyBtc2cuUHVzaChtZGIuVEVYVCwgdikgfSBjYXRjaCAoZSkgeyBtc2cuUHVzaChtZGIuVEVYVCwgIiIpIH0KCQkJCQl9KQoJCQkJCW1zZy5hcHBlbmQgPSBbbWRiLk5BTUUsIG1kYi5UWVBFLCBtZGIuVEVYVF0KCQkJCX0KCQkJCW1zZy5MZW5ndGgoKSA9PSAwICYmIHByZS50cmltKCkgPT0gIiIgJiYgY2FuLmNvcmUuSXRlbShjYW4uY29yZS5WYWx1ZShjYW4ub25zeW50YXhbY2FuLnBhcnNlXSwgY29kZS5LRVlXT1JEKSwgZnVuY3Rpb24oaykgewoJCQkJCW1zZy5QdXNoKG1kYi5OQU1FLCBrKQoJCQkJfSkKCQkJCQoJCQkJY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t2aWV3OiBbUFJFLCBodG1sLkRJViwgcHJlXX1dKQoJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCkgeyByZXR1cm4ge3RleHQ6IFt2YWx1ZSwgaHRtbC5URF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJdmFyIGxlZnQgPSBjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZSgwLCBjYW4udWkuY3VycmVudC5zZWxlY3Rpb25TdGFydCkrdmFsdWUKCQkJCQljYW4uY3VycmVudC50ZXh0KGNhbi51aS5jdXJyZW50LnZhbHVlID0gbGVmdCtjYW4udWkuY3VycmVudC52YWx1ZS5zbGljZShjYW4udWkuY3VycmVudC5zZWxlY3Rpb25FbmQpKQoJCQkJCWNhbi51aS5jdXJyZW50LmZvY3VzKCksIGNhbi51aS5jb250ZW50LnNjcm9sbExlZnQgLT0gMTAwMDAsIGNhbi51aS5jdXJyZW50LnNldFNlbGVjdGlvblJhbmdlKGxlZnQubGVuZ3RoLCBsZWZ0Lmxlbmd0aCkKCQkJCX19IH0sIHRhcmdldCkKCQkJfSkKCQl9CgoJCWZ1bmN0aW9uIGZpbHRlcigpIHsKCQkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW2h0bWwuVEJPRFksICBodG1sLlRSXSwgZnVuY3Rpb24odHIpIHsKCQkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLkhJREUsIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCkgewoJCQkJCWlmICh0ZC5pbm5lclRleHQudG9Mb3dlckNhc2UoKS5pbmRleE9mKGNhbi5iYXNlLnRyaW1TdWZmaXgoKG5hbWUgPT0gaWNlLlBUPyB0eXBlOiBuYW1lKS50b0xvd2VyQ2FzZSgpLCAiKCIpKSA9PSAwKSB7IHJldHVybiB0ZCB9CgkJCQl9KS5sZW5ndGggPT0gMCkpIHsgcmV0dXJuIHRyIH0KCQkJfSkubGVuZ3RoID4gKG5hbWUgPT0gaWNlLlBUPyAxOiAwKQoJCX0KCgkJZnVuY3Rpb24gc2VsZWN0KGluZGV4LCB0b3RhbCkgeyBpbmRleCA9IChpbmRleCsodG90YWwrMSkpJSh0b3RhbCsxKQoJCQlpZiAoaW5kZXggPT0gdG90YWwpIHsgY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGNhbi51aS5jb21wbGV0ZS5fbXNnLk9wdGlvbihQUkUpKSB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW2h0bWwuVEJPRFksICJ0cjpub3QoLmhpZGUpIl0sIGZ1bmN0aW9uKHRyLCBpKSB7IGlmIChjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuU0VMRUNULCBpID09IGluZGV4KSkgewoJCQkJY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGNhbi51aS5jb21wbGV0ZS5fbXNnLk9wdGlvbihQUkUpK2Nhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlREKVswXS5pbm5lclRleHQpCgkJCX0gfSkKCQkJcmV0dXJuIGluZGV4CgkJfQoKCQlpZiAoZXZlbnQuY3RybEtleSkgewoJCQlpZiAoZXZlbnQudHlwZSA9PSAia2V5dXAiKSB7CgkJCQl2YXIgdG90YWwgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAidHI6bm90KC5oaWRlKSJdKS5sZW5ndGgKCQkJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQkJY2FzZSAibiI6IGNhbi51aS5jb21wbGV0ZS5faW5kZXggPSBzZWxlY3QoY2FuLnVpLmNvbXBsZXRlLl9pbmRleCsxLCB0b3RhbCk7IGJyZWFrCgkJCQkJY2FzZSAicCI6IGNhbi51aS5jb21wbGV0ZS5faW5kZXggPSBzZWxlY3QoY2FuLnVpLmNvbXBsZXRlLl9pbmRleC0xLCB0b3RhbCk7IGJyZWFrCgkJCQkJZGVmYXVsdDogcmV0dXJuIGZhbHNlCgkJCQl9CgkJCQlyZXR1cm4gY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0KCQkJcmV0dXJuCgkJfQoKCQljYW4uY3VycmVudC5saW5lLmFwcGVuZENoaWxkKGNhbi51aS5jb21wbGV0ZSksIGNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbXBsZXRlLCBodG1sLkxFRlQsIGNhbi51aS5jdXJyZW50Lm9mZnNldExlZnQtMSwgaHRtbC5NQVJHSU5fVE9QLCBjYW4udWkuY3VycmVudC5vZmZzZXRIZWlnaHQrNCkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsICJkaXYucHJlIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmlubmVyVGV4dCA9IGNhbi51aS5jb21wbGV0ZS5fbXNnLk9wdGlvbihQUkUpfHxwcmUgfSkKCQlpZiAocHJlID09ICIiKSB7IHJldHVybiB1cGRhdGUodGFyZ2V0KSB9CgoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgaHRtbC5FTlRFUjogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWNhc2UgaHRtbC5UQUI6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGljZS5TUDogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWNhc2UgaWNlLlBUOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJZGVmYXVsdDogZmlsdGVyKCkgfHwgdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJfSBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gLTEKCX0sCgoJX3NlbGVjdExpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uY3VycmVudC5saW5lLCAidGQudGV4dCIsIGZ1bmN0aW9uKHRkKSB7IGNhbi51aS5jdXJyZW50LnZhbHVlID0gdGQuaW5uZXJUZXh0CgkJCWNhbi5jdXJyZW50LmxpbmUuYXBwZW5kQ2hpbGQoY2FuLnVpLmN1cnJlbnQpLCBjYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jdXJyZW50LCBodG1sLkxFRlQsIHRkLm9mZnNldExlZnQtMSwgaHRtbC5XSURUSCwgY2FuLnVpLmNvbnRlbnQuc3R5bGUud2lkdGgpCgkJCWlmIChldmVudCkgewoJCQkJaWYgKGV2ZW50LnR5cGUgPT0gImNsaWNrIiAmJiBjYW4ubW9kZSAhPSAiaW5zZXJ0IikgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uX2NvbXBsZXRlKGV2ZW50LCBjYW4pIH0pCgkJCQl9CgkJCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAwLCAoZXZlbnQub2Zmc2V0WCkvMTItMSkKCQkJfQoJCX0pCgl9LAoJcmVyYW5rTGluZTogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgeyBjYW4ubWF4ID0gMAoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQljYW4ubWF4KyssIGNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJ0ZC5saW5lIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmlubmVyVGV4dCA9IGluZGV4KzEgfSkKCQl9KQoJfSwKCWluc2VydExpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGJlZm9yZSkgeyB2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5hcHBlbmRMaW5lKGNhbiwgdmFsdWUpCgkJYmVmb3JlICYmIGNhbi51aS5jb250ZW50Lmluc2VydEJlZm9yZShsaW5lLCBjYW4ub25hY3Rpb24uX2dldExpbmUoY2FuLCBiZWZvcmUpKQoJCXJldHVybiBjYW4ub25hY3Rpb24ucmVyYW5rTGluZShjYW4pLCBjYW4ub25hY3Rpb24uX2dldExpbmVubyhjYW4sIGxpbmUpCgl9LAoJZGVsZXRlTGluZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7IGxpbmUgPSBjYW4ub25hY3Rpb24uX2dldExpbmUoY2FuLCBsaW5lKQoJCXZhciBuZXh0ID0gbGluZS5uZXh0U2libGluZ3x8bGluZS5wcmV2aW91c1NpYmxpbmcKCQlyZXR1cm4gY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgbGluZSksIGNhbi5vbmFjdGlvbi5yZXJhbmtMaW5lKGNhbiksIG5leHQKCX0sCgltb2RpZnlMaW5lOiBmdW5jdGlvbihjYW4sIGxpbmUsIHZhbHVlKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVFIsIGZ1bmN0aW9uKGl0ZW0sIGluZGV4KSB7CgkJCWlmIChpdGVtICE9IGxpbmUgJiYgaW5kZXgrMSAhPSBsaW5lKSB7IHJldHVybiB9CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJ0ZC50ZXh0IiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJaXRlbS5pbm5lckhUTUwgPSBjYW4ub25zeW50YXguX3BhcnNlKGNhbiwgdmFsdWUpCgkJCX0pCgkJfSkKCX0sCglmYXZvckxpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6ICJ6b25lIiwgdmFsdWU6ICJoaSJ9LCB7bmFtZTogIm5hbWUiLCB2YWx1ZTogImhlbGxvIn1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGNvZGUuRkFWT1IsIFtjdHguQUNUSU9OLCBtZGIuSU5TRVJULCBtZGIuWk9ORSwgZGF0YS56b25lfHwiIiwKCQkJCW1kYi5UWVBFLCBjYW4ucGFyc2UsIG1kYi5OQU1FLCBkYXRhLm5hbWV8fCIiLCBtZGIuVEVYVCwgKHZhbHVlfHwiIikudHJpbVJpZ2h0KCksCgkJCQluZnMuUEFUSCwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG5mcy5GSUxFLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgbmZzLkxJTkUsIGNhbi5PcHRpb24obmZzLkxJTkUpLAoJCQldKQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsi5paH5Lu25pWwIiwgIuaooeW8jyIsICLmjInplK4iLCAi6Kej5p6Q5ZmoIiwgIuaWh+S7tuWQjSIsICLlvZPliY3ooYwiLCAi6Lez6L2s5pWwIl19KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvY29kZS94dGVybS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGVfYXV0byhjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiksIGNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiksIGNhbi50ZXJtID0ge30KCgkJY2FuLnJlcXVpcmVNb2R1bGVzKFsieHRlcm0vY3NzL3h0ZXJtLmNzcyIsICJ4dGVybSIsICJ4dGVybS1hZGRvbi1maXQiLCAieHRlcm0tYWRkb24td2ViLWxpbmtzIl0sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgCgkJCWlmIChjYW4uT3B0aW9uKG1kYi5IQVNIKSAhPSAiIikgewoJCQkJdmFyIGl0ZW0gPSB7aGFzaDogY2FuLk9wdGlvbihtZGIuSEFTSCl9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgdmFsdWUua2V5LCB2YWx1ZS52YWx1ZSkgfSkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCBpdGVtKQoJCQl9CgoJCQl2YXIgaGFzaCA9IGNhbi5zdXAuX2hhc2h8fGNhbi5taXNjLlNlYXJjaEhhc2goY2FuKXx8dHJ1ZSwgbGlzdCA9IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQkJdmFyIGl0ZW0gPSBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCB2YWx1ZSk7IHZhbHVlLmhhc2ggPT0gaGFzaCAmJiAoaXRlbS5jbGljaygpLCBoYXNoID0gZmFsc2UpCgkJCX0pOyBoYXNoICYmIGNhbi5vbmltcG9ydC5fY3JlYXRlKGNhbiwgW21kYi5UWVBFLCAiIiwgbWRiLk5BTUUsICJ0ZXJtIl0pCgkJfSwgNTAwKSB9KQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCksIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQl2YXIgdGVybSA9IGNhbi51aS5jb250ZW50Ll90ZXJtOyBpZiAoIXRlcm0pIHsgcmV0dXJuIH0KCQl0ZXJtLl9maXQuZml0KCksIGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkKCX0sCglfaXRlbTogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJaXRlbS5fbWVudSA9IHNoeShjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCWNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKSwgbWV0YVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkKCQl9KQoJCXJldHVybiBpdGVtLl9pdGVtID0gY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBpdGVtLCBmdW5jdGlvbihldmVudCkgeyAKCQkJaXRlbS5fdGFicz8gaXRlbS5fdGFicy5jbGljaygpOiBpdGVtLl90YWJzID0gY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbaXRlbV0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCBpdGVtKQoJCQl9KSwgaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCwgdHJ1ZSkKCQl9LCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGl0ZW0uX21lbnUpIH0pCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oY2FuLCBhcmdzLCBkYXRhKSB7CgkJY2FuLnJ1bkFjdGlvbih7fSwgbWRiLkNSRUFURSwgYXJncywgZnVuY3Rpb24obXNnKSB7CgkJCXZhciBjdXJyZW50ID0gY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwge2hhc2g6IG1zZy5SZXN1bHQoKSwgbmFtZTogbXNnLk9wdGlvbihtZGIuTkFNRSksIGV4dHJhOiBkYXRhfSkKCQkJY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgY3VycmVudCwgY2FuLnVpLnByb2plY3QuZmlyc3RDaGlsZCkuY2xpY2soKQoJCX0pCgl9LAoJX2Nvbm5lY3Q6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLnVpLmNvbnRlbnQKCQljYW4uc3VwLl9oYXNoID0gaXRlbS5oYXNoLCBjYW4uaXNDbWRNb2RlKCkgJiYgKGxvY2F0aW9uLmhhc2ggPSBpdGVtLmhhc2gpCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXRlbS5oYXNoIH0sIHRhcmdldCwgY2FuLnVpLnByb2ZpbGUpKSB7CgkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0pLCAic2VsZWN0IiksIGl0ZW0uX3Rlcm0uZm9jdXMoKQoJCQlyZXR1cm4gY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCBpdGVtLl90ZXJtKQoJCX0KCgkJaXRlbS5leHRyYSA9IGNhbi5iYXNlLk9iaihpdGVtLmV4dHJhLCB7fSkKCQl2YXIgdGVybSA9IG5ldyBUZXJtaW5hbCh7dGhlbWU6IGl0ZW0uZXh0cmEsIGN1cnNvckJsaW5rOiB0cnVlLCB0YWJTdG9wV2lkdGg6IDR9KQoJCXZhciBmaXRBZGRvbiA9IG5ldyBGaXRBZGRvbi5GaXRBZGRvbigpOyB0ZXJtLmxvYWRBZGRvbihmaXRBZGRvbiksIHRlcm0uX2ZpdCA9IGZpdEFkZG9uCgkJdGVybS5sb2FkQWRkb24obmV3IFdlYkxpbmtzQWRkb24uV2ViTGlua3NBZGRvbigpKQoKCQl0ZXJtLm9wZW4odGFyZ2V0fHxjYW4udWkuY29udGVudCkKCQl0ZXJtLm9uUmVzaXplKGZ1bmN0aW9uKHNpemUpIHsgY2FuLm9uaW1wb3J0Ll9zaXplKGNhbiwgaXRlbSwgc2l6ZSkgfSkKCQlmaXRBZGRvbi5maXQoKQoKCQl2YXIgc3VibW9kZSA9IGZhbHNlLCBrZXlza2lwID0gZmFsc2UKCQl0ZXJtLm9uS2V5KGZ1bmN0aW9uKGUpIHsgdmFyIGV2ZW50ID0gZS5kb21FdmVudAoJCQlpZiAoc3VibW9kZSkgeyBrZXlza2lwID0gdHJ1ZTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgImwiOiB0YXJnZXQubmV4dFNpYmxpbmcgJiYgdGFyZ2V0Lm5leHRTaWJsaW5nLl90ZXJtPyB0YXJnZXQubmV4dFNpYmxpbmcuX3Rlcm0uZm9jdXMoKToKCQkJCQkJaXRlbS5fdGFicyAmJiBpdGVtLl90YWJzLm5leHRTaWJsaW5nICYmIGl0ZW0uX3RhYnMubmV4dFNpYmxpbmcuY2xpY2soKTsKCQkJCQlicmVhawoJCQkJY2FzZSAiaCI6IHRhcmdldC5wcmV2aW91c1NpYmxpbmcgJiYgdGFyZ2V0LnByZXZpb3VzU2libGluZy5fdGVybT8gdGFyZ2V0LnByZXZpb3VzU2libGluZy5fdGVybS5mb2N1cygpOgoJCQkJCQlpdGVtLl90YWJzICYmIGl0ZW0uX3RhYnMucHJldmlvdXNTaWJsaW5nICYmIGl0ZW0uX3RhYnMucHJldmlvdXNTaWJsaW5nLmNsaWNrKCk7CgkJCQkJYnJlYWsKCQkJCWNhc2UgIm4iOiBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pOyBicmVhawoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OiBrZXlza2lwID0gZmFsc2UKCQkJfSB9CgkJCXN1Ym1vZGUgPSBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PSAiZyIKCQkJY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKQoJCX0pCgkJdGVybS5vbkRhdGEoZnVuY3Rpb24odmFsKSB7CgkJCWlmIChzdWJtb2RlIHx8IGtleXNraXApIHsga2V5c2tpcCA9IGZhbHNlOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuX2lucHV0KGNhbiwgaXRlbSwgdmFsKQoJCX0pCgkJdGVybS5vblRpdGxlQ2hhbmdlKGZ1bmN0aW9uKHRpdGxlKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZSh0aXRsZSkgfSkKCQl0ZXJtLm9uQ3Vyc29yTW92ZShmdW5jdGlvbihlKSB7IGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkgfSkKCgkJY2FuLnRlcm1baXRlbS5oYXNoXSA9IGl0ZW0uX3Rlcm0gPSB0YXJnZXQuX3Rlcm0gPSB0ZXJtLCB0ZXJtLl90YXJnZXQgPSB0YXJnZXQsIHRlcm0uX2l0ZW0gPSBpdGVtCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwgaXRlbSksICJzZWxlY3QiKSwgaXRlbS5fdGVybS5mb2N1cygpCgkJcmV0dXJuIGNhbi5vbmltcG9ydC5fcGx1ZyhjYW4sIGl0ZW0pLCBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbCkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIGl0ZW0pLCAiaW5wdXQiLCBbYnRvYSh2YWwpXSwgZnVuY3Rpb24oKSB7fSkKCX0sCglfc2l6ZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBzaXplKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgc2l6ZSwgaXRlbSksICJyZXNpemUiLCBbXSkKCX0sCglfcGx1ZzogZnVuY3Rpb24oY2FuLCBpdGVtKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9maWxlKQoJCWNhbi5vbmltcG9ydC5wbHVnKGNhbiwgaXRlbS5leHRyYSwgY2FuLnVpLnByb2ZpbGUsIGZ1bmN0aW9uKHN1YikgeyBpdGVtLl9wbHVnaW4gPSBzdWIKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSozLzQpCgkJfSkKCX0sCglncm93OiBmdW5jdGlvbihjYW4sIG1zZywgdHlwZSkgeyB2YXIgdGVybSA9IGNhbi50ZXJtW21zZy5PcHRpb24obWRiLkhBU0gpXTsgaWYgKCF0ZXJtKSB7IHJldHVybiB9CgkJc3dpdGNoICh0eXBlKSB7CgkJCWNhc2UgImRhdGEiOiB0ZXJtLndyaXRlKGF0b2IobXNnLk9wdGlvbihtZGIuVEVYVCkpKTsgYnJlYWsKCQkJY2FzZSAiZXhpdCI6IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRlcm0uX3RhcmdldCk7IGJyZWFrCgkJfQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbbWRiLkNSRUFURSwgbGV4LlNQTElULCBtZGIuUFJVTkVTXSwKCV90cmFuczoge3NwbGl0OiAi5YiG5bGPIiwgdGhlbWU6ICLkuLvpopgifSwKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsICJiYWNrZ3JvdW5kIiwgY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jcmVhdGUoY2FuLCBhcmdzLCBkYXRhKQoJCX0pCgl9LAoJc3BsaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtuYW1lOiAidGVybSIsIG5yb3c6IDIsIG5jb2w6IDJ9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsICJucm93IiwgIm5jb2wiXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ub25pbXBvcnQudGFicyhjYW4sIFtkYXRhXSwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGF0YS5uYW1lIH0sIGNhbi51aS5jb250ZW50KSkgeyByZXR1cm4gfQoJCQkJY2FuLmNvcmUuTGlzdChwYXJzZUludChkYXRhLm5yb3cpLCBmdW5jdGlvbihucm93KSB7IHZhciByb3cgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgW3t2aWV3OiAicm93Iiwgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvZGF0YS5ucm93fX1dKS5maXJzdAoJCQkJCWNhbi5jb3JlLkxpc3QocGFyc2VJbnQoZGF0YS5uY29sKSwgZnVuY3Rpb24obmNvbCkgeyB2YXIgY29sID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgcm93LCBbe3ZpZXc6ICJjb2wiLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS9kYXRhLm5yb3csIHdpZHRoOiBjYW4uQ29uZldpZHRoKCkvZGF0YS5uY29sLTJ9fV0pLmZpcnN0CgkJCQkJCWNhbi5ydW5BY3Rpb24oe30sIG1kYi5DUkVBVEUsIFttZGIuVFlQRSwgZGF0YS50eXBlLCBtZGIuTkFNRSwgY2FuLmNvcmUuS2V5cyhkYXRhLm5hbWUsIG5yb3csIG5jb2wpXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5fY29ubmVjdChjYW4sIHtoYXNoOiBtc2cuUmVzdWx0KCl9LCBjb2wpIH0pCgkJCQkJfSkKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogWyJzaGFyZSIsICJwbHVnaW4iLCAidGhlbWUiLCAicmVuYW1lIiwgInJlbW92ZSJdLAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuT3B0aW9uKCJhcmdzIiwgIiIpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IGl0ZW0ubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgY2FuLl9pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KFtjYW4uc3VwLl9oYXNoXSksCgkJXSkKCX0sCglwbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKSwgY2FuLmJhc2UuQ29weShpdGVtLmV4dHJhLCBkYXRhKSwgY2FuLm9uaW1wb3J0Ll9wbHVnKGNhbiwgaXRlbSkKCQl9KQoJfSwKCXRoZW1lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbImJhY2tncm91bmQiLCAic2VsZWN0aW9uIiwgImN1cnNvciIsICJmb3JlZ3JvdW5kIl0sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgYXJncyksIGNhbi5iYXNlLkNvcHkoaXRlbS5leHRyYSwgZGF0YSksIGl0ZW0uX3Rlcm0uc2V0T3B0aW9uKCJ0aGVtZSIsIGRhdGEpCgkJfSkKCX0sCglyZW5hbWU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBhcmdzKSwgaXRlbS5uYW1lID0gaXRlbS5faXRlbS5pbm5lclRleHQgPSBpdGVtLl90YWJzLmlubmVyVGV4dCA9IGFyZ3NbMV0KCQl9KQoJfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbbWRiLlRPVEFMLCBtZGIuVFlQRSwgImJhY2tncm91bmQiLCAicm93cyIsICJjb2xzIiwgImN1cnNvclkiLCAiY3Vyc29yWCIsIGN0eC5JTkRFWF0sCgl0ZXJtOiBmdW5jdGlvbihjYW4sIHRlcm0pIHsgaXRlbSA9IHRlcm0uX2l0ZW0KCQljYW4uY29yZS5MaXN0KGNhbi5vbmV4cG9ydC5saXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJY2FuLlN0YXR1cyhrZXksIGNhbi5iYXNlLmdldFZhbGlkKGl0ZW1ba2V5XSwgaXRlbS5leHRyYVtrZXldLCB0ZXJtW2tleV0sIHRlcm0uYnVmZmVyLmFjdGl2ZVtrZXldLCAiIikpCgkJfSkKCQljYW4uU3RhdHVzKG1kYi5UT1RBTCwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0pLmxlbmd0aCkKCQljYW4uU3RhdHVzKG1kYi5UWVBFLCBpdGVtW21kYi5UWVBFXXx8IiIpCgkJcmV0dXJuIHRlcm0KCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC90ZWFtL3BsYW4uanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLm9uaW1wb3J0W2Nhbi5PcHRpb24oInNjYWxlIil8fCJ3ZWVrIl0oY2FuLCBtc2cpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5NQVhfSEVJR0hULCBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvZmlsZSwgaHRtbC5NQVhfSEVJR0hULCBjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgIWNhbi51c2VyLmlzTGFuZHNjYXBlKCkgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCSFjYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIHRydWUpCgkJIWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuZGlzcGxheSwgdHJ1ZSkKCX0sCglfY29udGVudDogZnVuY3Rpb24oY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpIHsKCQl2YXIgaGFzaCA9IHt9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHZhciBrID0ga2V5KGNhbi5iYXNlLkRhdGUodmFsdWUuYmVnaW5fdGltZSkpOyBoYXNoW2tdID0gKGhhc2hba118fFtdKS5jb25jYXQoW3ZhbHVlXSkgfSkKCgkJY2FuLnN1cC50YXNrICYmIChjYW4uc3VwLnRhc2suX3RhcmdldCA9IG51bGwpCgkJdmFyIGJlZ2luX3RpbWUgPSBjYW4uYmFzZS5EYXRlKGNhbi5PcHRpb24oImJlZ2luX3RpbWUiKSkKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgW3t2aWV3OiBbY2hhdC5DT05URU5ULCBodG1sLlRBQkxFXSwgbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihob3VyLCByb3cpIHsKCQkJcmV0dXJuIHt0eXBlOiBodG1sLlRSLCBsaXN0OiBjYW4uY29yZS5MaXN0KGhlYWQsIGZ1bmN0aW9uKHdlZWssIGNvbCkgewoJCQkJaWYgKHJvdyA9PSAwKSB7IHJldHVybiB7dGV4dDogW2Nhbi51c2VyLnRyYW5zKGNhbiwgd2VlayksIGh0bWwuVEhdfSB9CgkJCQlpZiAoY29sID09IDApIHsgcmV0dXJuIHt0ZXh0OiBbaG91ciwgaHRtbC5URF19IH0KCQkJCXJldHVybiBjYW4ub25pbXBvcnQuX3Rhc2soY2FuLCBtc2csIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCksIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykpCgkJCX0pfQoJCX0pIH1dKSwgY2FuLlN0YXR1cyhtZGIuQ09VTlQsIG1zZy5MZW5ndGgoKSkKCgkJbXNnLkxlbmd0aCgpID4gMCAmJiBjYW4uc3VwLnRhc2sgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCXZhciB0YXJnZXQgPSBjYW4uc3VwLnRhc2suX3RhcmdldHx8Y2FuLnRhc2suX3RhcmdldDsgY2FuLnN1cC50YXNrID0gbnVsbCwgdGFyZ2V0ICYmIHRhcmdldC5jbGljaygpCgkJfSkKCX0sCglfdGFzazogZnVuY3Rpb24oY2FuLCBtc2csIGxpc3QsIHRpbWUpIHsgcmV0dXJuIHt0ZXh0OiBbIiIsIGh0bWwuVERdLAoJCW9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFjdGlvbi5pbnNlcnRUYXNrKGV2ZW50LCBjYW4sIHRpbWUrY2FuLmJhc2UuVGltZShudWxsLCAiJXktJW0tJWQgJUg6JU06JVMiKS5zbGljZSh0aW1lLmxlbmd0aCkpCgkJfSwKCQlvbmRyb3A6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQljYW4uZHJvcChldmVudCwgZXZlbnQudGFyZ2V0LCB0aW1lKQoJCX0sCgkJb25kcmFnb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRELCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgIm92ZXIiLCBldmVudC50YXJnZXQgPT0gaXRlbSkKCQkJfSkKCQl9LAoJCWxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odGFzaykgewoJCQlyZXR1cm4gY2FuLmJhc2UuaXNTdHJpbmcodGFzayk/IHt0ZXh0OiBbdGFzaywgaHRtbC5ESVYsICJkYXRlIl19OiB7dGV4dDogW2Nhbi5vbmV4cG9ydFtjYW4uQWN0aW9uKCJ2aWV3Iil8fCJ0ZXh0Il0oY2FuLCB0YXNrKSwgaHRtbC5ESVYsIGNhbi5vbmV4cG9ydC5zdHlsZShjYW4sIHRhc2spXSwKCQkJCW9uZHJhZ3N0YXJ0OiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0OyBjYW4uZHJvcCA9IGZ1bmN0aW9uKGV2ZW50LCB0ZCwgdGltZSkgeyB0ZC5hcHBlbmQodGFyZ2V0KQoJCQkJCWNhbi5vbmFjdGlvbi5tb2RpZnlUYXNrKGV2ZW50LCBjYW4sIHRhc2ssICJiZWdpbl90aW1lIiwgdGltZSt0YXNrLmJlZ2luX3RpbWUuc2xpY2UodGltZS5sZW5ndGgpLCB0YXNrLmJlZ2luX3RpbWUpCgkJCQl9IH0sIGRyYWdnYWJsZTogdGltZSAhPSB1bmRlZmluZWQsIHRpdGxlOiBjYW4ub25leHBvcnQudGl0bGUoY2FuLCB0YXNrKSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJCXZhciBpdGVtID0gY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCB7bmljazogdGFzay5uYW1lKyI6Iit0YXNrLnRleHR9LCBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5URCwgdGFyZ2V0LnBhcmVudE5vZGUpLCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCB0YXNrKQoJCQkJCX0pIH0sIG51bGwsIGNhbi51aS5wcm9qZWN0KTsgdGFzay5fdGFyZ2V0ID0gdGFyZ2V0LCB0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IGl0ZW0uY2xpY2soKSB9CgkJCQkJY2FuLnRhc2sgPSBjYW4udGFza3x8dGFzaywgY2FuLnN1cC50YXNrID0gY2FuLnN1cC50YXNrfHx0YXNrLCBjYW4uc3VwLnRhc2suem9uZSA9PSB0YXNrLnpvbmUgJiYgY2FuLnN1cC50YXNrLmlkID09IHRhc2suaWQgJiYgKGNhbi5zdXAudGFzay5fdGFyZ2V0ID0gdGFyZ2V0KQoJCQkJfSwKCQkJfQoJCX0pLAoJfSB9LAoJX3Byb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgewoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIGNhbi5zdXAudGFzayA9IHRhc2ssIGNhbi5TdGF0dXModGFzayksIFt0YXNrLnBvZCwgdGFzay56b25lLCB0YXNrLmlkXS5qb2luKGljZS5QVCkgfSwgY2FuLnVpLnByb2ZpbGUsIGNhbi51aS5kaXNwbGF5KSkgeyByZXR1cm4gfQoKCQl0YXNrLmV4dHJhICYmIGNhbi5jb3JlLkl0ZW0oY2FuLmJhc2UuT2JqKHRhc2suZXh0cmEpLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHRhc2tbImV4dHJhLiIra2V5XSA9IHZhbHVlIH0pLCBkZWxldGUodGFzay5leHRyYSkKCQl2YXIgdGFibGUgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLnVpLnByb2ZpbGUsIFt7dmlldzogW2NoYXQuQ09OVEVOVCwgaHRtbC5UQUJMRV0sIGxpc3Q6IFt7dGg6IFttZGIuS0VZLCBtZGIuVkFMVUVdfV19XSkuZmlyc3QKCQljYW4uY29yZS5JdGVtKHRhc2ssIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsga2V5ICE9ICJfdGFyZ2V0IiAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgW3sKCQkJdGQ6IFtrZXksIGtleSA9PSBpY2UuUE9EICYmIHZhbHVlICE9ICIiPyBjYW4ucGFnZS5Gb3JtYXQoaHRtbC5BLCBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IHZhbHVlfSksIHZhbHVlKTogdmFsdWVdLAoJCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTlBVVCwgZXZlbnQudGFyZ2V0KSAmJiBldmVudC50YXJnZXQudHlwZSA9PSBodG1sLkJVVFRPTikgewoJCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgdGFzayksIFtjdHguQUNUSU9OLCBldmVudC50YXJnZXQubmFtZV0sIGZ1bmN0aW9uKG1zZykgeyBjYW4uVXBkYXRlKCkgfSkKCQkJfSB9LAoJCQlvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoKQoJCQkJc3dpdGNoIChrZXkpIHsKCQkJCQljYXNlICJ6b25lIjoKCQkJCQljYXNlICJpZCI6CgkJCQkJCXJldHVybgoJCQkJCWNhc2UgImxldmVsIjoKCQkJCQljYXNlICJzY29yZSI6CgkJCQkJCW1zZy5QdXNoKGtleSwgIjEiKQoJCQkJCQltc2cuUHVzaChrZXksICIyIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiMyIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjQiKQoJCQkJCQltc2cuUHVzaChrZXksICI1IikKCQkJCQkJYnJlYWsKCQkJCQljYXNlICJzdGF0dXMiOgoJCQkJCQltc2cuUHVzaChrZXksICJwcmVwYXJlIikKCQkJCQkJbXNnLlB1c2goa2V5LCAicHJvY2VzcyIpCgkJCQkJCW1zZy5QdXNoKGtleSwgImZpbmlzaCIpCgkJCQkJCW1zZy5QdXNoKGtleSwgImNhbmNlbCIpCgkJCQkJCWJyZWFrCgkJCQl9CgkJCQljYW4ub25tb3Rpb24ubW9kaWZ5KGNhbiwgZXZlbnQudGFyZ2V0LCBmdW5jdGlvbihzdWIsIHZhbHVlKSB7CgkJCQkJY2FuLm9uYWN0aW9uLm1vZGlmeVRhc2soZXZlbnQsIGNhbiwgdGFzaywga2V5LCB2YWx1ZSkKCQkJCX0sIHtuYW1lOiBrZXksIGFjdGlvbjoga2V5LmluZGV4T2YobWRiLlRJTUUpID4gMD8gImRhdGUiOiAia2V5IiwgbXNnOiBtc2csIG1vZGU6ICJzaW1wbGUifSkKCQkJfSwKCQl9XSkgfSksIGNhbi5vbmltcG9ydC5fZGlzcGxheShjYW4sIHRhc2spCgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyBpZiAoIXRhc2tbImV4dHJhLmNtZCJdKSB7IHJldHVybiB9CgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiAicGx1ZyIsIGN0eDogdGFza1siZXh0cmEuY3R4Il0sIGNtZDogdGFza1siZXh0cmEuY21kIl0sIGFyZzogdGFza1siZXh0cmEuYXJnIl19LCBmdW5jdGlvbihzdWIsIG1ldGEpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIGtpdC5EaWN0KCJ0YXNrLnBvZCIsIHRhc2tbInBvZCJdLCAidGFzay56b25lIiwgdGFzay56b25lLCAidGFzay5pZCIsIHRhc2suaWQpKQoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaWNlLlJVTiwgW3Rhc2tbbWRiLlpPTkVdLCB0YXNrW21kYi5JRF1dLmNvbmNhdChjbWRzKSwgY2IpCgkJCX0KCQl9LCBjYW4udWkuZGlzcGxheSkKCX0sCgoJZGF5OiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gWyJob3VyIiwgInRhc2siXQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gNzsgaSA8IDI0OyBpKyspIHsgbGlzdC5wdXNoKGNhbi5iYXNlLk51bWJlcihpLCAyKSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gY2FuLmJhc2UuTnVtYmVyKHRpbWUuZ2V0SG91cnMoKSwgMikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtsaXN0W3Jvd11dIH0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUoYmVnaW5fdGltZSwgIiV5LSVtLSVkICIpK2xpc3Rbcm93XSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgl3ZWVrOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gY2FuLm9uZXhwb3J0LmhlYWQoY2FuLCAiaG91ciIpCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSA3OyBpIDwgMjQ7IGkrKykgeyBsaXN0LnB1c2goY2FuLmJhc2UuTnVtYmVyKGksIDIpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiB0aW1lLmdldERheSgpKyIgIitjYW4uYmFzZS5OdW1iZXIodGltZS5nZXRIb3VycygpLCAyKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2NvbC0xKyIgIitsaXN0W3Jvd11dIH0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUoY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtYmVnaW5fdGltZS5nZXREYXkoKStjb2wtMSksICIleS0lbS0lZCAiKStsaXN0W3Jvd10gfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAoJbW9udGg6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBjYW4ub25leHBvcnQuaGVhZChjYW4sICJvcmRlciIpCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSAxOyBpIDwgNjsgaSsrKSB7IGxpc3QucHVzaChpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsICIleS0lbS0lZCIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsKCQkJdmFyIGJlZ2luID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpKQoJCQl2YXIgbGFzdCA9IGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLShiZWdpbl90aW1lLmdldERhdGUoKS0xKS1iZWdpbi5nZXREYXkoKSkKCQkJdmFyIGRheSA9IGNhbi5iYXNlLlRpbWVBZGQobGFzdCwgKHJvdy0xKSo3K2NvbCkKCQkJcmV0dXJuIFtkYXkuZ2V0RGF0ZSgpKyIiXS5jb25jYXQoaGFzaFtrZXkoZGF5KV18fFtdKQoJCX0KCQlmdW5jdGlvbiBzZXQoYmVnaW5fdGltZSwgY29sLCByb3cpIHsKCQkJdmFyIGJlZ2luID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpKQoJCQl2YXIgbGFzdCA9IGNhbi5iYXNlLlRpbWVBZGQoYmVnaW5fdGltZSwgLShiZWdpbl90aW1lLmdldERhdGUoKS0xKS1iZWdpbi5nZXREYXkoKSkKCQkJdmFyIGRheSA9IGNhbi5iYXNlLlRpbWVBZGQobGFzdCwgKHJvdy0xKSo3K2NvbCkKCQkJcmV0dXJuIGtleShkYXkpCgkJfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAoJeWVhcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IGNhbi5vbmV4cG9ydC5oZWFkKGNhbiwgIm1vbnRoIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCAxMzsgaSsrKSB7IGxpc3QucHVzaChpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsICIleS0lbSAiKSt0aW1lLmdldERheSgpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbYmVnaW5fdGltZS5nZXRGdWxsWWVhcigpKyItIitjYW4uYmFzZS5OdW1iZXIocm93LCAyKSsiICIrKGNvbC0xKV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gYmVnaW5fdGltZS5nZXRGdWxsWWVhcigpKyItIitjYW4uYmFzZS5OdW1iZXIobGlzdFtyb3ddLCAyKSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCglsb25nOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBiZWdpbl90aW1lID0gY2FuLmJhc2UuRGF0ZShjYW4uYmFzZS5UaW1lKGNhbi5PcHRpb24oImJlZ2luX3RpbWUiKSwgIiV5LSVtLSVkICVIOiVNOiVTIikpCgkJdmFyIGJlZ2luID0gYmVnaW5fdGltZS5nZXRGdWxsWWVhcigpIC0gNQoKCQl2YXIgaGVhZCA9IFsibW9udGgiXTsgZm9yICh2YXIgaSA9IDA7IGkgPCAxMDsgaSsrKSB7IGhlYWQucHVzaChiZWdpbitpKSB9CgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSAxOyBpIDwgMTM7IGkrKykgeyBsaXN0LnB1c2goaSkgfQoKCQlmdW5jdGlvbiBrZXkodGltZSkgeyByZXR1cm4gY2FuLmJhc2UuVGltZSh0aW1lLCAiJXktJW0iKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2JlZ2luK2NvbC0xKyItIitjYW4uYmFzZS5OdW1iZXIocm93LCAyKV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gYmVnaW4rY29sLTErIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7bkuqTkupIiLCBsaXN0OiBbCgkJImluc2VydCIsICJleHBvcnQiLCAiaW1wb3J0IiwKCQlbImxldmVsIiwgImFsbCIsICJsMSIsICJsMiIsICJsMyIsICJsNCIsICJsNSJdLAoJCVsic3RhdHVzIiwgImFsbCIsICJwcmVwYXJlIiwgInByb2Nlc3MiLCAiY2FuY2VsIiwgImZpbmlzaCJdLAoJCVsic2NvcmUiLCAiYWxsIiwgInMxIiwgInMyIiwgInMzIiwgInM0IiwgInM1Il0sCgkJWyJ2aWV3IiwgIiIsICJuYW1lIiwgInRleHQiLCAibGV2ZWwiLCAic2NvcmUiXSwKCV0sCglfdHJhbnM6IHsidGFzayI6ICLku7vliqEiLCAiaG91ciI6ICLml7bpl7QiLCAibW9udGgiOiAi5pyI5Lu9In0sCglpbnNlcnRUYXNrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0aW1lKSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtiZWdpbl90aW1lOiB0aW1lfSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBjYW4uQ29uZihbY3R4LkZFQVRVUkUsIG1kYi5JTlNFUlRdKSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuSU5TRVJULCBbInpvbmUiLCBhcmdzWzFdLCAiYmVnaW5fdGltZSIsIHRpbWVdLmNvbmNhdChhcmdzKSkKCQl9KQoJfSwKCW1vZGlmeVRhc2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhc2ssIGtleSwgdmFsdWUpIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB0YXNrKSwgbWRiLk1PRElGWSwgW2tleSwgdmFsdWUsIHRhc2tba2V5XV0pCgl9LAoKCV9maWx0ZXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgdmFyIGNvdW50ID0gMAoJCWlmICh2YWx1ZSA9PSAiYWxsIikgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5ESVZfSVRFTSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuSElERSksIGNvdW50KysKCQkJfSkKCQl9IGVsc2UgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5ESVZfSVRFTSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sIGh0bWwuSElERSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIHZhbHVlKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuSElERSksIGNvdW50KysKCQkJfSkKCQl9CgkJY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLlN0YXR1cyhtZGIuQ09VTlQsIGNvdW50KQoJfSwKCWxldmVsOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fZmlsdGVyKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIH0sCglzdGF0dXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXNjb3JlOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5vbmFjdGlvbi5fZmlsdGVyKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIH0sCgl2aWV3OiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSkKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5jb250ZW50KQoJCWNhbi5vbmltcG9ydFtjYW4uT3B0aW9uKCJzY2FsZSIpXShjYW4sIGNhbi5fbXNnKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbbWRiLkNPVU5ULCAiYmVnaW5fdGltZSIsIG1kYi5aT05FLCBtZGIuSUQsIG1kYi5UWVBFLCBtZGIuTkFNRSwgbWRiLlRFWFRdLAoJbmFtZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiB0YXNrLm5hbWUgfSwKCXRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gdGFzay5uYW1lKyI6ICIrKHRhc2sudGV4dHx8IiIpIH0sCglsZXZlbDogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiAibC0iKyh0YXNrLmxldmVsfHwzKSsiOiAiKyh0YXNrLm5hbWV8fCIiKSB9LAoJc2NvcmU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gInMtIisodGFzay5sZXZlbHx8MykrIjogIisodGFzay5uYW1lfHwiIikgfSwKCXRpdGxlOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIHRhc2suem9uZSsiOiAiKyh0YXNrLnR5cGV8fCIiKSB9LAoJc3R5bGU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gW2h0bWwuSVRFTSwgdGFzay5zdGF0dXMsIG1kYi5JRCt0YXNrLmlkLCAibCIrKHRhc2subGV2ZWx8fCIiKSwgInMiKyh0YXNrLnNjb3JlfHwiIildLmpvaW4oaWNlLlNQKSB9LAoJaGVhZDogZnVuY3Rpb24oY2FuLCBzY2FsZSkgewoJCXN3aXRjaCAoc2NhbGUpIHsKCQkJY2FzZSAieWVhciI6CgkJCWNhc2UgImxvbmciOgoJCQkJcmV0dXJuCgkJfQoJCXJldHVybiBbc2NhbGVdLmNvbmNhdChjYW4udXNlci5pbmZvLmxhbmd1YWdlID09ICJlbiI/IFsiTW9uIiwgIlR1ZSIsICJXZWQiLCAiVGh1IiwgIkZyaSIsICJTYXQiLCAiU3VuIl06IFsi5ZGo5pelIiwgIuWRqOS4gCIsICLlkajkuowiLCAi5ZGo5LiJIiwgIuWRqOWbmyIsICLlkajkupQiLCAi5ZGo5YWtIl0pOwoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3dpa2kvZGF0YS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiKSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5kaXNwbGF5KGNhbikKCQljYW4udGFibGUgPSBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jb250ZXh0bWVudTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGZ1bmN0aW9uKGV2LCBjbWQsIG1ldGEpIHsKCQkJCQl2YXIgY2IgPSBtZXRhW2NtZF07IGNiICYmIGNiKGV2ZW50LCBjYW4sIGNtZCwgdmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpCgkJCQl9KQoJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJa2V5ID09IG5mcy5QQVRIICYmIGNhbi5ydW4oZXZlbnQsIFtjYW4uT3B0aW9uKG5mcy5QQVRILCB2YWx1ZSldKQoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBldmVudC50YXJnZXQsIHRydWUpCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQpCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgbXNnLmFwcGVuZCkKCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwKCSLmsYLlkowiOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCXJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpICsgKHJlc1tpbmRleF18fDApOwoJfSwKCSLmnIDlpKciOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCQkocmVzW2luZGV4XSA9PT0gdW5kZWZpbmVkIHx8IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgPiBwYXJzZUludChyZXNbaW5kZXhdKSkgJiYgKHJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpKQoJfSwKCSLmnIDlsI8iOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCShyZXNbaW5kZXhdID09PSB1bmRlZmluZWQgfHwgcGFyc2VJbnQodGQuaW5uZXJUZXh0KSA8IHBhcnNlSW50KHJlc1tpbmRleF0pKSAmJiAocmVzW2luZGV4XSA9IHBhcnNlSW50KHRkLmlubmVyVGV4dCkpCgl9LAoJIuW5s+WdhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJlcywgdGQsIG5jb2wsIGNvbHMsIHJvd3MsIG5yb3cpIHsKCQlyZXNbbmNvbF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpICsgKHJlc1tuY29sXXx8MCk7CgkJaWYgKG5yb3cgPT0gcm93cy5sZW5ndGggLSAxKSB7CgkJCXJlc1tuY29sXSA9IHJlc1tuY29sXSAvIG5yb3cKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFtpY2UuU0FWRSwgW2ljZS5NT0RFLCAi5YWo6YCJIiwgIuWdl+mAiSIsICLlj43pgIkiLCAi5aSa6YCJIiwgIuaLluWKqCIsICLnvJbovpEiXSwgW2ljZS5FWEVDLCAi5rGC5ZKMIiwgIuacgOWkpyIsICLmnIDlsI8iLCAi5bmz5Z2HIl1dLAoJX2NvbXB1dGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgbXVsID0gaHRtbC5UUiArIChjYW4uQWN0aW9uKGljZS5NT0RFKSA9PSAi5YWo6YCJIj8gIiI6ICIuc2VsZWN0IikKCQl2YXIgbWV0aG9kID0gY2FuLm9uZmlndXJlW2Nhbi5BY3Rpb24oaWNlLkVYRUMpXSwgcmVzID0ge30KCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIG11bCwgZnVuY3Rpb24odHIsIG5yb3csIHJvd3MpIHsKCQkJKG11bCAhPSBodG1sLlRSIHx8IG5yb3cgPiAwKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIG5jb2wsIGNvbHMpIHsKCQkJCW1ldGhvZCAmJiBtZXRob2QoZXZlbnQsIGNhbiwgcmVzLCB0ZCwgbmNvbCwgY29scywgcm93cywgbnJvdykKCQkJfSkKCQl9KQoJCWNhbi5jb3JlLkl0ZW0ocmVzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5TdGF0dXMoY2FuLl9tc2cuYXBwZW5kW2tleV0sIHZhbHVlfHwiIikgfSkKCX0sCgoJc2F2ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgW2Nhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4ub25leHBvcnQuZmlsZShjYW4pXSkgfSwKCWV4ZWM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikgfSwKCglfZm9yZWFjaDogZnVuY3Rpb24oY2FuLCBidXR0b24sIGNiKSB7CgkJYnV0dG9uICYmIGNhbi5BY3Rpb24oaWNlLk1PREUsIGJ1dHRvbikKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYihpdGVtKQoJCX0pCgl9LAoKCSLlhajpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBpdGVtLCBmYWxzZSkKCQkJY2FuLnBhZ2UuZHJhZ2dhYmxlKGNhbiwgaXRlbSwgZmFsc2UpCgkJCWl0ZW0ub25tb3VzZWVudGVyID0gbnVsbCwgaXRlbS5vbmNsaWNrID0gbnVsbAoJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCAib3ZlciIpCgkJfSkKCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCX0sCgki5Z2X6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCQkJfQoJCX0pCgl9LAoJIuWPjemAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLlpJrpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHt9CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0Lm5lZyhjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLmi5bliqgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb25bIuWFqOmAiSJdKGV2ZW50LCBjYW4sIGJ1dHRvbikKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCAiIiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5kcmFnZ2FibGUoY2FuLCBpdGVtLCB0cnVlKQoJCQlpdGVtLm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmRyYWcgPSBpdGVtIH0KCQkJaXRlbS5vbmRyYWdvdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sICJvdmVyIil9CgkJCWl0ZW0ub25kcmFnbGVhdmUgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgIm92ZXIiKSB9CgkJCWl0ZW0ub25kcm9wID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEFCTEUsIGZ1bmN0aW9uKHRhYmxlKSB7CgkJCQkJdGFibGUuaW5zZXJ0QmVmb3JlKGNhbi5kcmFnLCBpdGVtKQoJCQkJfSkKCQkJfQoJCX0pCgl9LAoJIue8lui+kSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5lZGl0YWJsZShjYW4sIGl0ZW0sIHRydWUpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26K+m5oOFIiwgbGlzdDogWyLlpI3liLYiLCAi5Yig6ZmkIl0sCgki5aSN5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCB2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCXZhciBlbmQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udGFibGUsIFt7dHlwZTogaHRtbC5UUiwgbGlzdDogY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSkgewoJCQlyZXR1cm4ge3RleHQ6IFtsaW5lW2tleV0sIGh0bWwuVERdfQoJCX0pfV0pLnRyOyBjYW4udGFibGUuaW5zZXJ0QmVmb3JlKGVuZCwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJZmlsZTogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGNhbi5wYWdlLktleXMoaHRtbC5USCwgaHRtbC5URCksIGZ1bmN0aW9uKHRkKSB7cmV0dXJuIHRkLmlubmVySFRNTH0pLmpvaW4oaWNlLkZTKQoJCX0pLmpvaW4oaWNlLk5MKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgbXNnKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKQoJCWNhbi5rZXlsaXN0ID0gW10sIGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoKCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLmNvcmUuSXRlbShraXQuRGljdCgKCQkJCWh0bWwuU1RST0tFX1dJRFRILCAyLCBodG1sLlNUUk9LRSwgY2xpLllFTExPVywgaHRtbC5GSUxMLCBjbGkuUFVSUExFLAoJCQkJaHRtbC5GT05UX1NJWkUsIDI0LCBodG1sLkZPTlRfRkFNSUxZLCBodG1sLk1PTk9TUEFDRSwKCQkJCSJnbyIsIGljZS5SVU4sIHN2Zy5TSEFQRSwgc3ZnLlJFQ1QsIHN2Zy5HUklELCAxMCwKCQkJKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBjYW4uc3ZnLlZhbHVlKGtleSwgY2FuLkFjdGlvbihrZXksIGNhbi5zdmcuVmFsdWUoa2V5KXx8dmFsdWUpKSB9KQoKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5NSU5fSEVJR0hULCA4MCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hUKS01MikKCQkJdmFyIHBpZCA9IGNhbi5PcHRpb24oc3ZnLlBJRCl8fGNhbi5zdmcuVmFsdWUoc3ZnLlBJRCk7IHBpZCAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrcGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBpdGVtKSwgY2FuLm9uZGV0YWlsLnJ1bih7dGFyZ2V0OiBpdGVtfSwgY2FuKQoJCQl9KSB8fCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBjYW4uc3ZnKQoJCX0pIAoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucG9pbnQgPSBbXQoJCWNhbi5zdmcgPSBudWxsLCBjYW4uZ3JvdXAgPSBudWxsLCBjYW4udGVtcCA9IG51bGwsIGNhbi5jdXJyZW50ID0gbnVsbAoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgY2FuLnVpLmNvbnRlbnQsIG1zZy5SZXN1bHQoKXx8Y2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5TVkcsIGZ1bmN0aW9uKHN2ZykgewoJCQljYW4uc3ZnID0gY2FuLmdyb3VwID0gY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIHN2ZyksIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBzdmcpLmNsaWNrKCkKCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgeyBzdmdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4pIH0gfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgc3ZnLCBtZGIuRk9SRUFDSCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pCgkJCQljYW4ucGFnZS50YWdpcyhzdmcuRywgaXRlbSkgJiYgaXRlbS5WYWx1ZShodG1sLkNMQVNTKSAmJiBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgaXRlbSkKCQkJfSkKCQl9KQoJfSwKCV9ncm91cDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdmFyIG5hbWUgPSB0YXJnZXQuR3JvdXBzKCkKCQlmdW5jdGlvbiBzaG93KGV2ZW50KSB7IGNhbi5ncm91cCA9IHRhcmdldAoJCQljYW4uY29yZS5MaXN0KFtodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihrZXkpIHsKCQkJCWNhbi5BY3Rpb24oa2V5LCB0YXJnZXQuVmFsdWUoa2V5KXx8Y2FuLkFjdGlvbihrZXkpKQoJCQl9KQoJCX0KCQlyZXR1cm4gKG5hbWUgfHwgdGFyZ2V0ID09IGNhbi5zdmcpICYmIGNhbi5vbmltcG9ydC5pdGVtKGNhbiwge25hbWU6IG5hbWV8fGh0bWwuU1ZHfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJc2hvdyhldmVudCksIGNhbi5vbmFjdGlvbi5zaG93KGV2ZW50LCBjYW4pLCBjYW4uU3RhdHVzKHN2Zy5HUk9VUCwgbmFtZXx8aHRtbC5TVkcpCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25hY3Rpb24sIGNhbi5vbmFjdGlvbi5tZW51X2xpc3QpCgkJfSwgY2FuLnVpLnByb2plY3QpCgl9LAoJX2Jsb2NrOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXRhcmdldC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIGNhcnRlID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uZGV0YWlsLCBudWxsLCBmdW5jdGlvbihldiwgYnV0dG9uLCBtZXRhKSB7CgkJCQltZXRhW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQl9KTsgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYXJ0ZS5fdGFyZ2V0LCB7bGVmdDogZXZlbnQuY2xpZW50WCwgdG9wOiBldmVudC5jbGllbnRZfSkKCQl9CgkJdGFyZ2V0LlZhbCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJcmV0dXJuIHBhcnNlSW50KHRhcmdldC5WYWx1ZShrZXksIHZhbHVlID09IHVuZGVmaW5lZD8gdmFsdWU6IHBhcnNlSW50KHZhbHVlKXx8MCkpfHwwCgkJfQoJCXRhcmdldC5WYWx1ZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKGtleSkpIHsgcmV0dXJuIH0KCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgY2FuLmNvcmUuSXRlbShrZXksIHRhcmdldC5WYWx1ZSk7IHJldHVybiB9CgoJCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJCWtleSA9IGZpZ3VyZSAmJiBmaWd1cmUuZGF0YSAmJiBmaWd1cmUuZGF0YS5zaXplICYmIGZpZ3VyZS5kYXRhLnNpemVba2V5XSB8fCBrZXkKCQkJaWYgKGZpZ3VyZSAmJiBmaWd1cmUuZGF0YSAmJiBjYW4uYmFzZS5pc0Z1bmMoZmlndXJlLmRhdGFba2V5XSkpIHsKCQkJCXJldHVybiBmaWd1cmUuZGF0YVtrZXldKGNhbiwgdmFsdWUsIGtleSwgdGFyZ2V0KQoJCQl9CgoJCQlpZiAoa2V5ID09IGh0bWwuSU5ORVIpIHsKCQkJCXJldHVybiB2YWx1ZSAhPSB1bmRlZmluZWQgJiYgKHRhcmdldC5pbm5lckhUTUwgPSB2YWx1ZSksIHRhcmdldC5pbm5lckhUTUwKCQkJfQoJCQlpZiAoa2V5ID09IGljZS5TSElQKSB7CgkJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpLCBjYW4uYmFzZS5PYmoodGFyZ2V0LmdldEF0dHJpYnV0ZShrZXkpLCBbXSkKCQkJfQoJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSksIHRhcmdldC5nZXRBdHRyaWJ1dGUoa2V5fHxodG1sLkNMQVNTKQoJCQkJfHwgdGFyZ2V0W2tleV0mJnRhcmdldFtrZXldLmJhc2VWYWwmJnRhcmdldFtrZXldLmJhc2VWYWwudmFsdWUgfHwgdGFyZ2V0W2tleV0mJnRhcmdldFtrZXldLmJhc2VWYWwgfHwgIiIKCQl9CgkJdGFyZ2V0Lkdyb3VwID0gZnVuY3Rpb24oKSB7IHZhciBpdGVtID0gdGFyZ2V0CgkJCXdoaWxlIChpdGVtKSB7IGlmIChbaHRtbC5TVkcsIHN2Zy5HXS5pbmRleE9mKGl0ZW0udGFnTmFtZSkgPiAtMSkgeyByZXR1cm4gaXRlbSB9OyBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQkJcmV0dXJuIGNhbi5zdmcKCQl9CgkJdGFyZ2V0Lkdyb3VwcyA9IGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IHRhcmdldAoJCQl2YXIgbGlzdCA9IFtdOyB3aGlsZSAoaXRlbSAmJiBpdGVtLnRhZ05hbWUgIT0gaHRtbC5TVkcpIHsKCQkJCWl0ZW0udGFnTmFtZSA9PSBzdmcuRyAmJiBpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpICYmIGxpc3QucHVzaChpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpKSwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZQoJCQl9CgkJCXJldHVybiBsaXN0LnJldmVyc2UoKS5qb2luKGljZS5QVCkKCQl9CgkJcmV0dXJuIHRhcmdldAoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbGlzdCkgeyBjYW4uT3B0aW9uKHN2Zy5QSUQsIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgdGFyZ2V0KSkKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkgfSwgY2FuLnVpLnByb2ZpbGUpKSB7IHJldHVybiB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5wcm9maWxlLCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVUXSkKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmRldGFpbC5saXN0LCB1aS5hY3Rpb24sIHtfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJY2FuLm9uZGV0YWlsW2J1dHRvbl0oe3RhcmdldDogdGFyZ2V0fSwgY2FuLCBidXR0b24pCgkJfX0pCgoJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQlsaXN0ID0gKGxpc3R8fFtdKS5jb25jYXQoZmlndXJlLmRhdGEuY29weSwgW3N2Zy5YLCBzdmcuWSwgbWRiLklOREVYLCBjdHguQVJHU10pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkub3V0cHV0LCBbe3R5cGU6IGh0bWwuVEFCTEUsIGNsYXNzTmFtZTogaHRtbC5DT05URU5ULCBsaXN0OiBbCgkJCXt0aDogW21kYi5LRVksIG1kYi5WQUxVRV19LCB7dGQ6IFttZGIuVFlQRSwgdGFyZ2V0LnRhZ05hbWVdfSwge3RkOiBbc3ZnLlBJRCwgdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpXX0sCgkJXS5jb25jYXQoY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJcmV0dXJuIGtleSA9IGZpZ3VyZS5kYXRhLnNpemVba2V5XXx8a2V5LCB7dGQ6IFtrZXksIHRhcmdldC5WYWx1ZShrZXkpXSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LlZhbHVlKGtleSwgdmFsdWUpLCBjYW4ub25maWd1cmUuX21vdmUoY2FuLCB0YXJnZXQpCgkJCQl9KQoJCQl9fQoJCX0pKSB9XSkKCX0sCglkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgZ3JvdXApIHsgLy8ge3NoYXBlLCBwb2ludCwgc3R5bGUsIF9pbml0fQoJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmVbdmFsdWUuc2hhcGVdLCBkYXRhID0gZmlndXJlLmRyYXcoZXZlbnQsIGNhbiwgdmFsdWUucG9pbnQsIHZhbHVlLnN0eWxlKQoJCWNhbi5jb3JlLkl0ZW0odmFsdWUuc3R5bGUsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgZGF0YVtrZXldID0gdmFsdWUgfSkKCQl2YXIgaXRlbSA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIGZpZ3VyZS5kYXRhLm5hbWV8fHZhbHVlLnNoYXBlLCBkYXRhLCBncm91cHx8Y2FuLnN2Z3x8Y2FuLmdyb3VwKQoJCWNhbi5jb3JlLkl0ZW1DQih2YWx1ZSwgZnVuY3Rpb24oa2V5LCBjYikgeyBpdGVtW2tleV0gPSBjYiB9KQoJCS8vIHJldHVybiBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSksIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSksIHZhbHVlLl9pbml0ICYmIHZhbHVlLl9pbml0KGl0ZW0pLCBpdGVtCgkJcmV0dXJuIGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSwgdmFsdWUuX2luaXQgJiYgdmFsdWUuX2luaXQoaXRlbSksIGl0ZW0KCX0sCglncm91cDogZnVuY3Rpb24oY2FuLCBuYW1lLCB2YWx1ZSwgZ3JvdXApIHsgZ3JvdXAgPSBncm91cHx8Y2FuLnN2Z3x8Y2FuLmdyb3VwCgkJdmFyIGcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgc3ZnLkcpOyBncm91cC5hcHBlbmQoZykKCQljYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgZyksIGcuVmFsdWUoaHRtbC5DTEFTUywgbmFtZSksIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBnKS5jbGljaygpCgkJcmV0dXJuIHZhbHVlICYmIGcuVmFsdWUodmFsdWUpLCBnCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuWbvuW9oue7mOWItiIsCglfZ2V0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIG5hbWUpIHsKCQlyZXR1cm4gY2FuLm9uZmlndXJlW25hbWVdfHxjYW4ub25maWd1cmVbaXRlbS5nZXRBdHRyaWJ1dGUobWRiLk5BTUUpXXx8Y2FuLm9uZmlndXJlW2l0ZW0udGFnTmFtZV0KCX0sCglfcGlkOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsgaWYgKGl0ZW0uVmFsdWUoc3ZnLlBJRCkpIHsgcmV0dXJuIGl0ZW0uVmFsdWUoc3ZnLlBJRCkgfQoJCXZhciBwaWQgPSAicCIrY2FuLnN2Zy5WYWwobWRiLkNPVU5ULCBjYW4uc3ZnLlZhbChtZGIuQ09VTlQpKzEpCgkJaXRlbS5WYWx1ZShodG1sLkNMQVNTLCAoaXRlbS5WYWx1ZShodG1sLkNMQVNTKStpY2UuU1AraXRlbS5WYWx1ZShzdmcuUElELCBwaWQpKS50cmltKCkpCgkJcmV0dXJuIHBpZAoJfSwKCV9wdXNoOiBmdW5jdGlvbihjYW4sIHR5cGUsIGRhdGEsIHRhcmdldCkgewoJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIHR5cGUpCgkJdGFyZ2V0LmFwcGVuZENoaWxkKGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSksIGl0ZW0uVmFsdWUoZGF0YSkKCQlyZXR1cm4gaXRlbQoJfSwKCV9jb3B5OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQl2YXIgZGF0YSA9IHt9LCBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCksIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplCgkJY2FuLmNvcmUuTGlzdChmaWd1cmUuZGF0YS5jb3B5LCBmdW5jdGlvbihpdGVtKSB7IGRhdGFbaXRlbV0gPSB0YXJnZXQuVmFsdWUoaXRlbSkgfSkKCQlkYXRhW3NpemUueHx8c3ZnLlhdID0gdGFyZ2V0LlZhbChzaXplLnh8fHN2Zy5YKSsxMAoJCWRhdGFbc2l6ZS55fHxzdmcuWV0gPSB0YXJnZXQuVmFsKHNpemUueXx8c3ZnLlkpKzEwCgkJcmV0dXJuIGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIHRhcmdldC50YWdOYW1lLCBkYXRhLCBjYW4uZ3JvdXB8fGNhbi5zdmcpCgl9LAoJX21vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsaXN0KSB7CgkJY2FuLmNvcmUuTGlzdChsaXN0fHx0YXJnZXQuVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbihzaGlwKSB7CgkJCXNoaXAudGFyZ2V0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3NoaXAucGlkKVswXQoJCQl2YXIgcCA9IGNhbi5vbmV4cG9ydC5hbmNob3IodGFyZ2V0LCBzaGlwLmFuY2hvciwge30pIAoJCQlpZiAoc2hpcC53aGljaCA9PSAxKSB7CgkJCQlzaGlwLnRhcmdldC5WYWwoc3ZnLlgxLCBwLngpLCBzaGlwLnRhcmdldC5WYWwoc3ZnLlkxLCBwLnkpCgkJCX0gZWxzZSBpZiAoc2hpcC53aGljaCA9PSAyKSB7CgkJCQlzaGlwLnRhcmdldC5WYWwoc3ZnLlgyLCBwLngpLCBzaGlwLnRhcmdldC5WYWwoc3ZnLlkyLCBwLnkpCgkJCX0KCQl9KQoJfSwKCglzdmc6IHsgLy8gPHN2ZyBoZWlnaHQ9IjIwMCIgd2lkdGg9IjYwMCIgY291bnQ9IjAiIGdyaWQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ieWVsbG93IiBmaWxsPSJwdXJwbGUiIGZvbnQtc2l6ZT0iMjQiLz4KCQlkYXRhOiB7c2l6ZToge30sIGNvcHk6IFtdfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3NpemUoY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJfSwKCXRleHQ6IHsgLy8gPHRleHQgeD0iNjAiIHk9IjEwIj5oaTx0ZXh0PgoJCWRhdGE6IHtwb2ludHM6IDEsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5JTk5FUl19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCBzdHlsZSkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMSB8fCBldmVudC50eXBlID09ICJtb3VzZW1vdmUiKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCB0ZXh0ID0gc3R5bGUmJnN0eWxlLmlubmVyfHxjYW4udXNlci5wcm9tcHQobWRiLlRFWFQpCgkJCXJldHVybiB0ZXh0PyB7eDogcDAueCwgeTogcDAueSwgaW5uZXI6IHRleHR9OiBudWxsCgkJfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCX0sCgljaXJjbGU6IHsgLy8gPGNpcmNsZSByPSIyMCIgY3g9IjI1IiBjeT0iNzUiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCBzaXplOiB7aGVpZ2h0OiBzdmcuUiwgd2lkdGg6IHN2Zy5SLCB4OiBzdmcuQ1gsIHk6IHN2Zy5DWX0sIGNvcHk6IFtzdmcuUl19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7cjogcGFyc2VJbnQoTWF0aC5zcXJ0KE1hdGgucG93KHAwLngtcDEueCwgMikrTWF0aC5wb3cocDAueS1wMS55LCAyKSkpLCBjeDogcDAueCwgY3k6IHAwLnl9CgkJfSwKCX0sCgllbGxpcHNlOiB7IC8vIDxlbGxpcHNlIHJ5PSI1IiByeD0iMjAiIGN4PSI3NSIgY3k9Ijc1Ii8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge2hlaWdodDogc3ZnLlJZLCB3aWR0aDogc3ZnLlJYLCB4OiBzdmcuQ1gsIHk6IHN2Zy5DWX0sIGNvcHk6IFtzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7cnk6IE1hdGguYWJzKHAwLnkgLSBwMS55KSwgcng6IE1hdGguYWJzKHAwLnggLSBwMS54KSwgY3g6IHAwLngsIGN5OiBwMC55fQoJCX0sCgl9LAoJcmVjdDogeyAvLyA8cmVjdCBoZWlnaHQ9IjMwIiB3aWR0aD0iMzAiIHJ5PSIxMCIgcng9IjEwIiB4PSI2MCIgeT0iMTAiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCByeTogNCwgcng6IDQsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEgsIHN2Zy5SWSwgc3ZnLlJYXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0KCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogTWF0aC5hYnMocDAueS1wMS55KSwgd2lkdGg6IE1hdGguYWJzKHAwLngtcDEueCksIHJ5OiB0aGlzLmRhdGEucnksIHJ4OiB0aGlzLmRhdGEucngsCgkJCQl4OiBwMC54ID4gcDEueD8gcDEueDogcDAueCwgeTogcDAueSA+IHAxLnk/IHAxLnk6IHAwLnksCgkJCX0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IHJldHVybiBkYXRhLnggPSB0YXJnZXQuVmFsKHN2Zy5YKSt0YXJnZXQuVmFsKGh0bWwuV0lEVEgpLzIsIGRhdGEueSA9IHRhcmdldC5WYWwoc3ZnLlkpK3RhcmdldC5WYWwoaHRtbC5IRUlHSFQpLzIsIGRhdGEgfSwKCX0sCglsaW5lOiB7IC8vIDxsaW5lIHgxPSIxMCIgeTE9IjUwIiB4Mj0iMTEwIiB5Mj0iMTUwIiB4eD0iMTAwIiB5eT0iMTAwIi8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge3g6IHN2Zy5YMSwgeTogc3ZnLlkxfSwgY29weTogW3N2Zy5YMSwgc3ZnLlkxLCBzdmcuWDIsIHN2Zy5ZMl19LAoJCWdyaWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJCXZhciBwID0gcG9pbnRbcG9pbnQubGVuZ3RoLTFdLCBwb3MgPSBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIHRhcmdldCkKCQkJdGFyZ2V0LlZhbCAmJiBjYW4ub25leHBvcnQuYW5jaG9yKHRhcmdldCwgcG9zLCBwKQoJCQlyZXR1cm4gcC50YXJnZXQgPSB0YXJnZXQsIHAuYW5jaG9yID0gcG9zLCBwb2ludAoJCX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0sIHNoaXAgPSBbXQoJCQlwMC50YXJnZXQgJiYgcDAudGFyZ2V0LlZhbHVlICYmIHNoaXAucHVzaCh7cGlkOiBwMC50YXJnZXQuVmFsdWUoc3ZnLlBJRCl9KQoJCQlwMS50YXJnZXQgJiYgcDEudGFyZ2V0LlZhbHVlICYmIHNoaXAucHVzaCh7cGlkOiBwMS50YXJnZXQuVmFsdWUoc3ZnLlBJRCl9KQoJCQlyZXR1cm4ge3gxOiBwMC54LCB5MTogcDAueSwgeDI6IHAxLngsIHkyOiBwMS55LCBzaGlwOiBzaGlwLmxlbmd0aCA+IDA/IHNoaXA6IHVuZGVmaW5lZH0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7IHJldHVybiBkYXRhLnggPSAodGFyZ2V0LlZhbChzdmcuWDEpK3RhcmdldC5WYWwoc3ZnLlgyKSkvMiwgZGF0YS55ID0gKHRhcmdldC5WYWwoc3ZnLlkxKSt0YXJnZXQuVmFsKHN2Zy5ZMikpLzIsIGRhdGEgfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiAiPCgiKyh0YXJnZXQuVmFsKHN2Zy5ZMiktdGFyZ2V0LlZhbChzdmcuWTEpKStpY2UuRlMrKHRhcmdldC5WYWwoc3ZnLlgyKS10YXJnZXQuVmFsKHN2Zy5YMSkpKyIpIitjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0sCgl9LAoJYmxvY2s6IHsgLy8gPHJlY3QgaGVpZ2h0PSIzMCIgd2lkdGg9IjMwIiByeT0iMTAiIHJ4PSIxMCIgeD0iNjAiIHk9IjEwIi8+CgkJZGF0YToge3BvaW50czogMiwgcnk6IDQsIHJ4OiA0LCBzaXplOiB7fSwgY29weTogW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXRoaXMuX3RlbXAgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdGhpcy5fdGVtcCkgJiYgZGVsZXRlKHRoaXMuX3RlbXApCgkJCXRoaXMuX3RlbXAgPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBzdmcuRywge30sIGNhbi5ncm91cHx8Y2FuLnN2ZykKCgkJCXZhciByZWN0ID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgc3ZnLlJFQ1QsIGNhbi5vbmZpZ3VyZS5yZWN0LmRyYXcoZXZlbnQsIGNhbiwgcG9pbnQpLCB0aGlzLl90ZW1wKQoJCQlpZiAoZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLKSB7CgkJCQljYW4ub25maWd1cmUuX3BpZChjYW4sIHJlY3QpLCBkZWxldGUodGhpcy5fdGVtcCkKCQkJfQoJCX0sCgkJdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsgY2FuLm9uZmlndXJlLnJlY3QudGV4dChjYW4sIGRhdGEsIHRhcmdldCkgfSwKCX0sCn0sIFtdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZTogewoJCW5vcm1hbDogewoJCQlncjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJydW4iKSB9LAoJCQlnYTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJhdXRvIikgfSwKCQkJZ206IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAibWFudWFsIikgfSwKCgkJCWFkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oIm1vZGUiLCAiZHJhdyIpIH0sCgkJCWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oIm1vZGUiLCAicmVzaXplIikgfSwKCgkJCXN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuVEVYVCkgfSwKCQkJc3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5SRUNUKSB9LAoJCQlzbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkxJTkUpIH0sCgkJCXNjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuQ0lSQ0xFKSB9LAoJCQlzZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkVMTElQU0UpIH0sCgoJCQljcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuUkVEKSB9LAoJCQljYjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQkxVRSkgfSwKCQkJY2c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkdSRUVOKSB9LAoJCQljeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuWUVMTE9XKSB9LAoJCQljcDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuUFVSUExFKSB9LAoJCQljYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQ1lBTikgfSwKCQkJY2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkJMQUNLKSB9LAoJCQljdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuV0hJVEUpIH0sCgoJCQlmcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLlJFRCkgfSwKCQkJZmI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5CTFVFKSB9LAoJCQlmZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkdSRUVOKSB9LAoJCQlmeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLllFTExPVykgfSwKCQkJZnA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5QVVJQTEUpIH0sCgkJCWZjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQ1lBTikgfSwKCQkJZmg6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5CTEFDSykgfSwKCQkJZnc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5XSElURSkgfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWwoJCVtodG1sLlNUUk9LRV9XSURUSCwgMSwgMiwgMywgNCwgNV0sCgkJW2h0bWwuU1RST0tFLCBjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRSwgY2xpLkJMQUNLLCBjbGkuV0hJVEVdLAoJCVtodG1sLkZJTEwsIGNsaS5SRUQsIGNsaS5ZRUxMT1csIGNsaS5HUkVFTiwgY2xpLkNZQU4sIGNsaS5CTFVFLCBjbGkuUFVSUExFLCBjbGkuQkxBQ0ssIGNsaS5XSElURSwgIiMwMDAwIl0sCgkJW2h0bWwuRk9OVF9TSVpFLCAxMiwgMTYsIDE4LCAyNCwgMzJdLAoKCQlbImdvIiwgaWNlLlJVTiwgaWNlLkFVVE8sICJtYW51YWwiXSwKCQlbIm1vZGUiLCAiZHJhdyIsICJyZXNpemUiXSwKCQlbc3ZnLlNIQVBFLCBzdmcuVEVYVCwgc3ZnLkNJUkNMRSwgc3ZnLkVMTElQU0UsIHN2Zy5SRUNULCBzdmcuTElORSwgc3ZnLkJMT0NLXSwKCQlbc3ZnLkdSSUQsIDEsIDIsIDMsIDQsIDUsIDEwLCAyMF0sCgldLCBtZW51X2xpc3Q6IFtpY2UuSElERSwgaWNlLlNIT1csIG1kYi5DUkVBVEUsIGNsaS5DTEVBUiwgbWRiLlJFTU9WRV0sCglfY2hhbmdlOiBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLmdyb3VwLlZhbHVlKGtleSwgdmFsdWUpIH0sCgkic3Ryb2tlLXdpZHRoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCglzdHJva2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJZmlsbDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCgkiZm9udC1zaXplIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCgoJZ286IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoJbW9kZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCglzaGFwZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCgoJZWRpdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsIGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTj8gaWNlLkFVVE86IGljZS5SVU4pIH0sCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7Y29udGVudDogY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuLCBjYW4uc3ZnKX0pLCBidXR0b24sIFtjYW4uT3B0aW9uKG5mcy5QQVRIKV0pCgl9LAoKCXByb2plY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSB9LAoJcHJvZmlsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUpIH0sCglzaG93OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5zaG93KGNhbiwge2ludGVydmFsOiAxMDAsIGxlbmd0aDogMTB9LCBudWxsLCBjYW4uZ3JvdXApIH0sCgloaWRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5oaWRlKGNhbiwge2ludGVydmFsOiAxMDAsIGxlbmd0aDogMTB9LCBudWxsLCBjYW4uZ3JvdXApIH0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbc3ZnLkdST1VQXSwgZnVuY3Rpb24obGlzdCkgeyB2YXIgbmFtZSA9IGxpc3RbMF0KCQkJdmFyIGdyb3VwID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgbmFtZSkKCQkJY2FuLmNvcmUuTGlzdChbaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24obmFtZSkgewoJCQkJZ3JvdXAuVmFsdWUobmFtZSwgY2FuLkFjdGlvbihuYW1lKSkKCQkJfSkKCQl9KQoJfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoY2FuLmdyb3VwID09IGNhbi5zdmcpIHsgcmV0dXJuIH0KCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uZ3JvdXApCgl9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uZ3JvdXApLCBjYW4ucG9pbnQgPSBbXSwgZGVsZXRlKGNhbi50ZW1wKQoJfSwKCglfbW9kZTogewoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7CgkJCXZhciBzaGFwZSA9IGNhbi5BY3Rpb24oc3ZnLlNIQVBFKSwgZmlndXJlID0gY2FuLm9uZmlndXJlW3NoYXBlXQoJCQlmaWd1cmUuZ3JpZCAmJiBmaWd1cmUuZ3JpZChldmVudCwgY2FuLCBwb2ludCkKCgkJCXZhciBkYXRhID0gZmlndXJlLmRyYXcgJiYgZmlndXJlLmRyYXcoZXZlbnQsIGNhbiwgcG9pbnQpCgkJCXZhciBpdGVtID0gZGF0YSAmJiBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBmaWd1cmUuZGF0YS5uYW1lfHxzaGFwZSwgZGF0YSwgY2FuLmdyb3VwfHxjYW4uc3ZnKQoJCQlldmVudC50eXBlID09IGh0bWwuQ0xJQ0sgJiYgcG9pbnQubGVuZ3RoID09PSBmaWd1cmUuZGF0YS5wb2ludHMgJiYgKGNhbi5wb2ludCA9IFtdKSAKCgkJCWlmIChldmVudC50eXBlID09IGh0bWwuQ0xJQ0sgJiYgaXRlbSkgewoJCQkJdmFyIHBpZCA9IGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSk7IGNhbi5jb3JlLkxpc3QocG9pbnQsIGZ1bmN0aW9uKHAsIGkpIHsgaWYgKCFwLnRhcmdldCkgeyByZXR1cm4gfQoJCQkJCXAudGFyZ2V0LlZhbHVlKGljZS5TSElQLCBwLnRhcmdldC5WYWx1ZShpY2UuU0hJUCkuY29uY2F0KFt7cGlkOiBwaWQsIHdoaWNoOiBpKzEsIGFuY2hvcjogcC5hbmNob3J9XSkpCgkJCQl9KQoJCQl9CgkJCXJldHVybiBpdGVtCgkJfSwKCQlyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxldmVudC50YXJnZXQKCQkJaWYgKGV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSykgewoJCQkJaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7CgkJCQkJY2FuLmN1cnJlbnQgPSB7dGFyZ2V0OiB0YXJnZXQsIGJlZ2luOiBjYW4uY29yZS5MaXN0KFt0YXJnZXRdLCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4ucGFnZS50YWdpcyhzdmcuRywgaXRlbSkpIHsgcmV0dXJuIH0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWhlaWdodDogaXRlbS5WYWwoaHRtbC5IRUlHSFQpLCB3aWR0aDogaXRlbS5WYWwoaHRtbC5XSURUSCksIHg6IGl0ZW0uVmFsKHN2Zy5YKSwgeTogaXRlbS5WYWwoc3ZnLlkpLAoJCQkJCQkJdGFyZ2V0OiBpdGVtLCBzaGlwOiBjYW4uY29yZS5MaXN0KGl0ZW0uVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbihzaGlwKSB7CgkJCQkJCQkJcmV0dXJuIHNoaXAucGlkICYmIChzaGlwLnRhcmdldCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtzaGlwLnBpZClbMF0pICYmIHNoaXAKCQkJCQkJCX0pCgkJCQkJCX0KCQkJCQl9KSwgcG9zOiBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIHRhcmdldCl9CgkJCQkJcmV0dXJuCgkJCQl9CgkJCQlyZXR1cm4gY2FuLnBvaW50ID0gW10sIGRlbGV0ZShjYW4uY3VycmVudCkKCQkJfQoKCQkJY2FuLmN1cnJlbnQgJiYgY2FuLmNvcmUuTGlzdChjYW4uY3VycmVudC5iZWdpbiwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCBpdGVtLnRhcmdldCkKCQkJCWNhbi5vbmV4cG9ydC5yZXNpemUoZXZlbnQsIGl0ZW0udGFyZ2V0LCBpdGVtLCBwb2ludFswXSwgcG9pbnRbMV0sIGNhbi5jdXJyZW50LnBvcykKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtpdGVtLnRhcmdldC5WYWx1ZShtZGIuVEVYVCksIGZ1bmN0aW9uKHRleHQpIHsKCQkJCQl0ZXh0LlZhbHVlKGNhbi5vbmV4cG9ydC5fdGV4dChjYW4sIGl0ZW0udGFyZ2V0LCBmaWd1cmUsIHt9KSkKCQkJCX0pLCBjYW4ub25maWd1cmUuX21vdmUoY2FuLCBpdGVtLnRhcmdldCwgaXRlbS5zaGlwKQoJCQl9KQoJCX0sCgkJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkgfSwKCX0sCglfYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlpZiAoY2FuLnBvaW50Lmxlbmd0aCA+IDApIHsgcmV0dXJuIH0KCQlpZiAodGFyZ2V0LnRhZ05hbWUgPT0gbWRiLlRFWFQpIHsgcmV0dXJuIH0KCgkJdmFyIHBvcyA9IGNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KQoJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgewoJCQlpZiAocG9zID09IDUpIHsKCQkJCWNhbi5BY3Rpb24oaWNlLk1PREUsICJkcmF3IiksIGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBodG1sLkJMT0NLKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIHtjdXJzb3I6ICJjcm9zc2hhaXIifSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5BY3Rpb24oaWNlLk1PREUsICJyZXNpemUiKQoJCQl9CgkJfSBlbHNlIHsKCQkJc3dpdGNoIChwb3MpIHsKCQkJCWNhc2UgNToKCQkJCWNhc2UgOTogY2FuLkFjdGlvbihpY2UuTU9ERSwgInJlc2l6ZSIpOyBicmVhawoJCQkJZGVmYXVsdDogY2FuLkFjdGlvbihpY2UuTU9ERSwgImRyYXciKSwgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5MSU5FKQoJCQl9CgkJfQoJfSwKCV9maWd1cmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50cywgdGFyZ2V0KSB7CgkJY2FuLnRlbXAgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLnRlbXApICYmIGRlbGV0ZShjYW4udGVtcCkKCQljYW4udGVtcCA9IGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25hY3Rpb24uX21vZGUsIGNhbi5BY3Rpb24oaWNlLk1PREUpXSwgW2V2ZW50LCBjYW4sIHBvaW50cywgdGFyZ2V0XSkKCQljYW4ucG9pbnQubGVuZ3RoID09IDAgJiYgZGVsZXRlKGNhbi50ZW1wKQoJfSwKCglvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25leHBvcnQuX3Nob3coY2FuLCBldmVudC50YXJnZXQpIH0sCglvbm1vdXNlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgcG9pbnQgPSBjYW4ub25leHBvcnQuX3BvaW50KGV2ZW50LCBjYW4pCgkJaWYgKGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTikgeyByZXR1cm4gfQoJCWNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5BVVRPKSB7IGNhbi5vbmFjdGlvbi5fYXV0byhjYW4sIGV2ZW50LnRhcmdldCkgfQoJCWNhbi5vbmFjdGlvbi5fZmlndXJlKGV2ZW50LCBjYW4sIGNhbi5wb2ludC5jb25jYXQocG9pbnQpKQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHBvaW50ID0gY2FuLm9uZXhwb3J0Ll9wb2ludChldmVudCwgY2FuKQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4pIHsgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgZXZlbnQudGFyZ2V0KQoJCQlyZXR1cm4gZXZlbnQuc2hpZnRLZXk/IGNhbi5vbmFjdGlvbi5fbW9kZS5ydW4oZXZlbnQsIGNhbik6IGNhbi5vbmRldGFpbC5ydW4oZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uYWN0aW9uLl9maWd1cmUoZXZlbnQsIGNhbiwgY2FuLnBvaW50ID0gY2FuLnBvaW50LmNvbmNhdChwb2ludCkpCgl9LAoJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubGFiZWwoZXZlbnQsIGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnu4Tku7bor6bmg4UiLCBsaXN0OiBbY2xpLlNUQVJULCBpY2UuUlVOLCBpY2UuQ09QWSwgaHRtbC5MQUJFTCwgbWRiLk1PRElGWSwgInRvaW1hZ2UiLCBtZGIuUkVNT1ZFXSwKCXN0YXJ0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQl2YXIgbGlzdCA9IFt0YXJnZXRdLCBkaWN0ID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsgdmFyIHNoaXAgPSBsaXN0W2ldLlZhbHVlKCJzaGlwIikKCQkJZm9yICh2YXIgaiA9IDA7IGogPCBzaGlwLmxlbmd0aDsgaisrKSB7IHZhciBwaWQgPSBzaGlwW2pdLnBpZAoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCXZhciBwaWQgPSBpdGVtLlZhbHVlKCJzaGlwIilbMV0ucGlkCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkhZGljdFtwaWRdICYmIGxpc3QucHVzaChpdGVtKSwgZGljdFtwaWRdID0gdHJ1ZQoJCQkJCX0pCgkJCQl9KQoJCQl9CgkJfQoJCWNhbi5jb3JlLk5leHQobGlzdCwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9ubW90aW9uLnNob3coY2FuLCB7aW50ZXJ2YWw6IDMwMCwgbGVuZ3RoOiAxMH0sIG51bGwsIGl0ZW0pIAoJCQljYW4udXNlci50b2FzdChjYW4sIGl0ZW0uVmFsdWUoImluZGV4IikpCgkJCWNhbi5vbmRldGFpbC5ydW4oe3RhcmdldDogaXRlbX0sIGNhbiksIG5leHQoKQoJCX0pIH0pCgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQlpZiAoIXRhcmdldC5WYWx1ZShzdmcuUElEKSkgeyBjYW4ub25maWd1cmUuX3BpZChjYW4sIHRhcmdldCkgfQoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldC5WYWx1ZShzdmcuUElEKSB9LCBjYW4udWkuZGlzcGxheSkpIHsgcmV0dXJuIH0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpc3BsYXkpLCBjYW4uc3ZnLlZhbHVlKHN2Zy5QSUQsIHRhcmdldC5WYWx1ZShzdmcuUElEKSkKCQl2YXIgaW5kZXggPSB0YXJnZXQuVmFsdWUobWRiLklOREVYKTsgaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiBjaGF0LlNUT1JZLCBpbmRleDogaW5kZXgsIGFyZ3M6IHRhcmdldC5WYWx1ZShjdHguQVJHUyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQpLTQqaHRtbC5BQ1RJT05fSEVJR0hUKSwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX2xlZ2VuZCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuZGlzcGxheSwgdHJ1ZSkKCQl9LCBjYW4udWkuZGlzcGxheSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLnNwbGl0KGljZS5QUykucG9wKCkuc3BsaXQoaWNlLlBUKVswXSwgY2FuLnN2ZykgfSwKCWNvcHk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZmlndXJlLl9jb3B5KGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkgfSwKCWxhYmVsOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQl2YXIgZGVmID0gdGFyZ2V0LlZhbHVlKG1kYi5URVhUKTsgZGVmICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtkZWYsIGZ1bmN0aW9uKGl0ZW0pIHsgZGVmID0gaXRlbS5WYWx1ZShodG1sLklOTkVSKSB9KQoKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuTEFCRUwsIHZhbHVlOiBkZWZ9XSwgZnVuY3Rpb24obGlzdCkgeyB2YXIgdGV4dCA9IGxpc3RbMF0KCQkJaWYgKHRhcmdldC50YWdOYW1lID09IGh0bWwuVEVYVCkgeyByZXR1cm4gdGFyZ2V0LmlubmVySFRNTCA9IHRleHQgfQoJCQlpZiAoZGVmICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtkZWYsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5WYWx1ZShodG1sLklOTkVSLCB0ZXh0KSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgoJCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJCXZhciBkYXRhID0gY2FuLm9uZXhwb3J0Ll90ZXh0KGNhbiwgdGFyZ2V0LCBmaWd1cmUsIHtpbm5lcjogdGV4dH0pCgkJCXZhciBpdGVtID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgaHRtbC5URVhULCBkYXRhLCB0YXJnZXQuR3JvdXAoKSkKCQkJdGFyZ2V0LlZhbHVlKG1kYi5URVhULCBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pKQoJCX0pCgl9LAoJbW9kaWZ5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkgfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJY2FuLmNvcmUuTGlzdCh0YXJnZXQuVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrdmFsdWUucGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQl9KQoJCX0pCgkJdGFyZ2V0LlZhbHVlKG1kYi5URVhUKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrdGFyZ2V0LlZhbHVlKG1kYi5URVhUKSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCX0pLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCB0YXJnZXQpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFtzdmcuR1JPVVAsICJmaWd1cmUiLCAiaW5kZXgiLCAicG9zIl0sCglfc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCWZ1bmN0aW9uIHNob3coKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3NpemUoY2FuLCB0YXJnZXQsIGZpZ3VyZSkraWNlLlNQK2Nhbi5vbmV4cG9ydC5fcG9zaXRpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJCWNhbi5TdGF0dXMoImZpZ3VyZSIsIHRhcmdldC50YWdOYW1lKyI6Iit0YXJnZXQuVmFsdWUoc3ZnLlBJRCkraWNlLlNQKyhmaWd1cmU/IChmaWd1cmUuc2hvd3x8c2hvdykoY2FuLCB0YXJnZXQsIGZpZ3VyZSk6ICIiKSkKCQljYW4uU3RhdHVzKHN2Zy5HUk9VUCwgdGFyZ2V0Lkdyb3VwcygpfHxjYW4uZ3JvdXAuR3JvdXBzKCl8fGh0bWwuU1ZHKQoJCWNhbi5TdGF0dXMoImluZGV4IiwgdGFyZ2V0LlZhbHVlKCJpbmRleCIpKQoJfSwKCV9zaXplOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlyZXR1cm4gIjwoIit0YXJnZXQuVmFsKHNpemVbaHRtbC5IRUlHSFRdfHxodG1sLkhFSUdIVCkraWNlLkZTK3RhcmdldC5WYWwoc2l6ZVtodG1sLldJRFRIXXx8aHRtbC5XSURUSCkrIikiCgl9LAoJX3Bvc2l0aW9uOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlyZXR1cm4gIkAoIit0YXJnZXQuVmFsKHNpemVbc3ZnLlhdfHxzdmcuWCkraWNlLkZTK3RhcmdldC5WYWwoc2l6ZVtzdmcuWV18fHN2Zy5ZKSsiKSIKCX0sCglfdGV4dDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSwgZGF0YSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJaWYgKGZpZ3VyZS50ZXh0KSB7IHJldHVybiBmaWd1cmUudGV4dChjYW4sIGRhdGEsIHRhcmdldCkgfQoJCXJldHVybiBkYXRhLnggPSB0YXJnZXQuVmFsKHNpemVbc3ZnLlhdfHxzdmcuWCksIGRhdGEueSA9IHRhcmdldC5WYWwoc2l6ZVtzdmcuWV18fHN2Zy5ZKSwgZGF0YQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBwID0gY2FuLnN2Zy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBwb2ludCA9IHt4OiBldmVudC5jbGllbnRYLXAueCwgeTogZXZlbnQuY2xpZW50WS1wLnl9CgkJcG9pbnQueCA9IHBvaW50LnggLSBwb2ludC54ICUgcGFyc2VJbnQoY2FuLkFjdGlvbihzdmcuR1JJRCkpCgkJcG9pbnQueSA9IHBvaW50LnkgLSBwb2ludC55ICUgcGFyc2VJbnQoY2FuLkFjdGlvbihzdmcuR1JJRCkpCgkJcmV0dXJuIGNhbi5TdGF0dXMoInBvcyIsIHBvaW50LngraWNlLkZTK3BvaW50LnkpLCBwb2ludAoJfSwKCWNvbnRlbnQ6IGZ1bmN0aW9uKGNhbiwgc3ZnKSB7CgkJcmV0dXJuIFsnPHN2ZyB2ZXJ0aW9uPSIxLjEiIHhtbG5zPSJodHRwczovL3d3dy53My5vcmcvMjAwMC9zdmciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiJ10uY29uY2F0KAoJCQlzdmc/IGNhbi5jb3JlLkxpc3QoW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBtZGIuQ09VTlQsIHN2Zy5QSUQsIHN2Zy5HUklELCBodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlyZXR1cm4gc3ZnLlZhbHVlKGl0ZW0pPyBpY2UuU1AgKyBpdGVtICsgJz0iJyArIHN2Zy5WYWx1ZShpdGVtKSArICciJzogIiIKCQkJfSk6IFsiIGhlaWdodD0iKygoY2FuLkNvbmZIZWlnaHQoKXx8NDUwKS01MCkrIiB3aWR0aD0iKyhjYW4uQ29uZldpZHRoKCl8fDYwMCldKS5jb25jYXQoWyc+Jywgc3ZnPyBzdmcuaW5uZXJIVE1MOiAiIiwgIjwvc3ZnPiJdKS5qb2luKCIiKQoJfSwKCgljdXJzb3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGl0ZW0sIHNob3cpIHsKCQl2YXIgcCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKCQl2YXIgcSA9IHt4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZfQoKCQl2YXIgcG9zID0gNSwgbWFyZ2luID0gMjAKCQl2YXIgeSA9IChxLnktcC55KS9wLmhlaWdodAoJCWlmICh5IDwgMC4yICYmIHEueS1wLnkgPCBtYXJnaW4pIHsKCQkJcG9zIC09IDMKCQl9IGVsc2UgaWYgKHkgPiAwLjggJiYgcS55LXAueS1wLmhlaWdodCA+IC1tYXJnaW4pIHsKCQkJcG9zICs9IDMKCQl9CgkJdmFyIHggPSAocS54LXAueCkvcC53aWR0aAoJCWlmICh4IDwgMC4yICYmIHEueC1wLnggPCBtYXJnaW4pIHsKCQkJcG9zIC09IDEKCQl9IGVsc2UgaWYgKHggPiAwLjggJiYgcS54LXAueC0gcC53aWR0aCA+IC1tYXJnaW4pIHsKCQkJcG9zICs9IDEKCQl9CgoJCXJldHVybiAoc2hvd3x8Y2FuLnN2Zykuc3R5bGUuY3Vyc29yID0gWwoJCQkibnctcmVzaXplIiwgIm4tcmVzaXplIiwgIm5lLXJlc2l6ZSIsCgkJCSJ3LXJlc2l6ZSIsICJtb3ZlIiwgImUtcmVzaXplIiwKCQkJInN3LXJlc2l6ZSIsICJzLXJlc2l6ZSIsICJzZS1yZXNpemUiLAoJCV1bcG9zLTFdLCBwb3MKCX0sCglhbmNob3I6IGZ1bmN0aW9uKHRhcmdldCwgcG9zLCBwb2ludCkgewoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSAyOgoJCQljYXNlIDM6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkKCQkJCWJyZWFrCgkJCWNhc2UgNDoKCQkJY2FzZSA1OgoJCQljYXNlIDY6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkgKyB0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKSAvIDIKCQkJCWJyZWFrCgkJCWNhc2UgNzoKCQkJY2FzZSA4OgoJCQljYXNlIDk6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkgKyB0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKQoJCQkJYnJlYWsKCQl9CgoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSA0OgoJCQljYXNlIDc6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkKCQkJCWJyZWFrCgkJCWNhc2UgMjoKCQkJY2FzZSA1OgoJCQljYXNlIDg6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkgKyB0YXJnZXQuVmFsKGh0bWwuV0lEVEgpIC8gMgoJCQkJYnJlYWsKCQkJY2FzZSAzOgoJCQljYXNlIDY6CgkJCWNhc2UgOToKCQkJCXBvaW50LnggPSB0YXJnZXQuVmFsKHN2Zy5YKSArIHRhcmdldC5WYWwoaHRtbC5XSURUSCkKCQkJCWJyZWFrCgkJfQoJCXJldHVybiBwb2ludAoJfSwKCXJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIGJlZ2luLCBwMCwgcDEsIHBvcykgewoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgNToKCQkJCWl0ZW0uVmFsdWUoc3ZnLlgsIGJlZ2luLnggKyBwMS54IC0gcDAueCkKCQkJCWl0ZW0uVmFsdWUoc3ZnLlksIGJlZ2luLnkgKyBwMS55IC0gcDAueSkKCQkJCXJldHVybgoJCX0KCgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDI6CgkJCWNhc2UgMzoKCQkJCWl0ZW0uVmFsdWUoc3ZnLlksIGJlZ2luLnkgKyBwMS55IC0gcDAueSkKCQkJCWl0ZW0uVmFsdWUoaHRtbC5IRUlHSFQsIGJlZ2luLmhlaWdodCAtIHAxLnkgKyBwMC55KQoJCQkJYnJlYWsKCQl9CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDQ6CgkJCWNhc2UgNzoKCQkJCWl0ZW0uVmFsdWUoc3ZlLlgsIGJlZ2luLnggKyBwMS54IC0gcDAueCkKCQkJCWl0ZW0uVmFsdWUoaHRtbC5XSURUSCwgYmVnaW4ud2lkdGggLSBwMS54ICsgcDAueCkKCQkJCWJyZWFrCgkJfQoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMzoKCQkJY2FzZSA2OgoJCQljYXNlIDk6CgkJCQlpdGVtLlZhbHVlKGh0bWwuV0lEVEgsIGJlZ2luLndpZHRoICsgcDEueCAtIHAwLngpCgkJCQlicmVhawoJCX0KCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDc6CgkJCWNhc2UgODoKCQkJY2FzZSA5OgoJCQkJaXRlbS5WYWx1ZShodG1sLkhFSUdIVCwgYmVnaW4uaGVpZ2h0ICsgcDEueSAtIHAwLnkpCgkJCQlicmVhawoJCX0KCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvaGVhcnQuanMiClZvbGNhbm9zKCJoZWFydCIsIHtoZWxwOiAi5b+D5b2iIiwKICAgIGRhdGE6IHtuYW1lOiAicGF0aCIsIHNpemU6IHt9LAogICAgICAgIGNvcHk6IFsiZCIsICJuYW1lIiwgIm1ldGEiLCAidHQiLCAieHgiLCAieXkiXSwKICAgICAgICB4OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIHR0ID0gSlNPTi5wYXJzZSh0YXJnZXQuVmFsdWUoInR0Iil8fCd7InR4IjowLCAidHkiOjB9JykKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdHQudHggPSB2YWx1ZS10YXJnZXQuVmFsKCJ4eCIpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInR0IiwgSlNPTi5zdHJpbmdpZnkodHQpKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0LlZhbCgieHgiKSt0dC50eAogICAgICAgIH0sCiAgICAgICAgeTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgIHZhciB0dCA9IEpTT04ucGFyc2UodGFyZ2V0LlZhbHVlKCJ0dCIpfHwneyJ0eCI6MCwgInR5IjowfScpCiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0dCIsIEpTT04uc3RyaW5naWZ5KHR0KSkKICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiK3R0LnR4KyIsIit0dC50eSsiKSIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5WYWwoInl5IikrdHQudHkKICAgICAgICB9LAogICAgfSwgLy8gPGhlYXJ0IGN4PSIyNSIgY3k9Ijc1IiByPSIyMCIvPgogICAgZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHtyZXR1cm59CgogICAgICAgIHZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdLCBwMiA9IHBvaW50WzJdOwogICAgICAgIHBsID0ge3g6IDIqcDAueCAtIHAxLngsIHk6MipwMC55LXAxLnl9CiAgICAgICAgdmFyIHIwID0gTWF0aC5zcXJ0KE1hdGgucG93KHAwLnggLSBwMS54LCAyKSwgTWF0aC5wb3cocDAueSAtIHAxLnksIDIpKSAvIDIKICAgICAgICB2YXIgZCA9IFsKICAgICAgICAgICAgICAgICJNIiwgcGwueCwgcGwueSwKICAgICAgICAgICAgICAgICJBIiwgcjAsIHIwLCAwLCAwLCAwLCBwMC54LCBwMC55LAogICAgICAgICAgICAgICAgIkEiLCByMCwgcjAsIDAsIDAsIDAsIHAxLngsIHAxLnksCiAgICAgICAgICAgIF0KCiAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAzKSB7CiAgICAgICAgICAgIHZhciByMSA9IE1hdGguc3FydChNYXRoLnBvdyhwMi54IC0gcDEueCwgMiksIE1hdGgucG93KHAyLnkgLSBwMS55LCAyKSkKICAgICAgICAgICAgZCA9IGQuY29uY2F0KFsKICAgICAgICAgICAgICAgICJBIiwgcjEsIHIxLCAxODAsIDAsIDAsIHAyLngsIHAyLnksCiAgICAgICAgICAgICAgICAiQSIsIHIxLCByMSwgMTgwLCAwLCAwLCBwbC54LCBwbC55LAogICAgICAgICAgICBdKQogICAgICAgIH0KCiAgICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgICAgIG5hbWU6ICJoZWFydCIsIGQ6IGQuam9pbigiICIpLAogICAgICAgICAgICBtZXRhOiBKU09OLnN0cmluZ2lmeShwb2ludCksCiAgICAgICAgICAgIHR0OiBKU09OLnN0cmluZ2lmeSh7dHg6IDAsIHR5OiAwfSksCiAgICAgICAgICAgIHh4OiBwMC54LCB5eTpwMS55LAogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGV2ZW50LnR5cGUgPT0gImNsaWNrIiAmJiBwb2ludC5sZW5ndGggPT0gMyAmJiAoY2FuLnBvaW50ID0gW10pLCBkYXRhCiAgICB9LAogICAgdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKICAgICAgICBkYXRhLnggPSB0YXJnZXQuVmFsKCJjeCIpCiAgICAgICAgZGF0YS55ID0gdGFyZ2V0LlZhbCgiY3kiKQogICAgICAgIHJldHVybiBkYXRhCiAgICB9LAogICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKICAgICAgICByZXR1cm4gImhlYXJ0ICIgKyB0YXJnZXQuVmFsdWUoInR0IikKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyIKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAogICAgcGF0aDJ2OiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54LCBwMC55KyhwMS55LXAwLnkpLzNdLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDJoOiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54KyhwMS54LXAwLngpLzMsIHAwLnldLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDogeyAvLyA8cGF0aCBkPSJNMTAgMTAgSCA5MCBWIDkwIEggMTAgWiIvPgogICAgICAgIGRhdGE6IHtzaXplOiB7fSwgY29weTogWyJkIiwgInR0IiwgInh4IiwgInl5Il0sCiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR4ID0gdmFsdWUtdGFyZ2V0LlZhbCgieHgiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ5eSIpK3R0LnR5CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsKICAgICAgICAgICAgaWYgKHN0eWxlICYmIHN0eWxlLmQpIHsgcmV0dXJuIHN0eWxlIH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7IGNhbi5fdGVtcCA9IHt9IH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCiAgICAgICAgICAgIGlmIChjYW4ua2V5cyAmJiBjYW4ua2V5cy5sZW5ndGggPiAwKSB7IHZhciBrOwogICAgICAgICAgICAgICAgayA9IGNhbi5fdGVtcFtwb2ludC5sZW5ndGgtMV0gPSBjYW4ua2V5c1swXQogICAgICAgICAgICAgICAgc3dpdGNoIChrLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjogY2FuLl90ZW1wW3BvaW50Lmxlbmd0aCsxXSA9ICIsIgogICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOiBjYW4uX3RlbXBbcG9pbnQubGVuZ3RoXSA9ICIsIjsgYnJlYWsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FuLmtleXMgPSBjYW4ua2V5cy5zbGljZSgxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2tpcCA9IDAKICAgICAgICAgICAgdmFyIGVuZCA9IGZhbHNlCiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZDogY2FuLmNvcmUuTGlzdChwb2ludCwgZnVuY3Rpb24ocCwgaSkgeyB2YXIgayA9IHAuawogICAgICAgICAgICAgICAgICAgIGlmIChpIDwgc2tpcCkge3JldHVybn0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiBrID0gIk0iOyBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBrID0gY2FuLl90ZW1wW2ldIHx8IHAuayB8fCAiTCI7IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgIGsgPSBrLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6IHJldHVybiBjYW4ucG9pbnQgPSBbXSwgY2FuLl90ZW1wID0ge30sIGsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6IHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJNIjogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkgiOiByZXR1cm4gaysiICIgKyBwLngKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiViI6IHJldHVybiBrKyIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiAwIDAgMCAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyByICsgIiAiICsgciArICIgMCAwIDAgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY2FuLnBvaW50W2ldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gY2FuLnBvaW50W2ldID0gY2FuLnBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5wb2ludFtpKzFdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC55ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hcmcgPSAiIDAgMCAwICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXAgPSBpICsgMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkgKyAiIDAgMCAwICIgKyBwb2ludFtpKzFdLnggKyAiICIgKyBwb2ludFtpKzFdLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHBvaW50W2krMl0ueCArICIgIiArIHBvaW50W2krMl0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpKzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzFdID0gcG9pbnRbaSsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsyXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZG9uZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJRIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRvbmUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuam9pbigiICIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICB9LAogICAgICAgIHRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7CiAgICAgICAgICAgIGRhdGEueCA9ICh0YXJnZXQueDEuYmFzZVZhbC52YWx1ZSArIHRhcmdldC54Mi5iYXNlVmFsLnZhbHVlKSAvIDIKICAgICAgICAgICAgZGF0YS55ID0gKHRhcmdldC55MS5iYXNlVmFsLnZhbHVlICsgdGFyZ2V0LnkyLmJhc2VWYWwudmFsdWUpIC8gMgogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIH0sCiAgICAgICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIHRhcmdldC50YWdOYW1lICsgIiAiICsgdGFyZ2V0LlZhbHVlKCJkIikgfSwKICAgIH0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvd2Fsa190cmFzaC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLAogICAgaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBvdXRwdXQsIGFjdGlvbiwgb3B0aW9uKSB7b3V0cHV0LmlubmVySFRNTCA9ICIiOwogICAgICAgIGlmICghbXNnLnJlc3VsdCB8fCBtc2cucmVzdWx0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZFRhYmxlKGNhbiwgbXNnLCBvdXRwdXQsIG1zZy5hcHBlbmQpOwogICAgICAgICAgICB0YWJsZS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtzd2l0Y2ggKGV2ZW50LnRhcmdldC50YWdOYW1lKSB7CiAgICAgICAgICAgICAgICBjYXNlICJURCI6CiAgICAgICAgICAgICAgICAgICAgY2FuLm9uaW1wb3J0LndoaWNoKGV2ZW50LCB0YWJsZSwgbXNnLmFwcGVuZCwgZnVuY3Rpb24oaW5kZXgsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYW4uT3B0aW9uKCJmaWxlIiwgZXZlbnQudGFyZ2V0LmlubmVySFRNTC50cmltKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5ydW4oZXZlbnQsIFtldmVudC50YXJnZXQuaW5uZXJIVE1MLnRyaW0oKV0sIGZ1bmN0aW9uKG1zZykge30pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAiVEgiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUUiI6CiAgICAgICAgICAgICAgICBjYXNlICJUQUJMRSI6CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIHJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyksIHRhYmxlOwogICAgICAgIH0KCiAgICAgICAgLy8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgYWN0aW9uLCBbe3R5cGU6ICJzY3JpcHQiLCBzcmM6ICJodHRwczovL2Nkbi5ib290Y3NzLmNvbS9lY2hhcnRzLzQuMi4wLXJjLjIvZWNoYXJ0cy5qcyJ9XSk7CiAgICAgICAgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgb3V0cHV0LCBbe2luY2x1ZGU6IFsicmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjYW4ucGFnZS5BcHBlbmQoY2FuLCBvdXRwdXQsIFt7aW5jbHVkZTogWyJyZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIG91dHB1dCwgW3t0eXBlOiAiZGl2Iiwgc3R5bGU6IHt3aWR0aDogIjYwMHB4IiwgaGVpZ2h0OiAiNDAwcHgifX1dKS5sYXN0KTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbXNnLlRhYmxlKCkKCiAgICAgICAgICAgICAgICB2YXIgeURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBiYXJEYXRhID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChkYXRhLmxlbmd0aD4xMD8gMTA6IGRhdGEubGVuZ3RoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgeURhdGEucHVzaChpICsgZGF0YVtpXS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBiYXJEYXRhLnB1c2goZGF0YVtpXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogW3sKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbXNnLk9wdGlvbigidGl0bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwgcmlnaHQ6IDI1MCwgdG9wOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjMkQzRTUzJywgZm9udFNpemU6IDE4fSwKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWUgKyI6ICIrcGFyYW1zLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2aXN1YWxNYXA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnRpbnVvdXMnLAogICAgICAgICAgICAgICAgICAgICAgICBvcmllbnQ6ICdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogODAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFsn6auYJywgJ+S9jiddLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93TGFiZWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBkYXRhWzFdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjNkZDRjZBJywgJyNGRkZENjQnLCAnI0ZGNTAwMCddCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjN0I5M0E3JwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBncmlkOiB7cmlnaHQ6IDEwLCB0b3A6IDEzNSwgYm90dG9tOiAxMDAsIHdpZHRoOiAnMjAlJ30sCiAgICAgICAgICAgICAgICAgICAgeEF4aXM6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUdhcDogMTYsCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7c2hvdzogZmFsc2UsIGxpbmVTdHlsZToge2NvbG9yOiAnI2RkZCd9fSwKICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1RpY2s6IHtzaG93OiBmYWxzZSwgbGluZVN0eWxlOiB7Y29sb3I6ICcjZGRkJ319LAogICAgICAgICAgICAgICAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNDU1QTc0JywgYWxpZ246ICdsZWZ0JywgZm9udFNpemU6IDE0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpY2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGQUFBMzknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0MTk3RkQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgPCAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2F8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2J8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeURhdGEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdlbzogewogICAgICAgICAgICAgICAgICAgICAgICBtYXA6ICdjaGluYScsIGxlZnQ6ICdsZWZ0JywgcmlnaHQ6ICcxMDAnLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge2VtcGhhc2lzOiB7c2hvdzogZmFsc2V9fSwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7ZW1waGFzaXM6IHthcmVhQ29sb3I6ICcjZmZmNDY0J319LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgICAgICByb2FtOiBmYWxzZSwgdHlwZTogJ21hcCcsIG5hbWU6ICdtYXBTZXInLAogICAgICAgICAgICAgICAgICAgICAgICBnZW9JbmRleDogMCwgbGFiZWw6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvYW06IGZhbHNlLCB0eXBlOiAnYmFyJywgbmFtZTogJ2JhclNlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbE1hcDogZmFsc2UsIGJhckdhcDogMCwgYmFyTWF4V2lkdGg6IDgsCiAgICAgICAgICAgICAgICAgICAgICAgIHpsZXZlbDogMTAwLCBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYSBjb2xvciBtYXAgYXMgeW91ciBuZWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JMaXN0ID0gW3tjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyNGRkQxMTknfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyNGRkFDNEMnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX0sIHtjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyMwMEMwRkEnfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyMyRjk1RkEnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGFJbmRleCA8IDM/IGNvbG9yTGlzdFswXTogY29sb3JMaXN0WzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJCb3JkZXJSYWRpdXM6IDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJhckRhdGEKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNoaW5hX2NoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9XX1dKTsKICAgICAgICB9XX1dKTsKICAgIH0sCiAgICB3aGljaDogZnVuY3Rpb24oZXZlbnQsIHRhYmxlLCBsaXN0LCBjYikge2lmIChldmVudC50YXJnZXQgPT0gdGFibGUpIHtyZXR1cm4gY2IoLTEsICIiKX0KICAgICAgICBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgInRyIiwgZnVuY3Rpb24odHIsIGluZGV4KSB7aWYgKGV2ZW50LnRhcmdldCA9PSB0cikge3JldHVybiBjYihpbmRleC0xLCAiIil9CiAgICAgICAgICAgIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCAidGgsdGQiLCBmdW5jdGlvbih0ZCwgb3JkZXIpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGQpIHtyZXR1cm4gY2IoaW5kZXgtMSwgbGlzdFtvcmRlcl0pfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vbG9jYWwvd2lraS9mZWVsLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYXRoID0gY2FuLnJlcXVlc3QoKSwgY2FuLmxpc3QgPSBbXSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCWNhbi5iYXNlLmVuZFdpdGgodmFsdWUucGF0aCwgaWNlLlBTKT8gY2FuLnBhdGguUHVzaCh2YWx1ZSk6IGNhbi5saXN0LnB1c2godmFsdWUpCgkJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQuZGlzcGxheShjYW4sIHRhcmdldCkKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBjYW4ucGF0aCwgbnVsbCwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4ub25leHBvcnQubGlzdCkKCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fG1zZy5fY21kc1sxXXx8aWNlLkFVVE8pCgkJY2FuLkFjdGlvbihodG1sLlNQRUVELCBtc2cuT3B0aW9uKGh0bWwuU1BFRUQpfHxtc2cuX2NtZHNbMl18fCIxIikKCQljYW4uQWN0aW9uKG1kYi5MSU1JVCwgbXNnLk9wdGlvbihtZGIuTElNSVQpfHxtc2cuX2NtZHNbM118fCI5IikKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgoJCWNhbi5iZWdpbiA9IHBhcnNlSW50KGNhbi5iZWdpbnx8bXNnLk9wdGlvbihjbGkuQkVHSU4pfHwiMCIpCgkJY2FuLmRpcl9yb290ID0gbXNnLk9wdGlvbihuZnMuRElSX1JPT1QpCgkJY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCX0sCglfZmlsZTogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyB2YXIgcCA9IGxvY2F0aW9uLmhyZWYuaW5kZXhPZihpY2UuSFRUUCkgPT0gMD8gIiI6ICJodHRwOi8vbG9jYWxob3N0OjkwMjAiCgkJcmV0dXJuIHBhdGguaW5kZXhPZihpY2UuSFRUUCkgPT0gMD8gcGF0aDogcCtjYW4uYmFzZS5QYXRoKCIvc2hhcmUvbG9jYWwiLCBjYW4uZGlyX3Jvb3R8fCIiLCBwYXRoKQoJfSwKCWZpbGU6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcGF0aCA9IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIHBhdGgsIGluZGV4KQoJCXZhciBjYiA9IGNhbi5vbmZpZ3VyZVtjYW4uYmFzZS5FeHQocGF0aCldfHxjYW4ub25maWd1cmVbImltYWdlIl07IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuZGlzcGxheSwgW2NiKGNhbiwgcGF0aCwgaW5kZXgpXSkKCX0sCglwYWdlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGJlZ2luLCBsaW1pdCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuZGlzcGxheSkKCQliZWdpbiA9IHBhcnNlSW50KGJlZ2lufHxjYW4uYmVnaW4pLCBsaW1pdCA9IHBhcnNlSW50KGxpbWl0fHxjYW4uQWN0aW9uKG1kYi5MSU1JVCkpCgkJZm9yICh2YXIgaSA9IGJlZ2luOyBpIDwgYmVnaW4rbGltaXQ7IGkrKykgeyBsaXN0ICYmIGxpc3RbaV0gJiYgY2FuLm9uaW1wb3J0LmZpbGUoY2FuLCBsaXN0W2ldLnBhdGgsIGkpIH0KCQljYW4uU3RhdHVzKHtiZWdpbjogYmVnaW4sIGxpbWl0OiBsaW1pdCwgdG90YWw6IGNhbi5saXN0Lmxlbmd0aH0pCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIue7hOS7tuiPnOWNlSIsCglwbmc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJanBnOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWpwZWc6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS5pbWFnZShjYW4sIHBhdGgsIGluZGV4KSB9LAoJaW1hZ2U6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgcmV0dXJuIHtpbWc6IHBhdGgsIGhlaWdodDogY2FuLm9uZXhwb3J0LmhlaWdodChjYW4pLAoJCW9ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKSB9LAoJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmRldGFpbC5faW5pdChjYW4sIGluZGV4KSB9LAoJfSB9LAoKCXZpZGVvOiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgdmFyIGF1dG8gPSBjYW4udXNlci5pc01vYmlsZSYmY2FuLkFjdGlvbihtZGIuTElNSVQpIT0iMSI/IGZhbHNlOiB0cnVlLCBsb29wID0gdHJ1ZSwgdG90YWwgPSAwOyBmdW5jdGlvbiBjYihldmVudCkgeyB9CgkJcmV0dXJuIHt0eXBlOiBodG1sLlZJREVPLCBzdHlsZToge2hlaWdodDogY2FuLm9uZXhwb3J0LmhlaWdodChjYW4pfSwgY2xhc3NOYW1lOiAicHJldmlldyIsCgkJCWRhdGE6IHtzcmM6IHBhdGgsIGNvbnRyb2xzOiAiY29udHJvbHMiLCBhdXRvcGxheTogYXV0bywgbG9vcDogbG9vcCwgcGxheWJhY2tSYXRlOiBwYXJzZUZsb2F0KGNhbi5BY3Rpb24oaHRtbC5TUEVFRCkpfSwKCQkJb25jb250ZXh0bWVudTogY2IsIG9ucGxheTogY2IsIG9ucGF1c2U6IGNiLCBvbmVuZGVkOiBjYiwKCQkJb25tb3VzZW92ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpIH0sCgkJCW9ubG9hZGVkbWV0YWRhdGE6IGZ1bmN0aW9uKGV2ZW50KSB7IHRvdGFsID0gZXZlbnQudGltZVN0YW1wCgkJCQlldmVudC50YXJnZXQuY3VycmVudFRpbWUgPSBjYW4uX21zZy5jdXJyZW50VGltZSB8fCAwCgkJCX0sIG9ubG9hZGVkZGF0YTogY2IsIG9udGltZXVwZGF0ZTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5TdGF0dXMobmZzLkZJTEUpID09IHBhdGggJiYgY2FuLlN0YXR1cygicG9zaXRpb24iLCBjYW4ub25leHBvcnQucG9zaXRpb24oY2FuLCAoY2FuLl9tc2cuY3VycmVudFRpbWU9ZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lKS0xLCBldmVudC50YXJnZXQuZHVyYXRpb24pKQoJCQl9LAoJCX0KCX0sCgltcDQ6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKCW00djogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAoJbW92OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCgl3ZWJtOiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWwoJCVtodG1sLkhFSUdIVCwgMTAwLCAyMDAsIDQwMCwgNjAwLCA4MDAsIGljZS5BVVRPXSwKCQlbaHRtbC5TUEVFRCwgMC4xLCAwLjIsIDAuNSwgMSwgMiwgMywgNSwgMTBdLAoJCVttZGIuTElNSVQsIDEsIDMsIDYsIDksIDEyLCAxNSwgMjAsIDMwLCA1MF0sCgldLAoJcHJldjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4uYmVnaW4gPiAwKSB7CgkJCWNhbi5iZWdpbiAtPSBwYXJzZUludChjYW4uQWN0aW9uKG1kYi5MSU1JVCkpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KQoJCX0gZWxzZSB7CgkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+esrOS4gOmhteS6hiIpCgkJfQoJfSwKCW5leHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmJlZ2luICsgcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSA8IGNhbi5saXN0Lmxlbmd0aCkgewoJCQljYW4uYmVnaW4gKz0gcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCQl9IGVsc2UgewoJCQljYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/mnIDlkI7kuIDpobXkuoYiKQoJCX0KCX0sCgloZWlnaHQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkgfSwKCXNwZWVkOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpIH0sCglsaW1pdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KSB9LAoKCWNob29zZUltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQljYW4udXNlci5hZ2VudC5jaG9vc2VJbWFnZShmdW5jdGlvbihsaXN0KSB7IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3tpbWc6IGl0ZW0sIGhlaWdodDogMjAwfV0pCgkJfSkgfSkKCX0sCglyZWNvcmQxOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQsIHdpZHRoID0gd2luZG93LmlubmVyV2lkdGgKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe3R5cGU6ICJ0ZXh0IiwgbmFtZTogImZpbGUiLCB2YWx1ZTogInNvbWUifV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEoe3ZpZGVvOiB7aGVpZ2h0OiBoZWlnaHR9fSkudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKCQkJCXZhciB2aWRlbyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3R5cGU6IGh0bWwuVklERU8sIGhlaWdodDogaGVpZ2h0fV0pLmZpcnN0CgkJCQl2aWRlby5zcmNPYmplY3QgPSBzdHJlYW0sIHZpZGVvLm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbihlKSB7IHZpZGVvLnBsYXkoKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dHlwZTogaHRtbC5DQU5WQVMsIGhlaWdodDogaGVpZ2h0LCB3aWR0aDogd2lkdGh9XSkuZmlyc3QKCQkJCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHZpZGVvLCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCAwLCAwLCB3aWR0aCwgaGVpZ2h0KQoJCQkJCQljYW52YXMudG9CbG9iKChibG9iKSA9PiB7CgkJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJCQltc2cuX3VwbG9hZCA9IG5ldyBGaWxlKFtibG9iXSwgKGxpc3RbMF0pKyIucG5nIikKCQkJCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGh0bWwuVVBMT0FELCBbXSwgZnVuY3Rpb24oKSB7CgkJCQkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi5LiK5Lyg5oiQ5YqfIiksIGNhbi5VcGRhdGUoKQoJCQkJCQkJfSkKCQkJCQkJfSkKCQkJCQl9KQoJCQkJfQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLnVzZXIudG9hc3QoY2FuLCBlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSkgfSkKCQl9KQoJfSwKCXJlY29yZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYmxvYnMgPSBbXQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogInRleHQiLCBuYW1lOiAiZmlsZSIsIHZhbHVlOiAic29tZSJ9XSwgZnVuY3Rpb24obGlzdCkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkqMy80fX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7CgkJCQljYW4uY29yZS5OZXh0KFszLCAyLCAxXSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgaXRlbSArICJzIOWQjuW8gOWni+W9leWxjyIpCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgbmV4dCwgMTAwMCkKCQkJCX0sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIueOsOWcqOW8gOWni+W9leWxjyIpCgkJCQkJdmFyIHJlY29yZGVyID0gbmV3IE1lZGlhUmVjb3JkZXIoc3RyZWFtLCB7bWltZVR5cGU6ICd2aWRlby93ZWJtJ30pCgkJCQkJcmVjb3JkZXIub25kYXRhYXZhaWxhYmxlID0gZnVuY3Rpb24ocmVzKSB7IGJsb2JzLnB1c2gocmVzLmRhdGEpIH0KCQkJCQlyZWNvcmRlci5vbnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi5b2V5bGP5oiQ5YqfIikKCQkJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCQltc2cuX3VwbG9hZCA9IG5ldyBGaWxlKGJsb2JzLCAobGlzdFswXXx8InNvbWUiKSsiLndlYm0iKSAKCQkJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQsIFtdLCBmdW5jdGlvbigpIHsKCQkJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuS4iuS8oOaIkOWKnyIpLCBjYW4uVXBkYXRlKCkKCQkJCQkJfSkKCQkJCQl9LCByZWNvcmRlci5zdGFydCgxMCkKCQkJCX0pCgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4udXNlci50b2FzdChjYW4sIGVyci5uYW1lICsgIjogIiArIGVyci5tZXNzYWdlKSB9KQoJCX0pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsi5YWz6ZetIiwgIuS4i+i9vSIsICLliKDpmaQiLCAi5LiK5LiA5LiqIiwgIuS4i+S4gOS4qiIsICLorr7nva7lpLTlg48iLCAi6K6+572u6IOM5pmvIiwgIuWkjeWItumTvuaOpSJdLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBpbmRleCkgewoJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIHt0eXBlOiAic3RvcnkgZmVlbCBmbG9hdCJ9LCBbXSwgZnVuY3Rpb24oc3ViKSB7IGNhbi5zdWIgPSBzdWIKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyByZXR1cm4gY2FuLnJ1bihldmVudCwgY21kcywgY2IsIHRydWUpIH0KCgkJCXN1Yi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7CgkJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCB7bGVmdDogbGVmdCwgdG9wOiB0b3B9KQoJCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5XSURUSCwgd2lkdGgsIGh0bWwuSEVJR0hULCBoZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQpCgkJCQlzdWIub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmRldGFpbC5saXN0LCBzdWIuX2FjdGlvbiwgY2FuLm9uZGV0YWlsKQoJCQkJc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBbImJlZ2luIiwgImZpbGUiXSkKCgkJCQljYW4ub3JkZXIgPSBpbmRleCwgY2FuLnNob3cgPSBmdW5jdGlvbihvcmRlcikgeyBwYXRoID0gY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3Rbb3JkZXJdLnBhdGgpCgkJCQkJdmFyIGNiID0gY2FuLm9uZmlndXJlW2Nhbi5iYXNlLkV4dChwYXRoKV18fGNhbi5vbmZpZ3VyZVsiaW1hZ2UiXQoJCQkJCQoJCQkJCXN1Yi5wYWdlLkFwcGVuZHMoc3ViLCBzdWIuX291dHB1dCwgW2Nhbi5iYXNlLkNvcHkoY2IoY2FuLCBwYXRoLCBpbmRleCksIHtoZWlnaHQ6ICIiLCBzdHlsZToga2l0LkRpY3QoaHRtbC5NQVhfV0lEVEgsIHdpZHRoLCBodG1sLk1BWF9IRUlHSFQsIGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVCl9KV0pCgkJCQkJc3ViLlN0YXR1cyhjbGkuQkVHSU4sIG9yZGVyKzEraWNlLlBTK2Nhbi5saXN0Lmxlbmd0aCksIHN1Yi5TdGF0dXMobmZzLkZJTEUsIHBhdGgpCgkJCQl9LCBjYW4uc2hvdyhjYW4ub3JkZXIpCgkJCX0pCgkJfSwgY2FuLl9yb290Ll90YXJnZXQpCgl9LAoJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLnN1Yi5fdGFyZ2V0KSB9LAoJIuS4i+i9vSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuZG93bmxvYWQoY2FuLCBwYXRoID0gY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIG5mcy5UUkFTSCwgW2Nhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aF0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5Yig6Zmk5oiQ5YqfIikgfSwgdHJ1ZSkgfSwKCSLkuIrkuIDkuKoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vcmRlciA+IDA/IGNhbi5zaG93KC0tY2FuLm9yZGVyKTogY2FuLnVzZXIudG9hc3QoY2FuLCAi5bey57uP5piv56ys5LiA5byg5ZWmISIpIH0sCgki5LiL5LiA5LiqIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub3JkZXIgPCBjYW4ubGlzdC5sZW5ndGgtMT8gY2FuLnNob3coKytjYW4ub3JkZXIpOiBjYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/mnIDlkI7kuIDlvKDllaYhIikgfSwKCSLorr7nva7lpLTlg48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZXRIZWFkZXIoImF2YXRhciIsIGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aCkpIH0sCgki6K6+572u6IOM5pmvIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2V0SGVhZGVyKCJiYWNrZ3JvdW5kIiwgY2FuLm9uaW1wb3J0Ll9maWxlKGNhbiwgY2FuLmxpc3RbY2FuLm9yZGVyXS5wYXRoKSkgfSwKCSLlpI3liLbpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7X3BhdGg6IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aCl9LCB0cnVlKSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbY2xpLkJFR0lOLCBtZGIuTElNSVQsIG1kYi5UT1RBTCwgbmZzLkZJTEUsICJwb3NpdGlvbiJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodCA9PSBpY2UuQVVUTz8gY2FuLmJhc2UuTWluKGNhbi5Db25mSGVpZ2h0KCkvNCwgMjAwKTogaGVpZ2h0KQoJfSwKCXBvc2l0aW9uOiBmdW5jdGlvbihjYW4sIGluZGV4LCB0b3RhbCkgeyB0b3RhbCA9IHRvdGFsIHx8IGNhbi5tYXgKCQlyZXR1cm4gcGFyc2VJbnQoKGluZGV4KzEpKjEwMC90b3RhbCkrIiUiKyIgPSAiKyhwYXJzZUludChpbmRleCkrMSkraWNlLlBTK3BhcnNlSW50KHRvdGFsKQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL2xvY2FsL3dpa2kvd29yZC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJaWYgKG1zZy5MZW5ndGgoKSA+IDApIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwgbXNnLlJlc3VsdCgpKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgd2lraS5JVEVNLCBmdW5jdGlvbihpdGVtKSB7IHZhciBkYXRhID0gaXRlbS5kYXRhc2V0fHx7fQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIGNhbi5iYXNlLk9iaihkYXRhLnN0eWxlKSkKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgZGF0YS50eXBlXSwgW2NhbiwgZGF0YSwgaXRlbV0pCgkJfSkKCX0sCgluYXZtZW51OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgeyB2YXIgbmF2ID0gY2FuLnN1cC5fbmF2bWVudQoJCW5hdiA9IG5hdnx8Y2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9maWVsZHMsIFt3aWtpLk5BVk1FTlVdKS5maXJzdAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIG5hdiksIGNhbi5fZmllbGRzLmluc2VydEJlZm9yZShuYXYsIGNhbi5fb3V0cHV0KQoKCQljYW4ub25pbXBvcnQubGlzdChjYW4sIGNhbi5iYXNlLk9iaihkYXRhLmRhdGEpLCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQl2YXIgbGluayA9IGl0ZW0ubWV0YS5saW5rLCBsaXN0ID0gY2FuLmNvcmUuU3BsaXQoaXRlbS5tZXRhLmxpbmspCgkJCWlmIChjYW4uY29yZS5WYWx1ZShjYW4sIGxpc3RbMF0pKSB7IHJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBsaXN0WzBdXSwgbGlzdC5zbGljZSgxKSkgfQoJCQlpZiAoIWxpbmsgfHwgbGluayA9PSBjYW4uT3B0aW9uKG5mcy5QQVRIKSkgeyByZXR1cm4gZmFsc2UgfQoKCQkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUoaXRlbS5tZXRhLm5hbWUpOyByZXR1cm4gY2FuLk9wdGlvbihuZnMuUEFUSCwgbGluaykgfSkpIHsgcmV0dXJuIH0KCQkJcmV0dXJuIGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbbGlua10pCgkJfSwgbmF2KSwgY2FuLnN1cC5fbmF2bWVudSA9IG5hdgoKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2cpIHsgCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgbmF2LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSsoY2FuLmlzQ21kTW9kZSgpPyBtc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1kpOiAwKSkKCQkJY2FuLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCktbmF2Lm9mZnNldFdpZHRoLTIxKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LAoJCQkJaHRtbC5IRUlHSFQsIGNhbi5zdXAuX25hdm1lbnUub2Zmc2V0SGVpZ2h0LTIwLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpLAoJCQkJaHRtbC5GTE9BVCwgaHRtbC5MRUZULCBodG1sLkNMRUFSLCBodG1sLk5PTkUsCgkJCQlodG1sLlBBRERJTkcsIDEwLAoJCQkpCgkJfSkKCX0sCglwcmVtZW51OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4ucGFnZS5LZXlzKHdpa2kuSDIsIHdpa2kuSDMpLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbaXRlbS5pbm5lckhUTUwsIGh0bWwuTEksIGl0ZW0udGFnTmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJaXRlbS5zY3JvbGxJbnRvVmlldygpCgkJCX19XSksIGl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHRhcmdldC5zY3JvbGxJbnRvVmlldygpIH0KCQl9KQoJfSwKCXRpdGxlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5pc0NtZE1vZGUoKSAmJiB0YXJnZXQudGFnTmFtZSA9PSAiSDEiICYmIGNhbi51c2VyLnRpdGxlKGRhdGEudGV4dCkKCX0sCglyZWZlcjogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuQSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCAicmVmZXIiLCBtZGIuTkFNRSwgaXRlbS5kYXRhc2V0Lm5hbWUsIG1kYi5URVhULCBpdGVtLmhyZWZdKQoJCQl9CgkJfSkKCX0sCglzcGFyazogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQlpZiAoZGF0YVttZGIuTkFNRV0gPT0gY2hhdC5GSUVMRCkgewoJCQlmdW5jdGlvbiBkZWVwKHRleHQpIHsgdmFyIGQgPSAwCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHsKCQkJCQlzd2l0Y2ggKHRleHRbaV0pIHsKCQkJCQkJY2FzZSBpY2UuVEI6IGQgKz0gNDsgYnJlYWsKCQkJCQkJY2FzZSBpY2UuU1A6IGQrKzsgYnJlYWsKCQkJCQkJZGVmYXVsdDogcmV0dXJuIGQKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gZAoJCQl9CgkJCXZhciBsaXN0ID0gW107IGNhbi5jb3JlLkxpc3QodGFyZ2V0LmlubmVyVGV4dC5zcGxpdChpY2UuTkwpLCBmdW5jdGlvbihsaW5lKSB7IHZhciBfZGVlcCA9IGRlZXAobGluZSkKCQkJCXdoaWxlIChsaXN0Lmxlbmd0aCA+IDApIHsgaWYgKF9kZWVwIDw9IGxpc3RbbGlzdC5sZW5ndGgtMV0uX2RlZXApIHsgbGlzdC5wb3AoKSB9IGVsc2UgeyBicmVhayB9IH0KCQkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpLCBpdGVtID0ge19kZWVwOiBfZGVlcCwgbWV0YToge2luZGV4OiBsc1swXSwgbmFtZTogbHNbMV0sIGFyZ3M6IGxzLnNsaWNlKDIpfSwgbGlzdDogW119CgkJCQlpZiAobGlzdC5sZW5ndGggPiAwKSB7IGxpc3RbbGlzdC5sZW5ndGgtMV0ubGlzdC5wdXNoKGl0ZW0pIH0gbGlzdC5wdXNoKGl0ZW0pCgkJCX0pCgoJCQl2YXIgZmlyc3Q7IGZ1bmN0aW9uIHNob3coaXRlbSwgaW5kZXgsIHRhcmdldCwgb3V0cHV0KSB7CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lfHxpdGVtLm1ldGEuaW5kZXhdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB2aWV3Lm1lbnUsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCkKCQkJCQlpZiAodWkubGlzdC5pbm5lclRleHQpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KSB9CgkJCQkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5kZXggfSwgb3V0cHV0KSkgeyByZXR1cm4gfQoKCQkJCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgaXRlbS5tZXRhLCBmdW5jdGlvbihzdWIpIHsKCQkJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGl0ZW0ubWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJCQkJCXN1Yi5Db25mSGVpZ2h0KGl0ZW0ubWV0YS5oZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpLzIpLCBzdWIuQ29uZldpZHRoKGl0ZW0ubWV0YS53aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyAxODE6IDE2NSkpCgkJCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoJCQkJCQl9LCBvdXRwdXQpCgkJCQkJfSkKCQkJCX19LCBodG1sLkxJU1RdKQoJCQkJY2FuLmNvcmUuTGlzdChpdGVtLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5saXN0Lmxlbmd0aCA+IDAgJiYgc2hvdyhpdGVtLCBjYW4uY29yZS5LZXlzKGluZGV4LCBpdGVtLm1ldGEuaW5kZXgpLCB1aS5saXN0LCBvdXRwdXQpIH0pCgkJCQl1aS5saXN0LmlubmVyVGV4dCA9PSAiIiAmJiAoZmlyc3QgPSBmaXJzdHx8dWkuaXRlbSkKCQkJfQoKCQkJdmFyIHZpZXcgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbCgkJCQl7dmlldzogaHRtbC5NRU5VLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS8yLCB3aWR0aDogMTIwfX0sCgkJCQl7dmlldzogaHRtbC5MSVNULCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS8yLCB3aWR0aDogY2FuLkNvbmZXaWR0aCgpLShjYW4udXNlci5pc1dpbmRvd3M/IDE4MTogMTY1KX19LAoJCQldKQoJCQlyZXR1cm4gc2hvdyhsaXN0WzBdLCBsaXN0WzBdLl9pbmRleCwgdmlldy5tZW51LCB2aWV3Lmxpc3QpLCBmaXJzdC5jbGljaygpCgkJfQoKCQlpZiAoZGF0YVttZGIuTkFNRV0gPT0gaHRtbC5JTk5FUikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmNvcHkoY2FuLCB0YXJnZXQpIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuU1BBTiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25tb3Rpb24uY29weShjYW4sIGl0ZW0sICIiLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCAic3BhcmsiLCBtZGIuTkFNRSwgInNoZWxsIiwgbWRiLlRFWFQsIGl0ZW0uaW5uZXJUZXh0XSwgZnVuY3Rpb24oKSB7fSkKCQkJfSkKCQl9KQoJfSwKCWNoYXJ0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCXRhcmdldC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGVDbGllbnQoZXZlbnQsIGNhbiwga2l0LkRpY3QobWRiLkVYUE9SVCwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJCQljYW4ub25tb3Rpb24udG9pbWFnZShldmVudCwgY2FuLCAiaGkiLCB0YXJnZXQpCgkJCX0pLCBbbWRiLkVYUE9SVF0pCgkJfQoJfSwKCXRhYmxlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLk9yZGVyVGFibGUoY2FuLCB0YXJnZXQpLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBjaGF0LkNPTlRFTlQpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLlRELCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSkgfSkKCX0sCglpbWFnZTogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLyhjYW4udXNlci5pc01vYmlsZT8gMjogMSksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgl9LAoJZmllbGQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0LCB3aWR0aCkgeyB2YXIgaXRlbSA9IGNhbi5iYXNlLk9iaihkYXRhLm1ldGEpCgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwgaXRlbSwgW2NoYXQuUExVR0lOX1NUQVRFX0pTXSwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY2hhdC5TVE9SWSwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2RhdGEudHlwZSwgZGF0YS5uYW1lLCBkYXRhLnRleHRdLCBjbWRzKSwgY2IpCgkJCX0KCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBzdWIuQ29uZldpZHRoKGl0ZW0ud2lkdGggPSAod2lkdGh8fGNhbi5Db25mV2lkdGgoKSktKGNhbi51c2VyLmlzV2luZG93cz8gNDA6IDIwKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCgkJCWNhbi5jb3JlLlZhbHVlKGl0ZW0sICJhdXRvLmNtZCIpICYmIGNhbi5vbm1vdGlvbi5kZWxheShmdW5jdGlvbigpIHsKCQkJCXN1Yi5ydW5BY3Rpb24oc3ViLnJlcXVlc3Qoe30sIGNhbi5jb3JlLlZhbHVlKGl0ZW0sICJvcHRzIikpLCBjYW4uY29yZS5WYWx1ZShpdGVtLCAiYXV0by5jbWQiKSkKCQkJfSkKCQl9LCBjYW4uX291dHB1dCwgdGFyZ2V0KQoJfSwKCS8vIGxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkvLyB9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZTogewoJCW5vcm1hbDogewoJCQkibiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLm5leHQoY2FuLnN1YikgfSwKCQkJImoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5uZXh0KGNhbi5zdWIpIH0sCgkJCSJBcnJvd1JpZ2h0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubmV4dChjYW4uc3ViKSB9LAoJCQkiQXJyb3dMZWZ0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwucHJldihjYW4uc3ViKSB9LAoJCQkiayI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLnByZXYoY2FuLnN1YikgfSwKCQkJInAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5wcmV2KGNhbi5zdWIpIH0sCgoJCQkicSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsWyLnu5PmnZ8iXShldmVudCwgY2FuLnN1YikgfSwKCQkJImgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbFsi6ZqQ6JePIl0oZXZlbnQsIGNhbi5zdWIpIH0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsCglfdHJhbnM6IHt2aWV3OiAi6KeG5Zu+In0sCglwbGF5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBsaXN0ID0gW10sIGN1cnJlbnQgPSBbXQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCB3aWtpLklURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UudGFnaXMoWyJoMSIsICJoMiIsICJoMyJdLCBpdGVtKSAmJiBsaXN0LnB1c2goY3VycmVudCA9IFtdKSwgY3VycmVudC5wdXNoKGl0ZW0pCgkJfSkKCgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwge3R5cGU6ICJzdG9yeSB3b3JkIGZsb2F0In0sIFtdLCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGNhbi5ydW4sIHN1Yi5zdXAgPSBjYW4sIGNhbi5zdWIgPSBzdWIsIGNhbi5vbmFwcGVuZC5fYWN0aW9uKHN1YiwgWwoJCQkJWyLluIPlsYAiLCAi5byA6K6yIiwgIue9keagvCIsICLlv6vpl6oiXSwgIuWkp+e6siIsICLpppbpobUiLCAi5LiK5LiA6aG1IiwKCQkJCVsi6I+c5Y2VIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24ocGFnZSkgeyByZXR1cm4gcGFnZVswXS5pbm5lckhUTUwgfSkpLAoJCQkJIuS4i+S4gOmhtSIsICLpmpDol48iLCAi57uT5p2fIiwKCQkJXSwgc3ViLl9hY3Rpb24sIGNhbi5vbmRldGFpbCkKCgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAia2V5bWFwLmZvY3VzIiwgY2FuLnJlcXVlc3QoZXZlbnQsIHtjYjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCAibm9ybWFsIiwgY2FuLmtleWxpc3QpCgkJCX19KSksIGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5CQUNLR1JPVU5ELCBjYW4uX3Jvb3QuX3RhcmdldC5zdHlsZS5iYWNrZ3JvdW5kKQoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLkhFSUdIVCwgY2FuLl9yb290Ll9oZWlnaHQtNCpodG1sLlBMVUdJTl9NQVJHSU4tMipodG1sLkFDVElPTl9IRUlHSFQpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuV0lEVEgsIGNhbi5fcm9vdC5fd2lkdGgtNCpodG1sLlBMVUdJTl9NQVJHSU4pCgoJCQlzdWIudWkgPSBzdWIucGFnZS5BcHBlbmQoc3ViLCBzdWIuX291dHB1dCwgW3t2aWV3OiBjaGF0LlBST0pFQ1R9LCB7dmlldzogY2hhdC5DT05URU5UfV0pCgkJCWNhbi5jb3JlLkxpc3Qoc3ViLmxpc3QgPSBsaXN0LCBmdW5jdGlvbihwYWdlLCBpbmRleCkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCB7bmFtZTogcGFnZVswXS5pbm5lckhUTUx9LCBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmRldGFpbC5zaG93KHN1YiwgaW5kZXgpIAoJCQkJfSwgZnVuY3Rpb24oZXZlbnQpIHt9LCBzdWIudWkucHJvamVjdCkKCgkJCQlzdWIucGFnZS5BcHBlbmQoc3ViLCBzdWIudWkuY29udGVudCwgW3t2aWV3OiAicGFnZSIrKGluZGV4PT0wPyAiIGZpcnN0IjogIiIpLCBsaXN0OiBjYW4uY29yZS5MaXN0KHBhZ2UsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGRhdGEgPSBpdGVtLmRhdGFzZXR8fHt9CgkJCQkJc3dpdGNoIChkYXRhLnR5cGUpIHsKCQkJCQkJY2FzZSB3aWtpLlBSRU1FTlU6IGl0ZW0gPSBpdGVtLmNsb25lTm9kZShmYWxzZSk7IGJyZWFrCgkJCQkJCWNhc2UgY2hhdC5GSUVMRDogaXRlbSA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sIGNoYXQuU1RPUlksIGNhbi5iYXNlLk9iaihkYXRhLm1ldGEpLCBzdWIudWkuY29udGVudCkuZmlyc3Q7IGJyZWFrCgkJCQkJCWRlZmF1bHQ6IGl0ZW0gPSBpdGVtLmNsb25lTm9kZSh0cnVlKQoJCQkJCX0KCQkJCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgZGF0YS50eXBlXSwgW3N1YiwgZGF0YSwgaXRlbSwgY2FuLl9yb290Ll93aWR0aC00Kmh0bWwuUExVR0lOX01BUkdJTl0pLCBpdGVtCgkJCQl9KSwgfV0pCgkJCX0pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLnVpLnByb2plY3QpLCBjYW4ub25kZXRhaWwuc2hvdyhzdWIsIDApIAoKCQkJc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBbbWRiLlBBR0UsIGNsaS5GUk9NLCBjbGkuQ09TVF0pLCBzdWIuU3RhdHVzKGNsaS5GUk9NLCBjYW4uYmFzZS5UaW1lKCkpCgkJCXZhciBmcm9tID0gbmV3IERhdGUoKTsgY2FuLmNvcmUuVGltZXIoe2ludGVydmFsOiAxMDB9LCBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCkKCQkJCXN1Yi5TdGF0dXMoY2xpLkNPU1QsIGNhbi5iYXNlLkR1cmF0aW9uKG5vdy1mcm9tKSkKCQkJfSkKCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCX0sCgl2aWV3OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5faGVpZ2h0KSB7CgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQsIGNhbi5faGVpZ2h0KSwgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uc3VwLl9uYXZtZW51LCBjYW4uX2hlaWdodCksIGRlbGV0ZShjYW4uX2hlaWdodCkKCQl9IGVsc2UgeyBjYW4uX2hlaWdodCA9IGNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQsICIiKSwgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uc3VwLl9uYXZtZW51LCAiIikKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIGxpc3Q6IFsi5Yig6ZmkIl0sCglzaG93OiBmdW5jdGlvbihzdWIsIHdoaWNoKSB7IHN1Yi5wYWdlLnN0eWxlQ2xhc3Moc3ViLCBzdWIudWkuY29udGVudCwgY2hhdC5DT05URU5UKQoJCXN1Yi5wYWdlLlNlbGVjdChzdWIsIHN1Yi51aS5jb250ZW50LCB3aWtpLkRJVl9QQUdFLCBmdW5jdGlvbihwYWdlLCBpbmRleCkgewoJCQlpZiAoaW5kZXggPT0gd2hpY2ggfHwgcGFnZSA9PSB3aGljaCkgewoJCQkJc3ViLnBhZ2UuU2VsZWN0KHN1YiwgcGFnZSwgc3ViLnBhZ2UuS2V5cyhodG1sLkgxLCBodG1sLkgyLCBodG1sLkgzKSwgZnVuY3Rpb24oaXRlbSkgeyBzdWIuQWN0aW9uKCLoj5zljZUiLCBpdGVtLmlubmVySFRNTCkgfSkKCQkJCXN1Yi5vbm1vdGlvbi5zZWxlY3Qoc3ViLCBzdWIudWkucHJvamVjdCwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQlzdWIuU3RhdHVzKG1kYi5QQUdFLCBpbmRleCsxK2ljZS5QUytzdWIubGlzdC5sZW5ndGgpCgkJCQlzdWIucGFnZS5DbGFzc0xpc3QuYWRkKHN1YiwgcGFnZSwgaHRtbC5TSE9XKQoJCQl9IGVsc2UgewoJCQkJc3ViLnBhZ2UuQ2xhc3NMaXN0LmRlbChzdWIsIHBhZ2UsIGh0bWwuU0hPVykKCQkJfQoJCX0pCgl9LAoJbmV4dDogZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHN1Yi5jb3JlLktleXMod2lraS5ESVZfUEFHRSwgaWNlLlNIT1cpLCBmdW5jdGlvbihwYWdlKSB7CgkJCXBhZ2UubmV4dFNpYmxpbmc/IHN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UubmV4dFNpYmxpbmcpOiBzdWIudXNlci50b2FzdChzdWIsIGNsaS5FTkQpCgkJfSkKCX0sCglwcmV2OiBmdW5jdGlvbihzdWIpIHsKCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgc3ViLmNvcmUuS2V5cyh3aWtpLkRJVl9QQUdFLCBpY2UuU0hPVyksIGZ1bmN0aW9uKHBhZ2UpIHsKCQkJcGFnZS5wcmV2aW91c1NpYmxpbmc/IHN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UucHJldmlvdXNTaWJsaW5nKTogc3ViLnVzZXIudG9hc3Qoc3ViLCBjbGkuRU5EKQoJCX0pCgl9LAoJZmxhc2g6IGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5jb3JlLk5leHQoc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHdpa2kuRElWX1BBR0UpLCBmdW5jdGlvbihwYWdlLCBuZXh0KSB7CgkJCXN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UpLCBzdWIub25tb3Rpb24uZGVsYXkoc3ViLCBmdW5jdGlvbigpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCglncmlkOiBmdW5jdGlvbihzdWIpIHsgc3ViLnBhZ2Uuc3R5bGVDbGFzcyhzdWIsIHN1Yi51aS5jb250ZW50LCAiY29udGVudCBncmlkIikgfSwKCgki5byA6K6yIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLnNob3coY2FuLCAwKSB9LAoJIue9keagvCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5ncmlkKGNhbikgfSwKCSLlv6vpl6oiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuZmxhc2goY2FuKSB9LAoKCSLlpKfnurIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCkgfSwKCSLpppbpobUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIDApIH0sCgki5LiK5LiA6aG1IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLnByZXYoY2FuLCBjYW4udWkuY29udGVudCkgfSwKCSLoj5zljZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIGV2ZW50LnRhcmdldC5zZWxlY3RlZEluZGV4KSB9LAoJIuS4i+S4gOmhtSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5uZXh0KGNhbiwgY2FuLnVpLmNvbnRlbnQpIH0sCgki6ZqQ6JePIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki57uT5p2fIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgc3ViKSB7IHN1Yi5wYWdlLlJlbW92ZShzdWIsIHN1Yi5fdGFyZ2V0KSB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vc3RhdGUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY29uZiwgY2IsIHRhcmdldCkge30sCglfcHJvY2VzczogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQltc2cuT3B0aW9uU3RhdHVzKCkgJiYgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9zdGF0dXMpICYmIGNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLmJhc2UuT2JqKG1zZy5PcHRpb25TdGF0dXMoKSkpCgkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25pbXBvcnQsIG1zZy5PcHRpb25Qcm9jZXNzKCldLCB7Y2FuOiBjYW4sIHN1YjogY2FuLCBtc2c6IG1zZ30pCgl9LAoKCV9sb2NhdGlvbjogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsgY2FuLnVzZXIuanVtcHMoX2FyZyk7IHJldHVybiB0cnVlIH0sCglfcmVwbGFjZTogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsgbG9jYXRpb24ucmVwbGFjZShfYXJnKTsgcmV0dXJuIHRydWUgfSwKCV9oaXN0b3J5OiBmdW5jdGlvbihjYW4sIG1zZykgeyBoaXN0b3J5LmJhY2soKTsgcmV0dXJuIHRydWUgfSwKCV9jb25maXJtOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBjYW4udXNlci5jb25maXJtKF9hcmcpICYmIGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIG1zZyksICJjb25maXJtIik7IHJldHVybiB0cnVlIH0sCglfcmVmcmVzaDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uY29yZS5UaW1lcihwYXJzZUludChtc2cuT3B0aW9uKCJfZGVsYXkiKXx8IjUwMCIpLCBmdW5jdGlvbigpIHsKCQkJY2FuLlVwZGF0ZShjYW4ucmVxdWVzdCh7fSwge19jb3VudDogcGFyc2VJbnQobXNnLk9wdGlvbigiX2NvdW50IikpLTF9KSkKCQl9KQoJCXJldHVybiB0cnVlCgl9LAoJX3Jld3JpdGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cuX2FyZy5sZW5ndGg7IGkgKz0gMikgewoJCQljYW4uT3B0aW9uKG1zZy5fYXJnW2ldLCBtc2cuX2FyZ1tpKzFdKSwgY2FuLkFjdGlvbihtc2cuX2FyZ1tpXSwgbXNnLl9hcmdbaSsxXSkKCQl9CgkJcmV0dXJuIGNhbi5VcGRhdGUoKQoJfSwKCV9kaXNwbGF5OiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXJldHVybiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpKSwgdHJ1ZQoJfSwKCV9maWVsZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnR5cGUgPSBjaGF0LlNUT1JZLCBjYW4ub25hcHBlbmQuX3BsdWdpbihjYW4sIGl0ZW0sIHt0eXBlOiBjaGF0LlNUT1JZLCBhcmc6IGNhbi5iYXNlLk9iaihpdGVtW2ljZS5BUkddLCBbXSl9LCBmdW5jdGlvbihzdWIsIG1ldGEpIHsKCQkJc3ViLkNvbmYoY2FuLmJhc2UuT2JqKGl0ZW0uY29uZikpCgkJCWlmIChzdWIuQ29uZigibW9kZSIpID09ICJzaW1wbGUiKSB7IChmdW5jdGlvbigpIHsKCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdCgpOyBtc2cuRWNobyhzdWIuQ29uZigicmVzdWx0IikpCgkJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLzIpCgkJCQljYW4ub25hcHBlbmQuX291dHB1dChzdWIsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxzdWIuQ29uZigiZmVhdHVyZS5kaXNwbGF5IikpCgkJCX0pKCk7IHJldHVybiB9CgkJCXZhciBvcHQgPSBjYW4uYmFzZS5PYmooaXRlbVtpY2UuT1BUXSwgW10pCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsKCQkJCXZhciByZXMgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBvcHQubGVuZ3RoOyBpICs9IDIpIHsgcmVzLk9wdGlvbihvcHRbaV0sIG9wdFtpKzFdKSB9CgkJCQljYW4ucnVuKGV2ZW50LCAobXNnW2ljZS5NU0dfUFJFRklYXXx8W10pLmNvbmNhdChjbWRzKSwgY2IsIHRydWUpCgkJCX0KCQl9KSB9KQoJCXJldHVybiB0cnVlCgl9LAoJX2lubmVyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykKCQljYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLnN0b3J5LmF1dG8oY2FuKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRElTUExBWSwgaHRtbC5CTE9DSykKCQlyZXR1cm4gdHJ1ZQoJfSwKCglfaG9sZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIHRydWUgfSwKCV9iYWNrOiBmdW5jdGlvbihjYW4pIHsgY2FuLl9oaXN0b3J5LnBvcCgpCgkJZm9yICh2YXIgaGlzID0gY2FuLl9oaXN0b3J5LnBvcCgpOyBoaXM7IGhpcyA9IGNhbi5faGlzdG9yeS5wb3AoKSkgeyBpZiAoaGlzWzBdID09IGN0eC5BQ1RJT04pIHsgY29udGludWUgfQoJCQl2YXIgaW5kZXggPSAwCgkJCWNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS52YWx1ZSA9IGhpc1tpbmRleCsrXXx8IiIgfSkKCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fYWN0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnZhbHVlID0gaGlzW2luZGV4KytdfHwiIiB9KQoJCQljYW4uVXBkYXRlKCk7IGJyZWFrCgkJfQoJCSFoaXMgJiYgY2FuLlVwZGF0ZSgpCgkJcmV0dXJuIHRydWUKCX0sCglfcmljaDogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRBQkxFX0NPTlRFTlQsIGh0bWwuVEJPRFldLCBmdW5jdGlvbih0YWJsZSkgewoJCQl2YXIgaGVhZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQUJMRV9DT05URU5ULCBodG1sLlRIXSwgZnVuY3Rpb24odGgpIHsgcmV0dXJuIHRoLmlubmVyVGV4dCB9KQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YWJsZSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlKSB7CgkJCQlyZXR1cm4ge3JvdzogY2FuLmNvcmUuTGlzdChoZWFkLCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV0gfSl9CgkJCX0pKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoJCXJldHVybiB0cnVlCgl9LAoJX2dyb3c6IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7CgkJc3ViID0gY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpCgkJaWYgKHN1YiAmJiBzdWIub25pbXBvcnQgJiYgc3ViLm9uaW1wb3J0Lmdyb3cpIHsKCQkJc3ViLm9uaW1wb3J0Lmdyb3coc3ViLCBtc2csIF9hcmcpCgkJCXJldHVybiB0cnVlCgkJfQoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfQ09ERSwgZnVuY3Rpb24oZGl2KSB7CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgZGl2LCBodG1sLk1BWF9IRUlHSFQsIDQwMCkKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgZGl2LCBbe3RleHQ6IF9hcmd9XSkKCQkJZGl2LnNjcm9sbEJ5KDAsIDEwMDAwKQoJCQlyZXR1cm4gdHJ1ZQoJCX0pLmxlbmd0aCA9PSAwKSB7IGNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIF9hcmcpIH0KCQlyZXR1cm4gdHJ1ZQoJfSwKCV9vcGVuOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgewoJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBjYW4uVXBkYXRlKCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogWwoJCSLliLfmlrDmlbDmja4iLCAi5YiH5o2i5YWo5bGPIiwgIuWFseS6q+W3peWFtyIsICLmiZPlvIDpk77mjqUiLCAi55Sf5oiQ6ZO+5o6lIiwgIueUn+aIkOiEmuacrCIsICLnlJ/miJDlm77niYciLCBbCgkJCSLlhbblroMiLCAi5Yi35paw6aG16Z2iIiwgIuS/neWtmOWPguaVsCIsICLmuIXnqbrlj4LmlbAiLCAi5omp5bGV5Y+C5pWwIiwgIuWkjeWItuaVsOaNriIsICLkuIvovb3mlbDmja4iLCAi5riF56m65pWw5o2uIiwgIuWIoOmZpOmFjee9riIsICLmn6XnnIvphY3nva4iLCAi5Yig6Zmk5bel5YW3Iiwi5pGE5YOP5aS0IiwKCQldLAoJXSwKCV9lbmdpbmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4uVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgYnV0dG9uXS5jb25jYXQoY2FuLklucHV0KFtdLCB0cnVlKSkpIH0sCgoJIuWIt+aWsOaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLlVwZGF0ZSh7fSwgY2FuLklucHV0KFtdLCB0cnVlKSkgfSwKCSLliIfmjaLlhajlsY8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBzdWIgPSBjYW4uX291dHB1dHNbY2FuLl9vdXRwdXRzLmxlbmd0aC0xXQoJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgY2FuLl90YXJnZXQsICJmdWxsIikpIHsKCQkJdmFyIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodC0oY2FuLl9zdGF0dXMuaW5uZXJUZXh0PyAyOiAxKSpodG1sLkFDVElPTl9IRUlHSFQ7IGNhbi51c2VyLmlzTW9iaWxlICYmIChoZWlnaHQgLT0gMipodG1sLkFDVElPTl9IRUlHSFQpCgkJCWNhbi5fbW9kZV9iYWsgPSBjYW4uTW9kZSgpLCBjYW4uX2hlaWdodF9iYWsgPSBzdWIuQ29uZkhlaWdodCgpLCBjYW4uX3dpZHRoX2JhayA9IHN1Yi5Db25mV2lkdGgoKQoJCQlzdWIuTW9kZSgiZnVsbCIpLCBjYW4uTW9kZSgiZnVsbCIpLCBjYW4uQ29uZkhlaWdodChoZWlnaHQpLCBjYW4uQ29uZldpZHRoKHdpbmRvdy5pbm5lcldpZHRoKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkhFSUdIVCwgc3ViLkNvbmZIZWlnaHQoaGVpZ2h0KSwgaHRtbC5NSU5fV0lEVEgsIHN1Yi5Db25mV2lkdGgod2luZG93LmlubmVyV2lkdGgpKQoJCX0gZWxzZSB7CgkJCWNhbi5Nb2RlKGNhbi5fbW9kZV9iYWt8fCIiKSwgY2FuLkNvbmZIZWlnaHQoY2FuLl9oZWlnaHRfYmFrKSwgY2FuLkNvbmZXaWR0aChjYW4uX3dpZHRoX2JhaykKCQkJc3ViLk1vZGUoY2FuLl9tb2RlX2Jha3x8IiIpLCBzdWIuQ29uZkhlaWdodChjYW4uX2hlaWdodF9iYWspLCBzdWIuQ29uZldpZHRoKGNhbi5fd2lkdGhfYmFrKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkhFSUdIVCwgIiIsIGh0bWwuTUlOX1dJRFRILCAiIikKCQl9CgkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgaHRtbC5MQVlPVVRdLCB7Y2FuOiBzdWJ9KQoJfSwKCSLlhbHkuqvlt6XlhbciOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbe25hbWU6IGNoYXQuVElUTEUsIHZhbHVlOiBtZXRhLm5hbWV9LCB7bmFtZTogY2hhdC5UT1BJQywgdmFsdWVzOiBbY2xpLldISVRFLCBjbGkuQkxBQ0tdfV0sIFsKCQkJbWRiLk5BTUUsIG1ldGEuaW5kZXgsIG1kYi5URVhULCBKU09OLnN0cmluZ2lmeShjYW4uSW5wdXQoW10sIHRydWUpKSwKCQldKQoJfSwKCSLmiZPlvIDpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKSwgYXJncyA9IGNhbi5PcHRpb24oKTsgYXJncy5yaXZlciA9ICIiLCBhcmdzLnN0b3JtID0gIiIKCQlhcmdzLmNtZCA9IG1ldGEuaW5kZXh8fGNhbi5jb3JlLktleXMobWV0YS5jdHgsIG1ldGEuY21kKSwgYXJncy5jbWQgPT0gIndlYi53aWtpLndvcmQiICYmIChhcmdzLmNtZCA9IGFyZ3MucGF0aCkKCQljYW4udXNlci5pc1dlaVhpbj8gY2FuLnVzZXIuanVtcHMoY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCBhcmdzKSk6IGNhbi51c2VyLm9wZW4oY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCBhcmdzKSkKCX0sCgki55Sf5oiQ6ZO+5o6lIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbWV0YSA9IGNhbi5Db25mKCksIGFyZ3MgPSBjYW4uT3B0aW9uKCkKCQlhcmdzLmNtZCA9IG1ldGEuaW5kZXh8fGNhbi5jb3JlLktleXMobWV0YS5jdHgsIG1ldGEuY21kKSwgYXJncy5jbWQgPT0gIndlYi53aWtpLndvcmQiICYmIChhcmdzLmNtZCA9IGFyZ3MucGF0aCkKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW10sIFttZGIuTElOSywgY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKV0pCgl9LAoJIueUn+aIkOiEmuacrCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGNvbmYgPSBjYW4uQ29uZigpCgkJdmFyIGFyZ3MgPSBjYW4uSW5wdXQoIiIsIHRydWUpLmpvaW4oaWNlLlNQKSwgbGlzdCA9IFsKCQkJImV4cG9ydCBjdHhfZGV2PSIrbG9jYXRpb24ub3JpZ2luKyI7IGN0eF90ZW1wPSQobWt0ZW1wKTsgY3VybCAtbyAkY3R4X3RlbXAgLWZzU0wgJGN0eF9kZXY7IisiIHNvdXJjZSAkY3R4X3RlbXAgIisoY29uZi5pbmRleHx8IiIpK2ljZS5TUCthcmdzLAoJCQkiaXNoX3N5c19kZXZfcnVuX2NvbW1hbmQgIithcmdzLCAiaXNoX3N5c19kZXZfcnVuX2FjdGlvbiIsICJpc2hfc3lzX2Rldl9ydW5fc291cmNlIiwKCQldCgkJY2FuLnVzZXIudG9hc3RTY3JpcHQoY2FuLCAnPGRpdiBjbGFzcz0ic3RvcnkiIGRhdGEtdHlwZT0ic3BhcmsiLCBkYXRhLW5hbWU9InNoZWxsIj4nKwoJCQknPGxhYmVsPiQgPC9sYWJlbD4nKyc8c3Bhbj4nK2xpc3Quam9pbigiPC9zcGFuPjxici8+PGxhYmVsPiQgPC9sYWJlbD48c3Bhbj4iKSsnPC9zcGFuPicrJzwvZGl2PicsIGNvbmYuaW5kZXgraWNlLlNQK2FyZ3MpCgkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBsaXN0WzBdKQoJfSwKCSLnlJ/miJDlm77niYciOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi5fbmFtZSkgfSwKCgki5Yi35paw6aG16Z2iIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgc3ViID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9vdXRwdXRzLCAiLTEiKQoJCWNhbi5jb3JlLkNhbGxGdW5jKFtzdWIsIGNoYXQuT05JTVBPUlQsICJfaW5pdCJdLCB7Y2FuOiBzdWIsIG1zZzogc3ViLl9tc2csIGNiOiBmdW5jdGlvbihtc2cpIHt9LCB0YXJnZXQ6IGNhbi5fb3V0cHV0fSkKCX0sCgki5L+d5a2Y5Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLuS/neWtmOWPguaVsCJdKSB9LAoJIua4heepuuWPguaVsCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fb3B0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZSA9ICIiIH0pIH0sCgki5omp5bGV5Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl9hY3Rpb24pIH0sCgki5aSN5Yi25pWw5o2uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5vbmV4cG9ydC50YWJsZShjYW4pfHxjYW4ub25leHBvcnQuYm9hcmQoY2FuKSkgfSwKCSLkuIvovb3mlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogImZpbGVuYW1lIiwgdmFsdWU6IG1ldGEubmFtZX1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi51c2VyLmRvd25sb2FkcyhjYW4sIGNhbi5vbmV4cG9ydC50YWJsZShjYW4pLCBsaXN0WzBdLCBuZnMuQ1NWKXx8Y2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY2FuLm9uZXhwb3J0LmJvYXJkKGNhbiksIG1ldGEubmFtZSwgbmZzLlRYVCkKCQl9KQoJfSwKCSLmuIXnqbrmlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSB9LAoJIuWIoOmZpOW3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl90YXJnZXQpIH0sCgki5Yig6Zmk6YWN572uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiY29uZmlnIiwgWyJyZXNldCJdKSB9LAoJIuafpeeci+mFjee9riI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJ1bkFjdGlvbihldmVudCwgImNvbmZpZyIsIFsic2VsZWN0Il0sIGZ1bmN0aW9uKG1zZykgewoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCX0pIH0sCgki5biu5Yqp5paH5qGjIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiaGVscCIpIH0sCgoJIuaJk+WMhemhtemdoiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJvbndlYnBhY2siLCBjYW4ucmVxdWVzdChldmVudCkpIH0sCgoJIuaRhOWDj+WktCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgY29uc3RyYWludHMgPSB7YXVkaW86IGZhbHNlLCB2aWRlbzoge3dpZHRoOiAyMDAsIGhlaWdodDogMjAwfX0KCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBjdHguQUNUSU9OfSwge3ZpZXc6ICJjYXB0dXJlIiwgbGlzdDogW3t0eXBlOiAidmlkZW8iLCBfaW5pdDogZnVuY3Rpb24oaXRlbSkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYShjb25zdHJhaW50cykudGhlbihmdW5jdGlvbihzdHJlYW0pIHsKCQkJCWl0ZW0uc3JjT2JqZWN0ID0gc3RyZWFtLCBpdGVtLm9ubG9hZGVkbWV0YWRhdGEgPSBmdW5jdGlvbihlKSB7CgkJCQkJaXRlbS5wbGF5KCkKCQkJCX0sIHVpLnN0cmVhbSA9IHN0cmVhbQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY29uc29sZS5sb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpOyB9KQoJCX19XX1dKQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFsi5YWz6ZetIiwgIuaKk+aLjSJdLCB1aS5hY3Rpb24sIHsKCQkJIuaKk+aLjSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3t0eXBlOiAiY2FudmFzIiwgd2lkdGg6IHVpLnZpZGVvLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHVpLnZpZGVvLm9mZnNldEhlaWdodH1dKS5maXJzdAoJCQkJY2FudmFzLmdldENvbnRleHQoIjJkIikuZHJhd0ltYWdlKHVpLnZpZGVvLCAwLCAwKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkuY2FwdHVyZSwgW3tpbWc6IGNhbnZhcy50b0RhdGFVUkwoJ2ltYWdlL3BuZycpLCBzdHlsZToge3dpZHRoOiB1aS52aWRlby5vZmZzZXRXaWR0aCwgaGVpZ2h0OiB1aS52aWRlby5vZmZzZXRIZWlnaHR9fV0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW52YXMpCgkJCX0sCgkJCSLlhbPpl60iOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuTGlzdCh1aS5zdHJlYW0uZ2V0VHJhY2tzKCksIGZ1bmN0aW9uKHRyYWNrKSB7IHRyYWNrLnN0b3AoKSB9KQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkuYWN0aW9uKQoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdWkudmlkZW8pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5jYXB0dXJlKQoJCQl9LAoJCX0pCgl9LAoKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSB9LAoJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmlzRnVsbE1vZGUoKSkgewoJCQljYW4ub25hY3Rpb25bIuWIh+aNouWFqOWxjyJdKGV2ZW50LCBjYW4pCgkJfSBlbHNlIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLl90YXJnZXQpCgkJfQoJfSwKCXVwbG9hZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci51cGxvYWQoZXZlbnQsIGNhbikgfSwKCWFjdGlvbnM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fYWN0aW9uKSB9LAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgbWRiLk5FWFQsIGNhbi5TdGF0dXMobWRiLlRPVEFMKXx8MCwgY2FuLk9wdGlvbihtZGIuTElNSVQpfHxjYW4uQWN0aW9uKG1kYi5MSU1JVCl8fCIiLCBjYW4uT3B0aW9uKG1kYi5PRkZFTkQpfHxjYW4uQWN0aW9uKG1kYi5PRkZFTkQpfHwiIl0pIH0sCglwcmV2OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBtZGIuUFJFViwgY2FuLlN0YXR1cyhtZGIuVE9UQUwpfHwwLCBjYW4uT3B0aW9uKG1kYi5MSU1JVCl8fGNhbi5BY3Rpb24obWRiLkxJTUlUKXx8IiIsIGNhbi5PcHRpb24obWRiLk9GRkVORCl8fGNhbi5BY3Rpb24obWRiLk9GRkVORCl8fCIiXSkgfSwKCWNoYW5nZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdmFsdWUsIGNiKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBjYW4uX29wdGlvbiwgIiIsIGZ1bmN0aW9uKGlucHV0KSB7CgkJCWlmIChpbnB1dC5uYW1lID09IG5hbWUgJiYgdmFsdWUgIT0gaW5wdXQudmFsdWUpIHsgaW5wdXQudmFsdWUgPSB2YWx1ZQoJCQkJdmFyIGRhdGEgPSBpbnB1dC5kYXRhc2V0fHx7fTsgY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KCksIGNiKQoJCQkJcmV0dXJuIGlucHV0CgkJCX0KCQl9KQoJfSwKCglvcGVuTG9jYXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuYWdlbnQub3BlbkxvY2F0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSkgfSwKCWdldExvY2F0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihkYXRhKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBkYXRhKQoJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVCwgImxhdGl0dWRlIiwgImxvbmdpdHVkZSJdLCBmdW5jdGlvbihhcmdzKSB7CgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIGFyZ3MpCgkJCX0pCgkJfSkKCX0sCglnZXRDbGlwYm9hcmREYXRhOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQlmdW5jdGlvbiBhZGQodGV4dCkgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtjYW4uYmFzZS5QYXJzZUpTT04odGV4dCldKSB9CgkJbmF2aWdhdG9yLmNsaXBib2FyZD8gbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpLnRoZW4oYWRkKS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLm1pc2MuTG9nKGVycikgfSk6CgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7dHlwZTogaHRtbC5URVhUQVJFQSwgbmFtZTogbWRiLlRFWFR9XSwgZnVuY3Rpb24obGlzdCkgeyBhZGQobGlzdFswXSkgfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCXRhYmxlOiBmdW5jdGlvbihjYW4pIHsgdmFyIG1zZyA9IGNhbi5fbXNnOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQl2YXIgcmVzID0gW21zZy5hcHBlbmQgJiYgbXNnLmFwcGVuZC5qb2luKGljZS5GUyldOyBtc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgsIGFycmF5KSB7CgkJCXJlcy5wdXNoKGNhbi5jb3JlLkl0ZW0obGluZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gdmFsdWUgfSkuam9pbihpY2UuRlMpKQoJCX0pCgkJcmV0dXJuIHJlcy5qb2luKGljZS5OTCkKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuKSB7IHZhciBtc2cgPSBjYW4uX21zZzsgcmV0dXJuIG1zZy5SZXN1bHQoKSB9LAp9KQoKX2Nhbl9uYW1lID0gIi9wbHVnaW4vc3RvcnkvZm9ybS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAiZm9ybSIpCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAibmFtZSIpCgkJbXNnLlB1c2goInZhbHVlIiwgImhhcnZleXNoYW8iKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAia2V5IikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAiYWdlIikKCQltc2cuUHVzaCgidmFsdWUiLCAiMTgiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAic2VsZWN0IikKCQltc2cuUHVzaCgibmFtZSIsICJtYWxlIikKCQltc2cuUHVzaCgidmFsdWUiLCAibWFsZSxmZW1hbGUiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dGFyZWEiKQoJCW1zZy5QdXNoKCJuYW1lIiwgImludHJvIikKCQltc2cuUHVzaCgidmFsdWUiLCAicHJvZ3JhbSIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJidXR0b24iKQoJCW1zZy5QdXNoKCJuYW1lIiwgInN1Ym1pdCIpCgkJbXNnLlB1c2goInZhbHVlIiwgIuaPkOS6pCIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQl2YXIgYWN0aW9uID0gIiI7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCXN3aXRjaCAodmFsdWUudHlwZSkgewoJCQkJY2FzZSBodG1sLkJVVFRPTjogYWN0aW9uID0gYWN0aW9ufHx2YWx1ZS5uYW1lCgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuSU5QVVQsIHN0eWxlOiB7d2lkdGg6IChjYW4uQ29uZldpZHRoKCktOTApLzJ9LCBkYXRhOiB7dHlwZTogdmFsdWUudHlwZSwgdmFsdWU6IHZhbHVlLnZhbHVlfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCXZhciBhcmdzID0gW2N0eC5BQ1RJT04sIGFjdGlvbl0KCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgIi5hcmdzIiwgZnVuY3Rpb24oaXRlbSkgeyBhcmdzLnB1c2goaXRlbS5uYW1lLCBpdGVtLnZhbHVlKX0pCgkJCQkJCQljYW4ucnVuKGV2ZW50LCBhcmdzKQoJCQkJCQl9fV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlNFTEVDVDoKCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbCgkJCQkJCXt2aWV3OiBbImxhYmVsIl0sIGxpc3Q6IFt7dGV4dDogdmFsdWUubmFtZX1dfSwKCQkJCQkJe3ZpZXc6IFsiaW5wdXQiXSwgbGlzdDogW3t0eXBlOiBodG1sLlNFTEVDVCwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LAoJCQkJCQkJZGF0YTogdmFsdWUsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodmFsdWUudmFsdWUpLCBmdW5jdGlvbih2KSB7IHJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIG5hbWU6IHYsIHZhbHVlOiB2LCBpbm5lcjogdn0gfSkgfV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlRFWFRBUkVBOgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6ICJpbnB1dCIsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQl9CgkJfSkKCX0sCn0sIFsiIl0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9qc29uLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsICJqc29uIikKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25pbXBvcnQuc2hvdyhjYW4sIGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCksIHt9KSwgdGFyZ2V0KQoJfSwKCXNob3c6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7CgkJZnVuY3Rpb24gc2hvdyhkYXRhLCB0YXJnZXQsIGluZGV4LCB0b3RhbCkgeyB2YXIgbGlzdAoJCQlzd2l0Y2ggKHR5cGVvZiBkYXRhKSB7CgkJCQljYXNlIGxhbmcuT0JKRUNUOgoJCQkJCWlmIChkYXRhID09IG51bGwpIHsKCQkJCQkJbGlzdCA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiAibnVsbCJ9XSkuaXRlbQoJCQkJCQlicmVhawoJCQkJCX0KCQkJCQlmdW5jdGlvbiB3cmFwKGJlZ2luLCBlbmQsIGFkZCwgY2IpIHsKCQkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IGJlZ2lufV0pCgkJCQkJCWFkZCAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWyIuLi4iLCBodG1sLlNQQU4sICJub25jZSJdfV0pLCBjYigpCgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBlbmR9XSkKCQkJCQl9CgkJCQkJZnVuY3Rpb24gdG9nZ2xlKGxpc3QpIHsgbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCkgfQoJCQkJCWZ1bmN0aW9uIF9pdGVtKCkgewoJCQkJCQlsaXN0ID0gbGlzdCB8fCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5MSVNUfV0pLmxpc3QKCQkJCQkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIGxpc3QsIFt7dmlldzogaHRtbC5JVEVNfV0pLml0ZW0KCQkJCQl9CgoJCQkJCWlmIChjYW4uYmFzZS5pc0FycmF5KGRhdGEpKSB7IC8vIOaVsOe7hAoJCQkJCQl3cmFwKCJbIiwgIl0iLCBkYXRhLmxlbmd0aCA+IDAsIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5MaXN0KGRhdGEsIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgaXRlbSA9IF9pdGVtKCkKCQkJCQkJCXNob3codmFsdWUsIGl0ZW0sIGluZGV4LCBkYXRhLmxlbmd0aCkKCQkJCQkJfSkgfSkKCQkJCQl9IGVsc2UgeyAvLyDlr7nosaEKCQkJCQkJdmFyIGxlbmd0aCA9IGNhbi5jb3JlLkl0ZW0oZGF0YSkubGVuZ3RoLCBjb3VudCA9IDAKCQkJCQkJd3JhcCgieyIsICJ9IiwgbGVuZ3RoID4gMCwgZnVuY3Rpb24oKSB7IGNhbi5jb3JlLkl0ZW0oZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyB2YXIgaXRlbSA9IF9pdGVtKCkKCQkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGl0ZW0sIFt7dGV4dDogWyciJytrZXkrJyInLCBodG1sLlNQQU4sICJrZXkiXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdG9nZ2xlKHN1YikgfX0sIHt0ZXh0OiAnOiAnfV0pCgkJCQkJCQl2YXIgc3ViID0gc2hvdyh2YWx1ZSwgaXRlbSwgY291bnQrKywgbGVuZ3RoKQoJCQkJCQl9KSB9KQoJCQkJCX0KCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLlNUUklORzogLyog5a2X5LiyICovIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbJyInK2RhdGErJyInLCBodG1sLlNQQU4sIGxhbmcuU1RSSU5HXX1dKTsgYnJlYWsKCQkJCWRlZmF1bHQ6IC8qIOWFtuWugyAqLyBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWycnK2RhdGErJycsIGh0bWwuU1BBTiwgImNvbnN0Il19XSkKCQkJfQoJCQkoaW5kZXggPCB0b3RhbC0xKSAmJiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogaWNlLkZTfV0pCgkJCXJldHVybiBsaXN0CgkJfTsgc2hvdyhkYXRhLCBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogaHRtbC5JVEVNfV0pLml0ZW0sIDAsIDApCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsi5bGV5byAIiwgIuaKmOWPoCIsICLlpI3liLYiXSwKCSLlsZXlvIAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9MSVNUXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbGlzdCwgdHJ1ZSkKCQl9KQoJfSwKCSLmipjlj6AiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLkRJVl9MSVNULCBodG1sLkRJVl9MSVNUXSwgZnVuY3Rpb24obGlzdCkgewoJCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgbGlzdCkKCQl9KQoJfSwKCSLlpI3liLYiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuY29weShldmVudCwgY2FuLCBjYW4uX21zZy5SZXN1bHQoKSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9tZWRpYS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ucmVxdWlyZU1vZHVsZXMoWyJnaWZzaG90L2Rpc3QvZ2lmc2hvdC5qcyJdLCBmdW5jdGlvbigpIHsKCgkJfSkKCQl2YXIgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCWNhbi51aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3ZpZXc6IGh0bWwuT1VUUFVUfSwge3ZpZXc6IGh0bWwuRElTUExBWSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodC80fX1dKQoJCW1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4ub25pbXBvcnQuX3ZpZGVvKGNhbiwgIi9jaGF0L21lZGlhLyIrdmFsdWUucGF0aCkKCQl9KQoJfSwKCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGxpc3QpIHsKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGxpc3R8fGNhbi5vbmFjdGlvbi5saXN0LCBjYW4uX2FjdGlvbiwgY2FuLm9uYWN0aW9uKQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgY2IpIHsgdmFyIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQljYW4udWkudmlkZW8gPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLnVpLm91dHB1dCwgW3t0eXBlOiBodG1sLlZJREVPLCBkYXRhOiB7Y29udHJvbHM6ICJjb250cm9scyJ9LCBzdHlsZToge2hlaWdodDogaGVpZ2h0KjMvNH0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNiKHRhcmdldCkgfSkKCQl9fV0pLmZpcnN0LCBjYW4ub25pbXBvcnQuX2FjdGlvbihjYW4sIFsi5oqT5ouNIiwgIuW9leWItiIsICLlj5bmtogiXSkKCX0sCglfaW1hZ2U6IGZ1bmN0aW9uKGNhbiwgc3JjKSB7CgkJY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3tpbWc6IHNyYywgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvNH19XSwgY2FuLnVpLmRpc3BsYXkuZmlyc3RDaGlsZCwgY2FuLnVpLmRpc3BsYXkpCgkJcmV0dXJuIHNyYwoJfSwKCV92aWRlbzogZnVuY3Rpb24oY2FuLCBzcmMpIHsKCQljYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3R5cGU6IGh0bWwuVklERU8sIHNyYzogc3JjLCBkYXRhOiB7Y29udHJvbHM6ICJjb250cm9scyJ9LCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS80fX1dLCBjYW4udWkuZGlzcGxheS5maXJzdENoaWxkLCBjYW4udWkuZGlzcGxheSkKCQlyZXR1cm4gc3JjCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFsi5b2V5bGPIiwgIuaRhOWDjyJdLAoJIuW9leWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25pbXBvcnQuX2xheW91dChjYW4sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkqMy80fX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7IGNhbi5zdHJlYW0gPSBzdHJlYW0KCQkJCXRhcmdldC5zcmNPYmplY3QgPSBzdHJlYW0sIHRhcmdldC5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyB0YXJnZXQucGxheSgpIH0KCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IGNhbi5taXNjLkxvZyhlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSkgfSkKCQl9KQoJfSwKCSLmkYTlg48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9uaW1wb3J0Ll9sYXlvdXQoY2FuLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpKjMvNH19KS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgeyBjYW4uc3RyZWFtID0gc3RyZWFtCgkJCQl0YXJnZXQuc3JjT2JqZWN0ID0gc3RyZWFtLCB0YXJnZXQub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsgdGFyZ2V0LnBsYXkoKSB9CgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCgki5oqT5ouNIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgd2lkdGggPSBjYW4udWkudmlkZW8ub2Zmc2V0V2lkdGgsIGhlaWdodCA9IGNhbi51aS52aWRlby5vZmZzZXRIZWlnaHQKCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dHlwZTogaHRtbC5DQU5WQVMsIGhlaWdodDogaGVpZ2h0LCB3aWR0aDogd2lkdGh9XSkuZmlyc3QKCQljYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UoY2FuLnVpLnZpZGVvLCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCAwLCAwLCB3aWR0aCwgaGVpZ2h0KQoJCWNhbi5vbmltcG9ydC5faW1hZ2UoY2FuLCBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCX0sCgki5b2V5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udWkuYmxvYnMgPSBbXQoJCXZhciByZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKGNhbi5zdHJlYW0sIHttaW1lVHlwZTogJ3ZpZGVvL3dlYm0nfSkKCQlyZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbihyZXMpIHsgY2FuLnVpLmJsb2JzLnB1c2gocmVzLmRhdGEpLCBjYW4uU3RhdHVzKCJ0b3RhbCIsIGNhbi51aS5ibG9icy5sZW5ndGgpIH0KCQlyZWNvcmRlci5vbnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0Ll9sYXlvdXQoY2FuLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCXRhcmdldC5zcmMgPSBjYW4ub25pbXBvcnQuX3ZpZGVvKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlOiAndmlkZW8vd2VibSd9KSkpCgkJCX0pLCBjYW4ub25pbXBvcnQuX2FjdGlvbihjYW4sIFsi5LiK5LygIiwgIuWPlua2iCJdKQoJCX0KCQlyZWNvcmRlci5zdGFydCgxMCksIGNhbi51aS5yZWNvcmRlciA9IHJlY29yZGVyCgkJY2FuLm9uaW1wb3J0Ll9hY3Rpb24oY2FuLCBbIue7k+adnyJdKQoJfSwKCSLnu5PmnZ8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uc3RyZWFtLmdldFRyYWNrcygpLCBmdW5jdGlvbih0cmFjaykgeyB0cmFjay5zdG9wKCkgfSkKCX0sCgki5LiK5LygIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiAidGV4dCIsIG5hbWU6ICJmaWxlIiwgdmFsdWU6ICJzb21lIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCW1zZy5fdXBsb2FkID0gbmV3IEZpbGUoY2FuLnVpLmJsb2JzLCAobGlzdFswXXx8InNvbWUiKSsiLndlYm0iKSAKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQpCgkJfSkKCX0sCgki5Y+W5raIIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5vdXRwdXQpLCBjYW4ub25pbXBvcnQuX2FjdGlvbihjYW4pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFsi5YWz6ZetIiwgIuaKk+aLjSIsICLlvZXliLYiXSwKCSLmiJDlm74iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJZ2lmc2hvdC5jcmVhdGVHSUYoewoJCQkndmlkZW8nOiBbVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlIDogJ3ZpZGVvL3dlYm0nfSkpXSwKCQl9LGZ1bmN0aW9uKG9iaikgewoJCQlpZighb2JqLmVycm9yKSB7CgkJCQljYW4udXNlci5kb3dubG9hZChjYW4sIG9iai5pbWFnZSwgInNvbWUiLCAiZ2lmIikKCQkJfQoJCX0pOwoJfSwKCSLlm57mlL4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHZpZGVvID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLm91dHB1dCwgW3t0eXBlOiBodG1sLlZJREVPLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCl9fV0pLnZpZGVvCgkJdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlIDogJ3ZpZGVvL3dlYm0nfSkpLCB2aWRlby5wbGF5KCkKCX0sCgki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlOiAidmlkZW8vd2VibSJ9KSksICJyZWNvcmQud2VibSIpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsidG90YWwiXX0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9wYXJzZS5qcyIKVm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBsaXN0OiBbInsiLCAifSIsIGh0bWwuSEVBRCwgaHRtbC5MRUZULCBodG1sLk1BSU4sIGh0bWwuRk9PVF0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgaGVpZ2h0KSB7IHZhciBzdGFjayA9IFt7X2RlZXA6IC0xLCBsaXN0OiBbXX1dLCBmaW5pc2ggPSBmYWxzZQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodGV4dCwgaWNlLk5MLCBpY2UuTkwsIGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgaWYgKGxpbmUgPT0gIiIgfHwgZmluaXNoKSB7IHJldHVybiB9CgkJCXZhciBkZWVwID0gMDsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7IGlmIChsaW5lW2ldID09IGljZS5TUCkgeyBkZWVwKysgfSBlbHNlIGlmIChsaW5lW2ldID09IGljZS5UQikgeyBkZWVwICs9IDQgfSBlbHNlIHsgYnJlYWsgfSB9CgkJCWZvciAodmFyIGkgPSBzdGFjay5sZW5ndGgtMTsgaSA+IDA7IGktLSkgeyBpZiAoZGVlcCA8PSBzdGFja1tpXS5fZGVlcCkgeyBzdGFjay5wb3AoKSB9IH0KCgkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpOyBpZiAobHNbMF0gPT0gInJldHVybiAiKSB7IHJldHVybiBmaW5pc2ggPSB0cnVlIH0KCQkJdmFyIGl0ZW0gPSB7X2RlZXA6IGRlZXAsIGxpc3Q6IFtdfTsgdmFyIGxpc3QgPSBzdGFja1tzdGFjay5sZW5ndGgtMV07IGxpc3QubGlzdC5wdXNoKGl0ZW0pOyBpZiAoZGVlcCA+IGxpc3QuX2RlZXApIHsgc3RhY2sucHVzaChpdGVtKSB9CgkJCWNhbi5vbmFwcGVuZC5saXN0LmluZGV4T2YobHNbMF0pID4gLTEgfHwgY2FuLm9uYXBwZW5kW2xzWzBdXT8gaXRlbS50eXBlID0gbHNbMF06IGl0ZW0ubmFtZSA9IGxzWzBdCgkJCWZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgbHNbaV0sIGxzW2krMV0pIH0KCQl9KQoJCXJldHVybiB7dHlwZTogbmFtZSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKXx8d2luZG93LmlubmVySGVpZ2h0fSwgbGlzdDogc3RhY2tbMF0ubGlzdH0KCX0sCglwYXJzZTogZnVuY3Rpb24oY2FuLCBsaXN0LCB0YXJnZXQsIGtleXMsIGRhdGEsIHR5cGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dCwgZGF0YSA9IGRhdGF8fHt9CgkJaWYgKCFsaXN0KSB7IHJldHVybiB9IGVsc2UgaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24obWV0YSwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEsIHRhcmdldCwga2V5cywgZGF0YSwgdHlwZSkgfSkKCgkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc1N0cmluZyhsaXN0KSkgewoJCQl2YXIgbHMgPSBjYW4uY29yZS5TcGxpdChsaXN0LCAiIiwgIjo9QCIpOyBpZiAobHMubGVuZ3RoID09IDEpIHsKCQkJCXZhciBtZXRhID0gdHlwZT8ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfToge3R5cGU6IGxzWzBdfQoJCQl9IGVsc2UgewoJCQkJdmFyIG1ldGEgPSB7bmFtZTogbHNbMF19OyBmb3IgKHZhciBpID0gMTsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IHN3aXRjaCAobHNbaV0pIHsKCQkJCQljYXNlICJAIjogbWV0YS5hY3Rpb24gPSBsc1tpKzFdOyBicmVhawoJCQkJCWNhc2UgIj0iOiBtZXRhLnZhbHVlID0gbHNbaSsxXTsgYnJlYWsKCQkJCQljYXNlICI6IjogbWV0YS50eXBlID0gbHNbaSsxXTsgYnJlYWsKCQkJCX0gfQoJCQl9CgoJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QobGlzdCkpIHsgdmFyIG1ldGEgPSBsaXN0IH0KCgkJdmFyIGl0ZW0gPSB7dmlldzogbWV0YS50eXBlfTsgc3dpdGNoIChtZXRhLnR5cGUpIHsKCQkJY2FzZSBodG1sLkhFQUQ6IG1ldGEuc3VidHlwZSA9IGh0bWwuTUVOVQoJCQkJbWV0YS5pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGh0bWwuTEFZT1VUKSwgZGF0YS5oZWFkID0gdGFyZ2V0IH0KCQkJCWJyZWFrCgkJCWNhc2UgInsiOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTEVGVCAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTEVGVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5JVEVNCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmxlZnQgPSB0YXJnZXQKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSkKCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgIn0iOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTUFJTiAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTUFJTjoKCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSwgZGF0YS5tYWluPyAxMDogMTAwKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgd2lkdGggPSB0YXJnZXQucGFyZW50Tm9kZS5vZmZzZXRXaWR0aAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgaHRtbC5ESVZfTEFZT1VUX0xFRlQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQl3aWR0aCAtPSBpdGVtLm9mZnNldFdpZHRoIC8vIOWuveW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQkJCX0sIGRhdGEubWFpbj8gMTA6IDEwMCkKCgkJCQkJaWYgKCFkYXRhLm1haW4pIHsgZGF0YS5tYWluID0gdGFyZ2V0CgkJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBkYXRhLm1haW5faW5pdCAmJiBkYXRhLm1haW5faW5pdCgpIH0sIDMwMCkKCQkJCQl9CgkJCQl9CgkJCQlicmVhawoJCQljYXNlIGh0bWwuRk9PVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5NRU5VCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmZvb3QgPSB0YXJnZXQgfQoJCQkJYnJlYWsKCQkJZGVmYXVsdDogdmFyIGNiID0gY2FuLm9uYXBwZW5kW21ldGEudHlwZV07IGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobWV0YS5zdHlsZSkpIHsgaXRlbS5zdHlsZSA9IG1ldGEuc3R5bGUgfQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhtZXRhLnN0eWxlKSkgeyBpdGVtLmNsYXNzTmFtZSA9IG1ldGEuc3R5bGUgfQoKCQltZXRhLmtleXMgPSBtZXRhLmtleXN8fGNhbi5jb3JlLktleXMoa2V5cywgbWV0YS5uYW1lfHxtZXRhLnR5cGUpIAoJCXZhciBjYiA9IGNhbi5vbmFwcGVuZFt0eXBlXTsgIWNhbi5vbmFwcGVuZFttZXRhLnR5cGVdICYmIGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCWl0ZW0uX2luaXQgPSBpdGVtLl9pbml0fHxmdW5jdGlvbih0YXJnZXQpIHsgbWV0YS5saXN0ICYmIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEubGlzdCwgdGFyZ2V0LCBtZXRhLmtleXMsIGRhdGEsIG1ldGEuc3VidHlwZXx8dHlwZSkgfQoJCWl0ZW0udGFyZ2V0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaXRlbV0pLmZpcnN0OyBtZXRhLmluaXQgJiYgbWV0YS5pbml0KGl0ZW0udGFyZ2V0KQoJCWNhbi5jb3JlLkl0ZW1DQihtZXRhLCBmdW5jdGlvbihrZXksIGNiKSB7IGl0ZW0udGFyZ2V0W2tleV0gPSBjYW4uYmFzZS5pc0Z1bmMoY2IpPyBjYjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNiLCBjYW4ucmVxdWVzdChldmVudCwgbWV0YSkpIH0gfSkKCX0sCgl1c2VybmFtZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiBbYWFhLlVTRVJOQU1FLCBodG1sLkRJVl0sIGxpc3Q6IFt7dmlldzogW2h0bWwuTkFNRSwgaHRtbC5ESVYsIGNhbi51c2VyLmluZm8udXNlcm5pY2tdfSwge3ZpZXc6IFtodG1sLklDT04sIGh0bWwuRElWXSwgbGlzdDogW3tpbWc6IGNhbi51c2VyLmluZm8uYXZhdGFyfV19XX0pCgl9LAoJbWVudTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIG1ldGEubGlzdCAmJiBtZXRhLmxpc3QubGVuZ3RoID4gMD8ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIHt9LCBjYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5uYW1lIH0pLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgYnV0dG9uKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IGJ1dHRvbn0pKQoJCQl9KQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fToge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgbWV0YS5uYW1lKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IG1ldGEubmFtZX0pKQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fSkKCX0sCglpdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCwgZGF0YSkgeyBpdGVtLnZpZXcgPSBpdGVtLnZpZXd8fGh0bWwuTElTVAoJCWlmIChkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaCkgPT0gIiMiK21ldGEua2V5cykgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoJCWlmIChtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAhbG9jYXRpb24uaGFzaCkgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiAic29tZSIsIGxpc3Q6IFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIG1ldGEubmFtZXx8bWV0YV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCX19LCB7dmlldzogaHRtbC5MSVNULCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IG1ldGEubGlzdCAmJiBjYW4ub25hcHBlbmQucGFyc2UoY2FuLCBtZXRhLmxpc3QsIHRhcmdldCwgbWV0YS5rZXlzLCBkYXRhLCBodG1sLklURU0pIH19XSwgX2luaXQ6IGZ1bmN0aW9uKCkge319KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0KSB7CgkJaXRlbS5saXN0ID0gW3t2aWV3OiAibmFtZSJ9LCB7dmlldzogaHRtbC5QQUdFfV0sIGl0ZW0uX2luaXQgPSBmdW5jdGlvbihfdGFyZ2V0LCB1aSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5wYWdlLCBbe3ZpZXc6IGh0bWwuSU5QVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5JTlBVVCwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIF90YXJnZXQsIFtodG1sLkRJVl9QQUdFLCBodG1sLkRJVl9JVEVNXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLkhJREUsIGl0ZW0uaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA9PSAtMSkKCQkJCX0pCgkJCX19XX1dKQoJCQljYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm5hbWUsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubmFtZXx8aXRlbV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIF90YXJnZXQsIFtbaHRtbC5ESVZfUEFHRSwgaHRtbC5ESVZfTElTVF1dLCBpbmRleCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQkJdWkucGFnZS5zY3JvbGxUbygwLCAwKQoJCQkJfX1dKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkucGFnZSwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLCBodG1sLlNFTEVDVCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQl9fSwge3ZpZXc6IFtodG1sLkxJU1RdLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgaXRlbS5saXN0LCB0YXJnZXQsIGNhbi5jb3JlLktleXMobWV0YS5rZXlzLCBpdGVtLm5hbWUpLCBkYXRhLCBodG1sLklURU0pCgkJCQl9fV0pCgkJCX0pCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wYWdlLCBodG1sLkhFSUdIVCwgaGVpZ2h0LTEwLShtZXRhLnN0eWxlPyAwOiB1aS5uYW1lLm9mZnNldEhlaWdodCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIF90YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQtMTApCgkJCX0pLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNKVswXS5jbGljaygpCgkJfQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1ldGEsIGRhdGEpIHsgdmFyIHRhcmdldCA9IGRhdGEubWFpbgoJCWlmICghbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCXZhciB1cmwgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sICJwb2QiKSwgY21kOiBtZXRhLmluZGV4fSkKCQlpZiAobWV0YS5hY3Rpb24gPT0gInB1c2giKSB7IHJldHVybiBjYW4udXNlci5qdW1wcyh1cmwpIH0KCQlpZiAobWV0YS5hY3Rpb24gPT0gIm9wZW4iKSB7IHJldHVybiBjYW4udXNlci5vcGVuKHVybCkgfQoKCQlsb2NhdGlvbi5oYXNoID0gbWV0YS5rZXlzCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0YS5rZXlzIH0sIHRhcmdldCkpIHsgcmV0dXJuIH0KCgkJaWYgKGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuWk1MIHx8IGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuSU1MKSB7CgkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JRlJBTUUsIHNyYzogIi9jaGF0L2NtZC8iK21ldGEuaW5kZXgsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCwgd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aH1dKQoJCX0KCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogbWV0YS5pbmRleCwgYXJnczogY2FuLmJhc2UuT2JqKG1ldGEuYXJncyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleHx8bWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLkNvbmZIZWlnaHQodGFyZ2V0Lm9mZnNldEhlaWdodC0zKmh0bWwuQUNUSU9OX0hFSUdIVC02Kmh0bWwuUExVR0lOX01BUkdJTiksIHN1Yi5Db25mV2lkdGgodGFyZ2V0Lm9mZnNldFdpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS9waWUuanMiClZvbGNhbm9zKGNoYXQuT05JTVBPUlQsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoKCQl2YXIgY29sb3IgPSBbY2xpLlJFRCwgY2xpLllFTExPVywgY2xpLkdSRUVOLCBjbGkuQ1lBTiwgY2xpLkJMVUUsIGNsaS5QVVJQTEVdCgkJdmFyIGNvbG9yID0gWyIjMzMwMEZGIiwgIiMyMTk2RjMiLCAiIzRDQUY1MCIsICIjQ0REQzM5IiwgIiNGRkVCM0IiLCAiIzlDMjdCMCIsICIjNzk1NTQ4IiwgIiM2MDdEOEIiLCAiI0NDMzNGRiJdCgkJdmFyIGhlaWdodCA9IG1zZy5PcHRpb24oaHRtbC5IRUlHSFQpfHxjYW4uQ29uZkhlaWdodCgpCgoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgImRyYXciKQoJCWNhbi5yZXF1aXJlKFsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLCAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgbXNnKSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbXS5jb25jYXQobXNnLmFwcGVuZCwgWyJ3ZWlnaHQiXSkpCgkJCXZhciBtYXJnaW4gPSBoZWlnaHQvOCwgciA9IGhlaWdodC8yLW1hcmdpbjsgY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgMioocittYXJnaW4pKSwgY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIDIqKHIrbWFyZ2luKSkKCQkJY2FuLm9uaW1wb3J0Ll9kcmF3KGNhbiwgbXNnLCBjYW4uQ29uZihtZGIuRklFTEQpLCBjb2xvciwgcittYXJnaW4sIHIrbWFyZ2luLCByLCBtYXJnaW4sIDApCgoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpLWhlaWdodCkKCQkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2plY3QpLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2plY3QsIHRydWUpCgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgY2FuLnVpLnByb2plY3QpLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGluZGV4KSB7CgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0ciwge29ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25pbXBvcnQuX2RyYXcoY2FuLCBtc2csIGNhbi5Db25mKG1kYi5GSUVMRCksIGNvbG9yLCByK21hcmdpbiwgcittYXJnaW4sIHIsIG1hcmdpbiwgaW5kZXgtMSkKCQkJCX19KQoJCQl9KQoJCX0pCgl9LAoJX2RyYXc6IGZ1bmN0aW9uKGNhbiwgbXNnLCBmaWVsZCwgY29sb3IsIHgsIHksIHIsIG1hcmdpbiwgd2hpY2gpIHsgZmllbGQgPSBmaWVsZHx8bWRiLlZBTFVFCgkJZnVuY3Rpb24gcG9zKHgsIHksIHIsIGFuZ2xlKSB7IGFuZ2xlIC09IDkwOyByZXR1cm4gW3ggKyByICogTWF0aC5jb3MoYW5nbGUgKiBNYXRoLlBJIC8gMTgwKSwgeSArIHIgKiBNYXRoLnNpbihhbmdsZSAqIE1hdGguUEkgLyAxODApXSB9CgkJZnVuY3Rpb24gcGllKHgsIHksIHIsIGJlZ2luLCBzcGFuLCBjb2xvciwgY2IpIHsgY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSCwgc3R5bGU6IGtpdC5EaWN0KAoJCQlodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNvbG9yLCBodG1sLkZJTEwsIGNvbG9yLCAiZCIsIGNhbi5iYXNlLmpvaW5zKFsKCQkJCVsiTSIsIHgsIHldLCBbIkwiXS5jb25jYXQocG9zKHgsIHksIHIsIGJlZ2luKSksIFsiQSIsIHIsIHIsICIwIiwgc3Bhbj4xODA/ICIxIjogIjAiLCAiMSJdLmNvbmNhdChwb3MoeCwgeSwgciwgYmVnaW4rc3BhbikpLCBbIloiXQoJCQldLCBpY2UuU1AsIGljZS5GUyksCgkJKSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50KSB9IH0pIH0KCgkJaWYgKHdoaWNoID09IGNhbi5fbGFzdCkgeyByZXR1cm4gfSBjYW4uX2xhc3QgPSB3aGljaAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5zdmcpLCBjYW4uc3ZnLlZhbHVlKG1kYi5DT1VOVCwgMCkKCQl2YXIgdG90YWwgPSAwOyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgdG90YWwgKz0gY2FuLm9uaW1wb3J0Ll9wYXJzZUludChjYW4sIHZhbHVlW2ZpZWxkXSkgfSkKCQl2YXIgYmVnaW4gPSAwOyBtc2dbY2xpLkNPTE9SXSA9IFtdLCBtc2dbIndlaWdodCJdID0gW10sIG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIHNwYW4gPSBjYW4ub25pbXBvcnQuX3BhcnNlSW50KGNhbiwgdmFsdWVbZmllbGRdKS90b3RhbCozNjAKCQkJdmFyIHAgPSBpbmRleD09d2hpY2g/IHBvcyh4LCB5LCBtYXJnaW4sIGJlZ2luK3NwYW4vMik6IFt4LCB5XSwgYyA9IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF0KCgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMSkgewoJCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuQ0lSQ0xFLCBwb2ludDogW3t4OiB4LCB5OiB5fSwge3g6IHgsIHk6IHkrcn1dLCBzdHlsZToge2ZpbGw6IGNvbG9yWzBdfX0pCgkJCX0gZWxzZSB7CgkJCQlwaWUocFswXSwgcFsxXSwgciwgYmVnaW4sIHNwYW4sIGMsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmltcG9ydC5fZHJhdyhjYW4sIG1zZywgZmllbGQsIGNvbG9yLCB4LCB5LCByLCBtYXJnaW4sIGluZGV4KSB9KSwgYmVnaW4gKz0gc3BhbgoJCQl9CgkJCW1zZy5QdXNoKGNsaS5DT0xPUiwgJzxzcGFuIHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOicrYysnIj4gICAgIDwvc3Bhbj4nKQoJCQltc2cuUHVzaCgid2VpZ2h0IiwgcGFyc2VJbnQoc3BhbioxMDAvMzYwKSsiJSIpCgkJCWlmIChpbmRleCA9PSB3aGljaCkgeyBjYW4uU3RhdHVzKHZhbHVlKSwgY2FuLlN0YXR1cygid2VpZ2h0IiwgcGFyc2VJbnQoc3BhbioxMDAvMzYwKSsiJSIpIH0KCQl9KQoJfSwKCV9wYXJzZUludDogZnVuY3Rpb24oY2FuLCB2YWx1ZSkgeyB2YWx1ZSA9IHZhbHVlLnRvTG93ZXJDYXNlKCkKCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgIm1pIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwIH0KCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgImdpIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwMDAwIH0KCQlpZiAoY2FuLmJhc2UuZW5kV2l0aCh2YWx1ZSwgImciKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAibSIpKSB7IHJldHVybiBwYXJzZUludCh2YWx1ZSkqMTAwMDAwMCB9CgkJcmV0dXJuIHBhcnNlSW50KHZhbHVlKQoJfQp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIF9zaG93OiBmdW5jdGlvbihjYW4pIHt9fSkKCl9jYW5fbmFtZSA9ICIvcGx1Z2luL3N0b3J5L3NwaWRlLmpzIgpWb2xjYW5vcyhjaGF0Lk9OSU1QT1JULCB7aGVscDogIuWvvOWFpeaVsOaNriIsIF9pbml0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyk7IGlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gfQoKCQljYW4uQ29uZkRlZmF1bHQoe3Jvb3Q6ICJpY2UiLCBmaWVsZDogbXNnLmFwcGVuZFswXSwgc3BsaXQ6IGljZS5QU30pCgkJY2FuLmRpcl9yb290ID0gbXNnLk9wdGlvbihuZnMuRElSX1JPT1QpfHxjYW4uQ29uZigicm9vdCIpCgkJY2FuLl90cmVlID0gY2FuLm9uaW1wb3J0Ll90cmVlKGNhbiwgbXNnLlRhYmxlKCksIGNhbi5Db25mKG1kYi5GSUVMRCksIGNhbi5Db25mKGxleC5TUExJVCkpCgkJaWYgKCFjYW4uX3RyZWVbIiJdKSB7IHJldHVybiB9IGNhbi5fdHJlZVsiIl0ubmFtZSA9IGNhbi5Db25mKCJyb290IikKCgkJY2FuLnNpemUgPSBwYXJzZUludChjYW4uQWN0aW9uKCJzaXplIil8fDI0KQoJCWNhbi5tYXJnaW4gPSBwYXJzZUludChjYW4uQWN0aW9uKCJtYXJnaW4iKXx8MzApCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAiZHJhdyIpCgkJY2FuLnJlcXVpcmUoWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQl9KQoJfSwKCV90cmVlOiBmdW5jdGlvbihjYW4sIGxpc3QsIGZpZWxkLCBzcGxpdCkgewoJCXZhciBub2RlID0ge307IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpZiAoIWl0ZW1bZmllbGRdKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLkxpc3QoY2FuLmJhc2UudHJpbVByZWZpeChpdGVtW2ZpZWxkXSwgY2FuLmRpcl9yb290K3NwbGl0KS5zcGxpdChzcGxpdCksIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsKCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpfHwiIiwgbmFtZSA9IGFycmF5LnNsaWNlKDAsIGluZGV4KzEpLmpvaW4oc3BsaXQpCgkJCQlpZiAoIXZhbHVlIHx8IG5vZGVbbmFtZV0pIHsgcmV0dXJuIH0KCgkJCQlub2RlW2xhc3RdID0gbm9kZVtsYXN0XXx8e25hbWU6IGxhc3QsIG1ldGE6IHt9LCBsaXN0OiBbXX0KCQkJCW5vZGVbbGFzdF0ubGlzdC5wdXNoKG5vZGVbbmFtZV0gPSB7CgkJCQkJbmFtZTogdmFsdWUrKGluZGV4PT1hcnJheS5sZW5ndGgtMT8gIiI6IHNwbGl0KSwKCQkJCQltZXRhOiBpdGVtLCBsaXN0OiBbXSwgbGFzdDogbm9kZVtsYXN0XSwKCQkJCQlmaWxlOiBpdGVtW2ZpZWxkXXx8aXRlbS5maWxlLCBoaWRlOiB0cnVlLAoJCQkJfSkKCQkJfSkKCQl9KQoJCXJldHVybiBub2RlCgl9LAoJX2hlaWdodDogZnVuY3Rpb24oY2FuLCB0cmVlLCBkZWVwKSB7IGlmICghdHJlZSkgeyByZXR1cm4gMCB9CgkJdHJlZS5kZWVwID0gZGVlcHx8MAoJCWlmICh0cmVlLmxpc3QubGVuZ3RoID09IDAgfHwgdHJlZS5oaWRlKSB7IHJldHVybiB0cmVlLmhlaWdodCA9IDEgfQoKCQl2YXIgaGVpZ2h0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaGVpZ2h0ICs9IGNhbi5vbmltcG9ydC5faGVpZ2h0KGNhbiwgaXRlbSwgKGRlZXB8fDApKzEpCgkJfSkKCQlyZXR1cm4gdHJlZS5oZWlnaHQgPSBoZWlnaHQKCX0sCglfd2lkdGg6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgZGVlcCkgeyBpZiAoIXRyZWUpIHsgcmV0dXJuIDAgfQoJCXRyZWUuZGVlcCA9IGRlZXB8fDAKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA9PSAwIHx8IHRyZWUuaGlkZSkgewoJCQl0cmVlLnZpZXcgPSBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IGh0bWwuVEVYVCwgcG9pbnQ6IFt7eDogMCwgeTogMH1dLCBzdHlsZToge2lubmVyOiB0cmVlLm5hbWV9fSkKCQkJcmV0dXJuIHRyZWUud2lkdGggPSB0cmVlLnZpZXcuVmFsKCJ0ZXh0TGVuZ3RoIikrY2FuLm1hcmdpbgoJCX0KCgkJdmFyIHdpZHRoID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJd2lkdGggKz0gY2FuLm9uaW1wb3J0Ll93aWR0aChjYW4sIGl0ZW0sIChkZWVwfHwwKSsxKQoJCX0pCgkJcmV0dXJuIHRyZWUud2lkdGggPSB3aWR0aAoJfSwKCV9jb2xvcjogZnVuY3Rpb24oY2FuLCB0cmVlKSB7CgkJcmV0dXJuIHRyZWUubWV0YSYmdHJlZS5tZXRhLmNvbG9yIHx8ICh0cmVlLmxpc3QgPT0gMD8gY2xpLlBVUlBMRTogY2xpLllFTExPVykKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBwID0gY2FuLkFjdGlvbihpY2UuVklFVywgY2FuLnN1cC52aWV3fHxjYW4uQWN0aW9uKGljZS5WSUVXKSkKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLnJlcXVlc3QoKSkKCQljYW4uc3ZnLlZhbChodG1sLkZPTlRfU0laRSwgY2FuLkFjdGlvbigic2l6ZSIpKQoJCWNhbi5vbmFjdGlvbltwXShldmVudCwgY2FuLCBwKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnlKjmiLfmk43kvZwiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi5qiq5ZCRIiwgIue6teWQkSJdLCBbInNpemUiLCAyNCwgMzIsIDQ4XSwgWyJtYXJnaW4iLCAzMCwgNTAsIDEwMF0sCgldLAoJc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2l6ZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNpemUiKXx8MzApLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCW1hcmdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFyZ2luID0gcGFyc2VJbnQoY2FuLkFjdGlvbigibWFyZ2luIil8fDMwKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgki5qiq5ZCRIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uaW1wb3J0Ll9oZWlnaHQoY2FuLCBjYW4uX3RyZWVbIiJdKQoJCWNhbi5zdXAudmlldyA9IGJ1dHRvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZykKCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGNhbi5fdHJlZVsiIl0uaGVpZ2h0KmNhbi5tYXJnaW4rMipjYW4ubWFyZ2luKQoJCWNhbi53aWR0aCA9IDAsIGNhbi5vbmFjdGlvbi5fZHJhd19ob3Jpem9udGFsKGNhbiwgY2FuLl90cmVlWyIiXSwgY2FuLm1hcmdpbiwgY2FuLm1hcmdpbikKCQljYW4uc3ZnLlZhbChodG1sLldJRFRILCBjYW4ud2lkdGgrY2FuLm1hcmdpbikKCX0sCgki57q15ZCRIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uaW1wb3J0Ll93aWR0aChjYW4sIGNhbi5fdHJlZVsiIl0pCgkJY2FuLnN1cC52aWV3ID0gYnV0dG9uLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uc3ZnKQoKCQljYW4uc3ZnLlZhbChodG1sLldJRFRILCBjYW4uX3RyZWVbIiJdLndpZHRoKzIqY2FuLm1hcmdpbikKCQljYW4uaGVpZ2h0ID0gMCwgY2FuLm9uYWN0aW9uLl9kcmF3X3ZlcnRpY2FsKGNhbiwgY2FuLl90cmVlWyIiXSwgY2FuLm1hcmdpbiwgY2FuLm1hcmdpbitjYW4ubWFyZ2luKQoJCWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hULCBjYW4uaGVpZ2h0K2Nhbi5tYXJnaW4pCgl9LAoJX2RyYXc6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSwgc3R5bGUpIHsgdmFyIGNvbG9yID0gY2FuLm9uaW1wb3J0Ll9jb2xvcihjYW4sIHRyZWUpCgkJdHJlZS52aWV3ID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBodG1sLlRFWFQsIHBvaW50OiBbe3g6IHgsIHk6IHl9XSwgc3R5bGU6IGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCWh0bWwuU1RST0tFLCBjb2xvciwgaHRtbC5GSUxMLCBjb2xvciwgaHRtbC5URVhUX0FOQ0hPUiwgInN0YXJ0IiwgImlubmVyIiwgdHJlZS5uYW1lfHx0cmVlLmZpbGUsCgkJKSwgc3R5bGUpLCB9KSwgY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgdHJlZS52aWV3LCBjYW4sIHRyZWUpCgl9LAoJX2RyYXdfdmVydGljYWw6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSkgeyB0cmVlLnggPSB4LCB0cmVlLnkgPSB5CgkJY2FuLm9uYWN0aW9uLl9kcmF3KGNhbiwgdHJlZSwgeCt0cmVlLndpZHRoLzIsIHksIGtpdC5EaWN0KGh0bWwuVEVYVF9BTkNIT1IsICJtaWRkbGUiKSkKCgkJdHJlZS5oZWlnaHQgPSBjYW4ubWFyZ2luCgkJaWYgKHkrdHJlZS5oZWlnaHQgPiBjYW4uaGVpZ2h0KSB7IGNhbi5oZWlnaHQgPSB5K3RyZWUuaGVpZ2h0IH0KCQlpZiAodHJlZS5oaWRlKSB7IHJldHVybiB9CgoJCXZhciBvZmZzZXQgPSAwOyBjYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRIMlYsIHBvaW50OiBbCgkJCQl7eDogeCt0cmVlLndpZHRoLzIsIHk6IHkrdHJlZS5oZWlnaHQtY2FuLm1hcmdpbi8yfSwKCQkJCXt4OiB4K29mZnNldCtpdGVtLndpZHRoLzIsIHk6IHkrdHJlZS5oZWlnaHQrY2FuLm1hcmdpbi8yfSwKCQkJXSwgc3R5bGU6IHtzdHJva2U6IGNsaS5DWUFOfX0pCgoJCQljYW4ub25hY3Rpb24uX2RyYXdfdmVydGljYWwoY2FuLCBpdGVtLCB4K29mZnNldCwgeSt0cmVlLmhlaWdodCtjYW4ubWFyZ2luKQoJCQlvZmZzZXQgKz0gaXRlbS53aWR0aAoJCX0pCgl9LAoJX2RyYXdfaG9yaXpvbnRhbDogZnVuY3Rpb24oY2FuLCB0cmVlLCB4LCB5KSB7IHRyZWUueCA9IHgsIHRyZWUueSA9IHkKCQljYW4ub25hY3Rpb24uX2RyYXcoY2FuLCB0cmVlLCB4LCB5K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMiwga2l0LkRpY3QoaHRtbC5URVhUX0FOQ0hPUiwgInN0YXJ0IikpCgoJCXRyZWUud2lkdGggPSB0cmVlLnZpZXcuVmFsKCJ0ZXh0TGVuZ3RoIil8fCh0cmVlLm5hbWV8fCIiKS5sZW5ndGgqMTAKCQlpZiAoeCt0cmVlLndpZHRoID4gY2FuLndpZHRoKSB7IGNhbi53aWR0aCA9IHgrdHJlZS53aWR0aCB9CgkJaWYgKHRyZWUuaGlkZSkgeyByZXR1cm4gfQoKCQl2YXIgb2Zmc2V0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSDJILCBwb2ludDogWwoJCQkJe3g6IHgrdHJlZS53aWR0aCtjYW4ubWFyZ2luLzgsIHk6IHkrdHJlZS5oZWlnaHQqY2FuLm1hcmdpbi8yfSwKCQkJCXt4OiB4K3RyZWUud2lkdGgrY2FuLm1hcmdpbioyLTIqY2FuLm1hcmdpbi84LCB5OiB5K29mZnNldCtpdGVtLmhlaWdodCpjYW4ubWFyZ2luLzJ9CgkJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuQ1lBTn19KQoKCQkJY2FuLm9uYWN0aW9uLl9kcmF3X2hvcml6b250YWwoY2FuLCBpdGVtLCB4K3RyZWUud2lkdGgrMipjYW4ubWFyZ2luLCB5K29mZnNldCkKCQkJb2Zmc2V0ICs9IGl0ZW0uaGVpZ2h0KmNhbi5tYXJnaW4KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCB0cmVlKSB7IHZhciB5ID0gdHJlZS55K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMgoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5wb3MpLCBjYW4ucG9zID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUkVDVCwgcG9pbnQ6IFsKCQkJe3g6IHRyZWUueC1jYW4ubWFyZ2luLzQsIHk6IHktY2FuLm1hcmdpbi8yfSwge3g6IHRyZWUueCt0cmVlLndpZHRoK2Nhbi5tYXJnaW4vOCwgeTogeStjYW4ubWFyZ2luLzJ9LAoJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuUkVELCBmaWxsOiBodG1sLk5PTkV9fSksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRyZWUpIHsKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA+IDAgfHwgdHJlZS50YWdzIHx8IHRyZWUubmFtZS5lbmRzV2l0aChjYW4uQ29uZihsZXguU1BMSVQpKSkgewoJCQlyZXR1cm4gdHJlZS5oaWRlID0gIXRyZWUuaGlkZSwgY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXShldmVudCwgY2FuKQoJCX0KCgkJZm9yICh2YXIgbm9kZSA9IHRyZWU7IG5vZGU7IG5vZGUgPSBub2RlLmxhc3QpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIG5vZGUubWV0YSkgfQoKCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpLCBjYW4uYmFzZS5PYmooY2FuLkNvbmYobGV4LlBSRUZJWCksIFtdKS5jb25jYXQoW2Nhbi5PcHRpb24oInJlcG9zIil8fCIiLCB0cmVlLmZpbGV8fCIiLCB0cmVlLm5hbWVdKSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gY2FuLm9uZGV0YWlsLnBsdWdpbihjYW4sICJ3ZWIuY29kZS5pbm5lciIsIFtjYW4uZGlyX3Jvb3QsIHRyZWUuZmlsZSwgdHJlZS5saW5lXSwgY29kZS5JTk5FUikgfQoJCQlpZiAobXNnLkFwcGVuZChtZGIuSU5ERVgpKSB7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyBjYW4ub25kZXRhaWwucGx1Z2luKGNhbiwgdmFsdWUuaW5kZXgsIFtdKSB9KTsgcmV0dXJuIH0KCgkJCWlmIChtc2cuT3B0aW9uKGxleC5TUExJVCkpIHsKCQkJCXRyZWUubGlzdCA9IGNhbi5vbmltcG9ydC5fdHJlZShjYW4sIG1zZy5UYWJsZSgpLCBtc2cuT3B0aW9uKG1kYi5GSUVMRCl8fG1zZy5hcHBlbmRbMF0sIG1zZy5PcHRpb24obGV4LlNQTElUKSlbIiJdLmxpc3R8fFtdCgkJCQljYW4uY29yZS5MaXN0KHRyZWUubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLmxhc3QgPSB0cmVlIH0pCgkJCX0gZWxzZSB7CgkJCQltc2cuVGFibGUoZnVuY3Rpb24oaXRlbSkgeyB0cmVlLmxpc3QucHVzaCh7CgkJCQkJdHlwZTogInRhZ3MiLCBuYW1lOiBpdGVtLm5hbWV8fGl0ZW0uZmlsZXx8aXRlbVttc2cuYXBwZW5kWzBdXSwKCQkJCQltZXRhOiBpdGVtLCBsaXN0OiBbXSwgbGFzdDogdHJlZSwKCQkJCQlmaWxlOiBpdGVtLmZpbGUsIGxpbmU6IGl0ZW0ubGluZSwgaGlkZTogdHJ1ZSwKCQkJCX0pIH0pCgkJCX0KCQkJdHJlZS50YWdzID0gdHJ1ZSwgdHJlZS5oaWRlID0gIXRyZWUuaGlkZSwgY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXShldmVudCwgY2FuKQoJCX0sIHRydWUpCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGluZGV4LCBhcmdzLCBwcmVmaXgpIHsKCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuRkxPQVQsIGluZGV4OiBpbmRleCwgYXJnczogYXJncywgbW9kZTogImZsb2F0In0sIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBwcmVmaXh8fFtpY2UuUlVOLCBpbmRleF0sIGNtZHMsIGNiKSB9CgkJCXN1Yi5Nb2RlKCJmbG9hdCIpLCBjYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsgbGVmdCA9IGxlZnR8fDAKCQkJCXZhciB0b3AgPSBjYW4uTW9kZSgpID09IHVuZGVmaW5lZD8gMTIwOiAwOyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgdG9wID0gY2FuLnVzZXIuaXNMYW5kc2NhcGUoKT8gMDogNDggfQoJCQkJc3ViLkNvbmZIZWlnaHQoaGVpZ2h0LXRvcC0yKmh0bWwuQUNUSU9OX0hFSUdIVC0oY2FuLnVzZXIuaXNNb2JpbGUmJiFjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAyKmh0bWwuQUNUSU9OX0hFSUdIVDogMCkpLCBzdWIuQ29uZldpZHRoKHdpZHRoKQoJCQkJY2FuLm9ubW90aW9uLm1vdmUoY2FuLCBzdWIuX3RhcmdldCwge3Bvc2l0aW9uOiBodG1sLkZJWEVELCBsZWZ0OiBsZWZ0LCB0b3A6IHRvcH0pCgkJCX0pCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS90cmVuZC5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbigiYnJhbmNoIikpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4uZGF0YSA9IG1zZy5UYWJsZSgpLCBjYW4ub25pbXBvcnQuX3N1bShjYW4pCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgcGFyc2VJbnQobXNnLk9wdGlvbihodG1sLlNQRUVEKXx8IjEwMCIpKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJkcmF3IikKCQljYW4ucmVxdWlyZShbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIiwgIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCX0pCgl9LAoJX3N1bTogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIGJlZ2luID0gIiIsIGNvdW50ID0gMCwgcmVzdCA9IDAsIGFkZCA9IDAsIGRlbCA9IDAsIG1heCA9IDAKCQljYW4ubWF4ID0gMCwgY2FuLm1pbiA9IDAsIGNhbi5saXN0ID0gY2FuLmNvcmUuTGlzdChjYW4uZGF0YSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CgkJCXZhciBsaW5lID0gewoJCQkJZGF0ZTogdmFsdWVbY2FuLl9tc2cuYXBwZW5kWzBdXSwKCQkJCXRleHQ6IHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFs0XV0sCgkJCQlhZGQ6IHBhcnNlSW50KHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFsxXV0pLAoJCQkJZGVsOiBwYXJzZUludCh2YWx1ZVtjYW4uX21zZy5hcHBlbmRbMl1dKSwKCQkJfQoKCQkJbGluZS5iZWdpbiA9IHJlc3QKCQkJbGluZS5tYXggPSByZXN0ICsgbGluZS5hZGQKCQkJbGluZS5taW4gPSByZXN0IC0gbGluZS5kZWwKCQkJbGluZS5jbG9zZSA9IHJlc3QgKyBsaW5lLmFkZCAtIGxpbmUuZGVsCgoJCQliZWdpbiA9IGJlZ2luIHx8IHZhbHVlLmRhdGUsIGNvdW50KysKCQkJcmVzdCA9IGxpbmUuY2xvc2UsIGFkZCArPSBsaW5lLmFkZCwgZGVsICs9IGxpbmUuZGVsCgoJCQlpZiAobGluZS5tYXggLSBsaW5lLm1pbiA+IG1heCkgeyBtYXggPSBsaW5lLm1heCAtIGxpbmUubWluIH0KCQkJaWYgKGxpbmUubWF4ID4gY2FuLm1heCkgeyBjYW4ubWF4ID0gbGluZS5tYXggfQoJCQlpZiAobGluZS5taW4gPCBjYW4ubWluKSB7IGNhbi5taW4gPSBsaW5lLm1pbiB9CgkJCXJldHVybiBsaW5lCgkJfSkKCQljYW4uU3RhdHVzKHsiZnJvbSI6IGJlZ2luLCAiY29tbWl0IjogY291bnQsICJ0b3RhbCI6IGFkZCtkZWwsICJtYXgiOiBtYXh9KQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBoZWlnaHQgPSBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbikKCQl2YXIgd2lkdGggPSBwYXJzZUludChjYW4uQ29uZldpZHRoKCkpLCBzcGFjZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNwYWNlIil8fCIxMCIpCgkJdmFyIHN0ZXAgPSBwYXJzZUludCgod2lkdGgtMipzcGFjZSkgLyBjYW4ubGlzdC5sZW5ndGgpCgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9tc2cpCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGhlaWdodCksIGNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIHdpZHRoKQoJCXJldHVybiB7aGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCwgc3BhY2U6IHNwYWNlLCBzdGVwOiBzdGVwfQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXSh7fSwgY2FuKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi6LaL5Yq/5Zu+IiwgIuafseeKtuWbviIsICLmlbDmja7mupAiXSwKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJWyJzcGFjZSIsIDEwLCAyMCwgNTAsIDEwMF0sCgkJW2h0bWwuU1BFRUQsIDEwLCAyMCwgNTAsIDEwMF0sCgldLAoJIui2i+WKv+WbviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGFyZ3MgPSBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pCgkJZnVuY3Rpb24gc2NhbGUoeSkgeyByZXR1cm4gKHkgLSBjYW4ubWluKS8oY2FuLm1heCAtIGNhbi5taW4pKihhcmdzLmhlaWdodC0yKmFyZ3Muc3BhY2UpIH0KCQlmdW5jdGlvbiBvcmRlcihpbmRleCwgeCwgeSkgeyByZXR1cm4ge3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3gsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoeSl9IH0KCgkJdmFyIGJsYWNrID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLkJMQUNLLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLkJMQUNLLCBodG1sLkZJTEwsIGNsaS5CTEFDSykpCgkJdmFyIHdoaXRlID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLldISVRFLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLldISVRFLCBodG1sLkZJTEwsIGNsaS5XSElURSkpCgoJCWNhbi5jb3JlLk5leHQoY2FuLmxpc3QsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGNhbi5TdGF0dXMobGluZSkKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuTElORSwgcG9pbnQ6IFsKCQkJCW9yZGVyKGluZGV4LCBhcmdzLnN0ZXAvMiwgbGluZS5taW4pLCBvcmRlcihpbmRleCwgYXJncy5zdGVwLzIsIGxpbmUubWF4KSwKCQkJXX0sIGxpbmUuYmVnaW4gPCBsaW5lLmNsb3NlPyB3aGl0ZTogYmxhY2spCgoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5SRUNULCBwb2ludDogWwoJCQkJb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80LCBsaW5lLmNsb3NlKSwgb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80KjMsIGxpbmUuYmVnaW4pLAoJCQldLCBfaW5pdDogZnVuY3Rpb24odmlldykgewoJCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgZnVuY3Rpb24oa2V5LCBjYikgeyB2aWV3W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuLCBsaW5lKSB9IH0pCgkJCX19LCBsaW5lLmJlZ2luIDwgbGluZS5jbG9zZT8gd2hpdGU6IGJsYWNrKQoKCQkJY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJfSkKCX0sCgki5p+x54q25Zu+IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYXJncyA9IGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbikKCQl2YXIgbWF4ID0ge30sIG1pbiA9IHt9OyBjYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCB3aGljaCkgewoJCQljYW4uY29yZS5MaXN0KGNhbi5kYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKCQkJCXZhciB2ID0gcGFyc2VJbnQodmFsdWVba2V5XSl8fDA7IGlmIChpbmRleCA9PSAwKSB7CgkJCQkJcmV0dXJuIG1heFtrZXldID0gdiwgbWluW2tleV0gPSB2CgkJCQl9CgkJCQlpZiAodiA+IG1heFtrZXldKSB7IG1heFtrZXldID0gdiB9CgkJCQlpZiAodiA8IG1pbltrZXldKSB7IG1pbltrZXldID0gdiB9CgkJCX0pCgkJfSkKCgkJZnVuY3Rpb24gc2NhbGUoa2V5LCB5KSB7IHJldHVybiAoeSAtIG1pbltrZXldKS8obWF4W2tleV0gLSBtaW5ba2V5XSkqKGFyZ3MuaGVpZ2h0LTIqYXJncy5zcGFjZSkgfQoKCQl2YXIgd2lkdGggPSBhcmdzLnN0ZXAvY2FuLl9tc2cuYXBwZW5kLmxlbmd0aCwgd2hpY2ggPSAwCgkJY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgd2hpY2gpIHsgaWYgKG1heFtrZXldID09IG1pbltrZXldKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLk5leHQoY2FuLmRhdGEsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGlmIChwYXJzZUludChsaW5lW2tleV0pID09IDApIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKndoaWNoKzIsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoa2V5LCBwYXJzZUludChsaW5lW2tleV0pKX0sCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKih3aGljaCsxKSsyLCB5OiBhcmdzLmhlaWdodC1hcmdzLnNwYWNlfSwKCQkJCV0sIHN0eWxlOiBraXQuRGljdChodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNsaS5XSElURSwgaHRtbC5GSUxMLCBjbGkuV0hJVEUsIHN2Zy5SWCwgMCwgc3ZnLlJZLCAwKSwgX2luaXQ6IGZ1bmN0aW9uKHZpZXcpIHsKCQkJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCBmdW5jdGlvbihrZXksIGNiKSB7IHZpZXdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4sIGxpbmUpIH0gfSkKCQkJCX19KSwgY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJCX0pLCB3aGljaCsrCgkJfSkKCX0sCgki5pWw5o2u5rqQIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIGNhbi5fbXNnLCBudWxsLCBjYW4uX291dHB1dCkKCX0sCgoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJc3BhY2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGNhbi5TdGF0dXMobGluZSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbImZyb20iLCAiY29tbWl0IiwgInRvdGFsIiwgIm1heCIsICJkYXRlIiwgInRleHQiLCAiYWRkIiwgImRlbCJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJaWYgKGhlaWdodCA9PSBpY2UuQVVUTykgeyBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCS8vIGNhbi5pc0Z1bGxNb2RlKCkgfHwgKGhlaWdodCA9IGNhbi5iYXNlLk1heChjYW4uQ29uZkhlaWdodCgpLCA2MDApKQoJCX0KCQlpZiAoaGVpZ2h0IDwgMjAwKSB7IGhlaWdodCA9IDIwMCB9CgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodHx8Y2FuLl9yb290Ll9oZWlnaHQvMikKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi9zdG9yeS92aWRlby5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuc2VsZWN0KGNhbiwgbXNnKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5wbGF5KGV2ZW50LCBjYW4pIH0pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsICJ0ZCBhIiwgZnVuY3Rpb24oYSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBhLCB7dGFyZ2V0OiAiIn0pCgkJfSkKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLkNsZWFyKCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uT3B0aW9uKCJ0YWdzIiksIGZ1bmN0aW9uKGEsIGluZGV4KSB7CgkJCW1zZy5QdXNoKG1kYi5JTkRFWCwgaW5kZXgpCgkJCW1zZy5QdXNoKG1kYi5OQU1FLCBhLmlubmVyVGV4dCkKCQkJbXNnLlB1c2gobWRiLkxJTkssIGEuaHJlZikKCQkJYS5ocmVmID09IGxvY2F0aW9uLmhyZWYgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGkpIHsKCQkJCQlpLTEgPT0gaW5kZXggJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCAic2VsZWN0IikKCQkJCX0pCgkJCX0pCgkJfSkKCQltc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTLCBKU09OLnN0cmluZ2lmeShbCgkJCXtuYW1lOiAidGltZSIsIHZhbHVlOiBjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpfSwKCQkJe25hbWU6ICJjb3VudCIsIHZhbHVlOiBtc2cuTGVuZ3RoKCl9LAoJCV0pKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2cKCQltc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgpIHsKCQkJaWYgKGxpbmUubGluayA9PSBsb2NhdGlvbi5ocmVmKSB7CgkJCQlsb2NhdGlvbi5ocmVmID0gbXNnLmxpbmtbaW5kZXgrMV0KCQkJfQoJCX0pCgl9LAoJcGxheTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBodG1sLlZJREVPLCBmdW5jdGlvbih2aWRlbykgewoJCQl2aWRlby5wbGF5YmFja1JhdGUgPSBwYXJzZUZsb2F0KGNhbi5PcHRpb24oInJhdGUiKSkKCQkJdmlkZW8uY3VycmVudFRpbWUgPSBwYXJzZUludChjYW4uT3B0aW9uKCJza2lwIikpCgkJCXZpZGVvLm9udGltZXVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAodmlkZW8uY3VycmVudFRpbWUgPiBwYXJzZUludChjYW4uT3B0aW9uKCJuZXh0IikpKSB7CgkJCQkJY2FuLm9uYWN0aW9uLm5leHQoZXZlbnQsIGNhbikKCQkJCX0KCQkJfSwgdmlkZW8ucGxheSgpLCB2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpCgkJfSkKCX0sCn0pCgpfY2FuX25hbWUgPSAiL3BsdWdpbi90YWJsZS5qcyIKVm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJdmFyIGNicyA9IGNhbi5vbmltcG9ydFtjYW4uQ29uZihjdHguU1RZTEUpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYnMpKSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNhbi5fYXJnc1tjdHguU1RZTEVdKQoJCQljYW4uY29yZS5DYWxsRnVuYyhjYnMsIHsKCQkJCWNhbjogY2FuLCBtc2c6IG1zZywgdGFyZ2V0OiB0YXJnZXQsCgkJCQlsaXN0OiBtc2cuVGFibGUoKSwKCQkJfSkKCQkJcmV0dXJuIGNicyhjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdGFyZ2V0KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCgl6b25lOiBmdW5jdGlvbihjYW4sIGxpc3QsIHRhcmdldCkgeyB2YXIgY29sb3IgPSBbIiJdCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih6b25lLCBpbmRleCkgeyBjYW4uYmFzZS5pc1N0cmluZyh6b25lKSAmJiAoem9uZSA9IHtuYW1lOiB6b25lfSk7IHJldHVybiB6b25lICYmIHt2aWV3OiBodG1sLlpPTkUrIiAiK3pvbmUubmFtZSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5OQU1FLCBpbm5lcjogY2FuLnVzZXIudHJhbnMoY2FuLCB6b25lLm5hbWUpLCBzdHlsZToge2JhY2tncm91bmQ6IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF19LCBvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB6b25lLl9hY3Rpb24pLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgem9uZS5fdGFyZ2V0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl6b25lLl9tZW51PyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHpvbmUuX21lbnUubWV0YSwgem9uZS5fbWVudS5saXN0fHxjYW4uY29yZS5JdGVtKHpvbmUuX21lbnUubWV0YSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJCQkobWV0YVtidXR0b25dfHxjYW4ub25hY3Rpb25bYnV0dG9uXSkoZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQkJfSk6IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJCSLmipjlj6AiOiBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9MSVNULCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBmYWxzZSkgfSkgfSwKCQkJCQki5bGV5byAIjogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHpvbmUuX3RhcmdldCwgaHRtbC5ESVZfTElTVCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgdHJ1ZSkgfSkgfSwKCQkJCQki5Yi35pawIjogZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHpvbmUuX3RhcmdldCksIHpvbmUuX2luaXQoem9uZS5fdGFyZ2V0KSB9LAoJCQkJfSwgWyLmipjlj6AiLCAi5bGV5byAIiwgIuWIt+aWsCJdKQoJCQl9fSwKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHpvbmUuX2FjdGlvbiA9IHRhcmdldAoJCQkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbe2lucHV0OiBodG1sLlRFWFQsIHBsYWNlaG9sZGVyOiAic2VhcmNoIiwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0xJU1QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIHRydWUpIH0pCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJkaXYubmFtZSIsIGZ1bmN0aW9uKG5hbWUpIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIG5hbWUuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB9KQoJCQkJCX0pCgkJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgem9uZS5fc2VhcmNoID0gdGFyZ2V0CgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCB0YXJnZXQsIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5vZmZzZXRXaWR0aC0zMikgfSkKCQkJCQkvLyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge25hbWU6IHpvbmUubmFtZX0sIHRhcmdldCkKCQkJCX19XSwgdGFyZ2V0LCB7fSkKCQkJfX0sCgkJCXt2aWV3OiBodG1sLkxJU1QsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnVpW3pvbmUubmFtZV0gPSB6b25lCgkJCQl6b25lLl90YXJnZXQgPSB0YXJnZXQsIHpvbmUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCB6b25lLl9pbml0KHRhcmdldCkgfQoJCQkJY2FuLmJhc2UuaXNGdW5jKHpvbmUuX2luaXQpICYmIHpvbmUuX2luaXQodGFyZ2V0LCB6b25lKQoJCQl9fQoJCV19IH0pKQoJfSwKCXRyZWU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgZmllbGQsIHNwbGl0LCBjYiwgdGFyZ2V0LCBub2RlKSB7CgkJbm9kZSA9IG5vZGV8fHsiIjogdGFyZ2V0fTsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW1bZmllbGRdICYmIGNhbi5jb3JlLkxpc3QoaXRlbVtmaWVsZF0uc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IGlmICghdmFsdWUpIHsgcmV0dXJuIH0KCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpLCBuYW1lID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgrMSkuam9pbihzcGxpdCkKCQkJCWlmIChub2RlW25hbWVdKSB7IHJldHVybiB9CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlW2xhc3RdLCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogW3t2aWV3OiBbInN3aXRjaCIsICJkaXYiLCAoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiImIzg5NjM7IildfSwge3ZpZXc6IFsibmFtZSIsIGh0bWwuRElWLCB2YWx1ZSsoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiIiKV0sIF9pbml0OiBpdGVtLl9pbml0fV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaW5kZXggPCBhcnJheS5sZW5ndGggLSAxPyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbm9kZVtuYW1lXSwgZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aVsic3dpdGNoIl0sICJvcGVuIikKCQkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHVpWyJzd2l0Y2giXSwgIm9wZW4iKQoJCQkJCX0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtKQoJCQkJCWlmIChub2RlW25hbWVdLmNoaWxkRWxlbWVudENvdW50ID09IDIpIHsgbm9kZVtuYW1lXS5maXJzdENoaWxkLmNsaWNrKCkgfQoJCQkJfX0sIHt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfSwgX2luaXQ6IGZ1bmN0aW9uKGxpc3QpIHsgaXRlbS5leHBhbmQgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBsaXN0LCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spIH19XSkKCQkJCW5vZGVbbmFtZV0gPSB1aS5saXN0CgkJCX0pCgkJfSk7IHJldHVybiBub2RlCgl9LAoJbGlzdDogZnVuY3Rpb24oY2FuLCByb290LCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4uY29yZS5MaXN0KHJvb3QubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0pIHx8IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQl9fSwge3ZpZXc6IGh0bWwuTElTVH1dKTsgY2FuLm9uaW1wb3J0Lmxpc3QoY2FuLCBpdGVtLCBjYiwgdWkubGlzdCkKCQl9KQoJfSwKCWl0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgY2IsIGNicywgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8KGNhbi51aSAmJiBjYW4udWkucHJvamVjdD8gY2FuLnVpLnByb2plY3Q6IGNhbi5fb3V0cHV0KQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uaWNrfHxpdGVtLm5hbWVdLAoJCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgdWkuZmlyc3QsIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGh0bWwuSVRFTSksIHVpLmZpcnN0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhldmVudCwgdWkuZmlyc3QpIH0sCgkJfV0pOyByZXR1cm4gdWkuZmlyc3QKCX0sCglpdGVtbGlzdDogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0Ll9saXN0ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2IoZXZlbnQsIGl0ZW0sIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYnMoZXZlbnQsIGl0ZW0pIH19CgkJfSkgfV0sIHRhcmdldC5uZXh0U2libGluZywgdGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCBhY3Rpb24sIGVhY2gpIHsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBhY3Rpb24sIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odGFicykgewoJCQlyZXR1cm4ge3RleHQ6IFt0YWJzLm5hbWUsIGh0bWwuRElWLCBodG1sLlRBQlNdLCB0aXRsZTogdGFicy50ZXh0LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgdGFicykKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWZ1bmN0aW9uIGNsb3NlKGl0ZW0pIHsgdmFyIG5leHQgPSBpdGVtLm5leHRTaWJsaW5nfHxpdGVtLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkKCQkJCQlpZiAobmV4dCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoaXRlbS5fbWV0YSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pIH0KCQkJCX0KCQkJCXZhciBtZW51ID0gdGFicy5fbWVudXx8c2h5KHt9LCBbXSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgeyAobWV0YVtidXR0b25dKShldmVudCwgY2FuLCBidXR0b24pIH0pCgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpdGVtLCB7ZHJhZ2dhYmxlOiB0cnVlLCBfY2xvc2U6IGZ1bmN0aW9uKCkgeyBjbG9zZShpdGVtKSB9LCBfbWV0YTogdGFicywKCQkJCQlvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCQkJCSJDbG9zZSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNsb3NlKGl0ZW0pIH0sCgkJCQkJCSJDbG9zZSBvdGhlcnMiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGZ1bmN0aW9uKF9pdGVtKSB7IF9pdGVtID09IGl0ZW0gfHwgY2xvc2UoX2l0ZW0pIH0pIH0sCgkJCQkJCSJDbG9zZSBhbGwiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGNsb3NlKSB9LAoJCQkJCSksIG1lbnUubWV0YSksIFsiQ2xvc2UiLCAiQ2xvc2Ugb3RoZXJzIiwgIkNsb3NlIGFsbCIsICIiXS5jb25jYXQobWVudS5saXN0KSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQkJCQltZW51KGV2ZW50LCBidXR0b24sIG1ldGEpCgkJCQkJfSkgfSwKCQkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgYWN0aW9uLl9kcm9wID0gZnVuY3Rpb24oYmVmb3JlKSB7IGFjdGlvbi5pbnNlcnRCZWZvcmUoZXZlbnQudGFyZ2V0LCBiZWZvcmUpIH0gfSwKCQkJCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBhY3Rpb24uX2Ryb3AoZXZlbnQudGFyZ2V0KSB9LAoJCQkJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgYWN0aW9uLl9kcm9wKGV2ZW50LnRhcmdldCkgfSwKCQkJCX0pCgkJCQljYW4uYmFzZS5pc0Z1bmMoZWFjaCkgJiYgZWFjaChpdGVtKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGl0ZW0uY2xpY2soKSB9KQoJCQl9fQoJCX0pKS5maXJzdAoJfSwKCWNhcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt2aWV3OiBodG1sLklURU0rIiAiKyh2YWx1ZS5zdGF0dXN8fCIiKSwgbGlzdDogWwoJCQkJe3ZpZXc6IFt3aWtpLlRJVExFLCBodG1sLkRJViwgdmFsdWUubmFtZV19LAoJCQkJe3ZpZXc6IFt3aWtpLkNPTlRFTlQsIGh0bWwuRElWLCB2YWx1ZS50ZXh0XX0sCgkJCQl7dmlldzogaHRtbC5BQ1RJT04sIGlubmVyOiB2YWx1ZS5hY3Rpb24sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgdmFsdWUpLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdKQoJCQkJfX0sCgkJCV19CgkJfSkpCgl9LAoJcGx1ZzogZnVuY3Rpb24oY2FuLCBtZXRhLCB0YXJnZXQsIGNiKSB7IGlmICghbWV0YSB8fCAhbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCW1ldGEudHlwZSA9ICJwbHVnIiwgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIG1ldGEsIGZ1bmN0aW9uKHN1YikgeyBzdWIuc3VwID0gY2FuCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIG1ldGEuaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4udWkgJiYgdGFyZ2V0ID09IGNhbi51aS5wcm9maWxlPyBjYW4ub25tb3Rpb24uaGlkZGVuKHN1YiwgdGFyZ2V0KTogY2FuLm9ubW90aW9uLmhpZGRlbihzdWIsIHN1Yi5fdGFyZ2V0KSB9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvZnJhbWUuanMiClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi5pCc57Si5byV5pOOIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgY2IsIHRhcmdldCkgewoJCWlmIChjYW4ubWlzYy5TZWFyY2goY2FuLCBpY2UuTVNHX1NFU1NJRCkpIHsgY2FuLm1pc2MuQ29va2llU2Vzc2lkKGNhbiwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLk1TR19TRVNTSUQpKQoJCQlyZXR1cm4gY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLk1TR19TRVNTSUQsICIiKSAKCQl9CgoJCWNhbi5yZXF1aXJlKFtjYW4udm9sY2Fub10sIG51bGwsIGZ1bmN0aW9uKGNhbiwga2V5LCBzdWIpIHsgY2FuW2tleV0gPSBzdWIgfSkKCQljYW4ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGNtZHMgPSBjbWRzfHxbXQoJCQlyZXR1cm4gKGNhbi5vbmVuZ2luZVtjbWRzWzBdXXx8Y2FuLm9uZW5naW5lLl9yZW1vdGUpKGV2ZW50LCBjYW4sIG1zZywgY2FuLCBjbWRzLCBjYikKCQl9LCBWb2xjYW5vcy5tZXRhLmFyZ3MgPSBjYW4udXNlci5hcmdzKGNhbikKCQljYW4udXNlci50aXRsZShjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlRJVExFKXx8Y2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCl8fGxvY2F0aW9uLmhvc3QpCgoJCXdpbmRvdy5vbnVubG9hZCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgIm9udW5sb2FkIikgfQoKCQljYW4uY29yZS5OZXh0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgaXRlbS50eXBlID0gY2hhdC5QQU5FTAoJCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBjYW4uYmFzZS5Db3B5KGl0ZW0sIGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuUklWRVIsIGl0ZW0ubmFtZV0pKSwgaXRlbS5saXN0LCBmdW5jdGlvbihwYW5lbCkgewoJCQkJcGFuZWwucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBwYW5lbC5yZXF1ZXN0KGV2ZW50KTsgY21kcyA9IGNtZHN8fFtdCgkJCQkJcmV0dXJuIChjYW4ub25lbmdpbmVbY21kc1swXV18fGNhbi5vbmVuZ2luZS5fcmVtb3RlKShldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikKCQkJCX0sIGNhbltpdGVtLm5hbWVdID0gcGFuZWwsIHBhbmVsLl9yb290ID0gY2FuLCBwYW5lbC5fdHJhbnMgPSBwYW5lbC5vbmFjdGlvbiAmJiBwYW5lbC5vbmFjdGlvbi5fdHJhbnN8fHt9CgoJCQkJY2FuLmNvcmUuSXRlbShwYW5lbC5vbnBsdWdpbiwgZnVuY3Rpb24oa2V5LCBjbWQpIHsKCQkJCQlwYW5lbC5vbnBsdWdpbi5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNhbi5iYXNlLmlzRnVuYyhjbWQpICYmIGNhbi5vbmVuZ2luZS5wbHVnaW4ocGFuZWwsIGtleSwgY21kKQoJCQkJfSkKCQkJCWNhbi5jb3JlLkl0ZW1DQihwYW5lbC5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgewoJCQkJCWNhbi5vbmVuZ2luZS5saXN0ZW4oY2FuLCBrZXksIGZ1bmN0aW9uKG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogcGFuZWwsIG1zZzogbXNnfSkgfSkKCQkJCX0pLCBjYW4uY29yZS5DYWxsRnVuYyhbcGFuZWwub25hY3Rpb24sIGNoYXQuX0lOSVRdLCB7Y2FuOiBwYW5lbCwgY2I6IG5leHQsIHRhcmdldDogcGFuZWwuX3RhcmdldH0pCgkJCX0sIHRhcmdldCkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLm1pc2MuTG9nKGNhbi51c2VyLnRpdGxlKCksIGljZS5SVU4sIGNhbikKCQkJY2FuLm9ubW90aW9uLl9pbml0KGNhbiwgdGFyZ2V0KSwgY2FuLm9ua2V5bWFwLl9pbml0KGNhbiksIGNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQykKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05NQUlOLCBjYW4ucmVxdWVzdCgpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJfSkKCgkJY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05TRUFSQ0gsIGZ1bmN0aW9uKG1zZywgd29yZCkgeyBpZiAod29yZFswXSA9PSBjdHguQ09NTUFORCB8fCB3b3JkWzFdICE9ICIiKSB7IHZhciBtZXRhID0gY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhCgkJCXZhciBsaXN0ID0gd29yZFsxXSA9PSAiIj8gbWV0YTogbWV0YVt3b3JkWzFdXT8ga2l0LkRpY3Qod29yZFsxXSwgbWV0YVt3b3JkWzFdXSk6IHt9CgkJCWNhbi5jb3JlLkl0ZW0obGlzdCwgZnVuY3Rpb24obmFtZSwgY29tbWFuZCkgeyBuYW1lID0gY2FuLmJhc2UudHJpbVByZWZpeChuYW1lLCAiY2FuLiIpCgkJCQljYW4uY29yZS5MaXN0KG1zZy5PcHRpb24oaWNlLk1TR19GSUVMRFMpLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQltc2cuUHVzaChpdGVtLCBraXQuRGljdChpY2UuQ1RYLCBjaGF0Lk9ORU5HSU5FLCBpY2UuQ01ELCBjdHguQ09NTUFORCwKCQkJCQkJbWRiLlRZUEUsIGljZS5DQU4sIG1kYi5OQU1FLCBuYW1lLCBtZGIuVEVYVCwgY29tbWFuZC5oZWxwLAoJCQkJCQljdHguQ09OVEVYVCwgaWNlLkNBTiwgY3R4LkNPTU1BTkQsIG5hbWUsCgkJCQkJCWN0eC5JTkRFWCwgY2FuLmNvcmUuS2V5cyhpY2UuQ0FOLCBuYW1lKSwKCQkJCQkpW2l0ZW1dfHwiIikKCQkJCX0pCgkJCX0pCgkJfSB9KQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJdmFyIHN1YiwgbW9kID0gY2FuLCBmdW4gPSBjYW4sIGtleSA9ICIiOyBjYW4uY29yZS5MaXN0KGNtZHNbMV0uc3BsaXQoaWNlLlBUKSwgZnVuY3Rpb24odmFsdWUpIHsKCQkJZnVuICYmIChzdWIgPSBtb2QsIG1vZCA9IGZ1biwgZnVuID0gbW9kW3ZhbHVlXSwga2V5ID0gdmFsdWUpCgkJfSk7IGlmICghc3ViIHx8ICFtb2QgfHwgIWZ1bikgeyBjYW4ubWlzYy5XYXJuKGljZS5FcnJOb3RGb3VuZCwgY21kcykKCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnLkVjaG8oaWNlLkVycldhcm4sIGljZS5FcnJOb3RGb3VuZCwgY21kcykpCgkJfQoKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoZnVuLCB7CgkJCWV2ZW50OiBldmVudCwgY2FuOiBzdWIsIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDIpLCBjYjogY2IsIHRhcmdldDogc3ViLl90YXJnZXQsCgkJCWJ1dHRvbjoga2V5LCBjbWQ6IGtleSwgYXJnOiBjbWRzLnNsaWNlKDIpLCBsaXN0OiBjbWRzLnNsaWNlKDIpLAoJCX0sIG1vZCkKCX0sCglfcmVtb3RlOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJCWlmIChwYW5lbC5vbmVuZ2luZS5fZW5naW5lKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSkgeyByZXR1cm4gfQoJCWlmIChwYW5lbC5vbmVuZ2luZS5fcGx1Z2luKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSkgeyByZXR1cm4gfQoKCQl2YXIga2V5cyA9IGNhbi5jb3JlLktleXMocGFuZWwuX25hbWUsIGNtZHMuam9pbihpY2UuRlMpKQoJCWlmIChjYW4udXNlci5pc0xvY2FsRmlsZSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuQ2xlYXIoaWNlLk1TR19BUFBFTkQpCgkJCXZhciByZXMgPSBWb2xjYW5vcy5tZXRhLnBhY2tba2V5c107IHJlcz8gbXNnLkNvcHkocmVzKTogY2FuLnVzZXIudG9hc3QoY2FuLCAi57y65aSx5pWw5o2uIikKCQkJcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJCX0KCgkJdmFyIHRvYXN0LCBfdG9hc3QgPSBtc2cuT3B0aW9uKGNoYXQuX1RPQVNUKTsgaWYgKF90b2FzdCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdG9hc3QgPSB0b2FzdHx8Y2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgX3RvYXN0LCBtc2cuX2Nhbi5fbmFtZSkgfSkgfQoJCW1zZy5vcHRpb24gPSBjYW4uY29yZS5MaXN0KG1zZy5vcHRpb24sIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIHtfdG9hc3Q6IHRydWUsIF9oYW5kbGU6IHRydWV9W2l0ZW1dICYmIGRlbGV0ZShtc2dbaXRlbV0pPyB1bmRlZmluZWQ6IGl0ZW0gfSkKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlJFTU9URSwgY2FuLnJlcXVlc3Qoe30sIHtfZm9sbG93OiBwYW5lbC5fZm9sbG93LCBfbXNnOiBtc2csIF9jbWRzOiBjbWRzfSkpCgoJCXZhciBuYW1lcyA9IG1zZy5PcHRpb24oY2hhdC5fTkFNRVMpfHxwYW5lbC5fbmFtZXN8fCgoY2FuLkNvbmYoImljZWJlcmciKXx8Vm9sY2Fub3MubWV0YS5pY2ViZXJnKStwYW5lbC5fbmFtZSkKCQljYW4ubWlzYy5SdW4oZXZlbnQsIGNhbiwge25hbWVzOiBuYW1lcywgZGFlbW9uOiBtc2cuX2RhZW1vbn0sIGNtZHMsIGZ1bmN0aW9uKG1zZykgewoJCQlWb2xjYW5vcy5tZXRhLnBhY2tba2V5c10gPSBtc2csIHRvYXN0ICYmIHRvYXN0LmNsb3NlKCksIHRvYXN0ID0gdHJ1ZSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJfSkKCX0sCglfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBtc2csIHBhbmVsLCBjbWRzLCBjYikgewoJCXJldHVybiBmYWxzZQoJfSwKCV9wbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZywgcGFuZWwsIGNtZHMsIGNiKSB7CgkJaWYgKGNtZHNbMF0gPT0gY3R4LkFDVElPTiAmJiBjbWRzWzFdID09IGljZS5SVU4gJiYgY2FuLm9uZW5naW5lLnBsdWdpbi5tZXRhW2NtZHNbMl1dKSB7CgkJCXJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1syXV0sIHtjYW46IHBhbmVsLCBtc2c6IG1zZywgY21kczogY21kcy5zbGljZSgzKSwgY2I6IGNifSksIHRydWUKCQl9CgkJdmFyIHAgPSBjYW4ub25lbmdpbmUucGx1Z2luLm1ldGFbY21kc1swXV0sIG4gPSAxOyBpZiAocCkgewoJCQlpZiAocC5tZXRhICYmIHAubWV0YVtjbWRzWzFdXSAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04pIHsgbiA9IDMgfSBlbHNlIGlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMF1dKSB7IG4gPSAyIH0KCQkJcmV0dXJuIGNhbi5jb3JlLkNhbGxGdW5jKHAsIHtjYW46IHAuY2FufHxwYW5lbCwgbXNnOiBtc2csIGFyZzogY21kcy5zbGljZShuKSwgY21kczogY21kcy5zbGljZShuKSwgY2I6IGNifSksIHRydWUKCQl9CgkJcmV0dXJuIGZhbHNlCgl9LAoKCXBsdWdpbjogc2h5KCLmt7vliqDmj5Lku7YiLCBmdW5jdGlvbihjYW4sIG5hbWUsIGNvbW1hbmQpIHsKCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobmFtZSkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkl0ZW0obmFtZSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJbmFtZS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNhbi5iYXNlLmlzRnVuYyh2YWx1ZSkgJiYgY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIGtleSwgdmFsdWUpIH0pCgkJfQoJCW5hbWUgPSBjYW4uYmFzZS50cmltUHJlZml4KG5hbWUsICJjYW4uIikKCQl2YXIgdHlwZSA9IGh0bWwuVEVYVDsgY29tbWFuZC5saXN0ID0gY2FuLmNvcmUuTGlzdChjb21tYW5kLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJc3dpdGNoICh0eXBlb2YgaXRlbSkgewoJCQkJY2FzZSBsYW5nLlNUUklORzogcmV0dXJuIGNhbi5jb3JlLlNwbGl0SW5wdXQoaXRlbSkKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IHJldHVybiB0eXBlID0gaXRlbS50eXBlfHx0eXBlLCBpdGVtCgkJCX0KCQl9KSwgY29tbWFuZC5jYW4gPSBjYW4sIGFyZ3VtZW50cy5jYWxsZWUubWV0YVtjYW4uY29yZS5LZXlzKGljZS5DQU4sIG5hbWUpXSA9IGNvbW1hbmQKCX0pLAoJbGlzdGVuOiBzaHkoIuebkeWQrOS6i+S7tiIsIGZ1bmN0aW9uKGNhbiwgbmFtZSwgY2IpIHsKCQlhcmd1bWVudHMuY2FsbGVlLm1ldGFbbmFtZV0gPSAoYXJndW1lbnRzLmNhbGxlZS5tZXRhW25hbWVdfHxbXSkuY29uY2F0KGNiKQoJfSksCglzaWduYWw6IHNoeSgi6Kem5Y+R5LqL5Lu2IiwgZnVuY3Rpb24oY2FuLCBuYW1lLCBtc2cpIHsgbXNnID0gbXNnfHxjYW4ucmVxdWVzdCgpCgkJY2FuLm1pc2MuTG9nKGdkYi5TSUdOQUwsIG5hbWUsIChtc2cuX2NtZHN8fFtdKSwgbmFtZSA9PSBjaGF0Lk9OUkVNT1RFPyBtc2cuT3B0aW9uKCJfbXNnIik6IG1zZykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChjYW4ub25lbmdpbmUubGlzdGVuLm1ldGFbbmFtZV0sIGZ1bmN0aW9uKGNiKSB7IGNhbi5jb3JlLkNhbGxGdW5jKGNiLCB7ZXZlbnQ6IG1zZy5fZXZlbnQsIG1zZzogbXNnfSkgfSkubGVuZ3RoCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRBRU1PTiwge2hlbHA6ICLmjqjojZDlvJXmk44iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBuYW1lKSB7IGlmIChjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5taXNjLldTUyhjYW4sIHt0eXBlOiBodG1sLkNIUk9NRSwgbmFtZTogY2FuLm1pc2MuU2VhcmNoKGNhbiwgY2xpLkRBRU1PTil8fG5hbWV8fCIiLCB0ZXh0OiBjYW4udXNlci50aXRsZSgpfSwgZnVuY3Rpb24oZXZlbnQsIG1zZywgY21kLCBhcmcpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0KCQkJdmFyIHN1YiA9IGNhbi5vbmRhZW1vbi5fbGlzdFttc2cuT3B0aW9uKGljZS5NU0dfVEFSR0VUKV0KCQkJY2FuLmJhc2UuaXNGdW5jKGNhbi5vbmRhZW1vbltjbWRdKT8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLm9uZGFlbW9uW2NtZF0sIHsKCQkJCWNhbjogY2FuLCBzdWI6IHN1YiwgbXNnOiBtc2csIGNtZDogY21kLCBhcmc6IGFyZywgY2I6IGZ1bmN0aW9uKCkgeyBtc2cuUmVwbHkoKSB9LAoJCQl9KTogY2FuLm9uZW5naW5lLl9zZWFyY2goe30sIGNhbiwgbXNnLCBjYW4sIFtjaGF0Ll9TRUFSQ0gsIGNtZF0uY29uY2F0KGFyZyksIGZ1bmN0aW9uKCkgeyBtc2cuUmVwbHkoKSB9KQoJCX0pCgl9LCBfbGlzdDogWyIiXSwKCXJlZnJlc2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCBzdWIpIHsgc3ViLlVwZGF0ZSgpIH0sCglncm93OiBmdW5jdGlvbihjYW4sIG1zZywgc3ViLCBhcmcpIHsKCQlzdWIub25pbXBvcnQuX2dyb3coc3ViLCBtc2csIGNhbi5wYWdlLkNvbG9yKGFyZy5qb2luKCIiKSkpCgl9LAoJdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBhcmcpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLnVzZXIudG9hc3QsIHtjYW46IGNhbiwgbXNnOiBtc2csIGNtZHM6IGFyZ30pIH0sCglwd2Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCBhcmcpIHsKCQljYW4uX3dzc19uYW1lID0gY2FuLm9uZGFlbW9uLl9saXN0WzBdID0gYXJnWzBdCgl9LAoJZXhpdDogZnVuY3Rpb24oY2FuLCBtc2csIHN1YikgeyBjYW4udXNlci5jbG9zZSgpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05BUFBFTkQsIHtoZWxwOiAi5riy5p+T5byV5pOOIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgbGlzdCwgY2IsIHRhcmdldCwgZmllbGQpIHsKCQltZXRhLm5hbWUgPSAobWV0YS5uYW1lfHwiIikuc3BsaXQoaWNlLlNQKVswXS5zcGxpdChpY2UuUFQpLnBvcCgpCgkJZmllbGQgPSBmaWVsZHx8Y2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgbWV0YS50eXBlLCBtZXRhLCB0YXJnZXQpLmZpcnN0CgkJdmFyIGxlZ2VuZCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkxFR0VORClbMF0KCQl2YXIgb3B0aW9uID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgZmllbGQsIGh0bWwuRk9STV9PUFRJT04pWzBdCgkJdmFyIGFjdGlvbiA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9BQ1RJT04pWzBdCgkJdmFyIG91dHB1dCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9PVVRQVVQpWzBdCgkJdmFyIHN0YXR1cyA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9TVEFUVVMpWzBdCgoJCXZhciBzdWIgPSBWb2xjYW5vcyhtZXRhLm5hbWUsIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBtZXRhLm5hbWUpLCBfdGFyZ2V0OiBmaWVsZCwKCQkJX2xlZ2VuZDogbGVnZW5kLCBfb3B0aW9uOiBvcHRpb24sIF9hY3Rpb246IGFjdGlvbiwgX291dHB1dDogb3V0cHV0LCBfc3RhdHVzOiBzdGF0dXMsCgkJCV9pbnB1dHM6IHt9LCBfb3V0cHV0czogW10sIF9oaXN0b3J5OiBbXSwgX3Jvb3Q6IGNhbi5fcm9vdCwKCgkJCVN0YXR1czogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgewoJCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgcmV0dXJuIGNhbi5jb3JlLkl0ZW0oa2V5LCBzdWIuU3RhdHVzKSwga2V5IH0KCQkJCWtleSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBzdGF0dXMsIFtbW2h0bWwuRElWLCBrZXldLCBodG1sLlNQQU5dXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWlmICh2YWx1ZSAmJiB2YWx1ZS5pbmRleE9mICYmIHZhbHVlLmluZGV4T2YoImh0dHAiKSA9PSAwKSB7IHZhbHVlID0gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgdmFsdWUpIH0KCQkJCQlyZXR1cm4gdmFsdWUgPT0gdW5kZWZpbmVkPyAodmFsdWUgPSBpdGVtLmlubmVySFRNTCk6IChpdGVtLmlubmVySFRNTCA9IHZhbHVlKQoJCQkJfSk7IHJldHVybiB2YWx1ZQoJCQl9LAoJCQlBY3Rpb246IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBhY3Rpb24sIGtleSwgdmFsdWUpWzBdIH0sCgkJCU9wdGlvbjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIG9wdGlvbiwga2V5LCB2YWx1ZSlbMF0gfSwKCQkJVXBkYXRlOiBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgeyBzdWIub25hcHBlbmQuX291dHB1dDAoc3ViLCBzdWIuQ29uZigpLCBldmVudHx8e30sIGNtZHN8fHN1Yi5JbnB1dCgpLCBjYiwgc2lsZW50KTsgcmV0dXJuIHRydWUgfSwKCQkJRm9jdXM6IGZ1bmN0aW9uKCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBvcHRpb24sIGh0bWwuSU5QVVRfQVJHUywgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgaW5kZXggPT0gMCAmJiBpdGVtLmZvY3VzKCkgfSkgfSwKCQkJSW5wdXQ6IGZ1bmN0aW9uKGNtZHMsIHNpbGVudCkgewoJCQkJY21kcyA9IGNtZHMgJiYgY21kcy5sZW5ndGggPiAwPyBjbWRzOiBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIikuY29uY2F0KGNhbi5wYWdlLlNlbGVjdEFyZ3MoY2FuLCBhY3Rpb24sICIiKSksIGNtZHMgPSBjYW4uYmFzZS50cmltKGNtZHMpCgkJCQlzaWxlbnQgfHwgY21kc1swXSA9PSBjdHguQUNUSU9OIHx8IGNhbi5iYXNlLkVxKHN1Yi5faGlzdG9yeVtzdWIuX2hpc3RvcnkubGVuZ3RoLTFdLCBjbWRzKSB8fCBzdWIuX2hpc3RvcnkucHVzaChjbWRzKQoJCQkJcmV0dXJuIGNtZHMKCQkJfSwKCQkJQ2xvbmU6IGZ1bmN0aW9uKCkgeyBtZXRhLmFyZ3MgPSBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgb3B0aW9uLCAiIikKCQkJCWNhbi5vbmFwcGVuZC5faW5pdChjYW4sIG1ldGEsIGxpc3QsIGZ1bmN0aW9uKHN1YikgeyBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YiwgdHJ1ZSkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgZm9yICh2YXIgayBpbiBzdWIuX2lucHV0cykgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBzdWIuX2lucHV0c1trXS5fdGFyZ2V0KTsgYnJlYWsgfSB9KQoJCQkJfSwgdGFyZ2V0KQoJCQl9LAoJCX0sIGxpc3QsIGZ1bmN0aW9uKHN1YikgeyBzdWIuQ29uZihtZXRhKSwgbWV0YS5mZWF0dXJlID0gY2FuLmJhc2UuT2JqKG1ldGEuZmVhdHVyZSwge30pCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBmaWVsZCwgbWV0YS5pbmRleD8gbWV0YS5pbmRleC5zcGxpdChpY2UuUFQpLnBvcCgpOiBtZXRhLm5hbWUpCgkJCXZhciBzdHlsZSA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuc3R5bGV8fG1ldGEuZmVhdHVyZS5zdHlsZSk7IHN3aXRjaCAodHlwZW9mIHN0eWxlKSB7CgkJCQljYXNlIGxhbmcuU1RSSU5HOiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZmllbGQsIHN0eWxlKTsgYnJlYWsKCQkJCWNhc2UgbGFuZy5PQkpFQ1Q6IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHN0eWxlKTsgYnJlYWsKCQkJfQoJCQltZXRhLnR5cGUgIT0gc3ViLk1vZGUoKSAmJiBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgZmllbGQsIHN1Yi5Nb2RlKCkpCgoJCQltZXRhLmlucHV0cyAmJiBzdWIub25hcHBlbmQuX29wdGlvbihzdWIsIG1ldGEsIHN1Yi5fb3B0aW9uLCBtZXRhLm1zZykKCQkJaWYgKG1ldGEubXNnKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdCgpOyBtc2cuQ29weShjYW4uYmFzZS5PYmoobWV0YS5tc2cpKSwgc3ViLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCBtc2csIG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKXx8bWV0YS5mZWF0dXJlLmRpc3BsYXkpIH0KCgkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHN1Yi5fbGVnZW5kLCBraXQuRGljdChjYW4uQ29uZigibGVnZW5kX2V2ZW50Iil8fGNoYXQuT05NT1VTRUVOVEVSLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIHN1Yiwgc3ViLm9uYWN0aW9uLCBzdWIub25hY3Rpb24ubGlzdC5jb25jYXQoW1si5omA5pyJIl0uY29uY2F0KGNhbi5jb3JlLkl0ZW0obWV0YS5mZWF0dXJlLl90cmFucykpXSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhKSB7CgkJCQkJdmFyIGNiID0gY2FuLmNvcmUuVmFsdWUoc3ViLCBbY2hhdC5fT1VUUFVUU19DVVJSRU5ULCBjaGF0Lk9OQUNUSU9OLCBpdGVtXSkKCQkJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyByZXR1cm4gY2IoZXZlbnQsIGNhbi5jb3JlLlZhbHVlKHN1YiwgY2hhdC5fT1VUUFVUU19DVVJSRU5UKSwgaXRlbSkgfQoJCQkJCXZhciBjYiA9IG1ldGFbaXRlbV18fG1ldGFbY2hhdC5fRU5HSU5FXQoJCQkJCWlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpKSB7IHJldHVybiBjYihldmVudCwgc3ViLCBpdGVtKSB9CgkJCQl9KQoJCQl9KSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pOyByZXR1cm4gc3ViCgl9LAoJX29wdGlvbjogZnVuY3Rpb24oY2FuLCBtZXRhLCBvcHRpb24sIHNraXApIHsgbWV0YSA9IG1ldGF8fHt9OyB2YXIgaW5kZXggPSAtMSwgYXJncyA9IGNhbi5iYXNlLk9iaihtZXRhLmFyZ3N8fG1ldGEuYXJnfHxtZXRhLm9wdCwgW10pLCBvcHRzID0gY2FuLmJhc2UuT2JqKG1ldGEub3B0cywge30pCgkJZnVuY3Rpb24gYWRkKGl0ZW0sIG5leHQpIHsgaXRlbSA9IGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pPyB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBpdGVtfTogaXRlbSwgaXRlbS50eXBlICE9IGh0bWwuQlVUVE9OICYmIGluZGV4KysKCQkJcmV0dXJuIFZvbGNhbm9zKGl0ZW0ubmFtZSwge19mb2xsb3c6IGNhbi5jb3JlLktleXMoY2FuLl9mb2xsb3csIGl0ZW0ubmFtZSksIF9yb290OiBjYW4uX3Jvb3QsCgkJCQlfdGFyZ2V0OiBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCBpdGVtLCBhcmdzW2luZGV4XXx8b3B0c1tpdGVtLm5hbWVdLCBvcHRpb258fGNhbi5fb3B0aW9uKSwKCQkJCV9vcHRpb246IG9wdGlvbnx8Y2FuLl9vcHRpb24sIF9hY3Rpb246IGNhbi5fYWN0aW9uLCBfb3V0cHV0OiBjYW4uX291dHB1dCwgX3N0YXR1czogY2FuLl9zdGF0dXMsCgkJCQlPcHRpb246IGNhbi5PcHRpb24sIEFjdGlvbjogY2FuLkFjdGlvbiwgU3RhdHVzOiBjYW4uU3RhdHVzLCBDbG9uZUZpZWxkOiBjYW4uQ2xvbmUsCgkJCQlDbG9uZUlucHV0OiBmdW5jdGlvbigpIHsgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgYWRkKGl0ZW0pLl90YXJnZXQpIH0sCgkJCX0sIFtpdGVtLmRpc3BsYXksIGNoYXQuUExVR0lOX0lOUFVUX0pTXSwgZnVuY3Rpb24oaW5wdXQpIHsgaW5wdXQuQ29uZihpdGVtKQoJCQkJaW5wdXQucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCWlmIChpdGVtLl9jYikgeyByZXR1cm4gaXRlbS5fY2IoZXZlbnQpIH0KCQkJCQlpZiAobXNnLlJ1bkFjdGlvbihldmVudCwgY2FuLmNvcmUuVmFsdWUoY2FuLCBjaGF0Ll9PVVRQVVRTX0NVUlJFTlQpLCBjbWRzKSkgeyByZXR1cm4gfQoJCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCBpbnB1dCwgY21kcykpIHsgcmV0dXJuIH0KCQkJCQlyZXR1cm4gY2FuLlVwZGF0ZShldmVudCwgY2FuLklucHV0KGNtZHMsIHNpbGVudCksIGNiLCBzaWxlbnQpCgkJCQl9LCBjYW4uX2lucHV0c1tpdGVtLm5hbWVdID0gaW5wdXQsIGlucHV0LnN1cCA9IGNhbgoKCQkJCWNhbi5jb3JlLkl0ZW1DQihpbnB1dC5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgeyBpbnB1dC5fdGFyZ2V0W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgaW5wdXQpIH0gfSkKCQkJCWNhbi5jb3JlLkl0ZW1DQihpdGVtLCBmdW5jdGlvbihrZXksIGNiKSB7IGlucHV0Ll90YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBpbnB1dCkgfSB9KQoJCQkJc2tpcD8gbmV4dCgpOiBjYW4uY29yZS5DYWxsRnVuYyhbaW5wdXQub25hY3Rpb24sIGNoYXQuX0lOSVRdLCBbaW5wdXQsIGl0ZW0sIG5leHQsIGlucHV0Ll90YXJnZXRdKTsKCQkJCShpdGVtLmFjdGlvbnx8Y2FuLmNvcmUuVmFsdWUobWV0YSwgW2N0eC5GRUFUVVJFLCBjdHguSU5QVVRTXSkpICYmIGNhbi5vbmFwcGVuZC5maWd1cmUoaW5wdXQsIGl0ZW0sIGlucHV0Ll90YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUpIHsKCQkJCQlpbnB1dC5fdGFyZ2V0LnZhbHVlID0gdmFsdWUsIGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGlucHV0Ll90YXJnZXQpCgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5VcGRhdGUoKSB9KQoJCQkJfSkKCQkJfSkKCQl9OyBjYW4uY29yZS5OZXh0KGNhbi5iYXNlLmdldFZhbGlkKGNhbi5jb3JlLlZhbHVlKGNhbiwgW2NoYXQuT05JTVBPUlQsIG1kYi5MSVNUXSksIGNhbi5iYXNlLk9iaihtZXRhLmlucHV0cykpLmNvbmNhdChbe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBjbGkuQ0xPU0V9XSksIGFkZCkKCX0sCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGxpc3QsIGFjdGlvbiwgbWV0YSkgeyBsaXN0ID0gY2FuLmJhc2UuT2JqKGNhbi5iYXNlLmdldFZhbGlkKGxpc3QsIGNhbi5jb3JlLkl0ZW0obWV0YSkpLCBjYW4uY29yZS5WYWx1ZShjYW4sIFtjaGF0Lk9OQUNUSU9OLCBtZGIuTElTVF0pKTsgaWYgKCFsaXN0KSB7IHJldHVybiB9CgkJdmFyIF9saXN0ID0gY2FuLnBhZ2UuaW5wdXRzKGNhbiwgbGlzdCk7IGFjdGlvbiA9IGFjdGlvbnx8Y2FuLl9hY3Rpb24sIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGFjdGlvbiksIG1ldGEgPSBtZXRhfHxjYW4ub25hY3Rpb258fHt9CgkJcmV0dXJuIGNhbi5jb3JlLkxpc3QoX2xpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKGl0ZW0gPT0gdW5kZWZpbmVkKSB7IHJldHVybiB9IGNhbi5vbmFwcGVuZC5pbnB1dChjYW4sIGl0ZW0gPT0gIiI/IC8q56m655m9Ki8ge3R5cGU6IGh0bWwuU1BBQ0V9OgoJCQljYW4uYmFzZS5pc1N0cmluZyhpdGVtKT8gLyrmjInplK4qLyB7dHlwZTogaHRtbC5CVVRUT04sIHZhbHVlOiBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0pLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdOyBjYj8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGl0ZW19KTogY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGl0ZW1dLmNvbmNhdChjYW4uc3VwLklucHV0KCkpKQoKCQkJfSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7CgkJCQkJdmFyIGNiID0gbWV0YVtpdGVtXXx8bWV0YVtjaGF0Ll9FTkdJTkVdOyBjYj8gY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtldmVudDogZXZlbnQsIGNhbjogY2FuLCBidXR0b246IGl0ZW19KTogY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGl0ZW1dLmNvbmNhdChjYW4uc3VwLklucHV0KCkpKQoJCQkJfQoKCQkJfX06IGl0ZW0ubGVuZ3RoID4gMD8gLyrliJfooagqLyB7dHlwZTogaHRtbC5TRUxFQ1QsIG5hbWU6IGl0ZW1bMF0sIHZhbHVlczogaXRlbS5zbGljZSgxKSwgb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl2YXIgd2hpY2ggPSBpdGVtW2V2ZW50LnRhcmdldC5zZWxlY3RlZEluZGV4KzFdCgkJCQljYW4uY29yZS5DYWxsRnVuYyhtZXRhW3doaWNoXSwgW2V2ZW50LCBjYW4sIHdoaWNoXSkKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKG1ldGFbaXRlbVswXV0sIFtldmVudCwgY2FuLCBpdGVtWzBdLCB3aGljaF0pCgoJCQl9fTogLyrlhbblroMqLyBpdGVtLCAiIiwgYWN0aW9uKX0pLCBtZXRhCgl9LAoJX291dHB1dDA6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgZXZlbnQsIGNtZHMsIGNiLCBzaWxlbnQpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KTsgaWYgKG1zZy5SdW5BY3Rpb24oZXZlbnQsIGNhbiwgY21kcykpIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgIT0gaWNlLlRSVUUgJiYgY21kcyAmJiBjbWRzWzBdID09IGN0eC5BQ1RJT04gJiYgbWV0YS5mZWF0dXJlW2NtZHNbMV1dKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge2FjdGlvbjogY21kc1sxXX0pCgkJCWlmIChjYW4uYmFzZS5pc0Z1bmMobWV0YS5mZWF0dXJlW2NtZHNbMV1dKSkgeyByZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMobWV0YS5mZWF0dXJlW2NtZHNbMV1dLCB7Y2FuOiBjYW4sIG1zZzogbXNnLCBjbWRzOiBjbWRzLnNsaWNlKDIpfSkgfQoJCQlyZXR1cm4gY2FuLnVzZXIuaW5wdXQoZXZlbnQuX2V2ZW50fHxldmVudCwgY2FuLCBtZXRhLmZlYXR1cmVbY21kc1sxXV0sIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X2hhbmRsZTogaWNlLlRSVUV9LCBjYW4uT3B0aW9uKCkpCgkJCQljYW4uVXBkYXRlKGV2ZW50LCBjbWRzLnNsaWNlKDAsIDIpLmNvbmNhdChhcmdzKSwgY2J8fGZ1bmN0aW9uKCkgewoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLnN1cCwgY2hhdC5PTklNUE9SVCwgaWNlLk1TR19QUk9DRVNTXSwge2NhbjogY2FuLnN1cCwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQkJCWlmIChjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCQlpZiAobXNnLlJlc3VsdCgpLmxlbmd0aCA+IDAgfHwgbXNnLkxlbmd0aCgpID4gMCkgewoJCQkJCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJCQkJfSBlbHNlIHsKCQkJCQkJY2FuLlVwZGF0ZSgpCgkJCQkJfQoJCQkJfSwgdHJ1ZSkKCQkJfSkKCQl9CgoJCWlmIChtZXRhICYmIG1ldGEuaW5kZXggJiYgbWV0YS5pbmRleC5pbmRleE9mKCJjYW4uIikgPT0gMCkgewoJCQljYW4ub25lbmdpbmUuX3BsdWdpbihldmVudCwgY2FuLCBtc2csIGNhbiwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW21ldGEuaW5kZXhdLCBjbWRzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGNiKSkgeyBjYW4uY29yZS5DYWxsRnVuYyhjYiwge2NhbjogY2FuLCBtc2c6IG1zZ30pOyByZXR1cm4gfQoJCQkJIXNpbGVudCAmJiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmRpc3BsYXl8fG1ldGEuZmVhdHVyZS5kaXNwbGF5KQoJCQl9KQoJCQlyZXR1cm4KCQl9CgoJCWlmIChjYW4uYmFzZS5pc1VuZGVmaW5lZChtc2cuX2RhZW1vbikpIHsKCQkJY2FuLmJhc2UuaXNVbmRlZmluZWQoY2FuLl9kYWVtb24pICYmIGNhbi5vbmRhZW1vbi5fbGlzdFswXSAmJiAoY2FuLl9kYWVtb24gPSBjYW4ub25kYWVtb24uX2xpc3QucHVzaChjYW4pLTEpCgkJCWlmIChjYW4uX2RhZW1vbikgeyBtc2cuT3B0aW9uKGljZS5NU0dfREFFTU9OLCBjYW4uY29yZS5LZXlzKGNhbi5vbmRhZW1vbi5fbGlzdFswXSwgY2FuLl9kYWVtb24pKSB9CgkJfQoKCQlyZXR1cm4gY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCl8fHt9CgkJCWlmICghY21kcyB8fCBjbWRzWzBdICE9IGN0eC5BQ1RJT04pIHsgY2FuLl9tc2cgPSBtc2csIHN1Yi5fbXNnID0gbXNnLCBtc2cuX2NtZHMgPSBjbWRzIH0KCQkJaWYgKGNhbi5iYXNlLmlzRnVuYyhjYikpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2IsIHtjYW46IGNhbiwgbXNnOiBtc2d9KTsgcmV0dXJuIH0KCQkJdmFyIHByb2Nlc3MgPSBtc2cuX2NhbiA9PSBjYW4gfHwgbXNnLl9jYW4gPT0gc3ViCgkJCWlmIChwcm9jZXNzICYmIGNhbi5jb3JlLkNhbGxGdW5jKFtzdWIsIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IHN1YiwgbXNnOiBtc2d9KSkgeyByZXR1cm4gfQoJCQlpZiAocHJvY2VzcyAmJiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBjaGF0Lk9OSU1QT1JULCBpY2UuTVNHX1BST0NFU1NdLCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJIXNpbGVudCAmJiBjYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpfHxtZXRhLmRpc3BsYXl8fG1ldGEuZmVhdHVyZS5kaXNwbGF5LCBjYW4uX291dHB1dCwgY2FuLl9hY3Rpb24pCgkJfSkKCX0sCglfb3V0cHV0OiBmdW5jdGlvbihjYW4sIG1zZywgZGlzcGxheSwgb3V0cHV0LCBhY3Rpb24sIGNiKSB7IGRpc3BsYXkgPSBkaXNwbGF5fHxjaGF0LlBMVUdJTl9UQUJMRV9KUywgb3V0cHV0ID0gb3V0cHV0fHxjYW4uX291dHB1dAoJCWNhbi5fZGlzcGxheSA9IGRpc3BsYXkKCQlWb2xjYW5vcyhkaXNwbGF5LCB7X2ZvbGxvdzogY2FuLmNvcmUuS2V5cyhjYW4uX2ZvbGxvdywgZGlzcGxheSksIF90YXJnZXQ6IG91dHB1dCwgX2ZpZWxkczogY2FuLl90YXJnZXQsIF9kaXNwbGF5OiBkaXNwbGF5LAoJCQlfbGVnZW5kOiBjYW4uX2xlZ2VuZCwgX29wdGlvbjogY2FuLl9vcHRpb24sIF9hY3Rpb246IGNhbi5fYWN0aW9uLCBfb3V0cHV0OiBjYW4uX291dHB1dCwgX3N0YXR1czogY2FuLl9zdGF0dXMsIF9yb290OiBjYW4uX3Jvb3QsCgkJCVVwZGF0ZTogY2FuLlVwZGF0ZSwgT3B0aW9uOiBjYW4uT3B0aW9uLCBBY3Rpb246IGNhbi5BY3Rpb24sIFN0YXR1czogY2FuLlN0YXR1cywKCQl9LCBbZGlzcGxheSwgY2hhdC5QTFVHSU5fVEFCTEVfSlNdLCBmdW5jdGlvbih0YWJsZSkgeyB0YWJsZS5Db25mKGNhbi5Db25mKCkpCgkJCXRhYmxlLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYiwgc2lsZW50KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJCWlmIChtc2cuUnVuQWN0aW9uKGV2ZW50LCB0YWJsZSwgY21kcykpIHsgcmV0dXJuIH0KCQkJCXJldHVybiBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoY21kcywgc2lsZW50KSwgY2IsIHNpbGVudCkKCQkJfSwgY2FuLl9vdXRwdXRzICYmIGNhbi5fb3V0cHV0cy5wdXNoKHRhYmxlKSwgdGFibGUuc3VwID0gY2FuLCB0YWJsZS5fbXNnID0gbXNnCgoJCQl0YWJsZS5faW5kZXggPSBjYW4uX2luZGV4CgkJCXRhYmxlLk1vZGUoY2FuLk1vZGUoKSksIHRhYmxlLkNvbmYodGFibGUuX2FyZ3MgPSBjYW4uYmFzZS5QYXJzZVVSTCh0YWJsZS5fZGlzcGxheSkpCgkJCXRhYmxlLl90cmFucyA9IGNhbi5iYXNlLkNvcHkodGFibGUuX3RyYW5zfHx7fSwgY2FuLmNvcmUuVmFsdWUodGFibGUsICJvbmFjdGlvbi5fdHJhbnMiKSkKCQkJaWYgKHRhYmxlLm9uaW1wb3J0ICYmIGNhbi5iYXNlLmlzQXJyYXkodGFibGUub25pbXBvcnQubGlzdCkgJiYgdGFibGUub25pbXBvcnQubGlzdC5sZW5ndGggPiAwKSB7CgkJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX29wdGlvbiksIGNhbi5vbmFwcGVuZC5fb3B0aW9uKGNhbiwge2lucHV0czogY2FuLnBhZ2UuaW5wdXRzKGNhbiwgdGFibGUub25pbXBvcnQubGlzdCkgfSkKCQkJfQoKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3RhYmxlLCBjaGF0Lk9OSU1QT1JULCBjaGF0Ll9JTklUXSwge2NhbjogdGFibGUsIG1zZzogbXNnLCBjYjogZnVuY3Rpb24obXNnKSB7CgkJCQlhY3Rpb24gPT09IGZhbHNlIHx8IHRhYmxlLm9uYXBwZW5kLl9hY3Rpb24odGFibGUsIG1zZy5PcHRpb24oaWNlLk1TR19BQ1RJT04pfHxjYW4uQ29uZihpY2UuTVNHX0FDVElPTiksIGFjdGlvbikKCQkJCWFjdGlvbiA9PT0gZmFsc2UgfHwgdGFibGUub25hcHBlbmQuX3N0YXR1cyh0YWJsZSwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykpCgkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQkJfSwgdGFyZ2V0OiBvdXRwdXR8fGNhbi5fb3V0cHV0fSkKCQl9KQoJfSwKCV9zdGF0dXM6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgc3RhdHVzKSB7IHN0YXR1cyA9IHN0YXR1c3x8Y2FuLl9zdGF0dXMsIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHN0YXR1cykKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihsaXN0LCBjYW4uY29yZS5WYWx1ZShjYW4sIFtjaGF0Lk9ORVhQT1JULCBtZGIuTElTVF0pKSwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtID0gY2FuLmJhc2UuaXNPYmplY3QoaXRlbSk/IGl0ZW06IHtuYW1lOiBpdGVtfQoKCQkJaWYgKGl0ZW0udmFsdWUgJiYgaXRlbS52YWx1ZS5pbmRleE9mICYmIGl0ZW0udmFsdWUuaW5kZXhPZigiaHR0cCIpID09IDApIHsgaXRlbS52YWx1ZSA9IGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGl0ZW0udmFsdWUpIH0KCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgc3RhdHVzLCBbe3ZpZXc6IGNhbi5iYXNlLmpvaW4oW2h0bWwuSVRFTSwgaXRlbS5uYW1lXSksIHRpdGxlOiBpdGVtLm5hbWUsIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbS5uYW1lLCBodG1sLkxBQkVMXX0sIHt0ZXh0OiBbIjogIiwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyhpdGVtLnZhbHVlfHwiIikrIiIsIGh0bWwuU1BBTiwgaXRlbS5uYW1lXX0sCgkJCV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgaXRlbS52YWx1ZSkgfX1dKQoJCX0pCgl9LAoKCWZpZWxkOiBmdW5jdGlvbihjYW4sIHR5cGUsIGl0ZW0sIHRhcmdldCkgeyB0eXBlID0gdHlwZXx8aHRtbC5QTFVHSU4sIGl0ZW0gPSBpdGVtfHx7fQoJCXZhciBuYW1lID0gKGl0ZW0ubmlja3x8aXRlbS5uYW1lfHwiIikuc3BsaXQoaWNlLlNQKVswXQoJCXZhciB0aXRsZSA9ICFpdGVtLmhlbHAgfHwgY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBuYW1lOiBuYW1lKyIoIitpdGVtLmhlbHAuc3BsaXQoaWNlLlNQKVswXSsiKSIKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0fHxjYW4uX291dHB1dCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbdHlwZXx8IiIsIGl0ZW0ubmFtZXx8IiIsIGl0ZW0ucG9zfHwiIl0pLCBodG1sLkZJRUxEU0VUXSwgbGlzdDogWwoJCQluYW1lICYmIHt0ZXh0OiBbdGl0bGUsIGh0bWwuTEVHRU5EXX0sIHt2aWV3OiBbaHRtbC5PUFRJT04sIGh0bWwuRk9STV19LCB7dmlldzogW2h0bWwuQUNUSU9OXX0sIHt2aWV3OiBbaHRtbC5PVVRQVVRdfSwge3ZpZXc6IFtodG1sLlNUQVRVU119LAoJCV19XSkKCX0sCglpbnB1dDogZnVuY3Rpb24oY2FuLCBpdGVtLCB2YWx1ZSwgdGFyZ2V0LCBzdHlsZSkgewoJCXN3aXRjaCAoaXRlbS50eXBlKSB7CgkJCWNhc2UgIiI6IHJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtpdGVtXSkKCQkJY2FzZSBodG1sLlNQQUNFOiByZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGNhbi5iYXNlLmpvaW4oW2h0bWwuSVRFTSwgaHRtbC5TUEFDRV0pfV0pCgkJfQoJCXZhciBpbnB1dCA9IGNhbi5wYWdlLmlucHV0KGNhbiwgaXRlbSwgdmFsdWUpCgkJaWYgKGl0ZW0ucmFuZ2UpIHsKCQkJaW5wdXQuX2luaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgaXRlbS5tb2RlID0gInNpbXBsZSIKCQkJCWNhbi5vbmFwcGVuZC5maWd1cmUoY2FuLCBpdGVtLCB0YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUsIG9sZCkgewoJCQkJCXRhcmdldC52YWx1ZSA9IHZhbHVlLCBjYW4ub25hY3Rpb25baXRlbS5uYW1lXShldmVudCwgY2FuLCBpdGVtLm5hbWUpCgkJCQl9KQoJCQl9CgkJfQoJCXZhciBiciA9IGlucHV0LnR5cGUgPT0gaHRtbC5URVhUQVJFQT8gW3t0eXBlOiBodG1sLkJSLCBzdHlsZToge2NsZWFyOiBodG1sLkJPVEh9fV06IFtdCgkJdmFyIHRpdGxlID0gY2FuLkNvbmYoW2N0eC5GRUFUVVJFLCBjaGF0LlRJVExFLCBpdGVtLm5hbWVdLmpvaW4oaWNlLlBUKSl8fCIiOyB0aXRsZSAmJiAoaW5wdXQudGl0bGUgPSB0aXRsZSkKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCAoW3t2aWV3OiBzdHlsZXx8Y2FuLmJhc2Uuam9pbihbaHRtbC5JVEVNLCBpdGVtLnR5cGVdKSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQlzd2l0Y2ggKGl0ZW0udHlwZSkgewoJCQkJY2FzZSBodG1sLlRFWFQ6CgkJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQkJY2FzZSBsYW5nLkVOVEVSOgoJCQkJCQkJY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpOwoJCQkJCQkJY2FuLm9uYWN0aW9uICYmIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdICYmIGNhbi5vbmFjdGlvbltpdGVtLm5hbWVdKGV2ZW50LCBjYW4sIGl0ZW0ubmFtZSk7CgkJCQkJCQlicmVhawoJCQkJCX0KCQkJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbiksIGNhbi5vbm1vdGlvbi5zZWxlY3RGaWVsZChldmVudCwgY2FuKQoJCQkJCWJyZWFrCgkJCQljYXNlIGh0bWwuVEVYVEFSRUE6CgkJCQkJLy8gc3dpdGNoIChldmVudC5rZXkpIHsgY2FzZSBsYW5nLlRBQjogY2FuLm9ua2V5bWFwLmluc2VydFRleHQoZXZlbnQudGFyZ2V0LCBpY2UuVEIpOyBjYW4ub25rZXltYXAucHJldmVudChldmVudCk7IGJyZWFrIH0KCQkJCQlicmVhawoJCQl9CgoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQl9LCBsaXN0OiBbaW5wdXRdfV0pLmNvbmNhdChicikpW2l0ZW0ubmFtZV0KCX0sCgl0YWJsZTogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQsIHNvcnQpIHsgaWYgKG1zZy5MZW5ndGgoKSA9PSAwKSB7IHJldHVybiB9CgkJdmFyIHRhYmxlID0gY2FuLnBhZ2UuQXBwZW5kVGFibGUoY2FuLCBtc2csIHRhcmdldHx8Y2FuLl9vdXRwdXQsIG1zZy5hcHBlbmQsIGNifHxmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQlpZiAoa2V5ID09IG1kYi5WQUxVRSkgeyBrZXkgPSBsaW5lLmtleSB9CgkJCQlsaW5lID0ge30sIGNhbi5jb3JlLkxpc3QoYXJyYXksIGZ1bmN0aW9uKGl0ZW0pIHsgbGluZVtpdGVtLmtleV0gPSBpdGVtLnZhbHVlIH0pCgkJCX0KCgkJCWlmIChrZXkgPT0gImV4dHJhLmNtZCIpIHsKCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7Y3R4OiBsaW5lWyJleHRyYS5jdHgiXSwgY21kOiBsaW5lWyJleHRyYS5jbWQiXSwgYXJnOiBsaW5lWyJleHRyYS5hcmciXX0sIGZ1bmN0aW9uKHN1YikgewoJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBsaW5lLCBjYW4uT3B0aW9uKCkpCgkJCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBjYW4uY29yZS5LZXlzKGxpbmVbImV4dHJhLmN0eCJdLCBsaW5lWyJleHRyYS5jbWQiXSksIGNtZHMsIGNiKQoJCQkJCX0KCQkJCX0sIHRhcmdldHx8Y2FuLl9vdXRwdXQpCgkJCX0KCgkJCWZ1bmN0aW9uIHJ1bihjbWRzKSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIGxpbmUsIGNhbi5PcHRpb24oKSkKCQkJCXJldHVybiBjYW4ucnVuKGV2ZW50LCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlpZiAoY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5zdXAsIGNoYXQuT05JTVBPUlQsIGljZS5NU0dfUFJPQ0VTU10sIHtjYW46IGNhbi5zdXAsIG1zZzogbXNnfSkpIHsgcmV0dXJuIH0KCQkJCQlpZiAobXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpICE9ICIiKSB7CgkJCQkJCWNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbi5zdXAsIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpKQoJCQkJCX0gZWxzZSBpZiAobXNnLkxlbmd0aCgpID4gMCB8fCBtc2cuUmVzdWx0KCkubGVuZ3RoID4gMCApIHsKCQkJCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCQkJCX0gZWxzZSB7CgkJCQkJCWNhbi5VcGRhdGUoKQoJCQkJCX0KCQkJCX0sIHRydWUpCgkJCX0KCgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIHRhcmdldCkgJiYgdGFyZ2V0LnR5cGUgPT0gaHRtbC5CVVRUT04pIHsgcmV0dXJuIHJ1bihbY3R4LkFDVElPTiwgdGFyZ2V0Lm5hbWVdKSB9CgkJCQlpZiAoa2V5ID09IG1kYi5IQVNIICYmIGNhbi51c2VyLm1vZC5pc0RpdikgeyByZXR1cm4gY2FuLnVzZXIuanVtcHMoIi9jaGF0L2Rpdi8iK3ZhbHVlKSB9CgkJCQljYW4uc3VwLm9uYWN0aW9uLmNoYW5nZShldmVudCwgY2FuLnN1cCwga2V5LCBldmVudC50YXJnZXQuaW5uZXJUZXh0KQoKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsgaWYgKFttZGIuS0VZXS5pbmRleE9mKGtleSkgPiAtMSkgeyByZXR1cm4gfQoJCQkJdmFyIGl0ZW0gPSBjYW4uY29yZS5MaXN0KGNhbi5Db25mKCJmZWF0dXJlLmluc2VydCIpLCBmdW5jdGlvbihpdGVtKSB7IGlmIChpdGVtLm5hbWUgPT0ga2V5KSB7IHJldHVybiBpdGVtIH0gfSlbMF18fHtuYW1lOiBrZXksIHZhbHVlOiB2YWx1ZX0KCQkJCWl0ZW0ucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIGxpbmUpLCBjbWRzLCBjYiwgdHJ1ZSkgfQoJCQkJY2FuLm9ubW90aW9uLm1vZGlmeXMoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7IHJ1bihbY3R4LkFDVElPTiwgbWRiLk1PRElGWSwga2V5LCB2YWx1ZV0pIH0sIGl0ZW0pCgkJCX19CgkJfSk7IHRhYmxlICYmIGNhbi5wYWdlLnN0eWxlQ2xhc3MoY2FuLCB0YWJsZSwgY2hhdC5DT05URU5UKQoJCWlmIChtc2cuYXBwZW5kICYmIG1zZy5hcHBlbmRbbXNnLmFwcGVuZC5sZW5ndGgtMV0gPT0gY3R4LkFDVElPTikgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFibGUsIGN0eC5BQ1RJT04pIH0KCQljYW4uX3RhYmxlID0gdGFibGUsIGNhbi5zdXAgJiYgKGNhbi5zdXAuX3RhYmxlID0gdGFibGUpCgkJcmV0dXJuIHNvcnQgJiYgY2FuLnBhZ2UuUmFuZ2VUYWJsZShjYW4sIHRhYmxlLCBzb3J0KSwgdGFibGUKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuLCB0ZXh0LCB0YXJnZXQpIHsgdGV4dCAmJiB0ZXh0LlJlc3VsdCAmJiAodGV4dCA9IHRleHQuUmVzdWx0KCkpOyBpZiAoIXRleHQpIHsgcmV0dXJuIH0KCQl2YXIgY29kZSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIFt7dGV4dDogW2Nhbi5wYWdlLkNvbG9yKHRleHQpLCBodG1sLkRJViwgaHRtbC5DT0RFXX1dKS5jb2RlCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY29kZSwgaHRtbC5JTlBVVF9CVVRUT04sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQl0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBtc2cgPSBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSkKCQkJCXJldHVybiBjYW4ucnVuQWN0aW9uKGV2ZW50LCB0YXJnZXQubmFtZSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ucnVuKCkgfSkKCQkJfQoJCX0pCgkJcmV0dXJuIChjb2RlLnNjcm9sbEJ5ICYmIGNvZGUuc2Nyb2xsQnkoMCwgMTAwMDApKSwgY29kZQoJfSwKCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIHZhbHVlLCBtZXRhLCBjYiwgdGFyZ2V0LCBmaWVsZCkgewoJCW1ldGEuZmVhdHVyZSA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuZmVhdHVyZSwgY2FuLmJhc2UuT2JqKHZhbHVlLm1ldGEpKXx8e30KCQltZXRhLmlucHV0cyA9IGNhbi5iYXNlLmdldFZhbGlkKG1ldGEuaW5wdXRzLCBjYW4uYmFzZS5PYmoodmFsdWUubGlzdCkpfHxbXQoJCW1ldGEuYXJncyA9IGNhbi5iYXNlLmdldFZhbGlkKGNhbi5iYXNlLk9iaihtZXRhLmFyZ3MpLCBjYW4uYmFzZS5PYmoobWV0YS5hcmcpLCBjYW4uYmFzZS5PYmoodmFsdWUuYXJncyksIGNhbi5iYXNlLk9iaih2YWx1ZS5hcmcpKXx8W10KCQltZXRhLmRpc3BsYXkgPSBtZXRhLmRpc3BsYXl8fHZhbHVlLmRpc3BsYXkKCgkJbWV0YS5oZWlnaHQgPSBtZXRhLmhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKQoJCW1ldGEud2lkdGggPSBtZXRhLndpZHRofHxjYW4uQ29uZldpZHRoKCkKCgkJbWV0YS50eXBlID0gbWV0YS50eXBlfHxjaGF0LlBMVUdJTgoJCW1ldGEubmFtZSA9IG1ldGEubmFtZXx8dmFsdWUubmFtZQoJCW1ldGEuaGVscCA9IG1ldGEuaGVscHx8dmFsdWUuaGVscAoKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCBtZXRhLCBbY2hhdC5QTFVHSU5fU1RBVEVfSlNdLCBmdW5jdGlvbihzdWIsIHNraXApIHsgc3ViLl9pbmRleCA9IHZhbHVlLmluZGV4fHxtZXRhLmluZGV4CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIHN1Yi5faW5kZXgsIGNtZHMsIGNiKSB9CgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViLCBtZXRhLCBza2lwKQoJCX0sIHRhcmdldHx8Y2FuLl9vdXRwdXQsIGZpZWxkKQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBmaWVsZCkgeyBtZXRhID0gbWV0YXx8e30sIG1ldGEuaW5kZXggPSBtZXRhLmluZGV4fHxjYW4uY29yZS5LZXlzKG1ldGEuY3R4LCBtZXRhLmNtZCkKCQl2YXIgcCA9IGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YVttZXRhLmluZGV4XSwgcmVzID0ge307IGZ1bmN0aW9uIGNicyhzdWIsIG1ldGEsIHNraXApIHsgcmVzLl9fcHJvdG9fXyA9IHN1YiwgY2Ioc3ViLCBtZXRhLCBza2lwKSB9CgkJKG1ldGEubWV0YSB8fCBtZXRhLmlucHV0cyAmJiBtZXRhLmlucHV0cy5sZW5ndGggPiAwKT8gLyog5bGA6YOo5ZG95LukICovIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwge21ldGE6IG1ldGEubWV0YSwgbGlzdDogbWV0YS5saXN0fSwgbWV0YSwgY2JzLCB0YXJnZXQsIGZpZWxkKToKCQkJcD8gLyog5YmN56uv5ZG95LukICovIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwge25hbWU6IG1ldGEuaW5kZXgsIGhlbHA6IHAuaGVscCwgbWV0YTogcC5tZXRhLCBsaXN0OiBwLmxpc3R9LCBtZXRhLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgdmFyIF9jYiA9IHAsIG4gPSAwCgkJCQkJaWYgKHAubWV0YSAmJiBwLm1ldGFbY21kc1sxXV0gJiYgY21kc1swXSA9PSBjdHguQUNUSU9OKSB7IF9jYiA9IHAubWV0YVtjbWRzWzFdXSwgbiA9IDIgfSBlbHNlIGlmIChwLm1ldGEgJiYgcC5tZXRhW2NtZHNbMF1dKSB7IF9jYiA9IHAubWV0YVtjbWRzWzBdXSwgbiA9IDEgfQoJCQkJCWNhbi5jb3JlLkNhbGxGdW5jKF9jYiwge2Nhbjogc3ViLCBtc2c6IGNhbi5yZXF1ZXN0KGV2ZW50KSwgY21kczogY21kcy5zbGljZShuKSwgY2I6IGNifSkKCQkJCX0KCQkJCWNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhzdWIsIG1ldGEsIHNraXApCgkJCX0sIHRhcmdldCwgZmllbGQpOiAvKiDlkI7nq6/lkb3ku6QgKi8gY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbWV0YSksIGN0eC5DT01NQU5ELCBbbWV0YS5pbmRleF0sIGZ1bmN0aW9uKG1zZykgeyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCWNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgdmFsdWUsIG1ldGEsIGNicywgdGFyZ2V0LCBmaWVsZCkKCQkJfSkgfSkKCQlyZXR1cm4gcmVzCgl9LAoJZmlndXJlOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCwgY2JzKSB7IGlmIChbaHRtbC5CVVRUT04sIGh0bWwuU0VMRUNUXS5pbmRleE9mKG1ldGEudHlwZSkgPiAtMSkgeyByZXR1cm4gfQoJCXZhciBpbnB1dCA9IG1ldGEuYWN0aW9ufHxtZGIuS0VZOyBpbnB1dCAhPSBpY2UuQVVUTyAmJiBjYW4ucmVxdWlyZShbIi9wbHVnaW4vaW5wdXQvIitpbnB1dCsiLmpzIl0sIGZ1bmN0aW9uKGNhbikgewoJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZmlndXJlW2lucHV0XSwgZnVuY3Rpb24oa2V5LCBvbikgeyB2YXIgbGFzdCA9IHRhcmdldFtrZXldOyB0YXJnZXRba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IG9uKGV2ZW50LCBjYW4sIG1ldGEsIGZ1bmN0aW9uKGNiKSB7CgkJCQlmdW5jdGlvbiBfY2JzKHN1YiwgdmFsdWUsIG9sZCkgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2JzKT8gY2JzKHN1YiwgdmFsdWUsIG9sZCk6IHRhcmdldC52YWx1ZSA9IHZhbHVlfHwiIiwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCkgfSkgfQoJCQkJaWYgKHRhcmdldC5fY2FuKSB7IHJldHVybiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgIHRhcmdldC5fY2FuLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHRhcmdldC5fY2FuLCBfY2JzKSB9CgkJCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogaHRtbC5JTlBVVCwgbmFtZTogaW5wdXQsIHBvczogY2hhdC5GTE9BVCwgbW9kZTogbWV0YS5tb2RlfSwgWyIvcGx1Z2luL2lucHV0LyIraW5wdXQrIi5qcyJdLCBmdW5jdGlvbihzdWIpIHsgc3ViLkNvbmYobWV0YSkKCQkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCQkJCWlmIChtZXRhLnJhbmdlKSB7CgkJCQkJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBmb3IgKHZhciBpID0gbWV0YS5yYW5nZVswXTsgaSA8IG1ldGEucmFuZ2VbMV07IGkgKz0gbWV0YS5yYW5nZVsyXXx8MSkgeyBtc2cuUHVzaCgidmFsdWUiLCBpKSB9IGNiKG1zZykKCQkJCQkJCXJldHVybgoJCQkJCQl9CgkJCQkJCShtZXRhLnJ1bnx8Y2FuLnJ1bikoc3ViLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIGNtZHMsIGNiLCB0cnVlKQoJCQkJCX0KCQkJCQljYW4ub25sYXlvdXQuZmlndXJlKHt0YXJnZXQ6IHRhcmdldH0sIGNhbiwgc3ViLl90YXJnZXQpLCBjYW4ucGFnZS5zdHlsZShzdWIsIHN1Yi5fdGFyZ2V0LCBtZXRhLnN0eWxlKQoJCQkJCXRhcmdldC5fY2FuID0gc3ViLCBzdWIuY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgc3ViLl90YXJnZXQpLCBkZWxldGUodGFyZ2V0Ll9jYW4pIH0KCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YiwgX2NicyksIGNhbi5iYXNlLmlzRnVuYyhtZXRhLl9pbml0KSAmJiBtZXRhLl9pbml0KHN1Yiwgc3ViLl90YXJnZXQpCgkJCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCQkJfSwgdGFyZ2V0LCBsYXN0KSB9IH0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05MQVlPVVQsIHtoZWxwOiAi6aG16Z2i5biD5bGAIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9yb290Ll90YXJnZXQKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBjYW4uY29yZS5LZXlzKGh0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5QQUdFKSkubGVuZ3RoID4gMCkgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTEVGVCwgZnVuY3Rpb24oZmllbGQpIHsgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgIiIpCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtbaHRtbC5GSUVMRFNFVF9MRUZULCBodG1sLkRJVl9PVVRQVVRdXSwgZnVuY3Rpb24ob3V0cHV0KSB7CgkJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsICIiKQoJCQkJfSkKCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkZJRUxEU0VUX01BSU4sIGZ1bmN0aW9uKGZpZWxkKSB7IGNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgZmllbGQsICIiKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgb3V0cHV0LCAiIikKCQkJCX0pCgkJCX0pCgkJCXJldHVybgoJCX0KCgkJdmFyIHdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5wYWdlLktleXMoaHRtbC5GSUVMRFNFVF9IRUFELCBodG1sLkZJRUxEU0VUX0ZPT1QpLCBmdW5jdGlvbihmaWVsZCkgewoJCQloZWlnaHQgLT0gZmllbGQub2Zmc2V0SGVpZ2h0CgkJfSkKCgkJdmFyIG9mZnNldCA9IGNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpPyAxMDA6IDAKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuRklFTERTRVRfTEVGVCwgZnVuY3Rpb24oZmllbGQsIGluZGV4KSB7CgkJCWNhbi51c2VyLmlzTW9iaWxlIHx8ICh3aWR0aCAtPSBmaWVsZC5vZmZzZXRXaWR0aCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBmaWVsZCwgaGVpZ2h0LW9mZnNldCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTEVGVCwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsIGhlaWdodC1vZmZzZXQtaHRtbC5BQ1RJT05fSEVJR0hULTIpCgkJCX0pCgkJfSkKCgkJY2FuLnVzZXIuaXNNb2JpbGUgfHwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLkZJRUxEU0VUX01BSU4sIGZ1bmN0aW9uKGZpZWxkLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGZpZWxkLCBodG1sLkhFSUdIVCwgaGVpZ2h0LCBodG1sLldJRFRILCB3aWR0aCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbW2h0bWwuRklFTERTRVRfTUFJTiwgaHRtbC5ESVZfT1VUUFVUXV0sIGZ1bmN0aW9uKG91dHB1dCkgewoJCQkJaGVpZ2h0IC09IGNhbi5wYWdlLlNlbGVjdChjYW4sIGZpZWxkLCBodG1sLkRJVl9BQ1RJT04pWzBdLm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBvdXRwdXQsIGhlaWdodCkKCQkJfSkKCQl9KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNJWkUsIGNhbi5yZXF1ZXN0KHt9LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodH0pKQoJfSwKCWJhY2tncm91bmQ6IGZ1bmN0aW9uKGNhbiwgdXJsLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldHx8Y2FuLl9yb290Ll90YXJnZXQsIGh0bWwuQkFDS0dST1VORCwgdXJsID09ICIiIHx8IHVybCA9PSAidm9pZCI/ICIiOiAndXJsKCInK3VybCsnIiknKQoJfSwKCWZpZ3VyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCByaWdodCkgeyBpZiAoIWV2ZW50IHx8ICFldmVudC50YXJnZXQpIHsgcmV0dXJuIHt9IH0gdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX2ZpZWxkc3x8Y2FuLl90YXJnZXQKCQl2YXIgcmVjdCA9IGV2ZW50LnRhcmdldCA9PSBkb2N1bWVudC5ib2R5PyB7bGVmdDogd2luZG93LmlubmVyV2lkdGgvMiwgdG9wOiAyMDAsIHJpZ2h0OiB3aW5kb3cuaW5uZXJXaWR0aC8yLCBib3R0b206IDIwMH06IGV2ZW50LnRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBsYXlvdXQgPSByaWdodD8ge2xlZnQ6IHJlY3QucmlnaHQsIHRvcDogcmVjdC50b3B9OiB7bGVmdDogcmVjdC5sZWZ0LCB0b3A6IHJlY3QuYm90dG9tfQoJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkgeyBsZWZ0ID0gbGVmdHx8MCwgdG9wID0gdG9wfHwwCgkJCWlmIChsYXlvdXQudG9wK3RhcmdldC5vZmZzZXRIZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQpIHsKCQkJCWxheW91dC50b3AgPSAiIiwgbGF5b3V0LmJvdHRvbSA9IHJpZ2h0PyBodG1sLkFDVElPTl9IRUlHSFQ6IHdpbmRvdy5pbm5lckhlaWdodC1yZWN0LnRvcAoJCQl9CgkJCWlmIChsYXlvdXQubGVmdCt0YXJnZXQub2Zmc2V0V2lkdGggPiBsZWZ0K3dpZHRoKSB7CgkJCQlsYXlvdXQubGVmdCA9ICIiLCBsYXlvdXQucmlnaHQgPSAwCgkJCX0KCQl9KQoJCXJldHVybiBjYW4ub25tb3Rpb24ubW92ZShjYW4sIHRhcmdldCwgbGF5b3V0KSwgbGF5b3V0Cgl9LAoKCWRpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQlyZXR1cm4gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbCgkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuQ09OVEVOVH1dfSwKCQkJe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFt7dmlldzogY2hhdC5ESVNQTEFZfV19LAoJCV19XSkKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5MQVlPVVQsIGh0bWwuVEFCTEVdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVFIsIGxpc3Q6IFsKCQkJe3R5cGU6IGh0bWwuVEQsIGxpc3Q6IFt7dmlldzogY2hhdC5QUk9KRUNULCBzdHlsZToge2Rpc3BsYXk6IGh0bWwuTk9ORX19XX0sIHt0eXBlOiBodG1sLlRELCBsaXN0OiBbCgkJCQl7dmlldzogW2NoYXQuTEFZT1VULCBodG1sLlRBQkxFXSwgbGlzdDogWwoJCQkJCXt0eXBlOiBodG1sLlRSLCBsaXN0OiBbe3ZpZXc6IGNoYXQuQ09OVEVOVH1dfSwKCQkJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t2aWV3OiBjaGF0LkRJU1BMQVl9XX0sCgkJCQldfQoJCQldfQoJCV19XSB9XSkKCX0sCglwcm9maWxlX2F1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuLCB0YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkucHJvamVjdCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvamVjdCwgaWNlLkFVVE8pCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi51aS5wcm9maWxlLCBpY2UuQVVUTykKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLmRpc3BsYXksIGljZS5BVVRPKQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgl9LAoJcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dAoJCWZ1bmN0aW9uIHRvZ2dsZSh2aWV3KSB7IHZhciBzaG93ID0gdmlldy5zdHlsZS5kaXNwbGF5ID09IGh0bWwuTk9ORQoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgdmlldywgc2hvdyksIHZpZXcuX3RvZ2dsZT8gdmlldy5fdG9nZ2xlKGV2ZW50LCBzaG93KTogY2FuLm9uaW1wb3J0LmxheW91dCAmJiBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJcmV0dXJuIHNob3cKCQl9CgoJCS8vIHZhciBndCA9ICImIzEwMDk1OyIsIGx0ID0gIiYjMTAwOTQ7IiwgZG93biA9ICImIzcwOTsiLCB1cCA9ICImIzcwODsiCgkJdmFyIGd0ID0gIiYjMTAwOTU7IiwgbHQgPSAiJiMxMDA5NDsiLCBkb3duID0gbHQsIHVwID0gZ3QKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuTEFZT1VULCBodG1sLlRBQkxFXSwgbGlzdDogWwoJCQl7dmlldzogW2NoYXQuUFJPSkVDVCwgaHRtbC5URF0sIGxpc3Q6IFt7dmlldzogW2NoYXQuUFJPSkVDVF19XX0sCgkJCXt0eXBlOiBodG1sLlRELCBsaXN0OiBbCgkJCQl7dHlwZTogaHRtbC5UUiwgbGlzdDogW3t0eXBlOiBodG1sLlRSLCBsaXN0OiBbCgkJCQkJe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVERdLCBsaXN0OiBbe3ZpZXc6IFtjaGF0LkNPTlRFTlRdfSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPSkVDVF1dLCBsaXN0OiBbe3RleHQ6IFtsdCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLnByb2plY3QpPyBsdDogZ3QsIGh0bWwuRElWXX1dKQoJCQkJCQl9fSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuUFJPRklMRV1dLCBsaXN0OiBbe3RleHQ6IFtsdCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLnByb2ZpbGUpPyBndDogbHQsIGh0bWwuRElWXX1dKQoJCQkJCQl9fSwKCQkJCQkJe3ZpZXc6IFtbaHRtbC5UT0dHTEUsIGNoYXQuRElTUExBWV1dLCBsaXN0OiBbe3RleHQ6IFt1cCwgaHRtbC5ESVZdfV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgZXZlbnQudGFyZ2V0LCBbe3RleHQ6IFt0b2dnbGUoY2FuLnVpLmRpc3BsYXkpPyBkb3duOiB1cCwgaHRtbC5ESVZdfV0pCgkJCQkJCX19LAoJCQkJCV19LAoJCQkJCXt2aWV3OiBbY2hhdC5QUk9GSUxFLCBodG1sLlREXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5QUk9GSUxFXSwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9fV19LAoJCQkJXX1dfSwKCQkJCXt2aWV3OiBbY2hhdC5ESVNQTEFZLCBodG1sLlRSXSwgbGlzdDogW3t2aWV3OiBbY2hhdC5ESVNQTEFZXSwgc3R5bGU6IHtkaXNwbGF5OiBodG1sLk5PTkV9fV19CgkJCV19CgkJXSB9XSk7IHJldHVybiBjYW4udWkgPSB1aQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTk1PVElPTiwge2hlbHA6ICLliqjmgIHnibnmlYgiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihodG1sLk9SSUVOVEFUSU9OQ0hBTkdFLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5PUklFTlRBVElPTkNIQU5HRSkgfSkKCQljYW4ub25tb3Rpb24uZmxvYXQuYXV0byhjYW4sIHRhcmdldCkKCX0sCglmbG9hdDoge19oYXNoOiB7fSwKCQlkZWw6IGZ1bmN0aW9uKGNhbiwga2V5KSB7CgkJCWtleSA9PSBjaGF0LkNBUlRFICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBjaGF0LkNBUlRFKSwgZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB0YXJnZXQpCgkJCX0pCgkJCXZhciBsYXN0ID0gdGhpcy5faGFzaFtrZXldOyBpZiAoIWxhc3QpIHsgcmV0dXJuIH0KCQkJbGFzdC5jbG9zZT8gbGFzdC5jbG9zZSgpOiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBsYXN0Ll90YXJnZXQpCgkJfSwKCQlhZGQ6IGZ1bmN0aW9uKGNhbiwga2V5LCB2YWx1ZSkgeyByZXR1cm4gdGhpcy5kZWwoY2FuLCBrZXkpLCB0aGlzLl9oYXNoW2tleV0gPSB2YWx1ZSB9LAoJCWF1dG86IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBrZXkpIHsgdmFyIHRoYXQgPSB0aGlzCgkJCXZhciBsaXN0ID0gY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDIpCgkJCWlmIChsaXN0Lmxlbmd0aCA9PSAwKSB7IGxpc3QgPSBbY2hhdC5DQVJURSwgY2hhdC5JTlBVVF0gfQoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHtvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgCgkJCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5JTUcsIGV2ZW50LnRhcmdldCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oa2V5LCBpbmRleCkgeyB0aGF0LmRlbChjYW4sIGtleSkgfSkKCQkJfX0pCgkJfSwKCX0sCglzdG9yeTogewoJCV9oYXNoOiB7CgkJCXNwYXJrOiBmdW5jdGlvbihjYW4sIG1ldGEsIHRhcmdldCkgewoJCQkJbWV0YVttZGIuTkFNRV0gPT0gaHRtbC5JTk5FUj8gY2FuLm9ubW90aW9uLmNvcHkoY2FuLCB0YXJnZXQpOiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuU1BBTiwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSkKCQkJCX0pCgkJCX0sCgkJfSwKCQlhdXRvOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyB2YXIgdGhhdCA9IHRoaXM7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiLnN0b3J5IiwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgbWV0YSA9IGl0ZW0uZGF0YXNldAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCBjYW4uYmFzZS5PYmoobWV0YS5zdHlsZSkpCgkJCQljYW4uY29yZS5DYWxsRnVuYyh0aGF0Ll9oYXNoW21ldGEudHlwZV0sIFtjYW4sIG1ldGEsIHRhcmdldF0pCgkJCX0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgaXRlbSwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCktODgsIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKS0zMCkKCQkJfSkKCQl9LAoJfSwKCWNvcHk6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB0ZXh0LCBjYikgewoJCXRhcmdldC50aXRsZSA9ICLngrnlh7vlpI3liLYiLCB0YXJnZXQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgdGV4dHx8dGFyZ2V0LmlubmVyVGV4dCkKCQkJY2FuLnJlcXVlc3QoZXZlbnQsIGtpdC5EaWN0KGljZS5NU0dfSEFORExFLCBpY2UuVFJVRSkpCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQpCgkJfQoJfSwKCWxpbms6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCB0ZXh0KSB7CgkJaWYgKHRhcmdldC5pbm5lclRleHQgPT0gIiIpIHsgdGFyZ2V0LmlubmVyVGV4dCA9IHRhcmdldC5ocmVmIH0KCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXQsIHt0YXJnZXQ6ICJfYmxhbmsifSkKCX0sCgoJY2xlYXI6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHJldHVybiBjYW4ucGFnZS5Nb2RpZnkoY2FuLCB0YXJnZXR8fGNhbi5fb3V0cHV0LCAiIiksIHRydWUgfSwKCWNhY2hlOiBmdW5jdGlvbihjYW4sIG5leHQpIHsgdmFyIGxpc3QgPSBjYW4uYmFzZS5PYmooY2FuLmNvcmUuTGlzdChhcmd1bWVudHMpLnNsaWNlKDIpLCBbY2FuLl9vdXRwdXRdKQoJCWNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLl9jYWNoZV9rZXkgJiYgY2FuLnBhZ2UuQ2FjaGUoaXRlbS5fY2FjaGVfa2V5LCBpdGVtLCBpdGVtLnNjcm9sbFRvcCsxKSB9KQoJCXZhciBrZXkgPSBuZXh0KGNhbi5fY2FjaGVfZGF0YSA9IGNhbi5fY2FjaGVfZGF0YXx8e30pOyBpZiAoIWtleSkgeyByZXR1cm4gfQoJCXJldHVybiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIHBvcyA9IGNhbi5wYWdlLkNhY2hlKGl0ZW0uX2NhY2hlX2tleSA9IGtleSwgaXRlbSkKCQkJaWYgKHBvcykgeyBpdGVtLnNjcm9sbFRvICYmIGl0ZW0uc2Nyb2xsVG8oMCwgcG9zLTEpOyByZXR1cm4gaXRlbSB9CgkJfSkubGVuZ3RoID4gMAoJfSwKCWRlbGF5OiBmdW5jdGlvbihjYW4sIGNiLCBpbnRlcnZhbCkgeyBjYW4uY29yZS5UaW1lcihpbnRlcnZhbHx8MTAwLCBjYikgfSwKCWZvY3VzOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgeyBpZiAoIXRhcmdldCkgeyByZXR1cm4gfQoJCXRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZSAmJiB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgLTEpLCB0YXJnZXQuZm9jdXMoKQoJfSwKCXNoYXJlOiBmdW5jdGlvbihldmVudCwgY2FuLCBpbnB1dCwgYXJncykgeyB2YXIgX2FyZ3MgPSBhcmdzCgkJcmV0dXJuIGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGlucHV0LCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5zZWFyY2goY2FuLnJlcXVlc3QoZXZlbnQsIHthcmdzOiBbbWRiLlRZUEUsIGNoYXQuRklFTERdLmNvbmNhdChfYXJnc3x8W10sIGFyZ3N8fFtdKX0pLCBbWyJIZWFkZXIiLCBjaGF0Lk9OQUNUSU9OLCB3ZWIuU0hBUkVdXSkKCQl9KQoJfSwKCgloaWRkZW46IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBzaG93KSB7CgkJY2FuLnBhZ2Uuc3R5bGVEaXNwbGF5KGNhbiwgdGFyZ2V0fHxjYW4uX3RhcmdldCwgc2hvdz8gIiI6IGh0bWwuTk9ORSkKCQlyZXR1cm4gc2hvdwoJfSwKCXRvZ2dsZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIHNob3csIGhpZGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX3RhcmdldAoJCWlmIChzaG93ID09PSB0cnVlKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0LCB0cnVlKSB9CgkJaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgdGFyZ2V0LCBmYWxzZSkgfQoJCXZhciBzdGF0dXMgPSB0YXJnZXQuc3R5bGUuZGlzcGxheSA9PSBodG1sLk5PTkUKCQlpZiAoIShzdGF0dXM/IGNhbi5iYXNlLmlzRnVuYyhzaG93KSAmJiBzaG93KCk6IGNhbi5iYXNlLmlzRnVuYyhoaWRlKSAmJiBoaWRlKCkpKSB7CgkJCWNhbi5wYWdlLnN0eWxlRGlzcGxheShjYW4sIHRhcmdldCwgc3RhdHVzPyAiIjogaHRtbC5OT05FKQoJCX0KCQlyZXR1cm4gc3RhdHVzCgl9LAoJc2VsZWN0OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbmFtZSwgd2hpY2gpIHsKCQl2YXIgb2xkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBuYW1lLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKSkgeyByZXR1cm4gaW5kZXggfQoJCX0pWzBdCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBuYW1lLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQljYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QsIGl0ZW0gPT0gd2hpY2ggfHwgd2hpY2ggPT0gaW5kZXgpCgkJfSkKCQlyZXR1cm4gb2xkCgl9LAoJbW9kaWZ5OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgY2IsIGl0ZW0pIHsgdmFyIGJhY2sgPSB0YXJnZXQuaW5uZXJIVE1MLCB0ZXh0ID0gdGFyZ2V0LmlubmVyVGV4dAoJCWlmIChiYWNrLmxlbmd0aCA+IDEyMCB8fCBiYWNrLmluZGV4T2YoaWNlLk5MKSA+IC0xKSB7CgkJCXJldHVybiBjYW4ub25tb3Rpb24ubW9kaWZ5cyhjYW4sIHRhcmdldCwgY2IpCgkJfQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JTlBVVCwgdmFsdWU6IHRhcmdldC5pbm5lclRleHQsIHN0eWxlOiB7CgkJCXdpZHRoOiB0YXJnZXQub2Zmc2V0V2lkdGggPiA0MDA/IDQwMDogdGFyZ2V0Lm9mZnNldFdpZHRoLTIwLAoJCX0sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogdGFyZ2V0LmlubmVySFRNTCA9IGV2ZW50LnRhcmdldC52YWx1ZQoJCQkJCWV2ZW50LnRhcmdldC52YWx1ZSA9PSBiYWNrIHx8IGNiKGV2ZW50LCBldmVudC50YXJnZXQudmFsdWUsIGJhY2spCgkJCQkJYnJlYWsKCQkJCWNhc2UgbGFuZy5FU0NBUEU6IHRhcmdldC5pbm5lckhUTUwgPSBiYWNrOyBicmVhawoJCQkJZGVmYXVsdDogY2FuLm9ua2V5bWFwLmlucHV0KGV2ZW50LCBjYW4pCgkJCX0KCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IGl0ZW0gJiYgY2FuLm9uYXBwZW5kLmZpZ3VyZShjYW4sIGl0ZW0sIHRhcmdldCwgY2IpCgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIHRhcmdldCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB0YXJnZXQuY2xpY2soKSB9KQoJCX19XSkKCX0sCgltb2RpZnlzOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgY2IsIGl0ZW0pIHsgdmFyIGJhY2sgPSB0YXJnZXQuaW5uZXJIVE1MCgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kcyhjYW4sIHRhcmdldCwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCB2YWx1ZTogdGFyZ2V0LmlubmVyVGV4dCwgc3R5bGU6IHsKCQkJd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aCA+IDQwMD8gNDAwOiB0YXJnZXQub2Zmc2V0V2lkdGgtMjAsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCA8IDYwPyA2MDogdGFyZ2V0Lm9mZnNldEhlaWdodC0yMCwKCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCQljYXNlIGxhbmcuRU5URVI6CgkJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsgdGFyZ2V0LmlubmVySFRNTCA9IGV2ZW50LnRhcmdldC52YWx1ZQoJCQkJCQlldmVudC50YXJnZXQudmFsdWUgPT0gYmFjayB8fCBjYihldmVudCwgZXZlbnQudGFyZ2V0LnZhbHVlLCBiYWNrKQoJCQkJCX0KCQkJCQlicmVhawoJCQkJY2FzZSBsYW5nLkVTQ0FQRTogdGFyZ2V0LmlubmVySFRNTCA9IGJhY2s7IGJyZWFrCgkJCQlkZWZhdWx0OiBjYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbikKCQkJfQoJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJaXRlbSAmJiBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwgaXRlbSwgdGFyZ2V0KQoJCQljYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdGFyZ2V0LmNsaWNrKCkgfSkKCQl9fV0pCgl9LAoJdG9pbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbmFtZSwgdGFyZ2V0KSB7CgkJY2FuLnJlcXVpcmUoWyJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2h0bWwyY2FudmFzQDEuMC4wLXJjLjUvZGlzdC9odG1sMmNhbnZhcy5taW4uanMiXSwgZnVuY3Rpb24oKSB7CgkJCWh0bWwyY2FudmFzKHRhcmdldHx8Y2FuLl90YXJnZXQpLnRoZW4oZnVuY3Rpb24gKGNhbnZhcykgeyB2YXIgdXJsID0gY2FudmFzLnRvRGF0YVVSTCgiaW1hZ2UvcG5nIikKCQkJCXZhciB0b2FzdCA9IGNhbi51c2VyLnRvYXN0KGNhbiwge2NvbnRlbnQ6IHtpbWc6IHVybCwgc3R5bGU6IHsibWF4LWhlaWdodCI6IDI0MCwgZGlzcGxheTogaHRtbC5CTE9DS319LCBkdXJhdGlvbjogLTEsCgkJCQkJYWN0aW9uOiBzaHkoe30sIFtjbGkuQ0xPU0UsICJkb3dubG9hZCJdLCBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogbWRiLk5BTUUsIHZhbHVlOiBuYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsgdG9hc3QuY2xvc2UoKQoJCQkJCQkJY2FuLnBhZ2UuQ3JlYXRlKGNhbiwgaHRtbC5BLCB7aHJlZjogdXJsLCBkb3dubG9hZDogbGlzdFswXSsiLnBuZyJ9KS5jbGljaygpCgkJCQkJCX0pCgkJCQkJfSksCgkJCQl9KQoJCQl9KQoJCX0pCgl9LAoKCWhpZGU6IGZ1bmN0aW9uKGNhbiwgdGltZSwgY2IsIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi5fdGFyZ2V0CgkJdGltZSA9IGNhbi5iYXNlLmlzT2JqZWN0KHRpbWUpPyB0aW1lOiB7dmFsdWU6IDEwLCBsZW5ndGg6IHRpbWV8fDIwfQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBodG1sLk9QQUNJVFksIDEpCgkJY2FuLmNvcmUuVGltZXIodGltZSwgZnVuY3Rpb24oZXZlbnQsIHZhbHVlLCBpbmRleCkgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5PUEFDSVRZLCAxLShpbmRleCsxKS90aW1lLmxlbmd0aCkKCQl9LCBmdW5jdGlvbigpIHsgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpLCBjYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5ESVNQTEFZLCBodG1sLk5PTkUpIH0pCgl9LAoJc2hvdzogZnVuY3Rpb24oY2FuLCB0aW1lLCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl90YXJnZXQKCQl0aW1lID0gY2FuLmJhc2UuaXNPYmplY3QodGltZSk/IHRpbWU6IHtpbnRlcnZhbDogMTAsIGxlbmd0aDogdGltZXx8MzB9CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgMCwgaHRtbC5ESVNQTEFZLCBodG1sLkJMT0NLKQoJCWNhbi5jb3JlLlRpbWVyKHRpbWUsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgaW5kZXgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuT1BBQ0lUWSwgKGluZGV4KzEpL3RpbWUubGVuZ3RoKQoJCX0sIGNiKQoJfSwKCW1vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsYXlvdXQsIGNiKSB7IHZhciBiZWdpbjsgbGF5b3V0ID0gbGF5b3V0fHx7fQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgdGFyZ2V0LCBsYXlvdXQpLCB0YXJnZXQub25tb3VzZWRvd24gPSBmdW5jdGlvbihldmVudCkgewoJCQlsYXlvdXQuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCwgbGF5b3V0LndpZHRoID0gdGFyZ2V0Lm9mZnNldFdpZHRoCgkJCWxheW91dC5sZWZ0ID0gdGFyZ2V0Lm9mZnNldExlZnQsIGxheW91dC50b3AgPSB0YXJnZXQub2Zmc2V0VG9wCgkJCWJlZ2luID0gY2FuLmJhc2UuQ29weSh7eDogZXZlbnQueCwgeTogZXZlbnQueX0sIGxheW91dCkKCQl9LCB0YXJnZXQub25tb3VzZXVwID0gZnVuY3Rpb24oZXZlbnQpIHsgYmVnaW4gPSBudWxsIH0KCgkJdGFyZ2V0Lm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFiZWdpbiB8fCAhZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfQoJCQlpZiAoZXZlbnQuc2hpZnRLZXkpIHsKCQkJCWxheW91dC53aWR0aCA9IGxheW91dC53aWR0aCArIGV2ZW50LnggLSBiZWdpbi54IAoJCQkJbGF5b3V0LmhlaWdodCA9IGxheW91dC5oZWlnaHQgKyBldmVudC55IC0gYmVnaW4ueQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBsYXlvdXQuaGVpZ2h0LCBodG1sLldJRFRILCBsYXlvdXQud2lkdGgpCgkJCX0gZWxzZSB7CgkJCQlsYXlvdXQudG9wID0gYmVnaW4udG9wICsgZXZlbnQueSAtIGJlZ2luLnkKCQkJCWxheW91dC5sZWZ0ID0gYmVnaW4ubGVmdCArIGV2ZW50LnggLSBiZWdpbi54IAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuTEVGVCwgbGF5b3V0LmxlZnQsIGh0bWwuVE9QLCBsYXlvdXQudG9wKQoJCQl9CgkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0YXJnZXQsIGxheW91dCkKCQl9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0YXJnZXQsIGxheW91dCkKCX0sCgoJc2VsZWN0RmllbGQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoIWV2ZW50LmN0cmxLZXkgfHwgZXZlbnQua2V5IDwgIjAiIHx8IGV2ZW50LmtleSA+ICI5IikgeyByZXR1cm4gfQoJCWlmIChldmVudC5rZXkgPT0gIjAiKSB7IHJldHVybiBjYW4ub25pbXBvcnQuX2JhY2soY2FuKSB9CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuVFIsIGZ1bmN0aW9uKHRyLCBpbmRleCkgeyBpZiAoaW5kZXggPT0gZXZlbnQua2V5KSB7CgkJCXZhciBoZWFkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuVEgsIGZ1bmN0aW9uKHRoLCBvcmRlcikgeyByZXR1cm4gdGguaW5uZXJUZXh0IH0pCgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsgY2FuLk9wdGlvbihoZWFkW2luZGV4XSwgdGQuaW5uZXJUZXh0KSB9KQoJCQljYW4uVXBkYXRlKGV2ZW50KQoJCX0gfSkKCX0sCglzZWxlY3RJbnB1dFRhYmxlOiBmdW5jdGlvbihldmVudCwgY2FuLCBjYiwgdGFyZ2V0KSB7CgkJLy8gaWYgKHRhcmdldC52YWx1ZSA9PSAiIikgeyByZXR1cm4gY2IoKSB9CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSBsYW5nLlNISUZUOgoJCQljYXNlIGxhbmcuQ09OVFJPTDoKCQkJCXJldHVybgoJCX0KCgkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJaWYgKHRhcmdldC5faW5kZXggPT0gdW5kZWZpbmVkKSB7CgkJCQl0YXJnZXQuX2luZGV4ID0gLTEsIHRhcmdldC5fdmFsdWUgPSB0YXJnZXQudmFsdWUKCQkJfQoJCQlmdW5jdGlvbiBzZWxlY3Qob3JkZXIpIHsgaWYgKG9yZGVyID09IC0xKSB7IHRhcmdldC52YWx1ZSA9IHRhcmdldC5fdmFsdWUgfQoJCQkJdmFyIGluZGV4ID0gMDsgcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoY2FuLCB0ciwgaHRtbC5ISURERU4pKSB7IHJldHVybiB9CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHRyLCBodG1sLlNFTEVDVCk7IGlmIChvcmRlciAhPSBpbmRleCsrKSB7IHJldHVybiB0ciB9CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCBodG1sLlNFTEVDVCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsKCQkJCQkJaW5kZXggPT0gMCAmJiAodGFyZ2V0LnZhbHVlID0gdGQuaW5uZXJUZXh0KQoJCQkJCX0pOyByZXR1cm4gdHIKCQkJCX0pLmxlbmd0aAoJCQl9CgkJCXZhciB0b3RhbCA9IHNlbGVjdCh0YXJnZXQuX2luZGV4KTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgIm4iOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4KzIpICUgKHRvdGFsKzEpIC0gMSk7IGJyZWFrCgkJCQljYXNlICJwIjogc2VsZWN0KHRhcmdldC5faW5kZXggPSAodGFyZ2V0Ll9pbmRleCt0b3RhbCsxKSAlICh0b3RhbCsxKSAtIDEpOyBicmVhawoJCQkJZGVmYXVsdDogcmV0dXJuCgkJCX0KCQkJcmV0dXJuIGNhbi5TdGF0dXMobWRiLklOREVYLCB0YXJnZXQuX2luZGV4KSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJfQoKCQl0YXJnZXQuX2luZGV4ID0gLTEsIHRhcmdldC5fdmFsdWUgPSB0YXJnZXQudmFsdWUKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJdmFyIGhhcyA9IGZhbHNlOyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCWhhcyA9IGhhcyB8fCB0ZC5pbm5lclRleHQuaW5kZXhPZih0YXJnZXQudmFsdWUpPi0xCgkJCX0pLCBjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuSElEREVOLCAhaGFzKQoJCX0pCgoJCXZhciB0b3RhbCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCWlmICghY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIHRyLCBodG1sLkhJRERFTikpIHsgcmV0dXJuIHRyIH0KCQl9KS5sZW5ndGg7IHRvdGFsID09IDAgJiYgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJY2FuLlN0YXR1cyhraXQuRGljdChtZGIuVE9UQUwsIHRvdGFsLCBtZGIuSU5ERVgsIHRhcmdldC5faW5kZXgpKQoJfSwKCXNlbGVjdFRhYmxlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNiKSB7IGlmICghZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfQoJCWZ1bmN0aW9uIHNlbGVjdChvcmRlcikgeyB2YXIgaW5kZXggPSAwCgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIpIHsKCQkJCWlmIChjYW4ucGFnZS5DbGFzc0xpc3QuaGFzKGNhbiwgdHIsIGh0bWwuSElEREVOKSkgeyByZXR1cm4gfQoJCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuU0VMRUNULCBvcmRlciA9PSBpbmRleCsrKSkgeyByZXR1cm4gdHIgfQoJCQkJcmV0dXJuIGNhbi5TdGF0dXMobWRiLklOREVYLCBpbmRleC0xKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih0ciksIHRyCgkJCX0pLmxlbmd0aAoJCX0KCQl2YXIgdG90YWwgPSBzZWxlY3QodGFyZ2V0Ll9pbmRleCk7IHN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgIm4iOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICgodGFyZ2V0Ll9pbmRleCkrMSkgJSB0b3RhbCk7IGJyZWFrCgkJCWNhc2UgInAiOiBzZWxlY3QodGFyZ2V0Ll9pbmRleCA9ICh0YXJnZXQuX2luZGV4LTEpIDwgMD8gdG90YWwtMTogKHRhcmdldC5faW5kZXgtMSkpOyBicmVhawoJCQlkZWZhdWx0OiB0YXJnZXQuX2luZGV4ID0gMDsgcmV0dXJuCgkJfSBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi6ZSu55uY5Lqk5LqSIiwgX2ZvY3VzOiBbXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJZG9jdW1lbnQuYm9keS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJaWYgKHdpbmRvdy53ZWJ2aWV3KSB7CgkJCQlpZiAoZXZlbnQudGFyZ2V0LnRhZ05hbWUgPT0gIkEiKSB7IGNhbi51c2VyLm9wZW4oZXZlbnQudGFyZ2V0LmhyZWYpIH0KCQkJfQoJCQlpZiAoY2FuLnBhZ2UudGFnaXMoW2h0bWwuU0VMRUNULCBodG1sLklOUFVULCBodG1sLlRFWFRBUkVBXSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBkb2N1bWVudC5ib2R5LCBjYW4ucGFnZS5LZXlzKCJmaWVsZHNldC5pbnB1dC5rZXkuZmxvYXQiKSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgaXRlbSkKCQkJfSkKCQl9CgkJY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pLCBkb2N1bWVudC5ib2R5Lm9ua2V5ZG93biA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWlmIChldmVudC5tZXRhS2V5KSB7IGlmICh3aW5kb3cud2VidmlldykgewoJCQkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCQljYXNlICJxIjogd2luZG93LnRlcm1pbmF0ZSgpOyBicmVhawoJCQkJCWNhc2UgInciOiBjYW4udXNlci5jbG9zZSgpOyBicmVhawoJCQkJCWNhc2UgInIiOiBjYW4udXNlci5yZWxvYWQoKTsgYnJlYWsKCQkJCQljYXNlICJmIjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdCh7fSwge3R5cGU6ICIqIn0pKTsgYnJlYWsKCQkJCQljYXNlICJbIjogaGlzdG9yeS5iYWNrKCk7IGJyZWFrCgkJCQkJY2FzZSAiXSI6IGhpc3RvcnkuZm9yd2FyZCgpOyBicmVhawoJCQkJfQoJCQl9IHJldHVybiB9CgoJCQlpZiAoY2FuLnBhZ2UudGFnaXMoW2h0bWwuU0VMRUNULCBodG1sLklOUFVULCBodG1sLlRFWFRBUkVBXSwgZXZlbnQudGFyZ2V0KSkgeyByZXR1cm4gfQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQsIHsibW9kZWwiOiAibm9ybWFsIn0pOyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05LRVlET1dOLCBtc2cpOyBpZiAobXNnLk9wdGlvbihpY2UuTVNHX0hBTkRMRSkgPT0gaWNlLlRSVUUpIHsgcmV0dXJuIH0KCQkJY2FuLl9rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBtc2cuT3B0aW9uKCJtb2RlbCIpLCBjYW4uX2tleWxpc3QsIGNhbi5fb3V0cHV0KQoJCX0KCX0sCglfYnVpbGQ6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm9ua2V5bWFwLl9tb2RlLCBmdW5jdGlvbihpdGVtLCB2YWx1ZSkgeyB2YXIgZW5naW5lID0ge2xpc3Q6IHt9fQoJCQljYW4uY29yZS5JdGVtKHZhbHVlLCBmdW5jdGlvbihrZXksIGNiKSB7IHZhciBtYXAgPSBlbmdpbmUKCQkJCWZvciAodmFyIGkgPSAwOyBpIDwga2V5Lmxlbmd0aDsgaSsrKSB7CgkJCQkJaWYgKCFtYXAubGlzdFtrZXlbaV1dKSB7IG1hcC5saXN0W2tleVtpXV0gPSB7bGlzdDoge319IH0KCQkJCQltYXAgPSBtYXAubGlzdFtrZXlbaV1dOyBpZiAoaSA9PSBrZXkubGVuZ3RoLTEpIHsgbWFwLmNiID0gY2IgfQoJCQkJfQoJCQl9KSwgY2FuLm9ua2V5bWFwLl9lbmdpbmVbaXRlbV0gPSBlbmdpbmUKCQl9KQoJfSwKCV9wYXJzZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbW9kZSwgbGlzdCwgdGFyZ2V0KSB7IGxpc3QgPSBsaXN0fHxbXQoJCWlmIChbIkNvbnRyb2wiLCAiU2hpZnQiXS5pbmRleE9mKGV2ZW50LmtleSkgPiAtMSkgeyByZXR1cm4gbGlzdCB9CgkJbGlzdC5wdXNoKGV2ZW50LmtleSk7IGZvciAodmFyIHByZSA9IDA7IHByZSA8IGxpc3QubGVuZ3RoOyBwcmUrKykgewoJCQlpZiAoIjAiIDw9IGxpc3RbcHJlXSAmJiBsaXN0W3ByZV0gPD0gIjkiKSB7IGNvbnRpbnVlIH0gYnJlYWsKCQl9OyB2YXIgY291bnQgPSBwYXJzZUludChsaXN0LnNsaWNlKDAsIHByZSkuam9pbigiIikpfHwxCgoJCXZhciBtYXAgPSBjYW4ub25rZXltYXAuX21vZGVbbW9kZV0KCQlmdW5jdGlvbiByZXBlYXQoY2IsIGNvdW50KSB7IGxpc3QgPSBbXTsgZm9yICh2YXIgaSA9IDE7IGkgPD0gY291bnQ7IGkrKykgeyBpZiAoY2IoZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkpIHsgYnJlYWsgfSB9IH0KCQl2YXIgY2IgPSBtYXAgJiYgbWFwW2V2ZW50LmtleV07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGV2ZW50LmtleS5sZW5ndGggPiAxKSB7IHJlcGVhdChjYiwgY291bnQpOyByZXR1cm4gbGlzdCB9CgkJdmFyIGNiID0gbWFwICYmIG1hcFtldmVudC5rZXkudG9Mb3dlckNhc2UoKV07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGV2ZW50LmtleS5sZW5ndGggPiAxKSB7IHJlcGVhdChjYiwgY291bnQpOyByZXR1cm4gbGlzdCB9CgoJCXZhciBtYXAgPSBjYW4ub25rZXltYXAuX2VuZ2luZVttb2RlXTsgaWYgKCFtYXApIHsgcmV0dXJuIFtdIH0KCQlmb3IgKHZhciBpID0gcHJlOyBpIDwgbGlzdC5sZW5ndGg7IGkrKyApIHsKCQkJdmFyIG1hcCA9IG1hcC5saXN0W2xpc3RbaV1dOyBpZiAoIW1hcCkgeyByZXR1cm4gW10gfQoJCQlpZiAoaSA9PSBsaXN0Lmxlbmd0aC0xICYmIGNhbi5iYXNlLmlzRnVuYyhtYXAuY2IpKSB7IHJlcGVhdChtYXAuY2IsIGNvdW50KTsgcmV0dXJuIFtdIH0KCQl9CgkJcmV0dXJuIGxpc3QKCX0sCglfbW9kZTogewoJCWluc2VydDogewoJCQlqazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHRhcmdldC5ibHVyKCksIGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTEsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJRXNjYXBlOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LmJsdXIoKSB9LAoJCQlFbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBoaXMgPSB0YXJnZXQuX2hpc3Rvcnl8fFtdCgkJCQloaXMucHVzaCh0YXJnZXQudmFsdWUpLCB0YXJnZXQuX2hpc3RvcnkgPSBoaXMsIHRhcmdldC5fY3VycmVudCA9IGhpcy5sZW5ndGgKCQkJCWNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIGV2ZW50LnRhcmdldCkgJiYgY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJCQl9LAoJCX0sCgkJaW5zZXJ0X2N0cmw6IHsKCQkJcDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQl2YXIgaGlzID0gdGFyZ2V0Ll9oaXN0b3J5fHxbXSwgcG9zID0gdGFyZ2V0Ll9jdXJyZW50fHwwCgkJCQlwb3MgPSAtLXBvcyAlIChoaXMubGVuZ3RoKzEpOyBpZiAocG9zIDwgMCkgeyBwb3MgPSBoaXMubGVuZ3RoIH0KCQkJCXRhcmdldC5fY3VycmVudCA9IHBvcywgdGFyZ2V0LnZhbHVlID0gaGlzW3Bvc118fCIiCgkJCX0sCgkJCW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJdmFyIGhpcyA9IHRhcmdldC5faGlzdG9yeXx8W10sIHBvcyA9IHRhcmdldC5fY3VycmVudHx8MAoJCQkJcG9zID0gKytwb3MgJSAoaGlzLmxlbmd0aCsxKQoJCQkJdGFyZ2V0Ll9jdXJyZW50ID0gcG9zLCB0YXJnZXQudmFsdWUgPSBoaXNbcG9zXXx8IiIKCQkJfSwKCgkJCXU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIDAsIHRhcmdldC5zZWxlY3Rpb25FbmQpIH0sCgkJCWs6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJaDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0LTEsIDEpIH0sCgkJCWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIDAsIHRhcmdldC5zZWxlY3Rpb25TdGFydCkgfSwKCQkJdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBzdGFydCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydC0yLCBlbmQgPSB0YXJnZXQuc2VsZWN0aW9uRW5kLTEKCQkJCWZvciAodmFyIGkgPSBzdGFydDsgaSA+PSAwOyBpLS0pIHsKCQkJCQlpZiAodGFyZ2V0LnZhbHVlW2VuZF0gPT0gaWNlLlNQICYmIHRhcmdldC52YWx1ZVtpXSAhPSBpY2UuU1ApIHsgYnJlYWsgfQoJCQkJCWlmICh0YXJnZXQudmFsdWVbZW5kXSAhPSBpY2UuU1AgJiYgdGFyZ2V0LnZhbHVlW2ldID09IGljZS5TUCkgeyBicmVhayB9CgkJCQl9IGNhbi5vbmtleW1hcC5kZWxldGVUZXh0KHRhcmdldCwgaSsxLCBlbmQtaSkKCQkJfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCgoJaW5wdXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50Lm1ldGFrZXkpIHsgcmV0dXJuIH0gdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCXRhcmdldC5fa2V5cyA9IGNhbi5vbmtleW1hcC5fcGFyc2UoZXZlbnQsIGNhbiwgZXZlbnQuY3RybEtleT8gImluc2VydF9jdHJsIjogbWRiLklOU0VSVCwgdGFyZ2V0Ll9rZXlzLCB0YXJnZXQpCgl9LAoJcHJldmVudDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCksIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IHJldHVybiB0cnVlIH0sCglkZWxldGVUZXh0OiBmdW5jdGlvbih0YXJnZXQsIHN0YXJ0LCBjb3VudCkgeyB2YXIgZW5kID0gY291bnQ/IHN0YXJ0K2NvdW50OiB0YXJnZXQudmFsdWUubGVuZ3RoCgkJdmFyIGN1dCA9IHRhcmdldC52YWx1ZS5zbGljZShzdGFydCwgZW5kKQoJCXRhcmdldC52YWx1ZSA9IHRhcmdldC52YWx1ZS5zdWJzdHJpbmcoMCwgc3RhcnQpK3RhcmdldC52YWx1ZS5zdWJzdHJpbmcoZW5kLCB0YXJnZXQudmFsdWUubGVuZ3RoKQoJCXJldHVybiB0YXJnZXQuc2V0U2VsZWN0aW9uUmFuZ2Uoc3RhcnQsIHN0YXJ0KSwgY3V0Cgl9LAoJaW5zZXJ0VGV4dDogZnVuY3Rpb24odGFyZ2V0LCB0ZXh0KSB7IHZhciBzdGFydCA9IHRhcmdldC5zZWxlY3Rpb25TdGFydAoJCXZhciBiZWZvcmUgPSB0YXJnZXQudmFsdWUuc2xpY2UoMCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0KQoJCXZhciBhZnRlciA9IHRhcmdldC52YWx1ZS5zbGljZSh0YXJnZXQuc2VsZWN0aW9uRW5kKQoJCXRhcmdldC52YWx1ZSA9IGJlZm9yZSt0ZXh0K2FmdGVyCgkJcmV0dXJuIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShzdGFydCsxLCBzdGFydCsxKQoJfSwKCWN1cnNvck1vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBjb3VudCwgYmVnaW4pIHsgYmVnaW4gIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRTZWxlY3Rpb25SYW5nZShiZWdpbiwgYmVnaW4pCgkJdGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKHRhcmdldC5zZWxlY3Rpb25TdGFydCtjb3VudCwgdGFyZ2V0LnNlbGVjdGlvblN0YXJ0K2NvdW50KQoJfSwKfSkKCl9jYW5fbmFtZSA9ICIvcmVxdWlyZS9wYWdlL25vZGVfbW9kdWxlcy94dGVybS9saWIveHRlcm0uanMiCiFmdW5jdGlvbihlLHQpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9dCgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sdCk7ZWxzZXt2YXIgcj10KCk7Zm9yKHZhciBpIGluIHIpKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzOmUpW2ldPXJbaV19fShzZWxmLChmdW5jdGlvbigpe3JldHVybigoKT0+eyJ1c2Ugc3RyaWN0Ijt2YXIgZT17NDU2NzpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5BY2Nlc3NpYmlsaXR5TWFuYWdlcj12b2lkIDA7dmFyIG89cig5MDQyKSxzPXIoNjExNCksYT1yKDk5MjQpLGM9cigzNjU2KSxsPXIoODQ0KSxoPXIoNTU5NiksdT1yKDk2MzEpLGY9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztpLl90ZXJtaW5hbD10LGkuX3JlbmRlclNlcnZpY2U9cixpLl9saXZlUmVnaW9uTGluZUNvdW50PTAsaS5fY2hhcnNUb0NvbnN1bWU9W10saS5fY2hhcnNUb0Fubm91bmNlPSIiLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QuY2xhc3NMaXN0LmFkZCgieHRlcm0tYWNjZXNzaWJpbGl0eSIpLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC50YWJJbmRleD0wLGkuX3Jvd0NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxpLl9yb3dDb250YWluZXIuc2V0QXR0cmlidXRlKCJyb2xlIiwibGlzdCIpLGkuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1hY2Nlc3NpYmlsaXR5LXRyZWUiKSxpLl9yb3dFbGVtZW50cz1bXTtmb3IodmFyIG49MDtuPGkuX3Rlcm1pbmFsLnJvd3M7bisrKWkuX3Jvd0VsZW1lbnRzW25dPWkuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpLGkuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZChpLl9yb3dFbGVtZW50c1tuXSk7aWYoaS5fdG9wQm91bmRhcnlGb2N1c0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBpLl9vbkJvdW5kYXJ5Rm9jdXMoZSwwKX0saS5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBpLl9vbkJvdW5kYXJ5Rm9jdXMoZSwxKX0saS5fcm93RWxlbWVudHNbMF0uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLGkuX3RvcEJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksaS5fcm93RWxlbWVudHNbaS5fcm93RWxlbWVudHMubGVuZ3RoLTFdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIixpLl9ib3R0b21Cb3VuZGFyeUZvY3VzTGlzdGVuZXIpLGkuX3JlZnJlc2hSb3dzRGltZW5zaW9ucygpLGkuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZChpLl9yb3dDb250YWluZXIpLGkuX3JlbmRlclJvd3NEZWJvdW5jZXI9bmV3IGEuVGltZUJhc2VkRGVib3VuY2VyKGkuX3JlbmRlclJvd3MuYmluZChpKSksaS5fcmVmcmVzaFJvd3MoKSxpLl9saXZlUmVnaW9uPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGkuX2xpdmVSZWdpb24uY2xhc3NMaXN0LmFkZCgibGl2ZS1yZWdpb24iKSxpLl9saXZlUmVnaW9uLnNldEF0dHJpYnV0ZSgiYXJpYS1saXZlIiwiYXNzZXJ0aXZlIiksaS5fYWNjZXNzaWJpbGl0eVRyZWVSb290LmFwcGVuZENoaWxkKGkuX2xpdmVSZWdpb24pLCFpLl90ZXJtaW5hbC5lbGVtZW50KXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGVuYWJsZSBhY2Nlc3NpYmlsaXR5IGJlZm9yZSBUZXJtaW5hbC5vcGVuIik7cmV0dXJuIGkuX3Rlcm1pbmFsLmVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCJhZnRlcmJlZ2luIixpLl9hY2Nlc3NpYmlsaXR5VHJlZVJvb3QpLGkucmVnaXN0ZXIoaS5fcmVuZGVyUm93c0RlYm91bmNlciksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vblJlc2l6ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uUmVzaXplKGUucm93cyl9KSkpLGkucmVnaXN0ZXIoaS5fdGVybWluYWwub25SZW5kZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9yZWZyZXNoUm93cyhlLnN0YXJ0LGUuZW5kKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vblNjcm9sbCgoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3MoKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vbkExMXlDaGFyKChmdW5jdGlvbihlKXtyZXR1cm4gaS5fb25DaGFyKGUpfSkpKSxpLnJlZ2lzdGVyKGkuX3Rlcm1pbmFsLm9uTGluZUZlZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX29uQ2hhcigiXG4iKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vbkExMXlUYWIoKGZ1bmN0aW9uKGUpe3JldHVybiBpLl9vblRhYihlKX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vbktleSgoZnVuY3Rpb24oZSl7cmV0dXJuIGkuX29uS2V5KGUua2V5KX0pKSksaS5yZWdpc3RlcihpLl90ZXJtaW5hbC5vbkJsdXIoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX2NsZWFyTGl2ZVJlZ2lvbigpfSkpKSxpLnJlZ2lzdGVyKGkuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKChmdW5jdGlvbigpe3JldHVybiBpLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKX0pKSksaS5fc2NyZWVuRHByTW9uaXRvcj1uZXcgaC5TY3JlZW5EcHJNb25pdG9yLGkucmVnaXN0ZXIoaS5fc2NyZWVuRHByTW9uaXRvciksaS5fc2NyZWVuRHByTW9uaXRvci5zZXRMaXN0ZW5lcigoZnVuY3Rpb24oKXtyZXR1cm4gaS5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCl9KSksaS5yZWdpc3RlcigoMCxjLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikod2luZG93LCJyZXNpemUiLChmdW5jdGlvbigpe3JldHVybiBpLl9yZWZyZXNoUm93c0RpbWVuc2lvbnMoKX0pKSksaX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksKDAsdS5yZW1vdmVFbGVtZW50RnJvbVBhcmVudCkodGhpcy5fYWNjZXNzaWJpbGl0eVRyZWVSb290KSx0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGg9MH0sdC5wcm90b3R5cGUuX29uQm91bmRhcnlGb2N1cz1mdW5jdGlvbihlLHQpe3ZhciByPWUudGFyZ2V0LGk9dGhpcy5fcm93RWxlbWVudHNbMD09PXQ/MTp0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMl07aWYoci5nZXRBdHRyaWJ1dGUoImFyaWEtcG9zaW5zZXQiKSE9PSgwPT09dD8iMSI6IiIrdGhpcy5fdGVybWluYWwuYnVmZmVyLmxpbmVzLmxlbmd0aCkmJmUucmVsYXRlZFRhcmdldD09PWkpe3ZhciBuLG87aWYoMD09PXQ/KG49cixvPXRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpLHRoaXMuX3Jvd0NvbnRhaW5lci5yZW1vdmVDaGlsZChvKSk6KG49dGhpcy5fcm93RWxlbWVudHMuc2hpZnQoKSxvPXIsdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKG4pKSxuLnJlbW92ZUV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpLG8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksMD09PXQpe3ZhciBzPXRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpO3RoaXMuX3Jvd0VsZW1lbnRzLnVuc2hpZnQocyksdGhpcy5fcm93Q29udGFpbmVyLmluc2VydEFkamFjZW50RWxlbWVudCgiYWZ0ZXJiZWdpbiIscyl9ZWxzZSBzPXRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpLHRoaXMuX3Jvd0VsZW1lbnRzLnB1c2gocyksdGhpcy5fcm93Q29udGFpbmVyLmFwcGVuZENoaWxkKHMpO3RoaXMuX3Jvd0VsZW1lbnRzWzBdLmFkZEV2ZW50TGlzdGVuZXIoImZvY3VzIix0aGlzLl90b3BCb3VuZGFyeUZvY3VzTGlzdGVuZXIpLHRoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5hZGRFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKSx0aGlzLl90ZXJtaW5hbC5zY3JvbGxMaW5lcygwPT09dD8tMToxKSx0aGlzLl9yb3dFbGVtZW50c1swPT09dD8xOnRoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0yXS5mb2N1cygpLGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfX0sdC5wcm90b3R5cGUuX29uUmVzaXplPWZ1bmN0aW9uKGUpe3RoaXMuX3Jvd0VsZW1lbnRzW3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aC0xXS5yZW1vdmVFdmVudExpc3RlbmVyKCJmb2N1cyIsdGhpcy5fYm90dG9tQm91bmRhcnlGb2N1c0xpc3RlbmVyKTtmb3IodmFyIHQ9dGhpcy5fcm93Q29udGFpbmVyLmNoaWxkcmVuLmxlbmd0aDt0PHRoaXMuX3Rlcm1pbmFsLnJvd3M7dCsrKXRoaXMuX3Jvd0VsZW1lbnRzW3RdPXRoaXMuX2NyZWF0ZUFjY2Vzc2liaWxpdHlUcmVlTm9kZSgpLHRoaXMuX3Jvd0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLl9yb3dFbGVtZW50c1t0XSk7Zm9yKDt0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGg+ZTspdGhpcy5fcm93Q29udGFpbmVyLnJlbW92ZUNoaWxkKHRoaXMuX3Jvd0VsZW1lbnRzLnBvcCgpKTt0aGlzLl9yb3dFbGVtZW50c1t0aGlzLl9yb3dFbGVtZW50cy5sZW5ndGgtMV0uYWRkRXZlbnRMaXN0ZW5lcigiZm9jdXMiLHRoaXMuX2JvdHRvbUJvdW5kYXJ5Rm9jdXNMaXN0ZW5lciksdGhpcy5fcmVmcmVzaFJvd3NEaW1lbnNpb25zKCl9LHQucHJvdG90eXBlLl9jcmVhdGVBY2Nlc3NpYmlsaXR5VHJlZU5vZGU9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gZS5zZXRBdHRyaWJ1dGUoInJvbGUiLCJsaXN0aXRlbSIpLGUudGFiSW5kZXg9LTEsdGhpcy5fcmVmcmVzaFJvd0RpbWVuc2lvbnMoZSksZX0sdC5wcm90b3R5cGUuX29uVGFiPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZTt0KyspdGhpcy5fb25DaGFyKCIgIil9LHQucHJvdG90eXBlLl9vbkNoYXI9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLl9saXZlUmVnaW9uTGluZUNvdW50PDIxJiYodGhpcy5fY2hhcnNUb0NvbnN1bWUubGVuZ3RoPjA/dGhpcy5fY2hhcnNUb0NvbnN1bWUuc2hpZnQoKSE9PWUmJih0aGlzLl9jaGFyc1RvQW5ub3VuY2UrPWUpOnRoaXMuX2NoYXJzVG9Bbm5vdW5jZSs9ZSwiXG4iPT09ZSYmKHRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQrKywyMT09PXRoaXMuX2xpdmVSZWdpb25MaW5lQ291bnQmJih0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50Kz1vLnRvb011Y2hPdXRwdXQpKSxzLmlzTWFjJiZ0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50JiZ0aGlzLl9saXZlUmVnaW9uLnRleHRDb250ZW50Lmxlbmd0aD4wJiYhdGhpcy5fbGl2ZVJlZ2lvbi5wYXJlbnROb2RlJiZzZXRUaW1lb3V0KChmdW5jdGlvbigpe3QuX2FjY2Vzc2liaWxpdHlUcmVlUm9vdC5hcHBlbmRDaGlsZCh0Ll9saXZlUmVnaW9uKX0pLDApKX0sdC5wcm90b3R5cGUuX2NsZWFyTGl2ZVJlZ2lvbj1mdW5jdGlvbigpe3RoaXMuX2xpdmVSZWdpb24udGV4dENvbnRlbnQ9IiIsdGhpcy5fbGl2ZVJlZ2lvbkxpbmVDb3VudD0wLHMuaXNNYWMmJigwLHUucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQpKHRoaXMuX2xpdmVSZWdpb24pfSx0LnByb3RvdHlwZS5fb25LZXk9ZnVuY3Rpb24oZSl7dGhpcy5fY2xlYXJMaXZlUmVnaW9uKCksdGhpcy5fY2hhcnNUb0NvbnN1bWUucHVzaChlKX0sdC5wcm90b3R5cGUuX3JlZnJlc2hSb3dzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVuZGVyUm93c0RlYm91bmNlci5yZWZyZXNoKGUsdCx0aGlzLl90ZXJtaW5hbC5yb3dzKX0sdC5wcm90b3R5cGUuX3JlbmRlclJvd3M9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5fdGVybWluYWwuYnVmZmVyLGk9ci5saW5lcy5sZW5ndGgudG9TdHJpbmcoKSxuPWU7bjw9dDtuKyspe3ZhciBvPXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHIueWRpc3ArbiwhMCkscz0oci55ZGlzcCtuKzEpLnRvU3RyaW5nKCksYT10aGlzLl9yb3dFbGVtZW50c1tuXTthJiYoMD09PW8ubGVuZ3RoP2EuaW5uZXJUZXh0PSLCoCI6YS50ZXh0Q29udGVudD1vLGEuc2V0QXR0cmlidXRlKCJhcmlhLXBvc2luc2V0IixzKSxhLnNldEF0dHJpYnV0ZSgiYXJpYS1zZXRzaXplIixpKSl9dGhpcy5fYW5ub3VuY2VDaGFyYWN0ZXJzKCl9LHQucHJvdG90eXBlLl9yZWZyZXNoUm93c0RpbWVuc2lvbnM9ZnVuY3Rpb24oKXtpZih0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCl7dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoIT09dGhpcy5fdGVybWluYWwucm93cyYmdGhpcy5fb25SZXNpemUodGhpcy5fdGVybWluYWwucm93cyk7Zm9yKHZhciBlPTA7ZTx0aGlzLl90ZXJtaW5hbC5yb3dzO2UrKyl0aGlzLl9yZWZyZXNoUm93RGltZW5zaW9ucyh0aGlzLl9yb3dFbGVtZW50c1tlXSl9fSx0LnByb3RvdHlwZS5fcmVmcmVzaFJvd0RpbWVuc2lvbnM9ZnVuY3Rpb24oZSl7ZS5zdHlsZS5oZWlnaHQ9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4In0sdC5wcm90b3R5cGUuX2Fubm91bmNlQ2hhcmFjdGVycz1mdW5jdGlvbigpezAhPT10aGlzLl9jaGFyc1RvQW5ub3VuY2UubGVuZ3RoJiYodGhpcy5fbGl2ZVJlZ2lvbi50ZXh0Q29udGVudCs9dGhpcy5fY2hhcnNUb0Fubm91bmNlLHRoaXMuX2NoYXJzVG9Bbm5vdW5jZT0iIil9LHR9KGwuRGlzcG9zYWJsZSk7dC5BY2Nlc3NpYmlsaXR5TWFuYWdlcj1mfSwzNjE0OihlLHQpPT57ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS5yZXBsYWNlKC9ccj9cbi9nLCJcciIpfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gdD8iG1syMDB+IitlKyIbWzIwMX4iOmV9ZnVuY3Rpb24gbihlLHQsbil7ZT1pKGU9cihlKSxuLmRlY1ByaXZhdGVNb2Rlcy5icmFja2V0ZWRQYXN0ZU1vZGUpLG4udHJpZ2dlckRhdGFFdmVudChlLCEwKSx0LnZhbHVlPSIifWZ1bmN0aW9uIG8oZSx0LHIpe3ZhciBpPXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj1lLmNsaWVudFgtaS5sZWZ0LTEwLG89ZS5jbGllbnRZLWkudG9wLTEwO3Quc3R5bGUud2lkdGg9IjIwcHgiLHQuc3R5bGUuaGVpZ2h0PSIyMHB4Iix0LnN0eWxlLmxlZnQ9bisicHgiLHQuc3R5bGUudG9wPW8rInB4Iix0LnN0eWxlLnpJbmRleD0iMTAwMCIsdC5mb2N1cygpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnJpZ2h0Q2xpY2tIYW5kbGVyPXQubW92ZVRleHRBcmVhVW5kZXJNb3VzZUN1cnNvcj10LnBhc3RlPXQuaGFuZGxlUGFzdGVFdmVudD10LmNvcHlIYW5kbGVyPXQuYnJhY2tldFRleHRGb3JQYXN0ZT10LnByZXBhcmVUZXh0Rm9yVGVybWluYWw9dm9pZCAwLHQucHJlcGFyZVRleHRGb3JUZXJtaW5hbD1yLHQuYnJhY2tldFRleHRGb3JQYXN0ZT1pLHQuY29weUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXtlLmNsaXBib2FyZERhdGEmJmUuY2xpcGJvYXJkRGF0YS5zZXREYXRhKCJ0ZXh0L3BsYWluIix0LnNlbGVjdGlvblRleHQpLGUucHJldmVudERlZmF1bHQoKX0sdC5oYW5kbGVQYXN0ZUV2ZW50PWZ1bmN0aW9uKGUsdCxyKXtlLnN0b3BQcm9wYWdhdGlvbigpLGUuY2xpcGJvYXJkRGF0YSYmbihlLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgidGV4dC9wbGFpbiIpLHQscil9LHQucGFzdGU9bix0Lm1vdmVUZXh0QXJlYVVuZGVyTW91c2VDdXJzb3I9byx0LnJpZ2h0Q2xpY2tIYW5kbGVyPWZ1bmN0aW9uKGUsdCxyLGksbil7byhlLHQsciksbiYmaS5yaWdodENsaWNrU2VsZWN0KGUpLHQudmFsdWU9aS5zZWxlY3Rpb25UZXh0LHQuc2VsZWN0KCl9fSw3MjM5OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29sb3JDb250cmFzdENhY2hlPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9jb2xvcj17fSx0aGlzLl9yZ2JhPXt9fXJldHVybiBlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2NvbG9yPXt9LHRoaXMuX3JnYmE9e319LGUucHJvdG90eXBlLnNldENzcz1mdW5jdGlvbihlLHQscil7dGhpcy5fcmdiYVtlXXx8KHRoaXMuX3JnYmFbZV09e30pLHRoaXMuX3JnYmFbZV1bdF09cn0sZS5wcm90b3R5cGUuZ2V0Q3NzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX3JnYmFbZV0/dGhpcy5fcmdiYVtlXVt0XTp2b2lkIDB9LGUucHJvdG90eXBlLnNldENvbG9yPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9jb2xvcltlXXx8KHRoaXMuX2NvbG9yW2VdPXt9KSx0aGlzLl9jb2xvcltlXVt0XT1yfSxlLnByb3RvdHlwZS5nZXRDb2xvcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9jb2xvcltlXT90aGlzLl9jb2xvcltlXVt0XTp2b2lkIDB9LGV9KCk7dC5Db2xvckNvbnRyYXN0Q2FjaGU9cn0sNTY4MDpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db2xvck1hbmFnZXI9dC5ERUZBVUxUX0FOU0lfQ09MT1JTPXZvaWQgMDt2YXIgbj1yKDgwNTUpLG89cig3MjM5KSxzPW4uY3NzLnRvQ29sb3IoIiNmZmZmZmYiKSxhPW4uY3NzLnRvQ29sb3IoIiMwMDAwMDAiKSxjPW4uY3NzLnRvQ29sb3IoIiNmZmZmZmYiKSxsPW4uY3NzLnRvQ29sb3IoIiMwMDAwMDAiKSxoPXtjc3M6InJnYmEoMjU1LCAyNTUsIDI1NSwgMC4zKSIscmdiYTo0Mjk0OTY3MTE3fTt0LkRFRkFVTFRfQU5TSV9DT0xPUlM9T2JqZWN0LmZyZWV6ZShmdW5jdGlvbigpe2Zvcih2YXIgZT1bbi5jc3MudG9Db2xvcigiIzJlMzQzNiIpLG4uY3NzLnRvQ29sb3IoIiNjYzAwMDAiKSxuLmNzcy50b0NvbG9yKCIjNGU5YTA2Iiksbi5jc3MudG9Db2xvcigiI2M0YTAwMCIpLG4uY3NzLnRvQ29sb3IoIiMzNDY1YTQiKSxuLmNzcy50b0NvbG9yKCIjNzU1MDdiIiksbi5jc3MudG9Db2xvcigiIzA2OTg5YSIpLG4uY3NzLnRvQ29sb3IoIiNkM2Q3Y2YiKSxuLmNzcy50b0NvbG9yKCIjNTU1NzUzIiksbi5jc3MudG9Db2xvcigiI2VmMjkyOSIpLG4uY3NzLnRvQ29sb3IoIiM4YWUyMzQiKSxuLmNzcy50b0NvbG9yKCIjZmNlOTRmIiksbi5jc3MudG9Db2xvcigiIzcyOWZjZiIpLG4uY3NzLnRvQ29sb3IoIiNhZDdmYTgiKSxuLmNzcy50b0NvbG9yKCIjMzRlMmUyIiksbi5jc3MudG9Db2xvcigiI2VlZWVlYyIpXSx0PVswLDk1LDEzNSwxNzUsMjE1LDI1NV0scj0wO3I8MjE2O3IrKyl7dmFyIGk9dFtyLzM2JTZ8MF0sbz10W3IvNiU2fDBdLHM9dFtyJTZdO2UucHVzaCh7Y3NzOm4uY2hhbm5lbHMudG9Dc3MoaSxvLHMpLHJnYmE6bi5jaGFubmVscy50b1JnYmEoaSxvLHMpfSl9Zm9yKHI9MDtyPDI0O3IrKyl7dmFyIGE9OCsxMCpyO2UucHVzaCh7Y3NzOm4uY2hhbm5lbHMudG9Dc3MoYSxhLGEpLHJnYmE6bi5jaGFubmVscy50b1JnYmEoYSxhLGEpfSl9cmV0dXJuIGV9KCkpO3ZhciB1PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHIpe3RoaXMuYWxsb3dUcmFuc3BhcmVuY3k9cjt2YXIgaT1lLmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO2kud2lkdGg9MSxpLmhlaWdodD0xO3ZhciB1PWkuZ2V0Q29udGV4dCgiMmQiKTtpZighdSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBnZXQgcmVuZGVyaW5nIGNvbnRleHQiKTt0aGlzLl9jdHg9dSx0aGlzLl9jdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJjb3B5Iix0aGlzLl9saXRtdXNDb2xvcj10aGlzLl9jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwwLDEsMSksdGhpcy5fY29udHJhc3RDYWNoZT1uZXcgby5Db2xvckNvbnRyYXN0Q2FjaGUsdGhpcy5jb2xvcnM9e2ZvcmVncm91bmQ6cyxiYWNrZ3JvdW5kOmEsY3Vyc29yOmMsY3Vyc29yQWNjZW50Omwsc2VsZWN0aW9uVHJhbnNwYXJlbnQ6aCxzZWxlY3Rpb25PcGFxdWU6bi5jb2xvci5ibGVuZChhLGgpLHNlbGVjdGlvbkZvcmVncm91bmQ6dm9pZCAwLGFuc2k6dC5ERUZBVUxUX0FOU0lfQ09MT1JTLnNsaWNlKCksY29udHJhc3RDYWNoZTp0aGlzLl9jb250cmFzdENhY2hlfSx0aGlzLl91cGRhdGVSZXN0b3JlQ29sb3JzKCl9cmV0dXJuIGUucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZT1mdW5jdGlvbihlKXsibWluaW11bUNvbnRyYXN0UmF0aW8iPT09ZSYmdGhpcy5fY29udHJhc3RDYWNoZS5jbGVhcigpfSxlLnByb3RvdHlwZS5zZXRUaGVtZT1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT17fSksdGhpcy5jb2xvcnMuZm9yZWdyb3VuZD10aGlzLl9wYXJzZUNvbG9yKGUuZm9yZWdyb3VuZCxzKSx0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kPXRoaXMuX3BhcnNlQ29sb3IoZS5iYWNrZ3JvdW5kLGEpLHRoaXMuY29sb3JzLmN1cnNvcj10aGlzLl9wYXJzZUNvbG9yKGUuY3Vyc29yLGMsITApLHRoaXMuY29sb3JzLmN1cnNvckFjY2VudD10aGlzLl9wYXJzZUNvbG9yKGUuY3Vyc29yQWNjZW50LGwsITApLHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50PXRoaXMuX3BhcnNlQ29sb3IoZS5zZWxlY3Rpb24saCwhMCksdGhpcy5jb2xvcnMuc2VsZWN0aW9uT3BhcXVlPW4uY29sb3IuYmxlbmQodGhpcy5jb2xvcnMuYmFja2dyb3VuZCx0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudCk7dmFyIHI9e2NzczoiIixyZ2JhOjB9O3RoaXMuY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQ9ZS5zZWxlY3Rpb25Gb3JlZ3JvdW5kP3RoaXMuX3BhcnNlQ29sb3IoZS5zZWxlY3Rpb25Gb3JlZ3JvdW5kLHIpOnZvaWQgMCx0aGlzLmNvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kPT09ciYmKHRoaXMuY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQ9dm9pZCAwKSxuLmNvbG9yLmlzT3BhcXVlKHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50KSYmKHRoaXMuY29sb3JzLnNlbGVjdGlvblRyYW5zcGFyZW50PW4uY29sb3Iub3BhY2l0eSh0aGlzLmNvbG9ycy5zZWxlY3Rpb25UcmFuc3BhcmVudCwuMykpLHRoaXMuY29sb3JzLmFuc2lbMF09dGhpcy5fcGFyc2VDb2xvcihlLmJsYWNrLHQuREVGQVVMVF9BTlNJX0NPTE9SU1swXSksdGhpcy5jb2xvcnMuYW5zaVsxXT10aGlzLl9wYXJzZUNvbG9yKGUucmVkLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxXSksdGhpcy5jb2xvcnMuYW5zaVsyXT10aGlzLl9wYXJzZUNvbG9yKGUuZ3JlZW4sdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzJdKSx0aGlzLmNvbG9ycy5hbnNpWzNdPXRoaXMuX3BhcnNlQ29sb3IoZS55ZWxsb3csdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzNdKSx0aGlzLmNvbG9ycy5hbnNpWzRdPXRoaXMuX3BhcnNlQ29sb3IoZS5ibHVlLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s0XSksdGhpcy5jb2xvcnMuYW5zaVs1XT10aGlzLl9wYXJzZUNvbG9yKGUubWFnZW50YSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbNV0pLHRoaXMuY29sb3JzLmFuc2lbNl09dGhpcy5fcGFyc2VDb2xvcihlLmN5YW4sdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzZdKSx0aGlzLmNvbG9ycy5hbnNpWzddPXRoaXMuX3BhcnNlQ29sb3IoZS53aGl0ZSx0LkRFRkFVTFRfQU5TSV9DT0xPUlNbN10pLHRoaXMuY29sb3JzLmFuc2lbOF09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodEJsYWNrLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s4XSksdGhpcy5jb2xvcnMuYW5zaVs5XT10aGlzLl9wYXJzZUNvbG9yKGUuYnJpZ2h0UmVkLHQuREVGQVVMVF9BTlNJX0NPTE9SU1s5XSksdGhpcy5jb2xvcnMuYW5zaVsxMF09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodEdyZWVuLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxMF0pLHRoaXMuY29sb3JzLmFuc2lbMTFdPXRoaXMuX3BhcnNlQ29sb3IoZS5icmlnaHRZZWxsb3csdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzExXSksdGhpcy5jb2xvcnMuYW5zaVsxMl09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodEJsdWUsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzEyXSksdGhpcy5jb2xvcnMuYW5zaVsxM109dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodE1hZ2VudGEsdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzEzXSksdGhpcy5jb2xvcnMuYW5zaVsxNF09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodEN5YW4sdC5ERUZBVUxUX0FOU0lfQ09MT1JTWzE0XSksdGhpcy5jb2xvcnMuYW5zaVsxNV09dGhpcy5fcGFyc2VDb2xvcihlLmJyaWdodFdoaXRlLHQuREVGQVVMVF9BTlNJX0NPTE9SU1sxNV0pLHRoaXMuX2NvbnRyYXN0Q2FjaGUuY2xlYXIoKSx0aGlzLl91cGRhdGVSZXN0b3JlQ29sb3JzKCl9LGUucHJvdG90eXBlLnJlc3RvcmVDb2xvcj1mdW5jdGlvbihlKXtpZih2b2lkIDAhPT1lKXN3aXRjaChlKXtjYXNlIDI1Njp0aGlzLmNvbG9ycy5mb3JlZ3JvdW5kPXRoaXMuX3Jlc3RvcmVDb2xvcnMuZm9yZWdyb3VuZDticmVhaztjYXNlIDI1Nzp0aGlzLmNvbG9ycy5iYWNrZ3JvdW5kPXRoaXMuX3Jlc3RvcmVDb2xvcnMuYmFja2dyb3VuZDticmVhaztjYXNlIDI1ODp0aGlzLmNvbG9ycy5jdXJzb3I9dGhpcy5fcmVzdG9yZUNvbG9ycy5jdXJzb3I7YnJlYWs7ZGVmYXVsdDp0aGlzLmNvbG9ycy5hbnNpW2VdPXRoaXMuX3Jlc3RvcmVDb2xvcnMuYW5zaVtlXX1lbHNlIGZvcih2YXIgdD0wO3Q8dGhpcy5fcmVzdG9yZUNvbG9ycy5hbnNpLmxlbmd0aDsrK3QpdGhpcy5jb2xvcnMuYW5zaVt0XT10aGlzLl9yZXN0b3JlQ29sb3JzLmFuc2lbdF19LGUucHJvdG90eXBlLl91cGRhdGVSZXN0b3JlQ29sb3JzPWZ1bmN0aW9uKCl7dGhpcy5fcmVzdG9yZUNvbG9ycz17Zm9yZWdyb3VuZDp0aGlzLmNvbG9ycy5mb3JlZ3JvdW5kLGJhY2tncm91bmQ6dGhpcy5jb2xvcnMuYmFja2dyb3VuZCxjdXJzb3I6dGhpcy5jb2xvcnMuY3Vyc29yLGFuc2k6dGhpcy5jb2xvcnMuYW5zaS5zbGljZSgpfX0sZS5wcm90b3R5cGUuX3BhcnNlQ29sb3I9ZnVuY3Rpb24oZSx0LHIpe2lmKHZvaWQgMD09PXImJihyPXRoaXMuYWxsb3dUcmFuc3BhcmVuY3kpLHZvaWQgMD09PWUpcmV0dXJuIHQ7aWYodGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9saXRtdXNDb2xvcix0aGlzLl9jdHguZmlsbFN0eWxlPWUsInN0cmluZyIhPXR5cGVvZiB0aGlzLl9jdHguZmlsbFN0eWxlKXJldHVybiBjb25zb2xlLndhcm4oIkNvbG9yOiAiK2UrIiBpcyBpbnZhbGlkIHVzaW5nIGZhbGxiYWNrICIrdC5jc3MpLHQ7dGhpcy5fY3R4LmZpbGxSZWN0KDAsMCwxLDEpO3ZhciBvPXRoaXMuX2N0eC5nZXRJbWFnZURhdGEoMCwwLDEsMSkuZGF0YTtpZigyNTUhPT1vWzNdKXtpZighcilyZXR1cm4gY29uc29sZS53YXJuKCJDb2xvcjogIitlKyIgaXMgdXNpbmcgdHJhbnNwYXJlbmN5LCBidXQgYWxsb3dUcmFuc3BhcmVuY3kgaXMgZmFsc2UuIFVzaW5nIGZhbGxiYWNrICIrdC5jc3MrIi4iKSx0O3ZhciBzPWkodGhpcy5fY3R4LmZpbGxTdHlsZS5zdWJzdHJpbmcoNSx0aGlzLl9jdHguZmlsbFN0eWxlLmxlbmd0aC0xKS5zcGxpdCgiLCIpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIE51bWJlcihlKX0pKSw0KSxhPXNbMF0sYz1zWzFdLGw9c1syXSxoPXNbM10sdT1NYXRoLnJvdW5kKDI1NSpoKTtyZXR1cm57cmdiYTpuLmNoYW5uZWxzLnRvUmdiYShhLGMsbCx1KSxjc3M6ZX19cmV0dXJue2Nzczp0aGlzLl9jdHguZmlsbFN0eWxlLHJnYmE6bi5jaGFubmVscy50b1JnYmEob1swXSxvWzFdLG9bMl0sb1szXSl9fSxlfSgpO3QuQ29sb3JNYW5hZ2VyPXV9LDk2MzE6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQ9dm9pZCAwLHQucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQ9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxpLG49W10sbz0wO288YXJndW1lbnRzLmxlbmd0aDtvKyspbltvXT1hcmd1bWVudHNbb107dHJ5e2Zvcih2YXIgcz1yKG4pLGE9cy5uZXh0KCk7IWEuZG9uZTthPXMubmV4dCgpKXt2YXIgYz1hLnZhbHVlO251bGw9PT0oaT1udWxsPT1jP3ZvaWQgMDpjLnBhcmVudEVsZW1lbnQpfHx2b2lkIDA9PT1pfHxpLnJlbW92ZUNoaWxkKGMpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXthJiYhYS5kb25lJiYodD1zLnJldHVybikmJnQuY2FsbChzKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fX0sMzY1NjooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcj12b2lkIDAsdC5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXI9ZnVuY3Rpb24oZSx0LHIsaSl7ZS5hZGRFdmVudExpc3RlbmVyKHQscixpKTt2YXIgbj0hMTtyZXR1cm57ZGlzcG9zZTpmdW5jdGlvbigpe258fChuPSEwLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LHIsaSkpfX19fSwzNTUxOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTW91c2Vab25lPXQuTGlua2lmaWVyPXZvaWQgMDt2YXIgbz1yKDg0NjApLHM9cigyNTg1KSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2xvZ1NlcnZpY2U9dCx0aGlzLl91bmljb2RlU2VydmljZT1yLHRoaXMuX2xpbmtNYXRjaGVycz1bXSx0aGlzLl9uZXh0TGlua01hdGNoZXJJZD0wLHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmU9bmV3IG8uRXZlbnRFbWl0dGVyLHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmU9bmV3IG8uRXZlbnRFbWl0dGVyLHRoaXMuX29uTGlua1Rvb2x0aXA9bmV3IG8uRXZlbnRFbWl0dGVyLHRoaXMuX3Jvd3NUb0xpbmtpZnk9e3N0YXJ0OnZvaWQgMCxlbmQ6dm9pZCAwfX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblNob3dMaW5rVW5kZXJsaW5lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2hvd0xpbmtVbmRlcmxpbmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkhpZGVMaW5rVW5kZXJsaW5lIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkxpbmtUb29sdGlwIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uTGlua1Rvb2x0aXAuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuYXR0YWNoVG9Eb209ZnVuY3Rpb24oZSx0KXt0aGlzLl9lbGVtZW50PWUsdGhpcy5fbW91c2Vab25lTWFuYWdlcj10fSxlLnByb3RvdHlwZS5saW5raWZ5Um93cz1mdW5jdGlvbih0LHIpe3ZhciBpPXRoaXM7dGhpcy5fbW91c2Vab25lTWFuYWdlciYmKHZvaWQgMD09PXRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnR8fHZvaWQgMD09PXRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kPyh0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0PXQsdGhpcy5fcm93c1RvTGlua2lmeS5lbmQ9cik6KHRoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQ9TWF0aC5taW4odGhpcy5fcm93c1RvTGlua2lmeS5zdGFydCx0KSx0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZD1NYXRoLm1heCh0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCxyKSksdGhpcy5fbW91c2Vab25lTWFuYWdlci5jbGVhckFsbCh0LHIpLHRoaXMuX3Jvd3NUaW1lb3V0SWQmJmNsZWFyVGltZW91dCh0aGlzLl9yb3dzVGltZW91dElkKSx0aGlzLl9yb3dzVGltZW91dElkPXNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIGkuX2xpbmtpZnlSb3dzKCl9KSxlLl90aW1lQmVmb3JlTGF0ZW5jeSkpfSxlLnByb3RvdHlwZS5fbGlua2lmeVJvd3M9ZnVuY3Rpb24oKXt0aGlzLl9yb3dzVGltZW91dElkPXZvaWQgMDt2YXIgZT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtpZih2b2lkIDAhPT10aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0JiZ2b2lkIDAhPT10aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCl7dmFyIHQ9ZS55ZGlzcCt0aGlzLl9yb3dzVG9MaW5raWZ5LnN0YXJ0O2lmKCEodD49ZS5saW5lcy5sZW5ndGgpKXtmb3IodmFyIHI9ZS55ZGlzcCtNYXRoLm1pbih0aGlzLl9yb3dzVG9MaW5raWZ5LmVuZCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpKzEsaT1NYXRoLmNlaWwoMmUzL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksbj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5pdGVyYXRvcighMSx0LHIsaSxpKTtuLmhhc05leHQoKTspZm9yKHZhciBvPW4ubmV4dCgpLHM9MDtzPHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGg7cysrKXRoaXMuX2RvTGlua2lmeVJvdyhvLnJhbmdlLmZpcnN0LG8uY29udGVudCx0aGlzLl9saW5rTWF0Y2hlcnNbc10pO3RoaXMuX3Jvd3NUb0xpbmtpZnkuc3RhcnQ9dm9pZCAwLHRoaXMuX3Jvd3NUb0xpbmtpZnkuZW5kPXZvaWQgMH19ZWxzZSB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJfcm93VG9MaW5raWZ5IHdhcyB1bnNldCBiZWZvcmUgX2xpbmtpZnlSb3dzIHdhcyBjYWxsZWQiKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlLHQscil7aWYodm9pZCAwPT09ciYmKHI9e30pLCF0KXRocm93IG5ldyBFcnJvcigiaGFuZGxlciBtdXN0IGJlIGRlZmluZWQiKTt2YXIgaT17aWQ6dGhpcy5fbmV4dExpbmtNYXRjaGVySWQrKyxyZWdleDplLGhhbmRsZXI6dCxtYXRjaEluZGV4OnIubWF0Y2hJbmRleCx2YWxpZGF0aW9uQ2FsbGJhY2s6ci52YWxpZGF0aW9uQ2FsbGJhY2ssaG92ZXJUb29sdGlwQ2FsbGJhY2s6ci50b29sdGlwQ2FsbGJhY2ssaG92ZXJMZWF2ZUNhbGxiYWNrOnIubGVhdmVDYWxsYmFjayx3aWxsTGlua0FjdGl2YXRlOnIud2lsbExpbmtBY3RpdmF0ZSxwcmlvcml0eTpyLnByaW9yaXR5fHwwfTtyZXR1cm4gdGhpcy5fYWRkTGlua01hdGNoZXJUb0xpc3QoaSksaS5pZH0sZS5wcm90b3R5cGUuX2FkZExpbmtNYXRjaGVyVG9MaXN0PWZ1bmN0aW9uKGUpe2lmKDAhPT10aGlzLl9saW5rTWF0Y2hlcnMubGVuZ3RoKXtmb3IodmFyIHQ9dGhpcy5fbGlua01hdGNoZXJzLmxlbmd0aC0xO3Q+PTA7dC0tKWlmKGUucHJpb3JpdHk8PXRoaXMuX2xpbmtNYXRjaGVyc1t0XS5wcmlvcml0eSlyZXR1cm4gdm9pZCB0aGlzLl9saW5rTWF0Y2hlcnMuc3BsaWNlKHQrMSwwLGUpO3RoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UoMCwwLGUpfWVsc2UgdGhpcy5fbGlua01hdGNoZXJzLnB1c2goZSl9LGUucHJvdG90eXBlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2xpbmtNYXRjaGVycy5sZW5ndGg7dCsrKWlmKHRoaXMuX2xpbmtNYXRjaGVyc1t0XS5pZD09PWUpcmV0dXJuIHRoaXMuX2xpbmtNYXRjaGVycy5zcGxpY2UodCwxKSwhMDtyZXR1cm4hMX0sZS5wcm90b3R5cGUuX2RvTGlua2lmeVJvdz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBpLG49dGhpcyxvPW5ldyBSZWdFeHAoci5yZWdleC5zb3VyY2UsKHIucmVnZXguZmxhZ3N8fCIiKSsiZyIpLHM9LTEsYT1mdW5jdGlvbigpe3ZhciBhPWlbIm51bWJlciIhPXR5cGVvZiByLm1hdGNoSW5kZXg/MDpyLm1hdGNoSW5kZXhdO2lmKCFhKXJldHVybiBjLl9sb2dTZXJ2aWNlLmRlYnVnKCJtYXRjaCBmb3VuZCB3aXRob3V0IGNvcnJlc3BvbmRpbmcgbWF0Y2hJbmRleCIsaSxyKSwiYnJlYWsiO2lmKHM9dC5pbmRleE9mKGEscysxKSxvLmxhc3RJbmRleD1zK2EubGVuZ3RoLHM8MClyZXR1cm4iYnJlYWsiO3ZhciBsPWMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnN0cmluZ0luZGV4VG9CdWZmZXJJbmRleChlLHMpO2lmKGxbMF08MClyZXR1cm4iYnJlYWsiO3ZhciBoPWMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChsWzBdKTtpZighaClyZXR1cm4iYnJlYWsiO3ZhciB1PWguZ2V0RmcobFsxXSksZj11P3U+PjkmNTExOnZvaWQgMDtyLnZhbGlkYXRpb25DYWxsYmFjaz9yLnZhbGlkYXRpb25DYWxsYmFjayhhLChmdW5jdGlvbihlKXtuLl9yb3dzVGltZW91dElkfHxlJiZuLl9hZGRMaW5rKGxbMV0sbFswXS1uLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxhLHIsZil9KSk6Yy5fYWRkTGluayhsWzFdLGxbMF0tYy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsYSxyLGYpfSxjPXRoaXM7bnVsbCE9PShpPW8uZXhlYyh0KSkmJiJicmVhayIhPT1hKCk7KTt9LGUucHJvdG90eXBlLl9hZGRMaW5rPWZ1bmN0aW9uKGUsdCxyLGksbil7dmFyIG89dGhpcztpZih0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyJiZ0aGlzLl9lbGVtZW50KXt2YXIgcz10aGlzLl91bmljb2RlU2VydmljZS5nZXRTdHJpbmdDZWxsV2lkdGgociksYT1lJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxsPXQrTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksaD0oYStzKSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdT1sK01hdGguZmxvb3IoKGErcykvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKTswPT09aCYmKGg9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHUtLSksdGhpcy5fbW91c2Vab25lTWFuYWdlci5hZGQobmV3IGMoYSsxLGwrMSxoKzEsdSsxLChmdW5jdGlvbihlKXtpZihpLmhhbmRsZXIpcmV0dXJuIGkuaGFuZGxlcihlLHIpO3ZhciB0PXdpbmRvdy5vcGVuKCk7dD8odC5vcGVuZXI9bnVsbCx0LmxvY2F0aW9uLmhyZWY9cik6Y29uc29sZS53YXJuKCJPcGVuaW5nIGxpbmsgYmxvY2tlZCBhcyBvcGVuZXIgY291bGQgbm90IGJlIGNsZWFyZWQiKX0pLChmdW5jdGlvbigpe28uX29uU2hvd0xpbmtVbmRlcmxpbmUuZmlyZShvLl9jcmVhdGVMaW5rSG92ZXJFdmVudChhLGwsaCx1LG4pKSxvLl9lbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWN1cnNvci1wb2ludGVyIil9KSwoZnVuY3Rpb24oZSl7by5fb25MaW5rVG9vbHRpcC5maXJlKG8uX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KGEsbCxoLHUsbikpLGkuaG92ZXJUb29sdGlwQ2FsbGJhY2smJmkuaG92ZXJUb29sdGlwQ2FsbGJhY2soZSxyLHtzdGFydDp7eDphLHk6bH0sZW5kOnt4OmgseTp1fX0pfSksKGZ1bmN0aW9uKCl7by5fb25IaWRlTGlua1VuZGVybGluZS5maXJlKG8uX2NyZWF0ZUxpbmtIb3ZlckV2ZW50KGEsbCxoLHUsbikpLG8uX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgieHRlcm0tY3Vyc29yLXBvaW50ZXIiKSxpLmhvdmVyTGVhdmVDYWxsYmFjayYmaS5ob3ZlckxlYXZlQ2FsbGJhY2soKX0pLChmdW5jdGlvbihlKXtyZXR1cm4haS53aWxsTGlua0FjdGl2YXRlfHxpLndpbGxMaW5rQWN0aXZhdGUoZSxyKX0pKSl9fSxlLnByb3RvdHlwZS5fY3JlYXRlTGlua0hvdmVyRXZlbnQ9ZnVuY3Rpb24oZSx0LHIsaSxuKXtyZXR1cm57eDE6ZSx5MTp0LHgyOnIseTI6aSxjb2xzOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxmZzpufX0sZS5fdGltZUJlZm9yZUxhdGVuY3k9MjAwLGU9aShbbigwLHMuSUJ1ZmZlclNlcnZpY2UpLG4oMSxzLklMb2dTZXJ2aWNlKSxuKDIscy5JVW5pY29kZVNlcnZpY2UpXSxlKX0oKTt0LkxpbmtpZmllcj1hO3ZhciBjPWZ1bmN0aW9uKGUsdCxyLGksbixvLHMsYSxjKXt0aGlzLngxPWUsdGhpcy55MT10LHRoaXMueDI9cix0aGlzLnkyPWksdGhpcy5jbGlja0NhbGxiYWNrPW4sdGhpcy5ob3ZlckNhbGxiYWNrPW8sdGhpcy50b29sdGlwQ2FsbGJhY2s9cyx0aGlzLmxlYXZlQ2FsbGJhY2s9YSx0aGlzLndpbGxMaW5rQWN0aXZhdGU9Y307dC5Nb3VzZVpvbmU9Y30sNjQ2NTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxhPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfSxjPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc307T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTGlua2lmaWVyMj12b2lkIDA7dmFyIGw9cigyNTg1KSxoPXIoODQ2MCksdT1yKDg0NCksZj1yKDM2NTYpLF89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0KXt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIuX2J1ZmZlclNlcnZpY2U9dCxyLl9saW5rUHJvdmlkZXJzPVtdLHIuX2xpbmtDYWNoZURpc3Bvc2FibGVzPVtdLHIuX2lzTW91c2VPdXQ9ITAsci5fYWN0aXZlTGluZT0tMSxyLl9vblNob3dMaW5rVW5kZXJsaW5lPXIucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxyLl9vbkhpZGVMaW5rVW5kZXJsaW5lPXIucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxyLnJlZ2lzdGVyKCgwLHUuZ2V0RGlzcG9zZUFycmF5RGlzcG9zYWJsZSkoci5fbGlua0NhY2hlRGlzcG9zYWJsZXMpKSxyfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJjdXJyZW50TGluayIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50TGlua30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uU2hvd0xpbmtVbmRlcmxpbmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25TaG93TGlua1VuZGVybGluZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uSGlkZUxpbmtVbmRlcmxpbmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25IaWRlTGlua1VuZGVybGluZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZWdpc3RlckxpbmtQcm92aWRlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiB0aGlzLl9saW5rUHJvdmlkZXJzLnB1c2goZSkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgcj10Ll9saW5rUHJvdmlkZXJzLmluZGV4T2YoZSk7LTEhPT1yJiZ0Ll9saW5rUHJvdmlkZXJzLnNwbGljZShyLDEpfX19LHQucHJvdG90eXBlLmF0dGFjaFRvRG9tPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzO3RoaXMuX2VsZW1lbnQ9ZSx0aGlzLl9tb3VzZVNlcnZpY2U9dCx0aGlzLl9yZW5kZXJTZXJ2aWNlPXIsdGhpcy5yZWdpc3RlcigoMCxmLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5fZWxlbWVudCwibW91c2VsZWF2ZSIsKGZ1bmN0aW9uKCl7aS5faXNNb3VzZU91dD0hMCxpLl9jbGVhckN1cnJlbnRMaW5rKCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAsZi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX2VsZW1lbnQsIm1vdXNlbW92ZSIsdGhpcy5fb25Nb3VzZU1vdmUuYmluZCh0aGlzKSkpLHRoaXMucmVnaXN0ZXIoKDAsZi5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX2VsZW1lbnQsIm1vdXNlZG93biIsdGhpcy5faGFuZGxlTW91c2VEb3duLmJpbmQodGhpcykpKSx0aGlzLnJlZ2lzdGVyKCgwLGYuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLl9lbGVtZW50LCJtb3VzZXVwIix0aGlzLl9oYW5kbGVNb3VzZVVwLmJpbmQodGhpcykpKX0sdC5wcm90b3R5cGUuX29uTW91c2VNb3ZlPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2xhc3RNb3VzZUV2ZW50PWUsdGhpcy5fZWxlbWVudCYmdGhpcy5fbW91c2VTZXJ2aWNlKXt2YXIgdD10aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGUsdGhpcy5fZWxlbWVudCx0aGlzLl9tb3VzZVNlcnZpY2UpO2lmKHQpe3RoaXMuX2lzTW91c2VPdXQ9ITE7Zm9yKHZhciByPWUuY29tcG9zZWRQYXRoKCksaT0wO2k8ci5sZW5ndGg7aSsrKXt2YXIgbj1yW2ldO2lmKG4uY2xhc3NMaXN0LmNvbnRhaW5zKCJ4dGVybSIpKWJyZWFrO2lmKG4uY2xhc3NMaXN0LmNvbnRhaW5zKCJ4dGVybS1ob3ZlciIpKXJldHVybn10aGlzLl9sYXN0QnVmZmVyQ2VsbCYmdC54PT09dGhpcy5fbGFzdEJ1ZmZlckNlbGwueCYmdC55PT09dGhpcy5fbGFzdEJ1ZmZlckNlbGwueXx8KHRoaXMuX29uSG92ZXIodCksdGhpcy5fbGFzdEJ1ZmZlckNlbGw9dCl9fX0sdC5wcm90b3R5cGUuX29uSG92ZXI9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlTGluZSE9PWUueSlyZXR1cm4gdGhpcy5fY2xlYXJDdXJyZW50TGluaygpLHZvaWQgdGhpcy5fYXNrRm9yTGluayhlLCExKTt0aGlzLl9jdXJyZW50TGluayYmdGhpcy5fbGlua0F0UG9zaXRpb24odGhpcy5fY3VycmVudExpbmsubGluayxlKXx8KHRoaXMuX2NsZWFyQ3VycmVudExpbmsoKSx0aGlzLl9hc2tGb3JMaW5rKGUsITApKX0sdC5wcm90b3R5cGUuX2Fza0Zvckxpbms9ZnVuY3Rpb24oZSx0KXt2YXIgcixpLG4sbyxzPXRoaXM7dGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzJiZ0fHwobnVsbD09PShuPXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyl8fHZvaWQgMD09PW58fG4uZm9yRWFjaCgoZnVuY3Rpb24oZSl7bnVsbD09ZXx8ZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlLmxpbmsuZGlzcG9zZSYmZS5saW5rLmRpc3Bvc2UoKX0pKX0pKSx0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXM9bmV3IE1hcCx0aGlzLl9hY3RpdmVMaW5lPWUueSk7dmFyIGw9ITEsaD1mdW5jdGlvbihyLGkpe3Q/KG51bGw9PT0obz11Ll9hY3RpdmVQcm92aWRlclJlcGxpZXMpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmdldChyKSkmJihsPXUuX2NoZWNrTGlua1Byb3ZpZGVyUmVzdWx0KHIsZSxsKSk6aS5wcm92aWRlTGlua3MoZS55LChmdW5jdGlvbih0KXt2YXIgaSxuO2lmKCFzLl9pc01vdXNlT3V0KXt2YXIgbz1udWxsPT10P3ZvaWQgMDp0Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2xpbms6ZX19KSk7bnVsbD09PShpPXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcyl8fHZvaWQgMD09PWl8fGkuc2V0KHIsbyksbD1zLl9jaGVja0xpbmtQcm92aWRlclJlc3VsdChyLGUsbCksKG51bGw9PT0obj1zLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLnNpemUpPT09cy5fbGlua1Byb3ZpZGVycy5sZW5ndGgmJnMuX3JlbW92ZUludGVyc2VjdGluZ0xpbmtzKGUueSxzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMpfX0pKX0sdT10aGlzO3RyeXtmb3IodmFyIGY9YSh0aGlzLl9saW5rUHJvdmlkZXJzLmVudHJpZXMoKSksXz1mLm5leHQoKTshXy5kb25lO189Zi5uZXh0KCkpe3ZhciBkPWMoXy52YWx1ZSwyKTtoKGRbMF0sZFsxXSl9fWNhdGNoKGUpe3I9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e18mJiFfLmRvbmUmJihpPWYucmV0dXJuKSYmaS5jYWxsKGYpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX19LHQucHJvdG90eXBlLl9yZW1vdmVJbnRlcnNlY3RpbmdMaW5rcz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1uZXcgU2V0LGk9MDtpPHQuc2l6ZTtpKyspe3ZhciBuPXQuZ2V0KGkpO2lmKG4pZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspZm9yKHZhciBzPW5bb10sYT1zLmxpbmsucmFuZ2Uuc3RhcnQueTxlPzA6cy5saW5rLnJhbmdlLnN0YXJ0LngsYz1zLmxpbmsucmFuZ2UuZW5kLnk+ZT90aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM6cy5saW5rLnJhbmdlLmVuZC54LGw9YTtsPD1jO2wrKyl7aWYoci5oYXMobCkpe24uc3BsaWNlKG8tLSwxKTticmVha31yLmFkZChsKX19fSx0LnByb3RvdHlwZS5fY2hlY2tMaW5rUHJvdmlkZXJSZXN1bHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcztpZighdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzKXJldHVybiByO2Zvcih2YXIgbz10aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KGUpLHM9ITEsYT0wO2E8ZTthKyspdGhpcy5fYWN0aXZlUHJvdmlkZXJSZXBsaWVzLmhhcyhhKSYmIXRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5nZXQoYSl8fChzPSEwKTtpZighcyYmbyl7dmFyIGM9by5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gbi5fbGlua0F0UG9zaXRpb24oZS5saW5rLHQpfSkpO2MmJihyPSEwLHRoaXMuX2hhbmRsZU5ld0xpbmsoYykpfWlmKHRoaXMuX2FjdGl2ZVByb3ZpZGVyUmVwbGllcy5zaXplPT09dGhpcy5fbGlua1Byb3ZpZGVycy5sZW5ndGgmJiFyKWZvcihhPTA7YTx0aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuc2l6ZTthKyspe3ZhciBsPW51bGw9PT0oaT10aGlzLl9hY3RpdmVQcm92aWRlclJlcGxpZXMuZ2V0KGEpKXx8dm9pZCAwPT09aT92b2lkIDA6aS5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gbi5fbGlua0F0UG9zaXRpb24oZS5saW5rLHQpfSkpO2lmKGwpe3I9ITAsdGhpcy5faGFuZGxlTmV3TGluayhsKTticmVha319cmV0dXJuIHJ9LHQucHJvdG90eXBlLl9oYW5kbGVNb3VzZURvd249ZnVuY3Rpb24oKXt0aGlzLl9tb3VzZURvd25MaW5rPXRoaXMuX2N1cnJlbnRMaW5rfSx0LnByb3RvdHlwZS5faGFuZGxlTW91c2VVcD1mdW5jdGlvbihlKXtpZih0aGlzLl9lbGVtZW50JiZ0aGlzLl9tb3VzZVNlcnZpY2UmJnRoaXMuX2N1cnJlbnRMaW5rKXt2YXIgdD10aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KGUsdGhpcy5fZWxlbWVudCx0aGlzLl9tb3VzZVNlcnZpY2UpO3QmJnRoaXMuX21vdXNlRG93bkxpbms9PT10aGlzLl9jdXJyZW50TGluayYmdGhpcy5fbGlua0F0UG9zaXRpb24odGhpcy5fY3VycmVudExpbmsubGluayx0KSYmdGhpcy5fY3VycmVudExpbmsubGluay5hY3RpdmF0ZShlLHRoaXMuX2N1cnJlbnRMaW5rLmxpbmsudGV4dCl9fSx0LnByb3RvdHlwZS5fY2xlYXJDdXJyZW50TGluaz1mdW5jdGlvbihlLHQpe3RoaXMuX2VsZW1lbnQmJnRoaXMuX2N1cnJlbnRMaW5rJiZ0aGlzLl9sYXN0TW91c2VFdmVudCYmKCFlfHwhdHx8dGhpcy5fY3VycmVudExpbmsubGluay5yYW5nZS5zdGFydC55Pj1lJiZ0aGlzLl9jdXJyZW50TGluay5saW5rLnJhbmdlLmVuZC55PD10KSYmKHRoaXMuX2xpbmtMZWF2ZSh0aGlzLl9lbGVtZW50LHRoaXMuX2N1cnJlbnRMaW5rLmxpbmssdGhpcy5fbGFzdE1vdXNlRXZlbnQpLHRoaXMuX2N1cnJlbnRMaW5rPXZvaWQgMCwoMCx1LmRpc3Bvc2VBcnJheSkodGhpcy5fbGlua0NhY2hlRGlzcG9zYWJsZXMpKX0sdC5wcm90b3R5cGUuX2hhbmRsZU5ld0xpbms9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLl9lbGVtZW50JiZ0aGlzLl9sYXN0TW91c2VFdmVudCYmdGhpcy5fbW91c2VTZXJ2aWNlKXt2YXIgcj10aGlzLl9wb3NpdGlvbkZyb21Nb3VzZUV2ZW50KHRoaXMuX2xhc3RNb3VzZUV2ZW50LHRoaXMuX2VsZW1lbnQsdGhpcy5fbW91c2VTZXJ2aWNlKTtyJiZ0aGlzLl9saW5rQXRQb3NpdGlvbihlLmxpbmsscikmJih0aGlzLl9jdXJyZW50TGluaz1lLHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlPXtkZWNvcmF0aW9uczp7dW5kZXJsaW5lOnZvaWQgMD09PWUubGluay5kZWNvcmF0aW9uc3x8ZS5saW5rLmRlY29yYXRpb25zLnVuZGVybGluZSxwb2ludGVyQ3Vyc29yOnZvaWQgMD09PWUubGluay5kZWNvcmF0aW9uc3x8ZS5saW5rLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3J9LGlzSG92ZXJlZDohMH0sdGhpcy5fbGlua0hvdmVyKHRoaXMuX2VsZW1lbnQsZS5saW5rLHRoaXMuX2xhc3RNb3VzZUV2ZW50KSxlLmxpbmsuZGVjb3JhdGlvbnM9e30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZS5saW5rLmRlY29yYXRpb25zLHtwb2ludGVyQ3Vyc29yOntnZXQ6ZnVuY3Rpb24oKXt2YXIgZSxyO3JldHVybiBudWxsPT09KHI9bnVsbD09PShlPXQuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zdGF0ZSl8fHZvaWQgMD09PXI/dm9pZCAwOnIuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvcn0sc2V0OmZ1bmN0aW9uKGUpe3ZhciByLGk7KG51bGw9PT0ocj10Ll9jdXJyZW50TGluayl8fHZvaWQgMD09PXI/dm9pZCAwOnIuc3RhdGUpJiZ0Ll9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yIT09ZSYmKHQuX2N1cnJlbnRMaW5rLnN0YXRlLmRlY29yYXRpb25zLnBvaW50ZXJDdXJzb3I9ZSx0Ll9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQmJihudWxsPT09KGk9dC5fZWxlbWVudCl8fHZvaWQgMD09PWl8fGkuY2xhc3NMaXN0LnRvZ2dsZSgieHRlcm0tY3Vyc29yLXBvaW50ZXIiLGUpKSl9fSx1bmRlcmxpbmU6e2dldDpmdW5jdGlvbigpe3ZhciBlLHI7cmV0dXJuIG51bGw9PT0ocj1udWxsPT09KGU9dC5fY3VycmVudExpbmspfHx2b2lkIDA9PT1lP3ZvaWQgMDplLnN0YXRlKXx8dm9pZCAwPT09cj92b2lkIDA6ci5kZWNvcmF0aW9ucy51bmRlcmxpbmV9LHNldDpmdW5jdGlvbihyKXt2YXIgaSxuLG87KG51bGw9PT0oaT10Ll9jdXJyZW50TGluayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuc3RhdGUpJiYobnVsbD09PShvPW51bGw9PT0obj10Ll9jdXJyZW50TGluayl8fHZvaWQgMD09PW4/dm9pZCAwOm4uc3RhdGUpfHx2b2lkIDA9PT1vP3ZvaWQgMDpvLmRlY29yYXRpb25zLnVuZGVybGluZSkhPT1yJiYodC5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMudW5kZXJsaW5lPXIsdC5fY3VycmVudExpbmsuc3RhdGUuaXNIb3ZlcmVkJiZ0Ll9maXJlVW5kZXJsaW5lRXZlbnQoZS5saW5rLHIpKX19fSksdGhpcy5fcmVuZGVyU2VydmljZSYmdGhpcy5fbGlua0NhY2hlRGlzcG9zYWJsZXMucHVzaCh0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoZnVuY3Rpb24oZSl7dmFyIHI9MD09PWUuc3RhcnQ/MDplLnN0YXJ0KzErdC5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7dC5fY2xlYXJDdXJyZW50TGluayhyLGUuZW5kKzErdC5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3ApfSkpKSl9fSx0LnByb3RvdHlwZS5fbGlua0hvdmVyPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaTsobnVsbD09PShpPXRoaXMuX2N1cnJlbnRMaW5rKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zdGF0ZSkmJih0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5pc0hvdmVyZWQ9ITAsdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMudW5kZXJsaW5lJiZ0aGlzLl9maXJlVW5kZXJsaW5lRXZlbnQodCwhMCksdGhpcy5fY3VycmVudExpbmsuc3RhdGUuZGVjb3JhdGlvbnMucG9pbnRlckN1cnNvciYmZS5jbGFzc0xpc3QuYWRkKCJ4dGVybS1jdXJzb3ItcG9pbnRlciIpKSx0LmhvdmVyJiZ0LmhvdmVyKHIsdC50ZXh0KX0sdC5wcm90b3R5cGUuX2ZpcmVVbmRlcmxpbmVFdmVudD1mdW5jdGlvbihlLHQpe3ZhciByPWUucmFuZ2UsaT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxuPXRoaXMuX2NyZWF0ZUxpbmtVbmRlcmxpbmVFdmVudChyLnN0YXJ0LngtMSxyLnN0YXJ0LnktaS0xLHIuZW5kLngsci5lbmQueS1pLTEsdm9pZCAwKTsodD90aGlzLl9vblNob3dMaW5rVW5kZXJsaW5lOnRoaXMuX29uSGlkZUxpbmtVbmRlcmxpbmUpLmZpcmUobil9LHQucHJvdG90eXBlLl9saW5rTGVhdmU9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpOyhudWxsPT09KGk9dGhpcy5fY3VycmVudExpbmspfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnN0YXRlKSYmKHRoaXMuX2N1cnJlbnRMaW5rLnN0YXRlLmlzSG92ZXJlZD0hMSx0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy51bmRlcmxpbmUmJnRoaXMuX2ZpcmVVbmRlcmxpbmVFdmVudCh0LCExKSx0aGlzLl9jdXJyZW50TGluay5zdGF0ZS5kZWNvcmF0aW9ucy5wb2ludGVyQ3Vyc29yJiZlLmNsYXNzTGlzdC5yZW1vdmUoInh0ZXJtLWN1cnNvci1wb2ludGVyIikpLHQubGVhdmUmJnQubGVhdmUocix0LnRleHQpfSx0LnByb3RvdHlwZS5fbGlua0F0UG9zaXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLnJhbmdlLnN0YXJ0Lnk9PT1lLnJhbmdlLmVuZC55LGk9ZS5yYW5nZS5zdGFydC55PHQueSxuPWUucmFuZ2UuZW5kLnk+dC55O3JldHVybihyJiZlLnJhbmdlLnN0YXJ0Lng8PXQueCYmZS5yYW5nZS5lbmQueD49dC54fHxpJiZlLnJhbmdlLmVuZC54Pj10Lnh8fG4mJmUucmFuZ2Uuc3RhcnQueDw9dC54fHxpJiZuKSYmZS5yYW5nZS5zdGFydC55PD10LnkmJmUucmFuZ2UuZW5kLnk+PXQueX0sdC5wcm90b3R5cGUuX3Bvc2l0aW9uRnJvbU1vdXNlRXZlbnQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXIuZ2V0Q29vcmRzKGUsdCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKTtpZihpKXJldHVybnt4OmlbMF0seTppWzFdK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwfX0sdC5wcm90b3R5cGUuX2NyZWF0ZUxpbmtVbmRlcmxpbmVFdmVudD1mdW5jdGlvbihlLHQscixpLG4pe3JldHVybnt4MTplLHkxOnQseDI6cix5MjppLGNvbHM6dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGZnOm59fSxvKFtzKDAsbC5JQnVmZmVyU2VydmljZSldLHQpfSh1LkRpc3Bvc2FibGUpO3QuTGlua2lmaWVyMj1ffSw5MDQyOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQudG9vTXVjaE91dHB1dD10LnByb21wdExhYmVsPXZvaWQgMCx0LnByb21wdExhYmVsPSJUZXJtaW5hbCBpbnB1dCIsdC50b29NdWNoT3V0cHV0PSJUb28gbXVjaCBvdXRwdXQgdG8gYW5ub3VuY2UsIG5hdmlnYXRlIHRvIHJvd3MgbWFudWFsbHkgdG8gcmVhZCJ9LDY5NTQ6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTW91c2Vab25lTWFuYWdlcj12b2lkIDA7dmFyIGE9cig4NDQpLGM9cigzNjU2KSxsPXIoNDcyNSksaD1yKDI1ODUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyl7dmFyIGE9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBhLl9lbGVtZW50PXQsYS5fc2NyZWVuRWxlbWVudD1yLGEuX2J1ZmZlclNlcnZpY2U9aSxhLl9tb3VzZVNlcnZpY2U9bixhLl9zZWxlY3Rpb25TZXJ2aWNlPW8sYS5fb3B0aW9uc1NlcnZpY2U9cyxhLl96b25lcz1bXSxhLl9hcmVab25lc0FjdGl2ZT0hMSxhLl9sYXN0SG92ZXJDb29yZHM9W3ZvaWQgMCx2b2lkIDBdLGEuX2luaXRpYWxTZWxlY3Rpb25MZW5ndGg9MCxhLnJlZ2lzdGVyKCgwLGMuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShhLl9lbGVtZW50LCJtb3VzZWRvd24iLChmdW5jdGlvbihlKXtyZXR1cm4gYS5fb25Nb3VzZURvd24oZSl9KSkpLGEuX21vdXNlTW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBhLl9vbk1vdXNlTW92ZShlKX0sYS5fbW91c2VMZWF2ZUxpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBhLl9vbk1vdXNlTGVhdmUoZSl9LGEuX2NsaWNrTGlzdGVuZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIGEuX29uQ2xpY2soZSl9LGF9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLHRoaXMuX2RlYWN0aXZhdGUoKX0sdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGUpe3RoaXMuX3pvbmVzLnB1c2goZSksMT09PXRoaXMuX3pvbmVzLmxlbmd0aCYmdGhpcy5fYWN0aXZhdGUoKX0sdC5wcm90b3R5cGUuY2xlYXJBbGw9ZnVuY3Rpb24oZSx0KXtpZigwIT09dGhpcy5fem9uZXMubGVuZ3RoKXtlJiZ0fHwoZT0wLHQ9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpO2Zvcih2YXIgcj0wO3I8dGhpcy5fem9uZXMubGVuZ3RoO3IrKyl7dmFyIGk9dGhpcy5fem9uZXNbcl07KGkueTE+ZSYmaS55MTw9dCsxfHxpLnkyPmUmJmkueTI8PXQrMXx8aS55MTxlJiZpLnkyPnQrMSkmJih0aGlzLl9jdXJyZW50Wm9uZSYmdGhpcy5fY3VycmVudFpvbmU9PT1pJiYodGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpLHRoaXMuX2N1cnJlbnRab25lPXZvaWQgMCksdGhpcy5fem9uZXMuc3BsaWNlKHItLSwxKSl9MD09PXRoaXMuX3pvbmVzLmxlbmd0aCYmdGhpcy5fZGVhY3RpdmF0ZSgpfX0sdC5wcm90b3R5cGUuX2FjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fYXJlWm9uZXNBY3RpdmV8fCh0aGlzLl9hcmVab25lc0FjdGl2ZT0hMCx0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpLHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyKSx0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLl9jbGlja0xpc3RlbmVyKSl9LHQucHJvdG90eXBlLl9kZWFjdGl2YXRlPWZ1bmN0aW9uKCl7dGhpcy5fYXJlWm9uZXNBY3RpdmUmJih0aGlzLl9hcmVab25lc0FjdGl2ZT0hMSx0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlbW92ZSIsdGhpcy5fbW91c2VNb3ZlTGlzdGVuZXIpLHRoaXMuX2VsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2VsZWF2ZSIsdGhpcy5fbW91c2VMZWF2ZUxpc3RlbmVyKSx0aGlzLl9lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImNsaWNrIix0aGlzLl9jbGlja0xpc3RlbmVyKSl9LHQucHJvdG90eXBlLl9vbk1vdXNlTW92ZT1mdW5jdGlvbihlKXt0aGlzLl9sYXN0SG92ZXJDb29yZHNbMF09PT1lLnBhZ2VYJiZ0aGlzLl9sYXN0SG92ZXJDb29yZHNbMV09PT1lLnBhZ2VZfHwodGhpcy5fb25Ib3ZlcihlKSx0aGlzLl9sYXN0SG92ZXJDb29yZHM9W2UucGFnZVgsZS5wYWdlWV0pfSx0LnByb3RvdHlwZS5fb25Ib3Zlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLHI9dGhpcy5fZmluZFpvbmVFdmVudEF0KGUpO3IhPT10aGlzLl9jdXJyZW50Wm9uZSYmKHRoaXMuX2N1cnJlbnRab25lJiYodGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpLHRoaXMuX2N1cnJlbnRab25lPXZvaWQgMCx0aGlzLl90b29sdGlwVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMuX3Rvb2x0aXBUaW1lb3V0KSksciYmKHRoaXMuX2N1cnJlbnRab25lPXIsci5ob3ZlckNhbGxiYWNrJiZyLmhvdmVyQ2FsbGJhY2soZSksdGhpcy5fdG9vbHRpcFRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uVG9vbHRpcChlKX0pLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGlua1Rvb2x0aXBIb3ZlckR1cmF0aW9uKSkpfSx0LnByb3RvdHlwZS5fb25Ub29sdGlwPWZ1bmN0aW9uKGUpe3RoaXMuX3Rvb2x0aXBUaW1lb3V0PXZvaWQgMDt2YXIgdD10aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7bnVsbD09dHx8dC50b29sdGlwQ2FsbGJhY2soZSl9LHQucHJvdG90eXBlLl9vbk1vdXNlRG93bj1mdW5jdGlvbihlKXtpZih0aGlzLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoPXRoaXMuX2dldFNlbGVjdGlvbkxlbmd0aCgpLHRoaXMuX2FyZVpvbmVzQWN0aXZlKXt2YXIgdD10aGlzLl9maW5kWm9uZUV2ZW50QXQoZSk7KG51bGw9PXQ/dm9pZCAwOnQud2lsbExpbmtBY3RpdmF0ZShlKSkmJihlLnByZXZlbnREZWZhdWx0KCksZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9fSx0LnByb3RvdHlwZS5fb25Nb3VzZUxlYXZlPWZ1bmN0aW9uKGUpe3RoaXMuX2N1cnJlbnRab25lJiYodGhpcy5fY3VycmVudFpvbmUubGVhdmVDYWxsYmFjaygpLHRoaXMuX2N1cnJlbnRab25lPXZvaWQgMCx0aGlzLl90b29sdGlwVGltZW91dCYmY2xlYXJUaW1lb3V0KHRoaXMuX3Rvb2x0aXBUaW1lb3V0KSl9LHQucHJvdG90eXBlLl9vbkNsaWNrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2ZpbmRab25lRXZlbnRBdChlKSxyPXRoaXMuX2dldFNlbGVjdGlvbkxlbmd0aCgpO3QmJnI9PT10aGlzLl9pbml0aWFsU2VsZWN0aW9uTGVuZ3RoJiYodC5jbGlja0NhbGxiYWNrKGUpLGUucHJldmVudERlZmF1bHQoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpKX0sdC5wcm90b3R5cGUuX2dldFNlbGVjdGlvbkxlbmd0aD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uVGV4dDtyZXR1cm4gZT9lLmxlbmd0aDowfSx0LnByb3RvdHlwZS5fZmluZFpvbmVFdmVudEF0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSx0aGlzLl9zY3JlZW5FbGVtZW50LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpO2lmKHQpZm9yKHZhciByPXRbMF0saT10WzFdLG49MDtuPHRoaXMuX3pvbmVzLmxlbmd0aDtuKyspe3ZhciBvPXRoaXMuX3pvbmVzW25dO2lmKG8ueTE9PT1vLnkyKXtpZihpPT09by55MSYmcj49by54MSYmcjxvLngyKXJldHVybiBvfWVsc2UgaWYoaT09PW8ueTEmJnI+PW8ueDF8fGk9PT1vLnkyJiZyPG8ueDJ8fGk+by55MSYmaTxvLnkyKXJldHVybiBvfX0sbyhbcygyLGguSUJ1ZmZlclNlcnZpY2UpLHMoMyxsLklNb3VzZVNlcnZpY2UpLHMoNCxsLklTZWxlY3Rpb25TZXJ2aWNlKSxzKDUsaC5JT3B0aW9uc1NlcnZpY2UpXSx0KX0oYS5EaXNwb3NhYmxlKTt0Lk1vdXNlWm9uZU1hbmFnZXI9dX0sNjE5MzpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5SZW5kZXJEZWJvdW5jZXI9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9yZW5kZXJDYWxsYmFjaz1lLHRoaXMuX3JlZnJlc2hDYWxsYmFja3M9W119cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9hbmltYXRpb25GcmFtZSYmKHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSksdGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwKX0sZS5wcm90b3R5cGUuYWRkUmVmcmVzaENhbGxiYWNrPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuX3JlZnJlc2hDYWxsYmFja3MucHVzaChlKSx0aGlzLl9hbmltYXRpb25GcmFtZXx8KHRoaXMuX2FuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2lubmVyUmVmcmVzaCgpfSkpKSx0aGlzLl9hbmltYXRpb25GcmFtZX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpczt0aGlzLl9yb3dDb3VudD1yLGU9dm9pZCAwIT09ZT9lOjAsdD12b2lkIDAhPT10P3Q6dGhpcy5fcm93Q291bnQtMSx0aGlzLl9yb3dTdGFydD12b2lkIDAhPT10aGlzLl9yb3dTdGFydD9NYXRoLm1pbih0aGlzLl9yb3dTdGFydCxlKTplLHRoaXMuX3Jvd0VuZD12b2lkIDAhPT10aGlzLl9yb3dFbmQ/TWF0aC5tYXgodGhpcy5fcm93RW5kLHQpOnQsdGhpcy5fYW5pbWF0aW9uRnJhbWV8fCh0aGlzLl9hbmltYXRpb25GcmFtZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKChmdW5jdGlvbigpe3JldHVybiBpLl9pbm5lclJlZnJlc2goKX0pKSl9LGUucHJvdG90eXBlLl9pbm5lclJlZnJlc2g9ZnVuY3Rpb24oKXtpZih0aGlzLl9hbmltYXRpb25GcmFtZT12b2lkIDAsdm9pZCAwIT09dGhpcy5fcm93U3RhcnQmJnZvaWQgMCE9PXRoaXMuX3Jvd0VuZCYmdm9pZCAwIT09dGhpcy5fcm93Q291bnQpe3ZhciBlPU1hdGgubWF4KHRoaXMuX3Jvd1N0YXJ0LDApLHQ9TWF0aC5taW4odGhpcy5fcm93RW5kLHRoaXMuX3Jvd0NvdW50LTEpO3RoaXMuX3Jvd1N0YXJ0PXZvaWQgMCx0aGlzLl9yb3dFbmQ9dm9pZCAwLHRoaXMuX3JlbmRlckNhbGxiYWNrKGUsdCksdGhpcy5fcnVuUmVmcmVzaENhbGxiYWNrcygpfWVsc2UgdGhpcy5fcnVuUmVmcmVzaENhbGxiYWNrcygpfSxlLnByb3RvdHlwZS5fcnVuUmVmcmVzaENhbGxiYWNrcz1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgaT1yKHRoaXMuX3JlZnJlc2hDYWxsYmFja3MpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKSgwLG4udmFsdWUpKDApfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJih0PWkucmV0dXJuKSYmdC5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLl9yZWZyZXNoQ2FsbGJhY2tzPVtdfSxlfSgpO3QuUmVuZGVyRGVib3VuY2VyPWl9LDU1OTY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU2NyZWVuRHByTW9uaXRvcj12b2lkIDA7dmFyIG89ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5fY3VycmVudERldmljZVBpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW8sdH1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLnNldExpc3RlbmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fbGlzdGVuZXImJnRoaXMuY2xlYXJMaXN0ZW5lcigpLHRoaXMuX2xpc3RlbmVyPWUsdGhpcy5fb3V0ZXJMaXN0ZW5lcj1mdW5jdGlvbigpe3QuX2xpc3RlbmVyJiYodC5fbGlzdGVuZXIod2luZG93LmRldmljZVBpeGVsUmF0aW8sdC5fY3VycmVudERldmljZVBpeGVsUmF0aW8pLHQuX3VwZGF0ZURwcigpKX0sdGhpcy5fdXBkYXRlRHByKCl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyksdGhpcy5jbGVhckxpc3RlbmVyKCl9LHQucHJvdG90eXBlLl91cGRhdGVEcHI9ZnVuY3Rpb24oKXt2YXIgZTt0aGlzLl9vdXRlckxpc3RlbmVyJiYobnVsbD09PShlPXRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdCl8fHZvaWQgMD09PWV8fGUucmVtb3ZlTGlzdGVuZXIodGhpcy5fb3V0ZXJMaXN0ZW5lciksdGhpcy5fY3VycmVudERldmljZVBpeGVsUmF0aW89d2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0PXdpbmRvdy5tYXRjaE1lZGlhKCJzY3JlZW4gYW5kIChyZXNvbHV0aW9uOiAiK3dpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKyJkcHB4KSIpLHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdC5hZGRMaXN0ZW5lcih0aGlzLl9vdXRlckxpc3RlbmVyKSl9LHQucHJvdG90eXBlLmNsZWFyTGlzdGVuZXI9ZnVuY3Rpb24oKXt0aGlzLl9yZXNvbHV0aW9uTWVkaWFNYXRjaExpc3QmJnRoaXMuX2xpc3RlbmVyJiZ0aGlzLl9vdXRlckxpc3RlbmVyJiYodGhpcy5fcmVzb2x1dGlvbk1lZGlhTWF0Y2hMaXN0LnJlbW92ZUxpc3RlbmVyKHRoaXMuX291dGVyTGlzdGVuZXIpLHRoaXMuX3Jlc29sdXRpb25NZWRpYU1hdGNoTGlzdD12b2lkIDAsdGhpcy5fbGlzdGVuZXI9dm9pZCAwLHRoaXMuX291dGVyTGlzdGVuZXI9dm9pZCAwKX0sdH0ocig4NDQpLkRpc3Bvc2FibGUpO3QuU2NyZWVuRHByTW9uaXRvcj1vfSwzMjM2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9LHM9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfSxhPXRoaXMmJnRoaXMuX19zcHJlYWRBcnJheXx8ZnVuY3Rpb24oZSx0LHIpe2lmKHJ8fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaSxuPTAsbz10Lmxlbmd0aDtuPG87bisrKSFpJiZuIGluIHR8fChpfHwoaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAsbikpLGlbbl09dFtuXSk7cmV0dXJuIGUuY29uY2F0KGl8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVGVybWluYWw9dm9pZCAwO3ZhciBjPXIoMjk1MCksbD1yKDE2ODApLGg9cigzNjE0KSx1PXIoMjU4NCksZj1yKDU0MzUpLF89cigzNTI1KSxkPXIoMzU1MSkscD1yKDkzMTIpLHY9cig2MTE0KSx5PXIoMzY1NiksZz1yKDkwNDIpLG09cigzNTcpLGI9cig2OTU0KSxTPXIoNDU2NyksQz1yKDEyOTYpLHc9cig3Mzk5KSxMPXIoODQ2MCksRT1yKDg0MzcpLHg9cig1NjgwKSxSPXIoMzIzMCksaz1yKDQ3MjUpLE09cig0MjgpLEE9cig4OTM0KSxPPXIoNjQ2NSksRD1yKDUxMTQpLFQ9cig4OTY5KSxCPXIoODA1NSksUD1yKDQyNjkpLEk9cig1OTQxKSxIPXIoMzEwNyksaj1yKDU3NDQpLEY9cig5MDc0KSxXPXIoMjU4NSksVT0idW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3cuZG9jdW1lbnQ6bnVsbCxxPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dm9pZCAwPT09dCYmKHQ9e30pO3ZhciByPWUuY2FsbCh0aGlzLHQpfHx0aGlzO3JldHVybiByLmJyb3dzZXI9dixyLl9rZXlEb3duSGFuZGxlZD0hMSxyLl9rZXlEb3duU2Vlbj0hMSxyLl9rZXlQcmVzc0hhbmRsZWQ9ITEsci5fdW5wcm9jZXNzZWREZWFkS2V5PSExLHIuX29uQ3Vyc29yTW92ZT1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25LZXk9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uUmVuZGVyPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vblNlbGVjdGlvbkNoYW5nZT1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25UaXRsZUNoYW5nZT1uZXcgTC5FdmVudEVtaXR0ZXIsci5fb25CZWxsPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbkZvY3VzPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbkJsdXI9bmV3IEwuRXZlbnRFbWl0dGVyLHIuX29uQTExeUNoYXJFbWl0dGVyPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9vbkExMXlUYWJFbWl0dGVyPW5ldyBMLkV2ZW50RW1pdHRlcixyLl9zZXR1cCgpLHIubGlua2lmaWVyPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGQuTGlua2lmaWVyKSxyLmxpbmtpZmllcjI9ci5yZWdpc3RlcihyLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShPLkxpbmtpZmllcjIpKSxyLl9kZWNvcmF0aW9uU2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShGLkRlY29yYXRpb25TZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKFcuSURlY29yYXRpb25TZXJ2aWNlLHIuX2RlY29yYXRpb25TZXJ2aWNlKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RCZWxsKChmdW5jdGlvbigpe3JldHVybiByLmJlbGwoKX0pKSksci5yZWdpc3RlcihyLl9pbnB1dEhhbmRsZXIub25SZXF1ZXN0UmVmcmVzaFJvd3MoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIucmVmcmVzaChlLHQpfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblJlcXVlc3RTZW5kRm9jdXMoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX3JlcG9ydEZvY3VzKCl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFJlc2V0KChmdW5jdGlvbigpe3JldHVybiByLnJlc2V0KCl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0KChmdW5jdGlvbihlKXtyZXR1cm4gci5fcmVwb3J0V2luZG93c09wdGlvbnMoZSl9KSkpLHIucmVnaXN0ZXIoci5faW5wdXRIYW5kbGVyLm9uQ29sb3IoKGZ1bmN0aW9uKGUpe3JldHVybiByLl9oYW5kbGVDb2xvckV2ZW50KGUpfSkpKSxyLnJlZ2lzdGVyKCgwLEwuZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25DdXJzb3JNb3ZlLHIuX29uQ3Vyc29yTW92ZSkpLHIucmVnaXN0ZXIoKDAsTC5mb3J3YXJkRXZlbnQpKHIuX2lucHV0SGFuZGxlci5vblRpdGxlQ2hhbmdlLHIuX29uVGl0bGVDaGFuZ2UpKSxyLnJlZ2lzdGVyKCgwLEwuZm9yd2FyZEV2ZW50KShyLl9pbnB1dEhhbmRsZXIub25BMTF5Q2hhcixyLl9vbkExMXlDaGFyRW1pdHRlcikpLHIucmVnaXN0ZXIoKDAsTC5mb3J3YXJkRXZlbnQpKHIuX2lucHV0SGFuZGxlci5vbkExMXlUYWIsci5fb25BMTF5VGFiRW1pdHRlcikpLHIucmVnaXN0ZXIoci5fYnVmZmVyU2VydmljZS5vblJlc2l6ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHIuX2FmdGVyUmVzaXplKGUuY29scyxlLnJvd3MpfSkpKSxyfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkN1cnNvck1vdmUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25DdXJzb3JNb3ZlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25LZXkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25LZXkuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlbmRlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlbmRlci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uU2VsZWN0aW9uQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2VsZWN0aW9uQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25UaXRsZUNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblRpdGxlQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CZWxsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQmVsbC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRm9jdXMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Gb2N1cy5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQmx1ciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJsdXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkExMXlDaGFyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQTExeUNoYXJFbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25BMTF5VGFiIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQTExeVRhYkVtaXR0ZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuX2hhbmRsZUNvbG9yRXZlbnQ9ZnVuY3Rpb24oZSl7dmFyIHQscixpLG47aWYodGhpcy5fY29sb3JNYW5hZ2VyKXt0cnl7Zm9yKHZhciBjPW8oZSksbD1jLm5leHQoKTshbC5kb25lO2w9Yy5uZXh0KCkpe3ZhciBoPWwudmFsdWUsZj12b2lkIDAsXz0iIjtzd2l0Y2goaC5pbmRleCl7Y2FzZSAyNTY6Zj0iZm9yZWdyb3VuZCIsXz0iMTAiO2JyZWFrO2Nhc2UgMjU3OmY9ImJhY2tncm91bmQiLF89IjExIjticmVhaztjYXNlIDI1ODpmPSJjdXJzb3IiLF89IjEyIjticmVhaztkZWZhdWx0OmY9ImFuc2kiLF89IjQ7IitoLmluZGV4fWlmKGYpc3dpdGNoKGgudHlwZSl7Y2FzZSAwOnZhciBkPUIuY29sb3IudG9Db2xvclJHQigiYW5zaSI9PT1mP3RoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMuYW5zaVtoLmluZGV4XTp0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzW2ZdKTt0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIl0iK18rIjsiKygwLEkudG9SZ2JTdHJpbmcpKGQpK3UuQzFfRVNDQVBFRC5TVCk7YnJlYWs7Y2FzZSAxOiJhbnNpIj09PWY/dGhpcy5fY29sb3JNYW5hZ2VyLmNvbG9ycy5hbnNpW2guaW5kZXhdPUIucmdiYS50b0NvbG9yLmFwcGx5KEIucmdiYSxhKFtdLHMoaC5jb2xvciksITEpKTp0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzW2ZdPUIucmdiYS50b0NvbG9yLmFwcGx5KEIucmdiYSxhKFtdLHMoaC5jb2xvciksITEpKTticmVhaztjYXNlIDI6dGhpcy5fY29sb3JNYW5hZ2VyLnJlc3RvcmVDb2xvcihoLmluZGV4KX19fWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2wmJiFsLmRvbmUmJihyPWMucmV0dXJuKSYmci5jYWxsKGMpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX1udWxsPT09KGk9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PWl8fGkuc2V0Q29sb3JzKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpLG51bGw9PT0obj10aGlzLnZpZXdwb3J0KXx8dm9pZCAwPT09bnx8bi5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpfX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciB0LHIsaTt0aGlzLl9pc0Rpc3Bvc2VkfHwoZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGw9PT0odD10aGlzLl9yZW5kZXJTZXJ2aWNlKXx8dm9pZCAwPT09dHx8dC5kaXNwb3NlKCksdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyPXZvaWQgMCx0aGlzLndyaXRlPWZ1bmN0aW9uKCl7fSxudWxsPT09KGk9bnVsbD09PShyPXRoaXMuZWxlbWVudCl8fHZvaWQgMD09PXI/dm9pZCAwOnIucGFyZW50Tm9kZSl8fHZvaWQgMD09PWl8fGkucmVtb3ZlQ2hpbGQodGhpcy5lbGVtZW50KSl9LHQucHJvdG90eXBlLl9zZXR1cD1mdW5jdGlvbigpe2UucHJvdG90eXBlLl9zZXR1cC5jYWxsKHRoaXMpLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcj12b2lkIDB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYnVmZmVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZm9jdXM9ZnVuY3Rpb24oKXt0aGlzLnRleHRhcmVhJiZ0aGlzLnRleHRhcmVhLmZvY3VzKHtwcmV2ZW50U2Nyb2xsOiEwfSl9LHQucHJvdG90eXBlLl91cGRhdGVPcHRpb25zPWZ1bmN0aW9uKHQpe3ZhciByLGksbixvO3N3aXRjaChlLnByb3RvdHlwZS5fdXBkYXRlT3B0aW9ucy5jYWxsKHRoaXMsdCksdCl7Y2FzZSJmb250RmFtaWx5IjpjYXNlImZvbnRTaXplIjpudWxsPT09KHI9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PXJ8fHIuY2xlYXIoKSxudWxsPT09KGk9dGhpcy5fY2hhclNpemVTZXJ2aWNlKXx8dm9pZCAwPT09aXx8aS5tZWFzdXJlKCk7YnJlYWs7Y2FzZSJjdXJzb3JCbGluayI6Y2FzZSJjdXJzb3JTdHlsZSI6dGhpcy5yZWZyZXNoKHRoaXMuYnVmZmVyLnksdGhpcy5idWZmZXIueSk7YnJlYWs7Y2FzZSJjdXN0b21HbHlwaHMiOmNhc2UiZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMiOmNhc2UibGV0dGVyU3BhY2luZyI6Y2FzZSJsaW5lSGVpZ2h0IjpjYXNlImZvbnRXZWlnaHQiOmNhc2UiZm9udFdlaWdodEJvbGQiOmNhc2UibWluaW11bUNvbnRyYXN0UmF0aW8iOnRoaXMuX3JlbmRlclNlcnZpY2UmJih0aGlzLl9yZW5kZXJTZXJ2aWNlLmNsZWFyKCksdGhpcy5fcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0aGlzLmNvbHMsdGhpcy5yb3dzKSx0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSkpO2JyZWFrO2Nhc2UicmVuZGVyZXJUeXBlIjp0aGlzLl9yZW5kZXJTZXJ2aWNlJiYodGhpcy5fcmVuZGVyU2VydmljZS5zZXRSZW5kZXJlcih0aGlzLl9jcmVhdGVSZW5kZXJlcigpKSx0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVzaXplKHRoaXMuY29scyx0aGlzLnJvd3MpKTticmVhaztjYXNlInNjcm9sbGJhY2siOm51bGw9PT0obj10aGlzLnZpZXdwb3J0KXx8dm9pZCAwPT09bnx8bi5zeW5jU2Nyb2xsQXJlYSgpO2JyZWFrO2Nhc2Uic2NyZWVuUmVhZGVyTW9kZSI6dGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGU/IXRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyJiZ0aGlzLl9yZW5kZXJTZXJ2aWNlJiYodGhpcy5fYWNjZXNzaWJpbGl0eU1hbmFnZXI9bmV3IFMuQWNjZXNzaWJpbGl0eU1hbmFnZXIodGhpcyx0aGlzLl9yZW5kZXJTZXJ2aWNlKSk6KG51bGw9PT0obz10aGlzLl9hY2Nlc3NpYmlsaXR5TWFuYWdlcil8fHZvaWQgMD09PW98fG8uZGlzcG9zZSgpLHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyPXZvaWQgMCk7YnJlYWs7Y2FzZSJ0YWJTdG9wV2lkdGgiOnRoaXMuYnVmZmVycy5zZXR1cFRhYlN0b3BzKCk7YnJlYWs7Y2FzZSJ0aGVtZSI6dGhpcy5fc2V0VGhlbWUodGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRoZW1lKX19LHQucHJvdG90eXBlLl9vblRleHRBcmVhRm9jdXM9ZnVuY3Rpb24oZSl7dGhpcy5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuc2VuZEZvY3VzJiZ0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIltJIiksdGhpcy51cGRhdGVDdXJzb3JTdHlsZShlKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiZm9jdXMiKSx0aGlzLl9zaG93Q3Vyc29yKCksdGhpcy5fb25Gb2N1cy5maXJlKCl9LHQucHJvdG90eXBlLmJsdXI9ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbnVsbD09PShlPXRoaXMudGV4dGFyZWEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmJsdXIoKX0sdC5wcm90b3R5cGUuX29uVGV4dEFyZWFCbHVyPWZ1bmN0aW9uKCl7dGhpcy50ZXh0YXJlYS52YWx1ZT0iIix0aGlzLnJlZnJlc2godGhpcy5idWZmZXIueSx0aGlzLmJ1ZmZlci55KSx0aGlzLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXMmJnRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiW08iKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiZm9jdXMiKSx0aGlzLl9vbkJsdXIuZmlyZSgpfSx0LnByb3RvdHlwZS5fc3luY1RleHRBcmVhPWZ1bmN0aW9uKCl7aWYodGhpcy50ZXh0YXJlYSYmdGhpcy5idWZmZXIuaXNDdXJzb3JJblZpZXdwb3J0JiYhdGhpcy5fY29tcG9zaXRpb25IZWxwZXIuaXNDb21wb3NpbmcmJnRoaXMuX3JlbmRlclNlcnZpY2Upe3ZhciBlPXRoaXMuYnVmZmVyLnliYXNlK3RoaXMuYnVmZmVyLnksdD10aGlzLmJ1ZmZlci5saW5lcy5nZXQoZSk7aWYodCl7dmFyIHI9TWF0aC5taW4odGhpcy5idWZmZXIueCx0aGlzLmNvbHMtMSksaT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxuPXQuZ2V0V2lkdGgociksbz10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKm4scz10aGlzLmJ1ZmZlci55KnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0LGE9cip0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoO3RoaXMudGV4dGFyZWEuc3R5bGUubGVmdD1hKyJweCIsdGhpcy50ZXh0YXJlYS5zdHlsZS50b3A9cysicHgiLHRoaXMudGV4dGFyZWEuc3R5bGUud2lkdGg9bysicHgiLHRoaXMudGV4dGFyZWEuc3R5bGUuaGVpZ2h0PWkrInB4Iix0aGlzLnRleHRhcmVhLnN0eWxlLmxpbmVIZWlnaHQ9aSsicHgiLHRoaXMudGV4dGFyZWEuc3R5bGUuekluZGV4PSItNSJ9fX0sdC5wcm90b3R5cGUuX2luaXRHbG9iYWw9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2JpbmRLZXlzKCksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LCJjb3B5IiwoZnVuY3Rpb24odCl7ZS5oYXNTZWxlY3Rpb24oKSYmKDAsaC5jb3B5SGFuZGxlcikodCxlLl9zZWxlY3Rpb25TZXJ2aWNlKX0pKSk7dmFyIHQ9ZnVuY3Rpb24odCl7cmV0dXJuKDAsaC5oYW5kbGVQYXN0ZUV2ZW50KSh0LGUudGV4dGFyZWEsZS5jb3JlU2VydmljZSl9O3RoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsInBhc3RlIix0KSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LCJwYXN0ZSIsdCkpLHYuaXNGaXJlZm94P3RoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwibW91c2Vkb3duIiwoZnVuY3Rpb24odCl7Mj09PXQuYnV0dG9uJiYoMCxoLnJpZ2h0Q2xpY2tIYW5kbGVyKSh0LGUudGV4dGFyZWEsZS5zY3JlZW5FbGVtZW50LGUuX3NlbGVjdGlvblNlcnZpY2UsZS5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCl9KSkpOnRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwiY29udGV4dG1lbnUiLChmdW5jdGlvbih0KXsoMCxoLnJpZ2h0Q2xpY2tIYW5kbGVyKSh0LGUudGV4dGFyZWEsZS5zY3JlZW5FbGVtZW50LGUuX3NlbGVjdGlvblNlcnZpY2UsZS5vcHRpb25zLnJpZ2h0Q2xpY2tTZWxlY3RzV29yZCl9KSkpLHYuaXNMaW51eCYmdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy5lbGVtZW50LCJhdXhjbGljayIsKGZ1bmN0aW9uKHQpezE9PT10LmJ1dHRvbiYmKDAsaC5tb3ZlVGV4dEFyZWFVbmRlck1vdXNlQ3Vyc29yKSh0LGUudGV4dGFyZWEsZS5zY3JlZW5FbGVtZW50KX0pKSl9LHQucHJvdG90eXBlLl9iaW5kS2V5cz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwia2V5dXAiLChmdW5jdGlvbih0KXtyZXR1cm4gZS5fa2V5VXAodCl9KSwhMCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImtleWRvd24iLChmdW5jdGlvbih0KXtyZXR1cm4gZS5fa2V5RG93bih0KX0pLCEwKSksdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikodGhpcy50ZXh0YXJlYSwia2V5cHJlc3MiLChmdW5jdGlvbih0KXtyZXR1cm4gZS5fa2V5UHJlc3ModCl9KSwhMCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImNvbXBvc2l0aW9uc3RhcnQiLChmdW5jdGlvbigpe3JldHVybiBlLl9jb21wb3NpdGlvbkhlbHBlci5jb21wb3NpdGlvbnN0YXJ0KCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImNvbXBvc2l0aW9udXBkYXRlIiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9udXBkYXRlKHQpfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJjb21wb3NpdGlvbmVuZCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX2NvbXBvc2l0aW9uSGVscGVyLmNvbXBvc2l0aW9uZW5kKCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImlucHV0IiwoZnVuY3Rpb24odCl7cmV0dXJuIGUuX2lucHV0RXZlbnQodCl9KSwhMCkpLHRoaXMucmVnaXN0ZXIodGhpcy5vblJlbmRlcigoZnVuY3Rpb24oKXtyZXR1cm4gZS5fY29tcG9zaXRpb25IZWxwZXIudXBkYXRlQ29tcG9zaXRpb25FbGVtZW50cygpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMub25SZW5kZXIoKGZ1bmN0aW9uKHQpe3JldHVybiBlLl9xdWV1ZUxpbmtpZmljYXRpb24odC5zdGFydCx0LmVuZCl9KSkpfSx0LnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJUZXJtaW5hbCByZXF1aXJlcyBhIHBhcmVudCBlbGVtZW50LiIpO2UuaXNDb25uZWN0ZWR8fHRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIlRlcm1pbmFsLm9wZW4gd2FzIGNhbGxlZCBvbiBhbiBlbGVtZW50IHRoYXQgd2FzIG5vdCBhdHRhY2hlZCB0byB0aGUgRE9NIiksdGhpcy5fZG9jdW1lbnQ9ZS5vd25lckRvY3VtZW50LHRoaXMuZWxlbWVudD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLmVsZW1lbnQuZGlyPSJsdHIiLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ0ZXJtaW5hbCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKCJ4dGVybSIpLHRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoInRhYmluZGV4IiwiMCIpLGUuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KTt2YXIgcj1VLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTt0aGlzLl92aWV3cG9ydEVsZW1lbnQ9VS5jcmVhdGVFbGVtZW50KCJkaXYiKSx0aGlzLl92aWV3cG9ydEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgieHRlcm0tdmlld3BvcnQiKSxyLmFwcGVuZENoaWxkKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCksdGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhPVUuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhLmNsYXNzTGlzdC5hZGQoInh0ZXJtLXNjcm9sbC1hcmVhIiksdGhpcy5fdmlld3BvcnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX3ZpZXdwb3J0U2Nyb2xsQXJlYSksdGhpcy5zY3JlZW5FbGVtZW50PVUuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5zY3JlZW5FbGVtZW50LmNsYXNzTGlzdC5hZGQoInh0ZXJtLXNjcmVlbiIpLHRoaXMuX2hlbHBlckNvbnRhaW5lcj1VLmNyZWF0ZUVsZW1lbnQoImRpdiIpLHRoaXMuX2hlbHBlckNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCJ4dGVybS1oZWxwZXJzIiksdGhpcy5zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2hlbHBlckNvbnRhaW5lciksci5hcHBlbmRDaGlsZCh0aGlzLnNjcmVlbkVsZW1lbnQpLHRoaXMudGV4dGFyZWE9VS5jcmVhdGVFbGVtZW50KCJ0ZXh0YXJlYSIpLHRoaXMudGV4dGFyZWEuY2xhc3NMaXN0LmFkZCgieHRlcm0taGVscGVyLXRleHRhcmVhIiksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoImFyaWEtbGFiZWwiLGcucHJvbXB0TGFiZWwpLHRoaXMudGV4dGFyZWEuc2V0QXR0cmlidXRlKCJhcmlhLW11bHRpbGluZSIsImZhbHNlIiksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoImF1dG9jb3JyZWN0Iiwib2ZmIiksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoImF1dG9jYXBpdGFsaXplIiwib2ZmIiksdGhpcy50ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoInNwZWxsY2hlY2siLCJmYWxzZSIpLHRoaXMudGV4dGFyZWEudGFiSW5kZXg9MCx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh0aGlzLnRleHRhcmVhLCJmb2N1cyIsKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9vblRleHRBcmVhRm9jdXMoZSl9KSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMudGV4dGFyZWEsImJsdXIiLChmdW5jdGlvbigpe3JldHVybiB0Ll9vblRleHRBcmVhQmx1cigpfSkpKSx0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy50ZXh0YXJlYSk7dmFyIGk9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoRC5Db3JlQnJvd3NlclNlcnZpY2UsdGhpcy50ZXh0YXJlYSk7dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklDb3JlQnJvd3NlclNlcnZpY2UsaSksdGhpcy5fY2hhclNpemVTZXJ2aWNlPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKE0uQ2hhclNpemVTZXJ2aWNlLHRoaXMuX2RvY3VtZW50LHRoaXMuX2hlbHBlckNvbnRhaW5lciksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklDaGFyU2l6ZVNlcnZpY2UsdGhpcy5fY2hhclNpemVTZXJ2aWNlKSx0aGlzLl90aGVtZT10aGlzLm9wdGlvbnMudGhlbWV8fHRoaXMuX3RoZW1lLHRoaXMuX2NvbG9yTWFuYWdlcj1uZXcgeC5Db2xvck1hbmFnZXIoVSx0aGlzLm9wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3kpLHRoaXMucmVnaXN0ZXIodGhpcy5vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2NvbG9yTWFuYWdlci5vbk9wdGlvbnNDaGFuZ2UoZSl9KSkpLHRoaXMuX2NvbG9yTWFuYWdlci5zZXRUaGVtZSh0aGlzLl90aGVtZSksdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShQLkNoYXJhY3RlckpvaW5lclNlcnZpY2UpLHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2Uoay5JQ2hhcmFjdGVySm9pbmVyU2VydmljZSx0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKTt2YXIgbj10aGlzLl9jcmVhdGVSZW5kZXJlcigpO3RoaXMuX3JlbmRlclNlcnZpY2U9dGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShSLlJlbmRlclNlcnZpY2Usbix0aGlzLnJvd3MsdGhpcy5zY3JlZW5FbGVtZW50KSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklSZW5kZXJTZXJ2aWNlLHRoaXMuX3JlbmRlclNlcnZpY2UpLHRoaXMucmVnaXN0ZXIodGhpcy5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9vblJlbmRlci5maXJlKGUpfSkpKSx0aGlzLm9uUmVzaXplKChmdW5jdGlvbihlKXtyZXR1cm4gdC5fcmVuZGVyU2VydmljZS5yZXNpemUoZS5jb2xzLGUucm93cyl9KSksdGhpcy5fY29tcG9zaXRpb25WaWV3PVUuY3JlYXRlRWxlbWVudCgiZGl2IiksdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoImNvbXBvc2l0aW9uLXZpZXciKSx0aGlzLl9jb21wb3NpdGlvbkhlbHBlcj10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShjLkNvbXBvc2l0aW9uSGVscGVyLHRoaXMudGV4dGFyZWEsdGhpcy5fY29tcG9zaXRpb25WaWV3KSx0aGlzLl9oZWxwZXJDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY29tcG9zaXRpb25WaWV3KSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQociksdGhpcy5fc291bmRTZXJ2aWNlPXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKG0uU291bmRTZXJ2aWNlKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSVNvdW5kU2VydmljZSx0aGlzLl9zb3VuZFNlcnZpY2UpLHRoaXMuX21vdXNlU2VydmljZT10aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShBLk1vdXNlU2VydmljZSksdGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShrLklNb3VzZVNlcnZpY2UsdGhpcy5fbW91c2VTZXJ2aWNlKSx0aGlzLnZpZXdwb3J0PXRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGwuVmlld3BvcnQsKGZ1bmN0aW9uKGUpe3JldHVybiB0LnNjcm9sbExpbmVzKGUsITAsMSl9KSx0aGlzLl92aWV3cG9ydEVsZW1lbnQsdGhpcy5fdmlld3BvcnRTY3JvbGxBcmVhLHRoaXMuZWxlbWVudCksdGhpcy52aWV3cG9ydC5vblRoZW1lQ2hhbmdlKHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMpLHRoaXMucmVnaXN0ZXIodGhpcy5faW5wdXRIYW5kbGVyLm9uUmVxdWVzdFN5bmNTY3JvbGxCYXIoKGZ1bmN0aW9uKCl7cmV0dXJuIHQudmlld3BvcnQuc3luY1Njcm9sbEFyZWEoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLnZpZXdwb3J0KSx0aGlzLnJlZ2lzdGVyKHRoaXMub25DdXJzb3JNb3ZlKChmdW5jdGlvbigpe3QuX3JlbmRlclNlcnZpY2Uub25DdXJzb3JNb3ZlKCksdC5fc3luY1RleHRBcmVhKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5vblJlc2l6ZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVuZGVyU2VydmljZS5vblJlc2l6ZSh0LmNvbHMsdC5yb3dzKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9uQmx1cigoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVuZGVyU2VydmljZS5vbkJsdXIoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLm9uRm9jdXMoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2Uub25Gb2N1cygpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKChmdW5jdGlvbigpe3JldHVybiB0LnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCl9KSkpLHRoaXMuX3NlbGVjdGlvblNlcnZpY2U9dGhpcy5yZWdpc3Rlcih0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShwLlNlbGVjdGlvblNlcnZpY2UsdGhpcy5lbGVtZW50LHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLmxpbmtpZmllcjIpKSx0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGsuSVNlbGVjdGlvblNlcnZpY2UsdGhpcy5fc2VsZWN0aW9uU2VydmljZSksdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uUmVxdWVzdFNjcm9sbExpbmVzKChmdW5jdGlvbihlKXtyZXR1cm4gdC5zY3JvbGxMaW5lcyhlLmFtb3VudCxlLnN1cHByZXNzU2Nyb2xsRXZlbnQpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX3NlbGVjdGlvblNlcnZpY2Uub25TZWxlY3Rpb25DaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uU2VsZWN0aW9uQ2hhbmdlLmZpcmUoKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uUmVxdWVzdFJlZHJhdygoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3JlbmRlclNlcnZpY2Uub25TZWxlY3Rpb25DaGFuZ2VkKGUuc3RhcnQsZS5lbmQsZS5jb2x1bW5TZWxlY3RNb2RlKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLm9uTGludXhNb3VzZVNlbGVjdGlvbigoZnVuY3Rpb24oZSl7dC50ZXh0YXJlYS52YWx1ZT1lLHQudGV4dGFyZWEuZm9jdXMoKSx0LnRleHRhcmVhLnNlbGVjdCgpfSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX29uU2Nyb2xsLmV2ZW50KChmdW5jdGlvbihlKXt0LnZpZXdwb3J0LnN5bmNTY3JvbGxBcmVhKCksdC5fc2VsZWN0aW9uU2VydmljZS5yZWZyZXNoKCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuX3ZpZXdwb3J0RWxlbWVudCwic2Nyb2xsIiwoZnVuY3Rpb24oKXtyZXR1cm4gdC5fc2VsZWN0aW9uU2VydmljZS5yZWZyZXNoKCl9KSkpLHRoaXMuX21vdXNlWm9uZU1hbmFnZXI9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoYi5Nb3VzZVpvbmVNYW5hZ2VyLHRoaXMuZWxlbWVudCx0aGlzLnNjcmVlbkVsZW1lbnQpLHRoaXMucmVnaXN0ZXIodGhpcy5fbW91c2Vab25lTWFuYWdlciksdGhpcy5yZWdpc3Rlcih0aGlzLm9uU2Nyb2xsKChmdW5jdGlvbigpe3JldHVybiB0Ll9tb3VzZVpvbmVNYW5hZ2VyLmNsZWFyQWxsKCl9KSkpLHRoaXMubGlua2lmaWVyLmF0dGFjaFRvRG9tKHRoaXMuZWxlbWVudCx0aGlzLl9tb3VzZVpvbmVNYW5hZ2VyKSx0aGlzLmxpbmtpZmllcjIuYXR0YWNoVG9Eb20odGhpcy5zY3JlZW5FbGVtZW50LHRoaXMuX21vdXNlU2VydmljZSx0aGlzLl9yZW5kZXJTZXJ2aWNlKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKEguQnVmZmVyRGVjb3JhdGlvblJlbmRlcmVyLHRoaXMuc2NyZWVuRWxlbWVudCkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHRoaXMuZWxlbWVudCwibW91c2Vkb3duIiwoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX3NlbGVjdGlvblNlcnZpY2Uub25Nb3VzZURvd24oZSl9KSkpLHRoaXMuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZT8odGhpcy5fc2VsZWN0aW9uU2VydmljZS5kaXNhYmxlKCksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImVuYWJsZS1tb3VzZS1ldmVudHMiKSk6dGhpcy5fc2VsZWN0aW9uU2VydmljZS5lbmFibGUoKSx0aGlzLm9wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSYmKHRoaXMuX2FjY2Vzc2liaWxpdHlNYW5hZ2VyPW5ldyBTLkFjY2Vzc2liaWxpdHlNYW5hZ2VyKHRoaXMsdGhpcy5fcmVuZGVyU2VydmljZSkpLHRoaXMub3B0aW9ucy5vdmVydmlld1J1bGVyV2lkdGgmJih0aGlzLl9vdmVydmlld1J1bGVyUmVuZGVyZXI9dGhpcy5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2Uoai5PdmVydmlld1J1bGVyUmVuZGVyZXIsdGhpcy5fdmlld3BvcnRFbGVtZW50LHRoaXMuc2NyZWVuRWxlbWVudCkpLHRoaXMub3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKCl7IXQuX292ZXJ2aWV3UnVsZXJSZW5kZXJlciYmdC5vcHRpb25zLm92ZXJ2aWV3UnVsZXJXaWR0aCYmdC5fdmlld3BvcnRFbGVtZW50JiZ0LnNjcmVlbkVsZW1lbnQmJih0Ll9vdmVydmlld1J1bGVyUmVuZGVyZXI9dC5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2Uoai5PdmVydmlld1J1bGVyUmVuZGVyZXIsdC5fdmlld3BvcnRFbGVtZW50LHQuc2NyZWVuRWxlbWVudCkpfSkpLHRoaXMuX2NoYXJTaXplU2VydmljZS5tZWFzdXJlKCksdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpLHRoaXMuX2luaXRHbG9iYWwoKSx0aGlzLmJpbmRNb3VzZSgpfSx0LnByb3RvdHlwZS5fY3JlYXRlUmVuZGVyZXI9ZnVuY3Rpb24oKXtzd2l0Y2godGhpcy5vcHRpb25zLnJlbmRlcmVyVHlwZSl7Y2FzZSJjYW52YXMiOnJldHVybiB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShfLlJlbmRlcmVyLHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMsdGhpcy5zY3JlZW5FbGVtZW50LHRoaXMubGlua2lmaWVyLHRoaXMubGlua2lmaWVyMik7Y2FzZSJkb20iOnJldHVybiB0aGlzLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZShDLkRvbVJlbmRlcmVyLHRoaXMuX2NvbG9yTWFuYWdlci5jb2xvcnMsdGhpcy5lbGVtZW50LHRoaXMuc2NyZWVuRWxlbWVudCx0aGlzLl92aWV3cG9ydEVsZW1lbnQsdGhpcy5saW5raWZpZXIsdGhpcy5saW5raWZpZXIyKTtkZWZhdWx0OnRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pemVkIHJlbmRlcmVyVHlwZSAiJyt0aGlzLm9wdGlvbnMucmVuZGVyZXJUeXBlKyciJyl9fSx0LnByb3RvdHlwZS5fc2V0VGhlbWU9ZnVuY3Rpb24oZSl7dmFyIHQscixpO3RoaXMuX3RoZW1lPWUsbnVsbD09PSh0PXRoaXMuX2NvbG9yTWFuYWdlcil8fHZvaWQgMD09PXR8fHQuc2V0VGhlbWUoZSksbnVsbD09PShyPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1yfHxyLnNldENvbG9ycyh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKSxudWxsPT09KGk9dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PWl8fGkub25UaGVtZUNoYW5nZSh0aGlzLl9jb2xvck1hbmFnZXIuY29sb3JzKX0sdC5wcm90b3R5cGUuYmluZE1vdXNlPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMscj10aGlzLmVsZW1lbnQ7ZnVuY3Rpb24gaShlKXt2YXIgcixpLG49dC5fbW91c2VTZXJ2aWNlLmdldFJhd0J5dGVDb29yZHMoZSx0LnNjcmVlbkVsZW1lbnQsdC5jb2xzLHQucm93cyk7aWYoIW4pcmV0dXJuITE7c3dpdGNoKGUub3ZlcnJpZGVUeXBlfHxlLnR5cGUpe2Nhc2UibW91c2Vtb3ZlIjppPTMyLHZvaWQgMD09PWUuYnV0dG9ucz8ocj0zLHZvaWQgMCE9PWUuYnV0dG9uJiYocj1lLmJ1dHRvbjwzP2UuYnV0dG9uOjMpKTpyPTEmZS5idXR0b25zPzA6NCZlLmJ1dHRvbnM/MToyJmUuYnV0dG9ucz8yOjM7YnJlYWs7Y2FzZSJtb3VzZXVwIjppPTAscj1lLmJ1dHRvbjwzP2UuYnV0dG9uOjM7YnJlYWs7Y2FzZSJtb3VzZWRvd24iOmk9MSxyPWUuYnV0dG9uPDM/ZS5idXR0b246MzticmVhaztjYXNlIndoZWVsIjppZigwPT09dC52aWV3cG9ydC5nZXRMaW5lc1Njcm9sbGVkKGUpKXJldHVybiExO2k9ZS5kZWx0YVk8MD8wOjEscj00O2JyZWFrO2RlZmF1bHQ6cmV0dXJuITF9cmV0dXJuISh2b2lkIDA9PT1pfHx2b2lkIDA9PT1yfHxyPjQpJiZ0LmNvcmVNb3VzZVNlcnZpY2UudHJpZ2dlck1vdXNlRXZlbnQoe2NvbDpuLngtMzMscm93Om4ueS0zMyxidXR0b246cixhY3Rpb246aSxjdHJsOmUuY3RybEtleSxhbHQ6ZS5hbHRLZXksc2hpZnQ6ZS5zaGlmdEtleX0pfXZhciBuPXttb3VzZXVwOm51bGwsd2hlZWw6bnVsbCxtb3VzZWRyYWc6bnVsbCxtb3VzZW1vdmU6bnVsbH0sbz1mdW5jdGlvbih0KXtyZXR1cm4gaSh0KSx0LmJ1dHRvbnN8fChlLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIixuLm1vdXNldXApLG4ubW91c2VkcmFnJiZlLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG4ubW91c2VkcmFnKSksZS5jYW5jZWwodCl9LHM9ZnVuY3Rpb24odCl7cmV0dXJuIGkodCksZS5jYW5jZWwodCwhMCl9LGE9ZnVuY3Rpb24oZSl7ZS5idXR0b25zJiZpKGUpfSxjPWZ1bmN0aW9uKGUpe2UuYnV0dG9uc3x8aShlKX07dGhpcy5yZWdpc3Rlcih0aGlzLmNvcmVNb3VzZVNlcnZpY2Uub25Qcm90b2NvbENoYW5nZSgoZnVuY3Rpb24odCl7dD8oImRlYnVnIj09PWUub3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5sb2dMZXZlbCYmZS5fbG9nU2VydmljZS5kZWJ1ZygiQmluZGluZyB0byBtb3VzZSBldmVudHM6IixlLmNvcmVNb3VzZVNlcnZpY2UuZXhwbGFpbkV2ZW50cyh0KSksZS5lbGVtZW50LmNsYXNzTGlzdC5hZGQoImVuYWJsZS1tb3VzZS1ldmVudHMiKSxlLl9zZWxlY3Rpb25TZXJ2aWNlLmRpc2FibGUoKSk6KGUuX2xvZ1NlcnZpY2UuZGVidWcoIlVuYmluZGluZyBmcm9tIG1vdXNlIGV2ZW50cy4iKSxlLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgiZW5hYmxlLW1vdXNlLWV2ZW50cyIpLGUuX3NlbGVjdGlvblNlcnZpY2UuZW5hYmxlKCkpLDgmdD9uLm1vdXNlbW92ZXx8KHIuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixjKSxuLm1vdXNlbW92ZT1jKTooci5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLG4ubW91c2Vtb3ZlKSxuLm1vdXNlbW92ZT1udWxsKSwxNiZ0P24ud2hlZWx8fChyLmFkZEV2ZW50TGlzdGVuZXIoIndoZWVsIixzLHtwYXNzaXZlOiExfSksbi53aGVlbD1zKTooci5yZW1vdmVFdmVudExpc3RlbmVyKCJ3aGVlbCIsbi53aGVlbCksbi53aGVlbD1udWxsKSwyJnQ/bi5tb3VzZXVwfHwobi5tb3VzZXVwPW8pOihlLl9kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXVwIixuLm1vdXNldXApLG4ubW91c2V1cD1udWxsKSw0JnQ/bi5tb3VzZWRyYWd8fChuLm1vdXNlZHJhZz1hKTooZS5fZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixuLm1vdXNlZHJhZyksbi5tb3VzZWRyYWc9bnVsbCl9KSkpLHRoaXMuY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD10aGlzLmNvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2wsdGhpcy5yZWdpc3RlcigoMCx5LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikociwibW91c2Vkb3duIiwoZnVuY3Rpb24odCl7aWYodC5wcmV2ZW50RGVmYXVsdCgpLGUuZm9jdXMoKSxlLmNvcmVNb3VzZVNlcnZpY2UuYXJlTW91c2VFdmVudHNBY3RpdmUmJiFlLl9zZWxlY3Rpb25TZXJ2aWNlLnNob3VsZEZvcmNlU2VsZWN0aW9uKHQpKXJldHVybiBpKHQpLG4ubW91c2V1cCYmZS5fZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsbi5tb3VzZXVwKSxuLm1vdXNlZHJhZyYmZS5fZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixuLm1vdXNlZHJhZyksZS5jYW5jZWwodCl9KSkpLHRoaXMucmVnaXN0ZXIoKDAseS5hZGREaXNwb3NhYmxlRG9tTGlzdGVuZXIpKHIsIndoZWVsIiwoZnVuY3Rpb24odCl7aWYoIW4ud2hlZWwpe2lmKCFlLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKXt2YXIgcj1lLnZpZXdwb3J0LmdldExpbmVzU2Nyb2xsZWQodCk7aWYoMD09PXIpcmV0dXJuO2Zvcih2YXIgaT11LkMwLkVTQysoZS5jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzPyJPIjoiWyIpKyh0LmRlbHRhWTwwPyJBIjoiQiIpLG89IiIscz0wO3M8TWF0aC5hYnMocik7cysrKW8rPWk7cmV0dXJuIGUuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChvLCEwKSxlLmNhbmNlbCh0LCEwKX1yZXR1cm4gZS52aWV3cG9ydC5vbldoZWVsKHQpP2UuY2FuY2VsKHQpOnZvaWQgMH19KSx7cGFzc2l2ZTohMX0pKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShyLCJ0b3VjaHN0YXJ0IiwoZnVuY3Rpb24odCl7aWYoIWUuY29yZU1vdXNlU2VydmljZS5hcmVNb3VzZUV2ZW50c0FjdGl2ZSlyZXR1cm4gZS52aWV3cG9ydC5vblRvdWNoU3RhcnQodCksZS5jYW5jZWwodCl9KSx7cGFzc2l2ZTohMH0pKSx0aGlzLnJlZ2lzdGVyKCgwLHkuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKShyLCJ0b3VjaG1vdmUiLChmdW5jdGlvbih0KXtpZighZS5jb3JlTW91c2VTZXJ2aWNlLmFyZU1vdXNlRXZlbnRzQWN0aXZlKXJldHVybiBlLnZpZXdwb3J0Lm9uVG91Y2hNb3ZlKHQpP3ZvaWQgMDplLmNhbmNlbCh0KX0pLHtwYXNzaXZlOiExfSkpfSx0LnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUsdCl7dmFyIHI7bnVsbD09PShyPXRoaXMuX3JlbmRlclNlcnZpY2UpfHx2b2lkIDA9PT1yfHxyLnJlZnJlc2hSb3dzKGUsdCl9LHQucHJvdG90eXBlLl9xdWV1ZUxpbmtpZmljYXRpb249ZnVuY3Rpb24oZSx0KXt2YXIgcjtudWxsPT09KHI9dGhpcy5saW5raWZpZXIpfHx2b2lkIDA9PT1yfHxyLmxpbmtpZnlSb3dzKGUsdCl9LHQucHJvdG90eXBlLnVwZGF0ZUN1cnNvclN0eWxlPWZ1bmN0aW9uKGUpe3ZhciB0OyhudWxsPT09KHQ9dGhpcy5fc2VsZWN0aW9uU2VydmljZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc2hvdWxkQ29sdW1uU2VsZWN0KGUpKT90aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZCgiY29sdW1uLXNlbGVjdCIpOnRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCJjb2x1bW4tc2VsZWN0Iil9LHQucHJvdG90eXBlLl9zaG93Q3Vyc29yPWZ1bmN0aW9uKCl7dGhpcy5jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkfHwodGhpcy5jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkPSEwLHRoaXMucmVmcmVzaCh0aGlzLmJ1ZmZlci55LHRoaXMuYnVmZmVyLnkpKX0sdC5wcm90b3R5cGUuc2Nyb2xsTGluZXM9ZnVuY3Rpb24odCxyLGkpe3ZvaWQgMD09PWkmJihpPTApLGUucHJvdG90eXBlLnNjcm9sbExpbmVzLmNhbGwodGhpcyx0LHIsaSksdGhpcy5yZWZyZXNoKDAsdGhpcy5yb3dzLTEpfSx0LnByb3RvdHlwZS5wYXN0ZT1mdW5jdGlvbihlKXsoMCxoLnBhc3RlKShlLHRoaXMudGV4dGFyZWEsdGhpcy5jb3JlU2VydmljZSl9LHQucHJvdG90eXBlLmF0dGFjaEN1c3RvbUtleUV2ZW50SGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXI9ZX0sdC5wcm90b3R5cGUucmVnaXN0ZXJMaW5rTWF0Y2hlcj1mdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcy5saW5raWZpZXIucmVnaXN0ZXJMaW5rTWF0Y2hlcihlLHQscik7cmV0dXJuIHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSxpfSx0LnByb3RvdHlwZS5kZXJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSl7dGhpcy5saW5raWZpZXIuZGVyZWdpc3RlckxpbmtNYXRjaGVyKGUpJiZ0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmxpbmtpZmllcjIucmVnaXN0ZXJMaW5rUHJvdmlkZXIoZSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyQ2hhcmFjdGVySm9pbmVyPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKXRocm93IG5ldyBFcnJvcigiVGVybWluYWwgbXVzdCBiZSBvcGVuZWQgZmlyc3QiKTt2YXIgdD10aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlLnJlZ2lzdGVyKGUpO3JldHVybiB0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSksdH0sdC5wcm90b3R5cGUuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcj1mdW5jdGlvbihlKXtpZighdGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZSl0aHJvdyBuZXcgRXJyb3IoIlRlcm1pbmFsIG11c3QgYmUgb3BlbmVkIGZpcnN0Iik7dGhpcy5fY2hhcmFjdGVySm9pbmVyU2VydmljZS5kZXJlZ2lzdGVyKGUpJiZ0aGlzLnJlZnJlc2goMCx0aGlzLnJvd3MtMSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwibWFya2VycyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5tYXJrZXJzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmFkZE1hcmtlcj1mdW5jdGlvbihlKXtpZih0aGlzLmJ1ZmZlcj09PXRoaXMuYnVmZmVycy5ub3JtYWwpcmV0dXJuIHRoaXMuYnVmZmVyLmFkZE1hcmtlcih0aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55K2UpfSx0LnByb3RvdHlwZS5yZWdpc3RlckRlY29yYXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLnJlZ2lzdGVyRGVjb3JhdGlvbihlKX0sdC5wcm90b3R5cGUuaGFzU2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlJiZ0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbn0sdC5wcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNldFNlbGVjdGlvbihlLHQscil9LHQucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlP3RoaXMuX3NlbGVjdGlvblNlcnZpY2Uuc2VsZWN0aW9uVGV4dDoiIn0sdC5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uUG9zaXRpb249ZnVuY3Rpb24oKXtpZih0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlJiZ0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLmhhc1NlbGVjdGlvbilyZXR1cm57c3RhcnRDb2x1bW46dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25TdGFydFswXSxzdGFydFJvdzp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvblN0YXJ0WzFdLGVuZENvbHVtbjp0aGlzLl9zZWxlY3Rpb25TZXJ2aWNlLnNlbGVjdGlvbkVuZFswXSxlbmRSb3c6dGhpcy5fc2VsZWN0aW9uU2VydmljZS5zZWxlY3Rpb25FbmRbMV19fSx0LnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9zZWxlY3Rpb25TZXJ2aWNlKXx8dm9pZCAwPT09ZXx8ZS5jbGVhclNlbGVjdGlvbigpfSx0LnByb3RvdHlwZS5zZWxlY3RBbGw9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fc2VsZWN0aW9uU2VydmljZSl8fHZvaWQgMD09PWV8fGUuc2VsZWN0QWxsKCl9LHQucHJvdG90eXBlLnNlbGVjdExpbmVzPWZ1bmN0aW9uKGUsdCl7dmFyIHI7bnVsbD09PShyPXRoaXMuX3NlbGVjdGlvblNlcnZpY2UpfHx2b2lkIDA9PT1yfHxyLnNlbGVjdExpbmVzKGUsdCl9LHQucHJvdG90eXBlLl9rZXlEb3duPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2tleURvd25IYW5kbGVkPSExLHRoaXMuX2tleURvd25TZWVuPSEwLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlciYmITE9PT10aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXIoZSkpcmV0dXJuITE7dmFyIHQ9dGhpcy5icm93c2VyLmlzTWFjJiZ0aGlzLm9wdGlvbnMubWFjT3B0aW9uSXNNZXRhJiZlLmFsdEtleTtpZighdCYmIXRoaXMuX2NvbXBvc2l0aW9uSGVscGVyLmtleWRvd24oZSkpcmV0dXJuIHRoaXMuYnVmZmVyLnliYXNlIT09dGhpcy5idWZmZXIueWRpc3AmJnRoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsVG9Cb3R0b20oKSwhMTt0fHwiRGVhZCIhPT1lLmtleSYmIkFsdEdyYXBoIiE9PWUua2V5fHwodGhpcy5fdW5wcm9jZXNzZWREZWFkS2V5PSEwKTt2YXIgcj0oMCx3LmV2YWx1YXRlS2V5Ym9hcmRFdmVudCkoZSx0aGlzLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXMsdGhpcy5icm93c2VyLmlzTWFjLHRoaXMub3B0aW9ucy5tYWNPcHRpb25Jc01ldGEpO2lmKHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZSksMz09PXIudHlwZXx8Mj09PXIudHlwZSl7dmFyIGk9dGhpcy5yb3dzLTE7cmV0dXJuIHRoaXMuc2Nyb2xsTGluZXMoMj09PXIudHlwZT8taTppKSx0aGlzLmNhbmNlbChlLCEwKX1yZXR1cm4gMT09PXIudHlwZSYmdGhpcy5zZWxlY3RBbGwoKSwhIXRoaXMuX2lzVGhpcmRMZXZlbFNoaWZ0KHRoaXMuYnJvd3NlcixlKXx8KHIuY2FuY2VsJiZ0aGlzLmNhbmNlbChlLCEwKSwhci5rZXl8fCEhKGUua2V5JiYhZS5jdHJsS2V5JiYhZS5hbHRLZXkmJiFlLm1ldGFLZXkmJjE9PT1lLmtleS5sZW5ndGgmJmUua2V5LmNoYXJDb2RlQXQoMCk+PTY1JiZlLmtleS5jaGFyQ29kZUF0KDApPD05MCl8fCh0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk/KHRoaXMuX3VucHJvY2Vzc2VkRGVhZEtleT0hMSwhMCk6KHIua2V5IT09dS5DMC5FVFgmJnIua2V5IT09dS5DMC5DUnx8KHRoaXMudGV4dGFyZWEudmFsdWU9IiIpLHRoaXMuX29uS2V5LmZpcmUoe2tleTpyLmtleSxkb21FdmVudDplfSksdGhpcy5fc2hvd0N1cnNvcigpLHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChyLmtleSwhMCksdGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcmVlblJlYWRlck1vZGU/dm9pZCh0aGlzLl9rZXlEb3duSGFuZGxlZD0hMCk6dGhpcy5jYW5jZWwoZSwhMCkpKSl9LHQucHJvdG90eXBlLl9pc1RoaXJkTGV2ZWxTaGlmdD1mdW5jdGlvbihlLHQpe3ZhciByPWUuaXNNYWMmJiF0aGlzLm9wdGlvbnMubWFjT3B0aW9uSXNNZXRhJiZ0LmFsdEtleSYmIXQuY3RybEtleSYmIXQubWV0YUtleXx8ZS5pc1dpbmRvd3MmJnQuYWx0S2V5JiZ0LmN0cmxLZXkmJiF0Lm1ldGFLZXl8fGUuaXNXaW5kb3dzJiZ0LmdldE1vZGlmaWVyU3RhdGUoIkFsdEdyYXBoIik7cmV0dXJuImtleXByZXNzIj09PXQudHlwZT9yOnImJighdC5rZXlDb2RlfHx0LmtleUNvZGU+NDcpfSx0LnByb3RvdHlwZS5fa2V5VXA9ZnVuY3Rpb24oZSl7dGhpcy5fa2V5RG93blNlZW49ITEsdGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyJiYhMT09PXRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcihlKXx8KGZ1bmN0aW9uKGUpe3JldHVybiAxNj09PWUua2V5Q29kZXx8MTc9PT1lLmtleUNvZGV8fDE4PT09ZS5rZXlDb2RlfShlKXx8dGhpcy5mb2N1cygpLHRoaXMudXBkYXRlQ3Vyc29yU3R5bGUoZSksdGhpcy5fa2V5UHJlc3NIYW5kbGVkPSExKX0sdC5wcm90b3R5cGUuX2tleVByZXNzPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKHRoaXMuX2tleVByZXNzSGFuZGxlZD0hMSx0aGlzLl9rZXlEb3duSGFuZGxlZClyZXR1cm4hMTtpZih0aGlzLl9jdXN0b21LZXlFdmVudEhhbmRsZXImJiExPT09dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyKGUpKXJldHVybiExO2lmKHRoaXMuY2FuY2VsKGUpLGUuY2hhckNvZGUpdD1lLmNoYXJDb2RlO2Vsc2UgaWYobnVsbD09PWUud2hpY2h8fHZvaWQgMD09PWUud2hpY2gpdD1lLmtleUNvZGU7ZWxzZXtpZigwPT09ZS53aGljaHx8MD09PWUuY2hhckNvZGUpcmV0dXJuITE7dD1lLndoaWNofXJldHVybiEoIXR8fChlLmFsdEtleXx8ZS5jdHJsS2V5fHxlLm1ldGFLZXkpJiYhdGhpcy5faXNUaGlyZExldmVsU2hpZnQodGhpcy5icm93c2VyLGUpfHwodD1TdHJpbmcuZnJvbUNoYXJDb2RlKHQpLHRoaXMuX29uS2V5LmZpcmUoe2tleTp0LGRvbUV2ZW50OmV9KSx0aGlzLl9zaG93Q3Vyc29yKCksdGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHQsITApLHRoaXMuX2tleVByZXNzSGFuZGxlZD0hMCx0aGlzLl91bnByb2Nlc3NlZERlYWRLZXk9ITEsMCkpfSx0LnByb3RvdHlwZS5faW5wdXRFdmVudD1mdW5jdGlvbihlKXtpZihlLmRhdGEmJiJpbnNlcnRUZXh0Ij09PWUuaW5wdXRUeXBlJiYoIWUuY29tcG9zZWR8fCF0aGlzLl9rZXlEb3duU2VlbikmJiF0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSl7aWYodGhpcy5fa2V5UHJlc3NIYW5kbGVkKXJldHVybiExO3RoaXMuX3VucHJvY2Vzc2VkRGVhZEtleT0hMTt2YXIgdD1lLmRhdGE7cmV0dXJuIHRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh0LCEwKSx0aGlzLmNhbmNlbChlKSwhMH1yZXR1cm4hMX0sdC5wcm90b3R5cGUuYmVsbD1mdW5jdGlvbigpe3ZhciBlO3RoaXMuX3NvdW5kQmVsbCgpJiYobnVsbD09PShlPXRoaXMuX3NvdW5kU2VydmljZSl8fHZvaWQgMD09PWV8fGUucGxheUJlbGxTb3VuZCgpKSx0aGlzLl9vbkJlbGwuZmlyZSgpfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCxyKXt0IT09dGhpcy5jb2xzfHxyIT09dGhpcy5yb3dzP2UucHJvdG90eXBlLnJlc2l6ZS5jYWxsKHRoaXMsdCxyKTp0aGlzLl9jaGFyU2l6ZVNlcnZpY2UmJiF0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplJiZ0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpfSx0LnByb3RvdHlwZS5fYWZ0ZXJSZXNpemU9ZnVuY3Rpb24oZSx0KXt2YXIgcixpO251bGw9PT0ocj10aGlzLl9jaGFyU2l6ZVNlcnZpY2UpfHx2b2lkIDA9PT1yfHxyLm1lYXN1cmUoKSxudWxsPT09KGk9dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PWl8fGkuc3luY1Njcm9sbEFyZWEoITApfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2lmKDAhPT10aGlzLmJ1ZmZlci55YmFzZXx8MCE9PXRoaXMuYnVmZmVyLnkpe3RoaXMuYnVmZmVyLmNsZWFyQWxsTWFya2VycygpLHRoaXMuYnVmZmVyLmxpbmVzLnNldCgwLHRoaXMuYnVmZmVyLmxpbmVzLmdldCh0aGlzLmJ1ZmZlci55YmFzZSt0aGlzLmJ1ZmZlci55KSksdGhpcy5idWZmZXIubGluZXMubGVuZ3RoPTEsdGhpcy5idWZmZXIueWRpc3A9MCx0aGlzLmJ1ZmZlci55YmFzZT0wLHRoaXMuYnVmZmVyLnk9MDtmb3IodmFyIGU9MTtlPHRoaXMucm93cztlKyspdGhpcy5idWZmZXIubGluZXMucHVzaCh0aGlzLmJ1ZmZlci5nZXRCbGFua0xpbmUoRS5ERUZBVUxUX0FUVFJfREFUQSkpO3RoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSx0aGlzLl9vblNjcm9sbC5maXJlKHtwb3NpdGlvbjp0aGlzLmJ1ZmZlci55ZGlzcCxzb3VyY2U6MH0pfX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt2YXIgdCxyO3RoaXMub3B0aW9ucy5yb3dzPXRoaXMucm93cyx0aGlzLm9wdGlvbnMuY29scz10aGlzLmNvbHM7dmFyIGk9dGhpcy5fY3VzdG9tS2V5RXZlbnRIYW5kbGVyO3RoaXMuX3NldHVwKCksZS5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzKSxudWxsPT09KHQ9dGhpcy5fc2VsZWN0aW9uU2VydmljZSl8fHZvaWQgMD09PXR8fHQucmVzZXQoKSx0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5yZXNldCgpLHRoaXMuX2N1c3RvbUtleUV2ZW50SGFuZGxlcj1pLHRoaXMucmVmcmVzaCgwLHRoaXMucm93cy0xKSxudWxsPT09KHI9dGhpcy52aWV3cG9ydCl8fHZvaWQgMD09PXJ8fHIuc3luY1Njcm9sbEFyZWEoKX0sdC5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fcmVuZGVyU2VydmljZSl8fHZvaWQgMD09PWV8fGUuY2xlYXJUZXh0dXJlQXRsYXMoKX0sdC5wcm90b3R5cGUuX3JlcG9ydEZvY3VzPWZ1bmN0aW9uKCl7dmFyIGU7KG51bGw9PT0oZT10aGlzLmVsZW1lbnQpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNsYXNzTGlzdC5jb250YWlucygiZm9jdXMiKSk/dGhpcy5jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHUuQzAuRVNDKyJbSSIpOnRoaXMuY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudCh1LkMwLkVTQysiW08iKX0sdC5wcm90b3R5cGUuX3JlcG9ydFdpbmRvd3NPcHRpb25zPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX3JlbmRlclNlcnZpY2Upc3dpdGNoKGUpe2Nhc2UgZi5XaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX1dJTl9TSVpFX1BJWEVMUzp2YXIgdD10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGgudG9GaXhlZCgwKSxyPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQudG9GaXhlZCgwKTt0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIls0OyIrcisiOyIrdCsidCIpO2JyZWFrO2Nhc2UgZi5XaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGUuR0VUX0NFTExfU0laRV9QSVhFTFM6dmFyIGk9dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxXaWR0aC50b0ZpeGVkKDApLG49dGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQudG9GaXhlZCgwKTt0aGlzLmNvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQodS5DMC5FU0MrIls2OyIrbisiOyIraSsidCIpfX0sdC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5vcHRpb25zLmNhbmNlbEV2ZW50c3x8dClyZXR1cm4gZS5wcmV2ZW50RGVmYXVsdCgpLGUuc3RvcFByb3BhZ2F0aW9uKCksITF9LHQucHJvdG90eXBlLl92aXN1YWxCZWxsPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHQucHJvdG90eXBlLl9zb3VuZEJlbGw9ZnVuY3Rpb24oKXtyZXR1cm4ic291bmQiPT09dGhpcy5vcHRpb25zLmJlbGxTdHlsZX0sdH0oVC5Db3JlVGVybWluYWwpO3QuVGVybWluYWw9cX0sOTkyNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlRpbWVCYXNlZERlYm91bmNlcj12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dm9pZCAwPT09dCYmKHQ9MWUzKSx0aGlzLl9yZW5kZXJDYWxsYmFjaz1lLHRoaXMuX2RlYm91bmNlVGhyZXNob2xkTVM9dCx0aGlzLl9sYXN0UmVmcmVzaE1zPTAsdGhpcy5fYWRkaXRpb25hbFJlZnJlc2hSZXF1ZXN0ZWQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9yZWZyZXNoVGltZW91dElEJiZjbGVhclRpbWVvdXQodGhpcy5fcmVmcmVzaFRpbWVvdXRJRCl9LGUucHJvdG90eXBlLnJlZnJlc2g9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXM7dGhpcy5fcm93Q291bnQ9cixlPXZvaWQgMCE9PWU/ZTowLHQ9dm9pZCAwIT09dD90OnRoaXMuX3Jvd0NvdW50LTEsdGhpcy5fcm93U3RhcnQ9dm9pZCAwIT09dGhpcy5fcm93U3RhcnQ/TWF0aC5taW4odGhpcy5fcm93U3RhcnQsZSk6ZSx0aGlzLl9yb3dFbmQ9dm9pZCAwIT09dGhpcy5fcm93RW5kP01hdGgubWF4KHRoaXMuX3Jvd0VuZCx0KTp0O3ZhciBuPURhdGUubm93KCk7aWYobi10aGlzLl9sYXN0UmVmcmVzaE1zPj10aGlzLl9kZWJvdW5jZVRocmVzaG9sZE1TKXRoaXMuX2xhc3RSZWZyZXNoTXM9bix0aGlzLl9pbm5lclJlZnJlc2goKTtlbHNlIGlmKCF0aGlzLl9hZGRpdGlvbmFsUmVmcmVzaFJlcXVlc3RlZCl7dmFyIG89bi10aGlzLl9sYXN0UmVmcmVzaE1zLHM9dGhpcy5fZGVib3VuY2VUaHJlc2hvbGRNUy1vO3RoaXMuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkPSEwLHRoaXMuX3JlZnJlc2hUaW1lb3V0SUQ9d2luZG93LnNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7aS5fbGFzdFJlZnJlc2hNcz1EYXRlLm5vdygpLGkuX2lubmVyUmVmcmVzaCgpLGkuX2FkZGl0aW9uYWxSZWZyZXNoUmVxdWVzdGVkPSExLGkuX3JlZnJlc2hUaW1lb3V0SUQ9dm9pZCAwfSkscyl9fSxlLnByb3RvdHlwZS5faW5uZXJSZWZyZXNoPWZ1bmN0aW9uKCl7aWYodm9pZCAwIT09dGhpcy5fcm93U3RhcnQmJnZvaWQgMCE9PXRoaXMuX3Jvd0VuZCYmdm9pZCAwIT09dGhpcy5fcm93Q291bnQpe3ZhciBlPU1hdGgubWF4KHRoaXMuX3Jvd1N0YXJ0LDApLHQ9TWF0aC5taW4odGhpcy5fcm93RW5kLHRoaXMuX3Jvd0NvdW50LTEpO3RoaXMuX3Jvd1N0YXJ0PXZvaWQgMCx0aGlzLl9yb3dFbmQ9dm9pZCAwLHRoaXMuX3JlbmRlckNhbGxiYWNrKGUsdCl9fSxlfSgpO3QuVGltZUJhc2VkRGVib3VuY2VyPXJ9LDE2ODA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVmlld3BvcnQ9dm9pZCAwO3ZhciBhPXIoODQ0KSxjPXIoMzY1NiksbD1yKDQ3MjUpLGg9cigyNTg1KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxsKXt2YXIgaD1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGguX3Njcm9sbExpbmVzPXQsaC5fdmlld3BvcnRFbGVtZW50PXIsaC5fc2Nyb2xsQXJlYT1pLGguX2VsZW1lbnQ9bixoLl9idWZmZXJTZXJ2aWNlPW8saC5fb3B0aW9uc1NlcnZpY2U9cyxoLl9jaGFyU2l6ZVNlcnZpY2U9YSxoLl9yZW5kZXJTZXJ2aWNlPWwsaC5zY3JvbGxCYXJXaWR0aD0wLGguX2N1cnJlbnRSb3dIZWlnaHQ9MCxoLl9jdXJyZW50U2NhbGVkQ2VsbEhlaWdodD0wLGguX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aD0wLGguX2xhc3RSZWNvcmRlZFZpZXdwb3J0SGVpZ2h0PTAsaC5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0PTAsaC5fbGFzdFRvdWNoWT0wLGguX2xhc3RTY3JvbGxUb3A9MCxoLl93aGVlbFBhcnRpYWxTY3JvbGw9MCxoLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9bnVsbCxoLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ9ITEsaC5zY3JvbGxCYXJXaWR0aD1oLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0V2lkdGgtaC5fc2Nyb2xsQXJlYS5vZmZzZXRXaWR0aHx8MTUsaC5yZWdpc3RlcigoMCxjLmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikoaC5fdmlld3BvcnRFbGVtZW50LCJzY3JvbGwiLGguX29uU2Nyb2xsLmJpbmQoaCkpKSxoLl9hY3RpdmVCdWZmZXI9aC5fYnVmZmVyU2VydmljZS5idWZmZXIsaC5yZWdpc3RlcihoLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX2FjdGl2ZUJ1ZmZlcj1lLmFjdGl2ZUJ1ZmZlcn0pKSksaC5fcmVuZGVyRGltZW5zaW9ucz1oLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMsaC5yZWdpc3RlcihoLl9yZW5kZXJTZXJ2aWNlLm9uRGltZW5zaW9uc0NoYW5nZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX3JlbmRlckRpbWVuc2lvbnM9ZX0pKSksc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gaC5zeW5jU2Nyb2xsQXJlYSgpfSksMCksaH1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLm9uVGhlbWVDaGFuZ2U9ZnVuY3Rpb24oZSl7dGhpcy5fdmlld3BvcnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvcj1lLmJhY2tncm91bmQuY3NzfSx0LnByb3RvdHlwZS5fcmVmcmVzaD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKGUpcmV0dXJuIHRoaXMuX2lubmVyUmVmcmVzaCgpLHZvaWQobnVsbCE9PXRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSYmY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lKSk7bnVsbD09PXRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZSYmKHRoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZT1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX2lubmVyUmVmcmVzaCgpfSkpKX0sdC5wcm90b3R5cGUuX2lubmVyUmVmcmVzaD1mdW5jdGlvbigpe2lmKHRoaXMuX2NoYXJTaXplU2VydmljZS5oZWlnaHQ+MCl7dGhpcy5fY3VycmVudFJvd0hlaWdodD10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0aGlzLl9jdXJyZW50U2NhbGVkQ2VsbEhlaWdodD10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCx0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodD10aGlzLl92aWV3cG9ydEVsZW1lbnQub2Zmc2V0SGVpZ2h0O3ZhciBlPU1hdGgucm91bmQodGhpcy5fY3VycmVudFJvd0hlaWdodCp0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJMZW5ndGgpKyh0aGlzLl9sYXN0UmVjb3JkZWRWaWV3cG9ydEhlaWdodC10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0KTt0aGlzLl9sYXN0UmVjb3JkZWRCdWZmZXJIZWlnaHQhPT1lJiYodGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0PWUsdGhpcy5fc2Nyb2xsQXJlYS5zdHlsZS5oZWlnaHQ9dGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0KyJweCIpfXZhciB0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKnRoaXMuX2N1cnJlbnRSb3dIZWlnaHQ7dGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcCE9PXQmJih0aGlzLl9pZ25vcmVOZXh0U2Nyb2xsRXZlbnQ9ITAsdGhpcy5fdmlld3BvcnRFbGVtZW50LnNjcm9sbFRvcD10KSx0aGlzLl9yZWZyZXNoQW5pbWF0aW9uRnJhbWU9bnVsbH0sdC5wcm90b3R5cGUuc3luY1Njcm9sbEFyZWE9ZnVuY3Rpb24oZSl7aWYodm9pZCAwPT09ZSYmKGU9ITEpLHRoaXMuX2xhc3RSZWNvcmRlZEJ1ZmZlckxlbmd0aCE9PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aClyZXR1cm4gdGhpcy5fbGFzdFJlY29yZGVkQnVmZmVyTGVuZ3RoPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aCx2b2lkIHRoaXMuX3JlZnJlc2goZSk7dGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ9PT10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0JiZ0aGlzLl9sYXN0U2Nyb2xsVG9wPT09dGhpcy5fYWN0aXZlQnVmZmVyLnlkaXNwKnRoaXMuX2N1cnJlbnRSb3dIZWlnaHQmJnRoaXMuX3JlbmRlckRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodD09PXRoaXMuX2N1cnJlbnRTY2FsZWRDZWxsSGVpZ2h0fHx0aGlzLl9yZWZyZXNoKGUpfSx0LnByb3RvdHlwZS5fb25TY3JvbGw9ZnVuY3Rpb24oZSl7aWYodGhpcy5fbGFzdFNjcm9sbFRvcD10aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wLHRoaXMuX3ZpZXdwb3J0RWxlbWVudC5vZmZzZXRQYXJlbnQpe2lmKHRoaXMuX2lnbm9yZU5leHRTY3JvbGxFdmVudClyZXR1cm4gdGhpcy5faWdub3JlTmV4dFNjcm9sbEV2ZW50PSExLHZvaWQgdGhpcy5fc2Nyb2xsTGluZXMoMCk7dmFyIHQ9TWF0aC5yb3VuZCh0aGlzLl9sYXN0U2Nyb2xsVG9wL3RoaXMuX2N1cnJlbnRSb3dIZWlnaHQpLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO3RoaXMuX3Njcm9sbExpbmVzKHQpfX0sdC5wcm90b3R5cGUuX2J1YmJsZVNjcm9sbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zY3JvbGxUb3ArdGhpcy5fbGFzdFJlY29yZGVkVmlld3BvcnRIZWlnaHQ7cmV0dXJuISh0PDAmJjAhPT10aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wfHx0PjAmJnI8dGhpcy5fbGFzdFJlY29yZGVkQnVmZmVySGVpZ2h0KXx8KGUuY2FuY2VsYWJsZSYmZS5wcmV2ZW50RGVmYXVsdCgpLCExKX0sdC5wcm90b3R5cGUub25XaGVlbD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRQaXhlbHNTY3JvbGxlZChlKTtyZXR1cm4gMCE9PXQmJih0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wKz10LHRoaXMuX2J1YmJsZVNjcm9sbChlLHQpKX0sdC5wcm90b3R5cGUuX2dldFBpeGVsc1Njcm9sbGVkPWZ1bmN0aW9uKGUpe2lmKDA9PT1lLmRlbHRhWXx8ZS5zaGlmdEtleSlyZXR1cm4gMDt2YXIgdD10aGlzLl9hcHBseVNjcm9sbE1vZGlmaWVyKGUuZGVsdGFZLGUpO3JldHVybiBlLmRlbHRhTW9kZT09PVdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkU/dCo9dGhpcy5fY3VycmVudFJvd0hlaWdodDplLmRlbHRhTW9kZT09PVdoZWVsRXZlbnQuRE9NX0RFTFRBX1BBR0UmJih0Kj10aGlzLl9jdXJyZW50Um93SGVpZ2h0KnRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdH0sdC5wcm90b3R5cGUuZ2V0TGluZXNTY3JvbGxlZD1mdW5jdGlvbihlKXtpZigwPT09ZS5kZWx0YVl8fGUuc2hpZnRLZXkpcmV0dXJuIDA7dmFyIHQ9dGhpcy5fYXBwbHlTY3JvbGxNb2RpZmllcihlLmRlbHRhWSxlKTtyZXR1cm4gZS5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTD8odC89dGhpcy5fY3VycmVudFJvd0hlaWdodCswLHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCs9dCx0PU1hdGguZmxvb3IoTWF0aC5hYnModGhpcy5fd2hlZWxQYXJ0aWFsU2Nyb2xsKSkqKHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbD4wPzE6LTEpLHRoaXMuX3doZWVsUGFydGlhbFNjcm9sbCU9MSk6ZS5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9QQUdFJiYodCo9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSx0fSx0LnByb3RvdHlwZS5fYXBwbHlTY3JvbGxNb2RpZmllcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZmFzdFNjcm9sbE1vZGlmaWVyO3JldHVybiJhbHQiPT09ciYmdC5hbHRLZXl8fCJjdHJsIj09PXImJnQuY3RybEtleXx8InNoaWZ0Ij09PXImJnQuc2hpZnRLZXk/ZSp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZhc3RTY3JvbGxTZW5zaXRpdml0eSp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnNjcm9sbFNlbnNpdGl2aXR5OmUqdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5zY3JvbGxTZW5zaXRpdml0eX0sdC5wcm90b3R5cGUub25Ub3VjaFN0YXJ0PWZ1bmN0aW9uKGUpe3RoaXMuX2xhc3RUb3VjaFk9ZS50b3VjaGVzWzBdLnBhZ2VZfSx0LnByb3RvdHlwZS5vblRvdWNoTW92ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9sYXN0VG91Y2hZLWUudG91Y2hlc1swXS5wYWdlWTtyZXR1cm4gdGhpcy5fbGFzdFRvdWNoWT1lLnRvdWNoZXNbMF0ucGFnZVksMCE9PXQmJih0aGlzLl92aWV3cG9ydEVsZW1lbnQuc2Nyb2xsVG9wKz10LHRoaXMuX2J1YmJsZVNjcm9sbChlLHQpKX0sbyhbcyg0LGguSUJ1ZmZlclNlcnZpY2UpLHMoNSxoLklPcHRpb25zU2VydmljZSkscyg2LGwuSUNoYXJTaXplU2VydmljZSkscyg3LGwuSVJlbmRlclNlcnZpY2UpXSx0KX0oYS5EaXNwb3NhYmxlKTt0LlZpZXdwb3J0PXV9LDMxMDc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyRGVjb3JhdGlvblJlbmRlcmVyPXZvaWQgMDt2YXIgYz1yKDM2NTYpLGw9cig0NzI1KSxoPXIoODQ0KSx1PXIoMjU4NSksZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4pe3ZhciBvPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5fc2NyZWVuRWxlbWVudD10LG8uX2J1ZmZlclNlcnZpY2U9cixvLl9kZWNvcmF0aW9uU2VydmljZT1pLG8uX3JlbmRlclNlcnZpY2U9bixvLl9kZWNvcmF0aW9uRWxlbWVudHM9bmV3IE1hcCxvLl9hbHRCdWZmZXJJc0FjdGl2ZT0hMSxvLl9kaW1lbnNpb25zQ2hhbmdlZD0hMSxvLl9jb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iiksby5fY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWRlY29yYXRpb24tY29udGFpbmVyIiksby5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZChvLl9jb250YWluZXIpLG8ucmVnaXN0ZXIoby5fcmVuZGVyU2VydmljZS5vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UoKGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3F1ZXVlUmVmcmVzaCgpfSkpKSxvLnJlZ2lzdGVyKG8uX3JlbmRlclNlcnZpY2Uub25EaW1lbnNpb25zQ2hhbmdlKChmdW5jdGlvbigpe28uX2RpbWVuc2lvbnNDaGFuZ2VkPSEwLG8uX3F1ZXVlUmVmcmVzaCgpfSkpKSxvLnJlZ2lzdGVyKCgwLGMuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh3aW5kb3csInJlc2l6ZSIsKGZ1bmN0aW9uKCl7cmV0dXJuIG8uX3F1ZXVlUmVmcmVzaCgpfSkpKSxvLnJlZ2lzdGVyKG8uX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbigpe28uX2FsdEJ1ZmZlcklzQWN0aXZlPW8uX2J1ZmZlclNlcnZpY2UuYnVmZmVyPT09by5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFsdH0pKSksby5yZWdpc3RlcihvLl9kZWNvcmF0aW9uU2VydmljZS5vbkRlY29yYXRpb25SZWdpc3RlcmVkKChmdW5jdGlvbigpe3JldHVybiBvLl9xdWV1ZVJlZnJlc2goKX0pKSksby5yZWdpc3RlcihvLl9kZWNvcmF0aW9uU2VydmljZS5vbkRlY29yYXRpb25SZW1vdmVkKChmdW5jdGlvbihlKXtyZXR1cm4gby5fcmVtb3ZlRGVjb3JhdGlvbihlKX0pKSksb31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jb250YWluZXIucmVtb3ZlKCksdGhpcy5fZGVjb3JhdGlvbkVsZW1lbnRzLmNsZWFyKCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5fcXVldWVSZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt2b2lkIDA9PT10aGlzLl9hbmltYXRpb25GcmFtZSYmKHRoaXMuX2FuaW1hdGlvbkZyYW1lPXRoaXMuX3JlbmRlclNlcnZpY2UuYWRkUmVmcmVzaENhbGxiYWNrKChmdW5jdGlvbigpe2UucmVmcmVzaERlY29yYXRpb25zKCksZS5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwfSkpKX0sdC5wcm90b3R5cGUucmVmcmVzaERlY29yYXRpb25zPWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPWEodGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZGVjb3JhdGlvbnMpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKXt2YXIgbj1pLnZhbHVlO3RoaXMuX3JlbmRlckRlY29yYXRpb24obil9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLl9kaW1lbnNpb25zQ2hhbmdlZD0hMX0sdC5wcm90b3R5cGUuX3JlbmRlckRlY29yYXRpb249ZnVuY3Rpb24oZSl7dGhpcy5fcmVmcmVzaFN0eWxlKGUpLHRoaXMuX2RpbWVuc2lvbnNDaGFuZ2VkJiZ0aGlzLl9yZWZyZXNoWFBvc2l0aW9uKGUpfSx0LnByb3RvdHlwZS5fY3JlYXRlRWxlbWVudD1mdW5jdGlvbihlKXt2YXIgdCxyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3IuY2xhc3NMaXN0LmFkZCgieHRlcm0tZGVjb3JhdGlvbiIpLHIuc3R5bGUud2lkdGg9TWF0aC5yb3VuZCgoZS5vcHRpb25zLndpZHRofHwxKSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKSsicHgiLHIuc3R5bGUuaGVpZ2h0PShlLm9wdGlvbnMuaGVpZ2h0fHwxKSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLHIuc3R5bGUudG9wPShlLm1hcmtlci5saW5lLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUueWRpc3ApKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsci5zdHlsZS5saW5lSGVpZ2h0PXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCI7dmFyIGk9bnVsbCE9PSh0PWUub3B0aW9ucy54KSYmdm9pZCAwIT09dD90OjA7cmV0dXJuIGkmJmk+dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiYoci5zdHlsZS5kaXNwbGF5PSJub25lIiksdGhpcy5fcmVmcmVzaFhQb3NpdGlvbihlLHIpLHJ9LHQucHJvdG90eXBlLl9yZWZyZXNoU3R5bGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxyPWUubWFya2VyLmxpbmUtdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2ZS55ZGlzcDtpZihyPDB8fHI+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyllLmVsZW1lbnQmJihlLmVsZW1lbnQuc3R5bGUuZGlzcGxheT0ibm9uZSIsZS5vblJlbmRlckVtaXR0ZXIuZmlyZShlLmVsZW1lbnQpKTtlbHNle3ZhciBpPXRoaXMuX2RlY29yYXRpb25FbGVtZW50cy5nZXQoZSk7aXx8KGUub25EaXNwb3NlKChmdW5jdGlvbigpe3JldHVybiB0Ll9yZW1vdmVEZWNvcmF0aW9uKGUpfSkpLGk9dGhpcy5fY3JlYXRlRWxlbWVudChlKSxlLmVsZW1lbnQ9aSx0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuc2V0KGUsaSksdGhpcy5fY29udGFpbmVyLmFwcGVuZENoaWxkKGkpKSxpLnN0eWxlLnRvcD1yKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0KyJweCIsaS5zdHlsZS5kaXNwbGF5PXRoaXMuX2FsdEJ1ZmZlcklzQWN0aXZlPyJub25lIjoiYmxvY2siLGUub25SZW5kZXJFbWl0dGVyLmZpcmUoaSl9fSx0LnByb3RvdHlwZS5fcmVmcmVzaFhQb3NpdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByO2lmKHZvaWQgMD09PXQmJih0PWUuZWxlbWVudCksdCl7dmFyIGk9bnVsbCE9PShyPWUub3B0aW9ucy54KSYmdm9pZCAwIT09cj9yOjA7InJpZ2h0Ij09PShlLm9wdGlvbnMuYW5jaG9yfHwibGVmdCIpP3Quc3R5bGUucmlnaHQ9aT9pKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgrInB4IjoiIjp0LnN0eWxlLmxlZnQ9aT9pKnRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgrInB4IjoiIn19LHQucHJvdG90eXBlLl9yZW1vdmVEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0O251bGw9PT0odD10aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZ2V0KGUpKXx8dm9pZCAwPT09dHx8dC5yZW1vdmUoKSx0aGlzLl9kZWNvcmF0aW9uRWxlbWVudHMuZGVsZXRlKGUpfSxvKFtzKDEsdS5JQnVmZmVyU2VydmljZSkscygyLHUuSURlY29yYXRpb25TZXJ2aWNlKSxzKDMsbC5JUmVuZGVyU2VydmljZSldLHQpfShoLkRpc3Bvc2FibGUpO3QuQnVmZmVyRGVjb3JhdGlvblJlbmRlcmVyPWZ9LDU4NzE6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29sb3Jab25lU3RvcmU9dm9pZCAwO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuX3pvbmVzPVtdLHRoaXMuX3pvbmVQb29sPVtdLHRoaXMuX3pvbmVQb29sSW5kZXg9MCx0aGlzLl9saW5lUGFkZGluZz17ZnVsbDowLGxlZnQ6MCxjZW50ZXI6MCxyaWdodDowfX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ6b25lcyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl96b25lUG9vbC5sZW5ndGg9TWF0aC5taW4odGhpcy5fem9uZVBvb2wubGVuZ3RoLHRoaXMuX3pvbmVzLmxlbmd0aCksdGhpcy5fem9uZXN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl96b25lcy5sZW5ndGg9MCx0aGlzLl96b25lUG9vbEluZGV4PTB9LGUucHJvdG90eXBlLmFkZERlY29yYXRpb249ZnVuY3Rpb24oZSl7dmFyIHQsaTtpZihlLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMpe3RyeXtmb3IodmFyIG49cih0aGlzLl96b25lcyksbz1uLm5leHQoKTshby5kb25lO289bi5uZXh0KCkpe3ZhciBzPW8udmFsdWU7aWYocy5jb2xvcj09PWUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5jb2xvciYmcy5wb3NpdGlvbj09PWUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbil7aWYodGhpcy5fbGluZUludGVyc2VjdHNab25lKHMsZS5tYXJrZXIubGluZSkpcmV0dXJuO2lmKHRoaXMuX2xpbmVBZGphY2VudFRvWm9uZShzLGUubWFya2VyLmxpbmUsZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uKSlyZXR1cm4gdm9pZCB0aGlzLl9hZGRMaW5lVG9ab25lKHMsZS5tYXJrZXIubGluZSl9fX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYoaT1uLnJldHVybikmJmkuY2FsbChuKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19aWYodGhpcy5fem9uZVBvb2xJbmRleDx0aGlzLl96b25lUG9vbC5sZW5ndGgpcmV0dXJuIHRoaXMuX3pvbmVQb29sW3RoaXMuX3pvbmVQb29sSW5kZXhdLmNvbG9yPWUub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5jb2xvcix0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4XS5wb3NpdGlvbj1lLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMucG9zaXRpb24sdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0uc3RhcnRCdWZmZXJMaW5lPWUubWFya2VyLmxpbmUsdGhpcy5fem9uZVBvb2xbdGhpcy5fem9uZVBvb2xJbmRleF0uZW5kQnVmZmVyTGluZT1lLm1hcmtlci5saW5lLHZvaWQgdGhpcy5fem9uZXMucHVzaCh0aGlzLl96b25lUG9vbFt0aGlzLl96b25lUG9vbEluZGV4KytdKTt0aGlzLl96b25lcy5wdXNoKHtjb2xvcjplLm9wdGlvbnMub3ZlcnZpZXdSdWxlck9wdGlvbnMuY29sb3IscG9zaXRpb246ZS5vcHRpb25zLm92ZXJ2aWV3UnVsZXJPcHRpb25zLnBvc2l0aW9uLHN0YXJ0QnVmZmVyTGluZTplLm1hcmtlci5saW5lLGVuZEJ1ZmZlckxpbmU6ZS5tYXJrZXIubGluZX0pLHRoaXMuX3pvbmVQb29sLnB1c2godGhpcy5fem9uZXNbdGhpcy5fem9uZXMubGVuZ3RoLTFdKSx0aGlzLl96b25lUG9vbEluZGV4Kyt9fSxlLnByb3RvdHlwZS5zZXRQYWRkaW5nPWZ1bmN0aW9uKGUpe3RoaXMuX2xpbmVQYWRkaW5nPWV9LGUucHJvdG90eXBlLl9saW5lSW50ZXJzZWN0c1pvbmU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD49ZS5zdGFydEJ1ZmZlckxpbmUmJnQ8PWUuZW5kQnVmZmVyTGluZX0sZS5wcm90b3R5cGUuX2xpbmVBZGphY2VudFRvWm9uZT1mdW5jdGlvbihlLHQscil7cmV0dXJuIHQ+PWUuc3RhcnRCdWZmZXJMaW5lLXRoaXMuX2xpbmVQYWRkaW5nW3J8fCJmdWxsIl0mJnQ8PWUuZW5kQnVmZmVyTGluZSt0aGlzLl9saW5lUGFkZGluZ1tyfHwiZnVsbCJdfSxlLnByb3RvdHlwZS5fYWRkTGluZVRvWm9uZT1mdW5jdGlvbihlLHQpe2Uuc3RhcnRCdWZmZXJMaW5lPU1hdGgubWluKGUuc3RhcnRCdWZmZXJMaW5lLHQpLGUuZW5kQnVmZmVyTGluZT1NYXRoLm1heChlLmVuZEJ1ZmZlckxpbmUsdCl9LGV9KCk7dC5Db2xvclpvbmVTdG9yZT1pfSw1NzQ0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk92ZXJ2aWV3UnVsZXJSZW5kZXJlcj12b2lkIDA7dmFyIGM9cig1ODcxKSxsPXIoMzY1NiksaD1yKDQ3MjUpLHU9cig4NDQpLGY9cigyNTg1KSxfPXtmdWxsOjAsbGVmdDowLGNlbnRlcjowLHJpZ2h0OjB9LGQ9e2Z1bGw6MCxsZWZ0OjAsY2VudGVyOjAscmlnaHQ6MH0scD17ZnVsbDowLGxlZnQ6MCxjZW50ZXI6MCxyaWdodDowfSx2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMpe3ZhciBhLGw9ZS5jYWxsKHRoaXMpfHx0aGlzO2wuX3ZpZXdwb3J0RWxlbWVudD10LGwuX3NjcmVlbkVsZW1lbnQ9cixsLl9idWZmZXJTZXJ2aWNlPWksbC5fZGVjb3JhdGlvblNlcnZpY2U9bixsLl9yZW5kZXJTZXJ2aWNlPW8sbC5fb3B0aW9uc1NlcnZpY2U9cyxsLl9jb2xvclpvbmVTdG9yZT1uZXcgYy5Db2xvclpvbmVTdG9yZSxsLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zPSEwLGwuX3Nob3VsZFVwZGF0ZUFuY2hvcj0hMCxsLl9sYXN0S25vd25CdWZmZXJMZW5ndGg9MCxsLl9jYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksbC5fY2FudmFzLmNsYXNzTGlzdC5hZGQoInh0ZXJtLWRlY29yYXRpb24tb3ZlcnZpZXctcnVsZXIiKSxsLl9yZWZyZXNoQ2FudmFzRGltZW5zaW9ucygpLG51bGw9PT0oYT1sLl92aWV3cG9ydEVsZW1lbnQucGFyZW50RWxlbWVudCl8fHZvaWQgMD09PWF8fGEuaW5zZXJ0QmVmb3JlKGwuX2NhbnZhcyxsLl92aWV3cG9ydEVsZW1lbnQpO3ZhciBoPWwuX2NhbnZhcy5nZXRDb250ZXh0KCIyZCIpO2lmKCFoKXRocm93IG5ldyBFcnJvcigiQ3R4IGNhbm5vdCBiZSBudWxsIik7cmV0dXJuIGwuX2N0eD1oLGwuX3JlZ2lzdGVyRGVjb3JhdGlvbkxpc3RlbmVycygpLGwuX3JlZ2lzdGVyQnVmZmVyQ2hhbmdlTGlzdGVuZXJzKCksbC5fcmVnaXN0ZXJEaW1lbnNpb25DaGFuZ2VMaXN0ZW5lcnMoKSxsfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJfd2lkdGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5vdmVydmlld1J1bGVyV2lkdGh8fDB9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuX3JlZ2lzdGVyRGVjb3JhdGlvbkxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5yZWdpc3Rlcih0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5vbkRlY29yYXRpb25SZWdpc3RlcmVkKChmdW5jdGlvbigpe3JldHVybiBlLl9xdWV1ZVJlZnJlc2godm9pZCAwLCEwKX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9kZWNvcmF0aW9uU2VydmljZS5vbkRlY29yYXRpb25SZW1vdmVkKChmdW5jdGlvbigpe3JldHVybiBlLl9xdWV1ZVJlZnJlc2godm9pZCAwLCEwKX0pKSl9LHQucHJvdG90eXBlLl9yZWdpc3RlckJ1ZmZlckNoYW5nZUxpc3RlbmVycz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5yZWdpc3Rlcih0aGlzLl9yZW5kZXJTZXJ2aWNlLm9uUmVuZGVyZWRWaWV3cG9ydENoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gZS5fcXVldWVSZWZyZXNoKCl9KSkpLHRoaXMucmVnaXN0ZXIodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKCl7ZS5fY2FudmFzLnN0eWxlLmRpc3BsYXk9ZS5fYnVmZmVyU2VydmljZS5idWZmZXI9PT1lLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWx0PyJub25lIjoiYmxvY2sifSkpKSx0aGlzLnJlZ2lzdGVyKHRoaXMuX2J1ZmZlclNlcnZpY2Uub25TY3JvbGwoKGZ1bmN0aW9uKCl7ZS5fbGFzdEtub3duQnVmZmVyTGVuZ3RoIT09ZS5fYnVmZmVyU2VydmljZS5idWZmZXJzLm5vcm1hbC5saW5lcy5sZW5ndGgmJihlLl9yZWZyZXNoRHJhd0hlaWdodENvbnN0YW50cygpLGUuX3JlZnJlc2hDb2xvclpvbmVQYWRkaW5nKCkpfSkpKX0sdC5wcm90b3R5cGUuX3JlZ2lzdGVyRGltZW5zaW9uQ2hhbmdlTGlzdGVuZXJzPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLnJlZ2lzdGVyKHRoaXMuX3JlbmRlclNlcnZpY2Uub25SZW5kZXIoKGZ1bmN0aW9uKCl7ZS5fY29udGFpbmVySGVpZ2h0JiZlLl9jb250YWluZXJIZWlnaHQ9PT1lLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodHx8KGUuX3F1ZXVlUmVmcmVzaCghMCksZS5fY29udGFpbmVySGVpZ2h0PWUuX3NjcmVlbkVsZW1lbnQuY2xpZW50SGVpZ2h0KX0pKSksdGhpcy5yZWdpc3Rlcih0aGlzLl9vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZSgoZnVuY3Rpb24odCl7Im92ZXJ2aWV3UnVsZXJXaWR0aCI9PT10JiZlLl9xdWV1ZVJlZnJlc2goITApfSkpKSx0aGlzLnJlZ2lzdGVyKCgwLGwuYWRkRGlzcG9zYWJsZURvbUxpc3RlbmVyKSh3aW5kb3csInJlc2l6ZSIsKGZ1bmN0aW9uKCl7ZS5fcXVldWVSZWZyZXNoKCEwKX0pKSksdGhpcy5fcXVldWVSZWZyZXNoKCEwKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciB0O251bGw9PT0odD10aGlzLl9jYW52YXMpfHx2b2lkIDA9PT10fHx0LnJlbW92ZSgpLGUucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKX0sdC5wcm90b3R5cGUuX3JlZnJlc2hEcmF3Q29uc3RhbnRzPWZ1bmN0aW9uKCl7dmFyIGU9TWF0aC5mbG9vcih0aGlzLl9jYW52YXMud2lkdGgvMyksdD1NYXRoLmNlaWwodGhpcy5fY2FudmFzLndpZHRoLzMpO2QuZnVsbD10aGlzLl9jYW52YXMud2lkdGgsZC5sZWZ0PWUsZC5jZW50ZXI9dCxkLnJpZ2h0PWUsdGhpcy5fcmVmcmVzaERyYXdIZWlnaHRDb25zdGFudHMoKSxwLmZ1bGw9MCxwLmxlZnQ9MCxwLmNlbnRlcj1kLmxlZnQscC5yaWdodD1kLmxlZnQrZC5jZW50ZXJ9LHQucHJvdG90eXBlLl9yZWZyZXNoRHJhd0hlaWdodENvbnN0YW50cz1mdW5jdGlvbigpe18uZnVsbD1NYXRoLnJvdW5kKDIqd2luZG93LmRldmljZVBpeGVsUmF0aW8pO3ZhciBlPXRoaXMuX2NhbnZhcy5oZWlnaHQvdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMubGVuZ3RoLHQ9TWF0aC5yb3VuZChNYXRoLm1heChNYXRoLm1pbihlLDEyKSw2KSp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7Xy5sZWZ0PXQsXy5jZW50ZXI9dCxfLnJpZ2h0PXR9LHQucHJvdG90eXBlLl9yZWZyZXNoQ29sb3Jab25lUGFkZGluZz1mdW5jdGlvbigpe3RoaXMuX2NvbG9yWm9uZVN0b3JlLnNldFBhZGRpbmcoe2Z1bGw6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpfLmZ1bGwpLGxlZnQ6TWF0aC5mbG9vcih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aC8odGhpcy5fY2FudmFzLmhlaWdodC0xKSpfLmxlZnQpLGNlbnRlcjpNYXRoLmZsb29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoLyh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKl8uY2VudGVyKSxyaWdodDpNYXRoLmZsb29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5hY3RpdmUubGluZXMubGVuZ3RoLyh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKl8ucmlnaHQpfSksdGhpcy5fbGFzdEtub3duQnVmZmVyTGVuZ3RoPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5ub3JtYWwubGluZXMubGVuZ3RofSx0LnByb3RvdHlwZS5fcmVmcmVzaENhbnZhc0RpbWVuc2lvbnM9ZnVuY3Rpb24oKXt0aGlzLl9jYW52YXMuc3R5bGUud2lkdGg9dGhpcy5fd2lkdGgrInB4Iix0aGlzLl9jYW52YXMud2lkdGg9TWF0aC5yb3VuZCh0aGlzLl93aWR0aCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5fY2FudmFzLnN0eWxlLmhlaWdodD10aGlzLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodCsicHgiLHRoaXMuX2NhbnZhcy5oZWlnaHQ9TWF0aC5yb3VuZCh0aGlzLl9zY3JlZW5FbGVtZW50LmNsaWVudEhlaWdodCp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5fcmVmcmVzaERyYXdDb25zdGFudHMoKSx0aGlzLl9yZWZyZXNoQ29sb3Jab25lUGFkZGluZygpfSx0LnByb3RvdHlwZS5fcmVmcmVzaERlY29yYXRpb25zPWZ1bmN0aW9uKCl7dmFyIGUsdCxyLGksbixvO3RoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnMmJnRoaXMuX3JlZnJlc2hDYW52YXNEaW1lbnNpb25zKCksdGhpcy5fY3R4LmNsZWFyUmVjdCgwLDAsdGhpcy5fY2FudmFzLndpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQpLHRoaXMuX2NvbG9yWm9uZVN0b3JlLmNsZWFyKCk7dHJ5e2Zvcih2YXIgcz1hKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmRlY29yYXRpb25zKSxjPXMubmV4dCgpOyFjLmRvbmU7Yz1zLm5leHQoKSl7dmFyIGw9Yy52YWx1ZTt0aGlzLl9jb2xvclpvbmVTdG9yZS5hZGREZWNvcmF0aW9uKGwpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtjJiYhYy5kb25lJiYodD1zLnJldHVybikmJnQuY2FsbChzKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fY3R4LmxpbmVXaWR0aD0xO3ZhciBoPXRoaXMuX2NvbG9yWm9uZVN0b3JlLnpvbmVzO3RyeXtmb3IodmFyIHU9YShoKSxmPXUubmV4dCgpOyFmLmRvbmU7Zj11Lm5leHQoKSkiZnVsbCIhPT0ocD1mLnZhbHVlKS5wb3NpdGlvbiYmdGhpcy5fcmVuZGVyQ29sb3Jab25lKHApfWNhdGNoKGUpe3I9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2YmJiFmLmRvbmUmJihpPXUucmV0dXJuKSYmaS5jYWxsKHUpfWZpbmFsbHl7aWYocil0aHJvdyByLmVycm9yfX10cnl7Zm9yKHZhciBfPWEoaCksZD1fLm5leHQoKTshZC5kb25lO2Q9Xy5uZXh0KCkpe3ZhciBwOyJmdWxsIj09PShwPWQudmFsdWUpLnBvc2l0aW9uJiZ0aGlzLl9yZW5kZXJDb2xvclpvbmUocCl9fWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2QmJiFkLmRvbmUmJihvPV8ucmV0dXJuKSYmby5jYWxsKF8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX10aGlzLl9zaG91bGRVcGRhdGVEaW1lbnNpb25zPSExLHRoaXMuX3Nob3VsZFVwZGF0ZUFuY2hvcj0hMX0sdC5wcm90b3R5cGUuX3JlbmRlckNvbG9yWm9uZT1mdW5jdGlvbihlKXt0aGlzLl9jdHguZmlsbFN0eWxlPWUuY29sb3IsdGhpcy5fY3R4LmZpbGxSZWN0KHBbZS5wb3NpdGlvbnx8ImZ1bGwiXSxNYXRoLnJvdW5kKCh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKihlLnN0YXJ0QnVmZmVyTGluZS90aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aCktX1tlLnBvc2l0aW9ufHwiZnVsbCJdLzIpLGRbZS5wb3NpdGlvbnx8ImZ1bGwiXSxNYXRoLnJvdW5kKCh0aGlzLl9jYW52YXMuaGVpZ2h0LTEpKigoZS5lbmRCdWZmZXJMaW5lLWUuc3RhcnRCdWZmZXJMaW5lKS90aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMuYWN0aXZlLmxpbmVzLmxlbmd0aCkrX1tlLnBvc2l0aW9ufHwiZnVsbCJdKSl9LHQucHJvdG90eXBlLl9xdWV1ZVJlZnJlc2g9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzO3RoaXMuX3Nob3VsZFVwZGF0ZURpbWVuc2lvbnM9ZXx8dGhpcy5fc2hvdWxkVXBkYXRlRGltZW5zaW9ucyx0aGlzLl9zaG91bGRVcGRhdGVBbmNob3I9dHx8dGhpcy5fc2hvdWxkVXBkYXRlQW5jaG9yLHZvaWQgMD09PXRoaXMuX2FuaW1hdGlvbkZyYW1lJiYodGhpcy5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtyLl9yZWZyZXNoRGVjb3JhdGlvbnMoKSxyLl9hbmltYXRpb25GcmFtZT12b2lkIDB9KSkpfSxvKFtzKDIsZi5JQnVmZmVyU2VydmljZSkscygzLGYuSURlY29yYXRpb25TZXJ2aWNlKSxzKDQsaC5JUmVuZGVyU2VydmljZSkscyg1LGYuSU9wdGlvbnNTZXJ2aWNlKV0sdCl9KHUuRGlzcG9zYWJsZSk7dC5PdmVydmlld1J1bGVyUmVuZGVyZXI9dn0sMjk1MDpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNvbXBvc2l0aW9uSGVscGVyPXZvaWQgMDt2YXIgbz1yKDQ3MjUpLHM9cigyNTg1KSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4sbyl7dGhpcy5fdGV4dGFyZWE9ZSx0aGlzLl9jb21wb3NpdGlvblZpZXc9dCx0aGlzLl9idWZmZXJTZXJ2aWNlPXIsdGhpcy5fb3B0aW9uc1NlcnZpY2U9aSx0aGlzLl9jb3JlU2VydmljZT1uLHRoaXMuX3JlbmRlclNlcnZpY2U9byx0aGlzLl9pc0NvbXBvc2luZz0hMSx0aGlzLl9pc1NlbmRpbmdDb21wb3NpdGlvbj0hMSx0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uPXtzdGFydDowLGVuZDowfSx0aGlzLl9kYXRhQWxyZWFkeVNlbnQ9IiJ9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNDb21wb3NpbmciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNDb21wb3Npbmd9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY29tcG9zaXRpb25zdGFydD1mdW5jdGlvbigpe3RoaXMuX2lzQ29tcG9zaW5nPSEwLHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uc3RhcnQ9dGhpcy5fdGV4dGFyZWEudmFsdWUubGVuZ3RoLHRoaXMuX2NvbXBvc2l0aW9uVmlldy50ZXh0Q29udGVudD0iIix0aGlzLl9kYXRhQWxyZWFkeVNlbnQ9IiIsdGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5hZGQoImFjdGl2ZSIpfSxlLnByb3RvdHlwZS5jb21wb3NpdGlvbnVwZGF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuX2NvbXBvc2l0aW9uVmlldy50ZXh0Q29udGVudD1lLmRhdGEsdGhpcy51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCksc2V0VGltZW91dCgoZnVuY3Rpb24oKXt0Ll9jb21wb3NpdGlvblBvc2l0aW9uLmVuZD10Ll90ZXh0YXJlYS52YWx1ZS5sZW5ndGh9KSwwKX0sZS5wcm90b3R5cGUuY29tcG9zaXRpb25lbmQ9ZnVuY3Rpb24oKXt0aGlzLl9maW5hbGl6ZUNvbXBvc2l0aW9uKCEwKX0sZS5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihlKXtpZih0aGlzLl9pc0NvbXBvc2luZ3x8dGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb24pe2lmKDIyOT09PWUua2V5Q29kZSlyZXR1cm4hMTtpZigxNj09PWUua2V5Q29kZXx8MTc9PT1lLmtleUNvZGV8fDE4PT09ZS5rZXlDb2RlKXJldHVybiExO3RoaXMuX2ZpbmFsaXplQ29tcG9zaXRpb24oITEpfXJldHVybiAyMjkhPT1lLmtleUNvZGV8fCh0aGlzLl9oYW5kbGVBbnlUZXh0YXJlYUNoYW5nZXMoKSwhMSl9LGUucHJvdG90eXBlLl9maW5hbGl6ZUNvbXBvc2l0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7aWYodGhpcy5fY29tcG9zaXRpb25WaWV3LmNsYXNzTGlzdC5yZW1vdmUoImFjdGl2ZSIpLHRoaXMuX2lzQ29tcG9zaW5nPSExLGUpe3ZhciByPXtzdGFydDp0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LGVuZDp0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLmVuZH07dGhpcy5faXNTZW5kaW5nQ29tcG9zaXRpb249ITAsc2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZih0Ll9pc1NlbmRpbmdDb21wb3NpdGlvbil7dC5faXNTZW5kaW5nQ29tcG9zaXRpb249ITE7dmFyIGU7ci5zdGFydCs9dC5fZGF0YUFscmVhZHlTZW50Lmxlbmd0aCwoZT10Ll9pc0NvbXBvc2luZz90Ll90ZXh0YXJlYS52YWx1ZS5zdWJzdHJpbmcoci5zdGFydCxyLmVuZCk6dC5fdGV4dGFyZWEudmFsdWUuc3Vic3RyaW5nKHIuc3RhcnQpKS5sZW5ndGg+MCYmdC5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChlLCEwKX19KSwwKX1lbHNle3RoaXMuX2lzU2VuZGluZ0NvbXBvc2l0aW9uPSExO3ZhciBpPXRoaXMuX3RleHRhcmVhLnZhbHVlLnN1YnN0cmluZyh0aGlzLl9jb21wb3NpdGlvblBvc2l0aW9uLnN0YXJ0LHRoaXMuX2NvbXBvc2l0aW9uUG9zaXRpb24uZW5kKTt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGksITApfX0sZS5wcm90b3R5cGUuX2hhbmRsZUFueVRleHRhcmVhQ2hhbmdlcz1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD10aGlzLl90ZXh0YXJlYS52YWx1ZTtzZXRUaW1lb3V0KChmdW5jdGlvbigpe2lmKCFlLl9pc0NvbXBvc2luZyl7dmFyIHI9ZS5fdGV4dGFyZWEudmFsdWUucmVwbGFjZSh0LCIiKTtyLmxlbmd0aD4wJiYoZS5fZGF0YUFscmVhZHlTZW50PXIsZS5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChyLCEwKSl9fSksMCl9LGUucHJvdG90eXBlLnVwZGF0ZUNvbXBvc2l0aW9uRWxlbWVudHM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztpZih0aGlzLl9pc0NvbXBvc2luZyl7aWYodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuaXNDdXJzb3JJblZpZXdwb3J0KXt2YXIgcj1NYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKSxpPXRoaXMuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsSGVpZ2h0LG49dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSp0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxvPXIqdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aDt0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUubGVmdD1vKyJweCIsdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLnRvcD1uKyJweCIsdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmhlaWdodD1pKyJweCIsdGhpcy5fY29tcG9zaXRpb25WaWV3LnN0eWxlLmxpbmVIZWlnaHQ9aSsicHgiLHRoaXMuX2NvbXBvc2l0aW9uVmlldy5zdHlsZS5mb250RmFtaWx5PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseSx0aGlzLl9jb21wb3NpdGlvblZpZXcuc3R5bGUuZm9udFNpemU9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250U2l6ZSsicHgiO3ZhciBzPXRoaXMuX2NvbXBvc2l0aW9uVmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLl90ZXh0YXJlYS5zdHlsZS5sZWZ0PW8rInB4Iix0aGlzLl90ZXh0YXJlYS5zdHlsZS50b3A9bisicHgiLHRoaXMuX3RleHRhcmVhLnN0eWxlLndpZHRoPU1hdGgubWF4KHMud2lkdGgsMSkrInB4Iix0aGlzLl90ZXh0YXJlYS5zdHlsZS5oZWlnaHQ9TWF0aC5tYXgocy5oZWlnaHQsMSkrInB4Iix0aGlzLl90ZXh0YXJlYS5zdHlsZS5saW5lSGVpZ2h0PXMuaGVpZ2h0KyJweCJ9ZXx8c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC51cGRhdGVDb21wb3NpdGlvbkVsZW1lbnRzKCEwKX0pLDApfX0saShbbigyLHMuSUJ1ZmZlclNlcnZpY2UpLG4oMyxzLklPcHRpb25zU2VydmljZSksbig0LHMuSUNvcmVTZXJ2aWNlKSxuKDUsby5JUmVuZGVyU2VydmljZSldLGUpfSgpO3QuQ29tcG9zaXRpb25IZWxwZXI9YX0sOTgwNjooZSx0KT0+e2Z1bmN0aW9uIHIoZSx0LHIpe3ZhciBpPXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksbj1lLmdldENvbXB1dGVkU3R5bGUociksbz1wYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctbGVmdCIpKSxzPXBhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy10b3AiKSk7cmV0dXJuW3QuY2xpZW50WC1pLmxlZnQtbyx0LmNsaWVudFktaS50b3Atc119T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuZ2V0UmF3Qnl0ZUNvb3Jkcz10LmdldENvb3Jkcz10LmdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50PXZvaWQgMCx0LmdldENvb3Jkc1JlbGF0aXZlVG9FbGVtZW50PXIsdC5nZXRDb29yZHM9ZnVuY3Rpb24oZSx0LGksbixvLHMsYSxjLGwpe2lmKHMpe3ZhciBoPXIoZSx0LGkpO2lmKGgpcmV0dXJuIGhbMF09TWF0aC5jZWlsKChoWzBdKyhsP2EvMjowKSkvYSksaFsxXT1NYXRoLmNlaWwoaFsxXS9jKSxoWzBdPU1hdGgubWluKE1hdGgubWF4KGhbMF0sMSksbisobD8xOjApKSxoWzFdPU1hdGgubWluKE1hdGgubWF4KGhbMV0sMSksbyksaH19LHQuZ2V0UmF3Qnl0ZUNvb3Jkcz1mdW5jdGlvbihlKXtpZihlKXJldHVybnt4OmVbMF0rMzIseTplWzFdKzMyfX19LDk1MDQ6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lm1vdmVUb0NlbGxTZXF1ZW5jZT12b2lkIDA7dmFyIGk9cigyNTg0KTtmdW5jdGlvbiBuKGUsdCxyLGkpe3ZhciBuPWUtbyhyLGUpLGE9dC1vKHIsdCksaD1NYXRoLmFicyhuLWEpLWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGk9MCxuPWUtbyhyLGUpLGE9dC1vKHIsdCksYz0wO2M8TWF0aC5hYnMobi1hKTtjKyspe3ZhciBsPSJBIj09PXMoZSx0KT8tMToxLGg9ci5idWZmZXIubGluZXMuZ2V0KG4rbCpjKTsobnVsbD09aD92b2lkIDA6aC5pc1dyYXBwZWQpJiZpKyt9cmV0dXJuIGl9KGUsdCxyKTtyZXR1cm4gbChoLGMocyhlLHQpLGkpKX1mdW5jdGlvbiBvKGUsdCl7Zm9yKHZhciByPTAsaT1lLmJ1ZmZlci5saW5lcy5nZXQodCksbj1udWxsPT1pP3ZvaWQgMDppLmlzV3JhcHBlZDtuJiZ0Pj0wJiZ0PGUucm93czspcisrLG49bnVsbD09KGk9ZS5idWZmZXIubGluZXMuZ2V0KC0tdCkpP3ZvaWQgMDppLmlzV3JhcHBlZDtyZXR1cm4gcn1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGU+dD8iQSI6IkIifWZ1bmN0aW9uIGEoZSx0LHIsaSxuLG8pe2Zvcih2YXIgcz1lLGE9dCxjPSIiO3MhPT1yfHxhIT09aTspcys9bj8xOi0xLG4mJnM+by5jb2xzLTE/KGMrPW8uYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhhLCExLGUscykscz0wLGU9MCxhKyspOiFuJiZzPDAmJihjKz1vLmJ1ZmZlci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcoYSwhMSwwLGUrMSksZT1zPW8uY29scy0xLGEtLSk7cmV0dXJuIGMrby5idWZmZXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGEsITEsZSxzKX1mdW5jdGlvbiBjKGUsdCl7dmFyIHI9dD8iTyI6IlsiO3JldHVybiBpLkMwLkVTQytyK2V9ZnVuY3Rpb24gbChlLHQpe2U9TWF0aC5mbG9vcihlKTtmb3IodmFyIHI9IiIsaT0wO2k8ZTtpKyspcis9dDtyZXR1cm4gcn10Lm1vdmVUb0NlbGxTZXF1ZW5jZT1mdW5jdGlvbihlLHQscixpKXt2YXIgcyxoPXIuYnVmZmVyLngsdT1yLmJ1ZmZlci55O2lmKCFyLmJ1ZmZlci5oYXNTY3JvbGxiYWNrKXJldHVybiBmdW5jdGlvbihlLHQscixpLHMsaCl7cmV0dXJuIDA9PT1uKHQsaSxzLGgpLmxlbmd0aD8iIjpsKGEoZSx0LGUsdC1vKHMsdCksITEscykubGVuZ3RoLGMoIkQiLGgpKX0oaCx1LDAsdCxyLGkpK24odSx0LHIsaSkrZnVuY3Rpb24oZSx0LHIsaSxzLGgpe3ZhciB1O3U9bih0LGkscyxoKS5sZW5ndGg+MD9pLW8ocyxpKTp0O3ZhciBmPWksXz1mdW5jdGlvbihlLHQscixpLHMsYSl7dmFyIGM7cmV0dXJuIGM9bihyLGkscyxhKS5sZW5ndGg+MD9pLW8ocyxpKTp0LGU8ciYmYzw9aXx8ZT49ciYmYzxpPyJDIjoiRCJ9KGUsdCxyLGkscyxoKTtyZXR1cm4gbChhKGUsdSxyLGYsIkMiPT09XyxzKS5sZW5ndGgsYyhfLGgpKX0oaCx1LGUsdCxyLGkpO2lmKHU9PT10KXJldHVybiBzPWg+ZT8iRCI6IkMiLGwoTWF0aC5hYnMoaC1lKSxjKHMsaSkpO3M9dT50PyJEIjoiQyI7dmFyIGY9TWF0aC5hYnModS10KTtyZXR1cm4gbChmdW5jdGlvbihlLHQpe3JldHVybiB0LmNvbHMtZX0odT50P2U6aCxyKSsoZi0xKSpyLmNvbHMrMSsoKHU+dD9oOmUpLTEpLGMocyxpKSl9fSw0Mzg5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybiBpPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPTEsaT1hcmd1bWVudHMubGVuZ3RoO3I8aTtyKyspZm9yKHZhciBuIGluIHQ9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZX0saS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LG49dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlRlcm1pbmFsPXZvaWQgMDt2YXIgbz1yKDMyMzYpLHM9cig5MDQyKSxhPXIoNzk3NSksYz1yKDcwOTApLGw9cig1NzQxKSxoPXIoODI4NSksdT1bImNvbHMiLCJyb3dzIl0sZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dmFyIHQ9dGhpczt0aGlzLl9jb3JlPW5ldyBvLlRlcm1pbmFsKGUpLHRoaXMuX2FkZG9uTWFuYWdlcj1uZXcgbC5BZGRvbk1hbmFnZXIsdGhpcy5fcHVibGljT3B0aW9ucz1pKHt9LHRoaXMuX2NvcmUub3B0aW9ucyk7dmFyIHI9ZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2NvcmUub3B0aW9uc1tlXX0sbj1mdW5jdGlvbihlLHIpe3QuX2NoZWNrUmVhZG9ubHlPcHRpb25zKGUpLHQuX2NvcmUub3B0aW9uc1tlXT1yfTtmb3IodmFyIHMgaW4gdGhpcy5fY29yZS5vcHRpb25zKXt2YXIgYT17Z2V0OnIuYmluZCh0aGlzLHMpLHNldDpuLmJpbmQodGhpcyxzKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuX3B1YmxpY09wdGlvbnMscyxhKX19cmV0dXJuIGUucHJvdG90eXBlLl9jaGVja1JlYWRvbmx5T3B0aW9ucz1mdW5jdGlvbihlKXtpZih1LmluY2x1ZGVzKGUpKXRocm93IG5ldyBFcnJvcignT3B0aW9uICInK2UrJyIgY2FuIG9ubHkgYmUgc2V0IGluIHRoZSBjb25zdHJ1Y3RvcicpfSxlLnByb3RvdHlwZS5fY2hlY2tQcm9wb3NlZEFwaT1mdW5jdGlvbigpe2lmKCF0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuYWxsb3dQcm9wb3NlZEFwaSl0aHJvdyBuZXcgRXJyb3IoIllvdSBtdXN0IHNldCB0aGUgYWxsb3dQcm9wb3NlZEFwaSBvcHRpb24gdG8gdHJ1ZSB0byB1c2UgcHJvcG9zZWQgQVBJIil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25CZWxsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25CZWxsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25CaW5hcnkiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbkJpbmFyeX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQ3Vyc29yTW92ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uQ3Vyc29yTW92ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uRGF0YSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uRGF0YX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uS2V5Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25LZXl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkxpbmVGZWVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25MaW5lRmVlZH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uUmVuZGVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25SZW5kZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblJlc2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLm9uUmVzaXplfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25TY3JvbGwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vblNjcm9sbH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uU2VsZWN0aW9uQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25TZWxlY3Rpb25DaGFuZ2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblRpdGxlQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUub25UaXRsZUNoYW5nZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uV3JpdGVQYXJzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29yZS5vbldyaXRlUGFyc2VkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZWxlbWVudCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLmVsZW1lbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJwYXJzZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX3BhcnNlcnx8KHRoaXMuX3BhcnNlcj1uZXcgYS5QYXJzZXJBcGkodGhpcy5fY29yZSkpLHRoaXMuX3BhcnNlcn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInVuaWNvZGUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLG5ldyBjLlVuaWNvZGVBcGkodGhpcy5fY29yZSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJ0ZXh0YXJlYSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLnRleHRhcmVhfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwicm93cyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLnJvd3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJjb2xzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUuY29sc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImJ1ZmZlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fYnVmZmVyfHwodGhpcy5fYnVmZmVyPW5ldyBoLkJ1ZmZlck5hbWVzcGFjZUFwaSh0aGlzLl9jb3JlKSksdGhpcy5fYnVmZmVyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibWFya2VycyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5tYXJrZXJzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibW9kZXMiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9jb3JlLmNvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcyx0PSJub25lIjtzd2l0Y2godGhpcy5fY29yZS5jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sKXtjYXNlIlgxMCI6dD0ieDEwIjticmVhaztjYXNlIlZUMjAwIjp0PSJ2dDIwMCI7YnJlYWs7Y2FzZSJEUkFHIjp0PSJkcmFnIjticmVhaztjYXNlIkFOWSI6dD0iYW55In1yZXR1cm57YXBwbGljYXRpb25DdXJzb3JLZXlzTW9kZTplLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cyxhcHBsaWNhdGlvbktleXBhZE1vZGU6ZS5hcHBsaWNhdGlvbktleXBhZCxicmFja2V0ZWRQYXN0ZU1vZGU6ZS5icmFja2V0ZWRQYXN0ZU1vZGUsaW5zZXJ0TW9kZTp0aGlzLl9jb3JlLmNvcmVTZXJ2aWNlLm1vZGVzLmluc2VydE1vZGUsbW91c2VUcmFja2luZ01vZGU6dCxvcmlnaW5Nb2RlOmUub3JpZ2luLHJldmVyc2VXcmFwYXJvdW5kTW9kZTplLnJldmVyc2VXcmFwYXJvdW5kLHNlbmRGb2N1c01vZGU6ZS5zZW5kRm9jdXMsd3JhcGFyb3VuZE1vZGU6ZS53cmFwYXJvdW5kfX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9wdGlvbnMiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcHVibGljT3B0aW9uc30sc2V0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMuX3B1YmxpY09wdGlvbnNbdF09ZVt0XX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5ibHVyPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5ibHVyKCl9LGUucHJvdG90eXBlLmZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5mb2N1cygpfSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl92ZXJpZnlJbnRlZ2VycyhlLHQpLHRoaXMuX2NvcmUucmVzaXplKGUsdCl9LGUucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oZSl7dGhpcy5fY29yZS5vcGVuKGUpfSxlLnByb3RvdHlwZS5hdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY29yZS5hdHRhY2hDdXN0b21LZXlFdmVudEhhbmRsZXIoZSl9LGUucHJvdG90eXBlLnJlZ2lzdGVyTGlua01hdGNoZXI9ZnVuY3Rpb24oZSx0LHIpe3JldHVybiB0aGlzLl9jaGVja1Byb3Bvc2VkQXBpKCksdGhpcy5fY29yZS5yZWdpc3RlckxpbmtNYXRjaGVyKGUsdCxyKX0sZS5wcm90b3R5cGUuZGVyZWdpc3RlckxpbmtNYXRjaGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcihlKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJMaW5rUHJvdmlkZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl9jb3JlLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKGUpfSxlLnByb3RvdHlwZS5yZWdpc3RlckNoYXJhY3RlckpvaW5lcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUucmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXIoZSl9LGUucHJvdG90eXBlLmRlcmVnaXN0ZXJDaGFyYWN0ZXJKb2luZXI9ZnVuY3Rpb24oZSl7dGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX2NvcmUuZGVyZWdpc3RlckNoYXJhY3RlckpvaW5lcihlKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJNYXJrZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWUmJihlPTApLHRoaXMuX2NoZWNrUHJvcG9zZWRBcGkoKSx0aGlzLl92ZXJpZnlJbnRlZ2VycyhlKSx0aGlzLl9jb3JlLmFkZE1hcmtlcihlKX0sZS5wcm90b3R5cGUucmVnaXN0ZXJEZWNvcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHIsaTtyZXR1cm4gdGhpcy5fY2hlY2tQcm9wb3NlZEFwaSgpLHRoaXMuX3ZlcmlmeVBvc2l0aXZlSW50ZWdlcnMobnVsbCE9PSh0PWUueCkmJnZvaWQgMCE9PXQ/dDowLG51bGwhPT0ocj1lLndpZHRoKSYmdm9pZCAwIT09cj9yOjAsbnVsbCE9PShpPWUuaGVpZ2h0KSYmdm9pZCAwIT09aT9pOjApLHRoaXMuX2NvcmUucmVnaXN0ZXJEZWNvcmF0aW9uKGUpfSxlLnByb3RvdHlwZS5hZGRNYXJrZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucmVnaXN0ZXJNYXJrZXIoZSl9LGUucHJvdG90eXBlLmhhc1NlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLmhhc1NlbGVjdGlvbigpfSxlLnByb3RvdHlwZS5zZWxlY3Q9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUsdCxyKSx0aGlzLl9jb3JlLnNlbGVjdChlLHQscil9LGUucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLmdldFNlbGVjdGlvbigpfSxlLnByb3RvdHlwZS5nZXRTZWxlY3Rpb25Qb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb3JlLmdldFNlbGVjdGlvblBvc2l0aW9uKCl9LGUucHJvdG90eXBlLmNsZWFyU2VsZWN0aW9uPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5jbGVhclNlbGVjdGlvbigpfSxlLnByb3RvdHlwZS5zZWxlY3RBbGw9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnNlbGVjdEFsbCgpfSxlLnByb3RvdHlwZS5zZWxlY3RMaW5lcz1mdW5jdGlvbihlLHQpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUsdCksdGhpcy5fY29yZS5zZWxlY3RMaW5lcyhlLHQpfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fYWRkb25NYW5hZ2VyLmRpc3Bvc2UoKSx0aGlzLl9jb3JlLmRpc3Bvc2UoKX0sZS5wcm90b3R5cGUuc2Nyb2xsTGluZXM9ZnVuY3Rpb24oZSl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5zY3JvbGxMaW5lcyhlKX0sZS5wcm90b3R5cGUuc2Nyb2xsUGFnZXM9ZnVuY3Rpb24oZSl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5zY3JvbGxQYWdlcyhlKX0sZS5wcm90b3R5cGUuc2Nyb2xsVG9Ub3A9ZnVuY3Rpb24oKXt0aGlzLl9jb3JlLnNjcm9sbFRvVG9wKCl9LGUucHJvdG90eXBlLnNjcm9sbFRvQm90dG9tPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5zY3JvbGxUb0JvdHRvbSgpfSxlLnByb3RvdHlwZS5zY3JvbGxUb0xpbmU9ZnVuY3Rpb24oZSl7dGhpcy5fdmVyaWZ5SW50ZWdlcnMoZSksdGhpcy5fY29yZS5zY3JvbGxUb0xpbmUoZSl9LGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5jbGVhcigpfSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlLHQpe3RoaXMuX2NvcmUud3JpdGUoZSx0KX0sZS5wcm90b3R5cGUud3JpdGVVdGY4PWZ1bmN0aW9uKGUsdCl7dGhpcy5fY29yZS53cml0ZShlLHQpfSxlLnByb3RvdHlwZS53cml0ZWxuPWZ1bmN0aW9uKGUsdCl7dGhpcy5fY29yZS53cml0ZShlKSx0aGlzLl9jb3JlLndyaXRlKCJcclxuIix0KX0sZS5wcm90b3R5cGUucGFzdGU9ZnVuY3Rpb24oZSl7dGhpcy5fY29yZS5wYXN0ZShlKX0sZS5wcm90b3R5cGUuZ2V0T3B0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb3JlLm9wdGlvbnNTZXJ2aWNlLmdldE9wdGlvbihlKX0sZS5wcm90b3R5cGUuc2V0T3B0aW9uPWZ1bmN0aW9uKGUsdCl7dGhpcy5fY2hlY2tSZWFkb25seU9wdGlvbnMoZSksdGhpcy5fY29yZS5vcHRpb25zU2VydmljZS5zZXRPcHRpb24oZSx0KX0sZS5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbihlLHQpe3RoaXMuX3ZlcmlmeUludGVnZXJzKGUsdCksdGhpcy5fY29yZS5yZWZyZXNoKGUsdCl9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fY29yZS5yZXNldCgpfSxlLnByb3RvdHlwZS5jbGVhclRleHR1cmVBdGxhcz1mdW5jdGlvbigpe3RoaXMuX2NvcmUuY2xlYXJUZXh0dXJlQXRsYXMoKX0sZS5wcm90b3R5cGUubG9hZEFkZG9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9hZGRvbk1hbmFnZXIubG9hZEFkZG9uKHRoaXMsZSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJzdHJpbmdzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3ZlcmlmeUludGVnZXJzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQscj1bXSxpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKylyW2ldPWFyZ3VtZW50c1tpXTt0cnl7Zm9yKHZhciBvPW4ocikscz1vLm5leHQoKTshcy5kb25lO3M9by5uZXh0KCkpe3ZhciBhPXMudmFsdWU7aWYoYT09PTEvMHx8aXNOYU4oYSl8fGElMSE9MCl0aHJvdyBuZXcgRXJyb3IoIlRoaXMgQVBJIG9ubHkgYWNjZXB0cyBpbnRlZ2VycyIpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtzJiYhcy5kb25lJiYodD1vLnJldHVybikmJnQuY2FsbChvKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSxlLnByb3RvdHlwZS5fdmVyaWZ5UG9zaXRpdmVJbnRlZ2Vycz1mdW5jdGlvbigpe2Zvcih2YXIgZSx0LHI9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpXT1hcmd1bWVudHNbaV07dHJ5e2Zvcih2YXIgbz1uKHIpLHM9by5uZXh0KCk7IXMuZG9uZTtzPW8ubmV4dCgpKXt2YXIgYT1zLnZhbHVlO2lmKGEmJihhPT09MS8wfHxpc05hTihhKXx8YSUxIT0wfHxhPDApKXRocm93IG5ldyBFcnJvcigiVGhpcyBBUEkgb25seSBhY2NlcHRzIHBvc2l0aXZlIGludGVnZXJzIil9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e3MmJiFzLmRvbmUmJih0PW8ucmV0dXJuKSYmdC5jYWxsKG8pfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19LGV9KCk7dC5UZXJtaW5hbD1mfSwxNTQ2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQmFzZVJlbmRlckxheWVyPXZvaWQgMDt2YXIgbj1yKDY0Myksbz1yKDg4MDMpLHM9cigxNDIwKSxhPXIoMzczNCksYz1yKDE3NTIpLGw9cig4MDU1KSxoPXIoOTYzMSksdT1yKDg5NzgpLGY9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyLGksbixvLHMsYSxjKXt0aGlzLl9jb250YWluZXI9ZSx0aGlzLl9hbHBoYT1pLHRoaXMuX2NvbG9ycz1uLHRoaXMuX3JlbmRlcmVySWQ9byx0aGlzLl9idWZmZXJTZXJ2aWNlPXMsdGhpcy5fb3B0aW9uc1NlcnZpY2U9YSx0aGlzLl9kZWNvcmF0aW9uU2VydmljZT1jLHRoaXMuX3NjYWxlZENoYXJXaWR0aD0wLHRoaXMuX3NjYWxlZENoYXJIZWlnaHQ9MCx0aGlzLl9zY2FsZWRDZWxsV2lkdGg9MCx0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0PTAsdGhpcy5fc2NhbGVkQ2hhckxlZnQ9MCx0aGlzLl9zY2FsZWRDaGFyVG9wPTAsdGhpcy5fY29sdW1uU2VsZWN0TW9kZT0hMSx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyPXtjaGFyczoiIixjb2RlOjAsYmc6MCxmZzowLGJvbGQ6ITEsZGltOiExLGl0YWxpYzohMX0sdGhpcy5fY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLHRoaXMuX2NhbnZhcy5jbGFzc0xpc3QuYWRkKCJ4dGVybS0iK3QrIi1sYXllciIpLHRoaXMuX2NhbnZhcy5zdHlsZS56SW5kZXg9ci50b1N0cmluZygpLHRoaXMuX2luaXRDYW52YXMoKSx0aGlzLl9jb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5fY2FudmFzKX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlOygwLGgucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQpKHRoaXMuX2NhbnZhcyksbnVsbD09PShlPXRoaXMuX2NoYXJBdGxhcyl8fHZvaWQgMD09PWV8fGUuZGlzcG9zZSgpfSxlLnByb3RvdHlwZS5faW5pdENhbnZhcz1mdW5jdGlvbigpe3RoaXMuX2N0eD0oMCxjLnRocm93SWZGYWxzeSkodGhpcy5fY2FudmFzLmdldENvbnRleHQoIjJkIix7YWxwaGE6dGhpcy5fYWxwaGF9KSksdGhpcy5fYWxwaGF8fHRoaXMuX2NsZWFyQWxsKCl9LGUucHJvdG90eXBlLm9uT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5vbkdyaWRDaGFuZ2VkPWZ1bmN0aW9uKGUsdCl7fSxlLnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPSExKSx0aGlzLl9zZWxlY3Rpb25TdGFydD1lLHRoaXMuX3NlbGVjdGlvbkVuZD10LHRoaXMuX2NvbHVtblNlbGVjdE1vZGU9cn0sZS5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKGUpe3RoaXMuX3JlZnJlc2hDaGFyQXRsYXMoZSl9LGUucHJvdG90eXBlLl9zZXRUcmFuc3BhcmVuY3k9ZnVuY3Rpb24oZSl7aWYoZSE9PXRoaXMuX2FscGhhKXt2YXIgdD10aGlzLl9jYW52YXM7dGhpcy5fYWxwaGE9ZSx0aGlzLl9jYW52YXM9dGhpcy5fY2FudmFzLmNsb25lTm9kZSgpLHRoaXMuX2luaXRDYW52YXMoKSx0aGlzLl9jb250YWluZXIucmVwbGFjZUNoaWxkKHRoaXMuX2NhbnZhcyx0KSx0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRoaXMuX2NvbG9ycyksdGhpcy5vbkdyaWRDaGFuZ2VkKDAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpfX0sZS5wcm90b3R5cGUuX3JlZnJlc2hDaGFyQXRsYXM9ZnVuY3Rpb24oZSl7dGhpcy5fc2NhbGVkQ2hhcldpZHRoPD0wJiZ0aGlzLl9zY2FsZWRDaGFySGVpZ2h0PD0wfHwodGhpcy5fY2hhckF0bGFzPSgwLHMuYWNxdWlyZUNoYXJBdGxhcykodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucyx0aGlzLl9yZW5kZXJlcklkLGUsdGhpcy5fc2NhbGVkQ2hhcldpZHRoLHRoaXMuX3NjYWxlZENoYXJIZWlnaHQpLHRoaXMuX2NoYXJBdGxhcy53YXJtVXAoKSl9LGUucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlKXt0aGlzLl9zY2FsZWRDZWxsV2lkdGg9ZS5zY2FsZWRDZWxsV2lkdGgsdGhpcy5fc2NhbGVkQ2VsbEhlaWdodD1lLnNjYWxlZENlbGxIZWlnaHQsdGhpcy5fc2NhbGVkQ2hhcldpZHRoPWUuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX3NjYWxlZENoYXJIZWlnaHQ9ZS5zY2FsZWRDaGFySGVpZ2h0LHRoaXMuX3NjYWxlZENoYXJMZWZ0PWUuc2NhbGVkQ2hhckxlZnQsdGhpcy5fc2NhbGVkQ2hhclRvcD1lLnNjYWxlZENoYXJUb3AsdGhpcy5fY2FudmFzLndpZHRoPWUuc2NhbGVkQ2FudmFzV2lkdGgsdGhpcy5fY2FudmFzLmhlaWdodD1lLnNjYWxlZENhbnZhc0hlaWdodCx0aGlzLl9jYW52YXMuc3R5bGUud2lkdGg9ZS5jYW52YXNXaWR0aCsicHgiLHRoaXMuX2NhbnZhcy5zdHlsZS5oZWlnaHQ9ZS5jYW52YXNIZWlnaHQrInB4Iix0aGlzLl9hbHBoYXx8dGhpcy5fY2xlYXJBbGwoKSx0aGlzLl9yZWZyZXNoQ2hhckF0bGFzKHRoaXMuX2NvbG9ycyl9LGUucHJvdG90eXBlLmNsZWFyVGV4dHVyZUF0bGFzPWZ1bmN0aW9uKCl7dmFyIGU7bnVsbD09PShlPXRoaXMuX2NoYXJBdGxhcyl8fHZvaWQgMD09PWV8fGUuY2xlYXIoKX0sZS5wcm90b3R5cGUuX2ZpbGxDZWxscz1mdW5jdGlvbihlLHQscixpKXt0aGlzLl9jdHguZmlsbFJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdCp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHIqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLGkqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCl9LGUucHJvdG90eXBlLl9maWxsTWlkZGxlTGluZUF0Q2VsbHM9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPTEpO3ZhciBpPU1hdGguY2VpbCguNSp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KTt0aGlzLl9jdHguZmlsbFJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsKHQrMSkqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodC1pLXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLHIqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKX0sZS5wcm90b3R5cGUuX2ZpbGxCb3R0b21MaW5lQXRDZWxscz1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9MSksdGhpcy5fY3R4LmZpbGxSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLCh0KzEpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQtd2luZG93LmRldmljZVBpeGVsUmF0aW8tMSxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyl9LGUucHJvdG90eXBlLl9maWxsTGVmdExpbmVBdENlbGw9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5maWxsUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx0KnRoaXMuX3NjYWxlZENlbGxIZWlnaHQsd2luZG93LmRldmljZVBpeGVsUmF0aW8qcix0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KX0sZS5wcm90b3R5cGUuX3N0cm9rZVJlY3RBdENlbGw9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy5fY3R4LmxpbmVXaWR0aD13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0aGlzLl9jdHguc3Ryb2tlUmVjdChlKnRoaXMuX3NjYWxlZENlbGxXaWR0aCt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby8yLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCt3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpby8yLHIqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLGkqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodC13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyl9LGUucHJvdG90eXBlLl9jbGVhckFsbD1mdW5jdGlvbigpe3RoaXMuX2FscGhhP3RoaXMuX2N0eC5jbGVhclJlY3QoMCwwLHRoaXMuX2NhbnZhcy53aWR0aCx0aGlzLl9jYW52YXMuaGVpZ2h0KToodGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3MsdGhpcy5fY3R4LmZpbGxSZWN0KDAsMCx0aGlzLl9jYW52YXMud2lkdGgsdGhpcy5fY2FudmFzLmhlaWdodCkpfSxlLnByb3RvdHlwZS5fY2xlYXJDZWxscz1mdW5jdGlvbihlLHQscixpKXt0aGlzLl9hbHBoYT90aGlzLl9jdHguY2xlYXJSZWN0KGUqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHQqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCxyKnRoaXMuX3NjYWxlZENlbGxXaWR0aCxpKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQpOih0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcyx0aGlzLl9jdHguZmlsbFJlY3QoZSp0aGlzLl9zY2FsZWRDZWxsV2lkdGgsdCp0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHIqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLGkqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCkpfSxlLnByb3RvdHlwZS5fZmlsbENoYXJUcnVlQ29sb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5mb250PXRoaXMuX2dldEZvbnQoITEsITEpLHRoaXMuX2N0eC50ZXh0QmFzZWxpbmU9by5URVhUX0JBU0VMSU5FLHRoaXMuX2NsaXBSb3cocik7dmFyIGk9ITE7ITEhPT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1c3RvbUdseXBocyYmKGk9KDAsdS50cnlEcmF3Q3VzdG9tQ2hhcikodGhpcy5fY3R4LGUuZ2V0Q2hhcnMoKSx0KnRoaXMuX3NjYWxlZENlbGxXaWR0aCxyKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQsdGhpcy5fc2NhbGVkQ2VsbFdpZHRoLHRoaXMuX3NjYWxlZENlbGxIZWlnaHQpKSxpfHx0aGlzLl9jdHguZmlsbFRleHQoZS5nZXRDaGFycygpLHQqdGhpcy5fc2NhbGVkQ2VsbFdpZHRoK3RoaXMuX3NjYWxlZENoYXJMZWZ0LHIqdGhpcy5fc2NhbGVkQ2VsbEhlaWdodCt0aGlzLl9zY2FsZWRDaGFyVG9wK3RoaXMuX3NjYWxlZENoYXJIZWlnaHQpfSxlLnByb3RvdHlwZS5fZHJhd0NoYXJzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgcyxhLGMsbD10aGlzLl9nZXRDb250cmFzdENvbG9yKGUsdCxyKTtpZihsfHxlLmlzRmdSR0IoKXx8ZS5pc0JnUkdCKCkpdGhpcy5fZHJhd1VuY2FjaGVkQ2hhcnMoZSx0LHIsbCk7ZWxzZXt2YXIgaCx1O2UuaXNJbnZlcnNlKCk/KGg9ZS5pc0JnRGVmYXVsdCgpP28uSU5WRVJURURfREVGQVVMVF9DT0xPUjplLmdldEJnQ29sb3IoKSx1PWUuaXNGZ0RlZmF1bHQoKT9vLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I6ZS5nZXRGZ0NvbG9yKCkpOih1PWUuaXNCZ0RlZmF1bHQoKT9uLkRFRkFVTFRfQ09MT1I6ZS5nZXRCZ0NvbG9yKCksaD1lLmlzRmdEZWZhdWx0KCk/bi5ERUZBVUxUX0NPTE9SOmUuZ2V0RmdDb2xvcigpKSxoKz10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZlLmlzQm9sZCgpJiZoPDg/ODowLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuY2hhcnM9ZS5nZXRDaGFycygpfHxuLldISVRFU1BBQ0VfQ0VMTF9DSEFSLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuY29kZT1lLmdldENvZGUoKXx8bi5XSElURVNQQUNFX0NFTExfQ09ERSx0aGlzLl9jdXJyZW50R2x5cGhJZGVudGlmaWVyLmJnPXUsdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5mZz1oLHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIuYm9sZD0hIWUuaXNCb2xkKCksdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5kaW09ISFlLmlzRGltKCksdGhpcy5fY3VycmVudEdseXBoSWRlbnRpZmllci5pdGFsaWM9ISFlLmlzSXRhbGljKCk7dmFyIGY9ITE7dHJ5e2Zvcih2YXIgXz1pKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmdldERlY29yYXRpb25zQXRDZWxsKHQscikpLGQ9Xy5uZXh0KCk7IWQuZG9uZTtkPV8ubmV4dCgpKXt2YXIgcD1kLnZhbHVlO2lmKHAuYmFja2dyb3VuZENvbG9yUkdCfHxwLmZvcmVncm91bmRDb2xvclJHQil7Zj0hMDticmVha319fWNhdGNoKGUpe3M9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2QmJiFkLmRvbmUmJihhPV8ucmV0dXJuKSYmYS5jYWxsKF8pfWZpbmFsbHl7aWYocyl0aHJvdyBzLmVycm9yfX0hZiYmKG51bGw9PT0oYz10aGlzLl9jaGFyQXRsYXMpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLmRyYXcodGhpcy5fY3R4LHRoaXMuX2N1cnJlbnRHbHlwaElkZW50aWZpZXIsdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgrdGhpcy5fc2NhbGVkQ2hhckxlZnQscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0K3RoaXMuX3NjYWxlZENoYXJUb3ApKXx8dGhpcy5fZHJhd1VuY2FjaGVkQ2hhcnMoZSx0LHIpfX0sZS5wcm90b3R5cGUuX2RyYXdVbmNhY2hlZENoYXJzPWZ1bmN0aW9uKGUsdCxyLGkpe2lmKHRoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZvbnQ9dGhpcy5fZ2V0Rm9udCghIWUuaXNCb2xkKCksISFlLmlzSXRhbGljKCkpLHRoaXMuX2N0eC50ZXh0QmFzZWxpbmU9by5URVhUX0JBU0VMSU5FLGUuaXNJbnZlcnNlKCkpaWYoaSl0aGlzLl9jdHguZmlsbFN0eWxlPWkuY3NzO2Vsc2UgaWYoZS5pc0JnRGVmYXVsdCgpKXRoaXMuX2N0eC5maWxsU3R5bGU9bC5jb2xvci5vcGFxdWUodGhpcy5fY29sb3JzLmJhY2tncm91bmQpLmNzcztlbHNlIGlmKGUuaXNCZ1JHQigpKXRoaXMuX2N0eC5maWxsU3R5bGU9InJnYigiK2EuQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0QmdDb2xvcigpKS5qb2luKCIsIikrIikiO2Vsc2V7dmFyIG49ZS5nZXRCZ0NvbG9yKCk7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmZS5pc0JvbGQoKSYmbjw4JiYobis9OCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYW5zaVtuXS5jc3N9ZWxzZSBpZihpKXRoaXMuX2N0eC5maWxsU3R5bGU9aS5jc3M7ZWxzZSBpZihlLmlzRmdEZWZhdWx0KCkpdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7ZWxzZSBpZihlLmlzRmdSR0IoKSl0aGlzLl9jdHguZmlsbFN0eWxlPSJyZ2IoIithLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEZnQ29sb3IoKSkuam9pbigiLCIpKyIpIjtlbHNle3ZhciBzPWUuZ2V0RmdDb2xvcigpO3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJnM8OCYmKHMrPTgpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmFuc2lbc10uY3NzfXRoaXMuX2NsaXBSb3cociksZS5pc0RpbSgpJiYodGhpcy5fY3R4Lmdsb2JhbEFscGhhPW8uRElNX09QQUNJVFkpO3ZhciBjPSExOyExIT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXN0b21HbHlwaHMmJihjPSgwLHUudHJ5RHJhd0N1c3RvbUNoYXIpKHRoaXMuX2N0eCxlLmdldENoYXJzKCksdCp0aGlzLl9zY2FsZWRDZWxsV2lkdGgscip0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0LHRoaXMuX3NjYWxlZENlbGxXaWR0aCx0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSksY3x8dGhpcy5fY3R4LmZpbGxUZXh0KGUuZ2V0Q2hhcnMoKSx0KnRoaXMuX3NjYWxlZENlbGxXaWR0aCt0aGlzLl9zY2FsZWRDaGFyTGVmdCxyKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQrdGhpcy5fc2NhbGVkQ2hhclRvcCt0aGlzLl9zY2FsZWRDaGFySGVpZ2h0KSx0aGlzLl9jdHgucmVzdG9yZSgpfSxlLnByb3RvdHlwZS5fY2xpcFJvdz1mdW5jdGlvbihlKXt0aGlzLl9jdHguYmVnaW5QYXRoKCksdGhpcy5fY3R4LnJlY3QoMCxlKnRoaXMuX3NjYWxlZENlbGxIZWlnaHQsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKnRoaXMuX3NjYWxlZENlbGxXaWR0aCx0aGlzLl9zY2FsZWRDZWxsSGVpZ2h0KSx0aGlzLl9jdHguY2xpcCgpfSxlLnByb3RvdHlwZS5fZ2V0Rm9udD1mdW5jdGlvbihlLHQpe3JldHVybih0PyJpdGFsaWMiOiIiKSsiICIrKGU/dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0Qm9sZDp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRXZWlnaHQpKyIgIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKyJweCAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udEZhbWlseX0sZS5wcm90b3R5cGUuX2dldENvbnRyYXN0Q29sb3I9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG8scyxhLGg9ITE7dHJ5e2Zvcih2YXIgdT1pKHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlLmdldERlY29yYXRpb25zQXRDZWxsKHQscikpLGY9dS5uZXh0KCk7IWYuZG9uZTtmPXUubmV4dCgpKXt2YXIgXz1mLnZhbHVlOyJ0b3AiIT09Xy5vcHRpb25zLmxheWVyJiZofHwoXy5iYWNrZ3JvdW5kQ29sb3JSR0ImJihzPV8uYmFja2dyb3VuZENvbG9yUkdCLnJnYmEpLF8uZm9yZWdyb3VuZENvbG9yUkdCJiYoYT1fLmZvcmVncm91bmRDb2xvclJHQi5yZ2JhKSxoPSJ0b3AiPT09Xy5vcHRpb25zLmxheWVyKX19Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7ZiYmIWYuZG9uZSYmKG89dS5yZXR1cm4pJiZvLmNhbGwodSl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fWlmKGh8fHRoaXMuX2NvbG9ycy5zZWxlY3Rpb25Gb3JlZ3JvdW5kJiZ0aGlzLl9pc0NlbGxJblNlbGVjdGlvbih0LHIpJiYoYT10aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZC5yZ2JhKSxzfHxhfHwxIT09dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyYmISgwLGMuZXhjbHVkZUZyb21Db250cmFzdFJhdGlvRGVtYW5kcykoZS5nZXRDb2RlKCkpKXtpZighcyYmIWEpe3ZhciBkPXRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLmdldENvbG9yKGUuYmcsZS5mZyk7aWYodm9pZCAwIT09ZClyZXR1cm4gZHx8dm9pZCAwfXZhciBwPWUuZ2V0RmdDb2xvcigpLHY9ZS5nZXRGZ0NvbG9yTW9kZSgpLHk9ZS5nZXRCZ0NvbG9yKCksZz1lLmdldEJnQ29sb3JNb2RlKCksbT0hIWUuaXNJbnZlcnNlKCksYj0hIWUuaXNJbnZlcnNlKCk7aWYobSl7dmFyIFM9cDtwPXkseT1TO3ZhciBDPXY7dj1nLGc9Q312YXIgdz10aGlzLl9yZXNvbHZlQmFja2dyb3VuZFJnYmEodm9pZCAwIT09cz81MDMzMTY0ODpnLG51bGwhPXM/czp5LG0pLEw9dGhpcy5fcmVzb2x2ZUZvcmVncm91bmRSZ2JhKHYscCxtLGIpLEU9bC5yZ2JhLmVuc3VyZUNvbnRyYXN0UmF0aW8obnVsbCE9cz9zOncsbnVsbCE9YT9hOkwsdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyk7aWYoIUUpe2lmKCFhKXJldHVybiB2b2lkIHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKGUuYmcsZS5mZyxudWxsKTtFPWF9dmFyIHg9e2NzczpsLmNoYW5uZWxzLnRvQ3NzKEU+PjI0JjI1NSxFPj4xNiYyNTUsRT4+OCYyNTUpLHJnYmE6RX07cmV0dXJuIHN8fGF8fHRoaXMuX2NvbG9ycy5jb250cmFzdENhY2hlLnNldENvbG9yKGUuYmcsZS5mZyx4KSx4fX0sZS5wcm90b3R5cGUuX3Jlc29sdmVCYWNrZ3JvdW5kUmdiYT1mdW5jdGlvbihlLHQscil7c3dpdGNoKGUpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gdGhpcy5fY29sb3JzLmFuc2lbdF0ucmdiYTtjYXNlIDUwMzMxNjQ4OnJldHVybiB0PDw4O2RlZmF1bHQ6cmV0dXJuIHI/dGhpcy5fY29sb3JzLmZvcmVncm91bmQucmdiYTp0aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5yZ2JhfX0sZS5wcm90b3R5cGUuX3Jlc29sdmVGb3JlZ3JvdW5kUmdiYT1mdW5jdGlvbihlLHQscixpKXtzd2l0Y2goZSl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiB0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiZpJiZ0PDgmJih0Kz04KSx0aGlzLl9jb2xvcnMuYW5zaVt0XS5yZ2JhO2Nhc2UgNTAzMzE2NDg6cmV0dXJuIHQ8PDg7ZGVmYXVsdDpyZXR1cm4gcj90aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5yZ2JhOnRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLnJnYmF9fSxlLnByb3RvdHlwZS5faXNDZWxsSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9zZWxlY3Rpb25TdGFydCxpPXRoaXMuX3NlbGVjdGlvbkVuZDtyZXR1cm4hKCFyfHwhaSkmJih0aGlzLl9jb2x1bW5TZWxlY3RNb2RlP2U+PXJbMF0mJnQ+PXJbMV0mJmU8aVswXSYmdDxpWzFdOnQ+clsxXSYmdDxpWzFdfHxyWzFdPT09aVsxXSYmdD09PXJbMV0mJmU+PXJbMF0mJmU8aVswXXx8clsxXTxpWzFdJiZ0PT09aVsxXSYmZTxpWzBdfHxyWzFdPGlbMV0mJnQ9PT1yWzFdJiZlPj1yWzBdKX0sZX0oKTt0LkJhc2VSZW5kZXJMYXllcj1mfSwyNTEyOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkN1cnNvclJlbmRlckxheWVyPXZvaWQgMDt2YXIgYT1yKDE1NDYpLGM9cig1MTEpLGw9cigyNTg1KSxoPXIoNDcyNSksdT02MDAsZj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsbCxoLHUpe3ZhciBmPWUuY2FsbCh0aGlzLHQsImN1cnNvciIsciwhMCxpLG4scyxhLHUpfHx0aGlzO3JldHVybiBmLl9vblJlcXVlc3RSZWRyYXc9byxmLl9jb3JlU2VydmljZT1sLGYuX2NvcmVCcm93c2VyU2VydmljZT1oLGYuX2NlbGw9bmV3IGMuQ2VsbERhdGEsZi5fc3RhdGU9e3g6MCx5OjAsaXNGb2N1c2VkOiExLHN0eWxlOiIiLHdpZHRoOjB9LGYuX2N1cnNvclJlbmRlcmVycz17YmFyOmYuX3JlbmRlckJhckN1cnNvci5iaW5kKGYpLGJsb2NrOmYuX3JlbmRlckJsb2NrQ3Vyc29yLmJpbmQoZiksdW5kZXJsaW5lOmYuX3JlbmRlclVuZGVybGluZUN1cnNvci5iaW5kKGYpfSxmfXJldHVybiBuKHQsZSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyJiYodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIuZGlzcG9zZSgpLHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyPXZvaWQgMCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0KSx0aGlzLl9zdGF0ZT17eDowLHk6MCxpc0ZvY3VzZWQ6ITEsc3R5bGU6IiIsd2lkdGg6MH19LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIGU7dGhpcy5fY2xlYXJDdXJzb3IoKSxudWxsPT09KGU9dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpfHx2b2lkIDA9PT1lfHxlLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpLHRoaXMub25PcHRpb25zQ2hhbmdlZCgpfSx0LnByb3RvdHlwZS5vbkJsdXI9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpfHx2b2lkIDA9PT1lfHxlLnBhdXNlKCksdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoe3N0YXJ0OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksZW5kOnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnl9KX0sdC5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe3ZhciBlO251bGw9PT0oZT10aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlcil8fHZvaWQgMD09PWV8fGUucmVzdW1lKCksdGhpcy5fb25SZXF1ZXN0UmVkcmF3LmZpcmUoe3N0YXJ0OnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksZW5kOnRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnl9KX0sdC5wcm90b3R5cGUub25PcHRpb25zQ2hhbmdlZD1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpczt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rP3RoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyfHwodGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXI9bmV3IF8odGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmlzRm9jdXNlZCwoZnVuY3Rpb24oKXt0Ll9yZW5kZXIoITApfSkpKToobnVsbD09PShlPXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyKXx8dm9pZCAwPT09ZXx8ZS5kaXNwb3NlKCksdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXI9dm9pZCAwKSx0aGlzLl9vblJlcXVlc3RSZWRyYXcuZmlyZSh7c3RhcnQ6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSxlbmQ6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueX0pfSx0LnByb3RvdHlwZS5vbkN1cnNvck1vdmU9ZnVuY3Rpb24oKXt2YXIgZTtudWxsPT09KGU9dGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXIpfHx2b2lkIDA9PT1lfHxlLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpfSx0LnByb3RvdHlwZS5vbkdyaWRDaGFuZ2VkPWZ1bmN0aW9uKGUsdCl7IXRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyfHx0aGlzLl9jdXJzb3JCbGlua1N0YXRlTWFuYWdlci5pc1BhdXNlZD90aGlzLl9yZW5kZXIoITEpOnRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpfSx0LnByb3RvdHlwZS5fcmVuZGVyPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySW5pdGlhbGl6ZWQmJiF0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbil7dmFyIHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2UrdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueSxyPXQtdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3A7aWYocjwwfHxyPj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpdGhpcy5fY2xlYXJDdXJzb3IoKTtlbHNle3ZhciBpPU1hdGgubWluKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpO2lmKHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldCh0KS5sb2FkQ2VsbChpLHRoaXMuX2NlbGwpLHZvaWQgMCE9PXRoaXMuX2NlbGwuY29udGVudCl7aWYoIXRoaXMuX2NvcmVCcm93c2VyU2VydmljZS5pc0ZvY3VzZWQpe3RoaXMuX2NsZWFyQ3Vyc29yKCksdGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzO3ZhciBuPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yU3R5bGU7cmV0dXJuIG4mJiJibG9jayIhPT1uP3RoaXMuX2N1cnNvclJlbmRlcmVyc1tuXShpLHIsdGhpcy5fY2VsbCk6dGhpcy5fcmVuZGVyQmx1ckN1cnNvcihpLHIsdGhpcy5fY2VsbCksdGhpcy5fY3R4LnJlc3RvcmUoKSx0aGlzLl9zdGF0ZS54PWksdGhpcy5fc3RhdGUueT1yLHRoaXMuX3N0YXRlLmlzRm9jdXNlZD0hMSx0aGlzLl9zdGF0ZS5zdHlsZT1uLHZvaWQodGhpcy5fc3RhdGUud2lkdGg9dGhpcy5fY2VsbC5nZXRXaWR0aCgpKX1pZighdGhpcy5fY3Vyc29yQmxpbmtTdGF0ZU1hbmFnZXJ8fHRoaXMuX2N1cnNvckJsaW5rU3RhdGVNYW5hZ2VyLmlzQ3Vyc29yVmlzaWJsZSl7aWYodGhpcy5fc3RhdGUpe2lmKHRoaXMuX3N0YXRlLng9PT1pJiZ0aGlzLl9zdGF0ZS55PT09ciYmdGhpcy5fc3RhdGUuaXNGb2N1c2VkPT09dGhpcy5fY29yZUJyb3dzZXJTZXJ2aWNlLmlzRm9jdXNlZCYmdGhpcy5fc3RhdGUuc3R5bGU9PT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlJiZ0aGlzLl9zdGF0ZS53aWR0aD09PXRoaXMuX2NlbGwuZ2V0V2lkdGgoKSlyZXR1cm47dGhpcy5fY2xlYXJDdXJzb3IoKX10aGlzLl9jdHguc2F2ZSgpLHRoaXMuX2N1cnNvclJlbmRlcmVyc1t0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlfHwiYmxvY2siXShpLHIsdGhpcy5fY2VsbCksdGhpcy5fY3R4LnJlc3RvcmUoKSx0aGlzLl9zdGF0ZS54PWksdGhpcy5fc3RhdGUueT1yLHRoaXMuX3N0YXRlLmlzRm9jdXNlZD0hMSx0aGlzLl9zdGF0ZS5zdHlsZT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlLHRoaXMuX3N0YXRlLndpZHRoPXRoaXMuX2NlbGwuZ2V0V2lkdGgoKX1lbHNlIHRoaXMuX2NsZWFyQ3Vyc29yKCl9fX1lbHNlIHRoaXMuX2NsZWFyQ3Vyc29yKCl9LHQucHJvdG90eXBlLl9jbGVhckN1cnNvcj1mdW5jdGlvbigpe3RoaXMuX3N0YXRlJiYod2luZG93LmRldmljZVBpeGVsUmF0aW88MT90aGlzLl9jbGVhckFsbCgpOnRoaXMuX2NsZWFyQ2VsbHModGhpcy5fc3RhdGUueCx0aGlzLl9zdGF0ZS55LHRoaXMuX3N0YXRlLndpZHRoLDEpLHRoaXMuX3N0YXRlPXt4OjAseTowLGlzRm9jdXNlZDohMSxzdHlsZToiIix3aWR0aDowfSl9LHQucHJvdG90eXBlLl9yZW5kZXJCYXJDdXJzb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzcyx0aGlzLl9maWxsTGVmdExpbmVBdENlbGwoZSx0LHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yV2lkdGgpLHRoaXMuX2N0eC5yZXN0b3JlKCl9LHQucHJvdG90eXBlLl9yZW5kZXJCbG9ja0N1cnNvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5jdXJzb3IuY3NzLHRoaXMuX2ZpbGxDZWxscyhlLHQsci5nZXRXaWR0aCgpLDEpLHRoaXMuX2N0eC5maWxsU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvckFjY2VudC5jc3MsdGhpcy5fZmlsbENoYXJUcnVlQ29sb3IocixlLHQpLHRoaXMuX2N0eC5yZXN0b3JlKCl9LHQucHJvdG90eXBlLl9yZW5kZXJVbmRlcmxpbmVDdXJzb3I9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2N0eC5zYXZlKCksdGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuY3Vyc29yLmNzcyx0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoZSx0KSx0aGlzLl9jdHgucmVzdG9yZSgpfSx0LnByb3RvdHlwZS5fcmVuZGVyQmx1ckN1cnNvcj1mdW5jdGlvbihlLHQscil7dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguc3Ryb2tlU3R5bGU9dGhpcy5fY29sb3JzLmN1cnNvci5jc3MsdGhpcy5fc3Ryb2tlUmVjdEF0Q2VsbChlLHQsci5nZXRXaWR0aCgpLDEpLHRoaXMuX2N0eC5yZXN0b3JlKCl9LG8oW3MoNSxsLklCdWZmZXJTZXJ2aWNlKSxzKDYsbC5JT3B0aW9uc1NlcnZpY2UpLHMoNyxsLklDb3JlU2VydmljZSkscyg4LGguSUNvcmVCcm93c2VyU2VydmljZSkscyg5LGwuSURlY29yYXRpb25TZXJ2aWNlKV0sdCl9KGEuQmFzZVJlbmRlckxheWVyKTt0LkN1cnNvclJlbmRlckxheWVyPWY7dmFyIF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7dGhpcy5fcmVuZGVyQ2FsbGJhY2s9dCx0aGlzLmlzQ3Vyc29yVmlzaWJsZT0hMCxlJiZ0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc1BhdXNlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiEodGhpcy5fYmxpbmtTdGFydFRpbWVvdXR8fHRoaXMuX2JsaW5rSW50ZXJ2YWwpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9ibGlua0ludGVydmFsJiYod2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5fYmxpbmtJbnRlcnZhbCksdGhpcy5fYmxpbmtJbnRlcnZhbD12b2lkIDApLHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0JiYod2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9ibGlua1N0YXJ0VGltZW91dCksdGhpcy5fYmxpbmtTdGFydFRpbWVvdXQ9dm9pZCAwKSx0aGlzLl9hbmltYXRpb25GcmFtZSYmKHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZSksdGhpcy5fYW5pbWF0aW9uRnJhbWU9dm9pZCAwKX0sZS5wcm90b3R5cGUucmVzdGFydEJsaW5rQW5pbWF0aW9uPWZ1bmN0aW9uKCl7dmFyIGU9dGhpczt0aGlzLmlzUGF1c2VkfHwodGhpcy5fYW5pbWF0aW9uVGltZVJlc3RhcnRlZD1EYXRlLm5vdygpLHRoaXMuaXNDdXJzb3JWaXNpYmxlPSEwLHRoaXMuX2FuaW1hdGlvbkZyYW1lfHwodGhpcy5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXtlLl9yZW5kZXJDYWxsYmFjaygpLGUuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKSkpfSxlLnByb3RvdHlwZS5fcmVzdGFydEludGVydmFsPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dm9pZCAwPT09ZSYmKGU9dSksdGhpcy5fYmxpbmtJbnRlcnZhbCYmKHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpLHRoaXMuX2JsaW5rSW50ZXJ2YWw9dm9pZCAwKSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dD13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtpZih0Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkKXt2YXIgZT11LShEYXRlLm5vdygpLXQuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO2lmKHQuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQ9dm9pZCAwLGU+MClyZXR1cm4gdm9pZCB0Ll9yZXN0YXJ0SW50ZXJ2YWwoZSl9dC5pc0N1cnNvclZpc2libGU9ITEsdC5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXt0Ll9yZW5kZXJDYWxsYmFjaygpLHQuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKSx0Ll9ibGlua0ludGVydmFsPXdpbmRvdy5zZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtpZih0Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkKXt2YXIgZT11LShEYXRlLm5vdygpLXQuX2FuaW1hdGlvblRpbWVSZXN0YXJ0ZWQpO3JldHVybiB0Ll9hbmltYXRpb25UaW1lUmVzdGFydGVkPXZvaWQgMCx2b2lkIHQuX3Jlc3RhcnRJbnRlcnZhbChlKX10LmlzQ3Vyc29yVmlzaWJsZT0hdC5pc0N1cnNvclZpc2libGUsdC5fYW5pbWF0aW9uRnJhbWU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoZnVuY3Rpb24oKXt0Ll9yZW5kZXJDYWxsYmFjaygpLHQuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMH0pKX0pLHUpfSksZSl9LGUucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5pc0N1cnNvclZpc2libGU9ITAsdGhpcy5fYmxpbmtJbnRlcnZhbCYmKHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuX2JsaW5rSW50ZXJ2YWwpLHRoaXMuX2JsaW5rSW50ZXJ2YWw9dm9pZCAwKSx0aGlzLl9ibGlua1N0YXJ0VGltZW91dCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYmxpbmtTdGFydFRpbWVvdXQpLHRoaXMuX2JsaW5rU3RhcnRUaW1lb3V0PXZvaWQgMCksdGhpcy5fYW5pbWF0aW9uRnJhbWUmJih3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWUpLHRoaXMuX2FuaW1hdGlvbkZyYW1lPXZvaWQgMCl9LGUucHJvdG90eXBlLnJlc3VtZT1mdW5jdGlvbigpe3RoaXMucGF1c2UoKSx0aGlzLl9hbmltYXRpb25UaW1lUmVzdGFydGVkPXZvaWQgMCx0aGlzLl9yZXN0YXJ0SW50ZXJ2YWwoKSx0aGlzLnJlc3RhcnRCbGlua0FuaW1hdGlvbigpfSxlfSgpfSw4OTc4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuLG8scyxhLGMsbCxoLHUsZixfLGQscCx2LHksZyxtLGIsUyxDLHcsTCxFLHgsUixrLE0sQSxPLEQsVCxCLFAsSSxILGosRixXLFUscSxOLHosSyxHLFYsWCxaLFksSiwkLFEsZWUsdGUscmUsaWUsbmUsb2Usc2UsYWUsY2UsbGUsaGUsdWUsZmUsX2UsZGUscGUsdmUseWUsZ2UsbWUsYmUsU2UsQ2Usd2UsTGUsRWUseGUsUmUsa2UsTWUsQWUsT2UsRGUsVGUsQmUsUGUsSWUsSGUsamUsRmUsV2UsVWUscWUsTmUsemUsS2UsR2UsVmUsWGUsWmUsWWUsSmUsJGUsUWUsZXQsdHQscnQsaXQsbnQsb3Qsc3QsYXQsY3QsbHQsaHQsdXQsZnQsX3QsZHQscHQsdnQseXQsZ3QsbXQsYnQsU3QsQ3Qsd3Q9dGhpcyYmdGhpcy5fX3JlYWR8fGZ1bmN0aW9uKGUsdCl7dmFyIHI9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCFyKXJldHVybiBlO3ZhciBpLG4sbz1yLmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09dHx8dC0tID4wKSYmIShpPW8ubmV4dCgpKS5kb25lOylzLnB1c2goaS52YWx1ZSl9Y2F0Y2goZSl7bj17ZXJyb3I6ZX19ZmluYWxseXt0cnl7aSYmIWkuZG9uZSYmKHI9by5yZXR1cm4pJiZyLmNhbGwobyl9ZmluYWxseXtpZihuKXRocm93IG4uZXJyb3J9fXJldHVybiBzfSxMdD10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQudHJ5RHJhd0N1c3RvbUNoYXI9dC5wb3dlcmxpbmVEZWZpbml0aW9ucz10LmJveERyYXdpbmdEZWZpbml0aW9ucz10LmJsb2NrRWxlbWVudERlZmluaXRpb25zPXZvaWQgMDt2YXIgRXQ9cigxNzUyKTt0LmJsb2NrRWxlbWVudERlZmluaXRpb25zPXsi4paAIjpbe3g6MCx5OjAsdzo4LGg6NH1dLCLiloEiOlt7eDowLHk6Nyx3OjgsaDoxfV0sIuKWgiI6W3t4OjAseTo2LHc6OCxoOjJ9XSwi4paDIjpbe3g6MCx5OjUsdzo4LGg6M31dLCLiloQiOlt7eDowLHk6NCx3OjgsaDo0fV0sIuKWhSI6W3t4OjAseTozLHc6OCxoOjV9XSwi4paGIjpbe3g6MCx5OjIsdzo4LGg6Nn1dLCLilociOlt7eDowLHk6MSx3OjgsaDo3fV0sIuKWiCI6W3t4OjAseTowLHc6OCxoOjh9XSwi4paJIjpbe3g6MCx5OjAsdzo3LGg6OH1dLCLilooiOlt7eDowLHk6MCx3OjYsaDo4fV0sIuKWiyI6W3t4OjAseTowLHc6NSxoOjh9XSwi4paMIjpbe3g6MCx5OjAsdzo0LGg6OH1dLCLilo0iOlt7eDowLHk6MCx3OjMsaDo4fV0sIuKWjiI6W3t4OjAseTowLHc6MixoOjh9XSwi4paPIjpbe3g6MCx5OjAsdzoxLGg6OH1dLCLilpAiOlt7eDo0LHk6MCx3OjQsaDo4fV0sIuKWlCI6W3t4OjAseTowLHc6OSxoOjF9XSwi4paVIjpbe3g6Nyx5OjAsdzoxLGg6OH1dLCLilpYiOlt7eDowLHk6NCx3OjQsaDo0fV0sIuKWlyI6W3t4OjQseTo0LHc6NCxoOjR9XSwi4paYIjpbe3g6MCx5OjAsdzo0LGg6NH1dLCLilpkiOlt7eDowLHk6MCx3OjQsaDo4fSx7eDowLHk6NCx3OjgsaDo0fV0sIuKWmiI6W3t4OjAseTowLHc6NCxoOjR9LHt4OjQseTo0LHc6NCxoOjR9XSwi4pabIjpbe3g6MCx5OjAsdzo0LGg6OH0se3g6MCx5OjAsdzo0LGg6OH1dLCLilpwiOlt7eDowLHk6MCx3OjgsaDo0fSx7eDo0LHk6MCx3OjQsaDo4fV0sIuKWnSI6W3t4OjQseTowLHc6NCxoOjR9XSwi4paeIjpbe3g6NCx5OjAsdzo0LGg6NH0se3g6MCx5OjQsdzo0LGg6NH1dLCLilp8iOlt7eDo0LHk6MCx3OjQsaDo4fSx7eDowLHk6NCx3OjgsaDo0fV0sIvCfrbAiOlt7eDoxLHk6MCx3OjEsaDo4fV0sIvCfrbEiOlt7eDoyLHk6MCx3OjEsaDo4fV0sIvCfrbIiOlt7eDozLHk6MCx3OjEsaDo4fV0sIvCfrbMiOlt7eDo0LHk6MCx3OjEsaDo4fV0sIvCfrbQiOlt7eDo1LHk6MCx3OjEsaDo4fV0sIvCfrbUiOlt7eDo2LHk6MCx3OjEsaDo4fV0sIvCfrbYiOlt7eDowLHk6MSx3OjgsaDoxfV0sIvCfrbciOlt7eDowLHk6Mix3OjgsaDoxfV0sIvCfrbgiOlt7eDowLHk6Myx3OjgsaDoxfV0sIvCfrbkiOlt7eDowLHk6NCx3OjgsaDoxfV0sIvCfrboiOlt7eDowLHk6NSx3OjgsaDoxfV0sIvCfrbsiOlt7eDowLHk6Nix3OjgsaDoxfV0sIvCfrbwiOlt7eDowLHk6MCx3OjEsaDo4fSx7eDowLHk6Nyx3OjgsaDoxfV0sIvCfrb0iOlt7eDowLHk6MCx3OjEsaDo4fSx7eDowLHk6MCx3OjgsaDoxfV0sIvCfrb4iOlt7eDo3LHk6MCx3OjEsaDo4fSx7eDowLHk6MCx3OjgsaDoxfV0sIvCfrb8iOlt7eDo3LHk6MCx3OjEsaDo4fSx7eDowLHk6Nyx3OjgsaDoxfV0sIvCfroAiOlt7eDowLHk6MCx3OjgsaDoxfSx7eDowLHk6Nyx3OjgsaDoxfV0sIvCfroEiOlt7eDowLHk6MCx3OjgsaDoxfSx7eDowLHk6Mix3OjgsaDoxfSx7eDowLHk6NCx3OjgsaDoxfSx7eDowLHk6Nyx3OjgsaDoxfV0sIvCfroIiOlt7eDowLHk6MCx3OjgsaDoyfV0sIvCfroMiOlt7eDowLHk6MCx3OjgsaDozfV0sIvCfroQiOlt7eDowLHk6MCx3OjgsaDo1fV0sIvCfroUiOlt7eDowLHk6MCx3OjgsaDo2fV0sIvCfroYiOlt7eDowLHk6MCx3OjgsaDo3fV0sIvCfrociOlt7eDo2LHk6MCx3OjIsaDo4fV0sIvCfrogiOlt7eDo1LHk6MCx3OjMsaDo4fV0sIvCfrokiOlt7eDozLHk6MCx3OjUsaDo4fV0sIvCfrooiOlt7eDoyLHk6MCx3OjYsaDo4fV0sIvCfrosiOlt7eDoxLHk6MCx3OjcsaDo4fV0sIvCfrpUiOlt7eDowLHk6MCx3OjIsaDoyfSx7eDo0LHk6MCx3OjIsaDoyfSx7eDoyLHk6Mix3OjIsaDoyfSx7eDo2LHk6Mix3OjIsaDoyfSx7eDowLHk6NCx3OjIsaDoyfSx7eDo0LHk6NCx3OjIsaDoyfSx7eDoyLHk6Nix3OjIsaDoyfSx7eDo2LHk6Nix3OjIsaDoyfV0sIvCfrpYiOlt7eDoyLHk6MCx3OjIsaDoyfSx7eDo2LHk6MCx3OjIsaDoyfSx7eDowLHk6Mix3OjIsaDoyfSx7eDo0LHk6Mix3OjIsaDoyfSx7eDoyLHk6NCx3OjIsaDoyfSx7eDo2LHk6NCx3OjIsaDoyfSx7eDowLHk6Nix3OjIsaDoyfSx7eDo0LHk6Nix3OjIsaDoyfV0sIvCfrpciOlt7eDowLHk6Mix3OjgsaDoyfSx7eDowLHk6Nix3OjgsaDoyfV19O3ZhciB4dD17IuKWkSI6W1sxLDAsMCwwXSxbMCwwLDAsMF0sWzAsMCwxLDBdLFswLDAsMCwwXV0sIuKWkiI6W1sxLDBdLFswLDBdLFswLDFdLFswLDBdXSwi4paTIjpbWzAsMV0sWzEsMV0sWzEsMF0sWzEsMV1dfTt0LmJveERyYXdpbmdEZWZpbml0aW9ucz17IuKUgCI6KGk9e30saVsxXT0iTTAsLjUgTDEsLjUiLGkpLCLilIEiOihuPXt9LG5bM109Ik0wLC41IEwxLC41IixuKSwi4pSCIjoobz17fSxvWzFdPSJNLjUsMCBMLjUsMSIsbyksIuKUgyI6KHM9e30sc1szXT0iTS41LDAgTC41LDEiLHMpLCLilIwiOihhPXt9LGFbMV09Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLGEpLCLilI8iOihjPXt9LGNbM109Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLGMpLCLilJAiOihsPXt9LGxbMV09Ik0wLC41IEwuNSwuNSBMLjUsMSIsbCksIuKUkyI6KGg9e30saFszXT0iTTAsLjUgTC41LC41IEwuNSwxIixoKSwi4pSUIjoodT17fSx1WzFdPSJNLjUsMCBMLjUsLjUgTDEsLjUiLHUpLCLilJciOihmPXt9LGZbM109Ik0uNSwwIEwuNSwuNSBMMSwuNSIsZiksIuKUmCI6KF89e30sX1sxXT0iTS41LDAgTC41LC41IEwwLC41IixfKSwi4pSbIjooZD17fSxkWzNdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLGQpLCLilJwiOihwPXt9LHBbMV09Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMSwuNSIscCksIuKUoyI6KHY9e30sdlszXT0iTS41LDAgTC41LDEgTS41LC41IEwxLC41Iix2KSwi4pSkIjooeT17fSx5WzFdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDAsLjUiLHkpLCLilKsiOihnPXt9LGdbM109Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMCwuNSIsZyksIuKUrCI6KG09e30sbVsxXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwxIixtKSwi4pSzIjooYj17fSxiWzNdPSJNMCwuNSBMMSwuNSBNLjUsLjUgTC41LDEiLGIpLCLilLQiOihTPXt9LFNbMV09Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMCIsUyksIuKUuyI6KEM9e30sQ1szXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwwIixDKSwi4pS8Ijoodz17fSx3WzFdPSJNMCwuNSBMMSwuNSBNLjUsMCBMLjUsMSIsdyksIuKViyI6KEw9e30sTFszXT0iTTAsLjUgTDEsLjUgTS41LDAgTC41LDEiLEwpLCLilbQiOihFPXt9LEVbMV09Ik0uNSwuNSBMMCwuNSIsRSksIuKVuCI6KHg9e30seFszXT0iTS41LC41IEwwLC41Iix4KSwi4pW1IjooUj17fSxSWzFdPSJNLjUsLjUgTC41LDAiLFIpLCLilbkiOihrPXt9LGtbM109Ik0uNSwuNSBMLjUsMCIsayksIuKVtiI6KE09e30sTVsxXT0iTS41LC41IEwxLC41IixNKSwi4pW6IjooQT17fSxBWzNdPSJNLjUsLjUgTDEsLjUiLEEpLCLilbciOihPPXt9LE9bMV09Ik0uNSwuNSBMLjUsMSIsTyksIuKVuyI6KEQ9e30sRFszXT0iTS41LC41IEwuNSwxIixEKSwi4pWQIjooVD17fSxUWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNMCwiKyguNSt0KSsiIEwxLCIrKC41K3QpfSxUKSwi4pWRIjooQj17fSxCWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0iKyguNS1lKSsiLDAgTCIrKC41LWUpKyIsMSBNIisoLjUrZSkrIiwwIEwiKyguNStlKSsiLDEifSxCKSwi4pWSIjooUD17fSxQWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwxIEwuNSwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTS41LCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LFApLCLilZMiOihJPXt9LElbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41LWUpKyIsMSBMIisoLjUtZSkrIiwuNSBMMSwuNSBNIisoLjUrZSkrIiwuNSBMIisoLjUrZSkrIiwxIn0sSSksIuKVlCI6KEg9e30sSFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMSwiKyguNS10KSsiIEwiKyguNS1lKSsiLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsMSBNMSwiKyguNSt0KSsiIEwiKyguNStlKSsiLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsMSJ9LEgpLCLilZUiOihqPXt9LGpbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMLjUsIisoLjUtdCkrIiBMLjUsMSBNMCwiKyguNSt0KSsiIEwuNSwiKyguNSt0KX0saiksIuKVliI6KEY9e30sRlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUrZSkrIiwxIEwiKyguNStlKSsiLC41IEwwLC41IE0iKyguNS1lKSsiLC41IEwiKyguNS1lKSsiLDEifSxGKSwi4pWXIjooVz17fSxXWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwxIE0wLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwxIn0sVyksIuKVmCI6KFU9e30sVVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMCBMLjUsIisoLjUrdCkrIiBMMSwiKyguNSt0KSsiIE0uNSwiKyguNS10KSsiIEwxLCIrKC41LXQpfSxVKSwi4pWZIjoocT17fSxxWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0xLC41IEwiKyguNS1lKSsiLC41IEwiKyguNS1lKSsiLDAgTSIrKC41K2UpKyIsLjUgTCIrKC41K2UpKyIsMCJ9LHEpLCLilZoiOihOPXt9LE5bMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTEsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwiKyguNS10KSsiIEwiKyguNStlKSsiLDAgTTEsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwiKyguNSt0KSsiIEwiKyguNS1lKSsiLDAifSxOKSwi4pWbIjooej17fSx6WzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41K3QpKyIgTC41LCIrKC41K3QpKyIgTC41LDAgTTAsIisoLjUtdCkrIiBMLjUsIisoLjUtdCl9LHopLCLilZwiOihLPXt9LEtbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsLjUgTCIrKC41K2UpKyIsLjUgTCIrKC41K2UpKyIsMCBNIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwwIn0sSyksIuKVnSI6KEc9e30sR1sxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNS10KSsiIEwiKyguNS1lKSsiLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsMCBNMCwiKyguNSt0KSsiIEwiKyguNStlKSsiLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsMCJ9LEcpLCLilZ4iOihWPXt9LFZbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LDEgTS41LCIrKC41LXQpKyIgTDEsIisoLjUtdCkrIiBNLjUsIisoLjUrdCkrIiBMMSwiKyguNSt0KX0sViksIuKVnyI6KFg9e30sWFsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUtZSkrIiwwIEwiKyguNS1lKSsiLDEgTSIrKC41K2UpKyIsMCBMIisoLjUrZSkrIiwxIE0iKyguNStlKSsiLC41IEwxLC41In0sWCksIuKVoCI6KFo9e30sWlsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNIisoLjUtZSkrIiwwIEwiKyguNS1lKSsiLDEgTTEsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDEgTTEsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwiKyguNS10KSsiIEwiKyguNStlKSsiLDAifSxaKSwi4pWhIjooWT17fSxZWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0uNSwwIEwuNSwxIE0wLCIrKC41LXQpKyIgTC41LCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMLjUsIisoLjUrdCl9LFkpLCLilaIiOihKPXt9LEpbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsLjUgTCIrKC41LWUpKyIsLjUgTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSJ9LEopLCLilaMiOigkPXt9LCRbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTSIrKC41K2UpKyIsMCBMIisoLjUrZSkrIiwxIE0wLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwxIE0wLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwwIn0sJCksIuKVpCI6KFE9e30sUVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMMSwiKyguNSt0KSsiIE0uNSwiKyguNSt0KSsiIEwuNSwxIn0sUSksIuKVpSI6KGVlPXt9LGVlWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLC41IEwxLC41IE0iKyguNS1lKSsiLC41IEwiKyguNS1lKSsiLDEgTSIrKC41K2UpKyIsLjUgTCIrKC41K2UpKyIsMSJ9LGVlKSwi4pWmIjoodGU9e30sdGVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTCIrKC41LWUpKyIsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwxIE0xLCIrKC41K3QpKyIgTCIrKC41K2UpKyIsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwxIn0sdGUpLCLilaciOihyZT17fSxyZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNLjUsMCBMLjUsIisoLjUtdCkrIiBNMCwiKyguNS10KSsiIEwxLCIrKC41LXQpKyIgTTAsIisoLjUrdCkrIiBMMSwiKyguNSt0KX0scmUpLCLilagiOihpZT17fSxpZVsxXT1mdW5jdGlvbihlLHQpe3JldHVybiJNMCwuNSBMMSwuNSBNIisoLjUtZSkrIiwuNSBMIisoLjUtZSkrIiwwIE0iKyguNStlKSsiLC41IEwiKyguNStlKSsiLDAifSxpZSksIuKVqSI6KG5lPXt9LG5lWzFdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIk0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCkrIiBNMCwiKyguNS10KSsiIEwiKyguNS1lKSsiLCIrKC41LXQpKyIgTCIrKC41LWUpKyIsMCBNMSwiKyguNS10KSsiIEwiKyguNStlKSsiLCIrKC41LXQpKyIgTCIrKC41K2UpKyIsMCJ9LG5lKSwi4pWqIjoob2U9e30sb2VbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTS41LDAgTC41LDEgTTAsIisoLjUtdCkrIiBMMSwiKyguNS10KSsiIE0wLCIrKC41K3QpKyIgTDEsIisoLjUrdCl9LG9lKSwi4pWrIjooc2U9e30sc2VbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsLjUgTDEsLjUgTSIrKC41LWUpKyIsMCBMIisoLjUtZSkrIiwxIE0iKyguNStlKSsiLDAgTCIrKC41K2UpKyIsMSJ9LHNlKSwi4pWsIjooYWU9e30sYWVbMV09ZnVuY3Rpb24oZSx0KXtyZXR1cm4iTTAsIisoLjUrdCkrIiBMIisoLjUtZSkrIiwiKyguNSt0KSsiIEwiKyguNS1lKSsiLDEgTTEsIisoLjUrdCkrIiBMIisoLjUrZSkrIiwiKyguNSt0KSsiIEwiKyguNStlKSsiLDEgTTAsIisoLjUtdCkrIiBMIisoLjUtZSkrIiwiKyguNS10KSsiIEwiKyguNS1lKSsiLDAgTTEsIisoLjUtdCkrIiBMIisoLjUrZSkrIiwiKyguNS10KSsiIEwiKyguNStlKSsiLDAifSxhZSksIuKVsSI6KGNlPXt9LGNlWzFdPSJNMSwwIEwwLDEiLGNlKSwi4pWyIjoobGU9e30sbGVbMV09Ik0wLDAgTDEsMSIsbGUpLCLilbMiOihoZT17fSxoZVsxXT0iTTEsMCBMMCwxIE0wLDAgTDEsMSIsaGUpLCLilbwiOih1ZT17fSx1ZVsxXT0iTS41LC41IEwwLC41Iix1ZVszXT0iTS41LC41IEwxLC41Iix1ZSksIuKVvSI6KGZlPXt9LGZlWzFdPSJNLjUsLjUgTC41LDAiLGZlWzNdPSJNLjUsLjUgTC41LDEiLGZlKSwi4pW+IjooX2U9e30sX2VbMV09Ik0uNSwuNSBMMSwuNSIsX2VbM109Ik0uNSwuNSBMMCwuNSIsX2UpLCLilb8iOihkZT17fSxkZVsxXT0iTS41LC41IEwuNSwxIixkZVszXT0iTS41LC41IEwuNSwwIixkZSksIuKUjSI6KHBlPXt9LHBlWzFdPSJNLjUsLjUgTC41LDEiLHBlWzNdPSJNLjUsLjUgTDEsLjUiLHBlKSwi4pSOIjoodmU9e30sdmVbMV09Ik0uNSwuNSBMMSwuNSIsdmVbM109Ik0uNSwuNSBMLjUsMSIsdmUpLCLilJEiOih5ZT17fSx5ZVsxXT0iTS41LC41IEwuNSwxIix5ZVszXT0iTS41LC41IEwwLC41Iix5ZSksIuKUkiI6KGdlPXt9LGdlWzFdPSJNLjUsLjUgTDAsLjUiLGdlWzNdPSJNLjUsLjUgTC41LDEiLGdlKSwi4pSVIjoobWU9e30sbWVbMV09Ik0uNSwuNSBMLjUsMCIsbWVbM109Ik0uNSwuNSBMMSwuNSIsbWUpLCLilJYiOihiZT17fSxiZVsxXT0iTS41LC41IEwxLC41IixiZVszXT0iTS41LC41IEwuNSwwIixiZSksIuKUmSI6KFNlPXt9LFNlWzFdPSJNLjUsLjUgTC41LDAiLFNlWzNdPSJNLjUsLjUgTDAsLjUiLFNlKSwi4pSaIjooQ2U9e30sQ2VbMV09Ik0uNSwuNSBMMCwuNSIsQ2VbM109Ik0uNSwuNSBMLjUsMCIsQ2UpLCLilJ0iOih3ZT17fSx3ZVsxXT0iTS41LDAgTC41LDEiLHdlWzNdPSJNLjUsLjUgTDEsLjUiLHdlKSwi4pSeIjooTGU9e30sTGVbMV09Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLExlWzNdPSJNLjUsLjUgTC41LDAiLExlKSwi4pSfIjooRWU9e30sRWVbMV09Ik0uNSwwIEwuNSwuNSBMMSwuNSIsRWVbM109Ik0uNSwuNSBMLjUsMSIsRWUpLCLilKAiOih4ZT17fSx4ZVsxXT0iTS41LC41IEwxLC41Iix4ZVszXT0iTS41LDAgTC41LDEiLHhlKSwi4pShIjooUmU9e30sUmVbMV09Ik0uNSwuNSBMLjUsMSIsUmVbM109Ik0uNSwwIEwuNSwuNSBMMSwuNSIsUmUpLCLilKIiOihrZT17fSxrZVsxXT0iTS41LC41IEwuNSwwIixrZVszXT0iTTAuNSwxIEwuNSwuNSBMMSwuNSIsa2UpLCLilKUiOihNZT17fSxNZVsxXT0iTS41LDAgTC41LDEiLE1lWzNdPSJNLjUsLjUgTDAsLjUiLE1lKSwi4pSmIjooQWU9e30sQWVbMV09Ik0wLC41IEwuNSwuNSBMLjUsMSIsQWVbM109Ik0uNSwuNSBMLjUsMCIsQWUpLCLilKciOihPZT17fSxPZVsxXT0iTS41LDAgTC41LC41IEwwLC41IixPZVszXT0iTS41LC41IEwuNSwxIixPZSksIuKUqCI6KERlPXt9LERlWzFdPSJNLjUsLjUgTDAsLjUiLERlWzNdPSJNLjUsMCBMLjUsMSIsRGUpLCLilKkiOihUZT17fSxUZVsxXT0iTS41LC41IEwuNSwxIixUZVszXT0iTS41LDAgTC41LC41IEwwLC41IixUZSksIuKUqiI6KEJlPXt9LEJlWzFdPSJNLjUsLjUgTC41LDAiLEJlWzNdPSJNMCwuNSBMLjUsLjUgTC41LDEiLEJlKSwi4pStIjooUGU9e30sUGVbMV09Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLFBlWzNdPSJNLjUsLjUgTDAsLjUiLFBlKSwi4pSuIjooSWU9e30sSWVbMV09Ik0wLC41IEwuNSwuNSBMLjUsMSIsSWVbM109Ik0uNSwuNSBMMSwuNSIsSWUpLCLilK8iOihIZT17fSxIZVsxXT0iTS41LC41IEwuNSwxIixIZVszXT0iTTAsLjUgTDEsLjUiLEhlKSwi4pSwIjooamU9e30samVbMV09Ik0wLC41IEwxLC41IixqZVszXT0iTS41LC41IEwuNSwxIixqZSksIuKUsSI6KEZlPXt9LEZlWzFdPSJNLjUsLjUgTDEsLjUiLEZlWzNdPSJNMCwuNSBMLjUsLjUgTC41LDEiLEZlKSwi4pSyIjooV2U9e30sV2VbMV09Ik0uNSwuNSBMMCwuNSIsV2VbM109Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLFdlKSwi4pS1IjooVWU9e30sVWVbMV09Ik0uNSwwIEwuNSwuNSBMMSwuNSIsVWVbM109Ik0uNSwuNSBMMCwuNSIsVWUpLCLilLYiOihxZT17fSxxZVsxXT0iTS41LDAgTC41LC41IEwwLC41IixxZVszXT0iTS41LC41IEwxLC41IixxZSksIuKUtyI6KE5lPXt9LE5lWzFdPSJNLjUsLjUgTC41LDAiLE5lWzNdPSJNMCwuNSBMMSwuNSIsTmUpLCLilLgiOih6ZT17fSx6ZVsxXT0iTTAsLjUgTDEsLjUiLHplWzNdPSJNLjUsLjUgTC41LDAiLHplKSwi4pS5IjooS2U9e30sS2VbMV09Ik0uNSwuNSBMMSwuNSIsS2VbM109Ik0uNSwwIEwuNSwuNSBMMCwuNSIsS2UpLCLilLoiOihHZT17fSxHZVsxXT0iTS41LC41IEwwLC41IixHZVszXT0iTS41LDAgTC41LC41IEwxLC41IixHZSksIuKUvSI6KFZlPXt9LFZlWzFdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDEsLjUiLFZlWzNdPSJNLjUsLjUgTDAsLjUiLFZlKSwi4pS+IjooWGU9e30sWGVbMV09Ik0uNSwwIEwuNSwxIE0uNSwuNSBMMCwuNSIsWGVbM109Ik0uNSwuNSBMMSwuNSIsWGUpLCLilL8iOihaZT17fSxaZVsxXT0iTS41LDAgTC41LDEiLFplWzNdPSJNMCwuNSBMMSwuNSIsWmUpLCLilYAiOihZZT17fSxZZVsxXT0iTTAsLjUgTDEsLjUgTS41LC41IEwuNSwxIixZZVszXT0iTS41LC41IEwuNSwwIixZZSksIuKVgSI6KEplPXt9LEplWzFdPSJNLjUsLjUgTC41LDAgTTAsLjUgTDEsLjUiLEplWzNdPSJNLjUsLjUgTC41LDEiLEplKSwi4pWCIjooJGU9e30sJGVbMV09Ik0wLC41IEwxLC41IiwkZVszXT0iTS41LDAgTC41LDEiLCRlKSwi4pWDIjooUWU9e30sUWVbMV09Ik0wLjUsMSBMLjUsLjUgTDEsLjUiLFFlWzNdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLFFlKSwi4pWEIjooZXQ9e30sZXRbMV09Ik0wLC41IEwuNSwuNSBMLjUsMSIsZXRbM109Ik0uNSwwIEwuNSwuNSBMMSwuNSIsZXQpLCLilYUiOih0dD17fSx0dFsxXT0iTS41LDAgTC41LC41IEwxLC41Iix0dFszXT0iTTAsLjUgTC41LC41IEwuNSwxIix0dCksIuKVhiI6KHJ0PXt9LHJ0WzFdPSJNLjUsMCBMLjUsLjUgTDAsLjUiLHJ0WzNdPSJNMC41LDEgTC41LC41IEwxLC41IixydCksIuKVhyI6KGl0PXt9LGl0WzFdPSJNLjUsLjUgTC41LDEiLGl0WzNdPSJNLjUsLjUgTC41LDAgTTAsLjUgTDEsLjUiLGl0KSwi4pWIIjoobnQ9e30sbnRbMV09Ik0uNSwuNSBMLjUsMCIsbnRbM109Ik0wLC41IEwxLC41IE0uNSwuNSBMLjUsMSIsbnQpLCLilYkiOihvdD17fSxvdFsxXT0iTS41LC41IEwxLC41IixvdFszXT0iTS41LDAgTC41LDEgTS41LC41IEwwLC41IixvdCksIuKViiI6KHN0PXt9LHN0WzFdPSJNLjUsLjUgTDAsLjUiLHN0WzNdPSJNLjUsMCBMLjUsMSBNLjUsLjUgTDEsLjUiLHN0KSwi4pWMIjooYXQ9e30sYXRbMV09Ik0uMSwuNSBMLjQsLjUgTS42LC41IEwuOSwuNSIsYXQpLCLilY0iOihjdD17fSxjdFszXT0iTS4xLC41IEwuNCwuNSBNLjYsLjUgTC45LC41IixjdCksIuKUhCI6KGx0PXt9LGx0WzFdPSJNLjA2NjcsLjUgTC4yNjY3LC41IE0uNCwuNSBMLjYsLjUgTS43MzMzLC41IEwuOTMzMywuNSIsbHQpLCLilIUiOihodD17fSxodFszXT0iTS4wNjY3LC41IEwuMjY2NywuNSBNLjQsLjUgTC42LC41IE0uNzMzMywuNSBMLjkzMzMsLjUiLGh0KSwi4pSIIjoodXQ9e30sdXRbMV09Ik0uMDUsLjUgTC4yLC41IE0uMywuNSBMLjQ1LC41IE0uNTUsLjUgTC43LC41IE0uOCwuNSBMLjk1LC41Iix1dCksIuKUiSI6KGZ0PXt9LGZ0WzNdPSJNLjA1LC41IEwuMiwuNSBNLjMsLjUgTC40NSwuNSBNLjU1LC41IEwuNywuNSBNLjgsLjUgTC45NSwuNSIsZnQpLCLilY4iOihfdD17fSxfdFsxXT0iTS41LC4xIEwuNSwuNCBNLjUsLjYgTC41LC45IixfdCksIuKVjyI6KGR0PXt9LGR0WzNdPSJNLjUsLjEgTC41LC40IE0uNSwuNiBMLjUsLjkiLGR0KSwi4pSGIjoocHQ9e30scHRbMV09Ik0uNSwuMDY2NyBMLjUsLjI2NjcgTS41LC40IEwuNSwuNiBNLjUsLjczMzMgTC41LC45MzMzIixwdCksIuKUhyI6KHZ0PXt9LHZ0WzNdPSJNLjUsLjA2NjcgTC41LC4yNjY3IE0uNSwuNCBMLjUsLjYgTS41LC43MzMzIEwuNSwuOTMzMyIsdnQpLCLilIoiOih5dD17fSx5dFsxXT0iTS41LC4wNSBMLjUsLjIgTS41LC4zIEwuNSwuNDUgTC41LC41NSBNLjUsLjcgTC41LC45NSIseXQpLCLilIsiOihndD17fSxndFszXT0iTS41LC4wNSBMLjUsLjIgTS41LC4zIEwuNSwuNDUgTC41LC41NSBNLjUsLjcgTC41LC45NSIsZ3QpLCLila0iOihtdD17fSxtdFsxXT0iQy41LDEsLjUsLjUsMSwuNSIsbXQpLCLila4iOihidD17fSxidFsxXT0iQy41LDEsLjUsLjUsMCwuNSIsYnQpLCLila8iOihTdD17fSxTdFsxXT0iQy41LDAsLjUsLjUsMCwuNSIsU3QpLCLilbAiOihDdD17fSxDdFsxXT0iQy41LDAsLjUsLjUsMSwuNSIsQ3QpfSx0LnBvd2VybGluZURlZmluaXRpb25zPXsi7oKwIjp7ZDoiTTAsMCBMMSwuNSBMMCwxIix0eXBlOjB9LCLugrEiOntkOiJNMCwwIEwxLC41IEwwLDEiLHR5cGU6MSxob3Jpem9udGFsUGFkZGluZzouNX0sIu6CsiI6e2Q6Ik0xLDAgTDAsLjUgTDEsMSIsdHlwZTowfSwi7oKzIjp7ZDoiTTEsMCBMMCwuNSBMMSwxIix0eXBlOjEsaG9yaXpvbnRhbFBhZGRpbmc6LjV9fSx0LnRyeURyYXdDdXN0b21DaGFyPWZ1bmN0aW9uKGUscixpLG4sbyxzKXt2YXIgYT10LmJsb2NrRWxlbWVudERlZmluaXRpb25zW3JdO2lmKGEpcmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGksbixvKXtmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl7dmFyIGE9dFtzXSxjPW4vOCxsPW8vODtlLmZpbGxSZWN0KHIrYS54KmMsaSthLnkqbCxhLncqYyxhLmgqbCl9fShlLGEsaSxuLG8scyksITA7dmFyIGM9eHRbcl07aWYoYylyZXR1cm4gZnVuY3Rpb24oZSx0LHIsaSxuLG8pe3ZhciBzLGE9UnQuZ2V0KHQpO2F8fChhPW5ldyBNYXAsUnQuc2V0KHQsYSkpO3ZhciBjPWUuZmlsbFN0eWxlO2lmKCJzdHJpbmciIT10eXBlb2YgYyl0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZmlsbFN0eWxlIHR5cGUgIicrYysnIicpO3ZhciBsPWEuZ2V0KGMpO2lmKCFsKXt2YXIgaD10WzBdLmxlbmd0aCx1PXQubGVuZ3RoLGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7Zi53aWR0aD1oLGYuaGVpZ2h0PXU7dmFyIF89KDAsRXQudGhyb3dJZkZhbHN5KShmLmdldENvbnRleHQoIjJkIikpLGQ9bmV3IEltYWdlRGF0YShoLHUpLHA9dm9pZCAwLHY9dm9pZCAwLHk9dm9pZCAwLGc9dm9pZCAwO2lmKGMuc3RhcnRzV2l0aCgiIyIpKXA9cGFyc2VJbnQoYy5zbGljZSgxLDMpLDE2KSx2PXBhcnNlSW50KGMuc2xpY2UoMyw1KSwxNikseT1wYXJzZUludChjLnNsaWNlKDUsNyksMTYpLGc9Yy5sZW5ndGg+NyYmcGFyc2VJbnQoYy5zbGljZSg3LDkpLDE2KXx8MTtlbHNle2lmKCFjLnN0YXJ0c1dpdGgoInJnYmEiKSl0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZmlsbFN0eWxlIGNvbG9yIGZvcm1hdCAiJytjKyciIHdoZW4gZHJhd2luZyBwYXR0ZXJuIGdseXBoJyk7cD0ocz13dChjLnN1YnN0cmluZyg1LGMubGVuZ3RoLTEpLnNwbGl0KCIsIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gcGFyc2VGbG9hdChlKX0pKSw0KSlbMF0sdj1zWzFdLHk9c1syXSxnPXNbM119Zm9yKHZhciBtPTA7bTx1O20rKylmb3IodmFyIGI9MDtiPGg7YisrKWQuZGF0YVs0KihtKmgrYildPXAsZC5kYXRhWzQqKG0qaCtiKSsxXT12LGQuZGF0YVs0KihtKmgrYikrMl09eSxkLmRhdGFbNCoobSpoK2IpKzNdPXRbbV1bYl0qKDI1NSpnKTtfLnB1dEltYWdlRGF0YShkLDAsMCksbD0oMCxFdC50aHJvd0lmRmFsc3kpKGUuY3JlYXRlUGF0dGVybihmLG51bGwpKSxhLnNldChjLGwpfWUuZmlsbFN0eWxlPWwsZS5maWxsUmVjdChyLGksbixvKX0oZSxjLGksbixvLHMpLCEwO3ZhciBsPXQuYm94RHJhd2luZ0RlZmluaXRpb25zW3JdO2lmKGwpcmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGksbixvKXt2YXIgcyxhLGMsbDtlLnN0cm9rZVN0eWxlPWUuZmlsbFN0eWxlO3RyeXtmb3IodmFyIGg9THQoT2JqZWN0LmVudHJpZXModCkpLHU9aC5uZXh0KCk7IXUuZG9uZTt1PWgubmV4dCgpKXt2YXIgZj13dCh1LnZhbHVlLDIpLF89ZlswXSxkPWZbMV07ZS5iZWdpblBhdGgoKSxlLmxpbmVXaWR0aD13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbypOdW1iZXIucGFyc2VJbnQoXyk7dmFyIHA9dm9pZCAwO3A9ImZ1bmN0aW9uIj09dHlwZW9mIGQ/ZCguMTUsLjE1L28qbik6ZDt0cnl7Zm9yKHZhciB2PShjPXZvaWQgMCxMdChwLnNwbGl0KCIgIikpKSx5PXYubmV4dCgpOyF5LmRvbmU7eT12Lm5leHQoKSl7dmFyIGc9eS52YWx1ZSxtPWdbMF0sYj1NdFttXTtpZihiKXt2YXIgUz1nLnN1YnN0cmluZygxKS5zcGxpdCgiLCIpO1NbMF0mJlNbMV0mJmIoZSxBdChTLG4sbyxyLGkpKX1lbHNlIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGRyYXdpbmcgaW5zdHJ1Y3Rpb25zIGZvciAiJyttKyciJyl9fWNhdGNoKGUpe2M9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e3kmJiF5LmRvbmUmJihsPXYucmV0dXJuKSYmbC5jYWxsKHYpfWZpbmFsbHl7aWYoYyl0aHJvdyBjLmVycm9yfX1lLnN0cm9rZSgpLGUuY2xvc2VQYXRoKCl9fWNhdGNoKGUpe3M9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e3UmJiF1LmRvbmUmJihhPWgucmV0dXJuKSYmYS5jYWxsKGgpfWZpbmFsbHl7aWYocyl0aHJvdyBzLmVycm9yfX19KGUsbCxpLG4sbyxzKSwhMDt2YXIgaD10LnBvd2VybGluZURlZmluaXRpb25zW3JdO3JldHVybiEhaCYmKGZ1bmN0aW9uKGUsdCxyLGksbixvKXt2YXIgcyxhO2UuYmVnaW5QYXRoKCksZS5saW5lV2lkdGg9d2luZG93LmRldmljZVBpeGVsUmF0aW87dHJ5e2Zvcih2YXIgYz1MdCh0LmQuc3BsaXQoIiAiKSksbD1jLm5leHQoKTshbC5kb25lO2w9Yy5uZXh0KCkpe3ZhciBoPWwudmFsdWUsdT1oWzBdLGY9TXRbdV07aWYoZil7dmFyIF89aC5zdWJzdHJpbmcoMSkuc3BsaXQoIiwiKTtfWzBdJiZfWzFdJiZmKGUsQXQoXyxuLG8scixpLHQuaG9yaXpvbnRhbFBhZGRpbmcpKX1lbHNlIGNvbnNvbGUuZXJyb3IoJ0NvdWxkIG5vdCBmaW5kIGRyYXdpbmcgaW5zdHJ1Y3Rpb25zIGZvciAiJyt1KyciJyl9fWNhdGNoKGUpe3M9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2wmJiFsLmRvbmUmJihhPWMucmV0dXJuKSYmYS5jYWxsKGMpfWZpbmFsbHl7aWYocyl0aHJvdyBzLmVycm9yfX0xPT09dC50eXBlPyhlLnN0cm9rZVN0eWxlPWUuZmlsbFN0eWxlLGUuc3Ryb2tlKCkpOmUuZmlsbCgpLGUuY2xvc2VQYXRoKCl9KGUsaCxpLG4sbyxzKSwhMCl9O3ZhciBSdD1uZXcgTWFwO2Z1bmN0aW9uIGt0KGUsdCxyKXtyZXR1cm4gdm9pZCAwPT09ciYmKHI9MCksTWF0aC5tYXgoTWF0aC5taW4oZSx0KSxyKX12YXIgTXQ9e0M6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5iZXppZXJDdXJ2ZVRvKHRbMF0sdFsxXSx0WzJdLHRbM10sdFs0XSx0WzVdKX0sTDpmdW5jdGlvbihlLHQpe3JldHVybiBlLmxpbmVUbyh0WzBdLHRbMV0pfSxNOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubW92ZVRvKHRbMF0sdFsxXSl9fTtmdW5jdGlvbiBBdChlLHQscixpLG4sbyl7dm9pZCAwPT09byYmKG89MCk7dmFyIHM9ZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBwYXJzZUZsb2F0KGUpfHxwYXJzZUludChlKX0pKTtpZihzLmxlbmd0aDwyKXRocm93IG5ldyBFcnJvcigiVG9vIGZldyBhcmd1bWVudHMgZm9yIGluc3RydWN0aW9uIik7Zm9yKHZhciBhPTA7YTxzLmxlbmd0aDthKz0yKXNbYV0qPXQtMipvKndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvLDAhPT1zW2FdJiYoc1thXT1rdChNYXRoLnJvdW5kKHNbYV0rLjUpLS41LHQsMCkpLHNbYV0rPWkrbyp3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztmb3IodmFyIGM9MTtjPHMubGVuZ3RoO2MrPTIpc1tjXSo9ciwwIT09c1tjXSYmKHNbY109a3QoTWF0aC5yb3VuZChzW2NdKy41KS0uNSxyLDApKSxzW2NdKz1uO3JldHVybiBzfX0sMzcwMDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkdyaWRDYWNoZT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5jYWNoZT1bXX1yZXR1cm4gZS5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTA7cjxlO3IrKyl7dGhpcy5jYWNoZS5sZW5ndGg8PXImJnRoaXMuY2FjaGUucHVzaChbXSk7Zm9yKHZhciBpPXRoaXMuY2FjaGVbcl0ubGVuZ3RoO2k8dDtpKyspdGhpcy5jYWNoZVtyXS5wdXNoKHZvaWQgMCk7dGhpcy5jYWNoZVtyXS5sZW5ndGg9dH10aGlzLmNhY2hlLmxlbmd0aD1lfSxlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe2Zvcih2YXIgZT0wO2U8dGhpcy5jYWNoZS5sZW5ndGg7ZSsrKWZvcih2YXIgdD0wO3Q8dGhpcy5jYWNoZVtlXS5sZW5ndGg7dCsrKXRoaXMuY2FjaGVbZV1bdF09dm9pZCAwfSxlfSgpO3QuR3JpZENhY2hlPXJ9LDUwOTg6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTGlua1JlbmRlckxheWVyPXZvaWQgMDt2YXIgYT1yKDE1NDYpLGM9cig4ODAzKSxsPXIoMjA0MCksaD1yKDI1ODUpLHU9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGMsbCl7dmFyIGg9ZS5jYWxsKHRoaXMsdCwibGluayIsciwhMCxpLG4sYSxjLGwpfHx0aGlzO3JldHVybiBvLm9uU2hvd0xpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9vblNob3dMaW5rVW5kZXJsaW5lKGUpfSkpLG8ub25IaWRlTGlua1VuZGVybGluZSgoZnVuY3Rpb24oZSl7cmV0dXJuIGguX29uSGlkZUxpbmtVbmRlcmxpbmUoZSl9KSkscy5vblNob3dMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gaC5fb25TaG93TGlua1VuZGVybGluZShlKX0pKSxzLm9uSGlkZUxpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBoLl9vbkhpZGVMaW5rVW5kZXJsaW5lKGUpfSkpLGh9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0KSx0aGlzLl9zdGF0ZT12b2lkIDB9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJDdXJyZW50TGluaygpfSx0LnByb3RvdHlwZS5fY2xlYXJDdXJyZW50TGluaz1mdW5jdGlvbigpe2lmKHRoaXMuX3N0YXRlKXt0aGlzLl9jbGVhckNlbGxzKHRoaXMuX3N0YXRlLngxLHRoaXMuX3N0YXRlLnkxLHRoaXMuX3N0YXRlLmNvbHMtdGhpcy5fc3RhdGUueDEsMSk7dmFyIGU9dGhpcy5fc3RhdGUueTItdGhpcy5fc3RhdGUueTEtMTtlPjAmJnRoaXMuX2NsZWFyQ2VsbHMoMCx0aGlzLl9zdGF0ZS55MSsxLHRoaXMuX3N0YXRlLmNvbHMsZSksdGhpcy5fY2xlYXJDZWxscygwLHRoaXMuX3N0YXRlLnkyLHRoaXMuX3N0YXRlLngyLDEpLHRoaXMuX3N0YXRlPXZvaWQgMH19LHQucHJvdG90eXBlLl9vblNob3dMaW5rVW5kZXJsaW5lPWZ1bmN0aW9uKGUpe2lmKGUuZmc9PT1jLklOVkVSVEVEX0RFRkFVTFRfQ09MT1I/dGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuYmFja2dyb3VuZC5jc3M6ZS5mZyYmKDAsbC5pczI1NkNvbG9yKShlLmZnKT90aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5hbnNpW2UuZmddLmNzczp0aGlzLl9jdHguZmlsbFN0eWxlPXRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcyxlLnkxPT09ZS55Mil0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoZS54MSxlLnkxLGUueDItZS54MSk7ZWxzZXt0aGlzLl9maWxsQm90dG9tTGluZUF0Q2VsbHMoZS54MSxlLnkxLGUuY29scy1lLngxKTtmb3IodmFyIHQ9ZS55MSsxO3Q8ZS55Mjt0KyspdGhpcy5fZmlsbEJvdHRvbUxpbmVBdENlbGxzKDAsdCxlLmNvbHMpO3RoaXMuX2ZpbGxCb3R0b21MaW5lQXRDZWxscygwLGUueTIsZS54Mil9dGhpcy5fc3RhdGU9ZX0sdC5wcm90b3R5cGUuX29uSGlkZUxpbmtVbmRlcmxpbmU9ZnVuY3Rpb24oZSl7dGhpcy5fY2xlYXJDdXJyZW50TGluaygpfSxvKFtzKDYsaC5JQnVmZmVyU2VydmljZSkscyg3LGguSU9wdGlvbnNTZXJ2aWNlKSxzKDgsaC5JRGVjb3JhdGlvblNlcnZpY2UpXSx0KX0oYS5CYXNlUmVuZGVyTGF5ZXIpO3QuTGlua1JlbmRlckxheWVyPXV9LDM1MjU6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUmVuZGVyZXI9dm9pZCAwO3ZhciBjPXIoOTU5NiksbD1yKDQxNDkpLGg9cigyNTEyKSx1PXIoNTA5OCksZj1yKDg0NCksXz1yKDQ3MjUpLGQ9cigyNTg1KSxwPXIoMTQyMCksdj1yKDg0NjApLHk9MSxnPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSxmKXt2YXIgXz1lLmNhbGwodGhpcyl8fHRoaXM7Xy5fY29sb3JzPXQsXy5fc2NyZWVuRWxlbWVudD1yLF8uX2J1ZmZlclNlcnZpY2U9cyxfLl9jaGFyU2l6ZVNlcnZpY2U9YSxfLl9vcHRpb25zU2VydmljZT1mLF8uX2lkPXkrKyxfLl9vblJlcXVlc3RSZWRyYXc9bmV3IHYuRXZlbnRFbWl0dGVyO3ZhciBkPV8uX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3k7cmV0dXJuIF8uX3JlbmRlckxheWVycz1bby5jcmVhdGVJbnN0YW5jZShjLlRleHRSZW5kZXJMYXllcixfLl9zY3JlZW5FbGVtZW50LDAsXy5fY29sb3JzLGQsXy5faWQpLG8uY3JlYXRlSW5zdGFuY2UobC5TZWxlY3Rpb25SZW5kZXJMYXllcixfLl9zY3JlZW5FbGVtZW50LDEsXy5fY29sb3JzLF8uX2lkKSxvLmNyZWF0ZUluc3RhbmNlKHUuTGlua1JlbmRlckxheWVyLF8uX3NjcmVlbkVsZW1lbnQsMixfLl9jb2xvcnMsXy5faWQsaSxuKSxvLmNyZWF0ZUluc3RhbmNlKGguQ3Vyc29yUmVuZGVyTGF5ZXIsXy5fc2NyZWVuRWxlbWVudCwzLF8uX2NvbG9ycyxfLl9pZCxfLl9vblJlcXVlc3RSZWRyYXcpXSxfLmRpbWVuc2lvbnM9e3NjYWxlZENoYXJXaWR0aDowLHNjYWxlZENoYXJIZWlnaHQ6MCxzY2FsZWRDZWxsV2lkdGg6MCxzY2FsZWRDZWxsSGVpZ2h0OjAsc2NhbGVkQ2hhckxlZnQ6MCxzY2FsZWRDaGFyVG9wOjAsc2NhbGVkQ2FudmFzV2lkdGg6MCxzY2FsZWRDYW52YXNIZWlnaHQ6MCxjYW52YXNXaWR0aDowLGNhbnZhc0hlaWdodDowLGFjdHVhbENlbGxXaWR0aDowLGFjdHVhbENlbGxIZWlnaHQ6MH0sXy5fZGV2aWNlUGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyxfLl91cGRhdGVEaW1lbnNpb25zKCksXy5vbk9wdGlvbnNDaGFuZ2VkKCksX31yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0UmVkcmF3Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFJlZHJhdy5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIHQscjt0cnl7Zm9yKHZhciBpPWEodGhpcy5fcmVuZGVyTGF5ZXJzKSxuPWkubmV4dCgpOyFuLmRvbmU7bj1pLm5leHQoKSluLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLCgwLHAucmVtb3ZlVGVybWluYWxGcm9tQ2FjaGUpKHRoaXMuX2lkKX0sdC5wcm90b3R5cGUub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fZGV2aWNlUGl4ZWxSYXRpbyE9PXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvJiYodGhpcy5fZGV2aWNlUGl4ZWxSYXRpbz13aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyx0aGlzLm9uUmVzaXplKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpKX0sdC5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dGhpcy5fY29sb3JzPWU7dHJ5e2Zvcih2YXIgaT1hKHRoaXMuX3JlbmRlckxheWVycyksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpe3ZhciBvPW4udmFsdWU7by5zZXRDb2xvcnModGhpcy5fY29sb3JzKSxvLnJlc2V0KCl9fWNhdGNoKGUpe3Q9e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWkucmV0dXJuKSYmci5jYWxsKGkpfWZpbmFsbHl7aWYodCl0aHJvdyB0LmVycm9yfX19LHQucHJvdG90eXBlLm9uUmVzaXplPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaTt0aGlzLl91cGRhdGVEaW1lbnNpb25zKCk7dHJ5e2Zvcih2YXIgbj1hKHRoaXMuX3JlbmRlckxheWVycyksbz1uLm5leHQoKTshby5kb25lO289bi5uZXh0KCkpby52YWx1ZS5yZXNpemUodGhpcy5kaW1lbnNpb25zKX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYoaT1uLnJldHVybikmJmkuY2FsbChuKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19dGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS53aWR0aD10aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGgrInB4Iix0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodD10aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0KyJweCJ9LHQucHJvdG90eXBlLm9uQ2hhclNpemVDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5vblJlc2l6ZSh0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKX0sdC5wcm90b3R5cGUub25CbHVyPWZ1bmN0aW9uKCl7dGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihlKXtyZXR1cm4gZS5vbkJsdXIoKX0pKX0sdC5wcm90b3R5cGUub25Gb2N1cz1mdW5jdGlvbigpe3RoaXMuX3J1bk9wZXJhdGlvbigoZnVuY3Rpb24oZSl7cmV0dXJuIGUub25Gb2N1cygpfSkpfSx0LnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPSExKSx0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGkpe3JldHVybiBpLm9uU2VsZWN0aW9uQ2hhbmdlZChlLHQscil9KSksdGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQmJnRoaXMuX29uUmVxdWVzdFJlZHJhdy5maXJlKHtzdGFydDowLGVuZDp0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMX0pfSx0LnByb3RvdHlwZS5vbkN1cnNvck1vdmU9ZnVuY3Rpb24oKXt0aGlzLl9ydW5PcGVyYXRpb24oKGZ1bmN0aW9uKGUpe3JldHVybiBlLm9uQ3Vyc29yTW92ZSgpfSkpfSx0LnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihlKXtyZXR1cm4gZS5vbk9wdGlvbnNDaGFuZ2VkKCl9KSl9LHQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5fcnVuT3BlcmF0aW9uKChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXNldCgpfSkpfSx0LnByb3RvdHlwZS5fcnVuT3BlcmF0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0LHI7dHJ5e2Zvcih2YXIgaT1hKHRoaXMuX3JlbmRlckxheWVycyksbj1pLm5leHQoKTshbi5kb25lO249aS5uZXh0KCkpZShuLnZhbHVlKX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtuJiYhbi5kb25lJiYocj1pLnJldHVybikmJnIuY2FsbChpKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19fSx0LnByb3RvdHlwZS5yZW5kZXJSb3dzPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaTt0cnl7Zm9yKHZhciBuPWEodGhpcy5fcmVuZGVyTGF5ZXJzKSxvPW4ubmV4dCgpOyFvLmRvbmU7bz1uLm5leHQoKSlvLnZhbHVlLm9uR3JpZENoYW5nZWQoZSx0KX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYoaT1uLnJldHVybikmJmkuY2FsbChuKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19fSx0LnByb3RvdHlwZS5jbGVhclRleHR1cmVBdGxhcz1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1hKHRoaXMuX3JlbmRlckxheWVycyksaT1yLm5leHQoKTshaS5kb25lO2k9ci5uZXh0KCkpaS52YWx1ZS5jbGVhclRleHR1cmVBdGxhcygpfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19LHQucHJvdG90eXBlLl91cGRhdGVEaW1lbnNpb25zPWZ1bmN0aW9uKCl7dGhpcy5fY2hhclNpemVTZXJ2aWNlLmhhc1ZhbGlkU2l6ZSYmKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGg9TWF0aC5mbG9vcih0aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGgqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0PU1hdGguY2VpbCh0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGVpZ2h0KndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodD1NYXRoLmZsb29yKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0KnRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGluZUhlaWdodCksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJUb3A9MT09PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGluZUhlaWdodD8wOk1hdGgucm91bmQoKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsSGVpZ2h0LXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFySGVpZ2h0KS8yKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbFdpZHRoPXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyV2lkdGgrTWF0aC5yb3VuZCh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxldHRlclNwYWNpbmcpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdD1NYXRoLmZsb29yKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGV0dGVyU3BhY2luZy8yKSx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzSGVpZ2h0PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyp0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2VsbEhlaWdodCx0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2FudmFzV2lkdGg9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKnRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgsdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodD1NYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aD1NYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodC90aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aD10aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGgvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKX0sbyhbcyg0LGQuSUluc3RhbnRpYXRpb25TZXJ2aWNlKSxzKDUsZC5JQnVmZmVyU2VydmljZSkscyg2LF8uSUNoYXJTaXplU2VydmljZSkscyg3LGQuSU9wdGlvbnNTZXJ2aWNlKV0sdCl9KGYuRGlzcG9zYWJsZSk7dC5SZW5kZXJlcj1nfSwxNzUyOihlLHQpPT57ZnVuY3Rpb24gcihlKXtyZXR1cm4gNTc1MDg8PWUmJmU8PTU3NTU4fU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmV4Y2x1ZGVGcm9tQ29udHJhc3RSYXRpb0RlbWFuZHM9dC5pc1Bvd2VybGluZUdseXBoPXQudGhyb3dJZkZhbHN5PXZvaWQgMCx0LnRocm93SWZGYWxzeT1mdW5jdGlvbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoInZhbHVlIG11c3Qgbm90IGJlIGZhbHN5Iik7cmV0dXJuIGV9LHQuaXNQb3dlcmxpbmVHbHlwaD1yLHQuZXhjbHVkZUZyb21Db250cmFzdFJhdGlvRGVtYW5kcz1mdW5jdGlvbihlKXtyZXR1cm4gcihlKXx8ZnVuY3Rpb24oZSl7cmV0dXJuIDk0NzI8PWUmJmU8PTk2MzF9KGUpfX0sNDE0OTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TZWxlY3Rpb25SZW5kZXJMYXllcj12b2lkIDA7dmFyIGE9cigxNTQ2KSxjPXIoMjU4NSksbD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEpe3ZhciBjPWUuY2FsbCh0aGlzLHQsInNlbGVjdGlvbiIsciwhMCxpLG4sbyxzLGEpfHx0aGlzO3JldHVybiBjLl9jbGVhclN0YXRlKCksY31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLl9jbGVhclN0YXRlPWZ1bmN0aW9uKCl7dGhpcy5fc3RhdGU9e3N0YXJ0OnZvaWQgMCxlbmQ6dm9pZCAwLGNvbHVtblNlbGVjdE1vZGU6dm9pZCAwLHlkaXNwOnZvaWQgMH19LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbih0KXtlLnByb3RvdHlwZS5yZXNpemUuY2FsbCh0aGlzLHQpLHRoaXMuX2NsZWFyU3RhdGUoKX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9zdGF0ZS5zdGFydCYmdGhpcy5fc3RhdGUuZW5kJiYodGhpcy5fY2xlYXJTdGF0ZSgpLHRoaXMuX2NsZWFyQWxsKCkpfSx0LnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24odCxyLGkpe2lmKGUucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZC5jYWxsKHRoaXMsdCxyLGkpLHRoaXMuX2RpZFN0YXRlQ2hhbmdlKHQscixpLHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwKSlpZih0aGlzLl9jbGVhckFsbCgpLHQmJnIpe3ZhciBuPXRbMV0tdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbz1yWzFdLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHM9TWF0aC5tYXgobiwwKSxhPU1hdGgubWluKG8sdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpO2lmKHM+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93c3x8YTwwKXRoaXMuX3N0YXRlLnlkaXNwPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwO2Vsc2V7aWYodGhpcy5fY3R4LmZpbGxTdHlsZT10aGlzLl9jb2xvcnMuc2VsZWN0aW9uVHJhbnNwYXJlbnQuY3NzLGkpe3ZhciBjPXRbMF0sbD1yWzBdLWMsaD1hLXMrMTt0aGlzLl9maWxsQ2VsbHMoYyxzLGwsaCl9ZWxzZXtjPW49PT1zP3RbMF06MDt2YXIgdT1zPT09bz9yWzBdOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczt0aGlzLl9maWxsQ2VsbHMoYyxzLHUtYywxKTt2YXIgZj1NYXRoLm1heChhLXMtMSwwKTtpZih0aGlzLl9maWxsQ2VsbHMoMCxzKzEsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGYpLHMhPT1hKXt2YXIgXz1vPT09YT9yWzBdOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczt0aGlzLl9maWxsQ2VsbHMoMCxhLF8sMSl9fXRoaXMuX3N0YXRlLnN0YXJ0PVt0WzBdLHRbMV1dLHRoaXMuX3N0YXRlLmVuZD1bclswXSxyWzFdXSx0aGlzLl9zdGF0ZS5jb2x1bW5TZWxlY3RNb2RlPWksdGhpcy5fc3RhdGUueWRpc3A9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3B9fWVsc2UgdGhpcy5fY2xlYXJTdGF0ZSgpfSx0LnByb3RvdHlwZS5fZGlkU3RhdGVDaGFuZ2U9ZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuIXRoaXMuX2FyZUNvb3JkaW5hdGVzRXF1YWwoZSx0aGlzLl9zdGF0ZS5zdGFydCl8fCF0aGlzLl9hcmVDb29yZGluYXRlc0VxdWFsKHQsdGhpcy5fc3RhdGUuZW5kKXx8ciE9PXRoaXMuX3N0YXRlLmNvbHVtblNlbGVjdE1vZGV8fGkhPT10aGlzLl9zdGF0ZS55ZGlzcH0sdC5wcm90b3R5cGUuX2FyZUNvb3JkaW5hdGVzRXF1YWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4hKCFlfHwhdCkmJmVbMF09PT10WzBdJiZlWzFdPT09dFsxXX0sbyhbcyg0LGMuSUJ1ZmZlclNlcnZpY2UpLHMoNSxjLklPcHRpb25zU2VydmljZSkscyg2LGMuSURlY29yYXRpb25TZXJ2aWNlKV0sdCl9KGEuQmFzZVJlbmRlckxheWVyKTt0LlNlbGVjdGlvblJlbmRlckxheWVyPWx9LDk1OTY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sYT10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVGV4dFJlbmRlckxheWVyPXZvaWQgMDt2YXIgYz1yKDM3MDApLGw9cigxNTQ2KSxoPXIoMzczNCksdT1yKDY0MyksZj1yKDUxMSksXz1yKDI1ODUpLGQ9cig0NzI1KSxwPXIoNDI2OSksdj1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxzLGEsbCxoKXt2YXIgdT1lLmNhbGwodGhpcyx0LCJ0ZXh0IixyLG4saSxvLHMsYSxoKXx8dGhpcztyZXR1cm4gdS5fY2hhcmFjdGVySm9pbmVyU2VydmljZT1sLHUuX2NoYXJhY3RlcldpZHRoPTAsdS5fY2hhcmFjdGVyRm9udD0iIix1Ll9jaGFyYWN0ZXJPdmVybGFwQ2FjaGU9e30sdS5fd29ya0NlbGw9bmV3IGYuQ2VsbERhdGEsdS5fc3RhdGU9bmV3IGMuR3JpZENhY2hlLHV9cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24odCl7ZS5wcm90b3R5cGUucmVzaXplLmNhbGwodGhpcyx0KTt2YXIgcj10aGlzLl9nZXRGb250KCExLCExKTt0aGlzLl9jaGFyYWN0ZXJXaWR0aD09PXQuc2NhbGVkQ2hhcldpZHRoJiZ0aGlzLl9jaGFyYWN0ZXJGb250PT09cnx8KHRoaXMuX2NoYXJhY3RlcldpZHRoPXQuc2NhbGVkQ2hhcldpZHRoLHRoaXMuX2NoYXJhY3RlckZvbnQ9cix0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGU9e30pLHRoaXMuX3N0YXRlLmNsZWFyKCksdGhpcy5fc3RhdGUucmVzaXplKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3N0YXRlLmNsZWFyKCksdGhpcy5fY2xlYXJBbGwoKX0sdC5wcm90b3R5cGUuX2ZvckVhY2hDZWxsPWZ1bmN0aW9uKGUsdCxyKXtmb3IodmFyIGk9ZTtpPD10O2krKylmb3IodmFyIG49aSt0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCxvPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmdldChuKSxzPXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UuZ2V0Sm9pbmVkQ2hhcmFjdGVycyhuKSxhPTA7YTx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7YSsrKXtvLmxvYWRDZWxsKGEsdGhpcy5fd29ya0NlbGwpO3ZhciBjPXRoaXMuX3dvcmtDZWxsLGw9ITEsaD1hO2lmKDAhPT1jLmdldFdpZHRoKCkpe2lmKHMubGVuZ3RoPjAmJmE9PT1zWzBdWzBdKXtsPSEwO3ZhciBmPXMuc2hpZnQoKTtjPW5ldyBwLkpvaW5lZENlbGxEYXRhKHRoaXMuX3dvcmtDZWxsLG8udHJhbnNsYXRlVG9TdHJpbmcoITAsZlswXSxmWzFdKSxmWzFdLWZbMF0pLGg9ZlsxXS0xfSFsJiZ0aGlzLl9pc092ZXJsYXBwaW5nKGMpJiZoPG8ubGVuZ3RoLTEmJm8uZ2V0Q29kZVBvaW50KGgrMSk9PT11Lk5VTExfQ0VMTF9DT0RFJiYoYy5jb250ZW50Jj0tMTI1ODI5MTMsYy5jb250ZW50fD0yPDwyMikscihjLGEsaSksYT1ofX19LHQucHJvdG90eXBlLl9kcmF3QmFja2dyb3VuZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMsaT10aGlzLl9jdHgsbj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsbz0wLHM9MCxjPW51bGw7aS5zYXZlKCksdGhpcy5fZm9yRWFjaENlbGwoZSx0LChmdW5jdGlvbihlLHQsbCl7dmFyIHUsZixfPW51bGw7ZS5pc0ludmVyc2UoKT9fPWUuaXNGZ0RlZmF1bHQoKT9yLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M6ZS5pc0ZnUkdCKCk/InJnYigiK2guQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0RmdDb2xvcigpKS5qb2luKCIsIikrIikiOnIuX2NvbG9ycy5hbnNpW2UuZ2V0RmdDb2xvcigpXS5jc3M6ZS5pc0JnUkdCKCk/Xz0icmdiKCIraC5BdHRyaWJ1dGVEYXRhLnRvQ29sb3JSR0IoZS5nZXRCZ0NvbG9yKCkpLmpvaW4oIiwiKSsiKSI6ZS5pc0JnUGFsZXR0ZSgpJiYoXz1yLl9jb2xvcnMuYW5zaVtlLmdldEJnQ29sb3IoKV0uY3NzKTt2YXIgZD0hMTt0cnl7Zm9yKHZhciBwPWEoci5fZGVjb3JhdGlvblNlcnZpY2UuZ2V0RGVjb3JhdGlvbnNBdENlbGwodCxyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCtsKSksdj1wLm5leHQoKTshdi5kb25lO3Y9cC5uZXh0KCkpe3ZhciB5PXYudmFsdWU7InRvcCIhPT15Lm9wdGlvbnMubGF5ZXImJmR8fCh5LmJhY2tncm91bmRDb2xvclJHQiYmKF89eS5iYWNrZ3JvdW5kQ29sb3JSR0IuY3NzKSxkPSJ0b3AiPT09eS5vcHRpb25zLmxheWVyKX19Y2F0Y2goZSl7dT17ZXJyb3I6ZX19ZmluYWxseXt0cnl7diYmIXYuZG9uZSYmKGY9cC5yZXR1cm4pJiZmLmNhbGwocCl9ZmluYWxseXtpZih1KXRocm93IHUuZXJyb3J9fW51bGw9PT1jJiYobz10LHM9bCksbCE9PXM/KGkuZmlsbFN0eWxlPWN8fCIiLHIuX2ZpbGxDZWxscyhvLHMsbi1vLDEpLG89dCxzPWwpOmMhPT1fJiYoaS5maWxsU3R5bGU9Y3x8IiIsci5fZmlsbENlbGxzKG8scyx0LW8sMSksbz10LHM9bCksYz1ffSkpLG51bGwhPT1jJiYoaS5maWxsU3R5bGU9Yyx0aGlzLl9maWxsQ2VsbHMobyxzLG4tbywxKSksaS5yZXN0b3JlKCl9LHQucHJvdG90eXBlLl9kcmF3Rm9yZWdyb3VuZD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dGhpcy5fZm9yRWFjaENlbGwoZSx0LChmdW5jdGlvbihlLHQsaSl7aWYoIWUuaXNJbnZpc2libGUoKSYmKHIuX2RyYXdDaGFycyhlLHQsaSksZS5pc1VuZGVybGluZSgpfHxlLmlzU3RyaWtldGhyb3VnaCgpKSl7aWYoci5fY3R4LnNhdmUoKSxlLmlzSW52ZXJzZSgpKWlmKGUuaXNCZ0RlZmF1bHQoKSlyLl9jdHguZmlsbFN0eWxlPXIuX2NvbG9ycy5iYWNrZ3JvdW5kLmNzcztlbHNlIGlmKGUuaXNCZ1JHQigpKXIuX2N0eC5maWxsU3R5bGU9InJnYigiK2guQXR0cmlidXRlRGF0YS50b0NvbG9yUkdCKGUuZ2V0QmdDb2xvcigpKS5qb2luKCIsIikrIikiO2Vsc2V7dmFyIG49ZS5nZXRCZ0NvbG9yKCk7ci5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kcmF3Qm9sZFRleHRJbkJyaWdodENvbG9ycyYmZS5pc0JvbGQoKSYmbjw4JiYobis9OCksci5fY3R4LmZpbGxTdHlsZT1yLl9jb2xvcnMuYW5zaVtuXS5jc3N9ZWxzZSBpZihlLmlzRmdEZWZhdWx0KCkpci5fY3R4LmZpbGxTdHlsZT1yLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3M7ZWxzZSBpZihlLmlzRmdSR0IoKSlyLl9jdHguZmlsbFN0eWxlPSJyZ2IoIitoLkF0dHJpYnV0ZURhdGEudG9Db2xvclJHQihlLmdldEZnQ29sb3IoKSkuam9pbigiLCIpKyIpIjtlbHNle3ZhciBvPWUuZ2V0RmdDb2xvcigpO3IuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZHJhd0JvbGRUZXh0SW5CcmlnaHRDb2xvcnMmJmUuaXNCb2xkKCkmJm88OCYmKG8rPTgpLHIuX2N0eC5maWxsU3R5bGU9ci5fY29sb3JzLmFuc2lbb10uY3NzfWUuaXNTdHJpa2V0aHJvdWdoKCkmJnIuX2ZpbGxNaWRkbGVMaW5lQXRDZWxscyh0LGksZS5nZXRXaWR0aCgpKSxlLmlzVW5kZXJsaW5lKCkmJnIuX2ZpbGxCb3R0b21MaW5lQXRDZWxscyh0LGksZS5nZXRXaWR0aCgpKSxyLl9jdHgucmVzdG9yZSgpfX0pKX0sdC5wcm90b3R5cGUub25HcmlkQ2hhbmdlZD1mdW5jdGlvbihlLHQpezAhPT10aGlzLl9zdGF0ZS5jYWNoZS5sZW5ndGgmJih0aGlzLl9jaGFyQXRsYXMmJnRoaXMuX2NoYXJBdGxhcy5iZWdpbkZyYW1lKCksdGhpcy5fY2xlYXJDZWxscygwLGUsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHQtZSsxKSx0aGlzLl9kcmF3QmFja2dyb3VuZChlLHQpLHRoaXMuX2RyYXdGb3JlZ3JvdW5kKGUsdCkpfSx0LnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fc2V0VHJhbnNwYXJlbmN5KHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuYWxsb3dUcmFuc3BhcmVuY3kpfSx0LnByb3RvdHlwZS5faXNPdmVybGFwcGluZz1mdW5jdGlvbihlKXtpZigxIT09ZS5nZXRXaWR0aCgpKXJldHVybiExO2lmKGUuZ2V0Q29kZSgpPDI1NilyZXR1cm4hMTt2YXIgdD1lLmdldENoYXJzKCk7aWYodGhpcy5fY2hhcmFjdGVyT3ZlcmxhcENhY2hlLmhhc093blByb3BlcnR5KHQpKXJldHVybiB0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGVbdF07dGhpcy5fY3R4LnNhdmUoKSx0aGlzLl9jdHguZm9udD10aGlzLl9jaGFyYWN0ZXJGb250O3ZhciByPU1hdGguZmxvb3IodGhpcy5fY3R4Lm1lYXN1cmVUZXh0KHQpLndpZHRoKT50aGlzLl9jaGFyYWN0ZXJXaWR0aDtyZXR1cm4gdGhpcy5fY3R4LnJlc3RvcmUoKSx0aGlzLl9jaGFyYWN0ZXJPdmVybGFwQ2FjaGVbdF09cixyfSxvKFtzKDUsXy5JQnVmZmVyU2VydmljZSkscyg2LF8uSU9wdGlvbnNTZXJ2aWNlKSxzKDcsZC5JQ2hhcmFjdGVySm9pbmVyU2VydmljZSkscyg4LF8uSURlY29yYXRpb25TZXJ2aWNlKV0sdCl9KGwuQmFzZVJlbmRlckxheWVyKTt0LlRleHRSZW5kZXJMYXllcj12fSw5NjE2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQmFzZUNoYXJBdGxhcz12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fZGlkV2FybVVwPSExfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS53YXJtVXA9ZnVuY3Rpb24oKXt0aGlzLl9kaWRXYXJtVXB8fCh0aGlzLl9kb1dhcm1VcCgpLHRoaXMuX2RpZFdhcm1VcD0hMCl9LGUucHJvdG90eXBlLl9kb1dhcm1VcD1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmJlZ2luRnJhbWU9ZnVuY3Rpb24oKXt9LGV9KCk7dC5CYXNlQ2hhckF0bGFzPXJ9LDE0MjA6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnJlbW92ZVRlcm1pbmFsRnJvbUNhY2hlPXQuYWNxdWlyZUNoYXJBdGxhcz12b2lkIDA7dmFyIGk9cigyMDQwKSxuPXIoMTkwNiksbz1bXTt0LmFjcXVpcmVDaGFyQXRsYXM9ZnVuY3Rpb24oZSx0LHIscyxhKXtmb3IodmFyIGM9KDAsaS5nZW5lcmF0ZUNvbmZpZykocyxhLGUsciksbD0wO2w8by5sZW5ndGg7bCsrKXt2YXIgaD0odT1vW2xdKS5vd25lZEJ5LmluZGV4T2YodCk7aWYoaD49MCl7aWYoKDAsaS5jb25maWdFcXVhbHMpKHUuY29uZmlnLGMpKXJldHVybiB1LmF0bGFzOzE9PT11Lm93bmVkQnkubGVuZ3RoPyh1LmF0bGFzLmRpc3Bvc2UoKSxvLnNwbGljZShsLDEpKTp1Lm93bmVkQnkuc3BsaWNlKGgsMSk7YnJlYWt9fWZvcihsPTA7bDxvLmxlbmd0aDtsKyspe3ZhciB1PW9bbF07aWYoKDAsaS5jb25maWdFcXVhbHMpKHUuY29uZmlnLGMpKXJldHVybiB1Lm93bmVkQnkucHVzaCh0KSx1LmF0bGFzfXZhciBmPXthdGxhczpuZXcgbi5EeW5hbWljQ2hhckF0bGFzKGRvY3VtZW50LGMpLGNvbmZpZzpjLG93bmVkQnk6W3RdfTtyZXR1cm4gby5wdXNoKGYpLGYuYXRsYXN9LHQucmVtb3ZlVGVybWluYWxGcm9tQ2FjaGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxvLmxlbmd0aDt0Kyspe3ZhciByPW9bdF0ub3duZWRCeS5pbmRleE9mKGUpO2lmKC0xIT09cil7MT09PW9bdF0ub3duZWRCeS5sZW5ndGg/KG9bdF0uYXRsYXMuZGlzcG9zZSgpLG8uc3BsaWNlKHQsMSkpOm9bdF0ub3duZWRCeS5zcGxpY2UociwxKTticmVha319fX0sMjA0MDooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuaXMyNTZDb2xvcj10LmNvbmZpZ0VxdWFscz10LmdlbmVyYXRlQ29uZmlnPXZvaWQgMDt2YXIgaT1yKDY0Myk7dC5nZW5lcmF0ZUNvbmZpZz1mdW5jdGlvbihlLHQscixpKXt2YXIgbj17Zm9yZWdyb3VuZDppLmZvcmVncm91bmQsYmFja2dyb3VuZDppLmJhY2tncm91bmQsY3Vyc29yOnZvaWQgMCxjdXJzb3JBY2NlbnQ6dm9pZCAwLHNlbGVjdGlvbjp2b2lkIDAsYW5zaTppLmFuc2kuc2xpY2UoKX07cmV0dXJue2RldmljZVBpeGVsUmF0aW86d2luZG93LmRldmljZVBpeGVsUmF0aW8sc2NhbGVkQ2hhcldpZHRoOmUsc2NhbGVkQ2hhckhlaWdodDp0LGZvbnRGYW1pbHk6ci5mb250RmFtaWx5LGZvbnRTaXplOnIuZm9udFNpemUsZm9udFdlaWdodDpyLmZvbnRXZWlnaHQsZm9udFdlaWdodEJvbGQ6ci5mb250V2VpZ2h0Qm9sZCxhbGxvd1RyYW5zcGFyZW5jeTpyLmFsbG93VHJhbnNwYXJlbmN5LGNvbG9yczpufX0sdC5jb25maWdFcXVhbHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MDtyPGUuY29sb3JzLmFuc2kubGVuZ3RoO3IrKylpZihlLmNvbG9ycy5hbnNpW3JdLnJnYmEhPT10LmNvbG9ycy5hbnNpW3JdLnJnYmEpcmV0dXJuITE7cmV0dXJuIGUuZGV2aWNlUGl4ZWxSYXRpbz09PXQuZGV2aWNlUGl4ZWxSYXRpbyYmZS5mb250RmFtaWx5PT09dC5mb250RmFtaWx5JiZlLmZvbnRTaXplPT09dC5mb250U2l6ZSYmZS5mb250V2VpZ2h0PT09dC5mb250V2VpZ2h0JiZlLmZvbnRXZWlnaHRCb2xkPT09dC5mb250V2VpZ2h0Qm9sZCYmZS5hbGxvd1RyYW5zcGFyZW5jeT09PXQuYWxsb3dUcmFuc3BhcmVuY3kmJmUuc2NhbGVkQ2hhcldpZHRoPT09dC5zY2FsZWRDaGFyV2lkdGgmJmUuc2NhbGVkQ2hhckhlaWdodD09PXQuc2NhbGVkQ2hhckhlaWdodCYmZS5jb2xvcnMuZm9yZWdyb3VuZD09PXQuY29sb3JzLmZvcmVncm91bmQmJmUuY29sb3JzLmJhY2tncm91bmQ9PT10LmNvbG9ycy5iYWNrZ3JvdW5kfSx0LmlzMjU2Q29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIGU8aS5ERUZBVUxUX0NPTE9SfX0sODgwMzooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ0hBUl9BVExBU19DRUxMX1NQQUNJTkc9dC5URVhUX0JBU0VMSU5FPXQuRElNX09QQUNJVFk9dC5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SPXZvaWQgMDt2YXIgaT1yKDYxMTQpO3QuSU5WRVJURURfREVGQVVMVF9DT0xPUj0yNTcsdC5ESU1fT1BBQ0lUWT0uNSx0LlRFWFRfQkFTRUxJTkU9aS5pc0ZpcmVmb3h8fGkuaXNMZWdhY3lFZGdlPyJib3R0b20iOiJpZGVvZ3JhcGhpYyIsdC5DSEFSX0FUTEFTX0NFTExfU1BBQ0lORz0xfSwxOTA2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk5vbmVDaGFyQXRsYXM9dC5EeW5hbWljQ2hhckF0bGFzPXQuZ2V0R2x5cGhDYWNoZUtleT12b2lkIDA7dmFyIG89cig4ODAzKSxzPXIoOTYxNiksYT1yKDU2ODApLGM9cig3MDAxKSxsPXIoNjExNCksaD1yKDE3NTIpLHU9cig4MDU1KSxmPTEwMjQsXz0xMDI0LGQ9e2NzczoicmdiYSgwLCAwLCAwLCAwKSIscmdiYTowfTtmdW5jdGlvbiBwKGUpe3JldHVybiBlLmNvZGU8PDIxfGUuYmc8PDEyfGUuZmc8PDN8KGUuYm9sZD8wOjQpKyhlLmRpbT8wOjIpKyhlLml0YWxpYz8wOjEpfXQuZ2V0R2x5cGhDYWNoZUtleT1wO3ZhciB2PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7aS5fY29uZmlnPXIsaS5fZHJhd1RvQ2FjaGVDb3VudD0wLGkuX2dseXBoc1dhaXRpbmdPbkJpdG1hcD1bXSxpLl9iaXRtYXBDb21taXRUaW1lb3V0PW51bGwsaS5fYml0bWFwPW51bGwsaS5fY2FjaGVDYW52YXM9dC5jcmVhdGVFbGVtZW50KCJjYW52YXMiKSxpLl9jYWNoZUNhbnZhcy53aWR0aD1mLGkuX2NhY2hlQ2FudmFzLmhlaWdodD1fLGkuX2NhY2hlQ3R4PSgwLGgudGhyb3dJZkZhbHN5KShpLl9jYWNoZUNhbnZhcy5nZXRDb250ZXh0KCIyZCIse2FscGhhOiEwfSkpO3ZhciBuPXQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7bi53aWR0aD1pLl9jb25maWcuc2NhbGVkQ2hhcldpZHRoLG4uaGVpZ2h0PWkuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0LGkuX3RtcEN0eD0oMCxoLnRocm93SWZGYWxzeSkobi5nZXRDb250ZXh0KCIyZCIse2FscGhhOmkuX2NvbmZpZy5hbGxvd1RyYW5zcGFyZW5jeX0pKSxpLl93aWR0aD1NYXRoLmZsb29yKGYvaS5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCksaS5faGVpZ2h0PU1hdGguZmxvb3IoXy9pLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCk7dmFyIG89aS5fd2lkdGgqaS5faGVpZ2h0O3JldHVybiBpLl9jYWNoZU1hcD1uZXcgYy5MUlVNYXAobyksaS5fY2FjaGVNYXAucHJlYWxsb2MobyksaX1yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtudWxsIT09dGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCYmKHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5fYml0bWFwQ29tbWl0VGltZW91dCksdGhpcy5fYml0bWFwQ29tbWl0VGltZW91dD1udWxsKX0sdC5wcm90b3R5cGUuYmVnaW5GcmFtZT1mdW5jdGlvbigpe3RoaXMuX2RyYXdUb0NhY2hlQ291bnQ9MH0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXtpZih0aGlzLl9jYWNoZU1hcC5zaXplPjApe3ZhciBlPXRoaXMuX3dpZHRoKnRoaXMuX2hlaWdodDt0aGlzLl9jYWNoZU1hcD1uZXcgYy5MUlVNYXAoZSksdGhpcy5fY2FjaGVNYXAucHJlYWxsb2MoZSl9dGhpcy5fY2FjaGVDdHguY2xlYXJSZWN0KDAsMCxmLF8pLHRoaXMuX3RtcEN0eC5jbGVhclJlY3QoMCwwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpfSx0LnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKGUsdCxyLGkpe2lmKDMyPT09dC5jb2RlKXJldHVybiEwO2lmKCF0aGlzLl9jYW5DYWNoZSh0KSlyZXR1cm4hMTt2YXIgbj1wKHQpLG89dGhpcy5fY2FjaGVNYXAuZ2V0KG4pO2lmKG51bGwhPW8pcmV0dXJuIHRoaXMuX2RyYXdGcm9tQ2FjaGUoZSxvLHIsaSksITA7aWYodGhpcy5fZHJhd1RvQ2FjaGVDb3VudDwxMDApe3ZhciBzO3M9dGhpcy5fY2FjaGVNYXAuc2l6ZTx0aGlzLl9jYWNoZU1hcC5jYXBhY2l0eT90aGlzLl9jYWNoZU1hcC5zaXplOnRoaXMuX2NhY2hlTWFwLnBlZWsoKS5pbmRleDt2YXIgYT10aGlzLl9kcmF3VG9DYWNoZSh0LHMpO3JldHVybiB0aGlzLl9jYWNoZU1hcC5zZXQobixhKSx0aGlzLl9kcmF3RnJvbUNhY2hlKGUsYSxyLGkpLCEwfXJldHVybiExfSx0LnByb3RvdHlwZS5fY2FuQ2FjaGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuY29kZTwyNTZ9LHQucHJvdG90eXBlLl90b0Nvb3JkaW5hdGVYPWZ1bmN0aW9uKGUpe3JldHVybiBlJXRoaXMuX3dpZHRoKnRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGh9LHQucHJvdG90eXBlLl90b0Nvb3JkaW5hdGVZPWZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmZsb29yKGUvdGhpcy5fd2lkdGgpKnRoaXMuX2NvbmZpZy5zY2FsZWRDaGFySGVpZ2h0fSx0LnByb3RvdHlwZS5fZHJhd0Zyb21DYWNoZT1mdW5jdGlvbihlLHQscixpKXtpZighdC5pc0VtcHR5KXt2YXIgbj10aGlzLl90b0Nvb3JkaW5hdGVYKHQuaW5kZXgpLG89dGhpcy5fdG9Db29yZGluYXRlWSh0LmluZGV4KTtlLmRyYXdJbWFnZSh0LmluQml0bWFwP3RoaXMuX2JpdG1hcDp0aGlzLl9jYWNoZUNhbnZhcyxuLG8sdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCxyLGksdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCl9fSx0LnByb3RvdHlwZS5fZ2V0Q29sb3JGcm9tQW5zaUluZGV4PWZ1bmN0aW9uKGUpe3JldHVybiBlPHRoaXMuX2NvbmZpZy5jb2xvcnMuYW5zaS5sZW5ndGg/dGhpcy5fY29uZmlnLmNvbG9ycy5hbnNpW2VdOmEuREVGQVVMVF9BTlNJX0NPTE9SU1tlXX0sdC5wcm90b3R5cGUuX2dldEJhY2tncm91bmRDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5P2Q6ZS5iZz09PW8uSU5WRVJURURfREVGQVVMVF9DT0xPUj90aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmQ6ZS5iZzwyNTY/dGhpcy5fZ2V0Q29sb3JGcm9tQW5zaUluZGV4KGUuYmcpOnRoaXMuX2NvbmZpZy5jb2xvcnMuYmFja2dyb3VuZH0sdC5wcm90b3R5cGUuX2dldEZvcmVncm91bmRDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gZS5mZz09PW8uSU5WRVJURURfREVGQVVMVF9DT0xPUj91LmNvbG9yLm9wYXF1ZSh0aGlzLl9jb25maWcuY29sb3JzLmJhY2tncm91bmQpOmUuZmc8MjU2P3RoaXMuX2dldENvbG9yRnJvbUFuc2lJbmRleChlLmZnKTp0aGlzLl9jb25maWcuY29sb3JzLmZvcmVncm91bmR9LHQucHJvdG90eXBlLl9kcmF3VG9DYWNoZT1mdW5jdGlvbihlLHQpe3RoaXMuX2RyYXdUb0NhY2hlQ291bnQrKyx0aGlzLl90bXBDdHguc2F2ZSgpO3ZhciByPXRoaXMuX2dldEJhY2tncm91bmRDb2xvcihlKTt0aGlzLl90bXBDdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uPSJjb3B5Iix0aGlzLl90bXBDdHguZmlsbFN0eWxlPXIuY3NzLHRoaXMuX3RtcEN0eC5maWxsUmVjdCgwLDAsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCksdGhpcy5fdG1wQ3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbj0ic291cmNlLW92ZXIiO3ZhciBpPWUuYm9sZD90aGlzLl9jb25maWcuZm9udFdlaWdodEJvbGQ6dGhpcy5fY29uZmlnLmZvbnRXZWlnaHQsbj1lLml0YWxpYz8iaXRhbGljIjoiIjt0aGlzLl90bXBDdHguZm9udD1uKyIgIitpKyIgIit0aGlzLl9jb25maWcuZm9udFNpemUqdGhpcy5fY29uZmlnLmRldmljZVBpeGVsUmF0aW8rInB4ICIrdGhpcy5fY29uZmlnLmZvbnRGYW1pbHksdGhpcy5fdG1wQ3R4LnRleHRCYXNlbGluZT1vLlRFWFRfQkFTRUxJTkUsdGhpcy5fdG1wQ3R4LmZpbGxTdHlsZT10aGlzLl9nZXRGb3JlZ3JvdW5kQ29sb3IoZSkuY3NzLGUuZGltJiYodGhpcy5fdG1wQ3R4Lmdsb2JhbEFscGhhPW8uRElNX09QQUNJVFkpLHRoaXMuX3RtcEN0eC5maWxsVGV4dChlLmNoYXJzLDAsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpO3ZhciBzPXRoaXMuX3RtcEN0eC5nZXRJbWFnZURhdGEoMCwwLHRoaXMuX2NvbmZpZy5zY2FsZWRDaGFyV2lkdGgsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQpLGE9ITE7aWYodGhpcy5fY29uZmlnLmFsbG93VHJhbnNwYXJlbmN5fHwoYT1nKHMscikpLGEmJiJfIj09PWUuY2hhcnMmJiF0aGlzLl9jb25maWcuYWxsb3dUcmFuc3BhcmVuY3kpZm9yKHZhciBjPTE7Yzw9NSYmKHRoaXMuX3RtcEN0eC5maWxsVGV4dChlLmNoYXJzLDAsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJIZWlnaHQtYyksYT1nKHM9dGhpcy5fdG1wQ3R4LmdldEltYWdlRGF0YSgwLDAsdGhpcy5fY29uZmlnLnNjYWxlZENoYXJXaWR0aCx0aGlzLl9jb25maWcuc2NhbGVkQ2hhckhlaWdodCkscikpO2MrKyk7dGhpcy5fdG1wQ3R4LnJlc3RvcmUoKTt2YXIgbD10aGlzLl90b0Nvb3JkaW5hdGVYKHQpLGg9dGhpcy5fdG9Db29yZGluYXRlWSh0KTt0aGlzLl9jYWNoZUN0eC5wdXRJbWFnZURhdGEocyxsLGgpO3ZhciB1PXtpbmRleDp0LGlzRW1wdHk6YSxpbkJpdG1hcDohMX07cmV0dXJuIHRoaXMuX2FkZEdseXBoVG9CaXRtYXAodSksdX0sdC5wcm90b3R5cGUuX2FkZEdseXBoVG9CaXRtYXA9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczshKCJjcmVhdGVJbWFnZUJpdG1hcCJpbiB3aW5kb3cpfHxsLmlzRmlyZWZveHx8bC5pc1NhZmFyaXx8KHRoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcC5wdXNoKGUpLG51bGw9PT10aGlzLl9iaXRtYXBDb21taXRUaW1lb3V0JiYodGhpcy5fYml0bWFwQ29tbWl0VGltZW91dD13aW5kb3cuc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fZ2VuZXJhdGVCaXRtYXAoKX0pLDEwMCkpKX0sdC5wcm90b3R5cGUuX2dlbmVyYXRlQml0bWFwPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcyx0PXRoaXMuX2dseXBoc1dhaXRpbmdPbkJpdG1hcDt0aGlzLl9nbHlwaHNXYWl0aW5nT25CaXRtYXA9W10sd2luZG93LmNyZWF0ZUltYWdlQml0bWFwKHRoaXMuX2NhY2hlQ2FudmFzKS50aGVuKChmdW5jdGlvbihyKXtlLl9iaXRtYXA9cjtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldLmluQml0bWFwPSEwfSkpLHRoaXMuX2JpdG1hcENvbW1pdFRpbWVvdXQ9bnVsbH0sdH0ocy5CYXNlQ2hhckF0bGFzKTt0LkR5bmFtaWNDaGFyQXRsYXM9djt2YXIgeT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7cmV0dXJuIGUuY2FsbCh0aGlzKXx8dGhpc31yZXR1cm4gbih0LGUpLHQucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuITF9LHR9KHMuQmFzZUNoYXJBdGxhcyk7ZnVuY3Rpb24gZyhlLHQpe2Zvcih2YXIgcj0hMCxpPXQucmdiYT4+PjI0LG49dC5yZ2JhPj4+MTYmMjU1LG89dC5yZ2JhPj4+OCYyNTUscz0wO3M8ZS5kYXRhLmxlbmd0aDtzKz00KWUuZGF0YVtzXT09PWkmJmUuZGF0YVtzKzFdPT09biYmZS5kYXRhW3MrMl09PT1vP2UuZGF0YVtzKzNdPTA6cj0hMTtyZXR1cm4gcn10Lk5vbmVDaGFyQXRsYXM9eX0sNzAwMTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkxSVU1hcD12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY2FwYWNpdHk9ZSx0aGlzLl9tYXA9e30sdGhpcy5faGVhZD1udWxsLHRoaXMuX3RhaWw9bnVsbCx0aGlzLl9ub2RlUG9vbD1bXSx0aGlzLnNpemU9MH1yZXR1cm4gZS5wcm90b3R5cGUuX3VubGlua05vZGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wcmV2LHI9ZS5uZXh0O2U9PT10aGlzLl9oZWFkJiYodGhpcy5faGVhZD1yKSxlPT09dGhpcy5fdGFpbCYmKHRoaXMuX3RhaWw9dCksbnVsbCE9PXQmJih0Lm5leHQ9ciksbnVsbCE9PXImJihyLnByZXY9dCl9LGUucHJvdG90eXBlLl9hcHBlbmROb2RlPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3RhaWw7bnVsbCE9PXQmJih0Lm5leHQ9ZSksZS5wcmV2PXQsZS5uZXh0PW51bGwsdGhpcy5fdGFpbD1lLG51bGw9PT10aGlzLl9oZWFkJiYodGhpcy5faGVhZD1lKX0sZS5wcm90b3R5cGUucHJlYWxsb2M9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMuX25vZGVQb29sLHI9MDtyPGU7cisrKXQucHVzaCh7cHJldjpudWxsLG5leHQ6bnVsbCxrZXk6bnVsbCx2YWx1ZTpudWxsfSl9LGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9tYXBbZV07cmV0dXJuIHZvaWQgMCE9PXQ/KHRoaXMuX3VubGlua05vZGUodCksdGhpcy5fYXBwZW5kTm9kZSh0KSx0LnZhbHVlKTpudWxsfSxlLnByb3RvdHlwZS5wZWVrVmFsdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fbWFwW2VdO3JldHVybiB2b2lkIDAhPT10P3QudmFsdWU6bnVsbH0sZS5wcm90b3R5cGUucGVlaz1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX2hlYWQ7cmV0dXJuIG51bGw9PT1lP251bGw6ZS52YWx1ZX0sZS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcy5fbWFwW2VdO2lmKHZvaWQgMCE9PXIpcj10aGlzLl9tYXBbZV0sdGhpcy5fdW5saW5rTm9kZShyKSxyLnZhbHVlPXQ7ZWxzZSBpZih0aGlzLnNpemU+PXRoaXMuY2FwYWNpdHkpcj10aGlzLl9oZWFkLHRoaXMuX3VubGlua05vZGUociksZGVsZXRlIHRoaXMuX21hcFtyLmtleV0sci5rZXk9ZSxyLnZhbHVlPXQsdGhpcy5fbWFwW2VdPXI7ZWxzZXt2YXIgaT10aGlzLl9ub2RlUG9vbDtpLmxlbmd0aD4wPygocj1pLnBvcCgpKS5rZXk9ZSxyLnZhbHVlPXQpOnI9e3ByZXY6bnVsbCxuZXh0Om51bGwsa2V5OmUsdmFsdWU6dH0sdGhpcy5fbWFwW2VdPXIsdGhpcy5zaXplKyt9dGhpcy5fYXBwZW5kTm9kZShyKX0sZX0oKTt0LkxSVU1hcD1yfSwxMjk2OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LGE9dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRvbVJlbmRlcmVyPXZvaWQgMDt2YXIgYz1yKDM3ODcpLGw9cig4ODAzKSxoPXIoODQ0KSx1PXIoNDcyNSksZj1yKDI1ODUpLF89cig4NDYwKSxkPXIoODA1NSkscD1yKDk2MzEpLHY9Inh0ZXJtLWRvbS1yZW5kZXJlci1vd25lci0iLHk9Inh0ZXJtLWZnLSIsZz0ieHRlcm0tYmctIixtPSJ4dGVybS1mb2N1cyIsYj0xLFM9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxhLGwsaCx1KXt2YXIgZj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGYuX2NvbG9ycz10LGYuX2VsZW1lbnQ9cixmLl9zY3JlZW5FbGVtZW50PWksZi5fdmlld3BvcnRFbGVtZW50PW4sZi5fbGlua2lmaWVyPW8sZi5fbGlua2lmaWVyMj1zLGYuX2NoYXJTaXplU2VydmljZT1sLGYuX29wdGlvbnNTZXJ2aWNlPWgsZi5fYnVmZmVyU2VydmljZT11LGYuX3Rlcm1pbmFsQ2xhc3M9YisrLGYuX3Jvd0VsZW1lbnRzPVtdLGYuX3Jvd0NvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKSxmLl9yb3dDb250YWluZXIuY2xhc3NMaXN0LmFkZCgieHRlcm0tcm93cyIpLGYuX3Jvd0NvbnRhaW5lci5zdHlsZS5saW5lSGVpZ2h0PSJub3JtYWwiLGYuX3Jvd0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLGYuX3JlZnJlc2hSb3dFbGVtZW50cyhmLl9idWZmZXJTZXJ2aWNlLmNvbHMsZi5fYnVmZmVyU2VydmljZS5yb3dzKSxmLl9zZWxlY3Rpb25Db250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IiksZi5fc2VsZWN0aW9uQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoInh0ZXJtLXNlbGVjdGlvbiIpLGYuX3NlbGVjdGlvbkNvbnRhaW5lci5zZXRBdHRyaWJ1dGUoImFyaWEtaGlkZGVuIiwidHJ1ZSIpLGYuZGltZW5zaW9ucz17c2NhbGVkQ2hhcldpZHRoOjAsc2NhbGVkQ2hhckhlaWdodDowLHNjYWxlZENlbGxXaWR0aDowLHNjYWxlZENlbGxIZWlnaHQ6MCxzY2FsZWRDaGFyTGVmdDowLHNjYWxlZENoYXJUb3A6MCxzY2FsZWRDYW52YXNXaWR0aDowLHNjYWxlZENhbnZhc0hlaWdodDowLGNhbnZhc1dpZHRoOjAsY2FudmFzSGVpZ2h0OjAsYWN0dWFsQ2VsbFdpZHRoOjAsYWN0dWFsQ2VsbEhlaWdodDowfSxmLl91cGRhdGVEaW1lbnNpb25zKCksZi5faW5qZWN0Q3NzKCksZi5fcm93RmFjdG9yeT1hLmNyZWF0ZUluc3RhbmNlKGMuRG9tUmVuZGVyZXJSb3dGYWN0b3J5LGRvY3VtZW50LGYuX2NvbG9ycyksZi5fZWxlbWVudC5jbGFzc0xpc3QuYWRkKHYrZi5fdGVybWluYWxDbGFzcyksZi5fc2NyZWVuRWxlbWVudC5hcHBlbmRDaGlsZChmLl9yb3dDb250YWluZXIpLGYuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQoZi5fc2VsZWN0aW9uQ29udGFpbmVyKSxmLnJlZ2lzdGVyKGYuX2xpbmtpZmllci5vblNob3dMaW5rVW5kZXJsaW5lKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25MaW5rSG92ZXIoZSl9KSkpLGYucmVnaXN0ZXIoZi5fbGlua2lmaWVyLm9uSGlkZUxpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbkxpbmtMZWF2ZShlKX0pKSksZi5yZWdpc3RlcihmLl9saW5raWZpZXIyLm9uU2hvd0xpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbkxpbmtIb3ZlcihlKX0pKSksZi5yZWdpc3RlcihmLl9saW5raWZpZXIyLm9uSGlkZUxpbmtVbmRlcmxpbmUoKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbkxpbmtMZWF2ZShlKX0pKSksZn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0UmVkcmF3Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBfLkV2ZW50RW1pdHRlcikuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh2K3RoaXMuX3Rlcm1pbmFsQ2xhc3MpLCgwLHAucmVtb3ZlRWxlbWVudEZyb21QYXJlbnQpKHRoaXMuX3Jvd0NvbnRhaW5lcix0aGlzLl9zZWxlY3Rpb25Db250YWluZXIsdGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQsdGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5fdXBkYXRlRGltZW5zaW9ucz1mdW5jdGlvbigpe3ZhciBlLHQ7dGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aD10aGlzLl9jaGFyU2l6ZVNlcnZpY2Uud2lkdGgqd2luZG93LmRldmljZVBpeGVsUmF0aW8sdGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJIZWlnaHQ9TWF0aC5jZWlsKHRoaXMuX2NoYXJTaXplU2VydmljZS5oZWlnaHQqd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGg9dGhpcy5kaW1lbnNpb25zLnNjYWxlZENoYXJXaWR0aCtNYXRoLnJvdW5kKHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubGV0dGVyU3BhY2luZyksdGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQ9TWF0aC5mbG9vcih0aGlzLmRpbWVuc2lvbnMuc2NhbGVkQ2hhckhlaWdodCp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxpbmVIZWlnaHQpLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyTGVmdD0wLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDaGFyVG9wPTAsdGhpcy5kaW1lbnNpb25zLnNjYWxlZENhbnZhc1dpZHRoPXRoaXMuZGltZW5zaW9ucy5zY2FsZWRDZWxsV2lkdGgqdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQ9dGhpcy5kaW1lbnNpb25zLnNjYWxlZENlbGxIZWlnaHQqdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLHRoaXMuZGltZW5zaW9ucy5jYW52YXNXaWR0aD1NYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNXaWR0aC93aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyksdGhpcy5kaW1lbnNpb25zLmNhbnZhc0hlaWdodD1NYXRoLnJvdW5kKHRoaXMuZGltZW5zaW9ucy5zY2FsZWRDYW52YXNIZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW8pLHRoaXMuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodD10aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0L3RoaXMuX2J1ZmZlclNlcnZpY2Uucm93czt0cnl7Zm9yKHZhciByPWEodGhpcy5fcm93RWxlbWVudHMpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKXt2YXIgbj1pLnZhbHVlO24uc3R5bGUud2lkdGg9dGhpcy5kaW1lbnNpb25zLmNhbnZhc1dpZHRoKyJweCIsbi5zdHlsZS5oZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixuLnN0eWxlLmxpbmVIZWlnaHQ9dGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixuLnN0eWxlLm92ZXJmbG93PSJoaWRkZW4ifX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19dGhpcy5fZGltZW5zaW9uc1N0eWxlRWxlbWVudHx8KHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKSx0aGlzLl9zY3JlZW5FbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQpKTt2YXIgbz10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3Mgc3BhbiB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgaGVpZ2h0OiAxMDAlOyB2ZXJ0aWNhbC1hbGlnbjogdG9wOyB3aWR0aDogIit0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKyJweH0iO3RoaXMuX2RpbWVuc2lvbnNTdHlsZUVsZW1lbnQudGV4dENvbnRlbnQ9byx0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuc3R5bGUuaGVpZ2h0PXRoaXMuX3ZpZXdwb3J0RWxlbWVudC5zdHlsZS5oZWlnaHQsdGhpcy5fc2NyZWVuRWxlbWVudC5zdHlsZS53aWR0aD10aGlzLmRpbWVuc2lvbnMuY2FudmFzV2lkdGgrInB4Iix0aGlzLl9zY3JlZW5FbGVtZW50LnN0eWxlLmhlaWdodD10aGlzLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0KyJweCJ9LHQucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt0aGlzLl9jb2xvcnM9ZSx0aGlzLl9pbmplY3RDc3MoKX0sdC5wcm90b3R5cGUuX2luamVjdENzcz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5fdGhlbWVTdHlsZUVsZW1lbnR8fCh0aGlzLl90aGVtZVN0eWxlRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLHRoaXMuX3NjcmVlbkVsZW1lbnQuYXBwZW5kQ2hpbGQodGhpcy5fdGhlbWVTdHlsZUVsZW1lbnQpKTt2YXIgdD10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3MgeyBjb2xvcjogIit0aGlzLl9jb2xvcnMuZm9yZWdyb3VuZC5jc3MrIjsgZm9udC1mYW1pbHk6ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5KyI7IGZvbnQtc2l6ZTogIit0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmZvbnRTaXplKyJweDt9Ijt0Kz10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgc3Bhbjpub3QoLiIrYy5CT0xEX0NMQVNTKyIpIHsgZm9udC13ZWlnaHQ6ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250V2VpZ2h0KyI7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIHNwYW4uIitjLkJPTERfQ0xBU1MrIiB7IGZvbnQtd2VpZ2h0OiAiK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFdlaWdodEJvbGQrIjt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgc3Bhbi4iK2MuSVRBTElDX0NMQVNTKyIgeyBmb250LXN0eWxlOiBpdGFsaWM7fSIsdCs9IkBrZXlmcmFtZXMgYmxpbmtfYm94X3NoYWRvd18iK3RoaXMuX3Rlcm1pbmFsQ2xhc3MrIiB7IDUwJSB7ICBib3gtc2hhZG93OiBub25lOyB9fSIsdCs9IkBrZXlmcmFtZXMgYmxpbmtfYmxvY2tfIit0aGlzLl90ZXJtaW5hbENsYXNzKyIgeyAwJSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyI7ICBjb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yQWNjZW50LmNzcysiOyB9IDUwJSB7ICBiYWNrZ3JvdW5kLWNvbG9yOiAiK3RoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzKyI7ICBjb2xvcjogIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiOyB9fSIsdCs9dGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzOm5vdCgueHRlcm0tZm9jdXMpIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUysiIHsgb3V0bGluZTogMXB4IHNvbGlkICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIjsgb3V0bGluZS1vZmZzZXQ6IC0xcHg7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzLnh0ZXJtLWZvY3VzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9CTElOS19DTEFTUysiOm5vdCguIitjLkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUysiKSB7IGFuaW1hdGlvbjogYmxpbmtfYm94X3NoYWRvd18iK3RoaXMuX3Rlcm1pbmFsQ2xhc3MrIiAxcyBzdGVwLWVuZCBpbmZpbml0ZTt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3MueHRlcm0tZm9jdXMgLiIrYy5DVVJTT1JfQ0xBU1MrIi4iK2MuQ1VSU09SX0JMSU5LX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9CTE9DS19DTEFTUysiIHsgYW5pbWF0aW9uOiBibGlua19ibG9ja18iK3RoaXMuX3Rlcm1pbmFsQ2xhc3MrIiAxcyBzdGVwLWVuZCBpbmZpbml0ZTt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3MueHRlcm0tZm9jdXMgLiIrYy5DVVJTT1JfQ0xBU1MrIi4iK2MuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTKyIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAiK3RoaXMuX2NvbG9ycy5jdXJzb3IuY3NzKyI7IGNvbG9yOiAiK3RoaXMuX2NvbG9ycy5jdXJzb3JBY2NlbnQuY3NzKyI7fSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC54dGVybS1yb3dzIC4iK2MuQ1VSU09SX0NMQVNTKyIuIitjLkNVUlNPUl9TVFlMRV9CQVJfQ0xBU1MrIiB7IGJveC1zaGFkb3c6ICIrdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JXaWR0aCsicHggMCAwICIrdGhpcy5fY29sb3JzLmN1cnNvci5jc3MrIiBpbnNldDt9Iit0aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLnh0ZXJtLXJvd3MgLiIrYy5DVVJTT1JfQ0xBU1MrIi4iK2MuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUysiIHsgYm94LXNoYWRvdzogMCAtMXB4IDAgIit0aGlzLl9jb2xvcnMuY3Vyc29yLmNzcysiIGluc2V0O30iLHQrPXRoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tc2VsZWN0aW9uIHsgcG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHotaW5kZXg6IDE7IHBvaW50ZXItZXZlbnRzOiBub25lO30iK3RoaXMuX3Rlcm1pbmFsU2VsZWN0b3IrIiAueHRlcm0tc2VsZWN0aW9uIGRpdiB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYmFja2dyb3VuZC1jb2xvcjogIit0aGlzLl9jb2xvcnMuc2VsZWN0aW9uT3BhcXVlLmNzcysiO30iLHRoaXMuX2NvbG9ycy5hbnNpLmZvckVhY2goKGZ1bmN0aW9uKHIsaSl7dCs9ZS5fdGVybWluYWxTZWxlY3RvcisiIC4iK3kraSsiIHsgY29sb3I6ICIrci5jc3MrIjsgfSIrZS5fdGVybWluYWxTZWxlY3RvcisiIC4iK2craSsiIHsgYmFja2dyb3VuZC1jb2xvcjogIityLmNzcysiOyB9In0pKSx0Kz10aGlzLl90ZXJtaW5hbFNlbGVjdG9yKyIgLiIreStsLklOVkVSVEVEX0RFRkFVTFRfQ09MT1IrIiB7IGNvbG9yOiAiK2QuY29sb3Iub3BhcXVlKHRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kKS5jc3MrIjsgfSIrdGhpcy5fdGVybWluYWxTZWxlY3RvcisiIC4iK2crbC5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SKyIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAiK3RoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLmNzcysiOyB9Iix0aGlzLl90aGVtZVN0eWxlRWxlbWVudC50ZXh0Q29udGVudD10fSx0LnByb3RvdHlwZS5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2U9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVEaW1lbnNpb25zKCl9LHQucHJvdG90eXBlLl9yZWZyZXNoUm93RWxlbWVudHM9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5fcm93RWxlbWVudHMubGVuZ3RoO3I8PXQ7cisrKXt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTt0aGlzLl9yb3dDb250YWluZXIuYXBwZW5kQ2hpbGQoaSksdGhpcy5fcm93RWxlbWVudHMucHVzaChpKX1mb3IoO3RoaXMuX3Jvd0VsZW1lbnRzLmxlbmd0aD50Oyl0aGlzLl9yb3dDb250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fcm93RWxlbWVudHMucG9wKCkpfSx0LnByb3RvdHlwZS5vblJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuX3JlZnJlc2hSb3dFbGVtZW50cyhlLHQpLHRoaXMuX3VwZGF0ZURpbWVuc2lvbnMoKX0sdC5wcm90b3R5cGUub25DaGFyU2l6ZUNoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl91cGRhdGVEaW1lbnNpb25zKCl9LHQucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe3RoaXMuX3Jvd0NvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKG0pfSx0LnByb3RvdHlwZS5vbkZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5fcm93Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQobSl9LHQucHJvdG90eXBlLm9uU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbihlLHQscil7Zm9yKDt0aGlzLl9zZWxlY3Rpb25Db250YWluZXIuY2hpbGRyZW4ubGVuZ3RoOyl0aGlzLl9zZWxlY3Rpb25Db250YWluZXIucmVtb3ZlQ2hpbGQodGhpcy5fc2VsZWN0aW9uQ29udGFpbmVyLmNoaWxkcmVuWzBdKTtpZih0aGlzLl9yb3dGYWN0b3J5Lm9uU2VsZWN0aW9uQ2hhbmdlZChlLHQsciksdGhpcy5yZW5kZXJSb3dzKDAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLGUmJnQpe3ZhciBpPWVbMV0tdGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asbj10WzFdLXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLG89TWF0aC5tYXgoaSwwKSxzPU1hdGgubWluKG4sdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpO2lmKCEobz49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzfHxzPDApKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7aWYocil7dmFyIGM9ZVswXT50WzBdO2EuYXBwZW5kQ2hpbGQodGhpcy5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudChvLGM/dFswXTplWzBdLGM/ZVswXTp0WzBdLHMtbysxKSl9ZWxzZXt2YXIgbD1pPT09bz9lWzBdOjAsaD1vPT09bj90WzBdOnRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczthLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQobyxsLGgpKTt2YXIgdT1zLW8tMTtpZihhLmFwcGVuZENoaWxkKHRoaXMuX2NyZWF0ZVNlbGVjdGlvbkVsZW1lbnQobysxLDAsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHUpKSxvIT09cyl7dmFyIGY9bj09PXM/dFswXTp0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7YS5hcHBlbmRDaGlsZCh0aGlzLl9jcmVhdGVTZWxlY3Rpb25FbGVtZW50KHMsMCxmKSl9fXRoaXMuX3NlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChhKX19fSx0LnByb3RvdHlwZS5fY3JlYXRlU2VsZWN0aW9uRWxlbWVudD1mdW5jdGlvbihlLHQscixpKXt2b2lkIDA9PT1pJiYoaT0xKTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtyZXR1cm4gbi5zdHlsZS5oZWlnaHQ9aSp0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCsicHgiLG4uc3R5bGUudG9wPWUqdGhpcy5kaW1lbnNpb25zLmFjdHVhbENlbGxIZWlnaHQrInB4IixuLnN0eWxlLmxlZnQ9dCp0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKyJweCIsbi5zdHlsZS53aWR0aD10aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKihyLXQpKyJweCIsbn0sdC5wcm90b3R5cGUub25DdXJzb3JNb3ZlPWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5vbk9wdGlvbnNDaGFuZ2VkPWZ1bmN0aW9uKCl7dGhpcy5fdXBkYXRlRGltZW5zaW9ucygpLHRoaXMuX2luamVjdENzcygpfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1hKHRoaXMuX3Jvd0VsZW1lbnRzKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSlpLnZhbHVlLmlubmVyVGV4dD0iIn1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYodD1yLnJldHVybikmJnQuY2FsbChyKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fSx0LnByb3RvdHlwZS5yZW5kZXJSb3dzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnliYXNlK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksaT1NYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci54LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKSxuPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY3Vyc29yQmxpbmssbz1lO288PXQ7bysrKXt2YXIgcz10aGlzLl9yb3dFbGVtZW50c1tvXTtzLmlubmVyVGV4dD0iIjt2YXIgYT1vK3RoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLGM9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KGEpLGw9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5jdXJzb3JTdHlsZTtzLmFwcGVuZENoaWxkKHRoaXMuX3Jvd0ZhY3RvcnkuY3JlYXRlUm93KGMsYSxhPT09cixsLGksbix0aGlzLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoLHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scykpfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJfdGVybWluYWxTZWxlY3RvciIse2dldDpmdW5jdGlvbigpe3JldHVybiIuIit2K3RoaXMuX3Rlcm1pbmFsQ2xhc3N9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuX29uTGlua0hvdmVyPWZ1bmN0aW9uKGUpe3RoaXMuX3NldENlbGxVbmRlcmxpbmUoZS54MSxlLngyLGUueTEsZS55MixlLmNvbHMsITApfSx0LnByb3RvdHlwZS5fb25MaW5rTGVhdmU9ZnVuY3Rpb24oZSl7dGhpcy5fc2V0Q2VsbFVuZGVybGluZShlLngxLGUueDIsZS55MSxlLnkyLGUuY29scywhMSl9LHQucHJvdG90eXBlLl9zZXRDZWxsVW5kZXJsaW5lPWZ1bmN0aW9uKGUsdCxyLGksbixvKXtmb3IoO2UhPT10fHxyIT09aTspe3ZhciBzPXRoaXMuX3Jvd0VsZW1lbnRzW3JdO2lmKCFzKXJldHVybjt2YXIgYT1zLmNoaWxkcmVuW2VdO2EmJihhLnN0eWxlLnRleHREZWNvcmF0aW9uPW8/InVuZGVybGluZSI6Im5vbmUiKSwrK2U+PW4mJihlPTAscisrKX19LG8oW3MoNixmLklJbnN0YW50aWF0aW9uU2VydmljZSkscyg3LHUuSUNoYXJTaXplU2VydmljZSkscyg4LGYuSU9wdGlvbnNTZXJ2aWNlKSxzKDksZi5JQnVmZmVyU2VydmljZSldLHQpfShoLkRpc3Bvc2FibGUpO3QuRG9tUmVuZGVyZXI9U30sMzc4NzpmdW5jdGlvbihlLHQscil7dmFyIGk9dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxuPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19LG89dGhpcyYmdGhpcy5fX3ZhbHVlc3x8ZnVuY3Rpb24oZSl7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yLHI9dCYmZVt0XSxpPTA7aWYocilyZXR1cm4gci5jYWxsKGUpO2lmKGUmJiJudW1iZXIiPT10eXBlb2YgZS5sZW5ndGgpcmV0dXJue25leHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZSYmaT49ZS5sZW5ndGgmJihlPXZvaWQgMCkse3ZhbHVlOmUmJmVbaSsrXSxkb25lOiFlfX19O3Rocm93IG5ldyBUeXBlRXJyb3IodD8iT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iOiJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRvbVJlbmRlcmVyUm93RmFjdG9yeT10LkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1M9dC5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTPXQuQ1VSU09SX1NUWUxFX0JMT0NLX0NMQVNTPXQuQ1VSU09SX0JMSU5LX0NMQVNTPXQuQ1VSU09SX0NMQVNTPXQuU1RSSUtFVEhST1VHSF9DTEFTUz10LlVOREVSTElORV9DTEFTUz10LklUQUxJQ19DTEFTUz10LkRJTV9DTEFTUz10LkJPTERfQ0xBU1M9dm9pZCAwO3ZhciBzPXIoODgwMyksYT1yKDY0MyksYz1yKDUxMSksbD1yKDI1ODUpLGg9cig4MDU1KSx1PXIoNDcyNSksZj1yKDQyNjkpLF89cigxNzUyKTt0LkJPTERfQ0xBU1M9Inh0ZXJtLWJvbGQiLHQuRElNX0NMQVNTPSJ4dGVybS1kaW0iLHQuSVRBTElDX0NMQVNTPSJ4dGVybS1pdGFsaWMiLHQuVU5ERVJMSU5FX0NMQVNTPSJ4dGVybS11bmRlcmxpbmUiLHQuU1RSSUtFVEhST1VHSF9DTEFTUz0ieHRlcm0tc3RyaWtldGhyb3VnaCIsdC5DVVJTT1JfQ0xBU1M9Inh0ZXJtLWN1cnNvciIsdC5DVVJTT1JfQkxJTktfQ0xBU1M9Inh0ZXJtLWN1cnNvci1ibGluayIsdC5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1M9Inh0ZXJtLWN1cnNvci1ibG9jayIsdC5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTPSJ4dGVybS1jdXJzb3ItYmFyIix0LkNVUlNPUl9TVFlMRV9VTkRFUkxJTkVfQ0xBU1M9Inh0ZXJtLWN1cnNvci11bmRlcmxpbmUiO3ZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4sbyl7dGhpcy5fZG9jdW1lbnQ9ZSx0aGlzLl9jb2xvcnM9dCx0aGlzLl9jaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPXIsdGhpcy5fb3B0aW9uc1NlcnZpY2U9aSx0aGlzLl9jb3JlU2VydmljZT1uLHRoaXMuX2RlY29yYXRpb25TZXJ2aWNlPW8sdGhpcy5fd29ya0NlbGw9bmV3IGMuQ2VsbERhdGEsdGhpcy5fY29sdW1uU2VsZWN0TW9kZT0hMX1yZXR1cm4gZS5wcm90b3R5cGUuc2V0Q29sb3JzPWZ1bmN0aW9uKGUpe3RoaXMuX2NvbG9ycz1lfSxlLnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3NlbGVjdGlvblN0YXJ0PWUsdGhpcy5fc2VsZWN0aW9uRW5kPXQsdGhpcy5fY29sdW1uU2VsZWN0TW9kZT1yfSxlLnByb3RvdHlwZS5jcmVhdGVSb3c9ZnVuY3Rpb24oZSxyLGksbixjLGwsdSxfKXtmb3IodmFyIGQsdix5PXRoaXMuX2RvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxnPXRoaXMuX2NoYXJhY3RlckpvaW5lclNlcnZpY2UuZ2V0Sm9pbmVkQ2hhcmFjdGVycyhyKSxtPTAsYj1NYXRoLm1pbihlLmxlbmd0aCxfKS0xO2I+PTA7Yi0tKWlmKGUubG9hZENlbGwoYix0aGlzLl93b3JrQ2VsbCkuZ2V0Q29kZSgpIT09YS5OVUxMX0NFTExfQ09ERXx8aSYmYj09PWMpe209YisxO2JyZWFrfWZvcihiPTA7YjxtO2IrKyl7ZS5sb2FkQ2VsbChiLHRoaXMuX3dvcmtDZWxsKTt2YXIgUz10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpO2lmKDAhPT1TKXt2YXIgQz0hMSx3PWIsTD10aGlzLl93b3JrQ2VsbDtpZihnLmxlbmd0aD4wJiZiPT09Z1swXVswXSl7Qz0hMDt2YXIgRT1nLnNoaWZ0KCk7TD1uZXcgZi5Kb2luZWRDZWxsRGF0YSh0aGlzLl93b3JrQ2VsbCxlLnRyYW5zbGF0ZVRvU3RyaW5nKCEwLEVbMF0sRVsxXSksRVsxXS1FWzBdKSx3PUVbMV0tMSxTPUwuZ2V0V2lkdGgoKX12YXIgeD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIik7aWYoUz4xJiYoeC5zdHlsZS53aWR0aD11KlMrInB4IiksQyYmKHguc3R5bGUuZGlzcGxheT0iaW5saW5lIixjPj1iJiZjPD13JiYoYz1iKSksIXRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuJiZpJiZiPT09Yylzd2l0Y2goeC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX0NMQVNTKSxsJiZ4LmNsYXNzTGlzdC5hZGQodC5DVVJTT1JfQkxJTktfQ0xBU1MpLG4pe2Nhc2UiYmFyIjp4LmNsYXNzTGlzdC5hZGQodC5DVVJTT1JfU1RZTEVfQkFSX0NMQVNTKTticmVhaztjYXNlInVuZGVybGluZSI6eC5jbGFzc0xpc3QuYWRkKHQuQ1VSU09SX1NUWUxFX1VOREVSTElORV9DTEFTUyk7YnJlYWs7ZGVmYXVsdDp4LmNsYXNzTGlzdC5hZGQodC5DVVJTT1JfU1RZTEVfQkxPQ0tfQ0xBU1MpfUwuaXNCb2xkKCkmJnguY2xhc3NMaXN0LmFkZCh0LkJPTERfQ0xBU1MpLEwuaXNJdGFsaWMoKSYmeC5jbGFzc0xpc3QuYWRkKHQuSVRBTElDX0NMQVNTKSxMLmlzRGltKCkmJnguY2xhc3NMaXN0LmFkZCh0LkRJTV9DTEFTUyksTC5pc1VuZGVybGluZSgpJiZ4LmNsYXNzTGlzdC5hZGQodC5VTkRFUkxJTkVfQ0xBU1MpLEwuaXNJbnZpc2libGUoKT94LnRleHRDb250ZW50PWEuV0hJVEVTUEFDRV9DRUxMX0NIQVI6eC50ZXh0Q29udGVudD1MLmdldENoYXJzKCl8fGEuV0hJVEVTUEFDRV9DRUxMX0NIQVIsTC5pc1N0cmlrZXRocm91Z2goKSYmeC5jbGFzc0xpc3QuYWRkKHQuU1RSSUtFVEhST1VHSF9DTEFTUyk7dmFyIFI9TC5nZXRGZ0NvbG9yKCksaz1MLmdldEZnQ29sb3JNb2RlKCksTT1MLmdldEJnQ29sb3IoKSxBPUwuZ2V0QmdDb2xvck1vZGUoKSxPPSEhTC5pc0ludmVyc2UoKTtpZihPKXt2YXIgRD1SO1I9TSxNPUQ7dmFyIFQ9aztrPUEsQT1UfXZhciBCPXZvaWQgMCxQPXZvaWQgMCxJPSExO3RyeXtmb3IodmFyIEg9KGQ9dm9pZCAwLG8odGhpcy5fZGVjb3JhdGlvblNlcnZpY2UuZ2V0RGVjb3JhdGlvbnNBdENlbGwoYixyKSkpLGo9SC5uZXh0KCk7IWouZG9uZTtqPUgubmV4dCgpKXt2YXIgRj1qLnZhbHVlOyJ0b3AiIT09Ri5vcHRpb25zLmxheWVyJiZJfHwoRi5iYWNrZ3JvdW5kQ29sb3JSR0ImJihBPTUwMzMxNjQ4LE09Ri5iYWNrZ3JvdW5kQ29sb3JSR0IucmdiYT4+OCYxNjc3NzIxNSxCPUYuYmFja2dyb3VuZENvbG9yUkdCKSxGLmZvcmVncm91bmRDb2xvclJHQiYmKGs9NTAzMzE2NDgsUj1GLmZvcmVncm91bmRDb2xvclJHQi5yZ2JhPj44JjE2Nzc3MjE1LFA9Ri5mb3JlZ3JvdW5kQ29sb3JSR0IpLEk9InRvcCI9PT1GLm9wdGlvbnMubGF5ZXIpfX1jYXRjaChlKXtkPXtlcnJvcjplfX1maW5hbGx5e3RyeXtqJiYhai5kb25lJiYodj1ILnJldHVybikmJnYuY2FsbChIKX1maW5hbGx5e2lmKGQpdGhyb3cgZC5lcnJvcn19dmFyIFc9dGhpcy5faXNDZWxsSW5TZWxlY3Rpb24oYixyKTtJfHx0aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZCYmVyYmKGs9NTAzMzE2NDgsUj10aGlzLl9jb2xvcnMuc2VsZWN0aW9uRm9yZWdyb3VuZC5yZ2JhPj44JjE2Nzc3MjE1LFA9dGhpcy5fY29sb3JzLnNlbGVjdGlvbkZvcmVncm91bmQpLFcmJihCPXRoaXMuX2NvbG9ycy5zZWxlY3Rpb25PcGFxdWUsST0hMCksSSYmeC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1kZWNvcmF0aW9uLXRvcCIpO3ZhciBVPXZvaWQgMDtzd2l0Y2goQSl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOlU9dGhpcy5fY29sb3JzLmFuc2lbTV0seC5jbGFzc0xpc3QuYWRkKCJ4dGVybS1iZy0iK00pO2JyZWFrO2Nhc2UgNTAzMzE2NDg6VT1oLnJnYmEudG9Db2xvcihNPj4xNixNPj44JjI1NSwyNTUmTSksdGhpcy5fYWRkU3R5bGUoeCwiYmFja2dyb3VuZC1jb2xvcjojIitwKChNPj4+MCkudG9TdHJpbmcoMTYpLCIwIiw2KSk7YnJlYWs7ZGVmYXVsdDpPPyhVPXRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLHguY2xhc3NMaXN0LmFkZCgieHRlcm0tYmctIitzLklOVkVSVEVEX0RFRkFVTFRfQ09MT1IpKTpVPXRoaXMuX2NvbG9ycy5iYWNrZ3JvdW5kfXN3aXRjaChrKXtjYXNlIDE2Nzc3MjE2OmNhc2UgMzM1NTQ0MzI6TC5pc0JvbGQoKSYmUjw4JiZ0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmRyYXdCb2xkVGV4dEluQnJpZ2h0Q29sb3JzJiYoUis9OCksdGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoeCxVLHRoaXMuX2NvbG9ycy5hbnNpW1JdLEwsQix2b2lkIDApfHx4LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWZnLSIrUik7YnJlYWs7Y2FzZSA1MDMzMTY0ODp2YXIgcT1oLnJnYmEudG9Db2xvcihSPj4xNiYyNTUsUj4+OCYyNTUsMjU1JlIpO3RoaXMuX2FwcGx5TWluaW11bUNvbnRyYXN0KHgsVSxxLEwsQixQKXx8dGhpcy5fYWRkU3R5bGUoeCwiY29sb3I6IyIrcChSLnRvU3RyaW5nKDE2KSwiMCIsNikpO2JyZWFrO2RlZmF1bHQ6dGhpcy5fYXBwbHlNaW5pbXVtQ29udHJhc3QoeCxVLHRoaXMuX2NvbG9ycy5mb3JlZ3JvdW5kLEwsQix2b2lkIDApfHxPJiZ4LmNsYXNzTGlzdC5hZGQoInh0ZXJtLWZnLSIrcy5JTlZFUlRFRF9ERUZBVUxUX0NPTE9SKX15LmFwcGVuZENoaWxkKHgpLGI9d319cmV0dXJuIHl9LGUucHJvdG90eXBlLl9hcHBseU1pbmltdW1Db250cmFzdD1mdW5jdGlvbihlLHQscixpLG4sbyl7aWYoMT09PXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMubWluaW11bUNvbnRyYXN0UmF0aW98fCgwLF8uZXhjbHVkZUZyb21Db250cmFzdFJhdGlvRGVtYW5kcykoaS5nZXRDb2RlKCkpKXJldHVybiExO3ZhciBzPXZvaWQgMDtyZXR1cm4gbnx8b3x8KHM9dGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuZ2V0Q29sb3IodC5yZ2JhLHIucmdiYSkpLHZvaWQgMD09PXMmJihzPWguY29sb3IuZW5zdXJlQ29udHJhc3RSYXRpbyhufHx0LG98fHIsdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5taW5pbXVtQ29udHJhc3RSYXRpbyksdGhpcy5fY29sb3JzLmNvbnRyYXN0Q2FjaGUuc2V0Q29sb3IoKG58fHQpLnJnYmEsKG98fHIpLnJnYmEsbnVsbCE9cz9zOm51bGwpKSwhIXMmJih0aGlzLl9hZGRTdHlsZShlLCJjb2xvcjoiK3MuY3NzKSwhMCl9LGUucHJvdG90eXBlLl9hZGRTdHlsZT1mdW5jdGlvbihlLHQpe2Uuc2V0QXR0cmlidXRlKCJzdHlsZSIsIiIrKGUuZ2V0QXR0cmlidXRlKCJzdHlsZSIpfHwiIikrdCsiOyIpfSxlLnByb3RvdHlwZS5faXNDZWxsSW5TZWxlY3Rpb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9zZWxlY3Rpb25TdGFydCxpPXRoaXMuX3NlbGVjdGlvbkVuZDtyZXR1cm4hKCFyfHwhaSkmJih0aGlzLl9jb2x1bW5TZWxlY3RNb2RlP3JbMF08PWlbMF0/ZT49clswXSYmdD49clsxXSYmZTxpWzBdJiZ0PD1pWzFdOmU8clswXSYmdD49clsxXSYmZT49aVswXSYmdDw9aVsxXTp0PnJbMV0mJnQ8aVsxXXx8clsxXT09PWlbMV0mJnQ9PT1yWzFdJiZlPj1yWzBdJiZlPGlbMF18fHJbMV08aVsxXSYmdD09PWlbMV0mJmU8aVswXXx8clsxXTxpWzFdJiZ0PT09clsxXSYmZT49clswXSl9LGkoW24oMix1LklDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlKSxuKDMsbC5JT3B0aW9uc1NlcnZpY2UpLG4oNCxsLklDb3JlU2VydmljZSksbig1LGwuSURlY29yYXRpb25TZXJ2aWNlKV0sZSl9KCk7ZnVuY3Rpb24gcChlLHQscil7Zm9yKDtlLmxlbmd0aDxyOyllPXQrZTtyZXR1cm4gZX10LkRvbVJlbmRlcmVyUm93RmFjdG9yeT1kfSw0NTY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5TZWxlY3Rpb25Nb2RlbD12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLmlzU2VsZWN0QWxsQWN0aXZlPSExLHRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGg9MH1yZXR1cm4gZS5wcm90b3R5cGUuY2xlYXJTZWxlY3Rpb249ZnVuY3Rpb24oKXt0aGlzLnNlbGVjdGlvblN0YXJ0PXZvaWQgMCx0aGlzLnNlbGVjdGlvbkVuZD12b2lkIDAsdGhpcy5pc1NlbGVjdEFsbEFjdGl2ZT0hMSx0aGlzLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPTB9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiZmluYWxTZWxlY3Rpb25TdGFydCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzU2VsZWN0QWxsQWN0aXZlP1swLDBdOnRoaXMuc2VsZWN0aW9uRW5kJiZ0aGlzLnNlbGVjdGlvblN0YXJ0JiZ0aGlzLmFyZVNlbGVjdGlvblZhbHVlc1JldmVyc2VkKCk/dGhpcy5zZWxlY3Rpb25FbmQ6dGhpcy5zZWxlY3Rpb25TdGFydH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImZpbmFsU2VsZWN0aW9uRW5kIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNTZWxlY3RBbGxBY3RpdmU/W3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55YmFzZSt0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMV06dGhpcy5zZWxlY3Rpb25TdGFydD8hdGhpcy5zZWxlY3Rpb25FbmR8fHRoaXMuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKT8oZT10aGlzLnNlbGVjdGlvblN0YXJ0WzBdK3RoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgpPnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scz9lJXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scz09MD9bdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0rTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyktMV06W2UldGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV0rTWF0aC5mbG9vcihlL3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyldOltlLHRoaXMuc2VsZWN0aW9uU3RhcnRbMV1dOnRoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgmJnRoaXMuc2VsZWN0aW9uRW5kWzFdPT09dGhpcy5zZWxlY3Rpb25TdGFydFsxXT8oZT10aGlzLnNlbGVjdGlvblN0YXJ0WzBdK3RoaXMuc2VsZWN0aW9uU3RhcnRMZW5ndGgpPnRoaXMuX2J1ZmZlclNlcnZpY2UuY29scz9bZSV0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsdGhpcy5zZWxlY3Rpb25TdGFydFsxXStNYXRoLmZsb29yKGUvdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKV06W01hdGgubWF4KGUsdGhpcy5zZWxlY3Rpb25FbmRbMF0pLHRoaXMuc2VsZWN0aW9uRW5kWzFdXTp0aGlzLnNlbGVjdGlvbkVuZDp2b2lkIDA7dmFyIGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnNlbGVjdGlvblN0YXJ0LHQ9dGhpcy5zZWxlY3Rpb25FbmQ7cmV0dXJuISghZXx8IXQpJiYoZVsxXT50WzFdfHxlWzFdPT09dFsxXSYmZVswXT50WzBdKX0sZS5wcm90b3R5cGUub25UcmltPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnNlbGVjdGlvblN0YXJ0JiYodGhpcy5zZWxlY3Rpb25TdGFydFsxXS09ZSksdGhpcy5zZWxlY3Rpb25FbmQmJih0aGlzLnNlbGVjdGlvbkVuZFsxXS09ZSksdGhpcy5zZWxlY3Rpb25FbmQmJnRoaXMuc2VsZWN0aW9uRW5kWzFdPDA/KHRoaXMuY2xlYXJTZWxlY3Rpb24oKSwhMCk6KHRoaXMuc2VsZWN0aW9uU3RhcnQmJnRoaXMuc2VsZWN0aW9uU3RhcnRbMV08MCYmKHRoaXMuc2VsZWN0aW9uU3RhcnRbMV09MCksITEpfSxlfSgpO3QuU2VsZWN0aW9uTW9kZWw9cn0sNDI4OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ2hhclNpemVTZXJ2aWNlPXZvaWQgMDt2YXIgbz1yKDI1ODUpLHM9cig4NDYwKSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscil7dGhpcy5fb3B0aW9uc1NlcnZpY2U9cix0aGlzLndpZHRoPTAsdGhpcy5oZWlnaHQ9MCx0aGlzLl9vbkNoYXJTaXplQ2hhbmdlPW5ldyBzLkV2ZW50RW1pdHRlcix0aGlzLl9tZWFzdXJlU3RyYXRlZ3k9bmV3IGMoZSx0LHRoaXMuX29wdGlvbnNTZXJ2aWNlKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJoYXNWYWxpZFNpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWR0aD4wJiZ0aGlzLmhlaWdodD4wfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25DaGFyU2l6ZUNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkNoYXJTaXplQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLm1lYXN1cmU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLl9tZWFzdXJlU3RyYXRlZ3kubWVhc3VyZSgpO2Uud2lkdGg9PT10aGlzLndpZHRoJiZlLmhlaWdodD09PXRoaXMuaGVpZ2h0fHwodGhpcy53aWR0aD1lLndpZHRoLHRoaXMuaGVpZ2h0PWUuaGVpZ2h0LHRoaXMuX29uQ2hhclNpemVDaGFuZ2UuZmlyZSgpKX0saShbbigyLG8uSU9wdGlvbnNTZXJ2aWNlKV0sZSl9KCk7dC5DaGFyU2l6ZVNlcnZpY2U9YTt2YXIgYz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIpe3RoaXMuX2RvY3VtZW50PWUsdGhpcy5fcGFyZW50RWxlbWVudD10LHRoaXMuX29wdGlvbnNTZXJ2aWNlPXIsdGhpcy5fcmVzdWx0PXt3aWR0aDowLGhlaWdodDowfSx0aGlzLl9tZWFzdXJlRWxlbWVudD10aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzcGFuIiksdGhpcy5fbWVhc3VyZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgieHRlcm0tY2hhci1tZWFzdXJlLWVsZW1lbnQiKSx0aGlzLl9tZWFzdXJlRWxlbWVudC50ZXh0Q29udGVudD0iVyIsdGhpcy5fbWVhc3VyZUVsZW1lbnQuc2V0QXR0cmlidXRlKCJhcmlhLWhpZGRlbiIsInRydWUiKSx0aGlzLl9wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuX21lYXN1cmVFbGVtZW50KX1yZXR1cm4gZS5wcm90b3R5cGUubWVhc3VyZT1mdW5jdGlvbigpe3RoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRGYW1pbHk9dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5mb250RmFtaWx5LHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmZvbnRTaXplPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZm9udFNpemUrInB4Ijt2YXIgZT10aGlzLl9tZWFzdXJlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gMCE9PWUud2lkdGgmJjAhPT1lLmhlaWdodCYmKHRoaXMuX3Jlc3VsdC53aWR0aD1lLndpZHRoLHRoaXMuX3Jlc3VsdC5oZWlnaHQ9TWF0aC5jZWlsKGUuaGVpZ2h0KSksdGhpcy5fcmVzdWx0fSxlfSgpfSw0MjY5OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNoYXJhY3RlckpvaW5lclNlcnZpY2U9dC5Kb2luZWRDZWxsRGF0YT12b2lkIDA7dmFyIGE9cigzNzM0KSxjPXIoNjQzKSxsPXIoNTExKSxoPXIoMjU4NSksdT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpKXt2YXIgbj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY29udGVudD0wLG4uY29tYmluZWREYXRhPSIiLG4uZmc9dC5mZyxuLmJnPXQuYmcsbi5jb21iaW5lZERhdGE9cixuLl93aWR0aD1pLG59cmV0dXJuIG4odCxlKSx0LnByb3RvdHlwZS5pc0NvbWJpbmVkPWZ1bmN0aW9uKCl7cmV0dXJuIDIwOTcxNTJ9LHQucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpZHRofSx0LnByb3RvdHlwZS5nZXRDaGFycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbWJpbmVkRGF0YX0sdC5wcm90b3R5cGUuZ2V0Q29kZT1mdW5jdGlvbigpe3JldHVybiAyMDk3MTUxfSx0LnByb3RvdHlwZS5zZXRGcm9tQ2hhckRhdGE9ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJub3QgaW1wbGVtZW50ZWQiKX0sdC5wcm90b3R5cGUuZ2V0QXNDaGFyRGF0YT1mdW5jdGlvbigpe3JldHVyblt0aGlzLmZnLHRoaXMuZ2V0Q2hhcnMoKSx0aGlzLmdldFdpZHRoKCksdGhpcy5nZXRDb2RlKCldfSx0fShhLkF0dHJpYnV0ZURhdGEpO3QuSm9pbmVkQ2VsbERhdGE9dTt2YXIgZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2NoYXJhY3RlckpvaW5lcnM9W10sdGhpcy5fbmV4dENoYXJhY3RlckpvaW5lcklkPTAsdGhpcy5fd29ya0NlbGw9bmV3IGwuQ2VsbERhdGF9cmV0dXJuIGUucHJvdG90eXBlLnJlZ2lzdGVyPWZ1bmN0aW9uKGUpe3ZhciB0PXtpZDp0aGlzLl9uZXh0Q2hhcmFjdGVySm9pbmVySWQrKyxoYW5kbGVyOmV9O3JldHVybiB0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLnB1c2godCksdC5pZH0sZS5wcm90b3R5cGUuZGVyZWdpc3Rlcj1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PHRoaXMuX2NoYXJhY3RlckpvaW5lcnMubGVuZ3RoO3QrKylpZih0aGlzLl9jaGFyYWN0ZXJKb2luZXJzW3RdLmlkPT09ZSlyZXR1cm4gdGhpcy5fY2hhcmFjdGVySm9pbmVycy5zcGxpY2UodCwxKSwhMDtyZXR1cm4hMX0sZS5wcm90b3R5cGUuZ2V0Sm9pbmVkQ2hhcmFjdGVycz1mdW5jdGlvbihlKXtpZigwPT09dGhpcy5fY2hhcmFjdGVySm9pbmVycy5sZW5ndGgpcmV0dXJuW107dmFyIHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KGUpO2lmKCF0fHwwPT09dC5sZW5ndGgpcmV0dXJuW107Zm9yKHZhciByPVtdLGk9dC50cmFuc2xhdGVUb1N0cmluZyghMCksbj0wLG89MCxzPTAsYT10LmdldEZnKDApLGw9dC5nZXRCZygwKSxoPTA7aDx0LmdldFRyaW1tZWRMZW5ndGgoKTtoKyspaWYodC5sb2FkQ2VsbChoLHRoaXMuX3dvcmtDZWxsKSwwIT09dGhpcy5fd29ya0NlbGwuZ2V0V2lkdGgoKSl7aWYodGhpcy5fd29ya0NlbGwuZmchPT1hfHx0aGlzLl93b3JrQ2VsbC5iZyE9PWwpe2lmKGgtbj4xKWZvcih2YXIgdT10aGlzLl9nZXRKb2luZWRSYW5nZXMoaSxzLG8sdCxuKSxmPTA7Zjx1Lmxlbmd0aDtmKyspci5wdXNoKHVbZl0pO249aCxzPW8sYT10aGlzLl93b3JrQ2VsbC5mZyxsPXRoaXMuX3dvcmtDZWxsLmJnfW8rPXRoaXMuX3dvcmtDZWxsLmdldENoYXJzKCkubGVuZ3RofHxjLldISVRFU1BBQ0VfQ0VMTF9DSEFSLmxlbmd0aH1pZih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtbj4xKWZvcih1PXRoaXMuX2dldEpvaW5lZFJhbmdlcyhpLHMsbyx0LG4pLGY9MDtmPHUubGVuZ3RoO2YrKylyLnB1c2godVtmXSk7cmV0dXJuIHJ9LGUucHJvdG90eXBlLl9nZXRKb2luZWRSYW5nZXM9ZnVuY3Rpb24odCxyLGksbixvKXt2YXIgcz10LnN1YnN0cmluZyhyLGkpLGE9W107dHJ5e2E9dGhpcy5fY2hhcmFjdGVySm9pbmVyc1swXS5oYW5kbGVyKHMpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoZSl9Zm9yKHZhciBjPTE7Yzx0aGlzLl9jaGFyYWN0ZXJKb2luZXJzLmxlbmd0aDtjKyspdHJ5e2Zvcih2YXIgbD10aGlzLl9jaGFyYWN0ZXJKb2luZXJzW2NdLmhhbmRsZXIocyksaD0wO2g8bC5sZW5ndGg7aCsrKWUuX21lcmdlUmFuZ2VzKGEsbFtoXSl9Y2F0Y2goZSl7Y29uc29sZS5lcnJvcihlKX1yZXR1cm4gdGhpcy5fc3RyaW5nUmFuZ2VzVG9DZWxsUmFuZ2VzKGEsbixvKSxhfSxlLnByb3RvdHlwZS5fc3RyaW5nUmFuZ2VzVG9DZWxsUmFuZ2VzPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT0wLG49ITEsbz0wLHM9ZVtpXTtpZihzKXtmb3IodmFyIGE9cjthPHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sczthKyspe3ZhciBsPXQuZ2V0V2lkdGgoYSksaD10LmdldFN0cmluZyhhKS5sZW5ndGh8fGMuV0hJVEVTUEFDRV9DRUxMX0NIQVIubGVuZ3RoO2lmKDAhPT1sKXtpZighbiYmc1swXTw9byYmKHNbMF09YSxuPSEwKSxzWzFdPD1vKXtpZihzWzFdPWEsIShzPWVbKytpXSkpYnJlYWs7c1swXTw9bz8oc1swXT1hLG49ITApOm49ITF9bys9aH19cyYmKHNbMV09dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKX19LGUuX21lcmdlUmFuZ2VzPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPSExLGk9MDtpPGUubGVuZ3RoO2krKyl7dmFyIG49ZVtpXTtpZihyKXtpZih0WzFdPD1uWzBdKXJldHVybiBlW2ktMV1bMV09dFsxXSxlO2lmKHRbMV08PW5bMV0pcmV0dXJuIGVbaS0xXVsxXT1NYXRoLm1heCh0WzFdLG5bMV0pLGUuc3BsaWNlKGksMSksZTtlLnNwbGljZShpLDEpLGktLX1lbHNle2lmKHRbMV08PW5bMF0pcmV0dXJuIGUuc3BsaWNlKGksMCx0KSxlO2lmKHRbMV08PW5bMV0pcmV0dXJuIG5bMF09TWF0aC5taW4odFswXSxuWzBdKSxlO3RbMF08blsxXSYmKG5bMF09TWF0aC5taW4odFswXSxuWzBdKSxyPSEwKX19cmV0dXJuIHI/ZVtlLmxlbmd0aC0xXVsxXT10WzFdOmUucHVzaCh0KSxlfSxlPW8oW3MoMCxoLklCdWZmZXJTZXJ2aWNlKV0sZSl9KCk7dC5DaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPWZ9LDUxMTQ6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db3JlQnJvd3NlclNlcnZpY2U9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl90ZXh0YXJlYT1lfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzRm9jdXNlZCIse2dldDpmdW5jdGlvbigpe3JldHVybih0aGlzLl90ZXh0YXJlYS5nZXRSb290Tm9kZT90aGlzLl90ZXh0YXJlYS5nZXRSb290Tm9kZSgpOmRvY3VtZW50KS5hY3RpdmVFbGVtZW50PT09dGhpcy5fdGV4dGFyZWEmJmRvY3VtZW50Lmhhc0ZvY3VzKCl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZX0oKTt0LkNvcmVCcm93c2VyU2VydmljZT1yfSw4OTM0OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTW91c2VTZXJ2aWNlPXZvaWQgMDt2YXIgbz1yKDQ3MjUpLHM9cig5ODA2KSxhPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3RoaXMuX3JlbmRlclNlcnZpY2U9ZSx0aGlzLl9jaGFyU2l6ZVNlcnZpY2U9dH1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0Q29vcmRzPWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJuKDAscy5nZXRDb29yZHMpKHdpbmRvdyxlLHQscixpLHRoaXMuX2NoYXJTaXplU2VydmljZS5oYXNWYWxpZFNpemUsdGhpcy5fcmVuZGVyU2VydmljZS5kaW1lbnNpb25zLmFjdHVhbENlbGxXaWR0aCx0aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCxuKX0sZS5wcm90b3R5cGUuZ2V0UmF3Qnl0ZUNvb3Jkcz1mdW5jdGlvbihlLHQscixpKXt2YXIgbj10aGlzLmdldENvb3JkcyhlLHQscixpKTtyZXR1cm4oMCxzLmdldFJhd0J5dGVDb29yZHMpKG4pfSxpKFtuKDAsby5JUmVuZGVyU2VydmljZSksbigxLG8uSUNoYXJTaXplU2VydmljZSldLGUpfSgpO3QuTW91c2VTZXJ2aWNlPWF9LDMyMzA6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSksbz10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LHM9dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUmVuZGVyU2VydmljZT12b2lkIDA7dmFyIGE9cig2MTkzKSxjPXIoODQ2MCksbD1yKDg0NCksaD1yKDU1OTYpLHU9cigzNjU2KSxmPXIoMjU4NSksXz1yKDQ3MjUpLGQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LHIsaSxuLG8scyxsKXt2YXIgZj1lLmNhbGwodGhpcyl8fHRoaXM7aWYoZi5fcmVuZGVyZXI9dCxmLl9yb3dDb3VudD1yLGYuX2NoYXJTaXplU2VydmljZT1vLGYuX2lzUGF1c2VkPSExLGYuX25lZWRzRnVsbFJlZnJlc2g9ITEsZi5faXNOZXh0UmVuZGVyUmVkcmF3T25seT0hMCxmLl9uZWVkc1NlbGVjdGlvblJlZnJlc2g9ITEsZi5fY2FudmFzV2lkdGg9MCxmLl9jYW52YXNIZWlnaHQ9MCxmLl9zZWxlY3Rpb25TdGF0ZT17c3RhcnQ6dm9pZCAwLGVuZDp2b2lkIDAsY29sdW1uU2VsZWN0TW9kZTohMX0sZi5fb25EaW1lbnNpb25zQ2hhbmdlPW5ldyBjLkV2ZW50RW1pdHRlcixmLl9vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2U9bmV3IGMuRXZlbnRFbWl0dGVyLGYuX29uUmVuZGVyPW5ldyBjLkV2ZW50RW1pdHRlcixmLl9vblJlZnJlc2hSZXF1ZXN0PW5ldyBjLkV2ZW50RW1pdHRlcixmLnJlZ2lzdGVyKHtkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIGYuX3JlbmRlcmVyLmRpc3Bvc2UoKX19KSxmLl9yZW5kZXJEZWJvdW5jZXI9bmV3IGEuUmVuZGVyRGVib3VuY2VyKChmdW5jdGlvbihlLHQpe3JldHVybiBmLl9yZW5kZXJSb3dzKGUsdCl9KSksZi5yZWdpc3RlcihmLl9yZW5kZXJEZWJvdW5jZXIpLGYuX3NjcmVlbkRwck1vbml0b3I9bmV3IGguU2NyZWVuRHByTW9uaXRvcixmLl9zY3JlZW5EcHJNb25pdG9yLnNldExpc3RlbmVyKChmdW5jdGlvbigpe3JldHVybiBmLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpfSkpLGYucmVnaXN0ZXIoZi5fc2NyZWVuRHByTW9uaXRvciksZi5yZWdpc3RlcihsLm9uUmVzaXplKChmdW5jdGlvbigpe3JldHVybiBmLl9mdWxsUmVmcmVzaCgpfSkpKSxmLnJlZ2lzdGVyKGwuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbigpe3ZhciBlO3JldHVybiBudWxsPT09KGU9Zi5fcmVuZGVyZXIpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNsZWFyKCl9KSkpLGYucmVnaXN0ZXIobi5vbk9wdGlvbkNoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gZi5faGFuZGxlT3B0aW9uc0NoYW5nZWQoKX0pKSksZi5yZWdpc3RlcihmLl9jaGFyU2l6ZVNlcnZpY2Uub25DaGFyU2l6ZUNoYW5nZSgoZnVuY3Rpb24oKXtyZXR1cm4gZi5vbkNoYXJTaXplQ2hhbmdlZCgpfSkpKSxmLnJlZ2lzdGVyKHMub25EZWNvcmF0aW9uUmVnaXN0ZXJlZCgoZnVuY3Rpb24oKXtyZXR1cm4gZi5fZnVsbFJlZnJlc2goKX0pKSksZi5yZWdpc3RlcihzLm9uRGVjb3JhdGlvblJlbW92ZWQoKGZ1bmN0aW9uKCl7cmV0dXJuIGYuX2Z1bGxSZWZyZXNoKCl9KSkpLGYuX3JlbmRlcmVyLm9uUmVxdWVzdFJlZHJhdygoZnVuY3Rpb24oZSl7cmV0dXJuIGYucmVmcmVzaFJvd3MoZS5zdGFydCxlLmVuZCwhMCl9KSksZi5yZWdpc3RlcigoMCx1LmFkZERpc3Bvc2FibGVEb21MaXN0ZW5lcikod2luZG93LCJyZXNpemUiLChmdW5jdGlvbigpe3JldHVybiBmLm9uRGV2aWNlUGl4ZWxSYXRpb0NoYW5nZSgpfSkpKSwiSW50ZXJzZWN0aW9uT2JzZXJ2ZXIiaW4gd2luZG93KXt2YXIgXz1uZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbkludGVyc2VjdGlvbkNoYW5nZShlW2UubGVuZ3RoLTFdKX0pLHt0aHJlc2hvbGQ6MH0pO18ub2JzZXJ2ZShpKSxmLnJlZ2lzdGVyKHtkaXNwb3NlOmZ1bmN0aW9uKCl7cmV0dXJuIF8uZGlzY29ubmVjdCgpfX0pfXJldHVybiBmfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRpbWVuc2lvbnNDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EaW1lbnNpb25zQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZW5kZXJlZFZpZXdwb3J0Q2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVuZGVyZWRWaWV3cG9ydENoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVuZGVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVuZGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZWZyZXNoUmVxdWVzdCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlZnJlc2hSZXF1ZXN0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiZGltZW5zaW9ucyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9yZW5kZXJlci5kaW1lbnNpb25zfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9vbkludGVyc2VjdGlvbkNoYW5nZT1mdW5jdGlvbihlKXt0aGlzLl9pc1BhdXNlZD12b2lkIDA9PT1lLmlzSW50ZXJzZWN0aW5nPzA9PT1lLmludGVyc2VjdGlvblJhdGlvOiFlLmlzSW50ZXJzZWN0aW5nLHRoaXMuX2lzUGF1c2VkfHx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UuaGFzVmFsaWRTaXplfHx0aGlzLl9jaGFyU2l6ZVNlcnZpY2UubWVhc3VyZSgpLCF0aGlzLl9pc1BhdXNlZCYmdGhpcy5fbmVlZHNGdWxsUmVmcmVzaCYmKHRoaXMucmVmcmVzaFJvd3MoMCx0aGlzLl9yb3dDb3VudC0xKSx0aGlzLl9uZWVkc0Z1bGxSZWZyZXNoPSExKX0sdC5wcm90b3R5cGUucmVmcmVzaFJvd3M9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PXImJihyPSExKSx0aGlzLl9pc1BhdXNlZD90aGlzLl9uZWVkc0Z1bGxSZWZyZXNoPSEwOihyfHwodGhpcy5faXNOZXh0UmVuZGVyUmVkcmF3T25seT0hMSksdGhpcy5fcmVuZGVyRGVib3VuY2VyLnJlZnJlc2goZSx0LHRoaXMuX3Jvd0NvdW50KSl9LHQucHJvdG90eXBlLl9yZW5kZXJSb3dzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVuZGVyZXIucmVuZGVyUm93cyhlLHQpLHRoaXMuX25lZWRzU2VsZWN0aW9uUmVmcmVzaCYmKHRoaXMuX3JlbmRlcmVyLm9uU2VsZWN0aW9uQ2hhbmdlZCh0aGlzLl9zZWxlY3Rpb25TdGF0ZS5zdGFydCx0aGlzLl9zZWxlY3Rpb25TdGF0ZS5lbmQsdGhpcy5fc2VsZWN0aW9uU3RhdGUuY29sdW1uU2VsZWN0TW9kZSksdGhpcy5fbmVlZHNTZWxlY3Rpb25SZWZyZXNoPSExKSx0aGlzLl9pc05leHRSZW5kZXJSZWRyYXdPbmx5fHx0aGlzLl9vblJlbmRlcmVkVmlld3BvcnRDaGFuZ2UuZmlyZSh7c3RhcnQ6ZSxlbmQ6dH0pLHRoaXMuX29uUmVuZGVyLmZpcmUoe3N0YXJ0OmUsZW5kOnR9KSx0aGlzLl9pc05leHRSZW5kZXJSZWRyYXdPbmx5PSEwfSx0LnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yb3dDb3VudD10LHRoaXMuX2ZpcmVPbkNhbnZhc1Jlc2l6ZSgpfSx0LnByb3RvdHlwZS5faGFuZGxlT3B0aW9uc0NoYW5nZWQ9ZnVuY3Rpb24oKXt0aGlzLl9yZW5kZXJlci5vbk9wdGlvbnNDaGFuZ2VkKCksdGhpcy5yZWZyZXNoUm93cygwLHRoaXMuX3Jvd0NvdW50LTEpLHRoaXMuX2ZpcmVPbkNhbnZhc1Jlc2l6ZSgpfSx0LnByb3RvdHlwZS5fZmlyZU9uQ2FudmFzUmVzaXplPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucy5jYW52YXNXaWR0aD09PXRoaXMuX2NhbnZhc1dpZHRoJiZ0aGlzLl9yZW5kZXJlci5kaW1lbnNpb25zLmNhbnZhc0hlaWdodD09PXRoaXMuX2NhbnZhc0hlaWdodHx8dGhpcy5fb25EaW1lbnNpb25zQ2hhbmdlLmZpcmUodGhpcy5fcmVuZGVyZXIuZGltZW5zaW9ucyl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXtlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyl9LHQucHJvdG90eXBlLnNldFJlbmRlcmVyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fcmVuZGVyZXIuZGlzcG9zZSgpLHRoaXMuX3JlbmRlcmVyPWUsdGhpcy5fcmVuZGVyZXIub25SZXF1ZXN0UmVkcmF3KChmdW5jdGlvbihlKXtyZXR1cm4gdC5yZWZyZXNoUm93cyhlLnN0YXJ0LGUuZW5kLCEwKX0pKSx0aGlzLl9uZWVkc1NlbGVjdGlvblJlZnJlc2g9ITAsdGhpcy5fZnVsbFJlZnJlc2goKX0sdC5wcm90b3R5cGUuYWRkUmVmcmVzaENhbGxiYWNrPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9yZW5kZXJEZWJvdW5jZXIuYWRkUmVmcmVzaENhbGxiYWNrKGUpfSx0LnByb3RvdHlwZS5fZnVsbFJlZnJlc2g9ZnVuY3Rpb24oKXt0aGlzLl9pc1BhdXNlZD90aGlzLl9uZWVkc0Z1bGxSZWZyZXNoPSEwOnRoaXMucmVmcmVzaFJvd3MoMCx0aGlzLl9yb3dDb3VudC0xKX0sdC5wcm90b3R5cGUuY2xlYXJUZXh0dXJlQXRsYXM9ZnVuY3Rpb24oKXt2YXIgZSx0O251bGw9PT0odD1udWxsPT09KGU9dGhpcy5fcmVuZGVyZXIpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmNsZWFyVGV4dHVyZUF0bGFzKXx8dm9pZCAwPT09dHx8dC5jYWxsKGUpLHRoaXMuX2Z1bGxSZWZyZXNoKCl9LHQucHJvdG90eXBlLnNldENvbG9ycz1mdW5jdGlvbihlKXt0aGlzLl9yZW5kZXJlci5zZXRDb2xvcnMoZSksdGhpcy5fZnVsbFJlZnJlc2goKX0sdC5wcm90b3R5cGUub25EZXZpY2VQaXhlbFJhdGlvQ2hhbmdlPWZ1bmN0aW9uKCl7dGhpcy5fY2hhclNpemVTZXJ2aWNlLm1lYXN1cmUoKSx0aGlzLl9yZW5kZXJlci5vbkRldmljZVBpeGVsUmF0aW9DaGFuZ2UoKSx0aGlzLnJlZnJlc2hSb3dzKDAsdGhpcy5fcm93Q291bnQtMSl9LHQucHJvdG90eXBlLm9uUmVzaXplPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcmVuZGVyZXIub25SZXNpemUoZSx0KSx0aGlzLl9mdWxsUmVmcmVzaCgpfSx0LnByb3RvdHlwZS5vbkNoYXJTaXplQ2hhbmdlZD1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLm9uQ2hhclNpemVDaGFuZ2VkKCl9LHQucHJvdG90eXBlLm9uQmx1cj1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLm9uQmx1cigpfSx0LnByb3RvdHlwZS5vbkZvY3VzPWZ1bmN0aW9uKCl7dGhpcy5fcmVuZGVyZXIub25Gb2N1cygpfSx0LnByb3RvdHlwZS5vblNlbGVjdGlvbkNoYW5nZWQ9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX3NlbGVjdGlvblN0YXRlLnN0YXJ0PWUsdGhpcy5fc2VsZWN0aW9uU3RhdGUuZW5kPXQsdGhpcy5fc2VsZWN0aW9uU3RhdGUuY29sdW1uU2VsZWN0TW9kZT1yLHRoaXMuX3JlbmRlcmVyLm9uU2VsZWN0aW9uQ2hhbmdlZChlLHQscil9LHQucHJvdG90eXBlLm9uQ3Vyc29yTW92ZT1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLm9uQ3Vyc29yTW92ZSgpfSx0LnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX3JlbmRlcmVyLmNsZWFyKCl9LG8oW3MoMyxmLklPcHRpb25zU2VydmljZSkscyg0LF8uSUNoYXJTaXplU2VydmljZSkscyg1LGYuSURlY29yYXRpb25TZXJ2aWNlKSxzKDYsZi5JQnVmZmVyU2VydmljZSldLHQpfShsLkRpc3Bvc2FibGUpO3QuUmVuZGVyU2VydmljZT1kfSw5MzEyOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pLG89dGhpcyYmdGhpcy5fX2RlY29yYXRlfHxmdW5jdGlvbihlLHQscixpKXt2YXIgbixvPWFyZ3VtZW50cy5sZW5ndGgscz1vPDM/dDpudWxsPT09aT9pPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTppO2lmKCJvYmplY3QiPT10eXBlb2YgUmVmbGVjdCYmImZ1bmN0aW9uIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpcz1SZWZsZWN0LmRlY29yYXRlKGUsdCxyLGkpO2Vsc2UgZm9yKHZhciBhPWUubGVuZ3RoLTE7YT49MDthLS0pKG49ZVthXSkmJihzPShvPDM/bihzKTpvPjM/bih0LHIscyk6bih0LHIpKXx8cyk7cmV0dXJuIG8+MyYmcyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQscixzKSxzfSxzPXRoaXMmJnRoaXMuX19wYXJhbXx8ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZnVuY3Rpb24ocixpKXt0KHIsaSxlKX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlNlbGVjdGlvblNlcnZpY2U9dm9pZCAwO3ZhciBhPXIoNjExNCksYz1yKDQ1NiksbD1yKDUxMSksaD1yKDg0NjApLHU9cig0NzI1KSxmPXIoMjU4NSksXz1yKDk4MDYpLGQ9cig5NTA0KSxwPXIoODQ0KSx2PXIoNDg0MSkseT1TdHJpbmcuZnJvbUNoYXJDb2RlKDE2MCksZz1uZXcgUmVnRXhwKHksImciKSxtPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbixvLHMsYSx1KXt2YXIgZj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGYuX2VsZW1lbnQ9dCxmLl9zY3JlZW5FbGVtZW50PXIsZi5fbGlua2lmaWVyPWksZi5fYnVmZmVyU2VydmljZT1uLGYuX2NvcmVTZXJ2aWNlPW8sZi5fbW91c2VTZXJ2aWNlPXMsZi5fb3B0aW9uc1NlcnZpY2U9YSxmLl9yZW5kZXJTZXJ2aWNlPXUsZi5fZHJhZ1Njcm9sbEFtb3VudD0wLGYuX2VuYWJsZWQ9ITAsZi5fd29ya0NlbGw9bmV3IGwuQ2VsbERhdGEsZi5fbW91c2VEb3duVGltZVN0YW1wPTAsZi5fb2xkSGFzU2VsZWN0aW9uPSExLGYuX29sZFNlbGVjdGlvblN0YXJ0PXZvaWQgMCxmLl9vbGRTZWxlY3Rpb25FbmQ9dm9pZCAwLGYuX29uTGludXhNb3VzZVNlbGVjdGlvbj1mLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksZi5fb25SZWRyYXdSZXF1ZXN0PWYucmVnaXN0ZXIobmV3IGguRXZlbnRFbWl0dGVyKSxmLl9vblNlbGVjdGlvbkNoYW5nZT1mLnJlZ2lzdGVyKG5ldyBoLkV2ZW50RW1pdHRlciksZi5fb25SZXF1ZXN0U2Nyb2xsTGluZXM9Zi5yZWdpc3RlcihuZXcgaC5FdmVudEVtaXR0ZXIpLGYuX21vdXNlTW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbk1vdXNlTW92ZShlKX0sZi5fbW91c2VVcExpc3RlbmVyPWZ1bmN0aW9uKGUpe3JldHVybiBmLl9vbk1vdXNlVXAoZSl9LGYuX2NvcmVTZXJ2aWNlLm9uVXNlcklucHV0KChmdW5jdGlvbigpe2YuaGFzU2VsZWN0aW9uJiZmLmNsZWFyU2VsZWN0aW9uKCl9KSksZi5fdHJpbUxpc3RlbmVyPWYuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLm9uVHJpbSgoZnVuY3Rpb24oZSl7cmV0dXJuIGYuX29uVHJpbShlKX0pKSxmLnJlZ2lzdGVyKGYuX2J1ZmZlclNlcnZpY2UuYnVmZmVycy5vbkJ1ZmZlckFjdGl2YXRlKChmdW5jdGlvbihlKXtyZXR1cm4gZi5fb25CdWZmZXJBY3RpdmF0ZShlKX0pKSksZi5lbmFibGUoKSxmLl9tb2RlbD1uZXcgYy5TZWxlY3Rpb25Nb2RlbChmLl9idWZmZXJTZXJ2aWNlKSxmLl9hY3RpdmVTZWxlY3Rpb25Nb2RlPTAsZn1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25MaW51eE1vdXNlU2VsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uTGludXhNb3VzZVNlbGVjdGlvbi5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlZHJhdyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlZHJhd1JlcXVlc3QuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNlbGVjdGlvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFNjcm9sbExpbmVzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnMoKX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCl9LHQucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5fZW5hYmxlZD0hMX0sdC5wcm90b3R5cGUuZW5hYmxlPWZ1bmN0aW9uKCl7dGhpcy5fZW5hYmxlZD0hMH0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJzZWxlY3Rpb25TdGFydCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvblN0YXJ0fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2VsZWN0aW9uRW5kIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiaGFzU2VsZWN0aW9uIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fbW9kZWwuZmluYWxTZWxlY3Rpb25TdGFydCx0PXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kO3JldHVybiEoIWV8fCF0fHxlWzBdPT09dFswXSYmZVsxXT09PXRbMV0pfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwic2VsZWN0aW9uVGV4dCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsdD10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtpZighZXx8IXQpcmV0dXJuIiI7dmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIsaT1bXTtpZigzPT09dGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZSl7aWYoZVswXT09PXRbMF0pcmV0dXJuIiI7Zm9yKHZhciBuPWVbMF08dFswXT9lWzBdOnRbMF0sbz1lWzBdPHRbMF0/dFswXTplWzBdLHM9ZVsxXTtzPD10WzFdO3MrKyl7dmFyIGM9ci50cmFuc2xhdGVCdWZmZXJMaW5lVG9TdHJpbmcocywhMCxuLG8pO2kucHVzaChjKX19ZWxzZXt2YXIgbD1lWzFdPT09dFsxXT90WzBdOnZvaWQgMDtmb3IoaS5wdXNoKHIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKGVbMV0sITAsZVswXSxsKSkscz1lWzFdKzE7czw9dFsxXS0xO3MrKyl7dmFyIGg9ci5saW5lcy5nZXQocyk7Yz1yLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhzLCEwKSwobnVsbD09aD92b2lkIDA6aC5pc1dyYXBwZWQpP2lbaS5sZW5ndGgtMV0rPWM6aS5wdXNoKGMpfWVbMV0hPT10WzFdJiYoaD1yLmxpbmVzLmdldCh0WzFdKSxjPXIudHJhbnNsYXRlQnVmZmVyTGluZVRvU3RyaW5nKHRbMV0sITAsMCx0WzBdKSxoJiZoLmlzV3JhcHBlZD9pW2kubGVuZ3RoLTFdKz1jOmkucHVzaChjKSl9cmV0dXJuIGkubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKGcsIiAiKX0pKS5qb2luKGEuaXNXaW5kb3dzPyJcclxuIjoiXG4iKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jbGVhclNlbGVjdGlvbj1mdW5jdGlvbigpe3RoaXMuX21vZGVsLmNsZWFyU2VsZWN0aW9uKCksdGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCksdGhpcy5yZWZyZXNoKCksdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSx0LnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7dGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lfHwodGhpcy5fcmVmcmVzaEFuaW1hdGlvbkZyYW1lPXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX3JlZnJlc2goKX0pKSksYS5pc0xpbnV4JiZlJiZ0aGlzLnNlbGVjdGlvblRleHQubGVuZ3RoJiZ0aGlzLl9vbkxpbnV4TW91c2VTZWxlY3Rpb24uZmlyZSh0aGlzLnNlbGVjdGlvblRleHQpfSx0LnByb3RvdHlwZS5fcmVmcmVzaD1mdW5jdGlvbigpe3RoaXMuX3JlZnJlc2hBbmltYXRpb25GcmFtZT12b2lkIDAsdGhpcy5fb25SZWRyYXdSZXF1ZXN0LmZpcmUoe3N0YXJ0OnRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsZW5kOnRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uRW5kLGNvbHVtblNlbGVjdE1vZGU6Mz09PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGV9KX0sdC5wcm90b3R5cGUuX2lzQ2xpY2tJblNlbGVjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSxyPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsaT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtyZXR1cm4hIShyJiZpJiZ0KSYmdGhpcy5fYXJlQ29vcmRzSW5TZWxlY3Rpb24odCxyLGkpfSx0LnByb3RvdHlwZS5pc0NlbGxJblNlbGVjdGlvbj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsaT10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZDtyZXR1cm4hKCFyfHwhaSkmJnRoaXMuX2FyZUNvb3Jkc0luU2VsZWN0aW9uKFtlLHRdLHIsaSl9LHQucHJvdG90eXBlLl9hcmVDb29yZHNJblNlbGVjdGlvbj1mdW5jdGlvbihlLHQscil7cmV0dXJuIGVbMV0+dFsxXSYmZVsxXTxyWzFdfHx0WzFdPT09clsxXSYmZVsxXT09PXRbMV0mJmVbMF0+PXRbMF0mJmVbMF08clswXXx8dFsxXTxyWzFdJiZlWzFdPT09clsxXSYmZVswXTxyWzBdfHx0WzFdPHJbMV0mJmVbMV09PT10WzFdJiZlWzBdPj10WzBdfSx0LnByb3RvdHlwZS5fc2VsZWN0V29yZEF0Q3Vyc29yPWZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxuPW51bGw9PT0oaT1udWxsPT09KHI9dGhpcy5fbGlua2lmaWVyLmN1cnJlbnRMaW5rKXx8dm9pZCAwPT09cj92b2lkIDA6ci5saW5rKXx8dm9pZCAwPT09aT92b2lkIDA6aS5yYW5nZTtpZihuKXJldHVybiB0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bbi5zdGFydC54LTEsbi5zdGFydC55LTFdLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPSgwLHYuZ2V0UmFuZ2VMZW5ndGgpKG4sdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwLCEwO3ZhciBvPXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpO3JldHVybiEhbyYmKHRoaXMuX3NlbGVjdFdvcmRBdChvLHQpLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD12b2lkIDAsITApfSx0LnByb3RvdHlwZS5zZWxlY3RBbGw9ZnVuY3Rpb24oKXt0aGlzLl9tb2RlbC5pc1NlbGVjdEFsbEFjdGl2ZT0hMCx0aGlzLnJlZnJlc2goKSx0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9LHQucHJvdG90eXBlLnNlbGVjdExpbmVzPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbW9kZWwuY2xlYXJTZWxlY3Rpb24oKSxlPU1hdGgubWF4KGUsMCksdD1NYXRoLm1pbih0LHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmxpbmVzLmxlbmd0aC0xKSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bMCxlXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9W3RoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0XSx0aGlzLnJlZnJlc2goKSx0aGlzLl9vblNlbGVjdGlvbkNoYW5nZS5maXJlKCl9LHQucHJvdG90eXBlLl9vblRyaW09ZnVuY3Rpb24oZSl7dGhpcy5fbW9kZWwub25UcmltKGUpJiZ0aGlzLnJlZnJlc2goKX0sdC5wcm90b3R5cGUuX2dldE1vdXNlQnVmZmVyQ29vcmRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX21vdXNlU2VydmljZS5nZXRDb29yZHMoZSx0aGlzLl9zY3JlZW5FbGVtZW50LHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsITApO2lmKHQpcmV0dXJuIHRbMF0tLSx0WzFdLS0sdFsxXSs9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3AsdH0sdC5wcm90b3R5cGUuX2dldE1vdXNlRXZlbnRTY3JvbGxBbW91bnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9KDAsXy5nZXRDb29yZHNSZWxhdGl2ZVRvRWxlbWVudCkod2luZG93LGUsdGhpcy5fc2NyZWVuRWxlbWVudClbMV0scj10aGlzLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuY2FudmFzSGVpZ2h0O3JldHVybiB0Pj0wJiZ0PD1yPzA6KHQ+ciYmKHQtPXIpLHQ9TWF0aC5taW4oTWF0aC5tYXgodCwtNTApLDUwKSwodC89NTApL01hdGguYWJzKHQpK01hdGgucm91bmQoMTQqdCkpfSx0LnByb3RvdHlwZS5zaG91bGRGb3JjZVNlbGVjdGlvbj1mdW5jdGlvbihlKXtyZXR1cm4gYS5pc01hYz9lLmFsdEtleSYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5tYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbjplLnNoaWZ0S2V5fSx0LnByb3RvdHlwZS5vbk1vdXNlRG93bj1mdW5jdGlvbihlKXtpZih0aGlzLl9tb3VzZURvd25UaW1lU3RhbXA9ZS50aW1lU3RhbXAsKDIhPT1lLmJ1dHRvbnx8IXRoaXMuaGFzU2VsZWN0aW9uKSYmMD09PWUuYnV0dG9uKXtpZighdGhpcy5fZW5hYmxlZCl7aWYoIXRoaXMuc2hvdWxkRm9yY2VTZWxlY3Rpb24oZSkpcmV0dXJuO2Uuc3RvcFByb3BhZ2F0aW9uKCl9ZS5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuX2RyYWdTY3JvbGxBbW91bnQ9MCx0aGlzLl9lbmFibGVkJiZlLnNoaWZ0S2V5P3RoaXMuX29uSW5jcmVtZW50YWxDbGljayhlKToxPT09ZS5kZXRhaWw/dGhpcy5fb25TaW5nbGVDbGljayhlKToyPT09ZS5kZXRhaWw/dGhpcy5fb25Eb3VibGVDbGljayhlKTozPT09ZS5kZXRhaWwmJnRoaXMuX29uVHJpcGxlQ2xpY2soZSksdGhpcy5fYWRkTW91c2VEb3duTGlzdGVuZXJzKCksdGhpcy5yZWZyZXNoKCEwKX19LHQucHJvdG90eXBlLl9hZGRNb3VzZURvd25MaXN0ZW5lcnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudCYmKHRoaXMuX3NjcmVlbkVsZW1lbnQub3duZXJEb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJtb3VzZW1vdmUiLHRoaXMuX21vdXNlTW92ZUxpc3RlbmVyKSx0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsdGhpcy5fbW91c2VVcExpc3RlbmVyKSksdGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXI9d2luZG93LnNldEludGVydmFsKChmdW5jdGlvbigpe3JldHVybiBlLl9kcmFnU2Nyb2xsKCl9KSw1MCl9LHQucHJvdG90eXBlLl9yZW1vdmVNb3VzZURvd25MaXN0ZW5lcnM9ZnVuY3Rpb24oKXt0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQmJih0aGlzLl9zY3JlZW5FbGVtZW50Lm93bmVyRG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIix0aGlzLl9tb3VzZU1vdmVMaXN0ZW5lciksdGhpcy5fc2NyZWVuRWxlbWVudC5vd25lckRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNldXAiLHRoaXMuX21vdXNlVXBMaXN0ZW5lcikpLGNsZWFySW50ZXJ2YWwodGhpcy5fZHJhZ1Njcm9sbEludGVydmFsVGltZXIpLHRoaXMuX2RyYWdTY3JvbGxJbnRlcnZhbFRpbWVyPXZvaWQgMH0sdC5wcm90b3R5cGUuX29uSW5jcmVtZW50YWxDbGljaz1mdW5jdGlvbihlKXt0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydCYmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKSl9LHQucHJvdG90eXBlLl9vblNpbmdsZUNsaWNrPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPTAsdGhpcy5fbW9kZWwuaXNTZWxlY3RBbGxBY3RpdmU9ITEsdGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT10aGlzLnNob3VsZENvbHVtblNlbGVjdChlKT8zOjAsdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQ9dGhpcy5fZ2V0TW91c2VCdWZmZXJDb29yZHMoZSksdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQpe3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD12b2lkIDA7dmFyIHQ9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdKTt0JiZ0Lmxlbmd0aCE9PXRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdJiYwPT09dC5oYXNXaWR0aCh0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydFswXSkmJnRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzBdKyt9fSx0LnByb3RvdHlwZS5fb25Eb3VibGVDbGljaz1mdW5jdGlvbihlKXt0aGlzLl9zZWxlY3RXb3JkQXRDdXJzb3IoZSwhMCkmJih0aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlPTEpfSx0LnByb3RvdHlwZS5fb25UcmlwbGVDbGljaz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRNb3VzZUJ1ZmZlckNvb3JkcyhlKTt0JiYodGhpcy5fYWN0aXZlU2VsZWN0aW9uTW9kZT0yLHRoaXMuX3NlbGVjdExpbmVBdCh0WzFdKSl9LHQucHJvdG90eXBlLnNob3VsZENvbHVtblNlbGVjdD1mdW5jdGlvbihlKXtyZXR1cm4gZS5hbHRLZXkmJiEoYS5pc01hYyYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5tYWNPcHRpb25DbGlja0ZvcmNlc1NlbGVjdGlvbil9LHQucHJvdG90eXBlLl9vbk1vdXNlTW92ZT1mdW5jdGlvbihlKXtpZihlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0KXt2YXIgdD10aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ/W3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV1dOm51bGw7aWYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kPXRoaXMuX2dldE1vdXNlQnVmZmVyQ29vcmRzKGUpLHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCl7Mj09PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGU/dGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdPHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0WzFdP3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT0wOnRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM6MT09PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUmJnRoaXMuX3NlbGVjdFRvV29yZEF0KHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCksdGhpcy5fZHJhZ1Njcm9sbEFtb3VudD10aGlzLl9nZXRNb3VzZUV2ZW50U2Nyb2xsQW1vdW50KGUpLDMhPT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlJiYodGhpcy5fZHJhZ1Njcm9sbEFtb3VudD4wP3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM6dGhpcy5fZHJhZ1Njcm9sbEFtb3VudDwwJiYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPTApKTt2YXIgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtpZih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMV08ci5saW5lcy5sZW5ndGgpe3ZhciBpPXIubGluZXMuZ2V0KHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXSk7aSYmMD09PWkuaGFzV2lkdGgodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdKSYmdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdKyt9dCYmdFswXT09PXRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFswXSYmdFsxXT09PXRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZFsxXXx8dGhpcy5yZWZyZXNoKCEwKX1lbHNlIHRoaXMucmVmcmVzaCghMCl9fSx0LnByb3RvdHlwZS5fZHJhZ1Njcm9sbD1mdW5jdGlvbigpe2lmKHRoaXMuX21vZGVsLnNlbGVjdGlvbkVuZCYmdGhpcy5fbW9kZWwuc2VsZWN0aW9uU3RhcnQmJnRoaXMuX2RyYWdTY3JvbGxBbW91bnQpe3RoaXMuX29uUmVxdWVzdFNjcm9sbExpbmVzLmZpcmUoe2Ftb3VudDp0aGlzLl9kcmFnU2Nyb2xsQW1vdW50LHN1cHByZXNzU2Nyb2xsRXZlbnQ6ITF9KTt2YXIgZT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjt0aGlzLl9kcmFnU2Nyb2xsQW1vdW50PjA/KDMhPT10aGlzLl9hY3RpdmVTZWxlY3Rpb25Nb2RlJiYodGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzBdPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdPU1hdGgubWluKGUueWRpc3ArdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLGUubGluZXMubGVuZ3RoLTEpKTooMyE9PXRoaXMuX2FjdGl2ZVNlbGVjdGlvbk1vZGUmJih0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmRbMF09MCksdGhpcy5fbW9kZWwuc2VsZWN0aW9uRW5kWzFdPWUueWRpc3ApLHRoaXMucmVmcmVzaCgpfX0sdC5wcm90b3R5cGUuX29uTW91c2VVcD1mdW5jdGlvbihlKXt2YXIgdD1lLnRpbWVTdGFtcC10aGlzLl9tb3VzZURvd25UaW1lU3RhbXA7aWYodGhpcy5fcmVtb3ZlTW91c2VEb3duTGlzdGVuZXJzKCksdGhpcy5zZWxlY3Rpb25UZXh0Lmxlbmd0aDw9MSYmdDw1MDAmJmUuYWx0S2V5JiZ0aGlzLl9vcHRpb25zU2VydmljZS5nZXRPcHRpb24oImFsdENsaWNrTW92ZXNDdXJzb3IiKSl7aWYodGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIueWJhc2U9PT10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci55ZGlzcCl7dmFyIHI9dGhpcy5fbW91c2VTZXJ2aWNlLmdldENvb3JkcyhlLHRoaXMuX2VsZW1lbnQsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cywhMSk7aWYociYmdm9pZCAwIT09clswXSYmdm9pZCAwIT09clsxXSl7dmFyIGk9KDAsZC5tb3ZlVG9DZWxsU2VxdWVuY2UpKHJbMF0tMSxyWzFdLTEsdGhpcy5fYnVmZmVyU2VydmljZSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25DdXJzb3JLZXlzKTt0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KGksITApfX19ZWxzZSB0aGlzLl9maXJlRXZlbnRJZlNlbGVjdGlvbkNoYW5nZWQoKX0sdC5wcm90b3R5cGUuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuX21vZGVsLmZpbmFsU2VsZWN0aW9uU3RhcnQsdD10aGlzLl9tb2RlbC5maW5hbFNlbGVjdGlvbkVuZCxyPSEoIWV8fCF0fHxlWzBdPT09dFswXSYmZVsxXT09PXRbMV0pO3I/ZSYmdCYmKHRoaXMuX29sZFNlbGVjdGlvblN0YXJ0JiZ0aGlzLl9vbGRTZWxlY3Rpb25FbmQmJmVbMF09PT10aGlzLl9vbGRTZWxlY3Rpb25TdGFydFswXSYmZVsxXT09PXRoaXMuX29sZFNlbGVjdGlvblN0YXJ0WzFdJiZ0WzBdPT09dGhpcy5fb2xkU2VsZWN0aW9uRW5kWzBdJiZ0WzFdPT09dGhpcy5fb2xkU2VsZWN0aW9uRW5kWzFdfHx0aGlzLl9maXJlT25TZWxlY3Rpb25DaGFuZ2UoZSx0LHIpKTp0aGlzLl9vbGRIYXNTZWxlY3Rpb24mJnRoaXMuX2ZpcmVPblNlbGVjdGlvbkNoYW5nZShlLHQscil9LHQucHJvdG90eXBlLl9maXJlT25TZWxlY3Rpb25DaGFuZ2U9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX29sZFNlbGVjdGlvblN0YXJ0PWUsdGhpcy5fb2xkU2VsZWN0aW9uRW5kPXQsdGhpcy5fb2xkSGFzU2VsZWN0aW9uPXIsdGhpcy5fb25TZWxlY3Rpb25DaGFuZ2UuZmlyZSgpfSx0LnByb3RvdHlwZS5fb25CdWZmZXJBY3RpdmF0ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3RoaXMuY2xlYXJTZWxlY3Rpb24oKSx0aGlzLl90cmltTGlzdGVuZXIuZGlzcG9zZSgpLHRoaXMuX3RyaW1MaXN0ZW5lcj1lLmFjdGl2ZUJ1ZmZlci5saW5lcy5vblRyaW0oKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9vblRyaW0oZSl9KSl9LHQucHJvdG90eXBlLl9jb252ZXJ0Vmlld3BvcnRDb2xUb0NoYXJhY3RlckluZGV4PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPXRbMF0saT0wO3RbMF0+PWk7aSsrKXt2YXIgbj1lLmxvYWRDZWxsKGksdGhpcy5fd29ya0NlbGwpLmdldENoYXJzKCkubGVuZ3RoOzA9PT10aGlzLl93b3JrQ2VsbC5nZXRXaWR0aCgpP3ItLTpuPjEmJnRbMF0hPT1pJiYocis9bi0xKX1yZXR1cm4gcn0sdC5wcm90b3R5cGUuc2V0U2VsZWN0aW9uPWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9tb2RlbC5jbGVhclNlbGVjdGlvbigpLHRoaXMuX3JlbW92ZU1vdXNlRG93bkxpc3RlbmVycygpLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0PVtlLHRdLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPXIsdGhpcy5yZWZyZXNoKCksdGhpcy5fZmlyZUV2ZW50SWZTZWxlY3Rpb25DaGFuZ2VkKCl9LHQucHJvdG90eXBlLnJpZ2h0Q2xpY2tTZWxlY3Q9ZnVuY3Rpb24oZSl7dGhpcy5faXNDbGlja0luU2VsZWN0aW9uKGUpfHwodGhpcy5fc2VsZWN0V29yZEF0Q3Vyc29yKGUsITEpJiZ0aGlzLnJlZnJlc2goITApLHRoaXMuX2ZpcmVFdmVudElmU2VsZWN0aW9uQ2hhbmdlZCgpKX0sdC5wcm90b3R5cGUuX2dldFdvcmRBdD1mdW5jdGlvbihlLHQscixpKXtpZih2b2lkIDA9PT1yJiYocj0hMCksdm9pZCAwPT09aSYmKGk9ITApLCEoZVswXT49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSl7dmFyIG49dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIsbz1uLmxpbmVzLmdldChlWzFdKTtpZihvKXt2YXIgcz1uLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhlWzFdLCExKSxhPXRoaXMuX2NvbnZlcnRWaWV3cG9ydENvbFRvQ2hhcmFjdGVySW5kZXgobyxlKSxjPWEsbD1lWzBdLWEsaD0wLHU9MCxmPTAsXz0wO2lmKCIgIj09PXMuY2hhckF0KGEpKXtmb3IoO2E+MCYmIiAiPT09cy5jaGFyQXQoYS0xKTspYS0tO2Zvcig7YzxzLmxlbmd0aCYmIiAiPT09cy5jaGFyQXQoYysxKTspYysrfWVsc2V7dmFyIGQ9ZVswXSxwPWVbMF07MD09PW8uZ2V0V2lkdGgoZCkmJihoKyssZC0tKSwyPT09by5nZXRXaWR0aChwKSYmKHUrKyxwKyspO3ZhciB2PW8uZ2V0U3RyaW5nKHApLmxlbmd0aDtmb3Iodj4xJiYoXys9di0xLGMrPXYtMSk7ZD4wJiZhPjAmJiF0aGlzLl9pc0NoYXJXb3JkU2VwYXJhdG9yKG8ubG9hZENlbGwoZC0xLHRoaXMuX3dvcmtDZWxsKSk7KXtvLmxvYWRDZWxsKGQtMSx0aGlzLl93b3JrQ2VsbCk7dmFyIHk9dGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGg7MD09PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCk/KGgrKyxkLS0pOnk+MSYmKGYrPXktMSxhLT15LTEpLGEtLSxkLS19Zm9yKDtwPG8ubGVuZ3RoJiZjKzE8cy5sZW5ndGgmJiF0aGlzLl9pc0NoYXJXb3JkU2VwYXJhdG9yKG8ubG9hZENlbGwocCsxLHRoaXMuX3dvcmtDZWxsKSk7KXtvLmxvYWRDZWxsKHArMSx0aGlzLl93b3JrQ2VsbCk7dmFyIGc9dGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5sZW5ndGg7Mj09PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCk/KHUrKyxwKyspOmc+MSYmKF8rPWctMSxjKz1nLTEpLGMrKyxwKyt9fWMrKzt2YXIgbT1hK2wtaCtmLGI9TWF0aC5taW4odGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGMtYStoK3UtZi1fKTtpZih0fHwiIiE9PXMuc2xpY2UoYSxjKS50cmltKCkpe2lmKHImJjA9PT1tJiYzMiE9PW8uZ2V0Q29kZVBvaW50KDApKXt2YXIgUz1uLmxpbmVzLmdldChlWzFdLTEpO2lmKFMmJm8uaXNXcmFwcGVkJiYzMiE9PVMuZ2V0Q29kZVBvaW50KHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xKSl7dmFyIEM9dGhpcy5fZ2V0V29yZEF0KFt0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSxlWzFdLTFdLCExLCEwLCExKTtpZihDKXt2YXIgdz10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtQy5zdGFydDttLT13LGIrPXd9fX1pZihpJiZtK2I9PT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMmJjMyIT09by5nZXRDb2RlUG9pbnQodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEpKXt2YXIgTD1uLmxpbmVzLmdldChlWzFdKzEpO2lmKChudWxsPT1MP3ZvaWQgMDpMLmlzV3JhcHBlZCkmJjMyIT09TC5nZXRDb2RlUG9pbnQoMCkpe3ZhciBFPXRoaXMuX2dldFdvcmRBdChbMCxlWzFdKzFdLCExLCExLCEwKTtFJiYoYis9RS5sZW5ndGgpfX1yZXR1cm57c3RhcnQ6bSxsZW5ndGg6Yn19fX19LHQucHJvdG90eXBlLl9zZWxlY3RXb3JkQXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9nZXRXb3JkQXQoZSx0KTtpZihyKXtmb3IoO3Iuc3RhcnQ8MDspci5zdGFydCs9dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLGVbMV0tLTt0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bci5zdGFydCxlWzFdXSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydExlbmd0aD1yLmxlbmd0aH19LHQucHJvdG90eXBlLl9zZWxlY3RUb1dvcmRBdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9nZXRXb3JkQXQoZSwhMCk7aWYodCl7Zm9yKHZhciByPWVbMV07dC5zdGFydDwwOyl0LnN0YXJ0Kz10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsci0tO2lmKCF0aGlzLl9tb2RlbC5hcmVTZWxlY3Rpb25WYWx1ZXNSZXZlcnNlZCgpKWZvcig7dC5zdGFydCt0Lmxlbmd0aD50aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHM7KXQubGVuZ3RoLT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMscisrO3RoaXMuX21vZGVsLnNlbGVjdGlvbkVuZD1bdGhpcy5fbW9kZWwuYXJlU2VsZWN0aW9uVmFsdWVzUmV2ZXJzZWQoKT90LnN0YXJ0OnQuc3RhcnQrdC5sZW5ndGgscl19fSx0LnByb3RvdHlwZS5faXNDaGFyV29yZFNlcGFyYXRvcj1mdW5jdGlvbihlKXtyZXR1cm4gMCE9PWUuZ2V0V2lkdGgoKSYmdGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53b3JkU2VwYXJhdG9yLmluZGV4T2YoZS5nZXRDaGFycygpKT49MH0sdC5wcm90b3R5cGUuX3NlbGVjdExpbmVBdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5nZXRXcmFwcGVkUmFuZ2VGb3JMaW5lKGUpLHI9e3N0YXJ0Ont4OjAseTp0LmZpcnN0fSxlbmQ6e3g6dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLTEseTp0Lmxhc3R9fTt0aGlzLl9tb2RlbC5zZWxlY3Rpb25TdGFydD1bMCx0LmZpcnN0XSx0aGlzLl9tb2RlbC5zZWxlY3Rpb25FbmQ9dm9pZCAwLHRoaXMuX21vZGVsLnNlbGVjdGlvblN0YXJ0TGVuZ3RoPSgwLHYuZ2V0UmFuZ2VMZW5ndGgpKHIsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKX0sbyhbcygzLGYuSUJ1ZmZlclNlcnZpY2UpLHMoNCxmLklDb3JlU2VydmljZSkscyg1LHUuSU1vdXNlU2VydmljZSkscyg2LGYuSU9wdGlvbnNTZXJ2aWNlKSxzKDcsdS5JUmVuZGVyU2VydmljZSldLHQpfShwLkRpc3Bvc2FibGUpO3QuU2VsZWN0aW9uU2VydmljZT1tfSw0NzI1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5JQ2hhcmFjdGVySm9pbmVyU2VydmljZT10LklTb3VuZFNlcnZpY2U9dC5JU2VsZWN0aW9uU2VydmljZT10LklSZW5kZXJTZXJ2aWNlPXQuSU1vdXNlU2VydmljZT10LklDb3JlQnJvd3NlclNlcnZpY2U9dC5JQ2hhclNpemVTZXJ2aWNlPXZvaWQgMDt2YXIgaT1yKDgzNDMpO3QuSUNoYXJTaXplU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIkNoYXJTaXplU2VydmljZSIpLHQuSUNvcmVCcm93c2VyU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIkNvcmVCcm93c2VyU2VydmljZSIpLHQuSU1vdXNlU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIk1vdXNlU2VydmljZSIpLHQuSVJlbmRlclNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJSZW5kZXJTZXJ2aWNlIiksdC5JU2VsZWN0aW9uU2VydmljZT0oMCxpLmNyZWF0ZURlY29yYXRvcikoIlNlbGVjdGlvblNlcnZpY2UiKSx0LklTb3VuZFNlcnZpY2U9KDAsaS5jcmVhdGVEZWNvcmF0b3IpKCJTb3VuZFNlcnZpY2UiKSx0LklDaGFyYWN0ZXJKb2luZXJTZXJ2aWNlPSgwLGkuY3JlYXRlRGVjb3JhdG9yKSgiQ2hhcmFjdGVySm9pbmVyU2VydmljZSIpfSwzNTc6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Tb3VuZFNlcnZpY2U9dm9pZCAwO3ZhciBvPXIoMjU4NSkscz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fb3B0aW9uc1NlcnZpY2U9ZX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsImF1ZGlvQ29udGV4dCIse2dldDpmdW5jdGlvbigpe2lmKCFlLl9hdWRpb0NvbnRleHQpe3ZhciB0PXdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQ7aWYoIXQpcmV0dXJuIGNvbnNvbGUud2FybigiV2ViIEF1ZGlvIEFQSSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgYnJvd3Nlci4gQ29uc2lkZXIgdXBncmFkaW5nIHRvIHRoZSBsYXRlc3QgdmVyc2lvbiIpLG51bGw7ZS5fYXVkaW9Db250ZXh0PW5ldyB0fXJldHVybiBlLl9hdWRpb0NvbnRleHR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucGxheUJlbGxTb3VuZD1mdW5jdGlvbigpe3ZhciB0PWUuYXVkaW9Db250ZXh0O2lmKHQpe3ZhciByPXQuY3JlYXRlQnVmZmVyU291cmNlKCk7dC5kZWNvZGVBdWRpb0RhdGEodGhpcy5fYmFzZTY0VG9BcnJheUJ1ZmZlcih0aGlzLl9yZW1vdmVNaW1lVHlwZSh0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmJlbGxTb3VuZCkpLChmdW5jdGlvbihlKXtyLmJ1ZmZlcj1lLHIuY29ubmVjdCh0LmRlc3RpbmF0aW9uKSxyLnN0YXJ0KDApfSkpfX0sZS5wcm90b3R5cGUuX2Jhc2U2NFRvQXJyYXlCdWZmZXI9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXdpbmRvdy5hdG9iKGUpLHI9dC5sZW5ndGgsaT1uZXcgVWludDhBcnJheShyKSxuPTA7bjxyO24rKylpW25dPXQuY2hhckNvZGVBdChuKTtyZXR1cm4gaS5idWZmZXJ9LGUucHJvdG90eXBlLl9yZW1vdmVNaW1lVHlwZT1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcGxpdCgiLCIpWzFdfSxlPWkoW24oMCxvLklPcHRpb25zU2VydmljZSldLGUpfSgpO3QuU291bmRTZXJ2aWNlPXN9LDYzNDk6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkNpcmN1bGFyTGlzdD12b2lkIDA7dmFyIGk9cig4NDYwKSxuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9tYXhMZW5ndGg9ZSx0aGlzLm9uRGVsZXRlRW1pdHRlcj1uZXcgaS5FdmVudEVtaXR0ZXIsdGhpcy5vbkluc2VydEVtaXR0ZXI9bmV3IGkuRXZlbnRFbWl0dGVyLHRoaXMub25UcmltRW1pdHRlcj1uZXcgaS5FdmVudEVtaXR0ZXIsdGhpcy5fYXJyYXk9bmV3IEFycmF5KHRoaXMuX21heExlbmd0aCksdGhpcy5fc3RhcnRJbmRleD0wLHRoaXMuX2xlbmd0aD0wfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uRGVsZXRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub25EZWxldGVFbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25JbnNlcnQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vbkluc2VydEVtaXR0ZXIuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvblRyaW0iLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vblRyaW1FbWl0dGVyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibWF4TGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heExlbmd0aH0sc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMuX21heExlbmd0aCE9PWUpe2Zvcih2YXIgdD1uZXcgQXJyYXkoZSkscj0wO3I8TWF0aC5taW4oZSx0aGlzLmxlbmd0aCk7cisrKXRbcl09dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgocildO3RoaXMuX2FycmF5PXQsdGhpcy5fbWF4TGVuZ3RoPWUsdGhpcy5fc3RhcnRJbmRleD0wfX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sZW5ndGh9LHNldDpmdW5jdGlvbihlKXtpZihlPnRoaXMuX2xlbmd0aClmb3IodmFyIHQ9dGhpcy5fbGVuZ3RoO3Q8ZTt0KyspdGhpcy5fYXJyYXlbdF09dm9pZCAwO3RoaXMuX2xlbmd0aD1lfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoZSldfSxlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChlKV09dH0sZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihlKXt0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleCh0aGlzLl9sZW5ndGgpXT1lLHRoaXMuX2xlbmd0aD09PXRoaXMuX21heExlbmd0aD8odGhpcy5fc3RhcnRJbmRleD0rK3RoaXMuX3N0YXJ0SW5kZXgldGhpcy5fbWF4TGVuZ3RoLHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpKTp0aGlzLl9sZW5ndGgrK30sZS5wcm90b3R5cGUucmVjeWNsZT1mdW5jdGlvbigpe2lmKHRoaXMuX2xlbmd0aCE9PXRoaXMuX21heExlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkNhbiBvbmx5IHJlY3ljbGUgd2hlbiB0aGUgYnVmZmVyIGlzIGZ1bGwiKTtyZXR1cm4gdGhpcy5fc3RhcnRJbmRleD0rK3RoaXMuX3N0YXJ0SW5kZXgldGhpcy5fbWF4TGVuZ3RoLHRoaXMub25UcmltRW1pdHRlci5maXJlKDEpLHRoaXMuX2FycmF5W3RoaXMuX2dldEN5Y2xpY0luZGV4KHRoaXMuX2xlbmd0aC0xKV19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiaXNGdWxsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlbmd0aD09PXRoaXMuX21heExlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5wb3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgodGhpcy5fbGVuZ3RoLS0tMSldfSxlLnByb3RvdHlwZS5zcGxpY2U9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10saT0yO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspcltpLTJdPWFyZ3VtZW50c1tpXTtpZih0KXtmb3IodmFyIG49ZTtuPHRoaXMuX2xlbmd0aC10O24rKyl0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChuKV09dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgobit0KV07dGhpcy5fbGVuZ3RoLT10LHRoaXMub25EZWxldGVFbWl0dGVyLmZpcmUoe2luZGV4OmUsYW1vdW50OnR9KX1mb3Iobj10aGlzLl9sZW5ndGgtMTtuPj1lO24tLSl0aGlzLl9hcnJheVt0aGlzLl9nZXRDeWNsaWNJbmRleChuK3IubGVuZ3RoKV09dGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgobildO2ZvcihuPTA7bjxyLmxlbmd0aDtuKyspdGhpcy5fYXJyYXlbdGhpcy5fZ2V0Q3ljbGljSW5kZXgoZStuKV09cltuXTtpZihyLmxlbmd0aCYmdGhpcy5vbkluc2VydEVtaXR0ZXIuZmlyZSh7aW5kZXg6ZSxhbW91bnQ6ci5sZW5ndGh9KSx0aGlzLl9sZW5ndGgrci5sZW5ndGg+dGhpcy5fbWF4TGVuZ3RoKXt2YXIgbz10aGlzLl9sZW5ndGgrci5sZW5ndGgtdGhpcy5fbWF4TGVuZ3RoO3RoaXMuX3N0YXJ0SW5kZXgrPW8sdGhpcy5fbGVuZ3RoPXRoaXMuX21heExlbmd0aCx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZShvKX1lbHNlIHRoaXMuX2xlbmd0aCs9ci5sZW5ndGh9LGUucHJvdG90eXBlLnRyaW1TdGFydD1mdW5jdGlvbihlKXtlPnRoaXMuX2xlbmd0aCYmKGU9dGhpcy5fbGVuZ3RoKSx0aGlzLl9zdGFydEluZGV4Kz1lLHRoaXMuX2xlbmd0aC09ZSx0aGlzLm9uVHJpbUVtaXR0ZXIuZmlyZShlKX0sZS5wcm90b3R5cGUuc2hpZnRFbGVtZW50cz1mdW5jdGlvbihlLHQscil7aWYoISh0PD0wKSl7aWYoZTwwfHxlPj10aGlzLl9sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJzdGFydCBhcmd1bWVudCBvdXQgb2YgcmFuZ2UiKTtpZihlK3I8MCl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBzaGlmdCBlbGVtZW50cyBpbiBsaXN0IGJleW9uZCBpbmRleCAwIik7aWYocj4wKXtmb3IodmFyIGk9dC0xO2k+PTA7aS0tKXRoaXMuc2V0KGUraStyLHRoaXMuZ2V0KGUraSkpO3ZhciBuPWUrdCtyLXRoaXMuX2xlbmd0aDtpZihuPjApZm9yKHRoaXMuX2xlbmd0aCs9bjt0aGlzLl9sZW5ndGg+dGhpcy5fbWF4TGVuZ3RoOyl0aGlzLl9sZW5ndGgtLSx0aGlzLl9zdGFydEluZGV4KyssdGhpcy5vblRyaW1FbWl0dGVyLmZpcmUoMSl9ZWxzZSBmb3IoaT0wO2k8dDtpKyspdGhpcy5zZXQoZStpK3IsdGhpcy5nZXQoZStpKSl9fSxlLnByb3RvdHlwZS5fZ2V0Q3ljbGljSW5kZXg9ZnVuY3Rpb24oZSl7cmV0dXJuKHRoaXMuX3N0YXJ0SW5kZXgrZSkldGhpcy5fbWF4TGVuZ3RofSxlfSgpO3QuQ2lyY3VsYXJMaXN0PW59LDE0Mzk6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5jbG9uZT12b2lkIDAsdC5jbG9uZT1mdW5jdGlvbiBlKHQscil7aWYodm9pZCAwPT09ciYmKHI9NSksIm9iamVjdCIhPXR5cGVvZiB0KXJldHVybiB0O3ZhciBpPUFycmF5LmlzQXJyYXkodCk/W106e307Zm9yKHZhciBuIGluIHQpaVtuXT1yPD0xP3Rbbl06dFtuXSYmZSh0W25dLHItMSk7cmV0dXJuIGl9fSw4MDU1OmZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxuLG8scz10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9O2Z1bmN0aW9uIGEoZSl7dmFyIHQ9ZS50b1N0cmluZygxNik7cmV0dXJuIHQubGVuZ3RoPDI/IjAiK3Q6dH1mdW5jdGlvbiBjKGUsdCl7cmV0dXJuIGU8dD8odCsuMDUpLyhlKy4wNSk6KGUrLjA1KS8odCsuMDUpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmNvbnRyYXN0UmF0aW89dC50b1BhZGRlZEhleD10LnJnYmE9dC5yZ2I9dC5jc3M9dC5jb2xvcj10LmNoYW5uZWxzPXZvaWQgMCxmdW5jdGlvbihlKXtlLnRvQ3NzPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiB2b2lkIDAhPT1pPyIjIithKGUpK2EodCkrYShyKSthKGkpOiIjIithKGUpK2EodCkrYShyKX0sZS50b1JnYmE9ZnVuY3Rpb24oZSx0LHIsaSl7cmV0dXJuIHZvaWQgMD09PWkmJihpPTI1NSksKGU8PDI0fHQ8PDE2fHI8PDh8aSk+Pj4wfX0ocj10LmNoYW5uZWxzfHwodC5jaGFubmVscz17fSkpLChpPXQuY29sb3J8fCh0LmNvbG9yPXt9KSkuYmxlbmQ9ZnVuY3Rpb24oZSx0KXt2YXIgaT0oMjU1JnQucmdiYSkvMjU1O2lmKDE9PT1pKXJldHVybntjc3M6dC5jc3MscmdiYTp0LnJnYmF9O3ZhciBuPXQucmdiYT4+MjQmMjU1LG89dC5yZ2JhPj4xNiYyNTUscz10LnJnYmE+PjgmMjU1LGE9ZS5yZ2JhPj4yNCYyNTUsYz1lLnJnYmE+PjE2JjI1NSxsPWUucmdiYT4+OCYyNTUsaD1hK01hdGgucm91bmQoKG4tYSkqaSksdT1jK01hdGgucm91bmQoKG8tYykqaSksZj1sK01hdGgucm91bmQoKHMtbCkqaSk7cmV0dXJue2NzczpyLnRvQ3NzKGgsdSxmKSxyZ2JhOnIudG9SZ2JhKGgsdSxmKX19LGkuaXNPcGFxdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIDI1NT09KDI1NSZlLnJnYmEpfSxpLmVuc3VyZUNvbnRyYXN0UmF0aW89ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPW8uZW5zdXJlQ29udHJhc3RSYXRpbyhlLnJnYmEsdC5yZ2JhLHIpO2lmKGkpcmV0dXJuIG8udG9Db2xvcihpPj4yNCYyNTUsaT4+MTYmMjU1LGk+PjgmMjU1KX0saS5vcGFxdWU9ZnVuY3Rpb24oZSl7dmFyIHQ9KDI1NXxlLnJnYmEpPj4+MCxpPXMoby50b0NoYW5uZWxzKHQpLDMpLG49aVswXSxhPWlbMV0sYz1pWzJdO3JldHVybntjc3M6ci50b0NzcyhuLGEsYykscmdiYTp0fX0saS5vcGFjaXR5PWZ1bmN0aW9uKGUsdCl7dmFyIGk9TWF0aC5yb3VuZCgyNTUqdCksbj1zKG8udG9DaGFubmVscyhlLnJnYmEpLDMpLGE9blswXSxjPW5bMV0sbD1uWzJdO3JldHVybntjc3M6ci50b0NzcyhhLGMsbCxpKSxyZ2JhOnIudG9SZ2JhKGEsYyxsLGkpfX0saS50b0NvbG9yUkdCPWZ1bmN0aW9uKGUpe3JldHVybltlLnJnYmE+PjI0JjI1NSxlLnJnYmE+PjE2JjI1NSxlLnJnYmE+PjgmMjU1XX0sKHQuY3NzfHwodC5jc3M9e30pKS50b0NvbG9yPWZ1bmN0aW9uKGUpe2lmKGUubWF0Y2goLyNbMC05YS1mXXszLDh9L2kpKXN3aXRjaChlLmxlbmd0aCl7Y2FzZSA0OnZhciB0PXBhcnNlSW50KGUuc2xpY2UoMSwyKS5yZXBlYXQoMiksMTYpLHI9cGFyc2VJbnQoZS5zbGljZSgyLDMpLnJlcGVhdCgyKSwxNiksaT1wYXJzZUludChlLnNsaWNlKDMsNCkucmVwZWF0KDIpLDE2KTtyZXR1cm4gby50b0NvbG9yKHQscixpKTtjYXNlIDU6dD1wYXJzZUludChlLnNsaWNlKDEsMikucmVwZWF0KDIpLDE2KSxyPXBhcnNlSW50KGUuc2xpY2UoMiwzKS5yZXBlYXQoMiksMTYpLGk9cGFyc2VJbnQoZS5zbGljZSgzLDQpLnJlcGVhdCgyKSwxNik7dmFyIG49cGFyc2VJbnQoZS5zbGljZSg0LDUpLnJlcGVhdCgyKSwxNik7cmV0dXJuIG8udG9Db2xvcih0LHIsaSxuKTtjYXNlIDc6cmV0dXJue2NzczplLHJnYmE6KHBhcnNlSW50KGUuc2xpY2UoMSksMTYpPDw4fDI1NSk+Pj4wfTtjYXNlIDk6cmV0dXJue2NzczplLHJnYmE6cGFyc2VJbnQoZS5zbGljZSgxKSwxNik+Pj4wfX12YXIgcz1lLm1hdGNoKC9yZ2JhP1woXHMqKFxkezEsM30pXHMqLFxzKihcZHsxLDN9KVxzKixccyooXGR7MSwzfSlccyooLFxzKigwfDF8XGQ/XC4oXGQrKSlccyopP1wpLyk7aWYocylyZXR1cm4gdD1wYXJzZUludChzWzFdKSxyPXBhcnNlSW50KHNbMl0pLGk9cGFyc2VJbnQoc1szXSksbj1NYXRoLnJvdW5kKDI1NSoodm9pZCAwPT09c1s1XT8xOnBhcnNlRmxvYXQoc1s1XSkpKSxvLnRvQ29sb3IodCxyLGksbik7dGhyb3cgbmV3IEVycm9yKCJjc3MudG9Db2xvcjogVW5zdXBwb3J0ZWQgY3NzIGZvcm1hdCIpfSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxyKXt2YXIgaT1lLzI1NSxuPXQvMjU1LG89ci8yNTU7cmV0dXJuLjIxMjYqKGk8PS4wMzkyOD9pLzEyLjkyOk1hdGgucG93KChpKy4wNTUpLzEuMDU1LDIuNCkpKy43MTUyKihuPD0uMDM5Mjg/bi8xMi45MjpNYXRoLnBvdygobisuMDU1KS8xLjA1NSwyLjQpKSsuMDcyMioobzw9LjAzOTI4P28vMTIuOTI6TWF0aC5wb3coKG8rLjA1NSkvMS4wNTUsMi40KSl9ZS5yZWxhdGl2ZUx1bWluYW5jZT1mdW5jdGlvbihlKXtyZXR1cm4gdChlPj4xNiYyNTUsZT4+OCYyNTUsMjU1JmUpfSxlLnJlbGF0aXZlTHVtaW5hbmNlMj10fShuPXQucmdifHwodC5yZ2I9e30pKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCxyKXtmb3IodmFyIGk9ZT4+MjQmMjU1LG89ZT4+MTYmMjU1LHM9ZT4+OCYyNTUsYT10Pj4yNCYyNTUsbD10Pj4xNiYyNTUsaD10Pj44JjI1NSx1PWMobi5yZWxhdGl2ZUx1bWluYW5jZTIoYSxsLGgpLG4ucmVsYXRpdmVMdW1pbmFuY2UyKGksbyxzKSk7dTxyJiYoYT4wfHxsPjB8fGg+MCk7KWEtPU1hdGgubWF4KDAsTWF0aC5jZWlsKC4xKmEpKSxsLT1NYXRoLm1heCgwLE1hdGguY2VpbCguMSpsKSksaC09TWF0aC5tYXgoMCxNYXRoLmNlaWwoLjEqaCkpLHU9YyhuLnJlbGF0aXZlTHVtaW5hbmNlMihhLGwsaCksbi5yZWxhdGl2ZUx1bWluYW5jZTIoaSxvLHMpKTtyZXR1cm4oYTw8MjR8bDw8MTZ8aDw8OHwyNTUpPj4+MH1mdW5jdGlvbiBpKGUsdCxyKXtmb3IodmFyIGk9ZT4+MjQmMjU1LG89ZT4+MTYmMjU1LHM9ZT4+OCYyNTUsYT10Pj4yNCYyNTUsbD10Pj4xNiYyNTUsaD10Pj44JjI1NSx1PWMobi5yZWxhdGl2ZUx1bWluYW5jZTIoYSxsLGgpLG4ucmVsYXRpdmVMdW1pbmFuY2UyKGksbyxzKSk7dTxyJiYoYTwyNTV8fGw8MjU1fHxoPDI1NSk7KWE9TWF0aC5taW4oMjU1LGErTWF0aC5jZWlsKC4xKigyNTUtYSkpKSxsPU1hdGgubWluKDI1NSxsK01hdGguY2VpbCguMSooMjU1LWwpKSksaD1NYXRoLm1pbigyNTUsaCtNYXRoLmNlaWwoLjEqKDI1NS1oKSkpLHU9YyhuLnJlbGF0aXZlTHVtaW5hbmNlMihhLGwsaCksbi5yZWxhdGl2ZUx1bWluYW5jZTIoaSxvLHMpKTtyZXR1cm4oYTw8MjR8bDw8MTZ8aDw8OHwyNTUpPj4+MH1lLmVuc3VyZUNvbnRyYXN0UmF0aW89ZnVuY3Rpb24oZSxyLG8pe3ZhciBzPW4ucmVsYXRpdmVMdW1pbmFuY2UoZT4+OCksYT1uLnJlbGF0aXZlTHVtaW5hbmNlKHI+PjgpO2lmKGMocyxhKTxvKXtpZihhPHMpe3ZhciBsPXQoZSxyLG8pLGg9YyhzLG4ucmVsYXRpdmVMdW1pbmFuY2UobD4+OCkpO2lmKGg8byl7dmFyIHU9aShlLGUsbyk7cmV0dXJuIGg+YyhzLG4ucmVsYXRpdmVMdW1pbmFuY2UodT4+OCkpP2w6dX1yZXR1cm4gbH12YXIgZj1pKGUscixvKSxfPWMocyxuLnJlbGF0aXZlTHVtaW5hbmNlKGY+PjgpKTtyZXR1cm4gXzxvPyh1PXQoZSxlLG8pLF8+YyhzLG4ucmVsYXRpdmVMdW1pbmFuY2UodT4+OCkpP2Y6dSk6Zn19LGUucmVkdWNlTHVtaW5hbmNlPXQsZS5pbmNyZWFzZUx1bWluYW5jZT1pLGUudG9DaGFubmVscz1mdW5jdGlvbihlKXtyZXR1cm5bZT4+MjQmMjU1LGU+PjE2JjI1NSxlPj44JjI1NSwyNTUmZV19LGUudG9Db2xvcj1mdW5jdGlvbihlLHQsaSxuKXtyZXR1cm57Y3NzOnIudG9Dc3MoZSx0LGksbikscmdiYTpyLnRvUmdiYShlLHQsaSxuKX19fShvPXQucmdiYXx8KHQucmdiYT17fSkpLHQudG9QYWRkZWRIZXg9YSx0LmNvbnRyYXN0UmF0aW89Y30sODk2OTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db3JlVGVybWluYWw9dm9pZCAwO3ZhciBzPXIoODQ0KSxhPXIoMjU4NSksYz1yKDQzNDgpLGw9cig3ODY2KSxoPXIoNzQ0KSx1PXIoNzMwMiksZj1yKDY5NzUpLF89cig4NDYwKSxkPXIoMTc1MykscD1yKDM3MzApLHY9cigxNDgwKSx5PXIoNzk5NCksZz1yKDkyODIpLG09cig1NDM1KSxiPXIoNTk4MSksUz0hMSxDPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLl9vbkJpbmFyeT1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25EYXRhPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9vbkxpbmVGZWVkPW5ldyBfLkV2ZW50RW1pdHRlcixyLl9vblJlc2l6ZT1uZXcgXy5FdmVudEVtaXR0ZXIsci5fb25TY3JvbGw9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX29uV3JpdGVQYXJzZWQ9bmV3IF8uRXZlbnRFbWl0dGVyLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlPW5ldyBjLkluc3RhbnRpYXRpb25TZXJ2aWNlLHIub3B0aW9uc1NlcnZpY2U9bmV3IHUuT3B0aW9uc1NlcnZpY2UodCksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklPcHRpb25zU2VydmljZSxyLm9wdGlvbnNTZXJ2aWNlKSxyLl9idWZmZXJTZXJ2aWNlPXIucmVnaXN0ZXIoci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoaC5CdWZmZXJTZXJ2aWNlKSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklCdWZmZXJTZXJ2aWNlLHIuX2J1ZmZlclNlcnZpY2UpLHIuX2xvZ1NlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UobC5Mb2dTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSUxvZ1NlcnZpY2Usci5fbG9nU2VydmljZSksci5jb3JlU2VydmljZT1yLnJlZ2lzdGVyKHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKGYuQ29yZVNlcnZpY2UsKGZ1bmN0aW9uKCl7cmV0dXJuIHIuc2Nyb2xsVG9Cb3R0b20oKX0pKSksci5faW5zdGFudGlhdGlvblNlcnZpY2Uuc2V0U2VydmljZShhLklDb3JlU2VydmljZSxyLmNvcmVTZXJ2aWNlKSxyLmNvcmVNb3VzZVNlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UoZC5Db3JlTW91c2VTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSUNvcmVNb3VzZVNlcnZpY2Usci5jb3JlTW91c2VTZXJ2aWNlKSxyLl9kaXJ0eVJvd1NlcnZpY2U9ci5faW5zdGFudGlhdGlvblNlcnZpY2UuY3JlYXRlSW5zdGFuY2UocC5EaXJ0eVJvd1NlcnZpY2UpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JRGlydHlSb3dTZXJ2aWNlLHIuX2RpcnR5Um93U2VydmljZSksci51bmljb2RlU2VydmljZT1yLl9pbnN0YW50aWF0aW9uU2VydmljZS5jcmVhdGVJbnN0YW5jZSh2LlVuaWNvZGVTZXJ2aWNlKSxyLl9pbnN0YW50aWF0aW9uU2VydmljZS5zZXRTZXJ2aWNlKGEuSVVuaWNvZGVTZXJ2aWNlLHIudW5pY29kZVNlcnZpY2UpLHIuX2NoYXJzZXRTZXJ2aWNlPXIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLmNyZWF0ZUluc3RhbmNlKHkuQ2hhcnNldFNlcnZpY2UpLHIuX2luc3RhbnRpYXRpb25TZXJ2aWNlLnNldFNlcnZpY2UoYS5JQ2hhcnNldFNlcnZpY2Usci5fY2hhcnNldFNlcnZpY2UpLHIuX2lucHV0SGFuZGxlcj1uZXcgbS5JbnB1dEhhbmRsZXIoci5fYnVmZmVyU2VydmljZSxyLl9jaGFyc2V0U2VydmljZSxyLmNvcmVTZXJ2aWNlLHIuX2RpcnR5Um93U2VydmljZSxyLl9sb2dTZXJ2aWNlLHIub3B0aW9uc1NlcnZpY2Usci5jb3JlTW91c2VTZXJ2aWNlLHIudW5pY29kZVNlcnZpY2UpLHIucmVnaXN0ZXIoKDAsXy5mb3J3YXJkRXZlbnQpKHIuX2lucHV0SGFuZGxlci5vbkxpbmVGZWVkLHIuX29uTGluZUZlZWQpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlciksci5yZWdpc3RlcigoMCxfLmZvcndhcmRFdmVudCkoci5fYnVmZmVyU2VydmljZS5vblJlc2l6ZSxyLl9vblJlc2l6ZSkpLHIucmVnaXN0ZXIoKDAsXy5mb3J3YXJkRXZlbnQpKHIuY29yZVNlcnZpY2Uub25EYXRhLHIuX29uRGF0YSkpLHIucmVnaXN0ZXIoKDAsXy5mb3J3YXJkRXZlbnQpKHIuY29yZVNlcnZpY2Uub25CaW5hcnksci5fb25CaW5hcnkpKSxyLnJlZ2lzdGVyKHIub3B0aW9uc1NlcnZpY2Uub25PcHRpb25DaGFuZ2UoKGZ1bmN0aW9uKGUpe3JldHVybiByLl91cGRhdGVPcHRpb25zKGUpfSkpKSxyLnJlZ2lzdGVyKHIuX2J1ZmZlclNlcnZpY2Uub25TY3JvbGwoKGZ1bmN0aW9uKGUpe3IuX29uU2Nyb2xsLmZpcmUoe3Bvc2l0aW9uOnIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnlkaXNwLHNvdXJjZTowfSksci5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbFRvcCxyLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20pfSkpKSxyLnJlZ2lzdGVyKHIuX2lucHV0SGFuZGxlci5vblNjcm9sbCgoZnVuY3Rpb24oZSl7ci5fb25TY3JvbGwuZmlyZSh7cG9zaXRpb246ci5fYnVmZmVyU2VydmljZS5idWZmZXIueWRpc3Asc291cmNlOjB9KSxyLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkoci5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wLHIuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnNjcm9sbEJvdHRvbSl9KSkpLHIuX3dyaXRlQnVmZmVyPW5ldyBiLldyaXRlQnVmZmVyKChmdW5jdGlvbihlLHQpe3JldHVybiByLl9pbnB1dEhhbmRsZXIucGFyc2UoZSx0KX0pKSxyLnJlZ2lzdGVyKCgwLF8uZm9yd2FyZEV2ZW50KShyLl93cml0ZUJ1ZmZlci5vbldyaXRlUGFyc2VkLHIuX29uV3JpdGVQYXJzZWQpKSxyfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkJpbmFyeSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJpbmFyeS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRGF0YSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkRhdGEuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkxpbmVGZWVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uTGluZUZlZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlc2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlc2l6ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uV3JpdGVQYXJzZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Xcml0ZVBhcnNlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uU2Nyb2xsIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fb25TY3JvbGxBcGl8fCh0aGlzLl9vblNjcm9sbEFwaT1uZXcgXy5FdmVudEVtaXR0ZXIsdGhpcy5yZWdpc3Rlcih0aGlzLl9vblNjcm9sbC5ldmVudCgoZnVuY3Rpb24odCl7dmFyIHI7bnVsbD09PShyPWUuX29uU2Nyb2xsQXBpKXx8dm9pZCAwPT09cnx8ci5maXJlKHQucG9zaXRpb24pfSkpKSksdGhpcy5fb25TY3JvbGxBcGkuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJjb2xzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclNlcnZpY2UuY29sc30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsInJvd3MiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYnVmZmVycyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvcHRpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9uc30sc2V0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKXRoaXMub3B0aW9uc1NlcnZpY2Uub3B0aW9uc1t0XT1lW3RdfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt2YXIgdDt0aGlzLl9pc0Rpc3Bvc2VkfHwoZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpLG51bGw9PT0odD10aGlzLl93aW5kb3dzTW9kZSl8fHZvaWQgMD09PXR8fHQuZGlzcG9zZSgpLHRoaXMuX3dpbmRvd3NNb2RlPXZvaWQgMCl9LHQucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKGUsdCl7dGhpcy5fd3JpdGVCdWZmZXIud3JpdGUoZSx0KX0sdC5wcm90b3R5cGUud3JpdGVTeW5jPWZ1bmN0aW9uKGUsdCl7dGhpcy5fbG9nU2VydmljZS5sb2dMZXZlbDw9YS5Mb2dMZXZlbEVudW0uV0FSTiYmIVMmJih0aGlzLl9sb2dTZXJ2aWNlLndhcm4oIndyaXRlU3luYyBpcyB1bnJlbGlhYmxlIGFuZCB3aWxsIGJlIHJlbW92ZWQgc29vbi4iKSxTPSEwKSx0aGlzLl93cml0ZUJ1ZmZlci53cml0ZVN5bmMoZSx0KX0sdC5wcm90b3R5cGUucmVzaXplPWZ1bmN0aW9uKGUsdCl7aXNOYU4oZSl8fGlzTmFOKHQpfHwoZT1NYXRoLm1heChlLGguTUlOSU1VTV9DT0xTKSx0PU1hdGgubWF4KHQsaC5NSU5JTVVNX1JPV1MpLHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzaXplKGUsdCkpfSx0LnByb3RvdHlwZS5zY3JvbGw9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0hMSksdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwoZSx0KX0sdC5wcm90b3R5cGUuc2Nyb2xsTGluZXM9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsTGluZXMoZSx0LHIpfSx0LnByb3RvdHlwZS5zY3JvbGxQYWdlcz1mdW5jdGlvbihlKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFBhZ2VzKGUpfSx0LnByb3RvdHlwZS5zY3JvbGxUb1RvcD1mdW5jdGlvbigpe3RoaXMuX2J1ZmZlclNlcnZpY2Uuc2Nyb2xsVG9Ub3AoKX0sdC5wcm90b3R5cGUuc2Nyb2xsVG9Cb3R0b209ZnVuY3Rpb24oKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvQm90dG9tKCl9LHQucHJvdG90eXBlLnNjcm9sbFRvTGluZT1mdW5jdGlvbihlKXt0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbFRvTGluZShlKX0sdC5wcm90b3R5cGUucmVnaXN0ZXJFc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5yZWdpc3RlckVzY0hhbmRsZXIoZSx0KX0sdC5wcm90b3R5cGUucmVnaXN0ZXJEY3NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5yZWdpc3RlckRjc0hhbmRsZXIoZSx0KX0sdC5wcm90b3R5cGUucmVnaXN0ZXJDc2lIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5yZWdpc3RlckNzaUhhbmRsZXIoZSx0KX0sdC5wcm90b3R5cGUucmVnaXN0ZXJPc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2lucHV0SGFuZGxlci5yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KX0sdC5wcm90b3R5cGUuX3NldHVwPWZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd3NNb2RlJiZ0aGlzLl9lbmFibGVXaW5kb3dzTW9kZSgpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2lucHV0SGFuZGxlci5yZXNldCgpLHRoaXMuX2J1ZmZlclNlcnZpY2UucmVzZXQoKSx0aGlzLl9jaGFyc2V0U2VydmljZS5yZXNldCgpLHRoaXMuY29yZVNlcnZpY2UucmVzZXQoKSx0aGlzLmNvcmVNb3VzZVNlcnZpY2UucmVzZXQoKX0sdC5wcm90b3R5cGUuX3VwZGF0ZU9wdGlvbnM9ZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKGUpe2Nhc2Uic2Nyb2xsYmFjayI6dGhpcy5idWZmZXJzLnJlc2l6ZSh0aGlzLmNvbHMsdGhpcy5yb3dzKTticmVhaztjYXNlIndpbmRvd3NNb2RlIjp0aGlzLm9wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c01vZGU/dGhpcy5fZW5hYmxlV2luZG93c01vZGUoKToobnVsbD09PSh0PXRoaXMuX3dpbmRvd3NNb2RlKXx8dm9pZCAwPT09dHx8dC5kaXNwb3NlKCksdGhpcy5fd2luZG93c01vZGU9dm9pZCAwKX19LHQucHJvdG90eXBlLl9lbmFibGVXaW5kb3dzTW9kZT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoIXRoaXMuX3dpbmRvd3NNb2RlKXt2YXIgdD1bXTt0LnB1c2godGhpcy5vbkxpbmVGZWVkKGcudXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGUuYmluZChudWxsLHRoaXMuX2J1ZmZlclNlcnZpY2UpKSksdC5wdXNoKHRoaXMucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiSCJ9LChmdW5jdGlvbigpe3JldHVybigwLGcudXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGUpKGUuX2J1ZmZlclNlcnZpY2UpLCExfSkpKSx0aGlzLl93aW5kb3dzTW9kZT17ZGlzcG9zZTpmdW5jdGlvbigpe3ZhciBlLHI7dHJ5e2Zvcih2YXIgaT1vKHQpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKW4udmFsdWUuZGlzcG9zZSgpfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJihyPWkucmV0dXJuKSYmci5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX19fX19LHR9KHMuRGlzcG9zYWJsZSk7dC5Db3JlVGVybWluYWw9Q30sODQ2MDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmZvcndhcmRFdmVudD10LkV2ZW50RW1pdHRlcj12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fbGlzdGVuZXJzPVtdLHRoaXMuX2Rpc3Bvc2VkPSExfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImV2ZW50Iix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gdGhpcy5fZXZlbnR8fCh0aGlzLl9ldmVudD1mdW5jdGlvbih0KXtyZXR1cm4gZS5fbGlzdGVuZXJzLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXtpZighZS5fZGlzcG9zZWQpZm9yKHZhciByPTA7cjxlLl9saXN0ZW5lcnMubGVuZ3RoO3IrKylpZihlLl9saXN0ZW5lcnNbcl09PT10KXJldHVybiB2b2lkIGUuX2xpc3RlbmVycy5zcGxpY2UociwxKX19fSksdGhpcy5fZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZmlyZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj1bXSxpPTA7aTx0aGlzLl9saXN0ZW5lcnMubGVuZ3RoO2krKylyLnB1c2godGhpcy5fbGlzdGVuZXJzW2ldKTtmb3IoaT0wO2k8ci5sZW5ndGg7aSsrKXJbaV0uY2FsbCh2b2lkIDAsZSx0KX0sZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2xpc3RlbmVycyYmKHRoaXMuX2xpc3RlbmVycy5sZW5ndGg9MCksdGhpcy5fZGlzcG9zZWQ9ITB9LGV9KCk7dC5FdmVudEVtaXR0ZXI9cix0LmZvcndhcmRFdmVudD1mdW5jdGlvbihlLHQpe3JldHVybiBlKChmdW5jdGlvbihlKXtyZXR1cm4gdC5maXJlKGUpfSkpfX0sNTQzNTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5JbnB1dEhhbmRsZXI9dC5XaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGU9dm9pZCAwO3ZhciBvLHM9cigyNTg0KSxhPXIoNzExNiksYz1yKDIwMTUpLGw9cig4NDQpLGg9cig4MjczKSx1PXIoNDgyKSxmPXIoODQzNyksXz1yKDg0NjApLGQ9cig2NDMpLHA9cig1MTEpLHY9cigzNzM0KSx5PXIoMjU4NSksZz1yKDYyNDIpLG09cig2MzUxKSxiPXIoNTk0MSksUz17IigiOjAsIikiOjEsIioiOjIsIisiOjMsIi0iOjEsIi4iOjJ9LEM9MTMxMDcyO2Z1bmN0aW9uIHcoZSx0KXtpZihlPjI0KXJldHVybiB0LnNldFdpbkxpbmVzfHwhMTtzd2l0Y2goZSl7Y2FzZSAxOnJldHVybiEhdC5yZXN0b3JlV2luO2Nhc2UgMjpyZXR1cm4hIXQubWluaW1pemVXaW47Y2FzZSAzOnJldHVybiEhdC5zZXRXaW5Qb3NpdGlvbjtjYXNlIDQ6cmV0dXJuISF0LnNldFdpblNpemVQaXhlbHM7Y2FzZSA1OnJldHVybiEhdC5yYWlzZVdpbjtjYXNlIDY6cmV0dXJuISF0Lmxvd2VyV2luO2Nhc2UgNzpyZXR1cm4hIXQucmVmcmVzaFdpbjtjYXNlIDg6cmV0dXJuISF0LnNldFdpblNpemVDaGFycztjYXNlIDk6cmV0dXJuISF0Lm1heGltaXplV2luO2Nhc2UgMTA6cmV0dXJuISF0LmZ1bGxzY3JlZW5XaW47Y2FzZSAxMTpyZXR1cm4hIXQuZ2V0V2luU3RhdGU7Y2FzZSAxMzpyZXR1cm4hIXQuZ2V0V2luUG9zaXRpb247Y2FzZSAxNDpyZXR1cm4hIXQuZ2V0V2luU2l6ZVBpeGVscztjYXNlIDE1OnJldHVybiEhdC5nZXRTY3JlZW5TaXplUGl4ZWxzO2Nhc2UgMTY6cmV0dXJuISF0LmdldENlbGxTaXplUGl4ZWxzO2Nhc2UgMTg6cmV0dXJuISF0LmdldFdpblNpemVDaGFycztjYXNlIDE5OnJldHVybiEhdC5nZXRTY3JlZW5TaXplQ2hhcnM7Y2FzZSAyMDpyZXR1cm4hIXQuZ2V0SWNvblRpdGxlO2Nhc2UgMjE6cmV0dXJuISF0LmdldFdpblRpdGxlO2Nhc2UgMjI6cmV0dXJuISF0LnB1c2hUaXRsZTtjYXNlIDIzOnJldHVybiEhdC5wb3BUaXRsZTtjYXNlIDI0OnJldHVybiEhdC5zZXRXaW5MaW5lc31yZXR1cm4hMX0hZnVuY3Rpb24oZSl7ZVtlLkdFVF9XSU5fU0laRV9QSVhFTFM9MF09IkdFVF9XSU5fU0laRV9QSVhFTFMiLGVbZS5HRVRfQ0VMTF9TSVpFX1BJWEVMUz0xXT0iR0VUX0NFTExfU0laRV9QSVhFTFMifShvPXQuV2luZG93c09wdGlvbnNSZXBvcnRUeXBlfHwodC5XaW5kb3dzT3B0aW9uc1JlcG9ydFR5cGU9e30pKTt2YXIgTD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LHIsaSl7dGhpcy5fYnVmZmVyU2VydmljZT1lLHRoaXMuX2NvcmVTZXJ2aWNlPXQsdGhpcy5fbG9nU2VydmljZT1yLHRoaXMuX29wdGlvbnNTZXJ2aWNlPWksdGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMCl9cmV0dXJuIGUucHJvdG90eXBlLmhvb2s9ZnVuY3Rpb24oZSl7dGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMCl9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7dGhpcy5fZGF0YT0oMCxoLmNvbmNhdCkodGhpcy5fZGF0YSxlLnN1YmFycmF5KHQscikpfSxlLnByb3RvdHlwZS51bmhvb2s9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApLCEwO3ZhciB0PSgwLHUudXRmMzJUb1N0cmluZykodGhpcy5fZGF0YSk7c3dpdGNoKHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDApLHQpe2Nhc2UnInEnOnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrJ1AxJHIwInEnK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2Nhc2UnInAnOnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrJ1AxJHI2MTsxInAnK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2Nhc2UiciI6dmFyIHI9dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXIuc2Nyb2xsVG9wKzErIjsiKyh0aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlci5zY3JvbGxCb3R0b20rMSkrInIiO3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIlAxJHIiK3Ircy5DMC5FU0MrIlxcIik7YnJlYWs7Y2FzZSJtIjp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJQMSRyMG0iK3MuQzAuRVNDKyJcXCIpO2JyZWFrO2Nhc2UiIHEiOnZhciBpPXtibG9jazoyLHVuZGVybGluZTo0LGJhcjo2fVt0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvclN0eWxlXTtpLT10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmN1cnNvckJsaW5rPzE6MCx0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJQMSRyIitpKyIgcSIrcy5DMC5FU0MrIlxcIik7YnJlYWs7ZGVmYXVsdDp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIERDUyAkcSAlcyIsdCksdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiUDAkciIrcy5DMC5FU0MrIlxcIil9cmV0dXJuITB9LGV9KCksRT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscixpLG4sbyxsLGgsZCx2KXt2b2lkIDA9PT12JiYodj1uZXcgYy5Fc2NhcGVTZXF1ZW5jZVBhcnNlcik7dmFyIHk9ZS5jYWxsKHRoaXMpfHx0aGlzO3kuX2J1ZmZlclNlcnZpY2U9dCx5Ll9jaGFyc2V0U2VydmljZT1yLHkuX2NvcmVTZXJ2aWNlPWkseS5fZGlydHlSb3dTZXJ2aWNlPW4seS5fbG9nU2VydmljZT1vLHkuX29wdGlvbnNTZXJ2aWNlPWwseS5fY29yZU1vdXNlU2VydmljZT1oLHkuX3VuaWNvZGVTZXJ2aWNlPWQseS5fcGFyc2VyPXYseS5fcGFyc2VCdWZmZXI9bmV3IFVpbnQzMkFycmF5KDQwOTYpLHkuX3N0cmluZ0RlY29kZXI9bmV3IHUuU3RyaW5nVG9VdGYzMix5Ll91dGY4RGVjb2Rlcj1uZXcgdS5VdGY4VG9VdGYzMix5Ll93b3JrQ2VsbD1uZXcgcC5DZWxsRGF0YSx5Ll93aW5kb3dUaXRsZT0iIix5Ll9pY29uTmFtZT0iIix5Ll93aW5kb3dUaXRsZVN0YWNrPVtdLHkuX2ljb25OYW1lU3RhY2s9W10seS5fY3VyQXR0ckRhdGE9Zi5ERUZBVUxUX0FUVFJfREFUQS5jbG9uZSgpLHkuX2VyYXNlQXR0ckRhdGFJbnRlcm5hbD1mLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCkseS5fb25SZXF1ZXN0QmVsbD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25SZXF1ZXN0UmVmcmVzaFJvd3M9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uUmVxdWVzdFJlc2V0PW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vblJlcXVlc3RTZW5kRm9jdXM9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXI9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0PW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkExMXlDaGFyPW5ldyBfLkV2ZW50RW1pdHRlcix5Ll9vbkExMXlUYWI9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uQ3Vyc29yTW92ZT1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25MaW5lRmVlZD1uZXcgXy5FdmVudEVtaXR0ZXIseS5fb25TY3JvbGw9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uVGl0bGVDaGFuZ2U9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX29uQ29sb3I9bmV3IF8uRXZlbnRFbWl0dGVyLHkuX3BhcnNlU3RhY2s9e3BhdXNlZDohMSxjdXJzb3JTdGFydFg6MCxjdXJzb3JTdGFydFk6MCxkZWNvZGVkTGVuZ3RoOjAscG9zaXRpb246MH0seS5fc3BlY2lhbENvbG9ycz1bMjU2LDI1NywyNThdLHkucmVnaXN0ZXIoeS5fcGFyc2VyKSx5Ll9hY3RpdmVCdWZmZXI9eS5fYnVmZmVyU2VydmljZS5idWZmZXIseS5yZWdpc3Rlcih5Ll9idWZmZXJTZXJ2aWNlLmJ1ZmZlcnMub25CdWZmZXJBY3RpdmF0ZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHkuX2FjdGl2ZUJ1ZmZlcj1lLmFjdGl2ZUJ1ZmZlcn0pKSkseS5fcGFyc2VyLnNldENzaUhhbmRsZXJGYWxsYmFjaygoZnVuY3Rpb24oZSx0KXt5Ll9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIENTSSBjb2RlOiAiLHtpZGVudGlmaWVyOnkuX3BhcnNlci5pZGVudFRvU3RyaW5nKGUpLHBhcmFtczp0LnRvQXJyYXkoKX0pfSkpLHkuX3BhcnNlci5zZXRFc2NIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUpe3kuX2xvZ1NlcnZpY2UuZGVidWcoIlVua25vd24gRVNDIGNvZGU6ICIse2lkZW50aWZpZXI6eS5fcGFyc2VyLmlkZW50VG9TdHJpbmcoZSl9KX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXJGYWxsYmFjaygoZnVuY3Rpb24oZSl7eS5fbG9nU2VydmljZS5kZWJ1ZygiVW5rbm93biBFWEVDVVRFIGNvZGU6ICIse2NvZGU6ZX0pfSkpLHkuX3BhcnNlci5zZXRPc2NIYW5kbGVyRmFsbGJhY2soKGZ1bmN0aW9uKGUsdCxyKXt5Ll9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIE9TQyBjb2RlOiAiLHtpZGVudGlmaWVyOmUsYWN0aW9uOnQsZGF0YTpyfSl9KSkseS5fcGFyc2VyLnNldERjc0hhbmRsZXJGYWxsYmFjaygoZnVuY3Rpb24oZSx0LHIpeyJIT09LIj09PXQmJihyPXIudG9BcnJheSgpKSx5Ll9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIERDUyBjb2RlOiAiLHtpZGVudGlmaWVyOnkuX3BhcnNlci5pZGVudFRvU3RyaW5nKGUpLGFjdGlvbjp0LHBheWxvYWQ6cn0pfSkpLHkuX3BhcnNlci5zZXRQcmludEhhbmRsZXIoKGZ1bmN0aW9uKGUsdCxyKXtyZXR1cm4geS5wcmludChlLHQscil9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkAifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuaW5zZXJ0Q2hhcnMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiICIsZmluYWw6IkAifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2Nyb2xsTGVmdChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiQSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JVcChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIgIixmaW5hbDoiQSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zY3JvbGxSaWdodChlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiQiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JEb3duKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJDIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckZvcndhcmQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkQifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yQmFja3dhcmQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkUifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yTmV4dExpbmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkYifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yUHJlY2VkaW5nTGluZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiRyJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5jdXJzb3JDaGFyQWJzb2x1dGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkgifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yUG9zaXRpb24oZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkkifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY3Vyc29yRm9yd2FyZFRhYihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiSiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUluRGlzcGxheShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJKIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmVyYXNlSW5EaXNwbGF5KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJLIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmVyYXNlSW5MaW5lKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDoiPyIsZmluYWw6IksifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZXJhc2VJbkxpbmUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IkwifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuaW5zZXJ0TGluZXMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6Ik0ifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZGVsZXRlTGluZXMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IlAifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZGVsZXRlQ2hhcnMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IlMifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2Nyb2xsVXAoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6IlQifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2Nyb2xsRG93bihlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiWCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5lcmFzZUNoYXJzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJaIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmN1cnNvckJhY2t3YXJkVGFiKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJgIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmNoYXJQb3NBYnNvbHV0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiYSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5oUG9zaXRpb25SZWxhdGl2ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoiYiJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXIoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImMifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2VuZERldmljZUF0dHJpYnV0ZXNQcmltYXJ5KGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDoiPiIsZmluYWw6ImMifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2VuZERldmljZUF0dHJpYnV0ZXNTZWNvbmRhcnkoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImQifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkubGluZVBvc0Fic29sdXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJlIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnZQb3NpdGlvblJlbGF0aXZlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJmIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LmhWUG9zaXRpb24oZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImcifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkudGFiQ2xlYXIoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6ImgifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0TW9kZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJoIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE1vZGVQcml2YXRlKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJsIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc2V0TW9kZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtwcmVmaXg6Ij8iLGZpbmFsOiJsIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc2V0TW9kZVByaXZhdGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6Im0ifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuY2hhckF0dHJpYnV0ZXMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6Im4ifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZGV2aWNlU3RhdHVzKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe3ByZWZpeDoiPyIsZmluYWw6Im4ifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZGV2aWNlU3RhdHVzUHJpdmF0ZShlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIhIixmaW5hbDoicCJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5zb2Z0UmVzZXQoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiICIsZmluYWw6InEifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0Q3Vyc29yU3R5bGUoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6InIifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0U2Nyb2xsUmVnaW9uKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ZpbmFsOiJzIn0sKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNhdmVDdXJzb3IoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7ZmluYWw6InQifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkud2luZG93T3B0aW9ucyhlKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKHtmaW5hbDoidSJ9LChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXN0b3JlQ3Vyc29yKGUpfSkpLHkuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiciLGZpbmFsOiJ9In0sKGZ1bmN0aW9uKGUpe3JldHVybiB5Lmluc2VydENvbHVtbnMoZSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyQ3NpSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiJyIsZmluYWw6In4ifSwoZnVuY3Rpb24oZSl7cmV0dXJuIHkuZGVsZXRlQ29sdW1ucyhlKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5CRUwsKGZ1bmN0aW9uKCl7cmV0dXJuIHkuYmVsbCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkxGLChmdW5jdGlvbigpe3JldHVybiB5LmxpbmVGZWVkKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuVlQsKGZ1bmN0aW9uKCl7cmV0dXJuIHkubGluZUZlZWQoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5GRiwoZnVuY3Rpb24oKXtyZXR1cm4geS5saW5lRmVlZCgpfSkpLHkuX3BhcnNlci5zZXRFeGVjdXRlSGFuZGxlcihzLkMwLkNSLChmdW5jdGlvbigpe3JldHVybiB5LmNhcnJpYWdlUmV0dXJuKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuQlMsKGZ1bmN0aW9uKCl7cmV0dXJuIHkuYmFja3NwYWNlKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuSFQsKGZ1bmN0aW9uKCl7cmV0dXJuIHkudGFiKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzAuU08sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2hpZnRPdXQoKX0pKSx5Ll9wYXJzZXIuc2V0RXhlY3V0ZUhhbmRsZXIocy5DMC5TSSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zaGlmdEluKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzEuSU5ELChmdW5jdGlvbigpe3JldHVybiB5LmluZGV4KCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzEuTkVMLChmdW5jdGlvbigpe3JldHVybiB5Lm5leHRMaW5lKCl9KSkseS5fcGFyc2VyLnNldEV4ZWN1dGVIYW5kbGVyKHMuQzEuSFRTLChmdW5jdGlvbigpe3JldHVybiB5LnRhYlNldCgpfSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMCxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRUaXRsZShlKSx5LnNldEljb25OYW1lKGUpLCEwfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0SWNvbk5hbWUoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMixuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRUaXRsZShlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcig0LG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE9yUmVwb3J0SW5kZXhlZENvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDEwLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnNldE9yUmVwb3J0RmdDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMSxuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5zZXRPclJlcG9ydEJnQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTIsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkuc2V0T3JSZXBvcnRDdXJzb3JDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMDQsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUluZGV4ZWRDb2xvcihlKX0pKSkseS5fcGFyc2VyLnJlZ2lzdGVyT3NjSGFuZGxlcigxMTAsbmV3IGcuT3NjSGFuZGxlcigoZnVuY3Rpb24oZSl7cmV0dXJuIHkucmVzdG9yZUZnQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3Rlck9zY0hhbmRsZXIoMTExLG5ldyBnLk9zY0hhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5LnJlc3RvcmVCZ0NvbG9yKGUpfSkpKSx5Ll9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKDExMixuZXcgZy5Pc2NIYW5kbGVyKChmdW5jdGlvbihlKXtyZXR1cm4geS5yZXN0b3JlQ3Vyc29yQ29sb3IoZSl9KSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiI3In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2F2ZUN1cnNvcigpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiI4In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkucmVzdG9yZUN1cnNvcigpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJEIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuaW5kZXgoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiRSJ9LChmdW5jdGlvbigpe3JldHVybiB5Lm5leHRMaW5lKCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IkgifSwoZnVuY3Rpb24oKXtyZXR1cm4geS50YWJTZXQoKX0pKSx5Ll9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtmaW5hbDoiTSJ9LChmdW5jdGlvbigpe3JldHVybiB5LnJldmVyc2VJbmRleCgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiI9In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkua2V5cGFkQXBwbGljYXRpb25Nb2RlKCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6Ij4ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5rZXlwYWROdW1lcmljTW9kZSgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ZpbmFsOiJjIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuZnVsbFJlc2V0KCl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6Im4ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZXRnTGV2ZWwoMil9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6Im8ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZXRnTGV2ZWwoMyl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6InwifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZXRnTGV2ZWwoMyl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6In0ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZXRnTGV2ZWwoMil9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6In4ifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZXRnTGV2ZWwoMSl9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRXNjSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiJSIsZmluYWw6IkAifSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3REZWZhdWx0Q2hhcnNldCgpfSkpLHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiUiLGZpbmFsOiJHIn0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2VsZWN0RGVmYXVsdENoYXJzZXQoKX0pKTt2YXIgbT1mdW5jdGlvbihlKXtiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIoIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCIoIitlKX0pKSxiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIpIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCIpIitlKX0pKSxiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIqIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCIqIitlKX0pKSxiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIrIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCIrIitlKX0pKSxiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiItIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCItIitlKX0pKSxiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIuIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCIuIitlKX0pKSxiLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKHtpbnRlcm1lZGlhdGVzOiIvIixmaW5hbDplfSwoZnVuY3Rpb24oKXtyZXR1cm4geS5zZWxlY3RDaGFyc2V0KCIvIitlKX0pKX0sYj10aGlzO2Zvcih2YXIgUyBpbiBhLkNIQVJTRVRTKW0oUyk7cmV0dXJuIHkuX3BhcnNlci5yZWdpc3RlckVzY0hhbmRsZXIoe2ludGVybWVkaWF0ZXM6IiMiLGZpbmFsOiI4In0sKGZ1bmN0aW9uKCl7cmV0dXJuIHkuc2NyZWVuQWxpZ25tZW50UGF0dGVybigpfSkpLHkuX3BhcnNlci5zZXRFcnJvckhhbmRsZXIoKGZ1bmN0aW9uKGUpe3JldHVybiB5Ll9sb2dTZXJ2aWNlLmVycm9yKCJQYXJzaW5nIGVycm9yOiAiLGUpLGV9KSkseS5fcGFyc2VyLnJlZ2lzdGVyRGNzSGFuZGxlcih7aW50ZXJtZWRpYXRlczoiJCIsZmluYWw6InEifSxuZXcgTCh5Ll9idWZmZXJTZXJ2aWNlLHkuX2NvcmVTZXJ2aWNlLHkuX2xvZ1NlcnZpY2UseS5fb3B0aW9uc1NlcnZpY2UpKSx5fXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RCZWxsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdEJlbGwuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblJlcXVlc3RSZWZyZXNoUm93cyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFJlc2V0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFJlc2V0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25SZXF1ZXN0U2VuZEZvY3VzIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFNlbmRGb2N1cy5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFN5bmNTY3JvbGxCYXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uUmVxdWVzdFdpbmRvd3NPcHRpb25zUmVwb3J0LmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25BMTF5Q2hhciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkExMXlDaGFyLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25BMTF5VGFiIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQTExeVRhYi5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQ3Vyc29yTW92ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkN1cnNvck1vdmUuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkxpbmVGZWVkIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uTGluZUZlZWQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvblNjcm9sbCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblNjcm9sbC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uVGl0bGVDaGFuZ2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25UaXRsZUNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uQ29sb3IiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Db2xvci5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7ZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpfSx0LnByb3RvdHlwZS5fcHJlc2VydmVTdGFjaz1mdW5jdGlvbihlLHQscixpKXt0aGlzLl9wYXJzZVN0YWNrLnBhdXNlZD0hMCx0aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WD1lLHRoaXMuX3BhcnNlU3RhY2suY3Vyc29yU3RhcnRZPXQsdGhpcy5fcGFyc2VTdGFjay5kZWNvZGVkTGVuZ3RoPXIsdGhpcy5fcGFyc2VTdGFjay5wb3NpdGlvbj1pfSx0LnByb3RvdHlwZS5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jPWZ1bmN0aW9uKGUpe3RoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWw8PXkuTG9nTGV2ZWxFbnVtLldBUk4mJlByb21pc2UucmFjZShbZSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gc2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gdCgiI1NMT1dfVElNRU9VVCIpfSksNWUzKX0pKV0pLmNhdGNoKChmdW5jdGlvbihlKXtpZigiI1NMT1dfVElNRU9VVCIhPT1lKXRocm93IGU7Y29uc29sZS53YXJuKCJhc3luYyBwYXJzZXIgaGFuZGxlciB0YWtpbmcgbG9uZ2VyIHRoYW4gNTAwMCBtcyIpfSkpfSx0LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihlLHQpe3ZhciByLGk9dGhpcy5fYWN0aXZlQnVmZmVyLngsbj10aGlzLl9hY3RpdmVCdWZmZXIueSxvPTAscz10aGlzLl9wYXJzZVN0YWNrLnBhdXNlZDtpZihzKXtpZihyPXRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlcix0aGlzLl9wYXJzZVN0YWNrLmRlY29kZWRMZW5ndGgsdCkpcmV0dXJuIHRoaXMuX2xvZ1Nsb3dSZXNvbHZpbmdBc3luYyhyKSxyO2k9dGhpcy5fcGFyc2VTdGFjay5jdXJzb3JTdGFydFgsbj10aGlzLl9wYXJzZVN0YWNrLmN1cnNvclN0YXJ0WSx0aGlzLl9wYXJzZVN0YWNrLnBhdXNlZD0hMSxlLmxlbmd0aD5DJiYobz10aGlzLl9wYXJzZVN0YWNrLnBvc2l0aW9uK0MpfWlmKHRoaXMuX2xvZ1NlcnZpY2UubG9nTGV2ZWw8PXkuTG9nTGV2ZWxFbnVtLkRFQlVHJiZ0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJwYXJzaW5nIGRhdGEiKygic3RyaW5nIj09dHlwZW9mIGU/JyAiJytlKyciJzonICInK0FycmF5LnByb3RvdHlwZS5tYXAuY2FsbChlLChmdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShlKX0pKS5qb2luKCIiKSsnIicpLCJzdHJpbmciPT10eXBlb2YgZT9lLnNwbGl0KCIiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJDb2RlQXQoMCl9KSk6ZSksdGhpcy5fcGFyc2VCdWZmZXIubGVuZ3RoPGUubGVuZ3RoJiZ0aGlzLl9wYXJzZUJ1ZmZlci5sZW5ndGg8QyYmKHRoaXMuX3BhcnNlQnVmZmVyPW5ldyBVaW50MzJBcnJheShNYXRoLm1pbihlLmxlbmd0aCxDKSkpLHN8fHRoaXMuX2RpcnR5Um93U2VydmljZS5jbGVhclJhbmdlKCksZS5sZW5ndGg+Qylmb3IodmFyIGE9bzthPGUubGVuZ3RoO2ErPUMpe3ZhciBjPWErQzxlLmxlbmd0aD9hK0M6ZS5sZW5ndGgsbD0ic3RyaW5nIj09dHlwZW9mIGU/dGhpcy5fc3RyaW5nRGVjb2Rlci5kZWNvZGUoZS5zdWJzdHJpbmcoYSxjKSx0aGlzLl9wYXJzZUJ1ZmZlcik6dGhpcy5fdXRmOERlY29kZXIuZGVjb2RlKGUuc3ViYXJyYXkoYSxjKSx0aGlzLl9wYXJzZUJ1ZmZlcik7aWYocj10aGlzLl9wYXJzZXIucGFyc2UodGhpcy5fcGFyc2VCdWZmZXIsbCkpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soaSxuLGwsYSksdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHIpLHJ9ZWxzZSBpZighcyYmKGw9InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuX3N0cmluZ0RlY29kZXIuZGVjb2RlKGUsdGhpcy5fcGFyc2VCdWZmZXIpOnRoaXMuX3V0ZjhEZWNvZGVyLmRlY29kZShlLHRoaXMuX3BhcnNlQnVmZmVyKSxyPXRoaXMuX3BhcnNlci5wYXJzZSh0aGlzLl9wYXJzZUJ1ZmZlcixsKSkpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soaSxuLGwsMCksdGhpcy5fbG9nU2xvd1Jlc29sdmluZ0FzeW5jKHIpLHI7dGhpcy5fYWN0aXZlQnVmZmVyLng9PT1pJiZ0aGlzLl9hY3RpdmVCdWZmZXIueT09PW58fHRoaXMuX29uQ3Vyc29yTW92ZS5maXJlKCksdGhpcy5fb25SZXF1ZXN0UmVmcmVzaFJvd3MuZmlyZSh0aGlzLl9kaXJ0eVJvd1NlcnZpY2Uuc3RhcnQsdGhpcy5fZGlydHlSb3dTZXJ2aWNlLmVuZCl9LHQucHJvdG90eXBlLnByaW50PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuLG89dGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldCxzPXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSxhPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyxjPXRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy53cmFwYXJvdW5kLGw9dGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZSxoPXRoaXMuX2N1ckF0dHJEYXRhLGY9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3RoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54JiZyLXQ+MCYmMj09PWYuZ2V0V2lkdGgodGhpcy5fYWN0aXZlQnVmZmVyLngtMSkmJmYuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngtMSwwLDEsaC5mZyxoLmJnLGguZXh0ZW5kZWQpO2Zvcih2YXIgXz10O188cjsrK18pe2lmKGk9ZVtfXSxuPXRoaXMuX3VuaWNvZGVTZXJ2aWNlLndjd2lkdGgoaSksaTwxMjcmJm8pe3ZhciBwPW9bU3RyaW5nLmZyb21DaGFyQ29kZShpKV07cCYmKGk9cC5jaGFyQ29kZUF0KDApKX1pZihzJiZ0aGlzLl9vbkExMXlDaGFyLmZpcmUoKDAsdS5zdHJpbmdGcm9tQ29kZVBvaW50KShpKSksbnx8IXRoaXMuX2FjdGl2ZUJ1ZmZlci54KXtpZih0aGlzLl9hY3RpdmVCdWZmZXIueCtuLTE+PWEpaWYoYyl7Zm9yKDt0aGlzLl9hY3RpdmVCdWZmZXIueDxhOylmLnNldENlbGxGcm9tQ29kZVBvaW50KHRoaXMuX2FjdGl2ZUJ1ZmZlci54KyssMCwxLGguZmcsaC5iZyxoLmV4dGVuZGVkKTt0aGlzLl9hY3RpdmVCdWZmZXIueD0wLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KyssdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKzE/KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpLCEwKSk6KHRoaXMuX2FjdGl2ZUJ1ZmZlci55Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MmJih0aGlzLl9hY3RpdmVCdWZmZXIueT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpLmlzV3JhcHBlZD0hMCksZj10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSl9ZWxzZSBpZih0aGlzLl9hY3RpdmVCdWZmZXIueD1hLTEsMj09PW4pY29udGludWU7aWYobCYmKGYuaW5zZXJ0Q2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsbix0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwoaCksaCksMj09PWYuZ2V0V2lkdGgoYS0xKSYmZi5zZXRDZWxsRnJvbUNvZGVQb2ludChhLTEsZC5OVUxMX0NFTExfQ09ERSxkLk5VTExfQ0VMTF9XSURUSCxoLmZnLGguYmcsaC5leHRlbmRlZCkpLGYuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngrKyxpLG4saC5mZyxoLmJnLGguZXh0ZW5kZWQpLG4+MClmb3IoOy0tbjspZi5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLl9hY3RpdmVCdWZmZXIueCsrLDAsMCxoLmZnLGguYmcsaC5leHRlbmRlZCl9ZWxzZSBmLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEpP2YuYWRkQ29kZXBvaW50VG9DZWxsKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LTEsaSk6Zi5hZGRDb2RlcG9pbnRUb0NlbGwodGhpcy5fYWN0aXZlQnVmZmVyLngtMixpKX1yLXQ+MCYmKGYubG9hZENlbGwodGhpcy5fYWN0aXZlQnVmZmVyLngtMSx0aGlzLl93b3JrQ2VsbCksMj09PXRoaXMuX3dvcmtDZWxsLmdldFdpZHRoKCl8fHRoaXMuX3dvcmtDZWxsLmdldENvZGUoKT42NTUzNT90aGlzLl9wYXJzZXIucHJlY2VkaW5nQ29kZXBvaW50PTA6dGhpcy5fd29ya0NlbGwuaXNDb21iaW5lZCgpP3RoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQ9dGhpcy5fd29ya0NlbGwuZ2V0Q2hhcnMoKS5jaGFyQ29kZUF0KDApOnRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQ9dGhpcy5fd29ya0NlbGwuY29udGVudCksdGhpcy5fYWN0aXZlQnVmZmVyLng8YSYmci10PjAmJjA9PT1mLmdldFdpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSYmIWYuaGFzQ29udGVudCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJmYuc2V0Q2VsbEZyb21Db2RlUG9pbnQodGhpcy5fYWN0aXZlQnVmZmVyLngsMCwxLGguZmcsaC5iZyxoLmV4dGVuZGVkKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KX0sdC5wcm90b3R5cGUucmVnaXN0ZXJDc2lIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9dGhpcztyZXR1cm4idCIhPT1lLmZpbmFsfHxlLnByZWZpeHx8ZS5pbnRlcm1lZGlhdGVzP3RoaXMuX3BhcnNlci5yZWdpc3RlckNzaUhhbmRsZXIoZSx0KTp0aGlzLl9wYXJzZXIucmVnaXN0ZXJDc2lIYW5kbGVyKGUsKGZ1bmN0aW9uKGUpe3JldHVybiF3KGUucGFyYW1zWzBdLHIuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucyl8fHQoZSl9KSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRGNzSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9wYXJzZXIucmVnaXN0ZXJEY3NIYW5kbGVyKGUsbmV3IG0uRGNzSGFuZGxlcih0KSl9LHQucHJvdG90eXBlLnJlZ2lzdGVyRXNjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9wYXJzZXIucmVnaXN0ZXJFc2NIYW5kbGVyKGUsdCl9LHQucHJvdG90eXBlLnJlZ2lzdGVyT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9wYXJzZXIucmVnaXN0ZXJPc2NIYW5kbGVyKGUsbmV3IGcuT3NjSGFuZGxlcih0KSl9LHQucHJvdG90eXBlLmJlbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25SZXF1ZXN0QmVsbC5maXJlKCksITB9LHQucHJvdG90eXBlLmxpbmVGZWVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuY29udmVydEVvbCYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTApLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KyssdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKzE/KHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fYnVmZmVyU2VydmljZS5zY3JvbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk6dGhpcy5fYWN0aXZlQnVmZmVyLnk+PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xKSx0aGlzLl9hY3RpdmVCdWZmZXIueD49dGhpcy5fYnVmZmVyU2VydmljZS5jb2xzJiZ0aGlzLl9hY3RpdmVCdWZmZXIueC0tLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpLHRoaXMuX29uTGluZUZlZWQuZmlyZSgpLCEwfSx0LnByb3RvdHlwZS5jYXJyaWFnZVJldHVybj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfSx0LnByb3RvdHlwZS5iYWNrc3BhY2U9ZnVuY3Rpb24oKXt2YXIgZTtpZighdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kKXJldHVybiB0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PjAmJnRoaXMuX2FjdGl2ZUJ1ZmZlci54LS0sITA7aWYodGhpcy5fcmVzdHJpY3RDdXJzb3IodGhpcy5fYnVmZmVyU2VydmljZS5jb2xzKSx0aGlzLl9hY3RpdmVCdWZmZXIueD4wKXRoaXMuX2FjdGl2ZUJ1ZmZlci54LS07ZWxzZSBpZigwPT09dGhpcy5fYWN0aXZlQnVmZmVyLngmJnRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AmJnRoaXMuX2FjdGl2ZUJ1ZmZlci55PD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tJiYobnVsbD09PShlPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaXNXcmFwcGVkKSl7dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpLmlzV3JhcHBlZD0hMSx0aGlzLl9hY3RpdmVCdWZmZXIueS0tLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scy0xO3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTt0Lmhhc1dpZHRoKHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSYmIXQuaGFzQ29udGVudCh0aGlzLl9hY3RpdmVCdWZmZXIueCkmJnRoaXMuX2FjdGl2ZUJ1ZmZlci54LS19cmV0dXJuIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9LHQucHJvdG90eXBlLnRhYj1mdW5jdGlvbigpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54Pj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpcmV0dXJuITA7dmFyIGU9dGhpcy5fYWN0aXZlQnVmZmVyLng7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2FjdGl2ZUJ1ZmZlci5uZXh0U3RvcCgpLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2NyZWVuUmVhZGVyTW9kZSYmdGhpcy5fb25BMTF5VGFiLmZpcmUodGhpcy5fYWN0aXZlQnVmZmVyLngtZSksITB9LHQucHJvdG90eXBlLnNoaWZ0T3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgxKSwhMH0sdC5wcm90b3R5cGUuc2hpZnRJbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnTGV2ZWwoMCksITB9LHQucHJvdG90eXBlLl9yZXN0cmljdEN1cnNvcj1mdW5jdGlvbihlKXt2b2lkIDA9PT1lJiYoZT10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMtMSksdGhpcy5fYWN0aXZlQnVmZmVyLng9TWF0aC5taW4oZSxNYXRoLm1heCgwLHRoaXMuX2FjdGl2ZUJ1ZmZlci54KSksdGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj9NYXRoLm1pbih0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLE1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnkpKTpNYXRoLm1pbih0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSxNYXRoLm1heCgwLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSl9LHQucHJvdG90eXBlLl9zZXRDdXJzb3I9ZnVuY3Rpb24oZSx0KXt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luPyh0aGlzLl9hY3RpdmVCdWZmZXIueD1lLHRoaXMuX2FjdGl2ZUJ1ZmZlci55PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ArdCk6KHRoaXMuX2FjdGl2ZUJ1ZmZlci54PWUsdGhpcy5fYWN0aXZlQnVmZmVyLnk9dCksdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KX0sdC5wcm90b3R5cGUuX21vdmVDdXJzb3I9ZnVuY3Rpb24oZSx0KXt0aGlzLl9yZXN0cmljdEN1cnNvcigpLHRoaXMuX3NldEN1cnNvcih0aGlzLl9hY3RpdmVCdWZmZXIueCtlLHRoaXMuX2FjdGl2ZUJ1ZmZlci55K3QpfSx0LnByb3RvdHlwZS5jdXJzb3JVcD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIueS10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3JldHVybiB0Pj0wP3RoaXMuX21vdmVDdXJzb3IoMCwtTWF0aC5taW4odCxlLnBhcmFtc1swXXx8MSkpOnRoaXMuX21vdmVDdXJzb3IoMCwtKGUucGFyYW1zWzBdfHwxKSksITB9LHQucHJvdG90eXBlLmN1cnNvckRvd249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbS10aGlzLl9hY3RpdmVCdWZmZXIueTtyZXR1cm4gdD49MD90aGlzLl9tb3ZlQ3Vyc29yKDAsTWF0aC5taW4odCxlLnBhcmFtc1swXXx8MSkpOnRoaXMuX21vdmVDdXJzb3IoMCxlLnBhcmFtc1swXXx8MSksITB9LHQucHJvdG90eXBlLmN1cnNvckZvcndhcmQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vdmVDdXJzb3IoZS5wYXJhbXNbMF18fDEsMCksITB9LHQucHJvdG90eXBlLmN1cnNvckJhY2t3YXJkPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9tb3ZlQ3Vyc29yKC0oZS5wYXJhbXNbMF18fDEpLDApLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JOZXh0TGluZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jdXJzb3JEb3duKGUpLHRoaXMuX2FjdGl2ZUJ1ZmZlci54PTAsITB9LHQucHJvdG90eXBlLmN1cnNvclByZWNlZGluZ0xpbmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3Vyc29yVXAoZSksdGhpcy5fYWN0aXZlQnVmZmVyLng9MCwhMH0sdC5wcm90b3R5cGUuY3Vyc29yQ2hhckFic29sdXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IoKGUucGFyYW1zWzBdfHwxKS0xLHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSwhMH0sdC5wcm90b3R5cGUuY3Vyc29yUG9zaXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldEN1cnNvcihlLmxlbmd0aD49Mj8oZS5wYXJhbXNbMV18fDEpLTE6MCwoZS5wYXJhbXNbMF18fDEpLTEpLCEwfSx0LnByb3RvdHlwZS5jaGFyUG9zQWJzb2x1dGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldEN1cnNvcigoZS5wYXJhbXNbMF18fDEpLTEsdGhpcy5fYWN0aXZlQnVmZmVyLnkpLCEwfSx0LnByb3RvdHlwZS5oUG9zaXRpb25SZWxhdGl2ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fbW92ZUN1cnNvcihlLnBhcmFtc1swXXx8MSwwKSwhMH0sdC5wcm90b3R5cGUubGluZVBvc0Fic29sdXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zZXRDdXJzb3IodGhpcy5fYWN0aXZlQnVmZmVyLngsKGUucGFyYW1zWzBdfHwxKS0xKSwhMH0sdC5wcm90b3R5cGUudlBvc2l0aW9uUmVsYXRpdmU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX21vdmVDdXJzb3IoMCxlLnBhcmFtc1swXXx8MSksITB9LHQucHJvdG90eXBlLmhWUG9zaXRpb249ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY3Vyc29yUG9zaXRpb24oZSksITB9LHQucHJvdG90eXBlLnRhYkNsZWFyPWZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyYW1zWzBdO3JldHVybiAwPT09dD9kZWxldGUgdGhpcy5fYWN0aXZlQnVmZmVyLnRhYnNbdGhpcy5fYWN0aXZlQnVmZmVyLnhdOjM9PT10JiYodGhpcy5fYWN0aXZlQnVmZmVyLnRhYnM9e30pLCEwfSx0LnByb3RvdHlwZS5jdXJzb3JGb3J3YXJkVGFiPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54Pj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLng9dGhpcy5fYWN0aXZlQnVmZmVyLm5leHRTdG9wKCk7cmV0dXJuITB9LHQucHJvdG90eXBlLmN1cnNvckJhY2t3YXJkVGFiPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci54Pj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLng9dGhpcy5fYWN0aXZlQnVmZmVyLnByZXZTdG9wKCk7cmV0dXJuITB9LHQucHJvdG90eXBlLl9lcmFzZUluQnVmZmVyTGluZT1mdW5jdGlvbihlLHQscixpKXt2b2lkIDA9PT1pJiYoaT0hMSk7dmFyIG49dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrZSk7bi5yZXBsYWNlQ2VsbHModCxyLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksaSYmKG4uaXNXcmFwcGVkPSExKX0sdC5wcm90b3R5cGUuX3Jlc2V0QnVmZmVyTGluZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStlKTt0LmZpbGwodGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSkpLHRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLmNsZWFyTWFya2Vycyh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrZSksdC5pc1dyYXBwZWQ9ITF9LHQucHJvdG90eXBlLmVyYXNlSW5EaXNwbGF5PWZ1bmN0aW9uKGUpe3ZhciB0O3N3aXRjaCh0aGlzLl9yZXN0cmljdEN1cnNvcih0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMpLGUucGFyYW1zWzBdKXtjYXNlIDA6Zm9yKHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0KSx0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0KyssdGhpcy5fYWN0aXZlQnVmZmVyLngsdGhpcy5fYnVmZmVyU2VydmljZS5jb2xzLDA9PT10aGlzLl9hY3RpdmVCdWZmZXIueCk7dDx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3M7dCsrKXRoaXMuX3Jlc2V0QnVmZmVyTGluZSh0KTt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHQpO2JyZWFrO2Nhc2UgMTpmb3IodD10aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHQpLHRoaXMuX2VyYXNlSW5CdWZmZXJMaW5lKHQsMCx0aGlzLl9hY3RpdmVCdWZmZXIueCsxLCEwKSx0aGlzLl9hY3RpdmVCdWZmZXIueCsxPj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMmJih0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHQrMSkuaXNXcmFwcGVkPSExKTt0LS07KXRoaXMuX3Jlc2V0QnVmZmVyTGluZSh0KTt0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KDApO2JyZWFrO2Nhc2UgMjpmb3IodD10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MsdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0LTEpO3QtLTspdGhpcy5fcmVzZXRCdWZmZXJMaW5lKHQpO3RoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkoMCk7YnJlYWs7Y2FzZSAzOnZhciByPXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5sZW5ndGgtdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzO3I+MCYmKHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy50cmltU3RhcnQociksdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlPU1hdGgubWF4KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZS1yLDApLHRoaXMuX2FjdGl2ZUJ1ZmZlci55ZGlzcD1NYXRoLm1heCh0aGlzLl9hY3RpdmVCdWZmZXIueWRpc3AtciwwKSx0aGlzLl9vblNjcm9sbC5maXJlKDApKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuZXJhc2VJbkxpbmU9ZnVuY3Rpb24oZSl7c3dpdGNoKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyksZS5wYXJhbXNbMF0pe2Nhc2UgMDp0aGlzLl9lcmFzZUluQnVmZmVyTGluZSh0aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9hY3RpdmVCdWZmZXIueCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsMD09PXRoaXMuX2FjdGl2ZUJ1ZmZlci54KTticmVhaztjYXNlIDE6dGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksMCx0aGlzLl9hY3RpdmVCdWZmZXIueCsxLCExKTticmVhaztjYXNlIDI6dGhpcy5fZXJhc2VJbkJ1ZmZlckxpbmUodGhpcy5fYWN0aXZlQnVmZmVyLnksMCx0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMsITApfXJldHVybiB0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSwhMH0sdC5wcm90b3R5cGUuaW5zZXJ0TGluZXM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD1lLnBhcmFtc1swXXx8MTtpZih0aGlzLl9hY3RpdmVCdWZmZXIueT50aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tfHx0aGlzLl9hY3RpdmVCdWZmZXIueTx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXJldHVybiEwO2Zvcih2YXIgcj10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnksaT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMS10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLG49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTErdGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlLWkrMTt0LS07KXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2Uobi0xLDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UociwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSx0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfSx0LnByb3RvdHlwZS5kZWxldGVMaW5lcz1mdW5jdGlvbihlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO3ZhciB0PWUucGFyYW1zWzBdfHwxO2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7dmFyIHIsaT10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnk7Zm9yKHI9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEtdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSxyPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cy0xK3RoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZS1yO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZShpLDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5zcGxpY2UociwwLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXRCbGFua0xpbmUodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSk7cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKSx0aGlzLl9hY3RpdmVCdWZmZXIueD0wLCEwfSx0LnByb3RvdHlwZS5pbnNlcnRDaGFycz1mdW5jdGlvbihlKXt0aGlzLl9yZXN0cmljdEN1cnNvcigpO3ZhciB0PXRoaXMuX2FjdGl2ZUJ1ZmZlci5saW5lcy5nZXQodGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55KTtyZXR1cm4gdCYmKHQuaW5zZXJ0Q2VsbHModGhpcy5fYWN0aXZlQnVmZmVyLngsZS5wYXJhbXNbMF18fDEsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya0RpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci55KSksITB9LHQucHJvdG90eXBlLmRlbGV0ZUNoYXJzPWZ1bmN0aW9uKGUpe3RoaXMuX3Jlc3RyaWN0Q3Vyc29yKCk7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnkpO3JldHVybiB0JiYodC5kZWxldGVDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCxlLnBhcmFtc1swXXx8MSx0aGlzLl9hY3RpdmVCdWZmZXIuZ2V0TnVsbENlbGwodGhpcy5fZXJhc2VBdHRyRGF0YSgpKSx0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnkpKSwhMH0sdC5wcm90b3R5cGUuc2Nyb2xsVXA9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLDAsdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTtyZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksITB9LHQucHJvdG90eXBlLnNjcm9sbERvd249ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxO3QtLTspdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNwbGljZSh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSwxKSx0aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuc3BsaWNlKHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLDAsdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZShmLkRFRkFVTFRfQVRUUl9EQVRBKSk7cmV0dXJuIHRoaXMuX2RpcnR5Um93U2VydmljZS5tYXJrUmFuZ2VEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20pLCEwfSx0LnByb3RvdHlwZS5zY3JvbGxMZWZ0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrcil7dmFyIGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Urcik7aS5kZWxldGVDZWxscygwLHQsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxpLmlzV3JhcHBlZD0hMX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksITB9LHQucHJvdG90eXBlLnNjcm9sbFJpZ2h0PWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2FjdGl2ZUJ1ZmZlci55PnRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b218fHRoaXMuX2FjdGl2ZUJ1ZmZlci55PHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3ApcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcDtyPD10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tOysrcil7dmFyIGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2Urcik7aS5pbnNlcnRDZWxscygwLHQsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxpLmlzV3JhcHBlZD0hMX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksITB9LHQucHJvdG90eXBlLmluc2VydENvbHVtbnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDEscj10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3I8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207KytyKXt2YXIgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStyKTtpLmluc2VydENlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHQsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxpLmlzV3JhcHBlZD0hMX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksITB9LHQucHJvdG90eXBlLmRlbGV0ZUNvbHVtbnM9ZnVuY3Rpb24oZSl7aWYodGhpcy5fYWN0aXZlQnVmZmVyLnk+dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbXx8dGhpcy5fYWN0aXZlQnVmZmVyLnk8dGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcClyZXR1cm4hMDtmb3IodmFyIHQ9ZS5wYXJhbXNbMF18fDEscj10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wO3I8PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b207KytyKXt2YXIgaT10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZStyKTtpLmRlbGV0ZUNlbGxzKHRoaXMuX2FjdGl2ZUJ1ZmZlci54LHQsdGhpcy5fYWN0aXZlQnVmZmVyLmdldE51bGxDZWxsKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZXJhc2VBdHRyRGF0YSgpKSxpLmlzV3JhcHBlZD0hMX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtSYW5nZURpcnR5KHRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3AsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbSksITB9LHQucHJvdG90eXBlLmVyYXNlQ2hhcnM9ZnVuY3Rpb24oZSl7dGhpcy5fcmVzdHJpY3RDdXJzb3IoKTt2YXIgdD10aGlzLl9hY3RpdmVCdWZmZXIubGluZXMuZ2V0KHRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSk7cmV0dXJuIHQmJih0LnJlcGxhY2VDZWxscyh0aGlzLl9hY3RpdmVCdWZmZXIueCx0aGlzLl9hY3RpdmVCdWZmZXIueCsoZS5wYXJhbXNbMF18fDEpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5nZXROdWxsQ2VsbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpLHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtEaXJ0eSh0aGlzLl9hY3RpdmVCdWZmZXIueSkpLCEwfSx0LnByb3RvdHlwZS5yZXBlYXRQcmVjZWRpbmdDaGFyYWN0ZXI9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3BhcnNlci5wcmVjZWRpbmdDb2RlcG9pbnQpcmV0dXJuITA7Zm9yKHZhciB0PWUucGFyYW1zWzBdfHwxLHI9bmV3IFVpbnQzMkFycmF5KHQpLGk9MDtpPHQ7KytpKXJbaV09dGhpcy5fcGFyc2VyLnByZWNlZGluZ0NvZGVwb2ludDtyZXR1cm4gdGhpcy5wcmludChyLDAsci5sZW5ndGgpLCEwfSx0LnByb3RvdHlwZS5zZW5kRGV2aWNlQXR0cmlidXRlc1ByaW1hcnk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyYW1zWzBdPjB8fCh0aGlzLl9pcygieHRlcm0iKXx8dGhpcy5faXMoInJ4dnQtdW5pY29kZSIpfHx0aGlzLl9pcygic2NyZWVuIik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz8xOzJjIik6dGhpcy5faXMoImxpbnV4IikmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls/NmMiKSksITB9LHQucHJvdG90eXBlLnNlbmREZXZpY2VBdHRyaWJ1dGVzU2Vjb25kYXJ5PWZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmFtc1swXT4wfHwodGhpcy5faXMoInh0ZXJtIik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz4wOzI3NjswYyIpOnRoaXMuX2lzKCJyeHZ0LXVuaWNvZGUiKT90aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbPjg1Ozk1OzBjIik6dGhpcy5faXMoImxpbnV4Iik/dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChlLnBhcmFtc1swXSsiYyIpOnRoaXMuX2lzKCJzY3JlZW4iKSYmdGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz44Mzs0MDAwMzswYyIpKSwhMH0sdC5wcm90b3R5cGUuX2lzPWZ1bmN0aW9uKGUpe3JldHVybiAwPT09KHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMudGVybU5hbWUrIiIpLmluZGV4T2YoZSl9LHQucHJvdG90eXBlLnNldE1vZGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspND09PWUucGFyYW1zW3RdJiYodGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZT0hMCk7cmV0dXJuITB9LHQucHJvdG90eXBlLnNldE1vZGVQcml2YXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKXN3aXRjaChlLnBhcmFtc1t0XSl7Y2FzZSAxOnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbkN1cnNvcktleXM9ITA7YnJlYWs7Y2FzZSAyOnRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDAsYS5ERUZBVUxUX0NIQVJTRVQpLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDEsYS5ERUZBVUxUX0NIQVJTRVQpLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDIsYS5ERUZBVUxUX0NIQVJTRVQpLHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdDaGFyc2V0KDMsYS5ERUZBVUxUX0NIQVJTRVQpO2JyZWFrO2Nhc2UgMzp0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLndpbmRvd09wdGlvbnMuc2V0V2luTGluZXMmJih0aGlzLl9idWZmZXJTZXJ2aWNlLnJlc2l6ZSgxMzIsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSx0aGlzLl9vblJlcXVlc3RSZXNldC5maXJlKCkpO2JyZWFrO2Nhc2UgNjp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luPSEwLHRoaXMuX3NldEN1cnNvcigwLDApO2JyZWFrO2Nhc2UgNzp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZD0hMDticmVhaztjYXNlIDEyOmJyZWFrO2Nhc2UgNDU6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kPSEwO2JyZWFrO2Nhc2UgNjY6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiU2VyaWFsIHBvcnQgcmVxdWVzdGVkIGFwcGxpY2F0aW9uIGtleXBhZC4iKSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQ9ITAsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7YnJlYWs7Y2FzZSA5OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlUHJvdG9jb2w9IlgxMCI7YnJlYWs7Y2FzZSAxZTM6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD0iVlQyMDAiO2JyZWFrO2Nhc2UgMTAwMjp0aGlzLl9jb3JlTW91c2VTZXJ2aWNlLmFjdGl2ZVByb3RvY29sPSJEUkFHIjticmVhaztjYXNlIDEwMDM6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD0iQU5ZIjticmVhaztjYXNlIDEwMDQ6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnNlbmRGb2N1cz0hMCx0aGlzLl9vblJlcXVlc3RTZW5kRm9jdXMuZmlyZSgpO2JyZWFrO2Nhc2UgMTAwNTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJERUNTRVQgMTAwNSBub3Qgc3VwcG9ydGVkIChzZWUgIzI1MDcpIik7YnJlYWs7Y2FzZSAxMDA2OnRoaXMuX2NvcmVNb3VzZVNlcnZpY2UuYWN0aXZlRW5jb2Rpbmc9IlNHUiI7YnJlYWs7Y2FzZSAxMDE1OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIkRFQ1NFVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNykiKTticmVhaztjYXNlIDI1OnRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuPSExO2JyZWFrO2Nhc2UgMTA0ODp0aGlzLnNhdmVDdXJzb3IoKTticmVhaztjYXNlIDEwNDk6dGhpcy5zYXZlQ3Vyc29yKCk7Y2FzZSA0NzpjYXNlIDEwNDc6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2YXRlQWx0QnVmZmVyKHRoaXMuX2VyYXNlQXR0ckRhdGEoKSksdGhpcy5fY29yZVNlcnZpY2UuaXNDdXJzb3JJbml0aWFsaXplZD0hMCx0aGlzLl9vblJlcXVlc3RSZWZyZXNoUm93cy5maXJlKDAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX29uUmVxdWVzdFN5bmNTY3JvbGxCYXIuZmlyZSgpO2JyZWFrO2Nhc2UgMjAwNDp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYnJhY2tldGVkUGFzdGVNb2RlPSEwfXJldHVybiEwfSx0LnByb3RvdHlwZS5yZXNldE1vZGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspND09PWUucGFyYW1zW3RdJiYodGhpcy5fY29yZVNlcnZpY2UubW9kZXMuaW5zZXJ0TW9kZT0hMSk7cmV0dXJuITB9LHQucHJvdG90eXBlLnJlc2V0TW9kZVByaXZhdGU9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspc3dpdGNoKGUucGFyYW1zW3RdKXtjYXNlIDE6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLmFwcGxpY2F0aW9uQ3Vyc29yS2V5cz0hMTticmVhaztjYXNlIDM6dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dPcHRpb25zLnNldFdpbkxpbmVzJiYodGhpcy5fYnVmZmVyU2VydmljZS5yZXNpemUoODAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKSx0aGlzLl9vblJlcXVlc3RSZXNldC5maXJlKCkpO2JyZWFrO2Nhc2UgNjp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMub3JpZ2luPSExLHRoaXMuX3NldEN1cnNvcigwLDApO2JyZWFrO2Nhc2UgNzp0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMud3JhcGFyb3VuZD0hMTticmVhaztjYXNlIDEyOmJyZWFrO2Nhc2UgNDU6dGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLnJldmVyc2VXcmFwYXJvdW5kPSExO2JyZWFrO2Nhc2UgNjY6dGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiU3dpdGNoaW5nIGJhY2sgdG8gbm9ybWFsIGtleXBhZC4iKSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQ9ITEsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7YnJlYWs7Y2FzZSA5OmNhc2UgMWUzOmNhc2UgMTAwMjpjYXNlIDEwMDM6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVQcm90b2NvbD0iTk9ORSI7YnJlYWs7Y2FzZSAxMDA0OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5zZW5kRm9jdXM9ITE7YnJlYWs7Y2FzZSAxMDA1OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIkRFQ1JTVCAxMDA1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNykiKTticmVhaztjYXNlIDEwMDY6dGhpcy5fY29yZU1vdXNlU2VydmljZS5hY3RpdmVFbmNvZGluZz0iREVGQVVMVCI7YnJlYWs7Y2FzZSAxMDE1OnRoaXMuX2xvZ1NlcnZpY2UuZGVidWcoIkRFQ1JTVCAxMDE1IG5vdCBzdXBwb3J0ZWQgKHNlZSAjMjUwNykiKTticmVhaztjYXNlIDI1OnRoaXMuX2NvcmVTZXJ2aWNlLmlzQ3Vyc29ySGlkZGVuPSEwO2JyZWFrO2Nhc2UgMTA0ODp0aGlzLnJlc3RvcmVDdXJzb3IoKTticmVhaztjYXNlIDEwNDk6Y2FzZSA0NzpjYXNlIDEwNDc6dGhpcy5fYnVmZmVyU2VydmljZS5idWZmZXJzLmFjdGl2YXRlTm9ybWFsQnVmZmVyKCksMTA0OT09PWUucGFyYW1zW3RdJiZ0aGlzLnJlc3RvcmVDdXJzb3IoKSx0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckluaXRpYWxpemVkPSEwLHRoaXMuX29uUmVxdWVzdFJlZnJlc2hSb3dzLmZpcmUoMCx0aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSksdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCk7YnJlYWs7Y2FzZSAyMDA0OnRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5icmFja2V0ZWRQYXN0ZU1vZGU9ITF9cmV0dXJuITB9LHQucHJvdG90eXBlLl91cGRhdGVBdHRyQ29sb3I9ZnVuY3Rpb24oZSx0LHIsaSxuKXtyZXR1cm4gMj09PXQ/KGV8PTUwMzMxNjQ4LGUmPS0xNjc3NzIxNixlfD12LkF0dHJpYnV0ZURhdGEuZnJvbUNvbG9yUkdCKFtyLGksbl0pKTo1PT09dCYmKGUmPS01MDMzMTkwNCxlfD0zMzU1NDQzMnwyNTUmciksZX0sdC5wcm90b3R5cGUuX2V4dHJhY3RDb2xvcj1mdW5jdGlvbihlLHQscil7dmFyIGk9WzAsMCwtMSwwLDAsMF0sbj0wLG89MDtkb3tpZihpW28rbl09ZS5wYXJhbXNbdCtvXSxlLmhhc1N1YlBhcmFtcyh0K28pKXt2YXIgcz1lLmdldFN1YlBhcmFtcyh0K28pLGE9MDtkb3s1PT09aVsxXSYmKG49MSksaVtvK2ErMStuXT1zW2FdfXdoaWxlKCsrYTxzLmxlbmd0aCYmYStvKzErbjxpLmxlbmd0aCk7YnJlYWt9aWYoNT09PWlbMV0mJm8rbj49Mnx8Mj09PWlbMV0mJm8rbj49NSlicmVhaztpWzFdJiYobj0xKX13aGlsZSgrK28rdDxlLmxlbmd0aCYmbytuPGkubGVuZ3RoKTtmb3IoYT0yO2E8aS5sZW5ndGg7KythKS0xPT09aVthXSYmKGlbYV09MCk7c3dpdGNoKGlbMF0pe2Nhc2UgMzg6ci5mZz10aGlzLl91cGRhdGVBdHRyQ29sb3Ioci5mZyxpWzFdLGlbM10saVs0XSxpWzVdKTticmVhaztjYXNlIDQ4OnIuYmc9dGhpcy5fdXBkYXRlQXR0ckNvbG9yKHIuYmcsaVsxXSxpWzNdLGlbNF0saVs1XSk7YnJlYWs7Y2FzZSA1ODpyLmV4dGVuZGVkPXIuZXh0ZW5kZWQuY2xvbmUoKSxyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPXRoaXMuX3VwZGF0ZUF0dHJDb2xvcihyLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yLGlbMV0saVszXSxpWzRdLGlbNV0pfXJldHVybiBvfSx0LnByb3RvdHlwZS5fcHJvY2Vzc1VuZGVybGluZT1mdW5jdGlvbihlLHQpe3QuZXh0ZW5kZWQ9dC5leHRlbmRlZC5jbG9uZSgpLCghfmV8fGU+NSkmJihlPTEpLHQuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGU9ZSx0LmZnfD0yNjg0MzU0NTYsMD09PWUmJih0LmZnJj0tMjY4NDM1NDU3KSx0LnVwZGF0ZUV4dGVuZGVkKCl9LHQucHJvdG90eXBlLmNoYXJBdHRyaWJ1dGVzPWZ1bmN0aW9uKGUpe2lmKDE9PT1lLmxlbmd0aCYmMD09PWUucGFyYW1zWzBdKXJldHVybiB0aGlzLl9jdXJBdHRyRGF0YS5mZz1mLkRFRkFVTFRfQVRUUl9EQVRBLmZnLHRoaXMuX2N1ckF0dHJEYXRhLmJnPWYuREVGQVVMVF9BVFRSX0RBVEEuYmcsITA7Zm9yKHZhciB0LHI9ZS5sZW5ndGgsaT10aGlzLl9jdXJBdHRyRGF0YSxuPTA7bjxyO24rKykodD1lLnBhcmFtc1tuXSk+PTMwJiZ0PD0zNz8oaS5mZyY9LTUwMzMxOTA0LGkuZmd8PTE2Nzc3MjE2fHQtMzApOnQ+PTQwJiZ0PD00Nz8oaS5iZyY9LTUwMzMxOTA0LGkuYmd8PTE2Nzc3MjE2fHQtNDApOnQ+PTkwJiZ0PD05Nz8oaS5mZyY9LTUwMzMxOTA0LGkuZmd8PTE2Nzc3MjI0fHQtOTApOnQ+PTEwMCYmdDw9MTA3PyhpLmJnJj0tNTAzMzE5MDQsaS5iZ3w9MTY3NzcyMjR8dC0xMDApOjA9PT10PyhpLmZnPWYuREVGQVVMVF9BVFRSX0RBVEEuZmcsaS5iZz1mLkRFRkFVTFRfQVRUUl9EQVRBLmJnKToxPT09dD9pLmZnfD0xMzQyMTc3Mjg6Mz09PXQ/aS5iZ3w9NjcxMDg4NjQ6ND09PXQ/KGkuZmd8PTI2ODQzNTQ1Nix0aGlzLl9wcm9jZXNzVW5kZXJsaW5lKGUuaGFzU3ViUGFyYW1zKG4pP2UuZ2V0U3ViUGFyYW1zKG4pWzBdOjEsaSkpOjU9PT10P2kuZmd8PTUzNjg3MDkxMjo3PT09dD9pLmZnfD02NzEwODg2NDo4PT09dD9pLmZnfD0xMDczNzQxODI0Ojk9PT10P2kuZmd8PTIxNDc0ODM2NDg6Mj09PXQ/aS5iZ3w9MTM0MjE3NzI4OjIxPT09dD90aGlzLl9wcm9jZXNzVW5kZXJsaW5lKDIsaSk6MjI9PT10PyhpLmZnJj0tMTM0MjE3NzI5LGkuYmcmPS0xMzQyMTc3MjkpOjIzPT09dD9pLmJnJj0tNjcxMDg4NjU6MjQ9PT10P2kuZmcmPS0yNjg0MzU0NTc6MjU9PT10P2kuZmcmPS01MzY4NzA5MTM6Mjc9PT10P2kuZmcmPS02NzEwODg2NToyOD09PXQ/aS5mZyY9LTEwNzM3NDE4MjU6Mjk9PT10P2kuZmcmPTIxNDc0ODM2NDc6Mzk9PT10PyhpLmZnJj0tNjcxMDg4NjQsaS5mZ3w9MTY3NzcyMTUmZi5ERUZBVUxUX0FUVFJfREFUQS5mZyk6NDk9PT10PyhpLmJnJj0tNjcxMDg4NjQsaS5iZ3w9MTY3NzcyMTUmZi5ERUZBVUxUX0FUVFJfREFUQS5iZyk6Mzg9PT10fHw0OD09PXR8fDU4PT09dD9uKz10aGlzLl9leHRyYWN0Q29sb3IoZSxuLGkpOjU5PT09dD8oaS5leHRlbmRlZD1pLmV4dGVuZGVkLmNsb25lKCksaS5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj0tMSxpLnVwZGF0ZUV4dGVuZGVkKCkpOjEwMD09PXQ/KGkuZmcmPS02NzEwODg2NCxpLmZnfD0xNjc3NzIxNSZmLkRFRkFVTFRfQVRUUl9EQVRBLmZnLGkuYmcmPS02NzEwODg2NCxpLmJnfD0xNjc3NzIxNSZmLkRFRkFVTFRfQVRUUl9EQVRBLmJnKTp0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJVbmtub3duIFNHUiBhdHRyaWJ1dGU6ICVkLiIsdCk7cmV0dXJuITB9LHQucHJvdG90eXBlLmRldmljZVN0YXR1cz1mdW5jdGlvbihlKXtzd2l0Y2goZS5wYXJhbXNbMF0pe2Nhc2UgNTp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHMuQzAuRVNDKyJbMG4iKTticmVhaztjYXNlIDY6dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnkrMSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci54KzE7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWyIrdCsiOyIrcisiUiIpfXJldHVybiEwfSx0LnByb3RvdHlwZS5kZXZpY2VTdGF0dXNQcml2YXRlPWZ1bmN0aW9uKGUpe2lmKDY9PT1lLnBhcmFtc1swXSl7dmFyIHQ9dGhpcy5fYWN0aXZlQnVmZmVyLnkrMSxyPXRoaXMuX2FjdGl2ZUJ1ZmZlci54KzE7dGhpcy5fY29yZVNlcnZpY2UudHJpZ2dlckRhdGFFdmVudChzLkMwLkVTQysiWz8iK3QrIjsiK3IrIlIiKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuc29mdFJlc2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9jb3JlU2VydmljZS5pc0N1cnNvckhpZGRlbj0hMSx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKSx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wPTAsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbT10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MtMSx0aGlzLl9jdXJBdHRyRGF0YT1mLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCksdGhpcy5fY29yZVNlcnZpY2UucmVzZXQoKSx0aGlzLl9jaGFyc2V0U2VydmljZS5yZXNldCgpLHRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFg9MCx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRZPXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZz10aGlzLl9jdXJBdHRyRGF0YS5mZyx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZz10aGlzLl9jdXJBdHRyRGF0YS5iZyx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0PXRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQsdGhpcy5fY29yZVNlcnZpY2UuZGVjUHJpdmF0ZU1vZGVzLm9yaWdpbj0hMSwhMH0sdC5wcm90b3R5cGUuc2V0Q3Vyc29yU3R5bGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJhbXNbMF18fDE7c3dpdGNoKHQpe2Nhc2UgMTpjYXNlIDI6dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZT0iYmxvY2siO2JyZWFrO2Nhc2UgMzpjYXNlIDQ6dGhpcy5fb3B0aW9uc1NlcnZpY2Uub3B0aW9ucy5jdXJzb3JTdHlsZT0idW5kZXJsaW5lIjticmVhaztjYXNlIDU6Y2FzZSA2OnRoaXMuX29wdGlvbnNTZXJ2aWNlLm9wdGlvbnMuY3Vyc29yU3R5bGU9ImJhciJ9dmFyIHI9dCUyPT0xO3JldHVybiB0aGlzLl9vcHRpb25zU2VydmljZS5vcHRpb25zLmN1cnNvckJsaW5rPXIsITB9LHQucHJvdG90eXBlLnNldFNjcm9sbFJlZ2lvbj1mdW5jdGlvbihlKXt2YXIgdCxyPWUucGFyYW1zWzBdfHwxO3JldHVybihlLmxlbmd0aDwyfHwodD1lLnBhcmFtc1sxXSk+dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzfHwwPT09dCkmJih0PXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyksdD5yJiYodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcD1yLTEsdGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbEJvdHRvbT10LTEsdGhpcy5fc2V0Q3Vyc29yKDAsMCkpLCEwfSx0LnByb3RvdHlwZS53aW5kb3dPcHRpb25zPWZ1bmN0aW9uKGUpe2lmKCF3KGUucGFyYW1zWzBdLHRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93T3B0aW9ucykpcmV0dXJuITA7dmFyIHQ9ZS5sZW5ndGg+MT9lLnBhcmFtc1sxXTowO3N3aXRjaChlLnBhcmFtc1swXSl7Y2FzZSAxNDoyIT09dCYmdGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZShvLkdFVF9XSU5fU0laRV9QSVhFTFMpO2JyZWFrO2Nhc2UgMTY6dGhpcy5fb25SZXF1ZXN0V2luZG93c09wdGlvbnNSZXBvcnQuZmlyZShvLkdFVF9DRUxMX1NJWkVfUElYRUxTKTticmVhaztjYXNlIDE4OnRoaXMuX2J1ZmZlclNlcnZpY2UmJnRoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJEYXRhRXZlbnQocy5DMC5FU0MrIls4OyIrdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzKyI7Iit0aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHMrInQiKTticmVhaztjYXNlIDIyOjAhPT10JiYyIT09dHx8KHRoaXMuX3dpbmRvd1RpdGxlU3RhY2sucHVzaCh0aGlzLl93aW5kb3dUaXRsZSksdGhpcy5fd2luZG93VGl0bGVTdGFjay5sZW5ndGg+MTAmJnRoaXMuX3dpbmRvd1RpdGxlU3RhY2suc2hpZnQoKSksMCE9PXQmJjEhPT10fHwodGhpcy5faWNvbk5hbWVTdGFjay5wdXNoKHRoaXMuX2ljb25OYW1lKSx0aGlzLl9pY29uTmFtZVN0YWNrLmxlbmd0aD4xMCYmdGhpcy5faWNvbk5hbWVTdGFjay5zaGlmdCgpKTticmVhaztjYXNlIDIzOjAhPT10JiYyIT09dHx8dGhpcy5fd2luZG93VGl0bGVTdGFjay5sZW5ndGgmJnRoaXMuc2V0VGl0bGUodGhpcy5fd2luZG93VGl0bGVTdGFjay5wb3AoKSksMCE9PXQmJjEhPT10fHx0aGlzLl9pY29uTmFtZVN0YWNrLmxlbmd0aCYmdGhpcy5zZXRJY29uTmFtZSh0aGlzLl9pY29uTmFtZVN0YWNrLnBvcCgpKX1yZXR1cm4hMH0sdC5wcm90b3R5cGUuc2F2ZUN1cnNvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWD10aGlzLl9hY3RpdmVCdWZmZXIueCx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRZPXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5mZz10aGlzLl9jdXJBdHRyRGF0YS5mZyx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDdXJBdHRyRGF0YS5iZz10aGlzLl9jdXJBdHRyRGF0YS5iZyx0aGlzLl9hY3RpdmVCdWZmZXIuc2F2ZWRDaGFyc2V0PXRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQsITB9LHQucHJvdG90eXBlLnJlc3RvcmVDdXJzb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2FjdGl2ZUJ1ZmZlci54PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zYXZlZFh8fDAsdGhpcy5fYWN0aXZlQnVmZmVyLnk9TWF0aC5tYXgodGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkWS10aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UsMCksdGhpcy5fY3VyQXR0ckRhdGEuZmc9dGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuZmcsdGhpcy5fY3VyQXR0ckRhdGEuYmc9dGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ3VyQXR0ckRhdGEuYmcsdGhpcy5fY2hhcnNldFNlcnZpY2UuY2hhcnNldD10aGlzLl9zYXZlZENoYXJzZXQsdGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldCYmKHRoaXMuX2NoYXJzZXRTZXJ2aWNlLmNoYXJzZXQ9dGhpcy5fYWN0aXZlQnVmZmVyLnNhdmVkQ2hhcnNldCksdGhpcy5fcmVzdHJpY3RDdXJzb3IoKSwhMH0sdC5wcm90b3R5cGUuc2V0VGl0bGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3dpbmRvd1RpdGxlPWUsdGhpcy5fb25UaXRsZUNoYW5nZS5maXJlKGUpLCEwfSx0LnByb3RvdHlwZS5zZXRJY29uTmFtZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faWNvbk5hbWU9ZSwhMH0sdC5wcm90b3R5cGUuc2V0T3JSZXBvcnRJbmRleGVkQ29sb3I9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9ZS5zcGxpdCgiOyIpO3IubGVuZ3RoPjE7KXt2YXIgaT1yLnNoaWZ0KCksbj1yLnNoaWZ0KCk7aWYoL15cZCskLy5leGVjKGkpKXt2YXIgbz1wYXJzZUludChpKTtpZigwPD1vJiZvPDI1NilpZigiPyI9PT1uKXQucHVzaCh7dHlwZTowLGluZGV4Om99KTtlbHNle3ZhciBzPSgwLGIucGFyc2VDb2xvcikobik7cyYmdC5wdXNoKHt0eXBlOjEsaW5kZXg6byxjb2xvcjpzfSl9fX1yZXR1cm4gdC5sZW5ndGgmJnRoaXMuX29uQ29sb3IuZmlyZSh0KSwhMH0sdC5wcm90b3R5cGUuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWUuc3BsaXQoIjsiKSxpPTA7aTxyLmxlbmd0aCYmISh0Pj10aGlzLl9zcGVjaWFsQ29sb3JzLmxlbmd0aCk7KytpLCsrdClpZigiPyI9PT1yW2ldKXRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MCxpbmRleDp0aGlzLl9zcGVjaWFsQ29sb3JzW3RdfV0pO2Vsc2V7dmFyIG49KDAsYi5wYXJzZUNvbG9yKShyW2ldKTtuJiZ0aGlzLl9vbkNvbG9yLmZpcmUoW3t0eXBlOjEsaW5kZXg6dGhpcy5fc3BlY2lhbENvbG9yc1t0XSxjb2xvcjpufV0pfXJldHVybiEwfSx0LnByb3RvdHlwZS5zZXRPclJlcG9ydEZnQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX3NldE9yUmVwb3J0U3BlY2lhbENvbG9yKGUsMCl9LHQucHJvdG90eXBlLnNldE9yUmVwb3J0QmdDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IoZSwxKX0sdC5wcm90b3R5cGUuc2V0T3JSZXBvcnRDdXJzb3JDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2V0T3JSZXBvcnRTcGVjaWFsQ29sb3IoZSwyKX0sdC5wcm90b3R5cGUucmVzdG9yZUluZGV4ZWRDb2xvcj1mdW5jdGlvbihlKXtpZighZSlyZXR1cm4gdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToyfV0pLCEwO2Zvcih2YXIgdD1bXSxyPWUuc3BsaXQoIjsiKSxpPTA7aTxyLmxlbmd0aDsrK2kpaWYoL15cZCskLy5leGVjKHJbaV0pKXt2YXIgbj1wYXJzZUludChyW2ldKTswPD1uJiZuPDI1NiYmdC5wdXNoKHt0eXBlOjIsaW5kZXg6bn0pfXJldHVybiB0Lmxlbmd0aCYmdGhpcy5fb25Db2xvci5maXJlKHQpLCEwfSx0LnByb3RvdHlwZS5yZXN0b3JlRmdDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToyLGluZGV4OjI1Nn1dKSwhMH0sdC5wcm90b3R5cGUucmVzdG9yZUJnQ29sb3I9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uQ29sb3IuZmlyZShbe3R5cGU6MixpbmRleDoyNTd9XSksITB9LHQucHJvdG90eXBlLnJlc3RvcmVDdXJzb3JDb2xvcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fb25Db2xvci5maXJlKFt7dHlwZToyLGluZGV4OjI1OH1dKSwhMH0sdC5wcm90b3R5cGUubmV4dExpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlQnVmZmVyLng9MCx0aGlzLmluZGV4KCksITB9LHQucHJvdG90eXBlLmtleXBhZEFwcGxpY2F0aW9uTW9kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCJTZXJpYWwgcG9ydCByZXF1ZXN0ZWQgYXBwbGljYXRpb24ga2V5cGFkLiIpLHRoaXMuX2NvcmVTZXJ2aWNlLmRlY1ByaXZhdGVNb2Rlcy5hcHBsaWNhdGlvbktleXBhZD0hMCx0aGlzLl9vblJlcXVlc3RTeW5jU2Nyb2xsQmFyLmZpcmUoKSwhMH0sdC5wcm90b3R5cGUua2V5cGFkTnVtZXJpY01vZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9nU2VydmljZS5kZWJ1ZygiU3dpdGNoaW5nIGJhY2sgdG8gbm9ybWFsIGtleXBhZC4iKSx0aGlzLl9jb3JlU2VydmljZS5kZWNQcml2YXRlTW9kZXMuYXBwbGljYXRpb25LZXlwYWQ9ITEsdGhpcy5fb25SZXF1ZXN0U3luY1Njcm9sbEJhci5maXJlKCksITB9LHQucHJvdG90eXBlLnNlbGVjdERlZmF1bHRDaGFyc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NoYXJzZXRTZXJ2aWNlLnNldGdMZXZlbCgwKSx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldCgwLGEuREVGQVVMVF9DSEFSU0VUKSwhMH0sdC5wcm90b3R5cGUuc2VsZWN0Q2hhcnNldD1mdW5jdGlvbihlKXtyZXR1cm4gMiE9PWUubGVuZ3RoPyh0aGlzLnNlbGVjdERlZmF1bHRDaGFyc2V0KCksITApOigiLyI9PT1lWzBdfHx0aGlzLl9jaGFyc2V0U2VydmljZS5zZXRnQ2hhcnNldChTW2VbMF1dLGEuQ0hBUlNFVFNbZVsxXV18fGEuREVGQVVMVF9DSEFSU0VUKSwhMCl9LHQucHJvdG90eXBlLmluZGV4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fYWN0aXZlQnVmZmVyLnkrKyx0aGlzLl9hY3RpdmVCdWZmZXIueT09PXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxCb3R0b20rMT8odGhpcy5fYWN0aXZlQnVmZmVyLnktLSx0aGlzLl9idWZmZXJTZXJ2aWNlLnNjcm9sbCh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKTp0aGlzLl9hY3RpdmVCdWZmZXIueT49dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzJiYodGhpcy5fYWN0aXZlQnVmZmVyLnk9dGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpLHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksITB9LHQucHJvdG90eXBlLnRhYlNldD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXIudGFic1t0aGlzLl9hY3RpdmVCdWZmZXIueF09ITAsITB9LHQucHJvdG90eXBlLnJldmVyc2VJbmRleD1mdW5jdGlvbigpe2lmKHRoaXMuX3Jlc3RyaWN0Q3Vyc29yKCksdGhpcy5fYWN0aXZlQnVmZmVyLnk9PT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsVG9wKXt2YXIgZT10aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tLXRoaXMuX2FjdGl2ZUJ1ZmZlci5zY3JvbGxUb3A7dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNoaWZ0RWxlbWVudHModGhpcy5fYWN0aXZlQnVmZmVyLnliYXNlK3RoaXMuX2FjdGl2ZUJ1ZmZlci55LGUsMSksdGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLnNldCh0aGlzLl9hY3RpdmVCdWZmZXIueWJhc2UrdGhpcy5fYWN0aXZlQnVmZmVyLnksdGhpcy5fYWN0aXZlQnVmZmVyLmdldEJsYW5rTGluZSh0aGlzLl9lcmFzZUF0dHJEYXRhKCkpKSx0aGlzLl9kaXJ0eVJvd1NlcnZpY2UubWFya1JhbmdlRGlydHkodGhpcy5fYWN0aXZlQnVmZmVyLnNjcm9sbFRvcCx0aGlzLl9hY3RpdmVCdWZmZXIuc2Nyb2xsQm90dG9tKX1lbHNlIHRoaXMuX2FjdGl2ZUJ1ZmZlci55LS0sdGhpcy5fcmVzdHJpY3RDdXJzb3IoKTtyZXR1cm4hMH0sdC5wcm90b3R5cGUuZnVsbFJlc2V0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhcnNlci5yZXNldCgpLHRoaXMuX29uUmVxdWVzdFJlc2V0LmZpcmUoKSwhMH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9jdXJBdHRyRGF0YT1mLkRFRkFVTFRfQVRUUl9EQVRBLmNsb25lKCksdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsPWYuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKX0sdC5wcm90b3R5cGUuX2VyYXNlQXR0ckRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnJj0tNjcxMDg4NjQsdGhpcy5fZXJhc2VBdHRyRGF0YUludGVybmFsLmJnfD02NzEwODg2MyZ0aGlzLl9jdXJBdHRyRGF0YS5iZyx0aGlzLl9lcmFzZUF0dHJEYXRhSW50ZXJuYWx9LHQucHJvdG90eXBlLnNldGdMZXZlbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fY2hhcnNldFNlcnZpY2Uuc2V0Z0xldmVsKGUpLCEwfSx0LnByb3RvdHlwZS5zY3JlZW5BbGlnbm1lbnRQYXR0ZXJuPWZ1bmN0aW9uKCl7dmFyIGU9bmV3IHAuQ2VsbERhdGE7ZS5jb250ZW50PTE8PDIyfCJFIi5jaGFyQ29kZUF0KDApLGUuZmc9dGhpcy5fY3VyQXR0ckRhdGEuZmcsZS5iZz10aGlzLl9jdXJBdHRyRGF0YS5iZyx0aGlzLl9zZXRDdXJzb3IoMCwwKTtmb3IodmFyIHQ9MDt0PHRoaXMuX2J1ZmZlclNlcnZpY2Uucm93czsrK3Qpe3ZhciByPXRoaXMuX2FjdGl2ZUJ1ZmZlci55YmFzZSt0aGlzLl9hY3RpdmVCdWZmZXIueSt0LGk9dGhpcy5fYWN0aXZlQnVmZmVyLmxpbmVzLmdldChyKTtpJiYoaS5maWxsKGUpLGkuaXNXcmFwcGVkPSExKX1yZXR1cm4gdGhpcy5fZGlydHlSb3dTZXJ2aWNlLm1hcmtBbGxEaXJ0eSgpLHRoaXMuX3NldEN1cnNvcigwLDApLCEwfSx0fShsLkRpc3Bvc2FibGUpO3QuSW5wdXRIYW5kbGVyPUV9LDg0NDpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5nZXREaXNwb3NlQXJyYXlEaXNwb3NhYmxlPXQuZGlzcG9zZUFycmF5PXQuRGlzcG9zYWJsZT12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fZGlzcG9zYWJsZXM9W10sdGhpcy5faXNEaXNwb3NlZD0hMX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLHQ7dGhpcy5faXNEaXNwb3NlZD0hMDt0cnl7Zm9yKHZhciBpPXIodGhpcy5fZGlzcG9zYWJsZXMpLG49aS5uZXh0KCk7IW4uZG9uZTtuPWkubmV4dCgpKW4udmFsdWUuZGlzcG9zZSgpfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e24mJiFuLmRvbmUmJih0PWkucmV0dXJuKSYmdC5jYWxsKGkpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGg9MH0sZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goZSksZX0sZS5wcm90b3R5cGUudW5yZWdpc3Rlcj1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kaXNwb3NhYmxlcy5pbmRleE9mKGUpOy0xIT09dCYmdGhpcy5fZGlzcG9zYWJsZXMuc3BsaWNlKHQsMSl9LGV9KCk7ZnVuY3Rpb24gbihlKXt2YXIgdCxpO3RyeXtmb3IodmFyIG49cihlKSxvPW4ubmV4dCgpOyFvLmRvbmU7bz1uLm5leHQoKSlvLnZhbHVlLmRpc3Bvc2UoKX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtvJiYhby5kb25lJiYoaT1uLnJldHVybikmJmkuY2FsbChuKX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19ZS5sZW5ndGg9MH10LkRpc3Bvc2FibGU9aSx0LmRpc3Bvc2VBcnJheT1uLHQuZ2V0RGlzcG9zZUFycmF5RGlzcG9zYWJsZT1mdW5jdGlvbihlKXtyZXR1cm57ZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBuKGUpfX19fSw2MTE0OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuaXNMaW51eD10LmlzV2luZG93cz10LmlzSXBob25lPXQuaXNJcGFkPXQuaXNNYWM9dC5pc1NhZmFyaT10LmlzTGVnYWN5RWRnZT10LmlzRmlyZWZveD12b2lkIDA7dmFyIHI9InVuZGVmaW5lZCI9PXR5cGVvZiBuYXZpZ2F0b3IsaT1yPyJub2RlIjpuYXZpZ2F0b3IudXNlckFnZW50LG49cj8ibm9kZSI6bmF2aWdhdG9yLnBsYXRmb3JtO3QuaXNGaXJlZm94PWkuaW5jbHVkZXMoIkZpcmVmb3giKSx0LmlzTGVnYWN5RWRnZT1pLmluY2x1ZGVzKCJFZGdlIiksdC5pc1NhZmFyaT0vXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KGkpLHQuaXNNYWM9WyJNYWNpbnRvc2giLCJNYWNJbnRlbCIsIk1hY1BQQyIsIk1hYzY4SyJdLmluY2x1ZGVzKG4pLHQuaXNJcGFkPSJpUGFkIj09PW4sdC5pc0lwaG9uZT0iaVBob25lIj09PW4sdC5pc1dpbmRvd3M9WyJXaW5kb3dzIiwiV2luMTYiLCJXaW4zMiIsIldpbkNFIl0uaW5jbHVkZXMobiksdC5pc0xpbnV4PW4uaW5kZXhPZigiTGludXgiKT49MH0sNjEwNjpmdW5jdGlvbihlLHQpe3ZhciByPXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxuLG8scz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZuWzBdKXRocm93IG5bMV07cmV0dXJuIG5bMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gbz17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihvW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG87ZnVuY3Rpb24gYShvKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7czspdHJ5e2lmKHI9MSxpJiYobj0yJm9bMF0/aS5yZXR1cm46b1swXT9pLnRocm93fHwoKG49aS5yZXR1cm4pJiZuLmNhbGwoaSksMCk6aS5uZXh0KSYmIShuPW4uY2FsbChpLG9bMV0pKS5kb25lKXJldHVybiBuO3N3aXRjaChpPTAsbiYmKG89WzImb1swXSxuLnZhbHVlXSksb1swXSl7Y2FzZSAwOmNhc2UgMTpuPW87YnJlYWs7Y2FzZSA0OnJldHVybiBzLmxhYmVsKysse3ZhbHVlOm9bMV0sZG9uZTohMX07Y2FzZSA1OnMubGFiZWwrKyxpPW9bMV0sbz1bMF07Y29udGludWU7Y2FzZSA3Om89cy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoISgobj0obj1zLnRyeXMpLmxlbmd0aD4wJiZuW24ubGVuZ3RoLTFdKXx8NiE9PW9bMF0mJjIhPT1vWzBdKSl7cz0wO2NvbnRpbnVlfWlmKDM9PT1vWzBdJiYoIW58fG9bMV0+blswXSYmb1sxXTxuWzNdKSl7cy5sYWJlbD1vWzFdO2JyZWFrfWlmKDY9PT1vWzBdJiZzLmxhYmVsPG5bMV0pe3MubGFiZWw9blsxXSxuPW87YnJlYWt9aWYobiYmcy5sYWJlbDxuWzJdKXtzLmxhYmVsPW5bMl0scy5vcHMucHVzaChvKTticmVha31uWzJdJiZzLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWV9bz10LmNhbGwoZSxzKX1jYXRjaChlKXtvPVs2LGVdLGk9MH1maW5hbGx5e3I9bj0wfWlmKDUmb1swXSl0aHJvdyBvWzFdO3JldHVybnt2YWx1ZTpvWzBdP29bMV06dm9pZCAwLGRvbmU6ITB9fShbbyxhXSl9fX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuU29ydGVkTGlzdD12b2lkIDA7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2dldEtleT1lLHRoaXMuX2FycmF5PVtdfXJldHVybiBlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuX2FycmF5Lmxlbmd0aD0wfSxlLnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24oZSl7aWYoMCE9PXRoaXMuX2FycmF5Lmxlbmd0aCl7dmFyIHQ9dGhpcy5fc2VhcmNoKHRoaXMuX2dldEtleShlKSwwLHRoaXMuX2FycmF5Lmxlbmd0aC0xKTt0aGlzLl9hcnJheS5zcGxpY2UodCwwLGUpfWVsc2UgdGhpcy5fYXJyYXkucHVzaChlKX0sZS5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGUpe2lmKDA9PT10aGlzLl9hcnJheS5sZW5ndGgpcmV0dXJuITE7dmFyIHQ9dGhpcy5fZ2V0S2V5KGUpLHI9dGhpcy5fc2VhcmNoKHQsMCx0aGlzLl9hcnJheS5sZW5ndGgtMSk7aWYodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W3JdKSE9PXQpcmV0dXJuITE7ZG97aWYodGhpcy5fYXJyYXlbcl09PT1lKXJldHVybiB0aGlzLl9hcnJheS5zcGxpY2UociwxKSwhMH13aGlsZSgrK3I8dGhpcy5fYXJyYXkubGVuZ3RoJiZ0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbcl0pPT09dCk7cmV0dXJuITF9LGUucHJvdG90eXBlLmdldEtleUl0ZXJhdG9yPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiByKHRoaXMsKGZ1bmN0aW9uKHIpe3N3aXRjaChyLmxhYmVsKXtjYXNlIDA6aWYoMD09PXRoaXMuX2FycmF5Lmxlbmd0aClyZXR1cm5bMl07aWYoKHQ9dGhpcy5fc2VhcmNoKGUsMCx0aGlzLl9hcnJheS5sZW5ndGgtMSkpPDB8fHQ+PXRoaXMuX2FycmF5Lmxlbmd0aClyZXR1cm5bMl07aWYodGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W3RdKSE9PWUpcmV0dXJuWzJdO3IubGFiZWw9MTtjYXNlIDE6cmV0dXJuWzQsdGhpcy5fYXJyYXlbdF1dO2Nhc2UgMjpyLnNlbnQoKSxyLmxhYmVsPTM7Y2FzZSAzOmlmKCsrdDx0aGlzLl9hcnJheS5sZW5ndGgmJnRoaXMuX2dldEtleSh0aGlzLl9hcnJheVt0XSk9PT1lKXJldHVyblszLDFdO3IubGFiZWw9NDtjYXNlIDQ6cmV0dXJuWzJdfX0pKX0sZS5wcm90b3R5cGUudmFsdWVzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FycmF5LnZhbHVlcygpfSxlLnByb3RvdHlwZS5fc2VhcmNoPWZ1bmN0aW9uKGUsdCxyKXtpZihyPHQpcmV0dXJuIHQ7dmFyIGk9TWF0aC5mbG9vcigodCtyKS8yKTtpZih0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbaV0pPmUpcmV0dXJuIHRoaXMuX3NlYXJjaChlLHQsaS0xKTtpZih0aGlzLl9nZXRLZXkodGhpcy5fYXJyYXlbaV0pPGUpcmV0dXJuIHRoaXMuX3NlYXJjaChlLGkrMSxyKTtmb3IoO2k+MCYmdGhpcy5fZ2V0S2V5KHRoaXMuX2FycmF5W2ktMV0pPT09ZTspaS0tO3JldHVybiBpfSxlfSgpO3QuU29ydGVkTGlzdD1pfSw4MjczOihlLHQpPT57ZnVuY3Rpb24gcihlLHQscixpKXtpZih2b2lkIDA9PT1yJiYocj0wKSx2b2lkIDA9PT1pJiYoaT1lLmxlbmd0aCkscj49ZS5sZW5ndGgpcmV0dXJuIGU7cj0oZS5sZW5ndGgrciklZS5sZW5ndGgsaT1pPj1lLmxlbmd0aD9lLmxlbmd0aDooZS5sZW5ndGgraSklZS5sZW5ndGg7Zm9yKHZhciBuPXI7bjxpOysrbillW25dPXQ7cmV0dXJuIGV9T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuY29uY2F0PXQuZmlsbEZhbGxiYWNrPXQuZmlsbD12b2lkIDAsdC5maWxsPWZ1bmN0aW9uKGUsdCxpLG4pe3JldHVybiBlLmZpbGw/ZS5maWxsKHQsaSxuKTpyKGUsdCxpLG4pfSx0LmZpbGxGYWxsYmFjaz1yLHQuY29uY2F0PWZ1bmN0aW9uKGUsdCl7dmFyIHI9bmV3IGUuY29uc3RydWN0b3IoZS5sZW5ndGgrdC5sZW5ndGgpO3JldHVybiByLnNldChlKSxyLnNldCh0LGUubGVuZ3RoKSxyfX0sOTI4MjooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQudXBkYXRlV2luZG93c01vZGVXcmFwcGVkU3RhdGU9dm9pZCAwO3ZhciBpPXIoNjQzKTt0LnVwZGF0ZVdpbmRvd3NNb2RlV3JhcHBlZFN0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PWUuYnVmZmVyLmxpbmVzLmdldChlLmJ1ZmZlci55YmFzZStlLmJ1ZmZlci55LTEpLHI9bnVsbD09dD92b2lkIDA6dC5nZXQoZS5jb2xzLTEpLG49ZS5idWZmZXIubGluZXMuZ2V0KGUuYnVmZmVyLnliYXNlK2UuYnVmZmVyLnkpO24mJnImJihuLmlzV3JhcHBlZD1yW2kuQ0hBUl9EQVRBX0NPREVfSU5ERVhdIT09aS5OVUxMX0NFTExfQ09ERSYmcltpLkNIQVJfREFUQV9DT0RFX0lOREVYXSE9PWkuV0hJVEVTUEFDRV9DRUxMX0NPREUpfX0sMzczNDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkV4dGVuZGVkQXR0cnM9dC5BdHRyaWJ1dGVEYXRhPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmZnPTAsdGhpcy5iZz0wLHRoaXMuZXh0ZW5kZWQ9bmV3IGl9cmV0dXJuIGUudG9Db2xvclJHQj1mdW5jdGlvbihlKXtyZXR1cm5bZT4+PjE2JjI1NSxlPj4+OCYyNTUsMjU1JmVdfSxlLmZyb21Db2xvclJHQj1mdW5jdGlvbihlKXtyZXR1cm4oMjU1JmVbMF0pPDwxNnwoMjU1JmVbMV0pPDw4fDI1NSZlWzJdfSxlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciB0PW5ldyBlO3JldHVybiB0LmZnPXRoaXMuZmcsdC5iZz10aGlzLmJnLHQuZXh0ZW5kZWQ9dGhpcy5leHRlbmRlZC5jbG9uZSgpLHR9LGUucHJvdG90eXBlLmlzSW52ZXJzZT1mdW5jdGlvbigpe3JldHVybiA2NzEwODg2NCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc0JvbGQ9ZnVuY3Rpb24oKXtyZXR1cm4gMTM0MjE3NzI4JnRoaXMuZmd9LGUucHJvdG90eXBlLmlzVW5kZXJsaW5lPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc0JsaW5rPWZ1bmN0aW9uKCl7cmV0dXJuIDUzNjg3MDkxMiZ0aGlzLmZnfSxlLnByb3RvdHlwZS5pc0ludmlzaWJsZT1mdW5jdGlvbigpe3JldHVybiAxMDczNzQxODI0JnRoaXMuZmd9LGUucHJvdG90eXBlLmlzSXRhbGljPWZ1bmN0aW9uKCl7cmV0dXJuIDY3MTA4ODY0JnRoaXMuYmd9LGUucHJvdG90eXBlLmlzRGltPWZ1bmN0aW9uKCl7cmV0dXJuIDEzNDIxNzcyOCZ0aGlzLmJnfSxlLnByb3RvdHlwZS5pc1N0cmlrZXRocm91Z2g9ZnVuY3Rpb24oKXtyZXR1cm4gMjE0NzQ4MzY0OCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5nZXRGZ0NvbG9yTW9kZT1mdW5jdGlvbigpe3JldHVybiA1MDMzMTY0OCZ0aGlzLmZnfSxlLnByb3RvdHlwZS5nZXRCZ0NvbG9yTW9kZT1mdW5jdGlvbigpe3JldHVybiA1MDMzMTY0OCZ0aGlzLmJnfSxlLnByb3RvdHlwZS5pc0ZnUkdCPWZ1bmN0aW9uKCl7cmV0dXJuIDUwMzMxNjQ4PT0oNTAzMzE2NDgmdGhpcy5mZyl9LGUucHJvdG90eXBlLmlzQmdSR0I9ZnVuY3Rpb24oKXtyZXR1cm4gNTAzMzE2NDg9PSg1MDMzMTY0OCZ0aGlzLmJnKX0sZS5wcm90b3R5cGUuaXNGZ1BhbGV0dGU9ZnVuY3Rpb24oKXtyZXR1cm4gMTY3NzcyMTY9PSg1MDMzMTY0OCZ0aGlzLmZnKXx8MzM1NTQ0MzI9PSg1MDMzMTY0OCZ0aGlzLmZnKX0sZS5wcm90b3R5cGUuaXNCZ1BhbGV0dGU9ZnVuY3Rpb24oKXtyZXR1cm4gMTY3NzcyMTY9PSg1MDMzMTY0OCZ0aGlzLmJnKXx8MzM1NTQ0MzI9PSg1MDMzMTY0OCZ0aGlzLmJnKX0sZS5wcm90b3R5cGUuaXNGZ0RlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMD09KDUwMzMxNjQ4JnRoaXMuZmcpfSxlLnByb3RvdHlwZS5pc0JnRGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiAwPT0oNTAzMzE2NDgmdGhpcy5iZyl9LGUucHJvdG90eXBlLmlzQXR0cmlidXRlRGVmYXVsdD1mdW5jdGlvbigpe3JldHVybiAwPT09dGhpcy5mZyYmMD09PXRoaXMuYmd9LGUucHJvdG90eXBlLmdldEZnQ29sb3I9ZnVuY3Rpb24oKXtzd2l0Y2goNTAzMzE2NDgmdGhpcy5mZyl7Y2FzZSAxNjc3NzIxNjpjYXNlIDMzNTU0NDMyOnJldHVybiAyNTUmdGhpcy5mZztjYXNlIDUwMzMxNjQ4OnJldHVybiAxNjc3NzIxNSZ0aGlzLmZnO2RlZmF1bHQ6cmV0dXJuLTF9fSxlLnByb3RvdHlwZS5nZXRCZ0NvbG9yPWZ1bmN0aW9uKCl7c3dpdGNoKDUwMzMxNjQ4JnRoaXMuYmcpe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gMjU1JnRoaXMuYmc7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gMTY3NzcyMTUmdGhpcy5iZztkZWZhdWx0OnJldHVybi0xfX0sZS5wcm90b3R5cGUuaGFzRXh0ZW5kZWRBdHRycz1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5iZ30sZS5wcm90b3R5cGUudXBkYXRlRXh0ZW5kZWQ9ZnVuY3Rpb24oKXt0aGlzLmV4dGVuZGVkLmlzRW1wdHkoKT90aGlzLmJnJj0tMjY4NDM1NDU3OnRoaXMuYmd8PTI2ODQzNTQ1Nn0sZS5wcm90b3R5cGUuZ2V0VW5kZXJsaW5lQ29sb3I9ZnVuY3Rpb24oKXtpZigyNjg0MzU0NTYmdGhpcy5iZyYmfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3Ipc3dpdGNoKDUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3Ipe2Nhc2UgMTY3NzcyMTY6Y2FzZSAzMzU1NDQzMjpyZXR1cm4gMjU1JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I7Y2FzZSA1MDMzMTY0ODpyZXR1cm4gMTY3NzcyMTUmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcjtkZWZhdWx0OnJldHVybiB0aGlzLmdldEZnQ29sb3IoKX1yZXR1cm4gdGhpcy5nZXRGZ0NvbG9yKCl9LGUucHJvdG90eXBlLmdldFVuZGVybGluZUNvbG9yTW9kZT1mdW5jdGlvbigpe3JldHVybiAyNjg0MzU0NTYmdGhpcy5iZyYmfnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3I/NTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcjp0aGlzLmdldEZnQ29sb3JNb2RlKCl9LGUucHJvdG90eXBlLmlzVW5kZXJsaW5lQ29sb3JSR0I9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzUwMzMxNjQ4PT0oNTAzMzE2NDgmdGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcik6dGhpcy5pc0ZnUkdCKCl9LGUucHJvdG90eXBlLmlzVW5kZXJsaW5lQ29sb3JQYWxldHRlPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmJnJiZ+dGhpcy5leHRlbmRlZC51bmRlcmxpbmVDb2xvcj8xNjc3NzIxNj09KDUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IpfHwzMzU1NDQzMj09KDUwMzMxNjQ4JnRoaXMuZXh0ZW5kZWQudW5kZXJsaW5lQ29sb3IpOnRoaXMuaXNGZ1BhbGV0dGUoKX0sZS5wcm90b3R5cGUuaXNVbmRlcmxpbmVDb2xvckRlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gMjY4NDM1NDU2JnRoaXMuYmcmJn50aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yPzA9PSg1MDMzMTY0OCZ0aGlzLmV4dGVuZGVkLnVuZGVybGluZUNvbG9yKTp0aGlzLmlzRmdEZWZhdWx0KCl9LGUucHJvdG90eXBlLmdldFVuZGVybGluZVN0eWxlPWZ1bmN0aW9uKCl7cmV0dXJuIDI2ODQzNTQ1NiZ0aGlzLmZnPzI2ODQzNTQ1NiZ0aGlzLmJnP3RoaXMuZXh0ZW5kZWQudW5kZXJsaW5lU3R5bGU6MTowfSxlfSgpO3QuQXR0cmlidXRlRGF0YT1yO3ZhciBpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQpe3ZvaWQgMD09PWUmJihlPTApLHZvaWQgMD09PXQmJih0PS0xKSx0aGlzLnVuZGVybGluZVN0eWxlPWUsdGhpcy51bmRlcmxpbmVDb2xvcj10fXJldHVybiBlLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZSh0aGlzLnVuZGVybGluZVN0eWxlLHRoaXMudW5kZXJsaW5lQ29sb3IpfSxlLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnVuZGVybGluZVN0eWxlfSxlfSgpO3QuRXh0ZW5kZWRBdHRycz1pfSw5MDkyOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9LG49dGhpcyYmdGhpcy5fX3NwcmVhZEFycmF5fHxmdW5jdGlvbihlLHQscil7aWYocnx8Mj09PWFyZ3VtZW50cy5sZW5ndGgpZm9yKHZhciBpLG49MCxvPXQubGVuZ3RoO248bztuKyspIWkmJm4gaW4gdHx8KGl8fChpPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQsMCxuKSksaVtuXT10W25dKTtyZXR1cm4gZS5jb25jYXQoaXx8QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCkpfTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJTdHJpbmdJdGVyYXRvcj10LkJ1ZmZlcj10Lk1BWF9CVUZGRVJfU0laRT12b2lkIDA7dmFyIG89cig2MzQ5KSxzPXIoODQzNyksYT1yKDUxMSksYz1yKDY0MyksbD1yKDQ2MzQpLGg9cig0ODYzKSx1PXIoNzExNiksZj1yKDM3MzQpO3QuTUFYX0JVRkZFUl9TSVpFPTQyOTQ5NjcyOTU7dmFyIF89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt0aGlzLl9oYXNTY3JvbGxiYWNrPWUsdGhpcy5fb3B0aW9uc1NlcnZpY2U9dCx0aGlzLl9idWZmZXJTZXJ2aWNlPXIsdGhpcy55ZGlzcD0wLHRoaXMueWJhc2U9MCx0aGlzLnk9MCx0aGlzLng9MCx0aGlzLnNhdmVkWT0wLHRoaXMuc2F2ZWRYPTAsdGhpcy5zYXZlZEN1ckF0dHJEYXRhPXMuREVGQVVMVF9BVFRSX0RBVEEuY2xvbmUoKSx0aGlzLnNhdmVkQ2hhcnNldD11LkRFRkFVTFRfQ0hBUlNFVCx0aGlzLm1hcmtlcnM9W10sdGhpcy5fbnVsbENlbGw9YS5DZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsYy5OVUxMX0NFTExfQ0hBUixjLk5VTExfQ0VMTF9XSURUSCxjLk5VTExfQ0VMTF9DT0RFXSksdGhpcy5fd2hpdGVzcGFjZUNlbGw9YS5DZWxsRGF0YS5mcm9tQ2hhckRhdGEoWzAsYy5XSElURVNQQUNFX0NFTExfQ0hBUixjLldISVRFU1BBQ0VfQ0VMTF9XSURUSCxjLldISVRFU1BBQ0VfQ0VMTF9DT0RFXSksdGhpcy5faXNDbGVhcmluZz0hMSx0aGlzLl9jb2xzPXRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLl9yb3dzPXRoaXMuX2J1ZmZlclNlcnZpY2Uucm93cyx0aGlzLmxpbmVzPW5ldyBvLkNpcmN1bGFyTGlzdCh0aGlzLl9nZXRDb3JyZWN0QnVmZmVyTGVuZ3RoKHRoaXMuX3Jvd3MpKSx0aGlzLnNjcm9sbFRvcD0wLHRoaXMuc2Nyb2xsQm90dG9tPXRoaXMuX3Jvd3MtMSx0aGlzLnNldHVwVGFiU3RvcHMoKX1yZXR1cm4gZS5wcm90b3R5cGUuZ2V0TnVsbENlbGw9ZnVuY3Rpb24oZSl7cmV0dXJuIGU/KHRoaXMuX251bGxDZWxsLmZnPWUuZmcsdGhpcy5fbnVsbENlbGwuYmc9ZS5iZyx0aGlzLl9udWxsQ2VsbC5leHRlbmRlZD1lLmV4dGVuZGVkKToodGhpcy5fbnVsbENlbGwuZmc9MCx0aGlzLl9udWxsQ2VsbC5iZz0wLHRoaXMuX251bGxDZWxsLmV4dGVuZGVkPW5ldyBmLkV4dGVuZGVkQXR0cnMpLHRoaXMuX251bGxDZWxsfSxlLnByb3RvdHlwZS5nZXRXaGl0ZXNwYWNlQ2VsbD1mdW5jdGlvbihlKXtyZXR1cm4gZT8odGhpcy5fd2hpdGVzcGFjZUNlbGwuZmc9ZS5mZyx0aGlzLl93aGl0ZXNwYWNlQ2VsbC5iZz1lLmJnLHRoaXMuX3doaXRlc3BhY2VDZWxsLmV4dGVuZGVkPWUuZXh0ZW5kZWQpOih0aGlzLl93aGl0ZXNwYWNlQ2VsbC5mZz0wLHRoaXMuX3doaXRlc3BhY2VDZWxsLmJnPTAsdGhpcy5fd2hpdGVzcGFjZUNlbGwuZXh0ZW5kZWQ9bmV3IGYuRXh0ZW5kZWRBdHRycyksdGhpcy5fd2hpdGVzcGFjZUNlbGx9LGUucHJvdG90eXBlLmdldEJsYW5rTGluZT1mdW5jdGlvbihlLHQpe3JldHVybiBuZXcgcy5CdWZmZXJMaW5lKHRoaXMuX2J1ZmZlclNlcnZpY2UuY29scyx0aGlzLmdldE51bGxDZWxsKGUpLHQpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImhhc1Njcm9sbGJhY2siLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayYmdGhpcy5saW5lcy5tYXhMZW5ndGg+dGhpcy5fcm93c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImlzQ3Vyc29ySW5WaWV3cG9ydCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMueWJhc2UrdGhpcy55LXRoaXMueWRpc3A7cmV0dXJuIGU+PTAmJmU8dGhpcy5fcm93c30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aD1mdW5jdGlvbihlKXtpZighdGhpcy5faGFzU2Nyb2xsYmFjaylyZXR1cm4gZTt2YXIgcj1lK3RoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuc2Nyb2xsYmFjaztyZXR1cm4gcj50Lk1BWF9CVUZGRVJfU0laRT90Lk1BWF9CVUZGRVJfU0laRTpyfSxlLnByb3RvdHlwZS5maWxsVmlld3BvcnRSb3dzPWZ1bmN0aW9uKGUpe2lmKDA9PT10aGlzLmxpbmVzLmxlbmd0aCl7dm9pZCAwPT09ZSYmKGU9cy5ERUZBVUxUX0FUVFJfREFUQSk7Zm9yKHZhciB0PXRoaXMuX3Jvd3M7dC0tOyl0aGlzLmxpbmVzLnB1c2godGhpcy5nZXRCbGFua0xpbmUoZSkpfX0sZS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLnlkaXNwPTAsdGhpcy55YmFzZT0wLHRoaXMueT0wLHRoaXMueD0wLHRoaXMubGluZXM9bmV3IG8uQ2lyY3VsYXJMaXN0KHRoaXMuX2dldENvcnJlY3RCdWZmZXJMZW5ndGgodGhpcy5fcm93cykpLHRoaXMuc2Nyb2xsVG9wPTAsdGhpcy5zY3JvbGxCb3R0b209dGhpcy5fcm93cy0xLHRoaXMuc2V0dXBUYWJTdG9wcygpfSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLmdldE51bGxDZWxsKHMuREVGQVVMVF9BVFRSX0RBVEEpLGk9dGhpcy5fZ2V0Q29ycmVjdEJ1ZmZlckxlbmd0aCh0KTtpZihpPnRoaXMubGluZXMubWF4TGVuZ3RoJiYodGhpcy5saW5lcy5tYXhMZW5ndGg9aSksdGhpcy5saW5lcy5sZW5ndGg+MCl7aWYodGhpcy5fY29sczxlKWZvcih2YXIgbj0wO248dGhpcy5saW5lcy5sZW5ndGg7bisrKXRoaXMubGluZXMuZ2V0KG4pLnJlc2l6ZShlLHIpO3ZhciBvPTA7aWYodGhpcy5fcm93czx0KWZvcih2YXIgYT10aGlzLl9yb3dzO2E8dDthKyspdGhpcy5saW5lcy5sZW5ndGg8dCt0aGlzLnliYXNlJiYodGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy53aW5kb3dzTW9kZT90aGlzLmxpbmVzLnB1c2gobmV3IHMuQnVmZmVyTGluZShlLHIpKTp0aGlzLnliYXNlPjAmJnRoaXMubGluZXMubGVuZ3RoPD10aGlzLnliYXNlK3RoaXMueStvKzE/KHRoaXMueWJhc2UtLSxvKyssdGhpcy55ZGlzcD4wJiZ0aGlzLnlkaXNwLS0pOnRoaXMubGluZXMucHVzaChuZXcgcy5CdWZmZXJMaW5lKGUscikpKTtlbHNlIGZvcihhPXRoaXMuX3Jvd3M7YT50O2EtLSl0aGlzLmxpbmVzLmxlbmd0aD50K3RoaXMueWJhc2UmJih0aGlzLmxpbmVzLmxlbmd0aD50aGlzLnliYXNlK3RoaXMueSsxP3RoaXMubGluZXMucG9wKCk6KHRoaXMueWJhc2UrKyx0aGlzLnlkaXNwKyspKTtpZihpPHRoaXMubGluZXMubWF4TGVuZ3RoKXt2YXIgYz10aGlzLmxpbmVzLmxlbmd0aC1pO2M+MCYmKHRoaXMubGluZXMudHJpbVN0YXJ0KGMpLHRoaXMueWJhc2U9TWF0aC5tYXgodGhpcy55YmFzZS1jLDApLHRoaXMueWRpc3A9TWF0aC5tYXgodGhpcy55ZGlzcC1jLDApLHRoaXMuc2F2ZWRZPU1hdGgubWF4KHRoaXMuc2F2ZWRZLWMsMCkpLHRoaXMubGluZXMubWF4TGVuZ3RoPWl9dGhpcy54PU1hdGgubWluKHRoaXMueCxlLTEpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC0xKSxvJiYodGhpcy55Kz1vKSx0aGlzLnNhdmVkWD1NYXRoLm1pbih0aGlzLnNhdmVkWCxlLTEpLHRoaXMuc2Nyb2xsVG9wPTB9aWYodGhpcy5zY3JvbGxCb3R0b209dC0xLHRoaXMuX2lzUmVmbG93RW5hYmxlZCYmKHRoaXMuX3JlZmxvdyhlLHQpLHRoaXMuX2NvbHM+ZSkpZm9yKG49MDtuPHRoaXMubGluZXMubGVuZ3RoO24rKyl0aGlzLmxpbmVzLmdldChuKS5yZXNpemUoZSxyKTt0aGlzLl9jb2xzPWUsdGhpcy5fcm93cz10fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIl9pc1JlZmxvd0VuYWJsZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGFzU2Nyb2xsYmFjayYmIXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMud2luZG93c01vZGV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX3JlZmxvdz1mdW5jdGlvbihlLHQpe3RoaXMuX2NvbHMhPT1lJiYoZT50aGlzLl9jb2xzP3RoaXMuX3JlZmxvd0xhcmdlcihlLHQpOnRoaXMuX3JlZmxvd1NtYWxsZXIoZSx0KSl9LGUucHJvdG90eXBlLl9yZWZsb3dMYXJnZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj0oMCxsLnJlZmxvd0xhcmdlckdldExpbmVzVG9SZW1vdmUpKHRoaXMubGluZXMsdGhpcy5fY29scyxlLHRoaXMueWJhc2UrdGhpcy55LHRoaXMuZ2V0TnVsbENlbGwocy5ERUZBVUxUX0FUVFJfREFUQSkpO2lmKHIubGVuZ3RoPjApe3ZhciBpPSgwLGwucmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0KSh0aGlzLmxpbmVzLHIpOygwLGwucmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQpKHRoaXMubGluZXMsaS5sYXlvdXQpLHRoaXMuX3JlZmxvd0xhcmdlckFkanVzdFZpZXdwb3J0KGUsdCxpLmNvdW50UmVtb3ZlZCl9fSxlLnByb3RvdHlwZS5fcmVmbG93TGFyZ2VyQWRqdXN0Vmlld3BvcnQ9ZnVuY3Rpb24oZSx0LHIpe2Zvcih2YXIgaT10aGlzLmdldE51bGxDZWxsKHMuREVGQVVMVF9BVFRSX0RBVEEpLG49cjtuLS0gPjA7KTA9PT10aGlzLnliYXNlPyh0aGlzLnk+MCYmdGhpcy55LS0sdGhpcy5saW5lcy5sZW5ndGg8dCYmdGhpcy5saW5lcy5wdXNoKG5ldyBzLkJ1ZmZlckxpbmUoZSxpKSkpOih0aGlzLnlkaXNwPT09dGhpcy55YmFzZSYmdGhpcy55ZGlzcC0tLHRoaXMueWJhc2UtLSk7dGhpcy5zYXZlZFk9TWF0aC5tYXgodGhpcy5zYXZlZFktciwwKX0sZS5wcm90b3R5cGUuX3JlZmxvd1NtYWxsZXI9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9dGhpcy5nZXROdWxsQ2VsbChzLkRFRkFVTFRfQVRUUl9EQVRBKSxvPVtdLGE9MCxjPXRoaXMubGluZXMubGVuZ3RoLTE7Yz49MDtjLS0pe3ZhciBoPXRoaXMubGluZXMuZ2V0KGMpO2lmKCEoIWh8fCFoLmlzV3JhcHBlZCYmaC5nZXRUcmltbWVkTGVuZ3RoKCk8PWUpKXtmb3IodmFyIHU9W2hdO2guaXNXcmFwcGVkJiZjPjA7KWg9dGhpcy5saW5lcy5nZXQoLS1jKSx1LnVuc2hpZnQoaCk7dmFyIGY9dGhpcy55YmFzZSt0aGlzLnk7aWYoIShmPj1jJiZmPGMrdS5sZW5ndGgpKXt2YXIgXyxkPXVbdS5sZW5ndGgtMV0uZ2V0VHJpbW1lZExlbmd0aCgpLHA9KDAsbC5yZWZsb3dTbWFsbGVyR2V0TmV3TGluZUxlbmd0aHMpKHUsdGhpcy5fY29scyxlKSx2PXAubGVuZ3RoLXUubGVuZ3RoO189MD09PXRoaXMueWJhc2UmJnRoaXMueSE9PXRoaXMubGluZXMubGVuZ3RoLTE/TWF0aC5tYXgoMCx0aGlzLnktdGhpcy5saW5lcy5tYXhMZW5ndGgrdik6TWF0aC5tYXgoMCx0aGlzLmxpbmVzLmxlbmd0aC10aGlzLmxpbmVzLm1heExlbmd0aCt2KTtmb3IodmFyIHk9W10sZz0wO2c8djtnKyspe3ZhciBtPXRoaXMuZ2V0QmxhbmtMaW5lKHMuREVGQVVMVF9BVFRSX0RBVEEsITApO3kucHVzaChtKX15Lmxlbmd0aD4wJiYoby5wdXNoKHtzdGFydDpjK3UubGVuZ3RoK2EsbmV3TGluZXM6eX0pLGErPXkubGVuZ3RoKSx1LnB1c2guYXBwbHkodSxuKFtdLGkoeSksITEpKTt2YXIgYj1wLmxlbmd0aC0xLFM9cFtiXTswPT09UyYmKFM9cFstLWJdKTtmb3IodmFyIEM9dS5sZW5ndGgtdi0xLHc9ZDtDPj0wOyl7dmFyIEw9TWF0aC5taW4odyxTKTtpZih2b2lkIDA9PT11W2JdKWJyZWFrO2lmKHVbYl0uY29weUNlbGxzRnJvbSh1W0NdLHctTCxTLUwsTCwhMCksMD09KFMtPUwpJiYoUz1wWy0tYl0pLDA9PSh3LT1MKSl7Qy0tO3ZhciBFPU1hdGgubWF4KEMsMCk7dz0oMCxsLmdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aCkodSxFLHRoaXMuX2NvbHMpfX1mb3IoZz0wO2c8dS5sZW5ndGg7ZysrKXBbZ108ZSYmdVtnXS5zZXRDZWxsKHBbZ10scik7Zm9yKHZhciB4PXYtXzt4LS0gPjA7KTA9PT10aGlzLnliYXNlP3RoaXMueTx0LTE/KHRoaXMueSsrLHRoaXMubGluZXMucG9wKCkpOih0aGlzLnliYXNlKyssdGhpcy55ZGlzcCsrKTp0aGlzLnliYXNlPE1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLHRoaXMubGluZXMubGVuZ3RoK2EpLXQmJih0aGlzLnliYXNlPT09dGhpcy55ZGlzcCYmdGhpcy55ZGlzcCsrLHRoaXMueWJhc2UrKyk7dGhpcy5zYXZlZFk9TWF0aC5taW4odGhpcy5zYXZlZFkrdix0aGlzLnliYXNlK3QtMSl9fX1pZihvLmxlbmd0aD4wKXt2YXIgUj1bXSxrPVtdO2ZvcihnPTA7Zzx0aGlzLmxpbmVzLmxlbmd0aDtnKyspay5wdXNoKHRoaXMubGluZXMuZ2V0KGcpKTt2YXIgTT10aGlzLmxpbmVzLmxlbmd0aCxBPU0tMSxPPTAsRD1vW09dO3RoaXMubGluZXMubGVuZ3RoPU1hdGgubWluKHRoaXMubGluZXMubWF4TGVuZ3RoLHRoaXMubGluZXMubGVuZ3RoK2EpO3ZhciBUPTA7Zm9yKGc9TWF0aC5taW4odGhpcy5saW5lcy5tYXhMZW5ndGgtMSxNK2EtMSk7Zz49MDtnLS0paWYoRCYmRC5zdGFydD5BK1Qpe2Zvcih2YXIgQj1ELm5ld0xpbmVzLmxlbmd0aC0xO0I+PTA7Qi0tKXRoaXMubGluZXMuc2V0KGctLSxELm5ld0xpbmVzW0JdKTtnKyssUi5wdXNoKHtpbmRleDpBKzEsYW1vdW50OkQubmV3TGluZXMubGVuZ3RofSksVCs9RC5uZXdMaW5lcy5sZW5ndGgsRD1vWysrT119ZWxzZSB0aGlzLmxpbmVzLnNldChnLGtbQS0tXSk7dmFyIFA9MDtmb3IoZz1SLmxlbmd0aC0xO2c+PTA7Zy0tKVJbZ10uaW5kZXgrPVAsdGhpcy5saW5lcy5vbkluc2VydEVtaXR0ZXIuZmlyZShSW2ddKSxQKz1SW2ddLmFtb3VudDt2YXIgST1NYXRoLm1heCgwLE0rYS10aGlzLmxpbmVzLm1heExlbmd0aCk7ST4wJiZ0aGlzLmxpbmVzLm9uVHJpbUVtaXR0ZXIuZmlyZShJKX19LGUucHJvdG90eXBlLnN0cmluZ0luZGV4VG9CdWZmZXJJbmRleD1mdW5jdGlvbihlLHQscil7Zm9yKHZvaWQgMD09PXImJihyPSExKTt0Oyl7dmFyIGk9dGhpcy5saW5lcy5nZXQoZSk7aWYoIWkpcmV0dXJuWy0xLC0xXTtmb3IodmFyIG49cj9pLmdldFRyaW1tZWRMZW5ndGgoKTppLmxlbmd0aCxvPTA7bzxuOysrbylpZihpLmdldChvKVtjLkNIQVJfREFUQV9XSURUSF9JTkRFWF0mJih0LT1pLmdldChvKVtjLkNIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGh8fDEpLHQ8MClyZXR1cm5bZSxvXTtlKyt9cmV0dXJuW2UsMF19LGUucHJvdG90eXBlLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZz1mdW5jdGlvbihlLHQscixpKXt2b2lkIDA9PT1yJiYocj0wKTt2YXIgbj10aGlzLmxpbmVzLmdldChlKTtyZXR1cm4gbj9uLnRyYW5zbGF0ZVRvU3RyaW5nKHQscixpKToiIn0sZS5wcm90b3R5cGUuZ2V0V3JhcHBlZFJhbmdlRm9yTGluZT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZSxyPWU7dD4wJiZ0aGlzLmxpbmVzLmdldCh0KS5pc1dyYXBwZWQ7KXQtLTtmb3IoO3IrMTx0aGlzLmxpbmVzLmxlbmd0aCYmdGhpcy5saW5lcy5nZXQocisxKS5pc1dyYXBwZWQ7KXIrKztyZXR1cm57Zmlyc3Q6dCxsYXN0OnJ9fSxlLnByb3RvdHlwZS5zZXR1cFRhYlN0b3BzPWZ1bmN0aW9uKGUpe2ZvcihudWxsIT1lP3RoaXMudGFic1tlXXx8KGU9dGhpcy5wcmV2U3RvcChlKSk6KHRoaXMudGFicz17fSxlPTApO2U8dGhpcy5fY29scztlKz10aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLnRhYlN0b3BXaWR0aCl0aGlzLnRhYnNbZV09ITB9LGUucHJvdG90eXBlLnByZXZTdG9wPWZ1bmN0aW9uKGUpe2ZvcihudWxsPT1lJiYoZT10aGlzLngpOyF0aGlzLnRhYnNbLS1lXSYmZT4wOyk7cmV0dXJuIGU+PXRoaXMuX2NvbHM/dGhpcy5fY29scy0xOmU8MD8wOmV9LGUucHJvdG90eXBlLm5leHRTdG9wPWZ1bmN0aW9uKGUpe2ZvcihudWxsPT1lJiYoZT10aGlzLngpOyF0aGlzLnRhYnNbKytlXSYmZTx0aGlzLl9jb2xzOyk7cmV0dXJuIGU+PXRoaXMuX2NvbHM/dGhpcy5fY29scy0xOmU8MD8wOmV9LGUucHJvdG90eXBlLmNsZWFyTWFya2Vycz1mdW5jdGlvbihlKXt0aGlzLl9pc0NsZWFyaW5nPSEwO2Zvcih2YXIgdD0wO3Q8dGhpcy5tYXJrZXJzLmxlbmd0aDt0KyspdGhpcy5tYXJrZXJzW3RdLmxpbmU9PT1lJiYodGhpcy5tYXJrZXJzW3RdLmRpc3Bvc2UoKSx0aGlzLm1hcmtlcnMuc3BsaWNlKHQtLSwxKSk7dGhpcy5faXNDbGVhcmluZz0hMX0sZS5wcm90b3R5cGUuY2xlYXJBbGxNYXJrZXJzPWZ1bmN0aW9uKCl7dGhpcy5faXNDbGVhcmluZz0hMDtmb3IodmFyIGU9MDtlPHRoaXMubWFya2Vycy5sZW5ndGg7ZSsrKXRoaXMubWFya2Vyc1tlXS5kaXNwb3NlKCksdGhpcy5tYXJrZXJzLnNwbGljZShlLS0sMSk7dGhpcy5faXNDbGVhcmluZz0hMX0sZS5wcm90b3R5cGUuYWRkTWFya2VyPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj1uZXcgaC5NYXJrZXIoZSk7cmV0dXJuIHRoaXMubWFya2Vycy5wdXNoKHIpLHIucmVnaXN0ZXIodGhpcy5saW5lcy5vblRyaW0oKGZ1bmN0aW9uKGUpe3IubGluZS09ZSxyLmxpbmU8MCYmci5kaXNwb3NlKCl9KSkpLHIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkluc2VydCgoZnVuY3Rpb24oZSl7ci5saW5lPj1lLmluZGV4JiYoci5saW5lKz1lLmFtb3VudCl9KSkpLHIucmVnaXN0ZXIodGhpcy5saW5lcy5vbkRlbGV0ZSgoZnVuY3Rpb24oZSl7ci5saW5lPj1lLmluZGV4JiZyLmxpbmU8ZS5pbmRleCtlLmFtb3VudCYmci5kaXNwb3NlKCksci5saW5lPmUuaW5kZXgmJihyLmxpbmUtPWUuYW1vdW50KX0pKSksci5yZWdpc3RlcihyLm9uRGlzcG9zZSgoZnVuY3Rpb24oKXtyZXR1cm4gdC5fcmVtb3ZlTWFya2VyKHIpfSkpKSxyfSxlLnByb3RvdHlwZS5fcmVtb3ZlTWFya2VyPWZ1bmN0aW9uKGUpe3RoaXMuX2lzQ2xlYXJpbmd8fHRoaXMubWFya2Vycy5zcGxpY2UodGhpcy5tYXJrZXJzLmluZGV4T2YoZSksMSl9LGUucHJvdG90eXBlLml0ZXJhdG9yPWZ1bmN0aW9uKGUsdCxyLGksbil7cmV0dXJuIG5ldyBkKHRoaXMsZSx0LHIsaSxuKX0sZX0oKTt0LkJ1ZmZlcj1fO3ZhciBkPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlLHQscixpLG4sbyl7dm9pZCAwPT09ciYmKHI9MCksdm9pZCAwPT09aSYmKGk9ZS5saW5lcy5sZW5ndGgpLHZvaWQgMD09PW4mJihuPTApLHZvaWQgMD09PW8mJihvPTApLHRoaXMuX2J1ZmZlcj1lLHRoaXMuX3RyaW1SaWdodD10LHRoaXMuX3N0YXJ0SW5kZXg9cix0aGlzLl9lbmRJbmRleD1pLHRoaXMuX3N0YXJ0T3ZlcnNjYW49bix0aGlzLl9lbmRPdmVyc2Nhbj1vLHRoaXMuX3N0YXJ0SW5kZXg8MCYmKHRoaXMuX3N0YXJ0SW5kZXg9MCksdGhpcy5fZW5kSW5kZXg+dGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aCYmKHRoaXMuX2VuZEluZGV4PXRoaXMuX2J1ZmZlci5saW5lcy5sZW5ndGgpLHRoaXMuX2N1cnJlbnQ9dGhpcy5fc3RhcnRJbmRleH1yZXR1cm4gZS5wcm90b3R5cGUuaGFzTmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9jdXJyZW50PHRoaXMuX2VuZEluZGV4fSxlLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5fYnVmZmVyLmdldFdyYXBwZWRSYW5nZUZvckxpbmUodGhpcy5fY3VycmVudCk7ZS5maXJzdDx0aGlzLl9zdGFydEluZGV4LXRoaXMuX3N0YXJ0T3ZlcnNjYW4mJihlLmZpcnN0PXRoaXMuX3N0YXJ0SW5kZXgtdGhpcy5fc3RhcnRPdmVyc2NhbiksZS5sYXN0PnRoaXMuX2VuZEluZGV4K3RoaXMuX2VuZE92ZXJzY2FuJiYoZS5sYXN0PXRoaXMuX2VuZEluZGV4K3RoaXMuX2VuZE92ZXJzY2FuKSxlLmZpcnN0PU1hdGgubWF4KGUuZmlyc3QsMCksZS5sYXN0PU1hdGgubWluKGUubGFzdCx0aGlzLl9idWZmZXIubGluZXMubGVuZ3RoKTtmb3IodmFyIHQ9IiIscj1lLmZpcnN0O3I8PWUubGFzdDsrK3IpdCs9dGhpcy5fYnVmZmVyLnRyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZyhyLHRoaXMuX3RyaW1SaWdodCk7cmV0dXJuIHRoaXMuX2N1cnJlbnQ9ZS5sYXN0KzEse3JhbmdlOmUsY29udGVudDp0fX0sZX0oKTt0LkJ1ZmZlclN0cmluZ0l0ZXJhdG9yPWR9LDg0Mzc6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlckxpbmU9dC5ERUZBVUxUX0FUVFJfREFUQT12b2lkIDA7dmFyIGk9cig0ODIpLG49cig2NDMpLG89cig1MTEpLHM9cigzNzM0KTt0LkRFRkFVTFRfQVRUUl9EQVRBPU9iamVjdC5mcmVlemUobmV3IHMuQXR0cmlidXRlRGF0YSk7dmFyIGE9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCxyKXt2b2lkIDA9PT1yJiYocj0hMSksdGhpcy5pc1dyYXBwZWQ9cix0aGlzLl9jb21iaW5lZD17fSx0aGlzLl9leHRlbmRlZEF0dHJzPXt9LHRoaXMuX2RhdGE9bmV3IFVpbnQzMkFycmF5KDMqZSk7Zm9yKHZhciBpPXR8fG8uQ2VsbERhdGEuZnJvbUNoYXJEYXRhKFswLG4uTlVMTF9DRUxMX0NIQVIsbi5OVUxMX0NFTExfV0lEVEgsbi5OVUxMX0NFTExfQ09ERV0pLHM9MDtzPGU7KytzKXRoaXMuc2V0Q2VsbChzLGkpO3RoaXMubGVuZ3RoPWV9cmV0dXJuIGUucHJvdG90eXBlLmdldD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhWzMqZSswXSxyPTIwOTcxNTEmdDtyZXR1cm5bdGhpcy5fZGF0YVszKmUrMV0sMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdOnI/KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KShyKToiIix0Pj4yMiwyMDk3MTUyJnQ/dGhpcy5fY29tYmluZWRbZV0uY2hhckNvZGVBdCh0aGlzLl9jb21iaW5lZFtlXS5sZW5ndGgtMSk6cl19LGUucHJvdG90eXBlLnNldD1mdW5jdGlvbihlLHQpe3RoaXMuX2RhdGFbMyplKzFdPXRbbi5DSEFSX0RBVEFfQVRUUl9JTkRFWF0sdFtuLkNIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGg+MT8odGhpcy5fY29tYmluZWRbZV09dFsxXSx0aGlzLl9kYXRhWzMqZSswXT0yMDk3MTUyfGV8dFtuLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyKTp0aGlzLl9kYXRhWzMqZSswXT10W24uQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmNoYXJDb2RlQXQoMCl8dFtuLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyfSxlLnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fZGF0YVszKmUrMF0+PjIyfSxlLnByb3RvdHlwZS5oYXNXaWR0aD1mdW5jdGlvbihlKXtyZXR1cm4gMTI1ODI5MTImdGhpcy5fZGF0YVszKmUrMF19LGUucHJvdG90eXBlLmdldEZnPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9kYXRhWzMqZSsxXX0sZS5wcm90b3R5cGUuZ2V0Qmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2RhdGFbMyplKzJdfSxlLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKGUpe3JldHVybiA0MTk0MzAzJnRoaXMuX2RhdGFbMyplKzBdfSxlLnByb3RvdHlwZS5nZXRDb2RlUG9pbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fZGF0YVszKmUrMF07cmV0dXJuIDIwOTcxNTImdD90aGlzLl9jb21iaW5lZFtlXS5jaGFyQ29kZUF0KHRoaXMuX2NvbWJpbmVkW2VdLmxlbmd0aC0xKToyMDk3MTUxJnR9LGUucHJvdG90eXBlLmlzQ29tYmluZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuIDIwOTcxNTImdGhpcy5fZGF0YVszKmUrMF19LGUucHJvdG90eXBlLmdldFN0cmluZz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLl9kYXRhWzMqZSswXTtyZXR1cm4gMjA5NzE1MiZ0P3RoaXMuX2NvbWJpbmVkW2VdOjIwOTcxNTEmdD8oMCxpLnN0cmluZ0Zyb21Db2RlUG9pbnQpKDIwOTcxNTEmdCk6IiJ9LGUucHJvdG90eXBlLmxvYWRDZWxsPWZ1bmN0aW9uKGUsdCl7dmFyIHI9MyplO3JldHVybiB0LmNvbnRlbnQ9dGhpcy5fZGF0YVtyKzBdLHQuZmc9dGhpcy5fZGF0YVtyKzFdLHQuYmc9dGhpcy5fZGF0YVtyKzJdLDIwOTcxNTImdC5jb250ZW50JiYodC5jb21iaW5lZERhdGE9dGhpcy5fY29tYmluZWRbZV0pLDI2ODQzNTQ1NiZ0LmJnJiYodC5leHRlbmRlZD10aGlzLl9leHRlbmRlZEF0dHJzW2VdKSx0fSxlLnByb3RvdHlwZS5zZXRDZWxsPWZ1bmN0aW9uKGUsdCl7MjA5NzE1MiZ0LmNvbnRlbnQmJih0aGlzLl9jb21iaW5lZFtlXT10LmNvbWJpbmVkRGF0YSksMjY4NDM1NDU2JnQuYmcmJih0aGlzLl9leHRlbmRlZEF0dHJzW2VdPXQuZXh0ZW5kZWQpLHRoaXMuX2RhdGFbMyplKzBdPXQuY29udGVudCx0aGlzLl9kYXRhWzMqZSsxXT10LmZnLHRoaXMuX2RhdGFbMyplKzJdPXQuYmd9LGUucHJvdG90eXBlLnNldENlbGxGcm9tQ29kZVBvaW50PWZ1bmN0aW9uKGUsdCxyLGksbixvKXsyNjg0MzU0NTYmbiYmKHRoaXMuX2V4dGVuZGVkQXR0cnNbZV09byksdGhpcy5fZGF0YVszKmUrMF09dHxyPDwyMix0aGlzLl9kYXRhWzMqZSsxXT1pLHRoaXMuX2RhdGFbMyplKzJdPW59LGUucHJvdG90eXBlLmFkZENvZGVwb2ludFRvQ2VsbD1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2RhdGFbMyplKzBdOzIwOTcxNTImcj90aGlzLl9jb21iaW5lZFtlXSs9KDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KSh0KTooMjA5NzE1MSZyPyh0aGlzLl9jb21iaW5lZFtlXT0oMCxpLnN0cmluZ0Zyb21Db2RlUG9pbnQpKDIwOTcxNTEmcikrKDAsaS5zdHJpbmdGcm9tQ29kZVBvaW50KSh0KSxyJj0tMjA5NzE1MixyfD0yMDk3MTUyKTpyPXR8MTw8MjIsdGhpcy5fZGF0YVszKmUrMF09cil9LGUucHJvdG90eXBlLmluc2VydENlbGxzPWZ1bmN0aW9uKGUsdCxyLGkpe2lmKChlJT10aGlzLmxlbmd0aCkmJjI9PT10aGlzLmdldFdpZHRoKGUtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQoZS0xLDAsMSwobnVsbD09aT92b2lkIDA6aS5mZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuYmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmV4dGVuZGVkKXx8bmV3IHMuRXh0ZW5kZWRBdHRycyksdDx0aGlzLmxlbmd0aC1lKXtmb3IodmFyIG49bmV3IG8uQ2VsbERhdGEsYT10aGlzLmxlbmd0aC1lLXQtMTthPj0wOy0tYSl0aGlzLnNldENlbGwoZSt0K2EsdGhpcy5sb2FkQ2VsbChlK2EsbikpO2ZvcihhPTA7YTx0OysrYSl0aGlzLnNldENlbGwoZSthLHIpfWVsc2UgZm9yKGE9ZTthPHRoaXMubGVuZ3RoOysrYSl0aGlzLnNldENlbGwoYSxyKTsyPT09dGhpcy5nZXRXaWR0aCh0aGlzLmxlbmd0aC0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludCh0aGlzLmxlbmd0aC0xLDAsMSwobnVsbD09aT92b2lkIDA6aS5mZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuYmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmV4dGVuZGVkKXx8bmV3IHMuRXh0ZW5kZWRBdHRycyl9LGUucHJvdG90eXBlLmRlbGV0ZUNlbGxzPWZ1bmN0aW9uKGUsdCxyLGkpe2lmKGUlPXRoaXMubGVuZ3RoLHQ8dGhpcy5sZW5ndGgtZSl7Zm9yKHZhciBuPW5ldyBvLkNlbGxEYXRhLGE9MDthPHRoaXMubGVuZ3RoLWUtdDsrK2EpdGhpcy5zZXRDZWxsKGUrYSx0aGlzLmxvYWRDZWxsKGUrdCthLG4pKTtmb3IoYT10aGlzLmxlbmd0aC10O2E8dGhpcy5sZW5ndGg7KythKXRoaXMuc2V0Q2VsbChhLHIpfWVsc2UgZm9yKGE9ZTthPHRoaXMubGVuZ3RoOysrYSl0aGlzLnNldENlbGwoYSxyKTtlJiYyPT09dGhpcy5nZXRXaWR0aChlLTEpJiZ0aGlzLnNldENlbGxGcm9tQ29kZVBvaW50KGUtMSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpLDAhPT10aGlzLmdldFdpZHRoKGUpfHx0aGlzLmhhc0NvbnRlbnQoZSl8fHRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQoZSwwLDEsKG51bGw9PWk/dm9pZCAwOmkuZmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmJnKXx8MCwobnVsbD09aT92b2lkIDA6aS5leHRlbmRlZCl8fG5ldyBzLkV4dGVuZGVkQXR0cnMpfSxlLnByb3RvdHlwZS5yZXBsYWNlQ2VsbHM9ZnVuY3Rpb24oZSx0LHIsaSl7Zm9yKGUmJjI9PT10aGlzLmdldFdpZHRoKGUtMSkmJnRoaXMuc2V0Q2VsbEZyb21Db2RlUG9pbnQoZS0xLDAsMSwobnVsbD09aT92b2lkIDA6aS5mZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuYmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmV4dGVuZGVkKXx8bmV3IHMuRXh0ZW5kZWRBdHRycyksdDx0aGlzLmxlbmd0aCYmMj09PXRoaXMuZ2V0V2lkdGgodC0xKSYmdGhpcy5zZXRDZWxsRnJvbUNvZGVQb2ludCh0LDAsMSwobnVsbD09aT92b2lkIDA6aS5mZyl8fDAsKG51bGw9PWk/dm9pZCAwOmkuYmcpfHwwLChudWxsPT1pP3ZvaWQgMDppLmV4dGVuZGVkKXx8bmV3IHMuRXh0ZW5kZWRBdHRycyk7ZTx0JiZlPHRoaXMubGVuZ3RoOyl0aGlzLnNldENlbGwoZSsrLHIpfSxlLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXtpZihlIT09dGhpcy5sZW5ndGgpe2lmKGU+dGhpcy5sZW5ndGgpe3ZhciByPW5ldyBVaW50MzJBcnJheSgzKmUpO3RoaXMubGVuZ3RoJiYoMyplPHRoaXMuX2RhdGEubGVuZ3RoP3Iuc2V0KHRoaXMuX2RhdGEuc3ViYXJyYXkoMCwzKmUpKTpyLnNldCh0aGlzLl9kYXRhKSksdGhpcy5fZGF0YT1yO2Zvcih2YXIgaT10aGlzLmxlbmd0aDtpPGU7KytpKXRoaXMuc2V0Q2VsbChpLHQpfWVsc2UgaWYoZSl7KHI9bmV3IFVpbnQzMkFycmF5KDMqZSkpLnNldCh0aGlzLl9kYXRhLnN1YmFycmF5KDAsMyplKSksdGhpcy5fZGF0YT1yO3ZhciBuPU9iamVjdC5rZXlzKHRoaXMuX2NvbWJpbmVkKTtmb3IoaT0wO2k8bi5sZW5ndGg7aSsrKXt2YXIgbz1wYXJzZUludChuW2ldLDEwKTtvPj1lJiZkZWxldGUgdGhpcy5fY29tYmluZWRbb119fWVsc2UgdGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoMCksdGhpcy5fY29tYmluZWQ9e307dGhpcy5sZW5ndGg9ZX19LGUucHJvdG90eXBlLmZpbGw9ZnVuY3Rpb24oZSl7dGhpcy5fY29tYmluZWQ9e30sdGhpcy5fZXh0ZW5kZWRBdHRycz17fTtmb3IodmFyIHQ9MDt0PHRoaXMubGVuZ3RoOysrdCl0aGlzLnNldENlbGwodCxlKX0sZS5wcm90b3R5cGUuY29weUZyb209ZnVuY3Rpb24oZSl7Zm9yKHZhciB0IGluIHRoaXMubGVuZ3RoIT09ZS5sZW5ndGg/dGhpcy5fZGF0YT1uZXcgVWludDMyQXJyYXkoZS5fZGF0YSk6dGhpcy5fZGF0YS5zZXQoZS5fZGF0YSksdGhpcy5sZW5ndGg9ZS5sZW5ndGgsdGhpcy5fY29tYmluZWQ9e30sZS5fY29tYmluZWQpdGhpcy5fY29tYmluZWRbdF09ZS5fY29tYmluZWRbdF07Zm9yKHZhciB0IGluIHRoaXMuX2V4dGVuZGVkQXR0cnM9e30sZS5fZXh0ZW5kZWRBdHRycyl0aGlzLl9leHRlbmRlZEF0dHJzW3RdPWUuX2V4dGVuZGVkQXR0cnNbdF07dGhpcy5pc1dyYXBwZWQ9ZS5pc1dyYXBwZWR9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGUoMCk7Zm9yKHZhciByIGluIHQuX2RhdGE9bmV3IFVpbnQzMkFycmF5KHRoaXMuX2RhdGEpLHQubGVuZ3RoPXRoaXMubGVuZ3RoLHRoaXMuX2NvbWJpbmVkKXQuX2NvbWJpbmVkW3JdPXRoaXMuX2NvbWJpbmVkW3JdO2Zvcih2YXIgciBpbiB0aGlzLl9leHRlbmRlZEF0dHJzKXQuX2V4dGVuZGVkQXR0cnNbcl09dGhpcy5fZXh0ZW5kZWRBdHRyc1tyXTtyZXR1cm4gdC5pc1dyYXBwZWQ9dGhpcy5pc1dyYXBwZWQsdH0sZS5wcm90b3R5cGUuZ2V0VHJpbW1lZExlbmd0aD1mdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmxlbmd0aC0xO2U+PTA7LS1lKWlmKDQxOTQzMDMmdGhpcy5fZGF0YVszKmUrMF0pcmV0dXJuIGUrKHRoaXMuX2RhdGFbMyplKzBdPj4yMik7cmV0dXJuIDB9LGUucHJvdG90eXBlLmNvcHlDZWxsc0Zyb209ZnVuY3Rpb24oZSx0LHIsaSxuKXt2YXIgbz1lLl9kYXRhO2lmKG4pZm9yKHZhciBzPWktMTtzPj0wO3MtLSlmb3IodmFyIGE9MDthPDM7YSsrKXRoaXMuX2RhdGFbMyoocitzKSthXT1vWzMqKHQrcykrYV07ZWxzZSBmb3Iocz0wO3M8aTtzKyspZm9yKGE9MDthPDM7YSsrKXRoaXMuX2RhdGFbMyoocitzKSthXT1vWzMqKHQrcykrYV07dmFyIGM9T2JqZWN0LmtleXMoZS5fY29tYmluZWQpO2ZvcihhPTA7YTxjLmxlbmd0aDthKyspe3ZhciBsPXBhcnNlSW50KGNbYV0sMTApO2w+PXQmJih0aGlzLl9jb21iaW5lZFtsLXQrcl09ZS5fY29tYmluZWRbbF0pfX0sZS5wcm90b3R5cGUudHJhbnNsYXRlVG9TdHJpbmc9ZnVuY3Rpb24oZSx0LHIpe3ZvaWQgMD09PWUmJihlPSExKSx2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1yJiYocj10aGlzLmxlbmd0aCksZSYmKHI9TWF0aC5taW4ocix0aGlzLmdldFRyaW1tZWRMZW5ndGgoKSkpO2Zvcih2YXIgbz0iIjt0PHI7KXt2YXIgcz10aGlzLl9kYXRhWzMqdCswXSxhPTIwOTcxNTEmcztvKz0yMDk3MTUyJnM/dGhpcy5fY29tYmluZWRbdF06YT8oMCxpLnN0cmluZ0Zyb21Db2RlUG9pbnQpKGEpOm4uV0hJVEVTUEFDRV9DRUxMX0NIQVIsdCs9cz4+MjJ8fDF9cmV0dXJuIG99LGV9KCk7dC5CdWZmZXJMaW5lPWF9LDQ4NDE6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5nZXRSYW5nZUxlbmd0aD12b2lkIDAsdC5nZXRSYW5nZUxlbmd0aD1mdW5jdGlvbihlLHQpe2lmKGUuc3RhcnQueT5lLmVuZC55KXRocm93IG5ldyBFcnJvcigiQnVmZmVyIHJhbmdlIGVuZCAoIitlLmVuZC54KyIsICIrZS5lbmQueSsiKSBjYW5ub3QgYmUgYmVmb3JlIHN0YXJ0ICgiK2Uuc3RhcnQueCsiLCAiK2Uuc3RhcnQueSsiKSIpO3JldHVybiB0KihlLmVuZC55LWUuc3RhcnQueSkrKGUuZW5kLngtZS5zdGFydC54KzEpfX0sNDYzNDooZSx0KT0+e2Z1bmN0aW9uIHIoZSx0LHIpe2lmKHQ9PT1lLmxlbmd0aC0xKXJldHVybiBlW3RdLmdldFRyaW1tZWRMZW5ndGgoKTt2YXIgaT0hZVt0XS5oYXNDb250ZW50KHItMSkmJjE9PT1lW3RdLmdldFdpZHRoKHItMSksbj0yPT09ZVt0KzFdLmdldFdpZHRoKDApO3JldHVybiBpJiZuP3ItMTpyfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aD10LnJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3Rocz10LnJlZmxvd0xhcmdlckFwcGx5TmV3TGF5b3V0PXQucmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0PXQucmVmbG93TGFyZ2VyR2V0TGluZXNUb1JlbW92ZT12b2lkIDAsdC5yZWZsb3dMYXJnZXJHZXRMaW5lc1RvUmVtb3ZlPWZ1bmN0aW9uKGUsdCxpLG4sbyl7Zm9yKHZhciBzPVtdLGE9MDthPGUubGVuZ3RoLTE7YSsrKXt2YXIgYz1hLGw9ZS5nZXQoKytjKTtpZihsLmlzV3JhcHBlZCl7Zm9yKHZhciBoPVtlLmdldChhKV07YzxlLmxlbmd0aCYmbC5pc1dyYXBwZWQ7KWgucHVzaChsKSxsPWUuZ2V0KCsrYyk7aWYobj49YSYmbjxjKWErPWgubGVuZ3RoLTE7ZWxzZXtmb3IodmFyIHU9MCxmPXIoaCx1LHQpLF89MSxkPTA7XzxoLmxlbmd0aDspe3ZhciBwPXIoaCxfLHQpLHY9cC1kLHk9aS1mLGc9TWF0aC5taW4odix5KTtoW3VdLmNvcHlDZWxsc0Zyb20oaFtfXSxkLGYsZywhMSksKGYrPWcpPT09aSYmKHUrKyxmPTApLChkKz1nKT09PXAmJihfKyssZD0wKSwwPT09ZiYmMCE9PXUmJjI9PT1oW3UtMV0uZ2V0V2lkdGgoaS0xKSYmKGhbdV0uY29weUNlbGxzRnJvbShoW3UtMV0saS0xLGYrKywxLCExKSxoW3UtMV0uc2V0Q2VsbChpLTEsbykpfWhbdV0ucmVwbGFjZUNlbGxzKGYsaSxvKTtmb3IodmFyIG09MCxiPWgubGVuZ3RoLTE7Yj4wJiYoYj51fHwwPT09aFtiXS5nZXRUcmltbWVkTGVuZ3RoKCkpO2ItLSltKys7bT4wJiYocy5wdXNoKGEraC5sZW5ndGgtbSkscy5wdXNoKG0pKSxhKz1oLmxlbmd0aC0xfX19cmV0dXJuIHN9LHQucmVmbG93TGFyZ2VyQ3JlYXRlTmV3TGF5b3V0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVtdLGk9MCxuPXRbaV0sbz0wLHM9MDtzPGUubGVuZ3RoO3MrKylpZihuPT09cyl7dmFyIGE9dFsrK2ldO2Uub25EZWxldGVFbWl0dGVyLmZpcmUoe2luZGV4OnMtbyxhbW91bnQ6YX0pLHMrPWEtMSxvKz1hLG49dFsrK2ldfWVsc2Ugci5wdXNoKHMpO3JldHVybntsYXlvdXQ6cixjb3VudFJlbW92ZWQ6b319LHQucmVmbG93TGFyZ2VyQXBwbHlOZXdMYXlvdXQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10saT0wO2k8dC5sZW5ndGg7aSsrKXIucHVzaChlLmdldCh0W2ldKSk7Zm9yKGk9MDtpPHIubGVuZ3RoO2krKyllLnNldChpLHJbaV0pO2UubGVuZ3RoPXQubGVuZ3RofSx0LnJlZmxvd1NtYWxsZXJHZXROZXdMaW5lTGVuZ3Rocz1mdW5jdGlvbihlLHQsaSl7Zm9yKHZhciBuPVtdLG89ZS5tYXAoKGZ1bmN0aW9uKGksbil7cmV0dXJuIHIoZSxuLHQpfSkpLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSt0fSkpLHM9MCxhPTAsYz0wO2M8bzspe2lmKG8tYzxpKXtuLnB1c2goby1jKTticmVha31zKz1pO3ZhciBsPXIoZSxhLHQpO3M+bCYmKHMtPWwsYSsrKTt2YXIgaD0yPT09ZVthXS5nZXRXaWR0aChzLTEpO2gmJnMtLTt2YXIgdT1oP2ktMTppO24ucHVzaCh1KSxjKz11fXJldHVybiBufSx0LmdldFdyYXBwZWRMaW5lVHJpbW1lZExlbmd0aD1yfSw1Mjk1OmZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybiBpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgciBpbiB0KU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKX0saShlLHQpfSxmdW5jdGlvbihlLHQpe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKCJDbGFzcyBleHRlbmRzIHZhbHVlICIrU3RyaW5nKHQpKyIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbCIpO2Z1bmN0aW9uIHIoKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KHIucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyByKX0pO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlclNldD12b2lkIDA7dmFyIG89cig5MDkyKSxzPXIoODQ2MCksYT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl9vcHRpb25zU2VydmljZT10LGkuX2J1ZmZlclNlcnZpY2U9cixpLl9vbkJ1ZmZlckFjdGl2YXRlPWkucmVnaXN0ZXIobmV3IHMuRXZlbnRFbWl0dGVyKSxpLnJlc2V0KCksaX1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25CdWZmZXJBY3RpdmF0ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fbm9ybWFsPW5ldyBvLkJ1ZmZlcighMCx0aGlzLl9vcHRpb25zU2VydmljZSx0aGlzLl9idWZmZXJTZXJ2aWNlKSx0aGlzLl9ub3JtYWwuZmlsbFZpZXdwb3J0Um93cygpLHRoaXMuX2FsdD1uZXcgby5CdWZmZXIoITEsdGhpcy5fb3B0aW9uc1NlcnZpY2UsdGhpcy5fYnVmZmVyU2VydmljZSksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX25vcm1hbCx0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe2FjdGl2ZUJ1ZmZlcjp0aGlzLl9ub3JtYWwsaW5hY3RpdmVCdWZmZXI6dGhpcy5fYWx0fSksdGhpcy5zZXR1cFRhYlN0b3BzKCl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiYWx0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FsdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImFjdGl2ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVCdWZmZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJub3JtYWwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbm9ybWFsfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmFjdGl2YXRlTm9ybWFsQnVmZmVyPWZ1bmN0aW9uKCl7dGhpcy5fYWN0aXZlQnVmZmVyIT09dGhpcy5fbm9ybWFsJiYodGhpcy5fbm9ybWFsLng9dGhpcy5fYWx0LngsdGhpcy5fbm9ybWFsLnk9dGhpcy5fYWx0LnksdGhpcy5fYWx0LmNsZWFyKCksdGhpcy5fYWN0aXZlQnVmZmVyPXRoaXMuX25vcm1hbCx0aGlzLl9vbkJ1ZmZlckFjdGl2YXRlLmZpcmUoe2FjdGl2ZUJ1ZmZlcjp0aGlzLl9ub3JtYWwsaW5hY3RpdmVCdWZmZXI6dGhpcy5fYWx0fSkpfSx0LnByb3RvdHlwZS5hY3RpdmF0ZUFsdEJ1ZmZlcj1mdW5jdGlvbihlKXt0aGlzLl9hY3RpdmVCdWZmZXIhPT10aGlzLl9hbHQmJih0aGlzLl9hbHQuZmlsbFZpZXdwb3J0Um93cyhlKSx0aGlzLl9hbHQueD10aGlzLl9ub3JtYWwueCx0aGlzLl9hbHQueT10aGlzLl9ub3JtYWwueSx0aGlzLl9hY3RpdmVCdWZmZXI9dGhpcy5fYWx0LHRoaXMuX29uQnVmZmVyQWN0aXZhdGUuZmlyZSh7YWN0aXZlQnVmZmVyOnRoaXMuX2FsdCxpbmFjdGl2ZUJ1ZmZlcjp0aGlzLl9ub3JtYWx9KSl9LHQucHJvdG90eXBlLnJlc2l6ZT1mdW5jdGlvbihlLHQpe3RoaXMuX25vcm1hbC5yZXNpemUoZSx0KSx0aGlzLl9hbHQucmVzaXplKGUsdCl9LHQucHJvdG90eXBlLnNldHVwVGFiU3RvcHM9ZnVuY3Rpb24oZSl7dGhpcy5fbm9ybWFsLnNldHVwVGFiU3RvcHMoZSksdGhpcy5fYWx0LnNldHVwVGFiU3RvcHMoZSl9LHR9KHIoODQ0KS5EaXNwb3NhYmxlKTt0LkJ1ZmZlclNldD1hfSw1MTE6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByIGluIHQpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQscikmJihlW3JdPXRbcl0pfSxpKGUsdCl9LGZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIiE9dHlwZW9mIHQmJm51bGwhPT10KXRocm93IG5ldyBUeXBlRXJyb3IoIkNsYXNzIGV4dGVuZHMgdmFsdWUgIitTdHJpbmcodCkrIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsIik7ZnVuY3Rpb24gcigpe3RoaXMuY29uc3RydWN0b3I9ZX1pKGUsdCksZS5wcm90b3R5cGU9bnVsbD09PXQ/T2JqZWN0LmNyZWF0ZSh0KTooci5wcm90b3R5cGU9dC5wcm90b3R5cGUsbmV3IHIpfSk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ2VsbERhdGE9dm9pZCAwO3ZhciBvPXIoNDgyKSxzPXIoNjQzKSxhPXIoMzczNCksYz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LmNvbnRlbnQ9MCx0LmZnPTAsdC5iZz0wLHQuZXh0ZW5kZWQ9bmV3IGEuRXh0ZW5kZWRBdHRycyx0LmNvbWJpbmVkRGF0YT0iIix0fXJldHVybiBuKHQsZSksdC5mcm9tQ2hhckRhdGE9ZnVuY3Rpb24oZSl7dmFyIHI9bmV3IHQ7cmV0dXJuIHIuc2V0RnJvbUNoYXJEYXRhKGUpLHJ9LHQucHJvdG90eXBlLmlzQ29tYmluZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gMjA5NzE1MiZ0aGlzLmNvbnRlbnR9LHQucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudD4+MjJ9LHQucHJvdG90eXBlLmdldENoYXJzPWZ1bmN0aW9uKCl7cmV0dXJuIDIwOTcxNTImdGhpcy5jb250ZW50P3RoaXMuY29tYmluZWREYXRhOjIwOTcxNTEmdGhpcy5jb250ZW50PygwLG8uc3RyaW5nRnJvbUNvZGVQb2ludCkoMjA5NzE1MSZ0aGlzLmNvbnRlbnQpOiIifSx0LnByb3RvdHlwZS5nZXRDb2RlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNDb21iaW5lZCgpP3RoaXMuY29tYmluZWREYXRhLmNoYXJDb2RlQXQodGhpcy5jb21iaW5lZERhdGEubGVuZ3RoLTEpOjIwOTcxNTEmdGhpcy5jb250ZW50fSx0LnByb3RvdHlwZS5zZXRGcm9tQ2hhckRhdGE9ZnVuY3Rpb24oZSl7dGhpcy5mZz1lW3MuQ0hBUl9EQVRBX0FUVFJfSU5ERVhdLHRoaXMuYmc9MDt2YXIgdD0hMTtpZihlW3MuQ0hBUl9EQVRBX0NIQVJfSU5ERVhdLmxlbmd0aD4yKXQ9ITA7ZWxzZSBpZigyPT09ZVtzLkNIQVJfREFUQV9DSEFSX0lOREVYXS5sZW5ndGgpe3ZhciByPWVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKTtpZig1NTI5Njw9ciYmcjw9NTYzMTkpe3ZhciBpPWVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgxKTs1NjMyMDw9aSYmaTw9NTczNDM/dGhpcy5jb250ZW50PTEwMjQqKHItNTUyOTYpK2ktNTYzMjArNjU1MzZ8ZVtzLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyOnQ9ITB9ZWxzZSB0PSEwfWVsc2UgdGhpcy5jb250ZW50PWVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0uY2hhckNvZGVBdCgwKXxlW3MuQ0hBUl9EQVRBX1dJRFRIX0lOREVYXTw8MjI7dCYmKHRoaXMuY29tYmluZWREYXRhPWVbcy5DSEFSX0RBVEFfQ0hBUl9JTkRFWF0sdGhpcy5jb250ZW50PTIwOTcxNTJ8ZVtzLkNIQVJfREFUQV9XSURUSF9JTkRFWF08PDIyKX0sdC5wcm90b3R5cGUuZ2V0QXNDaGFyRGF0YT1mdW5jdGlvbigpe3JldHVyblt0aGlzLmZnLHRoaXMuZ2V0Q2hhcnMoKSx0aGlzLmdldFdpZHRoKCksdGhpcy5nZXRDb2RlKCldfSx0fShhLkF0dHJpYnV0ZURhdGEpO3QuQ2VsbERhdGE9Y30sNjQzOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuV0hJVEVTUEFDRV9DRUxMX0NPREU9dC5XSElURVNQQUNFX0NFTExfV0lEVEg9dC5XSElURVNQQUNFX0NFTExfQ0hBUj10Lk5VTExfQ0VMTF9DT0RFPXQuTlVMTF9DRUxMX1dJRFRIPXQuTlVMTF9DRUxMX0NIQVI9dC5DSEFSX0RBVEFfQ09ERV9JTkRFWD10LkNIQVJfREFUQV9XSURUSF9JTkRFWD10LkNIQVJfREFUQV9DSEFSX0lOREVYPXQuQ0hBUl9EQVRBX0FUVFJfSU5ERVg9dC5ERUZBVUxUX0FUVFI9dC5ERUZBVUxUX0NPTE9SPXZvaWQgMCx0LkRFRkFVTFRfQ09MT1I9MjU2LHQuREVGQVVMVF9BVFRSPTI1Nnx0LkRFRkFVTFRfQ09MT1I8PDksdC5DSEFSX0RBVEFfQVRUUl9JTkRFWD0wLHQuQ0hBUl9EQVRBX0NIQVJfSU5ERVg9MSx0LkNIQVJfREFUQV9XSURUSF9JTkRFWD0yLHQuQ0hBUl9EQVRBX0NPREVfSU5ERVg9Myx0Lk5VTExfQ0VMTF9DSEFSPSIiLHQuTlVMTF9DRUxMX1dJRFRIPTEsdC5OVUxMX0NFTExfQ09ERT0wLHQuV0hJVEVTUEFDRV9DRUxMX0NIQVI9IiAiLHQuV0hJVEVTUEFDRV9DRUxMX1dJRFRIPTEsdC5XSElURVNQQUNFX0NFTExfQ09ERT0zMn0sNDg2MzpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5NYXJrZXI9dm9pZCAwO3ZhciBvPXIoODQ2MCkscz1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHIpe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5saW5lPXIsaS5faWQ9dC5fbmV4dElkKyssaS5pc0Rpc3Bvc2VkPSExLGkuX29uRGlzcG9zZT1uZXcgby5FdmVudEVtaXR0ZXIsaX1yZXR1cm4gbih0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwiaWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRpc3Bvc2UiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EaXNwb3NlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLmlzRGlzcG9zZWR8fCh0aGlzLmlzRGlzcG9zZWQ9ITAsdGhpcy5saW5lPS0xLHRoaXMuX29uRGlzcG9zZS5maXJlKCksZS5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpKX0sdC5fbmV4dElkPTEsdH0ocig4NDQpLkRpc3Bvc2FibGUpO3QuTWFya2VyPXN9LDcxMTY6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5ERUZBVUxUX0NIQVJTRVQ9dC5DSEFSU0VUUz12b2lkIDAsdC5DSEFSU0VUUz17fSx0LkRFRkFVTFRfQ0hBUlNFVD10LkNIQVJTRVRTLkIsdC5DSEFSU0VUU1swXT17ImAiOiLil4YiLGE6IuKWkiIsYjoi4pCJIixjOiLikIwiLGQ6IuKQjSIsZToi4pCKIixmOiLCsCIsZzoiwrEiLGg6IuKQpCIsaToi4pCLIixqOiLilJgiLGs6IuKUkCIsbDoi4pSMIixtOiLilJQiLG46IuKUvCIsbzoi4o66IixwOiLijrsiLHE6IuKUgCIscjoi4o68IixzOiLijr0iLHQ6IuKUnCIsdToi4pSkIix2OiLilLQiLHc6IuKUrCIseDoi4pSCIix5OiLiiaQiLHo6IuKJpSIsInsiOiLPgCIsInwiOiLiiaAiLCJ9IjoiwqMiLCJ+IjoiwrcifSx0LkNIQVJTRVRTLkE9eyIjIjoiwqMifSx0LkNIQVJTRVRTLkI9dm9pZCAwLHQuQ0hBUlNFVFNbNF09eyIjIjoiwqMiLCJAIjoiwr4iLCJbIjoiaWoiLCJcXCI6IsK9IiwiXSI6InwiLCJ7IjoiwqgiLCJ8IjoiZiIsIn0iOiLCvCIsIn4iOiLCtCJ9LHQuQ0hBUlNFVFMuQz10LkNIQVJTRVRTWzVdPXsiWyI6IsOEIiwiXFwiOiLDliIsIl0iOiLDhSIsIl4iOiLDnCIsImAiOiLDqSIsInsiOiLDpCIsInwiOiLDtiIsIn0iOiLDpSIsIn4iOiLDvCJ9LHQuQ0hBUlNFVFMuUj17IiMiOiLCoyIsIkAiOiLDoCIsIlsiOiLCsCIsIlxcIjoiw6ciLCJdIjoiwqciLCJ7Ijoiw6kiLCJ8Ijoiw7kiLCJ9Ijoiw6giLCJ+IjoiwqgifSx0LkNIQVJTRVRTLlE9eyJAIjoiw6AiLCJbIjoiw6IiLCJcXCI6IsOnIiwiXSI6IsOqIiwiXiI6IsOuIiwiYCI6IsO0IiwieyI6IsOpIiwifCI6IsO5IiwifSI6IsOoIiwifiI6IsO7In0sdC5DSEFSU0VUUy5LPXsiQCI6IsKnIiwiWyI6IsOEIiwiXFwiOiLDliIsIl0iOiLDnCIsInsiOiLDpCIsInwiOiLDtiIsIn0iOiLDvCIsIn4iOiLDnyJ9LHQuQ0hBUlNFVFMuWT17IiMiOiLCoyIsIkAiOiLCpyIsIlsiOiLCsCIsIlxcIjoiw6ciLCJdIjoiw6kiLCJgIjoiw7kiLCJ7Ijoiw6AiLCJ8Ijoiw7IiLCJ9Ijoiw6giLCJ+Ijoiw6wifSx0LkNIQVJTRVRTLkU9dC5DSEFSU0VUU1s2XT17IkAiOiLDhCIsIlsiOiLDhiIsIlxcIjoiw5giLCJdIjoiw4UiLCJeIjoiw5wiLCJgIjoiw6QiLCJ7Ijoiw6YiLCJ8Ijoiw7giLCJ9Ijoiw6UiLCJ+Ijoiw7wifSx0LkNIQVJTRVRTLlo9eyIjIjoiwqMiLCJAIjoiwqciLCJbIjoiwqEiLCJcXCI6IsORIiwiXSI6IsK/IiwieyI6IsKwIiwifCI6IsOxIiwifSI6IsOnIn0sdC5DSEFSU0VUUy5IPXQuQ0hBUlNFVFNbN109eyJAIjoiw4kiLCJbIjoiw4QiLCJcXCI6IsOWIiwiXSI6IsOFIiwiXiI6IsOcIiwiYCI6IsOpIiwieyI6IsOkIiwifCI6IsO2IiwifSI6IsOlIiwifiI6IsO8In0sdC5DSEFSU0VUU1siPSJdPXsiIyI6IsO5IiwiQCI6IsOgIiwiWyI6IsOpIiwiXFwiOiLDpyIsIl0iOiLDqiIsIl4iOiLDriIsXzoiw6giLCJgIjoiw7QiLCJ7Ijoiw6QiLCJ8Ijoiw7YiLCJ9Ijoiw7wiLCJ+Ijoiw7sifX0sMjU4NDooZSx0KT0+e3ZhciByLGk7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQzFfRVNDQVBFRD10LkMxPXQuQzA9dm9pZCAwLGZ1bmN0aW9uKGUpe2UuTlVMPSJcMCIsZS5TT0g9IgEiLGUuU1RYPSICIixlLkVUWD0iAyIsZS5FT1Q9IgQiLGUuRU5RPSIFIixlLkFDSz0iBiIsZS5CRUw9IgciLGUuQlM9IlxiIixlLkhUPSJcdCIsZS5MRj0iXG4iLGUuVlQ9Ilx2IixlLkZGPSJcZiIsZS5DUj0iXHIiLGUuU089Ig4iLGUuU0k9Ig8iLGUuRExFPSIQIixlLkRDMT0iESIsZS5EQzI9IhIiLGUuREMzPSITIixlLkRDND0iFCIsZS5OQUs9IhUiLGUuU1lOPSIWIixlLkVUQj0iFyIsZS5DQU49IhgiLGUuRU09IhkiLGUuU1VCPSIaIixlLkVTQz0iGyIsZS5GUz0iHCIsZS5HUz0iHSIsZS5SUz0iHiIsZS5VUz0iHyIsZS5TUD0iICIsZS5ERUw9In8ifShyPXQuQzB8fCh0LkMwPXt9KSksKGk9dC5DMXx8KHQuQzE9e30pKS5QQUQ9IsKAIixpLkhPUD0iwoEiLGkuQlBIPSLCgiIsaS5OQkg9IsKDIixpLklORD0iwoQiLGkuTkVMPSLChSIsaS5TU0E9IsKGIixpLkVTQT0iwociLGkuSFRTPSLCiCIsaS5IVEo9IsKJIixpLlZUUz0iwooiLGkuUExEPSLCiyIsaS5QTFU9IsKMIixpLlJJPSLCjSIsaS5TUzI9IsKOIixpLlNTMz0iwo8iLGkuRENTPSLCkCIsaS5QVTE9IsKRIixpLlBVMj0iwpIiLGkuU1RTPSLCkyIsaS5DQ0g9IsKUIixpLk1XPSLClSIsaS5TUEE9IsKWIixpLkVQQT0iwpciLGkuU09TPSLCmCIsaS5TR0NJPSLCmSIsaS5TQ0k9IsKaIixpLkNTST0iwpsiLGkuU1Q9IsKcIixpLk9TQz0iwp0iLGkuUE09IsKeIixpLkFQQz0iwp8iLCh0LkMxX0VTQ0FQRUR8fCh0LkMxX0VTQ0FQRUQ9e30pKS5TVD1yLkVTQysiXFwifSw3Mzk5OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5ldmFsdWF0ZUtleWJvYXJkRXZlbnQ9dm9pZCAwO3ZhciBpPXIoMjU4NCksbj17NDg6WyIwIiwiKSJdLDQ5OlsiMSIsIiEiXSw1MDpbIjIiLCJAIl0sNTE6WyIzIiwiIyJdLDUyOlsiNCIsIiQiXSw1MzpbIjUiLCIlIl0sNTQ6WyI2IiwiXiJdLDU1OlsiNyIsIiYiXSw1NjpbIjgiLCIqIl0sNTc6WyI5IiwiKCJdLDE4NjpbIjsiLCI6Il0sMTg3OlsiPSIsIisiXSwxODg6WyIsIiwiPCJdLDE4OTpbIi0iLCJfIl0sMTkwOlsiLiIsIj4iXSwxOTE6WyIvIiwiPyJdLDE5MjpbImAiLCJ+Il0sMjE5OlsiWyIsInsiXSwyMjA6WyJcXCIsInwiXSwyMjE6WyJdIiwifSJdLDIyMjpbIiciLCciJ119O3QuZXZhbHVhdGVLZXlib2FyZEV2ZW50PWZ1bmN0aW9uKGUsdCxyLG8pe3ZhciBzPXt0eXBlOjAsY2FuY2VsOiExLGtleTp2b2lkIDB9LGE9KGUuc2hpZnRLZXk/MTowKXwoZS5hbHRLZXk/MjowKXwoZS5jdHJsS2V5PzQ6MCl8KGUubWV0YUtleT84OjApO3N3aXRjaChlLmtleUNvZGUpe2Nhc2UgMDoiVUlLZXlJbnB1dFVwQXJyb3ciPT09ZS5rZXk/cy5rZXk9dD9pLkMwLkVTQysiT0EiOmkuQzAuRVNDKyJbQSI6IlVJS2V5SW5wdXRMZWZ0QXJyb3ciPT09ZS5rZXk/cy5rZXk9dD9pLkMwLkVTQysiT0QiOmkuQzAuRVNDKyJbRCI6IlVJS2V5SW5wdXRSaWdodEFycm93Ij09PWUua2V5P3Mua2V5PXQ/aS5DMC5FU0MrIk9DIjppLkMwLkVTQysiW0MiOiJVSUtleUlucHV0RG93bkFycm93Ij09PWUua2V5JiYocy5rZXk9dD9pLkMwLkVTQysiT0IiOmkuQzAuRVNDKyJbQiIpO2JyZWFrO2Nhc2UgODppZihlLnNoaWZ0S2V5KXtzLmtleT1pLkMwLkJTO2JyZWFrfWlmKGUuYWx0S2V5KXtzLmtleT1pLkMwLkVTQytpLkMwLkRFTDticmVha31zLmtleT1pLkMwLkRFTDticmVhaztjYXNlIDk6aWYoZS5zaGlmdEtleSl7cy5rZXk9aS5DMC5FU0MrIltaIjticmVha31zLmtleT1pLkMwLkhULHMuY2FuY2VsPSEwO2JyZWFrO2Nhc2UgMTM6cy5rZXk9ZS5hbHRLZXk/aS5DMC5FU0MraS5DMC5DUjppLkMwLkNSLHMuY2FuY2VsPSEwO2JyZWFrO2Nhc2UgMjc6cy5rZXk9aS5DMC5FU0MsZS5hbHRLZXkmJihzLmtleT1pLkMwLkVTQytpLkMwLkVTQykscy5jYW5jZWw9ITA7YnJlYWs7Y2FzZSAzNzppZihlLm1ldGFLZXkpYnJlYWs7YT8ocy5rZXk9aS5DMC5FU0MrIlsxOyIrKGErMSkrIkQiLHMua2V5PT09aS5DMC5FU0MrIlsxOzNEIiYmKHMua2V5PWkuQzAuRVNDKyhyPyJiIjoiWzE7NUQiKSkpOnMua2V5PXQ/aS5DMC5FU0MrIk9EIjppLkMwLkVTQysiW0QiO2JyZWFrO2Nhc2UgMzk6aWYoZS5tZXRhS2V5KWJyZWFrO2E/KHMua2V5PWkuQzAuRVNDKyJbMTsiKyhhKzEpKyJDIixzLmtleT09PWkuQzAuRVNDKyJbMTszQyImJihzLmtleT1pLkMwLkVTQysocj8iZiI6IlsxOzVDIikpKTpzLmtleT10P2kuQzAuRVNDKyJPQyI6aS5DMC5FU0MrIltDIjticmVhaztjYXNlIDM4OmlmKGUubWV0YUtleSlicmVhazthPyhzLmtleT1pLkMwLkVTQysiWzE7IisoYSsxKSsiQSIscnx8cy5rZXkhPT1pLkMwLkVTQysiWzE7M0EifHwocy5rZXk9aS5DMC5FU0MrIlsxOzVBIikpOnMua2V5PXQ/aS5DMC5FU0MrIk9BIjppLkMwLkVTQysiW0EiO2JyZWFrO2Nhc2UgNDA6aWYoZS5tZXRhS2V5KWJyZWFrO2E/KHMua2V5PWkuQzAuRVNDKyJbMTsiKyhhKzEpKyJCIixyfHxzLmtleSE9PWkuQzAuRVNDKyJbMTszQiJ8fChzLmtleT1pLkMwLkVTQysiWzE7NUIiKSk6cy5rZXk9dD9pLkMwLkVTQysiT0IiOmkuQzAuRVNDKyJbQiI7YnJlYWs7Y2FzZSA0NTplLnNoaWZ0S2V5fHxlLmN0cmxLZXl8fChzLmtleT1pLkMwLkVTQysiWzJ+Iik7YnJlYWs7Y2FzZSA0NjpzLmtleT1hP2kuQzAuRVNDKyJbMzsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzN+IjticmVhaztjYXNlIDM2OnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIkgiOnQ/aS5DMC5FU0MrIk9IIjppLkMwLkVTQysiW0giO2JyZWFrO2Nhc2UgMzU6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiRiI6dD9pLkMwLkVTQysiT0YiOmkuQzAuRVNDKyJbRiI7YnJlYWs7Y2FzZSAzMzplLnNoaWZ0S2V5P3MudHlwZT0yOmUuY3RybEtleT9zLmtleT1pLkMwLkVTQysiWzU7IisoYSsxKSsifiI6cy5rZXk9aS5DMC5FU0MrIls1fiI7YnJlYWs7Y2FzZSAzNDplLnNoaWZ0S2V5P3MudHlwZT0zOmUuY3RybEtleT9zLmtleT1pLkMwLkVTQysiWzY7IisoYSsxKSsifiI6cy5rZXk9aS5DMC5FU0MrIls2fiI7YnJlYWs7Y2FzZSAxMTI6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiUCI6aS5DMC5FU0MrIk9QIjticmVhaztjYXNlIDExMzpzLmtleT1hP2kuQzAuRVNDKyJbMTsiKyhhKzEpKyJRIjppLkMwLkVTQysiT1EiO2JyZWFrO2Nhc2UgMTE0OnMua2V5PWE/aS5DMC5FU0MrIlsxOyIrKGErMSkrIlIiOmkuQzAuRVNDKyJPUiI7YnJlYWs7Y2FzZSAxMTU6cy5rZXk9YT9pLkMwLkVTQysiWzE7IisoYSsxKSsiUyI6aS5DMC5FU0MrIk9TIjticmVhaztjYXNlIDExNjpzLmtleT1hP2kuQzAuRVNDKyJbMTU7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsxNX4iO2JyZWFrO2Nhc2UgMTE3OnMua2V5PWE/aS5DMC5FU0MrIlsxNzsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzE3fiI7YnJlYWs7Y2FzZSAxMTg6cy5rZXk9YT9pLkMwLkVTQysiWzE4OyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMTh+IjticmVhaztjYXNlIDExOTpzLmtleT1hP2kuQzAuRVNDKyJbMTk7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsxOX4iO2JyZWFrO2Nhc2UgMTIwOnMua2V5PWE/aS5DMC5FU0MrIlsyMDsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzIwfiI7YnJlYWs7Y2FzZSAxMjE6cy5rZXk9YT9pLkMwLkVTQysiWzIxOyIrKGErMSkrIn4iOmkuQzAuRVNDKyJbMjF+IjticmVhaztjYXNlIDEyMjpzLmtleT1hP2kuQzAuRVNDKyJbMjM7IisoYSsxKSsifiI6aS5DMC5FU0MrIlsyM34iO2JyZWFrO2Nhc2UgMTIzOnMua2V5PWE/aS5DMC5FU0MrIlsyNDsiKyhhKzEpKyJ+IjppLkMwLkVTQysiWzI0fiI7YnJlYWs7ZGVmYXVsdDppZighZS5jdHJsS2V5fHxlLnNoaWZ0S2V5fHxlLmFsdEtleXx8ZS5tZXRhS2V5KWlmKHImJiFvfHwhZS5hbHRLZXl8fGUubWV0YUtleSkhcnx8ZS5hbHRLZXl8fGUuY3RybEtleXx8ZS5zaGlmdEtleXx8IWUubWV0YUtleT9lLmtleSYmIWUuY3RybEtleSYmIWUuYWx0S2V5JiYhZS5tZXRhS2V5JiZlLmtleUNvZGU+PTQ4JiYxPT09ZS5rZXkubGVuZ3RoP3Mua2V5PWUua2V5OmUua2V5JiZlLmN0cmxLZXkmJigiXyI9PT1lLmtleSYmKHMua2V5PWkuQzAuVVMpLCJAIj09PWUua2V5JiYocy5rZXk9aS5DMC5OVUwpKTo2NT09PWUua2V5Q29kZSYmKHMudHlwZT0xKTtlbHNle3ZhciBjPW5bZS5rZXlDb2RlXSxsPW51bGw9PWM/dm9pZCAwOmNbZS5zaGlmdEtleT8xOjBdO2lmKGwpcy5rZXk9aS5DMC5FU0MrbDtlbHNlIGlmKGUua2V5Q29kZT49NjUmJmUua2V5Q29kZTw9OTApe3ZhciBoPWUuY3RybEtleT9lLmtleUNvZGUtNjQ6ZS5rZXlDb2RlKzMyLHU9U3RyaW5nLmZyb21DaGFyQ29kZShoKTtlLnNoaWZ0S2V5JiYodT11LnRvVXBwZXJDYXNlKCkpLHMua2V5PWkuQzAuRVNDK3V9ZWxzZSJEZWFkIj09PWUua2V5JiZlLmNvZGUuc3RhcnRzV2l0aCgiS2V5IikmJih1PWUuY29kZS5zbGljZSgzLDQpLGUuc2hpZnRLZXl8fCh1PXUudG9Mb3dlckNhc2UoKSkscy5rZXk9aS5DMC5FU0MrdSxzLmNhbmNlbD0hMCl9ZWxzZSBlLmtleUNvZGU+PTY1JiZlLmtleUNvZGU8PTkwP3Mua2V5PVN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlLTY0KTozMj09PWUua2V5Q29kZT9zLmtleT1pLkMwLk5VTDplLmtleUNvZGU+PTUxJiZlLmtleUNvZGU8PTU1P3Mua2V5PVN0cmluZy5mcm9tQ2hhckNvZGUoZS5rZXlDb2RlLTUxKzI3KTo1Nj09PWUua2V5Q29kZT9zLmtleT1pLkMwLkRFTDoyMTk9PT1lLmtleUNvZGU/cy5rZXk9aS5DMC5FU0M6MjIwPT09ZS5rZXlDb2RlP3Mua2V5PWkuQzAuRlM6MjIxPT09ZS5rZXlDb2RlJiYocy5rZXk9aS5DMC5HUyl9cmV0dXJuIHN9fSw0ODI6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5VdGY4VG9VdGYzMj10LlN0cmluZ1RvVXRmMzI9dC51dGYzMlRvU3RyaW5nPXQuc3RyaW5nRnJvbUNvZGVQb2ludD12b2lkIDAsdC5zdHJpbmdGcm9tQ29kZVBvaW50PWZ1bmN0aW9uKGUpe3JldHVybiBlPjY1NTM1PyhlLT02NTUzNixTdHJpbmcuZnJvbUNoYXJDb2RlKDU1Mjk2KyhlPj4xMCkpK1N0cmluZy5mcm9tQ2hhckNvZGUoZSUxMDI0KzU2MzIwKSk6U3RyaW5nLmZyb21DaGFyQ29kZShlKX0sdC51dGYzMlRvU3RyaW5nPWZ1bmN0aW9uKGUsdCxyKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1yJiYocj1lLmxlbmd0aCk7Zm9yKHZhciBpPSIiLG49dDtuPHI7KytuKXt2YXIgbz1lW25dO28+NjU1MzU/KG8tPTY1NTM2LGkrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTYrKG8+PjEwKSkrU3RyaW5nLmZyb21DaGFyQ29kZShvJTEwMjQrNTYzMjApKTppKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG8pfXJldHVybiBpfTt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9pbnRlcmltPTB9cmV0dXJuIGUucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5faW50ZXJpbT0wfSxlLnByb3RvdHlwZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmxlbmd0aDtpZighcilyZXR1cm4gMDt2YXIgaT0wLG49MDt0aGlzLl9pbnRlcmltJiYoNTYzMjA8PShhPWUuY2hhckNvZGVBdChuKyspKSYmYTw9NTczNDM/dFtpKytdPTEwMjQqKHRoaXMuX2ludGVyaW0tNTUyOTYpK2EtNTYzMjArNjU1MzY6KHRbaSsrXT10aGlzLl9pbnRlcmltLHRbaSsrXT1hKSx0aGlzLl9pbnRlcmltPTApO2Zvcih2YXIgbz1uO288cjsrK28pe3ZhciBzPWUuY2hhckNvZGVBdChvKTtpZig1NTI5Njw9cyYmczw9NTYzMTkpe2lmKCsrbz49cilyZXR1cm4gdGhpcy5faW50ZXJpbT1zLGk7dmFyIGE7NTYzMjA8PShhPWUuY2hhckNvZGVBdChvKSkmJmE8PTU3MzQzP3RbaSsrXT0xMDI0KihzLTU1Mjk2KSthLTU2MzIwKzY1NTM2Oih0W2krK109cyx0W2krK109YSl9ZWxzZSA2NTI3OSE9PXMmJih0W2krK109cyl9cmV0dXJuIGl9LGV9KCk7dC5TdHJpbmdUb1V0ZjMyPXI7dmFyIGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5pbnRlcmltPW5ldyBVaW50OEFycmF5KDMpfXJldHVybiBlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuaW50ZXJpbS5maWxsKDApfSxlLnByb3RvdHlwZS5kZWNvZGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmxlbmd0aDtpZighcilyZXR1cm4gMDt2YXIgaSxuLG8scyxhPTAsYz0wLGw9MDtpZih0aGlzLmludGVyaW1bMF0pe3ZhciBoPSExLHU9dGhpcy5pbnRlcmltWzBdO3UmPTE5Mj09KDIyNCZ1KT8zMToyMjQ9PSgyNDAmdSk/MTU6Nztmb3IodmFyIGY9MCxfPXZvaWQgMDsoXz02MyZ0aGlzLmludGVyaW1bKytmXSkmJmY8NDspdTw8PTYsdXw9Xztmb3IodmFyIGQ9MTkyPT0oMjI0JnRoaXMuaW50ZXJpbVswXSk/MjoyMjQ9PSgyNDAmdGhpcy5pbnRlcmltWzBdKT8zOjQscD1kLWY7bDxwOyl7aWYobD49cilyZXR1cm4gMDtpZigxMjghPSgxOTImKF89ZVtsKytdKSkpe2wtLSxoPSEwO2JyZWFrfXRoaXMuaW50ZXJpbVtmKytdPV8sdTw8PTYsdXw9NjMmX31ofHwoMj09PWQ/dTwxMjg/bC0tOnRbYSsrXT11OjM9PT1kP3U8MjA0OHx8dT49NTUyOTYmJnU8PTU3MzQzfHw2NTI3OT09PXV8fCh0W2ErK109dSk6dTw2NTUzNnx8dT4xMTE0MTExfHwodFthKytdPXUpKSx0aGlzLmludGVyaW0uZmlsbCgwKX1mb3IodmFyIHY9ci00LHk9bDt5PHI7KXtmb3IoOyEoISh5PHYpfHwxMjgmKGk9ZVt5XSl8fDEyOCYobj1lW3krMV0pfHwxMjgmKG89ZVt5KzJdKXx8MTI4JihzPWVbeSszXSkpOyl0W2ErK109aSx0W2ErK109bix0W2ErK109byx0W2ErK109cyx5Kz00O2lmKChpPWVbeSsrXSk8MTI4KXRbYSsrXT1pO2Vsc2UgaWYoMTkyPT0oMjI0JmkpKXtpZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSxhO2lmKDEyOCE9KDE5MiYobj1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKChjPSgzMSZpKTw8Nnw2MyZuKTwxMjgpe3ktLTtjb250aW51ZX10W2ErK109Y31lbHNlIGlmKDIyND09KDI0MCZpKSl7aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksYTtpZigxMjghPSgxOTImKG49ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSx0aGlzLmludGVyaW1bMV09bixhO2lmKDEyOCE9KDE5MiYobz1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKChjPSgxNSZpKTw8MTJ8KDYzJm4pPDw2fDYzJm8pPDIwNDh8fGM+PTU1Mjk2JiZjPD01NzM0M3x8NjUyNzk9PT1jKWNvbnRpbnVlO3RbYSsrXT1jfWVsc2UgaWYoMjQwPT0oMjQ4JmkpKXtpZih5Pj1yKXJldHVybiB0aGlzLmludGVyaW1bMF09aSxhO2lmKDEyOCE9KDE5MiYobj1lW3krK10pKSl7eS0tO2NvbnRpbnVlfWlmKHk+PXIpcmV0dXJuIHRoaXMuaW50ZXJpbVswXT1pLHRoaXMuaW50ZXJpbVsxXT1uLGE7aWYoMTI4IT0oMTkyJihvPWVbeSsrXSkpKXt5LS07Y29udGludWV9aWYoeT49cilyZXR1cm4gdGhpcy5pbnRlcmltWzBdPWksdGhpcy5pbnRlcmltWzFdPW4sdGhpcy5pbnRlcmltWzJdPW8sYTtpZigxMjghPSgxOTImKHM9ZVt5KytdKSkpe3ktLTtjb250aW51ZX1pZigoYz0oNyZpKTw8MTh8KDYzJm4pPDwxMnwoNjMmbyk8PDZ8NjMmcyk8NjU1MzZ8fGM+MTExNDExMSljb250aW51ZTt0W2ErK109Y319cmV0dXJuIGF9LGV9KCk7dC5VdGY4VG9VdGYzMj1pfSwyMjU6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlVuaWNvZGVWNj12b2lkIDA7dmFyIGksbj1yKDgyNzMpLG89W1s3NjgsODc5XSxbMTE1NSwxMTU4XSxbMTE2MCwxMTYxXSxbMTQyNSwxNDY5XSxbMTQ3MSwxNDcxXSxbMTQ3MywxNDc0XSxbMTQ3NiwxNDc3XSxbMTQ3OSwxNDc5XSxbMTUzNiwxNTM5XSxbMTU1MiwxNTU3XSxbMTYxMSwxNjMwXSxbMTY0OCwxNjQ4XSxbMTc1MCwxNzY0XSxbMTc2NywxNzY4XSxbMTc3MCwxNzczXSxbMTgwNywxODA3XSxbMTgwOSwxODA5XSxbMTg0MCwxODY2XSxbMTk1OCwxOTY4XSxbMjAyNywyMDM1XSxbMjMwNSwyMzA2XSxbMjM2NCwyMzY0XSxbMjM2OSwyMzc2XSxbMjM4MSwyMzgxXSxbMjM4NSwyMzg4XSxbMjQwMiwyNDAzXSxbMjQzMywyNDMzXSxbMjQ5MiwyNDkyXSxbMjQ5NywyNTAwXSxbMjUwOSwyNTA5XSxbMjUzMCwyNTMxXSxbMjU2MSwyNTYyXSxbMjYyMCwyNjIwXSxbMjYyNSwyNjI2XSxbMjYzMSwyNjMyXSxbMjYzNSwyNjM3XSxbMjY3MiwyNjczXSxbMjY4OSwyNjkwXSxbMjc0OCwyNzQ4XSxbMjc1MywyNzU3XSxbMjc1OSwyNzYwXSxbMjc2NSwyNzY1XSxbMjc4NiwyNzg3XSxbMjgxNywyODE3XSxbMjg3NiwyODc2XSxbMjg3OSwyODc5XSxbMjg4MSwyODgzXSxbMjg5MywyODkzXSxbMjkwMiwyOTAyXSxbMjk0NiwyOTQ2XSxbMzAwOCwzMDA4XSxbMzAyMSwzMDIxXSxbMzEzNCwzMTM2XSxbMzE0MiwzMTQ0XSxbMzE0NiwzMTQ5XSxbMzE1NywzMTU4XSxbMzI2MCwzMjYwXSxbMzI2MywzMjYzXSxbMzI3MCwzMjcwXSxbMzI3NiwzMjc3XSxbMzI5OCwzMjk5XSxbMzM5MywzMzk1XSxbMzQwNSwzNDA1XSxbMzUzMCwzNTMwXSxbMzUzOCwzNTQwXSxbMzU0MiwzNTQyXSxbMzYzMywzNjMzXSxbMzYzNiwzNjQyXSxbMzY1NSwzNjYyXSxbMzc2MSwzNzYxXSxbMzc2NCwzNzY5XSxbMzc3MSwzNzcyXSxbMzc4NCwzNzg5XSxbMzg2NCwzODY1XSxbMzg5MywzODkzXSxbMzg5NSwzODk1XSxbMzg5NywzODk3XSxbMzk1MywzOTY2XSxbMzk2OCwzOTcyXSxbMzk3NCwzOTc1XSxbMzk4NCwzOTkxXSxbMzk5Myw0MDI4XSxbNDAzOCw0MDM4XSxbNDE0MSw0MTQ0XSxbNDE0Niw0MTQ2XSxbNDE1MCw0MTUxXSxbNDE1Myw0MTUzXSxbNDE4NCw0MTg1XSxbNDQ0OCw0NjA3XSxbNDk1OSw0OTU5XSxbNTkwNiw1OTA4XSxbNTkzOCw1OTQwXSxbNTk3MCw1OTcxXSxbNjAwMiw2MDAzXSxbNjA2OCw2MDY5XSxbNjA3MSw2MDc3XSxbNjA4Niw2MDg2XSxbNjA4OSw2MDk5XSxbNjEwOSw2MTA5XSxbNjE1NSw2MTU3XSxbNjMxMyw2MzEzXSxbNjQzMiw2NDM0XSxbNjQzOSw2NDQwXSxbNjQ1MCw2NDUwXSxbNjQ1Nyw2NDU5XSxbNjY3OSw2NjgwXSxbNjkxMiw2OTE1XSxbNjk2NCw2OTY0XSxbNjk2Niw2OTcwXSxbNjk3Miw2OTcyXSxbNjk3OCw2OTc4XSxbNzAxOSw3MDI3XSxbNzYxNiw3NjI2XSxbNzY3OCw3Njc5XSxbODIwMyw4MjA3XSxbODIzNCw4MjM4XSxbODI4OCw4MjkxXSxbODI5OCw4MzAzXSxbODQwMCw4NDMxXSxbMTIzMzAsMTIzMzVdLFsxMjQ0MSwxMjQ0Ml0sWzQzMDE0LDQzMDE0XSxbNDMwMTksNDMwMTldLFs0MzA0NSw0MzA0Nl0sWzY0Mjg2LDY0Mjg2XSxbNjUwMjQsNjUwMzldLFs2NTA1Niw2NTA1OV0sWzY1Mjc5LDY1Mjc5XSxbNjU1MjksNjU1MzFdXSxzPVtbNjgwOTcsNjgwOTldLFs2ODEwMSw2ODEwMl0sWzY4MTA4LDY4MTExXSxbNjgxNTIsNjgxNTRdLFs2ODE1OSw2ODE1OV0sWzExOTE0MywxMTkxNDVdLFsxMTkxNTUsMTE5MTcwXSxbMTE5MTczLDExOTE3OV0sWzExOTIxMCwxMTkyMTNdLFsxMTkzNjIsMTE5MzY0XSxbOTE3NTA1LDkxNzUwNV0sWzkxNzUzNiw5MTc2MzFdLFs5MTc3NjAsOTE3OTk5XV0sYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXtpZih0aGlzLnZlcnNpb249IjYiLCFpKXtpPW5ldyBVaW50OEFycmF5KDY1NTM2KSwoMCxuLmZpbGwpKGksMSksaVswXT0wLCgwLG4uZmlsbCkoaSwwLDEsMzIpLCgwLG4uZmlsbCkoaSwwLDEyNywxNjApLCgwLG4uZmlsbCkoaSwyLDQzNTIsNDQ0OCksaVs5MDAxXT0yLGlbOTAwMl09MiwoMCxuLmZpbGwpKGksMiwxMTkwNCw0MjE5MiksaVsxMjM1MV09MSwoMCxuLmZpbGwpKGksMiw0NDAzMiw1NTIwNCksKDAsbi5maWxsKShpLDIsNjM3NDQsNjQyNTYpLCgwLG4uZmlsbCkoaSwyLDY1MDQwLDY1MDUwKSwoMCxuLmZpbGwpKGksMiw2NTA3Miw2NTEzNiksKDAsbi5maWxsKShpLDIsNjUyODAsNjUzNzcpLCgwLG4uZmlsbCkoaSwyLDY1NTA0LDY1NTExKTtmb3IodmFyIGU9MDtlPG8ubGVuZ3RoOysrZSkoMCxuLmZpbGwpKGksMCxvW2VdWzBdLG9bZV1bMV0rMSl9fXJldHVybiBlLnByb3RvdHlwZS53Y3dpZHRoPWZ1bmN0aW9uKGUpe3JldHVybiBlPDMyPzA6ZTwxMjc/MTplPDY1NTM2P2lbZV06ZnVuY3Rpb24oZSx0KXt2YXIgcixpPTAsbj10Lmxlbmd0aC0xO2lmKGU8dFswXVswXXx8ZT50W25dWzFdKXJldHVybiExO2Zvcig7bj49aTspaWYoZT50W3I9aStuPj4xXVsxXSlpPXIrMTtlbHNle2lmKCEoZTx0W3JdWzBdKSlyZXR1cm4hMDtuPXItMX1yZXR1cm4hMX0oZSxzKT8wOmU+PTEzMTA3MiYmZTw9MTk2NjA1fHxlPj0xOTY2MDgmJmU8PTI2MjE0MT8yOjF9LGV9KCk7dC5Vbmljb2RlVjY9YX0sNTk4MTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuV3JpdGVCdWZmZXI9dm9pZCAwO3ZhciBpPXIoODQ2MCksbj0idW5kZWZpbmVkIj09dHlwZW9mIHF1ZXVlTWljcm90YXNrP2Z1bmN0aW9uKGUpe1Byb21pc2UucmVzb2x2ZSgpLnRoZW4oZSl9OnF1ZXVlTWljcm90YXNrLG89ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2FjdGlvbj1lLHRoaXMuX3dyaXRlQnVmZmVyPVtdLHRoaXMuX2NhbGxiYWNrcz1bXSx0aGlzLl9wZW5kaW5nRGF0YT0wLHRoaXMuX2J1ZmZlck9mZnNldD0wLHRoaXMuX2lzU3luY1dyaXRpbmc9ITEsdGhpcy5fc3luY0NhbGxzPTAsdGhpcy5fb25Xcml0ZVBhcnNlZD1uZXcgaS5FdmVudEVtaXR0ZXJ9cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25Xcml0ZVBhcnNlZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbldyaXRlUGFyc2VkLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLndyaXRlU3luYz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PXQmJnRoaXMuX3N5bmNDYWxscz50KXRoaXMuX3N5bmNDYWxscz0wO2Vsc2UgaWYodGhpcy5fcGVuZGluZ0RhdGErPWUubGVuZ3RoLHRoaXMuX3dyaXRlQnVmZmVyLnB1c2goZSksdGhpcy5fY2FsbGJhY2tzLnB1c2godm9pZCAwKSx0aGlzLl9zeW5jQ2FsbHMrKywhdGhpcy5faXNTeW5jV3JpdGluZyl7dmFyIHI7Zm9yKHRoaXMuX2lzU3luY1dyaXRpbmc9ITA7cj10aGlzLl93cml0ZUJ1ZmZlci5zaGlmdCgpOyl7dGhpcy5fYWN0aW9uKHIpO3ZhciBpPXRoaXMuX2NhbGxiYWNrcy5zaGlmdCgpO2kmJmkoKX10aGlzLl9wZW5kaW5nRGF0YT0wLHRoaXMuX2J1ZmZlck9mZnNldD0yMTQ3NDgzNjQ3LHRoaXMuX2lzU3luY1dyaXRpbmc9ITEsdGhpcy5fc3luY0NhbGxzPTB9fSxlLnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7aWYodGhpcy5fcGVuZGluZ0RhdGE+NWU3KXRocm93IG5ldyBFcnJvcigid3JpdGUgZGF0YSBkaXNjYXJkZWQsIHVzZSBmbG93IGNvbnRyb2wgdG8gYXZvaWQgbG9zaW5nIGRhdGEiKTt0aGlzLl93cml0ZUJ1ZmZlci5sZW5ndGh8fCh0aGlzLl9idWZmZXJPZmZzZXQ9MCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiByLl9pbm5lcldyaXRlKCl9KSkpLHRoaXMuX3BlbmRpbmdEYXRhKz1lLmxlbmd0aCx0aGlzLl93cml0ZUJ1ZmZlci5wdXNoKGUpLHRoaXMuX2NhbGxiYWNrcy5wdXNoKHQpfSxlLnByb3RvdHlwZS5faW5uZXJXcml0ZT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09dCYmKHQ9ITApO2Zvcih2YXIgaT1lfHxEYXRlLm5vdygpO3RoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aD50aGlzLl9idWZmZXJPZmZzZXQ7KXt2YXIgbz10aGlzLl93cml0ZUJ1ZmZlclt0aGlzLl9idWZmZXJPZmZzZXRdLHM9dGhpcy5fYWN0aW9uKG8sdCk7aWYocylyZXR1cm4gdm9pZCBzLmNhdGNoKChmdW5jdGlvbihlKXtyZXR1cm4gbigoZnVuY3Rpb24oKXt0aHJvdyBlfSkpLFByb21pc2UucmVzb2x2ZSghMSl9KSkudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIERhdGUubm93KCktaT49MTI/c2V0VGltZW91dCgoZnVuY3Rpb24oKXtyZXR1cm4gci5faW5uZXJXcml0ZSgwLGUpfSkpOnIuX2lubmVyV3JpdGUoaSxlKX0pKTt2YXIgYT10aGlzLl9jYWxsYmFja3NbdGhpcy5fYnVmZmVyT2Zmc2V0XTtpZihhJiZhKCksdGhpcy5fYnVmZmVyT2Zmc2V0KyssdGhpcy5fcGVuZGluZ0RhdGEtPW8ubGVuZ3RoLERhdGUubm93KCktaT49MTIpYnJlYWt9dGhpcy5fd3JpdGVCdWZmZXIubGVuZ3RoPnRoaXMuX2J1ZmZlck9mZnNldD8odGhpcy5fYnVmZmVyT2Zmc2V0PjUwJiYodGhpcy5fd3JpdGVCdWZmZXI9dGhpcy5fd3JpdGVCdWZmZXIuc2xpY2UodGhpcy5fYnVmZmVyT2Zmc2V0KSx0aGlzLl9jYWxsYmFja3M9dGhpcy5fY2FsbGJhY2tzLnNsaWNlKHRoaXMuX2J1ZmZlck9mZnNldCksdGhpcy5fYnVmZmVyT2Zmc2V0PTApLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuX2lubmVyV3JpdGUoKX0pKSk6KHRoaXMuX3dyaXRlQnVmZmVyLmxlbmd0aD0wLHRoaXMuX2NhbGxiYWNrcy5sZW5ndGg9MCx0aGlzLl9wZW5kaW5nRGF0YT0wLHRoaXMuX2J1ZmZlck9mZnNldD0wKSx0aGlzLl9vbldyaXRlUGFyc2VkLmZpcmUoKX0sZX0oKTt0LldyaXRlQnVmZmVyPW99LDU5NDE6ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzJiZ0aGlzLl9fcmVhZHx8ZnVuY3Rpb24oZSx0KXt2YXIgcj0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZlW1N5bWJvbC5pdGVyYXRvcl07aWYoIXIpcmV0dXJuIGU7dmFyIGksbixvPXIuY2FsbChlKSxzPVtdO3RyeXtmb3IoOyh2b2lkIDA9PT10fHx0LS0gPjApJiYhKGk9by5uZXh0KCkpLmRvbmU7KXMucHVzaChpLnZhbHVlKX1jYXRjaChlKXtuPXtlcnJvcjplfX1maW5hbGx5e3RyeXtpJiYhaS5kb25lJiYocj1vLnJldHVybikmJnIuY2FsbChvKX1maW5hbGx5e2lmKG4pdGhyb3cgbi5lcnJvcn19cmV0dXJuIHN9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LnRvUmdiU3RyaW5nPXQucGFyc2VDb2xvcj12b2lkIDA7dmFyIGk9L14oW1xkYS1mXSlcLyhbXGRhLWZdKVwvKFtcZGEtZl0pJHxeKFtcZGEtZl17Mn0pXC8oW1xkYS1mXXsyfSlcLyhbXGRhLWZdezJ9KSR8XihbXGRhLWZdezN9KVwvKFtcZGEtZl17M30pXC8oW1xkYS1mXXszfSkkfF4oW1xkYS1mXXs0fSlcLyhbXGRhLWZdezR9KVwvKFtcZGEtZl17NH0pJC8sbj0vXltcZGEtZl0rJC87ZnVuY3Rpb24gbyhlLHQpe3ZhciByPWUudG9TdHJpbmcoMTYpLGk9ci5sZW5ndGg8Mj8iMCIrcjpyO3N3aXRjaCh0KXtjYXNlIDQ6cmV0dXJuIHJbMF07Y2FzZSA4OnJldHVybiBpO2Nhc2UgMTI6cmV0dXJuKGkraSkuc2xpY2UoMCwzKTtkZWZhdWx0OnJldHVybiBpK2l9fXQucGFyc2VDb2xvcj1mdW5jdGlvbihlKXtpZihlKXt2YXIgdD1lLnRvTG93ZXJDYXNlKCk7aWYoMD09PXQuaW5kZXhPZigicmdiOiIpKXt0PXQuc2xpY2UoNCk7dmFyIHI9aS5leGVjKHQpO2lmKHIpe3ZhciBvPXJbMV0/MTU6cls0XT8yNTU6cls3XT80MDk1OjY1NTM1O3JldHVybltNYXRoLnJvdW5kKHBhcnNlSW50KHJbMV18fHJbNF18fHJbN118fHJbMTBdLDE2KS9vKjI1NSksTWF0aC5yb3VuZChwYXJzZUludChyWzJdfHxyWzVdfHxyWzhdfHxyWzExXSwxNikvbyoyNTUpLE1hdGgucm91bmQocGFyc2VJbnQoclszXXx8cls2XXx8cls5XXx8clsxMl0sMTYpL28qMjU1KV19fWVsc2UgaWYoMD09PXQuaW5kZXhPZigiIyIpJiYodD10LnNsaWNlKDEpLG4uZXhlYyh0KSYmWzMsNiw5LDEyXS5pbmNsdWRlcyh0Lmxlbmd0aCkpKXtmb3IodmFyIHM9dC5sZW5ndGgvMyxhPVswLDAsMF0sYz0wO2M8MzsrK2Mpe3ZhciBsPXBhcnNlSW50KHQuc2xpY2UocypjLHMqYytzKSwxNik7YVtjXT0xPT09cz9sPDw0OjI9PT1zP2w6Mz09PXM/bD4+NDpsPj44fXJldHVybiBhfX19LHQudG9SZ2JTdHJpbmc9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT10JiYodD0xNik7dmFyIGk9cihlLDMpLG49aVswXSxzPWlbMV0sYT1pWzJdO3JldHVybiJyZ2I6IitvKG4sdCkrIi8iK28ocyx0KSsiLyIrbyhhLHQpfX0sNTc3MDooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlBBWUxPQURfTElNSVQ9dm9pZCAwLHQuUEFZTE9BRF9MSU1JVD0xZTd9LDYzNTE6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkRjc0hhbmRsZXI9dC5EY3NQYXJzZXI9dm9pZCAwO3ZhciBpPXIoNDgyKSxuPXIoODc0Miksbz1yKDU3NzApLHM9W10sYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9oYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2FjdGl2ZT1zLHRoaXMuX2lkZW50PTAsdGhpcy5faGFuZGxlckZiPWZ1bmN0aW9uKCl7fSx0aGlzLl9zdGFjaz17cGF1c2VkOiExLGxvb3BQb3NpdGlvbjowLGZhbGxUaHJvdWdoOiExfX1yZXR1cm4gZS5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5faGFuZGxlckZiPWZ1bmN0aW9uKCl7fSx0aGlzLl9hY3RpdmU9c30sZS5wcm90b3R5cGUucmVnaXN0ZXJIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dGhpcy5faGFuZGxlcnNbZV0mJih0aGlzLl9oYW5kbGVyc1tlXT1bXSk7dmFyIHI9dGhpcy5faGFuZGxlcnNbZV07cmV0dXJuIHIucHVzaCh0KSx7ZGlzcG9zZTpmdW5jdGlvbigpe3ZhciBlPXIuaW5kZXhPZih0KTstMSE9PWUmJnIuc3BsaWNlKGUsMSl9fX0sZS5wcm90b3R5cGUuY2xlYXJIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2hhbmRsZXJzW2VdJiZkZWxldGUgdGhpcy5faGFuZGxlcnNbZV19LGUucHJvdG90eXBlLnNldEhhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyRmI9ZX0sZS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmUubGVuZ3RoKWZvcih2YXIgZT10aGlzLl9zdGFjay5wYXVzZWQ/dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTE6dGhpcy5fYWN0aXZlLmxlbmd0aC0xO2U+PTA7LS1lKXRoaXMuX2FjdGl2ZVtlXS51bmhvb2soITEpO3RoaXMuX3N0YWNrLnBhdXNlZD0hMSx0aGlzLl9hY3RpdmU9cyx0aGlzLl9pZGVudD0wfSxlLnByb3RvdHlwZS5ob29rPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5yZXNldCgpLHRoaXMuX2lkZW50PWUsdGhpcy5fYWN0aXZlPXRoaXMuX2hhbmRsZXJzW2VdfHxzLHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciByPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtyPj0wO3ItLSl0aGlzLl9hY3RpdmVbcl0uaG9vayh0KTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZGVudCwiSE9PSyIsdCl9LGUucHJvdG90eXBlLnB1dD1mdW5jdGlvbihlLHQscil7aWYodGhpcy5fYWN0aXZlLmxlbmd0aClmb3IodmFyIG49dGhpcy5fYWN0aXZlLmxlbmd0aC0xO24+PTA7bi0tKXRoaXMuX2FjdGl2ZVtuXS5wdXQoZSx0LHIpO2Vsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkZW50LCJQVVQiLCgwLGkudXRmMzJUb1N0cmluZykoZSx0LHIpKX0sZS5wcm90b3R5cGUudW5ob29rPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9ITApLHRoaXMuX2FjdGl2ZS5sZW5ndGgpe3ZhciByPSExLGk9dGhpcy5fYWN0aXZlLmxlbmd0aC0xLG49ITE7aWYodGhpcy5fc3RhY2sucGF1c2VkJiYoaT10aGlzLl9zdGFjay5sb29wUG9zaXRpb24tMSxyPXQsbj10aGlzLl9zdGFjay5mYWxsVGhyb3VnaCx0aGlzLl9zdGFjay5wYXVzZWQ9ITEpLCFuJiYhMT09PXIpe2Zvcig7aT49MCYmITAhPT0ocj10aGlzLl9hY3RpdmVbaV0udW5ob29rKGUpKTtpLS0paWYociBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249aSx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMSxyO2ktLX1mb3IoO2k+PTA7aS0tKWlmKChyPXRoaXMuX2FjdGl2ZVtpXS51bmhvb2soITEpKWluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fc3RhY2sucGF1c2VkPSEwLHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbj1pLHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoPSEwLHJ9ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWRlbnQsIlVOSE9PSyIsZSk7dGhpcy5fYWN0aXZlPXMsdGhpcy5faWRlbnQ9MH0sZX0oKTt0LkRjc1BhcnNlcj1hO3ZhciBjPW5ldyBuLlBhcmFtcztjLmFkZFBhcmFtKDApO3ZhciBsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt0aGlzLl9oYW5kbGVyPWUsdGhpcy5fZGF0YT0iIix0aGlzLl9wYXJhbXM9Yyx0aGlzLl9oaXRMaW1pdD0hMX1yZXR1cm4gZS5wcm90b3R5cGUuaG9vaz1mdW5jdGlvbihlKXt0aGlzLl9wYXJhbXM9ZS5sZW5ndGg+MXx8ZS5wYXJhbXNbMF0/ZS5jbG9uZSgpOmMsdGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9oaXRMaW1pdHx8KHRoaXMuX2RhdGErPSgwLGkudXRmMzJUb1N0cmluZykoZSx0LHIpLHRoaXMuX2RhdGEubGVuZ3RoPm8uUEFZTE9BRF9MSU1JVCYmKHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITApKX0sZS5wcm90b3R5cGUudW5ob29rPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0hMTtpZih0aGlzLl9oaXRMaW1pdClyPSExO2Vsc2UgaWYoZSYmKHI9dGhpcy5faGFuZGxlcih0aGlzLl9kYXRhLHRoaXMuX3BhcmFtcykpaW5zdGFuY2VvZiBQcm9taXNlKXJldHVybiByLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiB0Ll9wYXJhbXM9Yyx0Ll9kYXRhPSIiLHQuX2hpdExpbWl0PSExLGV9KSk7cmV0dXJuIHRoaXMuX3BhcmFtcz1jLHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITEscn0sZX0oKTt0LkRjc0hhbmRsZXI9bH0sMjAxNTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Fc2NhcGVTZXF1ZW5jZVBhcnNlcj10LlZUNTAwX1RSQU5TSVRJT05fVEFCTEU9dC5UcmFuc2l0aW9uVGFibGU9dm9pZCAwO3ZhciBvPXIoODQ0KSxzPXIoODI3MyksYT1yKDg3NDIpLGM9cig2MjQyKSxsPXIoNjM1MSksaD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy50YWJsZT1uZXcgVWludDhBcnJheShlKX1yZXR1cm4gZS5wcm90b3R5cGUuc2V0RGVmYXVsdD1mdW5jdGlvbihlLHQpeygwLHMuZmlsbCkodGhpcy50YWJsZSxlPDw0fHQpfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSx0LHIsaSl7dGhpcy50YWJsZVt0PDw4fGVdPXI8PDR8aX0sZS5wcm90b3R5cGUuYWRkTWFueT1mdW5jdGlvbihlLHQscixpKXtmb3IodmFyIG49MDtuPGUubGVuZ3RoO24rKyl0aGlzLnRhYmxlW3Q8PDh8ZVtuXV09cjw8NHxpfSxlfSgpO3QuVHJhbnNpdGlvblRhYmxlPWg7dmFyIHU9MTYwO3QuVlQ1MDBfVFJBTlNJVElPTl9UQUJMRT1mdW5jdGlvbigpe3ZhciBlPW5ldyBoKDQwOTUpLHQ9QXJyYXkuYXBwbHkobnVsbCxBcnJheSgyNTYpKS5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHR9KSkscj1mdW5jdGlvbihlLHIpe3JldHVybiB0LnNsaWNlKGUscil9LGk9cigzMiwxMjcpLG49cigwLDI0KTtuLnB1c2goMjUpLG4ucHVzaC5hcHBseShuLHIoMjgsMzIpKTt2YXIgbyxzPXIoMCwxNCk7Zm9yKG8gaW4gZS5zZXREZWZhdWx0KDEsMCksZS5hZGRNYW55KGksMCwyLDApLHMpZS5hZGRNYW55KFsyNCwyNiwxNTMsMTU0XSxvLDMsMCksZS5hZGRNYW55KHIoMTI4LDE0NCksbywzLDApLGUuYWRkTWFueShyKDE0NCwxNTIpLG8sMywwKSxlLmFkZCgxNTYsbywwLDApLGUuYWRkKDI3LG8sMTEsMSksZS5hZGQoMTU3LG8sNCw4KSxlLmFkZE1hbnkoWzE1MiwxNTgsMTU5XSxvLDAsNyksZS5hZGQoMTU1LG8sMTEsMyksZS5hZGQoMTQ0LG8sMTEsOSk7cmV0dXJuIGUuYWRkTWFueShuLDAsMywwKSxlLmFkZE1hbnkobiwxLDMsMSksZS5hZGQoMTI3LDEsMCwxKSxlLmFkZE1hbnkobiw4LDAsOCksZS5hZGRNYW55KG4sMywzLDMpLGUuYWRkKDEyNywzLDAsMyksZS5hZGRNYW55KG4sNCwzLDQpLGUuYWRkKDEyNyw0LDAsNCksZS5hZGRNYW55KG4sNiwzLDYpLGUuYWRkTWFueShuLDUsMyw1KSxlLmFkZCgxMjcsNSwwLDUpLGUuYWRkTWFueShuLDIsMywyKSxlLmFkZCgxMjcsMiwwLDIpLGUuYWRkKDkzLDEsNCw4KSxlLmFkZE1hbnkoaSw4LDUsOCksZS5hZGQoMTI3LDgsNSw4KSxlLmFkZE1hbnkoWzE1NiwyNywyNCwyNiw3XSw4LDYsMCksZS5hZGRNYW55KHIoMjgsMzIpLDgsMCw4KSxlLmFkZE1hbnkoWzg4LDk0LDk1XSwxLDAsNyksZS5hZGRNYW55KGksNywwLDcpLGUuYWRkTWFueShuLDcsMCw3KSxlLmFkZCgxNTYsNywwLDApLGUuYWRkKDEyNyw3LDAsNyksZS5hZGQoOTEsMSwxMSwzKSxlLmFkZE1hbnkocig2NCwxMjcpLDMsNywwKSxlLmFkZE1hbnkocig0OCw2MCksMyw4LDQpLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDMsOSw0KSxlLmFkZE1hbnkocig0OCw2MCksNCw4LDQpLGUuYWRkTWFueShyKDY0LDEyNyksNCw3LDApLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDQsMCw2KSxlLmFkZE1hbnkocigzMiw2NCksNiwwLDYpLGUuYWRkKDEyNyw2LDAsNiksZS5hZGRNYW55KHIoNjQsMTI3KSw2LDAsMCksZS5hZGRNYW55KHIoMzIsNDgpLDMsOSw1KSxlLmFkZE1hbnkocigzMiw0OCksNSw5LDUpLGUuYWRkTWFueShyKDQ4LDY0KSw1LDAsNiksZS5hZGRNYW55KHIoNjQsMTI3KSw1LDcsMCksZS5hZGRNYW55KHIoMzIsNDgpLDQsOSw1KSxlLmFkZE1hbnkocigzMiw0OCksMSw5LDIpLGUuYWRkTWFueShyKDMyLDQ4KSwyLDksMiksZS5hZGRNYW55KHIoNDgsMTI3KSwyLDEwLDApLGUuYWRkTWFueShyKDQ4LDgwKSwxLDEwLDApLGUuYWRkTWFueShyKDgxLDg4KSwxLDEwLDApLGUuYWRkTWFueShbODksOTAsOTJdLDEsMTAsMCksZS5hZGRNYW55KHIoOTYsMTI3KSwxLDEwLDApLGUuYWRkKDgwLDEsMTEsOSksZS5hZGRNYW55KG4sOSwwLDkpLGUuYWRkKDEyNyw5LDAsOSksZS5hZGRNYW55KHIoMjgsMzIpLDksMCw5KSxlLmFkZE1hbnkocigzMiw0OCksOSw5LDEyKSxlLmFkZE1hbnkocig0OCw2MCksOSw4LDEwKSxlLmFkZE1hbnkoWzYwLDYxLDYyLDYzXSw5LDksMTApLGUuYWRkTWFueShuLDExLDAsMTEpLGUuYWRkTWFueShyKDMyLDEyOCksMTEsMCwxMSksZS5hZGRNYW55KHIoMjgsMzIpLDExLDAsMTEpLGUuYWRkTWFueShuLDEwLDAsMTApLGUuYWRkKDEyNywxMCwwLDEwKSxlLmFkZE1hbnkocigyOCwzMiksMTAsMCwxMCksZS5hZGRNYW55KHIoNDgsNjApLDEwLDgsMTApLGUuYWRkTWFueShbNjAsNjEsNjIsNjNdLDEwLDAsMTEpLGUuYWRkTWFueShyKDMyLDQ4KSwxMCw5LDEyKSxlLmFkZE1hbnkobiwxMiwwLDEyKSxlLmFkZCgxMjcsMTIsMCwxMiksZS5hZGRNYW55KHIoMjgsMzIpLDEyLDAsMTIpLGUuYWRkTWFueShyKDMyLDQ4KSwxMiw5LDEyKSxlLmFkZE1hbnkocig0OCw2NCksMTIsMCwxMSksZS5hZGRNYW55KHIoNjQsMTI3KSwxMiwxMiwxMyksZS5hZGRNYW55KHIoNjQsMTI3KSwxMCwxMiwxMyksZS5hZGRNYW55KHIoNjQsMTI3KSw5LDEyLDEzKSxlLmFkZE1hbnkobiwxMywxMywxMyksZS5hZGRNYW55KGksMTMsMTMsMTMpLGUuYWRkKDEyNywxMywwLDEzKSxlLmFkZE1hbnkoWzI3LDE1NiwyNCwyNl0sMTMsMTQsMCksZS5hZGQodSwwLDIsMCksZS5hZGQodSw4LDUsOCksZS5hZGQodSw2LDAsNiksZS5hZGQodSwxMSwwLDExKSxlLmFkZCh1LDEzLDEzLDEzKSxlfSgpO3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIocil7dm9pZCAwPT09ciYmKHI9dC5WVDUwMF9UUkFOU0lUSU9OX1RBQkxFKTt2YXIgaT1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuX3RyYW5zaXRpb25zPXIsaS5fcGFyc2VTdGFjaz17c3RhdGU6MCxoYW5kbGVyczpbXSxoYW5kbGVyUG9zOjAsdHJhbnNpdGlvbjowLGNodW5rUG9zOjB9LGkuaW5pdGlhbFN0YXRlPTAsaS5jdXJyZW50U3RhdGU9aS5pbml0aWFsU3RhdGUsaS5fcGFyYW1zPW5ldyBhLlBhcmFtcyxpLl9wYXJhbXMuYWRkUGFyYW0oMCksaS5fY29sbGVjdD0wLGkucHJlY2VkaW5nQ29kZXBvaW50PTAsaS5fcHJpbnRIYW5kbGVyRmI9ZnVuY3Rpb24oZSx0LHIpe30saS5fZXhlY3V0ZUhhbmRsZXJGYj1mdW5jdGlvbihlKXt9LGkuX2NzaUhhbmRsZXJGYj1mdW5jdGlvbihlLHQpe30saS5fZXNjSGFuZGxlckZiPWZ1bmN0aW9uKGUpe30saS5fZXJyb3JIYW5kbGVyRmI9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGkuX3ByaW50SGFuZGxlcj1pLl9wcmludEhhbmRsZXJGYixpLl9leGVjdXRlSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSxpLl9jc2lIYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLGkuX2VzY0hhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksaS5fb3NjUGFyc2VyPW5ldyBjLk9zY1BhcnNlcixpLl9kY3NQYXJzZXI9bmV3IGwuRGNzUGFyc2VyLGkuX2Vycm9ySGFuZGxlcj1pLl9lcnJvckhhbmRsZXJGYixpLnJlZ2lzdGVyRXNjSGFuZGxlcih7ZmluYWw6IlxcIn0sKGZ1bmN0aW9uKCl7cmV0dXJuITB9KSksaX1yZXR1cm4gbihyLGUpLHIucHJvdG90eXBlLl9pZGVudGlmaWVyPWZ1bmN0aW9uKGUsdCl7dm9pZCAwPT09dCYmKHQ9WzY0LDEyNl0pO3ZhciByPTA7aWYoZS5wcmVmaXgpe2lmKGUucHJlZml4Lmxlbmd0aD4xKXRocm93IG5ldyBFcnJvcigib25seSBvbmUgYnl0ZSBhcyBwcmVmaXggc3VwcG9ydGVkIik7aWYoKHI9ZS5wcmVmaXguY2hhckNvZGVBdCgwKSkmJjYwPnJ8fHI+NjMpdGhyb3cgbmV3IEVycm9yKCJwcmVmaXggbXVzdCBiZSBpbiByYW5nZSAweDNjIC4uIDB4M2YiKX1pZihlLmludGVybWVkaWF0ZXMpe2lmKGUuaW50ZXJtZWRpYXRlcy5sZW5ndGg+Mil0aHJvdyBuZXcgRXJyb3IoIm9ubHkgdHdvIGJ5dGVzIGFzIGludGVybWVkaWF0ZXMgYXJlIHN1cHBvcnRlZCIpO2Zvcih2YXIgaT0wO2k8ZS5pbnRlcm1lZGlhdGVzLmxlbmd0aDsrK2kpe3ZhciBuPWUuaW50ZXJtZWRpYXRlcy5jaGFyQ29kZUF0KGkpO2lmKDMyPm58fG4+NDcpdGhyb3cgbmV3IEVycm9yKCJpbnRlcm1lZGlhdGUgbXVzdCBiZSBpbiByYW5nZSAweDIwIC4uIDB4MmYiKTtyPDw9OCxyfD1ufX1pZigxIT09ZS5maW5hbC5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKCJmaW5hbCBtdXN0IGJlIGEgc2luZ2xlIGJ5dGUiKTt2YXIgbz1lLmZpbmFsLmNoYXJDb2RlQXQoMCk7aWYodFswXT5vfHxvPnRbMV0pdGhyb3cgbmV3IEVycm9yKCJmaW5hbCBtdXN0IGJlIGluIHJhbmdlICIrdFswXSsiIC4uICIrdFsxXSk7cmV0dXJuKHI8PD04KXxvfSxyLnByb3RvdHlwZS5pZGVudFRvU3RyaW5nPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXTtlOyl0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgyNTUmZSkpLGU+Pj04O3JldHVybiB0LnJldmVyc2UoKS5qb2luKCIiKX0sci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3RoaXMuX2NzaUhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXhlY3V0ZUhhbmRsZXJzPU9iamVjdC5jcmVhdGUobnVsbCksdGhpcy5fZXNjSGFuZGxlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9vc2NQYXJzZXIuZGlzcG9zZSgpLHRoaXMuX2Rjc1BhcnNlci5kaXNwb3NlKCl9LHIucHJvdG90eXBlLnNldFByaW50SGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9wcmludEhhbmRsZXI9ZX0sci5wcm90b3R5cGUuY2xlYXJQcmludEhhbmRsZXI9ZnVuY3Rpb24oKXt0aGlzLl9wcmludEhhbmRsZXI9dGhpcy5fcHJpbnRIYW5kbGVyRmJ9LHIucHJvdG90eXBlLnJlZ2lzdGVyRXNjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuX2lkZW50aWZpZXIoZSxbNDgsMTI2XSk7dm9pZCAwPT09dGhpcy5fZXNjSGFuZGxlcnNbcl0mJih0aGlzLl9lc2NIYW5kbGVyc1tyXT1bXSk7dmFyIGk9dGhpcy5fZXNjSGFuZGxlcnNbcl07cmV0dXJuIGkucHVzaCh0KSx7ZGlzcG9zZTpmdW5jdGlvbigpe3ZhciBlPWkuaW5kZXhPZih0KTstMSE9PWUmJmkuc3BsaWNlKGUsMSl9fX0sci5wcm90b3R5cGUuY2xlYXJFc2NIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoZSxbNDgsMTI2XSldJiZkZWxldGUgdGhpcy5fZXNjSGFuZGxlcnNbdGhpcy5faWRlbnRpZmllcihlLFs0OCwxMjZdKV19LHIucHJvdG90eXBlLnNldEVzY0hhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9lc2NIYW5kbGVyRmI9ZX0sci5wcm90b3R5cGUuc2V0RXhlY3V0ZUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt0aGlzLl9leGVjdXRlSGFuZGxlcnNbZS5jaGFyQ29kZUF0KDApXT10fSxyLnByb3RvdHlwZS5jbGVhckV4ZWN1dGVIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX2V4ZWN1dGVIYW5kbGVyc1tlLmNoYXJDb2RlQXQoMCldJiZkZWxldGUgdGhpcy5fZXhlY3V0ZUhhbmRsZXJzW2UuY2hhckNvZGVBdCgwKV19LHIucHJvdG90eXBlLnNldEV4ZWN1dGVIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fZXhlY3V0ZUhhbmRsZXJGYj1lfSxyLnByb3RvdHlwZS5yZWdpc3RlckNzaUhhbmRsZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9pZGVudGlmaWVyKGUpO3ZvaWQgMD09PXRoaXMuX2NzaUhhbmRsZXJzW3JdJiYodGhpcy5fY3NpSGFuZGxlcnNbcl09W10pO3ZhciBpPXRoaXMuX2NzaUhhbmRsZXJzW3JdO3JldHVybiBpLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZT1pLmluZGV4T2YodCk7LTEhPT1lJiZpLnNwbGljZShlLDEpfX19LHIucHJvdG90eXBlLmNsZWFyQ3NpSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9pZGVudGlmaWVyKGUpXSYmZGVsZXRlIHRoaXMuX2NzaUhhbmRsZXJzW3RoaXMuX2lkZW50aWZpZXIoZSldfSxyLnByb3RvdHlwZS5zZXRDc2lIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fY3NpSGFuZGxlckZiPWV9LHIucHJvdG90eXBlLnJlZ2lzdGVyRGNzSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLl9kY3NQYXJzZXIucmVnaXN0ZXJIYW5kbGVyKHRoaXMuX2lkZW50aWZpZXIoZSksdCl9LHIucHJvdG90eXBlLmNsZWFyRGNzSGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9kY3NQYXJzZXIuY2xlYXJIYW5kbGVyKHRoaXMuX2lkZW50aWZpZXIoZSkpfSxyLnByb3RvdHlwZS5zZXREY3NIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5fZGNzUGFyc2VyLnNldEhhbmRsZXJGYWxsYmFjayhlKX0sci5wcm90b3R5cGUucmVnaXN0ZXJPc2NIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX29zY1BhcnNlci5yZWdpc3RlckhhbmRsZXIoZSx0KX0sci5wcm90b3R5cGUuY2xlYXJPc2NIYW5kbGVyPWZ1bmN0aW9uKGUpe3RoaXMuX29zY1BhcnNlci5jbGVhckhhbmRsZXIoZSl9LHIucHJvdG90eXBlLnNldE9zY0hhbmRsZXJGYWxsYmFjaz1mdW5jdGlvbihlKXt0aGlzLl9vc2NQYXJzZXIuc2V0SGFuZGxlckZhbGxiYWNrKGUpfSxyLnByb3RvdHlwZS5zZXRFcnJvckhhbmRsZXI9ZnVuY3Rpb24oZSl7dGhpcy5fZXJyb3JIYW5kbGVyPWV9LHIucHJvdG90eXBlLmNsZWFyRXJyb3JIYW5kbGVyPWZ1bmN0aW9uKCl7dGhpcy5fZXJyb3JIYW5kbGVyPXRoaXMuX2Vycm9ySGFuZGxlckZifSxyLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuY3VycmVudFN0YXRlPXRoaXMuaW5pdGlhbFN0YXRlLHRoaXMuX29zY1BhcnNlci5yZXNldCgpLHRoaXMuX2Rjc1BhcnNlci5yZXNldCgpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTAsdGhpcy5wcmVjZWRpbmdDb2RlcG9pbnQ9MCwwIT09dGhpcy5fcGFyc2VTdGFjay5zdGF0ZSYmKHRoaXMuX3BhcnNlU3RhY2suc3RhdGU9Mix0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPVtdKX0sci5wcm90b3R5cGUuX3ByZXNlcnZlU3RhY2s9ZnVuY3Rpb24oZSx0LHIsaSxuKXt0aGlzLl9wYXJzZVN0YWNrLnN0YXRlPWUsdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz10LHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcz1yLHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbj1pLHRoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3M9bn0sci5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpLG49MCxvPTAscz0wO2lmKHRoaXMuX3BhcnNlU3RhY2suc3RhdGUpaWYoMj09PXRoaXMuX3BhcnNlU3RhY2suc3RhdGUpdGhpcy5fcGFyc2VTdGFjay5zdGF0ZT0wLHM9dGhpcy5fcGFyc2VTdGFjay5jaHVua1BvcysxO2Vsc2V7aWYodm9pZCAwPT09cnx8MT09PXRoaXMuX3BhcnNlU3RhY2suc3RhdGUpdGhyb3cgdGhpcy5fcGFyc2VTdGFjay5zdGF0ZT0xLG5ldyBFcnJvcigiaW1wcm9wZXIgY29udGludWF0aW9uIGR1ZSB0byBwcmV2aW91cyBhc3luYyBoYW5kbGVyLCBnaXZpbmcgdXAgcGFyc2luZyIpO3ZhciBhPXRoaXMuX3BhcnNlU3RhY2suaGFuZGxlcnMsYz10aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJQb3MtMTtzd2l0Y2godGhpcy5fcGFyc2VTdGFjay5zdGF0ZSl7Y2FzZSAzOmlmKCExPT09ciYmYz4tMSlmb3IoO2M+PTAmJiEwIT09KGk9YVtjXSh0aGlzLl9wYXJhbXMpKTtjLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3BhcnNlU3RhY2suaGFuZGxlclBvcz1jLGk7dGhpcy5fcGFyc2VTdGFjay5oYW5kbGVycz1bXTticmVhaztjYXNlIDQ6aWYoITE9PT1yJiZjPi0xKWZvcig7Yz49MCYmITAhPT0oaT1hW2NdKCkpO2MtLSlpZihpIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fcGFyc2VTdGFjay5oYW5kbGVyUG9zPWMsaTt0aGlzLl9wYXJzZVN0YWNrLmhhbmRsZXJzPVtdO2JyZWFrO2Nhc2UgNjppZihuPWVbdGhpcy5fcGFyc2VTdGFjay5jaHVua1Bvc10saT10aGlzLl9kY3NQYXJzZXIudW5ob29rKDI0IT09biYmMjYhPT1uLHIpKXJldHVybiBpOzI3PT09biYmKHRoaXMuX3BhcnNlU3RhY2sudHJhbnNpdGlvbnw9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MDticmVhaztjYXNlIDU6aWYobj1lW3RoaXMuX3BhcnNlU3RhY2suY2h1bmtQb3NdLGk9dGhpcy5fb3NjUGFyc2VyLmVuZCgyNCE9PW4mJjI2IT09bixyKSlyZXR1cm4gaTsyNz09PW4mJih0aGlzLl9wYXJzZVN0YWNrLnRyYW5zaXRpb258PTEpLHRoaXMuX3BhcmFtcy5yZXNldCgpLHRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKSx0aGlzLl9jb2xsZWN0PTB9dGhpcy5fcGFyc2VTdGFjay5zdGF0ZT0wLHM9dGhpcy5fcGFyc2VTdGFjay5jaHVua1BvcysxLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTAsdGhpcy5jdXJyZW50U3RhdGU9MTUmdGhpcy5fcGFyc2VTdGFjay50cmFuc2l0aW9ufWZvcih2YXIgbD1zO2w8dDsrK2wpe3N3aXRjaChuPWVbbF0sKG89dGhpcy5fdHJhbnNpdGlvbnMudGFibGVbdGhpcy5jdXJyZW50U3RhdGU8PDh8KG48MTYwP246dSldKT4+NCl7Y2FzZSAyOmZvcih2YXIgaD1sKzE7OysraCl7aWYoaD49dHx8KG49ZVtoXSk8MzJ8fG4+MTI2JiZuPHUpe3RoaXMuX3ByaW50SGFuZGxlcihlLGwsaCksbD1oLTE7YnJlYWt9aWYoKytoPj10fHwobj1lW2hdKTwzMnx8bj4xMjYmJm48dSl7dGhpcy5fcHJpbnRIYW5kbGVyKGUsbCxoKSxsPWgtMTticmVha31pZigrK2g+PXR8fChuPWVbaF0pPDMyfHxuPjEyNiYmbjx1KXt0aGlzLl9wcmludEhhbmRsZXIoZSxsLGgpLGw9aC0xO2JyZWFrfWlmKCsraD49dHx8KG49ZVtoXSk8MzJ8fG4+MTI2JiZuPHUpe3RoaXMuX3ByaW50SGFuZGxlcihlLGwsaCksbD1oLTE7YnJlYWt9fWJyZWFrO2Nhc2UgMzp0aGlzLl9leGVjdXRlSGFuZGxlcnNbbl0/dGhpcy5fZXhlY3V0ZUhhbmRsZXJzW25dKCk6dGhpcy5fZXhlY3V0ZUhhbmRsZXJGYihuKSx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wO2JyZWFrO2Nhc2UgMDpicmVhaztjYXNlIDE6aWYodGhpcy5fZXJyb3JIYW5kbGVyKHtwb3NpdGlvbjpsLGNvZGU6bixjdXJyZW50U3RhdGU6dGhpcy5jdXJyZW50U3RhdGUsY29sbGVjdDp0aGlzLl9jb2xsZWN0LHBhcmFtczp0aGlzLl9wYXJhbXMsYWJvcnQ6ITF9KS5hYm9ydClyZXR1cm47YnJlYWs7Y2FzZSA3OmZvcih2YXIgZj0oYT10aGlzLl9jc2lIYW5kbGVyc1t0aGlzLl9jb2xsZWN0PDw4fG5dKT9hLmxlbmd0aC0xOi0xO2Y+PTAmJiEwIT09KGk9YVtmXSh0aGlzLl9wYXJhbXMpKTtmLS0paWYoaSBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soMyxhLGYsbyxsKSxpO2Y8MCYmdGhpcy5fY3NpSGFuZGxlckZiKHRoaXMuX2NvbGxlY3Q8PDh8bix0aGlzLl9wYXJhbXMpLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTA7YnJlYWs7Y2FzZSA4OmRve3N3aXRjaChuKXtjYXNlIDU5OnRoaXMuX3BhcmFtcy5hZGRQYXJhbSgwKTticmVhaztjYXNlIDU4OnRoaXMuX3BhcmFtcy5hZGRTdWJQYXJhbSgtMSk7YnJlYWs7ZGVmYXVsdDp0aGlzLl9wYXJhbXMuYWRkRGlnaXQobi00OCl9fXdoaWxlKCsrbDx0JiYobj1lW2xdKT40NyYmbjw2MCk7bC0tO2JyZWFrO2Nhc2UgOTp0aGlzLl9jb2xsZWN0PDw9OCx0aGlzLl9jb2xsZWN0fD1uO2JyZWFrO2Nhc2UgMTA6Zm9yKHZhciBfPXRoaXMuX2VzY0hhbmRsZXJzW3RoaXMuX2NvbGxlY3Q8PDh8bl0sZD1fP18ubGVuZ3RoLTE6LTE7ZD49MCYmITAhPT0oaT1fW2RdKCkpO2QtLSlpZihpIGluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fcHJlc2VydmVTdGFjayg0LF8sZCxvLGwpLGk7ZDwwJiZ0aGlzLl9lc2NIYW5kbGVyRmIodGhpcy5fY29sbGVjdDw8OHxuKSx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wO2JyZWFrO2Nhc2UgMTE6dGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MDticmVhaztjYXNlIDEyOnRoaXMuX2Rjc1BhcnNlci5ob29rKHRoaXMuX2NvbGxlY3Q8PDh8bix0aGlzLl9wYXJhbXMpO2JyZWFrO2Nhc2UgMTM6Zm9yKHZhciBwPWwrMTs7KytwKWlmKHA+PXR8fDI0PT09KG49ZVtwXSl8fDI2PT09bnx8Mjc9PT1ufHxuPjEyNyYmbjx1KXt0aGlzLl9kY3NQYXJzZXIucHV0KGUsbCxwKSxsPXAtMTticmVha31icmVhaztjYXNlIDE0OmlmKGk9dGhpcy5fZGNzUGFyc2VyLnVuaG9vaygyNCE9PW4mJjI2IT09bikpcmV0dXJuIHRoaXMuX3ByZXNlcnZlU3RhY2soNixbXSwwLG8sbCksaTsyNz09PW4mJihvfD0xKSx0aGlzLl9wYXJhbXMucmVzZXQoKSx0aGlzLl9wYXJhbXMuYWRkUGFyYW0oMCksdGhpcy5fY29sbGVjdD0wLHRoaXMucHJlY2VkaW5nQ29kZXBvaW50PTA7YnJlYWs7Y2FzZSA0OnRoaXMuX29zY1BhcnNlci5zdGFydCgpO2JyZWFrO2Nhc2UgNTpmb3IodmFyIHY9bCsxOzt2KyspaWYodj49dHx8KG49ZVt2XSk8MzJ8fG4+MTI3JiZuPHUpe3RoaXMuX29zY1BhcnNlci5wdXQoZSxsLHYpLGw9di0xO2JyZWFrfWJyZWFrO2Nhc2UgNjppZihpPXRoaXMuX29zY1BhcnNlci5lbmQoMjQhPT1uJiYyNiE9PW4pKXJldHVybiB0aGlzLl9wcmVzZXJ2ZVN0YWNrKDUsW10sMCxvLGwpLGk7Mjc9PT1uJiYob3w9MSksdGhpcy5fcGFyYW1zLnJlc2V0KCksdGhpcy5fcGFyYW1zLmFkZFBhcmFtKDApLHRoaXMuX2NvbGxlY3Q9MCx0aGlzLnByZWNlZGluZ0NvZGVwb2ludD0wfXRoaXMuY3VycmVudFN0YXRlPTE1Jm99fSxyfShvLkRpc3Bvc2FibGUpO3QuRXNjYXBlU2VxdWVuY2VQYXJzZXI9Zn0sNjI0MjooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuT3NjSGFuZGxlcj10Lk9zY1BhcnNlcj12b2lkIDA7dmFyIGk9cig1NzcwKSxuPXIoNDgyKSxvPVtdLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fc3RhdGU9MCx0aGlzLl9hY3RpdmU9byx0aGlzLl9pZD0tMSx0aGlzLl9oYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2hhbmRsZXJGYj1mdW5jdGlvbigpe30sdGhpcy5fc3RhY2s9e3BhdXNlZDohMSxsb29wUG9zaXRpb246MCxmYWxsVGhyb3VnaDohMX19cmV0dXJuIGUucHJvdG90eXBlLnJlZ2lzdGVySGFuZGxlcj1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXRoaXMuX2hhbmRsZXJzW2VdJiYodGhpcy5faGFuZGxlcnNbZV09W10pO3ZhciByPXRoaXMuX2hhbmRsZXJzW2VdO3JldHVybiByLnB1c2godCkse2Rpc3Bvc2U6ZnVuY3Rpb24oKXt2YXIgZT1yLmluZGV4T2YodCk7LTEhPT1lJiZyLnNwbGljZShlLDEpfX19LGUucHJvdG90eXBlLmNsZWFySGFuZGxlcj1mdW5jdGlvbihlKXt0aGlzLl9oYW5kbGVyc1tlXSYmZGVsZXRlIHRoaXMuX2hhbmRsZXJzW2VdfSxlLnByb3RvdHlwZS5zZXRIYW5kbGVyRmFsbGJhY2s9ZnVuY3Rpb24oZSl7dGhpcy5faGFuZGxlckZiPWV9LGUucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9oYW5kbGVycz1PYmplY3QuY3JlYXRlKG51bGwpLHRoaXMuX2hhbmRsZXJGYj1mdW5jdGlvbigpe30sdGhpcy5fYWN0aXZlPW99LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7aWYoMj09PXRoaXMuX3N0YXRlKWZvcih2YXIgZT10aGlzLl9zdGFjay5wYXVzZWQ/dGhpcy5fc3RhY2subG9vcFBvc2l0aW9uLTE6dGhpcy5fYWN0aXZlLmxlbmd0aC0xO2U+PTA7LS1lKXRoaXMuX2FjdGl2ZVtlXS5lbmQoITEpO3RoaXMuX3N0YWNrLnBhdXNlZD0hMSx0aGlzLl9hY3RpdmU9byx0aGlzLl9pZD0tMSx0aGlzLl9zdGF0ZT0wfSxlLnByb3RvdHlwZS5fc3RhcnQ9ZnVuY3Rpb24oKXtpZih0aGlzLl9hY3RpdmU9dGhpcy5faGFuZGxlcnNbdGhpcy5faWRdfHxvLHRoaXMuX2FjdGl2ZS5sZW5ndGgpZm9yKHZhciBlPXRoaXMuX2FjdGl2ZS5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9hY3RpdmVbZV0uc3RhcnQoKTtlbHNlIHRoaXMuX2hhbmRsZXJGYih0aGlzLl9pZCwiU1RBUlQiKX0sZS5wcm90b3R5cGUuX3B1dD1mdW5jdGlvbihlLHQscil7aWYodGhpcy5fYWN0aXZlLmxlbmd0aClmb3IodmFyIGk9dGhpcy5fYWN0aXZlLmxlbmd0aC0xO2k+PTA7aS0tKXRoaXMuX2FjdGl2ZVtpXS5wdXQoZSx0LHIpO2Vsc2UgdGhpcy5faGFuZGxlckZiKHRoaXMuX2lkLCJQVVQiLCgwLG4udXRmMzJUb1N0cmluZykoZSx0LHIpKX0sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnJlc2V0KCksdGhpcy5fc3RhdGU9MX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUsdCxyKXtpZigzIT09dGhpcy5fc3RhdGUpe2lmKDE9PT10aGlzLl9zdGF0ZSlmb3IoO3Q8cjspe3ZhciBpPWVbdCsrXTtpZig1OT09PWkpe3RoaXMuX3N0YXRlPTIsdGhpcy5fc3RhcnQoKTticmVha31pZihpPDQ4fHw1NzxpKXJldHVybiB2b2lkKHRoaXMuX3N0YXRlPTMpOy0xPT09dGhpcy5faWQmJih0aGlzLl9pZD0wKSx0aGlzLl9pZD0xMCp0aGlzLl9pZCtpLTQ4fTI9PT10aGlzLl9zdGF0ZSYmci10PjAmJnRoaXMuX3B1dChlLHQscil9fSxlLnByb3RvdHlwZS5lbmQ9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD0hMCksMCE9PXRoaXMuX3N0YXRlKXtpZigzIT09dGhpcy5fc3RhdGUpaWYoMT09PXRoaXMuX3N0YXRlJiZ0aGlzLl9zdGFydCgpLHRoaXMuX2FjdGl2ZS5sZW5ndGgpe3ZhciByPSExLGk9dGhpcy5fYWN0aXZlLmxlbmd0aC0xLG49ITE7aWYodGhpcy5fc3RhY2sucGF1c2VkJiYoaT10aGlzLl9zdGFjay5sb29wUG9zaXRpb24tMSxyPXQsbj10aGlzLl9zdGFjay5mYWxsVGhyb3VnaCx0aGlzLl9zdGFjay5wYXVzZWQ9ITEpLCFuJiYhMT09PXIpe2Zvcig7aT49MCYmITAhPT0ocj10aGlzLl9hY3RpdmVbaV0uZW5kKGUpKTtpLS0paWYociBpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHRoaXMuX3N0YWNrLnBhdXNlZD0hMCx0aGlzLl9zdGFjay5sb29wUG9zaXRpb249aSx0aGlzLl9zdGFjay5mYWxsVGhyb3VnaD0hMSxyO2ktLX1mb3IoO2k+PTA7aS0tKWlmKChyPXRoaXMuX2FjdGl2ZVtpXS5lbmQoITEpKWluc3RhbmNlb2YgUHJvbWlzZSlyZXR1cm4gdGhpcy5fc3RhY2sucGF1c2VkPSEwLHRoaXMuX3N0YWNrLmxvb3BQb3NpdGlvbj1pLHRoaXMuX3N0YWNrLmZhbGxUaHJvdWdoPSEwLHJ9ZWxzZSB0aGlzLl9oYW5kbGVyRmIodGhpcy5faWQsIkVORCIsZSk7dGhpcy5fYWN0aXZlPW8sdGhpcy5faWQ9LTEsdGhpcy5fc3RhdGU9MH19LGV9KCk7dC5Pc2NQYXJzZXI9czt2YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5faGFuZGxlcj1lLHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITF9cmV0dXJuIGUucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMX0sZS5wcm90b3R5cGUucHV0PWZ1bmN0aW9uKGUsdCxyKXt0aGlzLl9oaXRMaW1pdHx8KHRoaXMuX2RhdGErPSgwLG4udXRmMzJUb1N0cmluZykoZSx0LHIpLHRoaXMuX2RhdGEubGVuZ3RoPmkuUEFZTE9BRF9MSU1JVCYmKHRoaXMuX2RhdGE9IiIsdGhpcy5faGl0TGltaXQ9ITApKX0sZS5wcm90b3R5cGUuZW5kPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMscj0hMTtpZih0aGlzLl9oaXRMaW1pdClyPSExO2Vsc2UgaWYoZSYmKHI9dGhpcy5faGFuZGxlcih0aGlzLl9kYXRhKSlpbnN0YW5jZW9mIFByb21pc2UpcmV0dXJuIHIudGhlbigoZnVuY3Rpb24oZSl7cmV0dXJuIHQuX2RhdGE9IiIsdC5faGl0TGltaXQ9ITEsZX0pKTtyZXR1cm4gdGhpcy5fZGF0YT0iIix0aGlzLl9oaXRMaW1pdD0hMSxyfSxlfSgpO3QuT3NjSGFuZGxlcj1hfSw4NzQyOihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuUGFyYW1zPXZvaWQgMDt2YXIgcj0yMTQ3NDgzNjQ3LGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUsdCl7aWYodm9pZCAwPT09ZSYmKGU9MzIpLHZvaWQgMD09PXQmJih0PTMyKSx0aGlzLm1heExlbmd0aD1lLHRoaXMubWF4U3ViUGFyYW1zTGVuZ3RoPXQsdD4yNTYpdGhyb3cgbmV3IEVycm9yKCJtYXhTdWJQYXJhbXNMZW5ndGggbXVzdCBub3QgYmUgZ3JlYXRlciB0aGFuIDI1NiIpO3RoaXMucGFyYW1zPW5ldyBJbnQzMkFycmF5KGUpLHRoaXMubGVuZ3RoPTAsdGhpcy5fc3ViUGFyYW1zPW5ldyBJbnQzMkFycmF5KHQpLHRoaXMuX3N1YlBhcmFtc0xlbmd0aD0wLHRoaXMuX3N1YlBhcmFtc0lkeD1uZXcgVWludDE2QXJyYXkoZSksdGhpcy5fcmVqZWN0RGlnaXRzPSExLHRoaXMuX3JlamVjdFN1YkRpZ2l0cz0hMSx0aGlzLl9kaWdpdElzU3ViPSExfXJldHVybiBlLmZyb21BcnJheT1mdW5jdGlvbih0KXt2YXIgcj1uZXcgZTtpZighdC5sZW5ndGgpcmV0dXJuIHI7Zm9yKHZhciBpPUFycmF5LmlzQXJyYXkodFswXSk/MTowO2k8dC5sZW5ndGg7KytpKXt2YXIgbj10W2ldO2lmKEFycmF5LmlzQXJyYXkobikpZm9yKHZhciBvPTA7bzxuLmxlbmd0aDsrK28pci5hZGRTdWJQYXJhbShuW29dKTtlbHNlIHIuYWRkUGFyYW0obil9cmV0dXJuIHJ9LGUucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGUodGhpcy5tYXhMZW5ndGgsdGhpcy5tYXhTdWJQYXJhbXNMZW5ndGgpO3JldHVybiB0LnBhcmFtcy5zZXQodGhpcy5wYXJhbXMpLHQubGVuZ3RoPXRoaXMubGVuZ3RoLHQuX3N1YlBhcmFtcy5zZXQodGhpcy5fc3ViUGFyYW1zKSx0Ll9zdWJQYXJhbXNMZW5ndGg9dGhpcy5fc3ViUGFyYW1zTGVuZ3RoLHQuX3N1YlBhcmFtc0lkeC5zZXQodGhpcy5fc3ViUGFyYW1zSWR4KSx0Ll9yZWplY3REaWdpdHM9dGhpcy5fcmVqZWN0RGlnaXRzLHQuX3JlamVjdFN1YkRpZ2l0cz10aGlzLl9yZWplY3RTdWJEaWdpdHMsdC5fZGlnaXRJc1N1Yj10aGlzLl9kaWdpdElzU3ViLHR9LGUucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24oKXtmb3IodmFyIGU9W10sdD0wO3Q8dGhpcy5sZW5ndGg7Kyt0KXtlLnB1c2godGhpcy5wYXJhbXNbdF0pO3ZhciByPXRoaXMuX3N1YlBhcmFtc0lkeFt0XT4+OCxpPTI1NSZ0aGlzLl9zdWJQYXJhbXNJZHhbdF07aS1yPjAmJmUucHVzaChBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9zdWJQYXJhbXMscixpKSl9cmV0dXJuIGV9LGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5sZW5ndGg9MCx0aGlzLl9zdWJQYXJhbXNMZW5ndGg9MCx0aGlzLl9yZWplY3REaWdpdHM9ITEsdGhpcy5fcmVqZWN0U3ViRGlnaXRzPSExLHRoaXMuX2RpZ2l0SXNTdWI9ITF9LGUucHJvdG90eXBlLmFkZFBhcmFtPWZ1bmN0aW9uKGUpe2lmKHRoaXMuX2RpZ2l0SXNTdWI9ITEsdGhpcy5sZW5ndGg+PXRoaXMubWF4TGVuZ3RoKXRoaXMuX3JlamVjdERpZ2l0cz0hMDtlbHNle2lmKGU8LTEpdGhyb3cgbmV3IEVycm9yKCJ2YWx1ZXMgbGVzc2VyIHRoYW4gLTEgYXJlIG5vdCBhbGxvd2VkIik7dGhpcy5fc3ViUGFyYW1zSWR4W3RoaXMubGVuZ3RoXT10aGlzLl9zdWJQYXJhbXNMZW5ndGg8PDh8dGhpcy5fc3ViUGFyYW1zTGVuZ3RoLHRoaXMucGFyYW1zW3RoaXMubGVuZ3RoKytdPWU+cj9yOmV9fSxlLnByb3RvdHlwZS5hZGRTdWJQYXJhbT1mdW5jdGlvbihlKXtpZih0aGlzLl9kaWdpdElzU3ViPSEwLHRoaXMubGVuZ3RoKWlmKHRoaXMuX3JlamVjdERpZ2l0c3x8dGhpcy5fc3ViUGFyYW1zTGVuZ3RoPj10aGlzLm1heFN1YlBhcmFtc0xlbmd0aCl0aGlzLl9yZWplY3RTdWJEaWdpdHM9ITA7ZWxzZXtpZihlPC0xKXRocm93IG5ldyBFcnJvcigidmFsdWVzIGxlc3NlciB0aGFuIC0xIGFyZSBub3QgYWxsb3dlZCIpO3RoaXMuX3N1YlBhcmFtc1t0aGlzLl9zdWJQYXJhbXNMZW5ndGgrK109ZT5yP3I6ZSx0aGlzLl9zdWJQYXJhbXNJZHhbdGhpcy5sZW5ndGgtMV0rK319LGUucHJvdG90eXBlLmhhc1N1YlBhcmFtcz1mdW5jdGlvbihlKXtyZXR1cm4oMjU1JnRoaXMuX3N1YlBhcmFtc0lkeFtlXSktKHRoaXMuX3N1YlBhcmFtc0lkeFtlXT4+OCk+MH0sZS5wcm90b3R5cGUuZ2V0U3ViUGFyYW1zPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N1YlBhcmFtc0lkeFtlXT4+OCxyPTI1NSZ0aGlzLl9zdWJQYXJhbXNJZHhbZV07cmV0dXJuIHItdD4wP3RoaXMuX3N1YlBhcmFtcy5zdWJhcnJheSh0LHIpOm51bGx9LGUucHJvdG90eXBlLmdldFN1YlBhcmFtc0FsbD1mdW5jdGlvbigpe2Zvcih2YXIgZT17fSx0PTA7dDx0aGlzLmxlbmd0aDsrK3Qpe3ZhciByPXRoaXMuX3N1YlBhcmFtc0lkeFt0XT4+OCxpPTI1NSZ0aGlzLl9zdWJQYXJhbXNJZHhbdF07aS1yPjAmJihlW3RdPXRoaXMuX3N1YlBhcmFtcy5zbGljZShyLGkpKX1yZXR1cm4gZX0sZS5wcm90b3R5cGUuYWRkRGlnaXQ9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoISh0aGlzLl9yZWplY3REaWdpdHN8fCEodD10aGlzLl9kaWdpdElzU3ViP3RoaXMuX3N1YlBhcmFtc0xlbmd0aDp0aGlzLmxlbmd0aCl8fHRoaXMuX2RpZ2l0SXNTdWImJnRoaXMuX3JlamVjdFN1YkRpZ2l0cykpe3ZhciBpPXRoaXMuX2RpZ2l0SXNTdWI/dGhpcy5fc3ViUGFyYW1zOnRoaXMucGFyYW1zLG49aVt0LTFdO2lbdC0xXT1+bj9NYXRoLm1pbigxMCpuK2Uscik6ZX19LGV9KCk7dC5QYXJhbXM9aX0sNTc0MTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkFkZG9uTWFuYWdlcj12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7dGhpcy5fYWRkb25zPVtdfXJldHVybiBlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMuX2FkZG9ucy5sZW5ndGgtMTtlPj0wO2UtLSl0aGlzLl9hZGRvbnNbZV0uaW5zdGFuY2UuZGlzcG9zZSgpfSxlLnByb3RvdHlwZS5sb2FkQWRkb249ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLGk9e2luc3RhbmNlOnQsZGlzcG9zZTp0LmRpc3Bvc2UsaXNEaXNwb3NlZDohMX07dGhpcy5fYWRkb25zLnB1c2goaSksdC5kaXNwb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHIuX3dyYXBwZWRBZGRvbkRpc3Bvc2UoaSl9LHQuYWN0aXZhdGUoZSl9LGUucHJvdG90eXBlLl93cmFwcGVkQWRkb25EaXNwb3NlPWZ1bmN0aW9uKGUpe2lmKCFlLmlzRGlzcG9zZWQpe2Zvcih2YXIgdD0tMSxyPTA7cjx0aGlzLl9hZGRvbnMubGVuZ3RoO3IrKylpZih0aGlzLl9hZGRvbnNbcl09PT1lKXt0PXI7YnJlYWt9aWYoLTE9PT10KXRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IGRpc3Bvc2UgYW4gYWRkb24gdGhhdCBoYXMgbm90IGJlZW4gbG9hZGVkIik7ZS5pc0Rpc3Bvc2VkPSEwLGUuZGlzcG9zZS5hcHBseShlLmluc3RhbmNlKSx0aGlzLl9hZGRvbnMuc3BsaWNlKHQsMSl9fSxlfSgpO3QuQWRkb25NYW5hZ2VyPXJ9LDg3NzE6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkJ1ZmZlckFwaVZpZXc9dm9pZCAwO3ZhciBpPXIoMzc4NSksbj1yKDUxMSksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt0aGlzLl9idWZmZXI9ZSx0aGlzLnR5cGU9dH1yZXR1cm4gZS5wcm90b3R5cGUuaW5pdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYnVmZmVyPWUsdGhpc30sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJjdXJzb3JZIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J1ZmZlci55fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiY3Vyc29yWCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIueH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZpZXdwb3J0WSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIueWRpc3B9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJiYXNlWSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9idWZmZXIueWJhc2V9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYnVmZmVyLmxpbmVzLmxlbmd0aH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5nZXRMaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX2J1ZmZlci5saW5lcy5nZXQoZSk7aWYodClyZXR1cm4gbmV3IGkuQnVmZmVyTGluZUFwaVZpZXcodCl9LGUucHJvdG90eXBlLmdldE51bGxDZWxsPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBuLkNlbGxEYXRhfSxlfSgpO3QuQnVmZmVyQXBpVmlldz1vfSwzNzg1OihlLHQscik9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJMaW5lQXBpVmlldz12b2lkIDA7dmFyIGk9cig1MTEpLG49ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2xpbmU9ZX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJpc1dyYXBwZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZS5pc1dyYXBwZWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJsZW5ndGgiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbGluZS5sZW5ndGh9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0Q2VsbD1mdW5jdGlvbihlLHQpe2lmKCEoZTwwfHxlPj10aGlzLl9saW5lLmxlbmd0aCkpcmV0dXJuIHQ/KHRoaXMuX2xpbmUubG9hZENlbGwoZSx0KSx0KTp0aGlzLl9saW5lLmxvYWRDZWxsKGUsbmV3IGkuQ2VsbERhdGEpfSxlLnByb3RvdHlwZS50cmFuc2xhdGVUb1N0cmluZz1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRoaXMuX2xpbmUudHJhbnNsYXRlVG9TdHJpbmcoZSx0LHIpfSxlfSgpO3QuQnVmZmVyTGluZUFwaVZpZXc9bn0sODI4NTooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQnVmZmVyTmFtZXNwYWNlQXBpPXZvaWQgMDt2YXIgaT1yKDg3NzEpLG49cig4NDYwKSxvPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD10aGlzO3RoaXMuX2NvcmU9ZSx0aGlzLl9vbkJ1ZmZlckNoYW5nZT1uZXcgbi5FdmVudEVtaXR0ZXIsdGhpcy5fbm9ybWFsPW5ldyBpLkJ1ZmZlckFwaVZpZXcodGhpcy5fY29yZS5idWZmZXJzLm5vcm1hbCwibm9ybWFsIiksdGhpcy5fYWx0ZXJuYXRlPW5ldyBpLkJ1ZmZlckFwaVZpZXcodGhpcy5fY29yZS5idWZmZXJzLmFsdCwiYWx0ZXJuYXRlIiksdGhpcy5fY29yZS5idWZmZXJzLm9uQnVmZmVyQWN0aXZhdGUoKGZ1bmN0aW9uKCl7cmV0dXJuIHQuX29uQnVmZmVyQ2hhbmdlLmZpcmUodC5hY3RpdmUpfSkpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uQnVmZmVyQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uQnVmZmVyQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlIix7Z2V0OmZ1bmN0aW9uKCl7aWYodGhpcy5fY29yZS5idWZmZXJzLmFjdGl2ZT09PXRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwpcmV0dXJuIHRoaXMubm9ybWFsO2lmKHRoaXMuX2NvcmUuYnVmZmVycy5hY3RpdmU9PT10aGlzLl9jb3JlLmJ1ZmZlcnMuYWx0KXJldHVybiB0aGlzLmFsdGVybmF0ZTt0aHJvdyBuZXcgRXJyb3IoIkFjdGl2ZSBidWZmZXIgaXMgbmVpdGhlciBub3JtYWwgbm9yIGFsdGVybmF0ZSIpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwibm9ybWFsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX25vcm1hbC5pbml0KHRoaXMuX2NvcmUuYnVmZmVycy5ub3JtYWwpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWx0ZXJuYXRlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FsdGVybmF0ZS5pbml0KHRoaXMuX2NvcmUuYnVmZmVycy5hbHQpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGV9KCk7dC5CdWZmZXJOYW1lc3BhY2VBcGk9b30sNzk3NTooZSx0KT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LlBhcnNlckFwaT12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2NvcmU9ZX1yZXR1cm4gZS5wcm90b3R5cGUucmVnaXN0ZXJDc2lIYW5kbGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuX2NvcmUucmVnaXN0ZXJDc2lIYW5kbGVyKGUsKGZ1bmN0aW9uKGUpe3JldHVybiB0KGUudG9BcnJheSgpKX0pKX0sZS5wcm90b3R5cGUuYWRkQ3NpSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnJlZ2lzdGVyQ3NpSGFuZGxlcihlLHQpfSxlLnByb3RvdHlwZS5yZWdpc3RlckRjc0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckRjc0hhbmRsZXIoZSwoZnVuY3Rpb24oZSxyKXtyZXR1cm4gdChlLHIudG9BcnJheSgpKX0pKX0sZS5wcm90b3R5cGUuYWRkRGNzSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnJlZ2lzdGVyRGNzSGFuZGxlcihlLHQpfSxlLnByb3RvdHlwZS5yZWdpc3RlckVzY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29yZS5yZWdpc3RlckVzY0hhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUuYWRkRXNjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnJlZ2lzdGVyRXNjSGFuZGxlcihlLHQpfSxlLnByb3RvdHlwZS5yZWdpc3Rlck9zY0hhbmRsZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5fY29yZS5yZWdpc3Rlck9zY0hhbmRsZXIoZSx0KX0sZS5wcm90b3R5cGUuYWRkT3NjSGFuZGxlcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnJlZ2lzdGVyT3NjSGFuZGxlcihlLHQpfSxlfSgpO3QuUGFyc2VyQXBpPXJ9LDcwOTA6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Vbmljb2RlQXBpPXZvaWQgMDt2YXIgcj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fY29yZT1lfXJldHVybiBlLnByb3RvdHlwZS5yZWdpc3Rlcj1mdW5jdGlvbihlKXt0aGlzLl9jb3JlLnVuaWNvZGVTZXJ2aWNlLnJlZ2lzdGVyKGUpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZlcnNpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UudmVyc2lvbnN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhY3RpdmVWZXJzaW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UuYWN0aXZlVmVyc2lvbn0sc2V0OmZ1bmN0aW9uKGUpe3RoaXMuX2NvcmUudW5pY29kZVNlcnZpY2UuYWN0aXZlVmVyc2lvbj1lfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGV9KCk7dC5Vbmljb2RlQXBpPXJ9LDc0NDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5CdWZmZXJTZXJ2aWNlPXQuTUlOSU1VTV9ST1dTPXQuTUlOSU1VTV9DT0xTPXZvaWQgMDt2YXIgYT1yKDI1ODUpLGM9cig1Mjk1KSxsPXIoODQ2MCksaD1yKDg0NCk7dC5NSU5JTVVNX0NPTFM9Mix0Lk1JTklNVU1fUk9XUz0xO3ZhciB1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHIocil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl9vcHRpb25zU2VydmljZT1yLGkuaXNVc2VyU2Nyb2xsaW5nPSExLGkuX29uUmVzaXplPW5ldyBsLkV2ZW50RW1pdHRlcixpLl9vblNjcm9sbD1uZXcgbC5FdmVudEVtaXR0ZXIsaS5jb2xzPU1hdGgubWF4KHIucmF3T3B0aW9ucy5jb2xzfHwwLHQuTUlOSU1VTV9DT0xTKSxpLnJvd3M9TWF0aC5tYXgoci5yYXdPcHRpb25zLnJvd3N8fDAsdC5NSU5JTVVNX1JPV1MpLGkuYnVmZmVycz1uZXcgYy5CdWZmZXJTZXQocixpKSxpfXJldHVybiBuKHIsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLCJvblJlc2l6ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblJlc2l6ZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoci5wcm90b3R5cGUsIm9uU2Nyb2xsIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uU2Nyb2xsLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSwiYnVmZmVyIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVycy5hY3RpdmV9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksci5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe2UucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKSx0aGlzLmJ1ZmZlcnMuZGlzcG9zZSgpfSxyLnByb3RvdHlwZS5yZXNpemU9ZnVuY3Rpb24oZSx0KXt0aGlzLmNvbHM9ZSx0aGlzLnJvd3M9dCx0aGlzLmJ1ZmZlcnMucmVzaXplKGUsdCksdGhpcy5idWZmZXJzLnNldHVwVGFiU3RvcHModGhpcy5jb2xzKSx0aGlzLl9vblJlc2l6ZS5maXJlKHtjb2xzOmUscm93czp0fSl9LHIucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5idWZmZXJzLnJlc2V0KCksdGhpcy5pc1VzZXJTY3JvbGxpbmc9ITF9LHIucHJvdG90eXBlLnNjcm9sbD1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXQmJih0PSExKTt2YXIgcixpPXRoaXMuYnVmZmVyOyhyPXRoaXMuX2NhY2hlZEJsYW5rTGluZSkmJnIubGVuZ3RoPT09dGhpcy5jb2xzJiZyLmdldEZnKDApPT09ZS5mZyYmci5nZXRCZygwKT09PWUuYmd8fChyPWkuZ2V0QmxhbmtMaW5lKGUsdCksdGhpcy5fY2FjaGVkQmxhbmtMaW5lPXIpLHIuaXNXcmFwcGVkPXQ7dmFyIG49aS55YmFzZStpLnNjcm9sbFRvcCxvPWkueWJhc2UraS5zY3JvbGxCb3R0b207aWYoMD09PWkuc2Nyb2xsVG9wKXt2YXIgcz1pLmxpbmVzLmlzRnVsbDtvPT09aS5saW5lcy5sZW5ndGgtMT9zP2kubGluZXMucmVjeWNsZSgpLmNvcHlGcm9tKHIpOmkubGluZXMucHVzaChyLmNsb25lKCkpOmkubGluZXMuc3BsaWNlKG8rMSwwLHIuY2xvbmUoKSkscz90aGlzLmlzVXNlclNjcm9sbGluZyYmKGkueWRpc3A9TWF0aC5tYXgoaS55ZGlzcC0xLDApKTooaS55YmFzZSsrLHRoaXMuaXNVc2VyU2Nyb2xsaW5nfHxpLnlkaXNwKyspfWVsc2V7dmFyIGE9by1uKzE7aS5saW5lcy5zaGlmdEVsZW1lbnRzKG4rMSxhLTEsLTEpLGkubGluZXMuc2V0KG8sci5jbG9uZSgpKX10aGlzLmlzVXNlclNjcm9sbGluZ3x8KGkueWRpc3A9aS55YmFzZSksdGhpcy5fb25TY3JvbGwuZmlyZShpLnlkaXNwKX0sci5wcm90b3R5cGUuc2Nyb2xsTGluZXM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMuYnVmZmVyO2lmKGU8MCl7aWYoMD09PWkueWRpc3ApcmV0dXJuO3RoaXMuaXNVc2VyU2Nyb2xsaW5nPSEwfWVsc2UgZStpLnlkaXNwPj1pLnliYXNlJiYodGhpcy5pc1VzZXJTY3JvbGxpbmc9ITEpO3ZhciBuPWkueWRpc3A7aS55ZGlzcD1NYXRoLm1heChNYXRoLm1pbihpLnlkaXNwK2UsaS55YmFzZSksMCksbiE9PWkueWRpc3AmJih0fHx0aGlzLl9vblNjcm9sbC5maXJlKGkueWRpc3ApKX0sci5wcm90b3R5cGUuc2Nyb2xsUGFnZXM9ZnVuY3Rpb24oZSl7dGhpcy5zY3JvbGxMaW5lcyhlKih0aGlzLnJvd3MtMSkpfSxyLnByb3RvdHlwZS5zY3JvbGxUb1RvcD1mdW5jdGlvbigpe3RoaXMuc2Nyb2xsTGluZXMoLXRoaXMuYnVmZmVyLnlkaXNwKX0sci5wcm90b3R5cGUuc2Nyb2xsVG9Cb3R0b209ZnVuY3Rpb24oKXt0aGlzLnNjcm9sbExpbmVzKHRoaXMuYnVmZmVyLnliYXNlLXRoaXMuYnVmZmVyLnlkaXNwKX0sci5wcm90b3R5cGUuc2Nyb2xsVG9MaW5lPWZ1bmN0aW9uKGUpe3ZhciB0PWUtdGhpcy5idWZmZXIueWRpc3A7MCE9PXQmJnRoaXMuc2Nyb2xsTGluZXModCl9LG8oW3MoMCxhLklPcHRpb25zU2VydmljZSldLHIpfShoLkRpc3Bvc2FibGUpO3QuQnVmZmVyU2VydmljZT11fSw3OTk0OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ2hhcnNldFNlcnZpY2U9dm9pZCAwO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZ2xldmVsPTAsdGhpcy5fY2hhcnNldHM9W119cmV0dXJuIGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5jaGFyc2V0PXZvaWQgMCx0aGlzLl9jaGFyc2V0cz1bXSx0aGlzLmdsZXZlbD0wfSxlLnByb3RvdHlwZS5zZXRnTGV2ZWw9ZnVuY3Rpb24oZSl7dGhpcy5nbGV2ZWw9ZSx0aGlzLmNoYXJzZXQ9dGhpcy5fY2hhcnNldHNbZV19LGUucHJvdG90eXBlLnNldGdDaGFyc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5fY2hhcnNldHNbZV09dCx0aGlzLmdsZXZlbD09PWUmJih0aGlzLmNoYXJzZXQ9dCl9LGV9KCk7dC5DaGFyc2V0U2VydmljZT1yfSwxNzUzOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX0sbz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuQ29yZU1vdXNlU2VydmljZT12b2lkIDA7dmFyIHM9cigyNTg1KSxhPXIoODQ2MCksYz17Tk9ORTp7ZXZlbnRzOjAscmVzdHJpY3Q6ZnVuY3Rpb24oKXtyZXR1cm4hMX19LFgxMDp7ZXZlbnRzOjEscmVzdHJpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIDQhPT1lLmJ1dHRvbiYmMT09PWUuYWN0aW9uJiYoZS5jdHJsPSExLGUuYWx0PSExLGUuc2hpZnQ9ITEsITApfX0sVlQyMDA6e2V2ZW50czoxOSxyZXN0cmljdDpmdW5jdGlvbihlKXtyZXR1cm4gMzIhPT1lLmFjdGlvbn19LERSQUc6e2V2ZW50czoyMyxyZXN0cmljdDpmdW5jdGlvbihlKXtyZXR1cm4gMzIhPT1lLmFjdGlvbnx8MyE9PWUuYnV0dG9ufX0sQU5ZOntldmVudHM6MzEscmVzdHJpY3Q6ZnVuY3Rpb24oZSl7cmV0dXJuITB9fX07ZnVuY3Rpb24gbChlLHQpe3ZhciByPShlLmN0cmw/MTY6MCl8KGUuc2hpZnQ/NDowKXwoZS5hbHQ/ODowKTtyZXR1cm4gND09PWUuYnV0dG9uPyhyfD02NCxyfD1lLmFjdGlvbik6KHJ8PTMmZS5idXR0b24sNCZlLmJ1dHRvbiYmKHJ8PTY0KSw4JmUuYnV0dG9uJiYocnw9MTI4KSwzMj09PWUuYWN0aW9uP3J8PTMyOjAhPT1lLmFjdGlvbnx8dHx8KHJ8PTMpKSxyfXZhciBoPVN0cmluZy5mcm9tQ2hhckNvZGUsdT17REVGQVVMVDpmdW5jdGlvbihlKXt2YXIgdD1bbChlLCExKSszMixlLmNvbCszMixlLnJvdyszMl07cmV0dXJuIHRbMF0+MjU1fHx0WzFdPjI1NXx8dFsyXT4yNTU/IiI6IhtbTSIraCh0WzBdKStoKHRbMV0pK2godFsyXSl9LFNHUjpmdW5jdGlvbihlKXt2YXIgdD0wPT09ZS5hY3Rpb24mJjQhPT1lLmJ1dHRvbj8ibSI6Ik0iO3JldHVybiIbWzwiK2woZSwhMCkrIjsiK2UuY29sKyI7IitlLnJvdyt0fX0sZj1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0KXt2YXIgcixpLG4sczt0aGlzLl9idWZmZXJTZXJ2aWNlPWUsdGhpcy5fY29yZVNlcnZpY2U9dCx0aGlzLl9wcm90b2NvbHM9e30sdGhpcy5fZW5jb2RpbmdzPXt9LHRoaXMuX2FjdGl2ZVByb3RvY29sPSIiLHRoaXMuX2FjdGl2ZUVuY29kaW5nPSIiLHRoaXMuX29uUHJvdG9jb2xDaGFuZ2U9bmV3IGEuRXZlbnRFbWl0dGVyLHRoaXMuX2xhc3RFdmVudD1udWxsO3RyeXtmb3IodmFyIGw9byhPYmplY3Qua2V5cyhjKSksaD1sLm5leHQoKTshaC5kb25lO2g9bC5uZXh0KCkpe3ZhciBmPWgudmFsdWU7dGhpcy5hZGRQcm90b2NvbChmLGNbZl0pfX1jYXRjaChlKXtyPXtlcnJvcjplfX1maW5hbGx5e3RyeXtoJiYhaC5kb25lJiYoaT1sLnJldHVybikmJmkuY2FsbChsKX1maW5hbGx5e2lmKHIpdGhyb3cgci5lcnJvcn19dHJ5e2Zvcih2YXIgXz1vKE9iamVjdC5rZXlzKHUpKSxkPV8ubmV4dCgpOyFkLmRvbmU7ZD1fLm5leHQoKSl7dmFyIHA9ZC52YWx1ZTt0aGlzLmFkZEVuY29kaW5nKHAsdVtwXSl9fWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2QmJiFkLmRvbmUmJihzPV8ucmV0dXJuKSYmcy5jYWxsKF8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX10aGlzLnJlc2V0KCl9cmV0dXJuIGUucHJvdG90eXBlLmFkZFByb3RvY29sPWZ1bmN0aW9uKGUsdCl7dGhpcy5fcHJvdG9jb2xzW2VdPXR9LGUucHJvdG90eXBlLmFkZEVuY29kaW5nPWZ1bmN0aW9uKGUsdCl7dGhpcy5fZW5jb2RpbmdzW2VdPXR9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwiYWN0aXZlUHJvdG9jb2wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aXZlUHJvdG9jb2x9LHNldDpmdW5jdGlvbihlKXtpZighdGhpcy5fcHJvdG9jb2xzW2VdKXRocm93IG5ldyBFcnJvcigndW5rbm93biBwcm90b2NvbCAiJytlKyciJyk7dGhpcy5fYWN0aXZlUHJvdG9jb2w9ZSx0aGlzLl9vblByb3RvY29sQ2hhbmdlLmZpcmUodGhpcy5fcHJvdG9jb2xzW2VdLmV2ZW50cyl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhcmVNb3VzZUV2ZW50c0FjdGl2ZSIse2dldDpmdW5jdGlvbigpe3JldHVybiAwIT09dGhpcy5fcHJvdG9jb2xzW3RoaXMuX2FjdGl2ZVByb3RvY29sXS5ldmVudHN9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhY3RpdmVFbmNvZGluZyIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hY3RpdmVFbmNvZGluZ30sc2V0OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9lbmNvZGluZ3NbZV0pdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIGVuY29kaW5nICInK2UrJyInKTt0aGlzLl9hY3RpdmVFbmNvZGluZz1lfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5hY3RpdmVQcm90b2NvbD0iTk9ORSIsdGhpcy5hY3RpdmVFbmNvZGluZz0iREVGQVVMVCIsdGhpcy5fbGFzdEV2ZW50PW51bGx9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSwib25Qcm90b2NvbENoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vblByb3RvY29sQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnRyaWdnZXJNb3VzZUV2ZW50PWZ1bmN0aW9uKGUpe2lmKGUuY29sPDB8fGUuY29sPj10aGlzLl9idWZmZXJTZXJ2aWNlLmNvbHN8fGUucm93PDB8fGUucm93Pj10aGlzLl9idWZmZXJTZXJ2aWNlLnJvd3MpcmV0dXJuITE7aWYoND09PWUuYnV0dG9uJiYzMj09PWUuYWN0aW9uKXJldHVybiExO2lmKDM9PT1lLmJ1dHRvbiYmMzIhPT1lLmFjdGlvbilyZXR1cm4hMTtpZig0IT09ZS5idXR0b24mJigyPT09ZS5hY3Rpb258fDM9PT1lLmFjdGlvbikpcmV0dXJuITE7aWYoZS5jb2wrKyxlLnJvdysrLDMyPT09ZS5hY3Rpb24mJnRoaXMuX2xhc3RFdmVudCYmdGhpcy5fY29tcGFyZUV2ZW50cyh0aGlzLl9sYXN0RXZlbnQsZSkpcmV0dXJuITE7aWYoIXRoaXMuX3Byb3RvY29sc1t0aGlzLl9hY3RpdmVQcm90b2NvbF0ucmVzdHJpY3QoZSkpcmV0dXJuITE7dmFyIHQ9dGhpcy5fZW5jb2RpbmdzW3RoaXMuX2FjdGl2ZUVuY29kaW5nXShlKTtyZXR1cm4gdCYmKCJERUZBVUxUIj09PXRoaXMuX2FjdGl2ZUVuY29kaW5nP3RoaXMuX2NvcmVTZXJ2aWNlLnRyaWdnZXJCaW5hcnlFdmVudCh0KTp0aGlzLl9jb3JlU2VydmljZS50cmlnZ2VyRGF0YUV2ZW50KHQsITApKSx0aGlzLl9sYXN0RXZlbnQ9ZSwhMH0sZS5wcm90b3R5cGUuZXhwbGFpbkV2ZW50cz1mdW5jdGlvbihlKXtyZXR1cm57ZG93bjohISgxJmUpLHVwOiEhKDImZSksZHJhZzohISg0JmUpLG1vdmU6ISEoOCZlKSx3aGVlbDohISgxNiZlKX19LGUucHJvdG90eXBlLl9jb21wYXJlRXZlbnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUuY29sPT09dC5jb2wmJmUucm93PT09dC5yb3cmJmUuYnV0dG9uPT09dC5idXR0b24mJmUuYWN0aW9uPT09dC5hY3Rpb24mJmUuY3RybD09PXQuY3RybCYmZS5hbHQ9PT10LmFsdCYmZS5zaGlmdD09PXQuc2hpZnR9LGkoW24oMCxzLklCdWZmZXJTZXJ2aWNlKSxuKDEscy5JQ29yZVNlcnZpY2UpXSxlKX0oKTt0LkNvcmVNb3VzZVNlcnZpY2U9Zn0sNjk3NTpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30scz10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fTtPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5Db3JlU2VydmljZT12b2lkIDA7dmFyIGE9cigyNTg1KSxjPXIoODQ2MCksbD1yKDE0MzkpLGg9cig4NDQpLHU9T2JqZWN0LmZyZWV6ZSh7aW5zZXJ0TW9kZTohMX0pLGY9T2JqZWN0LmZyZWV6ZSh7YXBwbGljYXRpb25DdXJzb3JLZXlzOiExLGFwcGxpY2F0aW9uS2V5cGFkOiExLGJyYWNrZXRlZFBhc3RlTW9kZTohMSxvcmlnaW46ITEscmV2ZXJzZVdyYXBhcm91bmQ6ITEsc2VuZEZvY3VzOiExLHdyYXBhcm91bmQ6ITB9KSxfPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyLGksbil7dmFyIG89ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLl9idWZmZXJTZXJ2aWNlPXIsby5fbG9nU2VydmljZT1pLG8uX29wdGlvbnNTZXJ2aWNlPW4sby5pc0N1cnNvckluaXRpYWxpemVkPSExLG8uaXNDdXJzb3JIaWRkZW49ITEsby5fb25EYXRhPW8ucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxvLl9vblVzZXJJbnB1dD1vLnJlZ2lzdGVyKG5ldyBjLkV2ZW50RW1pdHRlciksby5fb25CaW5hcnk9by5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLG8uX3Njcm9sbFRvQm90dG9tPXQsby5yZWdpc3Rlcih7ZGlzcG9zZTpmdW5jdGlvbigpe3JldHVybiBvLl9zY3JvbGxUb0JvdHRvbT12b2lkIDB9fSksby5tb2Rlcz0oMCxsLmNsb25lKSh1KSxvLmRlY1ByaXZhdGVNb2Rlcz0oMCxsLmNsb25lKShmKSxvfXJldHVybiBuKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkRhdGEiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EYXRhLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSwib25Vc2VySW5wdXQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25Vc2VySW5wdXQuZXZlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLCJvbkJpbmFyeSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkJpbmFyeS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMubW9kZXM9KDAsbC5jbG9uZSkodSksdGhpcy5kZWNQcml2YXRlTW9kZXM9KDAsbC5jbG9uZSkoZil9LHQucHJvdG90eXBlLnRyaWdnZXJEYXRhRXZlbnQ9ZnVuY3Rpb24oZSx0KXtpZih2b2lkIDA9PT10JiYodD0hMSksIXRoaXMuX29wdGlvbnNTZXJ2aWNlLnJhd09wdGlvbnMuZGlzYWJsZVN0ZGluKXt2YXIgcj10aGlzLl9idWZmZXJTZXJ2aWNlLmJ1ZmZlcjtyLnliYXNlIT09ci55ZGlzcCYmdGhpcy5fc2Nyb2xsVG9Cb3R0b20oKSx0JiZ0aGlzLl9vblVzZXJJbnB1dC5maXJlKCksdGhpcy5fbG9nU2VydmljZS5kZWJ1Zygnc2VuZGluZyBkYXRhICInK2UrJyInLChmdW5jdGlvbigpe3JldHVybiBlLnNwbGl0KCIiKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJDb2RlQXQoMCl9KSl9KSksdGhpcy5fb25EYXRhLmZpcmUoZSl9fSx0LnByb3RvdHlwZS50cmlnZ2VyQmluYXJ5RXZlbnQ9ZnVuY3Rpb24oZSl7dGhpcy5fb3B0aW9uc1NlcnZpY2UucmF3T3B0aW9ucy5kaXNhYmxlU3RkaW58fCh0aGlzLl9sb2dTZXJ2aWNlLmRlYnVnKCdzZW5kaW5nIGJpbmFyeSAiJytlKyciJywoZnVuY3Rpb24oKXtyZXR1cm4gZS5zcGxpdCgiIikubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGFyQ29kZUF0KDApfSkpfSkpLHRoaXMuX29uQmluYXJ5LmZpcmUoZSkpfSxvKFtzKDEsYS5JQnVmZmVyU2VydmljZSkscygyLGEuSUxvZ1NlcnZpY2UpLHMoMyxhLklPcHRpb25zU2VydmljZSldLHQpfShoLkRpc3Bvc2FibGUpO3QuQ29yZVNlcnZpY2U9X30sOTA3NDpmdW5jdGlvbihlLHQscil7dmFyIGksbj10aGlzJiZ0aGlzLl9fZXh0ZW5kc3x8KGk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaT1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIgaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxyKSYmKGVbcl09dFtyXSl9LGkoZSx0KX0sZnVuY3Rpb24oZSx0KXtpZigiZnVuY3Rpb24iIT10eXBlb2YgdCYmbnVsbCE9PXQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSAiK1N0cmluZyh0KSsiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGwiKTtmdW5jdGlvbiByKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihyLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgcil9KSxvPXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsdCl7dmFyIHIsaSxuLG8scz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZuWzBdKXRocm93IG5bMV07cmV0dXJuIG5bMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gbz17bmV4dDphKDApLHRocm93OmEoMSkscmV0dXJuOmEoMil9LCJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJihvW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG87ZnVuY3Rpb24gYShvKXtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKG8pe2lmKHIpdGhyb3cgbmV3IFR5cGVFcnJvcigiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLiIpO2Zvcig7czspdHJ5e2lmKHI9MSxpJiYobj0yJm9bMF0/aS5yZXR1cm46b1swXT9pLnRocm93fHwoKG49aS5yZXR1cm4pJiZuLmNhbGwoaSksMCk6aS5uZXh0KSYmIShuPW4uY2FsbChpLG9bMV0pKS5kb25lKXJldHVybiBuO3N3aXRjaChpPTAsbiYmKG89WzImb1swXSxuLnZhbHVlXSksb1swXSl7Y2FzZSAwOmNhc2UgMTpuPW87YnJlYWs7Y2FzZSA0OnJldHVybiBzLmxhYmVsKysse3ZhbHVlOm9bMV0sZG9uZTohMX07Y2FzZSA1OnMubGFiZWwrKyxpPW9bMV0sbz1bMF07Y29udGludWU7Y2FzZSA3Om89cy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlO2RlZmF1bHQ6aWYoISgobj0obj1zLnRyeXMpLmxlbmd0aD4wJiZuW24ubGVuZ3RoLTFdKXx8NiE9PW9bMF0mJjIhPT1vWzBdKSl7cz0wO2NvbnRpbnVlfWlmKDM9PT1vWzBdJiYoIW58fG9bMV0+blswXSYmb1sxXTxuWzNdKSl7cy5sYWJlbD1vWzFdO2JyZWFrfWlmKDY9PT1vWzBdJiZzLmxhYmVsPG5bMV0pe3MubGFiZWw9blsxXSxuPW87YnJlYWt9aWYobiYmcy5sYWJlbDxuWzJdKXtzLmxhYmVsPW5bMl0scy5vcHMucHVzaChvKTticmVha31uWzJdJiZzLm9wcy5wb3AoKSxzLnRyeXMucG9wKCk7Y29udGludWV9bz10LmNhbGwoZSxzKX1jYXRjaChlKXtvPVs2LGVdLGk9MH1maW5hbGx5e3I9bj0wfWlmKDUmb1swXSl0aHJvdyBvWzFdO3JldHVybnt2YWx1ZTpvWzBdP29bMV06dm9pZCAwLGRvbmU6ITB9fShbbyxhXSl9fX0scz10aGlzJiZ0aGlzLl9fdmFsdWVzfHxmdW5jdGlvbihlKXt2YXIgdD0iZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuaXRlcmF0b3Iscj10JiZlW3RdLGk9MDtpZihyKXJldHVybiByLmNhbGwoZSk7aWYoZSYmIm51bWJlciI9PXR5cGVvZiBlLmxlbmd0aClyZXR1cm57bmV4dDpmdW5jdGlvbigpe3JldHVybiBlJiZpPj1lLmxlbmd0aCYmKGU9dm9pZCAwKSx7dmFsdWU6ZSYmZVtpKytdLGRvbmU6IWV9fX07dGhyb3cgbmV3IFR5cGVFcnJvcih0PyJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiI6IlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRGVjb3JhdGlvblNlcnZpY2U9dm9pZCAwO3ZhciBhPXIoODA1NSksYz1yKDg0NjApLGw9cig4NDQpLGg9cig2MTA2KSx1PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHQuX2RlY29yYXRpb25zPW5ldyBoLlNvcnRlZExpc3QoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm1hcmtlci5saW5lfSkpLHQuX29uRGVjb3JhdGlvblJlZ2lzdGVyZWQ9dC5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLHQuX29uRGVjb3JhdGlvblJlbW92ZWQ9dC5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLHR9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRGVjb3JhdGlvblJlZ2lzdGVyZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EZWNvcmF0aW9uUmVnaXN0ZXJlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsIm9uRGVjb3JhdGlvblJlbW92ZWQiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fb25EZWNvcmF0aW9uUmVtb3ZlZC5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImRlY29yYXRpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlY29yYXRpb25zLnZhbHVlcygpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlZ2lzdGVyRGVjb3JhdGlvbj1mdW5jdGlvbihlKXt2YXIgdD10aGlzO2lmKCFlLm1hcmtlci5pc0Rpc3Bvc2VkKXt2YXIgcj1uZXcgZihlKTtpZihyKXt2YXIgaT1yLm1hcmtlci5vbkRpc3Bvc2UoKGZ1bmN0aW9uKCl7cmV0dXJuIHIuZGlzcG9zZSgpfSkpO3Iub25EaXNwb3NlKChmdW5jdGlvbigpe3ImJih0Ll9kZWNvcmF0aW9ucy5kZWxldGUocikmJnQuX29uRGVjb3JhdGlvblJlbW92ZWQuZmlyZShyKSxpLmRpc3Bvc2UoKSl9KSksdGhpcy5fZGVjb3JhdGlvbnMuaW5zZXJ0KHIpLHRoaXMuX29uRGVjb3JhdGlvblJlZ2lzdGVyZWQuZmlyZShyKX1yZXR1cm4gcn19LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dmFyIGUsdDt0cnl7Zm9yKHZhciByPXModGhpcy5fZGVjb3JhdGlvbnMudmFsdWVzKCkpLGk9ci5uZXh0KCk7IWkuZG9uZTtpPXIubmV4dCgpKWkudmFsdWUuZGlzcG9zZSgpfWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLl9kZWNvcmF0aW9ucy5jbGVhcigpfSx0LnByb3RvdHlwZS5nZXREZWNvcmF0aW9uc0F0TGluZT1mdW5jdGlvbihlKXtyZXR1cm4gbyh0aGlzLChmdW5jdGlvbih0KXtyZXR1cm5bMix0aGlzLl9kZWNvcmF0aW9ucy5nZXRLZXlJdGVyYXRvcihlKV19KSl9LHQucHJvdG90eXBlLmdldERlY29yYXRpb25zQXRDZWxsPWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxuLGEsYyxsLGgsdSxmLF8sZCxwO3JldHVybiBvKHRoaXMsKGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6aT0wLG49MCxvLmxhYmVsPTE7Y2FzZSAxOm8udHJ5cy5wdXNoKFsxLDYsNyw4XSksYT1zKHRoaXMuX2RlY29yYXRpb25zLmdldEtleUl0ZXJhdG9yKHQpKSxjPWEubmV4dCgpLG8ubGFiZWw9MjtjYXNlIDI6cmV0dXJuIGMuZG9uZT9bMyw1XToobD1jLnZhbHVlLGk9bnVsbCE9PShfPWwub3B0aW9ucy54KSYmdm9pZCAwIT09Xz9fOjAsbj1pKyhudWxsIT09KGQ9bC5vcHRpb25zLndpZHRoKSYmdm9pZCAwIT09ZD9kOjEpLCEoZT49aSYmZTxuKXx8ciYmKG51bGwhPT0ocD1sLm9wdGlvbnMubGF5ZXIpJiZ2b2lkIDAhPT1wP3A6ImJvdHRvbSIpIT09cj9bMyw0XTpbNCxsXSk7Y2FzZSAzOm8uc2VudCgpLG8ubGFiZWw9NDtjYXNlIDQ6cmV0dXJuIGM9YS5uZXh0KCksWzMsMl07Y2FzZSA1OnJldHVyblszLDhdO2Nhc2UgNjpyZXR1cm4gaD1vLnNlbnQoKSx1PXtlcnJvcjpofSxbMyw4XTtjYXNlIDc6dHJ5e2MmJiFjLmRvbmUmJihmPWEucmV0dXJuKSYmZi5jYWxsKGEpfWZpbmFsbHl7aWYodSl0aHJvdyB1LmVycm9yfXJldHVybls3XTtjYXNlIDg6cmV0dXJuWzJdfX0pKX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3ZhciBlLHQ7dHJ5e2Zvcih2YXIgcj1zKHRoaXMuX2RlY29yYXRpb25zLnZhbHVlcygpKSxpPXIubmV4dCgpOyFpLmRvbmU7aT1yLm5leHQoKSl7dmFyIG49aS52YWx1ZTt0aGlzLl9vbkRlY29yYXRpb25SZW1vdmVkLmZpcmUobil9fWNhdGNoKHQpe2U9e2Vycm9yOnR9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJih0PXIucmV0dXJuKSYmdC5jYWxsKHIpfWZpbmFsbHl7aWYoZSl0aHJvdyBlLmVycm9yfX10aGlzLnJlc2V0KCl9LHR9KGwuRGlzcG9zYWJsZSk7dC5EZWNvcmF0aW9uU2VydmljZT11O3ZhciBmPWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIHI9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLm9wdGlvbnM9dCxyLmlzRGlzcG9zZWQ9ITEsci5vblJlbmRlckVtaXR0ZXI9ci5yZWdpc3RlcihuZXcgYy5FdmVudEVtaXR0ZXIpLHIub25SZW5kZXI9ci5vblJlbmRlckVtaXR0ZXIuZXZlbnQsci5fb25EaXNwb3NlPXIucmVnaXN0ZXIobmV3IGMuRXZlbnRFbWl0dGVyKSxyLm9uRGlzcG9zZT1yLl9vbkRpc3Bvc2UuZXZlbnQsci5fY2FjaGVkQmc9bnVsbCxyLl9jYWNoZWRGZz1udWxsLHIubWFya2VyPXQubWFya2VyLHIub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucyYmIXIub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbiYmKHIub3B0aW9ucy5vdmVydmlld1J1bGVyT3B0aW9ucy5wb3NpdGlvbj0iZnVsbCIpLHJ9cmV0dXJuIG4odCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImJhY2tncm91bmRDb2xvclJHQiIse2dldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fY2FjaGVkQmcmJih0aGlzLm9wdGlvbnMuYmFja2dyb3VuZENvbG9yP3RoaXMuX2NhY2hlZEJnPWEuY3NzLnRvQ29sb3IodGhpcy5vcHRpb25zLmJhY2tncm91bmRDb2xvcik6dGhpcy5fY2FjaGVkQmc9dm9pZCAwKSx0aGlzLl9jYWNoZWRCZ30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsImZvcmVncm91bmRDb2xvclJHQiIse2dldDpmdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy5fY2FjaGVkRmcmJih0aGlzLm9wdGlvbnMuZm9yZWdyb3VuZENvbG9yP3RoaXMuX2NhY2hlZEZnPWEuY3NzLnRvQ29sb3IodGhpcy5vcHRpb25zLmZvcmVncm91bmRDb2xvcik6dGhpcy5fY2FjaGVkRmc9dm9pZCAwKSx0aGlzLl9jYWNoZWRGZ30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5faXNEaXNwb3NlZHx8KHRoaXMuX2lzRGlzcG9zZWQ9ITAsdGhpcy5fb25EaXNwb3NlLmZpcmUoKSxlLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcykpfSx0fShsLkRpc3Bvc2FibGUpfSwzNzMwOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fZGVjb3JhdGV8fGZ1bmN0aW9uKGUsdCxyLGkpe3ZhciBuLG89YXJndW1lbnRzLmxlbmd0aCxzPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpOmk7aWYoIm9iamVjdCI9PXR5cGVvZiBSZWZsZWN0JiYiZnVuY3Rpb24iPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUoZSx0LHIsaSk7ZWxzZSBmb3IodmFyIGE9ZS5sZW5ndGgtMTthPj0wO2EtLSkobj1lW2FdKSYmKHM9KG88Mz9uKHMpOm8+Mz9uKHQscixzKTpuKHQscikpfHxzKTtyZXR1cm4gbz4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkodCxyLHMpLHN9LG49dGhpcyYmdGhpcy5fX3BhcmFtfHxmdW5jdGlvbihlLHQpe3JldHVybiBmdW5jdGlvbihyLGkpe3QocixpLGUpfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuRGlydHlSb3dTZXJ2aWNlPXZvaWQgMDt2YXIgbz1yKDI1ODUpLHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuX2J1ZmZlclNlcnZpY2U9ZSx0aGlzLmNsZWFyUmFuZ2UoKX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJzdGFydCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGFydH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsImVuZCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9lbmR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY2xlYXJSYW5nZT1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0PXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnksdGhpcy5fZW5kPXRoaXMuX2J1ZmZlclNlcnZpY2UuYnVmZmVyLnl9LGUucHJvdG90eXBlLm1hcmtEaXJ0eT1mdW5jdGlvbihlKXtlPHRoaXMuX3N0YXJ0P3RoaXMuX3N0YXJ0PWU6ZT50aGlzLl9lbmQmJih0aGlzLl9lbmQ9ZSl9LGUucHJvdG90eXBlLm1hcmtSYW5nZURpcnR5PWZ1bmN0aW9uKGUsdCl7aWYoZT50KXt2YXIgcj1lO2U9dCx0PXJ9ZTx0aGlzLl9zdGFydCYmKHRoaXMuX3N0YXJ0PWUpLHQ+dGhpcy5fZW5kJiYodGhpcy5fZW5kPXQpfSxlLnByb3RvdHlwZS5tYXJrQWxsRGlydHk9ZnVuY3Rpb24oKXt0aGlzLm1hcmtSYW5nZURpcnR5KDAsdGhpcy5fYnVmZmVyU2VydmljZS5yb3dzLTEpfSxpKFtuKDAsby5JQnVmZmVyU2VydmljZSldLGUpfSgpO3QuRGlydHlSb3dTZXJ2aWNlPXN9LDQzNDg6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX192YWx1ZXN8fGZ1bmN0aW9uKGUpe3ZhciB0PSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJlN5bWJvbC5pdGVyYXRvcixyPXQmJmVbdF0saT0wO2lmKHIpcmV0dXJuIHIuY2FsbChlKTtpZihlJiYibnVtYmVyIj09dHlwZW9mIGUubGVuZ3RoKXJldHVybntuZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIGUmJmk+PWUubGVuZ3RoJiYoZT12b2lkIDApLHt2YWx1ZTplJiZlW2krK10sZG9uZTohZX19fTt0aHJvdyBuZXcgVHlwZUVycm9yKHQ/Ik9iamVjdCBpcyBub3QgaXRlcmFibGUuIjoiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpfSxuPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30sbz10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCxyKXtpZihyfHwyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGksbj0wLG89dC5sZW5ndGg7bjxvO24rKykhaSYmbiBpbiB0fHwoaXx8KGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLG4pKSxpW25dPXRbbl0pO3JldHVybiBlLmNvbmNhdChpfHxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lkluc3RhbnRpYXRpb25TZXJ2aWNlPXQuU2VydmljZUNvbGxlY3Rpb249dm9pZCAwO3ZhciBzPXIoMjU4NSksYT1yKDgzNDMpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBlLHQscj1bXSxvPTA7bzxhcmd1bWVudHMubGVuZ3RoO28rKylyW29dPWFyZ3VtZW50c1tvXTt0aGlzLl9lbnRyaWVzPW5ldyBNYXA7dHJ5e2Zvcih2YXIgcz1pKHIpLGE9cy5uZXh0KCk7IWEuZG9uZTthPXMubmV4dCgpKXt2YXIgYz1uKGEudmFsdWUsMiksbD1jWzBdLGg9Y1sxXTt0aGlzLnNldChsLGgpfX1jYXRjaCh0KXtlPXtlcnJvcjp0fX1maW5hbGx5e3RyeXthJiYhYS5kb25lJiYodD1zLnJldHVybikmJnQuY2FsbChzKX1maW5hbGx5e2lmKGUpdGhyb3cgZS5lcnJvcn19fXJldHVybiBlLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj10aGlzLl9lbnRyaWVzLmdldChlKTtyZXR1cm4gdGhpcy5fZW50cmllcy5zZXQoZSx0KSxyfSxlLnByb3RvdHlwZS5mb3JFYWNoPWZ1bmN0aW9uKGUpe3RoaXMuX2VudHJpZXMuZm9yRWFjaCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gZShyLHQpfSkpfSxlLnByb3RvdHlwZS5oYXM9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VudHJpZXMuaGFzKGUpfSxlLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2VudHJpZXMuZ2V0KGUpfSxlfSgpO3QuU2VydmljZUNvbGxlY3Rpb249Yzt2YXIgbD1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9zZXJ2aWNlcz1uZXcgYyx0aGlzLl9zZXJ2aWNlcy5zZXQocy5JSW5zdGFudGlhdGlvblNlcnZpY2UsdGhpcyl9cmV0dXJuIGUucHJvdG90eXBlLnNldFNlcnZpY2U9ZnVuY3Rpb24oZSx0KXt0aGlzLl9zZXJ2aWNlcy5zZXQoZSx0KX0sZS5wcm90b3R5cGUuZ2V0U2VydmljZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2VydmljZXMuZ2V0KGUpfSxlLnByb3RvdHlwZS5jcmVhdGVJbnN0YW5jZT1mdW5jdGlvbihlKXtmb3IodmFyIHQscixzPVtdLGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXNbYy0xXT1hcmd1bWVudHNbY107dmFyIGw9KDAsYS5nZXRTZXJ2aWNlRGVwZW5kZW5jaWVzKShlKS5zb3J0KChmdW5jdGlvbihlLHQpe3JldHVybiBlLmluZGV4LXQuaW5kZXh9KSksaD1bXTt0cnl7Zm9yKHZhciB1PWkobCksZj11Lm5leHQoKTshZi5kb25lO2Y9dS5uZXh0KCkpe3ZhciBfPWYudmFsdWUsZD10aGlzLl9zZXJ2aWNlcy5nZXQoXy5pZCk7aWYoIWQpdGhyb3cgbmV3IEVycm9yKCJbY3JlYXRlSW5zdGFuY2VdICIrZS5uYW1lKyIgZGVwZW5kcyBvbiBVTktOT1dOIHNlcnZpY2UgIitfLmlkKyIuIik7aC5wdXNoKGQpfX1jYXRjaChlKXt0PXtlcnJvcjplfX1maW5hbGx5e3RyeXtmJiYhZi5kb25lJiYocj11LnJldHVybikmJnIuY2FsbCh1KX1maW5hbGx5e2lmKHQpdGhyb3cgdC5lcnJvcn19dmFyIHA9bC5sZW5ndGg+MD9sWzBdLmluZGV4OnMubGVuZ3RoO2lmKHMubGVuZ3RoIT09cCl0aHJvdyBuZXcgRXJyb3IoIltjcmVhdGVJbnN0YW5jZV0gRmlyc3Qgc2VydmljZSBkZXBlbmRlbmN5IG9mICIrZS5uYW1lKyIgYXQgcG9zaXRpb24gIisocCsxKSsiIGNvbmZsaWN0cyB3aXRoICIrcy5sZW5ndGgrIiBzdGF0aWMgYXJndW1lbnRzIik7cmV0dXJuIG5ldyhlLmJpbmQuYXBwbHkoZSxvKFt2b2lkIDBdLG4obyhvKFtdLG4ocyksITEpLG4oaCksITEpKSwhMSkpKX0sZX0oKTt0Lkluc3RhbnRpYXRpb25TZXJ2aWNlPWx9LDc4NjY6ZnVuY3Rpb24oZSx0LHIpe3ZhciBpPXRoaXMmJnRoaXMuX19kZWNvcmF0ZXx8ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIG4sbz1hcmd1bWVudHMubGVuZ3RoLHM9bzwzP3Q6bnVsbD09PWk/aT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQscik6aTtpZigib2JqZWN0Ij09dHlwZW9mIFJlZmxlY3QmJiJmdW5jdGlvbiI9PXR5cGVvZiBSZWZsZWN0LmRlY29yYXRlKXM9UmVmbGVjdC5kZWNvcmF0ZShlLHQscixpKTtlbHNlIGZvcih2YXIgYT1lLmxlbmd0aC0xO2E+PTA7YS0tKShuPWVbYV0pJiYocz0obzwzP24ocyk6bz4zP24odCxyLHMpOm4odCxyKSl8fHMpO3JldHVybiBvPjMmJnMmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LHIscyksc30sbj10aGlzJiZ0aGlzLl9fcGFyYW18fGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKHIsaSl7dChyLGksZSl9fSxvPXRoaXMmJnRoaXMuX19yZWFkfHxmdW5jdGlvbihlLHQpe3ZhciByPSJmdW5jdGlvbiI9PXR5cGVvZiBTeW1ib2wmJmVbU3ltYm9sLml0ZXJhdG9yXTtpZighcilyZXR1cm4gZTt2YXIgaSxuLG89ci5jYWxsKGUpLHM9W107dHJ5e2Zvcig7KHZvaWQgMD09PXR8fHQtLSA+MCkmJiEoaT1vLm5leHQoKSkuZG9uZTspcy5wdXNoKGkudmFsdWUpfWNhdGNoKGUpe249e2Vycm9yOmV9fWZpbmFsbHl7dHJ5e2kmJiFpLmRvbmUmJihyPW8ucmV0dXJuKSYmci5jYWxsKG8pfWZpbmFsbHl7aWYobil0aHJvdyBuLmVycm9yfX1yZXR1cm4gc30scz10aGlzJiZ0aGlzLl9fc3ByZWFkQXJyYXl8fGZ1bmN0aW9uKGUsdCxyKXtpZihyfHwyPT09YXJndW1lbnRzLmxlbmd0aClmb3IodmFyIGksbj0wLG89dC5sZW5ndGg7bjxvO24rKykhaSYmbiBpbiB0fHwoaXx8KGk9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCwwLG4pKSxpW25dPXRbbl0pO3JldHVybiBlLmNvbmNhdChpfHxBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0KSl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LkxvZ1NlcnZpY2U9dm9pZCAwO3ZhciBhPXIoMjU4NSksYz17ZGVidWc6YS5Mb2dMZXZlbEVudW0uREVCVUcsaW5mbzphLkxvZ0xldmVsRW51bS5JTkZPLHdhcm46YS5Mb2dMZXZlbEVudW0uV0FSTixlcnJvcjphLkxvZ0xldmVsRW51bS5FUlJPUixvZmY6YS5Mb2dMZXZlbEVudW0uT0ZGfSxsPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShlKXt2YXIgdD10aGlzO3RoaXMuX29wdGlvbnNTZXJ2aWNlPWUsdGhpcy5sb2dMZXZlbD1hLkxvZ0xldmVsRW51bS5PRkYsdGhpcy5fdXBkYXRlTG9nTGV2ZWwoKSx0aGlzLl9vcHRpb25zU2VydmljZS5vbk9wdGlvbkNoYW5nZSgoZnVuY3Rpb24oZSl7ImxvZ0xldmVsIj09PWUmJnQuX3VwZGF0ZUxvZ0xldmVsKCl9KSl9cmV0dXJuIGUucHJvdG90eXBlLl91cGRhdGVMb2dMZXZlbD1mdW5jdGlvbigpe3RoaXMubG9nTGV2ZWw9Y1t0aGlzLl9vcHRpb25zU2VydmljZS5yYXdPcHRpb25zLmxvZ0xldmVsXX0sZS5wcm90b3R5cGUuX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspImZ1bmN0aW9uIj09dHlwZW9mIGVbdF0mJihlW3RdPWVbdF0oKSl9LGUucHJvdG90eXBlLl9sb2c9ZnVuY3Rpb24oZSx0LHIpe3RoaXMuX2V2YWxMYXp5T3B0aW9uYWxQYXJhbXMociksZS5jYWxsLmFwcGx5KGUscyhbY29uc29sZSwieHRlcm0uanM6ICIrdF0sbyhyKSwhMSkpfSxlLnByb3RvdHlwZS5kZWJ1Zz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspdFtyLTFdPWFyZ3VtZW50c1tyXTt0aGlzLmxvZ0xldmVsPD1hLkxvZ0xldmVsRW51bS5ERUJVRyYmdGhpcy5fbG9nKGNvbnNvbGUubG9nLGUsdCl9LGUucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5sb2dMZXZlbDw9YS5Mb2dMZXZlbEVudW0uSU5GTyYmdGhpcy5fbG9nKGNvbnNvbGUuaW5mbyxlLHQpfSxlLnByb3RvdHlwZS53YXJuPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTE7cjxhcmd1bWVudHMubGVuZ3RoO3IrKyl0W3ItMV09YXJndW1lbnRzW3JdO3RoaXMubG9nTGV2ZWw8PWEuTG9nTGV2ZWxFbnVtLldBUk4mJnRoaXMuX2xvZyhjb25zb2xlLndhcm4sZSx0KX0sZS5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLHI9MTtyPGFyZ3VtZW50cy5sZW5ndGg7cisrKXRbci0xXT1hcmd1bWVudHNbcl07dGhpcy5sb2dMZXZlbDw9YS5Mb2dMZXZlbEVudW0uRVJST1ImJnRoaXMuX2xvZyhjb25zb2xlLmVycm9yLGUsdCl9LGkoW24oMCxhLklPcHRpb25zU2VydmljZSldLGUpfSgpO3QuTG9nU2VydmljZT1sfSw3MzAyOmZ1bmN0aW9uKGUsdCxyKXt2YXIgaT10aGlzJiZ0aGlzLl9fYXNzaWdufHxmdW5jdGlvbigpe3JldHVybiBpPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyPTEsaT1hcmd1bWVudHMubGVuZ3RoO3I8aTtyKyspZm9yKHZhciBuIGluIHQ9YXJndW1lbnRzW3JdKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LG4pJiYoZVtuXT10W25dKTtyZXR1cm4gZX0saS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0Lk9wdGlvbnNTZXJ2aWNlPXQuREVGQVVMVF9PUFRJT05TPXQuREVGQVVMVF9CRUxMX1NPVU5EPXZvaWQgMDt2YXIgbj1yKDg0NjApLG89cig2MTE0KTt0LkRFRkFVTFRfQkVMTF9TT1VORD0iZGF0YTphdWRpby9tcDM7YmFzZTY0LFNVUXpCQUFBQUFBQUkxUlRVMFVBQUFBUEFBQURUR0YyWmpVNExqTXlMakV3TkFBQUFBQUFBQUFBQUFBQS8vdFF4QUFEQjhBaFNteGhJSUVWQ1NpSnJEQ1FCVGN1M1VyQUl3VWRrUmdRYkZBWkMxQ1FFd1RKOW1qUnZCQTRVT0xEOG5LVk9XZmgrVWxLM3ovMTc3T1hyZk9kS2w3cHluM1hmLy9XcmV5VFJVb0FXZ0Jna09BR2JaSEJnRzFPRjZ6TTgyRFdiWmFVbU1CcHRnUWhHanN5WXFjOWFlOVhGejI4MDk0OE5NQldJbmxqeXpzTlJGTFBXZG5aR1dyZGREc2pLMXVudVNyVk45akpzSzhLdVF0UUN0TUJqQ0V0SW1JU2ROS0pPb3BJcEJGcE5TTWJJSENTUnBSUjVpYWtqVGl5ekxoY2hVVUJ3Q2d5S2l3ZUJ2LzdVc1FiZzhpc1ZOb01QTWpBQUFBMGdBQUFCRVZGR21ncUsvLy8vOWJQLzZYQ3lreEJUVVV6TGpFd01LcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXEiLHQuREVGQVVMVF9PUFRJT05TPXtjb2xzOjgwLHJvd3M6MjQsY3Vyc29yQmxpbms6ITEsY3Vyc29yU3R5bGU6ImJsb2NrIixjdXJzb3JXaWR0aDoxLGN1c3RvbUdseXBoczohMCxiZWxsU291bmQ6dC5ERUZBVUxUX0JFTExfU09VTkQsYmVsbFN0eWxlOiJub25lIixkcmF3Qm9sZFRleHRJbkJyaWdodENvbG9yczohMCxmYXN0U2Nyb2xsTW9kaWZpZXI6ImFsdCIsZmFzdFNjcm9sbFNlbnNpdGl2aXR5OjUsZm9udEZhbWlseToiY291cmllci1uZXcsIGNvdXJpZXIsIG1vbm9zcGFjZSIsZm9udFNpemU6MTUsZm9udFdlaWdodDoibm9ybWFsIixmb250V2VpZ2h0Qm9sZDoiYm9sZCIsbGluZUhlaWdodDoxLGxpbmtUb29sdGlwSG92ZXJEdXJhdGlvbjo1MDAsbGV0dGVyU3BhY2luZzowLGxvZ0xldmVsOiJpbmZvIixzY3JvbGxiYWNrOjFlMyxzY3JvbGxTZW5zaXRpdml0eToxLHNjcmVlblJlYWRlck1vZGU6ITEsbWFjT3B0aW9uSXNNZXRhOiExLG1hY09wdGlvbkNsaWNrRm9yY2VzU2VsZWN0aW9uOiExLG1pbmltdW1Db250cmFzdFJhdGlvOjEsZGlzYWJsZVN0ZGluOiExLGFsbG93UHJvcG9zZWRBcGk6ITAsYWxsb3dUcmFuc3BhcmVuY3k6ITEsdGFiU3RvcFdpZHRoOjgsdGhlbWU6e30scmlnaHRDbGlja1NlbGVjdHNXb3JkOm8uaXNNYWMscmVuZGVyZXJUeXBlOiJjYW52YXMiLHdpbmRvd09wdGlvbnM6e30sd2luZG93c01vZGU6ITEsd29yZFNlcGFyYXRvcjoiICgpW117fScsXCJgIixhbHRDbGlja01vdmVzQ3Vyc29yOiEwLGNvbnZlcnRFb2w6ITEsdGVybU5hbWU6Inh0ZXJtIixjYW5jZWxFdmVudHM6ITEsb3ZlcnZpZXdSdWxlcldpZHRoOnZvaWQgMH07dmFyIHM9WyJub3JtYWwiLCJib2xkIiwiMTAwIiwiMjAwIiwiMzAwIiwiNDAwIiwiNTAwIiwiNjAwIiwiNzAwIiwiODAwIiwiOTAwIl0sYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5fb25PcHRpb25DaGFuZ2U9bmV3IG4uRXZlbnRFbWl0dGVyO3ZhciByPWkoe30sdC5ERUZBVUxUX09QVElPTlMpO2Zvcih2YXIgbyBpbiBlKWlmKG8gaW4gcil0cnl7dmFyIHM9ZVtvXTtyW29dPXRoaXMuX3Nhbml0aXplQW5kVmFsaWRhdGVPcHRpb24obyxzKX1jYXRjaChlKXtjb25zb2xlLmVycm9yKGUpfXRoaXMucmF3T3B0aW9ucz1yLHRoaXMub3B0aW9ucz1pKHt9LHIpLHRoaXMuX3NldHVwT3B0aW9ucygpfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsIm9uT3B0aW9uQ2hhbmdlIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29uT3B0aW9uQ2hhbmdlLmV2ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9zZXR1cE9wdGlvbnM9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHI9ZnVuY3Rpb24ocil7aWYoIShyIGluIHQuREVGQVVMVF9PUFRJT05TKSl0aHJvdyBuZXcgRXJyb3IoJ05vIG9wdGlvbiB3aXRoIGtleSAiJytyKyciJyk7cmV0dXJuIGUucmF3T3B0aW9uc1tyXX0saT1mdW5jdGlvbihyLGkpe2lmKCEociBpbiB0LkRFRkFVTFRfT1BUSU9OUykpdGhyb3cgbmV3IEVycm9yKCdObyBvcHRpb24gd2l0aCBrZXkgIicrcisnIicpO2k9ZS5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbihyLGkpLGUucmF3T3B0aW9uc1tyXSE9PWkmJihlLnJhd09wdGlvbnNbcl09aSxlLl9vbk9wdGlvbkNoYW5nZS5maXJlKHIpKX07Zm9yKHZhciBuIGluIHRoaXMucmF3T3B0aW9ucyl7dmFyIG89e2dldDpyLmJpbmQodGhpcyxuKSxzZXQ6aS5iaW5kKHRoaXMsbil9O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLm9wdGlvbnMsbixvKX19LGUucHJvdG90eXBlLnNldE9wdGlvbj1mdW5jdGlvbihlLHQpe3RoaXMub3B0aW9uc1tlXT10fSxlLnByb3RvdHlwZS5fc2FuaXRpemVBbmRWYWxpZGF0ZU9wdGlvbj1mdW5jdGlvbihlLHIpe3N3aXRjaChlKXtjYXNlImJlbGxTdHlsZSI6Y2FzZSJjdXJzb3JTdHlsZSI6Y2FzZSJyZW5kZXJlclR5cGUiOmNhc2Uid29yZFNlcGFyYXRvciI6cnx8KHI9dC5ERUZBVUxUX09QVElPTlNbZV0pO2JyZWFrO2Nhc2UiZm9udFdlaWdodCI6Y2FzZSJmb250V2VpZ2h0Qm9sZCI6aWYoIm51bWJlciI9PXR5cGVvZiByJiYxPD1yJiZyPD0xZTMpYnJlYWs7cj1zLmluY2x1ZGVzKHIpP3I6dC5ERUZBVUxUX09QVElPTlNbZV07YnJlYWs7Y2FzZSJjdXJzb3JXaWR0aCI6cj1NYXRoLmZsb29yKHIpO2Nhc2UibGluZUhlaWdodCI6Y2FzZSJ0YWJTdG9wV2lkdGgiOmlmKHI8MSl0aHJvdyBuZXcgRXJyb3IoZSsiIGNhbm5vdCBiZSBsZXNzIHRoYW4gMSwgdmFsdWU6ICIrcik7YnJlYWs7Y2FzZSJtaW5pbXVtQ29udHJhc3RSYXRpbyI6cj1NYXRoLm1heCgxLE1hdGgubWluKDIxLE1hdGgucm91bmQoMTAqcikvMTApKTticmVhaztjYXNlInNjcm9sbGJhY2siOmlmKChyPU1hdGgubWluKHIsNDI5NDk2NzI5NSkpPDApdGhyb3cgbmV3IEVycm9yKGUrIiBjYW5ub3QgYmUgbGVzcyB0aGFuIDAsIHZhbHVlOiAiK3IpO2JyZWFrO2Nhc2UiZmFzdFNjcm9sbFNlbnNpdGl2aXR5IjpjYXNlInNjcm9sbFNlbnNpdGl2aXR5IjppZihyPD0wKXRocm93IG5ldyBFcnJvcihlKyIgY2Fubm90IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byAwLCB2YWx1ZTogIityKTtjYXNlInJvd3MiOmNhc2UiY29scyI6aWYoIXImJjAhPT1yKXRocm93IG5ldyBFcnJvcihlKyIgbXVzdCBiZSBudW1lcmljLCB2YWx1ZTogIityKX1yZXR1cm4gcn0sZS5wcm90b3R5cGUuZ2V0T3B0aW9uPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm9wdGlvbnNbZV19LGV9KCk7dC5PcHRpb25zU2VydmljZT1hfSw4MzQzOihlLHQpPT57ZnVuY3Rpb24gcihlLHQscil7dC5kaSR0YXJnZXQ9PT10P3QuZGkkZGVwZW5kZW5jaWVzLnB1c2goe2lkOmUsaW5kZXg6cn0pOih0LmRpJGRlcGVuZGVuY2llcz1be2lkOmUsaW5kZXg6cn1dLHQuZGkkdGFyZ2V0PXQpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LmNyZWF0ZURlY29yYXRvcj10LmdldFNlcnZpY2VEZXBlbmRlbmNpZXM9dC5zZXJ2aWNlUmVnaXN0cnk9dm9pZCAwLHQuc2VydmljZVJlZ2lzdHJ5PW5ldyBNYXAsdC5nZXRTZXJ2aWNlRGVwZW5kZW5jaWVzPWZ1bmN0aW9uKGUpe3JldHVybiBlLmRpJGRlcGVuZGVuY2llc3x8W119LHQuY3JlYXRlRGVjb3JhdG9yPWZ1bmN0aW9uKGUpe2lmKHQuc2VydmljZVJlZ2lzdHJ5LmhhcyhlKSlyZXR1cm4gdC5zZXJ2aWNlUmVnaXN0cnkuZ2V0KGUpO3ZhciBpPWZ1bmN0aW9uKGUsdCxuKXtpZigzIT09YXJndW1lbnRzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkBJU2VydmljZU5hbWUtZGVjb3JhdG9yIGNhbiBvbmx5IGJlIHVzZWQgdG8gZGVjb3JhdGUgYSBwYXJhbWV0ZXIiKTtyKGksZSxuKX07cmV0dXJuIGkudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gZX0sdC5zZXJ2aWNlUmVnaXN0cnkuc2V0KGUsaSksaX19LDI1ODU6KGUsdCxyKT0+e09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSx0LklEZWNvcmF0aW9uU2VydmljZT10LklVbmljb2RlU2VydmljZT10LklPcHRpb25zU2VydmljZT10LklMb2dTZXJ2aWNlPXQuTG9nTGV2ZWxFbnVtPXQuSUluc3RhbnRpYXRpb25TZXJ2aWNlPXQuSURpcnR5Um93U2VydmljZT10LklDaGFyc2V0U2VydmljZT10LklDb3JlU2VydmljZT10LklDb3JlTW91c2VTZXJ2aWNlPXQuSUJ1ZmZlclNlcnZpY2U9dm9pZCAwO3ZhciBpLG49cig4MzQzKTt0LklCdWZmZXJTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiQnVmZmVyU2VydmljZSIpLHQuSUNvcmVNb3VzZVNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJDb3JlTW91c2VTZXJ2aWNlIiksdC5JQ29yZVNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJDb3JlU2VydmljZSIpLHQuSUNoYXJzZXRTZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiQ2hhcnNldFNlcnZpY2UiKSx0LklEaXJ0eVJvd1NlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJEaXJ0eVJvd1NlcnZpY2UiKSx0LklJbnN0YW50aWF0aW9uU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkluc3RhbnRpYXRpb25TZXJ2aWNlIiksKGk9dC5Mb2dMZXZlbEVudW18fCh0LkxvZ0xldmVsRW51bT17fSkpW2kuREVCVUc9MF09IkRFQlVHIixpW2kuSU5GTz0xXT0iSU5GTyIsaVtpLldBUk49Ml09IldBUk4iLGlbaS5FUlJPUj0zXT0iRVJST1IiLGlbaS5PRkY9NF09Ik9GRiIsdC5JTG9nU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIkxvZ1NlcnZpY2UiKSx0LklPcHRpb25zU2VydmljZT0oMCxuLmNyZWF0ZURlY29yYXRvcikoIk9wdGlvbnNTZXJ2aWNlIiksdC5JVW5pY29kZVNlcnZpY2U9KDAsbi5jcmVhdGVEZWNvcmF0b3IpKCJVbmljb2RlU2VydmljZSIpLHQuSURlY29yYXRpb25TZXJ2aWNlPSgwLG4uY3JlYXRlRGVjb3JhdG9yKSgiRGVjb3JhdGlvblNlcnZpY2UiKX0sMTQ4MDooZSx0LHIpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuVW5pY29kZVNlcnZpY2U9dm9pZCAwO3ZhciBpPXIoODQ2MCksbj1yKDIyNSksbz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLl9wcm92aWRlcnM9T2JqZWN0LmNyZWF0ZShudWxsKSx0aGlzLl9hY3RpdmU9IiIsdGhpcy5fb25DaGFuZ2U9bmV3IGkuRXZlbnRFbWl0dGVyO3ZhciBlPW5ldyBuLlVuaWNvZGVWNjt0aGlzLnJlZ2lzdGVyKGUpLHRoaXMuX2FjdGl2ZT1lLnZlcnNpb24sdGhpcy5fYWN0aXZlUHJvdmlkZXI9ZX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJvbkNoYW5nZSIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vbkNoYW5nZS5ldmVudH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsInZlcnNpb25zIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIE9iamVjdC5rZXlzKHRoaXMuX3Byb3ZpZGVycyl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLCJhY3RpdmVWZXJzaW9uIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2FjdGl2ZX0sc2V0OmZ1bmN0aW9uKGUpe2lmKCF0aGlzLl9wcm92aWRlcnNbZV0pdGhyb3cgbmV3IEVycm9yKCd1bmtub3duIFVuaWNvZGUgdmVyc2lvbiAiJytlKyciJyk7dGhpcy5fYWN0aXZlPWUsdGhpcy5fYWN0aXZlUHJvdmlkZXI9dGhpcy5fcHJvdmlkZXJzW2VdLHRoaXMuX29uQ2hhbmdlLmZpcmUoZSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucmVnaXN0ZXI9ZnVuY3Rpb24oZSl7dGhpcy5fcHJvdmlkZXJzW2UudmVyc2lvbl09ZX0sZS5wcm90b3R5cGUud2N3aWR0aD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fYWN0aXZlUHJvdmlkZXIud2N3aWR0aChlKX0sZS5wcm90b3R5cGUuZ2V0U3RyaW5nQ2VsbFdpZHRoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9ZS5sZW5ndGgsaT0wO2k8cjsrK2kpe3ZhciBuPWUuY2hhckNvZGVBdChpKTtpZig1NTI5Njw9biYmbjw9NTYzMTkpe2lmKCsraT49cilyZXR1cm4gdCt0aGlzLndjd2lkdGgobik7dmFyIG89ZS5jaGFyQ29kZUF0KGkpOzU2MzIwPD1vJiZvPD01NzM0Mz9uPTEwMjQqKG4tNTUyOTYpK28tNTYzMjArNjU1MzY6dCs9dGhpcy53Y3dpZHRoKG8pfXQrPXRoaXMud2N3aWR0aChuKX1yZXR1cm4gdH0sZX0oKTt0LlVuaWNvZGVTZXJ2aWNlPW99fSx0PXt9O3JldHVybiBmdW5jdGlvbiByKGkpe3ZhciBuPXRbaV07aWYodm9pZCAwIT09bilyZXR1cm4gbi5leHBvcnRzO3ZhciBvPXRbaV09e2V4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoby5leHBvcnRzLG8sby5leHBvcnRzLHIpLG8uZXhwb3J0c30oNDM4OSl9KSgpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD14dGVybS5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0vbGliL3h0ZXJtLmpzIl0gPSBbXQoKX2Nhbl9uYW1lID0gIi9yZXF1aXJlL3BhZ2Uvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLWZpdC9saWIveHRlcm0tYWRkb24tZml0LmpzIgohZnVuY3Rpb24oZSx0KXsib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHMmJiJvYmplY3QiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKToiZnVuY3Rpb24iPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kP2RlZmluZShbXSx0KToib2JqZWN0Ij09dHlwZW9mIGV4cG9ydHM/ZXhwb3J0cy5GaXRBZGRvbj10KCk6ZS5GaXRBZGRvbj10KCl9KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57InVzZSBzdHJpY3QiO3ZhciBlPXs3NzU6KGUsdCk9PntPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksdC5GaXRBZGRvbj12b2lkIDA7dmFyIHI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKCl7fXJldHVybiBlLnByb3RvdHlwZS5hY3RpdmF0ZT1mdW5jdGlvbihlKXt0aGlzLl90ZXJtaW5hbD1lfSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5maXQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3Bvc2VEaW1lbnNpb25zKCk7aWYoZSYmdGhpcy5fdGVybWluYWwpe3ZhciB0PXRoaXMuX3Rlcm1pbmFsLl9jb3JlO3RoaXMuX3Rlcm1pbmFsLnJvd3M9PT1lLnJvd3MmJnRoaXMuX3Rlcm1pbmFsLmNvbHM9PT1lLmNvbHN8fCh0Ll9yZW5kZXJTZXJ2aWNlLmNsZWFyKCksdGhpcy5fdGVybWluYWwucmVzaXplKGUuY29scyxlLnJvd3MpKX19LGUucHJvdG90eXBlLnByb3Bvc2VEaW1lbnNpb25zPWZ1bmN0aW9uKCl7aWYodGhpcy5fdGVybWluYWwmJnRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQmJnRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQucGFyZW50RWxlbWVudCl7dmFyIGU9dGhpcy5fdGVybWluYWwuX2NvcmU7aWYoMCE9PWUuX3JlbmRlclNlcnZpY2UuZGltZW5zaW9ucy5hY3R1YWxDZWxsV2lkdGgmJjAhPT1lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCl7dmFyIHQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fdGVybWluYWwuZWxlbWVudC5wYXJlbnRFbGVtZW50KSxyPXBhcnNlSW50KHQuZ2V0UHJvcGVydHlWYWx1ZSgiaGVpZ2h0IikpLGk9TWF0aC5tYXgoMCxwYXJzZUludCh0LmdldFByb3BlcnR5VmFsdWUoIndpZHRoIikpKSxuPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuX3Rlcm1pbmFsLmVsZW1lbnQpLG89ci0ocGFyc2VJbnQobi5nZXRQcm9wZXJ0eVZhbHVlKCJwYWRkaW5nLXRvcCIpKStwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctYm90dG9tIikpKSxhPWktKHBhcnNlSW50KG4uZ2V0UHJvcGVydHlWYWx1ZSgicGFkZGluZy1yaWdodCIpKStwYXJzZUludChuLmdldFByb3BlcnR5VmFsdWUoInBhZGRpbmctbGVmdCIpKSktZS52aWV3cG9ydC5zY3JvbGxCYXJXaWR0aDtyZXR1cm57Y29sczpNYXRoLm1heCgyLE1hdGguZmxvb3IoYS9lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbFdpZHRoKSkscm93czpNYXRoLm1heCgxLE1hdGguZmxvb3Ioby9lLl9yZW5kZXJTZXJ2aWNlLmRpbWVuc2lvbnMuYWN0dWFsQ2VsbEhlaWdodCkpfX19fSxlfSgpO3QuRml0QWRkb249cn19LHQ9e307cmV0dXJuIGZ1bmN0aW9uIHIoaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciBuPXRbaV09e2V4cG9ydHM6e319O3JldHVybiBlW2ldKG4sbi5leHBvcnRzLHIpLG4uZXhwb3J0c30oNzc1KX0pKCl9KSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXh0ZXJtLWFkZG9uLWZpdC5qcy5tYXAKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0tYWRkb24tZml0L2xpYi94dGVybS1hZGRvbi1maXQuanMiXSA9IFtdCgpfY2FuX25hbWUgPSAiL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0tYWRkb24td2ViLWxpbmtzL2xpYi94dGVybS1hZGRvbi13ZWItbGlua3MuanMiCiFmdW5jdGlvbihlLHQpeyJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmIm9iamVjdCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLHQpOiJvYmplY3QiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLldlYkxpbmtzQWRkb249dCgpOmUuV2ViTGlua3NBZGRvbj10KCl9KHNlbGYsKGZ1bmN0aW9uKCl7cmV0dXJuKCgpPT57InVzZSBzdHJpY3QiO3ZhciBlPXs2OihlLHQpPT57T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pLHQuTGlua0NvbXB1dGVyPXQuV2ViTGlua1Byb3ZpZGVyPXZvaWQgMDt2YXIgaT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LGkscil7dm9pZCAwPT09ciYmKHI9e30pLHRoaXMuX3Rlcm1pbmFsPWUsdGhpcy5fcmVnZXg9dCx0aGlzLl9oYW5kbGVyPWksdGhpcy5fb3B0aW9ucz1yfXJldHVybiBlLnByb3RvdHlwZS5wcm92aWRlTGlua3M9ZnVuY3Rpb24oZSx0KXt2YXIgaT1yLmNvbXB1dGVMaW5rKGUsdGhpcy5fcmVnZXgsdGhpcy5fdGVybWluYWwsdGhpcy5faGFuZGxlcik7dCh0aGlzLl9hZGRDYWxsYmFja3MoaSkpfSxlLnByb3RvdHlwZS5fYWRkQ2FsbGJhY2tzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIGUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZS5sZWF2ZT10Ll9vcHRpb25zLmxlYXZlLGUuaG92ZXI9ZnVuY3Rpb24oaSxyKXtpZih0Ll9vcHRpb25zLmhvdmVyKXt2YXIgbj1lLnJhbmdlO3QuX29wdGlvbnMuaG92ZXIoaSxyLG4pfX0sZX0pKX0sZX0oKTt0LldlYkxpbmtQcm92aWRlcj1pO3ZhciByPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe31yZXR1cm4gZS5jb21wdXRlTGluaz1mdW5jdGlvbih0LGkscixuKXtmb3IodmFyIG8sYT1uZXcgUmVnRXhwKGkuc291cmNlLChpLmZsYWdzfHwiIikrImciKSxzPWUuX3RyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZ1dpdGhXcmFwKHQtMSwhMSxyKSxkPXNbMF0sbD1zWzFdLGM9LTEsdT1bXTtudWxsIT09KG89YS5leGVjKGQpKTspe3ZhciBoPW9bMV07aWYoIWgpe2NvbnNvbGUubG9nKCJtYXRjaCBmb3VuZCB3aXRob3V0IGNvcnJlc3BvbmRpbmcgbWF0Y2hJbmRleCIpO2JyZWFrfWlmKGM9ZC5pbmRleE9mKGgsYysxKSxhLmxhc3RJbmRleD1jK2gubGVuZ3RoLGM8MClicmVhaztmb3IodmFyIHY9YytoLmxlbmd0aCxmPWwrMTt2PnIuY29sczspdi09ci5jb2xzLGYrKztmb3IodmFyIHA9YysxLF89bCsxO3A+ci5jb2xzOylwLT1yLmNvbHMsXysrO3ZhciBrPXtzdGFydDp7eDpwLHk6X30sZW5kOnt4OnYseTpmfX07dS5wdXNoKHtyYW5nZTprLHRleHQ6aCxhY3RpdmF0ZTpufSl9cmV0dXJuIHV9LGUuX3RyYW5zbGF0ZUJ1ZmZlckxpbmVUb1N0cmluZ1dpdGhXcmFwPWZ1bmN0aW9uKGUsdCxpKXt2YXIgcixuLG89IiI7ZG97aWYoIShzPWkuYnVmZmVyLmFjdGl2ZS5nZXRMaW5lKGUpKSlicmVhaztzLmlzV3JhcHBlZCYmZS0tLG49cy5pc1dyYXBwZWR9d2hpbGUobik7dmFyIGE9ZTtkb3t2YXIgcyxkPWkuYnVmZmVyLmFjdGl2ZS5nZXRMaW5lKGUrMSk7aWYocj0hIWQmJmQuaXNXcmFwcGVkLCEocz1pLmJ1ZmZlci5hY3RpdmUuZ2V0TGluZShlKSkpYnJlYWs7bys9cy50cmFuc2xhdGVUb1N0cmluZyghciYmdCkuc3Vic3RyaW5nKDAsaS5jb2xzKSxlKyt9d2hpbGUocik7cmV0dXJuW28sYV19LGV9KCk7dC5MaW5rQ29tcHV0ZXI9cn19LHQ9e307ZnVuY3Rpb24gaShyKXt2YXIgbj10W3JdO2lmKHZvaWQgMCE9PW4pcmV0dXJuIG4uZXhwb3J0czt2YXIgbz10W3JdPXtleHBvcnRzOnt9fTtyZXR1cm4gZVtyXShvLG8uZXhwb3J0cyxpKSxvLmV4cG9ydHN9dmFyIHI9e307cmV0dXJuKCgpPT57dmFyIGU9cjtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZS5XZWJMaW5rc0FkZG9uPXZvaWQgMDt2YXIgdD1pKDYpLG49bmV3IFJlZ0V4cCgiKD86XnxbXlxcZGEtelxcLi1dKykoKGh0dHBzPzpcXC9cXC8pKCgoW1xcZGEtelxcLi1dKylcXC4oW2EtelxcLl17MiwxOH0pKXwoKFxcZHsxLDN9XFwuKXszfVxcZHsxLDN9KXwobG9jYWxob3N0KSkoOlxcZHsxLDV9KT8oKFxcL1tcXC9cXHdcXC5cXC0lfjorQF0qKSooW146XCInXFxzXSkpPyhcXD9bMC05XFx3XFxbXFxdXFwoXFwpXFwvXFw/XFwhI0AkJSYnKissOjt+XFw9XFwuXFwtXSopPygjWzAtOVxcd1xcW1xcXVxcKFxcKVxcL1xcP1xcISNAJCUmJyorLDo7flxcPVxcLlxcLV0qKT8pKCR8W15cXC9cXHdcXC5cXC0lXSspIik7ZnVuY3Rpb24gbyhlLHQpe3ZhciBpPXdpbmRvdy5vcGVuKCk7aWYoaSl7dHJ5e2kub3BlbmVyPW51bGx9Y2F0Y2goZSl7fWkubG9jYXRpb24uaHJlZj10fWVsc2UgY29uc29sZS53YXJuKCJPcGVuaW5nIGxpbmsgYmxvY2tlZCBhcyBvcGVuZXIgY291bGQgbm90IGJlIGNsZWFyZWQiKX12YXIgYT1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSx0LGkpe3ZvaWQgMD09PWUmJihlPW8pLHZvaWQgMD09PXQmJih0PXt9KSx2b2lkIDA9PT1pJiYoaT0hMSksdGhpcy5faGFuZGxlcj1lLHRoaXMuX29wdGlvbnM9dCx0aGlzLl91c2VMaW5rUHJvdmlkZXI9aX1yZXR1cm4gZS5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oZSl7aWYodGhpcy5fdGVybWluYWw9ZSx0aGlzLl91c2VMaW5rUHJvdmlkZXImJiJyZWdpc3RlckxpbmtQcm92aWRlciJpbiB0aGlzLl90ZXJtaW5hbCl7dmFyIGk9KHI9dGhpcy5fb3B0aW9ucykudXJsUmVnZXh8fG47dGhpcy5fbGlua1Byb3ZpZGVyPXRoaXMuX3Rlcm1pbmFsLnJlZ2lzdGVyTGlua1Byb3ZpZGVyKG5ldyB0LldlYkxpbmtQcm92aWRlcih0aGlzLl90ZXJtaW5hbCxpLHRoaXMuX2hhbmRsZXIscikpfWVsc2V7dmFyIHI7KHI9dGhpcy5fb3B0aW9ucykubWF0Y2hJbmRleD0xLHRoaXMuX2xpbmtNYXRjaGVySWQ9dGhpcy5fdGVybWluYWwucmVnaXN0ZXJMaW5rTWF0Y2hlcihuLHRoaXMuX2hhbmRsZXIscil9fSxlLnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dmFyIGU7dm9pZCAwIT09dGhpcy5fbGlua01hdGNoZXJJZCYmdm9pZCAwIT09dGhpcy5fdGVybWluYWwmJnRoaXMuX3Rlcm1pbmFsLmRlcmVnaXN0ZXJMaW5rTWF0Y2hlcih0aGlzLl9saW5rTWF0Y2hlcklkKSxudWxsPT09KGU9dGhpcy5fbGlua1Byb3ZpZGVyKXx8dm9pZCAwPT09ZXx8ZS5kaXNwb3NlKCl9LGV9KCk7ZS5XZWJMaW5rc0FkZG9uPWF9KSgpLHJ9KSgpfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD14dGVybS1hZGRvbi13ZWItbGlua3MuanMubWFwClZvbGNhbm9zLm1ldGEuY2FjaGVbIi9yZXF1aXJlL3BhZ2Uvbm9kZV9tb2R1bGVzL3h0ZXJtLWFkZG9uLXdlYi1saW5rcy9saWIveHRlcm0tYWRkb24td2ViLWxpbmtzLmpzIl0gPSBbXQoKVm9sY2Fub3MubWV0YS5jYWNoZVsiL3JlcXVpcmUvcGFnZS9ub2RlX21vZHVsZXMveHRlcm0vY3NzL3h0ZXJtLmNzcyJdID0gW10KCg==",
        "usr/volcanos/page/index.css": "Ym9keSwgZmllbGRzZXQsIHRhYmxlLCB0ciwgdGgsIHRkIHsgcGFkZGluZzowOyBib3JkZXI6MDsgbWFyZ2luOjA7IH0KYm9keSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGZvbnQtc2l6ZToxNnB4OyB9CmxlZ2VuZCB7IGJhY2tncm91bmQtY29sb3I6Y2FkZXRibHVlOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzowIDIwcHg7IH0Kc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6Y3lhbjsgcGFkZGluZzowIDEwcHg7IGJvcmRlcjowOyB9CnRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB3aWR0aDo0MDBweDsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyBjb2xvcjpibGFjazsgcGFkZGluZzowIDVweDsgYm9yZGVyOjA7IHdpZHRoOjkwcHg7IH0KaW5wdXRbdHlwZT10ZXh0XSB7IGJhY2tncm91bmQtY29sb3I6Y3lhbjsgY29sb3I6YmxhY2s7IHBhZGRpbmc6MCA1cHg7IGJvcmRlcjowOyB3aWR0aDo5MHB4OyB9CmlucHV0W25hbWU9Y21kXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOndoaXRlOyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXVybF0geyB3aWR0aDozMjBweDsgfQppbnB1dFtuYW1lPXRleHRdIHsgd2lkdGg6MTYwcHg7IH0KaW5wdXRbbmFtZT1kYXRlXSB7IHdpZHRoOjE1MHB4OyB9CmlucHV0W25hbWU9cGF0aF0geyB3aWR0aDoxNjBweDsgfQppbnB1dFtuYW1lPWxpbmVdIHsgd2lkdGg6NDBweDsgfQppbnB1dFtuYW1lPWxpbWl0XSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1vZmZlbmRdIHsgd2lkdGg6NDhweDsgfQppbnB1dFtuYW1lPWlkXSB7IHdpZHRoOjQ4cHg7IH0KaW5wdXRbbmFtZT1JRF0geyB3aWR0aDo0OHB4OyB9CmlucHV0W3R5cGU9YnV0dG9uXSB7IGJhY2tncm91bmQtY29sb3I6YmxhY2s7IGNvbG9yOmN5YW47IGJvcmRlcjowOyB9CmlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9b3Blbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9c3RvcF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQppbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1kZWxldGVdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KaW5wdXRbdHlwZT1idXR0b25dW25hbWU9cmVtb3ZlXSB7IGJhY2tncm91bmQtY29sb3I6cmVkOyB9Cgp0YWJsZS5sYXlvdXQgeyBib3JkZXItc3BhY2luZzowOyB9CnRhYmxlLmxheW91dCB0ZCB7IHZlcnRpY2FsLWFsaWduOnRvcDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IGNvbG9yOndoaXRlOyBmb250LXNpemU6MjRweDsgcG9zaXRpb246YWJzb2x1dGU7IHotaW5kZXg6MTA7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZT5kaXYgeyBkaXNwbGF5OnRhYmxlLWNlbGw7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9qZWN0IHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgbGVmdDowcHg7IGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjEwcHg7IH0KdGFibGUubGF5b3V0IHRkLmNvbnRlbnQgZGl2LnRvZ2dsZS5wcm9maWxlIHsgcGFkZGluZy10b3A6IDUwcHg7IGhlaWdodDoxMDBweDsgd2lkdGg6MTVweDsgdG9wOjIwJTsgcmlnaHQ6MHB4OyBib3JkZXItdG9wLWxlZnQtcmFkaXVzOjEwcHg7IGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXkgeyBtYXJnaW4tdG9wOi0xNXB4OyBoZWlnaHQ6MTVweDsgd2lkdGg6MTAwcHg7IHBvc2l0aW9uOnN0aWNreTsgbGVmdDo0MCU7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6MTBweDsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6MTBweDsgfQp0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLmRpc3BsYXk+ZGl2IHsgdGV4dC1hbGlnbjpjZW50ZXI7IHdpZHRoOjEwMHB4OyB0cmFuc2Zvcm06IHJvdGF0ZSgtOTBkZWcpIHRyYW5zbGF0ZSg1cHgsIDBweCk7IH0KdGFibGUuY29udGVudCB0aGVhZCB7IHBvc2l0aW9uOnN0aWNreTsgdG9wOjJweDsgfQp0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IHBhZGRpbmc6MnB4IDZweDsgfQp0YWJsZS5jb250ZW50IHRkIHsgcGFkZGluZzoycHggNnB4OyB9CnRhYmxlLmNvbnRlbnQuYWN0aW9uIHRoOmxhc3QtY2hpbGQgeyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KdGFibGUuY29udGVudC5hY3Rpb24gdGQ6bGFzdC1jaGlsZCB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyBwb3NpdGlvbjpzdGlja3k7IHJpZ2h0OjA7IH0KZGl2LmNvZGUgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzNDNhMzQ0NTsgY29sb3I6d2hpdGU7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGJhY2tncm91bmQtY29sb3I6IzIxNjlhOWE2OyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgYm9yZGVyLWxlZnQ6c29saWQgNXB4IGJsdWU7IG1hcmdpbjoxMHB4OyB9Cgpmb3JtLm9wdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2LmFjdGlvbj5kaXYuaXRlbSB7IG1hcmdpbi1yaWdodDo1cHg7IH0KZGl2Lm91dHB1dCB7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lml0ZW0geyBwYWRkaW5nOjJweCAxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2Lmxpc3QgeyBtYXJnaW4tbGVmdDoxMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaCB7IHdpZHRoOjEycHg7IGZsb2F0OmxlZnQ7IHRyYW5zZm9ybTogcm90YXRlKDkwZGVnKSB0cmFuc2xhdGUoMXB4LCAwcHgpOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnN3aXRjaC5vcGVuIHsgdHJhbnNmb3JtOiByb3RhdGUoMTgwZGVnKSB0cmFuc2xhdGUoLTRweCwgNHB4KTsgfQpkaXYub3V0cHV0IGRpdi5wcm9qZWN0IGRpdi56b25lPmRpdi5uYW1lIHsgYmFja2dyb3VuZC1jb2xvcjpzdGVlbGJsdWU7IGNvbG9yOndoaXRlOyB0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo1cHg7IGNsZWFyOmJvdGg7IH0KZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuaXRlbT5kaXYubmFtZSB7IHBhZGRpbmctbGVmdDoyMHB4OyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSB7IGZsb2F0OnJpZ2h0OyBjbGVhcjpub25lOyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmRpdi5vdXRwdXQgZGl2LnByb2plY3QgZGl2LnpvbmU+ZGl2LmFjdGlvbj5kaXYuaXRlbSBpbnB1dFt0eXBlPXRleHRdIHsgYmFja2dyb3VuZC1jb2xvcjojZmYwMDAwMDA7IHBhZGRpbmctbGVmdDoxMHB4OyBjb2xvcjp3aGl0ZTsgfQoKZmllbGRzZXQucGx1Z2luIHsgYmFja2dyb3VuZC1jb2xvcjojMDYxYzNjOWU7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZmllbGRzZXQuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgcG9zaXRpb246YWJzb2x1dGU7IH0KZmllbGRzZXQuZnVsbCB7IGJhY2tncm91bmQtY29sb3I6IzA3Mzk0N2YyOyBwYWRkaW5nOjA7IG1hcmdpbjowOyBsZWZ0OjA7IHRvcDowOyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LnN0b3J5PmxlZ2VuZCB7IG1hcmdpbjoxMHB4IDA7IH0KZmllbGRzZXQucGx1Zz5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmZpZWxkc2V0LmZsb2F0PmxlZ2VuZCB7IGZsb2F0OmxlZnQ7IG1hcmdpbi1yaWdodDo1cHg7IH0KZmllbGRzZXQuZnVsbD5sZWdlbmQgeyBmbG9hdDpsZWZ0OyBtYXJnaW46MDsgbWFyZ2luLXJpZ2h0OjVweDsgfQpmaWVsZHNldC5mbG9hdCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQucGx1Zz5mb3JtLm9wdGlvbiBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuZnVsbCBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1jbG9zZV17IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQgaW5wdXRbdHlwZT1idXR0b25dW25hbWU9Y2xvc2VdeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luIGRpdi5zdGF0dXMgeyBib3JkZXItdG9wOjFweCBzb2xpZCBkYXJrY3lhbjsgfQpmaWVsZHNldC5zdG9yeSBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgZGFya2N5YW47IH0KZmllbGRzZXQub3V0cHV0PmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYuc3RhdHVzIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0Lm91dHB1dCBkaXYudG9nZ2xlIHsgZGlzcGxheTpub25lOyB9CgpmaWVsZHNldC5pbnB1dC5rZXkgeyBvdmVyZmxvdzphdXRvOyB9CmZpZWxkc2V0LmlucHV0LmtleSBkaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbnB1dC5rZXkuc2ltcGxlIHRoIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlucHV0LmtleS5zaW1wbGUgdGQgeyBtaW4td2lkdGg6NDBweDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5hY3Rpb24gZGl2LnNwYWNlIHsgd2lkdGg6MDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5pbnB1dC5kYXRlIGRpdi5vdXRwdXQgdGQucHJldiB7IGNvbG9yOmdyYXk7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSBkaXYub3V0cHV0IHRkLm5leHQgeyBjb2xvcjpncmF5OyB9CmZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6MnB4IDEwcHg7IH0KZmllbGRzZXQuaW5wdXQuZGF0ZSB0YWJsZSB7IHRleHQtYWxpZ246Y2VudGVyOyB3aWR0aDoyODBweDsgfQoKYm9keT5kaXYuZmxvYXQgeyBiYWNrZ3JvdW5kLWNvbG9yOiMwZTMzNjliMzsgY29sb3I6d2hpdGU7IHBhZGRpbmc6NXB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi50aXRsZSB7IGNvbG9yOnllbGxvdzsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi50b2FzdCBkaXYuZHVyYXRpb24geyBjb2xvcjpncmF5OyBmbG9hdDpyaWdodDsgfQpib2R5PmRpdi50b2FzdCBkaXYuY29udGVudCB7IHRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjp5ZWxsb3c7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIHsgYm9yZGVyOnNvbGlkIDJweCBncmVlbjsgbWFyZ2luLWxlZnQ6LTJweDsgaGVpZ2h0OjEwcHg7IGNsZWFyOmJvdGg7IH0KYm9keT5kaXYudG9hc3QgZGl2LnByb2dyZXNzIGRpdi5jdXJyZW50IHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB9CmJvZHk+ZGl2LnRvYXN0IGRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyB9CmJvZHk+ZGl2LmNhcnRlIHsgcGFkZGluZzowOyB9CmJvZHk+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMGUzMzY5YjM7IHBhZGRpbmc6M3B4IDEycHg7IH0KYm9keT5kaXYuY2FydGUgZGl2LnNwYWNlIHsgYm9yZGVyLWJvdHRvbTpzb2xpZCAxcHggZ3JheTsgfQpib2R5PmRpdi5pbnB1dCBkaXYuY29udGVudCB7IG92ZXJmbG93OmF1dG87IH0KYm9keT5kaXYuaW5wdXQgdGQgeyBwYWRkaW5nOjVweDsgfQpib2R5PmRpdi5pbnB1dCBzZWxlY3QgeyB3aWR0aDoxODFweDsgfQpib2R5PmRpdi5pbnB1dCBpbnB1dFt0eXBlPXRleHRdIHsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQgaW5wdXRbbmFtZT1wYXNzd29yZF0geyBwYWRkaW5nOjVweDsgYm9yZGVyOjA7IHdpZHRoOjE3MXB4OyBiYWNrZ3JvdW5kOndoaXRlOyB9CmJvZHk+ZGl2LmlucHV0IGlucHV0W25hbWU9dXNlcm5hbWVdIHsgcGFkZGluZzo1cHg7IGJvcmRlcjowOyB3aWR0aDoxNzFweDsgfQpib2R5PmRpdi5pbnB1dCB0ZXh0YXJlYSB7IGhlaWdodDoxMjBweDsgd2lkdGg6MTcxcHg7IH0KYm9keT5kaXYuaW5wdXQubG9naW4geyBwYWRkaW5nOjEwcHg7IGJhY2tncm91bmQ6c3RlZWxibHVlOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuaXRlbSB7IGZsb2F0OmxlZnQ7IH0KYm9keT5kaXYudXBsb2FkIGRpdi5vdXRwdXQgeyBib3JkZXI6c29saWQgMXB4IHJlZDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnByb2dyZXNzIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGhlaWdodDoxMHB4OyB3aWR0aDowOyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5jb3N0IHsgZmxvYXQ6bGVmdDsgfQpib2R5PmRpdi51cGxvYWQgZGl2LnN0YXR1cyBkaXYuc2hvdyB7IGZsb2F0OnJpZ2h0OyB9CmJvZHk+ZGl2LnVwbG9hZCBkaXYuc3RhdHVzIGRpdi5zaXplIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KYm9keT5kaXYudXBsb2FkIGlucHV0W3R5cGU9ZmlsZV0geyB3aWR0aDozMjBweDsgfQoKLyogZm9udCAqLwoqIHsgdGFiLXNpemU6NDsgfQp0ZXh0YXJlYSB7IHRhYi1zaXplOjI7IGhlaWdodDo2MHB4OyB9CmxlZ2VuZCB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozMXB4OyB9CnNlbGVjdCB7IGZvbnQtc2l6ZToxLjFyZW07IGhlaWdodDozMXB4OyB9CmlucHV0IHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IH0KdGFibGUuY29udGVudCB0aCwgdGFibGUuY29udGVudCB0ZCwgZGl2LnpvbmU+ZGl2Lm5hbWUsIGRpdi5pdGVtLCBkaXYuY29kZSwgY29kZS5zdG9yeSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBmb250LXNpemU6MS4xcmVtOyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZGl2LnN0YXR1cz5kaXYuaXRlbT5sYWJlbCB7IGZvbnQtc2l6ZTowLjZyZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgfQpkaXYuc3RhdHVzPmRpdi5pdGVtIHsgcGFkZGluZzo0cHg7IGhlaWdodDoyMnB4OyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnMgeyBwYWRkaW5nOjVweCAxMHB4OyBoZWlnaHQ6MjFweDsgfQpzdmcgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KCi8qIGRpc3BsYXkgKi8KZm9ybS5vcHRpb24sIGRpdi5hY3Rpb24geyBkaXNwbGF5OmNvbnRlbnRzOyB9Ci5oaWRlLCAuaGlkZGVuLCBmb3JtLm9wdGlvbj5kaXYuaXRlbT5sYWJlbCwgZGl2LmFjdGlvbj5kaXYuaXRlbT5sYWJlbCwgZmllbGRzZXQucGFuZWw+bGVnZW5kLCBmaWVsZHNldC5vdXRwdXQ+bGVnZW5kLCBmaWVsZHNldC5pbnB1dD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZGl2Lm91dHB1dCwgZGl2LnN0YXR1cywgZGl2LmNvbnRlbnQsIGRpdi5wcm9qZWN0IGRpdi5pdGVtLCBkaXYuaXRlbS50ZXh0YXJlYSwgZGl2LmNvZGUsIGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdLCBwLnN0b3J5LCBoMSwgaDIsIGgzIHsgY2xlYXI6Ym90aDsgfQpmb3JtLm9wdGlvbiwgZm9ybS5vcHRpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24sIGRpdi5hY3Rpb24+ZGl2Lml0ZW0sIGRpdi5hY3Rpb24+ZGl2LnRhYnMsIGRpdi5wcm9qZWN0LCBkaXYuc3RhdHVzPmRpdi5pdGVtIHsgZmxvYXQ6bGVmdDsgfQpkaXYuY29kZSwgZGl2LnN0b3J5LCBkaXYuYWN0aW9uLCBkaXYub3V0cHV0LCBkaXYuc3RhdHVzLCBkaXYucHJvamVjdCwgZGl2LmNvbnRlbnQsIGRpdi5wcm9maWxlLCBkaXYuZGlzcGxheSwgdGFibGUuY29udGVudCwgdGFibGUuY29udGVudCB0ZCwgYm9keT5kaXYudG9hc3QgeyBvdmVyZmxvdzphdXRvOyB9CmRpdi5jb2RlLCBkaXYuc3RvcnksIGRpdi5pdGVtLCBkaXYuY29udGVudCwgdGFibGUuY29udGVudCwgdGV4dGFyZWEgeyB3aGl0ZS1zcGFjZTpwcmU7IH0KZGl2LmNvZGUsIGRpdi5zdG9yeSwgZGl2Lml0ZW0geyB0ZXh0LWFsaWduOmxlZnQ7IH0KCi8qIHBvc2l0aW9uIGN1cnNvciAqLwpmaWVsZHNldC5hdXRvLCBmaWVsZHNldC5mdWxsLCBmaWVsZHNldC5mbG9hdCwgZmllbGRzZXQuaW5wdXQsIGJvZHk+ZGl2LnRvYXN0LCBib2R5PmRpdi5jYXJ0ZSwgYm9keT5kaXYuaW5wdXQsIGJvZHk+ZGl2LnVwbG9hZCB7IHBvc2l0aW9uOmZpeGVkOyB6LWluZGV4OjEwOyB9CmxlZ2VuZCwgc2VsZWN0LCBpbnB1dFt0eXBlPWJ1dHRvbl0sIGRpdi5pdGVtLCBkaXYudGFicywgdGgsIHRkLCBoMSwgaDIsIGgzIHsgY3Vyc29yOnBvaW50ZXI7IH0KZGl2LnRpdGxlLCBkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSB7IGN1cnNvcjpjb3B5OyB9CgovKiBib3gtc2hhZG93ICovCmZpZWxkc2V0LnBsdWdpbiB7IGJveC1zaGFkb3c6MnB4IDJweCAxMHB4IDRweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnBsdWdpbjpob3ZlciB7IGJveC1zaGFkb3c6NHB4IDRweCAxMnB4IDZweCAjNjI2YmQwOyB9CmZpZWxkc2V0LnN0b3J5IHsgYm94LXNoYWRvdzo0cHggNHB4IDEwcHggMXB4ICM2MjZiZDA7IH0KZmllbGRzZXQuc3Rvcnk6aG92ZXIgeyBib3gtc2hhZG93OjEycHggMTJweCAxMnB4IDZweCAjNTc2NGVmZDE7IH0KbGVnZW5kLCBzZWxlY3QsIHRleHRhcmVhLCBpbnB1dFt0eXBlPXRleHRdLCBkaXYuY29kZSwgZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBib3gtc2hhZG93OjRweCA0cHggMjBweCA0cHggIzYyNmJkMDsgfQoKLyogaG92ZXIgKi8KbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CnNlbGVjdDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgY29sb3I6Y3lhbjsgfQppbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQppbnB1dFtuYW1lPWNtZF06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmN5YW47IGNvbG9yOmJsYWNrOyB9CmlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgfQpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXSBzcGFuOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpkZWVwc2t5Ymx1ZTsgYm94LXNoYWRvdzo0cHggNHB4IDIwcHggNHB4ICMyOTMxOGU7IH0KdGFibGUuY29udGVudCB0ci5zZWxlY3QsIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIsIGgxOmhvdmVyLCBoMjpob3ZlciwgaDM6aG92ZXIsIGRpdi5pdGVtLnNlbGVjdCwgZGl2Lml0ZW06aG92ZXIsIGRpdi50YWJzLnNlbGVjdCwgZGl2LnRhYnM6aG92ZXIsIC5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQp0YWJsZS5jb250ZW50IHRoOmhvdmVyLCB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCwgdGFibGUuY29udGVudCB0ZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6Y29ybmZsb3dlcmJsdWU7IH0KYm9keT5kaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyB9CmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQoKLyogc2Nyb2xsYmFyICovCmJvZHkgeyBvdmVyZmxvdzotbW96LXNjcm9sbGJhcnMtbm9uZTsgLW1zLW92ZXJmbG93LXN0eWxlOm5vbmU7IH0KYm9keTo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZmllbGRzZXQucGFuZWwuQWN0aW9uPmRpdi5vdXRwdXQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CmRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdOjotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOjAgIWltcG9ydGFudDsgaGVpZ2h0OjAgIWltcG9ydGFudDsgfQpkaXYucHJvamVjdDo6LXdlYmtpdC1zY3JvbGxiYXIgeyB3aWR0aDowICFpbXBvcnRhbnQ7IGhlaWdodDowICFpbXBvcnRhbnQ7IH0KZGl2LmNvbnRlbnQ6Oi13ZWJraXQtc2Nyb2xsYmFyIHsgd2lkdGg6MCAhaW1wb3J0YW50OyBoZWlnaHQ6MCAhaW1wb3J0YW50OyB9CgovKiB0YWJsZSBjYXJkICovCmRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IHBhZGRpbmc6MTBweDsgYm9yZGVyOnNvbGlkIDFweCAjZTdlN2U3OyBtYXJnaW46MTBweDsgd2lkdGg6MjQwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGZvbnQtc2l6ZToxLjJyZW07IGZvbnQtd2VpZ2h0OmJvbGQ7IHBhZGRpbmc6MTBweDsgYm9yZGVyLWJvdHRvbTogc29saWQgMXB4ICNlN2U3ZTc7IH0KZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi5jb250ZW50IHsgcGFkZGluZzoxMHB4OyBoZWlnaHQ6NDVweDsgfQpib2R5LndoaXRlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZjAwMDAwMDsgfQpkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0uc3RvcCB7IGNvbG9yOmdyYXk7IH0KCi8qIHdoaXRlICovCmJvZHkud2hpdGUgeyBiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoNSwzNCw1NiwwLjc1KTsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBzZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOnllbGxvd2dyZWVuOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIHRleHRhcmVhIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9cGFzc3dvcmRdIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9dGV4dF0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdIHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmNvcm5mbG93ZXJibHVlOyBjb2xvcjp3aGl0ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0YXJ0XSB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT1vcGVuXSB7IGJhY2tncm91bmQtY29sb3I6Ymx1ZTsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXN0b3BdIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl1bbmFtZT10cmFzaF0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPWRlbGV0ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPXJlbW92ZV0geyBiYWNrZ3JvdW5kLWNvbG9yOnJlZDsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdGggeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5BY3Rpb24geyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlIGZpZWxkc2V0LnBhbmVsLkFjdGlvbiBkaXYuYWN0aW9uIHsgY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmZmZmZmZhMTsgfQpib2R5LndoaXRlIGZpZWxkc2V0LmZ1bGwgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjY2UwZjRlYjsgY29sb3I6d2hpdGU7IH0KCi8qIHdoaXRlIGhvdmVyICovCmJvZHkud2hpdGUgbGVnZW5kOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpza3libHVlOyB9CmJvZHkud2hpdGUgc2VsZWN0OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojOTljYzY2N2Q7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPXRleHRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjpjeWFuOyB9CmJvZHkud2hpdGUgaW5wdXRbbmFtZT1jbWRdOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZSBpbnB1dFt0eXBlPWJ1dHRvbl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjdhY2M4YzsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQgdHI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIHRhYmxlLmNvbnRlbnQuYWN0aW9uIHRkOmxhc3QtY2hpbGQgeyBiYWNrZ3JvdW5kLWNvbG9yOnNreWJsdWU7IH0KYm9keS53aGl0ZSBoMTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CmJvZHkud2hpdGUgaDI6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGgzOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRoOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IH0KYm9keS53aGl0ZSB0YWJsZS5jb250ZW50IHRkLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzY0OTVlZDYzOyB9CmJvZHkud2hpdGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpib2R5LndoaXRlIGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzQ2ODJiNDZiOyB9CiAKLyogcHJpbnQgKi8KYm9keS5wcmludCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkucHJpbnQgbGVnZW5kLCBib2R5LnByaW50IHNlbGVjdCwgYm9keS5wcmludCBpbnB1dCwgYm9keS5wcmludCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IGJveC1zaGFkb3c6MHB4IDBweCAwcHggMHB4ICM2MjZiZDA7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCB0YWJsZS5jb250ZW50LmFjdGlvbiB0ZDpsYXN0LWNoaWxkIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYubmFtZSB7IGJhY2tncm91bmQtY29sb3I6bGlnaHRncmF5OyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyB9CmJvZHkucHJpbnQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBkaXYuaXRlbS5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQpib2R5LnByaW50IGRpdi5zdG9yeVtkYXRhLXR5cGU9c3BhcmtdIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LnByaW50IGZpZWxkc2V0LnBhbmVsIHsgYmFja2dyb3VuZDp3aGl0ZTsgY29sb3I6YmxhY2s7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgc3ZnIHsgYmFja2dyb3VuZC1jb2xvcjpsaWdodGdyYXk7IH0KYm9keS5wcmludCBmaWVsZHNldC5kcmF3IGRpdi5vdXRwdXQgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgfQoKYm9keS5tb2JpbGUgbGVnZW5kIHsgZm9udC1zaXplOjEuNnJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgc2VsZWN0IHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IGJvcmRlci1yYWRpdXM6MDsgbWFyZ2luLXJpZ2h0OjEwOyB9CmJvZHkubW9iaWxlIHRleHRhcmVhIHsgZm9udC1zaXplOjEuMnJlbTsgYm9yZGVyLXJhZGl1czowOyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9dGV4dF0geyBmb250LXNpemU6MS4ycmVtOyBoZWlnaHQ6MzhweDsgYm9yZGVyLXJhZGl1czowOyBtYXJnaW4tcmlnaHQ6NXB4OyB9CmJvZHkubW9iaWxlIGlucHV0W3R5cGU9YnV0dG9uXSB7IGZvbnQtc2l6ZToxLjJyZW07IGhlaWdodDozOHB4OyBib3JkZXItcmFkaXVzOjA7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuZmxvYXQgaW5wdXRbdHlwZT1idXR0b25dIHsgZm9udC1zaXplOjEuNHJlbTsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgdGFibGUubGF5b3V0IGRpdi50b2dnbGUgeyBmb250LXNpemU6NDhweDsgfQpib2R5Lm1vYmlsZSB0YWJsZS5jb250ZW50IHRoIHsgcGFkZGluZzo2cHggNnB4OyB9Cgpib2R5Lm1vYmlsZSB0YWJsZS5sYXlvdXQgdGQuY29udGVudCBkaXYudG9nZ2xlLnByb2plY3QgeyB3aWR0aDozMHB4OyB9CmJvZHkubW9iaWxlIHRhYmxlLmxheW91dCB0ZC5jb250ZW50IGRpdi50b2dnbGUucHJvZmlsZSB7IHdpZHRoOjMwcHg7IH0KCmJvZHkubW9iaWxlIGZvcm0ub3B0aW9uPmRpdi5pdGVtIHsgbWFyZ2luOjA7IGhlaWdodDozOHB4OyB9CmJvZHkubW9iaWxlIGRpdi5hY3Rpb24+ZGl2Lml0ZW0geyBtYXJnaW46MDsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgdG9wOjM4cHg7IH0KYm9keS5tb2JpbGU+ZGl2LmNhcnRlIGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZT5kaXYuaW5wdXQubG9naW4gaW5wdXQgeyBmb250LXNpemU6MS40cmVtOyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXVzZXJuYW1lXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlPmRpdi5pbnB1dC5sb2dpbiBpbnB1dFtuYW1lPXBhc3N3b3JkXSB7IHdpZHRoOjI2NHB4OyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LmlucHV0LmRhdGUgZGl2Lm91dHB1dCB0ZCB7IHBhZGRpbmc6OHB4IDIwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IHRvcDowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc3RhdGUudGltZSB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgaGVpZ2h0OjM4cHg7IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuSGVhZGVyLmhlYWQgZGl2Lm91dHB1dCBkaXYgeyBoZWlnaHQ6MzhweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlci5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMjQzOTUwYmY7IGZvbnQtc2l6ZToxLjZyZW07IG1pbi13aWR0aDoyNDBweDsgcG9zaXRpb246Zml4ZWQ7IHRvcDozcmVtOyB6LWluZGV4OjEwOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyB3aWR0aDozMjBweDsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNnJlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5BY3Rpb24ubWFpbiB7IG1hcmdpbi10b3A6M3JlbTsgbWFyZ2luLWJvdHRvbTozcmVtOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkFjdGlvbi5tYWluLmNtZCB7IG1hcmdpbi10b3A6MDsgbWFyZ2luLWJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCB7IGJhY2tncm91bmQtY29sb3I6IzAwMDAwMGI4OyBmb250LXNpemU6MS42cmVtOyBoZWlnaHQ6M3JlbTsgcG9zaXRpb246Zml4ZWQ7IGJvdHRvbTowOyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LkZvb3Rlci5mb290IGRpdi5vdXRwdXQgeyBoZWlnaHQ6M3JlbTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5Gb290ZXIuZm9vdCBkaXYub3V0cHV0IGRpdiB7IGhlaWdodDoyLjZyZW07IH0KYm9keS5tb2JpbGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgaGVpZ2h0OjM4cHg7IH0KCmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCB7IHBvc2l0aW9uOnVuc2V0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5IZWFkZXIuaGVhZCBkaXYuc2VhcmNoPmlucHV0IHsgd2lkdGg6MjQwcHg7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LkhlYWRlci5oZWFkIGRpdi5zdGF0ZS50aW1lIHsgZGlzcGxheTpibG9jazsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuQWN0aW9uLm1haW4geyBtYXJnaW4tdG9wOjA7IG1hcmdpbi1ib3R0b206MDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgeyBwb3NpdGlvbjp1bnNldDsgfQpib2R5Lm1vYmlsZS5sYW5kc2NhcGUgZmllbGRzZXQuRm9vdGVyLmZvb3QgaW5wdXRbbmFtZT1jbWRdIHsgd2lkdGg6MjQwcHg7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5kcmF3LnRyZW5kIGRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcuc3BpZGUgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUubGFuZHNjYXBlIGZpZWxkc2V0LmRyYXcudHJlbmQgZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KYm9keS5tb2JpbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgaGVpZ2h0OjE2MHB4OyBmbG9hdDpub25lOyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBkaXYub3V0cHV0LmNhcmQgZGl2Lml0ZW0geyB3aWR0aDphdXRvOyBmbG9hdDpsZWZ0OyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6YXV0bzsgZmxvYXQ6bGVmdDsgfQoKLyogbWlzYyAqLwpib2R5Lm1vYmlsZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2ggZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya10geyBwYWRkaW5nOjBweDsgbWFyZ2luOjBweDsgfQpmaWVsZHNldC5wYW5lbC5BY3Rpb24uY21kPmRpdi50b2dnbGUucHJvamVjdCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wbHVnaW4uY29uZmlnIGZvcm0ub3B0aW9uIGlucHV0W25hbWU9a2V5XSB7IHdpZHRoOjI0MHB4OyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGx1Z2luLnBhcnNlLmNtZD5kaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBsdWdpbi5wYXJzZS5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQpib2R5Lm1vYmlsZSBmaWVsZHNldC5wbGFuPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5wYW5lbC5TZWFyY2ggYSB7IGNvbG9yOnllbGxvdzsgfQpib2R5LmJsYWNrIGEgeyBjb2xvcjp5ZWxsb3c7IH0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LkhlYWRlciB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IGhlaWdodDo2MHB4OyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyIHsgYm9yZGVyLXJpZ2h0OnNvbGlkIDFweCAjZTdlN2U3OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgeyBwYWRkaW5nOjEwcHggMTBweDsgd2lkdGg6MjAwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IGNvbG9yOmJsYWNrOyBwYWRkaW5nOjEwcHggNDBweDsgYm9yZGVyLWxlZnQ6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5pdGVtLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzAxNTJkOTsgY29sb3I6d2hpdGU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYubGlzdCBkaXYuaXRlbSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyBib3JkZXItbGVmdDpub25lOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0uc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDE1MmQ5OyBjb2xvcjp3aGl0ZTsgfQoKYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IGJvcmRlci1ib3R0b206IHNvbGlkIDFweCByZWQ7IGhlaWdodDozOHB4OyB3aWR0aDo2MDBweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2LmFjdGlvbiBkaXYudGFicyB7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCB7IG1hcmdpbi10b3A6NThweDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXIgeyBib3gtc2hhZG93Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5BY3Rpb24+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4uaW5uZXI+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuQWN0aW9uPmRpdi5vdXRwdXQ+ZmllbGRzZXQucGx1Z2luLmlubmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KCmJvZHkuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBkaXYuaXRlbSB7IG1pbi13aWR0aDoyNDBweDsgYm9yZGVyLXJhZGl1czo1cHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgYm94LXNoYWRvdzo1cHggNXB4IDEwcHggNXB4IGdyYXk7IH0KYm9keS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGRpdi5pdGVtPmRpdi50aXRsZSB7IGJvcmRlci1ib3R0b206c29saWQgMXB4ICNlN2U3ZTc7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuZmVlbC5mbG9hdCB7IHRvcDowOyB9CgpkaXYub3V0cHV0IGRpdi5yb3cgZGl2LmNvbCB7IGZsb2F0OmxlZnQ7IGJvcmRlcjpzb2xpZCAxcHggZ3JlZW47IH0KCmJvZHkud2hpdGUuc2ltcGxlIGRpdi5wcm9maWxlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5kaXNwbGF5IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5jb2RlIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZTsgY29sb3I6YmxhY2s7IGJvcmRlcjpub25lOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LnBsdWdpbiBkaXYuc3RhdHVzIHsgYm9yZGVyLXRvcDoxcHggc29saWQgbGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlPmRpdi5jYXJ0ZSB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGJvcmRlcjpzb2xpZCAxcHggI2U3ZTdlNzsgfQpib2R5LndoaXRlLnNpbXBsZT5kaXYuY2FydGUgZGl2Lml0ZW0geyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBkaXYuY2FydGUgZGl2Lml0ZW06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNlM2U2ZjE7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuIHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOmJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQucGx1Z2luIGRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLm5vbmNlIHsgY29sb3I6bGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGRpdi5vdXRwdXQuY2FyZCBpbnB1dFt0eXBlPWJ1dHRvbl0geyBiYWNrZ3JvdW5kLWNvbG9yOiMwMTUyZDk7IGZvbnQtc2l6ZTowLjhyZW07IHBhZGRpbmc6NXB4IDEwcHg7IGJveC1zaGFkb3c6MnB4IDJweCA2cHggMXB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dC5jYXJkIGlucHV0W3R5cGU9YnV0dG9uXTpob3ZlciB7IGJveC1zaGFkb3c6MnB4IDJweCA4cHggMnB4IGdyYXk7IH0KYm9keS53aGl0ZS5zaW1wbGUgZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuem9uZT5kaXYuYWN0aW9uPmRpdi5pdGVtIGlucHV0W3R5cGU9dGV4dF0geyBjb2xvcjpibGFjazsgfQoKYm9keS53aGl0ZSBkaXYucHJvamVjdC5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUgZGl2LnByb2ZpbGUuYXV0byB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LmJsYWNrIGRpdi5wcm9qZWN0LmF1dG8geyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IH0KYm9keS5ibGFjayBkaXYucHJvZmlsZS5hdXRvIHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmRpdi5wcm9qZWN0LmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDowOyB6LWluZGV4OjEwOyB9CmRpdi5wcm9maWxlLmF1dG8geyBwb3NpdGlvbjphYnNvbHV0ZTsgcmlnaHQ6MDsgei1pbmRleDoxMDsgfQpmaWVsZHNldC5wbHVnaW4ubG9jYXRpb24+ZGl2LmFjdGlvbiBpbnB1dFt0eXBlPXRleHRdIHsKCXdpZHRoOjQwcHg7Cn0KCmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsYWNrOyB9CmZpZWxkc2V0Lnh0ZXJtPmRpdi5hY3Rpb24+ZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQpmaWVsZHNldC54dGVybT5kaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjpibGFjazsgfQo=",
        "usr/volcanos/page/index.html": "PCFET0NUWVBFIGh0bWw+CjxoZWFkPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCxpbml0aWFsLXNjYWxlPTAuOCxtYXhpbXVtLXNjYWxlPTAuOCx1c2VyLXNjYWxhYmxlPTAiPgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiPjx0aXRsZT52b2xjYW5vczwvdGl0bGU+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIHR5cGU9InRleHQvY3NzIiBocmVmPSIvcGFnZS9pbmRleC5jc3MiPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiB0eXBlPSJ0ZXh0L2NzcyIgaHJlZj0iL3BhZ2UvY2FjaGUuY3NzIj4KICAgIDxsaW5rIHJlbD0ic2hvcnRjdXQgaWNvbiIgdHlwZT0iaW1hZ2UvaWNvIiBocmVmPSIvZmF2aWNvbi5pY28iPgo8L2hlYWQ+Cjxib2R5PgogICAgPHNjcmlwdCBzcmM9Ii9wcm90by5qcyI+PC9zY3JpcHQ+CiAgICA8c2NyaXB0IHNyYz0iL3BhZ2UvY2FjaGUuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Ii9wYWdlL2luZGV4LmpzIj48L3NjcmlwdD4KPC9ib2R5PgoK",
        "usr/volcanos/page/index.js": "Vm9sY2Fub3Moe25hbWU6ICJjaGF0Iiwgcml2ZXI6IHsKCXByb2R1Y3Q6IHtuYW1lOiAi5Lqn5ZOB576kIiwgc3Rvcm06IHsKCQlvZmZpY2U6IHtuYW1lOiAi5Yqe5YWsIG9mZmljZSIsICBsaXN0OiBbCgkJCXtuYW1lOiAiZmVlbCIsIGhlbHA6ICLlvbHpn7PlqpLkvZMiLCBpbmRleDogIndlYi53aWtpLmZlZWwifSwKCQkJe25hbWU6ICJkcmF3IiwgaGVscDogIuaAnee7tOWvvOWbviIsIGluZGV4OiAid2ViLndpa2kuZHJhdyJ9LAoJCQl7bmFtZTogImRhdGEiLCBoZWxwOiAi5pWw5o2u6KGo5qC8IiwgaW5kZXg6ICJ3ZWIud2lraS5kYXRhIn0sCgkJCXtuYW1lOiAicGxhbiIsIGhlbHA6ICLorqHliJLku7vliqEiLCBpbmRleDogIndlYi50ZWFtLnBsYW4ifSwKCQkJe25hbWU6ICJjb250ZXh0IiwgaGVscDogIue8lueoiyIsIGluZGV4OiAid2ViLndpa2kud29yZCIsIGFyZ3M6IFsic3JjL21haW4uc2h5Il19LAoJCV19LAoJfX0sCglwcm9qZWN0OiB7bmFtZTogIueglOWPkee+pCIsIHN0b3JtOiB7CgkJc3R1ZGlvOiB7bmFtZTogIueglOWPkSBzdHVkaW8iLCBsaXN0OiBbCgkJCXtuYW1lOiAidmltZXIiLCBoZWxwOiAi57yW6L6R5ZmoIiwgaW5kZXg6ICJ3ZWIuY29kZS52aW1lciJ9LAoJCQl7bmFtZTogInJlcG9zIiwgaGVscDogIuS7o+eggeW6kyIsIGluZGV4OiAid2ViLmNvZGUuZ2l0LnN0YXR1cyJ9LAoJCQl7bmFtZTogInBsYW4iLCBoZWxwOiAi5Lu75Yqh6KGoIiwgaW5kZXg6ICJ3ZWIudGVhbS5wbGFuIn0sCgkJCXtuYW1lOiAidG9kbyIsIGhlbHA6ICLlvoXlip7pobkiLCBpbmRleDogIndlYi50ZWFtLnRvZG8ifSwKCQkJe25hbWU6ICJjdHgiLCBoZWxwOiAi5LiK5LiL5paHIiwgaW5kZXg6ICJ3ZWIud2lraS53b3JkIn0sCgkJXX0sCgl9fSwKCXByb2ZpbGU6IHtuYW1lOiAi5rWL6K+V576kIiwgc3Rvcm06IHsKCQl3ZWJzaXRlOiB7bmFtZTogIuWumuWItiB3ZWJzaXRlIiwgaW5kZXg6IFsKCQkJIndlYi5jaGF0LndlYnNpdGUiLAoJCQkid2ViLmNoYXQuZGl2IiwKCQkJIndlYi5jb2RlLnZpbWVyIiwKCQkJIndlYi5kcmVhbSIsCgkJXX0sCgkJcmVsZWFzZToge25hbWU6ICLlj5HluIMgcmVsZWFzZSIsIGluZGV4OiBbCgkJCSJ3ZWIuY29kZS5pbnN0YWxsIiwgIndlYi5jb2RlLnVwZ3JhZGUiLCAid2ViLmNvZGUucHVibGlzaCIsICJ3ZWIuY29kZS5jb21waWxlIiwgIndlYi5jb2RlLmF1dG9nZW4iLCAid2ViLmNvZGUuYmlucGFjayIsICJ3ZWIuY29kZS53ZWJwYWNrIiwKCQkJIndlYi5jb2RlLmdpdC5zdGF0dXMiLCAid2ViLmNvZGUuZ2l0LnNlcnZlciIsCgkJXX0sCgkJcmVzZWFyY2g6IHtuYW1lOiAi5rWL6K+VIHJlc2VhcmNoIiwgaW5kZXg6IFsKCQkJIndlYi5jb2RlLmZhdm9yIiwgIndlYi5jb2RlLmJlbmNoIiwgIndlYi5jb2RlLnBwcm9mIiwKCQkJIndlYi5jb2RlLmNhc2UiLAoJCV19LAoJfX0sCglvcGVyYXRlOiB7bmFtZTogIui/kOe7tOe+pCIsIHN0b3JtOiB7CgkJYWFhOiB7bmFtZTogIuadg+mZkCBhYWEiLCBpbmRleDogWwoJCQkidXNlciIsICJ0b3RwIiwgInNlc3MiLCAicm9sZSIsCgkJXX0sCgkJd2ViOiB7bmFtZTogIuW6lOeUqCB3ZWIiLCBpbmRleDogWwoJCQkic2VydmUiLCAic3BhY2UiLCAiZHJlYW0iLCAicm91dGUiLAoJCQkic2hhcmUiLCAic3BpZGUiLCAiY2FjaGUiLCAic3RvcnkiLAoJCV19LAoJCWNsaToge25hbWU6ICLns7vnu58gY2xpIiwgaW5kZXg6IFsKCQkJInFyY29kZSIsICJkYWVtb24iLCAic3lzdGVtIiwgInJ1bnRpbWUiLCAibWlycm9ycyIsICJmb3JldmVyIiwKCQldfSwKCQluZnM6IHtuYW1lOiAi5paH5Lu2IG5mcyIsIGluZGV4OiBbCgkJCSJjYXQiLCAiZGlyIiwgInBvcnQiLCAidGFpbCIsICJ0cmFzaCIsCgkJXX0sCgl9fSwKfX0pCg==",
        "usr/volcanos/page/package-lock.json": "ewogICJyZXF1aXJlcyI6IHRydWUsCiAgImxvY2tmaWxlVmVyc2lvbiI6IDEsCiAgImRlcGVuZGVuY2llcyI6IHsKICAgICJ4dGVybSI6IHsKICAgICAgInZlcnNpb24iOiAiNC4xOS4wIiwKICAgICAgInJlc29sdmVkIjogImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL3h0ZXJtLy0veHRlcm0tNC4xOS4wLnRneiIsCiAgICAgICJpbnRlZ3JpdHkiOiAic2hhNTEyLWMzQ3A0ZU9Wc1lZNVE4MzlkUjVJZWpnaFJQcHhjaUdtTFdXYVA5ZytwcGZNZUJDaE1lTGExRENBK3BtWC9qeURaK3p4Rk9tbEpMLzgycVZkYXlWb0dRPT0iCiAgICB9LAogICAgInh0ZXJtLWFkZG9uLWZpdCI6IHsKICAgICAgInZlcnNpb24iOiAiMC41LjAiLAogICAgICAicmVzb2x2ZWQiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcveHRlcm0tYWRkb24tZml0Ly0veHRlcm0tYWRkb24tZml0LTAuNS4wLnRneiIsCiAgICAgICJpbnRlZ3JpdHkiOiAic2hhNTEyLURzUzlmcWhYSGFjRW1zUHhCSlp2ZmoybGEzMEl6OXhrK1VLamhRZ25ZTmtyVUlONUNZTGJ3N1dFZnoxMTdjNytTODZTL3RwSFBmdk54SnNGNS9HOHdRPT0iCiAgICB9LAogICAgInh0ZXJtLWFkZG9uLXdlYi1saW5rcyI6IHsKICAgICAgInZlcnNpb24iOiAiMC42LjAiLAogICAgICAicmVzb2x2ZWQiOiAiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcveHRlcm0tYWRkb24td2ViLWxpbmtzLy0veHRlcm0tYWRkb24td2ViLWxpbmtzLTAuNi4wLnRneiIsCiAgICAgICJpbnRlZ3JpdHkiOiAic2hhNTEyLUg2WHpqV1dadThGQm8rZm5ZcHhkUGs5dzVNNmRyYnN2d1BFSlpHUlMzOE1paGlRYVZGcEtsQ01LZGZSZ0RiS0dFNTMwdHcxeUg1NHJocFpmSGd0Mi9BPT0iCiAgICB9CiAgfQp9Cg==",
        "usr/volcanos/page/package.json": "ewogICJkZXBlbmRlbmNpZXMiOiB7CiAgICAieHRlcm0iOiAiXjQuMTkuMCIsCiAgICAieHRlcm0tYWRkb24tZml0IjogIl4wLjUuMCIsCiAgICAieHRlcm0tYWRkb24td2ViLWxpbmtzIjogIl4wLjYuMCIKICB9Cn0K",
        "usr/volcanos/panel/action.css": "ZmllbGRzZXQuQWN0aW9uIHsgYmFja2dyb3VuZC1jb2xvcjpyZ2JhKDExNCwgMTUzLCAxNjIsIDAuNTQpOyBtaW4td2lkdGg6MTYwcHg7IH0KZmllbGRzZXQuQWN0aW9uPmRpdi5hY3Rpb24geyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2Yjsgd2lkdGg6aW5oZXJpdDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQ6IzY0OTVlZDYzOyB9CmZpZWxkc2V0LkFjdGlvbj5kaXYuYWN0aW9uIGRpdi50YWJzOmhvdmVyIHsgYmFja2dyb3VuZDojNjQ5NWVkNjM7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2LmFjdGlvbiB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dD5maWVsZHNldD5sZWdlbmQgeyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQuQWN0aW9uLnRhYnM+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4uc2VsZWN0IHsgZGlzcGxheTpibG9jazsgfQoKZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkFjdGlvbi5ncmlkPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzphdXRvOyB9CgpmaWVsZHNldC5BY3Rpb24uZnJlZT5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHBvc2l0aW9uOmFic29sdXRlOyB9CmZpZWxkc2V0LkFjdGlvbi5mcmVlPmRpdi5vdXRwdXQgZmllbGRzZXQucGx1Z2luLnNlbGVjdCB7IGRpc3BsYXk6YmxvY2s7IH0KZmllbGRzZXQuQWN0aW9uLmZsb3c+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4geyBmbG9hdDpsZWZ0OyB9CgpmaWVsZHNldC5wYW5lbC5jbWQ+ZGl2Lm91dHB1dD5maWVsZHNldC5wbHVnaW4geyBwYWRkaW5nOjA7IG1hcmdpbjowOyB9CmZpZWxkc2V0LnBhbmVsLmNtZD5kaXYub3V0cHV0PmZpZWxkc2V0LnBsdWdpbj5sZWdlbmQgeyBwYWRkaW5nOjAgMTBweDsgbWFyZ2luLXJpZ2h0OjNweDsgZmxvYXQ6bGVmdDsgfQoKZmllbGRzZXQuQWN0aW9uPmRpdi5wcm9qZWN0LnRvZ2dsZSB7CgliYWNrZ3JvdW5kLWNvbG9yOmNvcm5zaWxrOyBvcGFjaXR5OjAuNDsgY29sb3I6dGVhbDsgZm9udC1zaXplOiAyOHB4OyBwYWRkaW5nLXRvcDogNTBweDsgaGVpZ2h0OiAxMDBweDsgd2lkdGg6MjBweDsgcG9zaXRpb246IGZpeGVkOyB0b3A6IDMwJTsKCWJvcmRlci10b3AtcmlnaHQtcmFkaXVzOjIwcHg7IGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjIwcHg7Cn0KCmRpdi5oZWFkIHsgYmFja2dyb3VuZC1jb2xvcjojNDA0MDQwOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHg7IGhlaWdodDo0MnB4OyBjbGVhcjpib3RoOyB9CmRpdi5oZWFkIGRpdi51c2VybmFtZSB7IGZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6MTBweDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgZGl2Lm5hbWUgeyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmhlYWQgZGl2LnVzZXJuYW1lIGRpdi5pY29uIHsgZmxvYXQ6bGVmdDsgfQpkaXYuaGVhZCBkaXYudXNlcm5hbWUgaW1nIHsgaGVpZ2h0OjQycHg7IH0KZGl2LmhlYWQgZGl2Lm1lbnUgeyBjdXJzb3I6cG9pbnRlcjsgcGFkZGluZzoxMHB4OyBmbG9hdDpsZWZ0OyB9CmRpdi5oZWFkPmRpdi5tZW51OmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB9CmRpdi5sZWZ0IHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyB3aWR0aDoxNjBweDsgcGFkZGluZzoyMHB4OyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmRpdi5sZWZ0IGRpdi5pdGVtIHsgYmFja2dyb3VuZC1jb2xvcjojMzIzMjMyOyBjb2xvcjp3aGl0ZTsgcGFkZGluZzo1cHggMTBweDsgfQpkaXYubGVmdCBkaXYuaXRlbTpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgfQpkaXYubGVmdCBkaXYudXNlcm5hbWUgZGl2IHsgY29sb3I6d2hpdGU7IHRleHQtYWxpZ246Y2VudGVyOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmxlZnQgZGl2LnVzZXJuYW1lIGltZyB7IHdpZHRoOjEyMHB4OyB9CmRpdi5tYWluIGlmcmFtZSB7IGJvcmRlcjowOyB9CmRpdi5tYWluIGlucHV0W3R5cGU9YnV0dG9uXSB7IHBhZGRpbmc6MCAyMHB4OyB9CmRpdi5tYWluIHsgYmFja2dyb3VuZC1jb2xvcjojY2NjY2NjOyBjb2xvcjpibGFjazsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4geyBiYWNrZ3JvdW5kLWNvbG9yOiNmOGY4Zjg7IHBhZGRpbmc6MTBweDsgbWFyZ2luOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGxlZ2VuZCB7IG1hcmdpbi1ib3R0b206MTBweDsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gc2VsZWN0IHsgb3V0bGluZTpub25lOyBib3gtc2hhZG93Om5vbmU7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIGZvcm0ub3B0aW9uIHsgZGlzcGxheTpibG9jazsgY2xlYXI6Ym90aDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gZm9ybS5vcHRpb24gZGl2Lml0ZW0geyBtYXJnaW46NXB4OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiBkaXYuYWN0aW9uIGRpdi5pdGVtIHsgbWFyZ2luOjVweDsgfQpkaXYubWFpbiBmaWVsZHNldC5wbHVnaW4gdGFibGUuY29udGVudCB0ciB7IGJvcmRlcjpzb2xpZCAxcHggbGlnaHRncmF5OyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmRpdi5tYWluIGZpZWxkc2V0LnBsdWdpbiB0YWJsZS5jb250ZW50IHRoIHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyBwYWRkaW5nOjEwcHg7IH0KZGl2Lm1haW4gZmllbGRzZXQucGx1Z2luIHRhYmxlLmNvbnRlbnQgdGQgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBwYWRkaW5nOjEwcHg7IH0KZGl2LmZvb3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0MDQwNDA7IGNvbG9yOndoaXRlOyBwYWRkaW5nOjVweDsgaGVpZ2h0OjQycHg7IGNsZWFyOmJvdGg7IH0KZGl2LmZvb3QgZGl2LnVzZXJuYW1lIHsgZmxvYXQ6cmlnaHQ7IG1hcmdpbi1yaWdodDoxMHB4OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBkaXYubmFtZSB7IHBhZGRpbmc6MTBweDsgZmxvYXQ6bGVmdDsgfQpkaXYuZm9vdCBkaXYudXNlcm5hbWUgZGl2Lmljb24geyBmbG9hdDpsZWZ0OyB9CmRpdi5mb290IGRpdi51c2VybmFtZSBpbWcgeyBoZWlnaHQ6NDJweDsgfQpkaXYuZm9vdCBkaXYubWVudSB7IGN1cnNvcjpwb2ludGVyOyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7IH0KZGl2LmZvb3Q+ZGl2Lm1lbnU6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMzMjMyMzI7IH0KCmRpdi50YWJzOmhvdmVyIHsKCWJhY2tncm91bmQtY29sb3I6IzI3MjcyNzsKfQpkaXYudGFicyBkaXYubmFtZSB7CgloZWlnaHQ6NDZweDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKCXBvc2l0aW9uOnN0aWNreTsgdG9wOjVweDsKCXotaW5kZXg6MTsKfQpkaXYudGFicyBkaXYubmFtZSBkaXYuaXRlbSB7Cgljb2xvcjpncmF5OyBwYWRkaW5nOjEwcHg7IGZsb2F0OmxlZnQ7Cn0KZGl2LnRhYnMgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY29sb3I6d2hpdGU7CiAJYm9yZGVyLWJvdHRvbTpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzIGRpdi5wYWdlIHsKCW92ZXJmbG93OmF1dG87IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IHsKCXBhZGRpbmc6NXB4OyBwb3NpdGlvbjpzdGlja3k7IHRvcDowcHg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2LmlucHV0IGlucHV0IHsKCWJhY2tncm91bmQtY29sb3I6IzIxMjEyMTsgY29sb3I6d2hpdGU7IGJvcmRlcjowOyBvdXRsaW5lOm5vbmU7IHdpZHRoOjIzMHB4Owp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5pdGVtIHsKCWJhY2tncm91bmQtY29sb3I6IzQwNDA0MDsgY2xlYXI6Ym90aDsgZGlzcGxheTpub25lOwp9CmRpdi50YWJzIGRpdi5wYWdlPmRpdi5saXN0IHsKCXBhZGRpbmctbGVmdDoyMHB4OyBkaXNwbGF5Om5vbmU7IGNsZWFyOmJvdGg7Cn0KZGl2LnRhYnMgZGl2LnBhZ2U+ZGl2Lmxpc3Quc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6IzMyMzIzMjsgZGlzcGxheTpibG9jazsKfQpkaXYubGVmdCBkaXYubGlzdCB7CglwYWRkaW5nLWxlZnQ6MjBweDsKfQoKZGl2LnRhYnMubGVmdCBkaXYubmFtZSB7CglmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0gewoJYm9yZGVyLWJvdHRvbTpub25lOyBmbG9hdDpub25lOwp9CmRpdi50YWJzLmxlZnQgZGl2Lm5hbWUgZGl2Lml0ZW0uc2VsZWN0IHsKCWJvcmRlci1yaWdodDpzb2xpZCByZWQgMnB4Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2UgewoJd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsKIAljbGVhcjpub25lOyBmbG9hdDpsZWZ0Owp9CmRpdi50YWJzLmxlZnQgZGl2LnBhZ2U+ZGl2Lml0ZW0gewoJZGlzcGxheTpibG9jazsKfQoKZGl2LnRhYnMudm9pZCBkaXYubmFtZSB7CglkaXNwbGF5Om5vbmU7Cn0KZGl2LnRhYnMudm9pZCBkaXYucGFnZT5kaXYuaXRlbSB7CglkaXNwbGF5OmJsb2NrOwp9Cgo=",
        "usr/volcanos/panel/action.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgcml2ZXIgPSBjYW4uQ29uZihjaGF0LlJJVkVSKSwgc3Rvcm0gPSBjYW4uQ29uZihjaGF0LlNUT1JNKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uY29yZS5OZXh0KG1zZy5UYWJsZSgpLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWl0ZW0uaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKS1jYW4uQ29uZihodG1sLk1BUkdJTl9ZKQoJCQlpdGVtLndpZHRoID0gY2FuLkNvbmZXaWR0aCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1gpCgkJCWl0ZW0uZmVhdHVyZSA9IGNhbi5iYXNlLk9iaihpdGVtLmZlYXR1cmV8fGl0ZW0ubWV0YSkKCQkJaXRlbS5pbnB1dHMgPSBjYW4uYmFzZS5PYmooaXRlbS5pbnB1dHN8fGl0ZW0ubGlzdCkKCgkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCBpdGVtLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBtZXRhLndpZHRoLShjYW4udXNlci5pc1dpbmRvd3M/IDIwOiAwKSkKCQkJCWNhbi5vbmltcG9ydC5fcGx1Z2luKGNhbiwgcml2ZXIsIHN0b3JtLCBzdWIsIG1ldGEpLCBza2lwIHx8IG5leHQoKQoJCQl9KQoJCX0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25hY3Rpb24ubGF5b3V0KGNhbiwgY2FuLm1pc2MuU2VhcmNoT3JDb25mKGNhbiwgY2hhdC5MQVlPVVQpfHxWb2xjYW5vcy5tZXRhLmFyZ3MubGF5b3V0LCB0cnVlKQoJCQljYW4ub25pbXBvcnQuX21lbnUoY2FuLCBtc2cpLCBjYW4ub25rZXltYXAuX2luaXQoY2FuKQoJCX0pCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCByaXZlciwgc3Rvcm0sIHN1YiwgbWV0YSkgeyBzdWIuX3RhcmdldC5fbWV0YSA9IG1ldGEKCQltZXRhLmlkICYmIChzdWIuX29wdGlvbi5kYXRhc2V0ID0gc3ViLl9vcHRpb24uZGF0YXNldHx8e30sIHN1Yi5fb3B0aW9uLmRhdGFzZXQuaWQgPSBtZXRhLmlkKQoKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7CgkJCXJldHVybiBjYW4ucnVuKHN1Yi5yZXF1ZXN0KGV2ZW50KSwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW3JpdmVyLCBzdG9ybSwgbWV0YS5pZHx8bWV0YS5pbmRleF0sIGNtZHMpLCBjYikKCQl9LCBjYW4uX3BsdWdpbnMgPSBjYW4ubWlzYy5jb25jYXQoY2FuLCBjYW4uX3BsdWdpbnMsIFtzdWJdKQoKCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX2FjdGlvbiwgW3t2aWV3OiBbaHRtbC5UQUJTLCBodG1sLkRJViwgbWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkZJRUxEU0VUX1BMVUdJTiwgc3ViLl90YXJnZXQpCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KQoJCX0sIG9ubW91c2VlbnRlcjogc3ViLl9sZWdlbmQub25tb3VzZWVudGVyLCBvbmRibGNsaWNrOiBzdWIuX2xlZ2VuZC5vbmNsaWNrfV0pCgl9LAoJX21lbnU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGlmIChjYW4udXNlci5tb2QuaXNQb2QgfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uc2V0SGVhZGVyTWVudShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0Lk1FTlVTKSwgY2FuLkNvbmYoY2hhdC5NRU5VUyl8fGNhbi5vbmFjdGlvbi5fbWVudXMpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBsaXN0KSB7CgkJCWNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25hY3Rpb24sIGxpc3RbMF1dLCBbY2FuLCBidXR0b25dKQoJCX0pCgl9LAoJX3NoYXJlOiBmdW5jdGlvbihjYW4sIHNoYXJlKSB7IHNoYXJlICYmIGNhbi5ydW4oe30sIFt3ZWIuU0hBUkUsIHNoYXJlXSwgZnVuY3Rpb24obXNnKSB7CgkJbXNnLkxlbmd0aCgpID09IDEgJiYgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05BQ1RJT05fQ01EKQoJCWNhbi5zZXRIZWFkZXIoY2hhdC5UT1BJQywgbXNnLk9wdGlvbk9yU2VhcmNoKGNoYXQuVE9QSUMpKQoJCWNhbi51c2VyLnRpdGxlKG1zZy5PcHRpb25PclNlYXJjaChjaGF0LlRJVExFKSkKCgkJY2FuLkNvbmYoY2hhdC5SSVZFUiwgd2ViLlNIQVJFLCBjaGF0LlNUT1JNLCBzaGFyZSkKCQltc2cuTGVuZ3RoKCkgPiAwICYmIGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZykKCX0pIH0sCglfY21kOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG5leHQpIHsKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9DTUQpCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGNhbi5iYXNlLkNvcHkoaXRlbSwge29wdHM6IGNhbi5taXNjLlNlYXJjaChjYW4pLCBtb2RlOiAiY21kIn0pLCBmdW5jdGlvbihzdWIsIG1ldGEsIHNraXApIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgewoJCQkJY2FuLnJlcXVlc3QoZXZlbnQsIHtoZWlnaHQ6IHN1Yi5Db25mSGVpZ2h0KCksIHdpZHRoOiBjYW4uQ29uZldpZHRoKCl9KQoJCQkJY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIHN1Yi5faW5kZXgsIGNtZHMsIGNiKQoJCQl9CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktY2FuLkNvbmYoaHRtbC5NQVJHSU5fWSkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi51c2VyLnRpdGxlKG1ldGEubmFtZSksIHNraXAgfHwgbmV4dCgpCgkJfSkKCX0sCgloZWlnaHQ6IGZ1bmN0aW9uKGNhbiwgaGVpZ2h0KSB7CgkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLl90YXJnZXQsIGhlaWdodCkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi6Kej5p6Q5byV5pOOIiwgX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIHBhZ2UsIG1zZywgY2FuLCBjbWRzLCBjYikgewoJdmFyIHN0b3JtID0gY2FuLmNvcmUuVmFsdWUoY2FuLl9yb290LCBjYW4uY29yZS5LZXlzKGNoYXQuUklWRVIsIGNtZHNbMF0sIGNoYXQuU1RPUk0sIGNtZHNbMV0pKQoJaWYgKCFzdG9ybSB8fCBjbWRzLmxlbmd0aCAhPSAyKSB7IHJldHVybiBmYWxzZSB9CgoJaWYgKHN0b3JtLmluZGV4KSB7IC8vIOWRveS7pOe0ouW8lQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT01NQU5ELCBbXS5jb25jYXQoc3Rvcm0uaW5kZXgpLCBjYikKCX0gZWxzZSB7IC8vIOWRveS7pOWIl+ihqAoJCWNhbi5jb3JlLkxpc3Qoc3Rvcm0ubGlzdCwgZnVuY3Rpb24odmFsdWUpIHsKCQkJbXNnLlB1c2gobWRiLk5BTUUsIHZhbHVlLm5hbWV8fCIiKQoJCQltc2cuUHVzaChtZGIuSEVMUCwgdmFsdWUuaGVscHx8IiIpCgkJCW1zZy5QdXNoKGN0eC5JTlBVVFMsIEpTT04uc3RyaW5naWZ5KHZhbHVlLmlucHV0cykpCgkJCW1zZy5QdXNoKGN0eC5GRUFUVVJFLCBKU09OLnN0cmluZ2lmeSh2YWx1ZS5mZWF0dXJlKSkKCQkJbXNnLlB1c2goY3R4LklOREVYLCB2YWx1ZS5pbmRleHx8IiIpCgkJCW1zZy5QdXNoKGN0eC5BUkdTLCB2YWx1ZS5hcmdzfHwiW10iKQoJCQltc2cuUHVzaChjdHguU1RZTEUsIHZhbHVlLnN0eWxlfHwiIikKCQkJbXNnLlB1c2goY3R4LkRJU1BMQVksIHZhbHVlLmRpc3BsYXl8fCIiKQoJCQltc2cuUHVzaChpY2UuTVNHX0FDVElPTiwgdmFsdWUuX2FjdGlvbnx8IiIpCgkJfSksIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfQoJcmV0dXJuIHRydWUKfX0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJwYXJzZSI6IHNoeSgi6Kej5p6QIiwgewoJCSJzaG93IjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgdmFyIG5hbWUgPSBjbWRzWzFdfHwiY2FuIgoJCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUobmFtZSkKCQkJY21kcyAmJiBjbWRzWzBdICYmIFZvbGNhbm9zKG5hbWUsIHtfZm9sbG93OiBjYW4uY29yZS5LZXlzKGNhbi5fZm9sbG93LCBuYW1lKX0sIFsiL3BsdWdpbi9zdG9yeS9wYXJzZS5qcyJdLCBmdW5jdGlvbihzdWIpIHsKCQkJCXN1Yi5ydW4gPSBjYW4ucnVuLCBzdWIuT3B0aW9uID0gZnVuY3Rpb24oKSB7fSwgY2FuLmlzQ21kTW9kZSgpICYmIHN1Yi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodCkKCQkJCXN1Yi5vbmFwcGVuZC5wYXJzZShzdWIsIHN1Yi5vbmFwcGVuZC5fcGFyc2Uoc3ViLCBjbWRzWzBdLCBuYW1lLCBzdWIuQ29uZkhlaWdodCgpKSwgY2FuLl9vdXRwdXQpCgkJCQljYW4ub25lbmdpbmUubGlzdGVuKGNhbiwgIm1lbnUiLCBmdW5jdGlvbihtc2cpIHsKCQkJCQlkZWxldGUobXNnLl9ldmVudCksIGRlbGV0ZShtc2cuX2NhbikKCQkJCQljYW4udXNlci50b2FzdChjYW4sIEpTT04uc3RyaW5naWZ5KG1zZykpCgkJCQl9KQoJCQl9KQoJCX0sCgl9LCBbInRleHQiLCAibmFtZSIsICJzaG93OmJ1dHRvbkBhdXRvIiwgImNsZWFyOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLl9yb290LkFjdGlvbi5ydW4oe30sIGNtZHMsIGNiLCB0cnVlKQoJfSksCgoJInBsdWdpbiI6IHNoeSgi5o+S5Lu2Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJfSksCgkibmZzLnNhdmUiOiBzaHkoIuS/neWtmOaWh+S7tiIsIHt9LCBbImZpbGU9aGkudHh0IiwgInRleHQ6dGV4dGFyZWE9J2hlbGxvIHdvcmxkJyIsICJzYXZlOmJ1dHRvbiJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcywgY2IpIHsKCQljYW4ubWlzYy5ydW5BY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiLCBraXQuRGljdCgKCQkJInNhdmUiLCBmdW5jdGlvbihjbWRzKSB7IGNhbi51c2VyLmRvd25sb2FkcyhjYW4sIGNtZHNbMV0sIGNtZHNbMF0pIH0KCQkpKQoJfSksCgkicGllIjogc2h5KCLmr5Tkvovlm74iLCB7fSwgWyJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQltc2cuRGlzcGxheVN0b3J5KCJwaWUuanMiKQoJCW1zZy5QdXNoKCJ2YWx1ZSIsIDIwMCkKCQltc2cuUHVzaCgidmFsdWUiLCAzMDApCgkJbXNnLlB1c2goInZhbHVlIiwgNDAwKQoJfSksCgkiY2FuLmNvZGUuaW5uZXIuX3BsdWdpbiI6IHNoeSgi5o+S5Lu2Iiwge30sIFt7dHlwZTogImJ1dHRvbiIsIG5hbWU6ICJsaXN0IiwgYWN0aW9uOiAiYXV0byJ9LCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykge30pLAp9KQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsIF9mb2N1czogW10sIF9pbml0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKSwgY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05LRVlET1dOLCBmdW5jdGlvbihtc2csIG1vZGVsKSB7CgkJCWNhbi5fa2V5bGlzdCA9IGNhbi5vbmtleW1hcC5fcGFyc2UobXNnLl9ldmVudCwgY2FuLCBtb2RlbCwgY2FuLl9rZXlsaXN0fHxbXSwgY2FuLl9vdXRwdXQpCgkJfSkKCX0sCglfbW9kZTogewoJCW5vcm1hbDogewoJCQlqOiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdGFyZ2V0LnNjcm9sbEJ5KDAsIGV2ZW50LmN0cmxLZXk/IDMwMDogMzApIH0sCgkJCWs6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQuc2Nyb2xsQnkoMCwgZXZlbnQuY3RybEtleT8gLTMwMDogLTMwKSB9LAoKCQkJYjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiSGVhZGVyLm9uYWN0aW9uLmJsYWNrIl0pIH0sCgkJCXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIkhlYWRlci5vbmFjdGlvbi53aGl0ZSJdKSB9LAoKCQkJZzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5Yib5bu6576k57uEIl0pIH0sCgkJCXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4uc2VhcmNoKGV2ZW50LCBbIlJpdmVyLm9uZGV0YWlsLua3u+WKoOW6lOeUqCJdKSB9LAoJCQl0OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLnNlYXJjaChldmVudCwgWyJSaXZlci5vbmRldGFpbC7mt7vliqDlt6XlhbciXSkgfSwKCgkJCSIgIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNFQVJDSEZPQ1VTKSwgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sCgkJCSI6IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkNPTU1BTkRGT0NVUyksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9LAoJCQlFbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTk9QRU5TRUFSQ0gsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7dHlwZTogbWRiLkZPUkVBQ0gsIHdvcmQ6ICIifSkpCgkJCX0sCgkJCUVzY2FwZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX3Jvb3QuX3RhcmdldCwgY2FuLnBhZ2UuS2V5cyhodG1sLkZJRUxEU0VUX0ZMT0FULCBodG1sLkRJVl9GTE9BVCksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQkJfSkKCQkJfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5Db25mKGh0bWwuTUFSR0lOX1ksIDQqaHRtbC5QTFVHSU5fTUFSR0lOKzIqaHRtbC5BQ1RJT05fSEVJR0hUK2h0bWwuQUNUSU9OX01BUkdJTikKCQljYW4uQ29uZihodG1sLk1BUkdJTl9YLCA0Kmh0bWwuUExVR0lOX01BUkdJTikKCgkJaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc01vYmlsZSkgewoJCQl2YXIgZ3QgPSAiJiMxMDA5NTsiLCBsdCA9ICImIzEwMDk0OyI7IGZ1bmN0aW9uIHRvZ2dsZSh2aWV3KSB7IHJldHVybiAhY2FuLnNldFJpdmVyKCJkaXNwbGF5IikgfQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW1todG1sLlRPR0dMRSwgY2hhdC5QUk9KRUNUXV0sIGxpc3Q6IFt7dGV4dDogW2d0LCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWV2ZW50LnRhcmdldC5pbm5lckhUTUwgPSB0b2dnbGUoKT8gZ3Q6IGx0LCBjYW4ub25hY3Rpb24ucmVmcmVzaChjYW4pCgkJCX19XSkKCQl9CgoJCXRhcmdldC5vbnRvdWNoc3RhcnQgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9UT1VDSCwgY2FuLnJlcXVlc3QoZXZlbnQpKSB9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJX21lbnVzOiBbCgkJW2NoYXQuTEFZT1VULCAiYXV0byIsICJ0YWJzIiwgImdyaWQiLCAiZnJlZSIsICJmbG93IiwgInBhZ2UiLCAidG9pbWFnZSJdLAoJCVtpY2UuSEVMUCwgInR1dG9yIiwgIm1hbnVhbCIsICJzZXJ2aWNlIiwgImRldm9wcyIsICJyZWZlciJdLAoJXSwKCV90cmFuczogewoJCSJsYXlvdXQiOiAi5biD5bGAIiwKCQkiYXV0byI6ICLpu5jorqTluIPlsYAiLAoJCSJmbG93IjogIua1geWKqOW4g+WxgCIsCgkJImdyaWQiOiAi572R5qC85biD5bGAIiwKCQkidGFicyI6ICLmoIfnrb7luIPlsYAiLAoJCSJmcmVlIjogIuiHqueUseW4g+WxgCIsCgkJInBhZ2UiOiAi572R6aG15biD5bGAIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoKCQkiaGVscCI6ICLluK7liqkiLAoJCSJ0dXRvciI6ICLlhaXpl6jnroDku4siLAoJCSJtYW51YWwiOiAi5L2/55So5omL5YaMIiwKCQkic2VydmljZSI6ICLmnI3liqHmiYvlhowiLAoJCSJkZXZvcHMiOiAi57yW56iL5omL5YaMIiwKCQkicmVmZXIiOiAi5Y+C6ICD5omL5YaMIiwKCX0sCglvbm1haW46IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25pbXBvcnQuX3NoYXJlKGNhbiwgY2FuLm1pc2MuU2VhcmNoKGNhbiwgd2ViLlNIQVJFKSkgfSwKCW9ubG9naW46IGZ1bmN0aW9uKGNhbikgeyBpZiAoIWNhbi51c2VyLm1vZC5pc0NtZCAmJiAhY2FuLkNvbmYoY2hhdC5UT09MKSkgeyByZXR1cm4gfQoJCWNhbi5fbmFtZXMgPSBsb2NhdGlvbi5wYXRobmFtZQoJCWNhbi5Db25mKGNoYXQuVE9PTCk/IGNhbi5jb3JlLk5leHQoY2FuLkNvbmYoY2hhdC5UT09MKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ub25pbXBvcnQuX2NtZChjYW4sIGl0ZW0sIG5leHQpCgkJfSk6IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoKSwgY3R4LkNPTU1BTkQsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLmNvcmUuTmV4dChtc2cuVGFibGUoKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ub25pbXBvcnQuX2NtZChjYW4sIGl0ZW0sIG5leHQpCgkJfSkgfSkKCX0sCglvbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHdvcmQpIHsKCQlpZiAod29yZFswXSA9PSBtZGIuUExVR0lOIHx8IHdvcmRbMF0gPT0gbWRiLkZPUkVBQ0gpIHsgY2FuLm9uZXhwb3J0LnBsdWdpbihjYW4sIG1zZywgd29yZCkgfQoJfSwKCW9uc2l6ZTogZnVuY3Rpb24oY2FuLCBtc2csIGhlaWdodCwgd2lkdGgpIHsgY2FuLkNvbmYoe2hlaWdodDogaGVpZ2h0LCB3aWR0aDogd2lkdGh9KSB9LAoJb25zdG9ybV9zZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCByaXZlciwgc3Rvcm0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7CgkJCXJldHVybiBjYW4uY29yZS5LZXlzKGNhbi5Db25mKGNoYXQuUklWRVIsIHJpdmVyKSwgY2FuLkNvbmYoY2hhdC5TVE9STSwgc3Rvcm0pKQoJCX0sIGNhbi5fYWN0aW9uLCBjYW4uX291dHB1dCkpIHsKCQkJdmFyIGNvbmYgPSBjYW4uY29yZS5WYWx1ZShjYW4uX3Jvb3QsIGNhbi5jb3JlLktleXMoY2hhdC5SSVZFUiwgcml2ZXIsIGNoYXQuU1RPUk0sIHN0b3JtKSl8fHt9CgkJCXJldHVybiBjYW4ub25hY3Rpb24ubGF5b3V0KGNhbiwgY2FuLm1pc2MuU2VhcmNoT3JDb25mKGNhbiwgY2hhdC5MQVlPVVQpfHxWb2xjYW5vcy5tZXRhLmFyZ3MubGF5b3V0fHxjb25mLmxheW91dCwgdHJ1ZSkKCQl9CgoJCWNhbi5ydW4oe30sIFtyaXZlciwgc3Rvcm1dLCBmdW5jdGlvbihtc2cpIHsgaWYgKG1zZy5MZW5ndGgoKSA+IDApIHsgcmV0dXJuIGNhbi5vbmltcG9ydC5faW5pdChjYW4sIG1zZykgfQoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTkFDVElPTl9OT1RPT0wsIGNhbi5yZXF1ZXN0KHt9LCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogc3Rvcm19KSkKCQl9KQoJfSwKCW9uYWN0aW9uX2NtZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uQ29uZkhlaWdodChjYW4uX3Jvb3QuX2hlaWdodCksIGNhbi5Db25mV2lkdGgoY2FuLl9yb290Ll93aWR0aCkKCQljYW4uQ29uZihodG1sLk1BUkdJTl9YLCAwLCBodG1sLk1BUkdJTl9ZLCAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9yb290Ll90YXJnZXQsICJzaW1wbGUiKSAKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl90YXJnZXQsICJjbWQiKQoJCWNhbi5vbmxheW91dC5faW5pdChjYW4pCgkJY2FuLmlzQ21kTW9kZSgpCgl9LAoKCWxheW91dDogZnVuY3Rpb24oY2FuLCBidXR0b24sIHNpbGVudCkgeyBidXR0b24gPSBidXR0b258fGljZS5BVVRPCgkJdmFyIGNiID0gY2FuLm9ubGF5b3V0W2J1dHRvbl07IGlmIChjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGNhbiwgc2lsZW50KSkgeyByZXR1cm4gfQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBjYW4uX3RhcmdldCwgY2FuLkNvbmYoY2hhdC5MQVlPVVQpKQoJCWlmIChidXR0b24gPT0gaWNlLkFVVE8pIHsgYnV0dG9uID0gIiIgfQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX3RhcmdldCwgY2FuLkNvbmYoY2hhdC5MQVlPVVQsIGJ1dHRvbikpCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCX0sCgloZWxwOiBmdW5jdGlvbihjYW4sIGJ1dHRvbikgeyBjYW4udXNlci5vcGVuKCIvaGVscC8iK2J1dHRvbisiLnNoeSIpIH0sCglyZWZyZXNoOiBmdW5jdGlvbihjYW4pIHsKCQljYW4uX3Jvb3QuX2hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCwgY2FuLl9yb290Ll93aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoCgkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCgkJdmFyIHdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLWNhbi5Db25mKGh0bWwuTUFSR0lOX1gpCgkJY2FuLmNvcmUuTGlzdChjYW4uX3BsdWdpbnMsIGZ1bmN0aW9uKHN1YikgeyB2YXIgdGFibGUgPSBjYW4uY29yZS5WYWx1ZShzdWIsIGNoYXQuX09VVFBVVF9DVVJSRU5UKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aWR0aCktKGNhbi51c2VyLmlzV2luZG93cz8gMjA6IDApKQoJCQl0YWJsZS5Db25mV2lkdGgod2lkdGgpCgkJCXRhYmxlLm9uaW1wb3J0LmxheW91dD8gdGFibGUub25pbXBvcnQubGF5b3V0KHRhYmxlKTogY2FuLm9uYXBwZW5kLl9vdXRwdXQoc3ViLCB0YWJsZS5fbXNnLCBzdWIuX2Rpc3BsYXkpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05MQVlPVVQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWdyaWQ6IGZ1bmN0aW9uKGNhbiwgc2lsZW50KSB7CgkJdmFyIEFDVElPTl9MQVlPVVRfRk1UID0gIiBmaWVsZHNldC5BY3Rpb24uZ3JpZD5kaXYub3V0cHV0IGZpZWxkc2V0LnBsdWdpbiB7IHdpZHRoOl93aWR0aDsgaGVpZ2h0Ol9oZWlnaHQ7IH0gZmllbGRzZXQuQWN0aW9uLmdyaWQ+ZGl2Lm91dHB1dCBmaWVsZHNldC5wbHVnaW4+ZGl2Lm91dHB1dCB7IHdpZHRoOl93aWR0aDsgaGVpZ2h0Ol9oZWlnaHQ7IH0gIgoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogIm0iLCB2YWx1ZTogMn0sIHtuYW1lOiAibiIsIHZhbHVlOiAyfV0sIGZ1bmN0aW9uKGRhdGEpIHsKCQkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24oaGVpZ2h0LCB3aWR0aCkgeyB2YXIgbSA9IHBhcnNlSW50KGRhdGEubSl8fDIsIG4gPSBwYXJzZUludChkYXRhLm4pfHwyCgkJCQljYW4ucGFnZS5jc3MoY2FuLmJhc2UucmVwbGFjZUFsbChBQ1RJT05fTEFZT1VUX0ZNVCwgIl93aWR0aCIsICh3aWR0aC0oNCptKzEpKmh0bWwuUExVR0lOX01BUkdJTikvbSsicHgiLCAiX2hlaWdodCIsIChoZWlnaHQtKDQqbisxKSpodG1sLlBMVUdJTl9NQVJHSU4pL24rInB4IikpCgkJCX0pCgkJfSwgc2lsZW50KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgMCkKCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuRklFTERTRVRfUExVR0lOLCAwKQoJfSwKCWZyZWU6IGZ1bmN0aW9uKGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCBbW2h0bWwuRElWX09VVFBVVCwgaHRtbC5GSUVMRFNFVF9QTFVHSU5dXSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBpdGVtLCB7bGVmdDogNDAqaW5kZXgsIHRvcDogNDAqaW5kZXh9KQoJCQljYW4ub25tb3Rpb24ubW92ZShjYW4sIGl0ZW0sIHtsZWZ0OiA0MCppbmRleCwgdG9wOiA0MCppbmRleH0pCgkJfSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihjYW4pIHsKCQlyZXR1cm4gY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLkNvbmYoY2hhdC5TVE9STSksIGNhbi5fb3V0cHV0KSwgdHJ1ZQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJYXJnczogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4uY29yZS5OZXh0KGNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgW1todG1sLkZJRUxEU0VUX1BMVUdJTiwgaHRtbC5GT1JNX09QVElPTl1dKSwgZnVuY3Rpb24oaXRlbSwgbmV4dCwgaW5kZXgsIGFycmF5KSB7CgkJCWl0ZW0uZGF0YXNldC5hcmdzID0gSlNPTi5zdHJpbmdpZnkoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbSwgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZXx8IiIgfSkpCgkJCWNiKGl0ZW0sIG5leHQsIGluZGV4LCBhcnJheSkKCQl9KQoJfSwKCXNpemU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLk9wdGlvbihodG1sLlRPUCwgY2FuLl9vdXRwdXQub2Zmc2V0VG9wKQoJCW1zZy5PcHRpb24oaHRtbC5MRUZULCBjYW4uX291dHB1dC5vZmZzZXRMZWZ0KQoJCW1zZy5PcHRpb24oaHRtbC5XSURUSCwgY2FuLl9vdXRwdXQub2Zmc2V0V2lkdGgpCgkJbXNnLk9wdGlvbihodG1sLkhFSUdIVCwgY2FuLl9vdXRwdXQub2Zmc2V0SGVpZ2h0KQoJCW1zZy5PcHRpb24oaHRtbC5TQ1JPTEwsIGNhbi51c2VyLmlzTW9iaWxlPyBjYW4uX3RhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc2Nyb2xsVG9wOiBjYW4uX291dHB1dC5zY3JvbGxUb3ApCgkJbXNnLk9wdGlvbihodG1sLk1BUkdJTl9YLCBjYW4uQ29uZihodG1sLk1BUkdJTl9YKSkKCQltc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1ksIGNhbi5Db25mKGh0bWwuTUFSR0lOX1kpKQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgcmV0dXJuIGNhbi5Db25mKGNoYXQuTEFZT1VUKSB9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIG1zZywgd29yZCkgeyB2YXIgZmllbGRzID0gY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUykpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtbaHRtbC5GSUVMRFNFVF9QTFVHSU4sIGh0bWwuTEVHRU5EXV0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0uaW5uZXJIVE1MLmluZGV4T2Yod29yZFsxXSkgPT0gLTEpIHsgcmV0dXJuIH0KCgkJCXZhciBsaXN0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbS5uZXh0U2libGluZywgaHRtbC5PUFRJT05fQVJHUywgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS52YWx1ZXx8IiIgfSkKCQkJdmFyIG1ldGEgPSBpdGVtLnBhcmVudE5vZGUuX21ldGE7IGlmICghbWV0YSkgeyByZXR1cm4gfQoKCQkJdmFyIGRhdGEgPSB7Y3R4OiAiY2FuIiwgY21kOiAiQWN0aW9uIiwKCQkJCXR5cGU6IG1kYi5QTFVHSU4sIG5hbWU6IGl0ZW0uaW5uZXJIVE1MLCB0ZXh0OiBzaHkoIui3s+i9rCIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJdmFyIGlucHV0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgaXRlbS5wYXJlbnROb2RlLCBodG1sLklOUFVUX0FSR1MpWzBdOyBpbnB1dCAmJiBpbnB1dC5mb2N1cygpCgkJCQl9KSwgYXJndW1lbnQ6IEpTT04uc3RyaW5naWZ5KGxpc3QpLAoJCQl9CgkJCWlmIChtZXRhLmluZGV4KSB7CgkJCQlkYXRhLmNvbnRleHQgPSAiIiwgZGF0YS5jb21tYW5kID0gbWV0YS5pbmRleAoJCQl9IGVsc2UgaWYgKG1ldGEuY21kKSB7CgkJCQlkYXRhLmNvbnRleHQgPSBtZXRhLmN0eCwgZGF0YS5jb21tYW5kID0gbWV0YS5jbWQKCQkJfSBlbHNlIHsKCQkJCXJldHVybgoJCQl9CgkJCW1zZy5QdXNoKGRhdGEsIGZpZWxkcykKCQl9KQoJfSwKfSkK",
        "usr/volcanos/panel/footer.css": "ZmllbGRzZXQuRm9vdGVyIHsgZm9udC1zaXplOjEuMXJlbTsgcGFkZGluZzowIDVweDsgY2xlYXI6Ym90aDsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCB7IG92ZXJmbG93OmhpZGRlbjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYgeyBwYWRkaW5nOjVweDsgaGVpZ2h0OjIxcHg7IGN1cnNvcjpwb2ludGVyOyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzJlNTE1ZjsgfQpmaWVsZHNldC5Gb290ZXI+ZGl2Lm91dHB1dCBkaXYudGl0bGUgeyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGRpdi5zdGF0ZSB7IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LnRvYXN0IHsgYmFja2dyb3VuZC1jb2xvcjpkYXJrY3lhbjsgZmxvYXQ6cmlnaHQ7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgZGl2LmNtZCB7IHBhZGRpbmc6MHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkZvb3Rlcj5kaXYub3V0cHV0IGlucHV0W25hbWU9Y21kXSB7IHdpZHRoOjEyMHB4OyBib3JkZXItcmFkaXVzOjA7IH0KZmllbGRzZXQuRm9vdGVyPmRpdi5vdXRwdXQgaW5wdXRbbmFtZT1jbWRdOmZvY3VzIHsgd2lkdGg6MzIwcHg7IH0K",
        "usr/volcanos/panel/footer.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll90aXRsZShjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fc3RhdGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3RvYXN0KGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9jb21tYW5kKGNhbiwgbXNnLCB0YXJnZXQpCgl9LAoJX3RpdGxlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWNhbi5jb3JlLkxpc3QobXNnLnJlc3VsdCwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2NoYXQuVElUTEUsIGh0bWwuRElWLCBpdGVtXSwgdGl0bGU6ICLogZTns7vnq5nplb8ifV0pCgkJfSkKCX0sCglfc3RhdGU6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuU1RBVEUpfHxjYW4uQ29uZihjaGF0LlNUQVRFKSwgWyJuY21kIiwgIm50aXAiXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtjYW4uYmFzZS5qb2luKFtjaGF0LlNUQVRFLCBpdGVtXSksIGh0bWwuRElWLCBjYW4uQ29uZihpdGVtKV0sIGxpc3Q6IFsKCQkJCXt0ZXh0OiBbaXRlbSwgaHRtbC5MQUJFTF19LCB7dGV4dDogWyI6ICIsIGh0bWwuTEFCRUxdfSwge3RleHQ6IFtjYW4uQ29uZihpdGVtKXx8IiIsIGh0bWwuU1BBTiwgaXRlbV19LAoJCQldLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25leHBvcnRbaXRlbV0oY2FuKSB9fV0pCgkJfSkKCX0sCglfdG9hc3Q6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4udG9hc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2hhdC5UT0FTVCwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZXhwb3J0WyJudGlwIl0oY2FuKSB9fV0pLmZpcnN0Cgl9LAoJX2NvbW1hbmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiAiY21kIiwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25rZXltYXAuaW5wdXQoZXZlbnQsIGNhbik7IGlmIChldmVudC5rZXkgIT0gbGFuZy5FTlRFUikgeyByZXR1cm4gfQoJCQlzd2l0Y2ggKGV2ZW50LnRhcmdldC52YWx1ZSkgewoJCQkJY2FzZSBjbGkuQ0xPU0U6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJY2FzZSBjbGkuQ0xFQVI6IGNhbi5jbGkgJiYgY2FuLmNsaS5jbG9zZSgpOyBicmVhawoJCQkJZGVmYXVsdDoKCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBjYW4uY29yZS5TcGxpdChldmVudC50YXJnZXQudmFsdWUsIGljZS5TUCksIGZ1bmN0aW9uKG1zZykgewoJCQkJCQljYW4uY2xpICYmIGNhbi5jbGkuY2xvc2UoKSwgY2FuLm9uZXhwb3J0LmZsb2F0KGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgbGlzdCkge30sICJjbGkiLCB0cnVlKQoJCQkJCX0pCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIGNtZCIpCgl9LAoKCXRvYXN0OiBmdW5jdGlvbihjYW4sIG1zZywgdGl0bGUsIGNvbnRlbnQsIGZpbGVsaW5lLCB0aW1lKSB7IGNhbi5fdGlwcyA9IGNhbi5fdGlwc3x8Y2FuLnJlcXVlc3QoKQoJCWNhbi5fdGlwcy5QdXNoKHt0aW1lOiB0aW1lLCBmaWxlbGluZTogZmlsZWxpbmUsIHRpdGxlOiB0aXRsZSwgY29udGVudDogY29udGVudH0pCgkJY2FuLm9uaW1wb3J0LmNvdW50KGNhbiwgIm50aXAiKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIGNhbi50b2FzdCwgW3RpbWUsIHRpdGxlLCBjb250ZW50XS5qb2luKGljZS5TUCkpCgl9LAoJY291bnQ6IGZ1bmN0aW9uKGNhbiwgbmFtZSkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4uY29yZS5LZXlzKGh0bWwuU1BBTiwgbmFtZSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5pbm5lckhUTUwgPSBjYW4uQ29uZihuYW1lLCBwYXJzZUludChjYW4uQ29uZihuYW1lKXx8IjAiKSsxKyIiKSsiIgoJCX0pCgl9LAoJbmNtZDogZnVuY3Rpb24oY2FuLCBtc2csIF9mb2xsb3csIF9jbWRzKSB7IGNhbi5fY21kcyA9IGNhbi5fY21kc3x8Y2FuLnJlcXVlc3QoKQoJCWNhbi5fY21kcy5QdXNoKHt0aW1lOiBjYW4uYmFzZS5UaW1lKCksIGZvbGxvdzogX2ZvbGxvdywgY21kczogX2NtZHN9KQoJCWNhbi5vbmltcG9ydC5jb3VudChjYW4sICJuY21kIikKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWlmIChjYW4udXNlci5tb2QuaXNQb2QgfHwgY2FuLnVzZXIuaXNFeHRlbnNpb24pIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fdGFyZ2V0KSB9CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgl9LAoJb25sb2dpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLnJ1bih7fSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4ub25pbXBvcnQuX2luaXQoY2FuLCBtc2csIG51bGwsIGNhbi5fb3V0cHV0KSB9KSB9LAoJb250b2FzdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgY2FuLmNvcmUuQ2FsbEZ1bmMoY2FuLm9uaW1wb3J0LnRvYXN0LCB7Y2FuOiBjYW4sIG1zZzogbXNnfSkgfSwKCW9ucmVtb3RlOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4uY29yZS5DYWxsRnVuYyhjYW4ub25pbXBvcnQubmNtZCwge2NhbjogY2FuLCBtc2c6IG1zZ30pIH0sCglvbmFjdGlvbl9jbWQ6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuKSB9LAoJb25jb21tYW5kZm9jdXM6IGZ1bmN0aW9uKGNhbikgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgWyJkaXYuY21kIiwgImlucHV0Il0sIGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCB0YXJnZXQpIH0pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRIZWlnaHQgfSwKCWZsb2F0OiBmdW5jdGlvbihjYW4sIG1zZywgY2IsIG5hbWUsIGJvdHRvbSkgeyBpZiAoY2FuW25hbWVdKSB7IHJldHVybiBjYW5bbmFtZV0uY2xvc2UoKSB9CgkJdmFyIHVpID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgInN0b3J5IHRvYXN0IGZsb2F0Iiwge30sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJCXVpLmNsb3NlID0gZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLmZpcnN0KSwgZGVsZXRlKGNhbltuYW1lXSkgfQoKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIGhlaWdodCwgd2lkdGgpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5maXJzdCwgaHRtbC5MRUZULCBsZWZ0LCBodG1sLlRPUCwgdG9wKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHVpLm91dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBoZWlnaHQtMjgsIGh0bWwuTUFYX1dJRFRILCB3aWR0aCkKCQl9KQoKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtjbGkuQ0xPU0UsIGNsaS5SRUZSRVNILCB7aW5wdXQ6IGh0bWwuVEVYVCwgcGxhY2Vob2xkZXI6ICJmaWx0ZXIiLCBfaW5pdDogZnVuY3Rpb24oaW5wdXQpIHsKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sICJrZXltYXAuZm9jdXMiLCBjYW4ucmVxdWVzdCh7fSwge2NiOiBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKGNhbi5wYWdlLnRhZ2lzKGh0bWwuSU5QVVQsIGV2ZW50LnRhcmdldCkpIHsgcmV0dXJuIH0KCQkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgdWkuY2xvc2UoKTsgcmV0dXJuIH0KCQkJCWlmIChldmVudC5rZXkgPT0gaWNlLlNQKSB7IGlucHV0LmZvY3VzKCksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSB9CgkJCX19KSkKCQl9LCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKQoJCQlpZiAoZXZlbnQua2V5ICE9IGxhbmcuRU5URVIpIHsgcmV0dXJuIH0KCQkJZXZlbnQudGFyZ2V0LnNldFNlbGVjdGlvblJhbmdlKDAsIC0xKQoKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdWkub3V0cHV0LCBodG1sLlRSLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsgaWYgKGluZGV4ID09IDApIHsgcmV0dXJuIH0KCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0ciwgaHRtbC5ISURERU4pCgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsgaWYgKHRkLmlubmVyVGV4dC5pbmRleE9mKGV2ZW50LnRhcmdldC52YWx1ZSkgPiAtMSkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCB0ciwgaHRtbC5ISURERU4pCgkJCQl9IH0pCgkJCX0pCgkJfX1dLCB1aS5hY3Rpb24sIGtpdC5EaWN0KGNsaS5DTE9TRSwgdWkuY2xvc2UsIGNsaS5SRUZSRVNILCBmdW5jdGlvbihldmVudCkgeyB1aS5jbG9zZSgpLCBjYW4udG9hc3QuY2xpY2soKX0pKQoKCQlpZiAobXNnKSB7CgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGxpc3QpIHsKCQkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBsaXN0KQoJCQkJfX0KCQkJfSwgdWkub3V0cHV0KSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLlJlc3VsdCgpLCB1aS5vdXRwdXQpCgkJfQoJCXJldHVybiBjYW4ucGFnZS5zdHlsZShjYW4sIHVpLmZpcnN0LCBib3R0b20/IHtib3R0b206IGh0bWwuQUNUSU9OX0hFSUdIVCwgdG9wOiAiIn06IHt9KSwgY2FuW25hbWVdID0gdWkKCX0sCgludGlwOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ub25leHBvcnQuZmxvYXQoY2FuLCBjYW4uX3RpcHMsIGZ1bmN0aW9uKCkge30sICJudGlwIikKCX0sCgluY21kOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ub25leHBvcnQuZmxvYXQoY2FuLCBjYW4uX2NtZHMsIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lLCBsaXN0KSB7CgkJCXZhciBjbWRzID0gY2FuLmJhc2UuT2JqKGxpbmUuY21kcyk7IHN3aXRjaCAobGluZS5mb2xsb3cpIHsKCQkJCWNhc2UgImNhbi5BY3Rpb24iOiBjbWRzID0gY21kcy5zbGljZSgyKTsgYnJlYWsKCQkJCWNhc2UgImNhbi5Gb290ZXIiOiBjbWRzID0gY21kcy5zbGljZSgyKTsgYnJlYWsKCQkJfQoJCQlzd2l0Y2ggKGNtZHNbMF0pIHsKCQkJCWNhc2UgIndlYi53aWtpLndvcmQiOiBjbWRzID0gY21kcy5zbGljZSg1KTsgYnJlYWsKCQkJfQoKCQkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCB0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHQpIHsKCQkJCWNhbi5vbmFwcGVuZC5wbHVnaW4oY2FuLCB7aW5kZXg6IGNtZHNbMF0sIGFyZ3M6IGNtZHMuc2xpY2UoMSksIGhlaWdodDogaGVpZ2h0LTEwMCwgd2lkdGg6IHdpZHRofSwgZnVuY3Rpb24oc3ViKSB7CgkJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWQsIGNiKSB7IGNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBjbWRzWzBdLCBjbWQsIGNiKSB9CgoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHt0b3A6IHRvcCsxMDAsIGxlZnQ6IGxlZnR9KQoJCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9sZWdlbmQsIHtkaXNwbGF5OiBodG1sLkJMT0NLfSkKCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCB7Im1heC13aWR0aCI6IHdpZHRofSkKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgc3ViLl90YXJnZXQsIGNoYXQuRkxPQVQpCgkJCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCQkJfSkKCQl9LCAibmNtZCIpCgl9LAp9KQo=",
        "usr/volcanos/panel/header.css": "ZmllbGRzZXQuSGVhZGVyIHsgZm9udC1zaXplOjEuMXJlbTsgaGVpZ2h0OjMxcHg7IG92ZXJmbG93OmF1dG87IHBhZGRpbmc6MCA1cHg7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgeyBvdmVyZmxvdzpoaWRkZW47IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2IHsgcGFkZGluZzo1cHg7IGhlaWdodDoyMXB4OyBmbG9hdDpsZWZ0OyBjdXJzb3I6cG9pbnRlcjsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXY6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiMyZTUxNWY7IH0KZmllbGRzZXQuSGVhZGVyPmRpdi5vdXRwdXQgZGl2LnRpdGxlIHsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUgeyBmbG9hdDpyaWdodDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyIHsgcGFkZGluZzowOyBoZWlnaHQ6MzFweDsgfQpmaWVsZHNldC5IZWFkZXI+ZGl2Lm91dHB1dCBkaXYuc3RhdGUuYXZhdGFyPmltZyB7IGhlaWdodDozMXB4OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2ggeyBtYXJnaW4tbGVmdDoyMHB4OyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LkhlYWRlcj5kaXYub3V0cHV0IGRpdi5zZWFyY2g+aW5wdXQgeyBtYXJnaW4tdG9wOi01cHg7IGJvcmRlci1yYWRpdXM6MDsgfQoK",
        "usr/volcanos/panel/header.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5vbmltcG9ydC5fdGl0bGUoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3N0YXRlKGNhbiwgbXNnLCB0YXJnZXQpCgkJY2FuLm9uaW1wb3J0Ll9hdmF0YXIoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX2JhY2tncm91bmQoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbmltcG9ydC5fbWVudXMoY2FuLCBtc2csIHRhcmdldCkKCQljYW4ub25kYWVtb24uX2luaXQoY2FuKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCV90aXRsZTogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCkgeyBpZiAoY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKG1zZy5yZXN1bHQsIGNhbi5Db25mKGNoYXQuVElUTEUpfHxbInNoeWxpbnV4LmNvbS94L2NvbnRleHRzIl0pLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2hhdC5USVRMRSwgaHRtbC5ESVYsIGl0ZW1dLCB0aXRsZTogIui/lOWbnuS4u+mhtSIsIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24udGl0bGUoZXZlbnQsIGNhbikKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQljYW4udXNlci5jYXJ0ZShldmVudCwgY2FuLCB7fSwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgfSksIGZ1bmN0aW9uKGV2ZW50LCBpdGVtLCBtZXRhLCBpbmRleCkgewoJCQkJCWV2ZW50LnNoaWZ0S2V5PyBjYW4udXNlci5vcGVuKGxpc3RbaW5kZXhdLnBhdGgpOiBjYW4udXNlci5qdW1wcyhsaXN0W2luZGV4XS5wYXRoKQoJCQkJfSkKCQkJfX1dKQoJCX0pCgl9LAoJX3N0YXRlOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0LlNUQVRFKXx8Y2FuLkNvbmYoY2hhdC5TVEFURSksIFttZGIuVElNRSwgYWFhLlVTRVJOSUNLXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGl0ZW0gPT0gYWFhLkFWQVRBUiApIHsgaWYgKGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBsaXN0OiBbe2ltZzogaWNlLlNQfV0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgW2Nhbi5wYWdlLkZvcm1hdChodG1sLklNRywgY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pLCAxNjApXSkKCQkJCX19XSk7IHJldHVybgoJCQl9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbY2FuLmJhc2Uuam9pbihbY2hhdC5TVEFURSwgaXRlbV0pLCBodG1sLkRJViwgKGNhbi5Db25mKGl0ZW0pfHwiIikuc2xpY2UoMCwgMTApXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmFjdGlvbiwgaXRlbV0sIFtldmVudCwgY2FuLCBpdGVtXSkKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBpdGVtID09IG1kYi5USU1FICYmIGNhbi5vbmltcG9ydC5fdGltZShjYW4sIHRhcmdldCkgfX1dKQoJCX0pCgl9LAoJX2F2YXRhcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgImRpdi5zdGF0ZS5hdmF0YXI+aW1nIiwge3NyYzogY2FuLm9uZXhwb3J0LmF2YXRhcihjYW4pfSkKCX0sCglfYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLmlzRXh0ZW5zaW9uIHx8IGNhbi51c2VyLmlzTG9jYWxGaWxlKSB7IHJldHVybiB9CgkJY2FuLm9ubGF5b3V0LmJhY2tncm91bmQoY2FuLCBjYW4ub25leHBvcnQuYmFja2dyb3VuZChjYW4pKQoJfSwKCV9zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ub25hcHBlbmQuaW5wdXQoY2FuLCB7dHlwZTogaHRtbC5URVhULCBuYW1lOiBtZGIuU0VBUkNILCBvbmtleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgbGFuZy5FTlRFUjogY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6ICJjb21tYW5kLHNwYWNlLHRleHQifHxtZGIuRk9SRUFDSCwgd29yZDogZXZlbnQudGFyZ2V0LnZhbHVlfSkpCgkJCX0KCQl9fSwgIiIsIHRhcmdldCwgInRpdGxlIHNlYXJjaCIpCgkJY2FuLm9uaW1wb3J0Lm1lbnUoY2FuLCBtZGIuU0VBUkNILCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05PUEVOU0VBUkNILCBjYW4ucmVxdWVzdChldmVudCwge3R5cGU6IG1kYi5GT1JFQUNILCB3b3JkOiB1aS52YWx1ZX0pKQoJCX0pCgl9LAoJX21lbnVzOiBmdW5jdGlvbihjYW4sIG1zZywgdGFyZ2V0KSB7CgkJY2FuLnNldEhlYWRlck1lbnUoY2FuLnVzZXIubW9kLmlzUG9kPyBbY3R4LkNPTkZJR106CgkJCWNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuTUVOVVMpfHxjYW4uQ29uZihjaGF0Lk1FTlVTKSwgY2FuLm9uYWN0aW9uLl9tZW51cyksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24pIHsKCQkJCWNhbi5jb3JlLkNhbGxGdW5jKGNhbi5vbmFjdGlvbltidXR0b25dfHxmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQkJY2FuLnJ1bihldmVudCwgW2J1dHRvbl0sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBjYW4udXNlci50cmFucyhjYW4sIGJ1dHRvbikpIH0pCgkJCQl9LCB7ZXZlbnQ6IGV2ZW50LCBjYW46IGNhbiwgYnV0dG9uOiBidXR0b259KQoJCQl9KQoJfSwKCglfdGltZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4uY29yZS5UaW1lcih7aW50ZXJ2YWw6IDUwMH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGltZShjYW4sIHRhcmdldCkgfSkKCQljYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge2FjdGlvbjogImRhdGUiLCBzdHlsZTogeyJtaW4td2lkdGgiOiAzMDZ9LCBfaW5pdDogZnVuY3Rpb24oc3ViKSB7CgkJCWNhbi5nZXRBY3Rpb25TaXplKGZ1bmN0aW9uKG1zZywgdG9wKSB7IGNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl90YXJnZXQsIHt0b3A6IHRvcCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkgfSkKCQl9fSwgdGFyZ2V0KSwgdGFyZ2V0Lm9ubW91c2VlbnRlciA9IHRhcmdldC5jbGljawoJfSwKCXRpbWU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmltcG9ydC50b3BpYyhjYW4pCgkJdGFyZ2V0LmlubmVySFRNTCA9IGNhbi51c2VyLnRpbWUoY2FuLCBudWxsLCAiJXcgJUg6JU06JVMiKQoJfSwKCWF2YXRhcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXZhdGFyKSB7IGlmIChjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5BVkFUQVIsIFthdmF0YXJdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5hdmF0YXIgPSBhdmF0YXIsIGNhbi5vbmltcG9ydC5fYXZhdGFyKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCXRvcGljOiBmdW5jdGlvbihjYW4sIHRvcGljKSB7IHRvcGljICYmIChjYW4uX3RvcGljID0gdG9waWMpCgkJdG9waWMgPSBjYW4uX3RvcGljIHx8IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuVE9QSUMpIHx8IFZvbGNhbm9zLm1ldGEuYXJncy50b3BpYyB8fCAoY2FuLmJhc2UuaXNOaWdodCgpPyBjaGF0LkJMQUNLOiBjaGF0LldISVRFKQoJCS8vIGNhbi5yZXF1aXJlKFsiL2NoYXQvdG9waWMvIit0b3BpYysiLmNzcyJdKQoJCWNhbi51c2VyLnRvcGljKGNhbiwgdG9waWMpCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYmFja2dyb3VuZCkgeyBpZiAoY2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNMb2NhbEZpbGUpIHsgcmV0dXJuIH0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBhYWEuQkFDS0dST1VORCwgW2JhY2tncm91bmRdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLnVzZXIuaW5mby5iYWNrZ3JvdW5kID0gYmFja2dyb3VuZCwgY2FuLm9uaW1wb3J0Ll9iYWNrZ3JvdW5kKGNhbiwgbXNnKSwgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikKCQl9KQoJfSwKCW1lbnU6IGZ1bmN0aW9uKGNhbiwgY21kcywgY2IsIHRyYW5zKSB7IGNhbi5iYXNlLmlzU3RyaW5nKGNtZHMpICYmIChjbWRzID0gW2NtZHNdKQoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBjbWRzWzBdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGNhbi5iYXNlLmdldFZhbGlkKGNtZHMuc2xpY2UoMSksIFtjbWRzWzBdXSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaWYgKGNhbi5iYXNlLmlzU3RyaW5nKGl0ZW0pKSB7CgkJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBjYW4udXNlci50cmFucyhjYW4sIGl0ZW0sIHRyYW5zKV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgaXRlbSwgW2l0ZW1dKQoJCQkJCS8vIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0sIGNtZHMpCgkJCQl9fQoKCQkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc0FycmF5KGl0ZW0pKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5jb3JlLkxpc3QoaXRlbSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7IHJldHVybiBjYW4udXNlci50cmFucyhjYW4sIHZhbHVlLCB0cmFucykgfSkKCQkJCXJldHVybiB7dmlldzogW2h0bWwuTUVOVSwgaHRtbC5ESVYsIGNhbi51c2VyLnRyYW5zKGNhbiwgbGlzdFswXSwgdHJhbnMpXSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBsaXN0LnNsaWNlKDEpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhLCBpbmRleCkgewoJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtW2luZGV4KzFdLCBpdGVtKQoJCQkJCX0sIHRyYW5zKQoJCQkJfX0KCgkJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QoaXRlbSkpIHsKCQkJCXJldHVybiBpdGVtCgkJCX0KCQl9KSB9XSkuZmlyc3QKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05QTFVHSU4sIHtoZWxwOiAi5rOo5YaM5o+S5Lu2IiwKCSJ0b3BpYyI6IHNoeSgi5Li76aKYIiwgewoJCSJkZW1vIjogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgY21kc1swXSkgfSwKCX0sIFsidG9waWM6c2VsZWN0PXdoaXRlLGJsYWNrIiwgInJ1bjpidXR0b24iLCAiZGVtbzpidXR0b24iXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4ub25pbXBvcnQudG9waWMoY2FuLCBjbWRzWzBdKQoJfSksCgkiY29va2llIjogc2h5KCLmj5DnpLoiLCB7fSwgWyJ0ZXh0IiwgImxpc3QiLCAiYmFjayJdLCBmdW5jdGlvbihjYW4sIG1zZywgY21kcykgewoJCWNhbi5jb3JlLkl0ZW0oY2FuLm1pc2MuQ29va2llKGNhbiksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJbXNnLlB1c2goImtleSIsIGtleSksIG1zZy5QdXNoKCJ2YWx1ZSIsIHZhbHVlKQoJCX0pCgl9KSwKCSJhbGVydCI6IHNoeSgi5o+Q56S6Iiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljbWRzICYmIGNtZHNbMF0gJiYgY2FuLnVzZXIuYWxlcnQoY21kc1swXSkKCX0pLAoJImluZm8iOiBzaHkoIuS/oeaBryIsIHt9LCBbInRleHQiLCAibGlzdCIsICJiYWNrIl0sIGZ1bmN0aW9uKGNhbiwgbXNnLCBjbWRzKSB7CgkJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCX0pLAoJImxvZyI6IHNoeSgi5pel5b+XIiwge30sIFsidGV4dCIsICJsaXN0IiwgImJhY2siXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljb25zb2xlLmxvZyhjbWRzWzBdKQoJfSksCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoKQoJfSwKCV9tZW51czogW1sic2V0dGluZyIsIGNoYXQuQkxBQ0ssIGNoYXQuV0hJVEUsIGNoYXQuUFJJTlQsIGNvZGUuV0VCUEFDSywgInRvaW1hZ2UiLCBjdHguQ09ORklHXV0sCglfdHJhbnM6IHsKCQkic2VhcmNoIjogIuaQnOe0oiIsCgoJCSJzZXR0aW5nIjogIuiuvue9riIsCgkJImJsYWNrIjogIum7keiJsuS4u+mimCIsCgkJIndoaXRlIjogIueZveiJsuS4u+mimCIsCgkJInByaW50IjogIuaJk+WNsOS4u+mimCIsCgkJIndlYnBhY2siOiAi5omT5YyF6aG16Z2iIiwKCQkidG9pbWFnZSI6ICLnlJ/miJDlm77niYciLAoJCSJjb25maWciOiAi5ouJ5Y+W6YWN572uIiwKCgkJInNoYXJldXNlciI6ICLlhbHkuqvnlKjmiLciLAoJCSJzZXRuaWNrIjogIuiuvue9ruaYteensCIsCgkJInBhc3N3b3JkIjogIuS/ruaUueWvhueggSIsCgkJImxhbmd1YWdlIjogIuivreiogOWcsOWMuiIsICJjaGluZXNlIjogIuS4reaWhyIsCgkJImNsZWFyIjogIua4hemZpOiDjOaZryIsCgkJImxvZ291dCI6ICLpgIDlh7rnmbvlvZUiLAoJfSwKCW9ubWFpbjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4ucnVuKHt9LCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCWlmICghY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBtc2cuT3B0aW9uKGFhYS5VU0VSTklDSyl8fG1zZy5PcHRpb24oaWNlLk1TR19VU0VSTkFNRSkpKSB7CgkJCQltc2cuT3B0aW9uKGNoYXQuU1NPKT8gY2FuLnVzZXIuanVtcHMobXNnLk9wdGlvbihjaGF0LlNTTykpOiBjYW4udXNlci5sb2dpbihjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCBjaGF0Lk9OTUFJTiwgbXNnKQoJCQkJfSwgbXNnLk9wdGlvbihhYWEuTE9HSU4pLCBtc2cuT3B0aW9uKCJsb2dpbi5kZXYiKSkKCQkJCXJldHVybiAvLyDnmbvlvZXorqTor4EKCQkJfQoJCQljYW4uYmFzZS5Db3B5KGNhbi5vbmFjdGlvbi5fdHJhbnMsIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKGNoYXQuVFJBTlMpLCB7fSkpCgkJCWNhbi51c2VyLmluZm8udXNlcm5pY2sgPSBjYW4uQ29uZihhYWEuVVNFUk5JQ0spLCBjYW4udXNlci5pbmZvLmF2YXRhciA9IG1zZy5PcHRpb24oYWFhLkFWQVRBUiksIGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9IG1zZy5PcHRpb24oYWFhLkJBQ0tHUk9VTkQpCgkJCWNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBhYWEuTEFOR1VBR0UpfHxtc2cuT3B0aW9uKGFhYS5MQU5HVUFHRSkKCQkJbXNnLk9wdGlvbihuZnMuU0NSSVBUKSAmJiBjYW4ucmVxdWlyZShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihuZnMuU0NSSVBUKSksIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25hY3Rpb24uc291cmNlKGNhbiwgbXNnKSB9KSAKCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05MT0dJTiwgbXNnKSB9LCBjYW4uX291dHB1dCkKCQl9KQoJfSwKCW9uc2VhcmNoZm9jdXM6IGZ1bmN0aW9uKGNhbikgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgWyJkaXYuc2VhcmNoIiwgaHRtbC5JTlBVVF0sIGZ1bmN0aW9uKHRhcmdldCkgeyB0YXJnZXQuZm9jdXMoKSB9KSB9LAoJb253ZWJwYWNrOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25hY3Rpb25bY29kZS5XRUJQQUNLXShtc2cuX2V2ZW50LCBjYW4pIH0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgeyBjYW4uQ29uZihjaGF0LlJJVkVSLCByaXZlciksIGNhbi5Db25mKGNoYXQuU1RPUk0sIHN0b3JtKSB9LAoJb25hY3Rpb25fY21kOiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikgfSwKCgl0aXRsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBhcmdzID0ge307IGNhbi5jb3JlLkxpc3QoW2NoYXQuVElUTEUsIGNoYXQuVE9QSUMsIGNoYXQuTEFZT1VUXSwgZnVuY3Rpb24oa2V5KSB7CgkJCXZhciB2YWx1ZSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGtleSk7IHZhbHVlICYmIChhcmdzW2tleV0gPSB2YWx1ZSkKCQl9KQoJCWNhbi51c2VyLmp1bXBzKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncywgdHJ1ZSkpCgl9LAoKCWJsYWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXdoaXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgYnV0dG9uKSwgY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikgfSwKCXByaW50OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsgY2FuLm9uaW1wb3J0LnRvcGljKGNhbiwgW2NoYXQuV0hJVEUsIGJ1dHRvbl0pLCBjYW4uc2V0Uml2ZXIoaHRtbC5IRUlHSFQsICIiKSwgY2FuLnNldEFjdGlvbihodG1sLkhFSUdIVCwgIiIpIH0sCgl3ZWJwYWNrOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiBtZGIuTkFNRSwgdmFsdWU6IGNhbi51c2VyLnRpdGxlKCl9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4uY29yZS5JdGVtKFZvbGNhbm9zLm1ldGEucGFjaywgZnVuY3Rpb24oa2V5LCBtc2cpIHsgCgkJCQljYW4uY29yZS5MaXN0KFsiX2V2ZW50IiwgIl9jYW4iLCAiX3hociIsIGljZS5NU0dfU0VTU0lELCAiIl0sIGZ1bmN0aW9uKGtleSkgeyBkZWxldGUobXNnW2tleV0pIH0pCgkJCX0pCgkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgewoJCQkJdG9waWM6IGNhbi5fdG9waWMsIGxheW91dDogIGNhbi5nZXRBY3Rpb24oY2hhdC5MQVlPVVQpLAoJCQkJcml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSksCgkJCQluYW1lOiBkYXRhLm5hbWUsIGNvbnRlbnQ6IEpTT04uc3RyaW5naWZ5KFZvbGNhbm9zLm1ldGEucGFjayksCgkJCQlhcmdzOiAibmFtZSx0b3BpYyxsYXlvdXQscml2ZXIsc3Rvcm0iLAoJCQl9KQoKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgIuaJk+WMheS4rS4uLiIsIGNvZGUuV0VCUEFDSykKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY29kZS5XRUJQQUNLLCBbXSwgZnVuY3Rpb24obXNnKSB7CgkJCQl0b2FzdC5jbG9zZSgpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCAi5omT5YyF5oiQ5YqfIiwgY29kZS5XRUJQQUNLKQoJCQkJY2FuLnVzZXIuZG93bmxvYWQoY2FuLCAiL3NoYXJlL2xvY2FsLyIrbXNnLlJlc3VsdCgpLCBuYW1lLCBuZnMuSFRNTCkKCQkJfSkKCQl9KQoJfSwKCXRvaW1hZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi51c2VyLnRpdGxlKCksIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCWNvbmZpZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogInNjb3BlIiwgdmFsdWU6ICJldGMvbG9jYWwuc2h5In1dLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGN0eC5DT05GSUcsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci5qdW1wcyhtc2cuUmVzdWx0KCkpIH0pCgkJfSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLCBsaXN0LCBjYikKCX0sCglzaGFyZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYXJncykgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRV0uY29uY2F0KGFyZ3N8fFtdLCBbY2hhdC5SSVZFUiwgY2FuLkNvbmYoY2hhdC5SSVZFUil8fCIiLCBjaGF0LlNUT1JNLCBjYW4uQ29uZihjaGF0LlNUT1JNKXx8IiJdKSkKCX0sCgoJdXNlcm5pY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZCB8fCBjYW4udXNlci5pc0V4dGVuc2lvbiB8fCBjYW4udXNlci5pc0xvY2FsRmlsZSkgeyByZXR1cm4gfQoJCWNhbi5vbmFjdGlvbi5jYXJ0ZShldmVudCwgY2FuLCBbInNoYXJldXNlciIsICJzZXRuaWNrIiwgYWFhLlBBU1NXT1JELCBbYWFhLkxBTkdVQUdFLCBhYWEuQ0hJTkVTRSwgYWFhLkVOR0xJU0hdLCBjbGkuQ0xFQVIsIGFhYS5MT0dPVVRdKQoJfSwKCXNoYXJldXNlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbY3R4LkFDVElPTiwgY2hhdC5TSEFSRSwgbWRiLlRZUEUsIGFhYS5MT0dJTl0pCgl9LAoJc2V0bmljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogYWFhLlVTRVJOSUNLLCB2YWx1ZTogY2FuLkNvbmYoYWFhLlVTRVJOSUNLKX1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5VU0VSTklDSywgW2xpc3RbMF1dLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4uY29yZS5LZXlzKGh0bWwuRElWLCBhYWEuVVNFUk5JQ0spLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgaXRlbSwgY2FuLkNvbmYoYWFhLlVTRVJOSUNLLCBsaXN0WzBdKSkKCQkJCX0pLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCQl9KQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCglwYXNzd29yZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciB1aSA9IGNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IGh0bWwuUEFTU1dPUkQsIHR5cGU6IGh0bWwuUEFTU1dPUkQsIGFjdGlvbjogaWNlLkFVVE99LAoJCQl7bmFtZTogaHRtbC5QQVNTV09SRCwgdHlwZTogaHRtbC5QQVNTV09SRCwgYWN0aW9uOiBpY2UuQVVUT30sCgkJXSwgZnVuY3Rpb24obGlzdCkgewoJCQlpZiAobGlzdFswXSAhPSBsaXN0WzFdKSB7IHJldHVybiBjYW4udXNlci50b2FzdChjYW4sICLlr4bnoIHkuI3kuIDoh7QiKSwgdWkuZm9jdXMoKSwgdHJ1ZSB9CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGFhYS5QQVNTV09SRCwgW2xpc3RbMF1dKQoJCX0pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5fdGFyZ2V0LCB7dG9wOiA0MCwgcmlnaHQ6IDAsIGxlZnQ6ICIifSkKCX0sCgljaGluZXNlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIGFhYS5MQU5HVUFHRSwgInpoIikgfSwKCWVuZ2xpc2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwgYWFhLkxBTkdVQUdFLCAiZW4iKSB9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmJhY2tncm91bmQoZXZlbnQsIGNhbiwgIiIpLCBjYW4ub25pbXBvcnQuYXZhdGFyKGV2ZW50LCBjYW4sICIiKSB9LAoJbG9nb3V0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmxvZ291dChjYW4pIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uX3RhcmdldC5vZmZzZXRIZWlnaHQgfSwKCXRvcGljOiBmdW5jdGlvbihjYW4pIHsgcmV0dXJuIGNhbi5fdG9waWMgfSwKCWF2YXRhcjogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYXZhdGFyID09ICJ2b2lkIikgewoJCQlyZXR1cm4gIiIKCQl9CgkJcmV0dXJuIGNhbi51c2VyLmluZm8uYXZhdGFyCgl9LAoJYmFja2dyb3VuZDogZnVuY3Rpb24oY2FuKSB7CgkJaWYgKGNhbi51c2VyLmluZm8uYmFja2dyb3VuZCA9PSAidm9pZCIpIHsKCQkJcmV0dXJuICIiCgkJfQoJCXJldHVybiBjYW4udXNlci5pbmZvLmJhY2tncm91bmQKCX0sCn0pCg==",
        "usr/volcanos/panel/river.css": "ZmllbGRzZXQuUml2ZXIgeyBvdmVyZmxvdzphdXRvOyBmbG9hdDpsZWZ0OyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5hY3Rpb24geyBkaXNwbGF5OmJsb2NrOyBwYWRkaW5nOjAgMTJweDsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IHsgd2lkdGg6MTgwcHg7IH0KZmllbGRzZXQuUml2ZXI+ZGl2Lm91dHB1dCBkaXYuaXRlbSB7IHBhZGRpbmc6M3B4IDE2cHg7IGJvcmRlci1sZWZ0OnNvbGlkIDNweCAjMDBmZmFlOyB9CmZpZWxkc2V0LlJpdmVyPmRpdi5vdXRwdXQgZGl2Lmxpc3QgZGl2Lml0ZW0geyBib3JkZXItbGVmdDpzb2xpZCAzcHggI2NjZGM0YzsgfQpmaWVsZHNldC5SaXZlcj5kaXYub3V0cHV0IGRpdi5saXN0IHsgcGFkZGluZy1sZWZ0OjVweDsgbWFyZ2luLWxlZnQ6OHB4OyB9Cg==",
        "usr/volcanos/panel/river.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLnJpdmVyX2xpc3QgPSB7fSwgY2FuLnN0b3JtX2xpc3QgPSB7fQoJCWNhbi5vbmltcG9ydC5fbWFpbihjYW4sIG1zZyksIGNhbi5vbmltcG9ydC5fbWVudShjYW4sIG1zZykKCgkJdmFyIHNlbGVjdDsgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIG1zZy5UYWJsZShmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlyZXR1cm4gY2FuLm9uaW1wb3J0Ll9yaXZlcihjYW4sIGl0ZW0sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJKGluZGV4ID09IDAgfHwgaXRlbS5oYXNoID09IGNhbi5fbWFpbl9yaXZlcikgJiYgKHNlbGVjdCA9IHRhcmdldCkKCQkJfSkKCQl9KSksIHNlbGVjdCAmJiBzZWxlY3QuY2xpY2soKQoJfSwKCV9tYWluOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCS8vIGlmIChjYW4udXNlci5pc01vYmlsZSkgeyBjYW4uX21haW5fcml2ZXIgPSAicHJvZHVjdCIsIGNhbi5fbWFpbl9zdG9ybSA9ICJvZmZpY2UiIH0KCQkvLyBpZiAoY2FuLnVzZXIuaXNXZWlYaW4pIHsgY2FuLl9tYWluX3JpdmVyID0gInNlcnZpY2UiLCBjYW4uX21haW5fc3Rvcm0gPSAid3giIH0KCQljYW4uX21haW5fcml2ZXIgPSBjYW4ubWlzYy5TZWFyY2goY2FuLCBjaGF0LlJJVkVSKXx8bXNnLk9wdGlvbihpY2UuTVNHX1JJVkVSKXx8Vm9sY2Fub3MubWV0YS5hcmdzLnJpdmVyfHxjYW4uX21haW5fcml2ZXJ8fCJwcm9qZWN0IgoJCWNhbi5fbWFpbl9zdG9ybSA9IGNhbi5taXNjLlNlYXJjaChjYW4sIGNoYXQuU1RPUk0pfHxtc2cuT3B0aW9uKGljZS5NU0dfU1RPUk0pfHxWb2xjYW5vcy5tZXRhLmFyZ3Muc3Rvcm18fGNhbi5fbWFpbl9zdG9ybXx8InN0dWRpbyIKCX0sCglfbWVudTogZnVuY3Rpb24oY2FuLCBtc2cpIHsgaWYgKGNhbi51c2VyLm1vZC5pc1BvZHx8Y2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQljYW4uc2V0SGVhZGVyTWVudShjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihjaGF0Lk1FTlVTKSwgY2FuLkNvbmYoY2hhdC5NRU5VUyl8fGNhbi5vbmRldGFpbC5fbWVudXMpLCBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7CgkJCWNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25kZXRhaWwsIGJ1dHRvbl0sIFtldmVudCwgY2FuLCBidXR0b24sIGNhbi5Db25mKGNoYXQuUklWRVIpLCBjYW4uQ29uZihjaGF0LlNUT1JNKV0pCgkJfSkKCX0sCglfY2FydGU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgcml2ZXIsIHN0b3JtKSB7IGlmIChjYW4udXNlci5pc01vYmlsZSkgeyByZXR1cm4gfQoJCWlmIChjYW4uY29yZS5WYWx1ZShjYW4uX3Jvb3QsIGNhbi5jb3JlLktleXMoY2hhdC5SSVZFUiwgcml2ZXIpKSkgeyByZXR1cm4gfQoKCQljYW4ub25hY3Rpb24uY2FydGUoZXZlbnQsIGNhbiwgbGlzdCwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbW9kdWxlKSB7CgkJCW1vZHVsZVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKQoJCX0pCgl9LAoJX3JpdmVyOiBmdW5jdGlvbihjYW4sIG1ldGEsIGNiKSB7CgkJcmV0dXJuIHt0ZXh0OiBbbWV0YS5uYW1lLCBodG1sLkRJViwgaHRtbC5JVEVNXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYWN0aW9uLnN0b3JtKGV2ZW50LCBjYW4sIG1ldGEuaGFzaCkKCgkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25pbXBvcnQuX2NhcnRlKGNhbiwgY2FuLm9uZGV0YWlsLmxpc3QsIG1ldGEuaGFzaCkKCgkJfSwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQljYW4ucml2ZXJfbGlzdFttZXRhLmhhc2hdID0gdGFyZ2V0LCBjYih0YXJnZXQpCgkJfX0KCX0sCglfc3Rvcm06IGZ1bmN0aW9uKGNhbiwgbWV0YSwgcml2ZXIpIHsKCQlyZXR1cm4ge3RleHQ6IFttZXRhLm5hbWUsIGh0bWwuRElWLCBodG1sLklURU1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25hY3Rpb24uYWN0aW9uKGV2ZW50LCBjYW4sIHJpdmVyLCBtZXRhLmhhc2gpCgoJCX0sIG9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jYXJ0ZShjYW4sIGNhbi5vbmRldGFpbC5zdWJsaXN0LCByaXZlciwgbWV0YS5oYXNoKQoKCQl9LCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCWNhbi5zdG9ybV9saXN0W2Nhbi5jb3JlLktleXMocml2ZXIsIG1ldGEuaGFzaCldID0gdGFyZ2V0CgkJfX0KCX0sCglkaXNwbGF5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHNob3cgPSBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl90YXJnZXQpOyBjYW4ub25sYXlvdXQuX2luaXQoY2FuKTsgcmV0dXJuIHNob3cKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FTkdJTkUsIHtoZWxwOiAi6Kej5p6Q5byV5pOOIiwgX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbXNnLCBwYW5lbCwgY21kcywgY2IpIHsKCXZhciBsaXN0ID0gY2FuLl9yb290LnJpdmVyCgljbWRzLmxlbmd0aCA9PSAwICYmIGNhbi5jb3JlLkl0ZW1Tb3J0KGxpc3QsICJvcmRlciIsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQlpZiAoY2FuLmNvcmUuSXRlbSh2YWx1ZS5zdG9ybSkubGVuZ3RoID09IDApIHsgcmV0dXJuIH0KCQltc2cuUHVzaCh7aGFzaDoga2V5LCBuYW1lOiBjYW4udXNlci5sYW5ndWFnZShjYW4pID09ICJlbiI/IGtleTogdmFsdWUubmFtZX0pIC8vIOe+pOe7hOWIl+ihqAoJfSk7IGlmIChjbWRzLmxlbmd0aCAhPSAxICYmIGNtZHNbMV0gIT0gY2hhdC5TVE9STSkgeyByZXR1cm4gZmFsc2UgfQoKCXZhciByaXZlciA9IGxpc3RbY21kc1swXV07IGlmICghcml2ZXIpIHsgcmV0dXJuIGZhbHNlIH0KCWNhbi5jb3JlLkl0ZW1Tb3J0KHJpdmVyLnN0b3JtLCAib3JkZXIiLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7CgkJbXNnLlB1c2goe2hhc2g6IGtleSwgbmFtZTogY2FuLnVzZXIubGFuZ3VhZ2UoY2FuKSA9PSAiZW4iPyBrZXk6IHZhbHVlLm5hbWV9KSAvLyDlupTnlKjliJfooagKCX0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyk7IHJldHVybiB0cnVlCn19KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFsiY3JlYXRlIiwgInNoYXJlIiwgInJlZnJlc2giXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgY2IsIHRhcmdldCkgewoJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5ydW4oe30sIFtdLCBmdW5jdGlvbihtc2cpIHsgaWYgKG1zZy5PcHRpb24oaWNlLk1TR19SSVZFUikgPT0gIl9zaGFyZSIpIHsgcmV0dXJuIH0KCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgbXNnLCBudWxsLCBjYW4uX291dHB1dCksIGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLkNvbmYoY3R4LkFDVElPTil8fGNhbi5vbmFjdGlvbi5saXN0KQoJCQlpZiAoY2FuLnVzZXIubW9kLmlzUG9kIHx8Y2FuLnVzZXIuaXNFeHRlbnNpb24gfHwgY2FuLnVzZXIuaXNNb2JpbGUpIHsgcmV0dXJuIH0KCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi5fdGFyZ2V0LCB0cnVlKQoJCX0pCgl9LAoJb25zZWFyY2g6IGZ1bmN0aW9uKGNhbiwgbXNnLCB3b3JkKSB7CgkJaWYgKHdvcmRbMF0gPT0gY2hhdC5TVE9STSkgeyBjYW4ub25leHBvcnQuc3Rvcm0oY2FuLCBtc2csIHdvcmQpIH0KCX0sCglvbnN0b3JtX3NlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIHJpdmVyLCBzdG9ybSkgewoJCWlmIChjYW4udXNlci5pc0V4dGVuc2lvbikgeyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdHguQVJHUywgSlNPTi5zdHJpbmdpZnkoe3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkpIH0KCX0sCglvbmFjdGlvbl90b3VjaDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbikKCX0sCglvbmFjdGlvbl9ub3Rvb2w6IGZ1bmN0aW9uKGNhbiwgbXNnLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ub25kZXRhaWxbIua3u+WKoOW3peWFtyJdKG1zZy5fZXZlbnQsIGNhbiwgIua3u+WKoOW3peWFtyIsIHJpdmVyLCBzdG9ybSkKCX0sCgoJY2FydGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGxpc3QsIGNiKSB7CgkJY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25kZXRhaWwsIGxpc3QsIGNiKQoJfSwKCXN0b3JtOiBmdW5jdGlvbihldmVudCwgY2FuLCByaXZlcikgeyBjYW4uc3VibGlzdCA9IGNhbi5zdWJsaXN0fHx7fQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfSVRFTSwgY2FuLnJpdmVyX2xpc3Rbcml2ZXJdKQoJCXZhciBsaXN0ID0gY2FuLnN1Ymxpc3Rbcml2ZXJdOyBpZiAobGlzdCkgeyByZXR1cm4gY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGxpc3QpIH0KCgkJY2FuLnJ1bih7fSwgW3JpdmVyLCBjaGF0LlNUT1JNXSwgZnVuY3Rpb24obXNnKSB7CgkJCXZhciBzZWxlY3QgPSAwOyBsaXN0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7dmlldzogaHRtbC5MSVNULCBsaXN0OiBtc2cuVGFibGUoZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCXJpdmVyID09IGNhbi5fbWFpbl9yaXZlciAmJiBpdGVtLmhhc2ggPT0gY2FuLl9tYWluX3N0b3JtICYmIChzZWxlY3QgPSBpbmRleCkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQuX3N0b3JtKGNhbiwgaXRlbSwgcml2ZXIpCgkJCX0pIH1dKS5maXJzdCwgbGlzdC5jaGlsZHJlbi5sZW5ndGggPiAwICYmIGxpc3QuY2hpbGRyZW5bc2VsZWN0XS5jbGljaygpCgoJCQlldmVudC50YXJnZXQubmV4dFNpYmxpbmcgJiYgY2FuLl9vdXRwdXQuaW5zZXJ0QmVmb3JlKGxpc3QsIGV2ZW50LnRhcmdldC5uZXh0U2libGluZykKCQkJY2FuLnN1Ymxpc3Rbcml2ZXJdID0gbGlzdAoJCX0pCgl9LAoJYWN0aW9uOiBmdW5jdGlvbihldmVudCwgY2FuLCByaXZlciwgc3Rvcm0pIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5zdWJsaXN0W3JpdmVyXSwge2Rpc3BsYXk6IGh0bWwuQkxPQ0t9KQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVZfSVRFTSwgY2FuLnJpdmVyX2xpc3Rbcml2ZXJdKQoJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuRElWX0xJU1QsIGh0bWwuRElWX0lURU1dLCBjYW4uc3Rvcm1fbGlzdFtjYW4uY29yZS5LZXlzKHJpdmVyLCBzdG9ybSldKQoKCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9ubGF5b3V0Ll9pbml0KGNhbikKCQkJY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNoYXQuT05TVE9STV9TRUxFQ1QsIGNhbi5yZXF1ZXN0KGV2ZW50LCB7CgkJCQlyaXZlcjogY2FuLkNvbmYoY2hhdC5SSVZFUiwgcml2ZXIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSwgc3Rvcm0pLAoJCQl9KSkKCQl9KQoJfSwKCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci50cmFucyhjYW4sIHsicHVibGljIjogIuWFrOW8gOe+pCIsICJwcm90ZWN0ZWQiOiAi5YaF6YOo576kIiwgInByaXZhdGUiOiAi56eB5pyJ576kIn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgWwoJCQl7bmFtZTogbWRiLlRZUEUsIHZhbHVlczogW2NoYXQuUFVCTElDLCBjaGF0LlBST1RFQ1RFRCwgY2hhdC5QUklWQVRFXSwgX3RyYW5zOiAi57G75Z6LIn0sCgkJCXtuYW1lOiBtZGIuTkFNRSwgdmFsdWU6ICJoaSIsIF90cmFuczogIue+pOWQjSJ9LCB7bmFtZTogbWRiLlRFWFQsIHZhbHVlOiAiaGVsbG8iLCBfdHJhbnM6ICLnroDku4sifSwKCQldLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5DUkVBVEUsIGFyZ3MsIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiBtc2cuUmVzdWx0KCl9KSB9KQoJCX0pCgl9LAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25tb3Rpb24uc2hhcmUoZXZlbnQsIGNhbiwgW3tuYW1lOiBjaGF0LlRJVExFLCB2YWx1ZTogY2FuLkNvbmYoY2hhdC5TVE9STSl9XSwgW21kYi5UWVBFLCBjaGF0LlNUT1JNXSkKCX0sCglyZWZyZXNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIGFyZ3MgPSB7cml2ZXI6IGNhbi5Db25mKGNoYXQuUklWRVIpLCBzdG9ybTogY2FuLkNvbmYoY2hhdC5TVE9STSksIHRvcGljOiBjYW4uZ2V0SGVhZGVyKGNoYXQuVE9QSUMpLCBsYXlvdXQ6IGNhbi5nZXRBY3Rpb24oY2hhdC5MQVlPVVQpfQoJCWlmIChjYW4udXNlci5pc0V4dGVuc2lvbikgeyBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShjdHguQVJHUywgSlNPTi5zdHJpbmdpZnkoYXJncykpIH0KCQljYW4ubWlzYy5TZWFyY2goY2FuLCBhcmdzKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLoj5zljZXkuqTkupIiLAoJbGlzdDogWyLlhbHkuqvnvqTnu4QiLCAi5re75Yqg5bqU55SoIiwgIua3u+WKoOiuvuWkhyIsICLmt7vliqDnlKjmiLciLCAi6YeN5ZG95ZCN576k57uEIiwgIuWIoOmZpOe+pOe7hCJdLAoJc3VibGlzdDogWyLlhbHkuqvlupTnlKgiLCAi5re75Yqg5bel5YW3IiwgIuS/neWtmOWPguaVsCIsICLph43lkb3lkI3lupTnlKgiLCAi5Yig6Zmk5bqU55SoIl0sCgkvLyBfbWVudXM6IFsKCS8vIAlbImNyZWF0ZSIsICLliJvlu7rnvqTnu4QiLCAi5re75Yqg5bqU55SoIiwgIua3u+WKoOW3peWFtyIsICLmt7vliqDorr7lpIciLCAi5Yib5bu656m66Ze0Il0sCgkvLyAJWyJzaGFyZSIsICLlhbHkuqvnvqTnu4QiLCAi5YWx5Lqr5bqU55SoIiwgIuWFseS6q+W3peWFtyIsICLlhbHkuqvorr7lpIciLCAi6K6/6Zeu56m66Ze0Il0sCgkvLyBdLAoKCSLliJvlu7rnvqTnu4QiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jcmVhdGUoZXZlbnQsIGNhbikgfSwKCSLlhbHkuqvnvqTnu4QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IHJpdmVyfV0sIFttZGIuVFlQRSwgY2hhdC5SSVZFUl0pCgl9LAoJIua3u+WKoOW6lOeUqCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsgY2FuLm9uZGV0YWlsLmNyZWF0ZShldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB9LAoJIuWFseS6q+W6lOeUqCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IHN0b3JtfV0sIFttZGIuVFlQRSwgY2hhdC5TVE9STV0pCgl9LAoJIua3u+WKoOW3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnVzZXIuc2VsZWN0KGV2ZW50LCBjYW4sIGN0eC5DT01NQU5ELCAiaW5kZXgiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5TVE9STSwgY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLkhBU0gsIHN0b3JtXS5jb25jYXQoW3dlYi5TUEFDRSwgIiIsIGN0eC5JTkRFWCwgaXRlbVswXV0pLCBmdW5jdGlvbihtc2cpIHsgbmV4dCgpIH0pCgkJfSwgZnVuY3Rpb24oKSB7IGNhbi5taXNjLlNlYXJjaChjYW4sIHtyaXZlcjogcml2ZXIsIHN0b3JtOiBzdG9ybX0pIH0pCgl9LAoJIuWFseS6q+W3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnVzZXIuc2VsZWN0KGV2ZW50LCBjYW4sIG1kYi5QTFVHSU4sICJuYW1lLGluZGV4LGFyZ3MiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi51c2VyLnNoYXJlKGNhbiwgY2FuLnJlcXVlc3QoZXZlbnQpLCBbcml2ZXIsIGN0eC5BQ1RJT04sIGNoYXQuU0hBUkUsIG1kYi5UWVBFLCBjaGF0LkZJRUxELAoJCQkJbWRiLk5BTUUsIGl0ZW1bMV0sIG1kYi5URVhULCBpdGVtWzJdLCBjaGF0LlRJVExFLCBpdGVtWzBdLCBjaGF0LlJJVkVSLCByaXZlciwgY2hhdC5TVE9STSwgc3Rvcm0sCgkJCV0pCgkJfSkKCX0sCgoJIua3u+WKoOiuvuWkhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5zZWxlY3QoZXZlbnQsIGNhbiwgd2ViLlNQQUNFLCAidHlwZSxuYW1lLHRleHQiLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7CgkJCWNhbi5ydW4oe30sIFtyaXZlciwgY2hhdC5OT0RFUywgY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLlRZUEUsIGl0ZW1bMF0sIG1kYi5OQU1FLCBpdGVtWzFdXSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0pCgl9LAoJIuWFseS6q+iuvuWkhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYWFhLklOVklURSwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4udXNlci50b2FzdFNjcmlwdChjYW4sIG1zZy5SZXN1bHQoKSwgYnV0dG9uKSB9KQoJfSwKCSLliJvlu7rnqbrpl7QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgeyBjYW4ucmVxdWVzdChldmVudCwge2FjdGlvbjogYnV0dG9ufSkKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6ICJuYW1lIiwgdmFsdWU6ICJoaSJ9LCB7bmFtZTogInJlcG9zIn0sIHtuYW1lOiAidGVtcGxhdGUifV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY2xpLlNUQVJULCBhcmdzLmNvbmNhdChjaGF0LlJJVkVSLCByaXZlciksIGZ1bmN0aW9uKG1zZykgewoJCQkJdmFyIGxpbmsgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5jb3JlLktleXMoY2FuLm1pc2MuU2VhcmNoKGNhbiwgaWNlLlBPRCksIG1zZy5PcHRpb24obWRiLk5BTUUpKX0pCgkJCQljYW4udXNlci50b2FzdChjYW4sIGxpbmspLCBjYW4udXNlci5vcGVuKGxpbmspCgkJCX0pCgkJfSkKCX0sCgki6K6/6Zeu56m66Ze0IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCByaXZlciwgc3Rvcm0pIHsKCQljYW4udXNlci5zZWxlY3Qoe3JpdmVyOiByaXZlcn0sIGNhbiwgd2ViLlNQQUNFLCAidGltZSx0eXBlLG5hbWUsdGV4dCIpCgl9LAoKCSLmt7vliqDnlKjmiLciOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnVzZXIuc2VsZWN0KGV2ZW50LCBjYW4sIGNoYXQuVVNFUiwgInVzZXJuaWNrLHVzZXJuYW1lIiwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgewoJCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuVVNFUiwgY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgYWFhLlVTRVJOQU1FLCBpdGVtWzBdXSwgZnVuY3Rpb24obXNnKSB7IG5leHQoKSB9KQoJCX0pCgl9LAoJIumHjeWRveWQjee+pOe7hCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIpIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUVdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHtoYXNoOiByaXZlcn0pLCBtZGIuTU9ESUZZLCBbbWRiLk5BTUUsIGRhdGEubmFtZV0sIGZ1bmN0aW9uKG1zZykgeyBjYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyfSkgfSkKCQl9KQoJfSwKCSLliKDpmaTnvqTnu4QiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwge2hhc2g6IHJpdmVyfSksIG1kYi5SRU1PVkUsIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiAiIiwgc3Rvcm06ICIifSkgfSkKCX0sCgoJIuS/neWtmOWPguaVsCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLmdldEFjdGlvbihjdHguQVJHUywgZnVuY3Rpb24oaXRlbSwgbmV4dCwgaW5kZXgsIGFycmF5KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCh7fSwge2hhc2g6IHN0b3JtLCBpZDogaXRlbS5kYXRhc2V0LmlkfSkKCQkJdmFyIHRvYXN0ID0gY2FuLnVzZXIudG9hc3QoY2FuLCAoaW5kZXgrMSkraWNlLlBTK2FycmF5Lmxlbmd0aCwgYnV0dG9uLCAxMDAwMCwgKGluZGV4KzEpKjEwMC9hcnJheS5sZW5ndGgpCgkJCWNhbi5ydW4obXNnLCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5NT0RJRlksIGN0eC5BUkdTLCBpdGVtLmRhdGFzZXQuYXJnc10sIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQkJdG9hc3QuY2xvc2UoKSwgbmV4dCgpLCBpbmRleCA9PSBhcnJheS5sZW5ndGgtMSAmJiBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuLCBidXR0b24pCgkJCQl9KQoJCQl9KQoJCX0pCgl9LAoJIumHjeWRveWQjeW6lOeUqCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgcml2ZXIsIHN0b3JtKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FXSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7aGFzaDogc3Rvcm19KSwgW3JpdmVyLCBjaGF0LlNUT1JNLCBjdHguQUNUSU9OLCBtZGIuTU9ESUZZXS5jb25jYXQoYXJncyksIGZ1bmN0aW9uKG1zZykgewoJCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06IHN0b3JtfSkKCQkJfSkKCQl9KQoJfSwKCSLliKDpmaTlupTnlKgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyLCBzdG9ybSkgewoJCWNhbi5ydW4oY2FuLnJlcXVlc3QoZXZlbnQsIHtoYXNoOiBzdG9ybX0pLCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5SRU1PVkVdLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm1pc2MuU2VhcmNoKGNhbiwge3JpdmVyOiByaXZlciwgc3Rvcm06ICIifSkKCQl9KQoJfSwKCgoJY3JlYXRlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIHJpdmVyKSB7CgkJY2FuLnVzZXIudHJhbnMoY2FuLCB7InB1YmxpYyI6ICLlhazlvIDlupTnlKgiLCAicHJvdGVjdGVkIjogIue+pOe7hOW6lOeUqCIsICJwcml2YXRlIjogIuS4quS6uuW6lOeUqCJ9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFsKCQkJe25hbWU6IG1kYi5UWVBFLCB2YWx1ZXM6IFtjaGF0LlBVQkxJQywgY2hhdC5QUk9URUNURUQsIGNoYXQuUFJJVkFURV0sIF90cmFuczogIuexu+WeiyJ9LAoJCQl7bmFtZTogbWRiLk5BTUUsIHZhbHVlOiAiaGkiLCBfdHJhbnM6ICLlkI3np7AifSwge25hbWU6IG1kYi5URVhULCB2YWx1ZTogImhlbGxvIiwgX3RyYW5zOiAi566A5LuLIn0sCgkJXSwgZnVuY3Rpb24oYXJncykgewoJCQljYW4ucnVuKHt9LCBbcml2ZXIsIGNoYXQuU1RPUk0sIGN0eC5BQ1RJT04sIG1kYi5DUkVBVEVdLmNvbmNhdChhcmdzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ubWlzYy5TZWFyY2goY2FuLCB7cml2ZXI6IHJpdmVyLCBzdG9ybTogbXNnLlJlc3VsdCgpfSkKCQkJfSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJd2lkdGg6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLl90YXJnZXQub2Zmc2V0V2lkdGggfSwKCXN0b3JtOiBmdW5jdGlvbihjYW4sIG1zZywgd29yZCkgewoJCXZhciBmaWVsZHMgPSAobXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUyl8fCJjdHgsY21kLHR5cGUsbmFtZSx0ZXh0Iikuc3BsaXQoIiwiKQoJCWNhbi5jb3JlLkl0ZW0oY2FuLl9yb290LnJpdmVyLCBmdW5jdGlvbihyaXZlciwgdmFsdWUpIHsKCQkJY2FuLmNvcmUuSXRlbSh2YWx1ZS5zdG9ybSwgZnVuY3Rpb24oc3Rvcm0sIGl0ZW0pIHsKCQkJCWlmICh3b3JkWzFdICE9ICIiICYmIHdvcmRbMV0gIT0gc3Rvcm0gJiYgd29yZFsxXSAhPSBpdGVtLm5hbWUpIHsgcmV0dXJuIH0KCgkJCQl2YXIgZGF0YSA9IHtjdHg6ICJjYW4iLCBjbWQ6ICJTdG9ybSIsCgkJCQkJdHlwZTogcml2ZXIsIG5hbWU6IHN0b3JtLCB0ZXh0OiBzaHkoIui3s+i9rCIsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJCWNhbi5vbmFjdGlvbi5hY3Rpb24oZXZlbnQsIGNhbiwgcml2ZXIsIHN0b3JtKQoJCQkJCX0pLAoJCQkJfTsgY2FuLmNvcmUuTGlzdChmaWVsZHMsIGZ1bmN0aW9uKGtleSkgeyBtc2cuUHVzaChrZXksIGRhdGFba2V5XXx8IiIpIH0pCgkJCX0pCgkJfSkKCX0sCn0pCg==",
        "usr/volcanos/panel/search.css": "ZmllbGRzZXQuU2VhcmNoIHsgYmFja2dyb3VuZDojMDQxYTI1YmQ7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MHB4OyB0b3A6MzFweDsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LlNlYXJjaCBpbnB1dC53b3JkIHsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgfQpmaWVsZHNldC5wYW5lbC5TZWFyY2g+ZGl2LnN0YXR1cyB7IGJvcmRlci10b3A6MXB4IHNvbGlkIGRhcmtjeWFuOyB9Cg==",
        "usr/volcanos/panel/search.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGxpc3QsIGNiLCB0YXJnZXQpIHsKCQljYW4uX2ZvcmVhY2ggPSAiKiIKCQljYW4uX2ZvcmVhY2ggPSAiY29tbWFuZCxzcGFjZSx0ZXh0IgoJCWNhbi5saXN0ID0gbXNnLlRhYmxlKCksIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5jb250ZW50KQoJCXZhciB0YWJsZSA9IGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KSB7IGNhbi5TdGF0dXMobWRiLlRPVEFMLCBpbmRleCsxKQoJCQlyZXR1cm4ge3RleHQ6IFtrZXkgPT0gbWRiLlRFWFQgJiYgY2FuLmJhc2UuaXNGdW5jKGxpbmUudGV4dCkgJiYgbGluZS50ZXh0LmhlbHAgfHwgdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uW2Nhbi50eXBlID09IGNhbi5fZm9yZWFjaHx8ZXZlbnQuY3RybEtleT8gY2hhdC5QTFVHSU46IG1kYi5TRUxFQ1RdKGV2ZW50LCBjYW4sIGluZGV4KSAKCQkJfX0KCQl9LCBjYW4udWkuY29udGVudCwgY2FuLmNvcmUuTGlzdCgobXNnLk9wdGlvbigic29ydCIpfHwiY3R4LGNtZCx0eXBlLG5hbWUsdGV4dCIpLnNwbGl0KGljZS5GUyksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJcmV0dXJuIGxpc3QuaW5kZXhPZihpdGVtKQoJCX0pKTsgdGFibGUgJiYgY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5kaXNwbGF5LCB0YWJsZS5vZmZzZXRXaWR0aCkKCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuQSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5vcGVuKGl0ZW0uaHJlZiksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KSB9CgkJfSksIGNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbikKCgkJY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUyksIFtdKS5jb25jYXQoe25hbWU6ICJzZWxlY3RlZCIsIHZhbHVlOiAiMCJ9KSkKCQltc2cuTGVuZ3RoKCkgPT0gMSAmJiBjYW4udWkucHJvZmlsZS5pbm5lckhUTUwgPT0gIiIgJiYgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFibGUsIGh0bWwuVEQpWzBdLmNsaWNrKCkKCX0sCglfd29yZDogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGZpZWxkcykgeyBjYW4udHlwZSA9IGNtZHNbMF0KCQl2YXIgY2IgPSBjYW4ub25hY3Rpb25bY21kc1sxXV07IGlmIChjYikgeyBjYih7fSwgY2FuKTsgcmV0dXJuIH0KCgkJdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KHt9LCB7CgkJCXdvcmQ6IGNtZHMsIGZpZWxkczogZmllbGRzLmpvaW4oaWNlLkZTKSwgc29ydDogbXNnLk9wdGlvbigic29ydCIpLAoJCQlyaXZlcjogbXNnLk9wdGlvbihjaGF0LlJJVkVSKSwgaW5kZXg6IG1zZy5PcHRpb24obWRiLklOREVYKSwKCQl9KQoKCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgY2hhdC5PTlNFQVJDSCwgcmVzKQoJCWNhbi5ydW4ocmVzLCBjbWRzLCBmdW5jdGlvbihyZXMpIHsgY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgcmVzLCBmaWVsZHMpIH0pCgkJY2FuLm9ubW90aW9uLnNob3coY2FuKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGNhbi51aS53b3JkKQoJCX0pCgl9LAoKCXNlbGVjdDogZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMsIGNiKSB7IGNhbi51aS53b3JkLnZhbHVlID0gY21kc1sxXQoJCXZhciBmaWVsZHMgPSAoY21kc1syXXx8bXNnLk9wdGlvbihpY2UuTVNHX0ZJRUxEUyl8fCJjdHgsY21kLHR5cGUsbmFtZSx0ZXh0Iikuc3BsaXQoaWNlLkZTKQoJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4udWkuZGlzcGxheSwgW3t0aDogZmllbGRzfV0pLCBjYW4uY2IgPSBmdW5jdGlvbigpIHsKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihjYW4ub25leHBvcnQuc2VsZWN0KGNhbikpLCBjYW4ub25tb3Rpb24uaGlkZShjYW4pCgkJfQoKCQljYW4uaW5wdXQgPSBmdW5jdGlvbihldmVudCwgd29yZCkgeyBjbWRzWzFdID0gd29yZHx8Y21kc1sxXQoJCQljYW4ub25pbXBvcnQuX3dvcmQoY2FuLCBtc2csIGNtZHMsIGZpZWxkcykKCQl9LCBjYW4ub25pbXBvcnQuX3dvcmQoY2FuLCBtc2csIGNtZHMsIGZpZWxkcykKCgkJY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obXNnLCB0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHQpIHsKCQkJY2FuLkNvbmZIZWlnaHQoaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hULTIqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4uQ29uZldpZHRoKHdpZHRoLTIqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fdGFyZ2V0LCB7dG9wOiB0b3AsIGxlZnQ6IGxlZnR9KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5Lqk5LqS5pON5L2cIiwgbGlzdDogW2NsaS5DTE9TRSwgY2xpLkNMRUFSLCBjbGkuRE9ORV0sIF9pbml0OiBmdW5jdGlvbihjYW4sIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl90YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCX0sCglvbmxvZ2luOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgY2FuLkNvbmYoaHRtbC5BQ1RJT04pfHxjYW4ub25hY3Rpb24ubGlzdCkKCQljYW4udWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgWwoJCQl7aW5wdXQ6IFsid29yZCIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuKQoJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJCQlpZiAoZXZlbnQua2V5ID09ICIwIikgewoJCQkJCQljYW4ub25hY3Rpb24uY2xlYXIoZXZlbnQsIGNhbikKCQkJCQl9CgkJCQkJaWYgKCIxIiA8PSBldmVudC5rZXkgJiYgZXZlbnQua2V5IDw9ICI5IikgewoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgW2h0bWwuVEJPRFksIGh0bWwuVFJdLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJCQkJCWlmIChpbmRleCsxID09IGV2ZW50LmtleSkgewoJCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsKCQkJCQkJCQkJaW5kZXggPT0gMCAmJiB0ZC5jbGljaygpCgkJCQkJCQkJfSkKCQkJCQkJCX0KCQkJCQkJfSkKCQkJCQkJcmV0dXJuCgkJCQkJfQoJCQkJfQoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVTQ0FQRSkgeyByZXR1cm4gY2FuLm9ubW90aW9uLmhpZGUoY2FuKSB9CgoJCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQkJCWlmIChldmVudC5zaGlmdEtleSkgeyB2YXIgZmlyc3QgPSBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUilbMV0KCQkJCQkJcmV0dXJuIGNhbi5vbmFjdGlvbltjYW4udHlwZSA9PSBjYW4uX2ZvcmVhY2g/IGNoYXQuUExVR0lOOiBodG1sLlNFTEVDVF0oZXZlbnQsIGNhbiwgZmlyc3QuZGF0YXNldC5pbmRleCkKCQkJCQl9CgkJCQkJaWYgKGV2ZW50LmN0cmxLZXkpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbltjbGkuRE9ORV0oZXZlbnQsIGNhbikgfQoJCQkJCXJldHVybiBjYW4uaW5wdXQoZXZlbnQsIGV2ZW50LnRhcmdldC52YWx1ZSkKCQkJCX0KCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBbaHRtbC5UQk9EWSwgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQkJdmFyIGhhcyA9IGZhbHNlOyBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCQkJaGFzID0gaGFzIHx8IHRkLmlubmVyVGV4dC5pbmRleE9mKGV2ZW50LnRhcmdldC52YWx1ZSkgPiAtMQoJCQkJCX0pLCBjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgdHIsIGh0bWwuSElEREVOLCAhaGFzKQoJCQkJfSkKCQkJfV19LAoJCQljaGF0LkNPTlRFTlQsIGh0bWwuU1RBVFVTLCB7dmlldzogW2NoYXQuRElTUExBWSwgaHRtbC5UQUJMRV19LCBjaGF0LlBST0ZJTEUsCgkJXSksIGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkuZGlzcGxheSwgY2hhdC5DT05URU5UKQoJfSwKCW9ub3BlbnNlYXJjaDogZnVuY3Rpb24oY2FuLCBtc2csIHR5cGUsIHdvcmQpIHsgY2FuLm9uaW1wb3J0LnNlbGVjdChjYW4sIG1zZywgW3R5cGV8fGNhbi5fZm9yZWFjaCwgd29yZHx8IiJdKSB9LAoKCWNsZWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9maWxlKSB9LAoJZG9uZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uYmFzZS5pc0Z1bmMoY2FuLmNiKSAmJiBjYW4uY2IoKSB9LAoJY2xvc2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmhpZGUoY2FuKSB9LAoKCXNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaW5kZXgpIHsgdmFyIGxpbmUgPSBjYW4ubGlzdFtpbmRleF0KCQlpZiAoY2FuLmJhc2UuaXNGdW5jKGxpbmUudGV4dCkpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi5oaWRlKGNhbiksIGxpbmUudGV4dChldmVudCkgfQoKCQl2YXIgZmllbGRzID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVEgsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uaW5uZXJUZXh0IH0pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dGQ6IGNhbi5jb3JlLkxpc3QoZmllbGRzLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBsaW5lW2l0ZW1dIH0pLCBkYXRhOiB7aW5kZXg6IGluZGV4fSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpCgkJCWNhbi5TdGF0dXMoInNlbGVjdGVkIiwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVFIpLmxlbmd0aC0xKQoJCX19XSksIGNhbi5TdGF0dXMoInNlbGVjdGVkIiwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVFIpLmxlbmd0aC0xKQoJfSwKCglwbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGluZGV4KSB7IHZhciBsaW5lID0gY2FuLmxpc3RbaW5kZXhdCgkJaWYgKGNhbi5iYXNlLmlzRnVuYyhsaW5lLnRleHQpKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZShjYW4pLCBsaW5lLnRleHQoZXZlbnQpIH0KCQlpZiAobGluZS5jdHggPT0gIndlYi53aWtpIiAmJiBsaW5lLmNtZCA9PSAid29yZCIpIHsgcmV0dXJuIH0KCQlpZiAoY2FuLnBhZ2UudGFnaXMoaHRtbC5BLCBldmVudC50YXJnZXQpKSB7IHJldHVybiB9CgoJCXZhciBjbWQgPSBsaW5lLmNtZCA9PSBjdHguQ09NTUFORD8gY2FuLmNvcmUuS2V5cyhsaW5lLnR5cGUsIGxpbmUubmFtZS5zcGxpdChpY2UuU1ApWzBdKTogY2FuLmNvcmUuS2V5cyhsaW5lLmN0eCwgbGluZS5jbWQpCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiAicGx1ZyIsIGluZGV4OiBjbWR8fG1zZy5PcHRpb24obWRiLklOREVYKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBtZXRhLmluZGV4LCBjbWRzLCBjYikgfQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpKQoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLTIqaHRtbC5BQ1RJT05fSEVJR0hULTExNykKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodCgpKQoJCQlzdWIuRm9jdXMoKQoJCX0sIGNhbi51aS5wcm9maWxlKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJc2VsZWN0OiBmdW5jdGlvbihjYW4pIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmRpc3BsYXksIGh0bWwuVFIsIGZ1bmN0aW9uKHRyKSB7CgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsgcmV0dXJuIHRkLmlubmVySFRNTCB9KQoJCX0pLnNsaWNlKDEpCgl9LAp9KQo=",
        "usr/volcanos/plugin/input.js": "Vm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpOyBzd2l0Y2ggKG1ldGEudHlwZSkgewoJCQljYXNlIGh0bWwuU0VMRUNUOiBtZXRhLnZhbHVlICYmICh0YXJnZXQudmFsdWUgPSBtZXRhLnZhbHVlKTsgYnJlYWsKCQkJY2FzZSBodG1sLkJVVFRPTjogbWV0YS5hY3Rpb24gPT0gaWNlLkFVVE8gJiYgdGFyZ2V0LmNsaWNrKCk7IGJyZWFrCgkJfQoJfSwKCXJ1bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIn0pKSB9LAoJbGlzdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLkNvbmYoIm1vZGUiKSAhPSAic2ltcGxlIiAmJiBjYW4ucnVuKGV2ZW50KSB9LAoJYmFjazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uaW1wb3J0Ll9iYWNrKGNhbi5zdXApIH0sCglyZWZyZXNoOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW4oZXZlbnQpIH0sCgoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLnJlcXVlc3QoZXZlbnQsIHtfdG9hc3Q6ICLmiafooYzkuK0uLi4ifSkKCQljYW4uQ29uZihtZGIuVFlQRSkgPT0gaHRtbC5CVVRUT04gJiYgY2FuLnJ1bihldmVudCwgW2N0eC5BQ1RJT04sIGNhbi5Db25mKG1kYi5OQU1FKV0uY29uY2F0KGNhbi5zdXAuSW5wdXQoKSkpCgl9LAoJb25jaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIn0pCgkJaWYgKGNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLlNFTEVDVCkgeyBjYW4ucnVuKGV2ZW50KSB9Cgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5pbnB1dChldmVudCwgY2FuLCBldmVudC50YXJnZXQpCgkJaWYgKGNhbi5Db25mKG1kYi5UWVBFKSA9PSBodG1sLlRFWFRBUkVBKSB7IGlmICghZXZlbnQuY3RybEtleSkgeyByZXR1cm4gfSB9CgkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7CgkJCWNhbi5ydW4oZXZlbnQpLCBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBldmVudC50YXJnZXQpCgkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCX0gaWYgKCFldmVudC5jdHJsS2V5KSB7IHJldHVybiB9CgoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgImIiOiBjYW4uQ2xvbmVJbnB1dCgpOyBicmVhawoJCQljYXNlICJtIjogY2FuLkNsb25lRmllbGQoKTsgYnJlYWsKCQkJZGVmYXVsdDogcmV0dXJuCgkJfSBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCn0pCg==",
        "usr/volcanos/plugin/input/date.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBkYXRlOiB7b25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgeyBjYihmdW5jdGlvbihjYW4sIGNicykgewoJZnVuY3Rpb24gc2V0KG5vdykgeyBjYnMoY2FuLCBjYW4udXNlci50aW1lKGNhbiwgbm93KSwgdGFyZ2V0LnZhbHVlKSB9CgoJLy8g5re75Yqg5o6n5Lu2Cgl2YXIgbm93ID0gdGFyZ2V0LnZhbHVlPyBuZXcgRGF0ZSh0YXJnZXQudmFsdWUpOiBuZXcgRGF0ZSgpCgljYW4uX3RyYW5zID0ga2l0LkRpY3QoInRvZGF5IiwgIuS7iuWkqSIsIG1kYi5ORVhULCAi5LiL5LiA5pyIIiwgbWRiLlBSRVYsICLkuIrkuIDmnIgiKQoJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9hY3Rpb24pLCBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtjbGkuQ0xPU0UsCgkJWyJob3VyIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QoMjQpKSwgWyJtaW51dGUiXS5jb25jYXQoY2FuLmNvcmUuTGlzdCgwLCA2MCwgNSkpLCBbInNlY29uZCJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDAsIDYwLCA1KSksCgkJInRvZGF5IiwgIiIsIG1kYi5QUkVWLCBbInllYXIiXS5jb25jYXQoY2FuLmNvcmUuTGlzdChub3cuZ2V0RnVsbFllYXIoKSAtIDEwLCBub3cuZ2V0RnVsbFllYXIoKSArIDEwKSksCgkJWyJtb250aCJdLmNvbmNhdChjYW4uY29yZS5MaXN0KDEsIDEzKSksIG1kYi5ORVhULAoJXSwgY2FuLl9hY3Rpb24sIHtjbG9zZTogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmNsb3NlKCkgfSwKCQkiaG91ciI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldEhvdXJzKHBhcnNlSW50KHZhbHVlKXx8MCksIHNob3cobm93KSB9LAoJCSJtaW51dGUiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRNaW51dGVzKHBhcnNlSW50KHZhbHVlKXx8MCksIHNob3cobm93KSB9LAoJCSJzZWNvbmQiOiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IG5vdy5zZXRTZWNvbmRzKHBhcnNlSW50KHZhbHVlKXx8MCksIHNob3cobm93KSB9LAoJCSJ0b2RheSI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdyA9IG5ldyBEYXRlKCksIHNldChzaG93KG5vdykpIH0sCgoJCSJwcmV2IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldE1vbnRoKG5vdy5nZXRNb250aCgpLTEpLCBzaG93KG5vdykgfSwKCQkieWVhciI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldEZ1bGxZZWFyKHBhcnNlSW50KHZhbHVlKSksIHNob3cobm93KSB9LAoJCSJtb250aCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgbm93LnNldE1vbnRoKHBhcnNlSW50KHZhbHVlKS0xKSwgc2hvdyhub3cpIH0sCgkJIm5leHQiOiBmdW5jdGlvbihldmVudCkgeyBub3cuc2V0TW9udGgobm93LmdldE1vbnRoKCkrMSksIHNob3cobm93KSB9LAoKCQki6ZqP5py6IjogZnVuY3Rpb24oZXZlbnQpIHsgbm93LnNldERhdGUoKE1hdGgucmFuZG9tKCkgKiAxMDAgLSA1MCkgKyBub3cuZ2V0RGF0ZSgpKSwgc2hvdyhub3cpIH0sCgkJIuWJjeS4gOW5tCI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKS0xKSwgc2hvdyhub3cpIH0sCgkJIuWQjuS4gOW5tCI6IGZ1bmN0aW9uKGV2ZW50KSB7IG5vdy5zZXRGdWxsWWVhcihub3cuZ2V0RnVsbFllYXIoKSsxKSwgc2hvdyhub3cpIH0sCgl9KQoKCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fc3RhdHVzKQoJY2FuLl90YWJsZSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4uX291dHB1dCwgW3t2aWV3OiBbY2hhdC5DT05URU5ULCBodG1sLlRBQkxFXX1dKS5maXJzdAoJdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsgZnVuY3Rpb24gc2hvdyhub3cpIHsKCQkvLyDorr7nva7mjqfku7YKCQljYW4uQWN0aW9uKCJ5ZWFyIiwgbm93LmdldEZ1bGxZZWFyKCkpCgkJY2FuLkFjdGlvbigibW9udGgiLCBub3cuZ2V0TW9udGgoKSsxKQoJCWNhbi5BY3Rpb24oImhvdXIiLCBub3cuZ2V0SG91cnMoKSkKCQljYW4uQWN0aW9uKCJtaW51dGUiLCBwYXJzZUludChub3cuZ2V0TWludXRlcygpLzUpKjUpCgkJY2FuLkFjdGlvbigic2Vjb25kIiwgcGFyc2VJbnQobm93LmdldFNlY29uZHMoKS81KSo1KQoKCQkvLyDorr7nva7nu4Tku7YKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLl90YWJsZSwgW3t0aDogWyLml6UiLCAi5LiAIiwgIuS6jCIsICLkuIkiLCAi5ZubIiwgIuS6lCIsICLlha0iXX1dKQoJCXZhciB0cjsgZnVuY3Rpb24gYWRkKGRheSwgdHlwZSkgeyBpZiAoZGF5LmdldERheSgpID09IDApIHsgdHIgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX3RhYmxlLCBbe3R5cGU6IGh0bWwuVFJ9XSkubGFzdCB9CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRyLCBbe3RleHQ6IFtkYXkuZ2V0RGF0ZSgpLCBodG1sLlRELCBjYW4uYmFzZS5UaW1lKHRvZGF5LCAiJXktJW0tJWQiKSA9PSBjYW4uYmFzZS5UaW1lKGRheSwgIiV5LSVtLSVkIik/IGh0bWwuU0VMRUNUOiB0eXBlXSwKCQkJCWRhdGFzZXQ6IHtkYXRlOiBkYXkuZ2V0VGltZSgpfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQlzZXQobm93ID0gbmV3IERhdGUocGFyc2VJbnQoZXZlbnQudGFyZ2V0LmRhdGFzZXQuZGF0ZSkpKQoJCQkJfSwKCQkJfV0pCgkJfQoKCQkvLyDml7bpl7TljLrpl7QKCQl2YXIgb25lID0gbmV3IERhdGUobm93KTsgb25lLnNldERhdGUoMSkKCQl2YXIgZW5kID0gbmV3IERhdGUobm93KTsgZW5kLnNldE1vbnRoKG5vdy5nZXRNb250aCgpKzEpLCBlbmQuc2V0RGF0ZSgxKQoJCXZhciBoZWFkID0gbmV3IERhdGUob25lKTsgaGVhZC5zZXREYXRlKG9uZS5nZXREYXRlKCktb25lLmdldERheSgpKQoJCXZhciB0YWlsID0gbmV3IERhdGUoZW5kKTsgdGFpbC5zZXREYXRlKGVuZC5nZXREYXRlKCkrNy1lbmQuZ2V0RGF5KCkpCgoJCS8vIOaXtumXtOW6j+WIlwoJCWZvciAodmFyIGRheSA9IG5ldyBEYXRlKGhlYWQpOyBkYXkgPCBvbmU7IGRheS5zZXREYXRlKGRheS5nZXREYXRlKCkrMSkpIHsgYWRkKGRheSwgbWRiLlBSRVYpIH0KCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShvbmUpOyBkYXkgPCBlbmQ7IGRheS5zZXREYXRlKGRheS5nZXREYXRlKCkrMSkpIHsgYWRkKGRheSwgbWRiLk1BSU4pIH0KCQlmb3IgKHZhciBkYXkgPSBuZXcgRGF0ZShlbmQpOyBlbmQuZ2V0RGF5KCkgIT0gMCAmJiBkYXkgPCB0YWlsOyBkYXkuc2V0RGF0ZShkYXkuZ2V0RGF0ZSgpKzEpKSB7IGFkZChkYXksIG1kYi5ORVhUKSB9CgoJCXJldHVybiBub3cKCX0gc2hvdyhub3cpLCBjYW4ub25sYXlvdXQuZmlndXJlKGV2ZW50LCBjYW4pCn0pfX0gfSkK",
        "usr/volcanos/plugin/input/key.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBrZXk6IHsKCV9pbml0OiBmdW5jdGlvbihldmVudCwgY2FuLCBjYnMsIHRhcmdldCwgbmFtZSwgdmFsdWUpIHsKCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuSU5QVVRTLCBbbmFtZSwgdmFsdWV8fHRhcmdldC52YWx1ZV0sIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25maWd1cmUua2V5Ll9zaG93KGNhbiwgbXNnLCBjYnMsIHRhcmdldCwgbmFtZSkKCQl9KQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZywgY2JzLCB0YXJnZXQsIG5hbWUpIHsKCQlpZiAoIWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX3RhcmdldCwgbXNnLkxlbmd0aCgpICE9IDApKSB7IHJldHVybiB9CgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBzdHlsZTogbXNnLmFwcGVuZCAmJiBtc2cuYXBwZW5kLmxlbmd0aCA9PSAxPyB7Im1pbi13aWR0aCI6IHRhcmdldC5vZmZzZXRXaWR0aC0xNn06IHt9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoY2FuLCB2YWx1ZSwgdGFyZ2V0LnZhbHVlKQoJCQkJbXNnLk9wdGlvbihpY2UuTVNHX1BST0NFU1MpID09IGljZS5QUk9DRVNTX0FHQUlOICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgewoJCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIGNhbiwgY2JzLCB0YXJnZXQsIG5hbWUsIHZhbHVlKQoJCQkJfSkKCQkJfX0KCQl9KSwgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBbbWRiLlRPVEFMLCBtZGIuSU5ERVhdKSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIG1zZy5MZW5ndGgoKSkKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX3RhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NYXgodG9wK2hlaWdodC1jYW4uX3RhcmdldC5vZmZzZXRUb3AsIDQwMCkpCgkJfSkKCX0sCglfbWFrZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCwgbGFzdCkgewoJCXZhciBzdWIgPSB0YXJnZXQuX2NhbjsgaWYgKHN1YiAmJiBzdWIuX2NicykgeyByZXR1cm4gfQoJCWNiKGZ1bmN0aW9uKHN1YiwgY2JzKSB7IHN1Yi5fY2JzID0gY2JzCgkJCWlmIChtZXRhLm1zZyAmJiBtZXRhLm1zZy5MZW5ndGgoKSA+IDApIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX3Nob3coc3ViLCBtZXRhLm1zZywgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1YiwgY2JzLCB0YXJnZXQsIG1ldGEubmFtZSkKCQkJfQoJCX0pCgl9LAoJb25jbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgbWV0YSwgY2IsIHRhcmdldCkgewoJCXRhcmdldC5fY2FuICYmIHRhcmdldC5fY2FuLmNsb3NlKCkKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgkJY2FuLm9ubW90aW9uLmZvY3VzKGNhbiwgdGFyZ2V0KQoJfSwKCW9uZm9jdXM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsKCQljYW4ub25maWd1cmUua2V5Ll9tYWtlKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpCgl9LAoJb25rZXlkb3duOiBmdW5jdGlvbihldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0LCBsYXN0KSB7CgkJc3dpdGNoIChldmVudC5rZXkpIHsKCQkJY2FzZSAiRXNjYXBlIjogdGFyZ2V0Ll9jYW4/IHRhcmdldC5fY2FuLmNsb3NlKCk6IHRhcmdldC5ibHVyKCk7IHJldHVybgoJCQljYXNlICJUYWIiOiB0YXJnZXQuX2NhbiAmJiB0YXJnZXQuX2Nhbi5jbG9zZSgpOyByZXR1cm4KCQkJY2FzZSAibiI6CgkJCWNhc2UgInAiOiBldmVudC5jdHJsS2V5ICYmIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KTsgYnJlYWsKCQkJZGVmYXVsdDogY2FuLmJhc2UuaXNGdW5jKGxhc3QpICYmIGxhc3QoZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uZmlndXJlLmtleS5fbWFrZShldmVudCwgY2FuLCBtZXRhLCBjYiwgdGFyZ2V0KQoJfSwKCW9ua2V5dXA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQsIGxhc3QpIHsgdmFyIHN1YiA9IHRhcmdldC5fY2FuOyBpZiAoIXN1YikgeyByZXR1cm4gfQoJCXN3aXRjaCAoZXZlbnQua2V5KSB7CgkJCWNhc2UgaWNlLlBTOiBjYW4ub25maWd1cmUua2V5Ll9pbml0KGV2ZW50LCBzdWIsIHN1Yi5fY2JzLCB0YXJnZXQsIG1ldGEubmFtZSwgZXZlbnQudGFyZ2V0LnZhbHVlKTsgYnJlYWsKCQl9CgkJY2FuLm9ubW90aW9uLnNlbGVjdElucHV0VGFibGUoZXZlbnQsIHN1YiwgZnVuY3Rpb24oKSB7IGNhbi5vbmZpZ3VyZS5rZXkuX2luaXQoZXZlbnQsIHN1Yiwgc3ViLl9jYnMsIHRhcmdldCwgbWV0YS5uYW1lKSB9LCB0YXJnZXQpCgl9LAp9fSkK",
        "usr/volcanos/plugin/input/province.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLmjqfku7bor6bmg4UiLCBwcm92aW5jZToge29uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1ldGEsIGNiLCB0YXJnZXQpIHsgY2IoZnVuY3Rpb24oY2FuLCBjYnMpIHsKCWNhbi5yZXF1aXJlKFsiL3JlcXVpcmUvc2h5bGludXguY29tL3gvZWNoYXJ0cy9lY2hhcnRzLmpzIiwgIi9yZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiXSwgZnVuY3Rpb24oKSB7CgkJdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3R5cGU6IGh0bWwuRElWLCBzdHlsZToge3dpZHRoOiA2MDAsIGhlaWdodDogNDAwfX1dKS5maXJzdCkKCQljaGluYV9jaGFydC5zZXRPcHRpb24oe2dlbzoge21hcDogJ2NoaW5hJ319KSwgY2hpbmFfY2hhcnQub24oaHRtbC5DTElDSywgZnVuY3Rpb24gKHBhcmFtcykgewoJCQl0YXJnZXQudmFsdWUgPSBwYXJhbXMubmFtZSwgY2FuLmNsb3NlKCkKCQl9KSwgY2FuLlN0YXR1cyhtZGIuVE9UQUwsIDM0KSwgY2FuLm9ubGF5b3V0LmZpZ3VyZShldmVudCwgY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNicykgJiYgY2JzKGNhbikKCX0pCn0pIH19LCB9KQo=",
        "usr/volcanos/plugin/local/chat/div.css": "ZmllbGRzZXQubGF5b3V0IGxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5sYXlvdXQgZmllbGRzZXQucGx1Z2luIHsgcGFkZGluZzowOyBtYXJnaW46MDsgfQoKZmllbGRzZXQuZGl2IGRpdi5vdXRwdXQgdGQgeyB2ZXJ0aWNhbC1hbGlnbjp0b3A7IH0KZmllbGRzZXQuZGl2IGRpdi5vdXRwdXQgZmllbGRzZXQuc3Bhbj5kaXYub3V0cHV0PmZpZWxkc2V0IHsgb3ZlcmZsb3c6YXV0bzsgZmxvYXQ6bGVmdDsgfQoKZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmxlZ2VuZCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+Zm9ybS5vcHRpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2PmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQucGFuZWwuY21kLm1haW4gZmllbGRzZXQuZGl2IGRpdi5wcm9qZWN0IHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LnBhbmVsLmNtZC5tYWluIGZpZWxkc2V0LmRpdiBkaXYucHJvZmlsZSB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5wYW5lbC5jbWQubWFpbiBmaWVsZHNldC5kaXY+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQoK",
        "usr/volcanos/plugin/local/chat/div.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgbWV0YSA9IHt9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgbWV0YVt2YWx1ZS5rZXldID0gdmFsdWUudmFsdWUgfSkKCQljYW4uX2xpc3QgPSBjYW4uYmFzZS5PYmoobWV0YS50ZXh0LCB7bWV0YToge25hbWU6IG1ldGEubmFtZXx8aHRtbC5ESVZ9LCBsaXN0OiBbXX0pCgkJY2FuLnN1cC5fa2V5cyA9IGNhbi5zdXAuX2tleXN8fGNhbi5fbGlzdC5tZXRhLm5hbWUKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiwgY2FuLl9vdXRwdXQpCgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwga2V5cywgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB7IHdpZHRoID0gd2lkdGh8fGl0ZW0ubWV0YS53aWR0aCwgaGVpZ2h0ID0gaGVpZ2h0fHxpdGVtLm1ldGEuaGVpZ2h0CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm1ldGEubmFtZXx8aHRtbC5ESVZdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCksIGNhbi5jdXJyZW50ID0gZXZlbnQudGFyZ2V0LCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBrZXlzLCBpdGVtLm1ldGEpCgkJfSwgX2FkZDogZnVuY3Rpb24oZGF0YSkgeyBpdGVtLmxpc3QucHVzaChkYXRhKSwgY2FuLm9uaW1wb3J0Ll9saXN0KGNhbiwga2V5cywgaXRlbSwgdWkubGlzdCwgd2lkdGgsIGhlaWdodCkgfX0sIHt2aWV3OiBodG1sLkxJU1R9XSkKCgkJdmFyIGZpZWxkID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgaXRlbS5tZXRhLmluZGV4PyBjaGF0LlBMVUdJTjogY2hhdC5MQVlPVVQsIGl0ZW0ubWV0YSwgdGFyZ2V0Ll90YXJnZXQpCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5saXN0Ll90YXJnZXQgPSBmaWVsZC5vdXRwdXQsIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fSkKCQlpdGVtLm1ldGEuc3R5bGUgJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHVpLmxpc3QuX3RhcmdldCwgaXRlbS5tZXRhLnN0eWxlKQoKCQlpdGVtLm1ldGEuaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIGNhbi5iYXNlLkNvcHkoe30sIGl0ZW0ubWV0YSksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCB7d2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodC0yKmh0bWwuQUNUSU9OX0hFSUdIVH0pCgkJfSwgdGFyZ2V0Ll90YXJnZXQsIGZpZWxkLmZpZWxkc2V0KQoKCQljYW4ub25pbXBvcnQuX2xpc3QoY2FuLCBrZXlzLCBpdGVtLCB1aS5saXN0LCB3aWR0aCwgaGVpZ2h0KQoJCWNhbi5zdXAuX2tleXMgPT0ga2V5cyAmJiB1aS5pdGVtLmNsaWNrKCkKCX0sCglfbGlzdDogZnVuY3Rpb24oY2FuLCBrZXlzLCBpdGVtLCB0YXJnZXQsIHdpZHRoLCBoZWlnaHQpIHsKCQlpZiAoaXRlbS5tZXRhLnN0eWxlID09IGh0bWwuU1BBTikgeyB3aWR0aCA9IHdpZHRoIC8gaXRlbS5saXN0Lmxlbmd0aCB9IGVsc2UgeyBoZWlnaHQgPSBoZWlnaHQgLyBpdGVtLmxpc3QubGVuZ3RoIH0KCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQuX3RhcmdldCkKCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uY29yZS5LZXlzKGtleXMsIGl0ZW0ubWV0YS5uYW1lKSwgaXRlbSwgdGFyZ2V0LCB3aWR0aCwgaGVpZ2h0KSB9KQoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIGtleXMsIG1ldGEpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KHt9KTsgbXNnLlB1c2gobWRiLktFWSwgImtleXMiKSwgbXNnLlB1c2gobWRiLlZBTFVFLCBrZXlzKQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQoIm5hbWUsaW5kZXgsYXJncyxzdHlsZSxkaXNwbGF5LGhlaWdodCx3aWR0aCIpLCBmdW5jdGlvbihrKSB7CgkJCW1zZy5QdXNoKG1kYi5LRVksIGspLCBtc2cuUHVzaChtZGIuVkFMVUUsIG1ldGFba10pCgkJfSksIGNhbi5zdXAuX2tleXMgPSBrZXlzCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCwgbGluZSwgYXJyYXkpIHsKCQkJcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJCQlrZXkgPT0gbWRiLlZBTFVFICYmIGNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LmlubmVyVGV4dCA9IG1ldGFbbGluZS5rZXldID0gdmFsdWUsIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQkJfSwge25hbWU6IGxpbmUua2V5fSkKCQkJfX0KCQl9LCBjYW4udWkucHJvZmlsZSkKCX0sCglsYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4sIHRhcmdldCksIGNhbi51aS5wcm9qZWN0Ll90YXJnZXQgPSBjYW4udWkuY29udGVudAoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0zMjAsIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLl9yb290Ll93aWR0aCwgaGVpZ2h0ID0gY2FuLl9yb290Ll9oZWlnaHQsIGNhbi51c2VyLnRpdGxlKGNhbi5fbGlzdC5tZXRhLm5hbWUpCgkJfSBlbHNlIGlmIChjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCXdpZHRoID0gY2FuLkNvbmZXaWR0aCgpLCBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgZmFsc2UpCgkJfSBlbHNlIHsKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9maWxlLCB0cnVlKQoJCX0KCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uX2xpc3QubWV0YS5uYW1lLCBjYW4uX2xpc3QsIGNhbi51aS5wcm9qZWN0LCB3aWR0aCwgaGVpZ2h0KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbbWRiLk5BTUUsIGN0eC5JTkRFWCwgY3R4LkFSR1MsIGN0eC5TVFlMRSwgaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEhdLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi5jdXJyZW50Ll9hZGQoe21ldGE6IGRhdGEsIGxpc3Q6IFtdfSkKCQl9KQoJfSwKCSLkv53lrZgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5NT0RJRlksIFttZGIuVEVYVCwgSlNPTi5zdHJpbmdpZnkoY2FuLl9saXN0KV0pCgl9LAp9KQo=",
        "usr/volcanos/plugin/local/chat/location.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGUoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJIWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4uQ29uZkhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQgLSA1Kmh0bWwuQUNUSU9OX0hFSUdIVCAtIDUqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5Db25mSGVpZ2h0KHdpbmRvdy5pbm5lckhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4uX2FjdGlvbikKCQljYW4udXNlci5pc01vYmlsZSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9vcHRpb24pCgkJY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fc3RhdHVzKQoKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLnByb2plY3QsIDI0MCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLnVpLnByb2plY3QsIGljZS5BVVRPKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4udWkucHJvZmlsZSwgaWNlLkFVVE8pCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLm9uZXhwb3J0Lmxpc3QpCgkJY2FuLnJlcXVpcmUoW2Nhbi5iYXNlLk1lcmdlVVJMKCJodHRwczovL21hcC5xcS5jb20vYXBpL2dsanMiLCAidiIsICIxLmV4cCIsICJsaWJyYXJpZXMiLCAic2VydmljZSIsICJrZXkiLCBjYW4uQ29uZihhYWEuVE9LRU4pKV0sIGZ1bmN0aW9uKCkgewoJCQl2YXIgcmVzID0ge3R5cGU6ICJ1bmtub3duIiwgbGF0aXR1ZGU6IDM5OTg0MTIsIGxvbmdpdHVkZTogMTE2MzA3NDh9LCBjdXJyZW50ID0gY2FuLmJhc2UuT2JqKG1zZy5PcHRpb24oY2hhdC5MT0NBVElPTikpCgkJCWlmIChjdXJyZW50LnN0YXR1cyA9PT0gMCkgeyByZXMgPSBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjdXJyZW50LnJlc3VsdC5sb2NhdGlvbiwgY3VycmVudC5yZXN1bHQuYWRfaW5mbyksIHJlcy50eXBlID0gImlwIiwgcmVzLm5hbWUgPSBjdXJyZW50LnJlc3VsdC5pcCwgY2FuLlN0YXR1cyhyZXMpIH0KCQkJY2FuLl9jdXJyZW50ID0gcmVzLCBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pLCBjYW4udXNlci5hZ2VudC5nZXRMb2NhdGlvbihmdW5jdGlvbihyZXMpIHsgcmVzLnR5cGUgPSAiY3VycmVudCIsIGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQgPSByZXMpIH0pCgkJfSkKCX0sCglfbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpLCBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSwgaHRtbC5XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSkKCgkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBbCgkJCXtuYW1lOiAiZGlyZWN0aW9uIn0sCgkJCXtuYW1lOiAiZmF2b3IiLCBfbWVudTogc2h5KHsicGxheSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCQkJY2FuLmNvcmUuTmV4dChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuZmF2b3IuX3RhcmdldCwgaHRtbC5ESVZfSVRFTSksIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJCQlpdGVtLmNsaWNrKCksIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIG5leHQsIDIwMDApCgkJCQl9LCBmdW5jdGlvbigpIHsgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbikgfSkKCQkJfX0pfSwKCQkJe25hbWU6ICJleHBsb3JlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaDAoY2FuLCBldmVudC50YXJnZXQudmFsdWUpIH0KCQkJfX0sCgkJCXtuYW1lOiAic2VhcmNoIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJem9uZS5fc2VhcmNoLm9ua2V5dXAgPSBmdW5jdGlvbihldmVudCkgeyBldmVudC5rZXkgPT0gIkVudGVyIiAmJiBjYW4ub25pbXBvcnQuX3NlYXJjaChjYW4sIGV2ZW50LnRhcmdldC52YWx1ZSkgfQoJCQl9fSwKCQkJe25hbWU6ICJkaXN0cmljdCIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsKCQkJCWNhbi5vbmltcG9ydC5fcHJvdmluY2UoY2FuLCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9jdXJyZW50KSwgY2FuLm9uaW1wb3J0Ll9tYXJrKGNhbikKCQljYW4ubWFyayAmJiBjYW4ubWFyay5hZGQoe3Bvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uX2N1cnJlbnQpLCBwcm9wZXJ0aWVzOiBjYW4uX2N1cnJlbnR9KQoJCWNhbi5fbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgaXRlbSkgfSkKCX0sCglfc2VhcmNoMDogZnVuY3Rpb24oY2FuLCBrZXl3b3JkKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCB7ImJvdW5kYXJ5IjogIm5lYXJieSgiK2Nhbi5iYXNlLmpvaW4oW3AubGF0LCBwLmxuZywgIjUwMCJdLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJfSkKCX0sCglfc2VhcmNoOiBmdW5jdGlvbihjYW4sIGtleXdvcmQpIHsgdmFyIHAgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHsiYm91bmRhcnkiOiAicmVnaW9uKCIrY2FuLmJhc2Uuam9pbihbY2FuLlN0YXR1cygiY2l0eSIpLCBwLmxhdCwgcC5sbmddLCBpY2UuRlMpKyIpIiwgInBhZ2VfaW5kZXgiOiAxLCAia2V5d29yZCI6IGtleXdvcmR9KSwgInNlYXJjaCIsIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJdmFyIHJlcyA9IGNhbi5iYXNlLk9iaihtc2cuUmVzdWx0KCkpOyBjYW4uY29yZS5MaXN0KHJlcy5kYXRhLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBpdGVtLmxvY2F0aW9uLCB7dHlwZTogaXRlbS5jYXRlZ29yeSwgbmFtZTogaXRlbS50aXRsZSwgdGV4dDogaXRlbS5hZGRyZXNzfSksIGNhbi51aS5zZWFyY2guX3RhcmdldCkKCQkJfSksIGNhbi5taXNjLkRlYnVnKHJlcykKCQl9KQoJfSwKCglfbGlzdF9yZXN1bHQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYikgeyB2YXIgcmVzID0gY2FuLmJhc2UuT2JqKG1zZy5SZXN1bHQoKSk7IGNhbi5taXNjLkRlYnVnKHJlcykKCQlyZXR1cm4gY2FuLmNvcmUuTGlzdChyZXMucmVzdWx0WzBdLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0ubmFtZSA9IGl0ZW0ubmFtZXx8aXRlbS5mdWxsbmFtZTsgcmV0dXJuIGNhbi5iYXNlLmlzRnVuYyhjYik/IGNiKGl0ZW0pOiBpdGVtIH0pCgl9LAoJX2Rpc3RyaWN0OiBmdW5jdGlvbihjYW4sIGlkLCBjYikgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIHtpZDogaWR9KSwgImRpc3RyaWN0IiwgW10sIGNiKQoJfSwKCV9wcm92aW5jZTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuX2Rpc3RyaWN0KGNhbiwgIiIsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnLCBmdW5jdGlvbihwcm92aW5jZSkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBwcm92aW5jZSwgZnVuY3Rpb24oZXZlbnQsIF8sIHNob3cpIHsgaWYgKHNob3cgPT09IGZhbHNlKSB7IHJldHVybiB9CgkJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIHByb3ZpbmNlLmxvY2F0aW9uLCB7dHlwZTogInByb3ZpbmNlIiwgbmFtZTogcHJvdmluY2UubmFtZSwgdGV4dDogcHJvdmluY2UuZnVsbG5hbWV9KSkKCQkJCQljYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDgpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lfSkKCgkJCQkJc2hvdyA9PT0gdHJ1ZSB8fCBjYW4ub25pbXBvcnQuX2NpdHkoY2FuLCBwcm92aW5jZSwgZXZlbnQudGFyZ2V0KQoJCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCQl9KQoJCX0pCgl9LAoJX2NpdHk6IGZ1bmN0aW9uKGNhbiwgcHJvdmluY2UsIHRhcmdldCkgewoJCWNhbi5vbmltcG9ydC5fZGlzdHJpY3QoY2FuLCBwcm92aW5jZS5pZCwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5pdGVtbGlzdChjYW4sIGNhbi5vbmltcG9ydC5fbGlzdF9yZXN1bHQoY2FuLCBtc2cpLCBmdW5jdGlvbihldmVudCwgY2l0eSwgc2hvdykgeyBpZiAoc2hvdyA9PT0gZmFsc2UpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjaXR5LmxvY2F0aW9uLCB7dHlwZTogImNpdHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNpdHkuZnVsbG5hbWV9KSkKCQkJCWNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIiwgMTIpKSwgY2FuLlN0YXR1cyh7bmF0aW9uOiAi5Lit5Zu9IiwgcHJvdmluY2U6IHByb3ZpbmNlLmZ1bGxuYW1lLCBjaXR5OiBjaXR5LmZ1bGxuYW1lfSkKCgkJCQlzaG93ID09PSB0cnVlIHx8IGNhbi5vbmltcG9ydC5fY291bnR5KGNhbiwgcHJvdmluY2UsIGNpdHksIGV2ZW50LnRhcmdldCkKCQkJfSwgZnVuY3Rpb24oKSB7fSwgdGFyZ2V0KQoJCX0pCgl9LAoJX2NvdW50eTogZnVuY3Rpb24oY2FuLCBwcm92aW5jZSwgY2l0eSwgdGFyZ2V0KSB7CgkJY2FuLm9uaW1wb3J0Ll9kaXN0cmljdChjYW4sIGNpdHkuaWQsIGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQuaXRlbWxpc3QoY2FuLCBjYW4ub25pbXBvcnQuX2xpc3RfcmVzdWx0KGNhbiwgbXNnKSwgZnVuY3Rpb24oZXZlbnQsIGNvdW50eSkgewoJCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGNvdW50eS5sb2NhdGlvbiwge3R5cGU6ICJjb3VudHkiLCBuYW1lOiBjaXR5Lm5hbWUsIHRleHQ6IGNvdW50eS5mdWxsbmFtZX0pKQoJCQkJY2FuLm1hcC5zZXRab29tKGNhbi5BY3Rpb24oInpvb20iLCAxNSkpLCBjYW4uU3RhdHVzKHtuYXRpb246ICLkuK3lm70iLCBwcm92aW5jZTogcHJvdmluY2UuZnVsbG5hbWUsIGNpdHk6IGNpdHkuZnVsbG5hbWV9KQoJCQl9LCBmdW5jdGlvbigpIHt9LCB0YXJnZXQpCgkJfSkKCX0sCgoJX3Nob3c6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5tYXAgPSBuZXcgVE1hcC5NYXAoY2FuLnVpLmNvbnRlbnQsIHtjZW50ZXI6IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pLCB6b29tOiBjYW4uQWN0aW9uKCJ6b29tIiksIHBpdGNoOiBjYW4uQWN0aW9uKCJwaXRjaCIpLCByb3RhdGlvbjogY2FuLkFjdGlvbigicm90YXRpb24iKSwgbWFwU3R5bGVJZDogInN0eWxlMiJ9KQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fdGFyZ2V0LCAiZGl2LmNvbnRlbnQ+ZGl2IiwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIHsiei1pbmRleCI6IDN9KSB9KQoJCWNhbi5jdXJyZW50ID0gewoJCQlsYWJlbDogbmV3IFRNYXAuTXVsdGlMYWJlbCh7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgY29udGVudDogaXRlbS5uYW1lfV19KSwKCQkJbWFya2VyOiBuZXcgVE1hcC5NdWx0aU1hcmtlcih7bWFwOiBjYW4ubWFwLCBnZW9tZXRyaWVzOiBbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKX1dfSksCgkJCWluZm86IGNhbi5vbmltcG9ydC5pbmZvKGNhbiwgaXRlbSksIGhvdmVyOiBjYW4ub25pbXBvcnQuaW5mbyhjYW4sIGl0ZW0pLAoJCQljaXJjbGU6IGNhbi5vbmltcG9ydC5jaXJjbGUoY2FuLCBpdGVtLCAxMDApLCBpdGVtOiBpdGVtLAoJCX0KCgkJY2FuLm1hcC5vbigicm90YXRlIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigicm90YXRpb24iLCBjYW4ubWFwLmdldFJvdGF0aW9uKCkpIH0pCgkJY2FuLm1hcC5vbigicGl0Y2giLCBmdW5jdGlvbihldmVudCkgeyBjYW4uQWN0aW9uKCJwaXRjaCIsIGNhbi5tYXAuZ2V0UGl0Y2goKSkgfSkKCQljYW4ubWFwLm9uKCJ6b29tIiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLkFjdGlvbigiem9vbSIsIGNhbi5tYXAuZ2V0Wm9vbSgpKSB9KQoJCWNhbi5tYXAub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIHBvaW50ID0gY2FuLm9uYWN0aW9uLl9wb2ludChldmVudCwgY2FuLCB7bmFtZTogZXZlbnQucG9pPyBldmVudC5wb2kubmFtZTogIiJ9KTsgY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIHBvaW50KQoJCQljYW4uQWN0aW9uKCJtb2RlIikgPT0gImluc2VydCIgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7dGFyZ2V0OiB7Z2V0Qm91bmRpbmdDbGllbnRSZWN0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHBvaW50IH19fSwgcG9pbnQpLCBtZGIuQ1JFQVRFLCBmdW5jdGlvbihtc2cpIHsKCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIHBvaW50KQoJCQl9KQoJCX0pCgl9LAoJX2l0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IGlmICghaXRlbS5sYXRpdHVkZSB8fCAhaXRlbS5sb25naXR1ZGUpIHsgcmV0dXJuIH0KCQljYW4ub25pbXBvcnQuaXRlbShjYW4sIGl0ZW0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uaW1wb3J0LnBsdWdpbihjYW4sIGl0ZW0pCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uZXhwb3J0LmhvdmVyKGNhbiwgaXRlbSksIGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJZGlyZWN0aW9uOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBpdGVtKSwgY2FuLm9uYWN0aW9uW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKSB9LAoJCQkJZmF2b3I6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtKSwgY2FuLm9uYWN0aW9uLmNyZWF0ZShldmVudCwgY2FuKSB9LAoJCQkJcGx1Z2luOiBmdW5jdGlvbihldmVudCwgYnV0dG9uKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKQoJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQkJCQljYW4uYmFzZS5Db3B5KGl0ZW0uZXh0cmEsIGRhdGEpLCBjYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKQoJCQkJCX0pCgkJCQl9LAoJCQl9KQoJCX0sIHRhcmdldHx8Y2FuLnVpLmZhdm9yLl90YXJnZXQpCgkJY2FuLm1hcmsgJiYgY2FuLm1hcmsuYWRkKHtwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIHByb3BlcnRpZXM6IGl0ZW19KQoJCWNhbi5jbHVzdGVyICYmIGNhbi5jbHVzdGVyLmFkZCh7cG9zaXRpb246IGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pfSkKCX0sCglfY2x1c3RlcjogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljYW4uY2x1c3RlciA9IG5ldyBUTWFwLk1hcmtlckNsdXN0ZXIoe21hcDogY2FuLm1hcCwgZ2VvbWV0cmllczogW119KQoJfSwKCV9tYXJrOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5tYXJrID0gbmV3IFRNYXAuTXVsdGlNYXJrZXIoe21hcDogY2FuLm1hcH0pCgkJY2FuLm1hcmsub24oImNsaWNrIiwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKCFldmVudC5nZW9tZXRyeSkgeyByZXR1cm4gfSB2YXIgaXRlbSA9IGV2ZW50Lmdlb21ldHJ5LnByb3BlcnRpZXMKCQkJY2FuLm9uaW1wb3J0LmNlbnRlcihjYW4sIGl0ZW0pCgkJfSkKCQljYW4ubWFyay5vbigiaG92ZXIiLCBmdW5jdGlvbihldmVudCkgeyBpZiAoIWV2ZW50Lmdlb21ldHJ5KSB7IHJldHVybiB9IHZhciBpdGVtID0gZXZlbnQuZ2VvbWV0cnkucHJvcGVydGllcwoJCQljYW4ub25leHBvcnQuaG92ZXIoY2FuLCBpdGVtKQoJCX0pCgl9LAoKCV9wb2x5bGluZTogZnVuY3Rpb24oY2FuLCBwYXRoKSB7CgkJcmV0dXJuIG5ldyBUTWFwLk11bHRpUG9seWxpbmUoewoJCQltYXA6IGNhbi5tYXAsCgkJCXN0eWxlczogewoJCQkJJ3N0eWxlX2JsdWUnOiBuZXcgVE1hcC5Qb2x5bGluZVN0eWxlKHsKCQkJCQknY29sb3InOiAnIzM3NzdGRicsIC8v57q/5aGr5YWF6ImyCgkJCQkJJ3dpZHRoJzogNiwgLy/mipjnur/lrr3luqYKCQkJCQknYm9yZGVyV2lkdGgnOiA1LCAvL+i+uee6v+WuveW6pgoJCQkJCSdib3JkZXJDb2xvcic6ICcjRkZGJywgLy/ovrnnur/popzoibIKCQkJCQknbGluZUNhcCc6ICdidXR0JyAvL+e6v+err+WktOaWueW8jwoJCQkJfSksCgkJCQknc3R5bGVfcmVkJzogbmV3IFRNYXAuUG9seWxpbmVTdHlsZSh7CgkJCQkJJ2NvbG9yJzogJyNDQzAwMDAnLCAvL+e6v+Whq+WFheiJsgoJCQkJCSd3aWR0aCc6IDYsIC8v5oqY57q/5a695bqmCgkJCQkJJ2JvcmRlcldpZHRoJzogNSwgLy/ovrnnur/lrr3luqYKCQkJCQknYm9yZGVyQ29sb3InOiAnI0NDQycsIC8v6L6557q/6aKc6ImyCgkJCQkJJ2xpbmVDYXAnOiAncm91bmQnIC8v57q/56uv5aS05pa55byPCgkJCQl9KQoJCQl9LAoJCQlnZW9tZXRyaWVzOiBbeydzdHlsZUlkJzogJ3N0eWxlX2JsdWUnLCAncGF0aHMnOiBwYXRofV0KCQl9KQoJfSwKCV9tb3ZlOiBmdW5jdGlvbihjYW4pIHsKCQljYW4ubWFyay5hZGQoe2lkOiAnY2FyJywgc3R5bGVJZDogJ2Nhci1kb3duJywgcG9zaXRpb246IG5ldyBUTWFwLkxhdExuZygzOS45ODQ4MTUwMDY0ODMzOCwgMTE2LjMwNTcxMTI2OTM3ODY2KX0pCgkJY2FuLm1hcmsubW92ZUFsb25nKHsiY2FyIjoge3BhdGg6IFsKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk4NDgxNTAwNjQ4MzM4LCAxMTYuMzA1NzExMjY5Mzc4NjYpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMjY2NTc1MjIyMTU1LCAxMTYuMzA1OTY4NzYxNDQ0MDkpLAoJCQluZXcgVE1hcC5MYXRMbmcoMzkuOTgyMzQ4Nzg0MTY1ODg2LCAxMTYuMzExMTQwMDYwNDI0OCksCgkJCW5ldyBUTWFwLkxhdExuZygzOS45Nzg4MTM3MTAyNjYwMjQsIDExNi4zMTExNDAwNjA0MjQ4KSwKCQkJbmV3IFRNYXAuTGF0TG5nKDM5Ljk3ODgxMzcxMDI2NjAyNCwgMTE2LjMxNjk5ODAwNDkxMzMzKQoJCV0sIHNwZWVkOiA3MH19LCB7YXV0b1JvdGF0aW9uOnRydWV9KQoJfSwKCglwb2ludDogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJcmV0dXJuIG5ldyBUTWFwLkxhdExuZyhpdGVtLmxhdGl0dWRlLzEwMDAwMC4wLCBpdGVtLmxvbmdpdHVkZS8xMDAwMDAuMCkKCX0sCgljZW50ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgeyB2YXIgcG9pbnQgPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKQoJCWNhbi5tYXAuc2V0Q2VudGVyKHBvaW50KSwgY2FuLlN0YXR1cygibmFtZSIsICIiKSwgY2FuLlN0YXR1cygidGV4dCIsICIiKSwgY2FuLlN0YXR1cyhpdGVtKSwgY2FuLlN0YXR1cyh7bGF0aXR1ZGU6IHBvaW50LmxhdCwgbG9uZ2l0dWRlOiBwb2ludC5sbmd9KQoJCWNhbi5jdXJyZW50LmluZm8uc2V0UG9zaXRpb24ocG9pbnQpLCBjYW4uY3VycmVudC5pbmZvLnNldENvbnRlbnQoKGl0ZW0ubmFtZXx8IiIpKyI8YnIvPiIrKGl0ZW0udGV4dHx8IiIpKQoJCWNhbi5jdXJyZW50LmxhYmVsLnVwZGF0ZUdlb21ldHJpZXMoW3tpZDogImN1cnJlbnQiLCBwb3NpdGlvbjogcG9pbnQsIGNvbnRlbnQ6IGl0ZW0ubmFtZX1dKQoJCWNhbi5jdXJyZW50Lm1hcmtlci51cGRhdGVHZW9tZXRyaWVzKFt7aWQ6ICJjdXJyZW50IiwgcG9zaXRpb246IHBvaW50fV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IHBvaW50LCByYWRpdXM6IDMwMH1dKQoJCWNhbi5jdXJyZW50Lml0ZW0gPSBpdGVtCgkJaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCkKCX0sCglpbmZvOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlyZXR1cm4gbmV3IFRNYXAuSW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLAoJCQlwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG9mZnNldDoge3g6IDAsIHk6IC0zMn0sCgkJCWNvbnRlbnQ6IChpdGVtLm5hbWV8fCIiKSsiPGJyLz4iKyhpdGVtLnRleHR8fCIiKSwKCQl9KQoJfSwKCWNpcmNsZTogZnVuY3Rpb24oY2FuLCBpdGVtLCByYWRpdXMpIHsKCQlyZXR1cm4gbmV3IFRNYXAuTXVsdGlDaXJjbGUoeyAKCQkJbWFwOiBjYW4ubWFwLCBzdHlsZXM6IHsKCQkJCWNpcmNsZTogbmV3IFRNYXAuQ2lyY2xlU3R5bGUoewoJCQkJCWNvbG9yOiAncmdiYSg0MSw5MSwyNTUsMC4xNiknLAoJCQkJCXNob3dCb3JkZXI6IHRydWUsCgkJCQkJYm9yZGVyQ29sb3I6ICdyZ2JhKDQxLDkxLDI1NSwxKScsCgkJCQkJYm9yZGVyV2lkdGg6IDIsCgkJCQl9KSwKCQkJfSwKCQkJZ2VvbWV0cmllczogW3tzdHlsZUlkOiAnY2lyY2xlJywgY2VudGVyOiBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBpdGVtKSwgcmFkaXVzOiByYWRpdXN8fDMwMH1dLAoJCX0pCgl9LAoJcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiBpdGVtLmhhc2ggfSwgY2FuLnVpLnByb2ZpbGUpKSB7CgoJCX0gZWxzZSB7IGl0ZW0uZXh0cmEgPSBjYW4uYmFzZS5PYmooaXRlbS5leHRyYSwge30pCgkJCWl0ZW0uZXh0cmEuaW5kZXggJiYgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCB7aW5kZXg6IGl0ZW0uZXh0cmEuaW5kZXgsIGFyZ3M6IGl0ZW0uZXh0cmEuYXJnc30sIGNhbi51aS5wcm9maWxlLCBmdW5jdGlvbihzdWIpIHsgaXRlbS5fcGx1Z2luID0gc3ViCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkqMy80KSkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCksIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKGNhbi5Db25mV2lkdGgoKSozLzQpKQoJCQl9KQoJCX0KCX0sCglfcGx1Z2luOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEpIHsKCQlmdW5jdGlvbiBteUluZm9XaW5kb3cob3B0aW9ucykgeyBUTWFwLkRPTU92ZXJsYXkuY2FsbCh0aGlzLCBvcHRpb25zKSB9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZSA9IG5ldyBUTWFwLkRPTU92ZXJsYXkoKQoJCW15SW5mb1dpbmRvdy5wcm90b3R5cGUub25Jbml0ID0gZnVuY3Rpb24ob3B0aW9ucykgeyB0aGlzLnBvc2l0aW9uID0gb3B0aW9ucy5wb3NpdGlvbiwgdGhpcy5tZXRhID0gb3B0aW9ucy5tZXRhIH0KCgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS5jcmVhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIG1ldGEgPSB0aGlzLm1ldGEsIHVpID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgY2hhdC5GTE9BVCwge30sIGNhbi5fb3V0cHV0KQoJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgbWV0YSwgZnVuY3Rpb24oc3ViKSB7CgkJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IGNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBpY2UuUlVOLCBbbWV0YS5pbmRleF0uY29uY2F0KGNtZHMpLCBjYikgfQoJCQkJc3ViLm9uYWN0aW9uLmNsb3NlID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHN1Yi5fdGFyZ2V0KSB9CgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkvMikpCgkJCQkvLyBjYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkvMikpCgkJCQlpdGVtLl9wbHVnaW4gPSBzdWIKCQkJfSwgY2FuLl9vdXRwdXQsIHVpLmZpZWxkc2V0KQoJCQlyZXR1cm4gdWkuZmllbGRzZXQKCQl9CgkJbXlJbmZvV2luZG93LnByb3RvdHlwZS51cGRhdGVET00gPSBmdW5jdGlvbigpIHsKCQkJdmFyIHBpeGVsID0gdGhpcy5tYXAucHJvamVjdFRvQ29udGFpbmVyKHRoaXMucG9zaXRpb24pOyBjYW4ucGFnZS5zdHlsZShjYW4sIHRoaXMuZG9tLCB7CgkJCQlsZWZ0OiBwaXhlbC5nZXRYKCksIHRvcDogcGl4ZWwuZ2V0WSgpKzIqaHRtbC5BQ1RJT05fSEVJR0hULAoJCQl9KQoJCX0KCQlyZXR1cm4gbmV3IG15SW5mb1dpbmRvdyh7bWFwOiBjYW4ubWFwLCBwb3NpdGlvbjogY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgaXRlbSksIG1ldGE6IG1ldGF9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbWyJtb2RlIiwgInNlbGVjdCIsICJpbnNlcnQiXSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJ6b29tIiwgdmFsdWU6IDE3LCByYW5nZTogWzMsIDIxXX0sCgl7dHlwZTogaHRtbC5URVhULCBuYW1lOiAicGl0Y2giLCB2YWx1ZTogMzAsIHJhbmdlOiBbMCwgODAsIDVdfSwKCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJyb3RhdGlvbiIsIHZhbHVlOiAiMCIsIHJhbmdlOiBbMCwgMzYwLCAxMF19LAoJImN1cnJlbnQiLCAiZXhwbG9yZSIsICJjcmVhdGUiLCAiZGlyZWN0aW9uIl0sCglfdHJhbnM6IHtjdXJyZW50OiAi5a6a5L2NIiwgZmF2b3I6ICLmlLbol48ifSwKCgl6b29tOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5tYXAuc2V0Wm9vbShjYW4uQWN0aW9uKCJ6b29tIikpIH0sCglwaXRjaDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFBpdGNoKGNhbi5BY3Rpb24oInBpdGNoIikpIH0sCglyb3RhdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIikpIH0sCgljdXJyZW50OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5jZW50ZXIoY2FuLCBjYW4uX2N1cnJlbnQpLCBjYW4ubWFwLnNldFpvb20oY2FuLkFjdGlvbigiem9vbSIsIDE3KSksIGNhbi5tYXAuc2V0UGl0Y2goY2FuLkFjdGlvbigicGl0Y2giLCAzMCkpLCBjYW4ubWFwLnNldFJvdGF0aW9uKGNhbi5BY3Rpb24oInJvdGF0aW9uIiwgMCkpIH0sCgoJZXhwbG9yZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLmN1cnJlbnQuaXRlbSk7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5leHBsb3JlLl90YXJnZXQpCgkJZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsKCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgeyJib3VuZGFyeSI6ICJuZWFyYnkoIitjYW4uYmFzZS5qb2luKFtwLmxhdCwgcC5sbmcsICI1MDAiXSwgaWNlLkZTKSsiKSIsICJwYWdlX2luZGV4IjogaX0pLCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsKCQkJCXZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKTsgY2FuLmNvcmUuTGlzdChyZXMuZGF0YSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC5faXRlbShjYW4sIGNhbi5vbmV4cG9ydC5wb2ludChjYW4sIGl0ZW0ubG9jYXRpb24sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLnRpdGxlLCB0ZXh0OiBpdGVtLmFkZHJlc3N9KSwgY2FuLnVpLmV4cGxvcmUuX3RhcmdldCkKCQkJCX0pLCBjYW4ubWlzYy5EZWJ1ZyhyZXMpCgkJCX0pCgkJfQoJfSwKCWRpcmVjdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciBwID0gY2FuLm1hcC5nZXRDZW50ZXIoKTsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpcmVjdGlvbi5fdGFyZ2V0KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtbInR5cGUiLCAiZHJpdmluZyIsICJ3YWxraW5nIiwgImJpY3ljbGluZyIsICJ0cmFuc2l0Il1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBmcm9tID0gY2FuLm9uaW1wb3J0LnBvaW50KGNhbiwgY2FuLl9jdXJyZW50KSwgdG8gPSBjYW4ub25pbXBvcnQucG9pbnQoY2FuLCBjYW4uY3VycmVudC5pdGVtKQoJCQl2YXIgbXNnID0gY2FuLnJlcXVlc3Qoe30sIHt0eXBlOiBsaXN0WzBdLCAiZnJvbSI6IGNhbi5iYXNlLmpvaW4oW2Zyb20ubGF0LCBmcm9tLmxuZ10sIGljZS5GUyksICJ0byI6IGNhbi5iYXNlLmpvaW4oW3RvLmxhdCwgdG8ubG5nXSwgaWNlLkZTKX0pCgkJCWNhbi5ydW5BY3Rpb24obXNnLl9ldmVudCwgYnV0dG9uLCBbXSwgZnVuY3Rpb24obXNnKSB7IHZhciByZXMgPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSwgcm91dGUgPSByZXMucmVzdWx0LnJvdXRlc1swXQoJCQkJCXZhciBjb29ycyA9IHJvdXRlLnBvbHlsaW5lLCBwbCA9IFtdLCBrciA9IDEwMDAwMDAKCQkJCQlmb3IgKHZhciBpID0gMjsgaSA8IGNvb3JzLmxlbmd0aDsgaSsrKSB7IGNvb3JzW2ldID0gTnVtYmVyKGNvb3JzW2kgLSAyXSkgKyBOdW1iZXIoY29vcnNbaV0pIC8ga3IgfQoJCQkJCWZvciAodmFyIGkgPSAwOyBpIDwgY29vcnMubGVuZ3RoOyBpICs9IDIpIHsgcGwucHVzaChuZXcgVE1hcC5MYXRMbmcoY29vcnNbaV0sIGNvb3JzW2krMV0pKSB9CgkJCQkJY2FuLm9uaW1wb3J0Ll9wb2x5bGluZShjYW4sIHBsKQoKCQkJCQljYW4uY29yZS5MaXN0KHJvdXRlLnN0ZXBzLCBmdW5jdGlvbihpdGVtKSB7IHZhciBpID0gaXRlbS5wb2x5bGluZV9pZHhbMF0KCQkJCQkJY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwgY2FuLm9uZXhwb3J0LnBvaW50KGNhbiwge2xhdDogY29vcnNbaV0sIGxuZzogY29vcnNbaSsxXX0sIHt0eXBlOiBpdGVtLmNhdGVnb3J5LCBuYW1lOiBpdGVtLmluc3RydWN0aW9uLCB0ZXh0OiBpdGVtLmFjdF9kZXNjfSksIGNhbi51aS5kaXJlY3Rpb24uX3RhcmdldCkKCQkJCQl9KSwgY2FuLnVzZXIudG9hc3RQcm9jZXNzKGNhbiwgImRpc3RhbmNlOiAiK3JvdXRlLmRpc3RhbmNlKyIgZHVyYXRpb246ICIrcm91dGUuZHVyYXRpb24pCgkJCX0pCgkJfSkKCX0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5jdXJyZW50Lml0ZW0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgY2FuLmNvcmUuU3BsaXQoInR5cGUsbmFtZSx0ZXh0IiksIGZ1bmN0aW9uKGFyZ3MpIHsgdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbikKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgYXJncy5jb25jYXQoImxhdGl0dWRlIiwgcC5sYXRpdHVkZSwgImxvbmdpdHVkZSIsIHAubG9uZ2l0dWRlKSwgZnVuY3Rpb24obXNnKSB7CgkJCQljYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCBjYW4uYmFzZS5Db3B5KHAsIHtuYW1lOiBtc2cuT3B0aW9uKG1kYi5OQU1FKSwgdGV4dDogbXNnLk9wdGlvbihtZGIuVEVYVCl9KSkKCQkJfSwgdHJ1ZSkKCQl9KQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbiwgaXRlbSkgeyB2YXIgcmVjdCA9IGNhbi51aS5jb250ZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpCgkJcmV0dXJuIGNhbi5iYXNlLkNvcHkoe2xlZnQ6IHJlY3QubGVmdCtldmVudC5wb2ludC54LCBib3R0b206IHJlY3QudG9wK2V2ZW50LnBvaW50LnksIGxhdGl0dWRlOiBwYXJzZUludChldmVudC5sYXRMbmcubGF0KjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQoZXZlbnQubGF0TG5nLmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogWyJuYXRpb24iLCAicHJvdmluY2UiLCAiY2l0eSIsICJsYXRpdHVkZSIsICJsb25naXR1ZGUiLCAgInR5cGUiLCAibmFtZSIsICJ0ZXh0Il0sCglwb2ludDogZnVuY3Rpb24oY2FuLCBwb2ludCwgaXRlbSkgeyByZXR1cm4gY2FuLmJhc2UuQ29weSh7bGF0aXR1ZGU6IHBhcnNlSW50KHBvaW50LmxhdCoxMDAwMDApLCBsb25naXR1ZGU6IHBhcnNlSW50KHBvaW50LmxuZyoxMDAwMDApfSwgaXRlbSwgdHJ1ZSkgfSwKCWNlbnRlcjogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4ub25leHBvcnQucG9pbnQoY2FuLCBjYW4ubWFwLmdldENlbnRlcigpKSB9LAoJY3VycmVudDogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIHAgPSBjYW4ub25leHBvcnQuY2VudGVyKGNhbik7IHAubGF0aXR1ZGUgLz0gMTAwMDAwLCBwLmxvbmdpdHVkZSAvPSAxMDAwMDA7IGNhbi5TdGF0dXMocCkKCQljYW4uY3VycmVudC5tYXJrZXIudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQubGFiZWwudXBkYXRlR2VvbWV0cmllcyhbe2lkOiAiY3VycmVudCIsIHBvc2l0aW9uOiBjYW4ubWFwLmdldENlbnRlcigpfV0pCgkJY2FuLmN1cnJlbnQuY2lyY2xlLnNldEdlb21ldHJpZXMoW3tjZW50ZXI6IGNhbi5tYXAuZ2V0Q2VudGVyKCksIHJhZGl1czogMzAwfV0pCgl9LAoJaG92ZXI6IGZ1bmN0aW9uKGNhbiwgaXRlbSkgewoJCWNhbi5jdXJyZW50LmhvdmVyLnNldFBvc2l0aW9uKGNhbi5vbmltcG9ydC5wb2ludChjYW4sIGl0ZW0pKQoJCWNhbi5jdXJyZW50LmhvdmVyLnNldENvbnRlbnQoaXRlbS5uYW1lKyI8YnIvPiIraXRlbS50ZXh0KQoJfSwKfSkK",
        "usr/volcanos/plugin/local/chat/media.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCAgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7CgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LmRpc3BsYXkoY2FuLCB0YXJnZXQpCgkJY2FuLnVpLmNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3R5cGU6ICJjYW52YXMiLCB3aWR0aDogMzIwLCBoZWlnaHQ6IDI0MCwgc3R5bGU6IHtkaXNwbGF5OiAibm9uZSJ9fV0pLmZpcnN0CgoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgsIGxpbmUsIGFycmF5KSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCAidGQiXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5zdXAub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBjYW4uc3VwLCBrZXksIHZhbHVlLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucnVuKGV2ZW50KQoJCQkJfSkKCQkJfX0KCQl9LCBjYW4udWkuY29udGVudCkKCgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLlJlc3VsdCgpLCBjYW4udWkuZGlzcGxheSkKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgdGFyZ2V0KSB7Cgl9LAoKCW9wZW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQluYXZpZ2F0b3IuZ2V0VXNlck1lZGlhKHt2aWRlbzoge3dpZHRoOiAzMjAsIGhlaWdodDogMjQwfX0sIGZ1bmN0aW9uKHN0cmVhbSkgewoJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgInZpZGVvIikKCQkJdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtLCB2aWRlby5wbGF5KCkKCQkJY2FuLnVpLnZpZGVvID0gdmlkZW8KCQl9LCBmdW5jdGlvbihlcnJvcikgewoJCQljYW4ubWlzYy5Mb2coIm9wZW4gY2FtZXJhIiwgZXJyb3IpCgkJfSkKCX0sCglzbmFwc2hvdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51aS5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UoY2FuLnVpLnZpZGVvLCAwLCAwKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5kaXNwbGF5LCBbe3R5cGU6ICJpbWciLCBzcmM6IGNhbi51aS5jYW52YXMudG9EYXRhVVJMKCdpbWFnZS93ZWJwJyl9XSkKCX0sCn0pCg==",
        "usr/volcanos/plugin/local/chat/trans.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWNhbi5mcm9tID0gY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuRElSLCBodG1sLkxFRlQsICJmcm9tIiwgInRvIikKCQljYW4udG8gPSBjYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5ESVIsIGh0bWwuUklHSFQsICJ0byIsICJmcm9tIikKCQljYW4ub25pbXBvcnQuX3BsdWdpbihjYW4sIG5mcy5UUkFTSCwgaHRtbC5MRUZULCAiZnJvbSIpCgkJY2FuLm9uaW1wb3J0Ll9wbHVnaW4oY2FuLCBuZnMuVFJBU0gsIGh0bWwuUklHSFQsICJ0byIpCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgcG9zLCBmcm9tLCB0bykgewoJCXJldHVybiBjYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6IGNoYXQuU1RPUlksIGluZGV4OiBpbmRleH0sIGZ1bmN0aW9uKHN1YikgewoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fdGFyZ2V0LCB7ZmxvYXQ6IHBvcywgY2xlYXI6IHBvc30pCgkJCXN1Yi5Db25mV2lkdGgoY2FuLkNvbmZXaWR0aCgpLzIpCgkJCXN1Yi5fbGVnZW5kLmlubmVySFRNTCA9IGNhbi5PcHRpb24oZnJvbSkraWNlLlNQK2luZGV4CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsICJtYXgtd2lkdGgiLCBjYW4uQ29uZldpZHRoKCkvMikKCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsKCQkJCWlmIChjYW4ub25hY3Rpb25bY21kc1sxXV0pIHsgcmV0dXJuIGNhbi5vbmFjdGlvbltjbWRzWzFdXShjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIH0KCgkJCQl2YXIgbXNnID0gc3ViLnJlcXVlc3QoZXZlbnQsIHtfcG9kOiBjYW4uT3B0aW9uKGZyb20pfSkKCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBpbmRleCwgY21kcywgY2IpCgkJCX0KCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCglzZW5kOiBmdW5jdGlvbihjYW4sIGZyb20sIHRvLCBldmVudCwgY21kcywgY2IpIHsgdmFyIF9mcm9tID0gY2FuW2Zyb21dLCBfdG8gPSBjYW5bdG9dCgkJdmFyIHBhdGggPSBjYW4ucmVxdWVzdChldmVudCkuT3B0aW9uKG5mcy5QQVRIKQoJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwge19oYW5kbGU6IGljZS5UUlVFLAoJCQlmcm9tOiBjYW4uT3B0aW9uKGZyb20pLCBmcm9tX3BhdGg6IHBhdGgsCgkJCXRvOiBjYW4uT3B0aW9uKHRvKSwgdG9fcGF0aDogX3RvLk9wdGlvbihuZnMuUEFUSCkrcGF0aC5zcGxpdChpY2UuUFMpLnBvcCgpLAoJCX0pCgkJY2FuLnJ1bihldmVudCwgY21kcywgZnVuY3Rpb24oKSB7IF90by5VcGRhdGUoKSB9LCB0cnVlKQoJfSwKfSkK",
        "usr/volcanos/plugin/local/chat/wx.js": "Vm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge3NvdXJjZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCWNhbi5yZXF1aXJlKFsiaHR0cHM6Ly9yZXMud3gucXEuY29tL29wZW4vanMvandlaXhpbi0xLjYuMC5qcyJdLCBmdW5jdGlvbihjYW4pIHsKCQl3eC5jb25maWcoe2RlYnVnOiBtc2cuT3B0aW9uKCJkZWJ1ZyIpID09IGljZS5UUlVFLAoJCQlhcHBJZDogbXNnLk9wdGlvbigiYXBwaWQiKSwgc2lnbmF0dXJlOiBtc2cuT3B0aW9uKCJzaWduYXR1cmUiKSwKCQkJbm9uY2VTdHI6IG1zZy5PcHRpb24oIm5vbmNlc3RyIiksIHRpbWVzdGFtcDogbXNnLk9wdGlvbigidGltZXN0YW1wIiksCgoJCQlqc0FwaUxpc3Q6IGNhbi5jb3JlLkl0ZW0oewoJCQkJc2NhblFSQ29kZTogZnVuY3Rpb24oY2IpIHsgd3guc2NhblFSQ29kZSh7bmVlZFJlc3VsdDogY2I/IDE6IDAsIHNjYW5UeXBlOiBbInFyQ29kZSIsImJhckNvZGUiXSwgc3VjY2VzczogZnVuY3Rpb24gKHJlcykgewoJCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IocmVzLnJlc3VsdFN0ciwgY2FuLmJhc2UuUGFyc2VKU09OKHJlcy5yZXN1bHRTdHIpKQoJCQkJfSB9KSB9LAoJCQkJZ2V0TG9jYXRpb246IGZ1bmN0aW9uKGNiKSB7IHd4LmdldExvY2F0aW9uKHt0eXBlOiAiZ2NqMDIiLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYih7dHlwZTogImdjajAyIiwgbmFtZTogIuW9k+WJjeS9jee9riIsIHRleHQ6ICLlvZPliY3kvY3nva4iLCBsYXRpdHVkZTogcGFyc2VJbnQocmVzLmxhdGl0dWRlKjEwMDAwMCksIGxvbmdpdHVkZTogcGFyc2VJbnQocmVzLmxvbmdpdHVkZSoxMDAwMDApIH0pCgkJCQl9IH0pIH0sCgkJCQlvcGVuTG9jYXRpb246IGZ1bmN0aW9uKG1zZykgeyB3eC5vcGVuTG9jYXRpb24oewoJCQkJCWxhdGl0dWRlOiBwYXJzZUludChtc2cuT3B0aW9uKCJsYXRpdHVkZSIpKS8xMDAwMDAsCgkJCQkJbG9uZ2l0dWRlOiBwYXJzZUludChtc2cuT3B0aW9uKCJsb25naXR1ZGUiKSkvMTAwMDAwLAoJCQkJCW5hbWU6IG1zZy5PcHRpb24obWRiLk5BTUUpLCBhZGRyZXNzOiBtc2cuT3B0aW9uKG1kYi5URVhUKSwKCQkJCQlzY2FsZTogbXNnLk9wdGlvbigic2NhbGUiKXx8MTQsIGluZm9Vcmw6IG1zZy5PcHRpb24obWRiLkxJTkspLAoJCQkJfSkgfSwKCQkJCWNob29zZUltYWdlOiBmdW5jdGlvbihjYiwgY291bnQpIHsgd3guY2hvb3NlSW1hZ2Uoe2NvdW50OiBjb3VudHx8OSwgc2l6ZVR5cGU6IFsnb3JpZ2luYWwnLCAnY29tcHJlc3NlZCddLCBzb3VyY2VUeXBlOiBbJ2FsYnVtJywgJ2NhbWVyYSddLCBzdWNjZXNzOiBmdW5jdGlvbiAocmVzKSB7CgkJCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihyZXMubG9jYWxJZHMpCgkJCQl9IH0pIH0sCgkJCX0sIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgcmV0dXJuIGNhbi51c2VyLmFnZW50W2tleV0gPSB2YWx1ZSwga2V5IH0pLAoJCX0pCgkJd3guZXJyb3IoZnVuY3Rpb24oZXJyKSB7IGNhbi51c2VyLnRvYXN0KGVyciwgInd4IGxvYWQiKSB9KQoJCXd4LnJlYWR5KGZ1bmN0aW9uKCkgeyBjYW4ubWlzYy5Mb2coInJlYWR5IikgfSkKCX0pCn19KQo=",
        "usr/volcanos/plugin/local/code/inner.css": "ZmllbGRzZXQuaW5uZXI+Zm9ybS5vcHRpb24gaW5wdXRbbmFtZT1wYXRoXSB7IHdpZHRoOjgwcHg7IH0KZmllbGRzZXQuaW5uZXI+Zm9ybS5vcHRpb24gaW5wdXRbbmFtZT1maWxlXSB7IHdpZHRoOjE2MHB4OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5hY3Rpb24+ZGl2LnRhYnMgeyBwYWRkaW5nOjVweDsgbWFyZ2luOjAgMXB4OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5hY3Rpb24+ZGl2LnRhYnM6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOnN0ZWVsYmx1ZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYuYWN0aW9uPmRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyB9CgpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQgeyBwb3NpdGlvbjpyZWxhdGl2ZTsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6d2hpdGU7IGZvbnQtc2l6ZToxNnB4OyBmb250LWZhbWlseTptb25vc3BhY2U7IHBvc2l0aW9uOnJlbGF0aXZlOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQubGluZSB7IHBvc2l0aW9uOnN0aWNreTsgbGVmdDowOyB0ZXh0LWFsaWduOnJpZ2h0OyBwYWRkaW5nOjAgNnB4OyBib3JkZXItcmlnaHQ6c29saWQgMnB4IHJlZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgeyBiYWNrZ3JvdW5kLWNvbG9yOiM0NjgyYjQ2YjsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB0ZC5saW5lIHsgYmFja2dyb3VuZC1jb2xvcjojNjQ5NWVkNjM7IGJvcmRlcjpzb2xpZCAxcHggcmVkOyBib3JkZXItcmlnaHQ6c29saWQgMnB4IHJlZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgeyB3aGl0ZS1zcGFjZTpwcmU7IHBhZGRpbmctbGVmdDoxMHB4OyBjdXJzb3I6dGV4dDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5jb21tZW50IHsgYmFja2dyb3VuZC1jb2xvcjpibHVlOyBjb2xvcjpjeWFuOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLmtleXdvcmQgeyBjb2xvcjp5ZWxsb3c7IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uZGF0YXR5cGUgeyBjb2xvcjpncmVlbjsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5mdW5jdGlvbiB7IGNvbG9yOmN5YW47IGZvbnQtd2VpZ2h0OmJvbGQ7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4uY29uc3RhbnQgeyBjb2xvcjptYWdlbnRhOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLnN0cmluZyB7IGNvbG9yOm1hZ2VudGE7IH0KZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50IGlmcmFtZSB7IGJvcmRlcjowOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQucHJvZmlsZSBpZnJhbWUgeyBib3JkZXI6MDsgfQoKZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYucGF0aCB7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC5pbm5lciBkaXYub3V0cHV0IGZpZWxkc2V0LnRvb2xraXQgeyBwb3NpdGlvbjphYnNvbHV0ZTsgYm90dG9tOjBweDsgcmlnaHQ6MHB4OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZmllbGRzZXQudG9vbGtpdD5kaXYub3V0cHV0PmZpZWxkc2V0IHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZmllbGRzZXQudG9vbGtpdD5kaXYub3V0cHV0PmZpZWxkc2V0LnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IzBlMzM2OWIzOyBjb2xvcjp3aGl0ZTsgZGlzcGxheTpibG9jazsgei1pbmRleDoxMDsgfQpmaWVsZHNldC5pbm5lcj5kaXYuc3RhdHVzIGxlZ2VuZCB7IGZsb2F0OnJpZ2h0OyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgbGVnZW5kLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IH0KZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQ6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOmdyZWVuOyB9CmZpZWxkc2V0LmlubmVyPmRpdi5zdGF0dXMgeyBoZWlnaHQ6MzFweDsgb3ZlcmZsb3c6YXV0bzsgfQoKYm9keS53aGl0ZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZSBmaWVsZHNldC5pbm5lci5mbG9hdD5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6d2hpdGU7IH0KYm9keS5ibGFjayBmaWVsZHNldC5pbm5lci5mbG9hdD5kaXYub3V0cHV0IGRpdi5jb250ZW50IHsgY29sb3I6d2hpdGU7IH0KCmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgcGFkZGluZzowcHg7IGhlaWdodDozMXB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6Z3JheTsgZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBwYWRkaW5nOjdweCAyMHB4OyBoZWlnaHQ6MTdweDsgZmxvYXQ6bGVmdDsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMuc2VsZWN0IHsgYmFja2dyb3VuZC1jb2xvcjojMWQzMzQ5OyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyBkaXYudGFiczpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IzFkMzM0OTsgfQpib2R5LnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnBhdGggeyBiYWNrZ3JvdW5kLWNvbG9yOiMxZDMzNDk7IHBhZGRpbmc6NHB4IDEwcHg7IG1hcmdpbi1ib3R0b206NHB4OyBkaXNwbGF5OmJsb2NrOyBjbGVhcjpib3RoOyB9CmJvZHkuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQubGluZSB7IHBhZGRpbmctdG9wOjRweDsgYm9yZGVyLXJpZ2h0Om5vbmU7IH0KYm9keS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHsgcGFkZGluZy10b3A6MnB4OyBib3JkZXI6c29saWQgMXB4IHRyYW5zcGFyZW50OyB9Cgpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5wcm9qZWN0IHsgYmFja2dyb3VuZC1jb2xvcjp3aGl0ZXNtb2tlOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LnByb2plY3QudG9nZ2xlIHsgYmFja2dyb3VuZC1jb2xvcjojNDY4MmI0NmI7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYucHJvamVjdCBkaXYuaXRlbSB7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYudGFicyB7IGJhY2tncm91bmQtY29sb3I6d2hpdGVzbW9rZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IHRkLmNvbnRlbnQ+ZGl2LnRhYnMgZGl2LnRhYnMgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCB0ZC5jb250ZW50PmRpdi50YWJzIGRpdi50YWJzLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6IHdoaXRlOyBib3gtc2hhZG93OjBweCAwcHggNXB4IDFweCBncmV5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgdGQuY29udGVudD5kaXYucGF0aCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IGNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgeyBiYWNrZ3JvdW5kLWNvbG9yOndoaXRlOyBjb2xvcjpibGFjazsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRyLnNlbGVjdCB7IGJhY2tncm91bmQtY29sb3I6d2hpdGU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgdGQubGluZSB7IGJhY2tncm91bmQtY29sb3I6c3RlZWxibHVlOyBjb2xvcjp3aGl0ZTsgYm9yZGVyOm5vbmU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ci5zZWxlY3QgdGQudGV4dCB7IGJvcmRlcjpzb2xpZCAxcHggbGlnaHRncmF5OyB9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LmlubmVyPmRpdi5vdXRwdXQgZGl2LmNvbnRlbnQgdGQudGV4dCBzcGFuLnN0cmluZyB7IGNvbG9yOnJveWFsYmx1ZTsgfQpib2R5LndoaXRlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi5jb250ZW50IHRkLnRleHQgc3Bhbi5mdW5jdGlvbiB7IGNvbG9yOmRhcmtyZWQ7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYuY29udGVudCB0ZC50ZXh0IHNwYW4ua2V5d29yZCB7IGNvbG9yOmJsdWU7IH0KYm9keS53aGl0ZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2LnN0YXR1cyBsZWdlbmQgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Z3JheTsgY29sb3I6YmxhY2s7IHBhZGRpbmc6MHB4IDEwcHg7IGJvcmRlci1sZWZ0OnNvbGlkIDJweCByZWQ7IGhlaWdodDozMHB4OyBmbG9hdDpyaWdodDsgYm9yZGVyLXJhZGl1czowOyBib3gtc2hhZG93Om5vbmU7IH0KCmJvZHkubW9iaWxlIGZpZWxkc2V0LmlubmVyPmZvcm0ub3B0aW9uIGlucHV0W25hbWU9ZmlsZV0geyB3aWR0aDo5MHB4OyB9CmJvZHkubW9iaWxlIGZpZWxkc2V0LnBsdWdpbi5pbm5lciBkaXYuYWN0aW9uIHsgZGlzcGxheTpub25lOyB9CmJvZHkubW9iaWxlLmxhbmRzY2FwZSBmaWVsZHNldC5wbHVnaW4uaW5uZXIgZGl2LmFjdGlvbiB7IGRpc3BsYXk6Y29udGVudHM7IH0KCmJvZHkubW9iaWxlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5OmJsb2NrOyB9CmJvZHkubW9iaWxlLnNpbXBsZSBmaWVsZHNldC5pbm5lcj5kaXYub3V0cHV0IGRpdi50b2dnbGUgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZTsgd2lkdGg6MzBweDsgfQpib2R5Lm1vYmlsZS5zaW1wbGUgZmllbGRzZXQuaW5uZXI+ZGl2Lm91dHB1dCBkaXYudG9nZ2xlLmRpc3BsYXkgeyBiYWNrZ3JvdW5kLWNvbG9yOmxpZ2h0Ymx1ZTsgbWFyZ2luLXRvcDotMzNweDsgaGVpZ2h0OjMwcHg7IHdpZHRoOjEwMHB4OyB9CgoudW5zZWxlY3RhYmxlIHsKCS13ZWJraXQtdG91Y2gtY2FsbG91dDpub25lOwoJLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOwoJLWtodG1sLXVzZXItc2VsZWN0Om5vbmU7CgktbW96LXVzZXItc2VsZWN0Om5vbmU7CgktbXMtdXNlci1zZWxlY3Q6bm9uZTsKCS1vLXVzZXItc2VsZWN0Om5vbmU7Cgl1c2VyLXNlbGVjdDpub25lOwp9CmJvZHkud2hpdGUuc2ltcGxlIGZpZWxkc2V0LnBsdWdpbiBkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5ub25jZSB7IGNvbG9yOmxpZ2h0Z3JheTsgfQo=",
        "usr/volcanos/plugin/local/code/inner.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQl2YXIgcGF0aHMgPSBjYW4uY29yZS5TcGxpdChjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaWNlLkZTKTsgY2FuLk9wdGlvbihuZnMuUEFUSCwgcGF0aHNbMF0pCgkJdmFyIGZpbGVzID0gY2FuLmNvcmUuU3BsaXQoY2FuLk9wdGlvbihuZnMuRklMRSksIGljZS5GUyk7IGNhbi5PcHRpb24obmZzLkZJTEUsIGZpbGVzWzBdKQoJCWNhbi50YWJ2aWV3ID0gY2FuLnRhYnZpZXd8fHt9LCBjYW4uaGlzdG9yeSA9IGNhbi5oaXN0b3J5fHxbXSwgY2FuLnRvb2xraXQgPSB7fSwgY2FuLmV4dGVudGlvbnMgPSB7fQoJCWNhbi5wcm9maWxlX3NpemUgPSB7fSwgY2FuLmRpc3BsYXlfc2l6ZSA9IHt9CgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pCgkJY2FuLnBhZ2Uuc3R5bGVXaWR0aChjYW4sIGNhbi51aS5wcm9qZWN0LCAyNDApCgkJY2FuLm9uaW1wb3J0Ll9wcm9qZWN0KGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgY2FuLnVpLnByb2ZpbGUpCgkJY2FuLm9uaW1wb3J0Ll9kaXNwbGF5KGNhbiwgY2FuLnVpLmRpc3BsYXkpCgkJY2FuLm9uaW1wb3J0Ll9pbnB1dChjYW4pCgoJCWNhbi51aS5fY29udGVudCA9IGNhbi51aS5jb250ZW50CgkJY2FuLnVpLl9wcm9maWxlX291dHB1dCA9IGNhbi51aS5wcm9maWxlX291dHB1dAoJCWNhbi5pc0NtZE1vZGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9zdGF0dXMpCgkJY2FuLm9uZW5naW5lLnBsdWdpbihjYW4sIGNhbi5vbnBsdWdpbikKCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCgkJc3dpdGNoIChjYW4uTW9kZSgpKSB7CgkJCWNhc2UgInNpbXBsZSI6IGNhbi5vbmltcG9ydC5fc2ltcGxlKGNhbik7IGJyZWFrCgkJCWNhc2UgImZsb2F0IjogYnJlYWsKCQkJY2FzZSAiY21kIjogY2FuLm9uaW1wb3J0Ll90YWJzKGNhbikgLy8gbm8gYnJlYWsKCQkJY2FzZSAiZnVsbCI6IC8vIG5vIGJyZWFrCgkJCWRlZmF1bHQ6IGlmIChjYW4uQ29uZkhlaWdodCgpIDwgMzIwKSB7IGNhbi5Db25mSGVpZ2h0KDMyMCkgfQoJCQkJY2FuLm9uaW1wb3J0LnByb2plY3QoY2FuLCBwYXRocyksIGNhbi51c2VyLmlzTW9iaWxlICYmICFjYW4udXNlci5pc0xhbmRzY2FwZSgpICYmIGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBjYW4udWkucHJvamVjdCkKCQkJCWNhbi5vbmltcG9ydC5fdG9vbGtpdChjYW4sIGNhbi51aS50b29sa2l0KSwgY2FuLm9uaW1wb3J0Ll9zZXNzaW9uKGNhbiwgbXNnLCBmdW5jdGlvbigpIHsKCQkJCQlmaWxlcy5sZW5ndGggPiAxICYmIGNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5OZXh0KGZpbGVzLnNsaWNlKDEpLCBmdW5jdGlvbihmaWxlLCBuZXh0KSB7CgkJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGZpbGUsIGNhbi5PcHRpb24obmZzLkxJTkUpLCBuZXh0KQoJCQkJCX0sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIHBhdGhzWzBdLCBmaWxlc1swXSwgIiIpIH0pIH0pCgkJCQl9KSwgY2FuLm9uaW1wb3J0Ll9rZXlkb3duKGNhbikKCQl9CgoJCXZhciBoYXNoID0gbG9jYXRpb24uaGFzaDsgY2FuLmlzQ21kTW9kZSgpIHx8IChjYW4udGFidmlld1tjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IG1zZykKCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuTElORSksIGZ1bmN0aW9uKCkgewoJCQlpZiAoY2FuLmlzQ21kTW9kZSgpICYmIGhhc2gpIHsgdmFyIGFyZ3MgPSBjYW4uY29yZS5TcGxpdChkZWNvZGVVUklDb21wb25lbnQoaGFzaCkuc2xpY2UoMSkpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgYXJnc1swXSwgYXJnc1sxXSkgfSkKCQkJfQoJCX0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4pIHsKCX0sCglfcHJvamVjdDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9Cgl9LAoJX3Byb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0KSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVUXSk7IGNhbi51aS5wcm9maWxlX291dHB1dCA9IHVpLm91dHB1dAoJCXZhciBhY3Rpb24gPSBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIFtdLCB1aS5hY3Rpb24sIGtpdC5EaWN0KAoJCQljbGkuQ0xPU0UsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCB0YXJnZXQpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKCQkJY2xpLkNMRUFSLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB1aS5vdXRwdXQpIH0sCgkJCWNsaS5TSE9XLCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKGV2ZW50LCBjYW4pIH0sCgkJCW5mcy5MT0FELCBmdW5jdGlvbihldmVudCkgeyBjYW4ub25hY3Rpb25bbmZzLkxPQURdKGV2ZW50LCBjYW4pIH0sCgkJCW1kYi5MSU5LLCBmdW5jdGlvbihldmVudCkgewoJCQkJaWYgKFtuZnMuWk1MLCBuZnMuSU1MXS5pbmRleE9mKGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpID4gLTEpIHsKCQkJCQljYW4udXNlci5vcGVuKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgewoJCQkJCQlwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCB3ZWJzaXRlOiBjYW4uYmFzZS50cmltUHJlZml4KGNhbi5iYXNlLlBhdGgoY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKSwgInNyYy93ZWJzaXRlLyIpLAoJCQkJCX0pKQoJCQkJfSBlbHNlIHsKCQkJCQljYW4udXNlci5vcGVuKGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgewoJCQkJCQlwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sIGljZS5QT0QpLCBjbWQ6IGNhbi5iYXNlLlBhdGgoY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5PcHRpb24obmZzLkZJTEUpKQoJCQkJCX0pKQoJCQkJfQoJCQl9LAoJCQltZGIuUExVR0lOLCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGRhdGEpIHsgY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBkYXRhLCB1aS5vdXRwdXQpIH0pIH0sCgkJCWh0bWwuV0lEVEgsIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuV0lEVEgsIHZhbHVlOiBjYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildKjEwMC9jYW4uQ29uZldpZHRoKCl8fDUwfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJCQljYW4ucHJvZmlsZV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildID0gY2FuLkNvbmZXaWR0aCgpKnBhcnNlSW50KGxpc3RbMF0pLzEwMAoJCQkJCWNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikKCQkJCX0pCgkJCX0KCQkpKTsgdGFyZ2V0Ll90b2dnbGUgPSBmdW5jdGlvbihldmVudCwgc2hvdykgeyBhY3Rpb25bc2hvdz8gY2xpLlNIT1c6IGNsaS5DTE9TRV0oZXZlbnQpIH0KCX0sCglfZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFtodG1sLkFDVElPTiwgaHRtbC5PVVRQVVQsIGh0bWwuU1RBVFVTXSk7IGNhbi51aS5kaXNwbGF5X291dHB1dCA9IHVpLm91dHB1dCwgY2FuLnVpLmRpc3BsYXlfc3RhdHVzID0gdWkuc3RhdHVzCgkJdmFyIGFjdGlvbiA9IGNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgW10sIHVpLmFjdGlvbiwga2l0LkRpY3QoCgkJCWNsaS5DTE9TRSwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIHRhcmdldCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJCQljbGkuQ0xFQVIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHVpLm91dHB1dCkgfSwKCQkJY2xpLkVYRUMsIGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbltjbGkuRVhFQ10oZXZlbnQsIGNhbikgfSwKCQkJbWRiLlBMVUdJTiwgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWCwgY3R4LkFSR1NdLCBmdW5jdGlvbihkYXRhKSB7IGNhbi5vbmltcG9ydC5wbHVnKGNhbiwgZGF0YSwgdWkub3V0cHV0KSB9KSB9LAoJCQlodG1sLkhFSUdIVCwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFt7bmFtZTogaHRtbC5IRUlHSFQsIHZhbHVlOiBjYW4uZGlzcGxheV9zaXplW2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildKjEwMC9jYW4uQ29uZkhlaWdodCgpfHw1MH1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCQkJY2FuLmRpc3BsYXlfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXSA9IGNhbi5Db25mSGVpZ2h0KCkqcGFyc2VJbnQobGlzdFswXSkvMTAwCgkJCQkJY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKQoJCQkJfSkKCQkJfQoJCSkpOyB0YXJnZXQuX3RvZ2dsZSA9IGZ1bmN0aW9uKGV2ZW50LCBzaG93KSB7IGFjdGlvbltzaG93PyBjbGkuRVhFQzogY2xpLkNMT1NFXShldmVudCkgfQoJfSwKCV90b29sa2l0OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCWNhbi51aS50b29sa2l0ID0gY2FuLm9uYXBwZW5kLmZpZWxkKGNhbiwgInRvb2xraXQiLCB7fSwgY2FuLl9vdXRwdXQpCgl9LAoJX2tleWRvd246IGZ1bmN0aW9uKGNhbikgeyBjYW4ub25rZXltYXAuX2J1aWxkKGNhbikKCQljYW4uaXNDbWRNb2RlKCkgJiYgY2FuLm9uZW5naW5lLmxpc3RlbihjYW4sIGNoYXQuT05LRVlET1dOLCBmdW5jdGlvbihldmVudCkgewoJCQljYW4uX2tleV9saXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBtZGIuUExVR0lOLCBjYW4uX2tleV9saXN0LCBjYW4udWkuY29udGVudCkKCQl9KQoJfSwKCV9zZXNzaW9uOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5vbmltcG9ydC5zZXNzKGNhbiwgIiIsIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQuc2VzcyhjYW4sIHsKCQkJcGx1ZzogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJwbHVnIikpLnJldmVyc2UoKSwKCQkJZXh0czogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJleHRzIikpLnJldmVyc2UoKSwKCQkJdGFiczogY2FuLmNvcmUuU3BsaXQobXNnLk9wdGlvbk9yU2VhcmNoKCJ0YWJzIikpLAoJCX0pIH0pCgl9LAoJX3NpbXBsZTogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnRhYnZpZXdbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV0gPSBjYW4uX21zZwoJCWNhbi5Db25mSGVpZ2h0KCIiKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgaHRtbC5PVVRQVVQpCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAic2ltcGxlIikKCX0sCglfdGFiczogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnVpLl90YWJzID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiAidGFicyJ9XSwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLnVpLl9wYXRoID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiAicGF0aCJ9XSwgY2FuLnVpLmNvbnRlbnQpCgl9LAoKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7IGlmIChjYW4uaXNTaW1wbGVNb2RlKCkpIHsgcmV0dXJuIH0KCQlpZiAoY2FuLmlzRmxvYXRNb2RlKCkpIHsgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi51aS5wcm9qZWN0KSB9CgoJCXZhciB3aWR0aCA9IGNhbi5Db25mV2lkdGgoKSsoY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLmlzQ21kTW9kZSgpICYmIGNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDE2OiAwKS0oY2FuLnVzZXIuaXNXaW5kb3dzICYmICFjYW4uaXNDbWRNb2RlKCk/IDIwOiAwKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGNhbi5wcm9maWxlX3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fCh3aWR0aC1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkvMikKCQljYW4ucGFnZS5zdHlsZVdpZHRoKGNhbiwgY2FuLnVpLmNvbnRlbnQsIHdpZHRoLWNhbi51aS5wcm9qZWN0Lm9mZnNldFdpZHRoLWNhbi51aS5wcm9maWxlLm9mZnNldFdpZHRoKQoJCWNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCBjYW4udWkuZGlzcGxheSwgd2lkdGgtY2FuLnVpLnByb2plY3Qub2Zmc2V0V2lkdGgpCgoJCXZhciBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJaWYgKGNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5pc0Zsb2F0TW9kZSgpKSB7IGhlaWdodCA9IGNhbi5fcm9vdC5faGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUIH0KCgkJaWYgKGNhbi5pc0NtZE1vZGUoKSkgewoJCQlpZiAoY2FuLnVpLmRpc3BsYXkuZGlzcGxheSAhPSBodG1sLk5PTkUpIHsKCQkJCWlmIChjYW4udWkuZGlzcGxheS5vZmZzZXRIZWlnaHQgPiBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKSAvIDIsIDIwMCkpIHsKCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5kaXNwbGF5X291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uYmFzZS5NaW4oY2FuLkNvbmZIZWlnaHQoKSAvIDIsIDIwMCkpCgkJCQl9CgkJCX0KCQkJaWYgKGNhbi5fc3RhdHVzLnN0eWxlLmRpc3BsYXkgPT0gaHRtbC5OT05FKSB7IGhlaWdodCArPSBodG1sLkFDVElPTl9IRUlHSFQgfQoJCQl2YXIgcmVzdCA9IGNhbi51aS5kaXNwbGF5Lm9mZnNldEhlaWdodCtjYW4udWkuX3RhYnMub2Zmc2V0SGVpZ2h0K2Nhbi51aS5fcGF0aC5vZmZzZXRIZWlnaHQrNAoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5jb250ZW50LCBoZWlnaHQraHRtbC5BQ1RJT05fSEVJR0hULXJlc3QpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCBoZWlnaHQtY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0KQoJCQljYW4ucGFnZS5zdHlsZUhlaWdodChjYW4sIGNhbi51aS5wcm9qZWN0LCBoZWlnaHQraHRtbC5BQ1RJT05fSEVJR0hUKQoJCX0gZWxzZSB7IHZhciByZXN0ID0gY2FuLnVpLmRpc3BsYXkub2Zmc2V0SGVpZ2h0OyBpZiAoaGVpZ2h0IDwgMzIwKSB7IGhlaWdodCA9IDMyMCB9CgkJCWlmICghY2FuLmlzRnVsbE1vZGUoKSkgewoJCQkJY2FuLl9taW5faGVpZ2h0ID0gY2FuLl9taW5faGVpZ2h0fHxoZWlnaHQsIGhlaWdodCA+PSBjYW4uX21pbl9oZWlnaHQgJiYgKGNhbi5fbWluX2hlaWdodCA9IGhlaWdodCkKCQkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuTUlOX0hFSUdIVCwgY2FuLl9taW5faGVpZ2h0KQoJCQl9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmNvbnRlbnQsIGNhbi51c2VyLmlzTW9iaWxlPyBodG1sLkhFSUdIVDogaHRtbC5NQVhfSEVJR0hULCBoZWlnaHQtcmVzdCkKCQkJY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLnVpLnByb2plY3QsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCtyZXN0KQoJCX0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkucHJvZmlsZSwgaHRtbC5JRlJBTUUsIGZ1bmN0aW9uKGlmcmFtZSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpZnJhbWUsIHtoZWlnaHQ6IGNhbi51aS5wcm9maWxlLm9mZnNldEhlaWdodC1odG1sLkFDVElPTl9IRUlHSFQtNCwgd2lkdGg6IGNhbi51aS5wcm9maWxlLm9mZnNldFdpZHRofSkKCQl9KQoJfSwKCXByb2plY3Q6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgewoJCWNhbi5vbmltcG9ydC56b25lKGNhbiwgWwoJCQl7bmFtZTogInNvdXJjZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgdmFyIHRvdGFsID0gMAoJCQkJZnVuY3Rpb24gc2hvdyhwYXRoLCB0YXJnZXQpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdCh7fSwge2Rpcl9yb290OiBwYXRoLCBkaXJfZGVlcDogdHJ1ZX0pLCBbaWNlLlBXRF0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4uT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKGl0ZW0ucGF0aCkgPT0gMCkgeyBpdGVtLmV4cGFuZCA9IHRydWUgfSB9KQoJCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgbGlzdCwgbmZzLlBBVEgsIGljZS5QUywgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBpdGVtLnBhdGgpIC8vIOaYvuekuuaWh+S7tgoJCQkJCX0sIHRhcmdldCksIGNhbi5TdGF0dXMoIuaWh+S7tuaVsCIsIHRvdGFsICs9IG1zZy5MZW5ndGgoKSkKCQkJCX0sIHRydWUpIH0gaWYgKHBhdGgubGVuZ3RoID09IDEpIHsgcmV0dXJuIHNob3cocGF0aFswXSwgdGFyZ2V0KSB9CgoJCQkJY2FuLm9uaW1wb3J0LnpvbmUoY2FuLCBjYW4uY29yZS5MaXN0KHBhdGgsIGZ1bmN0aW9uKHBhdGgpIHsgcmV0dXJuIHtuYW1lOiBwYXRoLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHNob3cocGF0aCwgdGFyZ2V0KSB9fSB9KSwgdGFyZ2V0KQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRhcmdldC5wcmV2aW91c1NpYmxpbmcuaW5uZXJIVE1MID0gIiIgfSkKCQkJfX0sCgkJCXtuYW1lOiAicGx1Z2luIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgewoJCQkJY2FuLm9uaW1wb3J0LnRyZWUoY2FuLCBjYW4uY29yZS5JdGVtKGNhbi5vbmVuZ2luZS5wbHVnaW4ubWV0YSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB7aW5kZXg6IGNhbi5iYXNlLnRyaW1QcmVmaXgoa2V5LCAiY2FuLiIpfSB9KSwgY3R4LklOREVYLCBpY2UuUFQsIGZ1bmN0aW9uKGV2ZW50LCBpdGVtKSB7CgkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLmNvcmUuS2V5cygiY2FuIiwgaXRlbS5pbmRleCksIGN0eC5JTkRFWCkgLy8g5pi+56S65o+S5Lu2CgkJCQl9LCB0YXJnZXQpCgkJCX19LAoJCV0sIGNhbi51aS5wcm9qZWN0KQoJfSwKCWhpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgcHVzaCkgewoJCWNhbi5iYXNlLkVxKHB1c2gsIGNhbi5oaXN0b3J5W2Nhbi5oaXN0b3J5Lmxlbmd0aC0xXSkgfHwgY2FuLmhpc3RvcnkucHVzaChwdXNoKQoJCXJldHVybiBjYW4uU3RhdHVzKCLot7PovazmlbAiLCBjYW4uaGlzdG9yeS5sZW5ndGgpLCBwdXNoCgl9LAoJdGFidmlldzogZnVuY3Rpb24oY2FuLCBwYXRoLCBmaWxlLCBsaW5lLCBjYiwgc2tpcCwgc2tpcDIpIHsgdmFyIGtleSA9IGNhbi5vbmV4cG9ydC5rZXlzKGNhbiwgZmlsZSwgcGF0aCkKCQlpZiAoY2FuLmlzQ21kTW9kZSgpKSB7IGxvY2F0aW9uLmhhc2ggPSBmaWxlK2ljZS5GUysobGluZXx8MSkgfQoJCWlmICghc2tpcCAmJiBjYW4udGFidmlld1trZXldKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZShwYXRoK2ZpbGUpCgkJCWNhbi5fbXNnICYmIGNhbi5fbXNnLk9wdGlvbihuZnMuTElORSwgY2FuLk9wdGlvbihuZnMuTElORSkpLCBjYW4uX21zZyA9IGNhbi50YWJ2aWV3W2tleV0KCQkJY2FuLk9wdGlvbih7cGF0aDogcGF0aCwgZmlsZTogZmlsZSwgbGluZTogbGluZXx8Y2FuLl9tc2cuT3B0aW9uKG5mcy5MSU5FKXx8MX0pCgkJCXJldHVybiBjYW4uX21zZy5PcHRpb24oY2FuLk9wdGlvbigpKSwgY2FuLm9uc3ludGF4Ll9pbml0KGNhbiwgY2FuLl9tc2csIGNiLCBza2lwMikKCQl9CgoJCWZ1bmN0aW9uIHNob3cobXNnKSB7IHZhciBza2lwMiA9IHNraXA7IGNhbi50YWJ2aWV3W2tleV0gPSBtc2cKCQkJY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbe25hbWU6IGZpbGUuc3BsaXQobGluZSA9PSBjdHguSU5ERVg/IGljZS5QVDogaWNlLlBTKS5wb3AoKSwgdGV4dDogZmlsZX1dLCBmdW5jdGlvbihldmVudCwgbWV0YSkgewoJCQkJY2FuLl90YWIgPSBtc2cuX3RhYiA9IGV2ZW50LnRhcmdldCwgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBmaWxlLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSwgY2IsIGZhbHNlLCBza2lwMiksIGNiID0gbnVsbCwgc2tpcDIgPSBmYWxzZQoJCQl9LCBmdW5jdGlvbihpdGVtKSB7CgkJCQlkZWxldGUoY2FuLnRhYnZpZXdba2V5XSkKCQkJCWRlbGV0ZShjYW4uX2NhY2hlX2RhdGFbY2FuLmJhc2UuUGF0aChwYXRoLCBmaWxlKV0pCgkJCQlkZWxldGUoY2FuLnVpLl9jb250ZW50Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuX3Byb2ZpbGVfb3V0cHV0Ll9jYWNoZVtjYW4uYmFzZS5QYXRoKHBhdGgsIGZpbGUpXSkKCQkJCWRlbGV0ZShjYW4udWkuZGlzcGxheV9vdXRwdXQuX2NhY2hlW2Nhbi5iYXNlLlBhdGgocGF0aCwgZmlsZSldKQoJCQkJbXNnLl9jb250ZW50ICE9IGNhbi51aS5fY29udGVudCAmJiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBtc2cuX2NvbnRlbnQpCgkJCX0sIGNhbi51aS5fdGFicywgZnVuY3Rpb24oaXRlbSkge30pCgkJfQoKCQljYW4uT3B0aW9uKGNhbi5vbmltcG9ydC5oaXN0b3J5KGNhbiwge3BhdGg6IHBhdGgsIGZpbGU6IGZpbGUsIGxpbmU6IGxpbmV9KSkKCQlsaW5lID09IGN0eC5JTkRFWD8gc2hvdyhjYW4ucmVxdWVzdCh7fSwge2luZGV4OiBmaWxlLCBsaW5lOiBsaW5lfSkpOgoJCQlsaW5lID09IHdlYi5EUkVBTT8gc2hvdyhjYW4ucmVxdWVzdCh7fSwge2luZGV4OiBmaWxlLCBsaW5lOiBsaW5lfSkpOgoJCQkJY2FuLnJ1bih7fSwgW3BhdGgsIGZpbGVdLCBzaG93LCB0cnVlKQoJfSwKCXByb2ZpbGU6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIHdpZHRoID0gY2FuLnByb2ZpbGVfc2l6ZVtjYW4ub25leHBvcnQua2V5cyhjYW4pXXx8KGNhbi5Db25mV2lkdGgoKS1jYW4udWkucHJvamVjdC5vZmZzZXRXaWR0aCkvMgoJCWlmIChtc2cpIHsKCQkJdmFyIHN1cCA9IGNhbi50YWJ2aWV3W2Nhbi5vbmV4cG9ydC5rZXlzKGNhbildCgkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQsIGZhbHNlKQoJCQlpZiAobXNnLlJlc3VsdCgpLmluZGV4T2YoIjxpZnJhbWUiKSA+IC0xKSB7CgkJCQlpZiAoc3VwLl9wcm9maWxlX291dHB1dCAhPSBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0KSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIHN1cC5fcHJvZmlsZV9vdXRwdXQpIH0KCQkJCWNhbi51aS5wcm9maWxlX291dHB1dCA9IHN1cC5fcHJvZmlsZV9vdXRwdXQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkucHJvZmlsZV9vdXRwdXQucGFyZW50Tm9kZSwgW3t2aWV3OiAib3V0cHV0IiwgaW5uZXI6IG1zZy5SZXN1bHQoKX1dKS5vdXRwdXQKCQkJfSBlbHNlIHsKCQkJCWNhbi51aS5wcm9maWxlX291dHB1dCA9IHN1cC5fcHJvZmlsZV9vdXRwdXQgPSBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0CgkJCQljYW4ub25pbXBvcnQucHJvY2VzcyhjYW4sIG1zZywgY2FuLnVpLl9wcm9maWxlX291dHB1dCwgd2lkdGgsIGNhbi51aS5wcm9maWxlLm9mZnNldEhlaWdodCkKCQkJfQoJCX0KCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGVfb3V0cHV0LCB0cnVlKQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCWRpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlaWdodCA9IGNhbi5kaXNwbGF5X3NpemVbY2FuLm9uZXhwb3J0LmtleXMoY2FuKV18fHtzaDogY2FuLkNvbmZIZWlnaHQoKS8yfVtjYW4ucGFyc2VdfHxjYW4uQ29uZkhlaWdodCgpLzQKCQlpZiAobXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9jZXNzKGNhbiwgbXNnLCBjYW4udWkuZGlzcGxheV9vdXRwdXQsIGNhbi51aS5kaXNwbGF5Lm9mZnNldFdpZHRoLCBoZWlnaHQpCgkJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUyksIGNhbi51aS5kaXNwbGF5X3N0YXR1cykKCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgl9LAoJcHJvY2VzczogZnVuY3Rpb24oY2FuLCBtc2csIHRhcmdldCwgd2lkdGgsIGhlaWdodCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCWlmIChtc2cuT3B0aW9uKGljZS5NU0dfUFJPQ0VTUykgPT0gIl9maWVsZCIpIHsKCQkJbXNnLlRhYmxlKGZ1bmN0aW9uKG1ldGEpIHsgbWV0YS5kaXNwbGF5ID0gbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpCgkJCQljYW4ub25pbXBvcnQucGx1ZyhjYW4sIG1ldGEsIHRhcmdldCwgZnVuY3Rpb24oc3ViKSB7IHdpZHRoICYmIHN1Yi5Db25mV2lkdGgod2lkdGgpLCBoZWlnaHQgJiYgc3ViLkNvbmZIZWlnaHQoaGVpZ2h0KSwgc3ViLkZvY3VzKCkgfSkKCQkJfSkKCQl9IGVsc2UgaWYgKG1zZy5PcHRpb24oaWNlLk1TR19ESVNQTEFZKSAhPSAiIikgewoJCQljYW4ub25hcHBlbmQuX291dHB1dChjYW4sIG1zZywgbXNnLk9wdGlvbihpY2UuTVNHX0RJU1BMQVkpLCB0YXJnZXQsIGZhbHNlLCBmdW5jdGlvbihtc2cpIHsgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9KSB9KQoJCX0gZWxzZSB7CgkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KSwgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnLCB0YXJnZXQpCgkJfQoJfSwKCXRvb2xraXQ6IGZ1bmN0aW9uKGNhbiwgbWV0YSwgY2IpIHsgbWV0YS5tc2cgPSB0cnVlCgkJY2FuLm9uaW1wb3J0LnBsdWcoY2FuLCBtZXRhLCBjYW4udWkudG9vbGtpdC5vdXRwdXQsIGZ1bmN0aW9uKHN1YikgewoJCQlzdWIuQ29uZkhlaWdodChjYW4uQ29uZkhlaWdodCgpLTQqaHRtbC5BQ1RJT05fSEVJR0hUKSwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgc3ViLkNvbmZIZWlnaHQoKSkKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCgkJCWNhbi5fc3RhdHVzLmFwcGVuZENoaWxkKHN1Yi5fbGVnZW5kKSwgc3ViLl9sZWdlbmQub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9zdGF0dXMsIGljZS5QVCtodG1sLlNFTEVDVClbMF0gPT0gZXZlbnQudGFyZ2V0KSB7CgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGV2ZW50LnRhcmdldCwgaHRtbC5TRUxFQ1QpCgkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHN1Yi5fdGFyZ2V0LCBodG1sLlNFTEVDVCkKCQkJCQlyZXR1cm4KCQkJCX0KCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4udWkudG9vbGtpdC5vdXRwdXQsIGh0bWwuRklFTERTRVQsIHN1Yi5fdGFyZ2V0KSwgc3ViLkZvY3VzKCkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX3N0YXR1cywgaHRtbC5MRUdFTkQsIGV2ZW50LnRhcmdldCkKCQkJCWlmIChtZXRhLm1zZyA9PSB0cnVlKSB7IG1ldGEubXNnID0gZmFsc2UsIHN1Yi5VcGRhdGUoKSB9CgkJCX0sIHN1Yi5zZWxlY3QgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHN1Yi5fbGVnZW5kLmNsaWNrKCksIHN1YiB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBzdWIuc2VsZWN0KCkgfQoJCQlzdWIuX2xlZ2VuZC5vbm1vdXNlZW50ZXIgPSBudWxsCgkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pCgl9LAoJZXh0czogZnVuY3Rpb24oY2FuLCB1cmwsIGNiKSB7CgkJY2FuLnJlcXVpcmUoW3VybF0sIGZ1bmN0aW9uKCkge30sIGZ1bmN0aW9uKGNhbiwgbmFtZSwgc3ViKSB7IHN1Yi5faW5pdChjYW4sIGNhbi5iYXNlLlBhcnNlVVJMKHN1Yi5fcGF0aCksIGZ1bmN0aW9uKHN1YikgewoJCQljYW4uZXh0ZW50aW9uc1t1cmwuc3BsaXQoIj8iKVswXV0gPSBzdWIsIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCX0pIH0pCgl9LAoJc2VzczogZnVuY3Rpb24oY2FuLCBzZXNzLCBjYikgeyBzZXNzID0gc2Vzc3x8Y2FuLnVzZXIubG9jYWxTdG9yYWdlKGNhbiwgIndlYi5jb2RlLmlubmVyLnNlc3MiKQoJCWNhbi5jb3JlLk5leHQoc2Vzcy5wbHVnLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbmltcG9ydC50b29sa2l0KGNhbiwge2luZGV4OiBpdGVtfSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0W2l0ZW1dID0gc3ViLCBuZXh0KCkgfSkgfSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5jb3JlLk5leHQoc2Vzcy5leHRzLCBmdW5jdGlvbihpdGVtLCBuZXh0KSB7IGNhbi5vbmltcG9ydC5leHRzKGNhbiwgaXRlbSwgbmV4dCkgfSwgZnVuY3Rpb24oKSB7CgkJCQl2YXIgcGF0aCA9IGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlID0gY2FuLk9wdGlvbihuZnMuRklMRSksIGxpbmUgPSBjYW4uT3B0aW9uKG5mcy5MSU5FKQoJCQkJY2FuLmJhc2UuZ2V0VmFsaWQoc2Vzcy50YWJzKT8gY2FuLmNvcmUuTmV4dChzZXNzLnRhYnMsIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsgdmFyIGxzID0gaXRlbS5zcGxpdChpY2UuREYpOyBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGxzWzBdLCBsc1sxXSwgbHNbMl0sIG5leHQpIH0sCgkJCQkJZnVuY3Rpb24oKSB7IGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgcGF0aCwgZmlsZSwgbGluZSwgY2IpIH0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCQkJfSkKCQl9KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTlBMVUdJTiwge2hlbHA6ICLms6jlhozmj5Lku7YiLCAKCSJjYW4uY29kZS5pbm5lci5rZXltYXAiOiBzaHkoIuaMiemUriIsIHt9LCBbIm1vZGUiLCAia2V5IiwgaWNlLkxJU1QsIGljZS5CQUNLXSwgZnVuY3Rpb24oY2FuLCBtc2csIGNtZHMpIHsKCQljYW4uY29yZS5JdGVtKGNhbi5vbmtleW1hcC5fbW9kZSwgZnVuY3Rpb24obW9kZSwgdmFsdWUpIHsKCQkJKCFjbWRzWzBdIHx8IGNtZHNbMF0gPT0gbW9kZSkgJiYgY2FuLmNvcmUuSXRlbSh2YWx1ZSwgZnVuY3Rpb24oa2V5LCBmdW5jKSB7CgkJCQlpZiAoY21kc1swXSA9PSBtb2RlICYmIGNtZHNbMV0gPT0ga2V5KSB7CgkJCQkJbXNnLlB1c2goImtleSIsICJtb2RlIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBtb2RlKQoJCQkJCW1zZy5QdXNoKCJrZXkiLCAia2V5IikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBrZXkpCgkJCQkJbXNnLlB1c2goImtleSIsICJoZWxwIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBmdW5jLmhlbHApCgkJCQkJbXNnLlB1c2goImtleSIsICJmdW5jIikKCQkJCQltc2cuUHVzaCgidmFsdWUiLCBmdW5jLnRvU3RyaW5nKCkpCgkJCQl9IGVsc2UgaWYgKCFjbWRzWzBdIHx8ICFjbWRzWzFdKSB7CgkJCQkJbXNnLlB1c2goa2l0LkRpY3QoIm1vZGUiLCBtb2RlLCAia2V5Iiwga2V5LCAiaGVscCIsIGZ1bmMuaGVscHx8ZnVuYy50b1N0cmluZygpKSkKCQkJCX0KCQkJfSkKCQl9KSwgbXNnLlN0YXR1c1RpbWVDb3VudCgpCgl9KSwKfSkKVm9sY2Fub3MoY2hhdC5PTlNZTlRBWCwge2hlbHA6ICLor63ms5Xpq5jkuq4iLCBsaXN0OiBbImtleXdvcmQiLCAicHJlZml4IiwgImxpbmUiXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCBjYiwgc2tpcCkgewoJCWlmIChjYW4udWkuX3BhdGgpIHsKCQkJY2FuLnVpLl9wYXRoLmlubmVySFRNTCA9IG1zZy5PcHRpb24oY3R4LklOREVYKT8gbXNnLk9wdGlvbihuZnMuTElORSkgPT0gd2ViLkRSRUFNPwoJCQkJLyogZHJlYW0gKi8gY2FuLnBhZ2UuRm9ybWF0KGh0bWwuQSwgY2FuLm1pc2MuTWVyZ2VVUkwoY2FuLCB7cG9kOiBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgdG9waWM6IGNhbi5taXNjLlNlYXJjaChjYW4sICJ0b3BpYyIpfSwgdHJ1ZSkpOgoJCQkJLyogaW5kZXggKi8gbXNnLk9wdGlvbihuZnMuRklMRSk6IC8qIGZpbGUgKi8gY2FuLmJhc2UuUGF0aChtc2cuT3B0aW9uKG5mcy5QQVRIKSwgbXNnLk9wdGlvbihuZnMuRklMRSkpCgkJfQoJCWNhbi51aS5jdXJyZW50ICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuY3VycmVudCwgIW1zZy5PcHRpb24oY3R4LklOREVYKSkKCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKGNhY2hlX2RhdGEpIHsKCQkJY2FuLmZpbGUgJiYgKGNhY2hlX2RhdGFbY2FuLmZpbGVdID0ge2N1cnJlbnQ6IGNhbi5jdXJyZW50LCBtYXg6IGNhbi5tYXgsCgkJCQlwcm9maWxlX2Rpc3BsYXk6IGNhbi51aS5wcm9maWxlLnN0eWxlLmRpc3BsYXksIGRpc3BsYXlfZGlzcGxheTogY2FuLnVpLmRpc3BsYXkuc3R5bGUuZGlzcGxheSwKCQkJfSkKCQkJY2FuLmZpbGUgPSBjYW4uYmFzZS5QYXRoKG1zZy5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSkKCQkJY2FuLnBhcnNlID0gY2FuLmJhc2UuRXh0KGNhbi5maWxlKSwgY2FuLlN0YXR1cygi5qih5byPIiwgInBsdWdpbiIpCgoJCQl2YXIgcCA9IGNhY2hlX2RhdGFbY2FuLmZpbGVdOyBwICYmIChjYW4uY3VycmVudCA9IHAuY3VycmVudCwgY2FuLm1heCA9IHAubWF4KQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCB7ZGlzcGxheTogcD8gcC5wcm9maWxlX2Rpc3BsYXk6IGh0bWwuTk9ORX0pCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLmRpc3BsYXksIHtkaXNwbGF5OiBwPyBwLmRpc3BsYXlfZGlzcGxheTogaHRtbC5OT05FfSkKCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5fdGFicywgaHRtbC5ESVZfVEFCUywgbXNnLl90YWIpCgkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCBjYW4uX2FjdGlvbiwgaHRtbC5ESVZfVEFCUywgbXNnLl90YWIpCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikKCQkJCW1zZy5PcHRpb24oY3R4LklOREVYKSAmJiBjYW4ub25tb3Rpb24uZm9jdXMoY2FuLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5PUFRJT05fQVJHUylbMF0pCgkJCX0pCgoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuX2NvbnRlbnQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cygiZGl2LmNvbnRlbnQiLCBodG1sLklGUkFNRSksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgaXRlbSA9PSBtc2cuX2NvbnRlbnQpKSB7IGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50IH0KCQkJfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLl9wcm9maWxlX291dHB1dC5wYXJlbnROb2RlLCBjYW4ucGFnZS5LZXlzKCJkaXYub3V0cHV0IiksIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWlmIChjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgaXRlbSA9PSBtc2cuX3Byb2ZpbGVfb3V0cHV0KSkgeyBtc2cuX3Byb2ZpbGVfb3V0cHV0IH0KCQkJfSkKCQkJcmV0dXJuIGNhbi5maWxlCgkJfSwgY2FuLnVpLl9jb250ZW50LCBjYW4udWkuX3Byb2ZpbGVfb3V0cHV0LCBjYW4udWkuZGlzcGxheV9vdXRwdXQpICYmICFza2lwKSB7CgkJCXJldHVybiBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShudWxsLCBjYW4sIG1zZy5PcHRpb24obmZzLkxJTkUpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgkJfQoKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkuY29udGVudCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCWlmIChtc2cuT3B0aW9uKGN0eC5JTkRFWCkpIHsKCQkJaWYgKG1zZy5PcHRpb24obmZzLkxJTkUpID09IHdlYi5EUkVBTSkgewoJCQkJaWYgKG1zZy5fY29udGVudCkgeyByZXR1cm4gfQoJCQkJY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3R5cGU6IGh0bWwuSUZSQU1FLCBzcmM6IGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogbXNnLk9wdGlvbihuZnMuRklMRSksIHRvcGljOiBjYW4ubWlzYy5TZWFyY2goY2FuLCAidG9waWMiKX0sIHRydWUpLCB3aWR0aDogY2FuLnVpLmNvbnRlbnQub2Zmc2V0V2lkdGgsIGhlaWdodDogY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0fV0sIGNhbi51aS5jb250ZW50KQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCQl9CgoJCQljYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLmNvbnRlbnQgPSBtc2cuX2NvbnRlbnQgPSBjYW4udWkuX2NvbnRlbnQsIHRydWUpCgkJCXJldHVybiBjYW4ub25pbXBvcnQucGx1ZyhjYW4sIHtpbmRleDogbXNnLk9wdGlvbihjdHguSU5ERVgpfSwgY2FuLnVpLmNvbnRlbnQsIGZ1bmN0aW9uKHN1YikgewoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBzdWIuQ29uZkhlaWdodChjYW4udWkuY29udGVudC5vZmZzZXRIZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQpKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoY2FuLnVpLmNvbnRlbnQub2Zmc2V0V2lkdGgpKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHN1Yi5Gb2N1cygpIH0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKCkKCgkJCQlzdWIub25hY3Rpb24uY2xvc2UgPSBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmJhY2soe30sIGNhbiksIG1zZy5fdGFiLl9jbG9zZSgpIH0KCQkJCXN1Yi5vbmltcG9ydC5fb3BlbiA9IGZ1bmN0aW9uKHN1YiwgbXNnLCBfYXJnKSB7IHZhciB1cmwgPSBjYW4uYmFzZS5QYXJzZVVSTChfYXJnKSwgbHMgPSB1cmwub3JpZ2luLnNwbGl0KCIvY2hhdC9wb2QvIikKCQkJCQlpZiAoX2FyZy5pbmRleE9mKGxvY2F0aW9uLm9yaWdpbikgPT0gMCAmJiBscy5sZW5ndGggPiAxKSB7CgkJCQkJCXJldHVybiBjYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBsc1sxXS5zcGxpdCgiLyIpWzBdLCB3ZWIuRFJFQU0pLCBzdWIuVXBkYXRlKCkgLy8g5pi+56S656m66Ze0CgkJCQkJfQoJCQkJCXJldHVybiBjYW4udXNlci5vcGVuKF9hcmcpLCBzdWIuVXBkYXRlKCkKCQkJCX0KCQkJfSkKCQl9CgkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5jb250ZW50ID0gbXNnLl9jb250ZW50ID0gY2FuLnVpLl9jb250ZW50LCB0cnVlKQoKCQlmdW5jdGlvbiBpbml0KHApIHsKCQkJY2FuLm1heCA9IDAsIGNhbi5jb3JlLkxpc3QoY2FuLmxzID0gbXNnLlJlc3VsdCgpLnNwbGl0KGljZS5OTCksIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9uYWN0aW9uLmFwcGVuZExpbmUoY2FuLCBpdGVtKSB9KQoJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShudWxsLCBjYW4sIG1zZy5PcHRpb24obmZzLkxJTkUpKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYigpCgoJCQltc2cuT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKCJ3ZWJzaXRlLyIpID09IDAgJiYgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKQoJCQlpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LmhhcyhjYW4sIGNhbi5fZmllbGRzLCBjaGF0LlBMVUdJTikpIHsKCQkJCXAgJiYgcC5yZW5kZXIgJiYgY2FuLm9uYWN0aW9uW2NsaS5TSE9XXSh7fSwgY2FuKQoJCQkJcCAmJiBwLmVuZ2luZSAmJiBjYW4ub25hY3Rpb25bY2xpLkVYRUNdKHt9LCBjYW4pCgkJCX0KCQl9CgkJY2FuLkNvbmYoInBsdWciKSAmJiAoY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0gPSBjYW4uQ29uZigicGx1ZyIpKQoJCXZhciBwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV07ICFwPyBjYW4ucnVuQWN0aW9uKHt9LCBtZGIuUExVR0lOLCBbY2FuLnBhcnNlLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSwgbXNnLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJaW5pdChwID0gY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0gPSBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpKSkKCQl9KTogaW5pdChwKQoJfSwKCV9wYXJzZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7IGlmIChsaW5lLmluZGV4T2YoIjxodG1sIikgPT0gMCkgeyByZXR1cm4gbGluZSB9CgkJbGluZSA9IGNhbi5wYWdlLnJlcGxhY2UoY2FuLCBsaW5lfHwiIikKCgkJZnVuY3Rpb24gd3JhcCh0eXBlLCBzdHIpIHsgcmV0dXJuIHR5cGU/ICc8c3BhbiBjbGFzcz0iJyt0eXBlKyciPicrc3RyKyc8L3NwYW4+Jzogc3RyIH0KCQl2YXIgcCA9IGNhbi5vbnN5bnRheFtjYW4ucGFyc2VdOyBpZiAoIXApIHsgcmV0dXJuIGxpbmUgfSBwID0gY2FuLm9uc3ludGF4W3AubGlua118fHAsIHAuc3BsaXQgPSBwLnNwbGl0fHx7fQoJCXAua2V5d29yZCAmJiAobGluZSA9IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQobGluZSwgcC5zcGxpdC5zcGFjZXx8Ilx0ICIsIHAuc3BsaXQub3BlcmF0b3J8fCJ7WyguLDo7IXw8PildfSIsIHtkZXRhaWw6IHRydWV9KSwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7CgkJCWl0ZW0gPSBjYW4uYmFzZS5pc09iamVjdChpdGVtKT8gaXRlbToge3RleHQ6IGl0ZW19OyB2YXIgdGV4dCA9IGl0ZW0udGV4dCwgdHlwZSA9IGl0ZW0ua2V5d29yZHx8cC5rZXl3b3JkW3RleHRdCgoJCQlzd2l0Y2ggKGl0ZW0udHlwZSkgeyBjYXNlIGh0bWwuU1BBQ0U6IHJldHVybiB0ZXh0CgkJCQljYXNlIGxhbmcuU1RSSU5HOiByZXR1cm4gd3JhcChsYW5nLlNUUklORywgaXRlbS5sZWZ0K3RleHQraXRlbS5yaWdodCkKCQkJCWRlZmF1bHQ6IHJldHVybiB3cmFwKHR5cGUsIHRleHQpCgkJCX0KCQl9KS5qb2luKCIiKSkKCgkJcC5wcmVmaXggJiYgY2FuLmNvcmUuSXRlbShwLnByZWZpeCwgZnVuY3Rpb24ocHJlLCB0eXBlKSB7IGlmIChjYW4uYmFzZS5iZWdpbldpdGgobGluZSwgcHJlKSkgeyBsaW5lID0gd3JhcCh0eXBlLCBsaW5lKSB9IH0pCgkJcC5zdWZmaXggJiYgY2FuLmNvcmUuSXRlbShwLnN1ZmZpeCwgZnVuY3Rpb24oZW5kLCB0eXBlKSB7IGlmIChjYW4uYmFzZS5lbmRXaXRoKGxpbmUsIGVuZCkpIHsgbGluZSA9IHdyYXAodHlwZSwgbGluZSkgfSB9KQoJCXJldHVybiBsaW5lCgl9LAoJZ286IHsKCQlrZXl3b3JkOiB7CgkJCSJwYWNrYWdlIjogImtleXdvcmQiLAoJCQkiaW1wb3J0IjogImtleXdvcmQiLAoJCQkidHlwZSI6ICJrZXl3b3JkIiwKCQkJInN0cnVjdCI6ICJrZXl3b3JkIiwKCQkJImludGVyZmFjZSI6ICJrZXl3b3JkIiwKCQkJImNvbnN0IjogImtleXdvcmQiLAoJCQkidmFyIjogImtleXdvcmQiLAoJCQkiZnVuYyI6ICJrZXl3b3JkIiwKCgkJCSJpZiI6ICJrZXl3b3JkIiwKCQkJImVsc2UiOiAia2V5d29yZCIsCgkJCSJmb3IiOiAia2V5d29yZCIsCgkJCSJyYW5nZSI6ICJrZXl3b3JkIiwKCQkJImJyZWFrIjogImtleXdvcmQiLAoJCQkiY29udGludWUiOiAia2V5d29yZCIsCgkJCSJzd2l0Y2giOiAia2V5d29yZCIsCgkJCSJjYXNlIjogImtleXdvcmQiLAoJCQkiZGVmYXVsdCI6ICJrZXl3b3JkIiwKCQkJImZhbGx0aHJvdWdoIjogImtleXdvcmQiLAoJCQkiZ28iOiAia2V5d29yZCIsCgkJCSJzZWxlY3QiOiAia2V5d29yZCIsCgkJCSJkZWZlciI6ICJrZXl3b3JkIiwKCQkJInJldHVybiI6ICJrZXl3b3JkIiwKCgkJCSJmYWxzZSI6ICJjb25zdGFudCIsCgkJCSJ0cnVlIjogImNvbnN0YW50IiwKCQkJIm5pbCI6ICJjb25zdGFudCIsCgkJCSJpb3RhIjogImNvbnN0YW50IiwKCQkJIi0xIjogImNvbnN0YW50IiwKCQkJIjAiOiAiY29uc3RhbnQiLAoJCQkiMSI6ICJjb25zdGFudCIsCgkJCSIyIjogImNvbnN0YW50IiwKCQkJIjMiOiAiY29uc3RhbnQiLAoKCQkJImludCI6ICJkYXRhdHlwZSIsICJpbnQ4IjogImRhdGF0eXBlIiwgImludDE2IjogImRhdGF0eXBlIiwgImludDMyIjogImRhdGF0eXBlIiwgImludDY0IjogImRhdGF0eXBlIiwKCQkJInVpbnQiOiAiZGF0YXR5cGUiLCAidWludDgiOiAiZGF0YXR5cGUiLCAidWludDE2IjogImRhdGF0eXBlIiwgInVpbnQzMiI6ICJkYXRhdHlwZSIsICJ1aW50NjQiOiAiZGF0YXR5cGUiLAoJCQkiZmxvYXQzMiI6ICJkYXRhdHlwZSIsICJmbG9hdDY0IjogImRhdGF0eXBlIiwgImNvbXBsZXg2NCI6ICJkYXRhdHlwZSIsICJjb21wbGV4MTI4IjogImRhdGF0eXBlIiwKCQkJInJ1bmUiOiAiZGF0YXR5cGUiLCAic3RyaW5nIjogImRhdGF0eXBlIiwgImJ5dGUiOiAiZGF0YXR5cGUiLCAidWludHB0ciI6ICJkYXRhdHlwZSIsCgkJCSJib29sIjogImRhdGF0eXBlIiwgImVycm9yIjogImRhdGF0eXBlIiwgImNoYW4iOiAiZGF0YXR5cGUiLCAibWFwIjogImRhdGF0eXBlIiwKCgkJCSJtc2ciOiAiZnVuY3Rpb24iLCAibSI6ICJmdW5jdGlvbiIsCgkJCSJpbml0IjogImZ1bmN0aW9uIiwgIm1haW4iOiAiZnVuY3Rpb24iLCAicHJpbnQiOiAiZnVuY3Rpb24iLCAicHJpbnRsbiI6ICJmdW5jdGlvbiIsICJwYW5pYyI6ICJmdW5jdGlvbiIsICJyZWNvdmVyIjogImZ1bmN0aW9uIiwKCQkJIm5ldyI6ICJmdW5jdGlvbiIsICJtYWtlIjogImZ1bmN0aW9uIiwgImxlbiI6ICJmdW5jdGlvbiIsICJjYXAiOiAiZnVuY3Rpb24iLCAiY29weSI6ICJmdW5jdGlvbiIsICJhcHBlbmQiOiAiZnVuY3Rpb24iLCAiZGVsZXRlIjogImZ1bmN0aW9uIiwgImNsb3NlIjogImZ1bmN0aW9uIiwKCQkJImNvbXBsZXgiOiAiZnVuY3Rpb24iLCAicmVhbCI6ICJmdW5jdGlvbiIsICJpbWFnIjogImZ1bmN0aW9uIiwKCQl9LAoJfSwKCXptbDogewoJCXByZWZpeDogewoJCQkiIyAiOiAiY29tbWVudCIsCgkJfSwKCQlrZXl3b3JkOiB7CgkJCSJyZXR1cm4iOiAia2V5d29yZCIsCgoJCQkiaGVhZCI6ICJrZXl3b3JkIiwKCQkJImxlZnQiOiAia2V5d29yZCIsCgkJCSJtYWluIjogImtleXdvcmQiLAoJCQkiZm9vdCI6ICJrZXl3b3JkIiwKCQkJInRhYnMiOiAia2V5d29yZCIsCgoJCQkiaW5kZXgiOiAiZnVuY3Rpb24iLAoJCQkiYWN0aW9uIjogImZ1bmN0aW9uIiwKCQkJImFyZ3MiOiAiZnVuY3Rpb24iLAoJCQkidHlwZSI6ICJmdW5jdGlvbiIsCgkJCSJzdHlsZSI6ICJmdW5jdGlvbiIsCgkJCSJ3aWR0aCI6ICJmdW5jdGlvbiIsCgoJCQkiYXV0byI6ICJjb25zdGFudCIsCgkJCSJ1c2VybmFtZSI6ICJjb25zdGFudCIsCgkJfSwKCX0sCgljc3M6IHsKCQlrZXl3b3JkOiB7CgkJCSJib2R5IjogImtleXdvcmQiLAoJCQkiZGl2IjogImtleXdvcmQiLAoJCQkic3BhbiI6ICJrZXl3b3JkIiwKCQkJImZvcm0iOiAia2V5d29yZCIsCgkJCSJmaWVsZHNldCI6ICJrZXl3b3JkIiwKCQkJImxlZ2VuZCI6ICJrZXl3b3JkIiwKCQkJInNlbGVjdCI6ICJrZXl3b3JkIiwKCQkJInRleHRhcmVhIjogImtleXdvcmQiLAoJCQkiaW5wdXQiOiAia2V5d29yZCIsCgkJCSJ0YWJsZSI6ICJrZXl3b3JkIiwKCQkJInRyIjogImtleXdvcmQiLAoJCQkidGgiOiAia2V5d29yZCIsCgkJCSJ0ZCI6ICJrZXl3b3JkIiwKCgkJCSJiYWNrZ3JvdW5kLWNvbG9yIjogImZ1bmN0aW9uIiwKCQkJImZvbnQtZmFtaWx5IjogImZ1bmN0aW9uIiwKCQkJImZvbnQtd2VpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImZvbnQtc2l6ZSI6ICJmdW5jdGlvbiIsCgkJCSJjb2xvciI6ICJmdW5jdGlvbiIsCgkJCSJ3aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJoZWlnaHQiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZyI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXIiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luIjogImZ1bmN0aW9uIiwKCQkJInBvc2l0aW9uIjogImZ1bmN0aW9uIiwKCQkJImxlZnQiOiAiZnVuY3Rpb24iLAoJCQkidG9wIjogImZ1bmN0aW9uIiwKCQkJInJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJImJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJkaXNwbGF5IjogImZ1bmN0aW9uIiwKCQkJIm92ZXJmbG93IjogImZ1bmN0aW9uIiwKCQkJImZsb2F0IjogImZ1bmN0aW9uIiwKCQkJImNsZWFyIjogImZ1bmN0aW9uIiwKCQkJImN1cnNvciI6ICJmdW5jdGlvbiIsCgoJCQkiei1pbmRleCI6ICJmdW5jdGlvbiIsCgkJCSJ0YWItc2l6ZSI6ICJmdW5jdGlvbiIsCgkJCSJ3b3JkLWJyZWFrIjogImZ1bmN0aW9uIiwKCQkJIndoaXRlLXNwYWNlIjogImZ1bmN0aW9uIiwKCQkJInRleHQtYWxpZ24iOiAiZnVuY3Rpb24iLAoJCQkidmVydGljYWwtYWxpZ24iOiAiZnVuY3Rpb24iLAoJCQkibWluLXdpZHRoIjogImZ1bmN0aW9uIiwKCQkJIm1heC13aWR0aCI6ICJmdW5jdGlvbiIsCgkJCSJwYWRkaW5nLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkicGFkZGluZy10b3AiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLWxlZnQiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLXRvcCI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItcmlnaHQiOiAiZnVuY3Rpb24iLAoJCQkiYm9yZGVyLWJvdHRvbSI6ICJmdW5jdGlvbiIsCgkJCSJib3JkZXItcmFkaXVzIjogImZ1bmN0aW9uIiwKCQkJImJvcmRlci1zcGFjaW5nIjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1sZWZ0IjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi10b3AiOiAiZnVuY3Rpb24iLAoJCQkibWFyZ2luLXJpZ2h0IjogImZ1bmN0aW9uIiwKCQkJIm1hcmdpbi1ib3R0b20iOiAiZnVuY3Rpb24iLAoJCQkiYm94LXNoYWRvdyI6ICJmdW5jdGlvbiIsCgoJCQkiMCI6ICJjb25zdGFudCIsCgkJCSIxMHB4IjogImNvbnN0YW50IiwKCQkJIjIwcHgiOiAiY29uc3RhbnQiLAoJCQkiY3lhbiI6ICJjb25zdGFudCIsCgkJCSJncmF5IjogImNvbnN0YW50IiwKCQkJInllbGxvdyI6ICJjb25zdGFudCIsCgkJCSJibGFjayI6ICJjb25zdGFudCIsCgkJCSJ3aGl0ZSI6ICJjb25zdGFudCIsCgkJCSJibHVlIjogImNvbnN0YW50IiwKCQkJInJlZCI6ICJjb25zdGFudCIsCgkJCSJncmVlbiI6ICJjb25zdGFudCIsCgkJCSJtYWdlbnRhIjogImNvbnN0YW50IiwKCgkJCSJtb25vc3BhY2UiOiAiY29uc3RhbnQiLAoJCQkiYm9sZCI6ICJjb25zdGFudCIsCgkJCSJzb2xpZCI6ICJjb25zdGFudCIsCgkJCSJub25lIjogImNvbnN0YW50IiwKCQkJImJsb2NrIjogImNvbnN0YW50IiwKCQkJImNvbnRleHRzIjogImNvbnN0YW50IiwKCQkJImJvdGgiOiAiY29uc3RhbnQiLAoJCQkiYXV0byI6ICJjb25zdGFudCIsCgoJCQkiY2VudGVyIjogImNvbnN0YW50IiwKCQkJInJlbGF0aXZlIjogImNvbnN0YW50IiwKCQkJImFic29sdXRlIjogImNvbnN0YW50IiwKCQkJInN0aWNreSI6ICJjb25zdGFudCIsCgkJCSJmaXhlZCI6ICJjb25zdGFudCIsCgkJfSwKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05LRVlNQVAsIHtoZWxwOiAi5a+85YWl5pWw5o2uIiwKCV9tb2RlOiB7CgkJcGx1Z2luOiB7CgkJCUVzY2FwZTogc2h5KCLliIfmjaLmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5jbGVhcihldmVudCwgY2FuKSB9KSwKCQkJZzogc2h5KCLmkJzntKIiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5pCc57SiIl0oZXZlbnQsIGNhbikgfSksCgkJCWY6IHNoeSgi5omT5byA5paH5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaJk+W8gCJdKGV2ZW50LCBjYW4pIH0pLAoJCQlyOiBzaHkoIuaJp+ihjOWRveS7pCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uW2NsaS5FWEVDXShldmVudCwgY2FuKSB9KSwKCQkJdjogc2h5KCLmuLLmn5PnlYzpnaIiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbltjbGkuU0hPV10oZXZlbnQsIGNhbikgfSksCgkJCXg6IHNoeSgi5YWz6Zet5qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uX3RhYi5fY2xvc2UoKSB9KSwKCgkJCWg6IHNoeSgi5omT5byA5bem6L655qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbmV4dCA9IGNhbi5fdGFiLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkgfSksCgkJCWw6IHNoeSgi5omT5byA5Y+z6L655qCH562+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbmV4dCA9IGNhbi5fdGFiLm5leHRTaWJsaW5nOyBuZXh0ICYmIG5leHQuY2xpY2soKSB9KSwKCQkJajogc2h5KCLlkJHkuIvmu5rliqgiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQlpZiAoY2FuLnVpLmNvbnRlbnQgIT0gY2FuLnVpLl9jb250ZW50KSB7CgkJCQkJY2FuLnVpLmNvbnRlbnQuY29udGVudFdpbmRvdy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCArPSAxNgoJCQkJfSBlbHNlIHsKCQkJCQljYW4uY3VycmVudC5zY3JvbGwoMSkKCQkJCX0KCQkJfSksCgkJCWs6IHNoeSgi5ZCR5LiK5rua5YqoIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQkJaWYgKGNhbi51aS5jb250ZW50ICE9IGNhbi51aS5fY29udGVudCkgewoJCQkJCWNhbi51aS5jb250ZW50LmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgLT0gMTYKCQkJCX0gZWxzZSB7CgkJCQkJY2FuLmN1cnJlbnQuc2Nyb2xsKC0xKQoJCQkJfQoJCQl9KSwKCQkJSjogc2h5KCLlkJHkuIvmu5rlsY8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC53aW5kb3coKS0zKSB9KSwKCQkJSzogc2h5KCLlkJHkuIrmu5rlsY8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5jdXJyZW50LnNjcm9sbCgtY2FuLmN1cnJlbnQud2luZG93KCkrMykgfSksCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsIGxpc3Q6IFsi5pCc57SiIiwgIuaJk+W8gCJdLAoJX3RyYW5zOiB7c291cmNlOiAi5rqQ56CBIiwgbW9kdWxlOiAi5qih5Z2XIiwgZHJlYW1zOiAi56m66Ze0IiwgbG9hZDogIuWKoOi9vSIsIGxpbms6ICLpk77mjqUiLCB3aWR0aDogIuWuveW6piIsIGhlaWdodDogIumrmOW6piIsIHdlYnNpdGU6ICLnvZHpobUifSwKCSLmkJzntKIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW21kYi5OQU1FLCBbY3R4LkFDVElPTiwgbmZzLlRBR1MsIG5mcy5HUkVQLCBjbGkuTUFLRV1dLCBmdW5jdGlvbihkYXRhKSB7CgkJCWNhbi51aS5zZWFyY2guVXBkYXRlKHt9LCBbY3R4LkFDVElPTiwgZGF0YS5hY3Rpb24sIGRhdGEubmFtZV0pCgkJfSkKCX0sCgki5omT5byAIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtuZnMuRklMRV0sIGZ1bmN0aW9uKGxpc3QpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGlzdFswXSkgfSkKCX0sCglzZXNzOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmV4cG9ydC5zZXNzKGNhbiksIGNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4pIH0sCglsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIGZpbGUgPSBjYW4uYmFzZS5QYXRoKCIvcmVxdWlyZS8iLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJZGVsZXRlKFZvbGNhbm9zLm1ldGEuY2FjaGVbZmlsZV0pLCBldmFsKCJcbl9jYW5fbmFtZSA9IFwiIitmaWxlKyJcIlxuIitjYW4ub25leHBvcnQuY29udGVudChjYW4pKyJcbl9jYW5fbmFtZSA9IFwiXCJcbmNvbnNvbGUubG9nKFwib25jZVwiKSIpCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLlJFTkRFUiwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5wcm9maWxlKGNhbiwgbXNnKQoJCX0pCgl9LAoJc2hvdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucmVxdWVzdChldmVudCwge190b2FzdDogIua4suafk+S4rS4uLiJ9KQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKGNhbi5PcHRpb24obmZzLkZJTEUpLCAiLmpzIikpIHsKCQkJdmFyIGZpbGUgPSBjYW4uYmFzZS5QYXRoKCIvcmVxdWlyZS8iLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgY2FuLk9wdGlvbihuZnMuRklMRSkpCgkJCWRlbGV0ZShWb2xjYW5vcy5tZXRhLmNhY2hlW2ZpbGVdKSwgZXZhbCgiXG5fY2FuX25hbWUgPSBcIiIrZmlsZSsiXCJcbiIrY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSsiXG5fY2FuX25hbWUgPSBcIlwiXG5jb25zb2xlLmxvZyhcIm9uY2VcIikiKQoJCX0KCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuUkVOREVSLCBbY2FuLnBhcnNlLCBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgY2FuLk9wdGlvbihuZnMuUEFUSCldLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uaW1wb3J0LnByb2ZpbGUoY2FuLCBtc2cpCgkJfSkKCX0sCglleGVjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCB7X3RvYXN0OiAi5omn6KGM5LitLi4uIiwgInNvbWUiOiAicnVuIn0pCgkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkVOR0lORSwgW2Nhbi5wYXJzZSwgY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7CgkJCWNhbi5vbmltcG9ydC5kaXNwbGF5KGNhbiwgbXNnKQoJCX0pCgl9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9yb290Ll90YXJnZXQsICIuaW5wdXQuZmxvYXQiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBjYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fc3RhdHVzLCAibGVnZW5kLnNlbGVjdCIsIGZ1bmN0aW9uKGl0ZW0pIHsgcmV0dXJuIGl0ZW0uY2xpY2soKSwgaXRlbSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgoJCWlmIChjYW4udWkuZGlzcGxheS5zdHlsZS5kaXNwbGF5ID09ICIiKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLmRpc3BsYXkpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJCWlmIChjYW4udWkucHJvZmlsZS5zdHlsZS5kaXNwbGF5ID09ICIiKSB7IHJldHVybiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2ZpbGUpLCBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfQoJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJfSwKCWJhY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLmhpc3RvcnkucG9wKCk7IHZhciBsYXN0ID0gY2FuLmhpc3RvcnkucG9wKCkKCQlsYXN0ICYmIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbGFzdC5wYXRoLCBsYXN0LmZpbGUsIGxhc3QubGluZSkKCQljYW4uU3RhdHVzKCLot7PovazmlbAiLCBjYW4uaGlzdG9yeS5sZW5ndGgpCgl9LAoKCXNjcm9sbExpbmU6IGZ1bmN0aW9uKGNhbiwgY291bnQpIHsgdmFyIHNpemUgPSAyMDsgY2FuLmN1cnJlbnQuc2Nyb2xsKGNvdW50KnNpemUpIH0sCglhcHBlbmRMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7CgkJdmFyIHVpID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmNvbnRlbnQsIFt7dHlwZTogaHRtbC5UUiwgbGlzdDogWwoJCQl7dmlldzogWyJsaW5lIHVuc2VsZWN0YWJsZSIsIGh0bWwuVEQsICsrY2FuLm1heF0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCB1aS50cikKCQkJfSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbmFjdGlvbi5mYXZvckxpbmUoY2FuLCB1aS50ZXh0LmlubmVyVGV4dCkKCQkJfX0sCgoJCQl7dmlldzogW2h0bWwuVEVYVCwgaHRtbC5URF0sIGlubmVyOiBjYW4ub25zeW50YXguX3BhcnNlKGNhbiwgdmFsdWUpLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgdWkudHIpCgoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJdmFyIHMgPSBkb2N1bWVudC5nZXRTZWxlY3Rpb24oKS50b1N0cmluZygpLCBzdHIgPSB1aS50ZXh0LmlubmVyVGV4dAoJCQkJdmFyIGJlZ2luID0gc3RyLmluZGV4T2YocyksIGVuZCA9IGJlZ2luK3MubGVuZ3RoCgoJCQkJZm9yICh2YXIgaSA9IGJlZ2luOyBpID49IDA7IGktLSkgewoJCQkJCWlmIChzdHJbaV0ubWF0Y2goL1thLXpBLVowLTlfLl0vKSkgeyBzID0gc3RyLnNsaWNlKGksIGVuZCkgfSBlbHNlIHsgYnJlYWsgfQoJCQkJfQoKCQkJCWlmIChzLmluZGV4T2YoImtpdC4iKSA9PSAwKSB7IHMgPSBzLnJlcGxhY2UoImtpdC4iLCAidG9vbGtpdHMuIikgfQoJCQkJaWYgKHMuaW5kZXhPZihpY2UuUFQpID09IDApIHsgcyA9IHMuc2xpY2UoMSkgfQoJCQkJY2FuLm9uYWN0aW9uLnNlYXJjaExpbmUoZXZlbnQsIGNhbiwgcykKCQkJfX0KCQldfV0pOyByZXR1cm4gdWkudHIKCX0sCglfZ2V0TGluZTogZnVuY3Rpb24oY2FuLCBsaW5lKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpIHsgcmV0dXJuIGl0ZW0gfSB9KVswXQoJfSwKCV9nZXRMaW5lbm86IGZ1bmN0aW9uKGNhbiwgbGluZSkgewoJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgsIGFycmF5KSB7IGlmIChpdGVtID09IGxpbmUgfHwgaW5kZXgrMSA9PSBsaW5lKSB7IHJldHVybiBpbmRleCsxIH0gfSlbMF0KCX0sCglzZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGlmICghbGluZSkgeyByZXR1cm4gcGFyc2VJbnQoY2FuLmNvcmUuVmFsdWUoY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIFtbW2h0bWwuVFIsIGh0bWwuU0VMRUNUXSwgW2h0bWwuVEQsICJsaW5lIl1dXSlbMF0sICJpbm5lclRleHQiKSkgfQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCwgYXJyYXkpIHsgaWYgKGxpbmUgPCAwIHx8IGxpbmUgPiBhcnJheS5sZW5ndGgpIHsgcmV0dXJuIH0KCQkJaWYgKCFjYW4ucGFnZS5DbGFzc0xpc3Quc2V0KGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QsIGl0ZW0gPT0gbGluZSB8fCBpbmRleCsxID09IGxpbmUpKSB7IHJldHVybiB9CgkJCXZhciBscyA9IGNhbi5maWxlLnNwbGl0KGljZS5QUykKCQkJaWYgKGxzLmxlbmd0aCA+IDQpIHsgbHMgPSBbbHMuc2xpY2UoMCwgMikuam9pbihpY2UuUFMpKyIvLi4uLyIrbHMuc2xpY2UoLTIpLmpvaW4oaWNlLlBTKV0gfQoJCQlsaW5lID0gaXRlbSwgY2FuLlN0YXR1cyhraXQuRGljdCgi5paH5Lu25ZCNIiwgbHMuam9pbihpY2UuUFMpLCAi6Kej5p6Q5ZmoIiwgY2FuLnBhcnNlLCAi5b2T5YmN6KGMIiwgY2FuLm9uZXhwb3J0LnBvc2l0aW9uKGNhbiwgY2FuLk9wdGlvbihuZnMuTElORSwgaW5kZXgrMSkpKSkKCQl9KQoKCQljYW4uYmFzZS5pc09iamVjdChsaW5lKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBsaW5lLCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLmN1cnJlbnQgPSB7CgkJCQl3aW5kb3c6IGZ1bmN0aW9uKCkgeyByZXR1cm4gcGFyc2VJbnQoY2FuLnVpLmNvbnRlbnQub2Zmc2V0SGVpZ2h0L2Nhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0KSB9LAoJCQkJc2Nyb2xsOiBmdW5jdGlvbihjb3VudCkgeyBpZiAoY291bnQpIHsgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsVG9wICs9IGNvdW50KmNhbi5jdXJyZW50LmxpbmUub2Zmc2V0SGVpZ2h0IH0KCQkJCQlyZXR1cm4gcGFyc2VJbnQoKGNhbi5jdXJyZW50LmxpbmUub2Zmc2V0VG9wLWNhbi51aS5jb250ZW50LnNjcm9sbFRvcCkvY2FuLmN1cnJlbnQubGluZS5vZmZzZXRIZWlnaHQpCgkJCQl9LAoKCQkJCXByZXY6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZS5wcmV2aW91c1NpYmxpbmcgfSwKCQkJCW5leHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGluZS5uZXh0U2libGluZyB9LAoJCQkJbGluZTogbGluZSwgdGV4dDogZnVuY3Rpb24odGV4dCkgewoJCQkJCXJldHVybiB0ZXh0ICE9IHVuZGVmaW5lZCAmJiBjYW4ub25hY3Rpb24ubW9kaWZ5TGluZShjYW4sIGxpbmUsIHRleHQpLCBpdGVtLmlubmVyVGV4dAoJCQkJfSwKCQkJfQoKCQkJaWYgKCFldmVudCkgewoJCQkJdmFyIHNjcm9sbCA9IGNhbi5jdXJyZW50LnNjcm9sbCgpOyBpZiAoc2Nyb2xsIDwgNSkgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLTUpIH0gZWxzZSB7CgkJCQkJdmFyIHdpbmRvdyA9IGNhbi5jdXJyZW50LndpbmRvdygpOyBpZiAoc2Nyb2xsID4gd2luZG93LzIpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC13aW5kb3cvMikgfQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJdmFyIHNjcm9sbCA9IGNhbi5jdXJyZW50LnNjcm9sbCgpOyBpZiAoc2Nyb2xsIDwgMykgeyBjYW4uY3VycmVudC5zY3JvbGwoc2Nyb2xsLTMpIH0gZWxzZSB7CgkJCQkJdmFyIHdpbmRvdyA9IGNhbi5jdXJyZW50LndpbmRvdygpOyBpZiAoc2Nyb2xsID4gd2luZG93LTQpIHsgY2FuLmN1cnJlbnQuc2Nyb2xsKHNjcm9sbC13aW5kb3crNCkgfQoJCQkJfQoJCQl9CgoJCQl2YXIgcHVzaCA9IGNhbi5vbmltcG9ydC5oaXN0b3J5KGNhbiwge3BhdGg6IGNhbi5PcHRpb24obmZzLlBBVEgpLCBmaWxlOiBjYW4uT3B0aW9uKG5mcy5GSUxFKSwgbGluZTogY2FuLk9wdGlvbihuZnMuTElORSksIHRleHQ6IGNhbi5jdXJyZW50LnRleHQoKX0pCgkJCWlmIChjYW4uaXNDbWRNb2RlKCkpIHsgbG9jYXRpb24uaGFzaCA9IHB1c2guZmlsZStpY2UuRlMrKHB1c2gubGluZXx8MSkgfQoJCQljYW4ub25hY3Rpb24uX3NlbGVjdExpbmUoZXZlbnQsIGNhbikKCQl9KQoJfSwKCV9zZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IH0sCglzZWFyY2hMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSkgeyBpZiAoIWNhbi51aS5zZWFyY2gpIHsgcmV0dXJuIH0KCQljYW4udWkuc2VhcmNoLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIG5mcy5UQUdTLCB2YWx1ZS50cmltKCldKQoJfSwKCWZhdm9yTGluZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsi5paH5Lu25pWwIiwgIuino+aekOWZqCIsICLmlofku7blkI0iLCAi5b2T5YmN6KGMIiwgIui3s+i9rOaVsCIsICLmoIfnrb7mlbAiXSwKCXNlc3M6IGZ1bmN0aW9uKGNhbikgeyBjYW4udXNlci5sb2NhbFN0b3JhZ2UoY2FuLCAid2ViLmNvZGUuaW5uZXIuc2VzcyIsIHsicGx1ZyI6IGNhbi5vbmV4cG9ydC5wbHVnKGNhbiksICJleHRzIjogY2FuLm9uZXhwb3J0LmV4dHMoY2FuKSwgInRhYnMiOiBjYW4ub25leHBvcnQudGFicyhjYW4pfSkgfSwKCWtleXM6IGZ1bmN0aW9uKGNhbiwgZmlsZSwgcGF0aCkgeyByZXR1cm4gKHBhdGh8fGNhbi5PcHRpb24obmZzLlBBVEgpKStpY2UuREYrKGZpbGV8fGNhbi5PcHRpb24obmZzLkZJTEUpKSB9LAoJdGFiczogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi50YWJ2aWV3LCBmdW5jdGlvbihrZXksIG1zZykgeyByZXR1cm4ga2V5K2ljZS5ERittc2cuT3B0aW9uKG5mcy5MSU5FKSB9KSB9LAoJcGx1ZzogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi50b29sa2l0KSB9LAoJZXh0czogZnVuY3Rpb24oY2FuKSB7IHJldHVybiBjYW4uY29yZS5JdGVtKGNhbi5wbHVnaW5zKSB9LAoJcG9zaXRpb246IGZ1bmN0aW9uKGNhbiwgaW5kZXgsIHRvdGFsKSB7IHRvdGFsID0gdG90YWx8fGNhbi5tYXg7IHJldHVybiAocGFyc2VJbnQoaW5kZXgpKStpY2UuUFMrcGFyc2VJbnQodG90YWwpKyIgPSAiK3BhcnNlSW50KChpbmRleCkqMTAwL3RvdGFsKSsiJSIgfSwKCWNvbnRlbnQ6IGZ1bmN0aW9uKGNhbikgeyByZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsICJ0ZC50ZXh0IiwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5pbm5lclRleHQgfSkuam9pbihpY2UuTkwpIH0sCn0pCg==",
        "usr/volcanos/plugin/local/code/inner/favor.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgewoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS5mYXZvciJ9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJY29kZS5JTk5FUiwgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgbXNnLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpLCBtc2cuT3B0aW9uKG5mcy5MSU5FKSkKCQkJCX0sCgkJCSkpKSB7IHJldHVybiB9CgoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBjbWRzLCBmdW5jdGlvbihtc2cpIHsKCQkJCXN1Yi5vbm1vdGlvbi5jbGVhcihzdWIpLCBzdWIub25hcHBlbmQudGFibGUoc3ViLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCQkJaWYgKG1zZy5hcHBlbmQubGVuZ3RoID09IDIgJiYgbXNnLmFwcGVuZFswXSA9PSBtZGIuS0VZICYmIG1zZy5hcHBlbmRbMV0gPT0gbWRiLlZBTFVFKSB7CgkJCQkJCWlmIChrZXkgPT0gbWRiLlZBTFVFKSB7IGtleSA9IGxpbmUua2V5IH0KCQkJCQl9CgkJCQkJaWYgKGtleSAhPSBjdHguQUNUSU9OKSB7IHZhbHVlID0gc3ViLnBhZ2UucmVwbGFjZShzdWIsIHZhbHVlLCBpY2UuUFdELCAiIikgfQoKCQkJCQlyZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sIGxpc3Q6IFt7dGV4dDogW3ZhbHVlLCBodG1sLkRJVl19XSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldAoJCQkJCQlpZiAoW21kYi5aT05FLCBtZGIuSURdLmluZGV4T2Yoa2V5KSA+IC0xKSB7IHJldHVybiBzdWIub25hY3Rpb24uY2hhbmdlKGV2ZW50LCBzdWIsIGtleSwgdmFsdWUpIH0KCgkJCQkJCWlmICh0YXJnZXQudGFnTmFtZSA9PSAiSU5QVVQiICYmIHRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwgbGluZSwgc3ViLk9wdGlvbigpKQoJCQkJCQkJcmV0dXJuIHN1Yi5ydW5BY3Rpb24oZXZlbnQsIHRhcmdldC5uYW1lLCBbXSwgZnVuY3Rpb24obXNnKSB7IHN1Yi5ydW4oKSB9KQoJCQkJCQl9CgoJCQkJCQlsaW5lLmxpbmUgJiYgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBsaW5lLnBhdGgsIGxpbmUuZmlsZS5yZXBsYWNlKGljZS5QV0QsICIiKSwgcGFyc2VJbnQobGluZS5saW5lKSkKCQkJCQl9fQoJCQkJfSwgc3ViLl9vdXRwdXQpLCBzdWIub25hcHBlbmQuX3N0YXR1cyhzdWIsIG1zZy5PcHRpb24oaWNlLk1TR19TVEFUVVMpKSwgY2FuLlN0YXR1cygi5qCH562+5pWwIiwgbXNnLkxlbmd0aCgpKQoJCQl9KQoJCX0sIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJfSkKfX0pCg==",
        "usr/volcanos/plugin/local/code/inner/search.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgeyB2YXIgaGlzdG9yeSA9IFtdOyBjb25zdCBTRUFSQ0ggPSAiY2FuLmNvZGUuaW5uZXIuc2VhcmNoIgoJZnVuY3Rpb24gc2hvdyhtc2csIHdvcmQpIHsgaWYgKCFtc2cpIHsgcmV0dXJuIH0gaGlzdG9yeS5wdXNoKG1zZyk7IHZhciBzdWIgPSBtc2cuX2Nhbjsgc3ViLk9wdGlvbigid29yZCIsIHdvcmR8fG1zZy5fd29yZCkKCQkhc3ViLnBhZ2UuQ2xhc3NMaXN0LmhhcyhzdWIsIHN1Yi5fbGVnZW5kLCAic2VsZWN0IikgJiYgY2FuLnVpLnNlYXJjaC5zZWxlY3QoKQoJCXN1Yi5vbm1vdGlvbi5jbGVhcihzdWIpLCBzdWIub25hcHBlbmQudGFibGUoc3ViLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCXJldHVybiB7dGV4dDogWyIiLCBodG1sLlREXSwgbGlzdDogW3t0ZXh0OiBbY2FuLnBhZ2UucmVwbGFjZShjYW4sIHZhbHVlLCBpY2UuUFdELCAiIiksIGh0bWwuRElWXX1dLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJbGluZS5saW5lICYmIGNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGxpbmUuZmlsZS5yZXBsYWNlKGljZS5QV0QsICIiKSwgcGFyc2VJbnQobGluZS5saW5lKSkKCQkJfX0KCQl9LCBzdWIuX291dHB1dCksIHN1Yi5vbmFwcGVuZC5ib2FyZChzdWIsIG1zZy5SZXN1bHQoKSksIHN1Yi5vbmFwcGVuZC5fc3RhdHVzKHN1YiwgbXNnLk9wdGlvbihpY2UuTVNHX1NUQVRVUykpLCBjYW4uU3RhdHVzKCLmoIfnrb7mlbAiLCBtc2cuTGVuZ3RoKCkpCgl9CgljYW4ub25lbmdpbmUucGx1Z2luKGNhbiwgU0VBUkNILCBzaHkoIuaQnOe0oiIsIHt9LCBbCgkJe3R5cGU6IGh0bWwuVEVYVCwgbmFtZTogIndvcmQiLCB2YWx1ZTogY2xpLk1BSU4sIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0VGFibGUoZXZlbnQsIGNhbi5zdXAsIGV2ZW50LnRhcmdldCwgZnVuY3Rpb24odHIpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCBodG1sLlRELCBmdW5jdGlvbih0ZCwgaW5kZXgpIHsgaW5kZXggPT0gMCAmJiB0ZC5jbGljaygpIH0pCgkJCQl0ci5zY3JvbGxJbnRvVmlldygpLCBjYW4uX291dHB1dC5zY3JvbGxUb3AgLT0gNjAKCQkJfSkKCQkJaWYgKGV2ZW50LmtleSA9PSBsYW5nLkVOVEVSKSB7IGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbY3R4LkFDVElPTiwgZXZlbnQuY3RybEtleT8gbmZzLkdSRVA6IG5mcy5UQUdTLCBjYW4uc3VwLk9wdGlvbigid29yZCIpXSkgfQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRVNDQVBFKSB7IGV2ZW50LnRhcmdldC5ibHVyKCkgfQoJCX19LAoJCXt0eXBlOiBodG1sLlRFWFQsIG5hbWU6ICJmaWx0ZXIiLCB2YWx1ZTogIiIsIG9ua2V5ZG93bjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCQljYW4ub25tb3Rpb24uc2VsZWN0SW5wdXRUYWJsZShldmVudCwgY2FuLnN1cCwgbnVsbCwgZXZlbnQudGFyZ2V0KQoJCQlpZiAoZXZlbnQua2V5ID09IGxhbmcuRU5URVIpIHsgY2FuLnN1cC5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBldmVudC5jdHJsS2V5PyBuZnMuR1JFUDogbmZzLlRBR1MsIGNhbi5zdXAuT3B0aW9uKCJ3b3JkIildKSB9CgkJCWlmIChldmVudC5rZXkgPT0gbGFuZy5FU0NBUEUpIHsgZXZlbnQudGFyZ2V0LmJsdXIoKSB9CgkJfX0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBuZnMuVEFHU30sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBuZnMuR1JFUH0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiBjbGkuTUFLRX0sCgkJe3R5cGU6IGh0bWwuQlVUVE9OLCBuYW1lOiAiaGlzdG9yeSJ9LAoJCXt0eXBlOiBodG1sLkJVVFRPTiwgbmFtZTogImxhc3QiLCBfdHJhbnM6ICLov5Tlm54ifSwKCV0sIGZ1bmN0aW9uKG1zZywgY21kcywgY2IpIHsgaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCSJoaXN0b3J5IiwgZnVuY3Rpb24oY21kcykgewoJCQljYW4uY29yZS5MaXN0KGNhbi5oaXN0b3J5LCBmdW5jdGlvbihpdGVtKSB7CgkJCQltc2cuUHVzaChuZnMuRklMRSwgaXRlbS5maWxlKQoJCQkJbXNnLlB1c2gobmZzLkxJTkUsIGl0ZW0ubGluZSkKCQkJCW1zZy5QdXNoKG1kYi5URVhULCBpdGVtLnRleHQpCgkJCX0pCgkJCXNob3cobXNnKQoJCX0sCgkJbmZzLlRBR1MsIGZ1bmN0aW9uKGNtZHMpIHsgbXNnLk9wdGlvbihraXQuRGljdChpY2UuTVNHX0hBTkRMRSwgaWNlLlRSVUUsIGljZS5NU0dfRklFTERTLCAiZmlsZSxsaW5lLHRleHQiKSkKCQkJY2FuLnJ1bkFjdGlvbihtc2csIG1kYi5TRUFSQ0gsIFtjYW4ucGFyc2UsIGNtZHNbMF0sIGNhbi5PcHRpb24obmZzLlBBVEgpXSwgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBtc2cuX2NhbgoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLzQpLCBzaG93KG1zZywgbXNnLl93b3JkID0gY21kc1swXSkKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5TRUxFQ1QpIHx8IHN1Yi5fbGVnZW5kLmNsaWNrKCkKCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIG1zZy5fY2FuLl9pbnB1dHNbIndvcmQiXS5fdGFyZ2V0KQoJCQl9KQoJCX0sCgkJbmZzLkdSRVAsIGZ1bmN0aW9uKGNtZHMpIHsgbXNnLk9wdGlvbihraXQuRGljdChpY2UuTVNHX0hBTkRMRSwgaWNlLlRSVUUsIGljZS5NU0dfRklFTERTLCAiZmlsZSxsaW5lLHRleHQiLCBuZnMuUEFUSCwgY2FuLk9wdGlvbihuZnMuUEFUSCkpKQoJCQljYW4ucnVuQWN0aW9uKG1zZywgbmZzLkdSRVAsIFtjbWRzWzBdXSwgZnVuY3Rpb24obXNnKSB7IHZhciBzdWIgPSBtc2cuX2NhbgoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLzQpLCBzaG93KG1zZywgbXNnLl93b3JkID0gY21kc1swXSkKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5oYXMoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5TRUxFQ1QpIHx8IHN1Yi5fbGVnZW5kLmNsaWNrKCkKCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIG1zZy5fY2FuLl9pbnB1dHNbIndvcmQiXS5fdGFyZ2V0KQoJCQl9KQoJCX0sCgkJImxhc3QiLCBmdW5jdGlvbihjbWRzKSB7IGhpc3RvcnkucG9wKCksIHNob3coaGlzdG9yeS5wb3AoKSkgfSwKCSkpKSB7IHJldHVybiB9IGNhbi5ydW4obXNnLCBjbWRzLCBmdW5jdGlvbihtc2cpIHsgc2hvdyhtc2cpIH0sIHRydWUpIH0pKQoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6IFNFQVJDSH0sIGZ1bmN0aW9uKHN1YikgewoJCWNhbi51aS5zZWFyY2ggPSBzdWIsIGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2Ioc3ViKQoJCWNhbi51aS5zZWFyY2guX3Nob3cgPSBzaG93Cgl9KQp9fSkK",
        "usr/volcanos/plugin/local/code/inner/sess.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgeyB2YXIgU0VTUyA9ICJ3ZWIuY29kZS5zZXNzIgoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6IFNFU1N9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJaWYgKGNhbi5taXNjLnJ1bkFjdGlvbihjYW4sIG1zZywgY21kcywgY2IsIGtpdC5EaWN0KAoJCQkJbmZzLlNBVkUsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgU0VTUywgW2N0eC5BQ1RJT04sIG1kYi5DUkVBVEUsCgkJCQkJCSJ0b29sIiwgSlNPTi5zdHJpbmdpZnkoY2FuLm9uZXhwb3J0LnRvb2woY2FuKSksCgkJCQkJCSJ0YWJzIiwgSlNPTi5zdHJpbmdpZnkoY2FuLm9uZXhwb3J0LnRhYnMoY2FuKSksCgkJCQkJXSwgY2IpCgkJCQl9LAoJCQkJbmZzLkxPQUQsIGZ1bmN0aW9uKGNtZHMpIHsKCQkJCQljYW4ub25pbXBvcnQuc2VzcyhjYW4sIHsKCQkJCQkJdG9vbDogSlNPTi5wYXJzZShtc2cuT3B0aW9uKCJ0b29sIikpLAoJCQkJCQl0YWJzOiBKU09OLnBhcnNlKG1zZy5PcHRpb24oInRhYnMiKSksCgkJCQkJfSkKCQkJCX0sCgkJCSkpKSB7IHJldHVybiB9CgkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCBTRVNTLCBjbWRzLCBjYikKCQl9LCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKHN1YikKCX0pCn19KQo=",
        "usr/volcanos/plugin/local/code/inner/template.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBhcmdzLCBjYikgewoJY2FuLm9uaW1wb3J0LnRvb2xraXQoY2FuLCB7aW5kZXg6ICJ3ZWIuY29kZS50ZW1wbGF0ZSJ9LCBmdW5jdGlvbihzdWIpIHsKCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBzdWIucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKQoJCQlpZiAoY2FuLm1pc2MucnVuQWN0aW9uKGNhbiwgbXNnLCBjbWRzLCBjYiwga2l0LkRpY3QoCgkJCQluZnMuREVGUywgZnVuY3Rpb24oY21kcykgewoJCQkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGNhbi5iYXNlLk9iaihtc2cuT3B0aW9uKCJhcmdzIil8fCJbXSIpLCBmdW5jdGlvbihkYXRhKSB7CgkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCk7IGNhbi5jb3JlLkl0ZW0oZGF0YSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBtc2cuT3B0aW9uKGtleSwgdmFsdWUpIH0pCgkJCQkJCWNhbi5ydW5BY3Rpb25Db21tYW5kKGV2ZW50LCAid2ViLmNvZGUudGVtcGxhdGUiLCBbbmZzLkRFRlNdLmNvbmNhdChjbWRzKSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQkJCQkJCWNhbi5vbmltcG9ydC5wcm9qZWN0KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCkpCgkJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKCJtYWluIiksICIiLCBmdW5jdGlvbigpIHsKCQkJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBjbWRzWzFdLCAxLCBmdW5jdGlvbigpIHt9KQoJCQkJCQkJfSwgdHJ1ZSkKCQkJCQkJfSkKCQkJCQl9KQoJCQkJfQoJCQkpKSkgeyByZXR1cm4gfQoJCQljYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgIndlYi5jb2RlLnRlbXBsYXRlIiwgY21kcywgY2IpCgkJfSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgl9KQp9fSkK",
        "usr/volcanos/plugin/local/code/snippet.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKQoJCWlmIChtc2cuT3B0aW9uKCJjb250ZW50IikpIHsKCQkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogIndlYi5jb2RlLnZpbWVyIiwgc3R5bGU6ICJmdWxsIn0sIGZ1bmN0aW9uKHN1YikgewoJCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyB2YXIgcmVzID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJCQkJaWYgKGNtZHNbMV0gPT0gInBsdWdpbiIpIHsKCQkJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgInZpbWVyIiwgY21kcywgY2IpCgkJCQkJCXJldHVybgoJCQkJCX0KCQkJCQlpZiAoY21kc1sxXSA9PSAibWFpbi5nbyIpIHsgcmVzLkVjaG8obXNnLk9wdGlvbigiY29udGVudCIpKQoJCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLnN1YiAmJiBjYW4uc3ViLm9uYWN0aW9uWyLpobnnm64iXSh7fSwgY2FuLnN1YikgfSkKCQkJCQl9CgkJCQkJY2IocmVzKSwgY2FuLnN1YiA9IGNhbi5jb3JlLlZhbHVlKHN1YiwgIl9vdXRwdXRzLi0xIikKCQkJCX0KCQkJfSwgY2FuLl9vdXRwdXQpCgkJCXJldHVybgoJCX0KCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpCgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCX0sCglydW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG1zZykgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGljZS5SVU4sIFsiZ28iLCAiaGkuZ28iLCBjYW4uc3ViLm9uZXhwb3J0LmNvbnRlbnQoY2FuLnN1YildLCBmdW5jdGlvbihtc2cpIHsKCQkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJCX0pCgl9LAp9KQo=",
        "usr/volcanos/plugin/local/code/vimer.css": "ZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50IHsKCWJhY2tncm91bmQtY29sb3I6IzAwMDAwMDAwOyBjb2xvcjojMDAwMDAwMDA7IGZvbnQtc2l6ZToxZW07IGZvbnQtZmFtaWx5Om1vbm9zcGFjZTsKCXBhZGRpbmc6MDsgcGFkZGluZy1sZWZ0OjEycHg7IGJvcmRlcjpub25lOyBvdXRsaW5lOm5vbmU7IG1hcmdpbjowOyBtYXJnaW4tdG9wOi0zcHg7CiAJaGVpZ2h0OjIycHg7IHBvc2l0aW9uOmFic29sdXRlOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5ub3JtYWwgeyBjYXJldC1jb2xvcjpncmF5OyB9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgaW5wdXQuY3VycmVudC5pbnNlcnQgeyBjYXJldC1jb2xvcjp5ZWxsb3c7IH0KCmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHsKCWhlaWdodDoyMHB4OyBwb3NpdGlvbjphYnNvbHV0ZTsgbGVmdDozMnB4OyBtYXJnaW4tdG9wOjIwcHg7CglkaXNwbGF5Om5vbmU7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUuaW5zZXJ0IHsKCWRpc3BsYXk6YmxvY2s7Cn0KZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MS4xcmVtOyBjb2xvcjojZjBmOGZmMDA7IG1hcmdpbi1sZWZ0OjVweDsgZmxvYXQ6bGVmdDsKfQpmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZSB7CgliYWNrZ3JvdW5kOmxpZ2h0Ymx1ZTsgbWF4LWhlaWdodDo0MDBweDsgbWF4LXdpZHRoOjgwMHB4OyBvdmVyZmxvdzphdXRvOyBkaXNwbGF5OmJsb2NrOyBmbG9hdDpsZWZ0Owp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGggewoJZGlzcGxheTpub25lOwp9CmZpZWxkc2V0LnZpbWVyPmRpdi5vdXRwdXQgZGl2LmNvbXBsZXRlIHRhYmxlLmNvbnRlbnQgdGQgewoJZm9udC1zaXplOjEuMXJlbTsKfQoKYm9keS5zaW1wbGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBkaXYuY29tcGxldGUgZGl2LnByZSB7Cglmb250LXNpemU6MXJlbTsKfQpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGRpdi5jb21wbGV0ZSB0YWJsZS5jb250ZW50IHRkIHsKCWZvbnQtc2l6ZToxcmVtOwp9Cgpib2R5LnNpbXBsZSBmaWVsZHNldC52aW1lcj5kaXYub3V0cHV0IGlucHV0LmN1cnJlbnQgewogCW1hcmdpbi10b3A6MXB4Owp9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lmluc2VydCB7IGNhcmV0LWNvbG9yOmJsYWNrOyB9CmJvZHkud2hpdGUgZmllbGRzZXQudmltZXI+ZGl2Lm91dHB1dCBpbnB1dC5jdXJyZW50Lm5vcm1hbCB7IGNhcmV0LWNvbG9yOmxpZ2h0Z3JheTsgfQoKZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5saXN0IGRpdi5pdGVtIHsgcGFkZGluZzo1cHg7IGZsb2F0OmxlZnQ7IGNsZWFyOm5vbmU7IH0KZGl2LnByb2plY3QgZGl2LnpvbmUuY3JlYXRlPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0K",
        "usr/volcanos/plugin/local/code/vimer.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucmVxdWlyZShbImlubmVyLmpzIl0sIGZ1bmN0aW9uKGNhbikgeyBjYW4ub25pbXBvcnQuaW5uZXJfaW5pdChjYW4sIG1zZywgZnVuY3Rpb24oKSB7IGNhbi51bmRvID0gW10sIGNhbi5yZWRvID0gW10KCQkJY2FuLm9ua2V5bWFwLl9idWlsZChjYW4pLCBjYW4ub25rZXltYXAuX3BsdWdpbih7fSwgY2FuKQoJCQljYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQl9LCB0YXJnZXQpIH0gLCBmdW5jdGlvbihjYW4sIG5hbWUsIHN1YikgeyBuYW1lID09IGNoYXQuT05JTVBPUlQgJiYgKGNhbi5vbmltcG9ydC5pbm5lcl9pbml0ID0gc3ViLl9pbml0KQoJCQlpZiAobmFtZSA9PSBjaGF0Lk9OQUNUSU9OKSB7IGNhbi5fdHJhbnMgPSBjYW4uYmFzZS5Db3B5KGNhbi5fdHJhbnN8fHt9LCBzdWIuX3RyYW5zKSB9CgkJCWlmIChuYW1lID09IGNoYXQuT05LRVlNQVApIHsgY2FuLmNvcmUuSXRlbShzdWIuX21vZGUsIGZ1bmN0aW9uKG1vZGUsIHZhbHVlKSB7CgkJCQl2YXIgbGlzdCA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXSA9IGNhbi5vbmtleW1hcC5fbW9kZVttb2RlXXx8e30KCQkJCWNhbi5jb3JlLkl0ZW0odmFsdWUsIGZ1bmN0aW9uKGtleSwgY2IpIHsgbGlzdFtrZXldID0gbGlzdFtrZXldfHxjYiB9KQoJCQl9KSB9CgkJfSkKCX0sCglfaW5wdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LnBhcmVudE5vZGUsIFsKCQkJe3ZpZXc6IFsiY3VycmVudCIsIGh0bWwuSU5QVVRdLCBzcGVsbGNoZWNrOiBmYWxzZSwgb25rZXlkb3duOiBmdW5jdGlvbihldmVudCkgeyBpZiAoZXZlbnQubWV0YUtleSkgeyByZXR1cm4gfQoJCQkJaWYgKGV2ZW50LmN0cmxLZXkgJiYgY2FuLm9uYWN0aW9uLl9jb21wbGV0ZShldmVudCwgY2FuKSkgeyByZXR1cm4gfQoJCQkJY2FuLl9rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCBjYW4ubW9kZSsoZXZlbnQuY3RybEtleT8gIl9jdHJsIjogIiIpLCBjYW4uX2tleWxpc3QsIGNhbi51aS5jdXJyZW50KQoJCQkJY2FuLm1vZGUgPT0gImluc2VydCIgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUpIH0sIDEwKQoJCQkJY2FuLm1vZGUgPT0gIm5vcm1hbCIgJiYgY2FuLlN0YXR1cygi5oyJ6ZSuIiwgY2FuLl9rZXlsaXN0LmpvaW4oIiIpKQoJCQkJY2FuLm1vZGUgPT0gIm5vcm1hbCIgJiYgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCX0sIG9ua2V5dXA6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmFjdGlvbi5fY29tcGxldGUoZXZlbnQsIGNhbikKCgkJCX0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pCgoJCQl9fSwge3ZpZXc6IFsiY29tcGxldGUiXX0sCgkJXSk7IGNhbi51aS5jdXJyZW50ID0gdWkuY3VycmVudCwgY2FuLnVpLmNvbXBsZXRlID0gdWkuY29tcGxldGUKCX0sCglwcm9qZWN0OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsKCQljYW4ub25pbXBvcnQuem9uZShjYW4sIFsKCQkJY2FuLmlzQ21kTW9kZSgpICYmIHtuYW1lOiAiY3JlYXRlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmFjdGlvbi5saXN0LCB0YXJnZXQpIH19LAoJCQl7bmFtZTogInNvdXJjZSIsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQsIHpvbmUpIHsgdmFyIHRvdGFsID0gMAoJCQkJZnVuY3Rpb24gc2hvdyhwYXRoLCB0YXJnZXQpIHsgY2FuLnJ1bihjYW4ucmVxdWVzdCh7fSwge2Rpcl9yb290OiBwYXRoLCBkaXJfZGVlcDogdHJ1ZX0pLCBbaWNlLlBXRF0sIGZ1bmN0aW9uKG1zZykgeyB2YXIgbGlzdCA9IG1zZy5UYWJsZSgpCgkJCQkJY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4uT3B0aW9uKG5mcy5GSUxFKS5pbmRleE9mKGl0ZW0ucGF0aCkgPT0gMCkgeyBpdGVtLmV4cGFuZCA9IHRydWUgfQoJCQkJCQlpdGVtLl9pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IHRhcmdldC5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHsKCQkJCQkJCSJ0cmFzaCI6IGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uX3J1bihldmVudCwgY2FuLCBuZnMuVFJBU0gsIFtjYW4uYmFzZS5QYXRoKHBhdGgsIGl0ZW0ucGF0aCldKSB9LAoJCQkJCQkJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5vbmFjdGlvbltidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbikgfSwKCQkJCQkJfSwgWyJ0cmFzaCJdKSB9IH0KCQkJCQl9KQoJCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgbGlzdCwgbmZzLlBBVEgsIGljZS5QUywgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBwYXRoLCBpdGVtLnBhdGgpIC8vIOaYvuekuuaWh+S7tgoJCQkJCX0sIHRhcmdldCksIGNhbi5TdGF0dXMoIuaWh+S7tuaVsCIsIHRvdGFsICs9IG1zZy5MZW5ndGgoKSkKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK3RvdGFsKyIgaXRlbSJ9KQoJCQkJfSwgdHJ1ZSkgfSBpZiAocGF0aC5sZW5ndGggPT0gMSkgeyByZXR1cm4gc2hvdyhwYXRoWzBdLCB0YXJnZXQpIH0KCgkJCQljYW4ub25pbXBvcnQuem9uZShjYW4sIGNhbi5jb3JlLkxpc3QocGF0aCwgZnVuY3Rpb24ocGF0aCkgeyByZXR1cm4ge25hbWU6IHBhdGgsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgc2hvdyhwYXRoLCB0YXJnZXQpIH19IH0pLCB0YXJnZXQpCgkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdGFyZ2V0LnByZXZpb3VzU2libGluZy5pbm5lckhUTUwgPSAiIiB9KQoJCQl9fSwKCQkJe25hbWU6ICJwbHVnaW4iLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciB0b3RhbCA9IDAKCQkJCWNhbi5vbmltcG9ydC50cmVlKGNhbiwgY2FuLmNvcmUuSXRlbShjYW4ub25lbmdpbmUucGx1Z2luLm1ldGEsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdG90YWwrKywge2luZGV4OiBjYW4uYmFzZS50cmltUHJlZml4KGtleSwgImNhbi4iKX0gfSksIGN0eC5JTkRFWCwgaWNlLlBULCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIGNhbi5jb3JlLktleXMoImNhbiIsIGl0ZW0uaW5kZXgpLCBjdHguSU5ERVgpIC8vIOaYvuekuuaPkuS7tgoJCQkJfSwgdGFyZ2V0KQoJCQkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgem9uZS5fc2VhcmNoLCB7cGxhY2Vob2xkZXI6ICJzZWFyY2ggaW4gIit0b3RhbCsiIGl0ZW0ifSkKCQkJfX0sCgkJCXtuYW1lOiAibW9kdWxlIiwgX2luaXQ6IGZ1bmN0aW9uKHRhcmdldCwgem9uZSkgewoJCQkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwge2ZpZWxkczogY3R4LklOREVYfSksIGN0eC5DT01NQU5ELCBbbWRiLlNFQVJDSCwgY3R4LkNPTU1BTkRdLCBmdW5jdGlvbihtc2cpIHsKCQkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCB6b25lLl9zZWFyY2gsIHtwbGFjZWhvbGRlcjogInNlYXJjaCBpbiAiK21zZy5MZW5ndGgoKSsiIGl0ZW0ifSkKCQkJCQljYW4ub25pbXBvcnQudHJlZShjYW4sIG1zZy5UYWJsZSgpLCBjdHguSU5ERVgsIGljZS5QVCwgZnVuY3Rpb24oZXZlbnQsIGl0ZW0pIHsKCQkJCQkJY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgaXRlbS5pbmRleCwgY3R4LklOREVYKSAvLyDmmL7npLrmqKHlnZcKCQkJCQl9LCB0YXJnZXQpCgkJCQl9KQoJCQl9fSwKCQkJe25hbWU6ICJkcmVhbXMiLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0LCB6b25lKSB7IHZhciBjYWxsID0gYXJndW1lbnRzLmNhbGxlZQoJCQkJY2FuLnJ1bkFjdGlvbih7fSwgaWNlLlJVTiwgW3dlYi5EUkVBTV0sIGZ1bmN0aW9uKG1zZykgewoJCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHpvbmUuX3NlYXJjaCwge3BsYWNlaG9sZGVyOiAic2VhcmNoIGluICIrbXNnLkxlbmd0aCgpKyIgaXRlbSJ9KQoJCQkJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWZ1bmN0aW9uIGNhcnRlKGV2ZW50KSB7CgkJCQkJCQl2YXIgbGlzdCA9IFtdOyBzd2l0Y2ggKGl0ZW0uc3RhdHVzKSB7CgkJCQkJCQkJY2FzZSAic3RhcnQiOiBsaXN0ID0gWyJvcGVuIiwgInN0b3AiXTsgYnJlYWsKCQkJCQkJCQljYXNlICJzdG9wIjogbGlzdCA9IFsic3RhcnQiLCAidHJhc2giXTsgYnJlYWsKCQkJCQkJCX0KCQkJCQkJCWNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwge30sIGxpc3QsIGZ1bmN0aW9uKGV2ZW50LCBhY3Rpb24pIHsKCQkJCQkJCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KHt9LCBpdGVtKSwgaWNlLlJVTiwgW3dlYi5EUkVBTSwgY3R4LkFDVElPTiwgYWN0aW9uXSwgZnVuY3Rpb24obXNnKSB7CgkJCQkJCQkJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRhcmdldCksIGNhbGwodGFyZ2V0KQoJCQkJCQkJCX0pCgkJCQkJCQl9KQoJCQkJCQl9CgoJCQkJCQl2YXIgY29sb3IgPSBpdGVtLnN0YXR1cyA9PSAic3RhcnQiPyAiIjogImdyYXkiCgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBodG1sLklURU0sIGxpc3Q6IFt7dGV4dDogW2l0ZW0ubmFtZSwgaHRtbC5ESVZdLCBzdHlsZToge2NvbG9yOiBjb2xvcn0sIG9ubW91c2VlbnRlcjogY2FydGV9XSwgb25jbGljazogZnVuY3Rpb24oKSB7CgkJCQkJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBpdGVtLm5hbWUsIHdlYi5EUkVBTSkgLy8g5pi+56S656m66Ze0CgkJCQkJCX19XSkKCQkJCQl9KQoJCQkJfSkKCQkJfSwgX21lbnU6IHNoeSgiIiwgewoJCQkJImNyZWF0ZSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uZHJlYW0oZXZlbnQsIGNhbiwgImRyZWFtIikgfSwKCQkJCSJyZWZyZXNoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi51aS5kcmVhbXMucmVmcmVzaCgpIH0sCgkJCQkicHVibGlzaCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVzZXIudG9hc3RDb25maXJtKGNhbiwgbXNnLlJlc3VsdCgpLCBidXR0b24pIH0pIH0sCgkJCX0sIFsiY3JlYXRlIiwgInJlZnJlc2giLCAicHVibGlzaCJdLCBmdW5jdGlvbigpIHt9KX0sCgkJXSwgY2FuLnVpLnByb2plY3QpCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZWw6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsgY2FuLlN0YXR1cygi5qih5byPIiwgY2FuLm1vZGUgPSB2YWx1ZSkKCQljYW4ucGFnZS5zdHlsZUNsYXNzKGNhbiwgY2FuLnVpLmN1cnJlbnQsIFsiY3VycmVudCIsIGNhbi5tb2RlXSksIHZhbHVlCgkJY2FuLnBhZ2Uuc3R5bGVDbGFzcyhjYW4sIGNhbi51aS5jb21wbGV0ZSwgWyJjb21wbGV0ZSIsIGNhbi5tb2RlXSksIHZhbHVlCgl9LAoJX3BsdWdpbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX21vZGVsKGNhbiwgInBsdWdpbiIpCgkJY2FuLnVpLmN1cnJlbnQuYmx1cigpCgl9LAoJX25vcm1hbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX21vZGVsKGNhbiwgIm5vcm1hbCIpCgkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKQoJfSwKCV9pbnNlcnQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9tb2RlbChjYW4sICJpbnNlcnQiKQoJCWNhbi51aS5jdXJyZW50LmZvY3VzKCksIGNhbi51aS5jb250ZW50LnNjcm9sbExlZnQgLT0gMTAwMDAKCQljYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCgoJX21vZGU6IHsKCQlwbHVnaW46IHsKCQkJdDogc2h5KCLmt7vliqDlkb3ku6QiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvblsi5re75YqgIl0oZXZlbnQsIGNhbikgfSksCgkJCXA6IHNoeSgi5re75Yqg5o+S5Lu2IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb25bIuaPkuS7tiJdKGV2ZW50LCBjYW4pIH0pLAoJCQllOiBzaHkoIua3u+WKoOaJqeWxlSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uWyLmianlsZUiXShldmVudCwgY2FuKSB9KSwKCgkJCWk6IHNoeSgi5o+S5YWl5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25rZXltYXAuX2luc2VydChldmVudCwgY2FuKSB9KSwKCQkJbjogc2h5KCLlkb3ku6TmqKHlvI8iLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmtleW1hcC5fbm9ybWFsKGV2ZW50LCBjYW4pIH0pLAoJCQkiOiI6IHNoeSgi5bqV6KGM5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogImNsaS5zeXN0ZW0ifSwgZnVuY3Rpb24oc3ViKSB7IGNhbi50b29sa2l0WyJjbGkuc3lzdGVtIl0gPSBzdWIuc2VsZWN0KCkgfSkgfSksCgoJCQlzOiBzaHkoIuS/neWtmOaWh+S7tiIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNhdmUoZXZlbnQsIGNhbiwgInNhdmUiKSB9KSwKCQkJZDogc2h5KCLliJvlu7rnqbrpl7QiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5kcmVhbShldmVudCwgY2FuLCAiZHJlYW0iKSB9KSwKCQkJbTogc2h5KCLmt7vliqDmqKHlnZciLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5hdXRvZ2VuKGV2ZW50LCBjYW4sICJhdXRvZ2VuIikgfSksCgkJCWM6IHNoeSgi57yW6K+R6aG555uuIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uY29tcGlsZShldmVudCwgY2FuLCAiY29tcGlsZSIpIH0pLAoJCX0sCgkJbm9ybWFsX2N0cmw6IHsKCQkJZjogc2h5KCLlkJHkuIvnv7vpobUiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4pK2Nhbi5jdXJyZW50LndpbmRvdygpLTMtY2FuLmN1cnJlbnQuc2Nyb2xsKCkKCQkJCXJldHVybiBjYW4uY3VycmVudC5zY3JvbGwobGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpLCB0cnVlCgkJCX0pLAoJCQliOiBzaHkoIuWQkeS4iue/u+mhtSIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiktY2FuLmN1cnJlbnQud2luZG93KCkrMwoJCQkJcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZSksIHRydWUKCQkJfSksCgkJfSwKCQlub3JtYWw6IHsKCQkJRXNjYXBlOiBzaHkoIuWIh+aNouaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9wbHVnaW4oZXZlbnQsIGNhbikgfSksCgkJCUFycm93TGVmdDogc2h5KCLlhYnmoIflt6bnp7siLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIC0xKSB9KSwKCQkJQXJyb3dSaWdodDogc2h5KCLlhYnmoIflj7Pnp7siLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDEpIH0pLAoJCQlBcnJvd0Rvd246IHNoeSgi5YWJ5qCH5LiL56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5uZXh0KCkpIH0pLAoJCQlBcnJvd1VwOiBzaHkoIuWFieagh+S4iuenuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKSB9KSwKCgkJCSIuIjogc2h5KCLph43lpI3mk43kvZwiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgdmFyIGNiID0gY2FuLnJlZG8ucG9wKCk7IGNiICYmIGNiKCkgfSksCgkJCXU6IHNoeSgi5pKk6ZSA5pON5L2cIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IHZhciBjYiA9IGNhbi51bmRvLnBvcCgpOyBjYiAmJiBjYigpIH0pLAoJCQlKOiBzaHkoIuWQiOW5tuS4pOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgewoJCQkJdmFyIG5leHQgPSBjYW4uY3VycmVudC5uZXh0KCk7IGlmICghbmV4dCkgeyByZXR1cm4gfQoJCQkJdmFyIGxpbmUgPSBjYW4uY3VycmVudC5saW5lLCB0ZXh0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQl2YXIgcmVzdCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIG5leHQsICJ0ZC50ZXh0IilbMF0uaW5uZXJUZXh0CgkJCQljYW4uY3VycmVudC50ZXh0KHRleHQudHJpbVJpZ2h0KCkraWNlLlNQK3Jlc3QudHJpbUxlZnQoKSksIGNhbi5vbmFjdGlvbi5kZWxldGVMaW5lKGNhbiwgbmV4dCkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5tb2RpZnlMaW5lKGNhbiwgbGluZSwgdGV4dCksIGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgcmVzdCwgbGluZS5uZXh0U2libGluZykgfSkKCQkJfSksCgoJCQlIOiBzaHkoIui3s+WIsOihjOmmliIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgMCkgfSksCgkJCWg6IHNoeSgi5YWJ5qCH5bem56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAtMSkgfSksCgkJCWw6IHNoeSgi5YWJ5qCH5Y+z56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgdGFyZ2V0LCAxKSB9KSwKCQkJTDogc2h5KCLot7PliLDooYzlsL4iLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsgY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCB0YXJnZXQsIDAsIC0xKSB9KSwKCQkJajogc2h5KCLlhYnmoIfkuIvnp7siLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkgfSksCgkJCWs6IHNoeSgi5YWJ5qCH5LiK56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5wcmV2KCkpIH0pLAoKCQkJZ2c6IHNoeSgi6Lez5Yiw5p+Q6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0LCBjb3VudCkgeyByZXR1cm4gY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY291bnQpLCB0cnVlIH0pLAoJCQlHOiBzaHkoIui3s+WIsOafkOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNvdW50ID0gY291bnQ+MT8gY291bnQ6IGNhbi5tYXgpLCB0cnVlIH0pLAoJCQl6dDogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXmnIDkuIoiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktKGNvdW50PjE/IGNvdW50OiAzKSksIHRydWUgfSksCgkJCXp6OiBzaHkoIuWwhuW9k+WJjeihjOaLieWIsOWxj+W5leS4remXtCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgcmV0dXJuIGNhbi5jdXJyZW50LnNjcm9sbChjYW4uY3VycmVudC5zY3JvbGwoKS0oY291bnQgPSBjb3VudD4xPyBjb3VudDogY2FuLmN1cnJlbnQud2luZG93KCkvMikpLCB0cnVlIH0pLAoJCQl6Yjogc2h5KCLlsIblvZPliY3ooYzmi4nliLDlsY/luZXmnIDkuIsiLCBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQsIGNvdW50KSB7IHJldHVybiBjYW4uY3VycmVudC5zY3JvbGwoY2FuLmN1cnJlbnQuc2Nyb2xsKCktY2FuLmN1cnJlbnQud2luZG93KCkrKGNvdW50PjE/IGNvdW50OiA1KSksIHRydWUgfSksCgoJCQlpOiBzaHkoIuaPkuWFpeaooeW8jyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikgfSksCgkJCUk6IHNoeSgi5o+S5YWl6KGM6aaWIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgMCkgfSksCgkJCWE6IHNoeSgi5o+S5YWl5qih5byPIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMSkgfSksCgkJCUE6IHNoeSgi5o+S5YWl6KGM5bC+IiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGNhbi5vbmtleW1hcC5faW5zZXJ0KGV2ZW50LCBjYW4pLCBjYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIHRhcmdldCwgMCwgLTEpIH0pLAoJCQlvOiBzaHkoIuaPkuWFpeS4i+S4gOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCkKCQkJCXRleHQgPSB0ZXh0LnN1YnN0cigwLCB0ZXh0LmluZGV4T2YodGV4dC50cmltTGVmdCgpKSkrKHRleHQuZW5kc1dpdGgoInsiKT8iXHQiOiIiKQoJCQkJY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgdGV4dCwgY2FuLmN1cnJlbnQubmV4dCgpKSkKCQkJCWNhbi5vbmtleW1hcC5jdXJzb3JNb3ZlKGNhbiwgY2FuLnVpLmN1cnJlbnQsIDEwMDApCgkJCX0pLAoJCQlPOiBzaHkoIuaPkuWFpeS4iuS4gOihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCkKCQkJCXRleHQgPSB0ZXh0LnN1YnN0cigwLCB0ZXh0LmluZGV4T2YodGV4dC50cmltTGVmdCgpKSkrKHRleHQuZW5kc1dpdGgoIn0iKT8iXHQiOiIiKQoJCQkJY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbiksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgdGV4dCwgY2FuLmN1cnJlbnQubGluZSkpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCAxMDAwKQoJCQl9KSwKCgkJCXl5OiBzaHkoIuWkjeWItuW9k+WJjeihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgY2FuLl9sYXN0X3RleHQgPSBjYW4uY3VycmVudC50ZXh0KCkgfSksCgkJCWRkOiBzaHkoIuWJquWIh+W9k+WJjeihjCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIHsgdmFyIHRleHQgPSBjYW4uY3VycmVudC50ZXh0KCksIGxpbmUgPSBjYW4ub25hY3Rpb24uX2dldExpbmVubyhjYW4sIGNhbi5jdXJyZW50LmxpbmUpCgkJCQljYW4uX2xhc3RfdGV4dCA9IGNhbi5jdXJyZW50LnRleHQoKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBjYW4uY3VycmVudC5saW5lKSkKCQkJCWNhbi51bmRvLnB1c2goZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgdGV4dCwgbGluZSksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpIH0pCgkJCQl2YXIgY2FsbGVlID0gYXJndW1lbnRzLmNhbGxlZQoJCQkJY2FuLnJlZG8ucHVzaChmdW5jdGlvbigpIHsgY2FsbGVlKGV2ZW50LCBjYW4sIHRhcmdldCwgY291bnQpIH0pCgkJCX0pLAoJCQlwOiBzaHkoIueymOi0tCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQkJCXZhciBsaW5lID0gY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBjYW4uX2xhc3RfdGV4dCwgY2FuLmN1cnJlbnQubmV4dCgpKQoJCQkJY2FuLnVuZG8ucHVzaChmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLmRlbGV0ZUxpbmUoY2FuLCBsaW5lKSwgY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgbGluZS0xKSB9KQoJCQl9KSwKCQkJUDogc2h5KCLnspjotLQiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgY2FuLl9sYXN0X3RleHQsIGNhbi5jdXJyZW50LmxpbmUpCgkJCQljYW4udW5kby5wdXNoKGZ1bmN0aW9uKCkgeyBjYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIGxpbmUpLCBjYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBsaW5lKzEpIH0pCgkJCX0pLAoKCQkJczogc2h5KCLkv53lrZjmlofku7YiLCBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5zYXZlKGV2ZW50LCBjYW4sICJzYXZlIikgfSksCgkJCW06IHNoeSgi5re75Yqg5qih5Z2XIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uYXV0b2dlbihldmVudCwgY2FuLCAiYXV0b2dlbiIpIH0pLAoJCQljOiBzaHkoIue8luivkemhueebriIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLmNvbXBpbGUoZXZlbnQsIGNhbiwgImNvbXBpbGUiKSB9KSwKCQl9LAoJCWluc2VydDogewoJCQlFc2NhcGU6IHNoeSgi6YCA5Ye657yW6L6RIiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQua2V5ICE9ICJFc2NhcGUiKSB7IHJldHVybiB9CgkJCQljYW4ub25rZXltYXAuX25vcm1hbChldmVudCwgY2FuKQoJCQl9KSwKCQkJVGFiOiBzaHkoIue8qei/myIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiVGFiIikgeyByZXR1cm4gfQoJCQkJY2FuLm9ua2V5bWFwLmluc2VydFRleHQoY2FuLnVpLmN1cnJlbnQsIGljZS5UQiksIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9KSwKCQkJQmFja3NwYWNlOiBzaHkoIuWIoOmZpCIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyBpZiAoZXZlbnQua2V5ICE9ICJCYWNrc3BhY2UiKSB7IHJldHVybiB9CgkJCQlpZiAodGFyZ2V0LnNlbGVjdGlvblN0YXJ0ID4gMCkgeyByZXR1cm4gfQoJCQkJaWYgKCFjYW4uY3VycmVudC5wcmV2KCkpIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoKCQkJCXZhciByZXN0ID0gY2FuLmN1cnJlbnQudGV4dCgpCgkJCQljYW4ub25hY3Rpb24uc2VsZWN0TGluZShldmVudCwgY2FuLCBjYW4uY3VycmVudC5wcmV2KCkpCgkJCQljYW4ub25hY3Rpb24uZGVsZXRlTGluZShjYW4sIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCXZhciBwb3MgPSBjYW4uY3VycmVudC50ZXh0KCkubGVuZ3RoCgoJCQkJY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4uY3VycmVudC50ZXh0KCkrcmVzdAoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMCwgcG9zKQoJCQl9KSwKCQkJRW50ZXI6IHNoeSgi5o2i6KGMIiwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFyZ2V0KSB7IGlmIChldmVudC5rZXkgIT0gIkVudGVyIikgeyByZXR1cm4gfQoJCQkJdmFyIHJlc3QgPSBjYW4ub25rZXltYXAuZGVsZXRlVGV4dCh0YXJnZXQsIHRhcmdldC5zZWxlY3Rpb25FbmQpLCB0ZXh0ID0gY2FuLnVpLmN1cnJlbnQudmFsdWUKCQkJCXZhciBsZWZ0ID0gdGV4dC5zdWJzdHIoMCwgdGV4dC5pbmRleE9mKHRleHQudHJpbUxlZnQoKSkpfHwodGV4dC50cmltUmlnaHQoKSA9PSAiIj8gdGV4dDogIiIpCgkJCQlpZiAodGV4dC5lbmRzV2l0aCgieyIpKSB7IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCsifSIsIGNhbi5jdXJyZW50Lm5leHQoKSksIGxlZnQgKz0gaWNlLlRCIH0KCQkJCWlmICh0ZXh0LmVuZHNXaXRoKCJbIikpIHsgY2FuLm9uYWN0aW9uLmluc2VydExpbmUoY2FuLCBsZWZ0KyJdIiwgY2FuLmN1cnJlbnQubmV4dCgpKSwgbGVmdCArPSBpY2UuVEIgfQoJCQkJaWYgKHRleHQuZW5kc1dpdGgoIigiKSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrIikiLCBjYW4uY3VycmVudC5uZXh0KCkpLCBsZWZ0ICs9IGljZS5UQiB9CgkJCQlpZiAodGV4dC5lbmRzV2l0aCgiYCIpICYmIGNhbi5iYXNlLmNvdW50KHRleHQsICJgIiklMj09MSkgeyBjYW4ub25hY3Rpb24uaW5zZXJ0TGluZShjYW4sIGxlZnQrImAiLCBjYW4uY3VycmVudC5uZXh0KCkpIH0KCgkJCQl2YXIgbGluZSA9IGNhbi5vbmFjdGlvbi5pbnNlcnRMaW5lKGNhbiwgbGVmdCtyZXN0LnRyaW1MZWZ0KCksIGNhbi5jdXJyZW50Lm5leHQoKSkKCQkJCWNhbi5jdXJyZW50LnRleHQodGV4dC50cmltUmlnaHQoKXx8dGV4dCksIGNhbi5vbmFjdGlvbi5zZWxlY3RMaW5lKGV2ZW50LCBjYW4sIGxpbmUpCgkJCQljYW4ub25rZXltYXAuY3Vyc29yTW92ZShjYW4sIGNhbi51aS5jdXJyZW50LCBsZWZ0Lmxlbmd0aCwgMCkKCQkJfSksCgkJCUFycm93VXA6IHNoeSgi5YWJ5qCH5LiK56e7IiwgZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoZXZlbnQua2V5ICE9ICJBcnJvd1VwIikgeyByZXR1cm4gfQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQucHJldigpKQoJCQl9KSwKCQkJQXJyb3dEb3duOiBzaHkoIuWFieagh+S4i+enuyIsIGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgaWYgKGV2ZW50LmtleSAhPSAiQXJyb3dEb3duIikgeyByZXR1cm4gfQoJCQkJY2FuLm9uYWN0aW9uLnNlbGVjdExpbmUoZXZlbnQsIGNhbiwgY2FuLmN1cnJlbnQubmV4dCgpKQoJCQl9KSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi5o6n5Lu25Lqk5LqSIiwgbGlzdDogW25mcy5TQVZFLCBjb2RlLkNPTVBJTEUsIGNvZGUuQVVUT0dFTiwgbmZzLlNDUklQVCwgY2hhdC5XRUJTSVRFLCB3ZWIuRFJFQU1dLAoJX3J1bjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBhcmdzLCBjYikgewoJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgYXJncywgY2J8fGZ1bmN0aW9uKG1zZykgewoJCQljYW4ub25pbXBvcnQudGFidmlldyhjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLCBtc2cuT3B0aW9uKG5mcy5GSUxFKSksIGNhbi51aS5zb3VyY2UucmVmcmVzaCgpCgkJCWNhbi51c2VyLnRvYXN0U3VjY2VzcyhjYW4sIGJ1dHRvbikKCQl9KQoJfSwKCV9ydW5zOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGNiKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKTsgY2FuLnJlcXVlc3QoZXZlbnQsIHthY3Rpb246IGJ1dHRvbn0pCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgbWV0YS5mZWF0dXJlW2J1dHRvbl0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLm9uYWN0aW9uLl9ydW4oZXZlbnQsIGNhbiwgYnV0dG9uLCBhcmdzLCBjYikKCQl9KQoJfSwKCXNhdmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ucmVxdWVzdChldmVudCwge2ZpbGU6IGNhbi5PcHRpb24obmZzLkZJTEUpLCBjb250ZW50OiBjYW4ub25leHBvcnQuY29udGVudChjYW4pfSkKCQljYW4ub25hY3Rpb24uX3J1bihldmVudCwgY2FuLCBidXR0b24sIFtjYW4ucGFyc2UsIGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uT3B0aW9uKG5mcy5QQVRIKV0pCgl9LAoJY29tcGlsZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IHZhciB0b2FzdCA9IGNhbi51c2VyLnRvYXN0UHJvY2VzcyhjYW4sICLnvJbor5HkuK0uLi4iKQoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQpLCBidXR0b24sIFtdLCBmdW5jdGlvbihtc2cpIHsgdG9hc3QuY2xvc2UoKQoJCQlpZiAobXNnLkxlbmd0aCgpID09IDApIHsgdmFyIHRvYXN0MSA9IGNhbi51c2VyLnRvYXN0UHJvY2VzcyhjYW4sICLph43lkK/kuK0uLi4iKQoJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IHRvYXN0MS5jbG9zZSgpLCBjYW4ub25hY3Rpb25bY2xpLlNIT1ddKHt9LCBjYW4pIH0sIDMwMDApCgkJCX0gZWxzZSB7IGNhbi51aS5zZWFyY2guX3Nob3cobXNnKSB9CgoJCX0pCgl9LAoJYXV0b2dlbjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5vbmFjdGlvbi5fcnVucyhldmVudCwgY2FuLCBidXR0b24sIGZ1bmN0aW9uKG1zZykgewoJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24oY2xpLk1BSU4pLCAiIiwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obmZzLkZJTEUpLCAiIiwgZnVuY3Rpb24oKSB7CgkJCQljYW4udWkuc291cmNlLnJlZnJlc2goKQoJCQl9KQoJCX0sIHRydWUpCgl9KSB9LAoJc2NyaXB0OiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX3J1bnMoY2FuLnJlcXVlc3QoZXZlbnQsIHtmaWxlOiBjYW4uYmFzZS50cmltU3VmZml4KGNhbi5PcHRpb24obmZzLkZJTEUpLCBjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKStuZnMuSlN9KSwgY2FuLCBidXR0b24pCgl9LAoJd2Vic2l0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9ydW5zKGNhbi5yZXF1ZXN0KGV2ZW50LCB7ZmlsZTogKGNhbi5iYXNlLnRyaW1TdWZmaXgoY2FuLk9wdGlvbihuZnMuRklMRSksIGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkpK25mcy5aTUwpLnNwbGl0KCIvIikucG9wKCl9KSwgY2FuLCBidXR0b24pCgl9LAoJZHJlYW06IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fcnVucyhjYW4ucmVxdWVzdChldmVudCwge25hbWU6IGNhbi5iYXNlLnRyaW1TdWZmaXgoY2FuLk9wdGlvbihuZnMuRklMRSksIGljZS5QVCtjYW4uYmFzZS5FeHQoY2FuLk9wdGlvbihuZnMuRklMRSkpKX0pLCBjYW4sIGJ1dHRvbiwgZnVuY3Rpb24obXNnKSB7IGNhbi51aS5kcmVhbXMucmVmcmVzaCgpCgkJCWNhbi5vbmltcG9ydC50YWJ2aWV3KGNhbiwgY2FuLk9wdGlvbihuZnMuUEFUSCksIG1zZy5PcHRpb24obWRiLk5BTUUpLCB3ZWIuRFJFQU0pIC8vIOaYvuekuuepuumXtAoJCQljYW4udXNlci50b2FzdFN1Y2Nlc3MoY2FuKQoJCX0pCgl9LAoJIua3u+WKoCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW2N0eC5JTkRFWF0sIGZ1bmN0aW9uKGxpc3QpIHsgY2FuLm9uaW1wb3J0LnRhYnZpZXcoY2FuLCBjYW4uT3B0aW9uKG5mcy5QQVRIKSwgbGlzdFswXSwgY3R4LklOREVYKSB9KSB9LAoJIuaPkuS7tiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbY3R4LklOREVYXSwgZnVuY3Rpb24obGlzdCkgewoJCQl2YXIgc3ViID0gY2FuLnRvb2xraXRbbGlzdFswXV07IGlmIChzdWIpIHsgc3ViLnNlbGVjdCgpOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQudG9vbGtpdChjYW4sIHtpbmRleDogbGlzdFswXX0sIGZ1bmN0aW9uKHN1YikgeyBjYW4udG9vbGtpdFtsaXN0WzBdXSA9IHN1Yi5zZWxlY3QoKSB9KQoJCX0pCgl9LAoJIuaJqeWxlSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbInVybCJdLCBmdW5jdGlvbihsaXN0KSB7CgkJCXZhciBzdWIgPSBjYW4uZXh0ZW50aW9uc1tsaXN0WzBdXTsgaWYgKHN1YikgeyBzdWIuc2VsZWN0KCk7IHJldHVybiB9CgkJCWNhbi5vbmltcG9ydC5leHRzKGNhbiwgbGlzdFswXSwgZnVuY3Rpb24oc3ViKSB7IGNhbi5leHRlbnRpb25zW2xpc3RbMF1dID0gc3ViLnNlbGVjdCgpIH0pCgkJfSkKCX0sCgoJbGlzdFRhZ3M6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyB2YXIgbGlzdCA9IFtdCgkJY2FuLmNvcmUuSXRlbShjYW4ucmVxdWVzdChldmVudCksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGtleS5pbmRleE9mKCJfIikgPT0gMCkgeyByZXR1cm4gfQoJCQlsaXN0LnB1c2goe3pvbmU6ICJtc2ciLCB0eXBlOiB0eXBlb2YgdmFsdWUsIG5hbWU6IGtleSwgdGV4dDogY2FuLmJhc2UuaXNPYmplY3QodmFsdWUpPyAiIjogKHZhbHVlKyIiKS5zcGxpdChpY2UuTkwpWzBdLAoJCQkJcGF0aDogInVzci92b2xjYW5vcy8iLCBmaWxlOiAibGliL21pc2MuanMiLCBsaW5lOiAxLAoJCQl9KQoJCX0pCgkJY2FuLmNvcmUuTGlzdChbY2FuLmJhc2UsIGNhbi5jb3JlLCBjYW4ubWlzYywgY2FuLnBhZ2UsIGNhbi51c2VyLCBjYW4ub25lbmdpbmUsIGNhbi5vbmRhZW1vbiwgY2FuLm9uYXBwZW5kLCBjYW4ub25sYXlvdXQsIGNhbi5vbm1vdGlvbiwgY2FuLm9ua2V5bWFwXSwgZnVuY3Rpb24obGliKSB7CgkJCWNhbi5jb3JlLkl0ZW0obGliLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGlmIChrZXkuaW5kZXhPZigiXyIpID09IDAgfHwgIWxpYi5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7IHJldHVybiB9CgkJCQlsaXN0LnB1c2goe3pvbmU6IGxpYi5fbmFtZSwgdHlwZTogdHlwZW9mIHZhbHVlLCBuYW1lOiBrZXksIHRleHQ6IGNhbi5iYXNlLmlzT2JqZWN0KHZhbHVlKT8gIiI6ICh2YWx1ZSsiIikuc3BsaXQoaWNlLk5MKVswXSwKCQkJCQlwYXRoOiAidXNyL3ZvbGNhbm9zLyIsIGZpbGU6IGxpYi5fcGF0aCwgbGluZTogMSwKCQkJCX0pCgkJCX0pCgkJfSkKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7dGV4dDogY2FuLmJhc2UuRm9ybWF0KGxpc3QpfSksIGJ1dHRvbikKCX0sCglfY29tcGxldGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRhcmdldCkgeyB0YXJnZXQgPSB0YXJnZXR8fGNhbi51aS5jb21wbGV0ZQoJCWlmIChldmVudCA9PSB1bmRlZmluZWQpIHsgcmV0dXJuIH0KCQl2YXIgcHJlID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoMCwgY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpCgkJdmFyIGVuZCA9IGNhbi51aS5jdXJyZW50LnZhbHVlLnNsaWNlKGNhbi51aS5jdXJyZW50LnNlbGVjdGlvblN0YXJ0KQoJCXZhciB0eXBlID0gY2FuLmNvcmUuU3BsaXQocHJlKS5wb3AoKXx8IiIKCQl2YXIgbmFtZSA9IGNhbi5jb3JlLlNwbGl0KHR5cGUsICIiLCBpY2UuUFQpLnBvcCgpfHwiIgoJCXR5cGUgPSBjYW4uYmFzZS50cmltU3VmZml4KHR5cGUsIG5hbWUpCgkJdHlwZSA9IGNhbi5iYXNlLnRyaW1TdWZmaXgodHlwZSwgaWNlLlBUKQoJCWNvbnN0IFBSRSA9ICJwcmUiCgoJCWZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHt0eXBlOiB0eXBlLCBuYW1lOiBuYW1lLCB0ZXh0OiBwcmUsIGZpbGU6IGNhbi5PcHRpb24obmZzLkZJTEUpfSkKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgImNvbXBsZXRlIiwgW10sIGZ1bmN0aW9uKG1zZykgeyBjYW4udWkuY29tcGxldGUuX21zZyA9IG1zZwoJCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAwICYmIGNhbi5iYXNlLkV4dChjYW4uT3B0aW9uKG5mcy5GSUxFKSkgPT0gbmZzLkpTKSB7CgkJCQkJbXNnLm5hbWUgPSBbXSwgbXNnLnR5cGUgPSBbXSwgbXNnLnRleHQgPSBbXQoJCQkJCWNhbi5jb3JlLkl0ZW0oY2FuLmNvcmUuVmFsdWUod2luZG93LCB0eXBlKSwgZnVuY3Rpb24oaywgdikgewoJCQkJCQltc2cuUHVzaChtZGIuTkFNRSwgayksIG1zZy5QdXNoKG1kYi5UWVBFLCB0eXBlb2YgdikKCQkJCQkJdHJ5IHsgbXNnLlB1c2gobWRiLlRFWFQsIHYpIH0gY2F0Y2ggKGUpIHsgbXNnLlB1c2gobWRiLlRFWFQsICIiKSB9CgkJCQkJfSkKCQkJCQltc2cuYXBwZW5kID0gW21kYi5OQU1FLCBtZGIuVFlQRSwgbWRiLlRFWFRdCgkJCQl9CgkJCQltc2cuTGVuZ3RoKCkgPT0gMCAmJiBwcmUudHJpbSgpID09ICIiICYmIGNhbi5jb3JlLkl0ZW0oY2FuLmNvcmUuVmFsdWUoY2FuLm9uc3ludGF4W2Nhbi5wYXJzZV0sIGNvZGUuS0VZV09SRCksIGZ1bmN0aW9uKGspIHsKCQkJCQltc2cuUHVzaChtZGIuTkFNRSwgaykKCQkJCX0pCgkJCQkKCQkJCWNhbi5wYWdlLkFwcGVuZHMoY2FuLCB0YXJnZXQsIFt7dmlldzogW1BSRSwgaHRtbC5ESVYsIHByZV19XSkKCQkJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgpIHsgcmV0dXJuIHt0ZXh0OiBbdmFsdWUsIGh0bWwuVERdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCXZhciBsZWZ0ID0gY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoMCwgY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uU3RhcnQpK3ZhbHVlCgkJCQkJY2FuLmN1cnJlbnQudGV4dChjYW4udWkuY3VycmVudC52YWx1ZSA9IGxlZnQrY2FuLnVpLmN1cnJlbnQudmFsdWUuc2xpY2UoY2FuLnVpLmN1cnJlbnQuc2VsZWN0aW9uRW5kKSkKCQkJCQljYW4udWkuY3VycmVudC5mb2N1cygpLCBjYW4udWkuY29udGVudC5zY3JvbGxMZWZ0IC09IDEwMDAwLCBjYW4udWkuY3VycmVudC5zZXRTZWxlY3Rpb25SYW5nZShsZWZ0Lmxlbmd0aCwgbGVmdC5sZW5ndGgpCgkJCQl9fSB9LCB0YXJnZXQpCgkJCX0pCgkJfQoKCQlmdW5jdGlvbiBmaWx0ZXIoKSB7CgkJCXJldHVybiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAgaHRtbC5UUl0sIGZ1bmN0aW9uKHRyKSB7CgkJCQlpZiAoIWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCB0ciwgaHRtbC5ISURFLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQpIHsKCQkJCQlpZiAodGQuaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihjYW4uYmFzZS50cmltU3VmZml4KChuYW1lID09IGljZS5QVD8gdHlwZTogbmFtZSkudG9Mb3dlckNhc2UoKSwgIigiKSkgPT0gMCkgeyByZXR1cm4gdGQgfQoJCQkJfSkubGVuZ3RoID09IDApKSB7IHJldHVybiB0ciB9CgkJCX0pLmxlbmd0aCA+IChuYW1lID09IGljZS5QVD8gMTogMCkKCQl9CgoJCWZ1bmN0aW9uIHNlbGVjdChpbmRleCwgdG90YWwpIHsgaW5kZXggPSAoaW5kZXgrKHRvdGFsKzEpKSUodG90YWwrMSkKCQkJaWYgKGluZGV4ID09IHRvdGFsKSB7IGNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKSkgfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIFtodG1sLlRCT0RZLCAidHI6bm90KC5oaWRlKSJdLCBmdW5jdGlvbih0ciwgaSkgeyBpZiAoY2FuLnBhZ2UuQ2xhc3NMaXN0LnNldChjYW4sIHRyLCBodG1sLlNFTEVDVCwgaSA9PSBpbmRleCkpIHsKCQkJCWNhbi5jdXJyZW50LnRleHQoY2FuLnVpLmN1cnJlbnQudmFsdWUgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKStjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URClbMF0uaW5uZXJUZXh0KQoJCQl9IH0pCgkJCXJldHVybiBpbmRleAoJCX0KCgkJaWYgKGV2ZW50LmN0cmxLZXkpIHsKCQkJaWYgKGV2ZW50LnR5cGUgPT0gImtleXVwIikgewoJCQkJdmFyIHRvdGFsID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBbaHRtbC5UQk9EWSwgInRyOm5vdCguaGlkZSkiXSkubGVuZ3RoCgkJCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQkJCWNhc2UgIm4iOiBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gc2VsZWN0KGNhbi51aS5jb21wbGV0ZS5faW5kZXgrMSwgdG90YWwpOyBicmVhawoJCQkJCWNhc2UgInAiOiBjYW4udWkuY29tcGxldGUuX2luZGV4ID0gc2VsZWN0KGNhbi51aS5jb21wbGV0ZS5faW5kZXgtMSwgdG90YWwpOyBicmVhawoJCQkJCWRlZmF1bHQ6IHJldHVybiBmYWxzZQoJCQkJfQoJCQkJcmV0dXJuIGNhbi5vbmtleW1hcC5wcmV2ZW50KGV2ZW50KQoJCQl9CgkJCXJldHVybgoJCX0KCgkJY2FuLmN1cnJlbnQubGluZS5hcHBlbmRDaGlsZChjYW4udWkuY29tcGxldGUpLCBjYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5jb21wbGV0ZSwgaHRtbC5MRUZULCBjYW4udWkuY3VycmVudC5vZmZzZXRMZWZ0LTEsIGh0bWwuTUFSR0lOX1RPUCwgY2FuLnVpLmN1cnJlbnQub2Zmc2V0SGVpZ2h0KzQpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCAiZGl2LnByZSIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5pbm5lclRleHQgPSBjYW4udWkuY29tcGxldGUuX21zZy5PcHRpb24oUFJFKXx8cHJlIH0pCgkJaWYgKHByZSA9PSAiIikgeyByZXR1cm4gdXBkYXRlKHRhcmdldCkgfQoKCQlzd2l0Y2ggKGV2ZW50LmtleSkgewoJCQljYXNlIGh0bWwuRU5URVI6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGh0bWwuVEFCOiB1cGRhdGUodGFyZ2V0KTsgYnJlYWsKCQkJY2FzZSBpY2UuU1A6IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCQljYXNlIGljZS5QVDogdXBkYXRlKHRhcmdldCk7IGJyZWFrCgkJCWRlZmF1bHQ6IGZpbHRlcigpIHx8IHVwZGF0ZSh0YXJnZXQpOyBicmVhawoJCX0gY2FuLnVpLmNvbXBsZXRlLl9pbmRleCA9IC0xCgl9LAoKCV9zZWxlY3RMaW5lOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLmN1cnJlbnQubGluZSwgInRkLnRleHQiLCBmdW5jdGlvbih0ZCkgeyBjYW4udWkuY3VycmVudC52YWx1ZSA9IHRkLmlubmVyVGV4dAoJCQljYW4uY3VycmVudC5saW5lLmFwcGVuZENoaWxkKGNhbi51aS5jdXJyZW50KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY3VycmVudCwgaHRtbC5MRUZULCB0ZC5vZmZzZXRMZWZ0LTEsIGh0bWwuV0lEVEgsIGNhbi51aS5jb250ZW50LnN0eWxlLndpZHRoKQoJCQlpZiAoZXZlbnQpIHsKCQkJCWlmIChldmVudC50eXBlID09ICJjbGljayIgJiYgY2FuLm1vZGUgIT0gImluc2VydCIpIHsgY2FuLm9ua2V5bWFwLl9pbnNlcnQoZXZlbnQsIGNhbikKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgY2FuLm9uYWN0aW9uLl9jb21wbGV0ZShldmVudCwgY2FuKSB9KQoJCQkJfQoJCQkJY2FuLnVpLmN1cnJlbnQuZm9jdXMoKSwgY2FuLnVpLmNvbnRlbnQuc2Nyb2xsTGVmdCAtPSAxMDAwMAoJCQkJY2FuLm9ua2V5bWFwLmN1cnNvck1vdmUoY2FuLCBjYW4udWkuY3VycmVudCwgMCwgKGV2ZW50Lm9mZnNldFgpLzEyLTEpCgkJCX0KCQl9KQoJfSwKCXJlcmFua0xpbmU6IGZ1bmN0aW9uKGNhbiwgdmFsdWUpIHsgY2FuLm1heCA9IDAKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJY2FuLm1heCsrLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCAidGQubGluZSIsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5pbm5lclRleHQgPSBpbmRleCsxIH0pCgkJfSkKCX0sCglpbnNlcnRMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlLCBiZWZvcmUpIHsgdmFyIGxpbmUgPSBjYW4ub25hY3Rpb24uYXBwZW5kTGluZShjYW4sIHZhbHVlKQoJCWJlZm9yZSAmJiBjYW4udWkuY29udGVudC5pbnNlcnRCZWZvcmUobGluZSwgY2FuLm9uYWN0aW9uLl9nZXRMaW5lKGNhbiwgYmVmb3JlKSkKCQlyZXR1cm4gY2FuLm9uYWN0aW9uLnJlcmFua0xpbmUoY2FuKSwgY2FuLm9uYWN0aW9uLl9nZXRMaW5lbm8oY2FuLCBsaW5lKQoJfSwKCWRlbGV0ZUxpbmU6IGZ1bmN0aW9uKGNhbiwgbGluZSkgeyBsaW5lID0gY2FuLm9uYWN0aW9uLl9nZXRMaW5lKGNhbiwgbGluZSkKCQl2YXIgbmV4dCA9IGxpbmUubmV4dFNpYmxpbmd8fGxpbmUucHJldmlvdXNTaWJsaW5nCgkJcmV0dXJuIGNhbi5wYWdlLlJlbW92ZShjYW4sIGxpbmUpLCBjYW4ub25hY3Rpb24ucmVyYW5rTGluZShjYW4pLCBuZXh0Cgl9LAoJbW9kaWZ5TGluZTogZnVuY3Rpb24oY2FuLCBsaW5lLCB2YWx1ZSkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbihpdGVtLCBpbmRleCkgewoJCQlpZiAoaXRlbSAhPSBsaW5lICYmIGluZGV4KzEgIT0gbGluZSkgeyByZXR1cm4gfQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBpdGVtLCAidGQudGV4dCIsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWl0ZW0uaW5uZXJIVE1MID0gY2FuLm9uc3ludGF4Ll9wYXJzZShjYW4sIHZhbHVlKQoJCQl9KQoJCX0pCgl9LAoJZmF2b3JMaW5lOiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7CgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiem9uZSIsIHZhbHVlOiAiaGkifSwge25hbWU6ICJuYW1lIiwgdmFsdWU6ICJoZWxsbyJ9XSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBjb2RlLkZBVk9SLCBbY3R4LkFDVElPTiwgbWRiLklOU0VSVCwgbWRiLlpPTkUsIGRhdGEuem9uZXx8IiIsCgkJCQltZGIuVFlQRSwgY2FuLnBhcnNlLCBtZGIuTkFNRSwgZGF0YS5uYW1lfHwiIiwgbWRiLlRFWFQsICh2YWx1ZXx8IiIpLnRyaW1SaWdodCgpLAoJCQkJbmZzLlBBVEgsIGNhbi5PcHRpb24obmZzLlBBVEgpLCBuZnMuRklMRSwgY2FuLk9wdGlvbihuZnMuRklMRSksIG5mcy5MSU5FLCBjYW4uT3B0aW9uKG5mcy5MSU5FKSwKCQkJXSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbIuaWh+S7tuaVsCIsICLmqKHlvI8iLCAi5oyJ6ZSuIiwgIuino+aekOWZqCIsICLmlofku7blkI0iLCAi5b2T5YmN6KGMIiwgIui3s+i9rOaVsCJdfSkK",
        "usr/volcanos/plugin/local/code/xterm.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLm9ubGF5b3V0LnByb2ZpbGVfYXV0byhjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25pbXBvcnQubGF5b3V0KGNhbiksIGNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiksIGNhbi50ZXJtID0ge30KCgkJY2FuLnJlcXVpcmVNb2R1bGVzKFsieHRlcm0vY3NzL3h0ZXJtLmNzcyIsICJ4dGVybSIsICJ4dGVybS1hZGRvbi1maXQiLCAieHRlcm0tYWRkb24td2ViLWxpbmtzIl0sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgCgkJCWlmIChjYW4uT3B0aW9uKG1kYi5IQVNIKSAhPSAiIikgewoJCQkJdmFyIGl0ZW0gPSB7aGFzaDogY2FuLk9wdGlvbihtZGIuSEFTSCl9OyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgdmFsdWUua2V5LCB2YWx1ZS52YWx1ZSkgfSkKCQkJCXJldHVybiBjYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCBpdGVtKQoJCQl9CgoJCQl2YXIgaGFzaCA9IGNhbi5zdXAuX2hhc2h8fGNhbi5taXNjLlNlYXJjaEhhc2goY2FuKXx8dHJ1ZSwgbGlzdCA9IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQkJdmFyIGl0ZW0gPSBjYW4ub25pbXBvcnQuX2l0ZW0oY2FuLCB2YWx1ZSk7IHZhbHVlLmhhc2ggPT0gaGFzaCAmJiAoaXRlbS5jbGljaygpLCBoYXNoID0gZmFsc2UpCgkJCX0pOyBoYXNoICYmIGNhbi5vbmltcG9ydC5fY3JlYXRlKGNhbiwgW21kYi5UWVBFLCAiIiwgbWRiLk5BTUUsICJ0ZXJtIl0pCgkJfSwgNTAwKSB9KQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5IRUlHSFQsIGNhbi5Db25mSGVpZ2h0KCksIGh0bWwuV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQl2YXIgdGVybSA9IGNhbi51aS5jb250ZW50Ll90ZXJtOyBpZiAoIXRlcm0pIHsgcmV0dXJuIH0KCQl0ZXJtLl9maXQuZml0KCksIGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkKCX0sCglfaXRlbTogZnVuY3Rpb24oY2FuLCBpdGVtKSB7CgkJaXRlbS5fbWVudSA9IHNoeShjYW4ub25kZXRhaWwsIGNhbi5vbmRldGFpbC5saXN0LCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCWNhbi5yZXF1ZXN0KGV2ZW50LCBpdGVtLCBpdGVtLmV4dHJhKSwgbWV0YVtidXR0b25dKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkKCQl9KQoJCXJldHVybiBpdGVtLl9pdGVtID0gY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCBpdGVtLCBmdW5jdGlvbihldmVudCkgeyAKCQkJaXRlbS5fdGFicz8gaXRlbS5fdGFicy5jbGljaygpOiBpdGVtLl90YWJzID0gY2FuLm9uaW1wb3J0LnRhYnMoY2FuLCBbaXRlbV0sIGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4ub25pbXBvcnQuX2Nvbm5lY3QoY2FuLCBpdGVtKQoJCQl9KSwgaXRlbS5fcGx1Z2luICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLl9wbHVnaW4uX3RhcmdldCwgdHJ1ZSkKCQl9LCBmdW5jdGlvbihldmVudCkgeyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGl0ZW0uX21lbnUpIH0pCgl9LAoJX2NyZWF0ZTogZnVuY3Rpb24oY2FuLCBhcmdzLCBkYXRhKSB7CgkJY2FuLnJ1bkFjdGlvbih7fSwgbWRiLkNSRUFURSwgYXJncywgZnVuY3Rpb24obXNnKSB7CgkJCXZhciBjdXJyZW50ID0gY2FuLm9uaW1wb3J0Ll9pdGVtKGNhbiwge2hhc2g6IG1zZy5SZXN1bHQoKSwgbmFtZTogbXNnLk9wdGlvbihtZGIuTkFNRSksIGV4dHJhOiBkYXRhfSkKCQkJY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgY3VycmVudCwgY2FuLnVpLnByb2plY3QuZmlyc3RDaGlsZCkuY2xpY2soKQoJCX0pCgl9LAoJX2Nvbm5lY3Q6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLnVpLmNvbnRlbnQKCQljYW4uc3VwLl9oYXNoID0gaXRlbS5oYXNoLCBjYW4uaXNDbWRNb2RlKCkgJiYgKGxvY2F0aW9uLmhhc2ggPSBpdGVtLmhhc2gpCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaXRlbS5oYXNoIH0sIHRhcmdldCwgY2FuLnVpLnByb2ZpbGUpKSB7CgkJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIGl0ZW0pLCAic2VsZWN0IiksIGl0ZW0uX3Rlcm0uZm9jdXMoKQoJCQlyZXR1cm4gY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCBpdGVtLl90ZXJtKQoJCX0KCgkJaXRlbS5leHRyYSA9IGNhbi5iYXNlLk9iaihpdGVtLmV4dHJhLCB7fSkKCQl2YXIgdGVybSA9IG5ldyBUZXJtaW5hbCh7dGhlbWU6IGl0ZW0uZXh0cmEsIGN1cnNvckJsaW5rOiB0cnVlLCB0YWJTdG9wV2lkdGg6IDR9KQoJCXZhciBmaXRBZGRvbiA9IG5ldyBGaXRBZGRvbi5GaXRBZGRvbigpOyB0ZXJtLmxvYWRBZGRvbihmaXRBZGRvbiksIHRlcm0uX2ZpdCA9IGZpdEFkZG9uCgkJdGVybS5sb2FkQWRkb24obmV3IFdlYkxpbmtzQWRkb24uV2ViTGlua3NBZGRvbigpKQoKCQl0ZXJtLm9wZW4odGFyZ2V0fHxjYW4udWkuY29udGVudCkKCQl0ZXJtLm9uUmVzaXplKGZ1bmN0aW9uKHNpemUpIHsgY2FuLm9uaW1wb3J0Ll9zaXplKGNhbiwgaXRlbSwgc2l6ZSkgfSkKCQlmaXRBZGRvbi5maXQoKQoKCQl2YXIgc3VibW9kZSA9IGZhbHNlLCBrZXlza2lwID0gZmFsc2UKCQl0ZXJtLm9uS2V5KGZ1bmN0aW9uKGUpIHsgdmFyIGV2ZW50ID0gZS5kb21FdmVudAoJCQlpZiAoc3VibW9kZSkgeyBrZXlza2lwID0gdHJ1ZTsgc3dpdGNoIChldmVudC5rZXkpIHsKCQkJCWNhc2UgImwiOiB0YXJnZXQubmV4dFNpYmxpbmcgJiYgdGFyZ2V0Lm5leHRTaWJsaW5nLl90ZXJtPyB0YXJnZXQubmV4dFNpYmxpbmcuX3Rlcm0uZm9jdXMoKToKCQkJCQkJaXRlbS5fdGFicyAmJiBpdGVtLl90YWJzLm5leHRTaWJsaW5nICYmIGl0ZW0uX3RhYnMubmV4dFNpYmxpbmcuY2xpY2soKTsKCQkJCQlicmVhawoJCQkJY2FzZSAiaCI6IHRhcmdldC5wcmV2aW91c1NpYmxpbmcgJiYgdGFyZ2V0LnByZXZpb3VzU2libGluZy5fdGVybT8gdGFyZ2V0LnByZXZpb3VzU2libGluZy5fdGVybS5mb2N1cygpOgoJCQkJCQlpdGVtLl90YWJzICYmIGl0ZW0uX3RhYnMucHJldmlvdXNTaWJsaW5nICYmIGl0ZW0uX3RhYnMucHJldmlvdXNTaWJsaW5nLmNsaWNrKCk7CgkJCQkJYnJlYWsKCQkJCWNhc2UgIm4iOiBjYW4ub25hY3Rpb24uY3JlYXRlKGV2ZW50LCBjYW4pOyBicmVhawoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OiBrZXlza2lwID0gZmFsc2UKCQkJfSB9CgkJCXN1Ym1vZGUgPSBldmVudC5jdHJsS2V5ICYmIGV2ZW50LmtleSA9PSAiZyIKCQkJY2FuLm9uZXhwb3J0LnRlcm0oY2FuLCB0ZXJtKQoJCX0pCgkJdGVybS5vbkRhdGEoZnVuY3Rpb24odmFsKSB7CgkJCWlmIChzdWJtb2RlIHx8IGtleXNraXApIHsga2V5c2tpcCA9IGZhbHNlOyByZXR1cm4gfQoJCQljYW4ub25pbXBvcnQuX2lucHV0KGNhbiwgaXRlbSwgdmFsKQoJCX0pCgkJdGVybS5vblRpdGxlQ2hhbmdlKGZ1bmN0aW9uKHRpdGxlKSB7IGNhbi5pc0NtZE1vZGUoKSAmJiBjYW4udXNlci50aXRsZSh0aXRsZSkgfSkKCQl0ZXJtLm9uQ3Vyc29yTW92ZShmdW5jdGlvbihlKSB7IGNhbi5vbmV4cG9ydC50ZXJtKGNhbiwgdGVybSkgfSkKCgkJY2FuLnRlcm1baXRlbS5oYXNoXSA9IGl0ZW0uX3Rlcm0gPSB0YXJnZXQuX3Rlcm0gPSB0ZXJtLCB0ZXJtLl90YXJnZXQgPSB0YXJnZXQsIHRlcm0uX2l0ZW0gPSBpdGVtCgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdChldmVudCwgaXRlbSksICJzZWxlY3QiKSwgaXRlbS5fdGVybS5mb2N1cygpCgkJcmV0dXJuIGNhbi5vbmltcG9ydC5fcGx1ZyhjYW4sIGl0ZW0pLCBjYW4ub25leHBvcnQudGVybShjYW4sIHRlcm0pCgl9LAoJX2lucHV0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIHZhbCkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3Qoe30sIGl0ZW0pLCAiaW5wdXQiLCBbYnRvYSh2YWwpXSwgZnVuY3Rpb24oKSB7fSkKCX0sCglfc2l6ZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBzaXplKSB7CgkJY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgc2l6ZSwgaXRlbSksICJyZXNpemUiLCBbXSkKCX0sCglfcGx1ZzogZnVuY3Rpb24oY2FuLCBpdGVtKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9maWxlKQoJCWNhbi5vbmltcG9ydC5wbHVnKGNhbiwgaXRlbS5leHRyYSwgY2FuLnVpLnByb2ZpbGUsIGZ1bmN0aW9uKHN1YikgeyBpdGVtLl9wbHVnaW4gPSBzdWIKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSozLzQpCgkJfSkKCX0sCglncm93OiBmdW5jdGlvbihjYW4sIG1zZywgdHlwZSkgeyB2YXIgdGVybSA9IGNhbi50ZXJtW21zZy5PcHRpb24obWRiLkhBU0gpXTsgaWYgKCF0ZXJtKSB7IHJldHVybiB9CgkJc3dpdGNoICh0eXBlKSB7CgkJCWNhc2UgImRhdGEiOiB0ZXJtLndyaXRlKGF0b2IobXNnLk9wdGlvbihtZGIuVEVYVCkpKTsgYnJlYWsKCQkJY2FzZSAiZXhpdCI6IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHRlcm0uX3RhcmdldCk7IGJyZWFrCgkJfQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmk43kvZzmlbDmja4iLCBsaXN0OiBbbWRiLkNSRUFURSwgbGV4LlNQTElULCBtZGIuUFJVTkVTXSwKCV90cmFuczoge3NwbGl0OiAi5YiG5bGPIiwgdGhlbWU6ICLkuLvpopgifSwKCWNyZWF0ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsICJiYWNrZ3JvdW5kIiwgY3R4LklOREVYLCBjdHguQVJHU10sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLm9uaW1wb3J0Ll9jcmVhdGUoY2FuLCBhcmdzLCBkYXRhKQoJCX0pCgl9LAoJc3BsaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnJlcXVlc3QoZXZlbnQsIHtuYW1lOiAidGVybSIsIG5yb3c6IDIsIG5jb2w6IDJ9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsICJucm93IiwgIm5jb2wiXSwgZnVuY3Rpb24oZGF0YSkgewoJCQljYW4ub25pbXBvcnQudGFicyhjYW4sIFtkYXRhXSwgZnVuY3Rpb24oZXZlbnQpIHsgaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gZGF0YS5uYW1lIH0sIGNhbi51aS5jb250ZW50KSkgeyByZXR1cm4gfQoJCQkJY2FuLmNvcmUuTGlzdChwYXJzZUludChkYXRhLm5yb3cpLCBmdW5jdGlvbihucm93KSB7IHZhciByb3cgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udWkuY29udGVudCwgW3t2aWV3OiAicm93Iiwgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvZGF0YS5ucm93fX1dKS5maXJzdAoJCQkJCWNhbi5jb3JlLkxpc3QocGFyc2VJbnQoZGF0YS5uY29sKSwgZnVuY3Rpb24obmNvbCkgeyB2YXIgY29sID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgcm93LCBbe3ZpZXc6ICJjb2wiLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS9kYXRhLm5yb3csIHdpZHRoOiBjYW4uQ29uZldpZHRoKCkvZGF0YS5uY29sLTJ9fV0pLmZpcnN0CgkJCQkJCWNhbi5ydW5BY3Rpb24oe30sIG1kYi5DUkVBVEUsIFttZGIuVFlQRSwgZGF0YS50eXBlLCBtZGIuTkFNRSwgY2FuLmNvcmUuS2V5cyhkYXRhLm5hbWUsIG5yb3csIG5jb2wpXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5vbmltcG9ydC5fY29ubmVjdChjYW4sIHtoYXNoOiBtc2cuUmVzdWx0KCl9LCBjb2wpIH0pCgkJCQkJfSkKCQkJCX0pCgkJCX0pCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi5pON5L2c5pWw5o2uIiwgbGlzdDogWyJzaGFyZSIsICJwbHVnaW4iLCAidGhlbWUiLCAicmVuYW1lIiwgInJlbW92ZSJdLAoJc2hhcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpOyBtc2cuT3B0aW9uKCJhcmdzIiwgIiIpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IGl0ZW0ubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgY2FuLl9pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KFtjYW4uc3VwLl9oYXNoXSksCgkJXSkKCX0sCglwbHVnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFtjdHguSU5ERVgsIGN0eC5BUkdTXSwgZnVuY3Rpb24oYXJncywgZGF0YSkgewoJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBtZGIuTU9ESUZZLCBhcmdzKSwgY2FuLmJhc2UuQ29weShpdGVtLmV4dHJhLCBkYXRhKSwgY2FuLm9uaW1wb3J0Ll9wbHVnKGNhbiwgaXRlbSkKCQl9KQoJfSwKCXRoZW1lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24sIGl0ZW0pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbImJhY2tncm91bmQiLCAic2VsZWN0aW9uIiwgImN1cnNvciIsICJmb3JlZ3JvdW5kIl0sIGZ1bmN0aW9uKGFyZ3MsIGRhdGEpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLk1PRElGWSwgYXJncyksIGNhbi5iYXNlLkNvcHkoaXRlbS5leHRyYSwgZGF0YSksIGl0ZW0uX3Rlcm0uc2V0T3B0aW9uKCJ0aGVtZSIsIGRhdGEpCgkJfSkKCX0sCglyZW5hbWU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbiwgaXRlbSkgewoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuTkFNRV0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uLCBhcmdzKSwgaXRlbS5uYW1lID0gaXRlbS5faXRlbS5pbm5lclRleHQgPSBpdGVtLl90YWJzLmlubmVyVGV4dCA9IGFyZ3NbMV0KCQl9KQoJfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCBpdGVtKSB7CgkJY2FuLnJ1bkFjdGlvbihldmVudCwgYnV0dG9uKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbbWRiLlRPVEFMLCBtZGIuVFlQRSwgImJhY2tncm91bmQiLCAicm93cyIsICJjb2xzIiwgImN1cnNvclkiLCAiY3Vyc29yWCIsIGN0eC5JTkRFWF0sCgl0ZXJtOiBmdW5jdGlvbihjYW4sIHRlcm0pIHsgaXRlbSA9IHRlcm0uX2l0ZW0KCQljYW4uY29yZS5MaXN0KGNhbi5vbmV4cG9ydC5saXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJY2FuLlN0YXR1cyhrZXksIGNhbi5iYXNlLmdldFZhbGlkKGl0ZW1ba2V5XSwgaXRlbS5leHRyYVtrZXldLCB0ZXJtW2tleV0sIHRlcm0uYnVmZmVyLmFjdGl2ZVtrZXldLCAiIikpCgkJfSkKCQljYW4uU3RhdHVzKG1kYi5UT1RBTCwgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuRElWX0lURU0pLmxlbmd0aCkKCQljYW4uU3RhdHVzKG1kYi5UWVBFLCBpdGVtW21kYi5UWVBFXXx8IiIpCgkJcmV0dXJuIHRlcm0KCX0sCn0pCg==",
        "usr/volcanos/plugin/local/team/plan.css": "ZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIHsgdmVydGljYWwtYWxpZ246dG9wOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCB0ZC5vdmVyIHsgYm9yZGVyOnNvbGlkIDJweCByZWQ7IH0KZmllbGRzZXQucGxhbj5kaXYub3V0cHV0IHRkIGRpdi5kYXRlIHsgY29sb3I6Z3JheTsgfQpmaWVsZHNldC5wbGFuPmRpdi5vdXRwdXQgZGl2LnByZXBhcmUgeyBiYWNrZ3JvdW5kLWNvbG9yOmJsdWU7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYucHJvY2VzcyB7IGJhY2tncm91bmQtY29sb3I6Z3JlZW47IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuY2FuY2VsIHsgYmFja2dyb3VuZC1jb2xvcjpyZWQ7IGNvbG9yOndoaXRlOyB9CmZpZWxkc2V0LnBsYW4+ZGl2Lm91dHB1dCBkaXYuZmluaXNoIHsgYmFja2dyb3VuZC1jb2xvcjpncmF5OyBjb2xvcjp3aGl0ZTsgfQo=",
        "usr/volcanos/plugin/local/team/plan.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4udWkgPSBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4ub25pbXBvcnRbY2FuLk9wdGlvbigic2NhbGUiKXx8IndlZWsiXShjYW4sIG1zZykKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLk1BWF9IRUlHSFQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCkKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi51aS5wcm9maWxlLCBodG1sLk1BWF9IRUlHSFQsIGNhbi51aS5jb250ZW50Lm9mZnNldEhlaWdodCkKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJIWNhbi51c2VyLmlzTW9iaWxlICYmIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvZmlsZSwgdHJ1ZSkKCQkhY2FuLnVzZXIuaXNNb2JpbGUgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5kaXNwbGF5LCB0cnVlKQoJfSwKCV9jb250ZW50OiBmdW5jdGlvbihjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkgewoJCXZhciBoYXNoID0ge307IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIGsgPSBrZXkoY2FuLmJhc2UuRGF0ZSh2YWx1ZS5iZWdpbl90aW1lKSk7IGhhc2hba10gPSAoaGFzaFtrXXx8W10pLmNvbmNhdChbdmFsdWVdKSB9KQoKCQljYW4uc3VwLnRhc2sgJiYgKGNhbi5zdXAudGFzay5fdGFyZ2V0ID0gbnVsbCkKCQl2YXIgYmVnaW5fdGltZSA9IGNhbi5iYXNlLkRhdGUoY2FuLk9wdGlvbigiYmVnaW5fdGltZSIpKQoJCWNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5jb250ZW50LCBbe3ZpZXc6IFtjaGF0LkNPTlRFTlQsIGh0bWwuVEFCTEVdLCBsaXN0OiBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGhvdXIsIHJvdykgewoJCQlyZXR1cm4ge3R5cGU6IGh0bWwuVFIsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoaGVhZCwgZnVuY3Rpb24od2VlaywgY29sKSB7CgkJCQlpZiAocm93ID09IDApIHsgcmV0dXJuIHt0ZXh0OiBbY2FuLnVzZXIudHJhbnMoY2FuLCB3ZWVrKSwgaHRtbC5USF19IH0KCQkJCWlmIChjb2wgPT0gMCkgeyByZXR1cm4ge3RleHQ6IFtob3VyLCBodG1sLlREXX0gfQoJCQkJcmV0dXJuIGNhbi5vbmltcG9ydC5fdGFzayhjYW4sIG1zZywgZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSwgc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSkKCQkJfSl9CgkJfSkgfV0pLCBjYW4uU3RhdHVzKG1kYi5DT1VOVCwgbXNnLkxlbmd0aCgpKQoKCQltc2cuTGVuZ3RoKCkgPiAwICYmIGNhbi5zdXAudGFzayAmJiBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJdmFyIHRhcmdldCA9IGNhbi5zdXAudGFzay5fdGFyZ2V0fHxjYW4udGFzay5fdGFyZ2V0OyBjYW4uc3VwLnRhc2sgPSBudWxsLCB0YXJnZXQgJiYgdGFyZ2V0LmNsaWNrKCkKCQl9KQoJfSwKCV90YXNrOiBmdW5jdGlvbihjYW4sIG1zZywgbGlzdCwgdGltZSkgeyByZXR1cm4ge3RleHQ6IFsiIiwgaHRtbC5URF0sCgkJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLm9uYWN0aW9uLmluc2VydFRhc2soZXZlbnQsIGNhbiwgdGltZStjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpLnNsaWNlKHRpbWUubGVuZ3RoKSkKCQl9LAoJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9ua2V5bWFwLnByZXZlbnQoZXZlbnQpCgkJCWNhbi5kcm9wKGV2ZW50LCBldmVudC50YXJnZXQsIHRpbWUpCgkJfSwKCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCAib3ZlciIsIGV2ZW50LnRhcmdldCA9PSBpdGVtKQoJCQl9KQoJCX0sCgkJbGlzdDogY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih0YXNrKSB7CgkJCXJldHVybiBjYW4uYmFzZS5pc1N0cmluZyh0YXNrKT8ge3RleHQ6IFt0YXNrLCBodG1sLkRJViwgImRhdGUiXX06IHt0ZXh0OiBbY2FuLm9uZXhwb3J0W2Nhbi5BY3Rpb24oInZpZXciKXx8InRleHQiXShjYW4sIHRhc2spLCBodG1sLkRJViwgY2FuLm9uZXhwb3J0LnN0eWxlKGNhbiwgdGFzayldLAoJCQkJb25kcmFnc3RhcnQ6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7IGNhbi5kcm9wID0gZnVuY3Rpb24oZXZlbnQsIHRkLCB0aW1lKSB7IHRkLmFwcGVuZCh0YXJnZXQpCgkJCQkJY2FuLm9uYWN0aW9uLm1vZGlmeVRhc2soZXZlbnQsIGNhbiwgdGFzaywgImJlZ2luX3RpbWUiLCB0aW1lK3Rhc2suYmVnaW5fdGltZS5zbGljZSh0aW1lLmxlbmd0aCksIHRhc2suYmVnaW5fdGltZSkKCQkJCX0gfSwgZHJhZ2dhYmxlOiB0aW1lICE9IHVuZGVmaW5lZCwgdGl0bGU6IGNhbi5vbmV4cG9ydC50aXRsZShjYW4sIHRhc2spLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJdmFyIGl0ZW0gPSBjYW4ub25pbXBvcnQuaXRlbShjYW4sIHtuaWNrOiB0YXNrLm5hbWUrIjoiK3Rhc2sudGV4dH0sIGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRELCB0YXJnZXQucGFyZW50Tm9kZSksIGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIHRhc2spCgkJCQkJfSkgfSwgbnVsbCwgY2FuLnVpLnByb2plY3QpOyB0YXNrLl90YXJnZXQgPSB0YXJnZXQsIHRhcmdldC5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHsgaXRlbS5jbGljaygpIH0KCQkJCQljYW4udGFzayA9IGNhbi50YXNrfHx0YXNrLCBjYW4uc3VwLnRhc2sgPSBjYW4uc3VwLnRhc2t8fHRhc2ssIGNhbi5zdXAudGFzay56b25lID09IHRhc2suem9uZSAmJiBjYW4uc3VwLnRhc2suaWQgPT0gdGFzay5pZCAmJiAoY2FuLnN1cC50YXNrLl90YXJnZXQgPSB0YXJnZXQpCgkJCQl9LAoJCQl9CgkJfSksCgl9IH0sCglfcHJvZmlsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7CgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gY2FuLnN1cC50YXNrID0gdGFzaywgY2FuLlN0YXR1cyh0YXNrKSwgW3Rhc2sucG9kLCB0YXNrLnpvbmUsIHRhc2suaWRdLmpvaW4oaWNlLlBUKSB9LCBjYW4udWkucHJvZmlsZSwgY2FuLnVpLmRpc3BsYXkpKSB7IHJldHVybiB9CgoJCXRhc2suZXh0cmEgJiYgY2FuLmNvcmUuSXRlbShjYW4uYmFzZS5PYmoodGFzay5leHRyYSksIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgdGFza1siZXh0cmEuIitrZXldID0gdmFsdWUgfSksIGRlbGV0ZSh0YXNrLmV4dHJhKQoJCXZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZHMoY2FuLCBjYW4udWkucHJvZmlsZSwgW3t2aWV3OiBbY2hhdC5DT05URU5ULCBodG1sLlRBQkxFXSwgbGlzdDogW3t0aDogW21kYi5LRVksIG1kYi5WQUxVRV19XX1dKS5maXJzdAoJCWNhbi5jb3JlLkl0ZW0odGFzaywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBrZXkgIT0gIl90YXJnZXQiICYmIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCBbewoJCQl0ZDogW2tleSwga2V5ID09IGljZS5QT0QgJiYgdmFsdWUgIT0gIiI/IGNhbi5wYWdlLkZvcm1hdChodG1sLkEsIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge3BvZDogdmFsdWV9KSwgdmFsdWUpOiB2YWx1ZV0sCgkJCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IGlmIChjYW4ucGFnZS50YWdpcyhodG1sLklOUFVULCBldmVudC50YXJnZXQpICYmIGV2ZW50LnRhcmdldC50eXBlID09IGh0bWwuQlVUVE9OKSB7CgkJCQljYW4ucnVuKGNhbi5yZXF1ZXN0KGV2ZW50LCB0YXNrKSwgW2N0eC5BQ1RJT04sIGV2ZW50LnRhcmdldC5uYW1lXSwgZnVuY3Rpb24obXNnKSB7IGNhbi5VcGRhdGUoKSB9KQoJCQl9IH0sCgkJCW9uZGJsY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdCgpCgkJCQlzd2l0Y2ggKGtleSkgewoJCQkJCWNhc2UgInpvbmUiOgoJCQkJCWNhc2UgImlkIjoKCQkJCQkJcmV0dXJuCgkJCQkJY2FzZSAibGV2ZWwiOgoJCQkJCWNhc2UgInNjb3JlIjoKCQkJCQkJbXNnLlB1c2goa2V5LCAiMSIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjIiKQoJCQkJCQltc2cuUHVzaChrZXksICIzIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiNCIpCgkJCQkJCW1zZy5QdXNoKGtleSwgIjUiKQoJCQkJCQlicmVhawoJCQkJCWNhc2UgInN0YXR1cyI6CgkJCQkJCW1zZy5QdXNoKGtleSwgInByZXBhcmUiKQoJCQkJCQltc2cuUHVzaChrZXksICJwcm9jZXNzIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiZmluaXNoIikKCQkJCQkJbXNnLlB1c2goa2V5LCAiY2FuY2VsIikKCQkJCQkJYnJlYWsKCQkJCX0KCQkJCWNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKHN1YiwgdmFsdWUpIHsKCQkJCQljYW4ub25hY3Rpb24ubW9kaWZ5VGFzayhldmVudCwgY2FuLCB0YXNrLCBrZXksIHZhbHVlKQoJCQkJfSwge25hbWU6IGtleSwgYWN0aW9uOiBrZXkuaW5kZXhPZihtZGIuVElNRSkgPiAwPyAiZGF0ZSI6ICJrZXkiLCBtc2c6IG1zZywgbW9kZTogInNpbXBsZSJ9KQoJCQl9LAoJCX1dKSB9KSwgY2FuLm9uaW1wb3J0Ll9kaXNwbGF5KGNhbiwgdGFzaykKCX0sCglfZGlzcGxheTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IGlmICghdGFza1siZXh0cmEuY21kIl0pIHsgcmV0dXJuIH0KCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwge3R5cGU6ICJwbHVnIiwgY3R4OiB0YXNrWyJleHRyYS5jdHgiXSwgY21kOiB0YXNrWyJleHRyYS5jbWQiXSwgYXJnOiB0YXNrWyJleHRyYS5hcmciXX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIucnVuID0gZnVuY3Rpb24oZXZlbnQsIGNtZHMsIGNiKSB7IHZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCwga2l0LkRpY3QoInRhc2sucG9kIiwgdGFza1sicG9kIl0sICJ0YXNrLnpvbmUiLCB0YXNrLnpvbmUsICJ0YXNrLmlkIiwgdGFzay5pZCkpCgkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBpY2UuUlVOLCBbdGFza1ttZGIuWk9ORV0sIHRhc2tbbWRiLklEXV0uY29uY2F0KGNtZHMpLCBjYikKCQkJfQoJCX0sIGNhbi51aS5kaXNwbGF5KQoJfSwKCglkYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBbImhvdXIiLCAidGFzayJdCgkJdmFyIGxpc3QgPSBbMF07IGZvciAodmFyIGkgPSA3OyBpIDwgMjQ7IGkrKykgeyBsaXN0LnB1c2goY2FuLmJhc2UuTnVtYmVyKGksIDIpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5OdW1iZXIodGltZS5nZXRIb3VycygpLCAyKSB9CgkJZnVuY3Rpb24gZ2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93LCBoYXNoKSB7IHJldHVybiBoYXNoW2xpc3Rbcm93XV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gY2FuLmJhc2UuVGltZShiZWdpbl90aW1lLCAiJXktJW0tJWQgIikrbGlzdFtyb3ddIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCXdlZWs6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGhlYWQgPSBjYW4ub25leHBvcnQuaGVhZChjYW4sICJob3VyIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDc7IGkgPCAyNDsgaSsrKSB7IGxpc3QucHVzaChjYW4uYmFzZS5OdW1iZXIoaSwgMikpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIHRpbWUuZ2V0RGF5KCkrIiAiK2Nhbi5iYXNlLk51bWJlcih0aW1lLmdldEhvdXJzKCksIDIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbY29sLTErIiAiK2xpc3Rbcm93XV0gfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgeyByZXR1cm4gY2FuLmJhc2UuVGltZShjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC1iZWdpbl90aW1lLmdldERheSgpK2NvbC0xKSwgIiV5LSVtLSVkICIpK2xpc3Rbcm93XSB9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgltb250aDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgaGVhZCA9IGNhbi5vbmV4cG9ydC5oZWFkKGNhbiwgIm9yZGVyIikKCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCA2OyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtLSVkIikgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgewoJCQl2YXIgYmVnaW4gPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSkpCgkJCXZhciBsYXN0ID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpLWJlZ2luLmdldERheSgpKQoJCQl2YXIgZGF5ID0gY2FuLmJhc2UuVGltZUFkZChsYXN0LCAocm93LTEpKjcrY29sKQoJCQlyZXR1cm4gW2RheS5nZXREYXRlKCkrIiJdLmNvbmNhdChoYXNoW2tleShkYXkpXXx8W10pCgkJfQoJCWZ1bmN0aW9uIHNldChiZWdpbl90aW1lLCBjb2wsIHJvdykgewoJCQl2YXIgYmVnaW4gPSBjYW4uYmFzZS5UaW1lQWRkKGJlZ2luX3RpbWUsIC0oYmVnaW5fdGltZS5nZXREYXRlKCktMSkpCgkJCXZhciBsYXN0ID0gY2FuLmJhc2UuVGltZUFkZChiZWdpbl90aW1lLCAtKGJlZ2luX3RpbWUuZ2V0RGF0ZSgpLTEpLWJlZ2luLmdldERheSgpKQoJCQl2YXIgZGF5ID0gY2FuLmJhc2UuVGltZUFkZChsYXN0LCAocm93LTEpKjcrY29sKQoJCQlyZXR1cm4ga2V5KGRheSkKCQl9CgoJCWNhbi5vbmltcG9ydC5fY29udGVudChjYW4sIG1zZywgaGVhZCwgbGlzdCwga2V5LCBnZXQsIHNldCkKCX0sCgl5ZWFyOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCXZhciBoZWFkID0gY2FuLm9uZXhwb3J0LmhlYWQoY2FuLCAibW9udGgiKQoJCXZhciBsaXN0ID0gWzBdOyBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHsgbGlzdC5wdXNoKGkpIH0KCgkJZnVuY3Rpb24ga2V5KHRpbWUpIHsgcmV0dXJuIGNhbi5iYXNlLlRpbWUodGltZSwgIiV5LSVtICIpK3RpbWUuZ2V0RGF5KCkgfQoJCWZ1bmN0aW9uIGdldChiZWdpbl90aW1lLCBjb2wsIHJvdywgaGFzaCkgeyByZXR1cm4gaGFzaFtiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkrIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpKyIgIisoY29sLTEpXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkrIi0iK2Nhbi5iYXNlLk51bWJlcihsaXN0W3Jvd10sIDIpIH0KCgkJY2FuLm9uaW1wb3J0Ll9jb250ZW50KGNhbiwgbXNnLCBoZWFkLCBsaXN0LCBrZXksIGdldCwgc2V0KQoJfSwKCWxvbmc6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJdmFyIGJlZ2luX3RpbWUgPSBjYW4uYmFzZS5EYXRlKGNhbi5iYXNlLlRpbWUoY2FuLk9wdGlvbigiYmVnaW5fdGltZSIpLCAiJXktJW0tJWQgJUg6JU06JVMiKSkKCQl2YXIgYmVnaW4gPSBiZWdpbl90aW1lLmdldEZ1bGxZZWFyKCkgLSA1CgoJCXZhciBoZWFkID0gWyJtb250aCJdOyBmb3IgKHZhciBpID0gMDsgaSA8IDEwOyBpKyspIHsgaGVhZC5wdXNoKGJlZ2luK2kpIH0KCQl2YXIgbGlzdCA9IFswXTsgZm9yICh2YXIgaSA9IDE7IGkgPCAxMzsgaSsrKSB7IGxpc3QucHVzaChpKSB9CgoJCWZ1bmN0aW9uIGtleSh0aW1lKSB7IHJldHVybiBjYW4uYmFzZS5UaW1lKHRpbWUsICIleS0lbSIpIH0KCQlmdW5jdGlvbiBnZXQoYmVnaW5fdGltZSwgY29sLCByb3csIGhhc2gpIHsgcmV0dXJuIGhhc2hbYmVnaW4rY29sLTErIi0iK2Nhbi5iYXNlLk51bWJlcihyb3csIDIpXSB9CgkJZnVuY3Rpb24gc2V0KGJlZ2luX3RpbWUsIGNvbCwgcm93KSB7IHJldHVybiBiZWdpbitjb2wtMSsiLSIrY2FuLmJhc2UuTnVtYmVyKHJvdywgMikgfQoKCQljYW4ub25pbXBvcnQuX2NvbnRlbnQoY2FuLCBtc2csIGhlYWQsIGxpc3QsIGtleSwgZ2V0LCBzZXQpCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuS6pOS6kiIsIGxpc3Q6IFsKCQkiaW5zZXJ0IiwgImV4cG9ydCIsICJpbXBvcnQiLAoJCVsibGV2ZWwiLCAiYWxsIiwgImwxIiwgImwyIiwgImwzIiwgImw0IiwgImw1Il0sCgkJWyJzdGF0dXMiLCAiYWxsIiwgInByZXBhcmUiLCAicHJvY2VzcyIsICJjYW5jZWwiLCAiZmluaXNoIl0sCgkJWyJzY29yZSIsICJhbGwiLCAiczEiLCAiczIiLCAiczMiLCAiczQiLCAiczUiXSwKCQlbInZpZXciLCAiIiwgIm5hbWUiLCAidGV4dCIsICJsZXZlbCIsICJzY29yZSJdLAoJXSwKCV90cmFuczogeyJ0YXNrIjogIuS7u+WKoSIsICJob3VyIjogIuaXtumXtCIsICJtb250aCI6ICLmnIjku70ifSwKCWluc2VydFRhc2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHRpbWUpIHsgdmFyIG1zZyA9IGNhbi5zdXAucmVxdWVzdChldmVudCwge2JlZ2luX3RpbWU6IHRpbWV9KQoJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIGNhbi5Db25mKFtjdHguRkVBVFVSRSwgbWRiLklOU0VSVF0pLCBmdW5jdGlvbihhcmdzKSB7CgkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIG1kYi5JTlNFUlQsIFsiem9uZSIsIGFyZ3NbMV0sICJiZWdpbl90aW1lIiwgdGltZV0uY29uY2F0KGFyZ3MpKQoJCX0pCgl9LAoJbW9kaWZ5VGFzazogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdGFzaywga2V5LCB2YWx1ZSkgewoJCWNhbi5ydW5BY3Rpb24oY2FuLnJlcXVlc3QoZXZlbnQsIHRhc2spLCBtZGIuTU9ESUZZLCBba2V5LCB2YWx1ZSwgdGFza1trZXldXSkKCX0sCgoJX2ZpbHRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyB2YXIgY291bnQgPSAwCgkJaWYgKHZhbHVlID09ICJhbGwiKSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5ISURFKSwgY291bnQrKwoJCQl9KQoJCX0gZWxzZSB7CgkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgaHRtbC5ISURFKQoJCQl9KQoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgY2FuLmNvcmUuS2V5cyhodG1sLkRJViwgdmFsdWUpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5ISURFKSwgY291bnQrKwoJCQl9KQoJCX0KCQljYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4uU3RhdHVzKG1kYi5DT1VOVCwgY291bnQpCgl9LAoJbGV2ZWw6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXN0YXR1czogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2ZpbHRlcihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB9LAoJc2NvcmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9maWx0ZXIoZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgfSwKCXZpZXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5wcm9qZWN0KSwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmNvbnRlbnQpCgkJY2FuLm9uaW1wb3J0W2Nhbi5PcHRpb24oInNjYWxlIildKGNhbiwgY2FuLl9tc2cpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFttZGIuQ09VTlQsICJiZWdpbl90aW1lIiwgbWRiLlpPTkUsIG1kYi5JRCwgbWRiLlRZUEUsIG1kYi5OQU1FLCBtZGIuVEVYVF0sCgluYW1lOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuIHRhc2submFtZSB9LAoJdGV4dDogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiB0YXNrLm5hbWUrIjogIisodGFzay50ZXh0fHwiIikgfSwKCWxldmVsOiBmdW5jdGlvbihjYW4sIHRhc2spIHsgcmV0dXJuICJsLSIrKHRhc2subGV2ZWx8fDMpKyI6ICIrKHRhc2submFtZXx8IiIpIH0sCglzY29yZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiAicy0iKyh0YXNrLmxldmVsfHwzKSsiOiAiKyh0YXNrLm5hbWV8fCIiKSB9LAoJdGl0bGU6IGZ1bmN0aW9uKGNhbiwgdGFzaykgeyByZXR1cm4gdGFzay56b25lKyI6ICIrKHRhc2sudHlwZXx8IiIpIH0sCglzdHlsZTogZnVuY3Rpb24oY2FuLCB0YXNrKSB7IHJldHVybiBbaHRtbC5JVEVNLCB0YXNrLnN0YXR1cywgbWRiLklEK3Rhc2suaWQsICJsIisodGFzay5sZXZlbHx8IiIpLCAicyIrKHRhc2suc2NvcmV8fCIiKV0uam9pbihpY2UuU1ApIH0sCgloZWFkOiBmdW5jdGlvbihjYW4sIHNjYWxlKSB7CgkJc3dpdGNoIChzY2FsZSkgewoJCQljYXNlICJ5ZWFyIjoKCQkJY2FzZSAibG9uZyI6CgkJCQlyZXR1cm4KCQl9CgkJcmV0dXJuIFtzY2FsZV0uY29uY2F0KGNhbi51c2VyLmluZm8ubGFuZ3VhZ2UgPT0gImVuIj8gWyJNb24iLCAiVHVlIiwgIldlZCIsICJUaHUiLCAiRnJpIiwgIlNhdCIsICJTdW4iXTogWyLlkajml6UiLCAi5ZGo5LiAIiwgIuWRqOS6jCIsICLlkajkuIkiLCAi5ZGo5ZubIiwgIuWRqOS6lCIsICLlkajlha0iXSk7Cgl9LAp9KQo=",
        "usr/volcanos/plugin/local/wiki/data.css": "ZmllbGRzZXQuZGF0YSBkaXYub3V0cHV0IHRhYmxlLmNvbnRlbnQgdHIuc2VsZWN0IHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQpmaWVsZHNldC5kYXRhIGRpdi5vdXRwdXQgdGFibGUuY29udGVudCB0ci5vdmVyIHsKCWJhY2tncm91bmQtY29sb3I6Z3JheTsKfQo=",
        "usr/volcanos/plugin/local/wiki/data.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiKSB7CgkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCWNhbi51aSA9IGNhbi5vbmxheW91dC5kaXNwbGF5KGNhbikKCQljYW4udGFibGUgPSBjYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2csIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4LCBsaW5lKSB7CgkJCXJldHVybiB7dGV4dDogW3ZhbHVlLCBodG1sLlREXSwgb25jb250ZXh0bWVudTogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5vbmRldGFpbCwgY2FuLm9uZGV0YWlsLmxpc3QsIGZ1bmN0aW9uKGV2LCBjbWQsIG1ldGEpIHsKCQkJCQl2YXIgY2IgPSBtZXRhW2NtZF07IGNiICYmIGNiKGV2ZW50LCBjYW4sIGNtZCwgdmFsdWUsIGtleSwgaW5kZXgsIGxpbmUpCgkJCQl9KQoJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJa2V5ID09IG5mcy5QQVRIICYmIGNhbi5ydW4oZXZlbnQsIFtjYW4uT3B0aW9uKG5mcy5QQVRILCB2YWx1ZSldKQoJCQl9LCBvbmRibGNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBldmVudC50YXJnZXQsIHRydWUpCgkJCX19CgkJfSwgY2FuLnVpLmNvbnRlbnQpCgoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgbXNnLmFwcGVuZCkKCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05GSUdVUkUsIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwKCSLmsYLlkowiOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCXJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpICsgKHJlc1tpbmRleF18fDApOwoJfSwKCSLmnIDlpKciOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCQkocmVzW2luZGV4XSA9PT0gdW5kZWZpbmVkIHx8IHBhcnNlSW50KHRkLmlubmVyVGV4dCkgPiBwYXJzZUludChyZXNbaW5kZXhdKSkgJiYgKHJlc1tpbmRleF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpKQoJfSwKCSLmnIDlsI8iOiBmdW5jdGlvbihldmVudCwgY2FuLCByZXMsIHRkLCBpbmRleCkgewoJCShyZXNbaW5kZXhdID09PSB1bmRlZmluZWQgfHwgcGFyc2VJbnQodGQuaW5uZXJUZXh0KSA8IHBhcnNlSW50KHJlc1tpbmRleF0pKSAmJiAocmVzW2luZGV4XSA9IHBhcnNlSW50KHRkLmlubmVyVGV4dCkpCgl9LAoJIuW5s+WdhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHJlcywgdGQsIG5jb2wsIGNvbHMsIHJvd3MsIG5yb3cpIHsKCQlyZXNbbmNvbF0gPSBwYXJzZUludCh0ZC5pbm5lclRleHQpICsgKHJlc1tuY29sXXx8MCk7CgkJaWYgKG5yb3cgPT0gcm93cy5sZW5ndGggLSAxKSB7CgkJCXJlc1tuY29sXSA9IHJlc1tuY29sXSAvIG5yb3cKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFtpY2UuU0FWRSwgW2ljZS5NT0RFLCAi5YWo6YCJIiwgIuWdl+mAiSIsICLlj43pgIkiLCAi5aSa6YCJIiwgIuaLluWKqCIsICLnvJbovpEiXSwgW2ljZS5FWEVDLCAi5rGC5ZKMIiwgIuacgOWkpyIsICLmnIDlsI8iLCAi5bmz5Z2HIl1dLAoJX2NvbXB1dGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQl2YXIgbXVsID0gaHRtbC5UUiArIChjYW4uQWN0aW9uKGljZS5NT0RFKSA9PSAi5YWo6YCJIj8gIiI6ICIuc2VsZWN0IikKCQl2YXIgbWV0aG9kID0gY2FuLm9uZmlndXJlW2Nhbi5BY3Rpb24oaWNlLkVYRUMpXSwgcmVzID0ge30KCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIG11bCwgZnVuY3Rpb24odHIsIG5yb3csIHJvd3MpIHsKCQkJKG11bCAhPSBodG1sLlRSIHx8IG5yb3cgPiAwKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0ciwgaHRtbC5URCwgZnVuY3Rpb24odGQsIG5jb2wsIGNvbHMpIHsKCQkJCW1ldGhvZCAmJiBtZXRob2QoZXZlbnQsIGNhbiwgcmVzLCB0ZCwgbmNvbCwgY29scywgcm93cywgbnJvdykKCQkJfSkKCQl9KQoJCWNhbi5jb3JlLkl0ZW0ocmVzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IGNhbi5TdGF0dXMoY2FuLl9tc2cuYXBwZW5kW2tleV0sIHZhbHVlfHwiIikgfSkKCX0sCgoJc2F2ZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgW2Nhbi5PcHRpb24obmZzLlBBVEgpLCBjYW4ub25leHBvcnQuZmlsZShjYW4pXSkgfSwKCWV4ZWM6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgeyBjYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikgfSwKCglfZm9yZWFjaDogZnVuY3Rpb24oY2FuLCBidXR0b24sIGNiKSB7CgkJYnV0dG9uICYmIGNhbi5BY3Rpb24oaWNlLk1PREUsIGJ1dHRvbikKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5UUiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYihpdGVtKQoJCX0pCgl9LAoKCSLlhajpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuZWRpdGFibGUoY2FuLCBpdGVtLCBmYWxzZSkKCQkJY2FuLnBhZ2UuZHJhZ2dhYmxlKGNhbiwgaXRlbSwgZmFsc2UpCgkJCWl0ZW0ub25tb3VzZWVudGVyID0gbnVsbCwgaXRlbS5vbmNsaWNrID0gbnVsbAoJCQljYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5kZWwoY2FuLCBpdGVtLCAib3ZlciIpCgkJfSkKCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCX0sCgki5Z2X6YCJIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJY2FuLm9uYWN0aW9uLl9mb3JlYWNoKGNhbiwgYnV0dG9uLCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW0ub25tb3VzZWVudGVyID0gZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgaXRlbSwgaHRtbC5TRUxFQ1QpCgkJCQljYW4ub25hY3Rpb24uX2NvbXB1dGUoZXZlbnQsIGNhbikKCQkJfQoJCX0pCgl9LAoJIuWPjemAiSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9ubW91c2VlbnRlciA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLlpJrpgIkiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCBidXR0b24sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJaXRlbS5vbm1vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHt9CgkJCWl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKCkgewoJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0Lm5lZyhjYW4sIGl0ZW0sIGh0bWwuU0VMRUNUKQoJCQkJY2FuLm9uYWN0aW9uLl9jb21wdXRlKGV2ZW50LCBjYW4pCgkJCX0KCQl9KQoJfSwKCSLmi5bliqgiOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ub25hY3Rpb25bIuWFqOmAiSJdKGV2ZW50LCBjYW4sIGJ1dHRvbikKCQljYW4ub25hY3Rpb24uX2ZvcmVhY2goY2FuLCAiIiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5kcmFnZ2FibGUoY2FuLCBpdGVtLCB0cnVlKQoJCQlpdGVtLm9uZHJhZ3N0YXJ0ID0gZnVuY3Rpb24oZXZlbnQpIHsgY2FuLmRyYWcgPSBpdGVtIH0KCQkJaXRlbS5vbmRyYWdvdmVyID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGl0ZW0sICJvdmVyIil9CgkJCWl0ZW0ub25kcmFnbGVhdmUgPSBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuZGVsKGNhbiwgaXRlbSwgIm92ZXIiKSB9CgkJCWl0ZW0ub25kcm9wID0gZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKQoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnVpLmNvbnRlbnQsIGh0bWwuVEFCTEUsIGZ1bmN0aW9uKHRhYmxlKSB7CgkJCQkJdGFibGUuaW5zZXJ0QmVmb3JlKGNhbi5kcmFnLCBpdGVtKQoJCQkJfSkKCQkJfQoJCX0pCgl9LAoJIue8lui+kSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmFjdGlvbi5fZm9yZWFjaChjYW4sIGJ1dHRvbiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5lZGl0YWJsZShjYW4sIGl0ZW0sIHRydWUpCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi57uE5Lu26K+m5oOFIiwgbGlzdDogWyLlpI3liLYiLCAi5Yig6ZmkIl0sCgki5aSN5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uLCB2YWx1ZSwga2V5LCBpbmRleCwgbGluZSkgewoJCXZhciBlbmQgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4udGFibGUsIFt7dHlwZTogaHRtbC5UUiwgbGlzdDogY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSkgewoJCQlyZXR1cm4ge3RleHQ6IFtsaW5lW2tleV0sIGh0bWwuVERdfQoJCX0pfV0pLnRyOyBjYW4udGFibGUuaW5zZXJ0QmVmb3JlKGVuZCwgZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJIuWIoOmZpCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJZmlsZTogZnVuY3Rpb24oY2FuKSB7CgkJcmV0dXJuIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5jb250ZW50LCBodG1sLlRSLCBmdW5jdGlvbih0cikgewoJCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdHIsIGNhbi5wYWdlLktleXMoaHRtbC5USCwgaHRtbC5URCksIGZ1bmN0aW9uKHRkKSB7cmV0dXJuIHRkLmlubmVySFRNTH0pLmpvaW4oaWNlLkZTKQoJCX0pLmpvaW4oaWNlLk5MKQoJfSwKfSkK",
        "usr/volcanos/plugin/local/wiki/draw.css": "ZmllbGRzZXQuZHJhdyBkaXYub3V0cHV0IHsgYmFja2dyb3VuZC1jb2xvcjojMWI1YjczOGM7IGZvbnQtc2l6ZToyMHB4OyB9CmZpZWxkc2V0LmRyYXcgZGl2Lm91dHB1dCBkaXYuY29udGVudCBzdmcgeyBiYWNrZ3JvdW5kLWNvbG9yOiMxYjViNzM4YzsgfQo=",
        "usr/volcanos/plugin/local/wiki/draw.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgbXNnKSwgY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKQoJCWNhbi5rZXlsaXN0ID0gW10sIGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoKCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLmNvcmUuSXRlbShraXQuRGljdCgKCQkJCWh0bWwuU1RST0tFX1dJRFRILCAyLCBodG1sLlNUUk9LRSwgY2xpLllFTExPVywgaHRtbC5GSUxMLCBjbGkuUFVSUExFLAoJCQkJaHRtbC5GT05UX1NJWkUsIDI0LCBodG1sLkZPTlRfRkFNSUxZLCBodG1sLk1PTk9TUEFDRSwKCQkJCSJnbyIsIGljZS5SVU4sIHN2Zy5TSEFQRSwgc3ZnLlJFQ1QsIHN2Zy5HUklELCAxMCwKCQkJKSwgZnVuY3Rpb24oa2V5LCB2YWx1ZSkgeyBjYW4uc3ZnLlZhbHVlKGtleSwgY2FuLkFjdGlvbihrZXksIGNhbi5zdmcuVmFsdWUoa2V5KXx8dmFsdWUpKSB9KQoKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4udWkuZGlzcGxheSwgaHRtbC5NSU5fSEVJR0hULCA4MCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hUKS01MikKCQkJdmFyIHBpZCA9IGNhbi5PcHRpb24oc3ZnLlBJRCl8fGNhbi5zdmcuVmFsdWUoc3ZnLlBJRCk7IHBpZCAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrcGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBpdGVtKSwgY2FuLm9uZGV0YWlsLnJ1bih7dGFyZ2V0OiBpdGVtfSwgY2FuKQoJCQl9KSB8fCBjYW4ub25pbXBvcnQuX3Byb2ZpbGUoY2FuLCBjYW4uc3ZnKQoJCX0pIAoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1zZykgeyBjYW4ucG9pbnQgPSBbXQoJCWNhbi5zdmcgPSBudWxsLCBjYW4uZ3JvdXAgPSBudWxsLCBjYW4udGVtcCA9IG51bGwsIGNhbi5jdXJyZW50ID0gbnVsbAoKCQljYW4udWkgPSBjYW4ub25sYXlvdXQucHJvZmlsZShjYW4pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLnVpLnByb2plY3QpCgkJY2FuLnBhZ2UuTW9kaWZ5KGNhbiwgY2FuLnVpLmNvbnRlbnQsIG1zZy5SZXN1bHQoKXx8Y2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuKSkKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4udWkuY29udGVudCwgaHRtbC5TVkcsIGZ1bmN0aW9uKHN2ZykgewoJCQljYW4uc3ZnID0gY2FuLmdyb3VwID0gY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIHN2ZyksIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBzdmcpLmNsaWNrKCkKCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmFjdGlvbiwgZnVuY3Rpb24oa2V5LCBjYikgeyBzdmdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4pIH0gfSkKCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgc3ZnLCBtZGIuRk9SRUFDSCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsgY2FuLm9uaW1wb3J0Ll9ibG9jayhjYW4sIGl0ZW0pCgkJCQljYW4ucGFnZS50YWdpcyhzdmcuRywgaXRlbSkgJiYgaXRlbS5WYWx1ZShodG1sLkNMQVNTKSAmJiBjYW4ub25pbXBvcnQuX2dyb3VwKGNhbiwgaXRlbSkKCQkJfSkKCQl9KQoJfSwKCV9ncm91cDogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdmFyIG5hbWUgPSB0YXJnZXQuR3JvdXBzKCkKCQlmdW5jdGlvbiBzaG93KGV2ZW50KSB7IGNhbi5ncm91cCA9IHRhcmdldAoJCQljYW4uY29yZS5MaXN0KFtodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihrZXkpIHsKCQkJCWNhbi5BY3Rpb24oa2V5LCB0YXJnZXQuVmFsdWUoa2V5KXx8Y2FuLkFjdGlvbihrZXkpKQoJCQl9KQoJCX0KCQlyZXR1cm4gKG5hbWUgfHwgdGFyZ2V0ID09IGNhbi5zdmcpICYmIGNhbi5vbmltcG9ydC5pdGVtKGNhbiwge25hbWU6IG5hbWV8fGh0bWwuU1ZHfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJc2hvdyhldmVudCksIGNhbi5vbmFjdGlvbi5zaG93KGV2ZW50LCBjYW4pLCBjYW4uU3RhdHVzKHN2Zy5HUk9VUCwgbmFtZXx8aHRtbC5TVkcpCgkJfSwgZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGVSaWdodChldmVudCwgY2FuLCBjYW4ub25hY3Rpb24sIGNhbi5vbmFjdGlvbi5tZW51X2xpc3QpCgkJfSwgY2FuLnVpLnByb2plY3QpCgl9LAoJX2Jsb2NrOiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewoJCXRhcmdldC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJdmFyIGNhcnRlID0gY2FuLnVzZXIuY2FydGUoZXZlbnQsIGNhbiwgY2FuLm9uZGV0YWlsLCBudWxsLCBmdW5jdGlvbihldiwgYnV0dG9uLCBtZXRhKSB7CgkJCQltZXRhW2J1dHRvbl0oZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQl9KTsgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYXJ0ZS5fdGFyZ2V0LCB7bGVmdDogZXZlbnQuY2xpZW50WCwgdG9wOiBldmVudC5jbGllbnRZfSkKCQl9CgkJdGFyZ2V0LlZhbCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsKCQkJcmV0dXJuIHBhcnNlSW50KHRhcmdldC5WYWx1ZShrZXksIHZhbHVlID09IHVuZGVmaW5lZD8gdmFsdWU6IHBhcnNlSW50KHZhbHVlKXx8MCkpfHwwCgkJfQoJCXRhcmdldC5WYWx1ZSA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgaWYgKGNhbi5iYXNlLmlzVW5kZWZpbmVkKGtleSkpIHsgcmV0dXJuIH0KCQkJaWYgKGNhbi5iYXNlLmlzT2JqZWN0KGtleSkpIHsgY2FuLmNvcmUuSXRlbShrZXksIHRhcmdldC5WYWx1ZSk7IHJldHVybiB9CgoJCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJCWtleSA9IGZpZ3VyZSAmJiBmaWd1cmUuZGF0YSAmJiBmaWd1cmUuZGF0YS5zaXplICYmIGZpZ3VyZS5kYXRhLnNpemVba2V5XSB8fCBrZXkKCQkJaWYgKGZpZ3VyZSAmJiBmaWd1cmUuZGF0YSAmJiBjYW4uYmFzZS5pc0Z1bmMoZmlndXJlLmRhdGFba2V5XSkpIHsKCQkJCXJldHVybiBmaWd1cmUuZGF0YVtrZXldKGNhbiwgdmFsdWUsIGtleSwgdGFyZ2V0KQoJCQl9CgoJCQlpZiAoa2V5ID09IGh0bWwuSU5ORVIpIHsKCQkJCXJldHVybiB2YWx1ZSAhPSB1bmRlZmluZWQgJiYgKHRhcmdldC5pbm5lckhUTUwgPSB2YWx1ZSksIHRhcmdldC5pbm5lckhUTUwKCQkJfQoJCQlpZiAoa2V5ID09IGljZS5TSElQKSB7CgkJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpLCBjYW4uYmFzZS5PYmoodGFyZ2V0LmdldEF0dHJpYnV0ZShrZXkpLCBbXSkKCQkJfQoJCQlyZXR1cm4gdmFsdWUgIT0gdW5kZWZpbmVkICYmIHRhcmdldC5zZXRBdHRyaWJ1dGUoa2V5LCB2YWx1ZSksIHRhcmdldC5nZXRBdHRyaWJ1dGUoa2V5fHxodG1sLkNMQVNTKQoJCQkJfHwgdGFyZ2V0W2tleV0mJnRhcmdldFtrZXldLmJhc2VWYWwmJnRhcmdldFtrZXldLmJhc2VWYWwudmFsdWUgfHwgdGFyZ2V0W2tleV0mJnRhcmdldFtrZXldLmJhc2VWYWwgfHwgIiIKCQl9CgkJdGFyZ2V0Lkdyb3VwID0gZnVuY3Rpb24oKSB7IHZhciBpdGVtID0gdGFyZ2V0CgkJCXdoaWxlIChpdGVtKSB7IGlmIChbaHRtbC5TVkcsIHN2Zy5HXS5pbmRleE9mKGl0ZW0udGFnTmFtZSkgPiAtMSkgeyByZXR1cm4gaXRlbSB9OyBpdGVtID0gaXRlbS5wYXJlbnROb2RlIH0KCQkJcmV0dXJuIGNhbi5zdmcKCQl9CgkJdGFyZ2V0Lkdyb3VwcyA9IGZ1bmN0aW9uKCkgeyB2YXIgaXRlbSA9IHRhcmdldAoJCQl2YXIgbGlzdCA9IFtdOyB3aGlsZSAoaXRlbSAmJiBpdGVtLnRhZ05hbWUgIT0gaHRtbC5TVkcpIHsKCQkJCWl0ZW0udGFnTmFtZSA9PSBzdmcuRyAmJiBpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpICYmIGxpc3QucHVzaChpdGVtLlZhbHVlKGh0bWwuQ0xBU1MpKSwgaXRlbSA9IGl0ZW0ucGFyZW50Tm9kZQoJCQl9CgkJCXJldHVybiBsaXN0LnJldmVyc2UoKS5qb2luKGljZS5QVCkKCQl9CgkJcmV0dXJuIHRhcmdldAoJfSwKCV9wcm9maWxlOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgbGlzdCkgeyBjYW4uT3B0aW9uKHN2Zy5QSUQsIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgdGFyZ2V0KSkKCQlpZiAoY2FuLm9ubW90aW9uLmNhY2hlKGNhbiwgZnVuY3Rpb24oKSB7IHJldHVybiB0YXJnZXQuVmFsdWUoc3ZnLlBJRCkgfSwgY2FuLnVpLnByb2ZpbGUpKSB7IHJldHVybiB9CgoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi51aS5wcm9maWxlLCBbaHRtbC5BQ1RJT04sIGh0bWwuT1VUUFVUXSkKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGNhbi5vbmRldGFpbC5saXN0LCB1aS5hY3Rpb24sIHtfZW5naW5lOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQkJY2FuLm9uZGV0YWlsW2J1dHRvbl0oe3RhcmdldDogdGFyZ2V0fSwgY2FuLCBidXR0b24pCgkJfX0pCgoJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCkKCQlsaXN0ID0gKGxpc3R8fFtdKS5jb25jYXQoZmlndXJlLmRhdGEuY29weSwgW3N2Zy5YLCBzdmcuWSwgbWRiLklOREVYLCBjdHguQVJHU10pCgkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkub3V0cHV0LCBbe3R5cGU6IGh0bWwuVEFCTEUsIGNsYXNzTmFtZTogaHRtbC5DT05URU5ULCBsaXN0OiBbCgkJCXt0aDogW21kYi5LRVksIG1kYi5WQUxVRV19LCB7dGQ6IFttZGIuVFlQRSwgdGFyZ2V0LnRhZ05hbWVdfSwge3RkOiBbc3ZnLlBJRCwgdGFyZ2V0LlZhbHVlKHN2Zy5QSUQpXX0sCgkJXS5jb25jYXQoY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihrZXkpIHsKCQkJcmV0dXJuIGtleSA9IGZpZ3VyZS5kYXRhLnNpemVba2V5XXx8a2V5LCB7dGQ6IFtrZXksIHRhcmdldC5WYWx1ZShrZXkpXSwgb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5vbm1vdGlvbi5tb2RpZnkoY2FuLCBldmVudC50YXJnZXQsIGZ1bmN0aW9uKGV2ZW50LCB2YWx1ZSwgb2xkKSB7CgkJCQkJdGFyZ2V0LlZhbHVlKGtleSwgdmFsdWUpLCBjYW4ub25maWd1cmUuX21vdmUoY2FuLCB0YXJnZXQpCgkJCQl9KQoJCQl9fQoJCX0pKSB9XSkKCX0sCglkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgZ3JvdXApIHsgLy8ge3NoYXBlLCBwb2ludCwgc3R5bGUsIF9pbml0fQoJCXZhciBmaWd1cmUgPSBjYW4ub25maWd1cmVbdmFsdWUuc2hhcGVdLCBkYXRhID0gZmlndXJlLmRyYXcoZXZlbnQsIGNhbiwgdmFsdWUucG9pbnQsIHZhbHVlLnN0eWxlKQoJCWNhbi5jb3JlLkl0ZW0odmFsdWUuc3R5bGUsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgZGF0YVtrZXldID0gdmFsdWUgfSkKCQl2YXIgaXRlbSA9IGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIGZpZ3VyZS5kYXRhLm5hbWV8fHZhbHVlLnNoYXBlLCBkYXRhLCBncm91cHx8Y2FuLnN2Z3x8Y2FuLmdyb3VwKQoJCWNhbi5jb3JlLkl0ZW1DQih2YWx1ZSwgZnVuY3Rpb24oa2V5LCBjYikgeyBpdGVtW2tleV0gPSBjYiB9KQoJCS8vIHJldHVybiBjYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgaXRlbSksIGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSksIHZhbHVlLl9pbml0ICYmIHZhbHVlLl9pbml0KGl0ZW0pLCBpdGVtCgkJcmV0dXJuIGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSwgdmFsdWUuX2luaXQgJiYgdmFsdWUuX2luaXQoaXRlbSksIGl0ZW0KCX0sCglncm91cDogZnVuY3Rpb24oY2FuLCBuYW1lLCB2YWx1ZSwgZ3JvdXApIHsgZ3JvdXAgPSBncm91cHx8Y2FuLnN2Z3x8Y2FuLmdyb3VwCgkJdmFyIGcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgc3ZnLkcpOyBncm91cC5hcHBlbmQoZykKCQljYW4ub25pbXBvcnQuX2Jsb2NrKGNhbiwgZyksIGcuVmFsdWUoaHRtbC5DTEFTUywgbmFtZSksIGNhbi5vbmltcG9ydC5fZ3JvdXAoY2FuLCBnKS5jbGljaygpCgkJcmV0dXJuIHZhbHVlICYmIGcuVmFsdWUodmFsdWUpLCBnCgl9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9ORklHVVJFLCB7aGVscDogIuWbvuW9oue7mOWItiIsCglfZ2V0OiBmdW5jdGlvbihjYW4sIGl0ZW0sIG5hbWUpIHsKCQlyZXR1cm4gY2FuLm9uZmlndXJlW25hbWVdfHxjYW4ub25maWd1cmVbaXRlbS5nZXRBdHRyaWJ1dGUobWRiLk5BTUUpXXx8Y2FuLm9uZmlndXJlW2l0ZW0udGFnTmFtZV0KCX0sCglfcGlkOiBmdW5jdGlvbihjYW4sIGl0ZW0pIHsgaWYgKGl0ZW0uVmFsdWUoc3ZnLlBJRCkpIHsgcmV0dXJuIGl0ZW0uVmFsdWUoc3ZnLlBJRCkgfQoJCXZhciBwaWQgPSAicCIrY2FuLnN2Zy5WYWwobWRiLkNPVU5ULCBjYW4uc3ZnLlZhbChtZGIuQ09VTlQpKzEpCgkJaXRlbS5WYWx1ZShodG1sLkNMQVNTLCAoaXRlbS5WYWx1ZShodG1sLkNMQVNTKStpY2UuU1AraXRlbS5WYWx1ZShzdmcuUElELCBwaWQpKS50cmltKCkpCgkJcmV0dXJuIHBpZAoJfSwKCV9wdXNoOiBmdW5jdGlvbihjYW4sIHR5cGUsIGRhdGEsIHRhcmdldCkgewoJCXZhciBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIsIHR5cGUpCgkJdGFyZ2V0LmFwcGVuZENoaWxkKGNhbi5vbmltcG9ydC5fYmxvY2soY2FuLCBpdGVtKSksIGl0ZW0uVmFsdWUoZGF0YSkKCQlyZXR1cm4gaXRlbQoJfSwKCV9jb3B5OiBmdW5jdGlvbihldmVudCwgY2FuLCB0YXJnZXQpIHsKCQl2YXIgZGF0YSA9IHt9LCBmaWd1cmUgPSBjYW4ub25maWd1cmUuX2dldChjYW4sIHRhcmdldCksIHNpemUgPSBmaWd1cmUuZGF0YS5zaXplCgkJY2FuLmNvcmUuTGlzdChmaWd1cmUuZGF0YS5jb3B5LCBmdW5jdGlvbihpdGVtKSB7IGRhdGFbaXRlbV0gPSB0YXJnZXQuVmFsdWUoaXRlbSkgfSkKCQlkYXRhW3NpemUueHx8c3ZnLlhdID0gdGFyZ2V0LlZhbChzaXplLnh8fHN2Zy5YKSsxMAoJCWRhdGFbc2l6ZS55fHxzdmcuWV0gPSB0YXJnZXQuVmFsKHNpemUueXx8c3ZnLlkpKzEwCgkJcmV0dXJuIGNhbi5vbmZpZ3VyZS5fcHVzaChjYW4sIHRhcmdldC50YWdOYW1lLCBkYXRhLCBjYW4uZ3JvdXB8fGNhbi5zdmcpCgl9LAoJX21vdmU6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBsaXN0KSB7CgkJY2FuLmNvcmUuTGlzdChsaXN0fHx0YXJnZXQuVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbihzaGlwKSB7CgkJCXNoaXAudGFyZ2V0ID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3NoaXAucGlkKVswXQoJCQl2YXIgcCA9IGNhbi5vbmV4cG9ydC5hbmNob3IodGFyZ2V0LCBzaGlwLmFuY2hvciwge30pIAoJCQlpZiAoc2hpcC53aGljaCA9PSAxKSB7CgkJCQlzaGlwLnRhcmdldC5WYWwoc3ZnLlgxLCBwLngpLCBzaGlwLnRhcmdldC5WYWwoc3ZnLlkxLCBwLnkpCgkJCX0gZWxzZSBpZiAoc2hpcC53aGljaCA9PSAyKSB7CgkJCQlzaGlwLnRhcmdldC5WYWwoc3ZnLlgyLCBwLngpLCBzaGlwLnRhcmdldC5WYWwoc3ZnLlkyLCBwLnkpCgkJCX0KCQl9KQoJfSwKCglzdmc6IHsgLy8gPHN2ZyBoZWlnaHQ9IjIwMCIgd2lkdGg9IjYwMCIgY291bnQ9IjAiIGdyaWQ9IjEwIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ieWVsbG93IiBmaWxsPSJwdXJwbGUiIGZvbnQtc2l6ZT0iMjQiLz4KCQlkYXRhOiB7c2l6ZToge30sIGNvcHk6IFtdfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3NpemUoY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJfSwKCXRleHQ6IHsgLy8gPHRleHQgeD0iNjAiIHk9IjEwIj5oaTx0ZXh0PgoJCWRhdGE6IHtwb2ludHM6IDEsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5JTk5FUl19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCBzdHlsZSkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMSB8fCBldmVudC50eXBlID09ICJtb3VzZW1vdmUiKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCB0ZXh0ID0gc3R5bGUmJnN0eWxlLmlubmVyfHxjYW4udXNlci5wcm9tcHQobWRiLlRFWFQpCgkJCXJldHVybiB0ZXh0PyB7eDogcDAueCwgeTogcDAueSwgaW5uZXI6IHRleHR9OiBudWxsCgkJfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0KCX0sCgljaXJjbGU6IHsgLy8gPGNpcmNsZSByPSIyMCIgY3g9IjI1IiBjeT0iNzUiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCBzaXplOiB7aGVpZ2h0OiBzdmcuUiwgd2lkdGg6IHN2Zy5SLCB4OiBzdmcuQ1gsIHk6IHN2Zy5DWX0sIGNvcHk6IFtzdmcuUl19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7cjogcGFyc2VJbnQoTWF0aC5zcXJ0KE1hdGgucG93KHAwLngtcDEueCwgMikrTWF0aC5wb3cocDAueS1wMS55LCAyKSkpLCBjeDogcDAueCwgY3k6IHAwLnl9CgkJfSwKCX0sCgllbGxpcHNlOiB7IC8vIDxlbGxpcHNlIHJ5PSI1IiByeD0iMjAiIGN4PSI3NSIgY3k9Ijc1Ii8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge2hlaWdodDogc3ZnLlJZLCB3aWR0aDogc3ZnLlJYLCB4OiBzdmcuQ1gsIHk6IHN2Zy5DWX0sIGNvcHk6IFtzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXZhciBwMCA9IHBvaW50WzBdLCBwMSA9IHBvaW50WzFdCgkJCXJldHVybiB7cnk6IE1hdGguYWJzKHAwLnkgLSBwMS55KSwgcng6IE1hdGguYWJzKHAwLnggLSBwMS54KSwgY3g6IHAwLngsIGN5OiBwMC55fQoJCX0sCgl9LAoJcmVjdDogeyAvLyA8cmVjdCBoZWlnaHQ9IjMwIiB3aWR0aD0iMzAiIHJ5PSIxMCIgcng9IjEwIiB4PSI2MCIgeT0iMTAiLz4KCQlkYXRhOiB7cG9pbnRzOiAyLCByeTogNCwgcng6IDQsIHNpemU6IHt9LCBjb3B5OiBbaHRtbC5IRUlHSFQsIGh0bWwuV0lEVEgsIHN2Zy5SWSwgc3ZnLlJYXX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0KCQkJcmV0dXJuIHsKCQkJCWhlaWdodDogTWF0aC5hYnMocDAueS1wMS55KSwgd2lkdGg6IE1hdGguYWJzKHAwLngtcDEueCksIHJ5OiB0aGlzLmRhdGEucnksIHJ4OiB0aGlzLmRhdGEucngsCgkJCQl4OiBwMC54ID4gcDEueD8gcDEueDogcDAueCwgeTogcDAueSA+IHAxLnk/IHAxLnk6IHAwLnksCgkJCX0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0KSB7IHJldHVybiBkYXRhLnggPSB0YXJnZXQuVmFsKHN2Zy5YKSt0YXJnZXQuVmFsKGh0bWwuV0lEVEgpLzIsIGRhdGEueSA9IHRhcmdldC5WYWwoc3ZnLlkpK3RhcmdldC5WYWwoaHRtbC5IRUlHSFQpLzIsIGRhdGEgfSwKCX0sCglsaW5lOiB7IC8vIDxsaW5lIHgxPSIxMCIgeTE9IjUwIiB4Mj0iMTEwIiB5Mj0iMTUwIiB4eD0iMTAwIiB5eT0iMTAwIi8+CgkJZGF0YToge3BvaW50czogMiwgc2l6ZToge3g6IHN2Zy5YMSwgeTogc3ZnLlkxfSwgY29weTogW3N2Zy5YMSwgc3ZnLlkxLCBzdmcuWDIsIHN2Zy5ZMl19LAoJCWdyaWQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJCXZhciBwID0gcG9pbnRbcG9pbnQubGVuZ3RoLTFdLCBwb3MgPSBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIHRhcmdldCkKCQkJdGFyZ2V0LlZhbCAmJiBjYW4ub25leHBvcnQuYW5jaG9yKHRhcmdldCwgcG9zLCBwKQoJCQlyZXR1cm4gcC50YXJnZXQgPSB0YXJnZXQsIHAuYW5jaG9yID0gcG9zLCBwb2ludAoJCX0sCgkJZHJhdzogZnVuY3Rpb24oZXZlbnQsIGNhbiwgcG9pbnQpIHsgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCQkJdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0sIHNoaXAgPSBbXQoJCQlwMC50YXJnZXQgJiYgcDAudGFyZ2V0LlZhbHVlICYmIHNoaXAucHVzaCh7cGlkOiBwMC50YXJnZXQuVmFsdWUoc3ZnLlBJRCl9KQoJCQlwMS50YXJnZXQgJiYgcDEudGFyZ2V0LlZhbHVlICYmIHNoaXAucHVzaCh7cGlkOiBwMS50YXJnZXQuVmFsdWUoc3ZnLlBJRCl9KQoJCQlyZXR1cm4ge3gxOiBwMC54LCB5MTogcDAueSwgeDI6IHAxLngsIHkyOiBwMS55LCBzaGlwOiBzaGlwLmxlbmd0aCA+IDA/IHNoaXA6IHVuZGVmaW5lZH0KCQl9LAoJCXRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7IHJldHVybiBkYXRhLnggPSAodGFyZ2V0LlZhbChzdmcuWDEpK3RhcmdldC5WYWwoc3ZnLlgyKSkvMiwgZGF0YS55ID0gKHRhcmdldC5WYWwoc3ZnLlkxKSt0YXJnZXQuVmFsKHN2Zy5ZMikpLzIsIGRhdGEgfSwKCQlzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHJldHVybiAiPCgiKyh0YXJnZXQuVmFsKHN2Zy5ZMiktdGFyZ2V0LlZhbChzdmcuWTEpKStpY2UuRlMrKHRhcmdldC5WYWwoc3ZnLlgyKS10YXJnZXQuVmFsKHN2Zy5YMSkpKyIpIitjYW4ub25leHBvcnQuX3Bvc2l0aW9uKGNhbiwgdGFyZ2V0LCBmaWd1cmUpIH0sCgl9LAoJYmxvY2s6IHsgLy8gPHJlY3QgaGVpZ2h0PSIzMCIgd2lkdGg9IjMwIiByeT0iMTAiIHJ4PSIxMCIgeD0iNjAiIHk9IjEwIi8+CgkJZGF0YToge3BvaW50czogMiwgcnk6IDQsIHJ4OiA0LCBzaXplOiB7fSwgY29weTogW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBzdmcuUlksIHN2Zy5SWF19LAoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7IGlmIChwb2ludC5sZW5ndGggPCAyKSB7IHJldHVybiB9CgkJCXRoaXMuX3RlbXAgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgdGhpcy5fdGVtcCkgJiYgZGVsZXRlKHRoaXMuX3RlbXApCgkJCXRoaXMuX3RlbXAgPSBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBzdmcuRywge30sIGNhbi5ncm91cHx8Y2FuLnN2ZykKCgkJCXZhciByZWN0ID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgc3ZnLlJFQ1QsIGNhbi5vbmZpZ3VyZS5yZWN0LmRyYXcoZXZlbnQsIGNhbiwgcG9pbnQpLCB0aGlzLl90ZW1wKQoJCQlpZiAoZXZlbnQudHlwZSA9PSBodG1sLkNMSUNLKSB7CgkJCQljYW4ub25maWd1cmUuX3BpZChjYW4sIHJlY3QpLCBkZWxldGUodGhpcy5fdGVtcCkKCQkJfQoJCX0sCgkJdGV4dDogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsgY2FuLm9uZmlndXJlLnJlY3QudGV4dChjYW4sIGRhdGEsIHRhcmdldCkgfSwKCX0sCn0sIFtdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZTogewoJCW5vcm1hbDogewoJCQlncjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJydW4iKSB9LAoJCQlnYTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsICJhdXRvIikgfSwKCQkJZ206IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbigiZ28iLCAibWFudWFsIikgfSwKCgkJCWFkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oIm1vZGUiLCAiZHJhdyIpIH0sCgkJCWFyOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oIm1vZGUiLCAicmVzaXplIikgfSwKCgkJCXN0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuVEVYVCkgfSwKCQkJc3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5SRUNUKSB9LAoJCQlzbDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkxJTkUpIH0sCgkJCXNjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBzdmcuQ0lSQ0xFKSB9LAoJCQlzZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKHN2Zy5TSEFQRSwgc3ZnLkVMTElQU0UpIH0sCgoJCQljcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuUkVEKSB9LAoJCQljYjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQkxVRSkgfSwKCQkJY2c6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkdSRUVOKSB9LAoJCQljeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuWUVMTE9XKSB9LAoJCQljcDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuUFVSUExFKSB9LAoJCQljYzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuQ1lBTikgfSwKCQkJY2g6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLlNUUk9LRSwgY2xpLkJMQUNLKSB9LAoJCQljdzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuU1RST0tFLCBjbGkuV0hJVEUpIH0sCgoJCQlmcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLlJFRCkgfSwKCQkJZmI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5CTFVFKSB9LAoJCQlmZzogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLkdSRUVOKSB9LAoJCQlmeTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGh0bWwuRklMTCwgY2xpLllFTExPVykgfSwKCQkJZnA6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5QVVJQTEUpIH0sCgkJCWZjOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmFjdGlvbi5fY2hhbmdlKGNhbiwgaHRtbC5GSUxMLCBjbGkuQ1lBTikgfSwKCQkJZmg6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5CTEFDSykgfSwKCQkJZnc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBodG1sLkZJTEwsIGNsaS5XSElURSkgfSwKCQl9LAoJfSwgX2VuZ2luZToge30sCn0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi57uE5Lu26I+c5Y2VIiwgbGlzdDogWwoJCVtodG1sLlNUUk9LRV9XSURUSCwgMSwgMiwgMywgNCwgNV0sCgkJW2h0bWwuU1RST0tFLCBjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRSwgY2xpLkJMQUNLLCBjbGkuV0hJVEVdLAoJCVtodG1sLkZJTEwsIGNsaS5SRUQsIGNsaS5ZRUxMT1csIGNsaS5HUkVFTiwgY2xpLkNZQU4sIGNsaS5CTFVFLCBjbGkuUFVSUExFLCBjbGkuQkxBQ0ssIGNsaS5XSElURSwgIiMwMDAwIl0sCgkJW2h0bWwuRk9OVF9TSVpFLCAxMiwgMTYsIDE4LCAyNCwgMzJdLAoKCQlbImdvIiwgaWNlLlJVTiwgaWNlLkFVVE8sICJtYW51YWwiXSwKCQlbIm1vZGUiLCAiZHJhdyIsICJyZXNpemUiXSwKCQlbc3ZnLlNIQVBFLCBzdmcuVEVYVCwgc3ZnLkNJUkNMRSwgc3ZnLkVMTElQU0UsIHN2Zy5SRUNULCBzdmcuTElORSwgc3ZnLkJMT0NLXSwKCQlbc3ZnLkdSSUQsIDEsIDIsIDMsIDQsIDUsIDEwLCAyMF0sCgldLCBtZW51X2xpc3Q6IFtpY2UuSElERSwgaWNlLlNIT1csIG1kYi5DUkVBVEUsIGNsaS5DTEVBUiwgbWRiLlJFTU9WRV0sCglfY2hhbmdlOiBmdW5jdGlvbihjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLmdyb3VwLlZhbHVlKGtleSwgdmFsdWUpIH0sCgkic3Ryb2tlLXdpZHRoIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCglzdHJva2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLm9uYWN0aW9uLl9jaGFuZ2UoY2FuLCBrZXksIHZhbHVlKSB9LAoJZmlsbDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCgkiZm9udC1zaXplIjogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4ub25hY3Rpb24uX2NoYW5nZShjYW4sIGtleSwgdmFsdWUpIH0sCgoJZ286IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSB9LAoJbW9kZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCglzaGFwZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpIH0sCgoJZWRpdDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uQWN0aW9uKCJnbyIsIGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTj8gaWNlLkFVVE86IGljZS5SVU4pIH0sCglzYXZlOiBmdW5jdGlvbihldmVudCwgY2FuLCBidXR0b24pIHsKCQljYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50LCB7Y29udGVudDogY2FuLm9uZXhwb3J0LmNvbnRlbnQoY2FuLCBjYW4uc3ZnKX0pLCBidXR0b24sIFtjYW4uT3B0aW9uKG5mcy5QQVRIKV0pCgl9LAoKCXByb2plY3Q6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGNhbi51aS5wcm9qZWN0KSB9LAoJcHJvZmlsZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLnVpLnByb2ZpbGUpIH0sCglzaG93OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5zaG93KGNhbiwge2ludGVydmFsOiAxMDAsIGxlbmd0aDogMTB9LCBudWxsLCBjYW4uZ3JvdXApIH0sCgloaWRlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi5oaWRlKGNhbiwge2ludGVydmFsOiAxMDAsIGxlbmd0aDogMTB9LCBudWxsLCBjYW4uZ3JvdXApIH0sCgljcmVhdGU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbc3ZnLkdST1VQXSwgZnVuY3Rpb24obGlzdCkgeyB2YXIgbmFtZSA9IGxpc3RbMF0KCQkJdmFyIGdyb3VwID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgbmFtZSkKCQkJY2FuLmNvcmUuTGlzdChbaHRtbC5TVFJPS0VfV0lEVEgsIGh0bWwuU1RST0tFLCBodG1sLkZJTEwsIGh0bWwuRk9OVF9TSVpFXSwgZnVuY3Rpb24obmFtZSkgewoJCQkJZ3JvdXAuVmFsdWUobmFtZSwgY2FuLkFjdGlvbihuYW1lKSkKCQkJfSkKCQl9KQoJfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBpZiAoY2FuLmdyb3VwID09IGNhbi5zdmcpIHsgcmV0dXJuIH0KCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uZ3JvdXApCgl9LAoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uZ3JvdXApLCBjYW4ucG9pbnQgPSBbXSwgZGVsZXRlKGNhbi50ZW1wKQoJfSwKCglfbW9kZTogewoJCWRyYXc6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50KSB7CgkJCXZhciBzaGFwZSA9IGNhbi5BY3Rpb24oc3ZnLlNIQVBFKSwgZmlndXJlID0gY2FuLm9uZmlndXJlW3NoYXBlXQoJCQlmaWd1cmUuZ3JpZCAmJiBmaWd1cmUuZ3JpZChldmVudCwgY2FuLCBwb2ludCkKCgkJCXZhciBkYXRhID0gZmlndXJlLmRyYXcgJiYgZmlndXJlLmRyYXcoZXZlbnQsIGNhbiwgcG9pbnQpCgkJCXZhciBpdGVtID0gZGF0YSAmJiBjYW4ub25maWd1cmUuX3B1c2goY2FuLCBmaWd1cmUuZGF0YS5uYW1lfHxzaGFwZSwgZGF0YSwgY2FuLmdyb3VwfHxjYW4uc3ZnKQoJCQlldmVudC50eXBlID09IGh0bWwuQ0xJQ0sgJiYgcG9pbnQubGVuZ3RoID09PSBmaWd1cmUuZGF0YS5wb2ludHMgJiYgKGNhbi5wb2ludCA9IFtdKSAKCgkJCWlmIChldmVudC50eXBlID09IGh0bWwuQ0xJQ0sgJiYgaXRlbSkgewoJCQkJdmFyIHBpZCA9IGNhbi5vbmZpZ3VyZS5fcGlkKGNhbiwgaXRlbSk7IGNhbi5jb3JlLkxpc3QocG9pbnQsIGZ1bmN0aW9uKHAsIGkpIHsgaWYgKCFwLnRhcmdldCkgeyByZXR1cm4gfQoJCQkJCXAudGFyZ2V0LlZhbHVlKGljZS5TSElQLCBwLnRhcmdldC5WYWx1ZShpY2UuU0hJUCkuY29uY2F0KFt7cGlkOiBwaWQsIHdoaWNoOiBpKzEsIGFuY2hvcjogcC5hbmNob3J9XSkpCgkJCQl9KQoJCQl9CgkJCXJldHVybiBpdGVtCgkJfSwKCQlyZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50LCB0YXJnZXQpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxldmVudC50YXJnZXQKCQkJaWYgKGV2ZW50LnR5cGUgPT0gaHRtbC5DTElDSykgewoJCQkJaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7CgkJCQkJY2FuLmN1cnJlbnQgPSB7dGFyZ2V0OiB0YXJnZXQsIGJlZ2luOiBjYW4uY29yZS5MaXN0KFt0YXJnZXRdLCBmdW5jdGlvbihpdGVtKSB7IGlmIChjYW4ucGFnZS50YWdpcyhzdmcuRywgaXRlbSkpIHsgcmV0dXJuIH0KCQkJCQkJcmV0dXJuIHsKCQkJCQkJCWhlaWdodDogaXRlbS5WYWwoaHRtbC5IRUlHSFQpLCB3aWR0aDogaXRlbS5WYWwoaHRtbC5XSURUSCksIHg6IGl0ZW0uVmFsKHN2Zy5YKSwgeTogaXRlbS5WYWwoc3ZnLlkpLAoJCQkJCQkJdGFyZ2V0OiBpdGVtLCBzaGlwOiBjYW4uY29yZS5MaXN0KGl0ZW0uVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbihzaGlwKSB7CgkJCQkJCQkJcmV0dXJuIHNoaXAucGlkICYmIChzaGlwLnRhcmdldCA9IGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtzaGlwLnBpZClbMF0pICYmIHNoaXAKCQkJCQkJCX0pCgkJCQkJCX0KCQkJCQl9KSwgcG9zOiBjYW4ub25leHBvcnQuY3Vyc29yKGV2ZW50LCBjYW4sIHRhcmdldCl9CgkJCQkJcmV0dXJuCgkJCQl9CgkJCQlyZXR1cm4gY2FuLnBvaW50ID0gW10sIGRlbGV0ZShjYW4uY3VycmVudCkKCQkJfQoKCQkJY2FuLmN1cnJlbnQgJiYgY2FuLmNvcmUuTGlzdChjYW4uY3VycmVudC5iZWdpbiwgZnVuY3Rpb24oaXRlbSkgeyB2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCBpdGVtLnRhcmdldCkKCQkJCWNhbi5vbmV4cG9ydC5yZXNpemUoZXZlbnQsIGl0ZW0udGFyZ2V0LCBpdGVtLCBwb2ludFswXSwgcG9pbnRbMV0sIGNhbi5jdXJyZW50LnBvcykKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtpdGVtLnRhcmdldC5WYWx1ZShtZGIuVEVYVCksIGZ1bmN0aW9uKHRleHQpIHsKCQkJCQl0ZXh0LlZhbHVlKGNhbi5vbmV4cG9ydC5fdGV4dChjYW4sIGl0ZW0udGFyZ2V0LCBmaWd1cmUsIHt9KSkKCQkJCX0pLCBjYW4ub25maWd1cmUuX21vdmUoY2FuLCBpdGVtLnRhcmdldCwgaXRlbS5zaGlwKQoJCQl9KQoJCX0sCgkJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkgfSwKCX0sCglfYXV0bzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsKCQlpZiAoY2FuLnBvaW50Lmxlbmd0aCA+IDApIHsgcmV0dXJuIH0KCQlpZiAodGFyZ2V0LnRhZ05hbWUgPT0gbWRiLlRFWFQpIHsgcmV0dXJuIH0KCgkJdmFyIHBvcyA9IGNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KQoJCWlmICh0YXJnZXQgPT0gY2FuLnN2ZykgewoJCQlpZiAocG9zID09IDUpIHsKCQkJCWNhbi5BY3Rpb24oaWNlLk1PREUsICJkcmF3IiksIGNhbi5BY3Rpb24oc3ZnLlNIQVBFLCBodG1sLkJMT0NLKQoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIHtjdXJzb3I6ICJjcm9zc2hhaXIifSkKCQkJfSBlbHNlIHsKCQkJCWNhbi5BY3Rpb24oaWNlLk1PREUsICJyZXNpemUiKQoJCQl9CgkJfSBlbHNlIHsKCQkJc3dpdGNoIChwb3MpIHsKCQkJCWNhc2UgNToKCQkJCWNhc2UgOTogY2FuLkFjdGlvbihpY2UuTU9ERSwgInJlc2l6ZSIpOyBicmVhawoJCQkJZGVmYXVsdDogY2FuLkFjdGlvbihpY2UuTU9ERSwgImRyYXciKSwgY2FuLkFjdGlvbihzdmcuU0hBUEUsIHN2Zy5MSU5FKQoJCQl9CgkJfQoJfSwKCV9maWd1cmU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHBvaW50cywgdGFyZ2V0KSB7CgkJY2FuLnRlbXAgJiYgY2FuLnBhZ2UuUmVtb3ZlKGNhbiwgY2FuLnRlbXApICYmIGRlbGV0ZShjYW4udGVtcCkKCQljYW4udGVtcCA9IGNhbi5jb3JlLkNhbGxGdW5jKFtjYW4ub25hY3Rpb24uX21vZGUsIGNhbi5BY3Rpb24oaWNlLk1PREUpXSwgW2V2ZW50LCBjYW4sIHBvaW50cywgdGFyZ2V0XSkKCQljYW4ucG9pbnQubGVuZ3RoID09IDAgJiYgZGVsZXRlKGNhbi50ZW1wKQoJfSwKCglvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25leHBvcnQuX3Nob3coY2FuLCBldmVudC50YXJnZXQpIH0sCglvbm1vdXNlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgcG9pbnQgPSBjYW4ub25leHBvcnQuX3BvaW50KGV2ZW50LCBjYW4pCgkJaWYgKGNhbi5BY3Rpb24oImdvIikgPT0gaWNlLlJVTikgeyByZXR1cm4gfQoJCWNhbi5vbmV4cG9ydC5jdXJzb3IoZXZlbnQsIGNhbiwgZXZlbnQudGFyZ2V0KQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5BVVRPKSB7IGNhbi5vbmFjdGlvbi5fYXV0byhjYW4sIGV2ZW50LnRhcmdldCkgfQoJCWNhbi5vbmFjdGlvbi5fZmlndXJlKGV2ZW50LCBjYW4sIGNhbi5wb2ludC5jb25jYXQocG9pbnQpKQoJfSwKCW9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHBvaW50ID0gY2FuLm9uZXhwb3J0Ll9wb2ludChldmVudCwgY2FuKQoJCWlmIChjYW4uQWN0aW9uKCJnbyIpID09IGljZS5SVU4pIHsgY2FuLm9uaW1wb3J0Ll9wcm9maWxlKGNhbiwgZXZlbnQudGFyZ2V0KQoJCQlyZXR1cm4gZXZlbnQuc2hpZnRLZXk/IGNhbi5vbmFjdGlvbi5fbW9kZS5ydW4oZXZlbnQsIGNhbik6IGNhbi5vbmRldGFpbC5ydW4oZXZlbnQsIGNhbikKCQl9CgkJY2FuLm9uYWN0aW9uLl9maWd1cmUoZXZlbnQsIGNhbiwgY2FuLnBvaW50ID0gY2FuLnBvaW50LmNvbmNhdChwb2ludCkpCgl9LAoJb25kYmxjbGljazogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubGFiZWwoZXZlbnQsIGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnu4Tku7bor6bmg4UiLCBsaXN0OiBbY2xpLlNUQVJULCBpY2UuUlVOLCBpY2UuQ09QWSwgaHRtbC5MQUJFTCwgbWRiLk1PRElGWSwgInRvaW1hZ2UiLCBtZGIuUkVNT1ZFXSwKCXN0YXJ0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQl2YXIgbGlzdCA9IFt0YXJnZXRdLCBkaWN0ID0ge30KCQlmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsgdmFyIHNoaXAgPSBsaXN0W2ldLlZhbHVlKCJzaGlwIikKCQkJZm9yICh2YXIgaiA9IDA7IGogPCBzaGlwLmxlbmd0aDsgaisrKSB7IHZhciBwaWQgPSBzaGlwW2pdLnBpZAoJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCXZhciBwaWQgPSBpdGVtLlZhbHVlKCJzaGlwIilbMV0ucGlkCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLnN2ZywgaWNlLlBUK3BpZCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQkhZGljdFtwaWRdICYmIGxpc3QucHVzaChpdGVtKSwgZGljdFtwaWRdID0gdHJ1ZQoJCQkJCX0pCgkJCQl9KQoJCQl9CgkJfQoJCWNhbi5jb3JlLk5leHQobGlzdCwgZnVuY3Rpb24oaXRlbSwgbmV4dCkgeyBjYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9ubW90aW9uLnNob3coY2FuLCB7aW50ZXJ2YWw6IDMwMCwgbGVuZ3RoOiAxMH0sIG51bGwsIGl0ZW0pIAoJCQljYW4udXNlci50b2FzdChjYW4sIGl0ZW0uVmFsdWUoImluZGV4IikpCgkJCWNhbi5vbmRldGFpbC5ydW4oe3RhcmdldDogaXRlbX0sIGNhbiksIG5leHQoKQoJCX0pIH0pCgl9LAoJcnVuOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQlpZiAoIXRhcmdldC5WYWx1ZShzdmcuUElEKSkgeyBjYW4ub25maWd1cmUuX3BpZChjYW4sIHRhcmdldCkgfQoJCWlmIChjYW4ub25tb3Rpb24uY2FjaGUoY2FuLCBmdW5jdGlvbigpIHsgcmV0dXJuIHRhcmdldC5WYWx1ZShzdmcuUElEKSB9LCBjYW4udWkuZGlzcGxheSkpIHsgcmV0dXJuIH0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpc3BsYXkpLCBjYW4uc3ZnLlZhbHVlKHN2Zy5QSUQsIHRhcmdldC5WYWx1ZShzdmcuUElEKSkKCQl2YXIgaW5kZXggPSB0YXJnZXQuVmFsdWUobWRiLklOREVYKTsgaW5kZXggJiYgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiBjaGF0LlNUT1JZLCBpbmRleDogaW5kZXgsIGFyZ3M6IHRhcmdldC5WYWx1ZShjdHguQVJHUyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCktY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQpLTQqaHRtbC5BQ1RJT05fSEVJR0hUKSwgc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCkpCgkJCWNhbi5vbm1vdGlvbi5oaWRkZW4oY2FuLCBzdWIuX2xlZ2VuZCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkuZGlzcGxheSwgdHJ1ZSkKCQl9LCBjYW4udWkuZGlzcGxheSkKCX0sCgl0b2ltYWdlOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2ltYWdlKGV2ZW50LCBjYW4sIGNhbi5PcHRpb24obmZzLlBBVEgpLnNwbGl0KGljZS5QUykucG9wKCkuc3BsaXQoaWNlLlBUKVswXSwgY2FuLnN2ZykgfSwKCWNvcHk6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZmlndXJlLl9jb3B5KGV2ZW50LCBjYW4sIGV2ZW50LnRhcmdldCkgfSwKCWxhYmVsOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQKCQl2YXIgZGVmID0gdGFyZ2V0LlZhbHVlKG1kYi5URVhUKTsgZGVmICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtkZWYsIGZ1bmN0aW9uKGl0ZW0pIHsgZGVmID0gaXRlbS5WYWx1ZShodG1sLklOTkVSKSB9KQoKCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe25hbWU6IGh0bWwuTEFCRUwsIHZhbHVlOiBkZWZ9XSwgZnVuY3Rpb24obGlzdCkgeyB2YXIgdGV4dCA9IGxpc3RbMF0KCQkJaWYgKHRhcmdldC50YWdOYW1lID09IGh0bWwuVEVYVCkgeyByZXR1cm4gdGFyZ2V0LmlubmVySFRNTCA9IHRleHQgfQoJCQlpZiAoZGVmICYmIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5zdmcsIGljZS5QVCtkZWYsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5WYWx1ZShodG1sLklOTkVSLCB0ZXh0KSB9KS5sZW5ndGggPiAwKSB7IHJldHVybiB9CgoJCQl2YXIgZmlndXJlID0gY2FuLm9uZmlndXJlLl9nZXQoY2FuLCB0YXJnZXQpCgkJCXZhciBkYXRhID0gY2FuLm9uZXhwb3J0Ll90ZXh0KGNhbiwgdGFyZ2V0LCBmaWd1cmUsIHtpbm5lcjogdGV4dH0pCgkJCXZhciBpdGVtID0gY2FuLm9uZmlndXJlLl9wdXNoKGNhbiwgaHRtbC5URVhULCBkYXRhLCB0YXJnZXQuR3JvdXAoKSkKCQkJdGFyZ2V0LlZhbHVlKG1kYi5URVhULCBjYW4ub25maWd1cmUuX3BpZChjYW4sIGl0ZW0pKQoJCX0pCgl9LAoJbW9kaWZ5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5fcHJvZmlsZShjYW4sIGV2ZW50LnRhcmdldCkgfSwKCXJlbW92ZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0CgkJaWYgKHRhcmdldCA9PSBjYW4uc3ZnKSB7IHJldHVybiB9CgkJY2FuLmNvcmUuTGlzdCh0YXJnZXQuVmFsdWUoaWNlLlNISVApLCBmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrdmFsdWUucGlkLCBmdW5jdGlvbihpdGVtKSB7CgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCQl9KQoJCX0pCgkJdGFyZ2V0LlZhbHVlKG1kYi5URVhUKSAmJiBjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uc3ZnLCBpY2UuUFQrdGFyZ2V0LlZhbHVlKG1kYi5URVhUKSwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBpdGVtKQoJCX0pLCBjYW4ucGFnZS5SZW1vdmUoY2FuLCB0YXJnZXQpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFtzdmcuR1JPVVAsICJmaWd1cmUiLCAiaW5kZXgiLCAicG9zIl0sCglfc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgdmFyIGZpZ3VyZSA9IGNhbi5vbmZpZ3VyZS5fZ2V0KGNhbiwgdGFyZ2V0KQoJCWZ1bmN0aW9uIHNob3coKSB7IHJldHVybiBjYW4ub25leHBvcnQuX3NpemUoY2FuLCB0YXJnZXQsIGZpZ3VyZSkraWNlLlNQK2Nhbi5vbmV4cG9ydC5fcG9zaXRpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSkgfQoJCWNhbi5TdGF0dXMoImZpZ3VyZSIsIHRhcmdldC50YWdOYW1lKyI6Iit0YXJnZXQuVmFsdWUoc3ZnLlBJRCkraWNlLlNQKyhmaWd1cmU/IChmaWd1cmUuc2hvd3x8c2hvdykoY2FuLCB0YXJnZXQsIGZpZ3VyZSk6ICIiKSkKCQljYW4uU3RhdHVzKHN2Zy5HUk9VUCwgdGFyZ2V0Lkdyb3VwcygpfHxjYW4uZ3JvdXAuR3JvdXBzKCl8fGh0bWwuU1ZHKQoJCWNhbi5TdGF0dXMoImluZGV4IiwgdGFyZ2V0LlZhbHVlKCJpbmRleCIpKQoJfSwKCV9zaXplOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlyZXR1cm4gIjwoIit0YXJnZXQuVmFsKHNpemVbaHRtbC5IRUlHSFRdfHxodG1sLkhFSUdIVCkraWNlLkZTK3RhcmdldC5WYWwoc2l6ZVtodG1sLldJRFRIXXx8aHRtbC5XSURUSCkrIikiCgl9LAoJX3Bvc2l0aW9uOiBmdW5jdGlvbihjYW4sIHRhcmdldCwgZmlndXJlKSB7IHZhciBzaXplID0gZmlndXJlLmRhdGEuc2l6ZXx8e30KCQlyZXR1cm4gIkAoIit0YXJnZXQuVmFsKHNpemVbc3ZnLlhdfHxzdmcuWCkraWNlLkZTK3RhcmdldC5WYWwoc2l6ZVtzdmcuWV18fHN2Zy5ZKSsiKSIKCX0sCglfdGV4dDogZnVuY3Rpb24oY2FuLCB0YXJnZXQsIGZpZ3VyZSwgZGF0YSkgeyB2YXIgc2l6ZSA9IGZpZ3VyZS5kYXRhLnNpemV8fHt9CgkJaWYgKGZpZ3VyZS50ZXh0KSB7IHJldHVybiBmaWd1cmUudGV4dChjYW4sIGRhdGEsIHRhcmdldCkgfQoJCXJldHVybiBkYXRhLnggPSB0YXJnZXQuVmFsKHNpemVbc3ZnLlhdfHxzdmcuWCksIGRhdGEueSA9IHRhcmdldC5WYWwoc2l6ZVtzdmcuWV18fHN2Zy5ZKSwgZGF0YQoJfSwKCV9wb2ludDogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBwID0gY2FuLnN2Zy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKQoJCXZhciBwb2ludCA9IHt4OiBldmVudC5jbGllbnRYLXAueCwgeTogZXZlbnQuY2xpZW50WS1wLnl9CgkJcG9pbnQueCA9IHBvaW50LnggLSBwb2ludC54ICUgcGFyc2VJbnQoY2FuLkFjdGlvbihzdmcuR1JJRCkpCgkJcG9pbnQueSA9IHBvaW50LnkgLSBwb2ludC55ICUgcGFyc2VJbnQoY2FuLkFjdGlvbihzdmcuR1JJRCkpCgkJcmV0dXJuIGNhbi5TdGF0dXMoInBvcyIsIHBvaW50LngraWNlLkZTK3BvaW50LnkpLCBwb2ludAoJfSwKCWNvbnRlbnQ6IGZ1bmN0aW9uKGNhbiwgc3ZnKSB7CgkJcmV0dXJuIFsnPHN2ZyB2ZXJ0aW9uPSIxLjEiIHhtbG5zPSJodHRwczovL3d3dy53My5vcmcvMjAwMC9zdmciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiJ10uY29uY2F0KAoJCQlzdmc/IGNhbi5jb3JlLkxpc3QoW2h0bWwuSEVJR0hULCBodG1sLldJRFRILCBtZGIuQ09VTlQsIHN2Zy5QSUQsIHN2Zy5HUklELCBodG1sLlNUUk9LRV9XSURUSCwgaHRtbC5TVFJPS0UsIGh0bWwuRklMTCwgaHRtbC5GT05UX1NJWkVdLCBmdW5jdGlvbihpdGVtKSB7CgkJCQlyZXR1cm4gc3ZnLlZhbHVlKGl0ZW0pPyBpY2UuU1AgKyBpdGVtICsgJz0iJyArIHN2Zy5WYWx1ZShpdGVtKSArICciJzogIiIKCQkJfSk6IFsiIGhlaWdodD0iKygoY2FuLkNvbmZIZWlnaHQoKXx8NDUwKS01MCkrIiB3aWR0aD0iKyhjYW4uQ29uZldpZHRoKCl8fDYwMCldKS5jb25jYXQoWyc+Jywgc3ZnPyBzdmcuaW5uZXJIVE1MOiAiIiwgIjwvc3ZnPiJdKS5qb2luKCIiKQoJfSwKCgljdXJzb3I6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGl0ZW0sIHNob3cpIHsKCQl2YXIgcCA9IGl0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkKCQl2YXIgcSA9IHt4OiBldmVudC5jbGllbnRYLCB5OiBldmVudC5jbGllbnRZfQoKCQl2YXIgcG9zID0gNSwgbWFyZ2luID0gMjAKCQl2YXIgeSA9IChxLnktcC55KS9wLmhlaWdodAoJCWlmICh5IDwgMC4yICYmIHEueS1wLnkgPCBtYXJnaW4pIHsKCQkJcG9zIC09IDMKCQl9IGVsc2UgaWYgKHkgPiAwLjggJiYgcS55LXAueS1wLmhlaWdodCA+IC1tYXJnaW4pIHsKCQkJcG9zICs9IDMKCQl9CgkJdmFyIHggPSAocS54LXAueCkvcC53aWR0aAoJCWlmICh4IDwgMC4yICYmIHEueC1wLnggPCBtYXJnaW4pIHsKCQkJcG9zIC09IDEKCQl9IGVsc2UgaWYgKHggPiAwLjggJiYgcS54LXAueC0gcC53aWR0aCA+IC1tYXJnaW4pIHsKCQkJcG9zICs9IDEKCQl9CgoJCXJldHVybiAoc2hvd3x8Y2FuLnN2Zykuc3R5bGUuY3Vyc29yID0gWwoJCQkibnctcmVzaXplIiwgIm4tcmVzaXplIiwgIm5lLXJlc2l6ZSIsCgkJCSJ3LXJlc2l6ZSIsICJtb3ZlIiwgImUtcmVzaXplIiwKCQkJInN3LXJlc2l6ZSIsICJzLXJlc2l6ZSIsICJzZS1yZXNpemUiLAoJCV1bcG9zLTFdLCBwb3MKCX0sCglhbmNob3I6IGZ1bmN0aW9uKHRhcmdldCwgcG9zLCBwb2ludCkgewoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSAyOgoJCQljYXNlIDM6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkKCQkJCWJyZWFrCgkJCWNhc2UgNDoKCQkJY2FzZSA1OgoJCQljYXNlIDY6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkgKyB0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKSAvIDIKCQkJCWJyZWFrCgkJCWNhc2UgNzoKCQkJY2FzZSA4OgoJCQljYXNlIDk6CgkJCQlwb2ludC55ID0gdGFyZ2V0LlZhbChzdmcuWSkgKyB0YXJnZXQuVmFsKGh0bWwuSEVJR0hUKQoJCQkJYnJlYWsKCQl9CgoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMToKCQkJY2FzZSA0OgoJCQljYXNlIDc6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkKCQkJCWJyZWFrCgkJCWNhc2UgMjoKCQkJY2FzZSA1OgoJCQljYXNlIDg6CgkJCQlwb2ludC54ID0gdGFyZ2V0LlZhbChzdmcuWCkgKyB0YXJnZXQuVmFsKGh0bWwuV0lEVEgpIC8gMgoJCQkJYnJlYWsKCQkJY2FzZSAzOgoJCQljYXNlIDY6CgkJCWNhc2UgOToKCQkJCXBvaW50LnggPSB0YXJnZXQuVmFsKHN2Zy5YKSArIHRhcmdldC5WYWwoaHRtbC5XSURUSCkKCQkJCWJyZWFrCgkJfQoJCXJldHVybiBwb2ludAoJfSwKCXJlc2l6ZTogZnVuY3Rpb24oZXZlbnQsIGl0ZW0sIGJlZ2luLCBwMCwgcDEsIHBvcykgewoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgNToKCQkJCWl0ZW0uVmFsdWUoc3ZnLlgsIGJlZ2luLnggKyBwMS54IC0gcDAueCkKCQkJCWl0ZW0uVmFsdWUoc3ZnLlksIGJlZ2luLnkgKyBwMS55IC0gcDAueSkKCQkJCXJldHVybgoJCX0KCgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDI6CgkJCWNhc2UgMzoKCQkJCWl0ZW0uVmFsdWUoc3ZnLlksIGJlZ2luLnkgKyBwMS55IC0gcDAueSkKCQkJCWl0ZW0uVmFsdWUoaHRtbC5IRUlHSFQsIGJlZ2luLmhlaWdodCAtIHAxLnkgKyBwMC55KQoJCQkJYnJlYWsKCQl9CgkJc3dpdGNoIChwb3MpIHsKCQkJY2FzZSAxOgoJCQljYXNlIDQ6CgkJCWNhc2UgNzoKCQkJCWl0ZW0uVmFsdWUoc3ZlLlgsIGJlZ2luLnggKyBwMS54IC0gcDAueCkKCQkJCWl0ZW0uVmFsdWUoaHRtbC5XSURUSCwgYmVnaW4ud2lkdGggLSBwMS54ICsgcDAueCkKCQkJCWJyZWFrCgkJfQoJCXN3aXRjaCAocG9zKSB7CgkJCWNhc2UgMzoKCQkJY2FzZSA2OgoJCQljYXNlIDk6CgkJCQlpdGVtLlZhbHVlKGh0bWwuV0lEVEgsIGJlZ2luLndpZHRoICsgcDEueCAtIHAwLngpCgkJCQlicmVhawoJCX0KCQlzd2l0Y2ggKHBvcykgewoJCQljYXNlIDc6CgkJCWNhc2UgODoKCQkJY2FzZSA5OgoJCQkJaXRlbS5WYWx1ZShodG1sLkhFSUdIVCwgYmVnaW4uaGVpZ2h0ICsgcDEueSAtIHAwLnkpCgkJCQlicmVhawoJCX0KCX0sCn0pCg==",
        "usr/volcanos/plugin/local/wiki/draw/heart.js": "Vm9sY2Fub3MoImhlYXJ0Iiwge2hlbHA6ICLlv4PlvaIiLAogICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sCiAgICAgICAgY29weTogWyJkIiwgIm5hbWUiLCAibWV0YSIsICJ0dCIsICJ4eCIsICJ5eSJdLAogICAgICAgIHg6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIHZhbHVlLCBjbWQsIHRhcmdldCkgewogICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICBpZiAodmFsdWUgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0dC50eCA9IHZhbHVlLXRhcmdldC5WYWwoInh4IikKICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIit0dC50eCsiLCIrdHQudHkrIikiKQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgfSwKICAgICAgICB5OiBmdW5jdGlvbihldmVudCwgY2FuLCB2YWx1ZSwgY21kLCB0YXJnZXQpIHsKICAgICAgICAgICAgdmFyIHR0ID0gSlNPTi5wYXJzZSh0YXJnZXQuVmFsdWUoInR0Iil8fCd7InR4IjowLCAidHkiOjB9JykKICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdHQudHkgPSB2YWx1ZS10YXJnZXQuVmFsKCJ5eSIpCiAgICAgICAgICAgICAgICB0YXJnZXQuVmFsdWUoInR0IiwgSlNPTi5zdHJpbmdpZnkodHQpKQogICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGFyZ2V0LlZhbCgieXkiKSt0dC50eQogICAgICAgIH0sCiAgICB9LCAvLyA8aGVhcnQgY3g9IjI1IiBjeT0iNzUiIHI9IjIwIi8+CiAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgeyBpZiAocG9pbnQubGVuZ3RoIDwgMikge3JldHVybn0KCiAgICAgICAgdmFyIHAwID0gcG9pbnRbMF0sIHAxID0gcG9pbnRbMV0sIHAyID0gcG9pbnRbMl07CiAgICAgICAgcGwgPSB7eDogMipwMC54IC0gcDEueCwgeToyKnAwLnktcDEueX0KICAgICAgICB2YXIgcjAgPSBNYXRoLnNxcnQoTWF0aC5wb3cocDAueCAtIHAxLngsIDIpLCBNYXRoLnBvdyhwMC55IC0gcDEueSwgMikpIC8gMgogICAgICAgIHZhciBkID0gWwogICAgICAgICAgICAgICAgIk0iLCBwbC54LCBwbC55LAogICAgICAgICAgICAgICAgIkEiLCByMCwgcjAsIDAsIDAsIDAsIHAwLngsIHAwLnksCiAgICAgICAgICAgICAgICAiQSIsIHIwLCByMCwgMCwgMCwgMCwgcDEueCwgcDEueSwKICAgICAgICAgICAgXQoKICAgICAgICBpZiAocG9pbnQubGVuZ3RoID09IDMpIHsKICAgICAgICAgICAgdmFyIHIxID0gTWF0aC5zcXJ0KE1hdGgucG93KHAyLnggLSBwMS54LCAyKSwgTWF0aC5wb3cocDIueSAtIHAxLnksIDIpKQogICAgICAgICAgICBkID0gZC5jb25jYXQoWwogICAgICAgICAgICAgICAgIkEiLCByMSwgcjEsIDE4MCwgMCwgMCwgcDIueCwgcDIueSwKICAgICAgICAgICAgICAgICJBIiwgcjEsIHIxLCAxODAsIDAsIDAsIHBsLngsIHBsLnksCiAgICAgICAgICAgIF0pCiAgICAgICAgfQoKICAgICAgICB2YXIgZGF0YSA9IHsKICAgICAgICAgICAgbmFtZTogImhlYXJ0IiwgZDogZC5qb2luKCIgIiksCiAgICAgICAgICAgIG1ldGE6IEpTT04uc3RyaW5naWZ5KHBvaW50KSwKICAgICAgICAgICAgdHQ6IEpTT04uc3RyaW5naWZ5KHt0eDogMCwgdHk6IDB9KSwKICAgICAgICAgICAgeHg6IHAwLngsIHl5OnAxLnksCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZXZlbnQudHlwZSA9PSAiY2xpY2siICYmIHBvaW50Lmxlbmd0aCA9PSAzICYmIChjYW4ucG9pbnQgPSBbXSksIGRhdGEKICAgIH0sCiAgICB0ZXh0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewogICAgICAgIGRhdGEueCA9IHRhcmdldC5WYWwoImN4IikKICAgICAgICBkYXRhLnkgPSB0YXJnZXQuVmFsKCJjeSIpCiAgICAgICAgcmV0dXJuIGRhdGEKICAgIH0sCiAgICBzaG93OiBmdW5jdGlvbihjYW4sIHRhcmdldCkgewogICAgICAgIHJldHVybiAiaGVhcnQgIiArIHRhcmdldC5WYWx1ZSgidHQiKQogICAgfSwKfSkK",
        "usr/volcanos/plugin/local/wiki/draw/path.js": "Vm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLlm77lvaLnu5jliLYiLAogICAgcGF0aDJ2OiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54LCBwMC55KyhwMS55LXAwLnkpLzNdLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDJoOiB7IC8vIDxwYXRoIGQ9Ik0geDAseTAgUSB4Mix5MiB4Myx5MyBUIHgxLHkxIi8+CiAgICAgICAgZGF0YToge25hbWU6ICJwYXRoIiwgc2l6ZToge30sIGNvcHk6IFtdfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCkgewogICAgICAgICAgICBmdW5jdGlvbiBsaW5lKHAwLCBwMSkgeyByZXR1cm4gY2FuLmJhc2Uuam9pbnMoWwogICAgICAgICAgICAgICAgc3ZnLk0sIFtwMC54LCBwMC55XSwgc3ZnLlEsIFtwMC54KyhwMS54LXAwLngpLzMsIHAwLnldLCBbKHAwLngrcDEueCkvMiwgKHAwLnkrcDEueSkvMl0sIHN2Zy5ULCBbcDEueCwgcDEueV0KICAgICAgICAgICAgXSkgfQogICAgICAgICAgICByZXR1cm4ge2ZpbGw6IGh0bWwuTk9ORSwgZDogbGluZShwb2ludFswXSwgcG9pbnRbMV0pfQogICAgICAgIH0sCiAgICB9LAogICAgcGF0aDogeyAvLyA8cGF0aCBkPSJNMTAgMTAgSCA5MCBWIDkwIEggMTAgWiIvPgogICAgICAgIGRhdGE6IHtzaXplOiB7fSwgY29weTogWyJkIiwgInR0IiwgInh4IiwgInl5Il0sCiAgICAgICAgICAgIHg6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR4ID0gdmFsdWUtdGFyZ2V0LlZhbCgieHgiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ4eCIpK3R0LnR4CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHk6IGZ1bmN0aW9uKGNhbiwgdmFsdWUsIGNtZCwgdGFyZ2V0KSB7CiAgICAgICAgICAgICAgICB2YXIgdHQgPSBKU09OLnBhcnNlKHRhcmdldC5WYWx1ZSgidHQiKXx8J3sidHgiOjAsICJ0eSI6MH0nKQogICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHR0LnR5ID0gdmFsdWUtdGFyZ2V0LlZhbCgieXkiKQogICAgICAgICAgICAgICAgICAgIHRhcmdldC5WYWx1ZSgidHQiLCBKU09OLnN0cmluZ2lmeSh0dCkpCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LlZhbHVlKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIrdHQudHgrIiwiK3R0LnR5KyIpIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQuVmFsKCJ5eSIpK3R0LnR5CiAgICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICBkcmF3OiBmdW5jdGlvbihldmVudCwgY2FuLCBwb2ludCwgc3R5bGUpIHsKICAgICAgICAgICAgaWYgKHN0eWxlICYmIHN0eWxlLmQpIHsgcmV0dXJuIHN0eWxlIH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA9PSAxKSB7IGNhbi5fdGVtcCA9IHt9IH0KICAgICAgICAgICAgaWYgKHBvaW50Lmxlbmd0aCA8IDIpIHsgcmV0dXJuIH0KCiAgICAgICAgICAgIGlmIChjYW4ua2V5cyAmJiBjYW4ua2V5cy5sZW5ndGggPiAwKSB7IHZhciBrOwogICAgICAgICAgICAgICAgayA9IGNhbi5fdGVtcFtwb2ludC5sZW5ndGgtMV0gPSBjYW4ua2V5c1swXQogICAgICAgICAgICAgICAgc3dpdGNoIChrLnRvVXBwZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICJDIjogY2FuLl90ZW1wW3BvaW50Lmxlbmd0aCsxXSA9ICIsIgogICAgICAgICAgICAgICAgICAgIGNhc2UgIlEiOiBjYW4uX3RlbXBbcG9pbnQubGVuZ3RoXSA9ICIsIjsgYnJlYWsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY2FuLmtleXMgPSBjYW4ua2V5cy5zbGljZSgxKQogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgc2tpcCA9IDAKICAgICAgICAgICAgdmFyIGVuZCA9IGZhbHNlCiAgICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICAgICAgZDogY2FuLmNvcmUuTGlzdChwb2ludCwgZnVuY3Rpb24ocCwgaSkgeyB2YXIgayA9IHAuawogICAgICAgICAgICAgICAgICAgIGlmIChpIDwgc2tpcCkge3JldHVybn0KICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiBrID0gIk0iOyBicmVhawogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBrID0gY2FuLl90ZW1wW2ldIHx8IHAuayB8fCAiTCI7IGJyZWFrCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmIChlbmQpIHtyZXR1cm59CgogICAgICAgICAgICAgICAgICAgIGsgPSBrLnRvVXBwZXJDYXNlKCkKICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGspIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiWiI6IHJldHVybiBjYW4ucG9pbnQgPSBbXSwgY2FuLl90ZW1wID0ge30sIGsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiTCI6IHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJNIjogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkgiOiByZXR1cm4gaysiICIgKyBwLngKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAiViI6IHJldHVybiBrKyIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJBIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiAwIDAgMCAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyByICsgIiAiICsgciArICIgMCAwIDAgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gTWF0aC5zcXJ0KE1hdGgucG93KHBvaW50W2krMV0ueCAtIHAueCwgMikgKyBNYXRoLnBvdyhwb2ludFtpKzFdLnkgLSBwLnksIDIpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBvaW50W2ldID0gcG9pbnRbaSsxXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsxXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gY2FuLnBvaW50W2ldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gY2FuLnBvaW50W2ldID0gY2FuLnBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5wb2ludFtpKzFdID0gdGVtcAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC54ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC55ID0gcgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5kb25lID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcC5hcmcgPSAiIDAgMCAwICIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNraXAgPSBpICsgMgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkgKyAiIDAgMCAwICIgKyBwb2ludFtpKzFdLnggKyAiICIgKyBwb2ludFtpKzFdLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgIkMiOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChwb2ludC5sZW5ndGggLSBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIChwb2ludFtpLTFdLngrcC54KS8yICsgIiAiICsgKHBvaW50W2ktMV0ueStwLnkpLzIgKyAiLCIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHBvaW50W2krMl0ueCArICIgIiArIHBvaW50W2krMl0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBwb2ludFtpKzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb2ludFtpKzFdID0gcG9pbnRbaSsyXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9pbnRbaSsyXSA9IHRlbXAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAuZG9uZSA9IHRydWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICJRIjoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocG9pbnQubGVuZ3RoIC0gaSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTogZW5kID0gdHJ1ZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyAocG9pbnRbaS0xXS54K3AueCkvMiArICIgIiArIChwb2ludFtpLTFdLnkrcC55KS8yICsgIiwiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiBlbmQgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrKyIgIiArIHBvaW50W2krMV0ueCArICIgIiArIHBvaW50W2krMV0ueSArICIsIiArIHAueCArICIgIiArIHAueQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZW1wID0gcG9pbnRbaV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBwb2ludFtpXSA9IHBvaW50W2krMV0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50W2krMV0gPSB0ZW1wCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwLmRvbmUgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaysiICIgKyBwLnggKyAiICIgKyBwLnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIGsrIiAiICsgcC54ICsgIiAiICsgcC55CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkuam9pbigiICIpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRhdGEKICAgICAgICB9LAogICAgICAgIHRleHQ6IGZ1bmN0aW9uKGNhbiwgdGFyZ2V0LCBkYXRhKSB7CiAgICAgICAgICAgIGRhdGEueCA9ICh0YXJnZXQueDEuYmFzZVZhbC52YWx1ZSArIHRhcmdldC54Mi5iYXNlVmFsLnZhbHVlKSAvIDIKICAgICAgICAgICAgZGF0YS55ID0gKHRhcmdldC55MS5iYXNlVmFsLnZhbHVlICsgdGFyZ2V0LnkyLmJhc2VWYWwudmFsdWUpIC8gMgogICAgICAgICAgICByZXR1cm4gZGF0YQogICAgICAgIH0sCiAgICAgICAgc2hvdzogZnVuY3Rpb24oY2FuLCB0YXJnZXQpIHsgcmV0dXJuIHRhcmdldC50YWdOYW1lICsgIiAiICsgdGFyZ2V0LlZhbHVlKCJkIikgfSwKICAgIH0sCn0pCg==",
        "usr/volcanos/plugin/local/wiki/draw/walk_trash.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLAogICAgaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCBvdXRwdXQsIGFjdGlvbiwgb3B0aW9uKSB7b3V0cHV0LmlubmVySFRNTCA9ICIiOwogICAgICAgIGlmICghbXNnLnJlc3VsdCB8fCBtc2cucmVzdWx0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgIHZhciB0YWJsZSA9IGNhbi5wYWdlLkFwcGVuZFRhYmxlKGNhbiwgbXNnLCBvdXRwdXQsIG1zZy5hcHBlbmQpOwogICAgICAgICAgICB0YWJsZS5vbmNsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtzd2l0Y2ggKGV2ZW50LnRhcmdldC50YWdOYW1lKSB7CiAgICAgICAgICAgICAgICBjYXNlICJURCI6CiAgICAgICAgICAgICAgICAgICAgY2FuLm9uaW1wb3J0LndoaWNoKGV2ZW50LCB0YWJsZSwgbXNnLmFwcGVuZCwgZnVuY3Rpb24oaW5kZXgsIGtleSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYW4uT3B0aW9uKCJmaWxlIiwgZXZlbnQudGFyZ2V0LmlubmVySFRNTC50cmltKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbi5ydW4oZXZlbnQsIFtldmVudC50YXJnZXQuaW5uZXJIVE1MLnRyaW0oKV0sIGZ1bmN0aW9uKG1zZykge30pCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgY2FzZSAiVEgiOgogICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICBjYXNlICJUUiI6CiAgICAgICAgICAgICAgICBjYXNlICJUQUJMRSI6CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIHJldHVybiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZyksIHRhYmxlOwogICAgICAgIH0KCiAgICAgICAgLy8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgYWN0aW9uLCBbe3R5cGU6ICJzY3JpcHQiLCBzcmM6ICJodHRwczovL2Nkbi5ib290Y3NzLmNvbS9lY2hhcnRzLzQuMi4wLXJjLjIvZWNoYXJ0cy5qcyJ9XSk7CiAgICAgICAgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgb3V0cHV0LCBbe2luY2x1ZGU6IFsicmVxdWlyZS9zaHlsaW51eC5jb20veC9lY2hhcnRzL2VjaGFydHMuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBjYW4ucGFnZS5BcHBlbmQoY2FuLCBvdXRwdXQsIFt7aW5jbHVkZTogWyJyZXF1aXJlL3NoeWxpbnV4LmNvbS94L2VjaGFydHMvY2hpbmEuanMiLCBmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICAgICAgdmFyIGNoaW5hX2NoYXJ0ID0gZWNoYXJ0cy5pbml0KGNhbi5wYWdlLkFwcGVuZChjYW4sIG91dHB1dCwgW3t0eXBlOiAiZGl2Iiwgc3R5bGU6IHt3aWR0aDogIjYwMHB4IiwgaGVpZ2h0OiAiNDAwcHgifX1dKS5sYXN0KTsKICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbXNnLlRhYmxlKCkKCiAgICAgICAgICAgICAgICB2YXIgeURhdGEgPSBbXTsKICAgICAgICAgICAgICAgIHZhciBiYXJEYXRhID0gW107CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IChkYXRhLmxlbmd0aD4xMD8gMTA6IGRhdGEubGVuZ3RoKTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgeURhdGEucHVzaChpICsgZGF0YVtpXS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBiYXJEYXRhLnB1c2goZGF0YVtpXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogW3sKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbXNnLk9wdGlvbigidGl0bGUiKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwgcmlnaHQ6IDI1MCwgdG9wOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjMkQzRTUzJywgZm9udFNpemU6IDE4fSwKICAgICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IHRydWUsIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLm5hbWUgKyI6ICIrcGFyYW1zLnZhbHVlCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB2aXN1YWxNYXA6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbnRpbnVvdXMnLAogICAgICAgICAgICAgICAgICAgICAgICBvcmllbnQ6ICdob3Jpem9udGFsJywKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbUhlaWdodDogODAsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IFsn6auYJywgJ+S9jiddLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93TGFiZWw6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHNlcmllc0luZGV4OiBbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiBkYXRhWzFdLnZhbHVlLAogICAgICAgICAgICAgICAgICAgICAgICBpblJhbmdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogWycjNkZDRjZBJywgJyNGRkZENjQnLCAnI0ZGNTAwMCddCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRTdHlsZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjN0I5M0E3JwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDMwLAogICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnbGVmdCcsCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBncmlkOiB7cmlnaHQ6IDEwLCB0b3A6IDEzNSwgYm90dG9tOiAxMDAsIHdpZHRoOiAnMjAlJ30sCiAgICAgICAgICAgICAgICAgICAgeEF4aXM6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgeUF4aXM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgICAgICAgICAgICAgICAgaW52ZXJzZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZUdhcDogMTYsCiAgICAgICAgICAgICAgICAgICAgICAgIGF4aXNMaW5lOiB7c2hvdzogZmFsc2UsIGxpbmVTdHlsZToge2NvbG9yOiAnI2RkZCd9fSwKICAgICAgICAgICAgICAgICAgICAgICAgYXhpc1RpY2s6IHtzaG93OiBmYWxzZSwgbGluZVN0eWxlOiB7Y29sb3I6ICcjZGRkJ319LAogICAgICAgICAgICAgICAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVydmFsOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dFN0eWxlOiB7Y29sb3I6ICcjNDU1QTc0JywgYWxpZ246ICdsZWZ0JywgZm9udFNpemU6IDE0fSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpY2g6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGQUFBMzknLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI2ZmZicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyM0MTk3RkQnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogZnVuY3Rpb24ocGFyYW1zKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHBhcmFtcy5zbGljZSgwLCAxKSkgPCAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2F8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAne2J8JyArIChwYXJzZUludChwYXJhbXMuc2xpY2UoMCwgMSkpICsgMSkgKyAnfScgKyAnICAnICsgcGFyYW1zLnNsaWNlKDEpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignXG4nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeURhdGEKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIGdlbzogewogICAgICAgICAgICAgICAgICAgICAgICBtYXA6ICdjaGluYScsIGxlZnQ6ICdsZWZ0JywgcmlnaHQ6ICcxMDAnLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDoge2VtcGhhc2lzOiB7c2hvdzogZmFsc2V9fSwKICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVN0eWxlOiB7ZW1waGFzaXM6IHthcmVhQ29sb3I6ICcjZmZmNDY0J319LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgc2VyaWVzOiBbewogICAgICAgICAgICAgICAgICAgICAgICByb2FtOiBmYWxzZSwgdHlwZTogJ21hcCcsIG5hbWU6ICdtYXBTZXInLAogICAgICAgICAgICAgICAgICAgICAgICBnZW9JbmRleDogMCwgbGFiZWw6IHtzaG93OiBmYWxzZX0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJvYW06IGZhbHNlLCB0eXBlOiAnYmFyJywgbmFtZTogJ2JhclNlcicsCiAgICAgICAgICAgICAgICAgICAgICAgIHZpc3VhbE1hcDogZmFsc2UsIGJhckdhcDogMCwgYmFyTWF4V2lkdGg6IDgsCiAgICAgICAgICAgICAgICAgICAgICAgIHpsZXZlbDogMTAwLCBpdGVtU3R5bGU6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbDogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBmdW5jdGlvbihwYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnVpbGQgYSBjb2xvciBtYXAgYXMgeW91ciBuZWVkLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3JMaXN0ID0gW3tjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyNGRkQxMTknfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyNGRkFDNEMnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX0sIHtjb2xvclN0b3BzOiBbCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAwLCBjb2xvcjogJyMwMEMwRkEnfSwgLy8gMCUg5aSE55qE6aKc6ImyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7b2Zmc2V0OiAxLCBjb2xvcjogJyMyRjk1RkEnfSwgLy8gMTAwJSDlpITnmoTpopzoibIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXX1dOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW1zLmRhdGFJbmRleCA8IDM/IGNvbG9yTGlzdFswXTogY29sb3JMaXN0WzFdCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXJCb3JkZXJSYWRpdXM6IDE1CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGJhckRhdGEKICAgICAgICAgICAgICAgICAgICB9XQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIGNoaW5hX2NoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgICAgICAgICB9XX1dKTsKICAgICAgICB9XX1dKTsKICAgIH0sCiAgICB3aGljaDogZnVuY3Rpb24oZXZlbnQsIHRhYmxlLCBsaXN0LCBjYikge2lmIChldmVudC50YXJnZXQgPT0gdGFibGUpIHtyZXR1cm4gY2IoLTEsICIiKX0KICAgICAgICBjYW4ucGFnZS5TZWxlY3QoY2FuLCB0YWJsZSwgInRyIiwgZnVuY3Rpb24odHIsIGluZGV4KSB7aWYgKGV2ZW50LnRhcmdldCA9PSB0cikge3JldHVybiBjYihpbmRleC0xLCAiIil9CiAgICAgICAgICAgIGNhbi5wYWdlLlNlbGVjdChjYW4sIHRyLCAidGgsdGQiLCBmdW5jdGlvbih0ZCwgb3JkZXIpIHsKICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgPT0gdGQpIHtyZXR1cm4gY2IoaW5kZXgtMSwgbGlzdFtvcmRlcl0pfQogICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAp9KQo=",
        "usr/volcanos/plugin/local/wiki/feel.css": "ZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IGltZyB7IGRpc3BsYXk6YmxvY2s7IGZsb2F0OmxlZnQ7IH0KZmllbGRzZXQuZmVlbCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC5mZWVsLmZsb2F0IGRpdi5vdXRwdXQgaW1nIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0KZmllbGRzZXQuZmVlbC5mbG9hdCBkaXYub3V0cHV0IHZpZGVvIHsgZGlzcGxheTpibG9jazsgZmxvYXQ6bm9uZTsgbWFyZ2luOmF1dG87IH0K",
        "usr/volcanos/plugin/local/wiki/feel.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGF0aCA9IGNhbi5yZXF1ZXN0KCksIGNhbi5saXN0ID0gW10sIG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4uYmFzZS5lbmRXaXRoKHZhbHVlLnBhdGgsIGljZS5QUyk/IGNhbi5wYXRoLlB1c2godmFsdWUpOiBjYW4ubGlzdC5wdXNoKHZhbHVlKQoJCX0pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCgkJY2FuLnVpID0gY2FuLm9ubGF5b3V0LmRpc3BsYXkoY2FuLCB0YXJnZXQpCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgY2FuLnBhdGgsIG51bGwsIGNhbi51aS5jb250ZW50KQoJCWNhbi5vbmFwcGVuZC5fc3RhdHVzKGNhbiwgY2FuLm9uZXhwb3J0Lmxpc3QpCgoJCWNhbi5BY3Rpb24oaHRtbC5IRUlHSFQsIG1zZy5PcHRpb24oaHRtbC5IRUlHSFQpfHxtc2cuX2NtZHNbMV18fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgbXNnLk9wdGlvbihodG1sLlNQRUVEKXx8bXNnLl9jbWRzWzJdfHwiMSIpCgkJY2FuLkFjdGlvbihtZGIuTElNSVQsIG1zZy5PcHRpb24obWRiLkxJTUlUKXx8bXNnLl9jbWRzWzNdfHwiOSIpCgkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGNhbi5fYWN0aW9uKQoKCQljYW4uYmVnaW4gPSBwYXJzZUludChjYW4uYmVnaW58fG1zZy5PcHRpb24oY2xpLkJFR0lOKXx8IjAiKQoJCWNhbi5kaXJfcm9vdCA9IG1zZy5PcHRpb24obmZzLkRJUl9ST09UKQoJCWNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpCgl9LAoJX2ZpbGU6IGZ1bmN0aW9uKGNhbiwgcGF0aCwgaW5kZXgpIHsgdmFyIHAgPSBsb2NhdGlvbi5ocmVmLmluZGV4T2YoaWNlLkhUVFApID09IDA/ICIiOiAiaHR0cDovL2xvY2FsaG9zdDo5MDIwIgoJCXJldHVybiBwYXRoLmluZGV4T2YoaWNlLkhUVFApID09IDA/IHBhdGg6IHArY2FuLmJhc2UuUGF0aCgiL3NoYXJlL2xvY2FsIiwgY2FuLmRpcl9yb290fHwiIiwgcGF0aCkKCX0sCglmaWxlOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHBhdGggPSBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBwYXRoLCBpbmRleCkKCQl2YXIgY2IgPSBjYW4ub25maWd1cmVbY2FuLmJhc2UuRXh0KHBhdGgpXXx8Y2FuLm9uZmlndXJlWyJpbWFnZSJdOyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFtjYihjYW4sIHBhdGgsIGluZGV4KV0pCgl9LAoJcGFnZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBiZWdpbiwgbGltaXQpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnVpLmRpc3BsYXkpCgkJYmVnaW4gPSBwYXJzZUludChiZWdpbnx8Y2FuLmJlZ2luKSwgbGltaXQgPSBwYXJzZUludChsaW1pdHx8Y2FuLkFjdGlvbihtZGIuTElNSVQpKQoJCWZvciAodmFyIGkgPSBiZWdpbjsgaSA8IGJlZ2luK2xpbWl0OyBpKyspIHsgbGlzdCAmJiBsaXN0W2ldICYmIGNhbi5vbmltcG9ydC5maWxlKGNhbiwgbGlzdFtpXS5wYXRoLCBpKSB9CgkJY2FuLlN0YXR1cyh7YmVnaW46IGJlZ2luLCBsaW1pdDogbGltaXQsIHRvdGFsOiBjYW4ubGlzdC5sZW5ndGh9KQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkZJR1VSRSwge2hlbHA6ICLnu4Tku7boj5zljZUiLAoJcG5nOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWpwZzogZnVuY3Rpb24oY2FuLCBwYXRoLCBpbmRleCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLmltYWdlKGNhbiwgcGF0aCwgaW5kZXgpIH0sCglqcGVnOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiBjYW4ub25maWd1cmUuaW1hZ2UoY2FuLCBwYXRoLCBpbmRleCkgfSwKCWltYWdlOiBmdW5jdGlvbihjYW4sIHBhdGgsIGluZGV4KSB7IHJldHVybiB7aW1nOiBwYXRoLCBoZWlnaHQ6IGNhbi5vbmV4cG9ydC5oZWlnaHQoY2FuKSwKCQlvbm1vdXNlb3ZlcjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLlN0YXR1cyhuZnMuRklMRSwgcGF0aCkgfSwKCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYW4ub25kZXRhaWwuX2luaXQoY2FuLCBpbmRleCkgfSwKCX0gfSwKCgl2aWRlbzogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHZhciBhdXRvID0gY2FuLnVzZXIuaXNNb2JpbGUmJmNhbi5BY3Rpb24obWRiLkxJTUlUKSE9IjEiPyBmYWxzZTogdHJ1ZSwgbG9vcCA9IHRydWUsIHRvdGFsID0gMDsgZnVuY3Rpb24gY2IoZXZlbnQpIHsgfQoJCXJldHVybiB7dHlwZTogaHRtbC5WSURFTywgc3R5bGU6IHtoZWlnaHQ6IGNhbi5vbmV4cG9ydC5oZWlnaHQoY2FuKX0sIGNsYXNzTmFtZTogInByZXZpZXciLAoJCQlkYXRhOiB7c3JjOiBwYXRoLCBjb250cm9sczogImNvbnRyb2xzIiwgYXV0b3BsYXk6IGF1dG8sIGxvb3A6IGxvb3AsIHBsYXliYWNrUmF0ZTogcGFyc2VGbG9hdChjYW4uQWN0aW9uKGh0bWwuU1BFRUQpKX0sCgkJCW9uY29udGV4dG1lbnU6IGNiLCBvbnBsYXk6IGNiLCBvbnBhdXNlOiBjYiwgb25lbmRlZDogY2IsCgkJCW9ubW91c2VvdmVyOiBmdW5jdGlvbihldmVudCkgeyBjYW4uU3RhdHVzKG5mcy5GSUxFLCBwYXRoKSB9LAoJCQlvbmxvYWRlZG1ldGFkYXRhOiBmdW5jdGlvbihldmVudCkgeyB0b3RhbCA9IGV2ZW50LnRpbWVTdGFtcAoJCQkJZXZlbnQudGFyZ2V0LmN1cnJlbnRUaW1lID0gY2FuLl9tc2cuY3VycmVudFRpbWUgfHwgMAoJCQl9LCBvbmxvYWRlZGRhdGE6IGNiLCBvbnRpbWV1cGRhdGU6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uU3RhdHVzKG5mcy5GSUxFKSA9PSBwYXRoICYmIGNhbi5TdGF0dXMoInBvc2l0aW9uIiwgY2FuLm9uZXhwb3J0LnBvc2l0aW9uKGNhbiwgKGNhbi5fbXNnLmN1cnJlbnRUaW1lPWV2ZW50LnRhcmdldC5jdXJyZW50VGltZSktMSwgZXZlbnQudGFyZ2V0LmR1cmF0aW9uKSkKCQkJfSwKCQl9Cgl9LAoJbXA0OiBmdW5jdGlvbihjYW4sIHBhdGgpIHsgcmV0dXJuIGNhbi5vbmZpZ3VyZS52aWRlbyhjYW4sIHBhdGgpIH0sCgltNHY6IGZ1bmN0aW9uKGNhbiwgcGF0aCkgeyByZXR1cm4gY2FuLm9uZmlndXJlLnZpZGVvKGNhbiwgcGF0aCkgfSwKCW1vdjogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAoJd2VibTogZnVuY3Rpb24oY2FuLCBwYXRoKSB7IHJldHVybiBjYW4ub25maWd1cmUudmlkZW8oY2FuLCBwYXRoKSB9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIue7hOS7tuiPnOWNlSIsIGxpc3Q6IFsKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJW2h0bWwuU1BFRUQsIDAuMSwgMC4yLCAwLjUsIDEsIDIsIDMsIDUsIDEwXSwKCQlbbWRiLkxJTUlULCAxLCAzLCA2LCA5LCAxMiwgMTUsIDIwLCAzMCwgNTBdLAoJXSwKCXByZXY6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQlpZiAoY2FuLmJlZ2luID4gMCkgewoJCQljYW4uYmVnaW4gLT0gcGFyc2VJbnQoY2FuLkFjdGlvbihtZGIuTElNSVQpKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkKCQl9IGVsc2UgewoJCQljYW4udXNlci50b2FzdChjYW4sICLlt7Lnu4/mmK/nrKzkuIDpobXkuoYiKQoJCX0KCX0sCgluZXh0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5iZWdpbiArIHBhcnNlSW50KGNhbi5BY3Rpb24obWRiLkxJTUlUKSkgPCBjYW4ubGlzdC5sZW5ndGgpIHsKCQkJY2FuLmJlZ2luICs9IHBhcnNlSW50KGNhbi5BY3Rpb24obWRiLkxJTUlUKSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpCgkJfSBlbHNlIHsKCQkJY2FuLnVzZXIudG9hc3QoY2FuLCAi5bey57uP5piv5pyA5ZCO5LiA6aG15LqGIikKCQl9Cgl9LAoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuLCBrZXksIHZhbHVlKSB7IGNhbi5BY3Rpb24oa2V5LCB2YWx1ZSksIGNhbi5vbmltcG9ydC5wYWdlKGNhbiwgY2FuLmxpc3QpIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbiwga2V5LCB2YWx1ZSkgeyBjYW4uQWN0aW9uKGtleSwgdmFsdWUpLCBjYW4ub25pbXBvcnQucGFnZShjYW4sIGNhbi5saXN0KSB9LAoJbGltaXQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGtleSwgdmFsdWUpIHsgY2FuLkFjdGlvbihrZXksIHZhbHVlKSwgY2FuLm9uaW1wb3J0LnBhZ2UoY2FuLCBjYW4ubGlzdCkgfSwKCgljaG9vc2VJbWFnZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJY2FuLnVzZXIuYWdlbnQuY2hvb3NlSW1hZ2UoZnVuY3Rpb24obGlzdCkgeyBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9vdXRwdXQsIFt7aW1nOiBpdGVtLCBoZWlnaHQ6IDIwMH1dKQoJCX0pIH0pCgl9LAoJcmVjb3JkMTogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LCB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiAidGV4dCIsIG5hbWU6ICJmaWxlIiwgdmFsdWU6ICJzb21lIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKHt2aWRlbzoge2hlaWdodDogaGVpZ2h0fX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7CgkJCQl2YXIgdmlkZW8gPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBjYW4uX291dHB1dCwgW3t0eXBlOiBodG1sLlZJREVPLCBoZWlnaHQ6IGhlaWdodH1dKS5maXJzdAoJCQkJdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtLCB2aWRlby5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyB2aWRlby5wbGF5KCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsKCQkJCQkJdmFyIGNhbnZhcyA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3R5cGU6IGh0bWwuQ0FOVkFTLCBoZWlnaHQ6IGhlaWdodCwgd2lkdGg6IHdpZHRofV0pLmZpcnN0CgkJCQkJCWNhbnZhcy5nZXRDb250ZXh0KCIyZCIpLmRyYXdJbWFnZSh2aWRlbywgMCwgMCwgd2lkdGgsIGhlaWdodCwgMCwgMCwgd2lkdGgsIGhlaWdodCkKCQkJCQkJY2FudmFzLnRvQmxvYigoYmxvYikgPT4gewoJCQkJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KGV2ZW50KQoJCQkJCQkJbXNnLl91cGxvYWQgPSBuZXcgRmlsZShbYmxvYl0sIChsaXN0WzBdKSsiLnBuZyIpCgkJCQkJCQljYW4ucnVuQWN0aW9uKGV2ZW50LCBodG1sLlVQTE9BRCwgW10sIGZ1bmN0aW9uKCkgewoJCQkJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuS4iuS8oOaIkOWKnyIpLCBjYW4uVXBkYXRlKCkKCQkJCQkJCX0pCgkJCQkJCX0pCgkJCQkJfSkKCQkJCX0KCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IGNhbi51c2VyLnRvYXN0KGNhbiwgZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCglyZWNvcmQ6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGJsb2JzID0gW10KCQljYW4udXNlci5pbnB1dChldmVudCwgY2FuLCBbe3R5cGU6ICJ0ZXh0IiwgbmFtZTogImZpbGUiLCB2YWx1ZTogInNvbWUifV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEoe3ZpZGVvOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpKjMvNH19KS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewoJCQkJY2FuLmNvcmUuTmV4dChbMywgMiwgMV0sIGZ1bmN0aW9uKGl0ZW0sIG5leHQpIHsKCQkJCQljYW4udXNlci50b2FzdChjYW4sIGl0ZW0gKyAicyDlkI7lvIDlp4vlvZXlsY8iKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIG5leHQsIDEwMDApCgkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQljYW4udXNlci50b2FzdChjYW4sICLnjrDlnKjlvIDlp4vlvZXlsY8iKQoJCQkJCXZhciByZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKHN0cmVhbSwge21pbWVUeXBlOiAndmlkZW8vd2VibSd9KQoJCQkJCXJlY29yZGVyLm9uZGF0YWF2YWlsYWJsZSA9IGZ1bmN0aW9uKHJlcykgeyBibG9icy5wdXNoKHJlcy5kYXRhKSB9CgkJCQkJcmVjb3JkZXIub25zdG9wID0gZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi51c2VyLnRvYXN0KGNhbiwgIuW9leWxj+aIkOWKnyIpCgkJCQkJCXZhciBtc2cgPSBjYW4ucmVxdWVzdChldmVudCkKCQkJCQkJbXNnLl91cGxvYWQgPSBuZXcgRmlsZShibG9icywgKGxpc3RbMF18fCJzb21lIikrIi53ZWJtIikgCgkJCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGh0bWwuVVBMT0FELCBbXSwgZnVuY3Rpb24oKSB7CgkJCQkJCQljYW4udXNlci50b2FzdChjYW4sICLkuIrkvKDmiJDlip8iKSwgY2FuLlVwZGF0ZSgpCgkJCQkJCX0pCgkJCQkJfSwgcmVjb3JkZXIuc3RhcnQoMTApCgkJCQl9KQoJCQl9KS5jYXRjaChmdW5jdGlvbihlcnIpIHsgY2FuLnVzZXIudG9hc3QoY2FuLCBlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSkgfSkKCQl9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbIuWFs+mXrSIsICLkuIvovb0iLCAi5Yig6ZmkIiwgIuS4iuS4gOS4qiIsICLkuIvkuIDkuKoiLCAi6K6+572u5aS05YOPIiwgIuiuvue9ruiDjOaZryIsICLlpI3liLbpk77mjqUiXSwgX2luaXQ6IGZ1bmN0aW9uKGNhbiwgaW5kZXgpIHsKCQljYW4ub25hcHBlbmQuX2luaXQoY2FuLCB7dHlwZTogInN0b3J5IGZlZWwgZmxvYXQifSwgW10sIGZ1bmN0aW9uKHN1YikgeyBjYW4uc3ViID0gc3ViCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgcmV0dXJuIGNhbi5ydW4oZXZlbnQsIGNtZHMsIGNiLCB0cnVlKSB9CgoJCQlzdWIuZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2csIGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCkgewoJCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX3RhcmdldCwge2xlZnQ6IGxlZnQsIHRvcDogdG9wfSkKCQkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuV0lEVEgsIHdpZHRoLCBodG1sLkhFSUdIVCwgaGVpZ2h0LTIqaHRtbC5BQ1RJT05fSEVJR0hUKQoJCQkJc3ViLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBjYW4ub25kZXRhaWwubGlzdCwgc3ViLl9hY3Rpb24sIGNhbi5vbmRldGFpbCkKCQkJCXN1Yi5vbmFwcGVuZC5fc3RhdHVzKHN1YiwgWyJiZWdpbiIsICJmaWxlIl0pCgoJCQkJY2FuLm9yZGVyID0gaW5kZXgsIGNhbi5zaG93ID0gZnVuY3Rpb24ob3JkZXIpIHsgcGF0aCA9IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W29yZGVyXS5wYXRoKQoJCQkJCXZhciBjYiA9IGNhbi5vbmZpZ3VyZVtjYW4uYmFzZS5FeHQocGF0aCldfHxjYW4ub25maWd1cmVbImltYWdlIl0KCQkJCQkKCQkJCQlzdWIucGFnZS5BcHBlbmRzKHN1Yiwgc3ViLl9vdXRwdXQsIFtjYW4uYmFzZS5Db3B5KGNiKGNhbiwgcGF0aCwgaW5kZXgpLCB7aGVpZ2h0OiAiIiwgc3R5bGU6IGtpdC5EaWN0KGh0bWwuTUFYX1dJRFRILCB3aWR0aCwgaHRtbC5NQVhfSEVJR0hULCBoZWlnaHQtMipodG1sLkFDVElPTl9IRUlHSFQpfSldKQoJCQkJCXN1Yi5TdGF0dXMoY2xpLkJFR0lOLCBvcmRlcisxK2ljZS5QUytjYW4ubGlzdC5sZW5ndGgpLCBzdWIuU3RhdHVzKG5mcy5GSUxFLCBwYXRoKQoJCQkJfSwgY2FuLnNob3coY2FuLm9yZGVyKQoJCQl9KQoJCX0sIGNhbi5fcm9vdC5fdGFyZ2V0KQoJfSwKCSLlhbPpl60iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbi5zdWIuX3RhcmdldCkgfSwKCSLkuIvovb0iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmRvd25sb2FkKGNhbiwgcGF0aCA9IGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aCkpIH0sCgki5Yig6ZmkIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCBuZnMuVFJBU0gsIFtjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGhdLCBmdW5jdGlvbihtc2cpIHsgY2FuLnVzZXIudG9hc3RTdWNjZXNzKGNhbiwgIuWIoOmZpOaIkOWKnyIpIH0sIHRydWUpIH0sCgki5LiK5LiA5LiqIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub3JkZXIgPiAwPyBjYW4uc2hvdygtLWNhbi5vcmRlcik6IGNhbi51c2VyLnRvYXN0KGNhbiwgIuW3sue7j+aYr+esrOS4gOW8oOWVpiEiKSB9LAoJIuS4i+S4gOS4qiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9yZGVyIDwgY2FuLmxpc3QubGVuZ3RoLTE/IGNhbi5zaG93KCsrY2FuLm9yZGVyKTogY2FuLnVzZXIudG9hc3QoY2FuLCAi5bey57uP5piv5pyA5ZCO5LiA5byg5ZWmISIpIH0sCgki6K6+572u5aS05YOPIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc2V0SGVhZGVyKCJhdmF0YXIiLCBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpKSB9LAoJIuiuvue9ruiDjOaZryI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnNldEhlYWRlcigiYmFja2dyb3VuZCIsIGNhbi5vbmltcG9ydC5fZmlsZShjYW4sIGNhbi5saXN0W2Nhbi5vcmRlcl0ucGF0aCkpIH0sCgki5aSN5Yi26ZO+5o6lIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwge19wYXRoOiBjYW4ub25pbXBvcnQuX2ZpbGUoY2FuLCBjYW4ubGlzdFtjYW4ub3JkZXJdLnBhdGgpfSwgdHJ1ZSkpIH0sCn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgbGlzdDogW2NsaS5CRUdJTiwgbWRiLkxJTUlULCBtZGIuVE9UQUwsIG5mcy5GSUxFLCAicG9zaXRpb24iXSwKCWhlaWdodDogZnVuY3Rpb24oY2FuKSB7IHZhciBoZWlnaHQgPSBjYW4uQWN0aW9uKGh0bWwuSEVJR0hUKQoJCXJldHVybiBwYXJzZUludChoZWlnaHQgPT0gaWNlLkFVVE8/IGNhbi5iYXNlLk1pbihjYW4uQ29uZkhlaWdodCgpLzQsIDIwMCk6IGhlaWdodCkKCX0sCglwb3NpdGlvbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgdG90YWwpIHsgdG90YWwgPSB0b3RhbCB8fCBjYW4ubWF4CgkJcmV0dXJuIHBhcnNlSW50KChpbmRleCsxKSoxMDAvdG90YWwpKyIlIisiID0gIisocGFyc2VJbnQoaW5kZXgpKzEpK2ljZS5QUytwYXJzZUludCh0b3RhbCkKCX0sCn0pCg==",
        "usr/volcanos/plugin/local/wiki/word.css": "ZmllbGRzZXQud29yZCBmb3JtLm9wdGlvbiBpbnB1dFtuYW1lPXBhdGhdIHsgd2lkdGg6MTI3cHg7IH0KCmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnUgeyBiYWNrZ3JvdW5kLWNvbG9yOmluaGVyaXQ7IG92ZXJmbG93OmF1dG87IG1pbi13aWR0aDoxMjBweDsgY2xlYXI6Ym90aDsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IGRpdi5saXN0IHsgbWFyZ2luLWxlZnQ6MjBweDsgfQpmaWVsZHNldC53b3JkPmRpdi5uYXZtZW51IGRpdi5pdGVtIHsgZm9udC1zaXplOjEuNGVtOyBmb250LXdlaWdodDpib2xkOyBmb250LWZhbWlseTpjdXJzaXZlOyBwYWRkaW5nOjRweCAyMHB4OyB9CmZpZWxkc2V0LndvcmQ+ZGl2Lm5hdm1lbnU+ZGl2Lml0ZW0geyBmb250LXNpemU6MS42ZW07IH0KCmZpZWxkc2V0LndvcmQgYSB7IHdvcmQtYnJlYWs6YnJlYWstYWxsOyB9CmZpZWxkc2V0LndvcmQgYnIuc3RvcnkgeyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnkgeyBmb250LWZhbWlseTptb25vc3BhY2U7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeSBsaS5IMiB7IGZvbnQtc2l6ZToxLjRlbTsgZm9udC13ZWlnaHQ6Ym9sZDsgfQpmaWVsZHNldC53b3JkIHVsLnN0b3J5IGxpLkgzIHsgZm9udC1zaXplOjEuMmVtOyB9CmZpZWxkc2V0LndvcmQgdWwuc3RvcnlbZGF0YS10eXBlPXByZW1lbnVdIHsgY3Vyc29yOnBvaW50ZXI7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9cHJlbWVudV0gbGk6aG92ZXIgeyBiYWNrZ3JvdW5kOmN5YW47IGNvbG9yOmJsdWU7IH0KZmllbGRzZXQud29yZCB1bC5zdG9yeVtkYXRhLXR5cGU9ZW5kbWVudV0geyBjbGVhcjpib3RoOyB9CmZpZWxkc2V0LndvcmQgcC5zdG9yeVtkYXRhLW5hbWU9aW5uZXJdIHsgYmFja2dyb3VuZC1jb2xvcjojNGI2YzhhN2E7IHBhZGRpbmc6NHB4IDEwcHg7IGJvcmRlci1sZWZ0OnNvbGlkIDRweCBibHVlOyBtYXJnaW46MTBweCAwcHg7IH0KZmllbGRzZXQud29yZCBwLnN0b3J5W2RhdGEtbmFtZT1pbm5lcl06aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiNjMTBjOGE7IGN1cnNvcjpjb3B5OyB9CmZpZWxkc2V0LndvcmQgZmllbGRzZXQuc3RvcnkgeyBtYXJnaW46MTBweDsgfQpmaWVsZHNldC53b3JkIGZpZWxkc2V0LnN0b3J5LmZ1bGwgeyBtYXJnaW46MHB4OyB9CgpmaWVsZHNldC53b3JkLmZsb2F0IHsgcGFkZGluZzowOyBtYXJnaW46MDsgd2lkdGg6LXdlYmtpdC1maWxsLWF2YWlsYWJsZTsgcG9zaXRpb246Zml4ZWQ7IGxlZnQ6MDsgdG9wOjA7IHotaW5kZXg6MTA7IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYuYWN0aW9uIHsgZGlzcGxheTpjb250ZW50czsgfQpmaWVsZHNldC53b3JkLmZsb2F0PmRpdi5zdGF0dXMgeyBjbGVhcjpub25lOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQ+ZGl2Lm91dHB1dCB7IGJhY2tncm91bmQtY29sb3I6I2YwZjhmZjgwOyBwYWRkaW5nOjIwcHg7IG92ZXJmbG93OmF1dG87IH0KZmllbGRzZXQud29yZC5mbG9hdD5kaXYub3V0cHV0PmRpdi5wcm9qZWN0IHsgYmFja2dyb3VuZDojNDY4MmI0NmI7IHBhZGRpbmc6MTBweDsgcG9zaXRpb246Zml4ZWQ7IHJpZ2h0OjA7IHRvcDozMXB4OyB6LWluZGV4OjEwOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQgZGl2LnBhZ2UgeyBtYXJnaW4tdG9wOjMxcHg7IGRpc3BsYXk6bm9uZTsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGRpdi5jb250ZW50IGRpdi5wYWdlLnNob3cgeyBkaXNwbGF5OmJsb2NrOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgZGl2LmNvbnRlbnQuZ3JpZCBkaXYucGFnZSB7IGJhY2tncm91bmQtY29sb3I6I2E0Y2JlY2I1OyBtYXJnaW46MTBweDsgaGVpZ2h0OjIwMHB4OyB3aWR0aDoyMDBweDsgb3ZlcmZsb3c6YXV0bzsgZGlzcGxheTpibG9jazsgZmxvYXQ6bGVmdDsgfQpmaWVsZHNldC53b3JkLmZsb2F0IGgxIHsgdGV4dC1hbGlnbjpjZW50ZXI7IH0KZmllbGRzZXQud29yZC5mbG9hdCBoMiB7IHRleHQtYWxpZ246Y2VudGVyOyB9CmZpZWxkc2V0LndvcmQuZmxvYXQgaDMgeyB0ZXh0LWFsaWduOmNlbnRlcjsgfQoKZmllbGRzZXQud29yZC5jbWQ+bGVnZW5kIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmZvcm0ub3B0aW9uIHsgZGlzcGxheTpub25lOyB9CmZpZWxkc2V0LndvcmQuY21kPmRpdi5hY3Rpb24geyBkaXNwbGF5Om5vbmU7IH0KZmllbGRzZXQud29yZC5jbWQ+ZGl2LnN0YXR1cyB7IGRpc3BsYXk6bm9uZTsgfQoKZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubWVudSB7IGZsb2F0OmxlZnQ7IG92ZXJmbG93OmF1dG87IH0KZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubGlzdCB7IGZsb2F0OmxlZnQ7IG92ZXJmbG93OmF1dG87IH0KZGl2LnN0b3J5W2RhdGEtdHlwZT1zcGFya11bZGF0YS1uYW1lPWZpZWxkXT5kaXYubWVudSBkaXYubGlzdCBkaXYuaXRlbSB7IHBhZGRpbmc6MCAyMHB4OyB9CgpkaXYuc3RvcnlbZGF0YS10eXBlPXNwYXJrXVtkYXRhLW5hbWU9c2hlbGxdIGxhYmVsIHsKCS1tb3otdXNlci1zZWxlY3Q6bm9uZTsgLyrngavni5AqLwoJLXdlYmtpdC11c2VyLXNlbGVjdDpub25lOyAvKndlYmtpdOa1j+iniOWZqCovCgktbXMtdXNlci1zZWxlY3Q6bm9uZTsgLypJRTEwKi8KCS1raHRtbC11c2VyLXNlbGVjdDpub25lOyAvKuaXqeacn+a1j+iniOWZqCovCgl1c2VyLXNlbGVjdDpub25lOwp9Cgo=",
        "usr/volcanos/plugin/local/wiki/word.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJaWYgKG1zZy5MZW5ndGgoKSA+IDApIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpKQoJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRhcmdldCwgbXNnLlJlc3VsdCgpKQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgd2lraS5JVEVNLCBmdW5jdGlvbihpdGVtKSB7IHZhciBkYXRhID0gaXRlbS5kYXRhc2V0fHx7fQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGl0ZW0sIGNhbi5iYXNlLk9iaihkYXRhLnN0eWxlKSkKCQkJY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgZGF0YS50eXBlXSwgW2NhbiwgZGF0YSwgaXRlbV0pCgkJfSkKCX0sCgluYXZtZW51OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgeyB2YXIgbmF2ID0gY2FuLnN1cC5fbmF2bWVudQoJCW5hdiA9IG5hdnx8Y2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLl9maWVsZHMsIFt3aWtpLk5BVk1FTlVdKS5maXJzdAoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIG5hdiksIGNhbi5fZmllbGRzLmluc2VydEJlZm9yZShuYXYsIGNhbi5fb3V0cHV0KQoKCQljYW4ub25pbXBvcnQubGlzdChjYW4sIGNhbi5iYXNlLk9iaihkYXRhLmRhdGEpLCBmdW5jdGlvbihldmVudCwgaXRlbSkgewoJCQl2YXIgbGluayA9IGl0ZW0ubWV0YS5saW5rLCBsaXN0ID0gY2FuLmNvcmUuU3BsaXQoaXRlbS5tZXRhLmxpbmspCgkJCWlmIChjYW4uY29yZS5WYWx1ZShjYW4sIGxpc3RbMF0pKSB7IHJldHVybiBjYW4uY29yZS5DYWxsRnVuYyhbY2FuLCBsaXN0WzBdXSwgbGlzdC5zbGljZSgxKSkgfQoJCQlpZiAoIWxpbmsgfHwgbGluayA9PSBjYW4uT3B0aW9uKG5mcy5QQVRIKSkgeyByZXR1cm4gZmFsc2UgfQoKCQkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyBjYW4uaXNDbWRNb2RlKCkgJiYgY2FuLnVzZXIudGl0bGUoaXRlbS5tZXRhLm5hbWUpOyByZXR1cm4gY2FuLk9wdGlvbihuZnMuUEFUSCwgbGluaykgfSkpIHsgcmV0dXJuIH0KCQkJcmV0dXJuIGNhbi5zdXAuVXBkYXRlKGV2ZW50LCBbbGlua10pCgkJfSwgbmF2KSwgY2FuLnN1cC5fbmF2bWVudSA9IG5hdgoKCQljYW4uZ2V0QWN0aW9uU2l6ZShmdW5jdGlvbihtc2cpIHsgCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgbmF2LCBodG1sLkhFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKSsoY2FuLmlzQ21kTW9kZSgpPyBtc2cuT3B0aW9uKGh0bWwuTUFSR0lOX1kpOiAwKSkKCQkJY2FuLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCktbmF2Lm9mZnNldFdpZHRoLTIxKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIGNhbi5fb3V0cHV0LAoJCQkJaHRtbC5IRUlHSFQsIGNhbi5zdXAuX25hdm1lbnUub2Zmc2V0SGVpZ2h0LTIwLCBodG1sLk1BWF9XSURUSCwgY2FuLkNvbmZXaWR0aCgpLAoJCQkJaHRtbC5GTE9BVCwgaHRtbC5MRUZULCBodG1sLkNMRUFSLCBodG1sLk5PTkUsCgkJCQlodG1sLlBBRERJTkcsIDEwLAoJCQkpCgkJfSkKCX0sCglwcmVtZW51OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBjYW4ucGFnZS5LZXlzKHdpa2kuSDIsIHdpa2kuSDMpLCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBbaXRlbS5pbm5lckhUTUwsIGh0bWwuTEksIGl0ZW0udGFnTmFtZV0sIG9uY2xpY2s6IGZ1bmN0aW9uKCkgewoJCQkJaXRlbS5zY3JvbGxJbnRvVmlldygpCgkJCX19XSksIGl0ZW0ub25jbGljayA9IGZ1bmN0aW9uKGV2ZW50KSB7IHRhcmdldC5zY3JvbGxJbnRvVmlldygpIH0KCQl9KQoJfSwKCXRpdGxlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5pc0NtZE1vZGUoKSAmJiB0YXJnZXQudGFnTmFtZSA9PSAiSDEiICYmIGNhbi51c2VyLnRpdGxlKGRhdGEudGV4dCkKCX0sCglyZWZlcjogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuQSwgZnVuY3Rpb24oaXRlbSkgewoJCQlpdGVtLm9uY2xpY2sgPSBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCAicmVmZXIiLCBtZGIuTkFNRSwgaXRlbS5kYXRhc2V0Lm5hbWUsIG1kYi5URVhULCBpdGVtLmhyZWZdKQoJCQl9CgkJfSkKCX0sCglzcGFyazogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQlpZiAoZGF0YVttZGIuTkFNRV0gPT0gY2hhdC5GSUVMRCkgewoJCQlmdW5jdGlvbiBkZWVwKHRleHQpIHsgdmFyIGQgPSAwCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHsKCQkJCQlzd2l0Y2ggKHRleHRbaV0pIHsKCQkJCQkJY2FzZSBpY2UuVEI6IGQgKz0gNDsgYnJlYWsKCQkJCQkJY2FzZSBpY2UuU1A6IGQrKzsgYnJlYWsKCQkJCQkJZGVmYXVsdDogcmV0dXJuIGQKCQkJCQl9CgkJCQl9CgkJCQlyZXR1cm4gZAoJCQl9CgkJCXZhciBsaXN0ID0gW107IGNhbi5jb3JlLkxpc3QodGFyZ2V0LmlubmVyVGV4dC5zcGxpdChpY2UuTkwpLCBmdW5jdGlvbihsaW5lKSB7IHZhciBfZGVlcCA9IGRlZXAobGluZSkKCQkJCXdoaWxlIChsaXN0Lmxlbmd0aCA+IDApIHsgaWYgKF9kZWVwIDw9IGxpc3RbbGlzdC5sZW5ndGgtMV0uX2RlZXApIHsgbGlzdC5wb3AoKSB9IGVsc2UgeyBicmVhayB9IH0KCQkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpLCBpdGVtID0ge19kZWVwOiBfZGVlcCwgbWV0YToge2luZGV4OiBsc1swXSwgbmFtZTogbHNbMV0sIGFyZ3M6IGxzLnNsaWNlKDIpfSwgbGlzdDogW119CgkJCQlpZiAobGlzdC5sZW5ndGggPiAwKSB7IGxpc3RbbGlzdC5sZW5ndGgtMV0ubGlzdC5wdXNoKGl0ZW0pIH0gbGlzdC5wdXNoKGl0ZW0pCgkJCX0pCgoJCQl2YXIgZmlyc3Q7IGZ1bmN0aW9uIHNob3coaXRlbSwgaW5kZXgsIHRhcmdldCwgb3V0cHV0KSB7CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lfHxpdGVtLm1ldGEuaW5kZXhdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB2aWV3Lm1lbnUsIGh0bWwuRElWX0lURU0sIGV2ZW50LnRhcmdldCkKCQkJCQlpZiAodWkubGlzdC5pbm5lclRleHQpIHsgcmV0dXJuIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KSB9CgkJCQkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gaW5kZXggfSwgb3V0cHV0KSkgeyByZXR1cm4gfQoKCQkJCQljYW4uY29yZS5MaXN0KGl0ZW0ubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCQljYW4ub25hcHBlbmQucGx1Z2luKGNhbiwgaXRlbS5tZXRhLCBmdW5jdGlvbihzdWIpIHsKCQkJCQkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoZXZlbnQsIGl0ZW0ubWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJCQkJCXN1Yi5Db25mSGVpZ2h0KGl0ZW0ubWV0YS5oZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpLzIpLCBzdWIuQ29uZldpZHRoKGl0ZW0ubWV0YS53aWR0aCA9IGNhbi5Db25mV2lkdGgoKS0oY2FuLnVzZXIuaXNXaW5kb3dzPyAxODE6IDE2NSkpCgkJCQkJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9XSURUSCwgc3ViLkNvbmZXaWR0aCgpKQoJCQkJCQl9LCBvdXRwdXQpCgkJCQkJfSkKCQkJCX19LCBodG1sLkxJU1RdKQoJCQkJY2FuLmNvcmUuTGlzdChpdGVtLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5saXN0Lmxlbmd0aCA+IDAgJiYgc2hvdyhpdGVtLCBjYW4uY29yZS5LZXlzKGluZGV4LCBpdGVtLm1ldGEuaW5kZXgpLCB1aS5saXN0LCBvdXRwdXQpIH0pCgkJCQl1aS5saXN0LmlubmVyVGV4dCA9PSAiIiAmJiAoZmlyc3QgPSBmaXJzdHx8dWkuaXRlbSkKCQkJfQoKCQkJdmFyIHZpZXcgPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBbCgkJCQl7dmlldzogaHRtbC5NRU5VLCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS8yLCB3aWR0aDogMTIwfX0sCgkJCQl7dmlldzogaHRtbC5MSVNULCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS8yLCB3aWR0aDogY2FuLkNvbmZXaWR0aCgpLShjYW4udXNlci5pc1dpbmRvd3M/IDE4MTogMTY1KX19LAoJCQldKQoJCQlyZXR1cm4gc2hvdyhsaXN0WzBdLCBsaXN0WzBdLl9pbmRleCwgdmlldy5tZW51LCB2aWV3Lmxpc3QpLCBmaXJzdC5jbGljaygpCgkJfQoKCQlpZiAoZGF0YVttZGIuTkFNRV0gPT0gaHRtbC5JTk5FUikgeyByZXR1cm4gY2FuLm9ubW90aW9uLmNvcHkoY2FuLCB0YXJnZXQpIH0KCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQsIGh0bWwuU1BBTiwgZnVuY3Rpb24oaXRlbSkgewoJCQljYW4ub25tb3Rpb24uY29weShjYW4sIGl0ZW0sICIiLCBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgbWRiLkNSRUFURSwgW21kYi5UWVBFLCAic3BhcmsiLCBtZGIuTkFNRSwgInNoZWxsIiwgbWRiLlRFWFQsIGl0ZW0uaW5uZXJUZXh0XSwgZnVuY3Rpb24oKSB7fSkKCQkJfSkKCQl9KQoJfSwKCWNoYXJ0OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCXRhcmdldC5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oZXZlbnQpIHsKCQkJY2FuLnVzZXIuY2FydGVDbGllbnQoZXZlbnQsIGNhbiwga2l0LkRpY3QobWRiLkVYUE9SVCwgZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7CgkJCQljYW4ub25tb3Rpb24udG9pbWFnZShldmVudCwgY2FuLCAiaGkiLCB0YXJnZXQpCgkJCX0pLCBbbWRiLkVYUE9SVF0pCgkJfQoJfSwKCXRhYmxlOiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWNhbi5wYWdlLk9yZGVyVGFibGUoY2FuLCB0YXJnZXQpLCBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBjaGF0LkNPTlRFTlQpCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgdGFyZ2V0LCBodG1sLlRELCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi5jb3B5KGNhbiwgaXRlbSkgfSkKCX0sCglpbWFnZTogZnVuY3Rpb24oY2FuLCBkYXRhLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5zdHlsZShjYW4sIHRhcmdldCwgaHRtbC5NQVhfSEVJR0hULCBjYW4uQ29uZkhlaWdodCgpLyhjYW4udXNlci5pc01vYmlsZT8gMjogMSksIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCkpCgl9LAoJZmllbGQ6IGZ1bmN0aW9uKGNhbiwgZGF0YSwgdGFyZ2V0LCB3aWR0aCkgeyB2YXIgaXRlbSA9IGNhbi5iYXNlLk9iaihkYXRhLm1ldGEpCgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwgaXRlbSwgW2NoYXQuUExVR0lOX1NUQVRFX0pTXSwgZnVuY3Rpb24oc3ViKSB7CgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgewoJCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgY2hhdC5TVE9SWSwgY2FuLm1pc2MuY29uY2F0KGNhbiwgW2RhdGEudHlwZSwgZGF0YS5uYW1lLCBkYXRhLnRleHRdLCBjbWRzKSwgY2IpCgkJCX0KCgkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkpLCBzdWIuQ29uZldpZHRoKGl0ZW0ud2lkdGggPSAod2lkdGh8fGNhbi5Db25mV2lkdGgoKSktKGNhbi51c2VyLmlzV2luZG93cz8gNDA6IDIwKSkKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBzdWIuX291dHB1dCwgaHRtbC5NQVhfV0lEVEgsIHN1Yi5Db25mV2lkdGgoKSkKCgkJCWNhbi5jb3JlLlZhbHVlKGl0ZW0sICJhdXRvLmNtZCIpICYmIGNhbi5vbm1vdGlvbi5kZWxheShmdW5jdGlvbigpIHsKCQkJCXN1Yi5ydW5BY3Rpb24oc3ViLnJlcXVlc3Qoe30sIGNhbi5jb3JlLlZhbHVlKGl0ZW0sICJvcHRzIikpLCBjYW4uY29yZS5WYWx1ZShpdGVtLCAiYXV0by5jbWQiKSkKCQkJfSkKCQl9LCBjYW4uX291dHB1dCwgdGFyZ2V0KQoJfSwKCS8vIGxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkvLyB9LAp9LCBbIiJdKQpWb2xjYW5vcyhjaGF0Lk9OS0VZTUFQLCB7aGVscDogIumUruebmOS6pOS6kiIsCglfbW9kZTogewoJCW5vcm1hbDogewoJCQkibiI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLm5leHQoY2FuLnN1YikgfSwKCQkJImoiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5uZXh0KGNhbi5zdWIpIH0sCgkJCSJBcnJvd1JpZ2h0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwubmV4dChjYW4uc3ViKSB9LAoJCQkiQXJyb3dMZWZ0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25kZXRhaWwucHJldihjYW4uc3ViKSB9LAoJCQkiayI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsLnByZXYoY2FuLnN1YikgfSwKCQkJInAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbC5wcmV2KGNhbi5zdWIpIH0sCgoJCQkicSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uZGV0YWlsWyLnu5PmnZ8iXShldmVudCwgY2FuLnN1YikgfSwKCQkJImgiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmRldGFpbFsi6ZqQ6JePIl0oZXZlbnQsIGNhbi5zdWIpIH0sCgkJfSwKCX0sIF9lbmdpbmU6IHt9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaOp+S7tuS6pOS6kiIsCglfdHJhbnM6IHt2aWV3OiAi6KeG5Zu+In0sCglwbGF5OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBsaXN0ID0gW10sIGN1cnJlbnQgPSBbXQoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCB3aWtpLklURU0sIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLnBhZ2UudGFnaXMoWyJoMSIsICJoMiIsICJoMyJdLCBpdGVtKSAmJiBsaXN0LnB1c2goY3VycmVudCA9IFtdKSwgY3VycmVudC5wdXNoKGl0ZW0pCgkJfSkKCgkJY2FuLm9uYXBwZW5kLl9pbml0KGNhbiwge3R5cGU6ICJzdG9yeSB3b3JkIGZsb2F0In0sIFtdLCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGNhbi5ydW4sIHN1Yi5zdXAgPSBjYW4sIGNhbi5zdWIgPSBzdWIsIGNhbi5vbmFwcGVuZC5fYWN0aW9uKHN1YiwgWwoJCQkJWyLluIPlsYAiLCAi5byA6K6yIiwgIue9keagvCIsICLlv6vpl6oiXSwgIuWkp+e6siIsICLpppbpobUiLCAi5LiK5LiA6aG1IiwKCQkJCVsi6I+c5Y2VIl0uY29uY2F0KGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24ocGFnZSkgeyByZXR1cm4gcGFnZVswXS5pbm5lckhUTUwgfSkpLAoJCQkJIuS4i+S4gOmhtSIsICLpmpDol48iLCAi57uT5p2fIiwKCQkJXSwgc3ViLl9hY3Rpb24sIGNhbi5vbmRldGFpbCkKCgkJCWNhbi5vbmVuZ2luZS5zaWduYWwoY2FuLCAia2V5bWFwLmZvY3VzIiwgY2FuLnJlcXVlc3QoZXZlbnQsIHtjYjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5rZXlsaXN0ID0gY2FuLm9ua2V5bWFwLl9wYXJzZShldmVudCwgY2FuLCAibm9ybWFsIiwgY2FuLmtleWxpc3QpCgkJCX19KSksIGNhbi5vbmtleW1hcC5fYnVpbGQoY2FuKQoKCQkJc3ViLnBhZ2Uuc3R5bGUoc3ViLCBzdWIuX3RhcmdldCwgaHRtbC5CQUNLR1JPVU5ELCBjYW4uX3Jvb3QuX3RhcmdldC5zdHlsZS5iYWNrZ3JvdW5kKQoJCQlzdWIucGFnZS5zdHlsZShzdWIsIHN1Yi5fb3V0cHV0LCBodG1sLkhFSUdIVCwgY2FuLl9yb290Ll9oZWlnaHQtNCpodG1sLlBMVUdJTl9NQVJHSU4tMipodG1sLkFDVElPTl9IRUlHSFQpCgkJCXN1Yi5wYWdlLnN0eWxlKHN1Yiwgc3ViLl9vdXRwdXQsIGh0bWwuV0lEVEgsIGNhbi5fcm9vdC5fd2lkdGgtNCpodG1sLlBMVUdJTl9NQVJHSU4pCgoJCQlzdWIudWkgPSBzdWIucGFnZS5BcHBlbmQoc3ViLCBzdWIuX291dHB1dCwgW3t2aWV3OiBjaGF0LlBST0pFQ1R9LCB7dmlldzogY2hhdC5DT05URU5UfV0pCgkJCWNhbi5jb3JlLkxpc3Qoc3ViLmxpc3QgPSBsaXN0LCBmdW5jdGlvbihwYWdlLCBpbmRleCkgewoJCQkJY2FuLm9uaW1wb3J0Lml0ZW0oY2FuLCB7bmFtZTogcGFnZVswXS5pbm5lckhUTUx9LCBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmRldGFpbC5zaG93KHN1YiwgaW5kZXgpIAoJCQkJfSwgZnVuY3Rpb24oZXZlbnQpIHt9LCBzdWIudWkucHJvamVjdCkKCgkJCQlzdWIucGFnZS5BcHBlbmQoc3ViLCBzdWIudWkuY29udGVudCwgW3t2aWV3OiAicGFnZSIrKGluZGV4PT0wPyAiIGZpcnN0IjogIiIpLCBsaXN0OiBjYW4uY29yZS5MaXN0KHBhZ2UsIGZ1bmN0aW9uKGl0ZW0pIHsgdmFyIGRhdGEgPSBpdGVtLmRhdGFzZXR8fHt9CgkJCQkJc3dpdGNoIChkYXRhLnR5cGUpIHsKCQkJCQkJY2FzZSB3aWtpLlBSRU1FTlU6IGl0ZW0gPSBpdGVtLmNsb25lTm9kZShmYWxzZSk7IGJyZWFrCgkJCQkJCWNhc2UgY2hhdC5GSUVMRDogaXRlbSA9IGNhbi5vbmFwcGVuZC5maWVsZChjYW4sIGNoYXQuU1RPUlksIGNhbi5iYXNlLk9iaihkYXRhLm1ldGEpLCBzdWIudWkuY29udGVudCkuZmlyc3Q7IGJyZWFrCgkJCQkJCWRlZmF1bHQ6IGl0ZW0gPSBpdGVtLmNsb25lTm9kZSh0cnVlKQoJCQkJCX0KCQkJCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgZGF0YS50eXBlXSwgW3N1YiwgZGF0YSwgaXRlbSwgY2FuLl9yb290Ll93aWR0aC00Kmh0bWwuUExVR0lOX01BUkdJTl0pLCBpdGVtCgkJCQl9KSwgfV0pCgkJCX0pLCBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgc3ViLnVpLnByb2plY3QpLCBjYW4ub25kZXRhaWwuc2hvdyhzdWIsIDApIAoKCQkJc3ViLm9uYXBwZW5kLl9zdGF0dXMoc3ViLCBbbWRiLlBBR0UsIGNsaS5GUk9NLCBjbGkuQ09TVF0pLCBzdWIuU3RhdHVzKGNsaS5GUk9NLCBjYW4uYmFzZS5UaW1lKCkpCgkJCXZhciBmcm9tID0gbmV3IERhdGUoKTsgY2FuLmNvcmUuVGltZXIoe2ludGVydmFsOiAxMDB9LCBmdW5jdGlvbigpIHsgdmFyIG5vdyA9IG5ldyBEYXRlKCkKCQkJCXN1Yi5TdGF0dXMoY2xpLkNPU1QsIGNhbi5iYXNlLkR1cmF0aW9uKG5vdy1mcm9tKSkKCQkJfSkKCQl9LCBjYW4uX3Jvb3QuX3RhcmdldCkKCX0sCgl2aWV3OiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJaWYgKGNhbi5faGVpZ2h0KSB7CgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQsIGNhbi5faGVpZ2h0KSwgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uc3VwLl9uYXZtZW51LCBjYW4uX2hlaWdodCksIGRlbGV0ZShjYW4uX2hlaWdodCkKCQl9IGVsc2UgeyBjYW4uX2hlaWdodCA9IGNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQpCgkJCWNhbi5wYWdlLnN0eWxlSGVpZ2h0KGNhbiwgY2FuLl90YXJnZXQsICIiKSwgY2FuLnBhZ2Uuc3R5bGVIZWlnaHQoY2FuLCBjYW4uc3VwLl9uYXZtZW51LCAiIikKCQl9Cgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuS6pOS6kuaTjeS9nCIsIGxpc3Q6IFsi5Yig6ZmkIl0sCglzaG93OiBmdW5jdGlvbihzdWIsIHdoaWNoKSB7IHN1Yi5wYWdlLnN0eWxlQ2xhc3Moc3ViLCBzdWIudWkuY29udGVudCwgY2hhdC5DT05URU5UKQoJCXN1Yi5wYWdlLlNlbGVjdChzdWIsIHN1Yi51aS5jb250ZW50LCB3aWtpLkRJVl9QQUdFLCBmdW5jdGlvbihwYWdlLCBpbmRleCkgewoJCQlpZiAoaW5kZXggPT0gd2hpY2ggfHwgcGFnZSA9PSB3aGljaCkgewoJCQkJc3ViLnBhZ2UuU2VsZWN0KHN1YiwgcGFnZSwgc3ViLnBhZ2UuS2V5cyhodG1sLkgxLCBodG1sLkgyLCBodG1sLkgzKSwgZnVuY3Rpb24oaXRlbSkgeyBzdWIuQWN0aW9uKCLoj5zljZUiLCBpdGVtLmlubmVySFRNTCkgfSkKCQkJCXN1Yi5vbm1vdGlvbi5zZWxlY3Qoc3ViLCBzdWIudWkucHJvamVjdCwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQlzdWIuU3RhdHVzKG1kYi5QQUdFLCBpbmRleCsxK2ljZS5QUytzdWIubGlzdC5sZW5ndGgpCgkJCQlzdWIucGFnZS5DbGFzc0xpc3QuYWRkKHN1YiwgcGFnZSwgaHRtbC5TSE9XKQoJCQl9IGVsc2UgewoJCQkJc3ViLnBhZ2UuQ2xhc3NMaXN0LmRlbChzdWIsIHBhZ2UsIGh0bWwuU0hPVykKCQkJfQoJCX0pCgl9LAoJbmV4dDogZnVuY3Rpb24oc3ViKSB7CgkJc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHN1Yi5jb3JlLktleXMod2lraS5ESVZfUEFHRSwgaWNlLlNIT1cpLCBmdW5jdGlvbihwYWdlKSB7CgkJCXBhZ2UubmV4dFNpYmxpbmc/IHN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UubmV4dFNpYmxpbmcpOiBzdWIudXNlci50b2FzdChzdWIsIGNsaS5FTkQpCgkJfSkKCX0sCglwcmV2OiBmdW5jdGlvbihzdWIpIHsKCQlzdWIucGFnZS5TZWxlY3Qoc3ViLCBzdWIudWkuY29udGVudCwgc3ViLmNvcmUuS2V5cyh3aWtpLkRJVl9QQUdFLCBpY2UuU0hPVyksIGZ1bmN0aW9uKHBhZ2UpIHsKCQkJcGFnZS5wcmV2aW91c1NpYmxpbmc/IHN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UucHJldmlvdXNTaWJsaW5nKTogc3ViLnVzZXIudG9hc3Qoc3ViLCBjbGkuRU5EKQoJCX0pCgl9LAoJZmxhc2g6IGZ1bmN0aW9uKHN1YikgewoJCXN1Yi5jb3JlLk5leHQoc3ViLnBhZ2UuU2VsZWN0KHN1Yiwgc3ViLnVpLmNvbnRlbnQsIHdpa2kuRElWX1BBR0UpLCBmdW5jdGlvbihwYWdlLCBuZXh0KSB7CgkJCXN1Yi5zdXAub25kZXRhaWwuc2hvdyhzdWIsIHBhZ2UpLCBzdWIub25tb3Rpb24uZGVsYXkoc3ViLCBmdW5jdGlvbigpIHsgbmV4dCgpIH0pCgkJfSkKCX0sCglncmlkOiBmdW5jdGlvbihzdWIpIHsgc3ViLnBhZ2Uuc3R5bGVDbGFzcyhzdWIsIHN1Yi51aS5jb250ZW50LCAiY29udGVudCBncmlkIikgfSwKCgki5byA6K6yIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLnNob3coY2FuLCAwKSB9LAoJIue9keagvCI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5ncmlkKGNhbikgfSwKCSLlv6vpl6oiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuZmxhc2goY2FuKSB9LAoKCSLlpKfnurIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCkgfSwKCSLpppbpobUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIDApIH0sCgki5LiK5LiA6aG1IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uc3VwLm9uZGV0YWlsLnByZXYoY2FuLCBjYW4udWkuY29udGVudCkgfSwKCSLoj5zljZUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zdXAub25kZXRhaWwuc2hvdyhjYW4sIGV2ZW50LnRhcmdldC5zZWxlY3RlZEluZGV4KSB9LAoJIuS4i+S4gOmhtSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnN1cC5vbmRldGFpbC5uZXh0KGNhbiwgY2FuLnVpLmNvbnRlbnQpIH0sCgki6ZqQ6JePIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki57uT5p2fIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaQiOiBmdW5jdGlvbihldmVudCwgc3ViKSB7IHN1Yi5wYWdlLlJlbW92ZShzdWIsIHN1Yi5fdGFyZ2V0KSB9LAp9KQo=",
        "usr/volcanos/plugin/state.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBjb25mLCBjYiwgdGFyZ2V0KSB7fSwKCV9wcm9jZXNzOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5PcHRpb25TdGF0dXMoKSAmJiBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4uX3N0YXR1cykgJiYgY2FuLm9uYXBwZW5kLl9zdGF0dXMoY2FuLCBjYW4uYmFzZS5PYmoobXNnLk9wdGlvblN0YXR1cygpKSkKCQlyZXR1cm4gY2FuLmNvcmUuQ2FsbEZ1bmMoW2Nhbi5vbmltcG9ydCwgbXNnLk9wdGlvblByb2Nlc3MoKV0sIHtjYW46IGNhbiwgc3ViOiBjYW4sIG1zZzogbXNnfSkKCX0sCgoJX2xvY2F0aW9uOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBjYW4udXNlci5qdW1wcyhfYXJnKTsgcmV0dXJuIHRydWUgfSwKCV9yZXBsYWNlOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgeyBsb2NhdGlvbi5yZXBsYWNlKF9hcmcpOyByZXR1cm4gdHJ1ZSB9LAoJX2hpc3Rvcnk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7IGhpc3RvcnkuYmFjaygpOyByZXR1cm4gdHJ1ZSB9LAoJX2NvbmZpcm06IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7IGNhbi51c2VyLmNvbmZpcm0oX2FyZykgJiYgY2FuLnJ1bkFjdGlvbihjYW4ucmVxdWVzdCh7fSwgbXNnKSwgImNvbmZpcm0iKTsgcmV0dXJuIHRydWUgfSwKCV9yZWZyZXNoOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCWNhbi5jb3JlLlRpbWVyKHBhcnNlSW50KG1zZy5PcHRpb24oIl9kZWxheSIpfHwiNTAwIiksIGZ1bmN0aW9uKCkgewoJCQljYW4uVXBkYXRlKGNhbi5yZXF1ZXN0KHt9LCB7X2NvdW50OiBwYXJzZUludChtc2cuT3B0aW9uKCJfY291bnQiKSktMX0pKQoJCX0pCgkJcmV0dXJuIHRydWUKCX0sCglfcmV3cml0ZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQlmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5fYXJnLmxlbmd0aDsgaSArPSAyKSB7CgkJCWNhbi5PcHRpb24obXNnLl9hcmdbaV0sIG1zZy5fYXJnW2krMV0pLCBjYW4uQWN0aW9uKG1zZy5fYXJnW2ldLCBtc2cuX2FyZ1tpKzFdKQoJCX0KCQlyZXR1cm4gY2FuLlVwZGF0ZSgpCgl9LAoJX2Rpc3BsYXk6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJcmV0dXJuIGNhbi5vbmFwcGVuZC5fb3V0cHV0KGNhbiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSkpLCB0cnVlCgl9LAoJX2ZpZWxkOiBmdW5jdGlvbihjYW4sIG1zZykgewoJCW1zZy5UYWJsZShmdW5jdGlvbihpdGVtKSB7IGl0ZW0udHlwZSA9IGNoYXQuU1RPUlksIGNhbi5vbmFwcGVuZC5fcGx1Z2luKGNhbiwgaXRlbSwge3R5cGU6IGNoYXQuU1RPUlksIGFyZzogY2FuLmJhc2UuT2JqKGl0ZW1baWNlLkFSR10sIFtdKX0sIGZ1bmN0aW9uKHN1YiwgbWV0YSkgewoJCQlzdWIuQ29uZihjYW4uYmFzZS5PYmooaXRlbS5jb25mKSkKCQkJaWYgKHN1Yi5Db25mKCJtb2RlIikgPT0gInNpbXBsZSIpIHsgKGZ1bmN0aW9uKCkgewoJCQkJdmFyIG1zZyA9IGNhbi5yZXF1ZXN0KCk7IG1zZy5FY2hvKHN1Yi5Db25mKCJyZXN1bHQiKSkKCQkJCXN1Yi5Db25mSGVpZ2h0KGNhbi5Db25mSGVpZ2h0KCkvMikKCQkJCWNhbi5vbmFwcGVuZC5fb3V0cHV0KHN1YiwgbXNnLCBtc2cuT3B0aW9uKGljZS5NU0dfRElTUExBWSl8fHN1Yi5Db25mKCJmZWF0dXJlLmRpc3BsYXkiKSkKCQkJfSkoKTsgcmV0dXJuIH0KCQkJdmFyIG9wdCA9IGNhbi5iYXNlLk9iaihpdGVtW2ljZS5PUFRdLCBbXSkKCQkJc3ViLkNvbmZIZWlnaHQoY2FuLkNvbmZIZWlnaHQoKSkKCQkJc3ViLkNvbmZXaWR0aChjYW4uQ29uZldpZHRoKCktNCpodG1sLlBMVUdJTl9NQVJHSU4pCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IsIHNpbGVudCkgewoJCQkJdmFyIHJlcyA9IGNhbi5yZXF1ZXN0KGV2ZW50LCBjYW4uT3B0aW9uKCkpCgkJCQlmb3IgKHZhciBpID0gMDsgaSA8IG9wdC5sZW5ndGg7IGkgKz0gMikgeyByZXMuT3B0aW9uKG9wdFtpXSwgb3B0W2krMV0pIH0KCQkJCWNhbi5ydW4oZXZlbnQsIChtc2dbaWNlLk1TR19QUkVGSVhdfHxbXSkuY29uY2F0KGNtZHMpLCBjYiwgdHJ1ZSkKCQkJfQoJCX0pIH0pCgkJcmV0dXJuIHRydWUKCX0sCglfaW5uZXI6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZykKCQljYW4ub25tb3Rpb24uc3RvcnkuYXV0byhjYW4pCgkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5ESVNQTEFZLCBodG1sLkJMT0NLKQoJCXJldHVybiB0cnVlCgl9LAoKCV9ob2xkOiBmdW5jdGlvbihjYW4sIG1zZykgeyByZXR1cm4gdHJ1ZSB9LAoJX2JhY2s6IGZ1bmN0aW9uKGNhbikgeyBjYW4uX2hpc3RvcnkucG9wKCkKCQlmb3IgKHZhciBoaXMgPSBjYW4uX2hpc3RvcnkucG9wKCk7IGhpczsgaGlzID0gY2FuLl9oaXN0b3J5LnBvcCgpKSB7IGlmIChoaXNbMF0gPT0gY3R4LkFDVElPTikgeyBjb250aW51ZSB9CgkJCXZhciBpbmRleCA9IDAKCQkJY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fb3B0aW9uLCAiIiwgZnVuY3Rpb24oaXRlbSkgeyBpdGVtLnZhbHVlID0gaGlzW2luZGV4KytdfHwiIiB9KQoJCQljYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9hY3Rpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IGl0ZW0udmFsdWUgPSBoaXNbaW5kZXgrK118fCIiIH0pCgkJCWNhbi5VcGRhdGUoKTsgYnJlYWsKCQl9CgkJIWhpcyAmJiBjYW4uVXBkYXRlKCkKCQlyZXR1cm4gdHJ1ZQoJfSwKCV9yaWNoOiBmdW5jdGlvbihjYW4sIG1zZywgX2FyZykgewoJCWlmIChjYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgW2h0bWwuVEFCTEVfQ09OVEVOVCwgaHRtbC5UQk9EWV0sIGZ1bmN0aW9uKHRhYmxlKSB7CgkJCXZhciBoZWFkID0gY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsIFtodG1sLlRBQkxFX0NPTlRFTlQsIGh0bWwuVEhdLCBmdW5jdGlvbih0aCkgeyByZXR1cm4gdGguaW5uZXJUZXh0IH0pCgkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhYmxlLCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJCXJldHVybiB7cm93OiBjYW4uY29yZS5MaXN0KGhlYWQsIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XSB9KX0KCQkJfSkpCgkJCXJldHVybiB0cnVlCgkJfSkubGVuZ3RoID09IDApIHsgY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSB9CgkJcmV0dXJuIHRydWUKCX0sCglfZ3JvdzogZnVuY3Rpb24oY2FuLCBtc2csIF9hcmcpIHsKCQlzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4sIGNoYXQuX09VVFBVVFNfQ1VSUkVOVCkKCQlpZiAoc3ViICYmIHN1Yi5vbmltcG9ydCAmJiBzdWIub25pbXBvcnQuZ3JvdykgewoJCQlzdWIub25pbXBvcnQuZ3JvdyhzdWIsIG1zZywgX2FyZykKCQkJcmV0dXJuIHRydWUKCQl9CgkJaWYgKGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBodG1sLkRJVl9DT0RFLCBmdW5jdGlvbihkaXYpIHsKCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCBkaXYsIGh0bWwuTUFYX0hFSUdIVCwgNDAwKQoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBkaXYsIFt7dGV4dDogX2FyZ31dKQoJCQlkaXYuc2Nyb2xsQnkoMCwgMTAwMDApCgkJCXJldHVybiB0cnVlCgkJfSkubGVuZ3RoID09IDApIHsgY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgX2FyZykgfQoJCXJldHVybiB0cnVlCgl9LAoJX29wZW46IGZ1bmN0aW9uKGNhbiwgbXNnLCBfYXJnKSB7CgkJcmV0dXJuIGNhbi51c2VyLm9wZW4oX2FyZyksIGNhbi5VcGRhdGUoKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLkuqTkupLmk43kvZwiLCBsaXN0OiBbCgkJIuWIt+aWsOaVsOaNriIsICLliIfmjaLlhajlsY8iLCAi5YWx5Lqr5bel5YW3IiwgIuaJk+W8gOmTvuaOpSIsICLnlJ/miJDpk77mjqUiLCAi55Sf5oiQ6ISa5pysIiwgIueUn+aIkOWbvueJhyIsIFsKCQkJIuWFtuWugyIsICLliLfmlrDpobXpnaIiLCAi5L+d5a2Y5Y+C5pWwIiwgIua4heepuuWPguaVsCIsICLmianlsZXlj4LmlbAiLCAi5aSN5Yi25pWw5o2uIiwgIuS4i+i9veaVsOaNriIsICLmuIXnqbrmlbDmja4iLCAi5Yig6Zmk6YWN572uIiwgIuafpeeci+mFjee9riIsICLliKDpmaTlt6XlhbciLCLmkYTlg4/lpLQiLAoJCV0sCgldLAoJX2VuZ2luZTogZnVuY3Rpb24oZXZlbnQsIGNhbiwgYnV0dG9uKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBidXR0b25dLmNvbmNhdChjYW4uSW5wdXQoW10sIHRydWUpKSkgfSwKCgki5Yi35paw5pWw5o2uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4uVXBkYXRlKHt9LCBjYW4uSW5wdXQoW10sIHRydWUpKSB9LAoJIuWIh+aNouWFqOWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIHN1YiA9IGNhbi5fb3V0cHV0c1tjYW4uX291dHB1dHMubGVuZ3RoLTFdCgkJaWYgKGNhbi5wYWdlLkNsYXNzTGlzdC5uZWcoY2FuLCBjYW4uX3RhcmdldCwgImZ1bGwiKSkgewoJCQl2YXIgaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0LShjYW4uX3N0YXR1cy5pbm5lclRleHQ/IDI6IDEpKmh0bWwuQUNUSU9OX0hFSUdIVDsgY2FuLnVzZXIuaXNNb2JpbGUgJiYgKGhlaWdodCAtPSAyKmh0bWwuQUNUSU9OX0hFSUdIVCkKCQkJY2FuLl9tb2RlX2JhayA9IGNhbi5Nb2RlKCksIGNhbi5faGVpZ2h0X2JhayA9IHN1Yi5Db25mSGVpZ2h0KCksIGNhbi5fd2lkdGhfYmFrID0gc3ViLkNvbmZXaWR0aCgpCgkJCXN1Yi5Nb2RlKCJmdWxsIiksIGNhbi5Nb2RlKCJmdWxsIiksIGNhbi5Db25mSGVpZ2h0KGhlaWdodCksIGNhbi5Db25mV2lkdGgod2luZG93LmlubmVyV2lkdGgpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCBzdWIuQ29uZkhlaWdodChoZWlnaHQpLCBodG1sLk1JTl9XSURUSCwgc3ViLkNvbmZXaWR0aCh3aW5kb3cuaW5uZXJXaWR0aCkpCgkJfSBlbHNlIHsKCQkJY2FuLk1vZGUoY2FuLl9tb2RlX2Jha3x8IiIpLCBjYW4uQ29uZkhlaWdodChjYW4uX2hlaWdodF9iYWspLCBjYW4uQ29uZldpZHRoKGNhbi5fd2lkdGhfYmFrKQoJCQlzdWIuTW9kZShjYW4uX21vZGVfYmFrfHwiIiksIHN1Yi5Db25mSGVpZ2h0KGNhbi5faGVpZ2h0X2JhayksIHN1Yi5Db25mV2lkdGgoY2FuLl93aWR0aF9iYWspCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLl9vdXRwdXQsIGh0bWwuSEVJR0hULCAiIiwgaHRtbC5NSU5fV0lEVEgsICIiKQoJCX0KCQljYW4uY29yZS5DYWxsRnVuYyhbc3ViLCBjaGF0Lk9OSU1QT1JULCBodG1sLkxBWU9VVF0sIHtjYW46IHN1Yn0pCgl9LAoJIuWFseS6q+W3peWFtyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLm9ubW90aW9uLnNoYXJlKGV2ZW50LCBjYW4sIFt7bmFtZTogY2hhdC5USVRMRSwgdmFsdWU6IG1ldGEubmFtZX0sIHtuYW1lOiBjaGF0LlRPUElDLCB2YWx1ZXM6IFtjbGkuV0hJVEUsIGNsaS5CTEFDS119XSwgWwoJCQltZGIuTkFNRSwgbWV0YS5pbmRleCwgbWRiLlRFWFQsIEpTT04uc3RyaW5naWZ5KGNhbi5JbnB1dChbXSwgdHJ1ZSkpLAoJCV0pCgl9LAoJIuaJk+W8gOmTvuaOpSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpLCBhcmdzID0gY2FuLk9wdGlvbigpOyBhcmdzLnJpdmVyID0gIiIsIGFyZ3Muc3Rvcm0gPSAiIgoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi51c2VyLmlzV2VpWGluPyBjYW4udXNlci5qdW1wcyhjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKTogY2FuLnVzZXIub3BlbihjYW4ubWlzYy5NZXJnZVVSTChjYW4sIGFyZ3MpKQoJfSwKCSLnlJ/miJDpk77mjqUiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBtZXRhID0gY2FuLkNvbmYoKSwgYXJncyA9IGNhbi5PcHRpb24oKQoJCWFyZ3MuY21kID0gbWV0YS5pbmRleHx8Y2FuLmNvcmUuS2V5cyhtZXRhLmN0eCwgbWV0YS5jbWQpLCBhcmdzLmNtZCA9PSAid2ViLndpa2kud29yZCIgJiYgKGFyZ3MuY21kID0gYXJncy5wYXRoKQoJCWNhbi5vbm1vdGlvbi5zaGFyZShldmVudCwgY2FuLCBbXSwgW21kYi5MSU5LLCBjYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGNhbi5taXNjLk1lcmdlVVJMKGNhbiwgYXJncykpXSkKCX0sCgki55Sf5oiQ6ISa5pysIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgY29uZiA9IGNhbi5Db25mKCkKCQl2YXIgYXJncyA9IGNhbi5JbnB1dCgiIiwgdHJ1ZSkuam9pbihpY2UuU1ApLCBsaXN0ID0gWwoJCQkiZXhwb3J0IGN0eF9kZXY9Iitsb2NhdGlvbi5vcmlnaW4rIjsgY3R4X3RlbXA9JChta3RlbXApOyBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCAkY3R4X2RldjsiKyIgc291cmNlICRjdHhfdGVtcCAiKyhjb25mLmluZGV4fHwiIikraWNlLlNQK2FyZ3MsCgkJCSJpc2hfc3lzX2Rldl9ydW5fY29tbWFuZCAiK2FyZ3MsICJpc2hfc3lzX2Rldl9ydW5fYWN0aW9uIiwgImlzaF9zeXNfZGV2X3J1bl9zb3VyY2UiLAoJCV0KCQljYW4udXNlci50b2FzdFNjcmlwdChjYW4sICc8ZGl2IGNsYXNzPSJzdG9yeSIgZGF0YS10eXBlPSJzcGFyayIsIGRhdGEtbmFtZT0ic2hlbGwiPicrCgkJCSc8bGFiZWw+JCA8L2xhYmVsPicrJzxzcGFuPicrbGlzdC5qb2luKCI8L3NwYW4+PGJyLz48bGFiZWw+JCA8L2xhYmVsPjxzcGFuPiIpKyc8L3NwYW4+JysnPC9kaXY+JywgY29uZi5pbmRleCtpY2UuU1ArYXJncykKCQljYW4udXNlci5jb3B5KGV2ZW50LCBjYW4sIGxpc3RbMF0pCgl9LAoJIueUn+aIkOWbvueJhyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLnRvaW1hZ2UoZXZlbnQsIGNhbiwgY2FuLl9uYW1lKSB9LAoKCSLliLfmlrDpobXpnaIiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IHZhciBzdWIgPSBjYW4uY29yZS5WYWx1ZShjYW4uX291dHB1dHMsICItMSIpCgkJY2FuLmNvcmUuQ2FsbEZ1bmMoW3N1YiwgY2hhdC5PTklNUE9SVCwgIl9pbml0Il0sIHtjYW46IHN1YiwgbXNnOiBzdWIuX21zZywgY2I6IGZ1bmN0aW9uKG1zZykge30sIHRhcmdldDogY2FuLl9vdXRwdXR9KQoJfSwKCSLkv53lrZjlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5zZWFyY2goZXZlbnQsIFsiUml2ZXIub25kZXRhaWwu5L+d5a2Y5Y+C5pWwIl0pIH0sCgki5riF56m65Y+C5pWwIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5TZWxlY3RBcmdzKGNhbiwgY2FuLl9vcHRpb24sICIiLCBmdW5jdGlvbihpdGVtKSB7IHJldHVybiBpdGVtLnZhbHVlID0gIiIgfSkgfSwKCSLmianlsZXlj4LmlbAiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4uX2FjdGlvbikgfSwKCSLlpI3liLbmlbDmja4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbil8fGNhbi5vbmV4cG9ydC5ib2FyZChjYW4pKSB9LAoJIuS4i+i9veaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIG1ldGEgPSBjYW4uQ29uZigpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3tuYW1lOiAiZmlsZW5hbWUiLCB2YWx1ZTogbWV0YS5uYW1lfV0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLnVzZXIuZG93bmxvYWRzKGNhbiwgY2FuLm9uZXhwb3J0LnRhYmxlKGNhbiksIGxpc3RbMF0sIG5mcy5DU1YpfHxjYW4udXNlci5kb3dubG9hZHMoY2FuLCBjYW4ub25leHBvcnQuYm9hcmQoY2FuKSwgbWV0YS5uYW1lLCBuZnMuVFhUKQoJCX0pCgl9LAoJIua4heepuuaVsOaNriI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgki5Yig6Zmk5bel5YW3IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkgfSwKCSLliKDpmaTphY3nva4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJjb25maWciLCBbInJlc2V0Il0pIH0sCgki5p+l55yL6YWN572uIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ucnVuQWN0aW9uKGV2ZW50LCAiY29uZmlnIiwgWyJzZWxlY3QiXSwgZnVuY3Rpb24obXNnKSB7CgkJY2FuLm9uYXBwZW5kLmJvYXJkKGNhbiwgbXNnKQoJfSkgfSwKCSLluK7liqnmlofmoaMiOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsICJoZWxwIikgfSwKCgki5omT5YyF6aG16Z2iIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgIm9ud2VicGFjayIsIGNhbi5yZXF1ZXN0KGV2ZW50KSkgfSwKCgki5pGE5YOP5aS0IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCXZhciBjb25zdHJhaW50cyA9IHthdWRpbzogZmFsc2UsIHZpZGVvOiB7d2lkdGg6IDIwMCwgaGVpZ2h0OiAyMDB9fQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3ZpZXc6IGN0eC5BQ1RJT059LCB7dmlldzogImNhcHR1cmUiLCBsaXN0OiBbe3R5cGU6ICJ2aWRlbyIsIF9pbml0OiBmdW5jdGlvbihpdGVtKSB7CgkJCW5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKGNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgewoJCQkJaXRlbS5zcmNPYmplY3QgPSBzdHJlYW0sIGl0ZW0ub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsKCQkJCQlpdGVtLnBsYXkoKQoJCQkJfSwgdWkuc3RyZWFtID0gc3RyZWFtCgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSk7IH0pCgkJfX1dfV0pCgoJCWNhbi5vbmFwcGVuZC5fYWN0aW9uKGNhbiwgWyLlhbPpl60iLCAi5oqT5ouNIl0sIHVpLmFjdGlvbiwgewoJCQki5oqT5ouNIjogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCXZhciBjYW52YXMgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5jYXB0dXJlLCBbe3R5cGU6ICJjYW52YXMiLCB3aWR0aDogdWkudmlkZW8ub2Zmc2V0V2lkdGgsIGhlaWdodDogdWkudmlkZW8ub2Zmc2V0SGVpZ2h0fV0pLmZpcnN0CgkJCQljYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UodWkudmlkZW8sIDAsIDApCgkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5jYXB0dXJlLCBbe2ltZzogY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyksIHN0eWxlOiB7d2lkdGg6IHVpLnZpZGVvLm9mZnNldFdpZHRoLCBoZWlnaHQ6IHVpLnZpZGVvLm9mZnNldEhlaWdodH19XSkKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCQkJfSwKCQkJIuWFs+mXrSI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQljYW4uY29yZS5MaXN0KHVpLnN0cmVhbS5nZXRUcmFja3MoKSwgZnVuY3Rpb24odHJhY2spIHsgdHJhY2suc3RvcCgpIH0pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS5hY3Rpb24pCgkJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCB1aS52aWRlbykKCQkJCWNhbi5wYWdlLlJlbW92ZShjYW4sIHVpLmNhcHR1cmUpCgkJCX0sCgkJfSkKCX0sCgoJY2xlYXI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIG5hbWUpIHsgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLl9vdXRwdXQpIH0sCgljbG9zZTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWlmIChjYW4uaXNGdWxsTW9kZSgpKSB7CgkJCWNhbi5vbmFjdGlvblsi5YiH5o2i5YWo5bGPIl0oZXZlbnQsIGNhbikKCQl9IGVsc2UgewoJCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4uX3RhcmdldCkKCQl9Cgl9LAoJdXBsb2FkOiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi51c2VyLnVwbG9hZChldmVudCwgY2FuKSB9LAoJYWN0aW9uczogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgY2FuLl9hY3Rpb24pIH0sCgluZXh0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5VcGRhdGUoZXZlbnQsIFtjdHguQUNUSU9OLCBtZGIuTkVYVCwgY2FuLlN0YXR1cyhtZGIuVE9UQUwpfHwwLCBjYW4uT3B0aW9uKG1kYi5MSU1JVCl8fGNhbi5BY3Rpb24obWRiLkxJTUlUKXx8IiIsIGNhbi5PcHRpb24obWRiLk9GRkVORCl8fGNhbi5BY3Rpb24obWRiLk9GRkVORCl8fCIiXSkgfSwKCXByZXY6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLlVwZGF0ZShldmVudCwgW2N0eC5BQ1RJT04sIG1kYi5QUkVWLCBjYW4uU3RhdHVzKG1kYi5UT1RBTCl8fDAsIGNhbi5PcHRpb24obWRiLkxJTUlUKXx8Y2FuLkFjdGlvbihtZGIuTElNSVQpfHwiIiwgY2FuLk9wdGlvbihtZGIuT0ZGRU5EKXx8Y2FuLkFjdGlvbihtZGIuT0ZGRU5EKXx8IiJdKSB9LAoJY2hhbmdlOiBmdW5jdGlvbihldmVudCwgY2FuLCBuYW1lLCB2YWx1ZSwgY2IpIHsKCQlyZXR1cm4gY2FuLnBhZ2UuU2VsZWN0QXJncyhjYW4sIGNhbi5fb3B0aW9uLCAiIiwgZnVuY3Rpb24oaW5wdXQpIHsKCQkJaWYgKGlucHV0Lm5hbWUgPT0gbmFtZSAmJiB2YWx1ZSAhPSBpbnB1dC52YWx1ZSkgeyBpbnB1dC52YWx1ZSA9IHZhbHVlCgkJCQl2YXIgZGF0YSA9IGlucHV0LmRhdGFzZXR8fHt9OyBjYW4uVXBkYXRlKGV2ZW50LCBjYW4uSW5wdXQoKSwgY2IpCgkJCQlyZXR1cm4gaW5wdXQKCQkJfQoJCX0pCgl9LAoKCW9wZW5Mb2NhdGlvbjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udXNlci5hZ2VudC5vcGVuTG9jYXRpb24oY2FuLnJlcXVlc3QoZXZlbnQpKSB9LAoJZ2V0TG9jYXRpb246IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi51c2VyLmFnZW50LmdldExvY2F0aW9uKGZ1bmN0aW9uKGRhdGEpIHsgY2FuLnJlcXVlc3QoZXZlbnQsIGRhdGEpCgkJCWNhbi51c2VyLmlucHV0KGV2ZW50LCBjYW4sIFttZGIuVFlQRSwgbWRiLk5BTUUsIG1kYi5URVhULCAibGF0aXR1ZGUiLCAibG9uZ2l0dWRlIl0sIGZ1bmN0aW9uKGFyZ3MpIHsKCQkJCWNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgYXJncykKCQkJfSkKCQl9KQoJfSwKCWdldENsaXBib2FyZERhdGE6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWZ1bmN0aW9uIGFkZCh0ZXh0KSB7IGNhbi5ydW5BY3Rpb24oZXZlbnQsIGJ1dHRvbiwgW2Nhbi5iYXNlLlBhcnNlSlNPTih0ZXh0KV0pIH0KCQluYXZpZ2F0b3IuY2xpcGJvYXJkPyBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCkudGhlbihhZGQpLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyKSB9KToKCQkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiBodG1sLlRFWFRBUkVBLCBuYW1lOiBtZGIuVEVYVH1dLCBmdW5jdGlvbihsaXN0KSB7IGFkZChsaXN0WzBdKSB9KQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLAoJdGFibGU6IGZ1bmN0aW9uKGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2c7IGlmIChtc2cuTGVuZ3RoKCkgPT0gMCkgeyByZXR1cm4gfQoJCXZhciByZXMgPSBbbXNnLmFwcGVuZCAmJiBtc2cuYXBwZW5kLmpvaW4oaWNlLkZTKV07IG1zZy5UYWJsZShmdW5jdGlvbihsaW5lLCBpbmRleCwgYXJyYXkpIHsKCQkJcmVzLnB1c2goY2FuLmNvcmUuSXRlbShsaW5lLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7IHJldHVybiB2YWx1ZSB9KS5qb2luKGljZS5GUykpCgkJfSkKCQlyZXR1cm4gcmVzLmpvaW4oaWNlLk5MKQoJfSwKCWJvYXJkOiBmdW5jdGlvbihjYW4pIHsgdmFyIG1zZyA9IGNhbi5fbXNnOyByZXR1cm4gbXNnLlJlc3VsdCgpIH0sCn0pCg==",
        "usr/volcanos/plugin/story/form.css": "ZGl2Lm91dHB1dC5mb3JtIGRpdi5pdGVtIHsKCXBhZGRpbmc6NDBweDsKfQo=",
        "usr/volcanos/plugin/story/form.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAiZm9ybSIpCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAibmFtZSIpCgkJbXNnLlB1c2goInZhbHVlIiwgImhhcnZleXNoYW8iKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAia2V5IikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dCIpCgkJbXNnLlB1c2goIm5hbWUiLCAiYWdlIikKCQltc2cuUHVzaCgidmFsdWUiLCAiMTgiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAic2VsZWN0IikKCQltc2cuUHVzaCgibmFtZSIsICJtYWxlIikKCQltc2cuUHVzaCgidmFsdWUiLCAibWFsZSxmZW1hbGUiKQoJCW1zZy5QdXNoKCJhY3Rpb24iLCAiIikKCgkJbXNnLlB1c2goInR5cGUiLCAidGV4dGFyZWEiKQoJCW1zZy5QdXNoKCJuYW1lIiwgImludHJvIikKCQltc2cuUHVzaCgidmFsdWUiLCAicHJvZ3JhbSIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQltc2cuUHVzaCgidHlwZSIsICJidXR0b24iKQoJCW1zZy5QdXNoKCJuYW1lIiwgInN1Ym1pdCIpCgkJbXNnLlB1c2goInZhbHVlIiwgIuaPkOS6pCIpCgkJbXNnLlB1c2goImFjdGlvbiIsICIiKQoKCQl2YXIgYWN0aW9uID0gIiI7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCXN3aXRjaCAodmFsdWUudHlwZSkgewoJCQkJY2FzZSBodG1sLkJVVFRPTjogYWN0aW9uID0gYWN0aW9ufHx2YWx1ZS5uYW1lCgkJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogWwoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuSU5QVVQsIHN0eWxlOiB7d2lkdGg6IChjYW4uQ29uZldpZHRoKCktOTApLzJ9LCBkYXRhOiB7dHlwZTogdmFsdWUudHlwZSwgdmFsdWU6IHZhbHVlLnZhbHVlfSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQkJCXZhciBhcmdzID0gW2N0eC5BQ1RJT04sIGFjdGlvbl0KCQkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIHRhcmdldCwgIi5hcmdzIiwgZnVuY3Rpb24oaXRlbSkgeyBhcmdzLnB1c2goaXRlbS5uYW1lLCBpdGVtLnZhbHVlKX0pCgkJCQkJCQljYW4ucnVuKGV2ZW50LCBhcmdzKQoJCQkJCQl9fV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlNFTEVDVDoKCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogIml0ZW0iLCBsaXN0OiBbCgkJCQkJCXt2aWV3OiBbImxhYmVsIl0sIGxpc3Q6IFt7dGV4dDogdmFsdWUubmFtZX1dfSwKCQkJCQkJe3ZpZXc6IFsiaW5wdXQiXSwgbGlzdDogW3t0eXBlOiBodG1sLlNFTEVDVCwgY2xhc3NOYW1lOiAiYXJncyIsIHN0eWxlOiB7d2lkdGg6IGNhbi5Db25mV2lkdGgoKS0xMDB9LAoJCQkJCQkJZGF0YTogdmFsdWUsIGxpc3Q6IGNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodmFsdWUudmFsdWUpLCBmdW5jdGlvbih2KSB7IHJldHVybiB7dHlwZTogaHRtbC5PUFRJT04sIG5hbWU6IHYsIHZhbHVlOiB2LCBpbm5lcjogdn0gfSkgfV19LAoJCQkJCV19XSkKCQkJCQlicmVhawoJCQkJY2FzZSBodG1sLlRFWFRBUkVBOgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6IGh0bWwuVEVYVEFSRUEsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQkJCWJyZWFrCgkJCQlkZWZhdWx0OgoJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiAiaXRlbSIsIGxpc3Q6IFsKCQkJCQkJe3ZpZXc6IFsibGFiZWwiXSwgbGlzdDogW3t0ZXh0OiB2YWx1ZS5uYW1lfV19LAoJCQkJCQl7dmlldzogWyJpbnB1dCJdLCBsaXN0OiBbe3R5cGU6ICJpbnB1dCIsIGNsYXNzTmFtZTogImFyZ3MiLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCktMTAwfSwgZGF0YTogdmFsdWV9XX0sCgkJCQkJXX1dKQoJCQl9CgkJfSkKCX0sCn0sIFsiIl0pCg==",
        "usr/volcanos/plugin/story/json.css": "ZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtOmhvdmVyIHsgYmFja2dyb3VuZC1jb2xvcjojMDAwMDsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gZGl2Lml0ZW0geyBwYWRkaW5nLWxlZnQ6MTVweDsgYm9yZGVyOnNvbGlkIDFweCAjMDAwMDAwMGQ7IGJvcmRlci1sZWZ0OmRhc2hlZCAxcHggbGlnaHRibHVlOyBtYXJnaW4tbGVmdDo1cHg7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIGRpdi5pdGVtOmhvdmVyIHsgYm9yZGVyOnNvbGlkIDFweCByZWQ7IH0KZGl2Lm91dHB1dC5qc29uIGRpdi5pdGVtIHNwYW4ubm9uY2UgeyBjb2xvcjojOWNiZWNhNGY7IGN1cnNvcjpwb2ludGVyOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmtleSB7IGNvbG9yOnllbGxvdzsgfQpkaXYub3V0cHV0Lmpzb24gZGl2Lml0ZW0gc3Bhbi5zdHJpbmcgeyBjb2xvcjptYWdlbnRhOyB9CmRpdi5vdXRwdXQuanNvbiBkaXYuaXRlbSBzcGFuLmNvbnN0IHsgY29sb3I6Y3lhbjsgfQoK",
        "usr/volcanos/plugin/story/json.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCAianNvbiIpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnKSwgY2FuLm9uaW1wb3J0LnNob3coY2FuLCBjYW4uYmFzZS5PYmoobXNnLlJlc3VsdCgpLCB7fSksIHRhcmdldCkKCX0sCglzaG93OiBmdW5jdGlvbihjYW4sIGRhdGEsIHRhcmdldCkgewoJCWZ1bmN0aW9uIHNob3coZGF0YSwgdGFyZ2V0LCBpbmRleCwgdG90YWwpIHsgdmFyIGxpc3QKCQkJc3dpdGNoICh0eXBlb2YgZGF0YSkgewoJCQkJY2FzZSBsYW5nLk9CSkVDVDoKCQkJCQlpZiAoZGF0YSA9PSBudWxsKSB7CgkJCQkJCWxpc3QgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogIm51bGwifV0pLml0ZW0KCQkJCQkJYnJlYWsKCQkJCQl9CgkJCQkJZnVuY3Rpb24gd3JhcChiZWdpbiwgZW5kLCBhZGQsIGNiKSB7CgkJCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t0ZXh0OiBiZWdpbn1dKQoJCQkJCQlhZGQgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFsiLi4uIiwgaHRtbC5TUEFOLCAibm9uY2UiXX1dKSwgY2IoKQoJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogZW5kfV0pCgkJCQkJfQoJCQkJCWZ1bmN0aW9uIHRvZ2dsZShsaXN0KSB7IGxpc3QgJiYgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGxpc3QpIH0KCQkJCQlmdW5jdGlvbiBfaXRlbSgpIHsKCQkJCQkJbGlzdCA9IGxpc3QgfHwgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGh0bWwuTElTVH1dKS5saXN0CgkJCQkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBsaXN0LCBbe3ZpZXc6IGh0bWwuSVRFTX1dKS5pdGVtCgkJCQkJfQoKCQkJCQlpZiAoY2FuLmJhc2UuaXNBcnJheShkYXRhKSkgeyAvLyDmlbDnu4QKCQkJCQkJd3JhcCgiWyIsICJdIiwgZGF0YS5sZW5ndGggPiAwLCBmdW5jdGlvbigpIHsgY2FuLmNvcmUuTGlzdChkYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsgdmFyIGl0ZW0gPSBfaXRlbSgpCgkJCQkJCQlzaG93KHZhbHVlLCBpdGVtLCBpbmRleCwgZGF0YS5sZW5ndGgpCgkJCQkJCX0pIH0pCgkJCQkJfSBlbHNlIHsgLy8g5a+56LGhCgkJCQkJCXZhciBsZW5ndGggPSBjYW4uY29yZS5JdGVtKGRhdGEpLmxlbmd0aCwgY291bnQgPSAwCgkJCQkJCXdyYXAoInsiLCAifSIsIGxlbmd0aCA+IDAsIGZ1bmN0aW9uKCkgeyBjYW4uY29yZS5JdGVtKGRhdGEsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHsgdmFyIGl0ZW0gPSBfaXRlbSgpCgkJCQkJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCBpdGVtLCBbe3RleHQ6IFsnIicra2V5KyciJywgaHRtbC5TUEFOLCAia2V5Il0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7IHRvZ2dsZShzdWIpIH19LCB7dGV4dDogJzogJ31dKQoJCQkJCQkJdmFyIHN1YiA9IHNob3codmFsdWUsIGl0ZW0sIGNvdW50KyssIGxlbmd0aCkKCQkJCQkJfSkgfSkKCQkJCQl9CgkJCQkJYnJlYWsKCQkJCWNhc2UgbGFuZy5TVFJJTkc6IC8qIOWtl+S4siAqLyBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dGV4dDogWyciJytkYXRhKyciJywgaHRtbC5TUEFOLCBsYW5nLlNUUklOR119XSk7IGJyZWFrCgkJCQlkZWZhdWx0OiAvKiDlhbblroMgKi8gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IFsnJytkYXRhKycnLCBodG1sLlNQQU4sICJjb25zdCJdfV0pCgkJCX0KCQkJKGluZGV4IDwgdG90YWwtMSkgJiYgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3RleHQ6IGljZS5GU31dKQoJCQlyZXR1cm4gbGlzdAoJCX07IHNob3coZGF0YSwgY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbe3ZpZXc6IGh0bWwuSVRFTX1dKS5pdGVtLCAwLCAwKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbIuWxleW8gCIsICLmipjlj6AiLCAi5aSN5Yi2Il0sCgki5bGV5byAIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfTElTVF0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGxpc3QsIHRydWUpCgkJfSkKCX0sCgki5oqY5Y+gIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fb3V0cHV0LCBbaHRtbC5ESVZfTElTVCwgaHRtbC5ESVZfTElTVF0sIGZ1bmN0aW9uKGxpc3QpIHsKCQkJY2FuLm9ubW90aW9uLmhpZGRlbihjYW4sIGxpc3QpCgkJfSkKCX0sCgki5aSN5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmNvcHkoZXZlbnQsIGNhbiwgY2FuLl9tc2cuUmVzdWx0KCkpCgl9LAp9KQo=",
        "usr/volcanos/plugin/story/media.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ucmVxdWlyZU1vZHVsZXMoWyJnaWZzaG90L2Rpc3QvZ2lmc2hvdC5qcyJdLCBmdW5jdGlvbigpIHsKCgkJfSkKCQl2YXIgaGVpZ2h0ID0gY2FuLkNvbmZIZWlnaHQoKQoJCWNhbi51aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIGNhbi5fb3V0cHV0LCBbe3ZpZXc6IGh0bWwuT1VUUFVUfSwge3ZpZXc6IGh0bWwuRElTUExBWSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodC80fX1dKQoJCW1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgewoJCQljYW4ub25pbXBvcnQuX3ZpZGVvKGNhbiwgIi9jaGF0L21lZGlhLyIrdmFsdWUucGF0aCkKCQl9KQoJfSwKCglfYWN0aW9uOiBmdW5jdGlvbihjYW4sIGxpc3QpIHsKCQljYW4ub25hcHBlbmQuX2FjdGlvbihjYW4sIGxpc3R8fGNhbi5vbmFjdGlvbi5saXN0LCBjYW4uX2FjdGlvbiwgY2FuLm9uYWN0aW9uKQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbiwgY2IpIHsgdmFyIGhlaWdodCA9IGNhbi5Db25mSGVpZ2h0KCkKCQljYW4udWkudmlkZW8gPSBjYW4ucGFnZS5BcHBlbmRzKGNhbiwgY2FuLnVpLm91dHB1dCwgW3t0eXBlOiBodG1sLlZJREVPLCBkYXRhOiB7Y29udHJvbHM6ICJjb250cm9scyJ9LCBzdHlsZToge2hlaWdodDogaGVpZ2h0KjMvNH0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsKCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNiKHRhcmdldCkgfSkKCQl9fV0pLmZpcnN0LCBjYW4ub25pbXBvcnQuX2FjdGlvbihjYW4sIFsi5oqT5ouNIiwgIuW9leWItiIsICLlj5bmtogiXSkKCX0sCglfaW1hZ2U6IGZ1bmN0aW9uKGNhbiwgc3JjKSB7CgkJY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3tpbWc6IHNyYywgc3R5bGU6IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkvNH19XSwgY2FuLnVpLmRpc3BsYXkuZmlyc3RDaGlsZCwgY2FuLnVpLmRpc3BsYXkpCgkJcmV0dXJuIHNyYwoJfSwKCV92aWRlbzogZnVuY3Rpb24oY2FuLCBzcmMpIHsKCQljYW4ucGFnZS5pbnNlcnRCZWZvcmUoY2FuLCBbe3R5cGU6IGh0bWwuVklERU8sIHNyYzogc3JjLCBkYXRhOiB7Y29udHJvbHM6ICJjb250cm9scyJ9LCBzdHlsZToge2hlaWdodDogY2FuLkNvbmZIZWlnaHQoKS80fX1dLCBjYW4udWkuZGlzcGxheS5maXJzdENoaWxkLCBjYW4udWkuZGlzcGxheSkKCQlyZXR1cm4gc3JjCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OQUNUSU9OLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFsi5b2V5bGPIiwgIuaRhOWDjyJdLAoJIuW9leWxjyI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsKCQljYW4ub25pbXBvcnQuX2xheW91dChjYW4sIGZ1bmN0aW9uKHRhcmdldCkgewoJCQluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSh7dmlkZW86IHtoZWlnaHQ6IGNhbi5Db25mSGVpZ2h0KCkqMy80fX0pLnRoZW4oZnVuY3Rpb24oc3RyZWFtKSB7IGNhbi5zdHJlYW0gPSBzdHJlYW0KCQkJCXRhcmdldC5zcmNPYmplY3QgPSBzdHJlYW0sIHRhcmdldC5vbmxvYWRlZG1ldGFkYXRhID0gZnVuY3Rpb24oZSkgeyB0YXJnZXQucGxheSgpIH0KCQkJfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7IGNhbi5taXNjLkxvZyhlcnIubmFtZSArICI6ICIgKyBlcnIubWVzc2FnZSkgfSkKCQl9KQoJfSwKCSLmkYTlg48iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLm9uaW1wb3J0Ll9sYXlvdXQoY2FuLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe3ZpZGVvOiB7aGVpZ2h0OiBjYW4uQ29uZkhlaWdodCgpKjMvNH19KS50aGVuKGZ1bmN0aW9uKHN0cmVhbSkgeyBjYW4uc3RyZWFtID0gc3RyZWFtCgkJCQl0YXJnZXQuc3JjT2JqZWN0ID0gc3RyZWFtLCB0YXJnZXQub25sb2FkZWRtZXRhZGF0YSA9IGZ1bmN0aW9uKGUpIHsgdGFyZ2V0LnBsYXkoKSB9CgkJCX0pLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjYW4ubWlzYy5Mb2coZXJyLm5hbWUgKyAiOiAiICsgZXJyLm1lc3NhZ2UpIH0pCgkJfSkKCX0sCgki5oqT5ouNIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgd2lkdGggPSBjYW4udWkudmlkZW8ub2Zmc2V0V2lkdGgsIGhlaWdodCA9IGNhbi51aS52aWRlby5vZmZzZXRIZWlnaHQKCQl2YXIgY2FudmFzID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLmRpc3BsYXksIFt7dHlwZTogaHRtbC5DQU5WQVMsIGhlaWdodDogaGVpZ2h0LCB3aWR0aDogd2lkdGh9XSkuZmlyc3QKCQljYW52YXMuZ2V0Q29udGV4dCgiMmQiKS5kcmF3SW1hZ2UoY2FuLnVpLnZpZGVvLCAwLCAwLCB3aWR0aCwgaGVpZ2h0LCAwLCAwLCB3aWR0aCwgaGVpZ2h0KQoJCWNhbi5vbmltcG9ydC5faW1hZ2UoY2FuLCBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGNhbnZhcykKCX0sCgki5b2V5Yi2IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4udWkuYmxvYnMgPSBbXQoJCXZhciByZWNvcmRlciA9IG5ldyBNZWRpYVJlY29yZGVyKGNhbi5zdHJlYW0sIHttaW1lVHlwZTogJ3ZpZGVvL3dlYm0nfSkKCQlyZWNvcmRlci5vbmRhdGFhdmFpbGFibGUgPSBmdW5jdGlvbihyZXMpIHsgY2FuLnVpLmJsb2JzLnB1c2gocmVzLmRhdGEpLCBjYW4uU3RhdHVzKCJ0b3RhbCIsIGNhbi51aS5ibG9icy5sZW5ndGgpIH0KCQlyZWNvcmRlci5vbnN0b3AgPSBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0Ll9sYXlvdXQoY2FuLCBmdW5jdGlvbih0YXJnZXQpIHsKCQkJCXRhcmdldC5zcmMgPSBjYW4ub25pbXBvcnQuX3ZpZGVvKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlOiAndmlkZW8vd2VibSd9KSkpCgkJCX0pLCBjYW4ub25pbXBvcnQuX2FjdGlvbihjYW4sIFsi5LiK5LygIiwgIuWPlua2iCJdKQoJCX0KCQlyZWNvcmRlci5zdGFydCgxMCksIGNhbi51aS5yZWNvcmRlciA9IHJlY29yZGVyCgkJY2FuLm9uaW1wb3J0Ll9hY3Rpb24oY2FuLCBbIue7k+adnyJdKQoJfSwKCSLnu5PmnZ8iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJY2FuLmNvcmUuTGlzdChjYW4uc3RyZWFtLmdldFRyYWNrcygpLCBmdW5jdGlvbih0cmFjaykgeyB0cmFjay5zdG9wKCkgfSkKCX0sCgki5LiK5LygIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLnJlcXVlc3QoZXZlbnQpCgkJY2FuLnVzZXIuaW5wdXQoZXZlbnQsIGNhbiwgW3t0eXBlOiAidGV4dCIsIG5hbWU6ICJmaWxlIiwgdmFsdWU6ICJzb21lIn1dLCBmdW5jdGlvbihsaXN0KSB7CgkJCW1zZy5fdXBsb2FkID0gbmV3IEZpbGUoY2FuLnVpLmJsb2JzLCAobGlzdFswXXx8InNvbWUiKSsiLndlYm0iKSAKCQkJY2FuLnJ1bkFjdGlvbihldmVudCwgaHRtbC5VUExPQUQpCgkJfSkKCX0sCgki5Y+W5raIIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi51aS5vdXRwdXQpLCBjYW4ub25pbXBvcnQuX2FjdGlvbihjYW4pCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9OREVUQUlMLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIGxpc3Q6IFsi5YWz6ZetIiwgIuaKk+aLjSIsICLlvZXliLYiXSwKCSLmiJDlm74iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJZ2lmc2hvdC5jcmVhdGVHSUYoewoJCQkndmlkZW8nOiBbVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlIDogJ3ZpZGVvL3dlYm0nfSkpXSwKCQl9LGZ1bmN0aW9uKG9iaikgewoJCQlpZighb2JqLmVycm9yKSB7CgkJCQljYW4udXNlci5kb3dubG9hZChjYW4sIG9iai5pbWFnZSwgInNvbWUiLCAiZ2lmIikKCQkJfQoJCX0pOwoJfSwKCSLlm57mlL4iOiBmdW5jdGlvbihldmVudCwgY2FuKSB7CgkJdmFyIHZpZGVvID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgY2FuLnVpLm91dHB1dCwgW3t0eXBlOiBodG1sLlZJREVPLCBzdHlsZToge3dpZHRoOiBjYW4uQ29uZldpZHRoKCl9fV0pLnZpZGVvCgkJdmlkZW8uc3JjID0gVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlIDogJ3ZpZGVvL3dlYm0nfSkpLCB2aWRlby5wbGF5KCkKCX0sCgki5LiL6L29IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi51c2VyLmRvd25sb2FkKGNhbiwgVVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihjYW4udWkuYmxvYnMsIHt0eXBlOiAidmlkZW8vd2VibSJ9KSksICJyZWNvcmQud2VibSIpCgl9LAp9KQpWb2xjYW5vcyhjaGF0Lk9ORVhQT1JULCB7aGVscDogIuWvvOWHuuaVsOaNriIsIGxpc3Q6IFsidG90YWwiXX0pCg==",
        "usr/volcanos/plugin/story/parse.js": "Vm9sY2Fub3MoY2hhdC5PTkFQUEVORCwge2hlbHA6ICLmuLLmn5PlvJXmk44iLCBsaXN0OiBbInsiLCAifSIsIGh0bWwuSEVBRCwgaHRtbC5MRUZULCBodG1sLk1BSU4sIGh0bWwuRk9PVF0sCglfcGFyc2U6IGZ1bmN0aW9uKGNhbiwgdGV4dCwgbmFtZSwgaGVpZ2h0KSB7IHZhciBzdGFjayA9IFt7X2RlZXA6IC0xLCBsaXN0OiBbXX1dLCBmaW5pc2ggPSBmYWxzZQoJCWNhbi5jb3JlLkxpc3QoY2FuLmNvcmUuU3BsaXQodGV4dCwgaWNlLk5MLCBpY2UuTkwsIGljZS5OTCksIGZ1bmN0aW9uKGxpbmUpIHsgaWYgKGxpbmUgPT0gIiIgfHwgZmluaXNoKSB7IHJldHVybiB9CgkJCXZhciBkZWVwID0gMDsgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lLmxlbmd0aDsgaSsrKSB7IGlmIChsaW5lW2ldID09IGljZS5TUCkgeyBkZWVwKysgfSBlbHNlIGlmIChsaW5lW2ldID09IGljZS5UQikgeyBkZWVwICs9IDQgfSBlbHNlIHsgYnJlYWsgfSB9CgkJCWZvciAodmFyIGkgPSBzdGFjay5sZW5ndGgtMTsgaSA+IDA7IGktLSkgeyBpZiAoZGVlcCA8PSBzdGFja1tpXS5fZGVlcCkgeyBzdGFjay5wb3AoKSB9IH0KCgkJCXZhciBscyA9IGNhbi5jb3JlLlNwbGl0KGxpbmUpOyBpZiAobHNbMF0gPT0gInJldHVybiAiKSB7IHJldHVybiBmaW5pc2ggPSB0cnVlIH0KCQkJdmFyIGl0ZW0gPSB7X2RlZXA6IGRlZXAsIGxpc3Q6IFtdfTsgdmFyIGxpc3QgPSBzdGFja1tzdGFjay5sZW5ndGgtMV07IGxpc3QubGlzdC5wdXNoKGl0ZW0pOyBpZiAoZGVlcCA+IGxpc3QuX2RlZXApIHsgc3RhY2sucHVzaChpdGVtKSB9CgkJCWNhbi5vbmFwcGVuZC5saXN0LmluZGV4T2YobHNbMF0pID4gLTEgfHwgY2FuLm9uYXBwZW5kW2xzWzBdXT8gaXRlbS50eXBlID0gbHNbMF06IGl0ZW0ubmFtZSA9IGxzWzBdCgkJCWZvciAodmFyIGkgPSAxOyBpIDwgbHMubGVuZ3RoOyBpICs9IDIpIHsgY2FuLmNvcmUuVmFsdWUoaXRlbSwgbHNbaV0sIGxzW2krMV0pIH0KCQl9KQoJCXJldHVybiB7dHlwZTogbmFtZSwgc3R5bGU6IHtoZWlnaHQ6IGhlaWdodHx8Y2FuLkNvbmZIZWlnaHQoKXx8d2luZG93LmlubmVySGVpZ2h0fSwgbGlzdDogc3RhY2tbMF0ubGlzdH0KCX0sCglwYXJzZTogZnVuY3Rpb24oY2FuLCBsaXN0LCB0YXJnZXQsIGtleXMsIGRhdGEsIHR5cGUpIHsgdGFyZ2V0ID0gdGFyZ2V0fHxjYW4uX291dHB1dCwgZGF0YSA9IGRhdGF8fHt9CgkJaWYgKCFsaXN0KSB7IHJldHVybiB9IGVsc2UgaWYgKGNhbi5iYXNlLmlzQXJyYXkobGlzdCkpIHsKCQkJcmV0dXJuIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24obWV0YSwgaW5kZXgpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEsIHRhcmdldCwga2V5cywgZGF0YSwgdHlwZSkgfSkKCgkJfSBlbHNlIGlmIChjYW4uYmFzZS5pc1N0cmluZyhsaXN0KSkgewoJCQl2YXIgbHMgPSBjYW4uY29yZS5TcGxpdChsaXN0LCAiIiwgIjo9QCIpOyBpZiAobHMubGVuZ3RoID09IDEpIHsKCQkJCXZhciBtZXRhID0gdHlwZT8ge3R5cGU6IHR5cGUsIG5hbWU6IGxzWzBdfToge3R5cGU6IGxzWzBdfQoJCQl9IGVsc2UgewoJCQkJdmFyIG1ldGEgPSB7bmFtZTogbHNbMF19OyBmb3IgKHZhciBpID0gMTsgaSA8IGxzLmxlbmd0aDsgaSArPSAyKSB7IHN3aXRjaCAobHNbaV0pIHsKCQkJCQljYXNlICJAIjogbWV0YS5hY3Rpb24gPSBsc1tpKzFdOyBicmVhawoJCQkJCWNhc2UgIj0iOiBtZXRhLnZhbHVlID0gbHNbaSsxXTsgYnJlYWsKCQkJCQljYXNlICI6IjogbWV0YS50eXBlID0gbHNbaSsxXTsgYnJlYWsKCQkJCX0gfQoJCQl9CgoJCX0gZWxzZSBpZiAoY2FuLmJhc2UuaXNPYmplY3QobGlzdCkpIHsgdmFyIG1ldGEgPSBsaXN0IH0KCgkJdmFyIGl0ZW0gPSB7dmlldzogbWV0YS50eXBlfTsgc3dpdGNoIChtZXRhLnR5cGUpIHsKCQkJY2FzZSBodG1sLkhFQUQ6IG1ldGEuc3VidHlwZSA9IGh0bWwuTUVOVQoJCQkJbWV0YS5pbml0ID0gZnVuY3Rpb24odGFyZ2V0KSB7IGNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGh0bWwuTEFZT1VUKSwgZGF0YS5oZWFkID0gdGFyZ2V0IH0KCQkJCWJyZWFrCgkJCWNhc2UgInsiOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTEVGVCAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTEVGVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5JVEVNCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmxlZnQgPSB0YXJnZXQKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSkKCQkJCX0KCQkJCWJyZWFrCgkJCWNhc2UgIn0iOiBpZiAobWV0YS5fZGVlcCA+IDApIHsgcmV0dXJuIH0KCQkJCWl0ZW0udmlldyA9IG1ldGEudHlwZSA9IGh0bWwuTUFJTiAvLyBubyBicmVhawoJCQljYXNlIGh0bWwuTUFJTjoKCQkJCW1ldGEuaW5pdCA9IGZ1bmN0aW9uKHRhcmdldCkgeyBjYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgdGFyZ2V0LCBodG1sLkxBWU9VVCkKCQkJCQljYW4ub25tb3Rpb24uZGVsYXkoY2FuLCBmdW5jdGlvbigpIHsgdmFyIGhlaWdodCA9IHRhcmdldC5wYXJlbnROb2RlLm9mZnNldEhlaWdodAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgY2FuLnBhZ2UuS2V5cyhodG1sLkRJVl9MQVlPVVRfSEVBRCwgaHRtbC5ESVZfTEFZT1VUX0ZPT1QpLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCQlpZiAoaXRlbS5wYXJlbnROb2RlID09IHRhcmdldC5wYXJlbnROb2RlKSB7CgkJCQkJCQkJaGVpZ2h0IC09IGl0ZW0ub2Zmc2V0SGVpZ2h0IC8vIOmrmOW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQpCgkJCQkJfSwgZGF0YS5tYWluPyAxMDogMTAwKQoJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgd2lkdGggPSB0YXJnZXQucGFyZW50Tm9kZS5vZmZzZXRXaWR0aAoJCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB0YXJnZXQucGFyZW50Tm9kZSwgaHRtbC5ESVZfTEFZT1VUX0xFRlQsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCQkJCWlmIChpdGVtLnBhcmVudE5vZGUgPT0gdGFyZ2V0LnBhcmVudE5vZGUpIHsKCQkJCQkJCQl3aWR0aCAtPSBpdGVtLm9mZnNldFdpZHRoIC8vIOWuveW6pgoJCQkJCQkJfQoJCQkJCQl9KSwgY2FuLnBhZ2Uuc3R5bGUoY2FuLCB0YXJnZXQsIGh0bWwuV0lEVEgsIHdpZHRoKQoJCQkJCX0sIGRhdGEubWFpbj8gMTA6IDEwMCkKCgkJCQkJaWYgKCFkYXRhLm1haW4pIHsgZGF0YS5tYWluID0gdGFyZ2V0CgkJCQkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyBkYXRhLm1haW5faW5pdCAmJiBkYXRhLm1haW5faW5pdCgpIH0sIDMwMCkKCQkJCQl9CgkJCQl9CgkJCQlicmVhawoJCQljYXNlIGh0bWwuRk9PVDogbWV0YS5zdWJ0eXBlID0gaHRtbC5NRU5VCgkJCQltZXRhLmluaXQgPSBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRhcmdldCwgaHRtbC5MQVlPVVQpLCBkYXRhLmZvb3QgPSB0YXJnZXQgfQoJCQkJYnJlYWsKCQkJZGVmYXVsdDogdmFyIGNiID0gY2FuLm9uYXBwZW5kW21ldGEudHlwZV07IGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCX0KCQlpZiAoY2FuLmJhc2UuaXNPYmplY3QobWV0YS5zdHlsZSkpIHsgaXRlbS5zdHlsZSA9IG1ldGEuc3R5bGUgfQoJCWlmIChjYW4uYmFzZS5pc1N0cmluZyhtZXRhLnN0eWxlKSkgeyBpdGVtLmNsYXNzTmFtZSA9IG1ldGEuc3R5bGUgfQoKCQltZXRhLmtleXMgPSBtZXRhLmtleXN8fGNhbi5jb3JlLktleXMoa2V5cywgbWV0YS5uYW1lfHxtZXRhLnR5cGUpIAoJCXZhciBjYiA9IGNhbi5vbmFwcGVuZFt0eXBlXTsgIWNhbi5vbmFwcGVuZFttZXRhLnR5cGVdICYmIGNiICYmIGNiKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0LCBkYXRhKQoJCWl0ZW0uX2luaXQgPSBpdGVtLl9pbml0fHxmdW5jdGlvbih0YXJnZXQpIHsgbWV0YS5saXN0ICYmIGNhbi5vbmFwcGVuZC5wYXJzZShjYW4sIG1ldGEubGlzdCwgdGFyZ2V0LCBtZXRhLmtleXMsIGRhdGEsIG1ldGEuc3VidHlwZXx8dHlwZSkgfQoJCWl0ZW0udGFyZ2V0ID0gY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdGFyZ2V0LCBbaXRlbV0pLmZpcnN0OyBtZXRhLmluaXQgJiYgbWV0YS5pbml0KGl0ZW0udGFyZ2V0KQoJCWNhbi5jb3JlLkl0ZW1DQihtZXRhLCBmdW5jdGlvbihrZXksIGNiKSB7IGl0ZW0udGFyZ2V0W2tleV0gPSBjYW4uYmFzZS5pc0Z1bmMoY2IpPyBjYjogZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uZW5naW5lLnNpZ25hbChjYW4sIGNiLCBjYW4ucmVxdWVzdChldmVudCwgbWV0YSkpIH0gfSkKCX0sCgl1c2VybmFtZTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiBbYWFhLlVTRVJOQU1FLCBodG1sLkRJVl0sIGxpc3Q6IFt7dmlldzogW2h0bWwuTkFNRSwgaHRtbC5ESVYsIGNhbi51c2VyLmluZm8udXNlcm5pY2tdfSwge3ZpZXc6IFtodG1sLklDT04sIGh0bWwuRElWXSwgbGlzdDogW3tpbWc6IGNhbi51c2VyLmluZm8uYXZhdGFyfV19XX0pCgl9LAoJbWVudTogZnVuY3Rpb24oY2FuLCBpdGVtLCBtZXRhLCB0YXJnZXQpIHsKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIG1ldGEubGlzdCAmJiBtZXRhLmxpc3QubGVuZ3RoID4gMD8ge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIHt9LCBjYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSkgeyByZXR1cm4gaXRlbS5uYW1lIH0pLCBmdW5jdGlvbihldmVudCwgYnV0dG9uLCBtZXRhKSB7CgkJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgYnV0dG9uKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IGJ1dHRvbn0pKQoJCQl9KQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fToge3ZpZXc6IFtodG1sLk1FTlUsIGh0bWwuRElWLCBtZXRhLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQljYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgbWV0YS5uYW1lKSB8fCBjYW4ub25lbmdpbmUuc2lnbmFsKGNhbiwgaHRtbC5NRU5VLCBjYW4ucmVxdWVzdChldmVudCwge2l0ZW06IG1ldGEubmFtZX0pKQoJCX0sIF9pbml0OiBmdW5jdGlvbigpIHt9fSkKCX0sCglpdGVtOiBmdW5jdGlvbihjYW4sIGl0ZW0sIG1ldGEsIHRhcmdldCwgZGF0YSkgeyBpdGVtLnZpZXcgPSBpdGVtLnZpZXd8fGh0bWwuTElTVAoJCWlmIChkZWNvZGVVUklDb21wb25lbnQobG9jYXRpb24uaGFzaCkgPT0gIiMiK21ldGEua2V5cykgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoJCWlmIChtZXRhLmFjdGlvbiA9PSBpY2UuQVVUTyAmJiAhbG9jYXRpb24uaGFzaCkgewoJCQlkYXRhLm1haW5faW5pdCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25hcHBlbmQuX3Nob3coY2FuLCBtZXRhLCBkYXRhKSB9CgkJfQoKCQljYW4uYmFzZS5Db3B5KGl0ZW0sIHt2aWV3OiAic29tZSIsIGxpc3Q6IFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIG1ldGEubmFtZXx8bWV0YV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCWNhbi5vbmFwcGVuZC5fc2hvdyhjYW4sIG1ldGEsIGRhdGEpLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCksIGV2ZW50LnRhcmdldC5uZXh0U2libGluZyAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nKQoJCX19LCB7dmlldzogaHRtbC5MSVNULCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IG1ldGEubGlzdCAmJiBjYW4ub25hcHBlbmQucGFyc2UoY2FuLCBtZXRhLmxpc3QsIHRhcmdldCwgbWV0YS5rZXlzLCBkYXRhLCBodG1sLklURU0pIH19XSwgX2luaXQ6IGZ1bmN0aW9uKCkge319KQoJfSwKCXRhYnM6IGZ1bmN0aW9uKGNhbiwgaXRlbSwgbWV0YSwgdGFyZ2V0KSB7CgkJaXRlbS5saXN0ID0gW3t2aWV3OiAibmFtZSJ9LCB7dmlldzogaHRtbC5QQUdFfV0sIGl0ZW0uX2luaXQgPSBmdW5jdGlvbihfdGFyZ2V0LCB1aSkgewoJCQljYW4ucGFnZS5BcHBlbmQoY2FuLCB1aS5wYWdlLCBbe3ZpZXc6IGh0bWwuSU5QVVQsIGxpc3Q6IFt7dHlwZTogaHRtbC5JTlBVVCwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIF90YXJnZXQsIFtodG1sLkRJVl9QQUdFLCBodG1sLkRJVl9JVEVNXSwgZnVuY3Rpb24oaXRlbSkgewoJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5zZXQoY2FuLCBpdGVtLCBodG1sLkhJREUsIGl0ZW0uaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA9PSAtMSkKCQkJCX0pCgkJCX19XX1dKQoJCQljYW4uY29yZS5MaXN0KG1ldGEubGlzdCwgZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLkFwcGVuZChjYW4sIHVpLm5hbWUsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubmFtZXx8aXRlbV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIF90YXJnZXQsIFtbaHRtbC5ESVZfUEFHRSwgaHRtbC5ESVZfTElTVF1dLCBpbmRleCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQkJdWkucGFnZS5zY3JvbGxUbygwLCAwKQoJCQkJfX1dKQoJCQkJY2FuLnBhZ2UuQXBwZW5kKGNhbiwgdWkucGFnZSwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5DbGFzc0xpc3QubmVnKGNhbiwgZXZlbnQudGFyZ2V0Lm5leHRTaWJsaW5nLCBodG1sLlNFTEVDVCkKCQkJCQljYW4ub25tb3Rpb24uc2VsZWN0KGNhbiwgdWkubmFtZSwgaHRtbC5ESVZfSVRFTSwgaW5kZXgpCgkJCQl9fSwge3ZpZXc6IFtodG1sLkxJU1RdLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7CgkJCQkJY2FuLm9uYXBwZW5kLnBhcnNlKGNhbiwgaXRlbS5saXN0LCB0YXJnZXQsIGNhbi5jb3JlLktleXMobWV0YS5rZXlzLCBpdGVtLm5hbWUpLCBkYXRhLCBodG1sLklURU0pCgkJCQl9fV0pCgkJCX0pCgkJCWNhbi5vbm1vdGlvbi5kZWxheShjYW4sIGZ1bmN0aW9uKCkgeyB2YXIgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodAoJCQkJY2FuLnBhZ2Uuc3R5bGUoY2FuLCB1aS5wYWdlLCBodG1sLkhFSUdIVCwgaGVpZ2h0LTEwLShtZXRhLnN0eWxlPyAwOiB1aS5uYW1lLm9mZnNldEhlaWdodCkpCgkJCQljYW4ucGFnZS5zdHlsZShjYW4sIF90YXJnZXQsIGh0bWwuSEVJR0hULCBoZWlnaHQtMTApCgkJCX0pLCBjYW4ucGFnZS5TZWxlY3QoY2FuLCB1aS5uYW1lLCBodG1sLkRJVl9JVEVNKVswXS5jbGljaygpCgkJfQoJfSwKCV9zaG93OiBmdW5jdGlvbihjYW4sIG1ldGEsIGRhdGEpIHsgdmFyIHRhcmdldCA9IGRhdGEubWFpbgoJCWlmICghbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCXZhciB1cmwgPSBjYW4ubWlzYy5NZXJnZVVSTChjYW4sIHtwb2Q6IGNhbi5taXNjLlNlYXJjaChjYW4sICJwb2QiKSwgY21kOiBtZXRhLmluZGV4fSkKCQlpZiAobWV0YS5hY3Rpb24gPT0gInB1c2giKSB7IHJldHVybiBjYW4udXNlci5qdW1wcyh1cmwpIH0KCQlpZiAobWV0YS5hY3Rpb24gPT0gIm9wZW4iKSB7IHJldHVybiBjYW4udXNlci5vcGVuKHVybCkgfQoKCQlsb2NhdGlvbi5oYXNoID0gbWV0YS5rZXlzCgkJaWYgKGNhbi5vbm1vdGlvbi5jYWNoZShjYW4sIGZ1bmN0aW9uKCkgeyByZXR1cm4gbWV0YS5rZXlzIH0sIHRhcmdldCkpIHsgcmV0dXJuIH0KCgkJaWYgKGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuWk1MIHx8IGNhbi5iYXNlLkV4dChtZXRhLmluZGV4KSA9PSBuZnMuSU1MKSB7CgkJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dHlwZTogaHRtbC5JRlJBTUUsIHNyYzogIi9jaGF0L2NtZC8iK21ldGEuaW5kZXgsIGhlaWdodDogdGFyZ2V0Lm9mZnNldEhlaWdodCwgd2lkdGg6IHRhcmdldC5vZmZzZXRXaWR0aH1dKQoJCX0KCgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHtpbmRleDogbWV0YS5pbmRleCwgYXJnczogY2FuLmJhc2UuT2JqKG1ldGEuYXJncyl9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uQ29tbWFuZChldmVudCwgc3ViLl9pbmRleHx8bWV0YS5pbmRleCwgY21kcywgY2IpIH0KCQkJc3ViLkNvbmZIZWlnaHQodGFyZ2V0Lm9mZnNldEhlaWdodC0zKmh0bWwuQUNUSU9OX0hFSUdIVC02Kmh0bWwuUExVR0lOX01BUkdJTiksIHN1Yi5Db25mV2lkdGgodGFyZ2V0Lm9mZnNldFdpZHRoLTQqaHRtbC5QTFVHSU5fTUFSR0lOKQoJCQljYW4ucGFnZS5zdHlsZShjYW4sIHN1Yi5fb3V0cHV0LCBodG1sLk1BWF9IRUlHSFQsIHN1Yi5Db25mSGVpZ2h0KCkpCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX1dJRFRILCBzdWIuQ29uZldpZHRoKCkpCgkJfSwgdGFyZ2V0KQoJfSwKfSkKCg==",
        "usr/volcanos/plugin/story/pie.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpCgoJCXZhciBjb2xvciA9IFtjbGkuUkVELCBjbGkuWUVMTE9XLCBjbGkuR1JFRU4sIGNsaS5DWUFOLCBjbGkuQkxVRSwgY2xpLlBVUlBMRV0KCQl2YXIgY29sb3IgPSBbIiMzMzAwRkYiLCAiIzIxOTZGMyIsICIjNENBRjUwIiwgIiNDRERDMzkiLCAiI0ZGRUIzQiIsICIjOUMyN0IwIiwgIiM3OTU1NDgiLCAiIzYwN0Q4QiIsICIjQ0MzM0ZGIl0KCQl2YXIgaGVpZ2h0ID0gbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGNhbi5Db25mSGVpZ2h0KCkKCgkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIGNhbi5fZmllbGRzLCAiZHJhdyIpCgkJY2FuLnJlcXVpcmUoWyIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy5qcyIsICIvcGx1Z2luL2xvY2FsL3dpa2kvZHJhdy9wYXRoLmpzIl0sIGZ1bmN0aW9uKCkgewoJCQljYW4ub25pbXBvcnQuX3Nob3coY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuX3N0YXR1cyhjYW4sIFtdLmNvbmNhdChtc2cuYXBwZW5kLCBbIndlaWdodCJdKSkKCQkJdmFyIG1hcmdpbiA9IGhlaWdodC84LCByID0gaGVpZ2h0LzItbWFyZ2luOyBjYW4uc3ZnLlZhbChodG1sLldJRFRILCAyKihyK21hcmdpbikpLCBjYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgMioocittYXJnaW4pKQoJCQljYW4ub25pbXBvcnQuX2RyYXcoY2FuLCBtc2csIGNhbi5Db25mKG1kYi5GSUVMRCksIGNvbG9yLCByK21hcmdpbiwgcittYXJnaW4sIHIsIG1hcmdpbiwgMCkKCgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgY2FuLnVpLnByb2plY3QsIGh0bWwuTUFYX1dJRFRILCBjYW4uQ29uZldpZHRoKCktaGVpZ2h0KQoJCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuLCBjYW4udWkucHJvamVjdCksIGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBjYW4udWkucHJvamVjdCwgdHJ1ZSkKCQkJY2FuLm9uYXBwZW5kLnRhYmxlKGNhbiwgbXNnLCBudWxsLCBjYW4udWkucHJvamVjdCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi51aS5wcm9qZWN0LCBodG1sLlRSLCBmdW5jdGlvbih0ciwgaW5kZXgpIHsKCQkJCWNhbi5wYWdlLk1vZGlmeShjYW4sIHRyLCB7b25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbmltcG9ydC5fZHJhdyhjYW4sIG1zZywgY2FuLkNvbmYobWRiLkZJRUxEKSwgY29sb3IsIHIrbWFyZ2luLCByK21hcmdpbiwgciwgbWFyZ2luLCBpbmRleC0xKQoJCQkJfX0pCgkJCX0pCgkJfSkKCX0sCglfZHJhdzogZnVuY3Rpb24oY2FuLCBtc2csIGZpZWxkLCBjb2xvciwgeCwgeSwgciwgbWFyZ2luLCB3aGljaCkgeyBmaWVsZCA9IGZpZWxkfHxtZGIuVkFMVUUKCQlmdW5jdGlvbiBwb3MoeCwgeSwgciwgYW5nbGUpIHsgYW5nbGUgLT0gOTA7IHJldHVybiBbeCArIHIgKiBNYXRoLmNvcyhhbmdsZSAqIE1hdGguUEkgLyAxODApLCB5ICsgciAqIE1hdGguc2luKGFuZ2xlICogTWF0aC5QSSAvIDE4MCldIH0KCQlmdW5jdGlvbiBwaWUoeCwgeSwgciwgYmVnaW4sIHNwYW4sIGNvbG9yLCBjYikgeyBjYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5QQVRILCBzdHlsZToga2l0LkRpY3QoCgkJCWh0bWwuU1RST0tFX1dJRFRILCAxLCBodG1sLlNUUk9LRSwgY29sb3IsIGh0bWwuRklMTCwgY29sb3IsICJkIiwgY2FuLmJhc2Uuam9pbnMoWwoJCQkJWyJNIiwgeCwgeV0sIFsiTCJdLmNvbmNhdChwb3MoeCwgeSwgciwgYmVnaW4pKSwgWyJBIiwgciwgciwgIjAiLCBzcGFuPjE4MD8gIjEiOiAiMCIsICIxIl0uY29uY2F0KHBvcyh4LCB5LCByLCBiZWdpbitzcGFuKSksIFsiWiJdCgkJCV0sIGljZS5TUCwgaWNlLkZTKSwKCQkpLCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQpIH0gfSkgfQoKCQlpZiAod2hpY2ggPT0gY2FuLl9sYXN0KSB7IHJldHVybiB9IGNhbi5fbGFzdCA9IHdoaWNoCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZyksIGNhbi5zdmcuVmFsdWUobWRiLkNPVU5ULCAwKQoJCXZhciB0b3RhbCA9IDA7IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSkgeyB0b3RhbCArPSBjYW4ub25pbXBvcnQuX3BhcnNlSW50KGNhbiwgdmFsdWVbZmllbGRdKSB9KQoJCXZhciBiZWdpbiA9IDA7IG1zZ1tjbGkuQ09MT1JdID0gW10sIG1zZ1sid2VpZ2h0Il0gPSBbXSwgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCkgeyB2YXIgc3BhbiA9IGNhbi5vbmltcG9ydC5fcGFyc2VJbnQoY2FuLCB2YWx1ZVtmaWVsZF0pL3RvdGFsKjM2MAoJCQl2YXIgcCA9IGluZGV4PT13aGljaD8gcG9zKHgsIHksIG1hcmdpbiwgYmVnaW4rc3Bhbi8yKTogW3gsIHldLCBjID0gY29sb3JbaW5kZXglY29sb3IubGVuZ3RoXQoKCQkJaWYgKG1zZy5MZW5ndGgoKSA9PSAxKSB7CgkJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5DSVJDTEUsIHBvaW50OiBbe3g6IHgsIHk6IHl9LCB7eDogeCwgeTogeStyfV0sIHN0eWxlOiB7ZmlsbDogY29sb3JbMF19fSkKCQkJfSBlbHNlIHsKCQkJCXBpZShwWzBdLCBwWzFdLCByLCBiZWdpbiwgc3BhbiwgYywgZnVuY3Rpb24oZXZlbnQpIHsgY2FuLm9uaW1wb3J0Ll9kcmF3KGNhbiwgbXNnLCBmaWVsZCwgY29sb3IsIHgsIHksIHIsIG1hcmdpbiwgaW5kZXgpIH0pLCBiZWdpbiArPSBzcGFuCgkJCX0KCQkJbXNnLlB1c2goY2xpLkNPTE9SLCAnPHNwYW4gc3R5bGU9ImJhY2tncm91bmQtY29sb3I6JytjKyciPiAgICAgPC9zcGFuPicpCgkJCW1zZy5QdXNoKCJ3ZWlnaHQiLCBwYXJzZUludChzcGFuKjEwMC8zNjApKyIlIikKCQkJaWYgKGluZGV4ID09IHdoaWNoKSB7IGNhbi5TdGF0dXModmFsdWUpLCBjYW4uU3RhdHVzKCJ3ZWlnaHQiLCBwYXJzZUludChzcGFuKjEwMC8zNjApKyIlIikgfQoJCX0pCgl9LAoJX3BhcnNlSW50OiBmdW5jdGlvbihjYW4sIHZhbHVlKSB7IHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAibWkiKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAiZ2kiKSkgeyByZXR1cm4gcGFyc2VJbnQodmFsdWUpKjEwMDAwMDAwMDAgfQoJCWlmIChjYW4uYmFzZS5lbmRXaXRoKHZhbHVlLCAiZyIpKSB7IHJldHVybiBwYXJzZUludCh2YWx1ZSkqMTAwMDAwMDAwMCB9CgkJaWYgKGNhbi5iYXNlLmVuZFdpdGgodmFsdWUsICJtIikpIHsgcmV0dXJuIHBhcnNlSW50KHZhbHVlKSoxMDAwMDAwIH0KCQlyZXR1cm4gcGFyc2VJbnQodmFsdWUpCgl9Cn0pClZvbGNhbm9zKGNoYXQuT05FWFBPUlQsIHtoZWxwOiAi5a+85Ye65pWw5o2uIiwgX3Nob3c6IGZ1bmN0aW9uKGNhbikge319KQo=",
        "usr/volcanos/plugin/story/spide.css": "ZmllbGRzZXQuZHJhdy5zcGlkZSBkaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5Om5vbmU7IH0K",
        "usr/volcanos/plugin/story/spide.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCgkJY2FuLkNvbmZEZWZhdWx0KHtyb290OiAiaWNlIiwgZmllbGQ6IG1zZy5hcHBlbmRbMF0sIHNwbGl0OiBpY2UuUFN9KQoJCWNhbi5kaXJfcm9vdCA9IG1zZy5PcHRpb24obmZzLkRJUl9ST09UKXx8Y2FuLkNvbmYoInJvb3QiKQoJCWNhbi5fdHJlZSA9IGNhbi5vbmltcG9ydC5fdHJlZShjYW4sIG1zZy5UYWJsZSgpLCBjYW4uQ29uZihtZGIuRklFTEQpLCBjYW4uQ29uZihsZXguU1BMSVQpKQoJCWlmICghY2FuLl90cmVlWyIiXSkgeyByZXR1cm4gfSBjYW4uX3RyZWVbIiJdLm5hbWUgPSBjYW4uQ29uZigicm9vdCIpCgoJCWNhbi5zaXplID0gcGFyc2VJbnQoY2FuLkFjdGlvbigic2l6ZSIpfHwyNCkKCQljYW4ubWFyZ2luID0gcGFyc2VJbnQoY2FuLkFjdGlvbigibWFyZ2luIil8fDMwKQoJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCBjYW4uX2ZpZWxkcywgImRyYXciKQoJCWNhbi5yZXF1aXJlKFsiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcuanMiLCAiL3BsdWdpbi9sb2NhbC93aWtpL2RyYXcvcGF0aC5qcyJdLCBmdW5jdGlvbigpIHsKCQkJY2FuLm9uaW1wb3J0LmxheW91dChjYW4pCgkJfSkKCX0sCglfdHJlZTogZnVuY3Rpb24oY2FuLCBsaXN0LCBmaWVsZCwgc3BsaXQpIHsKCQl2YXIgbm9kZSA9IHt9OyBjYW4uY29yZS5MaXN0KGxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaWYgKCFpdGVtW2ZpZWxkXSkgeyByZXR1cm4gfQoJCQljYW4uY29yZS5MaXN0KGNhbi5iYXNlLnRyaW1QcmVmaXgoaXRlbVtmaWVsZF0sIGNhbi5kaXJfcm9vdCtzcGxpdCkuc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCQl2YXIgbGFzdCA9IGFycmF5LnNsaWNlKDAsIGluZGV4KS5qb2luKHNwbGl0KXx8IiIsIG5hbWUgPSBhcnJheS5zbGljZSgwLCBpbmRleCsxKS5qb2luKHNwbGl0KQoJCQkJaWYgKCF2YWx1ZSB8fCBub2RlW25hbWVdKSB7IHJldHVybiB9CgoJCQkJbm9kZVtsYXN0XSA9IG5vZGVbbGFzdF18fHtuYW1lOiBsYXN0LCBtZXRhOiB7fSwgbGlzdDogW119CgkJCQlub2RlW2xhc3RdLmxpc3QucHVzaChub2RlW25hbWVdID0gewoJCQkJCW5hbWU6IHZhbHVlKyhpbmRleD09YXJyYXkubGVuZ3RoLTE/ICIiOiBzcGxpdCksCgkJCQkJbWV0YTogaXRlbSwgbGlzdDogW10sIGxhc3Q6IG5vZGVbbGFzdF0sCgkJCQkJZmlsZTogaXRlbVtmaWVsZF18fGl0ZW0uZmlsZSwgaGlkZTogdHJ1ZSwKCQkJCX0pCgkJCX0pCgkJfSkKCQlyZXR1cm4gbm9kZQoJfSwKCV9oZWlnaHQ6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgZGVlcCkgeyBpZiAoIXRyZWUpIHsgcmV0dXJuIDAgfQoJCXRyZWUuZGVlcCA9IGRlZXB8fDAKCQlpZiAodHJlZS5saXN0Lmxlbmd0aCA9PSAwIHx8IHRyZWUuaGlkZSkgeyByZXR1cm4gdHJlZS5oZWlnaHQgPSAxIH0KCgkJdmFyIGhlaWdodCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWhlaWdodCArPSBjYW4ub25pbXBvcnQuX2hlaWdodChjYW4sIGl0ZW0sIChkZWVwfHwwKSsxKQoJCX0pCgkJcmV0dXJuIHRyZWUuaGVpZ2h0ID0gaGVpZ2h0Cgl9LAoJX3dpZHRoOiBmdW5jdGlvbihjYW4sIHRyZWUsIGRlZXApIHsgaWYgKCF0cmVlKSB7IHJldHVybiAwIH0KCQl0cmVlLmRlZXAgPSBkZWVwfHwwCgkJaWYgKHRyZWUubGlzdC5sZW5ndGggPT0gMCB8fCB0cmVlLmhpZGUpIHsKCQkJdHJlZS52aWV3ID0gY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBodG1sLlRFWFQsIHBvaW50OiBbe3g6IDAsIHk6IDB9XSwgc3R5bGU6IHtpbm5lcjogdHJlZS5uYW1lfX0pCgkJCXJldHVybiB0cmVlLndpZHRoID0gdHJlZS52aWV3LlZhbCgidGV4dExlbmd0aCIpK2Nhbi5tYXJnaW4KCQl9CgoJCXZhciB3aWR0aCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCXdpZHRoICs9IGNhbi5vbmltcG9ydC5fd2lkdGgoY2FuLCBpdGVtLCAoZGVlcHx8MCkrMSkKCQl9KQoJCXJldHVybiB0cmVlLndpZHRoID0gd2lkdGgKCX0sCglfY29sb3I6IGZ1bmN0aW9uKGNhbiwgdHJlZSkgewoJCXJldHVybiB0cmVlLm1ldGEmJnRyZWUubWV0YS5jb2xvciB8fCAodHJlZS5saXN0ID09IDA/IGNsaS5QVVJQTEU6IGNsaS5ZRUxMT1cpCgl9LAoJbGF5b3V0OiBmdW5jdGlvbihjYW4pIHsKCQl2YXIgcCA9IGNhbi5BY3Rpb24oaWNlLlZJRVcsIGNhbi5zdXAudmlld3x8Y2FuLkFjdGlvbihpY2UuVklFVykpCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiksIGNhbi5vbmltcG9ydC5fc2hvdyhjYW4sIGNhbi5yZXF1ZXN0KCkpCgkJY2FuLnN2Zy5WYWwoaHRtbC5GT05UX1NJWkUsIGNhbi5BY3Rpb24oInNpemUiKSkKCQljYW4ub25hY3Rpb25bcF0oZXZlbnQsIGNhbiwgcCkKCX0sCn0sIFsiIl0pClZvbGNhbm9zKGNoYXQuT05BQ1RJT04sIHtoZWxwOiAi55So5oi35pON5L2cIiwgbGlzdDogWwoJCVtpY2UuVklFVywgIuaoquWQkSIsICLnurXlkJEiXSwgWyJzaXplIiwgMjQsIDMyLCA0OF0sIFsibWFyZ2luIiwgMzAsIDUwLCAxMDBdLAoJXSwKCXNpemU6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLnNpemUgPSBwYXJzZUludChjYW4uQWN0aW9uKCJzaXplIil8fDMwKSwgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCgltYXJnaW46IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm1hcmdpbiA9IHBhcnNlSW50KGNhbi5BY3Rpb24oIm1hcmdpbiIpfHwzMCksIGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJIuaoquWQkSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmltcG9ydC5faGVpZ2h0KGNhbiwgY2FuLl90cmVlWyIiXSkKCQljYW4uc3VwLnZpZXcgPSBidXR0b24sIGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5zdmcpCgoJCWNhbi5zdmcuVmFsKGh0bWwuSEVJR0hULCBjYW4uX3RyZWVbIiJdLmhlaWdodCpjYW4ubWFyZ2luKzIqY2FuLm1hcmdpbikKCQljYW4ud2lkdGggPSAwLCBjYW4ub25hY3Rpb24uX2RyYXdfaG9yaXpvbnRhbChjYW4sIGNhbi5fdHJlZVsiIl0sIGNhbi5tYXJnaW4sIGNhbi5tYXJnaW4pCgkJY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgY2FuLndpZHRoK2Nhbi5tYXJnaW4pCgl9LAoJIue6teWQkSI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4sIGJ1dHRvbikgewoJCWNhbi5vbmltcG9ydC5fd2lkdGgoY2FuLCBjYW4uX3RyZWVbIiJdKQoJCWNhbi5zdXAudmlldyA9IGJ1dHRvbiwgY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgY2FuLnN2ZykKCgkJY2FuLnN2Zy5WYWwoaHRtbC5XSURUSCwgY2FuLl90cmVlWyIiXS53aWR0aCsyKmNhbi5tYXJnaW4pCgkJY2FuLmhlaWdodCA9IDAsIGNhbi5vbmFjdGlvbi5fZHJhd192ZXJ0aWNhbChjYW4sIGNhbi5fdHJlZVsiIl0sIGNhbi5tYXJnaW4sIGNhbi5tYXJnaW4rY2FuLm1hcmdpbikKCQljYW4uc3ZnLlZhbChodG1sLkhFSUdIVCwgY2FuLmhlaWdodCtjYW4ubWFyZ2luKQoJfSwKCV9kcmF3OiBmdW5jdGlvbihjYW4sIHRyZWUsIHgsIHksIHN0eWxlKSB7IHZhciBjb2xvciA9IGNhbi5vbmltcG9ydC5fY29sb3IoY2FuLCB0cmVlKQoJCXRyZWUudmlldyA9IGNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogaHRtbC5URVhULCBwb2ludDogW3t4OiB4LCB5OiB5fV0sIHN0eWxlOiBjYW4uYmFzZS5Db3B5KGtpdC5EaWN0KAoJCQlodG1sLlNUUk9LRSwgY29sb3IsIGh0bWwuRklMTCwgY29sb3IsIGh0bWwuVEVYVF9BTkNIT1IsICJzdGFydCIsICJpbm5lciIsIHRyZWUubmFtZXx8dHJlZS5maWxlLAoJCSksIHN0eWxlKSwgfSksIGNhbi5jb3JlLkl0ZW1DQihjYW4ub25kZXRhaWwsIHRyZWUudmlldywgY2FuLCB0cmVlKQoJfSwKCV9kcmF3X3ZlcnRpY2FsOiBmdW5jdGlvbihjYW4sIHRyZWUsIHgsIHkpIHsgdHJlZS54ID0geCwgdHJlZS55ID0geQoJCWNhbi5vbmFjdGlvbi5fZHJhdyhjYW4sIHRyZWUsIHgrdHJlZS53aWR0aC8yLCB5LCBraXQuRGljdChodG1sLlRFWFRfQU5DSE9SLCAibWlkZGxlIikpCgoJCXRyZWUuaGVpZ2h0ID0gY2FuLm1hcmdpbgoJCWlmICh5K3RyZWUuaGVpZ2h0ID4gY2FuLmhlaWdodCkgeyBjYW4uaGVpZ2h0ID0geSt0cmVlLmhlaWdodCB9CgkJaWYgKHRyZWUuaGlkZSkgeyByZXR1cm4gfQoKCQl2YXIgb2Zmc2V0ID0gMDsgY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuUEFUSDJWLCBwb2ludDogWwoJCQkJe3g6IHgrdHJlZS53aWR0aC8yLCB5OiB5K3RyZWUuaGVpZ2h0LWNhbi5tYXJnaW4vMn0sCgkJCQl7eDogeCtvZmZzZXQraXRlbS53aWR0aC8yLCB5OiB5K3RyZWUuaGVpZ2h0K2Nhbi5tYXJnaW4vMn0sCgkJCV0sIHN0eWxlOiB7c3Ryb2tlOiBjbGkuQ1lBTn19KQoKCQkJY2FuLm9uYWN0aW9uLl9kcmF3X3ZlcnRpY2FsKGNhbiwgaXRlbSwgeCtvZmZzZXQsIHkrdHJlZS5oZWlnaHQrY2FuLm1hcmdpbikKCQkJb2Zmc2V0ICs9IGl0ZW0ud2lkdGgKCQl9KQoJfSwKCV9kcmF3X2hvcml6b250YWw6IGZ1bmN0aW9uKGNhbiwgdHJlZSwgeCwgeSkgeyB0cmVlLnggPSB4LCB0cmVlLnkgPSB5CgkJY2FuLm9uYWN0aW9uLl9kcmF3KGNhbiwgdHJlZSwgeCwgeSt0cmVlLmhlaWdodCpjYW4ubWFyZ2luLzIsIGtpdC5EaWN0KGh0bWwuVEVYVF9BTkNIT1IsICJzdGFydCIpKQoKCQl0cmVlLndpZHRoID0gdHJlZS52aWV3LlZhbCgidGV4dExlbmd0aCIpfHwodHJlZS5uYW1lfHwiIikubGVuZ3RoKjEwCgkJaWYgKHgrdHJlZS53aWR0aCA+IGNhbi53aWR0aCkgeyBjYW4ud2lkdGggPSB4K3RyZWUud2lkdGggfQoJCWlmICh0cmVlLmhpZGUpIHsgcmV0dXJuIH0KCgkJdmFyIG9mZnNldCA9IDA7IGNhbi5jb3JlLkxpc3QodHJlZS5saXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlBBVEgySCwgcG9pbnQ6IFsKCQkJCXt4OiB4K3RyZWUud2lkdGgrY2FuLm1hcmdpbi84LCB5OiB5K3RyZWUuaGVpZ2h0KmNhbi5tYXJnaW4vMn0sCgkJCQl7eDogeCt0cmVlLndpZHRoK2Nhbi5tYXJnaW4qMi0yKmNhbi5tYXJnaW4vOCwgeTogeStvZmZzZXQraXRlbS5oZWlnaHQqY2FuLm1hcmdpbi8yfQoJCQldLCBzdHlsZToge3N0cm9rZTogY2xpLkNZQU59fSkKCgkJCWNhbi5vbmFjdGlvbi5fZHJhd19ob3Jpem9udGFsKGNhbiwgaXRlbSwgeCt0cmVlLndpZHRoKzIqY2FuLm1hcmdpbiwgeStvZmZzZXQpCgkJCW9mZnNldCArPSBpdGVtLmhlaWdodCpjYW4ubWFyZ2luCgkJfSkKCX0sCn0pClZvbGNhbm9zKGNoYXQuT05ERVRBSUwsIHtoZWxwOiAi55So5oi35Lqk5LqSIiwKCW9ubW91c2VlbnRlcjogZnVuY3Rpb24oZXZlbnQsIGNhbiwgdHJlZSkgeyB2YXIgeSA9IHRyZWUueSt0cmVlLmhlaWdodCpjYW4ubWFyZ2luLzIKCQljYW4ucGFnZS5SZW1vdmUoY2FuLCBjYW4ucG9zKSwgY2FuLnBvcyA9IGNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCXt4OiB0cmVlLngtY2FuLm1hcmdpbi80LCB5OiB5LWNhbi5tYXJnaW4vMn0sIHt4OiB0cmVlLngrdHJlZS53aWR0aCtjYW4ubWFyZ2luLzgsIHk6IHkrY2FuLm1hcmdpbi8yfSwKCQldLCBzdHlsZToge3N0cm9rZTogY2xpLlJFRCwgZmlsbDogaHRtbC5OT05FfX0pLCBjYW4ub25rZXltYXAucHJldmVudChldmVudCkKCX0sCglvbmNsaWNrOiBmdW5jdGlvbihldmVudCwgY2FuLCB0cmVlKSB7CgkJaWYgKHRyZWUubGlzdC5sZW5ndGggPiAwIHx8IHRyZWUudGFncyB8fCB0cmVlLm5hbWUuZW5kc1dpdGgoY2FuLkNvbmYobGV4LlNQTElUKSkpIHsKCQkJcmV0dXJuIHRyZWUuaGlkZSA9ICF0cmVlLmhpZGUsIGNhbi5vbmFjdGlvbltjYW4uQWN0aW9uKGljZS5WSUVXKV0oZXZlbnQsIGNhbikKCQl9CgoJCWZvciAodmFyIG5vZGUgPSB0cmVlOyBub2RlOyBub2RlID0gbm9kZS5sYXN0KSB7IGNhbi5yZXF1ZXN0KGV2ZW50LCBub2RlLm1ldGEpIH0KCgkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgY2FuLk9wdGlvbigpKSwgY2FuLmJhc2UuT2JqKGNhbi5Db25mKGxleC5QUkVGSVgpLCBbXSkuY29uY2F0KFtjYW4uT3B0aW9uKCJyZXBvcyIpfHwiIiwgdHJlZS5maWxlfHwiIiwgdHJlZS5uYW1lXSksIGZ1bmN0aW9uKG1zZykgewoJCQlpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIGNhbi5vbmRldGFpbC5wbHVnaW4oY2FuLCAid2ViLmNvZGUuaW5uZXIiLCBbY2FuLmRpcl9yb290LCB0cmVlLmZpbGUsIHRyZWUubGluZV0sIGNvZGUuSU5ORVIpIH0KCQkJaWYgKG1zZy5BcHBlbmQobWRiLklOREVYKSkgeyBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsgY2FuLm9uZGV0YWlsLnBsdWdpbihjYW4sIHZhbHVlLmluZGV4LCBbXSkgfSk7IHJldHVybiB9CgoJCQlpZiAobXNnLk9wdGlvbihsZXguU1BMSVQpKSB7CgkJCQl0cmVlLmxpc3QgPSBjYW4ub25pbXBvcnQuX3RyZWUoY2FuLCBtc2cuVGFibGUoKSwgbXNnLk9wdGlvbihtZGIuRklFTEQpfHxtc2cuYXBwZW5kWzBdLCBtc2cuT3B0aW9uKGxleC5TUExJVCkpWyIiXS5saXN0fHxbXQoJCQkJY2FuLmNvcmUuTGlzdCh0cmVlLmxpc3QsIGZ1bmN0aW9uKGl0ZW0pIHsgaXRlbS5sYXN0ID0gdHJlZSB9KQoJCQl9IGVsc2UgewoJCQkJbXNnLlRhYmxlKGZ1bmN0aW9uKGl0ZW0pIHsgdHJlZS5saXN0LnB1c2goewoJCQkJCXR5cGU6ICJ0YWdzIiwgbmFtZTogaXRlbS5uYW1lfHxpdGVtLmZpbGV8fGl0ZW1bbXNnLmFwcGVuZFswXV0sCgkJCQkJbWV0YTogaXRlbSwgbGlzdDogW10sIGxhc3Q6IHRyZWUsCgkJCQkJZmlsZTogaXRlbS5maWxlLCBsaW5lOiBpdGVtLmxpbmUsIGhpZGU6IHRydWUsCgkJCQl9KSB9KQoJCQl9CgkJCXRyZWUudGFncyA9IHRydWUsIHRyZWUuaGlkZSA9ICF0cmVlLmhpZGUsIGNhbi5vbmFjdGlvbltjYW4uQWN0aW9uKGljZS5WSUVXKV0oZXZlbnQsIGNhbikKCQl9LCB0cnVlKQoJfSwKCXBsdWdpbjogZnVuY3Rpb24oY2FuLCBpbmRleCwgYXJncywgcHJlZml4KSB7CgkJY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIHt0eXBlOiBjaGF0LkZMT0FULCBpbmRleDogaW5kZXgsIGFyZ3M6IGFyZ3MsIG1vZGU6ICJmbG9hdCJ9LCBmdW5jdGlvbihzdWIpIHsKCQkJc3ViLnJ1biA9IGZ1bmN0aW9uKGV2ZW50LCBjbWRzLCBjYikgeyBjYW4ucnVuQWN0aW9uKGNhbi5yZXF1ZXN0KGV2ZW50KSwgcHJlZml4fHxbaWNlLlJVTiwgaW5kZXhdLCBjbWRzLCBjYikgfQoJCQlzdWIuTW9kZSgiZmxvYXQiKSwgY2FuLmdldEFjdGlvblNpemUoZnVuY3Rpb24obGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0KSB7IGxlZnQgPSBsZWZ0fHwwCgkJCQl2YXIgdG9wID0gY2FuLk1vZGUoKSA9PSB1bmRlZmluZWQ/IDEyMDogMDsgaWYgKGNhbi51c2VyLmlzTW9iaWxlKSB7IHRvcCA9IGNhbi51c2VyLmlzTGFuZHNjYXBlKCk/IDA6IDQ4IH0KCQkJCXN1Yi5Db25mSGVpZ2h0KGhlaWdodC10b3AtMipodG1sLkFDVElPTl9IRUlHSFQtKGNhbi51c2VyLmlzTW9iaWxlJiYhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKT8gMipodG1sLkFDVElPTl9IRUlHSFQ6IDApKSwgc3ViLkNvbmZXaWR0aCh3aWR0aCkKCQkJCWNhbi5vbm1vdGlvbi5tb3ZlKGNhbiwgc3ViLl90YXJnZXQsIHtwb3NpdGlvbjogaHRtbC5GSVhFRCwgbGVmdDogbGVmdCwgdG9wOiB0b3B9KQoJCQl9KQoJCX0pCgl9LAp9KQo=",
        "usr/volcanos/plugin/story/trend.css": "ZmllbGRzZXQuZHJhdy50cmVuZCBkaXYub3V0cHV0IGRpdi50b2dnbGUgeyBkaXNwbGF5Om5vbmU7IH0KCg==",
        "usr/volcanos/plugin/story/trend.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25tb3Rpb24uY2xlYXIoY2FuKSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihtc2cpOyBpZiAobXNnLkxlbmd0aCgpID09IDApIHsgcmV0dXJuIH0KCQlpZiAobXNnLk9wdGlvbigiYnJhbmNoIikpIHsgcmV0dXJuIGNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZykgfQoKCQljYW4uZGF0YSA9IG1zZy5UYWJsZSgpLCBjYW4ub25pbXBvcnQuX3N1bShjYW4pCgkJY2FuLkFjdGlvbihodG1sLkhFSUdIVCwgbXNnLk9wdGlvbihodG1sLkhFSUdIVCl8fGljZS5BVVRPKQoJCWNhbi5BY3Rpb24oaHRtbC5TUEVFRCwgcGFyc2VJbnQobXNnLk9wdGlvbihodG1sLlNQRUVEKXx8IjEwMCIpKQoKCQljYW4ucGFnZS5DbGFzc0xpc3QuYWRkKGNhbiwgY2FuLl9maWVsZHMsICJkcmF3IikKCQljYW4ucmVxdWlyZShbIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3LmpzIiwgIi9wbHVnaW4vbG9jYWwvd2lraS9kcmF3L3BhdGguanMiXSwgZnVuY3Rpb24oKSB7CgkJCWNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKQoJCX0pCgl9LAoJX3N1bTogZnVuY3Rpb24oY2FuKSB7CgkJdmFyIGJlZ2luID0gIiIsIGNvdW50ID0gMCwgcmVzdCA9IDAsIGFkZCA9IDAsIGRlbCA9IDAsIG1heCA9IDAKCQljYW4ubWF4ID0gMCwgY2FuLm1pbiA9IDAsIGNhbi5saXN0ID0gY2FuLmNvcmUuTGlzdChjYW4uZGF0YSwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7CgkJCXZhciBsaW5lID0gewoJCQkJZGF0ZTogdmFsdWVbY2FuLl9tc2cuYXBwZW5kWzBdXSwKCQkJCXRleHQ6IHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFs0XV0sCgkJCQlhZGQ6IHBhcnNlSW50KHZhbHVlW2Nhbi5fbXNnLmFwcGVuZFsxXV0pLAoJCQkJZGVsOiBwYXJzZUludCh2YWx1ZVtjYW4uX21zZy5hcHBlbmRbMl1dKSwKCQkJfQoKCQkJbGluZS5iZWdpbiA9IHJlc3QKCQkJbGluZS5tYXggPSByZXN0ICsgbGluZS5hZGQKCQkJbGluZS5taW4gPSByZXN0IC0gbGluZS5kZWwKCQkJbGluZS5jbG9zZSA9IHJlc3QgKyBsaW5lLmFkZCAtIGxpbmUuZGVsCgoJCQliZWdpbiA9IGJlZ2luIHx8IHZhbHVlLmRhdGUsIGNvdW50KysKCQkJcmVzdCA9IGxpbmUuY2xvc2UsIGFkZCArPSBsaW5lLmFkZCwgZGVsICs9IGxpbmUuZGVsCgoJCQlpZiAobGluZS5tYXggLSBsaW5lLm1pbiA+IG1heCkgeyBtYXggPSBsaW5lLm1heCAtIGxpbmUubWluIH0KCQkJaWYgKGxpbmUubWF4ID4gY2FuLm1heCkgeyBjYW4ubWF4ID0gbGluZS5tYXggfQoJCQlpZiAobGluZS5taW4gPCBjYW4ubWluKSB7IGNhbi5taW4gPSBsaW5lLm1pbiB9CgkJCXJldHVybiBsaW5lCgkJfSkKCQljYW4uU3RhdHVzKHsiZnJvbSI6IGJlZ2luLCAiY29tbWl0IjogY291bnQsICJ0b3RhbCI6IGFkZCtkZWwsICJtYXgiOiBtYXh9KQoJfSwKCV9sYXlvdXQ6IGZ1bmN0aW9uKGNhbikgewoJCXZhciBoZWlnaHQgPSBjYW4ub25leHBvcnQuaGVpZ2h0KGNhbikKCQl2YXIgd2lkdGggPSBwYXJzZUludChjYW4uQ29uZldpZHRoKCkpLCBzcGFjZSA9IHBhcnNlSW50KGNhbi5BY3Rpb24oInNwYWNlIil8fCIxMCIpCgkJdmFyIHN0ZXAgPSBwYXJzZUludCgod2lkdGgtMipzcGFjZSkgLyBjYW4ubGlzdC5sZW5ndGgpCgoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KSwgY2FuLm9uaW1wb3J0Ll9zaG93KGNhbiwgY2FuLl9tc2cpCgkJY2FuLnN2Zy5WYWwoaHRtbC5IRUlHSFQsIGhlaWdodCksIGNhbi5zdmcuVmFsKGh0bWwuV0lEVEgsIHdpZHRoKQoJCXJldHVybiB7aGVpZ2h0OiBoZWlnaHQsIHdpZHRoOiB3aWR0aCwgc3BhY2U6IHNwYWNlLCBzdGVwOiBzdGVwfQoJfSwKCWxheW91dDogZnVuY3Rpb24oY2FuKSB7CgkJY2FuLm9uYWN0aW9uW2Nhbi5BY3Rpb24oaWNlLlZJRVcpXSh7fSwgY2FuKQoJfSwKfSwgWyIiXSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLnu4Tku7boj5zljZUiLCBsaXN0OiBbCgkJW2ljZS5WSUVXLCAi6LaL5Yq/5Zu+IiwgIuafseeKtuWbviIsICLmlbDmja7mupAiXSwKCQlbaHRtbC5IRUlHSFQsIDEwMCwgMjAwLCA0MDAsIDYwMCwgODAwLCBpY2UuQVVUT10sCgkJWyJzcGFjZSIsIDEwLCAyMCwgNTAsIDEwMF0sCgkJW2h0bWwuU1BFRUQsIDEwLCAyMCwgNTAsIDEwMF0sCgldLAoJIui2i+WKv+WbviI6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgdmFyIGFyZ3MgPSBjYW4ub25pbXBvcnQuX2xheW91dChjYW4pCgkJZnVuY3Rpb24gc2NhbGUoeSkgeyByZXR1cm4gKHkgLSBjYW4ubWluKS8oY2FuLm1heCAtIGNhbi5taW4pKihhcmdzLmhlaWdodC0yKmFyZ3Muc3BhY2UpIH0KCQlmdW5jdGlvbiBvcmRlcihpbmRleCwgeCwgeSkgeyByZXR1cm4ge3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3gsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoeSl9IH0KCgkJdmFyIGJsYWNrID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLkJMQUNLLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLkJMQUNLLCBodG1sLkZJTEwsIGNsaS5CTEFDSykpCgkJdmFyIHdoaXRlID0gY2FuLm9uaW1wb3J0Lmdyb3VwKGNhbiwgY2xpLldISVRFLCBraXQuRGljdChodG1sLlNUUk9LRSwgY2xpLldISVRFLCBodG1sLkZJTEwsIGNsaS5XSElURSkpCgoJCWNhbi5jb3JlLk5leHQoY2FuLmxpc3QsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGNhbi5TdGF0dXMobGluZSkKCQkJY2FuLm9uaW1wb3J0LmRyYXcoe30sIGNhbiwge3NoYXBlOiBzdmcuTElORSwgcG9pbnQ6IFsKCQkJCW9yZGVyKGluZGV4LCBhcmdzLnN0ZXAvMiwgbGluZS5taW4pLCBvcmRlcihpbmRleCwgYXJncy5zdGVwLzIsIGxpbmUubWF4KSwKCQkJXX0sIGxpbmUuYmVnaW4gPCBsaW5lLmNsb3NlPyB3aGl0ZTogYmxhY2spCgoJCQljYW4ub25pbXBvcnQuZHJhdyh7fSwgY2FuLCB7c2hhcGU6IHN2Zy5SRUNULCBwb2ludDogWwoJCQkJb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80LCBsaW5lLmNsb3NlKSwgb3JkZXIoaW5kZXgsIGFyZ3Muc3RlcC80KjMsIGxpbmUuYmVnaW4pLAoJCQldLCBfaW5pdDogZnVuY3Rpb24odmlldykgewoJCQkJY2FuLmNvcmUuSXRlbUNCKGNhbi5vbmRldGFpbCwgZnVuY3Rpb24oa2V5LCBjYikgeyB2aWV3W2tleV0gPSBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgY2FuLCBsaW5lKSB9IH0pCgkJCX19LCBsaW5lLmJlZ2luIDwgbGluZS5jbG9zZT8gd2hpdGU6IGJsYWNrKQoKCQkJY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJfSkKCX0sCgki5p+x54q25Zu+IjogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgYXJncyA9IGNhbi5vbmltcG9ydC5fbGF5b3V0KGNhbikKCQl2YXIgbWF4ID0ge30sIG1pbiA9IHt9OyBjYW4uY29yZS5MaXN0KGNhbi5fbXNnLmFwcGVuZCwgZnVuY3Rpb24oa2V5LCB3aGljaCkgewoJCQljYW4uY29yZS5MaXN0KGNhbi5kYXRhLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHsKCQkJCXZhciB2ID0gcGFyc2VJbnQodmFsdWVba2V5XSl8fDA7IGlmIChpbmRleCA9PSAwKSB7CgkJCQkJcmV0dXJuIG1heFtrZXldID0gdiwgbWluW2tleV0gPSB2CgkJCQl9CgkJCQlpZiAodiA+IG1heFtrZXldKSB7IG1heFtrZXldID0gdiB9CgkJCQlpZiAodiA8IG1pbltrZXldKSB7IG1pbltrZXldID0gdiB9CgkJCX0pCgkJfSkKCgkJZnVuY3Rpb24gc2NhbGUoa2V5LCB5KSB7IHJldHVybiAoeSAtIG1pbltrZXldKS8obWF4W2tleV0gLSBtaW5ba2V5XSkqKGFyZ3MuaGVpZ2h0LTIqYXJncy5zcGFjZSkgfQoKCQl2YXIgd2lkdGggPSBhcmdzLnN0ZXAvY2FuLl9tc2cuYXBwZW5kLmxlbmd0aCwgd2hpY2ggPSAwCgkJY2FuLmNvcmUuTGlzdChjYW4uX21zZy5hcHBlbmQsIGZ1bmN0aW9uKGtleSwgd2hpY2gpIHsgaWYgKG1heFtrZXldID09IG1pbltrZXldKSB7IHJldHVybiB9CgkJCWNhbi5jb3JlLk5leHQoY2FuLmRhdGEsIGZ1bmN0aW9uKGxpbmUsIG5leHQsIGluZGV4KSB7IGlmIChwYXJzZUludChsaW5lW2tleV0pID09IDApIHsgcmV0dXJuIH0KCQkJCWNhbi5vbmltcG9ydC5kcmF3KHt9LCBjYW4sIHtzaGFwZTogc3ZnLlJFQ1QsIHBvaW50OiBbCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKndoaWNoKzIsIHk6IGFyZ3MuaGVpZ2h0LWFyZ3Muc3BhY2Utc2NhbGUoa2V5LCBwYXJzZUludChsaW5lW2tleV0pKX0sCgkJCQkJe3g6IGFyZ3Muc3BhY2UrYXJncy5zdGVwKmluZGV4K3dpZHRoKih3aGljaCsxKSsyLCB5OiBhcmdzLmhlaWdodC1hcmdzLnNwYWNlfSwKCQkJCV0sIHN0eWxlOiBraXQuRGljdChodG1sLlNUUk9LRV9XSURUSCwgMSwgaHRtbC5TVFJPS0UsIGNsaS5XSElURSwgaHRtbC5GSUxMLCBjbGkuV0hJVEUsIHN2Zy5SWCwgMCwgc3ZnLlJZLCAwKSwgX2luaXQ6IGZ1bmN0aW9uKHZpZXcpIHsKCQkJCQljYW4uY29yZS5JdGVtQ0IoY2FuLm9uZGV0YWlsLCBmdW5jdGlvbihrZXksIGNiKSB7IHZpZXdba2V5XSA9IGZ1bmN0aW9uKGV2ZW50KSB7IGNiKGV2ZW50LCBjYW4sIGxpbmUpIH0gfSkKCQkJCX19KSwgY2FuLmNvcmUuVGltZXIocGFyc2VJbnQoY2FuLkFjdGlvbihodG1sLlNQRUVEKSksIG5leHQpCgkJCX0pLCB3aGljaCsrCgkJfSkKCX0sCgki5pWw5o2u5rqQIjogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIGNhbi5fb3V0cHV0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIGNhbi5fbXNnLCBudWxsLCBjYW4uX291dHB1dCkKCX0sCgoJaGVpZ2h0OiBmdW5jdGlvbihldmVudCwgY2FuKSB7IGNhbi5vbmltcG9ydC5sYXlvdXQoY2FuKSB9LAoJc3BhY2U6IGZ1bmN0aW9uKGV2ZW50LCBjYW4pIHsgY2FuLm9uaW1wb3J0LmxheW91dChjYW4pIH0sCglzcGVlZDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyBjYW4ub25pbXBvcnQubGF5b3V0KGNhbikgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkRFVEFJTCwge2hlbHA6ICLnlKjmiLfkuqTkupIiLAoJb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCwgY2FuLCBsaW5lKSB7IGNhbi5TdGF0dXMobGluZSkgfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkVYUE9SVCwge2hlbHA6ICLlr7zlh7rmlbDmja4iLCBsaXN0OiBbImZyb20iLCAiY29tbWl0IiwgInRvdGFsIiwgIm1heCIsICJkYXRlIiwgInRleHQiLCAiYWRkIiwgImRlbCJdLAoJaGVpZ2h0OiBmdW5jdGlvbihjYW4pIHsgdmFyIGhlaWdodCA9IGNhbi5BY3Rpb24oaHRtbC5IRUlHSFQpCgkJaWYgKGhlaWdodCA9PSBpY2UuQVVUTykgeyBoZWlnaHQgPSBjYW4uQ29uZkhlaWdodCgpCgkJCS8vIGNhbi5pc0Z1bGxNb2RlKCkgfHwgKGhlaWdodCA9IGNhbi5iYXNlLk1heChjYW4uQ29uZkhlaWdodCgpLCA2MDApKQoJCX0KCQlpZiAoaGVpZ2h0IDwgMjAwKSB7IGhlaWdodCA9IDIwMCB9CgkJcmV0dXJuIHBhcnNlSW50KGhlaWdodHx8Y2FuLl9yb290Ll9oZWlnaHQvMikKCX0sCn0pCg==",
        "usr/volcanos/plugin/story/video.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4ub25pbXBvcnQuc2VsZWN0KGNhbiwgbXNnKQoJCWNhbi5vbm1vdGlvbi5jbGVhcihjYW4pLCBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKG1zZykKCQljYW4ub25hcHBlbmQudGFibGUoY2FuLCBtc2cpLCBjYW4ub25hcHBlbmQuYm9hcmQoY2FuLCBtc2cpCgkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5vbmFjdGlvbi5wbGF5KGV2ZW50LCBjYW4pIH0pCgkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgY2FuLl9vdXRwdXQsICJ0ZCBhIiwgZnVuY3Rpb24oYSkgewoJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBhLCB7dGFyZ2V0OiAiIn0pCgkJfSkKCX0sCglzZWxlY3Q6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7CgkJbXNnLkNsZWFyKCksIGNhbi5wYWdlLlNlbGVjdChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBjYW4uT3B0aW9uKCJ0YWdzIiksIGZ1bmN0aW9uKGEsIGluZGV4KSB7CgkJCW1zZy5QdXNoKG1kYi5JTkRFWCwgaW5kZXgpCgkJCW1zZy5QdXNoKG1kYi5OQU1FLCBhLmlubmVyVGV4dCkKCQkJbXNnLlB1c2gobWRiLkxJTkssIGEuaHJlZikKCQkJYS5ocmVmID09IGxvY2F0aW9uLmhyZWYgJiYgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7CgkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCBjYW4uX291dHB1dCwgaHRtbC5UUiwgZnVuY3Rpb24odHIsIGkpIHsKCQkJCQlpLTEgPT0gaW5kZXggJiYgY2FuLnBhZ2UuQ2xhc3NMaXN0LmFkZChjYW4sIHRyLCAic2VsZWN0IikKCQkJCX0pCgkJCX0pCgkJfSkKCQltc2cuT3B0aW9uKGljZS5NU0dfU1RBVFVTLCBKU09OLnN0cmluZ2lmeShbCgkJCXtuYW1lOiAidGltZSIsIHZhbHVlOiBjYW4uYmFzZS5UaW1lKG51bGwsICIleS0lbS0lZCAlSDolTTolUyIpfSwKCQkJe25hbWU6ICJjb3VudCIsIHZhbHVlOiBtc2cuTGVuZ3RoKCl9LAoJCV0pKQoJfSwKfSkKVm9sY2Fub3MoY2hhdC5PTkFDVElPTiwge2hlbHA6ICLmjqfku7bkuqTkupIiLAoJbmV4dDogZnVuY3Rpb24oZXZlbnQsIGNhbikgeyB2YXIgbXNnID0gY2FuLl9tc2cKCQltc2cuVGFibGUoZnVuY3Rpb24obGluZSwgaW5kZXgpIHsKCQkJaWYgKGxpbmUubGluayA9PSBsb2NhdGlvbi5ocmVmKSB7CgkJCQlsb2NhdGlvbi5ocmVmID0gbXNnLmxpbmtbaW5kZXgrMV0KCQkJfQoJCX0pCgl9LAoJcGxheTogZnVuY3Rpb24oZXZlbnQsIGNhbikgewoJCWNhbi5wYWdlLlNlbGVjdEFsbChjYW4sIGNhbi5fcm9vdC5fdGFyZ2V0LCBodG1sLlZJREVPLCBmdW5jdGlvbih2aWRlbykgewoJCQl2aWRlby5wbGF5YmFja1JhdGUgPSBwYXJzZUZsb2F0KGNhbi5PcHRpb24oInJhdGUiKSkKCQkJdmlkZW8uY3VycmVudFRpbWUgPSBwYXJzZUludChjYW4uT3B0aW9uKCJza2lwIikpCgkJCXZpZGVvLm9udGltZXVwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQlpZiAodmlkZW8uY3VycmVudFRpbWUgPiBwYXJzZUludChjYW4uT3B0aW9uKCJuZXh0IikpKSB7CgkJCQkJY2FuLm9uYWN0aW9uLm5leHQoZXZlbnQsIGNhbikKCQkJCX0KCQkJfSwgdmlkZW8ucGxheSgpLCB2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpCgkJfSkKCX0sCn0pCg==",
        "usr/volcanos/plugin/table.js": "Vm9sY2Fub3MoY2hhdC5PTklNUE9SVCwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2csIGNiLCB0YXJnZXQpIHsKCQljYW4udXNlci5pc01vYmlsZSAmJiAhY2FuLnVzZXIuaXNMYW5kc2NhcGUoKSAmJiBjYW4ub25tb3Rpb24uaGlkZGVuKGNhbiwgY2FuLl9hY3Rpb24pCgkJdmFyIGNicyA9IGNhbi5vbmltcG9ydFtjYW4uQ29uZihjdHguU1RZTEUpXTsgaWYgKGNhbi5iYXNlLmlzRnVuYyhjYnMpKSB7CgkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB0YXJnZXQsIGNhbi5fYXJnc1tjdHguU1RZTEVdKQoJCQljYW4uY29yZS5DYWxsRnVuYyhjYnMsIHsKCQkJCWNhbjogY2FuLCBtc2c6IG1zZywgdGFyZ2V0OiB0YXJnZXQsCgkJCQlsaXN0OiBtc2cuVGFibGUoKSwKCQkJfSkKCQkJcmV0dXJuIGNicyhjYW4sIG1zZywgdGFyZ2V0KQoJCX0KCgkJY2FuLm9ubW90aW9uLmNsZWFyKGNhbiwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC50YWJsZShjYW4sIG1zZywgbnVsbCwgdGFyZ2V0KQoJCWNhbi5vbmFwcGVuZC5ib2FyZChjYW4sIG1zZywgdGFyZ2V0KQoJCWNhbi5vbm1vdGlvbi5zdG9yeS5hdXRvKGNhbiwgdGFyZ2V0KQoJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IobXNnKQoJfSwKCgl6b25lOiBmdW5jdGlvbihjYW4sIGxpc3QsIHRhcmdldCkgeyB2YXIgY29sb3IgPSBbIiJdCgkJcmV0dXJuIGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbih6b25lLCBpbmRleCkgeyBjYW4uYmFzZS5pc1N0cmluZyh6b25lKSAmJiAoem9uZSA9IHtuYW1lOiB6b25lfSk7IHJldHVybiB6b25lICYmIHt2aWV3OiBodG1sLlpPTkUrIiAiK3pvbmUubmFtZSwgbGlzdDogWwoJCQl7dmlldzogaHRtbC5OQU1FLCBpbm5lcjogY2FuLnVzZXIudHJhbnMoY2FuLCB6b25lLm5hbWUpLCBzdHlsZToge2JhY2tncm91bmQ6IGNvbG9yW2luZGV4JWNvbG9yLmxlbmd0aF19LCBvbmNsaWNrOiBmdW5jdGlvbigpIHsKCQkJCWNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB6b25lLl9hY3Rpb24pLCBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgem9uZS5fdGFyZ2V0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQl6b25lLl9tZW51PyBjYW4udXNlci5jYXJ0ZVJpZ2h0KGV2ZW50LCBjYW4sIHpvbmUuX21lbnUubWV0YSwgem9uZS5fbWVudS5saXN0fHxjYW4uY29yZS5JdGVtKHpvbmUuX21lbnUubWV0YSksIGZ1bmN0aW9uKGV2ZW50LCBidXR0b24sIG1ldGEpIHsKCQkJCQkobWV0YVtidXR0b25dfHxjYW4ub25hY3Rpb25bYnV0dG9uXSkoZXZlbnQsIGNhbiwgYnV0dG9uKQoJCQkJfSk6IGNhbi51c2VyLmNhcnRlUmlnaHQoZXZlbnQsIGNhbiwgewoJCQkJCSLmipjlj6AiOiBmdW5jdGlvbigpIHsgY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9MSVNULCBmdW5jdGlvbihpdGVtKSB7IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCBpdGVtLCBmYWxzZSkgfSkgfSwKCQkJCQki5bGV5byAIjogZnVuY3Rpb24oKSB7IGNhbi5wYWdlLlNlbGVjdChjYW4sIHpvbmUuX3RhcmdldCwgaHRtbC5ESVZfTElTVCwgZnVuY3Rpb24oaXRlbSkgeyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgaXRlbSwgdHJ1ZSkgfSkgfSwKCQkJCQki5Yi35pawIjogZnVuY3Rpb24oKSB7IGNhbi5vbm1vdGlvbi5jbGVhcihjYW4sIHpvbmUuX3RhcmdldCksIHpvbmUuX2luaXQoem9uZS5fdGFyZ2V0KSB9LAoJCQkJfSwgWyLmipjlj6AiLCAi5bGV5byAIiwgIuWIt+aWsCJdKQoJCQl9fSwKCQkJe3ZpZXc6IGh0bWwuQUNUSU9OLCBfaW5pdDogZnVuY3Rpb24odGFyZ2V0KSB7IHpvbmUuX2FjdGlvbiA9IHRhcmdldAoJCQkJY2FuLm9uYXBwZW5kLl9hY3Rpb24oY2FuLCBbe2lucHV0OiBodG1sLlRFWFQsIHBsYWNlaG9sZGVyOiAic2VhcmNoIiwgb25rZXl1cDogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCQljYW4ucGFnZS5TZWxlY3QoY2FuLCB6b25lLl90YXJnZXQsIGh0bWwuRElWX0xJU1QsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIHRydWUpIH0pCgkJCQkJY2FuLnBhZ2UuU2VsZWN0KGNhbiwgem9uZS5fdGFyZ2V0LCBodG1sLkRJVl9JVEVNLCBmdW5jdGlvbihpdGVtKSB7CgkJCQkJCWNhbi5wYWdlLlNlbGVjdChjYW4sIGl0ZW0sICJkaXYubmFtZSIsIGZ1bmN0aW9uKG5hbWUpIHsgY2FuLm9ubW90aW9uLnRvZ2dsZShjYW4sIGl0ZW0sIG5hbWUuaW5uZXJUZXh0LmluZGV4T2YoZXZlbnQudGFyZ2V0LnZhbHVlKSA+IC0xKSB9KQoJCQkJCX0pCgkJCQl9LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJCWNhbi5vbm1vdGlvbi5mb2N1cyhjYW4sIGV2ZW50LnRhcmdldCkKCQkJCX0sIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgem9uZS5fc2VhcmNoID0gdGFyZ2V0CgkJCQkJY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGNhbi5wYWdlLnN0eWxlV2lkdGgoY2FuLCB0YXJnZXQsIHRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5vZmZzZXRXaWR0aC0zMikgfSkKCQkJCQkvLyBjYW4ub25hcHBlbmQuZmlndXJlKGNhbiwge25hbWU6IHpvbmUubmFtZX0sIHRhcmdldCkKCQkJCX19XSwgdGFyZ2V0LCB7fSkKCQkJfX0sCgkJCXt2aWV3OiBodG1sLkxJU1QsIF9pbml0OiBmdW5jdGlvbih0YXJnZXQpIHsgY2FuLnVpW3pvbmUubmFtZV0gPSB6b25lCgkJCQl6b25lLl90YXJnZXQgPSB0YXJnZXQsIHpvbmUucmVmcmVzaCA9IGZ1bmN0aW9uKCkgeyBjYW4ub25tb3Rpb24uY2xlYXIoY2FuLCB0YXJnZXQpLCB6b25lLl9pbml0KHRhcmdldCkgfQoJCQkJY2FuLmJhc2UuaXNGdW5jKHpvbmUuX2luaXQpICYmIHpvbmUuX2luaXQodGFyZ2V0LCB6b25lKQoJCQl9fQoJCV19IH0pKQoJfSwKCXRyZWU6IGZ1bmN0aW9uKGNhbiwgbGlzdCwgZmllbGQsIHNwbGl0LCBjYiwgdGFyZ2V0LCBub2RlKSB7CgkJbm9kZSA9IG5vZGV8fHsiIjogdGFyZ2V0fTsgY2FuLmNvcmUuTGlzdChsaXN0LCBmdW5jdGlvbihpdGVtKSB7CgkJCWl0ZW1bZmllbGRdICYmIGNhbi5jb3JlLkxpc3QoaXRlbVtmaWVsZF0uc3BsaXQoc3BsaXQpLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7IGlmICghdmFsdWUpIHsgcmV0dXJuIH0KCQkJCXZhciBsYXN0ID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgpLmpvaW4oc3BsaXQpLCBuYW1lID0gYXJyYXkuc2xpY2UoMCwgaW5kZXgrMSkuam9pbihzcGxpdCkKCQkJCWlmIChub2RlW25hbWVdKSB7IHJldHVybiB9CgkJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCBub2RlW2xhc3RdLCBbe3ZpZXc6ICJpdGVtIiwgbGlzdDogW3t2aWV3OiBbInN3aXRjaCIsICJkaXYiLCAoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiImIzg5NjM7IildfSwge3ZpZXc6IFsibmFtZSIsIGh0bWwuRElWLCB2YWx1ZSsoaW5kZXg9PWFycmF5Lmxlbmd0aC0xPyIiOiIiKV0sIF9pbml0OiBpdGVtLl9pbml0fV0sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJaW5kZXggPCBhcnJheS5sZW5ndGggLSAxPyBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgbm9kZVtuYW1lXSwgZnVuY3Rpb24oKSB7CgkJCQkJCWNhbi5wYWdlLkNsYXNzTGlzdC5hZGQoY2FuLCB1aVsic3dpdGNoIl0sICJvcGVuIikKCQkJCQl9LCBmdW5jdGlvbigpIHsKCQkJCQkJY2FuLnBhZ2UuQ2xhc3NMaXN0LmRlbChjYW4sIHVpWyJzd2l0Y2giXSwgIm9wZW4iKQoJCQkJCX0pOiBjYW4uYmFzZS5pc0Z1bmMoY2IpICYmIGNiKGV2ZW50LCBpdGVtKQoJCQkJCWlmIChub2RlW25hbWVdLmNoaWxkRWxlbWVudENvdW50ID09IDIpIHsgbm9kZVtuYW1lXS5maXJzdENoaWxkLmNsaWNrKCkgfQoJCQkJfX0sIHt2aWV3OiBodG1sLkxJU1QsIHN0eWxlOiB7ZGlzcGxheTogaHRtbC5OT05FfSwgX2luaXQ6IGZ1bmN0aW9uKGxpc3QpIHsgaXRlbS5leHBhbmQgJiYgY2FuLnBhZ2Uuc3R5bGUoY2FuLCBsaXN0LCBodG1sLkRJU1BMQVksIGh0bWwuQkxPQ0spIH19XSkKCQkJCW5vZGVbbmFtZV0gPSB1aS5saXN0CgkJCX0pCgkJfSk7IHJldHVybiBub2RlCgl9LAoJbGlzdDogZnVuY3Rpb24oY2FuLCByb290LCBjYiwgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8Y2FuLl9vdXRwdXQKCQljYW4uY29yZS5MaXN0KHJvb3QubGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQl2YXIgdWkgPSBjYW4ucGFnZS5BcHBlbmQoY2FuLCB0YXJnZXQsIFt7dmlldzogW2h0bWwuSVRFTSwgaHRtbC5ESVYsIGl0ZW0ubWV0YS5uYW1lXSwgb25jbGljazogZnVuY3Rpb24oZXZlbnQpIHsKCQkJCWNhbi5iYXNlLmlzRnVuYyhjYikgJiYgY2IoZXZlbnQsIGl0ZW0pIHx8IGNhbi5vbm1vdGlvbi50b2dnbGUoY2FuLCB1aS5saXN0KQoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIHRhcmdldCwgaHRtbC5ESVZfSVRFTSwgZXZlbnQudGFyZ2V0KQoJCQl9fSwge3ZpZXc6IGh0bWwuTElTVH1dKTsgY2FuLm9uaW1wb3J0Lmxpc3QoY2FuLCBpdGVtLCBjYiwgdWkubGlzdCkKCQl9KQoJfSwKCWl0ZW06IGZ1bmN0aW9uKGNhbiwgaXRlbSwgY2IsIGNicywgdGFyZ2V0KSB7IHRhcmdldCA9IHRhcmdldHx8KGNhbi51aSAmJiBjYW4udWkucHJvamVjdD8gY2FuLnVpLnByb2plY3Q6IGNhbi5fb3V0cHV0KQoJCXZhciB1aSA9IGNhbi5wYWdlLkFwcGVuZChjYW4sIHRhcmdldCwgW3t2aWV3OiBbaHRtbC5JVEVNLCBodG1sLkRJViwgaXRlbS5uaWNrfHxpdGVtLm5hbWVdLAoJCQlvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgeyBjYihldmVudCwgdWkuZmlyc3QsIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJCWNhbi5vbm1vdGlvbi5zZWxlY3QoY2FuLCB0YXJnZXQsIGNhbi5jb3JlLktleXMoaHRtbC5ESVYsIGh0bWwuSVRFTSksIHVpLmZpcnN0KQoJCQl9LCBvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi5iYXNlLmlzRnVuYyhjYnMpICYmIGNicyhldmVudCwgdWkuZmlyc3QpIH0sCgkJfV0pOyByZXR1cm4gdWkuZmlyc3QKCX0sCglpdGVtbGlzdDogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCB0YXJnZXQpIHsKCQlyZXR1cm4gdGFyZ2V0Ll9saXN0ID0gY2FuLnBhZ2UuaW5zZXJ0QmVmb3JlKGNhbiwgW3t2aWV3OiBodG1sLkxJU1QsIGxpc3Q6IGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24oaXRlbSkgewoJCQlyZXR1cm4ge3ZpZXc6IFtodG1sLklURU0sIGh0bWwuRElWLCBpdGVtLm5hbWVdLCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2IoZXZlbnQsIGl0ZW0sIGV2ZW50LnRhcmdldC5fbGlzdCAmJiBjYW4ub25tb3Rpb24udG9nZ2xlKGNhbiwgZXZlbnQudGFyZ2V0Ll9saXN0KSkKCQkJfSwgb25tb3VzZWVudGVyOiBmdW5jdGlvbihldmVudCkgeyBjYnMoZXZlbnQsIGl0ZW0pIH19CgkJfSkgfV0sIHRhcmdldC5uZXh0U2libGluZywgdGFyZ2V0LnBhcmVudE5vZGUpCgl9LAoJdGFiczogZnVuY3Rpb24oY2FuLCBsaXN0LCBjYiwgY2JzLCBhY3Rpb24sIGVhY2gpIHsgYWN0aW9uID0gYWN0aW9ufHxjYW4uX2FjdGlvbgoJCXJldHVybiBjYW4ucGFnZS5BcHBlbmQoY2FuLCBhY3Rpb24sIGNhbi5jb3JlLkxpc3QobGlzdCwgZnVuY3Rpb24odGFicykgewoJCQlyZXR1cm4ge3RleHQ6IFt0YWJzLm5hbWUsIGh0bWwuRElWLCBodG1sLlRBQlNdLCB0aXRsZTogdGFicy50ZXh0LCBvbmNsaWNrOiBmdW5jdGlvbihldmVudCkgewoJCQkJY2FuLm9ubW90aW9uLnNlbGVjdChjYW4sIGFjdGlvbiwgaHRtbC5ESVZfVEFCUywgZXZlbnQudGFyZ2V0KSwgY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihldmVudCwgdGFicykKCQkJfSwgX2luaXQ6IGZ1bmN0aW9uKGl0ZW0pIHsKCQkJCWZ1bmN0aW9uIGNsb3NlKGl0ZW0pIHsgdmFyIG5leHQgPSBpdGVtLm5leHRTaWJsaW5nfHxpdGVtLnByZXZpb3VzU2libGluZzsgbmV4dCAmJiBuZXh0LmNsaWNrKCkKCQkJCQlpZiAobmV4dCkgeyBjYW4uYmFzZS5pc0Z1bmMoY2JzKSAmJiBjYnMoaXRlbS5fbWV0YSksIGNhbi5wYWdlLlJlbW92ZShjYW4sIGl0ZW0pIH0KCQkJCX0KCQkJCXZhciBtZW51ID0gdGFicy5fbWVudXx8c2h5KHt9LCBbXSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgeyAobWV0YVtidXR0b25dKShldmVudCwgY2FuLCBidXR0b24pIH0pCgkJCQljYW4ucGFnZS5Nb2RpZnkoY2FuLCBpdGVtLCB7ZHJhZ2dhYmxlOiB0cnVlLCBfY2xvc2U6IGZ1bmN0aW9uKCkgeyBjbG9zZShpdGVtKSB9LCBfbWV0YTogdGFicywKCQkJCQlvbm1vdXNlZW50ZXI6IGZ1bmN0aW9uKGV2ZW50KSB7IGNhbi51c2VyLmNhcnRlKGV2ZW50LCBjYW4sIGNhbi5iYXNlLkNvcHkoa2l0LkRpY3QoCgkJCQkJCSJDbG9zZSIsIGZ1bmN0aW9uKGV2ZW50KSB7IGNsb3NlKGl0ZW0pIH0sCgkJCQkJCSJDbG9zZSBvdGhlcnMiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGZ1bmN0aW9uKF9pdGVtKSB7IF9pdGVtID09IGl0ZW0gfHwgY2xvc2UoX2l0ZW0pIH0pIH0sCgkJCQkJCSJDbG9zZSBhbGwiLCBmdW5jdGlvbihldmVudCkgeyBjYW4ucGFnZS5TZWxlY3QoY2FuLCBhY3Rpb24sIGh0bWwuRElWX1RBQlMsIGNsb3NlKSB9LAoJCQkJCSksIG1lbnUubWV0YSksIFsiQ2xvc2UiLCAiQ2xvc2Ugb3RoZXJzIiwgIkNsb3NlIGFsbCIsICIiXS5jb25jYXQobWVudS5saXN0KSwgZnVuY3Rpb24oZXZlbnQsIGJ1dHRvbiwgbWV0YSkgewoJCQkJCQltZW51KGV2ZW50LCBidXR0b24sIG1ldGEpCgkJCQkJfSkgfSwKCQkJCQlvbmRyYWdzdGFydDogZnVuY3Rpb24oZXZlbnQpIHsgYWN0aW9uLl9kcm9wID0gZnVuY3Rpb24oYmVmb3JlKSB7IGFjdGlvbi5pbnNlcnRCZWZvcmUoZXZlbnQudGFyZ2V0LCBiZWZvcmUpIH0gfSwKCQkJCQlvbmRyYWdvdmVyOiBmdW5jdGlvbihldmVudCkgeyBldmVudC5wcmV2ZW50RGVmYXVsdCgpLCBhY3Rpb24uX2Ryb3AoZXZlbnQudGFyZ2V0KSB9LAoJCQkJCW9uZHJvcDogZnVuY3Rpb24oZXZlbnQpIHsgZXZlbnQucHJldmVudERlZmF1bHQoKSwgYWN0aW9uLl9kcm9wKGV2ZW50LnRhcmdldCkgfSwKCQkJCX0pCgkJCQljYW4uYmFzZS5pc0Z1bmMoZWFjaCkgJiYgZWFjaChpdGVtKSwgY2FuLm9ubW90aW9uLmRlbGF5KGNhbiwgZnVuY3Rpb24oKSB7IGl0ZW0uY2xpY2soKSB9KQoJCQl9fQoJCX0pKS5maXJzdAoJfSwKCWNhcmQ6IGZ1bmN0aW9uKGNhbiwgbXNnLCB0YXJnZXQpIHsKCQljYW4ucGFnZS5BcHBlbmRzKGNhbiwgdGFyZ2V0LCBtc2cuVGFibGUoZnVuY3Rpb24odmFsdWUpIHsKCQkJcmV0dXJuIHt2aWV3OiBodG1sLklURU0rIiAiKyh2YWx1ZS5zdGF0dXN8fCIiKSwgbGlzdDogWwoJCQkJe3ZpZXc6IFt3aWtpLlRJVExFLCBodG1sLkRJViwgdmFsdWUubmFtZV19LAoJCQkJe3ZpZXc6IFt3aWtpLkNPTlRFTlQsIGh0bWwuRElWLCB2YWx1ZS50ZXh0XX0sCgkJCQl7dmlldzogaHRtbC5BQ1RJT04sIGlubmVyOiB2YWx1ZS5hY3Rpb24sIG9uY2xpY2s6IGZ1bmN0aW9uKGV2ZW50KSB7CgkJCQkJY2FuLnJ1bihjYW4ucmVxdWVzdChldmVudCwgdmFsdWUpLCBbY3R4LkFDVElPTiwgZXZlbnQudGFyZ2V0Lm5hbWVdKQoJCQkJfX0sCgkJCV19CgkJfSkpCgl9LAoJcGx1ZzogZnVuY3Rpb24oY2FuLCBtZXRhLCB0YXJnZXQsIGNiKSB7IGlmICghbWV0YSB8fCAhbWV0YS5pbmRleCkgeyByZXR1cm4gfQoJCW1ldGEudHlwZSA9ICJwbHVnIiwgY2FuLm9uYXBwZW5kLnBsdWdpbihjYW4sIG1ldGEsIGZ1bmN0aW9uKHN1YikgeyBzdWIuc3VwID0gY2FuCgkJCXN1Yi5ydW4gPSBmdW5jdGlvbihldmVudCwgY21kcywgY2IpIHsgY2FuLnJ1bkFjdGlvbkNvbW1hbmQoY2FuLnJlcXVlc3QoZXZlbnQsIGNhbi5PcHRpb24oKSksIG1ldGEuaW5kZXgsIGNtZHMsIGNiKSB9CgkJCXN1Yi5vbmFjdGlvbi5jbG9zZSA9IGZ1bmN0aW9uKCkgeyBjYW4udWkgJiYgdGFyZ2V0ID09IGNhbi51aS5wcm9maWxlPyBjYW4ub25tb3Rpb24uaGlkZGVuKHN1YiwgdGFyZ2V0KTogY2FuLm9ubW90aW9uLmhpZGRlbihzdWIsIHN1Yi5fdGFyZ2V0KSB9CgkJCWNhbi5wYWdlLnN0eWxlKGNhbiwgc3ViLl9vdXRwdXQsIGh0bWwuTUFYX0hFSUdIVCwgY2FuLkNvbmZIZWlnaHQoKS0yKmh0bWwuQUNUSU9OX0hFSUdIVCwgaHRtbC5NQVhfV0lEVEgsIGNhbi5Db25mV2lkdGgoKSkKCQkJY2FuLmJhc2UuaXNGdW5jKGNiKSAmJiBjYihzdWIpCgkJfSwgdGFyZ2V0KQoJfSwKfSkK",
        "usr/volcanos/publish/client/nodejs/proto.js": "dHJ5IHsgaWYgKHR5cGVvZihnbG9iYWwpID09IGxhbmcuT0JKRUNUKSB7IC8vIG5vZGVqcwoJVm9sY2Fub3MubWV0YS5fbG9hZCA9IGZ1bmN0aW9uKHVybCwgY2IpIHsgaWYgKCF1cmwpIHsgcmV0dXJuIH0KCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBpZiAoVm9sY2Fub3MubWV0YS5jYWNoZVt1cmxdKSB7IHJldHVybiBjYihWb2xjYW5vcy5tZXRhLmNhY2hlW3VybF0pIH0KCQkJc3dpdGNoICh1cmwuc3BsaXQoIj8iKVswXS5zcGxpdChpY2UuUFQpLnBvcCgpLnRvTG93ZXJDYXNlKCkpIHsKCQkJCWNhc2UgbmZzLkpTOgoJCQkJCXJlcXVpcmUocGF0aC5pc0Fic29sdXRlKHVybCk/IHVybDogcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICJ1c3Ivdm9sY2Fub3MiLCB1cmwpKQoJCQkJCWNiKFZvbGNhbm9zLm1ldGEuY2FjaGVbdXJsXSkKCQkJCQlicmVhawoJCQl9CgkJfSwgMTAwKQoJfQoKCVZvbGNhbm9zLm1ldGEuX2xvYWQoZ2xvYmFsLnBsdWdpbiwgZnVuY3Rpb24oY2FjaGUpIHsKCQlWb2xjYW5vcy5tZXRhLnZvbGNhbm8gPSAiLi9mcmFtZS5qcyIsIFZvbGNhbm9zKHtsaWJzOiBbCgkJCSIuL2xpYi9iYXNlLmpzIiwgIi4vbGliL2NvcmUuanMiLCAiLi9saWIvbWlzYy5qcyIsICIuL2xpYi9wYWdlLmpzIiwgLy8gIi4vbGliL3VzZXIuanMiLAoJCV0sIHBhbmVsczogW10sIHBsdWdpbjogW119LCBmdW5jdGlvbihjYW4pIHsgY2FuLmNvcmUuTGlzdChjYWNoZSwgZnVuY3Rpb24oaXRlbSkgeyBjYW5baXRlbS5fbmFtZV0gPSBpdGVtIH0pCgkJCVZvbGNhbm9zLm1ldGEuX2xvYWQoIi4vcHVibGlzaC9jbGllbnQvbm9kZWpzL3Byb3RvLmpzIiwgZnVuY3Rpb24oY2FjaGUpIHsKCQkJCWNhbi5jb3JlLkxpc3QoY2FjaGUsIGZ1bmN0aW9uKGl0ZW0pIHsgY2FuLmJhc2UuQ29weShjYW5baXRlbS5fbmFtZV18fHt9LCBpdGVtKSB9KQoJCQkJY2FuLm9uaW1wb3J0Ll9pbml0KGNhbiwgY2FuLnJlcXVlc3QoKSwgZnVuY3Rpb24obXNnKSB7IGNvbnNvbGUubG9nKGljZS5OTCkgfSwgbnVsbCkKCQkJfSkKCQl9KQoJfSkKfSB9IGNhdGNoIChlKSB7IGNvbnNvbGUubG9nKGUpIH0KCl9jYW5fbmFtZSA9ICIuL2ZyYW1lLmpzIgpWb2xjYW5vcygib25hcHBlbmQiLCB7aGVscDogIua4suafk+W8leaTjiIsCgl0YWJsZTogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQl2YXIgbWF4ID0ge307IG1zZy5UYWJsZShmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGFycmF5KSB7CgkJCWZvciAodmFyIGsgaW4gdmFsdWUpIHsgaWYgKHZhbHVlW2tdLmxlbmd0aCA+IChtYXhba118fDApKSB7CgkJCQltYXhba10gPSB2YWx1ZVtrXS5sZW5ndGgKCQkJfSB9CgkJfSkKCgkJdmFyIGxpc3QgPSBbXTsgbXNnLlRhYmxlKGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgYXJyYXkpIHsgdmFyIGxpbmUgPSBbXQoJCQlpZiAoaW5kZXggPT0gMCkgewoJCQkJZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cuYXBwZW5kLmxlbmd0aDsgaSsrKSB7IGxpbmUucHVzaChtc2cuYXBwZW5kW2ldKQoJCQkJCWZvciAodmFyIGogPSAwOyBqIDw9IG1heFttc2cuYXBwZW5kW2ldXS1tc2cuYXBwZW5kW2ldLmxlbmd0aDsgaisrKSB7CgkJCQkJCWxpbmUucHVzaChpY2UuU1ApCgkJCQkJfQoJCQkJCWxpbmUucHVzaChpY2UuU1ApCgkJCQl9CgkJCQlsaXN0LnB1c2gobGluZS5qb2luKCIiKSkKCQkJfQoJCQlsaW5lID0gW107IGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmFwcGVuZC5sZW5ndGg7IGkrKykgeyB2YXIgayA9IG1zZy5hcHBlbmRbaV0KCQkJCWxpbmUucHVzaCh2YWx1ZVtrXSkKCQkJCWZvciAodmFyIGogPSAwOyBqIDw9IG1heFtrXS12YWx1ZVtrXTsgaisrKSB7CgkJCQkJbGluZS5wdXNoKGljZS5TUCkKCQkJCX0KCQkJCWxpbmUucHVzaChpY2UuU1ApCgkJCX0KCQkJbGlzdC5wdXNoKGxpbmUuam9pbigiIikpCgkJfSkKCQljb25zb2xlLmxvZyhsaXN0LmpvaW4oaWNlLk5MKSkKCX0sCglib2FyZDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCQljb25zb2xlLmxvZyhtc2cuUmVzdWx0KCkpCgl9LAp9KQoK",

        "usr/intshell/LICENSE": "TUlUIExpY2Vuc2UKCkNvcHlyaWdodCAoYykgMjAyMCDnoIHnpZ4KClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwp0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwpmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsCmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgpJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUKU09GVFdBUkUuCg==",
        "usr/intshell/README.md": "IyBpbnRzaGVsbApJTlRTSEVMTCBhbGlhcyBmb3IgaW4gdGhlIHNoZWxsLCBhIHBsdWdpbiBtYW5hZ2VyIHN5c3RlbQoKIyMgQWJvcnQKCklOVFNIRUxMIGFsbG93cyB5b3UgdG8uLi4KCi0ga2VlcCB0cmFjayBvZiBhbmQgY29uZmlndXJlIHlvdXIgcGx1Z2lucyByaWdodCBpbiB0aGUgLmlzaC9wbHVnZWQvCi0gaW5zdGFsbCBjb25maWd1cmVkIHBsdWdpbnMgKGEuay5hLiBzY3JpcHRzL2J1bmRsZSkKLSB1cGRhdGUgY29uZmlndXJlZCBwbHVnaW5zCi0gc2VhcmNoIGJ5IG5hbWUgYWxsIGF2YWlsYWJsZSBzY3JpcHRzCi0gY2xlYW4gdW51c2VkIHBsdWdpbnMgdXAKCklOVFNIRUxMIGF1dG9tYXRpY2FsbHkuLi4KCi0gY2xvbmUgdGhlIHJlcG9zIGlmIHRoZSBwbHVnaW5zIGRvbid0IGV4aXN0cwotIGxvYWQgdGhlIHNjcmlwdCBpZiB0aGUgcGx1Z2lucyBkb24ndCBzb3VyY2UKLSBtYW5hZ2VzIHRoZSBydW50aW1lIHBhdGggb2YgeW91ciBpbnN0YWxsZWQgc2NyaXB0cwotIHJlZ2VuZXJhdGVzIGhlbHAgdGFncyBhZnRlciBpbnN0YWxsaW5nIGFuZCB1cGRhdGluZwoKIyMgUXVpY2sgU3RhcnQKIyMjIDEuIERvd25sb2FkIElOVFNIRUxMCgpgYGBzaApnaXQgY2xvbmUgaHR0cHM6Ly9zaHlsaW51eC5jb20veC9pbnRzaGVsbC5naXQgfi8uaXNoCmBgYAoKIyMjIDIuIENvbmZpZ3VyZSBQbHVnaW5zOgpQdXQgdGhpcyBhdCB0aGUgYm90dG9tIG9mIHlvdXIgLmJhc2hyYyB0byB1c2UgSU5UU0hFTEwKYGBgc2gKaWYgWyAtZiB+Ly5pc2gvcGx1Zy5zaCBdICYmIHNvdXJjZSB+Ly5pc2gvcGx1Zy5zaDsgdGhlbgogICAgcmVxdWlyZSBjb25mLnNoCiAgICByZXF1aXJlIG1pc3Muc2gKICAgIyAuLi4gYWRkIG90aGVyIHBsdWdpbnMKZmkKCmBgYAoKIyMjIDMuIFVzZSBQbHVnaW5zOgoqKnVzZSBieSBtYW51YWwgbG9hZCoqCmBgYHNoCiQgcmVxdWlyZSBzaHlsaW51eC5jb20veC9pbnRzaGVsbCBzeXMvY2xpL2RhdGUuc2gKYGBgCgphZnRlciBsb2FkIGRhdGUuc2gsIHlvdSBjYWxsIGFsbCB0aGUgZnVuY3Rpb24gZGlyZWN0bHkKYGBgc2gKJCBpc2hfc3lzX2RhdGUKMjAyMi0wNy0wMSAxNTo1MDozMApgYGAK",
        "usr/intshell/app/app.sh": "IyEvYmluL3NoCgo=",
        "usr/intshell/app/cat.sh": "IyEvYmluL2Jhc2gKCmNhdCAkMQo=",
        "usr/intshell/conf.sh": "IyEvYmluL3NoCgpyZXF1aXJlIHN5cy9zeXMuc2gKcmVxdWlyZSBkZXYvZGV2LnNoCnJlcXVpcmUgYXBwL2FwcC5zaAoK",
        "usr/intshell/dev/dev.sh": "IyEvYmluL3NoCgpyZXF1aXJlIGRldi9naXQvZ2l0LnNoCnJlcXVpcmUgZGV2L3ZpbS92aW0uc2gKcmVxdWlyZSBkZXYvdG11eC90bXV4LnNoCgo=",
        "usr/intshell/dev/git/git.sh": "IyEvYmluL2Jhc2gKCmlzaF9kZXZfZ2l0X3ByZXBhcmUoKSB7CiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLnQgdGFnCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLnMgc3RhdHVzCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLmIgYnJhbmNoCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGFsaWFzLmwgImxvZyAtLW9uZWxpbmUgLS1kZWNvcmF0ZSIKICAgIGdpdCBjb25maWcgLS1nbG9iYWwgaW5pdC5kZWZhdWx0QnJhbmNoIG1hc3RlcgoKICAgIGdpdCBjb25maWcgLS1nbG9iYWwgY29sb3IudWkgYWx3YXlzCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGNvcmUucXVvdGVwYXRoIGZhbHNlCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIGNyZWRlbnRpYWwuaGVscGVyIHN0b3JlCiAgICBnaXQgY29uZmlnIC0tZ2xvYmFsIHB1c2guZGVmYXVsdCBzaW1wbGUKICAgIGdpdCBjb25maWcgLS1nbG9iYWwgcHVsbC5mZiBvbmx5Cn0KaXNoX2Rldl9naXRfY29uZmlnKCkgewogICAgaXNoX3N5c19kZXZfcmVxdWVzdAp9Cg==",
        "usr/intshell/dev/tmux/local.sh": "IyEvYmluL2Jhc2gKCnRtdXhfY21kPSJ0bXV4IC1TIGJpbi90bXV4LnNvY2tldCAtZiBldGMvdG11eC5jb25mIgpzZXNzaW9uPW1pc3MgJiYgWyAtcyAiJDEiIF0gJiYgc2Vzc2lvbj0kMSAmJiBzaGlmdAoKaWYgJHRtdXhfY21kIGhhcy1zZXNzaW9uIC10ICRzZXNzaW9uOyB0aGVuCiAgICAkdG11eF9jbWQgYXR0YWNoIC10ICRzZXNzaW9uCmVsc2UKICAgICR0bXV4X2NtZCBuZXctc2Vzc2lvbiAtcyAkc2Vzc2lvbgpmaQo=",
        "usr/intshell/dev/tmux/tmux-1.8.conf": "YmluZCBDLW0gY29tbWFuZC1wcm9tcHQgLXAgIm1vdmUgdG86IiAic3dhcC1wYW5lIC1zIC4gLXQgJSUiCmJpbmQgQy11IGNvbW1hbmQtcHJvbXB0IC1wICJtb3ZlIHRvOiIgIm1vdmUtcGFuZSAtdiAtdCAlJSIKYmluZCBDLXYgY29tbWFuZC1wcm9tcHQgLXAgIm1vdmUgdG86IiAibW92ZS1wYW5lIC1oIC10ICUlIgoKc2V0IC1nIG1vdXNlLXNlbGVjdC13aW5kb3cgb24Kc2V0IC1nIG1vdXNlLXNlbGVjdC1wYW5lIG9uCnNldCAtZyBtb3VzZS1yZXNpemUtcGFuZSBvbgpzZXQgLWcgbW91c2UtdXRmOCBvbgpzZXQgLWcgbW9kZS1tb3VzZSBvbgoK",
        "usr/intshell/dev/tmux/tmux.conf": "IyDphY3nva7nrqHnkIYge3t7CnNldCAtZyBwcmVmaXggQy1zCgpzZXQgLWcgYmFzZS1pbmRleCAxCnNldCAtZyBwYW5lLWJhc2UtaW5kZXggMQpzZXQgLWcgcmVudW1iZXItd2luZG93cyBvbgoKc2V0IC1nIGRpc3BsYXktdGltZSA1MDAwCnNldCAtZyBkaXNwbGF5LXBhbmVzLXRpbWUgNTAwMApzZXQgLWcgaGlzdG9yeS1saW1pdCAzMDAwCnNldCAtZyBtb2RlLWtleXMgdmkKCnNldCAtZ3cgb3RoZXItcGFuZS13aWR0aCA2MApzZXQgLWd3IG90aGVyLXBhbmUtaGVpZ2h0IDE1CgojIOagh+mimOagjwpzZXQgLWcgc2V0LXRpdGxlcyBvbgpzZXQgLWcgc2V0LXRpdGxlcy1zdHJpbmcgIiNoLyNTOiNXLiNQIgoKIyDnirbmgIHmoI8Kc2V0IC1nIHN0YXR1cy1iZyBibHVlCnNldCAtZyBzdGF0dXMtZmcgd2hpdGUKc2V0IC1nIGFsbG93LXJlbmFtZSBvZmYKc2V0IC1nIHN0YXR1cy1pbnRlcnZhbCAxCnNldCAtZyBzdGF0dXMtbGVmdC1sZW5ndGggNjAKc2V0IC1nIHN0YXR1cy1sZWZ0ICIjW2JnPXJlZCBmZz13aGl0ZV1cIFsjaC8jU11cICNbYmc9eWVsbG93IGZnPWJsYWNrXVwgW11cICNbYmc9cmVkXSIKc2V0IC1nIHN0YXR1cy1yaWdodCAiI1tiZz1yZWRdXCBbIyhkYXRlICcrJVktJW0tJWQgJUg6JU06JVMnKV1cICIKc2V0IC1nIHN0YXR1cy1yaWdodC1sZW5ndGggNjAKCnNldCAtZ3cgd2luZG93LXN0YXR1cy1mb3JtYXQgIiNbYmc9Ymx1ZSBmZz13aGl0ZV1cIFsjSTojVyNGXVwgIgpzZXQgLWd3IHdpbmRvdy1zdGF0dXMtY3VycmVudC1mb3JtYXQgIiNbYmc9cmVkIGZnPXdoaXRlXVwgWyNJOiNXI0ZdXCAiCiMgfX19CiMg5Lya6K+d566h55CGe3t7CmJpbmQgcSBjb25maXJtLWJlZm9yZSAiZGV0YWNoLWNsaWVudCIKIyB9fX0KIyDnqpflj6PnrqHnkIZ7e3sKYmluZCBiIGJyZWFrLXBhbmUKYmluZCBjIG5ldy13aW5kb3cKYmluZCBlIGNvbW1hbmQtcHJvbXB0IC1wICJ3aW5kb3cgbmV3IG5hbWU6IiAicmVuYW1lLXdpbmRvdyAnJSUnIgpiaW5kIEIgY29tbWFuZC1wcm9tcHQgLXAgInRhcmdldCB3aW5kb3c6IiAiam9pbi1wYW5lIC12IC10ICUlIgoKYmluZCBwIHByZXZpb3VzLXdpbmRvdwpiaW5kIG4gbmV4dC13aW5kb3cKYmluZCBvIGxhc3Qtd2luZG93CiMgfX19CiMg6Z2i5p2/566h55CGe3t7CmJpbmQgaSBkaXNwbGF5LXBhbmVzCmJpbmQgeCBjb25maXJtLWJlZm9yZSAtcCAia2lsbC1wYW5lICNQPyAoeS9uKSIga2lsbC1wYW5lCmJpbmQgeiByZXNpemUtcGFuZSAtWgpiaW5kIHYgc3BsaXQtd2luZG93IC1oCmJpbmQgdSBzcGxpdC13aW5kb3cKCmJpbmQgaCBzZWxlY3QtcGFuZSAtTApiaW5kIGwgc2VsZWN0LXBhbmUgLVIKYmluZCBqIHNlbGVjdC1wYW5lIC1ECmJpbmQgayBzZWxlY3QtcGFuZSAtVQoKYmluZCBDLWcgc2VsZWN0LWxheW91IHRpbGVkCmJpbmQgQy15IHNlbGVjdC1sYXlvdSBtYWluLXZlcnRpY2FsCmJpbmQgQy10IHNlbGVjdC1sYXlvdSBtYWluLWhvcml6b250YWwKYmluZCBDLWggY29tbWFuZC1wcm9tcHQgLXAgInNpemU6IiAicmVzaXplLXBhbmUgLUwgJSUiCmJpbmQgQy1sIGNvbW1hbmQtcHJvbXB0IC1wICJzaXplOiIgInJlc2l6ZS1wYW5lIC1SICUlIgpiaW5kIEMtaiBjb21tYW5kLXByb21wdCAtcCAic2l6ZToiICJyZXNpemUtcGFuZSAtRCAlJSIKYmluZCBDLWsgY29tbWFuZC1wcm9tcHQgLXAgInNpemU6IiAicmVzaXplLXBhbmUgLVUgJSUiCmJpbmQgQy1vIGNvbmZpcm0tYmVmb3JlIC1wICJraWxsIGFsbCBvdGhlciBwYW5lKHkvbik/IiAia2lsbC1wYW5lIC1hIgojIH19fQojIOe8k+WtmOeuoeeQhnt7ewpiaW5kIEMtcyBjb3B5LW1vZGUKCmJpbmQgciBjaG9vc2UtYnVmZmVyCmJpbmQgYSBwYXN0ZS1idWZmZXIKIyB9fX0KIyDlkb3ku6TnrqHnkIZ7e3sKYmluZCBDLWkgcnVuLXNoZWxsICJzb3VyY2UgYmluL3NlbmQtaW50c2hlbGwuc2giCmJpbmQgU3BhY2UgY29tbWFuZC1wcm9tcHQKIyB9fX0KCmlmLXNoZWxsICJbIC1lIH4vLnRtdXhfbG9jYWwgXSIgInNvdXJjZS1maWxlIH4vLnRtdXhfbG9jYWwiCgo=",
        "usr/intshell/dev/tmux/tmux.sh": "IyEvYmluL2Jhc2gKCmlzaF9kZXZfdG11eF9wcmVwYXJlKCkgewogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly50bXV4LmNvbmYgJFBXRC91c3IvaW50c2hlbGwvZGV2L3RtdXgvdG11eC5jb25mCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnRtdXhfbG9jYWwgJFBXRC91c3IvaW50c2hlbGwvZGV2L3RtdXgvdG11eF9sb2NhbC5jb25mCn0KaXNoX2Rldl90bXV4X3Nlc3Npb24oKSB7CiAgICBsb2NhbCB0bXV4X2NtZD0idG11eCAtUyBiaW4vdG11eC5zb2NrZXQgLWYgZXRjL3RtdXguY29uZiIKICAgIGxvY2FsIHNlc3Npb249bWlzcyAmJiBbIC1zICIkMSIgXSAmJiBzZXNzaW9uPSQxICYmIHNoaWZ0CgogICAgaWYgJHRtdXhfY21kIGhhcy1zZXNzaW9uIC10ICRzZXNzaW9uOyB0aGVuCiAgICAgICAgJHRtdXhfY21kIGF0dGFjaCAtdCAkc2Vzc2lvbgogICAgZWxzZQogICAgICAgICR0bXV4X2NtZCBuZXctc2Vzc2lvbiAtcyAkc2Vzc2lvbgogICAgZmkKfQo=",
        "usr/intshell/dev/tmux/tmux_local.conf": "YmluZCBjIG5ldy13aW5kb3cgLWMgIiN7cGFuZV9jdXJyZW50X3BhdGh9IgoKYmluZCB1IHNwbGl0LXdpbmRvdyAtYyAiI3twYW5lX2N1cnJlbnRfcGF0aH0iCmJpbmQgdiBzcGxpdC13aW5kb3cgLWggLWMgIiN7cGFuZV9jdXJyZW50X3BhdGh9IgpiaW5kIFUgc3BsaXQtd2luZG93IC1mIC1jICIje3BhbmVfY3VycmVudF9wYXRofSIKYmluZCBWIHNwbGl0LXdpbmRvdyAtZiAtaCAtYyAiI3twYW5lX2N1cnJlbnRfcGF0aH0iCgpiaW5kIEMtbSBkaXNwbGF5LXBhbmVzICJzd2FwLXBhbmUgLXQgJSUiCmJpbmQgQy11IGRpc3BsYXktcGFuZXMgIm1vdmUtcGFuZSAtdiAtdCAlJSIKYmluZCBDLXYgZGlzcGxheS1wYW5lcyAibW92ZS1wYW5lIC1oIC10ICUlIgoKc2V0IC1nIG1vdXNlIG9uCgo=",
        "usr/intshell/dev/vim/auto.vim": "IiDln7rnoYDlh73mlbB7e3sKIiDlj5jph4/lrprkuYkKZnVuYyEgU2h5RGVmaW5lKG5hbWUsIHZhbHVlKQoJaWYgIWV4aXN0cyhhOm5hbWUpIHwgZXhlYyAibGV0ICIgLiBhOm5hbWUgLiAiID0gXCIiIC4gYTp2YWx1ZSAuICJcIiIgfCBlbmRpZgplbmRmdW5jCgoiIOWQjuerr+mAmuS/oQpjYWxsIFNoeURlZmluZSgiZzpjdHhfc2lkIiwgIiIpCmNhbGwgU2h5RGVmaW5lKCJnOmN0eF91cmwiLCAobGVuKCRjdHhfb3BzKSA+IDE/ICRjdHhfb3BzOiAiaHR0cDovLzEyNy4wLjAuMTo5MDIwIikgLiAiL2NvZGUvdmltLyIpCmZ1bmMhIFNoeVNlbmQoY21kLCBhcmcpCiAgICBpZiBoYXNfa2V5KGE6YXJnLCAic3ViIikgJiYgYTphcmdbInN1YiJdICE9ICIiIHwgbGV0IHRlbXAgPSB0ZW1wbmFtZSgpCiAgICAgICAgY2FsbCB3cml0ZWZpbGUoc3BsaXQoYTphcmdbInN1YiJdLCAiXG4iKSwgdGVtcCwgImIiKSB8IGxldCBhOmFyZ1sic3ViIl0gPSAiQCIgLiB0ZW1wCiAgICBlbmRpZgoKICAgIGxldCBhOmFyZ1sic2lkIl0gPSBnOmN0eF9zaWQKICAgIGxldCBhOmFyZ1sicHdkIl0gPSBnZXRjd2QoKSB8IGxldCBhOmFyZ1siYnVmIl0gPSBidWZuYW1lKCIlIikgfCBsZXQgYTphcmdbInJvdyJdID0gbGluZSgiLiIpIHwgbGV0IGE6YXJnWyJjb2wiXSA9IGNvbCgiLiIpCiAgICBsZXQgYXJncyA9ICIiIHwgZm9yIGsgaW4gc29ydChrZXlzKGE6YXJnKSkgfCBsZXQgYXJncyA9IGFyZ3MgLiAiIC1GICciIC4gayAuICI9IiAuIGE6YXJnW2tdIC4gIicgIiB8IGVuZGZvcgogICAgcmV0dXJuIHN5c3RlbSgiY3VybCAtcyAiIC4gZzpjdHhfdXJsIC4gYTpjbWQgLiBhcmdzIC4gIiAyPi9kZXYvbnVsbCIpCmVuZGZ1bmMKCmZ1bmMhIFNoeUxvZ2luKCkKICAgIGxldCBnOmN0eF9zaWQgPSBTaHlTZW5kKCJzZXNzIiwgeyJ1c2VybmFtZSI6ICRVU0VSLCAiaG9zdG5hbWUiOiBob3N0bmFtZSgpLCAicGlkIjogZ2V0cGlkKCl9KQplbmRmdW5jCmZ1bmMhIFNoeUxvZ291dCgpCiAgICBjYWxsIFNoeVNlbmQoInNlc3MiLCB7ImNtZHMiOiAibG9nb3V0In0pIHwgbGV0IGc6Y3R4X3NpZCA9ICIiCmVuZGZ1bmMKIiB9fX0KIiDlip/og73lh73mlbB7e3sKIiDmlbDmja7lkIzmraUKZnVuYyEgU2h5U3luYyh0YXJnZXQpCiAgICBpZiBidWZuYW1lKCIlIikgPT0gIkNvbnRyb2xQIiB8IHJldHVybiB8IGVuZAoKICAgIGlmIGE6dGFyZ2V0ID09ICJyZWFkIiB8fCBhOnRhcmdldCA9PSAid3JpdGUiCiAgICAgICAgY2FsbCBTaHlTZW5kKCJzeW5jIiwgeyJjbWRzIjogYTp0YXJnZXQsICJhcmciOiBleHBhbmQoIjxhZmlsZT4iKX0pCiAgICBlbHNlaWYgYTp0YXJnZXQgPT0gImluc2VydCIKICAgICAgICBjYWxsIFNoeVNlbmQoInN5bmMiLCB7ImNtZHMiOiBhOnRhcmdldCwgInN1YiI6IGdldHJlZygiLiIpfSkKICAgIGVsc2VpZiBhOnRhcmdldCA9PSAiZXhlYyIKICAgICAgICBjYWxsIFNoeVNlbmQoInN5bmMiLCB7ImNtZHMiOiBhOnRhcmdldCwgImFyZyI6IGdldGNtZGxpbmUoKX0pCiAgICBlbHNlCiAgICAgICAgbGV0IGNtZCA9IHsiYnVmcyI6ICJidWZmZXJzIiwgInJlZ3MiOiAicmVnaXN0ZXJzIiwgIm1hcmtzIjogIm1hcmtzIiwgInRhZ3MiOiAidGFncyIsICJmaXhzIjogImNsaXN0In0KICAgICAgICBjYWxsIFNoeVNlbmQoInN5bmMiLCB7ImNtZHMiOiBhOnRhcmdldCwgInN1YiI6IGV4ZWN1dGUoY21kW2E6dGFyZ2V0XSl9KQogICAgZW5kaWYKZW5kZnVuYwoKIiDovpPlhaXooaXlhagKZnVuYyEgU2h5SW5wdXQoY29kZSkKICAgIHJldHVybiBzcGxpdChTaHlTZW5kKCJpbnB1dCIsIHsiY21kcyI6IGE6Y29kZSwgInByZSI6IGdldGxpbmUoIi4iKSwgInJvdyI6IGxpbmUoIi4iKSwgImNvbCI6IGNvbCgiLiIpfSksICJcbiIpCmVuZGZ1bmMKZnVuYyEgU2h5Q29tcGxldGUoZmlyc3RzdGFydCwgYmFzZSkKICAgIGlmIGE6Zmlyc3RzdGFydCB8IGxldCBsaW5lID0gZ2V0bGluZSgnLicpIHwgbGV0IHN0YXJ0ID0gY29sKCcuJykgLSAxCiAgICAgICAgIiDlkb3ku6TkvY3nva4KICAgICAgICBpZiBtYXRjaChsaW5lLCAnXHMqaWNlICcpID49IDAgfCByZXR1cm4gbWF0Y2gobGluZSwgImljZSAiKSB8IGVuZGlmCiAgICAgICAgIiDnrKblj7fkvY3nva4KICAgICAgICBpZiBsaW5lW3N0YXJ0LTFdICF+ICdcYScgfCByZXR1cm4gc3RhcnQgLSAxIHwgZW5kCiAgICAgICAgIiDljZXor43kvY3nva4KICAgICAgICB3aGlsZSBzdGFydCA+IDAgJiYgbGluZVtzdGFydCAtIDFdID1+ICdcYScgfCBsZXQgc3RhcnQgLT0gMSB8IGVuZHdoaWxlCiAgICAgICAgcmV0dXJuIHN0YXJ0CiAgICBlbmRpZgoKICAgICIg56ym5Y+36L2s5o2iCiAgICBpZiBhOmJhc2UgPT0gIigiIHwgcmV0dXJuIFsi77yIIiwgIigiXSB8IGVuZAogICAgaWYgYTpiYXNlID09ICIpIiB8IHJldHVybiBbIu+8iSIsICIpIl0gfCBlbmQKICAgIGlmIGE6YmFzZSA9PSAiOiIgfCByZXR1cm4gWyLvvJoiLCAiOiJdIHwgZW5kCiAgICBpZiBhOmJhc2UgPT0gIjsiIHwgcmV0dXJuIFsi77ybIiwgIjsiXSB8IGVuZAogICAgaWYgYTpiYXNlID09ICIsIiB8IHJldHVybiBbIu+8jCIsICIsIl0gfCBlbmQKICAgICIgaWYgYTpiYXNlID09ICIuIiB8IHJldHVybiBbIuOAgiIsICIuIl0gfCBlbmQKICAgIGlmIGE6YmFzZSA9PSAiXFwiIHwgcmV0dXJuIFsi44CBIiwgIlxcIl0gfCBlbmQKCiAgICAiIOWNleivjei9rOaNogogICAgbGV0IGxpc3QgPSBTaHlJbnB1dChhOmJhc2UpCiAgICBpZiBsZW4obGlzdCkgPiAwICAmJiBsaXN0WzBdID09ICJmdW5jIgogICAgICAgIGxldCByZXMgPSBbXSB8IGZvciBpIGluIHJhbmdlKDEsIGxlbihsaXN0KS0xLCAyKQogICAgICAgICAgICBpZiBsZW4obGlzdCkgPiBpKzEKICAgICAgICAgICAgICAgIGxldCByZXMgPSByZXMgKyBbeyJ3b3JkIjogbGlzdFtpXSwgImluZm8iOiBsaXN0W2krMV19XQogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBsZXQgcmVzID0gcmVzICsgW3sid29yZCI6IGxpc3RbaV19XQogICAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGZvcgogICAgICAgIHJldHVybiByZXMKICAgIGVuZGlmCiAgICByZXR1cm4gbGlzdAplbmRmdW5jCnNldCBjb21wbGV0ZWZ1bmM9U2h5Q29tcGxldGUKCiIg5pS26JeP5YiX6KGoCmNhbGwgU2h5RGVmaW5lKCJnOmZhdm9yX25hbWUiLCAiIikKZnVuYyEgU2h5RmF2b3IoKQogICAgbGV0IHpvbmVfbGlzdCA9IFsiYWRkIHpvbmUiXSArIHNwbGl0KFNoeVNlbmQoImZhdm9yIiwgeyJjbWRzIjogInNlbGVjdCJ9KSwgIlxuIikKICAgIGxldCB6b25lX3Nob3cgPSBbXSB8IGZvciBpIGluIHJhbmdlKDAsIGxlbih6b25lX2xpc3QpLTEpCiAgICAgICAgbGV0IHpvbmVfc2hvdyA9IHpvbmVfc2hvdyArIFtwcmludGYoIiVkLiAlcyIsIGksIHpvbmVfbGlzdFtpXSldCiAgICBlbmRmb3IKCiAgICBpZiBsZW4oem9uZV9saXN0KSA+IDEKICAgICAgICBsZXQgaW5kZXggPSBpbnB1dGxpc3Qoem9uZV9zaG93KSB8IGxldCB6b25lID0gem9uZV9saXN0W2luZGV4XQogICAgICAgIGlmIGluZGV4ID09IDAgfCBsZXQgem9uZSA9IGlucHV0KCJ6b25lOiAiLCAi5pWw5o2u57uT5p6EIikgfCBlbmQKICAgIGVsc2UKICAgICAgICBsZXQgem9uZSA9IGlucHV0KCJ6b25lOiAiLCAi5pWw5o2u57uT5p6EIikKICAgIGVuZGlmCgogICAgbGV0IGc6ZmF2b3JfbmFtZSA9IGlucHV0KCJuYW1lOiAiLCBnOmZhdm9yX25hbWUpCiAgICBjYWxsIFNoeVNlbmQoImZhdm9yIiwgeyJjbWRzIjogImluc2VydCIsICJ6b25lIjogem9uZSwgInR5cGUiOiAiZmlsZSIsICJuYW1lIjogZzpmYXZvcl9uYW1lLCAidGV4dCI6IGdldGxpbmUoIi4iKSwgImZpbGUiOiBidWZuYW1lKCIlIiksICJsaW5lIjogZ2V0cG9zKCIuIilbMV19KQplbmRmdW5jCmZ1bmMhIFNoeUZhdm9ycygpCiAgICBsZXQgem9uZV9saXN0ID0gc3BsaXQoU2h5U2VuZCgiZmF2b3IiLCB7ImNtZHMiOiAic2VsZWN0In0pLCAiXG4iKQogICAgbGV0IHpvbmVfc2hvdyA9IFtdIHwgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHpvbmVfbGlzdCktMSkKICAgICAgICBsZXQgem9uZV9zaG93ID0gem9uZV9zaG93ICsgW3ByaW50ZigiJWQuICVzIiwgaSwgem9uZV9saXN0W2ldKV0KICAgIGVuZGZvcgogICAgbGV0IGluZGV4ID0gaW5wdXRsaXN0KHpvbmVfc2hvdykgfCBsZXQgem9uZSA9IHpvbmVfbGlzdFtpbmRleF0KCiAgICBsZXQgcmVzID0gc3BsaXQoU2h5U2VuZCgiZmF2b3IiLCB7InpvbmUiOiB6b25lfSksICJcbiIpCiAgICBsZXQgcGFnZSA9ICIiIHwgbGV0IG5hbWUgPSAiIgogICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHJlcyktMSwgMikKICAgICAgICBpZiByZXNbaV0gIT0gcGFnZQogICAgICAgICAgICBpZiBuYW1lICE9ICIiIHwgbGV4cHIgbmFtZSB8IGxvcGVuIHwgbGV0IG5hbWUgPSAiIiB8IGVuZGlmCiAgICAgICAgICAgIGV4ZWN1dGUgZXhpc3RzKCI6VGFib29PcGVuIik/ICJUYWJvb09wZW4gIiAuIHJlc1tpXTogInRhYm5ldyIKICAgICAgICBlbmRpZgogICAgICAgIGxldCBwYWdlID0gcmVzW2ldIHwgbGV0IG5hbWUgLj0gcmVzW2krMV0gLiAiXG4iCiAgICBlbmRmb3IKICAgIGlmIG5hbWUgIT0gIiIgfCBsZXhwciBuYW1lIHwgbGV0IG5hbWUgPSAiIiB8IGVuZGlmCgogICAgbGV0IHZpZXcgPSBpbnB1dGxpc3QoWyLliJfooagiLCAi6buY6K6kIiwgIuWeguebtCIsICLmsLTlubMiXSkKICAgIGZvciBpIGluIHJhbmdlKDAsIGxlbihyZXMpLTEsIDIpIHwgaWYgaSA8IDUKICAgICAgICBpZiBsOnZpZXcgPT0gNCB8IHNwbGl0IHwgbG5leHQgfCBlbHNlaWYgbDp2aWV3ID09IDMgfCB2c3BsaXQgfCBsbmV4dCB8IGVuZGlmCiAgICBlbmRpZiB8IGVuZGZvcgogICAgYm90cmlnaHQgbG9wZW4gfCBpZiBsOnZpZXcgID09IDEgfCBvbmx5IHwgZW5kaWYKZW5kZnVuYwoKIiDmlofku7bmkJzntKIKY2FsbCBTaHlEZWZpbmUoImc6Z3JlcF9kaXIiLCAiLi8iKQpmdW5jISBTaHlHcmVwKHdvcmQpCiAgICBsZXQgZzpncmVwX2RpciA9IGlucHV0KCJkaXI6ICIsIGc6Z3JlcF9kaXIsICJmaWxlIikKICAgIHNpbGVudCBleGVjdXRlICJncmVwIC0tZXhjbHVkZS1kaXI9Jy5naXQnICAtLWV4Y2x1ZGU9Jyouc3dvJyAgLS1leGNsdWRlPScqLnN3cCcgLS1leGNsdWRlPScqLnRhZ3MnIC1ybiAnXFw8IiAuIGlucHV0KCJ3b3JkOiAiLCBhOndvcmQpIC4gIlxcPicgIiAuIGc6Z3JlcF9kaXIKICAgIGNvcGVuCmVuZGZ1bmMKZnVuYyEgU2h5VGFncyhwYXR0ZXJuLCBmbGFncywgaW5mbykKICAgIGxldCBsaW5lID0gZ2V0bGluZSgiLiIpCiAgICBsZXQgZW5kID0gY29sKCIuIikgfCB3aGlsZSBlbmQgPiAwICYmIGxpbmVbZW5kXSA9fiAnXHcnIHwgbGV0IGVuZCAtPSAxIHwgZW5kd2hpbGUKICAgIGxldCBiZWdpbiA9IGVuZCAtIDEgfCB3aGlsZSBiZWdpbiA+IDAgJiYgbGluZVtiZWdpbl0gPX4gJ1x3JyB8IGxldCBiZWdpbiAtPSAxIHwgZW5kd2hpbGUKCiAgICBsZXQgdGFnc19saXN0ID0gc3BsaXQoU2h5U2VuZCgidGFncyIsIHsibW9kdWxlIjogbGluZVtiZWdpbisxOmVuZC0xXSwgInByZSI6IGdldGxpbmUoIi4iKSwgInBhdHRlcm4iOiBhOnBhdHRlcm59KSwgIlxuIikKICAgIGxldCBsaXN0ID0gW10gfCBpZiBsZW4odGFnc19saXN0KSA9PSAwIHwgcmV0dXJuIGxpc3QgfCBlbmRpZgogICAgZm9yIGkgaW4gcmFuZ2UoMCwgbGVuKHRhZ3NfbGlzdCktMSwgMykKICAgICAgICBsZXQgbGlzdCA9IGxpc3QgKyBbIHsgIm5hbWUiOiB0YWdzX2xpc3RbaV0sICJmaWxlbmFtZSI6IHRhZ3NfbGlzdFtpKzFdLCAiY21kIjogdGFnc19saXN0W2krMl0gfSBdCiAgICBlbmRmb3IKICAgIHJldHVybiBsaXN0CmVuZGZ1bmMKIiB9fX0KIiDkuovku7blm57osIN7e3sKY2FsbCBTaHlMb2dpbigpIHwgYXV0b2NtZCEgVmltTGVhdmVQcmUgKiBjYWxsIFNoeUxvZ291dCgpCiIgYXV0b2NtZCBCdWZOZXdGaWxlLEJ1ZlJlYWRQb3N0ICouanMgc2V0IHRhZ2Z1bmM9U2h5VGFncwoKIiBhdXRvY21kISBCdWZSZWFkUG9zdCAqIGNhbGwgU2h5U3luYygicmVhZCIpCiIgYXV0b2NtZCEgQnVmV3JpdGVQcmUgKiBjYWxsIFNoeVN5bmMoIndyaXRlIikKIiBhdXRvY21kISBJbnNlcnRMZWF2ZSAqIGNhbGwgU2h5U3luYygiaW5zZXJ0IikKIiBhdXRvY21kISBDbWRsaW5lTGVhdmUgKiBjYWxsIFNoeVN5bmMoImV4ZWMiKQoifX19CiIg5oyJ6ZSu5pig5bCEe3t7Cm5ub3JlbWFwIDxDLUc+PEMtRz4gOmNhbGwgU2h5R3JlcChleHBhbmQoIjxjd29yZD4iKSk8Q1I+Cm5ub3JlbWFwIDxDLUc+PEMtRj4gOmNhbGwgU2h5RmF2b3IoKTxDUj4Kbm5vcmVtYXAgPEMtRz5mIDpjYWxsIFNoeUZhdm9ycygpPENSPgppbm9yZW1hcCA8Qy1LPiA8Qy1YPjxDLVU+CiJ9fX0KCg==",
        "usr/intshell/dev/vim/css.vim": "aGlnaGxpZ2h0IGNzc0tleSAgICBjdGVybWZnPXllbGxvdwoKc3ludGF4IG1hdGNoIGlzaEtleSAicGFnZSIKc3ludGF4IG1hdGNoIGlzaEtleSAidmlldyIK",
        "usr/intshell/dev/vim/go.vim": "c3ludGF4IG1hdGNoIENvbW1lbnQgIiMuKiQiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPE5hbWU6IFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPEhlbHA6IFwiW15cIl0qXCIiCgpoaWdobGlnaHQga2l0VHlwZSAgICBjdGVybWZnPWxpZ2h0Z3JlZW4Kc3ludGF4IG1hdGNoIGtpdFR5cGUgIlw8QW55XD4iCnN5bnRheCBtYXRjaCBraXRUeXBlICJcPE1hcFw+IgpzeW50YXggbWF0Y2gga2l0VHlwZSAiXDxNYXBzXD4iCnN5bnRheCBtYXRjaCBraXRUeXBlICJcPExpc3RcPiIKc3ludGF4IG1hdGNoIGtpdFR5cGUgIlw8SGFuZGxlclw+IgpzeW50YXggbWF0Y2gga2l0VHlwZSAiXDxDb21tYW5kc1w+IgpzeW50YXggbWF0Y2gga2l0VHlwZSAiXDxBY3Rpb25zXD4iCgpoaWdobGlnaHQga2l0Q29uc3QgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIGtpdENvbnN0ICJcPGtpdFwuW2EtejAtOUEtWl8uXSoiCgpoaWdobGlnaHQgbXNnQ29uc3QgICAgY3Rlcm1mZz1jeWFuCnN5bnRheCBtYXRjaCBtc2dDb25zdCAiXDxpY2VcLlthLXowLTlBLVpfLl0qIgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8bXNnXC5bYS16MC05QS1aXy5dKiIKc3ludGF4IG1hdGNoIG1zZ0NvbnN0ICJcPG1cLlthLXowLTlBLVpfLl0qIgoK",
        "usr/intshell/dev/vim/iml.vim": "c3ludGF4IG1hdGNoIENvbW1lbnQgIiMuKiQiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcIlteXCJdKlwiIgoKaGlnaGxpZ2h0IHNoeVJpdmVyICAgIGN0ZXJtZmc9cmVkCnN5bnRheCBtYXRjaCBzaHlSaXZlciAiXlthLXpBLVowLTkuXVwrIgoKaGlnaGxpZ2h0IHNoeVN0b3JtICAgIGN0ZXJtZmc9eWVsbG93CnN5bnRheCBtYXRjaCBzaHlTdG9ybSAiXglbYS16QS1aMC05Oi5fXVwrIgoKaGlnaGxpZ2h0IHNoeUNvbW1hbmQgICAgY3Rlcm1mZz1ncmVlbgpzeW50YXggbWF0Y2ggc2h5Q29tbWFuZCAiXgkJW2EtekEtWjAtOTouXy8tXVwrIgoKaGlnaGxpZ2h0IHNoeUFyZ3MgICAgY3Rlcm1mZz1jeWFuCnN5bnRheCBtYXRjaCBzaHlBcmdzICJuYW1lIgpzeW50YXggbWF0Y2ggc2h5QXJncyAiYXJncyIKCg==",
        "usr/intshell/dev/vim/javascript.vim": "c3ludGF4IG1hdGNoIENvbW1lbnQgIlw8c2h5KFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPG5hbWU6IFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPGhlbHA6IFwiW15cIl0qXCIiCnN5bnRheCBtYXRjaCBDb21tZW50ICJcPFZvbGNhbm9zKFteLHsgXSoiCgpoaWdobGlnaHQgY2FuQ29uc3QgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIGNhbkNvbnN0ICJcPGNhblw+IgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8c3ViXD4iCnN5bnRheCBtYXRjaCBjYW5Db25zdCAiXDxtc2dcPiIKc3ludGF4IG1hdGNoIGNhbkNvbnN0ICJcPHJlc1w+IgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8dGFyZ2V0XD4iCgpoaWdobGlnaHQga2l0Q29uc3QgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIGtpdENvbnN0ICJcPGtpdFwuW2EtejAtOUEtWl8uXSoiCgoKaGlnaGxpZ2h0IG1zZ0NvbnN0ICAgIGN0ZXJtZmc9Y3lhbgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8bVwuW2EtejAtOUEtWl8uXSoiCnN5bnRheCBtYXRjaCBtc2dDb25zdCAiXDxtc2dcLlthLXowLTlBLVpfLl0qIgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8cmVzXC5bYS16MC05QS1aXy5dKiIKc3ludGF4IG1hdGNoIG1zZ0NvbnN0ICJcPGNhblwuW2EtejAtOUEtWl9dKiIKc3ludGF4IG1hdGNoIG1zZ0NvbnN0ICJcPHN1YlwuW2EtejAtOUEtWl8uXSoiCnN5bnRheCBtYXRjaCBtc2dDb25zdCAiXDxjYlw+IgpzeW50YXggbWF0Y2ggbXNnQ29uc3QgIlw8Y2JzXD4iCgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5iYXNlIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5jb3JlIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5taXNjIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC5wYWdlIgpzeW50YXggbWF0Y2ggY2FuQ29uc3QgIlw8Y2FuXC51c2VyIgoK",
        "usr/intshell/dev/vim/plug.vim": "IiB2aW0tcGx1ZzogVmltIHBsdWdpbiBtYW5hZ2VyCiIgPT09PT09PT09PT09PT09PT09PT09PT09PT09PQoiCiIgRG93bmxvYWQgcGx1Zy52aW0gYW5kIHB1dCBpdCBpbiB+Ly52aW0vYXV0b2xvYWQKIgoiICAgY3VybCAtZkxvIH4vLnZpbS9hdXRvbG9hZC9wbHVnLnZpbSAtLWNyZWF0ZS1kaXJzIFwKIiAgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2p1bmVndW5uL3ZpbS1wbHVnL21hc3Rlci9wbHVnLnZpbQoiCiIgRWRpdCB5b3VyIC52aW1yYwoiCiIgICBjYWxsIHBsdWcjYmVnaW4oJ34vLnZpbS9wbHVnZ2VkJykKIgoiICAgIiBNYWtlIHN1cmUgeW91IHVzZSBzaW5nbGUgcXVvdGVzCiIKIiAgICIgU2hvcnRoYW5kIG5vdGF0aW9uOyBmZXRjaGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9qdW5lZ3Vubi92aW0tZWFzeS1hbGlnbgoiICAgUGx1ZyAnanVuZWd1bm4vdmltLWVhc3ktYWxpZ24nCiIKIiAgICIgQW55IHZhbGlkIGdpdCBVUkwgaXMgYWxsb3dlZAoiICAgUGx1ZyAnaHR0cHM6Ly9naXRodWIuY29tL2p1bmVndW5uL3ZpbS1naXRodWItZGFzaGJvYXJkLmdpdCcKIgoiICAgIiBNdWx0aXBsZSBQbHVnIGNvbW1hbmRzIGNhbiBiZSB3cml0dGVuIGluIGEgc2luZ2xlIGxpbmUgdXNpbmcgfCBzZXBhcmF0b3JzCiIgICBQbHVnICdTaXJWZXIvdWx0aXNuaXBzJyB8IFBsdWcgJ2hvbnphL3ZpbS1zbmlwcGV0cycKIgoiICAgIiBPbi1kZW1hbmQgbG9hZGluZwoiICAgUGx1ZyAnc2Nyb29sb29zZS9uZXJkdHJlZScsIHsgJ29uJzogICdORVJEVHJlZVRvZ2dsZScgfQoiICAgUGx1ZyAndHBvcGUvdmltLWZpcmVwbGFjZScsIHsgJ2Zvcic6ICdjbG9qdXJlJyB9CiIKIiAgICIgVXNpbmcgYSBub24tbWFzdGVyIGJyYW5jaAoiICAgUGx1ZyAncmRuZXR0by9ZQ00tR2VuZXJhdG9yJywgeyAnYnJhbmNoJzogJ3N0YWJsZScgfQoiCiIgICAiIFVzaW5nIGEgdGFnZ2VkIHJlbGVhc2U7IHdpbGRjYXJkIGFsbG93ZWQgKHJlcXVpcmVzIGdpdCAxLjkuMiBvciBhYm92ZSkKIiAgIFBsdWcgJ2ZhdGloL3ZpbS1nbycsIHsgJ3RhZyc6ICcqJyB9CiIKIiAgICIgUGx1Z2luIG9wdGlvbnMKIiAgIFBsdWcgJ25zZi9nb2NvZGUnLCB7ICd0YWcnOiAndi4yMDE1MDMwMycsICdydHAnOiAndmltJyB9CiIKIiAgICIgUGx1Z2luIG91dHNpZGUgfi8udmltL3BsdWdnZWQgd2l0aCBwb3N0LXVwZGF0ZSBob29rCiIgICBQbHVnICdqdW5lZ3Vubi9memYnLCB7ICdkaXInOiAnfi8uZnpmJywgJ2RvJzogJy4vaW5zdGFsbCAtLWFsbCcgfQoiCiIgICAiIFVubWFuYWdlZCBwbHVnaW4gKG1hbnVhbGx5IGluc3RhbGxlZCBhbmQgdXBkYXRlZCkKIiAgIFBsdWcgJ34vbXktcHJvdG90eXBlLXBsdWdpbicKIgoiICAgIiBJbml0aWFsaXplIHBsdWdpbiBzeXN0ZW0KIiAgIGNhbGwgcGx1ZyNlbmQoKQoiCiIgVGhlbiByZWxvYWQgLnZpbXJjIGFuZCA6UGx1Z0luc3RhbGwgdG8gaW5zdGFsbCBwbHVnaW5zLgoiCiIgUGx1ZyBvcHRpb25zOgoiCiJ8IE9wdGlvbiAgICAgICAgICAgICAgICAgIHwgRGVzY3JpcHRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwKInwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfAoifCBgYnJhbmNoYC9gdGFnYC9gY29tbWl0YCB8IEJyYW5jaC90YWcvY29tbWl0IG9mIHRoZSByZXBvc2l0b3J5IHRvIHVzZSAgICAgICB8CiJ8IGBydHBgICAgICAgICAgICAgICAgICAgIHwgU3ViZGlyZWN0b3J5IHRoYXQgY29udGFpbnMgVmltIHBsdWdpbiAgICAgICAgICAgIHwKInwgYGRpcmAgICAgICAgICAgICAgICAgICAgfCBDdXN0b20gZGlyZWN0b3J5IGZvciB0aGUgcGx1Z2luICAgICAgICAgICAgICAgICAgfAoifCBgYXNgICAgICAgICAgICAgICAgICAgICB8IFVzZSBkaWZmZXJlbnQgbmFtZSBmb3IgdGhlIHBsdWdpbiAgICAgICAgICAgICAgICB8CiJ8IGBkb2AgICAgICAgICAgICAgICAgICAgIHwgUG9zdC11cGRhdGUgaG9vayAoc3RyaW5nIG9yIGZ1bmNyZWYpICAgICAgICAgICAgIHwKInwgYG9uYCAgICAgICAgICAgICAgICAgICAgfCBPbi1kZW1hbmQgbG9hZGluZzogQ29tbWFuZHMgb3IgYDxQbHVnPmAtbWFwcGluZ3MgfAoifCBgZm9yYCAgICAgICAgICAgICAgICAgICB8IE9uLWRlbWFuZCBsb2FkaW5nOiBGaWxlIHR5cGVzICAgICAgICAgICAgICAgICAgICB8CiJ8IGBmcm96ZW5gICAgICAgICAgICAgICAgIHwgRG8gbm90IHVwZGF0ZSB1bmxlc3MgZXhwbGljaXRseSBzcGVjaWZpZWQgICAgICAgIHwKIgoiIE1vcmUgaW5mb3JtYXRpb246IGh0dHBzOi8vZ2l0aHViLmNvbS9qdW5lZ3Vubi92aW0tcGx1ZwoiCiIKIiBDb3B5cmlnaHQgKGMpIDIwMTcgSnVuZWd1bm4gQ2hvaQoiCiIgTUlUIExpY2Vuc2UKIgoiIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZwoiIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZQoiICJTb2Z0d2FyZSIpLCB0byBkZWFsIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcKIiB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsCiIgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvCiIgcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvCiIgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoiCiIgVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKIiBpbmNsdWRlZCBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS4KIgoiIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELAoiIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRgoiIE1FUkNIQU5UQUJJTElUWSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5ECiIgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRQoiIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04KIiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04KIiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS4KCmlmIGV4aXN0cygnZzpsb2FkZWRfcGx1ZycpCiAgZmluaXNoCmVuZGlmCmxldCBnOmxvYWRlZF9wbHVnID0gMQoKbGV0IHM6Y3BvX3NhdmUgPSAmY3BvCnNldCBjcG8mdmltCgpsZXQgczpwbHVnX3NyYyA9ICdodHRwczovL2dpdGh1Yi5jb20vanVuZWd1bm4vdmltLXBsdWcuZ2l0JwpsZXQgczpwbHVnX3RhYiA9IGdldChzOiwgJ3BsdWdfdGFiJywgLTEpCmxldCBzOnBsdWdfYnVmID0gZ2V0KHM6LCAncGx1Z19idWYnLCAtMSkKbGV0IHM6bWFjX2d1aSA9IGhhcygnZ3VpX21hY3ZpbScpICYmIGhhcygnZ3VpX3J1bm5pbmcnKQpsZXQgczppc193aW4gPSBoYXMoJ3dpbjMyJykKbGV0IHM6bnZpbSA9IGhhcygnbnZpbS0wLjInKSB8fCAoaGFzKCdudmltJykgJiYgZXhpc3RzKCcqam9id2FpdCcpICYmICFzOmlzX3dpbikKbGV0IHM6dmltOCA9IGhhcygncGF0Y2gtOC4wLjAwMzknKSAmJiBleGlzdHMoJypqb2Jfc3RhcnQnKQppZiBzOmlzX3dpbiAmJiAmc2hlbGxzbGFzaAogIHNldCBub3NoZWxsc2xhc2gKICBsZXQgczptZSA9IHJlc29sdmUoZXhwYW5kKCc8c2ZpbGU+OnAnKSkKICBzZXQgc2hlbGxzbGFzaAplbHNlCiAgbGV0IHM6bWUgPSByZXNvbHZlKGV4cGFuZCgnPHNmaWxlPjpwJykpCmVuZGlmCmxldCBzOmJhc2Vfc3BlYyA9IHsgJ2JyYW5jaCc6ICdtYXN0ZXInLCAnZnJvemVuJzogMCB9CmxldCBzOlRZUEUgPSB7ClwgICAnc3RyaW5nJzogIHR5cGUoJycpLApcICAgJ2xpc3QnOiAgICB0eXBlKFtdKSwKXCAgICdkaWN0JzogICAgdHlwZSh7fSksClwgICAnZnVuY3JlZic6IHR5cGUoZnVuY3Rpb24oJ2NhbGwnKSkKXCB9CmxldCBzOmxvYWRlZCA9IGdldChzOiwgJ2xvYWRlZCcsIHt9KQpsZXQgczp0cmlnZ2VycyA9IGdldChzOiwgJ3RyaWdnZXJzJywge30pCgppZiBzOmlzX3dpbgogIGZ1bmN0aW9uISBzOnBsdWdfY2FsbChmbiwgLi4uKQogICAgbGV0IHNoZWxsc2xhc2ggPSAmc2hlbGxzbGFzaAogICAgdHJ5CiAgICAgIHNldCBub3NoZWxsc2xhc2gKICAgICAgcmV0dXJuIGNhbGwoYTpmbiwgYTowMDApCiAgICBmaW5hbGx5CiAgICAgIGxldCAmc2hlbGxzbGFzaCA9IHNoZWxsc2xhc2gKICAgIGVuZHRyeQogIGVuZGZ1bmN0aW9uCmVsc2UKICBmdW5jdGlvbiEgczpwbHVnX2NhbGwoZm4sIC4uLikKICAgIHJldHVybiBjYWxsKGE6Zm4sIGE6MDAwKQogIGVuZGZ1bmN0aW9uCmVuZGlmCgpmdW5jdGlvbiEgczpwbHVnX2dldGN3ZCgpCiAgcmV0dXJuIHM6cGx1Z19jYWxsKCdnZXRjd2QnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cGx1Z19mbmFtZW1vZGlmeShmbmFtZSwgbW9kcykKICByZXR1cm4gczpwbHVnX2NhbGwoJ2ZuYW1lbW9kaWZ5JywgYTpmbmFtZSwgYTptb2RzKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cGx1Z19leHBhbmQoZm10KQogIHJldHVybiBzOnBsdWdfY2FsbCgnZXhwYW5kJywgYTpmbXQsIDEpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwbHVnX3RlbXBuYW1lKCkKICByZXR1cm4gczpwbHVnX2NhbGwoJ3RlbXBuYW1lJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBwbHVnI2JlZ2luKC4uLikKICBpZiBhOjAgPiAwCiAgICBsZXQgczpwbHVnX2hvbWVfb3JnID0gYToxCiAgICBsZXQgaG9tZSA9IHM6cGF0aChzOnBsdWdfZm5hbWVtb2RpZnkoczpwbHVnX2V4cGFuZChhOjEpLCAnOnAnKSkKICBlbHNlaWYgZXhpc3RzKCdnOnBsdWdfaG9tZScpCiAgICBsZXQgaG9tZSA9IHM6cGF0aChnOnBsdWdfaG9tZSkKICBlbHNlaWYgIWVtcHR5KCZydHApCiAgICBsZXQgaG9tZSA9IHM6cGF0aChzcGxpdCgmcnRwLCAnLCcpWzBdKSAuICcvcGx1Z2dlZCcKICBlbHNlCiAgICByZXR1cm4gczplcnIoJ1VuYWJsZSB0byBkZXRlcm1pbmUgcGx1ZyBob21lLiBUcnkgY2FsbGluZyBwbHVnI2JlZ2luKCkgd2l0aCBhIHBhdGggYXJndW1lbnQuJykKICBlbmRpZgogIGlmIHM6cGx1Z19mbmFtZW1vZGlmeShob21lLCAnOnQnKSA9PSMgJ3BsdWdpbicgJiYgczpwbHVnX2ZuYW1lbW9kaWZ5KGhvbWUsICc6aCcpID09IyBzOmZpcnN0X3J0cAogICAgcmV0dXJuIHM6ZXJyKCdJbnZhbGlkIHBsdWcgaG9tZS4gJy5ob21lLicgaXMgYSBzdGFuZGFyZCBWaW0gcnVudGltZSBwYXRoIGFuZCBpcyBub3QgYWxsb3dlZC4nKQogIGVuZGlmCgogIGxldCBnOnBsdWdfaG9tZSA9IGhvbWUKICBsZXQgZzpwbHVncyA9IHt9CiAgbGV0IGc6cGx1Z3Nfb3JkZXIgPSBbXQogIGxldCBzOnRyaWdnZXJzID0ge30KCiAgY2FsbCBzOmRlZmluZV9jb21tYW5kcygpCiAgcmV0dXJuIDEKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRlZmluZV9jb21tYW5kcygpCiAgY29tbWFuZCEgLW5hcmdzPSsgLWJhciBQbHVnIGNhbGwgcGx1ZyMoPGFyZ3M+KQogIGlmICFleGVjdXRhYmxlKCdnaXQnKQogICAgcmV0dXJuIHM6ZXJyKCdgZ2l0YCBleGVjdXRhYmxlIG5vdCBmb3VuZC4gTW9zdCBjb21tYW5kcyB3aWxsIG5vdCBiZSBhdmFpbGFibGUuIFRvIHN1cHByZXNzIHRoaXMgbWVzc2FnZSwgcHJlcGVuZCBgc2lsZW50IWAgdG8gYGNhbGwgcGx1ZyNiZWdpbiguLi4pYC4nKQogIGVuZGlmCiAgaWYgaGFzKCd3aW4zMicpCiAgXCAmJiAmc2hlbGxzbGFzaAogIFwgJiYgKCZzaGVsbCA9fiMgJ2NtZFwuZXhlJyB8fCAmc2hlbGwgPX4jICdwb3dlcnNoZWxsXC5leGUnKQogICAgcmV0dXJuIHM6ZXJyKCd2aW0tcGx1ZyBkb2VzIG5vdCBzdXBwb3J0IHNoZWxsLCAnIC4gJnNoZWxsIC4gJywgd2hlbiBzaGVsbHNsYXNoIGlzIHNldC4nKQogIGVuZGlmCiAgaWYgIWhhcygnbnZpbScpCiAgICBcICYmIChoYXMoJ3dpbjMyJykgfHwgaGFzKCd3aW4zMnVuaXgnKSkKICAgIFwgJiYgIWhhcygnbXVsdGlfYnl0ZScpCiAgICByZXR1cm4gczplcnIoJ1ZpbSBuZWVkcyArbXVsdGlfYnl0ZSBmZWF0dXJlIG9uIFdpbmRvd3MgdG8gcnVuIHNoZWxsIGNvbW1hbmRzLiBFbmFibGUgK2ljb252IGZvciBiZXN0IHJlc3VsdHMuJykKICBlbmRpZgogIGNvbW1hbmQhIC1uYXJncz0qIC1iYXIgLWJhbmcgLWNvbXBsZXRlPWN1c3RvbWxpc3QsczpuYW1lcyBQbHVnSW5zdGFsbCBjYWxsIHM6aW5zdGFsbCg8YmFuZz4wLCBbPGYtYXJncz5dKQogIGNvbW1hbmQhIC1uYXJncz0qIC1iYXIgLWJhbmcgLWNvbXBsZXRlPWN1c3RvbWxpc3QsczpuYW1lcyBQbHVnVXBkYXRlICBjYWxsIHM6dXBkYXRlKDxiYW5nPjAsIFs8Zi1hcmdzPl0pCiAgY29tbWFuZCEgLW5hcmdzPTAgLWJhciAtYmFuZyBQbHVnQ2xlYW4gY2FsbCBzOmNsZWFuKDxiYW5nPjApCiAgY29tbWFuZCEgLW5hcmdzPTAgLWJhciBQbHVnVXBncmFkZSBpZiBzOnVwZ3JhZGUoKSB8IGV4ZWN1dGUgJ3NvdXJjZScgczplc2MoczptZSkgfCBlbmRpZgogIGNvbW1hbmQhIC1uYXJncz0wIC1iYXIgUGx1Z1N0YXR1cyAgY2FsbCBzOnN0YXR1cygpCiAgY29tbWFuZCEgLW5hcmdzPTAgLWJhciBQbHVnRGlmZiAgICBjYWxsIHM6ZGlmZigpCiAgY29tbWFuZCEgLW5hcmdzPT8gLWJhciAtYmFuZyAtY29tcGxldGU9ZmlsZSBQbHVnU25hcHNob3QgY2FsbCBzOnNuYXBzaG90KDxiYW5nPjAsIDxmLWFyZ3M+KQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dG9fYSh2KQogIHJldHVybiB0eXBlKGE6dikgPT0gczpUWVBFLmxpc3QgPyBhOnYgOiBbYTp2XQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dG9fcyh2KQogIHJldHVybiB0eXBlKGE6dikgPT0gczpUWVBFLnN0cmluZyA/IGE6diA6IGpvaW4oYTp2LCAiXG4iKSAuICJcbiIKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdsb2IoZnJvbSwgcGF0dGVybikKICByZXR1cm4gczpsaW5lcyhnbG9icGF0aChhOmZyb20sIGE6cGF0dGVybikpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzb3VyY2UoZnJvbSwgLi4uKQogIGxldCBmb3VuZCA9IDAKICBmb3IgcGF0dGVybiBpbiBhOjAwMAogICAgZm9yIHZpbSBpbiBzOmdsb2IoYTpmcm9tLCBwYXR0ZXJuKQogICAgICBleGVjdXRlICdzb3VyY2UnIHM6ZXNjKHZpbSkKICAgICAgbGV0IGZvdW5kID0gMQogICAgZW5kZm9yCiAgZW5kZm9yCiAgcmV0dXJuIGZvdW5kCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczphc3NvYyhkaWN0LCBrZXksIHZhbCkKICBsZXQgYTpkaWN0W2E6a2V5XSA9IGFkZChnZXQoYTpkaWN0LCBhOmtleSwgW10pLCBhOnZhbCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmFzayhtZXNzYWdlLCAuLi4pCiAgY2FsbCBpbnB1dHNhdmUoKQogIGVjaG9obCBXYXJuaW5nTXNnCiAgbGV0IGFuc3dlciA9IGlucHV0KGE6bWVzc2FnZS4oYTowID8gJyAoeS9OL2EpICcgOiAnICh5L04pICcpKQogIGVjaG9obCBOb25lCiAgY2FsbCBpbnB1dHJlc3RvcmUoKQogIGVjaG8gIlxyIgogIHJldHVybiAoYTowICYmIGFuc3dlciA9fj8gJ15hJykgPyAyIDogKGFuc3dlciA9fj8gJ155JykgPyAxIDogMAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXNrX25vX2ludGVycnVwdCguLi4pCiAgdHJ5CiAgICByZXR1cm4gY2FsbCgnczphc2snLCBhOjAwMCkKICBjYXRjaAogICAgcmV0dXJuIDAKICBlbmR0cnkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxhenkocGx1Zywgb3B0KQogIHJldHVybiBoYXNfa2V5KGE6cGx1ZywgYTpvcHQpICYmCiAgICAgICAgXCAoZW1wdHkoczp0b19hKGE6cGx1Z1thOm9wdF0pKSAgICAgICAgIHx8CiAgICAgICAgXCAgIWlzZGlyZWN0b3J5KGE6cGx1Zy5kaXIpICAgICAgICAgICAgIHx8CiAgICAgICAgXCAgbGVuKHM6Z2xvYihzOnJ0cChhOnBsdWcpLCAncGx1Z2luJykpIHx8CiAgICAgICAgXCAgbGVuKHM6Z2xvYihzOnJ0cChhOnBsdWcpLCAnYWZ0ZXIvcGx1Z2luJykpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHBsdWcjZW5kKCkKICBpZiAhZXhpc3RzKCdnOnBsdWdzJykKICAgIHJldHVybiBzOmVycigncGx1ZyNlbmQoKSBjYWxsZWQgd2l0aG91dCBjYWxsaW5nIHBsdWcjYmVnaW4oKSBmaXJzdCcpCiAgZW5kaWYKCiAgaWYgZXhpc3RzKCcjUGx1Z0xPRCcpCiAgICBhdWdyb3VwIFBsdWdMT0QKICAgICAgYXV0b2NtZCEKICAgIGF1Z3JvdXAgRU5ECiAgICBhdWdyb3VwISBQbHVnTE9ECiAgZW5kaWYKICBsZXQgbG9kID0geyAnZnQnOiB7fSwgJ21hcCc6IHt9LCAnY21kJzoge30gfQoKICBpZiBleGlzdHMoJ2c6ZGlkX2xvYWRfZmlsZXR5cGVzJykKICAgIGZpbGV0eXBlIG9mZgogIGVuZGlmCiAgZm9yIG5hbWUgaW4gZzpwbHVnc19vcmRlcgogICAgaWYgIWhhc19rZXkoZzpwbHVncywgbmFtZSkKICAgICAgY29udGludWUKICAgIGVuZGlmCiAgICBsZXQgcGx1ZyA9IGc6cGx1Z3NbbmFtZV0KICAgIGlmIGdldChzOmxvYWRlZCwgbmFtZSwgMCkgfHwgIXM6bGF6eShwbHVnLCAnb24nKSAmJiAhczpsYXp5KHBsdWcsICdmb3InKQogICAgICBsZXQgczpsb2FkZWRbbmFtZV0gPSAxCiAgICAgIGNvbnRpbnVlCiAgICBlbmRpZgoKICAgIGlmIGhhc19rZXkocGx1ZywgJ29uJykKICAgICAgbGV0IHM6dHJpZ2dlcnNbbmFtZV0gPSB7ICdtYXAnOiBbXSwgJ2NtZCc6IFtdIH0KICAgICAgZm9yIGNtZCBpbiBzOnRvX2EocGx1Zy5vbikKICAgICAgICBpZiBjbWQgPX4/ICdePFBsdWc+LlwrJwogICAgICAgICAgaWYgZW1wdHkobWFwY2hlY2soY21kKSkgJiYgZW1wdHkobWFwY2hlY2soY21kLCAnaScpKQogICAgICAgICAgICBjYWxsIHM6YXNzb2MobG9kLm1hcCwgY21kLCBuYW1lKQogICAgICAgICAgZW5kaWYKICAgICAgICAgIGNhbGwgYWRkKHM6dHJpZ2dlcnNbbmFtZV0ubWFwLCBjbWQpCiAgICAgICAgZWxzZWlmIGNtZCA9fiMgJ15bQS1aXScKICAgICAgICAgIGxldCBjbWQgPSBzdWJzdGl0dXRlKGNtZCwgJyEqJCcsICcnLCAnJykKICAgICAgICAgIGlmIGV4aXN0cygnOicuY21kKSAhPSAyCiAgICAgICAgICAgIGNhbGwgczphc3NvYyhsb2QuY21kLCBjbWQsIG5hbWUpCiAgICAgICAgICBlbmRpZgogICAgICAgICAgY2FsbCBhZGQoczp0cmlnZ2Vyc1tuYW1lXS5jbWQsIGNtZCkKICAgICAgICBlbHNlCiAgICAgICAgICBjYWxsIHM6ZXJyKCdJbnZhbGlkIGBvbmAgb3B0aW9uOiAnLmNtZC4KICAgICAgICAgIFwgJy4gU2hvdWxkIHN0YXJ0IHdpdGggYW4gdXBwZXJjYXNlIGxldHRlciBvciBgPFBsdWc+YC4nKQogICAgICAgIGVuZGlmCiAgICAgIGVuZGZvcgogICAgZW5kaWYKCiAgICBpZiBoYXNfa2V5KHBsdWcsICdmb3InKQogICAgICBsZXQgdHlwZXMgPSBzOnRvX2EocGx1Zy5mb3IpCiAgICAgIGlmICFlbXB0eSh0eXBlcykKICAgICAgICBhdWdyb3VwIGZpbGV0eXBlZGV0ZWN0CiAgICAgICAgY2FsbCBzOnNvdXJjZShzOnJ0cChwbHVnKSwgJ2Z0ZGV0ZWN0LyoqLyoudmltJywgJ2FmdGVyL2Z0ZGV0ZWN0LyoqLyoudmltJykKICAgICAgICBhdWdyb3VwIEVORAogICAgICBlbmRpZgogICAgICBmb3IgdHlwZSBpbiB0eXBlcwogICAgICAgIGNhbGwgczphc3NvYyhsb2QuZnQsIHR5cGUsIG5hbWUpCiAgICAgIGVuZGZvcgogICAgZW5kaWYKICBlbmRmb3IKCiAgZm9yIFtjbWQsIG5hbWVzXSBpbiBpdGVtcyhsb2QuY21kKQogICAgZXhlY3V0ZSBwcmludGYoCiAgICBcICdjb21tYW5kISAtbmFyZ3M9KiAtcmFuZ2UgLWJhbmcgLWNvbXBsZXRlPWZpbGUgJXMgY2FsbCBzOmxvZF9jbWQoJXMsICI8YmFuZz4iLCA8bGluZTE+LCA8bGluZTI+LCA8cS1hcmdzPiwgJXMpJywKICAgIFwgY21kLCBzdHJpbmcoY21kKSwgc3RyaW5nKG5hbWVzKSkKICBlbmRmb3IKCiAgZm9yIFttYXAsIG5hbWVzXSBpbiBpdGVtcyhsb2QubWFwKQogICAgZm9yIFttb2RlLCBtYXBfcHJlZml4LCBrZXlfcHJlZml4XSBpbgogICAgICAgICAgXCBbWydpJywgJzxDLU8+JywgJyddLCBbJ24nLCAnJywgJyddLCBbJ3YnLCAnJywgJ2d2J10sIFsnbycsICcnLCAnJ11dCiAgICAgIGV4ZWN1dGUgcHJpbnRmKAogICAgICBcICclc25vcmVtYXAgPHNpbGVudD4gJXMgJXM6PEMtVT5jYWxsIDxTSUQ+bG9kX21hcCglcywgJXMsICVzLCAiJXMiKTxDUj4nLAogICAgICBcIG1vZGUsIG1hcCwgbWFwX3ByZWZpeCwgc3RyaW5nKG1hcCksIHN0cmluZyhuYW1lcyksIG1vZGUgIT0gJ2knLCBrZXlfcHJlZml4KQogICAgZW5kZm9yCiAgZW5kZm9yCgogIGZvciBbZnQsIG5hbWVzXSBpbiBpdGVtcyhsb2QuZnQpCiAgICBhdWdyb3VwIFBsdWdMT0QKICAgICAgZXhlY3V0ZSBwcmludGYoJ2F1dG9jbWQgRmlsZVR5cGUgJXMgY2FsbCA8U0lEPmxvZF9mdCglcywgJXMpJywKICAgICAgICAgICAgXCBmdCwgc3RyaW5nKGZ0KSwgc3RyaW5nKG5hbWVzKSkKICAgIGF1Z3JvdXAgRU5ECiAgZW5kZm9yCgogIGNhbGwgczpyZW9yZ19ydHAoKQogIGZpbGV0eXBlIHBsdWdpbiBpbmRlbnQgb24KICBpZiBoYXMoJ3ZpbV9zdGFydGluZycpCiAgICBpZiBoYXMoJ3N5bnRheCcpICYmICFleGlzdHMoJ2c6c3ludGF4X29uJykKICAgICAgc3ludGF4IGVuYWJsZQogICAgZW5kCiAgZWxzZQogICAgY2FsbCBzOnJlbG9hZF9wbHVnaW5zKCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9hZGVkX25hbWVzKCkKICByZXR1cm4gZmlsdGVyKGNvcHkoZzpwbHVnc19vcmRlciksICdnZXQoczpsb2FkZWQsIHY6dmFsLCAwKScpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsb2FkX3BsdWdpbihzcGVjKQogIGNhbGwgczpzb3VyY2UoczpydHAoYTpzcGVjKSwgJ3BsdWdpbi8qKi8qLnZpbScsICdhZnRlci9wbHVnaW4vKiovKi52aW0nKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cmVsb2FkX3BsdWdpbnMoKQogIGZvciBuYW1lIGluIHM6bG9hZGVkX25hbWVzKCkKICAgIGNhbGwgczpsb2FkX3BsdWdpbihnOnBsdWdzW25hbWVdKQogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dHJpbShzdHIpCiAgcmV0dXJuIHN1YnN0aXR1dGUoYTpzdHIsICdbXC9dXCskJywgJycsICcnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dmVyc2lvbl9yZXF1aXJlbWVudCh2YWwsIG1pbikKICBmb3IgaWR4IGluIHJhbmdlKDAsIGxlbihhOm1pbikgLSAxKQogICAgbGV0IHYgPSBnZXQoYTp2YWwsIGlkeCwgMCkKICAgIGlmICAgICB2IDwgYTptaW5baWR4XSB8IHJldHVybiAwCiAgICBlbHNlaWYgdiA+IGE6bWluW2lkeF0gfCByZXR1cm4gMQogICAgZW5kaWYKICBlbmRmb3IKICByZXR1cm4gMQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoLi4uKQogIGlmICFleGlzdHMoJ3M6Z2l0X3ZlcnNpb24nKQogICAgbGV0IHM6Z2l0X3ZlcnNpb24gPSBtYXAoc3BsaXQoc3BsaXQoczpzeXN0ZW0oJ2dpdCAtLXZlcnNpb24nKSlbMl0sICdcLicpLCAnc3RyMm5yKHY6dmFsKScpCiAgZW5kaWYKICByZXR1cm4gczp2ZXJzaW9uX3JlcXVpcmVtZW50KHM6Z2l0X3ZlcnNpb24sIGE6MDAwKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJvZ3Jlc3Nfb3B0KGJhc2UpCiAgcmV0dXJuIGE6YmFzZSAmJiAhczppc193aW4gJiYKICAgICAgICBcIHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoMSwgNywgMSkgPyAnLS1wcm9ncmVzcycgOiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cnRwKHNwZWMpCiAgcmV0dXJuIHM6cGF0aChhOnNwZWMuZGlyIC4gZ2V0KGE6c3BlYywgJ3J0cCcsICcnKSkKZW5kZnVuY3Rpb24KCmlmIHM6aXNfd2luCiAgZnVuY3Rpb24hIHM6cGF0aChwYXRoKQogICAgcmV0dXJuIHM6dHJpbShzdWJzdGl0dXRlKGE6cGF0aCwgJy8nLCAnXCcsICdnJykpCiAgZW5kZnVuY3Rpb24KCiAgZnVuY3Rpb24hIHM6ZGlycGF0aChwYXRoKQogICAgcmV0dXJuIHM6cGF0aChhOnBhdGgpIC4gJ1wnCiAgZW5kZnVuY3Rpb24KCiAgZnVuY3Rpb24hIHM6aXNfbG9jYWxfcGx1ZyhyZXBvKQogICAgcmV0dXJuIGE6cmVwbyA9fj8gJ15bYS16XTpcfF5bJX5dJwogIGVuZGZ1bmN0aW9uCgogICIgQ29waWVkIGZyb20gZnpmCiAgZnVuY3Rpb24hIHM6d3JhcF9jbWRzKGNtZHMpCiAgICBsZXQgY21kcyA9IFsKICAgICAgXCAnQGVjaG8gb2ZmJywKICAgICAgXCAnc2V0bG9jYWwgZW5hYmxlZGVsYXllZGV4cGFuc2lvbiddCiAgICBcICsgKHR5cGUoYTpjbWRzKSA9PSB0eXBlKFtdKSA/IGE6Y21kcyA6IFthOmNtZHNdKQogICAgXCArIFsnZW5kbG9jYWwnXQogICAgaWYgaGFzKCdpY29udicpCiAgICAgIGlmICFleGlzdHMoJ3M6Y29kZXBhZ2UnKQogICAgICAgIGxldCBzOmNvZGVwYWdlID0gbGliY2FsbG5yKCdrZXJuZWwzMi5kbGwnLCAnR2V0QUNQJywgMCkKICAgICAgZW5kaWYKICAgICAgcmV0dXJuIG1hcChjbWRzLCBwcmludGYoJ2ljb252KHY6dmFsLiJcciIsICIlcyIsICJjcCVkIiknLCAmZW5jb2RpbmcsIHM6Y29kZXBhZ2UpKQogICAgZW5kaWYKICAgIHJldHVybiBtYXAoY21kcywgJ3Y6dmFsLiJcciInKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9uISBzOmJhdGNoZmlsZShjbWQpCiAgICBsZXQgYmF0Y2hmaWxlID0gczpwbHVnX3RlbXBuYW1lKCkuJy5iYXQnCiAgICBjYWxsIHdyaXRlZmlsZShzOndyYXBfY21kcyhhOmNtZCksIGJhdGNoZmlsZSkKICAgIGxldCBjbWQgPSBwbHVnI3NoZWxsZXNjYXBlKGJhdGNoZmlsZSwgeydzaGVsbCc6ICZzaGVsbCwgJ3NjcmlwdCc6IDB9KQogICAgaWYgJnNoZWxsID1+IyAncG93ZXJzaGVsbFwuZXhlJwogICAgICBsZXQgY21kID0gJyYgJyAuIGNtZAogICAgZW5kaWYKICAgIHJldHVybiBbYmF0Y2hmaWxlLCBjbWRdCiAgZW5kZnVuY3Rpb24KZWxzZQogIGZ1bmN0aW9uISBzOnBhdGgocGF0aCkKICAgIHJldHVybiBzOnRyaW0oYTpwYXRoKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9uISBzOmRpcnBhdGgocGF0aCkKICAgIHJldHVybiBzdWJzdGl0dXRlKGE6cGF0aCwgJ1svXFxdKiQnLCAnLycsICcnKQogIGVuZGZ1bmN0aW9uCgogIGZ1bmN0aW9uISBzOmlzX2xvY2FsX3BsdWcocmVwbykKICAgIHJldHVybiBhOnJlcG9bMF0gPX4gJ1svJH5dJwogIGVuZGZ1bmN0aW9uCmVuZGlmCgpmdW5jdGlvbiEgczplcnIobXNnKQogIGVjaG9obCBFcnJvck1zZwogIGVjaG9tICdbdmltLXBsdWddICcuYTptc2cKICBlY2hvaGwgTm9uZQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6d2FybihjbWQsIG1zZykKICBlY2hvaGwgV2FybmluZ01zZwogIGV4ZWN1dGUgYTpjbWQgJ2E6bXNnJwogIGVjaG9obCBOb25lCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczplc2MocGF0aCkKICByZXR1cm4gZXNjYXBlKGE6cGF0aCwgJyAnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZXNjcnRwKHBhdGgpCiAgcmV0dXJuIGVzY2FwZShhOnBhdGgsICcgLCcpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZW1vdmVfcnRwKCkKICBmb3IgbmFtZSBpbiBzOmxvYWRlZF9uYW1lcygpCiAgICBsZXQgcnRwID0gczpydHAoZzpwbHVnc1tuYW1lXSkKICAgIGV4ZWN1dGUgJ3NldCBydHAtPScuczplc2NydHAocnRwKQogICAgbGV0IGFmdGVyID0gZ2xvYnBhdGgocnRwLCAnYWZ0ZXInKQogICAgaWYgaXNkaXJlY3RvcnkoYWZ0ZXIpCiAgICAgIGV4ZWN1dGUgJ3NldCBydHAtPScuczplc2NydHAoYWZ0ZXIpCiAgICBlbmRpZgogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cmVvcmdfcnRwKCkKICBpZiAhZW1wdHkoczpmaXJzdF9ydHApCiAgICBleGVjdXRlICdzZXQgcnRwLT0nLnM6Zmlyc3RfcnRwCiAgICBleGVjdXRlICdzZXQgcnRwLT0nLnM6bGFzdF9ydHAKICBlbmRpZgoKICAiICZydHAgaXMgbW9kaWZpZWQgZnJvbSBvdXRzaWRlCiAgaWYgZXhpc3RzKCdzOnBydHAnKSAmJiBzOnBydHAgIT0jICZydHAKICAgIGNhbGwgczpyZW1vdmVfcnRwKCkKICAgIHVubGV0ISBzOm1pZGRsZQogIGVuZGlmCgogIGxldCBzOm1pZGRsZSA9IGdldChzOiwgJ21pZGRsZScsICZydHApCiAgbGV0IHJ0cHMgICAgID0gbWFwKHM6bG9hZGVkX25hbWVzKCksICdzOnJ0cChnOnBsdWdzW3Y6dmFsXSknKQogIGxldCBhZnRlcnMgICA9IGZpbHRlcihtYXAoY29weShydHBzKSwgJ2dsb2JwYXRoKHY6dmFsLCAiYWZ0ZXIiKScpLCAnIWVtcHR5KHY6dmFsKScpCiAgbGV0IHJ0cCAgICAgID0gam9pbihtYXAocnRwcywgJ2VzY2FwZSh2OnZhbCwgIiwiKScpLCAnLCcpCiAgICAgICAgICAgICAgICAgXCAuICcsJy5zOm1pZGRsZS4nLCcKICAgICAgICAgICAgICAgICBcIC4gam9pbihtYXAoYWZ0ZXJzLCAnZXNjYXBlKHY6dmFsLCAiLCIpJyksICcsJykKICBsZXQgJnJ0cCAgICAgPSBzdWJzdGl0dXRlKHN1YnN0aXR1dGUocnRwLCAnLCwqJywgJywnLCAnZycpLCAnXixcfCwkJywgJycsICdnJykKICBsZXQgczpwcnRwICAgPSAmcnRwCgogIGlmICFlbXB0eShzOmZpcnN0X3J0cCkKICAgIGV4ZWN1dGUgJ3NldCBydHBePScuczpmaXJzdF9ydHAKICAgIGV4ZWN1dGUgJ3NldCBydHArPScuczpsYXN0X3J0cAogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpkb2F1dG9jbWQoLi4uKQogIGlmIGV4aXN0cygnIycuam9pbihhOjAwMCwgJyMnKSkKICAgIGV4ZWN1dGUgJ2RvYXV0b2NtZCcgKCh2OnZlcnNpb24gPiA3MDMgfHwgaGFzKCdwYXRjaDQ0MicpKSA/ICc8bm9tb2RlbGluZT4nIDogJycpIGpvaW4oYTowMDApCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRvYnVmcmVhZChuYW1lcykKICBmb3IgbmFtZSBpbiBhOm5hbWVzCiAgICBsZXQgcGF0aCA9IHM6cnRwKGc6cGx1Z3NbbmFtZV0pCiAgICBmb3IgZGlyIGluIFsnZnRkZXRlY3QnLCAnZnRwbHVnaW4nLCAnYWZ0ZXIvZnRkZXRlY3QnLCAnYWZ0ZXIvZnRwbHVnaW4nXQogICAgICBpZiBsZW4oZmluZGRpcihkaXIsIHBhdGgpKQogICAgICAgIGlmIGV4aXN0cygnI0J1ZlJlYWQnKQogICAgICAgICAgZG9hdXRvY21kIEJ1ZlJlYWQKICAgICAgICBlbmRpZgogICAgICAgIHJldHVybgogICAgICBlbmRpZgogICAgZW5kZm9yCiAgZW5kZm9yCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgcGx1ZyNsb2FkKC4uLikKICBpZiBhOjAgPT0gMAogICAgcmV0dXJuIHM6ZXJyKCdBcmd1bWVudCBtaXNzaW5nOiBwbHVnaW4gbmFtZShzKSByZXF1aXJlZCcpCiAgZW5kaWYKICBpZiAhZXhpc3RzKCdnOnBsdWdzJykKICAgIHJldHVybiBzOmVycigncGx1ZyNiZWdpbiB3YXMgbm90IGNhbGxlZCcpCiAgZW5kaWYKICBsZXQgbmFtZXMgPSBhOjAgPT0gMSAmJiB0eXBlKGE6MSkgPT0gczpUWVBFLmxpc3QgPyBhOjEgOiBhOjAwMAogIGxldCB1bmtub3ducyA9IGZpbHRlcihjb3B5KG5hbWVzKSwgJyFoYXNfa2V5KGc6cGx1Z3MsIHY6dmFsKScpCiAgaWYgIWVtcHR5KHVua25vd25zKQogICAgbGV0IHMgPSBsZW4odW5rbm93bnMpID4gMSA/ICdzJyA6ICcnCiAgICByZXR1cm4gczplcnIocHJpbnRmKCdVbmtub3duIHBsdWdpbiVzOiAlcycsIHMsIGpvaW4odW5rbm93bnMsICcsICcpKSkKICBlbmQKICBsZXQgdW5sb2FkZWQgPSBmaWx0ZXIoY29weShuYW1lcyksICchZ2V0KHM6bG9hZGVkLCB2OnZhbCwgMCknKQogIGlmICFlbXB0eSh1bmxvYWRlZCkKICAgIGZvciBuYW1lIGluIHVubG9hZGVkCiAgICAgIGNhbGwgczpsb2QoW25hbWVdLCBbJ2Z0ZGV0ZWN0JywgJ2FmdGVyL2Z0ZGV0ZWN0JywgJ3BsdWdpbicsICdhZnRlci9wbHVnaW4nXSkKICAgIGVuZGZvcgogICAgY2FsbCBzOmRvYnVmcmVhZCh1bmxvYWRlZCkKICAgIHJldHVybiAxCiAgZW5kCiAgcmV0dXJuIDAKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnJlbW92ZV90cmlnZ2VycyhuYW1lKQogIGlmICFoYXNfa2V5KHM6dHJpZ2dlcnMsIGE6bmFtZSkKICAgIHJldHVybgogIGVuZGlmCiAgZm9yIGNtZCBpbiBzOnRyaWdnZXJzW2E6bmFtZV0uY21kCiAgICBleGVjdXRlICdzaWxlbnQhIGRlbGMnIGNtZAogIGVuZGZvcgogIGZvciBtYXAgaW4gczp0cmlnZ2Vyc1thOm5hbWVdLm1hcAogICAgZXhlY3V0ZSAnc2lsZW50ISB1bm1hcCcgbWFwCiAgICBleGVjdXRlICdzaWxlbnQhIGl1bm1hcCcgbWFwCiAgZW5kZm9yCiAgY2FsbCByZW1vdmUoczp0cmlnZ2VycywgYTpuYW1lKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bG9kKG5hbWVzLCB0eXBlcywgLi4uKQogIGZvciBuYW1lIGluIGE6bmFtZXMKICAgIGNhbGwgczpyZW1vdmVfdHJpZ2dlcnMobmFtZSkKICAgIGxldCBzOmxvYWRlZFtuYW1lXSA9IDEKICBlbmRmb3IKICBjYWxsIHM6cmVvcmdfcnRwKCkKCiAgZm9yIG5hbWUgaW4gYTpuYW1lcwogICAgbGV0IHJ0cCA9IHM6cnRwKGc6cGx1Z3NbbmFtZV0pCiAgICBmb3IgZGlyIGluIGE6dHlwZXMKICAgICAgY2FsbCBzOnNvdXJjZShydHAsIGRpci4nLyoqLyoudmltJykKICAgIGVuZGZvcgogICAgaWYgYTowCiAgICAgIGlmICFzOnNvdXJjZShydHAsIGE6MSkgJiYgIWVtcHR5KHM6Z2xvYihydHAsIGE6MikpCiAgICAgICAgZXhlY3V0ZSAncnVudGltZScgYToxCiAgICAgIGVuZGlmCiAgICAgIGNhbGwgczpzb3VyY2UocnRwLCBhOjIpCiAgICBlbmRpZgogICAgY2FsbCBzOmRvYXV0b2NtZCgnVXNlcicsIG5hbWUpCiAgZW5kZm9yCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsb2RfZnQocGF0LCBuYW1lcykKICBsZXQgc3luID0gJ3N5bnRheC8nLmE6cGF0LicudmltJwogIGNhbGwgczpsb2QoYTpuYW1lcywgWydwbHVnaW4nLCAnYWZ0ZXIvcGx1Z2luJ10sIHN5biwgJ2FmdGVyLycuc3luKQogIGV4ZWN1dGUgJ2F1dG9jbWQhIFBsdWdMT0QgRmlsZVR5cGUnIGE6cGF0CiAgY2FsbCBzOmRvYXV0b2NtZCgnZmlsZXR5cGVwbHVnaW4nLCAnRmlsZVR5cGUnKQogIGNhbGwgczpkb2F1dG9jbWQoJ2ZpbGV0eXBlaW5kZW50JywgJ0ZpbGVUeXBlJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZF9jbWQoY21kLCBiYW5nLCBsMSwgbDIsIGFyZ3MsIG5hbWVzKQogIGNhbGwgczpsb2QoYTpuYW1lcywgWydmdGRldGVjdCcsICdhZnRlci9mdGRldGVjdCcsICdwbHVnaW4nLCAnYWZ0ZXIvcGx1Z2luJ10pCiAgY2FsbCBzOmRvYnVmcmVhZChhOm5hbWVzKQogIGV4ZWN1dGUgcHJpbnRmKCclcyVzJXMgJXMnLCAoYTpsMSA9PSBhOmwyID8gJycgOiAoYTpsMS4nLCcuYTpsMikpLCBhOmNtZCwgYTpiYW5nLCBhOmFyZ3MpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsb2RfbWFwKG1hcCwgbmFtZXMsIHdpdGhfcHJlZml4LCBwcmVmaXgpCiAgY2FsbCBzOmxvZChhOm5hbWVzLCBbJ2Z0ZGV0ZWN0JywgJ2FmdGVyL2Z0ZGV0ZWN0JywgJ3BsdWdpbicsICdhZnRlci9wbHVnaW4nXSkKICBjYWxsIHM6ZG9idWZyZWFkKGE6bmFtZXMpCiAgbGV0IGV4dHJhID0gJycKICB3aGlsZSAxCiAgICBsZXQgYyA9IGdldGNoYXIoMCkKICAgIGlmIGMgPT0gMAogICAgICBicmVhawogICAgZW5kaWYKICAgIGxldCBleHRyYSAuPSBucjJjaGFyKGMpCiAgZW5kd2hpbGUKCiAgaWYgYTp3aXRoX3ByZWZpeAogICAgbGV0IHByZWZpeCA9IHY6Y291bnQgPyB2OmNvdW50IDogJycKICAgIGxldCBwcmVmaXggLj0gJyInLnY6cmVnaXN0ZXIuYTpwcmVmaXgKICAgIGlmIG1vZGUoMSkgPT0gJ25vJwogICAgICBpZiB2Om9wZXJhdG9yID09ICdjJwogICAgICAgIGxldCBwcmVmaXggPSAiXDxlc2M+IiAuIHByZWZpeAogICAgICBlbmRpZgogICAgICBsZXQgcHJlZml4IC49IHY6b3BlcmF0b3IKICAgIGVuZGlmCiAgICBjYWxsIGZlZWRrZXlzKHByZWZpeCwgJ24nKQogIGVuZGlmCiAgY2FsbCBmZWVka2V5cyhzdWJzdGl0dXRlKGE6bWFwLCAnXjxQbHVnPicsICJcPFBsdWc+IiwgJycpIC4gZXh0cmEpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgcGx1ZyMocmVwbywgLi4uKQogIGlmIGE6MCA+IDEKICAgIHJldHVybiBzOmVycignSW52YWxpZCBudW1iZXIgb2YgYXJndW1lbnRzICgxLi4yKScpCiAgZW5kaWYKCiAgdHJ5CiAgICBsZXQgcmVwbyA9IHM6dHJpbShhOnJlcG8pCiAgICBsZXQgb3B0cyA9IGE6MCA9PSAxID8gczpwYXJzZV9vcHRpb25zKGE6MSkgOiBzOmJhc2Vfc3BlYwogICAgbGV0IG5hbWUgPSBnZXQob3B0cywgJ2FzJywgczpwbHVnX2ZuYW1lbW9kaWZ5KHJlcG8sICc6dDpzP1wuZ2l0JD8/JykpCiAgICBsZXQgc3BlYyA9IGV4dGVuZChzOmluZmVyX3Byb3BlcnRpZXMobmFtZSwgcmVwbyksIG9wdHMpCiAgICBpZiAhaGFzX2tleShnOnBsdWdzLCBuYW1lKQogICAgICBjYWxsIGFkZChnOnBsdWdzX29yZGVyLCBuYW1lKQogICAgZW5kaWYKICAgIGxldCBnOnBsdWdzW25hbWVdID0gc3BlYwogICAgbGV0IHM6bG9hZGVkW25hbWVdID0gZ2V0KHM6bG9hZGVkLCBuYW1lLCAwKQogIGNhdGNoCiAgICByZXR1cm4gczplcnIodjpleGNlcHRpb24pCiAgZW5kdHJ5CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwYXJzZV9vcHRpb25zKGFyZykKICBsZXQgb3B0cyA9IGNvcHkoczpiYXNlX3NwZWMpCiAgbGV0IHR5cGUgPSB0eXBlKGE6YXJnKQogIGlmIHR5cGUgPT0gczpUWVBFLnN0cmluZwogICAgbGV0IG9wdHMudGFnID0gYTphcmcKICBlbHNlaWYgdHlwZSA9PSBzOlRZUEUuZGljdAogICAgY2FsbCBleHRlbmQob3B0cywgYTphcmcpCiAgICBpZiBoYXNfa2V5KG9wdHMsICdkaXInKQogICAgICBsZXQgb3B0cy5kaXIgPSBzOmRpcnBhdGgoczpwbHVnX2V4cGFuZChvcHRzLmRpcikpCiAgICBlbmRpZgogIGVsc2UKICAgIHRocm93ICdJbnZhbGlkIGFyZ3VtZW50IHR5cGUgKGV4cGVjdGVkOiBzdHJpbmcgb3IgZGljdGlvbmFyeSknCiAgZW5kaWYKICByZXR1cm4gb3B0cwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aW5mZXJfcHJvcGVydGllcyhuYW1lLCByZXBvKQogIGxldCByZXBvID0gYTpyZXBvCiAgaWYgczppc19sb2NhbF9wbHVnKHJlcG8pCiAgICByZXR1cm4geyAnZGlyJzogczpkaXJwYXRoKHM6cGx1Z19leHBhbmQocmVwbykpIH0KICBlbHNlCiAgICBpZiByZXBvID1+ICc6JwogICAgICBsZXQgdXJpID0gcmVwbwogICAgZWxzZQogICAgICBpZiByZXBvICF+ICcvJwogICAgICAgIHRocm93IHByaW50ZignSW52YWxpZCBhcmd1bWVudDogJXMgKGltcGxpY2l0IGB2aW0tc2NyaXB0cycnIGV4cGFuc2lvbiBpcyBkZXByZWNhdGVkKScsIHJlcG8pCiAgICAgIGVuZGlmCiAgICAgIGxldCBmbXQgPSBnZXQoZzosICdwbHVnX3VybF9mb3JtYXQnLCAnaHR0cHM6Ly9naXQ6OkBnaXRodWIuY29tLyVzLmdpdCcpCiAgICAgIGxldCB1cmkgPSBwcmludGYoZm10LCByZXBvKQogICAgZW5kaWYKICAgIHJldHVybiB7ICdkaXInOiBzOmRpcnBhdGgoZzpwbHVnX2hvbWUuJy8nLmE6bmFtZSksICd1cmknOiB1cmkgfQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczppbnN0YWxsKGZvcmNlLCBuYW1lcykKICBjYWxsIHM6dXBkYXRlX2ltcGwoMCwgYTpmb3JjZSwgYTpuYW1lcykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZGF0ZShmb3JjZSwgbmFtZXMpCiAgY2FsbCBzOnVwZGF0ZV9pbXBsKDEsIGE6Zm9yY2UsIGE6bmFtZXMpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgcGx1ZyNoZWxwdGFncygpCiAgaWYgIWV4aXN0cygnZzpwbHVncycpCiAgICByZXR1cm4gczplcnIoJ3BsdWcjYmVnaW4gd2FzIG5vdCBjYWxsZWQnKQogIGVuZGlmCiAgZm9yIHNwZWMgaW4gdmFsdWVzKGc6cGx1Z3MpCiAgICBsZXQgZG9jZCA9IGpvaW4oW3M6cnRwKHNwZWMpLCAnZG9jJ10sICcvJykKICAgIGlmIGlzZGlyZWN0b3J5KGRvY2QpCiAgICAgIHNpbGVudCEgZXhlY3V0ZSAnaGVscHRhZ3MnIHM6ZXNjKGRvY2QpCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiAxCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzeW50YXgoKQogIHN5bnRheCBjbGVhcgogIHN5bnRheCByZWdpb24gcGx1ZzEgc3RhcnQ9L1wlMWwvIGVuZD0vXCUybC8gY29udGFpbnM9cGx1Z051bWJlcgogIHN5bnRheCByZWdpb24gcGx1ZzIgc3RhcnQ9L1wlMmwvIGVuZD0vXCUzbC8gY29udGFpbnM9cGx1Z0JyYWNrZXQscGx1Z1gKICBzeW4gbWF0Y2ggcGx1Z051bWJlciAvWzAtOV1cK1swLTkuXSovIGNvbnRhaW5lZAogIHN5biBtYXRjaCBwbHVnQnJhY2tldCAvW1tcXV0vIGNvbnRhaW5lZAogIHN5biBtYXRjaCBwbHVnWCAveC8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdEYXNoIC9eLS8KICBzeW4gbWF0Y2ggcGx1Z1BsdXMgL14rLwogIHN5biBtYXRjaCBwbHVnU3RhciAvXiovCiAgc3luIG1hdGNoIHBsdWdNZXNzYWdlIC9cKF4tIFwpXEA8PS4qLwogIHN5biBtYXRjaCBwbHVnTmFtZSAvXCheLSBcKVxAPD1bXiBdKjovCiAgc3luIG1hdGNoIHBsdWdTaGEgL1wlKDogXClcQDw9WzAtOWEtZl1cezQsfSQvCiAgc3luIG1hdGNoIHBsdWdUYWcgLyh0YWc6IFteKV1cKykvCiAgc3luIG1hdGNoIHBsdWdJbnN0YWxsIC9cKF4rIFwpXEA8PVteOl0qLwogIHN5biBtYXRjaCBwbHVnVXBkYXRlIC9cKF4qIFwpXEA8PVteOl0qLwogIHN5biBtYXRjaCBwbHVnQ29tbWl0IC9eICBcWCpbMC05YS1mXVx7Nyw5fSAuKi8gY29udGFpbnM9cGx1Z1JlbERhdGUscGx1Z0VkZ2UscGx1Z1RhZwogIHN5biBtYXRjaCBwbHVnRWRnZSAvXiAgXFhcKyQvCiAgc3luIG1hdGNoIHBsdWdFZGdlIC9eICBcWCovIGNvbnRhaW5lZCBuZXh0Z3JvdXA9cGx1Z1NoYQogIHN5biBtYXRjaCBwbHVnU2hhIC9bMC05YS1mXVx7Nyw5fS8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdSZWxEYXRlIC8oW14pXSopJC8gY29udGFpbmVkCiAgc3luIG1hdGNoIHBsdWdOb3RMb2FkZWQgLyhub3QgbG9hZGVkKSQvCiAgc3luIG1hdGNoIHBsdWdFcnJvciAvXnguKi8KICBzeW4gcmVnaW9uIHBsdWdEZWxldGVkIHN0YXJ0PS9eXH4gLiovIGVuZD0vXlx6ZVxTLwogIHN5biBtYXRjaCBwbHVnSDIgL14uKjpcbi1cKyQvCiAgc3luIGtleXdvcmQgRnVuY3Rpb24gUGx1Z0luc3RhbGwgUGx1Z1N0YXR1cyBQbHVnVXBkYXRlIFBsdWdDbGVhbgogIGhpIGRlZiBsaW5rIHBsdWcxICAgICAgIFRpdGxlCiAgaGkgZGVmIGxpbmsgcGx1ZzIgICAgICAgUmVwZWF0CiAgaGkgZGVmIGxpbmsgcGx1Z0gyICAgICAgVHlwZQogIGhpIGRlZiBsaW5rIHBsdWdYICAgICAgIEV4Y2VwdGlvbgogIGhpIGRlZiBsaW5rIHBsdWdCcmFja2V0IFN0cnVjdHVyZQogIGhpIGRlZiBsaW5rIHBsdWdOdW1iZXIgIE51bWJlcgoKICBoaSBkZWYgbGluayBwbHVnRGFzaCAgICBTcGVjaWFsCiAgaGkgZGVmIGxpbmsgcGx1Z1BsdXMgICAgQ29uc3RhbnQKICBoaSBkZWYgbGluayBwbHVnU3RhciAgICBCb29sZWFuCgogIGhpIGRlZiBsaW5rIHBsdWdNZXNzYWdlIEZ1bmN0aW9uCiAgaGkgZGVmIGxpbmsgcGx1Z05hbWUgICAgTGFiZWwKICBoaSBkZWYgbGluayBwbHVnSW5zdGFsbCBGdW5jdGlvbgogIGhpIGRlZiBsaW5rIHBsdWdVcGRhdGUgIFR5cGUKCiAgaGkgZGVmIGxpbmsgcGx1Z0Vycm9yICAgRXJyb3IKICBoaSBkZWYgbGluayBwbHVnRGVsZXRlZCBJZ25vcmUKICBoaSBkZWYgbGluayBwbHVnUmVsRGF0ZSBDb21tZW50CiAgaGkgZGVmIGxpbmsgcGx1Z0VkZ2UgICAgUHJlUHJvYwogIGhpIGRlZiBsaW5rIHBsdWdTaGEgICAgIElkZW50aWZpZXIKICBoaSBkZWYgbGluayBwbHVnVGFnICAgICBDb25zdGFudAoKICBoaSBkZWYgbGluayBwbHVnTm90TG9hZGVkIENvbW1lbnQKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxwYWQoc3RyLCBsZW4pCiAgcmV0dXJuIGE6c3RyIC4gcmVwZWF0KCcgJywgYTpsZW4gLSBsZW4oYTpzdHIpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bGluZXMobXNnKQogIHJldHVybiBzcGxpdChhOm1zZywgIltcclxuXSIpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsYXN0bGluZShtc2cpCiAgcmV0dXJuIGdldChzOmxpbmVzKGE6bXNnKSwgLTEsICcnKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bmV3X3dpbmRvdygpCiAgZXhlY3V0ZSBnZXQoZzosICdwbHVnX3dpbmRvdycsICd2ZXJ0aWNhbCB0b3BsZWZ0IG5ldycpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpwbHVnX3dpbmRvd19leGlzdHMoKQogIGxldCBidWZsaXN0ID0gdGFicGFnZWJ1Zmxpc3QoczpwbHVnX3RhYikKICByZXR1cm4gIWVtcHR5KGJ1Zmxpc3QpICYmIGluZGV4KGJ1Zmxpc3QsIHM6cGx1Z19idWYpID49IDAKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN3aXRjaF9pbigpCiAgaWYgIXM6cGx1Z193aW5kb3dfZXhpc3RzKCkKICAgIHJldHVybiAwCiAgZW5kaWYKCiAgaWYgd2luYnVmbnIoMCkgIT0gczpwbHVnX2J1ZgogICAgbGV0IHM6cG9zID0gW3RhYnBhZ2VucigpLCB3aW5ucigpLCB3aW5zYXZldmlldygpXQogICAgZXhlY3V0ZSAnbm9ybWFsIScgczpwbHVnX3RhYi4nZ3QnCiAgICBsZXQgd2lubnIgPSBidWZ3aW5ucihzOnBsdWdfYnVmKQogICAgZXhlY3V0ZSB3aW5uci4nd2luY21kIHcnCiAgICBjYWxsIGFkZChzOnBvcywgd2luc2F2ZXZpZXcoKSkKICBlbHNlCiAgICBsZXQgczpwb3MgPSBbd2luc2F2ZXZpZXcoKV0KICBlbmRpZgoKICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgcmV0dXJuIDEKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN3aXRjaF9vdXQoLi4uKQogIGNhbGwgd2lucmVzdHZpZXcoczpwb3NbLTFdKQogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGlmIGE6MCA+IDAKICAgIGV4ZWN1dGUgYToxCiAgZW5kaWYKCiAgaWYgbGVuKHM6cG9zKSA+IDEKICAgIGV4ZWN1dGUgJ25vcm1hbCEnIHM6cG9zWzBdLidndCcKICAgIGV4ZWN1dGUgczpwb3NbMV0gJ3dpbmNtZCB3JwogICAgY2FsbCB3aW5yZXN0dmlldyhzOnBvc1syXSkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6ZmluaXNoX2JpbmRpbmdzKCkKICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBSICA6Y2FsbCA8U0lEPnJldHJ5KCk8Y3I+CiAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gRCAgOlBsdWdEaWZmPGNyPgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFMgIDpQbHVnU3RhdHVzPGNyPgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFUgIDpjYWxsIDxTSUQ+c3RhdHVzX3VwZGF0ZSgpPGNyPgogIHhub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IFUgIDpjYWxsIDxTSUQ+c3RhdHVzX3VwZGF0ZSgpPGNyPgogIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IF1dIDpzaWxlbnQhIGNhbGwgPFNJRD5zZWN0aW9uKCcnKTxjcj4KICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBbWyA6c2lsZW50ISBjYWxsIDxTSUQ+c2VjdGlvbignYicpPGNyPgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJlcGFyZSguLi4pCiAgaWYgZW1wdHkoczpwbHVnX2dldGN3ZCgpKQogICAgdGhyb3cgJ0ludmFsaWQgY3VycmVudCB3b3JraW5nIGRpcmVjdG9yeS4gQ2Fubm90IHByb2NlZWQuJwogIGVuZGlmCgogIGZvciBldmFyIGluIFsnJEdJVF9ESVInLCAnJEdJVF9XT1JLX1RSRUUnXQogICAgaWYgZXhpc3RzKGV2YXIpCiAgICAgIHRocm93IGV2YXIuJyBkZXRlY3RlZC4gQ2Fubm90IHByb2NlZWQuJwogICAgZW5kaWYKICBlbmRmb3IKCiAgY2FsbCBzOmpvYl9hYm9ydCgpCiAgaWYgczpzd2l0Y2hfaW4oKQogICAgaWYgYjpwbHVnX3ByZXZpZXcgPT0gMQogICAgICBwYwogICAgZW5kaWYKICAgIGVuZXcKICBlbHNlCiAgICBjYWxsIHM6bmV3X3dpbmRvdygpCiAgZW5kaWYKCiAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gcSAgOmlmIGI6cGx1Z19wcmV2aWV3PT0xPGJhcj5wYzxiYXI+ZW5kaWY8YmFyPmJkPGNyPgogIGlmIGE6MCA9PSAwCiAgICBjYWxsIHM6ZmluaXNoX2JpbmRpbmdzKCkKICBlbmRpZgogIGxldCBiOnBsdWdfcHJldmlldyA9IC0xCiAgbGV0IHM6cGx1Z190YWIgPSB0YWJwYWdlbnIoKQogIGxldCBzOnBsdWdfYnVmID0gd2luYnVmbnIoMCkKICBjYWxsIHM6YXNzaWduX25hbWUoKQoKICBmb3IgayBpbiBbJzxjcj4nLCAnTCcsICdvJywgJ1gnLCAnZCcsICdkZCddCiAgICBleGVjdXRlICdzaWxlbnQhIHVubWFwIDxidWZmZXI+JyBrCiAgZW5kZm9yCiAgc2V0bG9jYWwgYnVmdHlwZT1ub2ZpbGUgYnVmaGlkZGVuPXdpcGUgbm9idWZsaXN0ZWQgbm9saXN0IG5vc3dhcGZpbGUgbm93cmFwIGN1cnNvcmxpbmUgbW9kaWZpYWJsZSBub3NwZWxsCiAgaWYgZXhpc3RzKCcrY29sb3Jjb2x1bW4nKQogICAgc2V0bG9jYWwgY29sb3Jjb2x1bW49CiAgZW5kaWYKICBzZXRmIHZpbS1wbHVnCiAgaWYgZXhpc3RzKCdnOnN5bnRheF9vbicpCiAgICBjYWxsIHM6c3ludGF4KCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXNzaWduX25hbWUoKQogICIgQXNzaWduIGJ1ZmZlciBuYW1lCiAgbGV0IHByZWZpeCA9ICdbUGx1Z2luc10nCiAgbGV0IG5hbWUgICA9IHByZWZpeAogIGxldCBpZHggICAgPSAyCiAgd2hpbGUgYnVmZXhpc3RzKG5hbWUpCiAgICBsZXQgbmFtZSA9IHByaW50ZignJXMgKCVzKScsIHByZWZpeCwgaWR4KQogICAgbGV0IGlkeCA9IGlkeCArIDEKICBlbmR3aGlsZQogIHNpbGVudCEgZXhlY3V0ZSAnZicgZm5hbWVlc2NhcGUobmFtZSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNoc2goc3dhcCkKICBsZXQgcHJldiA9IFsmc2hlbGwsICZzaGVsbGNtZGZsYWcsICZzaGVsbHJlZGlyXQogIGlmICFzOmlzX3dpbiAmJiBhOnN3YXAKICAgIHNldCBzaGVsbD1zaCBzaGVsbHJlZGlyPT4lc1wgMj4mMQogIGVuZGlmCiAgcmV0dXJuIHByZXYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmJhbmcoY21kLCAuLi4pCiAgbGV0IGJhdGNoZmlsZSA9ICcnCiAgdHJ5CiAgICBsZXQgW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdID0gczpjaHNoKGE6MCkKICAgICIgRklYTUU6IEVzY2FwaW5nIGlzIGluY29tcGxldGUuIFdlIGNvdWxkIHVzZSBzaGVsbGVzY2FwZSB3aXRoIGV2YWwsCiAgICAiICAgICAgICBidXQgaXQgd29uJ3Qgd29yayBvbiBXaW5kb3dzLgogICAgbGV0IGNtZCA9IGE6MCA/IHM6d2l0aF9jZChhOmNtZCwgYToxKSA6IGE6Y21kCiAgICBpZiBzOmlzX3dpbgogICAgICBsZXQgW2JhdGNoZmlsZSwgY21kXSA9IHM6YmF0Y2hmaWxlKGNtZCkKICAgIGVuZGlmCiAgICBsZXQgZzpfcGx1Z19iYW5nID0gKHM6aXNfd2luICYmIGhhcygnZ3VpX3J1bm5pbmcnKSA/ICdzaWxlbnQgJyA6ICcnKS4nIScuZXNjYXBlKGNtZCwgJyMhJScpCiAgICBleGVjdXRlICJub3JtYWwhIDpleGVjdXRlIGc6X3BsdWdfYmFuZ1w8Y3I+XDxjcj4iCiAgZmluYWxseQogICAgdW5sZXQgZzpfcGx1Z19iYW5nCiAgICBsZXQgWyZzaGVsbCwgJnNoZWxsY21kZmxhZywgJnNoZWxscmVkaXJdID0gW3NoLCBzaGVsbGNtZGZsYWcsIHNocmRdCiAgICBpZiBzOmlzX3dpbiAmJiBmaWxlcmVhZGFibGUoYmF0Y2hmaWxlKQogICAgICBjYWxsIGRlbGV0ZShiYXRjaGZpbGUpCiAgICBlbmRpZgogIGVuZHRyeQogIHJldHVybiB2OnNoZWxsX2Vycm9yID8gJ0V4aXQgc3RhdHVzOiAnIC4gdjpzaGVsbF9lcnJvciA6ICcnCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZWdyZXNzX2JhcigpCiAgbGV0IGJhciA9IHN1YnN0aXR1dGUoZ2V0bGluZSgyKVsxOi0yXSwgJy4qXHpzPScsICd4JywgJycpCiAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCBiYXIsIGxlbihiYXIpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6aXNfdXBkYXRlZChkaXIpCiAgcmV0dXJuICFlbXB0eShzOnN5c3RlbV9jaG9tcCgnZ2l0IGxvZyAtLXByZXR0eT1mb3JtYXQ6IiVoIiAiSEVBRC4uLkhFQURAezF9IicsIGE6ZGlyKSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRvKHB1bGwsIGZvcmNlLCB0b2RvKQogIGZvciBbbmFtZSwgc3BlY10gaW4gaXRlbXMoYTp0b2RvKQogICAgaWYgIWlzZGlyZWN0b3J5KHNwZWMuZGlyKQogICAgICBjb250aW51ZQogICAgZW5kaWYKICAgIGxldCBpbnN0YWxsZWQgPSBoYXNfa2V5KHM6dXBkYXRlLm5ldywgbmFtZSkKICAgIGxldCB1cGRhdGVkID0gaW5zdGFsbGVkID8gMCA6CiAgICAgIFwgKGE6cHVsbCAmJiBpbmRleChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpIDwgMCAmJiBzOmlzX3VwZGF0ZWQoc3BlYy5kaXIpKQogICAgaWYgYTpmb3JjZSB8fCBpbnN0YWxsZWQgfHwgdXBkYXRlZAogICAgICBleGVjdXRlICdjZCcgczplc2Moc3BlYy5kaXIpCiAgICAgIGNhbGwgYXBwZW5kKDMsICctIFBvc3QtdXBkYXRlIGhvb2sgZm9yICcuIG5hbWUgLicgLi4uICcpCiAgICAgIGxldCBlcnJvciA9ICcnCiAgICAgIGxldCB0eXBlID0gdHlwZShzcGVjLmRvKQogICAgICBpZiB0eXBlID09IHM6VFlQRS5zdHJpbmcKICAgICAgICBpZiBzcGVjLmRvWzBdID09ICc6JwogICAgICAgICAgaWYgIWdldChzOmxvYWRlZCwgbmFtZSwgMCkKICAgICAgICAgICAgbGV0IHM6bG9hZGVkW25hbWVdID0gMQogICAgICAgICAgICBjYWxsIHM6cmVvcmdfcnRwKCkKICAgICAgICAgIGVuZGlmCiAgICAgICAgICBjYWxsIHM6bG9hZF9wbHVnaW4oc3BlYykKICAgICAgICAgIHRyeQogICAgICAgICAgICBleGVjdXRlIHNwZWMuZG9bMTpdCiAgICAgICAgICBjYXRjaAogICAgICAgICAgICBsZXQgZXJyb3IgPSB2OmV4Y2VwdGlvbgogICAgICAgICAgZW5kdHJ5CiAgICAgICAgICBpZiAhczpwbHVnX3dpbmRvd19leGlzdHMoKQogICAgICAgICAgICBjZCAtCiAgICAgICAgICAgIHRocm93ICdXYXJuaW5nOiB2aW0tcGx1ZyB3YXMgdGVybWluYXRlZCBieSB0aGUgcG9zdC11cGRhdGUgaG9vayBvZiAnLm5hbWUKICAgICAgICAgIGVuZGlmCiAgICAgICAgZWxzZQogICAgICAgICAgbGV0IGVycm9yID0gczpiYW5nKHNwZWMuZG8pCiAgICAgICAgZW5kaWYKICAgICAgZWxzZWlmIHR5cGUgPT0gczpUWVBFLmZ1bmNyZWYKICAgICAgICB0cnkKICAgICAgICAgIGxldCBzdGF0dXMgPSBpbnN0YWxsZWQgPyAnaW5zdGFsbGVkJyA6ICh1cGRhdGVkID8gJ3VwZGF0ZWQnIDogJ3VuY2hhbmdlZCcpCiAgICAgICAgICBjYWxsIHNwZWMuZG8oeyAnbmFtZSc6IG5hbWUsICdzdGF0dXMnOiBzdGF0dXMsICdmb3JjZSc6IGE6Zm9yY2UgfSkKICAgICAgICBjYXRjaAogICAgICAgICAgbGV0IGVycm9yID0gdjpleGNlcHRpb24KICAgICAgICBlbmR0cnkKICAgICAgZWxzZQogICAgICAgIGxldCBlcnJvciA9ICdJbnZhbGlkIGhvb2sgdHlwZScKICAgICAgZW5kaWYKICAgICAgY2FsbCBzOnN3aXRjaF9pbigpCiAgICAgIGNhbGwgc2V0bGluZSg0LCBlbXB0eShlcnJvcikgPyAoZ2V0bGluZSg0KSAuICdPSycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwgOiAoJ3gnIC4gZ2V0bGluZSg0KVsxOl0gLiBlcnJvcikpCiAgICAgIGlmICFlbXB0eShlcnJvcikKICAgICAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpCiAgICAgICAgY2FsbCBzOnJlZ3Jlc3NfYmFyKCkKICAgICAgZW5kaWYKICAgICAgY2QgLQogICAgZW5kaWYKICBlbmRmb3IKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmhhc2hfbWF0Y2goYSwgYikKICByZXR1cm4gc3RyaWR4KGE6YSwgYTpiKSA9PSAwIHx8IHN0cmlkeChhOmIsIGE6YSkgPT0gMAplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Y2hlY2tvdXQoc3BlYykKICBsZXQgc2hhID0gYTpzcGVjLmNvbW1pdAogIGxldCBvdXRwdXQgPSBzOnN5c3RlbSgnZ2l0IHJldi1wYXJzZSBIRUFEJywgYTpzcGVjLmRpcikKICBpZiAhdjpzaGVsbF9lcnJvciAmJiAhczpoYXNoX21hdGNoKHNoYSwgczpsaW5lcyhvdXRwdXQpWzBdKQogICAgbGV0IG91dHB1dCA9IHM6c3lzdGVtKAogICAgICAgICAgXCAnZ2l0IGZldGNoIC0tZGVwdGggOTk5OTk5ICYmIGdpdCBjaGVja291dCAnLnBsdWcjc2hlbGxlc2NhcGUoc2hhKS4nIC0tJywgYTpzcGVjLmRpcikKICBlbmRpZgogIHJldHVybiBvdXRwdXQKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmZpbmlzaChwdWxsKQogIGxldCBuZXdfZnJvemVuID0gbGVuKGZpbHRlcihrZXlzKHM6dXBkYXRlLm5ldyksICdnOnBsdWdzW3Y6dmFsXS5mcm96ZW4nKSkKICBpZiBuZXdfZnJvemVuCiAgICBsZXQgcyA9IG5ld19mcm96ZW4gPiAxID8gJ3MnIDogJycKICAgIGNhbGwgYXBwZW5kKDMsIHByaW50ZignLSBJbnN0YWxsZWQgJWQgZnJvemVuIHBsdWdpbiVzJywgbmV3X2Zyb3plbiwgcykpCiAgZW5kaWYKICBjYWxsIGFwcGVuZCgzLCAnLSBGaW5pc2hpbmcgLi4uICcpIHwgNAogIHJlZHJhdwogIGNhbGwgcGx1ZyNoZWxwdGFncygpCiAgY2FsbCBwbHVnI2VuZCgpCiAgY2FsbCBzZXRsaW5lKDQsIGdldGxpbmUoNCkgLiAnRG9uZSEnKQogIHJlZHJhdwogIGxldCBtc2dzID0gW10KICBpZiAhZW1wdHkoczp1cGRhdGUuZXJyb3JzKQogICAgY2FsbCBhZGQobXNncywgIlByZXNzICdSJyB0byByZXRyeS4iKQogIGVuZGlmCiAgaWYgYTpwdWxsICYmIGxlbihzOnVwZGF0ZS5uZXcpIDwgbGVuKGZpbHRlcihnZXRsaW5lKDUsICckJyksCiAgICAgICAgICAgICAgICBcICJ2OnZhbCA9fiAnXi0gJyAmJiB2OnZhbCAhfiMgJ0FscmVhZHkgdXAudG8uZGF0ZSciKSkKICAgIGNhbGwgYWRkKG1zZ3MsICJQcmVzcyAnRCcgdG8gc2VlIHRoZSB1cGRhdGVkIGNoYW5nZXMuIikKICBlbmRpZgogIGVjaG8gam9pbihtc2dzLCAnICcpCiAgY2FsbCBzOmZpbmlzaF9iaW5kaW5ncygpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZXRyeSgpCiAgaWYgZW1wdHkoczp1cGRhdGUuZXJyb3JzKQogICAgcmV0dXJuCiAgZW5kaWYKICBlY2hvCiAgY2FsbCBzOnVwZGF0ZV9pbXBsKHM6dXBkYXRlLnB1bGwsIHM6dXBkYXRlLmZvcmNlLAogICAgICAgIFwgZXh0ZW5kKGNvcHkoczp1cGRhdGUuZXJyb3JzKSwgW3M6dXBkYXRlLnRocmVhZHNdKSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmlzX21hbmFnZWQobmFtZSkKICByZXR1cm4gaGFzX2tleShnOnBsdWdzW2E6bmFtZV0sICd1cmknKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6bmFtZXMoLi4uKQogIHJldHVybiBzb3J0KGZpbHRlcihrZXlzKGc6cGx1Z3MpLCAnc3RyaWR4KHY6dmFsLCBhOjEpID09IDAgJiYgczppc19tYW5hZ2VkKHY6dmFsKScpKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Y2hlY2tfcnVieSgpCiAgc2lsZW50ISBydWJ5IHJlcXVpcmUgJ3RocmVhZCc7IFZJTTo6Y29tbWFuZCgibGV0IGc6cGx1Z19ydWJ5ID0gJyN7UlVCWV9WRVJTSU9OfSciKQogIGlmICFleGlzdHMoJ2c6cGx1Z19ydWJ5JykKICAgIHJlZHJhdyEKICAgIHJldHVybiBzOndhcm4oJ2VjaG9tJywgJ1dhcm5pbmc6IFJ1YnkgaW50ZXJmYWNlIGlzIGJyb2tlbicpCiAgZW5kaWYKICBsZXQgcnVieV92ZXJzaW9uID0gc3BsaXQoZzpwbHVnX3J1YnksICdcLicpCiAgdW5sZXQgZzpwbHVnX3J1YnkKICByZXR1cm4gczp2ZXJzaW9uX3JlcXVpcmVtZW50KHJ1YnlfdmVyc2lvbiwgWzEsIDgsIDddKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBkYXRlX2ltcGwocHVsbCwgZm9yY2UsIGFyZ3MpIGFib3J0CiAgbGV0IHN5bmMgPSBpbmRleChhOmFyZ3MsICctLXN5bmMnKSA+PSAwIHx8IGhhcygndmltX3N0YXJ0aW5nJykKICBsZXQgYXJncyA9IGZpbHRlcihjb3B5KGE6YXJncyksICd2OnZhbCAhPSAiLS1zeW5jIicpCiAgbGV0IHRocmVhZHMgPSAobGVuKGFyZ3MpID4gMCAmJiBhcmdzWy0xXSA9fiAnXlsxLTldWzAtOV0qJCcpID8KICAgICAgICAgICAgICAgICAgXCByZW1vdmUoYXJncywgLTEpIDogZ2V0KGc6LCAncGx1Z190aHJlYWRzJywgMTYpCgogIGxldCBtYW5hZ2VkID0gZmlsdGVyKGNvcHkoZzpwbHVncyksICdzOmlzX21hbmFnZWQodjprZXkpJykKICBsZXQgdG9kbyA9IGVtcHR5KGFyZ3MpID8gZmlsdGVyKG1hbmFnZWQsICchdjp2YWwuZnJvemVuIHx8ICFpc2RpcmVjdG9yeSh2OnZhbC5kaXIpJykgOgogICAgICAgICAgICAgICAgICAgICAgICAgXCBmaWx0ZXIobWFuYWdlZCwgJ2luZGV4KGFyZ3MsIHY6a2V5KSA+PSAwJykKCiAgaWYgZW1wdHkodG9kbykKICAgIHJldHVybiBzOndhcm4oJ2VjaG8nLCAnTm8gcGx1Z2luIHRvICcuIChhOnB1bGwgPyAndXBkYXRlJyA6ICdpbnN0YWxsJykpCiAgZW5kaWYKCiAgaWYgIXM6aXNfd2luICYmIHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoMiwgMykKICAgIGxldCBzOmdpdF90ZXJtaW5hbF9wcm9tcHQgPSBleGlzdHMoJyRHSVRfVEVSTUlOQUxfUFJPTVBUJykgPyAkR0lUX1RFUk1JTkFMX1BST01QVCA6ICcnCiAgICBsZXQgJEdJVF9URVJNSU5BTF9QUk9NUFQgPSAwCiAgICBmb3IgcGx1ZyBpbiB2YWx1ZXModG9kbykKICAgICAgbGV0IHBsdWcudXJpID0gc3Vic3RpdHV0ZShwbHVnLnVyaSwKICAgICAgICAgICAgXCAnXmh0dHBzOi8vZ2l0OjpAZ2l0aHViXC5jb20nLCAnaHR0cHM6Ly9naXRodWIuY29tJywgJycpCiAgICBlbmRmb3IKICBlbmRpZgoKICBpZiAhaXNkaXJlY3RvcnkoZzpwbHVnX2hvbWUpCiAgICB0cnkKICAgICAgY2FsbCBta2RpcihnOnBsdWdfaG9tZSwgJ3AnKQogICAgY2F0Y2gKICAgICAgcmV0dXJuIHM6ZXJyKHByaW50ZignSW52YWxpZCBwbHVnIGRpcmVjdG9yeTogJXMuICcuCiAgICAgICAgICAgICAgXCAnVHJ5IHRvIGNhbGwgcGx1ZyNiZWdpbiB3aXRoIGEgdmFsaWQgZGlyZWN0b3J5JywgZzpwbHVnX2hvbWUpKQogICAgZW5kdHJ5CiAgZW5kaWYKCiAgaWYgaGFzKCdudmltJykgJiYgIWV4aXN0cygnKmpvYndhaXQnKSAmJiB0aHJlYWRzID4gMQogICAgY2FsbCBzOndhcm4oJ2VjaG9tJywgJ1t2aW0tcGx1Z10gVXBkYXRlIE5lb3ZpbSBmb3IgcGFyYWxsZWwgaW5zdGFsbGVyJykKICBlbmRpZgoKICBsZXQgdXNlX2pvYiA9IHM6bnZpbSB8fCBzOnZpbTgKICBsZXQgcHl0aG9uID0gKGhhcygncHl0aG9uJykgfHwgaGFzKCdweXRob24zJykpICYmICF1c2Vfam9iCiAgbGV0IHJ1YnkgPSBoYXMoJ3J1YnknKSAmJiAhdXNlX2pvYiAmJiAodjp2ZXJzaW9uID49IDcwMyB8fCB2OnZlcnNpb24gPT0gNzAyICYmIGhhcygncGF0Y2gzNzQnKSkgJiYgIShzOmlzX3dpbiAmJiBoYXMoJ2d1aV9ydW5uaW5nJykpICYmIHRocmVhZHMgPiAxICYmIHM6Y2hlY2tfcnVieSgpCgogIGxldCBzOnVwZGF0ZSA9IHsKICAgIFwgJ3N0YXJ0JzogICByZWx0aW1lKCksCiAgICBcICdhbGwnOiAgICAgdG9kbywKICAgIFwgJ3RvZG8nOiAgICBjb3B5KHRvZG8pLAogICAgXCAnZXJyb3JzJzogIFtdLAogICAgXCAncHVsbCc6ICAgIGE6cHVsbCwKICAgIFwgJ2ZvcmNlJzogICBhOmZvcmNlLAogICAgXCAnbmV3JzogICAgIHt9LAogICAgXCAndGhyZWFkcyc6IChweXRob24gfHwgcnVieSB8fCB1c2Vfam9iKSA/IG1pbihbbGVuKHRvZG8pLCB0aHJlYWRzXSkgOiAxLAogICAgXCAnYmFyJzogICAgICcnLAogICAgXCAnZmluJzogICAgIDAKICBcIH0KCiAgY2FsbCBzOnByZXBhcmUoMSkKICBjYWxsIGFwcGVuZCgwLCBbJycsICcnXSkKICBub3JtYWwhIDJHCiAgc2lsZW50ISByZWRyYXcKCiAgbGV0IHM6Y2xvbmVfb3B0ID0gZ2V0KGc6LCAncGx1Z19zaGFsbG93JywgMSkgPwogICAgICAgIFwgJy0tZGVwdGggMScgLiAoczpnaXRfdmVyc2lvbl9yZXF1aXJlbWVudCgxLCA3LCAxMCkgPyAnIC0tbm8tc2luZ2xlLWJyYW5jaCcgOiAnJykgOiAnJwoKICBpZiBoYXMoJ3dpbjMydW5peCcpIHx8IGhhcygnd3NsJykKICAgIGxldCBzOmNsb25lX29wdCAuPSAnIC1jIGNvcmUuZW9sPWxmIC1jIGNvcmUuYXV0b2NybGY9aW5wdXQnCiAgZW5kaWYKCiAgbGV0IHM6c3VibW9kdWxlX29wdCA9IHM6Z2l0X3ZlcnNpb25fcmVxdWlyZW1lbnQoMiwgOCkgPyAnIC0tam9icz0nLnRocmVhZHMgOiAnJwoKICAiIFB5dGhvbiB2ZXJzaW9uIHJlcXVpcmVtZW50ICg+PSAyLjcpCiAgaWYgcHl0aG9uICYmICFoYXMoJ3B5dGhvbjMnKSAmJiAhcnVieSAmJiAhdXNlX2pvYiAmJiBzOnVwZGF0ZS50aHJlYWRzID4gMQogICAgcmVkaXIgPT4gcHl2CiAgICBzaWxlbnQgcHl0aG9uIGltcG9ydCBwbGF0Zm9ybTsgcHJpbnQgcGxhdGZvcm0ucHl0aG9uX3ZlcnNpb24oKQogICAgcmVkaXIgRU5ECiAgICBsZXQgcHl0aG9uID0gczp2ZXJzaW9uX3JlcXVpcmVtZW50KAogICAgICAgICAgXCBtYXAoc3BsaXQoc3BsaXQocHl2KVswXSwgJ1wuJyksICdzdHIybnIodjp2YWwpJyksIFsyLCA2XSkKICBlbmRpZgoKICBpZiAocHl0aG9uIHx8IHJ1YnkpICYmIHM6dXBkYXRlLnRocmVhZHMgPiAxCiAgICB0cnkKICAgICAgbGV0IGltZCA9ICZpbWQKICAgICAgaWYgczptYWNfZ3VpCiAgICAgICAgc2V0IG5vaW1kCiAgICAgIGVuZGlmCiAgICAgIGlmIHJ1YnkKICAgICAgICBjYWxsIHM6dXBkYXRlX3J1YnkoKQogICAgICBlbHNlCiAgICAgICAgY2FsbCBzOnVwZGF0ZV9weXRob24oKQogICAgICBlbmRpZgogICAgY2F0Y2gKICAgICAgbGV0IGxpbmVzID0gZ2V0bGluZSg0LCAnJCcpCiAgICAgIGxldCBwcmludGVkID0ge30KICAgICAgc2lsZW50ISA0LCRkIF8KICAgICAgZm9yIGxpbmUgaW4gbGluZXMKICAgICAgICBsZXQgbmFtZSA9IHM6ZXh0cmFjdF9uYW1lKGxpbmUsICcuJywgJycpCiAgICAgICAgaWYgZW1wdHkobmFtZSkgfHwgIWhhc19rZXkocHJpbnRlZCwgbmFtZSkKICAgICAgICAgIGNhbGwgYXBwZW5kKCckJywgbGluZSkKICAgICAgICAgIGlmICFlbXB0eShuYW1lKQogICAgICAgICAgICBsZXQgcHJpbnRlZFtuYW1lXSA9IDEKICAgICAgICAgICAgaWYgbGluZVswXSA9PSAneCcgJiYgaW5kZXgoczp1cGRhdGUuZXJyb3JzLCBuYW1lKSA8IDAKICAgICAgICAgICAgICBjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsIG5hbWUpCiAgICAgICAgICAgIGVuZAogICAgICAgICAgZW5kaWYKICAgICAgICBlbmRpZgogICAgICBlbmRmb3IKICAgIGZpbmFsbHkKICAgICAgbGV0ICZpbWQgPSBpbWQKICAgICAgY2FsbCBzOnVwZGF0ZV9maW5pc2goKQogICAgZW5kdHJ5CiAgZWxzZQogICAgY2FsbCBzOnVwZGF0ZV92aW0oKQogICAgd2hpbGUgdXNlX2pvYiAmJiBzeW5jCiAgICAgIHNsZWVwIDEwMG0KICAgICAgaWYgczp1cGRhdGUuZmluCiAgICAgICAgYnJlYWsKICAgICAgZW5kaWYKICAgIGVuZHdoaWxlCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZzQobmFtZSwgbXNnKQogIGNhbGwgc2V0bGluZSg0LCBwcmludGYoJy0gJXMgKCVzKScsIGE6bXNnLCBhOm5hbWUpKQogIHJlZHJhdwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBkYXRlX2ZpbmlzaCgpCiAgaWYgZXhpc3RzKCdzOmdpdF90ZXJtaW5hbF9wcm9tcHQnKQogICAgbGV0ICRHSVRfVEVSTUlOQUxfUFJPTVBUID0gczpnaXRfdGVybWluYWxfcHJvbXB0CiAgZW5kaWYKICBpZiBzOnN3aXRjaF9pbigpCiAgICBjYWxsIGFwcGVuZCgzLCAnLSBVcGRhdGluZyAuLi4nKSB8IDQKICAgIGZvciBbbmFtZSwgc3BlY10gaW4gaXRlbXMoZmlsdGVyKGNvcHkoczp1cGRhdGUuYWxsKSwgJ2luZGV4KHM6dXBkYXRlLmVycm9ycywgdjprZXkpIDwgMCAmJiAoczp1cGRhdGUuZm9yY2UgfHwgczp1cGRhdGUucHVsbCB8fCBoYXNfa2V5KHM6dXBkYXRlLm5ldywgdjprZXkpKScpKQogICAgICBsZXQgW3BvcywgX10gPSBzOmxvZ3BvcyhuYW1lKQogICAgICBpZiAhcG9zCiAgICAgICAgY29udGludWUKICAgICAgZW5kaWYKICAgICAgaWYgaGFzX2tleShzcGVjLCAnY29tbWl0JykKICAgICAgICBjYWxsIHM6bG9nNChuYW1lLCAnQ2hlY2tpbmcgb3V0ICcuc3BlYy5jb21taXQpCiAgICAgICAgbGV0IG91dCA9IHM6Y2hlY2tvdXQoc3BlYykKICAgICAgZWxzZWlmIGhhc19rZXkoc3BlYywgJ3RhZycpCiAgICAgICAgbGV0IHRhZyA9IHNwZWMudGFnCiAgICAgICAgaWYgdGFnID1+ICdcKicKICAgICAgICAgIGxldCB0YWdzID0gczpsaW5lcyhzOnN5c3RlbSgnZ2l0IHRhZyAtLWxpc3QgJy5wbHVnI3NoZWxsZXNjYXBlKHRhZykuJyAtLXNvcnQgLXZlcnNpb246cmVmbmFtZSAyPiYxJywgc3BlYy5kaXIpKQogICAgICAgICAgaWYgIXY6c2hlbGxfZXJyb3IgJiYgIWVtcHR5KHRhZ3MpCiAgICAgICAgICAgIGxldCB0YWcgPSB0YWdzWzBdCiAgICAgICAgICAgIGNhbGwgczpsb2c0KG5hbWUsIHByaW50ZignTGF0ZXN0IHRhZyBmb3IgJXMgLT4gJXMnLCBzcGVjLnRhZywgdGFnKSkKICAgICAgICAgICAgY2FsbCBhcHBlbmQoMywgJycpCiAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGlmCiAgICAgICAgY2FsbCBzOmxvZzQobmFtZSwgJ0NoZWNraW5nIG91dCAnLnRhZykKICAgICAgICBsZXQgb3V0ID0gczpzeXN0ZW0oJ2dpdCBjaGVja291dCAtcSAnLnBsdWcjc2hlbGxlc2NhcGUodGFnKS4nIC0tIDI+JjEnLCBzcGVjLmRpcikKICAgICAgZWxzZQogICAgICAgIGxldCBicmFuY2ggPSBnZXQoc3BlYywgJ2JyYW5jaCcsICdtYXN0ZXInKQogICAgICAgIGNhbGwgczpsb2c0KG5hbWUsICdNZXJnaW5nIG9yaWdpbi8nLnM6ZXNjKGJyYW5jaCkpCiAgICAgICAgbGV0IG91dCA9IHM6c3lzdGVtKCdnaXQgY2hlY2tvdXQgLXEgJy5wbHVnI3NoZWxsZXNjYXBlKGJyYW5jaCkuJyAtLSAyPiYxJwogICAgICAgICAgICAgIFwuIChoYXNfa2V5KHM6dXBkYXRlLm5ldywgbmFtZSkgPyAnJyA6ICgnJiYgZ2l0IG1lcmdlIC0tZmYtb25seSAnLnBsdWcjc2hlbGxlc2NhcGUoJ29yaWdpbi8nLmJyYW5jaCkuJyAyPiYxJykpLCBzcGVjLmRpcikKICAgICAgZW5kaWYKICAgICAgaWYgIXY6c2hlbGxfZXJyb3IgJiYgZmlsZXJlYWRhYmxlKHNwZWMuZGlyLicvLmdpdG1vZHVsZXMnKSAmJgogICAgICAgICAgICBcIChzOnVwZGF0ZS5mb3JjZSB8fCBoYXNfa2V5KHM6dXBkYXRlLm5ldywgbmFtZSkgfHwgczppc191cGRhdGVkKHNwZWMuZGlyKSkKICAgICAgICBjYWxsIHM6bG9nNChuYW1lLCAnVXBkYXRpbmcgc3VibW9kdWxlcy4gVGhpcyBtYXkgdGFrZSBhIHdoaWxlLicpCiAgICAgICAgbGV0IG91dCAuPSBzOmJhbmcoJ2dpdCBzdWJtb2R1bGUgdXBkYXRlIC0taW5pdCAtLXJlY3Vyc2l2ZScuczpzdWJtb2R1bGVfb3B0LicgMj4mMScsIHNwZWMuZGlyKQogICAgICBlbmRpZgogICAgICBsZXQgbXNnID0gczpmb3JtYXRfbWVzc2FnZSh2OnNoZWxsX2Vycm9yID8gJ3gnOiAnLScsIG5hbWUsIG91dCkKICAgICAgaWYgdjpzaGVsbF9lcnJvcgogICAgICAgIGNhbGwgYWRkKHM6dXBkYXRlLmVycm9ycywgbmFtZSkKICAgICAgICBjYWxsIHM6cmVncmVzc19iYXIoKQogICAgICAgIHNpbGVudCBleGVjdXRlIHBvcyAnZCBfJwogICAgICAgIGNhbGwgYXBwZW5kKDQsIG1zZykgfCA0CiAgICAgIGVsc2VpZiAhZW1wdHkob3V0KQogICAgICAgIGNhbGwgc2V0bGluZShwb3MsIG1zZ1swXSkKICAgICAgZW5kaWYKICAgICAgcmVkcmF3CiAgICBlbmRmb3IKICAgIHNpbGVudCA0IGQgXwogICAgdHJ5CiAgICAgIGNhbGwgczpkbyhzOnVwZGF0ZS5wdWxsLCBzOnVwZGF0ZS5mb3JjZSwgZmlsdGVyKGNvcHkoczp1cGRhdGUuYWxsKSwgJ2luZGV4KHM6dXBkYXRlLmVycm9ycywgdjprZXkpIDwgMCAmJiBoYXNfa2V5KHY6dmFsLCAiZG8iKScpKQogICAgY2F0Y2gKICAgICAgY2FsbCBzOndhcm4oJ2VjaG9tJywgdjpleGNlcHRpb24pCiAgICAgIGNhbGwgczp3YXJuKCdlY2hvJywgJycpCiAgICAgIHJldHVybgogICAgZW5kdHJ5CiAgICBjYWxsIHM6ZmluaXNoKHM6dXBkYXRlLnB1bGwpCiAgICBjYWxsIHNldGxpbmUoMSwgJ1VwZGF0ZWQuIEVsYXBzZWQgdGltZTogJyAuIHNwbGl0KHJlbHRpbWVzdHIocmVsdGltZShzOnVwZGF0ZS5zdGFydCkpKVswXSAuICcgc2VjLicpCiAgICBjYWxsIHM6c3dpdGNoX291dCgnbm9ybWFsISBnZycpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmpvYl9hYm9ydCgpCiAgaWYgKCFzOm52aW0gJiYgIXM6dmltOCkgfHwgIWV4aXN0cygnczpqb2JzJykKICAgIHJldHVybgogIGVuZGlmCgogIGZvciBbbmFtZSwgal0gaW4gaXRlbXMoczpqb2JzKQogICAgaWYgczpudmltCiAgICAgIHNpbGVudCEgY2FsbCBqb2JzdG9wKGouam9iaWQpCiAgICBlbHNlaWYgczp2aW04CiAgICAgIHNpbGVudCEgY2FsbCBqb2Jfc3RvcChqLmpvYmlkKQogICAgZW5kaWYKICAgIGlmIGoubmV3CiAgICAgIGNhbGwgczpybV9yZihnOnBsdWdzW25hbWVdLmRpcikKICAgIGVuZGlmCiAgZW5kZm9yCiAgbGV0IHM6am9icyA9IHt9CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpsYXN0X25vbl9lbXB0eV9saW5lKGxpbmVzKQogIGxldCBsZW4gPSBsZW4oYTpsaW5lcykKICBmb3IgaWR4IGluIHJhbmdlKGxlbikKICAgIGxldCBsaW5lID0gYTpsaW5lc1tsZW4taWR4LTFdCiAgICBpZiAhZW1wdHkobGluZSkKICAgICAgcmV0dXJuIGxpbmUKICAgIGVuZGlmCiAgZW5kZm9yCiAgcmV0dXJuICcnCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpqb2Jfb3V0X2NiKHNlbGYsIGRhdGEpIGFib3J0CiAgbGV0IHNlbGYgPSBhOnNlbGYKICBsZXQgZGF0YSA9IHJlbW92ZShzZWxmLmxpbmVzLCAtMSkgLiBhOmRhdGEKICBsZXQgbGluZXMgPSBtYXAoc3BsaXQoZGF0YSwgIlxuIiwgMSksICdzcGxpdCh2OnZhbCwgIlxyIiwgMSlbLTFdJykKICBjYWxsIGV4dGVuZChzZWxmLmxpbmVzLCBsaW5lcykKICAiIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIGJ1ZmZlciB1cGRhdGVzCiAgbGV0IHNlbGYudGljayA9IGdldChzZWxmLCAndGljaycsIC0xKSArIDEKICBpZiAhc2VsZi5ydW5uaW5nIHx8IHNlbGYudGljayAlIGxlbihzOmpvYnMpID09IDAKICAgIGxldCBidWxsZXQgPSBzZWxmLnJ1bm5pbmcgPyAoc2VsZi5uZXcgPyAnKycgOiAnKicpIDogKHNlbGYuZXJyb3IgPyAneCcgOiAnLScpCiAgICBsZXQgcmVzdWx0ID0gc2VsZi5lcnJvciA/IGpvaW4oc2VsZi5saW5lcywgIlxuIikgOiBzOmxhc3Rfbm9uX2VtcHR5X2xpbmUoc2VsZi5saW5lcykKICAgIGNhbGwgczpsb2coYnVsbGV0LCBzZWxmLm5hbWUsIHJlc3VsdCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6am9iX2V4aXRfY2Ioc2VsZiwgZGF0YSkgYWJvcnQKICBsZXQgYTpzZWxmLnJ1bm5pbmcgPSAwCiAgbGV0IGE6c2VsZi5lcnJvciA9IGE6ZGF0YSAhPSAwCiAgY2FsbCBzOnJlYXAoYTpzZWxmLm5hbWUpCiAgY2FsbCBzOnRpY2soKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6am9iX2NiKGZuLCBqb2IsIGNoLCBkYXRhKQogIGlmICFzOnBsdWdfd2luZG93X2V4aXN0cygpICIgcGx1ZyB3aW5kb3cgY2xvc2VkCiAgICByZXR1cm4gczpqb2JfYWJvcnQoKQogIGVuZGlmCiAgY2FsbCBjYWxsKGE6Zm4sIFthOmpvYiwgYTpkYXRhXSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOm52aW1fY2Ioam9iX2lkLCBkYXRhLCBldmVudCkgZGljdCBhYm9ydAogIHJldHVybiBhOmV2ZW50ID09ICdzdGRvdXQnID8KICAgIFwgczpqb2JfY2IoJ3M6am9iX291dF9jYicsICBzZWxmLCAwLCBqb2luKGE6ZGF0YSwgIlxuIikpIDoKICAgIFwgczpqb2JfY2IoJ3M6am9iX2V4aXRfY2InLCBzZWxmLCAwLCBhOmRhdGEpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzcGF3bihuYW1lLCBjbWQsIG9wdHMpCiAgbGV0IGpvYiA9IHsgJ25hbWUnOiBhOm5hbWUsICdydW5uaW5nJzogMSwgJ2Vycm9yJzogMCwgJ2xpbmVzJzogWycnXSwKICAgICAgICAgICAgXCAnbmV3JzogZ2V0KGE6b3B0cywgJ25ldycsIDApIH0KICBsZXQgczpqb2JzW2E6bmFtZV0gPSBqb2IKICBsZXQgY21kID0gaGFzX2tleShhOm9wdHMsICdkaXInKSA/IHM6d2l0aF9jZChhOmNtZCwgYTpvcHRzLmRpciwgMCkgOiBhOmNtZAogIGxldCBhcmd2ID0gczppc193aW4gPyBbJ2NtZCcsICcvcycsICcvYycsICciJy5jbWQuJyInXSA6IFsnc2gnLCAnLWMnLCBjbWRdCgogIGlmIHM6bnZpbQogICAgY2FsbCBleHRlbmQoam9iLCB7CiAgICBcICdvbl9zdGRvdXQnOiBmdW5jdGlvbignczpudmltX2NiJyksCiAgICBcICdvbl9leGl0JzogICBmdW5jdGlvbignczpudmltX2NiJyksCiAgICBcIH0pCiAgICBsZXQgamlkID0gczpwbHVnX2NhbGwoJ2pvYnN0YXJ0JywgYXJndiwgam9iKQogICAgaWYgamlkID4gMAogICAgICBsZXQgam9iLmpvYmlkID0gamlkCiAgICBlbHNlCiAgICAgIGxldCBqb2IucnVubmluZyA9IDAKICAgICAgbGV0IGpvYi5lcnJvciAgID0gMQogICAgICBsZXQgam9iLmxpbmVzICAgPSBbamlkIDwgMCA/IGFyZ3ZbMF0uJyBpcyBub3QgZXhlY3V0YWJsZScgOgogICAgICAgICAgICBcICdJbnZhbGlkIGFyZ3VtZW50cyAob3Igam9iIHRhYmxlIGlzIGZ1bGwpJ10KICAgIGVuZGlmCiAgZWxzZWlmIHM6dmltOAogICAgbGV0IGppZCA9IGpvYl9zdGFydChzOmlzX3dpbiA/IGpvaW4oYXJndiwgJyAnKSA6IGFyZ3YsIHsKICAgIFwgJ291dF9jYic6ICAgZnVuY3Rpb24oJ3M6am9iX2NiJywgWydzOmpvYl9vdXRfY2InLCAgam9iXSksCiAgICBcICdleGl0X2NiJzogIGZ1bmN0aW9uKCdzOmpvYl9jYicsIFsnczpqb2JfZXhpdF9jYicsIGpvYl0pLAogICAgXCAnb3V0X21vZGUnOiAncmF3JwogICAgXH0pCiAgICBpZiBqb2Jfc3RhdHVzKGppZCkgPT0gJ3J1bicKICAgICAgbGV0IGpvYi5qb2JpZCA9IGppZAogICAgZWxzZQogICAgICBsZXQgam9iLnJ1bm5pbmcgPSAwCiAgICAgIGxldCBqb2IuZXJyb3IgICA9IDEKICAgICAgbGV0IGpvYi5saW5lcyAgID0gWydGYWlsZWQgdG8gc3RhcnQgam9iJ10KICAgIGVuZGlmCiAgZWxzZQogICAgbGV0IGpvYi5saW5lcyA9IHM6bGluZXMoY2FsbCgnczpzeXN0ZW0nLCBbY21kXSkpCiAgICBsZXQgam9iLmVycm9yID0gdjpzaGVsbF9lcnJvciAhPSAwCiAgICBsZXQgam9iLnJ1bm5pbmcgPSAwCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnJlYXAobmFtZSkKICBsZXQgam9iID0gczpqb2JzW2E6bmFtZV0KICBpZiBqb2IuZXJyb3IKICAgIGNhbGwgYWRkKHM6dXBkYXRlLmVycm9ycywgYTpuYW1lKQogIGVsc2VpZiBnZXQoam9iLCAnbmV3JywgMCkKICAgIGxldCBzOnVwZGF0ZS5uZXdbYTpuYW1lXSA9IDEKICBlbmRpZgogIGxldCBzOnVwZGF0ZS5iYXIgLj0gam9iLmVycm9yID8gJ3gnIDogJz0nCgogIGxldCBidWxsZXQgPSBqb2IuZXJyb3IgPyAneCcgOiAnLScKICBsZXQgcmVzdWx0ID0gam9iLmVycm9yID8gam9pbihqb2IubGluZXMsICJcbiIpIDogczpsYXN0X25vbl9lbXB0eV9saW5lKGpvYi5saW5lcykKICBjYWxsIHM6bG9nKGJ1bGxldCwgYTpuYW1lLCBlbXB0eShyZXN1bHQpID8gJ09LJyA6IHJlc3VsdCkKICBjYWxsIHM6YmFyKCkKCiAgY2FsbCByZW1vdmUoczpqb2JzLCBhOm5hbWUpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpiYXIoKQogIGlmIHM6c3dpdGNoX2luKCkKICAgIGxldCB0b3RhbCA9IGxlbihzOnVwZGF0ZS5hbGwpCiAgICBjYWxsIHNldGxpbmUoMSwgKHM6dXBkYXRlLnB1bGwgPyAnVXBkYXRpbmcnIDogJ0luc3RhbGxpbmcnKS4KICAgICAgICAgIFwgJyBwbHVnaW5zICgnLmxlbihzOnVwZGF0ZS5iYXIpLicvJy50b3RhbC4nKScpCiAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIHM6dXBkYXRlLmJhciwgdG90YWwpCiAgICBjYWxsIHM6c3dpdGNoX291dCgpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZ3BvcyhuYW1lKQogIGxldCBtYXggPSBsaW5lKCckJykKICBmb3IgaSBpbiByYW5nZSg0LCBtYXggPiA0ID8gbWF4IDogNCkKICAgIGlmIGdldGxpbmUoaSkgPX4jICdeWy0reCpdICcuYTpuYW1lLic6JwogICAgICBmb3IgaiBpbiByYW5nZShpICsgMSwgbWF4ID4gNSA/IG1heCA6IDUpCiAgICAgICAgaWYgZ2V0bGluZShqKSAhfiAnXiAnCiAgICAgICAgICByZXR1cm4gW2ksIGogLSAxXQogICAgICAgIGVuZGlmCiAgICAgIGVuZGZvcgogICAgICByZXR1cm4gW2ksIGldCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiBbMCwgMF0KZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmxvZyhidWxsZXQsIG5hbWUsIGxpbmVzKQogIGlmIHM6c3dpdGNoX2luKCkKICAgIGxldCBbYiwgZV0gPSBzOmxvZ3BvcyhhOm5hbWUpCiAgICBpZiBiID4gMAogICAgICBzaWxlbnQgZXhlY3V0ZSBwcmludGYoJyVkLCVkIGQgXycsIGIsIGUpCiAgICAgIGlmIGIgPiB3aW5oZWlnaHQoJy4nKQogICAgICAgIGxldCBiID0gNAogICAgICBlbmRpZgogICAgZWxzZQogICAgICBsZXQgYiA9IDQKICAgIGVuZGlmCiAgICAiIEZJWE1FIEZvciBzb21lIHJlYXNvbiwgbm9tb2RpZmlhYmxlIGlzIHNldCBhZnRlciA6ZCBpbiB2aW04CiAgICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgICBjYWxsIGFwcGVuZChiIC0gMSwgczpmb3JtYXRfbWVzc2FnZShhOmJ1bGxldCwgYTpuYW1lLCBhOmxpbmVzKSkKICAgIGNhbGwgczpzd2l0Y2hfb3V0KCkKICBlbmRpZgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6dXBkYXRlX3ZpbSgpCiAgbGV0IHM6am9icyA9IHt9CgogIGNhbGwgczpiYXIoKQogIGNhbGwgczp0aWNrKCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnRpY2soKQogIGxldCBwdWxsID0gczp1cGRhdGUucHVsbAogIGxldCBwcm9nID0gczpwcm9ncmVzc19vcHQoczpudmltIHx8IHM6dmltOCkKd2hpbGUgMSAiIFdpdGhvdXQgVENPLCBWaW0gc3RhY2sgaXMgYm91bmQgdG8gZXhwbG9kZQogIGlmIGVtcHR5KHM6dXBkYXRlLnRvZG8pCiAgICBpZiBlbXB0eShzOmpvYnMpICYmICFzOnVwZGF0ZS5maW4KICAgICAgY2FsbCBzOnVwZGF0ZV9maW5pc2goKQogICAgICBsZXQgczp1cGRhdGUuZmluID0gMQogICAgZW5kaWYKICAgIHJldHVybgogIGVuZGlmCgogIGxldCBuYW1lID0ga2V5cyhzOnVwZGF0ZS50b2RvKVswXQogIGxldCBzcGVjID0gcmVtb3ZlKHM6dXBkYXRlLnRvZG8sIG5hbWUpCiAgbGV0IG5ldyAgPSBlbXB0eShnbG9icGF0aChzcGVjLmRpciwgJy5naXQnLCAxKSkKCiAgY2FsbCBzOmxvZyhuZXcgPyAnKycgOiAnKicsIG5hbWUsIHB1bGwgPyAnVXBkYXRpbmcgLi4uJyA6ICdJbnN0YWxsaW5nIC4uLicpCiAgcmVkcmF3CgogIGxldCBoYXNfdGFnID0gaGFzX2tleShzcGVjLCAndGFnJykKICBpZiAhbmV3CiAgICBsZXQgW2Vycm9yLCBfXSA9IHM6Z2l0X3ZhbGlkYXRlKHNwZWMsIDApCiAgICBpZiBlbXB0eShlcnJvcikKICAgICAgaWYgcHVsbAogICAgICAgIGxldCBmZXRjaF9vcHQgPSAoaGFzX3RhZyAmJiAhZW1wdHkoZ2xvYnBhdGgoc3BlYy5kaXIsICcuZ2l0L3NoYWxsb3cnKSkpID8gJy0tZGVwdGggOTk5OTk5OTknIDogJycKICAgICAgICBjYWxsIHM6c3Bhd24obmFtZSwgcHJpbnRmKCdnaXQgZmV0Y2ggJXMgJXMgMj4mMScsIGZldGNoX29wdCwgcHJvZyksIHsgJ2Rpcic6IHNwZWMuZGlyIH0pCiAgICAgIGVsc2UKICAgICAgICBsZXQgczpqb2JzW25hbWVdID0geyAncnVubmluZyc6IDAsICdsaW5lcyc6IFsnQWxyZWFkeSBpbnN0YWxsZWQnXSwgJ2Vycm9yJzogMCB9CiAgICAgIGVuZGlmCiAgICBlbHNlCiAgICAgIGxldCBzOmpvYnNbbmFtZV0gPSB7ICdydW5uaW5nJzogMCwgJ2xpbmVzJzogczpsaW5lcyhlcnJvciksICdlcnJvcic6IDEgfQogICAgZW5kaWYKICBlbHNlCiAgICBjYWxsIHM6c3Bhd24obmFtZSwKICAgICAgICAgIFwgcHJpbnRmKCdnaXQgY2xvbmUgJXMgJXMgJXMgJXMgMj4mMScsCiAgICAgICAgICBcIGhhc190YWcgPyAnJyA6IHM6Y2xvbmVfb3B0LAogICAgICAgICAgXCBwcm9nLAogICAgICAgICAgXCBwbHVnI3NoZWxsZXNjYXBlKHNwZWMudXJpLCB7J3NjcmlwdCc6IDB9KSwKICAgICAgICAgIFwgcGx1ZyNzaGVsbGVzY2FwZShzOnRyaW0oc3BlYy5kaXIpLCB7J3NjcmlwdCc6IDB9KSksIHsgJ25ldyc6IDEgfSkKICBlbmRpZgoKICBpZiAhczpqb2JzW25hbWVdLnJ1bm5pbmcKICAgIGNhbGwgczpyZWFwKG5hbWUpCiAgZW5kaWYKICBpZiBsZW4oczpqb2JzKSA+PSBzOnVwZGF0ZS50aHJlYWRzCiAgICBicmVhawogIGVuZGlmCmVuZHdoaWxlCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczp1cGRhdGVfcHl0aG9uKCkKbGV0IHB5X2V4ZSA9IGhhcygncHl0aG9uJykgPyAncHl0aG9uJyA6ICdweXRob24zJwpleGVjdXRlIHB5X2V4ZSAiPDwgRU9GIgppbXBvcnQgZGF0ZXRpbWUKaW1wb3J0IGZ1bmN0b29scwppbXBvcnQgb3MKdHJ5OgogIGltcG9ydCBxdWV1ZQpleGNlcHQgSW1wb3J0RXJyb3I6CiAgaW1wb3J0IFF1ZXVlIGFzIHF1ZXVlCmltcG9ydCByYW5kb20KaW1wb3J0IHJlCmltcG9ydCBzaHV0aWwKaW1wb3J0IHNpZ25hbAppbXBvcnQgc3VicHJvY2VzcwppbXBvcnQgdGVtcGZpbGUKaW1wb3J0IHRocmVhZGluZyBhcyB0aHIKaW1wb3J0IHRpbWUKaW1wb3J0IHRyYWNlYmFjawppbXBvcnQgdmltCgpHX05WSU0gPSB2aW0uZXZhbCgiaGFzKCdudmltJykiKSA9PSAnMScKR19QVUxMID0gdmltLmV2YWwoJ3M6dXBkYXRlLnB1bGwnKSA9PSAnMScKR19SRVRSSUVTID0gaW50KHZpbS5ldmFsKCdnZXQoZzosICJwbHVnX3JldHJpZXMiLCAyKScpKSArIDEKR19USU1FT1VUID0gaW50KHZpbS5ldmFsKCdnZXQoZzosICJwbHVnX3RpbWVvdXQiLCA2MCknKSkKR19DTE9ORV9PUFQgPSB2aW0uZXZhbCgnczpjbG9uZV9vcHQnKQpHX1BST0dSRVNTID0gdmltLmV2YWwoJ3M6cHJvZ3Jlc3Nfb3B0KDEpJykKR19MT0dfUFJPQiA9IDEuMCAvIGludCh2aW0uZXZhbCgnczp1cGRhdGUudGhyZWFkcycpKQpHX1NUT1AgPSB0aHIuRXZlbnQoKQpHX0lTX1dJTiA9IHZpbS5ldmFsKCdzOmlzX3dpbicpID09ICcxJwoKY2xhc3MgUGx1Z0Vycm9yKEV4Y2VwdGlvbik6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG1zZyk6CiAgICBzZWxmLm1zZyA9IG1zZwpjbGFzcyBDbWRUaW1lZE91dChQbHVnRXJyb3IpOgogIHBhc3MKY2xhc3MgQ21kRmFpbGVkKFBsdWdFcnJvcik6CiAgcGFzcwpjbGFzcyBJbnZhbGlkVVJJKFBsdWdFcnJvcik6CiAgcGFzcwpjbGFzcyBBY3Rpb24ob2JqZWN0KToKICBJTlNUQUxMLCBVUERBVEUsIEVSUk9SLCBET05FID0gWycrJywgJyonLCAneCcsICctJ10KCmNsYXNzIEJ1ZmZlcihvYmplY3QpOgogIGRlZiBfX2luaXRfXyhzZWxmLCBsb2NrLCBudW1fcGx1Z3MsIGlzX3B1bGwpOgogICAgc2VsZi5iYXIgPSAnJwogICAgc2VsZi5ldmVudCA9ICdVcGRhdGluZycgaWYgaXNfcHVsbCBlbHNlICdJbnN0YWxsaW5nJwogICAgc2VsZi5sb2NrID0gbG9jawogICAgc2VsZi5tYXh5ID0gaW50KHZpbS5ldmFsKCd3aW5oZWlnaHQoIi4iKScpKQogICAgc2VsZi5udW1fcGx1Z3MgPSBudW1fcGx1Z3MKCiAgZGVmIF9fd2hlcmUoc2VsZiwgbmFtZSk6CiAgICAiIiIgRmluZCBmaXJzdCBsaW5lIHdpdGggbmFtZSBpbiBjdXJyZW50IGJ1ZmZlci4gUmV0dXJuIGxpbmUgbnVtLiAiIiIKICAgIGZvdW5kLCBsbnVtID0gRmFsc2UsIDAKICAgIG1hdGNoZXIgPSByZS5jb21waWxlKCdeWy0reCpdIHswfTonLmZvcm1hdChuYW1lKSkKICAgIGZvciBsaW5lIGluIHZpbS5jdXJyZW50LmJ1ZmZlcjoKICAgICAgaWYgbWF0Y2hlci5zZWFyY2gobGluZSkgaXMgbm90IE5vbmU6CiAgICAgICAgZm91bmQgPSBUcnVlCiAgICAgICAgYnJlYWsKICAgICAgbG51bSArPSAxCgogICAgaWYgbm90IGZvdW5kOgogICAgICBsbnVtID0gLTEKICAgIHJldHVybiBsbnVtCgogIGRlZiBoZWFkZXIoc2VsZik6CiAgICBjdXJidWYgPSB2aW0uY3VycmVudC5idWZmZXIKICAgIGN1cmJ1ZlswXSA9IHNlbGYuZXZlbnQgKyAnIHBsdWdpbnMgKHswfS97MX0pJy5mb3JtYXQobGVuKHNlbGYuYmFyKSwgc2VsZi5udW1fcGx1Z3MpCgogICAgbnVtX3NwYWNlcyA9IHNlbGYubnVtX3BsdWdzIC0gbGVuKHNlbGYuYmFyKQogICAgY3VyYnVmWzFdID0gJ1t7MH17MX1dJy5mb3JtYXQoc2VsZi5iYXIsIG51bV9zcGFjZXMgKiAnICcpCgogICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgIHZpbS5jb21tYW5kKCdub3JtYWwhIDJHJykKICAgICAgdmltLmNvbW1hbmQoJ3JlZHJhdycpCgogIGRlZiB3cml0ZShzZWxmLCBhY3Rpb24sIG5hbWUsIGxpbmVzKToKICAgIGZpcnN0LCByZXN0ID0gbGluZXNbMF0sIGxpbmVzWzE6XQogICAgbXNnID0gWyd7MH0gezF9ezJ9ezN9Jy5mb3JtYXQoYWN0aW9uLCBuYW1lLCAnOiAnIGlmIGZpcnN0IGVsc2UgJycsIGZpcnN0KV0KICAgIG1zZy5leHRlbmQoWycgICAgJyArIGxpbmUgZm9yIGxpbmUgaW4gcmVzdF0pCgogICAgdHJ5OgogICAgICBpZiBhY3Rpb24gPT0gQWN0aW9uLkVSUk9SOgogICAgICAgIHNlbGYuYmFyICs9ICd4JwogICAgICAgIHZpbS5jb21tYW5kKCJjYWxsIGFkZChzOnVwZGF0ZS5lcnJvcnMsICd7MH0nKSIuZm9ybWF0KG5hbWUpKQogICAgICBlbGlmIGFjdGlvbiA9PSBBY3Rpb24uRE9ORToKICAgICAgICBzZWxmLmJhciArPSAnPScKCiAgICAgIGN1cmJ1ZiA9IHZpbS5jdXJyZW50LmJ1ZmZlcgogICAgICBsbnVtID0gc2VsZi5fX3doZXJlKG5hbWUpCiAgICAgIGlmIGxudW0gIT0gLTE6ICMgRm91bmQgbWF0Y2hpbmcgbGluZSBudW0KICAgICAgICBkZWwgY3VyYnVmW2xudW1dCiAgICAgICAgaWYgbG51bSA+IHNlbGYubWF4eSBhbmQgYWN0aW9uIGluIHNldChbQWN0aW9uLklOU1RBTEwsIEFjdGlvbi5VUERBVEVdKToKICAgICAgICAgIGxudW0gPSAzCiAgICAgIGVsc2U6CiAgICAgICAgbG51bSA9IDMKICAgICAgY3VyYnVmLmFwcGVuZChtc2csIGxudW0pCgogICAgICBzZWxmLmhlYWRlcigpCiAgICBleGNlcHQgdmltLmVycm9yOgogICAgICBwYXNzCgpjbGFzcyBDb21tYW5kKG9iamVjdCk6CiAgQ0QgPSAnY2QgL2QnIGlmIEdfSVNfV0lOIGVsc2UgJ2NkJwoKICBkZWYgX19pbml0X18oc2VsZiwgY21kLCBjbWRfZGlyPU5vbmUsIHRpbWVvdXQ9NjAsIGNiPU5vbmUsIGNsZWFuPU5vbmUpOgogICAgc2VsZi5jbWQgPSBjbWQKICAgIGlmIGNtZF9kaXI6CiAgICAgIHNlbGYuY21kID0gJ3swfSB7MX0gJiYgezJ9Jy5mb3JtYXQoQ29tbWFuZC5DRCwgY21kX2Rpciwgc2VsZi5jbWQpCiAgICBzZWxmLnRpbWVvdXQgPSB0aW1lb3V0CiAgICBzZWxmLmNhbGxiYWNrID0gY2IgaWYgY2IgZWxzZSAobGFtYmRhIG1zZzogTm9uZSkKICAgIHNlbGYuY2xlYW4gPSBjbGVhbiBpZiBjbGVhbiBlbHNlIChsYW1iZGE6IE5vbmUpCiAgICBzZWxmLnByb2MgPSBOb25lCgogIEBwcm9wZXJ0eQogIGRlZiBhbGl2ZShzZWxmKToKICAgICIiIiBSZXR1cm5zIHRydWUgb25seSBpZiBjb21tYW5kIHN0aWxsIHJ1bm5pbmcuICIiIgogICAgcmV0dXJuIHNlbGYucHJvYyBhbmQgc2VsZi5wcm9jLnBvbGwoKSBpcyBOb25lCgogIGRlZiBleGVjdXRlKHNlbGYsIG50cmllcz0zKToKICAgICIiIiBFeGVjdXRlIHRoZSBjb21tYW5kIHdpdGggbnRyaWVzIGlmIENtZFRpbWVkT3V0LgogICAgICAgIFJldHVybnMgdGhlIG91dHB1dCBvZiB0aGUgY29tbWFuZCBpZiBubyBFeGNlcHRpb24uCiAgICAiIiIKICAgIGF0dGVtcHQsIGZpbmlzaGVkLCBsaW1pdCA9IDAsIEZhbHNlLCBzZWxmLnRpbWVvdXQKCiAgICB3aGlsZSBub3QgZmluaXNoZWQ6CiAgICAgIHRyeToKICAgICAgICBhdHRlbXB0ICs9IDEKICAgICAgICByZXN1bHQgPSBzZWxmLnRyeV9jb21tYW5kKCkKICAgICAgICBmaW5pc2hlZCA9IFRydWUKICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgIGV4Y2VwdCBDbWRUaW1lZE91dDoKICAgICAgICBpZiBhdHRlbXB0ICE9IG50cmllczoKICAgICAgICAgIHNlbGYubm90aWZ5X3JldHJ5KCkKICAgICAgICAgIHNlbGYudGltZW91dCArPSBsaW1pdAogICAgICAgIGVsc2U6CiAgICAgICAgICByYWlzZQoKICBkZWYgbm90aWZ5X3JldHJ5KHNlbGYpOgogICAgIiIiIFJldHJ5IHJlcXVpcmVkIGZvciBjb21tYW5kLCBub3RpZnkgdXNlci4gIiIiCiAgICBmb3IgY291bnQgaW4gcmFuZ2UoMywgMCwgLTEpOgogICAgICBpZiBHX1NUT1AuaXNfc2V0KCk6CiAgICAgICAgcmFpc2UgS2V5Ym9hcmRJbnRlcnJ1cHQKICAgICAgbXNnID0gJ1RpbWVvdXQuIFdpbGwgcmV0cnkgaW4gezB9IHNlY29uZHsxfSAuLi4nLmZvcm1hdCgKICAgICAgICAgICAgY291bnQsICdzJyBpZiBjb3VudCAhPSAxIGVsc2UgJycpCiAgICAgIHNlbGYuY2FsbGJhY2soW21zZ10pCiAgICAgIHRpbWUuc2xlZXAoMSkKICAgIHNlbGYuY2FsbGJhY2soWydSZXRyeWluZyAuLi4nXSkKCiAgZGVmIHRyeV9jb21tYW5kKHNlbGYpOgogICAgIiIiIEV4ZWN1dGUgYSBjbWQgJiBwb2xsIGZvciBjYWxsYmFjay4gUmV0dXJucyBsaXN0IG9mIG91dHB1dC4KICAgICAgICBSYWlzZXMgQ21kRmFpbGVkICAgLT4gcmV0dXJuIGNvZGUgZm9yIFBvcGVuIGlzbid0IDAKICAgICAgICBSYWlzZXMgQ21kVGltZWRPdXQgLT4gY29tbWFuZCBleGNlZWRlZCB0aW1lb3V0IHdpdGhvdXQgbmV3IG91dHB1dAogICAgIiIiCiAgICBmaXJzdF9saW5lID0gVHJ1ZQoKICAgIHRyeToKICAgICAgdGZpbGUgPSB0ZW1wZmlsZS5OYW1lZFRlbXBvcmFyeUZpbGUobW9kZT0ndytiJykKICAgICAgcHJlZXhlY19mbiA9IG5vdCBHX0lTX1dJTiBhbmQgb3Muc2V0c2lkIG9yIE5vbmUKICAgICAgc2VsZi5wcm9jID0gc3VicHJvY2Vzcy5Qb3BlbihzZWxmLmNtZCwgc3Rkb3V0PXRmaWxlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZGVycj1zdWJwcm9jZXNzLlNURE9VVCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGRpbj1zdWJwcm9jZXNzLlBJUEUsIHNoZWxsPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZXhlY19mbj1wcmVleGVjX2ZuKQogICAgICB0aHJkID0gdGhyLlRocmVhZCh0YXJnZXQ9KGxhbWJkYSBwcm9jOiBwcm9jLndhaXQoKSksIGFyZ3M9KHNlbGYucHJvYywpKQogICAgICB0aHJkLnN0YXJ0KCkKCiAgICAgIHRocmVhZF9ub3Rfc3RhcnRlZCA9IFRydWUKICAgICAgd2hpbGUgdGhyZWFkX25vdF9zdGFydGVkOgogICAgICAgIHRyeToKICAgICAgICAgIHRocmQuam9pbigwLjEpCiAgICAgICAgICB0aHJlYWRfbm90X3N0YXJ0ZWQgPSBGYWxzZQogICAgICAgIGV4Y2VwdCBSdW50aW1lRXJyb3I6CiAgICAgICAgICBwYXNzCgogICAgICB3aGlsZSBzZWxmLmFsaXZlOgogICAgICAgIGlmIEdfU1RPUC5pc19zZXQoKToKICAgICAgICAgIHJhaXNlIEtleWJvYXJkSW50ZXJydXB0CgogICAgICAgIGlmIGZpcnN0X2xpbmUgb3IgcmFuZG9tLnJhbmRvbSgpIDwgR19MT0dfUFJPQjoKICAgICAgICAgIGZpcnN0X2xpbmUgPSBGYWxzZQogICAgICAgICAgbGluZSA9ICcnIGlmIEdfSVNfV0lOIGVsc2Ugbm9uYmxvY2tfcmVhZCh0ZmlsZS5uYW1lKQogICAgICAgICAgaWYgbGluZToKICAgICAgICAgICAgc2VsZi5jYWxsYmFjayhbbGluZV0pCgogICAgICAgIHRpbWVfZGlmZiA9IHRpbWUudGltZSgpIC0gb3MucGF0aC5nZXRtdGltZSh0ZmlsZS5uYW1lKQogICAgICAgIGlmIHRpbWVfZGlmZiA+IHNlbGYudGltZW91dDoKICAgICAgICAgIHJhaXNlIENtZFRpbWVkT3V0KFsnVGltZW91dCEnXSkKCiAgICAgICAgdGhyZC5qb2luKDAuNSkKCiAgICAgIHRmaWxlLnNlZWsoMCkKICAgICAgcmVzdWx0ID0gW2xpbmUuZGVjb2RlKCd1dGYtOCcsICdyZXBsYWNlJykucnN0cmlwKCkgZm9yIGxpbmUgaW4gdGZpbGVdCgogICAgICBpZiBzZWxmLnByb2MucmV0dXJuY29kZSAhPSAwOgogICAgICAgIHJhaXNlIENtZEZhaWxlZChbJyddICsgcmVzdWx0KQoKICAgICAgcmV0dXJuIHJlc3VsdAogICAgZXhjZXB0OgogICAgICBzZWxmLnRlcm1pbmF0ZSgpCiAgICAgIHJhaXNlCgogIGRlZiB0ZXJtaW5hdGUoc2VsZik6CiAgICAiIiIgVGVybWluYXRlIHByb2Nlc3MgYW5kIGNsZWFudXAuICIiIgogICAgaWYgc2VsZi5hbGl2ZToKICAgICAgaWYgR19JU19XSU46CiAgICAgICAgb3Mua2lsbChzZWxmLnByb2MucGlkLCBzaWduYWwuU0lHSU5UKQogICAgICBlbHNlOgogICAgICAgIG9zLmtpbGxwZyhzZWxmLnByb2MucGlkLCBzaWduYWwuU0lHVEVSTSkKICAgIHNlbGYuY2xlYW4oKQoKY2xhc3MgUGx1Z2luKG9iamVjdCk6CiAgZGVmIF9faW5pdF9fKHNlbGYsIG5hbWUsIGFyZ3MsIGJ1Zl9xLCBsb2NrKToKICAgIHNlbGYubmFtZSA9IG5hbWUKICAgIHNlbGYuYXJncyA9IGFyZ3MKICAgIHNlbGYuYnVmX3EgPSBidWZfcQogICAgc2VsZi5sb2NrID0gbG9jawogICAgc2VsZi50YWcgPSBhcmdzLmdldCgndGFnJywgMCkKCiAgZGVmIG1hbmFnZShzZWxmKToKICAgIHRyeToKICAgICAgaWYgb3MucGF0aC5leGlzdHMoc2VsZi5hcmdzWydkaXInXSk6CiAgICAgICAgc2VsZi51cGRhdGUoKQogICAgICBlbHNlOgogICAgICAgIHNlbGYuaW5zdGFsbCgpCiAgICAgICAgd2l0aCBzZWxmLmxvY2s6CiAgICAgICAgICB0aHJlYWRfdmltX2NvbW1hbmQoImxldCBzOnVwZGF0ZS5uZXdbJ3swfSddID0gMSIuZm9ybWF0KHNlbGYubmFtZSkpCiAgICBleGNlcHQgUGx1Z0Vycm9yIGFzIGV4YzoKICAgICAgc2VsZi53cml0ZShBY3Rpb24uRVJST1IsIHNlbGYubmFtZSwgZXhjLm1zZykKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgR19TVE9QLnNldCgpCiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkVSUk9SLCBzZWxmLm5hbWUsIFsnSW50ZXJydXB0ZWQhJ10pCiAgICBleGNlcHQ6CiAgICAgICMgQW55IGV4Y2VwdGlvbiBleGNlcHQgdGhvc2UgYWJvdmUgcHJpbnQgc3RhY2sgdHJhY2UKICAgICAgbXNnID0gJ1RyYWNlOlxuezB9Jy5mb3JtYXQodHJhY2ViYWNrLmZvcm1hdF9leGMoKS5yc3RyaXAoKSkKICAgICAgc2VsZi53cml0ZShBY3Rpb24uRVJST1IsIHNlbGYubmFtZSwgbXNnLnNwbGl0KCdcbicpKQogICAgICByYWlzZQoKICBkZWYgaW5zdGFsbChzZWxmKToKICAgIHRhcmdldCA9IHNlbGYuYXJnc1snZGlyJ10KICAgIGlmIHRhcmdldFstMV0gPT0gJ1xcJzoKICAgICAgdGFyZ2V0ID0gdGFyZ2V0WzA6LTFdCgogICAgZGVmIGNsZWFuKHRhcmdldCk6CiAgICAgIGRlZiBfY2xlYW4oKToKICAgICAgICB0cnk6CiAgICAgICAgICBzaHV0aWwucm10cmVlKHRhcmdldCkKICAgICAgICBleGNlcHQgT1NFcnJvcjoKICAgICAgICAgIHBhc3MKICAgICAgcmV0dXJuIF9jbGVhbgoKICAgIHNlbGYud3JpdGUoQWN0aW9uLklOU1RBTEwsIHNlbGYubmFtZSwgWydJbnN0YWxsaW5nIC4uLiddKQogICAgY2FsbGJhY2sgPSBmdW5jdG9vbHMucGFydGlhbChzZWxmLndyaXRlLCBBY3Rpb24uSU5TVEFMTCwgc2VsZi5uYW1lKQogICAgY21kID0gJ2dpdCBjbG9uZSB7MH0gezF9IHsyfSB7M30gMj4mMScuZm9ybWF0KAogICAgICAgICAgJycgaWYgc2VsZi50YWcgZWxzZSBHX0NMT05FX09QVCwgR19QUk9HUkVTUywgc2VsZi5hcmdzWyd1cmknXSwKICAgICAgICAgIGVzYyh0YXJnZXQpKQogICAgY29tID0gQ29tbWFuZChjbWQsIE5vbmUsIEdfVElNRU9VVCwgY2FsbGJhY2ssIGNsZWFuKHRhcmdldCkpCiAgICByZXN1bHQgPSBjb20uZXhlY3V0ZShHX1JFVFJJRVMpCiAgICBzZWxmLndyaXRlKEFjdGlvbi5ET05FLCBzZWxmLm5hbWUsIHJlc3VsdFstMTpdKQoKICBkZWYgcmVwb191cmkoc2VsZik6CiAgICBjbWQgPSAnZ2l0IHJldi1wYXJzZSAtLWFiYnJldi1yZWYgSEVBRCAyPiYxICYmIGdpdCBjb25maWcgLWYgLmdpdC9jb25maWcgcmVtb3RlLm9yaWdpbi51cmwnCiAgICBjb21tYW5kID0gQ29tbWFuZChjbWQsIHNlbGYuYXJnc1snZGlyJ10sIEdfVElNRU9VVCwpCiAgICByZXN1bHQgPSBjb21tYW5kLmV4ZWN1dGUoR19SRVRSSUVTKQogICAgcmV0dXJuIHJlc3VsdFstMV0KCiAgZGVmIHVwZGF0ZShzZWxmKToKICAgIGFjdHVhbF91cmkgPSBzZWxmLnJlcG9fdXJpKCkKICAgIGV4cGVjdF91cmkgPSBzZWxmLmFyZ3NbJ3VyaSddCiAgICByZWdleCA9IHJlLmNvbXBpbGUocideKD86XHcrOi8vKT8oPzpbXkAvXSpAKT8oW146L10qKD86OlswLTldKik/KVs6L10oLio/KSg/OlwuZ2l0KT8vPyQnKQogICAgbWEgPSByZWdleC5tYXRjaChhY3R1YWxfdXJpKQogICAgbWIgPSByZWdleC5tYXRjaChleHBlY3RfdXJpKQogICAgaWYgbWEgaXMgTm9uZSBvciBtYiBpcyBOb25lIG9yIG1hLmdyb3VwcygpICE9IG1iLmdyb3VwcygpOgogICAgICBtc2cgPSBbJycsCiAgICAgICAgICAgICAnSW52YWxpZCBVUkk6IHswfScuZm9ybWF0KGFjdHVhbF91cmkpLAogICAgICAgICAgICAgJ0V4cGVjdGVkICAgICB7MH0nLmZvcm1hdChleHBlY3RfdXJpKSwKICAgICAgICAgICAgICdQbHVnQ2xlYW4gcmVxdWlyZWQuJ10KICAgICAgcmFpc2UgSW52YWxpZFVSSShtc2cpCgogICAgaWYgR19QVUxMOgogICAgICBzZWxmLndyaXRlKEFjdGlvbi5VUERBVEUsIHNlbGYubmFtZSwgWydVcGRhdGluZyAuLi4nXSkKICAgICAgY2FsbGJhY2sgPSBmdW5jdG9vbHMucGFydGlhbChzZWxmLndyaXRlLCBBY3Rpb24uVVBEQVRFLCBzZWxmLm5hbWUpCiAgICAgIGZldGNoX29wdCA9ICctLWRlcHRoIDk5OTk5OTk5JyBpZiBzZWxmLnRhZyBhbmQgb3MucGF0aC5pc2ZpbGUob3MucGF0aC5qb2luKHNlbGYuYXJnc1snZGlyJ10sICcuZ2l0L3NoYWxsb3cnKSkgZWxzZSAnJwogICAgICBjbWQgPSAnZ2l0IGZldGNoIHswfSB7MX0gMj4mMScuZm9ybWF0KGZldGNoX29wdCwgR19QUk9HUkVTUykKICAgICAgY29tID0gQ29tbWFuZChjbWQsIHNlbGYuYXJnc1snZGlyJ10sIEdfVElNRU9VVCwgY2FsbGJhY2spCiAgICAgIHJlc3VsdCA9IGNvbS5leGVjdXRlKEdfUkVUUklFUykKICAgICAgc2VsZi53cml0ZShBY3Rpb24uRE9ORSwgc2VsZi5uYW1lLCByZXN1bHRbLTE6XSkKICAgIGVsc2U6CiAgICAgIHNlbGYud3JpdGUoQWN0aW9uLkRPTkUsIHNlbGYubmFtZSwgWydBbHJlYWR5IGluc3RhbGxlZCddKQoKICBkZWYgd3JpdGUoc2VsZiwgYWN0aW9uLCBuYW1lLCBtc2cpOgogICAgc2VsZi5idWZfcS5wdXQoKGFjdGlvbiwgbmFtZSwgbXNnKSkKCmNsYXNzIFBsdWdUaHJlYWQodGhyLlRocmVhZCk6CiAgZGVmIF9faW5pdF9fKHNlbGYsIHRuYW1lLCBhcmdzKToKICAgIHN1cGVyKFBsdWdUaHJlYWQsIHNlbGYpLl9faW5pdF9fKCkKICAgIHNlbGYudG5hbWUgPSB0bmFtZQogICAgc2VsZi5hcmdzID0gYXJncwoKICBkZWYgcnVuKHNlbGYpOgogICAgdGhyLmN1cnJlbnRfdGhyZWFkKCkubmFtZSA9IHNlbGYudG5hbWUKICAgIGJ1Zl9xLCB3b3JrX3EsIGxvY2sgPSBzZWxmLmFyZ3MKCiAgICB0cnk6CiAgICAgIHdoaWxlIG5vdCBHX1NUT1AuaXNfc2V0KCk6CiAgICAgICAgbmFtZSwgYXJncyA9IHdvcmtfcS5nZXRfbm93YWl0KCkKICAgICAgICBwbHVnID0gUGx1Z2luKG5hbWUsIGFyZ3MsIGJ1Zl9xLCBsb2NrKQogICAgICAgIHBsdWcubWFuYWdlKCkKICAgICAgICB3b3JrX3EudGFza19kb25lKCkKICAgIGV4Y2VwdCBxdWV1ZS5FbXB0eToKICAgICAgcGFzcwoKY2xhc3MgUmVmcmVzaFRocmVhZCh0aHIuVGhyZWFkKToKICBkZWYgX19pbml0X18oc2VsZiwgbG9jayk6CiAgICBzdXBlcihSZWZyZXNoVGhyZWFkLCBzZWxmKS5fX2luaXRfXygpCiAgICBzZWxmLmxvY2sgPSBsb2NrCiAgICBzZWxmLnJ1bm5pbmcgPSBUcnVlCgogIGRlZiBydW4oc2VsZik6CiAgICB3aGlsZSBzZWxmLnJ1bm5pbmc6CiAgICAgIHdpdGggc2VsZi5sb2NrOgogICAgICAgIHRocmVhZF92aW1fY29tbWFuZCgnbm9hdXRvY21kIG5vcm1hbCEgYScpCiAgICAgIHRpbWUuc2xlZXAoMC4zMykKCiAgZGVmIHN0b3Aoc2VsZik6CiAgICBzZWxmLnJ1bm5pbmcgPSBGYWxzZQoKaWYgR19OVklNOgogIGRlZiB0aHJlYWRfdmltX2NvbW1hbmQoY21kKToKICAgIHZpbS5zZXNzaW9uLnRocmVhZHNhZmVfY2FsbChsYW1iZGE6IHZpbS5jb21tYW5kKGNtZCkpCmVsc2U6CiAgZGVmIHRocmVhZF92aW1fY29tbWFuZChjbWQpOgogICAgdmltLmNvbW1hbmQoY21kKQoKZGVmIGVzYyhuYW1lKToKICByZXR1cm4gJyInICsgbmFtZS5yZXBsYWNlKCciJywgJ1wiJykgKyAnIicKCmRlZiBub25ibG9ja19yZWFkKGZuYW1lKToKICAiIiIgUmVhZCBhIGZpbGUgd2l0aCBub25ibG9jayBmbGFnLiBSZXR1cm4gdGhlIGxhc3QgbGluZS4gIiIiCiAgZnJlYWQgPSBvcy5vcGVuKGZuYW1lLCBvcy5PX1JET05MWSB8IG9zLk9fTk9OQkxPQ0spCiAgYnVmID0gb3MucmVhZChmcmVhZCwgMTAwMDAwKS5kZWNvZGUoJ3V0Zi04JywgJ3JlcGxhY2UnKQogIG9zLmNsb3NlKGZyZWFkKQoKICBsaW5lID0gYnVmLnJzdHJpcCgnXHJcbicpCiAgbGVmdCA9IG1heChsaW5lLnJmaW5kKCdccicpLCBsaW5lLnJmaW5kKCdcbicpKQogIGlmIGxlZnQgIT0gLTE6CiAgICBsZWZ0ICs9IDEKICAgIGxpbmUgPSBsaW5lW2xlZnQ6XQoKICByZXR1cm4gbGluZQoKZGVmIG1haW4oKToKICB0aHIuY3VycmVudF90aHJlYWQoKS5uYW1lID0gJ21haW4nCiAgbnRocmVhZHMgPSBpbnQodmltLmV2YWwoJ3M6dXBkYXRlLnRocmVhZHMnKSkKICBwbHVncyA9IHZpbS5ldmFsKCdzOnVwZGF0ZS50b2RvJykKICBtYWNfZ3VpID0gdmltLmV2YWwoJ3M6bWFjX2d1aScpID09ICcxJwoKICBsb2NrID0gdGhyLkxvY2soKQogIGJ1ZiA9IEJ1ZmZlcihsb2NrLCBsZW4ocGx1Z3MpLCBHX1BVTEwpCiAgYnVmX3EsIHdvcmtfcSA9IHF1ZXVlLlF1ZXVlKCksIHF1ZXVlLlF1ZXVlKCkKICBmb3Igd29yayBpbiBwbHVncy5pdGVtcygpOgogICAgd29ya19xLnB1dCh3b3JrKQoKICBzdGFydF9jbnQgPSB0aHIuYWN0aXZlX2NvdW50KCkKICBmb3IgbnVtIGluIHJhbmdlKG50aHJlYWRzKToKICAgIHRuYW1lID0gJ1BsdWdULXswOjAyfScuZm9ybWF0KG51bSkKICAgIHRocmVhZCA9IFBsdWdUaHJlYWQodG5hbWUsIChidWZfcSwgd29ya19xLCBsb2NrKSkKICAgIHRocmVhZC5zdGFydCgpCiAgaWYgbWFjX2d1aToKICAgIHJ0aHJlYWQgPSBSZWZyZXNoVGhyZWFkKGxvY2spCiAgICBydGhyZWFkLnN0YXJ0KCkKCiAgd2hpbGUgbm90IGJ1Zl9xLmVtcHR5KCkgb3IgdGhyLmFjdGl2ZV9jb3VudCgpICE9IHN0YXJ0X2NudDoKICAgIHRyeToKICAgICAgYWN0aW9uLCBuYW1lLCBtc2cgPSBidWZfcS5nZXQoVHJ1ZSwgMC4yNSkKICAgICAgYnVmLndyaXRlKGFjdGlvbiwgbmFtZSwgWydPSyddIGlmIG5vdCBtc2cgZWxzZSBtc2cpCiAgICAgIGJ1Zl9xLnRhc2tfZG9uZSgpCiAgICBleGNlcHQgcXVldWUuRW1wdHk6CiAgICAgIHBhc3MKICAgIGV4Y2VwdCBLZXlib2FyZEludGVycnVwdDoKICAgICAgR19TVE9QLnNldCgpCgogIGlmIG1hY19ndWk6CiAgICBydGhyZWFkLnN0b3AoKQogICAgcnRocmVhZC5qb2luKCkKCm1haW4oKQpFT0YKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZGF0ZV9ydWJ5KCkKICBydWJ5IDw8IEVPRgogIG1vZHVsZSBQbHVnU3RyZWFtCiAgICBTRVAgPSBbIlxyIiwgIlxuIiwgbmlsXQogICAgZGVmIGdldF9saW5lCiAgICAgIGJ1ZmZlciA9ICcnCiAgICAgIGxvb3AgZG8KICAgICAgICBjaGFyID0gcmVhZGNoYXIgcmVzY3VlIHJldHVybgogICAgICAgIGlmIFNFUC5pbmNsdWRlPyBjaGFyLmNocgogICAgICAgICAgYnVmZmVyIDw8ICQvCiAgICAgICAgICBicmVhawogICAgICAgIGVsc2UKICAgICAgICAgIGJ1ZmZlciA8PCBjaGFyCiAgICAgICAgZW5kCiAgICAgIGVuZAogICAgICBidWZmZXIKICAgIGVuZAogIGVuZCB1bmxlc3MgZGVmaW5lZD8oUGx1Z1N0cmVhbSkKCiAgZGVmIGVzYyBhcmcKICAgICVbIiN7YXJnLmdzdWIoJyInLCAnXCInKX0iXQogIGVuZAoKICBkZWYga2lsbGFsbCBwaWQKICAgIHBpZHMgPSBbcGlkXQogICAgaWYgL21zd2lufG1pbmd3fGJjY3dpbi8gPX4gUlVCWV9QTEFURk9STQogICAgICBwaWRzLmVhY2ggeyB8cGlkfCBQcm9jZXNzLmtpbGwgJ0lOVCcsIHBpZC50b19pIHJlc2N1ZSBuaWwgfQogICAgZWxzZQogICAgICB1bmxlc3MgYHdoaWNoIHBncmVwIDI+IC9kZXYvbnVsbGAuZW1wdHk/CiAgICAgICAgY2hpbGRyZW4gPSBwaWRzCiAgICAgICAgdW50aWwgY2hpbGRyZW4uZW1wdHk/CiAgICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuLm1hcCB7IHxwaWR8CiAgICAgICAgICAgIGBwZ3JlcCAtUCAje3BpZH1gLmxpbmVzLm1hcCB7IHxsfCBsLmNob21wIH0KICAgICAgICAgIH0uZmxhdHRlbgogICAgICAgICAgcGlkcyArPSBjaGlsZHJlbgogICAgICAgIGVuZAogICAgICBlbmQKICAgICAgcGlkcy5lYWNoIHsgfHBpZHwgUHJvY2Vzcy5raWxsICdURVJNJywgcGlkLnRvX2kgcmVzY3VlIG5pbCB9CiAgICBlbmQKICBlbmQKCiAgZGVmIGNvbXBhcmVfZ2l0X3VyaSBhLCBiCiAgICByZWdleCA9ICVye14oPzpcdys6Ly8pPyg/OlteQC9dKkApPyhbXjovXSooPzo6WzAtOV0qKT8pWzovXSguKj8pKD86XC5naXQpPy8/JH0KICAgIHJlZ2V4Lm1hdGNoKGEpLnRvX2EuZHJvcCgxKSA9PSByZWdleC5tYXRjaChiKS50b19hLmRyb3AoMSkKICBlbmQKCiAgcmVxdWlyZSAndGhyZWFkJwogIHJlcXVpcmUgJ2ZpbGV1dGlscycKICByZXF1aXJlICd0aW1lb3V0JwogIHJ1bm5pbmcgPSB0cnVlCiAgaXN3aW4gPSBWSU06OmV2YWx1YXRlKCdzOmlzX3dpbicpLnRvX2kgPT0gMQogIHB1bGwgID0gVklNOjpldmFsdWF0ZSgnczp1cGRhdGUucHVsbCcpLnRvX2kgPT0gMQogIGJhc2UgID0gVklNOjpldmFsdWF0ZSgnZzpwbHVnX2hvbWUnKQogIGFsbCAgID0gVklNOjpldmFsdWF0ZSgnczp1cGRhdGUudG9kbycpCiAgbGltaXQgPSBWSU06OmV2YWx1YXRlKCdnZXQoZzosICJwbHVnX3RpbWVvdXQiLCA2MCknKQogIHRyaWVzID0gVklNOjpldmFsdWF0ZSgnZ2V0KGc6LCAicGx1Z19yZXRyaWVzIiwgMiknKSArIDEKICBudGhyICA9IFZJTTo6ZXZhbHVhdGUoJ3M6dXBkYXRlLnRocmVhZHMnKS50b19pCiAgbWF4eSAgPSBWSU06OmV2YWx1YXRlKCd3aW5oZWlnaHQoIi4iKScpLnRvX2kKICB2aW03ICA9IFZJTTo6ZXZhbHVhdGUoJ3Y6dmVyc2lvbicpLnRvX2kgPD0gNzAzICYmIFJVQllfUExBVEZPUk0gPX4gL2Rhcndpbi8KICBjZCAgICA9IGlzd2luID8gJ2NkIC9kJyA6ICdjZCcKICB0b3QgICA9IFZJTTo6ZXZhbHVhdGUoJ2xlbihzOnVwZGF0ZS50b2RvKScpIHx8IDAKICBiYXIgICA9ICcnCiAgc2tpcCAgPSAnQWxyZWFkeSBpbnN0YWxsZWQnCiAgbXR4ICAgPSBNdXRleC5uZXcKICB0YWtlMSA9IHByb2MgeyBtdHguc3luY2hyb25pemUgeyBydW5uaW5nICYmIGFsbC5zaGlmdCB9IH0KICBsb2doICA9IHByb2MgewogICAgY250ID0gYmFyLmxlbmd0aAogICAgJGN1cmJ1ZlsxXSA9ICIje3B1bGwgPyAnVXBkYXRpbmcnIDogJ0luc3RhbGxpbmcnfSBwbHVnaW5zICgje2NudH0vI3t0b3R9KSIKICAgICRjdXJidWZbMl0gPSAnWycgKyBiYXIubGp1c3QodG90KSArICddJwogICAgVklNOjpjb21tYW5kKCdub3JtYWwhIDJHJykKICAgIFZJTTo6Y29tbWFuZCgncmVkcmF3JykKICB9CiAgd2hlcmUgPSBwcm9jIHsgfG5hbWV8ICgxLi4oJGN1cmJ1Zi5sZW5ndGgpKS5maW5kIHsgfGx8ICRjdXJidWZbbF0gPX4gL15bLSt4Kl0gI3tuYW1lfTovIH0gfQogIGxvZyAgID0gcHJvYyB7IHxuYW1lLCByZXN1bHQsIHR5cGV8CiAgICBtdHguc3luY2hyb25pemUgZG8KICAgICAgaW5nICA9ICFbdHJ1ZSwgZmFsc2VdLmluY2x1ZGU/KHR5cGUpCiAgICAgIGJhciArPSB0eXBlID8gJz0nIDogJ3gnIHVubGVzcyBpbmcKICAgICAgYiA9IGNhc2UgdHlwZQogICAgICAgICAgd2hlbiA6aW5zdGFsbCAgdGhlbiAnKycgd2hlbiA6dXBkYXRlIHRoZW4gJyonCiAgICAgICAgICB3aGVuIHRydWUsIG5pbCB0aGVuICctJyBlbHNlCiAgICAgICAgICAgIFZJTTo6Y29tbWFuZCgiY2FsbCBhZGQoczp1cGRhdGUuZXJyb3JzLCAnI3tuYW1lfScpIikKICAgICAgICAgICAgJ3gnCiAgICAgICAgICBlbmQKICAgICAgcmVzdWx0ID0KICAgICAgICBpZiB0eXBlIHx8IHR5cGUubmlsPwogICAgICAgICAgWyIje2J9ICN7bmFtZX06ICN7cmVzdWx0LmxpbmVzLnRvX2EubGFzdCB8fCAnT0snfSJdCiAgICAgICAgZWxzaWYgcmVzdWx0ID1+IC9eSW50ZXJydXB0ZWR8XlRpbWVvdXQvCiAgICAgICAgICBbIiN7Yn0gI3tuYW1lfTogI3tyZXN1bHR9Il0KICAgICAgICBlbHNlCiAgICAgICAgICBbIiN7Yn0gI3tuYW1lfSJdICsgcmVzdWx0LmxpbmVzLm1hcCB7IHxsfCAiICAgICIgPDwgbCB9CiAgICAgICAgZW5kCiAgICAgIGlmIGxudW0gPSB3aGVyZS5jYWxsKG5hbWUpCiAgICAgICAgJGN1cmJ1Zi5kZWxldGUgbG51bQogICAgICAgIGxudW0gPSA0IGlmIGluZyAmJiBsbnVtID4gbWF4eQogICAgICBlbmQKICAgICAgcmVzdWx0LmVhY2hfd2l0aF9pbmRleCBkbyB8bGluZSwgb2Zmc2V0fAogICAgICAgICRjdXJidWYuYXBwZW5kKChsbnVtIHx8IDQpIC0gMSArIG9mZnNldCwgbGluZS5nc3ViKC9cZVxbLi8sICcnKS5jaG9tcCkKICAgICAgZW5kCiAgICAgIGxvZ2guY2FsbAogICAgZW5kCiAgfQogIGJ0ID0gcHJvYyB7IHxjbWQsIG5hbWUsIHR5cGUsIGNsZWFudXB8CiAgICB0cmllZCA9IHRpbWVvdXQgPSAwCiAgICBiZWdpbgogICAgICB0cmllZCArPSAxCiAgICAgIHRpbWVvdXQgKz0gbGltaXQKICAgICAgZmQgPSBuaWwKICAgICAgZGF0YSA9ICcnCiAgICAgIGlmIGlzd2luCiAgICAgICAgVGltZW91dDo6dGltZW91dCh0aW1lb3V0KSBkbwogICAgICAgICAgdG1wID0gVklNOjpldmFsdWF0ZSgndGVtcG5hbWUoKScpCiAgICAgICAgICBzeXN0ZW0oIigje2NtZH0pID4gI3t0bXB9IikKICAgICAgICAgIGRhdGEgPSBGaWxlLnJlYWQodG1wKS5jaG9tcAogICAgICAgICAgRmlsZS51bmxpbmsgdG1wIHJlc2N1ZSBuaWwKICAgICAgICBlbmQKICAgICAgZWxzZQogICAgICAgIGZkID0gSU8ucG9wZW4oY21kKS5leHRlbmQoUGx1Z1N0cmVhbSkKICAgICAgICBmaXJzdF9saW5lID0gdHJ1ZQogICAgICAgIGxvZ19wcm9iID0gMS4wIC8gbnRocgogICAgICAgIHdoaWxlIGxpbmUgPSBUaW1lb3V0Ojp0aW1lb3V0KHRpbWVvdXQpIHsgZmQuZ2V0X2xpbmUgfQogICAgICAgICAgZGF0YSA8PCBsaW5lCiAgICAgICAgICBsb2cuY2FsbCBuYW1lLCBsaW5lLmNob21wLCB0eXBlIGlmIG5hbWUgJiYgKGZpcnN0X2xpbmUgfHwgcmFuZCA8IGxvZ19wcm9iKQogICAgICAgICAgZmlyc3RfbGluZSA9IGZhbHNlCiAgICAgICAgZW5kCiAgICAgICAgZmQuY2xvc2UKICAgICAgZW5kCiAgICAgIFskPyA9PSAwLCBkYXRhLmNob21wXQogICAgcmVzY3VlIFRpbWVvdXQ6OkVycm9yLCBJbnRlcnJ1cHQgPT4gZQogICAgICBpZiBmZCAmJiAhZmQuY2xvc2VkPwogICAgICAgIGtpbGxhbGwgZmQucGlkCiAgICAgICAgZmQuY2xvc2UKICAgICAgZW5kCiAgICAgIGNsZWFudXAuY2FsbCBpZiBjbGVhbnVwCiAgICAgIGlmIGUuaXNfYT8oVGltZW91dDo6RXJyb3IpICYmIHRyaWVkIDwgdHJpZXMKICAgICAgICAzLmRvd250bygxKSBkbyB8Y291bnRkb3dufAogICAgICAgICAgcyA9IGNvdW50ZG93biA+IDEgPyAncycgOiAnJwogICAgICAgICAgbG9nLmNhbGwgbmFtZSwgIlRpbWVvdXQuIFdpbGwgcmV0cnkgaW4gI3tjb3VudGRvd259IHNlY29uZCN7c30gLi4uIiwgdHlwZQogICAgICAgICAgc2xlZXAgMQogICAgICAgIGVuZAogICAgICAgIGxvZy5jYWxsIG5hbWUsICdSZXRyeWluZyAuLi4nLCB0eXBlCiAgICAgICAgcmV0cnkKICAgICAgZW5kCiAgICAgIFtmYWxzZSwgZS5pc19hPyhJbnRlcnJ1cHQpID8gIkludGVycnVwdGVkISIgOiAiVGltZW91dCEiXQogICAgZW5kCiAgfQogIG1haW4gPSBUaHJlYWQuY3VycmVudAogIHRocmVhZHMgPSBbXQogIHdhdGNoZXIgPSBUaHJlYWQubmV3IHsKICAgIGlmIHZpbTcKICAgICAgd2hpbGUgVklNOjpldmFsdWF0ZSgnZ2V0Y2hhcigxKScpCiAgICAgICAgc2xlZXAgMC4xCiAgICAgIGVuZAogICAgZWxzZQogICAgICByZXF1aXJlICdpby9jb25zb2xlJyAjID49IFJ1YnkgMS45CiAgICAgIG5pbCB1bnRpbCBJTy5jb25zb2xlLmdldGNoID09IDMuY2hyCiAgICBlbmQKICAgIG10eC5zeW5jaHJvbml6ZSBkbwogICAgICBydW5uaW5nID0gZmFsc2UKICAgICAgdGhyZWFkcy5lYWNoIHsgfHR8IHQucmFpc2UgSW50ZXJydXB0IH0gdW5sZXNzIHZpbTcKICAgIGVuZAogICAgdGhyZWFkcy5lYWNoIHsgfHR8IHQuam9pbiByZXNjdWUgbmlsIH0KICAgIG1haW4ua2lsbAogIH0KICByZWZyZXNoID0gVGhyZWFkLm5ldyB7CiAgICB3aGlsZSB0cnVlCiAgICAgIG10eC5zeW5jaHJvbml6ZSBkbwogICAgICAgIGJyZWFrIHVubGVzcyBydW5uaW5nCiAgICAgICAgVklNOjpjb21tYW5kKCdub2F1dG9jbWQgbm9ybWFsISBhJykKICAgICAgZW5kCiAgICAgIHNsZWVwIDAuMgogICAgZW5kCiAgfSBpZiBWSU06OmV2YWx1YXRlKCdzOm1hY19ndWknKSA9PSAxCgogIGNsb25lX29wdCA9IFZJTTo6ZXZhbHVhdGUoJ3M6Y2xvbmVfb3B0JykKICBwcm9ncmVzcyA9IFZJTTo6ZXZhbHVhdGUoJ3M6cHJvZ3Jlc3Nfb3B0KDEpJykKICBudGhyLnRpbWVzIGRvCiAgICBtdHguc3luY2hyb25pemUgZG8KICAgICAgdGhyZWFkcyA8PCBUaHJlYWQubmV3IHsKICAgICAgICB3aGlsZSBwYWlyID0gdGFrZTEuY2FsbAogICAgICAgICAgbmFtZSA9IHBhaXIuZmlyc3QKICAgICAgICAgIGRpciwgdXJpLCB0YWcgPSBwYWlyLmxhc3QudmFsdWVzX2F0ICold1tkaXIgdXJpIHRhZ10KICAgICAgICAgIGV4aXN0cyA9IEZpbGUuZGlyZWN0b3J5PyBkaXIKICAgICAgICAgIG9rLCByZXN1bHQgPQogICAgICAgICAgICBpZiBleGlzdHMKICAgICAgICAgICAgICBjaGRpciA9ICIje2NkfSAje2lzd2luID8gZGlyIDogZXNjKGRpcil9IgogICAgICAgICAgICAgIHJldCwgZGF0YSA9IGJ0LmNhbGwgIiN7Y2hkaXJ9ICYmIGdpdCByZXYtcGFyc2UgLS1hYmJyZXYtcmVmIEhFQUQgMj4mMSAmJiBnaXQgY29uZmlnIC1mIC5naXQvY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsIiwgbmlsLCBuaWwsIG5pbAogICAgICAgICAgICAgIGN1cnJlbnRfdXJpID0gZGF0YS5saW5lcy50b19hLmxhc3QKICAgICAgICAgICAgICBpZiAhcmV0CiAgICAgICAgICAgICAgICBpZiBkYXRhID1+IC9eSW50ZXJydXB0ZWR8XlRpbWVvdXQvCiAgICAgICAgICAgICAgICAgIFtmYWxzZSwgZGF0YV0KICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgW2ZhbHNlLCBbZGF0YS5jaG9tcCwgIlBsdWdDbGVhbiByZXF1aXJlZC4iXS5qb2luKCQvKV0KICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgIGVsc2lmICFjb21wYXJlX2dpdF91cmkoY3VycmVudF91cmksIHVyaSkKICAgICAgICAgICAgICAgIFtmYWxzZSwgWyJJbnZhbGlkIFVSSTogI3tjdXJyZW50X3VyaX0iLAogICAgICAgICAgICAgICAgICAgICAgICAgIkV4cGVjdGVkOiAgICAje3VyaX0iLAogICAgICAgICAgICAgICAgICAgICAgICAgIlBsdWdDbGVhbiByZXF1aXJlZC4iXS5qb2luKCQvKV0KICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBpZiBwdWxsCiAgICAgICAgICAgICAgICAgIGxvZy5jYWxsIG5hbWUsICdVcGRhdGluZyAuLi4nLCA6dXBkYXRlCiAgICAgICAgICAgICAgICAgIGZldGNoX29wdCA9ICh0YWcgJiYgRmlsZS5leGlzdD8oRmlsZS5qb2luKGRpciwgJy5naXQvc2hhbGxvdycpKSkgPyAnLS1kZXB0aCA5OTk5OTk5OScgOiAnJwogICAgICAgICAgICAgICAgICBidC5jYWxsICIje2NoZGlyfSAmJiBnaXQgZmV0Y2ggI3tmZXRjaF9vcHR9ICN7cHJvZ3Jlc3N9IDI+JjEiLCBuYW1lLCA6dXBkYXRlLCBuaWwKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgW3RydWUsIHNraXBdCiAgICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgICBlbmQKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgIGQgPSBlc2MgZGlyLnN1YiglcntbXFwvXSskfSwgJycpCiAgICAgICAgICAgICAgbG9nLmNhbGwgbmFtZSwgJ0luc3RhbGxpbmcgLi4uJywgOmluc3RhbGwKICAgICAgICAgICAgICBidC5jYWxsICJnaXQgY2xvbmUgI3tjbG9uZV9vcHQgdW5sZXNzIHRhZ30gI3twcm9ncmVzc30gI3t1cml9ICN7ZH0gMj4mMSIsIG5hbWUsIDppbnN0YWxsLCBwcm9jIHsKICAgICAgICAgICAgICAgIEZpbGVVdGlscy5ybV9yZiBkaXIKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGVuZAogICAgICAgICAgbXR4LnN5bmNocm9uaXplIHsgVklNOjpjb21tYW5kKCJsZXQgczp1cGRhdGUubmV3Wycje25hbWV9J10gPSAxIikgfSBpZiAhZXhpc3RzICYmIG9rCiAgICAgICAgICBsb2cuY2FsbCBuYW1lLCByZXN1bHQsIG9rCiAgICAgICAgZW5kCiAgICAgIH0gaWYgcnVubmluZwogICAgZW5kCiAgZW5kCiAgdGhyZWFkcy5lYWNoIHsgfHR8IHQuam9pbiByZXNjdWUgbmlsIH0KICBsb2doLmNhbGwKICByZWZyZXNoLmtpbGwgaWYgcmVmcmVzaAogIHdhdGNoZXIua2lsbApFT0YKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNoZWxsZXNjX2NtZChhcmcsIHNjcmlwdCkKICBsZXQgZXNjYXBlZCA9IHN1YnN0aXR1dGUoJyInLmE6YXJnLiciJywgJ1smfDw+KClAXiEiXScsICdeJicsICdnJykKICByZXR1cm4gc3Vic3RpdHV0ZShlc2NhcGVkLCAnJScsIChhOnNjcmlwdCA/ICclJyA6ICdeJykgLiAnJicsICdnJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNoZWxsZXNjX3BzMShhcmcpCiAgcmV0dXJuICInIi5zdWJzdGl0dXRlKGVzY2FwZShhOmFyZywgJ1wiJyksICInIiwgIicnIiwgJ2cnKS4iJyIKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNoZWxsZXNjX3NoKGFyZykKICByZXR1cm4gIiciLnN1YnN0aXR1dGUoYTphcmcsICInIiwgIidcXFxcJyciLCAnZycpLiInIgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHBsdWcjc2hlbGxlc2NhcGUoYXJnLCAuLi4pCiAgbGV0IG9wdHMgPSBhOjAgPiAwICYmIHR5cGUoYToxKSA9PSBzOlRZUEUuZGljdCA/IGE6MSA6IHt9CiAgbGV0IHNoZWxsID0gZ2V0KG9wdHMsICdzaGVsbCcsIHM6aXNfd2luID8gJ2NtZC5leGUnIDogJ3NoJykKICBsZXQgc2NyaXB0ID0gZ2V0KG9wdHMsICdzY3JpcHQnLCAxKQogIGlmIHNoZWxsID1+IyAnY21kXC5leGUnCiAgICByZXR1cm4gczpzaGVsbGVzY19jbWQoYTphcmcsIHNjcmlwdCkKICBlbHNlaWYgc2hlbGwgPX4jICdwb3dlcnNoZWxsXC5leGUnIHx8IHNoZWxsID1+IyAncHdzaCQnCiAgICByZXR1cm4gczpzaGVsbGVzY19wczEoYTphcmcpCiAgZW5kaWYKICByZXR1cm4gczpzaGVsbGVzY19zaChhOmFyZykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdsb2JfZGlyKHBhdGgpCiAgcmV0dXJuIG1hcChmaWx0ZXIoczpnbG9iKGE6cGF0aCwgJyoqJyksICdpc2RpcmVjdG9yeSh2OnZhbCknKSwgJ3M6ZGlycGF0aCh2OnZhbCknKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJvZ3Jlc3NfYmFyKGxpbmUsIGJhciwgdG90YWwpCiAgY2FsbCBzZXRsaW5lKGE6bGluZSwgJ1snIC4gczpscGFkKGE6YmFyLCBhOnRvdGFsKSAuICddJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmNvbXBhcmVfZ2l0X3VyaShhLCBiKQogICIgU2VlIGBnaXQgaGVscCBjbG9uZScKICAiIGh0dHBzOi8vIFt1c2VyQF0gZ2l0aHViLmNvbVs6cG9ydF0gLyBqdW5lZ3Vubi92aW0tcGx1ZyBbLmdpdF0KICAiICAgICAgICAgIFtnaXRAXSAgZ2l0aHViLmNvbVs6cG9ydF0gOiBqdW5lZ3Vubi92aW0tcGx1ZyBbLmdpdF0KICAiIGZpbGU6Ly8gICAgICAgICAgICAgICAgICAgICAgICAgICAgLyBqdW5lZ3Vubi92aW0tcGx1ZyAgICAgICAgWy9dCiAgIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8ganVuZWd1bm4vdmltLXBsdWcgICAgICAgIFsvXQogIGxldCBwYXQgPSAnXlwlKFx3XCs6Ly9cKVw9Jy4nXCUoW15AL10qQFwpXD0nLidcKFteOi9dKlwlKDpbMC05XSpcKVw9XCknLidbOi9dJy4nXCguXHstfVwpJy4nXCUoXC5naXRcKVw9L1w/JCcKICBsZXQgbWEgPSBtYXRjaGxpc3QoYTphLCBwYXQpCiAgbGV0IG1iID0gbWF0Y2hsaXN0KGE6YiwgcGF0KQogIHJldHVybiBtYVsxOjJdID09IyBtYlsxOjJdCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpmb3JtYXRfbWVzc2FnZShidWxsZXQsIG5hbWUsIG1lc3NhZ2UpCiAgaWYgYTpidWxsZXQgIT0gJ3gnCiAgICByZXR1cm4gW3ByaW50ZignJXMgJXM6ICVzJywgYTpidWxsZXQsIGE6bmFtZSwgczpsYXN0bGluZShhOm1lc3NhZ2UpKV0KICBlbHNlCiAgICBsZXQgbGluZXMgPSBtYXAoczpsaW5lcyhhOm1lc3NhZ2UpLCAnIiAgICAiLnY6dmFsJykKICAgIHJldHVybiBleHRlbmQoW3ByaW50ZigneCAlczonLCBhOm5hbWUpXSwgbGluZXMpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOndpdGhfY2QoY21kLCBkaXIsIC4uLikKICBsZXQgc2NyaXB0ID0gYTowID4gMCA/IGE6MSA6IDEKICByZXR1cm4gcHJpbnRmKCdjZCVzICVzICYmICVzJywgczppc193aW4gPyAnIC9kJyA6ICcnLCBwbHVnI3NoZWxsZXNjYXBlKGE6ZGlyLCB7J3NjcmlwdCc6IHNjcmlwdH0pLCBhOmNtZCkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnN5c3RlbShjbWQsIC4uLikKICBsZXQgYmF0Y2hmaWxlID0gJycKICB0cnkKICAgIGxldCBbc2gsIHNoZWxsY21kZmxhZywgc2hyZF0gPSBzOmNoc2goMSkKICAgIGxldCBjbWQgPSBhOjAgPiAwID8gczp3aXRoX2NkKGE6Y21kLCBhOjEpIDogYTpjbWQKICAgIGlmIHM6aXNfd2luCiAgICAgIGxldCBbYmF0Y2hmaWxlLCBjbWRdID0gczpiYXRjaGZpbGUoY21kKQogICAgZW5kaWYKICAgIHJldHVybiBzeXN0ZW0oY21kKQogIGZpbmFsbHkKICAgIGxldCBbJnNoZWxsLCAmc2hlbGxjbWRmbGFnLCAmc2hlbGxyZWRpcl0gPSBbc2gsIHNoZWxsY21kZmxhZywgc2hyZF0KICAgIGlmIHM6aXNfd2luICYmIGZpbGVyZWFkYWJsZShiYXRjaGZpbGUpCiAgICAgIGNhbGwgZGVsZXRlKGJhdGNoZmlsZSkKICAgIGVuZGlmCiAgZW5kdHJ5CmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzeXN0ZW1fY2hvbXAoLi4uKQogIGxldCByZXQgPSBjYWxsKCdzOnN5c3RlbScsIGE6MDAwKQogIHJldHVybiB2OnNoZWxsX2Vycm9yID8gJycgOiBzdWJzdGl0dXRlKHJldCwgJ1xuJCcsICcnLCAnJykKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmdpdF92YWxpZGF0ZShzcGVjLCBjaGVja19icmFuY2gpCiAgbGV0IGVyciA9ICcnCiAgaWYgaXNkaXJlY3RvcnkoYTpzcGVjLmRpcikKICAgIGxldCByZXN1bHQgPSBzOmxpbmVzKHM6c3lzdGVtKCdnaXQgcmV2LXBhcnNlIC0tYWJicmV2LXJlZiBIRUFEIDI+JjEgJiYgZ2l0IGNvbmZpZyAtZiAuZ2l0L2NvbmZpZyByZW1vdGUub3JpZ2luLnVybCcsIGE6c3BlYy5kaXIpKQogICAgbGV0IHJlbW90ZSA9IHJlc3VsdFstMV0KICAgIGlmIHY6c2hlbGxfZXJyb3IKICAgICAgbGV0IGVyciA9IGpvaW4oW3JlbW90ZSwgJ1BsdWdDbGVhbiByZXF1aXJlZC4nXSwgIlxuIikKICAgIGVsc2VpZiAhczpjb21wYXJlX2dpdF91cmkocmVtb3RlLCBhOnNwZWMudXJpKQogICAgICBsZXQgZXJyID0gam9pbihbJ0ludmFsaWQgVVJJOiAnLnJlbW90ZSwKICAgICAgICAgICAgICAgICAgICBcICdFeHBlY3RlZDogICAgJy5hOnNwZWMudXJpLAogICAgICAgICAgICAgICAgICAgIFwgJ1BsdWdDbGVhbiByZXF1aXJlZC4nXSwgIlxuIikKICAgIGVsc2VpZiBhOmNoZWNrX2JyYW5jaCAmJiBoYXNfa2V5KGE6c3BlYywgJ2NvbW1pdCcpCiAgICAgIGxldCByZXN1bHQgPSBzOmxpbmVzKHM6c3lzdGVtKCdnaXQgcmV2LXBhcnNlIEhFQUQgMj4mMScsIGE6c3BlYy5kaXIpKQogICAgICBsZXQgc2hhID0gcmVzdWx0Wy0xXQogICAgICBpZiB2OnNoZWxsX2Vycm9yCiAgICAgICAgbGV0IGVyciA9IGpvaW4oYWRkKHJlc3VsdCwgJ1BsdWdDbGVhbiByZXF1aXJlZC4nKSwgIlxuIikKICAgICAgZWxzZWlmICFzOmhhc2hfbWF0Y2goc2hhLCBhOnNwZWMuY29tbWl0KQogICAgICAgIGxldCBlcnIgPSBqb2luKFtwcmludGYoJ0ludmFsaWQgSEVBRCAoZXhwZWN0ZWQ6ICVzLCBhY3R1YWw6ICVzKScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwgYTpzcGVjLmNvbW1pdFs6Nl0sIHNoYVs6Nl0pLAogICAgICAgICAgICAgICAgICAgICAgXCAnUGx1Z1VwZGF0ZSByZXF1aXJlZC4nXSwgIlxuIikKICAgICAgZW5kaWYKICAgIGVsc2VpZiBhOmNoZWNrX2JyYW5jaAogICAgICBsZXQgYnJhbmNoID0gcmVzdWx0WzBdCiAgICAgICIgQ2hlY2sgdGFnCiAgICAgIGlmIGhhc19rZXkoYTpzcGVjLCAndGFnJykKICAgICAgICBsZXQgdGFnID0gczpzeXN0ZW1fY2hvbXAoJ2dpdCBkZXNjcmliZSAtLWV4YWN0LW1hdGNoIC0tdGFncyBIRUFEIDI+JjEnLCBhOnNwZWMuZGlyKQogICAgICAgIGlmIGE6c3BlYy50YWcgIT0jIHRhZyAmJiBhOnNwZWMudGFnICF+ICdcKicKICAgICAgICAgIGxldCBlcnIgPSBwcmludGYoJ0ludmFsaWQgdGFnOiAlcyAoZXhwZWN0ZWQ6ICVzKS4gVHJ5IFBsdWdVcGRhdGUuJywKICAgICAgICAgICAgICAgIFwgKGVtcHR5KHRhZykgPyAnTi9BJyA6IHRhZyksIGE6c3BlYy50YWcpCiAgICAgICAgZW5kaWYKICAgICAgIiBDaGVjayBicmFuY2gKICAgICAgZWxzZWlmIGE6c3BlYy5icmFuY2ggIT0jIGJyYW5jaAogICAgICAgIGxldCBlcnIgPSBwcmludGYoJ0ludmFsaWQgYnJhbmNoOiAlcyAoZXhwZWN0ZWQ6ICVzKS4gVHJ5IFBsdWdVcGRhdGUuJywKICAgICAgICAgICAgICBcIGJyYW5jaCwgYTpzcGVjLmJyYW5jaCkKICAgICAgZW5kaWYKICAgICAgaWYgZW1wdHkoZXJyKQogICAgICAgIGxldCBbYWhlYWQsIGJlaGluZF0gPSBzcGxpdChzOmxhc3RsaW5lKHM6c3lzdGVtKHByaW50ZigKICAgICAgICAgICAgICBcICdnaXQgcmV2LWxpc3QgLS1jb3VudCAtLWxlZnQtcmlnaHQgSEVBRC4uLm9yaWdpbi8lcycsCiAgICAgICAgICAgICAgXCBhOnNwZWMuYnJhbmNoKSwgYTpzcGVjLmRpcikpLCAnXHQnKQogICAgICAgIGlmICF2OnNoZWxsX2Vycm9yICYmIGFoZWFkCiAgICAgICAgICBpZiBiZWhpbmQKICAgICAgICAgICAgIiBPbmx5IG1lbnRpb24gUGx1Z0NsZWFuIGlmIGRpdmVyZ2VkLCBvdGhlcndpc2UgaXQncyBsaWtlbHkgdG8gYmUKICAgICAgICAgICAgIiBwdXNoYWJsZSAoYW5kIHByb2JhYmx5IG5vdCB0aGF0IG1lc3NlZCB1cCkuCiAgICAgICAgICAgIGxldCBlcnIgPSBwcmludGYoCiAgICAgICAgICAgICAgICAgIFwgIkRpdmVyZ2VkIGZyb20gb3JpZ2luLyVzICglZCBjb21taXQocykgYWhlYWQgYW5kICVkIGNvbW1pdChzKSBiZWhpbmQhXG4iCiAgICAgICAgICAgICAgICAgIFwgLidCYWNrdXAgbG9jYWwgY2hhbmdlcyBhbmQgcnVuIFBsdWdDbGVhbiBhbmQgUGx1Z1VwZGF0ZSB0byByZWluc3RhbGwgaXQuJywgYTpzcGVjLmJyYW5jaCwgYWhlYWQsIGJlaGluZCkKICAgICAgICAgIGVsc2UKICAgICAgICAgICAgbGV0IGVyciA9IHByaW50ZigiQWhlYWQgb2Ygb3JpZ2luLyVzIGJ5ICVkIGNvbW1pdChzKS5cbiIKICAgICAgICAgICAgICAgICAgXCAuJ0Nhbm5vdCB1cGRhdGUgdW50aWwgbG9jYWwgY2hhbmdlcyBhcmUgcHVzaGVkLicsCiAgICAgICAgICAgICAgICAgIFwgYTpzcGVjLmJyYW5jaCwgYWhlYWQpCiAgICAgICAgICBlbmRpZgogICAgICAgIGVuZGlmCiAgICAgIGVuZGlmCiAgICBlbmRpZgogIGVsc2UKICAgIGxldCBlcnIgPSAnTm90IGZvdW5kJwogIGVuZGlmCiAgcmV0dXJuIFtlcnIsIGVyciA9fiMgJ1BsdWdDbGVhbiddCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpybV9yZihkaXIpCiAgaWYgaXNkaXJlY3RvcnkoYTpkaXIpCiAgICBjYWxsIHM6c3lzdGVtKChzOmlzX3dpbiA/ICdybWRpciAvUyAvUSAnIDogJ3JtIC1yZiAnKSAuIHBsdWcjc2hlbGxlc2NhcGUoYTpkaXIpKQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpjbGVhbihmb3JjZSkKICBjYWxsIHM6cHJlcGFyZSgpCiAgY2FsbCBhcHBlbmQoMCwgJ1NlYXJjaGluZyBmb3IgaW52YWxpZCBwbHVnaW5zIGluICcuZzpwbHVnX2hvbWUpCiAgY2FsbCBhcHBlbmQoMSwgJycpCgogICIgTGlzdCBvZiB2YWxpZCBkaXJlY3RvcmllcwogIGxldCBkaXJzID0gW10KICBsZXQgZXJycyA9IHt9CiAgbGV0IFtjbnQsIHRvdGFsXSA9IFswLCBsZW4oZzpwbHVncyldCiAgZm9yIFtuYW1lLCBzcGVjXSBpbiBpdGVtcyhnOnBsdWdzKQogICAgaWYgIXM6aXNfbWFuYWdlZChuYW1lKQogICAgICBjYWxsIGFkZChkaXJzLCBzcGVjLmRpcikKICAgIGVsc2UKICAgICAgbGV0IFtlcnIsIGNsZWFuXSA9IHM6Z2l0X3ZhbGlkYXRlKHNwZWMsIDEpCiAgICAgIGlmIGNsZWFuCiAgICAgICAgbGV0IGVycnNbc3BlYy5kaXJdID0gczpsaW5lcyhlcnIpWzBdCiAgICAgIGVsc2UKICAgICAgICBjYWxsIGFkZChkaXJzLCBzcGVjLmRpcikKICAgICAgZW5kaWYKICAgIGVuZGlmCiAgICBsZXQgY250ICs9IDEKICAgIGNhbGwgczpwcm9ncmVzc19iYXIoMiwgcmVwZWF0KCc9JywgY250KSwgdG90YWwpCiAgICBub3JtYWwhIDJHCiAgICByZWRyYXcKICBlbmRmb3IKCiAgbGV0IGFsbG93ZWQgPSB7fQogIGZvciBkaXIgaW4gZGlycwogICAgbGV0IGFsbG93ZWRbczpkaXJwYXRoKHM6cGx1Z19mbmFtZW1vZGlmeShkaXIsICc6aDpoJykpXSA9IDEKICAgIGxldCBhbGxvd2VkW2Rpcl0gPSAxCiAgICBmb3IgY2hpbGQgaW4gczpnbG9iX2RpcihkaXIpCiAgICAgIGxldCBhbGxvd2VkW2NoaWxkXSA9IDEKICAgIGVuZGZvcgogIGVuZGZvcgoKICBsZXQgdG9kbyA9IFtdCiAgbGV0IGZvdW5kID0gc29ydChzOmdsb2JfZGlyKGc6cGx1Z19ob21lKSkKICB3aGlsZSAhZW1wdHkoZm91bmQpCiAgICBsZXQgZiA9IHJlbW92ZShmb3VuZCwgMCkKICAgIGlmICFoYXNfa2V5KGFsbG93ZWQsIGYpICYmIGlzZGlyZWN0b3J5KGYpCiAgICAgIGNhbGwgYWRkKHRvZG8sIGYpCiAgICAgIGNhbGwgYXBwZW5kKGxpbmUoJyQnKSwgJy0gJyAuIGYpCiAgICAgIGlmIGhhc19rZXkoZXJycywgZikKICAgICAgICBjYWxsIGFwcGVuZChsaW5lKCckJyksICcgICAgJyAuIGVycnNbZl0pCiAgICAgIGVuZGlmCiAgICAgIGxldCBmb3VuZCA9IGZpbHRlcihmb3VuZCwgJ3N0cmlkeCh2OnZhbCwgZikgIT0gMCcpCiAgICBlbmQKICBlbmR3aGlsZQoKICA0CiAgcmVkcmF3CiAgaWYgZW1wdHkodG9kbykKICAgIGNhbGwgYXBwZW5kKGxpbmUoJyQnKSwgJ0FscmVhZHkgY2xlYW4uJykKICBlbHNlCiAgICBsZXQgczpjbGVhbl9jb3VudCA9IDAKICAgIGNhbGwgYXBwZW5kKDMsIFsnRGlyZWN0b3JpZXMgdG8gZGVsZXRlOicsICcnXSkKICAgIHJlZHJhdyEKICAgIGlmIGE6Zm9yY2UgfHwgczphc2tfbm9faW50ZXJydXB0KCdEZWxldGUgYWxsIGRpcmVjdG9yaWVzPycpCiAgICAgIGNhbGwgczpkZWxldGUoWzYsIGxpbmUoJyQnKV0sIDEpCiAgICBlbHNlCiAgICAgIGNhbGwgc2V0bGluZSg0LCAnQ2FuY2VsbGVkLicpCiAgICAgIG5ub3JlbWFwIDxzaWxlbnQ+IDxidWZmZXI+IGQgOnNldCBvcGZ1bmM9PHNpZD5kZWxldGVfb3A8Y3I+Z0AKICAgICAgbm1hcCAgICAgPHNpbGVudD4gPGJ1ZmZlcj4gZGQgZF8KICAgICAgeG5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gZCA6PGMtdT5jYWxsIDxzaWQ+ZGVsZXRlX29wKHZpc3VhbG1vZGUoKSwgMSk8Y3I+CiAgICAgIGVjaG8gJ0RlbGV0ZSB0aGUgbGluZXMgKGR7bW90aW9ufSkgdG8gZGVsZXRlIHRoZSBjb3JyZXNwb25kaW5nIGRpcmVjdG9yaWVzJwogICAgZW5kaWYKICBlbmRpZgogIDQKICBzZXRsb2NhbCBub21vZGlmaWFibGUKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRlbGV0ZV9vcCh0eXBlLCAuLi4pCiAgY2FsbCBzOmRlbGV0ZShhOjAgPyBbbGluZSgiJzwiKSwgbGluZSgiJz4iKV0gOiBbbGluZSgiJ1siKSwgbGluZSgiJ10iKV0sIDApCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpkZWxldGUocmFuZ2UsIGZvcmNlKQogIGxldCBbbDEsIGwyXSA9IGE6cmFuZ2UKICBsZXQgZm9yY2UgPSBhOmZvcmNlCiAgd2hpbGUgbDEgPD0gbDIKICAgIGxldCBsaW5lID0gZ2V0bGluZShsMSkKICAgIGlmIGxpbmUgPX4gJ14tICcgJiYgaXNkaXJlY3RvcnkobGluZVsyOl0pCiAgICAgIGV4ZWN1dGUgbDEKICAgICAgcmVkcmF3IQogICAgICBsZXQgYW5zd2VyID0gZm9yY2UgPyAxIDogczphc2soJ0RlbGV0ZSAnLmxpbmVbMjpdLic/JywgMSkKICAgICAgbGV0IGZvcmNlID0gZm9yY2UgfHwgYW5zd2VyID4gMQogICAgICBpZiBhbnN3ZXIKICAgICAgICBjYWxsIHM6cm1fcmYobGluZVsyOl0pCiAgICAgICAgc2V0bG9jYWwgbW9kaWZpYWJsZQogICAgICAgIGNhbGwgc2V0bGluZShsMSwgJ34nLmxpbmVbMTpdKQogICAgICAgIGxldCBzOmNsZWFuX2NvdW50ICs9IDEKICAgICAgICBjYWxsIHNldGxpbmUoNCwgcHJpbnRmKCdSZW1vdmVkICVkIGRpcmVjdG9yaWVzLicsIHM6Y2xlYW5fY291bnQpKQogICAgICAgIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogICAgICBlbmRpZgogICAgZW5kaWYKICAgIGxldCBsMSArPSAxCiAgZW5kd2hpbGUKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZ3JhZGUoKQogIGVjaG8gJ0Rvd25sb2FkaW5nIHRoZSBsYXRlc3QgdmVyc2lvbiBvZiB2aW0tcGx1ZycKICByZWRyYXcKICBsZXQgdG1wID0gczpwbHVnX3RlbXBuYW1lKCkKICBsZXQgbmV3ID0gdG1wIC4gJy9wbHVnLnZpbScKCiAgdHJ5CiAgICBsZXQgb3V0ID0gczpzeXN0ZW0ocHJpbnRmKCdnaXQgY2xvbmUgLS1kZXB0aCAxICVzICVzJywgcGx1ZyNzaGVsbGVzY2FwZShzOnBsdWdfc3JjKSwgcGx1ZyNzaGVsbGVzY2FwZSh0bXApKSkKICAgIGlmIHY6c2hlbGxfZXJyb3IKICAgICAgcmV0dXJuIHM6ZXJyKCdFcnJvciB1cGdyYWRpbmcgdmltLXBsdWc6ICcuIG91dCkKICAgIGVuZGlmCgogICAgaWYgcmVhZGZpbGUoczptZSkgPT0jIHJlYWRmaWxlKG5ldykKICAgICAgZWNobyAndmltLXBsdWcgaXMgYWxyZWFkeSB1cC10by1kYXRlJwogICAgICByZXR1cm4gMAogICAgZWxzZQogICAgICBjYWxsIHJlbmFtZShzOm1lLCBzOm1lIC4gJy5vbGQnKQogICAgICBjYWxsIHJlbmFtZShuZXcsIHM6bWUpCiAgICAgIHVubGV0IGc6bG9hZGVkX3BsdWcKICAgICAgZWNobyAndmltLXBsdWcgaGFzIGJlZW4gdXBncmFkZWQnCiAgICAgIHJldHVybiAxCiAgICBlbmRpZgogIGZpbmFsbHkKICAgIHNpbGVudCEgY2FsbCBzOnJtX3JmKHRtcCkKICBlbmR0cnkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnVwZ3JhZGVfc3BlY3MoKQogIGZvciBzcGVjIGluIHZhbHVlcyhnOnBsdWdzKQogICAgbGV0IHNwZWMuZnJvemVuID0gZ2V0KHNwZWMsICdmcm96ZW4nLCAwKQogIGVuZGZvcgplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c3RhdHVzKCkKICBjYWxsIHM6cHJlcGFyZSgpCiAgY2FsbCBhcHBlbmQoMCwgJ0NoZWNraW5nIHBsdWdpbnMnKQogIGNhbGwgYXBwZW5kKDEsICcnKQoKICBsZXQgZWNudCA9IDAKICBsZXQgdW5sb2FkZWQgPSAwCiAgbGV0IFtjbnQsIHRvdGFsXSA9IFswLCBsZW4oZzpwbHVncyldCiAgZm9yIFtuYW1lLCBzcGVjXSBpbiBpdGVtcyhnOnBsdWdzKQogICAgbGV0IGlzX2RpciA9IGlzZGlyZWN0b3J5KHNwZWMuZGlyKQogICAgaWYgaGFzX2tleShzcGVjLCAndXJpJykKICAgICAgaWYgaXNfZGlyCiAgICAgICAgbGV0IFtlcnIsIF9dID0gczpnaXRfdmFsaWRhdGUoc3BlYywgMSkKICAgICAgICBsZXQgW3ZhbGlkLCBtc2ddID0gW2VtcHR5KGVyciksIGVtcHR5KGVycikgPyAnT0snIDogZXJyXQogICAgICBlbHNlCiAgICAgICAgbGV0IFt2YWxpZCwgbXNnXSA9IFswLCAnTm90IGZvdW5kLiBUcnkgUGx1Z0luc3RhbGwuJ10KICAgICAgZW5kaWYKICAgIGVsc2UKICAgICAgaWYgaXNfZGlyCiAgICAgICAgbGV0IFt2YWxpZCwgbXNnXSA9IFsxLCAnT0snXQogICAgICBlbHNlCiAgICAgICAgbGV0IFt2YWxpZCwgbXNnXSA9IFswLCAnTm90IGZvdW5kLiddCiAgICAgIGVuZGlmCiAgICBlbmRpZgogICAgbGV0IGNudCArPSAxCiAgICBsZXQgZWNudCArPSAhdmFsaWQKICAgICIgYHM6bG9hZGVkYCBlbnRyeSBjYW4gYmUgbWlzc2luZyBpZiBQbHVnVXBncmFkZWQKICAgIGlmIGlzX2RpciAmJiBnZXQoczpsb2FkZWQsIG5hbWUsIC0xKSA9PSAwCiAgICAgIGxldCB1bmxvYWRlZCA9IDEKICAgICAgbGV0IG1zZyAuPSAnIChub3QgbG9hZGVkKScKICAgIGVuZGlmCiAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIHJlcGVhdCgnPScsIGNudCksIHRvdGFsKQogICAgY2FsbCBhcHBlbmQoMywgczpmb3JtYXRfbWVzc2FnZSh2YWxpZCA/ICctJyA6ICd4JywgbmFtZSwgbXNnKSkKICAgIG5vcm1hbCEgMkcKICAgIHJlZHJhdwogIGVuZGZvcgogIGNhbGwgc2V0bGluZSgxLCAnRmluaXNoZWQuICcuZWNudC4nIGVycm9yKHMpLicpCiAgbm9ybWFsISBnZwogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGlmIHVubG9hZGVkCiAgICBlY2hvICJQcmVzcyAnTCcgb24gZWFjaCBsaW5lIHRvIGxvYWQgcGx1Z2luLCBvciAnVScgdG8gdXBkYXRlIgogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gTCA6Y2FsbCA8U0lEPnN0YXR1c19sb2FkKGxpbmUoJy4nKSk8Y3I+CiAgICB4bm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBMIDpjYWxsIDxTSUQ+c3RhdHVzX2xvYWQobGluZSgnLicpKTxjcj4KICBlbmQKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmV4dHJhY3RfbmFtZShzdHIsIHByZWZpeCwgc3VmZml4KQogIHJldHVybiBtYXRjaHN0cihhOnN0ciwgJ14nLmE6cHJlZml4LicgXHpzW146XVwrXHplOi4qJy5hOnN1ZmZpeC4nJCcpCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzdGF0dXNfbG9hZChsbnVtKQogIGxldCBsaW5lID0gZ2V0bGluZShhOmxudW0pCiAgbGV0IG5hbWUgPSBzOmV4dHJhY3RfbmFtZShsaW5lLCAnLScsICcobm90IGxvYWRlZCknKQogIGlmICFlbXB0eShuYW1lKQogICAgY2FsbCBwbHVnI2xvYWQobmFtZSkKICAgIHNldGxvY2FsIG1vZGlmaWFibGUKICAgIGNhbGwgc2V0bGluZShhOmxudW0sIHN1YnN0aXR1dGUobGluZSwgJyAobm90IGxvYWRlZCkkJywgJycsICcnKSkKICAgIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGVuZGlmCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzdGF0dXNfdXBkYXRlKCkgcmFuZ2UKICBsZXQgbGluZXMgPSBnZXRsaW5lKGE6Zmlyc3RsaW5lLCBhOmxhc3RsaW5lKQogIGxldCBuYW1lcyA9IGZpbHRlcihtYXAobGluZXMsICdzOmV4dHJhY3RfbmFtZSh2OnZhbCwgIlt4LV0iLCAiIiknKSwgJyFlbXB0eSh2OnZhbCknKQogIGlmICFlbXB0eShuYW1lcykKICAgIGVjaG8KICAgIGV4ZWN1dGUgJ1BsdWdVcGRhdGUnIGpvaW4obmFtZXMpCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmlzX3ByZXZpZXdfd2luZG93X29wZW4oKQogIHNpbGVudCEgd2luY21kIFAKICBpZiAmcHJldmlld3dpbmRvdwogICAgd2luY21kIHAKICAgIHJldHVybiAxCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmZpbmRfbmFtZShsbnVtKQogIGZvciBsbnVtIGluIHJldmVyc2UocmFuZ2UoMSwgYTpsbnVtKSkKICAgIGxldCBsaW5lID0gZ2V0bGluZShsbnVtKQogICAgaWYgZW1wdHkobGluZSkKICAgICAgcmV0dXJuICcnCiAgICBlbmRpZgogICAgbGV0IG5hbWUgPSBzOmV4dHJhY3RfbmFtZShsaW5lLCAnLScsICcnKQogICAgaWYgIWVtcHR5KG5hbWUpCiAgICAgIHJldHVybiBuYW1lCiAgICBlbmRpZgogIGVuZGZvcgogIHJldHVybiAnJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6cHJldmlld19jb21taXQoKQogIGlmIGI6cGx1Z19wcmV2aWV3IDwgMAogICAgbGV0IGI6cGx1Z19wcmV2aWV3ID0gIXM6aXNfcHJldmlld193aW5kb3dfb3BlbigpCiAgZW5kaWYKCiAgbGV0IHNoYSA9IG1hdGNoc3RyKGdldGxpbmUoJy4nKSwgJ14gIFxYKlx6c1swLTlhLWZdXHs3LDl9JykKICBpZiBlbXB0eShzaGEpCiAgICByZXR1cm4KICBlbmRpZgoKICBsZXQgbmFtZSA9IHM6ZmluZF9uYW1lKGxpbmUoJy4nKSkKICBpZiBlbXB0eShuYW1lKSB8fCAhaGFzX2tleShnOnBsdWdzLCBuYW1lKSB8fCAhaXNkaXJlY3RvcnkoZzpwbHVnc1tuYW1lXS5kaXIpCiAgICByZXR1cm4KICBlbmRpZgoKICBpZiBleGlzdHMoJ2c6cGx1Z19wd2luZG93JykgJiYgIXM6aXNfcHJldmlld193aW5kb3dfb3BlbigpCiAgICBleGVjdXRlIGc6cGx1Z19wd2luZG93CiAgICBleGVjdXRlICdlJyBzaGEKICBlbHNlCiAgICBleGVjdXRlICdwZWRpdCcgc2hhCiAgICB3aW5jbWQgUAogIGVuZGlmCiAgc2V0bG9jYWwgcHJldmlld3dpbmRvdyBmaWxldHlwZT1naXQgYnVmdHlwZT1ub2ZpbGUgbm9idWZsaXN0ZWQgbW9kaWZpYWJsZQogIGxldCBiYXRjaGZpbGUgPSAnJwogIHRyeQogICAgbGV0IFtzaCwgc2hlbGxjbWRmbGFnLCBzaHJkXSA9IHM6Y2hzaCgxKQogICAgbGV0IGNtZCA9ICdjZCAnLnBsdWcjc2hlbGxlc2NhcGUoZzpwbHVnc1tuYW1lXS5kaXIpLicgJiYgZ2l0IHNob3cgLS1uby1jb2xvciAtLXByZXR0eT1tZWRpdW0gJy5zaGEKICAgIGlmIHM6aXNfd2luCiAgICAgIGxldCBbYmF0Y2hmaWxlLCBjbWRdID0gczpiYXRjaGZpbGUoY21kKQogICAgZW5kaWYKICAgIGV4ZWN1dGUgJ3NpbGVudCAlIScgY21kCiAgZmluYWxseQogICAgbGV0IFsmc2hlbGwsICZzaGVsbGNtZGZsYWcsICZzaGVsbHJlZGlyXSA9IFtzaCwgc2hlbGxjbWRmbGFnLCBzaHJkXQogICAgaWYgczppc193aW4gJiYgZmlsZXJlYWRhYmxlKGJhdGNoZmlsZSkKICAgICAgY2FsbCBkZWxldGUoYmF0Y2hmaWxlKQogICAgZW5kaWYKICBlbmR0cnkKICBzZXRsb2NhbCBub21vZGlmaWFibGUKICBubm9yZW1hcCA8c2lsZW50PiA8YnVmZmVyPiBxIDpxPGNyPgogIHdpbmNtZCBwCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpzZWN0aW9uKGZsYWdzKQogIGNhbGwgc2VhcmNoKCdcKF5beC1dIFwpXEA8PVteOl1cKzonLCBhOmZsYWdzKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6Zm9ybWF0X2dpdF9sb2cobGluZSkKICBsZXQgaW5kZW50ID0gJyAgJwogIGxldCB0b2tlbnMgPSBzcGxpdChhOmxpbmUsIG5yMmNoYXIoMSkpCiAgaWYgbGVuKHRva2VucykgIT0gNQogICAgcmV0dXJuIGluZGVudC5zdWJzdGl0dXRlKGE6bGluZSwgJ1xzKiQnLCAnJywgJycpCiAgZW5kaWYKICBsZXQgW2dyYXBoLCBzaGEsIHJlZnMsIHN1YmplY3QsIGRhdGVdID0gdG9rZW5zCiAgbGV0IHRhZyA9IG1hdGNoc3RyKHJlZnMsICd0YWc6IFteLCldXCsnKQogIGxldCB0YWcgPSBlbXB0eSh0YWcpID8gJyAnIDogJyAoJy50YWcuJykgJwogIHJldHVybiBwcmludGYoJyVzJXMlcyVzJXMgKCVzKScsIGluZGVudCwgZ3JhcGgsIHNoYSwgdGFnLCBzdWJqZWN0LCBkYXRlKQplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6YXBwZW5kX3VsKGxudW0sIHRleHQpCiAgY2FsbCBhcHBlbmQoYTpsbnVtLCBbJycsIGE6dGV4dCwgcmVwZWF0KCctJywgbGVuKGE6dGV4dCkpXSkKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOmRpZmYoKQogIGNhbGwgczpwcmVwYXJlKCkKICBjYWxsIGFwcGVuZCgwLCBbJ0NvbGxlY3RpbmcgY2hhbmdlcyAuLi4nLCAnJ10pCiAgbGV0IGNudHMgPSBbMCwgMF0KICBsZXQgYmFyID0gJycKICBsZXQgdG90YWwgPSBmaWx0ZXIoY29weShnOnBsdWdzKSwgJ3M6aXNfbWFuYWdlZCh2OmtleSkgJiYgaXNkaXJlY3Rvcnkodjp2YWwuZGlyKScpCiAgY2FsbCBzOnByb2dyZXNzX2JhcigyLCBiYXIsIGxlbih0b3RhbCkpCiAgZm9yIG9yaWdpbiBpbiBbMSwgMF0KICAgIGxldCBwbHVncyA9IHJldmVyc2Uoc29ydChpdGVtcyhmaWx0ZXIoY29weSh0b3RhbCksIChvcmlnaW4gPyAnJyA6ICchJykuJyhoYXNfa2V5KHY6dmFsLCAiY29tbWl0IikgfHwgaGFzX2tleSh2OnZhbCwgInRhZyIpKScpKSkpCiAgICBpZiBlbXB0eShwbHVncykKICAgICAgY29udGludWUKICAgIGVuZGlmCiAgICBjYWxsIHM6YXBwZW5kX3VsKDIsIG9yaWdpbiA/ICdQZW5kaW5nIHVwZGF0ZXM6JyA6ICdMYXN0IHVwZGF0ZTonKQogICAgZm9yIFtrLCB2XSBpbiBwbHVncwogICAgICBsZXQgcmFuZ2UgPSBvcmlnaW4gPyAnLi5vcmlnaW4vJy52LmJyYW5jaCA6ICdIRUFEQHsxfS4uJwogICAgICBsZXQgY21kID0gJ2dpdCBsb2cgLS1ncmFwaCAtLWNvbG9yPW5ldmVyICcKICAgICAgXCAuIChzOmdpdF92ZXJzaW9uX3JlcXVpcmVtZW50KDIsIDEwLCAwKSA/ICctLW5vLXNob3ctc2lnbmF0dXJlICcgOiAnJykKICAgICAgXCAuIGpvaW4obWFwKFsnLS1wcmV0dHk9Zm9ybWF0OiV4MDElaCV4MDElZCV4MDElcyV4MDElY3InLCByYW5nZV0sICdwbHVnI3NoZWxsZXNjYXBlKHY6dmFsKScpKQogICAgICBpZiBoYXNfa2V5KHYsICdydHAnKQogICAgICAgIGxldCBjbWQgLj0gJyAtLSAnLnBsdWcjc2hlbGxlc2NhcGUodi5ydHApCiAgICAgIGVuZGlmCiAgICAgIGxldCBkaWZmID0gczpzeXN0ZW1fY2hvbXAoY21kLCB2LmRpcikKICAgICAgaWYgIWVtcHR5KGRpZmYpCiAgICAgICAgbGV0IHJlZiA9IGhhc19rZXkodiwgJ3RhZycpID8gKCcgKHRhZzogJy52LnRhZy4nKScpIDogaGFzX2tleSh2LCAnY29tbWl0JykgPyAoJyAnLnYuY29tbWl0KSA6ICcnCiAgICAgICAgY2FsbCBhcHBlbmQoNSwgZXh0ZW5kKFsnJywgJy0gJy5rLic6Jy5yZWZdLCBtYXAoczpsaW5lcyhkaWZmKSwgJ3M6Zm9ybWF0X2dpdF9sb2codjp2YWwpJykpKQogICAgICAgIGxldCBjbnRzW29yaWdpbl0gKz0gMQogICAgICBlbmRpZgogICAgICBsZXQgYmFyIC49ICc9JwogICAgICBjYWxsIHM6cHJvZ3Jlc3NfYmFyKDIsIGJhciwgbGVuKHRvdGFsKSkKICAgICAgbm9ybWFsISAyRwogICAgICByZWRyYXcKICAgIGVuZGZvcgogICAgaWYgIWNudHNbb3JpZ2luXQogICAgICBjYWxsIGFwcGVuZCg1LCBbJycsICdOL0EnXSkKICAgIGVuZGlmCiAgZW5kZm9yCiAgY2FsbCBzZXRsaW5lKDEsIHByaW50ZignJWQgcGx1Z2luKHMpIHVwZGF0ZWQuJywgY250c1swXSkKICAgICAgICBcIC4gKGNudHNbMV0gPyBwcmludGYoJyAlZCBwbHVnaW4ocykgaGF2ZSBwZW5kaW5nIHVwZGF0ZXMuJywgY250c1sxXSkgOiAnJykpCgogIGlmIGNudHNbMF0gfHwgY250c1sxXQogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gPHBsdWc+KHBsdWctcHJldmlldykgOnNpbGVudCEgY2FsbCA8U0lEPnByZXZpZXdfY29tbWl0KCk8Y3I+CiAgICBpZiBlbXB0eShtYXBhcmcoIlw8Y3I+IiwgJ24nKSkKICAgICAgbm1hcCA8YnVmZmVyPiA8Y3I+IDxwbHVnPihwbHVnLXByZXZpZXcpCiAgICBlbmRpZgogICAgaWYgZW1wdHkobWFwYXJnKCdvJywgJ24nKSkKICAgICAgbm1hcCA8YnVmZmVyPiBvIDxwbHVnPihwbHVnLXByZXZpZXcpCiAgICBlbmRpZgogIGVuZGlmCiAgaWYgY250c1swXQogICAgbm5vcmVtYXAgPHNpbGVudD4gPGJ1ZmZlcj4gWCA6Y2FsbCA8U0lEPnJldmVydCgpPGNyPgogICAgZWNobyAiUHJlc3MgJ1gnIG9uIGVhY2ggYmxvY2sgdG8gcmV2ZXJ0IHRoZSB1cGRhdGUiCiAgZW5kaWYKICBub3JtYWwhIGdnCiAgc2V0bG9jYWwgbm9tb2RpZmlhYmxlCmVuZGZ1bmN0aW9uCgpmdW5jdGlvbiEgczpyZXZlcnQoKQogIGlmIHNlYXJjaCgnXlBlbmRpbmcgdXBkYXRlcycsICdiblcnKQogICAgcmV0dXJuCiAgZW5kaWYKCiAgbGV0IG5hbWUgPSBzOmZpbmRfbmFtZShsaW5lKCcuJykpCiAgaWYgZW1wdHkobmFtZSkgfHwgIWhhc19rZXkoZzpwbHVncywgbmFtZSkgfHwKICAgIFwgaW5wdXQocHJpbnRmKCdSZXZlcnQgdGhlIHVwZGF0ZSBvZiAlcz8gKHkvTikgJywgbmFtZSkpICF+PyAnXnknCiAgICByZXR1cm4KICBlbmRpZgoKICBjYWxsIHM6c3lzdGVtKCdnaXQgcmVzZXQgLS1oYXJkIEhFQURAezF9ICYmIGdpdCBjaGVja291dCAnLnBsdWcjc2hlbGxlc2NhcGUoZzpwbHVnc1tuYW1lXS5icmFuY2gpLicgLS0nLCBnOnBsdWdzW25hbWVdLmRpcikKICBzZXRsb2NhbCBtb2RpZmlhYmxlCiAgbm9ybWFsISAiX2RhcAogIHNldGxvY2FsIG5vbW9kaWZpYWJsZQogIGVjaG8gJ1JldmVydGVkJwplbmRmdW5jdGlvbgoKZnVuY3Rpb24hIHM6c25hcHNob3QoZm9yY2UsIC4uLikgYWJvcnQKICBjYWxsIHM6cHJlcGFyZSgpCiAgc2V0ZiB2aW0KICBjYWxsIGFwcGVuZCgwLCBbJyIgR2VuZXJhdGVkIGJ5IHZpbS1wbHVnJywKICAgICAgICAgICAgICAgIFwgJyIgJy5zdHJmdGltZSgiJWMiKSwKICAgICAgICAgICAgICAgIFwgJyIgOnNvdXJjZSB0aGlzIGZpbGUgaW4gdmltIHRvIHJlc3RvcmUgdGhlIHNuYXBzaG90JywKICAgICAgICAgICAgICAgIFwgJyIgb3IgZXhlY3V0ZTogdmltIC1TIHNuYXBzaG90LnZpbScsCiAgICAgICAgICAgICAgICBcICcnLCAnJywgJ1BsdWdVcGRhdGUhJ10pCiAgMQogIGxldCBhbmNob3IgPSBsaW5lKCckJykgLSAzCiAgbGV0IG5hbWVzID0gc29ydChrZXlzKGZpbHRlcihjb3B5KGc6cGx1Z3MpLAogICAgICAgIFwnaGFzX2tleSh2OnZhbCwgInVyaSIpICYmICFoYXNfa2V5KHY6dmFsLCAiY29tbWl0IikgJiYgaXNkaXJlY3Rvcnkodjp2YWwuZGlyKScpKSkKICBmb3IgbmFtZSBpbiByZXZlcnNlKG5hbWVzKQogICAgbGV0IHNoYSA9IHM6c3lzdGVtX2Nob21wKCdnaXQgcmV2LXBhcnNlIC0tc2hvcnQgSEVBRCcsIGc6cGx1Z3NbbmFtZV0uZGlyKQogICAgaWYgIWVtcHR5KHNoYSkKICAgICAgY2FsbCBhcHBlbmQoYW5jaG9yLCBwcmludGYoInNpbGVudCEgbGV0IGc6cGx1Z3NbJyVzJ10uY29tbWl0ID0gJyVzJyIsIG5hbWUsIHNoYSkpCiAgICAgIHJlZHJhdwogICAgZW5kaWYKICBlbmRmb3IKCiAgaWYgYTowID4gMAogICAgbGV0IGZuID0gczpwbHVnX2V4cGFuZChhOjEpCiAgICBpZiBmaWxlcmVhZGFibGUoZm4pICYmICEoYTpmb3JjZSB8fCBzOmFzayhhOjEuJyBhbHJlYWR5IGV4aXN0cy4gT3ZlcndyaXRlPycpKQogICAgICByZXR1cm4KICAgIGVuZGlmCiAgICBjYWxsIHdyaXRlZmlsZShnZXRsaW5lKDEsICckJyksIGZuKQogICAgZWNobyAnU2F2ZWQgYXMgJy5hOjEKICAgIHNpbGVudCBleGVjdXRlICdlJyBzOmVzYyhmbikKICAgIHNldGYgdmltCiAgZW5kaWYKZW5kZnVuY3Rpb24KCmZ1bmN0aW9uISBzOnNwbGl0X3J0cCgpCiAgcmV0dXJuIHNwbGl0KCZydHAsICdcXFxAPCEsJykKZW5kZnVuY3Rpb24KCmxldCBzOmZpcnN0X3J0cCA9IHM6ZXNjcnRwKGdldChzOnNwbGl0X3J0cCgpLCAwLCAnJykpCmxldCBzOmxhc3RfcnRwICA9IHM6ZXNjcnRwKGdldChzOnNwbGl0X3J0cCgpLCAtMSwgJycpKQoKaWYgZXhpc3RzKCdnOnBsdWdzJykKICBsZXQgZzpwbHVnc19vcmRlciA9IGdldChnOiwgJ3BsdWdzX29yZGVyJywga2V5cyhnOnBsdWdzKSkKICBjYWxsIHM6dXBncmFkZV9zcGVjcygpCiAgY2FsbCBzOmRlZmluZV9jb21tYW5kcygpCmVuZGlmCgpsZXQgJmNwbyA9IHM6Y3BvX3NhdmUKdW5sZXQgczpjcG9fc2F2ZQo=",
        "usr/intshell/dev/vim/sh.vim": "aGlnaGxpZ2h0IGlzaEtleSAgICBjdGVybWZnPXllbGxvdwpoaWdobGlnaHQgaXNoRnVuYyAgICBjdGVybWZnPWN5YW4KCnN5bnRheCBtYXRjaCBpc2hLZXkgIm1ha2UiCnN5bnRheCBtYXRjaCBpc2hLZXkgInJlcXVpcmUiCnN5bnRheCBtYXRjaCBpc2hGdW5jICJpc2hfbWlzc19wcmVwYXJlIgpzeW50YXggbWF0Y2ggaXNoRnVuYyAiaXNoX21pc3NfbWFrZSIKCnN5bnRheCBtYXRjaCBpc2hLZXkgImxvY2FsIgpzeW50YXggbWF0Y2ggaXNoS2V5ICJ3aGl0ZSIKCnNldCBmb2xkbWV0aG9kPW1hcmtlcgpzZXQgZm9sZG1hcmtlcj17LH0KCg==",
        "usr/intshell/dev/vim/shy.vim": "CnNldCBmb2xkbWV0aG9kPWluZGVudApzeW50YXggbWF0Y2ggQ29tbWVudAkgICAgIiMuKiQiCnN5bnRheCBtYXRjaCBDb21tZW50CSAgICAiXCJbXlwiXSpcIiIKCmhpZ2hsaWdodCBzaHlTdHJpbmcgICAgIGN0ZXJtZmc9bWFnZW50YQpzeW50YXggcmVnaW9uIHNoeVN0cmluZwlzdGFydD0iYCIgZW5kPSJgIgpzeW50YXggbWF0Y2ggc2h5U3RyaW5nCSAgICAiXGBbXlxgXSpcYCIKc3ludGF4IG1hdGNoIHNoeVN0cmluZwkgICAgImZhbHNlIgpzeW50YXggbWF0Y2ggc2h5U3RyaW5nCSAgICAidHJ1ZSIKCmhpZ2hsaWdodCBzaHlDb250ZXh0ICAgIGN0ZXJtZmc9cmVkCnN5bnRheCBtYXRjaCBzaHlDb250ZXh0ICJcflthLXpcLl1cKyIKCmhpZ2hsaWdodCBzaHlDb21tYW5kICAgIGN0ZXJtZmc9Z3JlZW4Kc3ludGF4IG1hdGNoIHNoeUNvbW1hbmQgIl4gICAgW2EtekEtWjAtOTouX11cKyIKc3ludGF4IG1hdGNoIHNoeUNvbW1hbmQgIl5cdFthLXpBLVowLTk6Ll9dXCsiCnN5bnRheCBtYXRjaCBzaHlDb21tYW5kICJeW2EtekEtWjAtOTouX11cKyIKCmhpZ2hsaWdodCBzaHlDb25maWcgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIHNoeUNvbmZpZyAiXiAgICBjb25maWciCnN5bnRheCBtYXRjaCBzaHlDb25maWcgIl5zb3VyY2UiCnN5bnRheCBtYXRjaCBzaHlDb25maWcgIl5yZXR1cm4iCgoKaGlnaGxpZ2h0IHNoeVRpdGxlICAgIGN0ZXJtYmc9ZGFya3JlZCBjdGVybWZnPXdoaXRlCmhpZ2hsaWdodCBzaHlTZWN0aW9uICAgIGN0ZXJtYmc9ZGFya2dyZWVuIGN0ZXJtZmc9d2hpdGUKc3ludGF4IG1hdGNoIHNoeVRpdGxlICJedGl0bGUiCnN5bnRheCBtYXRjaCBzaHlUaXRsZSAiXmNoYXB0ZXIiCnN5bnRheCBtYXRjaCBzaHlTZWN0aW9uICJec2VjdGlvbiIKCg==",
        "usr/intshell/dev/vim/vim.sh": "IyEvYmluL2Jhc2gKCmlzaF9kZXZfdmltX3ByZXBhcmUoKSB7CiAgICBsb2NhbCBmcm9tPSRQV0QvdXNyL2ludHNoZWxsL2Rldi92aW0KCiAgICBta2RpciAtcCB+Ly52aW0vYXV0b2xvYWQKICAgIGlzaF9zeXNfbGlua19jcmVhdGUgfi8udmltL2F1dG9sb2FkL3BsdWcudmltICRmcm9tL3BsdWcudmltCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnZpbS9hdXRvbG9hZC9hdXRvLnZpbSAkZnJvbS9hdXRvLnZpbQoKICAgIG1rZGlyIC1wIH4vLnZpbS9zeW50YXgKICAgIGlzaF9zeXNfbGlua19jcmVhdGUgfi8udmltL3N5bnRheC9zaC52aW0gJGZyb20vc2gudmltCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnZpbS9zeW50YXgvc2h5LnZpbSAkZnJvbS9zaHkudmltCiAgICBpc2hfc3lzX2xpbmtfY3JlYXRlIH4vLnZpbS9zeW50YXgvZ28udmltICRmcm9tL2dvLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L2ltbC52aW0gJGZyb20vaW1sLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L3ptbC52aW0gJGZyb20vem1sLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L2Nzcy52aW0gJGZyb20vY3NzLnZpbQogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW0vc3ludGF4L2phdmFzY3JpcHQudmltICRmcm9tL2phdmFzY3JpcHQudmltCgogICAgaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW1yYyAkZnJvbS92aW1yYwogICAgdmltIC1jIFBsdWdJbnN0YWxsIC1jIGV4aXQgLWMgZXhpdAogICAgdmltIC1jIEdvSW5zdGFsbEJpbmFyaWVzIC1jIGV4aXQgLWMgZXhpdAp9CmlzaF9kZXZfdmltX2NsZWFyKCkgewogICAgZm9yIHBhdGggaW4gdm9sY2Fub3MgbGVhcm5pbmcgaWNlYmVyZ3MgdG9vbGtpdHMgaW50c2hlbGw7IGRvCiAgICAgICAgZm9yIGZpbGUgaW4gYGZpbmQgdXNyLyRwYXRoLyAtbmFtZSAiKnN3cCJgOyBkbwogICAgICAgICAgICBpc2hfbG9nX2RlYnVnICJybSAkZmlsZSI7IHJtICRmaWxlCiAgICAgICAgZG9uZQogICAgZG9uZQoKICAgIGZvciBmaWxlIGluIGBmaW5kIC4vIC1uYW1lICIqc3dwImA7IGRvCiAgICAgICAgaXNoX2xvZ19kZWJ1ZyAicm0gJGZpbGUiOyBybSAiJGZpbGUiCiAgICBkb25lCn0KCg==",
        "usr/intshell/dev/vim/vimrc": "IiDova/ku7blronoo4Uge3t7CiIkIGN1cmwgLWZMbyB+Ly52aW0vYXV0b2xvYWQvcGx1Zy52aW0gLS1jcmVhdGUtZGlycyBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vanVuZWd1bm4vdmltLXBsdWcvbWFzdGVyL3BsdWcudmltCiIKIjEuIOWuieijhXZpbeWQhOenjeaPkuS7tgoiOlBsdWdJbnN0YWxsCiIKIjIuIOWuieijhWdv5ZCE56eN5o+S5Lu2CiI6R29JbnN0YWxsQmluYXJpZXMKIn19fQoiIOaPkuS7tuWIl+ihqCJ7e3sKaWYgZmlsZXJlYWRhYmxlKGV4cGFuZCgifi8udmltL2F1dG9sb2FkL3BsdWcudmltIikpCgljYWxsIHBsdWcjYmVnaW4oKQoJUGx1ZyAnZ2NtdC90YWJvby52aW0nCglzZXQgc2Vzc2lvbm9wdGlvbnMrPXRhYnBhZ2VzLGdsb2JhbHMKCglQbHVnICdraWVuL2N0cmxwLnZpbScKCWxldCBnOmN0cmxwX2NtZD0nQ3RybFBCdWZmZXInCgoJUGx1ZyAndmltLWFpcmxpbmUvdmltLWFpcmxpbmUnCglQbHVnICdhaXJibGFkZS92aW0tZ2l0Z3V0dGVyJwoJUGx1ZyAndHBvcGUvdmltLWZ1Z2l0aXZlJwoKCVBsdWcgJ21hanV0c3VzaGkvdGFnYmFyJwoJUGx1ZyAnc2Nyb29sb29zZS9uZXJkdHJlZScKCWxldCBnOk5FUkRUcmVlV2luUG9zPSJsZWZ0IgoJbGV0IGc6TkVSRFRyZWVXaW5TaXplPTIwCgoJIiBQbHVnICdwb3N2YS92aW0tdnVlJwoJUGx1ZyAnZmF0aWgvdmltLWdvJwoJUGx1ZyAnY2hyNC9uZ2lueC52aW0nCglQbHVnICdvdGhyZWUvaHRtbDUudmltJwoJUGx1ZyAndmltLXNjcmlwdHMvcHl0aG9uLnZpbScKCVBsdWcgJ3BsYXN0aWNib3kvdmltLW1hcmtkb3duJwoKCVBsdWcgJ21iYmlsbC9lY2hvZnVuYycKCVBsdWcgJ3ZpbS1zY3JpcHRzL3RDb21tZW50JwoJUGx1ZyAndmltLXN5bnRhc3RpYy9zeW50YXN0aWMnCglQbHVnICd2aW0tc2NyaXB0cy9tYXRyaXgudmltLS1ZYW5nJwoJY2FsbCBwbHVnI2VuZCgpCmVuZGlmCiJ9fX0KIiDln7rmnKzphY3nva4ie3t7CnNldCBjYz0xMjAKc2V0IG5vd3JhcApzZXQgbnVtYmVyCnNldCByZWxhdGl2ZW51bWJlcgpzZXQgY3Vyc29ybGluZQpzZXQgY3Vyc29yY29sdW1uCnNldCBzY3JvbGxvZmY9MwpzZXQgbW91c2U9YQoKIiDnvJPlrZgKc2V0IGhpZGRlbgpzZXQgYXV0b3dyaXRlCnNldCBlbmNvZGluZz11dGYtOAoKIiDmkJzntKIKc2V0IGhsc2VhcmNoCnNldCBpbmNzZWFyY2gKc2V0IG5vd3JhcHNjYW4Kc2V0IHNtYXJ0Y2FzZQpzZXQgaWdub3JlY2FzZQpzZXQgc2hvd21hdGNoCnNldCBtYXRjaHRpbWU9MgoKIiDnvKnov5sKc2V0IGNpbmRlbnQKIiBzZXQgZXhwYW5kdGFiCnNldCB0YWJzdG9wPTQKc2V0IHNoaWZ0d2lkdGg9NApzZXQgYmFja3NwYWNlPWluZGVudCxlb2wsc3RhcnQKCiIg5oqY5Y+gCnNldCBmb2xkZW5hYmxlCnNldCBmb2xkbWV0aG9kPW1hcmtlcgoKIiDmjInplK4Kbm5vcmVtYXAgPFNwYWNlPiA6Cm5ub3JlbWFwIDxDLUg+IDxDLVc+aApubm9yZW1hcCA8Qy1KPiA8Qy1XPmoKbm5vcmVtYXAgPEMtSz4gPEMtVz5rCm5ub3JlbWFwIDxDLUw+IDxDLVc+bAoKbm5vcmVtYXAgPEYyPiA6TkVSRFRyZWVUb2dnbGU8Q1I+Cm5ub3JlbWFwIDxGMz4gOlRhZ2JhclRvZ2dsZTxDUj4KIn19fQoiIOe8lueoi+mFjee9rnt7ewpzZXQga2V5d29yZHByZz1tYW5cIC1hCgpmdW5jdGlvbiEgQ29uZmlnKHR5cGUpCglpZiBhOnR5cGUgPT0gImNvbmYiCgkJc2V0IGZpbGV0eXBlPW5naW54CgllbHNlaWYgYTp0eXBlID09ICJ4bWwiCgkJc2V0IGZpbGV0eXBlPXhtbAoJZWxzZWlmIGE6dHlwZSA9PSAidnVlIgoJCXNldCBzaGlmdHdpZHRoPTIKCQlzZXQgdGFic3RvcD0yCgllbmRpZgplbmRmdW5jdGlvbgoKZnVuYyEgQ29uZmlncygpCglsZXQgZXh0ID0gZXhwYW5kKCIlOmUiKQoJaWYgZXh0ID09ICJnbyIKCQlzZXQgZm9sZG5lc3RtYXg9MwoJCXNldCBmb2xkbWV0aG9kPXN5bnRheAoJCWxldCBnOnRhZ2Jhcl9jdGFnc19iaW4gPSAiZ290YWdzIgoJCW5ub3JlbWFwIDxDLVs+IDpHb0ltcGxlbWVudHM8Q1I+CgoJCWxldCBnOmdvX3VwZGF0ZXRpbWUgPSAzMDAKCQkiIGxldCBnOmdvX2F1dG9fc2FtZWlkcyA9IDAKCQlsZXQgZzpnb19hdXRvX3R5cGVfaW5mbyA9IDEKCQlsZXQgZzpnb192ZXJzaW9uX3dhcm5pbmcgPSAwCgkJCgkJbGV0IGc6Z29fZm10X2F1dG9zYXZlID0gMQoJCWxldCBnOmdvX2ltcG9ydHNfYXV0b3NhdmUgPSAxCgkJIiBsZXQgZzpnb19tZXRhbGludGVyX2F1dG9zYXZlID0gMQoJCQoJCWxldCBnOmdvX2hpZ2hsaWdodF90eXBlcyA9IDEKCQlsZXQgZzpnb19oaWdobGlnaHRfZnVuY3Rpb25zID0gMQoJCWxldCBnOmdvX2hpZ2hsaWdodF9vcGVyYXRvcnMgPSAxCgkJbGV0IGc6Z29faGlnaGxpZ2h0X3NwYWNlX3RhYl9lcnJvciA9IDEKCQlsZXQgZzpnb19oaWdobGlnaHRfdHJhaWxpbmdfd2hpdGVzcGFjZV9lcnJvciA9IDEKCQkKCQkiIGF1dG9jbWQgQnVmV3JpdGVQcmUgKi5nbyBHb0ZtdAoJCSIgYXV0b2NtZCBCdWZXcml0ZVByZSAqLmdvIEdvVmV0CgkJIiBhdXRvY21kIEJ1ZldyaXRlUHJlICouZ28gR29MaW50CgkJIiBhdXRvY21kIEJ1ZldyaXRlUHJlICouZ28gR29JbXBvcnRzCgoJZWxzZWlmIGV4dCA9PSAic2h5IgoJCXNldCBmaWxldHlwZT1zaHkKCQlzZXQgdGFic3RvcD0yCgkJc2V0IHNoaWZ0d2lkdGg9MgoJCXNldCBjb21tZW50c3RyaW5nPSMlcwoKCWVsc2VpZiBleHQgPT0gImpzb24iCgkJc2V0IGZvbGRtZXRob2Q9c3ludGF4CgoJZWxzZWlmIGV4dCA9PSAianMiCgkJc2V0IGZpbGV0eXBlPWphdmFzY3JpcHQKCQlzZXQgZm9sZG1ldGhvZD1tYXJrZXIKCQlzZXQgZm9sZG1hcmtlcj17LH0KCQlsZXQgamF2YVNjcmlwdF9mb2xkPTEKCQlzb3VyY2Ugfi8udmltL3N5bnRheC9qYXZhc2NyaXB0LnZpbQoKCWVsc2VpZiBleHQgPT0gImNzcyIKCQlzZXQgZmlsZXR5cGU9Y3NzCgkJc2V0IGZvbGRtZXRob2Q9bWFya2VyCgkJc2V0IGZvbGRtYXJrZXI9eyx9CgkJc2V0IHNoaWZ0d2lkdGg9MgoJCXNldCB0YWJzdG9wPTIKCgllbHNlaWYgZXh0ID09ICJ6bWwiCgkJc2V0IGZpbGV0eXBlPXptbAoJCXNldCB0YWJzdG9wPTIKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IGNvbW1lbnRzdHJpbmc9IyVzCgkJIiBzZXQgc21hcnRpbmRlbnQKCQkiIHNldCBpbmRlbnRleHByPUdldEJsb2NrSW5kZW50KCkKCgllbHNlaWYgZXh0ID09ICJpbWwiCgkJc2V0IGZpbGV0eXBlPWltbAoJCXNldCB0YWJzdG9wPTIKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IGNvbW1lbnRzdHJpbmc9IyVzCgoJZWxzZWlmIGV4dCA9PSAieWFtbCIKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IHRhYnN0b3A9MgoKCWVsc2VpZiBleHQgPT0gInByb3RvIgoJCXNldCBmb2xkbWFya2VyPXssfQoJCXNldCBzaGlmdHdpZHRoPTIKCQlzZXQgdGFic3RvcD0yCgkJc2V0IGV4cGFuZHRhYgoKCWVsc2VpZiBleHQgPT0gInNxbCIKCQlzZXQgZm9sZG1hcmtlcj0oLCkKCQlzZXQgc2hpZnR3aWR0aD0yCgkJc2V0IHRhYnN0b3A9MgoJCXNldCBleHBhbmR0YWIKCgllbHNlaWYgZXh0ID09ICJncm9vdnkiCgkJc2V0IGV4cGFuZHRhYgoJCXNldCB0YWJzdG9wPTQKCQlzZXQgc2hpZnR3aWR0aD00CgogICAgZWxzZWlmIGV4dCA9PSAiamF2YSIKCQlzZXQgZXhwYW5kdGFiCgkJc2V0IHRhYnN0b3A9NAoJCXNldCBzaGlmdHdpZHRoPTQKCQlzZXQgb21uaWZ1bmM9amF2YWNvbXBsZXRlI0NvbXBsZXRlCgoJZW5kaWYKZW5kZnVuYwoKZnVuYyEgR2V0QmxvY2tJbmRlbnQgKCkKCXJldHVybiA0CmVuZGZ1bmMKCmF1dG9jbWQgQnVmTmV3RmlsZSxCdWZSZWFkUG9zdCAqIGNhbGwgQ29uZmlncygpCmF1dG9jbWQgQnVmTmV3RmlsZSxCdWZSZWFkUG9zdCAqLmNvbmYgY2FsbCBDb25maWcoImNvbmYiKQphdXRvY21kIEJ1Zk5ld0ZpbGUsQnVmUmVhZFBvc3QgKi53eG1sIGNhbGwgQ29uZmlnKCJ4bWwiKQphdXRvY21kIEJ1Zk5ld0ZpbGUsQnVmUmVhZFBvc3QgKi52dWUgY2FsbCBDb25maWcoInZ1ZSIpCiJ9fX0KCiLmnKzlnLDphY3nva4ie3t7CmlmIGZpbGVyZWFkYWJsZShleHBhbmQoIn4vLnZpbS9hdXRvbG9hZC9hdXRvLnZpbSIpKSB8IHNvdXJjZSB+Ly52aW0vYXV0b2xvYWQvYXV0by52aW0gfCBlbmRpZgppZiBmaWxlcmVhZGFibGUoZXhwYW5kKCJ+Ly52aW1fbG9jYWwudmltIikpIHwgc291cmNlIH4vLnZpbV9sb2NhbC52aW0gfCBlbmRpZgphdXRvY21kIEJ1ZlJlYWRQb3N0ICogbm9ybWFsIGAiCiJ9fX0KIuS4u+mimOiJsuezuyJ7e3sKc3ludGF4IG9uCnNldCB0X0NvPTI1Ngpjb2xvcnNjaGVtZSB0b3J0ZQoiIGNvbG9yc2NoZW1lIGVsZmxvcmQKCmhpZ2hsaWdodCBDb21tZW50IGN0ZXJtZmc9Y3lhbiBjdGVybWJnPWRhcmtibHVlCmhpZ2hsaWdodCBQbWVudVNlbCBjdGVybWZnPWRhcmtibHVlIGN0ZXJtYmc9Y3lhbgpoaWdobGlnaHQgUG1lbnUgY3Rlcm1mZz1jeWFuIGN0ZXJtYmc9ZGFya2JsdWUKIn19fQo=",
        "usr/intshell/dev/vim/zml.vim": "aGlnaGxpZ2h0IHptbENvbW1hbmQgICAgY3Rlcm1mZz15ZWxsb3cKc3ludGF4IG1hdGNoIHptbENvbW1hbmQgImhlYWQiCnN5bnRheCBtYXRjaCB6bWxDb21tYW5kICJsZWZ0IgpzeW50YXggbWF0Y2ggem1sQ29tbWFuZCAibWFpbiIKc3ludGF4IG1hdGNoIHptbENvbW1hbmQgImZvb3QiCnN5bnRheCBtYXRjaCB6bWxDb21tYW5kICJtZW51IgpzeW50YXggbWF0Y2ggem1sQ29tbWFuZCAicmV0dXJuIgoKaGlnaGxpZ2h0IHptbEZ1bmN0aW9uICAgIGN0ZXJtZmc9Y3lhbgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gImluZGV4IgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gImFjdGlvbiIKc3ludGF4IG1hdGNoIHptbEZ1bmN0aW9uICJhcmdzIgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gInN0eWxlIgpzeW50YXggbWF0Y2ggem1sRnVuY3Rpb24gInN0eWxlLndpZHRoIgoKaGlnaGxpZ2h0IHptbENvbnN0YW50ICAgIGN0ZXJtZmc9bWFnZW50YQpzeW50YXggbWF0Y2ggem1sQ29uc3RhbnQgImF1dG8iCnN5bnRheCBtYXRjaCB6bWxDb25zdGFudCAidXNlcm5hbWUiCg==",
        "usr/intshell/index.sh": "IyEvYmluL3NoCgpleHBvcnQgY3R4X2Rldj0ke2N0eF9kZXY6PSJodHRwOi8vc2h5bGludXguY29tIn0KCl9kb3duX2JpZ19maWxlKCkgeyAjIOS4i+i9veaWh+S7tiBkaXIgdXJsCglbIC1mICIkMSIgXSAmJiByZXR1cm4gfHwgZWNobyAiZG93bmxvYWQgJGN0eF9kZXYvJDIiCgllY2hvICQxfCBncmVwICIvIiAmPi9kZXYvbnVsbCAmJiBta2RpciAtcCAkezElKi8qfTsgaWYgY3VybCAtaCAmPi9kZXYvbnVsbDsgdGhlbgoJCWN1cmwgLW8gJDEgLWZMICIkY3R4X2Rldi8kMj9wb2Q9JGN0eF9wb2QiCgllbHNlCgkJd2dldCAtTyAkMSAiJGN0eF9kZXYvJDI/cG9kPSRjdHhfcG9kIgoJZmkKfQpfZG93bl9maWxlcygpIHsgIyDkuIvovb3mlofku7YgZmlsZS4uLgoJZm9yIGZpbGUgaW4gIiRAIjsgZG8gX2Rvd25fZmlsZSAkZmlsZSBwdWJsaXNoLyR7ZmlsZSMjKi99OyBkb25lCn0KX2Rvd25fZmlsZSgpIHsgIyDkuIvovb3mlofku7YgZGlyIHVybAoJZWNobyAkMXwgZ3JlcCAiLyIgJj4vZGV2L251bGwgJiYgbWtkaXIgLXAgJHsxJSovKn07IGlmIGN1cmwgLWggJj4vZGV2L251bGw7IHRoZW4KCQljdXJsIC1vICQxIC1mc1NMICRjdHhfZGV2LyQyCgllbHNlCgkJd2dldCAtTyAkMSAtcSAkY3R4X2Rldi8kMgoJZmkKfQpfdGVtcF9maWxlKCkgeyAjIOWKoOi9veaWh+S7tiB1cmwgYXJnLi4uCgljdHhfdGVtcD0kKG1rdGVtcCkgJiYgX2Rvd25fZmlsZSAkY3R4X3RlbXAgJDEgJiYgc2hpZnQgJiYgc291cmNlICRjdHhfdGVtcCAiJEAiCn0KX2Rvd25fdGFycygpIHsgIyDkuIvovb3mlofku7YgZmlsZS4uLgoJZm9yIGZpbGUgaW4gIiRAIjsgZG8gX2Rvd25fdGFyICRmaWxlIHB1Ymxpc2gvJGZpbGU7IGRvbmUKfQpfZG93bl90YXIoKSB7ICMg5LiL6L295paH5Lu2IGZpbGUgcGF0aAoJWyAtZiAkMSBdICYmIHJldHVybjsgX2Rvd25fYmlnX2ZpbGUgIiRAIiAmJiB0YXIgLXhmICQxCn0KCnByZXBhcmVfc2NyaXB0KCkgewoJZm9yIHNjcmlwdCBpbiAiJEAiOyBkbyBfdGVtcF9maWxlIGludHNoZWxsLyRzY3JpcHQ7IGRvbmUgCn0KcHJlcGFyZV9wYWNrYWdlKCkgewoJX2Rvd25fdGFycyBjb250ZXh0cy5iaW4udGFyLmd6IGNvbnRleHRzLnNyYy50YXIuZ3oKCWxvY2FsIGJhY2s9JFBXRDsgY2Qgfi87IF9kb3duX3RhcnMgY29udGV4dHMuaG9tZS50YXIuZ3o7IGNkICRiYWNrCglleHBvcnQgVklNPSRQV0QvdXNyL2luc3RhbGwvdmltLXZpbS0xMmJlNzM0L19pbnN0YWxsL3NoYXJlL3ZpbS92aW04Mi8KCWV4cG9ydCBMRF9MSUJSQVJZX1BBVEg9JFBXRC91c3IvbG9jYWwvbGliCgoJaXNoX3N5c19wYXRoX2xvYWQKCWdpdCBjb25maWcgLS1nbG9iYWwgaW5pdC50ZW1wbGF0ZWRpciAkUFdEL3Vzci9pbnN0YWxsL2dpdC0yLjMxLjEvX2luc3RhbGwvc2hhcmUvZ2l0LWNvcmUvdGVtcGxhdGVzLwoJZ2l0IGNvbmZpZyAtLWdsb2JhbCB1cmwuIiRjdHhfZGV2Ii5pbnN0ZWFkT2YgaHR0cHM6Ly9zaHlsaW51eC5jb20KCWdpdCBjb25maWcgLS1nbG9iYWwgaW5pdC5kZWZhdWx0QnJhbmNoIG1hc3Rlcgp9CnByZXBhcmVfc3lzdGVtKCkgewoJY2FzZSAiJCh1bmFtZSkiIGluCgkJRGFyd2luKSB4Y29kZS1zZWxlY3QgLS1pbnN0YWxsIDI+L2Rldi9udWxsIDs7CgkJTGludXgpIAoJCQlpZiBbIGB3aG9hbWlgID09IHJvb3QgXTsgdGhlbgoJCQkJeXVtIGluc3RhbGwgLXkgbWFrZSBnaXQgdmltIHRtdXgKCQkJZWxzZQoJCQkJc3VkbyB5dW0gaW5zdGFsbCAteSBtYWtlIGdpdCB2aW0gdG11eAoJCQlmaQoJCQk7OwoJZXNhYwp9CnByZXBhcmVfdG11eCgpIHsKCV9kb3duX2ZpbGUgZXRjL3RtdXguY29uZiBpbnRzaGVsbC9kZXYvdG11eC90bXV4LmNvbmYKCV9kb3duX2ZpbGUgYmluL3RtdXguc2ggaW50c2hlbGwvZGV2L3RtdXgvbG9jYWwuc2gKfQpwcmVwYXJlX2ljZSgpIHsKCWxvY2FsIGJpbj0iaWNlIgoJY2FzZSBgdW5hbWUgLXNgIGluCgkJRGFyd2luKSBiaW49JHtiaW59LmRhcndpbiA7OwoJCUxpbnV4KSBiaW49JHtiaW59LmxpbnV4IDs7CgkJKikgYmluPSR7YmlufS53aW5kb3dzIDs7Cgllc2FjCgljYXNlIGB1bmFtZSAtbWAgaW4KCQltaXBzKSBiaW49JHtiaW59Lm1pcHNsZSA7OwoJCXg4Nl82NCkgYmluPSR7YmlufS5hbWQ2NCA7OwoJCWFybTY0KSBiaW49JHtiaW59LmFtZDY0IDs7CgkJYXJtKnxhYXJjaDY0KSBiaW49JHtiaW59LmFybSA7OwoJCSopIGJpbj0ke2Jpbn0uMzg2IDs7Cgllc2FjCglfZG93bl9iaWdfZmlsZSBiaW4vaWNlLmJpbiBwdWJsaXNoLyRiaW4gJiYgY2htb2QgdSt4IGJpbi9pY2UuYmluOyBbIC1mIGJpbi9pY2UuYmluIF0KfQoKbWFpbigpIHsKCWNhc2UgIiQxIiBpbgoJCWludHNoZWxsKSAjIOWIm+W7uumhueebrgoJCQlbIC1mICRQV0QvLmlzaC9wbHVnLnNoIF0gJiYgc291cmNlICRQV0QvLmlzaC9wbHVnLnNoICYmIHJldHVybgoJCQlbIC1mICRIT01FLy5pc2gvcGx1Zy5zaCBdICYmIHNvdXJjZSAkSE9NRS8uaXNoL3BsdWcuc2ggJiYgcmV0dXJuCgkJCWdpdCB2ZXJzaW9uICY+L2Rldi9udWxsICYmIGdpdCBjbG9uZSBodHRwczovL3NoeWxpbnV4LmNvbS94L2ludHNoZWxsICRQV0QvLmlzaCAmJiByZXR1cm4KCQkJcHJlcGFyZV9zY3JpcHQgcGx1Zy5zaCBjb25mLnNoIG1pc3Muc2gKCQkJOzsKCQlwcm9qZWN0KSAjIOWIm+W7uumhueebrgoJCQlwcmVwYXJlX3NjcmlwdCBwbHVnLnNoIGNvbmYuc2ggbWlzcy5zaDsgcHJlcGFyZV9zeXN0ZW0KCQkJaXNoX21pc3NfcHJlcGFyZV9jb21waWxlCgkJCWlzaF9taXNzX3ByZXBhcmVfZGV2ZWxvcAoJCQlpc2hfbWlzc19wcmVwYXJlX2luc3RhbGwKCgkJCWlzaF9taXNzX3ByZXBhcmVfY29udGV4dHMKCgkJCWV4cG9ydCBQQVRIPSR7UFdEfS9iaW46JFBBVEggY3R4X2xvZz0ke2N0eF9sb2c6PS9kZXYvc3Rkb3V0fQoJCQlnbyBnZXQgc2h5bGludXguY29tL3gvaWNlCgkJCXNoaWZ0ICYmIG1ha2UgJiYgaXNoX21pc3Nfc2VydmUgIiRAIgoJCQk7OwoJCXNvdXJjZSkgIyDmupDnoIHlronoo4UKCQkJcHJlcGFyZV9zeXN0ZW0KCQkJZ2l0IGNsb25lIGh0dHBzOi8vc2h5bGludXguY29tL3gvY29udGV4dHMKCQkJc2hpZnQgJiYgY2QgY29udGV4dHMgJiYgc291cmNlIGV0Yy9taXNzLnNoICIkQCIKCQkJOzsKCQliaW5hcnkpICMg5bqU55So5a6J6KOFCgkJCWV4cG9ydCBjdHhfbG9nPSR7Y3R4X2xvZzo9L2Rldi9zdGRvdXR9IGN0eF9kZXY9Imh0dHBzOi8vc2h5bGludXguY29tIgoJCQlzaGlmdCAmJiBwcmVwYXJlX2ljZSAmJiBiaW4vaWNlLmJpbiBmb3JldmVyIHN0YXJ0IGRldiAiIiAiJEAiCgkJCTs7CgkJYXBwKSAjIOeUn+S6p+eOr+WigwoJCQlleHBvcnQgY3R4X2xvZz0ke2N0eF9sb2c6PS9kZXYvc3Rkb3V0fQoJCQlzaGlmdCAmJiBwcmVwYXJlX2ljZSAmJiBiaW4vaWNlLmJpbiBmb3JldmVyIHN0YXJ0IGRldiBkZXYgIiRAIgoJCQk7OwoJCWRldikgIyDlvIDlj5Hnjq/looMKCQkJcHJlcGFyZV9zY3JpcHQgcGx1Zy5zaCBjb25mLnNoIG1pc3Muc2gKCQkJc2hpZnQgJiYgcHJlcGFyZV9wYWNrYWdlICYmIHNvdXJjZSBldGMvbWlzcy5zaCAiJEAiCgkJCTs7CgkJKikgIyDnu4jnq6/njq/looMKCQkJcHJlcGFyZV9zY3JpcHQgcGx1Zy5zaCBjb25mLnNoIG1pc3Muc2gKCQkJaXNoX3N5c19kZXZfbG9naW4gJiYgWyAtbiAiJCoiIF0gJiYgaXNoX3N5c19kZXZfcnVuICIkQCIKCQkJOzsKCWVzYWMKfQoKbWFpbiAiJEAiCg==",
        "usr/intshell/miss.sh": "IyEvYmluL3NoCgpleHBvcnQgY3R4X3BpZD0ke2N0eF9waWQ6PXZhci9ydW4vaWNlLnBpZH0KZXhwb3J0IGN0eF9sb2c9JHtjdHhfbG9nOj1iaW4vYm9vdC5sb2d9Cgppc2hfbWlzc19pY2VfYmluPSJpY2UuYmluIgppc2hfbWlzc19pbml0X3NoeT0iZXRjL2luaXQuc2h5Igppc2hfbWlzc19tYWluX3NoeT0ic3JjL21haW4uc2h5Igppc2hfbWlzc19tYWluX2dvPSJzcmMvbWFpbi5nbyIKCmlzaF9taXNzX2Rvd25sb2FkX3BrZygpIHsKCWZvciB1cmwgaW4gIiRAIjsgZG8gbG9jYWwgcGtnPSR7dXJsIyMqL30KCQlbIGBpc2hfc3lzX2ZpbGVfc2l6ZSAkcGtnYCAtZ3QgMCBdICYmIGJyZWFrCgkJaXNoX2xvZ19yZXF1aXJlICR1cmw7IGlmIGN1cmwgLWggJj4vZGV2L251bGw7IHRoZW4KCQkJY3VybCAtbyAkcGtnIC1mU0wgJHVybCAmJiB0YXIgeGYgJHBrZyAKCQllbHNlCgkJCXdnZXQgLU8gJHBrZyAkdXJsICYmIHRhciB4ZiAkcGtnIAoJCWZpCglkb25lCn0KaXNoX21pc3NfcHJlcGFyZV9jb21waWxlKCkgewoJaXNoX3N5c19wYXRoX2luc2VydCAiJFBXRC91c3IvbG9jYWwvZ28vYmluIiAiJFBXRC91c3IvbG9jYWwvYmluIiAiJFBXRC9iaW4iICIkUFdEL3Vzci9wdWJsaXNoIgoJZXhwb3J0IEdPUFJWSUFURT0ke0dPUFJWSUFURTo9c2h5bGludXguY29tLGdpdGh1Yi5jb219CglleHBvcnQgR09CSU49JHtHT0JJTjo9JFBXRC91c3IvbG9jYWwvYmlufQoJZXhwb3J0IElTSF9DT05GX1BBVEg9JFBXRC8uaXNoL3BsdWdlZAoJZXhwb3J0IEdPMTExTU9EVUxFPW9uCgoJZ28gdmVyc2lvbiAmPi9kZXYvbnVsbCAmJiByZXR1cm4KCglsb2NhbCBnb2FyY2g9YW1kNjQ7IGNhc2UgIiQodW5hbWUgLW0pIiBpbgoJCXg4Nl82NCkgZ29hcmNoPWFtZDY0OzsKCQlhcm02NCkgZ29hcmNoPWFybTY0OzsKCQlpNjg2KSBnb2FyY2g9Mzg2OzsKCQkqKSBnb29zPWFybTs7Cgllc2FjCglsb2NhbCBnb29zPWxpbnV4OyBjYXNlICIkKHVuYW1lIC1zKSIgaW4KCQlEYXJ3aW4pIGdvb3M9ZGFyd2luOzsKCQlMaW51eCkgZ29vcz1saW51eDs7CgkJKikgZ29vcz13aW5kb3dzOzsKCWVzYWMKCglsb2NhbCBwa2c9Z28ke0dPVkVSU0lPTjo9MS4xNS41fS4ke2dvb3N9LSR7Z29hcmNofS50YXIuZ3o7IGlzaF9sb2dfZGVidWcgImRvd25sb2FkOiAkcGtnIgoJbG9jYWwgYmFjaz0kUFdEOyBta2RpciAtcCB1c3IvbG9jYWw7IGNkIHVzci9sb2NhbDsgaXNoX21pc3NfZG93bmxvYWRfcGtnIGh0dHBzOi8vZGwuZ29vZ2xlLmNvbS9nby8kcGtnOyBjZCAkYmFjawp9CmlzaF9taXNzX3ByZXBhcmVfZGV2ZWxvcCgpIHsKCWlzaF9kZXZfZ2l0X3ByZXBhcmUKCgkjIC5naXRpZ25vcmUKCWlzaF9zeXNfZmlsZV9jcmVhdGUgLmdpdGlnbm9yZSA8PEVORApldGMvCmJpbi8KdmFyLwp1c3IvCi4qCkVORAoKCSMgZ28ubW9kCglsb2NhbCByZW1vdGU9JChnaXQgY29uZmlnIHJlbW90ZS5vcmlnaW4udXJsfHNlZCAtZSAicy9eaHR0cHM6XC9cLy8vInxzZWQgLWUgInMvXmh0dHA6XC9cLy8vIikKCVsgLWYgZ28ubW9kIF0gfHwgZ28gbW9kIGluaXQgJHtyZW1vdGU6PSR7UFdEIyMqL319CgoJIyBzcmMvbWFpbi5nbwoJaXNoX3N5c19maWxlX2NyZWF0ZSAkaXNoX21pc3NfbWFpbl9nbyA8PEVORApwYWNrYWdlIG1haW4KCmltcG9ydCAic2h5bGludXguY29tL3gvaWNlIgoKZnVuYyBtYWluKCkgeyBwcmludChpY2UuUnVuKCkpIH0KRU5ECgoJIyBNYWtlZmlsZQoJaXNoX3N5c19maWxlX2NyZWF0ZSBNYWtlZmlsZSA8PCBFTkQKZXhwb3J0IENHT19FTkFCTEVEPTAKCmFsbDoKCUBlY2hvICYmIGRhdGUKCWdvIGJ1aWxkIC12IC1vIGJpbi8kaXNoX21pc3NfaWNlX2JpbiAkaXNoX21pc3NfbWFpbl9nbyAmJiAuL2Jpbi8kaXNoX21pc3NfaWNlX2JpbiBmb3JldmVyIHJlc3RhcnQKRU5ECn0KaXNoX21pc3NfcHJlcGFyZV9pbnN0YWxsKCkgewoJIyBldGMvaW5pdC5zaHkKCWlzaF9zeXNfZmlsZV9jcmVhdGUgJGlzaF9taXNzX2luaXRfc2h5IDw8RU5ECn5hYWEKCn53ZWIKCn5jbGkKCn5jdHgKCn5tZGIKCkVORAoKCSMgc3JjL21haW4uc2h5Cglpc2hfc3lzX2ZpbGVfY3JlYXRlICRpc2hfbWlzc19tYWluX3NoeSA8PEVORAp0aXRsZSAiJHtQV0QjIyovfSIKRU5ECn0KCmlzaF9taXNzX3ByZXBhcmUoKSB7Cglsb2NhbCBuYW1lPSR7MSMjKi99IHJlcG9zPSR7MSNodHRwczovL30KCVsgIiRuYW1lIiA9ICIkcmVwb3MiIF0gJiYgcmVwb3M9c2h5bGludXguY29tL3gvJG5hbWUKCglsb2NhbCBiYWNrPSRQV0QKCUlTSF9DT05GX1BBVEg9JFBXRC8uaXNoL3BsdWdlZCByZXF1aXJlICRyZXBvcwoJaXNoX3N5c19saW5rX2NyZWF0ZSB1c3IvJG5hbWUgJChyZXF1aXJlX3BhdGggJHJlcG9zKQoJcmVxdWlyZV9wdWxsIHVzci8kbmFtZQoJY2QgJGJhY2sKfQppc2hfbWlzc19wcmVwYXJlX2NvbnRleHRzKCkgewoJaXNoX2xvZ19yZXF1aXJlIC1nIHNoeWxpbnV4LmNvbS94L2NvbnRleHRzCglbIC1kIC5naXQgXSB8fCBnaXQgaW5pdAoJWyAiYGdpdCByZW1vdGVgIiA9ICIiIF0gfHwgcmVxdWlyZV9wdWxsIC4vCn0KaXNoX21pc3NfcHJlcGFyZV9pbnRzaGVsbCgpIHsKCWlzaF9sb2dfcmVxdWlyZSAtZyBzaHlsaW51eC5jb20veC9pbnRzaGVsbAoJWyAtZiAkUFdELy5pc2gvcGx1Zy5zaCBdIHx8IFsgLWYgJEhPTUUvLmlzaC9wbHVnLnNoIF0gfHwgZ2l0IGNsb25lIGh0dHBzOi8vc2h5bGludXguY29tL3gvaW50c2hlbGwgJFBXRC8uaXNoCglbIC1kICRQV0QvLmlzaCBdICYmIGlzaF9zeXNfbGlua19jcmVhdGUgdXNyL2ludHNoZWxsICRQV0QvLmlzaAoJWyAtZCAkSE9NRS8uaXNoIF0gJiYgaXNoX3N5c19saW5rX2NyZWF0ZSB1c3IvaW50c2hlbGwgJEhPTUUvLmlzaAoJcmVxdWlyZV9wdWxsIHVzci9pbnRzaGVsbAoKCWlzaF9zeXNfY2xpX3ByZXBhcmUKfQppc2hfbWlzc19wcmVwYXJlX2ljZWJlcmdzKCkgewoJaXNoX21pc3NfcHJlcGFyZSBpY2ViZXJncwp9CmlzaF9taXNzX3ByZXBhcmVfdG9vbGtpdHMoKSB7Cglpc2hfbWlzc19wcmVwYXJlIHRvb2xraXRzCn0KaXNoX21pc3NfcHJlcGFyZV92b2xjYW5vcygpIHsKCWlzaF9taXNzX3ByZXBhcmUgdm9sY2Fub3MKfQppc2hfbWlzc19wcmVwYXJlX2xlYXJuaW5nKCkgewoJaXNoX21pc3NfcHJlcGFyZSBsZWFybmluZwp9CmlzaF9taXNzX3ByZXBhcmVfc2Vzc2lvbigpIHsKCWxvY2FsIG5hbWU9JDEgJiYgWyAiJG5hbWUiID0gIiIgXSAmJiBuYW1lPSR7UFdEIyMqL30KCWxvY2FsIHdpbj0kMiAmJiBbICIkd2luIiA9ICIiIF0gJiYgd2luPSR7bmFtZSMjKi19Cglpc2hfbG9nX25vdGljZSAic2Vzc2lvbjogJG5hbWU6JHdpbiIKCglpZiAhIHRtdXggaGFzLXNlc3Npb24gLXQgJG5hbWUgJj4vZGV2L251bGw7IHRoZW4KCQlUTVVYPSIiIHRtdXggbmV3LXNlc3Npb24gLWQgLXMgJG5hbWUgLW4gJHdpbgoJCXRtdXggc3BsaXQtd2luZG93IC1kIC1wIDMwIC10ICRuYW1lCgkJdG11eCBzcGxpdC13aW5kb3cgLWQgLWggLXQgJHtuYW1lfTokd2luLjIKCgkJbG9jYWwgbGVmdD0yIHJpZ2h0PTMKCQl0bXV4IHNlbmQta2V5IC10ICR7bmFtZX06JHdpbi4kcmlnaHQgImlzaF9taXNzX2xvZyIgRW50ZXIKCQlpZiBbICIkbmFtZSIgPSAibWlzcyIgXTsgdGhlbgoJCQl0bXV4IHNlbmQta2V5IC10ICR7bmFtZX06JHdpbi4kbGVmdCAiaXNoX21pc3Nfc2VydmUiCgkJZWxzZQoJCQl0bXV4IHNlbmQta2V5IC10ICR7bmFtZX06JHdpbi4kbGVmdCAiaXNoX21pc3Nfc3BhY2UgZGV2IGRldiIKCQlmaQoJCXNsZWVwIDEgJiYgdG11eCBzZW5kLWtleSAtdCAke25hbWV9OiR3aW4uMSAidmltIC1PIHNyYy9tYWluLmdvIHNyYy9tYWluLnNoeSIgRW50ZXIKCgkJY2FzZSBgdW5hbWUgLXNgIGluCgkJCURhcndpbikgc2xlZXAgNSAmJiBvcGVuIGh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCA7OwoJCWVzYWMKCWZpCgoJWyAiJFRNVVgiID0gIiIgXSAmJiB0bXV4IGF0dGFjaCAtdCAkbmFtZSB8fCB0bXV4IHNlbGVjdC13aW5kb3cgLXQgJG5hbWU6JHdpbgp9Cgppc2hfbWlzc19zdGFydCgpIHsKCXdoaWxlIHRydWU7IGRvCgkJZGF0ZSAmJiAkaXNoX21pc3NfaWNlX2JpbiAiJEAiIDI+JGN0eF9sb2cgJiYgYnJlYWsgfHwgZWNobyAtZSAiXG5cbnJlc3RhcnRpbmcuLi4iCgkJc2xlZXAgMQoJZG9uZQp9CmlzaF9taXNzX3Jlc3RhcnQoKSB7CglbIC1lICIkY3R4X3BpZCIgXSAmJiBraWxsIC0yIGBjYXQgJGN0eF9waWRgICY+L2Rldi9udWxsIHx8IGVjaG8KfQppc2hfbWlzc19zdG9wKCkgewoJWyAtZSAiJGN0eF9waWQiIF0gJiYga2lsbCAtMyBgY2F0ICRjdHhfcGlkYCAmPi9kZXYvbnVsbCB8fCBlY2hvCn0KaXNoX21pc3Nfc2VydmVfbG9nKCkgewoJaXNoX21pc3Nfc3RvcCAmJiBjdHhfbG9nPS9kZXYvc3Rkb3V0IGlzaF9taXNzX3N0YXJ0IHNlcnZlIHN0YXJ0ICRACn0KaXNoX21pc3Nfc2VydmUoKSB7Cglpc2hfbWlzc19zdG9wICYmIGlzaF9taXNzX3N0YXJ0IHNlcnZlIHN0YXJ0ICRACn0KaXNoX21pc3Nfc3BhY2UoKSB7Cglpc2hfbWlzc19zdG9wICYmIGlzaF9taXNzX3N0YXJ0IHNwYWNlIGRpYWwgZGV2IG9wcyAkQAp9CmlzaF9taXNzX2xvZygpIHsKCXRvdWNoICRjdHhfbG9nICYmIHRhaWwgLWYgJGN0eF9sb2cKfQoKaXNoX21pc3NfbWFrZSgpIHsKCWxvY2FsIGJpbmFyeXM9YmluL2ljZS5iaW4KCWVjaG8gJiYgZGF0ZQoJWyAtZiBzcmMvdmVyc2lvbi5nbyBdIHx8IGVjaG8gInBhY2thZ2UgbWFpbiIgPiBzcmMvdmVyc2lvbi5nbwoJZ28gYnVpbGQgLXYgLW8gJHtiaW5hcnlzfSBzcmMvbWFpbi5nbyBzcmMvdmVyc2lvbi5nbyAmJiAuLyR7YmluYXJ5c30gZm9yZXZlciByZXN0YXJ0ICY+L2Rldi9udWxsCn0KaXNoX21pc3NfZ29fc3VtKCkgewoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L2ljZQoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L2ljZWJlcmdzCglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvdG9vbGtpdHMKCglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvd2Vic29ja2V0CglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvZ28tcXJjb2RlCglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvZ28tc3FsLW15c3FsCgoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L2xpbnV4LXN0b3J5CglnbyBtb2QgZG93bmxvYWQgc2h5bGludXguY29tL3gvbmdpbngtc3RvcnkKCWdvIG1vZCBkb3dubG9hZCBzaHlsaW51eC5jb20veC9nb2xhbmctc3RvcnkKCWdvIG1vZCBkb3dubG9hZCBzaHlsaW51eC5jb20veC9yZWRpcy1zdG9yeQoJZ28gbW9kIGRvd25sb2FkIHNoeWxpbnV4LmNvbS94L215c3FsLXN0b3J5Cn0K",
        "usr/intshell/plug.sh": "IyEvYmluL3NoCgojIyAxLumFjee9riAjIHsKSVNIX0NPTkZfSE9NRT0ke0lTSF9DT05GX0hPTUU6PSIkSE9NRS8uaXNoL3BsdWdlZCJ9CklTSF9DT05GX1BBVEg9JHtJU0hfQ09ORl9QQVRIOj0iJFBXRC8uaXNoL3BsdWdlZCJ9CgpJU0hfQ09ORl9MT0c9JHtJU0hfQ09ORl9MT0c6PSIvZGV2L3N0ZGVyciJ9CklTSF9DT05GX0xFVkVMPSR7SVNIX0NPTkZfTEVWRUw6PSJub3RpY2UgZGVidWcifQpJU0hfQ09ORl9DT0xPUj0ke0lTSF9DT05GX0NPTE9SOj0idHJ1ZSJ9CiMgfQojIyAyLuaXpeW/lyAjIHsKSVNIX1NIT1dfQ09MT1Jfcj0iXGVbMzFtIgpJU0hfU0hPV19DT0xPUl9nPSJcZVszMm0iCklTSF9TSE9XX0NPTE9SX2I9IlxlWzM0bSIKSVNIX1NIT1dfQ09MT1JfZW5kPSJcZVswbSIKaXNoX3Nob3coKSB7CiAgICBsb2NhbCBzcGFjZT0iICIgY291bnQ9IiI7IHdoaWxlIFsgIiQjIiAtZ3QgIjAiIF07IGRvIHNwYWNlPSIgIjsgY2FzZSAkMSBpbgogICAgICAgIC11c2VybmFtZSkgZWNobyAtbiAiJCh3aG9hbWkpIjs7CiAgICAgICAgLWhvc3RuYW1lKSBlY2hvIC1uICIkKGhvc3RuYW1lKSI7OwogICAgICAgIC1kYXRlKSBlY2hvIC1uICIkKGRhdGUgKyIlWS0lbS0lZCIpIjs7CiAgICAgICAgLXRpbWUpIGVjaG8gLW4gIiQoZGF0ZSArIiVZLSVtLSVkICVIOiVNOiVTIikiOzsKICAgICAgICAqKSBpZiBsb2NhbCBrPSQxICYmIFsgIiR7azowOjF9IiA9ICItIiBdIDsgdGhlbiBzcGFjZT0iIgogICAgICAgICAgICBsb2NhbCBjb2xvcj0kKGV2YWwgInByaW50ZiBcJHtJU0hfU0hPV19DT0xPUl8ke2s6MX19IiAyPi9kZXYvbnVsbCkKICAgICAgICAgICAgWyAiJElTSF9DT05GX0NPTE9SIiA9ICJ0cnVlIiBdICYmIHByaW50ZiAiJGNvbG9yIiAmJiBjb3VudD0ibmVlZCIKICAgICAgICBlbHNlCiAgICAgICAgICAgIHByaW50ZiAiJDEiOyBbIC1uICRjb3VudCBdICYmIHByaW50ZiAiJElTSF9TSE9XX0NPTE9SX2VuZCIgJiYgY291bnQ9CiAgICAgICAgZmk7OwogICAgZXNhYzsgWyAiJCMiIC1ndCAiMCIgXSAmJiBzaGlmdCAmJiBlY2hvIC1uICIkc3BhY2UiOyBkb25lOyBlY2hvCn0KaXNoX2xvZygpIHsKICAgIGZvciBsIGluICQoZWNobyAke0lTSF9DT05GX0xFVkVMOj0kMX0pOyBkbwogICAgICAgIFsgIiRsIiA9ICIkMSIgXSAmJiBpc2hfc2hvdyAtdGltZSAiJEAiID4kSVNIX0NPTkZfTE9HIAogICAgZG9uZTsgcmV0dXJuIDAKfQppc2hfbG9nX2RlYnVnKCkgeyBpc2hfbG9nICJkZWJ1ZyIgIiRAIiBgX2ZpbGVsaW5lIDIgMmA7IH0KaXNoX2xvZ19yZXF1aXJlKCkgeyBpc2hfbG9nICJyZXF1aXJlIiAiJEAiOyB9CmlzaF9sb2dfcmVxdWVzdCgpIHsgaXNoX2xvZyAicmVxdWVzdCIgIiRAIjsgfQppc2hfbG9nX3NvdXJjZSgpIHsgaXNoX2xvZyAic291cmNlIiAiJEAiOyB9CmlzaF9sb2dfbm90aWNlKCkgeyBpc2hfbG9nICJub3RpY2UiICIkQCI7IH0KaXNoX2xvZ19hbGlhcygpIHsgaXNoX2xvZyAiYWxpYXMiICIkQCI7IH0KIyB9CiMjIDMu5Yqg6L29ICMgewpyZXF1aXJlX3BhdGgoKSB7ICMg55uu5b2VIHJlcG9zCiAgICBmb3IgbmFtZSBpbiAiJEAiOyBkbwogICAgICAgIFsgLWUgJG5hbWUgXSAmJiBlY2hvICRuYW1lICYmIGNvbnRpbnVlCiAgICAgICAgZm9yIHAgaW4gJFBXRC8uaXNoL3BsdWdlZCAkSVNIX0NPTkZfUEFUSCAkSVNIX0NPTkZfSE9NRTsgZG8KICAgICAgICAgICAgWyAtZSAkcC8kbmFtZSBdICYmIGVjaG8gJHAvJG5hbWUgJiYgYnJlYWsKICAgICAgICAgICAgWyAtZSAke3AlLyp9LyRuYW1lIF0gJiYgZWNobyAke3AlLyp9LyRuYW1lICYmIGJyZWFrCiAgICAgICAgZG9uZQogICAgZG9uZQp9CnJlcXVpcmVfZm9yaygpIHsgICMg5LuT5bqTIHJlcG9zIFt0YWddCiAgICBsb2NhbCBuYW1lPSQxIG1vZD0kMSB0YWc9JDIgJiYgc2hpZnQgMjsgWyAiJHRhZyIgPSAiIiBdIHx8IG5hbWU9JG1vZEAkdGFnCiAgICBsb2NhbCBwPSQocmVxdWlyZV9wYXRoICRuYW1lKTsgWyAiJHAiICE9ICIiIF0gJiYgZWNobyAkcCAmJiByZXR1cm4KCiAgICBpc2hfbG9nX25vdGljZSAtZyAiY2xvbmUgJG1vZCA9PiAkSVNIX0NPTkZfUEFUSC8kbmFtZSIKICAgIGdpdCBjbG9uZSBodHRwczovLyRtb2QgJElTSF9DT05GX1BBVEgvJG5hbWUgJj4vZGV2L251bGwKICAgIGVjaG8gJElTSF9DT05GX1BBVEgvJG5hbWU7IFsgIiR0YWciID0gIiIgXSAmJiByZXR1cm4KCiAgICBjZCAiJElTSF9DT05GX1BBVEgvJG5hbWUiOyBnaXQgY2hlY2tvdXQgJHRhZyAmPi9kZXYvbnVsbCAmJiBybSAtcmYgLmdpdDsgY2QgLSAmPi9kZXYvbnVsbAp9CnJlcXVpcmVfcHVsbCgpIHsgIyDmm7TmlrAgcmVwb3MKICAgIGxvY2FsIGJhY2s9JFBXRDsgY2QgIiQocmVxdWlyZV9mb3JrICQxKSIgJiYgaXNoX2xvZ19ub3RpY2UgcHdkICRQV0QgJiYgZ2l0IHB1bGw7IGNkICRiYWNrOyBlY2hvCn0KcmVxdWlyZV90ZW1wKCkgeyAjIOS4i+i9vSBmaWxlCiAgICBmb3IgbmFtZSBpbiAiJEAiOyBkbyBsb2NhbCB0ZW1wPSQobWt0ZW1wKSAKICAgICAgICBpc2hfbG9nX3JlcXVlc3QgIiR0ZW1wIDw9ICRjdHhfZGV2L2ludHNoZWxsLyRuYW1lIgogICAgICAgIGN1cmwgLS1jcmVhdGUtZGlycyAtZnNTTCAtbyAkdGVtcCAkY3R4X2Rldi9pbnRzaGVsbC8kbmFtZSAmJiBlY2hvICR0ZW1wCiAgICBkb25lCn0KcmVxdWlyZSgpIHsgIyByZXF1aXJlIFthcyBuYW1lXSBbbW9kXSBmaWxlIGFyZy4uLgogICAgbG9jYWwgbmFtZT0ke0lTSF9DVFhfTU9EVUxFI2lzaF99ICYmIFsgIiQxIiA9ICJhcyIgXSAmJiBuYW1lPSQyICYmIHNoaWZ0IDIKICAgIGxvY2FsIG1vZD0kMSB0YWc9ICYmIHNoaWZ0OyBtb2Q9JHttb2QjaHR0cHM6Ly99CiAgICB0YWc9JHttb2QjKkB9IG1vZD0ke21vZCVAKn07IFsgIiR0YWciID0gIiRtb2QiIF0gJiYgdGFnPSIiCiAgICBpc2hfbG9nX3JlcXVpcmUgJG5hbWUgLWcgJG1vZCBieSBgX2ZpbGVsaW5lIDIgMmAKCiAgICBsb2NhbCBmaWxlPSQocmVxdWlyZV9wYXRoICRtb2QpCiAgICBbIC1mICIkZmlsZSIgXSB8fCBpZiBlY2hvICRtb2R8IGdyZXAgIl5naXQiICY+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgZmlsZT0kKHJlcXVpcmVfZm9yayAiJG1vZCIgIiR0YWciKS8kMSAmJiBzaGlmdAogICAgZWxpZiBlY2hvICRtb2R8IGdyZXAgInNoeWxpbnV4LmNvbS94LyIgJj4vZGV2L251bGw7IHRoZW4KICAgICAgICBmaWxlPSQocmVxdWlyZV9mb3JrICIkbW9kIiAiJHRhZyIpLyQxICYmIHNoaWZ0CiAgICBlbHNlCiAgICAgICAgZmlsZT0kKHJlcXVpcmVfdGVtcCAkbW9kKQogICAgZmk7IFsgLWYgIiRmaWxlIiBdIHx8IHJldHVybiAwCgogICAgbG9jYWwgYmFjaz0kUFdEICYmIFsgLWQgIiR7ZmlsZSUvKn0iIF0gJiYgY2QgJHtmaWxlJS8qfQogICAgSVNIX0NUWF9NT0RVTEU9JChfbmFtZSBpc2hfJHtuYW1lfSkgSVNIX0NUWF9TQ1JJUFQ9JDEgX2xvYWQgJGZpbGUgIiRAIgogICAgY2QgJGJhY2s7IHJldHVybiAwCn0KX2xvYWQoKSB7CiAgICBsb2NhbCBmaWxlPSQxICYmIHNoaWZ0CiAgICBpc2hfbG9nX3NvdXJjZSAiJGZpbGUgIiRAIiIKICAgIHNvdXJjZSAuLyR7ZmlsZSMjKi99ICIkQCIKfQpfbmFtZSgpIHsKICAgIGxvY2FsIG5hbWU9IiQqIiAmJiBlY2hvICR7bmFtZS8vW15hLXpBLVowLTlfXS9ffQp9Cl9maWxlbGluZSgpIHsKICAgIGxvY2FsIGluZGV4MT0kKCgkezF9LTEpKQogICAgZWNobyAiJHtCQVNIX1NPVVJDRVskMV19OiR7QkFTSF9MSU5FTk9bJGluZGV4MV19OiR7RlVOQ05BTUVbJGluZGV4MV19Igp9Cgo=",
        "usr/intshell/show.sh": "IyEvYmluL3NoCgpJU0hfU0hPV19DT0xPUl9hcmc9IlxlWzMzOzRtIgoKSVNIX1NIT1dfQ09MT1Jfcj0iXGVbMzFtIgpJU0hfU0hPV19DT0xPUl9nPSJcZVszMm0iCklTSF9TSE9XX0NPTE9SX3k9IlxlWzMzbSIKSVNIX1NIT1dfQ09MT1JfYj0iXGVbMzRtIgpJU0hfU0hPV19DT0xPUl9wPSJcZVszNW0iCklTSF9TSE9XX0NPTE9SX2M9IlxlWzM2bSIKCklTSF9TSE9XX0NPTE9SX3JlZD0iXGVbMzFtIgpJU0hfU0hPV19DT0xPUl9ncmVlbj0iXGVbMzJtIgpJU0hfU0hPV19DT0xPUl9ibHVlPSJcZVszNG0iCklTSF9TSE9XX0NPTE9SX3llbGxvdz0iXGVbMzNtIgpJU0hfU0hPV19DT0xPUl9wdXJwbGU9IlxlWzM1bSIKSVNIX1NIT1dfQ09MT1JfY3lhbj0iXGVbMzZtIgpJU0hfU0hPV19DT0xPUl9ibGFjaz0iXGVbMzdtIgpJU0hfU0hPV19DT0xPUl93aGl0ZT0iXGVbMzBtIgpJU0hfU0hPV19DT0xPUl9iZ19yZWQ9IlxlWzQxbSIKSVNIX1NIT1dfQ09MT1JfYmdfZ3JlZW49IlxlWzQybSIKSVNIX1NIT1dfQ09MT1JfYmdfYmx1ZT0iXGVbNDRtIgpJU0hfU0hPV19DT0xPUl9iZ195ZWxsb3c9IlxlWzQzbSIKSVNIX1NIT1dfQ09MT1JfYmdfcHVycGxlPSJcZVs0NW0iCklTSF9TSE9XX0NPTE9SX2JnX2N5YW49IlxlWzQ2bSIKSVNIX1NIT1dfQ09MT1JfYmdfYmxhY2s9IlxlWzQ3bSIKSVNIX1NIT1dfQ09MT1JfYmdfd2hpdGU9IlxlWzQwbSIKSVNIX1NIT1dfQ09MT1JfYm9sZD0iXGVbMW0iCklTSF9TSE9XX0NPTE9SX3VuZGVybGluZT0iXGVbNG0iCklTSF9TSE9XX0NPTE9SX3JldmVyc2U9IlxlWzdtIgpJU0hfU0hPV19DT0xPUl9ibGluaz0iXGVbNW0iCklTSF9TSE9XX0NPTE9SX2VuZD0iXGVbMG0iCgo=",
        "usr/intshell/sys/cli/cli.sh": "IyEvYmluL3NoCgppc2hfc3lzX2NsaV9hbGlhcygpIHsKICAgIFsgIiQjIiA9ICIwIiBdICYmIGFsaWFzICYmIHJldHVybgogICAgWyAiJCMiID0gIjEiIF0gJiYgYWxpYXMgJDEgJiYgcmV0dXJuCiAgICBpc2hfbG9nX2FsaWFzICItZyIgIiQxIiAiPT4iICIkMiIgYnkgYF9maWxlbGluZSAyYAogICAgYWxpYXMgJDE9IiQyIgp9CmlzaF9zeXNfY2xpX3NoZWxsKCkgewogICAgcHMgfGdyZXAgIl5cICokJCJ8Z3JlcCAtdiBncmVwfGdyZXAgLW8gIlthLXpdKiQiCn0KaXNoX3N5c19jbGlfcHJvbXB0KCkgewogICAgbG9jYWwgbmFtZT0kKGhvc3RuYW1lKSAmJiBuYW1lPSR7bmFtZSMjKi19ICYmIG5hbWU9JHtuYW1lJSVcLip9CiAgICBjYXNlICIkKGlzaF9zeXNfY2xpX3NoZWxsKSIgaW4KICAgICAgICBiYXNoKQogICAgICAgICAgICBleHBvcnQgUFMxPSJcXCFAJG5hbWVbXFx0XVxcV1xcJCAiCiAgICAgICAgICAgIDs7CiAgICAgICAgenNoKQogICAgICAgICAgICBleHBvcnQgUFMxPSJcXCFAJG5hbWVbXHRdXFdcJCAiCiAgICAgICAgICAgIDs7CiAgICBlc2FjCn0KaXNoX3N5c19jbGlfcHJlcGFyZSgpIHsKICAgIGxvY2FsIHJjPSIuYmFzaHJjIjsgY2FzZSAiJChpc2hfc3lzX2NsaV9zaGVsbCkiIGluCiAgICAgICAgYmFzaCkgcmM9Ii5iYXNocmMiOzsKICAgICAgICB6c2gpIHJjPSIuenNocmMiOzsKICAgIGVzYWMKCiAgICBbIC1kIH4vLmlzaCBdIHx8IFsgIiRQV0QiID0gIiRIT01FIiBdIHx8IGxuIC1zICRQV0QvLmlzaCAkSE9NRS8uaXNoCiAgICBncmVwICJzb3VyY2Ugfi8uYmFzaF9sb2NhbCIgfi8kcmMgJj4vZGV2L251bGwgfHwgY2F0ID4+IH4vJHJjIDw8RU5ECmlmIFsgLWYgfi8uaXNoL3BsdWcuc2ggXSAmJiBzb3VyY2Ugfi8uaXNoL3BsdWcuc2g7IHRoZW4KICAgIHJlcXVpcmUgY29uZi5zaAogICAgcmVxdWlyZSBtaXNzLnNoCmZpCgpbIC1mIH4vLmJhc2hfbG9jYWwgXSAmJiBzb3VyY2Ugfi8uYmFzaF9sb2NhbApFTkQKfQo=",
        "usr/intshell/sys/cli/date.sh": "IyEvYmluL3NoCgppc2hfc3lzX2RhdGUoKSB7IGRhdGUgKyIlWS0lbS0lZCAlSDolTTolUyI7IH0KaXNoX3N5c19kYXRlX2RhdGUoKSB7IGRhdGUgKyIlWS0lbS0lZCI7IH0KaXNoX3N5c19kYXRlX3RpbWUoKSB7IGRhdGUgKyIlSDolTTolUyI7IH0KCmlzaF9zeXNfZGF0ZV95ZWFyKCkgeyBkYXRlICsiJVkiOyB9CmlzaF9zeXNfZGF0ZV9tb250aCgpIHsgZGF0ZSArIiVtIjsgfQppc2hfc3lzX2RhdGVfZGF5KCkgeyBkYXRlICsiJWQiOyB9Cgppc2hfc3lzX2RhdGVfaG91cigpIHsgZGF0ZSArIiVIIjsgfQppc2hfc3lzX2RhdGVfbWludXRlKCkgeyBkYXRlICsiJU0iOyB9CmlzaF9zeXNfZGF0ZV9zZWNvbmQoKSB7IGRhdGUgKyIlUyI7IH0KCmlzaF9zeXNfZGF0ZV93ZWVrZGF5KCkgeyBkYXRlICsiJXciOyB9CmlzaF9zeXNfZGF0ZV90aW1lem9uZSgpIHsgZGF0ZSArIiV6IjsgfQoKaXNoX3N5c19kYXRlX2ZpbGVuYW1lKCkgeyBkYXRlICsiJVklbSVkXyVIJU0lUyI7IH0KCg==",
        "usr/intshell/sys/cli/file.sh": "IyEvYmluL3NoCgppc2hfc3lzX3BhdGhfY3JlYXRlKCkgewogICAgbG9jYWwgdGFyZ2V0PSQxICYmIFsgLWQgJHt0YXJnZXQlLyp9IF0gJiYgcmV0dXJuCiAgICBbICR7dGFyZ2V0JS8qfSAhPSAke3RhcmdldH0gXSAmJiBta2RpciAtcCAke3RhcmdldCUvKn0gfHwgcmV0dXJuIDAKfQppc2hfc3lzX3BhdGhfaW5zZXJ0KCkgewogICAgZm9yIHAgaW4gIiRAIjsgZG8KICAgICAgICBlY2hvICRQQVRIfCBncmVwICIkcCIgJj4vZGV2L251bGwgfHwgZXhwb3J0IFBBVEg9JHA6JFBBVEgKICAgIGRvbmUKfQppc2hfc3lzX3BhdGhfbG9hZCgpIHsKICAgIGxvY2FsIHBhdGg9JHtDVFhfUk9PVDo9JFBXRH0KICAgIGZvciBsaW5lIGluIGBjYXQgJHtwYXRofS9ldGMvcGF0aCAyPi9kZXYvbnVsbGA7IGRvCiAgICAgICAgaWYgZWNobyAkbGluZXwgZ3JlcCAtdiAiXi8iICY+L2Rldi9udWxsOyB0aGVuIGxpbmU9JHBhdGgvJGxpbmU7IGZpCiAgICAgICAgaXNoX3N5c19wYXRoX2luc2VydCAkbGluZQogICAgZG9uZQp9CmlzaF9zeXNfZmlsZV9zaXplKCkgewogICAgbG9jYWwgc2l6ZT1gbHMgLXMgJDEgMj4vZGV2L251bGx8IGdyZXAgLW8gIlswLTldKiJ8aGVhZCAtbjFgCiAgICBbICIkc2l6ZSIgPSAiIiBdICYmIHNpemU9MDsgZWNobyAkc2l6ZQp9CmlzaF9zeXNfZmlsZV9jcmVhdGUoKSB7CiAgICBbIC1lICQxIF0gJiYgcmV0dXJuIHx8IGlzaF9sb2dfZGVidWcgLWcgImNyZWF0ZSBmaWxlICR7UFdEfSAkMSIKICAgIGlzaF9zeXNfcGF0aF9jcmVhdGUgJDEgJiYgY2F0ID4gJDEKfQppc2hfc3lzX2xpbmtfY3JlYXRlKCkgewogICAgWyAteiAiJDIiIF0gJiYgcmV0dXJuCiAgICBbIC1lICIkMSIgXSAmJiByZXR1cm4gfHwgaXNoX2xvZ19kZWJ1ZyAtZyAiY3JlYXRlIGxpbmsgJDEgPT4gJDIiCiAgICBpc2hfc3lzX3BhdGhfY3JlYXRlICQxICYmIGxuIC1zICQyICQxCn0KCg==",
        "usr/intshell/sys/sys.sh": "IyEvYmluL3NoCgpyZXF1aXJlIHN5cy9jbGkvY2xpLnNoCnJlcXVpcmUgc3lzL2NsaS9kYXRlLnNoCnJlcXVpcmUgc3lzL2NsaS9maWxlLnNoCgpyZXF1aXJlIHN5cy93ZWIvd2ViLnNoCnJlcXVpcmUgc3lzL3dlYi9kZXYuc2gKCg==",
        "usr/intshell/sys/web/dev.sh": "IyEvYmluL3NoCgppc2hfc3lzX2Rldl9zaWQ9JHtpc2hfc3lzX2Rldl9zaWQ6PSIifQppc2hfc3lzX2Rldl9zaWQoKSB7IGVjaG8gJGlzaF9zeXNfZGV2X3NpZDsgfQppc2hfc3lzX2Rldl9yZXF1ZXN0KCkgewogICAgbG9jYWwgdXJsPSRjdHhfZGV2L2NvZGUvYmFzaC8kMSAmJiBzaGlmdAogICAgaXNoX3N5c193ZWJfcmVxdWVzdCAiJHVybCIgIiRAIiBwd2QgIiR7UFdEfSIgc2lkICIkaXNoX3N5c19kZXZfc2lkIiBwb2QgJGN0eF9wb2QKfQppc2hfc3lzX2Rldl9zb3VyY2UoKSB7CiAgICBsb2NhbCBjdHhfdGVtcD0kKG1rdGVtcCk7IGlzaF9zeXNfZGV2X3JlcXVlc3QgIiRAIiA+JGN0eF90ZW1wICYmIHNvdXJjZSAkY3R4X3RlbXAgIiRAIgp9CmlzaF9zeXNfZGV2X2NvbmZpZ3MoKSB7CiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IGNvbmZpZ3MKfQppc2hfc3lzX2Rldl9xcmNvZGUoKSB7CiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IHFyY29kZSB0ZXh0ICIkQCIKfQppc2hfc3lzX2Rldl9sb2dvdXQoKSB7CiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IHNlc3MgY21kcyBsb2dvdXQgMj4vZGV2L251bGwgJiYgaXNoX3N5c19kZXZfc2lkPSIiCn0KaXNoX3N5c19kZXZfbG9naW4oKSB7CiAgICBpc2hfc3lzX2Rldl9zaWQ9JChpc2hfc3lzX2Rldl9yZXF1ZXN0IHNlc3MgdXNlcm5hbWUgIiQod2hvYW1pKSIgaG9zdG5hbWUgIiQoaG9zdG5hbWUpIiBwaWQgIiQkIikKfQoKaXNoX3N5c19kZXZfdXBsb2FkKCkgewogICAgWyAiJCMiID0gIjAiIF0gJiYgaXNoX3N5c19kZXZfcmVxdWVzdCBkb3dubG9hZCAmJiByZXR1cm4KICAgIGxvY2FsIGZpbGU9JDEgJiYgc2hpZnQgJiYgaXNoX3N5c19kZXZfcmVxdWVzdCB1cGxvYWQgdXBsb2FkICJAJGZpbGUiICRACn0KaXNoX3N5c19kZXZfZG93bmxvYWQoKSB7CiAgICBbICIkIyIgPSAiMCIgXSAmJiBpc2hfc3lzX2Rldl9yZXF1ZXN0IGRvd25sb2FkICYmIHJldHVybgogICAgaXNoX3N5c19kZXZfcmVxdWVzdCBkb3dubG9hZCBjbWRzICRACn0KCmlzaF9zeXNfZGV2X3RyYXNoPSR7aXNoX3N5c19kZXZfdHJhc2g6PX4vdHJhc2h9CmlzaF9zeXNfZGV2X3RyYXNoKCkgewogICAgbG9jYWwgZnJvbT0kUFdELyQxIHRvPSRpc2hfc3lzX2Rldl90cmFzaC8kKGlzaF9zeXNfZGF0ZV9maWxlbmFtZSktYGVjaG8gJFBXRC8kMXwgdHIgJy8nICdfJ2AKICAgIGxvY2FsIHNpemU9YGR1IC1zYiAkZnJvbSAyPi9kZXYvbnVsbCB8Y3V0IC1mMSAyPi9kZXYvbnVsbGAKICAgIGlzaF9zeXNfZGV2X3JlcXVlc3QgdHJhc2ggY21kcyBpbnNlcnQgc2l6ZSAiJHNpemUiIGZyb20gIiRmcm9tIiB0byAiJHRvIiAmPi9kZXYvbnVsbAogICAgbWtkaXIgLXAgJGlzaF9zeXNfZGV2X3RyYXNoICY+L2Rldi9udWxsOyBtdiAkZnJvbSAkdG8KfQoKaXNoX3N5c19kZXZfZmF2b3IoKSB7CiAgICBpZiBbIC16ICIkMSIgXTsgdGhlbiBpc2hfc3lzX2Rldl9yZXF1ZXN0IGZhdm9yOyByZXR1cm47IGZpCiAgICBpc2hfc3lzX2Rldl9yZXF1ZXN0IGZhdm9yIGNtZHMgZXhwb3J0IHpvbmUgIiQxIiBuYW1lICIkMiIKfQp6c2hhZGRoaXN0b3J5KCkgewogICAgbG9jYWwgbmFtZT1gaGlzdG9yeXx0YWlsIC1uMXxncmVwIC1vICJbMC05XVwrXCAiYAogICAgWyAtbiAiJG5hbWUiIF0gJiYgWyAiJGlzaF9zeXNfZGV2X3N5bmNfbGFzdCIgIT0gIiRuYW1lIiBdICYmICgobmFtZSA9IG5hbWUgKyAxKSkgJiYgaXNoX3N5c19kZXZfcmVxdWVzdCBzeW5jIGNtZHMgaGlzdG9yeSBhcmcgIiRuYW1lIGBkYXRlICsiJVktJW0tJWQgJUg6JU06JVMiYCAkMSIgPi9kZXYvbnVsbAogICAgaXNoX3N5c19kZXZfc3luY19sYXN0PSRuYW1lCn0KaXNoX3N5c19kZXZfc3luYygpIHsKICAgIGxvY2FsIGNtZD1gSElTVFRJTUVGT1JNQVQ9IiVGICVUICIgaGlzdG9yeXx0YWlsIC1uMWAKICAgIFsgLW4gIiRjbWQiIF0gJiYgWyAiJGlzaF9zeXNfZGV2X3N5bmNfbGFzdCIgIT0gIiRjbWQiIF0gJiYgaXNoX3N5c19kZXZfcmVxdWVzdCBzeW5jIFNIRUxMICIkU0hFTEwiIGNtZHMgaGlzdG9yeSBhcmcgIiRjbWQiID4vZGV2L251bGwKICAgIGlzaF9zeXNfZGV2X3N5bmNfbGFzdD0kY21kCn0KaXNoX3N5c19kZXZfZXhpdCgpIHsKICAgIGlzaF9zeXNfZGV2X2xvZ291dAp9CmlzaF9zeXNfZGV2X2luaXQoKSB7CiAgICBpc2hfc3lzX2Rldl9sb2dpbgogICAgaWYgYmluZCAmPi9kZXYvbnVsbDsgdGhlbiAjIGJhc2gKICAgICAgICB0cmFwIGlzaF9zeXNfZGV2X2V4aXQgRVhJVAogICAgICAgIHRyYXAgaXNoX3N5c19kZXZfc3luYyBERUJVRwoKICAgIGVsaWYgYmluZGtleSAmPi9kZXYvbnVsbDsgdGhlbiAjIHpzaAogICAgICAgIGVjaG8gPiAvZGV2L251bGwKICAgIGZpCn0KIyBpc2hfc3lzX2Rldl9pbml0Cgppc2hfc3lzX2Rldl9ydW5fbG9naW4oKSB7CiAgICBsb2NhbCB1cmw9JGN0eF9kZXYvY2hhdC9jbWQvd2ViLmNvZGUuYmFzaC5ncmFudC8kaXNoX3N5c19kZXZfc2lkCiAgICBpc2hfc3lzX2Rldl9xcmNvZGUgJHVybAogICAgZWNobwp9CmlzaF9zeXNfZGV2X3J1bl9wcmVsb2FkPSIiCmlzaF9zeXNfZGV2X3J1bl9wcmVwYXJlKCkgewogICAgbG9jYWwgY21kPSJydW4vYWN0aW9uL2NvbW1hbmQiOyBmb3Iga2V5IGluICIkQCI7IGRvIGNtZD0kY21kIi8iJGtleTsgZG9uZQogICAgaWYgWyAiJGlzaF9zeXNfZGV2X3J1bl9wcmVsb2FkIiA9ICIiIF07IHRoZW4KICAgICAgICBpc2hfc3lzX2Rldl9ydW5fcHJlbG9hZD0kKG1rdGVtcCk7IGlzaF9zeXNfZGV2X3JlcXVlc3QgJGNtZCA+JGlzaF9zeXNfZGV2X3J1bl9wcmVsb2FkCiAgICBmaQogICAgc291cmNlICRpc2hfc3lzX2Rldl9ydW5fcHJlbG9hZCAkaXNoX3N5c19kZXZfcnVuX291dHB1dAp9CmlzaF9zeXNfZGV2X3J1bl9vdXRwdXQ9IiIKaXNoX3N5c19kZXZfcnVuKCkgewogICAgaWYgWyAiJCoiID0gIiIgXTsgdGhlbiByZXR1cm47IGZpCiAgICBsb2NhbCBjbWQ9InJ1bi9hY3Rpb24vcnVuIjsgZm9yIGtleSBpbiAiJEAiOyBkbyBjbWQ9JGNtZCIvIiRrZXk7IGRvbmUKICAgIGlzaF9zeXNfZGV2X3J1bl9vdXRwdXQ9JChta3RlbXApOyBpc2hfc3lzX2Rldl9yZXF1ZXN0ICRjbWQgPiRpc2hfc3lzX2Rldl9ydW5fb3V0cHV0CiAgICBpZiBoZWFkIC1uMSAkaXNoX3N5c19kZXZfcnVuX291dHB1dHxncmVwICJ3YXJuOiBub3QgbG9naW4iICY+L2Rldi9udWxsOyB0aGVuCiAgICAgICAgaXNoX3N5c19kZXZfcnVuX2xvZ2luOyByZXR1cm4KICAgIGVsaWYgaGVhZCAtbjEgJGlzaF9zeXNfZGV2X3J1bl9vdXRwdXR8Z3JlcCAid2Fybjogbm90IHJpZ2h0IiAmPi9kZXYvbnVsbDsgdGhlbgogICAgICAgIGlzaF9zeXNfZGV2X3J1bl9sb2dpbjsgcmV0dXJuCiAgICBlbHNlCiAgICAgICAgaXNoX3N5c19kZXZfcnVuX3ByZXBhcmUgIiRAIgogICAgZmkKfQo=",
        "usr/intshell/sys/web/web.sh": "IyEvYmluL3NoCgppc2hfc3lzX3dlYl93b3JkKCkgewogICAgZWNobyAiJCoifHNlZCAicy9cIC8lMjAvZyJ8c2VkICJzL3wvJTdDL2cifHNlZCAicy9cOy8lM0IvZyJ8c2VkICJzL1xbLyU1Qi9nInxzZWQgInMvXF0vJTVEL2ciCn0KaXNoX3N5c193ZWJfcmVxdWVzdCgpIHsKICAgIGxvY2FsIHVybD0iJDEiICYmIHNoaWZ0ICYmIHdoaWxlIFsgIiQjIiAtZ3QgIjEiIF07IGRvCiAgICAgICAgZWNobyAiLUYiICIkMT0kKGlzaF9zeXNfd2ViX3dvcmQgJDIpIiAmJiBzaGlmdCAyCiAgICBkb25lIHx4YXJncyBjdXJsIC1zTCAkdXJsCn0K",

        "src/h1/h1.go": "cGFja2FnZSBoMQoKaW1wb3J0ICgKCSJzaHlsaW51eC5jb20veC9pY2UiCikKCnR5cGUgaDEgc3RydWN0IHsKCWljZS5ab25lCgoJbGlzdCBzdHJpbmcgYG5hbWU6Imxpc3Qgem9uZSBpZCBhdXRvIGluc2VydCIgaGVscDoi56S65L6LImAKfQoKZnVuYyAocyBoMSkgTGlzdChtICppY2UuTWVzc2FnZSwgYXJnIC4uLnN0cmluZykgewoJcy5ab25lLkxpc3QobSwgYXJnLi4uKQp9CgpmdW5jIGluaXQoKSB7IGljZS5DbWQoIndlYi5jb2RlLmgxLmgxIiwgaDF7fSkgfQo=",
        "src/h1/h1.js": "Vm9sY2Fub3MoIm9uaW1wb3J0Iiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRHVtcChjYW4pCn19KQ==",
        "src/h1/h1.shy": "Y2hhcHRlciAiaDEiCgpmaWVsZCAi56S65L6LIiB3ZWIuY29kZS5oMS5oMQo=",
        "src/help/devops.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIue8lueoi+aJi+WGjCIK",
        "src/help/devops/context.shy": "Y2hhcHRlciAi5qGG5p6257yW56iLIgoK",
        "src/help/devops/module.shy": "Y2hhcHRlciAi5qih5Z2X57yW56iLIgoK",
        "src/help/devops/script.shy": "Y2hhcHRlciAi6ISa5pys57yW56iLIgoKCg==",
        "src/help/index.shy": "bmF2bWVudSBgCuWbnuWIsOmmlumhtSBob21lCuWFpemXqOeugOS7iyB0dXRvci5zaHkK5L2/55So5omL5YaMIG1hbnVhbC5zaHkKICDlronoo4Xlkb3ku6QgbWFudWFsL2luc3RhbGwuc2h5CiAg5bqU55So576k57uEIG1hbnVhbC9yaXZlci5zaHkKICDlhbHkuqvpk77mjqUgbWFudWFsL3NoYXJlLnNoeQogIOW3peS9nOepuumXtCBtYW51YWwvc3BhY2Uuc2h5CiAg5bel5L2c6ISa5pysIG1hbnVhbC93b3JkLnNoeQoK5pyN5Yqh5omL5YaMIHNlcnZpY2Uuc2h5CiAg6K6k6K+B5pyN5YqhIHNlcnZpY2UvYXV0aC5zaHkKICDln5/lkI3mnI3liqEgc2VydmljZS9kb21haW4uc2h5CiAg56m66Ze05pyN5YqhIHNlcnZpY2Uvc3BhY2Uuc2h5CiAg5rqQ56CB5pyN5YqhIHNlcnZpY2UvY29kZS5zaHkKCue8lueoi+aJi+WGjCBkZXZvcHMuc2h5CiAg6ISa5pys57yW56iLIGRldm9wcy9zY3JpcHQuc2h5CiAg5qih5Z2X57yW56iLIGRldm9wcy9tb2R1bGUuc2h5CiAg5qGG5p6257yW56iLIGRldm9wcy9jb250ZXh0LnNoeQoK5Y+C6ICD5omL5YaMIHJlZmVyLnNoeQogIOWPguaVsOWIl+ihqCByZWZlci9ydW50aW1lLnNoeQogIOWHveaVsOWIl+ihqCByZWZlci9tZXNzYWdlLnNoeQogIOaooeWdl+WIl+ihqCByZWZlci9jb250ZXh0LnNoeQogIOWRveS7pOWIl+ihqCByZWZlci9jb21tYW5kLnNoeQogIOS6i+S7tuWIl+ihqCByZWZlci9zaWduYWwuc2h5CiAg5pyN5Yqh5YiX6KGoIHJlZmVyL3NwYWNlLnNoeQpgCg==",
        "src/help/manual.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIuS9v+eUqOaJi+WGjCIKCg==",
        "src/help/manual/install.shy": "Y2hhcHRlciAi5a6J6KOF5ZG95LukIgoKd2ViLmNvZGUucHVibGlzaCBjb250ZXh0cyBiaW5hcnkKCg==",
        "src/help/manual/river.shy": "Y2hhcHRlciAi5bqU55So57uEIgoKZmllbGQgIuW6lOeUqOe7hCIgcml2ZXIK",
        "src/help/manual/share.shy": "Y2hhcHRlciAi5YWx5Lqr6ZO+5o6lIgoKZmllbGQgIuWFseS6q+mTviIgc2hhcmUK",
        "src/help/manual/space.shy": "Y2hhcHRlciAi5bel5L2c56m66Ze0IgoKZmllbGQgIuepuumXtOermSIgc3BhY2UKCg==",
        "src/help/manual/word.shy": "Y2hhcHRlciAi5bel5L2c6ISa5pysIgoK",
        "src/help/refer.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIuWPguiAg+aJi+WGjCIKCg==",
        "src/help/refer/command.shy": "Y2hhcHRlciAi5ZG95Luk5YiX6KGoIgoKdGFibGUgcnVuIGNvbW1hbmQK",
        "src/help/refer/context.shy": "Y2hhcHRlciAi5qih5Z2X5YiX6KGoIgoKdGFibGUgcnVuIGNvbnRleHQK",
        "src/help/refer/message.shy": "Y2hhcHRlciAi5Ye95pWw5YiX6KGoIgoKdGFibGUgcnVuIG1lc3NhZ2UKCg==",
        "src/help/refer/runtime.shy": "Y2hhcHRlciAi5Y+C5pWw5YiX6KGoIgoKanNvbiBydW4gcnVudGltZQoK",
        "src/help/refer/signal.shy": "Y2hhcHRlciAi5ZG95Luk5YiX6KGoIgoKdGFibGUgcnVuIHNpZ25hbAoK",
        "src/help/refer/space.shy": "Y2hhcHRlciAi5pyN5Yqh5YiX6KGoIgoKdGFibGUgcnVuIHNwYWNlCgo=",
        "src/help/service.shy": "c291cmNlIGluZGV4LnNoeQoKY2hhcHRlciAi5pyN5Yqh5omL5YaMIgoKZmllbGQgIuacjeWKoSIgc3BpZGUK",
        "src/help/tutor.shy": "c291cmNlIGluZGV4LnNoeQoKdGl0bGUgIuWFpemXqOeugOS7iyIKYnJpZWYgIue7iOerr+W3peWFt+mTvu+8jOS4gOS4quWPr+S7peW9k+aIkOW6lOeUqOahhuaetuOAgee9kee7nOW5s+WPsOOAgeaTjeS9nOezu+e7n+adpeS9v+eUqOeahOi2hee6p+mhueebruOAgiIKCm9yZGVyIGAK5piT6YOo572y77yMY29udGV4dHMg5L2/55SoIGdvbGFuZyDlvIDlj5HvvIzmnIDnu4jlj6rmnInkuIDkuKrmiafooYzmlofku7bvvIzlkIzml7bliY3nq6/ku6PnoIHkuZ/ooqvmiZPljIXov5vkuobmiafooYzmlofku7bvvIzlj6/ku6XlnKjku7vmhI/mnLrlmajkuIrkuIDplK7lkK/liqjmiYDmnInmnI3liqEK5piT5byA5Y+R77yMY29udGV4dHMg5a6a5LmJ5LqG57uf5LiA55qE5qCH5YeG5o6l5Y+j77yM5omA5pyJ55qE5Yqf6IO96YO95piv5Lul5qih5Z2X5YyW55qE5pa55byP77yM6L+b6KGM5byA5Y+R5LiO5L2/55So77yM5Y+v5Lul6Ieq6KGM5byA5Y+R5Ye65Lu75oSP5Yqf6IO955qE5qih5Z2XCuaYk+WumuWItu+8jGNvbnRleHRzIOaPkOS+m+S6huWQhOenjeWcuuaZr+WMluS4juS4quaAp+WMlueahOS9v+eUqOaWueW8j++8jOeUqOaIt+WPr+S7pee7hOWQiOS7u+aEj+eahOWKn+iDve+8jOiHquWKqOeUn+aIkOWQhOenjee9kemhte+8jOS7juiAjOW/q+mAn+WIm+W7uuWQhOenjee9keermQoK5aSa55So5oi377yMY29udGV4dHMg5Y+v5Lul6YCa6L+H5Lu75oSP57uI56uv6L+b6KGM6K6/6Zeu77yM5omA5pyJ55qE5qih5Z2X5Yqf6IO96YO95Y+v5Lul5a6e546w5aSa55So5oi355qE5Zyo57q/5Y2P5ZCMCuWkmue+pOe7hO+8jGNvbnRleHRzIOeahOiuvuiuoeWujOWFqOWfuuS6jue+pOe7hOeahOaWueW8j++8jOWOu+e7hOe7h+eUqOaIt+OAgeadg+mZkOOAgeepuumXtOOAgeiuvuWkh+OAgeWKn+iDveOAgeaWh+ahowrlpJrnqbrpl7TvvIzlnKjlkIzkuIDorr7lpIfkuIrvvIzlj6/ku6XliJvlu7rlh7rku7vmhI/lpJrkuKrnqbrpl7TvvIzmr4/kuKrnqbrpl7Tpg73mmK/kuIDkuKrlrozlhajni6znq4vnmoTov5DooYzljZXlhYMK5aSa6K6+5aSH77yM5Lu75oSP6YOo572y5LqGIGNvbnRleHRzIOeahOiuvuWkh++8jOmDveWPr+S7peebuOS6kui/nuaOpee7hOWQiOaIkOS4gOS4que9kee7nO+8jOmAmui/h+S7u+S9leS4gOWPsOiuvuWkh++8jOmDveWPr+S7peS9v+eUqOaVtOS4que9kee7nOeahOaJgOacieiuvuWkh+eahOaJgOacieWKn+iDvQpgCgpjaGFwdGVyICLlronoo4XkuI7lkK/liqgiCnNwYXJrIHNoZWxsIGAKY3R4X3RlbXA9JChta3RlbXApXDsgY3VybCAtZnNTTCBodHRwczovL3NoeWxpbnV4LmNvbSAtbyAkY3R4X3RlbXBcOyBzb3VyY2UgJGN0eF90ZW1wIGJpbmFyeQpgCnNwYXJrIGAK5ZyoIGxpbnV4IOaIliBtYWNPU1gg5LiK77yM5omT5byA5ZG95Luk6KGM57uI56uv77yM55u05o6l5omn6KGM5aaC5LiK5ZG95Luk77yM5L6/5Y+v5Lul5LiL6L295bm25ZCv5YqoIGNvbnRleHRz77yM5aaC5p6c5ZyoIHdpbmRvd3Mg5LiK77yM5bu66K6u5a6J6KOFIDxhIGhyZWY9Imh0dHBzOi8vZ2l0LXNjbS5jb20vZG93bmxvYWQvd2luIj5HaXRCYXNoPC9hPu+8jOeEtuWQjuWcqOe7iOerr+S4reaJp+ihjOWuieijheWRveS7pOOAggpgCnNwYXJrIGAK5pyN5Yqh5ZCv5Yqo5ZCO77yM5L6/5Y+v6YCa6L+H5ZG95Luk5Lqk5LqS55qE5pa55byP5L2/55So5omA5pyJ5Yqf6IO944CC5Lmf5Y+v5Lul5omT5byA572R6aG1IDxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCI+PC9hPu+8jOeUqOeVjOmdouS6pOS6kueahOaWueW8j+S9v+eUqOOAggpgCnNwYXJrIGAK5pyN5Yqh5ZCv5Yqo5ZCO77yM5L6/5Y+v6YCa6L+H5ZG95Luk5Lqk5LqS55qE5pa55byP5L2/55So5omA5pyJ5Yqf6IO944CC5Lmf5Y+v5Lul5omT5byA572R6aG1IDxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCI+PC9hPu+8jOeUqOeVjOmdouS6pOS6kueahOaWueW8j+S9v+eUqOOAggrlpoLmnpzkuI3mmK/lnKjmnKzmnLrlkK/liqjnmoTmnI3liqHvvIzorr/pl67nvZHpobXml7bpnIDopoHnmbvlvZXorqTor4HvvIzpu5jorqTnlKjmiLflkI0gcm9vdCDlr4bnoIEgcm9vdO+8jOWPr+S7peWcqOWQr+WKqOWRveS7pOaXtuWKoOWPguaVsOaMh+Wumu+8jOS5n+WPr+WcqOWQr+WKqOWQjumAmui/h+e9kemhteS/ruaUueWvhueggeOAggpgCgpzZWN0aW9uICLlkb3ku6TkuqTkupIiCnNwYXJrIGAKY29udGV4dHMg5Zyo5ZCv5Yqo5pe277yM6buY6K6k5Lya5ZCv5Yqo5LiA5Liq57uI56uv6Kej5p6Q5Zmo77yM5Y+v5Lul5YOPIHNoZWxsIOS4gOagt+ino+aekOW5tuaJp+ihjOWRveS7pOOAggpjb250ZXh0cyDkuK3nmoTmiYDmnInlip/og73pg73mmK/ku6XmqKHlnZflkb3ku6TnmoTmlrnlvI/lvIDlj5HnmoTvvIzmiYDku6XpgJrov4flkb3ku6Tlj6/ku6Xkvb/nlKjmiYDmnInnmoTlip/og73jgIIKYApzZWN0aW9uICLnvZHpobXkuqTkupIiCnNwYXJrIGAKY29udGV4dHMg6Ieq5bim55qE5LiA5Liq5YmN56uv5qGG5p6277yM5Lya5a+55qih5Z2X5ZG95Luk6L+b6KGM6Kej5p6Q5bm26Ieq5Yqo55Sf5oiQ5YmN56uv57uE5Lu277yM5omA5pyJ55qE5qih5Z2X5ZG95Luk6ZqP5pe26YO95Y+v5Lul55So57uE5Lu255qE5b2i5byP5re75Yqg5Yiw5Lu75oSP572R6aG15LiK44CCCui/meagt+WwseWPr+S7pemaj+aXtumaj+WcsOeahOagueaNruWcuuaZr+S4jumcgOaxgu+8jOWwhuaJgOmcgOimgeeahOWKn+iDveW/q+mAn+eahOe7hOWQiOWIsOS4gOi1t++8jOWcqOS4gOS4que9kemhteS4remrmOaViOmhuueVheeahOWujOaIkOS4gOS4quWujOaVtOeahOW3peS9nOa1geOAggpgCgpjaGFwdGVyICLliJvlu7rnqbrpl7QiCnNwYXJrIGAKY29udGV4dHMg5Zyo5LiA5Y+w6K6+5aSH5LiK5Y+v5Lul5ZCv5Yqo5aSa5Liq6L+b56iL77yM57G75Ly8IG5naW54IOS4u+S7juW8j+eahOi/m+eoi+aooeWei++8jArmnInkuIDkuKogc2VydmVyIOiKgueCueS4juWkmuS4qiB3b3JrZXIg6IqC54K577yM5q+P5LiqIHdvcmtlciDoioLngrnpg73ov5DooYzlnKjlkIToh6rnmoTnm67lvZXkuIvvvIzmi6XmnInni6znq4vnmoTnqbrpl7TjgIIKc2VydmVyIOiKgueCueS8muWQr+WKqCB3ZWIg5pyN5Yqh5bm26Ieq5Yqo55Sf5oiQ572R6aG177yM5bCG572R6aG15Lit55qE5ZG95Luk6K+35rGC5YiG5Y+R5Yiw5ZCE5LiqIHdvcmtlciDoioLngrnkuIrvvIzlubblsIbmiafooYznu5PmnpzmmL7npLrliLDnvZHpobXkuIrjgIIKYApzZWN0aW9uICLnvZHpobXmk43kvZwiCnNwYXJrIGAK5omT5byA572R6aG1IDxhIGhyZWY9Imh0dHA6Ly9sb2NhbGhvc3Q6OTAyMCI+PC9hPiDvvIzmib7liLDliJvlu7roj5zljZXvvIjoj5zljZXmoI8gLT4g5Yib5bu6IC0+IOWIm+W7uuepuumXtO+8ie+8jArlnKjlvLnlh7rnmoTovpPlhaXmoYbkuK3vvIzovpPlhaUgbmFtZSDlkI7vvIzngrnlh7vmj5DkuqTljbPlj6/liJvlu7rmlrDnmoTnqbrpl7TvvIxzZXJ2ZXIg6IqC54K55Lya5ZCv5Yqo5LiA5Liq5paw55qEIHdvcmtlciDov5vnqIvmnaXnrqHnkIbmraTnqbrpl7TjgIIK6ZqP5ZCO5Lya6Ieq5Yqo5omT5byA5LiA5Liq5paw55qE572R6aG1IGh0dHA6Ly9sb2NhbGhvc3Q6OTAyMC9jaGF0L3BvZC94eHh477yM6YCa6L+H6L+Z5Liq572R6aG15bCx5Y+v5Lul5L2/55So5paw56m66Ze055qE5ZCE56eN5Yqf6IO944CCCmAKCnNlY3Rpb24gIuWRveS7pOaTjeS9nCIKc3BhcmsgYOS5n+WPr+S7peWcqOWQr+WKqOacjeWKoeeahOWRveS7pOihjOS4reWIm+W7uuepuumXtO+8jOi+k+WFpeWmguS4i+WRveS7pOWNs+WPr++8jGRlbW8g5piv5paw56m66Ze055qE5ZCN56ew77yM5Y+v5Lul6Ieq6KGM5a6a5LmJ44CCYApzcGFyayBzaGVsbCBgZHJlYW0gc3RhcnQgbmFtZSBkZW1vYApzcGFyayBg54S25ZCO6YCa6L+HIHNwYWNlIOWRveS7pO+8jOWPr+S7peWQkeatpOepuumXtOS4i+WPkeWQhOenjeWRveS7pO+8jOW5tuWwhuaJp+ihjOe7k+aenOaYvuekuuWIsOe7iOerr2AKc3Bhcmsgc2hlbGwgYHNwYWNlIGRlbW8gc3lzdGVtIHB3ZGAKCmNoYXB0ZXIgIuWIm+W7uuaooeWdlyIKc3BhcmsgYApjb250ZXh0cyDmj5DkvpvkuobkuIDkuKrlrozmlbTnmoTliY3lkI7nq6/moYbmnrbvvIzlj6/ku6Xlv6vpgJ/nmoTlvIDlj5Hlh7rlkITnp43lip/og73mqKHlnZfjgIIKY29udGV4dHMg5Lya6Ieq5Yqo5bCG6L+Z5Lqb5Yqf6IO95qih5Z2X6L2s5o2i5oiQ57uI56uv5ZG95Luk44CB5YmN56uv57uE5Lu244CB6L+c56iL6LCD55So562J77yM5LuO6ICM5YGa5Yiw5LiA5Lu95Luj56CB5Y+v5Lul6ZqP5pe26ZqP5Zyw6KKr5ZCE56eN5pa55byP5L2/55So44CCCmAKc2VjdGlvbiAi5re75Yqg5Luj56CBIgpzcGFyayBgCnZpbWVyIOWRveS7pOaPkOS+m+S6huS7o+eggee8lui+keeahOWKn+iDve+8jOmAmui/hyBhdXRvZ2VuIOWtkOWRveS7pOWPr+S7peeUn+aIkOaooeWdl+eahOekuuS+i+S7o+eggeOAguWcqOatpOWfuuehgOS4iua3u+WKoOiHquW3seeahOS7o+eggeWNs+WPr+OAggrlpoLkuIvlkb3ku6TvvIzkvJroh6rliqjnlJ/miJDkuIDkuKogc3JjL2hpL2hpLmdvIOeahOaooeWdl+aWh+S7tu+8jOW5tuWcqCBzcmMvbWFpbi5nbyDkuK3lvJXnlKjmraTmqKHlnZfjgIIKYApzcGFyayBzaGVsbCBgdmltZXIgYXV0b2dlbiBtYWluIHNyYy9tYWluLmdvIG5hbWUgaGlgCmZpZWxkICJzcmMvaGkvaGkuZ28iIHdlYi5jb2RlLmlubmVyIHNwYXJrIGAKcGFja2FnZSBoaQoKaW1wb3J0ICgKCSJzaHlsaW51eC5jb20veC9pY2UiCikKCnR5cGUgaGkgc3RydWN0IHsKCWljZS5ab25lCn0KCmZ1bmMgKGggaGkpIExpc3QobSAqaWNlLk1lc3NhZ2UsIGFyZyAuLi5zdHJpbmcpIHsKCWguWm9uZS5MaXN0KG0sIGFyZy4uLikKfQoKZnVuYyBpbml0KCkgeyBpY2UuQ21kKCJ3ZWIuY29kZS5oaS5oaSIsIGhpe30pIH0KYAoKc2VjdGlvbiAi57yW6K+R6aG555uuIgpzcGFyayBgCnZpbWVyIOeahCBjb21waWxlIOWtkOWRveS7pO+8jOaPkOS+m+S6hue8luivkeeahOWKn+iDve+8jOe8luivkeaIkOWKn+WQju+8jOacjeWKoei/m+eoi+S8muiHquWKqOmHjeWQr+OAggpgCnNwYXJrIHNoZWxsIGB2aW1lciBjb21waWxlYAoKc2VjdGlvbiAi5omn6KGM5ZG95LukIgpzcGFyayBg5pyN5Yqh6YeN5ZCv5ZCO77yM5Y2z5Y+v6YCa6L+HIHdlYi5jb2RlLmhpLmhpIOWRveS7pOS9v+eUqOaWsOWKn+iDveOAgmluc2VydCDlrZDlkb3ku6Tlj6/ku6Xmt7vliqDmlbDmja7vvIzkuLvlkb3ku6Tmn6XnnIvmlbDmja7jgIJgCnNwYXJrIHNoZWxsIGB3ZWIuY29kZS5oaS5oaSBpbnNlcnQgem9uZSBoaSB0ZXh0IGhlbGxvYApzcGFyayBzaGVsbCBgd2ViLmNvZGUuaGkuaGlgCgpjaGFwdGVyICLliJvlu7rnvZHnq5kiCnNwYXJrIGAK6YCa6L+HIGNvbnRleHRzIOWQr+WKqOS6huWkmuS4quepuumXtOOAgea3u+WKoOS6huWkmuS4quWRveS7pOWQju+8jOWwseWPr+S7peWwhui/meS6m+WFg+e0oOW/q+mAn+e7hOijheaIkOWQhOenjee9kemhte+8jOS7juiAjOWIm+W7uuWHuuWQhOenjeWQhOagt+eahOe9keermeOAggpgCnNwYXJrIGBjb250ZXh0cyDpgJrov4fkuIDnp43pnZ7luLjnroDljZXnmoTmj4/ov7DmgKfor63oqIDvvIznlKjnuq/mlofmnKznmoTmlrnlvI/lrprkuYnnvZHnq5njgIJgCnNwYXJrIGDlnKjnm67lvZUgc3JjL3dlYnNpdGUvIOS4i+WIm+W7uuaWh+S7tiBoaS50eHTvvIzmiZPlvIAgPGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo5MDIwL2NoYXQvd2Vic2l0ZS9oaS50eHQiPjwvYT4g5Y2z5Y+v5p+l55yL6Ieq5Yqo55Sf5oiQ55qE572R6aG1YApmaWVsZCAic3JjL3dlYnNpdGUvaGkudHh0IiB3ZWIuY29kZS5pbm5lciBzcGFyayBgCuezu+e7n+euoeeQhgoJ57O757uf5ZG95LukCgkJY2xpLnJ1bnRpbWUKCQljbGkuc3lzdGVtCgkJY2xpLnFyY29kZQoJ5paH5Lu25ZG95LukCgkJbmZzLmRpcgoJCW5mcy5jYXQKCQluZnMudGFpbApgCgpzcGFyayBgCnNyYy93ZWJzaXRlLyDnm67lvZXmmK/lm7rlrprnmoTvvIxjb250ZXh0cyDlj6rkvJrlr7nmraTnm67lvZXnmoQgdHh0IOaWh+S7tui/m+ihjOino+aekOOAggrmr4/kuIDooYzpg73mmK/kuIDkuKrmoJHnmoToioLngrnvvIzpgJrov4fnvKnov5vku6PooajlsYLnuqfvvIzpgJrov4cga2V5IHZhbHVlIOeahOW9ouW8j+mZhOWKoOWQhOenjeWxnuaAp+OAggrliIblj4noioLngrnpg73kvJrmt7vliqDliLDlr7zoiKrmoI/nmoTnu5PmnoTmoJHkuK3vvIzkvZzkuLrlr7zoiKrpgInpobnvvIzlj7blrZDoioLngrnpg73kvJroh6rliqjop6PmnpDmiJDnu4Tku7bmt7vliqDliLDlt6XkvZzlj7DkuK3jgIIK5b2T5a+86Iiq5qCP6YCJ5Lit5Lu75oSP5Liq5YiG5Y+J6IqC54K55pe277yM5YW25Y+25a2Q6IqC54K555qE5ZG95Luk6Kej5p6Q55qE57uE5Lu277yM5Lya6Ieq5Yqo5pi+56S65Yiw5bel5L2c5Y+w5Lit44CCCmAKc3BhcmsgYOeUn+aIkOe9kemhteeahOmihOiniOaViOaenOWmguS4i2AKc3BhcmsgZmllbGQgYArns7vnu5/nrqHnkIYKCeezu+e7n+WRveS7pAoJCWNsaS5ydW50aW1lCgkJY2xpLnN5c3RlbQoJCWNsaS5xcmNvZGUKCeaWh+S7tuWRveS7pAoJCW5mcy5kaXIKCQluZnMuY2F0CgkJbmZzLnRhaWwKYAoKY2hhcHRlciAi5Yib5bu6576k57uEIgpzcGFyayBgCmNvbnRleHRzIOS4reeahOi1hOa6kOaYr+S7pee+pOe7hOeahOaWueW8j+i/m+ihjOe7hOe7h++8jOWDj+iBiuWkqei9r+S7tueahOe+pOe7hOS4gOagt++8jArnlKjmiLflj6/ku6XliJvlu7rku7vmhI/nmoTnvqTnu4TvvIznhLblkI7lsIbnm7jlhbPnmoTkurrlkZjjgIHlt6XlhbfjgIHotYTmupDnrYnlhajpg73mt7vliqDov5vljrvjgIIK5q+P5Liq576k57uE5LiL5Y+v5Lul5Yib5bu65aSa5Liq5bqU55So77yM5q+P5Liq5bqU55So5LiL5Y+v5Lul5re75Yqg5aSa5Liq5ZG95Luk44CCCuWcqOiPnOWNleagj+WSjOWPs+mUruiPnOWNleS4reWPr+S7peeci+WIsOWQhOenjeWIm+W7uumAiemhue+8jOi+k+WFpeebuOWFs+eahOS/oeaBr+WNs+WPr+WIm+W7uuOAggpgCnNwYXJrIHNoZWxsIGByaXZlciBjcmVhdGUgdHlwZSBwdWJsaWMgbmFtZSBkZW1vYAoKY2hhcHRlciAi5YWx5Lqr5bqU55SoIgpzcGFyayBgCuWQhOenjei1hOa6kO+8jOWmgue+pOe7hOOAgeW6lOeUqOOAgeW3peWFt+etie+8jOmDveWPr+S7peS4gOmUruWFseS6q++8jOWunueOsOWkmuS6uueahOWcqOe6v+WNj+WQjO+8jOS7juiAjOmZjeS9juayn+mAmuaIkOacrO+8jOaPkOWNh+W3peS9nOaViOeOh+OAggrlnKjoj5zljZXmoI/lkozlj7PplK7oj5zljZXkuK3lj6/ku6XnnIvliLDlkITnp43lhbHkuqvpgInpobnvvIzovpPlhaXnm7jlhbPnmoTkv6Hmga/ljbPlj6/kuIDplK7liIbkuqvjgIIKYAoKY2hhcHRlciAi5re75Yqg6K6+5aSHIgpzcGFyayBgCmNvbnRleHRzIOi/mOaUr+aMgeWkmuiuvuWkh+e7hOW7uumbhue+pO+8jOS7u+aEj+acjeWKoeiKgueCuemDveWPr+S7peS9nOS4uuS7o+eggeacjeWKoeWZqOOAgemVnOWDj+acjeWKoeWZqOOAgeiupOivgeacjeWKoeWZqOOAgeS7o+eQhuacjeWKoeWZqOOAgeaWh+S7tuacjeWKoeWZqOetieOAggrlpJrlj7Dpg6jnvbLkuoYgY29udGV4dHMg55qE6K6+5aSH77yM5Y+v5Lul5Lu75oSP57uE57uH572R57uc57uT5p6E77yM5q+P5Liq6IqC54K56YO95Y+v5Lul5Y2V54us5o+Q5L6b5omA5pyJ5pyN5Yqh77yM5Lmf5Y+v5Lul6K6/6Zeu5YW25a6D6IqC54K55LiK55qE5omA5pyJ5Yqf6IO944CCCmAKCg==",
        "src/help/tutor/func.shy": "cHJlbWVudQoKdGl0bGUgIuWkmuWKn+iDvSIKZmllbGQgIuaooeWdlyIgY29udGV4dApmaWVsZCAi5qih5Z2XIiBjb21tYW5kCgpjaGFwdGVyICLorqHliJIiCmZpZWxkICLorqHliJIiIHdlYi50ZWFtLnBsYW4KCmNoYXB0ZXIgIuebuOWGjCIKZmllbGQgIuebuOWGjCIgd2ViLndpa2kuZmVlbAoKY2hhcHRlciAi57uY5Zu+IgpmaWVsZCAi57uY5Zu+IiB3ZWIud2lraS5kcmF3CgpjaGFwdGVyICLnvJbnqIsiCmZpZWxkICLnvJbovpHlmagiIHdlYi5jb2RlLnZpbWVyCmZpZWxkICLotovlir/lm74iIHdlYi5jb2RlLmdpdC50cmVuZCBhcmdzIGBpY2ViZXJnc2AKZmllbGQgIuaetuaehOWbviIgd2ViLmNvZGUuZ2l0LnNwaWRlIGFyZ3MgYGljZWJlcmdzYAoKCg==",
        "src/help/tutor/node.shy": "Y2hhcHRlciAi5aSa6K6+5aSHIgoKZmllbGQgIuepuumXtOermSIgc3BhY2UKCg==",
        "src/help/tutor/task.shy": "Y2hhcHRlciAi5aSa5Lu75YqhIgoKZmllbGQgIuaipuaDs+WutiIgZHJlYW0KCgo=",
        "src/help/tutor/user.shy": "Y2hhcHRlciAi5aSa55So5oi3IgoKZmllbGQgIueUqOaItyIgdXNlcgoKCg==",
        "src/hi/hi.go": "cGFja2FnZSBoaQoKaW1wb3J0ICgKCSJzaHlsaW51eC5jb20veC9pY2UiCikKCnR5cGUgaGkgc3RydWN0IHsKCWljZS5ab25lCgoJbGlzdCBzdHJpbmcgYG5hbWU6Imxpc3Qgem9uZSBpZCBhdXRvIGluc2VydCIgaGVscDoi56S65L6LImAKfQoKZnVuYyAocyBoaSkgU2hvdyhtICppY2UuTWVzc2FnZSwgYXJnIC4uLnN0cmluZykgewoJbS5FY2hvKCJoZWxsbyB3b3JsZCIpCgltLlN0YXR1c1RpbWUoKQp9CgpmdW5jIChzIGhpKSBMaXN0KG0gKmljZS5NZXNzYWdlLCBhcmcgLi4uc3RyaW5nKSB7CglzLlpvbmUuTGlzdFBhZ2UobSwgYXJnLi4uKQoJbS5FY2hvKCJoZWxsbyB3b3JsZCIpCn0KCmZ1bmMgaW5pdCgpIHsgaWNlLkNtZCgid2ViLmNvZGUuaGkuaGkiLCBoaXt9KSB9Cg==",
        "src/hi/hi.js": "Vm9sY2Fub3MoIm9uaW1wb3J0Iiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRWNobygiaGVsbG8gd29ybGQiKQoJbXNnLkR1bXAoY2FuKQp9fSk=",
        "src/hi/hi.py": "cHJpbnQgImhlbGxvIHdvcmxkIgpwcmludCAiaGVsbG8gd29ybGQi",
        "src/hi/hi.sh": "IyEgL2Jpbi9zaAoKX2xpc3QKZWNobwoKX2xpc3QgaGkKZWNobwoKX2xpc3QgaGkgMQplY2hvCgplY2hvICJoZWxsbyB3b3JsZCIK",
        "src/hi/hi.shy": "Y2hhcHRlciAiaGkiCgpjaGFpbiBgCmNvbnRleHRzCgl2b2xjYW5vcwoJdm9sY2Fub3MKCQlsaWIKCQlwYWdlCgkJcGFuZWwKCQlwdWJsaXNoCglpY2ViZXJncwoJCWJhc2UKCQljb3JlCgkJbWlzYwoJdG9vbGtpdHMKYCBzaGlwLnN0cm9rZS13aWR0aCAxIGxpbmUuc3Ryb2tlLXdpZHRoIDEKCmNoYXJ0IHNlcXVlbmNlIGAKZmUgYmUgb3MgaGQKMCBjYWxsIDEgc29tZSAzCjAgY2FsbCAxIHNvbWUgMwowIGNhbGwgMSBzb21lIDMKMCBjYWxsIDEgc29tZSAzCjAgY2FsbCAxIHNvbWUgMwpgIG1hcmdpbnggODAKCmZpZWxkIGNsaS5zeXN0ZW0K",
        "src/main.go": "cGFja2FnZSBtYWluCgppbXBvcnQgKAoJInNoeWxpbnV4LmNvbS94L2ljZSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvYWxwaGEiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL2Nocm9tZSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvY29kZXIiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL2lucHV0IgoKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvamF2YSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvbGFyayIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2MvbXAiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL25vZGUiCglfICJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL3dld29yayIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2Mvd3giCgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9jb21waWxlIgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9ncmFmYW5hIgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9wcm9qZWN0IgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9wcm9tZXRoZXVzIgoJXyAic2h5bGludXguY29tL3gvZ29sYW5nLXN0b3J5L3NyYy9ydW50aW1lIgoKCV8gInNoeWxpbnV4LmNvbS94L215c3FsLXN0b3J5L3NyYy9jbGllbnQiCglfICJzaHlsaW51eC5jb20veC9teXNxbC1zdG9yeS9zcmMvc2VhcmNoIgoJXyAic2h5bGludXguY29tL3gvbXlzcWwtc3Rvcnkvc3JjL3NlcnZlciIKCV8gInNoeWxpbnV4LmNvbS94L25naW54LXN0b3J5L3NyYy9zZXJ2ZXIiCglfICJzaHlsaW51eC5jb20veC9yZWRpcy1zdG9yeS9zcmMvY2xpZW50IgoJXyAic2h5bGludXguY29tL3gvcmVkaXMtc3Rvcnkvc3JjL3NlcnZlciIKKQoKZnVuYyBtYWluKCkgeyBwcmludChpY2UuUnVuKCkpIH0K",
        "src/main.js": "Vm9sY2Fub3MoIm9uaW1wb3J0Iiwge2hlbHA6ICLlr7zlhaXmlbDmja4iLCBfaW5pdDogZnVuY3Rpb24oY2FuLCBtc2cpIHsKCWNhbi5vbmFjdGlvbi5zaG93KGNhbiwgbXNnKQoJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKCW1zZy5FY2hvKCJoZWxsbyB3b3JsZCIpCgltc2cuRHVtcChjYW4pCn19KQpWb2xjYW5vcygib25hY3Rpb24iLCB7aGVscDogIuaTjeS9nOaVsOaNriIsIHNob3c6IGZ1bmN0aW9uKGNhbiwgbXNnKSB7Cgltc2cuUHVzaCgiaGkiLCAiaGVsbG8iKQoJbXNnLkVjaG8oImhlbGxvIHdvcmxkIikKfX0pCg==",
        "src/main.shy": "dGl0bGUgImNvbnRleHRzIgpyZWZlciBgCuWumOe9kSBodHRwczovL2NvbnRleHRzLmNvbS5jbgrmlofmoaMgaHR0cHM6Ly9jb250ZXh0cy5jb20uY24vaGVscC8K5rqQ56CBIGh0dHBzOi8vc2h5bGludXguY29tL3gvY29udGV4dHMKYAoKY2hhcHRlciAi5a6e6Le1IgpsYWJlbCBgCmNvZGUgd2lraSBjaGF0IHRlYW0gbWFsbApsaW51eCBuZ2lueCBjb250ZXh0IHJlZGlzIG15c3FsCmJhc2ggZ2l0IGdvbGFuZyB2aW0gdG11eApgCgpjaGFwdGVyICLnkIborroiCmxhYmVsIGAK6ZuG576k5YyWIOaooeWdl+WMliDoh6rliqjljJYKYCBmZyB5ZWxsb3cgYmcgYmxhY2sgdGV4dC5mb250LWZhbWlseSBub25lCgpjaGFwdGVyICLpobnnm64iCmxhYmVsIGAKaW50c2hlbGwgaWNlYmVyZ3Mgdm9sY2Fub3MKY29udGV4dHMgdG9vbGtpdHMgbGVhcm5pbmcKYCBmZyByZWQgYmcgYmxhY2sKCnNlY3Rpb24gIueBq+WxseaetiIKZmllbGQgIui2i+WKv+WbviIgd2ViLmNvZGUuZ2l0LnRyZW5kIGFyZ3MgYHZvbGNhbm9zYApmaWVsZCAi5p625p6E5Zu+IiB3ZWIuY29kZS5naXQuc3BpZGUgYXJncyBgdm9sY2Fub3NgCgpzZWN0aW9uICLlhrDlsbHmnrYiCmZpZWxkICLotovlir/lm74iIHdlYi5jb2RlLmdpdC50cmVuZCBhcmdzIGBpY2ViZXJnc2AKZmllbGQgIuaetuaehOWbviIgd2ViLmNvZGUuZ2l0LnNwaWRlIGFyZ3MgYGljZWJlcmdzYAoKc2VjdGlvbiAi56We5Yac5p62IgpmaWVsZCAi6LaL5Yq/5Zu+IiB3ZWIuY29kZS5naXQudHJlbmQgYXJncyBgaW50c2hlbGxgCmZpZWxkICLmnrbmnoTlm74iIHdlYi5jb2RlLmdpdC5zcGlkZSBhcmdzIGBpbnRzaGVsbGAKCnNwYXJrIG1kIFJFQURNRS5tZAoKc291cmNlICIuLi91c3IvaWNlYmVyZ3MvbWlzYy9ub2RlL3Z1ZS5zaHkiCnNvdXJjZSAiLi4vdXNyL2ljZWJlcmdzL21pc2MvamF2YS9zcHJpbmcuc2h5Igpzb3VyY2UgIi4uL3Vzci9pY2ViZXJncy9jb3JlL2NoYXQvbG9jYXRpb24uc2h5Igpzb3VyY2UgIi4uL3Vzci9pY2ViZXJncy9jb3JlL2NvZGUveHRlcm0uc2h5Igo=",
        "src/main.svg": "PHN2ZyB2ZXJ0aW9uPSIxLjEiIHhtbG5zPSJodHRwczovL3d3dy53My5vcmcvMjAwMC9zdmciIHRleHQtYW5jaG9yPSJtaWRkbGUiIGRvbWluYW50LWJhc2VsaW5lPSJtaWRkbGUiIGhlaWdodD0iMzg1IiB3aWR0aD0iNzUwIiBjb3VudD0iMTkiIHBpZD0icDE5IiBncmlkPSIxMCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2U9InllbGxvdyIgZmlsbD0icHVycGxlIiBmb250LXNpemU9IjI0Ij48Zz48cmVjdCBoZWlnaHQ9IjQwIiB3aWR0aD0iMTIwIiByeT0iNCIgcng9IjQiIHg9IjMwMCIgeT0iNDAiIHBpZD0icDEiIGNsYXNzPSJwMSIgdGV4dD0icDIiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3A3JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDgmcXVvdDssJnF1b3Q7d2hpY2gmcXVvdDs6MSwmcXVvdDthbmNob3ImcXVvdDs6OH0seyZxdW90O3BpZCZxdW90OzomcXVvdDtwOSZxdW90OywmcXVvdDt3aGljaCZxdW90OzoxLCZxdW90O2FuY2hvciZxdW90Ozo4fSx7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3AxMCZxdW90OywmcXVvdDt3aGljaCZxdW90OzoxLCZxdW90O2FuY2hvciZxdW90Ozo4fV0iIGluZGV4PSJjbGkuc3lzdGVtIiBhcmdzPSJwd2QiPjwvcmVjdD48dGV4dCB4PSIzNjAiIHk9IjYwIiBwaWQ9InAyIiBjbGFzcz0icDIiPnNoeTwvdGV4dD48L2c+PHJlY3QgaGVpZ2h0PSI0MCIgd2lkdGg9IjEyMCIgcnk9IjQiIHJ4PSI0IiB4PSI0OTAiIHk9IjE2MCIgdGV4dD0icDUiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3AxMCZxdW90OywmcXVvdDt3aGljaCZxdW90OzoyLCZxdW90O2FuY2hvciZxdW90OzoyfV0iIHBpZD0icDE5IiBjbGFzcz0icDE5IiBpbmRleD0id2ViLnJvdXRlIj48L3JlY3Q+PHJlY3QgaGVpZ2h0PSI0MCIgd2lkdGg9IjEyMCIgcnk9IjQiIHJ4PSI0IiB4PSIzMDAiIHk9IjE2MCIgdGV4dD0icDQiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90O3A5JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE0JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE1JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE2JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjEsJnF1b3Q7YW5jaG9yJnF1b3Q7Ojh9XSIgcGlkPSJwMTciIGNsYXNzPSJwMTciIGluZGV4PSJjbGkucnVudGltZSI+PC9yZWN0PjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iMTEwIiB5PSIxNjAiIHRleHQ9InAzIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwOCZxdW90OywmcXVvdDt3aGljaCZxdW90OzoyLCZxdW90O2FuY2hvciZxdW90OzoyfV0iIHBpZD0icDE4IiBjbGFzcz0icDE4Ij48L3JlY3Q+PHRleHQgeD0iMTcwIiB5PSIxODAiIHBpZD0icDMiIGNsYXNzPSJwMyI+b2xkPC90ZXh0Pjx0ZXh0IHg9IjM2MCIgeT0iMTgwIiBwaWQ9InA0IiBjbGFzcz0icDQiPmRldjwvdGV4dD48dGV4dCB4PSI1NTAiIHk9IjE4MCIgcGlkPSJwNSIgY2xhc3M9InA1Ij5jb208L3RleHQ+PGc+PC9nPjxsaW5lIHgxPSIzNjAiIHkxPSI4MCIgeDI9IjM2MCIgeTI9IjgwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwNyIgY2xhc3M9InA3Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjgwIiB4Mj0iMTcwIiB5Mj0iMTYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwOCIgY2xhc3M9InA4Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjgwIiB4Mj0iMzYwIiB5Mj0iMTYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwOSIgY2xhc3M9InA5Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjgwIiB4Mj0iNTUwIiB5Mj0iMTYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDtwMSZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwMTAiIGNsYXNzPSJwMTAiPjwvbGluZT48ZyBjbGFzcz0ibWFjIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iYmxhY2siIGZpbGw9ImN5YW4iIGZvbnQtc2l6ZT0iMjQiIHN0eWxlPSJvcGFjaXR5OiAxOyBkaXNwbGF5OiBibG9jazsiPjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iMzAwIiB5PSIyNjAiIHRleHQ9InAxMSIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE1JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9XSI+PC9yZWN0Pjx0ZXh0IHg9IjM2MCIgeT0iMjgwIiBwaWQ9InAxMSIgY2xhc3M9InAxMSI+TUIyPC90ZXh0PjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iNDkwIiB5PSIyNjAiIHRleHQ9InAxMyIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE2JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9XSI+PC9yZWN0PjxyZWN0IGhlaWdodD0iNDAiIHdpZHRoPSIxMjAiIHJ5PSI0IiByeD0iNCIgeD0iMTEwIiB5PSIyNjAiIHRleHQ9InAxMiIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7cDE0JnF1b3Q7LCZxdW90O3doaWNoJnF1b3Q7OjIsJnF1b3Q7YW5jaG9yJnF1b3Q7OjJ9XSI+PC9yZWN0Pjx0ZXh0IHg9IjE3MCIgeT0iMjgwIiBwaWQ9InAxMiIgY2xhc3M9InAxMiI+TUIxPC90ZXh0Pjx0ZXh0IHg9IjU1MCIgeT0iMjgwIiBwaWQ9InAxMyIgY2xhc3M9InAxMyI+TUIwPC90ZXh0PjxsaW5lIHgxPSIzNjAiIHkxPSIyMDAiIHgyPSIxNzAiIHkyPSIyNjAiIHNoaXA9Ilt7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90OyZxdW90O30seyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9XSIgcGlkPSJwMTQiIGNsYXNzPSJwMTQiPjwvbGluZT48bGluZSB4MT0iMzYwIiB5MT0iMjAwIiB4Mj0iMzYwIiB5Mj0iMjYwIiBzaGlwPSJbeyZxdW90O3BpZCZxdW90OzomcXVvdDsmcXVvdDt9LHsmcXVvdDtwaWQmcXVvdDs6JnF1b3Q7JnF1b3Q7fV0iIHBpZD0icDE1IiBjbGFzcz0icDE1Ij48L2xpbmU+PGxpbmUgeDE9IjM2MCIgeTE9IjIwMCIgeDI9IjU1MCIgeTI9IjI2MCIgc2hpcD0iW3smcXVvdDtwaWQmcXVvdDs6JnF1b3Q7JnF1b3Q7fSx7JnF1b3Q7cGlkJnF1b3Q7OiZxdW90OyZxdW90O31dIiBwaWQ9InAxNiIgY2xhc3M9InAxNiI+PC9saW5lPjwvZz48L3N2Zz4=",
        "src/relay.go": "cGFja2FnZSBtYWluCgppbXBvcnQgKAoJIm9zIgoJInBhdGgiCgoJInNoeWxpbnV4LmNvbS94L2ljZSIKCV8gInNoeWxpbnV4LmNvbS94L2ljZWJlcmdzL21pc2Mvc3NoIgopCgpmdW5jIG1haW4oKSB7CglkZWZlciBmdW5jKCkgeyByZWNvdmVyKCkgfSgpCglhcmdzIDo9IFtdc3RyaW5neyJzc2guY29ubmVjdCIsICJvcGVuIiwgImF1dGhmaWxlIiwgcGF0aC5Kb2luKG9zLkdldGVudigiSE9NRSIpLCAiLnNzaC8iLCBwYXRoLkJhc2Uob3MuQXJnc1swXSkrIi5qc29uIil9CglwcmludChpY2UuUnVuKGFwcGVuZChhcmdzLCBvcy5BcmdzWzE6XS4uLikuLi4pKQp9Cg==",
        "src/webview.go": "cGFja2FnZSBtYWluCgppbXBvcnQgKAoJIm9zIgoJInRpbWUiCgoJInNoeWxpbnV4LmNvbS94L2ljZSIKCSJzaHlsaW51eC5jb20veC9pY2ViZXJncy9taXNjL3dlYnZpZXciCglraXQgInNoeWxpbnV4LmNvbS94L3Rvb2xraXRzIgopCgp0eXBlIHZpZXcgc3RydWN0eyAqd2Vidmlldy5XZWJWaWV3IH0KCmZ1bmMgbWFpbigpIHsKCW9zLkNoZGlyKGtpdC5Ib21lUGF0aCgiY29udGV4dHMiKSkKCWdvIGljZS5SdW4oInNlcnZlIiwgInN0YXJ0IikKCXRpbWUuU2xlZXAodGltZS5TZWNvbmQpCgoJd2Vidmlldy5SdW4oZnVuYyh3ICp3ZWJ2aWV3LldlYlZpZXcpIGludGVyZmFjZXt9IHsgcmV0dXJuIHZpZXd7d30gfSkKfQo=",
        "src/webview.txt": "bG9jYWxob3N0IGh0dHA6Ly9sb2NhbGhvc3Q6OTAyMApzaHlsaW51eCBodHRwczovL3NoeWxpbnV4LmNvbQo=",

        "etc/miss.sh": "IyEvYmluL2Jhc2gKCnJlcXVpcmUgJj4vZGV2L251bGwgfHwgaWYgWyAtZiAkUFdELy5pc2gvcGx1Zy5zaCBdOyB0aGVuIHNvdXJjZSAkUFdELy5pc2gvcGx1Zy5zaDsgZWxpZiBbIC1mICRIT01FLy5pc2gvcGx1Zy5zaCBdOyB0aGVuIHNvdXJjZSAkSE9NRS8uaXNoL3BsdWcuc2g7IGVsc2UKCWN0eF90ZW1wPSQobWt0ZW1wKTsgaWYgY3VybCAtaCAmPi9kZXYvbnVsbDsgdGhlbiBjdXJsIC1vICRjdHhfdGVtcCAtZnNTTCBodHRwczovL3NoeWxpbnV4LmNvbTsgZWxzZSB3Z2V0IC1PICRjdHhfdGVtcCAtcSBodHRwOi8vc2h5bGludXguY29tOyBmaTsgc291cmNlICRjdHhfdGVtcCBpbnRzaGVsbApmaQoKcmVxdWlyZSBzeXMvY2xpL2ZpbGUuc2gKaXNoX3N5c19wYXRoX2xvYWQKClsgLWYgfi8uYmFzaF9wcm9maWxlIF0gfHwgZWNobyAic291cmNlIH4vLmJhc2hyYyIgPj4gfi8uYmFzaF9wcm9maWxlCmlzaF9zeXNfbGlua19jcmVhdGUgfi8uYmFzaF9sb2NhbCAkUFdEL2V0Yy9jb25mL2Jhc2hfbG9jYWwuc2gKCnJlcXVpcmUgbWlzcy5zaAppc2hfbWlzc19wcmVwYXJlX2NvbXBpbGUKaXNoX21pc3NfcHJlcGFyZV9kZXZlbG9wCmlzaF9taXNzX3ByZXBhcmVfaW5zdGFsbAoKIyBpc2hfbWlzc19wcmVwYXJlIHdvcmQtZGljdAojIGlzaF9taXNzX3ByZXBhcmUgd3ViaS1kaWN0Cgppc2hfbWlzc19wcmVwYXJlIGxpbnV4LXN0b3J5CmlzaF9taXNzX3ByZXBhcmUgbmdpbngtc3RvcnkKaXNoX21pc3NfcHJlcGFyZSBnb2xhbmctc3RvcnkKaXNoX21pc3NfcHJlcGFyZSByZWRpcy1zdG9yeQppc2hfbWlzc19wcmVwYXJlIG15c3FsLXN0b3J5CmlzaF9taXNzX3ByZXBhcmUgcmVsZWFzZQoKaXNoX21pc3NfcHJlcGFyZV9jb250ZXh0cwppc2hfbWlzc19wcmVwYXJlX2ludHNoZWxsCmlzaF9taXNzX3ByZXBhcmVfaWNlYmVyZ3MKaXNoX21pc3NfcHJlcGFyZV90b29sa2l0cwppc2hfbWlzc19wcmVwYXJlX3ZvbGNhbm9zCmlzaF9taXNzX3ByZXBhcmVfbGVhcm5pbmcKCmlzaF9taXNzX21ha2U7IGlmIFsgLW4gIiQqIiBdOyB0aGVuIC4vYmluL2ljZS5iaW4gZm9yZXZlciBzZXJ2ZSAiJEAiOyBmaQoKaXNoX3N5c19saW5rX2NyZWF0ZSB+Ly52aW1fbG9jYWwudmltICRQV0QvZXRjL2NvbmYvdmltX2xvY2FsLnZpbQpyZXF1aXJlIGRldi92aW0vdmltLnNoCmlzaF9kZXZfdmltX3ByZXBhcmUKCmlmIHRtdXggLVY7IHRoZW4KICAgIHJlcXVpcmUgZGV2L3RtdXgvdG11eC5zaAogICAgaXNoX2Rldl90bXV4X3ByZXBhcmUKICAgIGlzaF9taXNzX3ByZXBhcmVfc2Vzc2lvbiBtaXNzIG1pc3MKZWxzZQogICAgY3R4X2xvZz0vZGV2L3N0ZG91dCBpc2hfbWlzc19zZXJ2ZQpmaQoK",
        "etc/init.shy": "fmFhYSAKCXJvbGUgd2hpdGUgdm9pZCB3ZWIuY29kZS5naXQuc3BpZGUKCXJvbGUgd2hpdGUgdm9pZCB3ZWIuY29kZS5naXQudHJlbmQKCXJvbGUgd2hpdGUgdm9pZCB3ZWIuY29kZS5pbnB1dC5maW5kCglyb2xlIHdoaXRlIHZvaWQgd2ViLndpa2kuYWxwaGEuZmluZAoKfndlYi5jb2RlCgl3ZWJwYWNrIGluc2VydCB4dGVybQoJd2VicGFjayBpbnNlcnQgeHRlcm0tYWRkb24tZml0Cgl3ZWJwYWNrIGluc2VydCB4dGVybS1hZGRvbi13ZWItbGlua3MKCXdlYnBhY2sgaW5zZXJ0IHh0ZXJtL2Nzcy94dGVybS5jc3MKCn53ZWIuY29kZQoJY29uZmlnIGlubmVyIG1ldGEuc2hvdy50YWJzICIiCgljb25maWcgaW5uZXIgbWV0YS5zaG93LmV4dHMgImlubmVyL3NlYXJjaC5qcz9hPTEiCgljb25maWcgaW5uZXIgbWV0YS5zaG93LnBsdWcgIiIKCWNvbmZpZyB2aW1lciBtZXRhLnNob3cudGFicyAiIgoJY29uZmlnIHZpbWVyIG1ldGEuc2hvdy5leHRzICJpbm5lci9zZWFyY2guanM/YT0xLGlubmVyL2Zhdm9yLmpzIgoJY29uZmlnIHZpbWVyIG1ldGEuc2hvdy5wbHVnICJ3ZWIuY29kZS50bXV4LnNlc3Npb24sd2ViLmNvZGUuZ2l0LnN0YXR1cyx3ZWIuY29kZS54dGVybSxjbGkuc3lzdGVtIgoKfndlYi5jb2RlLmlucHV0CgkjIHd1YmkgbG9hZCBmaWxlIHVzci93dWJpLWRpY3Qvd3ViaTg2Cgl3dWJpIGxvYWQgZmlsZSB1c3Ivd3ViaS1kaWN0L3BlcnNvbiB6b25lIHBlcnNvbgoKfmdkYgoJIyBjb25maWcgdGltZXIgbWV0YS5lbmFibGUgdHJ1ZQoJZXZlbnQgYWN0aW9uIGxpc3RlbiBldmVudCBkcmVhbS5jcmVhdGUgY21kIHdlYi5jb2RlLnRtdXguc2Vzc2lvbgoKfnNzaAoJdGFyZ2V0IHdlYi5jb2RlCgl0YXJnZXQgd2ViLmNoYXQKCXNvdXJjZSBsb2NhbC5zaHkK",
        "etc/exit.shy": "fmFhYQo=",

        "LICENSE": "TUlUIExpY2Vuc2UKCkNvcHlyaWdodCAoYykgMjAyMCDnoIHnpZ4KClBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHkKb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwKaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cwp0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsCmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcwpmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOgoKVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsCmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuCgpUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgIkFTIElTIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUgpJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSwKRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFCkFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIKTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSwKT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUKU09GVFdBUkUuCg==",
        "Makefile": "ZXhwb3J0IENHT19FTkFCTEVEPTAKCnB1Ymxpc2ggPSB1c3IvcHVibGlzaC9pY2UuJChzaGVsbCBnbyBlbnYgR09PUykuJChzaGVsbCBnbyBlbnYgR09BUkNIKQpiaW5hcnlzID0gYmluL2ljZS5iaW4KCmFsbDogZGVmCglAZWNobyAmJiBkYXRlCglnbyBidWlsZCAtdiAtbyAke2JpbmFyeXN9IHNyYy9tYWluLmdvIHNyYy92ZXJzaW9uLmdvIHNyYy9iaW5wYWNrLmdvICYmIC4vJHtiaW5hcnlzfSBmb3JldmVyIHJlc3RhcnQgJj4vZGV2L251bGwKCW1rZGlyIC1wICQoZGlyICR7cHVibGlzaH0pICY+L2Rldi9udWxsOyBybSAke3B1Ymxpc2h9ICY+L2Rldi9udWxsOyBjcCAke2JpbmFyeXN9ICR7cHVibGlzaH0KCm1pcHNsZToKCUdPT1M9bGludXggR09BUkNIPW1pcHNsZSBnbyBidWlsZCAtbyB1c3IvcHVibGlzaC9pY2UubGludXgubWlwc2xlIHNyYy9tYWluLmdvIHNyYy92ZXJzaW9uLmdvIHNyYy9iaW5wYWNrLmdvCgphcm06CglHT09TPWxpbnV4IEdPQVJDSD1hcm0gZ28gYnVpbGQgLW8gdXNyL3B1Ymxpc2gvaWNlLmxpbnV4LmFybSBzcmMvbWFpbi5nbyBzcmMvdmVyc2lvbi5nbyBzcmMvYmlucGFjay5nbwoKZGVmOgoJQCBbIC1mIHNyYy92ZXJzaW9uLmdvIF0gfHwgZWNobyAicGFja2FnZSBtYWluIiA+IHNyYy92ZXJzaW9uLmdvCglAIFsgLWYgc3JjL2JpbnBhY2suZ28gXSB8fCBlY2hvICJwYWNrYWdlIG1haW4iID4gc3JjL2JpbnBhY2suZ28KCmFwcDoKCUNHT19FTkFCTEVEPTEgZ28gYnVpbGQgLW8gdXNyL3B1Ymxpc2gvY29udGV4dHMuYXBwL0NvbnRlbnRzL01hY09TL2NvbnRleHRzIHNyYy93ZWJ2aWV3LmdvIHNyYy9iaW5wYWNrLmdvICYmIG9wZW4gdXNyL3B1Ymxpc2gvY29udGV4dHMuYXBwCgkjIGhkaXV0aWwgY3JlYXRlIHVzci9wdWJsaXNoL3RtcC5kbWcgLW92IC12b2xuYW1lICJDb250ZXh0c0luc3RhbGwiIC1mcyBIRlMrIC1zcmNmb2xkZXIgInVzci9wdWJsaXNoL2NvbnRleHRzLmFwcCIKCSMgcm0gLWYgdXNyL3B1Ymxpc2gvQ29udGV4dHNJbnN0YWxsLmRtZwoJIyBoZGl1dGlsIGNvbnZlcnQgdXNyL3B1Ymxpc2gvdG1wLmRtZyAtZm9ybWF0IFVEWk8gLW8gdXNyL3B1Ymxpc2gvQ29udGV4dHNJbnN0YWxsLmRtZwoKJTogc3JjLyUuZ28KCUBlY2hvICYmIGRhdGUKCWdvIGJ1aWxkIC12IC1vIHVzci9wdWJsaXNoLyRAIHNyYy8kQC5nbyAmJiBjaG1vZCB1K3ggdXNyL3B1Ymxpc2gvJEAKCg==",
        "README.md": "IyBjb250ZXh0cwoKY29udGV4dHMg6YCa6L+H6ZuG576k5YyW44CB5qih5Z2X5YyW44CB6Ieq5Yqo5YyW55qE5pa55byP77yM55So5LiA5LiqIDIwTSDnmoTnqIvluo/mlofku7bvvIwg5bCx5Y+v5Lul5Zyo5ZCE56eN6K6+5aSH5LiK77yM5LiA6ZSu5pCt6LW35a6M5pW055qE5LqR6K6h566X5LiO5LqR56CU5Y+R5pyN5Yqh44CCCgojIyDlronoo4Xpobnnm64KCmBgYHNoCmN0eF90ZW1wPSQobWt0ZW1wKTsgY3VybCAtbyAkY3R4X3RlbXAgLWZzU0wgaHR0cHM6Ly9zaHlsaW51eC5jb207IHNvdXJjZSAkY3R4X3RlbXAgYmluYXJ5IHBvcnQgOTAyMApgYGAKCiMjIOS9v+eUqOmhueebrgrlpoLmnpzmmK/mnKzlnLDlkK/liqjvvIznm7TmjqXlhY3nmbvlvZXmiZPlvIDnvZHpobXvvIxodHRwOi8vbG9jYWxob3N0OjkwMjAg77yMCuWmguaenOaYr+i/nOeoi+aIluWuueWZqOWQr+WKqO+8jOi+k+WFpeebuOW6lOWcsOWdgOWQju+8jOi+k+WFpem7mOiupOeahCB1c2VybmFtZTogcm9vdCBwYXNzd29yZDogcm9vdCDljbPlj6/nmbvlvZUKCg==",

	}

	for k, v := range pack {
		if b, e := base64.StdEncoding.DecodeString(v); e == nil {
			nfs.PackFile.WriteFile(k, b)
		}
	}

}
